var dFe=Object.defineProperty;var hFe=(t,e,n)=>e in t?dFe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var yr=(t,e,n)=>(hFe(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Wi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function f1e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var m1e={exports:{}},hF={},g1e={exports:{}},Cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rM=Symbol.for("react.element"),pFe=Symbol.for("react.portal"),fFe=Symbol.for("react.fragment"),mFe=Symbol.for("react.strict_mode"),gFe=Symbol.for("react.profiler"),vFe=Symbol.for("react.provider"),yFe=Symbol.for("react.context"),bFe=Symbol.for("react.forward_ref"),_Fe=Symbol.for("react.suspense"),wFe=Symbol.for("react.memo"),xFe=Symbol.for("react.lazy"),Gve=Symbol.iterator;function SFe(t){return t===null||typeof t!="object"?null:(t=Gve&&t[Gve]||t["@@iterator"],typeof t=="function"?t:null)}var v1e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y1e=Object.assign,b1e={};function m1(t,e,n){this.props=t,this.context=e,this.refs=b1e,this.updater=n||v1e}m1.prototype.isReactComponent={};m1.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};m1.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _1e(){}_1e.prototype=m1.prototype;function w$(t,e,n){this.props=t,this.context=e,this.refs=b1e,this.updater=n||v1e}var x$=w$.prototype=new _1e;x$.constructor=w$;y1e(x$,m1.prototype);x$.isPureReactComponent=!0;var Wve=Array.isArray,w1e=Object.prototype.hasOwnProperty,S$={current:null},x1e={key:!0,ref:!0,__self:!0,__source:!0};function S1e(t,e,n){var r,i={},o=null,u=null;if(e!=null)for(r in e.ref!==void 0&&(u=e.ref),e.key!==void 0&&(o=""+e.key),e)w1e.call(e,r)&&!x1e.hasOwnProperty(r)&&(i[r]=e[r]);var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){for(var m=Array(h),v=0;v<h;v++)m[v]=arguments[v+2];i.children=m}if(t&&t.defaultProps)for(r in h=t.defaultProps,h)i[r]===void 0&&(i[r]=h[r]);return{$$typeof:rM,type:t,key:o,ref:u,props:i,_owner:S$.current}}function EFe(t,e){return{$$typeof:rM,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function E$(t){return typeof t=="object"&&t!==null&&t.$$typeof===rM}function CFe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $ve=/\/+/g;function OH(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CFe(""+t.key):e.toString(36)}function zL(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case rM:case pFe:u=!0}}if(u)return u=t,i=i(u),t=r===""?"."+OH(u,0):r,Wve(i)?(n="",t!=null&&(n=t.replace($ve,"$&/")+"/"),zL(i,e,n,"",function(v){return v})):i!=null&&(E$(i)&&(i=EFe(i,n+(!i.key||u&&u.key===i.key?"":(""+i.key).replace($ve,"$&/")+"/")+t)),e.push(i)),1;if(u=0,r=r===""?".":r+":",Wve(t))for(var h=0;h<t.length;h++){o=t[h];var m=r+OH(o,h);u+=zL(o,e,n,m,i)}else if(m=SFe(t),typeof m=="function")for(t=m.call(t),h=0;!(o=t.next()).done;)o=o.value,m=r+OH(o,h++),u+=zL(o,e,n,m,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function N3(t,e,n){if(t==null)return t;var r=[],i=0;return zL(t,r,"","",function(o){return e.call(n,o,i++)}),r}function PFe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ra={current:null},VL={transition:null},TFe={ReactCurrentDispatcher:Ra,ReactCurrentBatchConfig:VL,ReactCurrentOwner:S$};Cr.Children={map:N3,forEach:function(t,e,n){N3(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return N3(t,function(){e++}),e},toArray:function(t){return N3(t,function(e){return e})||[]},only:function(t){if(!E$(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Cr.Component=m1;Cr.Fragment=fFe;Cr.Profiler=gFe;Cr.PureComponent=w$;Cr.StrictMode=mFe;Cr.Suspense=_Fe;Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TFe;Cr.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=y1e({},t.props),i=t.key,o=t.ref,u=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,u=S$.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(m in e)w1e.call(e,m)&&!x1e.hasOwnProperty(m)&&(r[m]=e[m]===void 0&&h!==void 0?h[m]:e[m])}var m=arguments.length-2;if(m===1)r.children=n;else if(1<m){h=Array(m);for(var v=0;v<m;v++)h[v]=arguments[v+2];r.children=h}return{$$typeof:rM,type:t.type,key:i,ref:o,props:r,_owner:u}};Cr.createContext=function(t){return t={$$typeof:yFe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vFe,_context:t},t.Consumer=t};Cr.createElement=S1e;Cr.createFactory=function(t){var e=S1e.bind(null,t);return e.type=t,e};Cr.createRef=function(){return{current:null}};Cr.forwardRef=function(t){return{$$typeof:bFe,render:t}};Cr.isValidElement=E$;Cr.lazy=function(t){return{$$typeof:xFe,_payload:{_status:-1,_result:t},_init:PFe}};Cr.memo=function(t,e){return{$$typeof:wFe,type:t,compare:e===void 0?null:e}};Cr.startTransition=function(t){var e=VL.transition;VL.transition={};try{t()}finally{VL.transition=e}};Cr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Cr.useCallback=function(t,e){return Ra.current.useCallback(t,e)};Cr.useContext=function(t){return Ra.current.useContext(t)};Cr.useDebugValue=function(){};Cr.useDeferredValue=function(t){return Ra.current.useDeferredValue(t)};Cr.useEffect=function(t,e){return Ra.current.useEffect(t,e)};Cr.useId=function(){return Ra.current.useId()};Cr.useImperativeHandle=function(t,e,n){return Ra.current.useImperativeHandle(t,e,n)};Cr.useInsertionEffect=function(t,e){return Ra.current.useInsertionEffect(t,e)};Cr.useLayoutEffect=function(t,e){return Ra.current.useLayoutEffect(t,e)};Cr.useMemo=function(t,e){return Ra.current.useMemo(t,e)};Cr.useReducer=function(t,e,n){return Ra.current.useReducer(t,e,n)};Cr.useRef=function(t){return Ra.current.useRef(t)};Cr.useState=function(t){return Ra.current.useState(t)};Cr.useSyncExternalStore=function(t,e,n){return Ra.current.useSyncExternalStore(t,e,n)};Cr.useTransition=function(){return Ra.current.useTransition()};Cr.version="18.2.0";g1e.exports=Cr;var Vt=g1e.exports;const E1e=f1e(Vt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MFe=Vt,kFe=Symbol.for("react.element"),AFe=Symbol.for("react.fragment"),IFe=Object.prototype.hasOwnProperty,RFe=MFe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DFe={key:!0,ref:!0,__self:!0,__source:!0};function C1e(t,e,n){var r,i={},o=null,u=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(u=e.ref);for(r in e)IFe.call(e,r)&&!DFe.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:kFe,type:t,key:o,ref:u,props:i,_owner:RFe.current}}hF.Fragment=AFe;hF.jsx=C1e;hF.jsxs=C1e;m1e.exports=hF;var gt=m1e.exports,k9={},P1e={exports:{}},Ml={},T1e={exports:{}},M1e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Be,Xe){var qe=Be.length;Be.push(Xe);e:for(;0<qe;){var dt=qe-1>>>1,Pt=Be[dt];if(0<i(Pt,Xe))Be[dt]=Xe,Be[qe]=Pt,qe=dt;else break e}}function n(Be){return Be.length===0?null:Be[0]}function r(Be){if(Be.length===0)return null;var Xe=Be[0],qe=Be.pop();if(qe!==Xe){Be[0]=qe;e:for(var dt=0,Pt=Be.length,cn=Pt>>>1;dt<cn;){var ht=2*(dt+1)-1,Et=Be[ht],$t=ht+1,Zt=Be[$t];if(0>i(Et,qe))$t<Pt&&0>i(Zt,Et)?(Be[dt]=Zt,Be[$t]=qe,dt=$t):(Be[dt]=Et,Be[ht]=qe,dt=ht);else if($t<Pt&&0>i(Zt,qe))Be[dt]=Zt,Be[$t]=qe,dt=$t;else break e}}return Xe}function i(Be,Xe){var qe=Be.sortIndex-Xe.sortIndex;return qe!==0?qe:Be.id-Xe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var m=[],v=[],x=1,E=null,M=3,D=!1,H=!1,F=!1,B=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(Be){for(var Xe=n(v);Xe!==null;){if(Xe.callback===null)r(v);else if(Xe.startTime<=Be)r(v),Xe.sortIndex=Xe.expirationTime,e(m,Xe);else break;Xe=n(v)}}function Z(Be){if(F=!1,W(Be),!H)if(n(m)!==null)H=!0,Te(ve);else{var Xe=n(v);Xe!==null&&st(Z,Xe.startTime-Be)}}function ve(Be,Xe){H=!1,F&&(F=!1,z(pe),pe=-1),D=!0;var qe=M;try{for(W(Xe),E=n(m);E!==null&&(!(E.expirationTime>Xe)||Be&&!Ee());){var dt=E.callback;if(typeof dt=="function"){E.callback=null,M=E.priorityLevel;var Pt=dt(E.expirationTime<=Xe);Xe=t.unstable_now(),typeof Pt=="function"?E.callback=Pt:E===n(m)&&r(m),W(Xe)}else r(m);E=n(m)}if(E!==null)var cn=!0;else{var ht=n(v);ht!==null&&st(Z,ht.startTime-Xe),cn=!1}return cn}finally{E=null,M=qe,D=!1}}var X=!1,se=null,pe=-1,J=5,ne=-1;function Ee(){return!(t.unstable_now()-ne<J)}function ot(){if(se!==null){var Be=t.unstable_now();ne=Be;var Xe=!0;try{Xe=se(!0,Be)}finally{Xe?wt():(X=!1,se=null)}}else X=!1}var wt;if(typeof P=="function")wt=function(){P(ot)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,Ye=ue.port2;ue.port1.onmessage=ot,wt=function(){Ye.postMessage(null)}}else wt=function(){B(ot,0)};function Te(Be){se=Be,X||(X=!0,wt())}function st(Be,Xe){pe=B(function(){Be(t.unstable_now())},Xe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Be){Be.callback=null},t.unstable_continueExecution=function(){H||D||(H=!0,Te(ve))},t.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<Be?Math.floor(1e3/Be):5},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(Be){switch(M){case 1:case 2:case 3:var Xe=3;break;default:Xe=M}var qe=M;M=Xe;try{return Be()}finally{M=qe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Be,Xe){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var qe=M;M=Be;try{return Xe()}finally{M=qe}},t.unstable_scheduleCallback=function(Be,Xe,qe){var dt=t.unstable_now();switch(typeof qe=="object"&&qe!==null?(qe=qe.delay,qe=typeof qe=="number"&&0<qe?dt+qe:dt):qe=dt,Be){case 1:var Pt=-1;break;case 2:Pt=250;break;case 5:Pt=1073741823;break;case 4:Pt=1e4;break;default:Pt=5e3}return Pt=qe+Pt,Be={id:x++,callback:Xe,priorityLevel:Be,startTime:qe,expirationTime:Pt,sortIndex:-1},qe>dt?(Be.sortIndex=qe,e(v,Be),n(m)===null&&Be===n(v)&&(F?(z(pe),pe=-1):F=!0,st(Z,qe-dt))):(Be.sortIndex=Pt,e(m,Be),H||D||(H=!0,Te(ve))),Be},t.unstable_shouldYield=Ee,t.unstable_wrapCallback=function(Be){var Xe=M;return function(){var qe=M;M=Xe;try{return Be.apply(this,arguments)}finally{M=qe}}}})(M1e);T1e.exports=M1e;var OFe=T1e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1e=Vt,Cl=OFe;function Gt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A1e=new Set,pT={};function Y0(t,e){Jw(t,e),Jw(t+"Capture",e)}function Jw(t,e){for(pT[t]=e,t=0;t<e.length;t++)A1e.add(e[t])}var mp=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),A9=Object.prototype.hasOwnProperty,LFe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kve={},Xve={};function NFe(t){return A9.call(Xve,t)?!0:A9.call(Kve,t)?!1:LFe.test(t)?Xve[t]=!0:(Kve[t]=!0,!1)}function FFe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function BFe(t,e,n,r){if(e===null||typeof e>"u"||FFe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Da(t,e,n,r,i,o,u){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=u}var Ao={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ao[t]=new Da(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ao[e]=new Da(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ao[t]=new Da(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ao[t]=new Da(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ao[t]=new Da(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ao[t]=new Da(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ao[t]=new Da(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ao[t]=new Da(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ao[t]=new Da(t,5,!1,t.toLowerCase(),null,!1,!1)});var C$=/[\-:]([a-z])/g;function P$(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(C$,P$);Ao[e]=new Da(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(C$,P$);Ao[e]=new Da(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(C$,P$);Ao[e]=new Da(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ao[t]=new Da(t,1,!1,t.toLowerCase(),null,!1,!1)});Ao.xlinkHref=new Da("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ao[t]=new Da(t,1,!1,t.toLowerCase(),null,!0,!0)});function T$(t,e,n,r){var i=Ao.hasOwnProperty(e)?Ao[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(BFe(e,n,i,r)&&(n=null),r||i===null?NFe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ep=k1e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F3=Symbol.for("react.element"),_w=Symbol.for("react.portal"),ww=Symbol.for("react.fragment"),M$=Symbol.for("react.strict_mode"),I9=Symbol.for("react.profiler"),I1e=Symbol.for("react.provider"),R1e=Symbol.for("react.context"),k$=Symbol.for("react.forward_ref"),R9=Symbol.for("react.suspense"),D9=Symbol.for("react.suspense_list"),A$=Symbol.for("react.memo"),xm=Symbol.for("react.lazy"),D1e=Symbol.for("react.offscreen"),qve=Symbol.iterator;function mP(t){return t===null||typeof t!="object"?null:(t=qve&&t[qve]||t["@@iterator"],typeof t=="function"?t:null)}var Zi=Object.assign,LH;function HP(t){if(LH===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);LH=e&&e[1]||""}return`
`+LH+t}var NH=!1;function FH(t,e){if(!t||NH)return"";NH=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(v){var r=v}Reflect.construct(t,[],e)}else{try{e.call()}catch(v){r=v}t.call(e.prototype)}else{try{throw Error()}catch(v){r=v}t()}}catch(v){if(v&&r&&typeof v.stack=="string"){for(var i=v.stack.split(`
`),o=r.stack.split(`
`),u=i.length-1,h=o.length-1;1<=u&&0<=h&&i[u]!==o[h];)h--;for(;1<=u&&0<=h;u--,h--)if(i[u]!==o[h]){if(u!==1||h!==1)do if(u--,h--,0>h||i[u]!==o[h]){var m=`
`+i[u].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=u&&0<=h);break}}}finally{NH=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?HP(t):""}function UFe(t){switch(t.tag){case 5:return HP(t.type);case 16:return HP("Lazy");case 13:return HP("Suspense");case 19:return HP("SuspenseList");case 0:case 2:case 15:return t=FH(t.type,!1),t;case 11:return t=FH(t.type.render,!1),t;case 1:return t=FH(t.type,!0),t;default:return""}}function O9(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ww:return"Fragment";case _w:return"Portal";case I9:return"Profiler";case M$:return"StrictMode";case R9:return"Suspense";case D9:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R1e:return(t.displayName||"Context")+".Consumer";case I1e:return(t._context.displayName||"Context")+".Provider";case k$:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case A$:return e=t.displayName||null,e!==null?e:O9(t.type)||"Memo";case xm:e=t._payload,t=t._init;try{return O9(t(e))}catch{}}return null}function zFe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O9(e);case 8:return e===M$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xm(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function O1e(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function VFe(t){var e=O1e(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(u){r=""+u,o.call(this,u)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function B3(t){t._valueTracker||(t._valueTracker=VFe(t))}function L1e(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=O1e(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lN(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function L9(t,e){var n=e.checked;return Zi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Yve(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Xm(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function N1e(t,e){e=e.checked,e!=null&&T$(t,"checked",e,!1)}function N9(t,e){N1e(t,e);var n=Xm(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?F9(t,e.type,n):e.hasOwnProperty("defaultValue")&&F9(t,e.type,Xm(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Zve(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function F9(t,e,n){(e!=="number"||lN(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var GP=Array.isArray;function Vw(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Xm(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function B9(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Gt(91));return Zi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qve(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Gt(92));if(GP(n)){if(1<n.length)throw Error(Gt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Xm(n)}}function F1e(t,e){var n=Xm(e.value),r=Xm(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jve(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function B1e(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function U9(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?B1e(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var U3,U1e=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(U3=U3||document.createElement("div"),U3.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=U3.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fT(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var qP={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jFe=["Webkit","ms","Moz","O"];Object.keys(qP).forEach(function(t){jFe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qP[e]=qP[t]})});function z1e(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||qP.hasOwnProperty(t)&&qP[t]?(""+e).trim():e+"px"}function V1e(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=z1e(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var HFe=Zi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function z9(t,e){if(e){if(HFe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Gt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Gt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Gt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Gt(62))}}function V9(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var j9=null;function I$(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var H9=null,jw=null,Hw=null;function e0e(t){if(t=oM(t)){if(typeof H9!="function")throw Error(Gt(280));var e=t.stateNode;e&&(e=vF(e),H9(t.stateNode,t.type,e))}}function j1e(t){jw?Hw?Hw.push(t):Hw=[t]:jw=t}function H1e(){if(jw){var t=jw,e=Hw;if(Hw=jw=null,e0e(t),e)for(t=0;t<e.length;t++)e0e(e[t])}}function G1e(t,e){return t(e)}function W1e(){}var BH=!1;function $1e(t,e,n){if(BH)return t(e,n);BH=!0;try{return G1e(t,e,n)}finally{BH=!1,(jw!==null||Hw!==null)&&(W1e(),H1e())}}function mT(t,e){var n=t.stateNode;if(n===null)return null;var r=vF(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Gt(231,e,typeof n));return n}var G9=!1;if(mp)try{var gP={};Object.defineProperty(gP,"passive",{get:function(){G9=!0}}),window.addEventListener("test",gP,gP),window.removeEventListener("test",gP,gP)}catch{G9=!1}function GFe(t,e,n,r,i,o,u,h,m){var v=Array.prototype.slice.call(arguments,3);try{e.apply(n,v)}catch(x){this.onError(x)}}var YP=!1,uN=null,cN=!1,W9=null,WFe={onError:function(t){YP=!0,uN=t}};function $Fe(t,e,n,r,i,o,u,h,m){YP=!1,uN=null,GFe.apply(WFe,arguments)}function KFe(t,e,n,r,i,o,u,h,m){if($Fe.apply(this,arguments),YP){if(YP){var v=uN;YP=!1,uN=null}else throw Error(Gt(198));cN||(cN=!0,W9=v)}}function Z0(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function K1e(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function t0e(t){if(Z0(t)!==t)throw Error(Gt(188))}function XFe(t){var e=t.alternate;if(!e){if(e=Z0(t),e===null)throw Error(Gt(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return t0e(i),t;if(o===r)return t0e(i),e;o=o.sibling}throw Error(Gt(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,h=i.child;h;){if(h===n){u=!0,n=i,r=o;break}if(h===r){u=!0,r=i,n=o;break}h=h.sibling}if(!u){for(h=o.child;h;){if(h===n){u=!0,n=o,r=i;break}if(h===r){u=!0,r=o,n=i;break}h=h.sibling}if(!u)throw Error(Gt(189))}}if(n.alternate!==r)throw Error(Gt(190))}if(n.tag!==3)throw Error(Gt(188));return n.stateNode.current===n?t:e}function X1e(t){return t=XFe(t),t!==null?q1e(t):null}function q1e(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=q1e(t);if(e!==null)return e;t=t.sibling}return null}var Y1e=Cl.unstable_scheduleCallback,n0e=Cl.unstable_cancelCallback,qFe=Cl.unstable_shouldYield,YFe=Cl.unstable_requestPaint,ws=Cl.unstable_now,ZFe=Cl.unstable_getCurrentPriorityLevel,R$=Cl.unstable_ImmediatePriority,Z1e=Cl.unstable_UserBlockingPriority,dN=Cl.unstable_NormalPriority,QFe=Cl.unstable_LowPriority,Q1e=Cl.unstable_IdlePriority,pF=null,kd=null;function JFe(t){if(kd&&typeof kd.onCommitFiberRoot=="function")try{kd.onCommitFiberRoot(pF,t,void 0,(t.current.flags&128)===128)}catch{}}var xc=Math.clz32?Math.clz32:nBe,eBe=Math.log,tBe=Math.LN2;function nBe(t){return t>>>=0,t===0?32:31-(eBe(t)/tBe|0)|0}var z3=64,V3=4194304;function WP(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hN(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,u=n&268435455;if(u!==0){var h=u&~i;h!==0?r=WP(h):(o&=u,o!==0&&(r=WP(o)))}else u=n&~i,u!==0?r=WP(u):o!==0&&(r=WP(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-xc(e),i=1<<n,r|=t[n],e&=~i;return r}function rBe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function iBe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var u=31-xc(o),h=1<<u,m=i[u];m===-1?(!(h&n)||h&r)&&(i[u]=rBe(h,e)):m<=e&&(t.expiredLanes|=h),o&=~h}}function $9(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function J1e(){var t=z3;return z3<<=1,!(z3&4194240)&&(z3=64),t}function UH(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function iM(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-xc(e),t[e]=n}function sBe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-xc(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function D$(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-xc(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ni=0;function exe(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var txe,O$,nxe,rxe,ixe,K9=!1,j3=[],Om=null,Lm=null,Nm=null,gT=new Map,vT=new Map,Pm=[],oBe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function r0e(t,e){switch(t){case"focusin":case"focusout":Om=null;break;case"dragenter":case"dragleave":Lm=null;break;case"mouseover":case"mouseout":Nm=null;break;case"pointerover":case"pointerout":gT.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vT.delete(e.pointerId)}}function vP(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=oM(e),e!==null&&O$(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function aBe(t,e,n,r,i){switch(e){case"focusin":return Om=vP(Om,t,e,n,r,i),!0;case"dragenter":return Lm=vP(Lm,t,e,n,r,i),!0;case"mouseover":return Nm=vP(Nm,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return gT.set(o,vP(gT.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,vT.set(o,vP(vT.get(o)||null,t,e,n,r,i)),!0}return!1}function sxe(t){var e=_0(t.target);if(e!==null){var n=Z0(e);if(n!==null){if(e=n.tag,e===13){if(e=K1e(n),e!==null){t.blockedOn=e,ixe(t.priority,function(){nxe(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jL(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=X9(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);j9=r,n.target.dispatchEvent(r),j9=null}else return e=oM(n),e!==null&&O$(e),t.blockedOn=n,!1;e.shift()}return!0}function i0e(t,e,n){jL(t)&&n.delete(e)}function lBe(){K9=!1,Om!==null&&jL(Om)&&(Om=null),Lm!==null&&jL(Lm)&&(Lm=null),Nm!==null&&jL(Nm)&&(Nm=null),gT.forEach(i0e),vT.forEach(i0e)}function yP(t,e){t.blockedOn===e&&(t.blockedOn=null,K9||(K9=!0,Cl.unstable_scheduleCallback(Cl.unstable_NormalPriority,lBe)))}function yT(t){function e(i){return yP(i,t)}if(0<j3.length){yP(j3[0],t);for(var n=1;n<j3.length;n++){var r=j3[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Om!==null&&yP(Om,t),Lm!==null&&yP(Lm,t),Nm!==null&&yP(Nm,t),gT.forEach(e),vT.forEach(e),n=0;n<Pm.length;n++)r=Pm[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Pm.length&&(n=Pm[0],n.blockedOn===null);)sxe(n),n.blockedOn===null&&Pm.shift()}var Gw=Ep.ReactCurrentBatchConfig,pN=!0;function uBe(t,e,n,r){var i=ni,o=Gw.transition;Gw.transition=null;try{ni=1,L$(t,e,n,r)}finally{ni=i,Gw.transition=o}}function cBe(t,e,n,r){var i=ni,o=Gw.transition;Gw.transition=null;try{ni=4,L$(t,e,n,r)}finally{ni=i,Gw.transition=o}}function L$(t,e,n,r){if(pN){var i=X9(t,e,n,r);if(i===null)qH(t,e,r,fN,n),r0e(t,r);else if(aBe(i,t,e,n,r))r.stopPropagation();else if(r0e(t,r),e&4&&-1<oBe.indexOf(t)){for(;i!==null;){var o=oM(i);if(o!==null&&txe(o),o=X9(t,e,n,r),o===null&&qH(t,e,r,fN,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else qH(t,e,r,null,n)}}var fN=null;function X9(t,e,n,r){if(fN=null,t=I$(r),t=_0(t),t!==null)if(e=Z0(t),e===null)t=null;else if(n=e.tag,n===13){if(t=K1e(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fN=t,null}function oxe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZFe()){case R$:return 1;case Z1e:return 4;case dN:case QFe:return 16;case Q1e:return 536870912;default:return 16}default:return 16}}var km=null,N$=null,HL=null;function axe(){if(HL)return HL;var t,e=N$,n=e.length,r,i="value"in km?km.value:km.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var u=n-t;for(r=1;r<=u&&e[n-r]===i[o-r];r++);return HL=i.slice(t,1<r?1-r:void 0)}function GL(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function H3(){return!0}function s0e(){return!1}function kl(t){function e(n,r,i,o,u){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?H3:s0e,this.isPropagationStopped=s0e,this}return Zi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=H3)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=H3)},persist:function(){},isPersistent:H3}),e}var g1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},F$=kl(g1),sM=Zi({},g1,{view:0,detail:0}),dBe=kl(sM),zH,VH,bP,fF=Zi({},sM,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:B$,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bP&&(bP&&t.type==="mousemove"?(zH=t.screenX-bP.screenX,VH=t.screenY-bP.screenY):VH=zH=0,bP=t),zH)},movementY:function(t){return"movementY"in t?t.movementY:VH}}),o0e=kl(fF),hBe=Zi({},fF,{dataTransfer:0}),pBe=kl(hBe),fBe=Zi({},sM,{relatedTarget:0}),jH=kl(fBe),mBe=Zi({},g1,{animationName:0,elapsedTime:0,pseudoElement:0}),gBe=kl(mBe),vBe=Zi({},g1,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yBe=kl(vBe),bBe=Zi({},g1,{data:0}),a0e=kl(bBe),_Be={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wBe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xBe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SBe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xBe[t])?!!e[t]:!1}function B$(){return SBe}var EBe=Zi({},sM,{key:function(t){if(t.key){var e=_Be[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=GL(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wBe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:B$,charCode:function(t){return t.type==="keypress"?GL(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?GL(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),CBe=kl(EBe),PBe=Zi({},fF,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),l0e=kl(PBe),TBe=Zi({},sM,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:B$}),MBe=kl(TBe),kBe=Zi({},g1,{propertyName:0,elapsedTime:0,pseudoElement:0}),ABe=kl(kBe),IBe=Zi({},fF,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RBe=kl(IBe),DBe=[9,13,27,32],U$=mp&&"CompositionEvent"in window,ZP=null;mp&&"documentMode"in document&&(ZP=document.documentMode);var OBe=mp&&"TextEvent"in window&&!ZP,lxe=mp&&(!U$||ZP&&8<ZP&&11>=ZP),u0e=String.fromCharCode(32),c0e=!1;function uxe(t,e){switch(t){case"keyup":return DBe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cxe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xw=!1;function LBe(t,e){switch(t){case"compositionend":return cxe(e);case"keypress":return e.which!==32?null:(c0e=!0,u0e);case"textInput":return t=e.data,t===u0e&&c0e?null:t;default:return null}}function NBe(t,e){if(xw)return t==="compositionend"||!U$&&uxe(t,e)?(t=axe(),HL=N$=km=null,xw=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lxe&&e.locale!=="ko"?null:e.data;default:return null}}var FBe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function d0e(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!FBe[t.type]:e==="textarea"}function dxe(t,e,n,r){j1e(r),e=mN(e,"onChange"),0<e.length&&(n=new F$("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var QP=null,bT=null;function BBe(t){xxe(t,0)}function mF(t){var e=Cw(t);if(L1e(e))return t}function UBe(t,e){if(t==="change")return e}var hxe=!1;if(mp){var HH;if(mp){var GH="oninput"in document;if(!GH){var h0e=document.createElement("div");h0e.setAttribute("oninput","return;"),GH=typeof h0e.oninput=="function"}HH=GH}else HH=!1;hxe=HH&&(!document.documentMode||9<document.documentMode)}function p0e(){QP&&(QP.detachEvent("onpropertychange",pxe),bT=QP=null)}function pxe(t){if(t.propertyName==="value"&&mF(bT)){var e=[];dxe(e,bT,t,I$(t)),$1e(BBe,e)}}function zBe(t,e,n){t==="focusin"?(p0e(),QP=e,bT=n,QP.attachEvent("onpropertychange",pxe)):t==="focusout"&&p0e()}function VBe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mF(bT)}function jBe(t,e){if(t==="click")return mF(e)}function HBe(t,e){if(t==="input"||t==="change")return mF(e)}function GBe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ec=typeof Object.is=="function"?Object.is:GBe;function _T(t,e){if(Ec(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!A9.call(e,i)||!Ec(t[i],e[i]))return!1}return!0}function f0e(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function m0e(t,e){var n=f0e(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f0e(n)}}function fxe(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fxe(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mxe(){for(var t=window,e=lN();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lN(t.document)}return e}function z$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WBe(t){var e=mxe(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fxe(n.ownerDocument.documentElement,n)){if(r!==null&&z$(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=m0e(n,o);var u=m0e(n,r);i&&u&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(u.node,u.offset)):(e.setEnd(u.node,u.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $Be=mp&&"documentMode"in document&&11>=document.documentMode,Sw=null,q9=null,JP=null,Y9=!1;function g0e(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Y9||Sw==null||Sw!==lN(r)||(r=Sw,"selectionStart"in r&&z$(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),JP&&_T(JP,r)||(JP=r,r=mN(q9,"onSelect"),0<r.length&&(e=new F$("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Sw)))}function G3(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ew={animationend:G3("Animation","AnimationEnd"),animationiteration:G3("Animation","AnimationIteration"),animationstart:G3("Animation","AnimationStart"),transitionend:G3("Transition","TransitionEnd")},WH={},gxe={};mp&&(gxe=document.createElement("div").style,"AnimationEvent"in window||(delete Ew.animationend.animation,delete Ew.animationiteration.animation,delete Ew.animationstart.animation),"TransitionEvent"in window||delete Ew.transitionend.transition);function gF(t){if(WH[t])return WH[t];if(!Ew[t])return t;var e=Ew[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gxe)return WH[t]=e[n];return t}var vxe=gF("animationend"),yxe=gF("animationiteration"),bxe=gF("animationstart"),_xe=gF("transitionend"),wxe=new Map,v0e="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tg(t,e){wxe.set(t,e),Y0(e,[t])}for(var $H=0;$H<v0e.length;$H++){var KH=v0e[$H],KBe=KH.toLowerCase(),XBe=KH[0].toUpperCase()+KH.slice(1);tg(KBe,"on"+XBe)}tg(vxe,"onAnimationEnd");tg(yxe,"onAnimationIteration");tg(bxe,"onAnimationStart");tg("dblclick","onDoubleClick");tg("focusin","onFocus");tg("focusout","onBlur");tg(_xe,"onTransitionEnd");Jw("onMouseEnter",["mouseout","mouseover"]);Jw("onMouseLeave",["mouseout","mouseover"]);Jw("onPointerEnter",["pointerout","pointerover"]);Jw("onPointerLeave",["pointerout","pointerover"]);Y0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Y0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Y0("onBeforeInput",["compositionend","keypress","textInput","paste"]);Y0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Y0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Y0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $P="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qBe=new Set("cancel close invalid load scroll toggle".split(" ").concat($P));function y0e(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,KFe(r,e,void 0,t),t.currentTarget=null}function xxe(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var u=r.length-1;0<=u;u--){var h=r[u],m=h.instance,v=h.currentTarget;if(h=h.listener,m!==o&&i.isPropagationStopped())break e;y0e(i,h,v),o=m}else for(u=0;u<r.length;u++){if(h=r[u],m=h.instance,v=h.currentTarget,h=h.listener,m!==o&&i.isPropagationStopped())break e;y0e(i,h,v),o=m}}}if(cN)throw t=W9,cN=!1,W9=null,t}function Pi(t,e){var n=e[tW];n===void 0&&(n=e[tW]=new Set);var r=t+"__bubble";n.has(r)||(Sxe(e,t,2,!1),n.add(r))}function XH(t,e,n){var r=0;e&&(r|=4),Sxe(n,t,r,e)}var W3="_reactListening"+Math.random().toString(36).slice(2);function wT(t){if(!t[W3]){t[W3]=!0,A1e.forEach(function(n){n!=="selectionchange"&&(qBe.has(n)||XH(n,!1,t),XH(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[W3]||(e[W3]=!0,XH("selectionchange",!1,e))}}function Sxe(t,e,n,r){switch(oxe(e)){case 1:var i=uBe;break;case 4:i=cBe;break;default:i=L$}n=i.bind(null,e,n,t),i=void 0,!G9||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function qH(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var h=r.stateNode.containerInfo;if(h===i||h.nodeType===8&&h.parentNode===i)break;if(u===4)for(u=r.return;u!==null;){var m=u.tag;if((m===3||m===4)&&(m=u.stateNode.containerInfo,m===i||m.nodeType===8&&m.parentNode===i))return;u=u.return}for(;h!==null;){if(u=_0(h),u===null)return;if(m=u.tag,m===5||m===6){r=o=u;continue e}h=h.parentNode}}r=r.return}$1e(function(){var v=o,x=I$(n),E=[];e:{var M=wxe.get(t);if(M!==void 0){var D=F$,H=t;switch(t){case"keypress":if(GL(n)===0)break e;case"keydown":case"keyup":D=CBe;break;case"focusin":H="focus",D=jH;break;case"focusout":H="blur",D=jH;break;case"beforeblur":case"afterblur":D=jH;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=o0e;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=pBe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=MBe;break;case vxe:case yxe:case bxe:D=gBe;break;case _xe:D=ABe;break;case"scroll":D=dBe;break;case"wheel":D=RBe;break;case"copy":case"cut":case"paste":D=yBe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=l0e}var F=(e&4)!==0,B=!F&&t==="scroll",z=F?M!==null?M+"Capture":null:M;F=[];for(var P=v,W;P!==null;){W=P;var Z=W.stateNode;if(W.tag===5&&Z!==null&&(W=Z,z!==null&&(Z=mT(P,z),Z!=null&&F.push(xT(P,Z,W)))),B)break;P=P.return}0<F.length&&(M=new D(M,H,null,n,x),E.push({event:M,listeners:F}))}}if(!(e&7)){e:{if(M=t==="mouseover"||t==="pointerover",D=t==="mouseout"||t==="pointerout",M&&n!==j9&&(H=n.relatedTarget||n.fromElement)&&(_0(H)||H[gp]))break e;if((D||M)&&(M=x.window===x?x:(M=x.ownerDocument)?M.defaultView||M.parentWindow:window,D?(H=n.relatedTarget||n.toElement,D=v,H=H?_0(H):null,H!==null&&(B=Z0(H),H!==B||H.tag!==5&&H.tag!==6)&&(H=null)):(D=null,H=v),D!==H)){if(F=o0e,Z="onMouseLeave",z="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(F=l0e,Z="onPointerLeave",z="onPointerEnter",P="pointer"),B=D==null?M:Cw(D),W=H==null?M:Cw(H),M=new F(Z,P+"leave",D,n,x),M.target=B,M.relatedTarget=W,Z=null,_0(x)===v&&(F=new F(z,P+"enter",H,n,x),F.target=W,F.relatedTarget=B,Z=F),B=Z,D&&H)t:{for(F=D,z=H,P=0,W=F;W;W=G_(W))P++;for(W=0,Z=z;Z;Z=G_(Z))W++;for(;0<P-W;)F=G_(F),P--;for(;0<W-P;)z=G_(z),W--;for(;P--;){if(F===z||z!==null&&F===z.alternate)break t;F=G_(F),z=G_(z)}F=null}else F=null;D!==null&&b0e(E,M,D,F,!1),H!==null&&B!==null&&b0e(E,B,H,F,!0)}}e:{if(M=v?Cw(v):window,D=M.nodeName&&M.nodeName.toLowerCase(),D==="select"||D==="input"&&M.type==="file")var ve=UBe;else if(d0e(M))if(hxe)ve=HBe;else{ve=VBe;var X=zBe}else(D=M.nodeName)&&D.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(ve=jBe);if(ve&&(ve=ve(t,v))){dxe(E,ve,n,x);break e}X&&X(t,M,v),t==="focusout"&&(X=M._wrapperState)&&X.controlled&&M.type==="number"&&F9(M,"number",M.value)}switch(X=v?Cw(v):window,t){case"focusin":(d0e(X)||X.contentEditable==="true")&&(Sw=X,q9=v,JP=null);break;case"focusout":JP=q9=Sw=null;break;case"mousedown":Y9=!0;break;case"contextmenu":case"mouseup":case"dragend":Y9=!1,g0e(E,n,x);break;case"selectionchange":if($Be)break;case"keydown":case"keyup":g0e(E,n,x)}var se;if(U$)e:{switch(t){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else xw?uxe(t,n)&&(pe="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(pe="onCompositionStart");pe&&(lxe&&n.locale!=="ko"&&(xw||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&xw&&(se=axe()):(km=x,N$="value"in km?km.value:km.textContent,xw=!0)),X=mN(v,pe),0<X.length&&(pe=new a0e(pe,t,null,n,x),E.push({event:pe,listeners:X}),se?pe.data=se:(se=cxe(n),se!==null&&(pe.data=se)))),(se=OBe?LBe(t,n):NBe(t,n))&&(v=mN(v,"onBeforeInput"),0<v.length&&(x=new a0e("onBeforeInput","beforeinput",null,n,x),E.push({event:x,listeners:v}),x.data=se))}xxe(E,e)})}function xT(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mN(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=mT(t,n),o!=null&&r.unshift(xT(t,o,i)),o=mT(t,e),o!=null&&r.push(xT(t,o,i))),t=t.return}return r}function G_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function b0e(t,e,n,r,i){for(var o=e._reactName,u=[];n!==null&&n!==r;){var h=n,m=h.alternate,v=h.stateNode;if(m!==null&&m===r)break;h.tag===5&&v!==null&&(h=v,i?(m=mT(n,o),m!=null&&u.unshift(xT(n,m,h))):i||(m=mT(n,o),m!=null&&u.push(xT(n,m,h)))),n=n.return}u.length!==0&&t.push({event:e,listeners:u})}var YBe=/\r\n?/g,ZBe=/\u0000|\uFFFD/g;function _0e(t){return(typeof t=="string"?t:""+t).replace(YBe,`
`).replace(ZBe,"")}function $3(t,e,n){if(e=_0e(e),_0e(t)!==e&&n)throw Error(Gt(425))}function gN(){}var Z9=null,Q9=null;function J9(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var eW=typeof setTimeout=="function"?setTimeout:void 0,QBe=typeof clearTimeout=="function"?clearTimeout:void 0,w0e=typeof Promise=="function"?Promise:void 0,JBe=typeof queueMicrotask=="function"?queueMicrotask:typeof w0e<"u"?function(t){return w0e.resolve(null).then(t).catch(eUe)}:eW;function eUe(t){setTimeout(function(){throw t})}function YH(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),yT(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);yT(e)}function Fm(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function x0e(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var v1=Math.random().toString(36).slice(2),Cd="__reactFiber$"+v1,ST="__reactProps$"+v1,gp="__reactContainer$"+v1,tW="__reactEvents$"+v1,tUe="__reactListeners$"+v1,nUe="__reactHandles$"+v1;function _0(t){var e=t[Cd];if(e)return e;for(var n=t.parentNode;n;){if(e=n[gp]||n[Cd]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x0e(t);t!==null;){if(n=t[Cd])return n;t=x0e(t)}return e}t=n,n=t.parentNode}return null}function oM(t){return t=t[Cd]||t[gp],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Cw(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Gt(33))}function vF(t){return t[ST]||null}var nW=[],Pw=-1;function ng(t){return{current:t}}function Ii(t){0>Pw||(t.current=nW[Pw],nW[Pw]=null,Pw--)}function gi(t,e){Pw++,nW[Pw]=t.current,t.current=e}var qm={},na=ng(qm),Ja=ng(!1),O0=qm;function e1(t,e){var n=t.type.contextTypes;if(!n)return qm;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function el(t){return t=t.childContextTypes,t!=null}function vN(){Ii(Ja),Ii(na)}function S0e(t,e,n){if(na.current!==qm)throw Error(Gt(168));gi(na,e),gi(Ja,n)}function Exe(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Gt(108,zFe(t)||"Unknown",i));return Zi({},n,r)}function yN(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qm,O0=na.current,gi(na,t),gi(Ja,Ja.current),!0}function E0e(t,e,n){var r=t.stateNode;if(!r)throw Error(Gt(169));n?(t=Exe(t,e,O0),r.__reactInternalMemoizedMergedChildContext=t,Ii(Ja),Ii(na),gi(na,t)):Ii(Ja),gi(Ja,n)}var tp=null,yF=!1,ZH=!1;function Cxe(t){tp===null?tp=[t]:tp.push(t)}function rUe(t){yF=!0,Cxe(t)}function rg(){if(!ZH&&tp!==null){ZH=!0;var t=0,e=ni;try{var n=tp;for(ni=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}tp=null,yF=!1}catch(i){throw tp!==null&&(tp=tp.slice(t+1)),Y1e(R$,rg),i}finally{ni=e,ZH=!1}}return null}var Tw=[],Mw=0,bN=null,_N=0,pu=[],fu=0,L0=null,np=1,rp="";function p0(t,e){Tw[Mw++]=_N,Tw[Mw++]=bN,bN=t,_N=e}function Pxe(t,e,n){pu[fu++]=np,pu[fu++]=rp,pu[fu++]=L0,L0=t;var r=np;t=rp;var i=32-xc(r)-1;r&=~(1<<i),n+=1;var o=32-xc(e)+i;if(30<o){var u=i-i%5;o=(r&(1<<u)-1).toString(32),r>>=u,i-=u,np=1<<32-xc(e)+i|n<<i|r,rp=o+t}else np=1<<o|n<<i|r,rp=t}function V$(t){t.return!==null&&(p0(t,1),Pxe(t,1,0))}function j$(t){for(;t===bN;)bN=Tw[--Mw],Tw[Mw]=null,_N=Tw[--Mw],Tw[Mw]=null;for(;t===L0;)L0=pu[--fu],pu[fu]=null,rp=pu[--fu],pu[fu]=null,np=pu[--fu],pu[fu]=null}var xl=null,wl=null,Di=!1,wc=null;function Txe(t,e){var n=yu(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function C0e(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xl=t,wl=Fm(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xl=t,wl=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=L0!==null?{id:np,overflow:rp}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=yu(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xl=t,wl=null,!0):!1;default:return!1}}function rW(t){return(t.mode&1)!==0&&(t.flags&128)===0}function iW(t){if(Di){var e=wl;if(e){var n=e;if(!C0e(t,e)){if(rW(t))throw Error(Gt(418));e=Fm(n.nextSibling);var r=xl;e&&C0e(t,e)?Txe(r,n):(t.flags=t.flags&-4097|2,Di=!1,xl=t)}}else{if(rW(t))throw Error(Gt(418));t.flags=t.flags&-4097|2,Di=!1,xl=t}}}function P0e(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xl=t}function K3(t){if(t!==xl)return!1;if(!Di)return P0e(t),Di=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!J9(t.type,t.memoizedProps)),e&&(e=wl)){if(rW(t))throw Mxe(),Error(Gt(418));for(;e;)Txe(t,e),e=Fm(e.nextSibling)}if(P0e(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Gt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wl=Fm(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wl=null}}else wl=xl?Fm(t.stateNode.nextSibling):null;return!0}function Mxe(){for(var t=wl;t;)t=Fm(t.nextSibling)}function t1(){wl=xl=null,Di=!1}function H$(t){wc===null?wc=[t]:wc.push(t)}var iUe=Ep.ReactCurrentBatchConfig;function bc(t,e){if(t&&t.defaultProps){e=Zi({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var wN=ng(null),xN=null,kw=null,G$=null;function W$(){G$=kw=xN=null}function $$(t){var e=wN.current;Ii(wN),t._currentValue=e}function sW(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ww(t,e){xN=t,G$=kw=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ya=!0),t.firstContext=null)}function Eu(t){var e=t._currentValue;if(G$!==t)if(t={context:t,memoizedValue:e,next:null},kw===null){if(xN===null)throw Error(Gt(308));kw=t,xN.dependencies={lanes:0,firstContext:t}}else kw=kw.next=t;return e}var w0=null;function K$(t){w0===null?w0=[t]:w0.push(t)}function kxe(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,K$(e)):(n.next=i.next,i.next=n),e.interleaved=n,vp(t,r)}function vp(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Sm=!1;function X$(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Axe(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function cp(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bm(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Fr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,vp(t,n)}return i=r.interleaved,i===null?(e.next=e,K$(r)):(e.next=i.next,i.next=e),r.interleaved=e,vp(t,n)}function WL(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,D$(t,n)}}function T0e(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=u:o=o.next=u,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function SN(t,e,n,r){var i=t.updateQueue;Sm=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,h=i.shared.pending;if(h!==null){i.shared.pending=null;var m=h,v=m.next;m.next=null,u===null?o=v:u.next=v,u=m;var x=t.alternate;x!==null&&(x=x.updateQueue,h=x.lastBaseUpdate,h!==u&&(h===null?x.firstBaseUpdate=v:h.next=v,x.lastBaseUpdate=m))}if(o!==null){var E=i.baseState;u=0,x=v=m=null,h=o;do{var M=h.lane,D=h.eventTime;if((r&M)===M){x!==null&&(x=x.next={eventTime:D,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var H=t,F=h;switch(M=e,D=n,F.tag){case 1:if(H=F.payload,typeof H=="function"){E=H.call(D,E,M);break e}E=H;break e;case 3:H.flags=H.flags&-65537|128;case 0:if(H=F.payload,M=typeof H=="function"?H.call(D,E,M):H,M==null)break e;E=Zi({},E,M);break e;case 2:Sm=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,M=i.effects,M===null?i.effects=[h]:M.push(h))}else D={eventTime:D,lane:M,tag:h.tag,payload:h.payload,callback:h.callback,next:null},x===null?(v=x=D,m=E):x=x.next=D,u|=M;if(h=h.next,h===null){if(h=i.shared.pending,h===null)break;M=h,h=M.next,M.next=null,i.lastBaseUpdate=M,i.shared.pending=null}}while(1);if(x===null&&(m=E),i.baseState=m,i.firstBaseUpdate=v,i.lastBaseUpdate=x,e=i.shared.interleaved,e!==null){i=e;do u|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);F0|=u,t.lanes=u,t.memoizedState=E}}function M0e(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Gt(191,i));i.call(r)}}}var Ixe=new k1e.Component().refs;function oW(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Zi({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var bF={isMounted:function(t){return(t=t._reactInternals)?Z0(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ta(),i=zm(t),o=cp(r,i);o.payload=e,n!=null&&(o.callback=n),e=Bm(t,o,i),e!==null&&(Sc(e,t,i,r),WL(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ta(),i=zm(t),o=cp(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Bm(t,o,i),e!==null&&(Sc(e,t,i,r),WL(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ta(),r=zm(t),i=cp(n,r);i.tag=2,e!=null&&(i.callback=e),e=Bm(t,i,r),e!==null&&(Sc(e,t,r,n),WL(e,t,r))}};function k0e(t,e,n,r,i,o,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,u):e.prototype&&e.prototype.isPureReactComponent?!_T(n,r)||!_T(i,o):!0}function Rxe(t,e,n){var r=!1,i=qm,o=e.contextType;return typeof o=="object"&&o!==null?o=Eu(o):(i=el(e)?O0:na.current,r=e.contextTypes,o=(r=r!=null)?e1(t,i):qm),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bF,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function A0e(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&bF.enqueueReplaceState(e,e.state,null)}function aW(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Ixe,X$(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Eu(o):(o=el(e)?O0:na.current,i.context=e1(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(oW(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&bF.enqueueReplaceState(i,i.state,null),SN(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _P(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Gt(309));var r=n.stateNode}if(!r)throw Error(Gt(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(u){var h=i.refs;h===Ixe&&(h=i.refs={}),u===null?delete h[o]:h[o]=u},e._stringRef=o,e)}if(typeof t!="string")throw Error(Gt(284));if(!n._owner)throw Error(Gt(290,t))}return t}function X3(t,e){throw t=Object.prototype.toString.call(e),Error(Gt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function I0e(t){var e=t._init;return e(t._payload)}function Dxe(t){function e(z,P){if(t){var W=z.deletions;W===null?(z.deletions=[P],z.flags|=16):W.push(P)}}function n(z,P){if(!t)return null;for(;P!==null;)e(z,P),P=P.sibling;return null}function r(z,P){for(z=new Map;P!==null;)P.key!==null?z.set(P.key,P):z.set(P.index,P),P=P.sibling;return z}function i(z,P){return z=Vm(z,P),z.index=0,z.sibling=null,z}function o(z,P,W){return z.index=W,t?(W=z.alternate,W!==null?(W=W.index,W<P?(z.flags|=2,P):W):(z.flags|=2,P)):(z.flags|=1048576,P)}function u(z){return t&&z.alternate===null&&(z.flags|=2),z}function h(z,P,W,Z){return P===null||P.tag!==6?(P=iG(W,z.mode,Z),P.return=z,P):(P=i(P,W),P.return=z,P)}function m(z,P,W,Z){var ve=W.type;return ve===ww?x(z,P,W.props.children,Z,W.key):P!==null&&(P.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===xm&&I0e(ve)===P.type)?(Z=i(P,W.props),Z.ref=_P(z,P,W),Z.return=z,Z):(Z=ZL(W.type,W.key,W.props,null,z.mode,Z),Z.ref=_P(z,P,W),Z.return=z,Z)}function v(z,P,W,Z){return P===null||P.tag!==4||P.stateNode.containerInfo!==W.containerInfo||P.stateNode.implementation!==W.implementation?(P=sG(W,z.mode,Z),P.return=z,P):(P=i(P,W.children||[]),P.return=z,P)}function x(z,P,W,Z,ve){return P===null||P.tag!==7?(P=T0(W,z.mode,Z,ve),P.return=z,P):(P=i(P,W),P.return=z,P)}function E(z,P,W){if(typeof P=="string"&&P!==""||typeof P=="number")return P=iG(""+P,z.mode,W),P.return=z,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case F3:return W=ZL(P.type,P.key,P.props,null,z.mode,W),W.ref=_P(z,null,P),W.return=z,W;case _w:return P=sG(P,z.mode,W),P.return=z,P;case xm:var Z=P._init;return E(z,Z(P._payload),W)}if(GP(P)||mP(P))return P=T0(P,z.mode,W,null),P.return=z,P;X3(z,P)}return null}function M(z,P,W,Z){var ve=P!==null?P.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return ve!==null?null:h(z,P,""+W,Z);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case F3:return W.key===ve?m(z,P,W,Z):null;case _w:return W.key===ve?v(z,P,W,Z):null;case xm:return ve=W._init,M(z,P,ve(W._payload),Z)}if(GP(W)||mP(W))return ve!==null?null:x(z,P,W,Z,null);X3(z,W)}return null}function D(z,P,W,Z,ve){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return z=z.get(W)||null,h(P,z,""+Z,ve);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case F3:return z=z.get(Z.key===null?W:Z.key)||null,m(P,z,Z,ve);case _w:return z=z.get(Z.key===null?W:Z.key)||null,v(P,z,Z,ve);case xm:var X=Z._init;return D(z,P,W,X(Z._payload),ve)}if(GP(Z)||mP(Z))return z=z.get(W)||null,x(P,z,Z,ve,null);X3(P,Z)}return null}function H(z,P,W,Z){for(var ve=null,X=null,se=P,pe=P=0,J=null;se!==null&&pe<W.length;pe++){se.index>pe?(J=se,se=null):J=se.sibling;var ne=M(z,se,W[pe],Z);if(ne===null){se===null&&(se=J);break}t&&se&&ne.alternate===null&&e(z,se),P=o(ne,P,pe),X===null?ve=ne:X.sibling=ne,X=ne,se=J}if(pe===W.length)return n(z,se),Di&&p0(z,pe),ve;if(se===null){for(;pe<W.length;pe++)se=E(z,W[pe],Z),se!==null&&(P=o(se,P,pe),X===null?ve=se:X.sibling=se,X=se);return Di&&p0(z,pe),ve}for(se=r(z,se);pe<W.length;pe++)J=D(se,z,pe,W[pe],Z),J!==null&&(t&&J.alternate!==null&&se.delete(J.key===null?pe:J.key),P=o(J,P,pe),X===null?ve=J:X.sibling=J,X=J);return t&&se.forEach(function(Ee){return e(z,Ee)}),Di&&p0(z,pe),ve}function F(z,P,W,Z){var ve=mP(W);if(typeof ve!="function")throw Error(Gt(150));if(W=ve.call(W),W==null)throw Error(Gt(151));for(var X=ve=null,se=P,pe=P=0,J=null,ne=W.next();se!==null&&!ne.done;pe++,ne=W.next()){se.index>pe?(J=se,se=null):J=se.sibling;var Ee=M(z,se,ne.value,Z);if(Ee===null){se===null&&(se=J);break}t&&se&&Ee.alternate===null&&e(z,se),P=o(Ee,P,pe),X===null?ve=Ee:X.sibling=Ee,X=Ee,se=J}if(ne.done)return n(z,se),Di&&p0(z,pe),ve;if(se===null){for(;!ne.done;pe++,ne=W.next())ne=E(z,ne.value,Z),ne!==null&&(P=o(ne,P,pe),X===null?ve=ne:X.sibling=ne,X=ne);return Di&&p0(z,pe),ve}for(se=r(z,se);!ne.done;pe++,ne=W.next())ne=D(se,z,pe,ne.value,Z),ne!==null&&(t&&ne.alternate!==null&&se.delete(ne.key===null?pe:ne.key),P=o(ne,P,pe),X===null?ve=ne:X.sibling=ne,X=ne);return t&&se.forEach(function(ot){return e(z,ot)}),Di&&p0(z,pe),ve}function B(z,P,W,Z){if(typeof W=="object"&&W!==null&&W.type===ww&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case F3:e:{for(var ve=W.key,X=P;X!==null;){if(X.key===ve){if(ve=W.type,ve===ww){if(X.tag===7){n(z,X.sibling),P=i(X,W.props.children),P.return=z,z=P;break e}}else if(X.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===xm&&I0e(ve)===X.type){n(z,X.sibling),P=i(X,W.props),P.ref=_P(z,X,W),P.return=z,z=P;break e}n(z,X);break}else e(z,X);X=X.sibling}W.type===ww?(P=T0(W.props.children,z.mode,Z,W.key),P.return=z,z=P):(Z=ZL(W.type,W.key,W.props,null,z.mode,Z),Z.ref=_P(z,P,W),Z.return=z,z=Z)}return u(z);case _w:e:{for(X=W.key;P!==null;){if(P.key===X)if(P.tag===4&&P.stateNode.containerInfo===W.containerInfo&&P.stateNode.implementation===W.implementation){n(z,P.sibling),P=i(P,W.children||[]),P.return=z,z=P;break e}else{n(z,P);break}else e(z,P);P=P.sibling}P=sG(W,z.mode,Z),P.return=z,z=P}return u(z);case xm:return X=W._init,B(z,P,X(W._payload),Z)}if(GP(W))return H(z,P,W,Z);if(mP(W))return F(z,P,W,Z);X3(z,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,P!==null&&P.tag===6?(n(z,P.sibling),P=i(P,W),P.return=z,z=P):(n(z,P),P=iG(W,z.mode,Z),P.return=z,z=P),u(z)):n(z,P)}return B}var n1=Dxe(!0),Oxe=Dxe(!1),aM={},Ad=ng(aM),ET=ng(aM),CT=ng(aM);function x0(t){if(t===aM)throw Error(Gt(174));return t}function q$(t,e){switch(gi(CT,e),gi(ET,t),gi(Ad,aM),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:U9(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=U9(e,t)}Ii(Ad),gi(Ad,e)}function r1(){Ii(Ad),Ii(ET),Ii(CT)}function Lxe(t){x0(CT.current);var e=x0(Ad.current),n=U9(e,t.type);e!==n&&(gi(ET,t),gi(Ad,n))}function Y$(t){ET.current===t&&(Ii(Ad),Ii(ET))}var $i=ng(0);function EN(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var QH=[];function Z$(){for(var t=0;t<QH.length;t++)QH[t]._workInProgressVersionPrimary=null;QH.length=0}var $L=Ep.ReactCurrentDispatcher,JH=Ep.ReactCurrentBatchConfig,N0=0,qi=null,zs=null,no=null,CN=!1,eT=!1,PT=0,sUe=0;function Wo(){throw Error(Gt(321))}function Q$(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ec(t[n],e[n]))return!1;return!0}function J$(t,e,n,r,i,o){if(N0=o,qi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,$L.current=t===null||t.memoizedState===null?uUe:cUe,t=n(r,i),eT){o=0;do{if(eT=!1,PT=0,25<=o)throw Error(Gt(301));o+=1,no=zs=null,e.updateQueue=null,$L.current=dUe,t=n(r,i)}while(eT)}if($L.current=PN,e=zs!==null&&zs.next!==null,N0=0,no=zs=qi=null,CN=!1,e)throw Error(Gt(300));return t}function e7(){var t=PT!==0;return PT=0,t}function xd(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return no===null?qi.memoizedState=no=t:no=no.next=t,no}function Cu(){if(zs===null){var t=qi.alternate;t=t!==null?t.memoizedState:null}else t=zs.next;var e=no===null?qi.memoizedState:no.next;if(e!==null)no=e,zs=t;else{if(t===null)throw Error(Gt(310));zs=t,t={memoizedState:zs.memoizedState,baseState:zs.baseState,baseQueue:zs.baseQueue,queue:zs.queue,next:null},no===null?qi.memoizedState=no=t:no=no.next=t}return no}function TT(t,e){return typeof e=="function"?e(t):e}function eG(t){var e=Cu(),n=e.queue;if(n===null)throw Error(Gt(311));n.lastRenderedReducer=t;var r=zs,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var h=u=null,m=null,v=o;do{var x=v.lane;if((N0&x)===x)m!==null&&(m=m.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),r=v.hasEagerState?v.eagerState:t(r,v.action);else{var E={lane:x,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};m===null?(h=m=E,u=r):m=m.next=E,qi.lanes|=x,F0|=x}v=v.next}while(v!==null&&v!==o);m===null?u=r:m.next=h,Ec(r,e.memoizedState)||(Ya=!0),e.memoizedState=r,e.baseState=u,e.baseQueue=m,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,qi.lanes|=o,F0|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function tG(t){var e=Cu(),n=e.queue;if(n===null)throw Error(Gt(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var u=i=i.next;do o=t(o,u.action),u=u.next;while(u!==i);Ec(o,e.memoizedState)||(Ya=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Nxe(){}function Fxe(t,e){var n=qi,r=Cu(),i=e(),o=!Ec(r.memoizedState,i);if(o&&(r.memoizedState=i,Ya=!0),r=r.queue,t7(zxe.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||no!==null&&no.memoizedState.tag&1){if(n.flags|=2048,MT(9,Uxe.bind(null,n,r,i,e),void 0,null),oo===null)throw Error(Gt(349));N0&30||Bxe(n,e,i)}return i}function Bxe(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qi.updateQueue,e===null?(e={lastEffect:null,stores:null},qi.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Uxe(t,e,n,r){e.value=n,e.getSnapshot=r,Vxe(e)&&jxe(t)}function zxe(t,e,n){return n(function(){Vxe(e)&&jxe(t)})}function Vxe(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ec(t,n)}catch{return!0}}function jxe(t){var e=vp(t,1);e!==null&&Sc(e,t,1,-1)}function R0e(t){var e=xd();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:TT,lastRenderedState:t},e.queue=t,t=t.dispatch=lUe.bind(null,qi,t),[e.memoizedState,t]}function MT(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qi.updateQueue,e===null?(e={lastEffect:null,stores:null},qi.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Hxe(){return Cu().memoizedState}function KL(t,e,n,r){var i=xd();qi.flags|=t,i.memoizedState=MT(1|e,n,void 0,r===void 0?null:r)}function _F(t,e,n,r){var i=Cu();r=r===void 0?null:r;var o=void 0;if(zs!==null){var u=zs.memoizedState;if(o=u.destroy,r!==null&&Q$(r,u.deps)){i.memoizedState=MT(e,n,o,r);return}}qi.flags|=t,i.memoizedState=MT(1|e,n,o,r)}function D0e(t,e){return KL(8390656,8,t,e)}function t7(t,e){return _F(2048,8,t,e)}function Gxe(t,e){return _F(4,2,t,e)}function Wxe(t,e){return _F(4,4,t,e)}function $xe(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Kxe(t,e,n){return n=n!=null?n.concat([t]):null,_F(4,4,$xe.bind(null,e,t),n)}function n7(){}function Xxe(t,e){var n=Cu();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Q$(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function qxe(t,e){var n=Cu();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Q$(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Yxe(t,e,n){return N0&21?(Ec(n,e)||(n=J1e(),qi.lanes|=n,F0|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ya=!0),t.memoizedState=n)}function oUe(t,e){var n=ni;ni=n!==0&&4>n?n:4,t(!0);var r=JH.transition;JH.transition={};try{t(!1),e()}finally{ni=n,JH.transition=r}}function Zxe(){return Cu().memoizedState}function aUe(t,e,n){var r=zm(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qxe(t))Jxe(e,n);else if(n=kxe(t,e,n,r),n!==null){var i=Ta();Sc(n,t,r,i),eSe(n,e,r)}}function lUe(t,e,n){var r=zm(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qxe(t))Jxe(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var u=e.lastRenderedState,h=o(u,n);if(i.hasEagerState=!0,i.eagerState=h,Ec(h,u)){var m=e.interleaved;m===null?(i.next=i,K$(e)):(i.next=m.next,m.next=i),e.interleaved=i;return}}catch{}finally{}n=kxe(t,e,i,r),n!==null&&(i=Ta(),Sc(n,t,r,i),eSe(n,e,r))}}function Qxe(t){var e=t.alternate;return t===qi||e!==null&&e===qi}function Jxe(t,e){eT=CN=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function eSe(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,D$(t,n)}}var PN={readContext:Eu,useCallback:Wo,useContext:Wo,useEffect:Wo,useImperativeHandle:Wo,useInsertionEffect:Wo,useLayoutEffect:Wo,useMemo:Wo,useReducer:Wo,useRef:Wo,useState:Wo,useDebugValue:Wo,useDeferredValue:Wo,useTransition:Wo,useMutableSource:Wo,useSyncExternalStore:Wo,useId:Wo,unstable_isNewReconciler:!1},uUe={readContext:Eu,useCallback:function(t,e){return xd().memoizedState=[t,e===void 0?null:e],t},useContext:Eu,useEffect:D0e,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,KL(4194308,4,$xe.bind(null,e,t),n)},useLayoutEffect:function(t,e){return KL(4194308,4,t,e)},useInsertionEffect:function(t,e){return KL(4,2,t,e)},useMemo:function(t,e){var n=xd();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xd();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aUe.bind(null,qi,t),[r.memoizedState,t]},useRef:function(t){var e=xd();return t={current:t},e.memoizedState=t},useState:R0e,useDebugValue:n7,useDeferredValue:function(t){return xd().memoizedState=t},useTransition:function(){var t=R0e(!1),e=t[0];return t=oUe.bind(null,t[1]),xd().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qi,i=xd();if(Di){if(n===void 0)throw Error(Gt(407));n=n()}else{if(n=e(),oo===null)throw Error(Gt(349));N0&30||Bxe(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,D0e(zxe.bind(null,r,o,t),[t]),r.flags|=2048,MT(9,Uxe.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=xd(),e=oo.identifierPrefix;if(Di){var n=rp,r=np;n=(r&~(1<<32-xc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=PT++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sUe++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cUe={readContext:Eu,useCallback:Xxe,useContext:Eu,useEffect:t7,useImperativeHandle:Kxe,useInsertionEffect:Gxe,useLayoutEffect:Wxe,useMemo:qxe,useReducer:eG,useRef:Hxe,useState:function(){return eG(TT)},useDebugValue:n7,useDeferredValue:function(t){var e=Cu();return Yxe(e,zs.memoizedState,t)},useTransition:function(){var t=eG(TT)[0],e=Cu().memoizedState;return[t,e]},useMutableSource:Nxe,useSyncExternalStore:Fxe,useId:Zxe,unstable_isNewReconciler:!1},dUe={readContext:Eu,useCallback:Xxe,useContext:Eu,useEffect:t7,useImperativeHandle:Kxe,useInsertionEffect:Gxe,useLayoutEffect:Wxe,useMemo:qxe,useReducer:tG,useRef:Hxe,useState:function(){return tG(TT)},useDebugValue:n7,useDeferredValue:function(t){var e=Cu();return zs===null?e.memoizedState=t:Yxe(e,zs.memoizedState,t)},useTransition:function(){var t=tG(TT)[0],e=Cu().memoizedState;return[t,e]},useMutableSource:Nxe,useSyncExternalStore:Fxe,useId:Zxe,unstable_isNewReconciler:!1};function i1(t,e){try{var n="",r=e;do n+=UFe(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function nG(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lW(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hUe=typeof WeakMap=="function"?WeakMap:Map;function tSe(t,e,n){n=cp(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){MN||(MN=!0,yW=r),lW(t,e)},n}function nSe(t,e,n){n=cp(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){lW(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){lW(t,e),typeof r!="function"&&(Um===null?Um=new Set([this]):Um.add(this));var u=e.stack;this.componentDidCatch(e.value,{componentStack:u!==null?u:""})}),n}function O0e(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hUe;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=PUe.bind(null,t,e,n),e.then(t,t))}function L0e(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function N0e(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=cp(-1,1),e.tag=2,Bm(n,e,1))),n.lanes|=1),t)}var pUe=Ep.ReactCurrentOwner,Ya=!1;function Sa(t,e,n,r){e.child=t===null?Oxe(e,null,n,r):n1(e,t.child,n,r)}function F0e(t,e,n,r,i){n=n.render;var o=e.ref;return Ww(e,i),r=J$(t,e,n,r,o,i),n=e7(),t!==null&&!Ya?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yp(t,e,i)):(Di&&n&&V$(e),e.flags|=1,Sa(t,e,r,i),e.child)}function B0e(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!c7(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,rSe(t,e,o,r,i)):(t=ZL(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var u=o.memoizedProps;if(n=n.compare,n=n!==null?n:_T,n(u,r)&&t.ref===e.ref)return yp(t,e,i)}return e.flags|=1,t=Vm(o,r),t.ref=e.ref,t.return=e,e.child=t}function rSe(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(_T(o,r)&&t.ref===e.ref)if(Ya=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Ya=!0);else return e.lanes=t.lanes,yp(t,e,i)}return uW(t,e,n,r,i)}function iSe(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},gi(Iw,bl),bl|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,gi(Iw,bl),bl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,gi(Iw,bl),bl|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,gi(Iw,bl),bl|=r;return Sa(t,e,i,n),e.child}function sSe(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function uW(t,e,n,r,i){var o=el(n)?O0:na.current;return o=e1(e,o),Ww(e,i),n=J$(t,e,n,r,o,i),r=e7(),t!==null&&!Ya?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,yp(t,e,i)):(Di&&r&&V$(e),e.flags|=1,Sa(t,e,n,i),e.child)}function U0e(t,e,n,r,i){if(el(n)){var o=!0;yN(e)}else o=!1;if(Ww(e,i),e.stateNode===null)XL(t,e),Rxe(e,n,r),aW(e,n,r,i),r=!0;else if(t===null){var u=e.stateNode,h=e.memoizedProps;u.props=h;var m=u.context,v=n.contextType;typeof v=="object"&&v!==null?v=Eu(v):(v=el(n)?O0:na.current,v=e1(e,v));var x=n.getDerivedStateFromProps,E=typeof x=="function"||typeof u.getSnapshotBeforeUpdate=="function";E||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==r||m!==v)&&A0e(e,u,r,v),Sm=!1;var M=e.memoizedState;u.state=M,SN(e,r,u,i),m=e.memoizedState,h!==r||M!==m||Ja.current||Sm?(typeof x=="function"&&(oW(e,n,x,r),m=e.memoizedState),(h=Sm||k0e(e,n,h,r,M,m,v))?(E||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(e.flags|=4194308)):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=m),u.props=r,u.state=m,u.context=v,r=h):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{u=e.stateNode,Axe(t,e),h=e.memoizedProps,v=e.type===e.elementType?h:bc(e.type,h),u.props=v,E=e.pendingProps,M=u.context,m=n.contextType,typeof m=="object"&&m!==null?m=Eu(m):(m=el(n)?O0:na.current,m=e1(e,m));var D=n.getDerivedStateFromProps;(x=typeof D=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==E||M!==m)&&A0e(e,u,r,m),Sm=!1,M=e.memoizedState,u.state=M,SN(e,r,u,i);var H=e.memoizedState;h!==E||M!==H||Ja.current||Sm?(typeof D=="function"&&(oW(e,n,D,r),H=e.memoizedState),(v=Sm||k0e(e,n,v,r,M,H,m)||!1)?(x||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,H,m),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,H,m)),typeof u.componentDidUpdate=="function"&&(e.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&M===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&M===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=H),u.props=r,u.state=H,u.context=m,r=v):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&M===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&M===t.memoizedState||(e.flags|=1024),r=!1)}return cW(t,e,n,r,o,i)}function cW(t,e,n,r,i,o){sSe(t,e);var u=(e.flags&128)!==0;if(!r&&!u)return i&&E0e(e,n,!1),yp(t,e,o);r=e.stateNode,pUe.current=e;var h=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&u?(e.child=n1(e,t.child,null,o),e.child=n1(e,null,h,o)):Sa(t,e,h,o),e.memoizedState=r.state,i&&E0e(e,n,!0),e.child}function oSe(t){var e=t.stateNode;e.pendingContext?S0e(t,e.pendingContext,e.pendingContext!==e.context):e.context&&S0e(t,e.context,!1),q$(t,e.containerInfo)}function z0e(t,e,n,r,i){return t1(),H$(i),e.flags|=256,Sa(t,e,n,r),e.child}var dW={dehydrated:null,treeContext:null,retryLane:0};function hW(t){return{baseLanes:t,cachePool:null,transitions:null}}function aSe(t,e,n){var r=e.pendingProps,i=$i.current,o=!1,u=(e.flags&128)!==0,h;if((h=u)||(h=t!==null&&t.memoizedState===null?!1:(i&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),gi($i,i&1),t===null)return iW(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(u=r.children,t=r.fallback,o?(r=e.mode,o=e.child,u={mode:"hidden",children:u},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=SF(u,r,0,null),t=T0(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=hW(n),e.memoizedState=dW,t):r7(e,u));if(i=t.memoizedState,i!==null&&(h=i.dehydrated,h!==null))return fUe(t,e,u,r,h,i,n);if(o){o=r.fallback,u=e.mode,i=t.child,h=i.sibling;var m={mode:"hidden",children:r.children};return!(u&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=m,e.deletions=null):(r=Vm(i,m),r.subtreeFlags=i.subtreeFlags&14680064),h!==null?o=Vm(h,o):(o=T0(o,u,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,u=t.child.memoizedState,u=u===null?hW(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=t.childLanes&~n,e.memoizedState=dW,r}return o=t.child,t=o.sibling,r=Vm(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function r7(t,e){return e=SF({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function q3(t,e,n,r){return r!==null&&H$(r),n1(e,t.child,null,n),t=r7(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fUe(t,e,n,r,i,o,u){if(n)return e.flags&256?(e.flags&=-257,r=nG(Error(Gt(422))),q3(t,e,u,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=SF({mode:"visible",children:r.children},i,0,null),o=T0(o,i,u,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&n1(e,t.child,null,u),e.child.memoizedState=hW(u),e.memoizedState=dW,o);if(!(e.mode&1))return q3(t,e,u,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var h=r.dgst;return r=h,o=Error(Gt(419)),r=nG(o,r,void 0),q3(t,e,u,r)}if(h=(u&t.childLanes)!==0,Ya||h){if(r=oo,r!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|u)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,vp(t,i),Sc(r,t,i,-1))}return u7(),r=nG(Error(Gt(421))),q3(t,e,u,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=TUe.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,wl=Fm(i.nextSibling),xl=e,Di=!0,wc=null,t!==null&&(pu[fu++]=np,pu[fu++]=rp,pu[fu++]=L0,np=t.id,rp=t.overflow,L0=e),e=r7(e,r.children),e.flags|=4096,e)}function V0e(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sW(t.return,e,n)}function rG(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function lSe(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Sa(t,e,r.children,n),r=$i.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&V0e(t,n,e);else if(t.tag===19)V0e(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(gi($i,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&EN(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),rG(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&EN(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}rG(e,!0,n,null,o);break;case"together":rG(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function XL(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function yp(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),F0|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Gt(153));if(e.child!==null){for(t=e.child,n=Vm(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vm(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mUe(t,e,n){switch(e.tag){case 3:oSe(e),t1();break;case 5:Lxe(e);break;case 1:el(e.type)&&yN(e);break;case 4:q$(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;gi(wN,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(gi($i,$i.current&1),e.flags|=128,null):n&e.child.childLanes?aSe(t,e,n):(gi($i,$i.current&1),t=yp(t,e,n),t!==null?t.sibling:null);gi($i,$i.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return lSe(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),gi($i,$i.current),r)break;return null;case 22:case 23:return e.lanes=0,iSe(t,e,n)}return yp(t,e,n)}var uSe,pW,cSe,dSe;uSe=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};pW=function(){};cSe=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,x0(Ad.current);var o=null;switch(n){case"input":i=L9(t,i),r=L9(t,r),o=[];break;case"select":i=Zi({},i,{value:void 0}),r=Zi({},r,{value:void 0}),o=[];break;case"textarea":i=B9(t,i),r=B9(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gN)}z9(n,r);var u;n=null;for(v in i)if(!r.hasOwnProperty(v)&&i.hasOwnProperty(v)&&i[v]!=null)if(v==="style"){var h=i[v];for(u in h)h.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(pT.hasOwnProperty(v)?o||(o=[]):(o=o||[]).push(v,null));for(v in r){var m=r[v];if(h=i!=null?i[v]:void 0,r.hasOwnProperty(v)&&m!==h&&(m!=null||h!=null))if(v==="style")if(h){for(u in h)!h.hasOwnProperty(u)||m&&m.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in m)m.hasOwnProperty(u)&&h[u]!==m[u]&&(n||(n={}),n[u]=m[u])}else n||(o||(o=[]),o.push(v,n)),n=m;else v==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,h=h?h.__html:void 0,m!=null&&h!==m&&(o=o||[]).push(v,m)):v==="children"?typeof m!="string"&&typeof m!="number"||(o=o||[]).push(v,""+m):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(pT.hasOwnProperty(v)?(m!=null&&v==="onScroll"&&Pi("scroll",t),o||h===m||(o=[])):(o=o||[]).push(v,m))}n&&(o=o||[]).push("style",n);var v=o;(e.updateQueue=v)&&(e.flags|=4)}};dSe=function(t,e,n,r){n!==r&&(e.flags|=4)};function wP(t,e){if(!Di)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $o(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gUe(t,e,n){var r=e.pendingProps;switch(j$(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $o(e),null;case 1:return el(e.type)&&vN(),$o(e),null;case 3:return r=e.stateNode,r1(),Ii(Ja),Ii(na),Z$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(K3(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wc!==null&&(wW(wc),wc=null))),pW(t,e),$o(e),null;case 5:Y$(e);var i=x0(CT.current);if(n=e.type,t!==null&&e.stateNode!=null)cSe(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Gt(166));return $o(e),null}if(t=x0(Ad.current),K3(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Cd]=e,r[ST]=o,t=(e.mode&1)!==0,n){case"dialog":Pi("cancel",r),Pi("close",r);break;case"iframe":case"object":case"embed":Pi("load",r);break;case"video":case"audio":for(i=0;i<$P.length;i++)Pi($P[i],r);break;case"source":Pi("error",r);break;case"img":case"image":case"link":Pi("error",r),Pi("load",r);break;case"details":Pi("toggle",r);break;case"input":Yve(r,o),Pi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Pi("invalid",r);break;case"textarea":Qve(r,o),Pi("invalid",r)}z9(n,o),i=null;for(var u in o)if(o.hasOwnProperty(u)){var h=o[u];u==="children"?typeof h=="string"?r.textContent!==h&&(o.suppressHydrationWarning!==!0&&$3(r.textContent,h,t),i=["children",h]):typeof h=="number"&&r.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&$3(r.textContent,h,t),i=["children",""+h]):pT.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Pi("scroll",r)}switch(n){case"input":B3(r),Zve(r,o,!0);break;case"textarea":B3(r),Jve(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=gN)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=B1e(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=u.createElement(n,{is:r.is}):(t=u.createElement(n),n==="select"&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,n),t[Cd]=e,t[ST]=r,uSe(t,e,!1,!1),e.stateNode=t;e:{switch(u=V9(n,r),n){case"dialog":Pi("cancel",t),Pi("close",t),i=r;break;case"iframe":case"object":case"embed":Pi("load",t),i=r;break;case"video":case"audio":for(i=0;i<$P.length;i++)Pi($P[i],t);i=r;break;case"source":Pi("error",t),i=r;break;case"img":case"image":case"link":Pi("error",t),Pi("load",t),i=r;break;case"details":Pi("toggle",t),i=r;break;case"input":Yve(t,r),i=L9(t,r),Pi("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Zi({},r,{value:void 0}),Pi("invalid",t);break;case"textarea":Qve(t,r),i=B9(t,r),Pi("invalid",t);break;default:i=r}z9(n,i),h=i;for(o in h)if(h.hasOwnProperty(o)){var m=h[o];o==="style"?V1e(t,m):o==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&U1e(t,m)):o==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&fT(t,m):typeof m=="number"&&fT(t,""+m):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(pT.hasOwnProperty(o)?m!=null&&o==="onScroll"&&Pi("scroll",t):m!=null&&T$(t,o,m,u))}switch(n){case"input":B3(t),Zve(t,r,!1);break;case"textarea":B3(t),Jve(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Xm(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Vw(t,!!r.multiple,o,!1):r.defaultValue!=null&&Vw(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=gN)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $o(e),null;case 6:if(t&&e.stateNode!=null)dSe(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Gt(166));if(n=x0(CT.current),x0(Ad.current),K3(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cd]=e,(o=r.nodeValue!==n)&&(t=xl,t!==null))switch(t.tag){case 3:$3(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$3(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cd]=e,e.stateNode=r}return $o(e),null;case 13:if(Ii($i),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Di&&wl!==null&&e.mode&1&&!(e.flags&128))Mxe(),t1(),e.flags|=98560,o=!1;else if(o=K3(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Gt(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Gt(317));o[Cd]=e}else t1(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$o(e),o=!1}else wc!==null&&(wW(wc),wc=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$i.current&1?Hs===0&&(Hs=3):u7())),e.updateQueue!==null&&(e.flags|=4),$o(e),null);case 4:return r1(),pW(t,e),t===null&&wT(e.stateNode.containerInfo),$o(e),null;case 10:return $$(e.type._context),$o(e),null;case 17:return el(e.type)&&vN(),$o(e),null;case 19:if(Ii($i),o=e.memoizedState,o===null)return $o(e),null;if(r=(e.flags&128)!==0,u=o.rendering,u===null)if(r)wP(o,!1);else{if(Hs!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(u=EN(t),u!==null){for(e.flags|=128,wP(o,!1),r=u.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,t=u.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return gi($i,$i.current&1|2),e.child}t=t.sibling}o.tail!==null&&ws()>s1&&(e.flags|=128,r=!0,wP(o,!1),e.lanes=4194304)}else{if(!r)if(t=EN(u),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wP(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!Di)return $o(e),null}else 2*ws()-o.renderingStartTime>s1&&n!==1073741824&&(e.flags|=128,r=!0,wP(o,!1),e.lanes=4194304);o.isBackwards?(u.sibling=e.child,e.child=u):(n=o.last,n!==null?n.sibling=u:e.child=u,o.last=u)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ws(),e.sibling=null,n=$i.current,gi($i,r?n&1|2:n&1),e):($o(e),null);case 22:case 23:return l7(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bl&1073741824&&($o(e),e.subtreeFlags&6&&(e.flags|=8192)):$o(e),null;case 24:return null;case 25:return null}throw Error(Gt(156,e.tag))}function vUe(t,e){switch(j$(e),e.tag){case 1:return el(e.type)&&vN(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return r1(),Ii(Ja),Ii(na),Z$(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Y$(e),null;case 13:if(Ii($i),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Gt(340));t1()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ii($i),null;case 4:return r1(),null;case 10:return $$(e.type._context),null;case 22:case 23:return l7(),null;case 24:return null;default:return null}}var Y3=!1,Jo=!1,yUe=typeof WeakSet=="function"?WeakSet:Set,fn=null;function Aw(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rs(t,e,r)}else n.current=null}function fW(t,e,n){try{n()}catch(r){rs(t,e,r)}}var j0e=!1;function bUe(t,e){if(Z9=pN,t=mxe(),z$(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var u=0,h=-1,m=-1,v=0,x=0,E=t,M=null;t:for(;;){for(var D;E!==n||i!==0&&E.nodeType!==3||(h=u+i),E!==o||r!==0&&E.nodeType!==3||(m=u+r),E.nodeType===3&&(u+=E.nodeValue.length),(D=E.firstChild)!==null;)M=E,E=D;for(;;){if(E===t)break t;if(M===n&&++v===i&&(h=u),M===o&&++x===r&&(m=u),(D=E.nextSibling)!==null)break;E=M,M=E.parentNode}E=D}n=h===-1||m===-1?null:{start:h,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(Q9={focusedElem:t,selectionRange:n},pN=!1,fn=e;fn!==null;)if(e=fn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fn=t;else for(;fn!==null;){e=fn;try{var H=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(H!==null){var F=H.memoizedProps,B=H.memoizedState,z=e.stateNode,P=z.getSnapshotBeforeUpdate(e.elementType===e.type?F:bc(e.type,F),B);z.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var W=e.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Gt(163))}}catch(Z){rs(e,e.return,Z)}if(t=e.sibling,t!==null){t.return=e.return,fn=t;break}fn=e.return}return H=j0e,j0e=!1,H}function tT(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&fW(e,n,o)}i=i.next}while(i!==r)}}function wF(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mW(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hSe(t){var e=t.alternate;e!==null&&(t.alternate=null,hSe(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cd],delete e[ST],delete e[tW],delete e[tUe],delete e[nUe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pSe(t){return t.tag===5||t.tag===3||t.tag===4}function H0e(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pSe(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gW(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gN));else if(r!==4&&(t=t.child,t!==null))for(gW(t,e,n),t=t.sibling;t!==null;)gW(t,e,n),t=t.sibling}function vW(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(vW(t,e,n),t=t.sibling;t!==null;)vW(t,e,n),t=t.sibling}var Co=null,_c=!1;function im(t,e,n){for(n=n.child;n!==null;)fSe(t,e,n),n=n.sibling}function fSe(t,e,n){if(kd&&typeof kd.onCommitFiberUnmount=="function")try{kd.onCommitFiberUnmount(pF,n)}catch{}switch(n.tag){case 5:Jo||Aw(n,e);case 6:var r=Co,i=_c;Co=null,im(t,e,n),Co=r,_c=i,Co!==null&&(_c?(t=Co,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Co.removeChild(n.stateNode));break;case 18:Co!==null&&(_c?(t=Co,n=n.stateNode,t.nodeType===8?YH(t.parentNode,n):t.nodeType===1&&YH(t,n),yT(t)):YH(Co,n.stateNode));break;case 4:r=Co,i=_c,Co=n.stateNode.containerInfo,_c=!0,im(t,e,n),Co=r,_c=i;break;case 0:case 11:case 14:case 15:if(!Jo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&fW(n,e,u),i=i.next}while(i!==r)}im(t,e,n);break;case 1:if(!Jo&&(Aw(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(h){rs(n,e,h)}im(t,e,n);break;case 21:im(t,e,n);break;case 22:n.mode&1?(Jo=(r=Jo)||n.memoizedState!==null,im(t,e,n),Jo=r):im(t,e,n);break;default:im(t,e,n)}}function G0e(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yUe),e.forEach(function(r){var i=MUe.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function pc(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,u=e,h=u;e:for(;h!==null;){switch(h.tag){case 5:Co=h.stateNode,_c=!1;break e;case 3:Co=h.stateNode.containerInfo,_c=!0;break e;case 4:Co=h.stateNode.containerInfo,_c=!0;break e}h=h.return}if(Co===null)throw Error(Gt(160));fSe(o,u,i),Co=null,_c=!1;var m=i.alternate;m!==null&&(m.return=null),i.return=null}catch(v){rs(i,e,v)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mSe(e,t),e=e.sibling}function mSe(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pc(e,t),wd(t),r&4){try{tT(3,t,t.return),wF(3,t)}catch(F){rs(t,t.return,F)}try{tT(5,t,t.return)}catch(F){rs(t,t.return,F)}}break;case 1:pc(e,t),wd(t),r&512&&n!==null&&Aw(n,n.return);break;case 5:if(pc(e,t),wd(t),r&512&&n!==null&&Aw(n,n.return),t.flags&32){var i=t.stateNode;try{fT(i,"")}catch(F){rs(t,t.return,F)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,u=n!==null?n.memoizedProps:o,h=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&N1e(i,o),V9(h,u);var v=V9(h,o);for(u=0;u<m.length;u+=2){var x=m[u],E=m[u+1];x==="style"?V1e(i,E):x==="dangerouslySetInnerHTML"?U1e(i,E):x==="children"?fT(i,E):T$(i,x,E,v)}switch(h){case"input":N9(i,o);break;case"textarea":F1e(i,o);break;case"select":var M=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var D=o.value;D!=null?Vw(i,!!o.multiple,D,!1):M!==!!o.multiple&&(o.defaultValue!=null?Vw(i,!!o.multiple,o.defaultValue,!0):Vw(i,!!o.multiple,o.multiple?[]:"",!1))}i[ST]=o}catch(F){rs(t,t.return,F)}}break;case 6:if(pc(e,t),wd(t),r&4){if(t.stateNode===null)throw Error(Gt(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(F){rs(t,t.return,F)}}break;case 3:if(pc(e,t),wd(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yT(e.containerInfo)}catch(F){rs(t,t.return,F)}break;case 4:pc(e,t),wd(t);break;case 13:pc(e,t),wd(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(o7=ws())),r&4&&G0e(t);break;case 22:if(x=n!==null&&n.memoizedState!==null,t.mode&1?(Jo=(v=Jo)||x,pc(e,t),Jo=v):pc(e,t),wd(t),r&8192){if(v=t.memoizedState!==null,(t.stateNode.isHidden=v)&&!x&&t.mode&1)for(fn=t,x=t.child;x!==null;){for(E=fn=x;fn!==null;){switch(M=fn,D=M.child,M.tag){case 0:case 11:case 14:case 15:tT(4,M,M.return);break;case 1:Aw(M,M.return);var H=M.stateNode;if(typeof H.componentWillUnmount=="function"){r=M,n=M.return;try{e=r,H.props=e.memoizedProps,H.state=e.memoizedState,H.componentWillUnmount()}catch(F){rs(r,n,F)}}break;case 5:Aw(M,M.return);break;case 22:if(M.memoizedState!==null){$0e(E);continue}}D!==null?(D.return=M,fn=D):$0e(E)}x=x.sibling}e:for(x=null,E=t;;){if(E.tag===5){if(x===null){x=E;try{i=E.stateNode,v?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=E.stateNode,m=E.memoizedProps.style,u=m!=null&&m.hasOwnProperty("display")?m.display:null,h.style.display=z1e("display",u))}catch(F){rs(t,t.return,F)}}}else if(E.tag===6){if(x===null)try{E.stateNode.nodeValue=v?"":E.memoizedProps}catch(F){rs(t,t.return,F)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===t)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===t)break e;for(;E.sibling===null;){if(E.return===null||E.return===t)break e;x===E&&(x=null),E=E.return}x===E&&(x=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:pc(e,t),wd(t),r&4&&G0e(t);break;case 21:break;default:pc(e,t),wd(t)}}function wd(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(pSe(n)){var r=n;break e}n=n.return}throw Error(Gt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(fT(i,""),r.flags&=-33);var o=H0e(t);vW(t,o,i);break;case 3:case 4:var u=r.stateNode.containerInfo,h=H0e(t);gW(t,h,u);break;default:throw Error(Gt(161))}}catch(m){rs(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _Ue(t,e,n){fn=t,gSe(t)}function gSe(t,e,n){for(var r=(t.mode&1)!==0;fn!==null;){var i=fn,o=i.child;if(i.tag===22&&r){var u=i.memoizedState!==null||Y3;if(!u){var h=i.alternate,m=h!==null&&h.memoizedState!==null||Jo;h=Y3;var v=Jo;if(Y3=u,(Jo=m)&&!v)for(fn=i;fn!==null;)u=fn,m=u.child,u.tag===22&&u.memoizedState!==null?K0e(i):m!==null?(m.return=u,fn=m):K0e(i);for(;o!==null;)fn=o,gSe(o),o=o.sibling;fn=i,Y3=h,Jo=v}W0e(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,fn=o):W0e(t)}}function W0e(t){for(;fn!==null;){var e=fn;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jo||wF(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jo)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:bc(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&M0e(e,o,r);break;case 3:var u=e.updateQueue;if(u!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}M0e(e,u,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var v=e.alternate;if(v!==null){var x=v.memoizedState;if(x!==null){var E=x.dehydrated;E!==null&&yT(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Gt(163))}Jo||e.flags&512&&mW(e)}catch(M){rs(e,e.return,M)}}if(e===t){fn=null;break}if(n=e.sibling,n!==null){n.return=e.return,fn=n;break}fn=e.return}}function $0e(t){for(;fn!==null;){var e=fn;if(e===t){fn=null;break}var n=e.sibling;if(n!==null){n.return=e.return,fn=n;break}fn=e.return}}function K0e(t){for(;fn!==null;){var e=fn;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wF(4,e)}catch(m){rs(e,n,m)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(m){rs(e,i,m)}}var o=e.return;try{mW(e)}catch(m){rs(e,o,m)}break;case 5:var u=e.return;try{mW(e)}catch(m){rs(e,u,m)}}}catch(m){rs(e,e.return,m)}if(e===t){fn=null;break}var h=e.sibling;if(h!==null){h.return=e.return,fn=h;break}fn=e.return}}var wUe=Math.ceil,TN=Ep.ReactCurrentDispatcher,i7=Ep.ReactCurrentOwner,wu=Ep.ReactCurrentBatchConfig,Fr=0,oo=null,Is=null,Mo=0,bl=0,Iw=ng(0),Hs=0,kT=null,F0=0,xF=0,s7=0,nT=null,qa=null,o7=0,s1=1/0,ep=null,MN=!1,yW=null,Um=null,Z3=!1,Am=null,kN=0,rT=0,bW=null,qL=-1,YL=0;function Ta(){return Fr&6?ws():qL!==-1?qL:qL=ws()}function zm(t){return t.mode&1?Fr&2&&Mo!==0?Mo&-Mo:iUe.transition!==null?(YL===0&&(YL=J1e()),YL):(t=ni,t!==0||(t=window.event,t=t===void 0?16:oxe(t.type)),t):1}function Sc(t,e,n,r){if(50<rT)throw rT=0,bW=null,Error(Gt(185));iM(t,n,r),(!(Fr&2)||t!==oo)&&(t===oo&&(!(Fr&2)&&(xF|=n),Hs===4&&Tm(t,Mo)),tl(t,r),n===1&&Fr===0&&!(e.mode&1)&&(s1=ws()+500,yF&&rg()))}function tl(t,e){var n=t.callbackNode;iBe(t,e);var r=hN(t,t===oo?Mo:0);if(r===0)n!==null&&n0e(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&n0e(n),e===1)t.tag===0?rUe(X0e.bind(null,t)):Cxe(X0e.bind(null,t)),JBe(function(){!(Fr&6)&&rg()}),n=null;else{switch(exe(r)){case 1:n=R$;break;case 4:n=Z1e;break;case 16:n=dN;break;case 536870912:n=Q1e;break;default:n=dN}n=ESe(n,vSe.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vSe(t,e){if(qL=-1,YL=0,Fr&6)throw Error(Gt(327));var n=t.callbackNode;if($w()&&t.callbackNode!==n)return null;var r=hN(t,t===oo?Mo:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=AN(t,r);else{e=r;var i=Fr;Fr|=2;var o=bSe();(oo!==t||Mo!==e)&&(ep=null,s1=ws()+500,P0(t,e));do try{EUe();break}catch(h){ySe(t,h)}while(1);W$(),TN.current=o,Fr=i,Is!==null?e=0:(oo=null,Mo=0,e=Hs)}if(e!==0){if(e===2&&(i=$9(t),i!==0&&(r=i,e=_W(t,i))),e===1)throw n=kT,P0(t,0),Tm(t,r),tl(t,ws()),n;if(e===6)Tm(t,r);else{if(i=t.current.alternate,!(r&30)&&!xUe(i)&&(e=AN(t,r),e===2&&(o=$9(t),o!==0&&(r=o,e=_W(t,o))),e===1))throw n=kT,P0(t,0),Tm(t,r),tl(t,ws()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Gt(345));case 2:f0(t,qa,ep);break;case 3:if(Tm(t,r),(r&130023424)===r&&(e=o7+500-ws(),10<e)){if(hN(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ta(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=eW(f0.bind(null,t,qa,ep),e);break}f0(t,qa,ep);break;case 4:if(Tm(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var u=31-xc(r);o=1<<u,u=e[u],u>i&&(i=u),r&=~o}if(r=i,r=ws()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wUe(r/1960))-r,10<r){t.timeoutHandle=eW(f0.bind(null,t,qa,ep),r);break}f0(t,qa,ep);break;case 5:f0(t,qa,ep);break;default:throw Error(Gt(329))}}}return tl(t,ws()),t.callbackNode===n?vSe.bind(null,t):null}function _W(t,e){var n=nT;return t.current.memoizedState.isDehydrated&&(P0(t,e).flags|=256),t=AN(t,e),t!==2&&(e=qa,qa=n,e!==null&&wW(e)),t}function wW(t){qa===null?qa=t:qa.push.apply(qa,t)}function xUe(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Ec(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tm(t,e){for(e&=~s7,e&=~xF,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-xc(e),r=1<<n;t[n]=-1,e&=~r}}function X0e(t){if(Fr&6)throw Error(Gt(327));$w();var e=hN(t,0);if(!(e&1))return tl(t,ws()),null;var n=AN(t,e);if(t.tag!==0&&n===2){var r=$9(t);r!==0&&(e=r,n=_W(t,r))}if(n===1)throw n=kT,P0(t,0),Tm(t,e),tl(t,ws()),n;if(n===6)throw Error(Gt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,f0(t,qa,ep),tl(t,ws()),null}function a7(t,e){var n=Fr;Fr|=1;try{return t(e)}finally{Fr=n,Fr===0&&(s1=ws()+500,yF&&rg())}}function B0(t){Am!==null&&Am.tag===0&&!(Fr&6)&&$w();var e=Fr;Fr|=1;var n=wu.transition,r=ni;try{if(wu.transition=null,ni=1,t)return t()}finally{ni=r,wu.transition=n,Fr=e,!(Fr&6)&&rg()}}function l7(){bl=Iw.current,Ii(Iw)}function P0(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QBe(n)),Is!==null)for(n=Is.return;n!==null;){var r=n;switch(j$(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vN();break;case 3:r1(),Ii(Ja),Ii(na),Z$();break;case 5:Y$(r);break;case 4:r1();break;case 13:Ii($i);break;case 19:Ii($i);break;case 10:$$(r.type._context);break;case 22:case 23:l7()}n=n.return}if(oo=t,Is=t=Vm(t.current,null),Mo=bl=e,Hs=0,kT=null,s7=xF=F0=0,qa=nT=null,w0!==null){for(e=0;e<w0.length;e++)if(n=w0[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var u=o.next;o.next=i,r.next=u}n.pending=r}w0=null}return t}function ySe(t,e){do{var n=Is;try{if(W$(),$L.current=PN,CN){for(var r=qi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}CN=!1}if(N0=0,no=zs=qi=null,eT=!1,PT=0,i7.current=null,n===null||n.return===null){Hs=1,kT=e,Is=null;break}e:{var o=t,u=n.return,h=n,m=e;if(e=Mo,h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var v=m,x=h,E=x.tag;if(!(x.mode&1)&&(E===0||E===11||E===15)){var M=x.alternate;M?(x.updateQueue=M.updateQueue,x.memoizedState=M.memoizedState,x.lanes=M.lanes):(x.updateQueue=null,x.memoizedState=null)}var D=L0e(u);if(D!==null){D.flags&=-257,N0e(D,u,h,o,e),D.mode&1&&O0e(o,v,e),e=D,m=v;var H=e.updateQueue;if(H===null){var F=new Set;F.add(m),e.updateQueue=F}else H.add(m);break e}else{if(!(e&1)){O0e(o,v,e),u7();break e}m=Error(Gt(426))}}else if(Di&&h.mode&1){var B=L0e(u);if(B!==null){!(B.flags&65536)&&(B.flags|=256),N0e(B,u,h,o,e),H$(i1(m,h));break e}}o=m=i1(m,h),Hs!==4&&(Hs=2),nT===null?nT=[o]:nT.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var z=tSe(o,m,e);T0e(o,z);break e;case 1:h=m;var P=o.type,W=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Um===null||!Um.has(W)))){o.flags|=65536,e&=-e,o.lanes|=e;var Z=nSe(o,h,e);T0e(o,Z);break e}}o=o.return}while(o!==null)}wSe(n)}catch(ve){e=ve,Is===n&&n!==null&&(Is=n=n.return);continue}break}while(1)}function bSe(){var t=TN.current;return TN.current=PN,t===null?PN:t}function u7(){(Hs===0||Hs===3||Hs===2)&&(Hs=4),oo===null||!(F0&268435455)&&!(xF&268435455)||Tm(oo,Mo)}function AN(t,e){var n=Fr;Fr|=2;var r=bSe();(oo!==t||Mo!==e)&&(ep=null,P0(t,e));do try{SUe();break}catch(i){ySe(t,i)}while(1);if(W$(),Fr=n,TN.current=r,Is!==null)throw Error(Gt(261));return oo=null,Mo=0,Hs}function SUe(){for(;Is!==null;)_Se(Is)}function EUe(){for(;Is!==null&&!qFe();)_Se(Is)}function _Se(t){var e=SSe(t.alternate,t,bl);t.memoizedProps=t.pendingProps,e===null?wSe(t):Is=e,i7.current=null}function wSe(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vUe(n,e),n!==null){n.flags&=32767,Is=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Hs=6,Is=null;return}}else if(n=gUe(n,e,bl),n!==null){Is=n;return}if(e=e.sibling,e!==null){Is=e;return}Is=e=t}while(e!==null);Hs===0&&(Hs=5)}function f0(t,e,n){var r=ni,i=wu.transition;try{wu.transition=null,ni=1,CUe(t,e,n,r)}finally{wu.transition=i,ni=r}return null}function CUe(t,e,n,r){do $w();while(Am!==null);if(Fr&6)throw Error(Gt(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Gt(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(sBe(t,o),t===oo&&(Is=oo=null,Mo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Z3||(Z3=!0,ESe(dN,function(){return $w(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=wu.transition,wu.transition=null;var u=ni;ni=1;var h=Fr;Fr|=4,i7.current=null,bUe(t,n),mSe(n,t),WBe(Q9),pN=!!Z9,Q9=Z9=null,t.current=n,_Ue(n),YFe(),Fr=h,ni=u,wu.transition=o}else t.current=n;if(Z3&&(Z3=!1,Am=t,kN=i),o=t.pendingLanes,o===0&&(Um=null),JFe(n.stateNode),tl(t,ws()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(MN)throw MN=!1,t=yW,yW=null,t;return kN&1&&t.tag!==0&&$w(),o=t.pendingLanes,o&1?t===bW?rT++:(rT=0,bW=t):rT=0,rg(),null}function $w(){if(Am!==null){var t=exe(kN),e=wu.transition,n=ni;try{if(wu.transition=null,ni=16>t?16:t,Am===null)var r=!1;else{if(t=Am,Am=null,kN=0,Fr&6)throw Error(Gt(331));var i=Fr;for(Fr|=4,fn=t.current;fn!==null;){var o=fn,u=o.child;if(fn.flags&16){var h=o.deletions;if(h!==null){for(var m=0;m<h.length;m++){var v=h[m];for(fn=v;fn!==null;){var x=fn;switch(x.tag){case 0:case 11:case 15:tT(8,x,o)}var E=x.child;if(E!==null)E.return=x,fn=E;else for(;fn!==null;){x=fn;var M=x.sibling,D=x.return;if(hSe(x),x===v){fn=null;break}if(M!==null){M.return=D,fn=M;break}fn=D}}}var H=o.alternate;if(H!==null){var F=H.child;if(F!==null){H.child=null;do{var B=F.sibling;F.sibling=null,F=B}while(F!==null)}}fn=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,fn=u;else e:for(;fn!==null;){if(o=fn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:tT(9,o,o.return)}var z=o.sibling;if(z!==null){z.return=o.return,fn=z;break e}fn=o.return}}var P=t.current;for(fn=P;fn!==null;){u=fn;var W=u.child;if(u.subtreeFlags&2064&&W!==null)W.return=u,fn=W;else e:for(u=P;fn!==null;){if(h=fn,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:wF(9,h)}}catch(ve){rs(h,h.return,ve)}if(h===u){fn=null;break e}var Z=h.sibling;if(Z!==null){Z.return=h.return,fn=Z;break e}fn=h.return}}if(Fr=i,rg(),kd&&typeof kd.onPostCommitFiberRoot=="function")try{kd.onPostCommitFiberRoot(pF,t)}catch{}r=!0}return r}finally{ni=n,wu.transition=e}}return!1}function q0e(t,e,n){e=i1(n,e),e=tSe(t,e,1),t=Bm(t,e,1),e=Ta(),t!==null&&(iM(t,1,e),tl(t,e))}function rs(t,e,n){if(t.tag===3)q0e(t,t,n);else for(;e!==null;){if(e.tag===3){q0e(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Um===null||!Um.has(r))){t=i1(n,t),t=nSe(e,t,1),e=Bm(e,t,1),t=Ta(),e!==null&&(iM(e,1,t),tl(e,t));break}}e=e.return}}function PUe(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ta(),t.pingedLanes|=t.suspendedLanes&n,oo===t&&(Mo&n)===n&&(Hs===4||Hs===3&&(Mo&130023424)===Mo&&500>ws()-o7?P0(t,0):s7|=n),tl(t,e)}function xSe(t,e){e===0&&(t.mode&1?(e=V3,V3<<=1,!(V3&130023424)&&(V3=4194304)):e=1);var n=Ta();t=vp(t,e),t!==null&&(iM(t,e,n),tl(t,n))}function TUe(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xSe(t,n)}function MUe(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Gt(314))}r!==null&&r.delete(e),xSe(t,n)}var SSe;SSe=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ja.current)Ya=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ya=!1,mUe(t,e,n);Ya=!!(t.flags&131072)}else Ya=!1,Di&&e.flags&1048576&&Pxe(e,_N,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;XL(t,e),t=e.pendingProps;var i=e1(e,na.current);Ww(e,n),i=J$(null,e,r,t,i,n);var o=e7();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,el(r)?(o=!0,yN(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,X$(e),i.updater=bF,e.stateNode=i,i._reactInternals=e,aW(e,r,t,n),e=cW(null,e,r,!0,o,n)):(e.tag=0,Di&&o&&V$(e),Sa(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(XL(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=AUe(r),t=bc(r,t),i){case 0:e=uW(null,e,r,t,n);break e;case 1:e=U0e(null,e,r,t,n);break e;case 11:e=F0e(null,e,r,t,n);break e;case 14:e=B0e(null,e,r,bc(r.type,t),n);break e}throw Error(Gt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bc(r,i),uW(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bc(r,i),U0e(t,e,r,i,n);case 3:e:{if(oSe(e),t===null)throw Error(Gt(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Axe(t,e),SN(e,r,null,n);var u=e.memoizedState;if(r=u.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=i1(Error(Gt(423)),e),e=z0e(t,e,r,n,i);break e}else if(r!==i){i=i1(Error(Gt(424)),e),e=z0e(t,e,r,n,i);break e}else for(wl=Fm(e.stateNode.containerInfo.firstChild),xl=e,Di=!0,wc=null,n=Oxe(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(t1(),r===i){e=yp(t,e,n);break e}Sa(t,e,r,n)}e=e.child}return e;case 5:return Lxe(e),t===null&&iW(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,u=i.children,J9(r,i)?u=null:o!==null&&J9(r,o)&&(e.flags|=32),sSe(t,e),Sa(t,e,u,n),e.child;case 6:return t===null&&iW(e),null;case 13:return aSe(t,e,n);case 4:return q$(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=n1(e,null,r,n):Sa(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bc(r,i),F0e(t,e,r,i,n);case 7:return Sa(t,e,e.pendingProps,n),e.child;case 8:return Sa(t,e,e.pendingProps.children,n),e.child;case 12:return Sa(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,u=i.value,gi(wN,r._currentValue),r._currentValue=u,o!==null)if(Ec(o.value,u)){if(o.children===i.children&&!Ja.current){e=yp(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){u=o.child;for(var m=h.firstContext;m!==null;){if(m.context===r){if(o.tag===1){m=cp(-1,n&-n),m.tag=2;var v=o.updateQueue;if(v!==null){v=v.shared;var x=v.pending;x===null?m.next=m:(m.next=x.next,x.next=m),v.pending=m}}o.lanes|=n,m=o.alternate,m!==null&&(m.lanes|=n),sW(o.return,n,e),h.lanes|=n;break}m=m.next}}else if(o.tag===10)u=o.type===e.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(Gt(341));u.lanes|=n,h=u.alternate,h!==null&&(h.lanes|=n),sW(u,n,e),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===e){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}Sa(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ww(e,n),i=Eu(i),r=r(i),e.flags|=1,Sa(t,e,r,n),e.child;case 14:return r=e.type,i=bc(r,e.pendingProps),i=bc(r.type,i),B0e(t,e,r,i,n);case 15:return rSe(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:bc(r,i),XL(t,e),e.tag=1,el(r)?(t=!0,yN(e)):t=!1,Ww(e,n),Rxe(e,r,i),aW(e,r,i,n),cW(null,e,r,!0,t,n);case 19:return lSe(t,e,n);case 22:return iSe(t,e,n)}throw Error(Gt(156,e.tag))};function ESe(t,e){return Y1e(t,e)}function kUe(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yu(t,e,n,r){return new kUe(t,e,n,r)}function c7(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AUe(t){if(typeof t=="function")return c7(t)?1:0;if(t!=null){if(t=t.$$typeof,t===k$)return 11;if(t===A$)return 14}return 2}function Vm(t,e){var n=t.alternate;return n===null?(n=yu(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ZL(t,e,n,r,i,o){var u=2;if(r=t,typeof t=="function")c7(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case ww:return T0(n.children,i,o,e);case M$:u=8,i|=8;break;case I9:return t=yu(12,n,e,i|2),t.elementType=I9,t.lanes=o,t;case R9:return t=yu(13,n,e,i),t.elementType=R9,t.lanes=o,t;case D9:return t=yu(19,n,e,i),t.elementType=D9,t.lanes=o,t;case D1e:return SF(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case I1e:u=10;break e;case R1e:u=9;break e;case k$:u=11;break e;case A$:u=14;break e;case xm:u=16,r=null;break e}throw Error(Gt(130,t==null?t:typeof t,""))}return e=yu(u,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function T0(t,e,n,r){return t=yu(7,t,r,e),t.lanes=n,t}function SF(t,e,n,r){return t=yu(22,t,r,e),t.elementType=D1e,t.lanes=n,t.stateNode={isHidden:!1},t}function iG(t,e,n){return t=yu(6,t,null,e),t.lanes=n,t}function sG(t,e,n){return e=yu(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IUe(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=UH(0),this.expirationTimes=UH(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=UH(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function d7(t,e,n,r,i,o,u,h,m){return t=new IUe(t,e,n,h,m),e===1?(e=1,o===!0&&(e|=8)):e=0,o=yu(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},X$(o),t}function RUe(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_w,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function CSe(t){if(!t)return qm;t=t._reactInternals;e:{if(Z0(t)!==t||t.tag!==1)throw Error(Gt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(el(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Gt(171))}if(t.tag===1){var n=t.type;if(el(n))return Exe(t,n,e)}return e}function PSe(t,e,n,r,i,o,u,h,m){return t=d7(n,r,!0,t,i,o,u,h,m),t.context=CSe(null),n=t.current,r=Ta(),i=zm(n),o=cp(r,i),o.callback=e??null,Bm(n,o,i),t.current.lanes=i,iM(t,i,r),tl(t,r),t}function EF(t,e,n,r){var i=e.current,o=Ta(),u=zm(i);return n=CSe(n),e.context===null?e.context=n:e.pendingContext=n,e=cp(o,u),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bm(i,e,u),t!==null&&(Sc(t,i,u,o),WL(t,i,u)),u}function IN(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Y0e(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function h7(t,e){Y0e(t,e),(t=t.alternate)&&Y0e(t,e)}function DUe(){return null}var TSe=typeof reportError=="function"?reportError:function(t){console.error(t)};function p7(t){this._internalRoot=t}CF.prototype.render=p7.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Gt(409));EF(t,e,null,null)};CF.prototype.unmount=p7.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;B0(function(){EF(null,t,null,null)}),e[gp]=null}};function CF(t){this._internalRoot=t}CF.prototype.unstable_scheduleHydration=function(t){if(t){var e=rxe();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Pm.length&&e!==0&&e<Pm[n].priority;n++);Pm.splice(n,0,t),n===0&&sxe(t)}};function f7(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function PF(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Z0e(){}function OUe(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var v=IN(u);o.call(v)}}var u=PSe(e,r,t,0,null,!1,!1,"",Z0e);return t._reactRootContainer=u,t[gp]=u.current,wT(t.nodeType===8?t.parentNode:t),B0(),u}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var h=r;r=function(){var v=IN(m);h.call(v)}}var m=d7(t,0,!1,null,null,!1,!1,"",Z0e);return t._reactRootContainer=m,t[gp]=m.current,wT(t.nodeType===8?t.parentNode:t),B0(function(){EF(e,m,n,r)}),m}function TF(t,e,n,r,i){var o=n._reactRootContainer;if(o){var u=o;if(typeof i=="function"){var h=i;i=function(){var m=IN(u);h.call(m)}}EF(e,u,t,i)}else u=OUe(n,e,t,i,r);return IN(u)}txe=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=WP(e.pendingLanes);n!==0&&(D$(e,n|1),tl(e,ws()),!(Fr&6)&&(s1=ws()+500,rg()))}break;case 13:B0(function(){var r=vp(t,1);if(r!==null){var i=Ta();Sc(r,t,1,i)}}),h7(t,1)}};O$=function(t){if(t.tag===13){var e=vp(t,134217728);if(e!==null){var n=Ta();Sc(e,t,134217728,n)}h7(t,134217728)}};nxe=function(t){if(t.tag===13){var e=zm(t),n=vp(t,e);if(n!==null){var r=Ta();Sc(n,t,e,r)}h7(t,e)}};rxe=function(){return ni};ixe=function(t,e){var n=ni;try{return ni=t,e()}finally{ni=n}};H9=function(t,e,n){switch(e){case"input":if(N9(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=vF(r);if(!i)throw Error(Gt(90));L1e(r),N9(r,i)}}}break;case"textarea":F1e(t,n);break;case"select":e=n.value,e!=null&&Vw(t,!!n.multiple,e,!1)}};G1e=a7;W1e=B0;var LUe={usingClientEntryPoint:!1,Events:[oM,Cw,vF,j1e,H1e,a7]},xP={findFiberByHostInstance:_0,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},NUe={bundleType:xP.bundleType,version:xP.version,rendererPackageName:xP.rendererPackageName,rendererConfig:xP.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ep.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=X1e(t),t===null?null:t.stateNode},findFiberByHostInstance:xP.findFiberByHostInstance||DUe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Q3=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Q3.isDisabled&&Q3.supportsFiber)try{pF=Q3.inject(NUe),kd=Q3}catch{}}Ml.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LUe;Ml.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f7(e))throw Error(Gt(200));return RUe(t,e,null,n)};Ml.createRoot=function(t,e){if(!f7(t))throw Error(Gt(299));var n=!1,r="",i=TSe;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=d7(t,1,!1,null,null,n,!1,r,i),t[gp]=e.current,wT(t.nodeType===8?t.parentNode:t),new p7(e)};Ml.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Gt(188)):(t=Object.keys(t).join(","),Error(Gt(268,t)));return t=X1e(e),t=t===null?null:t.stateNode,t};Ml.flushSync=function(t){return B0(t)};Ml.hydrate=function(t,e,n){if(!PF(e))throw Error(Gt(200));return TF(null,t,e,!0,n)};Ml.hydrateRoot=function(t,e,n){if(!f7(t))throw Error(Gt(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",u=TSe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),e=PSe(e,null,t,1,n??null,i,!1,o,u),t[gp]=e.current,wT(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new CF(e)};Ml.render=function(t,e,n){if(!PF(e))throw Error(Gt(200));return TF(null,t,e,!1,n)};Ml.unmountComponentAtNode=function(t){if(!PF(t))throw Error(Gt(40));return t._reactRootContainer?(B0(function(){TF(null,null,t,!1,function(){t._reactRootContainer=null,t[gp]=null})}),!0):!1};Ml.unstable_batchedUpdates=a7;Ml.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!PF(n))throw Error(Gt(200));if(t==null||t._reactInternals===void 0)throw Error(Gt(38));return TF(t,e,n,!1,r)};Ml.version="18.2.0-next-9e3b772b8-20220608";function MSe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MSe)}catch(t){console.error(t)}}MSe(),P1e.exports=Ml;var FUe=P1e.exports,Q0e=FUe;k9.createRoot=Q0e.createRoot,k9.hydrateRoot=Q0e.hydrateRoot;function J3(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var RN={exports:{}},Nt={};(function(t){var e=Object.defineProperty,n=Object.defineProperties,r=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,h=(te,_e,ze)=>_e in te?e(te,_e,{enumerable:!0,configurable:!0,writable:!0,value:ze}):te[_e]=ze,m=(te,_e)=>{for(var ze in _e||(_e={}))o.call(_e,ze)&&h(te,ze,_e[ze]);if(i)for(var ze of i(_e))u.call(_e,ze)&&h(te,ze,_e[ze]);return te},v=(te,_e)=>n(te,r(_e)),x=te=>e(te,"__esModule",{value:!0}),E=(te,_e)=>{x(te);for(var ze in _e)e(te,ze,{get:_e[ze],enumerable:!0})};E(t,{Atom:()=>Tg,PointerProxy:()=>Q1,Ticker:()=>qd,getPointerParts:()=>Wd,isPointer:()=>Bl,isPrism:()=>Kd,iterateAndCountTicks:()=>Z1,iterateOver:()=>Mg,pointer:()=>Au,pointerToPrism:()=>Fc,prism:()=>Nc,val:()=>Up});var M=Array.isArray,D=M,H=typeof Wi=="object"&&Wi&&Wi.Object===Object&&Wi,F=H,B=typeof self=="object"&&self&&self.Object===Object&&self,z=F||B||Function("return this")(),P=z,W=P.Symbol,Z=W,ve=Object.prototype,X=ve.hasOwnProperty,se=ve.toString,pe=Z?Z.toStringTag:void 0;function J(te){var _e=X.call(te,pe),ze=te[pe];try{te[pe]=void 0;var bt=!0}catch{}var jn=se.call(te);return bt&&(_e?te[pe]=ze:delete te[pe]),jn}var ne=J,Ee=Object.prototype,ot=Ee.toString;function wt(te){return ot.call(te)}var ue=wt,Ye="[object Null]",Te="[object Undefined]",st=Z?Z.toStringTag:void 0;function Be(te){return te==null?te===void 0?Te:Ye:st&&st in Object(te)?ne(te):ue(te)}var Xe=Be;function qe(te){return te!=null&&typeof te=="object"}var dt=qe,Pt="[object Symbol]";function cn(te){return typeof te=="symbol"||dt(te)&&Xe(te)==Pt}var ht=cn,Et=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$t=/^\w*$/;function Zt(te,_e){if(D(te))return!1;var ze=typeof te;return ze=="number"||ze=="symbol"||ze=="boolean"||te==null||ht(te)?!0:$t.test(te)||!Et.test(te)||_e!=null&&te in Object(_e)}var gn=Zt;function Jt(te){var _e=typeof te;return te!=null&&(_e=="object"||_e=="function")}var Qn=Jt,vn="[object AsyncFunction]",Qe="[object Function]",Zr="[object GeneratorFunction]",Tn="[object Proxy]";function wn(te){if(!Qn(te))return!1;var _e=Xe(te);return _e==Qe||_e==Zr||_e==vn||_e==Tn}var sn=wn,Ur=P["__core-js_shared__"],Mn=Ur,Se=function(){var te=/[^.]+$/.exec(Mn&&Mn.keys&&Mn.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}();function fe(te){return!!Se&&Se in te}var lt=fe,Dt=Function.prototype,Ot=Dt.toString;function Mt(te){if(te!=null){try{return Ot.call(te)}catch{}try{return te+""}catch{}}return""}var hn=Mt,Yt=/[\\^$.*+?()[\]{}|]/g,nn=/^\[object .+?Constructor\]$/,Rn=Function.prototype,$n=Object.prototype,Lt=Rn.toString,mr=$n.hasOwnProperty,ir=RegExp("^"+Lt.call(mr).replace(Yt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function En(te){if(!Qn(te)||lt(te))return!1;var _e=sn(te)?ir:nn;return _e.test(hn(te))}var Pn=En;function en(te,_e){return te==null?void 0:te[_e]}var Bn=en;function Ae(te,_e){var ze=Bn(te,_e);return Pn(ze)?ze:void 0}var jt=Ae,Kt=jt(Object,"create"),ln=Kt;function Me(){this.__data__=ln?ln(null):{},this.size=0}var zt=Me;function It(te){var _e=this.has(te)&&delete this.__data__[te];return this.size-=_e?1:0,_e}var un=It,Dn="__lodash_hash_undefined__",lr=Object.prototype,sr=lr.hasOwnProperty;function dr(te){var _e=this.__data__;if(ln){var ze=_e[te];return ze===Dn?void 0:ze}return sr.call(_e,te)?_e[te]:void 0}var Pr=dr,qn=Object.prototype,ri=qn.hasOwnProperty;function Ji(te){var _e=this.__data__;return ln?_e[te]!==void 0:ri.call(_e,te)}var kc=Ji,Bd="__lodash_hash_undefined__";function Tu(te,_e){var ze=this.__data__;return this.size+=this.has(te)?0:1,ze[te]=ln&&_e===void 0?Bd:_e,this}var Pp=Tu;function ia(te){var _e=-1,ze=te==null?0:te.length;for(this.clear();++_e<ze;){var bt=te[_e];this.set(bt[0],bt[1])}}ia.prototype.clear=zt,ia.prototype.delete=un,ia.prototype.get=Pr,ia.prototype.has=kc,ia.prototype.set=Pp;var Ac=ia;function Ud(){this.__data__=[],this.size=0}var ug=Ud;function rl(te,_e){return te===_e||te!==te&&_e!==_e}var Tp=rl;function be(te,_e){for(var ze=te.length;ze--;)if(Tp(te[ze][0],_e))return ze;return-1}var Ze=be,yt=Array.prototype,mt=yt.splice;function ct(te){var _e=this.__data__,ze=Ze(_e,te);if(ze<0)return!1;var bt=_e.length-1;return ze==bt?_e.pop():mt.call(_e,ze,1),--this.size,!0}var rn=ct;function xn(te){var _e=this.__data__,ze=Ze(_e,te);return ze<0?void 0:_e[ze][1]}var Ln=xn;function Vn(te){return Ze(this.__data__,te)>-1}var nr=Vn;function Kn(te,_e){var ze=this.__data__,bt=Ze(ze,te);return bt<0?(++this.size,ze.push([te,_e])):ze[bt][1]=_e,this}var Nn=Kn;function _r(te){var _e=-1,ze=te==null?0:te.length;for(this.clear();++_e<ze;){var bt=te[_e];this.set(bt[0],bt[1])}}_r.prototype.clear=ug,_r.prototype.delete=rn,_r.prototype.get=Ln,_r.prototype.has=nr,_r.prototype.set=Nn;var Os=_r,ci=jt(P,"Map"),Ro=ci;function zr(){this.size=0,this.__data__={hash:new Ac,map:new(Ro||Os),string:new Ac}}var Wn=zr;function Ic(te){var _e=typeof te;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?te!=="__proto__":te===null}var Vr=Ic;function Do(te,_e){var ze=te.__data__;return Vr(_e)?ze[typeof _e=="string"?"string":"hash"]:ze.map}var Mu=Do;function ao(te){var _e=Mu(this,te).delete(te);return this.size-=_e?1:0,_e}var Ol=ao;function yi(te){return Mu(this,te).get(te)}var La=yi;function Rc(te){return Mu(this,te).has(te)}var Ls=Rc;function Dc(te,_e){var ze=Mu(this,te),bt=ze.size;return ze.set(te,_e),this.size+=ze.size==bt?0:1,this}var zd=Dc;function Na(te){var _e=-1,ze=te==null?0:te.length;for(this.clear();++_e<ze;){var bt=te[_e];this.set(bt[0],bt[1])}}Na.prototype.clear=Wn,Na.prototype.delete=Ol,Na.prototype.get=La,Na.prototype.has=Ls,Na.prototype.set=zd;var cg=Na,Mp="Expected a function";function dg(te,_e){if(typeof te!="function"||_e!=null&&typeof _e!="function")throw new TypeError(Mp);var ze=function(){var bt=arguments,jn=_e?_e.apply(this,bt):bt[0],Mr=ze.cache;if(Mr.has(jn))return Mr.get(jn);var Ss=te.apply(this,bt);return ze.cache=Mr.set(jn,Ss)||Mr,Ss};return ze.cache=new(dg.Cache||cg),ze}dg.Cache=cg;var R1=dg,Ll=500;function Vd(te){var _e=R1(te,function(bt){return ze.size===Ll&&ze.clear(),bt}),ze=_e.cache;return _e}var D1=Vd,jd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ay=/\\(\\)?/g,ly=D1(function(te){var _e=[];return te.charCodeAt(0)===46&&_e.push(""),te.replace(jd,function(ze,bt,jn,Mr){_e.push(jn?Mr.replace(ay,"$1"):bt||ze)}),_e}),Nl=ly;function uy(te,_e){for(var ze=-1,bt=te==null?0:te.length,jn=Array(bt);++ze<bt;)jn[ze]=_e(te[ze],ze,te);return jn}var O1=uy,Hd=1/0,hg=Z?Z.prototype:void 0,pg=hg?hg.toString:void 0;function fg(te){if(typeof te=="string")return te;if(D(te))return O1(te,fg)+"";if(ht(te))return pg?pg.call(te):"";var _e=te+"";return _e=="0"&&1/te==-Hd?"-0":_e}var cy=fg;function dy(te){return te==null?"":cy(te)}var hy=dy;function py(te,_e){return D(te)?te:gn(te,_e)?[te]:Nl(hy(te))}var L1=py,Oc=1/0;function Gd(te){if(typeof te=="string"||ht(te))return te;var _e=te+"";return _e=="0"&&1/te==-Oc?"-0":_e}var N1=Gd;function mg(te,_e){_e=L1(_e,te);for(var ze=0,bt=_e.length;te!=null&&ze<bt;)te=te[N1(_e[ze++])];return ze&&ze==bt?te:void 0}var Fl=mg;function ku(te,_e,ze){var bt=te==null?void 0:Fl(te,_e);return bt===void 0?ze:bt}var fy=ku;function kp(te,_e){return function(ze){return te(_e(ze))}}var F1=kp,B1=F1(Object.getPrototypeOf,Object),my=B1,U1="[object Object]",z1=Function.prototype,gy=Object.prototype,vy=z1.toString,yy=gy.hasOwnProperty,gg=vy.call(Object);function by(te){if(!dt(te)||Xe(te)!=U1)return!1;var _e=my(te);if(_e===null)return!0;var ze=yy.call(_e,"constructor")&&_e.constructor;return typeof ze=="function"&&ze instanceof ze&&vy.call(ze)==gg}var _y=by;function wy(te){var _e=te==null?0:te.length;return _e?te[_e-1]:void 0}var vg=wy,Ap=new WeakMap,Lc=new WeakMap,xy=Symbol("pointerMeta"),V1={get(te,_e){if(_e===xy)return Ap.get(te);let ze=Lc.get(te);ze||(ze=new Map,Lc.set(te,ze));const bt=ze.get(_e);if(bt!==void 0)return bt;const jn=Ap.get(te),Mr=$d({root:jn.root,path:[...jn.path,_e]});return ze.set(_e,Mr),Mr}},Fa=te=>te[xy],Wd=te=>{const{root:_e,path:ze}=Fa(te);return{root:_e,path:ze}};function $d(te){var _e;const ze={root:te.root,path:(_e=te.path)!=null?_e:[]},bt={};return Ap.set(bt,ze),new Proxy(bt,V1)}var Au=$d,Bl=te=>te&&!!Fa(te);function yg(te,_e,ze){return _e.length===0?ze(te):Iu(te,_e,ze)}var Iu=(te,_e,ze)=>{if(_e.length===0)return ze(te);if(Array.isArray(te)){let[bt,...jn]=_e;bt=parseInt(String(bt),10),isNaN(bt)&&(bt=0);const Mr=te[bt],Ss=Iu(Mr,jn,ze);if(Mr===Ss)return te;const sa=[...te];return sa.splice(bt,1,Ss),sa}else if(typeof te=="object"&&te!==null){const[bt,...jn]=_e,Mr=te[bt],Ss=Iu(Mr,jn,ze);return Mr===Ss?te:v(m({},te),{[bt]:Ss})}else{const[bt,...jn]=_e;return{[bt]:Iu(void 0,jn,ze)}}},ls=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const te=this._head;if(te)return this._head=te.next,te.data}push(te){const _e={next:this._head,data:te};this._head=_e}};function Kd(te){return!!(te&&te.isPrism&&te.isPrism===!0)}function Ip(){const te=()=>{},_e=new ls,ze=te;return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{_e.push(ze)},stopIgnoringDependencies:()=>{_e.peek()!==ze||_e.pop()},reportResolutionStart:Bc=>{const Uc=_e.peek();Uc&&Uc(Bc),_e.push(ze)},reportResolutionEnd:Bc=>{_e.pop()},pushCollector:Bc=>{_e.push(Bc)},popCollector:Bc=>{if(_e.peek()!==Bc)throw new Error("Popped collector is not on top of the stack");_e.pop()}}}function j1(){const te="__dataverse_discoveryMechanism_sharedStack",_e=typeof window<"u"?window:typeof Wi<"u"?Wi:{};if(_e){const ze=_e[te];if(ze&&typeof ze=="object"&&ze.type==="Dataverse_discoveryMechanism")return ze;{const bt=Ip();return _e[te]=bt,bt}}else return Ip()}var{startIgnoringDependencies:Ru,stopIgnoringDependencies:Ul,reportResolutionEnd:bg,reportResolutionStart:H1,pushCollector:Rp,popCollector:G1}=j1(),Sy=()=>{},Ey=class{constructor(te,_e){this._fn=te,this._prismInstance=_e,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new Dp(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=ze=>{this._possiblyStaleDeps.add(ze),this._markAsStale()};for(const ze of this._dependencies)ze._addDependent(this._reactToDependencyGoingStale);Ru(),this.getValue(),Ul()}get hasDependents(){return this._dependents.size>0}removeDependent(te){this._dependents.delete(te)}addDependent(te){this._dependents.add(te)}destroy(){for(const te of this._dependencies)te._removeDependent(this._reactToDependencyGoingStale);wg(this._scope)}getValue(){if(!this._isFresh){const te=this._recalculate();this._lastValue=te,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let te;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let bt=!1;Ru();for(const jn of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(jn)!==jn.getValue()){bt=!0;break}if(Ul(),this._possiblyStaleDeps.clear(),!bt)return this._lastValue}const _e=new Set;this._cacheOfDendencyValues.clear();const ze=bt=>{_e.add(bt),this._addDependency(bt)};Rp(ze),us.push(this._scope);try{te=this._fn()}catch(bt){console.error(bt)}finally{us.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}G1(ze);for(const bt of this._dependencies)_e.has(bt)||this._removeDependency(bt);this._dependencies=_e,Ru();for(const bt of _e)this._cacheOfDendencyValues.set(bt,bt.getValue());return Ul(),te}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const te of this._dependents)te(this._prismInstance)}}_addDependency(te){this._dependencies.has(te)||(this._dependencies.add(te),te._addDependent(this._reactToDependencyGoingStale))}_removeDependency(te){this._dependencies.has(te)&&(this._dependencies.delete(te),te._removeDependent(this._reactToDependencyGoingStale))}},_g={},W1=class{constructor(te){this._fn=te,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(te,_e,ze=!1){const bt=()=>{te.onThisOrNextTick(Mr)};let jn=_g;const Mr=()=>{const sa=this.getValue();sa!==jn&&(jn=sa,_e(sa))};return this._addDependent(bt),ze&&(jn=this.getValue(),_e(jn)),()=>{this._removeDependent(bt),te.offThisOrNextTick(Mr),te.offNextTick(Mr)}}onStale(te){const _e=()=>{this._removeDependent(ze)},ze=()=>te();return this._addDependent(ze),_e}keepHot(){return this.onStale(()=>{})}_addDependent(te){this._state.hot||this._goHot(),this._state.handle.addDependent(te)}_goHot(){const te=new Ey(this._fn,this);this._state={hot:!0,handle:te}}_removeDependent(te){const _e=this._state;if(!_e.hot)return;const ze=_e.handle;ze.removeDependent(te),ze.hasDependents||(this._state={hot:!1,handle:void 0},ze.destroy())}getValue(){H1(this);const te=this._state;let _e;return te.hot?_e=te.handle.getValue():_e=Xd(this._fn),bg(this),_e}},Dp=class{constructor(te){this._hotHandle=te,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(te,_e){let ze=this._refs.get(te);if(ze!==void 0)return ze;{const bt={current:_e};return this._refs.set(te,bt),bt}}effect(te,_e,ze){let bt=this.effects.get(te);bt===void 0&&(bt={cleanup:Sy,deps:void 0},this.effects.set(te,bt)),Sg(bt.deps,ze)&&(bt.cleanup(),Ru(),bt.cleanup=Op(_e,Sy).value,Ul(),bt.deps=ze)}memo(te,_e,ze){let bt=this.memos.get(te);return bt===void 0&&(bt={cachedValue:null,deps:void 0},this.memos.set(te,bt)),Sg(bt.deps,ze)&&(Ru(),bt.cachedValue=Op(_e,void 0).value,Ul(),bt.deps=ze),bt.cachedValue}state(te,_e){const{value:ze,setValue:bt}=this.memo("state/"+te,()=>{const jn={current:_e};return{value:jn,setValue:Ss=>{jn.current=Ss,this._hotHandle.forceStale()}}},[]);return[ze.current,bt]}sub(te){return this.subs[te]||(this.subs[te]=new Dp(this._hotHandle)),this.subs[te]}cleanupEffects(){for(const te of this.effects.values())Op(te.cleanup,void 0);this.effects.clear()}source(te,_e){const ze="$$source/blah";return this.effect(ze,()=>te(()=>{this._hotHandle.forceStale()}),[te]),_e()}};function wg(te){for(const _e of Object.values(te.subs))wg(_e);te.cleanupEffects()}function Op(te,_e){try{return{value:te(),ok:!0}}catch(ze){return setTimeout(function(){throw ze}),{value:_e,ok:!1}}}var us=new ls;function $1(te,_e){const ze=us.peek();if(!ze)throw new Error("prism.ref() is called outside of a prism() call.");return ze.ref(te,_e)}function xg(te,_e,ze){const bt=us.peek();if(!bt)throw new Error("prism.effect() is called outside of a prism() call.");return bt.effect(te,_e,ze)}function Sg(te,_e){if(te===void 0||_e===void 0)return!0;const ze=te.length;if(ze!==_e.length)return!0;for(let bt=0;bt<ze;bt++)if(te[bt]!==_e[bt])return!0;return!1}function Eg(te,_e,ze){const bt=us.peek();if(!bt)throw new Error("prism.memo() is called outside of a prism() call.");return bt.memo(te,_e,ze)}function cs(te,_e){const ze=us.peek();if(!ze)throw new Error("prism.state() is called outside of a prism() call.");return ze.state(te,_e)}function Lp(){if(!us.peek())throw new Error("The parent function is called outside of a prism() call.")}function K1(te,_e){const ze=us.peek();if(!ze)throw new Error("prism.scope() is called outside of a prism() call.");const bt=ze.sub(te);us.push(bt);const jn=Op(_e,void 0).value;return us.pop(),jn}function Np(te,_e,ze){return Eg(te,()=>bi(_e),ze).getValue()}function Fp(){return!!us.peek()}function X1(te,_e){const ze=us.peek();if(!ze)throw new Error("prism.source() is called outside of a prism() call.");return ze.source(te,_e)}var bi=te=>new W1(te),zl=class{effect(te,_e,ze){console.warn("prism.effect() does not run in cold prisms")}memo(te,_e,ze){return _e()}state(te,_e){return[_e,()=>{}]}ref(te,_e){return{current:_e}}sub(te){return new zl}source(te,_e){return _e()}};function Xd(te){const _e=new zl;us.push(_e);let ze;try{ze=te()}catch(bt){console.error(bt)}finally{us.pop()!==_e&&console.warn("The Prism hook stack has slipped. This is a bug.")}return ze}bi.ref=$1,bi.effect=xg,bi.memo=Eg,bi.ensurePrism=Lp,bi.state=cs,bi.scope=K1,bi.sub=Np,bi.inPrism=Fp,bi.source=X1;var Nc=bi,Cg;(function(te){te[te.Dict=0]="Dict",te[te.Array=1]="Array",te[te.Other=2]="Other"})(Cg||(Cg={}));var jr=te=>Array.isArray(te)?1:_y(te)?0:2,Pg=(te,_e,ze=jr(te))=>ze===0&&typeof _e=="string"||ze===1&&q1(_e)?te[_e]:void 0,q1=te=>{const _e=typeof te=="number"?te:parseInt(te,10);return!isNaN(_e)&&_e>=0&&_e<1/0&&(_e|0)===_e},Bp=class{constructor(te,_e){this._parent=te,this._path=_e,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(te){this.identityChangeListeners.add(te)}removeIdentityChangeListener(te){this.identityChangeListeners.delete(te),this._checkForGC()}removeChild(te){this.children.delete(te),this._checkForGC()}getChild(te){return this.children.get(te)}getOrCreateChild(te){let _e=this.children.get(te);return _e||(_e=_e=new Bp(this,this._path.concat([te])),this.children.set(te,_e)),_e}_checkForGC(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(vg(this._path))}},Tg=class{constructor(te){this.$$isPointerToPrismProvider=!0,this.pointer=Au({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(_e,ze)=>{const{path:bt}=Wd(_e),jn=this._getOrCreateScopeForPath(bt);return jn.identityChangeListeners.add(ze),()=>{jn.identityChangeListeners.delete(ze)}},this._currentState=te,this._rootScope=new Bp(void 0,[])}set(te){const _e=this._currentState;this._currentState=te,this._checkUpdates(this._rootScope,_e,te)}get(){return this._currentState}getByPointer(te){const _e=Bl(te)?te:te(this.pointer),ze=Wd(_e).path;return this._getIn(ze)}_getIn(te){return te.length===0?this.get():fy(this.get(),te)}reduce(te){this.set(te(this.get()))}reduceByPointer(te,_e){const ze=Bl(te)?te:te(this.pointer),bt=Wd(ze).path,jn=yg(this.get(),bt,_e);this.set(jn)}setByPointer(te,_e){this.reduceByPointer(te,()=>_e)}_checkUpdates(te,_e,ze){if(_e===ze)return;for(const Mr of te.identityChangeListeners)Mr(ze);if(te.children.size===0)return;const bt=jr(_e),jn=jr(ze);if(!(bt===2&&bt===jn))for(const[Mr,Ss]of te.children){const sa=Pg(_e,Mr,bt),Ty=Pg(ze,Mr,jn);this._checkUpdates(Ss,sa,Ty)}}_getOrCreateScopeForPath(te){let _e=this._rootScope;for(const ze of te)_e=_e.getOrCreateChild(ze);return _e}pointerToPrism(te){const{path:_e}=Wd(te),ze=jn=>this._onPointerValueChange(te,jn),bt=()=>this._getIn(_e);return Nc(()=>Nc.source(ze,bt))}},Cy=new WeakMap;function Y1(te){return typeof te=="object"&&te!==null&&te.$$isPointerToPrismProvider===!0}var Fc=te=>{const _e=Fa(te);let ze=Cy.get(_e);if(!ze){const bt=_e.root;if(!Y1(bt))throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");ze=bt.pointerToPrism(te),Cy.set(_e,ze)}return ze},Up=te=>Bl(te)?Fc(te).getValue():Kd(te)?te.getValue():te;function*Z1(te){let _e;if(Bl(te))_e=Fc(te);else if(Kd(te))_e=te;else throw new Error("Only pointers and prisms are supported");let ze=0;const bt=_e.onStale(()=>{ze++});try{for(;;){const jn=ze;ze=0,yield{value:_e.getValue(),ticks:jn}}}finally{bt()}}var Py=60*3,qd=class{constructor(te){this._conf=te,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(te){this._scheduledForThisOrNextTick.add(te),this._dormant&&this._goActive()}onNextTick(te){this._scheduledForNextTick.add(te),this._dormant&&this._goActive()}offThisOrNextTick(te){this._scheduledForThisOrNextTick.delete(te)}offNextTick(te){this._scheduledForNextTick.delete(te)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var te,_e;this._dormant&&(this._dormant=!1,(_e=(te=this._conf)==null?void 0:te.onActive)==null||_e.call(te))}_goDormant(){var te,_e;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,(_e=(te=this._conf)==null?void 0:te.onDormant)==null||_e.call(te))}tick(te=performance.now()){if(this.__ticks++,!this._dormant&&this._scheduledForNextTick.size===0&&this._scheduledForThisOrNextTick.size===0&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=Py)){this._goDormant();return}this._ticking=!0,this._timeAtCurrentTick=te;for(const _e of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(_e);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(te){const _e=this.time;if(te>10&&console.warn("_tick() recursing for 10 times"),te>100)throw new Error("Maximum recursion limit for _tick()");const ze=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const bt of ze)bt(_e);if(this._scheduledForThisOrNextTick.size>0)return this._tick(te+1)}};function*Mg(te){let _e;if(Bl(te))_e=Fc(te);else if(Kd(te))_e=te;else throw new Error("Only pointers and prisms are supported");const ze=new qd,bt=_e.onChange(ze,jn=>{});try{for(;;)ze.tick(),yield _e.getValue()}finally{bt()}}var Q1=class{constructor(te){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new Tg(te),this.pointer=Au({root:this,path:[]})}setPointer(te){this._currentPointerBox.set(te)}pointerToPrism(te){const{path:_e}=Fa(te);return Nc(()=>{const ze=this._currentPointerBox.prism.getValue(),bt=_e.reduce((jn,Mr)=>jn[Mr],ze);return Up(bt)})}}})(Nt);RN.exports;(function(t,e){var n=Object.create,r=Object.freeze,i=Object.defineProperty,o=Object.defineProperties,u=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertyNames,v=Object.getOwnPropertySymbols,x=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,D=(s,a)=>{if(a=Symbol[s])return a;throw Error("Symbol."+s+" is not defined")},H=(s,a,l)=>a in s?i(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l,F=(s,a)=>{for(var l in a||(a={}))E.call(a,l)&&H(s,l,a[l]);if(v)for(var l of v(a))M.call(a,l)&&H(s,l,a[l]);return s},B=(s,a)=>o(s,h(a)),z=(s,a)=>{var l={};for(var d in s)E.call(s,d)&&a.indexOf(d)<0&&(l[d]=s[d]);if(s!=null&&v)for(var d of v(s))a.indexOf(d)<0&&M.call(s,d)&&(l[d]=s[d]);return l},P=(s,a)=>()=>(s&&(a=s(s=0)),a),W=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports),Z=(s,a)=>{for(var l in a)i(s,l,{get:a[l],enumerable:!0})},ve=(s,a,l,d)=>{if(a&&typeof a=="object"||typeof a=="function")for(let f of m(a))!E.call(s,f)&&f!==l&&i(s,f,{get:()=>a[f],enumerable:!(d=u(a,f))||d.enumerable});return s},X=(s,a,l)=>(l=s!=null?n(x(s)):{},ve(a||!s||!s.__esModule?i(l,"default",{value:s,enumerable:!0}):l,s)),se=s=>ve(i({},"__esModule",{value:!0}),s),pe=(s,a,l)=>(H(s,typeof a!="symbol"?a+"":a,l),l),J=(s,a)=>r(i(s,"raw",{value:r(a||s.slice())})),ne=(s,a,l)=>new Promise((d,f)=>{var g=S=>{try{_(l.next(S))}catch(C){f(C)}},b=S=>{try{_(l.throw(S))}catch(C){f(C)}},_=S=>S.done?d(S.value):Promise.resolve(S.value).then(g,b);_((l=l.apply(s,a)).next())}),Ee=function(s,a){this[0]=s,this[1]=a},ot=s=>{var a=s[D("asyncIterator")],l=!1,d,f={};return a==null?(a=s[D("iterator")](),d=g=>f[g]=b=>a[g](b)):(a=a.call(s),d=g=>f[g]=b=>{if(l){if(l=!1,g==="throw")throw b;return b}return l=!0,{done:!1,value:new Ee(new Promise(_=>{var S=a[g](b);if(!(S instanceof Object))throw TypeError("Object expected");_(S)}),1)}}),f[D("iterator")]=()=>f,d("next"),"throw"in a?d("throw"):f.throw=g=>{throw g},"return"in a&&d("return"),f};function wt(s){Ye=s}function ue(){return Ye}var Ye,Te=P(()=>{});function st(s,a,l=[]){if(typeof s=="object"&&s){if(Be(s)||Xe(s)){a(s,l);return}for(let[d,f]of Object.entries(s))st(f,a,[...l,d])}else{if(s==null)return;a(s,l)}}var Be,Xe,qe=P(()=>{Be=s=>typeof s=="object"&&s!==null&&Object.hasOwnProperty.call(s,"type")&&s.type==="image"&&Object.hasOwnProperty.call(s,"id")&&typeof s.id=="string"&&s.id!=="",Xe=s=>typeof s=="object"&&s!==null&&Object.hasOwnProperty.call(s,"r")&&Object.hasOwnProperty.call(s,"g")&&Object.hasOwnProperty.call(s,"b")&&Object.hasOwnProperty.call(s,"a")&&typeof s.r=="number"&&typeof s.g=="number"&&typeof s.b=="number"&&typeof s.a=="number"});function dt(s){return a=>typeof a=="object"&&!!a&&a.type===s}var Pt,cn,ht,Et,$t,Zt,gn,Jt=P(()=>{Pt=dt("Theatre_Project"),cn=dt("Theatre_Sheet"),ht=dt("Theatre_SheetTemplate"),Et=dt("Theatre_SheetObject"),$t=dt("Theatre_SheetObjectTemplate"),Zt=dt("Theatre_Sheet_PublicAPI"),gn=dt("Theatre_SheetObject_PublicAPI")}),Qn,vn,Qe=P(()=>{Qn=typeof Wi=="object"&&Wi&&Wi.Object===Object&&Wi,vn=Qn}),Zr,Tn,wn,sn=P(()=>{Qe(),Zr=typeof self=="object"&&self&&self.Object===Object&&self,Tn=vn||Zr||Function("return this")(),wn=Tn}),Ur,Mn,Se=P(()=>{sn(),Ur=wn.Symbol,Mn=Ur});function fe(s){var a=Dt.call(s,Mt),l=s[Mt];try{s[Mt]=void 0;var d=!0}catch{}var f=Ot.call(s);return d&&(a?s[Mt]=l:delete s[Mt]),f}var lt,Dt,Ot,Mt,hn,Yt=P(()=>{Se(),lt=Object.prototype,Dt=lt.hasOwnProperty,Ot=lt.toString,Mt=Mn?Mn.toStringTag:void 0,hn=fe});function nn(s){return $n.call(s)}var Rn,$n,Lt,mr=P(()=>{Rn=Object.prototype,$n=Rn.toString,Lt=nn});function ir(s){return s==null?s===void 0?Pn:En:en&&en in Object(s)?hn(s):Lt(s)}var En,Pn,en,Bn,Ae=P(()=>{Se(),Yt(),mr(),En="[object Null]",Pn="[object Undefined]",en=Mn?Mn.toStringTag:void 0,Bn=ir});function jt(s){return s!=null&&typeof s=="object"}var Kt,ln=P(()=>{Kt=jt});function Me(s){return typeof s=="symbol"||Kt(s)&&Bn(s)==zt}var zt,It,un=P(()=>{Ae(),ln(),zt="[object Symbol]",It=Me});function Dn(s,a){for(var l=-1,d=s==null?0:s.length,f=Array(d);++l<d;)f[l]=a(s[l],l,s);return f}var lr,sr=P(()=>{lr=Dn}),dr,Pr,qn=P(()=>{dr=Array.isArray,Pr=dr});function ri(s){if(typeof s=="string")return s;if(Pr(s))return lr(s,ri)+"";if(It(s))return Bd?Bd.call(s):"";var a=s+"";return a=="0"&&1/s==-Ji?"-0":a}var Ji,kc,Bd,Tu,Pp=P(()=>{Se(),sr(),qn(),un(),Ji=1/0,kc=Mn?Mn.prototype:void 0,Bd=kc?kc.toString:void 0,Tu=ri});function ia(s){for(var a=s.length;a--&&Ac.test(s.charAt(a)););return a}var Ac,Ud,ug=P(()=>{Ac=/\s/,Ud=ia});function rl(s){return s&&s.slice(0,Ud(s)+1).replace(Tp,"")}var Tp,be,Ze=P(()=>{ug(),Tp=/^\s+/,be=rl});function yt(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}var mt,ct=P(()=>{mt=yt});function rn(s){if(typeof s=="number")return s;if(It(s))return xn;if(mt(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=mt(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=be(s);var l=Vn.test(s);return l||nr.test(s)?Kn(s.slice(2),l?2:8):Ln.test(s)?xn:+s}var xn,Ln,Vn,nr,Kn,Nn,_r=P(()=>{Ze(),ct(),un(),xn=0/0,Ln=/^[-+]0x[0-9a-f]+$/i,Vn=/^0b[01]+$/i,nr=/^0o[0-7]+$/i,Kn=parseInt,Nn=rn});function Os(s){if(!s)return s===0?s:0;if(s=Nn(s),s===ci||s===-ci){var a=s<0?-1:1;return a*Ro}return s===s?s:0}var ci,Ro,zr,Wn=P(()=>{_r(),ci=1/0,Ro=17976931348623157e292,zr=Os});function Ic(s){var a=zr(s),l=a%1;return a===a?l?a-l:a:0}var Vr,Do=P(()=>{Wn(),Vr=Ic});function Mu(s){return s}var ao,Ol=P(()=>{ao=Mu});function yi(s){if(!mt(s))return!1;var a=Bn(s);return a==Rc||a==Ls||a==La||a==Dc}var La,Rc,Ls,Dc,zd,Na=P(()=>{Ae(),ct(),La="[object AsyncFunction]",Rc="[object Function]",Ls="[object GeneratorFunction]",Dc="[object Proxy]",zd=yi}),cg,Mp,dg=P(()=>{sn(),cg=wn["__core-js_shared__"],Mp=cg});function R1(s){return!!Ll&&Ll in s}var Ll,Vd,D1=P(()=>{dg(),Ll=function(){var s=/[^.]+$/.exec(Mp&&Mp.keys&&Mp.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Vd=R1});function jd(s){if(s!=null){try{return ly.call(s)}catch{}try{return s+""}catch{}}return""}var ay,ly,Nl,uy=P(()=>{ay=Function.prototype,ly=ay.toString,Nl=jd});function O1(s){if(!mt(s)||Vd(s))return!1;var a=zd(s)?hy:hg;return a.test(Nl(s))}var Hd,hg,pg,fg,cy,dy,hy,py,L1=P(()=>{Na(),D1(),ct(),uy(),Hd=/[\\^$.*+?()[\]{}|]/g,hg=/^\[object .+?Constructor\]$/,pg=Function.prototype,fg=Object.prototype,cy=pg.toString,dy=fg.hasOwnProperty,hy=RegExp("^"+cy.call(dy).replace(Hd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),py=O1});function Oc(s,a){return s==null?void 0:s[a]}var Gd,N1=P(()=>{Gd=Oc});function mg(s,a){var l=Gd(s,a);return py(l)?l:void 0}var Fl,ku=P(()=>{L1(),N1(),Fl=mg}),fy,kp,F1=P(()=>{ku(),sn(),fy=Fl(wn,"WeakMap"),kp=fy});function B1(s,a,l){switch(l.length){case 0:return s.call(a);case 1:return s.call(a,l[0]);case 2:return s.call(a,l[0],l[1]);case 3:return s.call(a,l[0],l[1],l[2])}return s.apply(a,l)}var my,U1=P(()=>{my=B1});function z1(){}var gy,vy=P(()=>{gy=z1});function yy(s,a){var l=-1,d=s.length;for(a||(a=Array(d));++l<d;)a[l]=s[l];return a}var gg,by=P(()=>{gg=yy});function _y(s){var a=0,l=0;return function(){var d=Ap(),f=vg-(d-l);if(l=d,f>0){if(++a>=wy)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}var wy,vg,Ap,Lc,xy=P(()=>{wy=800,vg=16,Ap=Date.now,Lc=_y});function V1(s){return function(){return s}}var Fa,Wd=P(()=>{Fa=V1}),$d,Au,Bl=P(()=>{ku(),$d=function(){try{var s=Fl(Object,"defineProperty");return s({},"",{}),s}catch{}}(),Au=$d}),yg,Iu,ls=P(()=>{Wd(),Bl(),Ol(),yg=Au?function(s,a){return Au(s,"toString",{configurable:!0,enumerable:!1,value:Fa(a),writable:!0})}:ao,Iu=yg}),Kd,Ip,j1=P(()=>{ls(),xy(),Kd=Lc(Iu),Ip=Kd});function Ru(s,a,l,d){for(var f=s.length,g=l+(d?1:-1);d?g--:++g<f;)if(a(s[g],g,s))return g;return-1}var Ul,bg=P(()=>{Ul=Ru});function H1(s){return s!==s}var Rp,G1=P(()=>{Rp=H1});function Sy(s,a,l){for(var d=l-1,f=s.length;++d<f;)if(s[d]===a)return d;return-1}var Ey,_g=P(()=>{Ey=Sy});function W1(s,a,l){return a===a?Ey(s,a,l):Ul(s,Rp,l)}var Dp,wg=P(()=>{bg(),G1(),_g(),Dp=W1});function Op(s,a){var l=s==null?0:s.length;return!!l&&Dp(s,a,0)>-1}var us,$1=P(()=>{wg(),us=Op});function xg(s,a){var l=typeof s;return a=a??Sg,!!a&&(l=="number"||l!="symbol"&&Eg.test(s))&&s>-1&&s%1==0&&s<a}var Sg,Eg,cs,Lp=P(()=>{Sg=9007199254740991,Eg=/^(?:0|[1-9]\d*)$/,cs=xg});function K1(s,a,l){a=="__proto__"&&Au?Au(s,a,{configurable:!0,enumerable:!0,value:l,writable:!0}):s[a]=l}var Np,Fp=P(()=>{Bl(),Np=K1});function X1(s,a){return s===a||s!==s&&a!==a}var bi,zl=P(()=>{bi=X1});function Xd(s,a,l){var d=s[a];(!(Cg.call(s,a)&&bi(d,l))||l===void 0&&!(a in s))&&Np(s,a,l)}var Nc,Cg,jr,Pg=P(()=>{Fp(),zl(),Nc=Object.prototype,Cg=Nc.hasOwnProperty,jr=Xd});function q1(s,a,l){return a=Bp(a===void 0?s.length-1:a,0),function(){for(var d=arguments,f=-1,g=Bp(d.length-a,0),b=Array(g);++f<g;)b[f]=d[a+f];f=-1;for(var _=Array(a+1);++f<a;)_[f]=d[f];return _[a]=l(b),my(s,this,_)}}var Bp,Tg,Cy=P(()=>{U1(),Bp=Math.max,Tg=q1});function Y1(s,a){return Ip(Tg(s,a,ao),s+"")}var Fc,Up=P(()=>{Ol(),Cy(),j1(),Fc=Y1});function Z1(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Py}var Py,qd,Mg=P(()=>{Py=9007199254740991,qd=Z1});function Q1(s){return s!=null&&qd(s.length)&&!zd(s)}var te,_e=P(()=>{Na(),Mg(),te=Q1});function ze(s,a,l){if(!mt(l))return!1;var d=typeof a;return(d=="number"?te(l)&&cs(a,l.length):d=="string"&&a in l)?bi(l[a],s):!1}var bt,jn=P(()=>{zl(),_e(),Lp(),ct(),bt=ze});function Mr(s){var a=s&&s.constructor,l=typeof a=="function"&&a.prototype||Ss;return s===l}var Ss,sa,Ty=P(()=>{Ss=Object.prototype,sa=Mr});function Bc(s,a){for(var l=-1,d=Array(s);++l<s;)d[l]=a(l);return d}var Uc,FM=P(()=>{Uc=Bc});function cB(s){return Kt(s)&&Bn(s)==BM}var BM,J1,dB=P(()=>{Ae(),ln(),BM="[object Arguments]",J1=cB}),ex,UM,zM,kg,My,tx=P(()=>{dB(),ln(),ex=Object.prototype,UM=ex.hasOwnProperty,zM=ex.propertyIsEnumerable,kg=J1(function(){return arguments}())?J1:function(s){return Kt(s)&&UM.call(s,"callee")&&!zM.call(s,"callee")},My=kg});function nx(){return!1}var VM,jM=P(()=>{VM=nx}),rx,ix,ky,sx,HM,GM,Ay,ox=P(()=>{sn(),jM(),rx=e&&!e.nodeType&&e,ix=rx&&!0&&t&&!t.nodeType&&t,ky=ix&&ix.exports===rx,sx=ky?wn.Buffer:void 0,HM=sx?sx.isBuffer:void 0,GM=HM||VM,Ay=GM});function WM(s){return Kt(s)&&qd(s.length)&&!!ii[Bn(s)]}var $M,KM,XM,ax,qM,YM,lx,ux,ZM,cx,QM,JM,Ag,ek,tk,nk,rk,ik,sk,ok,ak,lk,uk,ck,ii,dk,hB=P(()=>{Ae(),Mg(),ln(),$M="[object Arguments]",KM="[object Array]",XM="[object Boolean]",ax="[object Date]",qM="[object Error]",YM="[object Function]",lx="[object Map]",ux="[object Number]",ZM="[object Object]",cx="[object RegExp]",QM="[object Set]",JM="[object String]",Ag="[object WeakMap]",ek="[object ArrayBuffer]",tk="[object DataView]",nk="[object Float32Array]",rk="[object Float64Array]",ik="[object Int8Array]",sk="[object Int16Array]",ok="[object Int32Array]",ak="[object Uint8Array]",lk="[object Uint8ClampedArray]",uk="[object Uint16Array]",ck="[object Uint32Array]",ii={},ii[nk]=ii[rk]=ii[ik]=ii[sk]=ii[ok]=ii[ak]=ii[lk]=ii[uk]=ii[ck]=!0,ii[$M]=ii[KM]=ii[ek]=ii[XM]=ii[tk]=ii[ax]=ii[qM]=ii[YM]=ii[lx]=ii[ux]=ii[ZM]=ii[cx]=ii[QM]=ii[JM]=ii[Ag]=!1,dk=WM});function pB(s){return function(a){return s(a)}}var Iy,dx=P(()=>{Iy=pB}),hx,zp,hk,Ry,pk,px,fB=P(()=>{Qe(),hx=e&&!e.nodeType&&e,zp=hx&&!0&&t&&!t.nodeType&&t,hk=zp&&zp.exports===hx,Ry=hk&&vn.process,pk=function(){try{var s=zp&&zp.require&&zp.require("util").types;return s||Ry&&Ry.binding&&Ry.binding("util")}catch{}}(),px=pk}),Qr,fk,fx,mk=P(()=>{hB(),dx(),fB(),Qr=px&&px.isTypedArray,fk=Qr?Iy(Qr):dk,fx=fk});function mx(s,a){var l=Pr(s),d=!l&&My(s),f=!l&&!d&&Ay(s),g=!l&&!d&&!f&&fx(s),b=l||d||f||g,_=b?Uc(s.length,String):[],S=_.length;for(var C in s)(a||Vp.call(s,C))&&!(b&&(C=="length"||f&&(C=="offset"||C=="parent")||g&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||cs(C,S)))&&_.push(C);return _}var gx,Vp,gk,vx=P(()=>{FM(),tx(),qn(),ox(),Lp(),mk(),gx=Object.prototype,Vp=gx.hasOwnProperty,gk=mx});function mB(s,a){return function(l){return s(a(l))}}var zc,yx=P(()=>{zc=mB}),vk,bx,gB=P(()=>{yx(),vk=zc(Object.keys,Object),bx=vk});function vB(s){if(!sa(s))return bx(s);var a=[];for(var l in Object(s))_x.call(s,l)&&l!="constructor"&&a.push(l);return a}var yk,_x,bk,_k=P(()=>{Ty(),gB(),yk=Object.prototype,_x=yk.hasOwnProperty,bk=vB});function yB(s){return te(s)?gk(s):bk(s)}var Dy,wx=P(()=>{vx(),_k(),_e(),Dy=yB});function bB(s,a){if(Pr(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||It(s)?!0:xk.test(s)||!wk.test(s)||a!=null&&s in Object(a)}var wk,xk,Oy,Yd=P(()=>{qn(),un(),wk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,xk=/^\w*$/,Oy=bB}),Sk,jp,Ly=P(()=>{ku(),Sk=Fl(Object,"create"),jp=Sk});function _B(){this.__data__=jp?jp(null):{},this.size=0}var Ek,wB=P(()=>{Ly(),Ek=_B});function xB(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}var Ny,SB=P(()=>{Ny=xB});function Ck(s){var a=this.__data__;if(jp){var l=a[s];return l===Pk?void 0:l}return Tk.call(a,s)?a[s]:void 0}var Pk,Fy,Tk,Mk,EB=P(()=>{Ly(),Pk="__lodash_hash_undefined__",Fy=Object.prototype,Tk=Fy.hasOwnProperty,Mk=Ck});function kk(s){var a=this.__data__;return jp?a[s]!==void 0:Ik.call(a,s)}var Ak,Ik,Rk,CB=P(()=>{Ly(),Ak=Object.prototype,Ik=Ak.hasOwnProperty,Rk=kk});function PB(s,a){var l=this.__data__;return this.size+=this.has(s)?0:1,l[s]=jp&&a===void 0?xx:a,this}var xx,Dk,TB=P(()=>{Ly(),xx="__lodash_hash_undefined__",Dk=PB});function Hp(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var d=s[a];this.set(d[0],d[1])}}var Sx,MB=P(()=>{wB(),SB(),EB(),CB(),TB(),Hp.prototype.clear=Ek,Hp.prototype.delete=Ny,Hp.prototype.get=Mk,Hp.prototype.has=Rk,Hp.prototype.set=Dk,Sx=Hp});function kB(){this.__data__=[],this.size=0}var Ok,AB=P(()=>{Ok=kB});function IB(s,a){for(var l=s.length;l--;)if(bi(s[l][0],a))return l;return-1}var Ig,By=P(()=>{zl(),Ig=IB});function Ex(s){var a=this.__data__,l=Ig(a,s);if(l<0)return!1;var d=a.length-1;return l==d?a.pop():Nk.call(a,l,1),--this.size,!0}var Lk,Nk,Cx,RB=P(()=>{By(),Lk=Array.prototype,Nk=Lk.splice,Cx=Ex});function DB(s){var a=this.__data__,l=Ig(a,s);return l<0?void 0:a[l][1]}var Fk,OB=P(()=>{By(),Fk=DB});function LB(s){return Ig(this.__data__,s)>-1}var Bk,Px=P(()=>{By(),Bk=LB});function Tx(s,a){var l=this.__data__,d=Ig(l,s);return d<0?(++this.size,l.push([s,a])):l[d][1]=a,this}var Uk,zk=P(()=>{By(),Uk=Tx});function Zd(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var d=s[a];this.set(d[0],d[1])}}var Gp,Uy=P(()=>{AB(),RB(),OB(),Px(),zk(),Zd.prototype.clear=Ok,Zd.prototype.delete=Cx,Zd.prototype.get=Fk,Zd.prototype.has=Bk,Zd.prototype.set=Uk,Gp=Zd}),Mx,Qd,kx=P(()=>{ku(),sn(),Mx=Fl(wn,"Map"),Qd=Mx});function NB(){this.size=0,this.__data__={hash:new Sx,map:new(Qd||Gp),string:new Sx}}var Vk,FB=P(()=>{MB(),Uy(),kx(),Vk=NB});function BB(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}var jk,UB=P(()=>{jk=BB});function zB(s,a){var l=s.__data__;return jk(a)?l[typeof a=="string"?"string":"hash"]:l.map}var Rg,zy=P(()=>{UB(),Rg=zB});function VB(s){var a=Rg(this,s).delete(s);return this.size-=a?1:0,a}var Ax,jB=P(()=>{zy(),Ax=VB});function HB(s){return Rg(this,s).get(s)}var Hk,GB=P(()=>{zy(),Hk=HB});function WB(s){return Rg(this,s).has(s)}var Gk,$B=P(()=>{zy(),Gk=WB});function KB(s,a){var l=Rg(this,s),d=l.size;return l.set(s,a),this.size+=l.size==d?0:1,this}var Wk,XB=P(()=>{zy(),Wk=KB});function Wp(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var d=s[a];this.set(d[0],d[1])}}var Vl,Jd=P(()=>{FB(),jB(),GB(),$B(),XB(),Wp.prototype.clear=Vk,Wp.prototype.delete=Ax,Wp.prototype.get=Hk,Wp.prototype.has=Gk,Wp.prototype.set=Wk,Vl=Wp});function Ix(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError($k);var l=function(){var d=arguments,f=a?a.apply(this,d):d[0],g=l.cache;if(g.has(f))return g.get(f);var b=s.apply(this,d);return l.cache=g.set(f,b)||g,b};return l.cache=new(Ix.Cache||Vl),l}var $k,Rx,Kk=P(()=>{Jd(),$k="Expected a function",Ix.Cache=Vl,Rx=Ix});function Xk(s){var a=Rx(s,function(d){return l.size===Dx&&l.clear(),d}),l=a.cache;return a}var Dx,qk,Yk=P(()=>{Kk(),Dx=500,qk=Xk}),Ox,Zk,Qk,Jk,qB=P(()=>{Yk(),Ox=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Zk=/\\(\\)?/g,Qk=qk(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(Ox,function(l,d,f,g){a.push(f?g.replace(Zk,"$1"):d||l)}),a}),Jk=Qk});function YB(s){return s==null?"":Tu(s)}var Dg,eA=P(()=>{Pp(),Dg=YB});function ZB(s,a){return Pr(s)?s:Oy(s,a)?[s]:Jk(Dg(s))}var Og,Lx=P(()=>{qn(),Yd(),qB(),eA(),Og=ZB});function Nx(s){if(typeof s=="string"||It(s))return s;var a=s+"";return a=="0"&&1/s==-tA?"-0":a}var tA,$p,Lg=P(()=>{un(),tA=1/0,$p=Nx});function QB(s,a){a=Og(a,s);for(var l=0,d=a.length;s!=null&&l<d;)s=s[$p(a[l++])];return l&&l==d?s:void 0}var Ng,Fx=P(()=>{Lx(),Lg(),Ng=QB});function JB(s,a,l){var d=s==null?void 0:Ng(s,a);return d===void 0?l:d}var eh,Kp=P(()=>{Fx(),eh=JB});function eU(s,a){for(var l=-1,d=a.length,f=s.length;++l<d;)s[f+l]=a[l];return s}var Fg,nA=P(()=>{Fg=eU});function tU(s){return Pr(s)||My(s)||!!(Bx&&s&&s[Bx])}var Bx,Vy,nU=P(()=>{Se(),tx(),qn(),Bx=Mn?Mn.isConcatSpreadable:void 0,Vy=tU});function jy(s,a,l,d,f){var g=-1,b=s.length;for(l||(l=Vy),f||(f=[]);++g<b;){var _=s[g];a>0&&l(_)?a>1?jy(_,a-1,l,d,f):Fg(f,_):d||(f[f.length]=_)}return f}var rA,Ux=P(()=>{nA(),nU(),rA=jy}),zx,iA,sA=P(()=>{yx(),zx=zc(Object.getPrototypeOf,Object),iA=zx});function oA(s){if(!Kt(s)||Bn(s)!=Vx)return!1;var a=iA(s);if(a===null)return!0;var l=lA.call(a,"constructor")&&a.constructor;return typeof l=="function"&&l instanceof l&&Hx.call(l)==uA}var Vx,jx,aA,Hx,lA,uA,Hy,Vc=P(()=>{Ae(),sA(),ln(),Vx="[object Object]",jx=Function.prototype,aA=Object.prototype,Hx=jx.toString,lA=aA.hasOwnProperty,uA=Hx.call(Object),Hy=oA});function Bg(s){var a=Math[s];return function(l,d){if(l=Nn(l),d=d==null?0:dA(Vr(d),292),d&&cA(l)){var f=(Dg(l)+"e").split("e"),g=a(f[0]+"e"+(+f[1]+d));return f=(Dg(g)+"e").split("e"),+(f[0]+"e"+(+f[1]-d))}return a(l)}}var cA,dA,hA,rU=P(()=>{sn(),Do(),_r(),eA(),cA=wn.isFinite,dA=Math.min,hA=Bg});function iU(s,a,l){return s===s&&(l!==void 0&&(s=s<=l?s:l),a!==void 0&&(s=s>=a?s:a)),s}var Ug,sU=P(()=>{Ug=iU});function Gx(s,a,l){return l===void 0&&(l=a,a=void 0),l!==void 0&&(l=Nn(l),l=l===l?l:0),a!==void 0&&(a=Nn(a),a=a===a?a:0),Ug(Nn(s),a,l)}var _i,Gy=P(()=>{sU(),_r(),_i=Gx});function oU(){this.__data__=new Gp,this.size=0}var pA,aU=P(()=>{Uy(),pA=oU});function fA(s){var a=this.__data__,l=a.delete(s);return this.size=a.size,l}var Wx,lU=P(()=>{Wx=fA});function uU(s){return this.__data__.get(s)}var mA,cU=P(()=>{mA=uU});function dU(s){return this.__data__.has(s)}var gA,hU=P(()=>{gA=dU});function pU(s,a){var l=this.__data__;if(l instanceof Gp){var d=l.__data__;if(!Qd||d.length<vA-1)return d.push([s,a]),this.size=++l.size,this;l=this.__data__=new Vl(d)}return l.set(s,a),this.size=l.size,this}var vA,yA,fU=P(()=>{Uy(),kx(),Jd(),vA=200,yA=pU});function Xp(s){var a=this.__data__=new Gp(s);this.size=a.size}var zg,bA=P(()=>{Uy(),aU(),lU(),cU(),hU(),fU(),Xp.prototype.clear=pA,Xp.prototype.delete=Wx,Xp.prototype.get=mA,Xp.prototype.has=gA,Xp.prototype.set=yA,zg=Xp});function mU(s,a){for(var l=-1,d=s==null?0:s.length,f=0,g=[];++l<d;){var b=s[l];a(b,l,s)&&(g[f++]=b)}return g}var _A,gU=P(()=>{_A=mU});function vU(){return[]}var wA,yU=P(()=>{wA=vU}),xA,SA,$x,EA,CA,bU=P(()=>{gU(),yU(),xA=Object.prototype,SA=xA.propertyIsEnumerable,$x=Object.getOwnPropertySymbols,EA=$x?function(s){return s==null?[]:(s=Object(s),_A($x(s),function(a){return SA.call(s,a)}))}:wA,CA=EA});function _U(s,a,l){var d=a(s);return Pr(s)?d:Fg(d,l(s))}var PA,wU=P(()=>{nA(),qn(),PA=_U});function xU(s){return PA(s,Dy,CA)}var Wy,SU=P(()=>{wU(),bU(),wx(),Wy=xU}),TA,$y,EU=P(()=>{ku(),sn(),TA=Fl(wn,"DataView"),$y=TA}),MA,Vg,CU=P(()=>{ku(),sn(),MA=Fl(wn,"Promise"),Vg=MA}),kA,th,AA=P(()=>{ku(),sn(),kA=Fl(wn,"Set"),th=kA}),Kx,Xx,qx,Yx,Zx,Qx,Jx,IA,RA,DA,eS,jc,tS,PU=P(()=>{EU(),kx(),CU(),AA(),F1(),Ae(),uy(),Kx="[object Map]",Xx="[object Object]",qx="[object Promise]",Yx="[object Set]",Zx="[object WeakMap]",Qx="[object DataView]",Jx=Nl($y),IA=Nl(Qd),RA=Nl(Vg),DA=Nl(th),eS=Nl(kp),jc=Bn,($y&&jc(new $y(new ArrayBuffer(1)))!=Qx||Qd&&jc(new Qd)!=Kx||Vg&&jc(Vg.resolve())!=qx||th&&jc(new th)!=Yx||kp&&jc(new kp)!=Zx)&&(jc=function(s){var a=Bn(s),l=a==Xx?s.constructor:void 0,d=l?Nl(l):"";if(d)switch(d){case Jx:return Qx;case IA:return Kx;case RA:return qx;case DA:return Yx;case eS:return Zx}return a}),tS=jc}),OA,nS,TU=P(()=>{sn(),OA=wn.Uint8Array,nS=OA});function MU(s){return this.__data__.set(s,LA),this}var LA,NA,kU=P(()=>{LA="__lodash_hash_undefined__",NA=MU});function AU(s){return this.__data__.has(s)}var FA,IU=P(()=>{FA=AU});function Ky(s){var a=-1,l=s==null?0:s.length;for(this.__data__=new Vl;++a<l;)this.add(s[a])}var rS,BA=P(()=>{Jd(),kU(),IU(),Ky.prototype.add=Ky.prototype.push=NA,Ky.prototype.has=FA,rS=Ky});function si(s,a){for(var l=-1,d=s==null?0:s.length;++l<d;)if(a(s[l],l,s))return!0;return!1}var jg,RU=P(()=>{jg=si});function DU(s,a){return s.has(a)}var iS,UA=P(()=>{iS=DU});function OU(s,a,l,d,f,g){var b=l&zA,_=s.length,S=a.length;if(_!=S&&!(b&&S>_))return!1;var C=g.get(s),I=g.get(a);if(C&&I)return C==a&&I==s;var O=-1,R=!0,A=l&VA?new rS:void 0;for(g.set(s,a),g.set(a,s);++O<_;){var N=s[O],L=a[O];if(d)var V=b?d(L,N,O,a,s,g):d(N,L,O,s,a,g);if(V!==void 0){if(V)continue;R=!1;break}if(A){if(!jg(a,function(G,$){if(!iS(A,$)&&(N===G||f(N,G,l,d,g)))return A.push($)})){R=!1;break}}else if(!(N===L||f(N,L,l,d,g))){R=!1;break}}return g.delete(s),g.delete(a),R}var zA,VA,sS,jA=P(()=>{BA(),RU(),UA(),zA=1,VA=2,sS=OU});function LU(s){var a=-1,l=Array(s.size);return s.forEach(function(d,f){l[++a]=[f,d]}),l}var Hg,NU=P(()=>{Hg=LU});function FU(s){var a=-1,l=Array(s.size);return s.forEach(function(d){l[++a]=d}),l}var Xy,oS=P(()=>{Xy=FU});function BU(s,a,l,d,f,g,b){switch(l){case e2:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case JA:return!(s.byteLength!=a.byteLength||!g(new nS(s),new nS(a)));case WA:case aS:case XA:return bi(+s,+a);case $A:return s.name==a.name&&s.message==a.message;case qA:case ZA:return s==a+"";case KA:var _=Hg;case YA:var S=d&HA;if(_||(_=Xy),s.size!=a.size&&!S)return!1;var C=b.get(s);if(C)return C==a;d|=GA,b.set(s,a);var I=sS(_(s),_(a),d,f,g,b);return b.delete(s),I;case QA:if(qy)return qy.call(s)==qy.call(a)}return!1}var HA,GA,WA,aS,$A,KA,XA,qA,YA,ZA,QA,JA,e2,lS,qy,t2,UU=P(()=>{Se(),TU(),zl(),jA(),NU(),oS(),HA=1,GA=2,WA="[object Boolean]",aS="[object Date]",$A="[object Error]",KA="[object Map]",XA="[object Number]",qA="[object RegExp]",YA="[object Set]",ZA="[object String]",QA="[object Symbol]",JA="[object ArrayBuffer]",e2="[object DataView]",lS=Mn?Mn.prototype:void 0,qy=lS?lS.valueOf:void 0,t2=BU});function zU(s,a,l,d,f,g){var b=l&n2,_=Wy(s),S=_.length,C=Wy(a),I=C.length;if(S!=I&&!b)return!1;for(var O=S;O--;){var R=_[O];if(!(b?R in a:i2.call(a,R)))return!1}var A=g.get(s),N=g.get(a);if(A&&N)return A==a&&N==s;var L=!0;g.set(s,a),g.set(a,s);for(var V=b;++O<S;){R=_[O];var G=s[R],$=a[R];if(d)var Y=b?d($,G,R,a,s,g):d(G,$,R,s,a,g);if(!(Y===void 0?G===$||f(G,$,l,d,g):Y)){L=!1;break}V||(V=R=="constructor")}if(L&&!V){var ie=s.constructor,re=a.constructor;ie!=re&&"constructor"in s&&"constructor"in a&&!(typeof ie=="function"&&ie instanceof ie&&typeof re=="function"&&re instanceof re)&&(L=!1)}return g.delete(s),g.delete(a),L}var n2,r2,i2,uS,cS=P(()=>{SU(),n2=1,r2=Object.prototype,i2=r2.hasOwnProperty,uS=zU});function VU(s,a,l,d,f,g){var b=Pr(s),_=Pr(a),S=b?hS:tS(s),C=_?hS:tS(a);S=S==dS?Gg:S,C=C==dS?Gg:C;var I=S==Gg,O=C==Gg,R=S==C;if(R&&Ay(s)){if(!Ay(a))return!1;b=!0,I=!1}if(R&&!I)return g||(g=new zg),b||fx(s)?sS(s,a,l,d,f,g):t2(s,a,S,l,d,f,g);if(!(l&s2)){var A=I&&pS.call(s,"__wrapped__"),N=O&&pS.call(a,"__wrapped__");if(A||N){var L=A?s.value():s,V=N?a.value():a;return g||(g=new zg),f(L,V,l,d,g)}}return R?(g||(g=new zg),uS(s,a,l,d,f,g)):!1}var s2,dS,hS,Gg,o2,pS,a2,l2=P(()=>{bA(),jA(),UU(),cS(),PU(),qn(),ox(),mk(),s2=1,dS="[object Arguments]",hS="[object Array]",Gg="[object Object]",o2=Object.prototype,pS=o2.hasOwnProperty,a2=VU});function fS(s,a,l,d,f){return s===a?!0:s==null||a==null||!Kt(s)&&!Kt(a)?s!==s&&a!==a:a2(s,a,l,d,fS,f)}var qp,u2=P(()=>{l2(),ln(),qp=fS});function c2(s,a,l,d){var f=l.length,g=f,b=!d;if(s==null)return!g;for(s=Object(s);f--;){var _=l[f];if(b&&_[2]?_[1]!==s[_[0]]:!(_[0]in s))return!1}for(;++f<g;){_=l[f];var S=_[0],C=s[S],I=_[1];if(b&&_[2]){if(C===void 0&&!(S in s))return!1}else{var O=new zg;if(d)var R=d(C,I,S,s,a,O);if(!(R===void 0?qp(I,C,d2|h2,d,O):R))return!1}}return!0}var d2,h2,mS,p2=P(()=>{bA(),u2(),d2=1,h2=2,mS=c2});function jU(s){return s===s&&!mt(s)}var gS,f2=P(()=>{ct(),gS=jU});function HU(s){for(var a=Dy(s),l=a.length;l--;){var d=a[l],f=s[d];a[l]=[d,f,gS(f)]}return a}var m2,g2=P(()=>{f2(),wx(),m2=HU});function GU(s,a){return function(l){return l==null?!1:l[s]===a&&(a!==void 0||s in Object(l))}}var vS,v2=P(()=>{vS=GU});function y2(s){var a=m2(s);return a.length==1&&a[0][2]?vS(a[0][0],a[0][1]):function(l){return l===s||mS(l,s,a)}}var b2,WU=P(()=>{p2(),g2(),v2(),b2=y2});function $U(s,a){return s!=null&&a in Object(s)}var _2,KU=P(()=>{_2=$U});function XU(s,a,l){a=Og(a,s);for(var d=-1,f=a.length,g=!1;++d<f;){var b=$p(a[d]);if(!(g=s!=null&&l(s,b)))break;s=s[b]}return g||++d!=f?g:(f=s==null?0:s.length,!!f&&qd(f)&&cs(b,f)&&(Pr(s)||My(s)))}var w2,qU=P(()=>{Lx(),tx(),qn(),Lp(),Mg(),Lg(),w2=XU});function YU(s,a){return s!=null&&w2(s,a,_2)}var x2,ZU=P(()=>{KU(),qU(),x2=YU});function QU(s,a){return Oy(s)&&gS(a)?vS($p(s),a):function(l){var d=eh(l,s);return d===void 0&&d===a?x2(l,s):qp(a,d,S2|yS)}}var S2,yS,E2,JU=P(()=>{u2(),Kp(),ZU(),Yd(),f2(),v2(),Lg(),S2=1,yS=2,E2=QU});function e5(s){return function(a){return a==null?void 0:a[s]}}var C2,t5=P(()=>{C2=e5});function n5(s){return function(a){return Ng(a,s)}}var P2,r5=P(()=>{Fx(),P2=n5});function i5(s){return Oy(s)?C2($p(s)):P2(s)}var T2,s5=P(()=>{t5(),r5(),Yd(),Lg(),T2=i5});function o5(s){return typeof s=="function"?s:s==null?ao:typeof s=="object"?Pr(s)?E2(s[0],s[1]):b2(s):T2(s)}var Yp,nh=P(()=>{WU(),JU(),Ol(),qn(),s5(),Yp=o5});function a5(s,a,l,d){for(var f=-1,g=s==null?0:s.length;++f<g;){var b=s[f];a(d,b,l(b),s)}return d}var M2,l5=P(()=>{M2=a5});function u5(s){return function(a,l,d){for(var f=-1,g=Object(a),b=d(a),_=b.length;_--;){var S=b[s?_:++f];if(l(g[S],S,g)===!1)break}return a}}var k2,c5=P(()=>{k2=u5}),A2,I2,d5=P(()=>{c5(),A2=k2(),I2=A2});function h5(s,a){return s&&I2(s,a,Dy)}var bS,R2=P(()=>{d5(),wx(),bS=h5});function p5(s,a){return function(l,d){if(l==null)return l;if(!te(l))return s(l,d);for(var f=l.length,g=a?f:-1,b=Object(l);(a?g--:++g<f)&&d(b[g],g,b)!==!1;);return l}}var D2,f5=P(()=>{_e(),D2=p5}),O2,_S,L2=P(()=>{R2(),f5(),O2=D2(bS),_S=O2});function N2(s,a,l,d){return _S(s,function(f,g,b){a(d,f,l(f),b)}),d}var F2,m5=P(()=>{L2(),F2=N2});function B2(s,a){return function(l,d){var f=Pr(l)?M2:F2,g=a?a():{};return f(l,s,Yp(d,2),g)}}var U2,g5=P(()=>{l5(),m5(),nh(),qn(),U2=B2}),z2,Yy,v5=P(()=>{sn(),z2=function(){return wn.Date.now()},Yy=z2});function y5(s,a,l){var d,f,g,b,_,S,C=0,I=!1,O=!1,R=!0;if(typeof s!="function")throw new TypeError(Zy);a=Nn(a)||0,mt(l)&&(I=!!l.leading,O="maxWait"in l,g=O?Qy(Nn(l.maxWait)||0,a):g,R="trailing"in l?!!l.trailing:R);function A(ce){var Pe=d,ye=f;return d=f=void 0,C=ce,b=s.apply(ye,Pe),b}function N(ce){return C=ce,_=setTimeout(G,a),I?A(ce):b}function L(ce){var Pe=ce-S,ye=ce-C,we=a-Pe;return O?V2(we,g-ye):we}function V(ce){var Pe=ce-S,ye=ce-C;return S===void 0||Pe>=a||Pe<0||O&&ye>=g}function G(){var ce=Yy();if(V(ce))return $(ce);_=setTimeout(G,L(ce))}function $(ce){return _=void 0,R&&d?A(ce):(d=f=void 0,b)}function Y(){_!==void 0&&clearTimeout(_),C=0,d=S=f=_=void 0}function ie(){return _===void 0?b:$(Yy())}function re(){var ce=Yy(),Pe=V(ce);if(d=arguments,f=this,S=ce,Pe){if(_===void 0)return N(S);if(O)return clearTimeout(_),_=setTimeout(G,a),A(S)}return _===void 0&&(_=setTimeout(G,a)),b}return re.cancel=Y,re.flush=ie,re}var Zy,Qy,V2,Jy,wS=P(()=>{ct(),v5(),_r(),Zy="Expected a function",Qy=Math.max,V2=Math.min,Jy=y5});function j2(s,a,l){for(var d=-1,f=s==null?0:s.length;++d<f;)if(l(a,s[d]))return!0;return!1}var H2,G2=P(()=>{H2=j2});function W2(s){var a=s==null?0:s.length;return a?s[a-1]:void 0}var rh,eb=P(()=>{rh=W2});function b5(s,a,l){var d=s==null?0:s.length;if(!d)return-1;var f=l==null?0:Vr(l);return f<0&&(f=xS(d+f,0)),Ul(s,Yp(a,3),f)}var xS,SS,_5=P(()=>{bg(),nh(),Do(),xS=Math.max,SS=b5});function w5(s,a,l){var d=s==null?0:s.length;if(!d)return-1;var f=d-1;return l!==void 0&&(f=Vr(l),f=l<0?ES(d+f,0):$2(f,d-1)),Ul(s,Yp(a,3),f,!0)}var ES,$2,K2,x5=P(()=>{bg(),nh(),Do(),ES=Math.max,$2=Math.min,K2=w5});function S5(s,a){var l=-1,d=te(s)?Array(s.length):[];return _S(s,function(f,g,b){d[++l]=a(f,g,b)}),d}var Zp,E5=P(()=>{L2(),_e(),Zp=S5});function X2(s,a,l){return s>=Y2(a,l)&&s<q2(a,l)}var q2,Y2,Z2,tb=P(()=>{q2=Math.max,Y2=Math.min,Z2=X2});function CS(s,a,l){return a=zr(a),l===void 0?(l=a,a=0):l=zr(l),s=Nn(s),Z2(s,a,l)}var PS,C5=P(()=>{tb(),Wn(),_r(),PS=CS});function oi(s){return typeof s=="number"&&s==Vr(s)}var Oo,oa=P(()=>{Do(),Oo=oi}),Hc,Hr,Du=P(()=>{Fp(),g5(),Hc=U2(function(s,a,l){Np(s,l,a)}),Hr=Hc});function Q2(s,a){var l={};return a=Yp(a,3),bS(s,function(d,f,g){Np(l,f,a(d,f,g))}),l}var ih,J2=P(()=>{Fp(),R2(),nh(),ih=Q2});function P5(s,a,l,d){if(!mt(s))return s;a=Og(a,s);for(var f=-1,g=a.length,b=g-1,_=s;_!=null&&++f<g;){var S=$p(a[f]),C=l;if(S==="__proto__"||S==="constructor"||S==="prototype")return s;if(f!=b){var I=_[S];C=d?d(I,S,_):void 0,C===void 0&&(C=mt(I)?I:cs(a[f+1])?[]:{})}jr(_,S,C),_=_[S]}return s}var eI,T5=P(()=>{Pg(),Lx(),Lp(),ct(),Lg(),eI=P5});function tI(s,a){var l=s.length;for(s.sort(a);l--;)s[l]=s[l].value;return s}var TS,nb=P(()=>{TS=tI});function nI(s,a){if(s!==a){var l=s!==void 0,d=s===null,f=s===s,g=It(s),b=a!==void 0,_=a===null,S=a===a,C=It(a);if(!_&&!C&&!g&&s>a||g&&b&&S&&!_&&!C||d&&b&&S||!l&&S||!f)return 1;if(!d&&!g&&!C&&s<a||C&&l&&f&&!d&&!g||_&&l&&f||!b&&f||!S)return-1}return 0}var rI,iI=P(()=>{un(),rI=nI});function sI(s,a,l){for(var d=-1,f=s.criteria,g=a.criteria,b=f.length,_=l.length;++d<b;){var S=rI(f[d],g[d]);if(S){if(d>=_)return S;var C=l[d];return S*(C=="desc"?-1:1)}}return s.index-a.index}var MS,M5=P(()=>{iI(),MS=sI});function k5(s,a,l){a.length?a=lr(a,function(g){return Pr(g)?function(b){return Ng(b,g.length===1?g[0]:g)}:g}):a=[ao];var d=-1;a=lr(a,Iy(Yp));var f=Zp(s,function(g,b,_){var S=lr(a,function(C){return C(g)});return{criteria:S,index:++d,value:g}});return TS(f,function(g,b){return MS(g,b,l)})}var kS,A5=P(()=>{sr(),Fx(),nh(),E5(),nb(),dx(),M5(),Ol(),qn(),kS=k5});function I5(s,a,l,d){for(var f=l-1,g=s.length;++f<g;)if(d(s[f],a))return f;return-1}var Qp,oI=P(()=>{Qp=I5});function R5(s,a,l,d){var f=d?Qp:Dp,g=-1,b=a.length,_=s;for(s===a&&(a=gg(a)),l&&(_=lr(s,Iy(l)));++g<b;)for(var S=0,C=a[g],I=l?l(C):C;(S=f(_,I,S,d))>-1;)_!==s&&ds.call(_,S,1),ds.call(s,S,1);return s}var aI,ds,Ou,D5=P(()=>{sr(),wg(),oI(),dx(),by(),aI=Array.prototype,ds=aI.splice,Ou=R5});function rb(s,a){return s&&s.length&&a&&a.length?Ou(s,a):s}var lI,O5=P(()=>{D5(),lI=rb}),uI,cI,AS=P(()=>{Up(),O5(),uI=Fc(lI),cI=uI}),dI,Wg,Jp=P(()=>{rU(),dI=hA("round"),Wg=dI});function L5(s,a,l){return s==null?s:eI(s,a,l)}var ef,ib=P(()=>{T5(),ef=L5}),sb,hI,ob=P(()=>{Ux(),A5(),Up(),jn(),sb=Fc(function(s,a){if(s==null)return[];var l=a.length;return l>1&&bt(s,a[0],a[1])?a=[]:l>2&&bt(a[0],a[1],a[2])&&(a=[a[0]]),kS(s,rA(a,1),[])}),hI=sb}),IS,RS,pI,N5=P(()=>{AA(),vy(),oS(),IS=1/0,RS=th&&1/Xy(new th([,-0]))[1]==IS?function(s){return new th(s)}:gy,pI=RS});function F5(s,a,l){var d=-1,f=us,g=s.length,b=!0,_=[],S=_;if(l)b=!1,f=H2;else if(g>=fI){var C=a?null:pI(s);if(C)return Xy(C);b=!1,f=iS,S=new rS}else S=a?[]:_;e:for(;++d<g;){var I=s[d],O=a?a(I):I;if(I=l||I!==0?I:0,b&&O===O){for(var R=S.length;R--;)if(S[R]===O)continue e;a&&S.push(O),_.push(I)}else f(S,O,l)||(S!==_&&S.push(O),_.push(I))}return _}var fI,mI,B5=P(()=>{BA(),$1(),G2(),UA(),N5(),oS(),fI=200,mI=F5});function U5(s){return s&&s.length?mI(s):[]}var Lo,sh=P(()=>{B5(),Lo=U5}),di=P(()=>{Gy(),wS(),_5(),C5(),oa(),Vc(),eb(),J2(),Kk(),Jp(),sh()}),DS=W((s,a)=>{var l;a.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Wi):d=>(l||(l=Promise.resolve())).then(d).catch(f=>setTimeout(()=>{throw f},0))}),gI=W(s=>{var a=Symbol.for("react.element"),l=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),_=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),I=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),R=Symbol.iterator;function A(he){return he===null||typeof he!="object"?null:(he=R&&he[R]||he["@@iterator"],typeof he=="function"?he:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,V={};function G(he,ge,et){this.props=he,this.context=ge,this.refs=V,this.updater=et||N}G.prototype.isReactComponent={},G.prototype.setState=function(he,ge){if(typeof he!="object"&&typeof he!="function"&&he!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,he,ge,"setState")},G.prototype.forceUpdate=function(he){this.updater.enqueueForceUpdate(this,he,"forceUpdate")};function $(){}$.prototype=G.prototype;function Y(he,ge,et){this.props=he,this.context=ge,this.refs=V,this.updater=et||N}var ie=Y.prototype=new $;ie.constructor=Y,L(ie,G.prototype),ie.isPureReactComponent=!0;var re=Array.isArray,ce=Object.prototype.hasOwnProperty,Pe={current:null},ye={key:!0,ref:!0,__self:!0,__source:!0};function we(he,ge,et){var rt,ut={},We=null,tn=null;if(ge!=null)for(rt in ge.ref!==void 0&&(tn=ge.ref),ge.key!==void 0&&(We=""+ge.key),ge)ce.call(ge,rt)&&!ye.hasOwnProperty(rt)&&(ut[rt]=ge[rt]);var xt=arguments.length-2;if(xt===1)ut.children=et;else if(1<xt){for(var qt=Array(xt),yn=0;yn<xt;yn++)qt[yn]=arguments[yn+2];ut.children=qt}if(he&&he.defaultProps)for(rt in xt=he.defaultProps,xt)ut[rt]===void 0&&(ut[rt]=xt[rt]);return{$$typeof:a,type:he,key:We,ref:tn,props:ut,_owner:Pe.current}}function Le(he,ge){return{$$typeof:a,type:he.type,key:ge,ref:he.ref,props:he.props,_owner:he._owner}}function it(he){return typeof he=="object"&&he!==null&&he.$$typeof===a}function de(he){var ge={"=":"=0",":":"=2"};return"$"+he.replace(/[=:]/g,function(et){return ge[et]})}var Oe=/\/+/g;function Q(he,ge){return typeof he=="object"&&he!==null&&he.key!=null?de(""+he.key):ge.toString(36)}function je(he,ge,et,rt,ut){var We=typeof he;(We==="undefined"||We==="boolean")&&(he=null);var tn=!1;if(he===null)tn=!0;else switch(We){case"string":case"number":tn=!0;break;case"object":switch(he.$$typeof){case a:case l:tn=!0}}if(tn)return tn=he,ut=ut(tn),he=rt===""?"."+Q(tn,0):rt,re(ut)?(et="",he!=null&&(et=he.replace(Oe,"$&/")+"/"),je(ut,ge,et,"",function(yn){return yn})):ut!=null&&(it(ut)&&(ut=Le(ut,et+(!ut.key||tn&&tn.key===ut.key?"":(""+ut.key).replace(Oe,"$&/")+"/")+he)),ge.push(ut)),1;if(tn=0,rt=rt===""?".":rt+":",re(he))for(var xt=0;xt<he.length;xt++){We=he[xt];var qt=rt+Q(We,xt);tn+=je(We,ge,et,qt,ut)}else if(qt=A(he),typeof qt=="function")for(he=qt.call(he),xt=0;!(We=he.next()).done;)We=We.value,qt=rt+Q(We,xt++),tn+=je(We,ge,et,qt,ut);else if(We==="object")throw ge=String(he),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(he).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.");return tn}function Rt(he,ge,et){if(he==null)return he;var rt=[],ut=0;return je(he,rt,"","",function(We){return ge.call(et,We,ut++)}),rt}function Ie(he){if(he._status===-1){var ge=he._result;ge=ge(),ge.then(function(et){(he._status===0||he._status===-1)&&(he._status=1,he._result=et)},function(et){(he._status===0||he._status===-1)&&(he._status=2,he._result=et)}),he._status===-1&&(he._status=0,he._result=ge)}if(he._status===1)return he._result.default;throw he._result}var Re={current:null},Ge={transition:null},St={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:Ge,ReactCurrentOwner:Pe};s.Children={map:Rt,forEach:function(he,ge,et){Rt(he,function(){ge.apply(this,arguments)},et)},count:function(he){var ge=0;return Rt(he,function(){ge++}),ge},toArray:function(he){return Rt(he,function(ge){return ge})||[]},only:function(he){if(!it(he))throw Error("React.Children.only expected to receive a single React element child.");return he}},s.Component=G,s.Fragment=d,s.Profiler=g,s.PureComponent=Y,s.StrictMode=f,s.Suspense=C,s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=St,s.cloneElement=function(he,ge,et){if(he==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+he+".");var rt=L({},he.props),ut=he.key,We=he.ref,tn=he._owner;if(ge!=null){if(ge.ref!==void 0&&(We=ge.ref,tn=Pe.current),ge.key!==void 0&&(ut=""+ge.key),he.type&&he.type.defaultProps)var xt=he.type.defaultProps;for(qt in ge)ce.call(ge,qt)&&!ye.hasOwnProperty(qt)&&(rt[qt]=ge[qt]===void 0&&xt!==void 0?xt[qt]:ge[qt])}var qt=arguments.length-2;if(qt===1)rt.children=et;else if(1<qt){xt=Array(qt);for(var yn=0;yn<qt;yn++)xt[yn]=arguments[yn+2];rt.children=xt}return{$$typeof:a,type:he.type,key:ut,ref:We,props:rt,_owner:tn}},s.createContext=function(he){return he={$$typeof:_,_currentValue:he,_currentValue2:he,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},he.Provider={$$typeof:b,_context:he},he.Consumer=he},s.createElement=we,s.createFactory=function(he){var ge=we.bind(null,he);return ge.type=he,ge},s.createRef=function(){return{current:null}},s.forwardRef=function(he){return{$$typeof:S,render:he}},s.isValidElement=it,s.lazy=function(he){return{$$typeof:O,_payload:{_status:-1,_result:he},_init:Ie}},s.memo=function(he,ge){return{$$typeof:I,type:he,compare:ge===void 0?null:ge}},s.startTransition=function(he){var ge=Ge.transition;Ge.transition={};try{he()}finally{Ge.transition=ge}},s.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},s.useCallback=function(he,ge){return Re.current.useCallback(he,ge)},s.useContext=function(he){return Re.current.useContext(he)},s.useDebugValue=function(){},s.useDeferredValue=function(he){return Re.current.useDeferredValue(he)},s.useEffect=function(he,ge){return Re.current.useEffect(he,ge)},s.useId=function(){return Re.current.useId()},s.useImperativeHandle=function(he,ge,et){return Re.current.useImperativeHandle(he,ge,et)},s.useInsertionEffect=function(he,ge){return Re.current.useInsertionEffect(he,ge)},s.useLayoutEffect=function(he,ge){return Re.current.useLayoutEffect(he,ge)},s.useMemo=function(he,ge){return Re.current.useMemo(he,ge)},s.useReducer=function(he,ge,et){return Re.current.useReducer(he,ge,et)},s.useRef=function(he){return Re.current.useRef(he)},s.useState=function(he){return Re.current.useState(he)},s.useSyncExternalStore=function(he,ge,et){return Re.current.useSyncExternalStore(he,ge,et)},s.useTransition=function(){return Re.current.useTransition()},s.version="18.2.0"}),Ne=W((s,a)=>{a.exports=gI()}),vI=W(s=>{function a(Re,Ge){var St=Re.length;Re.push(Ge);e:for(;0<St;){var he=St-1>>>1,ge=Re[he];if(0<f(ge,Ge))Re[he]=Ge,Re[St]=ge,St=he;else break e}}function l(Re){return Re.length===0?null:Re[0]}function d(Re){if(Re.length===0)return null;var Ge=Re[0],St=Re.pop();if(St!==Ge){Re[0]=St;e:for(var he=0,ge=Re.length,et=ge>>>1;he<et;){var rt=2*(he+1)-1,ut=Re[rt],We=rt+1,tn=Re[We];if(0>f(ut,St))We<ge&&0>f(tn,ut)?(Re[he]=tn,Re[We]=St,he=We):(Re[he]=ut,Re[rt]=St,he=rt);else if(We<ge&&0>f(tn,St))Re[he]=tn,Re[We]=St,he=We;else break e}}return Ge}function f(Re,Ge){var St=Re.sortIndex-Ge.sortIndex;return St!==0?St:Re.id-Ge.id}typeof performance=="object"&&typeof performance.now=="function"?(g=performance,s.unstable_now=function(){return g.now()}):(b=Date,_=b.now(),s.unstable_now=function(){return b.now()-_});var g,b,_,S=[],C=[],I=1,O=null,R=3,A=!1,N=!1,L=!1,V=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(Re){for(var Ge=l(C);Ge!==null;){if(Ge.callback===null)d(C);else if(Ge.startTime<=Re)d(C),Ge.sortIndex=Ge.expirationTime,a(S,Ge);else break;Ge=l(C)}}function ie(Re){if(L=!1,Y(Re),!N)if(l(S)!==null)N=!0,Rt(re);else{var Ge=l(C);Ge!==null&&Ie(ie,Ge.startTime-Re)}}function re(Re,Ge){N=!1,L&&(L=!1,G(ye),ye=-1),A=!0;var St=R;try{for(Y(Ge),O=l(S);O!==null&&(!(O.expirationTime>Ge)||Re&&!it());){var he=O.callback;if(typeof he=="function"){O.callback=null,R=O.priorityLevel;var ge=he(O.expirationTime<=Ge);Ge=s.unstable_now(),typeof ge=="function"?O.callback=ge:O===l(S)&&d(S),Y(Ge)}else d(S);O=l(S)}if(O!==null)var et=!0;else{var rt=l(C);rt!==null&&Ie(ie,rt.startTime-Ge),et=!1}return et}finally{O=null,R=St,A=!1}}var ce=!1,Pe=null,ye=-1,we=5,Le=-1;function it(){return!(s.unstable_now()-Le<we)}function de(){if(Pe!==null){var Re=s.unstable_now();Le=Re;var Ge=!0;try{Ge=Pe(!0,Re)}finally{Ge?Oe():(ce=!1,Pe=null)}}else ce=!1}var Oe;typeof $=="function"?Oe=function(){$(de)}:typeof MessageChannel<"u"?(Q=new MessageChannel,je=Q.port2,Q.port1.onmessage=de,Oe=function(){je.postMessage(null)}):Oe=function(){V(de,0)};var Q,je;function Rt(Re){Pe=Re,ce||(ce=!0,Oe())}function Ie(Re,Ge){ye=V(function(){Re(s.unstable_now())},Ge)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Re){Re.callback=null},s.unstable_continueExecution=function(){N||A||(N=!0,Rt(re))},s.unstable_forceFrameRate=function(Re){0>Re||125<Re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<Re?Math.floor(1e3/Re):5},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_getFirstCallbackNode=function(){return l(S)},s.unstable_next=function(Re){switch(R){case 1:case 2:case 3:var Ge=3;break;default:Ge=R}var St=R;R=Ge;try{return Re()}finally{R=St}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Re,Ge){switch(Re){case 1:case 2:case 3:case 4:case 5:break;default:Re=3}var St=R;R=Re;try{return Ge()}finally{R=St}},s.unstable_scheduleCallback=function(Re,Ge,St){var he=s.unstable_now();switch(typeof St=="object"&&St!==null?(St=St.delay,St=typeof St=="number"&&0<St?he+St:he):St=he,Re){case 1:var ge=-1;break;case 2:ge=250;break;case 5:ge=1073741823;break;case 4:ge=1e4;break;default:ge=5e3}return ge=St+ge,Re={id:I++,callback:Ge,priorityLevel:Re,startTime:St,expirationTime:ge,sortIndex:-1},St>he?(Re.sortIndex=St,a(C,Re),l(S)===null&&Re===l(C)&&(L?(G(ye),ye=-1):L=!0,Ie(ie,St-he))):(Re.sortIndex=ge,a(S,Re),N||A||(N=!0,Rt(re))),Re},s.unstable_shouldYield=it,s.unstable_wrapCallback=function(Re){var Ge=R;return function(){var St=R;R=Ge;try{return Re.apply(this,arguments)}finally{R=St}}}}),z5=W((s,a)=>{a.exports=vI()}),OS=W(s=>{var a=Ne(),l=z5();function d(c){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+c,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+c+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,g={};function b(c,p){_(c,p),_(c+"Capture",p)}function _(c,p){for(g[c]=p,c=0;c<p.length;c++)f.add(p[c])}var S=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C=Object.prototype.hasOwnProperty,I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O={},R={};function A(c){return C.call(R,c)?!0:C.call(O,c)?!1:I.test(c)?R[c]=!0:(O[c]=!0,!1)}function N(c,p,w,k){if(w!==null&&w.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return k?!1:w!==null?!w.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function L(c,p,w,k){if(p===null||typeof p>"u"||N(c,p,w,k))return!0;if(k)return!1;if(w!==null)switch(w.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function V(c,p,w,k,j,K,ae){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=k,this.attributeNamespace=j,this.mustUseProperty=w,this.propertyName=c,this.type=p,this.sanitizeURL=K,this.removeEmptyString=ae}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){G[c]=new V(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var p=c[0];G[p]=new V(p,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){G[c]=new V(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){G[c]=new V(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){G[c]=new V(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){G[c]=new V(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){G[c]=new V(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){G[c]=new V(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){G[c]=new V(c,5,!1,c.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function Y(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var p=c.replace($,Y);G[p]=new V(p,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var p=c.replace($,Y);G[p]=new V(p,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var p=c.replace($,Y);G[p]=new V(p,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){G[c]=new V(c,1,!1,c.toLowerCase(),null,!1,!1)}),G.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){G[c]=new V(c,1,!1,c.toLowerCase(),null,!0,!0)});function ie(c,p,w,k){var j=G.hasOwnProperty(p)?G[p]:null;(j!==null?j.type!==0:k||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(L(p,w,j,k)&&(w=null),k||j===null?A(p)&&(w===null?c.removeAttribute(p):c.setAttribute(p,""+w)):j.mustUseProperty?c[j.propertyName]=w===null?j.type===3?!1:"":w:(p=j.attributeName,k=j.attributeNamespace,w===null?c.removeAttribute(p):(j=j.type,w=j===3||j===4&&w===!0?"":""+w,k?c.setAttributeNS(k,p,w):c.setAttribute(p,w))))}var re=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ce=Symbol.for("react.element"),Pe=Symbol.for("react.portal"),ye=Symbol.for("react.fragment"),we=Symbol.for("react.strict_mode"),Le=Symbol.for("react.profiler"),it=Symbol.for("react.provider"),de=Symbol.for("react.context"),Oe=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),je=Symbol.for("react.suspense_list"),Rt=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),Ge=Symbol.iterator;function St(c){return c===null||typeof c!="object"?null:(c=Ge&&c[Ge]||c["@@iterator"],typeof c=="function"?c:null)}var he=Object.assign,ge;function et(c){if(ge===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);ge=p&&p[1]||""}return`
`+ge+c}var rt=!1;function ut(c,p){if(!c||rt)return"";rt=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(vt){var k=vt}Reflect.construct(c,[],p)}else{try{p.call()}catch(vt){k=vt}c.call(p.prototype)}else{try{throw Error()}catch(vt){k=vt}c()}}catch(vt){if(vt&&k&&typeof vt.stack=="string"){for(var j=vt.stack.split(`
`),K=k.stack.split(`
`),ae=j.length-1,ke=K.length-1;1<=ae&&0<=ke&&j[ae]!==K[ke];)ke--;for(;1<=ae&&0<=ke;ae--,ke--)if(j[ae]!==K[ke]){if(ae!==1||ke!==1)do if(ae--,ke--,0>ke||j[ae]!==K[ke]){var Ue=`
`+j[ae].replace(" at new "," at ");return c.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",c.displayName)),Ue}while(1<=ae&&0<=ke);break}}}finally{rt=!1,Error.prepareStackTrace=w}return(c=c?c.displayName||c.name:"")?et(c):""}function We(c){switch(c.tag){case 5:return et(c.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return c=ut(c.type,!1),c;case 11:return c=ut(c.type.render,!1),c;case 1:return c=ut(c.type,!0),c;default:return""}}function tn(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case ye:return"Fragment";case Pe:return"Portal";case Le:return"Profiler";case we:return"StrictMode";case Q:return"Suspense";case je:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case de:return(c.displayName||"Context")+".Consumer";case it:return(c._context.displayName||"Context")+".Provider";case Oe:var p=c.render;return c=c.displayName,c||(c=p.displayName||p.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Rt:return p=c.displayName||null,p!==null?p:tn(c.type)||"Memo";case Ie:p=c._payload,c=c._init;try{return tn(c(p))}catch{}}return null}function xt(c){var p=c.type;switch(c.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=p.render,c=c.displayName||c.name||"",p.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tn(p);case 8:return p===we?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function qt(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function yn(c){var p=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function zn(c){var p=yn(c)?"checked":"value",w=Object.getOwnPropertyDescriptor(c.constructor.prototype,p),k=""+c[p];if(!c.hasOwnProperty(p)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var j=w.get,K=w.set;return Object.defineProperty(c,p,{configurable:!0,get:function(){return j.call(this)},set:function(ae){k=""+ae,K.call(this,ae)}}),Object.defineProperty(c,p,{enumerable:w.enumerable}),{getValue:function(){return k},setValue:function(ae){k=""+ae},stopTracking:function(){c._valueTracker=null,delete c[p]}}}}function On(c){c._valueTracker||(c._valueTracker=zn(c))}function Gr(c){if(!c)return!1;var p=c._valueTracker;if(!p)return!0;var w=p.getValue(),k="";return c&&(k=yn(c)?c.checked?"true":"false":c.value),c=k,c!==w?(p.setValue(c),!0):!1}function ee(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function ft(c,p){var w=p.checked;return he({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??c._wrapperState.initialChecked})}function pt(c,p){var w=p.defaultValue==null?"":p.defaultValue,k=p.checked!=null?p.checked:p.defaultChecked;w=qt(p.value!=null?p.value:w),c._wrapperState={initialChecked:k,initialValue:w,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function Ce(c,p){p=p.checked,p!=null&&ie(c,"checked",p,!1)}function xe(c,p){Ce(c,p);var w=qt(p.value),k=p.type;if(w!=null)k==="number"?(w===0&&c.value===""||c.value!=w)&&(c.value=""+w):c.value!==""+w&&(c.value=""+w);else if(k==="submit"||k==="reset"){c.removeAttribute("value");return}p.hasOwnProperty("value")?Ct(c,p.type,w):p.hasOwnProperty("defaultValue")&&Ct(c,p.type,qt(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(c.defaultChecked=!!p.defaultChecked)}function $e(c,p,w){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var k=p.type;if(!(k!=="submit"&&k!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+c._wrapperState.initialValue,w||p===c.value||(c.value=p),c.defaultValue=p}w=c.name,w!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,w!==""&&(c.name=w)}function Ct(c,p,w){(p!=="number"||ee(c.ownerDocument)!==c)&&(w==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+w&&(c.defaultValue=""+w))}var kt=Array.isArray;function tt(c,p,w,k){if(c=c.options,p){p={};for(var j=0;j<w.length;j++)p["$"+w[j]]=!0;for(w=0;w<c.length;w++)j=p.hasOwnProperty("$"+c[w].value),c[w].selected!==j&&(c[w].selected=j),j&&k&&(c[w].defaultSelected=!0)}else{for(w=""+qt(w),p=null,j=0;j<c.length;j++){if(c[j].value===w){c[j].selected=!0,k&&(c[j].defaultSelected=!0);return}p!==null||c[j].disabled||(p=c[j])}p!==null&&(p.selected=!0)}}function Ft(c,p){if(p.dangerouslySetInnerHTML!=null)throw Error(d(91));return he({},p,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Tt(c,p){var w=p.value;if(w==null){if(w=p.children,p=p.defaultValue,w!=null){if(p!=null)throw Error(d(92));if(kt(w)){if(1<w.length)throw Error(d(93));w=w[0]}p=w}p==null&&(p=""),w=p}c._wrapperState={initialValue:qt(w)}}function At(c,p){var w=qt(p.value),k=qt(p.defaultValue);w!=null&&(w=""+w,w!==c.value&&(c.value=w),p.defaultValue==null&&c.defaultValue!==w&&(c.defaultValue=w)),k!=null&&(c.defaultValue=""+k)}function In(c){var p=c.textContent;p===c._wrapperState.initialValue&&p!==""&&p!==null&&(c.value=p)}function Or(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function er(c,p){return c==null||c==="http://www.w3.org/1999/xhtml"?Or(p):c==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var wo,Bf=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,w,k,j){MSApp.execUnsafeLocalFunction(function(){return c(p,w,k,j)})}:c}(function(c,p){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=p;else{for(wo=wo||document.createElement("div"),wo.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=wo.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;p.firstChild;)c.appendChild(p.firstChild)}});function zo(c,p){if(p){var w=c.firstChild;if(w&&w===c.lastChild&&w.nodeType===3){w.nodeValue=p;return}}c.textContent=p}var rc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zi=["Webkit","ms","Moz","O"];Object.keys(rc).forEach(function(c){zi.forEach(function(p){p=p+c.charAt(0).toUpperCase()+c.substring(1),rc[p]=rc[c]})});function Bv(c,p,w){return p==null||typeof p=="boolean"||p===""?"":w||typeof p!="number"||p===0||rc.hasOwnProperty(c)&&rc[c]?(""+p).trim():p+"px"}function y_(c,p){c=c.style;for(var w in p)if(p.hasOwnProperty(w)){var k=w.indexOf("--")===0,j=Bv(w,p[w],k);w==="float"&&(w="cssFloat"),k?c.setProperty(w,j):c[w]=j}}var ic=he({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function b_(c,p){if(p){if(ic[c]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(d(137,c));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(d(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(d(61))}if(p.style!=null&&typeof p.style!="object")throw Error(d(62))}}function AC(c,p){if(c.indexOf("-")===-1)return typeof p.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var IC=null;function RC(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var __=null,tu=null,sc=null;function ime(c){if(c=JC(c)){if(typeof __!="function")throw Error(d(280));var p=c.stateNode;p&&(p=QO(p),__(c.stateNode,c.type,p))}}function sme(c){tu?sc?sc.push(c):sc=[c]:tu=c}function ome(){if(tu){var c=tu,p=sc;if(sc=tu=null,ime(c),p)for(c=0;c<p.length;c++)ime(p[c])}}function ame(c,p){return c(p)}function lme(){}var e8=!1;function ume(c,p,w){if(e8)return c(p,w);e8=!0;try{return ame(c,p,w)}finally{e8=!1,(tu!==null||sc!==null)&&(lme(),ome())}}function DC(c,p){var w=c.stateNode;if(w===null)return null;var k=QO(w);if(k===null)return null;w=k[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(c=c.type,k=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!k;break e;default:c=!1}if(c)return null;if(w&&typeof w!="function")throw Error(d(231,p,typeof w));return w}var t8=!1;if(S)try{w_={},Object.defineProperty(w_,"passive",{get:function(){t8=!0}}),window.addEventListener("test",w_,w_),window.removeEventListener("test",w_,w_)}catch{t8=!1}var w_;function bLe(c,p,w,k,j,K,ae,ke,Ue){var vt=Array.prototype.slice.call(arguments,3);try{p.apply(w,vt)}catch(Ut){this.onError(Ut)}}var OC=!1,TO=null,MO=!1,n8=null,_Le={onError:function(c){OC=!0,TO=c}};function wLe(c,p,w,k,j,K,ae,ke,Ue){OC=!1,TO=null,bLe.apply(_Le,arguments)}function xLe(c,p,w,k,j,K,ae,ke,Ue){if(wLe.apply(this,arguments),OC){if(OC){var vt=TO;OC=!1,TO=null}else throw Error(d(198));MO||(MO=!0,n8=vt)}}function Uv(c){var p=c,w=c;if(c.alternate)for(;p.return;)p=p.return;else{c=p;do p=c,p.flags&4098&&(w=p.return),c=p.return;while(c)}return p.tag===3?w:null}function cme(c){if(c.tag===13){var p=c.memoizedState;if(p===null&&(c=c.alternate,c!==null&&(p=c.memoizedState)),p!==null)return p.dehydrated}return null}function dme(c){if(Uv(c)!==c)throw Error(d(188))}function SLe(c){var p=c.alternate;if(!p){if(p=Uv(c),p===null)throw Error(d(188));return p!==c?null:c}for(var w=c,k=p;;){var j=w.return;if(j===null)break;var K=j.alternate;if(K===null){if(k=j.return,k!==null){w=k;continue}break}if(j.child===K.child){for(K=j.child;K;){if(K===w)return dme(j),c;if(K===k)return dme(j),p;K=K.sibling}throw Error(d(188))}if(w.return!==k.return)w=j,k=K;else{for(var ae=!1,ke=j.child;ke;){if(ke===w){ae=!0,w=j,k=K;break}if(ke===k){ae=!0,k=j,w=K;break}ke=ke.sibling}if(!ae){for(ke=K.child;ke;){if(ke===w){ae=!0,w=K,k=j;break}if(ke===k){ae=!0,k=K,w=j;break}ke=ke.sibling}if(!ae)throw Error(d(189))}}if(w.alternate!==k)throw Error(d(190))}if(w.tag!==3)throw Error(d(188));return w.stateNode.current===w?c:p}function hme(c){return c=SLe(c),c!==null?pme(c):null}function pme(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var p=pme(c);if(p!==null)return p;c=c.sibling}return null}var fme=l.unstable_scheduleCallback,mme=l.unstable_cancelCallback,ELe=l.unstable_shouldYield,CLe=l.unstable_requestPaint,ms=l.unstable_now,PLe=l.unstable_getCurrentPriorityLevel,r8=l.unstable_ImmediatePriority,gme=l.unstable_UserBlockingPriority,kO=l.unstable_NormalPriority,TLe=l.unstable_LowPriority,vme=l.unstable_IdlePriority,AO=null,gd=null;function MLe(c){if(gd&&typeof gd.onCommitFiberRoot=="function")try{gd.onCommitFiberRoot(AO,c,void 0,(c.current.flags&128)===128)}catch{}}var oc=Math.clz32?Math.clz32:ILe,kLe=Math.log,ALe=Math.LN2;function ILe(c){return c>>>=0,c===0?32:31-(kLe(c)/ALe|0)|0}var IO=64,RO=4194304;function LC(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function DO(c,p){var w=c.pendingLanes;if(w===0)return 0;var k=0,j=c.suspendedLanes,K=c.pingedLanes,ae=w&268435455;if(ae!==0){var ke=ae&~j;ke!==0?k=LC(ke):(K&=ae,K!==0&&(k=LC(K)))}else ae=w&~j,ae!==0?k=LC(ae):K!==0&&(k=LC(K));if(k===0)return 0;if(p!==0&&p!==k&&!(p&j)&&(j=k&-k,K=p&-p,j>=K||j===16&&(K&4194240)!==0))return p;if(k&4&&(k|=w&16),p=c.entangledLanes,p!==0)for(c=c.entanglements,p&=k;0<p;)w=31-oc(p),j=1<<w,k|=c[w],p&=~j;return k}function RLe(c,p){switch(c){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DLe(c,p){for(var w=c.suspendedLanes,k=c.pingedLanes,j=c.expirationTimes,K=c.pendingLanes;0<K;){var ae=31-oc(K),ke=1<<ae,Ue=j[ae];Ue===-1?(!(ke&w)||ke&k)&&(j[ae]=RLe(ke,p)):Ue<=p&&(c.expiredLanes|=ke),K&=~ke}}function i8(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function yme(){var c=IO;return IO<<=1,!(IO&4194240)&&(IO=64),c}function s8(c){for(var p=[],w=0;31>w;w++)p.push(c);return p}function NC(c,p,w){c.pendingLanes|=p,p!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,p=31-oc(p),c[p]=w}function OLe(c,p){var w=c.pendingLanes&~p;c.pendingLanes=p,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=p,c.mutableReadLanes&=p,c.entangledLanes&=p,p=c.entanglements;var k=c.eventTimes;for(c=c.expirationTimes;0<w;){var j=31-oc(w),K=1<<j;p[j]=0,k[j]=-1,c[j]=-1,w&=~K}}function o8(c,p){var w=c.entangledLanes|=p;for(c=c.entanglements;w;){var k=31-oc(w),j=1<<k;j&p|c[k]&p&&(c[k]|=p),w&=~j}}var ti=0;function bme(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var _me,a8,wme,xme,Sme,l8=!1,OO=[],Uf=null,zf=null,Vf=null,FC=new Map,BC=new Map,jf=[],LLe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Eme(c,p){switch(c){case"focusin":case"focusout":Uf=null;break;case"dragenter":case"dragleave":zf=null;break;case"mouseover":case"mouseout":Vf=null;break;case"pointerover":case"pointerout":FC.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":BC.delete(p.pointerId)}}function UC(c,p,w,k,j,K){return c===null||c.nativeEvent!==K?(c={blockedOn:p,domEventName:w,eventSystemFlags:k,nativeEvent:K,targetContainers:[j]},p!==null&&(p=JC(p),p!==null&&a8(p)),c):(c.eventSystemFlags|=k,p=c.targetContainers,j!==null&&p.indexOf(j)===-1&&p.push(j),c)}function NLe(c,p,w,k,j){switch(p){case"focusin":return Uf=UC(Uf,c,p,w,k,j),!0;case"dragenter":return zf=UC(zf,c,p,w,k,j),!0;case"mouseover":return Vf=UC(Vf,c,p,w,k,j),!0;case"pointerover":var K=j.pointerId;return FC.set(K,UC(FC.get(K)||null,c,p,w,k,j)),!0;case"gotpointercapture":return K=j.pointerId,BC.set(K,UC(BC.get(K)||null,c,p,w,k,j)),!0}return!1}function Cme(c){var p=zv(c.target);if(p!==null){var w=Uv(p);if(w!==null){if(p=w.tag,p===13){if(p=cme(w),p!==null){c.blockedOn=p,Sme(c.priority,function(){wme(w)});return}}else if(p===3&&w.stateNode.current.memoizedState.isDehydrated){c.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}c.blockedOn=null}function LO(c){if(c.blockedOn!==null)return!1;for(var p=c.targetContainers;0<p.length;){var w=c8(c.domEventName,c.eventSystemFlags,p[0],c.nativeEvent);if(w===null){w=c.nativeEvent;var k=new w.constructor(w.type,w);IC=k,w.target.dispatchEvent(k),IC=null}else return p=JC(w),p!==null&&a8(p),c.blockedOn=w,!1;p.shift()}return!0}function Pme(c,p,w){LO(c)&&w.delete(p)}function FLe(){l8=!1,Uf!==null&&LO(Uf)&&(Uf=null),zf!==null&&LO(zf)&&(zf=null),Vf!==null&&LO(Vf)&&(Vf=null),FC.forEach(Pme),BC.forEach(Pme)}function zC(c,p){c.blockedOn===p&&(c.blockedOn=null,l8||(l8=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,FLe)))}function VC(c){function p(j){return zC(j,c)}if(0<OO.length){zC(OO[0],c);for(var w=1;w<OO.length;w++){var k=OO[w];k.blockedOn===c&&(k.blockedOn=null)}}for(Uf!==null&&zC(Uf,c),zf!==null&&zC(zf,c),Vf!==null&&zC(Vf,c),FC.forEach(p),BC.forEach(p),w=0;w<jf.length;w++)k=jf[w],k.blockedOn===c&&(k.blockedOn=null);for(;0<jf.length&&(w=jf[0],w.blockedOn===null);)Cme(w),w.blockedOn===null&&jf.shift()}var x_=re.ReactCurrentBatchConfig,NO=!0;function BLe(c,p,w,k){var j=ti,K=x_.transition;x_.transition=null;try{ti=1,u8(c,p,w,k)}finally{ti=j,x_.transition=K}}function ULe(c,p,w,k){var j=ti,K=x_.transition;x_.transition=null;try{ti=4,u8(c,p,w,k)}finally{ti=j,x_.transition=K}}function u8(c,p,w,k){if(NO){var j=c8(c,p,w,k);if(j===null)C8(c,p,k,FO,w),Eme(c,k);else if(NLe(j,c,p,w,k))k.stopPropagation();else if(Eme(c,k),p&4&&-1<LLe.indexOf(c)){for(;j!==null;){var K=JC(j);if(K!==null&&_me(K),K=c8(c,p,w,k),K===null&&C8(c,p,k,FO,w),K===j)break;j=K}j!==null&&k.stopPropagation()}else C8(c,p,k,null,w)}}var FO=null;function c8(c,p,w,k){if(FO=null,c=RC(k),c=zv(c),c!==null)if(p=Uv(c),p===null)c=null;else if(w=p.tag,w===13){if(c=cme(p),c!==null)return c;c=null}else if(w===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;c=null}else p!==c&&(c=null);return FO=c,null}function Tme(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PLe()){case r8:return 1;case gme:return 4;case kO:case TLe:return 16;case vme:return 536870912;default:return 16}default:return 16}}var Hf=null,d8=null,BO=null;function Mme(){if(BO)return BO;var c,p=d8,w=p.length,k,j="value"in Hf?Hf.value:Hf.textContent,K=j.length;for(c=0;c<w&&p[c]===j[c];c++);var ae=w-c;for(k=1;k<=ae&&p[w-k]===j[K-k];k++);return BO=j.slice(c,1<k?1-k:void 0)}function UO(c){var p=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&p===13&&(c=13)):c=p,c===10&&(c=13),32<=c||c===13?c:0}function zO(){return!0}function kme(){return!1}function pl(c){function p(w,k,j,K,ae){this._reactName=w,this._targetInst=j,this.type=k,this.nativeEvent=K,this.target=ae,this.currentTarget=null;for(var ke in c)c.hasOwnProperty(ke)&&(w=c[ke],this[ke]=w?w(K):K[ke]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?zO:kme,this.isPropagationStopped=kme,this}return he(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=zO)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=zO)},persist:function(){},isPersistent:zO}),p}var S_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},h8=pl(S_),jC=he({},S_,{view:0,detail:0}),zLe=pl(jC),p8,f8,HC,VO=he({},jC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:g8,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==HC&&(HC&&c.type==="mousemove"?(p8=c.screenX-HC.screenX,f8=c.screenY-HC.screenY):f8=p8=0,HC=c),p8)},movementY:function(c){return"movementY"in c?c.movementY:f8}}),Ame=pl(VO),VLe=he({},VO,{dataTransfer:0}),jLe=pl(VLe),HLe=he({},jC,{relatedTarget:0}),m8=pl(HLe),GLe=he({},S_,{animationName:0,elapsedTime:0,pseudoElement:0}),WLe=pl(GLe),$Le=he({},S_,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),KLe=pl($Le),XLe=he({},S_,{data:0}),Ime=pl(XLe),qLe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YLe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZLe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QLe(c){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(c):(c=ZLe[c])?!!p[c]:!1}function g8(){return QLe}var JLe=he({},jC,{key:function(c){if(c.key){var p=qLe[c.key]||c.key;if(p!=="Unidentified")return p}return c.type==="keypress"?(c=UO(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?YLe[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:g8,charCode:function(c){return c.type==="keypress"?UO(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?UO(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),eNe=pl(JLe),tNe=he({},VO,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rme=pl(tNe),nNe=he({},jC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:g8}),rNe=pl(nNe),iNe=he({},S_,{propertyName:0,elapsedTime:0,pseudoElement:0}),sNe=pl(iNe),oNe=he({},VO,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),aNe=pl(oNe),lNe=[9,13,27,32],v8=S&&"CompositionEvent"in window,GC=null;S&&"documentMode"in document&&(GC=document.documentMode);var uNe=S&&"TextEvent"in window&&!GC,Dme=S&&(!v8||GC&&8<GC&&11>=GC),Ome=String.fromCharCode(32),Lme=!1;function Nme(c,p){switch(c){case"keyup":return lNe.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fme(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var E_=!1;function cNe(c,p){switch(c){case"compositionend":return Fme(p);case"keypress":return p.which!==32?null:(Lme=!0,Ome);case"textInput":return c=p.data,c===Ome&&Lme?null:c;default:return null}}function dNe(c,p){if(E_)return c==="compositionend"||!v8&&Nme(c,p)?(c=Mme(),BO=d8=Hf=null,E_=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Dme&&p.locale!=="ko"?null:p.data;default:return null}}var hNe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bme(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p==="input"?!!hNe[c.type]:p==="textarea"}function Ume(c,p,w,k){sme(k),p=qO(p,"onChange"),0<p.length&&(w=new h8("onChange","change",null,w,k),c.push({event:w,listeners:p}))}var WC=null,$C=null;function pNe(c){ige(c,0)}function jO(c){var p=k_(c);if(Gr(p))return c}function fNe(c,p){if(c==="change")return p}var zme=!1;S&&(S?(HO="oninput"in document,HO||(b8=document.createElement("div"),b8.setAttribute("oninput","return;"),HO=typeof b8.oninput=="function"),y8=HO):y8=!1,zme=y8&&(!document.documentMode||9<document.documentMode));var y8,HO,b8;function Vme(){WC&&(WC.detachEvent("onpropertychange",jme),$C=WC=null)}function jme(c){if(c.propertyName==="value"&&jO($C)){var p=[];Ume(p,$C,c,RC(c)),ume(pNe,p)}}function mNe(c,p,w){c==="focusin"?(Vme(),WC=p,$C=w,WC.attachEvent("onpropertychange",jme)):c==="focusout"&&Vme()}function gNe(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return jO($C)}function vNe(c,p){if(c==="click")return jO(p)}function yNe(c,p){if(c==="input"||c==="change")return jO(p)}function bNe(c,p){return c===p&&(c!==0||1/c===1/p)||c!==c&&p!==p}var ac=typeof Object.is=="function"?Object.is:bNe;function KC(c,p){if(ac(c,p))return!0;if(typeof c!="object"||c===null||typeof p!="object"||p===null)return!1;var w=Object.keys(c),k=Object.keys(p);if(w.length!==k.length)return!1;for(k=0;k<w.length;k++){var j=w[k];if(!C.call(p,j)||!ac(c[j],p[j]))return!1}return!0}function Hme(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Gme(c,p){var w=Hme(c);c=0;for(var k;w;){if(w.nodeType===3){if(k=c+w.textContent.length,c<=p&&k>=p)return{node:w,offset:p-c};c=k}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Hme(w)}}function Wme(c,p){return c&&p?c===p?!0:c&&c.nodeType===3?!1:p&&p.nodeType===3?Wme(c,p.parentNode):"contains"in c?c.contains(p):c.compareDocumentPosition?!!(c.compareDocumentPosition(p)&16):!1:!1}function $me(){for(var c=window,p=ee();p instanceof c.HTMLIFrameElement;){try{var w=typeof p.contentWindow.location.href=="string"}catch{w=!1}if(w)c=p.contentWindow;else break;p=ee(c.document)}return p}function _8(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p&&(p==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||p==="textarea"||c.contentEditable==="true")}function _Ne(c){var p=$me(),w=c.focusedElem,k=c.selectionRange;if(p!==w&&w&&w.ownerDocument&&Wme(w.ownerDocument.documentElement,w)){if(k!==null&&_8(w)){if(p=k.start,c=k.end,c===void 0&&(c=p),"selectionStart"in w)w.selectionStart=p,w.selectionEnd=Math.min(c,w.value.length);else if(c=(p=w.ownerDocument||document)&&p.defaultView||window,c.getSelection){c=c.getSelection();var j=w.textContent.length,K=Math.min(k.start,j);k=k.end===void 0?K:Math.min(k.end,j),!c.extend&&K>k&&(j=k,k=K,K=j),j=Gme(w,K);var ae=Gme(w,k);j&&ae&&(c.rangeCount!==1||c.anchorNode!==j.node||c.anchorOffset!==j.offset||c.focusNode!==ae.node||c.focusOffset!==ae.offset)&&(p=p.createRange(),p.setStart(j.node,j.offset),c.removeAllRanges(),K>k?(c.addRange(p),c.extend(ae.node,ae.offset)):(p.setEnd(ae.node,ae.offset),c.addRange(p)))}}for(p=[],c=w;c=c.parentNode;)c.nodeType===1&&p.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<p.length;w++)c=p[w],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var wNe=S&&"documentMode"in document&&11>=document.documentMode,C_=null,w8=null,XC=null,x8=!1;function Kme(c,p,w){var k=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;x8||C_==null||C_!==ee(k)||(k=C_,"selectionStart"in k&&_8(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),XC&&KC(XC,k)||(XC=k,k=qO(w8,"onSelect"),0<k.length&&(p=new h8("onSelect","select",null,p,w),c.push({event:p,listeners:k}),p.target=C_)))}function GO(c,p){var w={};return w[c.toLowerCase()]=p.toLowerCase(),w["Webkit"+c]="webkit"+p,w["Moz"+c]="moz"+p,w}var P_={animationend:GO("Animation","AnimationEnd"),animationiteration:GO("Animation","AnimationIteration"),animationstart:GO("Animation","AnimationStart"),transitionend:GO("Transition","TransitionEnd")},S8={},Xme={};S&&(Xme=document.createElement("div").style,"AnimationEvent"in window||(delete P_.animationend.animation,delete P_.animationiteration.animation,delete P_.animationstart.animation),"TransitionEvent"in window||delete P_.transitionend.transition);function WO(c){if(S8[c])return S8[c];if(!P_[c])return c;var p=P_[c],w;for(w in p)if(p.hasOwnProperty(w)&&w in Xme)return S8[c]=p[w];return c}var qme=WO("animationend"),Yme=WO("animationiteration"),Zme=WO("animationstart"),Qme=WO("transitionend"),Jme=new Map,ege="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gf(c,p){Jme.set(c,p),b(p,[c])}for(KO=0;KO<ege.length;KO++)$O=ege[KO],tge=$O.toLowerCase(),nge=$O[0].toUpperCase()+$O.slice(1),Gf(tge,"on"+nge);var $O,tge,nge,KO;Gf(qme,"onAnimationEnd"),Gf(Yme,"onAnimationIteration"),Gf(Zme,"onAnimationStart"),Gf("dblclick","onDoubleClick"),Gf("focusin","onFocus"),Gf("focusout","onBlur"),Gf(Qme,"onTransitionEnd"),_("onMouseEnter",["mouseout","mouseover"]),_("onMouseLeave",["mouseout","mouseover"]),_("onPointerEnter",["pointerout","pointerover"]),_("onPointerLeave",["pointerout","pointerover"]),b("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),b("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),b("onBeforeInput",["compositionend","keypress","textInput","paste"]),b("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xNe=new Set("cancel close invalid load scroll toggle".split(" ").concat(qC));function rge(c,p,w){var k=c.type||"unknown-event";c.currentTarget=w,xLe(k,p,void 0,c),c.currentTarget=null}function ige(c,p){p=(p&4)!==0;for(var w=0;w<c.length;w++){var k=c[w],j=k.event;k=k.listeners;e:{var K=void 0;if(p)for(var ae=k.length-1;0<=ae;ae--){var ke=k[ae],Ue=ke.instance,vt=ke.currentTarget;if(ke=ke.listener,Ue!==K&&j.isPropagationStopped())break e;rge(j,ke,vt),K=Ue}else for(ae=0;ae<k.length;ae++){if(ke=k[ae],Ue=ke.instance,vt=ke.currentTarget,ke=ke.listener,Ue!==K&&j.isPropagationStopped())break e;rge(j,ke,vt),K=Ue}}}if(MO)throw c=n8,MO=!1,n8=null,c}function Ei(c,p){var w=p[I8];w===void 0&&(w=p[I8]=new Set);var k=c+"__bubble";w.has(k)||(sge(p,c,2,!1),w.add(k))}function E8(c,p,w){var k=0;p&&(k|=4),sge(w,c,k,p)}var XO="_reactListening"+Math.random().toString(36).slice(2);function YC(c){if(!c[XO]){c[XO]=!0,f.forEach(function(w){w!=="selectionchange"&&(xNe.has(w)||E8(w,!1,c),E8(w,!0,c))});var p=c.nodeType===9?c:c.ownerDocument;p===null||p[XO]||(p[XO]=!0,E8("selectionchange",!1,p))}}function sge(c,p,w,k){switch(Tme(p)){case 1:var j=BLe;break;case 4:j=ULe;break;default:j=u8}w=j.bind(null,p,w,c),j=void 0,!t8||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(j=!0),k?j!==void 0?c.addEventListener(p,w,{capture:!0,passive:j}):c.addEventListener(p,w,!0):j!==void 0?c.addEventListener(p,w,{passive:j}):c.addEventListener(p,w,!1)}function C8(c,p,w,k,j){var K=k;if(!(p&1)&&!(p&2)&&k!==null)e:for(;;){if(k===null)return;var ae=k.tag;if(ae===3||ae===4){var ke=k.stateNode.containerInfo;if(ke===j||ke.nodeType===8&&ke.parentNode===j)break;if(ae===4)for(ae=k.return;ae!==null;){var Ue=ae.tag;if((Ue===3||Ue===4)&&(Ue=ae.stateNode.containerInfo,Ue===j||Ue.nodeType===8&&Ue.parentNode===j))return;ae=ae.return}for(;ke!==null;){if(ae=zv(ke),ae===null)return;if(Ue=ae.tag,Ue===5||Ue===6){k=K=ae;continue e}ke=ke.parentNode}}k=k.return}ume(function(){var vt=K,Ut=RC(w),Ht=[];e:{var Bt=Jme.get(c);if(Bt!==void 0){var on=h8,bn=c;switch(c){case"keypress":if(UO(w)===0)break e;case"keydown":case"keyup":on=eNe;break;case"focusin":bn="focus",on=m8;break;case"focusout":bn="blur",on=m8;break;case"beforeblur":case"afterblur":on=m8;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":on=Ame;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":on=jLe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":on=rNe;break;case qme:case Yme:case Zme:on=WLe;break;case Qme:on=sNe;break;case"scroll":on=zLe;break;case"wheel":on=aNe;break;case"copy":case"cut":case"paste":on=KLe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":on=Rme}var Cn=(p&4)!==0,gs=!Cn&&c==="scroll",nt=Cn?Bt!==null?Bt+"Capture":null:Bt;Cn=[];for(var He=vt,at;He!==null;){at=He;var Wt=at.stateNode;if(at.tag===5&&Wt!==null&&(at=Wt,nt!==null&&(Wt=DC(He,nt),Wt!=null&&Cn.push(ZC(He,Wt,at)))),gs)break;He=He.return}0<Cn.length&&(Bt=new on(Bt,bn,null,w,Ut),Ht.push({event:Bt,listeners:Cn}))}}if(!(p&7)){e:{if(Bt=c==="mouseover"||c==="pointerover",on=c==="mouseout"||c==="pointerout",Bt&&w!==IC&&(bn=w.relatedTarget||w.fromElement)&&(zv(bn)||bn[Oh]))break e;if((on||Bt)&&(Bt=Ut.window===Ut?Ut:(Bt=Ut.ownerDocument)?Bt.defaultView||Bt.parentWindow:window,on?(bn=w.relatedTarget||w.toElement,on=vt,bn=bn?zv(bn):null,bn!==null&&(gs=Uv(bn),bn!==gs||bn.tag!==5&&bn.tag!==6)&&(bn=null)):(on=null,bn=vt),on!==bn)){if(Cn=Ame,Wt="onMouseLeave",nt="onMouseEnter",He="mouse",(c==="pointerout"||c==="pointerover")&&(Cn=Rme,Wt="onPointerLeave",nt="onPointerEnter",He="pointer"),gs=on==null?Bt:k_(on),at=bn==null?Bt:k_(bn),Bt=new Cn(Wt,He+"leave",on,w,Ut),Bt.target=gs,Bt.relatedTarget=at,Wt=null,zv(Ut)===vt&&(Cn=new Cn(nt,He+"enter",bn,w,Ut),Cn.target=at,Cn.relatedTarget=gs,Wt=Cn),gs=Wt,on&&bn)t:{for(Cn=on,nt=bn,He=0,at=Cn;at;at=T_(at))He++;for(at=0,Wt=nt;Wt;Wt=T_(Wt))at++;for(;0<He-at;)Cn=T_(Cn),He--;for(;0<at-He;)nt=T_(nt),at--;for(;He--;){if(Cn===nt||nt!==null&&Cn===nt.alternate)break t;Cn=T_(Cn),nt=T_(nt)}Cn=null}else Cn=null;on!==null&&oge(Ht,Bt,on,Cn,!1),bn!==null&&gs!==null&&oge(Ht,gs,bn,Cn,!0)}}e:{if(Bt=vt?k_(vt):window,on=Bt.nodeName&&Bt.nodeName.toLowerCase(),on==="select"||on==="input"&&Bt.type==="file")var kn=fNe;else if(Bme(Bt))if(zme)kn=yNe;else{kn=gNe;var Hn=mNe}else(on=Bt.nodeName)&&on.toLowerCase()==="input"&&(Bt.type==="checkbox"||Bt.type==="radio")&&(kn=vNe);if(kn&&(kn=kn(c,vt))){Ume(Ht,kn,w,Ut);break e}Hn&&Hn(c,Bt,vt),c==="focusout"&&(Hn=Bt._wrapperState)&&Hn.controlled&&Bt.type==="number"&&Ct(Bt,"number",Bt.value)}switch(Hn=vt?k_(vt):window,c){case"focusin":(Bme(Hn)||Hn.contentEditable==="true")&&(C_=Hn,w8=vt,XC=null);break;case"focusout":XC=w8=C_=null;break;case"mousedown":x8=!0;break;case"contextmenu":case"mouseup":case"dragend":x8=!1,Kme(Ht,w,Ut);break;case"selectionchange":if(wNe)break;case"keydown":case"keyup":Kme(Ht,w,Ut)}var Gn;if(v8)e:{switch(c){case"compositionstart":var tr="onCompositionStart";break e;case"compositionend":tr="onCompositionEnd";break e;case"compositionupdate":tr="onCompositionUpdate";break e}tr=void 0}else E_?Nme(c,w)&&(tr="onCompositionEnd"):c==="keydown"&&w.keyCode===229&&(tr="onCompositionStart");tr&&(Dme&&w.locale!=="ko"&&(E_||tr!=="onCompositionStart"?tr==="onCompositionEnd"&&E_&&(Gn=Mme()):(Hf=Ut,d8="value"in Hf?Hf.value:Hf.textContent,E_=!0)),Hn=qO(vt,tr),0<Hn.length&&(tr=new Ime(tr,c,null,w,Ut),Ht.push({event:tr,listeners:Hn}),Gn?tr.data=Gn:(Gn=Fme(w),Gn!==null&&(tr.data=Gn)))),(Gn=uNe?cNe(c,w):dNe(c,w))&&(vt=qO(vt,"onBeforeInput"),0<vt.length&&(Ut=new Ime("onBeforeInput","beforeinput",null,w,Ut),Ht.push({event:Ut,listeners:vt}),Ut.data=Gn))}ige(Ht,p)})}function ZC(c,p,w){return{instance:c,listener:p,currentTarget:w}}function qO(c,p){for(var w=p+"Capture",k=[];c!==null;){var j=c,K=j.stateNode;j.tag===5&&K!==null&&(j=K,K=DC(c,w),K!=null&&k.unshift(ZC(c,K,j)),K=DC(c,p),K!=null&&k.push(ZC(c,K,j))),c=c.return}return k}function T_(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function oge(c,p,w,k,j){for(var K=p._reactName,ae=[];w!==null&&w!==k;){var ke=w,Ue=ke.alternate,vt=ke.stateNode;if(Ue!==null&&Ue===k)break;ke.tag===5&&vt!==null&&(ke=vt,j?(Ue=DC(w,K),Ue!=null&&ae.unshift(ZC(w,Ue,ke))):j||(Ue=DC(w,K),Ue!=null&&ae.push(ZC(w,Ue,ke)))),w=w.return}ae.length!==0&&c.push({event:p,listeners:ae})}var SNe=/\r\n?/g,ENe=/\u0000|\uFFFD/g;function age(c){return(typeof c=="string"?c:""+c).replace(SNe,`
`).replace(ENe,"")}function YO(c,p,w){if(p=age(p),age(c)!==p&&w)throw Error(d(425))}function ZO(){}var P8=null,T8=null;function M8(c,p){return c==="textarea"||c==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var k8=typeof setTimeout=="function"?setTimeout:void 0,CNe=typeof clearTimeout=="function"?clearTimeout:void 0,lge=typeof Promise=="function"?Promise:void 0,PNe=typeof queueMicrotask=="function"?queueMicrotask:typeof lge<"u"?function(c){return lge.resolve(null).then(c).catch(TNe)}:k8;function TNe(c){setTimeout(function(){throw c})}function A8(c,p){var w=p,k=0;do{var j=w.nextSibling;if(c.removeChild(w),j&&j.nodeType===8)if(w=j.data,w==="/$"){if(k===0){c.removeChild(j),VC(p);return}k--}else w!=="$"&&w!=="$?"&&w!=="$!"||k++;w=j}while(w);VC(p)}function Wf(c){for(;c!=null;c=c.nextSibling){var p=c.nodeType;if(p===1||p===3)break;if(p===8){if(p=c.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return c}function uge(c){c=c.previousSibling;for(var p=0;c;){if(c.nodeType===8){var w=c.data;if(w==="$"||w==="$!"||w==="$?"){if(p===0)return c;p--}else w==="/$"&&p++}c=c.previousSibling}return null}var M_=Math.random().toString(36).slice(2),vd="__reactFiber$"+M_,QC="__reactProps$"+M_,Oh="__reactContainer$"+M_,I8="__reactEvents$"+M_,MNe="__reactListeners$"+M_,kNe="__reactHandles$"+M_;function zv(c){var p=c[vd];if(p)return p;for(var w=c.parentNode;w;){if(p=w[Oh]||w[vd]){if(w=p.alternate,p.child!==null||w!==null&&w.child!==null)for(c=uge(c);c!==null;){if(w=c[vd])return w;c=uge(c)}return p}c=w,w=c.parentNode}return null}function JC(c){return c=c[vd]||c[Oh],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function k_(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(d(33))}function QO(c){return c[QC]||null}var R8=[],A_=-1;function $f(c){return{current:c}}function Ci(c){0>A_||(c.current=R8[A_],R8[A_]=null,A_--)}function mi(c,p){A_++,R8[A_]=c.current,c.current=p}var Kf={},Vo=$f(Kf),Ga=$f(!1),Vv=Kf;function I_(c,p){var w=c.type.contextTypes;if(!w)return Kf;var k=c.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===p)return k.__reactInternalMemoizedMaskedChildContext;var j={},K;for(K in w)j[K]=p[K];return k&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=p,c.__reactInternalMemoizedMaskedChildContext=j),j}function Wa(c){return c=c.childContextTypes,c!=null}function JO(){Ci(Ga),Ci(Vo)}function cge(c,p,w){if(Vo.current!==Kf)throw Error(d(168));mi(Vo,p),mi(Ga,w)}function dge(c,p,w){var k=c.stateNode;if(p=p.childContextTypes,typeof k.getChildContext!="function")return w;k=k.getChildContext();for(var j in k)if(!(j in p))throw Error(d(108,xt(c)||"Unknown",j));return he({},w,k)}function e3(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Kf,Vv=Vo.current,mi(Vo,c),mi(Ga,Ga.current),!0}function hge(c,p,w){var k=c.stateNode;if(!k)throw Error(d(169));w?(c=dge(c,p,Vv),k.__reactInternalMemoizedMergedChildContext=c,Ci(Ga),Ci(Vo),mi(Vo,c)):Ci(Ga),mi(Ga,w)}var Lh=null,t3=!1,D8=!1;function pge(c){Lh===null?Lh=[c]:Lh.push(c)}function ANe(c){t3=!0,pge(c)}function Xf(){if(!D8&&Lh!==null){D8=!0;var c=0,p=ti;try{var w=Lh;for(ti=1;c<w.length;c++){var k=w[c];do k=k(!0);while(k!==null)}Lh=null,t3=!1}catch(j){throw Lh!==null&&(Lh=Lh.slice(c+1)),fme(r8,Xf),j}finally{ti=p,D8=!1}}return null}var R_=[],D_=0,n3=null,r3=0,nu=[],ru=0,jv=null,Nh=1,Fh="";function Hv(c,p){R_[D_++]=r3,R_[D_++]=n3,n3=c,r3=p}function fge(c,p,w){nu[ru++]=Nh,nu[ru++]=Fh,nu[ru++]=jv,jv=c;var k=Nh;c=Fh;var j=32-oc(k)-1;k&=~(1<<j),w+=1;var K=32-oc(p)+j;if(30<K){var ae=j-j%5;K=(k&(1<<ae)-1).toString(32),k>>=ae,j-=ae,Nh=1<<32-oc(p)+j|w<<j|k,Fh=K+c}else Nh=1<<K|w<<j|k,Fh=c}function O8(c){c.return!==null&&(Hv(c,1),fge(c,1,0))}function L8(c){for(;c===n3;)n3=R_[--D_],R_[D_]=null,r3=R_[--D_],R_[D_]=null;for(;c===jv;)jv=nu[--ru],nu[ru]=null,Fh=nu[--ru],nu[ru]=null,Nh=nu[--ru],nu[ru]=null}var fl=null,ml=null,Ri=!1,lc=null;function mge(c,p){var w=au(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=c,p=c.deletions,p===null?(c.deletions=[w],c.flags|=16):p.push(w)}function gge(c,p){switch(c.tag){case 5:var w=c.type;return p=p.nodeType!==1||w.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(c.stateNode=p,fl=c,ml=Wf(p.firstChild),!0):!1;case 6:return p=c.pendingProps===""||p.nodeType!==3?null:p,p!==null?(c.stateNode=p,fl=c,ml=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(w=jv!==null?{id:Nh,overflow:Fh}:null,c.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=au(18,null,null,0),w.stateNode=p,w.return=c,c.child=w,fl=c,ml=null,!0):!1;default:return!1}}function N8(c){return(c.mode&1)!==0&&(c.flags&128)===0}function F8(c){if(Ri){var p=ml;if(p){var w=p;if(!gge(c,p)){if(N8(c))throw Error(d(418));p=Wf(w.nextSibling);var k=fl;p&&gge(c,p)?mge(k,w):(c.flags=c.flags&-4097|2,Ri=!1,fl=c)}}else{if(N8(c))throw Error(d(418));c.flags=c.flags&-4097|2,Ri=!1,fl=c}}}function vge(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;fl=c}function i3(c){if(c!==fl)return!1;if(!Ri)return vge(c),Ri=!0,!1;var p;if((p=c.tag!==3)&&!(p=c.tag!==5)&&(p=c.type,p=p!=="head"&&p!=="body"&&!M8(c.type,c.memoizedProps)),p&&(p=ml)){if(N8(c))throw yge(),Error(d(418));for(;p;)mge(c,p),p=Wf(p.nextSibling)}if(vge(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(d(317));e:{for(c=c.nextSibling,p=0;c;){if(c.nodeType===8){var w=c.data;if(w==="/$"){if(p===0){ml=Wf(c.nextSibling);break e}p--}else w!=="$"&&w!=="$!"&&w!=="$?"||p++}c=c.nextSibling}ml=null}}else ml=fl?Wf(c.stateNode.nextSibling):null;return!0}function yge(){for(var c=ml;c;)c=Wf(c.nextSibling)}function O_(){ml=fl=null,Ri=!1}function B8(c){lc===null?lc=[c]:lc.push(c)}var INe=re.ReactCurrentBatchConfig;function uc(c,p){if(c&&c.defaultProps){p=he({},p),c=c.defaultProps;for(var w in c)p[w]===void 0&&(p[w]=c[w]);return p}return p}var s3=$f(null),o3=null,L_=null,U8=null;function z8(){U8=L_=o3=null}function V8(c){var p=s3.current;Ci(s3),c._currentValue=p}function j8(c,p,w){for(;c!==null;){var k=c.alternate;if((c.childLanes&p)!==p?(c.childLanes|=p,k!==null&&(k.childLanes|=p)):k!==null&&(k.childLanes&p)!==p&&(k.childLanes|=p),c===w)break;c=c.return}}function N_(c,p){o3=c,U8=L_=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&p&&($a=!0),c.firstContext=null)}function iu(c){var p=c._currentValue;if(U8!==c)if(c={context:c,memoizedValue:p,next:null},L_===null){if(o3===null)throw Error(d(308));L_=c,o3.dependencies={lanes:0,firstContext:c}}else L_=L_.next=c;return p}var Gv=null;function H8(c){Gv===null?Gv=[c]:Gv.push(c)}function bge(c,p,w,k){var j=p.interleaved;return j===null?(w.next=w,H8(p)):(w.next=j.next,j.next=w),p.interleaved=w,Bh(c,k)}function Bh(c,p){c.lanes|=p;var w=c.alternate;for(w!==null&&(w.lanes|=p),w=c,c=c.return;c!==null;)c.childLanes|=p,w=c.alternate,w!==null&&(w.childLanes|=p),w=c,c=c.return;return w.tag===3?w.stateNode:null}var qf=!1;function G8(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _ge(c,p){c=c.updateQueue,p.updateQueue===c&&(p.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Uh(c,p){return{eventTime:c,lane:p,tag:0,payload:null,callback:null,next:null}}function Yf(c,p,w){var k=c.updateQueue;if(k===null)return null;if(k=k.shared,Lr&2){var j=k.pending;return j===null?p.next=p:(p.next=j.next,j.next=p),k.pending=p,Bh(c,w)}return j=k.interleaved,j===null?(p.next=p,H8(k)):(p.next=j.next,j.next=p),k.interleaved=p,Bh(c,w)}function a3(c,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var k=p.lanes;k&=c.pendingLanes,w|=k,p.lanes=w,o8(c,w)}}function wge(c,p){var w=c.updateQueue,k=c.alternate;if(k!==null&&(k=k.updateQueue,w===k)){var j=null,K=null;if(w=w.firstBaseUpdate,w!==null){do{var ae={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};K===null?j=K=ae:K=K.next=ae,w=w.next}while(w!==null);K===null?j=K=p:K=K.next=p}else j=K=p;w={baseState:k.baseState,firstBaseUpdate:j,lastBaseUpdate:K,shared:k.shared,effects:k.effects},c.updateQueue=w;return}c=w.lastBaseUpdate,c===null?w.firstBaseUpdate=p:c.next=p,w.lastBaseUpdate=p}function l3(c,p,w,k){var j=c.updateQueue;qf=!1;var K=j.firstBaseUpdate,ae=j.lastBaseUpdate,ke=j.shared.pending;if(ke!==null){j.shared.pending=null;var Ue=ke,vt=Ue.next;Ue.next=null,ae===null?K=vt:ae.next=vt,ae=Ue;var Ut=c.alternate;Ut!==null&&(Ut=Ut.updateQueue,ke=Ut.lastBaseUpdate,ke!==ae&&(ke===null?Ut.firstBaseUpdate=vt:ke.next=vt,Ut.lastBaseUpdate=Ue))}if(K!==null){var Ht=j.baseState;ae=0,Ut=vt=Ue=null,ke=K;do{var Bt=ke.lane,on=ke.eventTime;if((k&Bt)===Bt){Ut!==null&&(Ut=Ut.next={eventTime:on,lane:0,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null});e:{var bn=c,Cn=ke;switch(Bt=p,on=w,Cn.tag){case 1:if(bn=Cn.payload,typeof bn=="function"){Ht=bn.call(on,Ht,Bt);break e}Ht=bn;break e;case 3:bn.flags=bn.flags&-65537|128;case 0:if(bn=Cn.payload,Bt=typeof bn=="function"?bn.call(on,Ht,Bt):bn,Bt==null)break e;Ht=he({},Ht,Bt);break e;case 2:qf=!0}}ke.callback!==null&&ke.lane!==0&&(c.flags|=64,Bt=j.effects,Bt===null?j.effects=[ke]:Bt.push(ke))}else on={eventTime:on,lane:Bt,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null},Ut===null?(vt=Ut=on,Ue=Ht):Ut=Ut.next=on,ae|=Bt;if(ke=ke.next,ke===null){if(ke=j.shared.pending,ke===null)break;Bt=ke,ke=Bt.next,Bt.next=null,j.lastBaseUpdate=Bt,j.shared.pending=null}}while(1);if(Ut===null&&(Ue=Ht),j.baseState=Ue,j.firstBaseUpdate=vt,j.lastBaseUpdate=Ut,p=j.shared.interleaved,p!==null){j=p;do ae|=j.lane,j=j.next;while(j!==p)}else K===null&&(j.shared.lanes=0);Kv|=ae,c.lanes=ae,c.memoizedState=Ht}}function xge(c,p,w){if(c=p.effects,p.effects=null,c!==null)for(p=0;p<c.length;p++){var k=c[p],j=k.callback;if(j!==null){if(k.callback=null,k=w,typeof j!="function")throw Error(d(191,j));j.call(k)}}}var Sge=new a.Component().refs;function W8(c,p,w,k){p=c.memoizedState,w=w(k,p),w=w==null?p:he({},p,w),c.memoizedState=w,c.lanes===0&&(c.updateQueue.baseState=w)}var u3={isMounted:function(c){return(c=c._reactInternals)?Uv(c)===c:!1},enqueueSetState:function(c,p,w){c=c._reactInternals;var k=ya(),j=em(c),K=Uh(k,j);K.payload=p,w!=null&&(K.callback=w),p=Yf(c,K,j),p!==null&&(hc(p,c,j,k),a3(p,c,j))},enqueueReplaceState:function(c,p,w){c=c._reactInternals;var k=ya(),j=em(c),K=Uh(k,j);K.tag=1,K.payload=p,w!=null&&(K.callback=w),p=Yf(c,K,j),p!==null&&(hc(p,c,j,k),a3(p,c,j))},enqueueForceUpdate:function(c,p){c=c._reactInternals;var w=ya(),k=em(c),j=Uh(w,k);j.tag=2,p!=null&&(j.callback=p),p=Yf(c,j,k),p!==null&&(hc(p,c,k,w),a3(p,c,k))}};function Ege(c,p,w,k,j,K,ae){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(k,K,ae):p.prototype&&p.prototype.isPureReactComponent?!KC(w,k)||!KC(j,K):!0}function Cge(c,p,w){var k=!1,j=Kf,K=p.contextType;return typeof K=="object"&&K!==null?K=iu(K):(j=Wa(p)?Vv:Vo.current,k=p.contextTypes,K=(k=k!=null)?I_(c,j):Kf),p=new p(w,K),c.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=u3,c.stateNode=p,p._reactInternals=c,k&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=j,c.__reactInternalMemoizedMaskedChildContext=K),p}function Pge(c,p,w,k){c=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,k),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,k),p.state!==c&&u3.enqueueReplaceState(p,p.state,null)}function $8(c,p,w,k){var j=c.stateNode;j.props=w,j.state=c.memoizedState,j.refs=Sge,G8(c);var K=p.contextType;typeof K=="object"&&K!==null?j.context=iu(K):(K=Wa(p)?Vv:Vo.current,j.context=I_(c,K)),j.state=c.memoizedState,K=p.getDerivedStateFromProps,typeof K=="function"&&(W8(c,p,K,w),j.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(p=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),p!==j.state&&u3.enqueueReplaceState(j,j.state,null),l3(c,w,j,k),j.state=c.memoizedState),typeof j.componentDidMount=="function"&&(c.flags|=4194308)}function eP(c,p,w){if(c=w.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(d(309));var k=w.stateNode}if(!k)throw Error(d(147,c));var j=k,K=""+c;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===K?p.ref:(p=function(ae){var ke=j.refs;ke===Sge&&(ke=j.refs={}),ae===null?delete ke[K]:ke[K]=ae},p._stringRef=K,p)}if(typeof c!="string")throw Error(d(284));if(!w._owner)throw Error(d(290,c))}return c}function c3(c,p){throw c=Object.prototype.toString.call(p),Error(d(31,c==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":c))}function Tge(c){var p=c._init;return p(c._payload)}function Mge(c){function p(nt,He){if(c){var at=nt.deletions;at===null?(nt.deletions=[He],nt.flags|=16):at.push(He)}}function w(nt,He){if(!c)return null;for(;He!==null;)p(nt,He),He=He.sibling;return null}function k(nt,He){for(nt=new Map;He!==null;)He.key!==null?nt.set(He.key,He):nt.set(He.index,He),He=He.sibling;return nt}function j(nt,He){return nt=nm(nt,He),nt.index=0,nt.sibling=null,nt}function K(nt,He,at){return nt.index=at,c?(at=nt.alternate,at!==null?(at=at.index,at<He?(nt.flags|=2,He):at):(nt.flags|=2,He)):(nt.flags|=1048576,He)}function ae(nt){return c&&nt.alternate===null&&(nt.flags|=2),nt}function ke(nt,He,at,Wt){return He===null||He.tag!==6?(He=MH(at,nt.mode,Wt),He.return=nt,He):(He=j(He,at),He.return=nt,He)}function Ue(nt,He,at,Wt){var kn=at.type;return kn===ye?Ut(nt,He,at.props.children,Wt,at.key):He!==null&&(He.elementType===kn||typeof kn=="object"&&kn!==null&&kn.$$typeof===Ie&&Tge(kn)===He.type)?(Wt=j(He,at.props),Wt.ref=eP(nt,He,at),Wt.return=nt,Wt):(Wt=k3(at.type,at.key,at.props,null,nt.mode,Wt),Wt.ref=eP(nt,He,at),Wt.return=nt,Wt)}function vt(nt,He,at,Wt){return He===null||He.tag!==4||He.stateNode.containerInfo!==at.containerInfo||He.stateNode.implementation!==at.implementation?(He=kH(at,nt.mode,Wt),He.return=nt,He):(He=j(He,at.children||[]),He.return=nt,He)}function Ut(nt,He,at,Wt,kn){return He===null||He.tag!==7?(He=Zv(at,nt.mode,Wt,kn),He.return=nt,He):(He=j(He,at),He.return=nt,He)}function Ht(nt,He,at){if(typeof He=="string"&&He!==""||typeof He=="number")return He=MH(""+He,nt.mode,at),He.return=nt,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case ce:return at=k3(He.type,He.key,He.props,null,nt.mode,at),at.ref=eP(nt,null,He),at.return=nt,at;case Pe:return He=kH(He,nt.mode,at),He.return=nt,He;case Ie:var Wt=He._init;return Ht(nt,Wt(He._payload),at)}if(kt(He)||St(He))return He=Zv(He,nt.mode,at,null),He.return=nt,He;c3(nt,He)}return null}function Bt(nt,He,at,Wt){var kn=He!==null?He.key:null;if(typeof at=="string"&&at!==""||typeof at=="number")return kn!==null?null:ke(nt,He,""+at,Wt);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case ce:return at.key===kn?Ue(nt,He,at,Wt):null;case Pe:return at.key===kn?vt(nt,He,at,Wt):null;case Ie:return kn=at._init,Bt(nt,He,kn(at._payload),Wt)}if(kt(at)||St(at))return kn!==null?null:Ut(nt,He,at,Wt,null);c3(nt,at)}return null}function on(nt,He,at,Wt,kn){if(typeof Wt=="string"&&Wt!==""||typeof Wt=="number")return nt=nt.get(at)||null,ke(He,nt,""+Wt,kn);if(typeof Wt=="object"&&Wt!==null){switch(Wt.$$typeof){case ce:return nt=nt.get(Wt.key===null?at:Wt.key)||null,Ue(He,nt,Wt,kn);case Pe:return nt=nt.get(Wt.key===null?at:Wt.key)||null,vt(He,nt,Wt,kn);case Ie:var Hn=Wt._init;return on(nt,He,at,Hn(Wt._payload),kn)}if(kt(Wt)||St(Wt))return nt=nt.get(at)||null,Ut(He,nt,Wt,kn,null);c3(He,Wt)}return null}function bn(nt,He,at,Wt){for(var kn=null,Hn=null,Gn=He,tr=He=0,eo=null;Gn!==null&&tr<at.length;tr++){Gn.index>tr?(eo=Gn,Gn=null):eo=Gn.sibling;var Wr=Bt(nt,Gn,at[tr],Wt);if(Wr===null){Gn===null&&(Gn=eo);break}c&&Gn&&Wr.alternate===null&&p(nt,Gn),He=K(Wr,He,tr),Hn===null?kn=Wr:Hn.sibling=Wr,Hn=Wr,Gn=eo}if(tr===at.length)return w(nt,Gn),Ri&&Hv(nt,tr),kn;if(Gn===null){for(;tr<at.length;tr++)Gn=Ht(nt,at[tr],Wt),Gn!==null&&(He=K(Gn,He,tr),Hn===null?kn=Gn:Hn.sibling=Gn,Hn=Gn);return Ri&&Hv(nt,tr),kn}for(Gn=k(nt,Gn);tr<at.length;tr++)eo=on(Gn,nt,tr,at[tr],Wt),eo!==null&&(c&&eo.alternate!==null&&Gn.delete(eo.key===null?tr:eo.key),He=K(eo,He,tr),Hn===null?kn=eo:Hn.sibling=eo,Hn=eo);return c&&Gn.forEach(function(rm){return p(nt,rm)}),Ri&&Hv(nt,tr),kn}function Cn(nt,He,at,Wt){var kn=St(at);if(typeof kn!="function")throw Error(d(150));if(at=kn.call(at),at==null)throw Error(d(151));for(var Hn=kn=null,Gn=He,tr=He=0,eo=null,Wr=at.next();Gn!==null&&!Wr.done;tr++,Wr=at.next()){Gn.index>tr?(eo=Gn,Gn=null):eo=Gn.sibling;var rm=Bt(nt,Gn,Wr.value,Wt);if(rm===null){Gn===null&&(Gn=eo);break}c&&Gn&&rm.alternate===null&&p(nt,Gn),He=K(rm,He,tr),Hn===null?kn=rm:Hn.sibling=rm,Hn=rm,Gn=eo}if(Wr.done)return w(nt,Gn),Ri&&Hv(nt,tr),kn;if(Gn===null){for(;!Wr.done;tr++,Wr=at.next())Wr=Ht(nt,Wr.value,Wt),Wr!==null&&(He=K(Wr,He,tr),Hn===null?kn=Wr:Hn.sibling=Wr,Hn=Wr);return Ri&&Hv(nt,tr),kn}for(Gn=k(nt,Gn);!Wr.done;tr++,Wr=at.next())Wr=on(Gn,nt,tr,Wr.value,Wt),Wr!==null&&(c&&Wr.alternate!==null&&Gn.delete(Wr.key===null?tr:Wr.key),He=K(Wr,He,tr),Hn===null?kn=Wr:Hn.sibling=Wr,Hn=Wr);return c&&Gn.forEach(function(cFe){return p(nt,cFe)}),Ri&&Hv(nt,tr),kn}function gs(nt,He,at,Wt){if(typeof at=="object"&&at!==null&&at.type===ye&&at.key===null&&(at=at.props.children),typeof at=="object"&&at!==null){switch(at.$$typeof){case ce:e:{for(var kn=at.key,Hn=He;Hn!==null;){if(Hn.key===kn){if(kn=at.type,kn===ye){if(Hn.tag===7){w(nt,Hn.sibling),He=j(Hn,at.props.children),He.return=nt,nt=He;break e}}else if(Hn.elementType===kn||typeof kn=="object"&&kn!==null&&kn.$$typeof===Ie&&Tge(kn)===Hn.type){w(nt,Hn.sibling),He=j(Hn,at.props),He.ref=eP(nt,Hn,at),He.return=nt,nt=He;break e}w(nt,Hn);break}else p(nt,Hn);Hn=Hn.sibling}at.type===ye?(He=Zv(at.props.children,nt.mode,Wt,at.key),He.return=nt,nt=He):(Wt=k3(at.type,at.key,at.props,null,nt.mode,Wt),Wt.ref=eP(nt,He,at),Wt.return=nt,nt=Wt)}return ae(nt);case Pe:e:{for(Hn=at.key;He!==null;){if(He.key===Hn)if(He.tag===4&&He.stateNode.containerInfo===at.containerInfo&&He.stateNode.implementation===at.implementation){w(nt,He.sibling),He=j(He,at.children||[]),He.return=nt,nt=He;break e}else{w(nt,He);break}else p(nt,He);He=He.sibling}He=kH(at,nt.mode,Wt),He.return=nt,nt=He}return ae(nt);case Ie:return Hn=at._init,gs(nt,He,Hn(at._payload),Wt)}if(kt(at))return bn(nt,He,at,Wt);if(St(at))return Cn(nt,He,at,Wt);c3(nt,at)}return typeof at=="string"&&at!==""||typeof at=="number"?(at=""+at,He!==null&&He.tag===6?(w(nt,He.sibling),He=j(He,at),He.return=nt,nt=He):(w(nt,He),He=MH(at,nt.mode,Wt),He.return=nt,nt=He),ae(nt)):w(nt,He)}return gs}var F_=Mge(!0),kge=Mge(!1),tP={},yd=$f(tP),nP=$f(tP),rP=$f(tP);function Wv(c){if(c===tP)throw Error(d(174));return c}function K8(c,p){switch(mi(rP,p),mi(nP,c),mi(yd,tP),c=p.nodeType,c){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:er(null,"");break;default:c=c===8?p.parentNode:p,p=c.namespaceURI||null,c=c.tagName,p=er(p,c)}Ci(yd),mi(yd,p)}function B_(){Ci(yd),Ci(nP),Ci(rP)}function Age(c){Wv(rP.current);var p=Wv(yd.current),w=er(p,c.type);p!==w&&(mi(nP,c),mi(yd,w))}function X8(c){nP.current===c&&(Ci(yd),Ci(nP))}var Vi=$f(0);function d3(c){for(var p=c;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var q8=[];function Y8(){for(var c=0;c<q8.length;c++)q8[c]._workInProgressVersionPrimary=null;q8.length=0}var h3=re.ReactCurrentDispatcher,Z8=re.ReactCurrentBatchConfig,$v=0,ji=null,Fs=null,Qs=null,p3=!1,iP=!1,sP=0,RNe=0;function jo(){throw Error(d(321))}function Q8(c,p){if(p===null)return!1;for(var w=0;w<p.length&&w<c.length;w++)if(!ac(c[w],p[w]))return!1;return!0}function J8(c,p,w,k,j,K){if($v=K,ji=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,h3.current=c===null||c.memoizedState===null?NNe:FNe,c=w(k,j),iP){K=0;do{if(iP=!1,sP=0,25<=K)throw Error(d(301));K+=1,Qs=Fs=null,p.updateQueue=null,h3.current=BNe,c=w(k,j)}while(iP)}if(h3.current=g3,p=Fs!==null&&Fs.next!==null,$v=0,Qs=Fs=ji=null,p3=!1,p)throw Error(d(300));return c}function eH(){var c=sP!==0;return sP=0,c}function bd(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qs===null?ji.memoizedState=Qs=c:Qs=Qs.next=c,Qs}function su(){if(Fs===null){var c=ji.alternate;c=c!==null?c.memoizedState:null}else c=Fs.next;var p=Qs===null?ji.memoizedState:Qs.next;if(p!==null)Qs=p,Fs=c;else{if(c===null)throw Error(d(310));Fs=c,c={memoizedState:Fs.memoizedState,baseState:Fs.baseState,baseQueue:Fs.baseQueue,queue:Fs.queue,next:null},Qs===null?ji.memoizedState=Qs=c:Qs=Qs.next=c}return Qs}function oP(c,p){return typeof p=="function"?p(c):p}function tH(c){var p=su(),w=p.queue;if(w===null)throw Error(d(311));w.lastRenderedReducer=c;var k=Fs,j=k.baseQueue,K=w.pending;if(K!==null){if(j!==null){var ae=j.next;j.next=K.next,K.next=ae}k.baseQueue=j=K,w.pending=null}if(j!==null){K=j.next,k=k.baseState;var ke=ae=null,Ue=null,vt=K;do{var Ut=vt.lane;if(($v&Ut)===Ut)Ue!==null&&(Ue=Ue.next={lane:0,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),k=vt.hasEagerState?vt.eagerState:c(k,vt.action);else{var Ht={lane:Ut,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null};Ue===null?(ke=Ue=Ht,ae=k):Ue=Ue.next=Ht,ji.lanes|=Ut,Kv|=Ut}vt=vt.next}while(vt!==null&&vt!==K);Ue===null?ae=k:Ue.next=ke,ac(k,p.memoizedState)||($a=!0),p.memoizedState=k,p.baseState=ae,p.baseQueue=Ue,w.lastRenderedState=k}if(c=w.interleaved,c!==null){j=c;do K=j.lane,ji.lanes|=K,Kv|=K,j=j.next;while(j!==c)}else j===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function nH(c){var p=su(),w=p.queue;if(w===null)throw Error(d(311));w.lastRenderedReducer=c;var k=w.dispatch,j=w.pending,K=p.memoizedState;if(j!==null){w.pending=null;var ae=j=j.next;do K=c(K,ae.action),ae=ae.next;while(ae!==j);ac(K,p.memoizedState)||($a=!0),p.memoizedState=K,p.baseQueue===null&&(p.baseState=K),w.lastRenderedState=K}return[K,k]}function Ige(){}function Rge(c,p){var w=ji,k=su(),j=p(),K=!ac(k.memoizedState,j);if(K&&(k.memoizedState=j,$a=!0),k=k.queue,rH(Lge.bind(null,w,k,c),[c]),k.getSnapshot!==p||K||Qs!==null&&Qs.memoizedState.tag&1){if(w.flags|=2048,aP(9,Oge.bind(null,w,k,j,p),void 0,null),Js===null)throw Error(d(349));$v&30||Dge(w,p,j)}return j}function Dge(c,p,w){c.flags|=16384,c={getSnapshot:p,value:w},p=ji.updateQueue,p===null?(p={lastEffect:null,stores:null},ji.updateQueue=p,p.stores=[c]):(w=p.stores,w===null?p.stores=[c]:w.push(c))}function Oge(c,p,w,k){p.value=w,p.getSnapshot=k,Nge(p)&&Fge(c)}function Lge(c,p,w){return w(function(){Nge(p)&&Fge(c)})}function Nge(c){var p=c.getSnapshot;c=c.value;try{var w=p();return!ac(c,w)}catch{return!0}}function Fge(c){var p=Bh(c,1);p!==null&&hc(p,c,1,-1)}function Bge(c){var p=bd();return typeof c=="function"&&(c=c()),p.memoizedState=p.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oP,lastRenderedState:c},p.queue=c,c=c.dispatch=LNe.bind(null,ji,c),[p.memoizedState,c]}function aP(c,p,w,k){return c={tag:c,create:p,destroy:w,deps:k,next:null},p=ji.updateQueue,p===null?(p={lastEffect:null,stores:null},ji.updateQueue=p,p.lastEffect=c.next=c):(w=p.lastEffect,w===null?p.lastEffect=c.next=c:(k=w.next,w.next=c,c.next=k,p.lastEffect=c)),c}function Uge(){return su().memoizedState}function f3(c,p,w,k){var j=bd();ji.flags|=c,j.memoizedState=aP(1|p,w,void 0,k===void 0?null:k)}function m3(c,p,w,k){var j=su();k=k===void 0?null:k;var K=void 0;if(Fs!==null){var ae=Fs.memoizedState;if(K=ae.destroy,k!==null&&Q8(k,ae.deps)){j.memoizedState=aP(p,w,K,k);return}}ji.flags|=c,j.memoizedState=aP(1|p,w,K,k)}function zge(c,p){return f3(8390656,8,c,p)}function rH(c,p){return m3(2048,8,c,p)}function Vge(c,p){return m3(4,2,c,p)}function jge(c,p){return m3(4,4,c,p)}function Hge(c,p){if(typeof p=="function")return c=c(),p(c),function(){p(null)};if(p!=null)return c=c(),p.current=c,function(){p.current=null}}function Gge(c,p,w){return w=w!=null?w.concat([c]):null,m3(4,4,Hge.bind(null,p,c),w)}function iH(){}function Wge(c,p){var w=su();p=p===void 0?null:p;var k=w.memoizedState;return k!==null&&p!==null&&Q8(p,k[1])?k[0]:(w.memoizedState=[c,p],c)}function $ge(c,p){var w=su();p=p===void 0?null:p;var k=w.memoizedState;return k!==null&&p!==null&&Q8(p,k[1])?k[0]:(c=c(),w.memoizedState=[c,p],c)}function Kge(c,p,w){return $v&21?(ac(w,p)||(w=yme(),ji.lanes|=w,Kv|=w,c.baseState=!0),p):(c.baseState&&(c.baseState=!1,$a=!0),c.memoizedState=w)}function DNe(c,p){var w=ti;ti=w!==0&&4>w?w:4,c(!0);var k=Z8.transition;Z8.transition={};try{c(!1),p()}finally{ti=w,Z8.transition=k}}function Xge(){return su().memoizedState}function ONe(c,p,w){var k=em(c);if(w={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null},qge(c))Yge(p,w);else if(w=bge(c,p,w,k),w!==null){var j=ya();hc(w,c,k,j),Zge(w,p,k)}}function LNe(c,p,w){var k=em(c),j={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null};if(qge(c))Yge(p,j);else{var K=c.alternate;if(c.lanes===0&&(K===null||K.lanes===0)&&(K=p.lastRenderedReducer,K!==null))try{var ae=p.lastRenderedState,ke=K(ae,w);if(j.hasEagerState=!0,j.eagerState=ke,ac(ke,ae)){var Ue=p.interleaved;Ue===null?(j.next=j,H8(p)):(j.next=Ue.next,Ue.next=j),p.interleaved=j;return}}catch{}finally{}w=bge(c,p,j,k),w!==null&&(j=ya(),hc(w,c,k,j),Zge(w,p,k))}}function qge(c){var p=c.alternate;return c===ji||p!==null&&p===ji}function Yge(c,p){iP=p3=!0;var w=c.pending;w===null?p.next=p:(p.next=w.next,w.next=p),c.pending=p}function Zge(c,p,w){if(w&4194240){var k=p.lanes;k&=c.pendingLanes,w|=k,p.lanes=w,o8(c,w)}}var g3={readContext:iu,useCallback:jo,useContext:jo,useEffect:jo,useImperativeHandle:jo,useInsertionEffect:jo,useLayoutEffect:jo,useMemo:jo,useReducer:jo,useRef:jo,useState:jo,useDebugValue:jo,useDeferredValue:jo,useTransition:jo,useMutableSource:jo,useSyncExternalStore:jo,useId:jo,unstable_isNewReconciler:!1},NNe={readContext:iu,useCallback:function(c,p){return bd().memoizedState=[c,p===void 0?null:p],c},useContext:iu,useEffect:zge,useImperativeHandle:function(c,p,w){return w=w!=null?w.concat([c]):null,f3(4194308,4,Hge.bind(null,p,c),w)},useLayoutEffect:function(c,p){return f3(4194308,4,c,p)},useInsertionEffect:function(c,p){return f3(4,2,c,p)},useMemo:function(c,p){var w=bd();return p=p===void 0?null:p,c=c(),w.memoizedState=[c,p],c},useReducer:function(c,p,w){var k=bd();return p=w!==void 0?w(p):p,k.memoizedState=k.baseState=p,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:p},k.queue=c,c=c.dispatch=ONe.bind(null,ji,c),[k.memoizedState,c]},useRef:function(c){var p=bd();return c={current:c},p.memoizedState=c},useState:Bge,useDebugValue:iH,useDeferredValue:function(c){return bd().memoizedState=c},useTransition:function(){var c=Bge(!1),p=c[0];return c=DNe.bind(null,c[1]),bd().memoizedState=c,[p,c]},useMutableSource:function(){},useSyncExternalStore:function(c,p,w){var k=ji,j=bd();if(Ri){if(w===void 0)throw Error(d(407));w=w()}else{if(w=p(),Js===null)throw Error(d(349));$v&30||Dge(k,p,w)}j.memoizedState=w;var K={value:w,getSnapshot:p};return j.queue=K,zge(Lge.bind(null,k,K,c),[c]),k.flags|=2048,aP(9,Oge.bind(null,k,K,w,p),void 0,null),w},useId:function(){var c=bd(),p=Js.identifierPrefix;if(Ri){var w=Fh,k=Nh;w=(k&~(1<<32-oc(k)-1)).toString(32)+w,p=":"+p+"R"+w,w=sP++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=RNe++,p=":"+p+"r"+w.toString(32)+":";return c.memoizedState=p},unstable_isNewReconciler:!1},FNe={readContext:iu,useCallback:Wge,useContext:iu,useEffect:rH,useImperativeHandle:Gge,useInsertionEffect:Vge,useLayoutEffect:jge,useMemo:$ge,useReducer:tH,useRef:Uge,useState:function(){return tH(oP)},useDebugValue:iH,useDeferredValue:function(c){var p=su();return Kge(p,Fs.memoizedState,c)},useTransition:function(){var c=tH(oP)[0],p=su().memoizedState;return[c,p]},useMutableSource:Ige,useSyncExternalStore:Rge,useId:Xge,unstable_isNewReconciler:!1},BNe={readContext:iu,useCallback:Wge,useContext:iu,useEffect:rH,useImperativeHandle:Gge,useInsertionEffect:Vge,useLayoutEffect:jge,useMemo:$ge,useReducer:nH,useRef:Uge,useState:function(){return nH(oP)},useDebugValue:iH,useDeferredValue:function(c){var p=su();return Fs===null?p.memoizedState=c:Kge(p,Fs.memoizedState,c)},useTransition:function(){var c=nH(oP)[0],p=su().memoizedState;return[c,p]},useMutableSource:Ige,useSyncExternalStore:Rge,useId:Xge,unstable_isNewReconciler:!1};function U_(c,p){try{var w="",k=p;do w+=We(k),k=k.return;while(k);var j=w}catch(K){j=`
Error generating stack: `+K.message+`
`+K.stack}return{value:c,source:p,stack:j,digest:null}}function sH(c,p,w){return{value:c,source:null,stack:w??null,digest:p??null}}function oH(c,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var UNe=typeof WeakMap=="function"?WeakMap:Map;function Qge(c,p,w){w=Uh(-1,w),w.tag=3,w.payload={element:null};var k=p.value;return w.callback=function(){S3||(S3=!0,_H=k),oH(c,p)},w}function Jge(c,p,w){w=Uh(-1,w),w.tag=3;var k=c.type.getDerivedStateFromError;if(typeof k=="function"){var j=p.value;w.payload=function(){return k(j)},w.callback=function(){oH(c,p)}}var K=c.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(w.callback=function(){oH(c,p),typeof k!="function"&&(Qf===null?Qf=new Set([this]):Qf.add(this));var ae=p.stack;this.componentDidCatch(p.value,{componentStack:ae!==null?ae:""})}),w}function eve(c,p,w){var k=c.pingCache;if(k===null){k=c.pingCache=new UNe;var j=new Set;k.set(p,j)}else j=k.get(p),j===void 0&&(j=new Set,k.set(p,j));j.has(w)||(j.add(w),c=JNe.bind(null,c,p,w),p.then(c,c))}function tve(c){do{var p;if((p=c.tag===13)&&(p=c.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return c;c=c.return}while(c!==null);return null}function nve(c,p,w,k,j){return c.mode&1?(c.flags|=65536,c.lanes=j,c):(c===p?c.flags|=65536:(c.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=Uh(-1,1),p.tag=2,Yf(w,p,1))),w.lanes|=1),c)}var zNe=re.ReactCurrentOwner,$a=!1;function va(c,p,w,k){p.child=c===null?kge(p,null,w,k):F_(p,c.child,w,k)}function rve(c,p,w,k,j){w=w.render;var K=p.ref;return N_(p,j),k=J8(c,p,w,k,K,j),w=eH(),c!==null&&!$a?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~j,zh(c,p,j)):(Ri&&w&&O8(p),p.flags|=1,va(c,p,k,j),p.child)}function ive(c,p,w,k,j){if(c===null){var K=w.type;return typeof K=="function"&&!TH(K)&&K.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=K,sve(c,p,K,k,j)):(c=k3(w.type,null,k,p,p.mode,j),c.ref=p.ref,c.return=p,p.child=c)}if(K=c.child,!(c.lanes&j)){var ae=K.memoizedProps;if(w=w.compare,w=w!==null?w:KC,w(ae,k)&&c.ref===p.ref)return zh(c,p,j)}return p.flags|=1,c=nm(K,k),c.ref=p.ref,c.return=p,p.child=c}function sve(c,p,w,k,j){if(c!==null){var K=c.memoizedProps;if(KC(K,k)&&c.ref===p.ref)if($a=!1,p.pendingProps=k=K,(c.lanes&j)!==0)c.flags&131072&&($a=!0);else return p.lanes=c.lanes,zh(c,p,j)}return aH(c,p,w,k,j)}function ove(c,p,w){var k=p.pendingProps,j=k.children,K=c!==null?c.memoizedState:null;if(k.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null,transitions:null},mi(V_,gl),gl|=w;else{if(!(w&1073741824))return c=K!==null?K.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:c,cachePool:null,transitions:null},p.updateQueue=null,mi(V_,gl),gl|=c,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=K!==null?K.baseLanes:w,mi(V_,gl),gl|=k}else K!==null?(k=K.baseLanes|w,p.memoizedState=null):k=w,mi(V_,gl),gl|=k;return va(c,p,j,w),p.child}function ave(c,p){var w=p.ref;(c===null&&w!==null||c!==null&&c.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function aH(c,p,w,k,j){var K=Wa(w)?Vv:Vo.current;return K=I_(p,K),N_(p,j),w=J8(c,p,w,k,K,j),k=eH(),c!==null&&!$a?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~j,zh(c,p,j)):(Ri&&k&&O8(p),p.flags|=1,va(c,p,w,j),p.child)}function lve(c,p,w,k,j){if(Wa(w)){var K=!0;e3(p)}else K=!1;if(N_(p,j),p.stateNode===null)y3(c,p),Cge(p,w,k),$8(p,w,k,j),k=!0;else if(c===null){var ae=p.stateNode,ke=p.memoizedProps;ae.props=ke;var Ue=ae.context,vt=w.contextType;typeof vt=="object"&&vt!==null?vt=iu(vt):(vt=Wa(w)?Vv:Vo.current,vt=I_(p,vt));var Ut=w.getDerivedStateFromProps,Ht=typeof Ut=="function"||typeof ae.getSnapshotBeforeUpdate=="function";Ht||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(ke!==k||Ue!==vt)&&Pge(p,ae,k,vt),qf=!1;var Bt=p.memoizedState;ae.state=Bt,l3(p,k,ae,j),Ue=p.memoizedState,ke!==k||Bt!==Ue||Ga.current||qf?(typeof Ut=="function"&&(W8(p,w,Ut,k),Ue=p.memoizedState),(ke=qf||Ege(p,w,ke,k,Bt,Ue,vt))?(Ht||typeof ae.UNSAFE_componentWillMount!="function"&&typeof ae.componentWillMount!="function"||(typeof ae.componentWillMount=="function"&&ae.componentWillMount(),typeof ae.UNSAFE_componentWillMount=="function"&&ae.UNSAFE_componentWillMount()),typeof ae.componentDidMount=="function"&&(p.flags|=4194308)):(typeof ae.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=k,p.memoizedState=Ue),ae.props=k,ae.state=Ue,ae.context=vt,k=ke):(typeof ae.componentDidMount=="function"&&(p.flags|=4194308),k=!1)}else{ae=p.stateNode,_ge(c,p),ke=p.memoizedProps,vt=p.type===p.elementType?ke:uc(p.type,ke),ae.props=vt,Ht=p.pendingProps,Bt=ae.context,Ue=w.contextType,typeof Ue=="object"&&Ue!==null?Ue=iu(Ue):(Ue=Wa(w)?Vv:Vo.current,Ue=I_(p,Ue));var on=w.getDerivedStateFromProps;(Ut=typeof on=="function"||typeof ae.getSnapshotBeforeUpdate=="function")||typeof ae.UNSAFE_componentWillReceiveProps!="function"&&typeof ae.componentWillReceiveProps!="function"||(ke!==Ht||Bt!==Ue)&&Pge(p,ae,k,Ue),qf=!1,Bt=p.memoizedState,ae.state=Bt,l3(p,k,ae,j);var bn=p.memoizedState;ke!==Ht||Bt!==bn||Ga.current||qf?(typeof on=="function"&&(W8(p,w,on,k),bn=p.memoizedState),(vt=qf||Ege(p,w,vt,k,Bt,bn,Ue)||!1)?(Ut||typeof ae.UNSAFE_componentWillUpdate!="function"&&typeof ae.componentWillUpdate!="function"||(typeof ae.componentWillUpdate=="function"&&ae.componentWillUpdate(k,bn,Ue),typeof ae.UNSAFE_componentWillUpdate=="function"&&ae.UNSAFE_componentWillUpdate(k,bn,Ue)),typeof ae.componentDidUpdate=="function"&&(p.flags|=4),typeof ae.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof ae.componentDidUpdate!="function"||ke===c.memoizedProps&&Bt===c.memoizedState||(p.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||ke===c.memoizedProps&&Bt===c.memoizedState||(p.flags|=1024),p.memoizedProps=k,p.memoizedState=bn),ae.props=k,ae.state=bn,ae.context=Ue,k=vt):(typeof ae.componentDidUpdate!="function"||ke===c.memoizedProps&&Bt===c.memoizedState||(p.flags|=4),typeof ae.getSnapshotBeforeUpdate!="function"||ke===c.memoizedProps&&Bt===c.memoizedState||(p.flags|=1024),k=!1)}return lH(c,p,w,k,K,j)}function lH(c,p,w,k,j,K){ave(c,p);var ae=(p.flags&128)!==0;if(!k&&!ae)return j&&hge(p,w,!1),zh(c,p,K);k=p.stateNode,zNe.current=p;var ke=ae&&typeof w.getDerivedStateFromError!="function"?null:k.render();return p.flags|=1,c!==null&&ae?(p.child=F_(p,c.child,null,K),p.child=F_(p,null,ke,K)):va(c,p,ke,K),p.memoizedState=k.state,j&&hge(p,w,!0),p.child}function uve(c){var p=c.stateNode;p.pendingContext?cge(c,p.pendingContext,p.pendingContext!==p.context):p.context&&cge(c,p.context,!1),K8(c,p.containerInfo)}function cve(c,p,w,k,j){return O_(),B8(j),p.flags|=256,va(c,p,w,k),p.child}var uH={dehydrated:null,treeContext:null,retryLane:0};function cH(c){return{baseLanes:c,cachePool:null,transitions:null}}function dve(c,p,w){var k=p.pendingProps,j=Vi.current,K=!1,ae=(p.flags&128)!==0,ke;if((ke=ae)||(ke=c!==null&&c.memoizedState===null?!1:(j&2)!==0),ke?(K=!0,p.flags&=-129):(c===null||c.memoizedState!==null)&&(j|=1),mi(Vi,j&1),c===null)return F8(p),c=p.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(p.mode&1?c.data==="$!"?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(ae=k.children,c=k.fallback,K?(k=p.mode,K=p.child,ae={mode:"hidden",children:ae},!(k&1)&&K!==null?(K.childLanes=0,K.pendingProps=ae):K=A3(ae,k,0,null),c=Zv(c,k,w,null),K.return=p,c.return=p,K.sibling=c,p.child=K,p.child.memoizedState=cH(w),p.memoizedState=uH,c):dH(p,ae));if(j=c.memoizedState,j!==null&&(ke=j.dehydrated,ke!==null))return VNe(c,p,ae,k,ke,j,w);if(K){K=k.fallback,ae=p.mode,j=c.child,ke=j.sibling;var Ue={mode:"hidden",children:k.children};return!(ae&1)&&p.child!==j?(k=p.child,k.childLanes=0,k.pendingProps=Ue,p.deletions=null):(k=nm(j,Ue),k.subtreeFlags=j.subtreeFlags&14680064),ke!==null?K=nm(ke,K):(K=Zv(K,ae,w,null),K.flags|=2),K.return=p,k.return=p,k.sibling=K,p.child=k,k=K,K=p.child,ae=c.child.memoizedState,ae=ae===null?cH(w):{baseLanes:ae.baseLanes|w,cachePool:null,transitions:ae.transitions},K.memoizedState=ae,K.childLanes=c.childLanes&~w,p.memoizedState=uH,k}return K=c.child,c=K.sibling,k=nm(K,{mode:"visible",children:k.children}),!(p.mode&1)&&(k.lanes=w),k.return=p,k.sibling=null,c!==null&&(w=p.deletions,w===null?(p.deletions=[c],p.flags|=16):w.push(c)),p.child=k,p.memoizedState=null,k}function dH(c,p){return p=A3({mode:"visible",children:p},c.mode,0,null),p.return=c,c.child=p}function v3(c,p,w,k){return k!==null&&B8(k),F_(p,c.child,null,w),c=dH(p,p.pendingProps.children),c.flags|=2,p.memoizedState=null,c}function VNe(c,p,w,k,j,K,ae){if(w)return p.flags&256?(p.flags&=-257,k=sH(Error(d(422))),v3(c,p,ae,k)):p.memoizedState!==null?(p.child=c.child,p.flags|=128,null):(K=k.fallback,j=p.mode,k=A3({mode:"visible",children:k.children},j,0,null),K=Zv(K,j,ae,null),K.flags|=2,k.return=p,K.return=p,k.sibling=K,p.child=k,p.mode&1&&F_(p,c.child,null,ae),p.child.memoizedState=cH(ae),p.memoizedState=uH,K);if(!(p.mode&1))return v3(c,p,ae,null);if(j.data==="$!"){if(k=j.nextSibling&&j.nextSibling.dataset,k)var ke=k.dgst;return k=ke,K=Error(d(419)),k=sH(K,k,void 0),v3(c,p,ae,k)}if(ke=(ae&c.childLanes)!==0,$a||ke){if(k=Js,k!==null){switch(ae&-ae){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}j=j&(k.suspendedLanes|ae)?0:j,j!==0&&j!==K.retryLane&&(K.retryLane=j,Bh(c,j),hc(k,c,j,-1))}return PH(),k=sH(Error(d(421))),v3(c,p,ae,k)}return j.data==="$?"?(p.flags|=128,p.child=c.child,p=eFe.bind(null,c),j._reactRetry=p,null):(c=K.treeContext,ml=Wf(j.nextSibling),fl=p,Ri=!0,lc=null,c!==null&&(nu[ru++]=Nh,nu[ru++]=Fh,nu[ru++]=jv,Nh=c.id,Fh=c.overflow,jv=p),p=dH(p,k.children),p.flags|=4096,p)}function hve(c,p,w){c.lanes|=p;var k=c.alternate;k!==null&&(k.lanes|=p),j8(c.return,p,w)}function hH(c,p,w,k,j){var K=c.memoizedState;K===null?c.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:k,tail:w,tailMode:j}:(K.isBackwards=p,K.rendering=null,K.renderingStartTime=0,K.last=k,K.tail=w,K.tailMode=j)}function pve(c,p,w){var k=p.pendingProps,j=k.revealOrder,K=k.tail;if(va(c,p,k.children,w),k=Vi.current,k&2)k=k&1|2,p.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=p.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&hve(c,w,p);else if(c.tag===19)hve(c,w,p);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===p)break e;for(;c.sibling===null;){if(c.return===null||c.return===p)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}k&=1}if(mi(Vi,k),!(p.mode&1))p.memoizedState=null;else switch(j){case"forwards":for(w=p.child,j=null;w!==null;)c=w.alternate,c!==null&&d3(c)===null&&(j=w),w=w.sibling;w=j,w===null?(j=p.child,p.child=null):(j=w.sibling,w.sibling=null),hH(p,!1,j,w,K);break;case"backwards":for(w=null,j=p.child,p.child=null;j!==null;){if(c=j.alternate,c!==null&&d3(c)===null){p.child=j;break}c=j.sibling,j.sibling=w,w=j,j=c}hH(p,!0,w,null,K);break;case"together":hH(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function y3(c,p){!(p.mode&1)&&c!==null&&(c.alternate=null,p.alternate=null,p.flags|=2)}function zh(c,p,w){if(c!==null&&(p.dependencies=c.dependencies),Kv|=p.lanes,!(w&p.childLanes))return null;if(c!==null&&p.child!==c.child)throw Error(d(153));if(p.child!==null){for(c=p.child,w=nm(c,c.pendingProps),p.child=w,w.return=p;c.sibling!==null;)c=c.sibling,w=w.sibling=nm(c,c.pendingProps),w.return=p;w.sibling=null}return p.child}function jNe(c,p,w){switch(p.tag){case 3:uve(p),O_();break;case 5:Age(p);break;case 1:Wa(p.type)&&e3(p);break;case 4:K8(p,p.stateNode.containerInfo);break;case 10:var k=p.type._context,j=p.memoizedProps.value;mi(s3,k._currentValue),k._currentValue=j;break;case 13:if(k=p.memoizedState,k!==null)return k.dehydrated!==null?(mi(Vi,Vi.current&1),p.flags|=128,null):w&p.child.childLanes?dve(c,p,w):(mi(Vi,Vi.current&1),c=zh(c,p,w),c!==null?c.sibling:null);mi(Vi,Vi.current&1);break;case 19:if(k=(w&p.childLanes)!==0,c.flags&128){if(k)return pve(c,p,w);p.flags|=128}if(j=p.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),mi(Vi,Vi.current),k)break;return null;case 22:case 23:return p.lanes=0,ove(c,p,w)}return zh(c,p,w)}var fve,pH,mve,gve;fve=function(c,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)c.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},pH=function(){},mve=function(c,p,w,k){var j=c.memoizedProps;if(j!==k){c=p.stateNode,Wv(yd.current);var K=null;switch(w){case"input":j=ft(c,j),k=ft(c,k),K=[];break;case"select":j=he({},j,{value:void 0}),k=he({},k,{value:void 0}),K=[];break;case"textarea":j=Ft(c,j),k=Ft(c,k),K=[];break;default:typeof j.onClick!="function"&&typeof k.onClick=="function"&&(c.onclick=ZO)}b_(w,k);var ae;w=null;for(vt in j)if(!k.hasOwnProperty(vt)&&j.hasOwnProperty(vt)&&j[vt]!=null)if(vt==="style"){var ke=j[vt];for(ae in ke)ke.hasOwnProperty(ae)&&(w||(w={}),w[ae]="")}else vt!=="dangerouslySetInnerHTML"&&vt!=="children"&&vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&vt!=="autoFocus"&&(g.hasOwnProperty(vt)?K||(K=[]):(K=K||[]).push(vt,null));for(vt in k){var Ue=k[vt];if(ke=j!=null?j[vt]:void 0,k.hasOwnProperty(vt)&&Ue!==ke&&(Ue!=null||ke!=null))if(vt==="style")if(ke){for(ae in ke)!ke.hasOwnProperty(ae)||Ue&&Ue.hasOwnProperty(ae)||(w||(w={}),w[ae]="");for(ae in Ue)Ue.hasOwnProperty(ae)&&ke[ae]!==Ue[ae]&&(w||(w={}),w[ae]=Ue[ae])}else w||(K||(K=[]),K.push(vt,w)),w=Ue;else vt==="dangerouslySetInnerHTML"?(Ue=Ue?Ue.__html:void 0,ke=ke?ke.__html:void 0,Ue!=null&&ke!==Ue&&(K=K||[]).push(vt,Ue)):vt==="children"?typeof Ue!="string"&&typeof Ue!="number"||(K=K||[]).push(vt,""+Ue):vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&(g.hasOwnProperty(vt)?(Ue!=null&&vt==="onScroll"&&Ei("scroll",c),K||ke===Ue||(K=[])):(K=K||[]).push(vt,Ue))}w&&(K=K||[]).push("style",w);var vt=K;(p.updateQueue=vt)&&(p.flags|=4)}},gve=function(c,p,w,k){w!==k&&(p.flags|=4)};function lP(c,p){if(!Ri)switch(c.tailMode){case"hidden":p=c.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?c.tail=null:w.sibling=null;break;case"collapsed":w=c.tail;for(var k=null;w!==null;)w.alternate!==null&&(k=w),w=w.sibling;k===null?p||c.tail===null?c.tail=null:c.tail.sibling=null:k.sibling=null}}function Ho(c){var p=c.alternate!==null&&c.alternate.child===c.child,w=0,k=0;if(p)for(var j=c.child;j!==null;)w|=j.lanes|j.childLanes,k|=j.subtreeFlags&14680064,k|=j.flags&14680064,j.return=c,j=j.sibling;else for(j=c.child;j!==null;)w|=j.lanes|j.childLanes,k|=j.subtreeFlags,k|=j.flags,j.return=c,j=j.sibling;return c.subtreeFlags|=k,c.childLanes=w,p}function HNe(c,p,w){var k=p.pendingProps;switch(L8(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(p),null;case 1:return Wa(p.type)&&JO(),Ho(p),null;case 3:return k=p.stateNode,B_(),Ci(Ga),Ci(Vo),Y8(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(c===null||c.child===null)&&(i3(p)?p.flags|=4:c===null||c.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,lc!==null&&(SH(lc),lc=null))),pH(c,p),Ho(p),null;case 5:X8(p);var j=Wv(rP.current);if(w=p.type,c!==null&&p.stateNode!=null)mve(c,p,w,k,j),c.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!k){if(p.stateNode===null)throw Error(d(166));return Ho(p),null}if(c=Wv(yd.current),i3(p)){k=p.stateNode,w=p.type;var K=p.memoizedProps;switch(k[vd]=p,k[QC]=K,c=(p.mode&1)!==0,w){case"dialog":Ei("cancel",k),Ei("close",k);break;case"iframe":case"object":case"embed":Ei("load",k);break;case"video":case"audio":for(j=0;j<qC.length;j++)Ei(qC[j],k);break;case"source":Ei("error",k);break;case"img":case"image":case"link":Ei("error",k),Ei("load",k);break;case"details":Ei("toggle",k);break;case"input":pt(k,K),Ei("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!K.multiple},Ei("invalid",k);break;case"textarea":Tt(k,K),Ei("invalid",k)}b_(w,K),j=null;for(var ae in K)if(K.hasOwnProperty(ae)){var ke=K[ae];ae==="children"?typeof ke=="string"?k.textContent!==ke&&(K.suppressHydrationWarning!==!0&&YO(k.textContent,ke,c),j=["children",ke]):typeof ke=="number"&&k.textContent!==""+ke&&(K.suppressHydrationWarning!==!0&&YO(k.textContent,ke,c),j=["children",""+ke]):g.hasOwnProperty(ae)&&ke!=null&&ae==="onScroll"&&Ei("scroll",k)}switch(w){case"input":On(k),$e(k,K,!0);break;case"textarea":On(k),In(k);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(k.onclick=ZO)}k=j,p.updateQueue=k,k!==null&&(p.flags|=4)}else{ae=j.nodeType===9?j:j.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Or(w)),c==="http://www.w3.org/1999/xhtml"?w==="script"?(c=ae.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof k.is=="string"?c=ae.createElement(w,{is:k.is}):(c=ae.createElement(w),w==="select"&&(ae=c,k.multiple?ae.multiple=!0:k.size&&(ae.size=k.size))):c=ae.createElementNS(c,w),c[vd]=p,c[QC]=k,fve(c,p,!1,!1),p.stateNode=c;e:{switch(ae=AC(w,k),w){case"dialog":Ei("cancel",c),Ei("close",c),j=k;break;case"iframe":case"object":case"embed":Ei("load",c),j=k;break;case"video":case"audio":for(j=0;j<qC.length;j++)Ei(qC[j],c);j=k;break;case"source":Ei("error",c),j=k;break;case"img":case"image":case"link":Ei("error",c),Ei("load",c),j=k;break;case"details":Ei("toggle",c),j=k;break;case"input":pt(c,k),j=ft(c,k),Ei("invalid",c);break;case"option":j=k;break;case"select":c._wrapperState={wasMultiple:!!k.multiple},j=he({},k,{value:void 0}),Ei("invalid",c);break;case"textarea":Tt(c,k),j=Ft(c,k),Ei("invalid",c);break;default:j=k}b_(w,j),ke=j;for(K in ke)if(ke.hasOwnProperty(K)){var Ue=ke[K];K==="style"?y_(c,Ue):K==="dangerouslySetInnerHTML"?(Ue=Ue?Ue.__html:void 0,Ue!=null&&Bf(c,Ue)):K==="children"?typeof Ue=="string"?(w!=="textarea"||Ue!=="")&&zo(c,Ue):typeof Ue=="number"&&zo(c,""+Ue):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(g.hasOwnProperty(K)?Ue!=null&&K==="onScroll"&&Ei("scroll",c):Ue!=null&&ie(c,K,Ue,ae))}switch(w){case"input":On(c),$e(c,k,!1);break;case"textarea":On(c),In(c);break;case"option":k.value!=null&&c.setAttribute("value",""+qt(k.value));break;case"select":c.multiple=!!k.multiple,K=k.value,K!=null?tt(c,!!k.multiple,K,!1):k.defaultValue!=null&&tt(c,!!k.multiple,k.defaultValue,!0);break;default:typeof j.onClick=="function"&&(c.onclick=ZO)}switch(w){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Ho(p),null;case 6:if(c&&p.stateNode!=null)gve(c,p,c.memoizedProps,k);else{if(typeof k!="string"&&p.stateNode===null)throw Error(d(166));if(w=Wv(rP.current),Wv(yd.current),i3(p)){if(k=p.stateNode,w=p.memoizedProps,k[vd]=p,(K=k.nodeValue!==w)&&(c=fl,c!==null))switch(c.tag){case 3:YO(k.nodeValue,w,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&YO(k.nodeValue,w,(c.mode&1)!==0)}K&&(p.flags|=4)}else k=(w.nodeType===9?w:w.ownerDocument).createTextNode(k),k[vd]=p,p.stateNode=k}return Ho(p),null;case 13:if(Ci(Vi),k=p.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Ri&&ml!==null&&p.mode&1&&!(p.flags&128))yge(),O_(),p.flags|=98560,K=!1;else if(K=i3(p),k!==null&&k.dehydrated!==null){if(c===null){if(!K)throw Error(d(318));if(K=p.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(d(317));K[vd]=p}else O_(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;Ho(p),K=!1}else lc!==null&&(SH(lc),lc=null),K=!0;if(!K)return p.flags&65536?p:null}return p.flags&128?(p.lanes=w,p):(k=k!==null,k!==(c!==null&&c.memoizedState!==null)&&k&&(p.child.flags|=8192,p.mode&1&&(c===null||Vi.current&1?Bs===0&&(Bs=3):PH())),p.updateQueue!==null&&(p.flags|=4),Ho(p),null);case 4:return B_(),pH(c,p),c===null&&YC(p.stateNode.containerInfo),Ho(p),null;case 10:return V8(p.type._context),Ho(p),null;case 17:return Wa(p.type)&&JO(),Ho(p),null;case 19:if(Ci(Vi),K=p.memoizedState,K===null)return Ho(p),null;if(k=(p.flags&128)!==0,ae=K.rendering,ae===null)if(k)lP(K,!1);else{if(Bs!==0||c!==null&&c.flags&128)for(c=p.child;c!==null;){if(ae=d3(c),ae!==null){for(p.flags|=128,lP(K,!1),k=ae.updateQueue,k!==null&&(p.updateQueue=k,p.flags|=4),p.subtreeFlags=0,k=w,w=p.child;w!==null;)K=w,c=k,K.flags&=14680066,ae=K.alternate,ae===null?(K.childLanes=0,K.lanes=c,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=ae.childLanes,K.lanes=ae.lanes,K.child=ae.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=ae.memoizedProps,K.memoizedState=ae.memoizedState,K.updateQueue=ae.updateQueue,K.type=ae.type,c=ae.dependencies,K.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),w=w.sibling;return mi(Vi,Vi.current&1|2),p.child}c=c.sibling}K.tail!==null&&ms()>j_&&(p.flags|=128,k=!0,lP(K,!1),p.lanes=4194304)}else{if(!k)if(c=d3(ae),c!==null){if(p.flags|=128,k=!0,w=c.updateQueue,w!==null&&(p.updateQueue=w,p.flags|=4),lP(K,!0),K.tail===null&&K.tailMode==="hidden"&&!ae.alternate&&!Ri)return Ho(p),null}else 2*ms()-K.renderingStartTime>j_&&w!==1073741824&&(p.flags|=128,k=!0,lP(K,!1),p.lanes=4194304);K.isBackwards?(ae.sibling=p.child,p.child=ae):(w=K.last,w!==null?w.sibling=ae:p.child=ae,K.last=ae)}return K.tail!==null?(p=K.tail,K.rendering=p,K.tail=p.sibling,K.renderingStartTime=ms(),p.sibling=null,w=Vi.current,mi(Vi,k?w&1|2:w&1),p):(Ho(p),null);case 22:case 23:return CH(),k=p.memoizedState!==null,c!==null&&c.memoizedState!==null!==k&&(p.flags|=8192),k&&p.mode&1?gl&1073741824&&(Ho(p),p.subtreeFlags&6&&(p.flags|=8192)):Ho(p),null;case 24:return null;case 25:return null}throw Error(d(156,p.tag))}function GNe(c,p){switch(L8(p),p.tag){case 1:return Wa(p.type)&&JO(),c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 3:return B_(),Ci(Ga),Ci(Vo),Y8(),c=p.flags,c&65536&&!(c&128)?(p.flags=c&-65537|128,p):null;case 5:return X8(p),null;case 13:if(Ci(Vi),c=p.memoizedState,c!==null&&c.dehydrated!==null){if(p.alternate===null)throw Error(d(340));O_()}return c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 19:return Ci(Vi),null;case 4:return B_(),null;case 10:return V8(p.type._context),null;case 22:case 23:return CH(),null;case 24:return null;default:return null}}var b3=!1,Go=!1,WNe=typeof WeakSet=="function"?WeakSet:Set,pn=null;function z_(c,p){var w=c.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(k){ts(c,p,k)}else w.current=null}function vve(c,p,w){try{w()}catch(k){ts(c,p,k)}}var yve=!1;function $Ne(c,p){if(P8=NO,c=$me(),_8(c)){if("selectionStart"in c)var w={start:c.selectionStart,end:c.selectionEnd};else e:{w=(w=c.ownerDocument)&&w.defaultView||window;var k=w.getSelection&&w.getSelection();if(k&&k.rangeCount!==0){w=k.anchorNode;var j=k.anchorOffset,K=k.focusNode;k=k.focusOffset;try{w.nodeType,K.nodeType}catch{w=null;break e}var ae=0,ke=-1,Ue=-1,vt=0,Ut=0,Ht=c,Bt=null;t:for(;;){for(var on;Ht!==w||j!==0&&Ht.nodeType!==3||(ke=ae+j),Ht!==K||k!==0&&Ht.nodeType!==3||(Ue=ae+k),Ht.nodeType===3&&(ae+=Ht.nodeValue.length),(on=Ht.firstChild)!==null;)Bt=Ht,Ht=on;for(;;){if(Ht===c)break t;if(Bt===w&&++vt===j&&(ke=ae),Bt===K&&++Ut===k&&(Ue=ae),(on=Ht.nextSibling)!==null)break;Ht=Bt,Bt=Ht.parentNode}Ht=on}w=ke===-1||Ue===-1?null:{start:ke,end:Ue}}else w=null}w=w||{start:0,end:0}}else w=null;for(T8={focusedElem:c,selectionRange:w},NO=!1,pn=p;pn!==null;)if(p=pn,c=p.child,(p.subtreeFlags&1028)!==0&&c!==null)c.return=p,pn=c;else for(;pn!==null;){p=pn;try{var bn=p.alternate;if(p.flags&1024)switch(p.tag){case 0:case 11:case 15:break;case 1:if(bn!==null){var Cn=bn.memoizedProps,gs=bn.memoizedState,nt=p.stateNode,He=nt.getSnapshotBeforeUpdate(p.elementType===p.type?Cn:uc(p.type,Cn),gs);nt.__reactInternalSnapshotBeforeUpdate=He}break;case 3:var at=p.stateNode.containerInfo;at.nodeType===1?at.textContent="":at.nodeType===9&&at.documentElement&&at.removeChild(at.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(d(163))}}catch(Wt){ts(p,p.return,Wt)}if(c=p.sibling,c!==null){c.return=p.return,pn=c;break}pn=p.return}return bn=yve,yve=!1,bn}function uP(c,p,w){var k=p.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var j=k=k.next;do{if((j.tag&c)===c){var K=j.destroy;j.destroy=void 0,K!==void 0&&vve(p,w,K)}j=j.next}while(j!==k)}}function _3(c,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&c)===c){var k=w.create;w.destroy=k()}w=w.next}while(w!==p)}}function fH(c){var p=c.ref;if(p!==null){var w=c.stateNode;switch(c.tag){case 5:c=w;break;default:c=w}typeof p=="function"?p(c):p.current=c}}function bve(c){var p=c.alternate;p!==null&&(c.alternate=null,bve(p)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(p=c.stateNode,p!==null&&(delete p[vd],delete p[QC],delete p[I8],delete p[MNe],delete p[kNe])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function _ve(c){return c.tag===5||c.tag===3||c.tag===4}function wve(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||_ve(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function mH(c,p,w){var k=c.tag;if(k===5||k===6)c=c.stateNode,p?w.nodeType===8?w.parentNode.insertBefore(c,p):w.insertBefore(c,p):(w.nodeType===8?(p=w.parentNode,p.insertBefore(c,w)):(p=w,p.appendChild(c)),w=w._reactRootContainer,w!=null||p.onclick!==null||(p.onclick=ZO));else if(k!==4&&(c=c.child,c!==null))for(mH(c,p,w),c=c.sibling;c!==null;)mH(c,p,w),c=c.sibling}function gH(c,p,w){var k=c.tag;if(k===5||k===6)c=c.stateNode,p?w.insertBefore(c,p):w.appendChild(c);else if(k!==4&&(c=c.child,c!==null))for(gH(c,p,w),c=c.sibling;c!==null;)gH(c,p,w),c=c.sibling}var xo=null,cc=!1;function Zf(c,p,w){for(w=w.child;w!==null;)xve(c,p,w),w=w.sibling}function xve(c,p,w){if(gd&&typeof gd.onCommitFiberUnmount=="function")try{gd.onCommitFiberUnmount(AO,w)}catch{}switch(w.tag){case 5:Go||z_(w,p);case 6:var k=xo,j=cc;xo=null,Zf(c,p,w),xo=k,cc=j,xo!==null&&(cc?(c=xo,w=w.stateNode,c.nodeType===8?c.parentNode.removeChild(w):c.removeChild(w)):xo.removeChild(w.stateNode));break;case 18:xo!==null&&(cc?(c=xo,w=w.stateNode,c.nodeType===8?A8(c.parentNode,w):c.nodeType===1&&A8(c,w),VC(c)):A8(xo,w.stateNode));break;case 4:k=xo,j=cc,xo=w.stateNode.containerInfo,cc=!0,Zf(c,p,w),xo=k,cc=j;break;case 0:case 11:case 14:case 15:if(!Go&&(k=w.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){j=k=k.next;do{var K=j,ae=K.destroy;K=K.tag,ae!==void 0&&(K&2||K&4)&&vve(w,p,ae),j=j.next}while(j!==k)}Zf(c,p,w);break;case 1:if(!Go&&(z_(w,p),k=w.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=w.memoizedProps,k.state=w.memoizedState,k.componentWillUnmount()}catch(ke){ts(w,p,ke)}Zf(c,p,w);break;case 21:Zf(c,p,w);break;case 22:w.mode&1?(Go=(k=Go)||w.memoizedState!==null,Zf(c,p,w),Go=k):Zf(c,p,w);break;default:Zf(c,p,w)}}function Sve(c){var p=c.updateQueue;if(p!==null){c.updateQueue=null;var w=c.stateNode;w===null&&(w=c.stateNode=new WNe),p.forEach(function(k){var j=tFe.bind(null,c,k);w.has(k)||(w.add(k),k.then(j,j))})}}function dc(c,p){var w=p.deletions;if(w!==null)for(var k=0;k<w.length;k++){var j=w[k];try{var K=c,ae=p,ke=ae;e:for(;ke!==null;){switch(ke.tag){case 5:xo=ke.stateNode,cc=!1;break e;case 3:xo=ke.stateNode.containerInfo,cc=!0;break e;case 4:xo=ke.stateNode.containerInfo,cc=!0;break e}ke=ke.return}if(xo===null)throw Error(d(160));xve(K,ae,j),xo=null,cc=!1;var Ue=j.alternate;Ue!==null&&(Ue.return=null),j.return=null}catch(vt){ts(j,p,vt)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)Eve(p,c),p=p.sibling}function Eve(c,p){var w=c.alternate,k=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(dc(p,c),_d(c),k&4){try{uP(3,c,c.return),_3(3,c)}catch(Cn){ts(c,c.return,Cn)}try{uP(5,c,c.return)}catch(Cn){ts(c,c.return,Cn)}}break;case 1:dc(p,c),_d(c),k&512&&w!==null&&z_(w,w.return);break;case 5:if(dc(p,c),_d(c),k&512&&w!==null&&z_(w,w.return),c.flags&32){var j=c.stateNode;try{zo(j,"")}catch(Cn){ts(c,c.return,Cn)}}if(k&4&&(j=c.stateNode,j!=null)){var K=c.memoizedProps,ae=w!==null?w.memoizedProps:K,ke=c.type,Ue=c.updateQueue;if(c.updateQueue=null,Ue!==null)try{ke==="input"&&K.type==="radio"&&K.name!=null&&Ce(j,K),AC(ke,ae);var vt=AC(ke,K);for(ae=0;ae<Ue.length;ae+=2){var Ut=Ue[ae],Ht=Ue[ae+1];Ut==="style"?y_(j,Ht):Ut==="dangerouslySetInnerHTML"?Bf(j,Ht):Ut==="children"?zo(j,Ht):ie(j,Ut,Ht,vt)}switch(ke){case"input":xe(j,K);break;case"textarea":At(j,K);break;case"select":var Bt=j._wrapperState.wasMultiple;j._wrapperState.wasMultiple=!!K.multiple;var on=K.value;on!=null?tt(j,!!K.multiple,on,!1):Bt!==!!K.multiple&&(K.defaultValue!=null?tt(j,!!K.multiple,K.defaultValue,!0):tt(j,!!K.multiple,K.multiple?[]:"",!1))}j[QC]=K}catch(Cn){ts(c,c.return,Cn)}}break;case 6:if(dc(p,c),_d(c),k&4){if(c.stateNode===null)throw Error(d(162));j=c.stateNode,K=c.memoizedProps;try{j.nodeValue=K}catch(Cn){ts(c,c.return,Cn)}}break;case 3:if(dc(p,c),_d(c),k&4&&w!==null&&w.memoizedState.isDehydrated)try{VC(p.containerInfo)}catch(Cn){ts(c,c.return,Cn)}break;case 4:dc(p,c),_d(c);break;case 13:dc(p,c),_d(c),j=c.child,j.flags&8192&&(K=j.memoizedState!==null,j.stateNode.isHidden=K,!K||j.alternate!==null&&j.alternate.memoizedState!==null||(bH=ms())),k&4&&Sve(c);break;case 22:if(Ut=w!==null&&w.memoizedState!==null,c.mode&1?(Go=(vt=Go)||Ut,dc(p,c),Go=vt):dc(p,c),_d(c),k&8192){if(vt=c.memoizedState!==null,(c.stateNode.isHidden=vt)&&!Ut&&c.mode&1)for(pn=c,Ut=c.child;Ut!==null;){for(Ht=pn=Ut;pn!==null;){switch(Bt=pn,on=Bt.child,Bt.tag){case 0:case 11:case 14:case 15:uP(4,Bt,Bt.return);break;case 1:z_(Bt,Bt.return);var bn=Bt.stateNode;if(typeof bn.componentWillUnmount=="function"){k=Bt,w=Bt.return;try{p=k,bn.props=p.memoizedProps,bn.state=p.memoizedState,bn.componentWillUnmount()}catch(Cn){ts(k,w,Cn)}}break;case 5:z_(Bt,Bt.return);break;case 22:if(Bt.memoizedState!==null){Tve(Ht);continue}}on!==null?(on.return=Bt,pn=on):Tve(Ht)}Ut=Ut.sibling}e:for(Ut=null,Ht=c;;){if(Ht.tag===5){if(Ut===null){Ut=Ht;try{j=Ht.stateNode,vt?(K=j.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(ke=Ht.stateNode,Ue=Ht.memoizedProps.style,ae=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null,ke.style.display=Bv("display",ae))}catch(Cn){ts(c,c.return,Cn)}}}else if(Ht.tag===6){if(Ut===null)try{Ht.stateNode.nodeValue=vt?"":Ht.memoizedProps}catch(Cn){ts(c,c.return,Cn)}}else if((Ht.tag!==22&&Ht.tag!==23||Ht.memoizedState===null||Ht===c)&&Ht.child!==null){Ht.child.return=Ht,Ht=Ht.child;continue}if(Ht===c)break e;for(;Ht.sibling===null;){if(Ht.return===null||Ht.return===c)break e;Ut===Ht&&(Ut=null),Ht=Ht.return}Ut===Ht&&(Ut=null),Ht.sibling.return=Ht.return,Ht=Ht.sibling}}break;case 19:dc(p,c),_d(c),k&4&&Sve(c);break;case 21:break;default:dc(p,c),_d(c)}}function _d(c){var p=c.flags;if(p&2){try{e:{for(var w=c.return;w!==null;){if(_ve(w)){var k=w;break e}w=w.return}throw Error(d(160))}switch(k.tag){case 5:var j=k.stateNode;k.flags&32&&(zo(j,""),k.flags&=-33);var K=wve(c);gH(c,K,j);break;case 3:case 4:var ae=k.stateNode.containerInfo,ke=wve(c);mH(c,ke,ae);break;default:throw Error(d(161))}}catch(Ue){ts(c,c.return,Ue)}c.flags&=-3}p&4096&&(c.flags&=-4097)}function KNe(c,p,w){pn=c,Cve(c)}function Cve(c,p,w){for(var k=(c.mode&1)!==0;pn!==null;){var j=pn,K=j.child;if(j.tag===22&&k){var ae=j.memoizedState!==null||b3;if(!ae){var ke=j.alternate,Ue=ke!==null&&ke.memoizedState!==null||Go;ke=b3;var vt=Go;if(b3=ae,(Go=Ue)&&!vt)for(pn=j;pn!==null;)ae=pn,Ue=ae.child,ae.tag===22&&ae.memoizedState!==null?Mve(j):Ue!==null?(Ue.return=ae,pn=Ue):Mve(j);for(;K!==null;)pn=K,Cve(K),K=K.sibling;pn=j,b3=ke,Go=vt}Pve(c)}else j.subtreeFlags&8772&&K!==null?(K.return=j,pn=K):Pve(c)}}function Pve(c){for(;pn!==null;){var p=pn;if(p.flags&8772){var w=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:Go||_3(5,p);break;case 1:var k=p.stateNode;if(p.flags&4&&!Go)if(w===null)k.componentDidMount();else{var j=p.elementType===p.type?w.memoizedProps:uc(p.type,w.memoizedProps);k.componentDidUpdate(j,w.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var K=p.updateQueue;K!==null&&xge(p,K,k);break;case 3:var ae=p.updateQueue;if(ae!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=p.child.stateNode;break;case 1:w=p.child.stateNode}xge(p,ae,w)}break;case 5:var ke=p.stateNode;if(w===null&&p.flags&4){w=ke;var Ue=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Ue.autoFocus&&w.focus();break;case"img":Ue.src&&(w.src=Ue.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var vt=p.alternate;if(vt!==null){var Ut=vt.memoizedState;if(Ut!==null){var Ht=Ut.dehydrated;Ht!==null&&VC(Ht)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(d(163))}Go||p.flags&512&&fH(p)}catch(Bt){ts(p,p.return,Bt)}}if(p===c){pn=null;break}if(w=p.sibling,w!==null){w.return=p.return,pn=w;break}pn=p.return}}function Tve(c){for(;pn!==null;){var p=pn;if(p===c){pn=null;break}var w=p.sibling;if(w!==null){w.return=p.return,pn=w;break}pn=p.return}}function Mve(c){for(;pn!==null;){var p=pn;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{_3(4,p)}catch(Ue){ts(p,w,Ue)}break;case 1:var k=p.stateNode;if(typeof k.componentDidMount=="function"){var j=p.return;try{k.componentDidMount()}catch(Ue){ts(p,j,Ue)}}var K=p.return;try{fH(p)}catch(Ue){ts(p,K,Ue)}break;case 5:var ae=p.return;try{fH(p)}catch(Ue){ts(p,ae,Ue)}}}catch(Ue){ts(p,p.return,Ue)}if(p===c){pn=null;break}var ke=p.sibling;if(ke!==null){ke.return=p.return,pn=ke;break}pn=p.return}}var XNe=Math.ceil,w3=re.ReactCurrentDispatcher,vH=re.ReactCurrentOwner,ou=re.ReactCurrentBatchConfig,Lr=0,Js=null,Ts=null,So=0,gl=0,V_=$f(0),Bs=0,cP=null,Kv=0,x3=0,yH=0,dP=null,Ka=null,bH=0,j_=1/0,Vh=null,S3=!1,_H=null,Qf=null,E3=!1,Jf=null,C3=0,hP=0,wH=null,P3=-1,T3=0;function ya(){return Lr&6?ms():P3!==-1?P3:P3=ms()}function em(c){return c.mode&1?Lr&2&&So!==0?So&-So:INe.transition!==null?(T3===0&&(T3=yme()),T3):(c=ti,c!==0||(c=window.event,c=c===void 0?16:Tme(c.type)),c):1}function hc(c,p,w,k){if(50<hP)throw hP=0,wH=null,Error(d(185));NC(c,w,k),(!(Lr&2)||c!==Js)&&(c===Js&&(!(Lr&2)&&(x3|=w),Bs===4&&tm(c,So)),Xa(c,k),w===1&&Lr===0&&!(p.mode&1)&&(j_=ms()+500,t3&&Xf()))}function Xa(c,p){var w=c.callbackNode;DLe(c,p);var k=DO(c,c===Js?So:0);if(k===0)w!==null&&mme(w),c.callbackNode=null,c.callbackPriority=0;else if(p=k&-k,c.callbackPriority!==p){if(w!=null&&mme(w),p===1)c.tag===0?ANe(Ave.bind(null,c)):pge(Ave.bind(null,c)),PNe(function(){!(Lr&6)&&Xf()}),w=null;else{switch(bme(k)){case 1:w=r8;break;case 4:w=gme;break;case 16:w=kO;break;case 536870912:w=vme;break;default:w=kO}w=Bve(w,kve.bind(null,c))}c.callbackPriority=p,c.callbackNode=w}}function kve(c,p){if(P3=-1,T3=0,Lr&6)throw Error(d(327));var w=c.callbackNode;if(H_()&&c.callbackNode!==w)return null;var k=DO(c,c===Js?So:0);if(k===0)return null;if(k&30||k&c.expiredLanes||p)p=M3(c,k);else{p=k;var j=Lr;Lr|=2;var K=Rve();(Js!==c||So!==p)&&(Vh=null,j_=ms()+500,qv(c,p));do try{ZNe();break}catch(ke){Ive(c,ke)}while(1);z8(),w3.current=K,Lr=j,Ts!==null?p=0:(Js=null,So=0,p=Bs)}if(p!==0){if(p===2&&(j=i8(c),j!==0&&(k=j,p=xH(c,j))),p===1)throw w=cP,qv(c,0),tm(c,k),Xa(c,ms()),w;if(p===6)tm(c,k);else{if(j=c.current.alternate,!(k&30)&&!qNe(j)&&(p=M3(c,k),p===2&&(K=i8(c),K!==0&&(k=K,p=xH(c,K))),p===1))throw w=cP,qv(c,0),tm(c,k),Xa(c,ms()),w;switch(c.finishedWork=j,c.finishedLanes=k,p){case 0:case 1:throw Error(d(345));case 2:Yv(c,Ka,Vh);break;case 3:if(tm(c,k),(k&130023424)===k&&(p=bH+500-ms(),10<p)){if(DO(c,0)!==0)break;if(j=c.suspendedLanes,(j&k)!==k){ya(),c.pingedLanes|=c.suspendedLanes&j;break}c.timeoutHandle=k8(Yv.bind(null,c,Ka,Vh),p);break}Yv(c,Ka,Vh);break;case 4:if(tm(c,k),(k&4194240)===k)break;for(p=c.eventTimes,j=-1;0<k;){var ae=31-oc(k);K=1<<ae,ae=p[ae],ae>j&&(j=ae),k&=~K}if(k=j,k=ms()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*XNe(k/1960))-k,10<k){c.timeoutHandle=k8(Yv.bind(null,c,Ka,Vh),k);break}Yv(c,Ka,Vh);break;case 5:Yv(c,Ka,Vh);break;default:throw Error(d(329))}}}return Xa(c,ms()),c.callbackNode===w?kve.bind(null,c):null}function xH(c,p){var w=dP;return c.current.memoizedState.isDehydrated&&(qv(c,p).flags|=256),c=M3(c,p),c!==2&&(p=Ka,Ka=w,p!==null&&SH(p)),c}function SH(c){Ka===null?Ka=c:Ka.push.apply(Ka,c)}function qNe(c){for(var p=c;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var k=0;k<w.length;k++){var j=w[k],K=j.getSnapshot;j=j.value;try{if(!ac(K(),j))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function tm(c,p){for(p&=~yH,p&=~x3,c.suspendedLanes|=p,c.pingedLanes&=~p,c=c.expirationTimes;0<p;){var w=31-oc(p),k=1<<w;c[w]=-1,p&=~k}}function Ave(c){if(Lr&6)throw Error(d(327));H_();var p=DO(c,0);if(!(p&1))return Xa(c,ms()),null;var w=M3(c,p);if(c.tag!==0&&w===2){var k=i8(c);k!==0&&(p=k,w=xH(c,k))}if(w===1)throw w=cP,qv(c,0),tm(c,p),Xa(c,ms()),w;if(w===6)throw Error(d(345));return c.finishedWork=c.current.alternate,c.finishedLanes=p,Yv(c,Ka,Vh),Xa(c,ms()),null}function EH(c,p){var w=Lr;Lr|=1;try{return c(p)}finally{Lr=w,Lr===0&&(j_=ms()+500,t3&&Xf())}}function Xv(c){Jf!==null&&Jf.tag===0&&!(Lr&6)&&H_();var p=Lr;Lr|=1;var w=ou.transition,k=ti;try{if(ou.transition=null,ti=1,c)return c()}finally{ti=k,ou.transition=w,Lr=p,!(Lr&6)&&Xf()}}function CH(){gl=V_.current,Ci(V_)}function qv(c,p){c.finishedWork=null,c.finishedLanes=0;var w=c.timeoutHandle;if(w!==-1&&(c.timeoutHandle=-1,CNe(w)),Ts!==null)for(w=Ts.return;w!==null;){var k=w;switch(L8(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&JO();break;case 3:B_(),Ci(Ga),Ci(Vo),Y8();break;case 5:X8(k);break;case 4:B_();break;case 13:Ci(Vi);break;case 19:Ci(Vi);break;case 10:V8(k.type._context);break;case 22:case 23:CH()}w=w.return}if(Js=c,Ts=c=nm(c.current,null),So=gl=p,Bs=0,cP=null,yH=x3=Kv=0,Ka=dP=null,Gv!==null){for(p=0;p<Gv.length;p++)if(w=Gv[p],k=w.interleaved,k!==null){w.interleaved=null;var j=k.next,K=w.pending;if(K!==null){var ae=K.next;K.next=j,k.next=ae}w.pending=k}Gv=null}return c}function Ive(c,p){do{var w=Ts;try{if(z8(),h3.current=g3,p3){for(var k=ji.memoizedState;k!==null;){var j=k.queue;j!==null&&(j.pending=null),k=k.next}p3=!1}if($v=0,Qs=Fs=ji=null,iP=!1,sP=0,vH.current=null,w===null||w.return===null){Bs=1,cP=p,Ts=null;break}e:{var K=c,ae=w.return,ke=w,Ue=p;if(p=So,ke.flags|=32768,Ue!==null&&typeof Ue=="object"&&typeof Ue.then=="function"){var vt=Ue,Ut=ke,Ht=Ut.tag;if(!(Ut.mode&1)&&(Ht===0||Ht===11||Ht===15)){var Bt=Ut.alternate;Bt?(Ut.updateQueue=Bt.updateQueue,Ut.memoizedState=Bt.memoizedState,Ut.lanes=Bt.lanes):(Ut.updateQueue=null,Ut.memoizedState=null)}var on=tve(ae);if(on!==null){on.flags&=-257,nve(on,ae,ke,K,p),on.mode&1&&eve(K,vt,p),p=on,Ue=vt;var bn=p.updateQueue;if(bn===null){var Cn=new Set;Cn.add(Ue),p.updateQueue=Cn}else bn.add(Ue);break e}else{if(!(p&1)){eve(K,vt,p),PH();break e}Ue=Error(d(426))}}else if(Ri&&ke.mode&1){var gs=tve(ae);if(gs!==null){!(gs.flags&65536)&&(gs.flags|=256),nve(gs,ae,ke,K,p),B8(U_(Ue,ke));break e}}K=Ue=U_(Ue,ke),Bs!==4&&(Bs=2),dP===null?dP=[K]:dP.push(K),K=ae;do{switch(K.tag){case 3:K.flags|=65536,p&=-p,K.lanes|=p;var nt=Qge(K,Ue,p);wge(K,nt);break e;case 1:ke=Ue;var He=K.type,at=K.stateNode;if(!(K.flags&128)&&(typeof He.getDerivedStateFromError=="function"||at!==null&&typeof at.componentDidCatch=="function"&&(Qf===null||!Qf.has(at)))){K.flags|=65536,p&=-p,K.lanes|=p;var Wt=Jge(K,ke,p);wge(K,Wt);break e}}K=K.return}while(K!==null)}Ove(w)}catch(kn){p=kn,Ts===w&&w!==null&&(Ts=w=w.return);continue}break}while(1)}function Rve(){var c=w3.current;return w3.current=g3,c===null?g3:c}function PH(){(Bs===0||Bs===3||Bs===2)&&(Bs=4),Js===null||!(Kv&268435455)&&!(x3&268435455)||tm(Js,So)}function M3(c,p){var w=Lr;Lr|=2;var k=Rve();(Js!==c||So!==p)&&(Vh=null,qv(c,p));do try{YNe();break}catch(j){Ive(c,j)}while(1);if(z8(),Lr=w,w3.current=k,Ts!==null)throw Error(d(261));return Js=null,So=0,Bs}function YNe(){for(;Ts!==null;)Dve(Ts)}function ZNe(){for(;Ts!==null&&!ELe();)Dve(Ts)}function Dve(c){var p=Fve(c.alternate,c,gl);c.memoizedProps=c.pendingProps,p===null?Ove(c):Ts=p,vH.current=null}function Ove(c){var p=c;do{var w=p.alternate;if(c=p.return,p.flags&32768){if(w=GNe(w,p),w!==null){w.flags&=32767,Ts=w;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Bs=6,Ts=null;return}}else if(w=HNe(w,p,gl),w!==null){Ts=w;return}if(p=p.sibling,p!==null){Ts=p;return}Ts=p=c}while(p!==null);Bs===0&&(Bs=5)}function Yv(c,p,w){var k=ti,j=ou.transition;try{ou.transition=null,ti=1,QNe(c,p,w,k)}finally{ou.transition=j,ti=k}return null}function QNe(c,p,w,k){do H_();while(Jf!==null);if(Lr&6)throw Error(d(327));w=c.finishedWork;var j=c.finishedLanes;if(w===null)return null;if(c.finishedWork=null,c.finishedLanes=0,w===c.current)throw Error(d(177));c.callbackNode=null,c.callbackPriority=0;var K=w.lanes|w.childLanes;if(OLe(c,K),c===Js&&(Ts=Js=null,So=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||E3||(E3=!0,Bve(kO,function(){return H_(),null})),K=(w.flags&15990)!==0,w.subtreeFlags&15990||K){K=ou.transition,ou.transition=null;var ae=ti;ti=1;var ke=Lr;Lr|=4,vH.current=null,$Ne(c,w),Eve(w,c),_Ne(T8),NO=!!P8,T8=P8=null,c.current=w,KNe(w),CLe(),Lr=ke,ti=ae,ou.transition=K}else c.current=w;if(E3&&(E3=!1,Jf=c,C3=j),K=c.pendingLanes,K===0&&(Qf=null),MLe(w.stateNode),Xa(c,ms()),p!==null)for(k=c.onRecoverableError,w=0;w<p.length;w++)j=p[w],k(j.value,{componentStack:j.stack,digest:j.digest});if(S3)throw S3=!1,c=_H,_H=null,c;return C3&1&&c.tag!==0&&H_(),K=c.pendingLanes,K&1?c===wH?hP++:(hP=0,wH=c):hP=0,Xf(),null}function H_(){if(Jf!==null){var c=bme(C3),p=ou.transition,w=ti;try{if(ou.transition=null,ti=16>c?16:c,Jf===null)var k=!1;else{if(c=Jf,Jf=null,C3=0,Lr&6)throw Error(d(331));var j=Lr;for(Lr|=4,pn=c.current;pn!==null;){var K=pn,ae=K.child;if(pn.flags&16){var ke=K.deletions;if(ke!==null){for(var Ue=0;Ue<ke.length;Ue++){var vt=ke[Ue];for(pn=vt;pn!==null;){var Ut=pn;switch(Ut.tag){case 0:case 11:case 15:uP(8,Ut,K)}var Ht=Ut.child;if(Ht!==null)Ht.return=Ut,pn=Ht;else for(;pn!==null;){Ut=pn;var Bt=Ut.sibling,on=Ut.return;if(bve(Ut),Ut===vt){pn=null;break}if(Bt!==null){Bt.return=on,pn=Bt;break}pn=on}}}var bn=K.alternate;if(bn!==null){var Cn=bn.child;if(Cn!==null){bn.child=null;do{var gs=Cn.sibling;Cn.sibling=null,Cn=gs}while(Cn!==null)}}pn=K}}if(K.subtreeFlags&2064&&ae!==null)ae.return=K,pn=ae;else e:for(;pn!==null;){if(K=pn,K.flags&2048)switch(K.tag){case 0:case 11:case 15:uP(9,K,K.return)}var nt=K.sibling;if(nt!==null){nt.return=K.return,pn=nt;break e}pn=K.return}}var He=c.current;for(pn=He;pn!==null;){ae=pn;var at=ae.child;if(ae.subtreeFlags&2064&&at!==null)at.return=ae,pn=at;else e:for(ae=He;pn!==null;){if(ke=pn,ke.flags&2048)try{switch(ke.tag){case 0:case 11:case 15:_3(9,ke)}}catch(kn){ts(ke,ke.return,kn)}if(ke===ae){pn=null;break e}var Wt=ke.sibling;if(Wt!==null){Wt.return=ke.return,pn=Wt;break e}pn=ke.return}}if(Lr=j,Xf(),gd&&typeof gd.onPostCommitFiberRoot=="function")try{gd.onPostCommitFiberRoot(AO,c)}catch{}k=!0}return k}finally{ti=w,ou.transition=p}}return!1}function Lve(c,p,w){p=U_(w,p),p=Qge(c,p,1),c=Yf(c,p,1),p=ya(),c!==null&&(NC(c,1,p),Xa(c,p))}function ts(c,p,w){if(c.tag===3)Lve(c,c,w);else for(;p!==null;){if(p.tag===3){Lve(p,c,w);break}else if(p.tag===1){var k=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(Qf===null||!Qf.has(k))){c=U_(w,c),c=Jge(p,c,1),p=Yf(p,c,1),c=ya(),p!==null&&(NC(p,1,c),Xa(p,c));break}}p=p.return}}function JNe(c,p,w){var k=c.pingCache;k!==null&&k.delete(p),p=ya(),c.pingedLanes|=c.suspendedLanes&w,Js===c&&(So&w)===w&&(Bs===4||Bs===3&&(So&130023424)===So&&500>ms()-bH?qv(c,0):yH|=w),Xa(c,p)}function Nve(c,p){p===0&&(c.mode&1?(p=RO,RO<<=1,!(RO&130023424)&&(RO=4194304)):p=1);var w=ya();c=Bh(c,p),c!==null&&(NC(c,p,w),Xa(c,w))}function eFe(c){var p=c.memoizedState,w=0;p!==null&&(w=p.retryLane),Nve(c,w)}function tFe(c,p){var w=0;switch(c.tag){case 13:var k=c.stateNode,j=c.memoizedState;j!==null&&(w=j.retryLane);break;case 19:k=c.stateNode;break;default:throw Error(d(314))}k!==null&&k.delete(p),Nve(c,w)}var Fve;Fve=function(c,p,w){if(c!==null)if(c.memoizedProps!==p.pendingProps||Ga.current)$a=!0;else{if(!(c.lanes&w)&&!(p.flags&128))return $a=!1,jNe(c,p,w);$a=!!(c.flags&131072)}else $a=!1,Ri&&p.flags&1048576&&fge(p,r3,p.index);switch(p.lanes=0,p.tag){case 2:var k=p.type;y3(c,p),c=p.pendingProps;var j=I_(p,Vo.current);N_(p,w),j=J8(null,p,k,c,j,w);var K=eH();return p.flags|=1,typeof j=="object"&&j!==null&&typeof j.render=="function"&&j.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Wa(k)?(K=!0,e3(p)):K=!1,p.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,G8(p),j.updater=u3,p.stateNode=j,j._reactInternals=p,$8(p,k,c,w),p=lH(null,p,k,!0,K,w)):(p.tag=0,Ri&&K&&O8(p),va(null,p,j,w),p=p.child),p;case 16:k=p.elementType;e:{switch(y3(c,p),c=p.pendingProps,j=k._init,k=j(k._payload),p.type=k,j=p.tag=rFe(k),c=uc(k,c),j){case 0:p=aH(null,p,k,c,w);break e;case 1:p=lve(null,p,k,c,w);break e;case 11:p=rve(null,p,k,c,w);break e;case 14:p=ive(null,p,k,uc(k.type,c),w);break e}throw Error(d(306,k,""))}return p;case 0:return k=p.type,j=p.pendingProps,j=p.elementType===k?j:uc(k,j),aH(c,p,k,j,w);case 1:return k=p.type,j=p.pendingProps,j=p.elementType===k?j:uc(k,j),lve(c,p,k,j,w);case 3:e:{if(uve(p),c===null)throw Error(d(387));k=p.pendingProps,K=p.memoizedState,j=K.element,_ge(c,p),l3(p,k,null,w);var ae=p.memoizedState;if(k=ae.element,K.isDehydrated)if(K={element:k,isDehydrated:!1,cache:ae.cache,pendingSuspenseBoundaries:ae.pendingSuspenseBoundaries,transitions:ae.transitions},p.updateQueue.baseState=K,p.memoizedState=K,p.flags&256){j=U_(Error(d(423)),p),p=cve(c,p,k,w,j);break e}else if(k!==j){j=U_(Error(d(424)),p),p=cve(c,p,k,w,j);break e}else for(ml=Wf(p.stateNode.containerInfo.firstChild),fl=p,Ri=!0,lc=null,w=kge(p,null,k,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(O_(),k===j){p=zh(c,p,w);break e}va(c,p,k,w)}p=p.child}return p;case 5:return Age(p),c===null&&F8(p),k=p.type,j=p.pendingProps,K=c!==null?c.memoizedProps:null,ae=j.children,M8(k,j)?ae=null:K!==null&&M8(k,K)&&(p.flags|=32),ave(c,p),va(c,p,ae,w),p.child;case 6:return c===null&&F8(p),null;case 13:return dve(c,p,w);case 4:return K8(p,p.stateNode.containerInfo),k=p.pendingProps,c===null?p.child=F_(p,null,k,w):va(c,p,k,w),p.child;case 11:return k=p.type,j=p.pendingProps,j=p.elementType===k?j:uc(k,j),rve(c,p,k,j,w);case 7:return va(c,p,p.pendingProps,w),p.child;case 8:return va(c,p,p.pendingProps.children,w),p.child;case 12:return va(c,p,p.pendingProps.children,w),p.child;case 10:e:{if(k=p.type._context,j=p.pendingProps,K=p.memoizedProps,ae=j.value,mi(s3,k._currentValue),k._currentValue=ae,K!==null)if(ac(K.value,ae)){if(K.children===j.children&&!Ga.current){p=zh(c,p,w);break e}}else for(K=p.child,K!==null&&(K.return=p);K!==null;){var ke=K.dependencies;if(ke!==null){ae=K.child;for(var Ue=ke.firstContext;Ue!==null;){if(Ue.context===k){if(K.tag===1){Ue=Uh(-1,w&-w),Ue.tag=2;var vt=K.updateQueue;if(vt!==null){vt=vt.shared;var Ut=vt.pending;Ut===null?Ue.next=Ue:(Ue.next=Ut.next,Ut.next=Ue),vt.pending=Ue}}K.lanes|=w,Ue=K.alternate,Ue!==null&&(Ue.lanes|=w),j8(K.return,w,p),ke.lanes|=w;break}Ue=Ue.next}}else if(K.tag===10)ae=K.type===p.type?null:K.child;else if(K.tag===18){if(ae=K.return,ae===null)throw Error(d(341));ae.lanes|=w,ke=ae.alternate,ke!==null&&(ke.lanes|=w),j8(ae,w,p),ae=K.sibling}else ae=K.child;if(ae!==null)ae.return=K;else for(ae=K;ae!==null;){if(ae===p){ae=null;break}if(K=ae.sibling,K!==null){K.return=ae.return,ae=K;break}ae=ae.return}K=ae}va(c,p,j.children,w),p=p.child}return p;case 9:return j=p.type,k=p.pendingProps.children,N_(p,w),j=iu(j),k=k(j),p.flags|=1,va(c,p,k,w),p.child;case 14:return k=p.type,j=uc(k,p.pendingProps),j=uc(k.type,j),ive(c,p,k,j,w);case 15:return sve(c,p,p.type,p.pendingProps,w);case 17:return k=p.type,j=p.pendingProps,j=p.elementType===k?j:uc(k,j),y3(c,p),p.tag=1,Wa(k)?(c=!0,e3(p)):c=!1,N_(p,w),Cge(p,k,j),$8(p,k,j,w),lH(null,p,k,!0,c,w);case 19:return pve(c,p,w);case 22:return ove(c,p,w)}throw Error(d(156,p.tag))};function Bve(c,p){return fme(c,p)}function nFe(c,p,w,k){this.tag=c,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function au(c,p,w,k){return new nFe(c,p,w,k)}function TH(c){return c=c.prototype,!(!c||!c.isReactComponent)}function rFe(c){if(typeof c=="function")return TH(c)?1:0;if(c!=null){if(c=c.$$typeof,c===Oe)return 11;if(c===Rt)return 14}return 2}function nm(c,p){var w=c.alternate;return w===null?(w=au(c.tag,p,c.key,c.mode),w.elementType=c.elementType,w.type=c.type,w.stateNode=c.stateNode,w.alternate=c,c.alternate=w):(w.pendingProps=p,w.type=c.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=c.flags&14680064,w.childLanes=c.childLanes,w.lanes=c.lanes,w.child=c.child,w.memoizedProps=c.memoizedProps,w.memoizedState=c.memoizedState,w.updateQueue=c.updateQueue,p=c.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=c.sibling,w.index=c.index,w.ref=c.ref,w}function k3(c,p,w,k,j,K){var ae=2;if(k=c,typeof c=="function")TH(c)&&(ae=1);else if(typeof c=="string")ae=5;else e:switch(c){case ye:return Zv(w.children,j,K,p);case we:ae=8,j|=8;break;case Le:return c=au(12,w,p,j|2),c.elementType=Le,c.lanes=K,c;case Q:return c=au(13,w,p,j),c.elementType=Q,c.lanes=K,c;case je:return c=au(19,w,p,j),c.elementType=je,c.lanes=K,c;case Re:return A3(w,j,K,p);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case it:ae=10;break e;case de:ae=9;break e;case Oe:ae=11;break e;case Rt:ae=14;break e;case Ie:ae=16,k=null;break e}throw Error(d(130,c==null?c:typeof c,""))}return p=au(ae,w,p,j),p.elementType=c,p.type=k,p.lanes=K,p}function Zv(c,p,w,k){return c=au(7,c,k,p),c.lanes=w,c}function A3(c,p,w,k){return c=au(22,c,k,p),c.elementType=Re,c.lanes=w,c.stateNode={isHidden:!1},c}function MH(c,p,w){return c=au(6,c,null,p),c.lanes=w,c}function kH(c,p,w){return p=au(4,c.children!==null?c.children:[],c.key,p),p.lanes=w,p.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},p}function iFe(c,p,w,k,j){this.tag=p,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=s8(0),this.expirationTimes=s8(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=s8(0),this.identifierPrefix=k,this.onRecoverableError=j,this.mutableSourceEagerHydrationData=null}function AH(c,p,w,k,j,K,ae,ke,Ue){return c=new iFe(c,p,w,ke,Ue),p===1?(p=1,K===!0&&(p|=8)):p=0,K=au(3,null,null,p),c.current=K,K.stateNode=c,K.memoizedState={element:k,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},G8(K),c}function sFe(c,p,w){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pe,key:k==null?null:""+k,children:c,containerInfo:p,implementation:w}}function Uve(c){if(!c)return Kf;c=c._reactInternals;e:{if(Uv(c)!==c||c.tag!==1)throw Error(d(170));var p=c;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Wa(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(d(171))}if(c.tag===1){var w=c.type;if(Wa(w))return dge(c,w,p)}return p}function zve(c,p,w,k,j,K,ae,ke,Ue){return c=AH(w,k,!0,c,j,K,ae,ke,Ue),c.context=Uve(null),w=c.current,k=ya(),j=em(w),K=Uh(k,j),K.callback=p??null,Yf(w,K,j),c.current.lanes=j,NC(c,j,k),Xa(c,k),c}function I3(c,p,w,k){var j=p.current,K=ya(),ae=em(j);return w=Uve(w),p.context===null?p.context=w:p.pendingContext=w,p=Uh(K,ae),p.payload={element:c},k=k===void 0?null:k,k!==null&&(p.callback=k),c=Yf(j,p,ae),c!==null&&(hc(c,j,ae,K),a3(c,j,ae)),ae}function R3(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function Vve(c,p){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var w=c.retryLane;c.retryLane=w!==0&&w<p?w:p}}function IH(c,p){Vve(c,p),(c=c.alternate)&&Vve(c,p)}function oFe(){return null}var jve=typeof reportError=="function"?reportError:function(c){console.error(c)};function RH(c){this._internalRoot=c}D3.prototype.render=RH.prototype.render=function(c){var p=this._internalRoot;if(p===null)throw Error(d(409));I3(c,p,null,null)},D3.prototype.unmount=RH.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var p=c.containerInfo;Xv(function(){I3(null,c,null,null)}),p[Oh]=null}};function D3(c){this._internalRoot=c}D3.prototype.unstable_scheduleHydration=function(c){if(c){var p=xme();c={blockedOn:null,target:c,priority:p};for(var w=0;w<jf.length&&p!==0&&p<jf[w].priority;w++);jf.splice(w,0,c),w===0&&Cme(c)}};function DH(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function O3(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function Hve(){}function aFe(c,p,w,k,j){if(j){if(typeof k=="function"){var K=k;k=function(){var vt=R3(ae);K.call(vt)}}var ae=zve(p,k,c,0,null,!1,!1,"",Hve);return c._reactRootContainer=ae,c[Oh]=ae.current,YC(c.nodeType===8?c.parentNode:c),Xv(),ae}for(;j=c.lastChild;)c.removeChild(j);if(typeof k=="function"){var ke=k;k=function(){var vt=R3(Ue);ke.call(vt)}}var Ue=AH(c,0,!1,null,null,!1,!1,"",Hve);return c._reactRootContainer=Ue,c[Oh]=Ue.current,YC(c.nodeType===8?c.parentNode:c),Xv(function(){I3(p,Ue,w,k)}),Ue}function L3(c,p,w,k,j){var K=w._reactRootContainer;if(K){var ae=K;if(typeof j=="function"){var ke=j;j=function(){var Ue=R3(ae);ke.call(Ue)}}I3(p,ae,c,j)}else ae=aFe(w,p,c,j,k);return R3(ae)}_me=function(c){switch(c.tag){case 3:var p=c.stateNode;if(p.current.memoizedState.isDehydrated){var w=LC(p.pendingLanes);w!==0&&(o8(p,w|1),Xa(p,ms()),!(Lr&6)&&(j_=ms()+500,Xf()))}break;case 13:Xv(function(){var k=Bh(c,1);if(k!==null){var j=ya();hc(k,c,1,j)}}),IH(c,1)}},a8=function(c){if(c.tag===13){var p=Bh(c,134217728);if(p!==null){var w=ya();hc(p,c,134217728,w)}IH(c,134217728)}},wme=function(c){if(c.tag===13){var p=em(c),w=Bh(c,p);if(w!==null){var k=ya();hc(w,c,p,k)}IH(c,p)}},xme=function(){return ti},Sme=function(c,p){var w=ti;try{return ti=c,p()}finally{ti=w}},__=function(c,p,w){switch(p){case"input":if(xe(c,w),p=w.name,w.type==="radio"&&p!=null){for(w=c;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<w.length;p++){var k=w[p];if(k!==c&&k.form===c.form){var j=QO(k);if(!j)throw Error(d(90));Gr(k),xe(k,j)}}}break;case"textarea":At(c,w);break;case"select":p=w.value,p!=null&&tt(c,!!w.multiple,p,!1)}},ame=EH,lme=Xv;var lFe={usingClientEntryPoint:!1,Events:[JC,k_,QO,sme,ome,EH]},pP={findFiberByHostInstance:zv,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},uFe={bundleType:pP.bundleType,version:pP.version,rendererPackageName:pP.rendererPackageName,rendererConfig:pP.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:re.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=hme(c),c===null?null:c.stateNode},findFiberByHostInstance:pP.findFiberByHostInstance||oFe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(fP=__REACT_DEVTOOLS_GLOBAL_HOOK__,!fP.isDisabled&&fP.supportsFiber))try{AO=fP.inject(uFe),gd=fP}catch{}var fP;s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lFe,s.createPortal=function(c,p){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!DH(p))throw Error(d(200));return sFe(c,p,null,w)},s.createRoot=function(c,p){if(!DH(c))throw Error(d(299));var w=!1,k="",j=jve;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(k=p.identifierPrefix),p.onRecoverableError!==void 0&&(j=p.onRecoverableError)),p=AH(c,1,!1,null,null,w,!1,k,j),c[Oh]=p.current,YC(c.nodeType===8?c.parentNode:c),new RH(p)},s.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var p=c._reactInternals;if(p===void 0)throw typeof c.render=="function"?Error(d(188)):(c=Object.keys(c).join(","),Error(d(268,c)));return c=hme(p),c=c===null?null:c.stateNode,c},s.flushSync=function(c){return Xv(c)},s.hydrate=function(c,p,w){if(!O3(p))throw Error(d(200));return L3(null,c,p,!0,w)},s.hydrateRoot=function(c,p,w){if(!DH(c))throw Error(d(405));var k=w!=null&&w.hydratedSources||null,j=!1,K="",ae=jve;if(w!=null&&(w.unstable_strictMode===!0&&(j=!0),w.identifierPrefix!==void 0&&(K=w.identifierPrefix),w.onRecoverableError!==void 0&&(ae=w.onRecoverableError)),p=zve(p,null,c,1,w??null,j,!1,K,ae),c[Oh]=p.current,YC(c),k)for(c=0;c<k.length;c++)w=k[c],j=w._getVersion,j=j(w._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[w,j]:p.mutableSourceEagerHydrationData.push(w,j);return new D3(p)},s.render=function(c,p,w){if(!O3(p))throw Error(d(200));return L3(null,c,p,!1,w)},s.unmountComponentAtNode=function(c){if(!O3(c))throw Error(d(40));return c._reactRootContainer?(Xv(function(){L3(null,null,c,!1,function(){c._reactRootContainer=null,c[Oh]=null})}),!0):!1},s.unstable_batchedUpdates=EH,s.unstable_renderSubtreeIntoContainer=function(c,p,w,k){if(!O3(w))throw Error(d(200));if(c==null||c._reactInternals===void 0)throw Error(d(38));return L3(c,p,w,!1,k)},s.version="18.2.0-next-9e3b772b8-20220608"}),Lu=W((s,a)=>{function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(d){console.error(d)}}l(),a.exports=OS()});function V5(s){let[,a]=(0,Gc.useState)(0);return(0,Gc.useCallback)(()=>{a(l=>l+1)},[])}function Yn(s,a,l){let d=(0,Gc.useCallback)(s,a),f=(0,Gc.useRef)(null);f.current?f.current.set(d):f.current=new Ba.Atom(d);let g=(0,Gc.useRef)(null);return g.current||(g.current=(0,Ba.prism)(()=>f.current.prism.getValue()())),ab(g.current,l)}function yI(){$g||($g=!0,(0,LS.default)(()=>{(0,bI.unstable_batchedUpdates)(function(){for(var s,a;il.length>0;){let l=il.shift();tf.delete(l);let d;Nu&&((s=l.debug)==null||s.history.push("queue reached"));try{d=l.der.getValue()}catch(f){Nu&&((a=l.debug)==null||a.history.push("queue: der.getValue() errored")),console.error("A `der.getValue()` in `usePrismInstance(der)` threw an error. This may be a zombie child issue, so we're gonna try to get its value again in a normal react render phase.If you see the same error again, then you either have an error in your prism code, or the deps array in `usePrism(fn, deps)` is missing a dependency and causing the prism to read stale values."),console.error(f),l.runUpdate();continue}d!==l.lastValue&&(l.lastValue=d,l.runUpdate())}$g=!1},1)}))}function ab(s,a){var l;let d=V5(),f=(0,Gc.useRef)(void 0);f.current||(NS++,f.current={order:NS,runUpdate:()=>{f.current.unmounted||d()},der:s,lastValue:void 0,unmounted:!1,queueUpdate:()=>{var b;Nu&&((b=f.current.debug)==null||b.history.push("queueUpdate()")),_I(f.current)},untap:s.onStale(()=>{Nu&&f.current.debug.history.push("onStale(cb)"),f.current.queueUpdate()})},Nu&&(f.current.debug={label:a,traceOfFirstTimeRender:new Error,history:[]})),(0,Gc.useLayoutEffect)(()=>function(){f.current.unmounted=!0,f.current.untap(),FS(f.current)},[]),FS(f.current);let g=f.current.der.getValue();return f.current.lastValue=g,Nu&&((l=f.current.debug)==null||l.history.push("rendered")),g}var Ba,LS,Gc,bI,Nu,rr,NS,il,tf,$g,_I,wI,FS,Sn=P(()=>{Ba=Nt,di(),LS=X(DS()),Gc=X(Ne()),bI=X(Lu()),Nu=!1,rr=(s,a)=>Yn(()=>(0,Ba.val)(s),[s],a),NS=0,il=[],tf=new Set,$g=!1,_I=s=>{wI(s),yI()},wI=s=>{if(!tf.has(s))if(tf.add(s),il.length===0)il.push(s);else{let a=SS(il,l=>l.order>=s.order);a===-1?il.push(s):il[a].order>s.order&&il.splice(a,0,s)}},FS=s=>{if(!tf.has(s))return;tf.delete(s);let a=SS(il,l=>l===s);il.splice(a,1)}}),j5=W(s=>{var a=60103,l=60106,d=60107,f=60108,g=60114,b=60109,_=60110,S=60112,C=60113,I=60120,O=60115,R=60116,A=60121,N=60122,L=60117,V=60129,G=60131;typeof Symbol=="function"&&Symbol.for&&($=Symbol.for,a=$("react.element"),l=$("react.portal"),d=$("react.fragment"),f=$("react.strict_mode"),g=$("react.profiler"),b=$("react.provider"),_=$("react.context"),S=$("react.forward_ref"),C=$("react.suspense"),I=$("react.suspense_list"),O=$("react.memo"),R=$("react.lazy"),A=$("react.block"),N=$("react.server.block"),L=$("react.fundamental"),V=$("react.debug_trace_mode"),G=$("react.legacy_hidden"));var $;function Y(Q){if(typeof Q=="object"&&Q!==null){var je=Q.$$typeof;switch(je){case a:switch(Q=Q.type,Q){case d:case g:case f:case C:case I:return Q;default:switch(Q=Q&&Q.$$typeof,Q){case _:case S:case R:case O:case b:return Q;default:return je}}case l:return je}}}var ie=b,re=a,ce=S,Pe=d,ye=R,we=O,Le=l,it=g,de=f,Oe=C;s.ContextConsumer=_,s.ContextProvider=ie,s.Element=re,s.ForwardRef=ce,s.Fragment=Pe,s.Lazy=ye,s.Memo=we,s.Portal=Le,s.Profiler=it,s.StrictMode=de,s.Suspense=Oe,s.isAsyncMode=function(){return!1},s.isConcurrentMode=function(){return!1},s.isContextConsumer=function(Q){return Y(Q)===_},s.isContextProvider=function(Q){return Y(Q)===b},s.isElement=function(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===a},s.isForwardRef=function(Q){return Y(Q)===S},s.isFragment=function(Q){return Y(Q)===d},s.isLazy=function(Q){return Y(Q)===R},s.isMemo=function(Q){return Y(Q)===O},s.isPortal=function(Q){return Y(Q)===l},s.isProfiler=function(Q){return Y(Q)===g},s.isStrictMode=function(Q){return Y(Q)===f},s.isSuspense=function(Q){return Y(Q)===C},s.isValidElementType=function(Q){return typeof Q=="string"||typeof Q=="function"||Q===d||Q===g||Q===V||Q===f||Q===C||Q===I||Q===G||typeof Q=="object"&&Q!==null&&(Q.$$typeof===R||Q.$$typeof===O||Q.$$typeof===b||Q.$$typeof===_||Q.$$typeof===S||Q.$$typeof===L||Q.$$typeof===A||Q[0]===N)},s.typeOf=Y}),H5=W((s,a)=>{a.exports=j5()}),BS=W((s,a)=>{a.exports=function(l,d,f,g){var b=f?f.call(g,l,d):void 0;if(b!==void 0)return!!b;if(l===d)return!0;if(typeof l!="object"||!l||typeof d!="object"||!d)return!1;var _=Object.keys(l),S=Object.keys(d);if(_.length!==S.length)return!1;for(var C=Object.prototype.hasOwnProperty.bind(d),I=0;I<_.length;I++){var O=_[I];if(!C(O))return!1;var R=l[O],A=d[O];if(b=f?f.call(g,R,A,O):void 0,b===!1||b===void 0&&R!==A)return!1}return!0}});function G5(s){function a(ge,et,rt,ut,We){for(var tn=0,xt=0,qt=0,yn=0,zn,On,Gr=0,ee=0,ft,pt=ft=zn=0,Ce=0,xe=0,$e=0,Ct=0,kt=rt.length,tt=kt-1,Ft,Tt="",At="",In="",Or="",er;Ce<kt;){if(On=rt.charCodeAt(Ce),Ce===tt&&xt+yn+qt+tn!==0&&(xt!==0&&(On=xt===47?10:47),yn=qt=tn=0,kt++,tt++),xt+yn+qt+tn===0){if(Ce===tt&&(0<xe&&(Tt=Tt.replace(R,"")),0<Tt.trim().length)){switch(On){case 32:case 9:case 59:case 13:case 10:break;default:Tt+=rt.charAt(Ce)}On=59}switch(On){case 123:for(Tt=Tt.trim(),zn=Tt.charCodeAt(0),ft=1,Ct=++Ce;Ce<kt;){switch(On=rt.charCodeAt(Ce)){case 123:ft++;break;case 125:ft--;break;case 47:switch(On=rt.charCodeAt(Ce+1)){case 42:case 47:e:{for(pt=Ce+1;pt<tt;++pt)switch(rt.charCodeAt(pt)){case 47:if(On===42&&rt.charCodeAt(pt-1)===42&&Ce+2!==pt){Ce=pt+1;break e}break;case 10:if(On===47){Ce=pt+1;break e}}Ce=pt}}break;case 91:On++;case 40:On++;case 34:case 39:for(;Ce++<tt&&rt.charCodeAt(Ce)!==On;);}if(ft===0)break;Ce++}switch(ft=rt.substring(Ct,Ce),zn===0&&(zn=(Tt=Tt.replace(O,"").trim()).charCodeAt(0)),zn){case 64:switch(0<xe&&(Tt=Tt.replace(R,"")),On=Tt.charCodeAt(1),On){case 100:case 109:case 115:case 45:xe=et;break;default:xe=Rt}if(ft=a(et,xe,ft,On,We+1),Ct=ft.length,0<Re&&(xe=l(Rt,Tt,$e),er=_(3,ft,xe,et,Oe,de,Ct,On,We,ut),Tt=xe.join(""),er!==void 0&&(Ct=(ft=er.trim()).length)===0&&(On=0,ft="")),0<Ct)switch(On){case 115:Tt=Tt.replace(ce,b);case 100:case 109:case 45:ft=Tt+"{"+ft+"}";break;case 107:Tt=Tt.replace($,"$1 $2"),ft=Tt+"{"+ft+"}",ft=je===1||je===2&&g("@"+ft,3)?"@-webkit-"+ft+"@"+ft:"@"+ft;break;default:ft=Tt+ft,ut===112&&(ft=(At+=ft,""))}else ft="";break;default:ft=a(et,l(et,Tt,$e),ft,ut,We+1)}In+=ft,ft=$e=xe=pt=zn=0,Tt="",On=rt.charCodeAt(++Ce);break;case 125:case 59:if(Tt=(0<xe?Tt.replace(R,""):Tt).trim(),1<(Ct=Tt.length))switch(pt===0&&(zn=Tt.charCodeAt(0),zn===45||96<zn&&123>zn)&&(Ct=(Tt=Tt.replace(" ",":")).length),0<Re&&(er=_(1,Tt,et,ge,Oe,de,At.length,ut,We,ut))!==void 0&&(Ct=(Tt=er.trim()).length)===0&&(Tt="\0\0"),zn=Tt.charCodeAt(0),On=Tt.charCodeAt(1),zn){case 0:break;case 64:if(On===105||On===99){Or+=Tt+rt.charAt(Ce);break}default:Tt.charCodeAt(Ct-1)!==58&&(At+=f(Tt,zn,On,Tt.charCodeAt(2)))}$e=xe=pt=zn=0,Tt="",On=rt.charCodeAt(++Ce)}}switch(On){case 13:case 10:xt===47?xt=0:1+zn===0&&ut!==107&&0<Tt.length&&(xe=1,Tt+="\0"),0<Re*St&&_(0,Tt,et,ge,Oe,de,At.length,ut,We,ut),de=1,Oe++;break;case 59:case 125:if(xt+yn+qt+tn===0){de++;break}default:switch(de++,Ft=rt.charAt(Ce),On){case 9:case 32:if(yn+tn+xt===0)switch(Gr){case 44:case 58:case 9:case 32:Ft="";break;default:On!==32&&(Ft=" ")}break;case 0:Ft="\\0";break;case 12:Ft="\\f";break;case 11:Ft="\\v";break;case 38:yn+xt+tn===0&&(xe=$e=1,Ft="\f"+Ft);break;case 108:if(yn+xt+tn+Q===0&&0<pt)switch(Ce-pt){case 2:Gr===112&&rt.charCodeAt(Ce-3)===58&&(Q=Gr);case 8:ee===111&&(Q=ee)}break;case 58:yn+xt+tn===0&&(pt=Ce);break;case 44:xt+qt+yn+tn===0&&(xe=1,Ft+="\r");break;case 34:case 39:xt===0&&(yn=yn===On?0:yn===0?On:yn);break;case 91:yn+xt+qt===0&&tn++;break;case 93:yn+xt+qt===0&&tn--;break;case 41:yn+xt+tn===0&&qt--;break;case 40:if(yn+xt+tn===0){if(zn===0)switch(2*Gr+3*ee){case 533:break;default:zn=1}qt++}break;case 64:xt+qt+yn+tn+pt+ft===0&&(ft=1);break;case 42:case 47:if(!(0<yn+tn+qt))switch(xt){case 0:switch(2*On+3*rt.charCodeAt(Ce+1)){case 235:xt=47;break;case 220:Ct=Ce,xt=42}break;case 42:On===47&&Gr===42&&Ct+2!==Ce&&(rt.charCodeAt(Ct+2)===33&&(At+=rt.substring(Ct,Ce+1)),Ft="",xt=0)}}xt===0&&(Tt+=Ft)}ee=Gr,Gr=On,Ce++}if(Ct=At.length,0<Ct){if(xe=et,0<Re&&(er=_(2,At,xe,ge,Oe,de,Ct,ut,We,ut),er!==void 0&&(At=er).length===0))return Or+At+In;if(At=xe.join(",")+"{"+At+"}",je*Q!==0){switch(je!==2||g(At,2)||(Q=0),Q){case 111:At=At.replace(ie,":-moz-$1")+At;break;case 112:At=At.replace(Y,"::-webkit-input-$1")+At.replace(Y,"::-moz-$1")+At.replace(Y,":-ms-input-$1")+At}Q=0}}return Or+At+In}function l(ge,et,rt){var ut=et.trim().split(V);et=ut;var We=ut.length,tn=ge.length;switch(tn){case 0:case 1:var xt=0;for(ge=tn===0?"":ge[0]+" ";xt<We;++xt)et[xt]=d(ge,et[xt],rt).trim();break;default:var qt=xt=0;for(et=[];xt<We;++xt)for(var yn=0;yn<tn;++yn)et[qt++]=d(ge[yn]+" ",ut[xt],rt).trim()}return et}function d(ge,et,rt){var ut=et.charCodeAt(0);switch(33>ut&&(ut=(et=et.trim()).charCodeAt(0)),ut){case 38:return et.replace(G,"$1"+ge.trim());case 58:return ge.trim()+et.replace(G,"$1"+ge.trim());default:if(0<1*rt&&0<et.indexOf("\f"))return et.replace(G,(ge.charCodeAt(0)===58?"":"$1")+ge.trim())}return ge+et}function f(ge,et,rt,ut){var We=ge+";",tn=2*et+3*rt+4*ut;if(tn===944){ge=We.indexOf(":",9)+1;var xt=We.substring(ge,We.length-1).trim();return xt=We.substring(0,ge).trim()+xt+";",je===1||je===2&&g(xt,1)?"-webkit-"+xt+xt:xt}if(je===0||je===2&&!g(We,1))return We;switch(tn){case 1015:return We.charCodeAt(10)===97?"-webkit-"+We+We:We;case 951:return We.charCodeAt(3)===116?"-webkit-"+We+We:We;case 963:return We.charCodeAt(5)===110?"-webkit-"+We+We:We;case 1009:if(We.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+We+We;case 978:return"-webkit-"+We+"-moz-"+We+We;case 1019:case 983:return"-webkit-"+We+"-moz-"+We+"-ms-"+We+We;case 883:if(We.charCodeAt(8)===45)return"-webkit-"+We+We;if(0<We.indexOf("image-set(",11))return We.replace(it,"$1-webkit-$2")+We;break;case 932:if(We.charCodeAt(4)===45)switch(We.charCodeAt(5)){case 103:return"-webkit-box-"+We.replace("-grow","")+"-webkit-"+We+"-ms-"+We.replace("grow","positive")+We;case 115:return"-webkit-"+We+"-ms-"+We.replace("shrink","negative")+We;case 98:return"-webkit-"+We+"-ms-"+We.replace("basis","preferred-size")+We}return"-webkit-"+We+"-ms-"+We+We;case 964:return"-webkit-"+We+"-ms-flex-"+We+We;case 1023:if(We.charCodeAt(8)!==99)break;return xt=We.substring(We.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+xt+"-webkit-"+We+"-ms-flex-pack"+xt+We;case 1005:return N.test(We)?We.replace(A,":-webkit-")+We.replace(A,":-moz-")+We:We;case 1e3:switch(xt=We.substring(13).trim(),et=xt.indexOf("-")+1,xt.charCodeAt(0)+xt.charCodeAt(et)){case 226:xt=We.replace(re,"tb");break;case 232:xt=We.replace(re,"tb-rl");break;case 220:xt=We.replace(re,"lr");break;default:return We}return"-webkit-"+We+"-ms-"+xt+We;case 1017:if(We.indexOf("sticky",9)===-1)break;case 975:switch(et=(We=ge).length-10,xt=(We.charCodeAt(et)===33?We.substring(0,et):We).substring(ge.indexOf(":",7)+1).trim(),tn=xt.charCodeAt(0)+(xt.charCodeAt(7)|0)){case 203:if(111>xt.charCodeAt(8))break;case 115:We=We.replace(xt,"-webkit-"+xt)+";"+We;break;case 207:case 102:We=We.replace(xt,"-webkit-"+(102<tn?"inline-":"")+"box")+";"+We.replace(xt,"-webkit-"+xt)+";"+We.replace(xt,"-ms-"+xt+"box")+";"+We}return We+";";case 938:if(We.charCodeAt(5)===45)switch(We.charCodeAt(6)){case 105:return xt=We.replace("-items",""),"-webkit-"+We+"-webkit-box-"+xt+"-ms-flex-"+xt+We;case 115:return"-webkit-"+We+"-ms-flex-item-"+We.replace(ye,"")+We;default:return"-webkit-"+We+"-ms-flex-line-pack"+We.replace("align-content","").replace(ye,"")+We}break;case 973:case 989:if(We.charCodeAt(3)!==45||We.charCodeAt(4)===122)break;case 931:case 953:if(Le.test(ge)===!0)return(xt=ge.substring(ge.indexOf(":")+1)).charCodeAt(0)===115?f(ge.replace("stretch","fill-available"),et,rt,ut).replace(":fill-available",":stretch"):We.replace(xt,"-webkit-"+xt)+We.replace(xt,"-moz-"+xt.replace("fill-",""))+We;break;case 962:if(We="-webkit-"+We+(We.charCodeAt(5)===102?"-ms-"+We:"")+We,rt+ut===211&&We.charCodeAt(13)===105&&0<We.indexOf("transform",10))return We.substring(0,We.indexOf(";",27)+1).replace(L,"$1-webkit-$2")+We}return We}function g(ge,et){var rt=ge.indexOf(et===1?":":"{"),ut=ge.substring(0,et!==3?rt:10);return rt=ge.substring(rt+1,ge.length-1),Ge(et!==2?ut:ut.replace(we,"$1"),rt,et)}function b(ge,et){var rt=f(et,et.charCodeAt(0),et.charCodeAt(1),et.charCodeAt(2));return rt!==et+";"?rt.replace(Pe," or ($1)").substring(4):"("+et+")"}function _(ge,et,rt,ut,We,tn,xt,qt,yn,zn){for(var On=0,Gr=et,ee;On<Re;++On)switch(ee=Ie[On].call(I,ge,Gr,rt,ut,We,tn,xt,qt,yn,zn)){case void 0:case!1:case!0:case null:break;default:Gr=ee}if(Gr!==et)return Gr}function S(ge){switch(ge){case void 0:case null:Re=Ie.length=0;break;default:if(typeof ge=="function")Ie[Re++]=ge;else if(typeof ge=="object")for(var et=0,rt=ge.length;et<rt;++et)S(ge[et]);else St=!!ge|0}return S}function C(ge){return ge=ge.prefix,ge!==void 0&&(Ge=null,ge?typeof ge!="function"?je=1:(je=2,Ge=ge):je=0),C}function I(ge,et){var rt=ge;if(33>rt.charCodeAt(0)&&(rt=rt.trim()),he=rt,rt=[he],0<Re){var ut=_(-1,et,rt,rt,Oe,de,0,0,0,0);ut!==void 0&&typeof ut=="string"&&(et=ut)}var We=a(Rt,rt,et,0,0);return 0<Re&&(ut=_(-2,We,rt,rt,Oe,de,We.length,0,0,0),ut!==void 0&&(We=ut)),he="",Q=0,de=Oe=1,We}var O=/^\0+/g,R=/[\0\r\f]/g,A=/: */g,N=/zoo|gra/,L=/([,: ])(transform)/g,V=/,\r+?/g,G=/([\t\r\n ])*\f?&/g,$=/@(k\w+)\s*(\S*)\s*/,Y=/::(place)/g,ie=/:(read-only)/g,re=/[svh]\w+-[tblr]{2}/,ce=/\(\s*(.*)\s*\)/g,Pe=/([\s\S]*?);/g,ye=/-self|flex-/g,we=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Le=/stretch|:\s*\w+\-(?:conte|avail)/,it=/([^-])(image-set\()/,de=1,Oe=1,Q=0,je=1,Rt=[],Ie=[],Re=0,Ge=null,St=0,he="";return I.use=S,I.set=C,s!==void 0&&C(s),I}var nf,xI=P(()=>{nf=G5}),SI,EI,W5=P(()=>{SI={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},EI=SI});function $5(s){var a=Object.create(null);return function(l){return a[l]===void 0&&(a[l]=s(l)),a[l]}}var lb,K5=P(()=>{lb=$5}),rf,CI,US,X5=P(()=>{K5(),rf=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,CI=lb(function(s){return rf.test(s)||s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)<91}),US=CI}),q5=W(s=>{var a=typeof Symbol=="function"&&Symbol.for,l=a?Symbol.for("react.element"):60103,d=a?Symbol.for("react.portal"):60106,f=a?Symbol.for("react.fragment"):60107,g=a?Symbol.for("react.strict_mode"):60108,b=a?Symbol.for("react.profiler"):60114,_=a?Symbol.for("react.provider"):60109,S=a?Symbol.for("react.context"):60110,C=a?Symbol.for("react.async_mode"):60111,I=a?Symbol.for("react.concurrent_mode"):60111,O=a?Symbol.for("react.forward_ref"):60112,R=a?Symbol.for("react.suspense"):60113,A=a?Symbol.for("react.suspense_list"):60120,N=a?Symbol.for("react.memo"):60115,L=a?Symbol.for("react.lazy"):60116,V=a?Symbol.for("react.block"):60121,G=a?Symbol.for("react.fundamental"):60117,$=a?Symbol.for("react.responder"):60118,Y=a?Symbol.for("react.scope"):60119;function ie(ce){if(typeof ce=="object"&&ce!==null){var Pe=ce.$$typeof;switch(Pe){case l:switch(ce=ce.type,ce){case C:case I:case f:case b:case g:case R:return ce;default:switch(ce=ce&&ce.$$typeof,ce){case S:case O:case L:case N:case _:return ce;default:return Pe}}case d:return Pe}}}function re(ce){return ie(ce)===I}s.AsyncMode=C,s.ConcurrentMode=I,s.ContextConsumer=S,s.ContextProvider=_,s.Element=l,s.ForwardRef=O,s.Fragment=f,s.Lazy=L,s.Memo=N,s.Portal=d,s.Profiler=b,s.StrictMode=g,s.Suspense=R,s.isAsyncMode=function(ce){return re(ce)||ie(ce)===C},s.isConcurrentMode=re,s.isContextConsumer=function(ce){return ie(ce)===S},s.isContextProvider=function(ce){return ie(ce)===_},s.isElement=function(ce){return typeof ce=="object"&&ce!==null&&ce.$$typeof===l},s.isForwardRef=function(ce){return ie(ce)===O},s.isFragment=function(ce){return ie(ce)===f},s.isLazy=function(ce){return ie(ce)===L},s.isMemo=function(ce){return ie(ce)===N},s.isPortal=function(ce){return ie(ce)===d},s.isProfiler=function(ce){return ie(ce)===b},s.isStrictMode=function(ce){return ie(ce)===g},s.isSuspense=function(ce){return ie(ce)===R},s.isValidElementType=function(ce){return typeof ce=="string"||typeof ce=="function"||ce===f||ce===I||ce===b||ce===g||ce===R||ce===A||typeof ce=="object"&&ce!==null&&(ce.$$typeof===L||ce.$$typeof===N||ce.$$typeof===_||ce.$$typeof===S||ce.$$typeof===O||ce.$$typeof===G||ce.$$typeof===$||ce.$$typeof===Y||ce.$$typeof===V)},s.typeOf=ie}),zS=W((s,a)=>{a.exports=q5()}),PI=W((s,a)=>{var l=zS(),d={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},f={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},g={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},b={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_={};_[l.ForwardRef]=g,_[l.Memo]=b;function S(V){return l.isMemo(V)?b:_[V.$$typeof]||d}var C=Object.defineProperty,I=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,R=Object.getOwnPropertyDescriptor,A=Object.getPrototypeOf,N=Object.prototype;function L(V,G,$){if(typeof G!="string"){if(N){var Y=A(G);Y&&Y!==N&&L(V,Y,$)}var ie=I(G);O&&(ie=ie.concat(O(G)));for(var re=S(V),ce=S(G),Pe=0;Pe<ie.length;++Pe){var ye=ie[Pe];if(!f[ye]&&!($&&$[ye])&&!(ce&&ce[ye])&&!(re&&re[ye])){var we=R(G,ye);try{C(V,ye,we)}catch{}}}}return V}a.exports=L});function sl(){return(sl=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(s[d]=l[d])}return s}).apply(this,arguments)}function Kg(s){return typeof s=="function"}function aa(s){return s.displayName||s.name||"Component"}function Fu(s){return s&&typeof s.styledComponentId=="string"}function lo(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];throw new Error("An error occurred. See https://git.io/JUIaE#"+s+" for more information."+(l.length>0?" Args: "+l.join(", "):""))}function VS(s){var a,l="";for(a=Math.abs(s);a>52;a=a/52|0)l=XS(a%52)+l;return(XS(a%52)+l).replace(Zg,"$1-$2")}function sf(s){for(var a=0;a<s.length;a+=1){var l=s[a];if(Kg(l)&&!Fu(l))return!1}return!0}function oh(s){var a,l,d,f,g=s===void 0?Ua:s,b=g.options,_=b===void 0?Ua:b,S=g.plugins,C=S===void 0?ah:S,I=new nf(_),O=[],R=function(L){function V(G){if(G)try{L(G+"}")}catch{}}return function(G,$,Y,ie,re,ce,Pe,ye,we,Le){switch(G){case 1:if(we===0&&$.charCodeAt(0)===64)return L($+";"),"";break;case 2:if(ye===0)return $+"/*|*/";break;case 3:switch(ye){case 102:case 112:return L(Y[0]+$),"";default:return $+(Le===0?"/*|*/":"")}case-2:$.split("/*|*/}").forEach(V)}}}(function(L){O.push(L)}),A=function(L,V,G){return V===0&&ZS.indexOf(G[l.length])!==-1||G.match(f)?L:"."+a};function N(L,V,G,$){$===void 0&&($="&");var Y=L.replace(YS,""),ie=V&&G?G+" "+V+" { "+Y+" }":Y;return a=$,l=V,d=new RegExp("\\"+l+"\\b","g"),f=new RegExp("(\\"+l+"\\b){2,}"),I(G||!V?"":V,ie)}return I.use([].concat(C,[function(L,V,G){L===2&&G.length&&G[0].lastIndexOf(l)>0&&(G[0]=G[0].replace(d,A))},R,function(L){if(L===-2){var V=O;return O=[],V}}])),N.hash=C.length?C.reduce(function(L,V){return V.name||lo(15),hs(L,V.name)},5381).toString():"",N}function Xg(){return(0,wi.useContext)(_b)||QS}function TI(){return(0,wi.useContext)(wb)||cf}function jS(s){var a=(0,wi.useState)(s.stylisPlugins),l=a[0],d=a[1],f=Xg(),g=(0,wi.useMemo)(function(){var _=f;return s.sheet?_=s.sheet:s.target&&(_=_.reconstructWithOptions({target:s.target},!1)),s.disableCSSOMInjection&&(_=_.reconstructWithOptions({useCSSOMInjection:!1})),_},[s.disableCSSOMInjection,s.sheet,s.target]),b=(0,wi.useMemo)(function(){return oh({options:{prefix:!s.disableVendorPrefixes},plugins:l})},[s.disableVendorPrefixes,l]);return(0,wi.useEffect)(function(){(0,qg.default)(l,s.stylisPlugins)||d(s.stylisPlugins)},[s.stylisPlugins]),wi.default.createElement(_b.Provider,{value:g},wi.default.createElement(wb.Provider,{value:b},s.children))}function MI(s){return LI.test(s)?s.replace(NI,eE).replace(xb,"-ms-"):s}function Bu(s,a,l,d){if(Array.isArray(s)){for(var f,g=[],b=0,_=s.length;b<_;b+=1)(f=Bu(s[b],a,l,d))!==""&&(Array.isArray(f)?g.push.apply(g,f):g.push(f));return g}if(tE(s))return"";if(Fu(s))return"."+s.styledComponentId;if(Kg(s)){if(typeof(C=s)!="function"||C.prototype&&C.prototype.isReactComponent||!a)return s;var S=s(a);return Bu(S,a,l,d)}var C;return s instanceof JS?l?(s.inject(l,d),s.getName(d)):s:pb(s)?function I(O,R){var A,N,L=[];for(var V in O)O.hasOwnProperty(V)&&!tE(O[V])&&(Array.isArray(O[V])&&O[V].isCss||Kg(O[V])?L.push(MI(V)+":",O[V],";"):pb(O[V])?L.push.apply(L,I(O[V],V)):L.push(MI(V)+": "+(A=V,(N=O[V])==null||typeof N=="boolean"||N===""?"":typeof N!="number"||N===0||A in EI||A.startsWith("--")?String(N).trim():N+"px")+";"));return R?[R+" {"].concat(L,["}"]):L}(s):s.toString()}function uo(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return Kg(s)||pb(s)?nE(Bu(hb(ah,[s].concat(l)))):l.length===0&&s.length===1&&typeof s[0]=="string"?s:nE(Bu(hb(s,l)))}function Uu(s){return s.replace(T,"-").replace(U,"")}function of(s){return typeof s=="string"&&!0}function HS(s,a,l){var d=s[l];oe(a)&&oe(d)?kI(d,a):s[l]=a}function kI(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];for(var f=0,g=l;f<g.length;f++){var b=g[f];if(oe(b))for(var _ in b)me(_)&&HS(s,b[_],_)}return s}function ub(s,a,l){var d=Fu(s),f=!of(s),g=a.attrs,b=g===void 0?ah:g,_=a.componentId,S=_===void 0?function($,Y){var ie=typeof $!="string"?"sc":Uu($);Ke[ie]=(Ke[ie]||0)+1;var re=ie+"-"+q("5.3.11"+ie+Ke[ie]);return Y?Y+"-"+re:re}(a.displayName,a.parentComponentId):_,C=a.displayName,I=C===void 0?function($){return of($)?"styled."+$:"Styled("+aa($)+")"}(s):C,O=a.displayName&&a.componentId?Uu(a.displayName)+"-"+a.componentId:a.componentId||S,R=d&&s.attrs?Array.prototype.concat(s.attrs,b).filter(Boolean):b,A=a.shouldForwardProp;d&&s.shouldForwardProp&&(A=a.shouldForwardProp?function($,Y,ie){return s.shouldForwardProp($,Y,ie)&&a.shouldForwardProp($,Y,ie)}:s.shouldForwardProp);var N,L=new OI(l,O,d?s.componentStyle:void 0),V=L.isStatic&&b.length===0,G=function($,Y){return function(ie,re,ce,Pe){var ye=ie.attrs,we=ie.componentStyle,Le=ie.defaultProps,it=ie.foldedComponentIds,de=ie.shouldForwardProp,Oe=ie.styledComponentId,Q=ie.target,je=function(ut,We,tn){ut===void 0&&(ut=Ua);var xt=sl({},We,{theme:ut}),qt={};return tn.forEach(function(yn){var zn,On,Gr,ee=yn;for(zn in Kg(ee)&&(ee=ee(xt)),ee)xt[zn]=qt[zn]=zn==="className"?(On=qt[zn],Gr=ee[zn],On&&Gr?On+" "+Gr:On||Gr):ee[zn]}),[xt,qt]}(y(re,(0,wi.useContext)(De),Le)||Ua,re,ye),Rt=je[0],Ie=je[1],Re=function(ut,We,tn,xt){var qt=Xg(),yn=TI(),zn=We?ut.generateAndInjectStyles(Ua,qt,yn):ut.generateAndInjectStyles(tn,qt,yn);return zn}(we,Pe,Rt),Ge=ce,St=Ie.$as||re.$as||Ie.as||re.as||Q,he=of(St),ge=Ie!==re?sl({},re,{},Ie):re,et={};for(var rt in ge)rt[0]!=="$"&&rt!=="as"&&(rt==="forwardedAs"?et.as=ge[rt]:(de?de(rt,US,St):!he||US(rt))&&(et[rt]=ge[rt]));return re.style&&Ie.style!==re.style&&(et.style=sl({},re.style,{},Ie.style)),et.className=Array.prototype.concat(it,Oe,Re!==Oe?Re:null,re.className,Ie.className).filter(Boolean).join(" "),et.ref=Ge,(0,wi.createElement)(St,et)}(N,$,Y,V)};return G.displayName=I,(N=wi.default.forwardRef(G)).attrs=R,N.componentStyle=L,N.displayName=I,N.shouldForwardProp=A,N.foldedComponentIds=d?Array.prototype.concat(s.foldedComponentIds,s.styledComponentId):ah,N.styledComponentId=O,N.target=d?s.target:s,N.withComponent=function($){var Y=a.componentId,ie=function(ce,Pe){if(ce==null)return{};var ye,we,Le={},it=Object.keys(ce);for(we=0;we<it.length;we++)ye=it[we],Pe.indexOf(ye)>=0||(Le[ye]=ce[ye]);return Le}(a,["componentId"]),re=Y&&Y+"-"+(of($)?$:Uu(aa($)));return ub($,sl({},ie,{attrs:R,componentId:re}),l)},Object.defineProperty(N,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function($){this._foldedDefaultProps=d?kI({},s.defaultProps,$):$}}),Object.defineProperty(N,"toString",{value:function(){return"."+N.styledComponentId}}),f&&(0,db.default)(N,s,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),N}function jl(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];var f=uo.apply(void 0,[s].concat(l)),g="sc-global-"+q(JSON.stringify(f)),b=new _t(f,g);function _(C){var I=Xg(),O=TI(),R=(0,wi.useContext)(De),A=(0,wi.useRef)(I.allocateGSInstance(g)).current;return I.server&&S(A,C,I,R,O),(0,wi.useLayoutEffect)(function(){if(!I.server)return S(A,C,I,R,O),function(){return b.removeStyles(A,I)}},[A,C,I,R,O]),null}function S(C,I,O,R,A){if(b.isStatic)b.renderStyles(C,GS,O,A);else{var N=sl({},I,{theme:y(I,R,_.defaultProps)});b.renderStyles(C,N,O,A)}}return wi.default.memo(_)}var cb,wi,qg,db,hb,pb,ah,Ua,Hl,lh,fb,GS,mb,uh,ch,af,lf,WS,uf,gb,AI,II,$S,Yg,vb,co,RI,yb,KS,DI,zu,Zg,XS,hs,qS,bb,OI,YS,ZS,_b,wb,QS,cf,JS,LI,NI,xb,eE,tE,nE,y,T,U,q,oe,me,De,Ke,Je,_t,le,Ve=P(()=>{cb=X(H5()),wi=X(Ne()),qg=X(BS()),xI(),W5(),X5(),db=X(PI()),hb=function(s,a){for(var l=[s[0]],d=0,f=a.length;d<f;d+=1)l.push(a[d],s[d+1]);return l},pb=function(s){return s!==null&&typeof s=="object"&&(s.toString?s.toString():Object.prototype.toString.call(s))==="[object Object]"&&!(0,cb.typeOf)(s)},ah=Object.freeze([]),Ua=Object.freeze({}),Hl=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",lh=typeof window<"u"&&"HTMLElement"in window,fb=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY)),GS={},mb=function(){function s(l){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=l}var a=s.prototype;return a.indexOfGroup=function(l){for(var d=0,f=0;f<l;f++)d+=this.groupSizes[f];return d},a.insertRules=function(l,d){if(l>=this.groupSizes.length){for(var f=this.groupSizes,g=f.length,b=g;l>=b;)(b<<=1)<0&&lo(16,""+l);this.groupSizes=new Uint32Array(b),this.groupSizes.set(f),this.length=b;for(var _=g;_<b;_++)this.groupSizes[_]=0}for(var S=this.indexOfGroup(l+1),C=0,I=d.length;C<I;C++)this.tag.insertRule(S,d[C])&&(this.groupSizes[l]++,S++)},a.clearGroup=function(l){if(l<this.length){var d=this.groupSizes[l],f=this.indexOfGroup(l),g=f+d;this.groupSizes[l]=0;for(var b=f;b<g;b++)this.tag.deleteRule(f)}},a.getGroup=function(l){var d="";if(l>=this.length||this.groupSizes[l]===0)return d;for(var f=this.groupSizes[l],g=this.indexOfGroup(l),b=g+f,_=g;_<b;_++)d+=this.tag.getRule(_)+`/*!sc*/
`;return d},s}(),uh=new Map,ch=new Map,af=1,lf=function(s){if(uh.has(s))return uh.get(s);for(;ch.has(af);)af++;var a=af++;return uh.set(s,a),ch.set(a,s),a},WS=function(s){return ch.get(s)},uf=function(s,a){a>=af&&(af=a+1),uh.set(s,a),ch.set(a,s)},gb="style["+Hl+'][data-styled-version="5.3.11"]',AI=new RegExp("^"+Hl+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),II=function(s,a,l){for(var d,f=l.split(","),g=0,b=f.length;g<b;g++)(d=f[g])&&s.registerName(a,d)},$S=function(s,a){for(var l=(a.textContent||"").split(`/*!sc*/
`),d=[],f=0,g=l.length;f<g;f++){var b=l[f].trim();if(b){var _=b.match(AI);if(_){var S=0|parseInt(_[1],10),C=_[2];S!==0&&(uf(C,S),II(s,C,_[3]),s.getTag().insertRules(S,d)),d.length=0}else d.push(b)}}},Yg=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},vb=function(s){var a=document.head,l=s||a,d=document.createElement("style"),f=function(_){for(var S=_.childNodes,C=S.length;C>=0;C--){var I=S[C];if(I&&I.nodeType===1&&I.hasAttribute(Hl))return I}}(l),g=f!==void 0?f.nextSibling:null;d.setAttribute(Hl,"active"),d.setAttribute("data-styled-version","5.3.11");var b=Yg();return b&&d.setAttribute("nonce",b),l.insertBefore(d,g),d},co=function(){function s(l){var d=this.element=vb(l);d.appendChild(document.createTextNode("")),this.sheet=function(f){if(f.sheet)return f.sheet;for(var g=document.styleSheets,b=0,_=g.length;b<_;b++){var S=g[b];if(S.ownerNode===f)return S}lo(17)}(d),this.length=0}var a=s.prototype;return a.insertRule=function(l,d){try{return this.sheet.insertRule(d,l),this.length++,!0}catch{return!1}},a.deleteRule=function(l){this.sheet.deleteRule(l),this.length--},a.getRule=function(l){var d=this.sheet.cssRules[l];return d!==void 0&&typeof d.cssText=="string"?d.cssText:""},s}(),RI=function(){function s(l){var d=this.element=vb(l);this.nodes=d.childNodes,this.length=0}var a=s.prototype;return a.insertRule=function(l,d){if(l<=this.length&&l>=0){var f=document.createTextNode(d),g=this.nodes[l];return this.element.insertBefore(f,g||null),this.length++,!0}return!1},a.deleteRule=function(l){this.element.removeChild(this.nodes[l]),this.length--},a.getRule=function(l){return l<this.length?this.nodes[l].textContent:""},s}(),yb=function(){function s(l){this.rules=[],this.length=0}var a=s.prototype;return a.insertRule=function(l,d){return l<=this.length&&(this.rules.splice(l,0,d),this.length++,!0)},a.deleteRule=function(l){this.rules.splice(l,1),this.length--},a.getRule=function(l){return l<this.length?this.rules[l]:""},s}(),KS=lh,DI={isServer:!lh,useCSSOMInjection:!fb},zu=function(){function s(l,d,f){l===void 0&&(l=Ua),d===void 0&&(d={}),this.options=sl({},DI,{},l),this.gs=d,this.names=new Map(f),this.server=!!l.isServer,!this.server&&lh&&KS&&(KS=!1,function(g){for(var b=document.querySelectorAll(gb),_=0,S=b.length;_<S;_++){var C=b[_];C&&C.getAttribute(Hl)!=="active"&&($S(g,C),C.parentNode&&C.parentNode.removeChild(C))}}(this))}s.registerId=function(l){return lf(l)};var a=s.prototype;return a.reconstructWithOptions=function(l,d){return d===void 0&&(d=!0),new s(sl({},this.options,{},l),this.gs,d&&this.names||void 0)},a.allocateGSInstance=function(l){return this.gs[l]=(this.gs[l]||0)+1},a.getTag=function(){return this.tag||(this.tag=(f=(d=this.options).isServer,g=d.useCSSOMInjection,b=d.target,l=f?new yb(b):g?new co(b):new RI(b),new mb(l)));var l,d,f,g,b},a.hasNameForId=function(l,d){return this.names.has(l)&&this.names.get(l).has(d)},a.registerName=function(l,d){if(lf(l),this.names.has(l))this.names.get(l).add(d);else{var f=new Set;f.add(d),this.names.set(l,f)}},a.insertRules=function(l,d,f){this.registerName(l,d),this.getTag().insertRules(lf(l),f)},a.clearNames=function(l){this.names.has(l)&&this.names.get(l).clear()},a.clearRules=function(l){this.getTag().clearGroup(lf(l)),this.clearNames(l)},a.clearTag=function(){this.tag=void 0},a.toString=function(){return function(l){for(var d=l.getTag(),f=d.length,g="",b=0;b<f;b++){var _=WS(b);if(_!==void 0){var S=l.names.get(_),C=d.getGroup(b);if(S&&C&&S.size){var I=Hl+".g"+b+'[id="'+_+'"]',O="";S!==void 0&&S.forEach(function(R){R.length>0&&(O+=R+",")}),g+=""+C+I+'{content:"'+O+`"}/*!sc*/
`}}}return g}(this)},s}(),Zg=/(a)(d)/gi,XS=function(s){return String.fromCharCode(s+(s>25?39:97))},hs=function(s,a){for(var l=a.length;l;)s=33*s^a.charCodeAt(--l);return s},qS=function(s){return hs(5381,s)},bb=qS("5.3.11"),OI=function(){function s(a,l,d){this.rules=a,this.staticRulesId="",this.isStatic=(d===void 0||d.isStatic)&&sf(a),this.componentId=l,this.baseHash=hs(bb,l),this.baseStyle=d,zu.registerId(l)}return s.prototype.generateAndInjectStyles=function(a,l,d){var f=this.componentId,g=[];if(this.baseStyle&&g.push(this.baseStyle.generateAndInjectStyles(a,l,d)),this.isStatic&&!d.hash)if(this.staticRulesId&&l.hasNameForId(f,this.staticRulesId))g.push(this.staticRulesId);else{var b=Bu(this.rules,a,l,d).join(""),_=VS(hs(this.baseHash,b)>>>0);if(!l.hasNameForId(f,_)){var S=d(b,"."+_,void 0,f);l.insertRules(f,_,S)}g.push(_),this.staticRulesId=_}else{for(var C=this.rules.length,I=hs(this.baseHash,d.hash),O="",R=0;R<C;R++){var A=this.rules[R];if(typeof A=="string")O+=A;else if(A){var N=Bu(A,a,l,d),L=Array.isArray(N)?N.join(""):N;I=hs(I,L+R),O+=L}}if(O){var V=VS(I>>>0);if(!l.hasNameForId(f,V)){var G=d(O,"."+V,void 0,f);l.insertRules(f,V,G)}g.push(V)}}return g.join(" ")},s}(),YS=/^\s*\/\/.*$/gm,ZS=[":","[",".","#"],_b=wi.default.createContext(),_b.Consumer,wb=wi.default.createContext(),QS=(wb.Consumer,new zu),cf=oh(),JS=function(){function s(a,l){var d=this;this.inject=function(f,g){g===void 0&&(g=cf);var b=d.name+g.hash;f.hasNameForId(d.id,b)||f.insertRules(d.id,b,g(d.rules,b,"@keyframes"))},this.toString=function(){return lo(12,String(d.name))},this.name=a,this.id="sc-keyframes-"+a,this.rules=l}return s.prototype.getName=function(a){return a===void 0&&(a=cf),this.name+a.hash},s}(),LI=/([A-Z])/,NI=/([A-Z])/g,xb=/^ms-/,eE=function(s){return"-"+s.toLowerCase()},tE=function(s){return s==null||s===!1||s===""},nE=function(s){return Array.isArray(s)&&(s.isCss=!0),s},y=function(s,a,l){return l===void 0&&(l=Ua),s.theme!==l.theme&&s.theme||a||l.theme},T=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,U=/(^-|-$)/g,q=function(s){return VS(qS(s)>>>0)},oe=function(s){return typeof s=="function"||typeof s=="object"&&s!==null&&!Array.isArray(s)},me=function(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"},De=wi.default.createContext(),De.Consumer,Ke={},Je=function(s){return function a(l,d,f){if(f===void 0&&(f=Ua),!(0,cb.isValidElementType)(d))return lo(1,String(d));var g=function(){return l(d,f,uo.apply(void 0,arguments))};return g.withConfig=function(b){return a(l,d,sl({},f,{},b))},g.attrs=function(b){return a(l,d,sl({},f,{attrs:Array.prototype.concat(f.attrs,b).filter(Boolean)}))},g}(ub,s)},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(s){Je[s]=Je(s)}),_t=function(){function s(l,d){this.rules=l,this.componentId=d,this.isStatic=sf(l),zu.registerId(this.componentId+1)}var a=s.prototype;return a.createStyles=function(l,d,f,g){var b=g(Bu(this.rules,d,f,g).join(""),""),_=this.componentId+l;f.insertRules(_,_,b)},a.removeStyles=function(l,d){d.clearRules(this.componentId+l)},a.renderStyles=function(l,d,f,g){l>2&&zu.registerId(this.componentId+l),this.removeStyles(l,f),this.createStyles(l,d,f,g)},s}(),function(){function s(){var l=this;this._emitSheetCSS=function(){var d=l.instance.toString();if(!d)return"";var f=Yg();return"<style "+[f&&'nonce="'+f+'"',Hl+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+d+"</style>"},this.getStyleTags=function(){return l.sealed?lo(2):l._emitSheetCSS()},this.getStyleElement=function(){var d;if(l.sealed)return lo(2);var f=((d={})[Hl]="",d["data-styled-version"]="5.3.11",d.dangerouslySetInnerHTML={__html:l.instance.toString()},d),g=Yg();return g&&(f.nonce=g),[wi.default.createElement("style",sl({},f,{key:"sc-0-0"}))]},this.seal=function(){l.sealed=!0},this.instance=new zu({isServer:!0}),this.sealed=!1}var a=s.prototype;return a.collectStyles=function(l){return this.sealed?lo(2):wi.default.createElement(jS,{sheet:this.instance},l)},a.interleaveWithNodeStream=function(l){return lo(3)},s}(),le=Je});function Xt(){return Xt=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(s[d]=l[d])}return s},Xt.apply(this,arguments)}var An=P(()=>{});function mn(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}var or=P(()=>{});function ar(s,a){return ar=Object.setPrototypeOf||function(l,d){return l.__proto__=d,l},ar(s,a)}var Jn=P(()=>{});function Ir(s,a){s.prototype=Object.create(a.prototype),s.prototype.constructor=s,ar(s,a)}var Ks=P(()=>{Jn()});function Xs(s){return Xs=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},Xs(s)}var qs=P(()=>{});function Jr(s){return Function.toString.call(s).indexOf("[native code]")!==-1}var Ys=P(()=>{});function la(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Gl=P(()=>{});function Wl(s,a,l){return la()?Wl=Reflect.construct:Wl=function(d,f,g){var b=[null];b.push.apply(b,f);var _=Function.bind.apply(d,b),S=new _;return g&&ar(S,g.prototype),S},Wl.apply(null,arguments)}var dh=P(()=>{Jn(),Gl()});function Vu(s){var a=typeof Map=="function"?new Map:void 0;return Vu=function(l){if(l===null||!Jr(l))return l;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(typeof a<"u"){if(a.has(l))return a.get(l);a.set(l,d)}function d(){return Wl(l,arguments,Xs(this).constructor)}return d.prototype=Object.create(l.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),ar(d,l)},Vu(s)}var hh=P(()=>{qs(),Jn(),Ys(),dh()}),ph=P(()=>{});function es(s){return s.charAt(0).toUpperCase()+s.slice(1)}function ua(s,a){if(!s)return a.toLowerCase();var l=s.split("-");if(l.length>1)return l.splice(1,0,a),l.reduce(function(f,g){return""+f+es(g)});var d=s.replace(/([a-z])([A-Z])/g,"$1"+a+"$2");return s===d?""+s+a:d}function ai(s,a){for(var l={},d=0;d<a.length;d+=1)(a[d]||a[d]===0)&&(l[ua(s,MX[d])]=a[d]);return l}function $l(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];var f=l[0],g=l[1],b=g===void 0?f:g,_=l[2],S=_===void 0?f:_,C=l[3],I=C===void 0?b:C,O=[f,b,S,I];return ai(s,O)}function ol(s){return Math.round(s*255)}function LMe(s,a,l){return ol(s)+","+ol(a)+","+ol(l)}function rE(s,a,l,d){if(d===void 0&&(d=LMe),a===0)return d(l,l,l);var f=(s%360+360)%360/60,g=(1-Math.abs(2*l-1))*a,b=g*(1-Math.abs(f%2-1)),_=0,S=0,C=0;f>=0&&f<1?(_=g,S=b):f>=1&&f<2?(_=b,S=g):f>=2&&f<3?(S=g,C=b):f>=3&&f<4?(S=b,C=g):f>=4&&f<5?(_=b,C=g):f>=5&&f<6&&(_=g,C=b);var I=l-g/2,O=_+I,R=S+I,A=C+I;return d(O,R,A)}function NMe(s){if(typeof s!="string")return s;var a=s.toLowerCase();return n4[a]?"#"+n4[a]:s}function Y5(s){if(typeof s!="string")throw new ju(3);var a=NMe(s);if(a.match(kX))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(AX)){var l=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2));return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:l}}if(a.match(IX))return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(RX)){var d=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2));return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:d}}var f=zI.exec(a);if(f)return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10)};var g=DX.exec(a.substring(0,50));if(g)return{red:parseInt(""+g[1],10),green:parseInt(""+g[2],10),blue:parseInt(""+g[3],10),alpha:parseFloat(""+g[4])};var b=OX.exec(a);if(b){var _=parseInt(""+b[1],10),S=parseInt(""+b[2],10)/100,C=parseInt(""+b[3],10)/100,I="rgb("+rE(_,S,C)+")",O=zI.exec(I);if(!O)throw new ju(4,a,I);return{red:parseInt(""+O[1],10),green:parseInt(""+O[2],10),blue:parseInt(""+O[3],10)}}var R=LX.exec(a.substring(0,50));if(R){var A=parseInt(""+R[1],10),N=parseInt(""+R[2],10)/100,L=parseInt(""+R[3],10)/100,V="rgb("+rE(A,N,L)+")",G=zI.exec(V);if(!G)throw new ju(4,a,V);return{red:parseInt(""+G[1],10),green:parseInt(""+G[2],10),blue:parseInt(""+G[3],10),alpha:parseFloat(""+R[4])}}throw new ju(5)}function FMe(s){var a=s.red/255,l=s.green/255,d=s.blue/255,f=Math.max(a,l,d),g=Math.min(a,l,d),b=(f+g)/2;if(f===g)return s.alpha!==void 0?{hue:0,saturation:0,lightness:b,alpha:s.alpha}:{hue:0,saturation:0,lightness:b};var _,S=f-g,C=b>.5?S/(2-f-g):S/(f+g);switch(f){case a:_=(l-d)/S+(l<d?6:0);break;case l:_=(d-a)/S+2;break;default:_=(a-l)/S+4;break}return _*=60,s.alpha!==void 0?{hue:_,saturation:C,lightness:b,alpha:s.alpha}:{hue:_,saturation:C,lightness:b}}function Z5(s){return FMe(Y5(s))}function Qg(s){var a=s.toString(16);return a.length===1?"0"+a:a}function Q5(s){return Qg(Math.round(s*255))}function BMe(s,a,l){return VI("#"+Q5(s)+Q5(a)+Q5(l))}function FI(s,a,l){return rE(s,a,l,BMe)}function UMe(s,a,l){if(typeof s=="number"&&typeof a=="number"&&typeof l=="number")return FI(s,a,l);if(typeof s=="object"&&a===void 0&&l===void 0)return FI(s.hue,s.saturation,s.lightness);throw new ju(1)}function zMe(s,a,l,d){if(typeof s=="number"&&typeof a=="number"&&typeof l=="number"&&typeof d=="number")return d>=1?FI(s,a,l):"rgba("+rE(s,a,l)+","+d+")";if(typeof s=="object"&&a===void 0&&l===void 0&&d===void 0)return s.alpha>=1?FI(s.hue,s.saturation,s.lightness):"rgba("+rE(s.hue,s.saturation,s.lightness)+","+s.alpha+")";throw new ju(2)}function J5(s,a,l){if(typeof s=="number"&&typeof a=="number"&&typeof l=="number")return VI("#"+Qg(s)+Qg(a)+Qg(l));if(typeof s=="object"&&a===void 0&&l===void 0)return VI("#"+Qg(s.red)+Qg(s.green)+Qg(s.blue));throw new ju(6)}function PX(s,a,l,d){if(typeof s=="string"&&typeof a=="number"){var f=Y5(s);return"rgba("+f.red+","+f.green+","+f.blue+","+a+")"}else{if(typeof s=="number"&&typeof a=="number"&&typeof l=="number"&&typeof d=="number")return d>=1?J5(s,a,l):"rgba("+s+","+a+","+l+","+d+")";if(typeof s=="object"&&a===void 0&&l===void 0&&d===void 0)return s.alpha>=1?J5(s.red,s.green,s.blue):"rgba("+s.red+","+s.green+","+s.blue+","+s.alpha+")"}throw new ju(7)}function e4(s){if(typeof s!="object")throw new ju(8);if(FX(s))return PX(s);if(NX(s))return J5(s);if(UX(s))return zMe(s);if(BX(s))return UMe(s);throw new ju(8)}function TX(s,a,l){return function(){var d=l.concat(Array.prototype.slice.call(arguments));return d.length>=a?s.apply(this,d):TX(s,a,d)}}function BI(s){return TX(s,s.length,[])}function UI(s,a,l){return Math.max(s,Math.min(a,l))}function VMe(s,a){if(a==="transparent")return a;var l=Z5(a);return e4(Xt({},l,{lightness:UI(0,1,l.lightness-parseFloat(s))}))}function jMe(s,a){if(a==="transparent")return a;var l=Z5(a);return e4(Xt({},l,{lightness:UI(0,1,l.lightness+parseFloat(s))}))}function HMe(s,a){if(a==="transparent")return a;var l=Z5(a);return e4(Xt({},l,{saturation:UI(0,1,l.saturation+parseFloat(s))}))}function GMe(s,a){if(a==="transparent")return a;var l=Y5(a),d=typeof l.alpha=="number"?l.alpha:1,f=Xt({},l,{alpha:UI(0,1,+(d*100-parseFloat(s)*100).toFixed(2)/100)});return PX(f)}function t4(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];return zX.indexOf(s)>=0&&s?Xt({},$l.apply(void 0,[""].concat(l)),{position:s}):$l.apply(void 0,["",s].concat(l))}var ju,MX,n4,kX,AX,IX,RX,zI,DX,OX,LX,VI,NX,FX,BX,UX,iE,Sb,jI,Hu,zX,al=P(()=>{An(),or(),Ks(),hh(),ph(),ju=function(s){Ir(a,s);function a(l){var d;return d=s.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+l+" for more information.")||this,mn(d)}return a}(Vu(Error)),MX=["Top","Right","Bottom","Left"],n4={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},kX=/^#[a-fA-F0-9]{6}$/,AX=/^#[a-fA-F0-9]{8}$/,IX=/^#[a-fA-F0-9]{3}$/,RX=/^#[a-fA-F0-9]{4}$/,zI=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,DX=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,OX=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,LX=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,VI=function(s){return s.length===7&&s[1]===s[2]&&s[3]===s[4]&&s[5]===s[6]?"#"+s[1]+s[3]+s[5]:s},NX=function(s){return typeof s.red=="number"&&typeof s.green=="number"&&typeof s.blue=="number"&&(typeof s.alpha!="number"||typeof s.alpha>"u")},FX=function(s){return typeof s.red=="number"&&typeof s.green=="number"&&typeof s.blue=="number"&&typeof s.alpha=="number"},BX=function(s){return typeof s.hue=="number"&&typeof s.saturation=="number"&&typeof s.lightness=="number"&&(typeof s.alpha!="number"||typeof s.alpha>"u")},UX=function(s){return typeof s.hue=="number"&&typeof s.saturation=="number"&&typeof s.lightness=="number"&&typeof s.alpha=="number"},iE=BI(VMe),Sb=BI(jMe),jI=BI(HMe),Hu=BI(GMe),zX=["absolute","fixed","relative","static","sticky"]});function WMe(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function VX(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);a&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),l.push.apply(l,d)}return l}function Jg(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?VX(Object(l),!0).forEach(function(d){WMe(s,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):VX(Object(l)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(l,d))})}return s}function Eb(s,a){if(s==null)return{};var l={},d=Object.keys(s),f,g;for(g=0;g<d.length;g++)f=d[g],!(a.indexOf(f)>=0)&&(l[f]=s[f]);return l}var sE=P(()=>{}),jX,r4,HX=P(()=>{jX=X(Ne()),r4=(0,jX.createContext)({})});function $Me(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function GX(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);a&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),l.push.apply(l,d)}return l}function Cb(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?GX(Object(l),!0).forEach(function(d){$Me(s,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):GX(Object(l)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(l,d))})}return s}function i4(s,a){if(s==null)return{};var l={},d=Object.keys(s),f,g;for(g=0;g<d.length;g++)f=d[g],!(a.indexOf(f)>=0)&&(l[f]=s[f]);return l}function KMe(s,a){if(s){if(typeof s=="string")return WX(s,a);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return WX(s,a)}}function WX(s,a){(a==null||a>s.length)&&(a=s.length);for(var l=0,d=new Array(a);l<a;l++)d[l]=s[l];return d}function $X(s,a){var l;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(l=KMe(s))||a&&s&&typeof s.length=="number"){l&&(s=l);var d=0;return function(){return d>=s.length?{done:!0}:{done:!1,value:s[d++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return l=s[Symbol.iterator](),l.next.bind(l)}var HI=P(()=>{});function XMe(s){return typeof s=="function"}var s4,KX,qMe=P(()=>{s4=X(Ne()),HX(),HI(),KX=function(s,a,l){l===void 0&&(l=a.children);var d=(0,s4.useContext)(r4);if(d.useCreateElement)return d.useCreateElement(s,a,l);if(typeof s=="string"&&XMe(l)){a.children;var f=i4(a,["children"]);return l(f)}return(0,s4.createElement)(s,a,l)}});function YMe(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function XX(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);a&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),l.push.apply(l,d)}return l}function Pb(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?XX(Object(l),!0).forEach(function(d){YMe(s,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):XX(Object(l)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(l,d))})}return s}function ZMe(s,a){if(s==null)return{};var l={},d=Object.keys(s),f,g;for(g=0;g<d.length;g++)f=d[g],!(a.indexOf(f)>=0)&&(l[f]=s[f]);return l}var qX=P(()=>{});function QMe(s){return typeof s=="object"&&s!=null}var JMe=P(()=>{});function o4(s){var a;if(!QMe(s))return!1;var l=Object.getPrototypeOf(s);return l==null?!0:((a=l.constructor)===null||a===void 0?void 0:a.toString())===Object.toString()}var YX=P(()=>{JMe()});function ZX(s,a){for(var l=Object.keys(s),d={},f={},g=0,b=l;g<b.length;g++){var _=b[g];a.indexOf(_)>=0?d[_]=s[_]:f[_]=s[_]}return[d,f]}function QX(s,a){if(a===void 0&&(a=[]),!o4(s.state))return ZX(s,a);var l=ZX(s,[].concat(a,["state"])),d=l[0],f=l[1],g=d.state,b=ZMe(d,["state"]);return[Pb(Pb({},g),b),f]}var eke=P(()=>{qX(),YX()});function GI(s,a){if(s===a)return!0;if(!s||!a||typeof s!="object"||typeof a!="object")return!1;var l=Object.keys(s),d=Object.keys(a),f=l.length;if(d.length!==f)return!1;for(var g=0,b=l;g<b.length;g++){var _=b[g];if(s[_]!==a[_])return!1}return!0}var a4=P(()=>{});function JX(s){return s.name==="normalizePropsAreEqualInner"?s:function(a,l){return!o4(a.state)||!o4(l.state)?s(a,l):s(Pb(Pb({},a.state),a),Pb(Pb({},l.state),l))}}var tke=P(()=>{qX(),YX()});function nke(s){return(0,l4.forwardRef)(s)}function rke(s,a){return(0,l4.memo)(s,a)}function oE(s){var a=s.as,l=s.useHook,d=s.memo,f=s.propsAreEqual,g=f===void 0?l==null?void 0:l.unstable_propsAreEqual:f,b=s.keys,_=b===void 0?(l==null?void 0:l.__keys)||[]:b,S=s.useCreateElement,C=S===void 0?KX:S,I=function(O,R){var A=O.as,N=A===void 0?a:A,L=i4(O,["as"]);if(l){var V,G=QX(L,_),$=G[0],Y=G[1],ie=l($,Cb({ref:R},Y)),re=ie.wrapElement,ce=i4(ie,["wrapElement"]),Pe=((V=N.render)===null||V===void 0?void 0:V.__keys)||N.__keys,ye=Pe&&QX(L,Pe)[0],we=ye?Cb(Cb({},ce),ye):ce,Le=C(N,we);return re?re(Le):Le}return C(N,Cb({ref:R},L))};return I=nke(I),d&&(I=rke(I,g&&JX(g))),I.__keys=_,I.unstable_propsAreEqual=JX(g||GI),I}var l4,aE=P(()=>{l4=X(Ne()),HI(),qMe(),eke(),a4(),tke()});function eq(s,a){(0,u4.useDebugValue)(s);var l=(0,u4.useContext)(r4);return l[s]!=null?l[s]:a}var u4,tq=P(()=>{u4=X(Ne()),HX()});function ike(s,a,l){a===void 0&&(a={}),l===void 0&&(l={});var d="use"+s+"Props";(0,nq.useDebugValue)(d);var f=eq(d);return f?f(a,l):l}var nq,ske=P(()=>{nq=X(Ne()),tq()});function oke(s,a,l){a===void 0&&(a={}),l===void 0&&(l={});var d="use"+s+"Options";(0,rq.useDebugValue)(d);var f=eq(d);return f?Cb(Cb({},a),f(a,l)):a}var rq,ake=P(()=>{rq=X(Ne()),tq(),HI()});function lke(s){return Array.isArray(s)?s:typeof s<"u"?[s]:[]}var uke=P(()=>{});function lE(s){var a,l,d=lke(s.compose),f=function(_,S){if(s.useOptions&&(_=s.useOptions(_,S)),s.name&&(_=oke(s.name,_,S)),s.compose)for(var C=$X(d),I;!(I=C()).done;){var O=I.value;_=O.__useOptions(_,S)}return _},g=function(_,S,C){if(_===void 0&&(_={}),S===void 0&&(S={}),C===void 0&&(C=!1),C||(_=f(_,S)),s.useProps&&(S=s.useProps(_,S)),s.name&&(S=ike(s.name,_,S)),s.compose)if(s.useComposeOptions&&(_=s.useComposeOptions(_,S)),s.useComposeProps)S=s.useComposeProps(_,S);else for(var I=$X(d),O;!(O=I()).done;){var R=O.value;S=R(_,S,!0)}var A={},N=S||{};for(var L in N)N[L]!==void 0&&(A[L]=N[L]);return A};g.__useOptions=f;var b=d.reduce(function(_,S){return _.push.apply(_,S.__keys||[]),_},[]);return g.__keys=[].concat(b,((a=s.useState)===null||a===void 0?void 0:a.__keys)||[],s.keys||[]),g.unstable_propsAreEqual=s.propsAreEqual||((l=d[0])===null||l===void 0?void 0:l.unstable_propsAreEqual)||GI,g}var uE=P(()=>{X(Ne()),ske(),HI(),ake(),a4(),uke()});function iq(s,a){a===void 0&&(a=null),s&&(typeof s=="function"?s(a):s.current=a)}function sq(s,a){return(0,oq.useMemo)(function(){return s==null&&a==null?null:function(l){iq(s,l),iq(a,l)}},[s,a])}var oq,aq=P(()=>{oq=X(Ne())});function c4(s){if(s.tagName==="BUTTON")return!0;if(s.tagName==="INPUT"){var a=s;return lq.indexOf(a.type)!==-1}return!1}var lq,d4=P(()=>{lq=["button","color","file","image","reset","submit"]}),h4=P(()=>{}),cke=P(()=>{h4(),X(Ne())}),WI=P(()=>{h4(),X(Ne()),cke()});function uq(s){return s?s.ownerDocument||s:document}var cq=P(()=>{});function dke(s){return s&&uq(s).defaultView||dq}var dq,hke=P(()=>{cq();try{dq=window}catch{}});function pke(){var s=dke();return!!(typeof s<"u"&&s.document&&s.document.createElement)}var $I,p4=P(()=>{hke(),$I=pke()}),f4,m4,g4=P(()=>{f4=X(Ne()),p4(),m4=$I?f4.useLayoutEffect:f4.useEffect});function Tb(s){var a=(0,hq.useRef)(s);return m4(function(){a.current=s}),a}var hq,pq=P(()=>{hq=X(Ne()),g4()});function fke(s){return s.target===s.currentTarget}var mke=P(()=>{});function gke(s){var a=uq(s),l=a.activeElement;return l!=null&&l.nodeName?l:null}var vke=P(()=>{cq()});function fq(s,a){return s===a||s.contains(a)}var mq=P(()=>{});function yke(s){var a=gke(s);if(!a)return!1;if(fq(s,a))return!0;var l=a.getAttribute("aria-activedescendant");return l?l===s.id?!0:!!s.querySelector("#"+l):!1}var bke=P(()=>{vke(),mq()});function _ke(s){return!fq(s.currentTarget,s.target)}var wke=P(()=>{mq()});function KI(s){return $I?window.navigator.userAgent.indexOf(s)!==-1:!1}var xke=P(()=>{p4()});function Ske(s,a){return"matches"in s?s.matches(a):"msMatchesSelector"in s?s.msMatchesSelector(a):s.webkitMatchesSelector(a)}var Eke=P(()=>{});function Cke(s){var a=s;return a.offsetWidth>0||a.offsetHeight>0||s.getClientRects().length>0}function Pke(s){return Ske(s,gq)&&Cke(s)}var gq,Tke=P(()=>{Eke(),gq="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])"}),vq,XI,yq=P(()=>{sE(),aE(),uE(),a4(),vq=["unstable_system"],XI=lE({name:"Role",keys:vq,propsAreEqual:function(s,a){var l=s.unstable_system,d=Eb(s,["unstable_system"]),f=a.unstable_system,g=Eb(a,["unstable_system"]);return l!==f&&!GI(l,f)?!1:GI(d,g)}}),oE({as:"div",useHook:XI})});function bq(s){!yke(s)&&Pke(s)&&s.focus()}function Mke(s){return s.tagName==="BUTTON"||s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.tagName==="A"}function kke(s){return s.tagName==="BUTTON"||s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"}function Ake(s,a,l,d){return s?a&&!l?-1:void 0:a?d:d||0}function v4(s,a){return(0,Mb.useCallback)(function(l){var d;(d=s.current)===null||d===void 0||d.call(s,l),!l.defaultPrevented&&a&&(l.stopPropagation(),l.preventDefault())},[s,a])}var Mb,_q,wq,y4,Ike=P(()=>{sE(),aE(),uE(),Mb=X(Ne()),aq(),d4(),WI(),pq(),g4(),bke(),wke(),xke(),Tke(),yq(),_q=["disabled","focusable"],wq=KI("Mac")&&!KI("Chrome")&&(KI("Safari")||KI("Firefox")),y4=lE({name:"Tabbable",compose:XI,keys:_q,useOptions:function(s,a){var l=a.disabled;return Jg({disabled:l},s)},useProps:function(s,a){var l=a.ref,d=a.tabIndex,f=a.onClickCapture,g=a.onMouseDownCapture,b=a.onMouseDown,_=a.onKeyPressCapture,S=a.style,C=Eb(a,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),I=(0,Mb.useRef)(null),O=Tb(f),R=Tb(g),A=Tb(b),N=Tb(_),L=!!s.disabled&&!s.focusable,V=(0,Mb.useState)(!0),G=V[0],$=V[1],Y=(0,Mb.useState)(!0),ie=Y[0],re=Y[1],ce=s.disabled?Jg({pointerEvents:"none"},S):S;m4(function(){var it=I.current;it&&(Mke(it)||$(!1),kke(it)||re(!1))},[]);var Pe=v4(O,s.disabled),ye=v4(R,s.disabled),we=v4(N,s.disabled),Le=(0,Mb.useCallback)(function(it){var de;(de=A.current)===null||de===void 0||de.call(A,it);var Oe=it.currentTarget;if(!it.defaultPrevented&&wq&&!_ke(it)&&c4(Oe)){var Q=requestAnimationFrame(function(){Oe.removeEventListener("mouseup",je,!0),bq(Oe)}),je=function(){cancelAnimationFrame(Q),bq(Oe)};Oe.addEventListener("mouseup",je,{once:!0,capture:!0})}},[]);return Jg({ref:sq(I,l),style:ce,tabIndex:Ake(L,G,ie,d),disabled:L&&ie?!0:void 0,"aria-disabled":s.disabled?!0:void 0,onClickCapture:Pe,onMouseDownCapture:ye,onMouseDown:Le,onKeyPressCapture:we},C)}}),oE({as:"div",useHook:y4})});function Rke(s){var a=s.currentTarget;return s.isTrusted?c4(a)||a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.tagName==="A"||a.tagName==="SELECT":!1}var qI,xq,b4,Dke=P(()=>{sE(),aE(),uE(),qI=X(Ne()),d4(),WI(),pq(),mke(),Ike(),xq=["unstable_clickOnEnter","unstable_clickOnSpace"],b4=lE({name:"Clickable",compose:y4,keys:xq,useOptions:function(s){var a=s.unstable_clickOnEnter,l=a===void 0?!0:a,d=s.unstable_clickOnSpace,f=d===void 0?!0:d,g=Eb(s,["unstable_clickOnEnter","unstable_clickOnSpace"]);return Jg({unstable_clickOnEnter:l,unstable_clickOnSpace:f},g)},useProps:function(s,a){var l=a.onKeyDown,d=a.onKeyUp,f=Eb(a,["onKeyDown","onKeyUp"]),g=(0,qI.useState)(!1),b=g[0],_=g[1],S=Tb(l),C=Tb(d),I=(0,qI.useCallback)(function(R){var A;if((A=S.current)===null||A===void 0||A.call(S,R),!R.defaultPrevented&&!s.disabled&&!R.metaKey&&fke(R)){var N=s.unstable_clickOnEnter&&R.key==="Enter",L=s.unstable_clickOnSpace&&R.key===" ";if(N||L){if(Rke(R))return;R.preventDefault(),N?R.currentTarget.click():L&&_(!0)}}},[s.disabled,s.unstable_clickOnEnter,s.unstable_clickOnSpace]),O=(0,qI.useCallback)(function(R){var A;if((A=C.current)===null||A===void 0||A.call(C,R),!R.defaultPrevented&&!s.disabled&&!R.metaKey){var N=s.unstable_clickOnSpace&&R.key===" ";b&&N&&(_(!1),R.currentTarget.click())}},[s.disabled,s.unstable_clickOnSpace,b]);return Jg({"data-active":b||void 0,onKeyDown:I,onKeyUp:O},f)}}),oE({as:"button",memo:!0,useHook:b4})}),cE,Sq,Eq,Cq,Oke=P(()=>{sE(),aE(),uE(),cE=X(Ne()),aq(),d4(),WI(),Dke(),Sq=[],Eq=lE({name:"Button",compose:b4,keys:Sq,useProps:function(s,a){var l=a.ref,d=Eb(a,["ref"]),f=(0,cE.useRef)(null),g=(0,cE.useState)(void 0),b=g[0],_=g[1],S=(0,cE.useState)("button"),C=S[0],I=S[1];return(0,cE.useEffect)(function(){var O=f.current;O&&(c4(O)||(O.tagName!=="A"&&_("button"),I(void 0)))},[]),Jg({ref:sq(f,l),role:b,type:C},d)}}),Cq=oE({as:"button",memo:!0,useHook:Eq})}),Pq,Tq,Mq,Lke=P(()=>{sE(),aE(),uE(),yq(),Pq=[],Tq=lE({name:"Group",compose:XI,keys:Pq,useProps:function(s,a){return Jg({role:"group"},a)}}),Mq=oE({as:"div",useHook:Tq})});function Nke(){return $I?document.body:null}var kq,kb,Fke=P(()=>{kq=X(Ne()),g4(),p4(),X(Lu()),kb=(0,kq.createContext)(Nke())}),_4,Bke=P(()=>{typeof window<"u"&&(_4={get passive(){}},window.addEventListener("testPassive",null,_4),window.removeEventListener("testPassive",null,_4))}),ev=P(()=>{X(Ne()),WI(),Oke(),Lke(),X(Lu()),Fke(),Bke(),h4()});function wr(s){let a=(0,w4.useMemo)(()=>{let f=s;return{get current(){return f},set current(g){f=g,d(g)}}},[]),[l,d]=(0,w4.useState)(()=>s);return[a,l]}var w4,Rr=P(()=>{w4=X(Ne())});function Uke(s){return a=>No.default.createElement(Lq,null,No.default.createElement(s,F({},a)))}var No,Aq,Iq,kr,Ab,Rq,Dq,Oq,x4,S4,Lq,Dr=P(()=>{al(),Ve(),Ve(),No=X(Ne()),Aq=X(Lu()),ev(),Rr(),kr=uo(Iq||(Iq=J([`
  #pointer-root & {
    pointer-events: none;
  }
  #pointer-root.normal & {
    pointer-events: auto;
  }
`]))),Ab={panel:{bg:"#282b2f",head:{title:{color:"#bbb"},punctuation:{color:"#808080"}},body:{compoudThing:{label:{get color(){return Sb(.6,Ab.panel.bg)}}}}}},Dq=typeof window<"u"?jl(Rq||(Rq=J([`
  :host {
    all: initial;
    color: white;
    font: 11px -apple-system, BlinkMacSystemFont, Segoe WPC, Segoe Editor,
      HelveticaNeue-Light, Ubuntu, Droid Sans, sans-serif;
  }

  * {
    padding: 0;
    margin: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    list-style: none;
  }
`]))):{},x4=le.div(Oq||(Oq=J([`
  z-index: 51;
  position: fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  pointer-events: none;
`]))),S4=s=>No.default.createElement(jS,{disableVendorPrefixes:!0,target:s.target},No.default.createElement(No.default.Fragment,null,No.default.createElement(Dq,null),s.children)),Lq=s=>{let[a,l]=(0,No.useState)(null),[d,f]=(0,No.useState)(null);(0,No.useLayoutEffect)(()=>{if(!a)return;let{parentNode:_}=a;if(!_)return;let S=_.shadowRoot?parent.shadowRoot:_.attachShadow({mode:"open"});f(S)},[a]);let[g,b]=wr(void 0);return d?Aq.default.createPortal(No.default.createElement(S4,{target:d},No.default.createElement(No.default.Fragment,null,No.default.createElement(x4,{ref:g}),No.default.createElement(kb.Provider,{value:b},s.children))),d):No.default.createElement("template",{ref:l,"shadow-root":"open"},s.children)}}),Ib,Nq,Fq,df,Bq,dE,Uq,zq,YI,Vq,E4,Wc,fh=P(()=>{Dr(),Ve(),Ib={get outlinePanel(){return 1},get propsPanel(){return Ib.outlinePanel},get sequenceEditorPanel(){return this.outlinePanel-1},get toolbar(){return this.outlinePanel+1},get pluginPanes(){return this.sequenceEditorPanel-1}},Nq=Ab.panel.bg,df=le.span(Fq||(Fq=J([`
  white-space: nowrap;
`]))),dE=le.span(Bq||(Bq=J([`
  white-space: nowrap;
  color: `,`;
`])),Ab.panel.head.punctuation.color),zq=le.div(Uq||(Uq=J([`
  background: `,`;
  flex-grow: 1;
  overflow-y: scroll;
  padding: 0;
`])),Nq),YI=18,E4=le.div(Vq||(Vq=J([`
  height: `,`px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  padding: 0 10px;
  position: relative;
  color: #adadadb3;
  border-bottom: 1px solid rgb(0 0 0 / 13%);
  background-color: #25272b;
  font-size: 10px;
  font-weight: 500;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`])),YI),Wc=100}),jq,Gu,Rb=P(()=>{jq=()=>{},Gu=jq});function zke(s){return C4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),C4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.775 2.781a.5.5 0 01.5.5v1.7H4.67c.108-.957.92-1.7 1.905-1.7h6.608a1.917 1.917 0 110 3.834H6.574c-.78 0-1.452-.466-1.751-1.135H2.275v5.03h2.39a2.032 2.032 0 012.023-1.854h6.38a2.031 2.031 0 110 4.063h-6.38c-.83 0-1.543-.497-1.858-1.21H1.775a.5.5 0 01-.5-.5V3.281a.5.5 0 01.5-.5zm4.799 1.5h6.608a.917.917 0 110 1.834H6.574a.917.917 0 110-1.834zm.114 5.875h6.38a1.031 1.031 0 110 2.063h-6.38a1.032 1.032 0 110-2.063z",fill:"currentColor"}))}var C4,P4,Vke=P(()=>{C4=X(Ne()),P4=zke});function jke(s){return T4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),T4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.5L4 6.654 5.2 5.5 8 8.385 10.8 5.5 12 6.654 8 10.5z",fill:"currentColor"}))}var T4,Hq,Hke=P(()=>{T4=X(Ne()),Hq=jke});function Gke(s){return M4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),M4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 3c-1.072 0-1.969.904-1.969 1.969 0 1 .929 1.968 1.969 1.968h9A1.969 1.969 0 1012.5 3h-9zm9 1H5.531v1.938H12.5A.969.969 0 0012.5 4zM3.5 9.14a1.969 1.969 0 000 3.938h9a1.969 1.969 0 100-3.937h-9zm9 1H8.406v1.938H12.5a.969.969 0 100-1.937z",fill:"currentColor"}))}var M4,Gq,Wke=P(()=>{M4=X(Ne()),Gq=Gke});function $ke(s){return k4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),k4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.166 7.994a2.26 2.26 0 114.518 0 2.26 2.26 0 01-4.518 0zM2.425 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM5.74 7.994a2.26 2.26 0 114.519 0 2.26 2.26 0 01-4.519 0zM8 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM13.575 5.735a2.26 2.26 0 100 4.519 2.26 2.26 0 000-4.52zm-1.086 2.26a1.085 1.085 0 112.171 0 1.085 1.085 0 01-2.17 0z",fill:"currentColor"}))}var k4,Wq,Kke=P(()=>{k4=X(Ne()),Wq=$ke});function Xke(s){return A4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),A4.createElement("path",{d:"M8.339 4.5l-2.055.644 4.451 1.393v2.748l-2.966.928-2.504-.783V6.738l2.42.758 2.055-.644-4.458-1.395L4 5.858v4.463L7.768 11.5 12 10.175V5.646L8.339 4.5z",fill:"currentColor"}))}var A4,I4,qke=P(()=>{A4=X(Ne()),I4=Xke});function Yke(s){return R4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),R4.createElement("path",{d:"M8 1.57c-.416 0-.752.36-.752.804v.482c-1.715.372-3.006 1.994-3.006 3.938v.473c0 1.18-.407 2.32-1.14 3.205l-.173.208a.85.85 0 00-.125.864.75.75 0 00.686.475h9.019a.752.752 0 00.686-.475.845.845 0 00-.125-.864l-.174-.208a5.026 5.026 0 01-1.139-3.205v-.473c0-1.944-1.291-3.566-3.006-3.938v-.482c0-.445-.336-.804-.752-.804zm1.063 12.39c.282-.301.44-.71.44-1.138H6.496c0 .428.158.837.44 1.138.281.302.664.47 1.063.47.4 0 .783-.168 1.064-.47z",fill:"currentColor"}))}var R4,ZI,Zke=P(()=>{R4=X(Ne()),ZI=Yke});function Qke(s){return D4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),D4.createElement("path",{d:"M6.8 11.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6zm6-7.2h-2.4v-.6A1.8 1.8 0 008.6 2H7.4a1.8 1.8 0 00-1.8 1.8v.6H3.2a.6.6 0 100 1.2h.6v6.6A1.8 1.8 0 005.6 14h4.8a1.8 1.8 0 001.8-1.8V5.6h.6a.6.6 0 100-1.2zm-6-.6a.6.6 0 01.6-.6h1.2a.6.6 0 01.6.6v.6H6.8v-.6zm4.2 8.4a.6.6 0 01-.6.6H5.6a.6.6 0 01-.6-.6V5.6h6v6.6zm-1.8-.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6z",fill:"currentColor"}))}var D4,O4,Jke=P(()=>{D4=X(Ne()),O4=Qke}),hE=P(()=>{Vke(),Hke(),Wke(),Kke(),qke(),Zke(),Jke()}),$c,$q,QI,Kq,Xq,qq,Yq,Zq,Qq,Jq,eY,tY,nY,rY,iY,sY,oY,aY,pE,JI=P(()=>{$c=X(Ne()),Ve(),Rb(),Dr(),hE(),QI=le.li($q||($q=J([`
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  justify-content: flex-start;
  flex-direction: column;
  align-items: flex-start;
`]))),Xq=le.div(Kq||(Kq=J([""]))),Yq=le(Xq)(qq||(qq=J([`
  position: relative;
  margin-top: 2px;
  margin-bottom: 2px;
  margin-left: calc(4px + var(--depth) * 16px);
  padding-left: 4px;
  padding-right: 8px;
  gap: 4px;
  height: 21px;
  line-height: 0;
  box-sizing: border-box;
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  pointer-events: none;
  white-space: nowrap;

  border-radius: 2px;
  box-shadow: 0 3px 4px -1px rgba(0, 0, 0, 0.48);

  color: rgba(255, 255, 255, 0.9);
  background: rgba(40, 43, 47, 0.65);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);

  &.descendant-is-selected {
    background: rgba(29, 53, 59, 0.7);
  }

  `,`;
  &:not(.not-selectable):not(.selected):hover {
    background: rgba(59, 63, 69, 0.9);

    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &:not(.not-selectable):not(.selected):active {
    background: rgba(82, 88, 96, 0.9);
    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &.selected {
    background: rgba(30, 88, 102, 0.7);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),kr),Qq=uo(Zq||(Zq=J([`
  font-weight: 500;
  font-size: 11px;
  & {
  }
`]))),eY=le.span(Jq||(Jq=J([`
  `,`;

  `,`;
  position: relative;
  // Compensate for border bottom
  top: 0.5px;
  display: flex;
  height: 20px;
  align-items: center;
  box-sizing: border-box;
`])),Qq,kr),nY=le.div(tY||(tY=J([`
  font-weight: 500;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  opacity: 0.99;
`]))),iY=le.span(rY||(rY=J([`
  font-size: 9px;
  position: relative;
  display: block;
  transition: transform 0.1s ease-out;

  &:hover {
    transform: rotate(-20deg);
  }

  `,`.collapsed & {
    transform: rotate(-90deg);

    &:hover {
      transform: rotate(-70deg);
    }
  }
`])),QI),oY=le.ul(sY||(sY=J([`
  margin: 0;
  padding: 0;
  list-style: none;

  `,`.collapsed & {
    display: none;
  }
`])),QI),aY=({label:s,children:a,depth:l,select:d,selectionStatus:f,labelDecoration:g,collapsed:b=!1,setIsCollapsed:_})=>{let S=a!==void 0;return $c.default.createElement(QI,{style:{"--depth":l},className:b?"collapsed":""},$c.default.createElement(Yq,{className:f,onClick:d??Gu,"data-header":!0},$c.default.createElement(nY,null,S?$c.default.createElement(iY,{onClick:C=>{C.stopPropagation(),C.preventDefault(),_==null||_(!b)}},$c.default.createElement(Hq,null)):$c.default.createElement(I4,null)),$c.default.createElement(eY,null,$c.default.createElement("span",null,s)),g),S&&$c.default.createElement(oY,null,a))},pE=aY});function eAe(s){return Object.keys(s)}function tAe(s){return Object.keys((0,Kc.val)(s.sheetTemplatesP))}function nAe(){let s=Lo(hf().filter(a=>cn(a)||Et(a)).map(a=>Et(a)?a.sheet:a))[0];if(s)return s.getSequence()}var Kc,hf,lY,pf=P(()=>{Kc=Nt,Jt(),di(),Te(),hf=()=>{var s;let a=(0,Kc.val)(ue().projectsP),l=((s=(0,Kc.val)(ue().atomP.historic.panels.outlinePanel.selection))!=null?s:[]).map(d=>{let f=a[d.projectId];if(!f)return;if(d.type==="Project")return f;if(!(0,Kc.val)(f.sheetTemplatesP[d.sheetId]))return;let g=lY(f,d.sheetId);if(!g)return;if(d.type==="Sheet")return g;let b=(0,Kc.val)(g.objectsP[d.objectKey]);if(b)return b});return Lo(l.filter(d=>typeof d<"u"))},lY=(s,a)=>{let l=ue().atomP.historic.projects.stateByProjectId[s.address.projectId],d=(0,Kc.val)(l.stateBySheetId[a].selectedInstanceId),f=(0,Kc.val)(s.sheetTemplatesP[a]);if(f){if(d)return(0,Kc.val)(f.instancesP[d]);{let g=(0,Kc.val)(f.instancesP);return g[eAe(g)[0]]}}}}),uY,cY,rAe=P(()=>{Te(),uY=X(Ne()),JI(),Sn(),pf(),cY=({sheetObject:s,depth:a,overrideLabel:l})=>{let d=()=>{ue().transaction(({stateEditors:g})=>{g.studio.historic.panels.outline.selection.set([s])})},f=Yn(()=>hf(),[]);return uY.default.createElement(pE,{select:d,label:l??s.address.objectKey,depth:a,selectionStatus:f.includes(s)?"selected":"not-selected"})}});function L4(s){var a;let l=s.type==="namespace"?"namespace:".concat(s.sheet.address.sheetId,":").concat(s.path.join("/")):s.type==="Theatre_Project"?"project":s.type==="Theatre_Sheet"?"sheetInstance:".concat(s.address.sheetId,":").concat(s.address.sheetInstanceId):"unknown",d=s.type==="namespace"?s.sheet.address.projectId:s.address.projectId,f=(a=rr(ue().atomP.ahistoric.projects.stateByProjectId[d].collapsedItemsInOutline[l]))!=null?a:!1,g=(0,dY.useCallback)(b=>{ue().transaction(({stateEditors:_})=>{_.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline.set({projectId:d,isCollapsed:b,itemKey:l})})},[l]);return{collapsed:f,setCollapsed:g}}var dY,N4=P(()=>{dY=X(Ne()),Te(),Sn()});function hY(s){return Xc.default.createElement(Xc.default.Fragment,null,[...s.namespace.entries()].map(([a,{object:l,nested:d}])=>Xc.default.createElement(iAe,{key:a,label:a,object:l,nested:d,visualIndentation:s.visualIndentation,path:s.path,sheet:s.sheet})))}function iAe(s){let{nested:a,label:l,object:d,sheet:f}=s,{collapsed:g,setCollapsed:b}=L4({type:"namespace",sheet:f,path:[...s.path,l]}),_=a&&Xc.default.createElement(hY,{namespace:a,path:[...s.path,l],key:"namespaceTree("+l+")",visualIndentation:s.visualIndentation+1,sheet:f}),S=d&&Xc.default.createElement(cY,{depth:s.visualIndentation,key:"objectPath("+d.address.objectKey+")",sheetObject:d,overrideLabel:l});return Xc.default.createElement(Xc.default.Fragment,{key:"".concat(l," - ").concat(s.visualIndentation)},S,_&&Xc.default.createElement(pE,{selectionStatus:"not-selectable",label:l,key:"baseItem(".concat(l,")"),depth:s.visualIndentation,children:_,collapsed:g,setIsCollapsed:b}))}function pY(s,a,l=sAe(a)){let[d,...f]=l,g=s.get(d);g||(g={nested:void 0,object:void 0,path:[...l]},s.set(d,g)),f.length===0?(console.assert(!g.object,"expect not to have existing object with same name",{existing:g,object:a}),g.object=a):(g.nested||(g.nested=new Map),pY(g.nested,a,f))}function sAe(s){let a=F4.get(s);return a||(a=s.address.objectKey.split(yY),console.assert(a.length>0,"expected not empty"),F4.set(s,a)),a}var fY,Xc,mY,gY,vY,yY,F4,oAe=P(()=>{Sn(),fY=Nt,Xc=X(Ne()),Ve(),rAe(),JI(),N4(),le.li(mY||(mY=J([`
  color: `,`;
`])),s=>s.isSelected?"white":"hsl(1, 1%, 80%)"),gY=({sheet:s,depth:a})=>Yn(()=>{let l=(0,fY.val)(s.objectsP),d=Object.values(l).filter(g=>g!=null),f=new Map;return d.forEach(g=>{pY(f,g)}),Xc.default.createElement(hY,{namespace:f,visualIndentation:a,path:[],sheet:s})},[s,a]),vY=gY,yY=/\s*\/\s*/g,F4=new WeakMap}),Db,bY,_Y,wY,xY,SY,EY,aAe=P(()=>{Te(),pf(),Sn(),Db=X(Ne()),Ve(),oAe(),JI(),N4(),_Y=le.div(bY||(bY=J([`
  display: flex;
`]))),le.li(wY||(wY=J([`
  color: `,`;
`])),s=>s.isSelected?"white":"hsl(1, 1%, 80%)"),SY=le.div(xY||(xY=J([""]))),EY=({sheet:s,depth:a})=>{let{collapsed:l,setCollapsed:d}=L4(s),f=(0,Db.useCallback)(()=>{ue().transaction(({stateEditors:g})=>{g.studio.historic.panels.outline.selection.set([s])})},[s]);return Yn(()=>{let g=hf();return Db.default.createElement(pE,{depth:a,select:f,setIsCollapsed:d,collapsed:l,selectionStatus:g.some(b=>b===s)?"selected":g.some(b=>b.type==="Theatre_SheetObject"&&b.sheet===s)?"descendant-is-selected":"not-selected",label:Db.default.createElement(_Y,null,s.address.sheetId,": ",s.address.sheetInstanceId)},Db.default.createElement(SY,null,Db.default.createElement(vY,{depth:a+1,sheet:s,key:"objectList"+s.address.sheetInstanceId})))},[a,l])}}),B4,Ob,CY,PY,TY,MY,lAe=P(()=>{Sn(),B4=Nt,Ob=X(Ne()),Ve(),aAe(),le.div(CY||(CY=J([`
  display: flex;
`]))),le.li(PY||(PY=J([`
  color: `,`;
`])),s=>s.isSelected?"white":"hsl(1, 1%, 80%)"),le.div(TY||(TY=J([""]))),MY=({sheetId:s,depth:a,project:l})=>Yn(()=>{let d=(0,B4.val)(l.sheetTemplatesP[s]);if(!d)return Ob.default.createElement(Ob.default.Fragment,null);let f=(0,B4.val)(d.instancesP);return Ob.default.createElement(Ob.default.Fragment,null,Object.entries(f).map(([g,b])=>Ob.default.createElement(EY,{key:b.address.sheetInstanceId,sheet:b,depth:a})))},[a,s,l])}),eR,kY,AY,uAe=P(()=>{pf(),Sn(),eR=X(Ne()),lAe(),kY=({project:s,depth:a})=>Yn(()=>{if(!s)return null;let l=tAe(s);return eR.default.createElement(eR.default.Fragment,null,l.map(d=>eR.default.createElement(MY,{depth:a,sheetId:d,key:"sheet-".concat(d),project:s})))},[s,a]),AY=kY}),fE,IY,RY,DY,OY,LY,cAe=P(()=>{fE=X(Ne()),JI(),uAe(),Te(),Sn(),pf(),IY=Nt,Ve(),N4(),DY=le.div(RY||(RY=J([`
  color: #ff6363;
  margin-left: 11px;
  background: #4c282d;
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 10px;
  box-shadow: 0 2px 8px -4px black;
`]))),OY=({depth:s,project:a})=>{let l=Yn(()=>hf(),[]),d=Yn(()=>{let _=a.address.projectId,S=(0,IY.val)(ue().atomP.ephemeral.coreByProject[_].loadingState);return(S==null?void 0:S.type)==="browserStateIsNotBasedOnDiskState"},[a]),f=(0,fE.useCallback)(()=>{ue().transaction(({stateEditors:_})=>{_.studio.historic.panels.outline.selection.set([a])})},[a]),{collapsed:g,setCollapsed:b}=L4(a);return fE.default.createElement(pE,{depth:s,label:a.address.projectId,setIsCollapsed:b,collapsed:g,labelDecoration:d?fE.default.createElement(DY,null,"Has Conflicts"):null,children:fE.default.createElement(AY,{project:a,depth:s+1}),selectionStatus:l.includes(a)?"selected":l.some(_=>_.address.projectId===a.address.projectId)?"descendant-is-selected":"not-selected",select:f})},LY=OY}),NY,U4,FY,BY,UY,zY,dAe=P(()=>{NY=Nt,Sn(),Te(),U4=X(Ne()),Ve(),cAe(),BY=le.ul(FY||(FY=J([`
  list-style: none;
  margin: 0;
  padding: 0;
  padding-right: 4px;
`]))),UY=s=>Yn(()=>{let a=(0,NY.val)(ue().projectsP);return U4.default.createElement(BY,null,Object.keys(a).map(l=>{let d=a[l];return U4.default.createElement(LY,{depth:0,project:d,key:"projectListItem-".concat(l)})}))},[]),zY=UY});function VY(s){let[a,l]=(0,z4.useState)(!1);return(0,z4.useEffect)(()=>{let d=g=>{let b=a?200:50,_=56,S=s==="left"?g.x<b:g.x>window.innerWidth-b;S&&(S=g.y>_),l(!!S)};document.addEventListener("mousemove",d);let f=()=>{l(!1)};return document.addEventListener("mouseleave",f),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseleave",f)}},[a]),a}var z4,jY=P(()=>{z4=X(Ne())}),mE,Lb,V4,HY,GY,WY,$Y,tR,gE,KY,hAe=P(()=>{mE=X(Ne()),Ve(),fh(),dAe(),Sn(),Te(),jY(),Lb=Nt,Dr(),V4="44px",GY=le.div(HY||(HY=J([`
  `,`;
  background-color: transparent;
  position: absolute;
  left: 8px;
  z-index: `,`;

  top: calc(`,` + 8px);
  height: fit-content;
  max-height: calc(100% - `,`);
  overflow-y: scroll;
  overflow-x: hidden;
  padding: 0;
  user-select: none;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;

  display: `,`;

  &:hover {
    display: block;
  }

  // Create a small buffer on the bottom to aid selecting the bottom item in a long, scrolling list
  &::after {
    content: '';
    display: block;
    height: 20px;
  }
`])),kr,Ib.outlinePanel,V4,V4,({pin:s})=>s?"block":"none"),WY=()=>{var s;let a=(s=rr(ue().atomP.ahistoric.pinOutline))!=null?s:!0,l=rr(KY),d=VY("left");return(0,mE.useLayoutEffect)(()=>{tR.set(d)},[d]),(0,mE.useEffect)(()=>()=>{gE.set(!1),tR.set(!1)},[]),mE.default.createElement(GY,{pin:a||l,onMouseEnter:()=>{gE.set(!0)},onMouseLeave:()=>{gE.set(!1)}},mE.default.createElement(zY,null))},$Y=WY,tR=new Lb.Atom(!1),gE=new Lb.Atom(!1),KY=(0,Lb.prism)(()=>{let s=(0,Lb.val)(gE.prism),a=(0,Lb.val)(tR.prism);return s||a})}),XY,qY,YY,pAe=P(()=>{Ve(),qY=le.input.attrs({type:"checkbox"})(XY||(XY=J([`
  outline: none;
`]))),YY=qY});function fAe({propConfig:s,editingTools:a,value:l,autoFocus:d}){let f=(0,j4.useCallback)(g=>{a.permanentlySetValue(!!g.target.checked)},[s,a]);return j4.default.createElement(QY,{checked:l,onChange:f,autoFocus:d})}var j4,ZY,QY,JY,mAe=P(()=>{j4=X(Ne()),Ve(),pAe(),QY=le(YY)(ZY||(ZY=J([`
  margin-left: 6px;

  :focus {
    outline: 1px solid #555;
  }
`]))),JY=fAe});function nR(s){return a=>{s.forEach(l=>{typeof l=="function"?l(a):l!=null&&(l.current=a)})}}var rR=P(()=>{});function H4(s,a,l){(0,eZ.useEffect)(()=>{if(!s||l===!1)return;let d=Array.isArray(s)?s.filter(g=>g):[s],f=g=>{d.every(b=>!g.composedPath().includes(b))&&a(g)};return window.addEventListener("mousedown",f,{capture:!0,passive:!1}),()=>{window.removeEventListener("mousedown",f,{capture:!0,passive:!1})}},[s,l])}var eZ,G4=P(()=>{eZ=X(Ne())}),mh,tZ,gh,nZ,rZ,iZ,sZ,W4,oZ,Kl,aZ,ll=P(()=>{mh=X(Ne()),Ve(),tZ="pointer-root",gh="--lockedCursor",rZ=le.div(nZ||(nZ=J([`
  pointer-events: auto;
  &.normal {
    pointer-events: none;
  }
`]))),sZ=le.div(iZ||(iZ=J([`
  position: absolute;
  inset: 0;
  pointer-events: none;

  #pointer-root:not(.normal) > & {
    pointer-events: auto;
  }
`]))),W4=(0,mh.createContext)({}),oZ=s=>{var a,l,d,f;let[g,b]=(0,mh.useState)([]),_=(0,mh.useMemo)(()=>({getLock:(C,I)=>{let O={className:C,cursor:I};return b(R=>[...R,O]),()=>{b(R=>R.filter(A=>A!==O))}}}),[]),S=(l=(a=g[0])==null?void 0:a.cursor)!=null?l:"";return mh.default.createElement(W4.Provider,{value:_},mh.default.createElement(rZ,{id:tZ,className:((f=(d=g[0])==null?void 0:d.className)!=null?f:"normal")+" "+s.className},mh.default.createElement(sZ,{style:{cursor:S,[gh]:S}},s.children)))},Kl=(s,a,l)=>{let d=(0,mh.useContext)(W4);(0,mh.useLayoutEffect)(()=>{if(s)return d.getLock(a,l)},[s,a,l])},aZ=oZ});function lZ(s){return vE.default.createElement($4.Provider,{value:s.logger},s.children)}function ff(s,a){let l=(0,vE.useContext)($4);return(0,vE.useMemo)(()=>s?l.named(s,a):l,[l,s,a])}var vE,$4,mf=P(()=>{vE=X(Ne()),$4=vE.default.createContext(null)});function gAe(){let s=ff("PointerCapturing"),a=Wu.default.useRef(null),l=()=>a.current!=null;return d=>{let f,g=b=>(f=b,a.current=b,b);return{capturing:{capturePointer(b){if(s._debug("Capturing pointer",{forDebugName:d,reason:b}),a.current!=null)throw new Error('"'.concat(d,'" attempted capturing pointer for "').concat(b,'" while already captured by "').concat(a.current.debugOwnerName,'" for "').concat(a.current.debugReason,'"'));let _=g({debugOwnerName:d,debugReason:b});return{isCapturing(){return _===a.current},release(){return _===a.current?(s._debug("Releasing pointer",{forDebugName:d,reason:b}),g(null),!0):!1}}},isPointerBeingCaptured:l},forceRelease(){f&&a.current===f&&(s._debug("Force releasing pointer",{localCapture:f}),g(null))}}}}function vAe(s){let a=gAe();return Wu.default.createElement(K4.Provider,{value:a},Wu.default.createElement(cZ,{children:s.children}))}function uZ(s){let a=(0,Wu.useContext)(K4),l=(0,Wu.useMemo)(()=>a(s),[s,a]);return(0,Wu.useEffect)(()=>()=>{l.forceRelease()},[l]),l.capturing}var Wu,K4,cZ,X4=P(()=>{Wu=X(Ne()),mf(),K4=Wu.default.createContext(null),cZ=Wu.default.memo(({children:s})=>Wu.default.createElement(Wu.default.Fragment,null,s))}),q4,yAe=P(()=>{q4=typeof window<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)});function Bi(s,a){let l=(0,Nb.useRef)(a);l.current=a;let d=a.shouldPointerLock&&!q4,f=(0,Nb.useRef)({domDragStarted:!1}),{capturePointer:g}=uZ("useDrag for ".concat(a.debugName)),b=(0,Nb.useRef)({onDrag:Gu,onDragEnd:Gu,onClick:Gu}),_=(0,Nb.useRef)(),[S,C]=wr(!1);return(0,Nb.useLayoutEffect)(()=>{if(!s)return;let I=()=>{let $=f.current.domDragStarted&&f.current.detection.detected;S.current!==$&&(S.current=$)},O=$=>{if(!f.current.domDragStarted)return;let Y=f.current;if(!bAe($,Y)&&(Y.detection.detected||(Y.detection.totalDistanceMoved+=Math.abs($.movementY)+Math.abs($.movementX),Y.detection.totalDistanceMoved>dZ&&(d&&s.requestPointerLock(),Y.detection={detected:!0,dragMovement:{x:0,y:0},dragEventCount:0},I())),Y.detection.detected)){Y.detection.dragEventCount+=1;let{dragMovement:ie}=Y.detection;if(d)ie.x+=$.movementX,ie.y+=$.movementY;else{let{startPos:re}=Y;ie.x=$.screenX-re.x,ie.y=$.screenY-re.y}b.current.onDrag(ie.x,ie.y,$,$.movementX,$.movementY)}},R=$=>{if(N(),!f.current.domDragStarted)return;let Y=f.current.detection.detected;f.current={domDragStarted:!1},a.shouldPointerLock&&!q4&&document.exitPointerLock(),b.current.onDragEnd(Y),window.focus(),Y||b.current.onClick($),I()},A=()=>{document.addEventListener("mousemove",O),document.addEventListener("mouseup",R)},N=()=>{var $;($=_.current)==null||$.release(),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",R)},L=$=>{l.current.disabled||f.current.domDragStarted&&f.current.detection.detected&&(l.current.dontBlockMouseDown||($.stopPropagation(),$.preventDefault()),f.current.detection={detected:!1,totalDistanceMoved:0},I())},V=$=>{var Y,ie,re,ce;(Y=_.current)==null||Y.release();let Pe=l.current;if(Pe.disabled===!0||!((ie=Pe.buttons)!=null?ie:[0]).includes($.button))return;let ye=Pe.onDragStart($);ye!==!1&&(b.current.onDrag=ye.onDrag,b.current.onDragEnd=(re=ye.onDragEnd)!=null?re:Gu,b.current.onClick=(ce=ye.onClick)!=null?ce:Gu,_.current=g("Drag start"),Pe.dontBlockMouseDown||($.stopPropagation(),$.preventDefault()),f.current={domDragStarted:!0,startPos:{x:$.screenX,y:$.screenY},detection:{detected:!1,totalDistanceMoved:0}},I(),A())},G=$=>{V($)};return s.addEventListener("mousedown",G),s.addEventListener("click",L),()=>{var $,Y;N(),s.removeEventListener("mousedown",G),s.removeEventListener("click",L),f.current.domDragStarted&&((Y=($=b.current).onDragEnd)==null||Y.call($,f.current.detection.detected)),f.current={domDragStarted:!1},I()}},[s]),Kl(C&&!!a.lockCSSCursorTo,"dragging",a.lockCSSCursorTo),[C]}function bAe(s,a){return(!a.detection.detected||a.detection.detected&&a.detection.dragEventCount<3)&&(Math.abs(s.movementX)>Y4||Math.abs(s.movementY)>Y4)}var Nb,dZ,Y4,Es=P(()=>{Nb=X(Ne()),ll(),X4(),Rb(),yAe(),Rr(),dZ=3,Y4=100});function _Ae(s){return isNaN(s)?"NaN":Oo(s)?s.toFixed(0):Wg(s,3).toString()}var hZ,pZ,vh,fZ,iR,mZ,gZ,vZ,yZ,bZ,_Z,wZ,xZ,sR,Z4=P(()=>{di(),hZ=X(Ne()),pZ=X(Ne()),vh=X(Ne()),Ve(),rR(),Rr(),G4(),Es(),iR=le.div(fZ||(fZ=J([`
  height: 100%;
  width: 100%;
  position: relative;
  z-index: 0;
  box-sizing: border-box;
  display: flex;
  align-items: center;

  &:after {
    position: absolute;
    inset: 1px 0 2px;
    display: block;
    content: ' ';
    background-color: transparent;
    border: 1px solid transparent;
    z-index: -2;
    box-sizing: border-box;
    border-radius: 1px;
  }

  &:hover,
  &.dragging,
  &.editingViaKeyboard {
    &:after {
      background-color: #10101042;
      border-color: #00000059;
    }
  }
`]))),gZ=le.input(mZ||(mZ=J([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: ew-resize;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;

  &:focus {
    cursor: text;
  }
`]))),yZ=le.div(vZ||(vZ=J([`
  position: absolute;
  inset: 3px 2px 4px;
  transform: scale(var(--percentage), 1);
  transform-origin: top left;
  background-color: #2d5561;
  z-index: -1;
  border-radius: 2px;
  pointer-events: none;

  `,".dragging &, ",`.noFocus:hover & {
    background-color: #338198;
  }
`])),iR,iR),_Z=le.div(bZ||(bZ=J([`
  display: contents;
`]))),wZ=s=>!0,xZ=s=>{var a;let[l]=wr({mode:"noFocus"}),d=(a=s.isValid)!=null?a:wZ,f=(0,vh.useRef)(s);f.current=s;let g=(0,vh.useRef)(null);H4(g.current,()=>{g.current.blur()},l.current.mode==="editingViaKeyboard");let b=(0,vh.useRef)(null),_=(0,vh.useMemo)(()=>{let V=ye=>{let we=ye.target,{value:Le}=we,it=l.current;l.current=B(F({},it),{currentEditedValueInString:Le});let de=parseFloat(Le);!isFinite(de)||!d(de)||f.current.temporarilySetValue(de)},G=()=>{l.current.mode==="editingViaKeyboard"&&($(),l.current={mode:"noFocus"}),s.onBlur&&s.onBlur()},$=()=>{let ye=l.current,we=parseFloat(ye.currentEditedValueInString);!isFinite(we)||!d(we)||ye.valueBeforeEditing===we?f.current.discardTemporaryValue():f.current.permanentlySetValue(we)},Y=ye=>{ye.key==="Escape"?(f.current.discardTemporaryValue(),l.current={mode:"noFocus"},g.current.blur()):(ye.key==="Enter"||ye.key==="Tab")&&($(),g.current.blur())},ie=ye=>{l.current.mode==="noFocus"&&(g.current.focus(),ye.preventDefault()),ye.stopPropagation()},re=()=>{l.current.mode==="noFocus"?ce():l.current.mode},ce=()=>{let ye=f.current.value;l.current={mode:"editingViaKeyboard",currentEditedValueInString:String(ye),valueBeforeEditing:ye},setTimeout(()=>{g.current.focus(),g.current.setSelectionRange(0,100)})},Pe;return{inputChange:V,onBlur:G,transitionToDraggingMode:()=>{var ye;let we=f.current.value;Pe=(ye=g.current)==null?void 0:ye.getBoundingClientRect().width,l.current={mode:"dragging"};let Le=we,it=we;return b.current=document.body.style.cursor,{onDrag(de,Oe,Q,je){let Rt=Q.altKey?je/10:je,Ie=it+s.nudge({deltaX:Rt,deltaFraction:Rt/Pe,magnitude:1});it=s.range?_i(Ie,s.range[0],s.range[1]):Ie,f.current.temporarilySetValue(it)},onDragEnd(de){de?(Le===it?f.current.discardTemporaryValue():f.current.permanentlySetValue(it),l.current={mode:"noFocus"}):(f.current.discardTemporaryValue(),l.current={mode:"noFocus"})},onClick(){g.current.focus(),g.current.setSelectionRange(0,100)}}},onInputKeyDown:Y,onClick:ie,onFocus:re}},[]);(0,hZ.useEffect)(()=>()=>{_.onBlur()},[]);let S=l.current.mode!=="editingViaKeyboard"?_Ae(s.value):l.current.currentEditedValueInString;typeof S=="number"&&isNaN(S)&&(S="NaN");let C=[g];s.inputRef&&C.push(s.inputRef);let I=vh.default.createElement(gZ,{key:"input",type:"text",onChange:_.inputChange,value:S,onBlur:_.onBlur,onKeyDown:_.onInputKeyDown,onClick:_.onClick,onFocus:_.onFocus,ref:nR(C),onMouseDown:V=>{V.stopPropagation()},onDoubleClick:V=>{V.preventDefault(),V.stopPropagation()},autoFocus:s.autoFocus}),{range:O}=s,R=parseFloat(S),A=O?vh.default.createElement(yZ,{style:{"--percentage":_i((R-O[0])/(O[1]-O[0]),0,1)}}):null,[N,L]=(0,pZ.useState)(null);return Bi(N,{debugName:"form/BasicNumberInput",onDragStart:_.transitionToDraggingMode,lockCSSCursorTo:"ew-resize",shouldPointerLock:!0,disabled:l.current.mode==="editingViaKeyboard"}),vh.default.createElement(iR,{className:s.className+" "+l.current.mode},vh.default.createElement(_Z,{ref:L},I),A)},sR=xZ});function wAe({propConfig:s,editingTools:a,value:l,autoFocus:d}){let f=(0,Q4.useCallback)(g=>s.nudgeFn(B(F({},g),{config:s})),[s]);return Q4.default.createElement(sR,{value:l,temporarilySetValue:a.temporarilySetValue,discardTemporaryValue:a.discardTemporaryValue,permanentlySetValue:a.permanentlySetValue,range:s.range,nudge:f,autoFocus:d})}var Q4,J4,SZ=P(()=>{Z4(),Q4=X(Ne()),J4=wAe});function xAe({value:s,onChange:a,options:l,autoFocus:d}){let f=(0,yE.useCallback)(g=>{a(String(g.target.value))},[a]);return yE.default.createElement(ez,{role:"radiogroup"},Object.keys(l).map((g,b)=>yE.default.createElement(PZ,{key:"label-"+b,"data-checked":s===g},l[g],yE.default.createElement(MZ,{type:"radio",checked:s===g,value:g,onChange:f,name:"switchbox",autoFocus:d}))))}var yE,EZ,ez,CZ,PZ,TZ,MZ,kZ,SAe=P(()=>{al(),yE=X(Ne()),Ve(),ez=le.form(EZ||(EZ=J([`
  display: flex;
  flex-direction: row;
  align-items: stretch;
  vertical-align: middle;
  justify-content: stretch;
  height: 24px;
  width: 100%;
`]))),PZ=le.label(CZ||(CZ=J([`
  padding: 0 0.5em;
  background: transparent;
  /* background: #373748; */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  color: #a7a7a7;
  border: 1px solid transparent;
  box-sizing: border-box;
  border-right-width: 0px;

  & + &:last-child {
    border-right-width: 1px;
  }

  `,`:hover > & {
    border-color: #1c2123;
    /* background-color: #373748; */
    /* color: `,`; */
  }

  &&:hover {
    background-color: #464654;
  }

  &&[data-checked='true'] {
    color: white;
    background: #3f3f4c;
  }
`])),ez,iE(.1,"white")),MZ=le.input(TZ||(TZ=J([`
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
`]))),kZ=xAe}),EAe=P(()=>{}),tz,nz,rz,AZ=P(()=>{tz=X(Ne()),nz={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},rz=tz.default.createContext&&tz.default.createContext(nz)});function IZ(s){return s&&s.map(function(a,l){return Bb.default.createElement(a.tag,yh({key:l},a.attr),IZ(a.child))})}function Fb(s){return function(a){return Bb.default.createElement(CAe,yh({attr:yh({},s.attr)},a),IZ(s.child))}}function CAe(s){var a=function(l){var d=s.attr,f=s.size,g=s.title,b=RZ(s,["attr","size","title"]),_=f||l.size||"1em",S;return l.className&&(S=l.className),s.className&&(S=(S?S+" ":"")+s.className),Bb.default.createElement("svg",yh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,d,b,{className:S,style:yh(yh({color:s.color||l.color},l.style),s.style),height:_,width:_,xmlns:"http://www.w3.org/2000/svg"}),g&&Bb.default.createElement("title",null,g),s.children)};return rz!==void 0?Bb.default.createElement(rz.Consumer,null,function(l){return a(l)}):a(nz)}var Bb,yh,RZ,PAe=P(()=>{Bb=X(Ne()),AZ(),yh=function(){return yh=Object.assign||function(s){for(var a,l=1,d=arguments.length;l<d;l++){a=arguments[l];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(s[f]=a[f])}return s},yh.apply(this,arguments)},RZ=function(s,a){var l={};for(var d in s)Object.prototype.hasOwnProperty.call(s,d)&&a.indexOf(d)<0&&(l[d]=s[d]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,d=Object.getOwnPropertySymbols(s);f<d.length;f++)a.indexOf(d[f])<0&&Object.prototype.propertyIsEnumerable.call(s,d[f])&&(l[d[f]]=s[d[f]]);return l}}),ps=P(()=>{EAe(),PAe(),AZ()}),TAe=P(()=>{ps()}),MAe=P(()=>{ps()});function kAe(s){return Fb({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}}]})(s)}var AAe=P(()=>{ps()}),IAe=P(()=>{ps()}),RAe=P(()=>{ps()});function DAe(s){return Fb({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.5 3L7 4.5 3.25 8 7 11.5 5.5 13l-5-5 5-5z"}}]})(s)}function OAe(s){return Fb({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3l5 5z"}}]})(s)}var LAe=P(()=>{ps()}),NAe=P(()=>{ps()}),FAe=P(()=>{ps()}),BAe=P(()=>{ps()}),UAe=P(()=>{ps()}),zAe=P(()=>{ps()}),VAe=P(()=>{ps()}),jAe=P(()=>{ps()}),HAe=P(()=>{ps()}),GAe=P(()=>{ps()});function DZ(s){return Fb({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(s)}var WAe=P(()=>{ps()}),$Ae=P(()=>{ps()}),KAe=P(()=>{ps()}),XAe=P(()=>{ps()});function qAe(s){return Fb({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M6 9.65685L7.41421 11.0711L11.6569 6.82843L15.8995 11.0711L17.3137 9.65685L11.6569 4L6 9.65685Z",fill:"currentColor"}},{tag:"path",attr:{d:"M6 14.4433L7.41421 13.0291L11.6569 17.2717L15.8995 13.0291L17.3137 14.4433L11.6569 20.1001L6 14.4433Z",fill:"currentColor"}}]})(s)}var YAe=P(()=>{ps()});function ZAe(s){return Fb({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 10.44l-.413.56H2.393L2 10.46 7.627 5h.827L14 10.44z"}}]})(s)}var QAe=P(()=>{ps()}),Ub=P(()=>{TAe(),MAe(),AAe(),IAe(),RAe(),LAe(),NAe(),FAe(),BAe(),UAe(),zAe(),VAe(),jAe(),HAe(),GAe(),WAe(),$Ae(),KAe(),XAe(),YAe(),QAe()});function JAe({value:s,onChange:a,options:l,className:d,autoFocus:f}){let g=(0,tv.useCallback)(b=>{a(String(b.target.value))},[a]);return tv.default.createElement(LZ,null,tv.default.createElement(UZ,{className:d,value:s,onChange:g,autoFocus:f},Object.keys(l).map((b,_)=>tv.default.createElement("option",{key:"option-"+_,value:b},l[b]))),tv.default.createElement(FZ,null,tv.default.createElement(qAe,null)))}var tv,OZ,LZ,NZ,FZ,BZ,UZ,zZ,e2e=P(()=>{tv=X(Ne()),Ve(),Ub(),LZ=le.div(OZ||(OZ=J([`
  width: 100%;
  position: relative;
`]))),FZ=le.div(NZ||(NZ=J([`
  position: absolute;
  right: 0px;
  top: 0;
  bottom: 0;
  width: 1.5em;
  font-size: 14px;
  display: flex;
  align-items: center;
  color: #6b7280;
  pointer-events: none;
`]))),UZ=le.select(BZ||(BZ=J([`
  appearance: none;
  background-color: transparent;
  box-sizing: border-box;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.85);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  text-align: left;
  width: 100%;
  border-radius: 2px;
  /*
  looks like putting percentages in the height of a select box doesn't work in Firefox. Not sure why.
  So we're hard-coding the height to 26px, unlike all other inputs that use a relative height.
  */
  height: 26px /* calc(100% - 4px); */;

  @supports (-moz-appearance: none) {
    /* Ugly hack to remove the extra left padding that shows up only in Firefox */
    text-indent: -2px;
  }

  &:hover,
  &:focus {
    background-color: #10101042;
    border-color: #00000059;
  }
`]))),zZ=JAe});function t2e({propConfig:s,editingTools:a,value:l,autoFocus:d}){let f=(0,oR.useCallback)(g=>{a.permanentlySetValue(g)},[s,a]);return s.as==="menu"?oR.default.createElement(zZ,{value:l,onChange:f,options:s.valuesAndLabels,autoFocus:d}):oR.default.createElement(kZ,{value:l,onChange:f,options:s.valuesAndLabels,autoFocus:d})}var oR,VZ,n2e=P(()=>{oR=X(Ne()),SAe(),e2e(),VZ=t2e}),jZ,bE,HZ,GZ,WZ,$Z,aR,iz=P(()=>{Ve(),jZ=X(Ne()),bE=X(Ne()),rR(),Rr(),G4(),GZ=le.input.attrs({type:"text"})(HZ||(HZ=J([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;
  border: 1px solid transparent;
  box-sizing: border-box;

  &:hover {
    background-color: #10101042;
    border-color: #00000059;
  }

  &:hover,
  &:focus {
    cursor: text;
    background-color: #10101042;
    border-color: #00000059;
  }

  &.invalid {
    border-color: red;
  }
`]))),WZ=s=>!0,$Z=s=>{var a,l;let[d]=wr({mode:"noFocus"}),f=(a=s.isValid)!=null?a:WZ,g=(0,bE.useRef)(s);g.current=s;let b=(0,bE.useRef)(null);H4(b.current,()=>{b.current.blur()},d.current.mode==="editingViaKeyboard");let _=(0,bE.useMemo)(()=>{let I=G=>{let $=G.target,{value:Y}=$,ie=d.current;d.current=B(F({},ie),{currentEditedValueInString:Y}),f(Y)&&g.current.temporarilySetValue(Y)},O=()=>{var G,$;d.current.mode==="editingViaKeyboard"&&(R(),d.current={mode:"noFocus"}),($=(G=g.current).onBlur)==null||$.call(G)},R=()=>{let G=d.current,$=G.currentEditedValueInString;f($)?G.valueBeforeEditing===$?g.current.discardTemporaryValue():g.current.permanentlySetValue($):g.current.discardTemporaryValue()},A=G=>{G.key==="Escape"?(g.current.discardTemporaryValue(),d.current={mode:"noFocus"},b.current.blur()):(G.key==="Enter"||G.key==="Tab")&&(R(),b.current.blur())},N=G=>{d.current.mode==="noFocus"&&(b.current.focus(),G.preventDefault()),G.stopPropagation()},L=()=>{d.current.mode==="noFocus"?V():d.current.mode},V=()=>{let G=g.current.value;d.current={mode:"editingViaKeyboard",currentEditedValueInString:String(G),valueBeforeEditing:G},setTimeout(()=>{b.current.focus()})};return{inputChange:I,onBlur:O,onInputKeyDown:A,onClick:N,onFocus:L}},[]);(0,jZ.useEffect)(()=>()=>{_.onBlur()},[]);let S=d.current.mode!=="editingViaKeyboard"?s.value:d.current.currentEditedValueInString,C=[b];return s.inputRef&&C.push(s.inputRef),bE.default.createElement(GZ,{key:"input",type:"text",className:"".concat((l=s.className)!=null?l:""," ").concat(f(S)?"":"invalid"),onChange:_.inputChange,value:S,onBlur:_.onBlur,onKeyDown:_.onInputKeyDown,onClick:_.onClick,onFocus:_.onFocus,ref:nR(C),onMouseDown:I=>{I.stopPropagation()},onDoubleClick:I=>{I.preventDefault(),I.stopPropagation()},autoFocus:s.autoFocus})},aR=$Z});function r2e({editingTools:s,value:a,autoFocus:l}){return KZ.default.createElement(aR,{value:a,temporarilySetValue:s.temporarilySetValue,discardTemporaryValue:s.discardTemporaryValue,permanentlySetValue:s.permanentlySetValue,autoFocus:l})}var KZ,XZ,i2e=P(()=>{KZ=X(Ne()),iz(),XZ=r2e});function s2e(s){s=s.trim().toLowerCase();let a=s.match(az);if(!a)return{r:0,g:0,b:0,a:1};let l=o2e(a[1]);return{r:parseInt(l.substr(0,2),16)/255,g:parseInt(l.substr(2,2),16)/255,b:parseInt(l.substr(4,2),16)/255,a:parseInt(l.substr(6,2),16)/255}}function sz(s,{removeAlphaIfOpaque:a=!1}={}){let l=(s.a*255|256).toString(16).slice(1),d=(s.r*255|256).toString(16).slice(1)+(s.g*255|256).toString(16).slice(1)+(s.b*255|256).toString(16).slice(1)+(a&&l==="ff"?"":l);return"#".concat(d)}function oz(s){return B(F({},s),{toString(){return sz(this,{removeAlphaIfOpaque:!0})}})}function o2e(s){switch(s.length){case 3:return"".concat(s.repeat(2),"ff");case 4:let a=s.substr(0,3),l=s[3];return"".concat(a.repeat(2)).concat(l.repeat(2));case 6:return"".concat(s,"ff")}return s}var az,qZ=P(()=>{az=/^#*([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i});function lR(s){let a=(0,lz.useRef)(s),l=(0,lz.useRef)(d=>{a.current&&a.current(d)});return a.current=s,l.current}var lz,YZ=P(()=>{lz=X(Ne())}),nv,uR=P(()=>{nv=(s,a=0,l=1)=>s>l?l:s<a?a:s}),_E,uz,ZZ,cz,dz=P(()=>{_E=X(Ne()),uz=(0,_E.createContext)(void 0),ZZ=({children:s})=>{let[a,l]=(0,_E.useState)(!1);return _E.default.createElement(uz.Provider,{value:{editing:a,setEditing:l}},s)},cz=()=>(0,_E.useContext)(uz)}),gf,zb,QZ,cR,hz,pz,JZ,eQ,tQ,nQ,wE,dR=P(()=>{gf=X(Ne()),YZ(),uR(),Ve(),dz(),zb=s=>"touches"in s,QZ=(s,a)=>{for(let l=0;l<s.length;l++)if(s[l].identifier===a)return s[l];return s[0]},cR=s=>s&&s.ownerDocument.defaultView||self,hz=(s,a,l)=>{let d=s.getBoundingClientRect(),f=zb(a)?QZ(a.touches,l):a;return{left:nv((f.pageX-(d.left+cR(s).pageXOffset))/d.width),top:nv((f.pageY-(d.top+cR(s).pageYOffset))/d.height)}},pz=s=>{!zb(s)&&s.preventDefault()},JZ=(s,a)=>a&&!zb(s),tQ=le.div(eQ||(eQ=J([`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  outline: none;
  /* Don't trigger the default scrolling behavior when the event is originating from this element */
  touch-action: none;
`]))),nQ=s=>{var a=s,{onMove:l,onKey:d}=a,f=z(a,["onMove","onKey"]);let g=(0,gf.useRef)(null),b=lR(l),_=lR(d),S=(0,gf.useRef)(null),C=(0,gf.useRef)(!1),{setEditing:I}=cz(),[O,R,A]=(0,gf.useMemo)(()=>{let N=({nativeEvent:Y})=>{let ie=g.current;if(ie&&(pz(Y),!(JZ(Y,C.current)||!ie))){if(zb(Y)){C.current=!0;let re=Y.changedTouches||[];re.length&&(S.current=re[0].identifier)}ie.focus(),I(!0),b(hz(ie,Y,S.current)),$(!0)}},L=Y=>{pz(Y),(zb(Y)?Y.touches.length>0:Y.buttons>0)&&g.current?b(hz(g.current,Y,S.current)):(I(!1),$(!1))},V=Y=>{I(!1),$(!1)},G=Y=>{let ie=Y.which||Y.keyCode;ie<37||ie>40||(Y.preventDefault(),_({left:ie===39?.05:ie===37?-.05:0,top:ie===40?.05:ie===38?-.05:0}))};function $(Y){let ie=C.current,re=g.current,ce=cR(re),Pe=Y?ce.addEventListener:ce.removeEventListener;Pe(ie?"touchmove":"mousemove",L),Pe(ie?"touchend":"mouseup",V)}return[N,G,$]},[_,b]);return(0,gf.useEffect)(()=>A,[A]),gf.default.createElement(tQ,B(F({},f),{onTouchStart:O,onMouseDown:O,ref:g,onKeyDown:R,tabIndex:0,role:"slider"}))},wE=gf.default.memo(nQ)}),fz,rQ,iQ,sQ,oQ,aQ,lQ,hR,mz=P(()=>{fz=X(Ne()),Ve(),dR(),iQ=le(wE)(rQ||(rQ=J([""]))),oQ=le.div(sQ||(sQ=J([`
  position: absolute;
  z-index: 1;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  transform: translate(-50%, -50%);
  background-color: #fff;
  border: 1px solid #ffffff00;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

  `,`:focus & {
    transform: translate(-50%, -50%) scale(1.1);
  }
`])),iQ),lQ=le.div(aQ||(aQ=J([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;
`]))),hR=({className:s,color:a,left:l,top:d=.5})=>{let f={top:"".concat(d*100,"%"),left:"".concat(l*100,"%")};return fz.default.createElement(oQ,{style:f,className:s},fz.default.createElement(lQ,{style:{backgroundColor:a}}))}}),Fo,pR=P(()=>{Fo=(s,a=0,l=Math.pow(10,a))=>Math.round(l*s)/l}),gz,fR,mR,uQ,cQ,gR=P(()=>{pR(),gz=({h:s,s:a,v:l,a:d})=>{let f=(200-a)*l/100;return{h:Fo(s),s:Fo(f>0&&f<200?a*l/100/(f<=100?f:200-f)*100:0),l:Fo(f/2),a:Fo(d,2)}},fR=s=>{let{h:a,s:l,l:d}=gz(s);return"hsl(".concat(a,", ").concat(l,"%, ").concat(d,"%)")},mR=s=>{let{h:a,s:l,l:d,a:f}=gz(s);return"hsla(".concat(a,", ").concat(l,"%, ").concat(d,"%, ").concat(f,")")},uQ=({h:s,s:a,v:l,a:d})=>{s=s/360*6,a=a/100,l=l/100;let f=Math.floor(s),g=l*(1-a),b=l*(1-(s-f)*a),_=l*(1-(1-s+f)*a),S=f%6;return{r:Fo([l,b,g,g,_,l][S]*255),g:Fo([_,l,l,b,g,g][S]*255),b:Fo([g,g,_,l,l,b][S]*255),a:Fo(d,2)}},cQ=({r:s,g:a,b:l,a:d})=>{let f=Math.max(s,a,l),g=f-Math.min(s,a,l),b=g?f===s?(a-l)/g:f===a?2+(l-s)/g:4+(s-a)/g:0;return{h:Fo(60*(b<0?b+6:b)),s:Fo(f?g/f*100:0),v:Fo(f/255*100),a:d}}}),xE,dQ,hQ,pQ,fQ,mQ,gQ,a2e=P(()=>{xE=X(Ne()),dR(),mz(),gR(),uR(),pR(),Ve(),hQ=le.div(dQ||(dQ=J([`
  position: relative;
  height: 16px;
  border-radius: 2px;

  background: linear-gradient(
    to right,
    #f00 0%,
    #ff0 17%,
    #0f0 33%,
    #0ff 50%,
    #00f 67%,
    #f0f 83%,
    #f00 100%
  );
`]))),fQ=le(hR)(pQ||(pQ=J([`
  z-index: 2;
`]))),mQ=({className:s,hue:a,onChange:l})=>xE.default.createElement(hQ,{className:s},xE.default.createElement(wE,{onMove:d=>{l({h:360*d.left})},onKey:d=>{l({h:nv(a+d.left*360,0,360)})},"aria-label":"Hue","aria-valuetext":Fo(a)},xE.default.createElement(fQ,{left:a/360,color:fR({h:a,s:100,v:100,a:1})}))),gQ=xE.default.memo(mQ)}),SE,vQ,yQ,bQ,_Q,wQ,xQ,l2e=P(()=>{SE=X(Ne()),dR(),mz(),gR(),uR(),pR(),Ve(),yQ=le.div(vQ||(vQ=J([`
  position: relative;
  flex-grow: 1;
  border-color: transparent; /* Fixes https://github.com/omgovich/react-colorful/issues/139 */
  border-bottom: 12px solid #000;
  border-radius: 2px;
  background-image: linear-gradient(to top, #000, rgba(0, 0, 0, 0)),
    linear-gradient(to right, #fff, rgba(255, 255, 255, 0));

  // Improve elements rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),_Q=le(hR)(bQ||(bQ=J([`
  z-index: 3;
`]))),wQ=({hsva:s,onChange:a})=>{let l=g=>{a({s:g.left*100,v:100-g.top*100})},d=g=>{a({s:nv(s.s+g.left*100,0,100),v:nv(s.v-g.top*100,0,100)})},f={backgroundColor:fR({h:s.h,s:100,v:100,a:1})};return SE.default.createElement(yQ,{style:f},SE.default.createElement(wE,{onMove:l,onKey:d,"aria-label":"Color","aria-valuetext":"Saturation ".concat(Fo(s.s),"%, Brightness ").concat(Fo(s.v),"%")},SE.default.createElement(_Q,{top:1-s.v/100,left:s.s/100,color:fR(s)})))},xQ=SE.default.memo(wQ)}),EE,SQ,EQ,CQ,PQ,TQ,MQ,kQ,u2e=P(()=>{EE=X(Ne()),dR(),mz(),gR(),uR(),pR(),Ve(),EQ=le.div(SQ||(SQ=J([`
  position: relative;
  height: 16px;
  border-radius: 2px;
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),PQ=le.div.attrs(({colorFrom:s,colorTo:a})=>({style:{backgroundImage:"linear-gradient(90deg, ".concat(s,", ").concat(a,")")}}))(CQ||(CQ=J([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;

  // Improve rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),MQ=le(hR)(TQ||(TQ=J([`
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),kQ=({className:s,hsva:a,onChange:l})=>{let d=_=>{l({a:_.left})},f=_=>{l({a:nv(a.a+_.left)})},g=mR(Object.assign({},a,{a:0})),b=mR(Object.assign({},a,{a:1}));return EE.default.createElement(EQ,{className:s},EE.default.createElement(PQ,{colorFrom:g,colorTo:b}),EE.default.createElement(wE,{onMove:d,onKey:f,"aria-label":"Alpha","aria-valuetext":"".concat(Fo(a.a*100),"%")},EE.default.createElement(MQ,{left:a.a,color:mR(a)})))}}),vR,AQ=P(()=>{vR=(s,a)=>{if(s===a)return!0;for(let l in s)if(s[l]!==a[l])return!1;return!0}});function c2e(s,a,l,d){let{editing:f}=cz(),[g,b]=(0,bh.useState)(a),_=lR(l),S=lR(d),C=f?g:a,[I,O]=(0,bh.useState)(()=>s.toHsva(C)),R=(0,bh.useRef)({color:C,hsva:I}),A=(0,bh.useRef)({color:C,hsva:I});(0,bh.useEffect)(()=>{f&&b(R.current.color)},[f]),(0,bh.useEffect)(()=>{let L=s.fromHsva(I);f?!vR(I,R.current.hsva)&&!s.equal(L,R.current.color)&&(R.current={hsva:I,color:L},b(L),_(L)):!vR(I,A.current.hsva)&&!s.equal(L,A.current.color)&&(A.current={hsva:I,color:L},R.current={hsva:I,color:L},S(L))},[f,I,s,_,S]),(0,bh.useEffect)(()=>{if(!f&&!s.equal(C,A.current.color)){let L=s.toHsva(C);A.current={hsva:L,color:C},O(L)}},[f,C,s]);let N=(0,bh.useCallback)(L=>{O(V=>Object.assign({},V,L))},[]);return[I,N]}var bh,d2e=P(()=>{bh=X(Ne()),AQ(),YZ(),dz()}),Vb,IQ,RQ,DQ,h2e=P(()=>{Vb=X(Ne()),a2e(),l2e(),u2e(),d2e(),Ve(),RQ=le.div(IQ||(IQ=J([`
  position: relative;
  display: flex;
  gap: 4px;
  flex-direction: column;
  width: 200px;
  height: 200px;
  user-select: none;
  cursor: default;
`]))),DQ=s=>{var a=s,{className:l,colorModel:d,color:f=d.defaultColor,temporarilySetValue:g,permanentlySetValue:b,discardTemporaryValue:_}=a,S=z(a,["className","colorModel","color","temporarilySetValue","permanentlySetValue","discardTemporaryValue"]);let[C,I]=c2e(d,f,g,b);return(0,Vb.useEffect)(()=>()=>{_()},[]),Vb.default.createElement(RQ,F({},S),Vb.default.createElement(xQ,{hsva:C,onChange:I}),Vb.default.createElement(gQ,{hue:C.h,onChange:I}),Vb.default.createElement(kQ,{hsva:C,onChange:I}))}}),vz,OQ,LQ,NQ,FQ,p2e=P(()=>{vz=X(Ne()),h2e(),AQ(),gR(),dz(),OQ=s=>({r:s.r/255,g:s.g/255,b:s.b/255,a:s.a}),LQ=s=>({r:s.r*255,g:s.g*255,b:s.b*255,a:s.a}),NQ={defaultColor:{r:0,g:0,b:0,a:1},toHsva:s=>cQ(LQ(s)),fromHsva:s=>OQ(uQ(s)),equal:vR},FQ=s=>vz.default.createElement(ZZ,null,vz.default.createElement(DQ,B(F({},s),{permanentlySetValue:a=>{s.permanentlySetValue(a)},colorModel:NQ})))}),f2e=P(()=>{p2e()}),BQ,UQ,zQ,m2e=P(()=>{BQ=X(Ne()),UQ=function(s){(0,BQ.useEffect)(s,[])},zQ=UQ}),VQ,jQ,HQ,g2e=P(()=>{VQ=X(Ne()),m2e(),jQ=function(s){var a=(0,VQ.useRef)(s);a.current=s,zQ(function(){return function(){return a.current()}})},HQ=jQ}),yR,GQ,WQ,v2e=P(()=>{yR=X(Ne()),g2e(),GQ=function(s){var a=(0,yR.useRef)(0),l=(0,yR.useState)(s),d=l[0],f=l[1],g=(0,yR.useCallback)(function(b){cancelAnimationFrame(a.current),a.current=requestAnimationFrame(function(){f(b)})},[]);return HQ(function(){cancelAnimationFrame(a.current)}),[d,g]},WQ=GQ});function y2e(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];s&&s.addEventListener&&s.addEventListener.apply(s,a)}function b2e(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];s&&s.removeEventListener&&s.removeEventListener.apply(s,a)}var bR,_2e=P(()=>{bR=typeof window<"u"}),$Q,KQ,_R,yz=P(()=>{$Q=X(Ne()),v2e(),_2e(),KQ=function(s,a){s===void 0&&(s=1/0),a===void 0&&(a=1/0);var l=WQ({width:bR?window.innerWidth:s,height:bR?window.innerHeight:a}),d=l[0],f=l[1];return(0,$Q.useEffect)(function(){if(bR){var g=function(){f({width:window.innerWidth,height:window.innerHeight})};return y2e(window,"resize",g),function(){b2e(window,"resize",g)}}},[]),d},_R=KQ});function bz(s){let[a,l]=(0,_z.useState)(null);return(0,_z.useLayoutEffect)(()=>(s&&l(s.getBoundingClientRect()),()=>{l(null)}),[s]),a}var _z,XQ=P(()=>{_z=X(Ne())}),qQ,YQ,wz,ZQ=P(()=>{qQ=X(Ne()),YQ=(0,qQ.createContext)({}),wz=YQ});function w2e(s,a,l){let d=s.getBoundingClientRect(),f=g=>{(g.clientX<d.left-a||g.clientX>d.left+d.width+a||g.clientY<d.top-a||g.clientY>d.top+d.height+a)&&l(g)};return window.addEventListener("mousemove",f),()=>{window.removeEventListener("mousemove",f)}}var x2e=P(()=>{}),QQ,wR,xz,JQ,Sz,eJ=P(()=>{QQ=X(Ne()),wR=X(Ne()),yz(),XQ(),ZQ(),Rr(),G4(),x2e(),Rb(),di(),xz=8,JQ=s=>{var a,l;let d=s.children(),[f,g]=wr(null),b=d.props.style?F({},d.props.style):{};b.position="absolute";let _=bz(g),S=bz(s.target),C=_R(),[I,O]=(0,wR.useState)({});return(0,wR.useLayoutEffect)(()=>{var R,A,N;if(!_||!g||!S)return;let L=(R=s.verticalGap)!=null?R:8,V={},G=(A=s.verticalPlacement)!=null?A:"bottom",$=0,Y=0;G==="bottom"?S.bottom+_.height+L<C.height?(G="bottom",$=S.bottom+L,V.top="0px"):S.top>_.height+L?(G="top",$=S.top-(_.height+L),V.bottom="0px",V.transform="rotateZ(180deg)"):G="overlay":G==="top"&&(S.top>_.height+L?(G="top",$=S.top-(_.height+L),V.bottom="0px",V.transform="rotateZ(180deg)"):S.bottom+_.height+L<C.height?(G="bottom",$=S.bottom+L,V.top="0px"):G="overlay");let ie=0;if(G!=="overlay"){let Le=S.left+S.width/2;Le<_.width/2?(Y=L,ie=Math.max(Le-L,xz)):Le+_.width/2>C.width?(Y=C.width-(L+_.width),ie=Math.min(Le-Y,_.width-xz)):(Y=Le-_.width/2,ie=_.width/2),V.left=ie+"px"}let{minX:re=-1/0,maxX:ce=1/0,minY:Pe=-1/0,maxY:ye=1/0}=(N=s.constraints)!=null?N:{},we={left:_i(Y,re,ce-_.width),top:_i($,Pe,ye+_.height)};if(g.style.left=we.left+"px",g.style.top=we.top+"px",O(V),s.onPointerOutside)return w2e(g,s.onPointerOutside.threshold,s.onPointerOutside.callback)},[_,g,s.target,S,C,s.onPointerOutside]),H4([g,(a=s.target)!=null?a:null],(l=s.onClickOutside)!=null?l:Gu),QQ.default.createElement(wz.Provider,{value:I},(0,wR.cloneElement)(d,{ref:f,style:b}))},Sz=JQ});function qc(s,a){let l=(...A)=>{},{isPointerBeingCaptured:d}=uZ("usePopover"),[f,g]=wr({isOpen:!1}),b=(0,Bo.useRef)(s),_=(0,Bo.useCallback)(A=>{f.current={isOpen:!1}},[]),S=(0,Bo.useCallback)((A,N)=>{var L;let V=typeof b.current=="function"?b.current():b.current;function G(){I.childHasFocusRef.current||V.closeOnClickOutside!==!1&&_("clicked outside popover")}f.current={isOpen:!0,clickPoint:{clientX:A.clientX,clientY:A.clientY},target:N,opts:V,onClickOutside:G,onPointerOutside:V.closeWhenPointerIsDistant===!1?void 0:{threshold:(L=V.pointerDistanceThreshold)!=null?L:100,callback:()=>{I.childHasFocusRef.current||d()||_("pointer outside")}}}},[]),C=(0,Bo.useCallback)((...A)=>{f.current.isOpen?_("toggled"):S(...A)},[]),I=S2e({_debug:l,state:g}),[,O]=(0,Bo.useContext)(QE);(0,Bo.useEffect)(()=>{let A;return g.isOpen&&(A=O()),()=>A==null?void 0:A()},[g.isOpen]);let R=(0,Bo.useContext)(kb);return{node:g.isOpen?(0,tJ.createPortal)(Bo.default.createElement(Ez.Provider,{value:I.childPopoverLock},Bo.default.createElement(Sz,{children:a,target:g.target,onClickOutside:g.onClickOutside,onPointerOutside:g.onPointerOutside,constraints:g.opts.constraints,verticalGap:g.opts.verticalGap})),R):Bo.default.createElement(Bo.default.Fragment,null),open:S,close:_,toggle:C,isOpen:g.isOpen}}function S2e(s){let a=(0,Bo.useContext)(Ez);(0,Bo.useEffect)(()=>{if(s.state.isOpen){let d=a.takeFocus();return s._debug("take focus"),()=>{s._debug("release focus"),d.releaseFocus()}}},[s.state.isOpen]);let l=(0,Bo.useRef)(!1);return{childHasFocusRef:l,childPopoverLock:{takeFocus(){return l.current=!0,{releaseFocus(){l.current=!1}}}}}}var Bo,tJ,Ez,Yc=P(()=>{X4(),Rr(),Bo=X(Ne()),tJ=X(Lu()),ev(),eJ(),pV(),Ez=Bo.default.createContext({takeFocus(){return{releaseFocus(){}}}})}),_h,nJ,rJ,iJ,sJ,oJ,aJ,lJ,uJ,cJ,dJ,hJ,pJ,E2e=P(()=>{_h=X(Ne()),Ve(),ZQ(),rJ=le.div(nJ||(nJ=J([`
  position: absolute;
  width: 0;
  height: 0;
  color: var(--popover-arrow-color);
  pointer-events: none;
`]))),sJ=le.div(iJ||(iJ=J([`
  width: 12px;
  height: 8px;
  position: absolute;
  left: -7px;
  top: -8px;
  text-align: center;
  line-height: 0;
`]))),aJ=le.path(oJ||(oJ=J([`
  fill: var(--popover-bg);
`]))),uJ=le.path(lJ||(lJ=J([`
  fill: var(--popover-inner-stroke);
`]))),dJ=le.path(cJ||(cJ=J([`
  fill: var(--popover-outer-stroke);
`]))),hJ=(0,_h.forwardRef)(({className:s},a)=>{let l=(0,_h.useContext)(wz);return _h.default.createElement(rJ,{className:s,ref:a,style:F({},l)},_h.default.createElement(sJ,null,_h.default.createElement("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},_h.default.createElement(dJ,{d:"M6 0L0 6H12L6 0Z"}),_h.default.createElement(uJ,{d:"M6 1.5L0 7.5H12L6 1.5Z"}),_h.default.createElement(aJ,{d:"M6 3L0 9H12L6 3Z"}))))}),pJ=hJ}),xR,Cz,fJ,mJ,gJ,Zc,Qc=P(()=>{Dr(),al(),xR=X(Ne()),Ve(),E2e(),Cz=Hu(.05,"#2a2a31"),mJ=le.div(fJ||(fJ=J([`
  position: absolute;
  --popover-bg: `,`;
  --popover-inner-stroke: #505159;
  --popover-outer-stroke: #111;

  background: var(--popover-bg);

  color: white;
  padding: 0;
  margin: 0;
  cursor: default;
  `,`;
  border-radius: 3px;
  z-index: 10000;
  border: 1px solid var(--popover-inner-stroke);
  box-shadow: 0 0 0 1px var(--popover-outer-stroke), 0 6px 8px -4px black;
  backdrop-filter: blur(8px);

  & a {
    color: inherit;
  }
`])),Cz,kr),gJ=xR.default.forwardRef(({children:s,className:a,showPopoverEdgeTriangle:l=!0},d)=>xR.default.createElement(mJ,{className:a,ref:d},l?xR.default.createElement(pJ,null):void 0,s)),Zc=gJ});function C2e({editingTools:s,value:a,autoFocus:l}){let d=(0,Jc.useRef)(null),f=(0,Jc.useCallback)(b=>{let _=oz(s2e(b));s.permanentlySetValue(_)},[s]),g=qc({debugName:"RgbaPropEditor"},()=>Jc.default.createElement(EJ,null,Jc.default.createElement(FQ,{color:{r:a.r,g:a.g,b:a.b,a:a.a},temporarilySetValue:b=>{let _=oz(b);s.temporarilySetValue(_)},permanentlySetValue:b=>{let _=oz(b);s.permanentlySetValue(_)},discardTemporaryValue:s.discardTemporaryValue})));return Jc.default.createElement(Jc.default.Fragment,null,Jc.default.createElement(yJ,null,Jc.default.createElement(_J,{rgbaColor:a,ref:d,onClick:b=>{g.toggle(b,d.current)}}),Jc.default.createElement(xJ,{value:sz(a,{removeAlphaIfOpaque:!0}),temporarilySetValue:Pz,discardTemporaryValue:Pz,permanentlySetValue:f,isValid:b=>!!b.match(az),autoFocus:l})),g.node)}var Jc,vJ,yJ,bJ,_J,wJ,xJ,Pz,SJ,EJ,CJ,P2e=P(()=>{qZ(),qZ(),Jc=X(Ne()),f2e(),Ve(),Yc(),iz(),Qc(),yJ=le.div(vJ||(vJ=J([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),_J=le.div.attrs(s=>({style:{background:sz(s.rgbaColor)}}))(bJ||(bJ=J([`
  height: 18px;
  aspect-ratio: 1;
  border-radius: 99999px;
`]))),xJ=le(aR)(wJ||(wJ=J([`
  flex: 1;
`]))),Pz=()=>{},EJ=le.div(SJ||(SJ=J([`
  position: absolute;
  background-color: `,`;
  color: white;
  margin: 0;
  cursor: default;
  border-radius: 3px;
  z-index: 10000;
  backdrop-filter: blur(8px);

  padding: 4px;
  pointer-events: all;

  border: none;
  box-shadow: none;
`])),Cz),CJ=C2e});function T2e({propConfig:s,editingTools:a,value:l,autoFocus:d}){let[f,g]=$u.default.useState();(0,$u.useEffect)(()=>{g(l?a.getAssetUrl(l):void 0)},[l]);let b=(0,$u.useCallback)(S=>ne(this,null,function*(){let C=S.target.files[0];a.permanentlySetValue({type:"image",id:void 0});let I=yield a.createAsset(C);I?a.permanentlySetValue({type:"image",id:I}):a.permanentlySetValue(l),S.target.value=null}),[a,l]),_=!(l!=null&&l.id);return $u.default.createElement(Tz,{empty:_},$u.default.createElement(RJ,{empty:_,title:_?"Upload image":'"'.concat(l.id,'" (Click to upload new image)')},$u.default.createElement(OJ,{type:"file",onChange:b,accept:"image/*,.hdr",autoFocus:d}),f?$u.default.createElement(NJ,{src:f}):$u.default.createElement(MJ,null)),!_&&$u.default.createElement(BJ,{title:"Delete image",onClick:()=>{a.permanentlySetValue({type:"image",id:void 0})}},$u.default.createElement(O4,null)))}var $u,PJ,Tz,TJ,MJ,kJ,AJ,IJ,RJ,DJ,OJ,LJ,NJ,FJ,BJ,UJ,M2e=P(()=>{hE(),$u=X(Ne()),Ve(),Tz=le.div(PJ||(PJ=J([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),MJ=le.div(TJ||(TJ=J([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),RJ=le.label(IJ||(IJ=J([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),s=>s.empty?uo(kJ||(kJ=J([""]))):uo(AJ||(AJ=J([""])))),OJ=le.input.attrs({type:"file"})(DJ||(DJ=J([`
  display: none;
`]))),NJ=le.img(LJ||(LJ=J([`
  position: absolute;
  inset: 0;
  height: 100%;
  aspect-ratio: 1;

  object-fit: cover;
`]))),BJ=le.button(FJ||(FJ=J([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),Tz),UJ=T2e});function k2e({propConfig:s,editingTools:a,value:l,autoFocus:d}){let[f,g]=Ku.default.useState();(0,Ku.useEffect)(()=>{g(l?a.getAssetUrl(l):void 0)},[l]);let b=(0,Ku.useCallback)(S=>ne(this,null,function*(){let C=S.target.files[0];a.permanentlySetValue({type:"file",id:void 0});let I=yield a.createAsset(C);I?a.permanentlySetValue({type:"file",id:I}):a.permanentlySetValue(l),S.target.value=null}),[a,l]),_=!(l!=null&&l.id);return Ku.default.createElement(Mz,{empty:_},Ku.default.createElement($J,{empty:_,title:_?"Upload file":'"'.concat(l.id,'" (Click to upload new file)')},Ku.default.createElement(XJ,{type:"file",onChange:b,autoFocus:d}),f?Ku.default.createElement(I4,null):Ku.default.createElement(jJ,null)),!_&&Ku.default.createElement(YJ,{title:"Delete file",onClick:()=>{a.permanentlySetValue({type:"file",id:void 0})}},Ku.default.createElement(O4,null)))}var Ku,zJ,Mz,VJ,jJ,HJ,GJ,WJ,$J,KJ,XJ,qJ,YJ,ZJ,A2e=P(()=>{hE(),Ku=X(Ne()),Ve(),Mz=le.div(zJ||(zJ=J([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),jJ=le.div(VJ||(VJ=J([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),$J=le.label(WJ||(WJ=J([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),s=>s.empty?uo(HJ||(HJ=J([""]))):uo(GJ||(GJ=J([""])))),XJ=le.input.attrs({type:"file"})(KJ||(KJ=J([`
  display: none;
`]))),YJ=le.button(qJ||(qJ=J([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),Mz),ZJ=k2e}),kz,QJ=P(()=>{mAe(),SZ(),n2e(),i2e(),P2e(),M2e(),A2e(),kz={number:J4,string:XZ,boolean:JY,stringLiteral:VZ,rgba:CJ,image:UJ,file:ZJ}});function CE(s){let a=new WeakMap;return l=>(a.has(l)||a.set(l,s(l)),a.get(l))}var SR=P(()=>{});function ed(s){return s.type==="compound"||s.type==="enum"}function ER(s,a){if(!s)return;let[l,...d]=a;if(l===void 0)return s;if(!ed(s))return;let f=s.type==="enum"?s.cases[l]:s.props[l];return ER(f,d)}function CR(s,a){let l=a.deserializeAndSanitize(s);return l===void 0?a.default:l}function I2e(s){return!ed(s)}function*PE(s,a){if(s.type==="compound")for(let l in s.props)yield*ot(PE(s.props[l],[...a,l]));else{if(s.type==="enum")throw new Error("Not implemented yet");return yield{path:a,conf:s}}}var Az,vf=P(()=>{SR(),Az=CE(s=>{if(s.type==="enum")throw new Error("Not implemented yet for enums");for(let a in s.props){let l=s.props[a];if(ed(l)){if(Az(l))return!0}else return!0}return!1})}),Iz,JJ=P(()=>{Iz="calc(var(--left-pad) + var(--depth) * var(--step))"}),eee,yf,rv=P(()=>{Ve(),yf=uo(eee||(eee=J([`
  font-weight: 300;
  font-size: 11px;
  color: `,`;
  text-shadow: 0.5px 0.5px 2px rgba(0, 0, 0, 0.3);
`])),s=>s.isHighlighted==="self"?"#CCC":"#919191")}),TE,PR,tee,nee,ree,iee,see,oee,aee=P(()=>{Rb(),TE=X(Ne()),Ve(),PR=26,nee=le.li(tee||(tee=J([`
  height: `,`px;
  padding: 0 12px;
  margin: 0;
  display: flex;
  align-items: center;
  font-size: 11px;
  font-weight: 400;
  position: relative;
  color: `,`;
  cursor: `,`;

  &:after {
    position: absolute;
    inset: 2px 1px;
    display: block;
    content: ' ';
    pointer-events: none;
    z-index: -1;
    border-radius: 3px;
  }

  &:hover:after {
    background-color: `,`;
  }
`])),PR,s=>s.enabled?"white":"#8f8f8f",s=>s.enabled?"normal":"not-allowed",s=>s.enabled?"rgba(63, 174, 191, 0.75)":"initial"),iee=le.span(ree||(ree=J([""]))),see=s=>TE.default.createElement(nee,{onClick:s.enabled?s.onClick:Gu,enabled:s.enabled,title:s.enabled?void 0:"Disabled"},TE.default.createElement(iee,null,TE.default.createElement(TE.default.Fragment,null,s.label))),oee=see});function R2e(s){let a=(0,Rz.useRef)(s);a.current=s,(0,Rz.useEffect)(()=>{let l=d=>a.current(d);return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}},[])}var Rz,D2e=P(()=>{Rz=X(Ne())}),ME,lee,uee,cee,dee,hee,pee,fee,Dz,mee=P(()=>{ME=X(Ne()),aee(),Ve(),al(),Dr(),lee=190,uee=!0,dee=le.ul(cee||(cee=J([`
  position: absolute;
  min-width: `,`px;
  z-index: 10000;
  background: `,`;
  backdrop-filter: blur(2px);
  color: white;
  list-style-type: none;
  padding: 2px 0;
  margin: 0;
  border-radius: 1px;
  cursor: default;
  `,`;
  border-radius: 3px;
`])),lee,Hu(.2,"#111"),kr),pee=le.div(hee||(hee=J([`
  padding: 4px 10px;
  border-bottom: 1px solid #6262626d;
  color: #adadadb3;
  font-size: 11px;
  font-weight: 500;
`]))),fee=ME.default.forwardRef((s,a)=>ME.default.createElement(dee,{ref:a},uee&&s.displayName?ME.default.createElement(pee,null,s.displayName):null,s.items.map((l,d)=>ME.default.createElement(oee,{key:"item-".concat(d),label:l.label,enabled:l.enabled!==!1,onClick:f=>{l.callback&&l.callback(f),s.onRequestClose()}})))),Dz=fee}),gee,vee,TR,yee,kE,bee,_ee,O2e=P(()=>{XQ(),gee=X(Ne()),vee=X(Ne()),TR=X(Ne()),yee=X(Lu()),yz(),aee(),ev(),D2e(),mee(),kE=20,bee=s=>{let[a,l]=(0,TR.useState)(null),d=bz(a),f=_R();(0,TR.useLayoutEffect)(()=>{if(!d||!a)return;let _={left:d.width/2,top:PR/2+(s.displayName?PR:0)},S={left:s.clickPoint.clientX-_.left,top:s.clickPoint.clientY-_.top};S.left<0?S.left=0:S.left+d.width>f.width&&(S.left=f.width-d.width),S.top<0?S.top=0:S.top+d.height>f.height&&(S.top=f.height-d.height),a.style.left=S.left+"px",a.style.top=S.top+"px";let C=I=>{(I.clientX<S.left-kE||I.clientX>S.left+d.width+kE||I.clientY<S.top-kE||I.clientY>S.top+d.height+kE)&&s.onRequestClose()};return window.addEventListener("mousemove",C),()=>{window.removeEventListener("mousemove",C)}},[d,a,s.clickPoint,f,s.onRequestClose]);let g=(0,vee.useContext)(kb);R2e(_=>{_.key==="Escape"&&s.onRequestClose()});let b=(0,gee.useMemo)(()=>{let _=Array.isArray(s.items)?s.items:s.items();return _.length>0?_:[{label:s.displayName?"No actions for ".concat(s.displayName):"No actions found",enabled:!1}]},[s.items]);return(0,yee.createPortal)(TR.default.createElement(Dz,{items:b,onRequestClose:s.onRequestClose,displayName:s.displayName,ref:l}),g)},_ee=bee}),MR,wee,xee,L2e=P(()=>{MR=X(Ne()),wee=(s,a)=>{let[l,d]=(0,MR.useState)({isOpen:!1}),f=(0,MR.useCallback)(()=>d({isOpen:!1}),[]);return(0,MR.useEffect)(()=>{if(!s||a.disabled===!0){d({isOpen:!1});return}let g=b=>{d({isOpen:!0,event:b}),b.preventDefault(),b.stopPropagation()};return s.addEventListener("contextmenu",g),()=>{s.removeEventListener("contextmenu",g)}},[s,a.disabled]),[l,f]},xee=wee});function ca(s,a){let[l,d]=xee(s,a),[,f]=(0,jb.useContext)(QE);return(0,jb.useEffect)(()=>{var g;let b;return l.isOpen&&((g=a.onOpen)==null||g.call(a),b=f()),()=>b==null?void 0:b()},[l.isOpen,a.onOpen]),[l.isOpen?jb.default.createElement(_ee,{items:a.menuItems,displayName:a.displayName,clickPoint:l.event,onRequestClose:d}):See,d,l.isOpen]}var jb,See,da=P(()=>{jb=X(Ne()),O2e(),L2e(),pV(),See=jb.default.createElement(jb.default.Fragment,null)});function bf(s,a){return a.length===0?s:eh(s,a)}var kR=P(()=>{Kp()});function Eee(s,a){return s==null?null:s instanceof Element&&s.matches(a)?s:Eee(s.parentElement,a)}var N2e=P(()=>{});function AE(s,a){let l=s;for(let d of a)l=l[d];return l}var AR=P(()=>{});function F2e(s){let a=new IR.Atom(void 0),l=new IR.Atom({}),d=new IR.Atom({}),f=0;return{addRelatedFlags(g,b){let _=String(++f),S=b.map(C=>{let I={flag:C.flag},O=[C.affects,g,_];return d.setByPointer(R=>AE(R,O),I),O});return()=>{for(let C of S)d.setByPointer(I=>AE(I,C),void 0)}},usePresenceFlag(g){if(!s.enabled)return;let b=(0,IE.useMemo)(()=>{if(!g)return Lz;let _=a.prism,S=(0,RE.pointerToPrism)(l.pointer[g]),C=(0,RE.pointerToPrism)(d.pointer[g]);return(0,RE.prism)(()=>{if(S.getValue())return 2;{let I=C.getValue(),O=_.getValue(),R=I&&O&&I[O];if(R){let A;for(let N of Object.values(R))N&&(A&&A>=N.flag||(A=N.flag));return A}return}})},[g]);return ab(b)},setUserHover(g){let b=a.get();b!==g&&(b&&l.setByPointer(_=>_[b],!1),a.set(g),g&&l.setByPointer(_=>_[g],!0))}}}function iv(s){let a=IE.default.useContext(Nz),l=a.usePresenceFlag(s);return{attrs:{[RR]:s},flag:l,useRelations(d,f){(0,Oz.useEffect)(()=>s&&a.addRelatedFlags(s,d()),[s,...f])}}}function Cee(s){let a=IE.default.useContext(Nz),l=ff("PresenceListeners");(0,Oz.useEffect)(()=>{let d;if(!s)return;let f=g=>{if(g.target instanceof Node){let b=Eee(g.target,"[".concat(RR,"]"));if(b){let _=b.getAttribute(RR);d!==_&&(d=_,a.setUserHover(_||void 0),l._debug("Updated current hover",{itemKey:_}));return}d!=null&&(d=null,a.setUserHover(void 0),l._debug("Cleared current hover"))}};return s.addEventListener("mouseover",f),()=>{s.removeEventListener("mouseover",f),d!=null&&(d=null,l._debug("Cleared current hover as part of cleanup"))}},[s,a])}var IE,Oz,RE,IR,Lz,Nz,RR,sv=P(()=>{IE=X(Ne()),Oz=X(Ne()),mf(),RE=Nt,IR=Nt,Sn(),N2e(),AR(),Lz=(0,RE.prism)(()=>{}),Lz.keepHot(),Nz=IE.default.createContext(F2e({enabled:!1})),RR="data-pi-key"}),ho,Pee,DE,Tee,Fz,_f,Mee,Bz,kee,Aee,Iee,DR,Ree,Dee,Oee,Lee,Nee,Fee,OE,Bee,Uz,OR=P(()=>{Dr(),al(),ho=X(Ne()),Ve(),sv(),DE=le.div(Pee||(Pee=J([`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 16px;
  margin: 0 0px 0 2px;
  position: relative;
  z-index: 0;
  opacity: 0.7;

  &:after {
    position: absolute;
    left: -14px;
    right: -14px;
    top: -2px;
    bottom: -2px;
    content: ' ';
    display: none;
    z-index: -1;
    background: `,`;
  }

  &:hover {
    opacity: 1;
    &:after {
      display: block;
    }
  }
`])),Hu(.2,"black")),Fz=le.div(Tee||(Tee=J([`
  background: none;
  position: relative;
  border: 0;
  transition: transform 0.1s ease-out;
  z-index: 0;
  outline: none;
  cursor: pointer;

  &:after {
    display: none;
    `,`:hover & {
      display: block;
    }
    position: absolute;
    left: -4px;
    right: -4px;
    top: -4px;
    bottom: -4px;
    content: ' ';
    z-index: -1;
  }
`])),DE),_f={offColor:"#555",onColor:"#e0c917"},Bz=le(Fz)(Mee||(Mee=J([`
  &:hover {
    color: #e0c917;
  }

  color: `,`;
`])),s=>s.presence===2?"white":s.isOn?_f.onColor:_f.offColor),Aee=uo(kee||(kee=J([`
  pointer-events: none !important;
`]))),DR=le(Fz)(Iee||(Iee=J([`
  color: `,`;

  `,`;
`])),s=>s.flag===2?"white":s.available?_f.onColor:_f.offColor,s=>s.available?kr:Aee),Dee=le(DR)(Ree||(Ree=J([`
  transform: translateX(2px);
  `,`:hover & {
    transform: translateX(-7px);
  }
`])),DE),Lee=le(DR)(Oee||(Oee=J([`
  transform: translateX(-2px);
  `,`:hover & {
    transform: translateX(7px);
  }
`])),DE),(s=>{let a=le.g(Nee||(Nee=J([`
    stroke-width: 1;
    `,`:hover & path {
      stroke-width: 3;
    }
  `])),DR);s.Prev=()=>ho.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ho.default.createElement(a,{transform:"translate(6 3)"},ho.default.createElement("path",{d:"M4 1L1 4L4 7",stroke:"currentColor"}))),s.Next=()=>ho.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ho.default.createElement(a,{transform:"translate(1 3)"},ho.default.createElement("path",{d:"M1 1L4 4L1 7",stroke:"currentColor"})));let l=le.g(Fee||(Fee=J([`
    stroke-width: 0;
    `,`:hover & path {
      stroke: currentColor;
      stroke-width: 2;
    }
  `])),Bz);s.Cur=()=>ho.default.createElement("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ho.default.createElement(l,{transform:"translate(1 4)"},ho.default.createElement("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"currentColor"})))})(OE||(OE={})),Bee=s=>{var a,l,d,f,g;let b=iv((a=s.prev)==null?void 0:a.itemKey),_=iv(((l=s.cur)==null?void 0:l.type)==="on"?s.cur.itemKey:void 0),S=iv((d=s.next)==null?void 0:d.itemKey);return ho.default.createElement(DE,null,ho.default.createElement(Dee,F({available:!!s.prev,onClick:(f=s.prev)==null?void 0:f.jump,flag:b.flag},b.attrs),ho.default.createElement(OE.Prev,null)),ho.default.createElement(Bz,F({isOn:s.cur.type==="on",onClick:s.cur.toggle,presence:_.flag},_.attrs),ho.default.createElement(OE.Cur,null)),ho.default.createElement(Lee,F({available:!!s.next,onClick:(g=s.next)==null?void 0:g.jump,flag:S.flag},S.attrs),ho.default.createElement(OE.Next,null)))},Uz=Bee}),LR,LE,Uee,zee,Vee,jee,Hee,Gee,Wee,NE,$ee=P(()=>{al(),LR=X(Ne()),Ve(),Te(),OR(),vf(),LE={defaultState:{color:Hu(.95,"#C4C4C4"),hoverColor:Hu(.15,_f.onColor)},withStaticOverride:{color:Hu(.85,"#C4C4C4"),hoverColor:Hu(.15,_f.onColor)}},zee=le.div(Uee||(Uee=J([`
  width: 16px;
  margin: 0 0px 0 2px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  color: `,`;

  &:hover {
    color: `,`;
  }
`])),s=>s.hasStaticOverride?LE.withStaticOverride.color:LE.defaultState.color,s=>s.hasStaticOverride?LE.withStaticOverride.hoverColor:LE.defaultState.hoverColor),jee=le.div(Vee||(Vee=J([`
  width: 5px;
  height: 5px;
  border-radius: 1px;
  transform: rotate(45deg);
  /* border: 1px solid currentColor; */
  background-color: currentColor;
`]))),Gee=le.div(Hee||(Hee=J([`
  width: 5px;
  height: 5px;
  background-color: currentColor;
  border-radius: 1px;
  transform: rotate(45deg);
`]))),Wee=s=>{let{hasStaticOverride:a,obj:l,propConfig:d,pathToProp:f}=s;return LR.default.createElement(zee,{hasStaticOverride:a,onClick:()=>{ue().transaction(({stateEditors:g})=>{for(let{path:b,conf:_}of PE(d,f)){if(ed(_))continue;let S=B(F({},l.address),{pathToProp:b});g.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(S,d)}})},title:"Sequence this prop"},a?LR.default.createElement(Gee,{title:"The default value is overridden"}):LR.default.createElement(jee,{title:"This is the default value for this prop"}))},NE=Wee});function FE(s){return JSON.stringify(zz(s))}function zz(s){return Hy(s)?Object.keys(s).sort().reduce((a,l)=>(a[l]=zz(s[l]),a),{}):Array.isArray(s)?s.map(zz):s}var B2e=P(()=>{di()}),Kee,BE,Xee=P(()=>{Kee="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",BE=(s=21)=>{let a="",l=s;for(;l--;)a+=Kee[Math.random()*64|0];return a}});function qee(){return BE(10)}function U2e(){return BE(10)}function z2e(){return BE(10)}var Ns,wh=P(()=>{B2e(),Xee(),Ns={forSheet(){return"sheet"},forSheetObject(s){return FE({o:s.address.objectKey})},forSheetObjectProp(s,a){return FE({o:s.address.objectKey,p:a})},forTrackKeyframe(s,a,l){return FE({o:s.address.objectKey,t:a,k:l})},forSheetObjectAggregateKeyframe(s,a){return Ns.forCompoundPropAggregateKeyframe(s,[],a)},forSheetAggregateKeyframe(s,a){return FE({o:s.address.sheetId,pos:a})},forCompoundPropAggregateKeyframe(s,a,l){return FE({o:s.address.objectKey,p:a,pos:l})}}});function Yee(s,a,l){if(!a||a.data.keyframes.length===0)return Zee;let d=Vz.get(a.data);if(d&&d[0]===l)return d[1];function f(b){if(!a)return;let _=a.data.keyframes[b];return _&&{kf:_,track:a,itemKey:Ns.forTrackKeyframe(s,a.id,_.id)}}let g=(()=>{let b=a.data.keyframes.findIndex(S=>S.position>=l);if(b===-1)return{prev:f(a.data.keyframes.length-1)};let _=f(b);return _.kf.position===l?{prev:f(b-1),cur:_,next:f(b+1)}:{next:_,prev:f(b-1)}})();return Vz.set(a.data,[l,g]),g}var Vz,Zee,Qee=P(()=>{wh(),Vz=new WeakMap,Zee={}}),jz,Jee=P(()=>{jz={}});function V2e(s,a,l){let d=(0,Xl.getPointerParts)(s).path;return Yn(()=>{if(!Az(l))return{type:"AllStatic",beingScrubbed:!1,contextMenuItems:[],controlIndicators:ov.default.createElement(NE,{hasStaticOverride:!1,obj:a,pathToProp:d,propConfig:l})};let f=!!(0,Xl.val)(eh(ue().atomP.ephemeral.projects.stateByProjectId[a.address.projectId].stateBySheetId[a.address.sheetId].stateByObjectKey[a.address.objectKey].valuesBeingScrubbed,(0,Xl.getPointerParts)(s).path)),g=[],b={beingScrubbed:f,contextMenuItems:g,controlIndicators:ov.default.createElement(ov.default.Fragment,null)},_=(0,Xl.val)(a.template.getMapOfValidSequenceTracks_forStudio()),S=bf(_,d),C=S!==void 0&&Object.keys(S).length!==0,I=[],O=(0,Xl.val)(a.template.getStaticButNotSequencedOverrides()),R=bf(O??jz,d)!==void 0;if(C)for(let A of PE(l,[])){if(ed(A.conf))continue;let N=bf(S,A.path);typeof N!="string"?R=!0:I.push(N)}if((R||C)&&g.push({label:"Reset all to default",callback:()=>{ue().transaction(({unset:A})=>{A(s)})}}),C&&g.push({label:"Make all static",callback:()=>{ue().transaction(({stateEditors:A})=>{for(let{path:N,conf:L}of PE(l,[])){if(ed(L))continue;let V=B(F({},a.address),{pathToProp:[...d,...N]}),G=AE(s,N);A.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(B(F({},V),{value:a.getValueByPointer(G)}))}})}}),(!C||C&&R)&&g.push({label:"Sequence all",callback:()=>{ue().transaction(({stateEditors:A})=>{for(let{path:N,conf:L}of PE(l,d)){if(ed(L))continue;let V=B(F({},a.address),{pathToProp:N});A.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(V,l)}})}}),C){let A=Xl.prism.memo("controlIndicators",()=>ov.default.createElement(j2e,{pointerToProp:s,obj:a,possibleSequenceTrackIds:S,listOfDescendantTrackIds:I}),[S,I]);return B(F({},b),{type:"HasSequences",controlIndicators:A})}else return B(F({},b),{type:"AllStatic",controlIndicators:ov.default.createElement(NE,{hasStaticOverride:R,obj:a,pathToProp:d,propConfig:l})})},[])}function j2e({pointerToProp:s,obj:a,possibleSequenceTrackIds:l,listOfDescendantTrackIds:d}){return Yn(()=>{let f=(0,Xl.getPointerParts)(s).path,g=(0,Xl.val)(a.sheet.getSequence().positionPrism),b=d.map(A=>({trackId:A,track:(0,Xl.val)(a.template.project.pointers.historic.sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[A])})).filter(({track:A})=>!!A).map(A=>B(F({},A),{nearbies:Yee(a,{id:A.trackId,data:A.track,sheetObject:a},g)})),_=b.find(({nearbies:A})=>!!A.cur),S=b.every(({nearbies:A})=>!!A.cur),C=b.reduce((A,N)=>N.nearbies.prev&&(A===void 0||N.nearbies.prev.kf.position>A.kf.position)?N.nearbies.prev:A,void 0),I=b.reduce((A,N)=>N.nearbies.next&&(A===void 0||N.nearbies.next.kf.position<A.kf.position)?N.nearbies.next:A,void 0),O=()=>{S?ue().transaction(A=>{A.unset(s)}):_?ue().transaction(A=>{A.set(s,(0,Xl.val)(s))}):ue().transaction(A=>{A.set(s,(0,Xl.val)(s))})},R={cur:_?{type:"on",itemKey:Ns.forCompoundPropAggregateKeyframe(a,f,g),toggle:O}:{toggle:O,type:"off"},prev:C!==void 0?{position:C.kf.position,itemKey:Ns.forCompoundPropAggregateKeyframe(a,f,C.kf.position),jump:()=>{a.sheet.getSequence().position=C.kf.position}}:void 0,next:I!==void 0?{position:I.kf.position,itemKey:Ns.forCompoundPropAggregateKeyframe(a,f,I.kf.position),jump:()=>{a.sheet.getSequence().position=I.kf.position}}:void 0};return ov.default.createElement(Uz,F({},R))},[s,a,l,d])}var Xl,ov,H2e=P(()=>{Te(),kR(),Sn(),Xl=Nt,Kp(),ov=X(Ne()),$ee(),vf(),wh(),AR(),OR(),Qee(),Jee()});function G2e(){let s=0,a=new nte.Atom({hasLock:!1});return{replaceLock(l,d){let f=s++,g=a.get();return g.hasLock&&g.cleanup(),a.set({hasLock:!0,lockId:f,cleanup:d,deepPath:W2e(ete(l))}),function(){let b=a.get();b.hasLock&&b.lockId===f&&(b.cleanup(),a.set({hasLock:!1}))}},getIsPropHighlightedD(l){let d=AE(a.pointer.deepPath,ete(l));return(0,rte.prism)(()=>{let f=(0,tte.val)(d);return f===!0?"self":f?"descendent":null})}}}function ete(s){return[s.projectId,s.sheetId,s.objectKey,...s.pathToProp]}function W2e(s){let a={};return ef(a,s,!0),a}var tte,nte,rte,NR,Hz=P(()=>{tte=Nt,nte=Nt,rte=Nt,AR(),ib(),NR=G2e()});function $2e(s,a){return JSON.stringify(s,a,2).replace(/^([\{\[])\n (\s+)/,"$1$2").replace(/(\n[ ]+[\{\[])\n\s+/g,"$1 ").replace(/\n\s*([\]\}])/g," $1")}var K2e=P(()=>{});function ite(s,a=!0){try{return typeof s=="string"?s:typeof s=="function"||s instanceof Error?s.toString():a?$2e(s):JSON.stringify(s)}catch{return(s==null?void 0:s.name)||String(s)}}var X2e=P(()=>{K2e()});function q2e(s,a,l){s||(arguments.length>2?ste(a,l):ste(a))}function ste(s,a){let l=arguments.length>1,d=ite(typeof s=="function"?s():s),f=l?`
Instead found: `.concat(ite(a)):"";throw new cte("Invariant: ".concat(d).concat(f),a)}var ote,ate,lte,ute,cte,Y2e=P(()=>{X2e(),ote=/^\s*at.+node:internal.+/gm,ate=/^\s*(at|[^@]+@) (?:Object\.)?invariant.+/gm,lte=/^\s*(at|[^@]+@).+test\-helpers.+/gm,ute=/^\s*(at|[^@]+@).+(debounce|invariant|iif)\.[tj]s.*/gm,cte=class extends Error{constructor(s,a){var l;super(s),pe(this,"found"),a!==void 0&&(this.found=a),this.stack=(l=this.stack)==null?void 0:l.replace(ate,"").replace(ute,"").replace(lte,"").replace(ote,"")}}});function Z2e(s){return(0,FR.prism)(()=>{if(Array.isArray(s)){let a=new Array(s.length);for(let l=0;l<s.length;l++)a[l]=s[l].getValue();return a}else{let a={};for(let l in s)a[l]=(0,FR.val)(s[l]);return a}})}function Gz(s){let a=Hb.default.memo(Hb.default.forwardRef(function(l,d){let f=[],g={},b={ref:d};for(let I in l){let O=l[I];(0,FR.isPrism)(O)?(f.push(O),g[I]=O):b[I]=O}let _=(0,Hb.useRef)(f.length);q2e(_.current===f.length,"expect same number of observable props on every invocation of deriver wrapped component.",{initial:_.current,count:f.length});let S=(0,Hb.useMemo)(()=>Z2e(g),f),C=ab(S);return C&&Hb.default.createElement(s,F(F({},b),C))}));return a.displayName="deriver(".concat(s.displayName,")"),a}var FR,Hb,dte=P(()=>{FR=Nt,Sn(),Hb=X(Ne()),Y2e()});function Q2e(s,a,l){return(0,Xu.prism)(()=>{var d;let f=(0,Xu.getPointerParts)(s).path,g=a.getValueByPointer(s),b=Xu.prism.memo("editPropValue",()=>{let N=null;return{temporarilySetValue(L){N||(N=ue().scrub()),N.capture(V=>{V.set(s,L)})},discardTemporaryValue(){N&&(N.discard(),N=null)},permanentlySetValue(L){N?(N.capture(V=>{V.set(s,L)}),N.commit(),N=null):ue().transaction(V=>{V.set(s,L)})}}},[]),_={createAsset:N=>a.sheet.project.assetStorage.createAsset(N),getAssetUrl:N=>N.id?a.sheet.project.assetStorage.getAssetUrl(N.id):void 0},S=(0,Xu.val)(eh(ue().atomP.ephemeral.projects.stateByProjectId[a.address.projectId].stateBySheetId[a.address.sheetId].stateByObjectKey[a.address.objectKey].valuesBeingScrubbed,(0,Xu.getPointerParts)(s).path))===!0,C=[],I=B(F(F({},b),_),{value:g,beingScrubbed:S,contextMenuItems:C,controlIndicators:Gb.default.createElement(Gb.default.Fragment,null)}),O=I2e(l);if(O){let N=(0,Xu.val)(a.template.getMapOfValidSequenceTracks_forStudio()),L=bf(N,f);if(typeof L=="string"){C.push({label:"Make static",callback:()=>{ue().transaction(({stateEditors:ce})=>{let Pe=B(F({},a.address),{pathToProp:f});ce.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(B(F({},Pe),{value:a.getValueByPointer(s)}))})}});let V=L,G=Xu.prism.sub("lcr",()=>{let ce=(0,Xu.val)(a.template.project.pointers.historic.sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[V]),Pe=(0,Xu.val)(a.sheet.getSequence().positionPrism);return Yee(a,ce&&{data:ce,id:V,sheetObject:a},Pe)},[V]),$;I.beingScrubbed?$="Sequenced_OnKeyframe_BeingScrubbed":G.cur?$="Sequenced_OnKeyframe":((d=G.prev)==null?void 0:d.kf.connectedRight)===!0?$="Sequenced_BeingInterpolated":$="Sequened_NotBeingInterpolated";let Y=()=>{G.cur?ue().transaction(ce=>{ce.unset(s)}):ue().transaction(ce=>{ce.set(s,I.value)})},ie={cur:G.cur?{type:"on",itemKey:G.cur.itemKey,toggle:Y}:{type:"off",toggle:Y},prev:G.prev!==void 0?{itemKey:G.prev.itemKey,position:G.prev.kf.position,jump:()=>{a.sheet.getSequence().position=G.prev.kf.position}}:void 0,next:G.next!==void 0?{itemKey:G.next.itemKey,position:G.next.kf.position,jump:()=>{a.sheet.getSequence().position=G.next.kf.position}}:void 0},re=Gb.default.createElement(Uz,F({},ie));return B(F({},I),{type:"Sequenced",shade:$,nearbyKeyframes:G,controlIndicators:re})}}let R=(0,Xu.val)(a.template.getStaticValues()),A=bf(R,f);return typeof A<"u"&&C.push({label:"Reset to default",callback:()=>{ue().transaction(({unset:N})=>{N(s)})}}),O&&C.push({label:"Sequence",callback:()=>{ue().transaction(({stateEditors:N})=>{let L=B(F({},a.address),{pathToProp:f});N.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(L,l)})}}),typeof A<"u"?B(F({},I),{type:"Static",shade:I.beingScrubbed?"Static_BeingScrubbed":"Static",controlIndicators:Gb.default.createElement(NE,{hasStaticOverride:!0,obj:a,pathToProp:f,propConfig:l})}):B(F({},I),{type:"Default",shade:"Default",controlIndicators:Gb.default.createElement(NE,{hasStaticOverride:!0,obj:a,pathToProp:f,propConfig:l})})})}function J2e(s,a,l){if(BR.has(s))return BR.get(s);{let d=Q2e(s,a,l);return BR.set(s,d),d}}function Wz(s,a,l){let d=J2e(s,a,l);return ab(d)}var Gb,Xu,BR,$z=P(()=>{Kp(),Gb=X(Ne()),Xu=Nt,Te(),kR(),Sn(),vf(),$ee(),Qee(),OR(),BR=new WeakMap});function eIe({propConfig:s,pointerToProp:a,obj:l,SimpleEditorComponent:d}){let f=Wz(a,l,s);return po.default.createElement(J4,{editingTools:f,propConfig:s,value:f.value})}function tIe({pointerToProp:s,obj:a,propConfig:l,visualIndentation:d}){var f;let g=(f=l.label)!=null?f:rh((0,UE.getPointerParts)(s).path),b=Object.entries(l.props),_=b.filter(([Y,ie])=>ed(ie)),S=b.filter(([Y,ie])=>!ed(ie)),[C,I]=wr(null),O=V2e(s,a,l),[R]=ca(I,{menuItems:O.contextMenuItems}),A=_.length>0,N=(0,po.useMemo)(()=>NR.getIsPropHighlightedD(B(F({},a.address),{pathToProp:(0,UE.getPointerParts)(s).path})),[s]),L="".concat(a.address.projectId,",").concat(a.address.sheetId,",").concat(a.address.sheetInstanceId,",").concat(a.address.objectKey,",").concat((0,UE.getPointerParts)(s).path.join()),V=Tte(l);(0,po.useLayoutEffect)(()=>{UR.has(L)||UR.set(L,new UE.Atom(V))},[L,l]);let G=UR.get(L),$=Yn(()=>G?(0,hte.val)(G.pointer):V,[G]);return po.default.createElement(fte,null,R,po.default.createElement(Kz,{style:{"--depth":d-1}},po.default.createElement(vte,{isVectorProp:V},po.default.createElement(bte,null,O.controlIndicators),po.default.createElement(wte,{isHighlighted:N,ref:C},po.default.createElement("span",null,g||"Props")),po.default.createElement(Ste,{isCollapsed:$,isVector:V,onClick:()=>{G==null||G.set(!G.get())}},po.default.createElement(DZ,null))),V&&$&&po.default.createElement(kte,null,[...b].map(([Y,ie])=>po.default.createElement(eIe,{key:"prop-"+Y,propConfig:ie,pointerToProp:s[Y],obj:a})))),!$&&po.default.createElement(Pte,{style:{"--depth":d},depth:d,lastSubIsComposite:A},[...S,..._].map(([Y,ie])=>po.default.createElement(qz,{key:"prop-"+Y,propConfig:ie,pointerToProp:s[Y],obj:a,visualIndentation:d+1}))))}var UE,po,hte,pte,fte,mte,Kz,gte,vte,yte,bte,_te,wte,xte,Ste,Ete,Cte,Pte,Tte,Mte,kte,Ate,UR,nIe=P(()=>{vf(),UE=Nt,eb(),al(),po=X(Ne()),Ve(),JJ(),rv(),Dr(),Rr(),Gte(),da(),H2e(),Hz(),dte(),SZ(),$z(),Sn(),hte=Nt,Ub(),SR(),fte=le.div(pte||(pte=J([`
  --step: 15px;
  --left-pad: 15px;
  `,`;
  --right-width: 60%;
`])),kr),Kz=le.div(mte||(mte=J([`
  height: 30px;
  display: flex;
  align-items: stretch;
  position: relative;
`]))),vte=le.div(gte||(gte=J([`
  padding-left: `,`;
  display: flex;
  align-items: center;
  overflow: hidden;
  `,`;
`])),Iz,({isVectorProp:s})=>s?"width: calc(100% - var(--right-width))":""),bte=le.div(yte||(yte=J([`
  flexshrink: 0;
`]))),wte=Gz(le.div(_te||(_te=J([`
  margin-left: 4px;
  cursor: default;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 4px;
  user-select: none;
  &:hover {
    color: white;
  }
  overflow: hidden;

  `,`;
`])),()=>yf)),Ste=le.span(xte||(xte=J([`
  width: 28px;
  height: 28px;
  font-size: 9px;
  display: flex;
  align-items: center;
  justify-content: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  visibility: `,`;

  `,`:hover & {
    visibility: visible;
  }

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),s=>s.isCollapsed?0:90,s=>!s.isVector&&s.isCollapsed||s.isVector&&!s.isCollapsed?"visible":"hidden",Kz,s=>s.isCollapsed?15:75),Ete=Hu(.05,"#282b2f"),Pte=le.div(Cte||(Cte=J([`
  /* background: `,`; */
  /* padding: `,` 0; */
`])),({depth:s})=>iE(s*.03,Ete),s=>s.lastSubIsComposite?0:"4px"),Tte=CE(s=>{let a=Object.entries(s.props);return a.length<=3&&a.every(([l,d])=>d.type==="number"&&["x","y","z"].includes(l))}),kte=le.div(Mte||(Mte=J([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`]))),Ate=po.default.memo(tIe),UR=new Map});function rIe({isHighlighted:s}){return s==="self"?"#1857a4":s==="descendent"?"#0a2f5c":"initial"}var iIe=P(()=>{});function sIe({propConfig:s,pointerToProp:a,editingTools:l,children:d,isPropHighlightedD:f}){var g;let b=(g=s.label)!=null?g:rh((0,Xz.getPointerParts)(a).path),[_,S]=wr(null),[C]=ca(S,{menuItems:l.contextMenuItems});return Wb.default.createElement(Rte,{isHighlighted:f},C,Wb.default.createElement(Ote,null,Wb.default.createElement(Bte,null,l.controlIndicators),Wb.default.createElement(Nte,{isHighlighted:f,ref:_,title:["obj","props",...(0,Xz.getPointerParts)(a).path].join(".")},b)),Wb.default.createElement(zte,null,d))}var Xz,Wb,Ite,Rte,Dte,Ote,Lte,Nte,Fte,Bte,Ute,zte,oIe=P(()=>{Xz=Nt,da(),Rr(),di(),Wb=X(Ne()),Ve(),Dr(),rv(),dte(),JJ(),iIe(),Rte=Gz(le.div(Ite||(Ite=J([`
  display: flex;
  height: 30px;
  justify-content: flex-start;
  align-items: stretch;
  // We cannot calculate both the container (details panel) width and the descendant
  // (this) width dynamically. This leads to the container width being calculated
  // without this percentage being taken into consideration leads to horizontal
  // clipping/scrolling--the same way as if we explicitly fixed either the container
  // width, or the descendant width.
  // The correct solution for tabulated UIs with dynamic container widths is to use
  // CSS grid. For now I fixed this issue by just giving a great enough width
  // to the details panel so most things don't break.
  --right-width: 60%;
  position: relative;
  `,`;

  /* background-color: `,`; */
`])),kr,rIe)),Ote=le.div(Dte||(Dte=J([`
  box-sizing: border-box;
  padding-left: `,`;
  padding-right: 4px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: stretch;
  gap: 4px;
  flex-grow: 0;
  flex-shrink: 0;
  width: calc(100% - var(--right-width));
`])),Iz),Nte=Gz(le.div(Lte||(Lte=J([`
  text-align: left;
  flex: 1 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  user-select: none;
  cursor: default;

  `,`;
  &:hover {
    color: white;
  }
`])),yf)),Bte=le.div(Fte||(Fte=J([`
  flex-basis: 8px;
  flex: 0 0;
  display: flex;
  align-items: center;
`]))),zte=le.div(Ute||(Ute=J([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`])))});function aIe({propConfig:s,pointerToProp:a,obj:l,SimpleEditorComponent:d}){let f=Wz(a,l,s),g=(0,zE.useMemo)(()=>NR.getIsPropHighlightedD(B(F({},l.address),{pathToProp:(0,Vte.getPointerParts)(a).path})),[a]);return zE.default.createElement(sIe,{editingTools:f,propConfig:s,pointerToProp:a,isPropHighlightedD:g},zE.default.createElement(d,{editingTools:f,propConfig:s,value:f.value}))}var zE,Vte,jte,lIe=P(()=>{zE=X(Ne()),$z(),oIe(),Vte=Nt,Hz(),jte=zE.default.memo(aIe)}),VE,Hte,qz,Gte=P(()=>{VE=X(Ne()),QJ(),nIe(),lIe(),Hte=({propConfig:s,visualIndentation:a,pointerToProp:l,obj:d})=>{if(s.type==="compound")return VE.default.createElement(Ate,{obj:d,visualIndentation:a,pointerToProp:l,propConfig:s});if(s.type==="enum")return VE.default.createElement(VE.default.Fragment,null);{let f=kz[s.type];return VE.default.createElement(jte,{SimpleEditorComponent:f,obj:d,visualIndentation:a,pointerToProp:l,propConfig:s})}},qz=Hte});function Wte(s){return zR.has(s)||zR.set(s,($te++).toString()),zR.get(s)}var zR,$te,Kte=P(()=>{zR=new WeakMap,$te=0}),$b,Xte,qte,Yte,Zte,Qte,Jte,uIe=P(()=>{$b=X(Ne()),Gte(),Sn(),Kte(),Ve(),qte=le.div(Xte||(Xte=J([`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
`]))),Zte=le.button(Yte||(Yte=J([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  border-radius: 2px;

  color: #a8a8a9;
  background: rgba(255, 255, 255, 0.1);

  border: none;
  height: 28px;

  &:hover {
    background: rgba(255, 255, 255, 0.15);
  }

  &:active {
    background: rgba(255, 255, 255, 0.2);
  }
`]))),Qte=({objects:s})=>{let a=s[0],l=rr(a.template.configPointer),d=rr(a.template._temp_actionsPointer);return $b.default.createElement($b.default.Fragment,null,$b.default.createElement(qz,{key:Wte(a),obj:a,pointerToProp:a.propsP,propConfig:l,visualIndentation:1}),$b.default.createElement(qte,null,d&&Object.entries(d).map(([f,g])=>$b.default.createElement(Zte,{key:f,onClick:()=>{g(a.publicApi)}},f))))},Jte=Qte}),ene,tne,VR,nne=P(()=>{Ve(),tne=le.button(ene||(ene=J([`
  text-align: center;
  padding: 8px;
  border-radius: 2px;
  border: 1px solid #627b7b87;
  background-color: #4b787d3d;
  color: #eaeaea;
  font-weight: 400;
  display: block;
  appearance: none;
  flex-grow: 1;
  cursor: `,`;
  opacity: `,`;

  &:hover {
    background-color: #7dc1c878;
    border-color: #9ebcbf;
  }
`])),s=>s.disabled?"none":"pointer",s=>s.disabled?.4:1),VR=tne}),cIe=P(()=>{}),rne,dIe=P(()=>{cIe(),rne=(s=21)=>{let a="",l=crypto.getRandomValues(new Uint8Array(s));for(;s--;){let d=l[s]&63;d<36?a+=d.toString(36):d<62?a+=(d-26).toString(36).toUpperCase():d<63?a+="_":a+="-"}return a}});function ine(){return rne(16)}var sne=P(()=>{dIe()}),one,xh,Yz,ane,lne,une,cne,dne=P(()=>{one=Nt,Rr(),xh=X(Ne()),Yz=(0,xh.createContext)(null),ane=0,lne=()=>{let s=(0,xh.useMemo)(()=>ane++,[]),{cur:a,set:l}=(0,xh.useContext)(Yz),[d,f]=wr(!1),g=(0,xh.useCallback)((b,_)=>{l(b?s:-1,_)},[]);return(0,xh.useEffect)(()=>a.onStale(()=>{let b=a.getValue()===s;d.current!==b&&(d.current=b)}),[a,s]),[f,g]},une=({children:s})=>{let a=(0,xh.useMemo)(()=>new one.Atom(-1),[]),l=a.prism,d=(0,xh.useMemo)(()=>{let f;return(g,b)=>{let _=f!==void 0;f!==void 0&&(clearTimeout(f),f=void 0),b===0||_?a.set(g):f=setTimeout(()=>{a.set(g),f=void 0},b)}},[]);return xh.default.createElement(Yz.Provider,{value:{cur:l,set:d}},s)},cne=une});function Kb(s,a){let l=s.enabled!==!1,[d,f]=lne(),[g,b]=wr(null);(0,pne.useEffect)(()=>{if(!l)return;let S=g.current;if(!S)return;let C=()=>{var O;return f(!0,(O=s.enterDelay)!=null?O:400)},I=()=>{var O;return f(!1,(O=s.exitDelay)!=null?O:200)};return S.addEventListener("mouseenter",C),S.addEventListener("mouseleave",I),()=>{S.removeEventListener("mouseenter",C),S.removeEventListener("mouseleave",I)}},[g,l,s.enterDelay,s.exitDelay]);let _=(0,hne.useContext)(kb);return[l&&d&&b?(0,fne.createPortal)(jR.default.createElement(Sz,{children:a,target:b,onClickOutside:Gu,verticalPlacement:s.verticalPlacement,verticalGap:s.verticalGap}),_):jR.default.createElement(jR.default.Fragment,null),g,d]}var hne,pne,jR,fne,jE=P(()=>{Rr(),hne=X(Ne()),pne=X(Ne()),jR=X(Ne()),eJ(),fne=X(Lu()),dne(),ev(),Rb()}),mne,gne,Xb,HR=P(()=>{Ve(),Qc(),gne=le(Zc)(mne||(mne=J([`
  padding: 1em;
  max-width: 240px;
  pointer-events: none !important;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: #45464d;
`]))),Xb=gne}),td,vne,yne,bne,_ne,wne,xne,Sne,Ene,Cne,hIe=P(()=>{Sn(),Te(),td=X(Ne()),Ve(),sne(),jE(),HR(),nne(),yne=le.div(vne||(vne=J([`
  padding: 8px 10px;
  position: relative;
  background-color: #6d232352;
  &:before {
    position: absolute;
    content: ' ';
    display: block;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #ff000070;
  }
`]))),_ne=le.div(bne||(bne=J([`
  margin-bottom: 1em;
  & a {
    color: inherit;
  }
`]))),xne=le.div(wne||(wne=J([`
  display: flex;
  gap: 8px;
`]))),Sne=({projectId:s})=>{let a=rr(ue().atomP.ephemeral.coreByProject[s].loadingState);return a&&a.type==="browserStateIsNotBasedOnDiskState"?td.default.createElement(Ene,{loadingState:a,projectId:s}):null},Ene=({projectId:s,loadingState:a})=>{let l=()=>{ue().transaction(({drafts:S,stateEditors:C})=>{C.coreByProject.historic.revisionHistory.add({projectId:s,revision:a.onDiskState.revisionHistory[0]}),C.coreByProject.historic.revisionHistory.add({projectId:s,revision:ine()}),S.ephemeral.coreByProject[s].loadingState={type:"loaded"}})},d=()=>{ue().transaction(({drafts:S})=>{S.historic.coreByProject[s]=a.onDiskState,S.ephemeral.coreByProject[s].loadingState={type:"loaded"}})},[f,g]=Kb({},()=>td.default.createElement(Xb,null,"The browser's state will override the disk state.")),[b,_]=Kb({},()=>td.default.createElement(Xb,null,"The disk's state will override the browser's state."));return td.default.createElement(yne,null,td.default.createElement(_ne,null,"Browser state is not based on disk state."," ",td.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Learn more.")),td.default.createElement(xne,null,f,td.default.createElement(VR,{onClick:l,ref:g},"Use browser's state"),b,td.default.createElement(VR,{onClick:d,ref:_},"Use disk state")))},Cne=Sne}),pIe=W((s,a)=>{(function(l){typeof s=="object"&&typeof a<"u"?a.exports=l():(typeof window<"u"?window:typeof Wi<"u"?Wi:typeof self<"u"?self:this).JSZip=l()})(function(){return function l(d,f,g){function b(C,I){if(!f[C]){if(!d[C]){var O=typeof J3=="function"&&J3;if(!I&&O)return O(C,!0);if(_)return _(C,!0);var R=new Error("Cannot find module '"+C+"'");throw R.code="MODULE_NOT_FOUND",R}var A=f[C]={exports:{}};d[C][0].call(A.exports,function(N){var L=d[C][1][N];return b(L||N)},A,A.exports,l,d,f,g)}return f[C].exports}for(var _=typeof J3=="function"&&J3,S=0;S<g.length;S++)b(g[S]);return b}({1:[function(l,d,f){var g=l("./utils"),b=l("./support"),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f.encode=function(S){for(var C,I,O,R,A,N,L,V=[],G=0,$=S.length,Y=$,ie=g.getTypeOf(S)!=="string";G<S.length;)Y=$-G,O=ie?(C=S[G++],I=G<$?S[G++]:0,G<$?S[G++]:0):(C=S.charCodeAt(G++),I=G<$?S.charCodeAt(G++):0,G<$?S.charCodeAt(G++):0),R=C>>2,A=(3&C)<<4|I>>4,N=1<Y?(15&I)<<2|O>>6:64,L=2<Y?63&O:64,V.push(_.charAt(R)+_.charAt(A)+_.charAt(N)+_.charAt(L));return V.join("")},f.decode=function(S){var C,I,O,R,A,N,L=0,V=0,G="data:";if(S.substr(0,G.length)===G)throw new Error("Invalid base64 input, it looks like a data url.");var $,Y=3*(S=S.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(S.charAt(S.length-1)===_.charAt(64)&&Y--,S.charAt(S.length-2)===_.charAt(64)&&Y--,Y%1!=0)throw new Error("Invalid base64 input, bad content length.");for($=b.uint8array?new Uint8Array(0|Y):new Array(0|Y);L<S.length;)C=_.indexOf(S.charAt(L++))<<2|(R=_.indexOf(S.charAt(L++)))>>4,I=(15&R)<<4|(A=_.indexOf(S.charAt(L++)))>>2,O=(3&A)<<6|(N=_.indexOf(S.charAt(L++))),$[V++]=C,A!==64&&($[V++]=I),N!==64&&($[V++]=O);return $}},{"./support":30,"./utils":32}],2:[function(l,d,f){var g=l("./external"),b=l("./stream/DataWorker"),_=l("./stream/Crc32Probe"),S=l("./stream/DataLengthProbe");function C(I,O,R,A,N){this.compressedSize=I,this.uncompressedSize=O,this.crc32=R,this.compression=A,this.compressedContent=N}C.prototype={getContentWorker:function(){var I=new b(g.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new S("data_length")),O=this;return I.on("end",function(){if(this.streamInfo.data_length!==O.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),I},getCompressedWorker:function(){return new b(g.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},C.createWorkerFrom=function(I,O,R){return I.pipe(new _).pipe(new S("uncompressedSize")).pipe(O.compressWorker(R)).pipe(new S("compressedSize")).withStreamInfo("compression",O)},d.exports=C},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(l,d,f){var g=l("./stream/GenericWorker");f.STORE={magic:"\0\0",compressWorker:function(){return new g("STORE compression")},uncompressWorker:function(){return new g("STORE decompression")}},f.DEFLATE=l("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(l,d,f){var g=l("./utils"),b=function(){for(var _,S=[],C=0;C<256;C++){_=C;for(var I=0;I<8;I++)_=1&_?3988292384^_>>>1:_>>>1;S[C]=_}return S}();d.exports=function(_,S){return _!==void 0&&_.length?g.getTypeOf(_)!=="string"?function(C,I,O,R){var A=b,N=R+O;C^=-1;for(var L=R;L<N;L++)C=C>>>8^A[255&(C^I[L])];return-1^C}(0|S,_,_.length,0):function(C,I,O,R){var A=b,N=R+O;C^=-1;for(var L=R;L<N;L++)C=C>>>8^A[255&(C^I.charCodeAt(L))];return-1^C}(0|S,_,_.length,0):0}},{"./utils":32}],5:[function(l,d,f){f.base64=!1,f.binary=!1,f.dir=!1,f.createFolders=!0,f.date=null,f.compression=null,f.compressionOptions=null,f.comment=null,f.unixPermissions=null,f.dosPermissions=null},{}],6:[function(l,d,f){var g=null;g=typeof Promise<"u"?Promise:l("lie"),d.exports={Promise:g}},{lie:37}],7:[function(l,d,f){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",b=l("pako"),_=l("./utils"),S=l("./stream/GenericWorker"),C=g?"uint8array":"array";function I(O,R){S.call(this,"FlateWorker/"+O),this._pako=null,this._pakoAction=O,this._pakoOptions=R,this.meta={}}f.magic="\b\0",_.inherits(I,S),I.prototype.processChunk=function(O){this.meta=O.meta,this._pako===null&&this._createPako(),this._pako.push(_.transformTo(C,O.data),!1)},I.prototype.flush=function(){S.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},I.prototype.cleanUp=function(){S.prototype.cleanUp.call(this),this._pako=null},I.prototype._createPako=function(){this._pako=new b[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var O=this;this._pako.onData=function(R){O.push({data:R,meta:O.meta})}},f.compressWorker=function(O){return new I("Deflate",O)},f.uncompressWorker=function(){return new I("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(l,d,f){function g(A,N){var L,V="";for(L=0;L<N;L++)V+=String.fromCharCode(255&A),A>>>=8;return V}function b(A,N,L,V,G,$){var Y,ie,re=A.file,ce=A.compression,Pe=$!==C.utf8encode,ye=_.transformTo("string",$(re.name)),we=_.transformTo("string",C.utf8encode(re.name)),Le=re.comment,it=_.transformTo("string",$(Le)),de=_.transformTo("string",C.utf8encode(Le)),Oe=we.length!==re.name.length,Q=de.length!==Le.length,je="",Rt="",Ie="",Re=re.dir,Ge=re.date,St={crc32:0,compressedSize:0,uncompressedSize:0};N&&!L||(St.crc32=A.crc32,St.compressedSize=A.compressedSize,St.uncompressedSize=A.uncompressedSize);var he=0;N&&(he|=8),Pe||!Oe&&!Q||(he|=2048);var ge=0,et=0;Re&&(ge|=16),G==="UNIX"?(et=798,ge|=function(ut,We){var tn=ut;return ut||(tn=We?16893:33204),(65535&tn)<<16}(re.unixPermissions,Re)):(et=20,ge|=function(ut){return 63&(ut||0)}(re.dosPermissions)),Y=Ge.getUTCHours(),Y<<=6,Y|=Ge.getUTCMinutes(),Y<<=5,Y|=Ge.getUTCSeconds()/2,ie=Ge.getUTCFullYear()-1980,ie<<=4,ie|=Ge.getUTCMonth()+1,ie<<=5,ie|=Ge.getUTCDate(),Oe&&(Rt=g(1,1)+g(I(ye),4)+we,je+="up"+g(Rt.length,2)+Rt),Q&&(Ie=g(1,1)+g(I(it),4)+de,je+="uc"+g(Ie.length,2)+Ie);var rt="";return rt+=`
\0`,rt+=g(he,2),rt+=ce.magic,rt+=g(Y,2),rt+=g(ie,2),rt+=g(St.crc32,4),rt+=g(St.compressedSize,4),rt+=g(St.uncompressedSize,4),rt+=g(ye.length,2),rt+=g(je.length,2),{fileRecord:O.LOCAL_FILE_HEADER+rt+ye+je,dirRecord:O.CENTRAL_FILE_HEADER+g(et,2)+rt+g(it.length,2)+"\0\0\0\0"+g(ge,4)+g(V,4)+ye+je+it}}var _=l("../utils"),S=l("../stream/GenericWorker"),C=l("../utf8"),I=l("../crc32"),O=l("../signature");function R(A,N,L,V){S.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=N,this.zipPlatform=L,this.encodeFileName=V,this.streamFiles=A,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}_.inherits(R,S),R.prototype.push=function(A){var N=A.meta.percent||0,L=this.entriesCount,V=this._sources.length;this.accumulate?this.contentBuffer.push(A):(this.bytesWritten+=A.data.length,S.prototype.push.call(this,{data:A.data,meta:{currentFile:this.currentFile,percent:L?(N+100*(L-V-1))/L:100}}))},R.prototype.openedSource=function(A){this.currentSourceOffset=this.bytesWritten,this.currentFile=A.file.name;var N=this.streamFiles&&!A.file.dir;if(N){var L=b(A,N,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:L.fileRecord,meta:{percent:0}})}else this.accumulate=!0},R.prototype.closedSource=function(A){this.accumulate=!1;var N=this.streamFiles&&!A.file.dir,L=b(A,N,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(L.dirRecord),N)this.push({data:function(V){return O.DATA_DESCRIPTOR+g(V.crc32,4)+g(V.compressedSize,4)+g(V.uncompressedSize,4)}(A),meta:{percent:100}});else for(this.push({data:L.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},R.prototype.flush=function(){for(var A=this.bytesWritten,N=0;N<this.dirRecords.length;N++)this.push({data:this.dirRecords[N],meta:{percent:100}});var L=this.bytesWritten-A,V=function(G,$,Y,ie,re){var ce=_.transformTo("string",re(ie));return O.CENTRAL_DIRECTORY_END+"\0\0\0\0"+g(G,2)+g(G,2)+g($,4)+g(Y,4)+g(ce.length,2)+ce}(this.dirRecords.length,L,A,this.zipComment,this.encodeFileName);this.push({data:V,meta:{percent:100}})},R.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},R.prototype.registerPrevious=function(A){this._sources.push(A);var N=this;return A.on("data",function(L){N.processChunk(L)}),A.on("end",function(){N.closedSource(N.previous.streamInfo),N._sources.length?N.prepareNextSource():N.end()}),A.on("error",function(L){N.error(L)}),this},R.prototype.resume=function(){return!!S.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},R.prototype.error=function(A){var N=this._sources;if(!S.prototype.error.call(this,A))return!1;for(var L=0;L<N.length;L++)try{N[L].error(A)}catch{}return!0},R.prototype.lock=function(){S.prototype.lock.call(this);for(var A=this._sources,N=0;N<A.length;N++)A[N].lock()},d.exports=R},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(l,d,f){var g=l("../compressions"),b=l("./ZipFileWorker");f.generateWorker=function(_,S,C){var I=new b(S.streamFiles,C,S.platform,S.encodeFileName),O=0;try{_.forEach(function(R,A){O++;var N=function($,Y){var ie=$||Y,re=g[ie];if(!re)throw new Error(ie+" is not a valid compression method !");return re}(A.options.compression,S.compression),L=A.options.compressionOptions||S.compressionOptions||{},V=A.dir,G=A.date;A._compressWorker(N,L).withStreamInfo("file",{name:R,dir:V,date:G,comment:A.comment||"",unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions}).pipe(I)}),I.entriesCount=O}catch(R){I.error(R)}return I}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(l,d,f){function g(){if(!(this instanceof g))return new g;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var b=new g;for(var _ in this)typeof this[_]!="function"&&(b[_]=this[_]);return b}}(g.prototype=l("./object")).loadAsync=l("./load"),g.support=l("./support"),g.defaults=l("./defaults"),g.version="3.10.1",g.loadAsync=function(b,_){return new g().loadAsync(b,_)},g.external=l("./external"),d.exports=g},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(l,d,f){var g=l("./utils"),b=l("./external"),_=l("./utf8"),S=l("./zipEntries"),C=l("./stream/Crc32Probe"),I=l("./nodejsUtils");function O(R){return new b.Promise(function(A,N){var L=R.decompressed.getContentWorker().pipe(new C);L.on("error",function(V){N(V)}).on("end",function(){L.streamInfo.crc32!==R.decompressed.crc32?N(new Error("Corrupted zip : CRC32 mismatch")):A()}).resume()})}d.exports=function(R,A){var N=this;return A=g.extend(A||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:_.utf8decode}),I.isNode&&I.isStream(R)?b.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):g.prepareContent("the loaded zip file",R,!0,A.optimizedBinaryString,A.base64).then(function(L){var V=new S(A);return V.load(L),V}).then(function(L){var V=[b.Promise.resolve(L)],G=L.files;if(A.checkCRC32)for(var $=0;$<G.length;$++)V.push(O(G[$]));return b.Promise.all(V)}).then(function(L){for(var V=L.shift(),G=V.files,$=0;$<G.length;$++){var Y=G[$],ie=Y.fileNameStr,re=g.resolve(Y.fileNameStr);N.file(re,Y.decompressed,{binary:!0,optimizedBinaryString:!0,date:Y.date,dir:Y.dir,comment:Y.fileCommentStr.length?Y.fileCommentStr:null,unixPermissions:Y.unixPermissions,dosPermissions:Y.dosPermissions,createFolders:A.createFolders}),Y.dir||(N.file(re).unsafeOriginalName=ie)}return V.zipComment.length&&(N.comment=V.zipComment),N})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(l,d,f){var g=l("../utils"),b=l("../stream/GenericWorker");function _(S,C){b.call(this,"Nodejs stream input adapter for "+S),this._upstreamEnded=!1,this._bindStream(C)}g.inherits(_,b),_.prototype._bindStream=function(S){var C=this;(this._stream=S).pause(),S.on("data",function(I){C.push({data:I,meta:{percent:0}})}).on("error",function(I){C.isPaused?this.generatedError=I:C.error(I)}).on("end",function(){C.isPaused?C._upstreamEnded=!0:C.end()})},_.prototype.pause=function(){return!!b.prototype.pause.call(this)&&(this._stream.pause(),!0)},_.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},d.exports=_},{"../stream/GenericWorker":28,"../utils":32}],13:[function(l,d,f){var g=l("readable-stream").Readable;function b(_,S,C){g.call(this,S),this._helper=_;var I=this;_.on("data",function(O,R){I.push(O)||I._helper.pause(),C&&C(R)}).on("error",function(O){I.emit("error",O)}).on("end",function(){I.push(null)})}l("../utils").inherits(b,g),b.prototype._read=function(){this._helper.resume()},d.exports=b},{"../utils":32,"readable-stream":16}],14:[function(l,d,f){d.exports={isNode:typeof Buffer<"u",newBufferFrom:function(g,b){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(g,b);if(typeof g=="number")throw new Error('The "data" argument must not be a number');return new Buffer(g,b)},allocBuffer:function(g){if(Buffer.alloc)return Buffer.alloc(g);var b=new Buffer(g);return b.fill(0),b},isBuffer:function(g){return Buffer.isBuffer(g)},isStream:function(g){return g&&typeof g.on=="function"&&typeof g.pause=="function"&&typeof g.resume=="function"}}},{}],15:[function(l,d,f){function g(re,ce,Pe){var ye,we=_.getTypeOf(ce),Le=_.extend(Pe||{},I);Le.date=Le.date||new Date,Le.compression!==null&&(Le.compression=Le.compression.toUpperCase()),typeof Le.unixPermissions=="string"&&(Le.unixPermissions=parseInt(Le.unixPermissions,8)),Le.unixPermissions&&16384&Le.unixPermissions&&(Le.dir=!0),Le.dosPermissions&&16&Le.dosPermissions&&(Le.dir=!0),Le.dir&&(re=G(re)),Le.createFolders&&(ye=V(re))&&$.call(this,ye,!0);var it=we==="string"&&Le.binary===!1&&Le.base64===!1;Pe&&Pe.binary!==void 0||(Le.binary=!it),(ce instanceof O&&ce.uncompressedSize===0||Le.dir||!ce||ce.length===0)&&(Le.base64=!1,Le.binary=!0,ce="",Le.compression="STORE",we="string");var de=null;de=ce instanceof O||ce instanceof S?ce:N.isNode&&N.isStream(ce)?new L(re,ce):_.prepareContent(re,ce,Le.binary,Le.optimizedBinaryString,Le.base64);var Oe=new R(re,de,Le);this.files[re]=Oe}var b=l("./utf8"),_=l("./utils"),S=l("./stream/GenericWorker"),C=l("./stream/StreamHelper"),I=l("./defaults"),O=l("./compressedObject"),R=l("./zipObject"),A=l("./generate"),N=l("./nodejsUtils"),L=l("./nodejs/NodejsStreamInputAdapter"),V=function(re){re.slice(-1)==="/"&&(re=re.substring(0,re.length-1));var ce=re.lastIndexOf("/");return 0<ce?re.substring(0,ce):""},G=function(re){return re.slice(-1)!=="/"&&(re+="/"),re},$=function(re,ce){return ce=ce!==void 0?ce:I.createFolders,re=G(re),this.files[re]||g.call(this,re,null,{dir:!0,createFolders:ce}),this.files[re]};function Y(re){return Object.prototype.toString.call(re)==="[object RegExp]"}var ie={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(re){var ce,Pe,ye;for(ce in this.files)ye=this.files[ce],(Pe=ce.slice(this.root.length,ce.length))&&ce.slice(0,this.root.length)===this.root&&re(Pe,ye)},filter:function(re){var ce=[];return this.forEach(function(Pe,ye){re(Pe,ye)&&ce.push(ye)}),ce},file:function(re,ce,Pe){if(arguments.length!==1)return re=this.root+re,g.call(this,re,ce,Pe),this;if(Y(re)){var ye=re;return this.filter(function(Le,it){return!it.dir&&ye.test(Le)})}var we=this.files[this.root+re];return we&&!we.dir?we:null},folder:function(re){if(!re)return this;if(Y(re))return this.filter(function(we,Le){return Le.dir&&re.test(we)});var ce=this.root+re,Pe=$.call(this,ce),ye=this.clone();return ye.root=Pe.name,ye},remove:function(re){re=this.root+re;var ce=this.files[re];if(ce||(re.slice(-1)!=="/"&&(re+="/"),ce=this.files[re]),ce&&!ce.dir)delete this.files[re];else for(var Pe=this.filter(function(we,Le){return Le.name.slice(0,re.length)===re}),ye=0;ye<Pe.length;ye++)delete this.files[Pe[ye].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(re){var ce,Pe={};try{if((Pe=_.extend(re||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:b.utf8encode})).type=Pe.type.toLowerCase(),Pe.compression=Pe.compression.toUpperCase(),Pe.type==="binarystring"&&(Pe.type="string"),!Pe.type)throw new Error("No output type specified.");_.checkSupport(Pe.type),Pe.platform!=="darwin"&&Pe.platform!=="freebsd"&&Pe.platform!=="linux"&&Pe.platform!=="sunos"||(Pe.platform="UNIX"),Pe.platform==="win32"&&(Pe.platform="DOS");var ye=Pe.comment||this.comment||"";ce=A.generateWorker(this,Pe,ye)}catch(we){(ce=new S("error")).error(we)}return new C(ce,Pe.type||"string",Pe.mimeType)},generateAsync:function(re,ce){return this.generateInternalStream(re).accumulate(ce)},generateNodeStream:function(re,ce){return(re=re||{}).type||(re.type="nodebuffer"),this.generateInternalStream(re).toNodejsStream(ce)}};d.exports=ie},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(l,d,f){d.exports=l("stream")},{stream:void 0}],17:[function(l,d,f){var g=l("./DataReader");function b(_){g.call(this,_);for(var S=0;S<this.data.length;S++)_[S]=255&_[S]}l("../utils").inherits(b,g),b.prototype.byteAt=function(_){return this.data[this.zero+_]},b.prototype.lastIndexOfSignature=function(_){for(var S=_.charCodeAt(0),C=_.charCodeAt(1),I=_.charCodeAt(2),O=_.charCodeAt(3),R=this.length-4;0<=R;--R)if(this.data[R]===S&&this.data[R+1]===C&&this.data[R+2]===I&&this.data[R+3]===O)return R-this.zero;return-1},b.prototype.readAndCheckSignature=function(_){var S=_.charCodeAt(0),C=_.charCodeAt(1),I=_.charCodeAt(2),O=_.charCodeAt(3),R=this.readData(4);return S===R[0]&&C===R[1]&&I===R[2]&&O===R[3]},b.prototype.readData=function(_){if(this.checkOffset(_),_===0)return[];var S=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,S},d.exports=b},{"../utils":32,"./DataReader":18}],18:[function(l,d,f){var g=l("../utils");function b(_){this.data=_,this.length=_.length,this.index=0,this.zero=0}b.prototype={checkOffset:function(_){this.checkIndex(this.index+_)},checkIndex:function(_){if(this.length<this.zero+_||_<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+_+"). Corrupted zip ?")},setIndex:function(_){this.checkIndex(_),this.index=_},skip:function(_){this.setIndex(this.index+_)},byteAt:function(){},readInt:function(_){var S,C=0;for(this.checkOffset(_),S=this.index+_-1;S>=this.index;S--)C=(C<<8)+this.byteAt(S);return this.index+=_,C},readString:function(_){return g.transformTo("string",this.readData(_))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var _=this.readInt(4);return new Date(Date.UTC(1980+(_>>25&127),(_>>21&15)-1,_>>16&31,_>>11&31,_>>5&63,(31&_)<<1))}},d.exports=b},{"../utils":32}],19:[function(l,d,f){var g=l("./Uint8ArrayReader");function b(_){g.call(this,_)}l("../utils").inherits(b,g),b.prototype.readData=function(_){this.checkOffset(_);var S=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,S},d.exports=b},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(l,d,f){var g=l("./DataReader");function b(_){g.call(this,_)}l("../utils").inherits(b,g),b.prototype.byteAt=function(_){return this.data.charCodeAt(this.zero+_)},b.prototype.lastIndexOfSignature=function(_){return this.data.lastIndexOf(_)-this.zero},b.prototype.readAndCheckSignature=function(_){return _===this.readData(4)},b.prototype.readData=function(_){this.checkOffset(_);var S=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,S},d.exports=b},{"../utils":32,"./DataReader":18}],21:[function(l,d,f){var g=l("./ArrayReader");function b(_){g.call(this,_)}l("../utils").inherits(b,g),b.prototype.readData=function(_){if(this.checkOffset(_),_===0)return new Uint8Array(0);var S=this.data.subarray(this.zero+this.index,this.zero+this.index+_);return this.index+=_,S},d.exports=b},{"../utils":32,"./ArrayReader":17}],22:[function(l,d,f){var g=l("../utils"),b=l("../support"),_=l("./ArrayReader"),S=l("./StringReader"),C=l("./NodeBufferReader"),I=l("./Uint8ArrayReader");d.exports=function(O){var R=g.getTypeOf(O);return g.checkSupport(R),R!=="string"||b.uint8array?R==="nodebuffer"?new C(O):b.uint8array?new I(g.transformTo("uint8array",O)):new _(g.transformTo("array",O)):new S(O)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(l,d,f){f.LOCAL_FILE_HEADER="PK",f.CENTRAL_FILE_HEADER="PK",f.CENTRAL_DIRECTORY_END="PK",f.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",f.ZIP64_CENTRAL_DIRECTORY_END="PK",f.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(l,d,f){var g=l("./GenericWorker"),b=l("../utils");function _(S){g.call(this,"ConvertWorker to "+S),this.destType=S}b.inherits(_,g),_.prototype.processChunk=function(S){this.push({data:b.transformTo(this.destType,S.data),meta:S.meta})},d.exports=_},{"../utils":32,"./GenericWorker":28}],25:[function(l,d,f){var g=l("./GenericWorker"),b=l("../crc32");function _(){g.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}l("../utils").inherits(_,g),_.prototype.processChunk=function(S){this.streamInfo.crc32=b(S.data,this.streamInfo.crc32||0),this.push(S)},d.exports=_},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(l,d,f){var g=l("../utils"),b=l("./GenericWorker");function _(S){b.call(this,"DataLengthProbe for "+S),this.propName=S,this.withStreamInfo(S,0)}g.inherits(_,b),_.prototype.processChunk=function(S){if(S){var C=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=C+S.data.length}b.prototype.processChunk.call(this,S)},d.exports=_},{"../utils":32,"./GenericWorker":28}],27:[function(l,d,f){var g=l("../utils"),b=l("./GenericWorker");function _(S){b.call(this,"DataWorker");var C=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,S.then(function(I){C.dataIsReady=!0,C.data=I,C.max=I&&I.length||0,C.type=g.getTypeOf(I),C.isPaused||C._tickAndRepeat()},function(I){C.error(I)})}g.inherits(_,b),_.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this.data=null},_.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,g.delay(this._tickAndRepeat,[],this)),!0)},_.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(g.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},_.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var S=null,C=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":S=this.data.substring(this.index,C);break;case"uint8array":S=this.data.subarray(this.index,C);break;case"array":case"nodebuffer":S=this.data.slice(this.index,C)}return this.index=C,this.push({data:S,meta:{percent:this.max?this.index/this.max*100:0}})},d.exports=_},{"../utils":32,"./GenericWorker":28}],28:[function(l,d,f){function g(b){this.name=b||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}g.prototype={push:function(b){this.emit("data",b)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(b){this.emit("error",b)}return!0},error:function(b){return!this.isFinished&&(this.isPaused?this.generatedError=b:(this.isFinished=!0,this.emit("error",b),this.previous&&this.previous.error(b),this.cleanUp()),!0)},on:function(b,_){return this._listeners[b].push(_),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(b,_){if(this._listeners[b])for(var S=0;S<this._listeners[b].length;S++)this._listeners[b][S].call(this,_)},pipe:function(b){return b.registerPrevious(this)},registerPrevious:function(b){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=b.streamInfo,this.mergeStreamInfo(),this.previous=b;var _=this;return b.on("data",function(S){_.processChunk(S)}),b.on("end",function(){_.end()}),b.on("error",function(S){_.error(S)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var b=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),b=!0),this.previous&&this.previous.resume(),!b},flush:function(){},processChunk:function(b){this.push(b)},withStreamInfo:function(b,_){return this.extraStreamInfo[b]=_,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var b in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,b)&&(this.streamInfo[b]=this.extraStreamInfo[b])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var b="Worker "+this.name;return this.previous?this.previous+" -> "+b:b}},d.exports=g},{}],29:[function(l,d,f){var g=l("../utils"),b=l("./ConvertWorker"),_=l("./GenericWorker"),S=l("../base64"),C=l("../support"),I=l("../external"),O=null;if(C.nodestream)try{O=l("../nodejs/NodejsStreamOutputAdapter")}catch{}function R(N,L){return new I.Promise(function(V,G){var $=[],Y=N._internalType,ie=N._outputType,re=N._mimeType;N.on("data",function(ce,Pe){$.push(ce),L&&L(Pe)}).on("error",function(ce){$=[],G(ce)}).on("end",function(){try{var ce=function(Pe,ye,we){switch(Pe){case"blob":return g.newBlob(g.transformTo("arraybuffer",ye),we);case"base64":return S.encode(ye);default:return g.transformTo(Pe,ye)}}(ie,function(Pe,ye){var we,Le=0,it=null,de=0;for(we=0;we<ye.length;we++)de+=ye[we].length;switch(Pe){case"string":return ye.join("");case"array":return Array.prototype.concat.apply([],ye);case"uint8array":for(it=new Uint8Array(de),we=0;we<ye.length;we++)it.set(ye[we],Le),Le+=ye[we].length;return it;case"nodebuffer":return Buffer.concat(ye);default:throw new Error("concat : unsupported type '"+Pe+"'")}}(Y,$),re);V(ce)}catch(Pe){G(Pe)}$=[]}).resume()})}function A(N,L,V){var G=L;switch(L){case"blob":case"arraybuffer":G="uint8array";break;case"base64":G="string"}try{this._internalType=G,this._outputType=L,this._mimeType=V,g.checkSupport(G),this._worker=N.pipe(new b(G)),N.lock()}catch($){this._worker=new _("error"),this._worker.error($)}}A.prototype={accumulate:function(N){return R(this,N)},on:function(N,L){var V=this;return N==="data"?this._worker.on(N,function(G){L.call(V,G.data,G.meta)}):this._worker.on(N,function(){g.delay(L,arguments,V)}),this},resume:function(){return g.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(N){if(g.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new O(this,{objectMode:this._outputType!=="nodebuffer"},N)}},d.exports=A},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(l,d,f){if(f.base64=!0,f.array=!0,f.string=!0,f.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",f.nodebuffer=typeof Buffer<"u",f.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")f.blob=!1;else{var g=new ArrayBuffer(0);try{f.blob=new Blob([g],{type:"application/zip"}).size===0}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);b.append(g),f.blob=b.getBlob("application/zip").size===0}catch{f.blob=!1}}}try{f.nodestream=!!l("readable-stream").Readable}catch{f.nodestream=!1}},{"readable-stream":16}],31:[function(l,d,f){for(var g=l("./utils"),b=l("./support"),_=l("./nodejsUtils"),S=l("./stream/GenericWorker"),C=new Array(256),I=0;I<256;I++)C[I]=252<=I?6:248<=I?5:240<=I?4:224<=I?3:192<=I?2:1;C[254]=C[254]=1;function O(){S.call(this,"utf-8 decode"),this.leftOver=null}function R(){S.call(this,"utf-8 encode")}f.utf8encode=function(A){return b.nodebuffer?_.newBufferFrom(A,"utf-8"):function(N){var L,V,G,$,Y,ie=N.length,re=0;for($=0;$<ie;$++)(64512&(V=N.charCodeAt($)))==55296&&$+1<ie&&(64512&(G=N.charCodeAt($+1)))==56320&&(V=65536+(V-55296<<10)+(G-56320),$++),re+=V<128?1:V<2048?2:V<65536?3:4;for(L=b.uint8array?new Uint8Array(re):new Array(re),$=Y=0;Y<re;$++)(64512&(V=N.charCodeAt($)))==55296&&$+1<ie&&(64512&(G=N.charCodeAt($+1)))==56320&&(V=65536+(V-55296<<10)+(G-56320),$++),V<128?L[Y++]=V:(V<2048?L[Y++]=192|V>>>6:(V<65536?L[Y++]=224|V>>>12:(L[Y++]=240|V>>>18,L[Y++]=128|V>>>12&63),L[Y++]=128|V>>>6&63),L[Y++]=128|63&V);return L}(A)},f.utf8decode=function(A){return b.nodebuffer?g.transformTo("nodebuffer",A).toString("utf-8"):function(N){var L,V,G,$,Y=N.length,ie=new Array(2*Y);for(L=V=0;L<Y;)if((G=N[L++])<128)ie[V++]=G;else if(4<($=C[G]))ie[V++]=65533,L+=$-1;else{for(G&=$===2?31:$===3?15:7;1<$&&L<Y;)G=G<<6|63&N[L++],$--;1<$?ie[V++]=65533:G<65536?ie[V++]=G:(G-=65536,ie[V++]=55296|G>>10&1023,ie[V++]=56320|1023&G)}return ie.length!==V&&(ie.subarray?ie=ie.subarray(0,V):ie.length=V),g.applyFromCharCode(ie)}(A=g.transformTo(b.uint8array?"uint8array":"array",A))},g.inherits(O,S),O.prototype.processChunk=function(A){var N=g.transformTo(b.uint8array?"uint8array":"array",A.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var L=N;(N=new Uint8Array(L.length+this.leftOver.length)).set(this.leftOver,0),N.set(L,this.leftOver.length)}else N=this.leftOver.concat(N);this.leftOver=null}var V=function($,Y){var ie;for((Y=Y||$.length)>$.length&&(Y=$.length),ie=Y-1;0<=ie&&(192&$[ie])==128;)ie--;return ie<0||ie===0?Y:ie+C[$[ie]]>Y?ie:Y}(N),G=N;V!==N.length&&(b.uint8array?(G=N.subarray(0,V),this.leftOver=N.subarray(V,N.length)):(G=N.slice(0,V),this.leftOver=N.slice(V,N.length))),this.push({data:f.utf8decode(G),meta:A.meta})},O.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:f.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},f.Utf8DecodeWorker=O,g.inherits(R,S),R.prototype.processChunk=function(A){this.push({data:f.utf8encode(A.data),meta:A.meta})},f.Utf8EncodeWorker=R},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(l,d,f){var g=l("./support"),b=l("./base64"),_=l("./nodejsUtils"),S=l("./external");function C(L){return L}function I(L,V){for(var G=0;G<L.length;++G)V[G]=255&L.charCodeAt(G);return V}l("setimmediate"),f.newBlob=function(L,V){f.checkSupport("blob");try{return new Blob([L],{type:V})}catch{try{var G=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return G.append(L),G.getBlob(V)}catch{throw new Error("Bug : can't construct the Blob.")}}};var O={stringifyByChunk:function(L,V,G){var $=[],Y=0,ie=L.length;if(ie<=G)return String.fromCharCode.apply(null,L);for(;Y<ie;)V==="array"||V==="nodebuffer"?$.push(String.fromCharCode.apply(null,L.slice(Y,Math.min(Y+G,ie)))):$.push(String.fromCharCode.apply(null,L.subarray(Y,Math.min(Y+G,ie)))),Y+=G;return $.join("")},stringifyByChar:function(L){for(var V="",G=0;G<L.length;G++)V+=String.fromCharCode(L[G]);return V},applyCanBeUsed:{uint8array:function(){try{return g.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return g.nodebuffer&&String.fromCharCode.apply(null,_.allocBuffer(1)).length===1}catch{return!1}}()}};function R(L){var V=65536,G=f.getTypeOf(L),$=!0;if(G==="uint8array"?$=O.applyCanBeUsed.uint8array:G==="nodebuffer"&&($=O.applyCanBeUsed.nodebuffer),$)for(;1<V;)try{return O.stringifyByChunk(L,G,V)}catch{V=Math.floor(V/2)}return O.stringifyByChar(L)}function A(L,V){for(var G=0;G<L.length;G++)V[G]=L[G];return V}f.applyFromCharCode=R;var N={};N.string={string:C,array:function(L){return I(L,new Array(L.length))},arraybuffer:function(L){return N.string.uint8array(L).buffer},uint8array:function(L){return I(L,new Uint8Array(L.length))},nodebuffer:function(L){return I(L,_.allocBuffer(L.length))}},N.array={string:R,array:C,arraybuffer:function(L){return new Uint8Array(L).buffer},uint8array:function(L){return new Uint8Array(L)},nodebuffer:function(L){return _.newBufferFrom(L)}},N.arraybuffer={string:function(L){return R(new Uint8Array(L))},array:function(L){return A(new Uint8Array(L),new Array(L.byteLength))},arraybuffer:C,uint8array:function(L){return new Uint8Array(L)},nodebuffer:function(L){return _.newBufferFrom(new Uint8Array(L))}},N.uint8array={string:R,array:function(L){return A(L,new Array(L.length))},arraybuffer:function(L){return L.buffer},uint8array:C,nodebuffer:function(L){return _.newBufferFrom(L)}},N.nodebuffer={string:R,array:function(L){return A(L,new Array(L.length))},arraybuffer:function(L){return N.nodebuffer.uint8array(L).buffer},uint8array:function(L){return A(L,new Uint8Array(L.length))},nodebuffer:C},f.transformTo=function(L,V){if(V=V||"",!L)return V;f.checkSupport(L);var G=f.getTypeOf(V);return N[G][L](V)},f.resolve=function(L){for(var V=L.split("/"),G=[],$=0;$<V.length;$++){var Y=V[$];Y==="."||Y===""&&$!==0&&$!==V.length-1||(Y===".."?G.pop():G.push(Y))}return G.join("/")},f.getTypeOf=function(L){return typeof L=="string"?"string":Object.prototype.toString.call(L)==="[object Array]"?"array":g.nodebuffer&&_.isBuffer(L)?"nodebuffer":g.uint8array&&L instanceof Uint8Array?"uint8array":g.arraybuffer&&L instanceof ArrayBuffer?"arraybuffer":void 0},f.checkSupport=function(L){if(!g[L.toLowerCase()])throw new Error(L+" is not supported by this platform")},f.MAX_VALUE_16BITS=65535,f.MAX_VALUE_32BITS=-1,f.pretty=function(L){var V,G,$="";for(G=0;G<(L||"").length;G++)$+="\\x"+((V=L.charCodeAt(G))<16?"0":"")+V.toString(16).toUpperCase();return $},f.delay=function(L,V,G){setImmediate(function(){L.apply(G||null,V||[])})},f.inherits=function(L,V){function G(){}G.prototype=V.prototype,L.prototype=new G},f.extend=function(){var L,V,G={};for(L=0;L<arguments.length;L++)for(V in arguments[L])Object.prototype.hasOwnProperty.call(arguments[L],V)&&G[V]===void 0&&(G[V]=arguments[L][V]);return G},f.prepareContent=function(L,V,G,$,Y){return S.Promise.resolve(V).then(function(ie){return g.blob&&(ie instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(ie))!==-1)&&typeof FileReader<"u"?new S.Promise(function(re,ce){var Pe=new FileReader;Pe.onload=function(ye){re(ye.target.result)},Pe.onerror=function(ye){ce(ye.target.error)},Pe.readAsArrayBuffer(ie)}):ie}).then(function(ie){var re=f.getTypeOf(ie);return re?(re==="arraybuffer"?ie=f.transformTo("uint8array",ie):re==="string"&&(Y?ie=b.decode(ie):G&&$!==!0&&(ie=function(ce){return I(ce,g.uint8array?new Uint8Array(ce.length):new Array(ce.length))}(ie))),ie):S.Promise.reject(new Error("Can't read the data of '"+L+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(l,d,f){var g=l("./reader/readerFor"),b=l("./utils"),_=l("./signature"),S=l("./zipEntry"),C=l("./support");function I(O){this.files=[],this.loadOptions=O}I.prototype={checkSignature:function(O){if(!this.reader.readAndCheckSignature(O)){this.reader.index-=4;var R=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+b.pretty(R)+", expected "+b.pretty(O)+")")}},isSignature:function(O,R){var A=this.reader.index;this.reader.setIndex(O);var N=this.reader.readString(4)===R;return this.reader.setIndex(A),N},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var O=this.reader.readData(this.zipCommentLength),R=C.uint8array?"uint8array":"array",A=b.transformTo(R,O);this.zipComment=this.loadOptions.decodeFileName(A)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var O,R,A,N=this.zip64EndOfCentralSize-44;0<N;)O=this.reader.readInt(2),R=this.reader.readInt(4),A=this.reader.readData(R),this.zip64ExtensibleData[O]={id:O,length:R,value:A}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var O,R;for(O=0;O<this.files.length;O++)R=this.files[O],this.reader.setIndex(R.localHeaderOffset),this.checkSignature(_.LOCAL_FILE_HEADER),R.readLocalPart(this.reader),R.handleUTF8(),R.processAttributes()},readCentralDir:function(){var O;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(_.CENTRAL_FILE_HEADER);)(O=new S({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(O);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var O=this.reader.lastIndexOfSignature(_.CENTRAL_DIRECTORY_END);if(O<0)throw this.isSignature(0,_.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(O);var R=O;if(this.checkSignature(_.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===b.MAX_VALUE_16BITS||this.diskWithCentralDirStart===b.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===b.MAX_VALUE_16BITS||this.centralDirRecords===b.MAX_VALUE_16BITS||this.centralDirSize===b.MAX_VALUE_32BITS||this.centralDirOffset===b.MAX_VALUE_32BITS){if(this.zip64=!0,(O=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(O),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,_.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var A=this.centralDirOffset+this.centralDirSize;this.zip64&&(A+=20,A+=12+this.zip64EndOfCentralSize);var N=R-A;if(0<N)this.isSignature(R,_.CENTRAL_FILE_HEADER)||(this.reader.zero=N);else if(N<0)throw new Error("Corrupted zip: missing "+Math.abs(N)+" bytes.")},prepareReader:function(O){this.reader=g(O)},load:function(O){this.prepareReader(O),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},d.exports=I},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(l,d,f){var g=l("./reader/readerFor"),b=l("./utils"),_=l("./compressedObject"),S=l("./crc32"),C=l("./utf8"),I=l("./compressions"),O=l("./support");function R(A,N){this.options=A,this.loadOptions=N}R.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(A){var N,L;if(A.skip(22),this.fileNameLength=A.readInt(2),L=A.readInt(2),this.fileName=A.readData(this.fileNameLength),A.skip(L),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((N=function(V){for(var G in I)if(Object.prototype.hasOwnProperty.call(I,G)&&I[G].magic===V)return I[G];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+b.pretty(this.compressionMethod)+" unknown (inner file : "+b.transformTo("string",this.fileName)+")");this.decompressed=new _(this.compressedSize,this.uncompressedSize,this.crc32,N,A.readData(this.compressedSize))},readCentralPart:function(A){this.versionMadeBy=A.readInt(2),A.skip(2),this.bitFlag=A.readInt(2),this.compressionMethod=A.readString(2),this.date=A.readDate(),this.crc32=A.readInt(4),this.compressedSize=A.readInt(4),this.uncompressedSize=A.readInt(4);var N=A.readInt(2);if(this.extraFieldsLength=A.readInt(2),this.fileCommentLength=A.readInt(2),this.diskNumberStart=A.readInt(2),this.internalFileAttributes=A.readInt(2),this.externalFileAttributes=A.readInt(4),this.localHeaderOffset=A.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");A.skip(N),this.readExtraFields(A),this.parseZIP64ExtraField(A),this.fileComment=A.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var A=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),A==0&&(this.dosPermissions=63&this.externalFileAttributes),A==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var A=g(this.extraFields[1].value);this.uncompressedSize===b.MAX_VALUE_32BITS&&(this.uncompressedSize=A.readInt(8)),this.compressedSize===b.MAX_VALUE_32BITS&&(this.compressedSize=A.readInt(8)),this.localHeaderOffset===b.MAX_VALUE_32BITS&&(this.localHeaderOffset=A.readInt(8)),this.diskNumberStart===b.MAX_VALUE_32BITS&&(this.diskNumberStart=A.readInt(4))}},readExtraFields:function(A){var N,L,V,G=A.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});A.index+4<G;)N=A.readInt(2),L=A.readInt(2),V=A.readData(L),this.extraFields[N]={id:N,length:L,value:V};A.setIndex(G)},handleUTF8:function(){var A=O.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=C.utf8decode(this.fileName),this.fileCommentStr=C.utf8decode(this.fileComment);else{var N=this.findExtraFieldUnicodePath();if(N!==null)this.fileNameStr=N;else{var L=b.transformTo(A,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(L)}var V=this.findExtraFieldUnicodeComment();if(V!==null)this.fileCommentStr=V;else{var G=b.transformTo(A,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(G)}}},findExtraFieldUnicodePath:function(){var A=this.extraFields[28789];if(A){var N=g(A.value);return N.readInt(1)!==1||S(this.fileName)!==N.readInt(4)?null:C.utf8decode(N.readData(A.length-5))}return null},findExtraFieldUnicodeComment:function(){var A=this.extraFields[25461];if(A){var N=g(A.value);return N.readInt(1)!==1||S(this.fileComment)!==N.readInt(4)?null:C.utf8decode(N.readData(A.length-5))}return null}},d.exports=R},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(l,d,f){function g(N,L,V){this.name=N,this.dir=V.dir,this.date=V.date,this.comment=V.comment,this.unixPermissions=V.unixPermissions,this.dosPermissions=V.dosPermissions,this._data=L,this._dataBinary=V.binary,this.options={compression:V.compression,compressionOptions:V.compressionOptions}}var b=l("./stream/StreamHelper"),_=l("./stream/DataWorker"),S=l("./utf8"),C=l("./compressedObject"),I=l("./stream/GenericWorker");g.prototype={internalStream:function(N){var L=null,V="string";try{if(!N)throw new Error("No output type specified.");var G=(V=N.toLowerCase())==="string"||V==="text";V!=="binarystring"&&V!=="text"||(V="string"),L=this._decompressWorker();var $=!this._dataBinary;$&&!G&&(L=L.pipe(new S.Utf8EncodeWorker)),!$&&G&&(L=L.pipe(new S.Utf8DecodeWorker))}catch(Y){(L=new I("error")).error(Y)}return new b(L,V,"")},async:function(N,L){return this.internalStream(N).accumulate(L)},nodeStream:function(N,L){return this.internalStream(N||"nodebuffer").toNodejsStream(L)},_compressWorker:function(N,L){if(this._data instanceof C&&this._data.compression.magic===N.magic)return this._data.getCompressedWorker();var V=this._decompressWorker();return this._dataBinary||(V=V.pipe(new S.Utf8EncodeWorker)),C.createWorkerFrom(V,N,L)},_decompressWorker:function(){return this._data instanceof C?this._data.getContentWorker():this._data instanceof I?this._data:new _(this._data)}};for(var O=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],R=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},A=0;A<O.length;A++)g.prototype[O[A]]=R;d.exports=g},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(l,d,f){(function(g){var b,_,S=g.MutationObserver||g.WebKitMutationObserver;if(S){var C=0,I=new S(N),O=g.document.createTextNode("");I.observe(O,{characterData:!0}),b=function(){O.data=C=++C%2}}else if(g.setImmediate||g.MessageChannel===void 0)b="document"in g&&"onreadystatechange"in g.document.createElement("script")?function(){var L=g.document.createElement("script");L.onreadystatechange=function(){N(),L.onreadystatechange=null,L.parentNode.removeChild(L),L=null},g.document.documentElement.appendChild(L)}:function(){setTimeout(N,0)};else{var R=new g.MessageChannel;R.port1.onmessage=N,b=function(){R.port2.postMessage(0)}}var A=[];function N(){var L,V;_=!0;for(var G=A.length;G;){for(V=A,A=[],L=-1;++L<G;)V[L]();G=A.length}_=!1}d.exports=function(L){A.push(L)!==1||_||b()}}).call(this,typeof Wi<"u"?Wi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(l,d,f){var g=l("immediate");function b(){}var _={},S=["REJECTED"],C=["FULFILLED"],I=["PENDING"];function O(G){if(typeof G!="function")throw new TypeError("resolver must be a function");this.state=I,this.queue=[],this.outcome=void 0,G!==b&&L(this,G)}function R(G,$,Y){this.promise=G,typeof $=="function"&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),typeof Y=="function"&&(this.onRejected=Y,this.callRejected=this.otherCallRejected)}function A(G,$,Y){g(function(){var ie;try{ie=$(Y)}catch(re){return _.reject(G,re)}ie===G?_.reject(G,new TypeError("Cannot resolve promise with itself")):_.resolve(G,ie)})}function N(G){var $=G&&G.then;if(G&&(typeof G=="object"||typeof G=="function")&&typeof $=="function")return function(){$.apply(G,arguments)}}function L(G,$){var Y=!1;function ie(Pe){Y||(Y=!0,_.reject(G,Pe))}function re(Pe){Y||(Y=!0,_.resolve(G,Pe))}var ce=V(function(){$(re,ie)});ce.status==="error"&&ie(ce.value)}function V(G,$){var Y={};try{Y.value=G($),Y.status="success"}catch(ie){Y.status="error",Y.value=ie}return Y}(d.exports=O).prototype.finally=function(G){if(typeof G!="function")return this;var $=this.constructor;return this.then(function(Y){return $.resolve(G()).then(function(){return Y})},function(Y){return $.resolve(G()).then(function(){throw Y})})},O.prototype.catch=function(G){return this.then(null,G)},O.prototype.then=function(G,$){if(typeof G!="function"&&this.state===C||typeof $!="function"&&this.state===S)return this;var Y=new this.constructor(b);return this.state!==I?A(Y,this.state===C?G:$,this.outcome):this.queue.push(new R(Y,G,$)),Y},R.prototype.callFulfilled=function(G){_.resolve(this.promise,G)},R.prototype.otherCallFulfilled=function(G){A(this.promise,this.onFulfilled,G)},R.prototype.callRejected=function(G){_.reject(this.promise,G)},R.prototype.otherCallRejected=function(G){A(this.promise,this.onRejected,G)},_.resolve=function(G,$){var Y=V(N,$);if(Y.status==="error")return _.reject(G,Y.value);var ie=Y.value;if(ie)L(G,ie);else{G.state=C,G.outcome=$;for(var re=-1,ce=G.queue.length;++re<ce;)G.queue[re].callFulfilled($)}return G},_.reject=function(G,$){G.state=S,G.outcome=$;for(var Y=-1,ie=G.queue.length;++Y<ie;)G.queue[Y].callRejected($);return G},O.resolve=function(G){return G instanceof this?G:_.resolve(new this(b),G)},O.reject=function(G){var $=new this(b);return _.reject($,G)},O.all=function(G){var $=this;if(Object.prototype.toString.call(G)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Y=G.length,ie=!1;if(!Y)return this.resolve([]);for(var re=new Array(Y),ce=0,Pe=-1,ye=new this(b);++Pe<Y;)we(G[Pe],Pe);return ye;function we(Le,it){$.resolve(Le).then(function(de){re[it]=de,++ce!==Y||ie||(ie=!0,_.resolve(ye,re))},function(de){ie||(ie=!0,_.reject(ye,de))})}},O.race=function(G){var $=this;if(Object.prototype.toString.call(G)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Y=G.length,ie=!1;if(!Y)return this.resolve([]);for(var re=-1,ce=new this(b);++re<Y;)Pe=G[re],$.resolve(Pe).then(function(ye){ie||(ie=!0,_.resolve(ce,ye))},function(ye){ie||(ie=!0,_.reject(ce,ye))});var Pe;return ce}},{immediate:36}],38:[function(l,d,f){var g={};(0,l("./lib/utils/common").assign)(g,l("./lib/deflate"),l("./lib/inflate"),l("./lib/zlib/constants")),d.exports=g},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(l,d,f){var g=l("./zlib/deflate"),b=l("./utils/common"),_=l("./utils/strings"),S=l("./zlib/messages"),C=l("./zlib/zstream"),I=Object.prototype.toString,O=0,R=-1,A=0,N=8;function L(G){if(!(this instanceof L))return new L(G);this.options=b.assign({level:R,method:N,chunkSize:16384,windowBits:15,memLevel:8,strategy:A,to:""},G||{});var $=this.options;$.raw&&0<$.windowBits?$.windowBits=-$.windowBits:$.gzip&&0<$.windowBits&&$.windowBits<16&&($.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new C,this.strm.avail_out=0;var Y=g.deflateInit2(this.strm,$.level,$.method,$.windowBits,$.memLevel,$.strategy);if(Y!==O)throw new Error(S[Y]);if($.header&&g.deflateSetHeader(this.strm,$.header),$.dictionary){var ie;if(ie=typeof $.dictionary=="string"?_.string2buf($.dictionary):I.call($.dictionary)==="[object ArrayBuffer]"?new Uint8Array($.dictionary):$.dictionary,(Y=g.deflateSetDictionary(this.strm,ie))!==O)throw new Error(S[Y]);this._dict_set=!0}}function V(G,$){var Y=new L($);if(Y.push(G,!0),Y.err)throw Y.msg||S[Y.err];return Y.result}L.prototype.push=function(G,$){var Y,ie,re=this.strm,ce=this.options.chunkSize;if(this.ended)return!1;ie=$===~~$?$:$===!0?4:0,typeof G=="string"?re.input=_.string2buf(G):I.call(G)==="[object ArrayBuffer]"?re.input=new Uint8Array(G):re.input=G,re.next_in=0,re.avail_in=re.input.length;do{if(re.avail_out===0&&(re.output=new b.Buf8(ce),re.next_out=0,re.avail_out=ce),(Y=g.deflate(re,ie))!==1&&Y!==O)return this.onEnd(Y),!(this.ended=!0);re.avail_out!==0&&(re.avail_in!==0||ie!==4&&ie!==2)||(this.options.to==="string"?this.onData(_.buf2binstring(b.shrinkBuf(re.output,re.next_out))):this.onData(b.shrinkBuf(re.output,re.next_out)))}while((0<re.avail_in||re.avail_out===0)&&Y!==1);return ie===4?(Y=g.deflateEnd(this.strm),this.onEnd(Y),this.ended=!0,Y===O):ie!==2||(this.onEnd(O),!(re.avail_out=0))},L.prototype.onData=function(G){this.chunks.push(G)},L.prototype.onEnd=function(G){G===O&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=G,this.msg=this.strm.msg},f.Deflate=L,f.deflate=V,f.deflateRaw=function(G,$){return($=$||{}).raw=!0,V(G,$)},f.gzip=function(G,$){return($=$||{}).gzip=!0,V(G,$)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(l,d,f){var g=l("./zlib/inflate"),b=l("./utils/common"),_=l("./utils/strings"),S=l("./zlib/constants"),C=l("./zlib/messages"),I=l("./zlib/zstream"),O=l("./zlib/gzheader"),R=Object.prototype.toString;function A(L){if(!(this instanceof A))return new A(L);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},L||{});var V=this.options;V.raw&&0<=V.windowBits&&V.windowBits<16&&(V.windowBits=-V.windowBits,V.windowBits===0&&(V.windowBits=-15)),!(0<=V.windowBits&&V.windowBits<16)||L&&L.windowBits||(V.windowBits+=32),15<V.windowBits&&V.windowBits<48&&!(15&V.windowBits)&&(V.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new I,this.strm.avail_out=0;var G=g.inflateInit2(this.strm,V.windowBits);if(G!==S.Z_OK)throw new Error(C[G]);this.header=new O,g.inflateGetHeader(this.strm,this.header)}function N(L,V){var G=new A(V);if(G.push(L,!0),G.err)throw G.msg||C[G.err];return G.result}A.prototype.push=function(L,V){var G,$,Y,ie,re,ce,Pe=this.strm,ye=this.options.chunkSize,we=this.options.dictionary,Le=!1;if(this.ended)return!1;$=V===~~V?V:V===!0?S.Z_FINISH:S.Z_NO_FLUSH,typeof L=="string"?Pe.input=_.binstring2buf(L):R.call(L)==="[object ArrayBuffer]"?Pe.input=new Uint8Array(L):Pe.input=L,Pe.next_in=0,Pe.avail_in=Pe.input.length;do{if(Pe.avail_out===0&&(Pe.output=new b.Buf8(ye),Pe.next_out=0,Pe.avail_out=ye),(G=g.inflate(Pe,S.Z_NO_FLUSH))===S.Z_NEED_DICT&&we&&(ce=typeof we=="string"?_.string2buf(we):R.call(we)==="[object ArrayBuffer]"?new Uint8Array(we):we,G=g.inflateSetDictionary(this.strm,ce)),G===S.Z_BUF_ERROR&&Le===!0&&(G=S.Z_OK,Le=!1),G!==S.Z_STREAM_END&&G!==S.Z_OK)return this.onEnd(G),!(this.ended=!0);Pe.next_out&&(Pe.avail_out!==0&&G!==S.Z_STREAM_END&&(Pe.avail_in!==0||$!==S.Z_FINISH&&$!==S.Z_SYNC_FLUSH)||(this.options.to==="string"?(Y=_.utf8border(Pe.output,Pe.next_out),ie=Pe.next_out-Y,re=_.buf2string(Pe.output,Y),Pe.next_out=ie,Pe.avail_out=ye-ie,ie&&b.arraySet(Pe.output,Pe.output,Y,ie,0),this.onData(re)):this.onData(b.shrinkBuf(Pe.output,Pe.next_out)))),Pe.avail_in===0&&Pe.avail_out===0&&(Le=!0)}while((0<Pe.avail_in||Pe.avail_out===0)&&G!==S.Z_STREAM_END);return G===S.Z_STREAM_END&&($=S.Z_FINISH),$===S.Z_FINISH?(G=g.inflateEnd(this.strm),this.onEnd(G),this.ended=!0,G===S.Z_OK):$!==S.Z_SYNC_FLUSH||(this.onEnd(S.Z_OK),!(Pe.avail_out=0))},A.prototype.onData=function(L){this.chunks.push(L)},A.prototype.onEnd=function(L){L===S.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=L,this.msg=this.strm.msg},f.Inflate=A,f.inflate=N,f.inflateRaw=function(L,V){return(V=V||{}).raw=!0,N(L,V)},f.ungzip=N},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(l,d,f){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";f.assign=function(S){for(var C=Array.prototype.slice.call(arguments,1);C.length;){var I=C.shift();if(I){if(typeof I!="object")throw new TypeError(I+"must be non-object");for(var O in I)I.hasOwnProperty(O)&&(S[O]=I[O])}}return S},f.shrinkBuf=function(S,C){return S.length===C?S:S.subarray?S.subarray(0,C):(S.length=C,S)};var b={arraySet:function(S,C,I,O,R){if(C.subarray&&S.subarray)S.set(C.subarray(I,I+O),R);else for(var A=0;A<O;A++)S[R+A]=C[I+A]},flattenChunks:function(S){var C,I,O,R,A,N;for(C=O=0,I=S.length;C<I;C++)O+=S[C].length;for(N=new Uint8Array(O),C=R=0,I=S.length;C<I;C++)A=S[C],N.set(A,R),R+=A.length;return N}},_={arraySet:function(S,C,I,O,R){for(var A=0;A<O;A++)S[R+A]=C[I+A]},flattenChunks:function(S){return[].concat.apply([],S)}};f.setTyped=function(S){S?(f.Buf8=Uint8Array,f.Buf16=Uint16Array,f.Buf32=Int32Array,f.assign(f,b)):(f.Buf8=Array,f.Buf16=Array,f.Buf32=Array,f.assign(f,_))},f.setTyped(g)},{}],42:[function(l,d,f){var g=l("./common"),b=!0,_=!0;try{String.fromCharCode.apply(null,[0])}catch{b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_=!1}for(var S=new g.Buf8(256),C=0;C<256;C++)S[C]=252<=C?6:248<=C?5:240<=C?4:224<=C?3:192<=C?2:1;function I(O,R){if(R<65537&&(O.subarray&&_||!O.subarray&&b))return String.fromCharCode.apply(null,g.shrinkBuf(O,R));for(var A="",N=0;N<R;N++)A+=String.fromCharCode(O[N]);return A}S[254]=S[254]=1,f.string2buf=function(O){var R,A,N,L,V,G=O.length,$=0;for(L=0;L<G;L++)(64512&(A=O.charCodeAt(L)))==55296&&L+1<G&&(64512&(N=O.charCodeAt(L+1)))==56320&&(A=65536+(A-55296<<10)+(N-56320),L++),$+=A<128?1:A<2048?2:A<65536?3:4;for(R=new g.Buf8($),L=V=0;V<$;L++)(64512&(A=O.charCodeAt(L)))==55296&&L+1<G&&(64512&(N=O.charCodeAt(L+1)))==56320&&(A=65536+(A-55296<<10)+(N-56320),L++),A<128?R[V++]=A:(A<2048?R[V++]=192|A>>>6:(A<65536?R[V++]=224|A>>>12:(R[V++]=240|A>>>18,R[V++]=128|A>>>12&63),R[V++]=128|A>>>6&63),R[V++]=128|63&A);return R},f.buf2binstring=function(O){return I(O,O.length)},f.binstring2buf=function(O){for(var R=new g.Buf8(O.length),A=0,N=R.length;A<N;A++)R[A]=O.charCodeAt(A);return R},f.buf2string=function(O,R){var A,N,L,V,G=R||O.length,$=new Array(2*G);for(A=N=0;A<G;)if((L=O[A++])<128)$[N++]=L;else if(4<(V=S[L]))$[N++]=65533,A+=V-1;else{for(L&=V===2?31:V===3?15:7;1<V&&A<G;)L=L<<6|63&O[A++],V--;1<V?$[N++]=65533:L<65536?$[N++]=L:(L-=65536,$[N++]=55296|L>>10&1023,$[N++]=56320|1023&L)}return I($,N)},f.utf8border=function(O,R){var A;for((R=R||O.length)>O.length&&(R=O.length),A=R-1;0<=A&&(192&O[A])==128;)A--;return A<0||A===0?R:A+S[O[A]]>R?A:R}},{"./common":41}],43:[function(l,d,f){d.exports=function(g,b,_,S){for(var C=65535&g|0,I=g>>>16&65535|0,O=0;_!==0;){for(_-=O=2e3<_?2e3:_;I=I+(C=C+b[S++]|0)|0,--O;);C%=65521,I%=65521}return C|I<<16|0}},{}],44:[function(l,d,f){d.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(l,d,f){var g=function(){for(var b,_=[],S=0;S<256;S++){b=S;for(var C=0;C<8;C++)b=1&b?3988292384^b>>>1:b>>>1;_[S]=b}return _}();d.exports=function(b,_,S,C){var I=g,O=C+S;b^=-1;for(var R=C;R<O;R++)b=b>>>8^I[255&(b^_[R])];return-1^b}},{}],46:[function(l,d,f){var g,b=l("../utils/common"),_=l("./trees"),S=l("./adler32"),C=l("./crc32"),I=l("./messages"),O=0,R=4,A=0,N=-2,L=-1,V=4,G=2,$=8,Y=9,ie=286,re=30,ce=19,Pe=2*ie+1,ye=15,we=3,Le=258,it=Le+we+1,de=42,Oe=113,Q=1,je=2,Rt=3,Ie=4;function Re(ee,ft){return ee.msg=I[ft],ft}function Ge(ee){return(ee<<1)-(4<ee?9:0)}function St(ee){for(var ft=ee.length;0<=--ft;)ee[ft]=0}function he(ee){var ft=ee.state,pt=ft.pending;pt>ee.avail_out&&(pt=ee.avail_out),pt!==0&&(b.arraySet(ee.output,ft.pending_buf,ft.pending_out,pt,ee.next_out),ee.next_out+=pt,ft.pending_out+=pt,ee.total_out+=pt,ee.avail_out-=pt,ft.pending-=pt,ft.pending===0&&(ft.pending_out=0))}function ge(ee,ft){_._tr_flush_block(ee,0<=ee.block_start?ee.block_start:-1,ee.strstart-ee.block_start,ft),ee.block_start=ee.strstart,he(ee.strm)}function et(ee,ft){ee.pending_buf[ee.pending++]=ft}function rt(ee,ft){ee.pending_buf[ee.pending++]=ft>>>8&255,ee.pending_buf[ee.pending++]=255&ft}function ut(ee,ft){var pt,Ce,xe=ee.max_chain_length,$e=ee.strstart,Ct=ee.prev_length,kt=ee.nice_match,tt=ee.strstart>ee.w_size-it?ee.strstart-(ee.w_size-it):0,Ft=ee.window,Tt=ee.w_mask,At=ee.prev,In=ee.strstart+Le,Or=Ft[$e+Ct-1],er=Ft[$e+Ct];ee.prev_length>=ee.good_match&&(xe>>=2),kt>ee.lookahead&&(kt=ee.lookahead);do if(Ft[(pt=ft)+Ct]===er&&Ft[pt+Ct-1]===Or&&Ft[pt]===Ft[$e]&&Ft[++pt]===Ft[$e+1]){$e+=2,pt++;do;while(Ft[++$e]===Ft[++pt]&&Ft[++$e]===Ft[++pt]&&Ft[++$e]===Ft[++pt]&&Ft[++$e]===Ft[++pt]&&Ft[++$e]===Ft[++pt]&&Ft[++$e]===Ft[++pt]&&Ft[++$e]===Ft[++pt]&&Ft[++$e]===Ft[++pt]&&$e<In);if(Ce=Le-(In-$e),$e=In-Le,Ct<Ce){if(ee.match_start=ft,kt<=(Ct=Ce))break;Or=Ft[$e+Ct-1],er=Ft[$e+Ct]}}while((ft=At[ft&Tt])>tt&&--xe!=0);return Ct<=ee.lookahead?Ct:ee.lookahead}function We(ee){var ft,pt,Ce,xe,$e,Ct,kt,tt,Ft,Tt,At=ee.w_size;do{if(xe=ee.window_size-ee.lookahead-ee.strstart,ee.strstart>=At+(At-it)){for(b.arraySet(ee.window,ee.window,At,At,0),ee.match_start-=At,ee.strstart-=At,ee.block_start-=At,ft=pt=ee.hash_size;Ce=ee.head[--ft],ee.head[ft]=At<=Ce?Ce-At:0,--pt;);for(ft=pt=At;Ce=ee.prev[--ft],ee.prev[ft]=At<=Ce?Ce-At:0,--pt;);xe+=At}if(ee.strm.avail_in===0)break;if(Ct=ee.strm,kt=ee.window,tt=ee.strstart+ee.lookahead,Ft=xe,Tt=void 0,Tt=Ct.avail_in,Ft<Tt&&(Tt=Ft),pt=Tt===0?0:(Ct.avail_in-=Tt,b.arraySet(kt,Ct.input,Ct.next_in,Tt,tt),Ct.state.wrap===1?Ct.adler=S(Ct.adler,kt,Tt,tt):Ct.state.wrap===2&&(Ct.adler=C(Ct.adler,kt,Tt,tt)),Ct.next_in+=Tt,Ct.total_in+=Tt,Tt),ee.lookahead+=pt,ee.lookahead+ee.insert>=we)for($e=ee.strstart-ee.insert,ee.ins_h=ee.window[$e],ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[$e+1])&ee.hash_mask;ee.insert&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[$e+we-1])&ee.hash_mask,ee.prev[$e&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=$e,$e++,ee.insert--,!(ee.lookahead+ee.insert<we)););}while(ee.lookahead<it&&ee.strm.avail_in!==0)}function tn(ee,ft){for(var pt,Ce;;){if(ee.lookahead<it){if(We(ee),ee.lookahead<it&&ft===O)return Q;if(ee.lookahead===0)break}if(pt=0,ee.lookahead>=we&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+we-1])&ee.hash_mask,pt=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),pt!==0&&ee.strstart-pt<=ee.w_size-it&&(ee.match_length=ut(ee,pt)),ee.match_length>=we)if(Ce=_._tr_tally(ee,ee.strstart-ee.match_start,ee.match_length-we),ee.lookahead-=ee.match_length,ee.match_length<=ee.max_lazy_match&&ee.lookahead>=we){for(ee.match_length--;ee.strstart++,ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+we-1])&ee.hash_mask,pt=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart,--ee.match_length!=0;);ee.strstart++}else ee.strstart+=ee.match_length,ee.match_length=0,ee.ins_h=ee.window[ee.strstart],ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+1])&ee.hash_mask;else Ce=_._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++;if(Ce&&(ge(ee,!1),ee.strm.avail_out===0))return Q}return ee.insert=ee.strstart<we-1?ee.strstart:we-1,ft===R?(ge(ee,!0),ee.strm.avail_out===0?Rt:Ie):ee.last_lit&&(ge(ee,!1),ee.strm.avail_out===0)?Q:je}function xt(ee,ft){for(var pt,Ce,xe;;){if(ee.lookahead<it){if(We(ee),ee.lookahead<it&&ft===O)return Q;if(ee.lookahead===0)break}if(pt=0,ee.lookahead>=we&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+we-1])&ee.hash_mask,pt=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),ee.prev_length=ee.match_length,ee.prev_match=ee.match_start,ee.match_length=we-1,pt!==0&&ee.prev_length<ee.max_lazy_match&&ee.strstart-pt<=ee.w_size-it&&(ee.match_length=ut(ee,pt),ee.match_length<=5&&(ee.strategy===1||ee.match_length===we&&4096<ee.strstart-ee.match_start)&&(ee.match_length=we-1)),ee.prev_length>=we&&ee.match_length<=ee.prev_length){for(xe=ee.strstart+ee.lookahead-we,Ce=_._tr_tally(ee,ee.strstart-1-ee.prev_match,ee.prev_length-we),ee.lookahead-=ee.prev_length-1,ee.prev_length-=2;++ee.strstart<=xe&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+we-1])&ee.hash_mask,pt=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),--ee.prev_length!=0;);if(ee.match_available=0,ee.match_length=we-1,ee.strstart++,Ce&&(ge(ee,!1),ee.strm.avail_out===0))return Q}else if(ee.match_available){if((Ce=_._tr_tally(ee,0,ee.window[ee.strstart-1]))&&ge(ee,!1),ee.strstart++,ee.lookahead--,ee.strm.avail_out===0)return Q}else ee.match_available=1,ee.strstart++,ee.lookahead--}return ee.match_available&&(Ce=_._tr_tally(ee,0,ee.window[ee.strstart-1]),ee.match_available=0),ee.insert=ee.strstart<we-1?ee.strstart:we-1,ft===R?(ge(ee,!0),ee.strm.avail_out===0?Rt:Ie):ee.last_lit&&(ge(ee,!1),ee.strm.avail_out===0)?Q:je}function qt(ee,ft,pt,Ce,xe){this.good_length=ee,this.max_lazy=ft,this.nice_length=pt,this.max_chain=Ce,this.func=xe}function yn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new b.Buf16(2*Pe),this.dyn_dtree=new b.Buf16(2*(2*re+1)),this.bl_tree=new b.Buf16(2*(2*ce+1)),St(this.dyn_ltree),St(this.dyn_dtree),St(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new b.Buf16(ye+1),this.heap=new b.Buf16(2*ie+1),St(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new b.Buf16(2*ie+1),St(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function zn(ee){var ft;return ee&&ee.state?(ee.total_in=ee.total_out=0,ee.data_type=G,(ft=ee.state).pending=0,ft.pending_out=0,ft.wrap<0&&(ft.wrap=-ft.wrap),ft.status=ft.wrap?de:Oe,ee.adler=ft.wrap===2?0:1,ft.last_flush=O,_._tr_init(ft),A):Re(ee,N)}function On(ee){var ft=zn(ee);return ft===A&&function(pt){pt.window_size=2*pt.w_size,St(pt.head),pt.max_lazy_match=g[pt.level].max_lazy,pt.good_match=g[pt.level].good_length,pt.nice_match=g[pt.level].nice_length,pt.max_chain_length=g[pt.level].max_chain,pt.strstart=0,pt.block_start=0,pt.lookahead=0,pt.insert=0,pt.match_length=pt.prev_length=we-1,pt.match_available=0,pt.ins_h=0}(ee.state),ft}function Gr(ee,ft,pt,Ce,xe,$e){if(!ee)return N;var Ct=1;if(ft===L&&(ft=6),Ce<0?(Ct=0,Ce=-Ce):15<Ce&&(Ct=2,Ce-=16),xe<1||Y<xe||pt!==$||Ce<8||15<Ce||ft<0||9<ft||$e<0||V<$e)return Re(ee,N);Ce===8&&(Ce=9);var kt=new yn;return(ee.state=kt).strm=ee,kt.wrap=Ct,kt.gzhead=null,kt.w_bits=Ce,kt.w_size=1<<kt.w_bits,kt.w_mask=kt.w_size-1,kt.hash_bits=xe+7,kt.hash_size=1<<kt.hash_bits,kt.hash_mask=kt.hash_size-1,kt.hash_shift=~~((kt.hash_bits+we-1)/we),kt.window=new b.Buf8(2*kt.w_size),kt.head=new b.Buf16(kt.hash_size),kt.prev=new b.Buf16(kt.w_size),kt.lit_bufsize=1<<xe+6,kt.pending_buf_size=4*kt.lit_bufsize,kt.pending_buf=new b.Buf8(kt.pending_buf_size),kt.d_buf=1*kt.lit_bufsize,kt.l_buf=3*kt.lit_bufsize,kt.level=ft,kt.strategy=$e,kt.method=pt,On(ee)}g=[new qt(0,0,0,0,function(ee,ft){var pt=65535;for(pt>ee.pending_buf_size-5&&(pt=ee.pending_buf_size-5);;){if(ee.lookahead<=1){if(We(ee),ee.lookahead===0&&ft===O)return Q;if(ee.lookahead===0)break}ee.strstart+=ee.lookahead,ee.lookahead=0;var Ce=ee.block_start+pt;if((ee.strstart===0||ee.strstart>=Ce)&&(ee.lookahead=ee.strstart-Ce,ee.strstart=Ce,ge(ee,!1),ee.strm.avail_out===0)||ee.strstart-ee.block_start>=ee.w_size-it&&(ge(ee,!1),ee.strm.avail_out===0))return Q}return ee.insert=0,ft===R?(ge(ee,!0),ee.strm.avail_out===0?Rt:Ie):(ee.strstart>ee.block_start&&(ge(ee,!1),ee.strm.avail_out),Q)}),new qt(4,4,8,4,tn),new qt(4,5,16,8,tn),new qt(4,6,32,32,tn),new qt(4,4,16,16,xt),new qt(8,16,32,32,xt),new qt(8,16,128,128,xt),new qt(8,32,128,256,xt),new qt(32,128,258,1024,xt),new qt(32,258,258,4096,xt)],f.deflateInit=function(ee,ft){return Gr(ee,ft,$,15,8,0)},f.deflateInit2=Gr,f.deflateReset=On,f.deflateResetKeep=zn,f.deflateSetHeader=function(ee,ft){return ee&&ee.state?ee.state.wrap!==2?N:(ee.state.gzhead=ft,A):N},f.deflate=function(ee,ft){var pt,Ce,xe,$e;if(!ee||!ee.state||5<ft||ft<0)return ee?Re(ee,N):N;if(Ce=ee.state,!ee.output||!ee.input&&ee.avail_in!==0||Ce.status===666&&ft!==R)return Re(ee,ee.avail_out===0?-5:N);if(Ce.strm=ee,pt=Ce.last_flush,Ce.last_flush=ft,Ce.status===de)if(Ce.wrap===2)ee.adler=0,et(Ce,31),et(Ce,139),et(Ce,8),Ce.gzhead?(et(Ce,(Ce.gzhead.text?1:0)+(Ce.gzhead.hcrc?2:0)+(Ce.gzhead.extra?4:0)+(Ce.gzhead.name?8:0)+(Ce.gzhead.comment?16:0)),et(Ce,255&Ce.gzhead.time),et(Ce,Ce.gzhead.time>>8&255),et(Ce,Ce.gzhead.time>>16&255),et(Ce,Ce.gzhead.time>>24&255),et(Ce,Ce.level===9?2:2<=Ce.strategy||Ce.level<2?4:0),et(Ce,255&Ce.gzhead.os),Ce.gzhead.extra&&Ce.gzhead.extra.length&&(et(Ce,255&Ce.gzhead.extra.length),et(Ce,Ce.gzhead.extra.length>>8&255)),Ce.gzhead.hcrc&&(ee.adler=C(ee.adler,Ce.pending_buf,Ce.pending,0)),Ce.gzindex=0,Ce.status=69):(et(Ce,0),et(Ce,0),et(Ce,0),et(Ce,0),et(Ce,0),et(Ce,Ce.level===9?2:2<=Ce.strategy||Ce.level<2?4:0),et(Ce,3),Ce.status=Oe);else{var Ct=$+(Ce.w_bits-8<<4)<<8;Ct|=(2<=Ce.strategy||Ce.level<2?0:Ce.level<6?1:Ce.level===6?2:3)<<6,Ce.strstart!==0&&(Ct|=32),Ct+=31-Ct%31,Ce.status=Oe,rt(Ce,Ct),Ce.strstart!==0&&(rt(Ce,ee.adler>>>16),rt(Ce,65535&ee.adler)),ee.adler=1}if(Ce.status===69)if(Ce.gzhead.extra){for(xe=Ce.pending;Ce.gzindex<(65535&Ce.gzhead.extra.length)&&(Ce.pending!==Ce.pending_buf_size||(Ce.gzhead.hcrc&&Ce.pending>xe&&(ee.adler=C(ee.adler,Ce.pending_buf,Ce.pending-xe,xe)),he(ee),xe=Ce.pending,Ce.pending!==Ce.pending_buf_size));)et(Ce,255&Ce.gzhead.extra[Ce.gzindex]),Ce.gzindex++;Ce.gzhead.hcrc&&Ce.pending>xe&&(ee.adler=C(ee.adler,Ce.pending_buf,Ce.pending-xe,xe)),Ce.gzindex===Ce.gzhead.extra.length&&(Ce.gzindex=0,Ce.status=73)}else Ce.status=73;if(Ce.status===73)if(Ce.gzhead.name){xe=Ce.pending;do{if(Ce.pending===Ce.pending_buf_size&&(Ce.gzhead.hcrc&&Ce.pending>xe&&(ee.adler=C(ee.adler,Ce.pending_buf,Ce.pending-xe,xe)),he(ee),xe=Ce.pending,Ce.pending===Ce.pending_buf_size)){$e=1;break}$e=Ce.gzindex<Ce.gzhead.name.length?255&Ce.gzhead.name.charCodeAt(Ce.gzindex++):0,et(Ce,$e)}while($e!==0);Ce.gzhead.hcrc&&Ce.pending>xe&&(ee.adler=C(ee.adler,Ce.pending_buf,Ce.pending-xe,xe)),$e===0&&(Ce.gzindex=0,Ce.status=91)}else Ce.status=91;if(Ce.status===91)if(Ce.gzhead.comment){xe=Ce.pending;do{if(Ce.pending===Ce.pending_buf_size&&(Ce.gzhead.hcrc&&Ce.pending>xe&&(ee.adler=C(ee.adler,Ce.pending_buf,Ce.pending-xe,xe)),he(ee),xe=Ce.pending,Ce.pending===Ce.pending_buf_size)){$e=1;break}$e=Ce.gzindex<Ce.gzhead.comment.length?255&Ce.gzhead.comment.charCodeAt(Ce.gzindex++):0,et(Ce,$e)}while($e!==0);Ce.gzhead.hcrc&&Ce.pending>xe&&(ee.adler=C(ee.adler,Ce.pending_buf,Ce.pending-xe,xe)),$e===0&&(Ce.status=103)}else Ce.status=103;if(Ce.status===103&&(Ce.gzhead.hcrc?(Ce.pending+2>Ce.pending_buf_size&&he(ee),Ce.pending+2<=Ce.pending_buf_size&&(et(Ce,255&ee.adler),et(Ce,ee.adler>>8&255),ee.adler=0,Ce.status=Oe)):Ce.status=Oe),Ce.pending!==0){if(he(ee),ee.avail_out===0)return Ce.last_flush=-1,A}else if(ee.avail_in===0&&Ge(ft)<=Ge(pt)&&ft!==R)return Re(ee,-5);if(Ce.status===666&&ee.avail_in!==0)return Re(ee,-5);if(ee.avail_in!==0||Ce.lookahead!==0||ft!==O&&Ce.status!==666){var kt=Ce.strategy===2?function(tt,Ft){for(var Tt;;){if(tt.lookahead===0&&(We(tt),tt.lookahead===0)){if(Ft===O)return Q;break}if(tt.match_length=0,Tt=_._tr_tally(tt,0,tt.window[tt.strstart]),tt.lookahead--,tt.strstart++,Tt&&(ge(tt,!1),tt.strm.avail_out===0))return Q}return tt.insert=0,Ft===R?(ge(tt,!0),tt.strm.avail_out===0?Rt:Ie):tt.last_lit&&(ge(tt,!1),tt.strm.avail_out===0)?Q:je}(Ce,ft):Ce.strategy===3?function(tt,Ft){for(var Tt,At,In,Or,er=tt.window;;){if(tt.lookahead<=Le){if(We(tt),tt.lookahead<=Le&&Ft===O)return Q;if(tt.lookahead===0)break}if(tt.match_length=0,tt.lookahead>=we&&0<tt.strstart&&(At=er[In=tt.strstart-1])===er[++In]&&At===er[++In]&&At===er[++In]){Or=tt.strstart+Le;do;while(At===er[++In]&&At===er[++In]&&At===er[++In]&&At===er[++In]&&At===er[++In]&&At===er[++In]&&At===er[++In]&&At===er[++In]&&In<Or);tt.match_length=Le-(Or-In),tt.match_length>tt.lookahead&&(tt.match_length=tt.lookahead)}if(tt.match_length>=we?(Tt=_._tr_tally(tt,1,tt.match_length-we),tt.lookahead-=tt.match_length,tt.strstart+=tt.match_length,tt.match_length=0):(Tt=_._tr_tally(tt,0,tt.window[tt.strstart]),tt.lookahead--,tt.strstart++),Tt&&(ge(tt,!1),tt.strm.avail_out===0))return Q}return tt.insert=0,Ft===R?(ge(tt,!0),tt.strm.avail_out===0?Rt:Ie):tt.last_lit&&(ge(tt,!1),tt.strm.avail_out===0)?Q:je}(Ce,ft):g[Ce.level].func(Ce,ft);if(kt!==Rt&&kt!==Ie||(Ce.status=666),kt===Q||kt===Rt)return ee.avail_out===0&&(Ce.last_flush=-1),A;if(kt===je&&(ft===1?_._tr_align(Ce):ft!==5&&(_._tr_stored_block(Ce,0,0,!1),ft===3&&(St(Ce.head),Ce.lookahead===0&&(Ce.strstart=0,Ce.block_start=0,Ce.insert=0))),he(ee),ee.avail_out===0))return Ce.last_flush=-1,A}return ft!==R?A:Ce.wrap<=0?1:(Ce.wrap===2?(et(Ce,255&ee.adler),et(Ce,ee.adler>>8&255),et(Ce,ee.adler>>16&255),et(Ce,ee.adler>>24&255),et(Ce,255&ee.total_in),et(Ce,ee.total_in>>8&255),et(Ce,ee.total_in>>16&255),et(Ce,ee.total_in>>24&255)):(rt(Ce,ee.adler>>>16),rt(Ce,65535&ee.adler)),he(ee),0<Ce.wrap&&(Ce.wrap=-Ce.wrap),Ce.pending!==0?A:1)},f.deflateEnd=function(ee){var ft;return ee&&ee.state?(ft=ee.state.status)!==de&&ft!==69&&ft!==73&&ft!==91&&ft!==103&&ft!==Oe&&ft!==666?Re(ee,N):(ee.state=null,ft===Oe?Re(ee,-3):A):N},f.deflateSetDictionary=function(ee,ft){var pt,Ce,xe,$e,Ct,kt,tt,Ft,Tt=ft.length;if(!ee||!ee.state||($e=(pt=ee.state).wrap)===2||$e===1&&pt.status!==de||pt.lookahead)return N;for($e===1&&(ee.adler=S(ee.adler,ft,Tt,0)),pt.wrap=0,Tt>=pt.w_size&&($e===0&&(St(pt.head),pt.strstart=0,pt.block_start=0,pt.insert=0),Ft=new b.Buf8(pt.w_size),b.arraySet(Ft,ft,Tt-pt.w_size,pt.w_size,0),ft=Ft,Tt=pt.w_size),Ct=ee.avail_in,kt=ee.next_in,tt=ee.input,ee.avail_in=Tt,ee.next_in=0,ee.input=ft,We(pt);pt.lookahead>=we;){for(Ce=pt.strstart,xe=pt.lookahead-(we-1);pt.ins_h=(pt.ins_h<<pt.hash_shift^pt.window[Ce+we-1])&pt.hash_mask,pt.prev[Ce&pt.w_mask]=pt.head[pt.ins_h],pt.head[pt.ins_h]=Ce,Ce++,--xe;);pt.strstart=Ce,pt.lookahead=we-1,We(pt)}return pt.strstart+=pt.lookahead,pt.block_start=pt.strstart,pt.insert=pt.lookahead,pt.lookahead=0,pt.match_length=pt.prev_length=we-1,pt.match_available=0,ee.next_in=kt,ee.input=tt,ee.avail_in=Ct,pt.wrap=$e,A},f.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(l,d,f){d.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(l,d,f){d.exports=function(g,b){var _,S,C,I,O,R,A,N,L,V,G,$,Y,ie,re,ce,Pe,ye,we,Le,it,de,Oe,Q,je;_=g.state,S=g.next_in,Q=g.input,C=S+(g.avail_in-5),I=g.next_out,je=g.output,O=I-(b-g.avail_out),R=I+(g.avail_out-257),A=_.dmax,N=_.wsize,L=_.whave,V=_.wnext,G=_.window,$=_.hold,Y=_.bits,ie=_.lencode,re=_.distcode,ce=(1<<_.lenbits)-1,Pe=(1<<_.distbits)-1;e:do{Y<15&&($+=Q[S++]<<Y,Y+=8,$+=Q[S++]<<Y,Y+=8),ye=ie[$&ce];t:for(;;){if($>>>=we=ye>>>24,Y-=we,(we=ye>>>16&255)===0)je[I++]=65535&ye;else{if(!(16&we)){if(!(64&we)){ye=ie[(65535&ye)+($&(1<<we)-1)];continue t}if(32&we){_.mode=12;break e}g.msg="invalid literal/length code",_.mode=30;break e}Le=65535&ye,(we&=15)&&(Y<we&&($+=Q[S++]<<Y,Y+=8),Le+=$&(1<<we)-1,$>>>=we,Y-=we),Y<15&&($+=Q[S++]<<Y,Y+=8,$+=Q[S++]<<Y,Y+=8),ye=re[$&Pe];n:for(;;){if($>>>=we=ye>>>24,Y-=we,!(16&(we=ye>>>16&255))){if(!(64&we)){ye=re[(65535&ye)+($&(1<<we)-1)];continue n}g.msg="invalid distance code",_.mode=30;break e}if(it=65535&ye,Y<(we&=15)&&($+=Q[S++]<<Y,(Y+=8)<we&&($+=Q[S++]<<Y,Y+=8)),A<(it+=$&(1<<we)-1)){g.msg="invalid distance too far back",_.mode=30;break e}if($>>>=we,Y-=we,(we=I-O)<it){if(L<(we=it-we)&&_.sane){g.msg="invalid distance too far back",_.mode=30;break e}if(Oe=G,(de=0)===V){if(de+=N-we,we<Le){for(Le-=we;je[I++]=G[de++],--we;);de=I-it,Oe=je}}else if(V<we){if(de+=N+V-we,(we-=V)<Le){for(Le-=we;je[I++]=G[de++],--we;);if(de=0,V<Le){for(Le-=we=V;je[I++]=G[de++],--we;);de=I-it,Oe=je}}}else if(de+=V-we,we<Le){for(Le-=we;je[I++]=G[de++],--we;);de=I-it,Oe=je}for(;2<Le;)je[I++]=Oe[de++],je[I++]=Oe[de++],je[I++]=Oe[de++],Le-=3;Le&&(je[I++]=Oe[de++],1<Le&&(je[I++]=Oe[de++]))}else{for(de=I-it;je[I++]=je[de++],je[I++]=je[de++],je[I++]=je[de++],2<(Le-=3););Le&&(je[I++]=je[de++],1<Le&&(je[I++]=je[de++]))}break}}break}}while(S<C&&I<R);S-=Le=Y>>3,$&=(1<<(Y-=Le<<3))-1,g.next_in=S,g.next_out=I,g.avail_in=S<C?C-S+5:5-(S-C),g.avail_out=I<R?R-I+257:257-(I-R),_.hold=$,_.bits=Y}},{}],49:[function(l,d,f){var g=l("../utils/common"),b=l("./adler32"),_=l("./crc32"),S=l("./inffast"),C=l("./inftrees"),I=1,O=2,R=0,A=-2,N=1,L=852,V=592;function G(de){return(de>>>24&255)+(de>>>8&65280)+((65280&de)<<8)+((255&de)<<24)}function $(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Y(de){var Oe;return de&&de.state?(Oe=de.state,de.total_in=de.total_out=Oe.total=0,de.msg="",Oe.wrap&&(de.adler=1&Oe.wrap),Oe.mode=N,Oe.last=0,Oe.havedict=0,Oe.dmax=32768,Oe.head=null,Oe.hold=0,Oe.bits=0,Oe.lencode=Oe.lendyn=new g.Buf32(L),Oe.distcode=Oe.distdyn=new g.Buf32(V),Oe.sane=1,Oe.back=-1,R):A}function ie(de){var Oe;return de&&de.state?((Oe=de.state).wsize=0,Oe.whave=0,Oe.wnext=0,Y(de)):A}function re(de,Oe){var Q,je;return de&&de.state?(je=de.state,Oe<0?(Q=0,Oe=-Oe):(Q=1+(Oe>>4),Oe<48&&(Oe&=15)),Oe&&(Oe<8||15<Oe)?A:(je.window!==null&&je.wbits!==Oe&&(je.window=null),je.wrap=Q,je.wbits=Oe,ie(de))):A}function ce(de,Oe){var Q,je;return de?(je=new $,(de.state=je).window=null,(Q=re(de,Oe))!==R&&(de.state=null),Q):A}var Pe,ye,we=!0;function Le(de){if(we){var Oe;for(Pe=new g.Buf32(512),ye=new g.Buf32(32),Oe=0;Oe<144;)de.lens[Oe++]=8;for(;Oe<256;)de.lens[Oe++]=9;for(;Oe<280;)de.lens[Oe++]=7;for(;Oe<288;)de.lens[Oe++]=8;for(C(I,de.lens,0,288,Pe,0,de.work,{bits:9}),Oe=0;Oe<32;)de.lens[Oe++]=5;C(O,de.lens,0,32,ye,0,de.work,{bits:5}),we=!1}de.lencode=Pe,de.lenbits=9,de.distcode=ye,de.distbits=5}function it(de,Oe,Q,je){var Rt,Ie=de.state;return Ie.window===null&&(Ie.wsize=1<<Ie.wbits,Ie.wnext=0,Ie.whave=0,Ie.window=new g.Buf8(Ie.wsize)),je>=Ie.wsize?(g.arraySet(Ie.window,Oe,Q-Ie.wsize,Ie.wsize,0),Ie.wnext=0,Ie.whave=Ie.wsize):(je<(Rt=Ie.wsize-Ie.wnext)&&(Rt=je),g.arraySet(Ie.window,Oe,Q-je,Rt,Ie.wnext),(je-=Rt)?(g.arraySet(Ie.window,Oe,Q-je,je,0),Ie.wnext=je,Ie.whave=Ie.wsize):(Ie.wnext+=Rt,Ie.wnext===Ie.wsize&&(Ie.wnext=0),Ie.whave<Ie.wsize&&(Ie.whave+=Rt))),0}f.inflateReset=ie,f.inflateReset2=re,f.inflateResetKeep=Y,f.inflateInit=function(de){return ce(de,15)},f.inflateInit2=ce,f.inflate=function(de,Oe){var Q,je,Rt,Ie,Re,Ge,St,he,ge,et,rt,ut,We,tn,xt,qt,yn,zn,On,Gr,ee,ft,pt,Ce,xe=0,$e=new g.Buf8(4),Ct=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!de||!de.state||!de.output||!de.input&&de.avail_in!==0)return A;(Q=de.state).mode===12&&(Q.mode=13),Re=de.next_out,Rt=de.output,St=de.avail_out,Ie=de.next_in,je=de.input,Ge=de.avail_in,he=Q.hold,ge=Q.bits,et=Ge,rt=St,ft=R;e:for(;;)switch(Q.mode){case N:if(Q.wrap===0){Q.mode=13;break}for(;ge<16;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}if(2&Q.wrap&&he===35615){$e[Q.check=0]=255&he,$e[1]=he>>>8&255,Q.check=_(Q.check,$e,2,0),ge=he=0,Q.mode=2;break}if(Q.flags=0,Q.head&&(Q.head.done=!1),!(1&Q.wrap)||(((255&he)<<8)+(he>>8))%31){de.msg="incorrect header check",Q.mode=30;break}if((15&he)!=8){de.msg="unknown compression method",Q.mode=30;break}if(ge-=4,ee=8+(15&(he>>>=4)),Q.wbits===0)Q.wbits=ee;else if(ee>Q.wbits){de.msg="invalid window size",Q.mode=30;break}Q.dmax=1<<ee,de.adler=Q.check=1,Q.mode=512&he?10:12,ge=he=0;break;case 2:for(;ge<16;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}if(Q.flags=he,(255&Q.flags)!=8){de.msg="unknown compression method",Q.mode=30;break}if(57344&Q.flags){de.msg="unknown header flags set",Q.mode=30;break}Q.head&&(Q.head.text=he>>8&1),512&Q.flags&&($e[0]=255&he,$e[1]=he>>>8&255,Q.check=_(Q.check,$e,2,0)),ge=he=0,Q.mode=3;case 3:for(;ge<32;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}Q.head&&(Q.head.time=he),512&Q.flags&&($e[0]=255&he,$e[1]=he>>>8&255,$e[2]=he>>>16&255,$e[3]=he>>>24&255,Q.check=_(Q.check,$e,4,0)),ge=he=0,Q.mode=4;case 4:for(;ge<16;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}Q.head&&(Q.head.xflags=255&he,Q.head.os=he>>8),512&Q.flags&&($e[0]=255&he,$e[1]=he>>>8&255,Q.check=_(Q.check,$e,2,0)),ge=he=0,Q.mode=5;case 5:if(1024&Q.flags){for(;ge<16;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}Q.length=he,Q.head&&(Q.head.extra_len=he),512&Q.flags&&($e[0]=255&he,$e[1]=he>>>8&255,Q.check=_(Q.check,$e,2,0)),ge=he=0}else Q.head&&(Q.head.extra=null);Q.mode=6;case 6:if(1024&Q.flags&&(Ge<(ut=Q.length)&&(ut=Ge),ut&&(Q.head&&(ee=Q.head.extra_len-Q.length,Q.head.extra||(Q.head.extra=new Array(Q.head.extra_len)),g.arraySet(Q.head.extra,je,Ie,ut,ee)),512&Q.flags&&(Q.check=_(Q.check,je,ut,Ie)),Ge-=ut,Ie+=ut,Q.length-=ut),Q.length))break e;Q.length=0,Q.mode=7;case 7:if(2048&Q.flags){if(Ge===0)break e;for(ut=0;ee=je[Ie+ut++],Q.head&&ee&&Q.length<65536&&(Q.head.name+=String.fromCharCode(ee)),ee&&ut<Ge;);if(512&Q.flags&&(Q.check=_(Q.check,je,ut,Ie)),Ge-=ut,Ie+=ut,ee)break e}else Q.head&&(Q.head.name=null);Q.length=0,Q.mode=8;case 8:if(4096&Q.flags){if(Ge===0)break e;for(ut=0;ee=je[Ie+ut++],Q.head&&ee&&Q.length<65536&&(Q.head.comment+=String.fromCharCode(ee)),ee&&ut<Ge;);if(512&Q.flags&&(Q.check=_(Q.check,je,ut,Ie)),Ge-=ut,Ie+=ut,ee)break e}else Q.head&&(Q.head.comment=null);Q.mode=9;case 9:if(512&Q.flags){for(;ge<16;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}if(he!==(65535&Q.check)){de.msg="header crc mismatch",Q.mode=30;break}ge=he=0}Q.head&&(Q.head.hcrc=Q.flags>>9&1,Q.head.done=!0),de.adler=Q.check=0,Q.mode=12;break;case 10:for(;ge<32;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}de.adler=Q.check=G(he),ge=he=0,Q.mode=11;case 11:if(Q.havedict===0)return de.next_out=Re,de.avail_out=St,de.next_in=Ie,de.avail_in=Ge,Q.hold=he,Q.bits=ge,2;de.adler=Q.check=1,Q.mode=12;case 12:if(Oe===5||Oe===6)break e;case 13:if(Q.last){he>>>=7&ge,ge-=7&ge,Q.mode=27;break}for(;ge<3;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}switch(Q.last=1&he,ge-=1,3&(he>>>=1)){case 0:Q.mode=14;break;case 1:if(Le(Q),Q.mode=20,Oe!==6)break;he>>>=2,ge-=2;break e;case 2:Q.mode=17;break;case 3:de.msg="invalid block type",Q.mode=30}he>>>=2,ge-=2;break;case 14:for(he>>>=7&ge,ge-=7&ge;ge<32;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}if((65535&he)!=(he>>>16^65535)){de.msg="invalid stored block lengths",Q.mode=30;break}if(Q.length=65535&he,ge=he=0,Q.mode=15,Oe===6)break e;case 15:Q.mode=16;case 16:if(ut=Q.length){if(Ge<ut&&(ut=Ge),St<ut&&(ut=St),ut===0)break e;g.arraySet(Rt,je,Ie,ut,Re),Ge-=ut,Ie+=ut,St-=ut,Re+=ut,Q.length-=ut;break}Q.mode=12;break;case 17:for(;ge<14;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}if(Q.nlen=257+(31&he),he>>>=5,ge-=5,Q.ndist=1+(31&he),he>>>=5,ge-=5,Q.ncode=4+(15&he),he>>>=4,ge-=4,286<Q.nlen||30<Q.ndist){de.msg="too many length or distance symbols",Q.mode=30;break}Q.have=0,Q.mode=18;case 18:for(;Q.have<Q.ncode;){for(;ge<3;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}Q.lens[Ct[Q.have++]]=7&he,he>>>=3,ge-=3}for(;Q.have<19;)Q.lens[Ct[Q.have++]]=0;if(Q.lencode=Q.lendyn,Q.lenbits=7,pt={bits:Q.lenbits},ft=C(0,Q.lens,0,19,Q.lencode,0,Q.work,pt),Q.lenbits=pt.bits,ft){de.msg="invalid code lengths set",Q.mode=30;break}Q.have=0,Q.mode=19;case 19:for(;Q.have<Q.nlen+Q.ndist;){for(;qt=(xe=Q.lencode[he&(1<<Q.lenbits)-1])>>>16&255,yn=65535&xe,!((xt=xe>>>24)<=ge);){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}if(yn<16)he>>>=xt,ge-=xt,Q.lens[Q.have++]=yn;else{if(yn===16){for(Ce=xt+2;ge<Ce;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}if(he>>>=xt,ge-=xt,Q.have===0){de.msg="invalid bit length repeat",Q.mode=30;break}ee=Q.lens[Q.have-1],ut=3+(3&he),he>>>=2,ge-=2}else if(yn===17){for(Ce=xt+3;ge<Ce;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}ge-=xt,ee=0,ut=3+(7&(he>>>=xt)),he>>>=3,ge-=3}else{for(Ce=xt+7;ge<Ce;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}ge-=xt,ee=0,ut=11+(127&(he>>>=xt)),he>>>=7,ge-=7}if(Q.have+ut>Q.nlen+Q.ndist){de.msg="invalid bit length repeat",Q.mode=30;break}for(;ut--;)Q.lens[Q.have++]=ee}}if(Q.mode===30)break;if(Q.lens[256]===0){de.msg="invalid code -- missing end-of-block",Q.mode=30;break}if(Q.lenbits=9,pt={bits:Q.lenbits},ft=C(I,Q.lens,0,Q.nlen,Q.lencode,0,Q.work,pt),Q.lenbits=pt.bits,ft){de.msg="invalid literal/lengths set",Q.mode=30;break}if(Q.distbits=6,Q.distcode=Q.distdyn,pt={bits:Q.distbits},ft=C(O,Q.lens,Q.nlen,Q.ndist,Q.distcode,0,Q.work,pt),Q.distbits=pt.bits,ft){de.msg="invalid distances set",Q.mode=30;break}if(Q.mode=20,Oe===6)break e;case 20:Q.mode=21;case 21:if(6<=Ge&&258<=St){de.next_out=Re,de.avail_out=St,de.next_in=Ie,de.avail_in=Ge,Q.hold=he,Q.bits=ge,S(de,rt),Re=de.next_out,Rt=de.output,St=de.avail_out,Ie=de.next_in,je=de.input,Ge=de.avail_in,he=Q.hold,ge=Q.bits,Q.mode===12&&(Q.back=-1);break}for(Q.back=0;qt=(xe=Q.lencode[he&(1<<Q.lenbits)-1])>>>16&255,yn=65535&xe,!((xt=xe>>>24)<=ge);){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}if(qt&&!(240&qt)){for(zn=xt,On=qt,Gr=yn;qt=(xe=Q.lencode[Gr+((he&(1<<zn+On)-1)>>zn)])>>>16&255,yn=65535&xe,!(zn+(xt=xe>>>24)<=ge);){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}he>>>=zn,ge-=zn,Q.back+=zn}if(he>>>=xt,ge-=xt,Q.back+=xt,Q.length=yn,qt===0){Q.mode=26;break}if(32&qt){Q.back=-1,Q.mode=12;break}if(64&qt){de.msg="invalid literal/length code",Q.mode=30;break}Q.extra=15&qt,Q.mode=22;case 22:if(Q.extra){for(Ce=Q.extra;ge<Ce;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}Q.length+=he&(1<<Q.extra)-1,he>>>=Q.extra,ge-=Q.extra,Q.back+=Q.extra}Q.was=Q.length,Q.mode=23;case 23:for(;qt=(xe=Q.distcode[he&(1<<Q.distbits)-1])>>>16&255,yn=65535&xe,!((xt=xe>>>24)<=ge);){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}if(!(240&qt)){for(zn=xt,On=qt,Gr=yn;qt=(xe=Q.distcode[Gr+((he&(1<<zn+On)-1)>>zn)])>>>16&255,yn=65535&xe,!(zn+(xt=xe>>>24)<=ge);){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}he>>>=zn,ge-=zn,Q.back+=zn}if(he>>>=xt,ge-=xt,Q.back+=xt,64&qt){de.msg="invalid distance code",Q.mode=30;break}Q.offset=yn,Q.extra=15&qt,Q.mode=24;case 24:if(Q.extra){for(Ce=Q.extra;ge<Ce;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}Q.offset+=he&(1<<Q.extra)-1,he>>>=Q.extra,ge-=Q.extra,Q.back+=Q.extra}if(Q.offset>Q.dmax){de.msg="invalid distance too far back",Q.mode=30;break}Q.mode=25;case 25:if(St===0)break e;if(ut=rt-St,Q.offset>ut){if((ut=Q.offset-ut)>Q.whave&&Q.sane){de.msg="invalid distance too far back",Q.mode=30;break}We=ut>Q.wnext?(ut-=Q.wnext,Q.wsize-ut):Q.wnext-ut,ut>Q.length&&(ut=Q.length),tn=Q.window}else tn=Rt,We=Re-Q.offset,ut=Q.length;for(St<ut&&(ut=St),St-=ut,Q.length-=ut;Rt[Re++]=tn[We++],--ut;);Q.length===0&&(Q.mode=21);break;case 26:if(St===0)break e;Rt[Re++]=Q.length,St--,Q.mode=21;break;case 27:if(Q.wrap){for(;ge<32;){if(Ge===0)break e;Ge--,he|=je[Ie++]<<ge,ge+=8}if(rt-=St,de.total_out+=rt,Q.total+=rt,rt&&(de.adler=Q.check=Q.flags?_(Q.check,Rt,rt,Re-rt):b(Q.check,Rt,rt,Re-rt)),rt=St,(Q.flags?he:G(he))!==Q.check){de.msg="incorrect data check",Q.mode=30;break}ge=he=0}Q.mode=28;case 28:if(Q.wrap&&Q.flags){for(;ge<32;){if(Ge===0)break e;Ge--,he+=je[Ie++]<<ge,ge+=8}if(he!==(4294967295&Q.total)){de.msg="incorrect length check",Q.mode=30;break}ge=he=0}Q.mode=29;case 29:ft=1;break e;case 30:ft=-3;break e;case 31:return-4;case 32:default:return A}return de.next_out=Re,de.avail_out=St,de.next_in=Ie,de.avail_in=Ge,Q.hold=he,Q.bits=ge,(Q.wsize||rt!==de.avail_out&&Q.mode<30&&(Q.mode<27||Oe!==4))&&it(de,de.output,de.next_out,rt-de.avail_out)?(Q.mode=31,-4):(et-=de.avail_in,rt-=de.avail_out,de.total_in+=et,de.total_out+=rt,Q.total+=rt,Q.wrap&&rt&&(de.adler=Q.check=Q.flags?_(Q.check,Rt,rt,de.next_out-rt):b(Q.check,Rt,rt,de.next_out-rt)),de.data_type=Q.bits+(Q.last?64:0)+(Q.mode===12?128:0)+(Q.mode===20||Q.mode===15?256:0),(et==0&&rt===0||Oe===4)&&ft===R&&(ft=-5),ft)},f.inflateEnd=function(de){if(!de||!de.state)return A;var Oe=de.state;return Oe.window&&(Oe.window=null),de.state=null,R},f.inflateGetHeader=function(de,Oe){var Q;return de&&de.state&&2&(Q=de.state).wrap?((Q.head=Oe).done=!1,R):A},f.inflateSetDictionary=function(de,Oe){var Q,je=Oe.length;return de&&de.state?(Q=de.state).wrap!==0&&Q.mode!==11?A:Q.mode===11&&b(1,Oe,je,0)!==Q.check?-3:it(de,Oe,je,je)?(Q.mode=31,-4):(Q.havedict=1,R):A},f.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(l,d,f){var g=l("../utils/common"),b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],S=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],C=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];d.exports=function(I,O,R,A,N,L,V,G){var $,Y,ie,re,ce,Pe,ye,we,Le,it=G.bits,de=0,Oe=0,Q=0,je=0,Rt=0,Ie=0,Re=0,Ge=0,St=0,he=0,ge=null,et=0,rt=new g.Buf16(16),ut=new g.Buf16(16),We=null,tn=0;for(de=0;de<=15;de++)rt[de]=0;for(Oe=0;Oe<A;Oe++)rt[O[R+Oe]]++;for(Rt=it,je=15;1<=je&&rt[je]===0;je--);if(je<Rt&&(Rt=je),je===0)return N[L++]=20971520,N[L++]=20971520,G.bits=1,0;for(Q=1;Q<je&&rt[Q]===0;Q++);for(Rt<Q&&(Rt=Q),de=Ge=1;de<=15;de++)if(Ge<<=1,(Ge-=rt[de])<0)return-1;if(0<Ge&&(I===0||je!==1))return-1;for(ut[1]=0,de=1;de<15;de++)ut[de+1]=ut[de]+rt[de];for(Oe=0;Oe<A;Oe++)O[R+Oe]!==0&&(V[ut[O[R+Oe]]++]=Oe);if(Pe=I===0?(ge=We=V,19):I===1?(ge=b,et-=257,We=_,tn-=257,256):(ge=S,We=C,-1),de=Q,ce=L,Re=Oe=he=0,ie=-1,re=(St=1<<(Ie=Rt))-1,I===1&&852<St||I===2&&592<St)return 1;for(;;){for(ye=de-Re,Le=V[Oe]<Pe?(we=0,V[Oe]):V[Oe]>Pe?(we=We[tn+V[Oe]],ge[et+V[Oe]]):(we=96,0),$=1<<de-Re,Q=Y=1<<Ie;N[ce+(he>>Re)+(Y-=$)]=ye<<24|we<<16|Le|0,Y!==0;);for($=1<<de-1;he&$;)$>>=1;if($!==0?(he&=$-1,he+=$):he=0,Oe++,--rt[de]==0){if(de===je)break;de=O[R+V[Oe]]}if(Rt<de&&(he&re)!==ie){for(Re===0&&(Re=Rt),ce+=Q,Ge=1<<(Ie=de-Re);Ie+Re<je&&!((Ge-=rt[Ie+Re])<=0);)Ie++,Ge<<=1;if(St+=1<<Ie,I===1&&852<St||I===2&&592<St)return 1;N[ie=he&re]=Rt<<24|Ie<<16|ce-L|0}}return he!==0&&(N[ce+he]=de-Re<<24|64<<16|0),G.bits=Rt,0}},{"../utils/common":41}],51:[function(l,d,f){d.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(l,d,f){var g=l("../utils/common"),b=0,_=1;function S(xe){for(var $e=xe.length;0<=--$e;)xe[$e]=0}var C=0,I=29,O=256,R=O+1+I,A=30,N=19,L=2*R+1,V=15,G=16,$=7,Y=256,ie=16,re=17,ce=18,Pe=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ye=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],we=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],it=new Array(2*(R+2));S(it);var de=new Array(2*A);S(de);var Oe=new Array(512);S(Oe);var Q=new Array(256);S(Q);var je=new Array(I);S(je);var Rt,Ie,Re,Ge=new Array(A);function St(xe,$e,Ct,kt,tt){this.static_tree=xe,this.extra_bits=$e,this.extra_base=Ct,this.elems=kt,this.max_length=tt,this.has_stree=xe&&xe.length}function he(xe,$e){this.dyn_tree=xe,this.max_code=0,this.stat_desc=$e}function ge(xe){return xe<256?Oe[xe]:Oe[256+(xe>>>7)]}function et(xe,$e){xe.pending_buf[xe.pending++]=255&$e,xe.pending_buf[xe.pending++]=$e>>>8&255}function rt(xe,$e,Ct){xe.bi_valid>G-Ct?(xe.bi_buf|=$e<<xe.bi_valid&65535,et(xe,xe.bi_buf),xe.bi_buf=$e>>G-xe.bi_valid,xe.bi_valid+=Ct-G):(xe.bi_buf|=$e<<xe.bi_valid&65535,xe.bi_valid+=Ct)}function ut(xe,$e,Ct){rt(xe,Ct[2*$e],Ct[2*$e+1])}function We(xe,$e){for(var Ct=0;Ct|=1&xe,xe>>>=1,Ct<<=1,0<--$e;);return Ct>>>1}function tn(xe,$e,Ct){var kt,tt,Ft=new Array(V+1),Tt=0;for(kt=1;kt<=V;kt++)Ft[kt]=Tt=Tt+Ct[kt-1]<<1;for(tt=0;tt<=$e;tt++){var At=xe[2*tt+1];At!==0&&(xe[2*tt]=We(Ft[At]++,At))}}function xt(xe){var $e;for($e=0;$e<R;$e++)xe.dyn_ltree[2*$e]=0;for($e=0;$e<A;$e++)xe.dyn_dtree[2*$e]=0;for($e=0;$e<N;$e++)xe.bl_tree[2*$e]=0;xe.dyn_ltree[2*Y]=1,xe.opt_len=xe.static_len=0,xe.last_lit=xe.matches=0}function qt(xe){8<xe.bi_valid?et(xe,xe.bi_buf):0<xe.bi_valid&&(xe.pending_buf[xe.pending++]=xe.bi_buf),xe.bi_buf=0,xe.bi_valid=0}function yn(xe,$e,Ct,kt){var tt=2*$e,Ft=2*Ct;return xe[tt]<xe[Ft]||xe[tt]===xe[Ft]&&kt[$e]<=kt[Ct]}function zn(xe,$e,Ct){for(var kt=xe.heap[Ct],tt=Ct<<1;tt<=xe.heap_len&&(tt<xe.heap_len&&yn($e,xe.heap[tt+1],xe.heap[tt],xe.depth)&&tt++,!yn($e,kt,xe.heap[tt],xe.depth));)xe.heap[Ct]=xe.heap[tt],Ct=tt,tt<<=1;xe.heap[Ct]=kt}function On(xe,$e,Ct){var kt,tt,Ft,Tt,At=0;if(xe.last_lit!==0)for(;kt=xe.pending_buf[xe.d_buf+2*At]<<8|xe.pending_buf[xe.d_buf+2*At+1],tt=xe.pending_buf[xe.l_buf+At],At++,kt===0?ut(xe,tt,$e):(ut(xe,(Ft=Q[tt])+O+1,$e),(Tt=Pe[Ft])!==0&&rt(xe,tt-=je[Ft],Tt),ut(xe,Ft=ge(--kt),Ct),(Tt=ye[Ft])!==0&&rt(xe,kt-=Ge[Ft],Tt)),At<xe.last_lit;);ut(xe,Y,$e)}function Gr(xe,$e){var Ct,kt,tt,Ft=$e.dyn_tree,Tt=$e.stat_desc.static_tree,At=$e.stat_desc.has_stree,In=$e.stat_desc.elems,Or=-1;for(xe.heap_len=0,xe.heap_max=L,Ct=0;Ct<In;Ct++)Ft[2*Ct]!==0?(xe.heap[++xe.heap_len]=Or=Ct,xe.depth[Ct]=0):Ft[2*Ct+1]=0;for(;xe.heap_len<2;)Ft[2*(tt=xe.heap[++xe.heap_len]=Or<2?++Or:0)]=1,xe.depth[tt]=0,xe.opt_len--,At&&(xe.static_len-=Tt[2*tt+1]);for($e.max_code=Or,Ct=xe.heap_len>>1;1<=Ct;Ct--)zn(xe,Ft,Ct);for(tt=In;Ct=xe.heap[1],xe.heap[1]=xe.heap[xe.heap_len--],zn(xe,Ft,1),kt=xe.heap[1],xe.heap[--xe.heap_max]=Ct,xe.heap[--xe.heap_max]=kt,Ft[2*tt]=Ft[2*Ct]+Ft[2*kt],xe.depth[tt]=(xe.depth[Ct]>=xe.depth[kt]?xe.depth[Ct]:xe.depth[kt])+1,Ft[2*Ct+1]=Ft[2*kt+1]=tt,xe.heap[1]=tt++,zn(xe,Ft,1),2<=xe.heap_len;);xe.heap[--xe.heap_max]=xe.heap[1],function(er,wo){var Bf,zo,rc,zi,Bv,y_,ic=wo.dyn_tree,b_=wo.max_code,AC=wo.stat_desc.static_tree,IC=wo.stat_desc.has_stree,RC=wo.stat_desc.extra_bits,__=wo.stat_desc.extra_base,tu=wo.stat_desc.max_length,sc=0;for(zi=0;zi<=V;zi++)er.bl_count[zi]=0;for(ic[2*er.heap[er.heap_max]+1]=0,Bf=er.heap_max+1;Bf<L;Bf++)tu<(zi=ic[2*ic[2*(zo=er.heap[Bf])+1]+1]+1)&&(zi=tu,sc++),ic[2*zo+1]=zi,b_<zo||(er.bl_count[zi]++,Bv=0,__<=zo&&(Bv=RC[zo-__]),y_=ic[2*zo],er.opt_len+=y_*(zi+Bv),IC&&(er.static_len+=y_*(AC[2*zo+1]+Bv)));if(sc!==0){do{for(zi=tu-1;er.bl_count[zi]===0;)zi--;er.bl_count[zi]--,er.bl_count[zi+1]+=2,er.bl_count[tu]--,sc-=2}while(0<sc);for(zi=tu;zi!==0;zi--)for(zo=er.bl_count[zi];zo!==0;)b_<(rc=er.heap[--Bf])||(ic[2*rc+1]!==zi&&(er.opt_len+=(zi-ic[2*rc+1])*ic[2*rc],ic[2*rc+1]=zi),zo--)}}(xe,$e),tn(Ft,Or,xe.bl_count)}function ee(xe,$e,Ct){var kt,tt,Ft=-1,Tt=$e[1],At=0,In=7,Or=4;for(Tt===0&&(In=138,Or=3),$e[2*(Ct+1)+1]=65535,kt=0;kt<=Ct;kt++)tt=Tt,Tt=$e[2*(kt+1)+1],++At<In&&tt===Tt||(At<Or?xe.bl_tree[2*tt]+=At:tt!==0?(tt!==Ft&&xe.bl_tree[2*tt]++,xe.bl_tree[2*ie]++):At<=10?xe.bl_tree[2*re]++:xe.bl_tree[2*ce]++,Ft=tt,Or=(At=0)===Tt?(In=138,3):tt===Tt?(In=6,3):(In=7,4))}function ft(xe,$e,Ct){var kt,tt,Ft=-1,Tt=$e[1],At=0,In=7,Or=4;for(Tt===0&&(In=138,Or=3),kt=0;kt<=Ct;kt++)if(tt=Tt,Tt=$e[2*(kt+1)+1],!(++At<In&&tt===Tt)){if(At<Or)for(;ut(xe,tt,xe.bl_tree),--At!=0;);else tt!==0?(tt!==Ft&&(ut(xe,tt,xe.bl_tree),At--),ut(xe,ie,xe.bl_tree),rt(xe,At-3,2)):At<=10?(ut(xe,re,xe.bl_tree),rt(xe,At-3,3)):(ut(xe,ce,xe.bl_tree),rt(xe,At-11,7));Ft=tt,Or=(At=0)===Tt?(In=138,3):tt===Tt?(In=6,3):(In=7,4)}}S(Ge);var pt=!1;function Ce(xe,$e,Ct,kt){rt(xe,(C<<1)+(kt?1:0),3),function(tt,Ft,Tt,At){qt(tt),At&&(et(tt,Tt),et(tt,~Tt)),g.arraySet(tt.pending_buf,tt.window,Ft,Tt,tt.pending),tt.pending+=Tt}(xe,$e,Ct,!0)}f._tr_init=function(xe){pt||(function(){var $e,Ct,kt,tt,Ft,Tt=new Array(V+1);for(tt=kt=0;tt<I-1;tt++)for(je[tt]=kt,$e=0;$e<1<<Pe[tt];$e++)Q[kt++]=tt;for(Q[kt-1]=tt,tt=Ft=0;tt<16;tt++)for(Ge[tt]=Ft,$e=0;$e<1<<ye[tt];$e++)Oe[Ft++]=tt;for(Ft>>=7;tt<A;tt++)for(Ge[tt]=Ft<<7,$e=0;$e<1<<ye[tt]-7;$e++)Oe[256+Ft++]=tt;for(Ct=0;Ct<=V;Ct++)Tt[Ct]=0;for($e=0;$e<=143;)it[2*$e+1]=8,$e++,Tt[8]++;for(;$e<=255;)it[2*$e+1]=9,$e++,Tt[9]++;for(;$e<=279;)it[2*$e+1]=7,$e++,Tt[7]++;for(;$e<=287;)it[2*$e+1]=8,$e++,Tt[8]++;for(tn(it,R+1,Tt),$e=0;$e<A;$e++)de[2*$e+1]=5,de[2*$e]=We($e,5);Rt=new St(it,Pe,O+1,R,V),Ie=new St(de,ye,0,A,V),Re=new St(new Array(0),we,0,N,$)}(),pt=!0),xe.l_desc=new he(xe.dyn_ltree,Rt),xe.d_desc=new he(xe.dyn_dtree,Ie),xe.bl_desc=new he(xe.bl_tree,Re),xe.bi_buf=0,xe.bi_valid=0,xt(xe)},f._tr_stored_block=Ce,f._tr_flush_block=function(xe,$e,Ct,kt){var tt,Ft,Tt=0;0<xe.level?(xe.strm.data_type===2&&(xe.strm.data_type=function(At){var In,Or=4093624447;for(In=0;In<=31;In++,Or>>>=1)if(1&Or&&At.dyn_ltree[2*In]!==0)return b;if(At.dyn_ltree[18]!==0||At.dyn_ltree[20]!==0||At.dyn_ltree[26]!==0)return _;for(In=32;In<O;In++)if(At.dyn_ltree[2*In]!==0)return _;return b}(xe)),Gr(xe,xe.l_desc),Gr(xe,xe.d_desc),Tt=function(At){var In;for(ee(At,At.dyn_ltree,At.l_desc.max_code),ee(At,At.dyn_dtree,At.d_desc.max_code),Gr(At,At.bl_desc),In=N-1;3<=In&&At.bl_tree[2*Le[In]+1]===0;In--);return At.opt_len+=3*(In+1)+5+5+4,In}(xe),tt=xe.opt_len+3+7>>>3,(Ft=xe.static_len+3+7>>>3)<=tt&&(tt=Ft)):tt=Ft=Ct+5,Ct+4<=tt&&$e!==-1?Ce(xe,$e,Ct,kt):xe.strategy===4||Ft===tt?(rt(xe,2+(kt?1:0),3),On(xe,it,de)):(rt(xe,4+(kt?1:0),3),function(At,In,Or,er){var wo;for(rt(At,In-257,5),rt(At,Or-1,5),rt(At,er-4,4),wo=0;wo<er;wo++)rt(At,At.bl_tree[2*Le[wo]+1],3);ft(At,At.dyn_ltree,In-1),ft(At,At.dyn_dtree,Or-1)}(xe,xe.l_desc.max_code+1,xe.d_desc.max_code+1,Tt+1),On(xe,xe.dyn_ltree,xe.dyn_dtree)),xt(xe),kt&&qt(xe)},f._tr_tally=function(xe,$e,Ct){return xe.pending_buf[xe.d_buf+2*xe.last_lit]=$e>>>8&255,xe.pending_buf[xe.d_buf+2*xe.last_lit+1]=255&$e,xe.pending_buf[xe.l_buf+xe.last_lit]=255&Ct,xe.last_lit++,$e===0?xe.dyn_ltree[2*Ct]++:(xe.matches++,$e--,xe.dyn_ltree[2*(Q[Ct]+O+1)]++,xe.dyn_dtree[2*ge($e)]++),xe.last_lit===xe.lit_bufsize-1},f._tr_align=function(xe){rt(xe,2,3),ut(xe,Y,it),function($e){$e.bi_valid===16?(et($e,$e.bi_buf),$e.bi_buf=0,$e.bi_valid=0):8<=$e.bi_valid&&($e.pending_buf[$e.pending++]=255&$e.bi_buf,$e.bi_buf>>=8,$e.bi_valid-=8)}(xe)}},{"../utils/common":41}],53:[function(l,d,f){d.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(l,d,f){(function(g){(function(b,_){if(!b.setImmediate){var S,C,I,O,R=1,A={},N=!1,L=b.document,V=Object.getPrototypeOf&&Object.getPrototypeOf(b);V=V&&V.setTimeout?V:b,S={}.toString.call(b.process)==="[object process]"?function(ie){process.nextTick(function(){$(ie)})}:function(){if(b.postMessage&&!b.importScripts){var ie=!0,re=b.onmessage;return b.onmessage=function(){ie=!1},b.postMessage("","*"),b.onmessage=re,ie}}()?(O="setImmediate$"+Math.random()+"$",b.addEventListener?b.addEventListener("message",Y,!1):b.attachEvent("onmessage",Y),function(ie){b.postMessage(O+ie,"*")}):b.MessageChannel?((I=new MessageChannel).port1.onmessage=function(ie){$(ie.data)},function(ie){I.port2.postMessage(ie)}):L&&"onreadystatechange"in L.createElement("script")?(C=L.documentElement,function(ie){var re=L.createElement("script");re.onreadystatechange=function(){$(ie),re.onreadystatechange=null,C.removeChild(re),re=null},C.appendChild(re)}):function(ie){setTimeout($,0,ie)},V.setImmediate=function(ie){typeof ie!="function"&&(ie=new Function(""+ie));for(var re=new Array(arguments.length-1),ce=0;ce<re.length;ce++)re[ce]=arguments[ce+1];var Pe={callback:ie,args:re};return A[R]=Pe,S(R),R++},V.clearImmediate=G}function G(ie){delete A[ie]}function $(ie){if(N)setTimeout($,0,ie);else{var re=A[ie];if(re){N=!0;try{(function(ce){var Pe=ce.callback,ye=ce.args;switch(ye.length){case 0:Pe();break;case 1:Pe(ye[0]);break;case 2:Pe(ye[0],ye[1]);break;case 3:Pe(ye[0],ye[1],ye[2]);break;default:Pe.apply(_,ye)}})(re)}finally{G(ie),N=!1}}}}function Y(ie){ie.source===b&&typeof ie.data=="string"&&ie.data.indexOf(O)===0&&$(+ie.data.slice(O.length))}})(typeof self>"u"?g===void 0?this:g:self)}).call(this,typeof Wi<"u"?Wi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}),Zz,GR,Pne,Qz,Tne,Mne,HE,kne,Jz,Ane,WR,GE,WE,wf,Ine,Rne,Dne,qb,za,One,Lne,eV,$R,fIe=P(()=>{Zz=X(Ne(),1),GR=X(Ne(),1),Pne=s=>typeof s=="function",Qz=(s,a)=>Pne(s)?s(a):s,Tne=(()=>{let s=0;return()=>(++s).toString()})(),Mne=20,HE=new Map,kne=1e3,Jz=s=>{if(HE.has(s))return;let a=setTimeout(()=>{HE.delete(s),wf({type:4,toastId:s})},kne);HE.set(s,a)},Ane=s=>{let a=HE.get(s);a&&clearTimeout(a)},WR=(s,a)=>{switch(a.type){case 0:return B(F({},s),{toasts:[a.toast,...s.toasts].slice(0,Mne)});case 1:return a.toast.id&&Ane(a.toast.id),B(F({},s),{toasts:s.toasts.map(g=>g.id===a.toast.id?F(F({},g),a.toast):g)});case 2:let{toast:l}=a;return s.toasts.find(g=>g.id===l.id)?WR(s,{type:1,toast:l}):WR(s,{type:0,toast:l});case 3:let{toastId:d}=a;return d?Jz(d):s.toasts.forEach(g=>{Jz(g.id)}),B(F({},s),{toasts:s.toasts.map(g=>g.id===d||d===void 0?B(F({},g),{visible:!1}):g)});case 4:return a.toastId===void 0?B(F({},s),{toasts:[]}):B(F({},s),{toasts:s.toasts.filter(g=>g.id!==a.toastId)});case 5:return B(F({},s),{pausedAt:a.time});case 6:let f=a.time-(s.pausedAt||0);return B(F({},s),{pausedAt:void 0,toasts:s.toasts.map(g=>B(F({},g),{pauseDuration:g.pauseDuration+f}))})}},GE=[],WE={toasts:[],pausedAt:void 0},wf=s=>{WE=WR(WE,s),GE.forEach(a=>{a(WE)})},Ine={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Rne=(s={})=>{let[a,l]=(0,Zz.useState)(WE);(0,Zz.useEffect)(()=>(GE.push(l),()=>{let f=GE.indexOf(l);f>-1&&GE.splice(f,1)}),[a]);let d=a.toasts.map(f=>{var g,b;return B(F(F(F({},s),s[f.type]),f),{duration:f.duration||((g=s[f.type])==null?void 0:g.duration)||(s==null?void 0:s.duration)||Ine[f.type],style:F(F(F({},s.style),(b=s[f.type])==null?void 0:b.style),f.style)})});return B(F({},a),{toasts:d})},Dne=(s,a="blank",l)=>B(F({createdAt:Date.now(),visible:!0,type:a,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0},l),{id:(l==null?void 0:l.id)||Tne()}),qb=s=>(a,l)=>{let d=Dne(a,s,l);return wf({type:2,toast:d}),d.id},za=(s,a)=>qb("blank")(s,a),za.error=qb("error"),za.success=qb("success"),za.loading=qb("loading"),za.custom=qb("custom"),za.dismiss=s=>{wf({type:3,toastId:s})},za.remove=s=>wf({type:4,toastId:s}),za.promise=(s,a,l)=>{let d=za.loading(a.loading,F(F({},l),l==null?void 0:l.loading));return s.then(f=>(za.success(Qz(a.success,f),F(F({id:d},l),l==null?void 0:l.success)),f)).catch(f=>{za.error(Qz(a.error,f),F(F({id:d},l),l==null?void 0:l.error))}),s},One=(s,a)=>{wf({type:1,toast:{id:s,height:a}})},Lne=()=>{wf({type:5,time:Date.now()})},eV=s=>{let{toasts:a,pausedAt:l}=Rne(s);(0,GR.useEffect)(()=>{if(l)return;let g=Date.now(),b=a.map(_=>{if(_.duration===1/0)return;let S=(_.duration||0)+_.pauseDuration-(g-_.createdAt);if(S<0){_.visible&&za.dismiss(_.id);return}return setTimeout(()=>za.dismiss(_.id),S)});return()=>{b.forEach(_=>_&&clearTimeout(_))}},[a,l]);let d=(0,GR.useCallback)(()=>{l&&wf({type:6,time:Date.now()})},[l]),f=(0,GR.useCallback)((g,b)=>{let{reverseOrder:_=!1,gutter:S=8,defaultPosition:C}=b||{},I=a.filter(A=>(A.position||C)===(g.position||C)&&A.height),O=I.findIndex(A=>A.id===g.id),R=I.filter((A,N)=>N<O&&A.visible).length;return I.filter(A=>A.visible).slice(..._?[R+1]:[0,R]).reduce((A,N)=>A+(N.height||0)+S,0)},[a]);return{toasts:a,handlers:{updateHeight:One,startPause:Lne,endPause:d,calculateOffset:f}}},$R=za});function Nne(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function mIe(s){av=s}function Zs(s,a){if(a){if(Gne.test(s))return s.replace(Wne,tV)}else if($ne.test(s))return s.replace(Kne,tV);return s}function Fne(s){return s.replace(qne,(a,l)=>(l=l.toLowerCase(),l==="colon"?":":l.charAt(0)==="#"?l.charAt(1)==="x"?String.fromCharCode(parseInt(l.substring(2),16)):String.fromCharCode(+l.substring(1)):""))}function ui(s,a){s=typeof s=="string"?s:s.source,a=a||"";let l={replace:(d,f)=>(f=f.source||f,f=f.replace(Yne,"$1"),s=s.replace(d,f),l),getRegex:()=>new RegExp(s,a)};return l}function Bne(s,a,l){if(s){let d;try{d=decodeURIComponent(Fne(l)).replace(Zne,"").toLowerCase()}catch{return null}if(d.indexOf("javascript:")===0||d.indexOf("vbscript:")===0||d.indexOf("data:")===0)return null}a&&!Qne.test(l)&&(l=gIe(a,l));try{l=encodeURI(l).replace(/%25/g,"%")}catch{return null}return l}function gIe(s,a){$E[" "+s]||(Jne.test(s)?$E[" "+s]=s+"/":$E[" "+s]=KR(s,"/",!0)),s=$E[" "+s];let l=s.indexOf(":")===-1;return a.substring(0,2)==="//"?l?a:s.replace(ere,"$1")+a:a.charAt(0)==="/"?l?a:s.replace(tre,"$1")+a:s+a}function qu(s){let a=1,l,d;for(;a<arguments.length;a++){l=arguments[a];for(d in l)Object.prototype.hasOwnProperty.call(l,d)&&(s[d]=l[d])}return s}function Une(s,a){let l=s.replace(/\|/g,(g,b,_)=>{let S=!1,C=b;for(;--C>=0&&_[C]==="\\";)S=!S;return S?"|":" |"}),d=l.split(/ \|/),f=0;if(d[0].trim()||d.shift(),d.length>0&&!d[d.length-1].trim()&&d.pop(),d.length>a)d.splice(a);else for(;d.length<a;)d.push("");for(;f<d.length;f++)d[f]=d[f].trim().replace(/\\\|/g,"|");return d}function KR(s,a,l){let d=s.length;if(d===0)return"";let f=0;for(;f<d;){let g=s.charAt(d-f-1);if(g===a&&!l)f++;else if(g!==a&&l)f++;else break}return s.slice(0,d-f)}function vIe(s,a){if(s.indexOf(a[1])===-1)return-1;let l=s.length,d=0,f=0;for(;f<l;f++)if(s[f]==="\\")f++;else if(s[f]===a[0])d++;else if(s[f]===a[1]&&(d--,d<0))return f;return-1}function zne(s){s&&s.sanitize&&!s.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Vne(s,a){if(a<1)return"";let l="";for(;a>1;)a&1&&(l+=s),a>>=1,s+=s;return l+s}function jne(s,a,l,d){let f=a.href,g=a.title?Zs(a.title):null,b=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){d.state.inLink=!0;let _={type:"link",raw:l,href:f,title:g,text:b,tokens:d.inlineTokens(b)};return d.state.inLink=!1,_}return{type:"image",raw:l,href:f,title:g,text:Zs(b)}}function yIe(s,a){let l=s.match(/^(\s+)(?:```)/);if(l===null)return a;let d=l[1];return a.split(`
`).map(f=>{let g=f.match(/^\s+/);if(g===null)return f;let[b]=g;return b.length>=d.length?f.slice(d.length):f}).join(`
`)}function bIe(s){return s.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function Hne(s){let a="",l,d,f=s.length;for(l=0;l<f;l++)d=s.charCodeAt(l),Math.random()>.5&&(d="x"+d.toString(16)),a+="&#"+d+";";return a}function Zn(s,a,l){if(typeof s>"u"||s===null)throw new Error("marked(): input parameter is undefined or null");if(typeof s!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected");if(typeof a=="function"&&(l=a,a=null),a=qu({},Zn.defaults,a||{}),zne(a),l){let f=a.highlight,g;try{g=lv.lex(s,a)}catch(S){return l(S)}let b=function(S){let C;if(!S)try{a.walkTokens&&Zn.walkTokens(g,a.walkTokens),C=xf.parse(g,a)}catch(I){S=I}return a.highlight=f,S?l(S):l(null,C)};if(!f||f.length<3||(delete a.highlight,!g.length))return b();let _=0;Zn.walkTokens(g,function(S){S.type==="code"&&(_++,setTimeout(()=>{f(S.text,S.lang,function(C,I){if(C)return b(C);I!=null&&I!==S.text&&(S.text=I,S.escaped=!0),_--,_===0&&b()})},0))}),_===0&&b();return}function d(f){if(f.message+=`
Please report this to https://github.com/markedjs/marked.`,a.silent)return"<p>An error occurred:</p><pre>"+Zs(f.message+"",!0)+"</pre>";throw f}try{let f=lv.lex(s,a);if(a.walkTokens){if(a.async)return Promise.all(Zn.walkTokens(f,a.walkTokens)).then(()=>xf.parse(f,a)).catch(d);Zn.walkTokens(f,a.walkTokens)}return xf.parse(f,a)}catch(f){d(f)}}var av,Gne,Wne,$ne,Kne,Xne,tV,qne,Yne,Zne,Qne,$E,Jne,ere,tre,KE,XR,Un,dn,lv,qR,nV,rV,xf,_Ie=P(()=>{av=Nne(),Gne=/[&<>"']/,Wne=/[&<>"']/g,$ne=/[<>"']|&(?!#?\w+;)/,Kne=/[<>"']|&(?!#?\w+;)/g,Xne={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},tV=s=>Xne[s],qne=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,Yne=/(^|[^\[])\^/g,Zne=/[^\w:]/g,Qne=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,$E={},Jne=/^[^:]+:\/*[^/]*$/,ere=/^([^:]+:)[\s\S]*$/,tre=/^([^:]+:\/*[^/]*)[\s\S]*$/,KE={exec:function(){}},XR=class{constructor(s){this.options=s||av}space(s){let a=this.rules.block.newline.exec(s);if(a&&a[0].length>0)return{type:"space",raw:a[0]}}code(s){let a=this.rules.block.code.exec(s);if(a){let l=a[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:a[0],codeBlockStyle:"indented",text:this.options.pedantic?l:KR(l,`
`)}}}fences(s){let a=this.rules.block.fences.exec(s);if(a){let l=a[0],d=yIe(l,a[3]||"");return{type:"code",raw:l,lang:a[2]?a[2].trim():a[2],text:d}}}heading(s){let a=this.rules.block.heading.exec(s);if(a){let l=a[2].trim();if(/#$/.test(l)){let d=KR(l,"#");(this.options.pedantic||!d||/ $/.test(d))&&(l=d.trim())}return{type:"heading",raw:a[0],depth:a[1].length,text:l,tokens:this.lexer.inline(l)}}}hr(s){let a=this.rules.block.hr.exec(s);if(a)return{type:"hr",raw:a[0]}}blockquote(s){let a=this.rules.block.blockquote.exec(s);if(a){let l=a[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:a[0],tokens:this.lexer.blockTokens(l,[]),text:l}}}list(s){let a=this.rules.block.list.exec(s);if(a){let l,d,f,g,b,_,S,C,I,O,R,A,N=a[1].trim(),L=N.length>1,V={type:"list",raw:"",ordered:L,start:L?+N.slice(0,-1):"",loose:!1,items:[]};N=L?"\\d{1,9}\\".concat(N.slice(-1)):"\\".concat(N),this.options.pedantic&&(N=L?N:"[*+-]");let G=new RegExp("^( {0,3}".concat(N,")((?:[	 ][^\\n]*)?(?:\\n|$))"));for(;s&&(A=!1,!(!(a=G.exec(s))||this.rules.block.hr.test(s)));){if(l=a[0],s=s.substring(l.length),C=a[2].split(`
`,1)[0],I=s.split(`
`,1)[0],this.options.pedantic?(g=2,R=C.trimLeft()):(g=a[2].search(/[^ ]/),g=g>4?1:g,R=C.slice(g),g+=a[1].length),_=!1,!C&&/^ *$/.test(I)&&(l+=I+`
`,s=s.substring(I.length+1),A=!0),!A){let Y=new RegExp("^ {0,".concat(Math.min(3,g-1),"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))")),ie=new RegExp("^ {0,".concat(Math.min(3,g-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),re=new RegExp("^ {0,".concat(Math.min(3,g-1),"}(?:```|~~~)")),ce=new RegExp("^ {0,".concat(Math.min(3,g-1),"}#"));for(;s&&(O=s.split(`
`,1)[0],C=O,this.options.pedantic&&(C=C.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(re.test(C)||ce.test(C)||Y.test(C)||ie.test(s)));){if(C.search(/[^ ]/)>=g||!C.trim())R+=`
`+C.slice(g);else if(!_)R+=`
`+C;else break;!_&&!C.trim()&&(_=!0),l+=O+`
`,s=s.substring(O.length+1)}}V.loose||(S?V.loose=!0:/\n *\n *$/.test(l)&&(S=!0)),this.options.gfm&&(d=/^\[[ xX]\] /.exec(R),d&&(f=d[0]!=="[ ] ",R=R.replace(/^\[[ xX]\] +/,""))),V.items.push({type:"list_item",raw:l,task:!!d,checked:f,loose:!1,text:R}),V.raw+=l}V.items[V.items.length-1].raw=l.trimRight(),V.items[V.items.length-1].text=R.trimRight(),V.raw=V.raw.trimRight();let $=V.items.length;for(b=0;b<$;b++){this.lexer.state.top=!1,V.items[b].tokens=this.lexer.blockTokens(V.items[b].text,[]);let Y=V.items[b].tokens.filter(re=>re.type==="space"),ie=Y.every(re=>{let ce=re.raw.split(""),Pe=0;for(let ye of ce)if(ye===`
`&&(Pe+=1),Pe>1)return!0;return!1});!V.loose&&Y.length&&ie&&(V.loose=!0,V.items[b].loose=!0)}return V}}html(s){let a=this.rules.block.html.exec(s);if(a){let l={type:"html",raw:a[0],pre:!this.options.sanitizer&&(a[1]==="pre"||a[1]==="script"||a[1]==="style"),text:a[0]};if(this.options.sanitize){let d=this.options.sanitizer?this.options.sanitizer(a[0]):Zs(a[0]);l.type="paragraph",l.text=d,l.tokens=this.lexer.inline(d)}return l}}def(s){let a=this.rules.block.def.exec(s);if(a)return a[3]&&(a[3]=a[3].substring(1,a[3].length-1)),{type:"def",tag:a[1].toLowerCase().replace(/\s+/g," "),raw:a[0],href:a[2],title:a[3]}}table(s){let a=this.rules.block.table.exec(s);if(a){let l={type:"table",header:Une(a[1]).map(d=>({text:d})),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:a[3]&&a[3].trim()?a[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(l.header.length===l.align.length){l.raw=a[0];let d=l.align.length,f,g,b,_;for(f=0;f<d;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(d=l.rows.length,f=0;f<d;f++)l.rows[f]=Une(l.rows[f],l.header.length).map(S=>({text:S}));for(d=l.header.length,g=0;g<d;g++)l.header[g].tokens=this.lexer.inline(l.header[g].text);for(d=l.rows.length,g=0;g<d;g++)for(_=l.rows[g],b=0;b<_.length;b++)_[b].tokens=this.lexer.inline(_[b].text);return l}}}lheading(s){let a=this.rules.block.lheading.exec(s);if(a)return{type:"heading",raw:a[0],depth:a[2].charAt(0)==="="?1:2,text:a[1],tokens:this.lexer.inline(a[1])}}paragraph(s){let a=this.rules.block.paragraph.exec(s);if(a){let l=a[1].charAt(a[1].length-1)===`
`?a[1].slice(0,-1):a[1];return{type:"paragraph",raw:a[0],text:l,tokens:this.lexer.inline(l)}}}text(s){let a=this.rules.block.text.exec(s);if(a)return{type:"text",raw:a[0],text:a[0],tokens:this.lexer.inline(a[0])}}escape(s){let a=this.rules.inline.escape.exec(s);if(a)return{type:"escape",raw:a[0],text:Zs(a[1])}}tag(s){let a=this.rules.inline.tag.exec(s);if(a)return!this.lexer.state.inLink&&/^<a /i.test(a[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(a[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(a[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(a[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:a[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):Zs(a[0]):a[0]}}link(s){let a=this.rules.inline.link.exec(s);if(a){let l=a[2].trim();if(!this.options.pedantic&&/^</.test(l)){if(!/>$/.test(l))return;let g=KR(l.slice(0,-1),"\\");if((l.length-g.length)%2===0)return}else{let g=vIe(a[2],"()");if(g>-1){let b=(a[0].indexOf("!")===0?5:4)+a[1].length+g;a[2]=a[2].substring(0,g),a[0]=a[0].substring(0,b).trim(),a[3]=""}}let d=a[2],f="";if(this.options.pedantic){let g=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(d);g&&(d=g[1],f=g[3])}else f=a[3]?a[3].slice(1,-1):"";return d=d.trim(),/^</.test(d)&&(this.options.pedantic&&!/>$/.test(l)?d=d.slice(1):d=d.slice(1,-1)),jne(a,{href:d&&d.replace(this.rules.inline._escapes,"$1"),title:f&&f.replace(this.rules.inline._escapes,"$1")},a[0],this.lexer)}}reflink(s,a){let l;if((l=this.rules.inline.reflink.exec(s))||(l=this.rules.inline.nolink.exec(s))){let d=(l[2]||l[1]).replace(/\s+/g," ");if(d=a[d.toLowerCase()],!d||!d.href){let f=l[0].charAt(0);return{type:"text",raw:f,text:f}}return jne(l,d,l[0],this.lexer)}}emStrong(s,a,l=""){let d=this.rules.inline.emStrong.lDelim.exec(s);if(!d||d[3]&&l.match(/[\p{L}\p{N}]/u))return;let f=d[1]||d[2]||"";if(!f||f&&(l===""||this.rules.inline.punctuation.exec(l))){let g=d[0].length-1,b,_,S=g,C=0,I=d[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(I.lastIndex=0,a=a.slice(-1*s.length+g);(d=I.exec(a))!=null;){if(b=d[1]||d[2]||d[3]||d[4]||d[5]||d[6],!b)continue;if(_=b.length,d[3]||d[4]){S+=_;continue}else if((d[5]||d[6])&&g%3&&!((g+_)%3)){C+=_;continue}if(S-=_,S>0)continue;if(_=Math.min(_,_+S+C),Math.min(g,_)%2){let R=s.slice(1,g+d.index+_);return{type:"em",raw:s.slice(0,g+d.index+_+1),text:R,tokens:this.lexer.inlineTokens(R)}}let O=s.slice(2,g+d.index+_-1);return{type:"strong",raw:s.slice(0,g+d.index+_+1),text:O,tokens:this.lexer.inlineTokens(O)}}}}codespan(s){let a=this.rules.inline.code.exec(s);if(a){let l=a[2].replace(/\n/g," "),d=/[^ ]/.test(l),f=/^ /.test(l)&&/ $/.test(l);return d&&f&&(l=l.substring(1,l.length-1)),l=Zs(l,!0),{type:"codespan",raw:a[0],text:l}}}br(s){let a=this.rules.inline.br.exec(s);if(a)return{type:"br",raw:a[0]}}del(s){let a=this.rules.inline.del.exec(s);if(a)return{type:"del",raw:a[0],text:a[2],tokens:this.lexer.inlineTokens(a[2])}}autolink(s,a){let l=this.rules.inline.autolink.exec(s);if(l){let d,f;return l[2]==="@"?(d=Zs(this.options.mangle?a(l[1]):l[1]),f="mailto:"+d):(d=Zs(l[1]),f=d),{type:"link",raw:l[0],text:d,href:f,tokens:[{type:"text",raw:d,text:d}]}}}url(s,a){let l;if(l=this.rules.inline.url.exec(s)){let d,f;if(l[2]==="@")d=Zs(this.options.mangle?a(l[0]):l[0]),f="mailto:"+d;else{let g;do g=l[0],l[0]=this.rules.inline._backpedal.exec(l[0])[0];while(g!==l[0]);d=Zs(l[0]),l[1]==="www."?f="http://"+d:f=d}return{type:"link",raw:l[0],text:d,href:f,tokens:[{type:"text",raw:d,text:d}]}}}inlineText(s,a){let l=this.rules.inline.text.exec(s);if(l){let d;return this.lexer.state.inRawBlock?d=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):Zs(l[0]):l[0]:d=Zs(this.options.smartypants?a(l[0]):l[0]),{type:"text",raw:l[0],text:d}}}},Un={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:KE,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/},Un._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Un._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,Un.def=ui(Un.def).replace("label",Un._label).replace("title",Un._title).getRegex(),Un.bullet=/(?:[*+-]|\d{1,9}[.)])/,Un.listItemStart=ui(/^( *)(bull) */).replace("bull",Un.bullet).getRegex(),Un.list=ui(Un.list).replace(/bull/g,Un.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Un.def.source+")").getRegex(),Un._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Un._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,Un.html=ui(Un.html,"i").replace("comment",Un._comment).replace("tag",Un._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Un.paragraph=ui(Un._paragraph).replace("hr",Un.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Un._tag).getRegex(),Un.blockquote=ui(Un.blockquote).replace("paragraph",Un.paragraph).getRegex(),Un.normal=qu({},Un),Un.gfm=qu({},Un.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),Un.gfm.table=ui(Un.gfm.table).replace("hr",Un.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Un._tag).getRegex(),Un.gfm.paragraph=ui(Un._paragraph).replace("hr",Un.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Un.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Un._tag).getRegex(),Un.pedantic=qu({},Un.normal,{html:ui(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Un._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:KE,paragraph:ui(Un.normal._paragraph).replace("hr",Un.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Un.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),dn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:KE,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:KE,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/},dn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",dn.punctuation=ui(dn.punctuation).replace(/punctuation/g,dn._punctuation).getRegex(),dn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,dn.escapedEmSt=/\\\*|\\_/g,dn._comment=ui(Un._comment).replace("(?:-->|$)","-->").getRegex(),dn.emStrong.lDelim=ui(dn.emStrong.lDelim).replace(/punct/g,dn._punctuation).getRegex(),dn.emStrong.rDelimAst=ui(dn.emStrong.rDelimAst,"g").replace(/punct/g,dn._punctuation).getRegex(),dn.emStrong.rDelimUnd=ui(dn.emStrong.rDelimUnd,"g").replace(/punct/g,dn._punctuation).getRegex(),dn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,dn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,dn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,dn.autolink=ui(dn.autolink).replace("scheme",dn._scheme).replace("email",dn._email).getRegex(),dn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,dn.tag=ui(dn.tag).replace("comment",dn._comment).replace("attribute",dn._attribute).getRegex(),dn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,dn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,dn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,dn.link=ui(dn.link).replace("label",dn._label).replace("href",dn._href).replace("title",dn._title).getRegex(),dn.reflink=ui(dn.reflink).replace("label",dn._label).replace("ref",Un._label).getRegex(),dn.nolink=ui(dn.nolink).replace("ref",Un._label).getRegex(),dn.reflinkSearch=ui(dn.reflinkSearch,"g").replace("reflink",dn.reflink).replace("nolink",dn.nolink).getRegex(),dn.normal=qu({},dn),dn.pedantic=qu({},dn.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ui(/^!?\[(label)\]\((.*?)\)/).replace("label",dn._label).getRegex(),reflink:ui(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",dn._label).getRegex()}),dn.gfm=qu({},dn.normal,{escape:ui(dn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),dn.gfm.url=ui(dn.gfm.url,"i").replace("email",dn.gfm._extended_email).getRegex(),dn.breaks=qu({},dn.gfm,{br:ui(dn.br).replace("{2,}","*").getRegex(),text:ui(dn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),lv=class xW{constructor(a){this.tokens=[],this.tokens.links=Object.create(null),this.options=a||av,this.options.tokenizer=this.options.tokenizer||new XR,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let l={block:Un.normal,inline:dn.normal};this.options.pedantic?(l.block=Un.pedantic,l.inline=dn.pedantic):this.options.gfm&&(l.block=Un.gfm,this.options.breaks?l.inline=dn.breaks:l.inline=dn.gfm),this.tokenizer.rules=l}static get rules(){return{block:Un,inline:dn}}static lex(a,l){return new xW(l).lex(a)}static lexInline(a,l){return new xW(l).inlineTokens(a)}lex(a){a=a.replace(/\r\n|\r/g,`
`),this.blockTokens(a,this.tokens);let l;for(;l=this.inlineQueue.shift();)this.inlineTokens(l.src,l.tokens);return this.tokens}blockTokens(a,l=[]){this.options.pedantic?a=a.replace(/\t/g,"    ").replace(/^ +$/gm,""):a=a.replace(/^( *)(\t+)/gm,(_,S,C)=>S+"    ".repeat(C.length));let d,f,g,b;for(;a;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(_=>(d=_.call({lexer:this},a,l))?(a=a.substring(d.raw.length),l.push(d),!0):!1))){if(d=this.tokenizer.space(a)){a=a.substring(d.raw.length),d.raw.length===1&&l.length>0?l[l.length-1].raw+=`
`:l.push(d);continue}if(d=this.tokenizer.code(a)){a=a.substring(d.raw.length),f=l[l.length-1],f&&(f.type==="paragraph"||f.type==="text")?(f.raw+=`
`+d.raw,f.text+=`
`+d.text,this.inlineQueue[this.inlineQueue.length-1].src=f.text):l.push(d);continue}if(d=this.tokenizer.fences(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.heading(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.hr(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.blockquote(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.list(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.html(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.def(a)){a=a.substring(d.raw.length),f=l[l.length-1],f&&(f.type==="paragraph"||f.type==="text")?(f.raw+=`
`+d.raw,f.text+=`
`+d.raw,this.inlineQueue[this.inlineQueue.length-1].src=f.text):this.tokens.links[d.tag]||(this.tokens.links[d.tag]={href:d.href,title:d.title});continue}if(d=this.tokenizer.table(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.lheading(a)){a=a.substring(d.raw.length),l.push(d);continue}if(g=a,this.options.extensions&&this.options.extensions.startBlock){let _=1/0,S=a.slice(1),C;this.options.extensions.startBlock.forEach(function(I){C=I.call({lexer:this},S),typeof C=="number"&&C>=0&&(_=Math.min(_,C))}),_<1/0&&_>=0&&(g=a.substring(0,_+1))}if(this.state.top&&(d=this.tokenizer.paragraph(g))){f=l[l.length-1],b&&f.type==="paragraph"?(f.raw+=`
`+d.raw,f.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=f.text):l.push(d),b=g.length!==a.length,a=a.substring(d.raw.length);continue}if(d=this.tokenizer.text(a)){a=a.substring(d.raw.length),f=l[l.length-1],f&&f.type==="text"?(f.raw+=`
`+d.raw,f.text+=`
`+d.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=f.text):l.push(d);continue}if(a){let _="Infinite loop on byte: "+a.charCodeAt(0);if(this.options.silent){console.error(_);break}else throw new Error(_)}}return this.state.top=!0,l}inline(a,l=[]){return this.inlineQueue.push({src:a,tokens:l}),l}inlineTokens(a,l=[]){let d,f,g,b=a,_,S,C;if(this.tokens.links){let I=Object.keys(this.tokens.links);if(I.length>0)for(;(_=this.tokenizer.rules.inline.reflinkSearch.exec(b))!=null;)I.includes(_[0].slice(_[0].lastIndexOf("[")+1,-1))&&(b=b.slice(0,_.index)+"["+Vne("a",_[0].length-2)+"]"+b.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(_=this.tokenizer.rules.inline.blockSkip.exec(b))!=null;)b=b.slice(0,_.index)+"["+Vne("a",_[0].length-2)+"]"+b.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(_=this.tokenizer.rules.inline.escapedEmSt.exec(b))!=null;)b=b.slice(0,_.index)+"++"+b.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;a;)if(S||(C=""),S=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(I=>(d=I.call({lexer:this},a,l))?(a=a.substring(d.raw.length),l.push(d),!0):!1))){if(d=this.tokenizer.escape(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.tag(a)){a=a.substring(d.raw.length),f=l[l.length-1],f&&d.type==="text"&&f.type==="text"?(f.raw+=d.raw,f.text+=d.text):l.push(d);continue}if(d=this.tokenizer.link(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.reflink(a,this.tokens.links)){a=a.substring(d.raw.length),f=l[l.length-1],f&&d.type==="text"&&f.type==="text"?(f.raw+=d.raw,f.text+=d.text):l.push(d);continue}if(d=this.tokenizer.emStrong(a,b,C)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.codespan(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.br(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.del(a)){a=a.substring(d.raw.length),l.push(d);continue}if(d=this.tokenizer.autolink(a,Hne)){a=a.substring(d.raw.length),l.push(d);continue}if(!this.state.inLink&&(d=this.tokenizer.url(a,Hne))){a=a.substring(d.raw.length),l.push(d);continue}if(g=a,this.options.extensions&&this.options.extensions.startInline){let I=1/0,O=a.slice(1),R;this.options.extensions.startInline.forEach(function(A){R=A.call({lexer:this},O),typeof R=="number"&&R>=0&&(I=Math.min(I,R))}),I<1/0&&I>=0&&(g=a.substring(0,I+1))}if(d=this.tokenizer.inlineText(g,bIe)){a=a.substring(d.raw.length),d.raw.slice(-1)!=="_"&&(C=d.raw.slice(-1)),S=!0,f=l[l.length-1],f&&f.type==="text"?(f.raw+=d.raw,f.text+=d.text):l.push(d);continue}if(a){let I="Infinite loop on byte: "+a.charCodeAt(0);if(this.options.silent){console.error(I);break}else throw new Error(I)}}return l}},qR=class{constructor(s){this.options=s||av}code(s,a,l){let d=(a||"").match(/\S*/)[0];if(this.options.highlight){let f=this.options.highlight(s,d);f!=null&&f!==s&&(l=!0,s=f)}return s=s.replace(/\n$/,"")+`
`,d?'<pre><code class="'+this.options.langPrefix+Zs(d,!0)+'">'+(l?s:Zs(s,!0))+`</code></pre>
`:"<pre><code>"+(l?s:Zs(s,!0))+`</code></pre>
`}blockquote(s){return`<blockquote>
`.concat(s,`</blockquote>
`)}html(s){return s}heading(s,a,l,d){if(this.options.headerIds){let f=this.options.headerPrefix+d.slug(l);return"<h".concat(a,' id="').concat(f,'">').concat(s,"</h").concat(a,`>
`)}return"<h".concat(a,">").concat(s,"</h").concat(a,`>
`)}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(s,a,l){let d=a?"ol":"ul",f=a&&l!==1?' start="'+l+'"':"";return"<"+d+f+`>
`+s+"</"+d+`>
`}listitem(s){return"<li>".concat(s,`</li>
`)}checkbox(s){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(s){return"<p>".concat(s,`</p>
`)}table(s,a){return a&&(a="<tbody>".concat(a,"</tbody>")),`<table>
<thead>
`+s+`</thead>
`+a+`</table>
`}tablerow(s){return`<tr>
`.concat(s,`</tr>
`)}tablecell(s,a){let l=a.header?"th":"td";return(a.align?"<".concat(l,' align="').concat(a.align,'">'):"<".concat(l,">"))+s+"</".concat(l,`>
`)}strong(s){return"<strong>".concat(s,"</strong>")}em(s){return"<em>".concat(s,"</em>")}codespan(s){return"<code>".concat(s,"</code>")}br(){return this.options.xhtml?"<br/>":"<br>"}del(s){return"<del>".concat(s,"</del>")}link(s,a,l){if(s=Bne(this.options.sanitize,this.options.baseUrl,s),s===null)return l;let d='<a href="'+Zs(s)+'"';return a&&(d+=' title="'+a+'"'),d+=">"+l+"</a>",d}image(s,a,l){if(s=Bne(this.options.sanitize,this.options.baseUrl,s),s===null)return l;let d='<img src="'.concat(s,'" alt="').concat(l,'"');return a&&(d+=' title="'.concat(a,'"')),d+=this.options.xhtml?"/>":">",d}text(s){return s}},nV=class{strong(s){return s}em(s){return s}codespan(s){return s}del(s){return s}html(s){return s}text(s){return s}link(s,a,l){return""+l}image(s,a,l){return""+l}br(){return""}},rV=class{constructor(){this.seen={}}serialize(s){return s.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(s,a){let l=s,d=0;if(this.seen.hasOwnProperty(l)){d=this.seen[s];do d++,l=s+"-"+d;while(this.seen.hasOwnProperty(l))}return a||(this.seen[s]=d,this.seen[l]=0),l}slug(s,a={}){let l=this.serialize(s);return this.getNextSafeSlug(l,a.dryrun)}},xf=class SW{constructor(a){this.options=a||av,this.options.renderer=this.options.renderer||new qR,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new nV,this.slugger=new rV}static parse(a,l){return new SW(l).parse(a)}static parseInline(a,l){return new SW(l).parseInline(a)}parse(a,l=!0){let d="",f,g,b,_,S,C,I,O,R,A,N,L,V,G,$,Y,ie,re,ce,Pe=a.length;for(f=0;f<Pe;f++){if(A=a[f],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[A.type]&&(ce=this.options.extensions.renderers[A.type].call({parser:this},A),ce!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(A.type))){d+=ce||"";continue}switch(A.type){case"space":continue;case"hr":{d+=this.renderer.hr();continue}case"heading":{d+=this.renderer.heading(this.parseInline(A.tokens),A.depth,Fne(this.parseInline(A.tokens,this.textRenderer)),this.slugger);continue}case"code":{d+=this.renderer.code(A.text,A.lang,A.escaped);continue}case"table":{for(O="",I="",_=A.header.length,g=0;g<_;g++)I+=this.renderer.tablecell(this.parseInline(A.header[g].tokens),{header:!0,align:A.align[g]});for(O+=this.renderer.tablerow(I),R="",_=A.rows.length,g=0;g<_;g++){for(C=A.rows[g],I="",S=C.length,b=0;b<S;b++)I+=this.renderer.tablecell(this.parseInline(C[b].tokens),{header:!1,align:A.align[b]});R+=this.renderer.tablerow(I)}d+=this.renderer.table(O,R);continue}case"blockquote":{R=this.parse(A.tokens),d+=this.renderer.blockquote(R);continue}case"list":{for(N=A.ordered,L=A.start,V=A.loose,_=A.items.length,R="",g=0;g<_;g++)$=A.items[g],Y=$.checked,ie=$.task,G="",$.task&&(re=this.renderer.checkbox(Y),V?$.tokens.length>0&&$.tokens[0].type==="paragraph"?($.tokens[0].text=re+" "+$.tokens[0].text,$.tokens[0].tokens&&$.tokens[0].tokens.length>0&&$.tokens[0].tokens[0].type==="text"&&($.tokens[0].tokens[0].text=re+" "+$.tokens[0].tokens[0].text)):$.tokens.unshift({type:"text",text:re}):G+=re),G+=this.parse($.tokens,V),R+=this.renderer.listitem(G,ie,Y);d+=this.renderer.list(R,N,L);continue}case"html":{d+=this.renderer.html(A.text);continue}case"paragraph":{d+=this.renderer.paragraph(this.parseInline(A.tokens));continue}case"text":{for(R=A.tokens?this.parseInline(A.tokens):A.text;f+1<Pe&&a[f+1].type==="text";)A=a[++f],R+=`
`+(A.tokens?this.parseInline(A.tokens):A.text);d+=l?this.renderer.paragraph(R):R;continue}default:{let ye='Token with "'+A.type+'" type was not found.';if(this.options.silent){console.error(ye);return}else throw new Error(ye)}}}return d}parseInline(a,l){l=l||this.renderer;let d="",f,g,b,_=a.length;for(f=0;f<_;f++){if(g=a[f],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[g.type]&&(b=this.options.extensions.renderers[g.type].call({parser:this},g),b!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(g.type))){d+=b||"";continue}switch(g.type){case"escape":{d+=l.text(g.text);break}case"html":{d+=l.html(g.text);break}case"link":{d+=l.link(g.href,g.title,this.parseInline(g.tokens,l));break}case"image":{d+=l.image(g.href,g.title,g.text);break}case"strong":{d+=l.strong(this.parseInline(g.tokens,l));break}case"em":{d+=l.em(this.parseInline(g.tokens,l));break}case"codespan":{d+=l.codespan(g.text);break}case"br":{d+=l.br();break}case"del":{d+=l.del(this.parseInline(g.tokens,l));break}case"text":{d+=l.text(g.text);break}default:{let S='Token with "'+g.type+'" type was not found.';if(this.options.silent){console.error(S);return}else throw new Error(S)}}}return d}},Zn.options=Zn.setOptions=function(s){return qu(Zn.defaults,s),mIe(Zn.defaults),Zn},Zn.getDefaults=Nne,Zn.defaults=av,Zn.use=function(...s){let a=qu({},...s),l=Zn.defaults.extensions||{renderers:{},childTokens:{}},d;s.forEach(f=>{if(f.extensions&&(d=!0,f.extensions.forEach(g=>{if(!g.name)throw new Error("extension name required");if(g.renderer){let b=l.renderers?l.renderers[g.name]:null;b?l.renderers[g.name]=function(..._){let S=g.renderer.apply(this,_);return S===!1&&(S=b.apply(this,_)),S}:l.renderers[g.name]=g.renderer}if(g.tokenizer){if(!g.level||g.level!=="block"&&g.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");l[g.level]?l[g.level].unshift(g.tokenizer):l[g.level]=[g.tokenizer],g.start&&(g.level==="block"?l.startBlock?l.startBlock.push(g.start):l.startBlock=[g.start]:g.level==="inline"&&(l.startInline?l.startInline.push(g.start):l.startInline=[g.start]))}g.childTokens&&(l.childTokens[g.name]=g.childTokens)})),f.renderer){let g=Zn.defaults.renderer||new qR;for(let b in f.renderer){let _=g[b];g[b]=(...S)=>{let C=f.renderer[b].apply(g,S);return C===!1&&(C=_.apply(g,S)),C}}a.renderer=g}if(f.tokenizer){let g=Zn.defaults.tokenizer||new XR;for(let b in f.tokenizer){let _=g[b];g[b]=(...S)=>{let C=f.tokenizer[b].apply(g,S);return C===!1&&(C=_.apply(g,S)),C}}a.tokenizer=g}if(f.walkTokens){let g=Zn.defaults.walkTokens;a.walkTokens=function(b){let _=[];return _.push(f.walkTokens.call(this,b)),g&&(_=_.concat(g.call(this,b))),_}}d&&(a.extensions=l),Zn.setOptions(a)})},Zn.walkTokens=function(s,a){let l=[];for(let d of s)switch(l=l.concat(a.call(Zn,d)),d.type){case"table":{for(let f of d.header)l=l.concat(Zn.walkTokens(f.tokens,a));for(let f of d.rows)for(let g of f)l=l.concat(Zn.walkTokens(g.tokens,a));break}case"list":{l=l.concat(Zn.walkTokens(d.items,a));break}default:Zn.defaults.extensions&&Zn.defaults.extensions.childTokens&&Zn.defaults.extensions.childTokens[d.type]?Zn.defaults.extensions.childTokens[d.type].forEach(function(f){l=l.concat(Zn.walkTokens(d[f],a))}):d.tokens&&(l=l.concat(Zn.walkTokens(d.tokens,a)))}return l},Zn.parseInline=function(s,a){if(typeof s>"u"||s===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof s!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected");a=qu({},Zn.defaults,a||{}),zne(a);try{let l=lv.lexInline(s,a);return a.walkTokens&&Zn.walkTokens(l,a.walkTokens),xf.parseInline(l,a)}catch(l){if(l.message+=`
Please report this to https://github.com/markedjs/marked.`,a.silent)return"<p>An error occurred:</p><pre>"+Zs(l.message+"",!0)+"</pre>";throw l}},Zn.Parser=xf,Zn.parser=xf.parse,Zn.Renderer=qR,Zn.TextRenderer=nV,Zn.Lexer=lv,Zn.lexer=lv.lex,Zn.Tokenizer=XR,Zn.Slugger=rV,Zn.parse=Zn,Zn.options,Zn.setOptions,Zn.use,Zn.walkTokens,Zn.parseInline,xf.parse,lv.lex}),nre,rre,iV,ire=P(()=>{Ve(),HR(),rre=le(Xb)(nre||(nre=J([`
  padding: 6px;
`]))),iV=rre}),fs,YR,XE,ZR,sre,ore,are,sV,lre,ure,cre,oV,dre,hre,pre,fre,mre,qE,YE,gre,vre,yre,bre,_re,wre,xre,Sre,Ere,Cre,Pre,Tre,aV,ZE=P(()=>{fs=X(Ne()),fIe(),Ve(),Dr(),Sn(),Te(),_Ie(),jE(),ire(),YR=({title:s,message:a})=>"".concat(s," ").concat(a),XE=(()=>{let s=new Map;return{add:a=>{let l=YR(a);s.has(l)?s.set(l,s.get(l)+1):s.set(l,1)},delete:a=>{let l=YR(a);s.has(l)&&s.get(l)>1?s.set(l,s.get(l)-1):s.delete(l)},clear:()=>{s.clear()},check:a=>s.has(YR(a))}})(),ZR=(()=>{let s=new Map;return{add:a=>{s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)},delete:a=>{s.has(a)&&s.get(a)>1?s.set(a,s.get(a)-1):s.delete(a)},clear:()=>{s.clear()},check:a=>s.has(a),get types(){return Array.of(...s.keys())}}})(),ore=le.div(sre||(sre=J([`
  width: 100%;
  border-radius: 4px;
  display: flex;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),kr),sV=le.div(are||(are=J([`
  font-size: 14px;
  font-weight: bold;
  color: #fff;
`]))),ure=le.div(lre||(lre=J([`
  flex: 1;
  flex-direction: column;
  width: 0;
  display: flex;
  padding: 16px 0;
  gap: 12px;
`]))),oV=le.div(cre||(cre=J([`
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;

  a {
    color: rgba(255, 255, 255, 0.9);
  }

  em {
    font-style: italic;
  }

  strong {
    font-weight: bold;
    color: #d5d5d5;
  }

  p {
    margin-bottom: 8px;
  }

  code {
    font-family: monospace;
    background: rgba(0, 0, 0, 0.3);
    padding: 1px 1px 2px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    white-space: pre-wrap;
  }

  pre > code {
    white-space: pre;
    display: block;
    overflow: auto;
    padding: 4px;
  }

  pre {
    white-space: pre-wrap;
    margin-bottom: 8px;
  }
`]))),hre=le.button(dre||(dre=J([`
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding-left: 12px;
  padding-right: 12px;
  border-left: 1px solid rgba(255, 255, 255, 0.05);

  &:hover {
    background: rgba(255, 255, 255, 0.05);
  }
`]))),pre={info:"#3b82f6",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},mre=le.div(fre||(fre=J([`
  display: flex;
  justify-content: center;
  margin-left: 12px;
  padding-top: 21px;

  ::before {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 999999px;
    background-color: `,`;
  }
`])),({type:s})=>pre[s]),qE=s=>(a,l,d=[],f=!1)=>{(f||!XE.check({title:a,message:l}))&&(XE.add({title:a,message:l}),ZR.add(s),$R.custom(g=>fs.default.createElement(ore,null,fs.default.createElement(mre,{type:s}),fs.default.createElement(ure,null,fs.default.createElement(sV,null,a),fs.default.createElement(oV,{dangerouslySetInnerHTML:{__html:Zn.parse(l)}}),d.length>0&&fs.default.createElement(oV,null,fs.default.createElement("span",null,"Docs:"," ",d.map((b,_)=>fs.default.createElement(fs.Fragment,{key:_},_>0&&", ",fs.default.createElement("a",{target:"_blank",href:b.url},b.title)))))),fs.default.createElement(hre,{onClick:()=>{$R.remove(g.id),XE.delete({title:a,message:l}),ZR.delete(s)}},"Close")),{duration:1/0}))},YE={warning:qE("warning"),success:qE("success"),info:qE("info"),error:qE("error")},vre=le.div(gre||(gre=J([`
  display: flex;
  justify-content: `,`;
  gap: 12px;
`])),({align:s})=>s==="center"?"center":"flex-end"),bre=le.button(yre||(yre=J([`
  position: relative;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border: none;
  padding: 12px;
  color: #fff;
  overflow: hidden;

  ::before {
    content: '';
    position: absolute;
    inset: 0;
  }

  :hover::before {
    background: `,`;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),kr,({danger:s})=>s?"rgba(255, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"),wre=le.div(_re||(_re=J([`
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: fixed;
  right: 92px;
  top: 50px;
  width: 500px;
  height: 85vh;
  min-height: 400px;
`]))),Sre=le.div(xre||(xre=J([`
  overflow: hidden;
  pointer-events: auto;
  border-radius: 4px;

  & > div {
    display: flex;
    flex-direction: column-reverse;
    gap: 8px;
    overflow: scroll;
    height: 100%;
  }
`]))),Cre=le.div(Ere||(Ere=J([`
  width: fit-content;
  padding: 8px;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;
`]))),Pre=()=>{let{hasNotifications:s}=aV();return Kb({enabled:!s},()=>fs.default.createElement(iV,null,fs.default.createElement(Cre,null,fs.default.createElement(sV,null,"No notifications"),"Notifications will appear here when you get them.")))},Tre=()=>{var s;let{toasts:a,handlers:l}=eV(),{startPause:d,endPause:f}=l,g=(s=rr(ue().atomP.ahistoric.pinNotifications))!=null?s:!1;return fs.default.createElement(wre,null,g?a.length>0&&fs.default.createElement(Sre,{onMouseEnter:d,onMouseLeave:f},fs.default.createElement("div",null,a.map(b=>fs.default.createElement("div",{key:b.id},b.message(b))))):null,fs.default.createElement(vre,{align:"side"},g&&a.length>0&&fs.default.createElement(bre,{onClick:()=>{ZR.clear(),XE.clear(),$R.remove()},danger:!0},"Clear")))},aV=()=>{let{toasts:s}=eV();return{hasNotifications:s.length>0}}});function lV(s,a){var l;let d=Object.values((l=(0,Mre.val)(s.pointers.historic.sheetsById))!=null?l:{}),f=d.flatMap(b=>{var _;return Object.values((_=b==null?void 0:b.staticOverrides.byObject)!=null?_:{})}).flatMap(b=>Object.values(b??{})),g=[...d.flatMap(b=>{var _,S;return Object.values((S=(_=b==null?void 0:b.sequence)==null?void 0:_.tracksByObject)!=null?S:{})}).flatMap(b=>{var _;return Object.values((_=b==null?void 0:b.trackData)!=null?_:{})}).flatMap(b=>b==null?void 0:b.keyframes).map(b=>b==null?void 0:b.value)];return f.forEach(b=>{st(b,_=>{g.push(_)},[])}),g.filter(b=>(b==null?void 0:b.type)&&(a?(b==null?void 0:b.type)==a:typeof(b==null?void 0:b.type)=="string")).map(b=>b.id).filter((b,_,S)=>b!==null&&b!==""&&S.indexOf(b)===_)}var Mre,kre=P(()=>{Mre=Nt,qe()});function Are(s,a){let l=new File([s],a),d=URL.createObjectURL(l),f=Object.assign(document.createElement("a"),{href:d,target:"_blank",rel:"noopener"});f.setAttribute("download",a),f.click(),setTimeout(()=>{URL.revokeObjectURL(d)},4e4)}var ul,Ire,Rre,Dre,Ore,Lre,Nre,Fre,Bre,Ure,wIe=P(()=>{Te(),Qc(),Yc(),ul=X(Ne()),Ve(),nne(),hIe(),Ire=X(pIe()),ZE(),kre(),Dre=le.div(Rre||(Rre=J([""]))),Lre=le.div(Ore||(Ore=J([`
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
`]))),Fre=le(Zc)(Nre||(Nre=J([`
  display flex;
  flex-direction: column;
  gap: 1em;
  width: 280px;
  padding: 1em;
`]))),Bre=({projects:s})=>{let a=s[0],l=a.address.projectId,d=l.replace(/[^\w\d'_\-]+/g," ").trim(),f="".concat(d,".theatre-project-state.json"),[g,b]=(0,ul.useState)(!1),_=(0,ul.useCallback)(()=>ne(void 0,null,function*(){var C,I;let O=lV(a),R=new Map;try{yield Promise.all(O.map(N=>ne(void 0,null,function*(){let L=a.assetStorage.getAssetUrl(N),V=yield fetch(L);V.ok&&R.set(N,yield V.blob())})))}catch{YE.error("Failed to access assets","Export aborted. Failed to access assets at ".concat((I=(C=a.config.assets)==null?void 0:C.baseUrl)!=null?I:"/",". This is likely due to a CORS issue."));return}if(R.size>0){let N=new Ire.default;for(let[V,G]of R)N.file(V,G);let L=yield N.generateAsync({type:"blob"});Are(L,"".concat(d,".assets.zip"))}let A=JSON.stringify(ue().createContentOfSaveFile(a.address.projectId),null,2);Are(A,f),b(!0),setTimeout(()=>{b(!1)},2e3)}),[a,f]),S=qc({debugName:"ProjectDetails",pointerDistanceThreshold:50},()=>ul.default.createElement(Fre,null,ul.default.createElement("p",null,"This will create a JSON file with the state of your project. You can commit this file to your git repo and include it in your production bundle."),ul.default.createElement("p",null,"If your project uses assets, this will also create a zip file with all the assets that you can unpack in your public folder."),ul.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Here is a quick guide on how to export to production.")));return ul.default.createElement(ul.default.Fragment,null,S.node,ul.default.createElement(Dre,null,ul.default.createElement(Cne,{projectId:l}),ul.default.createElement(Lre,null,ul.default.createElement(VR,{onMouseEnter:C=>S.open(C,C.target),onClick:g?void 0:_,disabled:g},g?"(Exported)":"Export ".concat(l," to JSON")))))},Ure=Bre}),Sf,zre,Vre,jre,Hre,Gre,Wre,$re,Kre,Xre,qre,xIe=P(()=>{Sf=X(Ne()),Ve(),hE(),Vre=le.div(zre||(zre=J([`
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 24px;
`]))),Hre=le.div(jre||(jre=J([`
  display: flex;
  flex-direction: column;
  gap: 11px;
  color: rgba(255, 255, 255, 0.9);
`]))),Wre=le.div(Gre||(Gre=J([`
  color: rgba(145, 145, 145, 0.8);
`]))),Kre=le.a($re||($re=J([`
  color: #919191;
  font-size: 10px;
  text-decoration-color: #40434a;
  text-underline-offset: 3px;
`]))),Xre=()=>Sf.default.createElement(Vre,null,Sf.default.createElement(Hre,null,Sf.default.createElement(Wre,null,Sf.default.createElement(P4,null)),Sf.default.createElement("div",null,"Please select an object from the ",Sf.default.createElement("u",null,"Outline Menu")," to see its properties.")),Sf.default.createElement(Kre,{href:"https://www.theatrejs.com/docs/latest/manual/objects",target:"_blank"},"Learn more about Objects")),qre=Xre});function Yre(){let[s,a]=(0,uV.useState)(!1),l=(0,uV.useMemo)(()=>{let d=new Set;return()=>{let f=()=>{d.delete(f),a(d.size>0)};return d.add(f),a(!0),f}},[]);return[s,l]}var uV,Zre=P(()=>{uV=X(Ne())}),hi,Yb,Qre,Jre,QR,eie,cV,tie,dV,nie,hV,QE,rie,iie,JR,uv,pV=P(()=>{pf(),Sn(),hi=X(Ne()),Ve(),Jt(),fh(),Dr(),uIe(),wIe(),Te(),jY(),Yb=Nt,xIe(),Zre(),sv(),Qre="32px",QR=le.div(Jre||(Jre=J([`
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  position: fixed;
  right: 8px;
  top: 50px;
  // Temporary, see comment about CSS grid in SingleRowPropEditor.
  width: 280px;
  height: fit-content;
  z-index: `,`;

  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border-radius: 2px;

  display: `,`;

  &:hover {
    display: block;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),kr,Ib.propsPanel,({pin:s})=>s?"block":"none"),cV=le.div(eie||(eie=J([`
  margin: 0 10px;
  color: #919191;
  font-weight: 500;
  font-size: 10px;
  user-select: none;
  `,`;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`])),kr),dV=le.div(tie||(tie=J([`
  height: `,`;
  display: flex;
  align-items: center;
`])),Qre),hV=le.div(nie||(nie=J([`
  `,`;
  max-height: calc(100vh - 100px);
  overflow-y: scroll;
  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
  padding: 0;
  user-select: none;

  /* Set the font-size for input values in the detail panel */
  font-size: 12px;
`])),kr),QE=(0,hi.createContext)([!1,()=>()=>{}]),rie=s=>{let a=rr(ue().atomP.ahistoric.pinDetails)!==!1,l=VY("right");(0,hi.useLayoutEffect)(()=>{JR.set(l)},[l]),(0,hi.useEffect)(()=>()=>{uv.set(!1),JR.set(!1)},[]);let[d]=(0,hi.useContext)(QE),f=a||l||d,[g,b]=(0,hi.useState)(null);return Cee(g),Yn(()=>{let _=hf(),S=_.find(Et);if(S)return hi.default.createElement(QR,{"data-testid":"DetailPanel-Object",pin:f,ref:b,onMouseEnter:()=>{uv.set(!0)},onMouseLeave:()=>{uv.set(!1)}},hi.default.createElement(dV,null,hi.default.createElement(cV,{title:"".concat(S.sheet.address.sheetId,": ").concat(S.sheet.address.sheetInstanceId," > ").concat(S.address.objectKey)},hi.default.createElement(df,null,S.sheet.address.sheetId," "),hi.default.createElement(dE,null,":"," "),hi.default.createElement(df,null,S.sheet.address.sheetInstanceId," "),hi.default.createElement(dE,null," → "),hi.default.createElement(df,null,S.address.objectKey))),hi.default.createElement(hV,null,hi.default.createElement(Jte,{objects:[S]})));let C=_.find(Pt);return C?hi.default.createElement(QR,{pin:f},hi.default.createElement(dV,null,hi.default.createElement(cV,{title:"".concat(C.address.projectId)},hi.default.createElement(df,null,C.address.projectId," "))),hi.default.createElement(hV,null,hi.default.createElement(Ure,{projects:[C]}))):hi.default.createElement(QR,{pin:f,onMouseEnter:()=>{uv.set(!0)},onMouseLeave:()=>{uv.set(!1)}},hi.default.createElement(qre,null))},[f])},iie=()=>{let s=Yre();return hi.default.createElement(QE.Provider,{value:s},hi.default.createElement(rie,null))},JR=new Yb.Atom(!1),uv=new Yb.Atom(!1),(0,Yb.prism)(()=>{let s=(0,Yb.val)(uv.prism),a=(0,Yb.val)(JR.prism);return s||a})}),fV,eD,tD,mV,Zb,sie,gV,Qb=P(()=>{fV=Nt,Sn(),Te(),Zre(),eD=X(Ne()),yz(),tD=(s,a)=>{let l=s.left/a.width,d=(s.left+s.width)/a.width,f=s.top/a.height,g=(s.height+s.top)/a.height;return{edges:{left:l<=.5?{from:"screenLeft",distance:l}:{from:"screenRight",distance:1-l},right:d<=.5?{from:"screenLeft",distance:d}:{from:"screenRight",distance:1-d},top:f<=.5?{from:"screenTop",distance:f}:{from:"screenBottom",distance:1-f},bottom:g<=.5?{from:"screenTop",distance:g}:{from:"screenBottom",distance:1-g}}}},mV=eD.default.createContext(null),Zb=()=>(0,eD.useContext)(mV),sie=({panelId:s,children:a,defaultPosition:l,minDims:d})=>{let f=_R(800,200),[g,b]=Yre(),{stuff:_}=Yn(()=>{var S;let{edges:C}=(S=(0,fV.val)(ue().atomP.historic.panelPositions[s]))!=null?S:l,I=Math.floor(f.width*(C.left.from==="screenLeft"?C.left.distance:1-C.left.distance)),O=Math.floor(f.width*(C.right.from==="screenLeft"?C.right.distance:1-C.right.distance)),R=Math.floor(f.height*(C.top.from==="screenTop"?C.top.distance:1-C.top.distance)),A=Math.floor(f.height*(C.bottom.from==="screenTop"?C.bottom.distance:1-C.bottom.distance)),N=Math.max(O-I,d.width),L=Math.max(A-R,d.height);return{stuff:{dims:fV.prism.memo("dims",()=>({width:N,left:I,top:R,height:L}),[N,I,R,L]),panelId:s,minDims:d,boundsHighlighted:g,addBoundsHighlightLock:b}}},[s,f,g,b]);return eD.default.createElement(mV.Provider,{value:_},a)},gV=sie}),JE,oie,aie,lie,vV,uie=P(()=>{Rr(),Te(),Es(),JE=X(Ne()),Ve(),Qb(),ll(),di(),fh(),aie=le.div(oie||(oie=J([`
  cursor: move;
`]))),lie=s=>{let a=Zb(),l=(0,JE.useRef)(a);l.current=a;let[d,f]=wr(null),g=(0,JE.useMemo)(()=>({debugName:"PanelDragZone",lockCursorTo:"move",onDragStart(){let C=l.current,I,O=a.addBoundsHighlightLock();return{onDrag(R,A){let N=B(F({},C.dims),{top:_i(C.dims.top+A,0,window.innerHeight-Wc),left:_i(C.dims.left+R,-C.dims.width+Wc,window.innerWidth-Wc)}),L=tD(N,{width:window.innerWidth,height:window.innerHeight});I==null||I.discard(),I=ue().tempTransaction(({stateEditors:V})=>{V.studio.historic.panelPositions.setPanelPosition({position:L,panelId:C.panelId})})},onDragEnd(R){O(),R?I==null||I.commit():I==null||I.discard()}}}}),[]),[b]=Bi(f,g);Kl(b,"dragging","move");let[_,S]=(0,JE.useMemo)(()=>{let C;return[function(){if(C){let I=C;C=void 0,I()}C=a.addBoundsHighlightLock()},function(){if(C){let I=C;C=void 0,I()}}]},[]);return JE.default.createElement(aie,B(F({},s),{ref:d,onMouseEnter:_,onMouseLeave:S}))},vV=lie}),nD,cie,yV,die,bV,hie,_V,pie,fie,mie,gie,vie,wV,yie,bie,_ie,wie,xie,eC,Sie,Eie,Cie,Pie,Tie,Mie,kie,Aie,Iie,xV,Rie,Sh,SIe=P(()=>{Rr(),Te(),Es(),al(),nD=X(Ne()),Ve(),Qb(),Dr(),di(),fh(),yV=le.div(cie||(cie=J([`
  position: absolute;
  `,`;
  &:after {
    position: absolute;
    inset: -5px;
    display: block;
    content: ' ';
  }

  opacity: 0;
  background-color: #478698;

  &.isHighlighted {
    opacity: 0.7;
  }

  &.isDragging {
    opacity: 1;
    /* background-color: `,`; */
  }

  &:hover {
    opacity: 1;
  }
`])),kr,Sb(.2,"#478698")),bV=le(yV)(die||(die=J([`
  /**
  The horizintal/vertical resize handles have z-index:-1 and are offset 1px outside of the panel
  to make sure they don't occlude any element that pops out of the panel (like the Playhead in SequenceEditorPanel).

  This means that panels will always need an extra 1px margin for their resize handles to be visible, but that's not a problem
  that we have to deal with right now (if it is at all a problem).
  
   */
  z-index: -1;
`]))),_V=le(bV)(hie||(hie=J([`
  left: 0px;
  right: 0px;
  height: 1px;
`]))),fie=le(_V)(pie||(pie=J([`
  top: -1px;
`]))),gie=le(_V)(mie||(mie=J([`
  bottom: -1px;
`]))),wV=le(bV)(vie||(vie=J([`
  z-index: -1;
  top: -1px;
  bottom: -1px;
  width: 1px;
`]))),bie=le(wV)(yie||(yie=J([`
  left: -1px;
`]))),wie=le(wV)(_ie||(_ie=J([`
  right: -1px;
`]))),eC=le(yV)(xie||(xie=J([`
  // The angles have z-index: 10 to make sure they _do_ occlude other elements in the panel.
  z-index: 10;
  width: 8px;
  height: 8px;
`]))),Eie=le(eC)(Sie||(Sie=J([`
  top: 0;
  left: 0;
`]))),Pie=le(eC)(Cie||(Cie=J([`
  top: 0;
  right: 0;
`]))),Mie=le(eC)(Tie||(Tie=J([`
  bottom: 0;
  left: 0;
`]))),Aie=le(eC)(kie||(kie=J([`
  bottom: 0;
  right: 0;
`]))),Iie={Top:fie,TopLeft:Eie,TopRight:Pie,Bottom:gie,BottomLeft:Mie,BottomRight:Aie,Left:bie,Right:wie},xV={Top:"ns-resize",Bottom:"ns-resize",Left:"ew-resize",Right:"ew-resize",TopLeft:"nw-resize",TopRight:"ne-resize",BottomLeft:"sw-resize",BottomRight:"se-resize"},Rie=({which:s})=>{let a=Zb(),l=(0,nD.useRef)(a);l.current=a;let[d,f]=wr(null),g=(0,nD.useMemo)(()=>({debugName:"PanelResizeHandle",lockCursorTo:xV[s],onDragStart(){let C,I=l.current,O=a.addBoundsHighlightLock();return{onDrag(R,A){let N=F({},I.dims);if(s.startsWith("Bottom"))N.height=Math.max(N.height+A,I.minDims.height);else if(s.startsWith("Top")){let V=N.top+N.height,G=_i(N.top+A,0,Math.min(V-I.minDims.height,window.innerHeight-Wc)),$=V-G;N.height=$,N.top=G}if(s.endsWith("Left")){let V=N.left+N.width,G=Math.min(N.left+R,Math.min(V-I.minDims.width,window.innerWidth-Wc)),$=V-G;N.width=$,N.left=G}else s.endsWith("Right")&&(N.width=Math.max(N.width+R,Math.max(I.minDims.width,Wc-I.dims.left)));let L=tD(N,{width:window.innerWidth,height:window.innerHeight});C==null||C.discard(),C=ue().tempTransaction(({stateEditors:V})=>{V.studio.historic.panelPositions.setPanelPosition({position:L,panelId:I.panelId})})},onDragEnd(R){O(),R?C==null||C.commit():C==null||C.discard()}}}}),[s]),[b]=Bi(f,g),_=Iie[s],S=s.length<=6;return nD.default.createElement(_,{ref:d,className:[b?"isDragging":"",a.boundsHighlighted&&S?"isHighlighted":""].join(" "),style:{cursor:xV[s]}})},Sh=Rie}),Yu,Die,Oie,EIe=P(()=>{Yu=X(Ne()),SIe(),Die=s=>Yu.default.createElement(Yu.default.Fragment,null,Yu.default.createElement(Sh,{which:"Bottom"}),Yu.default.createElement(Sh,{which:"Top"}),Yu.default.createElement(Sh,{which:"Left"}),Yu.default.createElement(Sh,{which:"Right"}),Yu.default.createElement(Sh,{which:"TopLeft"}),Yu.default.createElement(Sh,{which:"TopRight"}),Yu.default.createElement(Sh,{which:"BottomLeft"}),Yu.default.createElement(Sh,{which:"BottomRight"})),Oie=Die}),rD,Lie,Nie,Fie,SV,Bie=P(()=>{Dr(),rD=X(Ne()),Ve(),Qb(),EIe(),Nie=le.div(Lie||(Lie=J([`
  position: absolute;
  user-select: none;
  box-sizing: border-box;
  `,`;
  /* box-shadow: 1px 2px 10px -5px black; */

  z-index: 1000;
`])),kr),Fie=rD.default.forwardRef((s,a)=>{let l=Zb(),d=s,{style:f,children:g}=d,b=z(d,["style","children"]);return rD.default.createElement(Nie,B(F({ref:a},b),{style:F({width:l.dims.width+"px",height:l.dims.height+"px",top:l.dims.top+"px",left:l.dims.left+"px"},f??{})}),rD.default.createElement(Oie,null),g)}),SV=Fie}),CIe=W((s,a)=>{(function(l,d){typeof s=="object"&&typeof a<"u"?d(s,Ne()):(l=typeof globalThis<"u"?globalThis:l||self,d(l.ReactErrorBoundary={},l.React))})(s,function(l,d){function f(A){if(A&&A.__esModule)return A;var N=Object.create(null);return A&&Object.keys(A).forEach(function(L){if(L!=="default"){var V=Object.getOwnPropertyDescriptor(A,L);Object.defineProperty(N,L,V.get?V:{enumerable:!0,get:function(){return A[L]}})}}),N.default=A,Object.freeze(N)}var g=f(d);function b(A,N){return b=Object.setPrototypeOf||function(L,V){return L.__proto__=V,L},b(A,N)}function _(A,N){A.prototype=Object.create(N.prototype),A.prototype.constructor=A,b(A,N)}var S=function(A,N){return A===void 0&&(A=[]),N===void 0&&(N=[]),A.length!==N.length||A.some(function(L,V){return!Object.is(L,N[V])})},C={error:null},I=function(A){_(N,A);function N(){for(var V,G=arguments.length,$=new Array(G),Y=0;Y<G;Y++)$[Y]=arguments[Y];return V=A.call.apply(A,[this].concat($))||this,V.state=C,V.updatedWithError=!1,V.resetErrorBoundary=function(){for(var ie,re=arguments.length,ce=new Array(re),Pe=0;Pe<re;Pe++)ce[Pe]=arguments[Pe];V.props.onReset==null||(ie=V.props).onReset.apply(ie,ce),V.reset()},V}N.getDerivedStateFromError=function(V){return{error:V}};var L=N.prototype;return L.reset=function(){this.updatedWithError=!1,this.setState(C)},L.componentDidCatch=function(V,G){var $,Y;($=(Y=this.props).onError)==null||$.call(Y,V,G)},L.componentDidMount=function(){var V=this.state.error;V!==null&&(this.updatedWithError=!0)},L.componentDidUpdate=function(V){var G=this.state.error,$=this.props.resetKeys;if(G!==null&&!this.updatedWithError){this.updatedWithError=!0;return}if(G!==null&&S(V.resetKeys,$)){var Y,ie;(Y=(ie=this.props).onResetKeysChange)==null||Y.call(ie,V.resetKeys,$),this.reset()}},L.render=function(){var V=this.state.error,G=this.props,$=G.fallbackRender,Y=G.FallbackComponent,ie=G.fallback;if(V!==null){var re={error:V,resetErrorBoundary:this.resetErrorBoundary};if(g.isValidElement(ie))return ie;if(typeof $=="function")return $(re);if(Y)return g.createElement(Y,re);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},N}(g.Component);function O(A,N){var L=function(G){return g.createElement(I,N,g.createElement(A,G))},V=A.displayName||A.name||"Unknown";return L.displayName="withErrorBoundary("+V+")",L}function R(A){var N=g.useState(null),L=N[0],V=N[1];if(A!=null)throw A;if(L!=null)throw L;return V}l.ErrorBoundary=I,l.useErrorHandler=R,l.withErrorBoundary=O,Object.defineProperty(l,"__esModule",{value:!0})})}),fo,Uie,zie,Vie,jie,Hie,Gie,Wie,$ie,Kie,Xie,qie,Yie,Zie,Qie,Jie,ese,tse,nse,rse,PIe=P(()=>{fo=X(Ne()),Ve(),fh(),Qb(),uie(),Bie(),Uie=X(CIe()),Ub(),Te(),fh(),zie={edges:{left:{from:"screenLeft",distance:.3},right:{from:"screenRight",distance:.3},top:{from:"screenTop",distance:.3},bottom:{from:"screenBottom",distance:.3}}},Vie={width:300,height:300},jie=({paneInstance:s})=>fo.default.createElement(gV,{panelId:"pane-".concat(s.instanceId),defaultPosition:zie,minDims:Vie},fo.default.createElement(nse,{paneInstance:s})),Gie=le(SV)(Hie||(Hie=J([`
  display: flex;
  flex-direction: column;

  box-shadow: 0px 5px 12px -4px rgb(0 0 0 / 22%);
  z-index: `,`;
`])),Ib.pluginPanes),$ie=le.div(Wie||(Wie=J([`
  width: 100%;
`]))),Xie=le.div(Kie||(Kie=J([`
  display: flex;
  align-items: center;
  opacity: 1;
  position: absolute;
  right: 4px;
  top: 0;
  bottom: 0;
`]))),Yie=le.button(qie||(qie=J([`
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 2px;
  font-size: 11px;
  height: 10px;
  width: 18px;
  color: #adadadb3;
  background: transparent;
  border: none;
  cursor: pointer;
  &:hover {
    color: white;
  }
`]))),Qie=le(zq)(Zie||(Zie=J([`
  position: relative;
  overflow: hidden;

  &:after {
    z-index: 10;
    position: absolute;
    inset: 0;
    display: block;
    content: ' ';
    pointer-events: none;

    #pointer-root:not(.normal) & {
      pointer-events: auto;
    }
  }
`]))),ese=le.div(Jie||(Jie=J([`
  padding: 12px;

  & > pre {
    border: 1px solid #ff62624f;
    background-color: rgb(255 0 0 / 5%);
    margin: 8px 0;
    padding: 8px;
    font-family: monospace;
    overflow: scroll;
    color: #ff9896;
  }
`]))),tse=s=>fo.default.createElement(ese,null,"An Error occurred rendering this pane. Open the console for more info.",fo.default.createElement("pre",null,JSON.stringify({message:s.error.message,stack:s.error.stack},null,2))),nse=({paneInstance:s})=>{let[a,l]=(0,fo.useState)(null),d=s.definition.mount;(0,fo.useLayoutEffect)(()=>{if(!a)return;let g=d({paneId:s.instanceId,node:a});if(typeof g=="function")return g},[a,d,s.instanceId]);let f=(0,fo.useCallback)(()=>{ue().paneManager.destroyPane(s.instanceId)},[s]);return fo.default.createElement(Gie,{"data-testid":"theatre-pane-wrapper-".concat(s.instanceId)},fo.default.createElement(vV,null,fo.default.createElement(E4,null,fo.default.createElement(Xie,null,fo.default.createElement(Yie,{onClick:f,title:"Close Pane"},fo.default.createElement(kAe,null))),fo.default.createElement($ie,null,s.instanceId))),fo.default.createElement(Uie.ErrorBoundary,{FallbackComponent:tse},fo.default.createElement(Qie,{"data-testid":"theatre-pane-content-".concat(s.instanceId),ref:l})))},rse=jie}),EV,CV,ise=P(()=>{EV=Nt,CV=(s,a)=>{let l=EV.prism.memo(s,()=>new EV.Atom(a),[]);return l.set(a),l}});function sse(s,a){(0,ose.useLayoutEffect)(()=>{if(!s||a.type!=="propWithChildren"&&a.type!=="primitiveProp"&&a.type!=="sheetObject")return;let l=null,d=B(F({},a.sheetObject.address),{pathToProp:a.type==="sheetObject"?[]:a.pathToProp});function f(){l=NR.replaceLock(d,()=>{})}function g(){l==null||l()}return s.addEventListener("mouseenter",f),s.addEventListener("mouseleave",g),()=>{l==null||l(),s.removeEventListener("mouseenter",f),s.removeEventListener("mouseleave",g)}},[s])}var ose,ase=P(()=>{ose=X(Ne()),Hz()}),Ef,lse,PV,use,TV,cse,MV,dse,hse,pse,fse,mse,gse,vse,iD,sD=P(()=>{Dr(),Ef=X(Ne()),Ub(),Ve(),rv(),ase(),PV=le.li(lse||(lse=J([`
  --depth: `,`;
  margin: 0;
  padding: 0;
  list-style: none;
`])),s=>s.depth),TV=le.div(use||(use=J([`
  border-bottom: 1px solid #7695b705;
`]))),MV=le(TV)(cse||(cse=J([`
  padding-left: calc(8px + var(--depth) * 20px);

  display: flex;
  align-items: stretch;
  color: `,`;

  box-sizing: border-box;

  `,`;
`])),Ab.panel.body.compoudThing.label.color,s=>s.isSelected&&"background: blue"),hse=le.span(dse||(dse=J([`
  `,`;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding-right: 4px;
  line-height: 26px;
  flex-wrap: nowrap;

  `,`:hover & {
    color: #ccc;
  }
`])),yf,MV),fse=le.span(pse||(pse=J([`
  width: 12px;
  padding: 8px;
  font-size: 9px;
  display: flex;
  align-items: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),s=>s.isCollapsed?0:90,s=>s.isCollapsed?15:75),gse=le.ul(mse||(mse=J([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),vse=({leaf:s,label:a,children:l,isSelectable:d,isSelected:f,toggleSelect:g,toggleCollapsed:b,isCollapsed:_})=>{let S=Array.isArray(l)&&l.length>0,C=(0,Ef.useRef)(null);return sse(C.current,s),s.shouldRender?Ef.default.createElement(PV,{depth:s.depth},Ef.default.createElement(MV,{ref:C,style:{height:s.nodeHeight+"px"},isSelectable:d===!0,isSelected:f===!0,onClick:g,isEven:s.n%2===0},Ef.default.createElement(fse,{isCollapsed:_,onClick:b},Ef.default.createElement(DZ,null)),Ef.default.createElement(hse,null,a)),S&&Ef.default.createElement(gse,null,l)):null},iD=vse});function TIe(s,a){return a.every((l,d)=>l===s[d])}function MIe(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;l++)if(s[l]!==a[l])return!1;return!0}function oD(s){var a;let l=[];for(;;){let d=l.length,f=(a=s[0])==null?void 0:a[d];if(f===void 0)return l;for(let g of s)if(f!==g[d])return l;l.push(f)}}var nd,aD,rd=P(()=>{SR(),nd=CE(s=>JSON.stringify(s)),aD=s=>JSON.parse(s)});function kIe(s,a){let l=(0,kV.useRef)({combo:s,listener:a});l.current={combo:s,listener:a},(0,kV.useEffect)(()=>{function d(b){b.key===l.current.combo&&l.current.listener({down:!0,event:b})}function f(b){b.key===l.current.combo&&l.current.listener({down:!1,event:b})}function g(b){l.current.listener({down:!1,event:void 0})}return document.addEventListener("keydown",d),document.addEventListener("keyup",f),window.addEventListener("blur",g),()=>{document.removeEventListener("keydown",d),document.removeEventListener("keyup",f),window.removeEventListener("blur",g)}},[])}var kV,AIe=P(()=>{kV=X(Ne())});function yse(s){let[a,l]=(0,bse.useState)(!1);return kIe(s,({down:d})=>{l(d)}),a}var bse,_se=P(()=>{bse=X(Ne()),AIe()});function IIe(s){let a=(0,AV.useMemo)(()=>new wse.Atom(s),[]);return(0,AV.useLayoutEffect)(()=>{a.set(s)},[s]),a}var wse,AV,RIe=P(()=>{wse=Nt,AV=X(Ne())});function xse(s,a,l){let d=(0,IV.pointer)({root:{},path:[]}),f=a(d);ef(s,(0,IV.getPointerParts)(f).path,l)}var IV,DIe=P(()=>{IV=Nt,ib()}),lD,Sse,ha,Zu=P(()=>{lD="data-pos",Sse={checkIfMouseEventSnapToPos(s,a){let l=s.composedPath().find(d=>d instanceof Element&&d!==(a==null?void 0:a.ignore)&&d.hasAttribute(lD));if(l){let d=parseFloat(l.getAttribute(lD));if(isFinite(d))return d}return null},includePositionSnapAttrs(s){return{[lD]:s}}},ha=Sse});function uD(s){let a=s.type==="sheet"?LIe(s):RV(s);return{byPosition:OIe(a),tracks:a}}function OIe(s){let a=new Map;for(let l of s)for(let d of l.data.keyframes){let f=a.get(d.position);f||(f=[],a.set(d.position,f)),f.push({kf:d,track:l,itemKey:Ns.forTrackKeyframe(l.sheetObject,l.id,d.id)})}return a}function LIe(s){return s.children.flatMap(RV)}function RV(s){return s.children.flatMap(a=>a.type==="propWithChildren"?RV(a):NIe(a))}function NIe(s){let a=s.sheetObject,l=a.address.projectId,d=ue().atomP.historic.coreByProject[l].sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey],f=(0,cD.val)(d.trackIdByPropPath[nd(s.pathToProp)]);if(!f)return[];let g=(0,cD.val)(d.trackData[f]);return g?[{id:f,data:g,sheetObject:a}]:[]}function FIe(s,a){return Lo(s.children.flatMap(l=>DV(l,a)))}function DV(s,a){return Lo(s.children.flatMap(l=>l.type==="propWithChildren"?DV(l,a):BIe(l,a)))}function BIe(s,a){var l,d;let f=s.sheetObject,g=f.address.projectId,b=ue().atomP.historic.coreByProject[g].sheetsById[f.address.sheetId].sequence.tracksByObject[f.address.objectKey],_=(0,cD.val)(b.trackIdByPropPath[nd(s.pathToProp)]);return _?(d=(l=a[f.address.objectKey])==null?void 0:l[_])!=null?d:[]:[]}var cD,Jb=P(()=>{Te(),cD=Nt,wh(),rd(),di()});function UIe(s,a){let[l,d]=wr(null),f=ff("useCaptureSelection");return Bi(a,(0,e_.useMemo)(()=>({debugName:"DopeSheetSelectionView/useCaptureSelection",dontBlockMouseDown:!0,lockCSSCursorTo:"cell",onDragStart(g){if(!g.shiftKey||g.target instanceof HTMLInputElement)return!1;let b=a.getBoundingClientRect(),_=g.clientX-b.left-(0,ql.val)(s.scaledSpace.leftPadding),S=(0,ql.val)(s.scaledSpace.toUnitSpace)(_);return l.current={h:[S,S],v:[g.clientY-b.top,g.clientY-b.top]},(0,ql.val)(s.selectionAtom).set({current:void 0}),{onDrag(C,I,O){let R=a.getBoundingClientRect(),A=O.clientX-R.left-(0,ql.val)(s.scaledSpace.leftPadding),N=(0,ql.val)(s.scaledSpace.toUnitSpace)(A);l.current={h:[l.current.h[0],N],v:[l.current.v[0],O.clientY-R.top]};let L=OV.boundsToSelection(f,(0,ql.val)(s),l.current);(0,ql.val)(s.selectionAtom).set({current:L})},onDragEnd(C){l.current=null}}}}),[s,a,l])),d}var ql,e_,Cf,Ese,Cse,Pse,OV,Tse,Mse,LV,kse,Ase,zIe=P(()=>{Te(),Es(),_se(),RIe(),DIe(),Rr(),Sn(),ql=Nt,e_=X(Ne()),Ve(),Zu(),Jb(),mf(),Cf=5,Cse=le.div(Ese||(Ese=J([`
  cursor: `,`;
`])),s=>s.isShiftDown?"cell":"default"),Pse=({layoutP:s,children:a,height:l})=>{let[d,f]=wr(null),g=yse("Shift"),b=UIe(s,f),_=(0,e_.useRef)(b);return _.current=b,e_.default.createElement(Cse,{style:{height:l+"px"},ref:d,isShiftDown:g,className:"selectionview"},b&&e_.default.createElement(kse,{state:b,layoutP:s}),a)},(s=>{let a=(b,_,S,C,I)=>{let O=uD(S);if(S.top+S.nodeHeight/2+Cf>C.v[0]&&S.top+S.nodeHeight/2-Cf<C.v[1])for(let[R,A]of O.byPosition){let N=_.scaledSpace.toUnitSpace(Cf);if(!(R+N<=C.h[0]||R-N>=C.h[1]))for(let L of A)xse(I,V=>V[L.track.sheetObject.address.objectKey].byTrackId[L.track.id].byKeyframeId[L.kf.id],!0)}d(b,_,S,C,I)},l={sheet(b,_,S,C,I){a(b,_,S,C,I)},propWithChildren(b,_,S,C,I){a(b,_,S,C,I)},sheetObject(b,_,S,C,I){a(b,_,S,C,I)},primitiveProp(b,_,S,C,I){let{sheetObject:O,trackId:R}=S,A=(0,ql.val)(ue().atomP.historic.coreByProject[O.address.projectId].sheetsById[O.address.sheetId].sequence.tracksByObject[O.address.objectKey].trackData[R]);if(!(C.v[0]>S.top+S.heightIncludingChildren/2+Cf||S.top+S.heightIncludingChildren/2-Cf>C.v[1])){for(let N of A.keyframes)if(!(N.position+_.scaledSpace.toUnitSpace(Cf)<=C.h[0])){if(N.position-_.scaledSpace.toUnitSpace(Cf)>=C.h[1])break;xse(I,L=>L[O.address.objectKey].byTrackId[R].byKeyframeId[N.id],!0)}}}},d=(b,_,S,C,I)=>{if("children"in S)for(let O of S.children)f(b,_,O,C,I)};function f(b,_,S,C,I){if(!S.shouldRender||C.v[0]>S.top+S.heightIncludingChildren||S.top>C.v[1])return;let O=l[S.type];O?O(b,_,S,C,I):d(b,_,S,C,I)}function g(b,_,S){let C={};S=LV(S);let I=_.tree;f(b.utilFor.internal(),_,I,S,C);let O=_.tree.sheet;return{type:"DopeSheetSelection",byObjectKey:C,getDragHandlers(R){return{debugName:"DopeSheetSelectionView/boundsToSelection",onDragStart(){let A,N=_.scaledSpace.toUnitSpace;return{onDrag(L,V,G){A&&(A.discard(),A=void 0);let $=ha.checkIfMouseEventSnapToPos(G,{ignore:R.domNode}),Y=$!=null?$-R.positionAtStartOfDrag:N(L);A=ue().tempTransaction(({stateEditors:ie})=>{let re=ie.coreByProject.historic.sheetsById.sequence.transformKeyframes;for(let ce of Object.keys(C)){let{byTrackId:Pe}=C[ce];for(let ye of Object.keys(Pe)){let{byKeyframeId:we}=Pe[ye];re({trackId:ye,keyframeIds:Object.keys(we),translate:Y,scale:1,origin:0,snappingFunction:O.getSequence().closestGridPosition,objectKey:ce,projectId:R.projectId,sheetId:R.sheetId})}}})},onDragEnd(L){L?A==null||A.commit():A==null||A.discard()}}}}},delete(){ue().transaction(({stateEditors:R})=>{let A=R.coreByProject.historic.sheetsById.sequence.deleteKeyframes;for(let N of Object.keys(C)){let{byTrackId:L}=C[N];for(let V of Object.keys(L)){let{byKeyframeId:G}=L[V];A(B(F({},O.address),{objectKey:N,trackId:V,keyframeIds:Object.keys(G)}))}}})}}}s.boundsToSelection=g})(OV||(OV={})),Mse=le.div(Tse||(Tse=J([`
  position: absolute;
  background: rgba(255, 255, 255, 0.1);
  border: 1px dashed rgba(255, 255, 255, 0.4);
  box-sizing: border-box;
`]))),LV=s=>({h:[...s.h].sort((a,l)=>a-l),v:[...s.v].sort((a,l)=>a-l)}),kse=({state:s,layoutP:a})=>{let l=IIe(s);return Yn(()=>{let d=(0,ql.val)(l.pointer),f=LV(d),g=(0,ql.val)(a.scaledSpace.fromUnitSpace),b=(0,ql.val)(a.scaledSpace.leftPadding),_=f.h.map(g).map(R=>R+b),S=f.v[0],C=f.v[1]-f.v[0],I=_[0],O=_[1]-_[0];return e_.default.createElement(Mse,{style:{top:S+"px",height:C+"px",left:I+"px",width:O+"px"}})},[a,l])},Ase=Pse}),cv,Ise,Rse,NV,Dse,Ose,Lse,Nse=P(()=>{Rb(),cv=X(Ne()),Ve(),Ih(),Rse=le.div(Ise||(Ise=J([`
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  overflow-x: hidden;
  overflow-y: scroll;
  z-index: `,`;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
`])),()=>pd.scrollableArea),NV=(0,cv.createContext)(Gu),Dse=()=>(0,cv.useContext)(NV),Ose=s=>{let a=(0,cv.useRef)(null),l=(0,cv.useCallback)(d=>{a.current.scrollBy(0,d.deltaY)},[]);return cv.default.createElement(NV.Provider,{value:l},cv.default.createElement(Rse,{ref:a},s.children))},Lse=Ose}),Fse,VIe=P(()=>{Fse='data:image/svg+xml,<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">%0A  <path d="M1 7V1H7" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M7 33H1L1 27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M33 27V33H27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M27 1L33 1V7" stroke="%2374FFDE" stroke-width="0.25" />%0A</svg>'}),Yl,dD=P(()=>{Yl=(s,a=s)=>`
  left: `.concat(s*-.5,`px;
  top: `).concat(a*-.5,`px;
  width: `).concat(s,`px;
  height: `).concat(a,`px;
`)}),hD,Bse,Use,jIe=P(()=>{hD=Nt,Bse=(0,hD.prism)(()=>{let[s,a]=hD.prism.state("pos",null);return hD.prism.effect("setupListeners",()=>{let l=d=>{a(d)};return document.addEventListener("mousemove",l),()=>{document.removeEventListener("mousemove",l)}},[]),s}),Use=Bse}),Eh,pa,tC,zse,Vse,jse,Hse,Ch,id,pD,Gse,Wse,mo=P(()=>{Eh=Nt,jIe(),di(),pa=X(Ne()),tC=(0,pa.createContext)(null),zse=0,Vse=({children:s,layoutP:a})=>{let l=(0,pa.useMemo)(()=>new Eh.Atom([]),[]),d=(0,pa.useMemo)(()=>(0,Eh.prism)(()=>{let b=Eh.prism.memo("p",()=>Gse(a),[a]).getValue(),_=(0,Eh.val)(l.pointer);return _.length>0?rh(_).position:b}),[a]),f=(0,pa.useCallback)(()=>{let b=zse++;return l.reduce(_=>[..._,{id:b,position:[-1,0]}]),{set:_=>{l.reduce(S=>{let C=S.findIndex(O=>O.id===b);if(C===-1)return console.warn("Lock is already freed. This is a bug."),S;let I=[...S];return I.splice(C,1,{id:b,position:[_,_===-1?0:1]}),I})},unlock:()=>{l.reduce(_=>_.filter(S=>S.id!==b))}}},[]),g={currentD:d,getLock:f};return pa.default.createElement(tC.Provider,{value:g},s)},jse=()=>(0,pa.useContext)(tC).currentD,Hse=()=>{let{getLock:s}=(0,pa.useContext)(tC),a=(0,pa.useRef)();return(0,pa.useLayoutEffect)(()=>()=>{var l;(l=a.current)==null||l.unlock()},[]),(0,pa.useMemo)(()=>{let l;return(d,f)=>{var g,b;(l==null?void 0:l.shouldLock)!==d&&(d?a.current=s():(g=a.current)==null||g.unlock()),(l==null?void 0:l.pos)!==f&&d&&((b=a.current)==null||b.set(f)),l={shouldLock:d,pos:f}}},[s])},Ch=(s,a)=>{let{getLock:l}=(0,pa.useContext)(tC),d=(0,pa.useRef)();(0,pa.useLayoutEffect)(()=>{if(s)return d.current=l(),()=>{d.current.unlock()}},[s,l]),(0,pa.useLayoutEffect)(()=>{s&&d.current.set(a)},[a,s])},id=s=>({[pD]:s==="hide"?s:s.toFixed(3)}),pD="data-theatre-lock-framestamp-to",Gse=s=>(0,Eh.prism)(()=>{let a=(0,Eh.val)(s.rightDims),l=(0,Eh.val)(s.clippedSpace.toUnitSpace),d=(0,Eh.val)(Use);if(!d)return[-1,0];for(let I of d.composedPath()){if(!(I instanceof HTMLElement||I instanceof SVGElement))break;if(I.hasAttribute(pD)){let O=I.getAttribute(pD);if(typeof O!="string")continue;if(O==="hide")return[-1,0];let R=parseFloat(O);if(isFinite(R)&&R>=0)return[R,2]}}let{clientX:f,clientY:g}=d,{screenX:b,screenY:_,width:S,height:C}=a;if(PS(f,b,b+S)&&PS(g,_+16,_+C)){let I=f-b;return[l(I),3]}else return[-1,0]}),Wse=Vse}),$se,nC,FV,Kse,Xse,sd,qse=P(()=>{Dr(),ll(),Ve(),VIe(),dD(),Zu(),mo(),$se=12,nC=34,FV="beingDragged",sd={BEING_DRAGGED_CLASS:FV,CSS:uo(Kse||(Kse=J([`
    position: absolute;
    `,`;
    `,`;

    &.`,` {
      pointer-events: none !important;
    }
  `])),Yl($se),kr,FV),CSS_WHEN_SOMETHING_DRAGGING:uo(Xse||(Xse=J([`
    pointer-events: auto;
    cursor: var(`,`);

    // ⸢⸤⸣⸥ thing
    // This box extends the hitzone so the user does not
    // accidentally leave the hitzone
    &:hover:after {
      position: absolute;
      top: calc(50% - `,`px);
      left: calc(50% - `,`px);
      width: `,`px;
      height: `,`px;
      display: block;
      content: ' ';
      background: url(`,`) no-repeat 100% 100%;
      // This icon might also fit: GiConvergenceTarget
    }
  `])),gh,nC/2,nC/2,nC,nC,Fse),reactProps(s){return B(F(F({},id(s.position)),ha.includePositionSnapAttrs(s.position)),{className:s.isDragging?sd.BEING_DRAGGED_CLASS:""})}}});function BV(){iC.set({mode:"snapToAll"})}function dv(){iC.set({mode:"snapToNone"})}function Yse(s){iC.set({mode:"snapToSome",positions:s})}function Zse(s,a){return Object.fromEntries(Object.entries(s).map(([l,d])=>[l,Object.fromEntries(Object.entries(d.trackData).map(([f,g])=>[f,g.keyframes.filter(b=>a(b,{trackId:f,trackData:g,objectKey:l})).map(b=>b.position)]))]))}var Qse,Jse,UV,eoe,toe,noe,roe,ioe,rC,iC,zV,hv=P(()=>{Qse=Nt,Jse=Nt,UV=X(Ne()),Ve(),qse(),toe=le.div(eoe||(eoe=J([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  #pointer-root.draggingPositionInSequenceEditor & {
    `,`
  }
`])),sd.CSS,sd.CSS_WHEN_SOMETHING_DRAGGING),roe=le.div(noe||(noe=J([`
  position: absolute;
`]))),ioe=s=>UV.default.createElement(roe,{style:{top:"".concat(s.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,Jse.val)(s.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(s.position,"px))")}},UV.default.createElement(toe,F({},sd.reactProps({isDragging:!1,position:s.position})))),rC=ioe,iC=new Qse.Atom({mode:"snapToNone"}),zV=iC.prism});function HIe(s,a){let l=(0,pv.useMemo)(()=>({debugName:"HorizontallyScrollableArea",onDragStart(f){if(f.target instanceof HTMLInputElement||f.shiftKey||f.altKey||f.ctrlKey||f.metaKey||f.composedPath().some(O=>O instanceof HTMLElement&&O.draggable===!0))return!1;let g=f.clientX-a.getBoundingClientRect().left,b=_i((0,Ui.val)(s.clippedSpace.toUnitSpace)(g),0,1/0),_=(0,Ui.val)(s.seeker.setIsSeeking),S=(0,Ui.val)(s.sheet).getSequence();S.position=b;let C=b,I=(0,Ui.val)(s.scaledSpace.toUnitSpace);return _(!0),BV(),{onDrag(O,R,A){let N=I(O),L=_i(C+N,0,S.length),V=ha.checkIfMouseEventSnapToPos(A,{});V!=null&&(L=V),S.position=L},onDragEnd(){_(!1),dv()}}}}),[s,a]),[d]=Bi(a,l);Kl(d,"draggingPositionInSequenceEditor","ew-resize")}function GIe(s,a){let l=Dse();(0,pv.useLayoutEffect)(()=>{if(!a)return;let d=g=>{if(g.ctrlKey){g.preventDefault(),g.stopPropagation();let b=g.clientX-a.getBoundingClientRect().left,_=(0,Ui.val)(s.clippedSpace.toUnitSpace)(b),S=(0,Ui.val)(s.clippedSpace.range),C=1+VV(g.deltaY,[-50,50])*.03,I=ih(S,A=>(A-_)*C+_),O=(0,Ui.val)(s.sheet).getSequence().length,R=O+O*.25;(0,Ui.val)(s.clippedSpace.setRange)(WIe(I,[0,R]));return}else if(g.shiftKey){g.preventDefault(),g.stopPropagation();let b=(0,Ui.val)(s.sheet).getSequence().length,_=(0,Ui.val)(s.clippedSpace.range),S=(_.end-_.start)/b,C=VV(g.deltaY||g.deltaX,[-50,50])*.05*S,I=ih(_,O=>O+C);(0,Ui.val)(s.clippedSpace.setRange)(I);return}else{l(g),g.preventDefault(),g.stopPropagation();let b=(0,Ui.val)(s.scaledSpace.toUnitSpace)(g.deltaX*1),_=(0,Ui.val)(s.clippedSpace.range),S=ih(_,C=>C+b);(0,Ui.val)(s.clippedSpace.setRange)(S);return}},f={capture:!0,passive:!1};return a.addEventListener("wheel",d,f),()=>{a.removeEventListener("wheel",d,f)}},[a,s]),Bi(a,(0,pv.useMemo)(()=>({onDragStart(d){let f=(0,Ui.val)(s.clippedSpace.range),g=(0,Ui.val)(s.clippedSpace.setRange),b=(0,Ui.val)(s.scaledSpace.toUnitSpace);return d.preventDefault(),d.stopPropagation(),{onDrag(_,S,C,I,O){l({deltaY:-O});let R=-b(_),A=ih(f,N=>N+R);g(A)}}},debugName:"HorizontallyScrollableArea Middle Button Drag",buttons:[1],lockCSSCursorTo:"grabbing"}),[s]))}function VV(s,[a,l]){return Math.max(Math.min(s,l),a)}function WIe(s,a){return ih(s,l=>VV(l,a))}function $Ie(s,a){(0,pv.useLayoutEffect)(()=>{if(!a)return;let l=(0,Ui.prism)(()=>{let b=(0,Ui.val)(s.clippedSpace.range);return(0,Ui.val)(s.scaledSpace.fromUnitSpace)(b.start)}),d=()=>{let b=l.getValue();a.scrollLeft=b},f=l.onStale(d);d();let g=setTimeout(d,100);return()=>{clearTimeout(g),f()}},[s,a])}var Ui,pv,soe,ooe,aoe,jV,loe=P(()=>{Es(),Rr(),Sn(),Ui=Nt,di(),pv=X(Ne()),Ve(),Nse(),Dr(),ll(),Zu(),hv(),ooe=le.div(soe||(soe=J([`
  position: absolute;

  right: 0;
  overflow-x: scroll;
  overflow-y: hidden;
  `,`;

  // hide the scrollbar on Gecko
  scrollbar-width: none;

  // hide the scrollbar on Webkit/Blink
  &::-webkit-scrollbar {
    display: none;
  }
`])),kr),aoe=pv.default.memo(({layoutP:s,children:a,height:l})=>{let{width:d,unitSpaceToScaledSpaceMultiplier:f}=Yn(()=>({width:(0,Ui.val)(s.rightDims.width),unitSpaceToScaledSpaceMultiplier:(0,Ui.val)(s.scaledSpace.fromUnitSpace)(1)}),[s]),[g,b]=wr(null);return GIe(s,b),HIe(s,b),$Ie(s,b),pv.default.createElement(ooe,{ref:g,style:{width:d+"px",height:l+"px","--unitSpaceToScaledSpaceMultiplier":f}},a)}),jV=aoe}),fD,uoe,coe,doe,hoe,poe,foe,moe,t_,mD=P(()=>{fD=X(Ne()),Ve(),coe=le.li(uoe||(uoe=J([`
  margin: 0;
  padding: 0;
  list-style: none;
  box-sizing: border-box;
  position: relative;
`]))),hoe=le.div(doe||(doe=J([`
  box-sizing: border-box;
  width: 100%;
  position: relative;

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -40px;
    top: 0;
    bottom: 0;
    right: 0;
    box-sizing: border-box;
    border-bottom: 1px solid #252b3869;
    background: `,`;
  }
`])),s=>s.isEven?"transparent":"#6b8fb505"),foe=le.ul(poe||(poe=J([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),moe=({leaf:s,children:a,node:l,isCollapsed:d})=>{let f=Array.isArray(a)&&a.length>0;return s.shouldRender?fD.default.createElement(coe,null,fD.default.createElement(hoe,{style:{height:s.nodeHeight+"px"},isEven:s.n%2===0},l),f&&fD.default.createElement(foe,null,a)):null},t_=moe}),KIe=W((s,a)=>{(function(){var l=this,d={};typeof s<"u"?a.exports=d:l.fuzzy=d,d.simpleFilter=function(f,g){return g.filter(function(b){return d.test(f,b)})},d.test=function(f,g){return d.match(f,g)!==null},d.match=function(f,g,b){b=b||{};var _=0,S=[],C=g.length,I=0,O=0,R=b.pre||"",A=b.post||"",N=b.caseSensitive&&g||g.toLowerCase(),L;f=b.caseSensitive&&f||f.toLowerCase();for(var V=0;V<C;V++)L=g[V],N[V]===f[_]?(L=R+L+A,_+=1,O+=1+O):O=0,I+=O,S[S.length]=L;return _===f.length?(I=N===f?1/0:I,{rendered:S.join(""),score:I}):null},d.filter=function(f,g,b){return!g||g.length===0?[]:typeof f!="string"?g:(b=b||{},g.reduce(function(_,S,C,I){var O=S;b.extract&&(O=b.extract(S));var R=d.match(f,O,b);return R!=null&&(_[_.length]={string:R.rendered,score:R.score,index:C,original:S}),_},[]).sort(function(_,S){var C=S.score-_.score;return C||_.index-S.index}))}})()});function XIe(s,a){let[l,d]=(0,gD.useState)(!1),f=(0,gD.useRef)(a);return l||(f.current=a),(0,gD.useMemo)(()=>s(d),f.current)}var gD,qIe=P(()=>{gD=X(Ne())}),HV,Pf,vD=P(()=>{HV="rgba(26, 28, 30, 0.97);",Pf="#272B2F"});function goe(s,a,l,d){let f=XIe(g=>({debugName:"CurveSegmentEditor/useKeyframeDrag",lockCSSCursorTo:"move",onDragStart(){return g(!0),{onDrag(b,_){s&&l.onCurveChange(d(b,_))},onDragEnd(b){g(!1),l.onCancelCurveChange()}}}}),[s,l.onCurveChange,l.onCancelCurveChange]);Bi(a,f)}var Tr,yD,sC,n_,voe,oC,yoe,bD,boe,_oe,woe,r_,xoe,fv,Soe,Eoe,GV,Coe,_D,Poe,WV,Toe,Moe,YIe=P(()=>{Tr=X(Ne()),Es(),Rr(),Gy(),Ve(),Dr(),qIe(),vD(),yD=.12,sC=1+yD*2,n_=.01,voe=8,oC=(1-n_)/(voe-1),yoe="#3EAAA4",bD="#3EAAA4",boe="#3EAAA4",_oe="#3EAAA4",woe="#3EAAA4",r_="#3EAAA4",xoe="#3EAAA4",fv="#B3B3B3",Soe="#3eaaa4",Eoe="#67dfd8",GV=["goldenrod","cornflowerblue","dodgerblue","lawngreen"],_D=le.circle(Coe||(Coe=J([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.04px;
  pointer-events: none;
  transition: r 0.15s;
  fill: `,`;
`])),Soe),WV=le.circle(Poe||(Poe=J([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.09px;
  cursor: move;
  `,`;
  &:hover {
    opacity: 0.4;
  }
  &:hover + `,` {
    fill: `,`;
  }
`])),kr,_D,Eoe),Toe=s=>{let{curveConnection:{left:a,right:l},backgroundConnections:d}=s,f=Math.min(0,1-l.handles[1],1-a.handles[3]),g=Math.max(1,1-l.handles[1],1-a.handles[3]),b=Math.max(1,g-f),_=G=>(G-f)/b,[S,C]=wr(null),I=sC/((C==null?void 0:C.clientWidth)||1),O=sC/((C==null?void 0:C.clientHeight)||1),[R,A]=wr(null);goe(C,A,s,(G,$)=>{let Y=_i(a.handles[2]+G*I,0,1),ie=a.handles[3]-$*O;return[Y,ie,l.handles[0],l.handles[1]]});let[N,L]=wr(null);goe(C,L,s,(G,$)=>{let Y=_i(l.handles[0]+G*I,0,1),ie=l.handles[1]-$*O;return[a.handles[2],a.handles[3],Y,ie]});let V=G=>"M0 ".concat(_(1)," C").concat(G.left.handles[2]," ").concat(_(1-G.left.handles[3])," ").concat(G.right.handles[0]," ").concat(_(1-G.right.handles[1])," 1 ").concat(_(0));return Tr.default.createElement("svg",{height:"100%",width:"100%",ref:S,viewBox:"".concat(-yD," ").concat(-yD," ").concat(sC," ").concat(sC),xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none"},Tr.default.createElement("linearGradient",{id:"myGradient",gradientTransform:"rotate(90)"},Tr.default.createElement("stop",{offset:_(-1),stopColor:xoe}),Tr.default.createElement("stop",{offset:_(0),stopColor:r_}),Tr.default.createElement("stop",{offset:_(.3),stopColor:woe}),Tr.default.createElement("stop",{offset:_(.5),stopColor:_oe}),Tr.default.createElement("stop",{offset:_(.7),stopColor:boe}),Tr.default.createElement("stop",{offset:_(1),stopColor:bD}),Tr.default.createElement("stop",{offset:_(2),stopColor:yoe})),Tr.default.createElement("pattern",{id:"dot-background-pattern-1",width:oC,height:oC/b,y:-f/b},Tr.default.createElement("rect",{width:n_,height:n_,fill:fv,opacity:.3})),Tr.default.createElement("rect",{x:0,y:0,width:"1",height:1,fill:"url(#dot-background-pattern-1)"}),Tr.default.createElement("pattern",{id:"dot-background-pattern-2",width:oC,height:oC},Tr.default.createElement("rect",{width:n_,height:n_,fill:fv})),Tr.default.createElement("rect",{x:0,y:_(0),width:"1",height:_(1)-_(0),fill:"url(#dot-background-pattern-2)"}),!a.type||a.type==="bezier"?Tr.default.createElement(Tr.default.Fragment,null,Tr.default.createElement("line",{x1:0,y1:_(1),x2:a.handles[2],y2:_(1-a.handles[3]),stroke:fv,strokeWidth:"0.01"}),Tr.default.createElement("line",{x1:1,y1:_(0),x2:l.handles[0],y2:_(1-l.handles[1]),stroke:fv,strokeWidth:"0.01"}),Tr.default.createElement("path",{d:V(s.curveConnection),stroke:"none",fill:"url('#myGradient')",opacity:"0.1"}),d.map((G,$)=>Tr.default.createElement("path",{key:G.objectKey+"/"+G.left.id,d:V(G),stroke:GV[$%GV.length],opacity:.6,strokeWidth:"0.01"})),Tr.default.createElement("path",{d:V(s.curveConnection),stroke:"url('#myGradient')",strokeWidth:"0.02"}),Tr.default.createElement("circle",{cx:0,cy:_(1),r:"0.025",stroke:bD,strokeWidth:"0.02",fill:Pf}),Tr.default.createElement("circle",{cx:1,cy:_(0),r:"0.025",stroke:r_,strokeWidth:"0.02",fill:Pf}),Tr.default.createElement(WV,{ref:R,cx:a.handles[2],cy:_(1-a.handles[3]),fill:bD,opacity:.2}),Tr.default.createElement(_D,{cx:a.handles[2],cy:_(1-a.handles[3])}),Tr.default.createElement(WV,{ref:N,cx:l.handles[0],cy:_(1-l.handles[1]),fill:r_,opacity:.2}),Tr.default.createElement(_D,{cx:l.handles[0],cy:_(1-l.handles[1])})):Tr.default.createElement(Tr.default.Fragment,null,Tr.default.createElement("line",{x1:0,y1:_(1),x2:1,y2:_(1),stroke:fv,strokeWidth:"0.01"}),Tr.default.createElement("line",{x1:1,y1:_(1),x2:1,y2:0,stroke:fv,strokeWidth:"0.01"}),Tr.default.createElement("circle",{cx:0,cy:1,r:"0.025",stroke:r_,strokeWidth:"0.02",fill:Pf}),Tr.default.createElement("circle",{cx:1,cy:0,r:"0.025",stroke:r_,strokeWidth:"0.02",fill:Pf})))},Moe=Toe});function wD(s){return s.map(a=>a.toFixed(3)).join(", ")}function xD(s){if(!s||(s==null?void 0:s.length)>koe)return null;let a=s.split(",");if(a.length!==4)return null;let l=a.map(d=>Number(d.trim()));return!l.every(d=>isFinite(d))||l[0]<0||l[0]>1||l[2]<0||l[2]>1?null:l}function ZIe(s,a,l={threshold:.02}){if(!s||!a)return!1;let d=0;for(let f=0;f<4;f++)d+=Math.abs(s[f]-a[f]);return d<l.threshold}var koe,SD,Aoe=P(()=>{koe=128,SD=[{label:"Quad Out",value:"0.250, 0.460, 0.450, 0.940"},{label:"Quad In Out",value:"0.455, 0.030, 0.515, 0.955"},{label:"Quad In",value:"0.550, 0.085, 0.680, 0.530"},{label:"Cubic Out",value:"0.215, 0.610, 0.355, 1.000"},{label:"Cubic In Out",value:"0.645, 0.045, 0.355, 1.000"},{label:"Cubic In",value:"0.550, 0.055, 0.675, 0.190"},{label:"Quart Out",value:"0.165, 0.840, 0.440, 1.000"},{label:"Quart In Out",value:"0.770, 0.000, 0.175, 1.000"},{label:"Quart In",value:"0.895, 0.030, 0.685, 0.220"},{label:"Quint Out",value:"0.230, 1.000, 0.320, 1.000"},{label:"Quint In Out",value:"0.860, 0.000, 0.070, 1.000"},{label:"Quint In",value:"0.755, 0.050, 0.855, 0.060"},{label:"Sine Out",value:"0.390, 0.575, 0.565, 1.000"},{label:"Sine In Out",value:"0.445, 0.050, 0.550, 0.950"},{label:"Sine In",value:"0.470, 0.000, 0.745, 0.715"},{label:"Expo Out",value:"0.190, 1.000, 0.220, 1.000"},{label:"Expo In Out",value:"1.000, 0.000, 0.000, 1.000"},{label:"Expo In",value:"0.780, 0.000, 0.810, 0.00"},{label:"Circ Out",value:"0.075, 0.820, 0.165, 1.000"},{label:"Circ In Out",value:"0.785, 0.135, 0.150, 0.860"},{label:"Circ In",value:"0.600, 0.040, 0.980, 0.335"},{label:"Back Out",value:"0.175, 0.885, 0.320, 1.275"},{label:"Back In Out",value:"0.680, -0.550, 0.265, 1.550"},{label:"Back In",value:"0.600, -0.280, 0.735, 0.045"},{label:"linear",value:"0.5, 0.5, 0.5, 0.5"},{label:"In Out",value:"0.42,0,0.58,1"},{label:"Hold",value:"0, 0, Infinity, Infinity"}]}),Uo,ED,mv,$V,Ioe,Roe,aC,KV,XV,Doe,Ooe,QIe=P(()=>{Uo=X(Ne()),ED=.75,mv=.1,$V=1+ED*2,Ioe="#F5F5F5",Roe="#888888",aC="#4f4f4f",KV="rgba(255, 255, 255, 0.1)",XV=s=>1-s,Doe=s=>{let{easing:a,isSelected:l}=s,d=l?Ioe:Roe,f="".concat(-ED," ").concat(-ED," ").concat($V," ").concat($V);if(a){let g=[a[0],XV(a[1])],b=[a[2],XV(a[3])];return Uo.default.createElement("svg",{height:"100%",width:"100%",viewBox:f,fill:"none",xmlns:"http://www.w3.org/2000/svg"},Uo.default.createElement("line",{x1:"0",y1:"1",x2:g[0],y2:g[1],stroke:aC,strokeWidth:"0.1"}),Uo.default.createElement("line",{x1:"1",y1:"0",x2:b[0],y2:b[1],stroke:aC,strokeWidth:"0.1"}),Uo.default.createElement("circle",{cx:g[0],cy:g[1],r:.1,fill:KV}),Uo.default.createElement("circle",{cx:b[0],cy:b[1],r:.1,fill:KV}),Uo.default.createElement("circle",{cx:g[0],cy:g[1],r:mv,fill:aC}),Uo.default.createElement("circle",{cx:b[0],cy:b[1],r:mv,fill:aC}),Uo.default.createElement("path",{d:"M0 1 C".concat(g[0]," ").concat(g[1]," ").concat(b[0],` 
        `).concat(b[1]," 1 0"),stroke:d,strokeWidth:"0.08"}),Uo.default.createElement("circle",{cx:0,cy:1,r:mv,fill:d}),Uo.default.createElement("circle",{cx:1,cy:0,r:mv,fill:d}))}return Uo.default.createElement("svg",{height:"100%",width:"100%",viewBox:f,fill:"none",xmlns:"http://www.w3.org/2000/svg"},Uo.default.createElement("line",{x1:"0",y1:"1",x2:1,y2:1,stroke:d,strokeWidth:"0.08"}),Uo.default.createElement("line",{x1:"1",y1:"0",x2:1,y2:1,stroke:d,strokeWidth:"0.08"}),Uo.default.createElement("circle",{cx:0,cy:1,r:mv,fill:d}),Uo.default.createElement("circle",{cx:1,cy:0,r:mv,fill:d}))},Ooe=Doe}),lC,Loe,Noe,Foe,Boe,Uoe,zoe,Voe,JIe=P(()=>{jE(),lC=X(Ne()),Ve(),Aoe(),QIe(),rR(),vD(),Qc(),Foe=le.div(Noe||(Noe=J([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  aspect-ratio: 1;

  transition: background-color 0.15s;
  background-color: `,`;
  border-radius: 2px;
  cursor: pointer;
  outline: none;

  `,`

  &:hover {
    background-color: #31353a;
  }

  &:focus {
    background-color: #383d42;
  }
`])),Pf,({isSelected:s})=>s&&uo(Loe||(Loe=J([`
      background-color: #383d42;
    `])))),Uoe=le(Zc)(Boe||(Boe=J([`
  padding: 0.5em;
  color: white;
  max-width: 240px;
  pointer-events: none !important;
  --popover-bg: black;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: transparent;
  box-shadow: none;
`]))),zoe=lC.default.forwardRef((s,a)=>{let[l,d]=Kb({enabled:!0,verticalPlacement:s.tooltipPlacement,verticalGap:0},()=>lC.default.createElement(Uoe,{showPopoverEdgeTriangle:!1},s.easing.label));return lC.default.createElement(Foe,F({ref:nR([d,a])},s),l,lC.default.createElement(Ooe,{easing:xD(s.easing.value),isSelected:s.isSelected}))}),Voe=zoe});function eRe(s){var a;let[l,d]=(0,joe.useState)(null),f=b=>{if(l===null){s.items.length>0&&d(0);return}let _=l+b*s.uiColumns,S=_<0,C=_>s.items.length-1;if(S||C){if(s.canVerticleExit&&s.canVerticleExit(S?"top":"bottom")){d(null);return}return}d(_)},g=b=>{l===null?d(iRe(b,s.items.length)):l+b<0?d(null):d(Math.min(l+b,s.items.length-1))};return{focusFirstItem(){d(0)},onParentEltKeyDown:b=>{if(b.key==="ArrowRight")g(1);else if(b.key==="ArrowLeft")g(-1);else if(b.key==="ArrowUp")f(-1);else if(b.key==="ArrowDown")f(1);else return 0;return 1},gridItems:s.items.map((b,_)=>s.renderItem({isSelected:_===l,item:b,select(S){d(_),s.onSelectItem(b)===1&&(S==null||S.preventDefault(),S==null||S.stopPropagation())}})),currentSelection:(a=s.items[l??-1])!=null?a:null}}var joe,tRe=P(()=>{joe=X(Ne()),PD()});function Hoe(s,a,l){var d;(d=s.current)==null||d.discard(),s.current=null;let f=xD(l);f===null?s.current=rRe(a):s.current=nRe(a,f)}function Goe(s){var a;(a=s.current)==null||a.discard(),s.current=null}function nRe(s,a){return ue().tempTransaction(({stateEditors:l})=>{let{setHandlesForKeyframe:d,setKeyframeType:f}=l.coreByProject.historic.sheetsById.sequence;for(let{projectId:g,sheetId:b,objectKey:_,trackId:S,left:C,right:I}of s)d({projectId:g,sheetId:b,objectKey:_,trackId:S,keyframeId:C.id,start:[a[0],a[1]]}),d({projectId:g,sheetId:b,objectKey:_,trackId:S,keyframeId:I.id,end:[a[2],a[3]]}),f({projectId:g,sheetId:b,objectKey:_,trackId:S,keyframeId:C.id,keyframeType:"bezier"})})}function rRe(s){return ue().tempTransaction(({stateEditors:a})=>{let{setKeyframeType:l}=a.coreByProject.historic.sheetsById.sequence;for(let{projectId:d,sheetId:f,objectKey:g,trackId:b,left:_}of s)l({projectId:d,sheetId:f,objectKey:g,trackId:b,keyframeId:_.id,keyframeType:"hold"})})}function iRe(s,a){return(s%a+a)%a}function sRe(s,a){return()=>setTimeout(s,a)}function oRe({left:s,right:a}){return({left:l,right:d})=>s.handles[2]!==l.handles[2]||s.handles[3]!==l.handles[3]||a.handles[0]!==d.handles[0]||a.handles[1]!==d.handles[1]}var CD,xi,Woe,qV,YV,$oe,Koe,Xoe,qoe,Yoe,Zoe,Qoe,Joe,eae,tae,nae,rae,ZV,aRe,QV,iae,PD=P(()=>{CD=Nt,xi=X(Ne()),Ve(),Woe=X(KIe()),Te(),YIe(),JIe(),Aoe(),vD(),Rr(),tRe(),qV=3,YV=53,$oe=25,Xoe=le.div(Koe||(Koe=J([`
  background: `,`;
  display: grid;
  grid-template-areas:
    'search  tween'
    'presets tween';
  grid-template-rows: 32px 1fr;
  grid-template-columns: `,`px 120px;
  gap: 1px;
  height: 120px;
`])),HV,qV*YV),Yoe=le.div(qoe||(qoe=J([`
  overflow: auto;
  grid-area: presets;

  display: grid;
  grid-template-columns: repeat(`,`, 1fr);
  grid-auto-rows: min-content;
  gap: 1px;

  overflow-y: scroll;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
  &::-webkit-scrollbar {
    /* WebKit */
    width: 0;
    height: 0;
  }
`])),qV),Qoe=le.input.attrs({type:"text"})(Zoe||(Zoe=J([`
  background-color: `,`;
  border: none;
  border-radius: 2px;
  color: rgba(255, 255, 255, 0.8);
  padding: 6px;
  font-size: 12px;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: 100%;
  box-sizing: border-box;

  grid-area: search;

  &:hover {
    background-color: #212121;
  }

  &:focus {
    background-color: rgba(16, 16, 16, 0.26);
    outline: 1px solid rgba(0, 0, 0, 0.35);
  }
`])),Pf),eae=le.div(Joe||(Joe=J([`
  grid-area: tween;
  background: `,`;
`])),Pf),nae=le.div(tae||(tae=J([`
  grid-column: 1 / 4;
  padding: 6px;
  color: #888888;
`]))),rae=s=>{let a=(0,xi.useMemo)(()=>[s.curveConnection,...s.additionalConnections],[s.curveConnection,...s.additionalConnections]),l=(0,xi.useRef)(null);(0,xi.useEffect)(()=>{let de=iae(a);return()=>{var Oe;de(),(Oe=l.current)==null||Oe.commit()}},[l]);let d=[s.curveConnection.left.handles[2],s.curveConnection.left.handles[3],s.curveConnection.right.handles[0],s.curveConnection.right.handles[1]],f=(0,xi.useRef)(null);(0,xi.useLayoutEffect)(()=>{var de,Oe;(de=f.current)==null||de.select(),(Oe=f.current)==null||Oe.focus()},[f.current]);let[g,b]=(0,xi.useState)(wD(d)),_=de=>{de!==void 0&&(I(1),b(de.target.value),xD(de.target.value)&&R(de.target.value))},S=de=>{var Oe,Q;I(1),(de.key==="ArrowDown"||de.key==="ArrowUp")&&de.preventDefault(),de.key==="ArrowDown"?(it.focusFirstItem(),(Q=(Oe=ce.current[G[0].label])==null?void 0:Oe.current)==null||Q.focus()):de.key==="Escape"?(Goe(l),s.onRequestClose("key Escape")):de.key==="Enter"&&s.onRequestClose("key Enter")},[C,I]=(0,xi.useState)(0);(0,xi.useEffect)(()=>{C===2?b(wD(d)):C===3&&g!==""&&b("")},a);let[O,R]=(0,xi.useState)(wD(d)),[A,N]=(0,xi.useState)(null);(0,xi.useEffect)(()=>{var de;C!==0&&C!==3&&Hoe(l,a,(de=A??O)!=null?de:"")},[A,O,C]),a.some(oRe(s.curveConnection))&&C===0&&I(3);let L=de=>{var Oe,Q;I(2);let je=wD(de);b(je),R(je),(Oe=f.current)==null||Oe.select(),(Q=f.current)==null||Q.focus()},V=()=>{},G=(0,xi.useMemo)(()=>/^[A-Za-z]/.test(g)?Woe.default.filter(g,SD,{extract:de=>de.label}).map(de=>de.original):SD,[g]);(0,xi.useEffect)(()=>{C===1&&G[0]&&R(G[0].value)},[G]);let $=de=>{de.key==="Escape"?(Goe(l),s.onRequestClose("key Escape"),de.stopPropagation()):de.key==="Enter"&&(s.onRequestClose("key Enter"),de.stopPropagation())},Y=de=>{C===0&&I(2),N(de.value)},ie=()=>N(null),re=de=>(Hoe(l,a,de.value),s.onRequestClose("selected easing option"),1),ce=(0,xi.useRef)(SD.reduce((de,Oe)=>(de[Oe.label]={current:null},de),{})),[Pe,ye]=wr(null),[we,Le]=(0,xi.useState)(0);(0,xi.useEffect)(()=>{let de=()=>{var Oe;Le((Oe=ye==null?void 0:ye.scrollTop)!=null?Oe:0)};return ye==null||ye.addEventListener("scroll",de),()=>ye==null?void 0:ye.removeEventListener("scroll",de)},[ye]);let it=eRe({items:G,uiColumns:3,onSelectItem:re,canVerticleExit(de){var Oe,Q;return de==="top"?((Oe=f.current)==null||Oe.select(),(Q=f.current)==null||Q.focus(),1):0},renderItem:({item:de,select:Oe})=>{var Q,je;return xi.default.createElement(Voe,{key:de.label,easing:de,tabIndex:0,onKeyDown:$,ref:ce.current[de.label],onMouseOver:()=>Y(de),onMouseOut:ie,onClick:Oe,tooltipPlacement:((je=(Q=ce.current[de.label].current)==null?void 0:Q.offsetTop)!=null?je:0)-(we??0)<YV+$oe?"bottom":"top",isSelected:ZIe(d,xD(de.value))})}});return(0,xi.useLayoutEffect)(()=>{var de,Oe;if(it.currentSelection!==null&&document.activeElement!==f.current){let Q=(Oe=(de=ce.current)==null?void 0:de[it.currentSelection.label])==null?void 0:Oe.current;Q==null||Q.focus(),R(it.currentSelection.value),/^[A-Za-z]/.test(g)||b(it.currentSelection.value)}},[it.currentSelection]),xi.default.createElement(Xoe,null,xi.default.createElement(Qoe,{value:g,placeholder:C===3?"Multiple easings selected":"Search presets...",onPaste:sRe(_),onChange:_,ref:f,onKeyDown:S}),xi.default.createElement(Yoe,{ref:Pe,onKeyDown:de=>it.onParentEltKeyDown(de)},it.gridItems,it.gridItems.length===0?xi.default.createElement(nae,null,"No results found"):void 0),xi.default.createElement(eae,{onClick:()=>{var de;return(de=f.current)==null?void 0:de.focus()}},xi.default.createElement(Moe,{curveConnection:s.curveConnection,backgroundConnections:s.additionalConnections,onCurveChange:L,onCancelCurveChange:V})))},ZV=rae,{isCurveEditorOpenD:aRe,isConnectionEditingInCurvePopover:QV,getLock:iae}=(()=>{let s=new CD.Atom([]);return{getLock(a){return s.set(a),function(){s.set([])}},isCurveEditorOpenD:(0,CD.prism)(()=>s.prism.getValue().length>0),isConnectionEditingInCurvePopover(a){return CD.prism.ensurePrism(),s.prism.getValue().some(({left:l,right:d})=>a.left.id===l.id&&a.right.id===d.id)}}})()});function lRe(s,a){for(let{keyframeId:l}of dRe(a))if(s.left.id===l)return!0;return!1}function sae(s,a,l){return(0,MD.prism)(()=>{if(l===void 0)return[];let d=[];for(let{objectKey:f,trackId:g}of oae(l)){let b=(0,MD.val)(ue().atomP.historic.coreByProject[s].sheetsById[a].sequence.tracksByObject[f].trackData[g]);b&&(d=d.concat(cRe(b.keyframes).filter(_=>lRe(_,l)).map(({left:_,right:S})=>({left:_,right:S,trackId:g,objectKey:f,sheetId:a,projectId:s}))))}return d})}function TD(s,a,l){var d;if(l===void 0)return[];let f=[];for(let{objectKey:b,trackId:_,keyframeIds:S}of oae(l))f=f.concat((d=JV({projectId:s,sheetId:a,objectKey:b,trackId:_,keyframeIds:S}))!=null?d:[]);let g=oD(f.map(b=>b.pathToProp));return f.map(({keyframe:b,pathToProp:_})=>({keyframe:b,pathToProp:_.slice(g.length)}))}function JV({projectId:s,sheetId:a,objectKey:l,trackId:d,keyframeIds:f}){let g=(0,MD.val)(ue().atomP.historic.coreByProject[s].sheetsById[a].sequence.tracksByObject[l]),b=g==null?void 0:g.trackData[d];if(!b)return null;let _=uRe((g==null?void 0:g.trackIdByPropPath)||{})[d];if(!_)return null;let S=[l,...aD(_)];return f.map(C=>({keyframe:b.keyframes.find(I=>I.id===C),pathToProp:S})).filter(({keyframe:C})=>C!==void 0)}function uRe(s){let a={};for(let[l,d]of Object.entries(s))a[d]=l;return a}function cRe(s){return s.map((a,l)=>({left:a,right:s[l+1]})).slice(0,-1)}function dRe(s){var a,l,d;let f=[];for(let[g,b]of Object.entries((a=s==null?void 0:s.byObjectKey)!=null?a:{}))for(let[_,S]of Object.entries((l=b==null?void 0:b.byTrackId)!=null?l:{}))for(let C of Object.keys((d=S==null?void 0:S.byKeyframeId)!=null?d:{}))f.push({objectKey:g,trackId:_,keyframeId:C});return f}function oae(s){var a,l,d;let f=[];for(let[g,b]of Object.entries((a=s==null?void 0:s.byObjectKey)!=null?a:{}))for(let[_,S]of Object.entries((l=b==null?void 0:b.byTrackId)!=null?l:{}))f.push({objectKey:g,trackId:_,keyframeIds:Object.keys((d=S==null?void 0:S.byKeyframeId)!=null?d:{})});return f}var MD,i_=P(()=>{MD=Nt,Te(),rd()});function hRe(s,a){return(0,aae.useMemo)(()=>pRe(s,a),[])}function pRe(s,a){let l=null,d=b=>ue().tempTransaction(_=>s(_,b));function f(){l==null||l.discard(),l=null}let g={createAsset:a.sheet.project.assetStorage.createAsset,getAssetUrl:b=>b.id?a.sheet.project.assetStorage.getAssetUrl(b.id):void 0};return F({temporarilySetValue(b){f(),l=d(b)},discardTemporaryValue:f,permanentlySetValue(b){f(),d(b).commit()}},g)}var aae,fRe=P(()=>{Te(),aae=X(Ne())});function ej(s){var a;if(s.type==="sheetObject")return go.default.createElement(go.default.Fragment,null,go.default.createElement(kD,{style:{paddingLeft:"".concat(s.indent*AD,"px")}},s.sheetObject.address.objectKey),s.children.map((l,d)=>go.default.createElement(ej,B(F({key:d},l),{autoFocusInput:s.autoFocusInput&&d===0,indent:s.indent+1}))));if(s.type==="propWithChildren"){let l=(a=s.propConfig.label)!=null?a:rh(s.pathToProp);return go.default.createElement(go.default.Fragment,null,go.default.createElement(kD,{style:{paddingLeft:"".concat(s.indent*AD,"px")}},l),s.children.map((d,f)=>go.default.createElement(ej,B(F({key:f},d),{autoFocusInput:s.autoFocusInput&&f===0,indent:s.indent+1}))))}else return go.default.createElement(mRe,B(F({},s),{autoFocusInput:s.autoFocusInput,indent:s.indent}))}function mRe(s){var a;let l=(a=s.propConfig.label)!=null?a:rh(s.pathToProp),d=gRe(s);if(s.propConfig.type==="enum")return go.default.createElement(go.default.Fragment,null);{let f=kz[s.propConfig.type];return go.default.createElement(uae,null,go.default.createElement(kD,null,go.default.createElement("span",{style:{paddingLeft:"".concat(s.indent*AD,"px")}},l)),go.default.createElement(hae,null,go.default.createElement(f,{editingTools:d,propConfig:s.propConfig,value:CR(s.keyframe.value,s.propConfig),autoFocus:s.autoFocusInput})))}}function gRe(s){let a=s.sheetObject;return hRe(({stateEditors:l},d)=>{let f=B(F({},s.keyframe),{value:d});l.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},a.address),{trackId:s.trackId,keyframes:[f],snappingFunction:a.sheet.getSequence().closestGridPosition}))},a)}var go,lae,uae,cae,kD,AD,dae,hae,vRe=P(()=>{go=X(Ne()),Ve(),QJ(),eb(),fRe(),vf(),uae=le.div(lae||(lae=J([`
  display: flex;
  align-items: stretch;
  min-width: 200px;

  select {
    min-width: 100px;
  }
`]))),kD=le.div(cae||(cae=J([`
  font-style: normal;
  font-weight: 400;
  font-size: 11px;
  line-height: 13px;
  letter-spacing: 0.01em;
  padding: 6px 6px 6px 0;

  width: 40%;

  color: #919191;

  overflow: hidden;
`]))),AD=10,hae=le.div(dae||(dae=J([`
  display: flex;
  align-items: center;
  width: 60%;
`])))});function ID(s){return qc({debugName:"useKeyframeInlineEditorPopover"},()=>RD.default.createElement(Zc,{showPopoverEdgeTriangle:!0},RD.default.createElement("div",{style:{margin:"1px 2px 1px 10px"}},Array.isArray(s)?s.map((a,l)=>RD.default.createElement(ej,B(F({key:l},a),{autoFocusInput:l===0,indent:0}))):void 0)))}var RD,DD=P(()=>{RD=X(Ne()),Yc(),Qc(),vRe()});function yRe(s,a,l){return ca(s,{displayName:"Keyframe",menuItems:()=>{let d=TD(l.leaf.sheetObject.address.projectId,l.leaf.sheetObject.address.sheetId,l.selection);return[{label:d.length>0?"Copy (selection)":"Copy",callback:()=>{d.length>0?ue().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes(d)}):ue().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:l.keyframe,pathToProp:l.leaf.pathToProp}])})}},{label:l.selection!==void 0?"Delete (selection)":"Delete",callback:()=>{l.selection?l.selection.delete():ue().transaction(({stateEditors:f})=>{f.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},l.leaf.sheetObject.address),{keyframeIds:[l.keyframe.id],trackId:l.leaf.trackId}))})}}]},onOpen(){a._debug("Show keyframe",l)}})}function bRe(s,a,l){let d=(0,Tf.useRef)(a);d.current=a;let{onClickFromDrag:f}=l,g=(0,Tf.useMemo)(()=>({debugName:"KeyframeDot/useDragKeyframe",onDragStart(_){let S=d.current,C=(0,OD.val)(ue().atomP.historic.coreByProject[S.leaf.sheetObject.address.projectId].sheetsById[S.leaf.sheetObject.address.sheetId].sequence.tracksByObject),I=Zse(C,function(N,{trackId:L,objectKey:V}){var G,$;return N.id!==S.keyframe.id&&!(S.selection&&($=(G=S.selection.byObjectKey[V])==null?void 0:G.byTrackId[L])!=null&&$.byKeyframeId[N.id])});if(Yse(I),S.selection){let{selection:N,leaf:L}=S,{sheetObject:V}=L,G=N.getDragHandlers(B(F({},V.address),{domNode:s,positionAtStartOfDrag:S.track.data.keyframes[S.index].position})).onDragStart(_);return G&&B(F({},G),{onClick:f,onDragEnd:(...$)=>{var Y;(Y=G.onDragEnd)==null||Y.call(G,...$),dv()}})}let O=S,R=(0,OD.val)(O.layoutP.scaledSpace.toUnitSpace),A;return{onDrag(N,L,V){var G;let $=O.track.data.keyframes[O.index],Y=Math.max((G=ha.checkIfMouseEventSnapToPos(V,{ignore:s}))!=null?G:$.position+R(N),0);A==null||A.discard(),A=void 0,A=ue().tempTransaction(({stateEditors:ie})=>{ie.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},O.leaf.sheetObject.address),{trackId:O.leaf.trackId,keyframes:[B(F({},$),{position:Y})],snappingFunction:(0,OD.val)(O.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(N){N?A==null||A.commit():A==null||A.discard(),dv()},onClick(N){f(N)}}}}),[f]),[b]=Bi(s,g);return Ch(b,a.keyframe.position),Kl(b,"draggingPositionInSequenceEditor","ew-resize"),[b]}var Tf,OD,uC,tj,cC,nj,pae,LD,fae,mae,gae,vae,yae,bae,_ae=P(()=>{Tf=X(Ne()),Ve(),Te(),da(),Es(),Rr(),OD=Nt,mo(),ll(),Zu(),dD(),mf(),i_(),Dr(),hv(),DD(),sv(),uC=6,tj=uC+2,cC={normalColor:"#40AAA4",selectedColor:"#F2C95C",inlineEditorOpenColor:"#FCF3DC",selectedAndInlineEditorOpenColor:"#CBEBEA"},nj=({isSelected:s,isInlineEditorPopoverOpen:a})=>s&&a?cC.inlineEditorOpenColor:s?cC.selectedColor:a?cC.selectedAndInlineEditorOpenColor:cC.normalColor,LD=le.div(pae||(pae=J([`
  position: absolute;
  `,`

  background: `,`;
  transform: rotateZ(45deg);

  `,`;

  z-index: 1;
  pointer-events: none;
`])),Yl(uC),s=>nj(s),s=>s.flag===2?"outline: 2px solid white;":""),mae=le.div(fae||(fae=J([`
  position: absolute;
  `,`

  background: `,`;

  `,`;

  z-index: 1;
  pointer-events: none;
`])),Yl(uC*1.5),s=>nj(s),s=>s.flag===2?"outline: 2px solid white;":""),vae=le.div(gae||(gae=J([`
  z-index: 1;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  & + `,` {
    `,`
  }

  &:hover + `,` {
    `,`
  }
`])),Yl(12),kr,LD,s=>s.isInlineEditorPopoverOpen?Yl(tj):"",LD,Yl(tj)),yae=s=>{let a=ff("SingleKeyframeDot",s.keyframe.id),l=iv(s.itemKey),[d,f]=wr(null),[g]=yRe(f,a,s),{node:b,toggle:_,isOpen:S}=ID([{type:"primitiveProp",keyframe:s.keyframe,pathToProp:s.leaf.pathToProp,propConfig:s.leaf.propConf,sheetObject:s.leaf.sheetObject,trackId:s.leaf.trackId}]);bRe(f,s,{onClickFromDrag(I){_(I,d.current)}});let C=!s.keyframe.type||s.keyframe.type==="bezier";return Tf.default.createElement(Tf.default.Fragment,null,Tf.default.createElement(vae,F({ref:d,isInlineEditorPopoverOpen:S},l.attrs)),C?Tf.default.createElement(LD,{isSelected:!!s.selection,isInlineEditorPopoverOpen:S,flag:l.flag}):Tf.default.createElement(mae,{isSelected:!!s.selection,isInlineEditorPopoverOpen:S,flag:l.flag}),b,g)},bae=yae}),rj,ij,sj,gv,wae,xae,oj,Sae=P(()=>{al(),rj=X(Ne()),Ve(),_ae(),ij=uC/2+1,sj=1e3,gv={normalColor:"#365b59",selectedColor:"#8A7842",barColor:s=>{let a=s.isSelected?gv.selectedColor:gv.normalColor;return s.isPopoverOpen?jI(.2,Sb(.2,a)):a},hoverColor:s=>{let a=s.isSelected?gv.selectedColor:gv.normalColor;return s.isPopoverOpen?jI(.2,Sb(.2,a)):jI(.1,Sb(.1,a))}},xae=le.div(wae||(wae=J([`
  position: absolute;
  background: `,`;
  height: `,`px;
  width: `,`px;

  left: 0;
  top: -`,`px;
  transform-origin: top left;
  z-index: 0;
  cursor: ew-resize;

  &:after {
    display: block;
    position: absolute;
    content: ' ';
    top: -4px;
    bottom: -4px;
    left: 0;
    right: 0;
  }

  &:hover {
    background: `,`;
  }
`])),gv.barColor,ij,sj,ij/2,gv.hoverColor),oj=rj.default.forwardRef((s,a)=>{let l={isPopoverOpen:s.isPopoverOpen,isSelected:s.isSelected};return rj.default.createElement(xae,B(F({},l),{ref:a,style:{transform:"scaleX(calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(s.connectorLengthInUnitSpace/sj,"))")},onClick:d=>{var f;(f=s.openPopover)==null||f.call(s,d)}}),s.children)})});function _Re(s,a){let l=(0,aj.useRef)(a);l.current=a;let d=(0,aj.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(f){let g=l.current,b;if(g.selection){let{selection:I,leaf:O}=g,{sheetObject:R}=O;return I.getDragHandlers(B(F({},R.address),{domNode:s,positionAtStartOfDrag:g.track.data.keyframes[g.index].position})).onDragStart(f)}let _=g,S=(0,ND.val)(_.layoutP.sheet).getSequence(),C=(0,ND.val)(_.layoutP.scaledSpace.toUnitSpace);return{onDrag(I,O,R){let A=C(I);b&&(b.discard(),b=void 0),b=ue().tempTransaction(({stateEditors:N})=>{N.coreByProject.historic.sheetsById.sequence.transformKeyframes(B(F({},_.leaf.sheetObject.address),{trackId:_.leaf.trackId,keyframeIds:[_.keyframe.id,_.track.data.keyframes[_.index+1].id],translate:A,scale:1,origin:0,snappingFunction:S.closestGridPosition}))})},onDragEnd(I){I?b&&b.commit():b&&b.discard()}}}}),[]);Bi(s,d)}function wRe(s,a,l,d){return ca(a,{displayName:"Tween",menuItems:()=>{let f=TD(s.leaf.sheetObject.address.projectId,s.leaf.sheetObject.address.sheetId,s.selection);return[{label:f.length>0?"Copy (selection)":"Copy",callback:()=>{f.length>0?ue().transaction(g=>{g.stateEditors.studio.ahistoric.setClipboardKeyframes(f)}):ue().transaction(g=>{g.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:l,pathToProp:s.leaf.pathToProp},{keyframe:d,pathToProp:s.leaf.pathToProp}])})}},{label:s.selection?"Delete (selection)":"Delete",callback:()=>{s.selection?s.selection.delete():ue().transaction(({stateEditors:g})=>{g.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},s.leaf.sheetObject.address),{keyframeIds:[l.id,d.id],trackId:s.leaf.trackId}))})}}]}})}var ND,Mf,aj,lj,Eae,Cae,Pae,Tae,Mae,xRe=P(()=>{Te(),da(),Es(),Rr(),ND=Nt,Mf=X(Ne()),aj=X(Ne()),Yc(),Qc(),PD(),Sae(),vD(),Sn(),i_(),i_(),Ve(),lj=5,Cae=le(Zc)(Eae||(Eae=J([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: `,`;
`])),HV),Pae=s=>{let{index:a,track:l}=s,d=l.data.keyframes[a],f=l.data.keyframes[a+1],[g,b]=wr(null),{node:_,toggle:S,close:C}=qc(()=>{let A=(0,ND.val)(s.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:A.screenX+lj,maxX:A.screenX+A.width-lj}}},()=>Mf.default.createElement(Mae,B(F({},s),{closePopover:C}))),[I]=wRe(s,b,d,f);_Re(b,s);let O=f.position-d.position,R={isPopoverOpen:Yn(()=>QV(B(F({},s.leaf.sheetObject.address),{trackId:s.leaf.trackId,left:d,right:f})),[s.leaf.sheetObject.address,s.leaf.trackId,d,f]),isSelected:s.selection!==void 0};return Mf.default.createElement(Mf.default.Fragment,null,Mf.default.createElement(oj,B(F({ref:g,connectorLengthInUnitSpace:O},R),{openPopover:A=>{b&&S(A,b)}}),_),I)},Tae=Pae,Mae=Mf.default.forwardRef((s,a)=>{let{index:l,track:{data:d},selection:f}=s,g=d.keyframes[l],b=d.keyframes[l+1],_=s.leaf.trackId,S=s.leaf.sheetObject.address,C=Yn(()=>sae(S.projectId,S.sheetId,f).getValue(),[S,f]),I=F({left:g,right:b,trackId:_},S);return Mf.default.createElement(Cae,{showPopoverEdgeTriangle:!1,ref:a},Mf.default.createElement(ZV,{curveConnection:I,additionalConnections:C,onRequestClose:s.closePopover}))})}),kae,vv,Aae,Iae,Rae,Dae,Oae,SRe=P(()=>{kae=Nt,vv=X(Ne()),Ve(),xRe(),_ae(),Iae=le.div(Aae||(Aae=J([`
  position: absolute;
`]))),Rae=vv.default.createElement(vv.default.Fragment,null),Dae=vv.default.memo(s=>{let{index:a,track:{data:l}}=s,d=l.keyframes[a],f=l.keyframes[a+1],g=d.connectedRight&&!!f;return vv.default.createElement(Iae,{style:{top:"".concat(s.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,kae.val)(s.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(d.position,"px))")}},vv.default.createElement(bae,B(F({},s),{itemKey:s.itemKey})),g?vv.default.createElement(Tae,F({},s)):Rae)}),Oae=Dae});function ERe(s,a){return ca(s,{displayName:"Keyframe Track",menuItems:()=>{var l;let d=(l=(0,s_.val)(ue().atomP.ahistoric.clipboard.keyframesWithRelativePaths))!=null?l:[];return[CRe(a,d)]}})}function CRe(s,a){return{label:"Paste Keyframes",enabled:a.length>0,callback:()=>{var l;let d=(0,s_.val)(s.layoutP.sheet).getSequence(),f=(l=a[0])==null?void 0:l.pathToProp,g=a.filter(({keyframe:b,pathToProp:_})=>MIe(f,_)).map(({keyframe:b,pathToProp:_})=>b);ue().transaction(({stateEditors:b})=>{var _;d.position=d.closestGridPosition(d.position);let S=(_=PRe(g))==null?void 0:_.position;for(let C of g)b.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(B(F({},s.leaf.sheetObject.address),{trackId:s.leaf.trackId,position:d.position+C.position-S,handles:C.handles,value:C.value,snappingFunction:d.closestGridPosition,type:C.type}))})}}}function PRe(s){let a=null;for(let l of s)(a===null||l.position<a.position)&&(a=l);return a}var s_,Ph,Lae,Nae,uj,Fae,TRe=P(()=>{Sn(),s_=Nt,Ph=X(Ne()),Ve(),SRe(),da(),Rr(),Te(),rd(),hv(),wh(),Nae=le.div(Lae||(Lae=J([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),uj=Ph.default.memo(s=>{var a;let{layoutP:l,trackData:d,leaf:f}=s,[g,b]=wr(null),{selectedKeyframeIds:_,selection:S}=Yn(()=>{let Y=(0,s_.val)(l.selectionAtom),ie=(0,s_.val)(Y.pointer.current.byObjectKey[f.sheetObject.address.objectKey].byTrackId[f.trackId].byKeyframeId);return ie?{selectedKeyframeIds:ie,selection:(0,s_.val)(Y.pointer.current)}:{selectedKeyframeIds:{},selection:void 0}},[l,f.trackId]),[C,I,O]=ERe(b,s),R=rr(zV),A=R.mode==="snapToSome"?(a=R.positions[f.sheetObject.address.objectKey])==null?void 0:a[f.trackId]:[],N=R.mode==="snapToAll",L=(0,Ph.useMemo)(()=>({data:d,id:f.trackId,sheetObject:s.leaf.sheetObject}),[d,f.trackId]),V=d.keyframes.map((Y,ie)=>Ph.default.createElement(Oae,{key:"keyframe-"+Y.id,itemKey:Ns.forTrackKeyframe(f.sheetObject,f.trackId,Y.id),keyframe:Y,index:ie,track:L,layoutP:l,leaf:f,selection:_[Y.id]===!0?S:void 0})),G=A.map(Y=>Ph.default.createElement(rC,{key:"snap-target-"+Y,layoutP:l,leaf:f,position:Y})),$=N?d.keyframes.map(Y=>Ph.default.createElement(rC,{key:"additionalSnapTarget-".concat(Y.id),layoutP:l,leaf:f,position:Y.position})):null;return Ph.default.createElement(Nae,{ref:g,style:{background:O?"#444850 ":"unset"}},V,G,Ph.default.createElement(Ph.default.Fragment,null,$),C)}),uj.displayName="BasicKeyframedTrack",Fae=uj}),Bae,dC,Uae,zae,MRe=P(()=>{Te(),Sn(),Bae=Nt,dC=X(Ne()),mD(),TRe(),mf(),Uae=({leaf:s,layoutP:a})=>{let l=ff("PrimitivePropRow",s.pathToProp.join());return Yn(()=>{let{sheetObject:d}=s,{trackId:f}=s,g=(0,Bae.val)(ue().atomP.historic.coreByProject[d.address.projectId].sheetsById[d.address.sheetId].sequence.tracksByObject[d.address.objectKey].trackData[f]);return(g==null?void 0:g.type)!=="BasicKeyframedTrack"?(l.errorDev("trackData type ".concat(g==null?void 0:g.type," is not yet supported on the sequence editor")),dC.default.createElement(t_,{leaf:s,isCollapsed:!1,node:dC.default.createElement("div",null)})):dC.default.createElement(t_,{leaf:s,isCollapsed:!1,node:dC.default.createElement(Fae,{layoutP:a,trackData:g,leaf:s})})},[s,a])},zae=Uae});function kRe(s){return s()}var ARe=P(()=>{});function Vae(s){let{index:a,aggregateKeyframes:l,selection:d}=s;return Yn(jae(s),[a,l,d,s.viewModel])}function jae(s){let{index:a,aggregateKeyframes:l,selection:d}=s,{projectId:f,sheetId:g}=s.viewModel.type==="sheet"?s.viewModel.sheet.address:s.viewModel.sheetObject.address;return()=>{let b=l[a],_=l[a+1],S=_&&b.keyframes.length===_.keyframes.length&&b.keyframes.every(({track:R},A)=>_.keyframes[A].track===R)?{length:_.position-b.position,selected:b.selected===0&&_.selected===0}:null,C=S?b.keyframes.map(({kf:R,track:A},N)=>B(F({},A.sheetObject.address),{trackId:A.id,left:R,right:_.keyframes[N].kf})):[],I=kRe(()=>{let R=cj.prism.memo("selectedConnections",()=>sae(f,g,d),[f,g,d]).getValue();return[...C,...R]}),O=C.every(R=>QV(R));return{itemKey:cj.prism.memo("itemKey",()=>s.viewModel.type==="sheet"?Ns.forSheetAggregateKeyframe(s.viewModel.sheet,b.position):s.viewModel.type==="sheetObject"?Ns.forSheetObjectAggregateKeyframe(s.viewModel.sheetObject,b.position):Ns.forCompoundPropAggregateKeyframe(s.viewModel.sheetObject,s.viewModel.pathToProp,b.position),[s.viewModel,b.position]),cur:b,connected:S,isAggregateEditingInCurvePopover:O,allConnections:I}}}var cj,dj=P(()=>{cj=Nt,wh(),PD(),Sn(),i_(),ARe()});function IRe(s,a){let l=(0,Zl.useRef)(a);l.current=a;let d=(0,Zl.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(f){let g=l.current,b,_=g.aggregateKeyframes[g.index].keyframes,{selection:S,viewModel:C}=g,I=C.type==="sheet"?C.sheet.address:C.sheetObject.address;if(S&&g.aggregateKeyframes[g.index].selected===0)return S.getDragHandlers(B(F({},I),{domNode:s,positionAtStartOfDrag:g.aggregateKeyframes[g.index].position})).onDragStart(f);let O=g,R=(0,FD.val)(O.layoutP.sheet).getSequence(),A=(0,FD.val)(O.layoutP.scaledSpace.toUnitSpace);return{onDrag(N,L,V){let G=A(N);b&&(b.discard(),b=void 0),b=ue().tempTransaction(({stateEditors:$})=>{for(let Y of _)$.coreByProject.historic.sheetsById.sequence.transformKeyframes(B(F({},Y.track.sheetObject.address),{trackId:Y.track.id,keyframeIds:[Y.kf.id,Y.track.data.keyframes[Y.track.data.keyframes.indexOf(Y.kf)+1].id],translate:G,scale:1,origin:0,snappingFunction:R.closestGridPosition}))})},onDragEnd(N){N?b&&b.commit():b&&b.discard()}}}}),[]);return Bi(s,d)}function RRe(s,a){return ca(a,{displayName:"Aggregate Tween",menuItems:()=>{let l=s.utils.allConnections.reduce((_,S)=>{var C;return _.concat((C=JV(B(F({},S),{keyframeIds:[S.left.id,S.right.id]})))!=null?C:[])},[]),d=oD(l.map(_=>_.pathToProp)),f=l.map(({keyframe:_,pathToProp:S})=>({keyframe:_,pathToProp:S.slice(d.length)})),g=s.editorProps.viewModel,b=g.type==="sheet"?g.sheet.address:g.sheetObject.address;return[{label:"Copy",callback:()=>{if(s.editorProps.selection){let _=TD(b.projectId,b.sheetId,s.editorProps.selection);ue().transaction(S=>{S.stateEditors.studio.ahistoric.setClipboardKeyframes(_)})}else ue().transaction(_=>{_.stateEditors.studio.ahistoric.setClipboardKeyframes(f)})}},{label:"Delete",callback:()=>{s.editorProps.selection?s.editorProps.selection.delete():ue().transaction(({stateEditors:_})=>{for(let S of s.utils.allConnections)_.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},b),{objectKey:S.objectKey,keyframeIds:[S.left.id,S.right.id],trackId:S.trackId}))})}}]}})}var FD,Zl,hj,Hae,Gae,Wae,$ae,DRe=P(()=>{FD=Nt,Zl=X(Ne()),Sae(),Yc(),Rr(),Te(),Es(),PD(),dj(),Ve(),Qc(),i_(),da(),rd(),hj=5,Gae=le(Zc)(Hae||(Hae=J([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: rgba(26, 28, 30, 0.97);
`]))),Wae=Zl.default.forwardRef((s,a)=>{let{allConnections:l}=Vae(s);return Zl.default.createElement(Gae,{showPopoverEdgeTriangle:!1,ref:a},Zl.default.createElement(ZV,{curveConnection:l[0],additionalConnections:l,onRequestClose:s.closePopover}))}),$ae=s=>{let[a,l]=wr(null),{editorProps:d}=s,[f]=RRe(s,l),[g]=IRe(l,s.editorProps),{node:b,toggle:_,close:S}=qc(()=>{let O=(0,FD.val)(d.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:O.screenX+hj,maxX:O.screenX+O.width-hj}}},()=>Zl.default.createElement(Wae,B(F({},d),{closePopover:S}))),{connected:C,isAggregateEditingInCurvePopover:I}=s.utils;return C||g?Zl.default.createElement(Zl.default.Fragment,null,Zl.default.createElement(oj,{ref:a,connectorLengthInUnitSpace:C?C.length:0,isSelected:C?C.selected:!1,isPopoverOpen:I,openPopover:O=>{l&&_(O,l)}}),b,f):Zl.default.createElement(Zl.default.Fragment,null)}});function ORe(s){let a={isSelected:s.isSelected,flag:s.flag};return Th.default.createElement(BD,null,s.isAllHere?Th.default.createElement(Qae,F({},a)):Th.default.createElement(Jae,F({},a)))}var Th,pj,Kae,Xae,BD,qae,Yae,fj,mj,gj,vj,Zae,Qae,Jae,LRe=P(()=>{Th=X(Ne()),Ve(),dD(),Dr(),pj=16,Kae=pj+2,BD=le.div(Xae||(Xae=J([`
  position: absolute;
  `,`
  z-index: 1;
`])),Yl(pj)),Yae=le.div(qae||(qae=J([`
  z-index: 2;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  &:hover
    + `,`,
    #pointer-root.draggingPositionInSequenceEditor
    &:hover
    + `,` {
    `,`
  }
`])),Yl(12),kr,BD,BD,Yl(Kae)),fj="#F2C95C",mj="#40AAA4",gj="#45747C",vj=s=>s.isSelected===0?fj:s.isSelected===1?mj:gj,Zae=s=>s.isSelected===0?fj:s.isSelected===1?mj:gj,Qae=s=>Th.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Th.default.createElement("rect",{x:"4.46443",y:"10.0078",width:"5",height:"5",transform:"rotate(-45 4.46443 10.0078)",fill:"#212327",stroke:Zae(s)}),Th.default.createElement("rect",{x:"3.75732",y:"6.01953",width:"6",height:"6",transform:"rotate(-45 3.75732 6.01953)",fill:vj(s),stroke:s.flag===2?"white":void 0,strokeWidth:s.flag===2?"2px":void 0})),Jae=s=>Th.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Th.default.createElement("rect",{x:"4.46443",y:"8",width:"5",height:"5",transform:"rotate(-45 4.46443 8)",fill:"#23262B",stroke:s.flag===2?"white":vj(s),strokeWidth:s.flag===2?"2px":void 0}))});function NRe(s,a){let l=s.children.map(d=>d.type==="propWithChildren"?yj(d,a):ele(d,a)).filter(bj);return l.length===0?null:{type:"sheetObject",sheetObject:s.sheetObject,children:l}}function yj(s,a){let l=s.children.map(d=>d.type==="propWithChildren"?yj(d,a):ele(d,a)).filter(bj);return l.length===0?null:{type:"propWithChildren",pathToProp:s.pathToProp,propConfig:s.propConf,children:l}}function ele(s,a){let l=a.find(d=>d.track.id===s.trackId);return l?{type:"primitiveProp",keyframe:l.kf,pathToProp:s.pathToProp,propConfig:s.propConf,sheetObject:s.sheetObject,trackId:s.trackId}:null}function FRe(s){var a,l,d,f;let{cur:g}=s.utils,b=ID(s.editorProps.viewModel.type==="sheet"?null:s.editorProps.viewModel.type==="sheetObject"?(l=(a=NRe(s.editorProps.viewModel,g.keyframes))==null?void 0:a.children)!=null?l:null:(f=(d=yj(s.editorProps.viewModel,g.keyframes))==null?void 0:d.children)!=null?f:null),_=iv(s.utils.itemKey);_.useRelations(()=>g.keyframes.map(O=>({affects:O.itemKey,flag:2})),[g.keyframes.map(O=>O.track.id).join("-")]);let[S,C]=wr(null),[I]=BRe(s,C);return hC.default.createElement(hC.default.Fragment,null,hC.default.createElement(Yae,B(F(F({ref:S},_.attrs),ha.includePositionSnapAttrs(g.position)),{onClick:O=>s.editorProps.viewModel.type!=="sheet"?b.open(O,S.current):null})),hC.default.createElement(ORe,{flag:_.flag,isAllHere:g.allHere,isSelected:g.selected}),I,b.node)}function BRe(s,a){return ca(a,{displayName:"Aggregate Keyframe",menuItems:()=>{let l=s.editorProps.viewModel,d=s.editorProps.selection;return[{label:d?"Copy (selection)":"Copy",callback:()=>{if(d){let{projectId:f,sheetId:g}=l.type==="sheet"?l.sheet.address:l.sheetObject.address,b=TD(f,g,d);ue().transaction(_=>{_.stateEditors.studio.ahistoric.setClipboardKeyframes(b)})}else{let f=s.utils.cur.keyframes.flatMap(S=>{var C;return(C=JV(B(F({},S.track.sheetObject.address),{trackId:S.track.id,keyframeIds:[S.kf.id]})))!=null?C:[]}),g=l.type==="sheet"?[]:l.type==="sheetObject"?[l.sheetObject.address.objectKey]:l.type==="propWithChildren"?[l.sheetObject.address.objectKey,...l.pathToProp]:[],b=oD([g,...f.map(S=>S.pathToProp)]),_=f.map(({keyframe:S,pathToProp:C})=>({keyframe:S,pathToProp:C.slice(b.length)}));ue().transaction(S=>{S.stateEditors.studio.ahistoric.setClipboardKeyframes(_)})}}},{label:d?"Delete (selection)":"Delete",callback:()=>{d?d.delete():ue().transaction(({stateEditors:f})=>{for(let g of s.utils.cur.keyframes)f.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},g.track.sheetObject.address),{keyframeIds:[g.kf.id],trackId:g.track.id}))})}}]}})}var hC,bj,URe=P(()=>{hC=X(Ne()),Rr(),sv(),da(),LRe(),Te(),i_(),rd(),Zu(),DD(),bj=s=>s!==null}),tle,pC,nle,rle,ile,sle,zRe=P(()=>{tle=Nt,pC=X(Ne()),Ve(),DRe(),dj(),URe(),rle=le.div(nle||(nle=J([`
  position: absolute;
`]))),ile=pC.default.memo(s=>{let a=Vae(s);return pC.default.createElement(rle,{style:{top:"".concat(s.viewModel.nodeHeight/2,"px"),left:"calc(".concat((0,tle.val)(s.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(a.cur.position,"px))")}},pC.default.createElement(FRe,{editorProps:s,utils:a}),pC.default.createElement($ae,{editorProps:s,utils:a}))}),sle=ile});function VRe(s){let{layoutP:a,aggregatedKeyframes:l,viewModel:d}=s,f=ff("AggregatedKeyframeTrack"),[g,b]=wr(null),{selectedPositions:_,selection:S}=jRe(a,l),[C,I,O]=WRe(b,s,()=>f._debug("see aggregatedKeyframes",s.aggregatedKeyframes)),R=(0,Ql.useMemo)(()=>[...l.byPosition.entries()].sort((Y,ie)=>Y[0]-ie[0]).map(([Y,ie])=>({position:Y,keyframes:ie,selected:_.get(Y),allHere:ie.length===l.tracks.length})),[l,_]),A=rr(zV),N=A.mode==="snapToAll",L=A.mode==="snapToSome"?A.positions:jz,V=(0,Ql.useMemo)(()=>d.type==="sheet"?FIe(d,L):DV(d,L),[L]).map(Y=>Ql.default.createElement(rC,{key:"snap-target-"+Y,layoutP:a,leaf:d,position:Y})),G=(0,Ql.useMemo)(()=>R.map(({position:Y,keyframes:ie},re)=>({position:Y,editorProps:{index:re,layoutP:a,viewModel:d,aggregateKeyframes:R,selection:_.has(Y)?S:void 0}})),[R,d,_]);qRe(b,Y=>{var ie;return(ie=G.find(re=>re.position===Y))==null?void 0:ie.editorProps},{onClickFromDrag(Y){}});let $=G.map((Y,ie)=>Ql.default.createElement(Ql.Fragment,{key:"agg-"+R[ie].keyframes[0].kf.id},N&&Ql.default.createElement(rC,{layoutP:a,leaf:d,position:Y.position}),Ql.default.createElement(sle,F({},Y.editorProps))));return Ql.default.createElement(ule,{ref:g,style:{background:O?"#444850 ":"unset"}},$,V,C)}function jRe(s,a){return Yn(()=>(0,fa.val)(HRe(s,a)),[s,a])}function HRe(s,a){return(0,fa.prism)(()=>{let l=(0,fa.val)(s.selectionAtom),d=(0,fa.val)(l.pointer.current);if(!d)return cle;let f=new Map;for(let[g,b]of a.byPosition){let _=GRe(b,d);_!==void 0&&_!==zD&&f.set(g,_)}return{selectedPositions:f,selection:(0,fa.val)(l.pointer.current)}})}function GRe(s,a){var l,d,f;let g;for(let{track:b,kf:_}of s){let S=((f=(d=(l=a.byObjectKey[b.sheetObject.address.objectKey])==null?void 0:l.byTrackId[b.id])==null?void 0:d.byKeyframeId)==null?void 0:f[_.id])===!0;g===void 0?S?g=xj:g=zD:S?g===zD&&(g=Sj):g===xj&&(g=Sj)}return g}function WRe(s,a,l){return ca(s,{onOpen:l,displayName:"Aggregate Keyframe Track",menuItems:()=>{var d;let f=(d=(0,fa.pointerToPrism)(ue().atomP.ahistoric.clipboard.keyframesWithRelativePaths).getValue())!=null?d:[];return[$Re(a,f)]}})}function $Re(s,a){return{label:"Paste Keyframes",enabled:a.length>0,callback:()=>{let l=(0,fa.val)(s.layoutP.sheet).getSequence();s.viewModel.type==="sheet"?KRe(s.viewModel,a,l):XRe(s.viewModel,a,l)}}}function KRe(s,a,l){var d;let{projectId:f,sheetId:g,sheetInstanceId:b}=s.sheet.address;if(a.every(({pathToProp:_})=>_.length===0))for(let _ of s.children.map(S=>S.sheetObject)){let S=(0,fa.pointerToPrism)(ue().atomP.historic.coreByProject[f].sheetsById[g].sequence.tracksByObject[_.address.objectKey]).getValue(),C=Object.keys((d=S==null?void 0:S.trackData)!=null?d:{});_j(_.address,C,a,l)}else{let _=(0,fa.pointerToPrism)(ue().atomP.historic.coreByProject[f].sheetsById[g].sequence.tracksByObject).getValue(),S=a.map(({keyframe:C,pathToProp:I})=>{var O,R;let A=I[0],N=I.slice(1),L=nd([...N]),V=((R=(O=_==null?void 0:_[A])==null?void 0:O.trackIdByPropPath)!=null?R:{})[L];return V?{keyframe:C,trackId:V,address:{objectKey:A,projectId:f,sheetId:g,sheetInstanceId:b}}:null}).filter(C=>C!==null);ole(S,l)}}function XRe(s,a,l){var d;let{projectId:f,sheetId:g,objectKey:b}=s.sheetObject.address,_=(0,fa.pointerToPrism)(ue().atomP.historic.coreByProject[f].sheetsById[g].sequence.tracksByObject[b]).getValue();if(a.every(({pathToProp:S})=>S.length===0)){let S=Object.keys((d=_==null?void 0:_.trackData)!=null?d:{});if(s.type==="sheetObject")_j(s.sheetObject.address,S,a,l);else{let C=(_==null?void 0:_.trackIdByPropPath)||{},I=Object.entries(C).filter(([O,R])=>R!==void 0&&TIe(aD(O),s.pathToProp)).map(([O,R])=>R);_j(s.sheetObject.address,I,a,l)}}else{let S=(_==null?void 0:_.trackIdByPropPath)||{},C=s.type==="propWithChildren"?s.pathToProp:[],I=a.map(({keyframe:O,pathToProp:R})=>{let A=nd([...C,...R]),N=S[A];return N?{keyframe:O,trackId:N,address:s.sheetObject.address}:null}).filter(O=>O!==null);ole(I,l)}}function _j(s,a,l,d){var f;d.position=d.closestGridPosition(d.position);let g=(f=ale(l.map(({keyframe:b})=>b)))==null?void 0:f.position;ue().transaction(({stateEditors:b})=>{for(let _ of a)for(let{keyframe:S}of l)b.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(B(F({},s),{trackId:_,position:d.position+S.position-g,handles:S.handles,value:S.value,snappingFunction:d.closestGridPosition,type:S.type}))})}function ole(s,a){var l;a.position=a.closestGridPosition(a.position);let d=(l=ale(s.map(({keyframe:f})=>f)))==null?void 0:l.position;ue().transaction(({stateEditors:f})=>{for(let{keyframe:g,trackId:b,address:_}of s)f.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(B(F({},_),{trackId:b,position:a.position+g.position-d,handles:g.handles,value:g.value,snappingFunction:a.closestGridPosition,type:g.type}))})}function ale(s){let a=null;for(let l of s)(a===null||l.position<a.position)&&(a=l);return a}function qRe(s,a,l){let d=ff("useDragForAggregateKeyframeDot"),f=Hse(),g=(0,Ql.useMemo)(()=>({debugName:"AggregateKeyframeDot/useDragKeyframe",onDragStart(_){d._debug("onDragStart",{target:_.target});let S=Number(_.target.dataset.pos),C=a(S);if(!C)return d._debug("no props found for ",{positionToFind:S}),!1;f(!0,S);let I=(0,fa.prism)(jae(C)).getValue().cur.keyframes,O=C.viewModel.type==="sheet"?C.viewModel.sheet.address:C.viewModel.sheetObject.address,R=(0,fa.val)(ue().atomP.historic.coreByProject[O.projectId].sheetsById[O.sheetId].sequence.tracksByObject),A=Zse(R,function(G,{trackId:$,objectKey:Y}){var ie,re;return I.every(ce=>G.id!==ce.kf.id)&&!(C.selection&&(re=(ie=C.selection.byObjectKey[Y])==null?void 0:ie.byTrackId[$])!=null&&re.byKeyframeId[G.id])});if(Yse(A),C.selection&&C.aggregateKeyframes[C.index].selected===0){let{selection:G,viewModel:$}=C,Y=G.getDragHandlers(B(F({},O),{domNode:s,positionAtStartOfDrag:I[0].kf.position})).onDragStart(_);return Y&&B(F({},Y),{onClick:l.onClickFromDrag,onDragEnd:(...ie)=>{var re;(re=Y.onDragEnd)==null||re.call(Y,...ie),dv()}})}let N=C,L=(0,fa.val)(N.layoutP.scaledSpace.toUnitSpace),V;return{onDrag(G,$,Y){var ie;let re=Math.max((ie=ha.checkIfMouseEventSnapToPos(Y,{}))!=null?ie:I[0].kf.position+L(G),0);f(!0,re),V==null||V.discard(),V=void 0,V=ue().tempTransaction(({stateEditors:ce})=>{for(let Pe of I){let ye=Pe.kf;ce.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},Pe.track.sheetObject.address),{trackId:Pe.track.id,keyframes:[B(F({},ye),{position:re})],snappingFunction:(0,fa.val)(N.layoutP.sheet).getSequence().closestGridPosition}))}})},onDragEnd(G){f(!1,-1),G?V==null||V.commit():(V==null||V.discard(),l.onClickFromDrag(_)),dv()},onClick(G){l.onClickFromDrag(G)}}}}),[a,l.onClickFromDrag]),[b]=Bi(s,g);return Kl(b,"draggingPositionInSequenceEditor","ew-resize"),[b]}var fa,Ql,lle,ule,cle,dle,UD,wj,xj,Sj,zD,Ej=P(()=>{Sn(),fa=Nt,Ql=X(Ne()),Ve(),da(),Rr(),zRe(),Jb(),mf(),dj(),Zu(),Es(),mo(),ll(),Te(),rd(),hv(),Jee(),hv(),Jb(),ule=le.div(lle||(lle=J([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),cle=Object.freeze({selectedPositions:new Map,selection:void 0}),dle=Ql.default.memo(VRe),UD=dle,wj=(s=>(s[s.AllSelected=0]="AllSelected",s[s.AtLeastOneUnselected=1]="AtLeastOneUnselected",s[s.NoneSelected=2]="NoneSelected",s))(wj||{}),{AllSelected:xj,AtLeastOneUnselected:Sj,NoneSelected:zD}=wj}),o_,Cj,hle,YRe=P(()=>{Sn(),o_=X(Ne()),MRe(),mD(),Ej(),Jb(),mf(),Cj=(s,a)=>s.type==="propWithChildren"?o_.default.createElement(hle,{layoutP:a,viewModel:s,key:"prop"+s.pathToProp[s.pathToProp.length-1]}):o_.default.createElement(zae,{layoutP:a,leaf:s,key:"prop"+s.pathToProp[s.pathToProp.length-1]}),hle=({viewModel:s,layoutP:a})=>{let l=ff("RightPropWithChildrenRow",s.pathToProp.join());return Yn(()=>{let d=uD(s);return o_.default.createElement(lZ,{logger:l},o_.default.createElement(t_,{leaf:s,node:o_.default.createElement(UD,{layoutP:a,aggregatedKeyframes:d,viewModel:s}),isCollapsed:s.isCollapsed},s.children.map(f=>Cj(f,a))))},[s,a])}}),Pj,ple,fle,ZRe=P(()=>{Sn(),Pj=X(Ne()),YRe(),mD(),Jb(),Ej(),ple=({leaf:s,layoutP:a})=>Yn(()=>{let l=uD(s);return Pj.default.createElement(t_,{leaf:s,node:Pj.default.createElement(UD,{layoutP:a,aggregatedKeyframes:l,viewModel:s}),isCollapsed:s.isCollapsed},s.children.map(d=>Cj(d,a)))},[s,a]),fle=ple}),VD,mle,gle,QRe=P(()=>{Sn(),VD=X(Ne()),ZRe(),mD(),Jb(),Ej(),mle=({leaf:s,layoutP:a})=>Yn(()=>{let l=uD(s);return VD.default.createElement(t_,{leaf:s,node:VD.default.createElement(UD,{layoutP:a,aggregatedKeyframes:l,viewModel:s}),isCollapsed:s.isCollapsed},s.children.map(d=>VD.default.createElement(fle,{layoutP:a,key:"sheetObject-"+d.sheetObject.address.objectKey,leaf:d})))},[s,a]),gle=mle}),fC,yv,jD,vle,yle,ble,_le,wle=P(()=>{Sn(),fC=Nt,yv=X(Ne()),Ve(),zIe(),loe(),QRe(),jD=1e6,yle=le.ul(vle||(vle=J([`
  margin: 0;
  padding: 0;
  list-style: none;
  position: absolute;
  left: 0;
  width: `,`px;
`])),jD),ble=({layoutP:s})=>Yn(()=>{let a=(0,fC.val)(s.tree),l=(0,fC.val)(s.tree.top)+Math.max((0,fC.val)(s.tree.heightIncludingChildren),(0,fC.val)(s.dopeSheetDims.height));return yv.default.createElement(yv.default.Fragment,null,yv.default.createElement(jV,{layoutP:s,height:l},yv.default.createElement(Ase,{layoutP:s,height:l},yv.default.createElement(yle,{style:{top:a.top+"px"}},yv.default.createElement(gle,{leaf:a,layoutP:s})))))},[s]),_le=ble});function Tj(s,a,l,d){let f="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(s,"px)"),g="calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(a,") * 1px)");l===0&&(l=1e-4);let b="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(l,")");d===0&&(d=.001);let _="calc(var(--graphEditorVerticalSpace) * ".concat(d*-1,")");return"translate(".concat(f,", ").concat(g,") scale(").concat(b,", ").concat(_,")")}function JRe(s,a){let{index:l,trackData:d}=a,f=d.keyframes[l],g=d.keyframes[l+1];return ca(s,{menuItems:()=>[{label:"Delete",callback:()=>{ue().transaction(({stateEditors:b})=>{let{deleteKeyframes:_}=b.coreByProject.historic.sheetsById.sequence;_(B(F({},a.sheetObject.address),{trackId:a.trackId,keyframeIds:[f.id,g.id]}))})}}]})}var HD,xle,Sle,Ele,Cle,Ple,Mj=P(()=>{vf(),Te(),da(),Rr(),HD=X(Ne()),Ve(),Sle=le.path(xle||(xle=J([`
  stroke-width: 2;
  stroke: var(--main-color);
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),Ele="M 0 0 L 1 0 L 1 1",Cle=s=>{let{index:a,trackData:l}=s,d=l.keyframes[a],f=l.keyframes[a+1],g=f.position-d.position,[b,_]=wr(null),[S]=JRe(_,s),C=s.isScalar?CR(d.value,s.propConfig):0,I=s.isScalar?CR(f.value,s.propConfig):1,O=s.extremumSpace.fromValueSpace(C),R=s.extremumSpace.fromValueSpace(I)-O,A=Tj(d.position,O,g,R),N=d.handles[2],L=d.handles[3],V=f.handles[0],G=f.handles[1],$="M 0 0 C ".concat(N," ").concat(L," ").concat(V," ").concat(G," 1 1");return HD.default.createElement(HD.default.Fragment,null,HD.default.createElement(Sle,{ref:b,d:!d.type||d.type==="bezier"?$:Ele,style:{transform:A}}),S)},Ple=Cle});function eDe(s,a){let l=(0,bv.useRef)(a);l.current=a;let d=(0,bv.useMemo)(()=>({debugName:"CurveHandler/useOurDrags",lockCSSCursorTo:"move",onDragStart(){let f,g=l.current,b=(0,mC.val)(g.layoutP.scaledSpace.toUnitSpace),_=(0,mC.val)(g.layoutP.graphEditorVerticalSpace.toExtremumSpace),S=g.extremumSpace.lock();return{onDrag(C,I){f&&(f.discard(),f=void 0);let{index:O,trackData:R}=g,A=R.keyframes[O],N=R.keyframes[O+1],L=b(C)/(N.position-A.position),V=-I,G=_(V),$=g.extremumSpace.deltaToValueSpace(G),Y=a.isScalar?A.value:0,ie=a.isScalar?N.value:1,re=$/(ie-Y);if(g.which==="left"){let ce=_i(A.handles[2]+L,0,1),Pe=A.handles[3]+re;f=ue().tempTransaction(({stateEditors:ye})=>{ye.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},g.sheetObject.address),{snappingFunction:(0,mC.val)(g.layoutP.sheet).getSequence().closestGridPosition,trackId:g.trackId,keyframes:[B(F({},A),{handles:[A.handles[0],A.handles[1],ce,Pe]})]}))})}else{let ce=_i(N.handles[0]+L,0,1),Pe=N.handles[1]+re;f=ue().tempTransaction(({stateEditors:ye})=>{ye.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},g.sheetObject.address),{trackId:g.trackId,snappingFunction:(0,mC.val)(g.layoutP.sheet).getSequence().closestGridPosition,keyframes:[B(F({},N),{handles:[ce,Pe,N.handles[2],N.handles[3]]})]}))})}},onDragEnd(C){S(),C?f&&f.commit():f&&f.discard()}}}}),[]);Bi(s,d)}function tDe(s,a){return ca(s,{menuItems:()=>[{label:"Delete",callback:()=>{ue().transaction(({stateEditors:l})=>{l.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},a.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.trackId}))})}}]})}var mC,bv,Tle,kj,Mle,kle,Ale,Ile,Rle,Aj,nDe=P(()=>{Te(),da(),Es(),Rr(),mC=Nt,di(),bv=X(Ne()),Ve(),Mj(),Dr(),kj=le.circle(Tle||(Tle=J([`
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  fill: var(--main-color);
  r: 2px;
  pointer-events: none;
`]))),kle=le.circle(Mle||(Mle=J([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  cursor: move;
  `,`;
  &:hover {
  }
  &:hover + `,` {
    r: 6px;
  }
`])),kr,kj),Ile=le.path(Ale||(Ale=J([`
  stroke-width: 1;
  stroke: var(--main-color);
  /* stroke: gray; */
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),Rle=s=>{let[a,l]=wr(null),{index:d,trackData:f}=s,g=f.keyframes[d],b=f.keyframes[d+1],[_]=tDe(l,s);eDe(l,s);let S=s.which==="left"?g.handles[2]:b.handles[0],C=g.position+(b.position-g.position)*S,I=s.which==="left"?g.handles[3]:b.handles[1],O=s.isScalar?g.value:0,R=s.isScalar?b.value:1,A=O+(R-O)*I,N=s.extremumSpace.fromValueSpace(A),L=N-s.extremumSpace.fromValueSpace(s.which==="left"?O:R),V=Tj(s.which==="left"?g.position:b.position,s.extremumSpace.fromValueSpace(s.which==="left"?O:R),C-(s.which==="left"?g.position:b.position),L);return bv.default.createElement("g",null,bv.default.createElement(kle,{ref:a,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(C," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(N,") * 1px)")}}),bv.default.createElement(kj,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(C," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(N,") * 1px)")}}),bv.default.createElement(Ile,{d:"M 0 0 L 1 1",style:{transform:V}}),_)},Aj=Rle});function rDe(s){let[a,l]=(0,kf.useState)(!1);Ch(a,s.props.keyframe.position);let d=(0,kf.useRef)(s.props);d.current=s.props;let f=(0,kf.useMemo)(()=>({debugName:"GraphEditorDotScalar/useDragKeyframe",lockCSSCursorTo:"move",onDragStart(g){l(!0);let b=!!g.altKey,_=d.current,S=(0,GD.val)(_.layoutP.scaledSpace.toUnitSpace),C=(0,GD.val)(_.layoutP.graphEditorVerticalSpace.toExtremumSpace),I=_.extremumSpace.lock(),O;return{onDrag(R,A){let N=_.trackData.keyframes[_.index],L=S(R),V=-A,G=C(V),$=_.extremumSpace.deltaToValueSpace(G),Y=[],ie=B(F({},N),{position:N.position+L,value:N.value+$,handles:[...N.handles]});if(Y.push(ie),b){let re=_.trackData.keyframes[_.index-1];if(re&&Math.abs(N.value-re.value)>0){let Pe=B(F({},re),{handles:[...re.handles]});Y.push(Pe),Pe.handles[3]=sDe(re.handles[3],re.value,re.value,N.value,ie.value)}let ce=_.trackData.keyframes[_.index+1];if(ce&&Math.abs(N.value-ce.value)>0){let Pe=B(F({},ce),{handles:[...ce.handles]});Y.push(Pe),Pe.handles[1]=oDe(Pe.handles[1],Pe.value,Pe.value,N.value,ie.value)}}O==null||O.discard(),O=ue().tempTransaction(({stateEditors:re})=>{re.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},_.sheetObject.address),{trackId:_.trackId,keyframes:Y,snappingFunction:(0,GD.val)(_.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(R){l(!1),I(),R?O==null||O.commit():(O==null||O.discard(),s.onDetectedClick(g))}}}}),[]);return Bi(s.node,f),Kl(a,"draggingPositionInSequenceEditor","move"),a}function iDe(s,a){return ca(s,{menuItems:()=>[{label:"Delete",callback:()=>{ue().transaction(({stateEditors:l})=>{l.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},a.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.trackId}))})}}]})}function sDe(s,a,l,d,f){return(d-a)*s/(f-l)}function oDe(s,a,l,d,f){return((a-d)*s+d-a+l-f)/(l-f)}var GD,kf,Dle,Ij,Ole,Lle,Nle,Fle,aDe=P(()=>{Te(),da(),Es(),Rr(),GD=Nt,kf=X(Ne()),Ve(),mo(),mo(),Dr(),ll(),Zu(),DD(),sv(),Ij=le.circle(Dle||(Dle=J([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),Lle=le.circle(Ole||(Ole=J([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: move;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),kr,Ij,gh),Nle=s=>{let[a,l]=wr(null),{index:d,trackData:f}=s,g=f.keyframes[d],[b]=iDe(l,s),_=iv(s.itemKey),S=g.value,C=s.extremumSpace.fromValueSpace(S),I=ID([{type:"primitiveProp",keyframe:s.keyframe,pathToProp:s.pathToProp,propConfig:s.propConfig,sheetObject:s.sheetObject,trackId:s.trackId}]),O=rDe({node:l,props:s,onDetectedClick:R=>I.toggle(R,R.target instanceof Element?R.target:l)});return kf.default.createElement(kf.default.Fragment,null,kf.default.createElement(Lle,B(F(F(F({ref:a,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(C,") * 1px)")}},id(g.position)),ha.includePositionSnapAttrs(g.position)),_.attrs),{className:O?"beingDragged":""})),kf.default.createElement(Ij,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(C,") * 1px)"),fill:_.flag===2?"white":void 0}}),I.node,b)},Fle=Nle});function lDe(s){let[a,l]=(0,Af.useState)(!1);Ch(a,s.props.keyframe.position);let d=(0,Af.useRef)(s.props);d.current=s.props;let f=(0,Af.useMemo)(()=>({debugName:"GraphEditorDotNonScalar/useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(g){l(!0);let b=d.current,_=(0,Rj.val)(b.layoutP.scaledSpace.toUnitSpace),S=b.extremumSpace.lock(),C;return{onDrag(I,O){let R=b.trackData.keyframes[b.index],A=_(I),N=[],L=B(F({},R),{position:R.position+A,value:R.value,handles:[...R.handles]});N.push(L),C==null||C.discard(),C=ue().tempTransaction(({stateEditors:V})=>{V.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},b.sheetObject.address),{trackId:b.trackId,keyframes:N,snappingFunction:(0,Rj.val)(b.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(I){l(!1),S(),I?C==null||C.commit():(C==null||C.discard(),s.onDetectedClick(g))}}}}),[]);return Bi(s.node,f),Kl(a,"draggingPositionInSequenceEditor","ew-resize"),a}function uDe(s,a){return ca(s,{menuItems:()=>[{label:"Delete",callback:()=>{ue().transaction(({stateEditors:l})=>{l.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},a.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.trackId}))})}}]})}var Rj,Af,Ble,Dj,Ule,zle,Vle,Oj,cDe=P(()=>{Te(),da(),Es(),Rr(),Rj=Nt,Af=X(Ne()),Ve(),mo(),mo(),Dr(),ll(),Zu(),DD(),sv(),Dj=le.circle(Ble||(Ble=J([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),zle=le.circle(Ule||(Ule=J([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: ew-resize;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),kr,Dj,gh),Vle=s=>{let[a,l]=wr(null),{index:d,trackData:f,itemKey:g}=s,b=f.keyframes[d],[_]=uDe(l,s),S=iv(g),C=s.which==="left"?0:1,I=ID([{type:"primitiveProp",keyframe:s.keyframe,pathToProp:s.pathToProp,propConfig:s.propConfig,sheetObject:s.sheetObject,trackId:s.trackId}]),O=lDe({node:l,props:s,onDetectedClick:A=>I.toggle(A,A.target instanceof Element?A.target:l)}),R=s.extremumSpace.fromValueSpace(C);return Af.default.createElement(Af.default.Fragment,null,Af.default.createElement(zle,B(F(F(F({ref:a,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(b.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(R,") * 1px)")}},S.attrs),id(b.position)),ha.includePositionSnapAttrs(b.position)),{className:O?"beingDragged":""})),Af.default.createElement(Dj,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(b.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(R,") * 1px)"),fill:S.flag===2?"white":void 0}}),I.node,_)},Oj=Vle}),WD,jle,Hle,Gle,Wle,dDe=P(()=>{WD=X(Ne()),Ve(),Mj(),Hle=le.path(jle||(jle=J([`
  stroke-width: 2;
  stroke: var(--main-color);
  stroke-dasharray: 3 2;
  fill: none;
  vector-effect: non-scaling-stroke;
  opacity: 0.3;
`]))),Gle=s=>{let{index:a,trackData:l}=s,d="M 0 0 L 1 1",f=Tj(l.keyframes[a].position,s.extremumSpace.fromValueSpace(0),0,s.extremumSpace.fromValueSpace(1)-s.extremumSpace.fromValueSpace(0));return WD.default.createElement(WD.default.Fragment,null,WD.default.createElement(Hle,{d,style:{transform:f}}))},Wle=Gle}),vo,$le,Kle,Xle,qle,Yle,hDe=P(()=>{vo=X(Ne()),Ve(),Mj(),nDe(),aDe(),cDe(),dDe(),Kle=le.g($le||($le=J([`
  /* position: absolute; */
`]))),Xle=vo.default.createElement(vo.default.Fragment,null),qle=s=>{let{index:a,trackData:l,isScalar:d}=s,f=l.keyframes[a],g=l.keyframes[a+1],b=f.connectedRight&&!!g&&g.value!==f.value;return vo.default.createElement(Kle,null,b?vo.default.createElement(vo.default.Fragment,null,vo.default.createElement(Ple,F({},s)),!f.type||f.type==="bezier"&&vo.default.createElement(vo.default.Fragment,null,vo.default.createElement(Aj,B(F({},s),{which:"left"})),vo.default.createElement(Aj,B(F({},s),{which:"right"})))):Xle,d?vo.default.createElement(Fle,F({},s)):vo.default.createElement(vo.default.Fragment,null,vo.default.createElement(Oj,B(F({},s),{which:"left"})),vo.default.createElement(Oj,B(F({},s),{which:"right"})),vo.default.createElement(Wle,F({},s))))},Yle=qle});function pDe(s,a){let l=1/0,d=-1/0;function f(g){l=Math.min(g,l),d=Math.max(g,d)}return s.forEach((g,b)=>{let _=CR(g.value,a);if(f(_),!g.connectedRight)return;let S=s[b+1];if(!S)return;let C=(typeof S.value=="number"?S.value:1)-_;f(_+g.handles[3]*C),f(_+S.handles[1]*C)}),[l,d]}function fDe(s){let a=0,l=1;function d(f){a=Math.min(f,a),l=Math.max(f,l)}return s.forEach((f,g)=>{if(!f.connectedRight)return;let b=s[g+1];b&&(d(f.handles[3]),d(b.handles[1]))}),[a,l]}var od,Zle,Qle,mDe=P(()=>{wh(),od=X(Ne()),KD(),hDe(),vf(),Sn(),Zle=od.default.memo(({layoutP:s,trackData:a,sheetObject:l,trackId:d,color:f,pathToProp:g})=>{let b=ER(rr(l.template.configPointer),g);if(ed(b))return console.error("Composite prop types cannot be keyframed"),od.default.createElement(od.default.Fragment,null);let[_,S]=(0,od.useState)(!1),C=(0,od.useMemo)(()=>{let A=new Set;return function(){let N=A.size===0;A.add(L),N&&S(!0);function L(){let V=A.size>0;A.delete(L),V&&A.size===0&&S(!1)}return L}},[]),I=(0,od.useMemo)(()=>{let A=b.type==="number"?pDe(a.keyframes,b):fDe(a.keyframes),N=G=>(G-A[0])/(A[1]-A[0]),L=G=>A[0]+V(G),V=G=>G*(A[1]-A[0]);return{fromValueSpace:N,toValueSpace:L,deltaToValueSpace:V,lock:C}},[a.keyframes]),O=(0,od.useRef)(void 0);_||(O.current=I);let R=a.keyframes.map((A,N)=>od.default.createElement(Yle,{pathToProp:g,propConfig:b,itemKey:Ns.forTrackKeyframe(l,d,A.id),keyframe:A,index:N,trackData:a,layoutP:s,sheetObject:l,trackId:d,isScalar:b.type==="number",key:A.id,extremumSpace:O.current,color:f}));return od.default.createElement("g",{style:{"--main-color":gC[f].iconColor}},R)}),Qle=Zle}),Jle,$D,eue,tue,gDe=P(()=>{Te(),Sn(),Jle=Nt,$D=X(Ne()),mDe(),eue=s=>Yn(()=>{let{sheetObject:a,trackId:l}=s,d=(0,Jle.val)(ue().atomP.historic.coreByProject[a.address.projectId].sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[l]);return(d==null?void 0:d.type)!=="BasicKeyframedTrack"?(console.error("trackData type ".concat(d==null?void 0:d.type," is not yet supported on the graph editor")),$D.default.createElement($D.default.Fragment,null)):$D.default.createElement(Qle,B(F({},s),{trackData:d}))},[s.trackId,s.layoutP]),tue=eue});function nue({clippedSpaceRange:s,clippedSpaceWidth:a,fps:l,gapWidth:d=120},f){let g=1/l,b=s.end-s.start,_=a/(l*b),S=Math.floor(d/_),C=(S<l?rue(l).find(R=>R>=S):l*Math.floor(S/l))*g,I=Math.floor(s.start/C),O=Math.ceil(s.end/C);for(let R=I;R<=O;R++){let A=R*C,N=A%1===0;f(A,N)}}var rue,iue=P(()=>{di(),rue=Rx(s=>{let a=[];for(let l=1;l<=s;l++)s%l===0&&a.push(l);return a})});function vDe(s){let{clippedSpaceWidth:a,height:l,ctx:d,unitSpaceToClippedSpace:f,snapToGrid:g}=s;d.clearRect(0,0,a,l),nue(s,(b,_)=>{let S=g(b),C=Math.floor(f(S));d.strokeStyle=_?"rgba(225, 225, 225, 0.04)":"rgba(255, 255, 255, 0.01)",d.beginPath(),d.moveTo(C,0),d.lineTo(C,l),d.stroke(),d.closePath()})}var _v,wv,sue,oue,aue,lue,uue,cue,due,hue,Lj,pue=P(()=>{_v=Nt,wv=X(Ne()),Ve(),iue(),Te(),oue=le.div(sue||(sue=J([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),lue=le.canvas(aue||(aue=J([`
  position: relative;
  left: 0;
`]))),uue=s=>{let a=s;return a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1},cue=()=>window.devicePixelRatio||1,due=s=>cue()/uue(s),hue=({layoutP:s,width:a,height:l})=>{let d=(0,wv.useRef)(null),[f,g]=(0,wv.useState)(null),{ctx:b,ratio:_}=(0,wv.useMemo)(()=>{if(!f)return{};let S=f.getContext("2d"),C=due(S);return{ctx:S,ratio:C}},[f]);return(0,wv.useLayoutEffect)(()=>{if(!b)return;f.width=a*_,f.height=l*_;let S=(0,_v.prism)(()=>{let C=(0,_v.val)(s.sheet).getSequence();return{ctx:b,clippedSpaceRange:(0,_v.val)(s.clippedSpace.range),clippedSpaceWidth:(0,_v.val)(s.clippedSpace.width),unitSpaceToClippedSpace:(0,_v.val)(s.clippedSpace.fromUnitSpace),height:l,leftPadding:(0,_v.val)(s.scaledSpace.leftPadding),fps:C.subUnitsPerUnit,snapToGrid:I=>C.closestGridPosition(I)}}).onChange(ue().ticker,C=>{b.save(),b.scale(_,_),vDe(C),b.restore()},!0);return()=>{S()}},[b,a,l,s]),wv.default.createElement(oue,{ref:d,style:{width:a+"px"}},wv.default.createElement(lue,{ref:g,style:{width:a+"px",height:l+"px"}}))},Lj=hue}),ad,xv,gC,fue,mue,gue,vue,yue,bue,KD=P(()=>{Te(),rd(),kR(),Sn(),ad=Nt,xv=X(Ne()),Ve(),wle(),loe(),gDe(),pue(),al(),gC={1:{iconColor:"#b98b08"},2:{iconColor:"#70a904"},3:{iconColor:"#2e928a"},4:{iconColor:"#a943bb"},5:{iconColor:"#b90808"},6:{iconColor:"#b4bf0e"}},mue=le.div(fue||(fue=J([`
  position: absolute;
  right: 0;
  bottom: 0;
  background: `,`;
`])),Hu(.03,"#1a1c1e")),vue=le.svg(gue||(gue=J([`
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  pointer-events: none;
`]))),yue=({layoutP:s})=>Yn(()=>{let a=(0,ad.val)(s.sheet),l=(0,ad.val)(ue().atomP.historic.projects.stateByProjectId[a.address.projectId].stateBySheetId[a.address.sheetId].sequenceEditor.selectedPropsByObject),d=(0,ad.val)(s.graphEditorDims.height),f=(0,ad.val)(s.scaledSpace.fromUnitSpace)(1),g=[];if(l)for(let[_,S]of Object.entries(l)){let C=a.getObject(_);if(!C)continue;let I=(0,ad.val)(C.template.getMapOfValidSequenceTracks_forStudio());for(let[O,R]of Object.entries(S)){let A=aD(O),N=bf(I,A);N&&g.push(xv.default.createElement(tue,{key:"graph-".concat(_,"-").concat(O),sheetObject:C,pathToProp:A,layoutP:s,trackId:N,color:R}))}}let b=(0,ad.val)(s.rightDims.width);return xv.default.createElement(mue,{style:{width:b+"px",height:d+"px","--unitSpaceToScaledSpaceMultiplier":f,"--graphEditorVerticalSpace":"".concat((0,ad.val)(s.graphEditorVerticalSpace.space))}},xv.default.createElement(Lj,{layoutP:s,width:b,height:d}),xv.default.createElement(jV,{layoutP:s,height:d},xv.default.createElement(vue,{width:jD,height:d,viewBox:"0 0 ".concat(jD," ").concat(d)},xv.default.createElement("g",{style:{transform:"translate(".concat((0,ad.val)(s.scaledSpace.leftPadding),"px, ").concat((0,ad.val)(s.graphEditorDims.padding.top),"px)")}},g))))},[s]),bue=yue}),_ue,Jl,wue,xue,Sue,Eue,Nj,Cue,Pue,Tue,Mue,kue,Aue,Iue,yDe=P(()=>{Te(),rd(),AR(),Sn(),_ue=Nt,Jl=X(Ne()),Ve(),$z(),OR(),KD(),sD(),rv(),ase(),wue={label:{color:"#9a9a9a"}},Sue=le(PV)(xue||(xue=J([""]))),Nj=le(TV)(Eue||(Eue=J([`
  display: flex;
  color: `,`;
  padding-right: 12px;
  align-items: center;
  justify-content: flex-end;
  box-sizing: border-box;
`])),wue.label.color),Pue=le.button(Cue||(Cue=J([`
  background: none;
  border: none;
  outline: none;
  display: flex;
  box-sizing: border-box;
  font-size: 14px;
  align-items: center;
  height: 100%;
  margin-left: 12px;
  color: `,`;

  &:not([disabled]):hover {
    color: white;
  }
`])),s=>s.isSelected?gC[s.graphEditorColor].iconColor:_f.offColor),Tue=()=>Jl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 640 512"},Jl.default.createElement("g",{transform:"translate(0 100)"},Jl.default.createElement("path",{fill:"currentColor",d:"M368 32h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM208 88h-84.75C113.75 64.56 90.84 48 64 48 28.66 48 0 76.65 0 112s28.66 64 64 64c26.84 0 49.75-16.56 59.25-40h79.73c-55.37 32.52-95.86 87.32-109.54 152h49.4c11.3-41.61 36.77-77.21 71.04-101.56-3.7-8.08-5.88-16.99-5.88-26.44V88zm-48 232H64c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zM576 48c-26.84 0-49.75 16.56-59.25 40H432v72c0 9.45-2.19 18.36-5.88 26.44 34.27 24.35 59.74 59.95 71.04 101.56h49.4c-13.68-64.68-54.17-119.48-109.54-152h79.73c9.5 23.44 32.41 40 59.25 40 35.34 0 64-28.65 64-64s-28.66-64-64-64zm0 272h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"}))),kue=le.span(Mue||(Mue=J([`
  margin-right: 4px;
  `,`;

  `,`:hover & {
    color: #ccc;
  }
`])),yf,Nj),Aue=({leaf:s})=>{var a;let l=AE(s.sheetObject.propsP,s.pathToProp),d=s.sheetObject,{controlIndicators:f}=Wz(l,d,s.propConf),g=Yn(()=>{let R=s.sheetObject.address,A=nd(s.pathToProp);return(0,_ue.val)(ue().atomP.historic.projects.stateByProjectId[R.projectId].stateBySheetId[R.sheetId].sequenceEditor.selectedPropsByObject[R.objectKey][A])},[s]),b=(0,Jl.useRef)(!1),_=typeof g=="string";b.current=_;let S=(0,Jl.useCallback)(()=>{let R=s.sheetObject.address;ue().transaction(({stateEditors:A})=>{b.current?A.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removePropFromGraphEditor(B(F({},R),{pathToProp:s.pathToProp})):(A.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.addPropToGraphEditor(B(F({},R),{pathToProp:s.pathToProp})),A.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!0}))})},[s]),C=(a=s.propConf.label)!=null?a:s.pathToProp[s.pathToProp.length-1],I=!0,O=(0,Jl.useRef)(null);return sse(O.current,s),Jl.default.createElement(Sue,{depth:s.depth},Jl.default.createElement(Nj,{ref:O,isEven:s.n%2===0,style:{height:s.nodeHeight+"px"},isSelected:_===!0},Jl.default.createElement(kue,null,C),f,Jl.default.createElement(Pue,{onClick:S,isSelected:_===!0,graphEditorColor:g??"1",style:{opacity:1},disabled:!I},Jl.default.createElement(Tue,null))))},Iue=Aue});function Fj(s,a){ue().transaction(({stateEditors:l})=>{l.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.sequenceEditorCollapsableItems.set(B(F({},a.sheetAddress),{studioSheetItemKey:a.sheetItemKey,isCollapsed:s}))})}var Bj=P(()=>{Te()}),a_,Uj,Rue,bDe=P(()=>{a_=X(Ne()),sD(),yDe(),Bj(),Uj=s=>{let a="prop"+s.pathToProp[s.pathToProp.length-1];return s.shouldRender?s.type==="propWithChildren"?a_.default.createElement(Rue,{leaf:s,key:a}):a_.default.createElement(Iue,{leaf:s,key:a}):a_.default.createElement(a_.default.Fragment,{key:a})},Rue=({leaf:s})=>a_.default.createElement(iD,{leaf:s,label:s.pathToProp[s.pathToProp.length-1],isCollapsed:s.isCollapsed,toggleCollapsed:()=>Fj(!s.isCollapsed,{sheetAddress:s.sheetObject.address,sheetItemKey:s.sheetItemKey})},s.children.map(a=>Uj(a)))}),Due,Oue,Lue,_De=P(()=>{Due=X(Ne()),sD(),bDe(),Bj(),Te(),Oue=({leaf:s})=>Due.default.createElement(iD,{leaf:s,label:s.sheetObject.address.objectKey,isCollapsed:s.isCollapsed,toggleSelect:()=>{ue().transaction(({stateEditors:a})=>{a.studio.historic.panels.outline.selection.set([s.sheetObject])})},toggleCollapsed:()=>Fj(!s.isCollapsed,{sheetAddress:s.sheetObject.address,sheetItemKey:s.sheetItemKey})},s.children.map(a=>Uj(a))),Lue=Oue}),zj,Nue,Fue,wDe=P(()=>{Sn(),zj=X(Ne()),_De(),sD(),Bj(),Kte(),Nue=({leaf:s})=>Yn(()=>zj.default.createElement(iD,{leaf:s,label:s.sheet.address.sheetId,isCollapsed:s.isCollapsed,toggleCollapsed:()=>{Fj(!s.isCollapsed,{sheetAddress:s.sheet.address,sheetItemKey:s.sheetItemKey})}},s.children.map(a=>zj.default.createElement(Lue,{key:"sheetObject-"+Wte(a.sheetObject),leaf:a}))),[s]),Fue=Nue}),Vj,XD,Bue,Uue,zue,Vue,jue,Hue,xDe=P(()=>{Sn(),Vj=Nt,XD=X(Ne()),Ve(),wDe(),Uue=le.div(Bue||(Bue=J([`
  position: absolute;
  left: 0;
  overflow-x: visible;
`]))),Vue=le.ul(zue||(zue=J([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),jue=({layoutP:s})=>Yn(()=>{let a=(0,Vj.val)(s.tree),l=(0,Vj.val)(s.leftDims.width);return XD.default.createElement(Uue,{style:{width:l+"px",top:a.top+"px"}},XD.default.createElement(Vue,null,XD.default.createElement(Fue,{leaf:a})))},[s]),Hue=jue}),jj,Gue,Wue,$ue,Kue,SDe=P(()=>{Dr(),Ih(),Sn(),al(),jj=X(Ne()),Ve(),pue(),Wue=le.div(Gue||(Gue=J([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: hidden;
  background: `,`;
  pointer-events: none;
`])),()=>pd.rightBackground,Hu(.01,iE(1*.03,Ab.panel.bg))),$ue=({layoutP:s})=>{let a=rr(s.rightDims.width),l=rr(s.panelDims.height);return jj.default.createElement(Wue,{style:{width:a+"px"}},jj.default.createElement(Lj,{width:a,height:l,layoutP:s}))},Kue=$ue}),l_,Xue,que,Yue,Zue,EDe=P(()=>{Sn(),l_=X(Ne()),Ve(),xDe(),SDe(),wle(),Nse(),que=le.div(Xue||(Xue=J([`
  position: absolute;
  left: 0;
  right: 0;
`]))),Yue=({layoutP:s})=>{let a=rr(s.dopeSheetDims.height);return l_.default.createElement(que,{style:{height:a+"px"}},l_.default.createElement(Kue,{layoutP:s}),l_.default.createElement(Lse,null,l_.default.createElement(Hue,{layoutP:s}),l_.default.createElement(_le,{layoutP:s})))},Zue=Yue});function CDe(s,a,l){return Hj.prism.memo(s,()=>(0,Hj.prism)(a),l).getValue()}var Hj,PDe=P(()=>{Hj=Nt});function pi(s){return function(a,l){return s(a,l())}}function cl(s){return Object.freeze({audience:Sv(s,8)?"internal":Sv(s,16)?"dev":"public",category:Sv(s,4)?"troubleshooting":Sv(s,2)?"todo":"general",level:Sv(s,512)?512:Sv(s,256)?256:Sv(s,128)?128:64})}function Sv(s,a){return(s&a)===a}function fi(s,a){return((a&32)===32?!0:(a&16)===16?s.dev:(a&8)===8?s.internal:!1)&&s.min<=a}function Que(s=console,a={}){let l=B(F({},ld),{includes:F({},ld.includes)}),d={styled:kDe.bind(l,s),noStyle:IDe.bind(l,s)},f=MDe.bind(l);function g(){return l.loggingConsoleStyle&&l.loggerConsoleStyle?d.styled:d.noStyle}return l.create=g(),{configureLogger(b){var _;b==="console"?(l.loggerConsoleStyle=ld.loggerConsoleStyle,l.create=g()):b.type==="console"?(l.loggerConsoleStyle=(_=b.style)!=null?_:ld.loggerConsoleStyle,l.create=g()):b.type==="keyed"?(l.creatExt=S=>b.keyed(S.names),l.create=f):b.type==="named"&&(l.creatExt=TDe.bind(null,b.named),l.create=f)},configureLogging(b){var _,S,C,I,O;l.includes.dev=(_=b.dev)!=null?_:ld.includes.dev,l.includes.internal=(S=b.internal)!=null?S:ld.includes.internal,l.includes.min=(C=b.min)!=null?C:ld.includes.min,l.include=(I=b.include)!=null?I:ld.include,l.loggingConsoleStyle=(O=b.consoleStyle)!=null?O:ld.loggingConsoleStyle,l.create=g()},getLogger(){return l.create({names:[]})}}}function TDe(s,a){let l=[];for(let{name:d,key:f}of a.names)l.push(f==null?d:"".concat(d," (").concat(f,")"));return s(l)}function MDe(s){let a=F(F({},this.includes),this.include(s)),l=this.filtered,d=this.named.bind(this,s),f=this.creatExt(s),g=fi(a,524),b=fi(a,522),_=fi(a,521),S=fi(a,529),C=fi(a,545),I=fi(a,265),O=fi(a,268),R=fi(a,273),A=fi(a,289),N=fi(a,137),L=fi(a,145),V=fi(a,73),G=fi(a,81),$=g?f.error.bind(f,Va._hmm):l.bind(s,524),Y=b?f.error.bind(f,Va._todo):l.bind(s,522),ie=_?f.error.bind(f,Va._error):l.bind(s,521),re=S?f.error.bind(f,Va.errorDev):l.bind(s,529),ce=C?f.error.bind(f,Va.errorPublic):l.bind(s,545),Pe=O?f.warn.bind(f,Va._kapow):l.bind(s,268),ye=I?f.warn.bind(f,Va._warn):l.bind(s,265),we=R?f.warn.bind(f,Va.warnDev):l.bind(s,273),Le=A?f.warn.bind(f,Va.warnPublic):l.bind(s,273),it=N?f.debug.bind(f,Va._debug):l.bind(s,137),de=L?f.debug.bind(f,Va.debugDev):l.bind(s,145),Oe=V?f.trace.bind(f,Va._trace):l.bind(s,73),Q=G?f.trace.bind(f,Va.traceDev):l.bind(s,81),je={_hmm:$,_todo:Y,_error:ie,errorDev:re,errorPublic:ce,_kapow:Pe,_warn:ye,warnDev:we,warnPublic:Le,_debug:it,debugDev:de,_trace:Oe,traceDev:Q,lazy:{_hmm:g?pi($):$,_todo:b?pi(Y):Y,_error:_?pi(ie):ie,errorDev:S?pi(re):re,errorPublic:C?pi(ce):ce,_kapow:O?pi(Pe):Pe,_warn:I?pi(ye):ye,warnDev:R?pi(we):we,warnPublic:A?pi(Le):Le,_debug:N?pi(it):it,debugDev:L?pi(de):de,_trace:V?pi(Oe):Oe,traceDev:G?pi(Q):Q},named:d,utilFor:{internal(){return{debug:je._debug,error:je._error,warn:je._warn,trace:je._trace,named(Rt,Ie){return je.named(Rt,Ie).utilFor.internal()}}},dev(){return{debug:je.debugDev,error:je.errorDev,warn:je.warnDev,trace:je.traceDev,named(Rt,Ie){return je.named(Rt,Ie).utilFor.dev()}}},public(){return{error:je.errorPublic,warn:je.warnPublic,debug(Rt,Ie){je._warn('(public "debug" filtered out) '.concat(Rt),Ie)},trace(Rt,Ie){je._warn('(public "trace" filtered out) '.concat(Rt),Ie)},named(Rt,Ie){return je.named(Rt,Ie).utilFor.public()}}}}};return je}function kDe(s,a){let l=F(F({},this.includes),this.include(a)),d=[],f="";for(let S=0;S<a.names.length;S++){let{name:C,key:I}=a.names[S];if(f+=" %c".concat(C),d.push(this.style.css(C)),I!=null){let O="%c#".concat(I);f+=O,d.push(this.style.css(O))}}let g=this.filtered,b=this.named.bind(this,a),_=[f,...d];return Jue(g,a,l,s,_,ADe(_),b)}function ADe(s){let a=s.slice(0);for(let l=1;l<a.length;l++)a[l]+=";background-color:#e0005a;padding:2px;color:white";return a}function IDe(s,a){let l=F(F({},this.includes),this.include(a)),d="";for(let _=0;_<a.names.length;_++){let{name:S,key:C}=a.names[_];d+=" ".concat(S),C!=null&&(d+="#".concat(C))}let f=this.filtered,g=this.named.bind(this,a),b=[d];return Jue(f,a,l,s,b,b,g)}function Jue(s,a,l,d,f,g,b){let _=fi(l,524),S=fi(l,522),C=fi(l,521),I=fi(l,529),O=fi(l,545),R=fi(l,265),A=fi(l,268),N=fi(l,273),L=fi(l,289),V=fi(l,137),G=fi(l,145),$=fi(l,73),Y=fi(l,81),ie=_?d.error.bind(d,...f):s.bind(a,524),re=S?d.error.bind(d,...f):s.bind(a,522),ce=C?d.error.bind(d,...f):s.bind(a,521),Pe=I?d.error.bind(d,...f):s.bind(a,529),ye=O?d.error.bind(d,...f):s.bind(a,545),we=A?d.warn.bind(d,...g):s.bind(a,268),Le=R?d.warn.bind(d,...f):s.bind(a,265),it=N?d.warn.bind(d,...f):s.bind(a,273),de=L?d.warn.bind(d,...f):s.bind(a,273),Oe=V?d.info.bind(d,...f):s.bind(a,137),Q=G?d.info.bind(d,...f):s.bind(a,145),je=$?d.debug.bind(d,...f):s.bind(a,73),Rt=Y?d.debug.bind(d,...f):s.bind(a,81),Ie={_hmm:ie,_todo:re,_error:ce,errorDev:Pe,errorPublic:ye,_kapow:we,_warn:Le,warnDev:it,warnPublic:de,_debug:Oe,debugDev:Q,_trace:je,traceDev:Rt,lazy:{_hmm:_?pi(ie):ie,_todo:S?pi(re):re,_error:C?pi(ce):ce,errorDev:I?pi(Pe):Pe,errorPublic:O?pi(ye):ye,_kapow:A?pi(we):we,_warn:R?pi(Le):Le,warnDev:N?pi(it):it,warnPublic:L?pi(de):de,_debug:V?pi(Oe):Oe,debugDev:G?pi(Q):Q,_trace:$?pi(je):je,traceDev:Y?pi(Rt):Rt},named:b,utilFor:{internal(){return{debug:Ie._debug,error:Ie._error,warn:Ie._warn,trace:Ie._trace,named(Re,Ge){return Ie.named(Re,Ge).utilFor.internal()}}},dev(){return{debug:Ie.debugDev,error:Ie.errorDev,warn:Ie.warnDev,trace:Ie.traceDev,named(Re,Ge){return Ie.named(Re,Ge).utilFor.dev()}}},public(){return{error:Ie.errorPublic,warn:Ie.warnPublic,debug(Re,Ge){Ie._warn('(public "debug" filtered out) '.concat(Re),Ge)},trace(Re,Ge){Ie._warn('(public "trace" filtered out) '.concat(Re),Ge)},named(Re,Ge){return Ie.named(Re,Ge).utilFor.public()}}}}};return Ie}var Va,ld,ece=P(()=>{Va={_hmm:cl(524),_todo:cl(522),_error:cl(521),errorDev:cl(529),errorPublic:cl(545),_kapow:cl(268),_warn:cl(265),warnDev:cl(273),warnPublic:cl(289),_debug:cl(137),debugDev:cl(145),_trace:cl(73),traceDev:cl(81)},ld={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(s,a,l){return this.create({names:[...s.names,{name:a,key:l}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(s){if(s.length<5)return s;let a=s.replace(this.collapseOnRE,"");return this.cssMemo.has(a)||this.cssMemo.set(a,this.css(s)),a},css(s){var a,l,d,f;let g=this.cssMemo.get(s);if(g)return g;let b="color:".concat((l=(a=this.color)==null?void 0:a.call(this,s))!=null?l:"hsl(".concat((s.charCodeAt(0)+s.charCodeAt(s.length-1))%360,", 100%, 60%)"));return(d=this.bold)!=null&&d.test(s)&&(b+=";font-weight:600"),(f=this.italic)!=null&&f.test(s)&&(b+=";font-style:italic"),this.cssMemo.set(s,b),b}}}}),Gj,qD,YD=P(()=>{ece(),ece(),Gj=Que(console,{_debug:function(){},_error:function(){}}),Gj.configureLogging({dev:!0,min:64}),qD=Gj.getLogger().named("Theatre.js (default logger)").utilFor.dev()}),If,Ev,tce,RDe=P(()=>{wh(),If=Nt,YD(),fh(),Ev=28,tce=(s,a)=>{var l;If.prism.ensurePrism();let d=!0,f=YI+Ev,g=0,b=a.atomP.ahistoric.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId].sequence.collapsableItems,_=b.byId[Ns.forSheet()].isCollapsed,S=(l=(0,If.pointerToPrism)(_).getValue())!=null?l:!1,C={type:"sheet",isCollapsed:S,sheet:s,children:[],sheetItemKey:Ns.forSheet(),shouldRender:d,top:YI,depth:0,n:g,nodeHeight:d?Ev:0,heightIncludingChildren:-1};g+=1;for(let L of Object.values((0,If.val)(s.objectsP)))L&&I(L,C.children,C.depth+1,!S);C.heightIncludingChildren=f-C.top;function I(L,V,G,$){var Y;let ie=(0,If.val)(L.template.getMapOfValidSequenceTracks_forStudio()),re=(0,If.val)(L.template.configPointer);if(Object.keys(ie).length===0)return;let ce=b.byId[Ns.forSheetObject(L)].isCollapsed,Pe=(Y=(0,If.pointerToPrism)(ce).getValue())!=null?Y:!1,ye={type:"sheetObject",isCollapsed:Pe,sheetItemKey:Ns.forSheetObject(L),shouldRender:$,top:f,children:[],depth:G,n:g,sheetObject:L,nodeHeight:$?Ev:0,heightIncludingChildren:-1};V.push(ye),$&&(g+=1,f+=ye.nodeHeight),O(L,ie,[],re,ye.children,G+1,$&&!Pe),ye.heightIncludingChildren=f-ye.top}function O(L,V,G,$,Y,ie,re){for(let[ce,Pe]of Object.entries(V)){let ye=$.props[ce];R(L,Pe,[...G,ce],ye,Y,ie,re)}}function R(L,V,G,$,Y,ie,re){$.type==="compound"?A(L,V,$,G,$,Y,ie,re):$.type==="enum"?qD.warn("Prop type enum is not yet supported in the sequence editor"):N(L,V,G,$,Y,ie,re)}function A(L,V,G,$,Y,ie,re,ce){var Pe;let ye=b.byId[Ns.forSheetObjectProp(L,$)].isCollapsed,we=(Pe=(0,If.pointerToPrism)(ye).getValue())!=null?Pe:!1,Le={type:"propWithChildren",isCollapsed:we,propConf:G,pathToProp:$,sheetItemKey:Ns.forSheetObjectProp(L,$),sheetObject:L,shouldRender:ce,top:f,children:[],nodeHeight:ce?Ev:0,heightIncludingChildren:-1,depth:re,trackMapping:V,n:g};ie.push(Le),ce&&(f+=Le.nodeHeight,g+=1),O(L,V,$,Y,Le.children,re+1,ce&&!we),Le.heightIncludingChildren=f-Le.top}function N(L,V,G,$,Y,ie,re){let ce={type:"primitiveProp",propConf:$,depth:ie,sheetItemKey:Ns.forSheetObjectProp(L,G),sheetObject:L,pathToProp:G,shouldRender:re,top:f,nodeHeight:re?Ev:0,heightIncludingChildren:re?Ev:0,trackId:V,n:g};Y.push(ce),g+=1,f+=ce.nodeHeight}return C}});function DDe(s,a){let l=ue(),d=l.atomP.ahistoric.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId],f=l.atomP.historic.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId];return(0,ja.prism)(()=>{var g;let b=CDe("tree",()=>tce(s,l),[]),_=(0,ja.val)(a),S=(0,ja.val)(l.atomP.historic.panels.sequenceEditor.graphEditor),C=(0,ja.val)(f.sequenceEditor.selectedPropsByObject),I=!!C&&Object.keys(C).length>0,{leftDims:O,rightDims:R,graphEditorDims:A,dopeSheetDims:N,horizontalScrollbarDims:L}=ja.prism.memo("leftDims",()=>{var Le;let it={width:Math.floor(_.width*nce),height:_.height,screenX:_.screenX,screenY:_.screenY},de={width:_.width-it.width,height:_.height,screenX:_.screenX+it.width,screenY:_.screenY},Oe=I&&(S==null?void 0:S.isOpen)===!0,Q=Math.floor((Oe?_i((Le=S==null?void 0:S.height)!=null?Le:.5,.1,.7):0)*_.heightWithoutBorder),je=0+Q,Rt=_.height-je,Ie={width:_.width,height:Rt,screenX:_.screenX,screenY:_.screenY},Re={isAvailable:I,isOpen:Oe,width:de.width,height:Q,screenX:_.screenX,screenY:_.screenY+Rt,padding:{top:20,bottom:20}};return{leftDims:it,rightDims:de,graphEditorDims:Re,dopeSheetDims:Ie,horizontalScrollbarDims:{bottom:0}}},[_,S,I]),V=ja.prism.memo("graphEditorVerticalSpace",()=>{let Le=A.height-A.padding.top-A.padding.bottom;return{space:Le,fromExtremumSpace(it){return it*Le},toExtremumSpace(it){return it/Le}}},[A]),[G,$]=ja.prism.state("isSeeking",!1),Y={isSeeking:G,setIsSeeking:$},ie={},re=(g=(0,ja.val)(d.sequence.clippedSpaceRange))!=null?g:rce,ce=ja.prism.memo("scaledSpace",()=>{let Le=re.end-re.start,it=R.width,de=Le/it,Oe=it/Le;return{fromUnitSpace(Q){return Q*Oe},toUnitSpace(Q){return Q*de},leftPadding:10}},[re,R.width]),Pe=ja.prism.memo("setClippedSpaceRange",()=>function(Le){l.transaction(({stateEditors:it})=>{let de=F({},Le);if(de.end<=de.start&&(de.end=de.start+1),de.start<0){let Oe=de.end-de.start;de.start=0,de.end=Oe}it.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.clippedSpaceRange.set(B(F({},s.address),{range:de}))})},[]),ye=ja.prism.memo("clippedSpace",()=>({range:re,width:R.width,fromUnitSpace(Le){return ce.fromUnitSpace(Le-re.start)+ce.leftPadding},toUnitSpace(Le){return ce.toUnitSpace(Le-ce.leftPadding)+re.start},setRange:Pe}),[re,R.width,ce,Pe]),we=ja.prism.memo("selection.current",()=>new ja.Atom({}),[]);return CV("finalAtom",{sheet:s,tree:b,panelDims:_,leftDims:O,rightDims:R,dopeSheetDims:N,horizontalScrollbarDims:L,seeker:Y,unitSpace:ie,scaledSpace:ce,clippedSpace:ye,graphEditorDims:A,graphEditorVerticalSpace:V,selectionAtom:we}).pointer})}var ja,nce,rce,ODe=P(()=>{Te(),PDe(),ise(),ja=Nt,RDe(),di(),nce=.2,rce={start:0,end:10}});function LDe(s){let{fullSecondStampsContainer:a,sequencePositionFormatter:l,snapToGrid:d,unitSpaceToClippedSpace:f}=s,g="";nue(s,(b,_)=>{let S=d(b),C=f(S);_?g+=ice(l.formatFullUnitForGrid(S),C,"full-unit"):g+=ice(l.formatSubUnitForGrid(S),C,"sub-unit")}),a.innerHTML=g}function ice(s,a,l){return'<span class="'.concat(l,'" style="transform: translate3d(').concat(a.toFixed(1),'px, -50%, 0);">').concat(s,"</span>")}var Cv,Pv,sce,oce,Rf,ace,lce,uce,cce,dce,hce,pce=P(()=>{Cv=Nt,al(),Pv=X(Ne()),Ve(),iue(),Te(),oce=le.div(sce||(sce=J([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),Rf={fullUnitStampColor:"#6a6a6a",stampFontSize:"10px",get subUnitStampColor(){return iE(.2,Rf.fullUnitStampColor)}},lce=le.div(ace||(ace=J([`
  position: absolute;
  top: 0;
  height: 100%;
  left: 0;
  overflow: hidden;
  z-index: 2;
  will-change: transform;
  pointer-events: none;
`]))),cce=le.div(uce||(uce=J([`
  position: absolute;
  top: 0;
  left: 0;

  & > span {
    position: absolute;
    display: block;
    top: 9px;
    left: -10px;
    color: `,`;
    text-align: center;
    font-size: `,`;
    width: 20px;

    &.full-unit {
      color: `,`;
    }

    &.sub-unit {
      color: `,`;
    }
  }

  pointer-events: none;
`])),Rf.fullUnitStampColor,Rf.stampFontSize,Rf.fullUnitStampColor,Rf.subUnitStampColor),dce=({layoutP:s,width:a})=>{let l=(0,Pv.useRef)(null),[d,f]=(0,Pv.useState)(null);return(0,Pv.useLayoutEffect)(()=>{if(d)return(0,Cv.prism)(()=>{let g=(0,Cv.val)(s.sheet).getSequence();return{fullSecondStampsContainer:d,clippedSpaceRange:(0,Cv.val)(s.clippedSpace.range),clippedSpaceWidth:(0,Cv.val)(s.clippedSpace.width),unitSpaceToClippedSpace:(0,Cv.val)(s.clippedSpace.fromUnitSpace),leftPadding:(0,Cv.val)(s.scaledSpace.leftPadding),fps:g.subUnitsPerUnit,sequencePositionFormatter:g.positionFormatter,snapToGrid:b=>g.closestGridPosition(b)}}).onChange(ue().ticker,LDe,!0)},[d,a,s]),Pv.default.createElement(oce,{ref:l,style:{width:a+"px"}},Pv.default.createElement(lce,{style:{width:a+"px"}},Pv.default.createElement(cce,{ref:f})))},hce=dce});function NDe(s){let[a,l]=(0,Wj.useState)(!1);return(0,Wj.useEffect)(()=>{if(l(!1),!s)return;let d=g=>{g.target===s?l(!0):l(!1)},f=()=>{l(!1)};return s.addEventListener("mouseenter",d),s.addEventListener("mousemove",d),s.addEventListener("mouseleave",f),()=>{l(!1),s.removeEventListener("mouseenter",d),s.removeEventListener("mousemove",d),s.removeEventListener("mouseleave",f)}},[s]),a}var Wj,FDe=P(()=>{Wj=X(Ne())});function BDe(s,a){let l=0,[d,f]=s,[g,b]=a;return f-d>b-g?[g,b]:(d<g&&(l=0-d),f>b&&(l=b-f),[d+l,f+l])}var ud,Df,Cs,$j,fce,ZD,mce,gce,vce=P(()=>{ud=Nt,Sn(),Dr(),Te(),Mv(),da(),Es(),Rr(),Df=X(Ne()),Ve(),mo(),Cs={enabled:{backgroundColor:"#2C2F34",stroke:"#646568"},disabled:{backgroundColor:"#282a2cc5",stroke:"#595a5d"},hover:{backgroundColor:"#34373D",stroke:"#C8CAC0"},dragging:{backgroundColor:"#3F444A",stroke:"#C8CAC0"},thumbWidth:9,hitZoneWidth:26,rangeStripMinWidth:30},$j=1e3,ZD=le.div(fce||(fce=J([`
  position: absolute;
  height: `,`px;
  background-color: `,`;
  cursor: grab;
  top: 0;
  left: 0;
  width: `,`px;
  transform-origin: left top;
  &:hover {
    background-color: `,`;
  }
  &.dragging {
    background-color: `,`;
    cursor: grabbing !important;
  }
  `,`;

  /* covers the one pixel space between the focus range strip and the top strip
  of the sequence editor panel, which would have caused that one pixel to act
  like a panel drag zone */
  &:after {
    display: block;
    content: ' ';
    position: absolute;
    bottom: -1px;
    height: 1px;
    left: 0;
    right: 0;
    background: transparent;
    pointer-events: normal;
    z-index: -1;
  }
`])),()=>dd-1,s=>s.enabled?Cs.enabled.backgroundColor:Cs.disabled.backgroundColor,$j,Cs.hover.backgroundColor,Cs.dragging.backgroundColor,kr),mce=({layoutP:s})=>{let a=(0,Df.useMemo)(()=>(0,ud.prism)(()=>{let{projectId:C,sheetId:I}=(0,ud.val)(s.sheet).address;return(0,ud.val)(ue().atomP.ahistoric.projects.stateByProjectId[C].stateBySheetId[I].sequence.focusRange)}),[s]),[l,d]=wr(null),[f]=ca(d,{menuItems:()=>{let C=(0,ud.val)(s.sheet),I=a.getValue();return[{label:"Delete focus range",callback:()=>{ue().tempTransaction(({stateEditors:O})=>{O.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.unset(F({},C.address))}).commit()}},{label:I!=null&&I.enabled?"Disable focus range":"Enable focus range",callback:()=>{I!==void 0&&ue().tempTransaction(({stateEditors:O})=>{O.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(B(F({},C.address),{range:I.range,enabled:!I.enabled}))}).commit()}}]}}),g=rr(s.scaledSpace.toUnitSpace),b=rr(s.sheet),_=(0,Df.useMemo)(()=>{let C,I;return{debugName:"FocusRangeStrip",onDragStart(O){let R,A=a.getValue();if(!A)return!1;let N=A.range.start,L=A.range.end,V=!1,G=(0,ud.val)(s.sheet).getSequence();return{onDrag($){if(A=a.getValue(),A){V=!0;let Y=g($),ie=N+Y,re=L+Y;re<ie&&(re=ie),[C,I]=BDe([ie,re],[0,G.length]).map(ce=>G.closestGridPosition(ce)),R&&R.discard(),R=ue().tempTransaction(({stateEditors:ce})=>{var Pe;ce.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(B(F({},b.address),{range:{start:C,end:I},enabled:(Pe=A==null?void 0:A.enabled)!=null?Pe:!0}))})}},onDragEnd(){A&&(V&&R!==void 0?R.commit():R&&R.discard())}}},lockCSSCursorTo:"grabbing"}},[b,g]),[S]=Bi(d,_);return Ch(S,-1),Yn(()=>{let C=a.getValue(),I=(C==null?void 0:C.range)||{start:0,end:0},O=(0,ud.val)(s.clippedSpace.fromUnitSpace)(I.start),R=(0,ud.val)(s.clippedSpace.fromUnitSpace)(I.end),A,N;return O<0&&(O=0),R>(0,ud.val)(s.clippedSpace.width)&&(R=(0,ud.val)(s.clippedSpace.width)),O>R?(N=0,A=0):(N=O,A=(R-O)/$j),C?Df.default.createElement(Df.default.Fragment,null,f,Df.default.createElement(ZD,{id:"range-strip",enabled:C.enabled,className:"".concat(S?"dragging":""," ").concat(C.enabled?"enabled":""),ref:l,style:{transform:"translateX(".concat(N,"px) scale(").concat(A,", 1)")}})):Df.default.createElement(Df.default.Fragment,null)},[s,l,a,f,S])},gce=mce}),Of,Mh,yce,bce,_ce,wce,xce,Sce,Ece,Kj,UDe=P(()=>{Of=Nt,Sn(),Te(),Mv(),ll(),Es(),Rr(),Mh=X(Ne()),Ve(),mo(),vce(),Zu(),bce=le.div(yce||(yce=J([`
  position: absolute;
  top: 0;
  // the right handle has to be pulled back by its width since its right side indicates its position, not its left side
  left: `,`px;
  transform-origin: left top;
  width: `,`px;
  height: `,`px;
  z-index: 3;

  --bg: `,`;

  stroke: `,`;
  user-select: none;

  cursor: `,`;

  // no pointer events unless pointer-root is in normal mode _and_ the
  // focus range is enabled
  #pointer-root & {
    pointer-events: none;
  }

  #pointer-root.normal & {
    pointer-events: auto;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.dragging {
    pointer-events: none !important;
  }

  // highlight the handle if it's hovered, or the whole strip is hovverd
  `,`:hover ~ &, &:hover {
    --bg: `,`;
    stroke: `,`;
  }

  // highlight the handle when it's being dragged or the whole strip is being dragged.
  // using dragging.dragging to give this selector priority, as it seems to be overridden
  // by the hover selector above
  &.dragging,
  `,`.dragging.dragging ~ & {
    --bg: `,`;
    stroke: `,`;
  }

  #pointer-root.draggingPositionInSequenceEditor &:hover {
    --bg: `,`;
    stroke: #40aaa4;
  }

  background-color: var(--bg);

  // a larger hit zone
  &:before {
    display: block;
    content: ' ';
    position: absolute;
    inset: -8px;
  }
`])),s=>s.type==="start"?0:-Cs.thumbWidth,Cs.thumbWidth,()=>dd-1,({enabled:s})=>s?Cs.enabled.backgroundColor:Cs.disabled.backgroundColor,Cs.enabled.stroke,s=>s.type==="start"?"w-resize":"e-resize",gh,()=>ZD,Cs.hover.backgroundColor,Cs.hover.stroke,()=>ZD,Cs.dragging.backgroundColor,Cs.dragging.stroke,Cs.dragging.backgroundColor),wce=le.div(_ce||(_ce=J([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    var(--bg) 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),s=>s.type==="start"?90:-90,s=>s.type==="start"?Cs.thumbWidth:-Cs.thumbWidth+1),Sce=le.div(xce||(xce=J([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    `,` 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),s=>s.type==="start"?-90:90,()=>vC.backgroundColor,s=>s.type==="start"?-12:Cs.thumbWidth),Ece=({layoutP:s,thumbType:a})=>{var l;let[d,f]=wr(null),g=(0,Mh.useMemo)(()=>(0,Of.prism)(()=>{let{projectId:C,sheetId:I}=(0,Of.val)(s.sheet).address;return(0,Of.val)(ue().atomP.ahistoric.projects.stateByProjectId[C].stateBySheetId[I].sequence.focusRange)}),[s]),b=(0,Mh.useMemo)(()=>({debugName:"FocusRangeThumb",onDragStart(){let C,I,O=(0,Of.val)(s.sheet),R={start:0,end:O.getSequence().length},A=g.getValue()||{range:R,enabled:!1},N=A.enabled,L=A.range[a],V=(0,Of.val)(s.scaledSpace.toUnitSpace),G=V(Cs.rangeStripMinWidth);return{onDrag($,Y,ie){var re;let ce,Pe=ha.checkIfMouseEventSnapToPos(ie,{ignore:f});if(Pe==null){let we=V($);ce=L+we}else ce=Pe;I=((re=g.getValue())==null?void 0:re.range)||R,a==="start"?ce=Math.max(Math.min(ce,I.end-G),0):ce=Math.min(Math.max(ce,I.start+G),O.getSequence().length);let ye=O.getSequence().closestGridPosition(ce);C!==void 0&&C.discard(),C=ue().tempTransaction(({stateEditors:we})=>{we.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(B(F({},O.address),{range:B(F({},I),{[a]:ye}),enabled:N}))})},onDragEnd($){$?C==null||C.commit():C==null||C.discard()}}}}),[s]),[_]=Bi(f,b);Kl(_,"draggingPositionInSequenceEditor",a==="start"?"w-resize":"e-resize");let S=rr(g);return Ch(_,(l=S==null?void 0:S.range[a])!=null?l:0),Yn(()=>{let C=g.getValue();if(!C)return null;let{enabled:I}=C,O=C.range[a],R=(0,Of.val)(s.clippedSpace.fromUnitSpace)(O);return(R<0||(0,Of.val)(s.clippedSpace.width)<R)&&(R=-1e4),Mh.default.createElement(bce,B(F(F({ref:d},ha.includePositionSnapAttrs(O)),id(O)),{className:"".concat(_&&"dragging"," ").concat(I&&"enabled"),enabled:I,type:a,style:{transform:"translate3d(".concat(R,"px, 0, 0)")}}),Mh.default.createElement(wce,{type:a,enabled:I}),Mh.default.createElement(Sce,{type:a}),Mh.default.createElement("svg",{viewBox:"0 0 9 18",xmlns:"http://www.w3.org/2000/svg"},Mh.default.createElement("line",{x1:"4",y1:"6",x2:"4",y2:"12"}),Mh.default.createElement("line",{x1:"6",y1:"6",x2:"6",y2:"12"})))},[s,d,g,_])},Kj=Ece});function zDe(s,a){let[l,d]=(0,cd.useState)("none");return Kl(l!=="none","dragging",l==="creating"?"ew-resize":"move"),(0,cd.useMemo)(()=>{let f=()=>({debugName:"FocusRangeZone/focusRangeCreationGestureHandlers",onDragStart(b){let _,S=(0,Tv.val)(s.clippedSpace.toUnitSpace),C=(0,Tv.val)(s.scaledSpace.toUnitSpace),I=(0,Tv.val)(s.sheet),O=I.getSequence(),R=b.target.getBoundingClientRect(),A=S(b.clientX-R.left),N=C(Cs.rangeStripMinWidth);return{onDrag(L){let V=C(L),G=A,$=A+V;[G,$]=[_i(G,0,O.length),_i($,0,O.length)].map(Y=>O.closestGridPosition(Y)),$<G?[G,$]=[Math.max(Math.min($,G-N),0),G]:L>0&&($=Math.min(Math.max($,G+N),O.length)),_&&_.discard(),_=ue().tempTransaction(({stateEditors:Y})=>{Y.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(B(F({},I.address),{range:{start:G,end:$},enabled:!0}))})},onDragEnd(L){L&&_!==void 0?_.commit():_&&_.discard()}}},lockCSSCursorTo:"ew-resize"}),g=()=>({debugName:"FocusRangeZone/panelMoveGestureHandlers",onDragStart(){let b,_=a.current,S=a.current.addBoundsHighlightLock();return{onDrag(C,I){let O=B(F({},_.dims),{top:_i(_.dims.top+I,0,window.innerHeight-Wc),left:_i(_.dims.left+C,-_.dims.width+Wc,window.innerWidth-Wc)}),R=tD(O,{width:window.innerWidth,height:window.innerHeight});b==null||b.discard(),b=ue().tempTransaction(({stateEditors:A})=>{A.studio.historic.panelPositions.setPanelPosition({position:R,panelId:_.panelId})})},onDragEnd(C){S(),C?b==null||b.commit():b==null||b.discard()}}},lockCSSCursorTo:"move"});return{debugName:"FocusRangeZone",onDragStart(b){let[_,S]=b.shiftKey?["creating",f().onDragStart(b)]:["moving-panel",g().onDragStart(b)];return d(_),S===!1?!1:{onDrag(C,I,O,R,A){S.onDrag(C,I,O,R,A)},onDragEnd(C){var I;d("none"),(I=S.onDragEnd)==null||I.call(S,C)}}}}},[s,a])}var Tv,cd,Cce,Pce,Tce,Mce,VDe=P(()=>{Tv=Nt,Sn(),Te(),Qb(),Mv(),ll(),Es(),FDe(),_se(),Rr(),di(),cd=X(Ne()),Ve(),vce(),UDe(),fh(),Pce=le.div(Cce||(Cce=J([`
  position: absolute;
  height: `,`px;
  left: 0;
  right: 0;
  box-sizing: border-box;
  /* Use the "grab" cursor if the shift key is up, which is the one used on the top strip of the sequence editor */
  cursor: `,`;
`])),()=>dd,s=>s.isShiftDown?"ew-resize":"move"),Tce=({layoutP:s})=>{let[a,l]=wr(null),d=Zb(),f=(0,cd.useRef)(d);f.current=d;let g=(0,cd.useMemo)(()=>(0,Tv.prism)(()=>{let{projectId:S,sheetId:C}=(0,Tv.val)(s.sheet).address;return(0,Tv.val)(ue().atomP.ahistoric.projects.stateByProjectId[S].stateBySheetId[C].sequence.focusRange)}),[s]);Bi(l,zDe(s,f));let b=yse("Shift"),_=NDe(l);return(0,cd.useEffect)(()=>{if(!b&&_)return f.current.addBoundsHighlightLock()},[!b&&_]),Yn(()=>cd.default.createElement(Pce,{ref:a,isShiftDown:b},cd.default.createElement(gce,{layoutP:s}),cd.default.createElement(Kj,{thumbType:"start",layoutP:s}),cd.default.createElement(Kj,{thumbType:"end",layoutP:s})),[s,g,b])},Mce=Tce}),u_,dd,vC,kce,Ace,Ice,Rce,Mv=P(()=>{Sn(),u_=X(Ne()),Ve(),pce(),mo(),Dr(),VDe(),dd=18,vC={backgroundColor:"#1f2120eb",borderColor:"#1c1e21"},Ace=le.div(kce||(kce=J([`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border-bottom: 1px solid `,`;
  `,`;
`])),dd,vC.backgroundColor,vC.borderColor,kr),Ice=({layoutP:s})=>{let a=rr(s.rightDims.width);return u_.default.createElement(u_.default.Fragment,null,u_.default.createElement(Ace,F({},id("hide")),u_.default.createElement(hce,{layoutP:s,width:a,height:dd}),u_.default.createElement(Mce,{layoutP:s})))},Rce=Ice}),kv,Dce,Oce,Lce,Nce,Fce,Bce,Uce,zce,jDe=P(()=>{kv=X(Ne()),Ve(),Sn(),Te(),Z4(),rv(),Dce=s=>isFinite(s)&&s>0,Lce=le.div(Oce||(Oce=J([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),Fce=le.div(Nce||(Nce=J([`
  `,`;
  white-space: nowrap;
`])),yf),Bce=({deltaX:s})=>s*.25,Uce=({layoutP:s})=>{let a=rr(s.sheet),l=(0,kv.useMemo)(()=>{let f;return{temporarilySetValue(g){f&&(f.discard(),f=void 0),f=ue().tempTransaction(({stateEditors:b})=>{b.coreByProject.historic.sheetsById.sequence.setLength(B(F({},a.address),{length:g}))})},discardTemporaryValue(){f&&(f.discard(),f=void 0)},permanentlySetValue(g){f&&(f.discard(),f=void 0),ue().transaction(({stateEditors:b})=>{b.coreByProject.historic.sheetsById.sequence.setLength(B(F({},a.address),{length:g}))})}}},[s,a]),d=(0,kv.useRef)(null);return(0,kv.useLayoutEffect)(()=>{d.current.focus()},[]),Yn(()=>{let f=a.getSequence().length;return kv.default.createElement(Lce,null,kv.default.createElement(Fce,null,"Sequence length"),kv.default.createElement(sR,B(F({value:f},l),{isValid:Dce,inputRef:d,nudge:Bce})))},[a,l,d])},zce=Uce});function HDe(s,a){let l=(0,Ha.useRef)(a);l.current=a;let d=(0,Ha.useMemo)(()=>({debugName:"LengthIndicator/useDragBulge",lockCSSCursorTo:"ew-resize",onDragStart(g){let b,_=l.current,S=(0,Av.val)(l.current.layoutP.sheet),C=S.getSequence().length,I=(0,Av.val)(_.layoutP.scaledSpace.toUnitSpace);return{onDrag(O,R,A){let N=I(O);b&&(b.discard(),b=void 0),b=ue().tempTransaction(({stateEditors:L})=>{L.coreByProject.historic.sheetsById.sequence.setLength(B(F({},S.address),{length:C+N}))})},onDragEnd(O){O?b&&b.commit():b&&b.discard()}}}}),[]),[f]=Bi(s,d);return Ch(f,-1),[f]}var Av,Ha,Xj,yC,Vce,Lf,jce,Hce,Gce,Wce,$ce,Kce,Xce,qce,Yce,Zce,Qce,GDe=P(()=>{Sn(),Av=Nt,Ha=X(Ne()),Ve(),Ih(),Mv(),Rr(),Es(),Te(),Yc(),mo(),Ub(),jDe(),Dr(),Qc(),Xj=1e3,yC={stripNormal:"#0000006c",stripActive:"#000000"},Lf=le.div(Vce||(Vce=J([`
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  z-index: `,`;
  pointer-events: none;

  &:after {
    display: block;
    content: ' ';
    position: absolute;
    /* top: `,`px; */
    top: 0;
    bottom: 0;
    left: -1px;
    width: 1px;
    background-color: `,`;
  }

  &:hover:after,
  &.dragging:after {
    background-color: `,`;
  }
`])),()=>pd.lengthIndicatorStrip,dd,yC.stripNormal,yC.stripActive),Hce=le.div(jce||(jce=J([`
  position: absolute;
  top: `,`px;
  width: 100px;
  left: -50px;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
`])),dd-15),Wce=le.div(Gce||(Gce=J([`
  margin-top: 8px;
  font-size: 10px;
  white-space: nowrap;
  padding: 2px 8px;
  border-radius: 2px;
  `,`;
  cursor: ew-resize;
  color: #464646;
  background-color: #0000004d;
  display: none;

  `,":hover &, ",`.dragging & {
    display: block;
    color: white;
    background-color: `,`;
  }
`])),kr,Lf,Lf,yC.stripActive),Kce=le.div($ce||($ce=J([`
  font-size: 10px;
  white-space: nowrap;
  padding: 1px 2px;
  border-radius: 2px;
  `,`;
  justify-content: center;
  align-items: center;
  cursor: ew-resize;
  color: #5d5d5d;
  background-color: #191919;

  `,":hover &, ",`.dragging & {
    color: white;
    background-color: `,`;

    & > svg:first-child {
      margin-right: -1px;
    }
  }

  & > svg:first-child {
    margin-right: -4px;
  }
`])),kr,Lf,Lf,yC.stripActive),qce=le.div(Xce||(Xce=J([`
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgb(23 23 23 / 43%);
  width: `,`px;
  z-index: `,`;
  transform-origin: left top;

  `,".dragging ~ &, ",`:hover ~ & {
    background-color: rgb(23 23 23 / 60%);
  }
`])),Xj,()=>pd.lengthIndicatorCover,Lf,Lf),Yce=-1e4,Zce=({layoutP:s})=>{let[a,l]=wr(null),[d]=HDe(l,{layoutP:s}),{node:f,toggle:g,close:b}=qc({debugName:"LengthIndicator"},()=>Ha.default.createElement(Zc,null,Ha.default.createElement(zce,{layoutP:s,onRequestClose:b})));return Yn(()=>{let _=(0,Av.val)(s.sheet),S=(0,Av.val)(s.rightDims.height),C=_.getSequence(),I=C.length,O=I,R=(0,Av.val)(s.clippedSpace.fromUnitSpace)(O),A=(0,Av.val)(s.clippedSpace.width),N,L;return R>A?(L=0,N=0):(R<0&&(R=0),L=R,N=(A-R)/Xj),Ha.default.createElement(Ha.default.Fragment,null,f,Ha.default.createElement(Lf,{style:{height:S+"px",transform:"translateX(".concat(L===0?Yce:L,"px)")},className:d?"dragging":""},Ha.default.createElement(Hce,null,Ha.default.createElement(Kce,F({ref:a,onClick:V=>{g(V,l)}},id("hide")),Ha.default.createElement(DAe,null),Ha.default.createElement(OAe,null)),Ha.default.createElement(Wce,null,"Sequence length:"," ",C.positionFormatter.formatBasic(I)))),Ha.default.createElement(qce,{title:"Length",style:{height:S+"px",transform:"translateX(".concat(L,"px) scale(").concat(N,", 1)")}}))},[s,a,d,f])},Qce=Zce}),qj,kh,Jce,ede,tde,nde,rde,ide,sde,ode,WDe=P(()=>{Sn(),qj=Nt,kh=X(Ne()),Ve(),pce(),Ih(),Mv(),mo(),ede=le.div(Jce||(Jce=J([`
  position: absolute;
  top: 0;
  left: 0;
  margin-top: 0px;
`]))),nde=le.div(tde||(tde=J([`
  position: absolute;
  top: 16px;
  font-size: `,`;
  color: `,`;
  text-align: center;
  transform: translateX(-50%);
  background: `,`;
  padding: 1px 8px;
  font-variant-numeric: tabular-nums;
  pointer-events: none;
  z-index: `,`;
`])),Rf.stampFontSize,Rf.fullUnitStampColor,vC.backgroundColor,()=>pd.currentFrameStamp),ide=le.div(rde||(rde=J([`
  position: absolute;
  top: 5px;
  left: -0px;
  bottom: 0;
  width: 0.5px;
  background: rgba(100, 100, 100, 0.2);
  pointer-events: none;
`]))),sde=kh.default.memo(({layoutP:s})=>{let[a,l]=rr(jse()),d=rr(s.clippedSpace.fromUnitSpace),{sequence:f,formatter:g,clippedSpaceWidth:b}=Yn(()=>{let I=(0,qj.val)(s.sheet).getSequence(),O=(0,qj.val)(s.clippedSpace.width);return{sequence:I,formatter:I.positionFormatter,clippedSpaceWidth:O}},[s]);if(a==-1)return kh.default.createElement(kh.default.Fragment,null);let _=l===3?f.closestGridPosition(a):a,S=d(_),C=S>=0&&S<=b;return kh.default.createElement(kh.default.Fragment,null,kh.default.createElement(ede,null,kh.default.createElement(nde,{style:{opacity:C?1:0,transform:"translate3d(calc(".concat(S,"px - 50%), 0, 0)")}},g.formatForPlayhead(_)),kh.default.createElement(ide,{posType:l,style:{opacity:C?1:0,transform:"translate3d(".concat(S,"px, 0, 0)")}}))," ")}),ode=sde}),Qu,ma,ade,lde,ude,cde,dde,QD,hde,Yj,pde,JD,fde,eO,mde,Zj,gde,vde,$De=P(()=>{Sn(),Qu=Nt,J2(),al(),ma=X(Ne()),Ve(),Ih(),mo(),Dr(),Es(),lde=le.div(ade||(ade=J([`
  --threadHeight: 6px;
  --bg-inactive: #32353b;
  --bg-active: #5b5c5d;
  position: absolute;
  height: 0;
  width: 100%;
  left: 12px;
  /* bottom: 8px; */
  z-index: `,`;
  `,`
`])),()=>pd.horizontalScrollbar,kr),cde=le.div(ude||(ude=J([`
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--threadHeight);
`]))),QD=le.div(dde||(dde=J([`
  position: absolute;
  height: 5px;
  background: var(--bg-inactive);
  cursor: ew-resize;
  z-index: 2;

  &:hover,
  &:active {
    background: var(--bg-active);
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),t4("absolute","-4px")),Yj=le.div(hde||(hde=J([`
  position: absolute;
  height: 5px;
  width: 7px;
  left: 0;
  z-index: 2;
  top: 0;
  bottom: 0;
  display: block;

  &:hover:before {
    background: var(--bg-active);
  }

  &:before {
    `,`;
    display: block;
    content: ' ';
    background: var(--bg-inactive);
    border-radius: 0 2px 2px 0;
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),t4("absolute","0"),t4("absolute","-4px")),JD=le(Yj)(pde||(pde=J([`
  left: calc(-1 * 7px);
  cursor: w-resize;
  &:before {
    transform: scaleX(-1);
  }
`]))),eO=le(Yj)(fde||(fde=J([`
  cursor: e-resize;
  left: 0px;
`]))),Zj=le.div(mde||(mde=J([`
  display: `,`;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 4px;
  transform: translateX(-50%);
  background: #131d1f;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;

  `,`:hover &,
  `,`:hover &,
  `,":hover ~ ",` &,
  `,":hover ~ ",` & {
    display: block;
  }
`])),s=>s.active?"block":"none",JD,eO,QD,JD,QD,eO),gde=({layoutP:s})=>{let a=(0,ma.useCallback)(V=>V.toFixed(2),[]),l=(0,ma.useMemo)(()=>(0,Qu.prism)(()=>{let V=(0,Qu.val)(s.rightDims.width)-25,G=(0,Qu.val)(s.clippedSpace.range),$=(0,Qu.val)(s.sheet).getSequence().length,Y=Math.max(G.end,$),ie=G.start/Y*V,re=G.end/Y*V;return{rightWidth:V,clippedSpaceRange:G,sequenceLength:$,assumedLengthOfSequence:Y,rangeStartX:ie,rangeEndX:re,bottom:(0,Qu.val)(s.horizontalScrollbarDims.bottom)}}),[s]),{rangeStartX:d,rangeEndX:f,clippedSpaceRange:g,bottom:b}=rr(l),[_,S]=(0,ma.useState)("nothing"),C=(0,ma.useMemo)(()=>{let V=(0,Qu.val)(l),G=()=>{V=(0,Qu.val)(l)},$=Y=>Y/V.rightWidth*V.assumedLengthOfSequence;return{onRangeDragStart(){return G(),{onDrag(Y){S("both");let ie=$(Y),re=ih(V.clippedSpaceRange,ce=>ce+ie);(0,Qu.val)(s.clippedSpace.setRange)(re)},onDragEnd(){S("nothing")}}},onRangeStartDragStart(){return G(),{onDrag(Y){S("start");let ie=$(Y),re={start:V.clippedSpaceRange.start+ie,end:V.clippedSpaceRange.end};re.start>re.end-1&&(re.start=re.end-1),re.start<=0&&(re.start=0),(0,Qu.val)(s.clippedSpace.setRange)(re)},onDragEnd(){S("nothing")}}},onRangeEndDragStart(){return G(),{onDrag(Y){S("end");let ie=$(Y),re={start:V.clippedSpaceRange.start,end:V.clippedSpaceRange.end+ie};re.end<re.start+1&&(re.end=re.start+1),re.end>=V.assumedLengthOfSequence&&(re.end=V.assumedLengthOfSequence),(0,Qu.val)(s.clippedSpace.setRange)(re)},onDragEnd(){S("nothing")}}}}},[s,l]),[I,O]=(0,ma.useState)(null);Bi(I,{debugName:"HorizontalScrollbar/onRangeDrag",onDragStart:C.onRangeDragStart,lockCSSCursorTo:"ew-resize"});let[R,A]=(0,ma.useState)(null);Bi(R,{debugName:"HorizontalScrollbar/onRangeStartDrag",onDragStart:C.onRangeStartDragStart,lockCSSCursorTo:"w-resize"});let[N,L]=(0,ma.useState)(null);return Bi(N,{debugName:"HorizontalScrollbar/onRangeEndDrag",onDragStart:C.onRangeEndDragStart,lockCSSCursorTo:"e-resize"}),ma.default.createElement(lde,F({style:{bottom:b+8+"px"}},id("hide")),ma.default.createElement(cde,null,ma.default.createElement(QD,{ref:O,style:{width:"".concat(f-d,"px"),transform:"translate3d(".concat(d,"px, 0, 0)")}}),ma.default.createElement(JD,{ref:A,style:{transform:"translate3d(".concat(d,"px, 0, 0)")}},ma.default.createElement(Zj,{active:_==="both"||_==="start"},a(g.start))),ma.default.createElement(eO,{ref:L,style:{transform:"translate3d(".concat(f,"px, 0, 0)")}},ma.default.createElement(Zj,{active:_==="both"||_==="end"},a(g.end)))))},vde=gde}),yde,bde,_de,wde,xde,KDe=P(()=>{yde=X(Ne()),Ve(),_de=le.div(bde||(bde=J([`
  position: absolute;
  inset: `,`px;
`])),s=>s.room*-1),wde=s=>yde.default.createElement(_de,{room:s.room}),xde=wde}),tO,nO,Qj,Sde,Ede,Cde,Pde,Tde,Mde,kde,Ade,XDe=P(()=>{Ve(),Sn(),Z4(),rv(),tO=X(Ne()),nO=X(Ne()),Qj=Nt,Gy(),Sde=s=>isFinite(s)&&s>=0,Cde=le.div(Ede||(Ede=J([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),Tde=le.div(Pde||(Pde=J([`
  `,`;
  white-space: nowrap;
`])),yf),Mde=({deltaX:s})=>s*.25,kde=({layoutP:s,onRequestClose:a})=>{let l=(0,Qj.val)(s.sheet),d=l.getSequence(),f=(0,tO.useMemo)(()=>{let b,_=d.position;return{temporarilySetValue(S){b&&(b=void 0),b=_i(S,0,d.length),d.position=b},discardTemporaryValue(){b&&(b=void 0,d.position=_,a("discardTemporaryValue"))},permanentlySetValue(S){b&&(b=void 0),d.position=_i(S,0,d.length),a("permanentlySetValue")}}},[s,d]),g=(0,tO.useRef)(null);return(0,tO.useLayoutEffect)(()=>{g.current.focus()},[]),Yn(()=>{let b=l.getSequence(),_=Number((0,Qj.val)(b.pointer.position).toFixed(3));return nO.default.createElement(Cde,null,nO.default.createElement(Tde,null,"Sequence position"),nO.default.createElement(sR,B(F({value:_},f),{isValid:Sde,inputRef:g,nudge:Mde})))},[l,f,g])},Ade=kde}),Ide,qDe=P(()=>{Ide=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0}),Rde,YDe=P(()=>{qDe(),Rde=s=>Ide?s.metaKey===!0:s.ctrlKey===!0});function ZDe(){rO=!1}function QDe(){rO=!0}function JDe(){let s=ue();(0,Dde.useEffect)(()=>{let a=l=>{let d=l.composedPath()[0];if(!(d&&(d.tagName==="INPUT"||d.tagName==="TEXTAREA"))){if(l.key==="z"||l.key==="Z"||l.code==="KeyZ")if(Rde(l))l.shiftKey===!0?s.redo():s.undo();else return;else if(l.code==="Space"&&!l.shiftKey&&!l.metaKey&&!l.altKey&&!l.ctrlKey){if(!rO)return;let f=nAe();if(f)if(f.playing)f.pause();else{let{projectId:g,sheetId:b}=f.address,_=(0,Ju.prism)(()=>{let I=(0,Ju.val)(ue().atomP.ahistoric.projects.stateByProjectId[g].stateBySheetId[b].sequence.focusRange);return Ju.prism.memo("shouldFollowFocusRange",()=>{let O=f.position;if(I){let R=O>=I.range.start&&O<=I.range.end;return I.enabled?!!R:!0}else return!0},[])&&I&&I.enabled?{range:[I.range.start,I.range.end],isFollowingARange:!0}:{range:[0,(0,Ju.val)(f.pointer.length)],isFollowingARange:!1}}),S=f.playDynamicRange((0,Ju.prism)(()=>(0,Ju.val)(_).range),ue().ticker),C=Jj(f);S.finally(()=>{C.set(void 0)}),C.set(_)}else return}else if(l.altKey&&(l.key==="\\"||l.code==="Backslash"||l.code==="IntlBackslash"))s.transaction(({stateEditors:f,drafts:g})=>{f.studio.ahistoric.setVisibilityState(g.ahistoric.visibilityState==="everythingIsHidden"?"everythingIsVisible":"everythingIsHidden")});else return;l.preventDefault(),l.stopPropagation()}};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[])}var Dde,Ju,rO,Jj,Ode,e6=P(()=>{Dde=X(Ne()),Te(),YDe(),pf(),Ju=Nt,SR(),rO=!0,Jj=CE(s=>new Ju.Atom(void 0)),Ode=CE(s=>(0,Ju.prism)(()=>{let a=Jj(s).prism.getValue();if(a)return a.getValue().isFollowingARange;{let{projectId:l,sheetId:d}=s.address,f=(0,Ju.val)(ue().atomP.ahistoric.projects.stateByProjectId[l].stateBySheetId[d].sequence.focusRange);if(!f||!f.enabled)return!1;let g=(0,Ju.val)(s.pointer.position);return g>=f.range.start&&g<=f.range.end}}))});function eOe(s,a){return ca(s,{menuItems(){return[{label:"Place marker",callback:()=>{ue().transaction(({stateEditors:l})=>{let d=(0,hd.val)(a.layoutP.sheet),f=d.getSequence();l.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:d.address,markers:[{id:z2e(),position:f.position}],snappingFunction:f.closestGridPosition})})}}]}})}var hd,eu,Lde,Iv,Nde,Fde,Bde,t6,Ude,zde,Vde,jde,Hde,Gde,tOe=P(()=>{KDe(),Es(),Rr(),Sn(),hd=Nt,Gy(),eu=X(Ne()),Ve(),Ih(),mo(),Dr(),Yc(),Qc(),XDe(),e6(),ll(),da(),Te(),wh(),Zu(),hv(),Iv=le.div(Lde||(Lde=J([`
  --thumbColor: #00e0ff;
  position: absolute;
  top: 0;
  left: 0;
  width: 5px;
  height: 100%;
  z-index: `,`;
  pointer-events: none;

  display: `,`;
`])),()=>pd.playhead,s=>s.isVisible?"block":"none"),Fde=le.div(Nde||(Nde=J([`
  position: absolute;
  top: 8px;
  width: 0;
  height: calc(100% - 8px);
  border-left: 1px solid #27e0fd;
  z-index: 10;
  pointer-events: none;

  #pointer-root.draggingPositionInSequenceEditor &:not(.seeking) {
    /* pointer-events: auto; */
    /* cursor: var(`,`); */

    &:after {
      position: absolute;
      inset: -8px;
      display: block;
      content: ' ';
    }
  }
`])),gh),t6=le.div(Bde||(Bde=J([`
  background-color: var(--thumbColor);
  position: absolute;
  width: 5px;
  height: 13px;
  top: -4px;
  left: -2px;
  z-index: 11;
  cursor: ew-resize;
  --sunblock-color: #1f2b2b;

  `,`;

  `,`.seeking > & {
    pointer-events: none !important;
  }

  #pointer-root.draggingPositionInSequenceEditor
    `,`:not(.seeking)
    > & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  `,`.playheadattachedtofocusrange > & {
    top: -8px;
    --sunblock-color: #005662;
    &:before,
    &:after {
      border-bottom-width: 8px;
    }
  }

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-left: 2px solid transparent;
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    right: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-right: 2px solid transparent;
  }
`])),kr,Iv,Iv,gh,Iv),zde=le.div(Ude||(Ude=J([`
  position: absolute;
  left: 1px;
  right: 1px;
  top: 13px;
  border-top: 3px solid var(--thumbColor);
  border-right: 1px solid transparent;
  border-left: 1px solid transparent;
  pointer-events: none;

  /* `,`.playheadattachedtofocusrange & {
    top: 10px;
    &:before,
    &:after {
      height: 15px;
    }
  } */

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    left: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 0 100% 0 0;
    border-top: 1px solid var(--thumbColor);
    border-right: 1px solid var(--thumbColor);
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    right: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 100% 0 0 0;
    border-top: 1px solid var(--thumbColor);
    border-left: 1px solid var(--thumbColor);
  }
`])),Iv),jde=le.div(Vde||(Vde=J([`
  display: none;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 2px;
  transform: translateX(-50%);
  background: #1a1a1a;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;
  `,":hover &, ",`.seeking & {
    display: block;
  }
`])),t6,Iv),Hde=({layoutP:s})=>{let[a,l]=wr(null),{node:d,toggle:f,close:g}=qc({debugName:"Playhead"},()=>eu.default.createElement(Zc,null,eu.default.createElement(Ade,{layoutP:s,onRequestClose:g}))),b=(0,eu.useMemo)(()=>({debugName:"RightOverlay/Playhead",onDragStart(){let C=(0,hd.val)(s.sheet).getSequence(),I=C.position,O=(0,hd.val)(s.scaledSpace.toUnitSpace),R=(0,hd.val)(s.seeker.setIsSeeking);return R(!0),BV(),{onDrag(A,N,L){var V;let G=O(A);C.position=(V=ha.checkIfMouseEventSnapToPos(L,{ignore:l}))!=null?V:_i(I+G,0,C.length)},onDragEnd(A){R(!1),dv()},onClick(A){f(A,a.current)}}}}),[s,l]),[_]=Bi(l,b);Kl(_,"draggingPositionInSequenceEditor","ew-resize"),Ch(rr(s.seeker.isSeeking)||_,-1);let[S]=eOe(l,{layoutP:s});return Yn(()=>{let C=(0,hd.val)(s.seeker.isSeeking),I=(0,hd.val)(s.sheet).getSequence(),O=(0,hd.val)(Ode(I)),R=I.positionPrism.getValue(),A=(0,hd.val)(s.clippedSpace.fromUnitSpace)(R),N=A>=0&&A<=(0,hd.val)(s.clippedSpace.width);return eu.default.createElement(eu.default.Fragment,null,S,d,eu.default.createElement(Iv,F({isVisible:N,style:{transform:"translate3d(".concat(A,"px, 0, 0)")},className:"".concat(C&&"seeking"," ").concat(O&&"playheadattachedtofocusrange")},id("hide")),eu.default.createElement(t6,F({ref:a},ha.includePositionSnapAttrs(R)),eu.default.createElement(xde,{room:8}),eu.default.createElement(zde,null),eu.default.createElement(jde,null,I.positionFormatter.formatForPlayhead(I.closestGridPosition(R)))),eu.default.createElement(Fde,B(F({},ha.includePositionSnapAttrs(R)),{className:C?"seeking":""}))))},[s,a,d])},Gde=Hde}),Rv,bC,iO,Wde,$de,Kde,Xde,nOe=P(()=>{Rv=Nt,Sn(),Te(),Mv(),bC=X(Ne()),Ve(),iO=1e3,$de=le.div(Wde||(Wde=J([`
  position: absolute;
  top: `,`px;
  left: 0;
  opacity: 0.15;
  width: `,`px;
  transform-origin: top left;
  pointer-events: none;
  background-color: `,`;
`])),dd,iO,s=>s.enabled?"#000000":"transparent"),Kde=({layoutP:s})=>{let a=(0,bC.useMemo)(()=>(0,Rv.prism)(()=>{let{projectId:l,sheetId:d}=(0,Rv.val)(s.sheet).address;return(0,Rv.val)(ue().atomP.ahistoric.projects.stateByProjectId[l].stateBySheetId[d].sequence.focusRange)}),[s]);return Yn(()=>{let l=a.getValue();if(!l||!l.enabled)return null;let d=(0,Rv.val)(s.rightDims.height)-dd,f=(0,Rv.val)(s.clippedSpace.fromUnitSpace),g=(0,Rv.val)(s.clippedSpace.width),b=[];{let _=0,S=f(l.range.start),C,I;_>S?(I=0,C=0):(S>g&&(S=g),I=_,C=(S-_)/iO),b.push({translateX:I,scaleX:C})}{let _=f(l.range.end),S=g,C,I;_>S?(I=0,C=0):(_<0&&(_=0),I=_,C=(S-_)/iO),b.push({translateX:I,scaleX:C})}return bC.default.createElement(bC.default.Fragment,null,b.map(({translateX:_,scaleX:S},C)=>bC.default.createElement($de,{key:"curtain-".concat(C),enabled:!0,style:{height:"".concat(d,"px"),transform:"translateX(".concat(_,"px) scaleX(").concat(S,")")}})))},[s,a])},Xde=Kde}),c_,qde,Yde,Zde,Qde,Jde,rOe=P(()=>{c_=X(Ne()),Ve(),Sn(),Te(),rv(),iz(),Yde=le.div(qde||(qde=J([`
  display: flex;
  gap: 8px;
  /* padding: 4px 8px; */
  height: 28px;
  align-items: center;
`]))),le.div(Zde||(Zde=J([`
  `,`;
  white-space: nowrap;
`])),yf),Qde=({layoutP:s,marker:a})=>{var l;let d=rr(s.sheet),f=(0,c_.useMemo)(()=>{let b;return{temporarilySetValue(_){b&&(b.discard(),b=void 0),b=ue().tempTransaction(({stateEditors:S})=>{S.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:d.address,markerId:a.id,label:_})})},discardTemporaryValue(){b&&(b.discard(),b=void 0)},permanentlySetValue(_){b&&(b.discard(),b=void 0),ue().transaction(({stateEditors:S})=>{S.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:d.address,markerId:a.id,label:_})})}}},[s,d]),g=(0,c_.useRef)(null);return(0,c_.useLayoutEffect)(()=>{g.current.focus()},[]),c_.default.createElement(Yde,null,c_.default.createElement(aR,B(F({value:(l=a.label)!=null?l:""},f),{isValid:()=>!0,inputRef:g})))},Jde=Qde});function iOe(s,a){return ca(s,{menuItems(){return[{label:"Remove marker",callback:()=>{ue().transaction(({stateEditors:l})=>{l.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removeMarker({sheetAddress:a.sheetAddress,markerId:a.markerId})})}}]}})}function sOe(s,a){let l=(0,ga.useRef)(a);l.current=a;let d=(0,ga.useMemo)(()=>({debugName:"MarkerDot/useDragMarker (".concat(a.marker.id,")"),onDragStart(g){let b=l.current.marker,_=(0,sO.val)(a.layoutP.scaledSpace.toUnitSpace),S;return BV(),{onDrag(C,I,O){var R;let A=b,N=Math.max((R=ha.checkIfMouseEventSnapToPos(O,{ignore:s}))!=null?R:A.position+_(C),0);S==null||S.discard(),S=ue().tempTransaction(({stateEditors:L})=>{L.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:(0,sO.val)(a.layoutP.sheet.address),markers:[B(F({},A),{position:N})],snappingFunction:(0,sO.val)(a.layoutP.sheet).getSequence().closestGridPosition})})},onDragEnd(C){C?S==null||S.commit():S==null||S.discard(),dv()}}}}),[]),[f]=Bi(s,d);return Ch(f,a.marker.position),Kl(f,"draggingPositionInSequenceEditor draggingMarker","ew-resize"),[f]}var sO,ga,n6,r6,ehe,the,nhe,rhe,ihe,oO,she,ohe,ahe,lhe,uhe,che,oOe=P(()=>{sO=Nt,Sn(),Te(),ll(),da(),Rr(),ga=X(Ne()),Ve(),mo(),Es(),Ih(),Zu(),dD(),qse(),hv(),Yc(),Qc(),rOe(),n6=12,r6=12,ehe=n6*2,the=r6*2,rhe=le.div(nhe||(nhe=J([`
  position: absolute;
  // below the sequence ruler "top bar"
  top: 18px;
  z-index: `,`;
`])),()=>pd.marker),oO=le.div(ihe||(ihe=J([`
  position: absolute;
  `,`
  pointer-events: none;
`])),Yl(n6,r6)),she=ga.default.memo(()=>ga.default.createElement(oO,{children:ga.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ga.default.createElement("path",{d:"M12 5H0V7H2.71973L5.96237 10.2426L9.20501 7H12V5Z",fill:"#40AAA4"}))})),ahe=le.div(ohe||(ohe=J([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  // :not dragging marker to ensure that markers don't snap to other markers
  // this works because only one marker track (so this technique is not used by keyframes...)
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) & {
    `,`
  }

  // "All instances of this component <Mark/> inside #pointer-root when it has the .draggingPositionInSequenceEditor class"
  // ref: https://styled-components.com/docs/basics#pseudoelements-pseudoselectors-and-nesting
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) &,
  #pointer-root.draggingPositionInSequenceEditor
    &.`,` {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &:hover
    + `,`,
    // notice , "or" in CSS
    &.`,`
    + `,` {
    `,`
  }
`])),sd.CSS,sd.CSS_WHEN_SOMETHING_DRAGGING,sd.BEING_DRAGGED_CLASS,gh,oO,sd.BEING_DRAGGED_CLASS,oO,Yl(ehe,the)),lhe=({layoutP:s,markerId:a})=>{let l=rr(s.sheet.address),d=rr(ue().atomP.historic.projects.stateByProjectId[l.projectId].stateBySheetId[l.sheetId].sequenceEditor.markerSet.byId[a]);if(!d)return null;let f=rr(s.clippedSpace.width),g=rr(s.clippedSpace.fromUnitSpace)(d.position),b=g<=0||g>f,_=b?-1e4:g,S=b?0:1;return ga.default.createElement(rhe,{style:{transform:"translateX(".concat(_,"px) scale(").concat(S,")")}},ga.default.createElement(che,{marker:d,layoutP:s}))},uhe=lhe,che=({layoutP:s,marker:a})=>{let l=rr(s.sheet.address),[d,f]=wr(null),[g]=iOe(f,{sheetAddress:l,markerId:a.id}),[b]=sOe(f,{layoutP:s,marker:a}),{node:_,toggle:S,close:C}=qc({debugName:"MarkerPopover"},()=>ga.default.createElement(Zc,null,ga.default.createElement(Jde,{marker:a,layoutP:s,onRequestClose:C})));return ga.default.createElement(ga.default.Fragment,null,g,_,ga.default.createElement(ahe,F({title:a.label?"Marker: ".concat(a.label):"Marker",ref:d,onClick:I=>{S(I,d.current)}},sd.reactProps({isDragging:b,position:a.position}))),ga.default.createElement(she,null))}}),aO,dhe,hhe,aOe=P(()=>{Sn(),Te(),aO=X(Ne()),oOe(),dhe=({layoutP:s})=>{let a=rr(s.sheet.address),l=ue().atomP.historic.projects.stateByProjectId[a.projectId].stateBySheetId[a.sheetId].sequenceEditor.markerSet,d=rr(l.allIds);return aO.default.createElement(aO.default.Fragment,null,d&&Object.keys(d).map(f=>aO.default.createElement(uhe,{key:f,layoutP:s,markerId:f})))},hhe=dhe}),phe,Ah,fhe,mhe,ghe,vhe,lOe=P(()=>{Ih(),Sn(),phe=Nt,Ah=X(Ne()),Ve(),GDe(),WDe(),$De(),tOe(),Mv(),nOe(),aOe(),mhe=le.div(fhe||(fhe=J([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: visible;
  pointer-events: none;
`])),()=>pd.rightOverlay),ghe=({layoutP:s})=>Yn(()=>{let a=(0,phe.val)(s.rightDims.width);return Ah.default.createElement(mhe,{style:{width:a+"px"}},Ah.default.createElement(Gde,{layoutP:s}),Ah.default.createElement(vde,{layoutP:s}),Ah.default.createElement(ode,{layoutP:s}),Ah.default.createElement(Rce,{layoutP:s}),Ah.default.createElement(hhe,{layoutP:s}),Ah.default.createElement(Qce,{layoutP:s}),Ah.default.createElement(Xde,{layoutP:s}))},[s]),vhe=ghe}),yhe,lO,bhe,_he,whe,xhe,uOe=P(()=>{yhe=Nt,Sn(),Te(),lO=X(Ne()),Ve(),Ub(),mo(),_he=le.button(bhe||(bhe=J([`
  outline: none;
  background-color: #1c1d21;
  border: 1px solid #191919;
  border-radius: 2px;
  display: flex;
  bottom: 14px;
  right: 8px;
  z-index: 1;
  position: absolute;

  padding: 4px 8px;
  display: flex;
  color: #656d77;
  line-height: 20px;
  font-size: 10px;

  &:hover {
    color: white;
  }

  & > svg {
    transition: transform 0.3s;
    transform: rotateZ(0deg);
  }

  &:hover > svg {
    transform: rotateZ(-20deg);
  }

  &.open > svg {
    transform: rotateZ(-180deg);
  }

  &.open:hover > svg {
    transform: rotateZ(-160deg);
  }
`]))),whe=({layoutP:s})=>{let a=rr(s.graphEditorDims.isOpen),l=(0,lO.useCallback)(()=>{let d=(0,yhe.val)(s.graphEditorDims.isOpen);ue().transaction(({stateEditors:f})=>{f.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!d})})},[s]);return lO.default.createElement(_he,F({onClick:l,title:"Toggle graph editor",className:a?"open":""},id("hide")),lO.default.createElement(ZAe,null))},xhe=whe}),ec,Si,She,Ehe,Che,Phe,pd,The,Mhe,khe,Ahe,Ihe,Rhe,Dhe,Ohe,Lhe,Ih=P(()=>{pf(),Sn(),ise(),ec=Nt,Si=X(Ne()),Ve(),EDe(),KD(),ODe(),lOe(),Qb(),uie(),Bie(),mo(),Jt(),di(),uOe(),fh(),sv(),Ehe=le(SV)(She||(She=J([`
  z-index: `,`;
  box-shadow: 2px 2px 0 rgb(0 0 0 / 11%);
`])),Ib.sequenceEditorPanel),Phe=le.div(Che||(Che=J([`
  background-color: rgba(40, 43, 47, 0.99);
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
  pointer-events: none;
`]))),pd=(()=>{let s={rightBackground:0,scrollableArea:0,rightOverlay:0,lengthIndicatorCover:0,lengthIndicatorStrip:0,playhead:0,currentFrameStamp:0,marker:0,horizontalScrollbar:0},a=-1;for(let l of Object.keys(s))s[l]=a,a++;return s})(),Mhe=le(vV)(The||(The=J([`
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1;
`]))),khe={edges:{left:{from:"screenLeft",distance:.1},right:{from:"screenRight",distance:.2},top:{from:"screenBottom",distance:.4},bottom:{from:"screenBottom",distance:.01}}},Ahe={width:800,height:200},Ihe=s=>Si.default.createElement(gV,{panelId:"sequenceEditor",defaultPosition:khe,minDims:Ahe},Si.default.createElement(Rhe,null)),Rhe=()=>{let{dims:s}=Zb(),[a,l]=(0,Si.useState)(null);return Cee(a),Yn(()=>{let d=ec.prism.memo("panelSize",()=>{let R=s.width,A=s.height;return{width:R,height:A,widthWithoutBorder:R-2,heightWithoutBorder:A-4,screenX:s.left,screenY:s.top}},[s]),f=Lo(hf().filter(R=>cn(R)||Et(R)).map(R=>Et(R)?R.sheet:R));if(Lo(f.map(R=>R.template)).length!==1)return Si.default.createElement(Si.default.Fragment,null);let g=f[0];if(!g)return Si.default.createElement(Si.default.Fragment,null);let b=CV("panelSizeP",d).pointer,_=ec.prism.memo("key",()=>JSON.stringify(g.address),[g]),S=ec.prism.memo("layout",()=>DDe(g,b),[g,b]).getValue();if((0,ec.val)(S.tree.children).length===0)return Si.default.createElement(Si.default.Fragment,null);let C=ec.prism.memo("containerRef",Lhe,[]),I=(0,ec.val)(S.graphEditorDims.isAvailable),O=(0,ec.val)(S.graphEditorDims.isOpen);return Si.default.createElement(Ehe,{ref:R=>{C(R),R!==a&&l(R)}},Si.default.createElement(Phe,{style:{width:"".concat((0,ec.val)(S.leftDims.width),"px")}}),Si.default.createElement(Wse,{layoutP:S},Si.default.createElement(Dhe,{layoutP:S}),Si.default.createElement(Zue,{key:_+"-dopeSheet",layoutP:S}),O&&Si.default.createElement(bue,{key:_+"-graphEditor",layoutP:S}),I&&Si.default.createElement(xhe,{layoutP:S}),Si.default.createElement(vhe,{layoutP:S})))},[s,a])},Dhe=({layoutP:s})=>Yn(()=>{let a=(0,ec.val)(s.sheet);return Si.default.createElement(Mhe,{style:{width:(0,ec.val)(s.leftDims.width)}},Si.default.createElement(E4,null,Si.default.createElement(df,null,a.address.sheetId," "),Si.default.createElement(dE,null,":"," "),Si.default.createElement(df,null,a.address.sheetInstanceId," "),Si.default.createElement(dE,null," ",">"," "),Si.default.createElement(df,null,"Sequence")))},[s]),Ohe=Ihe,Lhe=()=>{let s=null,a={passive:!1,capture:!1},l=d=>{Math.abs(d.deltaY)<Math.abs(d.deltaX)&&(d.preventDefault(),d.stopPropagation())};return d=>{s!==d&&s&&s.removeEventListener("wheel",l,a),s=d,d&&d.addEventListener("wheel",l,a)}}}),Dv,Nhe,Fhe,cOe=P(()=>{hAe(),pV(),Dv=X(Ne()),Te(),Sn(),PIe(),Ih(),Nhe=()=>{let s=rr(ue().paneManager.allPanesD),a=Object.entries(s).map(([l,d])=>Dv.default.createElement(rse,{key:"pane-".concat(l),paneInstance:d}));return Dv.default.createElement(Dv.default.Fragment,null,a,Dv.default.createElement($Y,null),Dv.default.createElement(iie,null),Dv.default.createElement(Ohe,null))},Fhe=Nhe}),Bhe,Uhe,zhe,dOe=P(()=>{Ve(),HR(),Uhe=le(Xb)(Bhe||(Bhe=J([`
  --popover-outer-stroke: #e11c1c;
  --popover-inner-stroke: #2c1c1c;
  --popover-bg: #2c1c1c;
  pointer-events: none !important;
`]))),zhe=Uhe}),hOe=W((s,a)=>{var l,d;l=[],d=[];function f(g,b,_){var S,C,I,O,R,A,N,L;if(g===b)return 0;if(S=g.length,C=b.length,S===0)return C;if(C===0)return S;for(_&&(g=g.toLowerCase(),b=b.toLowerCase()),N=0;N<S;)d[N]=g.charCodeAt(N),l[N]=++N;for(L=0;L<C;)for(I=b.charCodeAt(L),O=R=L++,N=-1;++N<S;)A=I===d[N]?R:R+1,R=l[N],l[N]=O=R>O?A>O?O+1:A:A>R?R+1:A;return O}a.exports=f}),pOe=W((s,a)=>{var l=hOe();function d(){var f,g,b,_,S,C=0,I=arguments[0],O=arguments[1],R=O.length,A=arguments[2];A&&(_=A.threshold,S=A.ignoreCase),_===void 0&&(_=0);for(var N=0;N<R;++N)S?g=l(I,O[N],!0):g=l(I,O[N]),g>I.length?f=1-g/O[N].length:f=1-g/I.length,f>C&&(C=f,b=O[N]);return C>=_?b:null}a.exports=d});function fOe(s,a,l="Did you mean ",d="?"){let f=(0,Vhe.default)(s,a,{threshold:.7});return f?l+JSON.stringify(f)+d:""}var Vhe,mOe=P(()=>{Vhe=X(pOe())});function jhe(s,a){return s.length<=a?s:s.substr(0,a-3)+"..."}var gOe=P(()=>{}),Hhe,i6,Ghe=P(()=>{gOe(),Hhe=s=>typeof s=="string"?'string("'.concat(jhe(s,10),'")'):typeof s=="number"?"number(".concat(jhe(String(s),10),")"):s===null?"null":s===void 0?"undefined":typeof s=="boolean"?String(s):Array.isArray(s)?"array":typeof s=="object"?"object":"unknown",i6=Hhe}),Whe,$he,s6,Khe=P(()=>{Ve(),ev(),$he=le(Mq)(Whe||(Whe=J([`
  display: flex;
  height: fit-content;
  backdrop-filter: blur(14px);
  border-radius: 2px;
`]))),s6=$he}),d_,Xhe,qhe,Yhe,h_,_C=P(()=>{Ve(),Dr(),d_=X(Ne()),jE(),rR(),ire(),Khe(),qhe=le.button(Xhe||(Xhe=J([`
  `,`;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  width: 32px;
  height: 32px;
  outline: none;

  color: #a8a8a9;

  background: rgba(40, 43, 47, 0.8);
  backdrop-filter: blur(14px);
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 2px;

  svg {
    display: block;
  }

  &:hover {
    background: rgba(59, 63, 69, 0.8);
  }

  &:active {
    background: rgba(82, 88, 96, 0.8);
  }

  &.selected {
    color: rgba(255, 255, 255, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.7);
  }

  // Don't blur if in a button group, because it already blurs. We need to blur
  // on the group-level, otherwise we get seams.
  `,` > & {
    backdrop-filter: none;
    filter: none;
    border-radius: 0;

    &:first-child {
      border-top-left-radius: 2px;
      border-bottom-left-radius: 2px;
    }

    &:last-child {
      border-bottom-right-radius: 2px;
      border-top-right-radius: 2px;
    }
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),kr,s6),Yhe=d_.default.forwardRef((s,a)=>{var l=s,{title:d}=l,f=z(l,["title"]);let[g,b]=Kb({enabled:typeof d=="string"},()=>d_.default.createElement(iV,null,d));return d_.default.createElement(d_.default.Fragment,null,g,d_.default.createElement(qhe,F({ref:nR([b,a])},f))," ")}),h_=Yhe}),Zhe,Qhe,Jhe,epe,tpe,vOe=P(()=>{Zhe=X(Ne()),_C(),Ve(),Dr(),Jhe=le(h_)(Qhe||(Qhe=J([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),kr),epe=({config:s,testId:a})=>{var l;return Zhe.default.createElement(Jhe,{onClick:s.onClick,"data-testid":a,title:s.title,dangerouslySetInnerHTML:{__html:(l=s.svgSource)!=null?l:""}})},tpe=epe});function yOe({value:s,label:a,icon:l,onClick:d,isSelected:f}){return p_.default.createElement(p_.default.Fragment,null,p_.default.createElement(h_,{forwardedAs:Cq,className:f?"selected":void 0,"aria-label":a,onClick:d,title:a},l))}var p_,npe,rpe,bOe=P(()=>{p_=X(Ne()),ev(),_C(),Khe(),npe=({value:s,onChange:a,options:l})=>p_.default.createElement(s6,null,l.map(({label:d,icon:f,value:g})=>p_.default.createElement(yOe,{key:g,value:g,isSelected:s===g,label:d,icon:f,onClick:()=>a(g)}))),rpe=npe}),o6,ipe,spe,ope,ape,_Oe=P(()=>{o6=X(Ne()),Ve(),Dr(),bOe(),spe=le.div(ipe||(ipe=J([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),kr),ope=({config:s})=>o6.default.createElement(rpe,{onChange:s.onChange,options:s.options.map(({label:a,value:l,svgSource:d})=>({label:a,value:l,icon:o6.default.createElement(spe,{dangerouslySetInnerHTML:{__html:d}})})),value:s.value}),ape=ope}),wC,lpe,upe,cpe,dpe,wOe=P(()=>{wC=X(Ne()),Ve(),Dr(),_C(),mee(),Yc(),upe=le.div(lpe||(lpe=J([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),kr),cpe=({config:s})=>{let a=(0,wC.useRef)(null),l=qc(()=>{let d=a.current.getBoundingClientRect();return{debugName:"ExtensionFlyoutMenu:"+s.label,constraints:{maxX:d.right,maxY:8,minX:d.left,minY:8},verticalGap:2}},()=>wC.default.createElement(Dz,{items:s.items.map((d,f)=>({label:d.label,callback:()=>{var g;try{(g=d.onClick)==null||g.call(d)}catch(b){console.error(b)}}})),onRequestClose:()=>{l.close("clicked")}}));return wC.default.createElement(upe,null,l.node,wC.default.createElement(h_,{ref:a,onClick:d=>{l.open(d,a.current)}},s.label))},dpe=cpe});function xOe(s){return a6[s]}var xC,hpe,a6,ppe,fpe,SOe=P(()=>{mOe(),Ghe(),xC=X(Ne()),vOe(),_Oe(),wOe(),hpe=s=>xC.default.createElement(xC.default.Fragment,null,s.config.map((a,l)=>xC.default.createElement(ppe,{config:a,key:l}))),a6={Icon:tpe,Switch:ape,Flyout:dpe},ppe=({config:s})=>{let a=xOe(s.type);if(!a)throw new Error("No tool with tool.type ".concat(i6(s.type)," exists. Did you mean ").concat(fOe(s.type,Object.keys(a6))));return xC.default.createElement(a,{config:s})},fpe=hpe}),mpe,fd,gpe,vpe,ype,l6,bpe,_pe,u6,wpe=P(()=>{mpe=Nt,Sn(),Te(),fd=X(Ne()),Ve(),SOe(),vpe=le.div(gpe||(gpe=J([`
  height: 36px;
  /* pointer-events: none; */

  display: flex;
  gap: 0.5rem;
  justify-content: center;
`]))),l6=le.div(ype||(ype=J([`
  position: abolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),bpe=({extension:s,toolbarId:a})=>{var l;let d=(0,fd.useMemo)(()=>new mpe.Atom([]),[]),f=(l=s.toolbars)==null?void 0:l[a];(0,fd.useLayoutEffect)(()=>{let b=f==null?void 0:f(d.set.bind(d),ue().publicApi);if(typeof b=="function")return b},[s,a,f]);let g=rr(d.prism);return fd.default.createElement(fpe,{config:g})},_pe=({toolbarId:s,showLeftDivider:a})=>{var l;let d=[],f=rr(ue().atomP.ephemeral.extensions.byId),g=!1;for(let[,b]of Object.entries(f))!b||!((l=b.toolbars)!=null&&l[s])||(d.push(fd.default.createElement(fd.default.Fragment,{key:"extensionToolbar-"+b.id},g?fd.default.createElement(l6,null):void 0,fd.default.createElement(bpe,{extension:b,toolbarId:s}))),g=!0);return d.length===0?null:fd.default.createElement(vpe,{"data-testid":"theatre-extensionToolbar-".concat(s)},a?fd.default.createElement(l6,null):void 0,d)},u6=_pe}),SC,xpe,Spe,Epe,uO,EOe=P(()=>{Ve(),SC=X(Ne()),_C(),Spe=le(h_)(xpe||(xpe=J([`
  color: `,`;

  border-bottom: 1px solid
    `,`;
`])),({pinned:s})=>s?"rgba(255, 255, 255, 0.8)":"#A8A8A9",({pinned:s})=>s?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.08)"),Epe=(0,SC.forwardRef)((s,a)=>{var l=s,{children:d,hint:f,pinned:g,icon:b,pinHintIcon:_,unpinHintIcon:S}=l,C=z(l,["children","hint","pinned","icon","pinHintIcon","unpinHintIcon"]);let[I,O]=(0,SC.useState)(!1),R=I||f;return SC.default.createElement(Spe,B(F({},C),{pinned:g,ref:a,onMouseOver:()=>O(!0),onMouseOut:()=>O(!1)}),SC.default.createElement("div",{style:{pointerEvents:"none",width:"fit-content",height:"fit-content",inset:0}},R&&!g?_:R&&g?S:b),d)}),uO=Epe});function COe(s){return c6.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),c6.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.732 4.048l-.792-.792L7.2 8l4.74 4.744.792-.792L8.781 8l3.951-3.952zm-3.932 0l-.792-.792L3.268 8l4.74 4.744.792-.792L4.848 8 8.8 4.048z",fill:"currentColor"}))}var c6,d6,POe=P(()=>{c6=X(Ne()),d6=COe});function TOe(s){return h6.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),h6.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.694 3.765l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.951-3.951-3.951-3.952zm3.932 0l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.952-3.951-3.952-3.952z",fill:"currentColor"}))}var h6,p6,MOe=P(()=>{h6=X(Ne()),p6=TOe}),Ps,Cpe,Ppe,Tpe,f6,Mpe,Nf,kpe,Ape,Ipe,Rpe,Dpe,Ope,Lpe,Npe,Fpe,cO,Bpe,Upe,m6,g6,zpe,Vpe,kOe=P(()=>{Sn(),Te(),Ps=X(Ne()),Ve(),Ppe=le.div(Cpe||(Cpe=J([`
  width: 138px;
  border-radius: 2px;
  background-color: rgba(42, 45, 50, 0.9);
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.25), 0px 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  pointer-events: auto;
  // makes the edges of the item highlights match the rounded corners
  overflow: hidden;

  @supports not (backdrop-filter: blur()) {
    background-color: rgba(42, 45, 50, 0.98);
  }

  color: rgba(255, 255, 255, 0.9);

  & a {
    // Fix colors of links to not be default
    color: inherit;
  }
`]))),f6=le.div(Tpe||(Tpe=J([`
  position: relative;
  padding: 0px 12px;
  font-weight: 400;
  font-size: 11px;
  height: 32px;
  text-decoration: none;
  user-select: none;
  display: flex;
  flex-direction: row;
  align-items: center;
  cursor: default;
`]))),Nf=le(f6)(Mpe||(Mpe=J([`
  &:before {
    position: absolute;
    display: block;
    content: ' ';
    inset: 3px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.1);
    opacity: 0;
  }

  &.secondary {
    color: rgba(255, 255, 255, 0.5);
  }

  &:hover {
    /* background-color: #398995; */
    color: white !important;
    &:before {
      opacity: 1;
    }
  }
`]))),Ape=le(f6)(kpe||(kpe=J([`
  height: auto;
  min-height: 32px;
  padding-top: 12px;
  padding-bottom: 10px;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  gap: 8px;
  color: rgba(255, 255, 255, 0.5);
`]))),Rpe=le.div(Ipe||(Ipe=J([`
  font-weight: 600;
`]))),Ope=le.div(Dpe||(Dpe=J([`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`]))),Npe=le.div(Lpe||(Lpe=J([`
  margin-left: 2px;
`]))),cO=le.div(Fpe||(Fpe=J([`
  height: 1px;
  margin: 0 2px;
  background: rgba(255, 255, 255, 0.02);
`]))),Upe=le.div(Bpe||(Bpe=J([`
  position: absolute;
  width: 8px;
  height: 8px;
  background: #40aaa4;
  right: 14px;
  top: 12px;
  border-radius: 50%;
`]))),m6="0.7.0",g6=m6.match(/^[^\-]+/)[0],zpe=Ps.default.forwardRef((s,a)=>{let l=rr(ue().atomP.ahistoric.updateChecker.result.hasUpdates);return Ps.default.createElement(Ppe,{ref:a},Ps.default.createElement(Nf,{as:"a",href:"https://www.theatrejs.com/docs/latest",className:"",target:"_blank"},"Docs"),Ps.default.createElement(Nf,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases",className:"",target:"_blank"},"Changelog"),Ps.default.createElement(cO,null),Ps.default.createElement(Nf,{as:"a",href:"https://github.com/theatre-js/theatre",className:"",target:"_blank"},"Github"),Ps.default.createElement(Nf,{as:"a",href:"https://twitter.com/theatre_js",className:"",target:"_blank"},"Twitter"),Ps.default.createElement(Nf,{className:"",as:"a",href:"https://discord.gg/bm9f8F9Y9N",target:"_blank"},"Discord"),Ps.default.createElement(cO,null),Ps.default.createElement(Ape,null,Ps.default.createElement(Rpe,null,"Version"),Ps.default.createElement(Ope,null,Ps.default.createElement(Npe,null,m6," ",l===!0?"(outdated)":l===!1?"(latest)":""))),l===!0&&Ps.default.createElement(Ps.default.Fragment,null,Ps.default.createElement(cO,null),Ps.default.createElement(Nf,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases".concat(encodeURIComponent(g6)),className:"",target:"_blank"},"Update",Ps.default.createElement(Upe,null)),Ps.default.createElement(Nf,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases#".concat(encodeURIComponent(g6)),className:"",target:"_blank"},"What's new?")))}),Vpe=zpe}),ei,jpe,Hpe,Gpe,Wpe,$pe,Kpe,v6,Xpe,y6,qpe,b6,Ype,Zpe,AOe=P(()=>{Sn(),Te(),ei=X(Ne()),Ve(),jE(),dOe(),HR(),jpe=Nt,wpe(),EOe(),hE(),POe(),MOe(),_C(),Yc(),kOe(),ZE(),Gpe=le.div(Hpe||(Hpe=J([`
  height: 36px;
  pointer-events: none;

  display: flex;
  justify-content: space-between;
  padding: 12px;
`]))),$pe=le.div(Wpe||(Wpe=J([`
  color: white;
  width: 14px;
  height: 14px;
  background: #d00;
  border-radius: 4px;
  text-align: center;
  line-height: 14px;
  font-weight: 600;
  font-size: 8px;
  position: relative;
  left: -6px;
  top: -11px;
  margin-right: -14px;
  box-shadow: 0 4px 6px -4px #00000059;
`]))),v6=le.div(Kpe||(Kpe=J([`
  display: flex;
  gap: 8px;
`]))),y6=le.div(Xpe||(Xpe=J([`
  position: absolute;
  background: `,`;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  right: -2px;
  top: -2px;
`])),({type:s})=>s==="info"?"#40aaa4":"#f59e0b"),le.div(qpe||(qpe=J([`
  position: absolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),b6=!1,Ype=()=>{var s,a,l;let d=Yn(()=>{let L=(0,jpe.val)(ue().atomP.ephemeral.coreByProject);return Object.entries(L).map(([V,G])=>({projectId:V,state:G})).filter(({state:V})=>V.loadingState.type==="browserStateIsNotBasedOnDiskState")},[]),[f,g]=Kb({enabled:d.length>0,enterDelay:d.length>0?0:200},()=>d.length>0?ei.default.createElement(zhe,null,d.length===1?'There is a state conflict in project "'.concat(d[0].projectId,'". Select the project in the outline below in order to fix it.'):"There are ".concat(d.length," projects that have state conflicts. They are highlighted in the outline below. ")):ei.default.createElement(Xb,null,ei.default.createElement(ei.default.Fragment,null,"Outline"))),b=(s=rr(ue().atomP.ahistoric.pinOutline))!=null?s:!0,_=(a=rr(ue().atomP.ahistoric.pinDetails))!=null?a:!0,S=rr(ue().atomP.ahistoric.updateChecker.result.hasUpdates)===!0,C=qc(()=>{let L=I.current.getBoundingClientRect();return{debugName:"More Menu",constraints:{maxX:L.right,maxY:8,minX:L.left-140,minY:8},verticalGap:2}},()=>ei.default.createElement(Vpe,null)),I=(0,ei.useRef)(null),O=(0,ei.useMemo)(()=>(window.__IS_VISUAL_REGRESSION_TESTING&&(b6||(b6=!0,console.warn("Visual regression testing enabled, so we're showing the updates badge unconditionally"))),S||window.__IS_VISUAL_REGRESSION_TESTING?!0:S),[S]),{hasNotifications:R}=aV(),[A,N]=Pre();return ei.default.createElement(Gpe,null,ei.default.createElement(v6,null,f,ei.default.createElement(uO,{ref:g,"data-testid":"OutlinePanel-TriggerButton",onClick:()=>{ue().transaction(({stateEditors:L,drafts:V})=>{var G;L.studio.ahistoric.setPinOutline(!((G=V.ahistoric.pinOutline)==null||G))})},icon:ei.default.createElement(P4,null),pinHintIcon:ei.default.createElement(p6,null),unpinHintIcon:ei.default.createElement(d6,null),pinned:b}),d.length>0?ei.default.createElement($pe,null,d.length):null,ei.default.createElement(u6,{showLeftDivider:!0,toolbarId:"global"})),ei.default.createElement(v6,null,A,ei.default.createElement(uO,{ref:N,onClick:()=>{ue().transaction(({stateEditors:L,drafts:V})=>{var G;L.studio.ahistoric.setPinNotifications(!((G=V.ahistoric.pinNotifications)!=null&&G))})},icon:ei.default.createElement(ZI,null),pinHintIcon:ei.default.createElement(ZI,null),unpinHintIcon:ei.default.createElement(ZI,null),pinned:(l=rr(ue().atomP.ahistoric.pinNotifications))!=null?l:!1},R&&ei.default.createElement(y6,{type:"warning"})),C.node,ei.default.createElement(h_,{ref:I,onClick:L=>{C.toggle(L,I.current)}},ei.default.createElement(Wq,null),O&&ei.default.createElement(y6,{type:"info"})),ei.default.createElement(uO,{ref:g,onClick:()=>{ue().transaction(({stateEditors:L,drafts:V})=>{var G;L.studio.ahistoric.setPinDetails(!((G=V.ahistoric.pinDetails)==null||G))})},icon:ei.default.createElement(Gq,null),pinHintIcon:ei.default.createElement(d6,null),unpinHintIcon:ei.default.createElement(p6,null),pinned:_})))},Zpe=Ype}),Qpe,EC,Jpe,CC,efe,tfe,nfe,rfe,ife=P(()=>{Qpe=Nt,Sn(),EC=X(Ne()),Jpe=X(Lu()),CC=new Qpe.Atom({set:{},byId:{}}),efe=1,tfe=()=>{let s=efe++;function a(d,f,g){CC.reduce(b=>({byId:B(F({},b.byId),{[s]:{comp:d,props:f,portalNode:g}}),set:B(F({},b.set),{[s]:!0})}))}function l(){CC.reduce(d=>{let f=F({},d.set),g=F({},d.byId);return delete f[s],{byId:g,set:f}})}return{mountOrRender:a,unmount:l}},nfe=()=>{let s=Object.keys(rr(CC.pointer.set));return EC.default.createElement(EC.default.Fragment,null,s.map(a=>EC.default.createElement(rfe,{key:"id-"+a,id:a})))},rfe=({id:s})=>{let{comp:a,portalNode:l,props:d}=rr(CC.pointer.byId[s]);return(0,Jpe.createPortal)(EC.default.createElement(a,F({},d)),l)}});function IOe(s){let a=ue(),[l,d]=wr(void 0),f=Que();f.configureLogging({min:128,dev:w6,internal:w6});let g=f.getLogger().named("Theatre.js UIRoot");JDe();let b=rr(a.atomP.ahistoric.visibilityState);return(0,yo.useEffect)(()=>(b==="everythingIsHidden"&&console.warn("Theatre.js Studio is hidden. Use the keyboard shortcut 'alt + \\' to restore the studio, or call studio.ui.restore()."),()=>{}),[b]),Yn(()=>{let _=(0,_6.val)(a.atomP.ahistoric.visibilityState);return(0,_6.val)(a.atomP.ephemeral.initialised)?yo.default.createElement(lZ,{logger:g},yo.default.createElement(cne,null,yo.default.createElement(vAe,null,yo.default.createElement(cfe,null),yo.default.createElement(kb.Provider,{value:d},yo.default.createElement(S4,{target:window.__IS_VISUAL_REGRESSION_TESTING===!0?void 0:s.containerShadow},yo.default.createElement(yo.default.Fragment,null,yo.default.createElement(ofe,null),yo.default.createElement(lfe,{className:_==="everythingIsHidden"?"invisible":""},yo.default.createElement(x4,{ref:l}),yo.default.createElement(Zpe,null),yo.default.createElement(Fhe,null),yo.default.createElement(Tre,null)))))))):null},[a,l,d])}var _6,yo,sfe,ofe,afe,lfe,ufe,w6,cfe,ROe=P(()=>{Te(),Sn(),_6=Nt,yo=X(Ne()),Ve(),cOe(),AOe(),Rr(),ev(),e6(),ll(),dne(),X4(),ife(),Dr(),YD(),mf(),ZE(),ofe=typeof window<"u"?jl(sfe||(sfe=J([`
  :host {
    contain: strict;
  }
`]))):{},lfe=le(aZ)(afe||(afe=J([`
  z-index: 50;
  position: fixed;
  inset: 0;

  &.invisible {
    pointer-events: none !important;
    opacity: 0;
    transform: translateX(1000000px);
  }
`]))),w6=/Playground.+Theatre\.js/.test((ufe=typeof document<"u"?document==null?void 0:document.title:null)!=null?ufe:""),cfe=()=>yo.default.createElement(nfe,null)}),DOe=W(s=>{var a=Lu();s.createRoot=a.createRoot,s.hydrateRoot=a.hydrateRoot}),dfe={};Z(dfe,{default:()=>ffe});var hfe,pfe,ffe,OOe=P(()=>{ROe(),hfe=X(Ne()),pfe=X(DOe()),ife(),Dr(),wpe(),ffe=class{constructor(){pe(this,"containerEl",document.createElement("div")),pe(this,"_renderTimeout"),pe(this,"_documentBodyUIIsRenderedIn"),pe(this,"containerShadow"),this.containerEl.id="theatrejs-studio-root",this.containerEl.style.cssText=`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      z-index: 100;
    `;let s=()=>{if(window.__IS_VISUAL_REGRESSION_TESTING===!0){let a=document.createElement("div");return a.id="theatrejs-faux-shadow-root",document.body.appendChild(a),a}else return this.containerEl.attachShadow({mode:"open"})};this.containerShadow=s()}render(){let s=()=>{if(!document.body){this._renderTimeout=setTimeout(s,5);return}this._renderTimeout=void 0,this._documentBodyUIIsRenderedIn=document.body,this._documentBodyUIIsRenderedIn.appendChild(this.containerEl),pfe.default.createRoot(this.containerShadow).render(hfe.default.createElement(IOe,{containerShadow:this.containerShadow}))};this._renderTimeout=setTimeout(s,10)}renderToolset(s,a){let l=tfe();return l.mountOrRender(Uke(u6),{toolbarId:s},a),l.unmount}}}),LOe=W(s=>{s.compare=f,s.reduce=g;var a,l,d;s.REMOVE=a=-1,s.ADD=l=1,s.EQUAL=d=0;function f(I,O){var R=I.length,A=O.length,N=b(I,O),L=N<R&&N<A?_(I,O):0,V=L+N-1;R-=V,A-=V;for(var G=C(R,A),$=R-1;$>=0;--$)for(var Y=A-1;Y>=0;--Y)G[Y][$]=S(G,I,O,N,$,Y);return{prefix:N,matrix:G,suffix:L}}function g(I,O,R){var A,N,L,V,G=R.matrix,$=R.prefix;for(A=0;A<$;++A)O=I(O,d,A,A);for(L=A,$=G.length,A=0,N=0;A<$;)switch(V=G[A][N].type,O=I(O,V,A+L,N+L),V){case d:++A,++N;break;case a:++N;break;case l:++A;break}for(A+=L,N+=L,$=R.suffix,L=0;L<$;++L)O=I(O,d,A+L,N+L);return O}function b(I,O){for(var R=0,A=Math.min(I.length,O.length);R<A&&I[R]===O[R];)++R;return R}function _(I,O){for(var R=I.length-1,A=O.length-1,N=Math.min(R,A),L=0;L<N&&I[R-L]===O[A-L];)++L;return L}function S(I,O,R,A,N,L){return O[N+A]===R[L+A]?{value:I[L+1][N+1].value,type:d}:I[L][N+1].value<I[L+1][N].value?{value:I[L][N+1].value+1,type:a}:{value:I[L+1][N].value+1,type:l}}function C(I,O){var R=[],A,N,L;for(L=R[O]=[],N=0;N<I;++N)L[N]={value:I-N,type:a};for(A=0;A<O;++A)R[A]=[],R[A][I]={value:O-A,type:l};return R[O][I]={value:0,type:d},R}}),mfe=W(s=>{s.cons=a,s.tail=l,s.map=d;function a(f,g){var b=g.length,_=new Array(b+1);_[0]=f;for(var S=0;S<b;++S)_[S+1]=g[S];return _}function l(f){for(var g=f.length-1,b=new Array(g),_=0;_<g;++_)b[_]=f[_+1];return b}function d(f,g){for(var b=new Array(g.length),_=0;_<g.length;++_)b[_]=f(g[_]);return b}}),NOe=W((s,a)=>{a.exports=b;var l=/\/|~1|~0/g,d="/",f="~",g="~1";function b(_,S){var C,I,O,R;for(C=_.charAt(0)===d?1:0,I="",l.lastIndex=C;O=l.exec(_);)if(R=O[0],I+=_.slice(C,l.lastIndex-R.length),C=l.lastIndex,R===d){if(S(I)===!1)return _;I=""}else I+=R===g?d:f;return I+=_.slice(C),S(I),_}}),x6=W(s=>{var a=NOe();s.find=I,s.join=R,s.absolute=O,s.parse=A,s.contains=N,s.encodeSegment=V,s.decodeSegment=L,s.parseArrayIndex=Y,s.isValidArrayIndex=$;var l="/",d=/\//g,f="~1",g=/~1/g,b="~",_=/~/g,S="~0",C=/~0/g;function I(re,ce,Pe,ye){if(typeof ce=="string"){if(ce==="")return{target:re,key:void 0};if(ce===l)return{target:re,key:""};var we=re,Le,it=ye!==void 0;return a(ce,function(de){if(re==null)return we=null,!1;Array.isArray(re)?Le=it?ie(Pe,Y(de),re,ye):de==="-"?de:Y(de):Le=de,we=re,re=re[Le]}),we===null?void 0:{target:we,key:Le}}}function O(re){return re[0]===l?re:l+re}function R(re){return re.join(l)}function A(re){var ce=[];return a(re,ce.push.bind(ce)),ce}function N(re,ce){return ce.indexOf(re)===0&&ce[re.length]===l}function L(re){return re.replace(g,l).replace(C,b)}function V(re){return re.replace(_,S).replace(d,f)}var G=/^(0|[1-9]\d*)$/;function $(re){return G.test(re)}function Y(re){if($(re))return+re;throw new SyntaxError("invalid array index "+re)}function ie(re,ce,Pe,ye){var we=ce;if(we<0)throw new Error("array index out of bounds "+we);if(ye!==void 0&&typeof re=="function"&&(we=re(ce,Pe,ye),we<0))throw new Error("could not find patch context "+ye);return we}}),gfe=W((s,a)=>{a.exports=l;function l(g){return g==null||typeof g!="object"?g:Array.isArray(g)?d(g):f(g)}function d(g){for(var b=g.length,_=new Array(b),S=0;S<b;++S)_[S]=l(g[S]);return _}function f(g){for(var b=Object.keys(g),_={},S,C=0,I=b.length;C<I;++C)S=b[C],_[S]=l(g[S]);return _}}),FOe=W((s,a)=>{a.exports=l;function l(g,b){return g===b?!0:Array.isArray(g)&&Array.isArray(b)?d(g,b):typeof g=="object"&&typeof b=="object"?f(g,b):!1}function d(g,b){if(g.length!==b.length)return!1;for(var _=0;_<g.length;++_)if(!l(g[_],b[_]))return!1;return!0}function f(g,b){if(g===null&&b!==null||g!==null&&b===null)return!1;var _=Object.keys(g),S=Object.keys(b);if(_.length!==S.length)return!1;for(var C=0,I;C<_.length;++C)if(I=_[C],!(I in b&&l(g[I],b[I])))return!1;return!0}}),BOe=W((s,a)=>{var l=x6();a.exports=function(I,O){var R=l.parse(I.path),A=l.parse(O.path),N=S(R,A),L=g(R,A,N.length),V=C(I),G=C(O);return N.length===0&&!L?[G,V]:L?f(V,R,G,A):d(V,R,G)};function d(I,O,R,A){if(I.path===R.path)throw new TypeError("cannot commute "+I.op+","+R.op+" with identical object paths");return[R,I]}function f(I,O,R,A){return O.length===A.length?b(I,O,R,A):(O.length>A.length?(O=_(R,A,I,O,-1),I.path=l.absolute(l.join(O))):(A=_(I,O,R,A,1),R.path=l.absolute(l.join(A))),[R,I])}function g(I,O,R){return l.isValidArrayIndex(I[R])&&l.isValidArrayIndex(O[R])}function b(I,O,R,A){var N=O.length-1,L=+O[N],V=+A[N],G;return L<V?I.op==="add"||I.op==="copy"?(G=A.slice(),G[N]=Math.max(0,V-1),R.path=l.absolute(l.join(G))):I.op==="remove"&&(G=A.slice(),G[N]=V+1,R.path=l.absolute(l.join(G))):R.op==="add"||R.op==="copy"?(G=O.slice(),G[N]=L+1,I.path=l.absolute(l.join(G))):L>V&&R.op==="remove"&&(G=O.slice(),G[N]=Math.max(0,L-1),I.path=l.absolute(l.join(G))),[R,I]}function _(I,O,R,A,N){var L=O.length-1,V=+O[L],G=+A[L],$=A.slice();return V>G||(I.op==="add"||I.op==="copy"?$[L]=Math.max(0,G-N):I.op==="remove"&&($[L]=Math.max(0,G+N))),$}function S(I,O){var R=I.length,A=O.length;if(R===0||A===0||R<2&&A<2)return[];for(var N=R===A?R-1:Math.min(R,A),L=0;L<N&&I[L]===O[L];)++L;return I.slice(0,L)}function C(I){return I.op==="remove"?{op:I.op,path:I.path}:I.op==="copy"||I.op==="move"?{op:I.op,path:I.path,from:I.from}:{op:I.op,path:I.path,value:I.value}}}),vfe=W((s,a)=>{a.exports=l;function l(d){Error.call(this),this.name=this.constructor.name,this.message=d,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l}),S6=W((s,a)=>{a.exports=l;function l(d){Error.call(this),this.name=this.constructor.name,this.message=d,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l}),yfe=W((s,a)=>{a.exports=l;function l(d){Error.call(this),this.name=this.constructor.name,this.message=d,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l}),bfe=W(s=>{var a=x6(),l=gfe(),d=FOe(),f=BOe(),g=mfe(),b=vfe(),_=S6(),S=yfe(),C=a.find,I=a.parseArrayIndex;s.test={apply:O,inverse:R,commute:A},s.add={apply:N,inverse:V,commute:G},s.remove={apply:re,inverse:Pe,commute:ye},s.replace={apply:$,inverse:Y,commute:ie},s.move={apply:we,inverse:Le,commute:it},s.copy={apply:de,inverse:Oe,commute:G};function O(Ie,Re,Ge){var St=C(Ie,Re.path,Ge.findContext,Re.context),he=St.target,ge,et;if(Array.isArray(he)?(ge=I(St.key),et=he[ge]):et=St.key===void 0?St.target:St.target[St.key],!d(et,Re.value))throw new b("test failed "+JSON.stringify(Re));return Ie}function R(Ie,Re){return Ie.push(Re),1}function A(Ie,Re){if(Ie.path===Re.path&&Re.op==="remove")throw new TypeError("Can't commute test,remove -> remove,test for same path");return Re.op==="test"||Re.op==="replace"?[Re,Ie]:f(Ie,Re)}function N(Ie,Re,Ge){var St=C(Ie,Re.path,Ge.findContext,Re.context);if(Q(St))throw new _("path does not exist "+Re.path);if(Re.value===void 0)throw new _("missing value");var he=l(Re.value);return St.key===void 0?he:(L(St,he),Ie)}function L(Ie,Re){var Ge=Ie.target;if(Array.isArray(Ge))if(Ie.key==="-")Ge.push(Re);else{if(Ie.key>Ge.length)throw new _("target of add outside of array bounds");Ge.splice(Ie.key,0,Re)}else if(Rt(Ge))Ge[Ie.key]=Re;else throw new _("target of add must be an object or array "+Ie.key)}function V(Ie,Re){var Ge=Re.context;return Ge!==void 0&&(Ge={before:Ge.before,after:g.cons(Re.value,Ge.after)}),Ie.push({op:"test",path:Re.path,value:Re.value,context:Ge}),Ie.push({op:"remove",path:Re.path,context:Ge}),1}function G(Ie,Re){if(Ie.path===Re.path&&Re.op==="remove")throw new TypeError("Can't commute add,remove -> remove,add for same path");return f(Ie,Re)}function $(Ie,Re,Ge){var St=C(Ie,Re.path,Ge.findContext,Re.context);if(Q(St)||je(St))throw new _("path does not exist "+Re.path);if(Re.value===void 0)throw new _("missing value");var he=l(Re.value);if(St.key===void 0)return he;var ge=St.target;return Array.isArray(ge)?ge[I(St.key)]=he:ge[St.key]=he,Ie}function Y(Ie,Re,Ge,St){var he=St[Ge-1];if(he===void 0||he.op!=="test"||he.path!==Re.path)throw new S("cannot invert replace w/o test");var ge=he.context;return ge!==void 0&&(ge={before:ge.before,after:g.cons(he.value,g.tail(ge.after))}),Ie.push({op:"test",path:he.path,value:Re.value}),Ie.push({op:"replace",path:he.path,value:he.value}),2}function ie(Ie,Re){if(Ie.path===Re.path&&Re.op==="remove")throw new TypeError("Can't commute replace,remove -> remove,replace for same path");return Re.op==="test"||Re.op==="replace"?[Re,Ie]:f(Ie,Re)}function re(Ie,Re,Ge){var St=C(Ie,Re.path,Ge.findContext,Re.context);if(Q(St)||St.target[St.key]===void 0)throw new _("path does not exist "+Re.path);return ce(St),Ie}function ce(Ie){var Re=Ie.target,Ge;if(Array.isArray(Re))return Ge=Re.splice(I(Ie.key),1),Ge[0];if(Rt(Re))return Ge=Re[Ie.key],delete Re[Ie.key],Ge;throw new _("target of remove must be an object or array")}function Pe(Ie,Re,Ge,St){var he=St[Ge-1];if(he===void 0||he.op!=="test"||he.path!==Re.path)throw new S("cannot invert remove w/o test");var ge=he.context;return ge!==void 0&&(ge={before:ge.before,after:g.tail(ge.after)}),Ie.push({op:"add",path:he.path,value:he.value,context:ge}),2}function ye(Ie,Re){return Ie.path===Re.path&&Re.op==="remove"?[Re,Ie]:f(Ie,Re)}function we(Ie,Re,Ge){if(a.contains(Re.path,Re.from))throw new _("move.from cannot be ancestor of move.path");var St=C(Ie,Re.path,Ge.findContext,Re.context),he=C(Ie,Re.from,Ge.findContext,Re.fromContext);return L(St,ce(he)),Ie}function Le(Ie,Re){return Ie.push({op:"move",path:Re.from,context:Re.fromContext,from:Re.path,fromContext:Re.context}),1}function it(Ie,Re){if(Ie.path===Re.path&&Re.op==="remove")throw new TypeError("Can't commute move,remove -> move,replace for same path");return f(Ie,Re)}function de(Ie,Re,Ge){var St=C(Ie,Re.path,Ge.findContext,Re.context),he=C(Ie,Re.from,Ge.findContext,Re.fromContext);if(Q(he)||je(he))throw new _("copy.from must exist");var ge=he.target,et;return Array.isArray(ge)?et=ge[I(he.key)]:et=ge[he.key],L(St,l(et)),Ie}function Oe(Ie,Re){throw new S("cannot invert "+Re.op)}function Q(Ie){return Ie===void 0||Ie.target==null&&Ie.key!==void 0}function je(Ie){return Ie.key!==void 0&&Ie.target[Ie.key]===void 0}function Rt(Ie){return Ie!==null&&typeof Ie=="object"}}),UOe=W(s=>{var a=bfe(),l=gfe(),d=S6();s.apply=g,s.applyInPlace=b,s.clone=l,s.isValidObject=S,s.defaultHash=_;var f={};function g(I,O,R){return b(I,l(O),R)}function b(I,O,R){if(R||(R=f),!Array.isArray(I))return O;for(var A,N,L=0;L<I.length;++L){if(N=I[L],A=a[N.op],A===void 0)throw new d("invalid op "+JSON.stringify(N));O=A.apply(O,N,R)}return O}function _(I){return S(I)||C(I)?JSON.stringify(I):I}function S(I){return I!==null&&Object.prototype.toString.call(I)==="[object Object]"}function C(I){return Object.prototype.toString.call(I)==="[object Array]"}}),zOe=W((s,a)=>{var l=bfe();a.exports=function(f){var g=[],b,_;for(b=f.length-1;b>=0;b-=_)_=d(g,f[b],b,f);return g};function d(f,g,b,_){var S=l[g.op];return S!==void 0&&typeof S.inverse=="function"?S.inverse(f,g,b,_):1}}),VOe=W(s=>{var a=LOe(),l=mfe(),d=UOe(),f=zOe(),g=x6(),b=g.encodeSegment;s.diff=C,s.patch=d.apply,s.patchInPlace=d.applyInPlace,s.inverse=f,s.clone=d.clone,s.InvalidPatchOperationError=S6(),s.TestFailedError=vfe(),s.PatchNotInvertibleError=yfe();var _=d.isValidObject,S=d.defaultHash;function C(Y,ie,re){return O(Y,ie,"",I(re,[])).patch}function I(Y,ie){return typeof Y=="object"?{patch:ie,hash:V($,Y.hash,S),makeContext:V($,Y.makeContext,G),invertible:Y.invertible!==!1}:{patch:ie,hash:V($,Y,S),makeContext:G,invertible:!0}}function O(Y,ie,re,ce){return Array.isArray(Y)&&Array.isArray(ie)?A(Y,ie,re,ce):_(Y)&&_(ie)?R(Y,ie,re,ce):L(Y,ie,re,ce)}function R(Y,ie,re,ce){var Pe=Object.keys(ie),ye=ce.patch,we,Le;for(we=Pe.length-1;we>=0;--we){Le=Pe[we];var it=re+"/"+b(Le);Y[Le]!==void 0?O(Y[Le],ie[Le],it,ce):ye.push({op:"add",path:it,value:ie[Le]})}for(Pe=Object.keys(Y),we=Pe.length-1;we>=0;--we)if(Le=Pe[we],ie[Le]===void 0){var de=re+"/"+b(Le);ce.invertible&&ye.push({op:"test",path:de,value:Y[Le]}),ye.push({op:"remove",path:de})}return ce}function A(Y,ie,re,ce){var Pe=l.map(ce.hash,Y),ye=l.map(ce.hash,ie),we=a.compare(Pe,ye);return N(Y,ie,re,ce,we)}function N(Y,ie,re,ce,Pe){var ye=0;return a.reduce(function(we,Le,it,de){var Oe,Q,je=we.patch,Rt=re+"/"+(de+ye);return Le===a.REMOVE?(Oe=je[je.length-1],Q=we.makeContext(de,Y),we.invertible&&je.push({op:"test",path:Rt,value:Y[de],context:Q}),Oe!==void 0&&Oe.op==="add"&&Oe.path===Rt?(Oe.op="replace",Oe.context=Q):je.push({op:"remove",path:Rt,context:Q}),ye-=1):Le===a.ADD?(je.push({op:"add",path:Rt,value:ie[it],context:we.makeContext(de,Y)}),ye+=1):O(Y[de],ie[it],Rt,we),we},ce,Pe)}function L(Y,ie,re,ce){return Y!==ie&&(ce.invertible&&ce.patch.push({op:"test",path:re,value:Y}),ce.patch.push({op:"replace",path:re,value:ie})),ce}function V(Y,ie,re){return Y(ie)?ie:re}function G(){}function $(Y){return typeof Y=="function"}}),Ov=W((s,a)=>{function l(d,f){for(var g=0,b=f.length-1;g<b;g++){if(!d[f[g]])return null;d=d[f[g]]}return d}a.exports=l}),Ff=W((s,a)=>{function l(f){return f==="~0"?"~":"/"}function d(f){var g=f.split("/");if(f.indexOf("~")===-1)return g;for(var b=0,_=g.length;b<_;b++)g[b].indexOf("~")!==-1&&(g[b]=g[b].replace(/~[01]/g,l));return g}a.exports=d}),jOe=W((s,a)=>{var l=Ov(),d=Ff();function f(g,b){var _=d(b),S=_[_.length-1],C=l(g,_);return C?C[S]:void 0}a.exports=f}),dO=W((s,a)=>{function l(d,f){if(d===f)return!0;if(!(d&&f)||typeof d!="object"||typeof f!="object"||d.length!==f.length)return!1;if(Array.isArray(d)){if(!Array.isArray(f))return!1;for(var g=0,b=d.length;g<b;g++)if(!l(d[g],f[g]))return!1;return!0}var _=Object.keys(d);if(_.length!==Object.keys(f).length)return!1;for(var S=0,C=_.length;S<C;S++){var I=_[S];if(!l(d[I],f[I]))return!1}return!0}a.exports=l}),hO=W((s,a)=>{function l(d,f){if(f==="-")return d.length;for(var g=0,b=f.length;g<b;g++){var _=f.charCodeAt(g);if(57<_||_<48)return 1/0}return+f}a.exports=l}),pO=W((s,a)=>{var l=dO(),d=Ov(),f=hO(),g=Ff();function b(_,S,C,I){if(typeof C>"u")return"[op:add] require value, but got undefined";var O=g(S),R=O[O.length-1],A=d(_,O);if(A===null)return"[op:add] path not found: "+S;if(Array.isArray(A)){var N=f(A,R);if(A.length<N)return"[op:add] invalid array index: "+S;I(_,O).splice(N,0,C)}else l(A[R],C)||(I(_,O)[R]=C)}a.exports=b}),_fe=W((s,a)=>{var l=Ov(),d=hO(),f=Ff();function g(b,_,S){var C=f(_),I=C[C.length-1],O=l(b,C);if(O===null)return"[op:remove] path not found: "+_;if(Array.isArray(O)){var R=d(O,I);if(O.length<=R)return"[op:remove] invalid array index: "+_;S(b,C).splice(R,1)}else delete S(b,C)[I]}a.exports=g}),wfe=W((s,a)=>{var l=dO(),d=Ov(),f=hO(),g=Ff();function b(_,S,C,I){if(typeof C>"u")return"[op:replace] require value, but got undefined";var O=g(S),R=O[O.length-1],A=d(_,O);if(A===null)return"[op:replace] path not found: "+S;if(Array.isArray(A)){var N=f(A,R);if(A.length<=N)return"[op:replace] invalid array index: "+S;l(A[N],C)||I(_,O).splice(N,1,C)}else l(A[R],C)||(I(_,O)[R]=C)}a.exports=b}),xfe=W((s,a)=>{var l=pO(),d=Ov(),f=hO(),g=Ff();function b(_,S,C,I){if(C!==S){var O=g(S),R=O[O.length-1],A=d(_,O);if(A===null)return"[op:move] path not found: "+S;var N=void 0;if(Array.isArray(A)){var L=f(A,R);if(A.length<=L)return"[op:move] invalid array index: "+C;N=A[L],I(_,O).splice(L,1)}else N=A[R],delete I(_,O)[R];return l(_,C,N,I)}}a.exports=b}),Sfe=W((s,a)=>{var l=Ov(),d=Ff(),f=pO();function g(b,_,S,C){var I=d(_),O=I[I.length-1],R=l(b,I);return R===null?"[op:copy] path not found: "+_:f(b,S,R[O],C)}a.exports=g}),Efe=W((s,a)=>{var l=dO(),d=Ov(),f=Ff();function g(b,_,S){var C=f(_),I=C[C.length-1],O=d(b,C);if(O===null)return"[op:test] path not found: "+_;if(!l(O[I],S)){var R=JSON.stringify(O[I]),A=JSON.stringify(S);return"[op:test] not matched: "+R+" "+A}}a.exports=g}),E6=W((s,a)=>{function l(d){if(!d||typeof d!="object")return d;if(Array.isArray(d)){for(var f=d.length,g=new Array(f),b=0;b<f;b++)g[b]=d[b];return g}for(var _=Object.keys(d),S={},C=0,I=_.length;C<I;C++){var O=_[C];S[O]=d[O]}return S}a.exports=l}),HOe=W((s,a)=>{var l=jOe(),d=pO(),f=_fe(),g=wfe(),b=xfe(),_=Sfe(),S=Efe(),C=dO(),I=E6(),O=Ff();function R(A,N){return{get:function(L){return l(A,L)},add:function(L,V){return d(A,L,V,N)},remove:function(L){return f(A,L,N)},replace:function(L,V){return g(A,L,V,N)},move:function(L,V){return b(A,L,V,N)},copy:function(L,V){return _(A,L,V,N)},test:function(L,V){return S(A,L,V)},deepEqual:C,shallowCopy:I,toKeys:O}}a.exports=R}),GOe=W((s,a)=>{function l(d,f,g,b){return b.error=g,b.partial?f[""]:d}a.exports=l}),WOe=W((s,a)=>{function l(d){return!!d}a.exports=l}),$Oe=W((s,a)=>{function l(d){if(d)throw new TypeError(d)}a.exports=l}),KOe=W((s,a)=>{var l=E6();function d(f,g){for(var b=0,_=g.length-1;b<_;b++)f=f[g[b]]=l(f[g[b]]);return f}a.exports=d}),XOe=W((s,a)=>{var l=E6();function d(g,b,_){var S=g[b];return _.has(S)||(S=l(S),_.add(S)),S}function f(g,b,_){for(var S=0,C=b.length-1;S<C;S++)g=g[b[S]]=d(g,b[S],_);return g}a.exports=f}),qOe=W((s,a)=>{var l=HOe(),d=GOe(),f=WOe(),g=$Oe(),b=KOe(),_=XOe(),S=pO(),C=_fe(),I=wfe(),O=xfe(),R=Sfe(),A=Efe(),N=Set||function(){var V=[];return V.has=function(G){return this.indexOf(G)!==-1},V.add=function(G){this.push(G)},V};function L(V,G,$){if(G.length===0)return V;$=$||{};for(var Y=$.strict?g:f,ie=G.length===1?b:function(Le){return function(it,de){return _(it,de,Le)}}(new N),re={"":V},ce,Pe=0,ye=G.length;Pe<ye;Pe++){var we=G[Pe];switch(we.op){case"add":if(Y(S(re,""+we.path,we.value,ie)))return d(V,re,we,$);break;case"remove":if(Y(C(re,""+we.path,ie)))return d(V,re,we,$);break;case"replace":if(Y(I(re,""+we.path,we.value,ie)))return d(V,re,we,$);break;case"move":if(Y(O(re,""+we.from,""+we.path,ie)))return d(V,re,we,$);break;case"copy":if(Y(R(re,""+we.from,""+we.path,ie)))return d(V,re,we,$);break;case"test":if(Y(A(re,""+we.path,we.value)))return d(V,re,we,$);break;default:if($.custom&&$.custom[we.op]){if(ce=ce||l(re,ie),Y($.custom[we.op](ce,we,Pe,G)))return d(V,re,we,$)}else return Y("[op:"+we.op+"] unknown"),d(V,re,we,$);break}}return re[""]}a.exports=L}),YOe=W((s,a)=>{a.exports=qOe()}),ZOe=W((s,a)=>{(function(l,d){typeof s=="object"&&typeof a=="object"?a.exports=d():typeof s=="object"?s.blobCompare=d():l.blobCompare=d()})(window,function(){return function(l){var d={};function f(g){if(d[g])return d[g].exports;var b=d[g]={i:g,l:!1,exports:{}};return l[g].call(b.exports,b,b.exports,f),b.l=!0,b.exports}return f.m=l,f.c=d,f.d=function(g,b,_){f.o(g,b)||Object.defineProperty(g,b,{enumerable:!0,get:_})},f.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},f.t=function(g,b){if(1&b&&(g=f(g)),8&b||4&b&&typeof g=="object"&&g&&g.__esModule)return g;var _=Object.create(null);if(f.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:g}),2&b&&typeof g!="string")for(var S in g)f.d(_,S,(function(C){return g[C]}).bind(null,S));return _},f.n=function(g){var b=g&&g.__esModule?function(){return g.default}:function(){return g};return f.d(b,"a",b),b},f.o=function(g,b){return Object.prototype.hasOwnProperty.call(g,b)},f.p="",f(f.s=4)}([function(l,d,f){var g=function(I,O){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return function(R,A){var N=[],L=!0,V=!1,G=void 0;try{for(var $,Y=R[Symbol.iterator]();!(L=($=Y.next()).done)&&(N.push($.value),!A||N.length!==A);L=!0);}catch(ie){V=!0,G=ie}finally{try{!L&&Y.return&&Y.return()}finally{if(V)throw G}}return N}(I,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")},b=function(){function I(O,R){for(var A=0;A<R.length;A++){var N=R[A];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(O,N.key,N)}}return function(O,R,A){return R&&I(O.prototype,R),A&&I(O,A),O}}();function _(I){if(Array.isArray(I)){for(var O=0,R=Array(I.length);O<I.length;O++)R[O]=I[O];return R}return Array.from(I)}var S=f(2),C=function(I){function O(R){(function(N,L){if(!(N instanceof L))throw new TypeError("Cannot call a class as a function")})(this,O);var A=function(N,L){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!L||typeof L!="object"&&typeof L!="function"?N:L}(this,(O.__proto__||Object.getPrototypeOf(O)).call(this));return A._messageId=1,A._messages=new Map,A._worker=R,A._worker.onmessage=A._onMessage.bind(A),A._id=Math.ceil(1e7*Math.random()),A}return function(R,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);R.prototype=Object.create(A&&A.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(R,A):R.__proto__=A)}(O,I),b(O,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return this._messages.size===0}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(R){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,N=this,L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],V=arguments[3];return new Promise(function(G,$){var Y=N._messageId++;N._messages.set(Y,[G,$,V]),N._worker.postMessage([Y,A,R],L||[])})}},{key:"postMessage",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,A=this,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],L=arguments[2];return new Promise(function(V,G){var $=A._messageId++;A._messages.set($,[V,G,L]),A._worker.postMessage([$,R],N||[])})}},{key:"emit",value:function(R){for(var A=arguments.length,N=Array(A>1?A-1:0),L=1;L<A;L++)N[L-1]=arguments[L];this._worker.postMessage({eventName:R,args:N})}},{key:"_onMessage",value:function(R){var A;if(!Array.isArray(R.data)&&R.data.eventName)return(A=function $(Y,ie,re){Y===null&&(Y=Function.prototype);var ce=Object.getOwnPropertyDescriptor(Y,ie);if(ce===void 0){var Pe=Object.getPrototypeOf(Y);return Pe===null?void 0:$(Pe,ie,re)}if("value"in ce)return ce.value;var ye=ce.get;return ye!==void 0?ye.call(re):void 0}(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"emit",this)).call.apply(A,[this,R.data.eventName].concat(_(R.data.args)));var N,L=(N=R.data,Array.isArray(N)?N:Array.from(N)),V=L[0],G=L.slice(1);if(V===1)this._onEvent.apply(this,_(G));else{if(V!==0)throw new Error("Wrong message type '"+V+"'");this._onResult.apply(this,_(G))}}},{key:"_onResult",value:function(R,A,N){var L=this._messages.get(R),V=g(L,2),G=V[0],$=V[1];return this._messages.delete(R),A===1?G(N):$(N)}},{key:"_onEvent",value:function(R,A,N){var L=this._messages.get(R),V=g(L,3)[2];V&&V(A,N)}}]),O}(S);l.exports=C},function(l,d,f){l.exports=function(){return f(3)(`!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=r(1),c=0,l=1,s=0,y=1,p="main",b=function(e){return"object"===(void 0===e?"undefined":i(e))&&"function"==typeof e.then&&"function"==typeof e.catch};var v=function e(t,r){u(this,e),this.payload=t,this.transferable=r};e.exports=function(e){var t,r,i,h=(i=e,(r=p)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t),d=self.postMessage.bind(self),m=new(function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var r,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(r,[this,e].concat(i))}},{key:"operation",value:function(e,t){return h[e]=t,this}}]),t}(f)),g=function(e,t,r){var n=function(t){t&&t instanceof v?w(e,y,t.payload,t.transferable):w(e,y,t)},o=function(t){w(e,s,{message:t.message,stack:t.stack})};try{var i=_(e,t,r);b(i)?i.then(n).catch(o):n(i)}catch(e){o(e)}},_=function(e,t,r){var n=h[r||p];if(!n)throw new Error("Not found handler for this request");return n(t,O.bind(null,e))},w=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];d([c,e,t,r],n)},O=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");d([l,e,t,r])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?g.apply(void 0,a(t)):t&&t.eventName&&m.emitLocally.apply(m,[t.eventName].concat(a(t.args)))})),m},e.exports.TransferableResponse=v},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return n(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,a=void 0;try{for(var u,f=this.__listeners[e][Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var c=u.value;c.apply(void 0,r)}}catch(e){i=!0,a=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(e,t){var r=this,n=function n(){r.off(e,n),t.apply(void 0,arguments)};return this.on(e,n)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}();e.exports=o},function(e,t,r){"use strict";r.r(t);var n=r(0);r.n(n)()().operation("binary",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsBinaryString(a)})}(e,t)).operation("buffer",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsArrayBuffer(a)})}(e,t)).operation("compare",({buf1:e,buf2:t})=>(function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),n=new DataView(t);for(var o=e.byteLength;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0})(e,t))}]);`,null)}},function(l,d,f){var g=function(){function _(S,C){for(var I=0;I<C.length;I++){var O=C[I];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(S,O.key,O)}}return function(S,C,I){return C&&_(S.prototype,C),I&&_(S,I),S}}(),b=function(){function _(){(function(S,C){if(!(S instanceof C))throw new TypeError("Cannot call a class as a function")})(this,_),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return g(_,[{key:"emit",value:function(S){if(!this.__listeners[S])return this;for(var C=arguments.length,I=Array(C>1?C-1:0),O=1;O<C;O++)I[O-1]=arguments[O];var R=!0,A=!1,N=void 0;try{for(var L,V=this.__listeners[S][Symbol.iterator]();!(R=(L=V.next()).done);R=!0){var G=L.value;G.apply(void 0,I)}}catch($){A=!0,N=$}finally{try{!R&&V.return&&V.return()}finally{if(A)throw N}}return this}},{key:"once",value:function(S,C){var I=this,O=function R(){I.off(S,R),C.apply(void 0,arguments)};return this.on(S,O)}},{key:"on",value:function(S,C){return this.__listeners[S]||(this.__listeners[S]=[]),this.__listeners[S].push(C),this}},{key:"off",value:function(S,C){return this.__listeners[S]=C?this.__listeners[S].filter(function(I){return I!==C}):[],this}}]),_}();l.exports=b},function(l,d,f){var g=window.URL||window.webkitURL;l.exports=function(b,_){try{try{var S;try{(S=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(b),S=S.getBlob()}catch{S=new Blob([b])}return new Worker(g.createObjectURL(S))}catch{return new Worker("data:application/javascript,"+encodeURIComponent(b))}}catch{if(!_)throw Error("Inline worker is not supported");return new Worker(_)}}},function(l,d,f){f.r(d);var g=f(0),b=f.n(g),_=f(1),S=f.n(_);f.d(d,"workersEnabled",function(){return C}),f.d(d,"default",function(){return I});let C=!!window.Worker;class I{static toBinaryStringWithWorker(R,A){return ne(this,null,function*(){let N=new b.a(new S.a),L=yield N.exec("binary",{blob:R,chunk:A});return N.terminate(),L})}static toBinaryStringWithoutWorker(R,A){return function(N,L){return new Promise((V,G)=>{let $=new FileReader,Y=L?Math.min(L,N.size):N.size,ie=N.slice(0,Y);$.onload=()=>V($.result),$.onerror=G,$.readAsBinaryString(ie)})}(R,A)}static toBinaryString(R,A,N=!0){return N&&C?this.toBinaryStringWithWorker(R,A):this.toBinaryStringWithoutWorker(R,A)}static toArrayBufferWithWorker(R,A){return ne(this,null,function*(){let N=new b.a(new S.a),L=yield N.exec("buffer",{blob:R,chunk:A});return N.terminate(),L})}static toArrayBufferWithoutWorker(R,A){return function(N,L){return new Promise((V,G)=>{let $=new FileReader,Y=L?Math.min(L,N.size):N.size,ie=N.slice(0,Y);$.onload=()=>V($.result),$.onerror=G,$.readAsArrayBuffer(ie)})}(R,A)}static toArrayBuffer(R,A,N=!0){return N&&C?this.toArrayBufferWithWorker(R,A):this.toArrayBufferWithoutWorker(R,A)}static compareBuffersWithWorker(R,A){return ne(this,null,function*(){if(R===A)return!0;let N=new b.a(new S.a),L=yield N.exec("compare",{buf1:R,buf2:A},[R,A]);return N.terminate(),L})}static compareBuffersWithoutWorker(R,A){return function(N,L){if(N===L)return!0;if(N.byteLength!==L.byteLength)return!1;let V=new DataView(N),G=new DataView(L);for(var $=N.byteLength;$--;)if(V.getUint8($)!==G.getUint8($))return!1;return!0}(R,A)}static compareBuffers(R,A,N=!0){return N&&C?this.compareBuffersWithWorker(R,A):this.compareBuffersWithoutWorker(R,A)}static sizeEqual(R,A){return R.size===A.size}static typeEqual(R,A){return R.type===A.type}static magicNumbersEqual(R,A,N=!0){return ne(this,null,function*(){if(R===A)return!0;let L=[24,16,14,12,8,6,4],[V,G]=yield Promise.all([this.toBinaryString(R,24,N),this.toBinaryString(A,24,N)]);for(let $ of L)if(V.substring(0,$)===G.substring(0,$))return!0;return!1})}static bytesEqualWithBinaryString(R,A,N,L=!0){return ne(this,null,function*(){if(R===A)return!0;let[V,G]=yield Promise.all([this.toBinaryString(R,N,L),this.toBinaryString(A,N,L)]);return V===G})}static bytesEqualWithArrayBuffer(R,A,N,L=!0){return ne(this,null,function*(){if(R===A)return!0;let[V,G]=yield Promise.all([this.toArrayBuffer(R,N,L),this.toArrayBuffer(A,N,L)]);return this.compareBuffers(V,G,L)})}static isEqual(R,A){return ne(this,arguments,function*(N,L,{methods:V=["size","type","magic","byte"],byte:G="buffer",partial:$=!1,chunks:Y=null,worker:ie=!0}={}){let re=null;for(let ce of V){if(re===!1||$&&re===!0)break;switch(ce){case"byte":case"bytes":case"content":Y=Y instanceof Array?Y:[N.size],re=!0;for(let Pe of Y){let ye=!1;ye=G==="buffer"?yield this.bytesEqualWithArrayBuffer(N,L,Pe,ie):yield this.bytesEqualWithBinaryString(N,L,Pe,ie),ye||(re=!1)}break;case"magic":case"headers":case"numbers":case"mime":re=yield this.magicNumbersEqual(N,L,ie);break;case"size":case"sizes":re=this.sizeEqual(N,L);break;case"type":case"types":re=this.typeEqual(N,L);break;default:throw new Error("Blob-compare : Unknown comparison method")}}return re})}}}])})}),Cfe={};Z(Cfe,{ToolbarDropdownSelect:()=>mLe,default:()=>vLe}),t.exports=se(Cfe),Te(),qe();var Pfe=Nt;Jt();var QOe=0,JOe=class{constructor(s){this._studio=s,pe(this,"_id"),pe(this,"_state",{type:"Ready"}),this._id=String(QOe++)}get status(){return this._state.type}reset(){let{_state:s}=this;if(s.type!=="Ready")if(s.type==="Captured")this._state={type:"Ready"},s.transaction.discard(),s.flagsTransaction.discard();else throw s.type==="Committed"?new Error("This scrub is already committed and can't be reset."):new Error("This scrub is already discarded and can't be reset.")}commit(){let{_state:s}=this;if(s.type==="Captured")s.transaction.commit(),s.flagsTransaction.discard(),this._state={type:"Committed"};else if(s.type==="Ready"){console.warn("Scrub is empty. Nothing to commit.");return}else throw s.type==="Committed"?new Error("This scrub is already committed."):new Error("This scrub is already discarded and can't be comitted.")}capture(s){if(this._state.type==="Captured"&&this.reset(),this._state.type==="Ready"){let a=!0;try{this._state=F({type:"Captured"},this._capture(s)),a=!1}finally{a&&(console.error("This scrub's callback threw an error. We're undo-ing all of the changes made by this scrub, and marking it as discarded."),this._state={type:"Discarded"})}}else throw this._state.type==="Committed"?new Error("This scrub is already committed and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.commit()"):new Error("This scrub is already discarded and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.discard()")}_capture(s){let a=[],l=this._studio.tempTransaction(f=>{let g=!0,b={set:(_,S)=>{if(!g)throw new Error("You seem to have called the scrub api after scrub.capture()");let{root:C,path:I}=(0,Pfe.getPointerParts)(_);if(!Et(C))throw new Error("We can only scrub props of Sheet Objects for now");f.set(_,S),a.push(_)}};try{s(b)}finally{g=!1}}),d=this._studio.tempTransaction(({stateEditors:f})=>{a.forEach(g=>{let{root:b,path:_}=(0,Pfe.getPointerParts)(g);if(!Et(b))return;let S=b.template.getDefaultsAtPointer(g);st(S,(C,I)=>{f.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey.propsBeingScrubbed.flag(B(F({},b.address),{pathToProp:I}))},_)})});return{transaction:l,flagsTransaction:d}}discard(){let{_state:s}=this;if(s.type==="Captured"||s.type==="Ready")s.type==="Captured"&&(s.transaction.discard(),s.flagsTransaction.discard()),this._state={type:"Discarded"};else throw s.type==="Committed"?new Error("This scrub is already committed and can't be discarded."):new Error("This scrub is already discarded")}},e3e=Nt,Tfe=typeof window<"u"?Promise.resolve().then(()=>(OOe(),dfe)).then(s=>s.default):null,t3e=class{constructor(s){this.studio=s,pe(this,"_rendered",!1),pe(this,"_nonSSRBits",Tfe?Tfe.then(a=>new a):Promise.reject()),pe(this,"ready",this._nonSSRBits.then(()=>{},()=>{}))}render(){this._rendered||(this._rendered=!0,this._nonSSRBits.then(s=>{s.render()}).catch(s=>{throw console.error(s),s}))}hide(){this.studio.transaction(({drafts:s})=>{s.ahistoric.visibilityState="everythingIsHidden"})}restore(){this.render(),this.studio.transaction(({drafts:s})=>{s.ahistoric.visibilityState="everythingIsVisible"})}get isHidden(){return(0,e3e.val)(this.studio.atomP.ahistoric.visibilityState)==="everythingIsHidden"}renderToolset(s,a){let l=!1,d=null;return this._nonSSRBits.then(f=>{l||(d=f.renderToolset(s,a))}).catch(f=>{console.error(f)}),()=>{if(d){d();return}l||(l=!0)}}},fO=Nt;function n3e(s){return s}var r3e=(s,a=n3e)=>{let l=d=>({type:s,payload:a(d)});return l.type=s,l.is=d=>d&&d.type&&d.type===s,l},md=r3e,Mfe=X(VOe()),kfe=X(YOe());eb();var mO,i3e=new Uint8Array(16);function s3e(){if(!mO&&(mO=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!mO))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mO(i3e)}var o3e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function a3e(s){return typeof s=="string"&&o3e.test(s)}var l3e=a3e,bo=[];for(gO=0;gO<256;++gO)bo.push((gO+256).toString(16).substr(1));var gO;function u3e(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(bo[s[a+0]]+bo[s[a+1]]+bo[s[a+2]]+bo[s[a+3]]+"-"+bo[s[a+4]]+bo[s[a+5]]+"-"+bo[s[a+6]]+bo[s[a+7]]+"-"+bo[s[a+8]]+bo[s[a+9]]+"-"+bo[s[a+10]]+bo[s[a+11]]+bo[s[a+12]]+bo[s[a+13]]+bo[s[a+14]]+bo[s[a+15]]).toLowerCase();if(!l3e(l))throw TypeError("Stringified UUID is invalid");return l}var c3e=u3e;function d3e(s,a,l){s=s||{};var d=s.random||(s.rng||s3e)();if(d[6]=d[6]&15|64,d[8]=d[8]&63|128,a){l=l||0;for(var f=0;f<16;++f)a[l+f]=d[f];return a}return c3e(d)}var h3e=d3e,PC={replaceHistory:md("@history/replaceHistory"),startHistoryFromScratch:md("@history/startHistoryFromScratch"),undo:md("@history/undo"),redo:md("@history/redo")},p3e={type:"@history/unknownAction",payload:""},f3e={maxNumberOfCommits:100},m3e=(s,a=f3e)=>{let l=C6(s(void 0,p3e));return function(d,f){return PC.startHistoryFromScratch.is(f)?C6(s(void 0,f.payload)):PC.replaceHistory.is(f)?f.payload:PC.undo.is(f)?d?y3e(d):l:PC.redo.is(f)?d?b3e(d):l:d?g3e(d,s(d.innerState,f),a):C6(s(void 0,f))}};function C6(s){return{currentCommitHash:void 0,commitsByHash:{},listOfCommitHashes:[],innerState:s}}function g3e(s,a,l){if(a===s.innerState)return s;let d=v3e(s.innerState,a);if(d.forwardDiff.length===0)return s;let f=rh(s.listOfCommitHashes),g={currentCommitHash:d.hash,commitsByHash:F({},s.commitsByHash),listOfCommitHashes:[...s.listOfCommitHashes],innerState:a};if(s.currentCommitHash!==f){let b=s.listOfCommitHashes.findIndex(_=>_===s.currentCommitHash);s.listOfCommitHashes.slice(b+1).forEach(_=>{delete g.commitsByHash[_]}),g.listOfCommitHashes.splice(b+1,g.listOfCommitHashes.length)}if(g.listOfCommitHashes.push(d.hash),g.commitsByHash[d.hash]=d,g.listOfCommitHashes.length>l.maxNumberOfCommits){let b=g.listOfCommitHashes.length-l.maxNumberOfCommits;g.listOfCommitHashes.slice(0,b).forEach(_=>{delete g.commitsByHash[_]}),g.listOfCommitHashes.splice(0,b)}return g}function v3e(s,a){let l=Mfe.default.diff(s,a,{invertible:!1}),d=Mfe.default.diff(a,s,{invertible:!1}),f=Date.now(),g=h3e();return{forwardDiff:l,backwardDiff:d,timestamp:f,hash:g}}function y3e(s){if(s.currentCommitHash===void 0)return s;let a=s.listOfCommitHashes.findIndex(b=>b===s.currentCommitHash);if(a===-1)throw new Error("This should never happen");let l=s.commitsByHash[s.currentCommitHash],d=(0,kfe.default)(s.innerState,l.backwardDiff),f=a-1,g=f===-1?void 0:s.listOfCommitHashes[f];return B(F({},s),{currentCommitHash:g,innerState:d})}function b3e(s){if(s.listOfCommitHashes.length===0)return s;let a=s.listOfCommitHashes.findIndex(b=>b===s.currentCommitHash);if(a===s.listOfCommitHashes.length-1)return s;let l=a+1,d=s.listOfCommitHashes[l],f=s.commitsByHash[d],g=(0,kfe.default)(s.innerState,f.forwardDiff);return B(F({},s),{currentCommitHash:d,innerState:g})}YD();var vO={ahistoric:{visibilityState:"everythingIsVisible",theTrigger:{position:{closestCorner:"bottomLeft",distanceFromHorizontalEdge:.02,distanceFromVerticalEdge:.02}},coreByProject:{},projects:{stateByProjectId:{}}},historic:{projects:{stateByProjectId:{}},autoKey:!0,coreByProject:{},panelInstanceDesceriptors:{}},ephemeral:{initialised:!1,coreByProject:{},projects:{stateByProjectId:{}},extensions:{byId:{},paneClasses:{}},showOutline:!1}},Afe=md("@storeBundle/replacePersistentState",s=>s),Ife=md("@storeBundle/reduceParts",s=>s),f_={historic:PC,replacePersistentState:Afe,reduceParts:Ife},Rfe=md("@storeBundle/setInnerHistoricState",s=>s),_3e=(s=vO.historic,a)=>Rfe.is(a)?a.payload:s,P6=m3e(_3e),Dfe=(s,a)=>{if(Afe.is(a)){let{historic:l,ahistoric:d}=a.payload,f=(s==null?void 0:s.ephemeral)||vO.ephemeral;return{$persistent:{historic:l,ahistoric:d},ephemeral:f}}else if(s){let{historic:l,ahistoric:d}=s.$persistent,{ephemeral:f}=s;if(Ife.is(a)){let g={historic:s.$persistent.historic.innerState,ahistoric:s.$persistent.ahistoric,ephemeral:s.ephemeral},b=a.payload(g);if(b===g)return s;l.innerState!==b.historic&&(l=P6(l,Rfe(b.historic))),d=b.ahistoric,f=b.ephemeral}else{let g=P6(l,a);if(g===l)return s;l=g}return{$persistent:l===s.$persistent.historic&&d===s.$persistent.ahistoric?s.$persistent:{historic:l,ahistoric:d},ephemeral:f}}else{let l=P6(void 0,{}),d=vO.ahistoric,f=vO.ephemeral;return{$persistent:{historic:l,ahistoric:d},ephemeral:f}}},Ofe=md("@history/pushTempAction",s=>s),Lfe=md("@history/discardTempAction",s=>s),Nfe=md("@history/commitTempAction",s=>s),w3e=0,x3e=()=>{let s=w3e++;return{push:a=>Ofe({id:s,originalAction:a}),discard:()=>Lfe(s),commit:()=>Nfe(s)}},S3e=(s,a)=>{if(s){let{tempActions:l,permanent:d}=s.$temps,f;if(Ofe.is(a))l=[...l,a];else if(Nfe.is(a)){let b=l.find(_=>_.payload.id===a.payload);b?(f=b.payload.originalAction,l=l.filter(_=>_.payload.id!==a.payload)):qD.error("Comitting temp action group ".concat(a.payload," isn't possible as this group doesn't exist"))}else Lfe.is(a)?l=l.filter(b=>b.payload.id!==a.payload):f=a;f&&(d=Dfe(s.$temps.permanent,f));let g={historic:d.$persistent.historic.innerState,ahistoric:d.$persistent.ahistoric,ephemeral:d.ephemeral};for(let b of l)g=b.payload.originalAction.payload(g);return F({$temps:{tempActions:l,permanent:d},$persistent:d.$persistent},g)}else{let l=Dfe(void 0,a);return{$temps:{permanent:l,tempActions:[]},$persistent:l.$persistent,historic:l.$persistent.historic.innerState,ahistoric:l.$persistent.ahistoric,ephemeral:l.ephemeral}}};rd(),rd(),wh();function Ffe(s,a){if(typeof s!="object"||s===null)return;if(a.length===0){for(let b of Object.keys(s))delete s[b];return}let l=a.slice(0,a.length-1),d=s,f=new WeakMap;for(let b of l){let _=d,S=_[b];if(typeof S!="object"||S===null)return;f.set(S,_),d=S}let g=a.slice().reverse();for(let b of g){if(delete d[b],Object.keys(d).length>0)return;d=f.get(d)}}function E3e(s,{scale:a,origin:l,translate:d}){let f=l+(s-l)*a;return d+f}function tc(s){for(var a=arguments.length,l=Array(a>1?a-1:0),d=1;d<a;d++)l[d-1]=arguments[d];throw Error("[Immer] minified error nr: "+s+(l.length?" "+l.map(function(f){return"'"+f+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function m_(s){return!!s&&!!s[dl]}function Lv(s){return!!s&&(function(a){if(!a||typeof a!="object")return!1;var l=Object.getPrototypeOf(a);if(l===null)return!0;var d=Object.hasOwnProperty.call(l,"constructor")&&l.constructor;return d===Object||typeof d=="function"&&Function.toString.call(d)===I3e}(s)||Array.isArray(s)||!!s[Kfe]||!!s.constructor[Kfe]||M6(s)||k6(s))}function TC(s,a,l){l===void 0&&(l=!1),g_(s)===0?(l?Object.keys:V6)(s).forEach(function(d){l&&typeof d=="symbol"||a(d,s[d],s)}):s.forEach(function(d,f){return a(f,d,s)})}function g_(s){var a=s[dl];return a?a.i>3?a.i-4:a.i:Array.isArray(s)?1:M6(s)?2:k6(s)?3:0}function T6(s,a){return g_(s)===2?s.has(a):Object.prototype.hasOwnProperty.call(s,a)}function C3e(s,a){return g_(s)===2?s.get(a):s[a]}function Bfe(s,a,l){var d=g_(s);d===2?s.set(a,l):d===3?(s.delete(a),s.add(l)):s[a]=l}function P3e(s,a){return s===a?s!==0||1/s==1/a:s!=s&&a!=a}function M6(s){return k3e&&s instanceof Map}function k6(s){return A3e&&s instanceof Set}function Nv(s){return s.o||s.t}function A6(s){if(Array.isArray(s))return Array.prototype.slice.call(s);var a=R3e(s);delete a[dl];for(var l=V6(a),d=0;d<l.length;d++){var f=l[d],g=a[f];g.writable===!1&&(g.writable=!0,g.configurable=!0),(g.get||g.set)&&(a[f]={configurable:!0,writable:!0,enumerable:g.enumerable,value:s[f]})}return Object.create(Object.getPrototypeOf(s),a)}function I6(s,a){return a===void 0&&(a=!1),R6(s)||m_(s)||!Lv(s)||(g_(s)>1&&(s.set=s.add=s.clear=s.delete=T3e),Object.freeze(s),a&&TC(s,function(l,d){return I6(d,!0)},!0)),s}function T3e(){tc(2)}function R6(s){return s==null||typeof s!="object"||Object.isFrozen(s)}function Rh(s){var a=D3e[s];return a||tc(18,s),a}function Ufe(){return MC}function D6(s,a){a&&(Rh("Patches"),s.u=[],s.s=[],s.v=a)}function yO(s){O6(s),s.p.forEach(M3e),s.p=null}function O6(s){s===MC&&(MC=s.l)}function zfe(s){return MC={p:[],l:MC,h:s,m:!0,_:0}}function M3e(s){var a=s[dl];a.i===0||a.i===1?a.j():a.O=!0}function L6(s,a){a._=a.p.length;var l=a.p[0],d=s!==void 0&&s!==l;return a.h.g||Rh("ES5").S(a,s,d),d?(l[dl].P&&(yO(a),tc(4)),Lv(s)&&(s=bO(a,s),a.l||_O(a,s)),a.u&&Rh("Patches").M(l[dl],s,a.u,a.s)):s=bO(a,l,[]),yO(a),a.u&&a.v(a.u,a.s),s!==$fe?s:void 0}function bO(s,a,l){if(R6(a))return a;var d=a[dl];if(!d)return TC(a,function(g,b){return Vfe(s,d,a,g,b,l)},!0),a;if(d.A!==s)return a;if(!d.P)return _O(s,d.t,!0),d.t;if(!d.I){d.I=!0,d.A._--;var f=d.i===4||d.i===5?d.o=A6(d.k):d.o;TC(d.i===3?new Set(f):f,function(g,b){return Vfe(s,d,f,g,b,l)}),_O(s,f,!1),l&&s.u&&Rh("Patches").R(d,l,s.u,s.s)}return d.o}function Vfe(s,a,l,d,f,g){if(m_(f)){var b=bO(s,f,g&&a&&a.i!==3&&!T6(a.D,d)?g.concat(d):void 0);if(Bfe(l,d,b),!m_(b))return;s.m=!1}if(Lv(f)&&!R6(f)){if(!s.h.F&&s._<1)return;bO(s,f),a&&a.A.l||_O(s,f)}}function _O(s,a,l){l===void 0&&(l=!1),s.h.F&&s.m&&I6(a,l)}function N6(s,a){var l=s[dl];return(l?Nv(l):s)[a]}function jfe(s,a){if(a in s)for(var l=Object.getPrototypeOf(s);l;){var d=Object.getOwnPropertyDescriptor(l,a);if(d)return d;l=Object.getPrototypeOf(l)}}function F6(s){s.P||(s.P=!0,s.l&&F6(s.l))}function B6(s){s.o||(s.o=A6(s.t))}function U6(s,a,l){var d=M6(a)?Rh("MapSet").N(a,l):k6(a)?Rh("MapSet").T(a,l):s.g?function(f,g){var b=Array.isArray(f),_={i:b?1:0,A:g?g.A:Ufe(),P:!1,I:!1,D:{},l:g,t:f,k:null,o:null,j:null,C:!1},S=_,C=xO;b&&(S=[_],C=SO);var I=Proxy.revocable(S,C),O=I.revoke,R=I.proxy;return _.k=R,_.j=O,R}(a,l):Rh("ES5").J(a,l);return(l?l.A:Ufe()).p.push(d),d}function wO(s){return m_(s)||tc(22,s),function a(l){if(!Lv(l))return l;var d,f=l[dl],g=g_(l);if(f){if(!f.P&&(f.i<4||!Rh("ES5").K(f)))return f.t;f.I=!0,d=Hfe(l,g),f.I=!1}else d=Hfe(l,g);return TC(d,function(b,_){f&&C3e(f.t,b)===_||Bfe(d,b,a(_))}),g===3?new Set(d):d}(s)}function Hfe(s,a){switch(a){case 2:return new Map(s);case 3:return Array.from(s)}return A6(s)}var Gfe,MC,z6=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",k3e=typeof Map<"u",A3e=typeof Set<"u",Wfe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",$fe=z6?Symbol.for("immer-nothing"):((Gfe={})["immer-nothing"]=!0,Gfe),Kfe=z6?Symbol.for("immer-draftable"):"__$immer_draftable",dl=z6?Symbol.for("immer-state"):"__$immer_state",I3e=""+Object.prototype.constructor,V6=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames,R3e=Object.getOwnPropertyDescriptors||function(s){var a={};return V6(s).forEach(function(l){a[l]=Object.getOwnPropertyDescriptor(s,l)}),a},D3e={},xO={get:function(s,a){if(a===dl)return s;var l=Nv(s);if(!T6(l,a))return function(f,g,b){var _,S=jfe(g,b);return S?"value"in S?S.value:(_=S.get)===null||_===void 0?void 0:_.call(f.k):void 0}(s,l,a);var d=l[a];return s.I||!Lv(d)?d:d===N6(s.t,a)?(B6(s),s.o[a]=U6(s.A.h,d,s)):d},has:function(s,a){return a in Nv(s)},ownKeys:function(s){return Reflect.ownKeys(Nv(s))},set:function(s,a,l){var d=jfe(Nv(s),a);if(d!=null&&d.set)return d.set.call(s.k,l),!0;if(!s.P){var f=N6(Nv(s),a),g=f==null?void 0:f[dl];if(g&&g.t===l)return s.o[a]=l,s.D[a]=!1,!0;if(P3e(l,f)&&(l!==void 0||T6(s.t,a)))return!0;B6(s),F6(s)}return s.o[a]===l&&typeof l!="number"&&(l!==void 0||a in s.o)||(s.o[a]=l,s.D[a]=!0,!0)},deleteProperty:function(s,a){return N6(s.t,a)!==void 0||a in s.t?(s.D[a]=!1,B6(s),F6(s)):delete s.D[a],s.o&&delete s.o[a],!0},getOwnPropertyDescriptor:function(s,a){var l=Nv(s),d=Reflect.getOwnPropertyDescriptor(l,a);return d&&{writable:!0,configurable:s.i!==1||a!=="length",enumerable:d.enumerable,value:l[a]}},defineProperty:function(){tc(11)},getPrototypeOf:function(s){return Object.getPrototypeOf(s.t)},setPrototypeOf:function(){tc(12)}},SO={};TC(xO,function(s,a){SO[s]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}}),SO.deleteProperty=function(s,a){return xO.deleteProperty.call(this,s[0],a)},SO.set=function(s,a,l){return xO.set.call(this,s[0],a,l,s[0])};var O3e=function(){function s(l){var d=this;this.g=Wfe,this.F=!0,this.produce=function(f,g,b){if(typeof f=="function"&&typeof g!="function"){var _=g;g=f;var S=d;return function(A){var N=this;A===void 0&&(A=_);for(var L=arguments.length,V=Array(L>1?L-1:0),G=1;G<L;G++)V[G-1]=arguments[G];return S.produce(A,function($){var Y;return(Y=g).call.apply(Y,[N,$].concat(V))})}}var C;if(typeof g!="function"&&tc(6),b!==void 0&&typeof b!="function"&&tc(7),Lv(f)){var I=zfe(d),O=U6(d,f,void 0),R=!0;try{C=g(O),R=!1}finally{R?yO(I):O6(I)}return typeof Promise<"u"&&C instanceof Promise?C.then(function(A){return D6(I,b),L6(A,I)},function(A){throw yO(I),A}):(D6(I,b),L6(C,I))}if(!f||typeof f!="object")return(C=g(f))===$fe?void 0:(C===void 0&&(C=f),d.F&&I6(C,!0),C);tc(21,f)},this.produceWithPatches=function(f,g){return typeof f=="function"?function(S){for(var C=arguments.length,I=Array(C>1?C-1:0),O=1;O<C;O++)I[O-1]=arguments[O];return d.produceWithPatches(S,function(R){return f.apply(void 0,[R].concat(I))})}:[d.produce(f,g,function(S,C){b=S,_=C}),b,_];var b,_},typeof(l==null?void 0:l.useProxies)=="boolean"&&this.setUseProxies(l.useProxies),typeof(l==null?void 0:l.autoFreeze)=="boolean"&&this.setAutoFreeze(l.autoFreeze)}var a=s.prototype;return a.createDraft=function(l){Lv(l)||tc(8),m_(l)&&(l=wO(l));var d=zfe(this),f=U6(this,l,void 0);return f[dl].C=!0,O6(d),f},a.finishDraft=function(l,d){var f=l&&l[dl],g=f.A;return D6(g,d),L6(void 0,g)},a.setAutoFreeze=function(l){this.F=l},a.setUseProxies=function(l){l&&!Wfe&&tc(20),this.g=l},a.applyPatches=function(l,d){var f;for(f=d.length-1;f>=0;f--){var g=d[f];if(g.path.length===0&&g.op==="replace"){l=g.value;break}}var b=Rh("Patches").$;return m_(l)?b(l,d):this.produce(l,function(_){return b(_,d.slice(f+1))})},s}(),hl=new O3e;hl.produce,hl.produceWithPatches.bind(hl),hl.setAutoFreeze.bind(hl),hl.setUseProxies.bind(hl),hl.applyPatches.bind(hl);var j6=hl.createDraft.bind(hl),H6=hl.finishDraft.bind(hl);x5(),Du(),AS(),ib(),ob(),KD(),di(),Jt();var nc={create(s){let a={byId:{},allIds:{}};if(s)for(let[l,d]of s)a.byId[l]=d,a.allIds[l]=!0;return a},shallowCopy(s){return{byId:F({},s==null?void 0:s.byId),allIds:F({},s==null?void 0:s.allIds)}},add(s,a,l){return{byId:B(F({},s==null?void 0:s.byId),{[a]:l}),allIds:B(F({},s==null?void 0:s.allIds),{[a]:!0})}},merge(s){let a=nc.create();for(let l=0;l<s.length;l++)a.byId=F(F({},a.byId),s[l].byId),a.allIds=F(F({},a.allIds),s[l].allIds);return a},remove(s,a){let l=nc.shallowCopy(s);return delete l.allIds[a],delete l.byId[a],l},filter(s,a){let l=nc.shallowCopy(s);for(let[d,f]of Object.entries(l.byId))a(f)||(delete l.allIds[d],delete l.byId[d]);return l}},Xfe=s=>(G6=s,W6),G6,_o=()=>{if(G6===void 0)throw new Error("Calling stateEditors outside of a transaction is not allowed.");return G6},W6;(s=>{(a=>{(l=>{(d=>{function f(g){let b=_o().historic;b.panelPositions!=null||(b.panelPositions={}),b.panelPositions[g.panelId]=g.position}d.setPanelPosition=f})(l.panelPositions||(l.panelPositions={})),(d=>{function f(){var g;return(g=_o().historic).panels!=null||(g.panels={}),_o().historic.panels}d._ensure=f,(g=>{function b(){let _=s.studio.historic.panels._ensure();return _.outlinePanel!=null||(_.outlinePanel={}),_.outlinePanel}g._ensure=b,(_=>{function S(I){let O=[];for(let R of Lo(I))Pt(R)?O.push(F({type:"Project"},R.address)):cn(R)?(O.push(F({type:"Sheet"},R.template.address)),s.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(R.address)):ht(R)?O.push(F({type:"Sheet"},R.address)):Et(R)?(O.push(F({type:"SheetObject"},R.template.address)),s.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(R.sheet.address)):$t(R)&&O.push(F({type:"SheetObject"},R.address));g._ensure().selection=O}_.set=S;function C(){g._ensure().selection=[]}_.unset=C})(g.selection||(g.selection={}))})(d.outline||(d.outline={})),(g=>{function b(){let _=s.studio.historic.panels._ensure();return _.sequenceEditor!=null||(_.sequenceEditor={}),_.sequenceEditor}g._ensure=b,(_=>{function S(){let I=g._ensure();return I.graphEditor!=null||(I.graphEditor={height:.5,isOpen:!1}),I.graphEditor}function C(I){S().isOpen=I.isOpen}_.setIsOpen=C})(g.graphEditor||(g.graphEditor={}))})(d.sequenceEditor||(d.sequenceEditor={}))})(l.panels||(l.panels={})),(d=>{(f=>{function g(b){let _=_o().historic;return _.projects.stateByProjectId[b.projectId]||(_.projects.stateByProjectId[b.projectId]={stateBySheetId:{}}),_.projects.stateByProjectId[b.projectId]}f._ensure=g,(b=>{function _(C){let I=s.studio.historic.projects.stateByProjectId._ensure(C);return I.stateBySheetId[C.sheetId]||(I.stateBySheetId[C.sheetId]={selectedInstanceId:void 0,sequenceEditor:{selectedPropsByObject:{}}}),I.stateBySheetId[C.sheetId]}b._ensure=_;function S(C){s.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(C).selectedInstanceId=C.sheetInstanceId}b.setSelectedInstanceId=S,(C=>{function I(V){let{selectedPropsByObject:G}=b._ensure(V).sequenceEditor;G[V.objectKey]||(G[V.objectKey]={});let $=G[V.objectKey],Y=nd(V.pathToProp),ie=new Set(Object.keys(gC));for(let[ce,Pe]of Object.entries(wO(G)))for(let[ye,we]of Object.entries(Pe))ie.delete(we);let re=ie.size>0?ie.values().next().value:Object.keys(gC)[0];$[Y]=re}C.addPropToGraphEditor=I;function O(V){let{selectedPropsByObject:G}=b._ensure(V).sequenceEditor;if(!G[V.objectKey])return;let $=G[V.objectKey],Y=nd(V.pathToProp);$[Y]&&Ffe(G,[V.objectKey,Y])}C.removePropFromGraphEditor=O;function R(V){let G=s.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(V).sequenceEditor;return G.markerSet||(G.markerSet=nc.create()),G.markerSet}function A(V){let G=R(V.sheetAddress),$=V.markers.filter(ce=>!!isFinite(ce.position)).map(ce=>B(F({},ce),{position:V.snappingFunction(ce.position)})),Y=Hr($,"id"),ie=nc.filter(G,ce=>ce&&!Y[ce.id]),re=Hr(Object.values(ie.byId),"position");$.forEach(({position:ce})=>{let Pe=re[ce];Pe&&(ie=nc.remove(ie,Pe.id))}),Object.assign(G,nc.merge([ie,nc.create($.map(ce=>[ce.id,ce]))]))}C.replaceMarkers=A;function N(V){let G=R(V.sheetAddress);Object.assign(G,nc.remove(G,V.markerId))}C.removeMarker=N;function L(V){let G=R(V.sheetAddress).byId[V.markerId];G!==void 0&&(G.label=V.label)}C.updateMarker=L})(b.sequenceEditor||(b.sequenceEditor={}))})(f.stateBySheetId||(f.stateBySheetId={}))})(d.stateByProjectId||(d.stateByProjectId={}))})(l.projects||(l.projects={}))})(a.historic||(a.historic={})),(l=>{function d(f){_o().ephemeral.showOutline=f}l.setShowOutline=d,(f=>{(g=>{function b(_){let S=_o().ephemeral;return S.projects.stateByProjectId[_.projectId]||(S.projects.stateByProjectId[_.projectId]={stateBySheetId:{}}),S.projects.stateByProjectId[_.projectId]}g._ensure=b,(_=>{function S(C){let I=s.studio.ephemeral.projects.stateByProjectId._ensure(C);return I.stateBySheetId[C.sheetId]||(I.stateBySheetId[C.sheetId]={stateByObjectKey:{}}),I.stateBySheetId[C.sheetId]}_._ensure=S,(C=>{function I(O){var R;let A=s.studio.ephemeral.projects.stateByProjectId.stateBySheetId._ensure(O).stateByObjectKey;return A[R=O.objectKey]!=null||(A[R]={}),A[O.objectKey]}C._ensure=I,(O=>{function R(N){let L=s.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey._ensure(N);return L.valuesBeingScrubbed!=null||(L.valuesBeingScrubbed={}),L.valuesBeingScrubbed}O._ensure=R;function A(N){ef(R(N),N.pathToProp,!0)}O.flag=A})(C.propsBeingScrubbed||(C.propsBeingScrubbed={}))})(_.stateByObjectKey||(_.stateByObjectKey={}))})(g.stateBySheetId||(g.stateBySheetId={}))})(f.stateByProjectId||(f.stateByProjectId={}))})(l.projects||(l.projects={}))})(a.ephemeral||(a.ephemeral={})),(l=>{function d(S){_o().ahistoric.pinOutline=S}l.setPinOutline=d;function f(S){_o().ahistoric.pinDetails=S}l.setPinDetails=f;function g(S){_o().ahistoric.pinNotifications=S}l.setPinNotifications=g;function b(S){_o().ahistoric.visibilityState=S}l.setVisibilityState=b;function _(S){let C=oD(S.map(R=>R.pathToProp)),I=S.map(({keyframe:R,pathToProp:A})=>({keyframe:R,pathToProp:A.slice(C.length)})),O=_o();O.ahistoric.clipboard?O.ahistoric.clipboard.keyframesWithRelativePaths=I:O.ahistoric.clipboard={keyframesWithRelativePaths:I}}l.setClipboardKeyframes=_,(S=>{(C=>{function I(O){let R=_o().ahistoric;return R.projects.stateByProjectId[O.projectId]||(R.projects.stateByProjectId[O.projectId]={stateBySheetId:{}}),R.projects.stateByProjectId[O.projectId]}C._ensure=I,(O=>{function R(N){let L=s.studio.ahistoric.projects.stateByProjectId._ensure(N);return L.collapsedItemsInOutline||(L.collapsedItemsInOutline={}),L.collapsedItemsInOutline}O._ensure=R;function A(N){let L=s.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline._ensure(N);N.isCollapsed?L[N.itemKey]=!0:delete L[N.itemKey]}O.set=A})(C.collapsedItemsInOutline||(C.collapsedItemsInOutline={})),(O=>{function R(A){let N=s.studio.ahistoric.projects.stateByProjectId._ensure(A);return N.stateBySheetId[A.sheetId]||(N.stateBySheetId[A.sheetId]={}),N.stateBySheetId[A.sheetId]}O._ensure=R,(A=>{function N(L){let V=s.studio.ahistoric.projects.stateByProjectId.stateBySheetId._ensure(L);return V.sequence||(V.sequence={}),V.sequence}A._ensure=N,(L=>{function V($){s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($).focusRange={range:$.range,enabled:$.enabled}}L.set=V;function G($){s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($).focusRange=void 0}L.unset=G})(A.focusRange||(A.focusRange={})),(L=>{function V(G){s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(G).clippedSpaceRange=F({},G.range)}L.set=V})(A.clippedSpaceRange||(A.clippedSpaceRange={})),(L=>{function V($){let Y=s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($),ie=Y.collapsableItems;return ie||(ie=Y.collapsableItems=nc.create()),ie}function G($){let Y=V($);Object.assign(Y,nc.add(Y,$.studioSheetItemKey,{isCollapsed:$.isCollapsed}))}L.set=G})(A.sequenceEditorCollapsableItems||(A.sequenceEditorCollapsableItems={}))})(O.sequence||(O.sequence={}))})(C.stateBySheetId||(C.stateBySheetId={}))})(S.stateByProjectId||(S.stateByProjectId={}))})(l.projects||(l.projects={}))})(a.ahistoric||(a.ahistoric={}))})(s.studio||(s.studio={})),(a=>{(l=>{(d=>{function f(g){let b=_o().historic.coreByProject[g.projectId].revisionHistory,_=50;b.unshift(g.revision),b.length>_&&(b.length=_)}d.add=f})(l.revisionHistory||(l.revisionHistory={})),(d=>{function f(_){let S=_o().historic.coreByProject[_.projectId].sheetsById;return S[_.sheetId]||(S[_.sheetId]={staticOverrides:{byObject:{}}}),S[_.sheetId]}d._ensure=f;function g(_){let S=_o().historic.coreByProject[_.projectId].sheetsById[_.sheetId];if(!S)return;delete S.staticOverrides.byObject[_.objectKey];let C=S.sequence;C&&delete C.tracksByObject[_.objectKey]}d.forgetObject=g;function b(_){_o().historic.coreByProject[_.projectId].sheetsById[_.sheetId]&&delete _o().historic.coreByProject[_.projectId].sheetsById[_.sheetId]}d.forgetSheet=b,(_=>{function S(ye){let we=s.coreByProject.historic.sheetsById._ensure(ye);return we.sequence!=null||(we.sequence={subUnitsPerUnit:30,length:10,type:"PositionalSequence",tracksByObject:{}}),we.sequence}_._ensure=S;function C(ye){S(ye).length=_i(parseFloat(ye.length.toFixed(2)),.01,1/0)}_.setLength=C;function I(ye){var we;let Le=s.coreByProject.historic.sheetsById.sequence._ensure(ye).tracksByObject;return Le[we=ye.objectKey]!=null||(Le[we]={trackData:{},trackIdByPropPath:{}}),Le[ye.objectKey]}function O(ye,we){let Le=I(ye),it=nd(ye.pathToProp);if(typeof Le.trackIdByPropPath[it]=="string")return;let de=U2e(),Oe={type:"BasicKeyframedTrack",__debugName:"".concat(ye.objectKey,":").concat(it),keyframes:[]};Le.trackData[de]=Oe,Le.trackIdByPropPath[it]=de}_.setPrimitivePropAsSequenced=O;function R(ye){let we=I(ye),Le=nd(ye.pathToProp),it=we.trackIdByPropPath[Le];typeof it=="string"&&(delete we.trackIdByPropPath[Le],delete we.trackData[it],s.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(ye))}_.setPrimitivePropAsStatic=R;function A(ye){let we=I(ye);for(let Le of Object.keys(we.trackIdByPropPath)){let it=JSON.parse(Le);if(ye.pathToProp.every((de,Oe)=>it[Oe]===de)){let de=we.trackIdByPropPath[Le];if(typeof de!="string")continue;delete we.trackIdByPropPath[Le],delete we.trackData[de]}}s.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfCompoundProp(ye)}_.setCompoundPropAsStatic=A;function N(ye){return I(ye).trackData[ye.trackId]}function L(ye){let we=N(ye);if(we)return we.keyframes.find(Le=>Le.id===ye.keyframeId)}function V(ye){let we=ye.snappingFunction(ye.position),Le=N(ye);if(!Le)return;let{keyframes:it}=Le,de=it.findIndex(je=>je.position===we);if(de!==-1){let je=it[de];je.value=ye.value;return}let Oe=K2(it,je=>je.position<we);if(Oe===-1){it.unshift({id:qee(),position:we,connectedRight:!0,handles:ye.handles||[.5,1,.5,0],type:ye.type||"bezier",value:ye.value});return}let Q=it[Oe];it.splice(Oe+1,0,{id:qee(),position:we,connectedRight:Q.connectedRight,handles:ye.handles||[.5,1,.5,0],type:ye.type||"bezier",value:ye.value})}_.setKeyframeAtPosition=V;function G(ye){let we=N(ye);if(!we)return;let{keyframes:Le}=we,it=Le.findIndex(de=>de.position===ye.position);it!==-1&&Le.splice(it,1)}_.unsetKeyframeAtPosition=G;function $(ye){let we=N(ye);if(!we)return;let Le=wO(we.keyframes).filter(it=>ye.keyframeIds.includes(it.id)).map(it=>{let de=it.position,Oe=ye.snappingFunction(E3e(de,ye));return B(F({},it),{position:Oe})});Pe(B(F({},ye),{keyframes:Le}))}_.transformKeyframes=$;function Y(ye){let we=N(ye);we&&(we.keyframes=we.keyframes.map((Le,it)=>{let de=we.keyframes[it-1],Oe=ye.keyframeIds.includes(Le.id),Q=ye.keyframeIds.includes(de==null?void 0:de.id);return Oe&&!Q?B(F({},Le),{handles:[Le.handles[0],Le.handles[1],ye.handles[0],ye.handles[1]]}):Oe&&Q?B(F({},Le),{handles:[ye.handles[2],ye.handles[3],ye.handles[0],ye.handles[1]]}):Q?B(F({},Le),{handles:[ye.handles[2],ye.handles[3],Le.handles[2],Le.handles[3]]}):Le}))}_.setTweenBetweenKeyframes=Y;function ie(ye){var we,Le,it,de,Oe,Q,je,Rt;let Ie=L(ye);Ie&&(Ie.handles=[(Le=(we=ye.end)==null?void 0:we[0])!=null?Le:Ie.handles[0],(de=(it=ye.end)==null?void 0:it[1])!=null?de:Ie.handles[1],(Q=(Oe=ye.start)==null?void 0:Oe[0])!=null?Q:Ie.handles[2],(Rt=(je=ye.start)==null?void 0:je[1])!=null?Rt:Ie.handles[3]])}_.setHandlesForKeyframe=ie;function re(ye){let we=N(ye);we&&(we.keyframes=we.keyframes.filter(Le=>ye.keyframeIds.indexOf(Le.id)===-1))}_.deleteKeyframes=re;function ce(ye){let we=L(ye);we&&(we.type=ye.keyframeType)}_.setKeyframeType=ce;function Pe(ye){let we=N(ye);if(!we)return;let Le=wO(we.keyframes),it=ye.keyframes.filter(Rt=>!(typeof Rt.value=="number"&&!isFinite(Rt.value)||!Rt.handles.every(Ie=>isFinite(Ie)))).map(Rt=>B(F({},Rt),{position:ye.snappingFunction(Rt.position)})),de=Hr(it,"id"),Oe=Le.filter(Rt=>!de[Rt.id]),Q=Hr(Oe,"position");it.forEach(({position:Rt})=>{let Ie=Q[Rt];Ie&&cI(Oe,Ie)});let je=hI([...Oe,...it],"position");we.keyframes=je}_.replaceKeyframes=Pe})(d.sequence||(d.sequence={})),(_=>{(S=>{function C(A){var N;let L=s.coreByProject.historic.sheetsById._ensure(A).staticOverrides.byObject;return L[N=A.objectKey]!=null||(L[N]={}),L[A.objectKey]}function I(A){let N=C(A);ef(N,A.pathToProp,A.value)}S.setValueOfCompoundProp=I;function O(A){let N=C(A);ef(N,A.pathToProp,A.value)}S.setValueOfPrimitiveProp=O;function R(A){let N=s.coreByProject.historic.sheetsById._ensure(A).staticOverrides.byObject[A.objectKey];N&&Ffe(N,A.pathToProp)}S.unsetValueOfPrimitiveProp=R})(_.byObject||(_.byObject={}))})(d.staticOverrides||(d.staticOverrides={}))})(l.sheetsById||(l.sheetsById={}))})(a.historic||(a.historic={}))})(s.coreByProject||(s.coreByProject={}))})(W6||(W6={}));function $6(){let s,a,l=new Promise((f,g)=>{s=b=>{f(b),d.status="resolved"},a=b=>{g(b),d.status="rejected"}}),d={resolve:s,reject:a,promise:l,status:"pending"};return d}var L3e=Nt;function N3e(s){let a=s.getState(),l=new L3e.Atom(a);return s.subscribe(()=>{let d=s.getState();l.set(d),a=d}),l}Vc();function F3e(s){var a,l=s.Symbol;return typeof l=="function"?l.observable?a=l.observable:(a=l("observable"),l.observable=a):a="@@observable",a}var kC;typeof self<"u"?kC=self:typeof window<"u"?kC=window:typeof Wi<"u"?kC=Wi:kC=t;var B3e=F3e(kC),qfe=B3e,Yfe={INIT:"@@redux/INIT"};function Zfe(s,a,l){var d;if(typeof a=="function"&&typeof l>"u"&&(l=a,a=void 0),typeof l<"u"){if(typeof l!="function")throw new Error("Expected the enhancer to be a function.");return l(Zfe)(s,a)}if(typeof s!="function")throw new Error("Expected the reducer to be a function.");var f=s,g=a,b=[],_=b,S=!1;function C(){_===b&&(_=b.slice())}function I(){return g}function O(L){if(typeof L!="function")throw new Error("Expected listener to be a function.");var V=!0;return C(),_.push(L),function(){if(V){V=!1,C();var G=_.indexOf(L);_.splice(G,1)}}}function R(L){if(!Hy(L))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof L.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(S)throw new Error("Reducers may not dispatch actions.");try{S=!0,g=f(g,L)}finally{S=!1}for(var V=b=_,G=0;G<V.length;G++){var $=V[G];$()}return L}function A(L){if(typeof L!="function")throw new Error("Expected the nextReducer to be a function.");f=L,R({type:Yfe.INIT})}function N(){var L,V=O;return L={subscribe:function(G){if(typeof G!="object")throw new TypeError("Expected the observer to be an object.");function $(){G.next&&G.next(I())}$();var Y=V($);return{unsubscribe:Y}}},L[qfe]=function(){return this},L}return R({type:Yfe.INIT}),d={dispatch:R,subscribe:O,getState:I,replaceReducer:A},d[qfe]=N,d}function U3e(){for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return a.length===0?function(d){return d}:a.length===1?a[0]:a.reduce(function(d,f){return function(){return d(f.apply(void 0,arguments))}})}function z3e(s){let a=U3e();return Zfe(s.rootReducer,void 0,a)}YD(),wS();var K6=new WeakMap,V3e=(s,a,l)=>{let d=S=>{s.dispatch(f_.replacePersistentState(S))},f=Qfe(l),g=()=>s.getState().$persistent;_();let b=()=>{let S=g(),C=K6.get(s);S!==C&&(K6.set(s,S),localStorage.setItem(f,JSON.stringify(S)))};s.subscribe(Jy(b,1e3)),window&&window.addEventListener("beforeunload",b);function _(){let S=localStorage.getItem(f);if(S){let C,I=!0;try{C=JSON.parse(S),I=!1}catch{qD.warn("Could not parse Theatre's persisted state. This must be a bug. Please report it.")}finally{I||d(C),a()}}else a()}},j3e=(s,a)=>{let l=Qfe(a),d=s.getState().$persistent;localStorage.removeItem(l),K6.set(s,d)};function Qfe(s){return s+".persistent"}sne(),Jt(),Kp(),qe(),kR();var EO=Nt;vf(),di(),Ghe();function X6(s){if(typeof s=="boolean"||typeof s=="string"||typeof s=="number")return s;if(Hy(s)){let a={},l=!1;for(let[d,f]of Object.entries(s))X6(f)!==void 0&&(a[d]=f,l=!0);if(l)return a}else return}function Jfe(s,a,l){for(let[d,f]of Object.entries(s.props))if(f.type==="compound")Jfe(f,[...a,d],l);else{if(f.type==="enum")throw new Error("Not yet implemented");l(f,[...a,d])}}function H3e(s,a,l){return{set:(d,f)=>{s();let g=X6(f);if(typeof g>"u")return;let{root:b,path:_}=(0,EO.getPointerParts)(d);if(Et(b)){let S=b.template.getMapOfValidSequenceTracks_forStudio().getValue(),C=ER(b.template.staticConfig,_);if(!C)throw new Error("Object ".concat(b.address.objectKey," does not have a prop at ").concat(JSON.stringify(_)));let I=(O,R,A)=>{if(O==null)return;if(X6(R.deserializeAndSanitize(O))===void 0)throw new Error("Invalid value ".concat(i6(O)," for object.props").concat(A.map(V=>"[".concat(JSON.stringify(V),"]")).join("")," is invalid"));let N=B(F({},b.address),{pathToProp:A}),L=eh(S,A);if(typeof L=="string"){let V=b.sheet.getSequence();V.position=V.closestGridPosition(V.position),a.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(B(F({},N),{trackId:L,position:V.position,value:O,snappingFunction:V.closestGridPosition,type:"bezier"}))}else a.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(B(F({},N),{value:O}))};if(C.type==="compound"){let O=(0,EO.getPointerParts)(d).path,R=O.length;Jfe(C,O,(A,N)=>{let L=N.slice(R),V=bf(g,L);if(typeof V<"u")I(V,A,N);else throw new Error("Property object.props".concat(N.map(G=>"[".concat(JSON.stringify(G),"]")).join("")," is required but not provided"))})}else{if(C.type==="enum")throw new Error("Enums aren't implemented yet");I(g,C,_)}}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},unset:d=>{s();let{root:f,path:g}=(0,EO.getPointerParts)(d);if(Et(f)){let b=f.template.getMapOfValidSequenceTracks_forStudio().getValue(),_=bf(f.template.getDefaultValues().getValue(),g),S=ER(f.template.staticConfig,g),C=(I,O)=>{let R=B(F({},f.address),{pathToProp:O}),A=eh(b,O);typeof A=="string"?a.coreByProject.historic.sheetsById.sequence.unsetKeyframeAtPosition(B(F({},R),{trackId:A,position:f.sheet.getSequence().positionSnappedToGrid})):S!==void 0&&a.coreByProject.historic.sheetsById.staticOverrides.byObject.unsetValueOfPrimitiveProp(R)};S.type==="compound"?st(_,(I,O)=>{C(I,O)},(0,EO.getPointerParts)(d).path):C(_,g)}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},get drafts(){return s(),l},get stateEditors(){return a}}}var G3e=class{constructor(){pe(this,"_reduxStore"),pe(this,"_atom"),pe(this,"atomP"),this._reduxStore=z3e({rootReducer:S3e,devtoolsOptions:{name:"Theatre.js Studio"}}),this._atom=N3e(this._reduxStore),this.atomP=this._atom.pointer}initialize(s){let a=$6();return s.usePersistentStorage===!0?V3e(this._reduxStore,()=>{this.tempTransaction(({drafts:l})=>{l.ephemeral.initialised=!0}).commit(),a.resolve()},s.persistenceKey):(this.tempTransaction(({drafts:l})=>{l.ephemeral.initialised=!0}).commit(),a.resolve()),a.promise}getState(){return this._reduxStore.getState()}__experimental_clearPersistentStorage(s){return j3e(this._reduxStore,s),this.getState()}__dev_startHistoryFromScratch(s){this._reduxStore.dispatch(f_.historic.startHistoryFromScratch(f_.reduceParts(a=>B(F({},a),{historic:s}))))}tempTransaction(s){let a=x3e(),l,d=a.push(f_.reduceParts(f=>{let g={historic:j6(f.historic),ahistoric:j6(f.ahistoric),ephemeral:j6(f.ephemeral)},b=!0,_=()=>{if(!b)throw new Error("You seem to have called the transaction api after studio.transaction() has finished running")},S=Xfe(g),C=H3e(_,S,g);try{return s(C),b=!1,{historic:H6(g.historic),ahistoric:H6(g.ahistoric),ephemeral:H6(g.ephemeral)}}catch(I){return l=I,f}finally{Xfe(void 0)}}));if(this._reduxStore.dispatch(d),l)throw this._reduxStore.dispatch(a.discard()),l;return{commit:()=>{this._reduxStore.dispatch(a.commit())},discard:()=>{this._reduxStore.dispatch(a.discard())}}}undo(){this._reduxStore.dispatch(f_.historic.undo())}redo(){this._reduxStore.dispatch(f_.historic.redo())}createContentOfSaveFile(s){if(!this._reduxStore.getState().$persistent.historic.innerState.coreByProject[s])throw new Error("Project ".concat(s," has not been initialized."));let a=ine();this.tempTransaction(({stateEditors:d})=>{d.coreByProject.historic.revisionHistory.add({projectId:s,revision:a})}).commit();let l=this._reduxStore.getState().$persistent.historic.innerState.coreByProject[s];return F({},l)}},W3e=Nt,q6=class{constructor(){pe(this,"_values",{})}get(s,a){if(this.has(s))return this._values[s];{let l=a();return this._values[s]=l,l}}has(s){return this._values.hasOwnProperty(s)}};Jt(),pf(),Te(),di(),e6();var $3e=class{constructor(s){pe(this,"ui",{hide(){ue().ui.hide()},get isHidden(){return ue().ui.isHidden},restore(){ue().ui.restore()},renderToolset(a,l){return ue().ui.renderToolset(a,l)}}),pe(this,"_cache",new q6),pe(this,"__experimental",{__experimental_disblePlayPauseKeyboardShortcut(){ZDe()},__experimental_enablePlayPauseKeyboardShortcut(){QDe()},__experimental_clearPersistentStorage(a){return ue().clearPersistentStorage(a)},__experimental_createContentOfSaveFileTyped(a){return ue().createContentOfSaveFile(a)}})}initialize(s){return ue().initialize(s)}extend(s,a){ue().extend(s,a)}transaction(s){return ue().transaction(({set:a,unset:l,stateEditors:d})=>s({set:a,unset:l,__experimental_forgetObject:f=>{if(!gn(f))throw new Error("object in transactionApi.__experimental_forgetObject(object) must be the return type of sheet.object(...)");d.coreByProject.historic.sheetsById.forgetObject(f.address)},__experimental_forgetSheet:f=>{if(!Zt(f))throw new Error("sheet in transactionApi.__experimental_forgetSheet(sheet) must be the return type of project.sheet()");d.coreByProject.historic.sheetsById.forgetSheet(f.address)}}))}_getSelectionPrism(){return this._cache.get("_getSelectionPrism()",()=>(0,W3e.prism)(()=>hf().filter(s=>s.type==="Theatre_SheetObject"||s.type==="Theatre_Sheet").map(s=>s.publicApi)))}_getSelection(){return this._getSelectionPrism().getValue()}setSelection(s){let a=[...s].filter(l=>gn(l)||Zt(l)).map(l=>ue().corePrivateAPI(l));ue().transaction(({stateEditors:l})=>{l.studio.historic.panels.outline.selection.set(a)})}onSelectionChange(s){let a=ue();return this._getSelectionPrism().onChange(a.ticker,s,!0)}get selection(){return this._getSelection()}scrub(){return ue().scrub()}getStudioProject(){let s=ue().core;if(!s)throw new Error("You're calling studio.getStudioProject() before `@theatre/core` is loaded. To fix this:\n1. Check if `@theatre/core` is import/required in your bundle.\n2. Check the stack trace of this error and make sure the funciton that calls getStudioProject() is run after `@theatre/core` is loaded.");return ue().getStudioProject(s)}debouncedScrub(s=1e3){let a,l=Jy(()=>{let d=a;d&&(a=void 0,d.commit())},s);return{capture:d=>{a||(a=this.scrub());let f=!0;try{a.capture(d),f=!1}finally{if(f){let g=a;a=void 0,g.discard()}else l()}}}}createPane(s){return ue().paneManager.createPane(s)}destroyPane(s){return ue().paneManager.destroyPane(s)}createContentOfSaveFile(s){return ue().createContentOfSaveFile(s)}};Xee();var Fv=Nt,K3e=class{constructor(s){this._studio=s,pe(this,"_cache",new q6),this._instantiatePanesAsTheyComeIn()}_instantiatePanesAsTheyComeIn(){let s=this._getAllPanes();s.onStale(()=>{s.getValue()})}_getAllPanes(){return this._cache.get("_getAllPanels()",()=>(0,Fv.prism)(()=>{if(!(0,Fv.val)(this._studio.coreP))return{};let s=(0,Fv.val)(this._studio.atomP.historic.panelInstanceDesceriptors),a=(0,Fv.val)(this._studio.atomP.ephemeral.extensions.paneClasses),l={};for(let d of Object.values(s)){if(!d)continue;let f=a[d.paneClass];if(!f)continue;let{instanceId:g}=d,{extensionId:b,classDefinition:_}=f,S=Fv.prism.memo("instance-".concat(d.instanceId),()=>({extensionId:b,instanceId:g,definition:_}),[_]);l[g]=S}return l}))}get allPanesD(){return this._getAllPanes()}createPane(s){if(!this._studio.core)throw new Error("Can't create a pane because @theatre/core is not yet loaded");let a=(0,Fv.val)(this._studio.atomP.ephemeral.extensions.paneClasses[s].extensionId),l=(0,Fv.val)(this._studio.atomP.historic.panelInstanceDesceriptors),d;for(let f=1;f<1e3&&(d="".concat(s," #").concat(f),!!l[d]);f++);if(!a)throw new Error('Pane class "'.concat(s,'" is not registered.'));return this._studio.transaction(({drafts:f})=>{f.historic.panelInstanceDesceriptors[d]={instanceId:d,paneClass:s}}),this._getAllPanes().getValue()[d]}destroyPane(s){if(!this._studio.core)throw new Error("Can't do this yet because @theatre/core is not yet loaded");this._studio.transaction(({drafts:a})=>{delete a.historic.panelInstanceDesceriptors[s]})}},CO=Nt;Te();var eme=30*60*1e3,X3e=1e3*60*60;function q3e(){return ne(this,null,function*(){let s=ue().atomP.ahistoric.visibilityState;if((0,CO.val)(s)==="everythingIsVisible")return;let a=$6(),l=(0,CO.pointerToPrism)(s).onStale(()=>{(0,CO.val)(s)==="everythingIsVisible"&&(l(),a.resolve(void 0))});return a.promise})}function Y3e(){return ne(this,null,function*(){if(!"0.7.0".match(/COMPAT/))for(yield PO(500),yield q3e();;){let s=(0,CO.val)(ue().atomP.ahistoric.updateChecker);if(s&&s.result!=="error"){let a=s.lastChecked,l=Date.now(),d=Math.abs(l-a);d<eme&&(yield PO(eme-d))}try{let a=yield fetch(new Request("https://updates.theatrejs.com/updates/0.7.0"));if(a.ok){let l=yield a.json();if(!Z3e(l))throw new Error("Bad response");ue().transaction(({drafts:d})=>{d.ahistoric.updateChecker={lastChecked:Date.now(),result:F({},l)}}),yield PO(1e3)}else throw new Error("HTTP Error ".concat(a.statusText))}catch{yield PO(X3e)}}})}var PO=s=>new Promise(a=>setTimeout(a,s));function Z3e(s){if(typeof s!="object")return!1;let a=s;return typeof a.hasUpdates!="boolean"?!1:a.hasUpdates===!0&&typeof a.newVersion=="string"&&typeof a.releasePage=="string"||a.hasUpdates===!1}var Q3e=X(BS());function Dh(s){return new Promise((a,l)=>{s.oncomplete=s.onsuccess=()=>a(s.result),s.onabort=s.onerror=()=>l(s.error)})}function tme(s,a){let l=indexedDB.open(s);l.onupgradeneeded=()=>l.result.createObjectStore(a);let d=Dh(l);return(f,g)=>d.then(b=>g(b.transaction(a,f).objectStore(a)))}var Y6;function v_(){return Y6||(Y6=tme("keyval-store","keyval")),Y6}function J3e(s,a=v_()){return a("readonly",l=>Dh(l.get(s)))}function eLe(s,a,l=v_()){return l("readwrite",d=>(d.put(a,s),Dh(d.transaction)))}function tLe(s,a=v_()){return a("readwrite",l=>(l.delete(s),Dh(l.transaction)))}function Z6(s,a){return s.openCursor().onsuccess=function(){this.result&&(a(this.result),this.result.continue())},Dh(s.transaction)}function nLe(s=v_()){return s("readonly",a=>{if(a.getAllKeys)return Dh(a.getAllKeys());let l=[];return Z6(a,d=>l.push(d.key)).then(()=>l)})}function rLe(s=v_()){return s("readonly",a=>{if(a.getAll)return Dh(a.getAll());let l=[];return Z6(a,d=>l.push(d.value)).then(()=>l)})}function iLe(s=v_()){return s("readonly",a=>{if(a.getAll&&a.getAllKeys)return Promise.all([Dh(a.getAllKeys()),Dh(a.getAll())]).then(([d,f])=>d.map((g,b)=>[g,f[b]]));let l=[];return s("readonly",d=>Z6(d,f=>l.push([f.key,f.value])).then(()=>l))})}var sLe=s=>{let a=tme("theatrejs-".concat(s),"default-store");return{set:(l,d)=>eLe(l,d,a),get:l=>J3e(l,a),del:l=>tLe(l,a),keys:()=>nLe(a),entries:()=>iLe(a),values:()=>rLe(a)}};kre(),ZE();var nme="theatre-0.4",oLe=`You seem to have imported '@theatre/studio' but haven't initialized it. You can initialize the studio by:
\`\`\`
import studio from '@theatre/studio'
studio.initialize()
\`\`\`

* If you didn't mean to import '@theatre/studio', this means that your bundler is not tree-shaking it. This is most likely a bundler misconfiguration.

* If you meant to import '@theatre/studio' without showing its UI, you can do that by running:

\`\`\`
import studio from '@theatre/studio'
studio.initialize()
studio.ui.hide()
\`\`\`
`,aLe="You seem to have imported '@theatre/studio' but called `studio.initialize()` after some delay.\nTheatre.js projects remain in pending mode (won't play their sequences) until the studio is initialized, so you should place the `studio.initialize()` line right after the import line:\n\n```\nimport studio from '@theatre/studio'\n// ... and other imports\n\nstudio.initialize()\n```\n",lLe=class{constructor(){pe(this,"ui"),pe(this,"publicApi"),pe(this,"address"),pe(this,"_projectsProxy",new fO.PointerProxy(new fO.Atom({}).pointer)),pe(this,"projectsP",this._projectsProxy.pointer),pe(this,"_store",new G3e),pe(this,"_corePrivateApi"),pe(this,"_cache",new q6),pe(this,"paneManager"),pe(this,"_coreAtom",new fO.Atom({})),pe(this,"_initializedDeferred",$6()),pe(this,"_initializeFnCalled",!1),pe(this,"_didWarnAboutNotInitializing",!1),pe(this,"_coreBits"),pe(this,"_rafDriver"),this.address={studioId:BE(10)},this.publicApi=new $3e(this),this.ui=new t3e(this),this._attachToIncomingProjects(),this.paneManager=new K3e(this),typeof window<"u"&&setTimeout(()=>{this._initializeFnCalled||(console.error(oLe),this._didWarnAboutNotInitializing=!0)},100)}get ticker(){if(!this._rafDriver)throw new Error("`studio.ticker` was read before studio.initialize() was called.");return this._rafDriver.ticker}get atomP(){return this._store.atomP}initialize(s){return ne(this,null,function*(){if(!this._coreBits)throw new Error("You seem to have imported `@theatre/studio` without importing `@theatre/core`. Make sure to include an import of `@theatre/core` before calling `studio.initializer()`.");if(this._initializeFnCalled)return this._initializedDeferred.promise;this._initializeFnCalled=!0,this._didWarnAboutNotInitializing&&console.warn(aLe);let a={persistenceKey:nme,usePersistentStorage:!0};if(typeof(s==null?void 0:s.persistenceKey)=="string"&&(a.persistenceKey=s.persistenceKey),((s==null?void 0:s.usePersistentStorage)===!1||typeof window>"u")&&(a.usePersistentStorage=!1),s!=null&&s.__experimental_rafDriver){if(s.__experimental_rafDriver.type!=="Theatre_RafDriver_PublicAPI")throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` must be either be undefined, or the return type of core.createRafDriver()");let l=this._coreBits.privateAPI(s.__experimental_rafDriver);if(!l)throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` seems to come from a different version of `@theatre/core` than the version that is attached to `@theatre/studio`");this._rafDriver=l}else this._rafDriver=this._coreBits.getCoreRafDriver();try{yield this._store.initialize(a)}catch(l){this._initializedDeferred.reject(l);return}typeof window<"u"&&(yield this.ui.ready),this._initializedDeferred.resolve(),this.ui.render(),Y3e().catch(l=>{console.error(l)})})}get initialized(){return this._initializedDeferred.promise}_attachToIncomingProjects(){let s=(0,fO.pointerToPrism)(this.projectsP),a=l=>{for(let d of Object.values(l))d.isAttachedToStudio||d.attachToStudio(this)};s.onStale(()=>{a(s.getValue())}),a(s.getValue())}setCoreBits(s){this._coreBits=s,this._corePrivateApi=s.privateAPI,this._coreAtom.setByPointer(a=>a.core,s.coreExports),this._setProjectsP(s.projectsP)}_setProjectsP(s){this._projectsProxy.setPointer(s)}scrub(){return new JOe(this)}tempTransaction(s){return this._store.tempTransaction(s)}transaction(s){return this.tempTransaction(s).commit()}__dev_startHistoryFromScratch(s){return this._store.__dev_startHistoryFromScratch(s)}get corePrivateAPI(){return this._corePrivateApi}get core(){return this._coreAtom.get().core}get coreP(){return this._coreAtom.pointer.core}extend(s,a){if(!s||typeof s!="object")throw new Error("Extensions must be JS objects");if(typeof s.id!="string")throw new Error("extension.id must be a string");let l=(a==null?void 0:a.__experimental_reconfigure)===!0,d=s.id,f=this._store.getState().ephemeral.extensions.byId[d];if(f&&!l){if(s===f||(0,Q3e.default)(s,f))return;throw new Error('Extension id "'.concat(s.id,'" is already defined. If you mean to re-configure the extension, do it like this: studio.extend(extension, {__experimental_reconfigure: true})})'))}this.transaction(({drafts:g})=>{var b,_;g.ephemeral.extensions.byId[s.id]=s;let S=g.ephemeral.extensions.paneClasses;l&&f&&((b=f.panes)==null||b.forEach(C=>{delete S[C.class]})),(_=s.panes)==null||_.forEach(C=>{if(typeof C.class!="string")throw new Error("pane.class must be a string");if(C.class.length<3)throw new Error("pane.class should be a string with 3 or more characters");let I=S[C.class];if(I)if(l&&I.extensionId===s.id)console.warn('Pane class "'.concat(C.class,'" already exists. This is a bug in Theatre.js. Please report it at https://github.com/theatre-js/theatre/issues/new'));else throw new Error('Pane class "'.concat(C.class,'" already exists and is supplied by extension ').concat(I));S[C.class]={extensionId:s.id,classDefinition:C}})})}getStudioProject(s){return this._cache.get("getStudioProject",()=>s.getProject("Studio"))}getExtensionSheet(s,a){return this._cache.get("extensionSheet-"+s,()=>this.getStudioProject(a).sheet("Extension "+s))}undo(){this._store.undo()}redo(){this._store.redo()}createContentOfSaveFile(s){return this._store.createContentOfSaveFile(s)}createAssetStorage(s,a){return ne(this,null,function*(){if(typeof window>"u")return{getAssetUrl:()=>"",createAsset:()=>Promise.resolve(null)};if(!("indexedDB"in window))return console.log("This browser doesn't support IndexedDB."),{getAssetUrl:C=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")},createAsset:C=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")}};let l=sLe("".concat(s.address.projectId,"-assets")),d=lV(s),f=yield l.keys();yield Promise.all(f.map(C=>ne(this,null,function*(){d.includes(C)||(yield l.del(C))}))),yield Promise.all(f.map(C=>ne(this,null,function*(){var I,O;let R="".concat(a,"/").concat(C);try{(yield fetch(R,{method:"HEAD"})).ok&&(yield l.del(C))}catch{YE.error("Failed to access assets","Failed to access assets at ".concat((O=(I=s.config.assets)==null?void 0:I.baseUrl)!=null?O:"/",". This is likely due to a CORS issue."))}})));let g=new Map(yield l.entries()),b=new Map,_=C=>{if(b.has(C))return b.get(C);{let I=URL.createObjectURL(C);return b.set(C,I),I}},S=C=>{let I=g.get(C);if(!I)throw new Error("Asset with id ".concat(C," not found"));return _(I)};return{getAssetUrl:C=>g.has(C)?S(C):"".concat(a,"/").concat(C),createAsset:C=>ne(this,null,function*(){var I,O,R;let A=lV(s),N=!1;if(A.includes(C.name)){let L;try{L=(I=g.get(C.name))!=null?I:yield fetch("".concat(a,"/").concat(C.name)).then(V=>V.ok?V.blob():void 0)}catch{return YE.error("Failed to access assets","Failed to access assets at ".concat((R=(O=s.config.assets)==null?void 0:O.baseUrl)!=null?R:"/",". This is likely due to a CORS issue.")),Promise.resolve(null)}if(L){if(N=yield(yield Promise.resolve().then(()=>X(ZOe()))).default.isEqual(C,L),N)return C.name;{let V=G=>{let $=prompt(G,C.name);return $===null?!1:$===""?V("Asset name cannot be empty. Please choose a different file name for this asset."):A.includes($)?(console.log(A),V("An asset with this name already exists. Please choose a different file name for this asset.")):(C=new File([C],$,{type:C.type}),!0)};if(!V("An asset with this name already exists. Please choose a different file name for this asset."))return null}}}return g.set(C.name,C),yield l.set(C.name,C),C.name})}})}clearPersistentStorage(s=nme){this._store.__experimental_clearPersistentStorage(s)}},Q6="__TheatreJS_StudioBundle",uLe="__TheatreJS_CoreBundle",cLe="__TheatreJS_Notifications",dLe=class{constructor(s){this._studio=s,pe(this,"_coreBundle")}get type(){return"Theatre_StudioBundle"}registerCoreBundle(s){if(this._coreBundle)throw new Error("StudioBundle.coreBundle is already registered. This is a bug.");this._coreBundle=s;let a;s.getBitsForStudio(this._studio,l=>{a=l}),this._studio.setCoreBits(a)}},hLe=X(Ne());Ve();var rme,pLe=le.div(rme||(rme=J([""]))),fLe=s=>hLe.default.createElement(pLe,null),mLe=fLe;ZE();var J6=new lLe;wt(J6);var gLe=J6.publicApi,vLe=gLe;yLe();function yLe(){if(typeof window>"u")return;let s=window[Q6];if(typeof s<"u")throw typeof s=="object"&&s&&typeof s.version=="string"?new Error(`It seems that the module '@theatre/studio' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/studio' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(Q6," seems to be already set by a module other than @theatre/core."));let a=new dLe(J6);window[Q6]=a;let l=window[uLe];l&&l!==null&&l.type==="Theatre_CoreBundle"&&a.registerCoreBundle(l)}typeof window<"u"&&(window[cLe]={notify:YE});/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)

	queue-microtask/index.js:
	  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

	react/cjs/react.production.min.js:
	  (**
	   * @license React
	   * react.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	scheduler/cjs/scheduler.production.min.js:
	  (**
	   * @license React
	   * scheduler.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-dom/cjs/react-dom.production.min.js:
	  (**
	   * @license React
	   * react-dom.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v17.0.2
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v16.13.1
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	jszip/dist/jszip.min.js:
	  (*!
	  
	  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	  <http://stuartk.com/jszip>
	  
	  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
	  
	  JSZip uses the library pako released under the MIT license :
	  https://github.com/nodeca/pako/blob/main/LICENSE
	  *)

	jiff/lib/lcs.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/array.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointerParse.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointer.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/clone.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPatch.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/jiff.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)
	*/})(RN,RN.exports);var BUe=RN.exports;const vw=f1e(BUe);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const lM="161",W_={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},$_={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},UUe=0,J0e=1,zUe=2,kSe=1,VUe=2,Qh=3,Rd=0,Rs=1,Ca=2,xu=0,M0=1,EW=2,CW=3,PW=4,ASe=5,Mm=100,ISe=101,RSe=102,TW=103,MW=104,m7=200,g7=201,v7=202,y7=203,AT=204,IT=205,b7=206,_7=207,w7=208,x7=209,DSe=210,S7=211,E7=212,C7=213,P7=214,jUe=0,HUe=1,GUe=2,DN=3,WUe=4,$Ue=5,KUe=6,XUe=7,MF=0,qUe=1,YUe=2,jm=0,ZUe=1,QUe=2,JUe=3,e5e=4,t5e=5,n5e=6,eye="attached",r5e="detached",OSe=300,o1=301,a1=302,ON=303,kW=304,kF=306,bp=1e3,_l=1001,AW=1002,To=1003,tye=1004,SP=1005,ro=1006,oG=1007,S0=1008,Sl=1009,i5e=1010,s5e=1011,T7=1012,LSe=1013,ip=1014,Pd=1015,RT=1016,NSe=1017,FSe=1018,Hm=1020,o5e=1021,mu=1023,a5e=1024,l5e=1025,k0=1026,U0=1027,u5e=1028,BSe=1029,c5e=1030,USe=1031,zSe=1033,aG=33776,lG=33777,uG=33778,cG=33779,nye=35840,rye=35841,iye=35842,sye=35843,VSe=36196,oye=37492,aye=37496,lye=37808,uye=37809,cye=37810,dye=37811,hye=37812,pye=37813,fye=37814,mye=37815,gye=37816,vye=37817,yye=37818,bye=37819,_ye=37820,wye=37821,dG=36492,xye=36494,Sye=36495,d5e=36283,Eye=36284,Cye=36285,Pye=36286,h5e=2200,p5e=2201,f5e=2202,LN=2300,NN=2301,hG=2302,Rw=2400,Dw=2401,FN=2402,M7=2500,m5e=2501,AF=3e3,dp=3001,uM=3200,g5e=3201,y1=0,v5e=1,gu="",is="srgb",_p="srgb-linear",k7="display-p3",IF="display-p3-linear",BN="linear",Ti="srgb",UN="rec709",zN="p3",K_=7680,Tye=519,y5e=512,b5e=513,_5e=514,jSe=515,w5e=516,x5e=517,S5e=518,E5e=519,Mye=35044,IW="300 es",RW=1035,sp=2e3,VN=2001;class Al{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,u=i.length;o<u;o++)i[o].call(this,e);e.target=null}}}const Ko=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let kye=1234567;const iT=Math.PI/180,l1=180/Math.PI;function ig(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ko[t&255]+Ko[t>>8&255]+Ko[t>>16&255]+Ko[t>>24&255]+"-"+Ko[e&255]+Ko[e>>8&255]+"-"+Ko[e>>16&15|64]+Ko[e>>24&255]+"-"+Ko[n&63|128]+Ko[n>>8&255]+"-"+Ko[n>>16&255]+Ko[n>>24&255]+Ko[r&255]+Ko[r>>8&255]+Ko[r>>16&255]+Ko[r>>24&255]).toLowerCase()}function Vs(t,e,n){return Math.max(e,Math.min(n,t))}function A7(t,e){return(t%e+e)%e}function C5e(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function P5e(t,e,n){return t!==e?(n-t)/(e-t):0}function sT(t,e,n){return(1-n)*t+n*e}function T5e(t,e,n,r){return sT(t,e,1-Math.exp(-n*r))}function M5e(t,e=1){return e-Math.abs(A7(t,e*2)-e)}function k5e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function A5e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function I5e(t,e){return t+Math.floor(Math.random()*(e-t+1))}function R5e(t,e){return t+Math.random()*(e-t)}function D5e(t){return t*(.5-Math.random())}function O5e(t){t!==void 0&&(kye=t);let e=kye+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function L5e(t){return t*iT}function N5e(t){return t*l1}function DW(t){return(t&t-1)===0&&t!==0}function F5e(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function jN(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function B5e(t,e,n,r,i){const o=Math.cos,u=Math.sin,h=o(n/2),m=u(n/2),v=o((e+r)/2),x=u((e+r)/2),E=o((e-r)/2),M=u((e-r)/2),D=o((r-e)/2),H=u((r-e)/2);switch(i){case"XYX":t.set(h*x,m*E,m*M,h*v);break;case"YZY":t.set(m*M,h*x,m*E,h*v);break;case"ZXZ":t.set(m*E,m*M,h*x,h*v);break;case"XZX":t.set(h*x,m*H,m*D,h*v);break;case"YXY":t.set(m*D,h*x,m*H,h*v);break;case"ZYZ":t.set(m*H,m*D,h*x,h*v);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function yw(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ba(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const Qo={DEG2RAD:iT,RAD2DEG:l1,generateUUID:ig,clamp:Vs,euclideanModulo:A7,mapLinear:C5e,inverseLerp:P5e,lerp:sT,damp:T5e,pingpong:M5e,smoothstep:k5e,smootherstep:A5e,randInt:I5e,randFloat:R5e,randFloatSpread:D5e,seededRandom:O5e,degToRad:L5e,radToDeg:N5e,isPowerOfTwo:DW,ceilPowerOfTwo:F5e,floorPowerOfTwo:jN,setQuaternionFromProperEuler:B5e,normalize:ba,denormalize:yw};class an{constructor(e=0,n=0){an.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Vs(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,u=this.y-e.y;return this.x=o*r-u*i+e.x,this.y=o*i+u*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class pr{constructor(e,n,r,i,o,u,h,m,v){pr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,u,h,m,v)}set(e,n,r,i,o,u,h,m,v){const x=this.elements;return x[0]=e,x[1]=i,x[2]=h,x[3]=n,x[4]=o,x[5]=m,x[6]=r,x[7]=u,x[8]=v,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,u=r[0],h=r[3],m=r[6],v=r[1],x=r[4],E=r[7],M=r[2],D=r[5],H=r[8],F=i[0],B=i[3],z=i[6],P=i[1],W=i[4],Z=i[7],ve=i[2],X=i[5],se=i[8];return o[0]=u*F+h*P+m*ve,o[3]=u*B+h*W+m*X,o[6]=u*z+h*Z+m*se,o[1]=v*F+x*P+E*ve,o[4]=v*B+x*W+E*X,o[7]=v*z+x*Z+E*se,o[2]=M*F+D*P+H*ve,o[5]=M*B+D*W+H*X,o[8]=M*z+D*Z+H*se,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],h=e[5],m=e[6],v=e[7],x=e[8];return n*u*x-n*h*v-r*o*x+r*h*m+i*o*v-i*u*m}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],h=e[5],m=e[6],v=e[7],x=e[8],E=x*u-h*v,M=h*m-x*o,D=v*o-u*m,H=n*E+r*M+i*D;if(H===0)return this.set(0,0,0,0,0,0,0,0,0);const F=1/H;return e[0]=E*F,e[1]=(i*v-x*r)*F,e[2]=(h*r-i*u)*F,e[3]=M*F,e[4]=(x*n-i*m)*F,e[5]=(i*o-h*n)*F,e[6]=D*F,e[7]=(r*m-v*n)*F,e[8]=(u*n-r*o)*F,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,u,h){const m=Math.cos(o),v=Math.sin(o);return this.set(r*m,r*v,-r*(m*u+v*h)+u+e,-i*v,i*m,-i*(-v*u+m*h)+h+n,0,0,1),this}scale(e,n){return this.premultiply(pG.makeScale(e,n)),this}rotate(e){return this.premultiply(pG.makeRotation(-e)),this}translate(e,n){return this.premultiply(pG.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const pG=new pr;function HSe(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function DT(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function U5e(){const t=DT("canvas");return t.style.display="block",t}const Aye={};function Kw(t){t in Aye||(Aye[t]=!0,console.warn(t))}const Iye=new pr().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Rye=new pr().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),eL={[_p]:{transfer:BN,primaries:UN,toReference:t=>t,fromReference:t=>t},[is]:{transfer:Ti,primaries:UN,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[IF]:{transfer:BN,primaries:zN,toReference:t=>t.applyMatrix3(Rye),fromReference:t=>t.applyMatrix3(Iye)},[k7]:{transfer:Ti,primaries:zN,toReference:t=>t.convertSRGBToLinear().applyMatrix3(Rye),fromReference:t=>t.applyMatrix3(Iye).convertLinearToSRGB()}},z5e=new Set([_p,IF]),li={enabled:!0,_workingColorSpace:_p,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!z5e.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=eL[e].toReference,i=eL[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return eL[t].primaries},getTransfer:function(t){return t===gu?BN:eL[t].transfer}};function Xw(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function fG(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let X_;class GSe{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{X_===void 0&&(X_=DT("canvas")),X_.width=e.width,X_.height=e.height;const r=X_.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=X_}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=DT("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let u=0;u<o.length;u++)o[u]=Xw(o[u]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Xw(n[r]/255)*255):n[r]=Xw(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let V5e=0;class WSe{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:V5e++}),this.uuid=ig(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let u=0,h=i.length;u<h;u++)i[u].isDataTexture?o.push(mG(i[u].image)):o.push(mG(i[u]))}else o=mG(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function mG(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?GSe.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let j5e=0;class Yi extends Al{constructor(e=Yi.DEFAULT_IMAGE,n=Yi.DEFAULT_MAPPING,r=_l,i=_l,o=ro,u=S0,h=mu,m=Sl,v=Yi.DEFAULT_ANISOTROPY,x=gu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:j5e++}),this.uuid=ig(),this.name="",this.source=new WSe(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=u,this.anisotropy=v,this.format=h,this.internalFormat=null,this.type=m,this.offset=new an(0,0),this.repeat=new an(1,1),this.center=new an(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new pr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof x=="string"?this.colorSpace=x:(Kw("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=x===dp?is:gu),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==OSe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case bp:e.x=e.x-Math.floor(e.x);break;case _l:e.x=e.x<0?0:1;break;case AW:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case bp:e.y=e.y-Math.floor(e.y);break;case _l:e.y=e.y<0?0:1;break;case AW:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Kw("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===is?dp:AF}set encoding(e){Kw("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===dp?is:gu}}Yi.DEFAULT_IMAGE=null;Yi.DEFAULT_MAPPING=OSe;Yi.DEFAULT_ANISOTROPY=1;class Ar{constructor(e=0,n=0,r=0,i=1){Ar.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,u=e.elements;return this.x=u[0]*n+u[4]*r+u[8]*i+u[12]*o,this.y=u[1]*n+u[5]*r+u[9]*i+u[13]*o,this.z=u[2]*n+u[6]*r+u[10]*i+u[14]*o,this.w=u[3]*n+u[7]*r+u[11]*i+u[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const m=e.elements,v=m[0],x=m[4],E=m[8],M=m[1],D=m[5],H=m[9],F=m[2],B=m[6],z=m[10];if(Math.abs(x-M)<.01&&Math.abs(E-F)<.01&&Math.abs(H-B)<.01){if(Math.abs(x+M)<.1&&Math.abs(E+F)<.1&&Math.abs(H+B)<.1&&Math.abs(v+D+z-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const W=(v+1)/2,Z=(D+1)/2,ve=(z+1)/2,X=(x+M)/4,se=(E+F)/4,pe=(H+B)/4;return W>Z&&W>ve?W<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(W),i=X/r,o=se/r):Z>ve?Z<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(Z),r=X/i,o=pe/i):ve<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(ve),r=se/o,i=pe/o),this.set(r,i,o,n),this}let P=Math.sqrt((B-H)*(B-H)+(E-F)*(E-F)+(M-x)*(M-x));return Math.abs(P)<.001&&(P=1),this.x=(B-H)/P,this.y=(E-F)/P,this.z=(M-x)/P,this.w=Math.acos((v+D+z-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class H5e extends Al{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Ar(0,0,e,n),this.scissorTest=!1,this.viewport=new Ar(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(Kw("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===dp?is:gu),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ro,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new Yi(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new WSe(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Pl extends H5e{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class $Se extends Yi{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=To,this.minFilter=To,this.wrapR=_l,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class G5e extends Yi{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=To,this.minFilter=To,this.wrapR=_l,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class As{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,u,h){let m=r[i+0],v=r[i+1],x=r[i+2],E=r[i+3];const M=o[u+0],D=o[u+1],H=o[u+2],F=o[u+3];if(h===0){e[n+0]=m,e[n+1]=v,e[n+2]=x,e[n+3]=E;return}if(h===1){e[n+0]=M,e[n+1]=D,e[n+2]=H,e[n+3]=F;return}if(E!==F||m!==M||v!==D||x!==H){let B=1-h;const z=m*M+v*D+x*H+E*F,P=z>=0?1:-1,W=1-z*z;if(W>Number.EPSILON){const ve=Math.sqrt(W),X=Math.atan2(ve,z*P);B=Math.sin(B*X)/ve,h=Math.sin(h*X)/ve}const Z=h*P;if(m=m*B+M*Z,v=v*B+D*Z,x=x*B+H*Z,E=E*B+F*Z,B===1-h){const ve=1/Math.sqrt(m*m+v*v+x*x+E*E);m*=ve,v*=ve,x*=ve,E*=ve}}e[n]=m,e[n+1]=v,e[n+2]=x,e[n+3]=E}static multiplyQuaternionsFlat(e,n,r,i,o,u){const h=r[i],m=r[i+1],v=r[i+2],x=r[i+3],E=o[u],M=o[u+1],D=o[u+2],H=o[u+3];return e[n]=h*H+x*E+m*D-v*M,e[n+1]=m*H+x*M+v*E-h*D,e[n+2]=v*H+x*D+h*M-m*E,e[n+3]=x*H-h*E-m*M-v*D,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,o=e._z,u=e._order,h=Math.cos,m=Math.sin,v=h(r/2),x=h(i/2),E=h(o/2),M=m(r/2),D=m(i/2),H=m(o/2);switch(u){case"XYZ":this._x=M*x*E+v*D*H,this._y=v*D*E-M*x*H,this._z=v*x*H+M*D*E,this._w=v*x*E-M*D*H;break;case"YXZ":this._x=M*x*E+v*D*H,this._y=v*D*E-M*x*H,this._z=v*x*H-M*D*E,this._w=v*x*E+M*D*H;break;case"ZXY":this._x=M*x*E-v*D*H,this._y=v*D*E+M*x*H,this._z=v*x*H+M*D*E,this._w=v*x*E-M*D*H;break;case"ZYX":this._x=M*x*E-v*D*H,this._y=v*D*E+M*x*H,this._z=v*x*H-M*D*E,this._w=v*x*E+M*D*H;break;case"YZX":this._x=M*x*E+v*D*H,this._y=v*D*E+M*x*H,this._z=v*x*H-M*D*E,this._w=v*x*E-M*D*H;break;case"XZY":this._x=M*x*E-v*D*H,this._y=v*D*E-M*x*H,this._z=v*x*H+M*D*E,this._w=v*x*E+M*D*H;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],u=n[1],h=n[5],m=n[9],v=n[2],x=n[6],E=n[10],M=r+h+E;if(M>0){const D=.5/Math.sqrt(M+1);this._w=.25/D,this._x=(x-m)*D,this._y=(o-v)*D,this._z=(u-i)*D}else if(r>h&&r>E){const D=2*Math.sqrt(1+r-h-E);this._w=(x-m)/D,this._x=.25*D,this._y=(i+u)/D,this._z=(o+v)/D}else if(h>E){const D=2*Math.sqrt(1+h-r-E);this._w=(o-v)/D,this._x=(i+u)/D,this._y=.25*D,this._z=(m+x)/D}else{const D=2*Math.sqrt(1+E-r-h);this._w=(u-i)/D,this._x=(o+v)/D,this._y=(m+x)/D,this._z=.25*D}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vs(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,u=e._w,h=n._x,m=n._y,v=n._z,x=n._w;return this._x=r*x+u*h+i*v-o*m,this._y=i*x+u*m+o*h-r*v,this._z=o*x+u*v+r*m-i*h,this._w=u*x-r*h-i*m-o*v,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,u=this._w;let h=u*e._w+r*e._x+i*e._y+o*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=u,this._x=r,this._y=i,this._z=o,this;const m=1-h*h;if(m<=Number.EPSILON){const D=1-n;return this._w=D*u+n*this._w,this._x=D*r+n*this._x,this._y=D*i+n*this._y,this._z=D*o+n*this._z,this.normalize(),this}const v=Math.sqrt(m),x=Math.atan2(v,h),E=Math.sin((1-n)*x)/v,M=Math.sin(n*x)/v;return this._w=u*E+this._w*M,this._x=r*E+this._x*M,this._y=i*E+this._y*M,this._z=o*E+this._z*M,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(o),r*Math.cos(o),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Fe{constructor(e=0,n=0,r=0){Fe.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(Dye.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(Dye.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,u=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*u,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*u,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*u,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,u=e.y,h=e.z,m=e.w,v=2*(u*i-h*r),x=2*(h*n-o*i),E=2*(o*r-u*n);return this.x=n+m*v+u*E-h*x,this.y=r+m*x+h*v-o*E,this.z=i+m*E+o*x-u*v,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,u=n.x,h=n.y,m=n.z;return this.x=i*m-o*h,this.y=o*u-r*m,this.z=r*h-i*u,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return gG.copy(this).projectOnVector(e),this.sub(gG)}reflect(e){return this.sub(gG.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Vs(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const gG=new Fe,Dye=new As;class b1{constructor(e=new Fe(1/0,1/0,1/0),n=new Fe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(fc.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(fc.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=fc.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let u=0,h=o.count;u<h;u++)e.isMesh===!0?e.getVertexPosition(u,fc):fc.fromBufferAttribute(o,u),fc.applyMatrix4(e.matrixWorld),this.expandByPoint(fc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),tL.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),tL.copy(r.boundingBox)),tL.applyMatrix4(e.matrixWorld),this.union(tL)}const i=e.children;for(let o=0,u=i.length;o<u;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,fc),fc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(EP),nL.subVectors(this.max,EP),q_.subVectors(e.a,EP),Y_.subVectors(e.b,EP),Z_.subVectors(e.c,EP),sm.subVectors(Y_,q_),om.subVectors(Z_,Y_),Qv.subVectors(q_,Z_);let n=[0,-sm.z,sm.y,0,-om.z,om.y,0,-Qv.z,Qv.y,sm.z,0,-sm.x,om.z,0,-om.x,Qv.z,0,-Qv.x,-sm.y,sm.x,0,-om.y,om.x,0,-Qv.y,Qv.x,0];return!vG(n,q_,Y_,Z_,nL)||(n=[1,0,0,0,1,0,0,0,1],!vG(n,q_,Y_,Z_,nL))?!1:(rL.crossVectors(sm,om),n=[rL.x,rL.y,rL.z],vG(n,q_,Y_,Z_,nL))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,fc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(fc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(jh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),jh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),jh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),jh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),jh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),jh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),jh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),jh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(jh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const jh=[new Fe,new Fe,new Fe,new Fe,new Fe,new Fe,new Fe,new Fe],fc=new Fe,tL=new b1,q_=new Fe,Y_=new Fe,Z_=new Fe,sm=new Fe,om=new Fe,Qv=new Fe,EP=new Fe,nL=new Fe,rL=new Fe,Jv=new Fe;function vG(t,e,n,r,i){for(let o=0,u=t.length-3;o<=u;o+=3){Jv.fromArray(t,o);const h=i.x*Math.abs(Jv.x)+i.y*Math.abs(Jv.y)+i.z*Math.abs(Jv.z),m=e.dot(Jv),v=n.dot(Jv),x=r.dot(Jv);if(Math.max(-Math.max(m,v,x),Math.min(m,v,x))>h)return!1}return!0}const W5e=new b1,CP=new Fe,yG=new Fe;class Q0{constructor(e=new Fe,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):W5e.setFromPoints(e).getCenter(r);let i=0;for(let o=0,u=e.length;o<u;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;CP.subVectors(e,this.center);const n=CP.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(CP,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(yG.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(CP.copy(e.center).add(yG)),this.expandByPoint(CP.copy(e.center).sub(yG))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Hh=new Fe,bG=new Fe,iL=new Fe,am=new Fe,_G=new Fe,sL=new Fe,wG=new Fe;class _1{constructor(e=new Fe,n=new Fe(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Hh)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Hh.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Hh.copy(this.origin).addScaledVector(this.direction,n),Hh.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){bG.copy(e).add(n).multiplyScalar(.5),iL.copy(n).sub(e).normalize(),am.copy(this.origin).sub(bG);const o=e.distanceTo(n)*.5,u=-this.direction.dot(iL),h=am.dot(this.direction),m=-am.dot(iL),v=am.lengthSq(),x=Math.abs(1-u*u);let E,M,D,H;if(x>0)if(E=u*m-h,M=u*h-m,H=o*x,E>=0)if(M>=-H)if(M<=H){const F=1/x;E*=F,M*=F,D=E*(E+u*M+2*h)+M*(u*E+M+2*m)+v}else M=o,E=Math.max(0,-(u*M+h)),D=-E*E+M*(M+2*m)+v;else M=-o,E=Math.max(0,-(u*M+h)),D=-E*E+M*(M+2*m)+v;else M<=-H?(E=Math.max(0,-(-u*o+h)),M=E>0?-o:Math.min(Math.max(-o,-m),o),D=-E*E+M*(M+2*m)+v):M<=H?(E=0,M=Math.min(Math.max(-o,-m),o),D=M*(M+2*m)+v):(E=Math.max(0,-(u*o+h)),M=E>0?o:Math.min(Math.max(-o,-m),o),D=-E*E+M*(M+2*m)+v);else M=u>0?-o:o,E=Math.max(0,-(u*M+h)),D=-E*E+M*(M+2*m)+v;return r&&r.copy(this.origin).addScaledVector(this.direction,E),i&&i.copy(bG).addScaledVector(iL,M),D}intersectSphere(e,n){Hh.subVectors(e.center,this.origin);const r=Hh.dot(this.direction),i=Hh.dot(Hh)-r*r,o=e.radius*e.radius;if(i>o)return null;const u=Math.sqrt(o-i),h=r-u,m=r+u;return m<0?null:h<0?this.at(m,n):this.at(h,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,u,h,m;const v=1/this.direction.x,x=1/this.direction.y,E=1/this.direction.z,M=this.origin;return v>=0?(r=(e.min.x-M.x)*v,i=(e.max.x-M.x)*v):(r=(e.max.x-M.x)*v,i=(e.min.x-M.x)*v),x>=0?(o=(e.min.y-M.y)*x,u=(e.max.y-M.y)*x):(o=(e.max.y-M.y)*x,u=(e.min.y-M.y)*x),r>u||o>i||((o>r||isNaN(r))&&(r=o),(u<i||isNaN(i))&&(i=u),E>=0?(h=(e.min.z-M.z)*E,m=(e.max.z-M.z)*E):(h=(e.max.z-M.z)*E,m=(e.min.z-M.z)*E),r>m||h>i)||((h>r||r!==r)&&(r=h),(m<i||i!==i)&&(i=m),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Hh)!==null}intersectTriangle(e,n,r,i,o){_G.subVectors(n,e),sL.subVectors(r,e),wG.crossVectors(_G,sL);let u=this.direction.dot(wG),h;if(u>0){if(i)return null;h=1}else if(u<0)h=-1,u=-u;else return null;am.subVectors(this.origin,e);const m=h*this.direction.dot(sL.crossVectors(am,sL));if(m<0)return null;const v=h*this.direction.dot(_G.cross(am));if(v<0||m+v>u)return null;const x=-h*am.dot(wG);return x<0?null:this.at(x/u,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Fn{constructor(e,n,r,i,o,u,h,m,v,x,E,M,D,H,F,B){Fn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,u,h,m,v,x,E,M,D,H,F,B)}set(e,n,r,i,o,u,h,m,v,x,E,M,D,H,F,B){const z=this.elements;return z[0]=e,z[4]=n,z[8]=r,z[12]=i,z[1]=o,z[5]=u,z[9]=h,z[13]=m,z[2]=v,z[6]=x,z[10]=E,z[14]=M,z[3]=D,z[7]=H,z[11]=F,z[15]=B,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Fn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Q_.setFromMatrixColumn(e,0).length(),o=1/Q_.setFromMatrixColumn(e,1).length(),u=1/Q_.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*u,n[9]=r[9]*u,n[10]=r[10]*u,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,u=Math.cos(r),h=Math.sin(r),m=Math.cos(i),v=Math.sin(i),x=Math.cos(o),E=Math.sin(o);if(e.order==="XYZ"){const M=u*x,D=u*E,H=h*x,F=h*E;n[0]=m*x,n[4]=-m*E,n[8]=v,n[1]=D+H*v,n[5]=M-F*v,n[9]=-h*m,n[2]=F-M*v,n[6]=H+D*v,n[10]=u*m}else if(e.order==="YXZ"){const M=m*x,D=m*E,H=v*x,F=v*E;n[0]=M+F*h,n[4]=H*h-D,n[8]=u*v,n[1]=u*E,n[5]=u*x,n[9]=-h,n[2]=D*h-H,n[6]=F+M*h,n[10]=u*m}else if(e.order==="ZXY"){const M=m*x,D=m*E,H=v*x,F=v*E;n[0]=M-F*h,n[4]=-u*E,n[8]=H+D*h,n[1]=D+H*h,n[5]=u*x,n[9]=F-M*h,n[2]=-u*v,n[6]=h,n[10]=u*m}else if(e.order==="ZYX"){const M=u*x,D=u*E,H=h*x,F=h*E;n[0]=m*x,n[4]=H*v-D,n[8]=M*v+F,n[1]=m*E,n[5]=F*v+M,n[9]=D*v-H,n[2]=-v,n[6]=h*m,n[10]=u*m}else if(e.order==="YZX"){const M=u*m,D=u*v,H=h*m,F=h*v;n[0]=m*x,n[4]=F-M*E,n[8]=H*E+D,n[1]=E,n[5]=u*x,n[9]=-h*x,n[2]=-v*x,n[6]=D*E+H,n[10]=M-F*E}else if(e.order==="XZY"){const M=u*m,D=u*v,H=h*m,F=h*v;n[0]=m*x,n[4]=-E,n[8]=v*x,n[1]=M*E+F,n[5]=u*x,n[9]=D*E-H,n[2]=H*E-D,n[6]=h*x,n[10]=F*E+M}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose($5e,e,K5e)}lookAt(e,n,r){const i=this.elements;return vl.subVectors(e,n),vl.lengthSq()===0&&(vl.z=1),vl.normalize(),lm.crossVectors(r,vl),lm.lengthSq()===0&&(Math.abs(r.z)===1?vl.x+=1e-4:vl.z+=1e-4,vl.normalize(),lm.crossVectors(r,vl)),lm.normalize(),oL.crossVectors(vl,lm),i[0]=lm.x,i[4]=oL.x,i[8]=vl.x,i[1]=lm.y,i[5]=oL.y,i[9]=vl.y,i[2]=lm.z,i[6]=oL.z,i[10]=vl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,u=r[0],h=r[4],m=r[8],v=r[12],x=r[1],E=r[5],M=r[9],D=r[13],H=r[2],F=r[6],B=r[10],z=r[14],P=r[3],W=r[7],Z=r[11],ve=r[15],X=i[0],se=i[4],pe=i[8],J=i[12],ne=i[1],Ee=i[5],ot=i[9],wt=i[13],ue=i[2],Ye=i[6],Te=i[10],st=i[14],Be=i[3],Xe=i[7],qe=i[11],dt=i[15];return o[0]=u*X+h*ne+m*ue+v*Be,o[4]=u*se+h*Ee+m*Ye+v*Xe,o[8]=u*pe+h*ot+m*Te+v*qe,o[12]=u*J+h*wt+m*st+v*dt,o[1]=x*X+E*ne+M*ue+D*Be,o[5]=x*se+E*Ee+M*Ye+D*Xe,o[9]=x*pe+E*ot+M*Te+D*qe,o[13]=x*J+E*wt+M*st+D*dt,o[2]=H*X+F*ne+B*ue+z*Be,o[6]=H*se+F*Ee+B*Ye+z*Xe,o[10]=H*pe+F*ot+B*Te+z*qe,o[14]=H*J+F*wt+B*st+z*dt,o[3]=P*X+W*ne+Z*ue+ve*Be,o[7]=P*se+W*Ee+Z*Ye+ve*Xe,o[11]=P*pe+W*ot+Z*Te+ve*qe,o[15]=P*J+W*wt+Z*st+ve*dt,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],u=e[1],h=e[5],m=e[9],v=e[13],x=e[2],E=e[6],M=e[10],D=e[14],H=e[3],F=e[7],B=e[11],z=e[15];return H*(+o*m*E-i*v*E-o*h*M+r*v*M+i*h*D-r*m*D)+F*(+n*m*D-n*v*M+o*u*M-i*u*D+i*v*x-o*m*x)+B*(+n*v*E-n*h*D-o*u*E+r*u*D+o*h*x-r*v*x)+z*(-i*h*x-n*m*E+n*h*M+i*u*E-r*u*M+r*m*x)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],h=e[5],m=e[6],v=e[7],x=e[8],E=e[9],M=e[10],D=e[11],H=e[12],F=e[13],B=e[14],z=e[15],P=E*B*v-F*M*v+F*m*D-h*B*D-E*m*z+h*M*z,W=H*M*v-x*B*v-H*m*D+u*B*D+x*m*z-u*M*z,Z=x*F*v-H*E*v+H*h*D-u*F*D-x*h*z+u*E*z,ve=H*E*m-x*F*m-H*h*M+u*F*M+x*h*B-u*E*B,X=n*P+r*W+i*Z+o*ve;if(X===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const se=1/X;return e[0]=P*se,e[1]=(F*M*o-E*B*o-F*i*D+r*B*D+E*i*z-r*M*z)*se,e[2]=(h*B*o-F*m*o+F*i*v-r*B*v-h*i*z+r*m*z)*se,e[3]=(E*m*o-h*M*o-E*i*v+r*M*v+h*i*D-r*m*D)*se,e[4]=W*se,e[5]=(x*B*o-H*M*o+H*i*D-n*B*D-x*i*z+n*M*z)*se,e[6]=(H*m*o-u*B*o-H*i*v+n*B*v+u*i*z-n*m*z)*se,e[7]=(u*M*o-x*m*o+x*i*v-n*M*v-u*i*D+n*m*D)*se,e[8]=Z*se,e[9]=(H*E*o-x*F*o-H*r*D+n*F*D+x*r*z-n*E*z)*se,e[10]=(u*F*o-H*h*o+H*r*v-n*F*v-u*r*z+n*h*z)*se,e[11]=(x*h*o-u*E*o-x*r*v+n*E*v+u*r*D-n*h*D)*se,e[12]=ve*se,e[13]=(x*F*i-H*E*i+H*r*M-n*F*M-x*r*B+n*E*B)*se,e[14]=(H*h*i-u*F*i-H*r*m+n*F*m+u*r*B-n*h*B)*se,e[15]=(u*E*i-x*h*i+x*r*m-n*E*m-u*r*M+n*h*M)*se,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,u=e.x,h=e.y,m=e.z,v=o*u,x=o*h;return this.set(v*u+r,v*h-i*m,v*m+i*h,0,v*h+i*m,x*h+r,x*m-i*u,0,v*m-i*h,x*m+i*u,o*m*m+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,u){return this.set(1,r,o,0,e,1,u,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,u=n._y,h=n._z,m=n._w,v=o+o,x=u+u,E=h+h,M=o*v,D=o*x,H=o*E,F=u*x,B=u*E,z=h*E,P=m*v,W=m*x,Z=m*E,ve=r.x,X=r.y,se=r.z;return i[0]=(1-(F+z))*ve,i[1]=(D+Z)*ve,i[2]=(H-W)*ve,i[3]=0,i[4]=(D-Z)*X,i[5]=(1-(M+z))*X,i[6]=(B+P)*X,i[7]=0,i[8]=(H+W)*se,i[9]=(B-P)*se,i[10]=(1-(M+F))*se,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=Q_.set(i[0],i[1],i[2]).length();const u=Q_.set(i[4],i[5],i[6]).length(),h=Q_.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],mc.copy(this);const v=1/o,x=1/u,E=1/h;return mc.elements[0]*=v,mc.elements[1]*=v,mc.elements[2]*=v,mc.elements[4]*=x,mc.elements[5]*=x,mc.elements[6]*=x,mc.elements[8]*=E,mc.elements[9]*=E,mc.elements[10]*=E,n.setFromRotationMatrix(mc),r.x=o,r.y=u,r.z=h,this}makePerspective(e,n,r,i,o,u,h=sp){const m=this.elements,v=2*o/(n-e),x=2*o/(r-i),E=(n+e)/(n-e),M=(r+i)/(r-i);let D,H;if(h===sp)D=-(u+o)/(u-o),H=-2*u*o/(u-o);else if(h===VN)D=-u/(u-o),H=-u*o/(u-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return m[0]=v,m[4]=0,m[8]=E,m[12]=0,m[1]=0,m[5]=x,m[9]=M,m[13]=0,m[2]=0,m[6]=0,m[10]=D,m[14]=H,m[3]=0,m[7]=0,m[11]=-1,m[15]=0,this}makeOrthographic(e,n,r,i,o,u,h=sp){const m=this.elements,v=1/(n-e),x=1/(r-i),E=1/(u-o),M=(n+e)*v,D=(r+i)*x;let H,F;if(h===sp)H=(u+o)*E,F=-2*E;else if(h===VN)H=o*E,F=-1*E;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return m[0]=2*v,m[4]=0,m[8]=0,m[12]=-M,m[1]=0,m[5]=2*x,m[9]=0,m[13]=-D,m[2]=0,m[6]=0,m[10]=F,m[14]=-H,m[3]=0,m[7]=0,m[11]=0,m[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Q_=new Fe,mc=new Fn,$5e=new Fe(0,0,0),K5e=new Fe(1,1,1),lm=new Fe,oL=new Fe,vl=new Fe,Oye=new Fn,Lye=new As;class Ea{constructor(e=0,n=0,r=0,i=Ea.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],u=i[4],h=i[8],m=i[1],v=i[5],x=i[9],E=i[2],M=i[6],D=i[10];switch(n){case"XYZ":this._y=Math.asin(Vs(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-x,D),this._z=Math.atan2(-u,o)):(this._x=Math.atan2(M,v),this._z=0);break;case"YXZ":this._x=Math.asin(-Vs(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(h,D),this._z=Math.atan2(m,v)):(this._y=Math.atan2(-E,o),this._z=0);break;case"ZXY":this._x=Math.asin(Vs(M,-1,1)),Math.abs(M)<.9999999?(this._y=Math.atan2(-E,D),this._z=Math.atan2(-u,v)):(this._y=0,this._z=Math.atan2(m,o));break;case"ZYX":this._y=Math.asin(-Vs(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(M,D),this._z=Math.atan2(m,o)):(this._x=0,this._z=Math.atan2(-u,v));break;case"YZX":this._z=Math.asin(Vs(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-x,v),this._y=Math.atan2(-E,o)):(this._x=0,this._y=Math.atan2(h,D));break;case"XZY":this._z=Math.asin(-Vs(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(M,v),this._y=Math.atan2(h,o)):(this._x=Math.atan2(-x,D),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return Oye.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Oye,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Lye.setFromEuler(this),this.setFromQuaternion(Lye,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ea.DEFAULT_ORDER="XYZ";class I7{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let X5e=0;const Nye=new Fe,J_=new As,Gh=new Fn,aL=new Fe,PP=new Fe,q5e=new Fe,Y5e=new As,Fye=new Fe(1,0,0),Bye=new Fe(0,1,0),Uye=new Fe(0,0,1),Z5e={type:"added"},Q5e={type:"removed"};class Kr extends Al{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:X5e++}),this.uuid=ig(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Kr.DEFAULT_UP.clone();const e=new Fe,n=new Ea,r=new As,i=new Fe(1,1,1);function o(){r.setFromEuler(n,!1)}function u(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Fn},normalMatrix:{value:new pr}}),this.matrix=new Fn,this.matrixWorld=new Fn,this.matrixAutoUpdate=Kr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Kr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new I7,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return J_.setFromAxisAngle(e,n),this.quaternion.multiply(J_),this}rotateOnWorldAxis(e,n){return J_.setFromAxisAngle(e,n),this.quaternion.premultiply(J_),this}rotateX(e){return this.rotateOnAxis(Fye,e)}rotateY(e){return this.rotateOnAxis(Bye,e)}rotateZ(e){return this.rotateOnAxis(Uye,e)}translateOnAxis(e,n){return Nye.copy(e).applyQuaternion(this.quaternion),this.position.add(Nye.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Fye,e)}translateY(e){return this.translateOnAxis(Bye,e)}translateZ(e){return this.translateOnAxis(Uye,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Gh.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?aL.copy(e):aL.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),PP.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Gh.lookAt(PP,aL,this.up):Gh.lookAt(aL,PP,this.up),this.quaternion.setFromRotationMatrix(Gh),i&&(Gh.extractRotation(i.matrixWorld),J_.setFromRotationMatrix(Gh),this.quaternion.premultiply(J_.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(Z5e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Q5e)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Gh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Gh.multiply(e.parent.matrixWorld)),e.applyMatrix4(Gh),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const u=this.children[r].getObjectByProperty(e,n);if(u!==void 0)return u}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let o=0,u=i.length;o<u;o++)i[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(PP,e,q5e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(PP,Y5e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const o=n[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let o=0,u=i.length;o<u;o++){const h=i[o];h.matrixWorldAutoUpdate===!0&&h.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(h=>({boxInitialized:h.boxInitialized,boxMin:h.box.min.toArray(),boxMax:h.box.max.toArray(),sphereInitialized:h.sphereInitialized,sphereRadius:h.sphere.radius,sphereCenter:h.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(h,m){return h[m.uuid]===void 0&&(h[m.uuid]=m.toJSON(e)),m.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const m=h.shapes;if(Array.isArray(m))for(let v=0,x=m.length;v<x;v++){const E=m[v];o(e.shapes,E)}else o(e.shapes,m)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let m=0,v=this.material.length;m<v;m++)h.push(o(e.materials,this.material[m]));i.material=h}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let h=0;h<this.children.length;h++)i.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let h=0;h<this.animations.length;h++){const m=this.animations[h];i.animations.push(o(e.animations,m))}}if(n){const h=u(e.geometries),m=u(e.materials),v=u(e.textures),x=u(e.images),E=u(e.shapes),M=u(e.skeletons),D=u(e.animations),H=u(e.nodes);h.length>0&&(r.geometries=h),m.length>0&&(r.materials=m),v.length>0&&(r.textures=v),x.length>0&&(r.images=x),E.length>0&&(r.shapes=E),M.length>0&&(r.skeletons=M),D.length>0&&(r.animations=D),H.length>0&&(r.nodes=H)}return r.object=i,r;function u(h){const m=[];for(const v in h){const x=h[v];delete x.metadata,m.push(x)}return m}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Kr.DEFAULT_UP=new Fe(0,1,0);Kr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Kr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const gc=new Fe,Wh=new Fe,xG=new Fe,$h=new Fe,ew=new Fe,tw=new Fe,zye=new Fe,SG=new Fe,EG=new Fe,CG=new Fe;class Td{constructor(e=new Fe,n=new Fe,r=new Fe){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),gc.subVectors(e,n),i.cross(gc);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){gc.subVectors(i,n),Wh.subVectors(r,n),xG.subVectors(e,n);const u=gc.dot(gc),h=gc.dot(Wh),m=gc.dot(xG),v=Wh.dot(Wh),x=Wh.dot(xG),E=u*v-h*h;if(E===0)return o.set(0,0,0),null;const M=1/E,D=(v*m-h*x)*M,H=(u*x-h*m)*M;return o.set(1-D-H,H,D)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,$h)===null?!1:$h.x>=0&&$h.y>=0&&$h.x+$h.y<=1}static getInterpolation(e,n,r,i,o,u,h,m){return this.getBarycoord(e,n,r,i,$h)===null?(m.x=0,m.y=0,"z"in m&&(m.z=0),"w"in m&&(m.w=0),null):(m.setScalar(0),m.addScaledVector(o,$h.x),m.addScaledVector(u,$h.y),m.addScaledVector(h,$h.z),m)}static isFrontFacing(e,n,r,i){return gc.subVectors(r,n),Wh.subVectors(e,n),gc.cross(Wh).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return gc.subVectors(this.c,this.b),Wh.subVectors(this.a,this.b),gc.cross(Wh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Td.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Td.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,o){return Td.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return Td.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Td.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let u,h;ew.subVectors(i,r),tw.subVectors(o,r),SG.subVectors(e,r);const m=ew.dot(SG),v=tw.dot(SG);if(m<=0&&v<=0)return n.copy(r);EG.subVectors(e,i);const x=ew.dot(EG),E=tw.dot(EG);if(x>=0&&E<=x)return n.copy(i);const M=m*E-x*v;if(M<=0&&m>=0&&x<=0)return u=m/(m-x),n.copy(r).addScaledVector(ew,u);CG.subVectors(e,o);const D=ew.dot(CG),H=tw.dot(CG);if(H>=0&&D<=H)return n.copy(o);const F=D*v-m*H;if(F<=0&&v>=0&&H<=0)return h=v/(v-H),n.copy(r).addScaledVector(tw,h);const B=x*H-D*E;if(B<=0&&E-x>=0&&D-H>=0)return zye.subVectors(o,i),h=(E-x)/(E-x+(D-H)),n.copy(i).addScaledVector(zye,h);const z=1/(B+F+M);return u=F*z,h=M*z,n.copy(r).addScaledVector(ew,u).addScaledVector(tw,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const KSe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},um={h:0,s:0,l:0},lL={h:0,s:0,l:0};function PG(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class _n{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=is){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,li.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=li.workingColorSpace){return this.r=e,this.g=n,this.b=r,li.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=li.workingColorSpace){if(e=A7(e,1),n=Vs(n,0,1),r=Vs(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,u=2*r-o;this.r=PG(u,o,e+1/3),this.g=PG(u,o,e),this.b=PG(u,o,e-1/3)}return li.toWorkingColorSpace(this,i),this}setStyle(e,n=is){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const u=i[1],h=i[2];switch(u){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],u=o.length;if(u===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(u===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=is){const r=KSe[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Xw(e.r),this.g=Xw(e.g),this.b=Xw(e.b),this}copyLinearToSRGB(e){return this.r=fG(e.r),this.g=fG(e.g),this.b=fG(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=is){return li.fromWorkingColorSpace(Xo.copy(this),e),Math.round(Vs(Xo.r*255,0,255))*65536+Math.round(Vs(Xo.g*255,0,255))*256+Math.round(Vs(Xo.b*255,0,255))}getHexString(e=is){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=li.workingColorSpace){li.fromWorkingColorSpace(Xo.copy(this),n);const r=Xo.r,i=Xo.g,o=Xo.b,u=Math.max(r,i,o),h=Math.min(r,i,o);let m,v;const x=(h+u)/2;if(h===u)m=0,v=0;else{const E=u-h;switch(v=x<=.5?E/(u+h):E/(2-u-h),u){case r:m=(i-o)/E+(i<o?6:0);break;case i:m=(o-r)/E+2;break;case o:m=(r-i)/E+4;break}m/=6}return e.h=m,e.s=v,e.l=x,e}getRGB(e,n=li.workingColorSpace){return li.fromWorkingColorSpace(Xo.copy(this),n),e.r=Xo.r,e.g=Xo.g,e.b=Xo.b,e}getStyle(e=is){li.fromWorkingColorSpace(Xo.copy(this),e);const n=Xo.r,r=Xo.g,i=Xo.b;return e!==is?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(um),this.setHSL(um.h+e,um.s+n,um.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(um),e.getHSL(lL);const r=sT(um.h,lL.h,n),i=sT(um.s,lL.s,n),o=sT(um.l,lL.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Xo=new _n;_n.NAMES=KSe;let J5e=0;class Il extends Al{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:J5e++}),this.uuid=ig(),this.name="",this.type="Material",this.blending=M0,this.side=Rd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=AT,this.blendDst=IT,this.blendEquation=Mm,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new _n(0,0,0),this.blendAlpha=0,this.depthFunc=DN,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Tye,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=K_,this.stencilZFail=K_,this.stencilZPass=K_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==M0&&(r.blending=this.blending),this.side!==Rd&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==AT&&(r.blendSrc=this.blendSrc),this.blendDst!==IT&&(r.blendDst=this.blendDst),this.blendEquation!==Mm&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==DN&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Tye&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==K_&&(r.stencilFail=this.stencilFail),this.stencilZFail!==K_&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==K_&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const u=[];for(const h in o){const m=o[h];delete m.metadata,u.push(m)}return u}if(n){const o=i(e.textures),u=i(e.images);o.length>0&&(r.textures=o),u.length>0&&(r.images=u)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class u1 extends Il{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new _n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MF,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ms=new Fe,uL=new an;class Za{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=Mye,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Pd,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Kw("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)uL.fromBufferAttribute(this,n),uL.applyMatrix3(e),this.setXY(n,uL.x,uL.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Ms.fromBufferAttribute(this,n),Ms.applyMatrix3(e),this.setXYZ(n,Ms.x,Ms.y,Ms.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Ms.fromBufferAttribute(this,n),Ms.applyMatrix4(e),this.setXYZ(n,Ms.x,Ms.y,Ms.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Ms.fromBufferAttribute(this,n),Ms.applyNormalMatrix(e),this.setXYZ(n,Ms.x,Ms.y,Ms.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Ms.fromBufferAttribute(this,n),Ms.transformDirection(e),this.setXYZ(n,Ms.x,Ms.y,Ms.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=yw(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=ba(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=yw(n,this.array)),n}setX(e,n){return this.normalized&&(n=ba(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=yw(n,this.array)),n}setY(e,n){return this.normalized&&(n=ba(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=yw(n,this.array)),n}setZ(e,n){return this.normalized&&(n=ba(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=yw(n,this.array)),n}setW(e,n){return this.normalized&&(n=ba(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=ba(n,this.array),r=ba(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=ba(n,this.array),r=ba(r,this.array),i=ba(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=ba(n,this.array),r=ba(r,this.array),i=ba(i,this.array),o=ba(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Mye&&(e.usage=this.usage),e}}class R7 extends Za{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class XSe extends Za{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class ki extends Za{constructor(e,n,r){super(new Float32Array(e),n,r)}}let e4e=0;const lu=new Fn,TG=new Kr,nw=new Fe,yl=new b1,TP=new b1,to=new Fe;class ko extends Al{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:e4e++}),this.uuid=ig(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(HSe(e)?XSe:R7)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new pr().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return lu.makeRotationFromQuaternion(e),this.applyMatrix4(lu),this}rotateX(e){return lu.makeRotationX(e),this.applyMatrix4(lu),this}rotateY(e){return lu.makeRotationY(e),this.applyMatrix4(lu),this}rotateZ(e){return lu.makeRotationZ(e),this.applyMatrix4(lu),this}translate(e,n,r){return lu.makeTranslation(e,n,r),this.applyMatrix4(lu),this}scale(e,n,r){return lu.makeScale(e,n,r),this.applyMatrix4(lu),this}lookAt(e){return TG.lookAt(e),TG.updateMatrix(),this.applyMatrix4(TG.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(nw).negate(),this.translate(nw.x,nw.y,nw.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new ki(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new b1);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Fe(-1/0,-1/0,-1/0),new Fe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];yl.setFromBufferAttribute(o),this.morphTargetsRelative?(to.addVectors(this.boundingBox.min,yl.min),this.boundingBox.expandByPoint(to),to.addVectors(this.boundingBox.max,yl.max),this.boundingBox.expandByPoint(to)):(this.boundingBox.expandByPoint(yl.min),this.boundingBox.expandByPoint(yl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Q0);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Fe,1/0);return}if(e){const r=this.boundingSphere.center;if(yl.setFromBufferAttribute(e),n)for(let o=0,u=n.length;o<u;o++){const h=n[o];TP.setFromBufferAttribute(h),this.morphTargetsRelative?(to.addVectors(yl.min,TP.min),yl.expandByPoint(to),to.addVectors(yl.max,TP.max),yl.expandByPoint(to)):(yl.expandByPoint(TP.min),yl.expandByPoint(TP.max))}yl.getCenter(r);let i=0;for(let o=0,u=e.count;o<u;o++)to.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(to));if(n)for(let o=0,u=n.length;o<u;o++){const h=n[o],m=this.morphTargetsRelative;for(let v=0,x=h.count;v<x;v++)to.fromBufferAttribute(h,v),m&&(nw.fromBufferAttribute(e,v),to.add(nw)),i=Math.max(i,r.distanceToSquared(to))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,o=n.normal.array,u=n.uv.array,h=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Za(new Float32Array(4*h),4));const m=this.getAttribute("tangent").array,v=[],x=[];for(let ne=0;ne<h;ne++)v[ne]=new Fe,x[ne]=new Fe;const E=new Fe,M=new Fe,D=new Fe,H=new an,F=new an,B=new an,z=new Fe,P=new Fe;function W(ne,Ee,ot){E.fromArray(i,ne*3),M.fromArray(i,Ee*3),D.fromArray(i,ot*3),H.fromArray(u,ne*2),F.fromArray(u,Ee*2),B.fromArray(u,ot*2),M.sub(E),D.sub(E),F.sub(H),B.sub(H);const wt=1/(F.x*B.y-B.x*F.y);isFinite(wt)&&(z.copy(M).multiplyScalar(B.y).addScaledVector(D,-F.y).multiplyScalar(wt),P.copy(D).multiplyScalar(F.x).addScaledVector(M,-B.x).multiplyScalar(wt),v[ne].add(z),v[Ee].add(z),v[ot].add(z),x[ne].add(P),x[Ee].add(P),x[ot].add(P))}let Z=this.groups;Z.length===0&&(Z=[{start:0,count:r.length}]);for(let ne=0,Ee=Z.length;ne<Ee;++ne){const ot=Z[ne],wt=ot.start,ue=ot.count;for(let Ye=wt,Te=wt+ue;Ye<Te;Ye+=3)W(r[Ye+0],r[Ye+1],r[Ye+2])}const ve=new Fe,X=new Fe,se=new Fe,pe=new Fe;function J(ne){se.fromArray(o,ne*3),pe.copy(se);const Ee=v[ne];ve.copy(Ee),ve.sub(se.multiplyScalar(se.dot(Ee))).normalize(),X.crossVectors(pe,Ee);const wt=X.dot(x[ne])<0?-1:1;m[ne*4]=ve.x,m[ne*4+1]=ve.y,m[ne*4+2]=ve.z,m[ne*4+3]=wt}for(let ne=0,Ee=Z.length;ne<Ee;++ne){const ot=Z[ne],wt=ot.start,ue=ot.count;for(let Ye=wt,Te=wt+ue;Ye<Te;Ye+=3)J(r[Ye+0]),J(r[Ye+1]),J(r[Ye+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Za(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let M=0,D=r.count;M<D;M++)r.setXYZ(M,0,0,0);const i=new Fe,o=new Fe,u=new Fe,h=new Fe,m=new Fe,v=new Fe,x=new Fe,E=new Fe;if(e)for(let M=0,D=e.count;M<D;M+=3){const H=e.getX(M+0),F=e.getX(M+1),B=e.getX(M+2);i.fromBufferAttribute(n,H),o.fromBufferAttribute(n,F),u.fromBufferAttribute(n,B),x.subVectors(u,o),E.subVectors(i,o),x.cross(E),h.fromBufferAttribute(r,H),m.fromBufferAttribute(r,F),v.fromBufferAttribute(r,B),h.add(x),m.add(x),v.add(x),r.setXYZ(H,h.x,h.y,h.z),r.setXYZ(F,m.x,m.y,m.z),r.setXYZ(B,v.x,v.y,v.z)}else for(let M=0,D=n.count;M<D;M+=3)i.fromBufferAttribute(n,M+0),o.fromBufferAttribute(n,M+1),u.fromBufferAttribute(n,M+2),x.subVectors(u,o),E.subVectors(i,o),x.cross(E),r.setXYZ(M+0,x.x,x.y,x.z),r.setXYZ(M+1,x.x,x.y,x.z),r.setXYZ(M+2,x.x,x.y,x.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)to.fromBufferAttribute(e,n),to.normalize(),e.setXYZ(n,to.x,to.y,to.z)}toNonIndexed(){function e(h,m){const v=h.array,x=h.itemSize,E=h.normalized,M=new v.constructor(m.length*x);let D=0,H=0;for(let F=0,B=m.length;F<B;F++){h.isInterleavedBufferAttribute?D=m[F]*h.data.stride+h.offset:D=m[F]*x;for(let z=0;z<x;z++)M[H++]=v[D++]}return new Za(M,x,E)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new ko,r=this.index.array,i=this.attributes;for(const h in i){const m=i[h],v=e(m,r);n.setAttribute(h,v)}const o=this.morphAttributes;for(const h in o){const m=[],v=o[h];for(let x=0,E=v.length;x<E;x++){const M=v[x],D=e(M,r);m.push(D)}n.morphAttributes[h]=m}n.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let h=0,m=u.length;h<m;h++){const v=u[h];n.addGroup(v.start,v.count,v.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const m=this.parameters;for(const v in m)m[v]!==void 0&&(e[v]=m[v]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const m in r){const v=r[m];e.data.attributes[m]=v.toJSON(e.data)}const i={};let o=!1;for(const m in this.morphAttributes){const v=this.morphAttributes[m],x=[];for(let E=0,M=v.length;E<M;E++){const D=v[E];x.push(D.toJSON(e.data))}x.length>0&&(i[m]=x,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const h=this.boundingSphere;return h!==null&&(e.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const v in i){const x=i[v];this.setAttribute(v,x.clone(n))}const o=e.morphAttributes;for(const v in o){const x=[],E=o[v];for(let M=0,D=E.length;M<D;M++)x.push(E[M].clone(n));this.morphAttributes[v]=x}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let v=0,x=u.length;v<x;v++){const E=u[v];this.addGroup(E.start,E.count,E.materialIndex)}const h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());const m=e.boundingSphere;return m!==null&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Vye=new Fn,e0=new _1,cL=new Q0,jye=new Fe,rw=new Fe,iw=new Fe,sw=new Fe,MG=new Fe,dL=new Fe,hL=new an,pL=new an,fL=new an,Hye=new Fe,Gye=new Fe,Wye=new Fe,mL=new Fe,gL=new Fe;class _s extends Kr{constructor(e=new ko,n=new u1){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=i.length;o<u;o++){const h=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,u=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const h=this.morphTargetInfluences;if(o&&h){dL.set(0,0,0);for(let m=0,v=o.length;m<v;m++){const x=h[m],E=o[m];x!==0&&(MG.fromBufferAttribute(E,e),u?dL.addScaledVector(MG,x):dL.addScaledVector(MG.sub(n),x))}n.add(dL)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),cL.copy(r.boundingSphere),cL.applyMatrix4(o),e0.copy(e.ray).recast(e.near),!(cL.containsPoint(e0.origin)===!1&&(e0.intersectSphere(cL,jye)===null||e0.origin.distanceToSquared(jye)>(e.far-e.near)**2))&&(Vye.copy(o).invert(),e0.copy(e.ray).applyMatrix4(Vye),!(r.boundingBox!==null&&e0.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,e0)))}_computeIntersections(e,n,r){let i;const o=this.geometry,u=this.material,h=o.index,m=o.attributes.position,v=o.attributes.uv,x=o.attributes.uv1,E=o.attributes.normal,M=o.groups,D=o.drawRange;if(h!==null)if(Array.isArray(u))for(let H=0,F=M.length;H<F;H++){const B=M[H],z=u[B.materialIndex],P=Math.max(B.start,D.start),W=Math.min(h.count,Math.min(B.start+B.count,D.start+D.count));for(let Z=P,ve=W;Z<ve;Z+=3){const X=h.getX(Z),se=h.getX(Z+1),pe=h.getX(Z+2);i=vL(this,z,e,r,v,x,E,X,se,pe),i&&(i.faceIndex=Math.floor(Z/3),i.face.materialIndex=B.materialIndex,n.push(i))}}else{const H=Math.max(0,D.start),F=Math.min(h.count,D.start+D.count);for(let B=H,z=F;B<z;B+=3){const P=h.getX(B),W=h.getX(B+1),Z=h.getX(B+2);i=vL(this,u,e,r,v,x,E,P,W,Z),i&&(i.faceIndex=Math.floor(B/3),n.push(i))}}else if(m!==void 0)if(Array.isArray(u))for(let H=0,F=M.length;H<F;H++){const B=M[H],z=u[B.materialIndex],P=Math.max(B.start,D.start),W=Math.min(m.count,Math.min(B.start+B.count,D.start+D.count));for(let Z=P,ve=W;Z<ve;Z+=3){const X=Z,se=Z+1,pe=Z+2;i=vL(this,z,e,r,v,x,E,X,se,pe),i&&(i.faceIndex=Math.floor(Z/3),i.face.materialIndex=B.materialIndex,n.push(i))}}else{const H=Math.max(0,D.start),F=Math.min(m.count,D.start+D.count);for(let B=H,z=F;B<z;B+=3){const P=B,W=B+1,Z=B+2;i=vL(this,u,e,r,v,x,E,P,W,Z),i&&(i.faceIndex=Math.floor(B/3),n.push(i))}}}}function t4e(t,e,n,r,i,o,u,h){let m;if(e.side===Rs?m=r.intersectTriangle(u,o,i,!0,h):m=r.intersectTriangle(i,o,u,e.side===Rd,h),m===null)return null;gL.copy(h),gL.applyMatrix4(t.matrixWorld);const v=n.ray.origin.distanceTo(gL);return v<n.near||v>n.far?null:{distance:v,point:gL.clone(),object:t}}function vL(t,e,n,r,i,o,u,h,m,v){t.getVertexPosition(h,rw),t.getVertexPosition(m,iw),t.getVertexPosition(v,sw);const x=t4e(t,e,n,r,rw,iw,sw,mL);if(x){i&&(hL.fromBufferAttribute(i,h),pL.fromBufferAttribute(i,m),fL.fromBufferAttribute(i,v),x.uv=Td.getInterpolation(mL,rw,iw,sw,hL,pL,fL,new an)),o&&(hL.fromBufferAttribute(o,h),pL.fromBufferAttribute(o,m),fL.fromBufferAttribute(o,v),x.uv1=Td.getInterpolation(mL,rw,iw,sw,hL,pL,fL,new an),x.uv2=x.uv1),u&&(Hye.fromBufferAttribute(u,h),Gye.fromBufferAttribute(u,m),Wye.fromBufferAttribute(u,v),x.normal=Td.getInterpolation(mL,rw,iw,sw,Hye,Gye,Wye,new Fe),x.normal.dot(r.direction)>0&&x.normal.multiplyScalar(-1));const E={a:h,b:m,c:v,normal:new Fe,materialIndex:0};Td.getNormal(rw,iw,sw,E.normal),x.face=E}return x}class cM extends ko{constructor(e=1,n=1,r=1,i=1,o=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:u};const h=this;i=Math.floor(i),o=Math.floor(o),u=Math.floor(u);const m=[],v=[],x=[],E=[];let M=0,D=0;H("z","y","x",-1,-1,r,n,e,u,o,0),H("z","y","x",1,-1,r,n,-e,u,o,1),H("x","z","y",1,1,e,r,n,i,u,2),H("x","z","y",1,-1,e,r,-n,i,u,3),H("x","y","z",1,-1,e,n,r,i,o,4),H("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(m),this.setAttribute("position",new ki(v,3)),this.setAttribute("normal",new ki(x,3)),this.setAttribute("uv",new ki(E,2));function H(F,B,z,P,W,Z,ve,X,se,pe,J){const ne=Z/se,Ee=ve/pe,ot=Z/2,wt=ve/2,ue=X/2,Ye=se+1,Te=pe+1;let st=0,Be=0;const Xe=new Fe;for(let qe=0;qe<Te;qe++){const dt=qe*Ee-wt;for(let Pt=0;Pt<Ye;Pt++){const cn=Pt*ne-ot;Xe[F]=cn*P,Xe[B]=dt*W,Xe[z]=ue,v.push(Xe.x,Xe.y,Xe.z),Xe[F]=0,Xe[B]=0,Xe[z]=X>0?1:-1,x.push(Xe.x,Xe.y,Xe.z),E.push(Pt/se),E.push(1-qe/pe),st+=1}}for(let qe=0;qe<pe;qe++)for(let dt=0;dt<se;dt++){const Pt=M+dt+Ye*qe,cn=M+dt+Ye*(qe+1),ht=M+(dt+1)+Ye*(qe+1),Et=M+(dt+1)+Ye*qe;m.push(Pt,cn,Et),m.push(cn,ht,Et),Be+=6}h.addGroup(D,Be,J),D+=Be,M+=st}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cM(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function c1(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function _a(t){const e={};for(let n=0;n<t.length;n++){const r=c1(t[n]);for(const i in r)e[i]=r[i]}return e}function n4e(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function qSe(t){return t.getRenderTarget()===null?t.outputColorSpace:li.workingColorSpace}const r4e={clone:c1,merge:_a};var i4e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,s4e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Aa extends Il{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=i4e,this.fragmentShader=s4e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=c1(e.uniforms),this.uniformsGroups=n4e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const u=this.uniforms[i].value;u&&u.isTexture?n.uniforms[i]={type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?n.uniforms[i]={type:"c",value:u.getHex()}:u&&u.isVector2?n.uniforms[i]={type:"v2",value:u.toArray()}:u&&u.isVector3?n.uniforms[i]={type:"v3",value:u.toArray()}:u&&u.isVector4?n.uniforms[i]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?n.uniforms[i]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?n.uniforms[i]={type:"m4",value:u.toArray()}:n.uniforms[i]={value:u}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class RF extends Kr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Fn,this.projectionMatrix=new Fn,this.projectionMatrixInverse=new Fn,this.coordinateSystem=sp}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const cm=new Fe,$ye=new an,Kye=new an;class js extends RF{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=l1*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(iT*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return l1*2*Math.atan(Math.tan(iT*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){cm.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(cm.x,cm.y).multiplyScalar(-e/cm.z),cm.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(cm.x,cm.y).multiplyScalar(-e/cm.z)}getViewSize(e,n){return this.getViewBounds(e,$ye,Kye),n.subVectors(Kye,$ye)}setViewOffset(e,n,r,i,o,u){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(iT*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const u=this.view;if(this.view!==null&&this.view.enabled){const m=u.fullWidth,v=u.fullHeight;o+=u.offsetX*i/m,n-=u.offsetY*r/v,i*=u.width/m,r*=u.height/v}const h=this.filmOffset;h!==0&&(o+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const ow=-90,aw=1;class o4e extends Kr{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new js(ow,aw,e,n);i.layers=this.layers,this.add(i);const o=new js(ow,aw,e,n);o.layers=this.layers,this.add(o);const u=new js(ow,aw,e,n);u.layers=this.layers,this.add(u);const h=new js(ow,aw,e,n);h.layers=this.layers,this.add(h);const m=new js(ow,aw,e,n);m.layers=this.layers,this.add(m);const v=new js(ow,aw,e,n);v.layers=this.layers,this.add(v)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,u,h,m]=n;for(const v of n)this.remove(v);if(e===sp)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),m.up.set(0,1,0),m.lookAt(0,0,-1);else if(e===VN)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),m.up.set(0,-1,0),m.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const v of n)this.add(v),v.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,u,h,m,v,x]=this.children,E=e.getRenderTarget(),M=e.getActiveCubeFace(),D=e.getActiveMipmapLevel(),H=e.xr.enabled;e.xr.enabled=!1;const F=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,u),e.setRenderTarget(r,2,i),e.render(n,h),e.setRenderTarget(r,3,i),e.render(n,m),e.setRenderTarget(r,4,i),e.render(n,v),r.texture.generateMipmaps=F,e.setRenderTarget(r,5,i),e.render(n,x),e.setRenderTarget(E,M,D),e.xr.enabled=H,r.texture.needsPMREMUpdate=!0}}class DF extends Yi{constructor(e,n,r,i,o,u,h,m,v,x){e=e!==void 0?e:[],n=n!==void 0?n:o1,super(e,n,r,i,o,u,h,m,v,x),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class a4e extends Pl{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(Kw("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===dp?is:gu),this.texture=new DF(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:ro}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new cM(5,5,5),o=new Aa({name:"CubemapFromEquirect",uniforms:c1(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Rs,blending:xu});o.uniforms.tEquirect.value=n;const u=new _s(i,o),h=n.minFilter;return n.minFilter===S0&&(n.minFilter=ro),new o4e(1,10,this).update(e,u),n.minFilter=h,u.geometry.dispose(),u.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(n,r,i);e.setRenderTarget(o)}}const kG=new Fe,l4e=new Fe,u4e=new pr;class Em{constructor(e=new Fe(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=kG.subVectors(r,n).cross(l4e.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(kG),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||u4e.getNormalMatrix(e),i=this.coplanarPoint(kG).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const t0=new Q0,yL=new Fe;class D7{constructor(e=new Em,n=new Em,r=new Em,i=new Em,o=new Em,u=new Em){this.planes=[e,n,r,i,o,u]}set(e,n,r,i,o,u){const h=this.planes;return h[0].copy(e),h[1].copy(n),h[2].copy(r),h[3].copy(i),h[4].copy(o),h[5].copy(u),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=sp){const r=this.planes,i=e.elements,o=i[0],u=i[1],h=i[2],m=i[3],v=i[4],x=i[5],E=i[6],M=i[7],D=i[8],H=i[9],F=i[10],B=i[11],z=i[12],P=i[13],W=i[14],Z=i[15];if(r[0].setComponents(m-o,M-v,B-D,Z-z).normalize(),r[1].setComponents(m+o,M+v,B+D,Z+z).normalize(),r[2].setComponents(m+u,M+x,B+H,Z+P).normalize(),r[3].setComponents(m-u,M-x,B-H,Z-P).normalize(),r[4].setComponents(m-h,M-E,B-F,Z-W).normalize(),n===sp)r[5].setComponents(m+h,M+E,B+F,Z+W).normalize();else if(n===VN)r[5].setComponents(h,E,F,W).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),t0.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),t0.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(t0)}intersectsSprite(e){return t0.center.set(0,0,0),t0.radius=.7071067811865476,t0.applyMatrix4(e.matrixWorld),this.intersectsSphere(t0)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(yL.x=i.normal.x>0?e.max.x:e.min.x,yL.y=i.normal.y>0?e.max.y:e.min.y,yL.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(yL)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function YSe(){let t=null,e=!1,n=null,r=null;function i(o,u){n(o,u),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function c4e(t,e){const n=e.isWebGL2,r=new WeakMap;function i(v,x){const E=v.array,M=v.usage,D=E.byteLength,H=t.createBuffer();t.bindBuffer(x,H),t.bufferData(x,E,M),v.onUploadCallback();let F;if(E instanceof Float32Array)F=t.FLOAT;else if(E instanceof Uint16Array)if(v.isFloat16BufferAttribute)if(n)F=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else F=t.UNSIGNED_SHORT;else if(E instanceof Int16Array)F=t.SHORT;else if(E instanceof Uint32Array)F=t.UNSIGNED_INT;else if(E instanceof Int32Array)F=t.INT;else if(E instanceof Int8Array)F=t.BYTE;else if(E instanceof Uint8Array)F=t.UNSIGNED_BYTE;else if(E instanceof Uint8ClampedArray)F=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+E);return{buffer:H,type:F,bytesPerElement:E.BYTES_PER_ELEMENT,version:v.version,size:D}}function o(v,x,E){const M=x.array,D=x._updateRange,H=x.updateRanges;if(t.bindBuffer(E,v),D.count===-1&&H.length===0&&t.bufferSubData(E,0,M),H.length!==0){for(let F=0,B=H.length;F<B;F++){const z=H[F];n?t.bufferSubData(E,z.start*M.BYTES_PER_ELEMENT,M,z.start,z.count):t.bufferSubData(E,z.start*M.BYTES_PER_ELEMENT,M.subarray(z.start,z.start+z.count))}x.clearUpdateRanges()}D.count!==-1&&(n?t.bufferSubData(E,D.offset*M.BYTES_PER_ELEMENT,M,D.offset,D.count):t.bufferSubData(E,D.offset*M.BYTES_PER_ELEMENT,M.subarray(D.offset,D.offset+D.count)),D.count=-1),x.onUploadCallback()}function u(v){return v.isInterleavedBufferAttribute&&(v=v.data),r.get(v)}function h(v){v.isInterleavedBufferAttribute&&(v=v.data);const x=r.get(v);x&&(t.deleteBuffer(x.buffer),r.delete(v))}function m(v,x){if(v.isGLBufferAttribute){const M=r.get(v);(!M||M.version<v.version)&&r.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version});return}v.isInterleavedBufferAttribute&&(v=v.data);const E=r.get(v);if(E===void 0)r.set(v,i(v,x));else if(E.version<v.version){if(E.size!==v.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(E.buffer,v,x),E.version=v.version}}return{get:u,remove:h,update:m}}class dM extends ko{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,u=n/2,h=Math.floor(r),m=Math.floor(i),v=h+1,x=m+1,E=e/h,M=n/m,D=[],H=[],F=[],B=[];for(let z=0;z<x;z++){const P=z*M-u;for(let W=0;W<v;W++){const Z=W*E-o;H.push(Z,-P,0),F.push(0,0,1),B.push(W/h),B.push(1-z/m)}}for(let z=0;z<m;z++)for(let P=0;P<h;P++){const W=P+v*z,Z=P+v*(z+1),ve=P+1+v*(z+1),X=P+1+v*z;D.push(W,Z,X),D.push(Z,ve,X)}this.setIndex(D),this.setAttribute("position",new ki(H,3)),this.setAttribute("normal",new ki(F,3)),this.setAttribute("uv",new ki(B,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dM(e.width,e.height,e.widthSegments,e.heightSegments)}}var d4e=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,h4e=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,p4e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,f4e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,m4e=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,g4e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,v4e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,y4e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,b4e=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,_4e=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,w4e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,x4e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,S4e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,E4e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,C4e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,P4e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,T4e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,M4e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,k4e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,A4e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,I4e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,R4e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,D4e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,O4e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,L4e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,N4e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,F4e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,B4e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,U4e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,z4e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,V4e="gl_FragColor = linearToOutputTexel( gl_FragColor );",j4e=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,H4e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,G4e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,W4e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$4e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,K4e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,X4e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,q4e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Y4e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Z4e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Q4e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,J4e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,eze=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,tze=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,nze=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,rze=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ize=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,sze=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,oze=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,aze=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lze=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,uze=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,cze=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,dze=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,hze=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,pze=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,fze=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,mze=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,gze=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,vze=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,yze=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,bze=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,_ze=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,wze=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,xze=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Sze=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Eze=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Cze=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Pze=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Tze=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Mze=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,kze=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Aze=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Ize=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Rze=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Dze=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Oze=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Lze=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Nze=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Fze=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Bze=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Uze=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,zze=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Vze=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,jze=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Hze=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Gze=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Wze=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,$ze=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Kze=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Xze=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,qze=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Yze=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Zze=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Qze=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Jze=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,eVe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,tVe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,nVe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,rVe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,iVe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,sVe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,oVe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,aVe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,lVe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,uVe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const cVe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,dVe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hVe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,pVe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fVe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,mVe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gVe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,vVe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,yVe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,bVe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,_Ve=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,wVe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,xVe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,SVe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,EVe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,CVe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PVe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TVe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MVe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,kVe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AVe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,IVe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,RVe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DVe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OVe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,LVe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,NVe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,FVe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BVe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,UVe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zVe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,VVe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,jVe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HVe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,hr={alphahash_fragment:d4e,alphahash_pars_fragment:h4e,alphamap_fragment:p4e,alphamap_pars_fragment:f4e,alphatest_fragment:m4e,alphatest_pars_fragment:g4e,aomap_fragment:v4e,aomap_pars_fragment:y4e,batching_pars_vertex:b4e,batching_vertex:_4e,begin_vertex:w4e,beginnormal_vertex:x4e,bsdfs:S4e,iridescence_fragment:E4e,bumpmap_pars_fragment:C4e,clipping_planes_fragment:P4e,clipping_planes_pars_fragment:T4e,clipping_planes_pars_vertex:M4e,clipping_planes_vertex:k4e,color_fragment:A4e,color_pars_fragment:I4e,color_pars_vertex:R4e,color_vertex:D4e,common:O4e,cube_uv_reflection_fragment:L4e,defaultnormal_vertex:N4e,displacementmap_pars_vertex:F4e,displacementmap_vertex:B4e,emissivemap_fragment:U4e,emissivemap_pars_fragment:z4e,colorspace_fragment:V4e,colorspace_pars_fragment:j4e,envmap_fragment:H4e,envmap_common_pars_fragment:G4e,envmap_pars_fragment:W4e,envmap_pars_vertex:$4e,envmap_physical_pars_fragment:ize,envmap_vertex:K4e,fog_vertex:X4e,fog_pars_vertex:q4e,fog_fragment:Y4e,fog_pars_fragment:Z4e,gradientmap_pars_fragment:Q4e,lightmap_fragment:J4e,lightmap_pars_fragment:eze,lights_lambert_fragment:tze,lights_lambert_pars_fragment:nze,lights_pars_begin:rze,lights_toon_fragment:sze,lights_toon_pars_fragment:oze,lights_phong_fragment:aze,lights_phong_pars_fragment:lze,lights_physical_fragment:uze,lights_physical_pars_fragment:cze,lights_fragment_begin:dze,lights_fragment_maps:hze,lights_fragment_end:pze,logdepthbuf_fragment:fze,logdepthbuf_pars_fragment:mze,logdepthbuf_pars_vertex:gze,logdepthbuf_vertex:vze,map_fragment:yze,map_pars_fragment:bze,map_particle_fragment:_ze,map_particle_pars_fragment:wze,metalnessmap_fragment:xze,metalnessmap_pars_fragment:Sze,morphcolor_vertex:Eze,morphnormal_vertex:Cze,morphtarget_pars_vertex:Pze,morphtarget_vertex:Tze,normal_fragment_begin:Mze,normal_fragment_maps:kze,normal_pars_fragment:Aze,normal_pars_vertex:Ize,normal_vertex:Rze,normalmap_pars_fragment:Dze,clearcoat_normal_fragment_begin:Oze,clearcoat_normal_fragment_maps:Lze,clearcoat_pars_fragment:Nze,iridescence_pars_fragment:Fze,opaque_fragment:Bze,packing:Uze,premultiplied_alpha_fragment:zze,project_vertex:Vze,dithering_fragment:jze,dithering_pars_fragment:Hze,roughnessmap_fragment:Gze,roughnessmap_pars_fragment:Wze,shadowmap_pars_fragment:$ze,shadowmap_pars_vertex:Kze,shadowmap_vertex:Xze,shadowmask_pars_fragment:qze,skinbase_vertex:Yze,skinning_pars_vertex:Zze,skinning_vertex:Qze,skinnormal_vertex:Jze,specularmap_fragment:eVe,specularmap_pars_fragment:tVe,tonemapping_fragment:nVe,tonemapping_pars_fragment:rVe,transmission_fragment:iVe,transmission_pars_fragment:sVe,uv_pars_fragment:oVe,uv_pars_vertex:aVe,uv_vertex:lVe,worldpos_vertex:uVe,background_vert:cVe,background_frag:dVe,backgroundCube_vert:hVe,backgroundCube_frag:pVe,cube_vert:fVe,cube_frag:mVe,depth_vert:gVe,depth_frag:vVe,distanceRGBA_vert:yVe,distanceRGBA_frag:bVe,equirect_vert:_Ve,equirect_frag:wVe,linedashed_vert:xVe,linedashed_frag:SVe,meshbasic_vert:EVe,meshbasic_frag:CVe,meshlambert_vert:PVe,meshlambert_frag:TVe,meshmatcap_vert:MVe,meshmatcap_frag:kVe,meshnormal_vert:AVe,meshnormal_frag:IVe,meshphong_vert:RVe,meshphong_frag:DVe,meshphysical_vert:OVe,meshphysical_frag:LVe,meshtoon_vert:NVe,meshtoon_frag:FVe,points_vert:BVe,points_frag:UVe,shadow_vert:zVe,shadow_frag:VVe,sprite_vert:jVe,sprite_frag:HVe},Qt={common:{diffuse:{value:new _n(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new pr},alphaMap:{value:null},alphaMapTransform:{value:new pr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new pr}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new pr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new pr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new pr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new pr},normalScale:{value:new an(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new pr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new pr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new pr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new pr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new _n(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new _n(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new pr},alphaTest:{value:0},uvTransform:{value:new pr}},sprite:{diffuse:{value:new _n(16777215)},opacity:{value:1},center:{value:new an(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new pr},alphaMap:{value:null},alphaMapTransform:{value:new pr},alphaTest:{value:0}}},Ed={basic:{uniforms:_a([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.fog]),vertexShader:hr.meshbasic_vert,fragmentShader:hr.meshbasic_frag},lambert:{uniforms:_a([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,Qt.lights,{emissive:{value:new _n(0)}}]),vertexShader:hr.meshlambert_vert,fragmentShader:hr.meshlambert_frag},phong:{uniforms:_a([Qt.common,Qt.specularmap,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,Qt.lights,{emissive:{value:new _n(0)},specular:{value:new _n(1118481)},shininess:{value:30}}]),vertexShader:hr.meshphong_vert,fragmentShader:hr.meshphong_frag},standard:{uniforms:_a([Qt.common,Qt.envmap,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.roughnessmap,Qt.metalnessmap,Qt.fog,Qt.lights,{emissive:{value:new _n(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:hr.meshphysical_vert,fragmentShader:hr.meshphysical_frag},toon:{uniforms:_a([Qt.common,Qt.aomap,Qt.lightmap,Qt.emissivemap,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.gradientmap,Qt.fog,Qt.lights,{emissive:{value:new _n(0)}}]),vertexShader:hr.meshtoon_vert,fragmentShader:hr.meshtoon_frag},matcap:{uniforms:_a([Qt.common,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,Qt.fog,{matcap:{value:null}}]),vertexShader:hr.meshmatcap_vert,fragmentShader:hr.meshmatcap_frag},points:{uniforms:_a([Qt.points,Qt.fog]),vertexShader:hr.points_vert,fragmentShader:hr.points_frag},dashed:{uniforms:_a([Qt.common,Qt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:hr.linedashed_vert,fragmentShader:hr.linedashed_frag},depth:{uniforms:_a([Qt.common,Qt.displacementmap]),vertexShader:hr.depth_vert,fragmentShader:hr.depth_frag},normal:{uniforms:_a([Qt.common,Qt.bumpmap,Qt.normalmap,Qt.displacementmap,{opacity:{value:1}}]),vertexShader:hr.meshnormal_vert,fragmentShader:hr.meshnormal_frag},sprite:{uniforms:_a([Qt.sprite,Qt.fog]),vertexShader:hr.sprite_vert,fragmentShader:hr.sprite_frag},background:{uniforms:{uvTransform:{value:new pr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:hr.background_vert,fragmentShader:hr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:hr.backgroundCube_vert,fragmentShader:hr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:hr.cube_vert,fragmentShader:hr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:hr.equirect_vert,fragmentShader:hr.equirect_frag},distanceRGBA:{uniforms:_a([Qt.common,Qt.displacementmap,{referencePosition:{value:new Fe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:hr.distanceRGBA_vert,fragmentShader:hr.distanceRGBA_frag},shadow:{uniforms:_a([Qt.lights,Qt.fog,{color:{value:new _n(0)},opacity:{value:1}}]),vertexShader:hr.shadow_vert,fragmentShader:hr.shadow_frag}};Ed.physical={uniforms:_a([Ed.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new pr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new pr},clearcoatNormalScale:{value:new an(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new pr},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new pr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new pr},sheen:{value:0},sheenColor:{value:new _n(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new pr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new pr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new pr},transmissionSamplerSize:{value:new an},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new pr},attenuationDistance:{value:0},attenuationColor:{value:new _n(0)},specularColor:{value:new _n(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new pr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new pr},anisotropyVector:{value:new an},anisotropyMap:{value:null},anisotropyMapTransform:{value:new pr}}]),vertexShader:hr.meshphysical_vert,fragmentShader:hr.meshphysical_frag};const bL={r:0,b:0,g:0};function GVe(t,e,n,r,i,o,u){const h=new _n(0);let m=o===!0?0:1,v,x,E=null,M=0,D=null;function H(B,z){let P=!1,W=z.isScene===!0?z.background:null;W&&W.isTexture&&(W=(z.backgroundBlurriness>0?n:e).get(W)),W===null?F(h,m):W&&W.isColor&&(F(W,1),P=!0);const Z=t.xr.getEnvironmentBlendMode();Z==="additive"?r.buffers.color.setClear(0,0,0,1,u):Z==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,u),(t.autoClear||P)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),W&&(W.isCubeTexture||W.mapping===kF)?(x===void 0&&(x=new _s(new cM(1,1,1),new Aa({name:"BackgroundCubeMaterial",uniforms:c1(Ed.backgroundCube.uniforms),vertexShader:Ed.backgroundCube.vertexShader,fragmentShader:Ed.backgroundCube.fragmentShader,side:Rs,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),x.geometry.deleteAttribute("uv"),x.onBeforeRender=function(ve,X,se){this.matrixWorld.copyPosition(se.matrixWorld)},Object.defineProperty(x.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(x)),x.material.uniforms.envMap.value=W,x.material.uniforms.flipEnvMap.value=W.isCubeTexture&&W.isRenderTargetTexture===!1?-1:1,x.material.uniforms.backgroundBlurriness.value=z.backgroundBlurriness,x.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,x.material.toneMapped=li.getTransfer(W.colorSpace)!==Ti,(E!==W||M!==W.version||D!==t.toneMapping)&&(x.material.needsUpdate=!0,E=W,M=W.version,D=t.toneMapping),x.layers.enableAll(),B.unshift(x,x.geometry,x.material,0,0,null)):W&&W.isTexture&&(v===void 0&&(v=new _s(new dM(2,2),new Aa({name:"BackgroundMaterial",uniforms:c1(Ed.background.uniforms),vertexShader:Ed.background.vertexShader,fragmentShader:Ed.background.fragmentShader,side:Rd,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),Object.defineProperty(v.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(v)),v.material.uniforms.t2D.value=W,v.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,v.material.toneMapped=li.getTransfer(W.colorSpace)!==Ti,W.matrixAutoUpdate===!0&&W.updateMatrix(),v.material.uniforms.uvTransform.value.copy(W.matrix),(E!==W||M!==W.version||D!==t.toneMapping)&&(v.material.needsUpdate=!0,E=W,M=W.version,D=t.toneMapping),v.layers.enableAll(),B.unshift(v,v.geometry,v.material,0,0,null))}function F(B,z){B.getRGB(bL,qSe(t)),r.buffers.color.setClear(bL.r,bL.g,bL.b,z,u)}return{getClearColor:function(){return h},setClearColor:function(B,z=1){h.set(B),m=z,F(h,m)},getClearAlpha:function(){return m},setClearAlpha:function(B){m=B,F(h,m)},render:H}}function WVe(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),u=r.isWebGL2||o!==null,h={},m=B(null);let v=m,x=!1;function E(ue,Ye,Te,st,Be){let Xe=!1;if(u){const qe=F(st,Te,Ye);v!==qe&&(v=qe,D(v.object)),Xe=z(ue,st,Te,Be),Xe&&P(ue,st,Te,Be)}else{const qe=Ye.wireframe===!0;(v.geometry!==st.id||v.program!==Te.id||v.wireframe!==qe)&&(v.geometry=st.id,v.program=Te.id,v.wireframe=qe,Xe=!0)}Be!==null&&n.update(Be,t.ELEMENT_ARRAY_BUFFER),(Xe||x)&&(x=!1,pe(ue,Ye,Te,st),Be!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(Be).buffer))}function M(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function D(ue){return r.isWebGL2?t.bindVertexArray(ue):o.bindVertexArrayOES(ue)}function H(ue){return r.isWebGL2?t.deleteVertexArray(ue):o.deleteVertexArrayOES(ue)}function F(ue,Ye,Te){const st=Te.wireframe===!0;let Be=h[ue.id];Be===void 0&&(Be={},h[ue.id]=Be);let Xe=Be[Ye.id];Xe===void 0&&(Xe={},Be[Ye.id]=Xe);let qe=Xe[st];return qe===void 0&&(qe=B(M()),Xe[st]=qe),qe}function B(ue){const Ye=[],Te=[],st=[];for(let Be=0;Be<i;Be++)Ye[Be]=0,Te[Be]=0,st[Be]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Ye,enabledAttributes:Te,attributeDivisors:st,object:ue,attributes:{},index:null}}function z(ue,Ye,Te,st){const Be=v.attributes,Xe=Ye.attributes;let qe=0;const dt=Te.getAttributes();for(const Pt in dt)if(dt[Pt].location>=0){const ht=Be[Pt];let Et=Xe[Pt];if(Et===void 0&&(Pt==="instanceMatrix"&&ue.instanceMatrix&&(Et=ue.instanceMatrix),Pt==="instanceColor"&&ue.instanceColor&&(Et=ue.instanceColor)),ht===void 0||ht.attribute!==Et||Et&&ht.data!==Et.data)return!0;qe++}return v.attributesNum!==qe||v.index!==st}function P(ue,Ye,Te,st){const Be={},Xe=Ye.attributes;let qe=0;const dt=Te.getAttributes();for(const Pt in dt)if(dt[Pt].location>=0){let ht=Xe[Pt];ht===void 0&&(Pt==="instanceMatrix"&&ue.instanceMatrix&&(ht=ue.instanceMatrix),Pt==="instanceColor"&&ue.instanceColor&&(ht=ue.instanceColor));const Et={};Et.attribute=ht,ht&&ht.data&&(Et.data=ht.data),Be[Pt]=Et,qe++}v.attributes=Be,v.attributesNum=qe,v.index=st}function W(){const ue=v.newAttributes;for(let Ye=0,Te=ue.length;Ye<Te;Ye++)ue[Ye]=0}function Z(ue){ve(ue,0)}function ve(ue,Ye){const Te=v.newAttributes,st=v.enabledAttributes,Be=v.attributeDivisors;Te[ue]=1,st[ue]===0&&(t.enableVertexAttribArray(ue),st[ue]=1),Be[ue]!==Ye&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ue,Ye),Be[ue]=Ye)}function X(){const ue=v.newAttributes,Ye=v.enabledAttributes;for(let Te=0,st=Ye.length;Te<st;Te++)Ye[Te]!==ue[Te]&&(t.disableVertexAttribArray(Te),Ye[Te]=0)}function se(ue,Ye,Te,st,Be,Xe,qe){qe===!0?t.vertexAttribIPointer(ue,Ye,Te,Be,Xe):t.vertexAttribPointer(ue,Ye,Te,st,Be,Xe)}function pe(ue,Ye,Te,st){if(r.isWebGL2===!1&&(ue.isInstancedMesh||st.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;W();const Be=st.attributes,Xe=Te.getAttributes(),qe=Ye.defaultAttributeValues;for(const dt in Xe){const Pt=Xe[dt];if(Pt.location>=0){let cn=Be[dt];if(cn===void 0&&(dt==="instanceMatrix"&&ue.instanceMatrix&&(cn=ue.instanceMatrix),dt==="instanceColor"&&ue.instanceColor&&(cn=ue.instanceColor)),cn!==void 0){const ht=cn.normalized,Et=cn.itemSize,$t=n.get(cn);if($t===void 0)continue;const Zt=$t.buffer,gn=$t.type,Jt=$t.bytesPerElement,Qn=r.isWebGL2===!0&&(gn===t.INT||gn===t.UNSIGNED_INT||cn.gpuType===LSe);if(cn.isInterleavedBufferAttribute){const vn=cn.data,Qe=vn.stride,Zr=cn.offset;if(vn.isInstancedInterleavedBuffer){for(let Tn=0;Tn<Pt.locationSize;Tn++)ve(Pt.location+Tn,vn.meshPerAttribute);ue.isInstancedMesh!==!0&&st._maxInstanceCount===void 0&&(st._maxInstanceCount=vn.meshPerAttribute*vn.count)}else for(let Tn=0;Tn<Pt.locationSize;Tn++)Z(Pt.location+Tn);t.bindBuffer(t.ARRAY_BUFFER,Zt);for(let Tn=0;Tn<Pt.locationSize;Tn++)se(Pt.location+Tn,Et/Pt.locationSize,gn,ht,Qe*Jt,(Zr+Et/Pt.locationSize*Tn)*Jt,Qn)}else{if(cn.isInstancedBufferAttribute){for(let vn=0;vn<Pt.locationSize;vn++)ve(Pt.location+vn,cn.meshPerAttribute);ue.isInstancedMesh!==!0&&st._maxInstanceCount===void 0&&(st._maxInstanceCount=cn.meshPerAttribute*cn.count)}else for(let vn=0;vn<Pt.locationSize;vn++)Z(Pt.location+vn);t.bindBuffer(t.ARRAY_BUFFER,Zt);for(let vn=0;vn<Pt.locationSize;vn++)se(Pt.location+vn,Et/Pt.locationSize,gn,ht,Et*Jt,Et/Pt.locationSize*vn*Jt,Qn)}}else if(qe!==void 0){const ht=qe[dt];if(ht!==void 0)switch(ht.length){case 2:t.vertexAttrib2fv(Pt.location,ht);break;case 3:t.vertexAttrib3fv(Pt.location,ht);break;case 4:t.vertexAttrib4fv(Pt.location,ht);break;default:t.vertexAttrib1fv(Pt.location,ht)}}}}X()}function J(){ot();for(const ue in h){const Ye=h[ue];for(const Te in Ye){const st=Ye[Te];for(const Be in st)H(st[Be].object),delete st[Be];delete Ye[Te]}delete h[ue]}}function ne(ue){if(h[ue.id]===void 0)return;const Ye=h[ue.id];for(const Te in Ye){const st=Ye[Te];for(const Be in st)H(st[Be].object),delete st[Be];delete Ye[Te]}delete h[ue.id]}function Ee(ue){for(const Ye in h){const Te=h[Ye];if(Te[ue.id]===void 0)continue;const st=Te[ue.id];for(const Be in st)H(st[Be].object),delete st[Be];delete Te[ue.id]}}function ot(){wt(),x=!0,v!==m&&(v=m,D(v.object))}function wt(){m.geometry=null,m.program=null,m.wireframe=!1}return{setup:E,reset:ot,resetDefaultState:wt,dispose:J,releaseStatesOfGeometry:ne,releaseStatesOfProgram:Ee,initAttributes:W,enableAttribute:Z,disableUnusedAttributes:X}}function $Ve(t,e,n,r){const i=r.isWebGL2;let o;function u(x){o=x}function h(x,E){t.drawArrays(o,x,E),n.update(E,o,1)}function m(x,E,M){if(M===0)return;let D,H;if(i)D=t,H="drawArraysInstanced";else if(D=e.get("ANGLE_instanced_arrays"),H="drawArraysInstancedANGLE",D===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}D[H](o,x,E,M),n.update(E,o,M)}function v(x,E,M){if(M===0)return;const D=e.get("WEBGL_multi_draw");if(D===null)for(let H=0;H<M;H++)this.render(x[H],E[H]);else{D.multiDrawArraysWEBGL(o,x,0,E,0,M);let H=0;for(let F=0;F<M;F++)H+=E[F];n.update(H,o,1)}}this.setMode=u,this.render=h,this.renderInstances=m,this.renderMultiDraw=v}function KVe(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const se=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(se.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(se){if(se==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";se="mediump"}return se==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const u=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let h=n.precision!==void 0?n.precision:"highp";const m=o(h);m!==h&&(console.warn("THREE.WebGLRenderer:",h,"not supported, using",m,"instead."),h=m);const v=u||e.has("WEBGL_draw_buffers"),x=n.logarithmicDepthBuffer===!0,E=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),M=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),D=t.getParameter(t.MAX_TEXTURE_SIZE),H=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),F=t.getParameter(t.MAX_VERTEX_ATTRIBS),B=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),z=t.getParameter(t.MAX_VARYING_VECTORS),P=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),W=M>0,Z=u||e.has("OES_texture_float"),ve=W&&Z,X=u?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:u,drawBuffers:v,getMaxAnisotropy:i,getMaxPrecision:o,precision:h,logarithmicDepthBuffer:x,maxTextures:E,maxVertexTextures:M,maxTextureSize:D,maxCubemapSize:H,maxAttributes:F,maxVertexUniforms:B,maxVaryings:z,maxFragmentUniforms:P,vertexTextures:W,floatFragmentTextures:Z,floatVertexTextures:ve,maxSamples:X}}function XVe(t){const e=this;let n=null,r=0,i=!1,o=!1;const u=new Em,h=new pr,m={value:null,needsUpdate:!1};this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(E,M){const D=E.length!==0||M||r!==0||i;return i=M,r=E.length,D},this.beginShadows=function(){o=!0,x(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(E,M){n=x(E,M,0)},this.setState=function(E,M,D){const H=E.clippingPlanes,F=E.clipIntersection,B=E.clipShadows,z=t.get(E);if(!i||H===null||H.length===0||o&&!B)o?x(null):v();else{const P=o?0:r,W=P*4;let Z=z.clippingState||null;m.value=Z,Z=x(H,M,W,D);for(let ve=0;ve!==W;++ve)Z[ve]=n[ve];z.clippingState=Z,this.numIntersection=F?this.numPlanes:0,this.numPlanes+=P}};function v(){m.value!==n&&(m.value=n,m.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function x(E,M,D,H){const F=E!==null?E.length:0;let B=null;if(F!==0){if(B=m.value,H!==!0||B===null){const z=D+F*4,P=M.matrixWorldInverse;h.getNormalMatrix(P),(B===null||B.length<z)&&(B=new Float32Array(z));for(let W=0,Z=D;W!==F;++W,Z+=4)u.copy(E[W]).applyMatrix4(P,h),u.normal.toArray(B,Z),B[Z+3]=u.constant}m.value=B,m.needsUpdate=!0}return e.numPlanes=F,e.numIntersection=0,B}}function qVe(t){let e=new WeakMap;function n(u,h){return h===ON?u.mapping=o1:h===kW&&(u.mapping=a1),u}function r(u){if(u&&u.isTexture){const h=u.mapping;if(h===ON||h===kW)if(e.has(u)){const m=e.get(u).texture;return n(m,u.mapping)}else{const m=u.image;if(m&&m.height>0){const v=new a4e(m.height);return v.fromEquirectangularTexture(t,u),e.set(u,v),u.addEventListener("dispose",i),n(v.texture,u.mapping)}else return null}}return u}function i(u){const h=u.target;h.removeEventListener("dispose",i);const m=e.get(h);m!==void 0&&(e.delete(h),m.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class hM extends RF{constructor(e=-1,n=1,r=1,i=-1,o=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=u,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,u=r+e,h=i+n,m=i-n;if(this.view!==null&&this.view.enabled){const v=(this.right-this.left)/this.view.fullWidth/this.zoom,x=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=v*this.view.offsetX,u=o+v*this.view.width,h-=x*this.view.offsetY,m=h-x*this.view.height}this.projectionMatrix.makeOrthographic(o,u,h,m,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Ow=4,Xye=[.125,.215,.35,.446,.526,.582],y0=20,AG=new hM,qye=new _n;let IG=null,RG=0,DG=0;const m0=(1+Math.sqrt(5))/2,lw=1/m0,Yye=[new Fe(1,1,1),new Fe(-1,1,1),new Fe(1,1,-1),new Fe(-1,1,-1),new Fe(0,m0,lw),new Fe(0,m0,-lw),new Fe(lw,0,m0),new Fe(-lw,0,m0),new Fe(m0,lw,0),new Fe(-m0,lw,0)];class Zye{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){IG=this._renderer.getRenderTarget(),RG=this._renderer.getActiveCubeFace(),DG=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ebe(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Jye(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(IG,RG,DG),e.scissorTest=!1,_L(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===o1||e.mapping===a1?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),IG=this._renderer.getRenderTarget(),RG=this._renderer.getActiveCubeFace(),DG=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:ro,minFilter:ro,generateMipmaps:!1,type:RT,format:mu,colorSpace:_p,depthBuffer:!1},i=Qye(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Qye(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=YVe(o)),this._blurMaterial=ZVe(o,e,n)}return i}_compileMaterial(e){const n=new _s(this._lodPlanes[0],e);this._renderer.compile(n,AG)}_sceneToCubeUV(e,n,r,i){const h=new js(90,1,n,r),m=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],x=this._renderer,E=x.autoClear,M=x.toneMapping;x.getClearColor(qye),x.toneMapping=jm,x.autoClear=!1;const D=new u1({name:"PMREM.Background",side:Rs,depthWrite:!1,depthTest:!1}),H=new _s(new cM,D);let F=!1;const B=e.background;B?B.isColor&&(D.color.copy(B),e.background=null,F=!0):(D.color.copy(qye),F=!0);for(let z=0;z<6;z++){const P=z%3;P===0?(h.up.set(0,m[z],0),h.lookAt(v[z],0,0)):P===1?(h.up.set(0,0,m[z]),h.lookAt(0,v[z],0)):(h.up.set(0,m[z],0),h.lookAt(0,0,v[z]));const W=this._cubeSize;_L(i,P*W,z>2?W:0,W,W),x.setRenderTarget(i),F&&x.render(H,h),x.render(e,h)}H.geometry.dispose(),H.material.dispose(),x.toneMapping=M,x.autoClear=E,e.background=B}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===o1||e.mapping===a1;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=ebe()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Jye());const o=i?this._cubemapMaterial:this._equirectMaterial,u=new _s(this._lodPlanes[0],o),h=o.uniforms;h.envMap.value=e;const m=this._cubeSize;_L(n,0,0,3*m,2*m),r.setRenderTarget(n),r.render(u,AG)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),u=Yye[(i-1)%Yye.length];this._blur(e,i-1,i,o,u)}n.autoClear=r}_blur(e,n,r,i,o){const u=this._pingPongRenderTarget;this._halfBlur(e,u,n,r,i,"latitudinal",o),this._halfBlur(u,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,u,h){const m=this._renderer,v=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const x=3,E=new _s(this._lodPlanes[i],v),M=v.uniforms,D=this._sizeLods[r]-1,H=isFinite(o)?Math.PI/(2*D):2*Math.PI/(2*y0-1),F=o/H,B=isFinite(o)?1+Math.floor(x*F):y0;B>y0&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${B} samples when the maximum is set to ${y0}`);const z=[];let P=0;for(let se=0;se<y0;++se){const pe=se/F,J=Math.exp(-pe*pe/2);z.push(J),se===0?P+=J:se<B&&(P+=2*J)}for(let se=0;se<z.length;se++)z[se]=z[se]/P;M.envMap.value=e.texture,M.samples.value=B,M.weights.value=z,M.latitudinal.value=u==="latitudinal",h&&(M.poleAxis.value=h);const{_lodMax:W}=this;M.dTheta.value=H,M.mipInt.value=W-r;const Z=this._sizeLods[i],ve=3*Z*(i>W-Ow?i-W+Ow:0),X=4*(this._cubeSize-Z);_L(n,ve,X,3*Z,2*Z),m.setRenderTarget(n),m.render(E,AG)}}function YVe(t){const e=[],n=[],r=[];let i=t;const o=t-Ow+1+Xye.length;for(let u=0;u<o;u++){const h=Math.pow(2,i);n.push(h);let m=1/h;u>t-Ow?m=Xye[u-t+Ow-1]:u===0&&(m=0),r.push(m);const v=1/(h-2),x=-v,E=1+v,M=[x,x,E,x,E,E,x,x,E,E,x,E],D=6,H=6,F=3,B=2,z=1,P=new Float32Array(F*H*D),W=new Float32Array(B*H*D),Z=new Float32Array(z*H*D);for(let X=0;X<D;X++){const se=X%3*2/3-1,pe=X>2?0:-1,J=[se,pe,0,se+2/3,pe,0,se+2/3,pe+1,0,se,pe,0,se+2/3,pe+1,0,se,pe+1,0];P.set(J,F*H*X),W.set(M,B*H*X);const ne=[X,X,X,X,X,X];Z.set(ne,z*H*X)}const ve=new ko;ve.setAttribute("position",new Za(P,F)),ve.setAttribute("uv",new Za(W,B)),ve.setAttribute("faceIndex",new Za(Z,z)),e.push(ve),i>Ow&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function Qye(t,e,n){const r=new Pl(t,e,n);return r.texture.mapping=kF,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function _L(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function ZVe(t,e,n){const r=new Float32Array(y0),i=new Fe(0,1,0);return new Aa({name:"SphericalGaussianBlur",defines:{n:y0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:O7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:xu,depthTest:!1,depthWrite:!1})}function Jye(){return new Aa({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:O7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:xu,depthTest:!1,depthWrite:!1})}function ebe(){return new Aa({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:O7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:xu,depthTest:!1,depthWrite:!1})}function O7(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function QVe(t){let e=new WeakMap,n=null;function r(h){if(h&&h.isTexture){const m=h.mapping,v=m===ON||m===kW,x=m===o1||m===a1;if(v||x)if(h.isRenderTargetTexture&&h.needsPMREMUpdate===!0){h.needsPMREMUpdate=!1;let E=e.get(h);return n===null&&(n=new Zye(t)),E=v?n.fromEquirectangular(h,E):n.fromCubemap(h,E),e.set(h,E),E.texture}else{if(e.has(h))return e.get(h).texture;{const E=h.image;if(v&&E&&E.height>0||x&&E&&i(E)){n===null&&(n=new Zye(t));const M=v?n.fromEquirectangular(h):n.fromCubemap(h);return e.set(h,M),h.addEventListener("dispose",o),M.texture}else return null}}}return h}function i(h){let m=0;const v=6;for(let x=0;x<v;x++)h[x]!==void 0&&m++;return m===v}function o(h){const m=h.target;m.removeEventListener("dispose",o);const v=e.get(m);v!==void 0&&(e.delete(m),v.dispose())}function u(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:u}}function JVe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function eje(t,e,n,r){const i={},o=new WeakMap;function u(E){const M=E.target;M.index!==null&&e.remove(M.index);for(const H in M.attributes)e.remove(M.attributes[H]);for(const H in M.morphAttributes){const F=M.morphAttributes[H];for(let B=0,z=F.length;B<z;B++)e.remove(F[B])}M.removeEventListener("dispose",u),delete i[M.id];const D=o.get(M);D&&(e.remove(D),o.delete(M)),r.releaseStatesOfGeometry(M),M.isInstancedBufferGeometry===!0&&delete M._maxInstanceCount,n.memory.geometries--}function h(E,M){return i[M.id]===!0||(M.addEventListener("dispose",u),i[M.id]=!0,n.memory.geometries++),M}function m(E){const M=E.attributes;for(const H in M)e.update(M[H],t.ARRAY_BUFFER);const D=E.morphAttributes;for(const H in D){const F=D[H];for(let B=0,z=F.length;B<z;B++)e.update(F[B],t.ARRAY_BUFFER)}}function v(E){const M=[],D=E.index,H=E.attributes.position;let F=0;if(D!==null){const P=D.array;F=D.version;for(let W=0,Z=P.length;W<Z;W+=3){const ve=P[W+0],X=P[W+1],se=P[W+2];M.push(ve,X,X,se,se,ve)}}else if(H!==void 0){const P=H.array;F=H.version;for(let W=0,Z=P.length/3-1;W<Z;W+=3){const ve=W+0,X=W+1,se=W+2;M.push(ve,X,X,se,se,ve)}}else return;const B=new(HSe(M)?XSe:R7)(M,1);B.version=F;const z=o.get(E);z&&e.remove(z),o.set(E,B)}function x(E){const M=o.get(E);if(M){const D=E.index;D!==null&&M.version<D.version&&v(E)}else v(E);return o.get(E)}return{get:h,update:m,getWireframeAttribute:x}}function tje(t,e,n,r){const i=r.isWebGL2;let o;function u(D){o=D}let h,m;function v(D){h=D.type,m=D.bytesPerElement}function x(D,H){t.drawElements(o,H,h,D*m),n.update(H,o,1)}function E(D,H,F){if(F===0)return;let B,z;if(i)B=t,z="drawElementsInstanced";else if(B=e.get("ANGLE_instanced_arrays"),z="drawElementsInstancedANGLE",B===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}B[z](o,H,h,D*m,F),n.update(H,o,F)}function M(D,H,F){if(F===0)return;const B=e.get("WEBGL_multi_draw");if(B===null)for(let z=0;z<F;z++)this.render(D[z]/m,H[z]);else{B.multiDrawElementsWEBGL(o,H,0,h,D,0,F);let z=0;for(let P=0;P<F;P++)z+=H[P];n.update(z,o,1)}}this.setMode=u,this.setIndex=v,this.render=x,this.renderInstances=E,this.renderMultiDraw=M}function nje(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,u,h){switch(n.calls++,u){case t.TRIANGLES:n.triangles+=h*(o/3);break;case t.LINES:n.lines+=h*(o/2);break;case t.LINE_STRIP:n.lines+=h*(o-1);break;case t.LINE_LOOP:n.lines+=h*o;break;case t.POINTS:n.points+=h*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function rje(t,e){return t[0]-e[0]}function ije(t,e){return Math.abs(e[1])-Math.abs(t[1])}function sje(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,u=new Ar,h=[];for(let v=0;v<8;v++)h[v]=[v,0];function m(v,x,E){const M=v.morphTargetInfluences;if(e.isWebGL2===!0){const H=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,F=H!==void 0?H.length:0;let B=o.get(x);if(B===void 0||B.count!==F){let Ye=function(){wt.dispose(),o.delete(x),x.removeEventListener("dispose",Ye)};var D=Ye;B!==void 0&&B.texture.dispose();const W=x.morphAttributes.position!==void 0,Z=x.morphAttributes.normal!==void 0,ve=x.morphAttributes.color!==void 0,X=x.morphAttributes.position||[],se=x.morphAttributes.normal||[],pe=x.morphAttributes.color||[];let J=0;W===!0&&(J=1),Z===!0&&(J=2),ve===!0&&(J=3);let ne=x.attributes.position.count*J,Ee=1;ne>e.maxTextureSize&&(Ee=Math.ceil(ne/e.maxTextureSize),ne=e.maxTextureSize);const ot=new Float32Array(ne*Ee*4*F),wt=new $Se(ot,ne,Ee,F);wt.type=Pd,wt.needsUpdate=!0;const ue=J*4;for(let Te=0;Te<F;Te++){const st=X[Te],Be=se[Te],Xe=pe[Te],qe=ne*Ee*4*Te;for(let dt=0;dt<st.count;dt++){const Pt=dt*ue;W===!0&&(u.fromBufferAttribute(st,dt),ot[qe+Pt+0]=u.x,ot[qe+Pt+1]=u.y,ot[qe+Pt+2]=u.z,ot[qe+Pt+3]=0),Z===!0&&(u.fromBufferAttribute(Be,dt),ot[qe+Pt+4]=u.x,ot[qe+Pt+5]=u.y,ot[qe+Pt+6]=u.z,ot[qe+Pt+7]=0),ve===!0&&(u.fromBufferAttribute(Xe,dt),ot[qe+Pt+8]=u.x,ot[qe+Pt+9]=u.y,ot[qe+Pt+10]=u.z,ot[qe+Pt+11]=Xe.itemSize===4?u.w:1)}}B={count:F,texture:wt,size:new an(ne,Ee)},o.set(x,B),x.addEventListener("dispose",Ye)}let z=0;for(let W=0;W<M.length;W++)z+=M[W];const P=x.morphTargetsRelative?1:1-z;E.getUniforms().setValue(t,"morphTargetBaseInfluence",P),E.getUniforms().setValue(t,"morphTargetInfluences",M),E.getUniforms().setValue(t,"morphTargetsTexture",B.texture,n),E.getUniforms().setValue(t,"morphTargetsTextureSize",B.size)}else{const H=M===void 0?0:M.length;let F=r[x.id];if(F===void 0||F.length!==H){F=[];for(let Z=0;Z<H;Z++)F[Z]=[Z,0];r[x.id]=F}for(let Z=0;Z<H;Z++){const ve=F[Z];ve[0]=Z,ve[1]=M[Z]}F.sort(ije);for(let Z=0;Z<8;Z++)Z<H&&F[Z][1]?(h[Z][0]=F[Z][0],h[Z][1]=F[Z][1]):(h[Z][0]=Number.MAX_SAFE_INTEGER,h[Z][1]=0);h.sort(rje);const B=x.morphAttributes.position,z=x.morphAttributes.normal;let P=0;for(let Z=0;Z<8;Z++){const ve=h[Z],X=ve[0],se=ve[1];X!==Number.MAX_SAFE_INTEGER&&se?(B&&x.getAttribute("morphTarget"+Z)!==B[X]&&x.setAttribute("morphTarget"+Z,B[X]),z&&x.getAttribute("morphNormal"+Z)!==z[X]&&x.setAttribute("morphNormal"+Z,z[X]),i[Z]=se,P+=se):(B&&x.hasAttribute("morphTarget"+Z)===!0&&x.deleteAttribute("morphTarget"+Z),z&&x.hasAttribute("morphNormal"+Z)===!0&&x.deleteAttribute("morphNormal"+Z),i[Z]=0)}const W=x.morphTargetsRelative?1:1-P;E.getUniforms().setValue(t,"morphTargetBaseInfluence",W),E.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:m}}function oje(t,e,n,r){let i=new WeakMap;function o(m){const v=r.render.frame,x=m.geometry,E=e.get(m,x);if(i.get(E)!==v&&(e.update(E),i.set(E,v)),m.isInstancedMesh&&(m.hasEventListener("dispose",h)===!1&&m.addEventListener("dispose",h),i.get(m)!==v&&(n.update(m.instanceMatrix,t.ARRAY_BUFFER),m.instanceColor!==null&&n.update(m.instanceColor,t.ARRAY_BUFFER),i.set(m,v))),m.isSkinnedMesh){const M=m.skeleton;i.get(M)!==v&&(M.update(),i.set(M,v))}return E}function u(){i=new WeakMap}function h(m){const v=m.target;v.removeEventListener("dispose",h),n.remove(v.instanceMatrix),v.instanceColor!==null&&n.remove(v.instanceColor)}return{update:o,dispose:u}}class L7 extends Yi{constructor(e,n,r,i,o,u,h,m,v,x){if(x=x!==void 0?x:k0,x!==k0&&x!==U0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&x===k0&&(r=ip),r===void 0&&x===U0&&(r=Hm),super(null,i,o,u,h,m,x,r,v),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=h!==void 0?h:To,this.minFilter=m!==void 0?m:To,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const ZSe=new Yi,QSe=new L7(1,1);QSe.compareFunction=jSe;const JSe=new $Se,eEe=new G5e,tEe=new DF,tbe=[],nbe=[],rbe=new Float32Array(16),ibe=new Float32Array(9),sbe=new Float32Array(4);function w1(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=tbe[i];if(o===void 0&&(o=new Float32Array(i),tbe[i]=o),e!==0){r.toArray(o,0);for(let u=1,h=0;u!==e;++u)h+=n,t[u].toArray(o,h)}return o}function Ws(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function $s(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function OF(t,e){let n=nbe[e];n===void 0&&(n=new Int32Array(e),nbe[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function aje(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function lje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ws(n,e))return;t.uniform2fv(this.addr,e),$s(n,e)}}function uje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ws(n,e))return;t.uniform3fv(this.addr,e),$s(n,e)}}function cje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ws(n,e))return;t.uniform4fv(this.addr,e),$s(n,e)}}function dje(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ws(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),$s(n,e)}else{if(Ws(n,r))return;sbe.set(r),t.uniformMatrix2fv(this.addr,!1,sbe),$s(n,r)}}function hje(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ws(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),$s(n,e)}else{if(Ws(n,r))return;ibe.set(r),t.uniformMatrix3fv(this.addr,!1,ibe),$s(n,r)}}function pje(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Ws(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),$s(n,e)}else{if(Ws(n,r))return;rbe.set(r),t.uniformMatrix4fv(this.addr,!1,rbe),$s(n,r)}}function fje(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function mje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ws(n,e))return;t.uniform2iv(this.addr,e),$s(n,e)}}function gje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ws(n,e))return;t.uniform3iv(this.addr,e),$s(n,e)}}function vje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ws(n,e))return;t.uniform4iv(this.addr,e),$s(n,e)}}function yje(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function bje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ws(n,e))return;t.uniform2uiv(this.addr,e),$s(n,e)}}function _je(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Ws(n,e))return;t.uniform3uiv(this.addr,e),$s(n,e)}}function wje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ws(n,e))return;t.uniform4uiv(this.addr,e),$s(n,e)}}function xje(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const o=this.type===t.SAMPLER_2D_SHADOW?QSe:ZSe;n.setTexture2D(e||o,i)}function Sje(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||eEe,i)}function Eje(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||tEe,i)}function Cje(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||JSe,i)}function Pje(t){switch(t){case 5126:return aje;case 35664:return lje;case 35665:return uje;case 35666:return cje;case 35674:return dje;case 35675:return hje;case 35676:return pje;case 5124:case 35670:return fje;case 35667:case 35671:return mje;case 35668:case 35672:return gje;case 35669:case 35673:return vje;case 5125:return yje;case 36294:return bje;case 36295:return _je;case 36296:return wje;case 35678:case 36198:case 36298:case 36306:case 35682:return xje;case 35679:case 36299:case 36307:return Sje;case 35680:case 36300:case 36308:case 36293:return Eje;case 36289:case 36303:case 36311:case 36292:return Cje}}function Tje(t,e){t.uniform1fv(this.addr,e)}function Mje(t,e){const n=w1(e,this.size,2);t.uniform2fv(this.addr,n)}function kje(t,e){const n=w1(e,this.size,3);t.uniform3fv(this.addr,n)}function Aje(t,e){const n=w1(e,this.size,4);t.uniform4fv(this.addr,n)}function Ije(t,e){const n=w1(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Rje(t,e){const n=w1(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Dje(t,e){const n=w1(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Oje(t,e){t.uniform1iv(this.addr,e)}function Lje(t,e){t.uniform2iv(this.addr,e)}function Nje(t,e){t.uniform3iv(this.addr,e)}function Fje(t,e){t.uniform4iv(this.addr,e)}function Bje(t,e){t.uniform1uiv(this.addr,e)}function Uje(t,e){t.uniform2uiv(this.addr,e)}function zje(t,e){t.uniform3uiv(this.addr,e)}function Vje(t,e){t.uniform4uiv(this.addr,e)}function jje(t,e,n){const r=this.cache,i=e.length,o=OF(n,i);Ws(r,o)||(t.uniform1iv(this.addr,o),$s(r,o));for(let u=0;u!==i;++u)n.setTexture2D(e[u]||ZSe,o[u])}function Hje(t,e,n){const r=this.cache,i=e.length,o=OF(n,i);Ws(r,o)||(t.uniform1iv(this.addr,o),$s(r,o));for(let u=0;u!==i;++u)n.setTexture3D(e[u]||eEe,o[u])}function Gje(t,e,n){const r=this.cache,i=e.length,o=OF(n,i);Ws(r,o)||(t.uniform1iv(this.addr,o),$s(r,o));for(let u=0;u!==i;++u)n.setTextureCube(e[u]||tEe,o[u])}function Wje(t,e,n){const r=this.cache,i=e.length,o=OF(n,i);Ws(r,o)||(t.uniform1iv(this.addr,o),$s(r,o));for(let u=0;u!==i;++u)n.setTexture2DArray(e[u]||JSe,o[u])}function $je(t){switch(t){case 5126:return Tje;case 35664:return Mje;case 35665:return kje;case 35666:return Aje;case 35674:return Ije;case 35675:return Rje;case 35676:return Dje;case 5124:case 35670:return Oje;case 35667:case 35671:return Lje;case 35668:case 35672:return Nje;case 35669:case 35673:return Fje;case 5125:return Bje;case 36294:return Uje;case 36295:return zje;case 36296:return Vje;case 35678:case 36198:case 36298:case 36306:case 35682:return jje;case 35679:case 36299:case 36307:return Hje;case 35680:case 36300:case 36308:case 36293:return Gje;case 36289:case 36303:case 36311:case 36292:return Wje}}class Kje{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=Pje(n.type)}}class Xje{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=$je(n.type)}}class qje{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,u=i.length;o!==u;++o){const h=i[o];h.setValue(e,n[h.id],r)}}}const OG=/(\w+)(\])?(\[|\.)?/g;function obe(t,e){t.seq.push(e),t.map[e.id]=e}function Yje(t,e,n){const r=t.name,i=r.length;for(OG.lastIndex=0;;){const o=OG.exec(r),u=OG.lastIndex;let h=o[1];const m=o[2]==="]",v=o[3];if(m&&(h=h|0),v===void 0||v==="["&&u+2===i){obe(n,v===void 0?new Kje(h,t,e):new Xje(h,t,e));break}else{let E=n.map[h];E===void 0&&(E=new qje(h),obe(n,E)),n=E}}}class QL{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),u=e.getUniformLocation(n,o.name);Yje(o,u,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,u=n.length;o!==u;++o){const h=n[o],m=r[h.id];m.needsUpdate!==!1&&h.setValue(e,m.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const u=e[i];u.id in n&&r.push(u)}return r}}function abe(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const Zje=37297;let Qje=0;function Jje(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let u=i;u<o;u++){const h=u+1;r.push(`${h===e?">":" "} ${h}: ${n[u]}`)}return r.join(`
`)}function e6e(t){const e=li.getPrimaries(li.workingColorSpace),n=li.getPrimaries(t);let r;switch(e===n?r="":e===zN&&n===UN?r="LinearDisplayP3ToLinearSRGB":e===UN&&n===zN&&(r="LinearSRGBToLinearDisplayP3"),t){case _p:case IF:return[r,"LinearTransferOETF"];case is:case k7:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function lbe(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const u=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+Jje(t.getShaderSource(e),u)}else return i}function t6e(t,e){const n=e6e(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function n6e(t,e){let n;switch(e){case ZUe:n="Linear";break;case QUe:n="Reinhard";break;case JUe:n="OptimizedCineon";break;case e5e:n="ACESFilmic";break;case n5e:n="AgX";break;case t5e:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function r6e(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.alphaToCoverage||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Lw).join(`
`)}function i6e(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Lw).join(`
`)}function s6e(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function o6e(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),u=o.name;let h=1;o.type===t.FLOAT_MAT2&&(h=2),o.type===t.FLOAT_MAT3&&(h=3),o.type===t.FLOAT_MAT4&&(h=4),n[u]={type:o.type,location:t.getAttribLocation(e,u),locationSize:h}}return n}function Lw(t){return t!==""}function ube(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function cbe(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const a6e=/^[ \t]*#include +<([\w\d./]+)>/gm;function OW(t){return t.replace(a6e,u6e)}const l6e=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function u6e(t,e){let n=hr[e];if(n===void 0){const r=l6e.get(e);if(r!==void 0)n=hr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return OW(n)}const c6e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dbe(t){return t.replace(c6e,d6e)}function d6e(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function hbe(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	`;return t.isWebGL2&&(e+=`precision ${t.precision} sampler3D;
		precision ${t.precision} sampler2DArray;
		precision ${t.precision} sampler2DShadow;
		precision ${t.precision} samplerCubeShadow;
		precision ${t.precision} sampler2DArrayShadow;
		precision ${t.precision} isampler2D;
		precision ${t.precision} isampler3D;
		precision ${t.precision} isamplerCube;
		precision ${t.precision} isampler2DArray;
		precision ${t.precision} usampler2D;
		precision ${t.precision} usampler3D;
		precision ${t.precision} usamplerCube;
		precision ${t.precision} usampler2DArray;
		`),t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function h6e(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===kSe?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===VUe?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Qh&&(e="SHADOWMAP_TYPE_VSM"),e}function p6e(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case o1:case a1:e="ENVMAP_TYPE_CUBE";break;case kF:e="ENVMAP_TYPE_CUBE_UV";break}return e}function f6e(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case a1:e="ENVMAP_MODE_REFRACTION";break}return e}function m6e(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case MF:e="ENVMAP_BLENDING_MULTIPLY";break;case qUe:e="ENVMAP_BLENDING_MIX";break;case YUe:e="ENVMAP_BLENDING_ADD";break}return e}function g6e(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function v6e(t,e,n,r){const i=t.getContext(),o=n.defines;let u=n.vertexShader,h=n.fragmentShader;const m=h6e(n),v=p6e(n),x=f6e(n),E=m6e(n),M=g6e(n),D=n.isWebGL2?"":r6e(n),H=i6e(n),F=s6e(o),B=i.createProgram();let z,P,W=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(z=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,F].filter(Lw).join(`
`),z.length>0&&(z+=`
`),P=[D,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,F].filter(Lw).join(`
`),P.length>0&&(P+=`
`)):(z=[hbe(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,F,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+x:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+m:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Lw).join(`
`),P=[D,hbe(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,F,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.envMap?"#define "+x:"",n.envMap?"#define "+E:"",M?"#define CUBEUV_TEXEL_WIDTH "+M.texelWidth:"",M?"#define CUBEUV_TEXEL_HEIGHT "+M.texelHeight:"",M?"#define CUBEUV_MAX_MIP "+M.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+m:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==jm?"#define TONE_MAPPING":"",n.toneMapping!==jm?hr.tonemapping_pars_fragment:"",n.toneMapping!==jm?n6e("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",hr.colorspace_pars_fragment,t6e("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Lw).join(`
`)),u=OW(u),u=ube(u,n),u=cbe(u,n),h=OW(h),h=ube(h,n),h=cbe(h,n),u=dbe(u),h=dbe(h),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(W=`#version 300 es
`,z=[H,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+z,P=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===IW?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===IW?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+P);const Z=W+z+u,ve=W+P+h,X=abe(i,i.VERTEX_SHADER,Z),se=abe(i,i.FRAGMENT_SHADER,ve);i.attachShader(B,X),i.attachShader(B,se),n.index0AttributeName!==void 0?i.bindAttribLocation(B,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(B,0,"position"),i.linkProgram(B);function pe(ot){if(t.debug.checkShaderErrors){const wt=i.getProgramInfoLog(B).trim(),ue=i.getShaderInfoLog(X).trim(),Ye=i.getShaderInfoLog(se).trim();let Te=!0,st=!0;if(i.getProgramParameter(B,i.LINK_STATUS)===!1)if(Te=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,B,X,se);else{const Be=lbe(i,X,"vertex"),Xe=lbe(i,se,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(B,i.VALIDATE_STATUS)+`

Material Name: `+ot.name+`
Material Type: `+ot.type+`

Program Info Log: `+wt+`
`+Be+`
`+Xe)}else wt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",wt):(ue===""||Ye==="")&&(st=!1);st&&(ot.diagnostics={runnable:Te,programLog:wt,vertexShader:{log:ue,prefix:z},fragmentShader:{log:Ye,prefix:P}})}i.deleteShader(X),i.deleteShader(se),J=new QL(i,B),ne=o6e(i,B)}let J;this.getUniforms=function(){return J===void 0&&pe(this),J};let ne;this.getAttributes=function(){return ne===void 0&&pe(this),ne};let Ee=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Ee===!1&&(Ee=i.getProgramParameter(B,Zje)),Ee},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(B),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Qje++,this.cacheKey=e,this.usedTimes=1,this.program=B,this.vertexShader=X,this.fragmentShader=se,this}let y6e=0;class b6e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),u=this._getShaderCacheForMaterial(e);return u.has(i)===!1&&(u.add(i),i.usedTimes++),u.has(o)===!1&&(u.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new _6e(e),n.set(e,r)),r}}class _6e{constructor(e){this.id=y6e++,this.code=e,this.usedTimes=0}}function w6e(t,e,n,r,i,o,u){const h=new I7,m=new b6e,v=new Set,x=[],E=i.isWebGL2,M=i.logarithmicDepthBuffer,D=i.vertexTextures;let H=i.precision;const F={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function B(ne){return v.add(ne),ne===0?"uv":`uv${ne}`}function z(ne,Ee,ot,wt,ue){const Ye=wt.fog,Te=ue.geometry,st=ne.isMeshStandardMaterial?wt.environment:null,Be=(ne.isMeshStandardMaterial?n:e).get(ne.envMap||st),Xe=Be&&Be.mapping===kF?Be.image.height:null,qe=F[ne.type];ne.precision!==null&&(H=i.getMaxPrecision(ne.precision),H!==ne.precision&&console.warn("THREE.WebGLProgram.getParameters:",ne.precision,"not supported, using",H,"instead."));const dt=Te.morphAttributes.position||Te.morphAttributes.normal||Te.morphAttributes.color,Pt=dt!==void 0?dt.length:0;let cn=0;Te.morphAttributes.position!==void 0&&(cn=1),Te.morphAttributes.normal!==void 0&&(cn=2),Te.morphAttributes.color!==void 0&&(cn=3);let ht,Et,$t,Zt;if(qe){const sr=Ed[qe];ht=sr.vertexShader,Et=sr.fragmentShader}else ht=ne.vertexShader,Et=ne.fragmentShader,m.update(ne),$t=m.getVertexShaderID(ne),Zt=m.getFragmentShaderID(ne);const gn=t.getRenderTarget(),Jt=ue.isInstancedMesh===!0,Qn=ue.isBatchedMesh===!0,vn=!!ne.map,Qe=!!ne.matcap,Zr=!!Be,Tn=!!ne.aoMap,wn=!!ne.lightMap,sn=!!ne.bumpMap,Ur=!!ne.normalMap,Mn=!!ne.displacementMap,Se=!!ne.emissiveMap,fe=!!ne.metalnessMap,lt=!!ne.roughnessMap,Dt=ne.anisotropy>0,Ot=ne.clearcoat>0,Mt=ne.iridescence>0,hn=ne.sheen>0,Yt=ne.transmission>0,nn=Dt&&!!ne.anisotropyMap,Rn=Ot&&!!ne.clearcoatMap,$n=Ot&&!!ne.clearcoatNormalMap,Lt=Ot&&!!ne.clearcoatRoughnessMap,mr=Mt&&!!ne.iridescenceMap,ir=Mt&&!!ne.iridescenceThicknessMap,En=hn&&!!ne.sheenColorMap,Pn=hn&&!!ne.sheenRoughnessMap,en=!!ne.specularMap,Bn=!!ne.specularColorMap,Ae=!!ne.specularIntensityMap,jt=Yt&&!!ne.transmissionMap,Kt=Yt&&!!ne.thicknessMap,ln=!!ne.gradientMap,Me=!!ne.alphaMap,zt=ne.alphaTest>0,It=!!ne.alphaHash,un=!!ne.extensions;let Dn=jm;ne.toneMapped&&(gn===null||gn.isXRRenderTarget===!0)&&(Dn=t.toneMapping);const lr={isWebGL2:E,shaderID:qe,shaderType:ne.type,shaderName:ne.name,vertexShader:ht,fragmentShader:Et,defines:ne.defines,customVertexShaderID:$t,customFragmentShaderID:Zt,isRawShaderMaterial:ne.isRawShaderMaterial===!0,glslVersion:ne.glslVersion,precision:H,batching:Qn,instancing:Jt,instancingColor:Jt&&ue.instanceColor!==null,supportsVertexTextures:D,outputColorSpace:gn===null?t.outputColorSpace:gn.isXRRenderTarget===!0?gn.texture.colorSpace:_p,alphaToCoverage:!!ne.alphaToCoverage,map:vn,matcap:Qe,envMap:Zr,envMapMode:Zr&&Be.mapping,envMapCubeUVHeight:Xe,aoMap:Tn,lightMap:wn,bumpMap:sn,normalMap:Ur,displacementMap:D&&Mn,emissiveMap:Se,normalMapObjectSpace:Ur&&ne.normalMapType===v5e,normalMapTangentSpace:Ur&&ne.normalMapType===y1,metalnessMap:fe,roughnessMap:lt,anisotropy:Dt,anisotropyMap:nn,clearcoat:Ot,clearcoatMap:Rn,clearcoatNormalMap:$n,clearcoatRoughnessMap:Lt,iridescence:Mt,iridescenceMap:mr,iridescenceThicknessMap:ir,sheen:hn,sheenColorMap:En,sheenRoughnessMap:Pn,specularMap:en,specularColorMap:Bn,specularIntensityMap:Ae,transmission:Yt,transmissionMap:jt,thicknessMap:Kt,gradientMap:ln,opaque:ne.transparent===!1&&ne.blending===M0&&ne.alphaToCoverage===!1,alphaMap:Me,alphaTest:zt,alphaHash:It,combine:ne.combine,mapUv:vn&&B(ne.map.channel),aoMapUv:Tn&&B(ne.aoMap.channel),lightMapUv:wn&&B(ne.lightMap.channel),bumpMapUv:sn&&B(ne.bumpMap.channel),normalMapUv:Ur&&B(ne.normalMap.channel),displacementMapUv:Mn&&B(ne.displacementMap.channel),emissiveMapUv:Se&&B(ne.emissiveMap.channel),metalnessMapUv:fe&&B(ne.metalnessMap.channel),roughnessMapUv:lt&&B(ne.roughnessMap.channel),anisotropyMapUv:nn&&B(ne.anisotropyMap.channel),clearcoatMapUv:Rn&&B(ne.clearcoatMap.channel),clearcoatNormalMapUv:$n&&B(ne.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Lt&&B(ne.clearcoatRoughnessMap.channel),iridescenceMapUv:mr&&B(ne.iridescenceMap.channel),iridescenceThicknessMapUv:ir&&B(ne.iridescenceThicknessMap.channel),sheenColorMapUv:En&&B(ne.sheenColorMap.channel),sheenRoughnessMapUv:Pn&&B(ne.sheenRoughnessMap.channel),specularMapUv:en&&B(ne.specularMap.channel),specularColorMapUv:Bn&&B(ne.specularColorMap.channel),specularIntensityMapUv:Ae&&B(ne.specularIntensityMap.channel),transmissionMapUv:jt&&B(ne.transmissionMap.channel),thicknessMapUv:Kt&&B(ne.thicknessMap.channel),alphaMapUv:Me&&B(ne.alphaMap.channel),vertexTangents:!!Te.attributes.tangent&&(Ur||Dt),vertexColors:ne.vertexColors,vertexAlphas:ne.vertexColors===!0&&!!Te.attributes.color&&Te.attributes.color.itemSize===4,pointsUvs:ue.isPoints===!0&&!!Te.attributes.uv&&(vn||Me),fog:!!Ye,useFog:ne.fog===!0,fogExp2:!!Ye&&Ye.isFogExp2,flatShading:ne.flatShading===!0,sizeAttenuation:ne.sizeAttenuation===!0,logarithmicDepthBuffer:M,skinning:ue.isSkinnedMesh===!0,morphTargets:Te.morphAttributes.position!==void 0,morphNormals:Te.morphAttributes.normal!==void 0,morphColors:Te.morphAttributes.color!==void 0,morphTargetsCount:Pt,morphTextureStride:cn,numDirLights:Ee.directional.length,numPointLights:Ee.point.length,numSpotLights:Ee.spot.length,numSpotLightMaps:Ee.spotLightMap.length,numRectAreaLights:Ee.rectArea.length,numHemiLights:Ee.hemi.length,numDirLightShadows:Ee.directionalShadowMap.length,numPointLightShadows:Ee.pointShadowMap.length,numSpotLightShadows:Ee.spotShadowMap.length,numSpotLightShadowsWithMaps:Ee.numSpotLightShadowsWithMaps,numLightProbes:Ee.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:ne.dithering,shadowMapEnabled:t.shadowMap.enabled&&ot.length>0,shadowMapType:t.shadowMap.type,toneMapping:Dn,useLegacyLights:t._useLegacyLights,decodeVideoTexture:vn&&ne.map.isVideoTexture===!0&&li.getTransfer(ne.map.colorSpace)===Ti,premultipliedAlpha:ne.premultipliedAlpha,doubleSided:ne.side===Ca,flipSided:ne.side===Rs,useDepthPacking:ne.depthPacking>=0,depthPacking:ne.depthPacking||0,index0AttributeName:ne.index0AttributeName,extensionDerivatives:un&&ne.extensions.derivatives===!0,extensionFragDepth:un&&ne.extensions.fragDepth===!0,extensionDrawBuffers:un&&ne.extensions.drawBuffers===!0,extensionShaderTextureLOD:un&&ne.extensions.shaderTextureLOD===!0,extensionClipCullDistance:un&&ne.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:un&&ne.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:E||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:E||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:E||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:ne.customProgramCacheKey()};return lr.vertexUv1s=v.has(1),lr.vertexUv2s=v.has(2),lr.vertexUv3s=v.has(3),v.clear(),lr}function P(ne){const Ee=[];if(ne.shaderID?Ee.push(ne.shaderID):(Ee.push(ne.customVertexShaderID),Ee.push(ne.customFragmentShaderID)),ne.defines!==void 0)for(const ot in ne.defines)Ee.push(ot),Ee.push(ne.defines[ot]);return ne.isRawShaderMaterial===!1&&(W(Ee,ne),Z(Ee,ne),Ee.push(t.outputColorSpace)),Ee.push(ne.customProgramCacheKey),Ee.join()}function W(ne,Ee){ne.push(Ee.precision),ne.push(Ee.outputColorSpace),ne.push(Ee.envMapMode),ne.push(Ee.envMapCubeUVHeight),ne.push(Ee.mapUv),ne.push(Ee.alphaMapUv),ne.push(Ee.lightMapUv),ne.push(Ee.aoMapUv),ne.push(Ee.bumpMapUv),ne.push(Ee.normalMapUv),ne.push(Ee.displacementMapUv),ne.push(Ee.emissiveMapUv),ne.push(Ee.metalnessMapUv),ne.push(Ee.roughnessMapUv),ne.push(Ee.anisotropyMapUv),ne.push(Ee.clearcoatMapUv),ne.push(Ee.clearcoatNormalMapUv),ne.push(Ee.clearcoatRoughnessMapUv),ne.push(Ee.iridescenceMapUv),ne.push(Ee.iridescenceThicknessMapUv),ne.push(Ee.sheenColorMapUv),ne.push(Ee.sheenRoughnessMapUv),ne.push(Ee.specularMapUv),ne.push(Ee.specularColorMapUv),ne.push(Ee.specularIntensityMapUv),ne.push(Ee.transmissionMapUv),ne.push(Ee.thicknessMapUv),ne.push(Ee.combine),ne.push(Ee.fogExp2),ne.push(Ee.sizeAttenuation),ne.push(Ee.morphTargetsCount),ne.push(Ee.morphAttributeCount),ne.push(Ee.numDirLights),ne.push(Ee.numPointLights),ne.push(Ee.numSpotLights),ne.push(Ee.numSpotLightMaps),ne.push(Ee.numHemiLights),ne.push(Ee.numRectAreaLights),ne.push(Ee.numDirLightShadows),ne.push(Ee.numPointLightShadows),ne.push(Ee.numSpotLightShadows),ne.push(Ee.numSpotLightShadowsWithMaps),ne.push(Ee.numLightProbes),ne.push(Ee.shadowMapType),ne.push(Ee.toneMapping),ne.push(Ee.numClippingPlanes),ne.push(Ee.numClipIntersection),ne.push(Ee.depthPacking)}function Z(ne,Ee){h.disableAll(),Ee.isWebGL2&&h.enable(0),Ee.supportsVertexTextures&&h.enable(1),Ee.instancing&&h.enable(2),Ee.instancingColor&&h.enable(3),Ee.matcap&&h.enable(4),Ee.envMap&&h.enable(5),Ee.normalMapObjectSpace&&h.enable(6),Ee.normalMapTangentSpace&&h.enable(7),Ee.clearcoat&&h.enable(8),Ee.iridescence&&h.enable(9),Ee.alphaTest&&h.enable(10),Ee.vertexColors&&h.enable(11),Ee.vertexAlphas&&h.enable(12),Ee.vertexUv1s&&h.enable(13),Ee.vertexUv2s&&h.enable(14),Ee.vertexUv3s&&h.enable(15),Ee.vertexTangents&&h.enable(16),Ee.anisotropy&&h.enable(17),Ee.alphaHash&&h.enable(18),Ee.batching&&h.enable(19),ne.push(h.mask),h.disableAll(),Ee.fog&&h.enable(0),Ee.useFog&&h.enable(1),Ee.flatShading&&h.enable(2),Ee.logarithmicDepthBuffer&&h.enable(3),Ee.skinning&&h.enable(4),Ee.morphTargets&&h.enable(5),Ee.morphNormals&&h.enable(6),Ee.morphColors&&h.enable(7),Ee.premultipliedAlpha&&h.enable(8),Ee.shadowMapEnabled&&h.enable(9),Ee.useLegacyLights&&h.enable(10),Ee.doubleSided&&h.enable(11),Ee.flipSided&&h.enable(12),Ee.useDepthPacking&&h.enable(13),Ee.dithering&&h.enable(14),Ee.transmission&&h.enable(15),Ee.sheen&&h.enable(16),Ee.opaque&&h.enable(17),Ee.pointsUvs&&h.enable(18),Ee.decodeVideoTexture&&h.enable(19),Ee.alphaToCoverage&&h.enable(20),ne.push(h.mask)}function ve(ne){const Ee=F[ne.type];let ot;if(Ee){const wt=Ed[Ee];ot=r4e.clone(wt.uniforms)}else ot=ne.uniforms;return ot}function X(ne,Ee){let ot;for(let wt=0,ue=x.length;wt<ue;wt++){const Ye=x[wt];if(Ye.cacheKey===Ee){ot=Ye,++ot.usedTimes;break}}return ot===void 0&&(ot=new v6e(t,Ee,ne,o),x.push(ot)),ot}function se(ne){if(--ne.usedTimes===0){const Ee=x.indexOf(ne);x[Ee]=x[x.length-1],x.pop(),ne.destroy()}}function pe(ne){m.remove(ne)}function J(){m.dispose()}return{getParameters:z,getProgramCacheKey:P,getUniforms:ve,acquireProgram:X,releaseProgram:se,releaseShaderCache:pe,programs:x,dispose:J}}function x6e(){let t=new WeakMap;function e(o){let u=t.get(o);return u===void 0&&(u={},t.set(o,u)),u}function n(o){t.delete(o)}function r(o,u,h){t.get(o)[u]=h}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function S6e(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function pbe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function fbe(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function u(E,M,D,H,F,B){let z=t[e];return z===void 0?(z={id:E.id,object:E,geometry:M,material:D,groupOrder:H,renderOrder:E.renderOrder,z:F,group:B},t[e]=z):(z.id=E.id,z.object=E,z.geometry=M,z.material=D,z.groupOrder=H,z.renderOrder=E.renderOrder,z.z=F,z.group=B),e++,z}function h(E,M,D,H,F,B){const z=u(E,M,D,H,F,B);D.transmission>0?r.push(z):D.transparent===!0?i.push(z):n.push(z)}function m(E,M,D,H,F,B){const z=u(E,M,D,H,F,B);D.transmission>0?r.unshift(z):D.transparent===!0?i.unshift(z):n.unshift(z)}function v(E,M){n.length>1&&n.sort(E||S6e),r.length>1&&r.sort(M||pbe),i.length>1&&i.sort(M||pbe)}function x(){for(let E=e,M=t.length;E<M;E++){const D=t[E];if(D.id===null)break;D.id=null,D.object=null,D.geometry=null,D.material=null,D.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:h,unshift:m,finish:x,sort:v}}function E6e(){let t=new WeakMap;function e(r,i){const o=t.get(r);let u;return o===void 0?(u=new fbe,t.set(r,[u])):i>=o.length?(u=new fbe,o.push(u)):u=o[i],u}function n(){t=new WeakMap}return{get:e,dispose:n}}function C6e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Fe,color:new _n};break;case"SpotLight":n={position:new Fe,direction:new Fe,color:new _n,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Fe,color:new _n,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Fe,skyColor:new _n,groundColor:new _n};break;case"RectAreaLight":n={color:new _n,position:new Fe,halfWidth:new Fe,halfHeight:new Fe};break}return t[e.id]=n,n}}}function P6e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new an};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new an};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new an,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let T6e=0;function M6e(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function k6e(t,e){const n=new C6e,r=P6e(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let x=0;x<9;x++)i.probe.push(new Fe);const o=new Fe,u=new Fn,h=new Fn;function m(x,E){let M=0,D=0,H=0;for(let ot=0;ot<9;ot++)i.probe[ot].set(0,0,0);let F=0,B=0,z=0,P=0,W=0,Z=0,ve=0,X=0,se=0,pe=0,J=0;x.sort(M6e);const ne=E===!0?Math.PI:1;for(let ot=0,wt=x.length;ot<wt;ot++){const ue=x[ot],Ye=ue.color,Te=ue.intensity,st=ue.distance,Be=ue.shadow&&ue.shadow.map?ue.shadow.map.texture:null;if(ue.isAmbientLight)M+=Ye.r*Te*ne,D+=Ye.g*Te*ne,H+=Ye.b*Te*ne;else if(ue.isLightProbe){for(let Xe=0;Xe<9;Xe++)i.probe[Xe].addScaledVector(ue.sh.coefficients[Xe],Te);J++}else if(ue.isDirectionalLight){const Xe=n.get(ue);if(Xe.color.copy(ue.color).multiplyScalar(ue.intensity*ne),ue.castShadow){const qe=ue.shadow,dt=r.get(ue);dt.shadowBias=qe.bias,dt.shadowNormalBias=qe.normalBias,dt.shadowRadius=qe.radius,dt.shadowMapSize=qe.mapSize,i.directionalShadow[F]=dt,i.directionalShadowMap[F]=Be,i.directionalShadowMatrix[F]=ue.shadow.matrix,Z++}i.directional[F]=Xe,F++}else if(ue.isSpotLight){const Xe=n.get(ue);Xe.position.setFromMatrixPosition(ue.matrixWorld),Xe.color.copy(Ye).multiplyScalar(Te*ne),Xe.distance=st,Xe.coneCos=Math.cos(ue.angle),Xe.penumbraCos=Math.cos(ue.angle*(1-ue.penumbra)),Xe.decay=ue.decay,i.spot[z]=Xe;const qe=ue.shadow;if(ue.map&&(i.spotLightMap[se]=ue.map,se++,qe.updateMatrices(ue),ue.castShadow&&pe++),i.spotLightMatrix[z]=qe.matrix,ue.castShadow){const dt=r.get(ue);dt.shadowBias=qe.bias,dt.shadowNormalBias=qe.normalBias,dt.shadowRadius=qe.radius,dt.shadowMapSize=qe.mapSize,i.spotShadow[z]=dt,i.spotShadowMap[z]=Be,X++}z++}else if(ue.isRectAreaLight){const Xe=n.get(ue);Xe.color.copy(Ye).multiplyScalar(Te),Xe.halfWidth.set(ue.width*.5,0,0),Xe.halfHeight.set(0,ue.height*.5,0),i.rectArea[P]=Xe,P++}else if(ue.isPointLight){const Xe=n.get(ue);if(Xe.color.copy(ue.color).multiplyScalar(ue.intensity*ne),Xe.distance=ue.distance,Xe.decay=ue.decay,ue.castShadow){const qe=ue.shadow,dt=r.get(ue);dt.shadowBias=qe.bias,dt.shadowNormalBias=qe.normalBias,dt.shadowRadius=qe.radius,dt.shadowMapSize=qe.mapSize,dt.shadowCameraNear=qe.camera.near,dt.shadowCameraFar=qe.camera.far,i.pointShadow[B]=dt,i.pointShadowMap[B]=Be,i.pointShadowMatrix[B]=ue.shadow.matrix,ve++}i.point[B]=Xe,B++}else if(ue.isHemisphereLight){const Xe=n.get(ue);Xe.skyColor.copy(ue.color).multiplyScalar(Te*ne),Xe.groundColor.copy(ue.groundColor).multiplyScalar(Te*ne),i.hemi[W]=Xe,W++}}P>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Qt.LTC_FLOAT_1,i.rectAreaLTC2=Qt.LTC_FLOAT_2):(i.rectAreaLTC1=Qt.LTC_HALF_1,i.rectAreaLTC2=Qt.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Qt.LTC_FLOAT_1,i.rectAreaLTC2=Qt.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Qt.LTC_HALF_1,i.rectAreaLTC2=Qt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=M,i.ambient[1]=D,i.ambient[2]=H;const Ee=i.hash;(Ee.directionalLength!==F||Ee.pointLength!==B||Ee.spotLength!==z||Ee.rectAreaLength!==P||Ee.hemiLength!==W||Ee.numDirectionalShadows!==Z||Ee.numPointShadows!==ve||Ee.numSpotShadows!==X||Ee.numSpotMaps!==se||Ee.numLightProbes!==J)&&(i.directional.length=F,i.spot.length=z,i.rectArea.length=P,i.point.length=B,i.hemi.length=W,i.directionalShadow.length=Z,i.directionalShadowMap.length=Z,i.pointShadow.length=ve,i.pointShadowMap.length=ve,i.spotShadow.length=X,i.spotShadowMap.length=X,i.directionalShadowMatrix.length=Z,i.pointShadowMatrix.length=ve,i.spotLightMatrix.length=X+se-pe,i.spotLightMap.length=se,i.numSpotLightShadowsWithMaps=pe,i.numLightProbes=J,Ee.directionalLength=F,Ee.pointLength=B,Ee.spotLength=z,Ee.rectAreaLength=P,Ee.hemiLength=W,Ee.numDirectionalShadows=Z,Ee.numPointShadows=ve,Ee.numSpotShadows=X,Ee.numSpotMaps=se,Ee.numLightProbes=J,i.version=T6e++)}function v(x,E){let M=0,D=0,H=0,F=0,B=0;const z=E.matrixWorldInverse;for(let P=0,W=x.length;P<W;P++){const Z=x[P];if(Z.isDirectionalLight){const ve=i.directional[M];ve.direction.setFromMatrixPosition(Z.matrixWorld),o.setFromMatrixPosition(Z.target.matrixWorld),ve.direction.sub(o),ve.direction.transformDirection(z),M++}else if(Z.isSpotLight){const ve=i.spot[H];ve.position.setFromMatrixPosition(Z.matrixWorld),ve.position.applyMatrix4(z),ve.direction.setFromMatrixPosition(Z.matrixWorld),o.setFromMatrixPosition(Z.target.matrixWorld),ve.direction.sub(o),ve.direction.transformDirection(z),H++}else if(Z.isRectAreaLight){const ve=i.rectArea[F];ve.position.setFromMatrixPosition(Z.matrixWorld),ve.position.applyMatrix4(z),h.identity(),u.copy(Z.matrixWorld),u.premultiply(z),h.extractRotation(u),ve.halfWidth.set(Z.width*.5,0,0),ve.halfHeight.set(0,Z.height*.5,0),ve.halfWidth.applyMatrix4(h),ve.halfHeight.applyMatrix4(h),F++}else if(Z.isPointLight){const ve=i.point[D];ve.position.setFromMatrixPosition(Z.matrixWorld),ve.position.applyMatrix4(z),D++}else if(Z.isHemisphereLight){const ve=i.hemi[B];ve.direction.setFromMatrixPosition(Z.matrixWorld),ve.direction.transformDirection(z),B++}}}return{setup:m,setupView:v,state:i}}function mbe(t,e){const n=new k6e(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function u(E){r.push(E)}function h(E){i.push(E)}function m(E){n.setup(r,E)}function v(E){n.setupView(r,E)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:m,setupLightsView:v,pushLight:u,pushShadow:h}}function A6e(t,e){let n=new WeakMap;function r(o,u=0){const h=n.get(o);let m;return h===void 0?(m=new mbe(t,e),n.set(o,[m])):u>=h.length?(m=new mbe(t,e),h.push(m)):m=h[u],m}function i(){n=new WeakMap}return{get:r,dispose:i}}class nEe extends Il{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=uM,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class I6e extends Il{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const R6e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,D6e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function O6e(t,e,n){let r=new D7;const i=new an,o=new an,u=new Ar,h=new nEe({depthPacking:g5e}),m=new I6e,v={},x=n.maxTextureSize,E={[Rd]:Rs,[Rs]:Rd,[Ca]:Ca},M=new Aa({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new an},radius:{value:4}},vertexShader:R6e,fragmentShader:D6e}),D=M.clone();D.defines.HORIZONTAL_PASS=1;const H=new ko;H.setAttribute("position",new Za(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const F=new _s(H,M),B=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=kSe;let z=this.type;this.render=function(X,se,pe){if(B.enabled===!1||B.autoUpdate===!1&&B.needsUpdate===!1||X.length===0)return;const J=t.getRenderTarget(),ne=t.getActiveCubeFace(),Ee=t.getActiveMipmapLevel(),ot=t.state;ot.setBlending(xu),ot.buffers.color.setClear(1,1,1,1),ot.buffers.depth.setTest(!0),ot.setScissorTest(!1);const wt=z!==Qh&&this.type===Qh,ue=z===Qh&&this.type!==Qh;for(let Ye=0,Te=X.length;Ye<Te;Ye++){const st=X[Ye],Be=st.shadow;if(Be===void 0){console.warn("THREE.WebGLShadowMap:",st,"has no shadow.");continue}if(Be.autoUpdate===!1&&Be.needsUpdate===!1)continue;i.copy(Be.mapSize);const Xe=Be.getFrameExtents();if(i.multiply(Xe),o.copy(Be.mapSize),(i.x>x||i.y>x)&&(i.x>x&&(o.x=Math.floor(x/Xe.x),i.x=o.x*Xe.x,Be.mapSize.x=o.x),i.y>x&&(o.y=Math.floor(x/Xe.y),i.y=o.y*Xe.y,Be.mapSize.y=o.y)),Be.map===null||wt===!0||ue===!0){const dt=this.type!==Qh?{minFilter:To,magFilter:To}:{};Be.map!==null&&Be.map.dispose(),Be.map=new Pl(i.x,i.y,dt),Be.map.texture.name=st.name+".shadowMap",Be.camera.updateProjectionMatrix()}t.setRenderTarget(Be.map),t.clear();const qe=Be.getViewportCount();for(let dt=0;dt<qe;dt++){const Pt=Be.getViewport(dt);u.set(o.x*Pt.x,o.y*Pt.y,o.x*Pt.z,o.y*Pt.w),ot.viewport(u),Be.updateMatrices(st,dt),r=Be.getFrustum(),Z(se,pe,Be.camera,st,this.type)}Be.isPointLightShadow!==!0&&this.type===Qh&&P(Be,pe),Be.needsUpdate=!1}z=this.type,B.needsUpdate=!1,t.setRenderTarget(J,ne,Ee)};function P(X,se){const pe=e.update(F);M.defines.VSM_SAMPLES!==X.blurSamples&&(M.defines.VSM_SAMPLES=X.blurSamples,D.defines.VSM_SAMPLES=X.blurSamples,M.needsUpdate=!0,D.needsUpdate=!0),X.mapPass===null&&(X.mapPass=new Pl(i.x,i.y)),M.uniforms.shadow_pass.value=X.map.texture,M.uniforms.resolution.value=X.mapSize,M.uniforms.radius.value=X.radius,t.setRenderTarget(X.mapPass),t.clear(),t.renderBufferDirect(se,null,pe,M,F,null),D.uniforms.shadow_pass.value=X.mapPass.texture,D.uniforms.resolution.value=X.mapSize,D.uniforms.radius.value=X.radius,t.setRenderTarget(X.map),t.clear(),t.renderBufferDirect(se,null,pe,D,F,null)}function W(X,se,pe,J){let ne=null;const Ee=pe.isPointLight===!0?X.customDistanceMaterial:X.customDepthMaterial;if(Ee!==void 0)ne=Ee;else if(ne=pe.isPointLight===!0?m:h,t.localClippingEnabled&&se.clipShadows===!0&&Array.isArray(se.clippingPlanes)&&se.clippingPlanes.length!==0||se.displacementMap&&se.displacementScale!==0||se.alphaMap&&se.alphaTest>0||se.map&&se.alphaTest>0){const ot=ne.uuid,wt=se.uuid;let ue=v[ot];ue===void 0&&(ue={},v[ot]=ue);let Ye=ue[wt];Ye===void 0&&(Ye=ne.clone(),ue[wt]=Ye,se.addEventListener("dispose",ve)),ne=Ye}if(ne.visible=se.visible,ne.wireframe=se.wireframe,J===Qh?ne.side=se.shadowSide!==null?se.shadowSide:se.side:ne.side=se.shadowSide!==null?se.shadowSide:E[se.side],ne.alphaMap=se.alphaMap,ne.alphaTest=se.alphaTest,ne.map=se.map,ne.clipShadows=se.clipShadows,ne.clippingPlanes=se.clippingPlanes,ne.clipIntersection=se.clipIntersection,ne.displacementMap=se.displacementMap,ne.displacementScale=se.displacementScale,ne.displacementBias=se.displacementBias,ne.wireframeLinewidth=se.wireframeLinewidth,ne.linewidth=se.linewidth,pe.isPointLight===!0&&ne.isMeshDistanceMaterial===!0){const ot=t.properties.get(ne);ot.light=pe}return ne}function Z(X,se,pe,J,ne){if(X.visible===!1)return;if(X.layers.test(se.layers)&&(X.isMesh||X.isLine||X.isPoints)&&(X.castShadow||X.receiveShadow&&ne===Qh)&&(!X.frustumCulled||r.intersectsObject(X))){X.modelViewMatrix.multiplyMatrices(pe.matrixWorldInverse,X.matrixWorld);const wt=e.update(X),ue=X.material;if(Array.isArray(ue)){const Ye=wt.groups;for(let Te=0,st=Ye.length;Te<st;Te++){const Be=Ye[Te],Xe=ue[Be.materialIndex];if(Xe&&Xe.visible){const qe=W(X,Xe,J,ne);X.onBeforeShadow(t,X,se,pe,wt,qe,Be),t.renderBufferDirect(pe,null,wt,qe,X,Be),X.onAfterShadow(t,X,se,pe,wt,qe,Be)}}}else if(ue.visible){const Ye=W(X,ue,J,ne);X.onBeforeShadow(t,X,se,pe,wt,Ye,null),t.renderBufferDirect(pe,null,wt,Ye,X,null),X.onAfterShadow(t,X,se,pe,wt,Ye,null)}}const ot=X.children;for(let wt=0,ue=ot.length;wt<ue;wt++)Z(ot[wt],se,pe,J,ne)}function ve(X){X.target.removeEventListener("dispose",ve);for(const pe in v){const J=v[pe],ne=X.target.uuid;ne in J&&(J[ne].dispose(),delete J[ne])}}}function L6e(t,e,n){const r=n.isWebGL2;function i(){let Me=!1;const zt=new Ar;let It=null;const un=new Ar(0,0,0,0);return{setMask:function(Dn){It!==Dn&&!Me&&(t.colorMask(Dn,Dn,Dn,Dn),It=Dn)},setLocked:function(Dn){Me=Dn},setClear:function(Dn,lr,sr,dr,Pr){Pr===!0&&(Dn*=dr,lr*=dr,sr*=dr),zt.set(Dn,lr,sr,dr),un.equals(zt)===!1&&(t.clearColor(Dn,lr,sr,dr),un.copy(zt))},reset:function(){Me=!1,It=null,un.set(-1,0,0,0)}}}function o(){let Me=!1,zt=null,It=null,un=null;return{setTest:function(Dn){Dn?Jt(t.DEPTH_TEST):Qn(t.DEPTH_TEST)},setMask:function(Dn){zt!==Dn&&!Me&&(t.depthMask(Dn),zt=Dn)},setFunc:function(Dn){if(It!==Dn){switch(Dn){case jUe:t.depthFunc(t.NEVER);break;case HUe:t.depthFunc(t.ALWAYS);break;case GUe:t.depthFunc(t.LESS);break;case DN:t.depthFunc(t.LEQUAL);break;case WUe:t.depthFunc(t.EQUAL);break;case $Ue:t.depthFunc(t.GEQUAL);break;case KUe:t.depthFunc(t.GREATER);break;case XUe:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}It=Dn}},setLocked:function(Dn){Me=Dn},setClear:function(Dn){un!==Dn&&(t.clearDepth(Dn),un=Dn)},reset:function(){Me=!1,zt=null,It=null,un=null}}}function u(){let Me=!1,zt=null,It=null,un=null,Dn=null,lr=null,sr=null,dr=null,Pr=null;return{setTest:function(qn){Me||(qn?Jt(t.STENCIL_TEST):Qn(t.STENCIL_TEST))},setMask:function(qn){zt!==qn&&!Me&&(t.stencilMask(qn),zt=qn)},setFunc:function(qn,ri,Ji){(It!==qn||un!==ri||Dn!==Ji)&&(t.stencilFunc(qn,ri,Ji),It=qn,un=ri,Dn=Ji)},setOp:function(qn,ri,Ji){(lr!==qn||sr!==ri||dr!==Ji)&&(t.stencilOp(qn,ri,Ji),lr=qn,sr=ri,dr=Ji)},setLocked:function(qn){Me=qn},setClear:function(qn){Pr!==qn&&(t.clearStencil(qn),Pr=qn)},reset:function(){Me=!1,zt=null,It=null,un=null,Dn=null,lr=null,sr=null,dr=null,Pr=null}}}const h=new i,m=new o,v=new u,x=new WeakMap,E=new WeakMap;let M={},D={},H=new WeakMap,F=[],B=null,z=!1,P=null,W=null,Z=null,ve=null,X=null,se=null,pe=null,J=new _n(0,0,0),ne=0,Ee=!1,ot=null,wt=null,ue=null,Ye=null,Te=null;const st=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Be=!1,Xe=0;const qe=t.getParameter(t.VERSION);qe.indexOf("WebGL")!==-1?(Xe=parseFloat(/^WebGL (\d)/.exec(qe)[1]),Be=Xe>=1):qe.indexOf("OpenGL ES")!==-1&&(Xe=parseFloat(/^OpenGL ES (\d)/.exec(qe)[1]),Be=Xe>=2);let dt=null,Pt={};const cn=t.getParameter(t.SCISSOR_BOX),ht=t.getParameter(t.VIEWPORT),Et=new Ar().fromArray(cn),$t=new Ar().fromArray(ht);function Zt(Me,zt,It,un){const Dn=new Uint8Array(4),lr=t.createTexture();t.bindTexture(Me,lr),t.texParameteri(Me,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Me,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let sr=0;sr<It;sr++)r&&(Me===t.TEXTURE_3D||Me===t.TEXTURE_2D_ARRAY)?t.texImage3D(zt,0,t.RGBA,1,1,un,0,t.RGBA,t.UNSIGNED_BYTE,Dn):t.texImage2D(zt+sr,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Dn);return lr}const gn={};gn[t.TEXTURE_2D]=Zt(t.TEXTURE_2D,t.TEXTURE_2D,1),gn[t.TEXTURE_CUBE_MAP]=Zt(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(gn[t.TEXTURE_2D_ARRAY]=Zt(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),gn[t.TEXTURE_3D]=Zt(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),h.setClear(0,0,0,1),m.setClear(1),v.setClear(0),Jt(t.DEPTH_TEST),m.setFunc(DN),Mn(!1),Se(J0e),Jt(t.CULL_FACE),sn(xu);function Jt(Me){M[Me]!==!0&&(t.enable(Me),M[Me]=!0)}function Qn(Me){M[Me]!==!1&&(t.disable(Me),M[Me]=!1)}function vn(Me,zt){return D[Me]!==zt?(t.bindFramebuffer(Me,zt),D[Me]=zt,r&&(Me===t.DRAW_FRAMEBUFFER&&(D[t.FRAMEBUFFER]=zt),Me===t.FRAMEBUFFER&&(D[t.DRAW_FRAMEBUFFER]=zt)),!0):!1}function Qe(Me,zt){let It=F,un=!1;if(Me)if(It=H.get(zt),It===void 0&&(It=[],H.set(zt,It)),Me.isWebGLMultipleRenderTargets){const Dn=Me.texture;if(It.length!==Dn.length||It[0]!==t.COLOR_ATTACHMENT0){for(let lr=0,sr=Dn.length;lr<sr;lr++)It[lr]=t.COLOR_ATTACHMENT0+lr;It.length=Dn.length,un=!0}}else It[0]!==t.COLOR_ATTACHMENT0&&(It[0]=t.COLOR_ATTACHMENT0,un=!0);else It[0]!==t.BACK&&(It[0]=t.BACK,un=!0);un&&(n.isWebGL2?t.drawBuffers(It):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(It))}function Zr(Me){return B!==Me?(t.useProgram(Me),B=Me,!0):!1}const Tn={[Mm]:t.FUNC_ADD,[ISe]:t.FUNC_SUBTRACT,[RSe]:t.FUNC_REVERSE_SUBTRACT};if(r)Tn[TW]=t.MIN,Tn[MW]=t.MAX;else{const Me=e.get("EXT_blend_minmax");Me!==null&&(Tn[TW]=Me.MIN_EXT,Tn[MW]=Me.MAX_EXT)}const wn={[m7]:t.ZERO,[g7]:t.ONE,[v7]:t.SRC_COLOR,[AT]:t.SRC_ALPHA,[DSe]:t.SRC_ALPHA_SATURATE,[w7]:t.DST_COLOR,[b7]:t.DST_ALPHA,[y7]:t.ONE_MINUS_SRC_COLOR,[IT]:t.ONE_MINUS_SRC_ALPHA,[x7]:t.ONE_MINUS_DST_COLOR,[_7]:t.ONE_MINUS_DST_ALPHA,[S7]:t.CONSTANT_COLOR,[E7]:t.ONE_MINUS_CONSTANT_COLOR,[C7]:t.CONSTANT_ALPHA,[P7]:t.ONE_MINUS_CONSTANT_ALPHA};function sn(Me,zt,It,un,Dn,lr,sr,dr,Pr,qn){if(Me===xu){z===!0&&(Qn(t.BLEND),z=!1);return}if(z===!1&&(Jt(t.BLEND),z=!0),Me!==ASe){if(Me!==P||qn!==Ee){if((W!==Mm||X!==Mm)&&(t.blendEquation(t.FUNC_ADD),W=Mm,X=Mm),qn)switch(Me){case M0:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case EW:t.blendFunc(t.ONE,t.ONE);break;case CW:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case PW:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Me);break}else switch(Me){case M0:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case EW:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case CW:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case PW:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Me);break}Z=null,ve=null,se=null,pe=null,J.set(0,0,0),ne=0,P=Me,Ee=qn}return}Dn=Dn||zt,lr=lr||It,sr=sr||un,(zt!==W||Dn!==X)&&(t.blendEquationSeparate(Tn[zt],Tn[Dn]),W=zt,X=Dn),(It!==Z||un!==ve||lr!==se||sr!==pe)&&(t.blendFuncSeparate(wn[It],wn[un],wn[lr],wn[sr]),Z=It,ve=un,se=lr,pe=sr),(dr.equals(J)===!1||Pr!==ne)&&(t.blendColor(dr.r,dr.g,dr.b,Pr),J.copy(dr),ne=Pr),P=Me,Ee=!1}function Ur(Me,zt){Me.side===Ca?Qn(t.CULL_FACE):Jt(t.CULL_FACE);let It=Me.side===Rs;zt&&(It=!It),Mn(It),Me.blending===M0&&Me.transparent===!1?sn(xu):sn(Me.blending,Me.blendEquation,Me.blendSrc,Me.blendDst,Me.blendEquationAlpha,Me.blendSrcAlpha,Me.blendDstAlpha,Me.blendColor,Me.blendAlpha,Me.premultipliedAlpha),m.setFunc(Me.depthFunc),m.setTest(Me.depthTest),m.setMask(Me.depthWrite),h.setMask(Me.colorWrite);const un=Me.stencilWrite;v.setTest(un),un&&(v.setMask(Me.stencilWriteMask),v.setFunc(Me.stencilFunc,Me.stencilRef,Me.stencilFuncMask),v.setOp(Me.stencilFail,Me.stencilZFail,Me.stencilZPass)),lt(Me.polygonOffset,Me.polygonOffsetFactor,Me.polygonOffsetUnits),Me.alphaToCoverage===!0?Jt(t.SAMPLE_ALPHA_TO_COVERAGE):Qn(t.SAMPLE_ALPHA_TO_COVERAGE)}function Mn(Me){ot!==Me&&(Me?t.frontFace(t.CW):t.frontFace(t.CCW),ot=Me)}function Se(Me){Me!==UUe?(Jt(t.CULL_FACE),Me!==wt&&(Me===J0e?t.cullFace(t.BACK):Me===zUe?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Qn(t.CULL_FACE),wt=Me}function fe(Me){Me!==ue&&(Be&&t.lineWidth(Me),ue=Me)}function lt(Me,zt,It){Me?(Jt(t.POLYGON_OFFSET_FILL),(Ye!==zt||Te!==It)&&(t.polygonOffset(zt,It),Ye=zt,Te=It)):Qn(t.POLYGON_OFFSET_FILL)}function Dt(Me){Me?Jt(t.SCISSOR_TEST):Qn(t.SCISSOR_TEST)}function Ot(Me){Me===void 0&&(Me=t.TEXTURE0+st-1),dt!==Me&&(t.activeTexture(Me),dt=Me)}function Mt(Me,zt,It){It===void 0&&(dt===null?It=t.TEXTURE0+st-1:It=dt);let un=Pt[It];un===void 0&&(un={type:void 0,texture:void 0},Pt[It]=un),(un.type!==Me||un.texture!==zt)&&(dt!==It&&(t.activeTexture(It),dt=It),t.bindTexture(Me,zt||gn[Me]),un.type=Me,un.texture=zt)}function hn(){const Me=Pt[dt];Me!==void 0&&Me.type!==void 0&&(t.bindTexture(Me.type,null),Me.type=void 0,Me.texture=void 0)}function Yt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function nn(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Rn(){try{t.texSubImage2D.apply(t,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function $n(){try{t.texSubImage3D.apply(t,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Lt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function mr(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function ir(){try{t.texStorage2D.apply(t,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function En(){try{t.texStorage3D.apply(t,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Pn(){try{t.texImage2D.apply(t,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function en(){try{t.texImage3D.apply(t,arguments)}catch(Me){console.error("THREE.WebGLState:",Me)}}function Bn(Me){Et.equals(Me)===!1&&(t.scissor(Me.x,Me.y,Me.z,Me.w),Et.copy(Me))}function Ae(Me){$t.equals(Me)===!1&&(t.viewport(Me.x,Me.y,Me.z,Me.w),$t.copy(Me))}function jt(Me,zt){let It=E.get(zt);It===void 0&&(It=new WeakMap,E.set(zt,It));let un=It.get(Me);un===void 0&&(un=t.getUniformBlockIndex(zt,Me.name),It.set(Me,un))}function Kt(Me,zt){const un=E.get(zt).get(Me);x.get(zt)!==un&&(t.uniformBlockBinding(zt,un,Me.__bindingPointIndex),x.set(zt,un))}function ln(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),M={},dt=null,Pt={},D={},H=new WeakMap,F=[],B=null,z=!1,P=null,W=null,Z=null,ve=null,X=null,se=null,pe=null,J=new _n(0,0,0),ne=0,Ee=!1,ot=null,wt=null,ue=null,Ye=null,Te=null,Et.set(0,0,t.canvas.width,t.canvas.height),$t.set(0,0,t.canvas.width,t.canvas.height),h.reset(),m.reset(),v.reset()}return{buffers:{color:h,depth:m,stencil:v},enable:Jt,disable:Qn,bindFramebuffer:vn,drawBuffers:Qe,useProgram:Zr,setBlending:sn,setMaterial:Ur,setFlipSided:Mn,setCullFace:Se,setLineWidth:fe,setPolygonOffset:lt,setScissorTest:Dt,activeTexture:Ot,bindTexture:Mt,unbindTexture:hn,compressedTexImage2D:Yt,compressedTexImage3D:nn,texImage2D:Pn,texImage3D:en,updateUBOMapping:jt,uniformBlockBinding:Kt,texStorage2D:ir,texStorage3D:En,texSubImage2D:Rn,texSubImage3D:$n,compressedTexSubImage2D:Lt,compressedTexSubImage3D:mr,scissor:Bn,viewport:Ae,reset:ln}}function N6e(t,e,n,r,i,o,u){const h=i.isWebGL2,m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),x=new WeakMap;let E;const M=new WeakMap;let D=!1;try{D=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function H(Se,fe){return D?new OffscreenCanvas(Se,fe):DT("canvas")}function F(Se,fe,lt,Dt){let Ot=1;if((Se.width>Dt||Se.height>Dt)&&(Ot=Dt/Math.max(Se.width,Se.height)),Ot<1||fe===!0)if(typeof HTMLImageElement<"u"&&Se instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Se instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Se instanceof ImageBitmap){const Mt=fe?jN:Math.floor,hn=Mt(Ot*Se.width),Yt=Mt(Ot*Se.height);E===void 0&&(E=H(hn,Yt));const nn=lt?H(hn,Yt):E;return nn.width=hn,nn.height=Yt,nn.getContext("2d").drawImage(Se,0,0,hn,Yt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Se.width+"x"+Se.height+") to ("+hn+"x"+Yt+")."),nn}else return"data"in Se&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Se.width+"x"+Se.height+")."),Se;return Se}function B(Se){return DW(Se.width)&&DW(Se.height)}function z(Se){return h?!1:Se.wrapS!==_l||Se.wrapT!==_l||Se.minFilter!==To&&Se.minFilter!==ro}function P(Se,fe){return Se.generateMipmaps&&fe&&Se.minFilter!==To&&Se.minFilter!==ro}function W(Se){t.generateMipmap(Se)}function Z(Se,fe,lt,Dt,Ot=!1){if(h===!1)return fe;if(Se!==null){if(t[Se]!==void 0)return t[Se];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Se+"'")}let Mt=fe;if(fe===t.RED&&(lt===t.FLOAT&&(Mt=t.R32F),lt===t.HALF_FLOAT&&(Mt=t.R16F),lt===t.UNSIGNED_BYTE&&(Mt=t.R8)),fe===t.RED_INTEGER&&(lt===t.UNSIGNED_BYTE&&(Mt=t.R8UI),lt===t.UNSIGNED_SHORT&&(Mt=t.R16UI),lt===t.UNSIGNED_INT&&(Mt=t.R32UI),lt===t.BYTE&&(Mt=t.R8I),lt===t.SHORT&&(Mt=t.R16I),lt===t.INT&&(Mt=t.R32I)),fe===t.RG&&(lt===t.FLOAT&&(Mt=t.RG32F),lt===t.HALF_FLOAT&&(Mt=t.RG16F),lt===t.UNSIGNED_BYTE&&(Mt=t.RG8)),fe===t.RGBA){const hn=Ot?BN:li.getTransfer(Dt);lt===t.FLOAT&&(Mt=t.RGBA32F),lt===t.HALF_FLOAT&&(Mt=t.RGBA16F),lt===t.UNSIGNED_BYTE&&(Mt=hn===Ti?t.SRGB8_ALPHA8:t.RGBA8),lt===t.UNSIGNED_SHORT_4_4_4_4&&(Mt=t.RGBA4),lt===t.UNSIGNED_SHORT_5_5_5_1&&(Mt=t.RGB5_A1)}return(Mt===t.R16F||Mt===t.R32F||Mt===t.RG16F||Mt===t.RG32F||Mt===t.RGBA16F||Mt===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Mt}function ve(Se,fe,lt){return P(Se,lt)===!0||Se.isFramebufferTexture&&Se.minFilter!==To&&Se.minFilter!==ro?Math.log2(Math.max(fe.width,fe.height))+1:Se.mipmaps!==void 0&&Se.mipmaps.length>0?Se.mipmaps.length:Se.isCompressedTexture&&Array.isArray(Se.image)?fe.mipmaps.length:1}function X(Se){return Se===To||Se===tye||Se===SP?t.NEAREST:t.LINEAR}function se(Se){const fe=Se.target;fe.removeEventListener("dispose",se),J(fe),fe.isVideoTexture&&x.delete(fe)}function pe(Se){const fe=Se.target;fe.removeEventListener("dispose",pe),Ee(fe)}function J(Se){const fe=r.get(Se);if(fe.__webglInit===void 0)return;const lt=Se.source,Dt=M.get(lt);if(Dt){const Ot=Dt[fe.__cacheKey];Ot.usedTimes--,Ot.usedTimes===0&&ne(Se),Object.keys(Dt).length===0&&M.delete(lt)}r.remove(Se)}function ne(Se){const fe=r.get(Se);t.deleteTexture(fe.__webglTexture);const lt=Se.source,Dt=M.get(lt);delete Dt[fe.__cacheKey],u.memory.textures--}function Ee(Se){const fe=Se.texture,lt=r.get(Se),Dt=r.get(fe);if(Dt.__webglTexture!==void 0&&(t.deleteTexture(Dt.__webglTexture),u.memory.textures--),Se.depthTexture&&Se.depthTexture.dispose(),Se.isWebGLCubeRenderTarget)for(let Ot=0;Ot<6;Ot++){if(Array.isArray(lt.__webglFramebuffer[Ot]))for(let Mt=0;Mt<lt.__webglFramebuffer[Ot].length;Mt++)t.deleteFramebuffer(lt.__webglFramebuffer[Ot][Mt]);else t.deleteFramebuffer(lt.__webglFramebuffer[Ot]);lt.__webglDepthbuffer&&t.deleteRenderbuffer(lt.__webglDepthbuffer[Ot])}else{if(Array.isArray(lt.__webglFramebuffer))for(let Ot=0;Ot<lt.__webglFramebuffer.length;Ot++)t.deleteFramebuffer(lt.__webglFramebuffer[Ot]);else t.deleteFramebuffer(lt.__webglFramebuffer);if(lt.__webglDepthbuffer&&t.deleteRenderbuffer(lt.__webglDepthbuffer),lt.__webglMultisampledFramebuffer&&t.deleteFramebuffer(lt.__webglMultisampledFramebuffer),lt.__webglColorRenderbuffer)for(let Ot=0;Ot<lt.__webglColorRenderbuffer.length;Ot++)lt.__webglColorRenderbuffer[Ot]&&t.deleteRenderbuffer(lt.__webglColorRenderbuffer[Ot]);lt.__webglDepthRenderbuffer&&t.deleteRenderbuffer(lt.__webglDepthRenderbuffer)}if(Se.isWebGLMultipleRenderTargets)for(let Ot=0,Mt=fe.length;Ot<Mt;Ot++){const hn=r.get(fe[Ot]);hn.__webglTexture&&(t.deleteTexture(hn.__webglTexture),u.memory.textures--),r.remove(fe[Ot])}r.remove(fe),r.remove(Se)}let ot=0;function wt(){ot=0}function ue(){const Se=ot;return Se>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Se+" texture units while this GPU supports only "+i.maxTextures),ot+=1,Se}function Ye(Se){const fe=[];return fe.push(Se.wrapS),fe.push(Se.wrapT),fe.push(Se.wrapR||0),fe.push(Se.magFilter),fe.push(Se.minFilter),fe.push(Se.anisotropy),fe.push(Se.internalFormat),fe.push(Se.format),fe.push(Se.type),fe.push(Se.generateMipmaps),fe.push(Se.premultiplyAlpha),fe.push(Se.flipY),fe.push(Se.unpackAlignment),fe.push(Se.colorSpace),fe.join()}function Te(Se,fe){const lt=r.get(Se);if(Se.isVideoTexture&&Ur(Se),Se.isRenderTargetTexture===!1&&Se.version>0&&lt.__version!==Se.version){const Dt=Se.image;if(Dt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Dt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Et(lt,Se,fe);return}}n.bindTexture(t.TEXTURE_2D,lt.__webglTexture,t.TEXTURE0+fe)}function st(Se,fe){const lt=r.get(Se);if(Se.version>0&&lt.__version!==Se.version){Et(lt,Se,fe);return}n.bindTexture(t.TEXTURE_2D_ARRAY,lt.__webglTexture,t.TEXTURE0+fe)}function Be(Se,fe){const lt=r.get(Se);if(Se.version>0&&lt.__version!==Se.version){Et(lt,Se,fe);return}n.bindTexture(t.TEXTURE_3D,lt.__webglTexture,t.TEXTURE0+fe)}function Xe(Se,fe){const lt=r.get(Se);if(Se.version>0&&lt.__version!==Se.version){$t(lt,Se,fe);return}n.bindTexture(t.TEXTURE_CUBE_MAP,lt.__webglTexture,t.TEXTURE0+fe)}const qe={[bp]:t.REPEAT,[_l]:t.CLAMP_TO_EDGE,[AW]:t.MIRRORED_REPEAT},dt={[To]:t.NEAREST,[tye]:t.NEAREST_MIPMAP_NEAREST,[SP]:t.NEAREST_MIPMAP_LINEAR,[ro]:t.LINEAR,[oG]:t.LINEAR_MIPMAP_NEAREST,[S0]:t.LINEAR_MIPMAP_LINEAR},Pt={[y5e]:t.NEVER,[E5e]:t.ALWAYS,[b5e]:t.LESS,[jSe]:t.LEQUAL,[_5e]:t.EQUAL,[S5e]:t.GEQUAL,[w5e]:t.GREATER,[x5e]:t.NOTEQUAL};function cn(Se,fe,lt){if(fe.type===Pd&&e.has("OES_texture_float_linear")===!1&&(fe.magFilter===ro||fe.magFilter===oG||fe.magFilter===SP||fe.magFilter===S0||fe.minFilter===ro||fe.minFilter===oG||fe.minFilter===SP||fe.minFilter===S0)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),lt?(t.texParameteri(Se,t.TEXTURE_WRAP_S,qe[fe.wrapS]),t.texParameteri(Se,t.TEXTURE_WRAP_T,qe[fe.wrapT]),(Se===t.TEXTURE_3D||Se===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Se,t.TEXTURE_WRAP_R,qe[fe.wrapR]),t.texParameteri(Se,t.TEXTURE_MAG_FILTER,dt[fe.magFilter]),t.texParameteri(Se,t.TEXTURE_MIN_FILTER,dt[fe.minFilter])):(t.texParameteri(Se,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(Se,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(Se===t.TEXTURE_3D||Se===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Se,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(fe.wrapS!==_l||fe.wrapT!==_l)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(Se,t.TEXTURE_MAG_FILTER,X(fe.magFilter)),t.texParameteri(Se,t.TEXTURE_MIN_FILTER,X(fe.minFilter)),fe.minFilter!==To&&fe.minFilter!==ro&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),fe.compareFunction&&(t.texParameteri(Se,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Se,t.TEXTURE_COMPARE_FUNC,Pt[fe.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Dt=e.get("EXT_texture_filter_anisotropic");if(fe.magFilter===To||fe.minFilter!==SP&&fe.minFilter!==S0||fe.type===Pd&&e.has("OES_texture_float_linear")===!1||h===!1&&fe.type===RT&&e.has("OES_texture_half_float_linear")===!1)return;(fe.anisotropy>1||r.get(fe).__currentAnisotropy)&&(t.texParameterf(Se,Dt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(fe.anisotropy,i.getMaxAnisotropy())),r.get(fe).__currentAnisotropy=fe.anisotropy)}}function ht(Se,fe){let lt=!1;Se.__webglInit===void 0&&(Se.__webglInit=!0,fe.addEventListener("dispose",se));const Dt=fe.source;let Ot=M.get(Dt);Ot===void 0&&(Ot={},M.set(Dt,Ot));const Mt=Ye(fe);if(Mt!==Se.__cacheKey){Ot[Mt]===void 0&&(Ot[Mt]={texture:t.createTexture(),usedTimes:0},u.memory.textures++,lt=!0),Ot[Mt].usedTimes++;const hn=Ot[Se.__cacheKey];hn!==void 0&&(Ot[Se.__cacheKey].usedTimes--,hn.usedTimes===0&&ne(fe)),Se.__cacheKey=Mt,Se.__webglTexture=Ot[Mt].texture}return lt}function Et(Se,fe,lt){let Dt=t.TEXTURE_2D;(fe.isDataArrayTexture||fe.isCompressedArrayTexture)&&(Dt=t.TEXTURE_2D_ARRAY),fe.isData3DTexture&&(Dt=t.TEXTURE_3D);const Ot=ht(Se,fe),Mt=fe.source;n.bindTexture(Dt,Se.__webglTexture,t.TEXTURE0+lt);const hn=r.get(Mt);if(Mt.version!==hn.__version||Ot===!0){n.activeTexture(t.TEXTURE0+lt);const Yt=li.getPrimaries(li.workingColorSpace),nn=fe.colorSpace===gu?null:li.getPrimaries(fe.colorSpace),Rn=fe.colorSpace===gu||Yt===nn?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,fe.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,fe.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Rn);const $n=z(fe)&&B(fe.image)===!1;let Lt=F(fe.image,$n,!1,i.maxTextureSize);Lt=Mn(fe,Lt);const mr=B(Lt)||h,ir=o.convert(fe.format,fe.colorSpace);let En=o.convert(fe.type),Pn=Z(fe.internalFormat,ir,En,fe.colorSpace,fe.isVideoTexture);cn(Dt,fe,mr);let en;const Bn=fe.mipmaps,Ae=h&&fe.isVideoTexture!==!0&&Pn!==VSe,jt=hn.__version===void 0||Ot===!0,Kt=Mt.dataReady,ln=ve(fe,Lt,mr);if(fe.isDepthTexture)Pn=t.DEPTH_COMPONENT,h?fe.type===Pd?Pn=t.DEPTH_COMPONENT32F:fe.type===ip?Pn=t.DEPTH_COMPONENT24:fe.type===Hm?Pn=t.DEPTH24_STENCIL8:Pn=t.DEPTH_COMPONENT16:fe.type===Pd&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),fe.format===k0&&Pn===t.DEPTH_COMPONENT&&fe.type!==T7&&fe.type!==ip&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),fe.type=ip,En=o.convert(fe.type)),fe.format===U0&&Pn===t.DEPTH_COMPONENT&&(Pn=t.DEPTH_STENCIL,fe.type!==Hm&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),fe.type=Hm,En=o.convert(fe.type))),jt&&(Ae?n.texStorage2D(t.TEXTURE_2D,1,Pn,Lt.width,Lt.height):n.texImage2D(t.TEXTURE_2D,0,Pn,Lt.width,Lt.height,0,ir,En,null));else if(fe.isDataTexture)if(Bn.length>0&&mr){Ae&&jt&&n.texStorage2D(t.TEXTURE_2D,ln,Pn,Bn[0].width,Bn[0].height);for(let Me=0,zt=Bn.length;Me<zt;Me++)en=Bn[Me],Ae?Kt&&n.texSubImage2D(t.TEXTURE_2D,Me,0,0,en.width,en.height,ir,En,en.data):n.texImage2D(t.TEXTURE_2D,Me,Pn,en.width,en.height,0,ir,En,en.data);fe.generateMipmaps=!1}else Ae?(jt&&n.texStorage2D(t.TEXTURE_2D,ln,Pn,Lt.width,Lt.height),Kt&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Lt.width,Lt.height,ir,En,Lt.data)):n.texImage2D(t.TEXTURE_2D,0,Pn,Lt.width,Lt.height,0,ir,En,Lt.data);else if(fe.isCompressedTexture)if(fe.isCompressedArrayTexture){Ae&&jt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ln,Pn,Bn[0].width,Bn[0].height,Lt.depth);for(let Me=0,zt=Bn.length;Me<zt;Me++)en=Bn[Me],fe.format!==mu?ir!==null?Ae?Kt&&n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Me,0,0,0,en.width,en.height,Lt.depth,ir,en.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Me,Pn,en.width,en.height,Lt.depth,0,en.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ae?Kt&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Me,0,0,0,en.width,en.height,Lt.depth,ir,En,en.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Me,Pn,en.width,en.height,Lt.depth,0,ir,En,en.data)}else{Ae&&jt&&n.texStorage2D(t.TEXTURE_2D,ln,Pn,Bn[0].width,Bn[0].height);for(let Me=0,zt=Bn.length;Me<zt;Me++)en=Bn[Me],fe.format!==mu?ir!==null?Ae?Kt&&n.compressedTexSubImage2D(t.TEXTURE_2D,Me,0,0,en.width,en.height,ir,en.data):n.compressedTexImage2D(t.TEXTURE_2D,Me,Pn,en.width,en.height,0,en.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ae?Kt&&n.texSubImage2D(t.TEXTURE_2D,Me,0,0,en.width,en.height,ir,En,en.data):n.texImage2D(t.TEXTURE_2D,Me,Pn,en.width,en.height,0,ir,En,en.data)}else if(fe.isDataArrayTexture)Ae?(jt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ln,Pn,Lt.width,Lt.height,Lt.depth),Kt&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Lt.width,Lt.height,Lt.depth,ir,En,Lt.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Pn,Lt.width,Lt.height,Lt.depth,0,ir,En,Lt.data);else if(fe.isData3DTexture)Ae?(jt&&n.texStorage3D(t.TEXTURE_3D,ln,Pn,Lt.width,Lt.height,Lt.depth),Kt&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Lt.width,Lt.height,Lt.depth,ir,En,Lt.data)):n.texImage3D(t.TEXTURE_3D,0,Pn,Lt.width,Lt.height,Lt.depth,0,ir,En,Lt.data);else if(fe.isFramebufferTexture){if(jt)if(Ae)n.texStorage2D(t.TEXTURE_2D,ln,Pn,Lt.width,Lt.height);else{let Me=Lt.width,zt=Lt.height;for(let It=0;It<ln;It++)n.texImage2D(t.TEXTURE_2D,It,Pn,Me,zt,0,ir,En,null),Me>>=1,zt>>=1}}else if(Bn.length>0&&mr){Ae&&jt&&n.texStorage2D(t.TEXTURE_2D,ln,Pn,Bn[0].width,Bn[0].height);for(let Me=0,zt=Bn.length;Me<zt;Me++)en=Bn[Me],Ae?Kt&&n.texSubImage2D(t.TEXTURE_2D,Me,0,0,ir,En,en):n.texImage2D(t.TEXTURE_2D,Me,Pn,ir,En,en);fe.generateMipmaps=!1}else Ae?(jt&&n.texStorage2D(t.TEXTURE_2D,ln,Pn,Lt.width,Lt.height),Kt&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,ir,En,Lt)):n.texImage2D(t.TEXTURE_2D,0,Pn,ir,En,Lt);P(fe,mr)&&W(Dt),hn.__version=Mt.version,fe.onUpdate&&fe.onUpdate(fe)}Se.__version=fe.version}function $t(Se,fe,lt){if(fe.image.length!==6)return;const Dt=ht(Se,fe),Ot=fe.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Se.__webglTexture,t.TEXTURE0+lt);const Mt=r.get(Ot);if(Ot.version!==Mt.__version||Dt===!0){n.activeTexture(t.TEXTURE0+lt);const hn=li.getPrimaries(li.workingColorSpace),Yt=fe.colorSpace===gu?null:li.getPrimaries(fe.colorSpace),nn=fe.colorSpace===gu||hn===Yt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,fe.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,fe.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,fe.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,nn);const Rn=fe.isCompressedTexture||fe.image[0].isCompressedTexture,$n=fe.image[0]&&fe.image[0].isDataTexture,Lt=[];for(let Me=0;Me<6;Me++)!Rn&&!$n?Lt[Me]=F(fe.image[Me],!1,!0,i.maxCubemapSize):Lt[Me]=$n?fe.image[Me].image:fe.image[Me],Lt[Me]=Mn(fe,Lt[Me]);const mr=Lt[0],ir=B(mr)||h,En=o.convert(fe.format,fe.colorSpace),Pn=o.convert(fe.type),en=Z(fe.internalFormat,En,Pn,fe.colorSpace),Bn=h&&fe.isVideoTexture!==!0,Ae=Mt.__version===void 0||Dt===!0,jt=Ot.dataReady;let Kt=ve(fe,mr,ir);cn(t.TEXTURE_CUBE_MAP,fe,ir);let ln;if(Rn){Bn&&Ae&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Kt,en,mr.width,mr.height);for(let Me=0;Me<6;Me++){ln=Lt[Me].mipmaps;for(let zt=0;zt<ln.length;zt++){const It=ln[zt];fe.format!==mu?En!==null?Bn?jt&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,zt,0,0,It.width,It.height,En,It.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,zt,en,It.width,It.height,0,It.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Bn?jt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,zt,0,0,It.width,It.height,En,Pn,It.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,zt,en,It.width,It.height,0,En,Pn,It.data)}}}else{ln=fe.mipmaps,Bn&&Ae&&(ln.length>0&&Kt++,n.texStorage2D(t.TEXTURE_CUBE_MAP,Kt,en,Lt[0].width,Lt[0].height));for(let Me=0;Me<6;Me++)if($n){Bn?jt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,Lt[Me].width,Lt[Me].height,En,Pn,Lt[Me].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,en,Lt[Me].width,Lt[Me].height,0,En,Pn,Lt[Me].data);for(let zt=0;zt<ln.length;zt++){const un=ln[zt].image[Me].image;Bn?jt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,zt+1,0,0,un.width,un.height,En,Pn,un.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,zt+1,en,un.width,un.height,0,En,Pn,un.data)}}else{Bn?jt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,0,0,En,Pn,Lt[Me]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,0,en,En,Pn,Lt[Me]);for(let zt=0;zt<ln.length;zt++){const It=ln[zt];Bn?jt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,zt+1,0,0,En,Pn,It.image[Me]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Me,zt+1,en,En,Pn,It.image[Me])}}}P(fe,ir)&&W(t.TEXTURE_CUBE_MAP),Mt.__version=Ot.version,fe.onUpdate&&fe.onUpdate(fe)}Se.__version=fe.version}function Zt(Se,fe,lt,Dt,Ot,Mt){const hn=o.convert(lt.format,lt.colorSpace),Yt=o.convert(lt.type),nn=Z(lt.internalFormat,hn,Yt,lt.colorSpace);if(!r.get(fe).__hasExternalTextures){const $n=Math.max(1,fe.width>>Mt),Lt=Math.max(1,fe.height>>Mt);Ot===t.TEXTURE_3D||Ot===t.TEXTURE_2D_ARRAY?n.texImage3D(Ot,Mt,nn,$n,Lt,fe.depth,0,hn,Yt,null):n.texImage2D(Ot,Mt,nn,$n,Lt,0,hn,Yt,null)}n.bindFramebuffer(t.FRAMEBUFFER,Se),sn(fe)?m.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Dt,Ot,r.get(lt).__webglTexture,0,wn(fe)):(Ot===t.TEXTURE_2D||Ot>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Ot<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Dt,Ot,r.get(lt).__webglTexture,Mt),n.bindFramebuffer(t.FRAMEBUFFER,null)}function gn(Se,fe,lt){if(t.bindRenderbuffer(t.RENDERBUFFER,Se),fe.depthBuffer&&!fe.stencilBuffer){let Dt=h===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(lt||sn(fe)){const Ot=fe.depthTexture;Ot&&Ot.isDepthTexture&&(Ot.type===Pd?Dt=t.DEPTH_COMPONENT32F:Ot.type===ip&&(Dt=t.DEPTH_COMPONENT24));const Mt=wn(fe);sn(fe)?m.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Mt,Dt,fe.width,fe.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Mt,Dt,fe.width,fe.height)}else t.renderbufferStorage(t.RENDERBUFFER,Dt,fe.width,fe.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,Se)}else if(fe.depthBuffer&&fe.stencilBuffer){const Dt=wn(fe);lt&&sn(fe)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Dt,t.DEPTH24_STENCIL8,fe.width,fe.height):sn(fe)?m.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Dt,t.DEPTH24_STENCIL8,fe.width,fe.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,fe.width,fe.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,Se)}else{const Dt=fe.isWebGLMultipleRenderTargets===!0?fe.texture:[fe.texture];for(let Ot=0;Ot<Dt.length;Ot++){const Mt=Dt[Ot],hn=o.convert(Mt.format,Mt.colorSpace),Yt=o.convert(Mt.type),nn=Z(Mt.internalFormat,hn,Yt,Mt.colorSpace),Rn=wn(fe);lt&&sn(fe)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Rn,nn,fe.width,fe.height):sn(fe)?m.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Rn,nn,fe.width,fe.height):t.renderbufferStorage(t.RENDERBUFFER,nn,fe.width,fe.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Jt(Se,fe){if(fe&&fe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Se),!(fe.depthTexture&&fe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(fe.depthTexture).__webglTexture||fe.depthTexture.image.width!==fe.width||fe.depthTexture.image.height!==fe.height)&&(fe.depthTexture.image.width=fe.width,fe.depthTexture.image.height=fe.height,fe.depthTexture.needsUpdate=!0),Te(fe.depthTexture,0);const Dt=r.get(fe.depthTexture).__webglTexture,Ot=wn(fe);if(fe.depthTexture.format===k0)sn(fe)?m.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Dt,0,Ot):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Dt,0);else if(fe.depthTexture.format===U0)sn(fe)?m.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Dt,0,Ot):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Dt,0);else throw new Error("Unknown depthTexture format")}function Qn(Se){const fe=r.get(Se),lt=Se.isWebGLCubeRenderTarget===!0;if(Se.depthTexture&&!fe.__autoAllocateDepthBuffer){if(lt)throw new Error("target.depthTexture not supported in Cube render targets");Jt(fe.__webglFramebuffer,Se)}else if(lt){fe.__webglDepthbuffer=[];for(let Dt=0;Dt<6;Dt++)n.bindFramebuffer(t.FRAMEBUFFER,fe.__webglFramebuffer[Dt]),fe.__webglDepthbuffer[Dt]=t.createRenderbuffer(),gn(fe.__webglDepthbuffer[Dt],Se,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,fe.__webglFramebuffer),fe.__webglDepthbuffer=t.createRenderbuffer(),gn(fe.__webglDepthbuffer,Se,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function vn(Se,fe,lt){const Dt=r.get(Se);fe!==void 0&&Zt(Dt.__webglFramebuffer,Se,Se.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),lt!==void 0&&Qn(Se)}function Qe(Se){const fe=Se.texture,lt=r.get(Se),Dt=r.get(fe);Se.addEventListener("dispose",pe),Se.isWebGLMultipleRenderTargets!==!0&&(Dt.__webglTexture===void 0&&(Dt.__webglTexture=t.createTexture()),Dt.__version=fe.version,u.memory.textures++);const Ot=Se.isWebGLCubeRenderTarget===!0,Mt=Se.isWebGLMultipleRenderTargets===!0,hn=B(Se)||h;if(Ot){lt.__webglFramebuffer=[];for(let Yt=0;Yt<6;Yt++)if(h&&fe.mipmaps&&fe.mipmaps.length>0){lt.__webglFramebuffer[Yt]=[];for(let nn=0;nn<fe.mipmaps.length;nn++)lt.__webglFramebuffer[Yt][nn]=t.createFramebuffer()}else lt.__webglFramebuffer[Yt]=t.createFramebuffer()}else{if(h&&fe.mipmaps&&fe.mipmaps.length>0){lt.__webglFramebuffer=[];for(let Yt=0;Yt<fe.mipmaps.length;Yt++)lt.__webglFramebuffer[Yt]=t.createFramebuffer()}else lt.__webglFramebuffer=t.createFramebuffer();if(Mt)if(i.drawBuffers){const Yt=Se.texture;for(let nn=0,Rn=Yt.length;nn<Rn;nn++){const $n=r.get(Yt[nn]);$n.__webglTexture===void 0&&($n.__webglTexture=t.createTexture(),u.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(h&&Se.samples>0&&sn(Se)===!1){const Yt=Mt?fe:[fe];lt.__webglMultisampledFramebuffer=t.createFramebuffer(),lt.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,lt.__webglMultisampledFramebuffer);for(let nn=0;nn<Yt.length;nn++){const Rn=Yt[nn];lt.__webglColorRenderbuffer[nn]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,lt.__webglColorRenderbuffer[nn]);const $n=o.convert(Rn.format,Rn.colorSpace),Lt=o.convert(Rn.type),mr=Z(Rn.internalFormat,$n,Lt,Rn.colorSpace,Se.isXRRenderTarget===!0),ir=wn(Se);t.renderbufferStorageMultisample(t.RENDERBUFFER,ir,mr,Se.width,Se.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+nn,t.RENDERBUFFER,lt.__webglColorRenderbuffer[nn])}t.bindRenderbuffer(t.RENDERBUFFER,null),Se.depthBuffer&&(lt.__webglDepthRenderbuffer=t.createRenderbuffer(),gn(lt.__webglDepthRenderbuffer,Se,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ot){n.bindTexture(t.TEXTURE_CUBE_MAP,Dt.__webglTexture),cn(t.TEXTURE_CUBE_MAP,fe,hn);for(let Yt=0;Yt<6;Yt++)if(h&&fe.mipmaps&&fe.mipmaps.length>0)for(let nn=0;nn<fe.mipmaps.length;nn++)Zt(lt.__webglFramebuffer[Yt][nn],Se,fe,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,nn);else Zt(lt.__webglFramebuffer[Yt],Se,fe,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Yt,0);P(fe,hn)&&W(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Mt){const Yt=Se.texture;for(let nn=0,Rn=Yt.length;nn<Rn;nn++){const $n=Yt[nn],Lt=r.get($n);n.bindTexture(t.TEXTURE_2D,Lt.__webglTexture),cn(t.TEXTURE_2D,$n,hn),Zt(lt.__webglFramebuffer,Se,$n,t.COLOR_ATTACHMENT0+nn,t.TEXTURE_2D,0),P($n,hn)&&W(t.TEXTURE_2D)}n.unbindTexture()}else{let Yt=t.TEXTURE_2D;if((Se.isWebGL3DRenderTarget||Se.isWebGLArrayRenderTarget)&&(h?Yt=Se.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Yt,Dt.__webglTexture),cn(Yt,fe,hn),h&&fe.mipmaps&&fe.mipmaps.length>0)for(let nn=0;nn<fe.mipmaps.length;nn++)Zt(lt.__webglFramebuffer[nn],Se,fe,t.COLOR_ATTACHMENT0,Yt,nn);else Zt(lt.__webglFramebuffer,Se,fe,t.COLOR_ATTACHMENT0,Yt,0);P(fe,hn)&&W(Yt),n.unbindTexture()}Se.depthBuffer&&Qn(Se)}function Zr(Se){const fe=B(Se)||h,lt=Se.isWebGLMultipleRenderTargets===!0?Se.texture:[Se.texture];for(let Dt=0,Ot=lt.length;Dt<Ot;Dt++){const Mt=lt[Dt];if(P(Mt,fe)){const hn=Se.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Yt=r.get(Mt).__webglTexture;n.bindTexture(hn,Yt),W(hn),n.unbindTexture()}}}function Tn(Se){if(h&&Se.samples>0&&sn(Se)===!1){const fe=Se.isWebGLMultipleRenderTargets?Se.texture:[Se.texture],lt=Se.width,Dt=Se.height;let Ot=t.COLOR_BUFFER_BIT;const Mt=[],hn=Se.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Yt=r.get(Se),nn=Se.isWebGLMultipleRenderTargets===!0;if(nn)for(let Rn=0;Rn<fe.length;Rn++)n.bindFramebuffer(t.FRAMEBUFFER,Yt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Rn,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Yt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Rn,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Yt.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Yt.__webglFramebuffer);for(let Rn=0;Rn<fe.length;Rn++){Mt.push(t.COLOR_ATTACHMENT0+Rn),Se.depthBuffer&&Mt.push(hn);const $n=Yt.__ignoreDepthValues!==void 0?Yt.__ignoreDepthValues:!1;if($n===!1&&(Se.depthBuffer&&(Ot|=t.DEPTH_BUFFER_BIT),Se.stencilBuffer&&(Ot|=t.STENCIL_BUFFER_BIT)),nn&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Yt.__webglColorRenderbuffer[Rn]),$n===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[hn]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[hn])),nn){const Lt=r.get(fe[Rn]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Lt,0)}t.blitFramebuffer(0,0,lt,Dt,0,0,lt,Dt,Ot,t.NEAREST),v&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Mt)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),nn)for(let Rn=0;Rn<fe.length;Rn++){n.bindFramebuffer(t.FRAMEBUFFER,Yt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Rn,t.RENDERBUFFER,Yt.__webglColorRenderbuffer[Rn]);const $n=r.get(fe[Rn]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Yt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Rn,t.TEXTURE_2D,$n,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Yt.__webglMultisampledFramebuffer)}}function wn(Se){return Math.min(i.maxSamples,Se.samples)}function sn(Se){const fe=r.get(Se);return h&&Se.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&fe.__useRenderToTexture!==!1}function Ur(Se){const fe=u.render.frame;x.get(Se)!==fe&&(x.set(Se,fe),Se.update())}function Mn(Se,fe){const lt=Se.colorSpace,Dt=Se.format,Ot=Se.type;return Se.isCompressedTexture===!0||Se.isVideoTexture===!0||Se.format===RW||lt!==_p&&lt!==gu&&(li.getTransfer(lt)===Ti?h===!1?e.has("EXT_sRGB")===!0&&Dt===mu?(Se.format=RW,Se.minFilter=ro,Se.generateMipmaps=!1):fe=GSe.sRGBToLinear(fe):(Dt!==mu||Ot!==Sl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",lt)),fe}this.allocateTextureUnit=ue,this.resetTextureUnits=wt,this.setTexture2D=Te,this.setTexture2DArray=st,this.setTexture3D=Be,this.setTextureCube=Xe,this.rebindTextures=vn,this.setupRenderTarget=Qe,this.updateRenderTargetMipmap=Zr,this.updateMultisampleRenderTarget=Tn,this.setupDepthRenderbuffer=Qn,this.setupFrameBufferTexture=Zt,this.useMultisampledRTT=sn}function F6e(t,e,n){const r=n.isWebGL2;function i(o,u=gu){let h;const m=li.getTransfer(u);if(o===Sl)return t.UNSIGNED_BYTE;if(o===NSe)return t.UNSIGNED_SHORT_4_4_4_4;if(o===FSe)return t.UNSIGNED_SHORT_5_5_5_1;if(o===i5e)return t.BYTE;if(o===s5e)return t.SHORT;if(o===T7)return t.UNSIGNED_SHORT;if(o===LSe)return t.INT;if(o===ip)return t.UNSIGNED_INT;if(o===Pd)return t.FLOAT;if(o===RT)return r?t.HALF_FLOAT:(h=e.get("OES_texture_half_float"),h!==null?h.HALF_FLOAT_OES:null);if(o===o5e)return t.ALPHA;if(o===mu)return t.RGBA;if(o===a5e)return t.LUMINANCE;if(o===l5e)return t.LUMINANCE_ALPHA;if(o===k0)return t.DEPTH_COMPONENT;if(o===U0)return t.DEPTH_STENCIL;if(o===RW)return h=e.get("EXT_sRGB"),h!==null?h.SRGB_ALPHA_EXT:null;if(o===u5e)return t.RED;if(o===BSe)return t.RED_INTEGER;if(o===c5e)return t.RG;if(o===USe)return t.RG_INTEGER;if(o===zSe)return t.RGBA_INTEGER;if(o===aG||o===lG||o===uG||o===cG)if(m===Ti)if(h=e.get("WEBGL_compressed_texture_s3tc_srgb"),h!==null){if(o===aG)return h.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===lG)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===uG)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===cG)return h.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(h=e.get("WEBGL_compressed_texture_s3tc"),h!==null){if(o===aG)return h.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===lG)return h.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===uG)return h.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===cG)return h.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===nye||o===rye||o===iye||o===sye)if(h=e.get("WEBGL_compressed_texture_pvrtc"),h!==null){if(o===nye)return h.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===rye)return h.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===iye)return h.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===sye)return h.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===VSe)return h=e.get("WEBGL_compressed_texture_etc1"),h!==null?h.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===oye||o===aye)if(h=e.get("WEBGL_compressed_texture_etc"),h!==null){if(o===oye)return m===Ti?h.COMPRESSED_SRGB8_ETC2:h.COMPRESSED_RGB8_ETC2;if(o===aye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:h.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===lye||o===uye||o===cye||o===dye||o===hye||o===pye||o===fye||o===mye||o===gye||o===vye||o===yye||o===bye||o===_ye||o===wye)if(h=e.get("WEBGL_compressed_texture_astc"),h!==null){if(o===lye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:h.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===uye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:h.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===cye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:h.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===dye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:h.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===hye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:h.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===pye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:h.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===fye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:h.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===mye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:h.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===gye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:h.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===vye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:h.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===yye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:h.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===bye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:h.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===_ye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:h.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===wye)return m===Ti?h.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:h.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===dG||o===xye||o===Sye)if(h=e.get("EXT_texture_compression_bptc"),h!==null){if(o===dG)return m===Ti?h.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:h.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===xye)return h.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===Sye)return h.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===d5e||o===Eye||o===Cye||o===Pye)if(h=e.get("EXT_texture_compression_rgtc"),h!==null){if(o===dG)return h.COMPRESSED_RED_RGTC1_EXT;if(o===Eye)return h.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===Cye)return h.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===Pye)return h.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===Hm?r?t.UNSIGNED_INT_24_8:(h=e.get("WEBGL_depth_texture"),h!==null?h.UNSIGNED_INT_24_8_WEBGL:null):t[o]!==void 0?t[o]:null}return{convert:i}}class B6e extends js{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let E0=class extends Kr{constructor(){super(),this.isGroup=!0,this.type="Group"}};const U6e={type:"move"};class LG{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new E0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new E0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Fe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Fe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new E0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Fe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Fe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,u=null;const h=this._targetRay,m=this._grip,v=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(v&&e.hand){u=!0;for(const F of e.hand.values()){const B=n.getJointPose(F,r),z=this._getHandJoint(v,F);B!==null&&(z.matrix.fromArray(B.transform.matrix),z.matrix.decompose(z.position,z.rotation,z.scale),z.matrixWorldNeedsUpdate=!0,z.jointRadius=B.radius),z.visible=B!==null}const x=v.joints["index-finger-tip"],E=v.joints["thumb-tip"],M=x.position.distanceTo(E.position),D=.02,H=.005;v.inputState.pinching&&M>D+H?(v.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!v.inputState.pinching&&M<=D-H&&(v.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else m!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(m.matrix.fromArray(o.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,o.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(o.linearVelocity)):m.hasLinearVelocity=!1,o.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(o.angularVelocity)):m.hasAngularVelocity=!1));h!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(h.matrix.fromArray(i.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,i.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(i.linearVelocity)):h.hasLinearVelocity=!1,i.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(i.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(U6e)))}return h!==null&&(h.visible=i!==null),m!==null&&(m.visible=o!==null),v!==null&&(v.visible=u!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new E0;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const z6e=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,V6e=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class j6e{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new Yi,o=e.properties.get(i);o.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}render(e,n){if(this.texture!==null){if(this.mesh===null){const r=n.cameras[0].viewport,i=new Aa({extensions:{fragDepth:!0},vertexShader:z6e,fragmentShader:V6e,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new _s(new dM(20,20),i)}e.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class H6e extends Al{constructor(e,n){super();const r=this;let i=null,o=1,u=null,h="local-floor",m=1,v=null,x=null,E=null,M=null,D=null,H=null;const F=new j6e,B=n.getContextAttributes();let z=null,P=null;const W=[],Z=[],ve=new an;let X=null;const se=new js;se.layers.enable(1),se.viewport=new Ar;const pe=new js;pe.layers.enable(2),pe.viewport=new Ar;const J=[se,pe],ne=new B6e;ne.layers.enable(1),ne.layers.enable(2);let Ee=null,ot=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ht){let Et=W[ht];return Et===void 0&&(Et=new LG,W[ht]=Et),Et.getTargetRaySpace()},this.getControllerGrip=function(ht){let Et=W[ht];return Et===void 0&&(Et=new LG,W[ht]=Et),Et.getGripSpace()},this.getHand=function(ht){let Et=W[ht];return Et===void 0&&(Et=new LG,W[ht]=Et),Et.getHandSpace()};function wt(ht){const Et=Z.indexOf(ht.inputSource);if(Et===-1)return;const $t=W[Et];$t!==void 0&&($t.update(ht.inputSource,ht.frame,v||u),$t.dispatchEvent({type:ht.type,data:ht.inputSource}))}function ue(){i.removeEventListener("select",wt),i.removeEventListener("selectstart",wt),i.removeEventListener("selectend",wt),i.removeEventListener("squeeze",wt),i.removeEventListener("squeezestart",wt),i.removeEventListener("squeezeend",wt),i.removeEventListener("end",ue),i.removeEventListener("inputsourceschange",Ye);for(let ht=0;ht<W.length;ht++){const Et=Z[ht];Et!==null&&(Z[ht]=null,W[ht].disconnect(Et))}Ee=null,ot=null,F.reset(),e.setRenderTarget(z),D=null,M=null,E=null,i=null,P=null,cn.stop(),r.isPresenting=!1,e.setPixelRatio(X),e.setSize(ve.width,ve.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ht){o=ht,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ht){h=ht,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return v||u},this.setReferenceSpace=function(ht){v=ht},this.getBaseLayer=function(){return M!==null?M:D},this.getBinding=function(){return E},this.getFrame=function(){return H},this.getSession=function(){return i},this.setSession=async function(ht){if(i=ht,i!==null){if(z=e.getRenderTarget(),i.addEventListener("select",wt),i.addEventListener("selectstart",wt),i.addEventListener("selectend",wt),i.addEventListener("squeeze",wt),i.addEventListener("squeezestart",wt),i.addEventListener("squeezeend",wt),i.addEventListener("end",ue),i.addEventListener("inputsourceschange",Ye),B.xrCompatible!==!0&&await n.makeXRCompatible(),X=e.getPixelRatio(),e.getSize(ve),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const Et={antialias:i.renderState.layers===void 0?B.antialias:!0,alpha:!0,depth:B.depth,stencil:B.stencil,framebufferScaleFactor:o};D=new XRWebGLLayer(i,n,Et),i.updateRenderState({baseLayer:D}),e.setPixelRatio(1),e.setSize(D.framebufferWidth,D.framebufferHeight,!1),P=new Pl(D.framebufferWidth,D.framebufferHeight,{format:mu,type:Sl,colorSpace:e.outputColorSpace,stencilBuffer:B.stencil})}else{let Et=null,$t=null,Zt=null;B.depth&&(Zt=B.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,Et=B.stencil?U0:k0,$t=B.stencil?Hm:ip);const gn={colorFormat:n.RGBA8,depthFormat:Zt,scaleFactor:o};E=new XRWebGLBinding(i,n),M=E.createProjectionLayer(gn),i.updateRenderState({layers:[M]}),e.setPixelRatio(1),e.setSize(M.textureWidth,M.textureHeight,!1),P=new Pl(M.textureWidth,M.textureHeight,{format:mu,type:Sl,depthTexture:new L7(M.textureWidth,M.textureHeight,$t,void 0,void 0,void 0,void 0,void 0,void 0,Et),stencilBuffer:B.stencil,colorSpace:e.outputColorSpace,samples:B.antialias?4:0});const Jt=e.properties.get(P);Jt.__ignoreDepthValues=M.ignoreDepthValues}P.isXRRenderTarget=!0,this.setFoveation(m),v=null,u=await i.requestReferenceSpace(h),cn.setContext(i),cn.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function Ye(ht){for(let Et=0;Et<ht.removed.length;Et++){const $t=ht.removed[Et],Zt=Z.indexOf($t);Zt>=0&&(Z[Zt]=null,W[Zt].disconnect($t))}for(let Et=0;Et<ht.added.length;Et++){const $t=ht.added[Et];let Zt=Z.indexOf($t);if(Zt===-1){for(let Jt=0;Jt<W.length;Jt++)if(Jt>=Z.length){Z.push($t),Zt=Jt;break}else if(Z[Jt]===null){Z[Jt]=$t,Zt=Jt;break}if(Zt===-1)break}const gn=W[Zt];gn&&gn.connect($t)}}const Te=new Fe,st=new Fe;function Be(ht,Et,$t){Te.setFromMatrixPosition(Et.matrixWorld),st.setFromMatrixPosition($t.matrixWorld);const Zt=Te.distanceTo(st),gn=Et.projectionMatrix.elements,Jt=$t.projectionMatrix.elements,Qn=gn[14]/(gn[10]-1),vn=gn[14]/(gn[10]+1),Qe=(gn[9]+1)/gn[5],Zr=(gn[9]-1)/gn[5],Tn=(gn[8]-1)/gn[0],wn=(Jt[8]+1)/Jt[0],sn=Qn*Tn,Ur=Qn*wn,Mn=Zt/(-Tn+wn),Se=Mn*-Tn;Et.matrixWorld.decompose(ht.position,ht.quaternion,ht.scale),ht.translateX(Se),ht.translateZ(Mn),ht.matrixWorld.compose(ht.position,ht.quaternion,ht.scale),ht.matrixWorldInverse.copy(ht.matrixWorld).invert();const fe=Qn+Mn,lt=vn+Mn,Dt=sn-Se,Ot=Ur+(Zt-Se),Mt=Qe*vn/lt*fe,hn=Zr*vn/lt*fe;ht.projectionMatrix.makePerspective(Dt,Ot,Mt,hn,fe,lt),ht.projectionMatrixInverse.copy(ht.projectionMatrix).invert()}function Xe(ht,Et){Et===null?ht.matrixWorld.copy(ht.matrix):ht.matrixWorld.multiplyMatrices(Et.matrixWorld,ht.matrix),ht.matrixWorldInverse.copy(ht.matrixWorld).invert()}this.updateCamera=function(ht){if(i===null)return;F.texture!==null&&(ht.near=F.depthNear,ht.far=F.depthFar),ne.near=pe.near=se.near=ht.near,ne.far=pe.far=se.far=ht.far,(Ee!==ne.near||ot!==ne.far)&&(i.updateRenderState({depthNear:ne.near,depthFar:ne.far}),Ee=ne.near,ot=ne.far,se.near=Ee,se.far=ot,pe.near=Ee,pe.far=ot,se.updateProjectionMatrix(),pe.updateProjectionMatrix(),ht.updateProjectionMatrix());const Et=ht.parent,$t=ne.cameras;Xe(ne,Et);for(let Zt=0;Zt<$t.length;Zt++)Xe($t[Zt],Et);$t.length===2?Be(ne,se,pe):ne.projectionMatrix.copy(se.projectionMatrix),qe(ht,ne,Et)};function qe(ht,Et,$t){$t===null?ht.matrix.copy(Et.matrixWorld):(ht.matrix.copy($t.matrixWorld),ht.matrix.invert(),ht.matrix.multiply(Et.matrixWorld)),ht.matrix.decompose(ht.position,ht.quaternion,ht.scale),ht.updateMatrixWorld(!0),ht.projectionMatrix.copy(Et.projectionMatrix),ht.projectionMatrixInverse.copy(Et.projectionMatrixInverse),ht.isPerspectiveCamera&&(ht.fov=l1*2*Math.atan(1/ht.projectionMatrix.elements[5]),ht.zoom=1)}this.getCamera=function(){return ne},this.getFoveation=function(){if(!(M===null&&D===null))return m},this.setFoveation=function(ht){m=ht,M!==null&&(M.fixedFoveation=ht),D!==null&&D.fixedFoveation!==void 0&&(D.fixedFoveation=ht)},this.hasDepthSensing=function(){return F.texture!==null};let dt=null;function Pt(ht,Et){if(x=Et.getViewerPose(v||u),H=Et,x!==null){const $t=x.views;D!==null&&(e.setRenderTargetFramebuffer(P,D.framebuffer),e.setRenderTarget(P));let Zt=!1;$t.length!==ne.cameras.length&&(ne.cameras.length=0,Zt=!0);for(let Jt=0;Jt<$t.length;Jt++){const Qn=$t[Jt];let vn=null;if(D!==null)vn=D.getViewport(Qn);else{const Zr=E.getViewSubImage(M,Qn);vn=Zr.viewport,Jt===0&&(e.setRenderTargetTextures(P,Zr.colorTexture,M.ignoreDepthValues?void 0:Zr.depthStencilTexture),e.setRenderTarget(P))}let Qe=J[Jt];Qe===void 0&&(Qe=new js,Qe.layers.enable(Jt),Qe.viewport=new Ar,J[Jt]=Qe),Qe.matrix.fromArray(Qn.transform.matrix),Qe.matrix.decompose(Qe.position,Qe.quaternion,Qe.scale),Qe.projectionMatrix.fromArray(Qn.projectionMatrix),Qe.projectionMatrixInverse.copy(Qe.projectionMatrix).invert(),Qe.viewport.set(vn.x,vn.y,vn.width,vn.height),Jt===0&&(ne.matrix.copy(Qe.matrix),ne.matrix.decompose(ne.position,ne.quaternion,ne.scale)),Zt===!0&&ne.cameras.push(Qe)}const gn=i.enabledFeatures;if(gn&&gn.includes("depth-sensing")){const Jt=E.getDepthInformation($t[0]);Jt&&Jt.isValid&&Jt.texture&&F.init(e,Jt,i.renderState)}}for(let $t=0;$t<W.length;$t++){const Zt=Z[$t],gn=W[$t];Zt!==null&&gn!==void 0&&gn.update(Zt,Et,v||u)}F.render(e,ne),dt&&dt(ht,Et),Et.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:Et}),H=null}const cn=new YSe;cn.setAnimationLoop(Pt),this.setAnimationLoop=function(ht){dt=ht},this.dispose=function(){}}}function G6e(t,e){function n(B,z){B.matrixAutoUpdate===!0&&B.updateMatrix(),z.value.copy(B.matrix)}function r(B,z){z.color.getRGB(B.fogColor.value,qSe(t)),z.isFog?(B.fogNear.value=z.near,B.fogFar.value=z.far):z.isFogExp2&&(B.fogDensity.value=z.density)}function i(B,z,P,W,Z){z.isMeshBasicMaterial||z.isMeshLambertMaterial?o(B,z):z.isMeshToonMaterial?(o(B,z),E(B,z)):z.isMeshPhongMaterial?(o(B,z),x(B,z)):z.isMeshStandardMaterial?(o(B,z),M(B,z),z.isMeshPhysicalMaterial&&D(B,z,Z)):z.isMeshMatcapMaterial?(o(B,z),H(B,z)):z.isMeshDepthMaterial?o(B,z):z.isMeshDistanceMaterial?(o(B,z),F(B,z)):z.isMeshNormalMaterial?o(B,z):z.isLineBasicMaterial?(u(B,z),z.isLineDashedMaterial&&h(B,z)):z.isPointsMaterial?m(B,z,P,W):z.isSpriteMaterial?v(B,z):z.isShadowMaterial?(B.color.value.copy(z.color),B.opacity.value=z.opacity):z.isShaderMaterial&&(z.uniformsNeedUpdate=!1)}function o(B,z){B.opacity.value=z.opacity,z.color&&B.diffuse.value.copy(z.color),z.emissive&&B.emissive.value.copy(z.emissive).multiplyScalar(z.emissiveIntensity),z.map&&(B.map.value=z.map,n(z.map,B.mapTransform)),z.alphaMap&&(B.alphaMap.value=z.alphaMap,n(z.alphaMap,B.alphaMapTransform)),z.bumpMap&&(B.bumpMap.value=z.bumpMap,n(z.bumpMap,B.bumpMapTransform),B.bumpScale.value=z.bumpScale,z.side===Rs&&(B.bumpScale.value*=-1)),z.normalMap&&(B.normalMap.value=z.normalMap,n(z.normalMap,B.normalMapTransform),B.normalScale.value.copy(z.normalScale),z.side===Rs&&B.normalScale.value.negate()),z.displacementMap&&(B.displacementMap.value=z.displacementMap,n(z.displacementMap,B.displacementMapTransform),B.displacementScale.value=z.displacementScale,B.displacementBias.value=z.displacementBias),z.emissiveMap&&(B.emissiveMap.value=z.emissiveMap,n(z.emissiveMap,B.emissiveMapTransform)),z.specularMap&&(B.specularMap.value=z.specularMap,n(z.specularMap,B.specularMapTransform)),z.alphaTest>0&&(B.alphaTest.value=z.alphaTest);const P=e.get(z).envMap;if(P&&(B.envMap.value=P,B.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,B.reflectivity.value=z.reflectivity,B.ior.value=z.ior,B.refractionRatio.value=z.refractionRatio),z.lightMap){B.lightMap.value=z.lightMap;const W=t._useLegacyLights===!0?Math.PI:1;B.lightMapIntensity.value=z.lightMapIntensity*W,n(z.lightMap,B.lightMapTransform)}z.aoMap&&(B.aoMap.value=z.aoMap,B.aoMapIntensity.value=z.aoMapIntensity,n(z.aoMap,B.aoMapTransform))}function u(B,z){B.diffuse.value.copy(z.color),B.opacity.value=z.opacity,z.map&&(B.map.value=z.map,n(z.map,B.mapTransform))}function h(B,z){B.dashSize.value=z.dashSize,B.totalSize.value=z.dashSize+z.gapSize,B.scale.value=z.scale}function m(B,z,P,W){B.diffuse.value.copy(z.color),B.opacity.value=z.opacity,B.size.value=z.size*P,B.scale.value=W*.5,z.map&&(B.map.value=z.map,n(z.map,B.uvTransform)),z.alphaMap&&(B.alphaMap.value=z.alphaMap,n(z.alphaMap,B.alphaMapTransform)),z.alphaTest>0&&(B.alphaTest.value=z.alphaTest)}function v(B,z){B.diffuse.value.copy(z.color),B.opacity.value=z.opacity,B.rotation.value=z.rotation,z.map&&(B.map.value=z.map,n(z.map,B.mapTransform)),z.alphaMap&&(B.alphaMap.value=z.alphaMap,n(z.alphaMap,B.alphaMapTransform)),z.alphaTest>0&&(B.alphaTest.value=z.alphaTest)}function x(B,z){B.specular.value.copy(z.specular),B.shininess.value=Math.max(z.shininess,1e-4)}function E(B,z){z.gradientMap&&(B.gradientMap.value=z.gradientMap)}function M(B,z){B.metalness.value=z.metalness,z.metalnessMap&&(B.metalnessMap.value=z.metalnessMap,n(z.metalnessMap,B.metalnessMapTransform)),B.roughness.value=z.roughness,z.roughnessMap&&(B.roughnessMap.value=z.roughnessMap,n(z.roughnessMap,B.roughnessMapTransform)),e.get(z).envMap&&(B.envMapIntensity.value=z.envMapIntensity)}function D(B,z,P){B.ior.value=z.ior,z.sheen>0&&(B.sheenColor.value.copy(z.sheenColor).multiplyScalar(z.sheen),B.sheenRoughness.value=z.sheenRoughness,z.sheenColorMap&&(B.sheenColorMap.value=z.sheenColorMap,n(z.sheenColorMap,B.sheenColorMapTransform)),z.sheenRoughnessMap&&(B.sheenRoughnessMap.value=z.sheenRoughnessMap,n(z.sheenRoughnessMap,B.sheenRoughnessMapTransform))),z.clearcoat>0&&(B.clearcoat.value=z.clearcoat,B.clearcoatRoughness.value=z.clearcoatRoughness,z.clearcoatMap&&(B.clearcoatMap.value=z.clearcoatMap,n(z.clearcoatMap,B.clearcoatMapTransform)),z.clearcoatRoughnessMap&&(B.clearcoatRoughnessMap.value=z.clearcoatRoughnessMap,n(z.clearcoatRoughnessMap,B.clearcoatRoughnessMapTransform)),z.clearcoatNormalMap&&(B.clearcoatNormalMap.value=z.clearcoatNormalMap,n(z.clearcoatNormalMap,B.clearcoatNormalMapTransform),B.clearcoatNormalScale.value.copy(z.clearcoatNormalScale),z.side===Rs&&B.clearcoatNormalScale.value.negate())),z.iridescence>0&&(B.iridescence.value=z.iridescence,B.iridescenceIOR.value=z.iridescenceIOR,B.iridescenceThicknessMinimum.value=z.iridescenceThicknessRange[0],B.iridescenceThicknessMaximum.value=z.iridescenceThicknessRange[1],z.iridescenceMap&&(B.iridescenceMap.value=z.iridescenceMap,n(z.iridescenceMap,B.iridescenceMapTransform)),z.iridescenceThicknessMap&&(B.iridescenceThicknessMap.value=z.iridescenceThicknessMap,n(z.iridescenceThicknessMap,B.iridescenceThicknessMapTransform))),z.transmission>0&&(B.transmission.value=z.transmission,B.transmissionSamplerMap.value=P.texture,B.transmissionSamplerSize.value.set(P.width,P.height),z.transmissionMap&&(B.transmissionMap.value=z.transmissionMap,n(z.transmissionMap,B.transmissionMapTransform)),B.thickness.value=z.thickness,z.thicknessMap&&(B.thicknessMap.value=z.thicknessMap,n(z.thicknessMap,B.thicknessMapTransform)),B.attenuationDistance.value=z.attenuationDistance,B.attenuationColor.value.copy(z.attenuationColor)),z.anisotropy>0&&(B.anisotropyVector.value.set(z.anisotropy*Math.cos(z.anisotropyRotation),z.anisotropy*Math.sin(z.anisotropyRotation)),z.anisotropyMap&&(B.anisotropyMap.value=z.anisotropyMap,n(z.anisotropyMap,B.anisotropyMapTransform))),B.specularIntensity.value=z.specularIntensity,B.specularColor.value.copy(z.specularColor),z.specularColorMap&&(B.specularColorMap.value=z.specularColorMap,n(z.specularColorMap,B.specularColorMapTransform)),z.specularIntensityMap&&(B.specularIntensityMap.value=z.specularIntensityMap,n(z.specularIntensityMap,B.specularIntensityMapTransform))}function H(B,z){z.matcap&&(B.matcap.value=z.matcap)}function F(B,z){const P=e.get(z).light;B.referencePosition.value.setFromMatrixPosition(P.matrixWorld),B.nearDistance.value=P.shadow.camera.near,B.farDistance.value=P.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function W6e(t,e,n,r){let i={},o={},u=[];const h=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function m(P,W){const Z=W.program;r.uniformBlockBinding(P,Z)}function v(P,W){let Z=i[P.id];Z===void 0&&(H(P),Z=x(P),i[P.id]=Z,P.addEventListener("dispose",B));const ve=W.program;r.updateUBOMapping(P,ve);const X=e.render.frame;o[P.id]!==X&&(M(P),o[P.id]=X)}function x(P){const W=E();P.__bindingPointIndex=W;const Z=t.createBuffer(),ve=P.__size,X=P.usage;return t.bindBuffer(t.UNIFORM_BUFFER,Z),t.bufferData(t.UNIFORM_BUFFER,ve,X),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,W,Z),Z}function E(){for(let P=0;P<h;P++)if(u.indexOf(P)===-1)return u.push(P),P;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function M(P){const W=i[P.id],Z=P.uniforms,ve=P.__cache;t.bindBuffer(t.UNIFORM_BUFFER,W);for(let X=0,se=Z.length;X<se;X++){const pe=Array.isArray(Z[X])?Z[X]:[Z[X]];for(let J=0,ne=pe.length;J<ne;J++){const Ee=pe[J];if(D(Ee,X,J,ve)===!0){const ot=Ee.__offset,wt=Array.isArray(Ee.value)?Ee.value:[Ee.value];let ue=0;for(let Ye=0;Ye<wt.length;Ye++){const Te=wt[Ye],st=F(Te);typeof Te=="number"||typeof Te=="boolean"?(Ee.__data[0]=Te,t.bufferSubData(t.UNIFORM_BUFFER,ot+ue,Ee.__data)):Te.isMatrix3?(Ee.__data[0]=Te.elements[0],Ee.__data[1]=Te.elements[1],Ee.__data[2]=Te.elements[2],Ee.__data[3]=0,Ee.__data[4]=Te.elements[3],Ee.__data[5]=Te.elements[4],Ee.__data[6]=Te.elements[5],Ee.__data[7]=0,Ee.__data[8]=Te.elements[6],Ee.__data[9]=Te.elements[7],Ee.__data[10]=Te.elements[8],Ee.__data[11]=0):(Te.toArray(Ee.__data,ue),ue+=st.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,ot,Ee.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function D(P,W,Z,ve){const X=P.value,se=W+"_"+Z;if(ve[se]===void 0)return typeof X=="number"||typeof X=="boolean"?ve[se]=X:ve[se]=X.clone(),!0;{const pe=ve[se];if(typeof X=="number"||typeof X=="boolean"){if(pe!==X)return ve[se]=X,!0}else if(pe.equals(X)===!1)return pe.copy(X),!0}return!1}function H(P){const W=P.uniforms;let Z=0;const ve=16;for(let se=0,pe=W.length;se<pe;se++){const J=Array.isArray(W[se])?W[se]:[W[se]];for(let ne=0,Ee=J.length;ne<Ee;ne++){const ot=J[ne],wt=Array.isArray(ot.value)?ot.value:[ot.value];for(let ue=0,Ye=wt.length;ue<Ye;ue++){const Te=wt[ue],st=F(Te),Be=Z%ve;Be!==0&&ve-Be<st.boundary&&(Z+=ve-Be),ot.__data=new Float32Array(st.storage/Float32Array.BYTES_PER_ELEMENT),ot.__offset=Z,Z+=st.storage}}}const X=Z%ve;return X>0&&(Z+=ve-X),P.__size=Z,P.__cache={},this}function F(P){const W={boundary:0,storage:0};return typeof P=="number"||typeof P=="boolean"?(W.boundary=4,W.storage=4):P.isVector2?(W.boundary=8,W.storage=8):P.isVector3||P.isColor?(W.boundary=16,W.storage=12):P.isVector4?(W.boundary=16,W.storage=16):P.isMatrix3?(W.boundary=48,W.storage=48):P.isMatrix4?(W.boundary=64,W.storage=64):P.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",P),W}function B(P){const W=P.target;W.removeEventListener("dispose",B);const Z=u.indexOf(W.__bindingPointIndex);u.splice(Z,1),t.deleteBuffer(i[W.id]),delete i[W.id],delete o[W.id]}function z(){for(const P in i)t.deleteBuffer(i[P]);u=[],i={},o={}}return{bind:m,update:v,dispose:z}}class N7{constructor(e={}){const{canvas:n=U5e(),context:r=null,depth:i=!0,stencil:o=!0,alpha:u=!1,antialias:h=!1,premultipliedAlpha:m=!0,preserveDrawingBuffer:v=!1,powerPreference:x="default",failIfMajorPerformanceCaveat:E=!1}=e;this.isWebGLRenderer=!0;let M;r!==null?M=r.getContextAttributes().alpha:M=u;const D=new Uint32Array(4),H=new Int32Array(4);let F=null,B=null;const z=[],P=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=is,this._useLegacyLights=!1,this.toneMapping=jm,this.toneMappingExposure=1;const W=this;let Z=!1,ve=0,X=0,se=null,pe=-1,J=null;const ne=new Ar,Ee=new Ar;let ot=null;const wt=new _n(0);let ue=0,Ye=n.width,Te=n.height,st=1,Be=null,Xe=null;const qe=new Ar(0,0,Ye,Te),dt=new Ar(0,0,Ye,Te);let Pt=!1;const cn=new D7;let ht=!1,Et=!1,$t=null;const Zt=new Fn,gn=new an,Jt=new Fe,Qn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function vn(){return se===null?st:1}let Qe=r;function Zr(be,Ze){for(let yt=0;yt<be.length;yt++){const mt=be[yt],ct=n.getContext(mt,Ze);if(ct!==null)return ct}return null}try{const be={alpha:!0,depth:i,stencil:o,antialias:h,premultipliedAlpha:m,preserveDrawingBuffer:v,powerPreference:x,failIfMajorPerformanceCaveat:E};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${lM}`),n.addEventListener("webglcontextlost",ln,!1),n.addEventListener("webglcontextrestored",Me,!1),n.addEventListener("webglcontextcreationerror",zt,!1),Qe===null){const Ze=["webgl2","webgl","experimental-webgl"];if(W.isWebGL1Renderer===!0&&Ze.shift(),Qe=Zr(Ze,be),Qe===null)throw Zr(Ze)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Qe instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Qe.getShaderPrecisionFormat===void 0&&(Qe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(be){throw console.error("THREE.WebGLRenderer: "+be.message),be}let Tn,wn,sn,Ur,Mn,Se,fe,lt,Dt,Ot,Mt,hn,Yt,nn,Rn,$n,Lt,mr,ir,En,Pn,en,Bn,Ae;function jt(){Tn=new JVe(Qe),wn=new KVe(Qe,Tn,e),Tn.init(wn),en=new F6e(Qe,Tn,wn),sn=new L6e(Qe,Tn,wn),Ur=new nje(Qe),Mn=new x6e,Se=new N6e(Qe,Tn,sn,Mn,wn,en,Ur),fe=new qVe(W),lt=new QVe(W),Dt=new c4e(Qe,wn),Bn=new WVe(Qe,Tn,Dt,wn),Ot=new eje(Qe,Dt,Ur,Bn),Mt=new oje(Qe,Ot,Dt,Ur),ir=new sje(Qe,wn,Se),$n=new XVe(Mn),hn=new w6e(W,fe,lt,Tn,wn,Bn,$n),Yt=new G6e(W,Mn),nn=new E6e,Rn=new A6e(Tn,wn),mr=new GVe(W,fe,lt,sn,Mt,M,m),Lt=new O6e(W,Mt,wn),Ae=new W6e(Qe,Ur,wn,sn),En=new $Ve(Qe,Tn,Ur,wn),Pn=new tje(Qe,Tn,Ur,wn),Ur.programs=hn.programs,W.capabilities=wn,W.extensions=Tn,W.properties=Mn,W.renderLists=nn,W.shadowMap=Lt,W.state=sn,W.info=Ur}jt();const Kt=new H6e(W,Qe);this.xr=Kt,this.getContext=function(){return Qe},this.getContextAttributes=function(){return Qe.getContextAttributes()},this.forceContextLoss=function(){const be=Tn.get("WEBGL_lose_context");be&&be.loseContext()},this.forceContextRestore=function(){const be=Tn.get("WEBGL_lose_context");be&&be.restoreContext()},this.getPixelRatio=function(){return st},this.setPixelRatio=function(be){be!==void 0&&(st=be,this.setSize(Ye,Te,!1))},this.getSize=function(be){return be.set(Ye,Te)},this.setSize=function(be,Ze,yt=!0){if(Kt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Ye=be,Te=Ze,n.width=Math.floor(be*st),n.height=Math.floor(Ze*st),yt===!0&&(n.style.width=be+"px",n.style.height=Ze+"px"),this.setViewport(0,0,be,Ze)},this.getDrawingBufferSize=function(be){return be.set(Ye*st,Te*st).floor()},this.setDrawingBufferSize=function(be,Ze,yt){Ye=be,Te=Ze,st=yt,n.width=Math.floor(be*yt),n.height=Math.floor(Ze*yt),this.setViewport(0,0,be,Ze)},this.getCurrentViewport=function(be){return be.copy(ne)},this.getViewport=function(be){return be.copy(qe)},this.setViewport=function(be,Ze,yt,mt){be.isVector4?qe.set(be.x,be.y,be.z,be.w):qe.set(be,Ze,yt,mt),sn.viewport(ne.copy(qe).multiplyScalar(st).floor())},this.getScissor=function(be){return be.copy(dt)},this.setScissor=function(be,Ze,yt,mt){be.isVector4?dt.set(be.x,be.y,be.z,be.w):dt.set(be,Ze,yt,mt),sn.scissor(Ee.copy(dt).multiplyScalar(st).floor())},this.getScissorTest=function(){return Pt},this.setScissorTest=function(be){sn.setScissorTest(Pt=be)},this.setOpaqueSort=function(be){Be=be},this.setTransparentSort=function(be){Xe=be},this.getClearColor=function(be){return be.copy(mr.getClearColor())},this.setClearColor=function(){mr.setClearColor.apply(mr,arguments)},this.getClearAlpha=function(){return mr.getClearAlpha()},this.setClearAlpha=function(){mr.setClearAlpha.apply(mr,arguments)},this.clear=function(be=!0,Ze=!0,yt=!0){let mt=0;if(be){let ct=!1;if(se!==null){const rn=se.texture.format;ct=rn===zSe||rn===USe||rn===BSe}if(ct){const rn=se.texture.type,xn=rn===Sl||rn===ip||rn===T7||rn===Hm||rn===NSe||rn===FSe,Ln=mr.getClearColor(),Vn=mr.getClearAlpha(),nr=Ln.r,Kn=Ln.g,Nn=Ln.b;xn?(D[0]=nr,D[1]=Kn,D[2]=Nn,D[3]=Vn,Qe.clearBufferuiv(Qe.COLOR,0,D)):(H[0]=nr,H[1]=Kn,H[2]=Nn,H[3]=Vn,Qe.clearBufferiv(Qe.COLOR,0,H))}else mt|=Qe.COLOR_BUFFER_BIT}Ze&&(mt|=Qe.DEPTH_BUFFER_BIT),yt&&(mt|=Qe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Qe.clear(mt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",ln,!1),n.removeEventListener("webglcontextrestored",Me,!1),n.removeEventListener("webglcontextcreationerror",zt,!1),nn.dispose(),Rn.dispose(),Mn.dispose(),fe.dispose(),lt.dispose(),Mt.dispose(),Bn.dispose(),Ae.dispose(),hn.dispose(),Kt.dispose(),Kt.removeEventListener("sessionstart",Pr),Kt.removeEventListener("sessionend",qn),$t&&($t.dispose(),$t=null),ri.stop()};function ln(be){be.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Z=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),Z=!1;const be=Ur.autoReset,Ze=Lt.enabled,yt=Lt.autoUpdate,mt=Lt.needsUpdate,ct=Lt.type;jt(),Ur.autoReset=be,Lt.enabled=Ze,Lt.autoUpdate=yt,Lt.needsUpdate=mt,Lt.type=ct}function zt(be){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",be.statusMessage)}function It(be){const Ze=be.target;Ze.removeEventListener("dispose",It),un(Ze)}function un(be){Dn(be),Mn.remove(be)}function Dn(be){const Ze=Mn.get(be).programs;Ze!==void 0&&(Ze.forEach(function(yt){hn.releaseProgram(yt)}),be.isShaderMaterial&&hn.releaseShaderCache(be))}this.renderBufferDirect=function(be,Ze,yt,mt,ct,rn){Ze===null&&(Ze=Qn);const xn=ct.isMesh&&ct.matrixWorld.determinant()<0,Ln=ug(be,Ze,yt,mt,ct);sn.setMaterial(mt,xn);let Vn=yt.index,nr=1;if(mt.wireframe===!0){if(Vn=Ot.getWireframeAttribute(yt),Vn===void 0)return;nr=2}const Kn=yt.drawRange,Nn=yt.attributes.position;let _r=Kn.start*nr,Os=(Kn.start+Kn.count)*nr;rn!==null&&(_r=Math.max(_r,rn.start*nr),Os=Math.min(Os,(rn.start+rn.count)*nr)),Vn!==null?(_r=Math.max(_r,0),Os=Math.min(Os,Vn.count)):Nn!=null&&(_r=Math.max(_r,0),Os=Math.min(Os,Nn.count));const ci=Os-_r;if(ci<0||ci===1/0)return;Bn.setup(ct,mt,Ln,yt,Vn);let Ro,zr=En;if(Vn!==null&&(Ro=Dt.get(Vn),zr=Pn,zr.setIndex(Ro)),ct.isMesh)mt.wireframe===!0?(sn.setLineWidth(mt.wireframeLinewidth*vn()),zr.setMode(Qe.LINES)):zr.setMode(Qe.TRIANGLES);else if(ct.isLine){let Wn=mt.linewidth;Wn===void 0&&(Wn=1),sn.setLineWidth(Wn*vn()),ct.isLineSegments?zr.setMode(Qe.LINES):ct.isLineLoop?zr.setMode(Qe.LINE_LOOP):zr.setMode(Qe.LINE_STRIP)}else ct.isPoints?zr.setMode(Qe.POINTS):ct.isSprite&&zr.setMode(Qe.TRIANGLES);if(ct.isBatchedMesh)zr.renderMultiDraw(ct._multiDrawStarts,ct._multiDrawCounts,ct._multiDrawCount);else if(ct.isInstancedMesh)zr.renderInstances(_r,ci,ct.count);else if(yt.isInstancedBufferGeometry){const Wn=yt._maxInstanceCount!==void 0?yt._maxInstanceCount:1/0,Ic=Math.min(yt.instanceCount,Wn);zr.renderInstances(_r,ci,Ic)}else zr.render(_r,ci)};function lr(be,Ze,yt){be.transparent===!0&&be.side===Ca&&be.forceSinglePass===!1?(be.side=Rs,be.needsUpdate=!0,ia(be,Ze,yt),be.side=Rd,be.needsUpdate=!0,ia(be,Ze,yt),be.side=Ca):ia(be,Ze,yt)}this.compile=function(be,Ze,yt=null){yt===null&&(yt=be),B=Rn.get(yt),B.init(),P.push(B),yt.traverseVisible(function(ct){ct.isLight&&ct.layers.test(Ze.layers)&&(B.pushLight(ct),ct.castShadow&&B.pushShadow(ct))}),be!==yt&&be.traverseVisible(function(ct){ct.isLight&&ct.layers.test(Ze.layers)&&(B.pushLight(ct),ct.castShadow&&B.pushShadow(ct))}),B.setupLights(W._useLegacyLights);const mt=new Set;return be.traverse(function(ct){const rn=ct.material;if(rn)if(Array.isArray(rn))for(let xn=0;xn<rn.length;xn++){const Ln=rn[xn];lr(Ln,yt,ct),mt.add(Ln)}else lr(rn,yt,ct),mt.add(rn)}),P.pop(),B=null,mt},this.compileAsync=function(be,Ze,yt=null){const mt=this.compile(be,Ze,yt);return new Promise(ct=>{function rn(){if(mt.forEach(function(xn){Mn.get(xn).currentProgram.isReady()&&mt.delete(xn)}),mt.size===0){ct(be);return}setTimeout(rn,10)}Tn.get("KHR_parallel_shader_compile")!==null?rn():setTimeout(rn,10)})};let sr=null;function dr(be){sr&&sr(be)}function Pr(){ri.stop()}function qn(){ri.start()}const ri=new YSe;ri.setAnimationLoop(dr),typeof self<"u"&&ri.setContext(self),this.setAnimationLoop=function(be){sr=be,Kt.setAnimationLoop(be),be===null?ri.stop():ri.start()},Kt.addEventListener("sessionstart",Pr),Kt.addEventListener("sessionend",qn),this.render=function(be,Ze){if(Ze!==void 0&&Ze.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Z===!0)return;be.matrixWorldAutoUpdate===!0&&be.updateMatrixWorld(),Ze.parent===null&&Ze.matrixWorldAutoUpdate===!0&&Ze.updateMatrixWorld(),Kt.enabled===!0&&Kt.isPresenting===!0&&(Kt.cameraAutoUpdate===!0&&Kt.updateCamera(Ze),Ze=Kt.getCamera()),be.isScene===!0&&be.onBeforeRender(W,be,Ze,se),B=Rn.get(be,P.length),B.init(),P.push(B),Zt.multiplyMatrices(Ze.projectionMatrix,Ze.matrixWorldInverse),cn.setFromProjectionMatrix(Zt),Et=this.localClippingEnabled,ht=$n.init(this.clippingPlanes,Et),F=nn.get(be,z.length),F.init(),z.push(F),Ji(be,Ze,0,W.sortObjects),F.finish(),W.sortObjects===!0&&F.sort(Be,Xe),this.info.render.frame++,ht===!0&&$n.beginShadows();const yt=B.state.shadowsArray;if(Lt.render(yt,be,Ze),ht===!0&&$n.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Kt.enabled===!1||Kt.isPresenting===!1||Kt.hasDepthSensing()===!1)&&mr.render(F,be),B.setupLights(W._useLegacyLights),Ze.isArrayCamera){const mt=Ze.cameras;for(let ct=0,rn=mt.length;ct<rn;ct++){const xn=mt[ct];kc(F,be,xn,xn.viewport)}}else kc(F,be,Ze);se!==null&&(Se.updateMultisampleRenderTarget(se),Se.updateRenderTargetMipmap(se)),be.isScene===!0&&be.onAfterRender(W,be,Ze),Bn.resetDefaultState(),pe=-1,J=null,P.pop(),P.length>0?B=P[P.length-1]:B=null,z.pop(),z.length>0?F=z[z.length-1]:F=null};function Ji(be,Ze,yt,mt){if(be.visible===!1)return;if(be.layers.test(Ze.layers)){if(be.isGroup)yt=be.renderOrder;else if(be.isLOD)be.autoUpdate===!0&&be.update(Ze);else if(be.isLight)B.pushLight(be),be.castShadow&&B.pushShadow(be);else if(be.isSprite){if(!be.frustumCulled||cn.intersectsSprite(be)){mt&&Jt.setFromMatrixPosition(be.matrixWorld).applyMatrix4(Zt);const xn=Mt.update(be),Ln=be.material;Ln.visible&&F.push(be,xn,Ln,yt,Jt.z,null)}}else if((be.isMesh||be.isLine||be.isPoints)&&(!be.frustumCulled||cn.intersectsObject(be))){const xn=Mt.update(be),Ln=be.material;if(mt&&(be.boundingSphere!==void 0?(be.boundingSphere===null&&be.computeBoundingSphere(),Jt.copy(be.boundingSphere.center)):(xn.boundingSphere===null&&xn.computeBoundingSphere(),Jt.copy(xn.boundingSphere.center)),Jt.applyMatrix4(be.matrixWorld).applyMatrix4(Zt)),Array.isArray(Ln)){const Vn=xn.groups;for(let nr=0,Kn=Vn.length;nr<Kn;nr++){const Nn=Vn[nr],_r=Ln[Nn.materialIndex];_r&&_r.visible&&F.push(be,xn,_r,yt,Jt.z,Nn)}}else Ln.visible&&F.push(be,xn,Ln,yt,Jt.z,null)}}const rn=be.children;for(let xn=0,Ln=rn.length;xn<Ln;xn++)Ji(rn[xn],Ze,yt,mt)}function kc(be,Ze,yt,mt){const ct=be.opaque,rn=be.transmissive,xn=be.transparent;B.setupLightsView(yt),ht===!0&&$n.setGlobalState(W.clippingPlanes,yt),rn.length>0&&Bd(ct,rn,Ze,yt),mt&&sn.viewport(ne.copy(mt)),ct.length>0&&Tu(ct,Ze,yt),rn.length>0&&Tu(rn,Ze,yt),xn.length>0&&Tu(xn,Ze,yt),sn.buffers.depth.setTest(!0),sn.buffers.depth.setMask(!0),sn.buffers.color.setMask(!0),sn.setPolygonOffset(!1)}function Bd(be,Ze,yt,mt){if((yt.isScene===!0?yt.overrideMaterial:null)!==null)return;const rn=wn.isWebGL2;$t===null&&($t=new Pl(1,1,{generateMipmaps:!0,type:Tn.has("EXT_color_buffer_half_float")?RT:Sl,minFilter:S0,samples:rn?4:0})),W.getDrawingBufferSize(gn),rn?$t.setSize(gn.x,gn.y):$t.setSize(jN(gn.x),jN(gn.y));const xn=W.getRenderTarget();W.setRenderTarget($t),W.getClearColor(wt),ue=W.getClearAlpha(),ue<1&&W.setClearColor(16777215,.5),W.clear();const Ln=W.toneMapping;W.toneMapping=jm,Tu(be,yt,mt),Se.updateMultisampleRenderTarget($t),Se.updateRenderTargetMipmap($t);let Vn=!1;for(let nr=0,Kn=Ze.length;nr<Kn;nr++){const Nn=Ze[nr],_r=Nn.object,Os=Nn.geometry,ci=Nn.material,Ro=Nn.group;if(ci.side===Ca&&_r.layers.test(mt.layers)){const zr=ci.side;ci.side=Rs,ci.needsUpdate=!0,Pp(_r,yt,mt,Os,ci,Ro),ci.side=zr,ci.needsUpdate=!0,Vn=!0}}Vn===!0&&(Se.updateMultisampleRenderTarget($t),Se.updateRenderTargetMipmap($t)),W.setRenderTarget(xn),W.setClearColor(wt,ue),W.toneMapping=Ln}function Tu(be,Ze,yt){const mt=Ze.isScene===!0?Ze.overrideMaterial:null;for(let ct=0,rn=be.length;ct<rn;ct++){const xn=be[ct],Ln=xn.object,Vn=xn.geometry,nr=mt===null?xn.material:mt,Kn=xn.group;Ln.layers.test(yt.layers)&&Pp(Ln,Ze,yt,Vn,nr,Kn)}}function Pp(be,Ze,yt,mt,ct,rn){be.onBeforeRender(W,Ze,yt,mt,ct,rn),be.modelViewMatrix.multiplyMatrices(yt.matrixWorldInverse,be.matrixWorld),be.normalMatrix.getNormalMatrix(be.modelViewMatrix),ct.onBeforeRender(W,Ze,yt,mt,be,rn),ct.transparent===!0&&ct.side===Ca&&ct.forceSinglePass===!1?(ct.side=Rs,ct.needsUpdate=!0,W.renderBufferDirect(yt,Ze,mt,ct,be,rn),ct.side=Rd,ct.needsUpdate=!0,W.renderBufferDirect(yt,Ze,mt,ct,be,rn),ct.side=Ca):W.renderBufferDirect(yt,Ze,mt,ct,be,rn),be.onAfterRender(W,Ze,yt,mt,ct,rn)}function ia(be,Ze,yt){Ze.isScene!==!0&&(Ze=Qn);const mt=Mn.get(be),ct=B.state.lights,rn=B.state.shadowsArray,xn=ct.state.version,Ln=hn.getParameters(be,ct.state,rn,Ze,yt),Vn=hn.getProgramCacheKey(Ln);let nr=mt.programs;mt.environment=be.isMeshStandardMaterial?Ze.environment:null,mt.fog=Ze.fog,mt.envMap=(be.isMeshStandardMaterial?lt:fe).get(be.envMap||mt.environment),nr===void 0&&(be.addEventListener("dispose",It),nr=new Map,mt.programs=nr);let Kn=nr.get(Vn);if(Kn!==void 0){if(mt.currentProgram===Kn&&mt.lightsStateVersion===xn)return Ud(be,Ln),Kn}else Ln.uniforms=hn.getUniforms(be),be.onBuild(yt,Ln,W),be.onBeforeCompile(Ln,W),Kn=hn.acquireProgram(Ln,Vn),nr.set(Vn,Kn),mt.uniforms=Ln.uniforms;const Nn=mt.uniforms;return(!be.isShaderMaterial&&!be.isRawShaderMaterial||be.clipping===!0)&&(Nn.clippingPlanes=$n.uniform),Ud(be,Ln),mt.needsLights=Tp(be),mt.lightsStateVersion=xn,mt.needsLights&&(Nn.ambientLightColor.value=ct.state.ambient,Nn.lightProbe.value=ct.state.probe,Nn.directionalLights.value=ct.state.directional,Nn.directionalLightShadows.value=ct.state.directionalShadow,Nn.spotLights.value=ct.state.spot,Nn.spotLightShadows.value=ct.state.spotShadow,Nn.rectAreaLights.value=ct.state.rectArea,Nn.ltc_1.value=ct.state.rectAreaLTC1,Nn.ltc_2.value=ct.state.rectAreaLTC2,Nn.pointLights.value=ct.state.point,Nn.pointLightShadows.value=ct.state.pointShadow,Nn.hemisphereLights.value=ct.state.hemi,Nn.directionalShadowMap.value=ct.state.directionalShadowMap,Nn.directionalShadowMatrix.value=ct.state.directionalShadowMatrix,Nn.spotShadowMap.value=ct.state.spotShadowMap,Nn.spotLightMatrix.value=ct.state.spotLightMatrix,Nn.spotLightMap.value=ct.state.spotLightMap,Nn.pointShadowMap.value=ct.state.pointShadowMap,Nn.pointShadowMatrix.value=ct.state.pointShadowMatrix),mt.currentProgram=Kn,mt.uniformsList=null,Kn}function Ac(be){if(be.uniformsList===null){const Ze=be.currentProgram.getUniforms();be.uniformsList=QL.seqWithValue(Ze.seq,be.uniforms)}return be.uniformsList}function Ud(be,Ze){const yt=Mn.get(be);yt.outputColorSpace=Ze.outputColorSpace,yt.batching=Ze.batching,yt.instancing=Ze.instancing,yt.instancingColor=Ze.instancingColor,yt.skinning=Ze.skinning,yt.morphTargets=Ze.morphTargets,yt.morphNormals=Ze.morphNormals,yt.morphColors=Ze.morphColors,yt.morphTargetsCount=Ze.morphTargetsCount,yt.numClippingPlanes=Ze.numClippingPlanes,yt.numIntersection=Ze.numClipIntersection,yt.vertexAlphas=Ze.vertexAlphas,yt.vertexTangents=Ze.vertexTangents,yt.toneMapping=Ze.toneMapping}function ug(be,Ze,yt,mt,ct){Ze.isScene!==!0&&(Ze=Qn),Se.resetTextureUnits();const rn=Ze.fog,xn=mt.isMeshStandardMaterial?Ze.environment:null,Ln=se===null?W.outputColorSpace:se.isXRRenderTarget===!0?se.texture.colorSpace:_p,Vn=(mt.isMeshStandardMaterial?lt:fe).get(mt.envMap||xn),nr=mt.vertexColors===!0&&!!yt.attributes.color&&yt.attributes.color.itemSize===4,Kn=!!yt.attributes.tangent&&(!!mt.normalMap||mt.anisotropy>0),Nn=!!yt.morphAttributes.position,_r=!!yt.morphAttributes.normal,Os=!!yt.morphAttributes.color;let ci=jm;mt.toneMapped&&(se===null||se.isXRRenderTarget===!0)&&(ci=W.toneMapping);const Ro=yt.morphAttributes.position||yt.morphAttributes.normal||yt.morphAttributes.color,zr=Ro!==void 0?Ro.length:0,Wn=Mn.get(mt),Ic=B.state.lights;if(ht===!0&&(Et===!0||be!==J)){const Ls=be===J&&mt.id===pe;$n.setState(mt,be,Ls)}let Vr=!1;mt.version===Wn.__version?(Wn.needsLights&&Wn.lightsStateVersion!==Ic.state.version||Wn.outputColorSpace!==Ln||ct.isBatchedMesh&&Wn.batching===!1||!ct.isBatchedMesh&&Wn.batching===!0||ct.isInstancedMesh&&Wn.instancing===!1||!ct.isInstancedMesh&&Wn.instancing===!0||ct.isSkinnedMesh&&Wn.skinning===!1||!ct.isSkinnedMesh&&Wn.skinning===!0||ct.isInstancedMesh&&Wn.instancingColor===!0&&ct.instanceColor===null||ct.isInstancedMesh&&Wn.instancingColor===!1&&ct.instanceColor!==null||Wn.envMap!==Vn||mt.fog===!0&&Wn.fog!==rn||Wn.numClippingPlanes!==void 0&&(Wn.numClippingPlanes!==$n.numPlanes||Wn.numIntersection!==$n.numIntersection)||Wn.vertexAlphas!==nr||Wn.vertexTangents!==Kn||Wn.morphTargets!==Nn||Wn.morphNormals!==_r||Wn.morphColors!==Os||Wn.toneMapping!==ci||wn.isWebGL2===!0&&Wn.morphTargetsCount!==zr)&&(Vr=!0):(Vr=!0,Wn.__version=mt.version);let Do=Wn.currentProgram;Vr===!0&&(Do=ia(mt,Ze,ct));let Mu=!1,ao=!1,Ol=!1;const yi=Do.getUniforms(),La=Wn.uniforms;if(sn.useProgram(Do.program)&&(Mu=!0,ao=!0,Ol=!0),mt.id!==pe&&(pe=mt.id,ao=!0),Mu||J!==be){yi.setValue(Qe,"projectionMatrix",be.projectionMatrix),yi.setValue(Qe,"viewMatrix",be.matrixWorldInverse);const Ls=yi.map.cameraPosition;Ls!==void 0&&Ls.setValue(Qe,Jt.setFromMatrixPosition(be.matrixWorld)),wn.logarithmicDepthBuffer&&yi.setValue(Qe,"logDepthBufFC",2/(Math.log(be.far+1)/Math.LN2)),(mt.isMeshPhongMaterial||mt.isMeshToonMaterial||mt.isMeshLambertMaterial||mt.isMeshBasicMaterial||mt.isMeshStandardMaterial||mt.isShaderMaterial)&&yi.setValue(Qe,"isOrthographic",be.isOrthographicCamera===!0),J!==be&&(J=be,ao=!0,Ol=!0)}if(ct.isSkinnedMesh){yi.setOptional(Qe,ct,"bindMatrix"),yi.setOptional(Qe,ct,"bindMatrixInverse");const Ls=ct.skeleton;Ls&&(wn.floatVertexTextures?(Ls.boneTexture===null&&Ls.computeBoneTexture(),yi.setValue(Qe,"boneTexture",Ls.boneTexture,Se)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}ct.isBatchedMesh&&(yi.setOptional(Qe,ct,"batchingTexture"),yi.setValue(Qe,"batchingTexture",ct._matricesTexture,Se));const Rc=yt.morphAttributes;if((Rc.position!==void 0||Rc.normal!==void 0||Rc.color!==void 0&&wn.isWebGL2===!0)&&ir.update(ct,yt,Do),(ao||Wn.receiveShadow!==ct.receiveShadow)&&(Wn.receiveShadow=ct.receiveShadow,yi.setValue(Qe,"receiveShadow",ct.receiveShadow)),mt.isMeshGouraudMaterial&&mt.envMap!==null&&(La.envMap.value=Vn,La.flipEnvMap.value=Vn.isCubeTexture&&Vn.isRenderTargetTexture===!1?-1:1),ao&&(yi.setValue(Qe,"toneMappingExposure",W.toneMappingExposure),Wn.needsLights&&rl(La,Ol),rn&&mt.fog===!0&&Yt.refreshFogUniforms(La,rn),Yt.refreshMaterialUniforms(La,mt,st,Te,$t),QL.upload(Qe,Ac(Wn),La,Se)),mt.isShaderMaterial&&mt.uniformsNeedUpdate===!0&&(QL.upload(Qe,Ac(Wn),La,Se),mt.uniformsNeedUpdate=!1),mt.isSpriteMaterial&&yi.setValue(Qe,"center",ct.center),yi.setValue(Qe,"modelViewMatrix",ct.modelViewMatrix),yi.setValue(Qe,"normalMatrix",ct.normalMatrix),yi.setValue(Qe,"modelMatrix",ct.matrixWorld),mt.isShaderMaterial||mt.isRawShaderMaterial){const Ls=mt.uniformsGroups;for(let Dc=0,zd=Ls.length;Dc<zd;Dc++)if(wn.isWebGL2){const Na=Ls[Dc];Ae.update(Na,Do),Ae.bind(Na,Do)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Do}function rl(be,Ze){be.ambientLightColor.needsUpdate=Ze,be.lightProbe.needsUpdate=Ze,be.directionalLights.needsUpdate=Ze,be.directionalLightShadows.needsUpdate=Ze,be.pointLights.needsUpdate=Ze,be.pointLightShadows.needsUpdate=Ze,be.spotLights.needsUpdate=Ze,be.spotLightShadows.needsUpdate=Ze,be.rectAreaLights.needsUpdate=Ze,be.hemisphereLights.needsUpdate=Ze}function Tp(be){return be.isMeshLambertMaterial||be.isMeshToonMaterial||be.isMeshPhongMaterial||be.isMeshStandardMaterial||be.isShadowMaterial||be.isShaderMaterial&&be.lights===!0}this.getActiveCubeFace=function(){return ve},this.getActiveMipmapLevel=function(){return X},this.getRenderTarget=function(){return se},this.setRenderTargetTextures=function(be,Ze,yt){Mn.get(be.texture).__webglTexture=Ze,Mn.get(be.depthTexture).__webglTexture=yt;const mt=Mn.get(be);mt.__hasExternalTextures=!0,mt.__hasExternalTextures&&(mt.__autoAllocateDepthBuffer=yt===void 0,mt.__autoAllocateDepthBuffer||Tn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),mt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(be,Ze){const yt=Mn.get(be);yt.__webglFramebuffer=Ze,yt.__useDefaultFramebuffer=Ze===void 0},this.setRenderTarget=function(be,Ze=0,yt=0){se=be,ve=Ze,X=yt;let mt=!0,ct=null,rn=!1,xn=!1;if(be){const Vn=Mn.get(be);Vn.__useDefaultFramebuffer!==void 0?(sn.bindFramebuffer(Qe.FRAMEBUFFER,null),mt=!1):Vn.__webglFramebuffer===void 0?Se.setupRenderTarget(be):Vn.__hasExternalTextures&&Se.rebindTextures(be,Mn.get(be.texture).__webglTexture,Mn.get(be.depthTexture).__webglTexture);const nr=be.texture;(nr.isData3DTexture||nr.isDataArrayTexture||nr.isCompressedArrayTexture)&&(xn=!0);const Kn=Mn.get(be).__webglFramebuffer;be.isWebGLCubeRenderTarget?(Array.isArray(Kn[Ze])?ct=Kn[Ze][yt]:ct=Kn[Ze],rn=!0):wn.isWebGL2&&be.samples>0&&Se.useMultisampledRTT(be)===!1?ct=Mn.get(be).__webglMultisampledFramebuffer:Array.isArray(Kn)?ct=Kn[yt]:ct=Kn,ne.copy(be.viewport),Ee.copy(be.scissor),ot=be.scissorTest}else ne.copy(qe).multiplyScalar(st).floor(),Ee.copy(dt).multiplyScalar(st).floor(),ot=Pt;if(sn.bindFramebuffer(Qe.FRAMEBUFFER,ct)&&wn.drawBuffers&&mt&&sn.drawBuffers(be,ct),sn.viewport(ne),sn.scissor(Ee),sn.setScissorTest(ot),rn){const Vn=Mn.get(be.texture);Qe.framebufferTexture2D(Qe.FRAMEBUFFER,Qe.COLOR_ATTACHMENT0,Qe.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,Vn.__webglTexture,yt)}else if(xn){const Vn=Mn.get(be.texture),nr=Ze||0;Qe.framebufferTextureLayer(Qe.FRAMEBUFFER,Qe.COLOR_ATTACHMENT0,Vn.__webglTexture,yt||0,nr)}pe=-1},this.readRenderTargetPixels=function(be,Ze,yt,mt,ct,rn,xn){if(!(be&&be.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ln=Mn.get(be).__webglFramebuffer;if(be.isWebGLCubeRenderTarget&&xn!==void 0&&(Ln=Ln[xn]),Ln){sn.bindFramebuffer(Qe.FRAMEBUFFER,Ln);try{const Vn=be.texture,nr=Vn.format,Kn=Vn.type;if(nr!==mu&&en.convert(nr)!==Qe.getParameter(Qe.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Nn=Kn===RT&&(Tn.has("EXT_color_buffer_half_float")||wn.isWebGL2&&Tn.has("EXT_color_buffer_float"));if(Kn!==Sl&&en.convert(Kn)!==Qe.getParameter(Qe.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Kn===Pd&&(wn.isWebGL2||Tn.has("OES_texture_float")||Tn.has("WEBGL_color_buffer_float")))&&!Nn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ze>=0&&Ze<=be.width-mt&&yt>=0&&yt<=be.height-ct&&Qe.readPixels(Ze,yt,mt,ct,en.convert(nr),en.convert(Kn),rn)}finally{const Vn=se!==null?Mn.get(se).__webglFramebuffer:null;sn.bindFramebuffer(Qe.FRAMEBUFFER,Vn)}}},this.copyFramebufferToTexture=function(be,Ze,yt=0){const mt=Math.pow(2,-yt),ct=Math.floor(Ze.image.width*mt),rn=Math.floor(Ze.image.height*mt);Se.setTexture2D(Ze,0),Qe.copyTexSubImage2D(Qe.TEXTURE_2D,yt,0,0,be.x,be.y,ct,rn),sn.unbindTexture()},this.copyTextureToTexture=function(be,Ze,yt,mt=0){const ct=Ze.image.width,rn=Ze.image.height,xn=en.convert(yt.format),Ln=en.convert(yt.type);Se.setTexture2D(yt,0),Qe.pixelStorei(Qe.UNPACK_FLIP_Y_WEBGL,yt.flipY),Qe.pixelStorei(Qe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,yt.premultiplyAlpha),Qe.pixelStorei(Qe.UNPACK_ALIGNMENT,yt.unpackAlignment),Ze.isDataTexture?Qe.texSubImage2D(Qe.TEXTURE_2D,mt,be.x,be.y,ct,rn,xn,Ln,Ze.image.data):Ze.isCompressedTexture?Qe.compressedTexSubImage2D(Qe.TEXTURE_2D,mt,be.x,be.y,Ze.mipmaps[0].width,Ze.mipmaps[0].height,xn,Ze.mipmaps[0].data):Qe.texSubImage2D(Qe.TEXTURE_2D,mt,be.x,be.y,xn,Ln,Ze.image),mt===0&&yt.generateMipmaps&&Qe.generateMipmap(Qe.TEXTURE_2D),sn.unbindTexture()},this.copyTextureToTexture3D=function(be,Ze,yt,mt,ct=0){if(W.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const rn=be.max.x-be.min.x+1,xn=be.max.y-be.min.y+1,Ln=be.max.z-be.min.z+1,Vn=en.convert(mt.format),nr=en.convert(mt.type);let Kn;if(mt.isData3DTexture)Se.setTexture3D(mt,0),Kn=Qe.TEXTURE_3D;else if(mt.isDataArrayTexture||mt.isCompressedArrayTexture)Se.setTexture2DArray(mt,0),Kn=Qe.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Qe.pixelStorei(Qe.UNPACK_FLIP_Y_WEBGL,mt.flipY),Qe.pixelStorei(Qe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,mt.premultiplyAlpha),Qe.pixelStorei(Qe.UNPACK_ALIGNMENT,mt.unpackAlignment);const Nn=Qe.getParameter(Qe.UNPACK_ROW_LENGTH),_r=Qe.getParameter(Qe.UNPACK_IMAGE_HEIGHT),Os=Qe.getParameter(Qe.UNPACK_SKIP_PIXELS),ci=Qe.getParameter(Qe.UNPACK_SKIP_ROWS),Ro=Qe.getParameter(Qe.UNPACK_SKIP_IMAGES),zr=yt.isCompressedTexture?yt.mipmaps[ct]:yt.image;Qe.pixelStorei(Qe.UNPACK_ROW_LENGTH,zr.width),Qe.pixelStorei(Qe.UNPACK_IMAGE_HEIGHT,zr.height),Qe.pixelStorei(Qe.UNPACK_SKIP_PIXELS,be.min.x),Qe.pixelStorei(Qe.UNPACK_SKIP_ROWS,be.min.y),Qe.pixelStorei(Qe.UNPACK_SKIP_IMAGES,be.min.z),yt.isDataTexture||yt.isData3DTexture?Qe.texSubImage3D(Kn,ct,Ze.x,Ze.y,Ze.z,rn,xn,Ln,Vn,nr,zr.data):yt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Qe.compressedTexSubImage3D(Kn,ct,Ze.x,Ze.y,Ze.z,rn,xn,Ln,Vn,zr.data)):Qe.texSubImage3D(Kn,ct,Ze.x,Ze.y,Ze.z,rn,xn,Ln,Vn,nr,zr),Qe.pixelStorei(Qe.UNPACK_ROW_LENGTH,Nn),Qe.pixelStorei(Qe.UNPACK_IMAGE_HEIGHT,_r),Qe.pixelStorei(Qe.UNPACK_SKIP_PIXELS,Os),Qe.pixelStorei(Qe.UNPACK_SKIP_ROWS,ci),Qe.pixelStorei(Qe.UNPACK_SKIP_IMAGES,Ro),ct===0&&mt.generateMipmaps&&Qe.generateMipmap(Kn),sn.unbindTexture()},this.initTexture=function(be){be.isCubeTexture?Se.setTextureCube(be,0):be.isData3DTexture?Se.setTexture3D(be,0):be.isDataArrayTexture||be.isCompressedArrayTexture?Se.setTexture2DArray(be,0):Se.setTexture2D(be,0),sn.unbindTexture()},this.resetState=function(){ve=0,X=0,se=null,sn.reset(),Bn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return sp}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===k7?"display-p3":"srgb",n.unpackColorSpace=li.workingColorSpace===IF?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===is?dp:AF}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===dp?is:_p}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class $6e extends N7{}$6e.prototype.isWebGL1Renderer=!0;class OT extends Kr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}const gbe=new Fe,vbe=new Ar,ybe=new Ar,K6e=new Fe,bbe=new Fn,wL=new Fe,NG=new Q0,_be=new Fn,FG=new _1;class rEe extends _s{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=eye,this.bindMatrix=new Fn,this.bindMatrixInverse=new Fn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new b1),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,wL),this.boundingBox.expandByPoint(wL)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Q0),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,wL),this.boundingSphere.expandByPoint(wL)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),NG.copy(this.boundingSphere),NG.applyMatrix4(i),e.ray.intersectsSphere(NG)!==!1&&(_be.copy(i).invert(),FG.copy(e.ray).applyMatrix4(_be),!(this.boundingBox!==null&&FG.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,FG)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ar,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===eye?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===r5e?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;vbe.fromBufferAttribute(i.attributes.skinIndex,e),ybe.fromBufferAttribute(i.attributes.skinWeight,e),gbe.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const u=ybe.getComponent(o);if(u!==0){const h=vbe.getComponent(o);bbe.multiplyMatrices(r.bones[h].matrixWorld,r.boneInverses[h]),n.addScaledVector(K6e.copy(gbe).applyMatrix4(bbe),u)}}return n.applyMatrix4(this.bindMatrixInverse)}}class LW extends Kr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class X6e extends Yi{constructor(e=null,n=1,r=1,i,o,u,h,m,v=To,x=To,E,M){super(null,u,h,m,v,x,i,o,E,M),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const wbe=new Fn,q6e=new Fn;class F7{constructor(e=[],n=[]){this.uuid=ig(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Fn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new Fn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,u=e.length;o<u;o++){const h=e[o]?e[o].matrixWorld:q6e;wbe.multiplyMatrices(h,n[o]),wbe.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new F7(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new X6e(n,e,e,mu,Pd);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const o=e.bones[r];let u=n[o];u===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),u=new LW),this.bones.push(u),this.boneInverses.push(new Fn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,o=n.length;i<o;i++){const u=n[i];e.bones.push(u.uuid);const h=r[i];e.boneInverses.push(h.toArray())}return e}}class pM extends Il{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new _n(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const xbe=new Fe,Sbe=new Fe,Ebe=new Fn,BG=new _1,xL=new Q0;class iEe extends Kr{constructor(e=new ko,n=new pM){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,o=n.count;i<o;i++)xbe.fromBufferAttribute(n,i-1),Sbe.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=xbe.distanceTo(Sbe);e.setAttribute("lineDistance",new ki(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,u=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),xL.copy(r.boundingSphere),xL.applyMatrix4(i),xL.radius+=o,e.ray.intersectsSphere(xL)===!1)return;Ebe.copy(i).invert(),BG.copy(e.ray).applyMatrix4(Ebe);const h=o/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h,v=new Fe,x=new Fe,E=new Fe,M=new Fe,D=this.isLineSegments?2:1,H=r.index,B=r.attributes.position;if(H!==null){const z=Math.max(0,u.start),P=Math.min(H.count,u.start+u.count);for(let W=z,Z=P-1;W<Z;W+=D){const ve=H.getX(W),X=H.getX(W+1);if(v.fromBufferAttribute(B,ve),x.fromBufferAttribute(B,X),BG.distanceSqToSegment(v,x,M,E)>m)continue;M.applyMatrix4(this.matrixWorld);const pe=e.ray.origin.distanceTo(M);pe<e.near||pe>e.far||n.push({distance:pe,point:E.clone().applyMatrix4(this.matrixWorld),index:W,face:null,faceIndex:null,object:this})}}else{const z=Math.max(0,u.start),P=Math.min(B.count,u.start+u.count);for(let W=z,Z=P-1;W<Z;W+=D){if(v.fromBufferAttribute(B,W),x.fromBufferAttribute(B,W+1),BG.distanceSqToSegment(v,x,M,E)>m)continue;M.applyMatrix4(this.matrixWorld);const X=e.ray.origin.distanceTo(M);X<e.near||X>e.far||n.push({distance:X,point:E.clone().applyMatrix4(this.matrixWorld),index:W,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=i.length;o<u;o++){const h=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}}const Cbe=new Fe,Pbe=new Fe;class B7 extends iEe{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,o=n.count;i<o;i+=2)Cbe.fromBufferAttribute(n,i),Pbe.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+Cbe.distanceTo(Pbe);e.setAttribute("lineDistance",new ki(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class sEe extends Il{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new _n(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Tbe=new Fn,NW=new _1,SL=new Q0,EL=new Fe;class Y6e extends Kr{constructor(e=new ko,n=new sEe){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,u=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),SL.copy(r.boundingSphere),SL.applyMatrix4(i),SL.radius+=o,e.ray.intersectsSphere(SL)===!1)return;Tbe.copy(i).invert(),NW.copy(e.ray).applyMatrix4(Tbe);const h=o/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h,v=r.index,E=r.attributes.position;if(v!==null){const M=Math.max(0,u.start),D=Math.min(v.count,u.start+u.count);for(let H=M,F=D;H<F;H++){const B=v.getX(H);EL.fromBufferAttribute(E,B),Mbe(EL,B,m,i,e,n,this)}}else{const M=Math.max(0,u.start),D=Math.min(E.count,u.start+u.count);for(let H=M,F=D;H<F;H++)EL.fromBufferAttribute(E,H),Mbe(EL,H,m,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=i.length;o<u;o++){const h=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}}function Mbe(t,e,n,r,i,o,u){const h=NW.distanceSqToPoint(t);if(h<n){const m=new Fe;NW.closestPointToPoint(t,m),m.applyMatrix4(r);const v=i.ray.origin.distanceTo(m);if(v<i.near||v>i.far)return;o.push({distance:v,distanceToRay:Math.sqrt(h),point:m,index:e,face:null,object:u})}}class Z6e{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),o=0;n.push(0);for(let u=1;u<=e;u++)r=this.getPoint(u/e),o+=r.distanceTo(i),n.push(o),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const o=r.length;let u;n?u=n:u=e*r[o-1];let h=0,m=o-1,v;for(;h<=m;)if(i=Math.floor(h+(m-h)/2),v=r[i]-u,v<0)h=i+1;else if(v>0)m=i-1;else{m=i;break}if(i=m,r[i]===u)return i/(o-1);const x=r[i],M=r[i+1]-x,D=(u-x)/M;return(i+D)/(o-1)}getTangent(e,n){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const u=this.getPoint(i),h=this.getPoint(o),m=n||(u.isVector2?new an:new Fe);return m.copy(h).sub(u).normalize(),m}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new Fe,i=[],o=[],u=[],h=new Fe,m=new Fn;for(let D=0;D<=e;D++){const H=D/e;i[D]=this.getTangentAt(H,new Fe)}o[0]=new Fe,u[0]=new Fe;let v=Number.MAX_VALUE;const x=Math.abs(i[0].x),E=Math.abs(i[0].y),M=Math.abs(i[0].z);x<=v&&(v=x,r.set(1,0,0)),E<=v&&(v=E,r.set(0,1,0)),M<=v&&r.set(0,0,1),h.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],h),u[0].crossVectors(i[0],o[0]);for(let D=1;D<=e;D++){if(o[D]=o[D-1].clone(),u[D]=u[D-1].clone(),h.crossVectors(i[D-1],i[D]),h.length()>Number.EPSILON){h.normalize();const H=Math.acos(Vs(i[D-1].dot(i[D]),-1,1));o[D].applyMatrix4(m.makeRotationAxis(h,H))}u[D].crossVectors(i[D],o[D])}if(n===!0){let D=Math.acos(Vs(o[0].dot(o[e]),-1,1));D/=e,i[0].dot(h.crossVectors(o[0],o[e]))>0&&(D=-D);for(let H=1;H<=e;H++)o[H].applyMatrix4(m.makeRotationAxis(i[H],D*H)),u[H].crossVectors(i[H],o[H])}return{tangents:i,normals:o,binormals:u}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class U7 extends ko{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const o=[],u=[],h=[],m=[],v=new Fe,x=new an;u.push(0,0,0),h.push(0,0,1),m.push(.5,.5);for(let E=0,M=3;E<=n;E++,M+=3){const D=r+E/n*i;v.x=e*Math.cos(D),v.y=e*Math.sin(D),u.push(v.x,v.y,v.z),h.push(0,0,1),x.x=(u[M]/e+1)/2,x.y=(u[M+1]/e+1)/2,m.push(x.x,x.y)}for(let E=1;E<=n;E++)o.push(E,E+1,0);this.setIndex(o),this.setAttribute("position",new ki(u,3)),this.setAttribute("normal",new ki(h,3)),this.setAttribute("uv",new ki(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new U7(e.radius,e.segments,e.thetaStart,e.thetaLength)}}const Q6e={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=oEe(t,0,i,n,!0);const u=[];if(!o||o.next===o.prev)return u;let h,m,v,x,E,M,D;if(r&&(o=r8e(t,e,o,n)),t.length>80*n){h=v=t[0],m=x=t[1];for(let H=n;H<i;H+=n)E=t[H],M=t[H+1],E<h&&(h=E),M<m&&(m=M),E>v&&(v=E),M>x&&(x=M);D=Math.max(v-h,x-m),D=D!==0?32767/D:0}return LT(o,u,n,h,m,D,0),u}};function oEe(t,e,n,r,i){let o,u;if(i===f8e(t,e,n,r)>0)for(o=e;o<n;o+=r)u=kbe(o,t[o],t[o+1],u);else for(o=n-r;o>=e;o-=r)u=kbe(o,t[o],t[o+1],u);return u&&LF(u,u.next)&&(FT(u),u=u.next),u}function z0(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(LF(n,n.next)||Ki(n.prev,n,n.next)===0)){if(FT(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function LT(t,e,n,r,i,o,u){if(!t)return;!u&&o&&l8e(t,r,i,o);let h=t,m,v;for(;t.prev!==t.next;){if(m=t.prev,v=t.next,o?e8e(t,r,i,o):J6e(t)){e.push(m.i/n|0),e.push(t.i/n|0),e.push(v.i/n|0),FT(t),t=v.next,h=v.next;continue}if(t=v,t===h){u?u===1?(t=t8e(z0(t),e,n),LT(t,e,n,r,i,o,2)):u===2&&n8e(t,e,n,r,i,o):LT(z0(t),e,n,r,i,o,1);break}}}function J6e(t){const e=t.prev,n=t,r=t.next;if(Ki(e,n,r)>=0)return!1;const i=e.x,o=n.x,u=r.x,h=e.y,m=n.y,v=r.y,x=i<o?i<u?i:u:o<u?o:u,E=h<m?h<v?h:v:m<v?m:v,M=i>o?i>u?i:u:o>u?o:u,D=h>m?h>v?h:v:m>v?m:v;let H=r.next;for(;H!==e;){if(H.x>=x&&H.x<=M&&H.y>=E&&H.y<=D&&Nw(i,h,o,m,u,v,H.x,H.y)&&Ki(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function e8e(t,e,n,r){const i=t.prev,o=t,u=t.next;if(Ki(i,o,u)>=0)return!1;const h=i.x,m=o.x,v=u.x,x=i.y,E=o.y,M=u.y,D=h<m?h<v?h:v:m<v?m:v,H=x<E?x<M?x:M:E<M?E:M,F=h>m?h>v?h:v:m>v?m:v,B=x>E?x>M?x:M:E>M?E:M,z=FW(D,H,e,n,r),P=FW(F,B,e,n,r);let W=t.prevZ,Z=t.nextZ;for(;W&&W.z>=z&&Z&&Z.z<=P;){if(W.x>=D&&W.x<=F&&W.y>=H&&W.y<=B&&W!==i&&W!==u&&Nw(h,x,m,E,v,M,W.x,W.y)&&Ki(W.prev,W,W.next)>=0||(W=W.prevZ,Z.x>=D&&Z.x<=F&&Z.y>=H&&Z.y<=B&&Z!==i&&Z!==u&&Nw(h,x,m,E,v,M,Z.x,Z.y)&&Ki(Z.prev,Z,Z.next)>=0))return!1;Z=Z.nextZ}for(;W&&W.z>=z;){if(W.x>=D&&W.x<=F&&W.y>=H&&W.y<=B&&W!==i&&W!==u&&Nw(h,x,m,E,v,M,W.x,W.y)&&Ki(W.prev,W,W.next)>=0)return!1;W=W.prevZ}for(;Z&&Z.z<=P;){if(Z.x>=D&&Z.x<=F&&Z.y>=H&&Z.y<=B&&Z!==i&&Z!==u&&Nw(h,x,m,E,v,M,Z.x,Z.y)&&Ki(Z.prev,Z,Z.next)>=0)return!1;Z=Z.nextZ}return!0}function t8e(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!LF(i,o)&&aEe(i,r,r.next,o)&&NT(i,o)&&NT(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),FT(r),FT(r.next),r=t=o),r=r.next}while(r!==t);return z0(r)}function n8e(t,e,n,r,i,o){let u=t;do{let h=u.next.next;for(;h!==u.prev;){if(u.i!==h.i&&d8e(u,h)){let m=lEe(u,h);u=z0(u,u.next),m=z0(m,m.next),LT(u,e,n,r,i,o,0),LT(m,e,n,r,i,o,0);return}h=h.next}u=u.next}while(u!==t)}function r8e(t,e,n,r){const i=[];let o,u,h,m,v;for(o=0,u=e.length;o<u;o++)h=e[o]*r,m=o<u-1?e[o+1]*r:t.length,v=oEe(t,h,m,r,!1),v===v.next&&(v.steiner=!0),i.push(c8e(v));for(i.sort(i8e),o=0;o<i.length;o++)n=s8e(i[o],n);return n}function i8e(t,e){return t.x-e.x}function s8e(t,e){const n=o8e(t,e);if(!n)return e;const r=lEe(n,t);return z0(r,r.next),z0(n,n.next)}function o8e(t,e){let n=e,r=-1/0,i;const o=t.x,u=t.y;do{if(u<=n.y&&u>=n.next.y&&n.next.y!==n.y){const M=n.x+(u-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(M<=o&&M>r&&(r=M,i=n.x<n.next.x?n:n.next,M===o))return i}n=n.next}while(n!==e);if(!i)return null;const h=i,m=i.x,v=i.y;let x=1/0,E;n=i;do o>=n.x&&n.x>=m&&o!==n.x&&Nw(u<v?o:r,u,m,v,u<v?r:o,u,n.x,n.y)&&(E=Math.abs(u-n.y)/(o-n.x),NT(n,t)&&(E<x||E===x&&(n.x>i.x||n.x===i.x&&a8e(i,n)))&&(i=n,x=E)),n=n.next;while(n!==h);return i}function a8e(t,e){return Ki(t.prev,t,e.prev)<0&&Ki(e.next,t,t.next)<0}function l8e(t,e,n,r){let i=t;do i.z===0&&(i.z=FW(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,u8e(i)}function u8e(t){let e,n,r,i,o,u,h,m,v=1;do{for(n=t,t=null,o=null,u=0;n;){for(u++,r=n,h=0,e=0;e<v&&(h++,r=r.nextZ,!!r);e++);for(m=v;h>0||m>0&&r;)h!==0&&(m===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,h--):(i=r,r=r.nextZ,m--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,v*=2}while(u>1);return t}function FW(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function c8e(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Nw(t,e,n,r,i,o,u,h){return(i-u)*(e-h)>=(t-u)*(o-h)&&(t-u)*(r-h)>=(n-u)*(e-h)&&(n-u)*(o-h)>=(i-u)*(r-h)}function d8e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!h8e(t,e)&&(NT(t,e)&&NT(e,t)&&p8e(t,e)&&(Ki(t.prev,t,e.prev)||Ki(t,e.prev,e))||LF(t,e)&&Ki(t.prev,t,t.next)>0&&Ki(e.prev,e,e.next)>0)}function Ki(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function LF(t,e){return t.x===e.x&&t.y===e.y}function aEe(t,e,n,r){const i=PL(Ki(t,e,n)),o=PL(Ki(t,e,r)),u=PL(Ki(n,r,t)),h=PL(Ki(n,r,e));return!!(i!==o&&u!==h||i===0&&CL(t,n,e)||o===0&&CL(t,r,e)||u===0&&CL(n,t,r)||h===0&&CL(n,e,r))}function CL(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function PL(t){return t>0?1:t<0?-1:0}function h8e(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&aEe(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function NT(t,e){return Ki(t.prev,t,t.next)<0?Ki(t,e,t.next)>=0&&Ki(t,t.prev,e)>=0:Ki(t,e,t.prev)<0||Ki(t,t.next,e)<0}function p8e(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function lEe(t,e){const n=new BW(t.i,t.x,t.y),r=new BW(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function kbe(t,e,n,r){const i=new BW(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function FT(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function BW(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function f8e(t,e,n,r){let i=0;for(let o=e,u=n-r;o<n;o+=r)i+=(t[u]-t[o])*(t[o+1]+t[u+1]),u=o;return i}class z7{static area(e){const n=e.length;let r=0;for(let i=n-1,o=0;o<n;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return z7.area(e)<0}static triangulateShape(e,n){const r=[],i=[],o=[];Abe(e),Ibe(r,e);let u=e.length;n.forEach(Abe);for(let m=0;m<n.length;m++)i.push(u),u+=n[m].length,Ibe(r,n[m]);const h=Q6e.triangulate(r,i);for(let m=0;m<h.length;m+=3)o.push(h.slice(m,m+3));return o}}function Abe(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Ibe(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class A0 extends ko{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,u=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:u,thetaLength:h},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const m=Math.min(u+h,Math.PI);let v=0;const x=[],E=new Fe,M=new Fe,D=[],H=[],F=[],B=[];for(let z=0;z<=r;z++){const P=[],W=z/r;let Z=0;z===0&&u===0?Z=.5/n:z===r&&m===Math.PI&&(Z=-.5/n);for(let ve=0;ve<=n;ve++){const X=ve/n;E.x=-e*Math.cos(i+X*o)*Math.sin(u+W*h),E.y=e*Math.cos(u+W*h),E.z=e*Math.sin(i+X*o)*Math.sin(u+W*h),H.push(E.x,E.y,E.z),M.copy(E).normalize(),F.push(M.x,M.y,M.z),B.push(X+Z,1-W),P.push(v++)}x.push(P)}for(let z=0;z<r;z++)for(let P=0;P<n;P++){const W=x[z][P+1],Z=x[z][P],ve=x[z+1][P],X=x[z+1][P+1];(z!==0||u>0)&&D.push(W,Z,X),(z!==r-1||m<Math.PI)&&D.push(Z,ve,X)}this.setIndex(D),this.setAttribute("position",new ki(H,3)),this.setAttribute("normal",new ki(F,3)),this.setAttribute("uv",new ki(B,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new A0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class m8e extends Il{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new _n(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=y1,this.normalScale=new an(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class g8e extends m8e{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new an(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Vs(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new _n(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new _n(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new _n(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class oT extends Il{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new _n(16777215),this.specular=new _n(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=y1,this.normalScale=new an(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MF,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class v8e extends Il{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=y1,this.normalScale=new an(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class y8e extends Il{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new _n(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new _n(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=y1,this.normalScale=new an(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=MF,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uEe extends Il{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new _n(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=y1,this.normalScale=new an(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}function TL(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function b8e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _8e(t){function e(i,o){return t[i]-t[o]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function Rbe(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,u=0;u!==r;++o){const h=n[o]*e;for(let m=0;m!==e;++m)i[u++]=t[h+m]}return i}function cEe(t,e,n,r){let i=1,o=t[0];for(;o!==void 0&&o[r]===void 0;)o=t[i++];if(o===void 0)return;let u=o[r];if(u!==void 0)if(Array.isArray(u))do u=o[r],u!==void 0&&(e.push(o.time),n.push.apply(n,u)),o=t[i++];while(o!==void 0);else if(u.toArray!==void 0)do u=o[r],u!==void 0&&(e.push(o.time),u.toArray(n,n.length)),o=t[i++];while(o!==void 0);else do u=o[r],u!==void 0&&(e.push(o.time),n.push(u)),o=t[i++];while(o!==void 0)}class NF{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],o=n[r-1];e:{t:{let u;n:{r:if(!(e<i)){for(let h=r+2;;){if(i===void 0){if(e<o)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===h)break;if(o=i,i=n[++r],e<i)break t}u=n.length;break n}if(!(e>=o)){const h=n[1];e<h&&(r=2,o=h);for(let m=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===m)break;if(i=o,o=n[--r-1],e>=o)break t}u=r,r=0;break n}break e}for(;r<u;){const h=r+u>>>1;e<n[h]?u=h:r=h+1}if(i=n[r],o=n[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let u=0;u!==i;++u)n[u]=r[o+u];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class w8e extends NF{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Rw,endingEnd:Rw}}intervalChanged_(e,n,r){const i=this.parameterPositions;let o=e-2,u=e+1,h=i[o],m=i[u];if(h===void 0)switch(this.getSettings_().endingStart){case Dw:o=e,h=2*n-r;break;case FN:o=i.length-2,h=n+i[o]-i[o+1];break;default:o=e,h=r}if(m===void 0)switch(this.getSettings_().endingEnd){case Dw:u=e,m=2*r-n;break;case FN:u=1,m=r+i[1]-i[0];break;default:u=e-1,m=n}const v=(r-n)*.5,x=this.valueSize;this._weightPrev=v/(n-h),this._weightNext=v/(m-r),this._offsetPrev=o*x,this._offsetNext=u*x}interpolate_(e,n,r,i){const o=this.resultBuffer,u=this.sampleValues,h=this.valueSize,m=e*h,v=m-h,x=this._offsetPrev,E=this._offsetNext,M=this._weightPrev,D=this._weightNext,H=(r-n)/(i-n),F=H*H,B=F*H,z=-M*B+2*M*F-M*H,P=(1+M)*B+(-1.5-2*M)*F+(-.5+M)*H+1,W=(-1-D)*B+(1.5+D)*F+.5*H,Z=D*B-D*F;for(let ve=0;ve!==h;++ve)o[ve]=z*u[x+ve]+P*u[v+ve]+W*u[m+ve]+Z*u[E+ve];return o}}class dEe extends NF{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,u=this.sampleValues,h=this.valueSize,m=e*h,v=m-h,x=(r-n)/(i-n),E=1-x;for(let M=0;M!==h;++M)o[M]=u[v+M]*E+u[m+M]*x;return o}}class x8e extends NF{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Fd{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=TL(n,this.TimeBufferType),this.values=TL(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:TL(e.times,Array),values:TL(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new x8e(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dEe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new w8e(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case LN:n=this.InterpolantFactoryMethodDiscrete;break;case NN:n=this.InterpolantFactoryMethodLinear;break;case hG:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return LN;case this.InterpolantFactoryMethodLinear:return NN;case this.InterpolantFactoryMethodSmooth:return hG}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let o=0,u=i-1;for(;o!==i&&r[o]<e;)++o;for(;u!==-1&&r[u]>n;)--u;if(++u,o!==0||u!==i){o>=u&&(u=Math.max(u,1),o=u-1);const h=this.getValueSize();this.times=r.slice(o,u),this.values=this.values.slice(o*h,u*h)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let u=null;for(let h=0;h!==o;h++){const m=r[h];if(typeof m=="number"&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,m),e=!1;break}if(u!==null&&u>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,m,u),e=!1;break}u=m}if(i!==void 0&&b8e(i))for(let h=0,m=i.length;h!==m;++h){const v=i[h];if(isNaN(v)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,v),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===hG,o=e.length-1;let u=1;for(let h=1;h<o;++h){let m=!1;const v=e[h],x=e[h+1];if(v!==x&&(h!==1||v!==e[0]))if(i)m=!0;else{const E=h*r,M=E-r,D=E+r;for(let H=0;H!==r;++H){const F=n[E+H];if(F!==n[M+H]||F!==n[D+H]){m=!0;break}}}if(m){if(h!==u){e[u]=e[h];const E=h*r,M=u*r;for(let D=0;D!==r;++D)n[M+D]=n[E+D]}++u}}if(o>0){e[u]=e[o];for(let h=o*r,m=u*r,v=0;v!==r;++v)n[m+v]=n[h+v];++u}return u!==e.length?(this.times=e.slice(0,u),this.values=n.slice(0,u*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Fd.prototype.TimeBufferType=Float32Array;Fd.prototype.ValueBufferType=Float32Array;Fd.prototype.DefaultInterpolation=NN;class x1 extends Fd{}x1.prototype.ValueTypeName="bool";x1.prototype.ValueBufferType=Array;x1.prototype.DefaultInterpolation=LN;x1.prototype.InterpolantFactoryMethodLinear=void 0;x1.prototype.InterpolantFactoryMethodSmooth=void 0;class hEe extends Fd{}hEe.prototype.ValueTypeName="color";class BT extends Fd{}BT.prototype.ValueTypeName="number";class S8e extends NF{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,u=this.sampleValues,h=this.valueSize,m=(r-n)/(i-n);let v=e*h;for(let x=v+h;v!==x;v+=4)As.slerpFlat(o,0,u,v-h,u,v,m);return o}}class V0 extends Fd{InterpolantFactoryMethodLinear(e){return new S8e(this.times,this.values,this.getValueSize(),e)}}V0.prototype.ValueTypeName="quaternion";V0.prototype.DefaultInterpolation=NN;V0.prototype.InterpolantFactoryMethodSmooth=void 0;class S1 extends Fd{}S1.prototype.ValueTypeName="string";S1.prototype.ValueBufferType=Array;S1.prototype.DefaultInterpolation=LN;S1.prototype.InterpolantFactoryMethodLinear=void 0;S1.prototype.InterpolantFactoryMethodSmooth=void 0;class UT extends Fd{}UT.prototype.ValueTypeName="vector";class UW{constructor(e,n=-1,r,i=M7){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=ig(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let u=0,h=r.length;u!==h;++u)n.push(C8e(r[u]).scale(i));const o=new this(e.name,e.duration,n,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,u=r.length;o!==u;++o)n.push(Fd.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const o=n.length,u=[];for(let h=0;h<o;h++){let m=[],v=[];m.push((h+o-1)%o,h,(h+1)%o),v.push(0,1,0);const x=_8e(m);m=Rbe(m,1,x),v=Rbe(v,1,x),!i&&m[0]===0&&(m.push(o),v.push(v[0])),u.push(new BT(".morphTargetInfluences["+n[h].name+"]",m,v).scale(1/r))}return new this(e,-1,u)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let h=0,m=e.length;h<m;h++){const v=e[h],x=v.name.match(o);if(x&&x.length>1){const E=x[1];let M=i[E];M||(i[E]=M=[]),M.push(v)}}const u=[];for(const h in i)u.push(this.CreateFromMorphTargetSequence(h,i[h],n,r));return u}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(E,M,D,H,F){if(D.length!==0){const B=[],z=[];cEe(D,B,z,H),B.length!==0&&F.push(new E(M,B,z))}},i=[],o=e.name||"default",u=e.fps||30,h=e.blendMode;let m=e.length||-1;const v=e.hierarchy||[];for(let E=0;E<v.length;E++){const M=v[E].keys;if(!(!M||M.length===0))if(M[0].morphTargets){const D={};let H;for(H=0;H<M.length;H++)if(M[H].morphTargets)for(let F=0;F<M[H].morphTargets.length;F++)D[M[H].morphTargets[F]]=-1;for(const F in D){const B=[],z=[];for(let P=0;P!==M[H].morphTargets.length;++P){const W=M[H];B.push(W.time),z.push(W.morphTarget===F?1:0)}i.push(new BT(".morphTargetInfluence["+F+"]",B,z))}m=D.length*u}else{const D=".bones["+n[E].name+"]";r(UT,D+".position",M,"pos",i),r(V0,D+".quaternion",M,"rot",i),r(UT,D+".scale",M,"scl",i)}}return i.length===0?null:new this(o,m,i,h)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const o=this.tracks[r];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function E8e(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return BT;case"vector":case"vector2":case"vector3":case"vector4":return UT;case"color":return hEe;case"quaternion":return V0;case"bool":case"boolean":return x1;case"string":return S1}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function C8e(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=E8e(t.type);if(t.times===void 0){const n=[],r=[];cEe(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const HN={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class P8e{constructor(e,n,r){const i=this;let o=!1,u=0,h=0,m;const v=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(x){h++,o===!1&&i.onStart!==void 0&&i.onStart(x,u,h),o=!0},this.itemEnd=function(x){u++,i.onProgress!==void 0&&i.onProgress(x,u,h),u===h&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(x){i.onError!==void 0&&i.onError(x)},this.resolveURL=function(x){return m?m(x):x},this.setURLModifier=function(x){return m=x,this},this.addHandler=function(x,E){return v.push(x,E),this},this.removeHandler=function(x){const E=v.indexOf(x);return E!==-1&&v.splice(E,2),this},this.getHandler=function(x){for(let E=0,M=v.length;E<M;E+=2){const D=v[E],H=v[E+1];if(D.global&&(D.lastIndex=0),D.test(x))return H}return null}}}const T8e=new P8e;class Ym{constructor(e){this.manager=e!==void 0?e:T8e,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,o){r.load(e,i,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ym.DEFAULT_MATERIAL_NAME="__DEFAULT";const Kh={};class M8e extends Error{constructor(e,n){super(e),this.response=n}}class k8e extends Ym{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=HN.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(o),this.manager.itemEnd(e)},0),o;if(Kh[e]!==void 0){Kh[e].push({onLoad:n,onProgress:r,onError:i});return}Kh[e]=[],Kh[e].push({onLoad:n,onProgress:r,onError:i});const u=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,m=this.responseType;fetch(u).then(v=>{if(v.status===200||v.status===0){if(v.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||v.body===void 0||v.body.getReader===void 0)return v;const x=Kh[e],E=v.body.getReader(),M=v.headers.get("Content-Length")||v.headers.get("X-File-Size"),D=M?parseInt(M):0,H=D!==0;let F=0;const B=new ReadableStream({start(z){P();function P(){E.read().then(({done:W,value:Z})=>{if(W)z.close();else{F+=Z.byteLength;const ve=new ProgressEvent("progress",{lengthComputable:H,loaded:F,total:D});for(let X=0,se=x.length;X<se;X++){const pe=x[X];pe.onProgress&&pe.onProgress(ve)}z.enqueue(Z),P()}})}}});return new Response(B)}else throw new M8e(`fetch for "${v.url}" responded with ${v.status}: ${v.statusText}`,v)}).then(v=>{switch(m){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"document":return v.text().then(x=>new DOMParser().parseFromString(x,h));case"json":return v.json();default:if(h===void 0)return v.text();{const E=/charset="?([^;"\s]*)"?/i.exec(h),M=E&&E[1]?E[1].toLowerCase():void 0,D=new TextDecoder(M);return v.arrayBuffer().then(H=>D.decode(H))}}}).then(v=>{HN.add(e,v);const x=Kh[e];delete Kh[e];for(let E=0,M=x.length;E<M;E++){const D=x[E];D.onLoad&&D.onLoad(v)}}).catch(v=>{const x=Kh[e];if(x===void 0)throw this.manager.itemError(e),v;delete Kh[e];for(let E=0,M=x.length;E<M;E++){const D=x[E];D.onError&&D.onError(v)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class pEe extends Ym{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,u=HN.get(e);if(u!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(u),o.manager.itemEnd(e)},0),u;const h=DT("img");function m(){x(),HN.add(e,this),n&&n(this),o.manager.itemEnd(e)}function v(E){x(),i&&i(E),o.manager.itemError(e),o.manager.itemEnd(e)}function x(){h.removeEventListener("load",m,!1),h.removeEventListener("error",v,!1)}return h.addEventListener("load",m,!1),h.addEventListener("error",v,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),o.manager.itemStart(e),h.src=e,h}}class A8e extends Ym{constructor(e){super(e)}load(e,n,r,i){const o=new DF;o.colorSpace=is;const u=new pEe(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let h=0;function m(v){u.load(e[v],function(x){o.images[v]=x,h++,h===6&&(o.needsUpdate=!0,n&&n(o))},void 0,i)}for(let v=0;v<e.length;++v)m(v);return o}}class fEe extends Ym{constructor(e){super(e)}load(e,n,r,i){const o=new Yi,u=new pEe(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(e,function(h){o.image=h,o.needsUpdate=!0,n!==void 0&&n(o)},r,i),o}}class fM extends Kr{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new _n(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class I8e extends fM{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Kr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new _n(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const UG=new Fn,Dbe=new Fe,Obe=new Fe;class V7{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new an(512,512),this.map=null,this.mapPass=null,this.matrix=new Fn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new D7,this._frameExtents=new an(1,1),this._viewportCount=1,this._viewports=[new Ar(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;Dbe.setFromMatrixPosition(e.matrixWorld),n.position.copy(Dbe),Obe.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(Obe),n.updateMatrixWorld(),UG.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(UG),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(UG)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class R8e extends V7{constructor(){super(new js(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=l1*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||n.far;(r!==n.fov||i!==n.aspect||o!==n.far)&&(n.fov=r,n.aspect=i,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class j7 extends fM{constructor(e,n,r=0,i=Math.PI/3,o=0,u=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Kr.DEFAULT_UP),this.updateMatrix(),this.target=new Kr,this.distance=r,this.angle=i,this.penumbra=o,this.decay=u,this.map=null,this.shadow=new R8e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Lbe=new Fn,MP=new Fe,zG=new Fe;class D8e extends V7{constructor(){super(new js(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new an(4,2),this._viewportCount=6,this._viewports=[new Ar(2,1,1,1),new Ar(0,1,1,1),new Ar(3,1,1,1),new Ar(1,1,1,1),new Ar(3,0,1,1),new Ar(1,0,1,1)],this._cubeDirections=[new Fe(1,0,0),new Fe(-1,0,0),new Fe(0,0,1),new Fe(0,0,-1),new Fe(0,1,0),new Fe(0,-1,0)],this._cubeUps=[new Fe(0,1,0),new Fe(0,1,0),new Fe(0,1,0),new Fe(0,1,0),new Fe(0,0,1),new Fe(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),MP.setFromMatrixPosition(e.matrixWorld),r.position.copy(MP),zG.copy(r.position),zG.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(zG),r.updateMatrixWorld(),i.makeTranslation(-MP.x,-MP.y,-MP.z),Lbe.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Lbe)}}class Nbe extends fM{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new D8e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class O8e extends V7{constructor(){super(new hM(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class H7 extends fM{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Kr.DEFAULT_UP),this.updateMatrix(),this.target=new Kr,this.shadow=new O8e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class L8e extends fM{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class N8e{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class F8e{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Fbe(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=Fbe();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function Fbe(){return(typeof performance>"u"?Date:performance).now()}class B8e extends Kr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const n0=new Fe,Bbe=new As,U8e=new Fe,r0=new Fe;class z8e extends B8e{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(n0,Bbe,U8e),r0.set(0,0,1).applyQuaternion(Bbe);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(n0.x,r),n.positionY.linearRampToValueAtTime(n0.y,r),n.positionZ.linearRampToValueAtTime(n0.z,r),n.orientationX.linearRampToValueAtTime(r0.x,r),n.orientationY.linearRampToValueAtTime(r0.y,r),n.orientationZ.linearRampToValueAtTime(r0.z,r)}else n.setPosition(n0.x,n0.y,n0.z),n.setOrientation(r0.x,r0.y,r0.z)}}class V8e{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,o,u;switch(n){case"quaternion":i=this._slerp,o=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,o=e*i+i;let u=this.cumulativeWeight;if(u===0){for(let h=0;h!==i;++h)r[o+h]=r[h];u=n}else{u+=n;const h=n/u;this._mixBufferRegion(r,o,0,h,i)}this.cumulativeWeight=u}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,o=this.cumulativeWeight,u=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const m=n*this._origIndex;this._mixBufferRegion(r,i,m,1-o,n)}u>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let m=n,v=n+n;m!==v;++m)if(r[m]!==r[m+n]){h.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let o=r,u=i;o!==u;++o)n[o]=n[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,o){if(i>=.5)for(let u=0;u!==o;++u)e[n+u]=e[r+u]}_slerp(e,n,r,i){As.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,o){const u=this._workIndex*o;As.multiplyQuaternionsFlat(e,u,e,n,e,r),As.slerpFlat(e,n,e,n,e,u,i)}_lerp(e,n,r,i,o){const u=1-i;for(let h=0;h!==o;++h){const m=n+h;e[m]=e[m]*u+e[r+h]*i}}_lerpAdditive(e,n,r,i,o){for(let u=0;u!==o;++u){const h=n+u;e[h]=e[h]+e[r+u]*i}}}const G7="\\[\\]\\.:\\/",j8e=new RegExp("["+G7+"]","g"),W7="[^"+G7+"]",H8e="[^"+G7.replace("\\.","")+"]",G8e=/((?:WC+[\/:])*)/.source.replace("WC",W7),W8e=/(WCOD+)?/.source.replace("WCOD",H8e),$8e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",W7),K8e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",W7),X8e=new RegExp("^"+G8e+W8e+$8e+K8e+"$"),q8e=["material","materials","bones","map"];class Y8e{constructor(e,n,r){const i=r||Nr.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Nr{constructor(e,n,r){this.path=n,this.parsedPath=r||Nr.parseTrackName(n),this.node=Nr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Nr.Composite(e,n,r):new Nr(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(j8e,"")}static parseTrackName(e){const n=X8e.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);q8e.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(o){for(let u=0;u<o.length;u++){const h=o[u];if(h.name===n||h.uuid===n)return h;const m=r(h.children);if(m)return m}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let o=n.propertyIndex;if(e||(e=Nr.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let v=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let x=0;x<e.length;x++)if(e[x].name===v){v=x;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(v!==void 0){if(e[v]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[v]}}const u=e[i];if(u===void 0){const v=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+v+"."+i+" but it wasn't found.",e);return}let h=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?h=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let m=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}m=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=o}else u.fromArray!==void 0&&u.toArray!==void 0?(m=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(m=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nr.Composite=Y8e;Nr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Nr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Nr.prototype.GetterByBindingType=[Nr.prototype._getValue_direct,Nr.prototype._getValue_array,Nr.prototype._getValue_arrayElement,Nr.prototype._getValue_toArray];Nr.prototype.SetterByBindingTypeAndVersioning=[[Nr.prototype._setValue_direct,Nr.prototype._setValue_direct_setNeedsUpdate,Nr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nr.prototype._setValue_array,Nr.prototype._setValue_array_setNeedsUpdate,Nr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nr.prototype._setValue_arrayElement,Nr.prototype._setValue_arrayElement_setNeedsUpdate,Nr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nr.prototype._setValue_fromArray,Nr.prototype._setValue_fromArray_setNeedsUpdate,Nr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Z8e{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const o=n.tracks,u=o.length,h=new Array(u),m={endingStart:Rw,endingEnd:Rw};for(let v=0;v!==u;++v){const x=o[v].createInterpolant(null);h[v]=x,x.settings=m}this._interpolantSettings=m,this._interpolants=h,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=p5e,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,o=e._clip.duration,u=o/i,h=i/o;e.warp(1,u,n),this.warp(h,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,o=i.time,u=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=i._lendControlInterpolant(),this._timeScaleInterpolant=h);const m=h.parameterPositions,v=h.sampleValues;return m[0]=o,m[1]=o+r,v[0]=e/u,v[1]=n/u,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const m=(e-o)*r;m<0||r===0?n=0:(this._startTime=null,n=r*m)}n*=this._updateTimeScale(e);const u=this._updateTime(n),h=this._updateWeight(e);if(h>0){const m=this._interpolants,v=this._propertyBindings;switch(this.blendMode){case m5e:for(let x=0,E=m.length;x!==E;++x)m[x].evaluate(u),v[x].accumulateAdditive(h);break;case M7:default:for(let x=0,E=m.length;x!==E;++x)m[x].evaluate(u),v[x].accumulate(i,h)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const u=r===f5e;if(e===0)return o===-1?i:u&&(o&1)===1?n-i:i;if(r===h5e){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),i>=n||i<0){const h=Math.floor(i/n);i-=n*h,o+=Math.abs(h);const m=this.repetitions-o;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(m===1){const v=e<0;this._setEndings(v,!v,u)}else this._setEndings(!1,!1,u);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=i;if(u&&(o&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Dw,i.endingEnd=Dw):(e?i.endingStart=this.zeroSlopeAtStart?Dw:Rw:i.endingStart=FN,n?i.endingEnd=this.zeroSlopeAtEnd?Dw:Rw:i.endingEnd=FN)}_scheduleFading(e,n,r){const i=this._mixer,o=i.time;let u=this._weightInterpolant;u===null&&(u=i._lendControlInterpolant(),this._weightInterpolant=u);const h=u.parameterPositions,m=u.sampleValues;return h[0]=o,m[0]=n,h[1]=o+e,m[1]=r,this}}const Q8e=new Float32Array(1);class J8e extends Al{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,u=e._propertyBindings,h=e._interpolants,m=r.uuid,v=this._bindingsByRootAndName;let x=v[m];x===void 0&&(x={},v[m]=x);for(let E=0;E!==o;++E){const M=i[E],D=M.name;let H=x[D];if(H!==void 0)++H.referenceCount,u[E]=H;else{if(H=u[E],H!==void 0){H._cacheIndex===null&&(++H.referenceCount,this._addInactiveBinding(H,m,D));continue}const F=n&&n._propertyBindings[E].binding.parsedPath;H=new V8e(Nr.create(r,D,F),M.ValueTypeName,M.getValueSize()),++H.referenceCount,this._addInactiveBinding(H,m,D),u[E]=H}h[E].resultBuffer=H.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,o=this._actionsByClip;let u=o[n];if(u===void 0)u={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[n]=u;else{const h=u.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=i.length,i.push(e),u.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const o=e._clip.uuid,u=this._actionsByClip,h=u[o],m=h.knownActions,v=m[m.length-1],x=e._byClipCacheIndex;v._byClipCacheIndex=x,m[x]=v,m.pop(),e._byClipCacheIndex=null;const E=h.actionByRoot,M=(e._localRoot||this._root).uuid;delete E[M],m.length===0&&delete u[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,o=this._bindings;let u=i[n];u===void 0&&(u={},i[n]=u),u[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,u=this._bindingsByRootAndName,h=u[i],m=n[n.length-1],v=e._cacheIndex;m._cacheIndex=v,n[v]=m,n.pop(),delete h[o],Object.keys(h).length===0&&delete u[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new dEe(new Float32Array(2),new Float32Array(2),1,Q8e),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=n[i];e.__cacheIndex=i,n[i]=e,o.__cacheIndex=r,n[r]=o}clipAction(e,n,r){const i=n||this._root,o=i.uuid;let u=typeof e=="string"?UW.findByName(i,e):e;const h=u!==null?u.uuid:e,m=this._actionsByClip[h];let v=null;if(r===void 0&&(u!==null?r=u.blendMode:r=M7),m!==void 0){const E=m.actionByRoot[o];if(E!==void 0&&E.blendMode===r)return E;v=m.knownActions[0],u===null&&(u=v._clip)}if(u===null)return null;const x=new Z8e(this,u,n,r);return this._bindAction(x,v),this._addInactiveAction(x,h,o),x}existingAction(e,n){const r=n||this._root,i=r.uuid,o=typeof e=="string"?UW.findByName(r,e):e,u=o?o.uuid:e,h=this._actionsByClip[u];return h!==void 0&&h.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,o=Math.sign(e),u=this._accuIndex^=1;for(let v=0;v!==r;++v)n[v]._update(i,e,o,u);const h=this._bindings,m=this._nActiveBindings;for(let v=0;v!==m;++v)h[v].apply(u);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const u=o.knownActions;for(let h=0,m=u.length;h!==m;++h){const v=u[h];this._deactivateAction(v);const x=v._cacheIndex,E=n[n.length-1];v._cacheIndex=null,v._byClipCacheIndex=null,E._cacheIndex=x,n[x]=E,n.pop(),this._removeInactiveBindingsForAction(v)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const u in r){const h=r[u].actionByRoot,m=h[n];m!==void 0&&(this._deactivateAction(m),this._removeInactiveAction(m))}const i=this._bindingsByRootAndName,o=i[n];if(o!==void 0)for(const u in o){const h=o[u];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class Mi{constructor(e){this.value=e}clone(){return new Mi(this.value.clone===void 0?this.value:this.value.clone())}}class eHe{constructor(e,n,r=0,i=1/0){this.ray=new _1(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new I7,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return zW(e,this,r,n),r.sort(Ube),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)zW(e[i],this,r,n);return r.sort(Ube),r}}function Ube(t,e){return t.distance-e.distance}function zW(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let o=0,u=i.length;o<u;o++)zW(i[o],e,n,!0)}}class zbe{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Vs(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const ML=new Fe,ns=new RF;class tHe extends B7{constructor(e){const n=new ko,r=new pM({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],u={};h("n1","n2"),h("n2","n4"),h("n4","n3"),h("n3","n1"),h("f1","f2"),h("f2","f4"),h("f4","f3"),h("f3","f1"),h("n1","f1"),h("n2","f2"),h("n3","f3"),h("n4","f4"),h("p","n1"),h("p","n2"),h("p","n3"),h("p","n4"),h("u1","u2"),h("u2","u3"),h("u3","u1"),h("c","t"),h("p","c"),h("cn1","cn2"),h("cn3","cn4"),h("cf1","cf2"),h("cf3","cf4");function h(H,F){m(H),m(F)}function m(H){i.push(0,0,0),o.push(0,0,0),u[H]===void 0&&(u[H]=[]),u[H].push(i.length/3-1)}n.setAttribute("position",new ki(i,3)),n.setAttribute("color",new ki(o,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const v=new _n(16755200),x=new _n(16711680),E=new _n(43775),M=new _n(16777215),D=new _n(3355443);this.setColors(v,x,E,M,D)}setColors(e,n,r,i,o){const h=this.geometry.getAttribute("color");h.setXYZ(0,e.r,e.g,e.b),h.setXYZ(1,e.r,e.g,e.b),h.setXYZ(2,e.r,e.g,e.b),h.setXYZ(3,e.r,e.g,e.b),h.setXYZ(4,e.r,e.g,e.b),h.setXYZ(5,e.r,e.g,e.b),h.setXYZ(6,e.r,e.g,e.b),h.setXYZ(7,e.r,e.g,e.b),h.setXYZ(8,e.r,e.g,e.b),h.setXYZ(9,e.r,e.g,e.b),h.setXYZ(10,e.r,e.g,e.b),h.setXYZ(11,e.r,e.g,e.b),h.setXYZ(12,e.r,e.g,e.b),h.setXYZ(13,e.r,e.g,e.b),h.setXYZ(14,e.r,e.g,e.b),h.setXYZ(15,e.r,e.g,e.b),h.setXYZ(16,e.r,e.g,e.b),h.setXYZ(17,e.r,e.g,e.b),h.setXYZ(18,e.r,e.g,e.b),h.setXYZ(19,e.r,e.g,e.b),h.setXYZ(20,e.r,e.g,e.b),h.setXYZ(21,e.r,e.g,e.b),h.setXYZ(22,e.r,e.g,e.b),h.setXYZ(23,e.r,e.g,e.b),h.setXYZ(24,n.r,n.g,n.b),h.setXYZ(25,n.r,n.g,n.b),h.setXYZ(26,n.r,n.g,n.b),h.setXYZ(27,n.r,n.g,n.b),h.setXYZ(28,n.r,n.g,n.b),h.setXYZ(29,n.r,n.g,n.b),h.setXYZ(30,n.r,n.g,n.b),h.setXYZ(31,n.r,n.g,n.b),h.setXYZ(32,r.r,r.g,r.b),h.setXYZ(33,r.r,r.g,r.b),h.setXYZ(34,r.r,r.g,r.b),h.setXYZ(35,r.r,r.g,r.b),h.setXYZ(36,r.r,r.g,r.b),h.setXYZ(37,r.r,r.g,r.b),h.setXYZ(38,i.r,i.g,i.b),h.setXYZ(39,i.r,i.g,i.b),h.setXYZ(40,o.r,o.g,o.b),h.setXYZ(41,o.r,o.g,o.b),h.setXYZ(42,o.r,o.g,o.b),h.setXYZ(43,o.r,o.g,o.b),h.setXYZ(44,o.r,o.g,o.b),h.setXYZ(45,o.r,o.g,o.b),h.setXYZ(46,o.r,o.g,o.b),h.setXYZ(47,o.r,o.g,o.b),h.setXYZ(48,o.r,o.g,o.b),h.setXYZ(49,o.r,o.g,o.b),h.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;ns.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),vs("c",n,e,ns,0,0,-1),vs("t",n,e,ns,0,0,1),vs("n1",n,e,ns,-r,-i,-1),vs("n2",n,e,ns,r,-i,-1),vs("n3",n,e,ns,-r,i,-1),vs("n4",n,e,ns,r,i,-1),vs("f1",n,e,ns,-r,-i,1),vs("f2",n,e,ns,r,-i,1),vs("f3",n,e,ns,-r,i,1),vs("f4",n,e,ns,r,i,1),vs("u1",n,e,ns,r*.7,i*1.1,-1),vs("u2",n,e,ns,-r*.7,i*1.1,-1),vs("u3",n,e,ns,0,i*2,-1),vs("cf1",n,e,ns,-r,0,1),vs("cf2",n,e,ns,r,0,1),vs("cf3",n,e,ns,0,-i,1),vs("cf4",n,e,ns,0,i,1),vs("cn1",n,e,ns,-r,0,-1),vs("cn2",n,e,ns,r,0,-1),vs("cn3",n,e,ns,0,-i,-1),vs("cn4",n,e,ns,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function vs(t,e,n,r,i,o,u){ML.set(i,o,u).unproject(r);const h=e[t];if(h!==void 0){const m=n.getAttribute("position");for(let v=0,x=h.length;v<x;v++)m.setXYZ(h[v],ML.x,ML.y,ML.z)}}class mEe extends B7{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new ko;i.setAttribute("position",new ki(n,3)),i.setAttribute("color",new ki(r,3));const o=new pM({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,n,r){const i=new _n,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(n),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:lM}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=lM);class nHe{constructor(e,n,r=!0){yr(this,"components",new Map);yr(this,"listen");yr(this,"_debugEnabled");yr(this,"_broadcastChannel");yr(this,"_webSocket");yr(this,"_mode","app");yr(this,"_connected",!1);yr(this,"_useBC",!1);yr(this,"messageHandler",e=>{this.listen!==void 0&&(this._useBC?this.listen(e.data):this.listen(JSON.parse(e.data)))});yr(this,"openHandler",()=>{this._connected=!0});yr(this,"closeHandler",()=>{this._connected=!1});this._debugEnabled=n,n&&(this._useBC=r,r?(this._broadcastChannel=new BroadcastChannel(e),this._broadcastChannel.addEventListener("message",this.messageHandler)):(this._webSocket=new WebSocket(e),this._webSocket.addEventListener("open",this.openHandler),this._webSocket.addEventListener("close",this.closeHandler),this._webSocket.addEventListener("message",this.messageHandler)))}init(){return new Promise(e=>{this.components.forEach(n=>{n.handleEditorApp()}),e()})}addComponent(e,n){this.components.set(e,n)}dispose(){this._broadcastChannel!==void 0&&this._broadcastChannel.removeEventListener("message",this.messageHandler),this._webSocket!==void 0&&(this._webSocket.removeEventListener("open",this.openHandler),this._webSocket.removeEventListener("close",this.closeHandler),this._webSocket.removeEventListener("message",this.messageHandler)),this.components.forEach(e=>{e.dispose()}),this.components.clear()}send(e){var n,r;this._mode!==e.target&&(this._useBC?(n=this._broadcastChannel)==null||n.postMessage(e):this._connected&&((r=this._webSocket)==null||r.send(JSON.stringify(e))))}get connected(){return this._connected}get debugEnabled(){return this._debugEnabled}get mode(){return this._mode}get isApp(){return this._mode==="app"}get editor(){return this._mode==="editor"}set editor(e){e&&(this._mode="editor")}}const Sr=new Al,Er={CUSTOM:"ToolEvents::custom",SELECT_DROPDOWN:"ToolEvents::selectDropdown",DRAG_UPDATE:"ToolEvents::dragUpdate",SET_SCENE:"ToolEvents::setScene",GET_OBJECT:"ToolEvents::getObject",SET_OBJECT:"ToolEvents::setObject",UPDATE_OBJECT:"ToolEvents::updateObject",CREATE_TEXTURE:"ToolEvents::createTexture",REQUEST_METHOD:"ToolEvents::requestMethod",ADD_CAMERA:"ToolEvents::addCamera",REMOVE_CAMERA:"ToolEvents::removeCamera"};class FF{constructor(e){yr(this,"app");this.app=e}dispose(){}handleApp(e){}handleEditor(e){}handleEditorApp(){}}class rHe extends FF{selectDropdown(e,n){this.app.send({event:"selectComponent",target:"app",data:{dropdown:e,value:n}})}updateDropdown(e,n){this.app.send({event:"draggableListUpdate",target:"app",data:{dropdown:e,value:n}})}handleApp(e){switch(e.event){case"selectComponent":Sr.dispatchEvent({type:Er.SELECT_DROPDOWN,value:e.data});break;case"draggableListUpdate":Sr.dispatchEvent({type:Er.DRAG_UPDATE,value:e.data});break}}}var GN={exports:{}};GN.exports;(function(t,e){var n=Object.create,r=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,v=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,M=(y,T,U)=>T in y?r(y,T,{enumerable:!0,configurable:!0,writable:!0,value:U}):y[T]=U,D=(y,T)=>{for(var U in T||(T={}))x.call(T,U)&&M(y,U,T[U]);if(m)for(var U of m(T))E.call(T,U)&&M(y,U,T[U]);return y},H=(y,T)=>i(y,u(T)),F=(y,T)=>function(){return T||(0,y[h(y)[0]])((T={exports:{}}).exports,T),T.exports},B=(y,T)=>{for(var U in T)r(y,U,{get:T[U],enumerable:!0})},z=(y,T,U,q)=>{if(T&&typeof T=="object"||typeof T=="function")for(let oe of h(T))!x.call(y,oe)&&oe!==U&&r(y,oe,{get:()=>T[oe],enumerable:!(q=o(T,oe))||q.enumerable});return y},P=(y,T,U)=>(U=y!=null?n(v(y)):{},z(T||!y||!y.__esModule?r(U,"default",{value:y,enumerable:!0}):U,y)),W=y=>z(r({},"__esModule",{value:!0}),y),Z=(y,T,U)=>(M(y,typeof T!="symbol"?T+"":T,U),U),ve=F({"../node_modules/timing-function/lib/UnitBezier.js"(y,T){T.exports=function(){function U(q,oe,me,De){this.set(q,oe,me,De)}return U.prototype.set=function(q,oe,me,De){this._cx=3*q,this._bx=3*(me-q)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*oe,this._by=3*(De-oe)-this._cy,this._ay=1-this._cy-this._by},U.epsilon=1e-6,U.prototype._sampleCurveX=function(q){return((this._ax*q+this._bx)*q+this._cx)*q},U.prototype._sampleCurveY=function(q){return((this._ay*q+this._by)*q+this._cy)*q},U.prototype._sampleCurveDerivativeX=function(q){return(3*this._ax*q+2*this._bx)*q+this._cx},U.prototype._solveCurveX=function(q,oe){var me,De,Ke,Je,_t,le;for(Ke=void 0,Je=void 0,_t=void 0,le=void 0,me=void 0,De=void 0,_t=q,De=0;De<8;){if(le=this._sampleCurveX(_t)-q,Math.abs(le)<oe)return _t;if(me=this._sampleCurveDerivativeX(_t),Math.abs(me)<oe)break;_t=_t-le/me,De++}if(Ke=0,Je=1,_t=q,_t<Ke)return Ke;if(_t>Je)return Je;for(;Ke<Je;){if(le=this._sampleCurveX(_t),Math.abs(le-q)<oe)return _t;q>le?Ke=_t:Je=_t,_t=(Je-Ke)*.5+Ke}return _t},U.prototype.solve=function(q,oe){return this._sampleCurveY(this._solveCurveX(q,oe))},U.prototype.solveSimple=function(q){return this._sampleCurveY(this._solveCurveX(q,1e-6))},U}()}}),X=F({"../node_modules/levenshtein-edit-distance/index.js"(y,T){var U,q;U=[],q=[];function oe(me,De,Ke){var Je,_t,le,Ve,Xt,An,mn,or;if(me===De)return 0;if(Je=me.length,_t=De.length,Je===0)return _t;if(_t===0)return Je;for(Ke&&(me=me.toLowerCase(),De=De.toLowerCase()),mn=0;mn<Je;)q[mn]=me.charCodeAt(mn),U[mn]=++mn;for(or=0;or<_t;)for(le=De.charCodeAt(or),Ve=Xt=or++,mn=-1;++mn<Je;)An=le===q[mn]?Xt:Xt+1,Xt=U[mn],U[mn]=Ve=Xt>Ve?An>Ve?Ve+1:An:An>Xt?Xt+1:An;return Ve}T.exports=oe}}),se=F({"../node_modules/propose/propose.js"(y,T){var U=X();function q(){var oe,me,De,Ke,Je,_t=0,le=arguments[0],Ve=arguments[1],Xt=Ve.length,An=arguments[2];An&&(Ke=An.threshold,Je=An.ignoreCase),Ke===void 0&&(Ke=0);for(var mn=0;mn<Xt;++mn)Je?me=U(le,Ve[mn],!0):me=U(le,Ve[mn]),me>le.length?oe=1-me/Ve[mn].length:oe=1-me/le.length,oe>_t&&(_t=oe,De=Ve[mn]);return _t>=Ke?De:null}T.exports=q}}),pe=F({"../node_modules/fast-deep-equal/index.js"(y,T){T.exports=function U(q,oe){if(q===oe)return!0;if(q&&oe&&typeof q=="object"&&typeof oe=="object"){if(q.constructor!==oe.constructor)return!1;var me,De,Ke;if(Array.isArray(q)){if(me=q.length,me!=oe.length)return!1;for(De=me;De--!==0;)if(!U(q[De],oe[De]))return!1;return!0}if(q.constructor===RegExp)return q.source===oe.source&&q.flags===oe.flags;if(q.valueOf!==Object.prototype.valueOf)return q.valueOf()===oe.valueOf();if(q.toString!==Object.prototype.toString)return q.toString()===oe.toString();if(Ke=Object.keys(q),me=Ke.length,me!==Object.keys(oe).length)return!1;for(De=me;De--!==0;)if(!Object.prototype.hasOwnProperty.call(oe,Ke[De]))return!1;for(De=me;De--!==0;){var Je=Ke[De];if(!U(q[Je],oe[Je]))return!1}return!0}return q!==q&&oe!==oe}}}),J={};B(J,{createRafDriver:()=>sb,getProject:()=>JS,notify:()=>Jp,onChange:()=>xb,types:()=>DS,val:()=>eE}),t.exports=W(J);var ne={};B(ne,{createRafDriver:()=>sb,getProject:()=>JS,notify:()=>Jp,onChange:()=>xb,types:()=>DS,val:()=>eE});var Ee=Nt,ot=class{constructor(){Z(this,"atom",new Ee.Atom({projects:{}}))}add(y,T){this.atom.setByPointer(U=>U.projects[y],T)}get(y){return this.atom.get().projects[y]}has(y){return!!this.get(y)}},wt=new ot,ue=wt,Ye=new WeakMap;function Te(y){return Ye.get(y)}function st(y,T){Ye.set(y,T)}var Be=[],Xe=Array.isArray,qe=Xe,dt=typeof Wi=="object"&&Wi&&Wi.Object===Object&&Wi,Pt=dt,cn=typeof self=="object"&&self&&self.Object===Object&&self,ht=Pt||cn||Function("return this")(),Et=ht,$t=Et.Symbol,Zt=$t,gn=Object.prototype,Jt=gn.hasOwnProperty,Qn=gn.toString,vn=Zt?Zt.toStringTag:void 0;function Qe(y){var T=Jt.call(y,vn),U=y[vn];try{y[vn]=void 0;var q=!0}catch{}var oe=Qn.call(y);return q&&(T?y[vn]=U:delete y[vn]),oe}var Zr=Qe,Tn=Object.prototype,wn=Tn.toString;function sn(y){return wn.call(y)}var Ur=sn,Mn="[object Null]",Se="[object Undefined]",fe=Zt?Zt.toStringTag:void 0;function lt(y){return y==null?y===void 0?Se:Mn:fe&&fe in Object(y)?Zr(y):Ur(y)}var Dt=lt;function Ot(y){return y!=null&&typeof y=="object"}var Mt=Ot,hn="[object Symbol]";function Yt(y){return typeof y=="symbol"||Mt(y)&&Dt(y)==hn}var nn=Yt,Rn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$n=/^\w*$/;function Lt(y,T){if(qe(y))return!1;var U=typeof y;return U=="number"||U=="symbol"||U=="boolean"||y==null||nn(y)?!0:$n.test(y)||!Rn.test(y)||T!=null&&y in Object(T)}var mr=Lt;function ir(y){var T=typeof y;return y!=null&&(T=="object"||T=="function")}var En=ir,Pn="[object AsyncFunction]",en="[object Function]",Bn="[object GeneratorFunction]",Ae="[object Proxy]";function jt(y){if(!En(y))return!1;var T=Dt(y);return T==en||T==Bn||T==Pn||T==Ae}var Kt=jt,ln=Et["__core-js_shared__"],Me=ln,zt=function(){var y=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}();function It(y){return!!zt&&zt in y}var un=It,Dn=Function.prototype,lr=Dn.toString;function sr(y){if(y!=null){try{return lr.call(y)}catch{}try{return y+""}catch{}}return""}var dr=sr,Pr=/[\\^$.*+?()[\]{}|]/g,qn=/^\[object .+?Constructor\]$/,ri=Function.prototype,Ji=Object.prototype,kc=ri.toString,Bd=Ji.hasOwnProperty,Tu=RegExp("^"+kc.call(Bd).replace(Pr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Pp(y){if(!En(y)||un(y))return!1;var T=Kt(y)?Tu:qn;return T.test(dr(y))}var ia=Pp;function Ac(y,T){return y==null?void 0:y[T]}var Ud=Ac;function ug(y,T){var U=Ud(y,T);return ia(U)?U:void 0}var rl=ug,Tp=rl(Object,"create"),be=Tp;function Ze(){this.__data__=be?be(null):{},this.size=0}var yt=Ze;function mt(y){var T=this.has(y)&&delete this.__data__[y];return this.size-=T?1:0,T}var ct=mt,rn="__lodash_hash_undefined__",xn=Object.prototype,Ln=xn.hasOwnProperty;function Vn(y){var T=this.__data__;if(be){var U=T[y];return U===rn?void 0:U}return Ln.call(T,y)?T[y]:void 0}var nr=Vn,Kn=Object.prototype,Nn=Kn.hasOwnProperty;function _r(y){var T=this.__data__;return be?T[y]!==void 0:Nn.call(T,y)}var Os=_r,ci="__lodash_hash_undefined__";function Ro(y,T){var U=this.__data__;return this.size+=this.has(y)?0:1,U[y]=be&&T===void 0?ci:T,this}var zr=Ro;function Wn(y){var T=-1,U=y==null?0:y.length;for(this.clear();++T<U;){var q=y[T];this.set(q[0],q[1])}}Wn.prototype.clear=yt,Wn.prototype.delete=ct,Wn.prototype.get=nr,Wn.prototype.has=Os,Wn.prototype.set=zr;var Ic=Wn;function Vr(){this.__data__=[],this.size=0}var Do=Vr;function Mu(y,T){return y===T||y!==y&&T!==T}var ao=Mu;function Ol(y,T){for(var U=y.length;U--;)if(ao(y[U][0],T))return U;return-1}var yi=Ol,La=Array.prototype,Rc=La.splice;function Ls(y){var T=this.__data__,U=yi(T,y);if(U<0)return!1;var q=T.length-1;return U==q?T.pop():Rc.call(T,U,1),--this.size,!0}var Dc=Ls;function zd(y){var T=this.__data__,U=yi(T,y);return U<0?void 0:T[U][1]}var Na=zd;function cg(y){return yi(this.__data__,y)>-1}var Mp=cg;function dg(y,T){var U=this.__data__,q=yi(U,y);return q<0?(++this.size,U.push([y,T])):U[q][1]=T,this}var R1=dg;function Ll(y){var T=-1,U=y==null?0:y.length;for(this.clear();++T<U;){var q=y[T];this.set(q[0],q[1])}}Ll.prototype.clear=Do,Ll.prototype.delete=Dc,Ll.prototype.get=Na,Ll.prototype.has=Mp,Ll.prototype.set=R1;var Vd=Ll,D1=rl(Et,"Map"),jd=D1;function ay(){this.size=0,this.__data__={hash:new Ic,map:new(jd||Vd),string:new Ic}}var ly=ay;function Nl(y){var T=typeof y;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?y!=="__proto__":y===null}var uy=Nl;function O1(y,T){var U=y.__data__;return uy(T)?U[typeof T=="string"?"string":"hash"]:U.map}var Hd=O1;function hg(y){var T=Hd(this,y).delete(y);return this.size-=T?1:0,T}var pg=hg;function fg(y){return Hd(this,y).get(y)}var cy=fg;function dy(y){return Hd(this,y).has(y)}var hy=dy;function py(y,T){var U=Hd(this,y),q=U.size;return U.set(y,T),this.size+=U.size==q?0:1,this}var L1=py;function Oc(y){var T=-1,U=y==null?0:y.length;for(this.clear();++T<U;){var q=y[T];this.set(q[0],q[1])}}Oc.prototype.clear=ly,Oc.prototype.delete=pg,Oc.prototype.get=cy,Oc.prototype.has=hy,Oc.prototype.set=L1;var Gd=Oc,N1="Expected a function";function mg(y,T){if(typeof y!="function"||T!=null&&typeof T!="function")throw new TypeError(N1);var U=function(){var q=arguments,oe=T?T.apply(this,q):q[0],me=U.cache;if(me.has(oe))return me.get(oe);var De=y.apply(this,q);return U.cache=me.set(oe,De)||me,De};return U.cache=new(mg.Cache||Gd),U}mg.Cache=Gd;var Fl=mg,ku=500;function fy(y){var T=Fl(y,function(q){return U.size===ku&&U.clear(),q}),U=T.cache;return T}var kp=fy,F1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,B1=/\\(\\)?/g,my=kp(function(y){var T=[];return y.charCodeAt(0)===46&&T.push(""),y.replace(F1,function(U,q,oe,me){T.push(oe?me.replace(B1,"$1"):q||U)}),T}),U1=my;function z1(y,T){for(var U=-1,q=y==null?0:y.length,oe=Array(q);++U<q;)oe[U]=T(y[U],U,y);return oe}var gy=z1,vy=1/0,yy=Zt?Zt.prototype:void 0,gg=yy?yy.toString:void 0;function by(y){if(typeof y=="string")return y;if(qe(y))return gy(y,by)+"";if(nn(y))return gg?gg.call(y):"";var T=y+"";return T=="0"&&1/y==-vy?"-0":T}var _y=by;function wy(y){return y==null?"":_y(y)}var vg=wy;function Ap(y,T){return qe(y)?y:mr(y,T)?[y]:U1(vg(y))}var Lc=Ap,xy=1/0;function V1(y){if(typeof y=="string"||nn(y))return y;var T=y+"";return T=="0"&&1/y==-xy?"-0":T}var Fa=V1;function Wd(y,T){T=Lc(T,y);for(var U=0,q=T.length;y!=null&&U<q;)y=y[Fa(T[U++])];return U&&U==q?y:void 0}var $d=Wd;function Au(y,T,U){var q=y==null?void 0:$d(y,T);return q===void 0?U:q}var Bl=Au;function yg(y,T){return T.length===0?y:Bl(y,T)}var Iu=class{constructor(){Z(this,"_values",{})}get(y,T){if(this.has(y))return this._values[y];{const U=T();return this._values[y]=U,U}}has(y){return this._values.hasOwnProperty(y)}},ls=Nt,Kd=function(){try{var y=rl(Object,"defineProperty");return y({},"",{}),y}catch{}}(),Ip=Kd;function j1(y,T,U){T=="__proto__"&&Ip?Ip(y,T,{configurable:!0,enumerable:!0,value:U,writable:!0}):y[T]=U}var Ru=j1,Ul=Object.prototype,bg=Ul.hasOwnProperty;function H1(y,T,U){var q=y[T];(!(bg.call(y,T)&&ao(q,U))||U===void 0&&!(T in y))&&Ru(y,T,U)}var Rp=H1,G1=9007199254740991,Sy=/^(?:0|[1-9]\d*)$/;function Ey(y,T){var U=typeof y;return T=T??G1,!!T&&(U=="number"||U!="symbol"&&Sy.test(y))&&y>-1&&y%1==0&&y<T}var _g=Ey;function W1(y,T,U,q){if(!En(y))return y;T=Lc(T,y);for(var oe=-1,me=T.length,De=me-1,Ke=y;Ke!=null&&++oe<me;){var Je=Fa(T[oe]),_t=U;if(Je==="__proto__"||Je==="constructor"||Je==="prototype")return y;if(oe!=De){var le=Ke[Je];_t=q?q(le,Je,Ke):void 0,_t===void 0&&(_t=En(le)?le:_g(T[oe+1])?[]:{})}Rp(Ke,Je,_t),Ke=Ke[Je]}return y}var Dp=W1;function wg(y,T,U){return y==null?y:Dp(y,T,U)}var Op=wg,us=new WeakMap;function $1(y){return xg(y)}function xg(y){if(us.has(y))return us.get(y);const T=y.type==="compound"?Eg(y):y.type==="enum"?Sg(y):y.default;return us.set(y,T),T}function Sg(y){const T={$case:y.defaultCase};for(const[U,q]of Object.entries(y.cases))T[U]=xg(q);return T}function Eg(y){const T={};for(const[U,q]of Object.entries(y.props))T[U]=xg(q);return T}var cs=Nt,Lp=P(ve());function K1(y,T,U){return(0,cs.prism)(()=>{const q=(0,cs.val)(T);return cs.prism.memo("driver",()=>q?q.type==="BasicKeyframedTrack"?Np(y,q,U):(y.logger.error("Track type not yet supported."),(0,cs.prism)(()=>{})):(0,cs.prism)(()=>{}),[q]).getValue()})}function Np(y,T,U){return(0,cs.prism)(()=>{let q=cs.prism.ref("state",{started:!1}),oe=q.current;const me=U.getValue();return(!oe.started||me<oe.validFrom||oe.validTo<=me)&&(q.current=oe=X1(y,U,T)),oe.der.getValue()})}var Fp=(0,cs.prism)(()=>{});function X1(y,T,U){const q=T.getValue();if(U.keyframes.length===0)return{started:!0,validFrom:-1/0,validTo:1/0,der:Fp};let oe=0;for(;;){const me=U.keyframes[oe];if(!me)return bi.error;const De=oe===U.keyframes.length-1;if(q<me.position)return oe===0?bi.beforeFirstKeyframe(me):bi.error;if(me.position===q)return De?bi.lastKeyframe(me):bi.between(me,U.keyframes[oe+1],T);if(oe===U.keyframes.length-1)return bi.lastKeyframe(me);{const Ke=oe+1;if(U.keyframes[Ke].position<=q){oe=Ke;continue}else return bi.between(me,U.keyframes[oe+1],T)}}}var bi={beforeFirstKeyframe(y){return{started:!0,validFrom:-1/0,validTo:y.position,der:(0,cs.prism)(()=>({left:y.value,progression:0}))}},lastKeyframe(y){return{started:!0,validFrom:y.position,validTo:1/0,der:(0,cs.prism)(()=>({left:y.value,progression:0}))}},between(y,T,U){if(!y.connectedRight)return{started:!0,validFrom:y.position,validTo:T.position,der:(0,cs.prism)(()=>({left:y.value,progression:0}))};const q=me=>(me-y.position)/(T.position-y.position);if(!y.type||y.type==="bezier"){const me=new Lp.default(y.handles[2],y.handles[3],T.handles[0],T.handles[1]),De=(0,cs.prism)(()=>{const Ke=q(U.getValue()),Je=me.solveSimple(Ke);return{left:y.value,right:T.value,progression:Je}});return{started:!0,validFrom:y.position,validTo:T.position,der:De}}const oe=(0,cs.prism)(()=>{const me=q(U.getValue()),De=Math.floor(me);return{left:y.value,right:T.value,progression:De}});return{started:!0,validFrom:y.position,validTo:T.position,der:oe}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:Fp}};function zl(y,T,U){const oe=U.get(y);if(oe&&oe.override===T)return oe.merged;const me=D({},y);for(const De of Object.keys(T)){const Ke=T[De],Je=y[De];me[De]=typeof Ke=="object"&&typeof Je=="object"?zl(Je,Ke,U):Ke===void 0?Je:Ke}return U.set(y,{override:T,merged:me}),me}function Xd(y,T){let U=y;for(const q of T)U=U[q];return U}var Nc=Nt,Cg=(y,T)=>{const U=Nc.prism.memo(y,()=>new Nc.Atom(T),[]);return U.set(T),U},jr=Nt,Pg=Nt,q1=/\s/;function Bp(y){for(var T=y.length;T--&&q1.test(y.charAt(T)););return T}var Tg=Bp,Cy=/^\s+/;function Y1(y){return y&&y.slice(0,Tg(y)+1).replace(Cy,"")}var Fc=Y1,Up=0/0,Z1=/^[-+]0x[0-9a-f]+$/i,Py=/^0b[01]+$/i,qd=/^0o[0-7]+$/i,Mg=parseInt;function Q1(y){if(typeof y=="number")return y;if(nn(y))return Up;if(En(y)){var T=typeof y.valueOf=="function"?y.valueOf():y;y=En(T)?T+"":T}if(typeof y!="string")return y===0?y:+y;y=Fc(y);var U=Py.test(y);return U||qd.test(y)?Mg(y.slice(2),U?2:8):Z1.test(y)?Up:+y}var te=Q1,_e=1/0,ze=17976931348623157e292;function bt(y){if(!y)return y===0?y:0;if(y=te(y),y===_e||y===-_e){var T=y<0?-1:1;return T*ze}return y===y?y:0}var jn=bt;function Mr(y){var T=jn(y),U=T%1;return T===T?U?T-U:T:0}var Ss=Mr;function sa(y){return y}var Ty=sa,Bc=rl(Et,"WeakMap"),Uc=Bc,FM=Object.create,cB=function(){function y(){}return function(T){if(!En(T))return{};if(FM)return FM(T);y.prototype=T;var U=new y;return y.prototype=void 0,U}}(),BM=cB;function J1(y,T){var U=-1,q=y.length;for(T||(T=Array(q));++U<q;)T[U]=y[U];return T}var dB=J1;function ex(y,T){for(var U=-1,q=y==null?0:y.length;++U<q&&T(y[U],U,y)!==!1;);return y}var UM=ex;function zM(y,T,U,q){var oe=!U;U||(U={});for(var me=-1,De=T.length;++me<De;){var Ke=T[me],Je=q?q(U[Ke],y[Ke],Ke,U,y):void 0;Je===void 0&&(Je=y[Ke]),oe?Ru(U,Ke,Je):Rp(U,Ke,Je)}return U}var kg=zM,My=9007199254740991;function tx(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=My}var nx=tx;function VM(y){return y!=null&&nx(y.length)&&!Kt(y)}var jM=VM,rx=Object.prototype;function ix(y){var T=y&&y.constructor,U=typeof T=="function"&&T.prototype||rx;return y===U}var ky=ix;function sx(y,T){for(var U=-1,q=Array(y);++U<y;)q[U]=T(U);return q}var HM=sx,GM="[object Arguments]";function Ay(y){return Mt(y)&&Dt(y)==GM}var ox=Ay,WM=Object.prototype,$M=WM.hasOwnProperty,KM=WM.propertyIsEnumerable,XM=ox(function(){return arguments}())?ox:function(y){return Mt(y)&&$M.call(y,"callee")&&!KM.call(y,"callee")},ax=XM;function qM(){return!1}var YM=qM,lx=e&&!e.nodeType&&e,ux=lx&&!0&&t&&!t.nodeType&&t,ZM=ux&&ux.exports===lx,cx=ZM?Et.Buffer:void 0,QM=cx?cx.isBuffer:void 0,JM=QM||YM,Ag=JM,ek="[object Arguments]",tk="[object Array]",nk="[object Boolean]",rk="[object Date]",ik="[object Error]",sk="[object Function]",ok="[object Map]",ak="[object Number]",lk="[object Object]",uk="[object RegExp]",ck="[object Set]",ii="[object String]",dk="[object WeakMap]",hB="[object ArrayBuffer]",pB="[object DataView]",Iy="[object Float32Array]",dx="[object Float64Array]",hx="[object Int8Array]",zp="[object Int16Array]",hk="[object Int32Array]",Ry="[object Uint8Array]",pk="[object Uint8ClampedArray]",px="[object Uint16Array]",fB="[object Uint32Array]",Qr={};Qr[Iy]=Qr[dx]=Qr[hx]=Qr[zp]=Qr[hk]=Qr[Ry]=Qr[pk]=Qr[px]=Qr[fB]=!0,Qr[ek]=Qr[tk]=Qr[hB]=Qr[nk]=Qr[pB]=Qr[rk]=Qr[ik]=Qr[sk]=Qr[ok]=Qr[ak]=Qr[lk]=Qr[uk]=Qr[ck]=Qr[ii]=Qr[dk]=!1;function fk(y){return Mt(y)&&nx(y.length)&&!!Qr[Dt(y)]}var fx=fk;function mk(y){return function(T){return y(T)}}var mx=mk,gx=e&&!e.nodeType&&e,Vp=gx&&!0&&t&&!t.nodeType&&t,gk=Vp&&Vp.exports===gx,vx=gk&&Pt.process,mB=function(){try{var y=Vp&&Vp.require&&Vp.require("util").types;return y||vx&&vx.binding&&vx.binding("util")}catch{}}(),zc=mB,yx=zc&&zc.isTypedArray,vk=yx?mx(yx):fx,bx=vk,gB=Object.prototype,vB=gB.hasOwnProperty;function yk(y,T){var U=qe(y),q=!U&&ax(y),oe=!U&&!q&&Ag(y),me=!U&&!q&&!oe&&bx(y),De=U||q||oe||me,Ke=De?HM(y.length,String):[],Je=Ke.length;for(var _t in y)(T||vB.call(y,_t))&&!(De&&(_t=="length"||oe&&(_t=="offset"||_t=="parent")||me&&(_t=="buffer"||_t=="byteLength"||_t=="byteOffset")||_g(_t,Je)))&&Ke.push(_t);return Ke}var _x=yk;function bk(y,T){return function(U){return y(T(U))}}var _k=bk,yB=_k(Object.keys,Object),Dy=yB,wx=Object.prototype,bB=wx.hasOwnProperty;function wk(y){if(!ky(y))return Dy(y);var T=[];for(var U in Object(y))bB.call(y,U)&&U!="constructor"&&T.push(U);return T}var xk=wk;function Oy(y){return jM(y)?_x(y):xk(y)}var Yd=Oy;function Sk(y){var T=[];if(y!=null)for(var U in Object(y))T.push(U);return T}var jp=Sk,Ly=Object.prototype,_B=Ly.hasOwnProperty;function Ek(y){if(!En(y))return jp(y);var T=ky(y),U=[];for(var q in y)q=="constructor"&&(T||!_B.call(y,q))||U.push(q);return U}var wB=Ek;function xB(y){return jM(y)?_x(y,!0):wB(y)}var Ny=xB;function SB(y,T){for(var U=-1,q=T.length,oe=y.length;++U<q;)y[oe+U]=T[U];return y}var Ck=SB,Pk=_k(Object.getPrototypeOf,Object),Fy=Pk,Tk="[object Object]",Mk=Function.prototype,EB=Object.prototype,kk=Mk.toString,Ak=EB.hasOwnProperty,Ik=kk.call(Object);function Rk(y){if(!Mt(y)||Dt(y)!=Tk)return!1;var T=Fy(y);if(T===null)return!0;var U=Ak.call(T,"constructor")&&T.constructor;return typeof U=="function"&&U instanceof U&&kk.call(U)==Ik}var CB=Rk;function PB(y,T,U){var q=-1,oe=y.length;T<0&&(T=-T>oe?0:oe+T),U=U>oe?oe:U,U<0&&(U+=oe),oe=T>U?0:U-T>>>0,T>>>=0;for(var me=Array(oe);++q<oe;)me[q]=y[q+T];return me}var xx=PB;function Dk(y,T,U){var q=y.length;return U=U===void 0?q:U,!T&&U>=q?y:xx(y,T,U)}var TB=Dk,Hp="\\ud800-\\udfff",Sx="\\u0300-\\u036f",MB="\\ufe20-\\ufe2f",kB="\\u20d0-\\u20ff",Ok=Sx+MB+kB,AB="\\ufe0e\\ufe0f",IB="\\u200d",Ig=RegExp("["+IB+Hp+Ok+AB+"]");function By(y){return Ig.test(y)}var Ex=By;function Lk(y){return y.split("")}var Nk=Lk,Cx="\\ud800-\\udfff",RB="\\u0300-\\u036f",DB="\\ufe20-\\ufe2f",Fk="\\u20d0-\\u20ff",OB=RB+DB+Fk,LB="\\ufe0e\\ufe0f",Bk="["+Cx+"]",Px="["+OB+"]",Tx="\\ud83c[\\udffb-\\udfff]",Uk="(?:"+Px+"|"+Tx+")",zk="[^"+Cx+"]",Zd="(?:\\ud83c[\\udde6-\\uddff]){2}",Gp="[\\ud800-\\udbff][\\udc00-\\udfff]",Uy="\\u200d",Mx=Uk+"?",Qd="["+LB+"]?",kx="(?:"+Uy+"(?:"+[zk,Zd,Gp].join("|")+")"+Qd+Mx+")*",NB=Qd+Mx+kx,Vk="(?:"+[zk+Px+"?",Px,Zd,Gp,Bk].join("|")+")",FB=RegExp(Tx+"(?="+Tx+")|"+Vk+NB,"g");function BB(y){return y.match(FB)||[]}var jk=BB;function UB(y){return Ex(y)?jk(y):Nk(y)}var zB=UB;function Rg(y,T,U){return y===y&&(U!==void 0&&(y=y<=U?y:U),T!==void 0&&(y=y>=T?y:T)),y}var zy=Rg;function VB(y,T,U){return U===void 0&&(U=T,T=void 0),U!==void 0&&(U=te(U),U=U===U?U:0),T!==void 0&&(T=te(T),T=T===T?T:0),zy(te(y),T,U)}var Ax=VB;function jB(){this.__data__=new Vd,this.size=0}var HB=jB;function Hk(y){var T=this.__data__,U=T.delete(y);return this.size=T.size,U}var GB=Hk;function WB(y){return this.__data__.get(y)}var Gk=WB;function $B(y){return this.__data__.has(y)}var KB=$B,Wk=200;function XB(y,T){var U=this.__data__;if(U instanceof Vd){var q=U.__data__;if(!jd||q.length<Wk-1)return q.push([y,T]),this.size=++U.size,this;U=this.__data__=new Gd(q)}return U.set(y,T),this.size=U.size,this}var Wp=XB;function Vl(y){var T=this.__data__=new Vd(y);this.size=T.size}Vl.prototype.clear=HB,Vl.prototype.delete=GB,Vl.prototype.get=Gk,Vl.prototype.has=KB,Vl.prototype.set=Wp;var Jd=Vl;function Ix(y,T){return y&&kg(T,Yd(T),y)}var $k=Ix;function Rx(y,T){return y&&kg(T,Ny(T),y)}var Kk=Rx,Xk=e&&!e.nodeType&&e,Dx=Xk&&!0&&t&&!t.nodeType&&t,qk=Dx&&Dx.exports===Xk,Yk=qk?Et.Buffer:void 0,Ox=Yk?Yk.allocUnsafe:void 0;function Zk(y,T){if(T)return y.slice();var U=y.length,q=Ox?Ox(U):new y.constructor(U);return y.copy(q),q}var Qk=Zk;function Jk(y,T){for(var U=-1,q=y==null?0:y.length,oe=0,me=[];++U<q;){var De=y[U];T(De,U,y)&&(me[oe++]=De)}return me}var qB=Jk;function YB(){return[]}var Dg=YB,eA=Object.prototype,ZB=eA.propertyIsEnumerable,Og=Object.getOwnPropertySymbols,Lx=Og?function(y){return y==null?[]:(y=Object(y),qB(Og(y),function(T){return ZB.call(y,T)}))}:Dg,Nx=Lx;function tA(y,T){return kg(y,Nx(y),T)}var $p=tA,Lg=Object.getOwnPropertySymbols,QB=Lg?function(y){for(var T=[];y;)Ck(T,Nx(y)),y=Fy(y);return T}:Dg,Ng=QB;function Fx(y,T){return kg(y,Ng(y),T)}var JB=Fx;function eh(y,T,U){var q=T(y);return qe(y)?q:Ck(q,U(y))}var Kp=eh;function eU(y){return Kp(y,Yd,Nx)}var Fg=eU;function nA(y){return Kp(y,Ny,Ng)}var tU=nA,Bx=rl(Et,"DataView"),Vy=Bx,nU=rl(Et,"Promise"),jy=nU,rA=rl(Et,"Set"),Ux=rA,zx="[object Map]",iA="[object Object]",sA="[object Promise]",oA="[object Set]",Vx="[object WeakMap]",jx="[object DataView]",aA=dr(Vy),Hx=dr(jd),lA=dr(jy),uA=dr(Ux),Hy=dr(Uc),Vc=Dt;(Vy&&Vc(new Vy(new ArrayBuffer(1)))!=jx||jd&&Vc(new jd)!=zx||jy&&Vc(jy.resolve())!=sA||Ux&&Vc(new Ux)!=oA||Uc&&Vc(new Uc)!=Vx)&&(Vc=function(y){var T=Dt(y),U=T==iA?y.constructor:void 0,q=U?dr(U):"";if(q)switch(q){case aA:return jx;case Hx:return zx;case lA:return sA;case uA:return oA;case Hy:return Vx}return T});var Bg=Vc,cA=Object.prototype,dA=cA.hasOwnProperty;function hA(y){var T=y.length,U=new y.constructor(T);return T&&typeof y[0]=="string"&&dA.call(y,"index")&&(U.index=y.index,U.input=y.input),U}var rU=hA,iU=Et.Uint8Array,Ug=iU;function sU(y){var T=new y.constructor(y.byteLength);return new Ug(T).set(new Ug(y)),T}var Gx=sU;function _i(y,T){var U=T?Gx(y.buffer):y.buffer;return new y.constructor(U,y.byteOffset,y.byteLength)}var Gy=_i,oU=/\w*$/;function pA(y){var T=new y.constructor(y.source,oU.exec(y));return T.lastIndex=y.lastIndex,T}var aU=pA,fA=Zt?Zt.prototype:void 0,Wx=fA?fA.valueOf:void 0;function lU(y){return Wx?Object(Wx.call(y)):{}}var uU=lU;function mA(y,T){var U=T?Gx(y.buffer):y.buffer;return new y.constructor(U,y.byteOffset,y.length)}var cU=mA,dU="[object Boolean]",gA="[object Date]",hU="[object Map]",pU="[object Number]",vA="[object RegExp]",yA="[object Set]",fU="[object String]",Xp="[object Symbol]",zg="[object ArrayBuffer]",bA="[object DataView]",mU="[object Float32Array]",_A="[object Float64Array]",gU="[object Int8Array]",vU="[object Int16Array]",wA="[object Int32Array]",yU="[object Uint8Array]",xA="[object Uint8ClampedArray]",SA="[object Uint16Array]",$x="[object Uint32Array]";function EA(y,T,U){var q=y.constructor;switch(T){case zg:return Gx(y);case dU:case gA:return new q(+y);case bA:return Gy(y,U);case mU:case _A:case gU:case vU:case wA:case yU:case xA:case SA:case $x:return cU(y,U);case hU:return new q;case pU:case fU:return new q(y);case vA:return aU(y);case yA:return new q;case Xp:return uU(y)}}var CA=EA;function bU(y){return typeof y.constructor=="function"&&!ky(y)?BM(Fy(y)):{}}var _U=bU,PA="[object Map]";function wU(y){return Mt(y)&&Bg(y)==PA}var xU=wU,Wy=zc&&zc.isMap,SU=Wy?mx(Wy):xU,TA=SU,$y="[object Set]";function EU(y){return Mt(y)&&Bg(y)==$y}var MA=EU,Vg=zc&&zc.isSet,CU=Vg?mx(Vg):MA,kA=CU,th=1,AA=2,Kx=4,Xx="[object Arguments]",qx="[object Array]",Yx="[object Boolean]",Zx="[object Date]",Qx="[object Error]",Jx="[object Function]",IA="[object GeneratorFunction]",RA="[object Map]",DA="[object Number]",eS="[object Object]",jc="[object RegExp]",tS="[object Set]",PU="[object String]",OA="[object Symbol]",nS="[object WeakMap]",TU="[object ArrayBuffer]",MU="[object DataView]",LA="[object Float32Array]",NA="[object Float64Array]",kU="[object Int8Array]",AU="[object Int16Array]",FA="[object Int32Array]",IU="[object Uint8Array]",Ky="[object Uint8ClampedArray]",rS="[object Uint16Array]",BA="[object Uint32Array]",si={};si[Xx]=si[qx]=si[TU]=si[MU]=si[Yx]=si[Zx]=si[LA]=si[NA]=si[kU]=si[AU]=si[FA]=si[RA]=si[DA]=si[eS]=si[jc]=si[tS]=si[PU]=si[OA]=si[IU]=si[Ky]=si[rS]=si[BA]=!0,si[Qx]=si[Jx]=si[nS]=!1;function jg(y,T,U,q,oe,me){var De,Ke=T&th,Je=T&AA,_t=T&Kx;if(U&&(De=oe?U(y,q,oe,me):U(y)),De!==void 0)return De;if(!En(y))return y;var le=qe(y);if(le){if(De=rU(y),!Ke)return dB(y,De)}else{var Ve=Bg(y),Xt=Ve==Jx||Ve==IA;if(Ag(y))return Qk(y,Ke);if(Ve==eS||Ve==Xx||Xt&&!oe){if(De=Je||Xt?{}:_U(y),!Ke)return Je?JB(y,Kk(De,y)):$p(y,$k(De,y))}else{if(!si[Ve])return oe?y:{};De=CA(y,Ve,Ke)}}me||(me=new Jd);var An=me.get(y);if(An)return An;me.set(y,De),kA(y)?y.forEach(function(ar){De.add(jg(ar,T,U,ar,y,me))}):TA(y)&&y.forEach(function(ar,Jn){De.set(Jn,jg(ar,T,U,Jn,y,me))});var mn=_t?Je?tU:Fg:Je?Ny:Yd,or=le?void 0:mn(y);return UM(or||y,function(ar,Jn){or&&(Jn=ar,ar=y[Jn]),Rp(De,Jn,jg(ar,T,U,Jn,y,me))}),De}var RU=jg,DU=1,iS=4;function UA(y){return RU(y,DU|iS)}var OU=UA,zA="__lodash_hash_undefined__";function VA(y){return this.__data__.set(y,zA),this}var sS=VA;function jA(y){return this.__data__.has(y)}var LU=jA;function Hg(y){var T=-1,U=y==null?0:y.length;for(this.__data__=new Gd;++T<U;)this.add(y[T])}Hg.prototype.add=Hg.prototype.push=sS,Hg.prototype.has=LU;var NU=Hg;function FU(y,T){for(var U=-1,q=y==null?0:y.length;++U<q;)if(T(y[U],U,y))return!0;return!1}var Xy=FU;function oS(y,T){return y.has(T)}var BU=oS,HA=1,GA=2;function WA(y,T,U,q,oe,me){var De=U&HA,Ke=y.length,Je=T.length;if(Ke!=Je&&!(De&&Je>Ke))return!1;var _t=me.get(y),le=me.get(T);if(_t&&le)return _t==T&&le==y;var Ve=-1,Xt=!0,An=U&GA?new NU:void 0;for(me.set(y,T),me.set(T,y);++Ve<Ke;){var mn=y[Ve],or=T[Ve];if(q)var ar=De?q(or,mn,Ve,T,y,me):q(mn,or,Ve,y,T,me);if(ar!==void 0){if(ar)continue;Xt=!1;break}if(An){if(!Xy(T,function(Jn,Ir){if(!BU(An,Ir)&&(mn===Jn||oe(mn,Jn,U,q,me)))return An.push(Ir)})){Xt=!1;break}}else if(!(mn===or||oe(mn,or,U,q,me))){Xt=!1;break}}return me.delete(y),me.delete(T),Xt}var aS=WA;function $A(y){var T=-1,U=Array(y.size);return y.forEach(function(q,oe){U[++T]=[oe,q]}),U}var KA=$A;function XA(y){var T=-1,U=Array(y.size);return y.forEach(function(q){U[++T]=q}),U}var qA=XA,YA=1,ZA=2,QA="[object Boolean]",JA="[object Date]",e2="[object Error]",lS="[object Map]",qy="[object Number]",t2="[object RegExp]",UU="[object Set]",zU="[object String]",n2="[object Symbol]",r2="[object ArrayBuffer]",i2="[object DataView]",uS=Zt?Zt.prototype:void 0,cS=uS?uS.valueOf:void 0;function VU(y,T,U,q,oe,me,De){switch(U){case i2:if(y.byteLength!=T.byteLength||y.byteOffset!=T.byteOffset)return!1;y=y.buffer,T=T.buffer;case r2:return!(y.byteLength!=T.byteLength||!me(new Ug(y),new Ug(T)));case QA:case JA:case qy:return ao(+y,+T);case e2:return y.name==T.name&&y.message==T.message;case t2:case zU:return y==T+"";case lS:var Ke=KA;case UU:var Je=q&YA;if(Ke||(Ke=qA),y.size!=T.size&&!Je)return!1;var _t=De.get(y);if(_t)return _t==T;q|=ZA,De.set(y,T);var le=aS(Ke(y),Ke(T),q,oe,me,De);return De.delete(y),le;case n2:if(cS)return cS.call(y)==cS.call(T)}return!1}var s2=VU,dS=1,hS=Object.prototype,Gg=hS.hasOwnProperty;function o2(y,T,U,q,oe,me){var De=U&dS,Ke=Fg(y),Je=Ke.length,_t=Fg(T),le=_t.length;if(Je!=le&&!De)return!1;for(var Ve=Je;Ve--;){var Xt=Ke[Ve];if(!(De?Xt in T:Gg.call(T,Xt)))return!1}var An=me.get(y),mn=me.get(T);if(An&&mn)return An==T&&mn==y;var or=!0;me.set(y,T),me.set(T,y);for(var ar=De;++Ve<Je;){Xt=Ke[Ve];var Jn=y[Xt],Ir=T[Xt];if(q)var Ks=De?q(Ir,Jn,Xt,T,y,me):q(Jn,Ir,Xt,y,T,me);if(!(Ks===void 0?Jn===Ir||oe(Jn,Ir,U,q,me):Ks)){or=!1;break}ar||(ar=Xt=="constructor")}if(or&&!ar){var Xs=y.constructor,qs=T.constructor;Xs!=qs&&"constructor"in y&&"constructor"in T&&!(typeof Xs=="function"&&Xs instanceof Xs&&typeof qs=="function"&&qs instanceof qs)&&(or=!1)}return me.delete(y),me.delete(T),or}var pS=o2,a2=1,l2="[object Arguments]",fS="[object Array]",qp="[object Object]",u2=Object.prototype,c2=u2.hasOwnProperty;function d2(y,T,U,q,oe,me){var De=qe(y),Ke=qe(T),Je=De?fS:Bg(y),_t=Ke?fS:Bg(T);Je=Je==l2?qp:Je,_t=_t==l2?qp:_t;var le=Je==qp,Ve=_t==qp,Xt=Je==_t;if(Xt&&Ag(y)){if(!Ag(T))return!1;De=!0,le=!1}if(Xt&&!le)return me||(me=new Jd),De||bx(y)?aS(y,T,U,q,oe,me):s2(y,T,Je,U,q,oe,me);if(!(U&a2)){var An=le&&c2.call(y,"__wrapped__"),mn=Ve&&c2.call(T,"__wrapped__");if(An||mn){var or=An?y.value():y,ar=mn?T.value():T;return me||(me=new Jd),oe(or,ar,U,q,me)}}return Xt?(me||(me=new Jd),pS(y,T,U,q,oe,me)):!1}var h2=d2;function mS(y,T,U,q,oe){return y===T?!0:y==null||T==null||!Mt(y)&&!Mt(T)?y!==y&&T!==T:h2(y,T,U,q,mS,oe)}var p2=mS,jU=1,gS=2;function f2(y,T,U,q){var oe=U.length,me=oe,De=!q;if(y==null)return!me;for(y=Object(y);oe--;){var Ke=U[oe];if(De&&Ke[2]?Ke[1]!==y[Ke[0]]:!(Ke[0]in y))return!1}for(;++oe<me;){Ke=U[oe];var Je=Ke[0],_t=y[Je],le=Ke[1];if(De&&Ke[2]){if(_t===void 0&&!(Je in y))return!1}else{var Ve=new Jd;if(q)var Xt=q(_t,le,Je,y,T,Ve);if(!(Xt===void 0?p2(le,_t,jU|gS,q,Ve):Xt))return!1}}return!0}var HU=f2;function m2(y){return y===y&&!En(y)}var g2=m2;function GU(y){for(var T=Yd(y),U=T.length;U--;){var q=T[U],oe=y[q];T[U]=[q,oe,g2(oe)]}return T}var vS=GU;function v2(y,T){return function(U){return U==null?!1:U[y]===T&&(T!==void 0||y in Object(U))}}var y2=v2;function b2(y){var T=vS(y);return T.length==1&&T[0][2]?y2(T[0][0],T[0][1]):function(U){return U===y||HU(U,y,T)}}var WU=b2;function $U(y,T){return y!=null&&T in Object(y)}var _2=$U;function KU(y,T,U){T=Lc(T,y);for(var q=-1,oe=T.length,me=!1;++q<oe;){var De=Fa(T[q]);if(!(me=y!=null&&U(y,De)))break;y=y[De]}return me||++q!=oe?me:(oe=y==null?0:y.length,!!oe&&nx(oe)&&_g(De,oe)&&(qe(y)||ax(y)))}var XU=KU;function w2(y,T){return y!=null&&XU(y,T,_2)}var qU=w2,YU=1,x2=2;function ZU(y,T){return mr(y)&&g2(T)?y2(Fa(y),T):function(U){var q=Bl(U,y);return q===void 0&&q===T?qU(U,y):p2(T,q,YU|x2)}}var QU=ZU;function S2(y){return function(T){return T==null?void 0:T[y]}}var yS=S2;function E2(y){return function(T){return $d(T,y)}}var JU=E2;function e5(y){return mr(y)?yS(Fa(y)):JU(y)}var C2=e5;function t5(y){return typeof y=="function"?y:y==null?Ty:typeof y=="object"?qe(y)?QU(y[0],y[1]):WU(y):C2(y)}var n5=t5;function P2(y){return function(T,U,q){for(var oe=-1,me=Object(T),De=q(T),Ke=De.length;Ke--;){var Je=De[y?Ke:++oe];if(U(me[Je],Je,me)===!1)break}return T}}var r5=P2,i5=r5(),T2=i5;function s5(y,T){return y&&T2(y,T,Yd)}var o5=s5,Yp=function(){return Et.Date.now()},nh=Yp,a5="Expected a function",M2=Math.max,l5=Math.min;function u5(y,T,U){var q,oe,me,De,Ke,Je,_t=0,le=!1,Ve=!1,Xt=!0;if(typeof y!="function")throw new TypeError(a5);T=te(T)||0,En(U)&&(le=!!U.leading,Ve="maxWait"in U,me=Ve?M2(te(U.maxWait)||0,T):me,Xt="trailing"in U?!!U.trailing:Xt);function An(Jr){var Ys=q,la=oe;return q=oe=void 0,_t=Jr,De=y.apply(la,Ys),De}function mn(Jr){return _t=Jr,Ke=setTimeout(Jn,T),le?An(Jr):De}function or(Jr){var Ys=Jr-Je,la=Jr-_t,Gl=T-Ys;return Ve?l5(Gl,me-la):Gl}function ar(Jr){var Ys=Jr-Je,la=Jr-_t;return Je===void 0||Ys>=T||Ys<0||Ve&&la>=me}function Jn(){var Jr=nh();if(ar(Jr))return Ir(Jr);Ke=setTimeout(Jn,or(Jr))}function Ir(Jr){return Ke=void 0,Xt&&q?An(Jr):(q=oe=void 0,De)}function Ks(){Ke!==void 0&&clearTimeout(Ke),_t=0,q=Je=oe=Ke=void 0}function Xs(){return Ke===void 0?De:Ir(nh())}function qs(){var Jr=nh(),Ys=ar(Jr);if(q=arguments,oe=this,Je=Jr,Ys){if(Ke===void 0)return mn(Je);if(Ve)return clearTimeout(Ke),Ke=setTimeout(Jn,T),An(Je)}return Ke===void 0&&(Ke=setTimeout(Jn,T)),De}return qs.cancel=Ks,qs.flush=Xs,qs}var k2=u5;function c5(y){var T=y==null?0:y.length;return T?y[T-1]:void 0}var A2=c5;function I2(y,T){return T.length<2?y:$d(y,xx(T,0,-1))}var d5=I2;function h5(y){return typeof y=="number"&&y==Ss(y)}var bS=h5;function R2(y,T){var U={};return T=n5(T),o5(y,function(q,oe,me){Ru(U,oe,T(q,oe,me))}),U}var p5=R2;function D2(y,T){return T=Lc(T,y),y=d5(y,T),y==null||delete y[Fa(A2(T))]}var f5=D2,O2=9007199254740991,_S=Math.floor;function L2(y,T){var U="";if(!y||T<1||T>O2)return U;do T%2&&(U+=y),T=_S(T/2),T&&(y+=y);while(T);return U}var N2=L2,F2=yS("length"),m5=F2,B2="\\ud800-\\udfff",U2="\\u0300-\\u036f",g5="\\ufe20-\\ufe2f",z2="\\u20d0-\\u20ff",Yy=U2+g5+z2,v5="\\ufe0e\\ufe0f",y5="["+B2+"]",Zy="["+Yy+"]",Qy="\\ud83c[\\udffb-\\udfff]",V2="(?:"+Zy+"|"+Qy+")",Jy="[^"+B2+"]",wS="(?:\\ud83c[\\udde6-\\uddff]){2}",j2="[\\ud800-\\udbff][\\udc00-\\udfff]",H2="\\u200d",G2=V2+"?",W2="["+v5+"]?",rh="(?:"+H2+"(?:"+[Jy,wS,j2].join("|")+")"+W2+G2+")*",eb=W2+G2+rh,b5="(?:"+[Jy+Zy+"?",Zy,wS,j2,y5].join("|")+")",xS=RegExp(Qy+"(?="+Qy+")|"+b5+eb,"g");function SS(y){for(var T=xS.lastIndex=0;xS.test(y);)++T;return T}var _5=SS;function w5(y){return Ex(y)?_5(y):m5(y)}var ES=w5,$2=Math.ceil;function K2(y,T){T=T===void 0?" ":_y(T);var U=T.length;if(U<2)return U?N2(T,y):T;var q=N2(T,$2(y/ES(T)));return Ex(T)?TB(zB(q),0,y).join(""):q.slice(0,y)}var x5=K2;function S5(y,T,U){y=vg(y),T=Ss(T);var q=T?ES(y):0;return T&&q<T?x5(T-q,U)+y:y}var Zp=S5;function E5(y,T){return y==null?!0:f5(y,T)}var X2=E5,q2=5*1e3,Y2=class{constructor(y){Z(this,"_cache",new Iu),Z(this,"_keepHotUntapDebounce"),st(this,y)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return Te(this).propsP}get sheet(){return Te(this).sheet.publicApi}get project(){return Te(this).sheet.project.publicApi}get address(){return D({},Te(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",()=>{const y=Te(this);return(0,Pg.prism)(()=>(0,Pg.val)(y.getValues().getValue()))})}onValuesChange(y,T){return xb(this._valuesPrism(),y,T)}get value(){const y=this._valuesPrism();{if(!y.isHot){this._keepHotUntapDebounce!=null&&this._keepHotUntapDebounce.flush();const T=y.keepHot();this._keepHotUntapDebounce=k2(()=>{T(),this._keepHotUntapDebounce=void 0},q2)}this._keepHotUntapDebounce&&this._keepHotUntapDebounce()}return y.getValue()}set initialValue(y){Te(this).setInitialValue(y)}};function Z2(y){const T=new WeakMap;return U=>(T.has(U)||T.set(U,y(U)),T.get(U))}function tb(y){return y.type==="compound"||y.type==="enum"}function CS(y,T){if(!y)return;const[U,...q]=T;if(U===void 0)return y;if(!tb(y))return;const oe=y.type==="enum"?y.cases[U]:y.props[U];return CS(oe,q)}function PS(y){return!tb(y)}var C5=class{constructor(y,T,U){this.sheet=y,this.template=T,this.nativeObject=U,Z(this,"$$isPointerToPrismProvider",!0),Z(this,"address"),Z(this,"publicApi"),Z(this,"_initialValue",new jr.Atom({})),Z(this,"_cache",new Iu),Z(this,"_logger"),Z(this,"_internalUtilCtx"),this._logger=y._logger.named("SheetObject",T.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=H(D({},T.address),{sheetInstanceId:y.address.sheetInstanceId}),this.publicApi=new Y2(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",()=>(0,jr.prism)(()=>{const y=(0,jr.val)(this.template.getDefaultValues()),T=(0,jr.val)(this._initialValue.pointer),U=jr.prism.memo("withInitialCache",()=>new WeakMap,[]),q=zl(y,T,U),oe=(0,jr.val)(this.template.getStaticValues()),me=jr.prism.memo("withStatics",()=>new WeakMap,[]);let Ke=zl(q,oe,me),Je;{const le=jr.prism.memo("seq",()=>this.getSequencedValues(),[]),Ve=jr.prism.memo("withSeqsCache",()=>new WeakMap,[]);Je=(0,jr.val)((0,jr.val)(le)),Ke=zl(Ke,Je,Ve)}return Cg("finalAtom",Ke).pointer}))}getValueByPointer(y){const T=(0,jr.val)(this.getValues()),{path:U}=(0,jr.getPointerParts)(y);return(0,jr.val)(Xd(T,U))}pointerToPrism(y){const{path:T}=(0,jr.getPointerParts)(y);return(0,jr.prism)(()=>{const U=(0,jr.val)(this.getValues());return(0,jr.val)(Xd(U,T))})}getSequencedValues(){return(0,jr.prism)(()=>{const y=jr.prism.memo("tracksToProcess",()=>this.template.getArrayOfValidSequenceTracks(),[]),T=(0,jr.val)(y),U=new jr.Atom({}),q=(0,jr.val)(this.template.configPointer);return jr.prism.effect("processTracks",()=>{const oe=[];for(const{trackId:me,pathToProp:De}of T){const Ke=this._trackIdToPrism(me),Je=CS(q,De),_t=Je.deserializeAndSanitize,le=Je.interpolate,Ve=()=>{const An=Ke.getValue();if(!An)return U.setByPointer(Ir=>Xd(Ir,De),void 0);const mn=_t(An.left),or=mn===void 0?Je.default:mn;if(An.right===void 0)return U.setByPointer(Ir=>Xd(Ir,De),or);const ar=_t(An.right),Jn=ar===void 0?Je.default:ar;return U.setByPointer(Ir=>Xd(Ir,De),le(or,Jn,An.progression))},Xt=Ke.onStale(Ve);Ve(),oe.push(Xt)}return()=>{for(const me of oe)me()}},[q,...T]),U.pointer})}_trackIdToPrism(y){const T=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[y],U=this.sheet.getSequence().positionPrism;return K1(this._internalUtilCtx,T,U)}get propsP(){return this._cache.get("propsP",()=>(0,jr.pointer)({root:this,path:[]}))}validateValue(y,T){}setInitialValue(y){this.validateValue(this.propsP,y),this._initialValue.set(y)}};function oi(y){return function(U,q){return y(U,q())}}var Oo={_hmm:oa(524),_todo:oa(522),_error:oa(521),errorDev:oa(529),errorPublic:oa(545),_kapow:oa(268),_warn:oa(265),warnDev:oa(273),warnPublic:oa(289),_debug:oa(137),debugDev:oa(145),_trace:oa(73),traceDev:oa(81)};function oa(y){return Object.freeze({audience:Hc(y,8)?"internal":Hc(y,16)?"dev":"public",category:Hc(y,4)?"troubleshooting":Hc(y,2)?"todo":"general",level:Hc(y,512)?512:Hc(y,256)?256:Hc(y,128)?128:64})}function Hc(y,T){return(y&T)===T}function Hr(y,T){return((T&32)===32?!0:(T&16)===16?y.dev:(T&8)===8?y.internal:!1)&&y.min<=T}var Du={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(y,T,U){return this.create({names:[...y.names,{name:T,key:U}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(y){if(y.length<5)return y;const T=y.replace(this.collapseOnRE,"");return this.cssMemo.has(T)||this.cssMemo.set(T,this.css(y)),T},css(y){var T,U,q,oe;const me=this.cssMemo.get(y);if(me)return me;let De="color:".concat((U=(T=this.color)==null?void 0:T.call(this,y))!=null?U:"hsl(".concat((y.charCodeAt(0)+y.charCodeAt(y.length-1))%360,", 100%, 60%)"));return(q=this.bold)!=null&&q.test(y)&&(De+=";font-weight:600"),(oe=this.italic)!=null&&oe.test(y)&&(De+=";font-style:italic"),this.cssMemo.set(y,De),De}}};function Q2(y=console,T={}){const U=H(D({},Du),{includes:D({},Du.includes)}),q={styled:P5.bind(U,y),noStyle:T5.bind(U,y)},oe=J2.bind(U);function me(){return U.loggingConsoleStyle&&U.loggerConsoleStyle?q.styled:q.noStyle}return U.create=me(),{configureLogger(De){var Ke;De==="console"?(U.loggerConsoleStyle=Du.loggerConsoleStyle,U.create=me()):De.type==="console"?(U.loggerConsoleStyle=(Ke=De.style)!=null?Ke:Du.loggerConsoleStyle,U.create=me()):De.type==="keyed"?(U.creatExt=Je=>De.keyed(Je.names),U.create=oe):De.type==="named"&&(U.creatExt=ih.bind(null,De.named),U.create=oe)},configureLogging(De){var Ke,Je,_t,le,Ve;U.includes.dev=(Ke=De.dev)!=null?Ke:Du.includes.dev,U.includes.internal=(Je=De.internal)!=null?Je:Du.includes.internal,U.includes.min=(_t=De.min)!=null?_t:Du.includes.min,U.include=(le=De.include)!=null?le:Du.include,U.loggingConsoleStyle=(Ve=De.consoleStyle)!=null?Ve:Du.loggingConsoleStyle,U.create=me()},getLogger(){return U.create({names:[]})}}}function ih(y,T){const U=[];for(let{name:q,key:oe}of T.names)U.push(oe==null?q:"".concat(q," (").concat(oe,")"));return y(U)}function J2(y){const T=D(D({},this.includes),this.include(y)),U=this.filtered,q=this.named.bind(this,y),oe=this.creatExt(y),me=Hr(T,524),De=Hr(T,522),Ke=Hr(T,521),Je=Hr(T,529),_t=Hr(T,545),le=Hr(T,265),Ve=Hr(T,268),Xt=Hr(T,273),An=Hr(T,289),mn=Hr(T,137),or=Hr(T,145),ar=Hr(T,73),Jn=Hr(T,81),Ir=me?oe.error.bind(oe,Oo._hmm):U.bind(y,524),Ks=De?oe.error.bind(oe,Oo._todo):U.bind(y,522),Xs=Ke?oe.error.bind(oe,Oo._error):U.bind(y,521),qs=Je?oe.error.bind(oe,Oo.errorDev):U.bind(y,529),Jr=_t?oe.error.bind(oe,Oo.errorPublic):U.bind(y,545),Ys=Ve?oe.warn.bind(oe,Oo._kapow):U.bind(y,268),la=le?oe.warn.bind(oe,Oo._warn):U.bind(y,265),Gl=Xt?oe.warn.bind(oe,Oo.warnDev):U.bind(y,273),Wl=An?oe.warn.bind(oe,Oo.warnPublic):U.bind(y,273),dh=mn?oe.debug.bind(oe,Oo._debug):U.bind(y,137),Vu=or?oe.debug.bind(oe,Oo.debugDev):U.bind(y,145),hh=ar?oe.trace.bind(oe,Oo._trace):U.bind(y,73),ph=Jn?oe.trace.bind(oe,Oo.traceDev):U.bind(y,81),es={_hmm:Ir,_todo:Ks,_error:Xs,errorDev:qs,errorPublic:Jr,_kapow:Ys,_warn:la,warnDev:Gl,warnPublic:Wl,_debug:dh,debugDev:Vu,_trace:hh,traceDev:ph,lazy:{_hmm:me?oi(Ir):Ir,_todo:De?oi(Ks):Ks,_error:Ke?oi(Xs):Xs,errorDev:Je?oi(qs):qs,errorPublic:_t?oi(Jr):Jr,_kapow:Ve?oi(Ys):Ys,_warn:le?oi(la):la,warnDev:Xt?oi(Gl):Gl,warnPublic:An?oi(Wl):Wl,_debug:mn?oi(dh):dh,debugDev:or?oi(Vu):Vu,_trace:ar?oi(hh):hh,traceDev:Jn?oi(ph):ph},named:q,utilFor:{internal(){return{debug:es._debug,error:es._error,warn:es._warn,trace:es._trace,named(ua,ai){return es.named(ua,ai).utilFor.internal()}}},dev(){return{debug:es.debugDev,error:es.errorDev,warn:es.warnDev,trace:es.traceDev,named(ua,ai){return es.named(ua,ai).utilFor.dev()}}},public(){return{error:es.errorPublic,warn:es.warnPublic,debug(ua,ai){es._warn('(public "debug" filtered out) '.concat(ua),ai)},trace(ua,ai){es._warn('(public "trace" filtered out) '.concat(ua),ai)},named(ua,ai){return es.named(ua,ai).utilFor.public()}}}}};return es}function P5(y,T){const U=D(D({},this.includes),this.include(T)),q=[];let oe="";for(let Je=0;Je<T.names.length;Je++){const{name:_t,key:le}=T.names[Je];if(oe+=" %c".concat(_t),q.push(this.style.css(_t)),le!=null){const Ve="%c#".concat(le);oe+=Ve,q.push(this.style.css(Ve))}}const me=this.filtered,De=this.named.bind(this,T),Ke=[oe,...q];return tI(me,T,U,y,Ke,eI(Ke),De)}function eI(y){const T=y.slice(0);for(let U=1;U<T.length;U++)T[U]+=";background-color:#e0005a;padding:2px;color:white";return T}function T5(y,T){const U=D(D({},this.includes),this.include(T));let q="";for(let Ke=0;Ke<T.names.length;Ke++){const{name:Je,key:_t}=T.names[Ke];q+=" ".concat(Je),_t!=null&&(q+="#".concat(_t))}const oe=this.filtered,me=this.named.bind(this,T),De=[q];return tI(oe,T,U,y,De,De,me)}function tI(y,T,U,q,oe,me,De){const Ke=Hr(U,524),Je=Hr(U,522),_t=Hr(U,521),le=Hr(U,529),Ve=Hr(U,545),Xt=Hr(U,265),An=Hr(U,268),mn=Hr(U,273),or=Hr(U,289),ar=Hr(U,137),Jn=Hr(U,145),Ir=Hr(U,73),Ks=Hr(U,81),Xs=Ke?q.error.bind(q,...oe):y.bind(T,524),qs=Je?q.error.bind(q,...oe):y.bind(T,522),Jr=_t?q.error.bind(q,...oe):y.bind(T,521),Ys=le?q.error.bind(q,...oe):y.bind(T,529),la=Ve?q.error.bind(q,...oe):y.bind(T,545),Gl=An?q.warn.bind(q,...me):y.bind(T,268),Wl=Xt?q.warn.bind(q,...oe):y.bind(T,265),dh=mn?q.warn.bind(q,...oe):y.bind(T,273),Vu=or?q.warn.bind(q,...oe):y.bind(T,273),hh=ar?q.info.bind(q,...oe):y.bind(T,137),ph=Jn?q.info.bind(q,...oe):y.bind(T,145),es=Ir?q.debug.bind(q,...oe):y.bind(T,73),ua=Ks?q.debug.bind(q,...oe):y.bind(T,81),ai={_hmm:Xs,_todo:qs,_error:Jr,errorDev:Ys,errorPublic:la,_kapow:Gl,_warn:Wl,warnDev:dh,warnPublic:Vu,_debug:hh,debugDev:ph,_trace:es,traceDev:ua,lazy:{_hmm:Ke?oi(Xs):Xs,_todo:Je?oi(qs):qs,_error:_t?oi(Jr):Jr,errorDev:le?oi(Ys):Ys,errorPublic:Ve?oi(la):la,_kapow:An?oi(Gl):Gl,_warn:Xt?oi(Wl):Wl,warnDev:mn?oi(dh):dh,warnPublic:or?oi(Vu):Vu,_debug:ar?oi(hh):hh,debugDev:Jn?oi(ph):ph,_trace:Ir?oi(es):es,traceDev:Ks?oi(ua):ua},named:De,utilFor:{internal(){return{debug:ai._debug,error:ai._error,warn:ai._warn,trace:ai._trace,named($l,ol){return ai.named($l,ol).utilFor.internal()}}},dev(){return{debug:ai.debugDev,error:ai.errorDev,warn:ai.warnDev,trace:ai.traceDev,named($l,ol){return ai.named($l,ol).utilFor.dev()}}},public(){return{error:ai.errorPublic,warn:ai.warnPublic,debug($l,ol){ai._warn('(public "debug" filtered out) '.concat($l),ol)},trace($l,ol){ai._warn('(public "trace" filtered out) '.concat($l),ol)},named($l,ol){return ai.named($l,ol).utilFor.public()}}}}};return ai}var TS=Q2(console,{_debug:function(){},_error:function(){}});TS.configureLogging({dev:!0,min:64});var nb=TS.getLogger().named("Theatre.js (default logger)").utilFor.dev(),nI=new WeakMap;function rI(y){const T=nI.get(y);if(T)return T;const U=new Map;return nI.set(y,U),iI([],y,U),U}function iI(y,T,U){for(const[q,oe]of Object.entries(T.props))if(!tb(oe)){const me=[...y,q];U.set(JSON.stringify(me),U.size),sI(me,oe,U)}for(const[q,oe]of Object.entries(T.props))if(tb(oe)){const me=[...y,q];U.set(JSON.stringify(me),U.size),sI(me,oe,U)}}function sI(y,T,U){if(T.type==="compound")iI(y,T,U);else{if(T.type==="enum")throw new Error("Enums aren't supported yet");U.set(JSON.stringify(y),U.size)}}function MS(y){return typeof y=="object"&&y!==null&&Object.keys(y).length===0}var M5=class{constructor(y,T,U,q,oe){this.sheetTemplate=y,Z(this,"address"),Z(this,"type","Theatre_SheetObjectTemplate"),Z(this,"_config"),Z(this,"_temp_actions_atom"),Z(this,"_cache",new Iu),Z(this,"project"),Z(this,"pointerToSheetState"),Z(this,"pointerToStaticOverrides"),this.address=H(D({},y.address),{objectKey:T}),this._config=new ls.Atom(q),this._temp_actions_atom=new ls.Atom(oe),this.project=y.project,this.pointerToSheetState=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],this.pointerToStaticOverrides=this.pointerToSheetState.staticOverrides.byObject[this.address.objectKey]}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(y,T,U){return this._config.set(U),new C5(y,this,T)}reconfigure(y){this._config.set(y)}_temp_setActions(y){this._temp_actions_atom.set(y)}getDefaultValues(){return this._cache.get("getDefaultValues()",()=>(0,ls.prism)(()=>{const y=(0,ls.val)(this.configPointer);return $1(y)}))}getStaticValues(){return this._cache.get("getStaticValues",()=>(0,ls.prism)(()=>{var y;const T=(y=(0,ls.val)(this.pointerToStaticOverrides))!=null?y:{};return(0,ls.val)(this.configPointer).deserializeAndSanitize(T)||{}}))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",()=>(0,ls.prism)(()=>{const y=this.project.pointers.historic.sheetsById[this.address.sheetId],T=(0,ls.val)(y.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!T)return Be;const U=[];if(!T)return Be;const q=(0,ls.val)(this.configPointer),oe=Object.entries(T);for(const[De,Ke]of oe){const Je=k5(De);if(!Je)continue;const _t=CS(q,Je);_t&&PS(_t)&&U.push({pathToProp:Je,trackId:Ke})}const me=rI(q);return U.sort((De,Ke)=>{const Je=De.pathToProp,_t=Ke.pathToProp,le=me.get(JSON.stringify(Je)),Ve=me.get(JSON.stringify(_t));return le>Ve?1:-1}),U.length===0?Be:U}))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",()=>(0,ls.prism)(()=>{const y=(0,ls.val)(this.getArrayOfValidSequenceTracks());let T={};for(const{pathToProp:U,trackId:q}of y)Op(T,U,q);return T}))}getStaticButNotSequencedOverrides(){return this._cache.get("getStaticButNotSequencedOverrides",()=>(0,ls.prism)(()=>{const y=(0,ls.val)(this.getStaticValues()),T=(0,ls.val)(this.getArrayOfValidSequenceTracks()),U=OU(y);for(const{pathToProp:q}of T){X2(U,q);let oe=q.slice(0,-1);for(;oe.length>0;){const me=yg(U,oe);if(!MS(me))break;X2(U,oe),oe=oe.slice(0,-1)}}if(!MS(U))return U}))}getDefaultsAtPointer(y){const{path:T}=(0,ls.getPointerParts)(y),U=this.getDefaultValues().getValue();return yg(U,T)}};function k5(y){try{return JSON.parse(y)}catch{nb.warn("property ".concat(JSON.stringify(y)," cannot be parsed. Skipping."));return}}var kS=Nt,A5=Z2(y=>JSON.stringify(y));P(se());var I5=class extends Error{},Qp=class extends I5{},oI=Nt,R5=Nt,aI=Nt,ds=Nt;function Ou(){let y,T;const U=new Promise((oe,me)=>{y=De=>{oe(De),q.status="resolved"},T=De=>{me(De),q.status="rejected"}}),q={resolve:y,reject:T,promise:U,status:"pending"};return q}var D5=()=>{},rb=D5,lI=Nt,O5=class{constructor(){Z(this,"_stopPlayCallback",rb),Z(this,"_state",new lI.Atom({position:0,playing:!1})),Z(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=rb}gotoPosition(y){this._updatePositionInState(y)}_updatePositionInState(y){this._state.setByPointer(T=>T.position,y)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(y){this._state.setByPointer(T=>T.playing,y)}play(y,T,U,q,oe){this.playing&&this.pause(),this.playing=!0;const me=T[1]-T[0];{const Xt=this.getCurrentPosition();Xt<T[0]||Xt>T[1]?q==="normal"||q==="alternate"?this._updatePositionInState(T[0]):(q==="reverse"||q==="alternateReverse")&&this._updatePositionInState(T[1]):q==="normal"||q==="alternate"?Xt===T[1]&&this._updatePositionInState(T[0]):Xt===T[0]&&this._updatePositionInState(T[1])}const De=Ou(),Ke=oe.time,Je=me*y;let _t=this.getCurrentPosition()-T[0];(q==="reverse"||q==="alternateReverse")&&(_t=T[1]-this.getCurrentPosition());const le=Xt=>{const mn=Math.max(Xt-Ke,0)/1e3,or=Math.min(mn*U+_t,Je);if(or!==Je){const ar=Math.floor(or/me);let Jn=or/me%1*me;if(q!=="normal")if(q==="reverse")Jn=me-Jn;else{const Ir=ar%2===0;q==="alternate"?Ir||(Jn=me-Jn):Ir&&(Jn=me-Jn)}this._updatePositionInState(Jn+T[0]),Ve()}else{if(q==="normal")this._updatePositionInState(T[1]);else if(q==="reverse")this._updatePositionInState(T[0]);else{const ar=(y-1)%2===0;q==="alternate"?ar?this._updatePositionInState(T[1]):this._updatePositionInState(T[0]):ar?this._updatePositionInState(T[0]):this._updatePositionInState(T[1])}this.playing=!1,De.resolve(!0)}};this._stopPlayCallback=()=>{oe.offThisOrNextTick(le),oe.offNextTick(le),this.playing&&De.resolve(!1)};const Ve=()=>oe.onNextTick(le);return oe.onThisOrNextTick(le),De.promise}playDynamicRange(y,T){this.playing&&this.pause(),this.playing=!0;const U=Ou(),q=y.keepHot();U.promise.then(q,q);let oe=T.time;const me=Ke=>{const Je=Math.max(Ke-oe,0);oe=Ke;const _t=Je/1e3,le=this.getCurrentPosition(),Ve=y.getValue();if(le<Ve[0]||le>Ve[1])this.gotoPosition(Ve[0]);else{let Xt=le+_t;Xt>Ve[1]&&(Xt=Ve[0]+(Xt-Ve[1])),this.gotoPosition(Xt)}De()};this._stopPlayCallback=()=>{T.offThisOrNextTick(me),T.offNextTick(me),U.resolve(!1)};const De=()=>T.onNextTick(me);return T.onThisOrNextTick(me),U.promise}},uI=Nt,cI="__TheatreJS_StudioBundle",AS="__TheatreJS_CoreBundle",dI="__TheatreJS_Notifications",Wg=y=>(...T)=>{var U;switch(y){case"success":{nb.debug(T.slice(0,2).join(`
`));break}case"info":{nb.debug(T.slice(0,2).join(`
`));break}case"warning":{nb.warn(T.slice(0,2).join(`
`));break}}return typeof window<"u"?(U=window[dI])==null?void 0:U.notify[y](...T):void 0},Jp={warning:Wg("warning"),success:Wg("success"),info:Wg("info"),error:Wg("error")};typeof window<"u"&&(window.addEventListener("error",y=>{Jp.error("An error occurred","<pre>".concat(y.message,`</pre>

See **console** for details.`))}),window.addEventListener("unhandledrejection",y=>{Jp.error("An error occurred","<pre>".concat(y.reason,`</pre>

See **console** for details.`))}));var L5=class{constructor(y,T,U){this._decodedBuffer=y,this._audioContext=T,this._nodeDestination=U,Z(this,"_mainGain"),Z(this,"_state",new uI.Atom({position:0,playing:!1})),Z(this,"statePointer"),Z(this,"_stopPlayCallback",rb),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(y,T){const U=Ou();this._playing&&this.pause(),this._playing=!0;let q;const oe=()=>{q==null||q(),q=this._loopInRange(y.getValue(),T).stop},me=y.onStale(oe);return oe(),this._stopPlayCallback=()=>{q==null||q(),me(),U.resolve(!1)},U.promise}_loopInRange(y,T){let q=this.getCurrentPosition();const oe=y[1]-y[0];q<y[0]||q>y[1]?this._updatePositionInState(y[0]):q===y[1]&&this._updatePositionInState(y[0]),q=this.getCurrentPosition();const me=this._audioContext.createBufferSource();me.buffer=this._decodedBuffer,me.connect(this._mainGain),me.playbackRate.value=1,me.loop=!0,me.loopStart=y[0],me.loopEnd=y[1];const De=T.time;let Ke=q-y[0];me.start(0,q);const Je=Ve=>{let or=(Math.max(Ve-De,0)/1e3*1+Ke)/oe%1*oe;this._updatePositionInState(or+y[0]),_t()},_t=()=>T.onNextTick(Je);return T.onThisOrNextTick(Je),{stop:()=>{me.stop(),me.disconnect(),T.offThisOrNextTick(Je),T.offNextTick(Je)}}}get _playing(){return this._state.get().playing}set _playing(y){this._state.setByPointer(T=>T.playing,y)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=rb}gotoPosition(y){this._updatePositionInState(y)}_updatePositionInState(y){this._state.reduce(T=>H(D({},T),{position:y}))}getCurrentPosition(){return this._state.get().position}play(y,T,U,q,oe){this._playing&&this.pause(),this._playing=!0;let me=this.getCurrentPosition();const De=T[1]-T[0];if(q!=="normal")throw new Qp('Audio-controlled sequences can only be played in the "normal" direction. '+"'".concat(q,"' given."));me<T[0]||me>T[1]?this._updatePositionInState(T[0]):me===T[1]&&this._updatePositionInState(T[0]),me=this.getCurrentPosition();const Ke=Ou(),Je=this._audioContext.createBufferSource();Je.buffer=this._decodedBuffer,Je.connect(this._mainGain),Je.playbackRate.value=U,y>1e3&&(Jp.warning("Can't play sequences with audio more than 1000 times","The sequence will still play, but only 1000 times. The `iterationCount: ".concat(y,"` provided to `sequence.play()`\nis too high for a sequence with audio.\n\nTo fix this, either set `iterationCount` to a lower value, or remove the audio from the sequence."),[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),y=1e3),y>1&&(Je.loop=!0,Je.loopStart=T[0],Je.loopEnd=T[1]);const _t=oe.time;let le=me-T[0];const Ve=De*y;Je.start(0,me,Ve-le);const Xt=or=>{const Jn=Math.max(or-_t,0)/1e3,Ir=Math.min(Jn*U+le,Ve);if(Ir!==Ve){let Ks=Ir/De%1*De;this._updatePositionInState(Ks+T[0]),mn()}else this._updatePositionInState(T[1]),this._playing=!1,An(),Ke.resolve(!0)},An=()=>{Je.stop(),Je.disconnect()};this._stopPlayCallback=()=>{An(),oe.offThisOrNextTick(Xt),oe.offNextTick(Xt),this._playing&&Ke.resolve(!1)};const mn=()=>oe.onNextTick(Xt);return oe.onThisOrNextTick(Xt),Ke.promise}},ef=Nt,ib=0;function sb(y){var T;const U=De=>{q.tick(De)},q=new ef.Ticker({onActive(){var De;(De=y==null?void 0:y.start)==null||De.call(y)},onDormant(){var De;(De=y==null?void 0:y.stop)==null||De.call(y)}}),oe={tick:U,id:ib++,name:(T=y==null?void 0:y.name)!=null?T:"CustomRafDriver-".concat(ib),type:"Theatre_RafDriver_PublicAPI"},me={type:"Theatre_RafDriver_PrivateAPI",publicApi:oe,ticker:q,start:y==null?void 0:y.start,stop:y==null?void 0:y.stop};return st(oe,me),oe}function hI(){let y=null;const q=sb({name:"DefaultCoreRafDriver",start:()=>{if(typeof window<"u"){const oe=me=>{q.tick(me),y=window.requestAnimationFrame(oe)};y=window.requestAnimationFrame(oe)}else q.tick(0),setTimeout(()=>q.tick(1),0)},stop:()=>{typeof window<"u"&&y!==null&&window.cancelAnimationFrame(y)}});return q}var ob;function IS(){return ob||pI(hI()),ob}function RS(){return IS().ticker}function pI(y){if(ob)throw new Error("`setCoreRafDriver()` is already called.");ob=Te(y)}var N5=class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(y){st(this,y)}play(y){const T=Te(this);if(T._project.isReady()){const U=y!=null&&y.rafDriver?Te(y.rafDriver).ticker:RS();return T.play(y??{},U)}else{const U=Ou();return U.resolve(!0),U.promise}}pause(){Te(this).pause()}get position(){return Te(this).position}set position(y){Te(this).position=y}__experimental_getKeyframes(y){return Te(this).getKeyframesOfSimpleProp(y)}async attachAudio(y){const{audioContext:T,destinationNode:U,decodedBuffer:q,gainNode:oe}=await F5(y),me=new L5(q,T,oe);return Te(this).replacePlaybackController(me),{audioContext:T,destinationNode:U,decodedBuffer:q,gainNode:oe}}get pointer(){return Te(this).pointer}};async function F5(y){function T(){if(y.audioContext)return Promise.resolve(y.audioContext);const _t=new AudioContext;return _t.state==="running"||typeof window>"u"?Promise.resolve(_t):new Promise(le=>{const Ve=()=>{_t.resume().catch(mn=>{console.error(mn)})},Xt=["mousedown","keydown","touchstart"],An={capture:!0,passive:!1};Xt.forEach(mn=>{window.addEventListener(mn,Ve,An)}),_t.addEventListener("statechange",()=>{_t.state==="running"&&(Xt.forEach(mn=>{window.removeEventListener(mn,Ve,An)}),le(_t))})})}async function U(){if(y.source instanceof AudioBuffer)return y.source;const _t=Ou();if(typeof y.source!="string")throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let le;try{le=await fetch(y.source)}catch(mn){throw console.error(mn),new Error("Could not fetch '".concat(y.source,"'. Network error logged above."))}let Ve;try{Ve=await le.arrayBuffer()}catch(mn){throw console.error(mn),new Error("Could not read '".concat(y.source,"' as an arrayBuffer."))}(await q).decodeAudioData(Ve,_t.resolve,_t.reject);let An;try{An=await _t.promise}catch(mn){throw console.error(mn),new Error("Could not decode ".concat(y.source," as an audio file."))}return An}const q=T(),oe=U(),[me,De]=await Promise.all([q,oe]),Ke=y.destinationNode||me.destination,Je=me.createGain();return Je.connect(Ke),{audioContext:me,decodedBuffer:De,gainNode:Je,destinationNode:Ke}}var fI=mI("Theatre_SheetObject");function mI(y){return T=>typeof T=="object"&&!!T&&T.type===y}var B5=class{constructor(y,T,U,q,oe){this._project=y,this._sheet=T,this._lengthD=U,this._subUnitsPerUnitD=q,Z(this,"address"),Z(this,"publicApi"),Z(this,"_playbackControllerBox"),Z(this,"_prismOfStatePointer"),Z(this,"_positionD"),Z(this,"_positionFormatterD"),Z(this,"_playableRangeD"),Z(this,"pointer",(0,aI.pointer)({root:this,path:[]})),Z(this,"$$isPointerToPrismProvider",!0),Z(this,"_logger"),Z(this,"closestGridPosition",me=>{const Ke=1/this.subUnitsPerUnit;return parseFloat((Math.round(me/Ke)*Ke).toFixed(3))}),this._logger=y._logger.named("Sheet",T.address.sheetId).named("Instance",T.address.sheetInstanceId),this.address=H(D({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new N5(this),this._playbackControllerBox=new R5.Atom(oe??new O5),this._prismOfStatePointer=(0,ds.prism)(()=>this._playbackControllerBox.prism.getValue().statePointer),this._positionD=(0,ds.prism)(()=>{const me=this._prismOfStatePointer.getValue();return(0,ds.val)(me.position)}),this._positionFormatterD=(0,ds.prism)(()=>{const me=(0,ds.val)(this._subUnitsPerUnitD);return new U5(me)})}pointerToPrism(y){const{path:T}=(0,oI.getPointerParts)(y);if(T.length===0)return(0,ds.prism)(()=>({length:(0,ds.val)(this.pointer.length),playing:(0,ds.val)(this.pointer.playing),position:(0,ds.val)(this.pointer.position)}));if(T.length>1)return(0,ds.prism)(()=>{});const[U]=T;return U==="length"?this._lengthD:U==="position"?this._positionD:U==="playing"?(0,ds.prism)(()=>(0,ds.val)(this._prismOfStatePointer.getValue().playing)):(0,ds.prism)(()=>{})}getKeyframesOfSimpleProp(y){const{path:T,root:U}=(0,oI.getPointerParts)(y);if(!fI(U))throw new Qp("Argument prop must be a pointer to a SheetObject property");const q=(0,ds.val)(this._project.pointers.historic.sheetsById[this._sheet.address.sheetId].sequence.tracksByObject[U.address.objectKey]);if(!q)return[];const{trackData:oe,trackIdByPropPath:me}=q,De=A5(T),Ke=me[De];if(!Ke)return[];const Je=oe[Ke];return Je?Je.keyframes:[]}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(y){let T=y;this.pause(),T>this.length&&(T=this.length);const U=this.length;this._playbackControllerBox.get().gotoPosition(T>U?U:T)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,ds.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,ds.prism)(()=>[0,(0,ds.val)(this._lengthD)])}playDynamicRange(y,T){return this._playbackControllerBox.get().playDynamicRange(y,T)}async play(y,T){const U=this.length,q=y&&y.range?y.range:[0,U],oe=y&&typeof y.iterationCount=="number"?y.iterationCount:1,me=y&&typeof y.rate<"u"?y.rate:1,De=y&&y.direction?y.direction:"normal";return await this._play(oe,[q[0],q[1]],me,De,T)}_play(y,T,U,q,oe){return this._playbackControllerBox.get().play(y,T,U,q,oe)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(y){this.pause();const T=this._playbackControllerBox.get();this._playbackControllerBox.set(y);const U=T.getCurrentPosition();T.destroy(),y.gotoPosition(U)}},U5=class{constructor(y){this._fps=y}formatSubUnitForGrid(y){const T=y%1,U=1/this._fps;return Math.round(T/U)+"f"}formatFullUnitForGrid(y){let T=y,U="";if(T>=di){const oe=Math.floor(T/di);U+=oe+"h",T=T%di}if(T>=sh){const oe=Math.floor(T/sh);U+=oe+"m",T=T%sh}if(T>=Lo){const oe=Math.floor(T/Lo);U+=oe+"s",T=T%Lo}const q=1/this._fps;if(T>=q){const oe=Math.floor(T/q);U+=oe+"f",T=T%q}return U.length===0?"0s":U}formatForPlayhead(y){let T=y,U="";if(T>=di){const oe=Math.floor(T/di);U+=Zp(oe.toString(),2,"0")+"h",T=T%di}if(T>=sh){const oe=Math.floor(T/sh);U+=Zp(oe.toString(),2,"0")+"m",T=T%sh}else U.length>0&&(U+="00m");if(T>=Lo){const oe=Math.floor(T/Lo);U+=Zp(oe.toString(),2,"0")+"s",T=T%Lo}else U+="00s";const q=1/this._fps;if(T>=q){const oe=Math.round(T/q);U+=Zp(oe.toString(),2,"0")+"f",T=T%q}else T/q>.98?(U+=Zp(1 .toString(),2,"0")+"f",T=T%q):U+="00f";return U.length===0?"00s00f":U}formatBasic(y){return y.toFixed(2)+"s"}},Lo=1,sh=Lo*60,di=sh*60,DS={};B(DS,{boolean:()=>BS,compound:()=>Nu,file:()=>rr,image:()=>il,number:()=>$g,rgba:()=>Sn,string:()=>xI,stringLiteral:()=>EI});function gI(y,T){return y.length<=T?y:y.substr(0,T-3)+"..."}var Ne=y=>typeof y=="string"?'string("'.concat(gI(y,10),'")'):typeof y=="number"?"number(".concat(gI(String(y),10),")"):y===null?"null":y===void 0?"undefined":typeof y=="boolean"?String(y):Array.isArray(y)?"array":typeof y=="object"?"object":"unknown",vI=Ne;function z5(y,{removeAlphaIfOpaque:T=!1}={}){const U=(y.a*255|256).toString(16).slice(1),q=(y.r*255|256).toString(16).slice(1)+(y.g*255|256).toString(16).slice(1)+(y.b*255|256).toString(16).slice(1)+(T&&U==="ff"?"":U);return"#".concat(q)}function OS(y){return H(D({},y),{toString(){return z5(this,{removeAlphaIfOpaque:!0})}})}function Lu(y){return Object.fromEntries(Object.entries(y).map(([T,U])=>[T,Ax(U,0,1)]))}function V5(y){function T(U){return U>=.0031308?1.055*U**(1/2.4)-.055:12.92*U}return Lu({r:T(y.r),g:T(y.g),b:T(y.b),a:y.a})}function Yn(y){function T(U){return U>=.04045?((U+.055)/(1+.055))**2.4:U/12.92}return{r:T(y.r),g:T(y.g),b:T(y.b),a:y.a}}function yI(y){let T=.4122214708*y.r+.5363325363*y.g+.0514459929*y.b,U=.2119034982*y.r+.6806995451*y.g+.1073969566*y.b,q=.0883024619*y.r+.2817188376*y.g+.6299787005*y.b,oe=Math.cbrt(T),me=Math.cbrt(U),De=Math.cbrt(q);return{L:.2104542553*oe+.793617785*me-.0040720468*De,a:1.9779984951*oe-2.428592205*me+.4505937099*De,b:.0259040371*oe+.7827717662*me-.808675766*De,alpha:y.a}}function ab(y){let T=y.L+.3963377774*y.a+.2158037573*y.b,U=y.L-.1055613458*y.a-.0638541728*y.b,q=y.L-.0894841775*y.a-1.291485548*y.b,oe=T*T*T,me=U*U*U,De=q*q*q;return{r:4.0767416621*oe-3.3077115913*me+.2309699292*De,g:-1.2684380046*oe+2.6097574011*me-.3413193965*De,b:-.0041960863*oe-.7034186147*me+1.707614701*De,a:y.alpha}}var Ba=Symbol("TheatrePropType_Basic");function LS(y){return typeof y=="object"&&!!y&&y[Ba]==="TheatrePropType"}function Gc(y){if(typeof y=="number")return $g(y);if(typeof y=="boolean")return BS(y);if(typeof y=="string")return xI(y);if(typeof y=="object"&&y){if(LS(y))return y;if(CB(y))return Nu(y);throw new Qp("This value is not a valid prop type: ".concat(vI(y)))}else throw new Qp("This value is not a valid prop type: ".concat(vI(y)))}function bI(y){const T={};for(const U of Object.keys(y)){const q=y[U];LS(q)?T[U]=q:T[U]=Gc(q)}return T}var Nu=(y,T={})=>{const U=bI(y),q=new WeakMap;return{type:"compound",props:U,valueType:null,[Ba]:"TheatrePropType",label:T.label,default:p5(U,me=>me.default),deserializeAndSanitize:me=>{if(typeof me!="object"||!me)return;if(q.has(me))return q.get(me);const De={};let Ke=!1;for(const[Je,_t]of Object.entries(U))if(Object.prototype.hasOwnProperty.call(me,Je)){const le=_t.deserializeAndSanitize(me[Je]);le!=null&&(Ke=!0,De[Je]=le)}if(q.set(me,De),Ke)return De}}},rr=(y,T={})=>{const U=(q,oe,me)=>{var De;return{type:"file",id:((De=T.interpolate)!=null?De:nf)(q.id,oe.id,me)}};return{type:"file",default:{type:"file",id:y},valueType:null,[Ba]:"TheatrePropType",label:T.label,interpolate:U,deserializeAndSanitize:NS}},NS=y=>{if(!y)return;let T=!0;if(typeof y.id!="string"&&![null,void 0].includes(y.id)&&(T=!1),y.type!=="file"&&(T=!1),!!T)return y},il=(y,T={})=>{const U=(q,oe,me)=>{var De;return{type:"image",id:((De=T.interpolate)!=null?De:nf)(q.id,oe.id,me)}};return{type:"image",default:{type:"image",id:y},valueType:null,[Ba]:"TheatrePropType",label:T.label,interpolate:U,deserializeAndSanitize:tf}},tf=y=>{if(!y)return;let T=!0;if(typeof y.id!="string"&&![null,void 0].includes(y.id)&&(T=!1),y.type!=="image"&&(T=!1),!!T)return y},$g=(y,T={})=>{var U;return H(D({type:"number",valueType:0,default:y,[Ba]:"TheatrePropType"},T||{}),{label:T.label,nudgeFn:(U=T.nudgeFn)!=null?U:W5,nudgeMultiplier:typeof T.nudgeMultiplier=="number"?T.nudgeMultiplier:void 0,interpolate:FS,deserializeAndSanitize:_I(T.range)})},_I=y=>y?T=>{if(typeof T=="number"&&isFinite(T))return Ax(T,y[0],y[1])}:wI,wI=y=>typeof y=="number"&&isFinite(y)?y:void 0,FS=(y,T,U)=>y+U*(T-y),Sn=(y={r:0,g:0,b:0,a:1},T={})=>{const U={};for(const q of["r","g","b","a"])U[q]=Math.min(Math.max(y[q],0),1);return{type:"rgba",valueType:null,default:OS(U),[Ba]:"TheatrePropType",label:T.label,interpolate:H5,deserializeAndSanitize:j5}},j5=y=>{if(!y)return;let T=!0;for(const q of["r","g","b","a"])(!Object.prototype.hasOwnProperty.call(y,q)||typeof y[q]!="number")&&(T=!1);if(!T)return;const U={};for(const q of["r","g","b","a"])U[q]=Math.min(Math.max(y[q],0),1);return OS(U)},H5=(y,T,U)=>{const q=yI(Yn(y)),oe=yI(Yn(T)),me={L:(1-U)*q.L+U*oe.L,a:(1-U)*q.a+U*oe.a,b:(1-U)*q.b+U*oe.b,alpha:(1-U)*q.alpha+U*oe.alpha},De=V5(ab(me));return OS(De)},BS=(y,T={})=>{var U;return{type:"boolean",default:y,valueType:null,[Ba]:"TheatrePropType",label:T.label,interpolate:(U=T.interpolate)!=null?U:nf,deserializeAndSanitize:G5}},G5=y=>typeof y=="boolean"?y:void 0;function nf(y){return y}var xI=(y,T={})=>{var U;return{type:"string",default:y,valueType:null,[Ba]:"TheatrePropType",label:T.label,interpolate:(U=T.interpolate)!=null?U:nf,deserializeAndSanitize:SI}};function SI(y){return typeof y=="string"?y:void 0}function EI(y,T,U={}){var q,oe;return{type:"stringLiteral",default:y,valuesAndLabels:D({},T),[Ba]:"TheatrePropType",valueType:null,as:(q=U.as)!=null?q:"menu",label:U.label,interpolate:(oe=U.interpolate)!=null?oe:nf,deserializeAndSanitize(me){if(typeof me=="string"&&Object.prototype.hasOwnProperty.call(T,me))return me}}}var W5=({config:y,deltaX:T,deltaFraction:U,magnitude:q})=>{var oe;const{range:me}=y;return!y.nudgeMultiplier&&me&&!me.includes(1/0)&&!me.includes(-1/0)?U*(me[1]-me[0])*q:T*q*((oe=y.nudgeMultiplier)!=null?oe:1)},$5=y=>y.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");function lb(y,T){return $5(y)}P(pe());var K5=class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(y){st(this,y)}object(y,T,U){const q=Te(this),oe=lb(y),me=q.getObject(oe),De=null,Ke=U==null?void 0:U.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(me)return Ke&&me.template._temp_setActions(Ke),me.publicApi;{const Je=Nu(T);return q.createObject(oe,De,Je,Ke).publicApi}}get sequence(){return Te(this).getSequence().publicApi}get project(){return Te(this).project.publicApi}get address(){return D({},Te(this).address)}detachObject(y){const T=Te(this),U=lb(y);if(!T.getObject(U)){Jp.warning(`Couldn't delete object "`.concat(U,'"'),'There is no object with key "'.concat(U,`".

To fix this, make sure you are calling \`sheet.deleteObject("`).concat(U,'")` with the correct key.')),console.warn('Object key "'.concat(U,'" does not exist.'));return}T.deleteObject(U)}},rf=Nt,CI=class{constructor(y,T){this.template=y,this.instanceId=T,Z(this,"_objects",new rf.Atom({})),Z(this,"_sequence"),Z(this,"address"),Z(this,"publicApi"),Z(this,"project"),Z(this,"objectsP",this._objects.pointer),Z(this,"type","Theatre_Sheet"),Z(this,"_logger"),this._logger=y.project._logger.named("Sheet",T),this._logger._trace("creating sheet"),this.project=y.project,this.address=H(D({},y.address),{sheetInstanceId:this.instanceId}),this.publicApi=new K5(this)}createObject(y,T,U,q={}){const me=this.template.getObjectTemplate(y,T,U,q).createInstance(this,T,U);return this._objects.setByPointer(De=>De[y],me),me}getObject(y){return this._objects.get()[y]}deleteObject(y){this._objects.reduce(T=>{const U=D({},T);return delete U[y],U})}getSequence(){if(!this._sequence){const y=(0,rf.prism)(()=>{const U=(0,rf.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length);return US(U)}),T=(0,rf.prism)(()=>{const U=(0,rf.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit);return X5(U)});this._sequence=new B5(this.template.project,this,y,T)}return this._sequence}},US=y=>typeof y=="number"&&isFinite(y)&&y>0?y:10,X5=y=>typeof y=="number"&&bS(y)&&y>=1&&y<=1e3?y:30,q5=class{constructor(y,T){this.project=y,Z(this,"type","Theatre_SheetTemplate"),Z(this,"address"),Z(this,"_instances",new kS.Atom({})),Z(this,"instancesP",this._instances.pointer),Z(this,"_objectTemplates",new kS.Atom({})),Z(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=H(D({},y.address),{sheetId:T})}getInstance(y){let T=this._instances.get()[y];return T||(T=new CI(this,y),this._instances.setByPointer(U=>U[y],T)),T}getObjectTemplate(y,T,U,q){let oe=this._objectTemplates.get()[y];return oe||(oe=new M5(this,y,T,U,q),this._objectTemplates.setByPointer(me=>me[y],oe)),oe}},zS=Nt,PI=Nt,sl=y=>new Promise(T=>setTimeout(T,y)),Kg=sl;function aa(y){for(var T=arguments.length,U=Array(T>1?T-1:0),q=1;q<T;q++)U[q-1]=arguments[q];throw Error("[Immer] minified error nr: "+y+(U.length?" "+U.map(function(oe){return"'"+oe+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Fu(y){return!!y&&!!y[co]}function lo(y){return!!y&&(function(T){if(!T||typeof T!="object")return!1;var U=Object.getPrototypeOf(T);if(U===null)return!0;var q=Object.hasOwnProperty.call(U,"constructor")&&U.constructor;return q===Object||typeof q=="function"&&Function.toString.call(q)===RI}(y)||Array.isArray(y)||!!y[vb]||!!y.constructor[vb]||Bu(y)||uo(y))}function VS(y){return Fu(y)||aa(23,y),y[co].t}function sf(y,T,U){U===void 0&&(U=!1),oh(y)===0?(U?Object.keys:yb)(y).forEach(function(q){U&&typeof q=="symbol"||T(q,y[q],y)}):y.forEach(function(q,oe){return T(oe,q,y)})}function oh(y){var T=y[co];return T?T.i>3?T.i-4:T.i:Array.isArray(y)?1:Bu(y)?2:uo(y)?3:0}function Xg(y,T){return oh(y)===2?y.has(T):Object.prototype.hasOwnProperty.call(y,T)}function TI(y,T){return oh(y)===2?y.get(T):y[T]}function jS(y,T,U){var q=oh(y);q===2?y.set(T,U):q===3?(y.delete(T),y.add(U)):y[T]=U}function MI(y,T){return y===T?y!==0||1/y==1/T:y!=y&&T!=T}function Bu(y){return AI&&y instanceof Map}function uo(y){return II&&y instanceof Set}function Uu(y){return y.o||y.t}function of(y){if(Array.isArray(y))return Array.prototype.slice.call(y);var T=KS(y);delete T[co];for(var U=yb(T),q=0;q<U.length;q++){var oe=U[q],me=T[oe];me.writable===!1&&(me.writable=!0,me.configurable=!0),(me.get||me.set)&&(T[oe]={configurable:!0,writable:!0,enumerable:me.enumerable,value:y[oe]})}return Object.create(Object.getPrototypeOf(y),T)}function HS(y,T){return T===void 0&&(T=!1),ub(y)||Fu(y)||!lo(y)||(oh(y)>1&&(y.set=y.add=y.clear=y.delete=kI),Object.freeze(y),T&&sf(y,function(U,q){return HS(q,!0)},!0)),y}function kI(){aa(2)}function ub(y){return y==null||typeof y!="object"||Object.isFrozen(y)}function jl(y){var T=DI[y];return T||aa(18,y),T}function cb(){return uf}function wi(y,T){T&&(jl("Patches"),y.u=[],y.s=[],y.v=T)}function qg(y){db(y),y.p.forEach(pb),y.p=null}function db(y){y===uf&&(uf=y.l)}function hb(y){return uf={p:[],l:uf,h:y,m:!0,_:0}}function pb(y){var T=y[co];T.i===0||T.i===1?T.j():T.O=!0}function ah(y,T){T._=T.p.length;var U=T.p[0],q=y!==void 0&&y!==U;return T.h.g||jl("ES5").S(T,y,q),q?(U[co].P&&(qg(T),aa(4)),lo(y)&&(y=Ua(T,y),T.l||lh(T,y)),T.u&&jl("Patches").M(U[co],y,T.u,T.s)):y=Ua(T,U,[]),qg(T),T.u&&T.v(T.u,T.s),y!==Yg?y:void 0}function Ua(y,T,U){if(ub(T))return T;var q=T[co];if(!q)return sf(T,function(me,De){return Hl(y,q,T,me,De,U)},!0),T;if(q.A!==y)return T;if(!q.P)return lh(y,q.t,!0),q.t;if(!q.I){q.I=!0,q.A._--;var oe=q.i===4||q.i===5?q.o=of(q.k):q.o;sf(q.i===3?new Set(oe):oe,function(me,De){return Hl(y,q,oe,me,De,U)}),lh(y,oe,!1),U&&y.u&&jl("Patches").R(q,U,y.u,y.s)}return q.o}function Hl(y,T,U,q,oe,me){if(Fu(oe)){var De=Ua(y,oe,me&&T&&T.i!==3&&!Xg(T.D,q)?me.concat(q):void 0);if(jS(U,q,De),!Fu(De))return;y.m=!1}if(lo(oe)&&!ub(oe)){if(!y.h.F&&y._<1)return;Ua(y,oe),T&&T.A.l||lh(y,oe)}}function lh(y,T,U){U===void 0&&(U=!1),y.h.F&&y.m&&HS(T,U)}function fb(y,T){var U=y[co];return(U?Uu(U):y)[T]}function GS(y,T){if(T in y)for(var U=Object.getPrototypeOf(y);U;){var q=Object.getOwnPropertyDescriptor(U,T);if(q)return q;U=Object.getPrototypeOf(U)}}function mb(y){y.P||(y.P=!0,y.l&&mb(y.l))}function uh(y){y.o||(y.o=of(y.t))}function ch(y,T,U){var q=Bu(T)?jl("MapSet").N(T,U):uo(T)?jl("MapSet").T(T,U):y.g?function(oe,me){var De=Array.isArray(oe),Ke={i:De?1:0,A:me?me.A:cb(),P:!1,I:!1,D:{},l:me,t:oe,k:null,o:null,j:null,C:!1},Je=Ke,_t=zu;De&&(Je=[Ke],_t=Zg);var le=Proxy.revocable(Je,_t),Ve=le.revoke,Xt=le.proxy;return Ke.k=Xt,Ke.j=Ve,Xt}(T,U):jl("ES5").J(T,U);return(U?U.A:cb()).p.push(q),q}function af(y){return Fu(y)||aa(22,y),function T(U){if(!lo(U))return U;var q,oe=U[co],me=oh(U);if(oe){if(!oe.P&&(oe.i<4||!jl("ES5").K(oe)))return oe.t;oe.I=!0,q=lf(U,me),oe.I=!1}else q=lf(U,me);return sf(q,function(De,Ke){oe&&TI(oe.t,De)===Ke||jS(q,De,T(Ke))}),me===3?new Set(q):q}(y)}function lf(y,T){switch(T){case 2:return new Map(y);case 3:return Array.from(y)}return of(y)}var WS,uf,gb=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",AI=typeof Map<"u",II=typeof Set<"u",$S=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Yg=gb?Symbol.for("immer-nothing"):((WS={})["immer-nothing"]=!0,WS),vb=gb?Symbol.for("immer-draftable"):"__$immer_draftable",co=gb?Symbol.for("immer-state"):"__$immer_state",RI=""+Object.prototype.constructor,yb=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:Object.getOwnPropertyNames,KS=Object.getOwnPropertyDescriptors||function(y){var T={};return yb(y).forEach(function(U){T[U]=Object.getOwnPropertyDescriptor(y,U)}),T},DI={},zu={get:function(y,T){if(T===co)return y;var U=Uu(y);if(!Xg(U,T))return function(oe,me,De){var Ke,Je=GS(me,De);return Je?"value"in Je?Je.value:(Ke=Je.get)===null||Ke===void 0?void 0:Ke.call(oe.k):void 0}(y,U,T);var q=U[T];return y.I||!lo(q)?q:q===fb(y.t,T)?(uh(y),y.o[T]=ch(y.A.h,q,y)):q},has:function(y,T){return T in Uu(y)},ownKeys:function(y){return Reflect.ownKeys(Uu(y))},set:function(y,T,U){var q=GS(Uu(y),T);if(q!=null&&q.set)return q.set.call(y.k,U),!0;if(!y.P){var oe=fb(Uu(y),T),me=oe==null?void 0:oe[co];if(me&&me.t===U)return y.o[T]=U,y.D[T]=!1,!0;if(MI(U,oe)&&(U!==void 0||Xg(y.t,T)))return!0;uh(y),mb(y)}return y.o[T]===U&&typeof U!="number"&&(U!==void 0||T in y.o)||(y.o[T]=U,y.D[T]=!0,!0)},deleteProperty:function(y,T){return fb(y.t,T)!==void 0||T in y.t?(y.D[T]=!1,uh(y),mb(y)):delete y.D[T],y.o&&delete y.o[T],!0},getOwnPropertyDescriptor:function(y,T){var U=Uu(y),q=Reflect.getOwnPropertyDescriptor(U,T);return q&&{writable:!0,configurable:y.i!==1||T!=="length",enumerable:q.enumerable,value:U[T]}},defineProperty:function(){aa(11)},getPrototypeOf:function(y){return Object.getPrototypeOf(y.t)},setPrototypeOf:function(){aa(12)}},Zg={};sf(zu,function(y,T){Zg[y]=function(){return arguments[0]=arguments[0][0],T.apply(this,arguments)}}),Zg.deleteProperty=function(y,T){return zu.deleteProperty.call(this,y[0],T)},Zg.set=function(y,T,U){return zu.set.call(this,y[0],T,U,y[0])};var XS=function(){function y(U){var q=this;this.g=$S,this.F=!0,this.produce=function(oe,me,De){if(typeof oe=="function"&&typeof me!="function"){var Ke=me;me=oe;var Je=q;return function(An){var mn=this;An===void 0&&(An=Ke);for(var or=arguments.length,ar=Array(or>1?or-1:0),Jn=1;Jn<or;Jn++)ar[Jn-1]=arguments[Jn];return Je.produce(An,function(Ir){var Ks;return(Ks=me).call.apply(Ks,[mn,Ir].concat(ar))})}}var _t;if(typeof me!="function"&&aa(6),De!==void 0&&typeof De!="function"&&aa(7),lo(oe)){var le=hb(q),Ve=ch(q,oe,void 0),Xt=!0;try{_t=me(Ve),Xt=!1}finally{Xt?qg(le):db(le)}return typeof Promise<"u"&&_t instanceof Promise?_t.then(function(An){return wi(le,De),ah(An,le)},function(An){throw qg(le),An}):(wi(le,De),ah(_t,le))}if(!oe||typeof oe!="object")return(_t=me(oe))===Yg?void 0:(_t===void 0&&(_t=oe),q.F&&HS(_t,!0),_t);aa(21,oe)},this.produceWithPatches=function(oe,me){return typeof oe=="function"?function(Je){for(var _t=arguments.length,le=Array(_t>1?_t-1:0),Ve=1;Ve<_t;Ve++)le[Ve-1]=arguments[Ve];return q.produceWithPatches(Je,function(Xt){return oe.apply(void 0,[Xt].concat(le))})}:[q.produce(oe,me,function(Je,_t){De=Je,Ke=_t}),De,Ke];var De,Ke},typeof(U==null?void 0:U.useProxies)=="boolean"&&this.setUseProxies(U.useProxies),typeof(U==null?void 0:U.autoFreeze)=="boolean"&&this.setAutoFreeze(U.autoFreeze)}var T=y.prototype;return T.createDraft=function(U){lo(U)||aa(8),Fu(U)&&(U=af(U));var q=hb(this),oe=ch(this,U,void 0);return oe[co].C=!0,db(q),oe},T.finishDraft=function(U,q){var oe=U&&U[co],me=oe.A;return wi(me,q),ah(void 0,me)},T.setAutoFreeze=function(U){this.F=U},T.setUseProxies=function(U){U&&!$S&&aa(20),this.g=U},T.applyPatches=function(U,q){var oe;for(oe=q.length-1;oe>=0;oe--){var me=q[oe];if(me.path.length===0&&me.op==="replace"){U=me.value;break}}var De=jl("Patches").$;return Fu(U)?De(U,q):this.produce(U,function(Ke){return De(Ke,q.slice(oe+1))})},y}(),hs=new XS;hs.produce,hs.produceWithPatches.bind(hs),hs.setAutoFreeze.bind(hs),hs.setUseProxies.bind(hs),hs.applyPatches.bind(hs),hs.createDraft.bind(hs),hs.finishDraft.bind(hs);var qS={currentProjectStateDefinitionVersion:"0.4.0"},bb=qS;async function OI(y,T,U){await Kg(0),y.transaction(({drafts:q})=>{var oe;const me=T.address.projectId;q.ephemeral.coreByProject[me]={lastExportedObject:null,loadingState:{type:"loading"}},q.ahistoric.coreByProject[me]={ahistoricStuff:""};function De(){q.ephemeral.coreByProject[me].loadingState={type:"loaded"},q.historic.coreByProject[me]={sheetsById:{},definitionVersion:bb.currentProjectStateDefinitionVersion,revisionHistory:[]}}function Ke(Ve){q.ephemeral.coreByProject[me].loadingState={type:"loaded"},q.historic.coreByProject[me]=Ve}function Je(){q.ephemeral.coreByProject[me].loadingState={type:"loaded"}}function _t(Ve){q.ephemeral.coreByProject[me].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:Ve}}const le=(oe=VS(q.historic))==null?void 0:oe.coreByProject[T.address.projectId];le?U&&le.revisionHistory.indexOf(U.revisionHistory[0])==-1?_t(U):Je():U?Ke(U):De()})}function YS(){}function ZS(y){var T,U;const q=(T=y==null?void 0:y.logging)!=null&&T.internal?(U=y.logging.min)!=null?U:256:1/0,oe=q<=128,me=q<=512,De=Q2(void 0,{_debug:oe?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):YS,_error:me?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):YS});if(y){const{logger:Ke,logging:Je}=y;Ke&&De.configureLogger(Ke),Je?De.configureLogging(Je):De.configureLogging({dev:!1})}return De.getLogger().named("Theatre")}var _b=class{constructor(y,T={},U){this.config=T,this.publicApi=U,Z(this,"pointers"),Z(this,"_pointerProxies"),Z(this,"address"),Z(this,"_studioReadyDeferred"),Z(this,"_assetStorageReadyDeferred"),Z(this,"_readyPromise"),Z(this,"_sheetTemplates",new PI.Atom({})),Z(this,"sheetTemplatesP",this._sheetTemplates.pointer),Z(this,"_studio"),Z(this,"assetStorage"),Z(this,"type","Theatre_Project"),Z(this,"_logger");var q;this._logger=ZS({logging:{dev:!0}}).named("Project",y),this._logger.traceDev("creating project"),this.address={projectId:y};const oe=new PI.Atom({ahistoric:{ahistoricStuff:""},historic:(q=T.state)!=null?q:{sheetsById:{},definitionVersion:bb.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=Ou(),this.assetStorage={getAssetUrl:me=>{var De;return"".concat((De=T.assets)==null?void 0:De.baseUrl,"/").concat(me)},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new zS.PointerProxy(oe.pointer.historic),ahistoric:new zS.PointerProxy(oe.pointer.ahistoric),ephemeral:new zS.PointerProxy(oe.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},ue.add(y,this),this._studioReadyDeferred=Ou(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then(()=>{}),T.state?setTimeout(()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))},0):typeof window>"u"?console.error('Argument config.state in Theatre.getProject("'.concat(y,'", config) is empty. ')+"You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state"):setTimeout(()=>{if(!this._studio)throw new Error('Argument config.state in Theatre.getProject("'.concat(y,'", config) is empty. This is fine ')+"while you are using @theatre/core along with @theatre/studio. But since @theatre/studio "+'is not loaded, the state of project "'.concat(y,`" will be empty.

`)+`To fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state
`)},1e3)}attachToStudio(y){if(this._studio){if(this._studio!==y)throw new Error("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));console.warn("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));return}this._studio=y,y.initialized.then(async()=>{var T;await OI(y,this,this.config.state),this._pointerProxies.historic.setPointer(y.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(y.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(y.atomP.ephemeral.coreByProject[this.address.projectId]),await y.createAssetStorage(this,(T=this.config.assets)==null?void 0:T.baseUrl).then(U=>{this.assetStorage=U,this._assetStorageReadyDeferred.resolve(void 0)}),this._studioReadyDeferred.resolve(void 0)}).catch(T=>{throw console.error(T),T})}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return this._studioReadyDeferred.status==="resolved"&&this._assetStorageReadyDeferred.status==="resolved"}getOrCreateSheet(y,T="default"){let U=this._sheetTemplates.get()[y];return U||(U=new q5(this,y),this._sheetTemplates.reduce(q=>H(D({},q),{[y]:U}))),U.getInstance(T)}},wb=class{get type(){return"Theatre_Project_PublicAPI"}constructor(y,T={}){st(this,new _b(y,T,this))}get ready(){return Te(this).ready}get isReady(){return Te(this).isReady()}get address(){return D({},Te(this).address)}getAssetUrl(y){if(!this.isReady){console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.");return}return y.id?Te(this).assetStorage.getAssetUrl(y.id):void 0}sheet(y,T="default"){const U=lb(y);return Te(this).getOrCreateSheet(U,T).publicApi}};P(pe());var QS=Nt,cf=Nt;function JS(y,T={}){const U=ue.get(y);if(U)return U.publicApi;const oe=ZS().named("Project",y);return T.state?(NI(y,T.state),oe._debug("deep validated config.state on disk")):oe._debug("no config.state"),new wb(y,T)}var LI=(y,T)=>{if(Array.isArray(T)||T==null||T.definitionVersion!==bb.currentProjectStateDefinitionVersion)throw new Qp("Error validating conf.state in Theatre.getProject(".concat(JSON.stringify(y),", conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state"))},NI=(y,T)=>{LI(y,T)};function xb(y,T,U){const q=U?Te(U).ticker:RS();if((0,QS.isPointer)(y))return(0,cf.pointerToPrism)(y).onChange(q,T,!0);if((0,cf.isPrism)(y))return y.onChange(q,T,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function eE(y){if((0,QS.isPointer)(y))return(0,cf.pointerToPrism)(y).getValue();throw new Error("Called val(p) where p is not a pointer.")}var tE=class{constructor(){Z(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.7.0"}getBitsForStudio(y,T){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=y;const U={projectsP:ue.atom.pointer.projects,privateAPI:Te,coreExports:ne,getCoreRafDriver:IS};T(U)}};nE();function nE(){if(typeof window>"u")return;const y=window[AS];if(typeof y<"u")throw typeof y=="object"&&y&&typeof y.version=="string"?new Error(`It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(AS," seems to be already set by a module other than @theatre/core."));const T=new tE;window[AS]=T;const U=window[cI];U&&U!==null&&U.type==="Theatre_StudioBundle"&&U.registerCoreBundle(T)}/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)
	*/})(GN,GN.exports);var WN=GN.exports;function zT(t){return t.substring(0,1).toUpperCase()+t.substring(1)}function iHe(){return Math.round(Math.random()*1e6).toString()}function sHe(t){return t.r!==void 0&&t.g!==void 0&&t.b!==void 0}function oHe(t){const e=Math.round(t.r*255),n=Math.round(t.g*255),r=Math.round(t.b*255),i=m=>{const v=m.toString(16);return v.length===1?"0"+v:v},o=i(e),u=i(n),h=i(r);return"#"+o+u+h}function VG(t,e=1){return Number(t.toFixed(e))}let VW=0;const aHe=()=>{VW=0},BF=t=>{if(!t)return;let e=t.name.replace(" ","");e.length===0&&(e=`obj_${VW}`,VW++),t.parent!==null&&(e=`${t.parent.uuid}.${e}`),t.uuid=e,t.children.forEach(n=>{BF(n)})},lHe=t=>{t&&(Array.isArray(t)?t.forEach(e=>e.dispose()):t.dispose())},$N=t=>{var e;if(t){for(;t.children.length>0;){const n=t.children[0];n instanceof z8e?(n.pause(),n.parent&&n.parent.remove(n)):$N(n)}if(t.parent&&t.parent.remove(t),t.isMesh){const n=t;(e=n.geometry)==null||e.dispose(),lHe(n.material)}t.dispose!==void 0&&t.dispose()}},gEe=()=>{};let Xh;const b0=class b0 extends FF{constructor(){super(...arguments);yr(this,"project");yr(this,"sheets",new Map);yr(this,"sheetObjects",new Map);yr(this,"sheetObjectCBs",new Map);yr(this,"sheetObjectUnsubscribe",new Map)}init(n,r){return this.project=WN.getProject(n,r),this.project.ready}dispose(){this.project=void 0,this.sheets=new Map,this.sheetObjects=new Map,this.sheetObjectCBs=new Map,this.sheetObjectUnsubscribe=new Map}sheet(n){var i;if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}let r=this.sheets.get(n);return r!==void 0||(r=(i=this.project)==null?void 0:i.sheet(n),this.sheets.set(n,r)),r}playSheet(n,r){var i;(i=this.sheet(n))==null||i.sequence.play(r),this.app.send({event:"playSheet",target:"editor",data:{sheet:n,value:r}})}pauseSheet(n){var r;(r=this.sheet(n))==null||r.sequence.pause(),this.app.send({event:"pauseSheet",target:"editor",data:{sheet:n}})}clearSheetObjects(n){this.sheetObjects.forEach((r,i)=>{i.search(`${n}_`)>-1&&this.unsubscribe(r)})}sheetObject(n,r,i,o){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const u=this.sheet(n);if(u===void 0)return;const h=`${n}_${r}`;let m=this.sheetObjects.get(h);m!==void 0?m=u.object(r,{...i,...m.value},{reconfigure:!0}):m=u.object(r,i),this.sheetObjects.set(h,m),this.sheetObjectCBs.set(h,o!==void 0?o:gEe);const v=m.onValuesChange(x=>{if(this.app.editor){for(const M in x){const D=x[M];typeof D=="object"&&sHe(D)&&(x[M]={r:D.r,g:D.g,b:D.b,a:D.a})}this.app.send({event:"updateSheetObject",target:"app",data:{sheet:n,sheetObject:h,values:x}})}const E=this.sheetObjectCBs.get(h);E!==void 0&&E(x)});return this.sheetObjectUnsubscribe.set(h,v),m}unsubscribe(n){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const r=n.address.sheetId,i=n.address.objectKey,o=this.sheets.get(r);o==null||o.detachObject(i);const u=`${r}_${i}`,h=this.sheetObjectUnsubscribe.get(u);h!==void 0&&(this.sheetObjects.delete(u),this.sheetObjectCBs.delete(u),this.sheetObjectUnsubscribe.delete(u),h())}handleApp(n){let r;switch(n.event){case"setSheet":r=this.sheets.get(n.data.sheet),r!==void 0&&(Xh=r,vw.setSelection([r]));break;case"setSheetObject":r=this.sheetObjects.get(`${n.data.sheet}_${n.data.key}`),r!==void 0&&vw.setSelection([r]);break;case"updateSheetObject":r=this.sheets.get(n.data.sheet),r!==void 0&&r.sequence.pause(),r=this.sheetObjectCBs.get(n.data.sheetObject),r!==void 0&&r(n.data.values);break;case"updateTimeline":r=this.sheets.get(n.data.sheet),Xh!==void 0&&(Xh.sequence.position=n.data.position);break}}handleEditor(n){var r,i;if(this.app.editor)switch(n.event){case"playSheet":(r=this.sheet(n.data.sheet))==null||r.sequence.play(n.data.value);break;case"pauseSheet":(i=this.sheet(n.data.sheet))==null||i.sequence.pause();break}}handleEditorApp(){if(this.app.editor){vw.ui.restore(),vw.onSelectionChange(o=>{o.length<1||o.forEach(u=>{let h=u.address.sheetId,m="setSheet",v={};switch(u.type){case"Theatre_Sheet_PublicAPI":m="setSheet",v={sheet:u.address.sheetId},Xh=this.sheets.get(u.address.sheetId);break;case"Theatre_SheetObject_PublicAPI":m="setSheetObject",h+=`_${u.address.objectKey}`,v={id:h,sheet:u.address.sheetId,key:u.address.objectKey},Xh=this.sheets.get(u.address.sheetId);break}this.app.send({event:m,target:"app",data:v})})});let n=-1;const r=()=>{if(b0.getRafDriver().tick(performance.now()),Xh!==void 0&&n!==Xh.sequence.position){n=Xh.sequence.position;const o=Xh;this.app.send({event:"updateTimeline",target:"app",data:{position:n,sheet:o.address.sheetId}})}},i=()=>{r(),requestAnimationFrame(i)};r(),i()}else vw.ui.hide()}static getRafDriver(){return b0.rafDriver||(b0.rafDriver=WN.createRafDriver()),b0.rafDriver}};yr(b0,"rafDriver",null);let VT=b0;function uHe(t){if(t.name==="cameras")return"camera";if(t.name==="interactive")return"interactive";if(t.name==="lights")return"light";if(t.name==="ui")return"ui";if(t.name==="utils")return"utils";const e=t.type;return e.search("Helper")>-1?"icon_utils":e.search("Camera")>-1?"camera":e.search("Light")>-1?"light":"obj3D"}function vEe(t){const e={name:t.name,type:t.type,uuid:t.uuid,children:[]};return t.children.forEach(n=>{e.children.push(vEe(n))}),e}function cHe(t){const e={};for(const n in t){const r=t[n].value;e[n]={value:r},r===null?e[n].value={src:""}:r.isTexture&&(e[n].value={src:r.image.src})}return e}function dHe(t){switch(t){case"blendSrcAlpha":case"blendDstAlpha":case"blendEquationAlpha":case"clippingPlanes":case"shadowSide":case"precision":return!0}return!1}function uw(t){const e={};for(const n in t){if(n.substring(0,1)==="_"||n.substring(0,2)==="is"||dHe(n))continue;const r=typeof t[n],i=t[n];switch(r){case"boolean":case"number":case"string":e[n]=i;break;case"object":if(i!==null)if(e[n]=i,i.isTexture)if(i instanceof Yi){const o=i.source.toJSON();e[n]={src:o.url}}else i instanceof DF&&(console.log("env map"),console.log(i.source.data),console.log(i.source.toJSON()),e[n]={src:""});else n==="uniforms"&&(e[n]=cHe(e[n]));else e[n]={src:""};break}}return e}function jG(t){t.updateMatrix();const e={name:t.name,type:t.type,uuid:t.uuid,visible:t.visible,matrix:t.matrix.elements,animations:[],material:void 0,perspectiveCameraInfo:void 0,orthographicCameraInfo:void 0,lightInfo:void 0};t.animations.forEach(r=>{e.animations.push({name:r.name,duration:r.duration,blendMode:r.blendMode})});const n=t.type.toLowerCase();if(n.search("mesh")>-1){const r=t;if(Array.isArray(r.material)){const i=[];r.material.forEach(o=>{i.push(uw(o))}),e.material=i}else e.material=uw(r.material)}else if(n.search("points")>-1){const r=t;if(Array.isArray(r.material)){const i=[];r.material.forEach(o=>{i.push(uw(o))}),e.material=i}else e.material=uw(r.material)}else if(n.search("line")>-1){const r=t;if(Array.isArray(r.material)){const i=[];r.material.forEach(o=>{i.push(uw(o))}),e.material=i}else e.material=uw(r.material)}else n.search("camera")>-1?t.type==="PerspectiveCamera"?e.perspectiveCameraInfo={fov:t.fov,zoom:t.zoom,near:t.near,far:t.far,focus:t.focus,aspect:t.aspect,filmGauge:t.filmGauge,filmOffset:t.filmOffset}:t.type==="OrthographicCamera"&&(e.orthographicCameraInfo={zoom:t.zoom,near:t.near,far:t.far,left:t.left,right:t.right,top:t.top,bottom:t.bottom}):n.search("light")>-1&&(e.lightInfo={color:t.color,intensity:t.intensity,decay:t.decay,distance:t.distance,angle:t.angle,penumbra:t.penumbra,groundColor:t.groundColor});return e}function hHe(t,e){const n=e.split(".");switch(n.length){case 1:return t[n[0]];case 2:return t[n[0]][n[1]];case 3:return t[n[0]][n[1]][n[2]];case 4:return t[n[0]][n[1]][n[2]][n[3]];case 5:return t[n[0]][n[1]][n[2]][n[3]][n[4]];case 6:return t[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]}}function Us(t,e,n){const r=e.split(".");switch(r.length){case 1:t[r[0]]=n;break;case 2:t[r[0]][r[1]]=n;break;case 3:t[r[0]][r[1]][r[2]]=n;break;case 4:t[r[0]][r[1]][r[2]][r[3]]=n;break;case 5:t[r[0]][r[1]][r[2]][r[3]][r[4]]=n;break}}function KN(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{const i=new Yi(r);i.wrapS=bp,i.wrapT=bp,i.needsUpdate=!0,e(i)},r.onerror=n,r.src=t})}class pHe extends FF{constructor(){super(...arguments);yr(this,"scene")}getObject(n){this.app.debugEnabled&&this.app.send({event:"getObject",target:"app",data:n})}setObject(n){const r=jG(n);this.app.send({event:"setObject",target:"editor",data:r})}requestMethod(n,r,i,o){this.app.send({event:"requestMethod",target:"app",data:{uuid:n,key:r,value:i,subitem:o}})}updateObject(n,r,i){this.app.send({event:"updateObject",target:"app",data:{uuid:n,key:r,value:i}})}createTexture(n,r,i){this.app.send({event:"createTexture",target:"app",data:{uuid:n,key:r,value:i}})}setScene(n){if(n===void 0||(this.scene=n,!this.app.debugEnabled))return;aHe(),BF(this.scene);const r=vEe(this.scene);this.app.send({event:"setScene",target:"editor",data:r})}addCamera(n){if(!this.app.debugEnabled)return;const r=jG(n);this.app.send({event:"addCamera",target:"editor",data:r})}removeCamera(n){if(!this.app.debugEnabled)return;const r=jG(n);this.app.send({event:"removeCamera",target:"editor",data:r})}handleApp(n){switch(n.event){case"getObject":Sr.dispatchEvent({type:Er.GET_OBJECT,value:n.data});break;case"updateObject":Sr.dispatchEvent({type:Er.UPDATE_OBJECT,value:n.data});break;case"createTexture":Sr.dispatchEvent({type:Er.CREATE_TEXTURE,value:n.data});break;case"requestMethod":Sr.dispatchEvent({type:Er.REQUEST_METHOD,value:n.data});break}}handleEditor(n){switch(n.event){case"setObject":Sr.dispatchEvent({type:Er.SET_OBJECT,value:n.data});break;case"setScene":Sr.dispatchEvent({type:Er.SET_SCENE,value:n.data});break;case"addCamera":Sr.dispatchEvent({type:Er.ADD_CAMERA,value:n.data});break;case"removeCamera":Sr.dispatchEvent({type:Er.REMOVE_CAMERA,value:n.data});break}}}/*! Tweakpane 4.0.0 (c) 2016 cocopon, licensed under the MIT license. */function vi(t){return t==null}function $7(t){return t!==null&&typeof t=="object"}function jW(t){return t!==null&&typeof t=="object"}function fHe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function j0(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,i)=>{const o=t[i],u=e[i];return jW(o)&&jW(u)?Object.assign(Object.assign({},r),{[i]:j0(o,u)}):Object.assign(Object.assign({},r),{[i]:i in e?u:o})},{})}function K7(t){return $7(t)?"target"in t:!1}const mHe={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let ea=class bw{static alreadyDisposed(){return new bw({type:"alreadydisposed"})}static notBindable(){return new bw({type:"notbindable"})}static notCompatible(e,n){return new bw({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new bw({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new bw({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=mHe[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}},Vbe=class yEe{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!yEe.isBindable(r))throw ea.notBindable();if(!(e in r))throw ea.propertyNotFound(e);r[e]=n}},Ds=class{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(i=>i.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(i=>{i.handler(n)})}},gHe=class{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(i,o)=>i===o,this.emitter=new Ds,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,o=this.rawValue_;this.equals_(o,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:i,sender:this}))}},vHe=class{constructor(e){this.emitter=new Ds,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}},yHe=class{constructor(e){this.emitter=new Ds,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}};function Fi(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new vHe(t):new gHe(t,e)}function bHe(t){return[new yHe(t),(e,n)=>{t.setRawValue(e,n)}]}let br=class bEe{constructor(e){this.emitter=new Ds,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,i)=>Object.assign(r,{[i]:Fi(e[i])}),{})}static fromObject(e){const n=this.createCore(e);return new bEe(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}},mM=class{constructor(e){this.values=br.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}},_He=class{constructor(e){this.values=br.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let i=e;return vi(r)||(i=Math.max(i,r)),vi(n)||(i=Math.min(i,n)),i}},wHe=class{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}},xHe=class{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}};const SHe={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};let EHe=class{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=SHe[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const CHe={"+":t=>t,"-":t=>-t,"~":t=>~t};let PHe=class{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=CHe[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function X7(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(i!=="")return i}return""}}function jT(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function THe(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function HT(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function MHe(t,e){const n=HT(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const i=HT(t,e);return i===""?"":r+i}function q7(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=MHe(t,e);return r===""?"":n+r}function _Ee(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=THe(t,e);return e+=r.length,r===""?"":r+HT(t,e)}function kHe(t,e){const n=_Ee(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const i=HT(t,e);return e+=i.length,n+r+i+q7(t,e)}function AHe(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=HT(t,e);return e+=r.length,r===""?"":n+r+q7(t,e)}function IHe(t,e){const n=_Ee(t,e);return e+=n.length,n===""?"":n+q7(t,e)}const RHe=X7([kHe,AHe,IHe]);function DHe(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function OHe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=DHe(t,e);return r===""?"":n+r}function LHe(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function NHe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=LHe(t,e);return r===""?"":n+r}function FHe(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function BHe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=FHe(t,e);return r===""?"":n+r}const UHe=X7([OHe,NHe,BHe]),zHe=X7([UHe,RHe]);function VHe(t,e){const n=zHe(t,e);return e+=n.length,n===""?null:{evaluable:new xHe(n),cursor:e}}function jHe(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=xEe(t,e);if(!r)return null;e=r.cursor,e+=jT(t,e).length;const i=t.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:e}}function HHe(t,e){var n;return(n=VHe(t,e))!==null&&n!==void 0?n:jHe(t,e)}function wEe(t,e){const n=HHe(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=wEe(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new PHe(r,i.evaluable)}):null}function GHe(t,e,n){n+=jT(e,n).length;const r=t.filter(i=>e.startsWith(i,n))[0];return r?(n+=r.length,n+=jT(e,n).length,{cursor:n,operator:r}):null}function WHe(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const u=GHe(e,n,r);if(!u)break;r=u.cursor;const h=t(n,r);if(!h)return null;r=h.cursor,o=new EHe(u.operator,o,h.evaluable)}return o?{cursor:r,evaluable:o}:null}}const $He=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>WHe(t,e),wEe);function xEe(t,e){return e+=jT(t,e).length,$He(t,e)}function KHe(t){const e=xEe(t,0);return!e||e.cursor+jT(t,e.cursor).length!==t.length?null:e.evaluable}function wp(t){var e;const n=KHe(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function SEe(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=wp(t);if(!vi(e))return e}return 0}function XHe(t){return String(t)}function nl(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function qr(t,e,n,r,i){const o=(t-e)/(n-e);return r+o*(i-r)}function jbe(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Gs(t,e,n){return Math.min(Math.max(t,e),n)}function EEe(t,e){return(t%e+e)%e}function qHe(t,e){return vi(t.step)?Math.max(jbe(e),2):jbe(t.step)}function CEe(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function PEe(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function TEe(t,e){return vi(t.step)?null:new wHe(t.step,e)}function MEe(t){return!vi(t.max)&&!vi(t.min)?new mM({max:t.max,min:t.min}):!vi(t.max)||!vi(t.min)?new _He({max:t.max,min:t.min}):null}function kEe(t,e){var n,r,i;return{formatter:(n=t.format)!==null&&n!==void 0?n:nl(qHe(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:CEe(t),pointerScale:(i=t.pointerScale)!==null&&i!==void 0?i:PEe(t,e)}}function AEe(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function Y7(t){return{constraint:t.constraint,textProps:br.fromObject(kEe(t.params,t.initialValue))}}let J0=class{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}},UF=class{constructor(e){this.target=e}},gM=class extends UF{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}},YHe=class extends UF{constructor(e,n){super(e),this.expanded=n}},ZHe=class extends UF{constructor(e,n){super(e),this.index=n}},GT=class extends J0{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Ds,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new gM(this,n.binding.target.read(),e.options.last))}};class QHe{constructor(e,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new Ds}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function JHe(t){if(!("binding"in t))return!1;const e=t.binding;return K7(e)&&"read"in e&&"write"in e}function eGe(t,e){const r=Object.keys(e).reduce((i,o)=>{if(i===void 0)return;const u=e[o],h=u(t[o]);return h.succeeded?Object.assign(Object.assign({},i),{[o]:h.value}):void 0},{});return r}function tGe(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const i=e(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function nGe(t){return t===null?!1:typeof t=="object"}function qh(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function Hbe(t){return{custom:e=>qh(e)(t),boolean:qh(e=>typeof e=="boolean"?e:void 0)(t),number:qh(e=>typeof e=="number"?e:void 0)(t),string:qh(e=>typeof e=="string"?e:void 0)(t),function:qh(e=>typeof e=="function"?e:void 0)(t),constant:e=>qh(n=>n===e?e:void 0)(t),raw:qh(e=>e)(t),object:e=>qh(n=>{if(nGe(n))return eGe(n,e)})(t),array:e=>qh(n=>{if(Array.isArray(n))return tGe(n,e)})(t)}}const HW={optional:Hbe(!0),required:Hbe(!1)};function Qi(t,e){const n=e(HW),r=HW.required.object(n)(t);return r.succeeded?r.value:void 0}function Rl(t,e,n,r){if(e&&!e(t))return!1;const i=Qi(t,n);return i?r(i):!1}function Dl(t,e){var n;return j0((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function I0(t){return"value"in t}function IEe(t){if(!$7(t)||!("binding"in t))return!1;const e=t.binding;return K7(e)}const Md="http://www.w3.org/2000/svg";function XN(t){t.offsetHeight}function rGe(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function Z7(t){return t.ontouchstart!==void 0}function iGe(){return globalThis}function sGe(){return iGe().document}function oGe(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const aGe={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function zF(t,e){const n=t.createElementNS(Md,"svg");return n.innerHTML=aGe[e],n}function REe(t,e,n){t.insertBefore(e,t.children[n])}function Q7(t){t.parentElement&&t.parentElement.removeChild(t)}function DEe(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function lGe(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function OEe(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function hp(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function Dd(t,e,n){hp(t.value(e),n)}const uGe="tp";function Br(t){return(n,r)=>[uGe,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const kP=Br("lbl");function cGe(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(i=>t.createTextNode(i)).forEach((i,o)=>{o>0&&n.appendChild(t.createElement("br")),n.appendChild(i)}),n}let LEe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(kP()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(kP("l")),Dd(n.props,"label",o=>{vi(o)?this.element.classList.add(kP(void 0,"nol")):(this.element.classList.remove(kP(void 0,"nol")),lGe(r),r.appendChild(cGe(e,o)))}),this.element.appendChild(r),this.labelElement=r;const i=e.createElement("div");i.classList.add(kP("v")),this.element.appendChild(i),this.valueElement=i}},NEe=class{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new LEe(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Rl(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Dl(null,{label:this.props.get("label")})}};function dGe(){return["veryfirst","first","last","verylast"]}const Gbe=Br(""),Wbe={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let VF=class{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{dGe().forEach(r=>{n.classList.remove(Gbe(void 0,Wbe[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(Gbe(void 0,Wbe[r]))})}),this.viewProps.handleDispose(()=>{Q7(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Rl(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Dl(null,Object.assign({},this.viewProps.exportState()))}},H0=class extends VF{constructor(e,n){if(n.value!==n.valueController.value)throw ea.shouldNeverHappen();const r=n.valueController.viewProps,i=new NEe(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new LEe(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return Rl(e,n=>{var r,i,o;return super.importState(n)&&this.labelController.importProps(n)&&((o=(i=(r=this.valueController).importProps)===null||i===void 0?void 0:i.call(r,e))!==null&&o!==void 0?o:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return Dl(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}};function $be(t){const e=Object.assign({},t);return delete e.value,e}class FEe extends H0{constructor(e,n){super(e,n),this.tag=n.tag}importState(e){return Rl(e,n=>super.importState($be(e)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return Dl(()=>$be(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function hGe(t){return I0(t)&&IEe(t.value)}class pGe extends FEe{importState(e){return Rl(e,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function fGe(t){return I0(t)&&JHe(t.value)}function BEe(t,e){for(;t.length<e;)t.push(void 0)}function mGe(t){const e=[];return BEe(e,t),e}function gGe(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function vGe(t,e){const n=[...gGe(t),e];return n.length>t.length?n.splice(0,n.length-t.length):BEe(n,t.length),n}class yGe{constructor(e){this.emitter=new Ds,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=Fi(mGe(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=vGe(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function bGe(t){if(!("binding"in t))return!1;const e=t.binding;return K7(e)&&"read"in e&&!("write"in e)}class _Ge extends FEe{exportState(){return Dl(()=>super.exportState(),{binding:{readonly:!0}})}}function wGe(t){return I0(t)&&bGe(t.value)}let xGe=class extends J0{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new UF(this))}),this}};function SGe(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function E1(t,e){return n=>{SGe(t,e,n)}}function J7(t,e){hp(t,n=>{e.textContent=n??""})}const HG=Br("btn");let EGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(HG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(HG("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(HG("t")),J7(n.props.value("title"),i),this.buttonElement.appendChild(i)}},CGe=class{constructor(e,n){this.emitter=new Ds,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new EGe(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Rl(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Dl(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}},Kbe=class extends VF{constructor(e,n){const r=new CGe(e,{props:n.buttonProps,viewProps:n.viewProps}),i=new NEe(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(e){return Rl(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Dl(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},UEe=class{constructor(e){const[n,r]=e.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}};const C1=new UEe("2.0.0");function Oa(t){return Object.assign({core:C1},t)}const PGe=Oa({id:"button",type:"blade",accept(t){const e=Qi(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new Kbe(t.document,{blade:t.blade,buttonProps:br.fromObject({title:t.params.title}),labelProps:br.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof Kbe?new xGe(t.controller):null}});function TGe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function MGe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function kGe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function AGe(t){return $7(t)?"refresh"in t&&typeof t.refresh=="function":!1}function IGe(t,e){if(!Vbe.isBindable(t))throw ea.notBindable();return new Vbe(t,e)}let RGe=class{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Ds,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const i=r??{},o=this.controller_.element.ownerDocument,u=this.pool_.createBinding(o,IGe(e,n),i),h=this.pool_.createBindingApi(u);return this.add(h,i.index)}addFolder(e){return MGe(this,e)}addButton(e){return TGe(this,e)}addTab(e){return kGe(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),i=this.pool_.createApi(r);return this.add(i,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.children.forEach(e=>{AGe(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),i=IEe(n.value)?n.value.binding:null;this.emitter_.emit("change",new gM(r,i?i.target.read():n.value.rawValue,e.options.last))}},eK=class extends J0{constructor(e,n){super(e),this.rackApi_=new RGe(e.rackController,n)}},tK=class extends VF{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Rl(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return Dl(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}};function GW(t){return"rackController"in t}let DGe=class{constructor(e){this.emitter=new Ds,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw ea.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(o=>{this.cache_.add(o)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}};function OGe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(I0(r)&&r.value===e)return r}return null}function LGe(t){return GW(t)?t.rackController.rack.bcSet_:null}let NGe=class{constructor(e){var n,r;this.emitter=new Ds,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new DGe(LGe),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),I0(r))r.value.emitter.on("change",this.onChildValueChange_);else if(GW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.on("layout",this.onRackLayout_),o.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(I0(r))r.value.emitter.off("change",this.onChildValueChange_);else if(GW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.off("layout",this.onRackLayout_),o.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(i=>{const o=[];i===n&&(o.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&o.push("veryfirst")),i===r&&(o.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&o.push("verylast")),i.blade.set("positions",o)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=OGe(this.find(I0),e.sender);if(!n)throw ea.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},nK=class{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new NGe({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&REe(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&Q7(e.bladeController.view.element)}};function P1(){return new br({positions:Fi([],{equals:fHe})})}let rK=class zEe extends br{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=br.createCore(n);return new zEe(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!vi(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};Dd(this,"expanded",r),Dd(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function FGe(t,e){let n=0;return rGe(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),XN(e),n=e.clientHeight,t.set("temporaryExpanded",null),XN(e)}),n}function Xbe(t,e){e.style.height=t.styleHeight}function iK(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),vi(t.get("expandedHeight"))){const n=FGe(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),XN(e)}),t.emitter.on("change",()=>{Xbe(t,e)}),Xbe(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}let VEe=class extends eK{constructor(e,n){super(e,n),this.emitter_=new Ds,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new YHe(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.rackApi_.refresh()}};const jEe=Br("cnt");let BGe=class{constructor(e,n){var r;this.className_=Br((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),jEe()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Dd(this.foldable_,"completed",E1(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),Dd(n.props,"title",v=>{vi(v)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const o=e.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(this.className_("t")),J7(n.props.value("title"),u),this.buttonElement.appendChild(u),this.titleElement=u;const h=e.createElement("div");h.classList.add(this.className_("m")),this.buttonElement.appendChild(h);const m=e.createElement("div");m.classList.add(this.className_("c")),this.element.appendChild(m),this.containerElement=m}},WW=class extends tK{constructor(e,n){var r;const i=rK.create((r=n.expanded)!==null&&r!==void 0?r:!0),o=new BGe(e,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new nK({blade:n.blade,element:o.containerElement,root:n.root,viewProps:n.viewProps}),view:o})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,iK(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Rl(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Dl(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};const UGe=Oa({id:"folder",type:"blade",accept(t){const e=Qi(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new WW(t.document,{blade:t.blade,expanded:t.params.expanded,props:br.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof WW?new VEe(t.controller,t.pool):null}}),zGe=Br("");function qbe(t,e){return E1(t,zGe(void 0,e))}let ey=class HEe extends br{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=bHe(Fi(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,i;const o=e??{};return new HEe(br.createCore({disabled:(n=o.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=o.hidden)!==null&&r!==void 0?r:!1,parent:(i=o.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){hp(this.globalDisabled_,qbe(e,"disabled")),Dd(this,"hidden",qbe(e,"hidden"))}bindDisabled(e){hp(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){hp(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const Ybe=Br("tbp");let VGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ybe()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Ybe("c")),this.element.appendChild(r),this.containerElement=r}};const AP=Br("tbi");let jGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(AP()),n.viewProps.bindClassModifiers(this.element),Dd(n.props,"selected",o=>{o?this.element.classList.add(AP(void 0,"sel")):this.element.classList.remove(AP(void 0,"sel"))});const r=e.createElement("button");r.classList.add(AP("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(AP("t")),J7(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}},HGe=class{constructor(e,n){this.emitter=new Ds,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new jGe(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},$W=class extends tK{constructor(e,n){const r=new VGe(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new nK({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new HGe(e,{props:n.itemProps,viewProps:ey.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Dd(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return Rl(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Dl(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},GGe=class extends eK{constructor(e,n){super(e,n),this.emitter_=new Ds,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new $W(n,{blade:P1(),itemProps:br.fromObject({selected:!1,title:e.title}),props:br.fromObject({selected:!1}),viewProps:ey.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}onSelect_(e){this.emitter_.emit("select",new ZHe(this,e.rawValue))}},WGe=class extends eK{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}};const Zbe=-1;let $Ge=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Fi(!0),this.selectedIndex=Fi(Zbe),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Zbe,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}};const IP=Br("tab");let KGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(IP(),jEe()),n.viewProps.bindClassModifiers(this.element),hp(n.empty,E1(this.element,IP(void 0,"nop")));const r=e.createElement("div");r.classList.add(IP("t")),this.element.appendChild(r),this.itemsElement=r;const i=e.createElement("div");i.classList.add(IP("i")),this.element.appendChild(i);const o=e.createElement("div");o.classList.add(IP("c")),this.element.appendChild(o),this.contentsElement=o}},Qbe=class extends tK{constructor(e,n){const r=new $Ge,i=new KGe(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new nK({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const o=this.rackController.rack;o.emitter.on("add",this.onRackAdd_),o.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;REe(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;Q7(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}};const GEe=Oa({id:"tab",type:"blade",accept(t){const e=Qi(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new Qbe(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new $W(t.document,{blade:P1(),itemProps:br.fromObject({selected:!1,title:n.title}),props:br.fromObject({selected:!1}),viewProps:ey.create()});e.add(r)}),e},api(t){return t.controller instanceof Qbe?new GGe(t.controller,t.pool):t.controller instanceof $W?new WGe(t.controller,t.pool):null}});function XGe(t,e){const n=t.accept(e.params);if(!n)return null;const r=Qi(e.params,i=>({disabled:i.optional.boolean,hidden:i.optional.boolean}));return t.controller({blade:P1(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden}),viewProps:ey.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})})}let sK=class extends GT{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}},qGe=class{constructor(){this.disabled=!1,this.emitter=new Ds}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}},YGe=class{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Ds,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}},vM=class{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}};function qN(t,e){if(t instanceof e)return t;if(t instanceof vM){const n=t.constraints.reduce((r,i)=>r||(i instanceof e?i:null),null);if(n)return n}return null}let yM=class{constructor(e){this.values=br.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===e).length>0?e:n[0].value}};function bM(t){var e;const n=HW;if(Array.isArray(t))return(e=Qi({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function oK(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function aK(t){return vi(t)?null:new yM(oK(t))}const GG=Br("lst");let ZGe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(GG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(GG("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=e.createElement("div");i.classList.add(GG("m")),i.appendChild(zF(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Dd(this.props_,"options",o=>{DEe(this.selectElement),o.forEach(u=>{const h=e.createElement("option");h.textContent=u.text,this.selectElement.appendChild(h)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},Zm=class{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new ZGe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return Rl(e,null,n=>({options:n.required.custom(bM)}),n=>(this.props.set("options",oK(n.options)),!0))}exportProps(){return Dl(null,{options:this.props.get("options")})}};const Jbe=Br("pop");let QGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Jbe()),n.viewProps.bindClassModifiers(this.element),hp(n.shows,E1(this.element,Jbe(void 0,"v")))}},WEe=class{constructor(e,n){this.shows=Fi(!1),this.viewProps=n.viewProps,this.view=new QGe(e,{shows:this.shows,viewProps:this.viewProps})}};const e_e=Br("txt");let JGe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(e_e()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(e_e("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}},WT=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new JGe(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);vi(i)||(this.value.rawValue=i),this.view.refresh()}};function e9e(t){return String(t)}function $Ee(t){return t==="false"?!1:!!t}function t_e(t){return e9e(t)}function t9e(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const n9e=nl(0);function YN(t){return n9e(t)+"%"}function KEe(t){return String(t)}function KW(t){return t}function T1({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function o(u){i||(i=!0,u(),i=!1)}t.emitter.on("change",u=>{o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),e.emitter.on("change",u=>{o(()=>{t.setRawValue(r(t.rawValue,e.rawValue),u.options)}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Qa(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function $T(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function xp(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function r9e(t){return t==="ArrowUp"||t==="ArrowDown"}function XEe(t){return r9e(t)||t==="ArrowLeft"||t==="ArrowRight"}function WG(t,e){var n,r;const i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+o.left),y:t.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+o.top)}}let ty=class{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Ds,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(WG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(WG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(WG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}};const uu=Br("txt");let i9e=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(uu(),uu(void 0,"num")),n.arrayPosition&&this.element.classList.add(uu(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(uu("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(uu()),this.inputElement.classList.add(uu("i"));const i=e.createElement("div");i.classList.add(uu("k")),this.element.appendChild(i),this.knobElement=i;const o=e.createElementNS(Md,"svg");o.classList.add(uu("g")),this.knobElement.appendChild(o);const u=e.createElementNS(Md,"path");u.classList.add(uu("gb")),o.appendChild(u),this.guideBodyElem_=u;const h=e.createElementNS(Md,"path");h.classList.add(uu("gh")),o.appendChild(h),this.guideHeadElem_=h;const m=e.createElement("div");m.classList.add(Br("tt")()),this.knobElement.appendChild(m),this.tooltipElem_=m,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(uu(void 0,"drg"));return}this.element.classList.add(uu(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=Gs(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}},_M=class{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Fi(null),this.view=new i9e(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new ty(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),o=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let u=e;return i!==void 0&&(u=Math.max(u,i)),o!==void 0&&(u=Math.min(u,o)),u}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);vi(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const n=Qa(this.props.get("keyScale"),$T(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Qa(this.props.get("keyScale"),$T(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const $G=Br("sld");let s9e=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add($G()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add($G("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add($G("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=Gs(qr(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}},o9e=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new s9e(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ty(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(qr(Gs(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Qa(this.props.get("keyScale"),xp(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){Qa(this.props.get("keyScale"),xp(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const KG=Br("sldtxt");let a9e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(KG());const r=e.createElement("div");r.classList.add(KG("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(KG("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}},ZN=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new o9e(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new _M(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new a9e(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Rl(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Dl(null,{max:e.get("max"),min:e.get("min")})}};function qEe(t){return{sliderProps:new br({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new br({formatter:Fi(t.formatter),keyScale:t.keyScale,pointerScale:Fi(t.pointerScale)})}}const l9e={containerUnitSize:"cnt-usz"};function YEe(t){return`--${l9e[t]}`}function KT(t){return AEe(t)}function Im(t){if(jW(t))return Qi(t,KT)}function op(t,e){if(!t)return;const n=[],r=TEe(t,e);r&&n.push(r);const i=MEe(t);return i&&n.push(i),new vM(n)}function u9e(t){return t?t.major===C1.major:!1}function ZEe(t){if(t==="inline"||t==="popup")return t}function wM(t,e){t.write(e)}const kL=Br("ckb");let c9e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(kL()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(kL("l")),this.element.appendChild(r);const i=e.createElement("input");i.classList.add(kL("i")),i.type="checkbox",r.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const o=e.createElement("div");o.classList.add(kL("w")),r.appendChild(o);const u=zF(e,"check");o.appendChild(u),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},d9e=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new c9e(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}};function h9e(t){const e=[],n=aK(t.options);return n&&e.push(n),new vM(e)}const p9e=Oa({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Qi(e,r=>({options:r.optional.custom(bM),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>$Ee,constraint:t=>h9e(t.params),writer:t=>wM},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&qN(r,yM);return i?new Zm(e,{props:new br({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new d9e(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof Zm?new sK(t.controller):null}}),i0=Br("col");let f9e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(i0()),n.foldable.bindExpandedClass(this.element,i0(void 0,"expanded")),Dd(n.foldable,"completed",E1(this.element,i0(void 0,"cpl")));const r=e.createElement("div");r.classList.add(i0("h")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(i0("s")),r.appendChild(i),this.swatchElement=i;const o=e.createElement("div");if(o.classList.add(i0("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(i0("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}};function m9e(t,e,n){const r=Gs(t/255,0,1),i=Gs(e/255,0,1),o=Gs(n/255,0,1),u=Math.max(r,i,o),h=Math.min(r,i,o),m=u-h;let v=0,x=0;const E=(h+u)/2;return m!==0&&(x=m/(1-Math.abs(u+h-1)),r===u?v=(i-o)/m:i===u?v=2+(o-r)/m:v=4+(r-i)/m,v=v/6+(v<0?1:0)),[v*360,x*100,E*100]}function g9e(t,e,n){const r=(t%360+360)%360,i=Gs(e/100,0,1),o=Gs(n/100,0,1),u=(1-Math.abs(2*o-1))*i,h=u*(1-Math.abs(r/60%2-1)),m=o-u/2;let v,x,E;return r>=0&&r<60?[v,x,E]=[u,h,0]:r>=60&&r<120?[v,x,E]=[h,u,0]:r>=120&&r<180?[v,x,E]=[0,u,h]:r>=180&&r<240?[v,x,E]=[0,h,u]:r>=240&&r<300?[v,x,E]=[h,0,u]:[v,x,E]=[u,0,h],[(v+m)*255,(x+m)*255,(E+m)*255]}function v9e(t,e,n){const r=Gs(t/255,0,1),i=Gs(e/255,0,1),o=Gs(n/255,0,1),u=Math.max(r,i,o),h=Math.min(r,i,o),m=u-h;let v;m===0?v=0:u===r?v=60*(((i-o)/m%6+6)%6):u===i?v=60*((o-r)/m+2):v=60*((r-i)/m+4);const x=u===0?0:m/u,E=u;return[v,x*100,E*100]}function QEe(t,e,n){const r=EEe(t,360),i=Gs(e/100,0,1),o=Gs(n/100,0,1),u=o*i,h=u*(1-Math.abs(r/60%2-1)),m=o-u;let v,x,E;return r>=0&&r<60?[v,x,E]=[u,h,0]:r>=60&&r<120?[v,x,E]=[h,u,0]:r>=120&&r<180?[v,x,E]=[0,u,h]:r>=180&&r<240?[v,x,E]=[0,h,u]:r>=240&&r<300?[v,x,E]=[h,0,u]:[v,x,E]=[u,0,h],[(v+m)*255,(x+m)*255,(E+m)*255]}function y9e(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function b9e(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function Od(t){return[t[0],t[1],t[2]]}function jF(t,e){return[t[0],t[1],t[2],e]}const _9e={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:y9e,rgb:g9e},hsv:{hsl:b9e,hsv:(t,e,n)=>[t,e,n],rgb:QEe},rgb:{hsl:m9e,hsv:v9e,rgb:(t,e,n)=>[t,e,n]}};function d1(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function w9e(t,e){return t===e?e:EEe(t,e)}function JEe(t,e,n){var r;const i=d1(e,n);return[e==="rgb"?Gs(t[0],0,i[0]):w9e(t[0],i[0]),Gs(t[1],0,i[1]),Gs(t[2],0,i[2]),Gs((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function n_e(t,e,n,r){const i=d1(e,n),o=d1(e,r);return t.map((u,h)=>u/i[h]*o[h])}function eCe(t,e,n){const r=n_e(t,e.mode,e.type,"int"),i=_9e[e.mode][n.mode](...r);return n_e(i,n.mode,"int",n.type)}let Yr=class tCe{static black(){return new tCe([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=JEe(e,n,this.type)}getComponents(e){return jF(eCe(Od(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const dm=Br("colp");let x9e=class{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(dm()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(dm("hsv"));const i=e.createElement("div");i.classList.add(dm("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const o=e.createElement("div");o.classList.add(dm("h")),this.hPaletteView_=n.hPaletteView,o.appendChild(this.hPaletteView_.element),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");if(u.classList.add(dm("rgb")),this.textsView_=n.textsView,u.appendChild(this.textsView_.element),this.element.appendChild(u),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const h=e.createElement("div");h.classList.add(dm("a"));const m=e.createElement("div");m.classList.add(dm("ap")),m.appendChild(this.alphaViews_.palette.element),h.appendChild(m);const v=e.createElement("div");v.classList.add(dm("at")),v.appendChild(this.alphaViews_.text.element),h.appendChild(v),this.element.appendChild(h)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}};function S9e(t){return t==="int"?"int":t==="float"?"float":void 0}function lK(t){return Qi(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(S9e)}),expanded:e.optional.boolean,picker:e.optional.custom(ZEe),readonly:e.optional.constant(!1)}))}function G0(t){return t?.1:1}function nCe(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}let uK=class{constructor(e,n){this.type="float",this.mode=n,this.comps_=JEe(e,n,this.type)}getComponents(e){return jF(eCe(Od(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const E9e={int:(t,e)=>new Yr(t,e),float:(t,e)=>new uK(t,e)};function cK(t,e,n){return E9e[n](t,e)}function C9e(t){return t.type==="float"}function P9e(t){return t.type==="int"}function T9e(t){const e=t.getComponents(),n=d1(t.mode,"int");return new Yr([Math.round(qr(e[0],0,1,0,n[0])),Math.round(qr(e[1],0,1,0,n[1])),Math.round(qr(e[2],0,1,0,n[2])),e[3]],t.mode)}function M9e(t){const e=t.getComponents(),n=d1(t.mode,"int");return new uK([qr(e[0],0,n[0],0,1),qr(e[1],0,n[1],0,1),qr(e[2],0,n[2],0,1),e[3]],t.mode)}function Ma(t,e){if(t.type===e)return t;if(P9e(t)&&e==="float")return M9e(t);if(C9e(t)&&e==="int")return T9e(t);throw ea.shouldNeverHappen()}function k9e(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function bu(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const A9e={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function rCe(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return A9e[r](n)}function iCe(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[bu(e[1],255),bu(e[2],255),bu(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function I9e(t){const e=iCe(t);return e?new Yr(e,"rgb"):null}function sCe(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[bu(e[1],255),bu(e[2],255),bu(e[3],255),bu(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function R9e(t){const e=sCe(t);return e?new Yr(e,"rgb"):null}function oCe(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[rCe(e[1]),bu(e[2],100),bu(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function D9e(t){const e=oCe(t);return e?new Yr(e,"hsl"):null}function aCe(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[rCe(e[1]),bu(e[2],100),bu(e[3],100),bu(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function O9e(t){const e=aCe(t);return e?new Yr(e,"hsl"):null}function lCe(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function L9e(t){const e=lCe(t);return e?new Yr(e,"rgb"):null}function uCe(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),qr(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),qr(parseInt(n[4],16),0,255,0,1)]:null}function N9e(t){const e=uCe(t);return e?new Yr(e,"rgb"):null}function cCe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function r_e(t){return e=>{const n=cCe(e);return n?cK(n,"rgb",t):null}}function dCe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function i_e(t){return e=>{const n=dCe(e);return n?cK(n,"rgb",t):null}}const F9e=[{parser:lCe,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:uCe,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:iCe,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:sCe,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:oCe,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:aCe,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:cCe,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:dCe,result:{alpha:!0,mode:"rgb",notation:"object"}}];function B9e(t){return F9e.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function U9e(t,e="int"){const n=B9e(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function xM(t){const e=[L9e,N9e,I9e,R9e,D9e,O9e];t==="int"&&e.push(r_e("int"),i_e("int")),t==="float"&&e.push(r_e("float"),i_e("float"));const n=t9e(e);return r=>{const i=n(r);return i?Ma(i,t):null}}function z9e(t){const e=xM("int");if(typeof t!="string")return Yr.black();const n=e(t);return n??Yr.black()}function hCe(t){const e=Gs(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function dK(t,e="#"){const n=Od(t.getComponents("rgb")).map(hCe).join("");return`${e}${n}`}function hK(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(hCe).join("");return`${e}${r}`}function pCe(t){const e=nl(0),n=Ma(t,"int");return`rgb(${Od(n.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function JL(t){const e=nl(2),n=nl(0);return`rgba(${Ma(t,"int").getComponents("rgb").map((o,u)=>(u===3?e:n)(o)).join(", ")})`}function V9e(t){const e=[nl(0),YN,YN],n=Ma(t,"int");return`hsl(${Od(n.getComponents("hsl")).map((i,o)=>e[o](i)).join(", ")})`}function j9e(t){const e=[nl(0),YN,YN,nl(2)];return`hsla(${Ma(t,"int").getComponents("hsl").map((i,o)=>e[o](i)).join(", ")})`}function fCe(t,e){const n=nl(e==="float"?2:0),r=["r","g","b"],i=Ma(t,e);return`{${Od(i.getComponents("rgb")).map((u,h)=>`${r[h]}: ${n(u)}`).join(", ")}}`}function H9e(t){return e=>fCe(e,t)}function mCe(t,e){const n=nl(2),r=nl(e==="float"?2:0),i=["r","g","b","a"];return`{${Ma(t,e).getComponents("rgb").map((h,m)=>{const v=m===3?n:r;return`${i[m]}: ${v(h)}`}).join(", ")}}`}function G9e(t){return e=>mCe(e,t)}const W9e=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:dK},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:hK},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:pCe},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:JL},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:V9e},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:j9e},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:H9e(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:G9e(e)}],[])];function gCe(t){return W9e.reduce((e,n)=>e||(k9e(n.format,t)?n.stringifier:null),null)}const RP=Br("apl");let $9e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(RP()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(RP("b")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(RP("c")),r.appendChild(i),this.colorElem_=i;const o=e.createElement("div");o.classList.add(RP("m")),this.element.appendChild(o),this.markerElem_=o;const u=e.createElement("div");u.classList.add(RP("p")),this.markerElem_.appendChild(u),this.previewElem_=u,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Yr([n[0],n[1],n[2],0],"rgb"),i=new Yr([n[0],n[1],n[2],255],"rgb"),o=["to right",JL(r),JL(i)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=JL(e);const u=qr(n[3],0,1,0,100);this.markerElem_.style.left=`${u}%`}onValueChange_(){this.update_()}},K9e=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new $9e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ty(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,i=this.value.rawValue,[o,u,h]=i.getComponents("hsv");this.value.setRawValue(new Yr([o,u,h,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Qa(G0(!0),xp(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,h]=r.getComponents("hsv");this.value.setRawValue(new Yr([i,o,u,h+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Qa(G0(!0),xp(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const cw=Br("coltxt");function X9e(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,i)=>{const o=t.createElement("option");return o.textContent=i.text,o.value=i.value,r.appendChild(o),r},t.createDocumentFragment())),e}let q9e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(cw()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(cw("m")),this.modeElem_=X9e(e),this.modeElem_.classList.add(cw("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(cw("mm")),i.appendChild(zF(e,"dropdown")),r.appendChild(i),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(cw("w")),this.element.appendChild(o),this.inputsElem_=o,this.inputViews_=n.inputViews,this.applyInputViews_(),hp(n.mode,u=>{this.modeElem_.value=u})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){DEe(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(cw("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}};function Y9e(t){return nl(t==="float"?2:0)}function Z9e(t,e,n){const r=d1(t,e)[n];return new mM({min:0,max:r})}function Q9e(t,e,n){return new _M(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:br.fromObject({formatter:Y9e(e.colorType),keyScale:G0(!1),pointerScale:e.colorType==="float"?.01:1}),value:Fi(0,{constraint:Z9e(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function J9e(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:wp,viewProps:e.viewProps};return[0,1,2].map(r=>{const i=Q9e(t,n,r);return T1({primary:e.value,secondary:i.value,forward(o){return Ma(o,e.colorType).getComponents(e.colorMode)[r]},backward(o,u){const h=e.colorMode,v=Ma(o,e.colorType).getComponents(h);v[r]=u;const x=cK(jF(Od(v),v[3]),h,e.colorType);return Ma(x,"int")}}),i})}function eWe(t,e){const n=new WT(t,{parser:xM("int"),props:br.fromObject({formatter:dK}),value:Fi(Yr.black()),viewProps:e.viewProps});return T1({primary:e.value,secondary:n.value,forward:r=>new Yr(Od(r.getComponents()),r.mode),backward:(r,i)=>new Yr(jF(Od(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function tWe(t){return t!=="hex"}let nWe=class{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Fi(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new q9e(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return tWe(n)?J9e(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):eWe(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}};const XG=Br("hpl");let rWe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(XG()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(XG("c")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(XG("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=pCe(new Yr([n,100,100],"hsv"));const r=qr(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}},iWe=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new rWe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ty(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=qr(Gs(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,o,u,h]=i.getComponents("hsv");this.value.setRawValue(new Yr([r,o,u,h],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Qa(G0(!1),xp(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,h]=r.getComponents("hsv");this.value.setRawValue(new Yr([i+n,o,u,h],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Qa(G0(!1),xp(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const qG=Br("svp"),s_e=64;let sWe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(qG()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=s_e,r.width=s_e,r.classList.add(qG("c")),this.element.appendChild(r),this.canvasElement=r;const i=e.createElement("div");i.classList.add(qG("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=oGe(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,o=this.canvasElement.height,u=e.getImageData(0,0,i,o),h=u.data;for(let x=0;x<o;x++)for(let E=0;E<i;E++){const M=qr(E,0,i,0,100),D=qr(x,0,o,100,0),H=QEe(r[0],M,D),F=(x*i+E)*4;h[F]=H[0],h[F+1]=H[1],h[F+2]=H[2],h[F+3]=255}e.putImageData(u,0,0);const m=qr(r[1],0,100,0,100);this.markerElem_.style.left=`${m}%`;const v=qr(r[2],0,100,100,0);this.markerElem_.style.top=`${v}%`}onValueChange_(){this.update_()}},oWe=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new sWe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ty(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=qr(e.point.x,0,e.bounds.width,0,100),i=qr(e.point.y,0,e.bounds.height,100,0),[o,,,u]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Yr([o,r,i,u],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){XEe(e.key)&&e.preventDefault();const[n,r,i,o]=this.value.rawValue.getComponents("hsv"),u=G0(!1),h=Qa(u,xp(e)),m=Qa(u,$T(e));h===0&&m===0||this.value.setRawValue(new Yr([n,r+h,i+m,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=G0(!1),r=Qa(n,xp(e)),i=Qa(n,$T(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},aWe=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new iWe(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new oWe(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new K9e(e,{value:this.value,viewProps:this.viewProps}),text:new _M(e,{parser:wp,props:br.fromObject({pointerScale:.01,keyScale:.1,formatter:nl(2)}),value:Fi(0,{constraint:new mM({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&T1({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const o=r.getComponents();return o[3]=i,new Yr(o,r.mode)}}),this.textsC_=new nWe(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new x9e(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const YG=Br("colsw");let lWe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(YG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(YG("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=e.createElement("button");i.classList.add(YG("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=hK(e)}onValueChange_(){this.update_()}},uWe=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new lWe(e,{value:this.value,viewProps:this.viewProps})}},pK=class{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=rK.create(n.expanded),this.swatchC_=new uWe(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new WT(e,{parser:n.parser,props:br.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new f9e(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new WEe(e,{viewProps:this.viewProps}):null;const i=new aWe(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),T1({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,u)=>u})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),iK(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=OEe(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!Z7(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function cWe(t){return Od(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function dWe(t){return t.getComponents("rgb").reduce((e,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return e<<8|i},0)>>>0}function hWe(t){return new Yr([t>>16&255,t>>8&255,t&255],"rgb")}function pWe(t){return new Yr([t>>24&255,t>>16&255,t>>8&255,qr(t&255,0,255,0,1)],"rgb")}function fWe(t){return typeof t!="number"?Yr.black():hWe(t)}function mWe(t){return typeof t!="number"?Yr.black():pWe(t)}function eN(t,e){return typeof t!="object"||vi(t)?!1:e in t&&typeof t[e]=="number"}function vCe(t){return eN(t,"r")&&eN(t,"g")&&eN(t,"b")}function yCe(t){return vCe(t)&&eN(t,"a")}function bCe(t){return vCe(t)}function fK(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function o_e(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function gWe(t){const e=gCe(t);return e?(n,r)=>{wM(n,e(r))}:null}function vWe(t){const e=t?dWe:cWe;return(n,r)=>{wM(n,e(r))}}function yWe(t,e,n){const i=Ma(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function bWe(t,e,n){const i=Ma(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function _We(t,e){return(n,r)=>{t?yWe(n,r,e):bWe(n,r,e)}}function wWe(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function xWe(t){return t?e=>hK(e,"0x"):e=>dK(e,"0x")}function SWe(t){return"color"in t||t.view==="color"}const EWe=Oa({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!SWe(e))return null;const n=lK(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:wWe(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?mWe:fWe,equals:fK,writer:t=>vWe(t.params.supportsAlpha)},controller:t=>{var e,n;return new pK(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:xWe(t.params.supportsAlpha),parser:xM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function CWe(t,e){if(!bCe(t))return Ma(Yr.black(),e);if(e==="int"){const n=o_e(t);return new Yr(n,"rgb")}if(e==="float"){const n=o_e(t);return new uK(n,"rgb")}return Ma(Yr.black(),"int")}function PWe(t){return yCe(t)}function TWe(t){return e=>{const n=CWe(e,t);return Ma(n,"int")}}function MWe(t,e){return n=>t?mCe(n,e):fCe(n,e)}const kWe=Oa({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!bCe(t))return null;const r=lK(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=nCe(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>TWe(t.params.colorType),equals:fK,writer:t=>_We(PWe(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=yCe(t.initialValue);return new pK(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:MWe(r,t.params.colorType),parser:xM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}}),AWe=Oa({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=U9e(t,nCe(e));if(!n)return null;const r=gCe(n);if(!r)return null;const i=lK(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>z9e,equals:fK,writer:t=>{const e=gWe(t.params.format);if(!e)throw ea.notBindable();return e}},controller:t=>{var e,n;return new pK(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:xM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});let mK=class{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,i)=>{var o,u;return(u=(o=this.components[i])===null||o===void 0?void 0:o.constrain(r))!==null&&u!==void 0?u:r});return this.asm_.fromComponents(n)}};const a_e=Br("pndtxt");let IWe=class{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(a_e()),this.textViews.forEach(r=>{const i=e.createElement("div");i.classList.add(a_e("a")),i.appendChild(r.element),this.element.appendChild(i)})}};function RWe(t,e,n){return new _M(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:Fi(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}let gK=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>RWe(e,n,i)),this.acs_.forEach((r,i)=>{T1({primary:this.value,secondary:r.value,forward:o=>n.assembly.toComponents(o)[i],backward:(o,u)=>{const h=n.assembly.toComponents(o);return h[i]=u,n.assembly.fromComponents(h)}})}),this.view=new IWe(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}},DWe=class extends GT{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}};function OWe(t,e){const n=[],r=TEe(t,e);r&&n.push(r);const i=MEe(t);i&&n.push(i);const o=aK(t.options);return o&&n.push(o),new vM(n)}const LWe=Oa({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=Qi(e,r=>Object.assign(Object.assign({},AEe(r)),{options:r.optional.custom(bM),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>SEe,constraint:t=>OWe(t.params,t.initialValue),writer:t=>wM},controller:t=>{const e=t.value,n=t.constraint,r=n&&qN(n,yM);if(r)return new Zm(t.document,{props:new br({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const i=kEe(t.params,e.rawValue),o=n&&qN(n,mM);return o?new ZN(t.document,Object.assign(Object.assign({},qEe(Object.assign(Object.assign({},i),{keyScale:Fi(i.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:wp,value:e,viewProps:t.viewProps})):new _M(t.document,{parser:wp,props:br.fromObject(i),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof ZN?new DWe(t.controller):t.controller.valueController instanceof Zm?new sK(t.controller):null}});let Gm=class{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(vi(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}};const _Ce={toComponents:t=>t.getComponents(),fromComponents:t=>new Gm(...t)},dw=Br("p2d");let NWe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(dw()),n.viewProps.bindClassModifiers(this.element),hp(n.expanded,E1(this.element,dw(void 0,"expanded")));const r=e.createElement("div");r.classList.add(dw("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(dw("b")),i.appendChild(zF(e,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const o=e.createElement("div");if(o.classList.add(dw("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(dw("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}};const hm=Br("p2dp");let FWe=class{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(hm()),n.layout==="popup"&&this.element.classList.add(hm(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(hm("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=e.createElementNS(Md,"svg");i.classList.add(hm("g")),this.padElement.appendChild(i),this.svgElem_=i;const o=e.createElementNS(Md,"line");o.classList.add(hm("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const u=e.createElementNS(Md,"line");u.classList.add(hm("ax")),u.setAttributeNS(null,"x1","50%"),u.setAttributeNS(null,"y1","0"),u.setAttributeNS(null,"x2","50%"),u.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(u);const h=e.createElementNS(Md,"line");h.classList.add(hm("l")),h.setAttributeNS(null,"x1","50%"),h.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(h),this.lineElem_=h;const m=e.createElement("div");m.classList.add(hm("m")),this.padElement.appendChild(m),this.markerElem_=m,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=qr(e,-r,+r,0,100),o=qr(n,-r,+r,0,100),u=this.props_.get("invertsY")?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${u}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function l_e(t,e,n){return[Qa(e[0],xp(t)),Qa(e[1],$T(t))*(n?1:-1)]}let BWe=class{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new FWe(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ty(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),i=qr(e.point.x,0,e.bounds.width,-r,+r),o=qr(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new Gm(i,o),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){XEe(e.key)&&e.preventDefault();const[n,r]=l_e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new Gm(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=l_e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},UWe=class{constructor(e,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=rK.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new WEe(e,{viewProps:this.viewProps}):null;const o=new BWe(e,{layout:n.pickerLayout,props:new br({invertsY:Fi(n.invertsY),max:Fi(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new gK(e,{assembly:_Ce,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new NWe(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),T1({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,h)=>h})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),iK(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=OEe(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!Z7(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}};function zWe(t){return Gm.isObject(t)?new Gm(t.x,t.y):new Gm}function VWe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function jWe(t,e){return new mK({assembly:_Ce,components:[op(Object.assign(Object.assign({},t),t.x),e.x),op(Object.assign(Object.assign({},t),t.y),e.y)]})}function u_e(t,e){var n,r;if(!vi(t.min)||!vi(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const i=CEe(t);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function HWe(t,e){var n,r;const i=u_e(j0(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),o=u_e(j0(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(i,o)}function GWe(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}const WWe=Oa({id:"input-point2d",type:"input",accept:(t,e)=>{if(!Gm.isObject(t))return null;const n=Qi(e,r=>Object.assign(Object.assign({},KT(r)),{expanded:r.optional.boolean,picker:r.optional.custom(ZEe),readonly:r.optional.constant(!1),x:r.optional.custom(Im),y:r.optional.object(Object.assign(Object.assign({},KT(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>zWe,constraint:t=>jWe(t.params,t.initialValue),equals:Gm.equals,writer:()=>VWe},controller:t=>{var e,n;const r=t.document,i=t.value,o=t.constraint,u=[t.params.x,t.params.y];return new UWe(r,{axes:i.rawValue.getComponents().map((h,m)=>{var v;return Y7({constraint:o.components[m],initialValue:h,params:j0(t.params,(v=u[m])!==null&&v!==void 0?v:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:GWe(t.params),max:HWe(t.params,i.rawValue),parser:wp,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps})}});let qw=class{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(vi(e))return!1;const n=e.x,r=e.y,i=e.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const wCe={toComponents:t=>t.getComponents(),fromComponents:t=>new qw(...t)};function $We(t){return qw.isObject(t)?new qw(t.x,t.y,t.z):new qw}function KWe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function XWe(t,e){return new mK({assembly:wCe,components:[op(Object.assign(Object.assign({},t),t.x),e.x),op(Object.assign(Object.assign({},t),t.y),e.y),op(Object.assign(Object.assign({},t),t.z),e.z)]})}const qWe=Oa({id:"input-point3d",type:"input",accept:(t,e)=>{if(!qw.isObject(t))return null;const n=Qi(e,r=>Object.assign(Object.assign({},KT(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Im),y:r.optional.custom(Im),z:r.optional.custom(Im)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>$We,constraint:t=>XWe(t.params,t.initialValue),equals:qw.equals,writer:t=>KWe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new gK(t.document,{assembly:wCe,axes:e.rawValue.getComponents().map((i,o)=>{var u;return Y7({constraint:n.components[o],initialValue:i,params:j0(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:wp,value:e,viewProps:t.viewProps})}});let Yw=class{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(vi(e))return!1;const n=e.x,r=e.y,i=e.z,o=e.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const xCe={toComponents:t=>t.getComponents(),fromComponents:t=>new Yw(...t)};function YWe(t){return Yw.isObject(t)?new Yw(t.x,t.y,t.z,t.w):new Yw}function ZWe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function QWe(t,e){return new mK({assembly:xCe,components:[op(Object.assign(Object.assign({},t),t.x),e.x),op(Object.assign(Object.assign({},t),t.y),e.y),op(Object.assign(Object.assign({},t),t.z),e.z),op(Object.assign(Object.assign({},t),t.w),e.w)]})}const JWe=Oa({id:"input-point4d",type:"input",accept:(t,e)=>{if(!Yw.isObject(t))return null;const n=Qi(e,r=>Object.assign(Object.assign({},KT(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Im),x:r.optional.custom(Im),y:r.optional.custom(Im),z:r.optional.custom(Im)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>YWe,constraint:t=>QWe(t.params,t.initialValue),equals:Yw.equals,writer:t=>ZWe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new gK(t.document,{assembly:xCe,axes:e.rawValue.getComponents().map((i,o)=>{var u;return Y7({constraint:n.components[o],initialValue:i,params:j0(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:wp,value:e,viewProps:t.viewProps})}});function e$e(t){const e=[],n=aK(t.options);return n&&e.push(n),new vM(e)}const t$e=Oa({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=Qi(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(bM)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>KEe,constraint:t=>e$e(t.params),writer:t=>wM},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&qN(r,yM);return i?new Zm(e,{props:new br({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new WT(e,{parser:o=>o,props:br.fromObject({formatter:KW}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof Zm?new sK(t.controller):null}}),SM={monitor:{defaultInterval:200,defaultRows:3}},c_e=Br("mll");let n$e=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(c_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(c_e("i")),r.style.height=`calc(var(${YEe("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}},vK=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new n$e(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}};const d_e=Br("sgl");let r$e=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(d_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(d_e("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}},yK=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new r$e(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}};const i$e=Oa({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Qi(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>$Ee},controller:t=>{var e;return t.value.rawValue.length===1?new yK(t.document,{formatter:t_e,value:t.value,viewProps:t.viewProps}):new vK(t.document,{formatter:t_e,rows:(e=t.params.rows)!==null&&e!==void 0?e:SM.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});let s$e=class extends GT{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}};const pm=Br("grl");let o$e=class{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(pm()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(Md,"svg");r.classList.add(pm("g")),r.style.height=`calc(var(${YEe("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(Md,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const o=e.createElement("div");o.classList.add(pm("t"),Br("tt")()),this.element.appendChild(o),this.tooltipElem_=o,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),i=this.props_.get("max"),o=[];this.value.rawValue.forEach((x,E)=>{if(x===void 0)return;const M=qr(E,0,n,0,e.width),D=qr(x,r,i,e.height,0);o.push([M,D].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const u=this.tooltipElem_,h=this.value.rawValue[this.cursor_.rawValue];if(h===void 0){u.classList.remove(pm("t","a"));return}const m=qr(this.cursor_.rawValue,0,n,0,e.width),v=qr(h,r,i,e.height,0);u.style.left=`${m}px`,u.style.top=`${v}px`,u.textContent=`${this.formatter_(h)}`,u.classList.contains(pm("t","a"))||(u.classList.add(pm("t","a"),pm("t","in")),XN(u),u.classList.remove(pm("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},SCe=class{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Fi(-1),this.view=new o$e(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!Z7(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new ty(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Rl(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Dl(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(qr(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(qr(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function XW(t){return vi(t.format)?nl(2):t.format}function a$e(t){var e;return t.value.rawValue.length===1?new yK(t.document,{formatter:XW(t.params),value:t.value,viewProps:t.viewProps}):new vK(t.document,{formatter:XW(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:SM.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function l$e(t){var e,n,r;return new SCe(t.document,{formatter:XW(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:SM.monitor.defaultRows,props:br.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function h_e(t){return t.view==="graph"}const u$e=Oa({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=Qi(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>h_e(t)?64:1,reader:t=>SEe},controller:t=>h_e(t.params)?l$e(t):a$e(t),api:t=>t.controller.valueController instanceof SCe?new s$e(t.controller):null}),c$e=Oa({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=Qi(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>KEe},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new vK(t.document,{formatter:KW,rows:(e=t.params.rows)!==null&&e!==void 0?e:SM.monitor.defaultRows,value:n,viewProps:t.viewProps}):new yK(t.document,{formatter:KW,value:n,viewProps:t.viewProps})}});class d$e{constructor(){this.map_=new Map}get(e){var n;return(n=this.map_.get(e))!==null&&n!==void 0?n:null}has(e){return this.map_.has(e)}add(e,n){return this.map_.set(e,n),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),n}}class h$e{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function p$e(t,e){var n;const r=t.accept(e.target.read(),e.params);if(vi(r))return null;const i={target:e.target,initialValue:r.initialValue,params:r.params},o=Qi(e.params,E=>({disabled:E.optional.boolean,hidden:E.optional.boolean,label:E.optional.string,tag:E.optional.string})),u=t.binding.reader(i),h=t.binding.constraint?t.binding.constraint(i):void 0,m=new h$e({reader:u,target:e.target,writer:t.binding.writer(i)}),v=new QHe(Fi(u(r.initialValue),{constraint:h,equals:t.binding.equals}),m),x=t.controller({constraint:h,document:e.document,initialValue:r.initialValue,params:r.params,value:v,viewProps:ey.create({disabled:o==null?void 0:o.disabled,hidden:o==null?void 0:o.hidden})});return new pGe(e.document,{blade:P1(),props:br.fromObject({label:"label"in e.params?(n=o==null?void 0:o.label)!==null&&n!==void 0?n:null:e.target.key}),tag:o==null?void 0:o.tag,value:v,valueController:x})}class f$e{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function m$e(t,e){return e===0?new qGe:new YGe(t,e??SM.monitor.defaultInterval)}function g$e(t,e){var n,r,i;const o=t.accept(e.target.read(),e.params);if(vi(o))return null;const u={target:e.target,initialValue:o.initialValue,params:o.params},h=Qi(e.params,M=>({bufferSize:M.optional.number,disabled:M.optional.boolean,hidden:M.optional.boolean,interval:M.optional.number,label:M.optional.string})),m=t.binding.reader(u),v=(r=(n=h==null?void 0:h.bufferSize)!==null&&n!==void 0?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(o.params))!==null&&r!==void 0?r:1,x=new yGe({binding:new f$e({reader:m,target:e.target}),bufferSize:v,ticker:m$e(e.document,h==null?void 0:h.interval)}),E=t.controller({document:e.document,params:o.params,value:x,viewProps:ey.create({disabled:h==null?void 0:h.disabled,hidden:h==null?void 0:h.hidden})});return E.viewProps.bindDisabled(x.ticker),E.viewProps.handleDispose(()=>{x.ticker.dispose()}),new _Ge(e.document,{blade:P1(),props:br.fromObject({label:"label"in e.params?(i=h==null?void 0:h.label)!==null&&i!==void 0?i:null:e.target.key}),value:x,valueController:E})}class v$e{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,n){if(!u9e(n.core))throw ea.notCompatible(e,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(e,n,r){return this.pluginsMap_.inputs.reduce((i,o)=>i??p$e(o,{document:e,target:n,params:r}),null)}createMonitor_(e,n,r){return this.pluginsMap_.monitors.reduce((i,o)=>i??g$e(o,{document:e,params:r,target:n}),null)}createBinding(e,n,r){const i=n.read();if(vi(i))throw new ea({context:{key:n.key},type:"nomatchingcontroller"});const o=this.createInput_(e,n,r);if(o)return o;const u=this.createMonitor_(e,n,r);if(u)return u;throw new ea({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(e,n){const r=this.pluginsMap_.blades.reduce((i,o)=>i??XGe(o,{document:e,params:n}),null);if(!r)throw new ea({type:"nomatchingview",context:{params:n}});return r}createInputBindingApi_(e){const n=this.pluginsMap_.inputs.reduce((r,i)=>{var o,u;return r||((u=(o=i.api)===null||o===void 0?void 0:o.call(i,{controller:e}))!==null&&u!==void 0?u:null)},null);return this.apiCache_.add(e,n??new GT(e))}createMonitorBindingApi_(e){const n=this.pluginsMap_.monitors.reduce((r,i)=>{var o,u;return r||((u=(o=i.api)===null||o===void 0?void 0:o.call(i,{controller:e}))!==null&&u!==void 0?u:null)},null);return this.apiCache_.add(e,n??new GT(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(fGe(e))return this.createInputBindingApi_(e);if(wGe(e))return this.createMonitorBindingApi_(e);throw ea.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(hGe(e))return this.createBindingApi(e);const n=this.pluginsMap_.blades.reduce((r,i)=>r??i.api({controller:e,pool:this}),null);if(!n)throw ea.shouldNeverHappen();return this.apiCache_.add(e,n)}}const y$e=new d$e;function b$e(){const t=new v$e(y$e);return[WWe,qWe,JWe,t$e,LWe,AWe,kWe,EWe,p9e,i$e,c$e,u$e,PGe,UGe,GEe].forEach(e=>{t.register("core",e)}),t}class _$e extends J0{constructor(e){super(e),this.emitter_=new Ds,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new gM(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}}class w$e extends J0{}class x$e extends J0{constructor(e){super(e),this.emitter_=new Ds,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new gM(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}}class S$e extends J0{constructor(e){super(e),this.emitter_=new Ds,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new gM(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}}const E$e=function(){return{id:"list",type:"blade",core:C1,accept(t){const e=Qi(t,n=>({options:n.required.custom(bM),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=new yM(oK(t.params.options)),n=Fi(t.params.value,{constraint:e}),r=new Zm(t.document,{props:new br({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new H0(t.document,{blade:t.blade,props:br.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof H0)||!(t.controller.valueController instanceof Zm)?null:new _$e(t.controller)}}}();class C$e extends VEe{constructor(e,n){super(e,n)}get element(){return this.controller.view.element}}class P$e extends WW{constructor(e,n){super(e,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const p_e=Br("spr");class T$e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(p_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("hr");r.classList.add(p_e("r")),this.element.appendChild(r)}}class f_e extends VF{constructor(e,n){super(Object.assign(Object.assign({},n),{view:new T$e(e,{viewProps:n.viewProps})}))}}const M$e={id:"separator",type:"blade",core:C1,accept(t){const e=Qi(t,n=>({view:n.required.constant("separator")}));return e?{params:e}:null},controller(t){return new f_e(t.document,{blade:t.blade,viewProps:t.viewProps})},api(t){return t.controller instanceof f_e?new w$e(t.controller):null}},k$e={id:"slider",type:"blade",core:C1,accept(t){const e=Qi(t,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return e?{params:e}:null},controller(t){var e,n;const r=(e=t.params.value)!==null&&e!==void 0?e:0,i=new mM({max:t.params.max,min:t.params.min}),o=Fi(r,{constraint:i}),u=new ZN(t.document,Object.assign(Object.assign({},qEe({formatter:(n=t.params.format)!==null&&n!==void 0?n:XHe,keyScale:Fi(1),max:i.values.value("max"),min:i.values.value("min"),pointerScale:PEe(t.params,r)})),{parser:wp,value:o,viewProps:t.viewProps}));return new H0(t.document,{blade:t.blade,props:br.fromObject({label:t.params.label}),value:o,valueController:u})},api(t){return!(t.controller instanceof H0)||!(t.controller.valueController instanceof ZN)?null:new x$e(t.controller)}},A$e=function(){return{id:"text",type:"blade",core:C1,accept(t){const e=Qi(t,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return e?{params:e}:null},controller(t){var e;const n=Fi(t.params.value),r=new WT(t.document,{parser:t.params.parse,props:br.fromObject({formatter:(e=t.params.format)!==null&&e!==void 0?e:i=>String(i)}),value:n,viewProps:t.viewProps});return new H0(t.document,{blade:t.blade,props:br.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof H0)||!(t.controller.valueController instanceof WT)?null:new S$e(t.controller)}}}();function I$e(t){const e=t.createElement("div");return e.classList.add(Br("dfw")()),t.body&&t.body.appendChild(e),e}function R$e(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}class D$e extends C$e{constructor(e){var n,r;const i=e??{},o=(n=i.document)!==null&&n!==void 0?n:sGe(),u=b$e(),h=new P$e(o,{expanded:i.expanded,blade:P1(),props:br.fromObject({title:i.title}),viewProps:ey.create()});super(h,u),this.pool_=u,this.containerElem_=(r=i.container)!==null&&r!==void 0?r:I$e(o),this.containerElem_.appendChild(this.element),this.doc_=o,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw ea.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw ea.alreadyDisposed();if(this.usesDefaultWrapper_){const n=e.parentElement;n&&n.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&R$e(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(r=>{this.pool_.register(e.id,r)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(		2px * 2 + var(--cnt-usz) + var(--cnt-hp)	);position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(		var(--cnt-hp) + (				var(--cnt-usz) + 4px - 6px			) / 2 - 2px	);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(			var(--cnt-vp) + 2px		);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz) * 3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(			var(--bld-hp) - 5px		);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(			2px * 2 + var(--cnt-usz) + var(--cnt-hp)		);text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[E$e,M$e,k$e,GEe,A$e]})}}new UEe("4.0.0");function Li(t){return t==null}function bK(t){return t!==null&&typeof t=="object"}function qW(t){return t!==null&&typeof t=="object"}function O$e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function W0(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,i)=>{const o=t[i],u=e[i];return qW(o)&&qW(u)?Object.assign(Object.assign({},r),{[i]:W0(o,u)}):Object.assign(Object.assign({},r),{[i]:i in e?u:o})},{})}function L$e(t){return bK(t)?"target"in t:!1}const N$e={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Pa{static alreadyDisposed(){return new Pa({type:"alreadydisposed"})}static notBindable(){return new Pa({type:"notbindable"})}static notCompatible(e,n){return new Pa({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new Pa({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new Pa({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=N$e[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class QN{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!QN.isBindable(r))throw Pa.notBindable();if(!(e in r))throw Pa.propertyNotFound(e);r[e]=n}}class ra{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(i=>i.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(i=>{i.handler(n)})}}class F$e{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(i,o)=>i===o,this.emitter=new ra,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,o=this.rawValue_;this.equals_(o,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:i,sender:this}))}}class B$e{constructor(e){this.emitter=new ra,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}}class U$e{constructor(e){this.emitter=new ra,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function os(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new B$e(t):new F$e(t,e)}function z$e(t){return[new U$e(t),(e,n)=>{t.setRawValue(e,n)}]}class cr{constructor(e){this.emitter=new ra,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,i)=>Object.assign(r,{[i]:os(e[i])}),{})}static fromObject(e){const n=this.createCore(e);return new cr(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}}class EM{constructor(e){this.values=cr.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}}class _K{constructor(e){this.values=cr.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let i=e;return Li(r)||(i=Math.max(i,r)),Li(n)||(i=Math.min(i,n)),i}}class V$e{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}}class j$e{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const H$e={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class G$e{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=H$e[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const W$e={"+":t=>t,"-":t=>-t,"~":t=>~t};class $$e{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=W$e[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function wK(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(i!=="")return i}return""}}function XT(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function K$e(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function qT(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function X$e(t,e){const n=qT(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const i=qT(t,e);return i===""?"":r+i}function xK(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=X$e(t,e);return r===""?"":n+r}function ECe(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=K$e(t,e);return e+=r.length,r===""?"":r+qT(t,e)}function q$e(t,e){const n=ECe(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const i=qT(t,e);return e+=i.length,n+r+i+xK(t,e)}function Y$e(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=qT(t,e);return e+=r.length,r===""?"":n+r+xK(t,e)}function Z$e(t,e){const n=ECe(t,e);return e+=n.length,n===""?"":n+xK(t,e)}const Q$e=wK([q$e,Y$e,Z$e]);function J$e(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function e7e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=J$e(t,e);return r===""?"":n+r}function t7e(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function n7e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=t7e(t,e);return r===""?"":n+r}function r7e(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function i7e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=r7e(t,e);return r===""?"":n+r}const s7e=wK([e7e,n7e,i7e]),o7e=wK([s7e,Q$e]);function a7e(t,e){const n=o7e(t,e);return e+=n.length,n===""?null:{evaluable:new j$e(n),cursor:e}}function l7e(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=PCe(t,e);if(!r)return null;e=r.cursor,e+=XT(t,e).length;const i=t.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:e}}function u7e(t,e){var n;return(n=a7e(t,e))!==null&&n!==void 0?n:l7e(t,e)}function CCe(t,e){const n=u7e(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=CCe(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new $$e(r,i.evaluable)}):null}function c7e(t,e,n){n+=XT(e,n).length;const r=t.filter(i=>e.startsWith(i,n))[0];return r?(n+=r.length,n+=XT(e,n).length,{cursor:n,operator:r}):null}function d7e(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const u=c7e(e,n,r);if(!u)break;r=u.cursor;const h=t(n,r);if(!h)return null;r=h.cursor,o=new G$e(u.operator,o,h.evaluable)}return o?{cursor:r,evaluable:o}:null}}const h7e=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>d7e(t,e),CCe);function PCe(t,e){return e+=XT(t,e).length,h7e(t,e)}function p7e(t){const e=PCe(t,0);return!e||e.cursor+XT(t,e.cursor).length!==t.length?null:e.evaluable}function Cc(t){var e;const n=p7e(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function SK(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=Cc(t);if(!Li(e))return e}return 0}function Io(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function ur(t,e,n,r,i){const o=(t-e)/(n-e);return r+o*(i-r)}function m_e(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Xi(t,e,n){return Math.min(Math.max(t,e),n)}function TCe(t,e){return(t%e+e)%e}function f7e(t,e){return Li(t.step)?Math.max(m_e(e),2):m_e(t.step)}function MCe(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function m7e(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function EK(t,e){return Li(t.step)?null:new V$e(t.step,e)}function CK(t){return!Li(t.max)&&!Li(t.min)?new EM({max:t.max,min:t.min}):!Li(t.max)||!Li(t.min)?new _K({max:t.max,min:t.min}):null}function PK(t,e){var n,r,i;return{formatter:(n=t.format)!==null&&n!==void 0?n:Io(f7e(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:MCe(t),pointerScale:(i=t.pointerScale)!==null&&i!==void 0?i:m7e(t,e)}}function TK(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function MK(t){return{constraint:t.constraint,textProps:cr.fromObject(PK(t.params,t.initialValue))}}class ny{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class M1{constructor(e){this.target=e}}class HF extends M1{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}}class g7e extends M1{constructor(e,n){super(e),this.expanded=n}}class v7e extends M1{constructor(e,n){super(e),this.index=n}}class kK extends ny{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new ra,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new HF(this,n.binding.target.read(),e.options.last))}}function y7e(t,e){const r=Object.keys(e).reduce((i,o)=>{if(i===void 0)return;const u=e[o],h=u(t[o]);return h.succeeded?Object.assign(Object.assign({},i),{[o]:h.value}):void 0},{});return r}function b7e(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const i=e(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function _7e(t){return t===null?!1:typeof t=="object"}function Yh(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function g_e(t){return{custom:e=>Yh(e)(t),boolean:Yh(e=>typeof e=="boolean"?e:void 0)(t),number:Yh(e=>typeof e=="number"?e:void 0)(t),string:Yh(e=>typeof e=="string"?e:void 0)(t),function:Yh(e=>typeof e=="function"?e:void 0)(t),constant:e=>Yh(n=>n===e?e:void 0)(t),raw:Yh(e=>e)(t),object:e=>Yh(n=>{if(_7e(n))return y7e(n,e)})(t),array:e=>Yh(n=>{if(Array.isArray(n))return b7e(n,e)})(t)}}const YW={optional:g_e(!0),required:g_e(!1)};function as(t,e){const n=e(YW),r=YW.required.object(n)(t);return r.succeeded?r.value:void 0}function Tc(t,e,n,r){if(e&&!e(t))return!1;const i=as(t,n);return i?r(i):!1}function Mc(t,e){var n;return W0((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function tN(t){return"value"in t}function w7e(t){if(!bK(t)||!("binding"in t))return!1;const e=t.binding;return L$e(e)}const io="http://www.w3.org/2000/svg";function JN(t){t.offsetHeight}function x7e(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function GF(t){return t.ontouchstart!==void 0}function S7e(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const E7e={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function WF(t,e){const n=t.createElementNS(io,"svg");return n.innerHTML=E7e[e],n}function kCe(t,e,n){t.insertBefore(e,t.children[n])}function AK(t){t.parentElement&&t.parentElement.removeChild(t)}function ACe(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function C7e(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function IK(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function Su(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function Pu(t,e,n){Su(t.value(e),n)}const P7e="tp";function fr(t){return(n,r)=>[P7e,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const DP=fr("lbl");function T7e(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(i=>t.createTextNode(i)).forEach((i,o)=>{o>0&&n.appendChild(t.createElement("br")),n.appendChild(i)}),n}class ICe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(DP()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(DP("l")),Pu(n.props,"label",o=>{Li(o)?this.element.classList.add(DP(void 0,"nol")):(this.element.classList.remove(DP(void 0,"nol")),C7e(r),r.appendChild(T7e(e,o)))}),this.element.appendChild(r),this.labelElement=r;const i=e.createElement("div");i.classList.add(DP("v")),this.element.appendChild(i),this.valueElement=i}}class $F{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new ICe(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Tc(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Mc(null,{label:this.props.get("label")})}}function M7e(){return["veryfirst","first","last","verylast"]}const v_e=fr(""),y_e={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class CM{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{M7e().forEach(r=>{n.classList.remove(v_e(void 0,y_e[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(v_e(void 0,y_e[r]))})}),this.viewProps.handleDispose(()=>{AK(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Tc(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Mc(null,Object.assign({},this.viewProps.exportState()))}}class eF extends CM{constructor(e,n){if(n.value!==n.valueController.value)throw Pa.shouldNeverHappen();const r=n.valueController.viewProps,i=new $F(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new ICe(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return Tc(e,n=>{var r,i,o;return super.importState(n)&&this.labelController.importProps(n)&&((o=(i=(r=this.valueController).importProps)===null||i===void 0?void 0:i.call(r,e))!==null&&o!==void 0?o:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return Mc(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}}function RCe(t,e){for(;t.length<e;)t.push(void 0)}function k7e(t){const e=[];return RCe(e,t),e}function A7e(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function I7e(t,e){const n=[...A7e(t),e];return n.length>t.length?n.splice(0,n.length-t.length):RCe(n,t.length),n}class R7e extends ny{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new M1(this))}),this}}function D7e(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function sg(t,e){return n=>{D7e(t,e,n)}}function RK(t,e){Su(t,n=>{e.textContent=n??""})}const ZG=fr("btn");class O7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(ZG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(ZG("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(ZG("t")),RK(n.props.value("title"),i),this.buttonElement.appendChild(i)}}class DCe{constructor(e,n){this.emitter=new ra,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new O7e(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Tc(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Mc(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}}class b_e extends CM{constructor(e,n){const r=new DCe(e,{props:n.buttonProps,viewProps:n.viewProps}),i=new $F(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(e){return Tc(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Mc(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class L7e{constructor(e){const[n,r]=e.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const N7e=new L7e("2.0.0-beta.2");function xs(t){return Object.assign({core:N7e},t)}xs({id:"button",type:"blade",accept(t){const e=as(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new b_e(t.document,{blade:t.blade,buttonProps:cr.fromObject({title:t.params.title}),labelProps:cr.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof b_e?new R7e(t.controller):null}});function F7e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function B7e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function U7e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function z7e(t){return bK(t)?"refresh"in t&&typeof t.refresh=="function":!1}function V7e(t,e){if(!QN.isBindable(t))throw Pa.notBindable();return new QN(t,e)}class j7e{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new ra,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const i=r??{},o=this.controller_.element.ownerDocument,u=this.pool_.createBinding(o,V7e(e,n),i),h=this.pool_.createBindingApi(u);return this.add(h,i.index)}addFolder(e){return B7e(this,e)}addButton(e){return F7e(this,e)}addTab(e){return U7e(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),i=this.pool_.createApi(r);return this.add(i,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.children.forEach(e=>{z7e(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),i=w7e(n.value)?n.value.binding:null;this.emitter_.emit("change",new HF(r,i?i.target.read():n.value.rawValue,e.options.last))}}class DK extends ny{constructor(e,n){super(e),this.rackApi_=new j7e(e.rackController,n)}}class OK extends CM{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Tc(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return Mc(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function ZW(t){return"rackController"in t}class H7e{constructor(e){this.emitter=new ra,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw Pa.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(o=>{this.cache_.add(o)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function G7e(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(tN(r)&&r.value===e)return r}return null}function W7e(t){return ZW(t)?t.rackController.rack.bcSet_:null}class $7e{constructor(e){var n,r;this.emitter=new ra,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new H7e(W7e),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),tN(r))r.value.emitter.on("change",this.onChildValueChange_);else if(ZW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.on("layout",this.onRackLayout_),o.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(tN(r))r.value.emitter.off("change",this.onChildValueChange_);else if(ZW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.off("layout",this.onRackLayout_),o.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(i=>{const o=[];i===n&&(o.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&o.push("veryfirst")),i===r&&(o.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&o.push("verylast")),i.blade.set("positions",o)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=G7e(this.find(tN),e.sender);if(!n)throw Pa.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class LK{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new $7e({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&kCe(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&AK(e.bladeController.view.element)}}function OCe(){return new cr({positions:os([],{equals:O$e})})}class k1 extends cr{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=cr.createCore(n);return new k1(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Li(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};Pu(this,"expanded",r),Pu(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function K7e(t,e){let n=0;return x7e(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),JN(e),n=e.clientHeight,t.set("temporaryExpanded",null),JN(e)}),n}function __e(t,e){e.style.height=t.styleHeight}function KF(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),Li(t.get("expandedHeight"))){const n=K7e(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),JN(e)}),t.emitter.on("change",()=>{__e(t,e)}),__e(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}class X7e extends DK{constructor(e,n){super(e,n),this.emitter_=new ra,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new g7e(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.rackApi_.refresh()}}const LCe=fr("cnt");class q7e{constructor(e,n){var r;this.className_=fr((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),LCe()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Pu(this.foldable_,"completed",sg(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),Pu(n.props,"title",v=>{Li(v)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const o=e.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(this.className_("t")),RK(n.props.value("title"),u),this.buttonElement.appendChild(u),this.titleElement=u;const h=e.createElement("div");h.classList.add(this.className_("m")),this.buttonElement.appendChild(h);const m=e.createElement("div");m.classList.add(this.className_("c")),this.element.appendChild(m),this.containerElement=m}}class w_e extends OK{constructor(e,n){var r;const i=k1.create((r=n.expanded)!==null&&r!==void 0?r:!0),o=new q7e(e,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new LK({blade:n.blade,element:o.containerElement,root:n.root,viewProps:n.viewProps}),view:o})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,KF(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Tc(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Mc(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}xs({id:"folder",type:"blade",accept(t){const e=as(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new w_e(t.document,{blade:t.blade,expanded:t.params.expanded,props:cr.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof w_e?new X7e(t.controller,t.pool):null}});const Y7e=fr("");function x_e(t,e){return sg(t,Y7e(void 0,e))}class Sp extends cr{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=z$e(os(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,i;const o=e??{};return new Sp(cr.createCore({disabled:(n=o.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=o.hidden)!==null&&r!==void 0?r:!1,parent:(i=o.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Su(this.globalDisabled_,x_e(e,"disabled")),Pu(this,"hidden",x_e(e,"hidden"))}bindDisabled(e){Su(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){Su(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const S_e=fr("tbp");class Z7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(S_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(S_e("c")),this.element.appendChild(r),this.containerElement=r}}const OP=fr("tbi");class Q7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(OP()),n.viewProps.bindClassModifiers(this.element),Pu(n.props,"selected",o=>{o?this.element.classList.add(OP(void 0,"sel")):this.element.classList.remove(OP(void 0,"sel"))});const r=e.createElement("button");r.classList.add(OP("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(OP("t")),RK(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class J7e{constructor(e,n){this.emitter=new ra,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Q7e(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class QW extends OK{constructor(e,n){const r=new Z7e(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new LK({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new J7e(e,{props:n.itemProps,viewProps:Sp.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Pu(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return Tc(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Mc(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class eKe extends DK{constructor(e,n){super(e,n),this.emitter_=new ra,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new QW(n,{blade:OCe(),itemProps:cr.fromObject({selected:!1,title:e.title}),props:cr.fromObject({selected:!1}),viewProps:Sp.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}onSelect_(e){this.emitter_.emit("select",new v7e(this,e.rawValue))}}class tKe extends DK{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}}const E_e=-1;class nKe{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=os(!0),this.selectedIndex=os(E_e),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=E_e,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const LP=fr("tab");class rKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(LP(),LCe()),n.viewProps.bindClassModifiers(this.element),Su(n.empty,sg(this.element,LP(void 0,"nop")));const r=e.createElement("div");r.classList.add(LP("t")),this.element.appendChild(r),this.itemsElement=r;const i=e.createElement("div");i.classList.add(LP("i")),this.element.appendChild(i);const o=e.createElement("div");o.classList.add(LP("c")),this.element.appendChild(o),this.contentsElement=o}}class C_e extends OK{constructor(e,n){const r=new nKe,i=new rKe(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new LK({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const o=this.rackController.rack;o.emitter.on("add",this.onRackAdd_),o.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;kCe(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;AK(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}xs({id:"tab",type:"blade",accept(t){const e=as(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new C_e(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new QW(t.document,{blade:OCe(),itemProps:cr.fromObject({selected:!1,title:n.title}),props:cr.fromObject({selected:!1}),viewProps:Sp.create()});e.add(r)}),e},api(t){return t.controller instanceof C_e?new eKe(t.controller,t.pool):t.controller instanceof QW?new tKe(t.controller,t.pool):null}});class NK extends kK{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class iKe{constructor(){this.disabled=!1,this.emitter=new ra}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class sKe{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new ra,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class A1{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}}function YT(t,e){if(t instanceof e)return t;if(t instanceof A1){const n=t.constraints.reduce((r,i)=>r||(i instanceof e?i:null),null);if(n)return n}return null}class XF{constructor(e){this.values=cr.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===e).length>0?e:n[0].value}}function qF(t){var e;const n=YW;if(Array.isArray(t))return(e=as({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function NCe(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function FK(t){return Li(t)?null:new XF(NCe(t))}const QG=fr("lst");class oKe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(QG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(QG("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=e.createElement("div");i.classList.add(QG("m")),i.appendChild(WF(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Pu(this.props_,"options",o=>{ACe(this.selectElement),o.forEach(u=>{const h=e.createElement("option");h.textContent=u.text,this.selectElement.appendChild(h)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class h1{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new oKe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return Tc(e,null,n=>({options:n.required.custom(qF)}),n=>(this.props.set("options",NCe(n.options)),!0))}exportProps(){return Mc(null,{options:this.props.get("options")})}}const P_e=fr("pop");class aKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(P_e()),n.viewProps.bindClassModifiers(this.element),Su(n.shows,sg(this.element,P_e(void 0,"v")))}}class BK{constructor(e,n){this.shows=os(!1),this.viewProps=n.viewProps,this.view=new aKe(e,{shows:this.shows,viewProps:this.viewProps})}}const T_e=fr("txt");class lKe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(T_e()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(T_e("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class YF{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new lKe(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);Li(i)||(this.value.rawValue=i),this.view.refresh()}}function uKe(t){return String(t)}function UK(t){return t==="false"?!1:!!t}function M_e(t){return uKe(t)}function cKe(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const dKe=Io(0);function tF(t){return dKe(t)+"%"}function zK(t){return String(t)}function JW(t){return t}function ry({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function o(u){i||(i=!0,u(),i=!1)}t.emitter.on("change",u=>{o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),e.emitter.on("change",u=>{o(()=>{t.setRawValue(r(t.rawValue,e.rawValue),u.options)}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function so(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function $0(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function Pc(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function hKe(t){return t==="ArrowUp"||t==="ArrowDown"}function nF(t){return hKe(t)||t==="ArrowLeft"||t==="ArrowRight"}function JG(t,e){var n,r;const i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+o.left),y:t.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+o.top)}}class Cp{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new ra,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(JG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(JG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(JG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const cu=fr("txt");class pKe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(cu(),cu(void 0,"num")),n.arrayPosition&&this.element.classList.add(cu(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(cu("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(cu()),this.inputElement.classList.add(cu("i"));const i=e.createElement("div");i.classList.add(cu("k")),this.element.appendChild(i),this.knobElement=i;const o=e.createElementNS(io,"svg");o.classList.add(cu("g")),this.knobElement.appendChild(o);const u=e.createElementNS(io,"path");u.classList.add(cu("gb")),o.appendChild(u),this.guideBodyElem_=u;const h=e.createElementNS(io,"path");h.classList.add(cu("gh")),o.appendChild(h),this.guideHeadElem_=h;const m=e.createElement("div");m.classList.add(fr("tt")()),this.knobElement.appendChild(m),this.tooltipElem_=m,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(cu(void 0,"drg"));return}this.element.classList.add(cu(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=Xi(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class PM{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=os(null),this.view=new pKe(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new Cp(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),o=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let u=e;return i!==void 0&&(u=Math.max(u,i)),o!==void 0&&(u=Math.min(u,o)),u}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);Li(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const n=so(this.props.get("keyScale"),$0(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){so(this.props.get("keyScale"),$0(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const e9=fr("sld");class fKe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(e9()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(e9("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add(e9("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=Xi(ur(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class mKe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new fKe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Cp(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(ur(Xi(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=so(this.props.get("keyScale"),Pc(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){so(this.props.get("keyScale"),Pc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const t9=fr("sldtxt");class gKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(t9());const r=e.createElement("div");r.classList.add(t9("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(t9("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class k_e{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new mKe(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new PM(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new gKe(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Tc(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Mc(null,{max:e.get("max"),min:e.get("min")})}}function vKe(t){return{sliderProps:new cr({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new cr({formatter:os(t.formatter),keyScale:t.keyScale,pointerScale:os(t.pointerScale)})}}const yKe={containerUnitSize:"cnt-usz"};function FCe(t){return`--${yKe[t]}`}class BCe{constructor(e,n){const r=fr(n.viewName);this.element=e.createElement("div"),this.element.classList.add(r()),n.viewProps.bindClassModifiers(this.element)}}function ZT(t){return TK(t)}function Rm(t){if(qW(t))return as(t,ZT)}function ap(t,e){if(!t)return;const n=[],r=EK(t,e);r&&n.push(r);const i=CK(t);return i&&n.push(i),new A1(n)}function UCe(t){if(t==="inline"||t==="popup")return t}function og(t,e){t.write(e)}const AL=fr("ckb");class bKe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(AL()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(AL("l")),this.element.appendChild(r);const i=e.createElement("input");i.classList.add(AL("i")),i.type="checkbox",r.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const o=e.createElement("div");o.classList.add(AL("w")),r.appendChild(o);const u=WF(e,"check");o.appendChild(u),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class _Ke{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new bKe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}}function wKe(t){const e=[],n=FK(t.options);return n&&e.push(n),new A1(e)}xs({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=as(e,r=>({options:r.optional.custom(qF),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>UK,constraint:t=>wKe(t.params),writer:t=>og},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&YT(r,XF);return i?new h1(e,{props:new cr({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new _Ke(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof h1?new NK(t.controller):null}});const s0=fr("col");class xKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(s0()),n.foldable.bindExpandedClass(this.element,s0(void 0,"expanded")),Pu(n.foldable,"completed",sg(this.element,s0(void 0,"cpl")));const r=e.createElement("div");r.classList.add(s0("h")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(s0("s")),r.appendChild(i),this.swatchElement=i;const o=e.createElement("div");if(o.classList.add(s0("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(s0("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}}function SKe(t,e,n){const r=Xi(t/255,0,1),i=Xi(e/255,0,1),o=Xi(n/255,0,1),u=Math.max(r,i,o),h=Math.min(r,i,o),m=u-h;let v=0,x=0;const E=(h+u)/2;return m!==0&&(x=m/(1-Math.abs(u+h-1)),r===u?v=(i-o)/m:i===u?v=2+(o-r)/m:v=4+(r-i)/m,v=v/6+(v<0?1:0)),[v*360,x*100,E*100]}function EKe(t,e,n){const r=(t%360+360)%360,i=Xi(e/100,0,1),o=Xi(n/100,0,1),u=(1-Math.abs(2*o-1))*i,h=u*(1-Math.abs(r/60%2-1)),m=o-u/2;let v,x,E;return r>=0&&r<60?[v,x,E]=[u,h,0]:r>=60&&r<120?[v,x,E]=[h,u,0]:r>=120&&r<180?[v,x,E]=[0,u,h]:r>=180&&r<240?[v,x,E]=[0,h,u]:r>=240&&r<300?[v,x,E]=[h,0,u]:[v,x,E]=[u,0,h],[(v+m)*255,(x+m)*255,(E+m)*255]}function CKe(t,e,n){const r=Xi(t/255,0,1),i=Xi(e/255,0,1),o=Xi(n/255,0,1),u=Math.max(r,i,o),h=Math.min(r,i,o),m=u-h;let v;m===0?v=0:u===r?v=60*(((i-o)/m%6+6)%6):u===i?v=60*((o-r)/m+2):v=60*((r-i)/m+4);const x=u===0?0:m/u,E=u;return[v,x*100,E*100]}function zCe(t,e,n){const r=TCe(t,360),i=Xi(e/100,0,1),o=Xi(n/100,0,1),u=o*i,h=u*(1-Math.abs(r/60%2-1)),m=o-u;let v,x,E;return r>=0&&r<60?[v,x,E]=[u,h,0]:r>=60&&r<120?[v,x,E]=[h,u,0]:r>=120&&r<180?[v,x,E]=[0,u,h]:r>=180&&r<240?[v,x,E]=[0,h,u]:r>=240&&r<300?[v,x,E]=[h,0,u]:[v,x,E]=[u,0,h],[(v+m)*255,(x+m)*255,(E+m)*255]}function PKe(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function TKe(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function Ld(t){return[t[0],t[1],t[2]]}function ZF(t,e){return[t[0],t[1],t[2],e]}const MKe={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:PKe,rgb:EKe},hsv:{hsl:TKe,hsv:(t,e,n)=>[t,e,n],rgb:zCe},rgb:{hsl:SKe,hsv:CKe,rgb:(t,e,n)=>[t,e,n]}};function p1(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function kKe(t,e){return t===e?e:TCe(t,e)}function VCe(t,e,n){var r;const i=p1(e,n);return[e==="rgb"?Xi(t[0],0,i[0]):kKe(t[0],i[0]),Xi(t[1],0,i[1]),Xi(t[2],0,i[2]),Xi((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function A_e(t,e,n,r){const i=p1(e,n),o=p1(e,r);return t.map((u,h)=>u/i[h]*o[h])}function jCe(t,e,n){const r=A_e(t,e.mode,e.type,"int"),i=MKe[e.mode][n.mode](...r);return A_e(i,n.mode,"int",n.type)}class Xr{static black(){return new Xr([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=VCe(e,n,this.type)}getComponents(e){return ZF(jCe(Ld(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const fm=fr("colp");class AKe{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(fm()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(fm("hsv"));const i=e.createElement("div");i.classList.add(fm("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const o=e.createElement("div");o.classList.add(fm("h")),this.hPaletteView_=n.hPaletteView,o.appendChild(this.hPaletteView_.element),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");if(u.classList.add(fm("rgb")),this.textsView_=n.textsView,u.appendChild(this.textsView_.element),this.element.appendChild(u),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const h=e.createElement("div");h.classList.add(fm("a"));const m=e.createElement("div");m.classList.add(fm("ap")),m.appendChild(this.alphaViews_.palette.element),h.appendChild(m);const v=e.createElement("div");v.classList.add(fm("at")),v.appendChild(this.alphaViews_.text.element),h.appendChild(v),this.element.appendChild(h)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function IKe(t){return t==="int"?"int":t==="float"?"float":void 0}function VK(t){return as(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(IKe)}),expanded:e.optional.boolean,picker:e.optional.custom(UCe),readonly:e.optional.constant(!1)}))}function K0(t){return t?.1:1}function HCe(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}class jK{constructor(e,n){this.type="float",this.mode=n,this.comps_=VCe(e,n,this.type)}getComponents(e){return ZF(jCe(Ld(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const RKe={int:(t,e)=>new Xr(t,e),float:(t,e)=>new jK(t,e)};function HK(t,e,n){return RKe[n](t,e)}function DKe(t){return t.type==="float"}function OKe(t){return t.type==="int"}function LKe(t){const e=t.getComponents(),n=p1(t.mode,"int");return new Xr([Math.round(ur(e[0],0,1,0,n[0])),Math.round(ur(e[1],0,1,0,n[1])),Math.round(ur(e[2],0,1,0,n[2])),e[3]],t.mode)}function NKe(t){const e=t.getComponents(),n=p1(t.mode,"int");return new jK([ur(e[0],0,n[0],0,1),ur(e[1],0,n[1],0,1),ur(e[2],0,n[2],0,1),e[3]],t.mode)}function ka(t,e){if(t.type===e)return t;if(OKe(t)&&e==="float")return NKe(t);if(DKe(t)&&e==="int")return LKe(t);throw Pa.shouldNeverHappen()}function FKe(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function _u(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const BKe={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function GCe(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return BKe[r](n)}function WCe(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[_u(e[1],255),_u(e[2],255),_u(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function UKe(t){const e=WCe(t);return e?new Xr(e,"rgb"):null}function $Ce(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[_u(e[1],255),_u(e[2],255),_u(e[3],255),_u(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function zKe(t){const e=$Ce(t);return e?new Xr(e,"rgb"):null}function KCe(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[GCe(e[1]),_u(e[2],100),_u(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function VKe(t){const e=KCe(t);return e?new Xr(e,"hsl"):null}function XCe(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[GCe(e[1]),_u(e[2],100),_u(e[3],100),_u(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function jKe(t){const e=XCe(t);return e?new Xr(e,"hsl"):null}function qCe(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function HKe(t){const e=qCe(t);return e?new Xr(e,"rgb"):null}function YCe(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),ur(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),ur(parseInt(n[4],16),0,255,0,1)]:null}function GKe(t){const e=YCe(t);return e?new Xr(e,"rgb"):null}function ZCe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function I_e(t){return e=>{const n=ZCe(e);return n?HK(n,"rgb",t):null}}function QCe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function R_e(t){return e=>{const n=QCe(e);return n?HK(n,"rgb",t):null}}const WKe=[{parser:qCe,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:YCe,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:WCe,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:$Ce,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:KCe,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:XCe,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:ZCe,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:QCe,result:{alpha:!0,mode:"rgb",notation:"object"}}];function $Ke(t){return WKe.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function KKe(t,e="int"){const n=$Ke(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function TM(t){const e=[HKe,GKe,UKe,zKe,VKe,jKe];t==="int"&&e.push(I_e("int"),R_e("int")),t==="float"&&e.push(I_e("float"),R_e("float"));const n=cKe(e);return r=>{const i=n(r);return i?ka(i,t):null}}function XKe(t){const e=TM("int");if(typeof t!="string")return Xr.black();const n=e(t);return n??Xr.black()}function JCe(t){const e=Xi(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function GK(t,e="#"){const n=Ld(t.getComponents("rgb")).map(JCe).join("");return`${e}${n}`}function WK(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(JCe).join("");return`${e}${r}`}function ePe(t){const e=Io(0),n=ka(t,"int");return`rgb(${Ld(n.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function nN(t){const e=Io(2),n=Io(0);return`rgba(${ka(t,"int").getComponents("rgb").map((o,u)=>(u===3?e:n)(o)).join(", ")})`}function qKe(t){const e=[Io(0),tF,tF],n=ka(t,"int");return`hsl(${Ld(n.getComponents("hsl")).map((i,o)=>e[o](i)).join(", ")})`}function YKe(t){const e=[Io(0),tF,tF,Io(2)];return`hsla(${ka(t,"int").getComponents("hsl").map((i,o)=>e[o](i)).join(", ")})`}function tPe(t,e){const n=Io(e==="float"?2:0),r=["r","g","b"],i=ka(t,e);return`{${Ld(i.getComponents("rgb")).map((u,h)=>`${r[h]}: ${n(u)}`).join(", ")}}`}function ZKe(t){return e=>tPe(e,t)}function nPe(t,e){const n=Io(2),r=Io(e==="float"?2:0),i=["r","g","b","a"];return`{${ka(t,e).getComponents("rgb").map((h,m)=>{const v=m===3?n:r;return`${i[m]}: ${v(h)}`}).join(", ")}}`}function QKe(t){return e=>nPe(e,t)}const JKe=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:GK},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:WK},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:ePe},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:nN},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:qKe},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:YKe},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:ZKe(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:QKe(e)}],[])];function rPe(t){return JKe.reduce((e,n)=>e||(FKe(n.format,t)?n.stringifier:null),null)}const NP=fr("apl");class eXe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(NP()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(NP("b")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(NP("c")),r.appendChild(i),this.colorElem_=i;const o=e.createElement("div");o.classList.add(NP("m")),this.element.appendChild(o),this.markerElem_=o;const u=e.createElement("div");u.classList.add(NP("p")),this.markerElem_.appendChild(u),this.previewElem_=u,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Xr([n[0],n[1],n[2],0],"rgb"),i=new Xr([n[0],n[1],n[2],255],"rgb"),o=["to right",nN(r),nN(i)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=nN(e);const u=ur(n[3],0,1,0,100);this.markerElem_.style.left=`${u}%`}onValueChange_(){this.update_()}}class tXe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new eXe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Cp(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,i=this.value.rawValue,[o,u,h]=i.getComponents("hsv");this.value.setRawValue(new Xr([o,u,h,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=so(K0(!0),Pc(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,h]=r.getComponents("hsv");this.value.setRawValue(new Xr([i,o,u,h+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){so(K0(!0),Pc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const hw=fr("coltxt");function nXe(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,i)=>{const o=t.createElement("option");return o.textContent=i.text,o.value=i.value,r.appendChild(o),r},t.createDocumentFragment())),e}class rXe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(hw()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(hw("m")),this.modeElem_=nXe(e),this.modeElem_.classList.add(hw("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(hw("mm")),i.appendChild(WF(e,"dropdown")),r.appendChild(i),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(hw("w")),this.element.appendChild(o),this.inputsElem_=o,this.inputViews_=n.inputViews,this.applyInputViews_(),Su(n.mode,u=>{this.modeElem_.value=u})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){ACe(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(hw("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}}function iXe(t){return Io(t==="float"?2:0)}function sXe(t,e,n){const r=p1(t,e)[n];return new EM({min:0,max:r})}function oXe(t,e,n){return new PM(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:cr.fromObject({formatter:iXe(e.colorType),keyScale:K0(!1),pointerScale:e.colorType==="float"?.01:1}),value:os(0,{constraint:sXe(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function aXe(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:Cc,viewProps:e.viewProps};return[0,1,2].map(r=>{const i=oXe(t,n,r);return ry({primary:e.value,secondary:i.value,forward(o){return ka(o,e.colorType).getComponents(e.colorMode)[r]},backward(o,u){const h=e.colorMode,v=ka(o,e.colorType).getComponents(h);v[r]=u;const x=HK(ZF(Ld(v),v[3]),h,e.colorType);return ka(x,"int")}}),i})}function lXe(t,e){const n=new YF(t,{parser:TM("int"),props:cr.fromObject({formatter:GK}),value:os(Xr.black()),viewProps:e.viewProps});return ry({primary:e.value,secondary:n.value,forward:r=>new Xr(Ld(r.getComponents()),r.mode),backward:(r,i)=>new Xr(ZF(Ld(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function uXe(t){return t!=="hex"}class cXe{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=os(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new rXe(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return uXe(n)?aXe(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):lXe(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}}const n9=fr("hpl");class dXe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(n9()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(n9("c")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(n9("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=ePe(new Xr([n,100,100],"hsv"));const r=ur(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class hXe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new dXe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Cp(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=ur(Xi(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,o,u,h]=i.getComponents("hsv");this.value.setRawValue(new Xr([r,o,u,h],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=so(K0(!1),Pc(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,h]=r.getComponents("hsv");this.value.setRawValue(new Xr([i+n,o,u,h],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){so(K0(!1),Pc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const r9=fr("svp"),D_e=64;class pXe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(r9()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=D_e,r.width=D_e,r.classList.add(r9("c")),this.element.appendChild(r),this.canvasElement=r;const i=e.createElement("div");i.classList.add(r9("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=S7e(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,o=this.canvasElement.height,u=e.getImageData(0,0,i,o),h=u.data;for(let x=0;x<o;x++)for(let E=0;E<i;E++){const M=ur(E,0,i,0,100),D=ur(x,0,o,100,0),H=zCe(r[0],M,D),F=(x*i+E)*4;h[F]=H[0],h[F+1]=H[1],h[F+2]=H[2],h[F+3]=255}e.putImageData(u,0,0);const m=ur(r[1],0,100,0,100);this.markerElem_.style.left=`${m}%`;const v=ur(r[2],0,100,100,0);this.markerElem_.style.top=`${v}%`}onValueChange_(){this.update_()}}class fXe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new pXe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Cp(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=ur(e.point.x,0,e.bounds.width,0,100),i=ur(e.point.y,0,e.bounds.height,100,0),[o,,,u]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Xr([o,r,i,u],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){nF(e.key)&&e.preventDefault();const[n,r,i,o]=this.value.rawValue.getComponents("hsv"),u=K0(!1),h=so(u,Pc(e)),m=so(u,$0(e));h===0&&m===0||this.value.setRawValue(new Xr([n,r+h,i+m,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=K0(!1),r=so(n,Pc(e)),i=so(n,$0(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class mXe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new hXe(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new fXe(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new tXe(e,{value:this.value,viewProps:this.viewProps}),text:new PM(e,{parser:Cc,props:cr.fromObject({pointerScale:.01,keyScale:.1,formatter:Io(2)}),value:os(0,{constraint:new EM({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&ry({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const o=r.getComponents();return o[3]=i,new Xr(o,r.mode)}}),this.textsC_=new cXe(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new AKe(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const i9=fr("colsw");class gXe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(i9()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(i9("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=e.createElement("button");i.classList.add(i9("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=WK(e)}onValueChange_(){this.update_()}}class vXe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new gXe(e,{value:this.value,viewProps:this.viewProps})}}class $K{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=k1.create(n.expanded),this.swatchC_=new vXe(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new YF(e,{parser:n.parser,props:cr.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new xKe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new BK(e,{viewProps:this.viewProps}):null;const i=new mXe(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),ry({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,u)=>u})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),KF(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=IK(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!GF(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function yXe(t){return Ld(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function bXe(t){return t.getComponents("rgb").reduce((e,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return e<<8|i},0)>>>0}function _Xe(t){return new Xr([t>>16&255,t>>8&255,t&255],"rgb")}function wXe(t){return new Xr([t>>24&255,t>>16&255,t>>8&255,ur(t&255,0,255,0,1)],"rgb")}function xXe(t){return typeof t!="number"?Xr.black():_Xe(t)}function SXe(t){return typeof t!="number"?Xr.black():wXe(t)}function rN(t,e){return typeof t!="object"||Li(t)?!1:e in t&&typeof t[e]=="number"}function iPe(t){return rN(t,"r")&&rN(t,"g")&&rN(t,"b")}function sPe(t){return iPe(t)&&rN(t,"a")}function oPe(t){return iPe(t)}function KK(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function O_e(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function EXe(t){const e=rPe(t);return e?(n,r)=>{og(n,e(r))}:null}function CXe(t){const e=t?bXe:yXe;return(n,r)=>{og(n,e(r))}}function PXe(t,e,n){const i=ka(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function TXe(t,e,n){const i=ka(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function MXe(t,e){return(n,r)=>{t?PXe(n,r,e):TXe(n,r,e)}}function kXe(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function AXe(t){return t?e=>WK(e,"0x"):e=>GK(e,"0x")}function IXe(t){return"color"in t||t.view==="color"}xs({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!IXe(e))return null;const n=VK(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:kXe(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?SXe:xXe,equals:KK,writer:t=>CXe(t.params.supportsAlpha)},controller:t=>{var e,n;return new $K(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:AXe(t.params.supportsAlpha),parser:TM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function RXe(t,e){if(!oPe(t))return ka(Xr.black(),e);if(e==="int"){const n=O_e(t);return new Xr(n,"rgb")}if(e==="float"){const n=O_e(t);return new jK(n,"rgb")}return ka(Xr.black(),"int")}function DXe(t){return sPe(t)}function OXe(t){return e=>{const n=RXe(e,t);return ka(n,"int")}}function LXe(t,e){return n=>t?nPe(n,e):tPe(n,e)}xs({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!oPe(t))return null;const r=VK(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=HCe(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>OXe(t.params.colorType),equals:KK,writer:t=>MXe(DXe(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=sPe(t.initialValue);return new $K(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:LXe(r,t.params.colorType),parser:TM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}});xs({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=KKe(t,HCe(e));if(!n)return null;const r=rPe(n);if(!r)return null;const i=VK(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>XKe,equals:KK,writer:t=>{const e=EXe(t.params.format);if(!e)throw Pa.notBindable();return e}},controller:t=>{var e,n;return new $K(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:TM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});class QF{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,i)=>{var o,u;return(u=(o=this.components[i])===null||o===void 0?void 0:o.constrain(r))!==null&&u!==void 0?u:r});return this.asm_.fromComponents(n)}}const L_e=fr("pndtxt");class NXe{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(L_e()),this.textViews.forEach(r=>{const i=e.createElement("div");i.classList.add(L_e("a")),i.appendChild(r.element),this.element.appendChild(i)})}}function FXe(t,e,n){return new PM(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:os(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class I1{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>FXe(e,n,i)),this.acs_.forEach((r,i)=>{ry({primary:this.value,secondary:r.value,forward:o=>n.assembly.toComponents(o)[i],backward:(o,u)=>{const h=n.assembly.toComponents(o);return h[i]=u,n.assembly.fromComponents(h)}})}),this.view=new NXe(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}}class BXe extends kK{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function UXe(t,e){const n=[],r=EK(t,e);r&&n.push(r);const i=CK(t);i&&n.push(i);const o=FK(t.options);return o&&n.push(o),new A1(n)}xs({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=as(e,r=>Object.assign(Object.assign({},TK(r)),{options:r.optional.custom(qF),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>SK,constraint:t=>UXe(t.params,t.initialValue),writer:t=>og},controller:t=>{const e=t.value,n=t.constraint,r=n&&YT(n,XF);if(r)return new h1(t.document,{props:new cr({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const i=PK(t.params,e.rawValue),o=n&&YT(n,EM);return o?new k_e(t.document,Object.assign(Object.assign({},vKe(Object.assign(Object.assign({},i),{keyScale:os(i.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:Cc,value:e,viewProps:t.viewProps})):new PM(t.document,{parser:Cc,props:cr.fromObject(i),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof k_e?new BXe(t.controller):t.controller.valueController instanceof h1?new NK(t.controller):null}});class Wm{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(Li(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}}const aPe={toComponents:t=>t.getComponents(),fromComponents:t=>new Wm(...t)},pw=fr("p2d");class zXe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(pw()),n.viewProps.bindClassModifiers(this.element),Su(n.expanded,sg(this.element,pw(void 0,"expanded")));const r=e.createElement("div");r.classList.add(pw("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(pw("b")),i.appendChild(WF(e,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const o=e.createElement("div");if(o.classList.add(pw("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(pw("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}}const mm=fr("p2dp");class VXe{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(mm()),n.layout==="popup"&&this.element.classList.add(mm(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(mm("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=e.createElementNS(io,"svg");i.classList.add(mm("g")),this.padElement.appendChild(i),this.svgElem_=i;const o=e.createElementNS(io,"line");o.classList.add(mm("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const u=e.createElementNS(io,"line");u.classList.add(mm("ax")),u.setAttributeNS(null,"x1","50%"),u.setAttributeNS(null,"y1","0"),u.setAttributeNS(null,"x2","50%"),u.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(u);const h=e.createElementNS(io,"line");h.classList.add(mm("l")),h.setAttributeNS(null,"x1","50%"),h.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(h),this.lineElem_=h;const m=e.createElement("div");m.classList.add(mm("m")),this.padElement.appendChild(m),this.markerElem_=m,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=ur(e,-r,+r,0,100),o=ur(n,-r,+r,0,100),u=this.props_.get("invertsY")?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${u}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function N_e(t,e,n){return[so(e[0],Pc(t)),so(e[1],$0(t))*(n?1:-1)]}class jXe{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new VXe(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Cp(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),i=ur(e.point.x,0,e.bounds.width,-r,+r),o=ur(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new Wm(i,o),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){nF(e.key)&&e.preventDefault();const[n,r]=N_e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new Wm(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=N_e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class HXe{constructor(e,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=k1.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new BK(e,{viewProps:this.viewProps}):null;const o=new jXe(e,{layout:n.pickerLayout,props:new cr({invertsY:os(n.invertsY),max:os(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new I1(e,{assembly:aPe,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new zXe(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),ry({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,h)=>h})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),KF(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=IK(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!GF(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function GXe(t){return Wm.isObject(t)?new Wm(t.x,t.y):new Wm}function WXe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function $Xe(t,e){return new QF({assembly:aPe,components:[ap(Object.assign(Object.assign({},t),t.x),e.x),ap(Object.assign(Object.assign({},t),t.y),e.y)]})}function F_e(t,e){var n,r;if(!Li(t.min)||!Li(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const i=MCe(t);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function KXe(t,e){var n,r;const i=F_e(W0(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),o=F_e(W0(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(i,o)}function XXe(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}xs({id:"input-point2d",type:"input",accept:(t,e)=>{if(!Wm.isObject(t))return null;const n=as(e,r=>Object.assign(Object.assign({},ZT(r)),{expanded:r.optional.boolean,picker:r.optional.custom(UCe),readonly:r.optional.constant(!1),x:r.optional.custom(Rm),y:r.optional.object(Object.assign(Object.assign({},ZT(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>GXe,constraint:t=>$Xe(t.params,t.initialValue),equals:Wm.equals,writer:()=>WXe},controller:t=>{var e,n;const r=t.document,i=t.value,o=t.constraint,u=[t.params.x,t.params.y];return new HXe(r,{axes:i.rawValue.getComponents().map((h,m)=>{var v;return MK({constraint:o.components[m],initialValue:h,params:W0(t.params,(v=u[m])!==null&&v!==void 0?v:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:XXe(t.params),max:KXe(t.params,i.rawValue),parser:Cc,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps})}});class Zw{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Li(e))return!1;const n=e.x,r=e.y,i=e.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const lPe={toComponents:t=>t.getComponents(),fromComponents:t=>new Zw(...t)};function qXe(t){return Zw.isObject(t)?new Zw(t.x,t.y,t.z):new Zw}function YXe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function ZXe(t,e){return new QF({assembly:lPe,components:[ap(Object.assign(Object.assign({},t),t.x),e.x),ap(Object.assign(Object.assign({},t),t.y),e.y),ap(Object.assign(Object.assign({},t),t.z),e.z)]})}xs({id:"input-point3d",type:"input",accept:(t,e)=>{if(!Zw.isObject(t))return null;const n=as(e,r=>Object.assign(Object.assign({},ZT(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Rm),y:r.optional.custom(Rm),z:r.optional.custom(Rm)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>qXe,constraint:t=>ZXe(t.params,t.initialValue),equals:Zw.equals,writer:t=>YXe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new I1(t.document,{assembly:lPe,axes:e.rawValue.getComponents().map((i,o)=>{var u;return MK({constraint:n.components[o],initialValue:i,params:W0(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:Cc,value:e,viewProps:t.viewProps})}});class Qw{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Li(e))return!1;const n=e.x,r=e.y,i=e.z,o=e.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const uPe={toComponents:t=>t.getComponents(),fromComponents:t=>new Qw(...t)};function QXe(t){return Qw.isObject(t)?new Qw(t.x,t.y,t.z,t.w):new Qw}function JXe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function eqe(t,e){return new QF({assembly:uPe,components:[ap(Object.assign(Object.assign({},t),t.x),e.x),ap(Object.assign(Object.assign({},t),t.y),e.y),ap(Object.assign(Object.assign({},t),t.z),e.z),ap(Object.assign(Object.assign({},t),t.w),e.w)]})}xs({id:"input-point4d",type:"input",accept:(t,e)=>{if(!Qw.isObject(t))return null;const n=as(e,r=>Object.assign(Object.assign({},ZT(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Rm),x:r.optional.custom(Rm),y:r.optional.custom(Rm),z:r.optional.custom(Rm)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>QXe,constraint:t=>eqe(t.params,t.initialValue),equals:Qw.equals,writer:t=>JXe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new I1(t.document,{assembly:uPe,axes:e.rawValue.getComponents().map((i,o)=>{var u;return MK({constraint:n.components[o],initialValue:i,params:W0(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:Cc,value:e,viewProps:t.viewProps})}});function tqe(t){const e=[],n=FK(t.options);return n&&e.push(n),new A1(e)}xs({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=as(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(qF)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>zK,constraint:t=>tqe(t.params),writer:t=>og},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&YT(r,XF);return i?new h1(e,{props:new cr({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new YF(e,{parser:o=>o,props:cr.fromObject({formatter:JW}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof h1?new NK(t.controller):null}});const MM={monitor:{defaultInterval:200,defaultRows:3}},B_e=fr("mll");class nqe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(B_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(B_e("i")),r.style.height=`calc(var(${FCe("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class XK{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new nqe(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const U_e=fr("sgl");class rqe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(U_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(U_e("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class qK{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new rqe(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}xs({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=as(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>UK},controller:t=>{var e;return t.value.rawValue.length===1?new qK(t.document,{formatter:M_e,value:t.value,viewProps:t.viewProps}):new XK(t.document,{formatter:M_e,rows:(e=t.params.rows)!==null&&e!==void 0?e:MM.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});class iqe extends kK{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const gm=fr("grl");class sqe{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(gm()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(io,"svg");r.classList.add(gm("g")),r.style.height=`calc(var(${FCe("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(io,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const o=e.createElement("div");o.classList.add(gm("t"),fr("tt")()),this.element.appendChild(o),this.tooltipElem_=o,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),i=this.props_.get("max"),o=[];this.value.rawValue.forEach((x,E)=>{if(x===void 0)return;const M=ur(E,0,n,0,e.width),D=ur(x,r,i,e.height,0);o.push([M,D].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const u=this.tooltipElem_,h=this.value.rawValue[this.cursor_.rawValue];if(h===void 0){u.classList.remove(gm("t","a"));return}const m=ur(this.cursor_.rawValue,0,n,0,e.width),v=ur(h,r,i,e.height,0);u.style.left=`${m}px`,u.style.top=`${v}px`,u.textContent=`${this.formatter_(h)}`,u.classList.contains(gm("t","a"))||(u.classList.add(gm("t","a"),gm("t","in")),JN(u),u.classList.remove(gm("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class YK{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=os(-1),this.view=new sqe(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!GF(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Cp(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Tc(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Mc(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(ur(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(ur(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function e$(t){return Li(t.format)?Io(2):t.format}function oqe(t){var e;return t.value.rawValue.length===1?new qK(t.document,{formatter:e$(t.params),value:t.value,viewProps:t.viewProps}):new XK(t.document,{formatter:e$(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:MM.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function aqe(t){var e,n,r;return new YK(t.document,{formatter:e$(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:MM.monitor.defaultRows,props:cr.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function z_e(t){return t.view==="graph"}xs({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=as(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>z_e(t)?64:1,reader:t=>SK},controller:t=>z_e(t.params)?aqe(t):oqe(t),api:t=>t.controller.valueController instanceof YK?new iqe(t.controller):null});xs({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=as(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>zK},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new XK(t.document,{formatter:JW,rows:(e=t.params.rows)!==null&&e!==void 0?e:MM.monitor.defaultRows,value:n,viewProps:t.viewProps}):new qK(t.document,{formatter:JW,value:n,viewProps:t.viewProps})}});class cPe{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller_.emitter.on(e,()=>{r(new M1(this))}),this}}class lqe extends M1{constructor(e,n,r){super(e),this.cell=n,this.index=r}}class dPe extends ny{constructor(e){super(e),this.cellToApiMap_=new Map,this.emitter_=new ra;const n=this.controller.valueController;n.cellControllers.forEach((r,i)=>{const o=new cPe(r);this.cellToApiMap_.set(r,o),r.emitter.on("click",()=>{const u=i%n.size[0],h=Math.floor(i/n.size[0]);this.emitter_.emit("click",{event:new lqe(this,o,[u,h])})})})}cell(e,n){const r=this.controller.valueController,i=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(i)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i.event)}),this}}class hPe{constructor(e,n){this.size=n.size;const[r,i]=this.size,o=[];for(let u=0;u<i;u++)for(let h=0;h<r;h++){const m=new DCe(e,{props:cr.fromObject(Object.assign({},n.cellConfig(h,u))),viewProps:Sp.create()});o.push(m)}this.cellCs_=o,this.viewProps=Sp.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(u=>{u.viewProps.set("disposed",!0)})}),this.view=new BCe(e,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(u=>{this.view.element.appendChild(u.view.element)})}get cellControllers(){return this.cellCs_}}class V_e extends CM{constructor(e,n){const r=n.valueController,i=new $F(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=i}}const uqe=xs({id:"buttongrid",type:"blade",accept(t){const e=as(t,n=>({cells:n.required.function,size:n.required.array(n.required.number),view:n.required.constant("buttongrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new V_e(t.document,{blade:t.blade,labelProps:cr.fromObject({label:t.params.label}),valueController:new hPe(t.document,{cellConfig:t.params.cells,size:t.params.size})})},api(t){return t.controller instanceof V_e?new dPe(t.controller):null}});class pPe extends ny{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get value(){return this.controller.valueController.value.rawValue}set value(e){this.controller.valueController.value.rawValue=e}on(e,n){const r=n.bind(this);return this.controller.valueController.value.emitter.on(e,i=>{r(new HF(this,i.rawValue,i.options.last))}),this}}function du(t,e,n){return t*(1-n)+e*n}const cqe=20,dqe=.001,s9=100;function hqe(t,e){let n=.25,r=.5,i=-1;for(let o=0;o<cqe;o++){const[u,h]=t.curve(r);if(r+=n*(u<e?1:-1),i=h,n*=.5,Math.abs(e-u)<dqe)break}return i}class Qm{constructor(e=0,n=0,r=1,i=1){this.cache_=[],this.comps_=[e,n,r,i]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(e){return Li(e)||!Array.isArray(e)?!1:typeof e[0]=="number"&&typeof e[1]=="number"&&typeof e[2]=="number"&&typeof e[3]=="number"}static equals(e,n){return e.x1===n.x1&&e.y1===n.y1&&e.x2===n.x2&&e.y2===n.y2}curve(e){const n=du(0,this.x1,e),r=du(0,this.y1,e),i=du(this.x1,this.x2,e),o=du(this.y1,this.y2,e),u=du(this.x2,1,e),h=du(this.y2,1,e),m=du(n,i,e),v=du(r,o,e),x=du(i,u,e),E=du(o,h,e);return[du(m,x,e),du(v,E,e)]}y(e){if(this.cache_.length===0){const n=[];for(let r=0;r<s9;r++)n.push(hqe(this,ur(r,0,s9-1,0,1)));this.cache_=n}return this.cache_[Math.round(ur(Xi(e,0,1),0,1,0,s9-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const ZK={toComponents:t=>t.toObject(),fromComponents:t=>new Qm(...t)};function pqe(t){const e=Io(2);return`cubic-bezier(${t.toObject().map(r=>e(r)).join(", ")})`}const j_e=[0,.5,.5,1];function fqe(t){const e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new Qm(...j_e);const n=[e[1],e[2],e[3],e[4]].reduce((r,i)=>{if(!r)return null;const o=Number(i);return isNaN(o)?null:[...r,o]},[]);return new Qm(...n??j_e)}const o0=fr("cbz");class fPe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(o0()),n.viewProps.bindClassModifiers(this.element),n.foldable.bindExpandedClass(this.element,o0(void 0,"expanded")),Pu(n.foldable,"completed",sg(this.element,o0(void 0,"cpl")));const r=e.createElement("div");r.classList.add(o0("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(o0("b")),n.viewProps.bindDisabled(i);const o=e.createElementNS(io,"svg");o.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',i.appendChild(o),r.appendChild(i),this.buttonElement=i;const u=e.createElement("div");if(u.classList.add(o0("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const h=e.createElement("div");h.classList.add(o0("p")),this.element.appendChild(h),this.pickerElement=h}else this.pickerElement=null}}const o9=fr("cbzp");class mPe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(o9()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(o9("g")),this.element.appendChild(r),this.graphElement=r;const i=e.createElement("div");i.classList.add(o9("t")),this.element.appendChild(i),this.textElement=i}}function gPe(t,e){const n=new MutationObserver(i=>{for(const o of i)o.type==="childList"&&o.addedNodes.forEach(u=>{u.contains(u)&&(e(),n.disconnect())})}),r=t.ownerDocument;n.observe(r.body,{attributes:!0,childList:!0,subtree:!0})}const vm=fr("cbzg");function mqe(t,e){return n=>e(t(n))}class vPe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(vm()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(vm("p")),this.element.appendChild(r),this.previewElement=r;const i=e.createElementNS(io,"svg");i.classList.add(vm("g")),this.element.appendChild(i),this.svgElem_=i;const o=e.createElementNS(io,"path");o.classList.add(vm("u")),this.svgElem_.appendChild(o),this.guideElem_=o;const u=e.createElementNS(io,"polyline");u.classList.add(vm("l")),this.svgElem_.appendChild(u),this.lineElem_=u,this.handleElems_=[e.createElement("div"),e.createElement("div")],this.handleElems_.forEach(h=>{h.classList.add(vm("h")),this.element.appendChild(h)}),this.vectorElems_=[e.createElementNS(io,"line"),e.createElementNS(io,"line")],this.vectorElems_.forEach(h=>{h.classList.add(vm("v")),this.svgElem_.appendChild(h)}),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=n.selection,this.handleElems_.forEach((h,m)=>{Su(this.sel_,mqe(v=>v===m,sg(h,vm("h","sel"))))}),gPe(this.element,()=>{this.refresh()})}getVertMargin_(e){return e*.25}valueToPosition(e,n){const r=this.element.getBoundingClientRect(),i=r.width,o=r.height,u=this.getVertMargin_(o);return{x:ur(e,0,1,0,i),y:ur(n,0,1,o-u,u)}}positionToValue(e,n){const r=this.element.getBoundingClientRect(),i=r.width,o=r.height,u=this.getVertMargin_(o);return{x:Xi(ur(e,0,i,0,1),0,1),y:ur(n,o-u,u,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(o=>{const u=this.valueToPosition(0,o),h=this.valueToPosition(1,o);return[`M ${u.x},${u.y}`,`L ${h.x},${h.y}`].join(" ")}).join(" "));const e=this.value_.rawValue,n=[];let r=0;for(;;){const o=this.valueToPosition(...e.curve(r));if(n.push([o.x,o.y].join(",")),r>=1)break;r=Math.min(r+.05,1)}this.lineElem_.setAttributeNS(null,"points",n.join(" "));const i=e.toObject();[0,1].forEach(o=>{const u=this.valueToPosition(o,o),h=this.valueToPosition(i[o*2],i[o*2+1]),m=this.vectorElems_[o];m.setAttributeNS(null,"x1",String(u.x)),m.setAttributeNS(null,"y1",String(u.y)),m.setAttributeNS(null,"x2",String(h.x)),m.setAttributeNS(null,"y2",String(h.y));const v=this.handleElems_[o];v.style.left=`${h.x}px`,v.style.top=`${h.y}px`})}onValueChange_(){this.refresh()}}const H_e=24,G_e=400,W_e=1e3,fw=fr("cbzprv");class yPe{constructor(e,n){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(fw()),n.viewProps.bindClassModifiers(this.element);const r=e.createElementNS(io,"svg");r.classList.add(fw("g")),this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(io,"path");i.classList.add(fw("t")),this.svgElem_.appendChild(i),this.ticksElem_=i;const o=e.createElement("div");o.classList.add(fw("m")),this.element.appendChild(o),this.markerElem_=o,this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.viewProps.handleDispose(this.onDispose_),gPe(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(fw("m","a")),this.startTime_=new Date().getTime()+G_e,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(fw("m","a"))}onDispose_(){this.stop()}updateMarker_(e){const n=this.value_.rawValue.y(Xi(e,0,1));this.markerElem_.style.left=`${n*100}%`}refresh(){const e=this.svgElem_.getBoundingClientRect(),n=e.width,r=e.height,i=[],o=this.value_.rawValue;for(let u=0;u<H_e;u++){const h=ur(u,0,H_e-1,0,1),m=ur(o.y(h),0,1,0,n);i.push(`M ${m},0 v${r}`)}this.ticksElem_.setAttributeNS(null,"d",i.join(" "))}onTimer_(){if(this.startTime_===null)return;const e=new Date().getTime()-this.startTime_,n=e/W_e;this.updateMarker_(n),e>W_e+G_e&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function t$(t,e,n,r){const i=n-t,o=r-e;return Math.sqrt(i*i+o*o)}function gqe(t,e,n,r){const i=t$(t,e,n,r),o=Math.atan2(r-e,n-t),u=Math.round(o/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(u)*i,y:e+Math.sin(u)*i}}class bPe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.keyScale_=n.keyScale,this.value=n.value,this.sel_=os(0),this.viewProps=n.viewProps,this.view=new vPe(e,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new yPe(e,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",i=>{i.stopImmediatePropagation(),i.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const r=new Cp(this.view.element);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(e,n,r){const i=this.sel_.rawValue,o=this.value.rawValue.toObject(),u=this.view.positionToValue(e.x,e.y),h=n?gqe(i,i,u.x,u.y):u;o[i*2]=h.x,o[i*2+1]=h.y,this.value.setRawValue(new Qm(...o),r)}onPointerDown_(e){const n=e.data;if(!n.point)return;const r=this.value.rawValue,i=this.view.valueToPosition(r.x1,r.y1),o=t$(n.point.x,n.point.y,i.x,i.y),u=this.view.valueToPosition(r.x2,r.y2),h=t$(n.point.x,n.point.y,u.x,u.y);this.sel_.rawValue=o<=h?0:1,this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(e){nF(e.key)&&e.preventDefault();const n=this.sel_.rawValue,r=this.value.rawValue.toObject(),i=this.keyScale_.rawValue;r[n*2]+=so(i,Pc(e)),r[n*2+1]+=so(i,$0(e)),this.value.setRawValue(new Qm(...r),{forceEmit:!1,last:!1})}onKeyUp_(e){nF(e.key)&&e.preventDefault();const n=this.keyScale_.rawValue,r=so(n,Pc(e)),i=so(n,$0(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class _Pe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new mPe(e,{viewProps:this.viewProps}),this.gc_=new bPe(e,{keyScale:n.axis.textProps.value("keyScale"),value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const r=Object.assign(Object.assign({},n.axis),{constraint:new _K({max:1,min:0})}),i=Object.assign(Object.assign({},n.axis),{constraint:void 0});this.tc_=new I1(e,{assembly:ZK,axes:[r,i,r,i],parser:Cc,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(e=>e.inputElement)]}refresh(){this.gc_.refresh()}}class n${constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=k1.create(n.expanded),this.view=new fPe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new YF(e,{parser:fqe,props:cr.fromObject({formatter:pqe}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=n.pickerLayout==="popup"?new BK(e,{viewProps:this.viewProps}):null;const r=new _Pe(e,{axis:n.axis,value:this.value,viewProps:this.viewProps});r.allFocusableElements.forEach(i=>{i.addEventListener("blur",this.onPopupChildBlur_),i.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Su(this.popC_.shows,i=>{i&&r.refresh()}),ry({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:i=>i,backward:(i,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),KF(this.foldable_,this.view.pickerElement))}onButtonBlur_(e){if(!this.popC_)return;const n=e.relatedTarget;(!n||!this.popC_.view.element.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=IK(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!GF(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_&&e.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function vqe(){return new QF({assembly:ZK,components:[0,1,2,3].map(t=>t%2===0?new _K({min:0,max:1}):void 0)})}const yqe=xs({id:"cubicbezier",type:"blade",accept(t){const e=as(t,n=>({value:n.required.array(n.required.number),view:n.required.constant("cubicbezier"),expanded:n.optional.boolean,label:n.optional.string,picker:n.optional.custom(r=>r==="inline"||r==="popup"?r:void 0)}));return e?{params:e}:null},controller(t){var e,n;const r=new Qm(...t.params.value),i=os(r,{constraint:vqe(),equals:Qm.equals}),o=new n$(t.document,{axis:{textProps:cr.fromObject({keyScale:.1,pointerScale:.01,formatter:Io(2)})},expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps});return new eF(t.document,{blade:t.blade,props:cr.fromObject({label:t.params.label}),value:i,valueController:o})},api(t){return!(t.controller instanceof eF)||!(t.controller.valueController instanceof n$)?null:new pPe(t.controller)}});class wPe extends ny{begin(){this.controller.valueController.begin()}end(){this.controller.valueController.end()}}const $_e=20;class xPe{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(e){this.start_=e.getTime()}calculateFps_(e){if(this.timestamps_.length===0)return null;const n=this.timestamps_[0];return 1e3*(this.frameCount_-n.frameCount)/(e-n.time)}compactTimestamps_(){if(this.timestamps_.length<=$_e)return;const e=this.timestamps_.length-$_e;this.timestamps_.splice(0,e);const n=this.timestamps_[0].frameCount;this.timestamps_.forEach(r=>{r.frameCount-=n}),this.frameCount_-=n}end(e){if(this.start_===null)return;const n=e.getTime();this.duration_=n-this.start_,this.start_=null,this.fps_=this.calculateFps_(n),this.timestamps_.push({frameCount:this.frameCount_,time:n}),++this.frameCount_,this.compactTimestamps_()}}const FP=fr("fps");class SPe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(FP()),n.viewProps.bindClassModifiers(this.element),this.graphElement=e.createElement("div"),this.graphElement.classList.add(FP("g")),this.element.appendChild(this.graphElement);const r=e.createElement("div");r.classList.add(FP("l")),this.element.appendChild(r);const i=e.createElement("span");i.classList.add(FP("v")),i.textContent="--",r.appendChild(i),this.valueElement=i;const o=e.createElement("span");o.classList.add(FP("u")),o.textContent="FPS",r.appendChild(o)}}class EPe{constructor(e,n){this.stopwatch_=new xPe,this.onTick_=this.onTick_.bind(this),this.ticker_=n.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=n.value,this.viewProps=n.viewProps,this.view=new SPe(e,{viewProps:this.viewProps}),this.graphC_=new YK(e,{formatter:Io(0),props:cr.fromObject({max:n.maxValue,min:n.minValue}),rows:n.rows,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()})}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const e=this.stopwatch_.fps;if(e!==null){const n=this.value_.rawValue;this.value_.rawValue=I7e(n,e),this.view.valueElement.textContent=e.toFixed(0)}}}class K_e extends CM{constructor(e,n){const r=n.valueController,i=new $F(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=i}}function bqe(t,e){return e===0?new iKe:new sKe(t,e??MM.monitor.defaultInterval)}const _qe=xs({id:"fpsgraph",type:"blade",accept(t){const e=as(t,n=>({view:n.required.constant("fpsgraph"),interval:n.optional.number,label:n.optional.string,rows:n.optional.number,max:n.optional.number,min:n.optional.number}));return e?{params:e}:null},controller(t){var e,n,r,i;const o=(e=t.params.interval)!==null&&e!==void 0?e:500;return new K_e(t.document,{blade:t.blade,labelProps:cr.fromObject({label:t.params.label}),valueController:new EPe(t.document,{rows:(n=t.params.rows)!==null&&n!==void 0?n:2,maxValue:(r=t.params.max)!==null&&r!==void 0?r:90,minValue:(i=t.params.min)!==null&&i!==void 0?i:0,ticker:bqe(t.document,o),value:os(k7e(80)),viewProps:t.viewProps})})},api(t){return t.controller instanceof K_e?new wPe(t.controller):null}});class El{constructor(e,n){this.min=e,this.max=n}static isObject(e){if(typeof e!="object"||e===null)return!1;const n=e.min,r=e.max;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.min===n.min&&e.max===n.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const QK={fromComponents:t=>new El(t[0],t[1]),toComponents:t=>[t.min,t.max]};class JK{constructor(e){this.edge=e}constrain(e){var n,r,i,o,u,h,m,v;if(e.min<=e.max)return new El((r=(n=this.edge)===null||n===void 0?void 0:n.constrain(e.min))!==null&&r!==void 0?r:e.min,(o=(i=this.edge)===null||i===void 0?void 0:i.constrain(e.max))!==null&&o!==void 0?o:e.max);const x=(e.min+e.max)/2;return new El((h=(u=this.edge)===null||u===void 0?void 0:u.constrain(x))!==null&&h!==void 0?h:x,(v=(m=this.edge)===null||m===void 0?void 0:m.constrain(x))!==null&&v!==void 0?v:x)}}const a9=fr("rsltxt");class CPe{constructor(e,n){this.sliderView_=n.sliderView,this.textView_=n.textView,this.element=e.createElement("div"),this.element.classList.add(a9());const r=e.createElement("div");r.classList.add(a9("s")),r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(a9("t")),i.appendChild(this.textView_.element),this.element.appendChild(i)}}const a0=fr("rsl");class PPe{constructor(e,n){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=n.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=e.createElement("div"),this.element.classList.add(a0()),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_);const r=e.createElement("div");r.classList.add(a0("t")),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add(a0("b")),r.appendChild(i),this.barElement=i;const o=["min","max"].map(u=>{const h=e.createElement("div");return h.classList.add(a0("k"),a0("k",u)),r.appendChild(h),h});this.knobElements=[o[0],o[1]],this.update_()}valueToX_(e){const n=this.sliderProps_.get("min"),r=this.sliderProps_.get("max");return Xi(ur(e,n,r,0,1),0,1)*100}update_(){const e=this.value_.rawValue;e.length===0?this.element.classList.add(a0(void 0,"zero")):this.element.classList.remove(a0(void 0,"zero"));const n=[this.valueToX_(e.min),this.valueToX_(e.max)];this.barElement.style.left=`${n[0]}%`,this.barElement.style.right=`${100-n[1]}%`,this.knobElements.forEach((r,i)=>{r.style.left=`${n[i]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class TPe{constructor(e,n){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=n.sliderProps,this.viewProps=n.viewProps,this.value=n.value,this.view=new PPe(e,{sliderProps:this.sliderProps,value:this.value,viewProps:n.viewProps});const r=new Cp(this.view.trackElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(e){if(!e.point)return null;const n=(e.point.x+this.ofs_())/e.bounds.width,r=this.sliderProps.get("min"),i=this.sliderProps.get("max");return ur(n,0,1,r,i)}onPointerDown_(e){if(!e.data.point)return;const n=e.data.point.x/e.data.bounds.width,r=this.value.rawValue,i=this.sliderProps.get("min"),o=this.sliderProps.get("max"),u=ur(r.min,i,o,0,1),h=ur(r.max,i,o,0,1);Math.abs(h-n)<=.025?this.grabbing_="max":Math.abs(u-n)<=.025?this.grabbing_="min":n>=u&&n<=h?(this.grabbing_="length",this.grabOffset_=ur(n-u,0,1,0,o-i)):n<u?(this.grabbing_="min",this.onPointerMove_(e)):n>h&&(this.grabbing_="max",this.onPointerMove_(e))}applyPointToValue_(e,n){const r=this.valueFromData_(e);if(r===null)return;const i=this.sliderProps.get("min"),o=this.sliderProps.get("max");if(this.grabbing_==="min")this.value.setRawValue(new El(r,this.value.rawValue.max),n);else if(this.grabbing_==="max")this.value.setRawValue(new El(this.value.rawValue.min,r),n);else if(this.grabbing_==="length"){const u=this.value.rawValue.length;let h=r-this.grabOffset_,m=h+u;h<i?(h=i,m=i+u):m>o&&(h=o-u,m=o),this.value.setRawValue(new El(h,m),n)}}onPointerMove_(e){this.applyPointToValue_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.applyPointToValue_(e.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class MPe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sc_=new TPe(e,n);const r={constraint:n.constraint,textProps:n.textProps};this.tc_=new I1(e,{assembly:QK,axes:[r,r],parser:n.parser,value:this.value,viewProps:n.viewProps}),this.view=new CPe(e,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function wqe(t){return El.isObject(t)?new El(t.min,t.max):new El(0,0)}function xqe(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function Sqe(t){const e=[],n=CK(t);n&&e.push(n);const r=EK(t);return r&&e.push(r),new JK(new A1(e))}const Eqe=xs({id:"input-interval",type:"input",accept:(t,e)=>{if(!El.isObject(t))return null;const n=as(e,r=>Object.assign(Object.assign({},TK(r)),{readonly:r.optional.constant(!1)}));return n?{initialValue:new El(t.min,t.max),params:n}:null},binding:{reader:t=>wqe,constraint:t=>Sqe(t.params),equals:El.equals,writer:t=>xqe},controller(t){const e=t.value,n=t.constraint;if(!(n instanceof JK))throw Pa.shouldNeverHappen();const r=(e.rawValue.min+e.rawValue.max)/2,i=cr.fromObject(PK(t.params,r)),o=n.edge&&YT(n.edge,EM);if(o)return new MPe(t.document,{constraint:n.edge,parser:Cc,sliderProps:new cr({keyScale:i.value("keyScale"),max:o.values.value("max"),min:o.values.value("min")}),textProps:i,value:e,viewProps:t.viewProps});const u={constraint:n.edge,textProps:i};return new I1(t.document,{assembly:QK,axes:[u,u],parser:Cc,value:e,viewProps:t.viewProps})}});class kPe{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}}class APe extends HF{constructor(e,n,r,i,o){super(e,i,o),this.cell=n,this.index=r}}class IPe extends ny{constructor(e){super(e),this.cellToApiMap_=new Map,this.controller.valueController.cellControllers.forEach(r=>{const i=new kPe(r);this.cellToApiMap_.set(r,i)})}get value(){return this.controller.value}cell(e,n){const r=this.controller.valueController,i=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(i)}on(e,n){const r=n.bind(this);this.controller.value.emitter.on(e,i=>{const o=this.controller.valueController,u=o.findCellByValue(i.rawValue);if(!u)return;const h=this.cellToApiMap_.get(u);if(!h)return;const m=o.cellControllers.indexOf(u);r(new APe(this,h,[m%o.size[0],Math.floor(m/o.size[0])],i.rawValue))})}}const BP=fr("rad");class RPe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(BP()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(BP("l")),this.element.appendChild(r);const i=e.createElement("input");i.classList.add(BP("i")),i.name=n.name,i.type="radio",n.viewProps.bindDisabled(i),r.appendChild(i),this.inputElement=i;const o=e.createElement("div");o.classList.add(BP("b")),r.appendChild(o);const u=e.createElement("div");u.classList.add(BP("t")),o.appendChild(u),Pu(n.props,"title",h=>{u.textContent=h})}}class DPe{constructor(e,n){this.props=n.props,this.viewProps=n.viewProps,this.view=new RPe(e,{name:n.name,props:this.props,viewProps:this.viewProps})}}class rF{constructor(e,n){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=n.size;const[r,i]=this.size;for(let o=0;o<i;o++)for(let u=0;u<r;u++){const h=new DPe(e,{name:n.groupName,props:cr.fromObject(Object.assign({},n.cellConfig(u,o))),viewProps:Sp.create()});this.cellCs_.push(h),this.cellValues_.push(n.cellConfig(u,o).value)}this.value=n.value,Su(this.value,o=>{const u=this.findCellByValue(o);u&&(u.view.inputElement.checked=!0)}),this.viewProps=Sp.create(),this.view=new BCe(e,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(o=>{o.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(o.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(e){const n=this.cellValues_.findIndex(r=>r===e);return n<0?null:this.cellCs_[n]}onCellInputChange_(e){const n=e.currentTarget,r=this.cellCs_.findIndex(i=>i.view.inputElement===n);r<0||(this.value.rawValue=this.cellValues_[r])}}const Cqe=function(){return xs({id:"radiogrid",type:"blade",accept(t){const e=as(t,n=>({cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),value:n.required.raw,view:n.required.constant("radiogrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=os(t.params.value);return new eF(t.document,{blade:t.blade,props:cr.fromObject({label:t.params.label}),value:e,valueController:new rF(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:e})})},api(t){return!(t.controller instanceof eF)||!(t.controller.valueController instanceof rF)?null:new IPe(t.controller)}})}();function eX(t){return xs({id:"input-radiogrid",type:"input",accept(e,n){if(!t.isType(e))return null;const r=as(n,i=>({cells:i.required.function,groupName:i.required.string,size:i.required.array(i.required.number),view:i.required.constant("radiogrid")}));return r?{initialValue:e,params:r}:null},binding:t.binding,controller:e=>new rF(e.document,{cellConfig:e.params.cells,groupName:e.params.groupName,size:e.params.size,value:e.value})})}const Pqe=eX({isType:t=>typeof t=="number",binding:{reader:t=>SK,writer:t=>og}}),Tqe=eX({isType:t=>typeof t=="string",binding:{reader:t=>zK,writer:t=>og}}),Mqe=eX({isType:t=>typeof t=="boolean",binding:{reader:t=>UK,writer:t=>og}}),kqe="essentials",Aqe='.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--cnt-usp);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-cbzpv_t{margin-top:var(--cnt-usp)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--cnt-usz) * 5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--cnt-usz));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--cnt-usz) - 8px);margin-top:calc((var(--cnt-usz) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',Iqe=[uqe,yqe,_qe,Eqe,Cqe,Mqe,Pqe,Tqe],Rqe=Object.freeze(Object.defineProperty({__proto__:null,ButtonCellApi:cPe,ButtonGridApi:dPe,ButtonGridController:hPe,CubicBezier:Qm,CubicBezierApi:pPe,CubicBezierAssembly:ZK,CubicBezierController:n$,CubicBezierGraphController:bPe,CubicBezierGraphView:vPe,CubicBezierPickerController:_Pe,CubicBezierPickerView:mPe,CubicBezierPreviewView:yPe,CubicBezierView:fPe,FpsGraphBladeApi:wPe,FpsGraphController:EPe,FpsView:SPe,Fpswatch:xPe,Interval:El,IntervalAssembly:QK,IntervalConstraint:JK,RadioCellApi:kPe,RadioController:DPe,RadioGridApi:IPe,RadioGridController:rF,RadioView:RPe,RangeSliderController:TPe,RangeSliderTextController:MPe,RangeSliderTextView:CPe,RangeSliderView:PPe,TpRadioGridChangeEvent:APe,css:Aqe,id:kqe,plugins:Iqe},Symbol.toStringTag,{value:"Module"}));class Dqe extends FF{constructor(n){super(n);yr(this,"bindCBs");yr(this,"buttonCBs");yr(this,"pane");yr(this,"appCallbacks",0);yr(this,"editorCallbacks",0);yr(this,"inspectorFolder");this.bindCBs=new Map,this.buttonCBs=new Map,n.editor&&this.createGUI()}createGUI(){this.pane=new D$e({title:"GUI"}),this.pane.registerPlugin(Rqe)}dispose(){var n;this.bindCBs.clear(),this.buttonCBs.clear(),this.appCallbacks=0,this.editorCallbacks=0,this.app.editor&&((n=this.pane)==null||n.dispose(),this.pane=void 0)}addFolder(n,r=void 0,i=void 0){if(this.app.editor)return this.pane===void 0&&this.createGUI(),(i!==void 0?i:this.pane).addFolder({title:n,...r});this.app.send({event:"addFolder",target:"app",data:{name:n,params:r,parent:i}})}get bindID(){return`debug_${Math.max(this.appCallbacks,this.editorCallbacks)}`}bind(n,r,i,o=void 0){const u=this.bindID,h=i.onChange!==void 0?i.onChange:gEe;this.bindCBs.set(u,h),this.app.editor?(this.pane===void 0&&this.createGUI(),(o!==void 0?o:this.pane).addBinding(n,r,i).on("change",v=>{this.app.send({event:"updateBind",target:"app",data:{id:u,value:v.value}})}),this.editorCallbacks++):(this.app.send({event:"bindObject",target:"app",data:{id:u,name:r,params:i,parent:o}}),this.appCallbacks++)}triggerBind(n,r){const i=this.bindCBs.get(n);i!==void 0?i(r):console.warn(`No callback for: ${n}`,r)}button(n,r,i=void 0){const o=this.bindID;this.buttonCBs.set(o,r),this.app.editor?(this.pane===void 0&&this.createGUI(),(i!==void 0?i:this.pane).addButton({title:n}).on("click",()=>{this.app.send({event:"clickButton",target:"app",data:{id:o}})}),this.editorCallbacks++):(this.app.send({event:"addButton",target:"app",data:{id:o,name:n,callback:r,parent:i}}),this.appCallbacks++)}triggerButton(n){const r=this.buttonCBs.get(n);r!==void 0&&r()}createInspector(){this.inspectorFolder=this.addFolder("Inspector",this.pane)}clearInspector(){const n=this.inspectorFolder.children.length-1;for(let r=n;r>-1;--r)this.inspectorFolder.remove(this.inspectorFolder.children[r])}handleApp(n){switch(n.event){case"addFolder":this.addFolder(n.data.name,n.data.params,n.data.parent);break;case"bindObject":this.bind(n.data.name,n.data.params,n.data.parent);break;case"updateBind":this.triggerBind(n.data.id,n.data.value);break;case"addButton":this.button(n.data.name,n.data.callback,n.data.parent);break;case"clickButton":this.triggerButton(n.data.id);break}}}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var X_e=function(t){return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};try{URL.revokeObjectURL(X_e(""))}catch{X_e=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var vu=Uint8Array,Dm=Uint16Array,r$=Uint32Array,OPe=new vu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),LPe=new vu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Oqe=new vu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),NPe=function(t,e){for(var n=new Dm(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new r$(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},FPe=NPe(OPe,2),BPe=FPe[0],Lqe=FPe[1];BPe[28]=258,Lqe[258]=28;var Nqe=NPe(LPe,0),Fqe=Nqe[0],i$=new Dm(32768);for(var Ai=0;Ai<32768;++Ai){var ym=(Ai&43690)>>>1|(Ai&21845)<<1;ym=(ym&52428)>>>2|(ym&13107)<<2,ym=(ym&61680)>>>4|(ym&3855)<<4,i$[Ai]=((ym&65280)>>>8|(ym&255)<<8)>>>1}var aT=function(t,e,n){for(var r=t.length,i=0,o=new Dm(e);i<r;++i)++o[t[i]-1];var u=new Dm(e);for(i=0;i<e;++i)u[i]=u[i-1]+o[i-1]<<1;var h;if(n){h=new Dm(1<<e);var m=15-e;for(i=0;i<r;++i)if(t[i])for(var v=i<<4|t[i],x=e-t[i],E=u[t[i]-1]++<<x,M=E|(1<<x)-1;E<=M;++E)h[i$[E]>>>m]=v}else for(h=new Dm(r),i=0;i<r;++i)t[i]&&(h[i]=i$[u[t[i]-1]++]>>>15-t[i]);return h},kM=new vu(288);for(var Ai=0;Ai<144;++Ai)kM[Ai]=8;for(var Ai=144;Ai<256;++Ai)kM[Ai]=9;for(var Ai=256;Ai<280;++Ai)kM[Ai]=7;for(var Ai=280;Ai<288;++Ai)kM[Ai]=8;var UPe=new vu(32);for(var Ai=0;Ai<32;++Ai)UPe[Ai]=5;var Bqe=aT(kM,9,1),Uqe=aT(UPe,5,1),l9=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},vc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},u9=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},zqe=function(t){return(t/8|0)+(t&7&&1)},Vqe=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Dm?Dm:t instanceof r$?r$:vu)(n-e);return r.set(t.subarray(e,n)),r},jqe=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new vu(0);var i=!e||n,o=!n||n.i;n||(n={}),e||(e=new vu(r*3));var u=function($t){var Zt=e.length;if($t>Zt){var gn=new vu(Math.max(Zt*2,$t));gn.set(e),e=gn}},h=n.f||0,m=n.p||0,v=n.b||0,x=n.l,E=n.d,M=n.m,D=n.n,H=r*8;do{if(!x){n.f=h=vc(t,m,1);var F=vc(t,m+1,3);if(m+=3,F)if(F==1)x=Bqe,E=Uqe,M=9,D=5;else if(F==2){var W=vc(t,m,31)+257,Z=vc(t,m+10,15)+4,ve=W+vc(t,m+5,31)+1;m+=14;for(var X=new vu(ve),se=new vu(19),pe=0;pe<Z;++pe)se[Oqe[pe]]=vc(t,m+pe*3,7);m+=Z*3;for(var J=l9(se),ne=(1<<J)-1,Ee=aT(se,J,1),pe=0;pe<ve;){var ot=Ee[vc(t,m,ne)];m+=ot&15;var B=ot>>>4;if(B<16)X[pe++]=B;else{var wt=0,ue=0;for(B==16?(ue=3+vc(t,m,3),m+=2,wt=X[pe-1]):B==17?(ue=3+vc(t,m,7),m+=3):B==18&&(ue=11+vc(t,m,127),m+=7);ue--;)X[pe++]=wt}}var Ye=X.subarray(0,W),Te=X.subarray(W);M=l9(Ye),D=l9(Te),x=aT(Ye,M,1),E=aT(Te,D,1)}else throw"invalid block type";else{var B=zqe(m)+4,z=t[B-4]|t[B-3]<<8,P=B+z;if(P>r){if(o)throw"unexpected EOF";break}i&&u(v+z),e.set(t.subarray(B,P),v),n.b=v+=z,n.p=m=P*8;continue}if(m>H){if(o)throw"unexpected EOF";break}}i&&u(v+131072);for(var st=(1<<M)-1,Be=(1<<D)-1,Xe=m;;Xe=m){var wt=x[u9(t,m)&st],qe=wt>>>4;if(m+=wt&15,m>H){if(o)throw"unexpected EOF";break}if(!wt)throw"invalid length/literal";if(qe<256)e[v++]=qe;else if(qe==256){Xe=m,x=null;break}else{var dt=qe-254;if(qe>264){var pe=qe-257,Pt=OPe[pe];dt=vc(t,m,(1<<Pt)-1)+BPe[pe],m+=Pt}var cn=E[u9(t,m)&Be],ht=cn>>>4;if(!cn)throw"invalid distance";m+=cn&15;var Te=Fqe[ht];if(ht>3){var Pt=LPe[ht];Te+=u9(t,m)&(1<<Pt)-1,m+=Pt}if(m>H){if(o)throw"unexpected EOF";break}i&&u(v+131072);for(var Et=v+dt;v<Et;v+=4)e[v]=e[v-Te],e[v+1]=e[v+1-Te],e[v+2]=e[v+2-Te],e[v+3]=e[v+3-Te];v=Et}}n.l=x,n.p=Xe,n.b=v,x&&(h=1,n.m=M,n.d=E,n.n=D)}while(!h);return v==e.length?e:Vqe(e,0,v)},Hqe=new vu(0),Gqe=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Wqe(t,e){return jqe((Gqe(t),t.subarray(2,-4)),e)}var $qe=typeof TextDecoder<"u"&&new TextDecoder,Kqe=0;try{$qe.decode(Hqe,{stream:!0}),Kqe=1}catch{}function zPe(t,e,n){const r=n.length-t-1;if(e>=n[r])return r-1;if(e<=n[t])return t;let i=t,o=r,u=Math.floor((i+o)/2);for(;e<n[u]||e>=n[u+1];)e<n[u]?o=u:i=u,u=Math.floor((i+o)/2);return u}function Xqe(t,e,n,r){const i=[],o=[],u=[];i[0]=1;for(let h=1;h<=n;++h){o[h]=e-r[t+1-h],u[h]=r[t+h]-e;let m=0;for(let v=0;v<h;++v){const x=u[v+1],E=o[h-v],M=i[v]/(x+E);i[v]=m+x*M,m=E*M}i[h]=m}return i}function qqe(t,e,n,r){const i=zPe(t,r,e),o=Xqe(i,r,t,e),u=new Ar(0,0,0,0);for(let h=0;h<=t;++h){const m=n[i-t+h],v=o[h],x=m.w*v;u.x+=m.x*x,u.y+=m.y*x,u.z+=m.z*x,u.w+=m.w*v}return u}function Yqe(t,e,n,r,i){const o=[];for(let E=0;E<=n;++E)o[E]=0;const u=[];for(let E=0;E<=r;++E)u[E]=o.slice(0);const h=[];for(let E=0;E<=n;++E)h[E]=o.slice(0);h[0][0]=1;const m=o.slice(0),v=o.slice(0);for(let E=1;E<=n;++E){m[E]=e-i[t+1-E],v[E]=i[t+E]-e;let M=0;for(let D=0;D<E;++D){const H=v[D+1],F=m[E-D];h[E][D]=H+F;const B=h[D][E-1]/h[E][D];h[D][E]=M+H*B,M=F*B}h[E][E]=M}for(let E=0;E<=n;++E)u[0][E]=h[E][n];for(let E=0;E<=n;++E){let M=0,D=1;const H=[];for(let F=0;F<=n;++F)H[F]=o.slice(0);H[0][0]=1;for(let F=1;F<=r;++F){let B=0;const z=E-F,P=n-F;E>=F&&(H[D][0]=H[M][0]/h[P+1][z],B=H[D][0]*h[z][P]);const W=z>=-1?1:-z,Z=E-1<=P?F-1:n-E;for(let X=W;X<=Z;++X)H[D][X]=(H[M][X]-H[M][X-1])/h[P+1][z+X],B+=H[D][X]*h[z+X][P];E<=P&&(H[D][F]=-H[M][F-1]/h[P+1][E],B+=H[D][F]*h[E][P]),u[F][E]=B;const ve=M;M=D,D=ve}}let x=n;for(let E=1;E<=r;++E){for(let M=0;M<=n;++M)u[E][M]*=x;x*=n-E}return u}function Zqe(t,e,n,r,i){const o=i<t?i:t,u=[],h=zPe(t,r,e),m=Yqe(h,r,t,o,e),v=[];for(let x=0;x<n.length;++x){const E=n[x].clone(),M=E.w;E.x*=M,E.y*=M,E.z*=M,v[x]=E}for(let x=0;x<=o;++x){const E=v[h-t].clone().multiplyScalar(m[x][0]);for(let M=1;M<=t;++M)E.add(v[h-t+M].clone().multiplyScalar(m[x][M]));u[x]=E}for(let x=o+1;x<=i+1;++x)u[x]=new Ar(0,0,0);return u}function Qqe(t,e){let n=1;for(let i=2;i<=t;++i)n*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=t-e;++i)r*=i;return n/r}function Jqe(t){const e=t.length,n=[],r=[];for(let o=0;o<e;++o){const u=t[o];n[o]=new Fe(u.x,u.y,u.z),r[o]=u.w}const i=[];for(let o=0;o<e;++o){const u=n[o].clone();for(let h=1;h<=o;++h)u.sub(i[o-h].clone().multiplyScalar(Qqe(o,h)*r[h]));i[o]=u.divideScalar(r[0])}return i}function eYe(t,e,n,r,i){const o=Zqe(t,e,n,r,i);return Jqe(o)}class tYe extends Z6e{constructor(e,n,r,i,o){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=i||0,this.endKnot=o||this.knots.length-1;for(let u=0;u<r.length;++u){const h=r[u];this.controlPoints[u]=new Ar(h.x,h.y,h.z,h.w)}}getPoint(e,n=new Fe){const r=n,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=qqe(this.degree,this.knots,this.controlPoints,i);return o.w!==1&&o.divideScalar(o.w),r.set(o.x,o.y,o.z)}getTangent(e,n=new Fe){const r=n,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=eYe(this.degree,this.knots,this.controlPoints,i,1);return r.copy(o[1]).normalize(),r}}let gr,bs,wa;class nYe extends Ym{constructor(e){super(e)}load(e,n,r,i){const o=this,u=o.path===""?N8e.extractUrlBase(e):o.path,h=new k8e(this.manager);h.setPath(o.path),h.setResponseType("arraybuffer"),h.setRequestHeader(o.requestHeader),h.setWithCredentials(o.withCredentials),h.load(e,function(m){try{n(o.parse(m,u))}catch(v){i?i(v):console.error(v),o.manager.itemError(e)}},r,i)}parse(e,n){if(lYe(e))gr=new aYe().parse(e);else{const i=GPe(e);if(!uYe(i))throw new Error("THREE.FBXLoader: Unknown format.");if(Y_e(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Y_e(i));gr=new oYe().parse(i)}const r=new fEe(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new rYe(r,this.manager).parse(gr)}}class rYe{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){bs=this.parseConnections();const e=this.parseImages(),n=this.parseTextures(e),r=this.parseMaterials(n),i=this.parseDeformers(),o=new iYe().parse(i);return this.parseScene(i,o,r),wa}parseConnections(){const e=new Map;return"Connections"in gr&&gr.Connections.connections.forEach(function(r){const i=r[0],o=r[1],u=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const h={ID:o,relationship:u};e.get(i).parents.push(h),e.has(o)||e.set(o,{parents:[],children:[]});const m={ID:i,relationship:u};e.get(o).children.push(m)}),e}parseImages(){const e={},n={};if("Video"in gr.Objects){const r=gr.Objects.Video;for(const i in r){const o=r[i],u=parseInt(i);if(e[u]=o.RelativeFilename||o.Filename,"Content"in o){const h=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,m=typeof o.Content=="string"&&o.Content!=="";if(h||m){const v=this.parseImage(r[i]);n[o.RelativeFilename||o.Filename]=v}}}}for(const r in e){const i=e[r];n[i]!==void 0?e[r]=n[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const n=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let o;switch(i){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof n=="string")return"data:"+o+";base64,"+n;{const u=new Uint8Array(n);return window.URL.createObjectURL(new Blob([u],{type:o}))}}parseTextures(e){const n=new Map;if("Texture"in gr.Objects){const r=gr.Objects.Texture;for(const i in r){const o=this.parseTexture(r[i],e);n.set(parseInt(i),o)}}return n}parseTexture(e,n){const r=this.loadTexture(e,n);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,o=e.WrapModeV,u=i!==void 0?i.value:0,h=o!==void 0?o.value:0;if(r.wrapS=u===0?bp:_l,r.wrapT=h===0?bp:_l,"Scaling"in e){const m=e.Scaling.value;r.repeat.x=m[0],r.repeat.y=m[1]}if("Translation"in e){const m=e.Translation.value;r.offset.x=m[0],r.offset.y=m[1]}return r}loadTexture(e,n){let r;const i=this.textureLoader.path,o=bs.get(e.id).children;o!==void 0&&o.length>0&&n[o[0].ID]!==void 0&&(r=n[o[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let u;const h=e.FileName.slice(-3).toLowerCase();if(h==="tga"){const m=this.manager.getHandler(".tga");m===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),u=new Yi):(m.setPath(this.textureLoader.path),u=m.load(r))}else if(h==="dds"){const m=this.manager.getHandler(".dds");m===null?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",e.RelativeFilename),u=new Yi):(m.setPath(this.textureLoader.path),u=m.load(r))}else h==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),u=new Yi):u=this.textureLoader.load(r);return this.textureLoader.setPath(i),u}parseMaterials(e){const n=new Map;if("Material"in gr.Objects){const r=gr.Objects.Material;for(const i in r){const o=this.parseMaterial(r[i],e);o!==null&&n.set(parseInt(i),o)}}return n}parseMaterial(e,n){const r=e.id,i=e.attrName;let o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!bs.has(r))return null;const u=this.parseParameters(e,n,r);let h;switch(o.toLowerCase()){case"phong":h=new oT;break;case"lambert":h=new y8e;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),h=new oT;break}return h.setValues(u),h.name=i,h}parseParameters(e,n,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new _n().fromArray(e.Diffuse.value).convertSRGBToLinear():e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new _n().fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new _n().fromArray(e.Emissive.value).convertSRGBToLinear():e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new _n().fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new _n().fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new _n().fromArray(e.SpecularColor.value).convertSRGBToLinear());const o=this;return bs.get(r).children.forEach(function(u){const h=u.relationship;switch(h){case"Bump":i.bumpMap=o.getTexture(n,u.ID);break;case"Maya|TEX_ao_map":i.aoMap=o.getTexture(n,u.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=o.getTexture(n,u.ID),i.map!==void 0&&(i.map.colorSpace=is);break;case"DisplacementColor":i.displacementMap=o.getTexture(n,u.ID);break;case"EmissiveColor":i.emissiveMap=o.getTexture(n,u.ID),i.emissiveMap!==void 0&&(i.emissiveMap.colorSpace=is);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=o.getTexture(n,u.ID);break;case"ReflectionColor":i.envMap=o.getTexture(n,u.ID),i.envMap!==void 0&&(i.envMap.mapping=ON,i.envMap.colorSpace=is);break;case"SpecularColor":i.specularMap=o.getTexture(n,u.ID),i.specularMap!==void 0&&(i.specularMap.colorSpace=is);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=o.getTexture(n,u.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",h);break}}),i}getTexture(e,n){return"LayeredTexture"in gr.Objects&&n in gr.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=bs.get(n).children[0].ID),e.get(n)}parseDeformers(){const e={},n={};if("Deformer"in gr.Objects){const r=gr.Objects.Deformer;for(const i in r){const o=r[i],u=bs.get(parseInt(i));if(o.attrType==="Skin"){const h=this.parseSkeleton(u,r);h.ID=i,u.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),h.geometryID=u.parents[0].ID,e[i]=h}else if(o.attrType==="BlendShape"){const h={id:i};h.rawTargets=this.parseMorphTargets(u,r),h.id=i,u.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[i]=h}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){const r=[];return e.children.forEach(function(i){const o=n[i.ID];if(o.attrType!=="Cluster")return;const u={ID:i.ID,indices:[],weights:[],transformLink:new Fn().fromArray(o.TransformLink.a)};"Indexes"in o&&(u.indices=o.Indexes.a,u.weights=o.Weights.a),r.push(u)}),{rawBones:r,bones:[]}}parseMorphTargets(e,n){const r=[];for(let i=0;i<e.children.length;i++){const o=e.children[i],u=n[o.ID],h={name:u.attrName,initialWeight:u.DeformPercent,id:u.id,fullWeights:u.FullWeights.a};if(u.attrType!=="BlendShapeChannel")return;h.geoID=bs.get(parseInt(o.ID)).children.filter(function(m){return m.relationship===void 0})[0].ID,r.push(h)}return r}parseScene(e,n,r){wa=new E0;const i=this.parseModels(e.skeletons,n,r),o=gr.Objects.Model,u=this;i.forEach(function(m){const v=o[m.ID];u.setLookAtProperties(m,v),bs.get(m.ID).parents.forEach(function(E){const M=i.get(E.ID);M!==void 0&&M.add(m)}),m.parent===null&&wa.add(m)}),this.bindSkeleton(e.skeletons,n,i),this.addGlobalSceneSettings(),wa.traverse(function(m){if(m.userData.transformData){m.parent&&(m.userData.transformData.parentMatrix=m.parent.matrix,m.userData.transformData.parentMatrixWorld=m.parent.matrixWorld);const v=jPe(m.userData.transformData);m.applyMatrix4(v),m.updateWorldMatrix()}});const h=new sYe().parse();wa.children.length===1&&wa.children[0].isGroup&&(wa.children[0].animations=h,wa=wa.children[0]),wa.animations=h}parseModels(e,n,r){const i=new Map,o=gr.Objects.Model;for(const u in o){const h=parseInt(u),m=o[u],v=bs.get(h);let x=this.buildSkeleton(v,e,h,m.attrName);if(!x){switch(m.attrType){case"Camera":x=this.createCamera(v);break;case"Light":x=this.createLight(v);break;case"Mesh":x=this.createMesh(v,n,r);break;case"NurbsCurve":x=this.createCurve(v,n);break;case"LimbNode":case"Root":x=new LW;break;case"Null":default:x=new E0;break}x.name=m.attrName?Nr.sanitizeNodeName(m.attrName):"",x.userData.originalName=m.attrName,x.ID=h}this.getTransformData(x,m),i.set(h,x)}return i}buildSkeleton(e,n,r,i){let o=null;return e.parents.forEach(function(u){for(const h in n){const m=n[h];m.rawBones.forEach(function(v,x){if(v.ID===u.ID){const E=o;o=new LW,o.matrixWorld.copy(v.transformLink),o.name=i?Nr.sanitizeNodeName(i):"",o.userData.originalName=i,o.ID=r,m.bones[x]=o,E!==null&&o.add(E)}})}}),o}createCamera(e){let n,r;if(e.children.forEach(function(i){const o=gr.Objects.NodeAttribute[i.ID];o!==void 0&&(r=o)}),r===void 0)n=new Kr;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let o=1;r.NearPlane!==void 0&&(o=r.NearPlane.value/1e3);let u=1e3;r.FarPlane!==void 0&&(u=r.FarPlane.value/1e3);let h=window.innerWidth,m=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(h=r.AspectWidth.value,m=r.AspectHeight.value);const v=h/m;let x=45;r.FieldOfView!==void 0&&(x=r.FieldOfView.value);const E=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:n=new js(x,v,o,u),E!==null&&n.setFocalLength(E);break;case 1:n=new hM(-h/2,h/2,m/2,-m/2,o,u);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),n=new Kr;break}}return n}createLight(e){let n,r;if(e.children.forEach(function(i){const o=gr.Objects.NodeAttribute[i.ID];o!==void 0&&(r=o)}),r===void 0)n=new Kr;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let o=16777215;r.Color!==void 0&&(o=new _n().fromArray(r.Color.value).convertSRGBToLinear());let u=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(u=0);let h=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?h=0:h=r.FarAttenuationEnd.value);const m=1;switch(i){case 0:n=new Nbe(o,u,h,m);break;case 1:n=new H7(o,u);break;case 2:let v=Math.PI/3;r.InnerAngle!==void 0&&(v=Qo.degToRad(r.InnerAngle.value));let x=0;r.OuterAngle!==void 0&&(x=Qo.degToRad(r.OuterAngle.value),x=Math.max(x,1)),n=new j7(o,u,h,v,x,m);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),n=new Nbe(o,u);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(e,n,r){let i,o=null,u=null;const h=[];return e.children.forEach(function(m){n.has(m.ID)&&(o=n.get(m.ID)),r.has(m.ID)&&h.push(r.get(m.ID))}),h.length>1?u=h:h.length>0?u=h[0]:(u=new oT({name:Ym.DEFAULT_MATERIAL_NAME,color:13421772}),h.push(u)),"color"in o.attributes&&h.forEach(function(m){m.vertexColors=!0}),o.FBX_Deformer?(i=new rEe(o,u),i.normalizeSkinWeights()):i=new _s(o,u),i}createCurve(e,n){const r=e.children.reduce(function(o,u){return n.has(u.ID)&&(o=n.get(u.ID)),o},null),i=new pM({name:Ym.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new iEe(r,i)}getTransformData(e,n){const r={};"InheritType"in n&&(r.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?r.eulerOrder=HPe(n.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in n&&(r.translation=n.Lcl_Translation.value),"PreRotation"in n&&(r.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(r.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(r.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(r.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(r.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(r.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(r.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(r.rotationPivot=n.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,n){"LookAtProperty"in n&&bs.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const o=gr.Objects.Model[i.ID];if("Lcl_Translation"in o){const u=o.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(u),wa.add(e.target)):e.lookAt(new Fe().fromArray(u))}}})}bindSkeleton(e,n,r){const i=this.parsePoseNodes();for(const o in e){const u=e[o];bs.get(parseInt(u.ID)).parents.forEach(function(m){if(n.has(m.ID)){const v=m.ID;bs.get(v).parents.forEach(function(E){r.has(E.ID)&&r.get(E.ID).bind(new F7(u.bones),i[E.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in gr.Objects){const n=gr.Objects.Pose;for(const r in n)if(n[r].attrType==="BindPose"&&n[r].NbPoseNodes>0){const i=n[r].PoseNode;Array.isArray(i)?i.forEach(function(o){e[o.Node]=new Fn().fromArray(o.Matrix.a)}):e[i.Node]=new Fn().fromArray(i.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in gr){if("AmbientColor"in gr.GlobalSettings){const e=gr.GlobalSettings.AmbientColor.value,n=e[0],r=e[1],i=e[2];if(n!==0||r!==0||i!==0){const o=new _n(n,r,i).convertSRGBToLinear();wa.add(new L8e(o,1))}}"UnitScaleFactor"in gr.GlobalSettings&&(wa.userData.unitScaleFactor=gr.GlobalSettings.UnitScaleFactor.value)}}}class iYe{constructor(){this.negativeMaterialIndices=!1}parse(e){const n=new Map;if("Geometry"in gr.Objects){const r=gr.Objects.Geometry;for(const i in r){const o=bs.get(parseInt(i)),u=this.parseGeometry(o,r[i],e);n.set(parseInt(i),u)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),n}parseGeometry(e,n,r){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,r);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,r){const i=r.skeletons,o=[],u=e.parents.map(function(E){return gr.Objects.Model[E.ID]});if(u.length===0)return;const h=e.children.reduce(function(E,M){return i[M.ID]!==void 0&&(E=i[M.ID]),E},null);e.children.forEach(function(E){r.morphTargets[E.ID]!==void 0&&o.push(r.morphTargets[E.ID])});const m=u[0],v={};"RotationOrder"in m&&(v.eulerOrder=HPe(m.RotationOrder.value)),"InheritType"in m&&(v.inheritType=parseInt(m.InheritType.value)),"GeometricTranslation"in m&&(v.translation=m.GeometricTranslation.value),"GeometricRotation"in m&&(v.rotation=m.GeometricRotation.value),"GeometricScaling"in m&&(v.scale=m.GeometricScaling.value);const x=jPe(v);return this.genGeometry(n,h,o,x)}genGeometry(e,n,r,i){const o=new ko;e.attrName&&(o.name=e.attrName);const u=this.parseGeoNode(e,n),h=this.genBuffers(u),m=new ki(h.vertex,3);if(m.applyMatrix4(i),o.setAttribute("position",m),h.colors.length>0&&o.setAttribute("color",new ki(h.colors,3)),n&&(o.setAttribute("skinIndex",new R7(h.weightsIndices,4)),o.setAttribute("skinWeight",new ki(h.vertexWeights,4)),o.FBX_Deformer=n),h.normal.length>0){const v=new pr().getNormalMatrix(i),x=new ki(h.normal,3);x.applyNormalMatrix(v),o.setAttribute("normal",x)}if(h.uvs.forEach(function(v,x){const E=x===0?"uv":`uv${x}`;o.setAttribute(E,new ki(h.uvs[x],2))}),u.material&&u.material.mappingType!=="AllSame"){let v=h.materialIndex[0],x=0;if(h.materialIndex.forEach(function(E,M){E!==v&&(o.addGroup(x,M-x,v),v=E,x=M)}),o.groups.length>0){const E=o.groups[o.groups.length-1],M=E.start+E.count;M!==h.materialIndex.length&&o.addGroup(M,h.materialIndex.length-M,v)}o.groups.length===0&&o.addGroup(0,h.materialIndex.length,h.materialIndex[0])}return this.addMorphTargets(o,e,r,i),o}parseGeoNode(e,n){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},n!==null&&(r.skeleton=n,n.rawBones.forEach(function(i,o){i.indices.forEach(function(u,h){r.weightTable[u]===void 0&&(r.weightTable[u]=[]),r.weightTable[u].push({id:o,weight:i.weights[h]})})})),r}genBuffers(e){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,o=!1,u=[],h=[],m=[],v=[],x=[],E=[];const M=this;return e.vertexIndices.forEach(function(D,H){let F,B=!1;D<0&&(D=D^-1,B=!0);let z=[],P=[];if(u.push(D*3,D*3+1,D*3+2),e.color){const W=IL(H,r,D,e.color);m.push(W[0],W[1],W[2])}if(e.skeleton){if(e.weightTable[D]!==void 0&&e.weightTable[D].forEach(function(W){P.push(W.weight),z.push(W.id)}),P.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const W=[0,0,0,0],Z=[0,0,0,0];P.forEach(function(ve,X){let se=ve,pe=z[X];Z.forEach(function(J,ne,Ee){if(se>J){Ee[ne]=se,se=J;const ot=W[ne];W[ne]=pe,pe=ot}})}),z=W,P=Z}for(;P.length<4;)P.push(0),z.push(0);for(let W=0;W<4;++W)x.push(P[W]),E.push(z[W])}if(e.normal){const W=IL(H,r,D,e.normal);h.push(W[0],W[1],W[2])}e.material&&e.material.mappingType!=="AllSame"&&(F=IL(H,r,D,e.material)[0],F<0&&(M.negativeMaterialIndices=!0,F=0)),e.uv&&e.uv.forEach(function(W,Z){const ve=IL(H,r,D,W);v[Z]===void 0&&(v[Z]=[]),v[Z].push(ve[0]),v[Z].push(ve[1])}),i++,B&&(M.genFace(n,e,u,F,h,m,v,x,E,i),r++,i=0,u=[],h=[],m=[],v=[],x=[],E=[])}),n}getNormalNewell(e){const n=new Fe(0,0,0);for(let r=0;r<e.length;r++){const i=e[r],o=e[(r+1)%e.length];n.x+=(i.y-o.y)*(i.z+o.z),n.y+=(i.z-o.z)*(i.x+o.x),n.z+=(i.x-o.x)*(i.y+o.y)}return n.normalize(),n}getNormalTangentAndBitangent(e){const n=this.getNormalNewell(e),i=(Math.abs(n.z)>.5?new Fe(0,1,0):new Fe(0,0,1)).cross(n).normalize(),o=n.clone().cross(i).normalize();return{normal:n,tangent:i,bitangent:o}}flattenVertex(e,n,r){return new an(e.dot(n),e.dot(r))}genFace(e,n,r,i,o,u,h,m,v,x){let E;if(x>3){const M=[];for(let B=0;B<r.length;B+=3)M.push(new Fe(n.vertexPositions[r[B]],n.vertexPositions[r[B+1]],n.vertexPositions[r[B+2]]));const{tangent:D,bitangent:H}=this.getNormalTangentAndBitangent(M),F=[];for(const B of M)F.push(this.flattenVertex(B,D,H));E=z7.triangulateShape(F,[])}else E=[[0,1,2]];for(const[M,D,H]of E)e.vertex.push(n.vertexPositions[r[M*3]]),e.vertex.push(n.vertexPositions[r[M*3+1]]),e.vertex.push(n.vertexPositions[r[M*3+2]]),e.vertex.push(n.vertexPositions[r[D*3]]),e.vertex.push(n.vertexPositions[r[D*3+1]]),e.vertex.push(n.vertexPositions[r[D*3+2]]),e.vertex.push(n.vertexPositions[r[H*3]]),e.vertex.push(n.vertexPositions[r[H*3+1]]),e.vertex.push(n.vertexPositions[r[H*3+2]]),n.skeleton&&(e.vertexWeights.push(m[M*4]),e.vertexWeights.push(m[M*4+1]),e.vertexWeights.push(m[M*4+2]),e.vertexWeights.push(m[M*4+3]),e.vertexWeights.push(m[D*4]),e.vertexWeights.push(m[D*4+1]),e.vertexWeights.push(m[D*4+2]),e.vertexWeights.push(m[D*4+3]),e.vertexWeights.push(m[H*4]),e.vertexWeights.push(m[H*4+1]),e.vertexWeights.push(m[H*4+2]),e.vertexWeights.push(m[H*4+3]),e.weightsIndices.push(v[M*4]),e.weightsIndices.push(v[M*4+1]),e.weightsIndices.push(v[M*4+2]),e.weightsIndices.push(v[M*4+3]),e.weightsIndices.push(v[D*4]),e.weightsIndices.push(v[D*4+1]),e.weightsIndices.push(v[D*4+2]),e.weightsIndices.push(v[D*4+3]),e.weightsIndices.push(v[H*4]),e.weightsIndices.push(v[H*4+1]),e.weightsIndices.push(v[H*4+2]),e.weightsIndices.push(v[H*4+3])),n.color&&(e.colors.push(u[M*3]),e.colors.push(u[M*3+1]),e.colors.push(u[M*3+2]),e.colors.push(u[D*3]),e.colors.push(u[D*3+1]),e.colors.push(u[D*3+2]),e.colors.push(u[H*3]),e.colors.push(u[H*3+1]),e.colors.push(u[H*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),n.normal&&(e.normal.push(o[M*3]),e.normal.push(o[M*3+1]),e.normal.push(o[M*3+2]),e.normal.push(o[D*3]),e.normal.push(o[D*3+1]),e.normal.push(o[D*3+2]),e.normal.push(o[H*3]),e.normal.push(o[H*3+1]),e.normal.push(o[H*3+2])),n.uv&&n.uv.forEach(function(F,B){e.uvs[B]===void 0&&(e.uvs[B]=[]),e.uvs[B].push(h[B][M*2]),e.uvs[B].push(h[B][M*2+1]),e.uvs[B].push(h[B][D*2]),e.uvs[B].push(h[B][D*2+1]),e.uvs[B].push(h[B][H*2]),e.uvs[B].push(h[B][H*2+1])})}addMorphTargets(e,n,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const o=this;r.forEach(function(u){u.rawTargets.forEach(function(h){const m=gr.Objects.Geometry[h.geoID];m!==void 0&&o.genMorphGeometry(e,n,m,i,h.name)})})}genMorphGeometry(e,n,r,i,o){const u=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],h=r.Vertices!==void 0?r.Vertices.a:[],m=r.Indexes!==void 0?r.Indexes.a:[],v=e.attributes.position.count*3,x=new Float32Array(v);for(let H=0;H<m.length;H++){const F=m[H]*3;x[F]=h[H*3],x[F+1]=h[H*3+1],x[F+2]=h[H*3+2]}const E={vertexIndices:u,vertexPositions:x},M=this.genBuffers(E),D=new ki(M.vertex,3);D.name=o||r.attrName,D.applyMatrix4(i),e.morphAttributes.position.push(D)}parseNormals(e){const n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let o=[];return r==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:o,mappingType:n,referenceType:r}}parseUVs(e){const n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let o=[];return r==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:i,indices:o,mappingType:n,referenceType:r}}parseVertexColors(e){const n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let o=[];r==="IndexToDirect"&&(o=e.ColorIndex.a);for(let u=0,h=new _n;u<i.length;u+=4)h.fromArray(i,u).convertSRGBToLinear().toArray(i,u);return{dataSize:4,buffer:i,indices:o,mappingType:n,referenceType:r}}parseMaterialIndices(e){const n=e.MappingInformationType,r=e.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,o=[];for(let u=0;u<i.length;++u)o.push(u);return{dataSize:1,buffer:i,indices:o,mappingType:n,referenceType:r}}parseNurbsGeometry(e){const n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new ko;const r=n-1,i=e.KnotVector.a,o=[],u=e.Points.a;for(let E=0,M=u.length;E<M;E+=4)o.push(new Ar().fromArray(u,E));let h,m;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){h=r,m=i.length-1-h;for(let E=0;E<r;++E)o.push(o[E])}const x=new tYe(r,i,o,h,m).getPoints(o.length*12);return new ko().setFromPoints(x)}}class sYe{parse(){const e=[],n=this.parseClips();if(n!==void 0)for(const r in n){const i=n[r],o=this.addClip(i);e.push(o)}return e}parseClips(){if(gr.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const e=gr.Objects.AnimationCurveNode,n=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const o={id:i.id,attr:i.attrName,curves:{}};n.set(o.id,o)}}return n}parseAnimationCurves(e){const n=gr.Objects.AnimationCurve;for(const r in n){const i={id:n[r].id,times:n[r].KeyTime.a.map(cYe),values:n[r].KeyValueFloat.a},o=bs.get(i.id);if(o!==void 0){const u=o.parents[0].ID,h=o.parents[0].relationship;h.match(/X/)?e.get(u).curves.x=i:h.match(/Y/)?e.get(u).curves.y=i:h.match(/Z/)?e.get(u).curves.z=i:h.match(/DeformPercent/)&&e.has(u)&&(e.get(u).curves.morph=i)}}}parseAnimationLayers(e){const n=gr.Objects.AnimationLayer,r=new Map;for(const i in n){const o=[],u=bs.get(parseInt(i));u!==void 0&&(u.children.forEach(function(m,v){if(e.has(m.ID)){const x=e.get(m.ID);if(x.curves.x!==void 0||x.curves.y!==void 0||x.curves.z!==void 0){if(o[v]===void 0){const E=bs.get(m.ID).parents.filter(function(M){return M.relationship!==void 0})[0].ID;if(E!==void 0){const M=gr.Objects.Model[E.toString()];if(M===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",m);return}const D={modelName:M.attrName?Nr.sanitizeNodeName(M.attrName):"",ID:M.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};wa.traverse(function(H){H.ID===M.id&&(D.transform=H.matrix,H.userData.transformData&&(D.eulerOrder=H.userData.transformData.eulerOrder))}),D.transform||(D.transform=new Fn),"PreRotation"in M&&(D.preRotation=M.PreRotation.value),"PostRotation"in M&&(D.postRotation=M.PostRotation.value),o[v]=D}}o[v]&&(o[v][x.attr]=x)}else if(x.curves.morph!==void 0){if(o[v]===void 0){const E=bs.get(m.ID).parents.filter(function(z){return z.relationship!==void 0})[0].ID,M=bs.get(E).parents[0].ID,D=bs.get(M).parents[0].ID,H=bs.get(D).parents[0].ID,F=gr.Objects.Model[H],B={modelName:F.attrName?Nr.sanitizeNodeName(F.attrName):"",morphName:gr.Objects.Deformer[E].attrName};o[v]=B}o[v][x.attr]=x}}}),r.set(parseInt(i),o))}return r}parseAnimStacks(e){const n=gr.Objects.AnimationStack,r={};for(const i in n){const o=bs.get(parseInt(i)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const u=e.get(o[0].ID);r[i]={name:n[i].attrName,layer:u}}return r}addClip(e){let n=[];const r=this;return e.layer.forEach(function(i){n=n.concat(r.generateTracks(i))}),new UW(e.name,-1,n)}generateTracks(e){const n=[];let r=new Fe,i=new Fe;if(e.transform&&e.transform.decompose(r,new As,i),r=r.toArray(),i=i.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");o!==void 0&&n.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&n.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");o!==void 0&&n.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&n.push(o)}return n}generateVectorTrack(e,n,r,i){const o=this.getTimesForAllAxes(n),u=this.getKeyframeTrackValues(o,n,r);return new UT(e+"."+i,o,u)}generateRotationTrack(e,n,r,i,o){let u,h;if(n.x!==void 0&&n.y!==void 0&&n.z!==void 0){const E=this.interpolateRotations(n.x,n.y,n.z,o);u=E[0],h=E[1]}r!==void 0&&(r=r.map(Qo.degToRad),r.push(o),r=new Ea().fromArray(r),r=new As().setFromEuler(r)),i!==void 0&&(i=i.map(Qo.degToRad),i.push(o),i=new Ea().fromArray(i),i=new As().setFromEuler(i).invert());const m=new As,v=new Ea,x=[];if(!h||!u)return new V0(e+".quaternion",[],[]);for(let E=0;E<h.length;E+=3)v.set(h[E],h[E+1],h[E+2],o),m.setFromEuler(v),r!==void 0&&m.premultiply(r),i!==void 0&&m.multiply(i),E>2&&new As().fromArray(x,(E-3)/3*4).dot(m)<0&&m.set(-m.x,-m.y,-m.z,-m.w),m.toArray(x,E/3*4);return new V0(e+".quaternion",u,x)}generateMorphTrack(e){const n=e.DeformPercent.curves.morph,r=n.values.map(function(o){return o/100}),i=wa.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new BT(e.modelName+".morphTargetInfluences["+i+"]",n.times,r)}getTimesForAllAxes(e){let n=[];if(e.x!==void 0&&(n=n.concat(e.x.times)),e.y!==void 0&&(n=n.concat(e.y.times)),e.z!==void 0&&(n=n.concat(e.z.times)),n=n.sort(function(r,i){return r-i}),n.length>1){let r=1,i=n[0];for(let o=1;o<n.length;o++){const u=n[o];u!==i&&(n[r]=u,i=u,r++)}n=n.slice(0,r)}return n}getKeyframeTrackValues(e,n,r){const i=r,o=[];let u=-1,h=-1,m=-1;return e.forEach(function(v){if(n.x&&(u=n.x.times.indexOf(v)),n.y&&(h=n.y.times.indexOf(v)),n.z&&(m=n.z.times.indexOf(v)),u!==-1){const x=n.x.values[u];o.push(x),i[0]=x}else o.push(i[0]);if(h!==-1){const x=n.y.values[h];o.push(x),i[1]=x}else o.push(i[1]);if(m!==-1){const x=n.z.values[m];o.push(x),i[2]=x}else o.push(i[2])}),o}interpolateRotations(e,n,r,i){const o=[],u=[];o.push(e.times[0]),u.push(Qo.degToRad(e.values[0])),u.push(Qo.degToRad(n.values[0])),u.push(Qo.degToRad(r.values[0]));for(let h=1;h<e.values.length;h++){const m=[e.values[h-1],n.values[h-1],r.values[h-1]];if(isNaN(m[0])||isNaN(m[1])||isNaN(m[2]))continue;const v=m.map(Qo.degToRad),x=[e.values[h],n.values[h],r.values[h]];if(isNaN(x[0])||isNaN(x[1])||isNaN(x[2]))continue;const E=x.map(Qo.degToRad),M=[x[0]-m[0],x[1]-m[1],x[2]-m[2]],D=[Math.abs(M[0]),Math.abs(M[1]),Math.abs(M[2])];if(D[0]>=180||D[1]>=180||D[2]>=180){const F=Math.max(...D)/180,B=new Ea(...v,i),z=new Ea(...E,i),P=new As().setFromEuler(B),W=new As().setFromEuler(z);P.dot(W)&&W.set(-W.x,-W.y,-W.z,-W.w);const Z=e.times[h-1],ve=e.times[h]-Z,X=new As,se=new Ea;for(let pe=0;pe<1;pe+=1/F)X.copy(P.clone().slerp(W.clone(),pe)),o.push(Z+pe*ve),se.setFromQuaternion(X,i),u.push(se.x),u.push(se.y),u.push(se.z)}else o.push(e.times[h]),u.push(Qo.degToRad(e.values[h])),u.push(Qo.degToRad(n.values[h])),u.push(Qo.degToRad(r.values[h]))}return[o,u]}}class oYe{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new VPe,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,o){const u=i.match(/^[\s\t]*;/),h=i.match(/^[\s\t]*$/);if(u||h)return;const m=i.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),v=i.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),x=i.match("^\\t{"+(n.currentIndent-1)+"}}");m?n.parseNodeBegin(i,m):v?n.parseNodeProperty(i,v,r[++o]):x?n.popStack():i.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,n){const r=n[1].trim().replace(/^"/,"").replace(/"$/,""),i=n[2].split(",").map(function(m){return m.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:r},u=this.parseNodeAttr(i),h=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,o):r in h?(r==="PoseNode"?h.PoseNode.push(o):h[r].id!==void 0&&(h[r]={},h[r][h[r].id]=h[r]),u.id!==""&&(h[r][u.id]=o)):typeof u.id=="number"?(h[r]={},h[r][u.id]=o):r!=="Properties70"&&(r==="PoseNode"?h[r]=[o]:h[r]=o),typeof u.id=="number"&&(o.id=u.id),u.name!==""&&(o.attrName=u.name),u.type!==""&&(o.attrType=u.type),this.pushStack(o)}parseNodeAttr(e){let n=e[0];e[0]!==""&&(n=parseInt(e[0]),isNaN(n)&&(n=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:n,name:r,type:i}}parseNodeProperty(e,n,r){let i=n[1].replace(/^"/,"").replace(/"$/,"").trim(),o=n[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&o===","&&(o=r.replace(/"/g,"").replace(/,$/,"").trim());const u=this.getCurrentNode();if(u.name==="Properties70"){this.parseNodeSpecialProperty(e,i,o);return}if(i==="C"){const m=o.split(",").slice(1),v=parseInt(m[0]),x=parseInt(m[1]);let E=o.split(",").slice(3);E=E.map(function(M){return M.trim().replace(/^"/,"")}),i="connections",o=[v,x],hYe(o,E),u[i]===void 0&&(u[i]=[])}i==="Node"&&(u.id=o),i in u&&Array.isArray(u[i])?u[i].push(o):i!=="a"?u[i]=o:u.a=o,this.setCurrentProp(u,i),i==="a"&&o.slice(-1)!==","&&(u.a=d9(o))}parseNodePropertyContinued(e){const n=this.getCurrentNode();n.a+=e,e.slice(-1)!==","&&(n.a=d9(n.a))}parseNodeSpecialProperty(e,n,r){const i=r.split('",').map(function(x){return x.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=i[0],u=i[1],h=i[2],m=i[3];let v=i[4];switch(u){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":v=parseFloat(v);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":v=d9(v);break}this.getPrevNode()[o]={type:u,type2:h,flag:m,value:v},this.setCurrentProp(this.getPrevNode(),o)}}class aYe{parse(e){const n=new q_e(e);n.skip(23);const r=n.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new VPe;for(;!this.endOfContent(n);){const o=this.parseNode(n,r);o!==null&&i.add(o.name,o)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){const r={},i=n>=7500?e.getUint64():e.getUint32(),o=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();const u=e.getUint8(),h=e.getString(u);if(i===0)return null;const m=[];for(let M=0;M<o;M++)m.push(this.parseProperty(e));const v=m.length>0?m[0]:"",x=m.length>1?m[1]:"",E=m.length>2?m[2]:"";for(r.singleProperty=o===1&&e.getOffset()===i;i>e.getOffset();){const M=this.parseNode(e,n);M!==null&&this.parseSubNode(h,r,M)}return r.propertyList=m,typeof v=="number"&&(r.id=v),x!==""&&(r.attrName=x),E!==""&&(r.attrType=E),h!==""&&(r.name=h),r}parseSubNode(e,n,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(n[r.name]=r,r.a=i):n[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(o,u){u!==0&&i.push(o)}),n.connections===void 0&&(n.connections=[]),n.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(o){n[o]=r[o]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],o=r.propertyList[1];const u=r.propertyList[2],h=r.propertyList[3];let m;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?m=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:m=r.propertyList[4],n[i]={type:o,type2:u,flag:h,value:m}}else n[r.name]===void 0?typeof r.id=="number"?(n[r.name]={},n[r.name][r.id]=r):n[r.name]=r:r.name==="PoseNode"?(Array.isArray(n[r.name])||(n[r.name]=[n[r.name]]),n[r.name].push(r)):n[r.name][r.id]===void 0&&(n[r.name][r.id]=r)}parseProperty(e){const n=e.getString(1);let r;switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),o=e.getUint32(),u=e.getUint32();if(o===0)switch(n){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const h=Wqe(new Uint8Array(e.getArrayBuffer(u))),m=new q_e(h.buffer);switch(n){case"b":case"c":return m.getBooleanArray(i);case"d":return m.getFloat64Array(i);case"f":return m.getFloat32Array(i);case"i":return m.getInt32Array(i);case"l":return m.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class q_e{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=n!==void 0?n:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const n=[];for(let r=0;r<e;r++)n.push(this.getBoolean());return n}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getInt32());return n}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n&2147483648?(n=~n&4294967295,e=~e&4294967295,e===4294967295&&(n=n+1&4294967295),e=e+1&4294967295,-(n*4294967296+e)):n*4294967296+e}getInt64Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getFloat32());return n}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getFloat64());return n}getArrayBuffer(e){const n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){const n=this.offset;let r=new Uint8Array(this.dv.buffer,n,e);this.skip(e);const i=r.indexOf(0);return i>=0&&(r=new Uint8Array(this.dv.buffer,n,i)),this._textDecoder.decode(r)}}class VPe{add(e,n){this[e]=n}}function lYe(t){const e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===GPe(t,0,e.length)}function uYe(t){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function r(i){const o=t[i-1];return t=t.slice(n+i),n++,o}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function Y_e(t){const e=/FBXVersion: (\d+)/,n=t.match(e);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function cYe(t){return t/46186158e3}const dYe=[];function IL(t,e,n,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=t;break;case"ByPolygon":i=e;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const o=i*r.dataSize,u=o+r.dataSize;return pYe(dYe,r.buffer,o,u)}const c9=new Ea,mw=new Fe;function jPe(t){const e=new Fn,n=new Fn,r=new Fn,i=new Fn,o=new Fn,u=new Fn,h=new Fn,m=new Fn,v=new Fn,x=new Fn,E=new Fn,M=new Fn,D=t.inheritType?t.inheritType:0;if(t.translation&&e.setPosition(mw.fromArray(t.translation)),t.preRotation){const ne=t.preRotation.map(Qo.degToRad);ne.push(t.eulerOrder||Ea.DEFAULT_ORDER),n.makeRotationFromEuler(c9.fromArray(ne))}if(t.rotation){const ne=t.rotation.map(Qo.degToRad);ne.push(t.eulerOrder||Ea.DEFAULT_ORDER),r.makeRotationFromEuler(c9.fromArray(ne))}if(t.postRotation){const ne=t.postRotation.map(Qo.degToRad);ne.push(t.eulerOrder||Ea.DEFAULT_ORDER),i.makeRotationFromEuler(c9.fromArray(ne)),i.invert()}t.scale&&o.scale(mw.fromArray(t.scale)),t.scalingOffset&&h.setPosition(mw.fromArray(t.scalingOffset)),t.scalingPivot&&u.setPosition(mw.fromArray(t.scalingPivot)),t.rotationOffset&&m.setPosition(mw.fromArray(t.rotationOffset)),t.rotationPivot&&v.setPosition(mw.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(E.copy(t.parentMatrix),x.copy(t.parentMatrixWorld));const H=n.clone().multiply(r).multiply(i),F=new Fn;F.extractRotation(x);const B=new Fn;B.copyPosition(x);const z=B.clone().invert().multiply(x),P=F.clone().invert().multiply(z),W=o,Z=new Fn;if(D===0)Z.copy(F).multiply(H).multiply(P).multiply(W);else if(D===1)Z.copy(F).multiply(P).multiply(H).multiply(W);else{const Ee=new Fn().scale(new Fe().setFromMatrixScale(E)).clone().invert(),ot=P.clone().multiply(Ee);Z.copy(F).multiply(H).multiply(ot).multiply(W)}const ve=v.clone().invert(),X=u.clone().invert();let se=e.clone().multiply(m).multiply(v).multiply(n).multiply(r).multiply(i).multiply(ve).multiply(h).multiply(u).multiply(o).multiply(X);const pe=new Fn().copyPosition(se),J=x.clone().multiply(pe);return M.copyPosition(J),se=M.clone().multiply(Z),se.premultiply(x.invert()),se}function HPe(t){t=t||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return t===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[t]}function d9(t){return t.split(",").map(function(n){return parseFloat(n)})}function GPe(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=t.byteLength),new TextDecoder().decode(new Uint8Array(t,e,n))}function hYe(t,e){for(let n=0,r=t.length,i=e.length;n<i;n++,r++)t[r]=e[n]}function pYe(t,e,n,r){for(let i=n,o=0;i<r;i++,o++)t[o]=e[i];return t}const WPe=new Map,$Pe=new Map,KPe=new Map,tX=new Map;function fYe(t,e){return new Promise((n,r)=>{new A8e().setPath("images/milkyWay/").load(e,i=>{WPe.set(t,i),n(i)},void 0,()=>{r()})})}function mYe(t,e){return new Promise((n,r)=>{new nYe().setPath("./models/").loadAsync(e).then(i=>{i.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),KPe.set(t,i),n(i)}).catch(i=>{console.log("Couldn't load:",e),console.log(i),r()})})}function gYe(t,e){return new Promise((n,r)=>{new fEe().load(e,i=>{i.wrapS=bp,i.wrapT=bp,i.needsUpdate=!0,tX.set(t,i),n(i)},void 0,()=>{r()})})}function vYe(t,e){return new Promise((n,r)=>{fetch(e).then(i=>{if(!i.ok)throw new Error(`Network response was not ok: ${i.status}`);return i.json()}).then(i=>{$Pe.set(t,i),n(i)}).catch(()=>{console.log(`Couldn't load: ${e}`),r()})})}function yYe(){return new Promise((t,e)=>{const n=[()=>fYe("environment",["dark-s_px.jpg","dark-s_nx.jpg","dark-s_py.jpg","dark-s_ny.jpg","dark-s_pz.jpg","dark-s_nz.jpg"]),()=>gYe("uv_grid","images/uv_grid_opengl.jpg"),()=>mYe("Flair","Flair.fbx"),()=>vYe("animation","json/animation.json")];Promise.all(n.map(r=>r())).then(()=>{s$.dispatchEvent({type:o$.LOAD_COMPLETE}),t()}).catch(()=>{e()})})}const bYe=!0;class _Ye extends nHe{constructor(){super("ws://localhost:8080",bYe)}init(){return new Promise(e=>{this.editor=document.location.hash.search("editor")>-1,this.addComponent("theatre",new VT(this)),this.addComponent("three",new pHe(this)),this.addComponent("components",new rHe(this)),this.addComponent("debug",new Dqe(this)),this.components.forEach(r=>{r.handleEditorApp()});const n=$Pe.get("animation");this.theatre.init("RemoteApp",{state:n}).then(()=>{e()})})}get debug(){return this.components.get("debug")}get debugComponents(){return this.components.get("components")}get theatre(){return this.components.get("theatre")}get three(){return this.components.get("three")}}const xr=new _Ye,s$=new Al,o$={LOAD_COMPLETE:"Events::loadComplete"};class wYe{constructor(e,n,r){this.name=e,this.fg=n,this.bg=r,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=90*this.PR,this.canvas.height=48*this.PR,this.canvas.style.width="90px",this.canvas.style.position="absolute",this.canvas.style.height="48px",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(e,n,r,i,o=0){let u=1/0,h=0;this.context&&(u=Math.min(u,e),h=Math.max(r,e),i=Math.max(i,n),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(e.toFixed(o)+" "+this.name+" ("+u.toFixed(o)+"-"+parseFloat(h.toFixed(o))+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,(1-n/i)*this.GRAPH_HEIGHT))}}const XPe=class iN{constructor({logsPerSecond:e=20,samplesLog:n=100,samplesGraph:r=10,precision:i=2,minimal:o=!1,horizontal:u=!0,mode:h=0}={}){this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalFps=0,this.activeQuery=null,this.gpuQueries=[],this.renderCount=0,this.mode=h,this.horizontal=u,this.dom=document.createElement("div"),this.dom.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000;",o&&(this.dom.style.cssText+="cursor:pointer"),this.gl=null,this.query=null,this.isRunningCPUProfiling=!1,this.minimal=o,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.frames=0,this.renderCount=0,this.threeRendererPatched=!1,this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.queryCreated=!1,this.fpsPanel=this.addPanel(new iN.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new iN.Panel("CPU","#0f0","#020"),1),this.gpuPanel=null,this.samplesLog=n,this.samplesGraph=r,this.precision=i,this.logsPerSecond=e,this.minimal?(this.dom.addEventListener("click",m=>{m.preventDefault(),this.showPanel(++this.mode%this.dom.children.length)},!1),this.mode=h,this.showPanel(this.mode)):window.addEventListener("resize",()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2)})}patchThreeRenderer(e){const n=e.render,r=this;e.render=function(i,o){r.begin(),n.call(this,i,o),r.end()},this.threeRendererPatched=!0}resizePanel(e,n){e.canvas.style.position="absolute",this.minimal?e.canvas.style.display="none":(e.canvas.style.display="block",this.horizontal?(e.canvas.style.top="0px",e.canvas.style.left=n*e.WIDTH/e.PR+"px"):(e.canvas.style.left="0px",e.canvas.style.top=n*e.HEIGHT/e.PR+"px"))}addPanel(e,n){return e.canvas&&(this.dom.appendChild(e.canvas),this.resizePanel(e,n)),e}showPanel(e){for(let n=0;n<this.dom.children.length;n++){const r=this.dom.children[n];r.style.display=n===e?"block":"none"}this.mode=e}init(e){if(!e){console.error('Stats: The "canvas" parameter is undefined.');return}if(e.isWebGLRenderer&&!this.threeRendererPatched){const n=e;this.patchThreeRenderer(n),this.gl=n.getContext()}if(!this.gl&&e instanceof WebGL2RenderingContext)this.gl=e;else if(!this.gl&&e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas){if(this.gl=e.getContext("webgl2"),!this.gl){console.error("Stats: Unable to obtain WebGL2 context.");return}}else if(!this.gl){console.error("Stats: Invalid input type. Expected WebGL2RenderingContext, HTMLCanvasElement, or OffscreenCanvas.");return}this.ext=this.gl.getExtension("EXT_disjoint_timer_query_webgl2"),this.ext&&(this.gpuPanel=this.addPanel(new iN.Panel("GPU","#ff0","#220"),2))}begin(){this.isRunningCPUProfiling||this.beginProfiling("cpu-started"),!(!this.gl||!this.ext)&&this.gl&&this.ext&&(this.activeQuery&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.activeQuery=this.gl.createQuery(),this.activeQuery!==null&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.activeQuery))}end(){this.renderCount++,this.gl&&this.ext&&this.activeQuery&&(this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.gpuQueries.push({query:this.activeQuery}),this.activeQuery=null)}processGpuQueries(){!this.gl||!this.ext||(this.totalGpuDuration=0,this.gpuQueries.forEach((e,n)=>{if(this.gl){const r=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT_AVAILABLE),i=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT);if(r&&!i){const u=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT)*1e-6;this.totalGpuDuration+=u,this.gl.deleteQuery(e.query),this.gpuQueries.splice(n,1)}}}))}update(){this.processGpuQueries(),this.endProfiling("cpu-started","cpu-finished","cpu-duration"),this.addToAverage(this.totalCpuDuration,this.averageCpu),this.addToAverage(this.totalGpuDuration,this.averageGpu),this.renderCount=0,this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalFps=0,this.beginTime=this.endInternal()}endInternal(){this.frames++;const e=(performance||Date).now();if(e>=this.prevCpuTime+1e3/this.logsPerSecond&&(this.updatePanel(this.msPanel,this.averageCpu),this.updatePanel(this.gpuPanel,this.averageGpu),this.prevCpuTime=e),e>=this.prevTime+1e3){const n=this.frames*1e3/(e-this.prevTime);this.fpsPanel.update(n,n,100,100,0),this.prevTime=e,this.frames=0}return e}addToAverage(e,n){n.logs.push(e),n.logs.length>this.samplesLog&&n.logs.shift(),n.graph.push(e),n.graph.length>this.samplesGraph&&n.graph.shift()}beginProfiling(e){window.performance&&(window.performance.mark(e),this.isRunningCPUProfiling=!0)}endProfiling(e,n,r){if(window.performance&&n&&this.isRunningCPUProfiling){window.performance.mark(n);const i=performance.measure(r,e,n);this.totalCpuDuration+=i.duration,this.isRunningCPUProfiling=!1}}updatePanel(e,n){if(n.logs.length>0){let r=0,i=.01;for(let h=0;h<n.logs.length;h++)r+=n.logs[h],n.logs[h]>i&&(i=n.logs[h]);let o=0,u=.01;for(let h=0;h<n.graph.length;h++)o+=n.graph[h],n.graph[h]>u&&(u=n.graph[h]);e&&e.update(r/Math.min(n.logs.length,this.samplesLog),o/Math.min(n.graph.length,this.samplesGraph),i,u,this.precision)}}get domElement(){return this.dom}get container(){return console.warn("Stats: Deprecated! this.container as been replaced to this.dom "),this.dom}};XPe.Panel=wYe;let xYe=XPe;/**
 * postprocessing v6.34.1 build Wed Dec 27 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rüschen
 * @license Zlib
 */var SYe="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",vr={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},qPe="",ta="srgb",JF="srgb-linear",R0={NONE:0,DEPTH:1,CONVOLUTION:2},$r={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},AM={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},RL={DEFAULT:0,ESKIL:1},YPe=Number(lM.replace(/\D+/g,"")),ZPe=YPe>=152,EYe=new Map([[AF,JF],[dp,ta]]),CYe=new Map([[JF,AF],[ta,dp]]);function QT(t){return t===null?null:ZPe?t.outputColorSpace:EYe.get(t.outputEncoding)}function D0(t,e){t!==null&&(ZPe?t.colorSpace=e:t.encoding=CYe.get(e))}function eB(t){return YPe<154?t.replace("colorspace_fragment","encodings_fragment"):t}var PYe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,TYe="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",MYe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],QPe=class extends Aa{constructor(t=new Ar){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Mi(null),texelSize:new Mi(new Ar),scale:new Mi(1),kernel:new Mi(0)},blending:xu,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:PYe,vertexShader:TYe}),this.fragmentShader=eB(this.fragmentShader),this.setTexelSize(t.x,t.y),this.kernelSize=AM.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return MYe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,t*.5,e*.5)}setSize(t,e){const n=1/t,r=1/e;this.uniforms.texelSize.value.set(n,r,n*.5,r*.5)}},kYe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,JPe=class extends Aa{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Mi(null),opacity:new Mi(1)},blending:xu,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:kYe,vertexShader:SYe}),this.fragmentShader=eB(this.fragmentShader)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},AYe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,IYe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",RYe=class extends Aa{constructor(t,e,n,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:lM.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Mi(null),depthBuffer:new Mi(null),resolution:new Mi(new an),texelSize:new Mi(new an),cameraNear:new Mi(.3),cameraFar:new Mi(1e3),aspect:new Mi(1),time:new Mi(0)},blending:xu,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=uM){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=AYe.replace($r.FRAGMENT_HEAD,t.get($r.FRAGMENT_HEAD)||"").replace($r.FRAGMENT_MAIN_UV,t.get($r.FRAGMENT_MAIN_UV)||"").replace($r.FRAGMENT_MAIN_IMAGE,t.get($r.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=IYe.replace($r.VERTEX_HEAD,t.get($r.VERTEX_HEAD)||"").replace($r.VERTEX_MAIN_SUPPORT,t.get($r.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=eB(this.fragmentShader),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof js?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return $r}},DYe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec4 maskParams;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;float linearGradientMask(const in float x){return smoothstep(maskParams.x,maskParams.y,x)-smoothstep(maskParams.w,maskParams.z,x);}void main(){vec2 dUv=vOffset*(1.0-linearGradientMask(vUv2.y));vec4 sum=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y-dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y-dUv.y));gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,OYe="uniform vec4 texelSize;uniform float kernel;uniform float scale;uniform float aspect;uniform vec2 rotation;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));vOffset=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;gl_Position=vec4(position.xy,1.0,1.0);}",LYe=class extends QPe{constructor({kernelSize:t=AM.MEDIUM,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3}={}){super(),this.fragmentShader=DYe,this.vertexShader=OYe,this.kernelSize=t,this.fragmentShader=eB(this.fragmentShader),this.uniforms.aspect=new Mi(1),this.uniforms.rotation=new Mi(new an),this.uniforms.maskParams=new Mi(new Ar),this._offset=e,this._focusArea=r,this._feather=i,this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.maskParams.value,e=Math.max(this.focusArea,0),n=Math.max(e-this.feather,0);t.set(this.offset-e,this.offset-n,this.offset+e,this.offset+n)}get rotation(){return Math.acos(this.uniforms.rotation.value.x)}set rotation(t){this.uniforms.rotation.value.set(Math.cos(t),Math.sin(t))}get offset(){return this._offset}set offset(t){this._offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.updateParams()}setSize(t,e){super.setSize(t,e),this.uniforms.aspect.value=t/e}},NYe=new RF,bm=null;function FYe(){if(bm===null){const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);bm=new ko,bm.setAttribute!==void 0?(bm.setAttribute("position",new Za(t,3)),bm.setAttribute("uv",new Za(e,2))):(bm.addAttribute("position",new Za(t,3)),bm.addAttribute("uv",new Za(e,2)))}return bm}var ag=class eTe{constructor(e="Pass",n=new OT,r=NYe){this.name=e,this.renderer=null,this.scene=n,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const n=this.fullscreenMaterial;n!==null&&(n.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let n=this.screen;n!==null?n.material=e:(n=new _s(FYe(),e),n.frustumCulled=!1,this.scene===null&&(this.scene=new OT),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,n=uM){}render(e,n,r,i,o){throw new Error("Render method not implemented!")}setSize(e,n){}initialize(e,n,r){}dispose(){for(const e of Object.keys(this)){const n=this[e];(n instanceof Pl||n instanceof Il||n instanceof Yi||n instanceof eTe)&&this[e].dispose()}}},BYe=class extends ag{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new JPe,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new Pl(1,1,{minFilter:ro,magFilter:ro,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,r,i){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==Sl?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":QT(t)===ta&&D0(this.renderTarget.texture,ta))}},UYe=class extends ag{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,r,i){const o=t.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},Z_e=new _n,tTe=class extends ag{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,r,i){const o=this.overrideClearColor,u=this.overrideClearAlpha,h=t.getClearAlpha(),m=o!==null,v=u>=0;m?(t.getClearColor(Z_e),t.setClearColor(o,v?u:h)):v&&t.setClearAlpha(u),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),m?t.setClearColor(Z_e,h):v&&t.setClearAlpha(h)}},zYe=class extends ag{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new tTe,this.overrideMaterialManager=n===null?null:new J_e(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){const t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){const e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new J_e(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,r,i){const o=this.scene,u=this.camera,h=this.selection,m=u.layers.mask,v=o.background,x=t.shadowMap.autoUpdate,E=this.renderToScreen?null:e;h!==null&&u.layers.set(h.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(E),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,o,u):t.render(o,u),u.layers.mask=m,o.background=v,t.shadowMap.autoUpdate=x}};function Q_e(t,e,n){for(const r of e){const i="$1"+t+r.charAt(0).toUpperCase()+r.slice(1),o=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const u of n.entries())u[1]!==null&&n.set(u[0],u[1].replace(o,i))}}function VYe(t,e,n){let r=e.getFragmentShader(),i=e.getVertexShader();const o=r!==void 0&&/mainImage/.test(r),u=r!==void 0&&/mainUv/.test(r);if(n.attributes|=e.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(u&&n.attributes&R0.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!o&&!u)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const h=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,m=n.shaderParts;let v=m.get($r.FRAGMENT_HEAD)||"",x=m.get($r.FRAGMENT_MAIN_UV)||"",E=m.get($r.FRAGMENT_MAIN_IMAGE)||"",M=m.get($r.VERTEX_HEAD)||"",D=m.get($r.VERTEX_MAIN_SUPPORT)||"";const H=new Set,F=new Set;if(u&&(x+=`	${t}MainUv(UV);
`,n.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const P=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);D+=`	${t}MainSupport(`,D+=P?`vUv);
`:`);
`;for(const W of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const Z of W[1].split(/\s*,\s*/))n.varyings.add(Z),H.add(Z),F.add(Z);for(const W of i.matchAll(h))F.add(W[1])}for(const P of r.matchAll(h))F.add(P[1]);for(const P of e.defines.keys())F.add(P.replace(/\([\w\s,]*\)/g,""));for(const P of e.uniforms.keys())F.add(P);F.delete("while"),F.delete("for"),F.delete("if"),e.uniforms.forEach((P,W)=>n.uniforms.set(t+W.charAt(0).toUpperCase()+W.slice(1),P)),e.defines.forEach((P,W)=>n.defines.set(t+W.charAt(0).toUpperCase()+W.slice(1),P));const B=new Map([["fragment",r],["vertex",i]]);Q_e(t,F,n.defines),Q_e(t,F,B),r=B.get("fragment"),i=B.get("vertex");const z=e.blendMode;if(n.blendModes.set(z.blendFunction,z),o){e.inputColorSpace!==null&&e.inputColorSpace!==n.colorSpace&&(E+=e.inputColorSpace===ta?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==qPe?n.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(n.colorSpace=e.inputColorSpace);const P=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;E+=`${t}MainImage(color0, UV, `,n.attributes&R0.DEPTH&&P.test(r)&&(E+="depth, ",n.readDepth=!0),E+=`color1);
	`;const W=t+"BlendOpacity";n.uniforms.set(W,z.opacity),E+=`color0 = blend${z.blendFunction}(color0, color1, ${W});

	`,v+=`uniform float ${W};

`}if(v+=r+`
`,i!==null&&(M+=i+`
`),m.set($r.FRAGMENT_HEAD,v),m.set($r.FRAGMENT_MAIN_UV,x),m.set($r.FRAGMENT_MAIN_IMAGE,E),m.set($r.VERTEX_HEAD,M),m.set($r.VERTEX_MAIN_SUPPORT,D),e.extensions!==null)for(const P of e.extensions)n.extensions.add(P)}}var h9=class extends ag{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new RYe(null,null,null,t),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(const e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(const e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort((e,n)=>n.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const t=new XYe;let e=0;for(const u of this.effects)if(u.blendMode.blendFunction===vr.DST)t.attributes|=u.getAttributes()&R0.DEPTH;else{if(t.attributes&u.getAttributes()&R0.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${u.name})`);VYe("e"+e++,u,t)}let n=t.shaderParts.get($r.FRAGMENT_HEAD),r=t.shaderParts.get($r.FRAGMENT_MAIN_IMAGE),i=t.shaderParts.get($r.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const u of t.blendModes.values())n+=u.getShaderCode().replace(o,`blend${u.blendFunction}`)+`
`;t.attributes&R0.DEPTH?(t.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,t.colorSpace===ta&&(r+=`color0 = sRGBToLinear(color0);
	`),t.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set($r.FRAGMENT_HEAD,n),t.shaderParts.set($r.FRAGMENT_MAIN_IMAGE,r),t.shaderParts.set($r.FRAGMENT_MAIN_UV,i);for(const[u,h]of t.shaderParts)h!==null&&t.shaderParts.set(u,h.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=uM){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,r,i){for(const o of this.effects)o.update(t,e,r);if(!this.skipRendering||this.renderToScreen){const o=this.fullscreenMaterial;o.inputBuffer=e.texture,o.time+=r*this.timeScale,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(const r of this.effects)r.initialize(t,e,n);this.updateMaterial(),n!==void 0&&n!==Sl&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},jYe=class extends ag{constructor({kernelSize:t=AM.MEDIUM,resolutionScale:e=.5,width:n=lp.AUTO_SIZE,height:r=lp.AUTO_SIZE,resolutionX:i=n,resolutionY:o=r}={}){super("KawaseBlurPass"),this.renderTargetA=new Pl(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const u=this.resolution=new lp(this,i,o,e);u.addEventListener("change",h=>this.setSize(u.baseWidth,u.baseHeight)),this._blurMaterial=new QPe,this._blurMaterial.kernelSize=t,this.copyMaterial=new JPe}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const o=this.scene,u=this.camera,h=this.renderTargetA,m=this.renderTargetB,v=this.blurMaterial,x=v.kernelSequence;let E=e;this.fullscreenMaterial=v;for(let M=0,D=x.length;M<D;++M){const H=M&1?m:h;v.kernel=x[M],v.inputBuffer=E.texture,t.setRenderTarget(H),t.render(o,u),E=H}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=E.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(o,u)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==Sl?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):QT(t)===ta&&(D0(this.renderTargetA.texture,ta),D0(this.renderTargetB.texture,ta)))}static get AUTO_SIZE(){return lp.AUTO_SIZE}},HYe=class extends ag{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new tTe(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,r,i){const o=t.getContext(),u=t.state.buffers,h=this.scene,m=this.camera,v=this.clearPass,x=this.inverted?0:1,E=1-x;u.color.setMask(!1),u.depth.setMask(!1),u.color.setLocked(!0),u.depth.setLocked(!0),u.stencil.setTest(!0),u.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),u.stencil.setFunc(o.ALWAYS,x,4294967295),u.stencil.setClear(E),u.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?v.render(t,null):(v.render(t,e),v.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(h,m)):(t.setRenderTarget(e),t.render(h,m),t.setRenderTarget(n),t.render(h,m)),u.color.setLocked(!1),u.depth.setLocked(!1),u.stencil.setLocked(!1),u.stencil.setFunc(o.EQUAL,1,4294967295),u.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),u.stencil.setLocked(!0)}},GYe=class extends jYe{constructor({offset:t=0,rotation:e=0,focusArea:n=.4,feather:r=.3,kernelSize:i=AM.MEDIUM,resolutionScale:o=.5,resolutionX:u=lp.AUTO_SIZE,resolutionY:h=lp.AUTO_SIZE}={}){super({kernelSize:i,resolutionScale:o,resolutionX:u,resolutionY:h}),this.blurMaterial=new LYe({kernelSize:i,offset:t,rotation:e,focusArea:n,feather:r})}},p9=1/1e3,WYe=1e3,$Ye=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*p9}get fixedDelta(){return this._fixedDelta*p9}set fixedDelta(t){this._fixedDelta=t*WYe}get elapsed(){return this._elapsed*p9}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(t!==void 0?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},KYe=class{constructor(t=null,{depthBuffer:e=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,n,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new BYe,this.depthTexture=null,this.passes=[],this.timer=new $Ye,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){const e=this.inputBuffer,n=this.multisampling;n>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,t!==null){const e=t.getSize(new an),n=t.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===Sl&&QT(t)===ta&&(D0(this.inputBuffer.texture,ta),D0(this.outputBuffer.texture,ta),this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(e.width,e.height);for(const i of this.passes)i.initialize(t,n,r)}}replaceRenderer(t,e=!0){const n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(t),e&&r!==null&&(r.removeChild(n.domElement),r.appendChild(t.domElement)),n}createDepthTexture(){const t=this.depthTexture=new L7;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=U0,t.type=Hm):t.type=ip,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,n,r){const i=this.renderer,o=i===null?new an:i.getDrawingBufferSize(new an),u={minFilter:ro,magFilter:ro,stencilBuffer:e,depthBuffer:t,type:n},h=new Pl(o.width,o.height,u);return r>0&&(h.ignoreDepthForMultisampleCopy=!1,h.samples=r),n===Sl&&QT(i)===ta&&D0(h.texture,ta),h.texture.name="EffectComposer.Buffer",h.texture.generateMipmaps=!1,h}setMainScene(t){for(const e of this.passes)e.mainScene=t}setMainCamera(t){for(const e of this.passes)e.mainCamera=t}addPass(t,e){const n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new an),o=r.getContext().getContextAttributes().alpha,u=this.inputBuffer.texture.type;if(t.setRenderer(r),t.setSize(i.width,i.height),t.initialize(r,o,u),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?n.splice(e,0,t):n.push(t),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const h=this.createDepthTexture();for(t of n)t.setDepthTexture(h)}else t.setDepthTexture(this.depthTexture)}removePass(t){const e=this.passes,n=e.indexOf(t);if(n!==-1&&e.splice(n,1).length>0){if(this.depthTexture!==null){const o=(h,m)=>h||m.needsDepthTexture;e.reduce(o,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){const e=this.renderer,n=this.copyPass;let r=this.inputBuffer,i=this.outputBuffer,o=!1,u,h,m;t===void 0&&(this.timer.update(),t=this.timer.delta);for(const v of this.passes)v.enabled&&(v.render(e,r,i,t,o),v.needsSwap&&(o&&(n.renderToScreen=v.renderToScreen,u=e.getContext(),h=e.state.buffers.stencil,h.setFunc(u.NOTEQUAL,1,4294967295),n.render(e,r,i,t,o),h.setFunc(u.EQUAL,1,4294967295)),m=r,r=i,i=m),v instanceof HYe?o=!0:v instanceof UYe&&(o=!1))}setSize(t,e,n){const r=this.renderer,i=r.getSize(new an);(t===void 0||e===void 0)&&(t=i.width,e=i.height),(i.width!==t||i.height!==e)&&r.setSize(t,e,n);const o=r.getDrawingBufferSize(new an);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const u of this.passes)u.setSize(o.width,o.height)}reset(){const t=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=t}dispose(){for(const t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},XYe=class{constructor(){this.shaderParts=new Map([[$r.FRAGMENT_HEAD,null],[$r.FRAGMENT_MAIN_UV,null],[$r.FRAGMENT_MAIN_IMAGE,null],[$r.VERTEX_HEAD,null],[$r.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=R0.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=JF}},f9=!1,J_e=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case Ca:n=this.materialsFlatShadedDoubleSide;break;case Rs:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case Ca:n=this.materialsDoubleSide;break;case Rs:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof Aa))return t.clone();const e=t.uniforms,n=new Map;for(const i in e){const o=e[i].value;o.isRenderTargetTexture&&(e[i].value=null,n.set(i,o))}const r=t.clone();for(const i of n)e[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){const e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(const n of e)n.uniforms=Object.assign({},t.uniforms),n.side=Rd;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=Rs,r}),this.materialsDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=Ca,r}),this.materialsFlatShaded=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=Rs,r}),this.materialsFlatShadedDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=Ca,r})}}render(t,e,n){const r=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,f9){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(const o of i)o[0].material=o[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=i}t.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return f9}static set workaroundEnabled(t){f9=t}},_m=-1,lp=class extends Al{constructor(t,e=_m,n=_m,r=1){super(),this.resizable=t,this.baseSize=new an(1,1),this.preferredSize=new an(e,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new an,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,r=this.scale;e.width!==_m?n.width=e.width:e.height!==_m?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*r),e.height!==_m?n.height=e.height:e.width!==_m?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*r)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(_m),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return _m}},qYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",YYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",ZYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",QYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",JYe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",eZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",tZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",nZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",rZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",iZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",sZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",oZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",aZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",lZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",uZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",cZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",dZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",hZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",pZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",fZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",mZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",gZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",vZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",yZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",bZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",_Ze="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",wZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",xZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",SZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",EZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",CZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",PZe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",TZe=new Map([[vr.ADD,qYe],[vr.ALPHA,YYe],[vr.AVERAGE,ZYe],[vr.COLOR,QYe],[vr.COLOR_BURN,JYe],[vr.COLOR_DODGE,eZe],[vr.DARKEN,tZe],[vr.DIFFERENCE,nZe],[vr.DIVIDE,rZe],[vr.DST,null],[vr.EXCLUSION,iZe],[vr.HARD_LIGHT,sZe],[vr.HARD_MIX,oZe],[vr.HUE,aZe],[vr.INVERT,lZe],[vr.INVERT_RGB,uZe],[vr.LIGHTEN,cZe],[vr.LINEAR_BURN,dZe],[vr.LINEAR_DODGE,hZe],[vr.LINEAR_LIGHT,pZe],[vr.LUMINOSITY,fZe],[vr.MULTIPLY,mZe],[vr.NEGATION,gZe],[vr.NORMAL,vZe],[vr.OVERLAY,yZe],[vr.PIN_LIGHT,bZe],[vr.REFLECT,_Ze],[vr.SATURATION,wZe],[vr.SCREEN,xZe],[vr.SOFT_LIGHT,SZe],[vr.SRC,EZe],[vr.SUBTRACT,CZe],[vr.VIVID_LIGHT,PZe]]),MZe=class extends Al{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new Mi(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return TZe.get(this.blendFunction)}},tB=class extends Al{constructor(t,e,{attributes:n=R0.NONE,blendFunction:r=vr.NORMAL,defines:i=new Map,uniforms:o=new Map,extensions:u=null,vertexShader:h=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=h,this.defines=i,this.uniforms=o,this.extensions=u,this.blendMode=new MZe(r),this.blendMode.addEventListener("change",m=>this.setChanged()),this._inputColorSpace=JF,this._outputColorSpace=qPe}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=uM){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof Pl||e instanceof Il||e instanceof Yi||e instanceof ag)&&this[t].dispose()}}},kZe=`#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))
#define ONE_OVER_TWELVE 0.08333333333333333
varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;vec4 fxaa(const in vec4 inputColor,const in vec2 uv){float lumaCenter=luminance(inputColor.rgb);float lumaDown=luminance(texture2D(inputBuffer,vUvDown).rgb);float lumaUp=luminance(texture2D(inputBuffer,vUvUp).rgb);float lumaLeft=luminance(texture2D(inputBuffer,vUvLeft).rgb);float lumaRight=luminance(texture2D(inputBuffer,vUvRight).rgb);float lumaMin=min(lumaCenter,min(min(lumaDown,lumaUp),min(lumaLeft,lumaRight)));float lumaMax=max(lumaCenter,max(max(lumaDown,lumaUp),max(lumaLeft,lumaRight)));float lumaRange=lumaMax-lumaMin;if(lumaRange<max(EDGE_THRESHOLD_MIN,lumaMax*EDGE_THRESHOLD_MAX)){return inputColor;}float lumaDownLeft=luminance(texture2D(inputBuffer,vUvDownLeft).rgb);float lumaUpRight=luminance(texture2D(inputBuffer,vUvUpRight).rgb);float lumaUpLeft=luminance(texture2D(inputBuffer,vUvUpLeft).rgb);float lumaDownRight=luminance(texture2D(inputBuffer,vUvDownRight).rgb);float lumaDownUp=lumaDown+lumaUp;float lumaLeftRight=lumaLeft+lumaRight;float lumaLeftCorners=lumaDownLeft+lumaUpLeft;float lumaDownCorners=lumaDownLeft+lumaDownRight;float lumaRightCorners=lumaDownRight+lumaUpRight;float lumaUpCorners=lumaUpRight+lumaUpLeft;float edgeHorizontal=(abs(-2.0*lumaLeft+lumaLeftCorners)+abs(-2.0*lumaCenter+lumaDownUp)*2.0+abs(-2.0*lumaRight+lumaRightCorners));float edgeVertical=(abs(-2.0*lumaUp+lumaUpCorners)+abs(-2.0*lumaCenter+lumaLeftRight)*2.0+abs(-2.0*lumaDown+lumaDownCorners));bool isHorizontal=(edgeHorizontal>=edgeVertical);float stepLength=isHorizontal?texelSize.y:texelSize.x;float luma1=isHorizontal?lumaDown:lumaLeft;float luma2=isHorizontal?lumaUp:lumaRight;float gradient1=abs(luma1-lumaCenter);float gradient2=abs(luma2-lumaCenter);bool is1Steepest=gradient1>=gradient2;float gradientScaled=0.25*max(gradient1,gradient2);float lumaLocalAverage=0.0;if(is1Steepest){stepLength=-stepLength;lumaLocalAverage=0.5*(luma1+lumaCenter);}else{lumaLocalAverage=0.5*(luma2+lumaCenter);}vec2 currentUv=uv;if(isHorizontal){currentUv.y+=stepLength*0.5;}else{currentUv.x+=stepLength*0.5;}vec2 offset=isHorizontal?vec2(texelSize.x,0.0):vec2(0.0,texelSize.y);vec2 uv1=currentUv-offset*QUALITY(0);vec2 uv2=currentUv+offset*QUALITY(0);float lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);float lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd1-=lumaLocalAverage;lumaEnd2-=lumaLocalAverage;bool reached1=abs(lumaEnd1)>=gradientScaled;bool reached2=abs(lumaEnd2)>=gradientScaled;bool reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(1);}if(!reached2){uv2+=offset*QUALITY(1);}if(!reachedBoth){for(int i=2;i<SAMPLES;++i){if(!reached1){lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);lumaEnd1=lumaEnd1-lumaLocalAverage;}if(!reached2){lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd2=lumaEnd2-lumaLocalAverage;}reached1=abs(lumaEnd1)>=gradientScaled;reached2=abs(lumaEnd2)>=gradientScaled;reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(i);}if(!reached2){uv2+=offset*QUALITY(i);}if(reachedBoth){break;}}}float distance1=isHorizontal?(uv.x-uv1.x):(uv.y-uv1.y);float distance2=isHorizontal?(uv2.x-uv.x):(uv2.y-uv.y);bool isDirection1=distance1<distance2;float distanceFinal=min(distance1,distance2);float edgeThickness=(distance1+distance2);bool isLumaCenterSmaller=lumaCenter<lumaLocalAverage;bool correctVariation1=(lumaEnd1<0.0)!=isLumaCenterSmaller;bool correctVariation2=(lumaEnd2<0.0)!=isLumaCenterSmaller;bool correctVariation=isDirection1?correctVariation1:correctVariation2;float pixelOffset=-distanceFinal/edgeThickness+0.5;float finalOffset=correctVariation?pixelOffset:0.0;float lumaAverage=ONE_OVER_TWELVE*(2.0*(lumaDownUp+lumaLeftRight)+lumaLeftCorners+lumaRightCorners);float subPixelOffset1=clamp(abs(lumaAverage-lumaCenter)/lumaRange,0.0,1.0);float subPixelOffset2=(-2.0*subPixelOffset1+3.0)*subPixelOffset1*subPixelOffset1;float subPixelOffsetFinal=subPixelOffset2*subPixelOffset2*SUBPIXEL_QUALITY;finalOffset=max(finalOffset,subPixelOffsetFinal);vec2 finalUv=uv;if(isHorizontal){finalUv.y+=finalOffset*stepLength;}else{finalUv.x+=finalOffset*stepLength;}return texture2D(inputBuffer,finalUv);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=fxaa(inputColor,uv);}`,AZe="varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;void mainSupport(const in vec2 uv){vUvDown=uv+vec2(0.0,-1.0)*texelSize;vUvUp=uv+vec2(0.0,1.0)*texelSize;vUvRight=uv+vec2(1.0,0.0)*texelSize;vUvLeft=uv+vec2(-1.0,0.0)*texelSize;vUvDownLeft=uv+vec2(-1.0,-1.0)*texelSize;vUvUpRight=uv+vec2(1.0,1.0)*texelSize;vUvUpLeft=uv+vec2(-1.0,1.0)*texelSize;vUvDownRight=uv+vec2(1.0,-1.0)*texelSize;}",IZe=class extends tB{constructor({blendFunction:t=vr.SRC}={}){super("FXAAEffect",kZe,{vertexShader:AZe,blendFunction:t,defines:new Map([["EDGE_THRESHOLD_MIN","0.0312"],["EDGE_THRESHOLD_MAX","0.125"],["SUBPIXEL_QUALITY","0.75"],["SAMPLES","12"]])})}get minEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MIN"))}set minEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MIN",t.toFixed(12)),this.setChanged()}get maxEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MAX"))}set maxEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MAX",t.toFixed(12)),this.setChanged()}get subpixelQuality(){return Number(this.defines.get("SUBPIXEL_QUALITY"))}set subpixelQuality(t){this.defines.set("SUBPIXEL_QUALITY",t.toFixed(12)),this.setChanged()}get samples(){return Number(this.defines.get("SAMPLES"))}set samples(t){this.defines.set("SAMPLES",t.toFixed(0)),this.setChanged()}},RZe=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,DZe=class extends tB{constructor({blendFunction:t=vr.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",RZe,{blendFunction:t}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}},OZe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform vec2 maskParams;varying vec2 vUv2;float linearGradientMask(const in float x){return step(maskParams.x,x)-step(maskParams.y,x);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float mask=linearGradientMask(vUv2.y);vec4 texel=texture2D(map,uv);outputColor=mix(texel,inputColor,mask);}`,LZe="uniform vec2 rotation;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));}",NZe=class extends tB{constructor({blendFunction:t,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3,kernelSize:o=AM.MEDIUM,resolutionScale:u=.5,resolutionX:h=lp.AUTO_SIZE,resolutionY:m=lp.AUTO_SIZE}={}){super("TiltShiftEffect",OZe,{vertexShader:LZe,blendFunction:t,uniforms:new Map([["rotation",new Mi(new an)],["maskParams",new Mi(new an)],["map",new Mi(null)]])}),this._offset=e,this._focusArea=r,this._feather=i,this.renderTarget=new Pl(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="TiltShift.Target",this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new GYe({kernelSize:o,resolutionScale:u,resolutionX:h,resolutionY:m,offset:e,rotation:n,focusArea:r,feather:i});const v=this.resolution=new lp(this,h,m,u);v.addEventListener("change",x=>this.setSize(v.baseWidth,v.baseHeight)),this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.get("maskParams").value,e=Math.max(this.focusArea-this.feather,0);t.set(this.offset-e,this.offset+e)}get rotation(){return Math.acos(this.uniforms.get("rotation").value.x)}set rotation(t){this.uniforms.get("rotation").value.set(Math.cos(t),Math.sin(t)),this.blurPass.blurMaterial.rotation=t}get offset(){return this._offset}set offset(t){this._offset=t,this.blurPass.blurMaterial.offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.blurPass.blurMaterial.focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.blurPass.blurMaterial.feather=t,this.updateParams()}get bias(){return 0}set bias(t){}update(t,e,n){this.blurPass.render(t,e,this.renderTarget)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n)}initialize(t,e,n){this.blurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,QT(t)===ta&&D0(this.renderTarget.texture,ta))}},FZe=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,BZe=class extends tB{constructor({blendFunction:t,technique:e=RL.DEFAULT,eskil:n=!1,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect",FZe,{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new Mi(r)],["darkness",new Mi(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===RL.ESKIL}set eskil(t){this.technique=t?RL.ESKIL:RL.DEFAULT}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}};const UZe=`varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,zZe=`uniform float time;
uniform float opacity;
uniform vec3 diffuse;
uniform vec3 mouse;
uniform sampler2D map;
varying vec2 vUv;

#define MIN_ALPHA 2.0 / 255.0

void main() {
  if (opacity < MIN_ALPHA) discard;
  vec2 imageUV = vUv * 10.0 + (mouse.xy * mouse.z);
  vec3 image = texture2D(map, imageUV).rgb;
  vec3 col = image * diffuse;
  col += (sin(time * 0.1) * 0.5 + 0.5) * 0.2;
  gl_FragColor = vec4(col, opacity);
}`,VZe="data:image/png;base64,R0lGODlhCAAIAIAAAP///wAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OTc3NywgMjAyMy8wNi8yNS0yMzo1NzoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjIgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjVENjQyODM4QTYzMTFFRUJFQTBFOTJFNjA1OTQ5N0YiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjVENjQyODQ4QTYzMTFFRUJFQTBFOTJFNjA1OTQ5N0YiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2NUQ2NDI4MThBNjMxMUVFQkVBMEU5MkU2MDU5NDk3RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2NUQ2NDI4MjhBNjMxMUVFQkVBMEU5MkU2MDU5NDk3RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAAAAAAALAAAAAAIAAgAAAIOjH8AprzRkHyspqSoNAUAOw==";class jZe extends Aa{constructor(){super({vertexShader:UZe,fragmentShader:zZe,name:"ExampleScene/SimpleShader",transparent:!0,uniforms:{diffuse:{value:new _n(16777215)},opacity:{value:1},time:{value:0},map:{value:null},mouse:{value:new Fe},testM3:{value:new pr},testM4:{value:new Fn}}}),KN(VZe).then(e=>{this.uniforms.map.value=e})}update(e){this.uniforms.opacity.value=this.opacity,this.uniforms.time.value+=e}}function HZe(t){const e=new Map,n=new Map,r=t.clone();return nTe(t,r,function(i,o){e.set(o,i),n.set(i,o)}),r.traverse(function(i){if(!i.isSkinnedMesh)return;const o=i,u=e.get(i),h=u.skeleton.bones;o.skeleton=u.skeleton.clone(),o.bindMatrix.copy(u.bindMatrix),o.skeleton.bones=h.map(function(m){return n.get(m)}),o.bind(o.skeleton,o.bindMatrix)}),r}function nTe(t,e,n){n(t,e);for(let r=0;r<t.children.length;r++)nTe(t.children[r],e.children[r],n)}class rTe extends Kr{constructor(n){super();yr(this,"mixer");this.name=n,this.scale.setScalar(.5);const r=KPe.get(n),i=HZe(r);this.add(i),this.mixer=new J8e(i),i.mixer=this.mixer,this.mixer.clipAction(i.animations[0]).play()}update(n){this.mixer.update(n)}}class iTe extends OT{constructor(n){super();yr(this,"camera");yr(this,"renderer");yr(this,"clock");this.renderer=n,this.clock=new F8e,this.clock.start();const r=new Kr;r.name="cameras",this.add(r),this.camera=new js(90,1,10,1e3),this.camera.name="Main",this.camera.position.set(0,100,125),this.camera.lookAt(0,50,0),r.add(this.camera)}dispose(){xr.theatre.clearSheetObjects(this.name)}resize(n,r){this.camera.aspect=n/r,this.camera.updateProjectionMatrix()}update(){}draw(){this.renderer.render(this,this.camera)}}class sTe extends iTe{constructor(n){super(n);yr(this,"dance");yr(this,"customMat");yr(this,"post");this.name="Scene1";const r=WPe.get("environment");if(this.background=r,xr.editor){const i=new _s(new A0,new u1({envMap:r,side:Rs}));i.name="bg",i.scale.setScalar(1e3),this.add(i)}this.createLights(),this.createWorld(),xr.editor||this.createPost(),this.createAnimation(),BF(this)}createLights(){const n=new Kr;n.name="lights",this.add(n);const r=new H7(16777215,.25);r.name="sun",r.castShadow=!0,r.position.set(0,50,50);const i=256;r.shadow.camera.top=i,r.shadow.camera.bottom=-i,r.shadow.camera.left=-i,r.shadow.camera.right=i,r.shadow.mapSize.width=1024,r.shadow.mapSize.height=1024,r.shadow.camera.near=10,r.shadow.camera.far=1e3,r.shadow.bias=1e-4,n.add(r);const o=new I8e(7320802,12872999,.5);o.name="hemi",n.add(o);const u=new j7(16777215,3);u.angle=5.8,u.decay=0,u.distance=1e3,u.penumbra=Math.PI,u.name="spotlight",u.castShadow=!0,u.position.set(-50,200,200),u.lookAt(0,50,0),n.add(u)}createWorld(){const n=new Kr;n.name="world",this.add(n);const r=tX.get("uv_grid");r.repeat.setScalar(10),r.needsUpdate=!0;const i=new oT({map:r}),o=new _s(new U7(500,36),i);o.name="floor",o.receiveShadow=!0,o.rotateX(-Math.PI/2),n.add(o),this.dance=new rTe("Flair"),this.dance.position.set(0,0,0),n.add(this.dance),this.createTestMaterials(n)}createTestMaterials(n){const r=new A0(20),i=[],o=new _s(r,new u1({name:"BasicMaterial",transparent:!0}));o.name="Basic",n.add(o),i.push(o);const u=new _s(r,new uEe({transparent:!0}));u.name="Matcap",n.add(u),i.push(u);const h=new _s(r,new oT({name:"PhongMaterial",transparent:!0}));h.name="Phong",n.add(h),i.push(h);const m=new _s(r,new g8e({name:"PhysicalMaterial",transparent:!0}));m.name="Physical",n.add(m),i.push(m),this.customMat=new jZe;const v=new _s(r,this.customMat);v.name="Shader",n.add(v),i.push(v);const x=50,E=i.length,M=(E-1)/2*x;for(let D=0;D<E;D++){const H=D*x-M;i[D].position.set(H,100,-150),i[D].castShadow=!0}}createPost(){this.post=new KYe(this.renderer),this.post.addPass(new zYe(this,this.camera));const n=new IZe;n.minEdgeThreshold=.01,this.post.addPass(new h9(this.camera,n));const r=new NZe({focusArea:.6});this.post.addPass(new h9(this.camera,r));const i=new DZe({});i.blendMode.opacity.value=.33,i.blendMode.blendFunction=vr.MULTIPLY;const o=new BZe({});this.post.addPass(new h9(this.camera,i,o))}createAnimation(){xr.theatre.sheet(this.name),xr.theatre.sheetObject(this.name,"Camera",{position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},rotation:{x:this.camera.rotation.x,y:this.camera.rotation.y,z:this.camera.rotation.z}},n=>{this.camera.position.set(n.position.x,n.position.y,n.position.z),this.camera.rotation.set(n.rotation.x,n.rotation.y,n.rotation.z)}),xr.theatre.sheetObject(this.name,"Break Dancer",{position:{x:this.dance.position.x,y:this.dance.position.y,z:this.dance.position.z},rotation:{x:this.dance.rotation.x,y:this.dance.rotation.y,z:this.dance.rotation.z}},n=>{this.dance.position.set(n.position.x,n.position.y,n.position.z),this.dance.rotation.set(n.rotation.x,n.rotation.y,n.rotation.z)}),xr.theatre.playSheet(this.name,{iterationCount:1/0})}update(){const n=this.clock.getDelta();this.customMat.update(n),this.dance.update(n)}draw(){xr.editor,this.post.render()}resize(n,r){super.resize(n,r),xr.editor||this.post.setSize(n,r)}}class oTe extends iTe{constructor(n){super(n);yr(this,"dance");this.name="Scene2",this.camera.position.set(0,0,125),this.camera.lookAt(0,0,0),this.createLights(),this.createWorld(),this.createAnimation(),BF(this)}createLights(){const n=new Kr;n.name="lights",this.add(n);const r=new H7(16777215,.25);r.name="sun",r.castShadow=!0,r.position.set(0,50,50),n.add(r);const i=new j7(16777215,3);i.angle=5.8,i.decay=0,i.distance=1e3,i.penumbra=Math.PI,i.name="spotlight",i.position.set(-50,200,200),i.lookAt(0,50,0),n.add(i)}createWorld(){const n=new Kr;n.name="world",this.add(n);const r=tX.get("uv_grid");r.repeat.setScalar(10),r.needsUpdate=!0;const i=new u1({map:r}),o=new _s(new A0(250,36),i);o.name="floor",o.receiveShadow=!0,o.position.y=-75,o.scale.y=.1,n.add(o);const u=new Y6e(new A0(50),new sEe({size:2}));u.name="points",u.position.x=-100,n.add(u);const h=new B7(new A0(50),new pM);h.name="lines",h.position.x=100,n.add(h),this.dance=new rTe("Flair"),this.dance.name="flair",this.dance.traverse(m=>{if(m instanceof rEe){const v=m;v.material=new uEe}}),n.add(this.dance)}createAnimation(){xr.theatre.sheet(this.name),xr.theatre.sheetObject(this.name,"Camera",{position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},rotation:{x:this.camera.rotation.x,y:this.camera.rotation.y,z:this.camera.rotation.z}},n=>{this.camera.position.set(n.position.x,n.position.y,n.position.z),this.camera.rotation.set(n.rotation.x,n.rotation.y,n.rotation.z)}),xr.theatre.sheetObject(this.name,"Dancer",{position:{x:this.dance.position.x,y:this.dance.position.y,z:this.dance.position.z},rotation:{x:this.dance.rotation.x,y:this.dance.rotation.y,z:this.dance.rotation.z}},n=>{this.dance.position.set(n.position.x,n.position.y,n.position.z),this.dance.rotation.set(n.rotation.x,n.rotation.y,n.rotation.z)}),xr.theatre.playSheet(this.name,{iterationCount:1/0})}update(){const n=this.clock.getDelta();this.dance.update(n)}}function GZe(t){function e(){return t.three.scene===void 0?(console.log("No scene:",t.three),!1):!0}const n=h=>{var v;if(!e())return;const m=(v=t.three.scene)==null?void 0:v.getObjectByProperty("uuid",h.value);m!==void 0&&t.three.setObject(m)},r=(h,m,v)=>{var E;if(!e())return;const x=(E=t.three.scene)==null?void 0:E.getObjectByProperty("uuid",h);x!==void 0&&Us(x,m,v)},i=h=>{if(!e())return;const m=h.value,{key:v,value:x,uuid:E}=m;r(E,v,x)},o=h=>{if(!e())return;const m=h.value;KN(m.value).then(v=>{r(m.uuid,m.key,v),r(m.uuid,"material.needsUpdate",!0)})},u=h=>{var D;if(!e())return;const{key:m,uuid:v,value:x,subitem:E}=h.value,M=(D=t.three.scene)==null?void 0:D.getObjectByProperty("uuid",v);if(M!==void 0)try{E!==void 0?hHe(M,E)[m](x):M[m](x)}catch(H){console.log("Error requesting method:"),console.log(H),console.log(m),console.log(x)}};return Vt.useEffect(()=>(Sr.addEventListener(Er.GET_OBJECT,n),Sr.addEventListener(Er.UPDATE_OBJECT,i),Sr.addEventListener(Er.CREATE_TEXTURE,o),Sr.addEventListener(Er.REQUEST_METHOD,u),()=>{Sr.removeEventListener(Er.GET_OBJECT,n),Sr.removeEventListener(Er.UPDATE_OBJECT,i),Sr.removeEventListener(Er.CREATE_TEXTURE,o),Sr.removeEventListener(Er.REQUEST_METHOD,u)}),[]),null}let yc,ys,UP="";function WZe(){const t=Vt.useRef(null),e=Vt.useRef(null);Vt.useEffect(()=>{var h;if(xr.theatre===void 0)return;const o=t.current;o.style.visibility=xr.editor?"hidden":"inherit",xr.theatre.sheet("App");const u=(h=xr.theatre)==null?void 0:h.sheetObject("App","Box",{x:WN.types.number(100,{range:[0,window.innerWidth]}),y:WN.types.number(100,{range:[0,window.innerHeight]})},m=>{o.style.left=`${m.x}px`,o.style.top=`${m.y}px`});return()=>{var m;u!==void 0&&((m=xr.theatre)==null||m.unsubscribe(u)),xr.dispose()}},[]),xr.editor||Vt.useEffect(()=>(yc=new N7({canvas:e.current,stencil:!1}),yc.autoClear=!1,yc.shadowMap.enabled=!0,yc.setPixelRatio(devicePixelRatio),yc.setClearColor(0),()=>{yc.dispose()}),[]),Vt.useEffect(()=>{let o;xr.editor||(o=new xYe,o.init(yc),document.body.appendChild(o.dom));let u=-1;const h=()=>{const v=window.innerWidth,x=window.innerHeight;ys==null||ys.resize(v,x),yc.setSize(v,x)},m=()=>{VT.getRafDriver().tick(performance.now()),ys==null||ys.update(),o.begin(),yc.clear(),ys==null||ys.draw(),o.end(),o.update(),u=requestAnimationFrame(m)};return xr.editor||(window.addEventListener("resize",h),h(),m()),()=>{ys!==void 0&&(xr.three.removeCamera(ys.camera),$N(ys)),window.removeEventListener("resize",h),cancelAnimationFrame(u),u=-1}},[]);const n=()=>{ys!==void 0&&(ys.camera!==void 0&&xr.three.removeCamera(ys.camera),$N(ys)),UP==="scene1"?ys=new sTe(yc):ys=new oTe(yc),ys.resize(window.innerWidth,window.innerHeight),xr.three.setScene(ys),xr.three.addCamera(ys.camera)},r=()=>{UP!=="scene1"&&(UP="scene1",n())},i=()=>{UP!=="scene2"&&(UP="scene2",n())};return Vt.useEffect(()=>{const o=t.current;o.style.visibility=xr.editor?"hidden":"inherit";const u=m=>{console.log("Custom:",m.value)},h=m=>{const v=m.value.value;v==="scene1"?r():v==="scene2"&&i()};return Sr.addEventListener(Er.CUSTOM,u),Sr.addEventListener(Er.SELECT_DROPDOWN,h),()=>{Sr.removeEventListener(Er.CUSTOM,u),Sr.removeEventListener(Er.SELECT_DROPDOWN,h)}},[]),gt.jsxs(gt.Fragment,{children:[xr.isApp&&gt.jsx("canvas",{ref:e}),gt.jsx("div",{id:"box",ref:t,children:gt.jsx("button",{onClick:()=>{xr.theatre.playSheet("Scene1")},children:"Click"})}),gt.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"20px"},children:[gt.jsx("button",{onClick:r,children:"Scene 1"}),gt.jsx("button",{onClick:i,children:"Scene 2"})]}),gt.jsx(GZe,{three:xr.three})]})}function $Ze(t){function e(r){switch(t.components.forEach(i=>{i.handleApp(r)}),r.event){case"custom":Sr.dispatchEvent({type:Er.CUSTOM,value:r.data});break}}function n(r){switch(t.components.forEach(i=>{i.handleEditor(r)}),r.event){case"custom":Sr.dispatchEvent({type:Er.CUSTOM,value:r.data});break}}t.listen=r=>{r.target==="editor"?n(r):e(r)}}function KZe(t){return gt.jsxs("div",{className:"editor",ref:t.ref,style:t.style,children:[gt.jsx("header",{children:t.header}),t.children,gt.jsx("footer",{children:t.footer})]})}function aTe(t){return t.title.search("<")>-1?gt.jsx("button",{className:"svg",dangerouslySetInnerHTML:{__html:t.title}}):gt.jsx("button",{children:t.title})}const nX=Vt.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),nB=Vt.createContext({}),rX=Vt.createContext(null),rB=typeof document<"u",a$=rB?Vt.useLayoutEffect:Vt.useEffect,lTe=Vt.createContext({strict:!1});function XZe(t,e,n,r){const{visualElement:i}=Vt.useContext(nB),o=Vt.useContext(lTe),u=Vt.useContext(rX),h=Vt.useContext(nX).reducedMotion,m=Vt.useRef();r=r||o.renderer,!m.current&&r&&(m.current=r(t,{visualState:e,parent:i,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:h}));const v=m.current;return Vt.useInsertionEffect(()=>{v&&v.update(n,u)}),a$(()=>{v&&v.render()}),Vt.useEffect(()=>{v&&v.updateFeatures()}),(window.HandoffAppearAnimations?a$:Vt.useEffect)(()=>{v&&v.animationState&&v.animationState.animateChanges()}),v}function Fw(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qZe(t,e,n){return Vt.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Fw(n)&&(n.current=r))},[e])}function JT(t){return typeof t=="string"||Array.isArray(t)}function iB(t){return typeof t=="object"&&typeof t.start=="function"}const iX=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sX=["initial",...iX];function sB(t){return iB(t.animate)||sX.some(e=>JT(t[e]))}function uTe(t){return!!(sB(t)||t.variants)}function YZe(t,e){if(sB(t)){const{initial:n,animate:r}=t;return{initial:n===!1||JT(n)?n:void 0,animate:JT(r)?r:void 0}}return t.inherit!==!1?e:{}}function ZZe(t){const{initial:e,animate:n}=YZe(t,Vt.useContext(nB));return Vt.useMemo(()=>({initial:e,animate:n}),[ewe(e),ewe(n)])}function ewe(t){return Array.isArray(t)?t.join(" "):t}const twe={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},eM={};for(const t in twe)eM[t]={isEnabled:e=>twe[t].some(n=>!!e[n])};function QZe(t){for(const e in t)eM[e]={...eM[e],...t[e]}}const cTe=Vt.createContext({}),dTe=Vt.createContext({}),JZe=Symbol.for("motionComponentSymbol");function eQe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&QZe(t);function o(h,m){let v;const x={...Vt.useContext(nX),...h,layoutId:tQe(h)},{isStatic:E}=x,M=ZZe(h),D=r(h,E);if(!E&&rB){M.visualElement=XZe(i,D,x,e);const H=Vt.useContext(dTe),F=Vt.useContext(lTe).strict;M.visualElement&&(v=M.visualElement.loadFeatures(x,F,t,H))}return Vt.createElement(nB.Provider,{value:M},v&&M.visualElement?Vt.createElement(v,{visualElement:M.visualElement,...x}):null,n(i,h,qZe(D,M.visualElement,m),D,E,M.visualElement))}const u=Vt.forwardRef(o);return u[JZe]=i,u}function tQe({layoutId:t}){const e=Vt.useContext(cTe).id;return e&&t!==void 0?e+"-"+t:t}function nQe(t){function e(r,i={}){return eQe(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const rQe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function oX(t){return typeof t!="string"||t.includes("-")?!1:!!(rQe.indexOf(t)>-1||/[A-Z]/.test(t))}const iF={};function iQe(t){Object.assign(iF,t)}const IM=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],iy=new Set(IM);function hTe(t,{layout:e,layoutId:n}){return iy.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!iF[t]||t==="opacity")}const Ia=t=>!!(t&&t.getVelocity),sQe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oQe=IM.length;function aQe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let o="";for(let u=0;u<oQe;u++){const h=IM[u];if(t[h]!==void 0){const m=sQe[h]||h;o+=`${m}(${t[h]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(t,r?"":o):n&&r&&(o="none"),o}const pTe=t=>e=>typeof e=="string"&&e.startsWith(t),fTe=pTe("--"),l$=pTe("var(--"),lQe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,uQe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Jm=(t,e,n)=>Math.min(Math.max(n,t),e),sy={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},lT={...sy,transform:t=>Jm(0,1,t)},DL={...sy,default:1},uT=t=>Math.round(t*1e5)/1e5,oB=/(-)?([\d]*\.?[\d])+/g,mTe=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,cQe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function RM(t){return typeof t=="string"}const DM=t=>({test:e=>RM(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),wm=DM("deg"),Id=DM("%"),Xn=DM("px"),dQe=DM("vh"),hQe=DM("vw"),nwe={...Id,parse:t=>Id.parse(t)/100,transform:t=>Id.transform(t*100)},rwe={...sy,transform:Math.round},gTe={borderWidth:Xn,borderTopWidth:Xn,borderRightWidth:Xn,borderBottomWidth:Xn,borderLeftWidth:Xn,borderRadius:Xn,radius:Xn,borderTopLeftRadius:Xn,borderTopRightRadius:Xn,borderBottomRightRadius:Xn,borderBottomLeftRadius:Xn,width:Xn,maxWidth:Xn,height:Xn,maxHeight:Xn,size:Xn,top:Xn,right:Xn,bottom:Xn,left:Xn,padding:Xn,paddingTop:Xn,paddingRight:Xn,paddingBottom:Xn,paddingLeft:Xn,margin:Xn,marginTop:Xn,marginRight:Xn,marginBottom:Xn,marginLeft:Xn,rotate:wm,rotateX:wm,rotateY:wm,rotateZ:wm,scale:DL,scaleX:DL,scaleY:DL,scaleZ:DL,skew:wm,skewX:wm,skewY:wm,distance:Xn,translateX:Xn,translateY:Xn,translateZ:Xn,x:Xn,y:Xn,z:Xn,perspective:Xn,transformPerspective:Xn,opacity:lT,originX:nwe,originY:nwe,originZ:Xn,zIndex:rwe,fillOpacity:lT,strokeOpacity:lT,numOctaves:rwe};function aX(t,e,n,r){const{style:i,vars:o,transform:u,transformOrigin:h}=t;let m=!1,v=!1,x=!0;for(const E in e){const M=e[E];if(fTe(E)){o[E]=M;continue}const D=gTe[E],H=uQe(M,D);if(iy.has(E)){if(m=!0,u[E]=H,!x)continue;M!==(D.default||0)&&(x=!1)}else E.startsWith("origin")?(v=!0,h[E]=H):i[E]=H}if(e.transform||(m||r?i.transform=aQe(t.transform,n,x,r):i.transform&&(i.transform="none")),v){const{originX:E="50%",originY:M="50%",originZ:D=0}=h;i.transformOrigin=`${E} ${M} ${D}`}}const lX=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vTe(t,e,n){for(const r in e)!Ia(e[r])&&!hTe(r,n)&&(t[r]=e[r])}function pQe({transformTemplate:t},e,n){return Vt.useMemo(()=>{const r=lX();return aX(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function fQe(t,e,n){const r=t.style||{},i={};return vTe(i,r,t),Object.assign(i,pQe(t,e,n)),t.transformValues?t.transformValues(i):i}function mQe(t,e,n){const r={},i=fQe(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const gQe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function sF(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||gQe.has(t)}let yTe=t=>!sF(t);function vQe(t){t&&(yTe=e=>e.startsWith("on")?!sF(e):t(e))}try{vQe(require("@emotion/is-prop-valid").default)}catch{}function yQe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(yTe(i)||n===!0&&sF(i)||!e&&!sF(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function iwe(t,e,n){return typeof t=="string"?t:Xn.transform(e+n*t)}function bQe(t,e,n){const r=iwe(e,t.x,t.width),i=iwe(n,t.y,t.height);return`${r} ${i}`}const _Qe={offset:"stroke-dashoffset",array:"stroke-dasharray"},wQe={offset:"strokeDashoffset",array:"strokeDasharray"};function xQe(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?_Qe:wQe;t[o.offset]=Xn.transform(-r);const u=Xn.transform(e),h=Xn.transform(n);t[o.array]=`${u} ${h}`}function uX(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:u,pathSpacing:h=1,pathOffset:m=0,...v},x,E,M){if(aX(t,v,x,M),E){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:D,style:H,dimensions:F}=t;D.transform&&(F&&(H.transform=D.transform),delete D.transform),F&&(i!==void 0||o!==void 0||H.transform)&&(H.transformOrigin=bQe(F,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(D.x=e),n!==void 0&&(D.y=n),r!==void 0&&(D.scale=r),u!==void 0&&xQe(D,u,h,m,!1)}const bTe=()=>({...lX(),attrs:{}}),cX=t=>typeof t=="string"&&t.toLowerCase()==="svg";function SQe(t,e,n,r){const i=Vt.useMemo(()=>{const o=bTe();return uX(o,e,{enableHardwareAcceleration:!1},cX(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};vTe(o,t.style,t),i.style={...o,...i.style}}return i}function EQe(t=!1){return(n,r,i,{latestValues:o},u)=>{const m=(oX(n)?SQe:mQe)(r,o,u,n),x={...yQe(r,typeof n=="string",t),...m,ref:i},{children:E}=r,M=Vt.useMemo(()=>Ia(E)?E.get():E,[E]);return Vt.createElement(n,{...x,children:M})}}const dX=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function _Te(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const wTe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function xTe(t,e,n,r){_Te(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(wTe.has(i)?i:dX(i),e.attrs[i])}function hX(t,e){const{style:n}=t,r={};for(const i in n)(Ia(n[i])||e.style&&Ia(e.style[i])||hTe(i,t))&&(r[i]=n[i]);return r}function STe(t,e){const n=hX(t,e);for(const r in t)if(Ia(t[r])||Ia(e[r])){const i=IM.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function pX(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function OM(t){const e=Vt.useRef(null);return e.current===null&&(e.current=t()),e.current}const oF=t=>Array.isArray(t),CQe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),PQe=t=>oF(t)?t[t.length-1]||0:t;function sN(t){const e=Ia(t)?t.get():t;return CQe(e)?e.toValue():e}function TQe({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,o){const u={latestValues:MQe(r,i,o,t),renderState:e()};return n&&(u.mount=h=>n(r,h,u)),u}const ETe=t=>(e,n)=>{const r=Vt.useContext(nB),i=Vt.useContext(rX),o=()=>TQe(t,e,r,i);return n?o():OM(o)};function MQe(t,e,n,r){const i={},o=r(t,{});for(const M in o)i[M]=sN(o[M]);let{initial:u,animate:h}=t;const m=sB(t),v=uTe(t);e&&v&&!m&&t.inherit!==!1&&(u===void 0&&(u=e.initial),h===void 0&&(h=e.animate));let x=n?n.initial===!1:!1;x=x||u===!1;const E=x?h:u;return E&&typeof E!="boolean"&&!iB(E)&&(Array.isArray(E)?E:[E]).forEach(D=>{const H=pX(t,D);if(!H)return;const{transitionEnd:F,transition:B,...z}=H;for(const P in z){let W=z[P];if(Array.isArray(W)){const Z=x?W.length-1:0;W=W[Z]}W!==null&&(i[P]=W)}for(const P in F)i[P]=F[P]}),i}const kQe={useVisualState:ETe({scrapeMotionValuesFromProps:STe,createRenderState:bTe,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}uX(n,r,{enableHardwareAcceleration:!1},cX(e.tagName),t.transformTemplate),xTe(e,n)}})},AQe={useVisualState:ETe({scrapeMotionValuesFromProps:hX,createRenderState:lX})};function IQe(t,{forwardMotionProps:e=!1},n,r){return{...oX(t)?kQe:AQe,preloadedFeatures:n,useRender:EQe(e),createVisualElement:r,Component:t}}function up(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const CTe=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function aB(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const RQe=t=>e=>CTe(e)&&t(e,aB(e));function pp(t,e,n,r){return up(t,e,RQe(n),r)}const DQe=(t,e)=>n=>e(t(n)),$m=(...t)=>t.reduce(DQe);function PTe(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const swe=PTe("dragHorizontal"),owe=PTe("dragVertical");function TTe(t){let e=!1;if(t==="y")e=owe();else if(t==="x")e=swe();else{const n=swe(),r=owe();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function MTe(){const t=TTe(!0);return t?(t(),!1):!0}class lg{constructor(e){this.isMounted=!1,this.node=e}update(){}}const ss=t=>t;function OQe(t){let e=[],n=[],r=0,i=!1,o=!1;const u=new WeakSet,h={schedule:(m,v=!1,x=!1)=>{const E=x&&i,M=E?e:n;return v&&u.add(m),M.indexOf(m)===-1&&(M.push(m),E&&i&&(r=e.length)),m},cancel:m=>{const v=n.indexOf(m);v!==-1&&n.splice(v,1),u.delete(m)},process:m=>{if(i){o=!0;return}if(i=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let v=0;v<r;v++){const x=e[v];x(m),u.has(x)&&(h.schedule(x),t())}i=!1,o&&(o=!1,h.process(m))}};return h}const OL=["prepare","read","update","preRender","render","postRender"],LQe=40;function NQe(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=OL.reduce((E,M)=>(E[M]=OQe(()=>n=!0),E),{}),u=E=>o[E].process(i),h=()=>{const E=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,LQe),1),i.timestamp=E,i.isProcessing=!0,OL.forEach(u),i.isProcessing=!1,n&&e&&(r=!1,t(h))},m=()=>{n=!0,r=!0,i.isProcessing||t(h)};return{schedule:OL.reduce((E,M)=>{const D=o[M];return E[M]=(H,F=!1,B=!1)=>(n||m(),D.schedule(H,F,B)),E},{}),cancel:E=>OL.forEach(M=>o[M].cancel(E)),state:i,steps:o}}const{schedule:Ni,cancel:Nd,state:Zo,steps:m9}=NQe(typeof requestAnimationFrame<"u"?requestAnimationFrame:ss,!0);function awe(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(o,u)=>{if(o.type==="touch"||MTe())return;const h=t.getProps();t.animationState&&h.whileHover&&t.animationState.setActive("whileHover",e),h[r]&&Ni.update(()=>h[r](o,u))};return pp(t.current,n,i,{passive:!t.getProps()[r]})}class FQe extends lg{mount(){this.unmount=$m(awe(this.node,!0),awe(this.node,!1))}unmount(){}}class BQe extends lg{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=$m(up(this.node.current,"focus",()=>this.onFocus()),up(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const kTe=(t,e)=>e?t===e?!0:kTe(t,e.parentElement):!1;function g9(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,aB(n))}class UQe extends lg{constructor(){super(...arguments),this.removeStartListeners=ss,this.removeEndListeners=ss,this.removeAccessibleListeners=ss,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),o=pp(window,"pointerup",(h,m)=>{if(!this.checkPressEnd())return;const{onTap:v,onTapCancel:x}=this.node.getProps();Ni.update(()=>{kTe(this.node.current,h.target)?v&&v(h,m):x&&x(h,m)})},{passive:!(r.onTap||r.onPointerUp)}),u=pp(window,"pointercancel",(h,m)=>this.cancelPress(h,m),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=$m(o,u),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const u=h=>{h.key!=="Enter"||!this.checkPressEnd()||g9("up",(m,v)=>{const{onTap:x}=this.node.getProps();x&&Ni.update(()=>x(m,v))})};this.removeEndListeners(),this.removeEndListeners=up(this.node.current,"keyup",u),g9("down",(h,m)=>{this.startPress(h,m)})},n=up(this.node.current,"keydown",e),r=()=>{this.isPressing&&g9("cancel",(o,u)=>this.cancelPress(o,u))},i=up(this.node.current,"blur",r);this.removeAccessibleListeners=$m(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Ni.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!MTe()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Ni.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=pp(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=up(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=$m(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const u$=new WeakMap,v9=new WeakMap,zQe=t=>{const e=u$.get(t.target);e&&e(t)},VQe=t=>{t.forEach(zQe)};function jQe({root:t,...e}){const n=t||document;v9.has(n)||v9.set(n,{});const r=v9.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(VQe,{root:t,...e})),r[i]}function HQe(t,e,n){const r=jQe(e);return u$.set(t,n),r.observe(t),()=>{u$.delete(t),r.unobserve(t)}}const GQe={some:0,all:1};class WQe extends lg{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:GQe[i]},h=m=>{const{isIntersecting:v}=m;if(this.isInView===v||(this.isInView=v,o&&!v&&this.hasEnteredView))return;v&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",v);const{onViewportEnter:x,onViewportLeave:E}=this.node.getProps(),M=v?x:E;M&&M(m)};return HQe(this.node.current,u,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some($Qe(e,n))&&this.startObserver()}unmount(){}}function $Qe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const KQe={inView:{Feature:WQe},tap:{Feature:UQe},focus:{Feature:BQe},hover:{Feature:FQe}};function ATe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function XQe(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function qQe(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function lB(t,e,n){const r=t.getProps();return pX(r,e,n!==void 0?n:r.custom,XQe(t),qQe(t))}const YQe="framerAppearId",ZQe="data-"+dX(YQe);let QQe=ss,fX=ss;const Km=t=>t*1e3,fp=t=>t/1e3,JQe={current:!1},ITe=t=>Array.isArray(t)&&typeof t[0]=="number";function RTe(t){return!!(!t||typeof t=="string"&&DTe[t]||ITe(t)||Array.isArray(t)&&t.every(RTe))}const KP=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,DTe={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:KP([0,.65,.55,1]),circOut:KP([.55,0,1,.45]),backIn:KP([.31,.01,.66,-.59]),backOut:KP([.33,1.53,.69,.99])};function OTe(t){if(t)return ITe(t)?KP(t):Array.isArray(t)?t.map(OTe):DTe[t]}function eJe(t,e,n,{delay:r=0,duration:i,repeat:o=0,repeatType:u="loop",ease:h,times:m}={}){const v={[e]:n};m&&(v.offset=m);const x=OTe(h);return Array.isArray(x)&&(v.easing=x),t.animate(v,{delay:r,duration:i,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"})}function tJe(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const LTe=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,nJe=1e-7,rJe=12;function iJe(t,e,n,r,i){let o,u,h=0;do u=e+(n-e)/2,o=LTe(u,r,i)-t,o>0?n=u:e=u;while(Math.abs(o)>nJe&&++h<rJe);return u}function LM(t,e,n,r){if(t===e&&n===r)return ss;const i=o=>iJe(o,0,1,t,n);return o=>o===0||o===1?o:LTe(i(o),e,r)}const sJe=LM(.42,0,1,1),oJe=LM(0,0,.58,1),NTe=LM(.42,0,.58,1),aJe=t=>Array.isArray(t)&&typeof t[0]!="number",FTe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,BTe=t=>e=>1-t(1-e),UTe=t=>1-Math.sin(Math.acos(t)),mX=BTe(UTe),lJe=FTe(mX),zTe=LM(.33,1.53,.69,.99),gX=BTe(zTe),uJe=FTe(gX),cJe=t=>(t*=2)<1?.5*gX(t):.5*(2-Math.pow(2,-10*(t-1))),dJe={linear:ss,easeIn:sJe,easeInOut:NTe,easeOut:oJe,circIn:UTe,circInOut:lJe,circOut:mX,backIn:gX,backInOut:uJe,backOut:zTe,anticipate:cJe},lwe=t=>{if(Array.isArray(t)){fX(t.length===4);const[e,n,r,i]=t;return LM(e,n,r,i)}else if(typeof t=="string")return dJe[t];return t},vX=(t,e)=>n=>!!(RM(n)&&cQe.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),VTe=(t,e,n)=>r=>{if(!RM(r))return r;const[i,o,u,h]=r.match(oB);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(u),alpha:h!==void 0?parseFloat(h):1}},hJe=t=>Jm(0,255,t),y9={...sy,transform:t=>Math.round(hJe(t))},C0={test:vX("rgb","red"),parse:VTe("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+y9.transform(t)+", "+y9.transform(e)+", "+y9.transform(n)+", "+uT(lT.transform(r))+")"};function pJe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const c$={test:vX("#"),parse:pJe,transform:C0.transform},Bw={test:vX("hsl","hue"),parse:VTe("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Id.transform(uT(e))+", "+Id.transform(uT(n))+", "+uT(lT.transform(r))+")"},xa={test:t=>C0.test(t)||c$.test(t)||Bw.test(t),parse:t=>C0.test(t)?C0.parse(t):Bw.test(t)?Bw.parse(t):c$.parse(t),transform:t=>RM(t)?t:t.hasOwnProperty("red")?C0.transform(t):Bw.transform(t)},Oi=(t,e,n)=>-n*t+n*e+t;function b9(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function fJe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,u=0;if(!e)i=o=u=n;else{const h=n<.5?n*(1+e):n+e-n*e,m=2*n-h;i=b9(m,h,t+1/3),o=b9(m,h,t),u=b9(m,h,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:r}}const _9=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},mJe=[c$,C0,Bw],gJe=t=>mJe.find(e=>e.test(t));function uwe(t){const e=gJe(t);let n=e.parse(t);return e===Bw&&(n=fJe(n)),n}const jTe=(t,e)=>{const n=uwe(t),r=uwe(e),i={...n};return o=>(i.red=_9(n.red,r.red,o),i.green=_9(n.green,r.green,o),i.blue=_9(n.blue,r.blue,o),i.alpha=Oi(n.alpha,r.alpha,o),C0.transform(i))};function vJe(t){var e,n;return isNaN(t)&&RM(t)&&(((e=t.match(oB))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(mTe))===null||n===void 0?void 0:n.length)||0)>0}const HTe={regex:lQe,countKey:"Vars",token:"${v}",parse:ss},GTe={regex:mTe,countKey:"Colors",token:"${c}",parse:xa.parse},WTe={regex:oB,countKey:"Numbers",token:"${n}",parse:sy.parse};function w9(t,{regex:e,countKey:n,token:r,parse:i}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...o.map(i)))}function aF(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&w9(n,HTe),w9(n,GTe),w9(n,WTe),n}function $Te(t){return aF(t).values}function KTe(t){const{values:e,numColors:n,numVars:r,tokenised:i}=aF(t),o=e.length;return u=>{let h=i;for(let m=0;m<o;m++)m<r?h=h.replace(HTe.token,u[m]):m<r+n?h=h.replace(GTe.token,xa.transform(u[m])):h=h.replace(WTe.token,uT(u[m]));return h}}const yJe=t=>typeof t=="number"?0:t;function bJe(t){const e=$Te(t);return KTe(t)(e.map(yJe))}const eg={test:vJe,parse:$Te,createTransformer:KTe,getAnimatableNone:bJe},XTe=(t,e)=>n=>`${n>0?e:t}`;function qTe(t,e){return typeof t=="number"?n=>Oi(t,e,n):xa.test(t)?jTe(t,e):t.startsWith("var(")?XTe(t,e):ZTe(t,e)}const YTe=(t,e)=>{const n=[...t],r=n.length,i=t.map((o,u)=>qTe(o,e[u]));return o=>{for(let u=0;u<r;u++)n[u]=i[u](o);return n}},_Je=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=qTe(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},ZTe=(t,e)=>{const n=eg.createTransformer(e),r=aF(t),i=aF(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?$m(YTe(r.values,i.values),n):XTe(t,e)},tM=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},cwe=(t,e)=>n=>Oi(t,e,n);function wJe(t){return typeof t=="number"?cwe:typeof t=="string"?xa.test(t)?jTe:ZTe:Array.isArray(t)?YTe:typeof t=="object"?_Je:cwe}function xJe(t,e,n){const r=[],i=n||wJe(t[0]),o=t.length-1;for(let u=0;u<o;u++){let h=i(t[u],t[u+1]);if(e){const m=Array.isArray(e)?e[u]||ss:e;h=$m(m,h)}r.push(h)}return r}function yX(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(fX(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=xJe(e,r,i),h=u.length,m=v=>{let x=0;if(h>1)for(;x<t.length-2&&!(v<t[x+1]);x++);const E=tM(t[x],t[x+1],v);return u[x](E)};return n?v=>m(Jm(t[0],t[o-1],v)):m}function SJe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=tM(0,e,r);t.push(Oi(n,1,i))}}function EJe(t){const e=[0];return SJe(e,t.length-1),e}function CJe(t,e){return t.map(n=>n*e)}function PJe(t,e){return t.map(()=>e||NTe).splice(0,t.length-1)}function lF({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=aJe(r)?r.map(lwe):lwe(r),o={done:!1,value:e[0]},u=CJe(n&&n.length===e.length?n:EJe(e),t),h=yX(u,e,{ease:Array.isArray(i)?i:PJe(e,i)});return{calculatedDuration:t,next:m=>(o.value=h(m),o.done=m>=t,o)}}function QTe(t,e){return e?t*(1e3/e):0}const TJe=5;function JTe(t,e,n){const r=Math.max(e-TJe,0);return QTe(n-t(r),e-r)}const x9=.001,MJe=.01,dwe=10,kJe=.05,AJe=1;function IJe({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,o;QQe(t<=Km(dwe));let u=1-e;u=Jm(kJe,AJe,u),t=Jm(MJe,dwe,fp(t)),u<1?(i=v=>{const x=v*u,E=x*t,M=x-n,D=d$(v,u),H=Math.exp(-E);return x9-M/D*H},o=v=>{const E=v*u*t,M=E*n+n,D=Math.pow(u,2)*Math.pow(v,2)*t,H=Math.exp(-E),F=d$(Math.pow(v,2),u);return(-i(v)+x9>0?-1:1)*((M-D)*H)/F}):(i=v=>{const x=Math.exp(-v*t),E=(v-n)*t+1;return-x9+x*E},o=v=>{const x=Math.exp(-v*t),E=(n-v)*(t*t);return x*E});const h=5/t,m=DJe(i,o,h);if(t=Km(t),isNaN(m))return{stiffness:100,damping:10,duration:t};{const v=Math.pow(m,2)*r;return{stiffness:v,damping:u*2*Math.sqrt(r*v),duration:t}}}const RJe=12;function DJe(t,e,n){let r=n;for(let i=1;i<RJe;i++)r=r-t(r)/e(r);return r}function d$(t,e){return t*Math.sqrt(1-e*e)}const OJe=["duration","bounce"],LJe=["stiffness","damping","mass"];function hwe(t,e){return e.some(n=>t[n]!==void 0)}function NJe(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!hwe(t,LJe)&&hwe(t,OJe)){const n=IJe(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function eMe({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],o=t[t.length-1],u={done:!1,value:i},{stiffness:h,damping:m,mass:v,velocity:x,duration:E,isResolvedFromDuration:M}=NJe(r),D=x?-fp(x):0,H=m/(2*Math.sqrt(h*v)),F=o-i,B=fp(Math.sqrt(h/v)),z=Math.abs(F)<5;n||(n=z?.01:2),e||(e=z?.005:.5);let P;if(H<1){const W=d$(B,H);P=Z=>{const ve=Math.exp(-H*B*Z);return o-ve*((D+H*B*F)/W*Math.sin(W*Z)+F*Math.cos(W*Z))}}else if(H===1)P=W=>o-Math.exp(-B*W)*(F+(D+B*F)*W);else{const W=B*Math.sqrt(H*H-1);P=Z=>{const ve=Math.exp(-H*B*Z),X=Math.min(W*Z,300);return o-ve*((D+H*B*F)*Math.sinh(X)+W*F*Math.cosh(X))/W}}return{calculatedDuration:M&&E||null,next:W=>{const Z=P(W);if(M)u.done=W>=E;else{let ve=D;W!==0&&(H<1?ve=JTe(P,W,Z):ve=0);const X=Math.abs(ve)<=n,se=Math.abs(o-Z)<=e;u.done=X&&se}return u.value=u.done?o:Z,u}}}function pwe({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:u,min:h,max:m,restDelta:v=.5,restSpeed:x}){const E=t[0],M={done:!1,value:E},D=pe=>h!==void 0&&pe<h||m!==void 0&&pe>m,H=pe=>h===void 0?m:m===void 0||Math.abs(h-pe)<Math.abs(m-pe)?h:m;let F=n*e;const B=E+F,z=u===void 0?B:u(B);z!==B&&(F=z-E);const P=pe=>-F*Math.exp(-pe/r),W=pe=>z+P(pe),Z=pe=>{const J=P(pe),ne=W(pe);M.done=Math.abs(J)<=v,M.value=M.done?z:ne};let ve,X;const se=pe=>{D(M.value)&&(ve=pe,X=eMe({keyframes:[M.value,H(M.value)],velocity:JTe(W,pe,M.value),damping:i,stiffness:o,restDelta:v,restSpeed:x}))};return se(0),{calculatedDuration:null,next:pe=>{let J=!1;return!X&&ve===void 0&&(J=!0,Z(pe),se(pe)),ve!==void 0&&pe>ve?X.next(pe-ve):(!J&&Z(pe),M)}}}const FJe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Ni.update(e,!0),stop:()=>Nd(e),now:()=>Zo.isProcessing?Zo.timestamp:performance.now()}},fwe=2e4;function mwe(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<fwe;)e+=n,r=t.next(e);return e>=fwe?1/0:e}const BJe={decay:pwe,inertia:pwe,tween:lF,keyframes:lF,spring:eMe};function uF({autoplay:t=!0,delay:e=0,driver:n=FJe,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:u=0,repeatType:h="loop",onPlay:m,onStop:v,onComplete:x,onUpdate:E,...M}){let D=1,H=!1,F,B;const z=()=>{B=new Promise(dt=>{F=dt})};z();let P;const W=BJe[i]||lF;let Z;W!==lF&&typeof r[0]!="number"&&(Z=yX([0,100],r,{clamp:!1}),r=[0,100]);const ve=W({...M,keyframes:r});let X;h==="mirror"&&(X=W({...M,keyframes:[...r].reverse(),velocity:-(M.velocity||0)}));let se="idle",pe=null,J=null,ne=null;ve.calculatedDuration===null&&o&&(ve.calculatedDuration=mwe(ve));const{calculatedDuration:Ee}=ve;let ot=1/0,wt=1/0;Ee!==null&&(ot=Ee+u,wt=ot*(o+1)-u);let ue=0;const Ye=dt=>{if(J===null)return;D>0&&(J=Math.min(J,dt)),D<0&&(J=Math.min(dt-wt/D,J)),pe!==null?ue=pe:ue=Math.round(dt-J)*D;const Pt=ue-e*(D>=0?1:-1),cn=D>=0?Pt<0:Pt>wt;ue=Math.max(Pt,0),se==="finished"&&pe===null&&(ue=wt);let ht=ue,Et=ve;if(o){const Jt=ue/ot;let Qn=Math.floor(Jt),vn=Jt%1;!vn&&Jt>=1&&(vn=1),vn===1&&Qn--,Qn=Math.min(Qn,o+1);const Qe=!!(Qn%2);Qe&&(h==="reverse"?(vn=1-vn,u&&(vn-=u/ot)):h==="mirror"&&(Et=X));let Zr=Jm(0,1,vn);ue>wt&&(Zr=h==="reverse"&&Qe?1:0),ht=Zr*ot}const $t=cn?{done:!1,value:r[0]}:Et.next(ht);Z&&($t.value=Z($t.value));let{done:Zt}=$t;!cn&&Ee!==null&&(Zt=D>=0?ue>=wt:ue<=0);const gn=pe===null&&(se==="finished"||se==="running"&&Zt);return E&&E($t.value),gn&&Be(),$t},Te=()=>{P&&P.stop(),P=void 0},st=()=>{se="idle",Te(),F(),z(),J=ne=null},Be=()=>{se="finished",x&&x(),Te(),F()},Xe=()=>{if(H)return;P||(P=n(Ye));const dt=P.now();m&&m(),pe!==null?J=dt-pe:(!J||se==="finished")&&(J=dt),se==="finished"&&z(),ne=J,pe=null,se="running",P.start()};t&&Xe();const qe={then(dt,Pt){return B.then(dt,Pt)},get time(){return fp(ue)},set time(dt){dt=Km(dt),ue=dt,pe!==null||!P||D===0?pe=dt:J=P.now()-dt/D},get duration(){const dt=ve.calculatedDuration===null?mwe(ve):ve.calculatedDuration;return fp(dt)},get speed(){return D},set speed(dt){dt===D||!P||(D=dt,qe.time=fp(ue))},get state(){return se},play:Xe,pause:()=>{se="paused",pe=ue},stop:()=>{H=!0,se!=="idle"&&(se="idle",v&&v(),st())},cancel:()=>{ne!==null&&Ye(ne),st()},complete:()=>{se="finished"},sample:dt=>(J=0,Ye(dt))};return qe}function UJe(t){let e;return()=>(e===void 0&&(e=t()),e)}const zJe=UJe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),VJe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),LL=10,jJe=2e4,HJe=(t,e)=>e.type==="spring"||t==="backgroundColor"||!RTe(e.ease);function GJe(t,e,{onUpdate:n,onComplete:r,...i}){if(!(zJe()&&VJe.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let u=!1,h,m;const v=()=>{m=new Promise(P=>{h=P})};v();let{keyframes:x,duration:E=300,ease:M,times:D}=i;if(HJe(e,i)){const P=uF({...i,repeat:0,delay:0});let W={done:!1,value:x[0]};const Z=[];let ve=0;for(;!W.done&&ve<jJe;)W=P.sample(ve),Z.push(W.value),ve+=LL;D=void 0,x=Z,E=ve-LL,M="linear"}const H=eJe(t.owner.current,e,x,{...i,duration:E,ease:M,times:D}),F=()=>H.cancel(),B=()=>{Ni.update(F),h(),v()};return H.onfinish=()=>{t.set(tJe(x,i)),r&&r(),B()},{then(P,W){return m.then(P,W)},attachTimeline(P){return H.timeline=P,H.onfinish=null,ss},get time(){return fp(H.currentTime||0)},set time(P){H.currentTime=Km(P)},get speed(){return H.playbackRate},set speed(P){H.playbackRate=P},get duration(){return fp(E)},play:()=>{u||(H.play(),Nd(F))},pause:()=>H.pause(),stop:()=>{if(u=!0,H.playState==="idle")return;const{currentTime:P}=H;if(P){const W=uF({...i,autoplay:!1});t.setWithVelocity(W.sample(P-LL).value,W.sample(P).value,LL)}B()},complete:()=>H.finish(),cancel:B}}function WJe({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ss,pause:ss,stop:ss,then:o=>(o(),Promise.resolve()),cancel:ss,complete:ss});return e?uF({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const $Je={type:"spring",stiffness:500,damping:25,restSpeed:10},KJe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),XJe={type:"keyframes",duration:.8},qJe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},YJe=(t,{keyframes:e})=>e.length>2?XJe:iy.has(t)?t.startsWith("scale")?KJe(e[1]):$Je:qJe,h$=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(eg.test(e)||e==="0")&&!e.startsWith("url(")),ZJe=new Set(["brightness","contrast","saturate","opacity"]);function QJe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(oB)||[];if(!r)return t;const i=n.replace(r,"");let o=ZJe.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const JJe=/([a-z-]*)\(.*?\)/g,p$={...eg,getAnimatableNone:t=>{const e=t.match(JJe);return e?e.map(QJe).join(" "):t}},eet={...gTe,color:xa,backgroundColor:xa,outlineColor:xa,fill:xa,stroke:xa,borderColor:xa,borderTopColor:xa,borderRightColor:xa,borderBottomColor:xa,borderLeftColor:xa,filter:p$,WebkitFilter:p$},bX=t=>eet[t];function tMe(t,e){let n=bX(t);return n!==p$&&(n=eg),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const nMe=t=>/^0[^.\s]+$/.test(t);function tet(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||nMe(t)}function net(t,e,n,r){const i=h$(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const u=r.from!==void 0?r.from:t.get();let h;const m=[];for(let v=0;v<o.length;v++)o[v]===null&&(o[v]=v===0?u:o[v-1]),tet(o[v])&&m.push(v),typeof o[v]=="string"&&o[v]!=="none"&&o[v]!=="0"&&(h=o[v]);if(i&&m.length&&h)for(let v=0;v<m.length;v++){const x=m[v];o[x]=tMe(e,h)}return o}function ret({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:u,repeatDelay:h,from:m,elapsed:v,...x}){return!!Object.keys(x).length}function rMe(t,e){return t[e]||t.default||t}const _X=(t,e,n,r={})=>i=>{const o=rMe(r,t)||{},u=o.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Km(u);const m=net(e,t,n,o),v=m[0],x=m[m.length-1],E=h$(t,v),M=h$(t,x);let D={keyframes:m,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-h,onUpdate:H=>{e.set(H),o.onUpdate&&o.onUpdate(H)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(ret(o)||(D={...D,...YJe(t,D)}),D.duration&&(D.duration=Km(D.duration)),D.repeatDelay&&(D.repeatDelay=Km(D.repeatDelay)),!E||!M||JQe.current||o.type===!1)return WJe(D);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const H=GJe(e,t,D);if(H)return H}return uF(D)};function cF(t){return!!(Ia(t)&&t.add)}const iMe=t=>/^\-?\d*\.?\d+$/.test(t);function wX(t,e){t.indexOf(e)===-1&&t.push(e)}function xX(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function iet([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[o]=t.splice(e,1);t.splice(i,0,o)}return t}class SX{constructor(){this.subscriptions=[]}add(e){return wX(this.subscriptions,e),()=>xX(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const u=this.subscriptions[o];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const set=t=>!isNaN(parseFloat(t)),cT={current:void 0};class oet{constructor(e,n={}){this.version="10.16.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:u}=Zo;this.lastUpdated!==u&&(this.timeDelta=o,this.lastUpdated=u,Ni.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ni.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=set(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new SX);const r=this.events[e].add(n);return e==="change"?()=>{r(),Ni.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return cT.current&&cT.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?QTe(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function X0(t,e){return new oet(t,e)}const sMe=t=>e=>e.test(t),aet={test:t=>t==="auto",parse:t=>t},oMe=[sy,Xn,Id,wm,hQe,dQe,aet],zP=t=>oMe.find(sMe(t)),uet=[...oMe,xa,eg],cet=t=>uet.find(sMe(t));function det(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,X0(n))}function het(t,e){const n=lB(t,e);let{transitionEnd:r={},transition:i={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const u in o){const h=PQe(o[u]);det(t,u,h)}}function pet(t,e,n){var r,i;const o=Object.keys(e).filter(h=>!t.hasValue(h)),u=o.length;if(u)for(let h=0;h<u;h++){const m=o[h],v=e[m];let x=null;Array.isArray(v)&&(x=v[0]),x===null&&(x=(i=(r=n[m])!==null&&r!==void 0?r:t.readValue(m))!==null&&i!==void 0?i:e[m]),x!=null&&(typeof x=="string"&&(iMe(x)||nMe(x))?x=parseFloat(x):!cet(x)&&eg.test(v)&&(x=tMe(m,v)),t.addValue(m,X0(x,{owner:t})),n[m]===void 0&&(n[m]=x),x!==null&&t.setBaseTarget(m,x))}}function fet(t,e){return e?(e[t]||e.default||e).from:void 0}function met(t,e,n){const r={};for(const i in t){const o=fet(i,e);if(o!==void 0)r[i]=o;else{const u=n.getValue(i);u&&(r[i]=u.get())}}return r}function get({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function aMe(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:u,...h}=t.makeTargetAnimatable(e);const m=t.getValue("willChange");r&&(o=r);const v=[],x=i&&t.animationState&&t.animationState.getState()[i];for(const E in h){const M=t.getValue(E),D=h[E];if(!M||D===void 0||x&&get(x,E))continue;const H={delay:n,elapsed:0,...o};if(window.HandoffAppearAnimations&&!M.hasAnimated){const B=t.getProps()[ZQe];B&&(H.elapsed=window.HandoffAppearAnimations(B,E,M,Ni))}M.start(_X(E,M,D,t.shouldReduceMotion&&iy.has(E)?{type:!1}:H));const F=M.animation;cF(m)&&(m.add(E),F.then(()=>m.remove(E))),v.push(F)}return u&&Promise.all(v).then(()=>{u&&het(t,u)}),v}function f$(t,e,n={}){const r=lB(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(aMe(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:v=0,staggerChildren:x,staggerDirection:E}=i;return vet(t,e,v+m,x,E,n)}:()=>Promise.resolve(),{when:h}=i;if(h){const[m,v]=h==="beforeChildren"?[o,u]:[u,o];return m().then(()=>v())}else return Promise.all([o(),u(n.delay)])}function vet(t,e,n=0,r=0,i=1,o){const u=[],h=(t.variantChildren.size-1)*r,m=i===1?(v=0)=>v*r:(v=0)=>h-v*r;return Array.from(t.variantChildren).sort(yet).forEach((v,x)=>{v.notify("AnimationStart",e),u.push(f$(v,e,{...o,delay:n+m(x)}).then(()=>v.notify("AnimationComplete",e)))}),Promise.all(u)}function yet(t,e){return t.sortNodePosition(e)}function bet(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>f$(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=f$(t,e,n);else{const i=typeof e=="function"?lB(t,e,n.custom):e;r=Promise.all(aMe(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const _et=[...iX].reverse(),wet=iX.length;function xet(t){return e=>Promise.all(e.map(({animation:n,options:r})=>bet(t,n,r)))}function Eet(t){let e=xet(t);const n=Pet();let r=!0;const i=(m,v)=>{const x=lB(t,v);if(x){const{transition:E,transitionEnd:M,...D}=x;m={...m,...D,...M}}return m};function o(m){e=m(t)}function u(m,v){const x=t.getProps(),E=t.getVariantContext(!0)||{},M=[],D=new Set;let H={},F=1/0;for(let z=0;z<wet;z++){const P=_et[z],W=n[P],Z=x[P]!==void 0?x[P]:E[P],ve=JT(Z),X=P===v?W.isActive:null;X===!1&&(F=z);let se=Z===E[P]&&Z!==x[P]&&ve;if(se&&r&&t.manuallyAnimateOnMount&&(se=!1),W.protectedKeys={...H},!W.isActive&&X===null||!Z&&!W.prevProp||iB(Z)||typeof Z=="boolean")continue;const pe=Cet(W.prevProp,Z);let J=pe||P===v&&W.isActive&&!se&&ve||z>F&&ve;const ne=Array.isArray(Z)?Z:[Z];let Ee=ne.reduce(i,{});X===!1&&(Ee={});const{prevResolvedValues:ot={}}=W,wt={...ot,...Ee},ue=Ye=>{J=!0,D.delete(Ye),W.needsAnimating[Ye]=!0};for(const Ye in wt){const Te=Ee[Ye],st=ot[Ye];H.hasOwnProperty(Ye)||(Te!==st?oF(Te)&&oF(st)?!ATe(Te,st)||pe?ue(Ye):W.protectedKeys[Ye]=!0:Te!==void 0?ue(Ye):D.add(Ye):Te!==void 0&&D.has(Ye)?ue(Ye):W.protectedKeys[Ye]=!0)}W.prevProp=Z,W.prevResolvedValues=Ee,W.isActive&&(H={...H,...Ee}),r&&t.blockInitialAnimation&&(J=!1),J&&!se&&M.push(...ne.map(Ye=>({animation:Ye,options:{type:P,...m}})))}if(D.size){const z={};D.forEach(P=>{const W=t.getBaseTarget(P);W!==void 0&&(z[P]=W)}),M.push({animation:z})}let B=!!M.length;return r&&x.initial===!1&&!t.manuallyAnimateOnMount&&(B=!1),r=!1,B?e(M):Promise.resolve()}function h(m,v,x){var E;if(n[m].isActive===v)return Promise.resolve();(E=t.variantChildren)===null||E===void 0||E.forEach(D=>{var H;return(H=D.animationState)===null||H===void 0?void 0:H.setActive(m,v)}),n[m].isActive=v;const M=u(x,m);for(const D in n)n[D].protectedKeys={};return M}return{animateChanges:u,setActive:h,setAnimateFunction:o,getState:()=>n}}function Cet(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!ATe(e,t):!1}function l0(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Pet(){return{animate:l0(!0),whileInView:l0(),whileHover:l0(),whileTap:l0(),whileDrag:l0(),whileFocus:l0(),exit:l0()}}class Tet extends lg{constructor(e){super(e),e.animationState||(e.animationState=Eet(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),iB(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let Met=0;class ket extends lg{constructor(){super(...arguments),this.id=Met++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Aet={animation:{Feature:Tet},exit:{Feature:ket}},gwe=(t,e)=>Math.abs(t-e);function Iet(t,e){const n=gwe(t.x,e.x),r=gwe(t.y,e.y);return Math.sqrt(n**2+r**2)}class lMe{constructor(e,n,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=E9(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,E=Iet(v.offset,{x:0,y:0})>=3;if(!x&&!E)return;const{point:M}=v,{timestamp:D}=Zo;this.history.push({...M,timestamp:D});const{onStart:H,onMove:F}=this.handlers;x||(H&&H(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,v)},this.handlePointerMove=(v,x)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=S9(x,this.transformPagePoint),Ni.update(this.updatePoint,!0)},this.handlePointerUp=(v,x)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:E,onSessionEnd:M}=this.handlers,D=E9(v.type==="pointercancel"?this.lastMoveEventInfo:S9(x,this.transformPagePoint),this.history);this.startEvent&&E&&E(v,D),M&&M(v,D)},!CTe(e))return;this.handlers=n,this.transformPagePoint=r;const i=aB(e),o=S9(i,this.transformPagePoint),{point:u}=o,{timestamp:h}=Zo;this.history=[{...u,timestamp:h}];const{onSessionStart:m}=n;m&&m(e,E9(o,this.history)),this.removeListeners=$m(pp(window,"pointermove",this.handlePointerMove),pp(window,"pointerup",this.handlePointerUp),pp(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Nd(this.updatePoint)}}function S9(t,e){return e?{point:e(t.point)}:t}function vwe(t,e){return{x:t.x-e.x,y:t.y-e.y}}function E9({point:t},e){return{point:t,delta:vwe(t,uMe(e)),offset:vwe(t,Ret(e)),velocity:Det(e,.1)}}function Ret(t){return t[0]}function uMe(t){return t[t.length-1]}function Det(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=uMe(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Km(e)));)n--;if(!r)return{x:0,y:0};const o=fp(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const u={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function Tl(t){return t.max-t.min}function m$(t,e=0,n=.01){return Math.abs(t-e)<=n}function ywe(t,e,n,r=.5){t.origin=r,t.originPoint=Oi(e.min,e.max,t.origin),t.scale=Tl(n)/Tl(e),(m$(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Oi(n.min,n.max,t.origin)-t.originPoint,(m$(t.translate)||isNaN(t.translate))&&(t.translate=0)}function dT(t,e,n,r){ywe(t.x,e.x,n.x,r?r.originX:void 0),ywe(t.y,e.y,n.y,r?r.originY:void 0)}function bwe(t,e,n){t.min=n.min+e.min,t.max=t.min+Tl(e)}function Oet(t,e,n){bwe(t.x,e.x,n.x),bwe(t.y,e.y,n.y)}function _we(t,e,n){t.min=e.min-n.min,t.max=t.min+Tl(e)}function hT(t,e,n){_we(t.x,e.x,n.x),_we(t.y,e.y,n.y)}function Let(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Oi(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Oi(n,t,r.max):Math.min(t,n)),t}function wwe(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Net(t,{top:e,left:n,bottom:r,right:i}){return{x:wwe(t.x,n,i),y:wwe(t.y,e,r)}}function xwe(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function Fet(t,e){return{x:xwe(t.x,e.x),y:xwe(t.y,e.y)}}function Bet(t,e){let n=.5;const r=Tl(t),i=Tl(e);return i>r?n=tM(e.min,e.max-r,t.min):r>i&&(n=tM(t.min,t.max-i,e.min)),Jm(0,1,n)}function Uet(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const g$=.35;function zet(t=g$){return t===!1?t=0:t===!0&&(t=g$),{x:Swe(t,"left","right"),y:Swe(t,"top","bottom")}}function Swe(t,e,n){return{min:Ewe(t,e),max:Ewe(t,n)}}function Ewe(t,e){return typeof t=="number"?t:t[e]||0}const Cwe=()=>({translate:0,scale:1,origin:0,originPoint:0}),Uw=()=>({x:Cwe(),y:Cwe()}),Pwe=()=>({min:0,max:0}),ks=()=>({x:Pwe(),y:Pwe()});function Sd(t){return[t("x"),t("y")]}function cMe({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Vet({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function jet(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function C9(t){return t===void 0||t===1}function v$({scale:t,scaleX:e,scaleY:n}){return!C9(t)||!C9(e)||!C9(n)}function g0(t){return v$(t)||dMe(t)||t.z||t.rotate||t.rotateX||t.rotateY}function dMe(t){return Twe(t.x)||Twe(t.y)}function Twe(t){return t&&t!=="0%"}function dF(t,e,n){const r=t-n,i=e*r;return n+i}function Mwe(t,e,n,r,i){return i!==void 0&&(t=dF(t,i,r)),dF(t,n,r)+e}function y$(t,e=0,n=1,r,i){t.min=Mwe(t.min,e,n,r,i),t.max=Mwe(t.max,e,n,r,i)}function hMe(t,{x:e,y:n}){y$(t.x,e.translate,e.scale,e.originPoint),y$(t.y,n.translate,n.scale,n.originPoint)}function Het(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,u;for(let h=0;h<i;h++){o=n[h],u=o.projectionDelta;const m=o.instance;m&&m.style&&m.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&zw(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,hMe(t,u)),r&&g0(o.latestValues)&&zw(t,o.latestValues))}e.x=kwe(e.x),e.y=kwe(e.y)}function kwe(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Cm(t,e){t.min=t.min+e,t.max=t.max+e}function Awe(t,e,[n,r,i]){const o=e[i]!==void 0?e[i]:.5,u=Oi(t.min,t.max,o);y$(t,e[n],e[r],u,e.scale)}const Get=["x","scaleX","originX"],Wet=["y","scaleY","originY"];function zw(t,e){Awe(t.x,e,Get),Awe(t.y,e,Wet)}function pMe(t,e){return cMe(jet(t.getBoundingClientRect(),e))}function $et(t,e,n){const r=pMe(t,n),{scroll:i}=e;return i&&(Cm(r.x,i.offset.x),Cm(r.y,i.offset.y)),r}const Ket=new WeakMap;class Xet{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ks(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{this.stopAnimation(),n&&this.snapToCursor(aB(m,"page").point)},o=(m,v)=>{const{drag:x,dragPropagation:E,onDragStart:M}=this.getProps();if(x&&!E&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=TTe(x),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Sd(H=>{let F=this.getAxisMotionValue(H).get()||0;if(Id.test(F)){const{projection:B}=this.visualElement;if(B&&B.layout){const z=B.layout.layoutBox[H];z&&(F=Tl(z)*(parseFloat(F)/100))}}this.originPoint[H]=F}),M&&Ni.update(()=>M(m,v),!1,!0);const{animationState:D}=this.visualElement;D&&D.setActive("whileDrag",!0)},u=(m,v)=>{const{dragPropagation:x,dragDirectionLock:E,onDirectionLock:M,onDrag:D}=this.getProps();if(!x&&!this.openGlobalLock)return;const{offset:H}=v;if(E&&this.currentDirection===null){this.currentDirection=qet(H),this.currentDirection!==null&&M&&M(this.currentDirection);return}this.updateAxis("x",v.point,H),this.updateAxis("y",v.point,H),this.visualElement.render(),D&&D(m,v)},h=(m,v)=>this.stop(m,v);this.panSession=new lMe(e,{onSessionStart:i,onStart:o,onMove:u,onSessionEnd:h},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Ni.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!NL(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=Let(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:r}=this.visualElement.projection||{},i=this.constraints;e&&Fw(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=Net(r.layoutBox,e):this.constraints=!1,this.elastic=zet(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Sd(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=Uet(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Fw(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=$et(r,i.root,this.visualElement.getTransformPagePoint());let u=Fet(i.layout.layoutBox,o);if(n){const h=n(Vet(u));this.hasMutatedConstraints=!!h,h&&(u=cMe(h))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},v=Sd(x=>{if(!NL(x,n,this.currentDirection))return;let E=m&&m[x]||{};u&&(E={min:0,max:0});const M=i?200:1e6,D=i?40:1e7,H={type:"inertia",velocity:r?e[x]:0,bounceStiffness:M,bounceDamping:D,timeConstant:750,restDelta:1,restSpeed:10,...o,...E};return this.startAxisValueAnimation(x,H)});return Promise.all(v).then(h)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(_X(e,r,0,n))}stopAnimation(){Sd(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Sd(n=>{const{drag:r}=this.getProps();if(!NL(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:u,max:h}=i.layout.layoutBox[n];o.set(e[n]-Oi(u,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Fw(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Sd(u=>{const h=this.getAxisMotionValue(u);if(h){const m=h.get();i[u]=Bet({min:m,max:m},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Sd(u=>{if(!NL(u,e,null))return;const h=this.getAxisMotionValue(u),{min:m,max:v}=this.constraints[u];h.set(Oi(m,v,i[u]))})}addListeners(){if(!this.visualElement.current)return;Ket.set(this.visualElement,this);const e=this.visualElement.current,n=pp(e,"pointerdown",m=>{const{drag:v,dragListener:x=!0}=this.getProps();v&&x&&this.start(m)}),r=()=>{const{dragConstraints:m}=this.getProps();Fw(m)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const u=up(window,"resize",()=>this.scalePositionWithinConstraints()),h=i.addEventListener("didUpdate",({delta:m,hasLayoutChanged:v})=>{this.isDragging&&v&&(Sd(x=>{const E=this.getAxisMotionValue(x);E&&(this.originPoint[x]+=m[x].translate,E.set(E.get()+m[x].translate))}),this.visualElement.render())});return()=>{u(),n(),o(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:u=g$,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:u,dragMomentum:h}}}function NL(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function qet(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Yet extends lg{constructor(e){super(e),this.removeGroupControls=ss,this.removeListeners=ss,this.controls=new Xet(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ss}unmount(){this.removeGroupControls(),this.removeListeners()}}const Iwe=t=>(e,n)=>{t&&Ni.update(()=>t(e,n))};class Zet extends lg{constructor(){super(...arguments),this.removePointerDownListener=ss}onPointerDown(e){this.session=new lMe(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Iwe(e),onStart:Iwe(n),onMove:r,onEnd:(o,u)=>{delete this.session,i&&Ni.update(()=>i(o,u))}}}mount(){this.removePointerDownListener=pp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function Qet(){const t=Vt.useContext(rX);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=Vt.useId();return Vt.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const oN={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Rwe(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const VP={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Xn.test(t))t=parseFloat(t);else return t;const n=Rwe(t,e.target.x),r=Rwe(t,e.target.y);return`${n}% ${r}%`}},Jet={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=eg.parse(t);if(i.length>5)return r;const o=eg.createTransformer(t),u=typeof i[0]!="number"?1:0,h=n.x.scale*e.x,m=n.y.scale*e.y;i[0+u]/=h,i[1+u]/=m;const v=Oi(h,m,.5);return typeof i[2+u]=="number"&&(i[2+u]/=v),typeof i[3+u]=="number"&&(i[3+u]/=v),o(i)}};class ett extends E1e.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;iQe(ttt),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),oN.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,u=r.projection;return u&&(u.isPresent=o,i||e.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||Ni.postRender(()=>{const h=u.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function fMe(t){const[e,n]=Qet(),r=Vt.useContext(cTe);return E1e.createElement(ett,{...t,layoutGroup:r,switchLayoutGroup:Vt.useContext(dTe),isPresent:e,safeToRemove:n})}const ttt={borderRadius:{...VP,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:VP,borderTopRightRadius:VP,borderBottomLeftRadius:VP,borderBottomRightRadius:VP,boxShadow:Jet},mMe=["TopLeft","TopRight","BottomLeft","BottomRight"],ntt=mMe.length,Dwe=t=>typeof t=="string"?parseFloat(t):t,Owe=t=>typeof t=="number"||Xn.test(t);function rtt(t,e,n,r,i,o){i?(t.opacity=Oi(0,n.opacity!==void 0?n.opacity:1,itt(r)),t.opacityExit=Oi(e.opacity!==void 0?e.opacity:1,0,stt(r))):o&&(t.opacity=Oi(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let u=0;u<ntt;u++){const h=`border${mMe[u]}Radius`;let m=Lwe(e,h),v=Lwe(n,h);if(m===void 0&&v===void 0)continue;m||(m=0),v||(v=0),m===0||v===0||Owe(m)===Owe(v)?(t[h]=Math.max(Oi(Dwe(m),Dwe(v),r),0),(Id.test(v)||Id.test(m))&&(t[h]+="%")):t[h]=v}(e.rotate||n.rotate)&&(t.rotate=Oi(e.rotate||0,n.rotate||0,r))}function Lwe(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const itt=gMe(0,.5,mX),stt=gMe(.5,.95,ss);function gMe(t,e,n){return r=>r<t?0:r>e?1:n(tM(t,e,r))}function Nwe(t,e){t.min=e.min,t.max=e.max}function hu(t,e){Nwe(t.x,e.x),Nwe(t.y,e.y)}function Fwe(t,e,n,r,i){return t-=e,t=dF(t,1/n,r),i!==void 0&&(t=dF(t,1/i,r)),t}function ott(t,e=0,n=1,r=.5,i,o=t,u=t){if(Id.test(e)&&(e=parseFloat(e),e=Oi(u.min,u.max,e/100)-u.min),typeof e!="number")return;let h=Oi(o.min,o.max,r);t===o&&(h-=e),t.min=Fwe(t.min,e,n,h,i),t.max=Fwe(t.max,e,n,h,i)}function Bwe(t,e,[n,r,i],o,u){ott(t,e[n],e[r],e[i],e.scale,o,u)}const att=["x","scaleX","originX"],ltt=["y","scaleY","originY"];function Uwe(t,e,n,r){Bwe(t.x,e,att,n?n.x:void 0,r?r.x:void 0),Bwe(t.y,e,ltt,n?n.y:void 0,r?r.y:void 0)}function zwe(t){return t.translate===0&&t.scale===1}function vMe(t){return zwe(t.x)&&zwe(t.y)}function utt(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function yMe(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Vwe(t){return Tl(t.x)/Tl(t.y)}class ctt{constructor(){this.members=[]}add(e){wX(this.members,e),e.scheduleRender()}remove(e){if(xX(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function jwe(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:m,rotateX:v,rotateY:x}=n;m&&(r+=`rotate(${m}deg) `),v&&(r+=`rotateX(${v}deg) `),x&&(r+=`rotateY(${x}deg) `)}const u=t.x.scale*e.x,h=t.y.scale*e.y;return(u!==1||h!==1)&&(r+=`scale(${u}, ${h})`),r||"none"}const dtt=(t,e)=>t.depth-e.depth;class htt{constructor(){this.children=[],this.isDirty=!1}add(e){wX(this.children,e),this.isDirty=!0}remove(e){xX(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(dtt),this.isDirty=!1,this.children.forEach(e)}}function ptt(t,e){const n=performance.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Nd(r),t(o-e))};return Ni.read(r,!0),()=>Nd(r)}function ftt(t){window.MotionDebug&&window.MotionDebug.record(t)}function mtt(t){return t instanceof SVGElement&&t.tagName!=="svg"}function gtt(t,e,n){const r=Ia(t)?t:X0(t);return r.start(_X("",r,e,n)),r.animation}const Hwe=["","X","Y","Z"],Gwe=1e3;let vtt=0;const v0={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function bMe({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(u={},h=e==null?void 0:e()){this.id=vtt++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{v0.totalNodes=v0.resolvedTargetDeltas=v0.recalculatedProjection=0,this.nodes.forEach(_tt),this.nodes.forEach(Ctt),this.nodes.forEach(Ptt),this.nodes.forEach(wtt),ftt(v0)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new htt)}addEventListener(u,h){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new SX),this.eventHandlers.get(u).add(h)}notifyListeners(u,...h){const m=this.eventHandlers.get(u);m&&m.notify(...h)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,h=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=mtt(u),this.instance=u;const{layoutId:m,layout:v,visualElement:x}=this.options;if(x&&!x.current&&x.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),h&&(v||m)&&(this.isLayoutDirty=!0),t){let E;const M=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,E&&E(),E=ptt(M,250),oN.hasAnimatedSinceResize&&(oN.hasAnimatedSinceResize=!1,this.nodes.forEach($we))})}m&&this.root.registerSharedNode(m,this),this.options.animate!==!1&&x&&(m||v)&&this.addEventListener("didUpdate",({delta:E,hasLayoutChanged:M,hasRelativeTargetChanged:D,layout:H})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const F=this.options.transition||x.getDefaultTransition()||Itt,{onLayoutAnimationStart:B,onLayoutAnimationComplete:z}=x.getProps(),P=!this.targetLayout||!yMe(this.targetLayout,H)||D,W=!M&&D;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||W||M&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(E,W);const Z={...rMe(F,"layout"),onPlay:B,onComplete:z};(x.shouldReduceMotion||this.options.layoutRoot)&&(Z.delay=0,Z.type=!1),this.startAnimation(Z)}else M||$we(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=H})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Nd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ttt),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const E=this.path[x];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const v=this.getTransformTemplate();this.prevTransformTemplateValue=v?v(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Wwe);return}this.isUpdating||this.nodes.forEach(Stt),this.isUpdating=!1,this.nodes.forEach(Ett),this.nodes.forEach(ytt),this.nodes.forEach(btt),this.clearAllSnapshots();const h=performance.now();Zo.delta=Jm(0,1e3/60,h-Zo.timestamp),Zo.timestamp=h,Zo.isProcessing=!0,m9.update.process(Zo),m9.preRender.process(Zo),m9.render.process(Zo),Zo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(xtt),this.sharedNodes.forEach(Mtt)}scheduleUpdateProjection(){Ni.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){Ni.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ks(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let h=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(h=!1),h&&(this.scroll={animationId:this.root.animationId,phase:u,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const u=this.isLayoutDirty||this.shouldResetTransform,h=this.projectionDelta&&!vMe(this.projectionDelta),m=this.getTransformTemplate(),v=m?m(this.latestValues,""):void 0,x=v!==this.prevTransformTemplateValue;u&&(h||g0(this.latestValues)||x)&&(i(this.instance,v),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return u&&(m=this.removeTransform(m)),Rtt(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return ks();const h=u.measureViewportBox(),{scroll:m}=this.root;return m&&(Cm(h.x,m.offset.x),Cm(h.y,m.offset.y)),h}removeElementScroll(u){const h=ks();hu(h,u);for(let m=0;m<this.path.length;m++){const v=this.path[m],{scroll:x,options:E}=v;if(v!==this.root&&x&&E.layoutScroll){if(x.isRoot){hu(h,u);const{scroll:M}=this.root;M&&(Cm(h.x,-M.offset.x),Cm(h.y,-M.offset.y))}Cm(h.x,x.offset.x),Cm(h.y,x.offset.y)}}return h}applyTransform(u,h=!1){const m=ks();hu(m,u);for(let v=0;v<this.path.length;v++){const x=this.path[v];!h&&x.options.layoutScroll&&x.scroll&&x!==x.root&&zw(m,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),g0(x.latestValues)&&zw(m,x.latestValues)}return g0(this.latestValues)&&zw(m,this.latestValues),m}removeTransform(u){const h=ks();hu(h,u);for(let m=0;m<this.path.length;m++){const v=this.path[m];if(!v.instance||!g0(v.latestValues))continue;v$(v.latestValues)&&v.updateSnapshot();const x=ks(),E=v.measurePageBox();hu(x,E),Uwe(h,v.latestValues,v.snapshot?v.snapshot.layoutBox:void 0,x)}return g0(this.latestValues)&&Uwe(h,this.latestValues),h}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Zo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var h;const m=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=m.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=m.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=m.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==m;if(!(u||v&&this.isSharedProjectionDirty||this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:E,layoutId:M}=this.options;if(!(!this.layout||!(E||M))){if(this.resolvedRelativeTargetAt=Zo.timestamp,!this.targetDelta&&!this.relativeTarget){const D=this.getClosestProjectingParent();D&&D.layout&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ks(),this.relativeTargetOrigin=ks(),hT(this.relativeTargetOrigin,this.layout.layoutBox,D.layout.layoutBox),hu(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ks(),this.targetWithTransforms=ks()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Oet(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):hu(this.target,this.layout.layoutBox),hMe(this.target,this.targetDelta)):hu(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const D=this.getClosestProjectingParent();D&&!!D.resumingFrom==!!this.resumingFrom&&!D.options.layoutScroll&&D.target&&this.animationProgress!==1?(this.relativeParent=D,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ks(),this.relativeTargetOrigin=ks(),hT(this.relativeTargetOrigin,this.target,D.target),hu(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}v0.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||v$(this.parent.latestValues)||dMe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const h=this.getLead(),m=!!this.resumingFrom||this!==h;let v=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(v=!1),m&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===Zo.timestamp&&(v=!1),v)return;const{layout:x,layoutId:E}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||E))return;hu(this.layoutCorrected,this.layout.layoutBox);const M=this.treeScale.x,D=this.treeScale.y;Het(this.layoutCorrected,this.treeScale,this.path,m),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox);const{target:H}=h;if(!H){this.projectionTransform&&(this.projectionDelta=Uw(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Uw(),this.projectionDeltaWithTransform=Uw());const F=this.projectionTransform;dT(this.projectionDelta,this.layoutCorrected,H,this.latestValues),this.projectionTransform=jwe(this.projectionDelta,this.treeScale),(this.projectionTransform!==F||this.treeScale.x!==M||this.treeScale.y!==D)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",H)),v0.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),u){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(u,h=!1){const m=this.snapshot,v=m?m.latestValues:{},x={...this.latestValues},E=Uw();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const M=ks(),D=m?m.source:void 0,H=this.layout?this.layout.source:void 0,F=D!==H,B=this.getStack(),z=!B||B.members.length<=1,P=!!(F&&!z&&this.options.crossfade===!0&&!this.path.some(Att));this.animationProgress=0;let W;this.mixTargetDelta=Z=>{const ve=Z/1e3;Kwe(E.x,u.x,ve),Kwe(E.y,u.y,ve),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hT(M,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ktt(this.relativeTarget,this.relativeTargetOrigin,M,ve),W&&utt(this.relativeTarget,W)&&(this.isProjectionDirty=!1),W||(W=ks()),hu(W,this.relativeTarget)),F&&(this.animationValues=x,rtt(x,v,this.latestValues,ve,P,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ve},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Nd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ni.update(()=>{oN.hasAnimatedSinceResize=!0,this.currentAnimation=gtt(0,Gwe,{...u,onUpdate:h=>{this.mixTargetDelta(h),u.onUpdate&&u.onUpdate(h)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Gwe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:h,target:m,layout:v,latestValues:x}=u;if(!(!h||!m||!v)){if(this!==u&&this.layout&&v&&_Me(this.options.animationType,this.layout.layoutBox,v.layoutBox)){m=this.target||ks();const E=Tl(this.layout.layoutBox.x);m.x.min=u.target.x.min,m.x.max=m.x.min+E;const M=Tl(this.layout.layoutBox.y);m.y.min=u.target.y.min,m.y.max=m.y.min+M}hu(h,m),zw(h,x),dT(this.projectionDeltaWithTransform,this.layoutCorrected,h,x)}}registerSharedNode(u,h){this.sharedNodes.has(u)||this.sharedNodes.set(u,new ctt),this.sharedNodes.get(u).add(h);const v=h.options.initialPromotionConfig;h.promote({transition:v?v.transition:void 0,preserveFollowOpacity:v&&v.shouldPreserveFollowOpacity?v.shouldPreserveFollowOpacity(h):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:h}=this.options;return h?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:h}=this.options;return h?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:h,preserveFollowOpacity:m}={}){const v=this.getStack();v&&v.promote(this,m),u&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetRotation(){const{visualElement:u}=this.options;if(!u)return;let h=!1;const{latestValues:m}=u;if((m.rotate||m.rotateX||m.rotateY||m.rotateZ)&&(h=!0),!h)return;const v={};for(let x=0;x<Hwe.length;x++){const E="rotate"+Hwe[x];m[E]&&(v[E]=m[E],u.setStaticValue(E,0))}u.render();for(const x in v)u.setStaticValue(x,v[x]);u.scheduleRender()}getProjectionStyles(u={}){var h,m;const v={};if(!this.instance||this.isSVG)return v;if(this.isVisible)v.visibility="";else return{visibility:"hidden"};const x=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,v.opacity="",v.pointerEvents=sN(u.pointerEvents)||"",v.transform=x?x(this.latestValues,""):"none",v;const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){const F={};return this.options.layoutId&&(F.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,F.pointerEvents=sN(u.pointerEvents)||""),this.hasProjected&&!g0(this.latestValues)&&(F.transform=x?x({},""):"none",this.hasProjected=!1),F}const M=E.animationValues||E.latestValues;this.applyTransformsToTarget(),v.transform=jwe(this.projectionDeltaWithTransform,this.treeScale,M),x&&(v.transform=x(M,v.transform));const{x:D,y:H}=this.projectionDelta;v.transformOrigin=`${D.origin*100}% ${H.origin*100}% 0`,E.animationValues?v.opacity=E===this?(m=(h=M.opacity)!==null&&h!==void 0?h:this.latestValues.opacity)!==null&&m!==void 0?m:1:this.preserveOpacity?this.latestValues.opacity:M.opacityExit:v.opacity=E===this?M.opacity!==void 0?M.opacity:"":M.opacityExit!==void 0?M.opacityExit:0;for(const F in iF){if(M[F]===void 0)continue;const{correct:B,applyTo:z}=iF[F],P=v.transform==="none"?M[F]:B(M[F],E);if(z){const W=z.length;for(let Z=0;Z<W;Z++)v[z[Z]]=P}else v[F]=P}return this.options.layoutId&&(v.pointerEvents=E===this?sN(u.pointerEvents)||"":"none"),v}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var h;return(h=u.currentAnimation)===null||h===void 0?void 0:h.stop()}),this.root.nodes.forEach(Wwe),this.root.sharedNodes.clear()}}}function ytt(t){t.updateLayout()}function btt(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,u=n.source!==t.layout.source;o==="size"?Sd(E=>{const M=u?n.measuredBox[E]:n.layoutBox[E],D=Tl(M);M.min=r[E].min,M.max=M.min+D}):_Me(o,n.layoutBox,r)&&Sd(E=>{const M=u?n.measuredBox[E]:n.layoutBox[E],D=Tl(r[E]);M.max=M.min+D,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[E].max=t.relativeTarget[E].min+D)});const h=Uw();dT(h,r,n.layoutBox);const m=Uw();u?dT(m,t.applyTransform(i,!0),n.measuredBox):dT(m,r,n.layoutBox);const v=!vMe(h);let x=!1;if(!t.resumeFrom){const E=t.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:M,layout:D}=E;if(M&&D){const H=ks();hT(H,n.layoutBox,M.layoutBox);const F=ks();hT(F,r,D.layoutBox),yMe(H,F)||(x=!0),E.options.layoutRoot&&(t.relativeTarget=F,t.relativeTargetOrigin=H,t.relativeParent=E)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:m,layoutDelta:h,hasLayoutChanged:v,hasRelativeTargetChanged:x})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function _tt(t){v0.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function wtt(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function xtt(t){t.clearSnapshot()}function Wwe(t){t.clearMeasurements()}function Stt(t){t.isLayoutDirty=!1}function Ett(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $we(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function Ctt(t){t.resolveTargetDelta()}function Ptt(t){t.calcProjection()}function Ttt(t){t.resetRotation()}function Mtt(t){t.removeLeadSnapshot()}function Kwe(t,e,n){t.translate=Oi(e.translate,0,n),t.scale=Oi(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Xwe(t,e,n,r){t.min=Oi(e.min,n.min,r),t.max=Oi(e.max,n.max,r)}function ktt(t,e,n,r){Xwe(t.x,e.x,n.x,r),Xwe(t.y,e.y,n.y,r)}function Att(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Itt={duration:.45,ease:[.4,0,.1,1]},qwe=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Ywe=qwe("applewebkit/")&&!qwe("chrome/")?Math.round:ss;function Zwe(t){t.min=Ywe(t.min),t.max=Ywe(t.max)}function Rtt(t){Zwe(t.x),Zwe(t.y)}function _Me(t,e,n){return t==="position"||t==="preserve-aspect"&&!m$(Vwe(e),Vwe(n),.2)}const Dtt=bMe({attachResizeListener:(t,e)=>up(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),P9={current:void 0},wMe=bMe({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!P9.current){const t=new Dtt({});t.mount(window),t.setOptions({layoutScroll:!0}),P9.current=t}return P9.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Ott={pan:{Feature:Zet},drag:{Feature:Yet,ProjectionNode:wMe,MeasureLayout:fMe}},Ltt=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function Ntt(t){const e=Ltt.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function b$(t,e,n=1){const[r,i]=Ntt(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const u=o.trim();return iMe(u)?parseFloat(u):u}else return l$(i)?b$(i,e,n+1):i}function Ftt(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const o=i.get();if(!l$(o))return;const u=b$(o,r);u&&i.set(u)});for(const i in e){const o=e[i];if(!l$(o))continue;const u=b$(o,r);u&&(e[i]=u,n||(n={}),n[i]===void 0&&(n[i]=o))}return{target:e,transitionEnd:n}}const Btt=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),xMe=t=>Btt.has(t),Utt=t=>Object.keys(t).some(xMe),Qwe=t=>t===sy||t===Xn,Jwe=(t,e)=>parseFloat(t.split(", ")[e]),e1e=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return Jwe(i[1],e);{const o=r.match(/^matrix\((.+)\)$/);return o?Jwe(o[1],t):0}},ztt=new Set(["x","y","z"]),Vtt=IM.filter(t=>!ztt.has(t));function jtt(t){const e=[];return Vtt.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const f1={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:e1e(4,13),y:e1e(5,14)};f1.translateX=f1.x;f1.translateY=f1.y;const Htt=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,o=getComputedStyle(i),{display:u}=o,h={};u==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(v=>{h[v]=f1[v](r,o)}),e.render();const m=e.measureViewportBox();return n.forEach(v=>{const x=e.getValue(v);x&&x.jump(h[v]),t[v]=f1[v](m,o)}),t},Gtt=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(xMe);let o=[],u=!1;const h=[];if(i.forEach(m=>{const v=t.getValue(m);if(!t.hasValue(m))return;let x=n[m],E=zP(x);const M=e[m];let D;if(oF(M)){const H=M.length,F=M[0]===null?1:0;x=M[F],E=zP(x);for(let B=F;B<H&&M[B]!==null;B++)D?fX(zP(M[B])===D):D=zP(M[B])}else D=zP(M);if(E!==D)if(Qwe(E)&&Qwe(D)){const H=v.get();typeof H=="string"&&v.set(parseFloat(H)),typeof M=="string"?e[m]=parseFloat(M):Array.isArray(M)&&D===Xn&&(e[m]=M.map(parseFloat))}else E!=null&&E.transform&&(D!=null&&D.transform)&&(x===0||M===0)?x===0?v.set(D.transform(x)):e[m]=E.transform(M):(u||(o=jtt(t),u=!0),h.push(m),r[m]=r[m]!==void 0?r[m]:e[m],v.jump(M))}),h.length){const m=h.indexOf("height")>=0?window.pageYOffset:null,v=Htt(e,t,h);return o.length&&o.forEach(([x,E])=>{t.getValue(x).set(E)}),t.render(),rB&&m!==null&&window.scrollTo({top:m}),{target:v,transitionEnd:r}}else return{target:e,transitionEnd:r}};function Wtt(t,e,n,r){return Utt(e)?Gtt(t,e,n,r):{target:e,transitionEnd:r}}const $tt=(t,e,n,r)=>{const i=Ftt(t,e,r);return e=i.target,r=i.transitionEnd,Wtt(t,e,n,r)},_$={current:null},SMe={current:!1};function Ktt(){if(SMe.current=!0,!!rB)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>_$.current=t.matches;t.addListener(e),e()}else _$.current=!1}function Xtt(t,e,n){const{willChange:r}=e;for(const i in e){const o=e[i],u=n[i];if(Ia(o))t.addValue(i,o),cF(r)&&r.add(i);else if(Ia(u))t.addValue(i,X0(o,{owner:t})),cF(r)&&r.remove(i);else if(u!==o)if(t.hasValue(i)){const h=t.getValue(i);!h.hasAnimated&&h.set(o)}else{const h=t.getStaticValue(i);t.addValue(i,X0(h!==void 0?h:o,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const t1e=new WeakMap,EMe=Object.keys(eM),qtt=EMe.length,n1e=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Ytt=sX.length;class Ztt{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ni.render(this.render,!1,!0);const{latestValues:h,renderState:m}=o;this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.isControllingVariants=sB(n),this.isVariantNode=uTe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...x}=this.scrapeMotionValuesFromProps(n,{});for(const E in x){const M=x[E];h[E]!==void 0&&Ia(M)&&(M.set(h[E],!1),cF(v)&&v.add(E))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,t1e.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),SMe.current||Ktt(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_$.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){t1e.delete(this.current),this.projection&&this.projection.unmount(),Nd(this.notifyUpdate),Nd(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=iy.has(e),i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Ni.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,o){let u,h;for(let m=0;m<qtt;m++){const v=EMe[m],{isEnabled:x,Feature:E,ProjectionNode:M,MeasureLayout:D}=eM[v];M&&(u=M),x(n)&&(!this.features[v]&&E&&(this.features[v]=new E(this)),D&&(h=D))}if(!this.projection&&u){this.projection=new u(this.latestValues,this.parent&&this.parent.projection);const{layoutId:m,layout:v,drag:x,dragConstraints:E,layoutScroll:M,layoutRoot:D}=n;this.projection.setOptions({layoutId:m,layout:v,alwaysMeasureLayout:!!x||E&&Fw(E),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof v=="string"?v:"both",initialPromotionConfig:o,layoutScroll:M,layoutRoot:D})}return h}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ks()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<n1e.length;r++){const i=n1e[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=e["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Xtt(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<Ytt;r++){const i=sX[r],o=this.props[i];(JT(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=X0(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=pX(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Ia(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new SX),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class CMe extends Ztt{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},o){let u=met(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),u&&(u=i(u))),o){pet(this,r,u);const h=$tt(this,r,u,n);n=h.transitionEnd,r=h.target}return{transition:e,transitionEnd:n,...r}}}function Qtt(t){return window.getComputedStyle(t)}class Jtt extends CMe{readValueFromInstance(e,n){if(iy.has(n)){const r=bX(n);return r&&r.default||0}else{const r=Qtt(e),i=(fTe(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return pMe(e,n)}build(e,n,r,i){aX(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return hX(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ia(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){_Te(e,n,r,i)}}class ent extends CMe{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(iy.has(n)){const r=bX(n);return r&&r.default||0}return n=wTe.has(n)?n:dX(n),e.getAttribute(n)}measureInstanceViewportBox(){return ks()}scrapeMotionValuesFromProps(e,n){return STe(e,n)}build(e,n,r,i){uX(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){xTe(e,n,r,i)}mount(e){this.isSVGTag=cX(e.tagName),super.mount(e)}}const tnt=(t,e)=>oX(t)?new ent(e,{enableHardwareAcceleration:!1}):new Jtt(e,{enableHardwareAcceleration:!0}),nnt={layout:{ProjectionNode:wMe,MeasureLayout:fMe}},rnt={...Aet,...KQe,...Ott,...nnt},PMe=nQe((t,e)=>IQe(t,e,rnt,tnt)),TMe=Vt.createContext(null);function int(t,e,n,r){if(!r)return t;const i=t.findIndex(x=>x.value===e);if(i===-1)return t;const o=r>0?1:-1,u=t[i+o];if(!u)return t;const h=t[i],m=u.layout,v=Oi(m.min,m.max,.5);return o===1&&h.layout.max+n>v||o===-1&&h.layout.min+n<v?iet(t,i,i+o):t}function snt({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...o},u){const h=OM(()=>PMe(e)),m=[],v=Vt.useRef(!1),x={axis:n,registerItem:(E,M)=>{M&&m.findIndex(D=>E===D.value)===-1&&(m.push({value:E,layout:M[n]}),m.sort(lnt))},updateOrder:(E,M,D)=>{if(v.current)return;const H=int(m,E,M,D);m!==H&&(v.current=!0,r(H.map(ant).filter(F=>i.indexOf(F)!==-1)))}};return Vt.useEffect(()=>{v.current=!1}),Vt.createElement(h,{...o,ref:u,ignoreStrict:!0},Vt.createElement(TMe.Provider,{value:x},t))}const ont=Vt.forwardRef(snt);function ant(t){return t.value}function lnt(t,e){return t.layout.min-e.layout.min}function MMe(t){const e=OM(()=>X0(t)),{isStatic:n}=Vt.useContext(nX);if(n){const[,r]=Vt.useState(t);Vt.useEffect(()=>e.on("change",r),[])}return e}const unt=t=>typeof t=="object"&&t.mix,cnt=t=>unt(t)?t.mix:void 0;function dnt(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],o=t[2+n],u=t[3+n],h=yX(i,o,{mixer:cnt(o[0]),...u});return e?h(r):h}function kMe(t,e){const n=MMe(e()),r=()=>n.set(e());return r(),a$(()=>{const i=()=>Ni.update(r,!1,!0),o=t.map(u=>u.on("change",i));return()=>{o.forEach(u=>u()),Nd(r)}}),n}function hnt(t){cT.current=[],t();const e=kMe(cT.current,t);return cT.current=void 0,e}function pnt(t,e,n,r){if(typeof t=="function")return hnt(t);const i=typeof e=="function"?e:dnt(e,n,r);return Array.isArray(t)?r1e(t,i):r1e([t],([o])=>i(o))}function r1e(t,e){const n=OM(()=>[]);return kMe(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function i1e(t,e=0){return Ia(t)?t:MMe(e)}function fnt({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:o=!0,...u},h){const m=OM(()=>PMe(r)),v=Vt.useContext(TMe),x={x:i1e(e.x),y:i1e(e.y)},E=pnt([x.x,x.y],([B,z])=>B||z?1:"unset"),M=Vt.useRef(null),{axis:D,registerItem:H,updateOrder:F}=v;return Vt.useEffect(()=>{H(n,M.current)},[v]),Vt.createElement(m,{drag:D,...u,dragSnapToOrigin:!0,style:{...e,x:x.x,y:x.y,zIndex:E},layout:o,onDrag:(B,z)=>{const{velocity:P}=z;P[D]&&F(n,x[D].get(),P[D]),i&&i(B,z)},onLayoutMeasure:B=>{M.current=B},ref:h,ignoreStrict:!0},t)}const mnt=Vt.forwardRef(fnt),AMe={Group:ont,Item:mnt},gnt=gt.jsxs("svg",{className:"closeIcon",width:"14",height:"14",fill:"none",stroke:"#666666",strokeMiterlimit:"10",children:[gt.jsx("circle",{cx:"7",cy:"7",r:"6"}),gt.jsx("line",{x1:"4",y1:"4",x2:"10",y2:"10"}),gt.jsx("line",{x1:"4",y1:"10",x2:"10",y2:"4"})]}),vnt=gt.jsx("svg",{className:"dragIcon",width:"14",height:"14",fill:"#666666",stroke:"none",children:gt.jsx("path",{d:`M10.43,4H3.57C3.26,4,3,4.22,3,4.5v1C3,5.78,3.26,6,3.57,6h6.86C10.74,6,11,5.78,11,5.5v-1
C11,4.22,10.74,4,10.43,4z M10.43,8H3.57C3.26,8,3,8.22,3,8.5v1C3,9.78,3.26,10,3.57,10h6.86C10.74,10,11,9.78,11,9.5v-1
C11,8.22,10.74,8,10.43,8z`})});function ynt(t){return gt.jsx(AMe.Item,{value:t.title,children:gt.jsxs("div",{children:[vnt,gt.jsx("span",{children:t.title}),gt.jsx("button",{className:"closeIcon",onClick:()=>{t.onDelete(t.index)},children:gnt})]})},t.title)}function bnt(t){const[e,n]=Vt.useState(!1),[r,i]=Vt.useState(t.options),o=v=>{t.onDragComplete(v),i(v)},u=v=>{const x=[...r];x.splice(v,1),o(x)},h=[];r.forEach((v,x)=>{h.push(gt.jsx(ynt,{index:x,title:v,onDelete:u},v))});let m="dropdown draggable";return t.subdropdown&&(m+=" subdropdown"),gt.jsxs("div",{className:m,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[gt.jsx(aTe,{title:t.title}),gt.jsx(AMe.Group,{axis:"y",values:r,onReorder:o,style:{visibility:e?"visible":"hidden"},children:h})]})}function _nt(t){const{option:e}=t,[n,r]=Vt.useState("");let i;switch(e.type){case"draggable":i=gt.jsx(bnt,{title:e.title,options:e.value,onDragComplete:o=>{e.onDragComplete!==void 0&&e.onDragComplete(o)},subdropdown:!0});break;case"dropdown":i=gt.jsx(IMe,{title:e.title,options:e.value,onSelect:e.onSelect,subdropdown:!0});break;case"option":i=gt.jsx("button",{onClick:()=>{e.onSelect!==void 0&&e.onSelect(e.value),e.selectable&&(n!==e.title?r(e.title):r(""))},children:e.title});break}return gt.jsx("li",{className:n===e.title?"selected":"",children:i},iHe())}function IMe(t){const[e,n]=Vt.useState(!1),r=[];t.options.map((o,u)=>{t.onSelect!==void 0&&(o.onSelect=t.onSelect),r.push(gt.jsx(_nt,{option:o},u))});let i="dropdown";return t.subdropdown&&(i+=" subdropdown"),gt.jsxs("div",{className:i,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[gt.jsx(aTe,{title:t.title}),gt.jsx("ul",{style:{visibility:e?"visible":"hidden"},children:r})]})}function EX(t){const[e,n]=Vt.useState(t.open!==void 0?t.open:!0),r=!e||t.children===void 0;return gt.jsxs("div",{className:`accordion ${r?"hide":""}`,children:[gt.jsxs("button",{className:"toggle",onClick:()=>{const i=!e;t.onToggle!==void 0&&t.onToggle(i),n(i)},children:[gt.jsx("p",{className:`status ${e?"open":""}`,children:"Toggle"}),gt.jsx("p",{className:"label",children:zT(t.label)})]}),t.button,gt.jsx("div",{className:e?"open":"",children:gt.jsx("div",{children:t.children})})]})}function RMe(t){const[e,n]=Vt.useState(!1),r=t.child.children.length>0,i=[];return t.child.children.length>0&&t.child.children.map(o=>{i.push(gt.jsx(RMe,{child:o,three:t.three},Math.random()))}),gt.jsxs("div",{className:"childObject",children:[gt.jsxs("div",{className:"child",children:[r?gt.jsx("button",{className:"status",style:{backgroundPositionX:e?"-14px":"2px"},onClick:()=>{n(!e)}}):null,gt.jsx("button",{className:"name",style:{left:r?"20px":"5px"},onClick:()=>{t.three.getObject(t.child.uuid),e||n(!0)},children:t.child.name.length>0?`${t.child.name} (${t.child.type})`:`${t.child.type}::${t.child.uuid}`}),gt.jsx("div",{className:`icon ${uHe(t.child)}`})]}),gt.jsx("div",{className:e?"open":"",children:gt.jsx("div",{className:"container",children:i})})]},Math.random())}function wnt(t){const e=[];return t.child.children.map(n=>{e.push(gt.jsx(RMe,{child:n,three:t.three},Math.random()))}),gt.jsx("div",{className:`scene ${t.class!==void 0?t.class:""}`,children:e})}const xnt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5klEQVRoge2Y0Q6EIAwE6cX//+X6cCFpSMEKVTdk501OpRNKiyelFC0b8Ps6gCwoggZF0KAIGhRBgyJoUAQNiqCxjciR9SLV//eZiAyvK3U8i/QVaQO2YyLSFVvlkdTKDjJCukh2ykR5ZEW+kHmlatl90RaBtDkK/w7CYhuRUEO0ee3l+J3m55Vm+17vtwjTnV1V3QA8qfbeUXCzRWDpiLLS+OyzvRW7IzW9R+okvclsqR09743bo0yUpc1+lSJvNsa002+Euk9GKzV7SmZDRIMiaFAEDYqgQRE0KIIGRdCgCBoUQeMEMERadX7YUz8AAAAASUVORK5CYII=";function Snt(t){return"items"in t}function q0(t){const e=[];return t.items.forEach(n=>{Snt(n)?e.push(gt.jsx(q0,{title:zT(n.title),items:n.items},Math.random())):e.push(gt.jsx(XP,{title:n.title,prop:n.prop,value:n.value,type:n.type,min:n.min,max:n.max,step:n.step,disabled:n.disabled,options:n.options,onChange:(r,i)=>{n.onChange!==void 0&&n.onChange(r,i)}},Math.random()))}),gt.jsx(EX,{label:t.title,open:t.expanded===!0,children:e})}function Ent(t){return!(t==="alphaHash"||t==="alphaToCoverage"||t==="attenuationDistance"||t==="blendDstAlpha"||t==="colorWrite"||t==="combine"||t==="defaultAttributeValues"||t==="depthFunc"||t==="forceSinglePass"||t==="glslVersion"||t==="linecap"||t==="linejoin"||t==="linewidth"||t==="normalMapType"||t==="precision"||t==="premultipliedAlpha"||t==="shadowSide"||t==="toneMapped"||t==="uniformsGroups"||t==="uniformsNeedUpdate"||t==="userData"||t==="vertexColors"||t==="version"||t==="wireframeLinecap"||t==="wireframeLinejoin"||t==="wireframeLinewidth"||t.slice(0,4)==="clip"||t.slice(0,7)==="polygon"||t.slice(0,7)==="stencil"||t.slice(0,2)==="is")}function u0(t){switch(t){case"alphaMap":return"Alpha Map";case"anisotropyMap":return"Anisotropy Map";case"anisotropyRotation":return"Anisotropy Rotation";case"aoMap":return"AO Map";case"aoMapIntensity":return"AO Map Intensity";case"attenuationColor":return"Attenuation Color";case"blendAlpha":return"Blend Alpha";case"blendColor":return"Blend Color";case"blendDst":return"Blend Dst";case"blendDstAlpha":return"Blend Dst Alha";case"blendEquation":return"Blend Equation";case"blendEquationAlpha":return"Blend Equation Alpha";case"blending":return"Blending";case"blendSrc":return"Blend Src";case"blendSrcAlpha":return"Blend Src Alpha";case"bumpMap":return"Bump Map";case"bumpScale":return"Bump Scale";case"clearcoatMap":return"Clearcoat Map";case"clearcoatNormalMap":return"Clearcoat Normal Map";case"clearcoatNormalScale":return"Clearcoat Normal Scale";case"clearcoatRoughness":return"Clearcoat Roughness";case"clearcoatRoughnessMap":return"Clearcoat Roughness Map";case"color":return"Color";case"defines":return"Defines";case"depthTest":return"Depth Test";case"depthWrite":return"Depth Write";case"displacementBias":return"Displacement Bias";case"displacementMap":return"Displacement Map";case"displacementScale":return"Displacement Scale";case"dithering":return"Dithering";case"emissive":return"Emissive";case"emissiveMap":return"Emissive Map";case"emissiveIntensity":return"Emissive Intensity";case"envMap":return"Environment Map";case"envMapIntensity":return"Environment Map Intensity";case"extensions":return"Extensions";case"flatShading":return"Flat Shading";case"fragmentShader":return"Fragment Shader";case"fog":return"Fog";case"gradientMap":return"Gradient Map";case"ior":return"IOR";case"iridescenceIOR":return"Iridescence IOR";case"iridescenceMap":return"Iridescence Map";case"iridescenceThicknessMap":return"Iridescence Thickness Map";case"iridescenceThicknessRange":return"Iridescence Thickness Range";case"lights":return"Lights";case"lightMap":return"Light Map";case"lightMapIntensity":return"Light Map Intensity";case"map":return"Map";case"matcap":return"Matcap";case"metalness":return"Metalness";case"metalnessMap":return"Metalness Map";case"name":return"Name";case"normalMap":return"Normal Map";case"normalScale":return"Normal Scale";case"opacity":return"Opacity";case"reflectivity":return"Reflectivity";case"refractionRatio":return"Refraction Ratio";case"roughness":return"Roughness";case"roughnessMap":return"Roughness Map";case"sheenColor":return"Sheen Color";case"sheenColorMap":return"Sheen Color Map";case"sheenRoughness":return"Sheen Roughness";case"sheenRoughnessMap":return"Sheen Roughness Map";case"shininess":return"Shininess";case"side":return"Side";case"size":return"Size";case"sizeAttenuation":return"Size Attenuation";case"specular":return"Specular";case"specularColor":return"Specular Color";case"specularColorMap":return"Specular Color Map";case"specularIntensity":return"Specular Intensity";case"specularIntensityMap":return"Specular Map Intensity";case"thickness":return"Thickness";case"thicknessMap":return"Thickness Map";case"transmission":return"Transmission";case"transmissionMap":return"Transmission Map";case"transparent":return"Transparent";case"type":return"Type";case"uuid":return"UUID";case"uniforms":return"Uniforms";case"vertexShader":return"Vertex Shader";case"visible":return"Visible";case"wireframe":return"Wireframe"}return t}function Cnt(t){return t.toLowerCase().search("intensity")>-1||t==="anisotropyRotation"||t==="blendAlpha"||t==="bumpScale"||t==="clearcoatRoughness"||t==="displacementBias"||t==="displacementScale"||t==="metalness"||t==="opacity"||t==="reflectivity"||t==="refractionRatio"||t==="roughness"||t==="sheenRoughness"||t==="thickness"}function Pnt(){const t=document.createElement("input");return t.type="file",new Promise((e,n)=>{t.addEventListener("change",function(){if(t.files===null)n();else{const r=t.files[0],i=new FileReader;i.onload=function(o){e(o.target.result)},i.readAsDataURL(r)}}),t.click()})}const Tnt=[{title:"Front",value:Rd},{title:"Back",value:Rs},{title:"Double",value:Ca}],Mnt=[{title:"No Blending",value:xu},{title:"Normal",value:M0},{title:"Additive",value:EW},{title:"Subtractive",value:CW},{title:"Multiply",value:PW},{title:"Custom",value:ASe}],knt=[{title:"Add",value:Mm},{title:"Subtract",value:ISe},{title:"Reverse Subtract",value:RSe},{title:"Min",value:TW},{title:"Max",value:MW}],Ant=[{title:"Zero",valye:m7},{title:"One",valye:g7},{title:"Src Color",valye:v7},{title:"One Minus Src Color",valye:y7},{title:"Src Alpha",valye:AT},{title:"One Minus Src Alpha",valye:IT},{title:"Dst Alpha",valye:b7},{title:"One Minus Dst Alpha",valye:_7},{title:"Dst Color",valye:w7},{title:"One Minus Dst Color",valye:x7},{title:"Src Alpha Saturate",valye:DSe},{title:"Constant Color",valye:S7},{title:"One Minus Constant Color",valye:E7},{title:"Constant Alpha",valye:C7},{title:"One Minus Constant Alpha",valye:P7}],Int=[{title:"Zero",valye:m7},{title:"One",valye:g7},{title:"Src Color",valye:v7},{title:"One Minus Src Color",valye:y7},{title:"Src Alpha",valye:AT},{title:"One Minus Src Alpha",valye:IT},{title:"Dst Alpha",valye:b7},{title:"One Minus Dst Alpha",valye:_7},{title:"Dst Color",valye:w7},{title:"One Minus Dst Color",valye:x7},{title:"Constant Color",valye:S7},{title:"One Minus Constant Color",valye:E7},{title:"Constant Alpha",valye:C7},{title:"One Minus Constant Alpha",valye:P7}];function jP(t,e){t.needsUpdate=!0,t.type="option",t.options=e}function s1e(t,e,n){const r=[];for(const i in t){if(!Ent(i))continue;const o=typeof t[i],u=t[i];if(o==="boolean"||o==="number"||o==="string"){const h={title:u0(i),prop:i,type:o,value:u,min:void 0,max:void 0,needsUpdate:o==="boolean",onChange:(v,x)=>{var M;n.updateObject(e.uuid,`material.${v}`,x),h.needsUpdate&&n.updateObject(e.uuid,"material.needsUpdate",!0);const E=(M=n.scene)==null?void 0:M.getObjectByProperty("uuid",e.uuid);E!==void 0&&Us(E,`material.${v}`,x)}};switch(i){case"blending":jP(h,Mnt);break;case"blendDst":jP(h,Int);break;case"blendEquation":jP(h,knt);break;case"blendSrc":jP(h,Ant);break;case"side":jP(h,Tnt);break}Cnt(i)&&(h.value=Number(u),h.type="range",h.min=0,h.max=1,h.step=.01);const m=o==="string"&&(i==="vertexShader"||i==="fragmentShader");m&&(h.disabled=!1,h.latest=h.value,h.onChange=(v,x)=>{h.latest=x}),r.push(h),m&&r.push({title:`${zT(i)} - Update`,type:"button",onChange:()=>{var x;n.updateObject(e.uuid,`material.${i}`,h.latest),n.updateObject(e.uuid,"material.needsUpdate",!0);const v=(x=n.scene)==null?void 0:x.getObjectByProperty("uuid",e.uuid);v!==void 0&&(Us(v,`material.${i}`,h.latest),v.material.needsUpdate=!0)}})}else if(o==="object")if(u.isColor)r.push({title:u0(i),prop:i,type:"color",value:u,onChange:(h,m)=>{var E;const v=new _n(m);n.updateObject(e.uuid,`material.${h}`,v);const x=(E=n.scene)==null?void 0:E.getObjectByProperty("uuid",e.uuid);x!==void 0&&Us(x,`material.${h}`,v)}});else if(Array.isArray(u)){const h=[];for(const m in u)h.push({title:`${m}`,type:`${typeof u[m]}`,value:u[m],onChange:(v,x)=>{var M;n.updateObject(e.uuid,`material.${i}`,x);const E=(M=n.scene)==null?void 0:M.getObjectByProperty("uuid",e.uuid);E!==void 0&&Us(E,`material.${i}`,x)}});r.push({title:u0(i),items:h})}else{const h=[];for(const m in u){const v=u[m];switch(typeof v){case"boolean":case"number":case"string":m==="src"?r.push({title:u0(i),type:"image",value:v,onChange:(E,M)=>{var H;n.createTexture(e.uuid,`material.${i}`,M);const D=(H=n.scene)==null?void 0:H.getObjectByProperty("uuid",e.uuid);D!==void 0&&KN(M).then(F=>{Us(D,`material.${i}`,F),Us(D,"material.needsUpdate",!0)})}}):h.push({title:`${u0(m)}`,prop:`material.${i}.${m}`,type:`${typeof t[i][m]}`,value:u[m],onChange:(E,M)=>{var H;n.updateObject(e.uuid,`material.${i}.${m}`,M);const D=(H=n.scene)==null?void 0:H.getObjectByProperty("uuid",e.uuid);D!==void 0&&Us(D,`material.${i}.${m}`,M)}});break;case"object":if(v.value!==void 0&&v.value.src!==void 0)h.push({title:u0(m),type:"image",value:v.value.src,onChange:(E,M)=>{var H;n.createTexture(e.uuid,`material.${i}.${m}.value`,u);const D=(H=n.scene)==null?void 0:H.getObjectByProperty("uuid",e.uuid);D!==void 0&&KN(M).then(F=>{Us(D,`material.${i}.${m}.value`,F)})}});else if(i==="uniforms"){const E=v.value,M=(D,H,F)=>({title:D,type:"number",value:F,step:.01,onChange:(B,z)=>{var Z;const P=`material.uniforms.${m}.value.${H}`;n.updateObject(e.uuid,P,z);const W=(Z=n.scene)==null?void 0:Z.getObjectByProperty("uuid",e.uuid);W!==void 0&&Us(W,P,z)}});if(typeof v.value=="number")h.push({title:m,type:"number",value:v.value,onChange:(D,H)=>{var z;const F=`material.${i}.${D}.value`;n.updateObject(e.uuid,F,H);const B=(z=n.scene)==null?void 0:z.getObjectByProperty("uuid",e.uuid);B!==void 0&&Us(B,F,H)}});else if(E.r!==void 0&&E.g!==void 0&&E.b!==void 0)h.push({title:m,type:"color",value:v.value,onChange:(D,H)=>{var P;const F=new _n(H),B=`material.${i}.${D}.value`;n.updateObject(e.uuid,B,F);const z=(P=n.scene)==null?void 0:P.getObjectByProperty("uuid",e.uuid);z!==void 0&&Us(z,B,F)}});else if(E.x!==void 0&&E.y!==void 0&&E.z===void 0&&E.w===void 0)h.push({title:m,items:[M("X","x",v.value.x),M("Y","y",v.value.y)]});else if(E.x!==void 0&&E.y!==void 0&&E.z!==void 0&&E.w===void 0)h.push({title:m,items:[M("X","x",v.value.x),M("Y","y",v.value.y),M("Z","z",v.value.z)]});else if(E.x!==void 0&&E.y!==void 0&&E.z!==void 0&&E.w!==void 0)h.push({title:m,items:[M("X","x",v.value.x),M("Y","y",v.value.y),M("Z","z",v.value.z),M("W","w",v.value.w)]});else if(E.elements!==void 0){const D=E.elements,H=[];for(let F=0;F<D.length;F++)H.push(M(F.toString(),F.toString(),D[F]));h.push({title:m,items:H})}else console.log(">>> need to add this format:",m,E)}else h.push({title:m,type:`${typeof v.value}`,value:v.value,onChange:(E,M)=>{var H;n.updateObject(e.uuid,`material.${i}.${m}.value`,M);const D=(H=n.scene)==null?void 0:H.getObjectByProperty("uuid",e.uuid);D!==void 0&&Us(D,`material.${i}.${m}.value`,M)}});break}}h.length>0&&r.push({title:u0(i),items:h})}else u!==void 0&&console.log("other:",i,o,u)}return r.sort((i,o)=>i.title<o.title?-1:i.title>o.title?1:0),r.push({title:"Update Material",type:"button",onChange:()=>{n.updateObject(e.uuid,"material.needsUpdate",!0)}}),r}function Rnt(t,e){const n=t.material;if(Array.isArray(n)){const r=[],i=n.length;for(let o=0;o<i;o++)r.push(gt.jsx(q0,{title:`Material ${o}`,items:s1e(n[o],t,e)},`Material ${o}`));return gt.jsx(gt.Fragment,{children:r})}else return gt.jsx(q0,{title:"Material",items:s1e(n,t,e)})}function XP(t){var x;let e=t.value;e!==void 0&&e.isColor!==void 0&&(e=oHe(t.value));const[n,r]=Vt.useState(e),i=Vt.useRef(null),o=Vt.useRef(null),u=Vt.useRef(null);Vt.useEffect(()=>{var Z;let E=!1,M=-1,D=0,H=Number(n);const F=ve=>{E=!0,D=H,M=ve.clientX},B=ve=>{if(!E)return;const X=t.step!==void 0?t.step:1,se=(ve.clientX-M)*X;H=Number((D+se).toFixed(4)),o.current!==null&&(o.current.value=H.toString()),t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,H)},z=()=>{E=!1},P=()=>{E=!1},W=t.type==="number";return W&&((Z=i.current)==null||Z.addEventListener("mousedown",F,!1),document.addEventListener("mouseup",z,!1),document.addEventListener("mousemove",B,!1),document.addEventListener("contextmenu",P,!1)),()=>{var ve;W&&((ve=i.current)==null||ve.removeEventListener("mousedown",F),document.removeEventListener("mouseup",z),document.removeEventListener("mousemove",B),document.removeEventListener("contextmenu",P))}},[n]);const h=t.type==="string"&&(n.length>100||n.search(`
`)>-1),m=h||t.type==="image",v=E=>{let M=E.target.value;t.type==="boolean"?M=E.target.checked:t.type==="option"&&(M=t.options[M].value),r(M),t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,M)};return gt.jsxs("div",{className:`field ${m?"block":""}`,children:[t.type!=="button"&&gt.jsx("label",{ref:i,children:zT(t.title)},"fieldLabel"),t.type==="string"&&!h&&gt.jsx("input",{type:"text",disabled:t.disabled,onChange:v,value:n}),t.type==="string"&&h&&gt.jsx("textarea",{cols:50,rows:10,disabled:t.disabled!==void 0?t.disabled:!0,onChange:v,value:n}),t.type==="boolean"&&gt.jsx("input",{type:"checkbox",disabled:t.disabled,onChange:v,checked:n}),t.type==="number"&&gt.jsx("input",{ref:o,type:"number",value:n,min:t.min,max:t.max,step:t.step,disabled:t.disabled,onChange:v}),t.type==="range"&&gt.jsxs(gt.Fragment,{children:[gt.jsx("input",{type:"text",value:n.toString(),onChange:v,disabled:t.disabled,className:"min"}),gt.jsx("input",{disabled:t.disabled,type:"range",value:n,min:t.min,max:t.max,step:t.step,onChange:v})]}),t.type==="color"&&gt.jsxs(gt.Fragment,{children:[gt.jsx("input",{type:"text",value:n.toString(),onChange:v,disabled:t.disabled,className:"color"}),gt.jsx("input",{type:"color",value:n,onChange:v,disabled:t.disabled})]}),t.type==="button"&&gt.jsx("button",{disabled:t.disabled,onClick:()=>{t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,!0)},children:t.title}),t.type==="image"&&gt.jsx("img",{ref:u,onClick:()=>{Pnt().then(E=>{u.current.src=E,t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,E)})},src:n.length>0?n:xnt}),t.type==="option"&&gt.jsx(gt.Fragment,{children:gt.jsx("select",{onChange:v,disabled:t.disabled,defaultValue:t.value,children:(x=t.options)==null?void 0:x.map((E,M)=>gt.jsx("option",{value:E.value,children:zT(E.title)},M))})})]})}function o1e(t){switch(t){case"fov":return"FOV";case"zoom":return"Zoom";case"near":return"Near";case"far":return"Far";case"focus":return"Focus";case"aspect":return"Aspect";case"filmGauge":return"Film Gauge";case"filmOffset":return"Film Offset";case"left":return"Left";case"right":return"Right";case"top":return"Top";case"bottom":return"Bottom"}return t}function Dnt(t,e){const n=[];if(t.perspectiveCameraInfo!==void 0)for(const r in t.perspectiveCameraInfo)n.push({title:o1e(r),prop:r,type:"number",step:.01,value:t.perspectiveCameraInfo[r],onChange:(i,o)=>{var h;e.updateObject(t.uuid,i,o),e.requestMethod(t.uuid,"updateProjectionMatrix");const u=(h=e.scene)==null?void 0:h.getObjectByProperty("uuid",t.uuid);u!==void 0&&(Us(u,i,o),u.updateProjectionMatrix())}});else if(t.orthographicCameraInfo!==void 0)for(const r in t.orthographicCameraInfo)n.push({title:o1e(r),prop:r,type:"number",step:.01,value:t.perspectiveCameraInfo[r],onChange:(i,o)=>{var h;e.updateObject(t.uuid,i,o),e.requestMethod(t.uuid,"updateProjectionMatrix");const u=(h=e.scene)==null?void 0:h.getObjectByProperty("uuid",t.uuid);u!==void 0&&(Us(u,i,o),u.updateProjectionMatrix())}});return gt.jsx(q0,{title:"Camera",items:n})}const Ont=Math.PI/180,Lnt=180/Math.PI;function gw(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function Nnt(t){return t*Ont}function T9(t){return t*Lnt}function Fnt(t,e){const n=new Fn;n.elements=t.matrix;const r=new Fe,i=new Ea,o=new Fe;t.uuid.length>0&&(r.setFromMatrixPosition(n),i.setFromRotationMatrix(n),o.setFromMatrixScale(n));const u=(m,v)=>{var E;e.updateObject(t.uuid,m,v);const x=(E=e.scene)==null?void 0:E.getObjectByProperty("uuid",t.uuid);x!==void 0&&Us(x,m,v)},h=(m,v)=>{u(m,Nnt(v))};return gt.jsx(q0,{title:"Transform",items:[{title:"Position X",prop:"position.x",type:"number",value:r.x,onChange:u},{title:"Position Y",prop:"position.y",type:"number",value:r.y,onChange:u},{title:"Position Z",prop:"position.z",type:"number",value:r.z,onChange:u},{title:"Rotation X",prop:"rotation.x",type:"number",value:VG(T9(i.x)),min:-360,max:360,step:.1,onChange:h},{title:"Rotation Y",prop:"rotation.y",type:"number",value:VG(T9(i.y)),min:-360,max:360,step:.1,onChange:h},{title:"Rotation Z",prop:"rotation.z",type:"number",value:VG(T9(i.z)),min:-360,max:360,step:.1,onChange:h},{title:"Scale X",prop:"scale.x",type:"number",value:o.x,step:.01,onChange:u},{title:"Scale Y",prop:"scale.y",type:"number",value:o.y,step:.01,onChange:u},{title:"Scale Z",prop:"scale.z",type:"number",value:o.z,step:.01,onChange:u}]})}function a1e(t){switch(t){case"color":return"Color";case"intensity":return"Intensity";case"decay":return"Decay";case"distance":return"Distance";case"angle":return"Angle";case"penumbra":return"Penumbra";case"groundColor":return"Ground Color"}return t}function Bnt(t,e){const n=[];if(t.lightInfo!==void 0)for(const r in t.lightInfo){const i=t.lightInfo[r];i!==void 0&&(i.isColor!==void 0?n.push({title:a1e(r),prop:r,type:"color",value:i,onChange:(o,u)=>{var v;const h=new _n(u);e.updateObject(t.uuid,o,h);const m=(v=e.scene)==null?void 0:v.getObjectByProperty("uuid",t.uuid);m!==void 0&&Us(m,o,h)}}):n.push({title:a1e(r),prop:r,type:typeof i,value:i,step:typeof i=="number"?.01:void 0,onChange:(o,u)=>{var m;e.updateObject(t.uuid,o,u);const h=(m=e.scene)==null?void 0:m.getObjectByProperty("uuid",t.uuid);h!==void 0&&Us(h,o,u)}}))}return gt.jsx(q0,{title:"Light",items:n})}function Unt(t,e){var h;const n=[],r=[];let i=0;t.animations.forEach(m=>{i=Math.max(i,m.duration),m.duration>0&&r.push({title:m.name,items:[{title:"Duration",type:"number",value:m.duration,disabled:!0},{title:"Blend Mode",type:"option",disabled:!0,options:[{title:"Normal",value:2500},{title:"Additive",value:2501}]}]})}),n.push({title:"Animations",items:r});const o=(h=e.scene)==null?void 0:h.getObjectByProperty("uuid",t.uuid);let u=!1;if(o!==void 0){const m=o.mixer;if(u=m!==void 0,u){const v=[{title:"Time Scale",type:"range",value:m.timeScale,step:.01,min:-1,max:2,onChange:(x,E)=>{m.timeScale=E,e.updateObject(t.uuid,"mixer.timeScale",E)}}];v.push({title:"Stop All",type:"button",onChange:()=>{m.stopAllAction(),e.requestMethod(t.uuid,"stopAllAction",void 0,"mixer")}}),n.push({title:"Mixer",items:v})}}return gt.jsx(q0,{title:"Animation",items:n})}const DMe={name:"",uuid:"",type:"",visible:!1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],animations:[],material:void 0,perspectiveCameraInfo:void 0,orthographicCameraInfo:void 0,lightInfo:void 0};let Eo={...DMe};function znt(t){const[e,n]=Vt.useState(-1);Vt.useEffect(()=>{function u(m){Eo={...m.value},n(Date.now())}function h(){Eo={...DMe},n(Date.now())}return Sr.addEventListener(Er.SET_SCENE,h),Sr.addEventListener(Er.SET_OBJECT,u),()=>{Sr.removeEventListener(Er.SET_SCENE,h),Sr.removeEventListener(Er.SET_OBJECT,u)}},[]);const r=Eo.type.toLowerCase(),i=Eo.animations.length>0||Eo.mixer!==void 0,o=r.search("mesh")>-1||r.search("line")>-1||r.search("points")>-1;return gt.jsx(EX,{label:"Inspector",children:gt.jsx("div",{id:"Inspector",className:t.class,children:Eo.uuid.length>0&&gt.jsxs(gt.Fragment,{children:[gt.jsxs(gt.Fragment,{children:[gt.jsx(XP,{type:"string",title:"Name",prop:"name",value:Eo.name,disabled:!0}),gt.jsx(XP,{type:"string",title:"Type",prop:"type",value:Eo.type,disabled:!0}),gt.jsx(XP,{type:"string",title:"UUID",prop:"uuid",value:Eo.uuid,disabled:!0}),gt.jsx(XP,{type:"boolean",title:"Visible",prop:"visible",value:Eo.visible,onChange:(u,h)=>{var v;t.three.updateObject(Eo.uuid,u,h);const m=(v=t.three.scene)==null?void 0:v.getObjectByProperty("uuid",Eo.uuid);m!==void 0&&Us(m,u,h)}})]}),gt.jsxs(gt.Fragment,{children:[Fnt(Eo,t.three),i?Unt(Eo,t.three):null,r.search("camera")>-1?Dnt(Eo,t.three):null,r.search("light")>-1?Bnt(Eo,t.three):null,o?Rnt(Eo,t.three):null]})]})},e)},"Inspector")}class Vnt extends Vt.Component{constructor(n){super(n);yr(this,"three");yr(this,"setScene",n=>{this.setState(()=>({scene:n.value}))});this.state={scene:n.scene!==void 0?n.scene:null},this.three=n.three,Sr.addEventListener(Er.SET_SCENE,this.setScene)}componentWillUnmount(){Sr.removeEventListener(Er.SET_SCENE,this.setScene)}render(){var i;const n=this.componentState.scene!==null,r="Hierarchy - "+(n?`${(i=this.componentState.scene)==null?void 0:i.name}`:"No Scene");return gt.jsx("div",{id:"SidePanel",children:gt.jsxs(gt.Fragment,{children:[gt.jsx(EX,{label:r,open:!0,children:gt.jsx(gt.Fragment,{children:n&&gt.jsx(wnt,{child:this.componentState.scene,three:this.three})})}),gt.jsx(znt,{three:this.three})]})},"SidePanel")}get componentState(){return this.state}}const l1e={type:"change"},M9={type:"start"},u1e={type:"end"},FL=new _1,c1e=new Em,jnt=Math.cos(70*Qo.DEG2RAD);class Hnt extends Al{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Fe,this.cursor=new Fe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:W_.ROTATE,MIDDLE:W_.DOLLY,RIGHT:W_.PAN},this.touches={ONE:$_.ROTATE,TWO:$_.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return h.phi},this.getAzimuthalAngle=function(){return h.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Ae){Ae.addEventListener("keydown",Rn),this._domElementKeyEvents=Ae},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Rn),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(l1e),r.update(),o=i.NONE},this.update=function(){const Ae=new Fe,jt=new As().setFromUnitVectors(e.up,new Fe(0,1,0)),Kt=jt.clone().invert(),ln=new Fe,Me=new As,zt=new Fe,It=2*Math.PI;return function(Dn=null){const lr=r.object.position;Ae.copy(lr).sub(r.target),Ae.applyQuaternion(jt),h.setFromVector3(Ae),r.autoRotate&&o===i.NONE&&ot(ne(Dn)),r.enableDamping?(h.theta+=m.theta*r.dampingFactor,h.phi+=m.phi*r.dampingFactor):(h.theta+=m.theta,h.phi+=m.phi);let sr=r.minAzimuthAngle,dr=r.maxAzimuthAngle;isFinite(sr)&&isFinite(dr)&&(sr<-Math.PI?sr+=It:sr>Math.PI&&(sr-=It),dr<-Math.PI?dr+=It:dr>Math.PI&&(dr-=It),sr<=dr?h.theta=Math.max(sr,Math.min(dr,h.theta)):h.theta=h.theta>(sr+dr)/2?Math.max(sr,h.theta):Math.min(dr,h.theta)),h.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,h.phi)),h.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(x,r.dampingFactor):r.target.add(x),r.target.sub(r.cursor),r.target.clampLength(r.minTargetRadius,r.maxTargetRadius),r.target.add(r.cursor),r.zoomToCursor&&X||r.object.isOrthographicCamera?h.radius=qe(h.radius):h.radius=qe(h.radius*v),Ae.setFromSpherical(h),Ae.applyQuaternion(Kt),lr.copy(r.target).add(Ae),r.object.lookAt(r.target),r.enableDamping===!0?(m.theta*=1-r.dampingFactor,m.phi*=1-r.dampingFactor,x.multiplyScalar(1-r.dampingFactor)):(m.set(0,0,0),x.set(0,0,0));let Pr=!1;if(r.zoomToCursor&&X){let qn=null;if(r.object.isPerspectiveCamera){const ri=Ae.length();qn=qe(ri*v);const Ji=ri-qn;r.object.position.addScaledVector(Z,Ji),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const ri=new Fe(ve.x,ve.y,0);ri.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/v)),r.object.updateProjectionMatrix(),Pr=!0;const Ji=new Fe(ve.x,ve.y,0);Ji.unproject(r.object),r.object.position.sub(Ji).add(ri),r.object.updateMatrixWorld(),qn=Ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;qn!==null&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(qn).add(r.object.position):(FL.origin.copy(r.object.position),FL.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(FL.direction))<jnt?e.lookAt(r.target):(c1e.setFromNormalAndCoplanarPoint(r.object.up,r.target),FL.intersectPlane(c1e,r.target))))}else r.object.isOrthographicCamera&&(Pr=v!==1,Pr&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/v)),r.object.updateProjectionMatrix()));return v=1,X=!1,Pr||ln.distanceToSquared(r.object.position)>u||8*(1-Me.dot(r.object.quaternion))>u||zt.distanceToSquared(r.target)>0?(r.dispatchEvent(l1e),ln.copy(r.object.position),Me.copy(r.object.quaternion),zt.copy(r.target),!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",mr),r.domElement.removeEventListener("pointerdown",Se),r.domElement.removeEventListener("pointercancel",lt),r.domElement.removeEventListener("wheel",Mt),r.domElement.removeEventListener("pointermove",fe),r.domElement.removeEventListener("pointerup",lt),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",Rn),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const u=1e-6,h=new zbe,m=new zbe;let v=1;const x=new Fe,E=new an,M=new an,D=new an,H=new an,F=new an,B=new an,z=new an,P=new an,W=new an,Z=new Fe,ve=new an;let X=!1;const se=[],pe={};let J=!1;function ne(Ae){return Ae!==null?2*Math.PI/60*r.autoRotateSpeed*Ae:2*Math.PI/60/60*r.autoRotateSpeed}function Ee(Ae){const jt=Math.abs(Ae*.01);return Math.pow(.95,r.zoomSpeed*jt)}function ot(Ae){m.theta-=Ae}function wt(Ae){m.phi-=Ae}const ue=function(){const Ae=new Fe;return function(Kt,ln){Ae.setFromMatrixColumn(ln,0),Ae.multiplyScalar(-Kt),x.add(Ae)}}(),Ye=function(){const Ae=new Fe;return function(Kt,ln){r.screenSpacePanning===!0?Ae.setFromMatrixColumn(ln,1):(Ae.setFromMatrixColumn(ln,0),Ae.crossVectors(r.object.up,Ae)),Ae.multiplyScalar(Kt),x.add(Ae)}}(),Te=function(){const Ae=new Fe;return function(Kt,ln){const Me=r.domElement;if(r.object.isPerspectiveCamera){const zt=r.object.position;Ae.copy(zt).sub(r.target);let It=Ae.length();It*=Math.tan(r.object.fov/2*Math.PI/180),ue(2*Kt*It/Me.clientHeight,r.object.matrix),Ye(2*ln*It/Me.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(ue(Kt*(r.object.right-r.object.left)/r.object.zoom/Me.clientWidth,r.object.matrix),Ye(ln*(r.object.top-r.object.bottom)/r.object.zoom/Me.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function st(Ae){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?v/=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Be(Ae){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?v*=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Xe(Ae,jt){if(!r.zoomToCursor)return;X=!0;const Kt=r.domElement.getBoundingClientRect(),ln=Ae-Kt.left,Me=jt-Kt.top,zt=Kt.width,It=Kt.height;ve.x=ln/zt*2-1,ve.y=-(Me/It)*2+1,Z.set(ve.x,ve.y,1).unproject(r.object).sub(r.object.position).normalize()}function qe(Ae){return Math.max(r.minDistance,Math.min(r.maxDistance,Ae))}function dt(Ae){E.set(Ae.clientX,Ae.clientY)}function Pt(Ae){Xe(Ae.clientX,Ae.clientX),z.set(Ae.clientX,Ae.clientY)}function cn(Ae){H.set(Ae.clientX,Ae.clientY)}function ht(Ae){M.set(Ae.clientX,Ae.clientY),D.subVectors(M,E).multiplyScalar(r.rotateSpeed);const jt=r.domElement;ot(2*Math.PI*D.x/jt.clientHeight),wt(2*Math.PI*D.y/jt.clientHeight),E.copy(M),r.update()}function Et(Ae){P.set(Ae.clientX,Ae.clientY),W.subVectors(P,z),W.y>0?st(Ee(W.y)):W.y<0&&Be(Ee(W.y)),z.copy(P),r.update()}function $t(Ae){F.set(Ae.clientX,Ae.clientY),B.subVectors(F,H).multiplyScalar(r.panSpeed),Te(B.x,B.y),H.copy(F),r.update()}function Zt(Ae){Xe(Ae.clientX,Ae.clientY),Ae.deltaY<0?Be(Ee(Ae.deltaY)):Ae.deltaY>0&&st(Ee(Ae.deltaY)),r.update()}function gn(Ae){let jt=!1;switch(Ae.code){case r.keys.UP:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?wt(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Te(0,r.keyPanSpeed),jt=!0;break;case r.keys.BOTTOM:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?wt(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Te(0,-r.keyPanSpeed),jt=!0;break;case r.keys.LEFT:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?ot(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Te(r.keyPanSpeed,0),jt=!0;break;case r.keys.RIGHT:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?ot(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Te(-r.keyPanSpeed,0),jt=!0;break}jt&&(Ae.preventDefault(),r.update())}function Jt(Ae){if(se.length===1)E.set(Ae.pageX,Ae.pageY);else{const jt=en(Ae),Kt=.5*(Ae.pageX+jt.x),ln=.5*(Ae.pageY+jt.y);E.set(Kt,ln)}}function Qn(Ae){if(se.length===1)H.set(Ae.pageX,Ae.pageY);else{const jt=en(Ae),Kt=.5*(Ae.pageX+jt.x),ln=.5*(Ae.pageY+jt.y);H.set(Kt,ln)}}function vn(Ae){const jt=en(Ae),Kt=Ae.pageX-jt.x,ln=Ae.pageY-jt.y,Me=Math.sqrt(Kt*Kt+ln*ln);z.set(0,Me)}function Qe(Ae){r.enableZoom&&vn(Ae),r.enablePan&&Qn(Ae)}function Zr(Ae){r.enableZoom&&vn(Ae),r.enableRotate&&Jt(Ae)}function Tn(Ae){if(se.length==1)M.set(Ae.pageX,Ae.pageY);else{const Kt=en(Ae),ln=.5*(Ae.pageX+Kt.x),Me=.5*(Ae.pageY+Kt.y);M.set(ln,Me)}D.subVectors(M,E).multiplyScalar(r.rotateSpeed);const jt=r.domElement;ot(2*Math.PI*D.x/jt.clientHeight),wt(2*Math.PI*D.y/jt.clientHeight),E.copy(M)}function wn(Ae){if(se.length===1)F.set(Ae.pageX,Ae.pageY);else{const jt=en(Ae),Kt=.5*(Ae.pageX+jt.x),ln=.5*(Ae.pageY+jt.y);F.set(Kt,ln)}B.subVectors(F,H).multiplyScalar(r.panSpeed),Te(B.x,B.y),H.copy(F)}function sn(Ae){const jt=en(Ae),Kt=Ae.pageX-jt.x,ln=Ae.pageY-jt.y,Me=Math.sqrt(Kt*Kt+ln*ln);P.set(0,Me),W.set(0,Math.pow(P.y/z.y,r.zoomSpeed)),st(W.y),z.copy(P);const zt=(Ae.pageX+jt.x)*.5,It=(Ae.pageY+jt.y)*.5;Xe(zt,It)}function Ur(Ae){r.enableZoom&&sn(Ae),r.enablePan&&wn(Ae)}function Mn(Ae){r.enableZoom&&sn(Ae),r.enableRotate&&Tn(Ae)}function Se(Ae){r.enabled!==!1&&(se.length===0&&(r.domElement.setPointerCapture(Ae.pointerId),r.domElement.addEventListener("pointermove",fe),r.domElement.addEventListener("pointerup",lt)),ir(Ae),Ae.pointerType==="touch"?$n(Ae):Dt(Ae))}function fe(Ae){r.enabled!==!1&&(Ae.pointerType==="touch"?Lt(Ae):Ot(Ae))}function lt(Ae){switch(En(Ae),se.length){case 0:r.domElement.releasePointerCapture(Ae.pointerId),r.domElement.removeEventListener("pointermove",fe),r.domElement.removeEventListener("pointerup",lt),r.dispatchEvent(u1e),o=i.NONE;break;case 1:const jt=se[0],Kt=pe[jt];$n({pointerId:jt,pageX:Kt.x,pageY:Kt.y});break}}function Dt(Ae){let jt;switch(Ae.button){case 0:jt=r.mouseButtons.LEFT;break;case 1:jt=r.mouseButtons.MIDDLE;break;case 2:jt=r.mouseButtons.RIGHT;break;default:jt=-1}switch(jt){case W_.DOLLY:if(r.enableZoom===!1)return;Pt(Ae),o=i.DOLLY;break;case W_.ROTATE:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(r.enablePan===!1)return;cn(Ae),o=i.PAN}else{if(r.enableRotate===!1)return;dt(Ae),o=i.ROTATE}break;case W_.PAN:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(r.enableRotate===!1)return;dt(Ae),o=i.ROTATE}else{if(r.enablePan===!1)return;cn(Ae),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(M9)}function Ot(Ae){switch(o){case i.ROTATE:if(r.enableRotate===!1)return;ht(Ae);break;case i.DOLLY:if(r.enableZoom===!1)return;Et(Ae);break;case i.PAN:if(r.enablePan===!1)return;$t(Ae);break}}function Mt(Ae){r.enabled===!1||r.enableZoom===!1||o!==i.NONE||(Ae.preventDefault(),r.dispatchEvent(M9),Zt(hn(Ae)),r.dispatchEvent(u1e))}function hn(Ae){const jt=Ae.deltaMode,Kt={clientX:Ae.clientX,clientY:Ae.clientY,deltaY:Ae.deltaY};switch(jt){case 1:Kt.deltaY*=16;break;case 2:Kt.deltaY*=100;break}return Ae.ctrlKey&&!J&&(Kt.deltaY*=10),Kt}function Yt(Ae){Ae.key==="Control"&&(J=!0,r.domElement.getRootNode().addEventListener("keyup",nn,{passive:!0,capture:!0}))}function nn(Ae){Ae.key==="Control"&&(J=!1,r.domElement.getRootNode().removeEventListener("keyup",nn,{passive:!0,capture:!0}))}function Rn(Ae){r.enabled===!1||r.enablePan===!1||gn(Ae)}function $n(Ae){switch(Pn(Ae),se.length){case 1:switch(r.touches.ONE){case $_.ROTATE:if(r.enableRotate===!1)return;Jt(Ae),o=i.TOUCH_ROTATE;break;case $_.PAN:if(r.enablePan===!1)return;Qn(Ae),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(r.touches.TWO){case $_.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Qe(Ae),o=i.TOUCH_DOLLY_PAN;break;case $_.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Zr(Ae),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(M9)}function Lt(Ae){switch(Pn(Ae),o){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;Tn(Ae),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;wn(Ae),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ur(Ae),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Mn(Ae),r.update();break;default:o=i.NONE}}function mr(Ae){r.enabled!==!1&&Ae.preventDefault()}function ir(Ae){se.push(Ae.pointerId)}function En(Ae){delete pe[Ae.pointerId];for(let jt=0;jt<se.length;jt++)if(se[jt]==Ae.pointerId){se.splice(jt,1);return}}function Pn(Ae){let jt=pe[Ae.pointerId];jt===void 0&&(jt=new an,pe[Ae.pointerId]=jt),jt.set(Ae.pageX,Ae.pageY)}function en(Ae){const jt=Ae.pointerId===se[0]?se[1]:se[0];return pe[jt]}r.domElement.addEventListener("contextmenu",mr),r.domElement.addEventListener("pointerdown",Se),r.domElement.addEventListener("pointercancel",lt),r.domElement.addEventListener("wheel",Mt,{passive:!1}),r.domElement.getRootNode().addEventListener("keydown",Yt,{passive:!0,capture:!0}),this.update()}}const aN=t=>{const[e,n]=Vt.useState(t.options[t.index]),r=()=>{t.onToggle(!t.open)},i=o=>{o!==e&&(t.onSelect(o),n(o)),t.onToggle(!1)};return gt.jsxs("div",{className:`dropdown ${t.up===!0?"up":""}`,children:[gt.jsx("div",{className:"dropdown-toggle",onClick:r,children:e}),t.open&&gt.jsx("ul",{className:"dropdown-menu",children:t.options.map(o=>gt.jsx("li",{onClick:()=>i(o),children:o},o))})]})},c0=Vt.forwardRef(function(e,n){const[r,i]=Vt.useState(!1),o=e.options.indexOf(e.camera.name);return gt.jsxs("div",{className:"CameraWindow",children:[gt.jsx("div",{ref:n,className:"clickable",onClick:()=>{r&&i(!1)}}),gt.jsx(aN,{index:o,open:r,options:e.options,onSelect:e.onSelect,onToggle:u=>{i(u)},up:!0})]})}),Gnt=`out vec3 worldPosition;
uniform float uDistance;

void main() {
  // Scale the plane by the drawing distance
  worldPosition = position.xzy * uDistance;
  worldPosition.xz += cameraPosition.xz;

  gl_Position = projectionMatrix * modelViewMatrix * vec4(worldPosition, 1.0);
}`,Wnt=`out vec4 fragColor;
in vec3 worldPosition;

uniform float uDivisions;
uniform float uScale;
uniform vec3 uColor;
uniform float uDistance;
uniform float uSubgridOpacity;
uniform float uGridOpacity;

float getGrid(float gapSize) {
  vec2 worldPositionByDivision = worldPosition.xz / gapSize;

  // Inverted, 0 where line, >1 where there's no line
  // We use the worldPosition (which in this case we use similarly to UVs) differential to control the anti-aliasing
  // We need to do the -0.5)-0.5 trick because the result fades out from 0 to 1, and we want both
  // worldPositionByDivision == 0.3 and worldPositionByDivision == 0.7 to result in the same fade, i.e. 0.3,
  // otherwise only one side of the line will be anti-aliased
  vec2 grid = abs(fract(worldPositionByDivision-0.5)-0.5) / fwidth(worldPositionByDivision) / 2.0;
  float gridLine = min(grid.x, grid.y);

  // Uninvert and clamp
  return 1.0 - min(gridLine, 1.0);
}

void main() {
  float cameraDistanceToGridPlane = distance(cameraPosition.y, worldPosition.y);
  float cameraDistanceToFragmentOnGridPlane = distance(cameraPosition.xz, worldPosition.xz);

  // The size of the grid and subgrid are powers of each other and they are determined based on camera distance.
  // The current grid will become the next subgrid when it becomes too small, and its next power becomes the new grid.
  float subGridPower = pow(uDivisions, floor(log(cameraDistanceToGridPlane) / log(uDivisions)));
  float gridPower = subGridPower * uDivisions;

  // If we want to fade both the grid and its subgrid, we need to displays 3 different opacities, with the next grid being the third
  float nextGridPower = gridPower * uDivisions;

  // 1 where grid, 0 where no grid
  float subgrid = getGrid(subGridPower * uScale);
  float grid = getGrid(gridPower * uScale);
  float nextGrid = getGrid(nextGridPower * uScale);

  // Where we are between the introduction of the current grid power and when we switch to the next grid power
  float stepPercentage = (cameraDistanceToGridPlane - subGridPower)/(gridPower - subGridPower);

  // The last x percentage of the current step over which we want to fade
  float fadeRange = 0.3;

  // We calculate the fade percentage from the step percentage and the fade range
  float fadePercentage = max(stepPercentage - 1.0 + fadeRange, 0.0) / fadeRange;

  // Set base opacity based on how close we are to the drawing distance, with a cubic falloff
  float baseOpacity = subgrid * pow(1.0 - min(cameraDistanceToFragmentOnGridPlane / uDistance, 1.0), 3.0);

  // Shade the subgrid
  fragColor = vec4(uColor.rgb, (baseOpacity - fadePercentage) * uSubgridOpacity);

  // Somewhat arbitrary additional fade coefficient to counter anti-aliasing popping when switching between grid powers
  float fadeCoefficient = 0.5;

  // Shade the grid
  fragColor.a = mix(fragColor.a, baseOpacity * uGridOpacity - fadePercentage * (uGridOpacity - uSubgridOpacity) * fadeCoefficient, grid);

  // Shade the next grid
  fragColor.a = mix(fragColor.a, baseOpacity * uGridOpacity, nextGrid);

  if (fragColor.a <= 0.0) discard;
}`;class $nt extends Aa{constructor(e){super({extensions:{derivatives:!0},glslVersion:IW,side:Ca,transparent:!0,uniforms:{uScale:{value:(e==null?void 0:e.scale)!==void 0?e==null?void 0:e.scale:.1},uDivisions:{value:(e==null?void 0:e.divisions)!==void 0?e==null?void 0:e.divisions:10},uColor:{value:(e==null?void 0:e.color)!==void 0?e==null?void 0:e.color:new _n(16777215)},uDistance:{value:(e==null?void 0:e.distance)!==void 0?e==null?void 0:e.distance:1e4},uSubgridOpacity:{value:(e==null?void 0:e.subgridOpacity)!==void 0?e==null?void 0:e.subgridOpacity:.15},uGridOpacity:{value:(e==null?void 0:e.gridOpacity)!==void 0?e==null?void 0:e.gridOpacity:.25}},vertexShader:Gnt,fragmentShader:Wnt,name:"InfiniteGrid",depthWrite:!1})}}class Knt extends _s{constructor(){const n=new $nt;super(new dM(2,2),n);yr(this,"gridMaterial");this.gridMaterial=n,this.frustumCulled=!1,this.name="InfiniteGridHelper",this.position.y=.1}update(){this.gridMaterial.needsUpdate=!0}}const Xnt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>

	#if defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
}`,qnt=`
#include <common>
#include <uv_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {
	#include <clipping_planes_fragment>
	gl_FragColor = vec4(vec3(vUv, 0.0), 1.0);
}`;class Ynt extends Aa{constructor(){super({defines:{USE_UV:""},vertexShader:Xnt,fragmentShader:qnt})}}const d1e=["Single","Side by Side","Stacked","Quad"],Po=new Map,qo=new Map,Zh=new Map;function oy(t,e){const n=new hM(-100,100,100,-100,50,3e3);return n.name=t,n.position.copy(e),n.lookAt(0,0,0),Po.set(t,n),n}oy("Top",new Fe(0,1e3,0));oy("Bottom",new Fe(0,-1e3,0));oy("Left",new Fe(-1e3,0,0));oy("Right",new Fe(1e3,0,0));oy("Front",new Fe(0,0,1e3));oy("Back",new Fe(0,0,-1e3));oy("Orthographic",new Fe(1e3,1e3,1e3));const uB=new js(60,1,50,3e3);uB.name="Debug";uB.position.set(500,500,500);uB.lookAt(0,0,0);Po.set("Debug",uB);const h1e=["Renderer","Depth","Normals","UVs","Wireframe"],Znt=new nEe,Qnt=new v8e,Jnt=new Ynt,ert=new u1({opacity:.33,transparent:!0,wireframe:!0});let BL="Renderer";const Gi=new OT;Gi.name="Debug Scene";let Jh=new OT;Gi.add(Jh);const NM=new E0;NM.name="helpers";Gi.add(NM);const trt=new Knt;NM.add(trt);const OMe=new mEe(500);OMe.name="axisHelper";NM.add(OMe);const nM=new mEe(100);nM.name="interactionHelper";NM.add(nM);nM.visible=!1;let UL=!1,Hi=Po.get("Debug"),Yo=Po.get("Orthographic"),d0=Po.get("Front"),h0=Po.get("Top"),p1e=!1;function nrt(t){const[e,n]=Vt.useState(t.mode!==void 0?t.mode:"Single"),[r,i]=Vt.useState(null),[o,u]=Vt.useState(!1),[h,m]=Vt.useState(!1),[v,x]=Vt.useState(!1),[,E]=Vt.useState(Date.now()),M=Vt.useRef(null),D=Vt.useRef(null),H=Vt.useRef(null),F=Vt.useRef(null),B=Vt.useRef(null),z=Vt.useRef(null),P=(se,pe)=>{const J=qo.get(se.name);J!==void 0&&J.dispose(),qo.delete(se.name);const ne=Zh.get(se.name);ne!==void 0&&(Gi.remove(ne),ne.dispose()),Zh.delete(se.name);const Ee=new Hnt(se,pe);switch(Ee.enableDamping=!0,Ee.dampingFactor=.05,se.name){case"Top":case"Bottom":case"Left":case"Right":case"Front":case"Back":Ee.enableRotate=!1;break}if(qo.set(se.name,Ee),se instanceof js){const ot=new tHe(se);Zh.set(se.name,ot),Gi.add(ot)}},W=se=>{const pe=Zh.get(se.name);pe!==void 0&&(Gi.remove(pe),pe.dispose(),Zh.delete(se.name));const J=qo.get(se.name);J!==void 0&&(J.dispose(),qo.delete(se.name))},Z=()=>{qo.forEach((se,pe)=>{se.dispose();const J=Zh.get(pe);J!==void 0&&(Gi.remove(J),J.dispose()),Zh.delete(pe),qo.delete(pe)}),qo.clear(),Zh.clear()},ve=()=>{switch(e){case"Single":P(Hi,H.current);break;case"Side by Side":case"Stacked":P(Hi,H.current),P(Yo,F.current);break;case"Quad":P(Hi,H.current),P(Yo,F.current),P(d0,B.current),P(h0,z.current);break}};Vt.useEffect(()=>{const se=new N7({canvas:M.current,stencil:!1});se.autoClear=!1,se.shadowMap.enabled=!0,se.setPixelRatio(devicePixelRatio),se.setClearColor(0),i(se)},[]),Vt.useEffect(()=>{const se=ne=>{$N(Jh),Gi.remove(Jh);const Ee=t.scenes.get(ne.value.name);if(Ee!==void 0){const ot=new Ee;t.onSceneSet!==void 0&&t.onSceneSet(ot),Jh=ot,t.three.scene=Jh,Gi.add(Jh),p1e=!0}},pe=ne=>{var wt;const Ee=ne.value,ot=(wt=t.three.scene)==null?void 0:wt.getObjectByProperty("uuid",Ee.uuid);ot!==void 0&&Po.set(Ee.name,ot),E(Date.now())},J=ne=>{Po.delete(ne.value.name),E(Date.now())};return Sr.addEventListener(Er.SET_SCENE,se),Sr.addEventListener(Er.ADD_CAMERA,pe),Sr.addEventListener(Er.REMOVE_CAMERA,J),()=>{Sr.removeEventListener(Er.SET_SCENE,se),Sr.removeEventListener(Er.ADD_CAMERA,pe),Sr.removeEventListener(Er.REMOVE_CAMERA,J)}},[]),Vt.useEffect(()=>{if(r===null)return;let se=window.innerWidth,pe=window.innerHeight,J=Math.floor(se/2),ne=Math.floor(pe/2),Ee=-1;const ot=()=>{se=window.innerWidth-300,pe=window.innerHeight,J=Math.floor(se/2),ne=Math.floor(pe/2),r.setSize(se,pe);let st=se,Be=pe;switch(e){case"Side by Side":st=J,Be=pe;break;case"Stacked":st=se,Be=ne;break;case"Quad":st=J,Be=ne;break}Po.forEach(Xe=>{var qe;Xe instanceof hM?(Xe.left=st/-2,Xe.right=st/2,Xe.top=Be/2,Xe.bottom=Be/-2,Xe.updateProjectionMatrix()):Xe instanceof js&&(Xe.aspect=st/Be,Xe.updateProjectionMatrix(),(qe=Zh.get(Xe.name))==null||qe.update())})},wt=()=>{r.setViewport(0,0,se,pe),r.setScissor(0,0,se,pe),r.render(Gi,Hi)},ue=()=>{if(e==="Side by Side")r.setViewport(0,0,J,pe),r.setScissor(0,0,J,pe),r.render(Gi,Hi),r.setViewport(J,0,J,pe),r.setScissor(J,0,J,pe),r.render(Gi,Yo);else{const st=pe-ne;r.setViewport(0,st,se,ne),r.setScissor(0,st,se,ne),r.render(Gi,Hi),r.setViewport(0,0,se,ne),r.setScissor(0,0,se,ne),r.render(Gi,Yo)}},Ye=()=>{let st=0,Be=0;Be=pe-ne,st=0,r.setViewport(st,Be,J,ne),r.setScissor(st,Be,J,ne),r.render(Gi,Hi),st=J,r.setViewport(st,Be,J,ne),r.setScissor(st,Be,J,ne),r.render(Gi,Yo),Be=0,st=0,r.setViewport(st,Be,J,ne),r.setScissor(st,Be,J,ne),r.render(Gi,d0),st=J,r.setViewport(st,Be,J,ne),r.setScissor(st,Be,J,ne),r.render(Gi,h0)},Te=()=>{switch(qo.forEach(st=>{st.update()}),t.onSceneUpdate!==void 0&&p1e&&t.onSceneUpdate(Jh),r.clear(),e){case"Single":wt();break;case"Side by Side":case"Stacked":ue();break;case"Quad":Ye();break}Ee=requestAnimationFrame(Te)};return ve(),window.addEventListener("resize",ot),ot(),Te(),()=>{window.removeEventListener("resize",ot),cancelAnimationFrame(Ee),Ee=-1}},[e,r]),Vt.useEffect(()=>{if(r!==null){const se=new eHe,pe=new an,J=(wt,ue,Ye,Te)=>{switch(e){case"Quad":wt<Ye?ue<Te?se.setFromCamera(pe,Hi):se.setFromCamera(pe,d0):ue<Te?se.setFromCamera(pe,Yo):se.setFromCamera(pe,h0);break;case"Side by Side":wt<Ye?se.setFromCamera(pe,Hi):se.setFromCamera(pe,Yo);break;case"Single":se.setFromCamera(pe,Hi);break;case"Stacked":ue<Te?se.setFromCamera(pe,Hi):se.setFromCamera(pe,Yo);break}},ne=wt=>{if(!UL)return;const ue=new an;r.getSize(ue);const Ye=Math.min(wt.clientX,ue.x),Te=Math.min(wt.clientY,ue.y);pe.x=gw(Ye,0,ue.x,-1,1),pe.y=gw(Te,0,ue.y,1,-1);const st=ue.x/2,Be=ue.y/2,Xe=()=>{Ye<st?pe.x=gw(Ye,0,st,-1,1):pe.x=gw(Ye,st,ue.x,-1,1)},qe=()=>{Te<Be?pe.y=gw(Te,0,Be,1,-1):pe.y=gw(Te,Be,ue.y,1,-1)};switch(e){case"Quad":Xe(),qe();break;case"Side by Side":Xe();break;case"Stacked":qe(),qe();break}J(Ye,Te,st,Be);const dt=se.intersectObjects(Jh.children);dt.length>0&&nM.position.copy(dt[0].point)},Ee=wt=>{if(!UL)return;const ue=new an;if(r.getSize(ue),wt.clientX>=ue.x)return;ne(wt);const Ye=se.intersectObjects(Jh.children);Ye.length>0&&t.three.getObject(Ye[0].object.uuid)},ot=D.current;return ot.addEventListener("mousemove",ne,!1),ot.addEventListener("click",Ee,!1),()=>{ot.removeEventListener("mousemove",ne),ot.removeEventListener("click",Ee)}}},[e,r]);const X=[];return Po.forEach((se,pe)=>{X.push(pe)}),gt.jsxs("div",{className:"multiview",children:[gt.jsx("canvas",{ref:M}),gt.jsxs("div",{className:`cameras ${e==="Single"||e==="Stacked"?"single":""}`,ref:D,children:[e==="Single"&&gt.jsx(gt.Fragment,{children:gt.jsx(c0,{camera:Hi,options:X,ref:H,onSelect:se=>{var J;(J=qo.get(Hi.name))==null||J.dispose();const pe=Po.get(se);pe!==void 0&&(W(Hi),Hi=pe,P(pe,H.current))}})}),(e==="Side by Side"||e==="Stacked")&&gt.jsxs(gt.Fragment,{children:[gt.jsx(c0,{camera:Hi,options:X,ref:H,onSelect:se=>{var J;(J=qo.get(Hi.name))==null||J.dispose();const pe=Po.get(se);pe!==void 0&&(W(Hi),Hi=pe,P(pe,H.current))}}),gt.jsx(c0,{camera:Yo,options:X,ref:F,onSelect:se=>{var J;(J=qo.get(Yo.name))==null||J.dispose();const pe=Po.get(se);pe!==void 0&&(W(Yo),Yo=pe,P(pe,F.current))}})]}),e==="Quad"&&gt.jsxs(gt.Fragment,{children:[gt.jsx(c0,{camera:Hi,options:X,ref:H,onSelect:se=>{var J;(J=qo.get(Hi.name))==null||J.dispose();const pe=Po.get(se);pe!==void 0&&(W(Hi),Hi=pe,P(pe,H.current))}}),gt.jsx(c0,{camera:Yo,options:X,ref:F,onSelect:se=>{var J;(J=qo.get(Yo.name))==null||J.dispose();const pe=Po.get(se);pe!==void 0&&(W(Yo),Yo=pe,P(pe,F.current))}}),gt.jsx(c0,{camera:d0,options:X,ref:B,onSelect:se=>{var J;(J=qo.get(d0.name))==null||J.dispose();const pe=Po.get(se);pe!==void 0&&(W(d0),d0=pe,P(pe,B.current))}}),gt.jsx(c0,{camera:h0,options:X,ref:z,onSelect:se=>{var J;(J=qo.get(h0.name))==null||J.dispose();const pe=Po.get(se);pe!==void 0&&(W(h0),h0=pe,P(pe,z.current))}})]})]}),gt.jsxs("div",{className:"settings",children:[gt.jsx(aN,{index:d1e.indexOf(e),options:d1e,onSelect:se=>{se!==e&&(Z(),n(se))},open:o,onToggle:se=>{u(se),h&&m(!1),v&&x(!1)}}),gt.jsx(aN,{index:h1e.indexOf(BL),options:h1e,onSelect:se=>{if(se!==BL)switch(BL=se,BL){case"Depth":Gi.overrideMaterial=Znt;break;case"Normals":Gi.overrideMaterial=Qnt;break;default:case"Renderer":Gi.overrideMaterial=null;break;case"Wireframe":Gi.overrideMaterial=ert;break;case"UVs":Gi.overrideMaterial=Jnt;break}},open:h,onToggle:se=>{o&&u(!1),m(se),v&&x(!1)}}),gt.jsx(aN,{index:0,options:["Orbit Mode","Selection Mode"],onSelect:se=>{UL=se==="Selection Mode",nM.visible=UL},open:v,onToggle:se=>{o&&u(!1),h&&m(!1),x(se)}})]})]})}const CX=new Map;CX.set("Scene1",sTe);CX.set("Scene2",oTe);function rrt(){return gt.jsx(KZe,{header:[gt.jsx(IMe,{title:"Scenes",options:[{type:"option",title:"Scene 1",value:"scene1"},{type:"option",title:"Scene 2",value:"scene2"}],onSelect:t=>{xr.send({target:"app",event:"selectComponent",data:{dropdown:"Scenes",value:t}})}},"Scenes")],children:gt.jsxs(gt.Fragment,{children:[gt.jsx(nrt,{three:xr.three,scenes:CX,onSceneUpdate:t=>{t.update()}}),gt.jsx(Vnt,{three:xr.three})]})})}function irt(){const[t,e]=Vt.useState(!1);return Vt.useEffect(()=>{const n=()=>{s$.removeEventListener(o$.LOAD_COMPLETE,n),xr.init().then(()=>{$Ze(xr),e(!0)})};s$.addEventListener(o$.LOAD_COMPLETE,n),yYe()},[e]),gt.jsxs(gt.Fragment,{children:[!t&&gt.jsx("p",{children:"Loading..."}),t&&gt.jsxs(gt.Fragment,{children:[xr.editor?gt.jsx(rrt,{}):null,gt.jsx(WZe,{})]})]})}vw.initialize({__experimental_rafDriver:VT.getRafDriver()});k9.createRoot(document.getElementById("root")).render(gt.jsx(gt.Fragment,{children:gt.jsx(gt.Fragment,{children:gt.jsx(irt,{})})}));
