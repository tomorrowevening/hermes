var nFe=Object.defineProperty;var rFe=(t,e,n)=>e in t?nFe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var yr=(t,e,n)=>(rFe(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var Gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function s1e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o1e={exports:{}},aF={},a1e={exports:{}},Cr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT=Symbol.for("react.element"),iFe=Symbol.for("react.portal"),sFe=Symbol.for("react.fragment"),oFe=Symbol.for("react.strict_mode"),aFe=Symbol.for("react.profiler"),lFe=Symbol.for("react.provider"),uFe=Symbol.for("react.context"),cFe=Symbol.for("react.forward_ref"),dFe=Symbol.for("react.suspense"),hFe=Symbol.for("react.memo"),pFe=Symbol.for("react.lazy"),Lve=Symbol.iterator;function fFe(t){return t===null||typeof t!="object"?null:(t=Lve&&t[Lve]||t["@@iterator"],typeof t=="function"?t:null)}var l1e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u1e=Object.assign,c1e={};function l1(t,e,n){this.props=t,this.context=e,this.refs=c1e,this.updater=n||l1e}l1.prototype.isReactComponent={};l1.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};l1.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d1e(){}d1e.prototype=l1.prototype;function h$(t,e,n){this.props=t,this.context=e,this.refs=c1e,this.updater=n||l1e}var p$=h$.prototype=new d1e;p$.constructor=h$;u1e(p$,l1.prototype);p$.isPureReactComponent=!0;var Nve=Array.isArray,h1e=Object.prototype.hasOwnProperty,f$={current:null},p1e={key:!0,ref:!0,__self:!0,__source:!0};function f1e(t,e,n){var r,i={},o=null,u=null;if(e!=null)for(r in e.ref!==void 0&&(u=e.ref),e.key!==void 0&&(o=""+e.key),e)h1e.call(e,r)&&!p1e.hasOwnProperty(r)&&(i[r]=e[r]);var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){for(var m=Array(d),v=0;v<d;v++)m[v]=arguments[v+2];i.children=m}if(t&&t.defaultProps)for(r in d=t.defaultProps,d)i[r]===void 0&&(i[r]=d[r]);return{$$typeof:JT,type:t,key:o,ref:u,props:i,_owner:f$.current}}function mFe(t,e){return{$$typeof:JT,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function m$(t){return typeof t=="object"&&t!==null&&t.$$typeof===JT}function gFe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Fve=/\/+/g;function MH(t,e){return typeof t=="object"&&t!==null&&t.key!=null?gFe(""+t.key):e.toString(36)}function DL(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(o){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case JT:case iFe:u=!0}}if(u)return u=t,i=i(u),t=r===""?"."+MH(u,0):r,Nve(i)?(n="",t!=null&&(n=t.replace(Fve,"$&/")+"/"),DL(i,e,n,"",function(v){return v})):i!=null&&(m$(i)&&(i=mFe(i,n+(!i.key||u&&u.key===i.key?"":(""+i.key).replace(Fve,"$&/")+"/")+t)),e.push(i)),1;if(u=0,r=r===""?".":r+":",Nve(t))for(var d=0;d<t.length;d++){o=t[d];var m=r+MH(o,d);u+=DL(o,e,n,m,i)}else if(m=fFe(t),typeof m=="function")for(t=m.call(t),d=0;!(o=t.next()).done;)o=o.value,m=r+MH(o,d++),u+=DL(o,e,n,m,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return u}function k3(t,e,n){if(t==null)return t;var r=[],i=0;return DL(t,r,"","",function(o){return e.call(n,o,i++)}),r}function vFe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ka={current:null},OL={transition:null},yFe={ReactCurrentDispatcher:ka,ReactCurrentBatchConfig:OL,ReactCurrentOwner:f$};Cr.Children={map:k3,forEach:function(t,e,n){k3(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return k3(t,function(){e++}),e},toArray:function(t){return k3(t,function(e){return e})||[]},only:function(t){if(!m$(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Cr.Component=l1;Cr.Fragment=sFe;Cr.Profiler=aFe;Cr.PureComponent=h$;Cr.StrictMode=oFe;Cr.Suspense=dFe;Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yFe;Cr.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=u1e({},t.props),i=t.key,o=t.ref,u=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,u=f$.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var d=t.type.defaultProps;for(m in e)h1e.call(e,m)&&!p1e.hasOwnProperty(m)&&(r[m]=e[m]===void 0&&d!==void 0?d[m]:e[m])}var m=arguments.length-2;if(m===1)r.children=n;else if(1<m){d=Array(m);for(var v=0;v<m;v++)d[v]=arguments[v+2];r.children=d}return{$$typeof:JT,type:t.type,key:i,ref:o,props:r,_owner:u}};Cr.createContext=function(t){return t={$$typeof:uFe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:lFe,_context:t},t.Consumer=t};Cr.createElement=f1e;Cr.createFactory=function(t){var e=f1e.bind(null,t);return e.type=t,e};Cr.createRef=function(){return{current:null}};Cr.forwardRef=function(t){return{$$typeof:cFe,render:t}};Cr.isValidElement=m$;Cr.lazy=function(t){return{$$typeof:pFe,_payload:{_status:-1,_result:t},_init:vFe}};Cr.memo=function(t,e){return{$$typeof:hFe,type:t,compare:e===void 0?null:e}};Cr.startTransition=function(t){var e=OL.transition;OL.transition={};try{t()}finally{OL.transition=e}};Cr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Cr.useCallback=function(t,e){return ka.current.useCallback(t,e)};Cr.useContext=function(t){return ka.current.useContext(t)};Cr.useDebugValue=function(){};Cr.useDeferredValue=function(t){return ka.current.useDeferredValue(t)};Cr.useEffect=function(t,e){return ka.current.useEffect(t,e)};Cr.useId=function(){return ka.current.useId()};Cr.useImperativeHandle=function(t,e,n){return ka.current.useImperativeHandle(t,e,n)};Cr.useInsertionEffect=function(t,e){return ka.current.useInsertionEffect(t,e)};Cr.useLayoutEffect=function(t,e){return ka.current.useLayoutEffect(t,e)};Cr.useMemo=function(t,e){return ka.current.useMemo(t,e)};Cr.useReducer=function(t,e,n){return ka.current.useReducer(t,e,n)};Cr.useRef=function(t){return ka.current.useRef(t)};Cr.useState=function(t){return ka.current.useState(t)};Cr.useSyncExternalStore=function(t,e,n){return ka.current.useSyncExternalStore(t,e,n)};Cr.useTransition=function(){return ka.current.useTransition()};Cr.version="18.2.0";a1e.exports=Cr;var Mt=a1e.exports;const m1e=s1e(Mt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bFe=Mt,_Fe=Symbol.for("react.element"),wFe=Symbol.for("react.fragment"),xFe=Object.prototype.hasOwnProperty,SFe=bFe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EFe={key:!0,ref:!0,__self:!0,__source:!0};function g1e(t,e,n){var r,i={},o=null,u=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(u=e.ref);for(r in e)xFe.call(e,r)&&!EFe.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:_Fe,type:t,key:o,ref:u,props:i,_owner:SFe.current}}aF.Fragment=wFe;aF.jsx=g1e;aF.jsxs=g1e;o1e.exports=aF;var Je=o1e.exports,x9={},v1e={exports:{}},Cl={},y1e={exports:{}},b1e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Ge,it){var Qe=Ge.length;Ge.push(it);e:for(;0<Qe;){var ut=Qe-1>>>1,je=Ge[ut];if(0<i(je,it))Ge[ut]=it,Ge[Qe]=je,Qe=ut;else break e}}function n(Ge){return Ge.length===0?null:Ge[0]}function r(Ge){if(Ge.length===0)return null;var it=Ge[0],Qe=Ge.pop();if(Qe!==it){Ge[0]=Qe;e:for(var ut=0,je=Ge.length,bt=je>>>1;ut<bt;){var Fe=2*(ut+1)-1,at=Ge[Fe],Ot=Fe+1,Gt=Ge[Ot];if(0>i(at,Qe))Ot<je&&0>i(Gt,at)?(Ge[ut]=Gt,Ge[Ot]=Qe,ut=Ot):(Ge[ut]=at,Ge[Fe]=Qe,ut=Fe);else if(Ot<je&&0>i(Gt,Qe))Ge[ut]=Gt,Ge[Ot]=Qe,ut=Ot;else break e}}return it}function i(Ge,it){var Qe=Ge.sortIndex-it.sortIndex;return Qe!==0?Qe:Ge.id-it.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,d=u.now();t.unstable_now=function(){return u.now()-d}}var m=[],v=[],x=1,E=null,M=3,R=!1,j=!1,F=!1,B=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(Ge){for(var it=n(v);it!==null;){if(it.callback===null)r(v);else if(it.startTime<=Ge)r(v),it.sortIndex=it.expirationTime,e(m,it);else break;it=n(v)}}function Z(Ge){if(F=!1,W(Ge),!j)if(n(m)!==null)j=!0,Me(ge);else{var it=n(v);it!==null&&wt(Z,it.startTime-Ge)}}function ge(Ge,it){j=!1,F&&(F=!1,z(ye),ye=-1),R=!0;var Qe=M;try{for(W(it),E=n(m);E!==null&&(!(E.expirationTime>it)||Ge&&!Pe());){var ut=E.callback;if(typeof ut=="function"){E.callback=null,M=E.priorityLevel;var je=ut(E.expirationTime<=it);it=t.unstable_now(),typeof je=="function"?E.callback=je:E===n(m)&&r(m),W(it)}else r(m);E=n(m)}if(E!==null)var bt=!0;else{var Fe=n(v);Fe!==null&&wt(Z,Fe.startTime-it),bt=!1}return bt}finally{E=null,M=Qe,R=!1}}var X=!1,pe=null,ye=-1,te=5,ie=-1;function Pe(){return!(t.unstable_now()-ie<te)}function _t(){if(pe!==null){var Ge=t.unstable_now();ie=Ge;var it=!0;try{it=pe(!0,Ge)}finally{it?Tt():(X=!1,pe=null)}}else X=!1}var Tt;if(typeof P=="function")Tt=function(){P(_t)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,ot=de.port2;de.port1.onmessage=_t,Tt=function(){ot.postMessage(null)}}else Tt=function(){B(_t,0)};function Me(Ge){pe=Ge,X||(X=!0,Tt())}function wt(Ge,it){ye=B(function(){Ge(t.unstable_now())},it)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ge){Ge.callback=null},t.unstable_continueExecution=function(){j||R||(j=!0,Me(ge))},t.unstable_forceFrameRate=function(Ge){0>Ge||125<Ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<Ge?Math.floor(1e3/Ge):5},t.unstable_getCurrentPriorityLevel=function(){return M},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(Ge){switch(M){case 1:case 2:case 3:var it=3;break;default:it=M}var Qe=M;M=it;try{return Ge()}finally{M=Qe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ge,it){switch(Ge){case 1:case 2:case 3:case 4:case 5:break;default:Ge=3}var Qe=M;M=Ge;try{return it()}finally{M=Qe}},t.unstable_scheduleCallback=function(Ge,it,Qe){var ut=t.unstable_now();switch(typeof Qe=="object"&&Qe!==null?(Qe=Qe.delay,Qe=typeof Qe=="number"&&0<Qe?ut+Qe:ut):Qe=ut,Ge){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return je=Qe+je,Ge={id:x++,callback:it,priorityLevel:Ge,startTime:Qe,expirationTime:je,sortIndex:-1},Qe>ut?(Ge.sortIndex=Qe,e(v,Ge),n(m)===null&&Ge===n(v)&&(F?(z(ye),ye=-1):F=!0,wt(Z,Qe-ut))):(Ge.sortIndex=je,e(m,Ge),j||R||(j=!0,Me(ge))),Ge},t.unstable_shouldYield=Pe,t.unstable_wrapCallback=function(Ge){var it=M;return function(){var Qe=M;M=it;try{return Ge.apply(this,arguments)}finally{M=Qe}}}})(b1e);y1e.exports=b1e;var CFe=y1e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _1e=Mt,xl=CFe;function Xt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w1e=new Set,uT={};function H0(t,e){Ww(t,e),Ww(t+"Capture",e)}function Ww(t,e){for(uT[t]=e,t=0;t<e.length;t++)w1e.add(e[t])}var up=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S9=Object.prototype.hasOwnProperty,PFe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Bve={},Uve={};function TFe(t){return S9.call(Uve,t)?!0:S9.call(Bve,t)?!1:PFe.test(t)?Uve[t]=!0:(Bve[t]=!0,!1)}function MFe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kFe(t,e,n,r){if(e===null||typeof e>"u"||MFe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Aa(t,e,n,r,i,o,u){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=u}var ko={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ko[t]=new Aa(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ko[e]=new Aa(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ko[t]=new Aa(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ko[t]=new Aa(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ko[t]=new Aa(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ko[t]=new Aa(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ko[t]=new Aa(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ko[t]=new Aa(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ko[t]=new Aa(t,5,!1,t.toLowerCase(),null,!1,!1)});var g$=/[\-:]([a-z])/g;function v$(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(g$,v$);ko[e]=new Aa(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(g$,v$);ko[e]=new Aa(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(g$,v$);ko[e]=new Aa(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ko[t]=new Aa(t,1,!1,t.toLowerCase(),null,!1,!1)});ko.xlinkHref=new Aa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ko[t]=new Aa(t,1,!1,t.toLowerCase(),null,!0,!0)});function y$(t,e,n,r){var i=ko.hasOwnProperty(e)?ko[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kFe(e,n,i,r)&&(n=null),r||i===null?TFe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var yp=_1e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A3=Symbol.for("react.element"),hw=Symbol.for("react.portal"),pw=Symbol.for("react.fragment"),b$=Symbol.for("react.strict_mode"),E9=Symbol.for("react.profiler"),x1e=Symbol.for("react.provider"),S1e=Symbol.for("react.context"),_$=Symbol.for("react.forward_ref"),C9=Symbol.for("react.suspense"),P9=Symbol.for("react.suspense_list"),w$=Symbol.for("react.memo"),wm=Symbol.for("react.lazy"),E1e=Symbol.for("react.offscreen"),zve=Symbol.iterator;function uP(t){return t===null||typeof t!="object"?null:(t=zve&&t[zve]||t["@@iterator"],typeof t=="function"?t:null)}var Yi=Object.assign,kH;function FP(t){if(kH===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kH=e&&e[1]||""}return`
`+kH+t}var AH=!1;function IH(t,e){if(!t||AH)return"";AH=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(v){var r=v}Reflect.construct(t,[],e)}else{try{e.call()}catch(v){r=v}t.call(e.prototype)}else{try{throw Error()}catch(v){r=v}t()}}catch(v){if(v&&r&&typeof v.stack=="string"){for(var i=v.stack.split(`
`),o=r.stack.split(`
`),u=i.length-1,d=o.length-1;1<=u&&0<=d&&i[u]!==o[d];)d--;for(;1<=u&&0<=d;u--,d--)if(i[u]!==o[d]){if(u!==1||d!==1)do if(u--,d--,0>d||i[u]!==o[d]){var m=`
`+i[u].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=u&&0<=d);break}}}finally{AH=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?FP(t):""}function AFe(t){switch(t.tag){case 5:return FP(t.type);case 16:return FP("Lazy");case 13:return FP("Suspense");case 19:return FP("SuspenseList");case 0:case 2:case 15:return t=IH(t.type,!1),t;case 11:return t=IH(t.type.render,!1),t;case 1:return t=IH(t.type,!0),t;default:return""}}function T9(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pw:return"Fragment";case hw:return"Portal";case E9:return"Profiler";case b$:return"StrictMode";case C9:return"Suspense";case P9:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case S1e:return(t.displayName||"Context")+".Consumer";case x1e:return(t._context.displayName||"Context")+".Provider";case _$:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case w$:return e=t.displayName||null,e!==null?e:T9(t.type)||"Memo";case wm:e=t._payload,t=t._init;try{return T9(t(e))}catch{}}return null}function IFe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return T9(e);case 8:return e===b$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Km(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function C1e(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RFe(t){var e=C1e(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(u){r=""+u,o.call(this,u)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(u){r=""+u},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function I3(t){t._valueTracker||(t._valueTracker=RFe(t))}function P1e(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=C1e(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function tN(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function M9(t,e){var n=e.checked;return Yi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vve(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Km(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function T1e(t,e){e=e.checked,e!=null&&y$(t,"checked",e,!1)}function k9(t,e){T1e(t,e);var n=Km(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?A9(t,e.type,n):e.hasOwnProperty("defaultValue")&&A9(t,e.type,Km(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function jve(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function A9(t,e,n){(e!=="number"||tN(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var BP=Array.isArray;function Dw(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Km(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function I9(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Xt(91));return Yi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Hve(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Xt(92));if(BP(n)){if(1<n.length)throw Error(Xt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Km(n)}}function M1e(t,e){var n=Km(e.value),r=Km(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gve(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function k1e(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function R9(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?k1e(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var R3,A1e=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(R3=R3||document.createElement("div"),R3.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=R3.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cT(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var GP={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},DFe=["Webkit","ms","Moz","O"];Object.keys(GP).forEach(function(t){DFe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),GP[e]=GP[t]})});function I1e(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||GP.hasOwnProperty(t)&&GP[t]?(""+e).trim():e+"px"}function R1e(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=I1e(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var OFe=Yi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function D9(t,e){if(e){if(OFe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Xt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Xt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Xt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Xt(62))}}function O9(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var L9=null;function x$(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var N9=null,Ow=null,Lw=null;function Wve(t){if(t=nM(t)){if(typeof N9!="function")throw Error(Xt(280));var e=t.stateNode;e&&(e=hF(e),N9(t.stateNode,t.type,e))}}function D1e(t){Ow?Lw?Lw.push(t):Lw=[t]:Ow=t}function O1e(){if(Ow){var t=Ow,e=Lw;if(Lw=Ow=null,Wve(t),e)for(t=0;t<e.length;t++)Wve(e[t])}}function L1e(t,e){return t(e)}function N1e(){}var RH=!1;function F1e(t,e,n){if(RH)return t(e,n);RH=!0;try{return L1e(t,e,n)}finally{RH=!1,(Ow!==null||Lw!==null)&&(N1e(),O1e())}}function dT(t,e){var n=t.stateNode;if(n===null)return null;var r=hF(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Xt(231,e,typeof n));return n}var F9=!1;if(up)try{var cP={};Object.defineProperty(cP,"passive",{get:function(){F9=!0}}),window.addEventListener("test",cP,cP),window.removeEventListener("test",cP,cP)}catch{F9=!1}function LFe(t,e,n,r,i,o,u,d,m){var v=Array.prototype.slice.call(arguments,3);try{e.apply(n,v)}catch(x){this.onError(x)}}var WP=!1,nN=null,rN=!1,B9=null,NFe={onError:function(t){WP=!0,nN=t}};function FFe(t,e,n,r,i,o,u,d,m){WP=!1,nN=null,LFe.apply(NFe,arguments)}function BFe(t,e,n,r,i,o,u,d,m){if(FFe.apply(this,arguments),WP){if(WP){var v=nN;WP=!1,nN=null}else throw Error(Xt(198));rN||(rN=!0,B9=v)}}function G0(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function B1e(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $ve(t){if(G0(t)!==t)throw Error(Xt(188))}function UFe(t){var e=t.alternate;if(!e){if(e=G0(t),e===null)throw Error(Xt(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return $ve(i),t;if(o===r)return $ve(i),e;o=o.sibling}throw Error(Xt(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,d=i.child;d;){if(d===n){u=!0,n=i,r=o;break}if(d===r){u=!0,r=i,n=o;break}d=d.sibling}if(!u){for(d=o.child;d;){if(d===n){u=!0,n=o,r=i;break}if(d===r){u=!0,r=o,n=i;break}d=d.sibling}if(!u)throw Error(Xt(189))}}if(n.alternate!==r)throw Error(Xt(190))}if(n.tag!==3)throw Error(Xt(188));return n.stateNode.current===n?t:e}function U1e(t){return t=UFe(t),t!==null?z1e(t):null}function z1e(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=z1e(t);if(e!==null)return e;t=t.sibling}return null}var V1e=xl.unstable_scheduleCallback,Kve=xl.unstable_cancelCallback,zFe=xl.unstable_shouldYield,VFe=xl.unstable_requestPaint,ws=xl.unstable_now,jFe=xl.unstable_getCurrentPriorityLevel,S$=xl.unstable_ImmediatePriority,j1e=xl.unstable_UserBlockingPriority,iN=xl.unstable_NormalPriority,HFe=xl.unstable_LowPriority,H1e=xl.unstable_IdlePriority,lF=null,Pd=null;function GFe(t){if(Pd&&typeof Pd.onCommitFiberRoot=="function")try{Pd.onCommitFiberRoot(lF,t,void 0,(t.current.flags&128)===128)}catch{}}var bc=Math.clz32?Math.clz32:KFe,WFe=Math.log,$Fe=Math.LN2;function KFe(t){return t>>>=0,t===0?32:31-(WFe(t)/$Fe|0)|0}var D3=64,O3=4194304;function UP(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sN(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,u=n&268435455;if(u!==0){var d=u&~i;d!==0?r=UP(d):(o&=u,o!==0&&(r=UP(o)))}else u=n&~i,u!==0?r=UP(u):o!==0&&(r=UP(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bc(e),i=1<<n,r|=t[n],e&=~i;return r}function XFe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qFe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var u=31-bc(o),d=1<<u,m=i[u];m===-1?(!(d&n)||d&r)&&(i[u]=XFe(d,e)):m<=e&&(t.expiredLanes|=d),o&=~d}}function U9(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function G1e(){var t=D3;return D3<<=1,!(D3&4194240)&&(D3=64),t}function DH(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function eM(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bc(e),t[e]=n}function YFe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-bc(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function E$(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bc(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ni=0;function W1e(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var $1e,C$,K1e,X1e,q1e,z9=!1,L3=[],Dm=null,Om=null,Lm=null,hT=new Map,pT=new Map,Cm=[],ZFe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xve(t,e){switch(t){case"focusin":case"focusout":Dm=null;break;case"dragenter":case"dragleave":Om=null;break;case"mouseover":case"mouseout":Lm=null;break;case"pointerover":case"pointerout":hT.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pT.delete(e.pointerId)}}function dP(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=nM(e),e!==null&&C$(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function QFe(t,e,n,r,i){switch(e){case"focusin":return Dm=dP(Dm,t,e,n,r,i),!0;case"dragenter":return Om=dP(Om,t,e,n,r,i),!0;case"mouseover":return Lm=dP(Lm,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return hT.set(o,dP(hT.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,pT.set(o,dP(pT.get(o)||null,t,e,n,r,i)),!0}return!1}function Y1e(t){var e=p0(t.target);if(e!==null){var n=G0(e);if(n!==null){if(e=n.tag,e===13){if(e=B1e(n),e!==null){t.blockedOn=e,q1e(t.priority,function(){K1e(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function LL(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=V9(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);L9=r,n.target.dispatchEvent(r),L9=null}else return e=nM(n),e!==null&&C$(e),t.blockedOn=n,!1;e.shift()}return!0}function qve(t,e,n){LL(t)&&n.delete(e)}function JFe(){z9=!1,Dm!==null&&LL(Dm)&&(Dm=null),Om!==null&&LL(Om)&&(Om=null),Lm!==null&&LL(Lm)&&(Lm=null),hT.forEach(qve),pT.forEach(qve)}function hP(t,e){t.blockedOn===e&&(t.blockedOn=null,z9||(z9=!0,xl.unstable_scheduleCallback(xl.unstable_NormalPriority,JFe)))}function fT(t){function e(i){return hP(i,t)}if(0<L3.length){hP(L3[0],t);for(var n=1;n<L3.length;n++){var r=L3[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dm!==null&&hP(Dm,t),Om!==null&&hP(Om,t),Lm!==null&&hP(Lm,t),hT.forEach(e),pT.forEach(e),n=0;n<Cm.length;n++)r=Cm[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cm.length&&(n=Cm[0],n.blockedOn===null);)Y1e(n),n.blockedOn===null&&Cm.shift()}var Nw=yp.ReactCurrentBatchConfig,oN=!0;function eBe(t,e,n,r){var i=ni,o=Nw.transition;Nw.transition=null;try{ni=1,P$(t,e,n,r)}finally{ni=i,Nw.transition=o}}function tBe(t,e,n,r){var i=ni,o=Nw.transition;Nw.transition=null;try{ni=4,P$(t,e,n,r)}finally{ni=i,Nw.transition=o}}function P$(t,e,n,r){if(oN){var i=V9(t,e,n,r);if(i===null)HH(t,e,r,aN,n),Xve(t,r);else if(QFe(i,t,e,n,r))r.stopPropagation();else if(Xve(t,r),e&4&&-1<ZFe.indexOf(t)){for(;i!==null;){var o=nM(i);if(o!==null&&$1e(o),o=V9(t,e,n,r),o===null&&HH(t,e,r,aN,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else HH(t,e,r,null,n)}}var aN=null;function V9(t,e,n,r){if(aN=null,t=x$(r),t=p0(t),t!==null)if(e=G0(t),e===null)t=null;else if(n=e.tag,n===13){if(t=B1e(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return aN=t,null}function Z1e(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jFe()){case S$:return 1;case j1e:return 4;case iN:case HFe:return 16;case H1e:return 536870912;default:return 16}default:return 16}}var Mm=null,T$=null,NL=null;function Q1e(){if(NL)return NL;var t,e=T$,n=e.length,r,i="value"in Mm?Mm.value:Mm.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var u=n-t;for(r=1;r<=u&&e[n-r]===i[o-r];r++);return NL=i.slice(t,1<r?1-r:void 0)}function FL(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function N3(){return!0}function Yve(){return!1}function Pl(t){function e(n,r,i,o,u){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var d in t)t.hasOwnProperty(d)&&(n=t[d],this[d]=n?n(o):o[d]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?N3:Yve,this.isPropagationStopped=Yve,this}return Yi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=N3)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=N3)},persist:function(){},isPersistent:N3}),e}var u1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},M$=Pl(u1),tM=Yi({},u1,{view:0,detail:0}),nBe=Pl(tM),OH,LH,pP,uF=Yi({},tM,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:k$,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pP&&(pP&&t.type==="mousemove"?(OH=t.screenX-pP.screenX,LH=t.screenY-pP.screenY):LH=OH=0,pP=t),OH)},movementY:function(t){return"movementY"in t?t.movementY:LH}}),Zve=Pl(uF),rBe=Yi({},uF,{dataTransfer:0}),iBe=Pl(rBe),sBe=Yi({},tM,{relatedTarget:0}),NH=Pl(sBe),oBe=Yi({},u1,{animationName:0,elapsedTime:0,pseudoElement:0}),aBe=Pl(oBe),lBe=Yi({},u1,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),uBe=Pl(lBe),cBe=Yi({},u1,{data:0}),Qve=Pl(cBe),dBe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hBe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pBe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fBe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=pBe[t])?!!e[t]:!1}function k$(){return fBe}var mBe=Yi({},tM,{key:function(t){if(t.key){var e=dBe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=FL(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hBe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:k$,charCode:function(t){return t.type==="keypress"?FL(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?FL(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),gBe=Pl(mBe),vBe=Yi({},uF,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jve=Pl(vBe),yBe=Yi({},tM,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:k$}),bBe=Pl(yBe),_Be=Yi({},u1,{propertyName:0,elapsedTime:0,pseudoElement:0}),wBe=Pl(_Be),xBe=Yi({},uF,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),SBe=Pl(xBe),EBe=[9,13,27,32],A$=up&&"CompositionEvent"in window,$P=null;up&&"documentMode"in document&&($P=document.documentMode);var CBe=up&&"TextEvent"in window&&!$P,J1e=up&&(!A$||$P&&8<$P&&11>=$P),e0e=String.fromCharCode(32),t0e=!1;function exe(t,e){switch(t){case"keyup":return EBe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function txe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fw=!1;function PBe(t,e){switch(t){case"compositionend":return txe(e);case"keypress":return e.which!==32?null:(t0e=!0,e0e);case"textInput":return t=e.data,t===e0e&&t0e?null:t;default:return null}}function TBe(t,e){if(fw)return t==="compositionend"||!A$&&exe(t,e)?(t=Q1e(),NL=T$=Mm=null,fw=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return J1e&&e.locale!=="ko"?null:e.data;default:return null}}var MBe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function n0e(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!MBe[t.type]:e==="textarea"}function nxe(t,e,n,r){D1e(r),e=lN(e,"onChange"),0<e.length&&(n=new M$("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var KP=null,mT=null;function kBe(t){pxe(t,0)}function cF(t){var e=vw(t);if(P1e(e))return t}function ABe(t,e){if(t==="change")return e}var rxe=!1;if(up){var FH;if(up){var BH="oninput"in document;if(!BH){var r0e=document.createElement("div");r0e.setAttribute("oninput","return;"),BH=typeof r0e.oninput=="function"}FH=BH}else FH=!1;rxe=FH&&(!document.documentMode||9<document.documentMode)}function i0e(){KP&&(KP.detachEvent("onpropertychange",ixe),mT=KP=null)}function ixe(t){if(t.propertyName==="value"&&cF(mT)){var e=[];nxe(e,mT,t,x$(t)),F1e(kBe,e)}}function IBe(t,e,n){t==="focusin"?(i0e(),KP=e,mT=n,KP.attachEvent("onpropertychange",ixe)):t==="focusout"&&i0e()}function RBe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cF(mT)}function DBe(t,e){if(t==="click")return cF(e)}function OBe(t,e){if(t==="input"||t==="change")return cF(e)}function LBe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wc=typeof Object.is=="function"?Object.is:LBe;function gT(t,e){if(wc(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!S9.call(e,i)||!wc(t[i],e[i]))return!1}return!0}function s0e(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function o0e(t,e){var n=s0e(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=s0e(n)}}function sxe(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sxe(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oxe(){for(var t=window,e=tN();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=tN(t.document)}return e}function I$(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function NBe(t){var e=oxe(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sxe(n.ownerDocument.documentElement,n)){if(r!==null&&I$(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=o0e(n,o);var u=o0e(n,r);i&&u&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(u.node,u.offset)):(e.setEnd(u.node,u.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var FBe=up&&"documentMode"in document&&11>=document.documentMode,mw=null,j9=null,XP=null,H9=!1;function a0e(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;H9||mw==null||mw!==tN(r)||(r=mw,"selectionStart"in r&&I$(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),XP&&gT(XP,r)||(XP=r,r=lN(j9,"onSelect"),0<r.length&&(e=new M$("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=mw)))}function F3(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gw={animationend:F3("Animation","AnimationEnd"),animationiteration:F3("Animation","AnimationIteration"),animationstart:F3("Animation","AnimationStart"),transitionend:F3("Transition","TransitionEnd")},UH={},axe={};up&&(axe=document.createElement("div").style,"AnimationEvent"in window||(delete gw.animationend.animation,delete gw.animationiteration.animation,delete gw.animationstart.animation),"TransitionEvent"in window||delete gw.transitionend.transition);function dF(t){if(UH[t])return UH[t];if(!gw[t])return t;var e=gw[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in axe)return UH[t]=e[n];return t}var lxe=dF("animationend"),uxe=dF("animationiteration"),cxe=dF("animationstart"),dxe=dF("transitionend"),hxe=new Map,l0e="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eg(t,e){hxe.set(t,e),H0(e,[t])}for(var zH=0;zH<l0e.length;zH++){var VH=l0e[zH],BBe=VH.toLowerCase(),UBe=VH[0].toUpperCase()+VH.slice(1);eg(BBe,"on"+UBe)}eg(lxe,"onAnimationEnd");eg(uxe,"onAnimationIteration");eg(cxe,"onAnimationStart");eg("dblclick","onDoubleClick");eg("focusin","onFocus");eg("focusout","onBlur");eg(dxe,"onTransitionEnd");Ww("onMouseEnter",["mouseout","mouseover"]);Ww("onMouseLeave",["mouseout","mouseover"]);Ww("onPointerEnter",["pointerout","pointerover"]);Ww("onPointerLeave",["pointerout","pointerover"]);H0("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));H0("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));H0("onBeforeInput",["compositionend","keypress","textInput","paste"]);H0("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));H0("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));H0("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zP="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zBe=new Set("cancel close invalid load scroll toggle".split(" ").concat(zP));function u0e(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,BFe(r,e,void 0,t),t.currentTarget=null}function pxe(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var u=r.length-1;0<=u;u--){var d=r[u],m=d.instance,v=d.currentTarget;if(d=d.listener,m!==o&&i.isPropagationStopped())break e;u0e(i,d,v),o=m}else for(u=0;u<r.length;u++){if(d=r[u],m=d.instance,v=d.currentTarget,d=d.listener,m!==o&&i.isPropagationStopped())break e;u0e(i,d,v),o=m}}}if(rN)throw t=B9,rN=!1,B9=null,t}function Pi(t,e){var n=e[X9];n===void 0&&(n=e[X9]=new Set);var r=t+"__bubble";n.has(r)||(fxe(e,t,2,!1),n.add(r))}function jH(t,e,n){var r=0;e&&(r|=4),fxe(n,t,r,e)}var B3="_reactListening"+Math.random().toString(36).slice(2);function vT(t){if(!t[B3]){t[B3]=!0,w1e.forEach(function(n){n!=="selectionchange"&&(zBe.has(n)||jH(n,!1,t),jH(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[B3]||(e[B3]=!0,jH("selectionchange",!1,e))}}function fxe(t,e,n,r){switch(Z1e(e)){case 1:var i=eBe;break;case 4:i=tBe;break;default:i=P$}n=i.bind(null,e,n,t),i=void 0,!F9||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function HH(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var u=r.tag;if(u===3||u===4){var d=r.stateNode.containerInfo;if(d===i||d.nodeType===8&&d.parentNode===i)break;if(u===4)for(u=r.return;u!==null;){var m=u.tag;if((m===3||m===4)&&(m=u.stateNode.containerInfo,m===i||m.nodeType===8&&m.parentNode===i))return;u=u.return}for(;d!==null;){if(u=p0(d),u===null)return;if(m=u.tag,m===5||m===6){r=o=u;continue e}d=d.parentNode}}r=r.return}F1e(function(){var v=o,x=x$(n),E=[];e:{var M=hxe.get(t);if(M!==void 0){var R=M$,j=t;switch(t){case"keypress":if(FL(n)===0)break e;case"keydown":case"keyup":R=gBe;break;case"focusin":j="focus",R=NH;break;case"focusout":j="blur",R=NH;break;case"beforeblur":case"afterblur":R=NH;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=Zve;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=iBe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=bBe;break;case lxe:case uxe:case cxe:R=aBe;break;case dxe:R=wBe;break;case"scroll":R=nBe;break;case"wheel":R=SBe;break;case"copy":case"cut":case"paste":R=uBe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=Jve}var F=(e&4)!==0,B=!F&&t==="scroll",z=F?M!==null?M+"Capture":null:M;F=[];for(var P=v,W;P!==null;){W=P;var Z=W.stateNode;if(W.tag===5&&Z!==null&&(W=Z,z!==null&&(Z=dT(P,z),Z!=null&&F.push(yT(P,Z,W)))),B)break;P=P.return}0<F.length&&(M=new R(M,j,null,n,x),E.push({event:M,listeners:F}))}}if(!(e&7)){e:{if(M=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",M&&n!==L9&&(j=n.relatedTarget||n.fromElement)&&(p0(j)||j[cp]))break e;if((R||M)&&(M=x.window===x?x:(M=x.ownerDocument)?M.defaultView||M.parentWindow:window,R?(j=n.relatedTarget||n.toElement,R=v,j=j?p0(j):null,j!==null&&(B=G0(j),j!==B||j.tag!==5&&j.tag!==6)&&(j=null)):(R=null,j=v),R!==j)){if(F=Zve,Z="onMouseLeave",z="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(F=Jve,Z="onPointerLeave",z="onPointerEnter",P="pointer"),B=R==null?M:vw(R),W=j==null?M:vw(j),M=new F(Z,P+"leave",R,n,x),M.target=B,M.relatedTarget=W,Z=null,p0(x)===v&&(F=new F(z,P+"enter",j,n,x),F.target=W,F.relatedTarget=B,Z=F),B=Z,R&&j)t:{for(F=R,z=j,P=0,W=F;W;W=N_(W))P++;for(W=0,Z=z;Z;Z=N_(Z))W++;for(;0<P-W;)F=N_(F),P--;for(;0<W-P;)z=N_(z),W--;for(;P--;){if(F===z||z!==null&&F===z.alternate)break t;F=N_(F),z=N_(z)}F=null}else F=null;R!==null&&c0e(E,M,R,F,!1),j!==null&&B!==null&&c0e(E,B,j,F,!0)}}e:{if(M=v?vw(v):window,R=M.nodeName&&M.nodeName.toLowerCase(),R==="select"||R==="input"&&M.type==="file")var ge=ABe;else if(n0e(M))if(rxe)ge=OBe;else{ge=RBe;var X=IBe}else(R=M.nodeName)&&R.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(ge=DBe);if(ge&&(ge=ge(t,v))){nxe(E,ge,n,x);break e}X&&X(t,M,v),t==="focusout"&&(X=M._wrapperState)&&X.controlled&&M.type==="number"&&A9(M,"number",M.value)}switch(X=v?vw(v):window,t){case"focusin":(n0e(X)||X.contentEditable==="true")&&(mw=X,j9=v,XP=null);break;case"focusout":XP=j9=mw=null;break;case"mousedown":H9=!0;break;case"contextmenu":case"mouseup":case"dragend":H9=!1,a0e(E,n,x);break;case"selectionchange":if(FBe)break;case"keydown":case"keyup":a0e(E,n,x)}var pe;if(A$)e:{switch(t){case"compositionstart":var ye="onCompositionStart";break e;case"compositionend":ye="onCompositionEnd";break e;case"compositionupdate":ye="onCompositionUpdate";break e}ye=void 0}else fw?exe(t,n)&&(ye="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(ye="onCompositionStart");ye&&(J1e&&n.locale!=="ko"&&(fw||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&fw&&(pe=Q1e()):(Mm=x,T$="value"in Mm?Mm.value:Mm.textContent,fw=!0)),X=lN(v,ye),0<X.length&&(ye=new Qve(ye,t,null,n,x),E.push({event:ye,listeners:X}),pe?ye.data=pe:(pe=txe(n),pe!==null&&(ye.data=pe)))),(pe=CBe?PBe(t,n):TBe(t,n))&&(v=lN(v,"onBeforeInput"),0<v.length&&(x=new Qve("onBeforeInput","beforeinput",null,n,x),E.push({event:x,listeners:v}),x.data=pe))}pxe(E,e)})}function yT(t,e,n){return{instance:t,listener:e,currentTarget:n}}function lN(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=dT(t,n),o!=null&&r.unshift(yT(t,o,i)),o=dT(t,e),o!=null&&r.push(yT(t,o,i))),t=t.return}return r}function N_(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function c0e(t,e,n,r,i){for(var o=e._reactName,u=[];n!==null&&n!==r;){var d=n,m=d.alternate,v=d.stateNode;if(m!==null&&m===r)break;d.tag===5&&v!==null&&(d=v,i?(m=dT(n,o),m!=null&&u.unshift(yT(n,m,d))):i||(m=dT(n,o),m!=null&&u.push(yT(n,m,d)))),n=n.return}u.length!==0&&t.push({event:e,listeners:u})}var VBe=/\r\n?/g,jBe=/\u0000|\uFFFD/g;function d0e(t){return(typeof t=="string"?t:""+t).replace(VBe,`
`).replace(jBe,"")}function U3(t,e,n){if(e=d0e(e),d0e(t)!==e&&n)throw Error(Xt(425))}function uN(){}var G9=null,W9=null;function $9(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var K9=typeof setTimeout=="function"?setTimeout:void 0,HBe=typeof clearTimeout=="function"?clearTimeout:void 0,h0e=typeof Promise=="function"?Promise:void 0,GBe=typeof queueMicrotask=="function"?queueMicrotask:typeof h0e<"u"?function(t){return h0e.resolve(null).then(t).catch(WBe)}:K9;function WBe(t){setTimeout(function(){throw t})}function GH(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),fT(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);fT(e)}function Nm(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function p0e(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var c1=Math.random().toString(36).slice(2),xd="__reactFiber$"+c1,bT="__reactProps$"+c1,cp="__reactContainer$"+c1,X9="__reactEvents$"+c1,$Be="__reactListeners$"+c1,KBe="__reactHandles$"+c1;function p0(t){var e=t[xd];if(e)return e;for(var n=t.parentNode;n;){if(e=n[cp]||n[xd]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=p0e(t);t!==null;){if(n=t[xd])return n;t=p0e(t)}return e}t=n,n=t.parentNode}return null}function nM(t){return t=t[xd]||t[cp],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vw(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Xt(33))}function hF(t){return t[bT]||null}var q9=[],yw=-1;function tg(t){return{current:t}}function Ii(t){0>yw||(t.current=q9[yw],q9[yw]=null,yw--)}function gi(t,e){yw++,q9[yw]=t.current,t.current=e}var Xm={},Jo=tg(Xm),Ya=tg(!1),T0=Xm;function $w(t,e){var n=t.type.contextTypes;if(!n)return Xm;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Za(t){return t=t.childContextTypes,t!=null}function cN(){Ii(Ya),Ii(Jo)}function f0e(t,e,n){if(Jo.current!==Xm)throw Error(Xt(168));gi(Jo,e),gi(Ya,n)}function mxe(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Xt(108,IFe(t)||"Unknown",i));return Yi({},n,r)}function dN(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xm,T0=Jo.current,gi(Jo,t),gi(Ya,Ya.current),!0}function m0e(t,e,n){var r=t.stateNode;if(!r)throw Error(Xt(169));n?(t=mxe(t,e,T0),r.__reactInternalMemoizedMergedChildContext=t,Ii(Ya),Ii(Jo),gi(Jo,t)):Ii(Ya),gi(Ya,n)}var qh=null,pF=!1,WH=!1;function gxe(t){qh===null?qh=[t]:qh.push(t)}function XBe(t){pF=!0,gxe(t)}function ng(){if(!WH&&qh!==null){WH=!0;var t=0,e=ni;try{var n=qh;for(ni=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}qh=null,pF=!1}catch(i){throw qh!==null&&(qh=qh.slice(t+1)),V1e(S$,ng),i}finally{ni=e,WH=!1}}return null}var bw=[],_w=0,hN=null,pN=0,du=[],hu=0,M0=null,Yh=1,Zh="";function a0(t,e){bw[_w++]=pN,bw[_w++]=hN,hN=t,pN=e}function vxe(t,e,n){du[hu++]=Yh,du[hu++]=Zh,du[hu++]=M0,M0=t;var r=Yh;t=Zh;var i=32-bc(r)-1;r&=~(1<<i),n+=1;var o=32-bc(e)+i;if(30<o){var u=i-i%5;o=(r&(1<<u)-1).toString(32),r>>=u,i-=u,Yh=1<<32-bc(e)+i|n<<i|r,Zh=o+t}else Yh=1<<o|n<<i|r,Zh=t}function R$(t){t.return!==null&&(a0(t,1),vxe(t,1,0))}function D$(t){for(;t===hN;)hN=bw[--_w],bw[_w]=null,pN=bw[--_w],bw[_w]=null;for(;t===M0;)M0=du[--hu],du[hu]=null,Zh=du[--hu],du[hu]=null,Yh=du[--hu],du[hu]=null}var bl=null,yl=null,Oi=!1,yc=null;function yxe(t,e){var n=gu(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function g0e(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bl=t,yl=Nm(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bl=t,yl=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=M0!==null?{id:Yh,overflow:Zh}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=gu(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bl=t,yl=null,!0):!1;default:return!1}}function Y9(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Z9(t){if(Oi){var e=yl;if(e){var n=e;if(!g0e(t,e)){if(Y9(t))throw Error(Xt(418));e=Nm(n.nextSibling);var r=bl;e&&g0e(t,e)?yxe(r,n):(t.flags=t.flags&-4097|2,Oi=!1,bl=t)}}else{if(Y9(t))throw Error(Xt(418));t.flags=t.flags&-4097|2,Oi=!1,bl=t}}}function v0e(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bl=t}function z3(t){if(t!==bl)return!1;if(!Oi)return v0e(t),Oi=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$9(t.type,t.memoizedProps)),e&&(e=yl)){if(Y9(t))throw bxe(),Error(Xt(418));for(;e;)yxe(t,e),e=Nm(e.nextSibling)}if(v0e(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Xt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){yl=Nm(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}yl=null}}else yl=bl?Nm(t.stateNode.nextSibling):null;return!0}function bxe(){for(var t=yl;t;)t=Nm(t.nextSibling)}function Kw(){yl=bl=null,Oi=!1}function O$(t){yc===null?yc=[t]:yc.push(t)}var qBe=yp.ReactCurrentBatchConfig;function gc(t,e){if(t&&t.defaultProps){e=Yi({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var fN=tg(null),mN=null,ww=null,L$=null;function N$(){L$=ww=mN=null}function F$(t){var e=fN.current;Ii(fN),t._currentValue=e}function Q9(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fw(t,e){mN=t,L$=ww=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ka=!0),t.firstContext=null)}function xu(t){var e=t._currentValue;if(L$!==t)if(t={context:t,memoizedValue:e,next:null},ww===null){if(mN===null)throw Error(Xt(308));ww=t,mN.dependencies={lanes:0,firstContext:t}}else ww=ww.next=t;return e}var f0=null;function B$(t){f0===null?f0=[t]:f0.push(t)}function _xe(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,B$(e)):(n.next=i.next,i.next=n),e.interleaved=n,dp(t,r)}function dp(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xm=!1;function U$(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wxe(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ip(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fm(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Br&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,dp(t,n)}return i=r.interleaved,i===null?(e.next=e,B$(r)):(e.next=i.next,i.next=e),r.interleaved=e,dp(t,n)}function BL(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,E$(t,n)}}function y0e(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var u={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=u:o=o.next=u,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function gN(t,e,n,r){var i=t.updateQueue;xm=!1;var o=i.firstBaseUpdate,u=i.lastBaseUpdate,d=i.shared.pending;if(d!==null){i.shared.pending=null;var m=d,v=m.next;m.next=null,u===null?o=v:u.next=v,u=m;var x=t.alternate;x!==null&&(x=x.updateQueue,d=x.lastBaseUpdate,d!==u&&(d===null?x.firstBaseUpdate=v:d.next=v,x.lastBaseUpdate=m))}if(o!==null){var E=i.baseState;u=0,x=v=m=null,d=o;do{var M=d.lane,R=d.eventTime;if((r&M)===M){x!==null&&(x=x.next={eventTime:R,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var j=t,F=d;switch(M=e,R=n,F.tag){case 1:if(j=F.payload,typeof j=="function"){E=j.call(R,E,M);break e}E=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=F.payload,M=typeof j=="function"?j.call(R,E,M):j,M==null)break e;E=Yi({},E,M);break e;case 2:xm=!0}}d.callback!==null&&d.lane!==0&&(t.flags|=64,M=i.effects,M===null?i.effects=[d]:M.push(d))}else R={eventTime:R,lane:M,tag:d.tag,payload:d.payload,callback:d.callback,next:null},x===null?(v=x=R,m=E):x=x.next=R,u|=M;if(d=d.next,d===null){if(d=i.shared.pending,d===null)break;M=d,d=M.next,M.next=null,i.lastBaseUpdate=M,i.shared.pending=null}}while(1);if(x===null&&(m=E),i.baseState=m,i.firstBaseUpdate=v,i.lastBaseUpdate=x,e=i.shared.interleaved,e!==null){i=e;do u|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);A0|=u,t.lanes=u,t.memoizedState=E}}function b0e(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Xt(191,i));i.call(r)}}}var xxe=new _1e.Component().refs;function J9(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Yi({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fF={isMounted:function(t){return(t=t._reactInternals)?G0(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ea(),i=Um(t),o=ip(r,i);o.payload=e,n!=null&&(o.callback=n),e=Fm(t,o,i),e!==null&&(_c(e,t,i,r),BL(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ea(),i=Um(t),o=ip(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Fm(t,o,i),e!==null&&(_c(e,t,i,r),BL(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ea(),r=Um(t),i=ip(n,r);i.tag=2,e!=null&&(i.callback=e),e=Fm(t,i,r),e!==null&&(_c(e,t,r,n),BL(e,t,r))}};function _0e(t,e,n,r,i,o,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,u):e.prototype&&e.prototype.isPureReactComponent?!gT(n,r)||!gT(i,o):!0}function Sxe(t,e,n){var r=!1,i=Xm,o=e.contextType;return typeof o=="object"&&o!==null?o=xu(o):(i=Za(e)?T0:Jo.current,r=e.contextTypes,o=(r=r!=null)?$w(t,i):Xm),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fF,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function w0e(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fF.enqueueReplaceState(e,e.state,null)}function eW(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=xxe,U$(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=xu(o):(o=Za(e)?T0:Jo.current,i.context=$w(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(J9(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&fF.enqueueReplaceState(i,i.state,null),gN(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function fP(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Xt(309));var r=n.stateNode}if(!r)throw Error(Xt(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(u){var d=i.refs;d===xxe&&(d=i.refs={}),u===null?delete d[o]:d[o]=u},e._stringRef=o,e)}if(typeof t!="string")throw Error(Xt(284));if(!n._owner)throw Error(Xt(290,t))}return t}function V3(t,e){throw t=Object.prototype.toString.call(e),Error(Xt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function x0e(t){var e=t._init;return e(t._payload)}function Exe(t){function e(z,P){if(t){var W=z.deletions;W===null?(z.deletions=[P],z.flags|=16):W.push(P)}}function n(z,P){if(!t)return null;for(;P!==null;)e(z,P),P=P.sibling;return null}function r(z,P){for(z=new Map;P!==null;)P.key!==null?z.set(P.key,P):z.set(P.index,P),P=P.sibling;return z}function i(z,P){return z=zm(z,P),z.index=0,z.sibling=null,z}function o(z,P,W){return z.index=W,t?(W=z.alternate,W!==null?(W=W.index,W<P?(z.flags|=2,P):W):(z.flags|=2,P)):(z.flags|=1048576,P)}function u(z){return t&&z.alternate===null&&(z.flags|=2),z}function d(z,P,W,Z){return P===null||P.tag!==6?(P=QH(W,z.mode,Z),P.return=z,P):(P=i(P,W),P.return=z,P)}function m(z,P,W,Z){var ge=W.type;return ge===pw?x(z,P,W.props.children,Z,W.key):P!==null&&(P.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===wm&&x0e(ge)===P.type)?(Z=i(P,W.props),Z.ref=fP(z,P,W),Z.return=z,Z):(Z=GL(W.type,W.key,W.props,null,z.mode,Z),Z.ref=fP(z,P,W),Z.return=z,Z)}function v(z,P,W,Z){return P===null||P.tag!==4||P.stateNode.containerInfo!==W.containerInfo||P.stateNode.implementation!==W.implementation?(P=JH(W,z.mode,Z),P.return=z,P):(P=i(P,W.children||[]),P.return=z,P)}function x(z,P,W,Z,ge){return P===null||P.tag!==7?(P=_0(W,z.mode,Z,ge),P.return=z,P):(P=i(P,W),P.return=z,P)}function E(z,P,W){if(typeof P=="string"&&P!==""||typeof P=="number")return P=QH(""+P,z.mode,W),P.return=z,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case A3:return W=GL(P.type,P.key,P.props,null,z.mode,W),W.ref=fP(z,null,P),W.return=z,W;case hw:return P=JH(P,z.mode,W),P.return=z,P;case wm:var Z=P._init;return E(z,Z(P._payload),W)}if(BP(P)||uP(P))return P=_0(P,z.mode,W,null),P.return=z,P;V3(z,P)}return null}function M(z,P,W,Z){var ge=P!==null?P.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return ge!==null?null:d(z,P,""+W,Z);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case A3:return W.key===ge?m(z,P,W,Z):null;case hw:return W.key===ge?v(z,P,W,Z):null;case wm:return ge=W._init,M(z,P,ge(W._payload),Z)}if(BP(W)||uP(W))return ge!==null?null:x(z,P,W,Z,null);V3(z,W)}return null}function R(z,P,W,Z,ge){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return z=z.get(W)||null,d(P,z,""+Z,ge);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A3:return z=z.get(Z.key===null?W:Z.key)||null,m(P,z,Z,ge);case hw:return z=z.get(Z.key===null?W:Z.key)||null,v(P,z,Z,ge);case wm:var X=Z._init;return R(z,P,W,X(Z._payload),ge)}if(BP(Z)||uP(Z))return z=z.get(W)||null,x(P,z,Z,ge,null);V3(P,Z)}return null}function j(z,P,W,Z){for(var ge=null,X=null,pe=P,ye=P=0,te=null;pe!==null&&ye<W.length;ye++){pe.index>ye?(te=pe,pe=null):te=pe.sibling;var ie=M(z,pe,W[ye],Z);if(ie===null){pe===null&&(pe=te);break}t&&pe&&ie.alternate===null&&e(z,pe),P=o(ie,P,ye),X===null?ge=ie:X.sibling=ie,X=ie,pe=te}if(ye===W.length)return n(z,pe),Oi&&a0(z,ye),ge;if(pe===null){for(;ye<W.length;ye++)pe=E(z,W[ye],Z),pe!==null&&(P=o(pe,P,ye),X===null?ge=pe:X.sibling=pe,X=pe);return Oi&&a0(z,ye),ge}for(pe=r(z,pe);ye<W.length;ye++)te=R(pe,z,ye,W[ye],Z),te!==null&&(t&&te.alternate!==null&&pe.delete(te.key===null?ye:te.key),P=o(te,P,ye),X===null?ge=te:X.sibling=te,X=te);return t&&pe.forEach(function(Pe){return e(z,Pe)}),Oi&&a0(z,ye),ge}function F(z,P,W,Z){var ge=uP(W);if(typeof ge!="function")throw Error(Xt(150));if(W=ge.call(W),W==null)throw Error(Xt(151));for(var X=ge=null,pe=P,ye=P=0,te=null,ie=W.next();pe!==null&&!ie.done;ye++,ie=W.next()){pe.index>ye?(te=pe,pe=null):te=pe.sibling;var Pe=M(z,pe,ie.value,Z);if(Pe===null){pe===null&&(pe=te);break}t&&pe&&Pe.alternate===null&&e(z,pe),P=o(Pe,P,ye),X===null?ge=Pe:X.sibling=Pe,X=Pe,pe=te}if(ie.done)return n(z,pe),Oi&&a0(z,ye),ge;if(pe===null){for(;!ie.done;ye++,ie=W.next())ie=E(z,ie.value,Z),ie!==null&&(P=o(ie,P,ye),X===null?ge=ie:X.sibling=ie,X=ie);return Oi&&a0(z,ye),ge}for(pe=r(z,pe);!ie.done;ye++,ie=W.next())ie=R(pe,z,ye,ie.value,Z),ie!==null&&(t&&ie.alternate!==null&&pe.delete(ie.key===null?ye:ie.key),P=o(ie,P,ye),X===null?ge=ie:X.sibling=ie,X=ie);return t&&pe.forEach(function(_t){return e(z,_t)}),Oi&&a0(z,ye),ge}function B(z,P,W,Z){if(typeof W=="object"&&W!==null&&W.type===pw&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case A3:e:{for(var ge=W.key,X=P;X!==null;){if(X.key===ge){if(ge=W.type,ge===pw){if(X.tag===7){n(z,X.sibling),P=i(X,W.props.children),P.return=z,z=P;break e}}else if(X.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===wm&&x0e(ge)===X.type){n(z,X.sibling),P=i(X,W.props),P.ref=fP(z,X,W),P.return=z,z=P;break e}n(z,X);break}else e(z,X);X=X.sibling}W.type===pw?(P=_0(W.props.children,z.mode,Z,W.key),P.return=z,z=P):(Z=GL(W.type,W.key,W.props,null,z.mode,Z),Z.ref=fP(z,P,W),Z.return=z,z=Z)}return u(z);case hw:e:{for(X=W.key;P!==null;){if(P.key===X)if(P.tag===4&&P.stateNode.containerInfo===W.containerInfo&&P.stateNode.implementation===W.implementation){n(z,P.sibling),P=i(P,W.children||[]),P.return=z,z=P;break e}else{n(z,P);break}else e(z,P);P=P.sibling}P=JH(W,z.mode,Z),P.return=z,z=P}return u(z);case wm:return X=W._init,B(z,P,X(W._payload),Z)}if(BP(W))return j(z,P,W,Z);if(uP(W))return F(z,P,W,Z);V3(z,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,P!==null&&P.tag===6?(n(z,P.sibling),P=i(P,W),P.return=z,z=P):(n(z,P),P=QH(W,z.mode,Z),P.return=z,z=P),u(z)):n(z,P)}return B}var Xw=Exe(!0),Cxe=Exe(!1),rM={},Td=tg(rM),_T=tg(rM),wT=tg(rM);function m0(t){if(t===rM)throw Error(Xt(174));return t}function z$(t,e){switch(gi(wT,e),gi(_T,t),gi(Td,rM),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:R9(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=R9(e,t)}Ii(Td),gi(Td,e)}function qw(){Ii(Td),Ii(_T),Ii(wT)}function Pxe(t){m0(wT.current);var e=m0(Td.current),n=R9(e,t.type);e!==n&&(gi(_T,t),gi(Td,n))}function V$(t){_T.current===t&&(Ii(Td),Ii(_T))}var Wi=tg(0);function vN(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $H=[];function j$(){for(var t=0;t<$H.length;t++)$H[t]._workInProgressVersionPrimary=null;$H.length=0}var UL=yp.ReactCurrentDispatcher,KH=yp.ReactCurrentBatchConfig,k0=0,Xi=null,Bs=null,to=null,yN=!1,qP=!1,xT=0,YBe=0;function Go(){throw Error(Xt(321))}function H$(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wc(t[n],e[n]))return!1;return!0}function G$(t,e,n,r,i,o){if(k0=o,Xi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,UL.current=t===null||t.memoizedState===null?eUe:tUe,t=n(r,i),qP){o=0;do{if(qP=!1,xT=0,25<=o)throw Error(Xt(301));o+=1,to=Bs=null,e.updateQueue=null,UL.current=nUe,t=n(r,i)}while(qP)}if(UL.current=bN,e=Bs!==null&&Bs.next!==null,k0=0,to=Bs=Xi=null,yN=!1,e)throw Error(Xt(300));return t}function W$(){var t=xT!==0;return xT=0,t}function bd(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return to===null?Xi.memoizedState=to=t:to=to.next=t,to}function Su(){if(Bs===null){var t=Xi.alternate;t=t!==null?t.memoizedState:null}else t=Bs.next;var e=to===null?Xi.memoizedState:to.next;if(e!==null)to=e,Bs=t;else{if(t===null)throw Error(Xt(310));Bs=t,t={memoizedState:Bs.memoizedState,baseState:Bs.baseState,baseQueue:Bs.baseQueue,queue:Bs.queue,next:null},to===null?Xi.memoizedState=to=t:to=to.next=t}return to}function ST(t,e){return typeof e=="function"?e(t):e}function XH(t){var e=Su(),n=e.queue;if(n===null)throw Error(Xt(311));n.lastRenderedReducer=t;var r=Bs,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var d=u=null,m=null,v=o;do{var x=v.lane;if((k0&x)===x)m!==null&&(m=m.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),r=v.hasEagerState?v.eagerState:t(r,v.action);else{var E={lane:x,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};m===null?(d=m=E,u=r):m=m.next=E,Xi.lanes|=x,A0|=x}v=v.next}while(v!==null&&v!==o);m===null?u=r:m.next=d,wc(r,e.memoizedState)||(Ka=!0),e.memoizedState=r,e.baseState=u,e.baseQueue=m,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Xi.lanes|=o,A0|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qH(t){var e=Su(),n=e.queue;if(n===null)throw Error(Xt(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var u=i=i.next;do o=t(o,u.action),u=u.next;while(u!==i);wc(o,e.memoizedState)||(Ka=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Txe(){}function Mxe(t,e){var n=Xi,r=Su(),i=e(),o=!wc(r.memoizedState,i);if(o&&(r.memoizedState=i,Ka=!0),r=r.queue,$$(Ixe.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||to!==null&&to.memoizedState.tag&1){if(n.flags|=2048,ET(9,Axe.bind(null,n,r,i,e),void 0,null),so===null)throw Error(Xt(349));k0&30||kxe(n,e,i)}return i}function kxe(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xi.updateQueue,e===null?(e={lastEffect:null,stores:null},Xi.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Axe(t,e,n,r){e.value=n,e.getSnapshot=r,Rxe(e)&&Dxe(t)}function Ixe(t,e,n){return n(function(){Rxe(e)&&Dxe(t)})}function Rxe(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wc(t,n)}catch{return!0}}function Dxe(t){var e=dp(t,1);e!==null&&_c(e,t,1,-1)}function S0e(t){var e=bd();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ST,lastRenderedState:t},e.queue=t,t=t.dispatch=JBe.bind(null,Xi,t),[e.memoizedState,t]}function ET(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xi.updateQueue,e===null?(e={lastEffect:null,stores:null},Xi.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Oxe(){return Su().memoizedState}function zL(t,e,n,r){var i=bd();Xi.flags|=t,i.memoizedState=ET(1|e,n,void 0,r===void 0?null:r)}function mF(t,e,n,r){var i=Su();r=r===void 0?null:r;var o=void 0;if(Bs!==null){var u=Bs.memoizedState;if(o=u.destroy,r!==null&&H$(r,u.deps)){i.memoizedState=ET(e,n,o,r);return}}Xi.flags|=t,i.memoizedState=ET(1|e,n,o,r)}function E0e(t,e){return zL(8390656,8,t,e)}function $$(t,e){return mF(2048,8,t,e)}function Lxe(t,e){return mF(4,2,t,e)}function Nxe(t,e){return mF(4,4,t,e)}function Fxe(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bxe(t,e,n){return n=n!=null?n.concat([t]):null,mF(4,4,Fxe.bind(null,e,t),n)}function K$(){}function Uxe(t,e){var n=Su();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&H$(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zxe(t,e){var n=Su();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&H$(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vxe(t,e,n){return k0&21?(wc(n,e)||(n=G1e(),Xi.lanes|=n,A0|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ka=!0),t.memoizedState=n)}function ZBe(t,e){var n=ni;ni=n!==0&&4>n?n:4,t(!0);var r=KH.transition;KH.transition={};try{t(!1),e()}finally{ni=n,KH.transition=r}}function jxe(){return Su().memoizedState}function QBe(t,e,n){var r=Um(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hxe(t))Gxe(e,n);else if(n=_xe(t,e,n,r),n!==null){var i=Ea();_c(n,t,r,i),Wxe(n,e,r)}}function JBe(t,e,n){var r=Um(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hxe(t))Gxe(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var u=e.lastRenderedState,d=o(u,n);if(i.hasEagerState=!0,i.eagerState=d,wc(d,u)){var m=e.interleaved;m===null?(i.next=i,B$(e)):(i.next=m.next,m.next=i),e.interleaved=i;return}}catch{}finally{}n=_xe(t,e,i,r),n!==null&&(i=Ea(),_c(n,t,r,i),Wxe(n,e,r))}}function Hxe(t){var e=t.alternate;return t===Xi||e!==null&&e===Xi}function Gxe(t,e){qP=yN=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Wxe(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,E$(t,n)}}var bN={readContext:xu,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useInsertionEffect:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useDeferredValue:Go,useTransition:Go,useMutableSource:Go,useSyncExternalStore:Go,useId:Go,unstable_isNewReconciler:!1},eUe={readContext:xu,useCallback:function(t,e){return bd().memoizedState=[t,e===void 0?null:e],t},useContext:xu,useEffect:E0e,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zL(4194308,4,Fxe.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zL(4194308,4,t,e)},useInsertionEffect:function(t,e){return zL(4,2,t,e)},useMemo:function(t,e){var n=bd();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bd();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=QBe.bind(null,Xi,t),[r.memoizedState,t]},useRef:function(t){var e=bd();return t={current:t},e.memoizedState=t},useState:S0e,useDebugValue:K$,useDeferredValue:function(t){return bd().memoizedState=t},useTransition:function(){var t=S0e(!1),e=t[0];return t=ZBe.bind(null,t[1]),bd().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xi,i=bd();if(Oi){if(n===void 0)throw Error(Xt(407));n=n()}else{if(n=e(),so===null)throw Error(Xt(349));k0&30||kxe(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,E0e(Ixe.bind(null,r,o,t),[t]),r.flags|=2048,ET(9,Axe.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=bd(),e=so.identifierPrefix;if(Oi){var n=Zh,r=Yh;n=(r&~(1<<32-bc(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xT++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=YBe++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},tUe={readContext:xu,useCallback:Uxe,useContext:xu,useEffect:$$,useImperativeHandle:Bxe,useInsertionEffect:Lxe,useLayoutEffect:Nxe,useMemo:zxe,useReducer:XH,useRef:Oxe,useState:function(){return XH(ST)},useDebugValue:K$,useDeferredValue:function(t){var e=Su();return Vxe(e,Bs.memoizedState,t)},useTransition:function(){var t=XH(ST)[0],e=Su().memoizedState;return[t,e]},useMutableSource:Txe,useSyncExternalStore:Mxe,useId:jxe,unstable_isNewReconciler:!1},nUe={readContext:xu,useCallback:Uxe,useContext:xu,useEffect:$$,useImperativeHandle:Bxe,useInsertionEffect:Lxe,useLayoutEffect:Nxe,useMemo:zxe,useReducer:qH,useRef:Oxe,useState:function(){return qH(ST)},useDebugValue:K$,useDeferredValue:function(t){var e=Su();return Bs===null?e.memoizedState=t:Vxe(e,Bs.memoizedState,t)},useTransition:function(){var t=qH(ST)[0],e=Su().memoizedState;return[t,e]},useMutableSource:Txe,useSyncExternalStore:Mxe,useId:jxe,unstable_isNewReconciler:!1};function Yw(t,e){try{var n="",r=e;do n+=AFe(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function YH(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function tW(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var rUe=typeof WeakMap=="function"?WeakMap:Map;function $xe(t,e,n){n=ip(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wN||(wN=!0,dW=r),tW(t,e)},n}function Kxe(t,e,n){n=ip(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){tW(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){tW(t,e),typeof r!="function"&&(Bm===null?Bm=new Set([this]):Bm.add(this));var u=e.stack;this.componentDidCatch(e.value,{componentStack:u!==null?u:""})}),n}function C0e(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new rUe;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=vUe.bind(null,t,e,n),e.then(t,t))}function P0e(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function T0e(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ip(-1,1),e.tag=2,Fm(n,e,1))),n.lanes|=1),t)}var iUe=yp.ReactCurrentOwner,Ka=!1;function _a(t,e,n,r){e.child=t===null?Cxe(e,null,n,r):Xw(e,t.child,n,r)}function M0e(t,e,n,r,i){n=n.render;var o=e.ref;return Fw(e,i),r=G$(t,e,n,r,o,i),n=W$(),t!==null&&!Ka?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,hp(t,e,i)):(Oi&&n&&R$(e),e.flags|=1,_a(t,e,r,i),e.child)}function k0e(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!t7(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Xxe(t,e,o,r,i)):(t=GL(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var u=o.memoizedProps;if(n=n.compare,n=n!==null?n:gT,n(u,r)&&t.ref===e.ref)return hp(t,e,i)}return e.flags|=1,t=zm(o,r),t.ref=e.ref,t.return=e,e.child=t}function Xxe(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(gT(o,r)&&t.ref===e.ref)if(Ka=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Ka=!0);else return e.lanes=t.lanes,hp(t,e,i)}return nW(t,e,n,r,i)}function qxe(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},gi(Sw,gl),gl|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,gi(Sw,gl),gl|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,gi(Sw,gl),gl|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,gi(Sw,gl),gl|=r;return _a(t,e,i,n),e.child}function Yxe(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function nW(t,e,n,r,i){var o=Za(n)?T0:Jo.current;return o=$w(e,o),Fw(e,i),n=G$(t,e,n,r,o,i),r=W$(),t!==null&&!Ka?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,hp(t,e,i)):(Oi&&r&&R$(e),e.flags|=1,_a(t,e,n,i),e.child)}function A0e(t,e,n,r,i){if(Za(n)){var o=!0;dN(e)}else o=!1;if(Fw(e,i),e.stateNode===null)VL(t,e),Sxe(e,n,r),eW(e,n,r,i),r=!0;else if(t===null){var u=e.stateNode,d=e.memoizedProps;u.props=d;var m=u.context,v=n.contextType;typeof v=="object"&&v!==null?v=xu(v):(v=Za(n)?T0:Jo.current,v=$w(e,v));var x=n.getDerivedStateFromProps,E=typeof x=="function"||typeof u.getSnapshotBeforeUpdate=="function";E||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(d!==r||m!==v)&&w0e(e,u,r,v),xm=!1;var M=e.memoizedState;u.state=M,gN(e,r,u,i),m=e.memoizedState,d!==r||M!==m||Ya.current||xm?(typeof x=="function"&&(J9(e,n,x,r),m=e.memoizedState),(d=xm||_0e(e,n,d,r,M,m,v))?(E||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(e.flags|=4194308)):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=m),u.props=r,u.state=m,u.context=v,r=d):(typeof u.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{u=e.stateNode,wxe(t,e),d=e.memoizedProps,v=e.type===e.elementType?d:gc(e.type,d),u.props=v,E=e.pendingProps,M=u.context,m=n.contextType,typeof m=="object"&&m!==null?m=xu(m):(m=Za(n)?T0:Jo.current,m=$w(e,m));var R=n.getDerivedStateFromProps;(x=typeof R=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(d!==E||M!==m)&&w0e(e,u,r,m),xm=!1,M=e.memoizedState,u.state=M,gN(e,r,u,i);var j=e.memoizedState;d!==E||M!==j||Ya.current||xm?(typeof R=="function"&&(J9(e,n,R,r),j=e.memoizedState),(v=xm||_0e(e,n,v,r,M,j,m)||!1)?(x||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(r,j,m),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(r,j,m)),typeof u.componentDidUpdate=="function"&&(e.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof u.componentDidUpdate!="function"||d===t.memoizedProps&&M===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&M===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=j),u.props=r,u.state=j,u.context=m,r=v):(typeof u.componentDidUpdate!="function"||d===t.memoizedProps&&M===t.memoizedState||(e.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||d===t.memoizedProps&&M===t.memoizedState||(e.flags|=1024),r=!1)}return rW(t,e,n,r,o,i)}function rW(t,e,n,r,i,o){Yxe(t,e);var u=(e.flags&128)!==0;if(!r&&!u)return i&&m0e(e,n,!1),hp(t,e,o);r=e.stateNode,iUe.current=e;var d=u&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&u?(e.child=Xw(e,t.child,null,o),e.child=Xw(e,null,d,o)):_a(t,e,d,o),e.memoizedState=r.state,i&&m0e(e,n,!0),e.child}function Zxe(t){var e=t.stateNode;e.pendingContext?f0e(t,e.pendingContext,e.pendingContext!==e.context):e.context&&f0e(t,e.context,!1),z$(t,e.containerInfo)}function I0e(t,e,n,r,i){return Kw(),O$(i),e.flags|=256,_a(t,e,n,r),e.child}var iW={dehydrated:null,treeContext:null,retryLane:0};function sW(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qxe(t,e,n){var r=e.pendingProps,i=Wi.current,o=!1,u=(e.flags&128)!==0,d;if((d=u)||(d=t!==null&&t.memoizedState===null?!1:(i&2)!==0),d?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),gi(Wi,i&1),t===null)return Z9(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(u=r.children,t=r.fallback,o?(r=e.mode,o=e.child,u={mode:"hidden",children:u},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=u):o=yF(u,r,0,null),t=_0(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=sW(n),e.memoizedState=iW,t):X$(e,u));if(i=t.memoizedState,i!==null&&(d=i.dehydrated,d!==null))return sUe(t,e,u,r,d,i,n);if(o){o=r.fallback,u=e.mode,i=t.child,d=i.sibling;var m={mode:"hidden",children:r.children};return!(u&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=m,e.deletions=null):(r=zm(i,m),r.subtreeFlags=i.subtreeFlags&14680064),d!==null?o=zm(d,o):(o=_0(o,u,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,u=t.child.memoizedState,u=u===null?sW(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=t.childLanes&~n,e.memoizedState=iW,r}return o=t.child,t=o.sibling,r=zm(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function X$(t,e){return e=yF({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function j3(t,e,n,r){return r!==null&&O$(r),Xw(e,t.child,null,n),t=X$(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function sUe(t,e,n,r,i,o,u){if(n)return e.flags&256?(e.flags&=-257,r=YH(Error(Xt(422))),j3(t,e,u,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=yF({mode:"visible",children:r.children},i,0,null),o=_0(o,i,u,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Xw(e,t.child,null,u),e.child.memoizedState=sW(u),e.memoizedState=iW,o);if(!(e.mode&1))return j3(t,e,u,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var d=r.dgst;return r=d,o=Error(Xt(419)),r=YH(o,r,void 0),j3(t,e,u,r)}if(d=(u&t.childLanes)!==0,Ka||d){if(r=so,r!==null){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|u)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,dp(t,i),_c(r,t,i,-1))}return e7(),r=YH(Error(Xt(421))),j3(t,e,u,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=yUe.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,yl=Nm(i.nextSibling),bl=e,Oi=!0,yc=null,t!==null&&(du[hu++]=Yh,du[hu++]=Zh,du[hu++]=M0,Yh=t.id,Zh=t.overflow,M0=e),e=X$(e,r.children),e.flags|=4096,e)}function R0e(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Q9(t.return,e,n)}function ZH(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Jxe(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(_a(t,e,r.children,n),r=Wi.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&R0e(t,n,e);else if(t.tag===19)R0e(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(gi(Wi,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&vN(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ZH(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vN(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ZH(e,!0,n,null,o);break;case"together":ZH(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function VL(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function hp(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),A0|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Xt(153));if(e.child!==null){for(t=e.child,n=zm(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zm(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function oUe(t,e,n){switch(e.tag){case 3:Zxe(e),Kw();break;case 5:Pxe(e);break;case 1:Za(e.type)&&dN(e);break;case 4:z$(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;gi(fN,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(gi(Wi,Wi.current&1),e.flags|=128,null):n&e.child.childLanes?Qxe(t,e,n):(gi(Wi,Wi.current&1),t=hp(t,e,n),t!==null?t.sibling:null);gi(Wi,Wi.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Jxe(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),gi(Wi,Wi.current),r)break;return null;case 22:case 23:return e.lanes=0,qxe(t,e,n)}return hp(t,e,n)}var eSe,oW,tSe,nSe;eSe=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oW=function(){};tSe=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,m0(Td.current);var o=null;switch(n){case"input":i=M9(t,i),r=M9(t,r),o=[];break;case"select":i=Yi({},i,{value:void 0}),r=Yi({},r,{value:void 0}),o=[];break;case"textarea":i=I9(t,i),r=I9(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=uN)}D9(n,r);var u;n=null;for(v in i)if(!r.hasOwnProperty(v)&&i.hasOwnProperty(v)&&i[v]!=null)if(v==="style"){var d=i[v];for(u in d)d.hasOwnProperty(u)&&(n||(n={}),n[u]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(uT.hasOwnProperty(v)?o||(o=[]):(o=o||[]).push(v,null));for(v in r){var m=r[v];if(d=i!=null?i[v]:void 0,r.hasOwnProperty(v)&&m!==d&&(m!=null||d!=null))if(v==="style")if(d){for(u in d)!d.hasOwnProperty(u)||m&&m.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in m)m.hasOwnProperty(u)&&d[u]!==m[u]&&(n||(n={}),n[u]=m[u])}else n||(o||(o=[]),o.push(v,n)),n=m;else v==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,d=d?d.__html:void 0,m!=null&&d!==m&&(o=o||[]).push(v,m)):v==="children"?typeof m!="string"&&typeof m!="number"||(o=o||[]).push(v,""+m):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(uT.hasOwnProperty(v)?(m!=null&&v==="onScroll"&&Pi("scroll",t),o||d===m||(o=[])):(o=o||[]).push(v,m))}n&&(o=o||[]).push("style",n);var v=o;(e.updateQueue=v)&&(e.flags|=4)}};nSe=function(t,e,n,r){n!==r&&(e.flags|=4)};function mP(t,e){if(!Oi)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wo(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function aUe(t,e,n){var r=e.pendingProps;switch(D$(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(e),null;case 1:return Za(e.type)&&cN(),Wo(e),null;case 3:return r=e.stateNode,qw(),Ii(Ya),Ii(Jo),j$(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(z3(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yc!==null&&(fW(yc),yc=null))),oW(t,e),Wo(e),null;case 5:V$(e);var i=m0(wT.current);if(n=e.type,t!==null&&e.stateNode!=null)tSe(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Xt(166));return Wo(e),null}if(t=m0(Td.current),z3(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[xd]=e,r[bT]=o,t=(e.mode&1)!==0,n){case"dialog":Pi("cancel",r),Pi("close",r);break;case"iframe":case"object":case"embed":Pi("load",r);break;case"video":case"audio":for(i=0;i<zP.length;i++)Pi(zP[i],r);break;case"source":Pi("error",r);break;case"img":case"image":case"link":Pi("error",r),Pi("load",r);break;case"details":Pi("toggle",r);break;case"input":Vve(r,o),Pi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Pi("invalid",r);break;case"textarea":Hve(r,o),Pi("invalid",r)}D9(n,o),i=null;for(var u in o)if(o.hasOwnProperty(u)){var d=o[u];u==="children"?typeof d=="string"?r.textContent!==d&&(o.suppressHydrationWarning!==!0&&U3(r.textContent,d,t),i=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(o.suppressHydrationWarning!==!0&&U3(r.textContent,d,t),i=["children",""+d]):uT.hasOwnProperty(u)&&d!=null&&u==="onScroll"&&Pi("scroll",r)}switch(n){case"input":I3(r),jve(r,o,!0);break;case"textarea":I3(r),Gve(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=uN)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{u=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=k1e(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=u.createElement(n,{is:r.is}):(t=u.createElement(n),n==="select"&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,n),t[xd]=e,t[bT]=r,eSe(t,e,!1,!1),e.stateNode=t;e:{switch(u=O9(n,r),n){case"dialog":Pi("cancel",t),Pi("close",t),i=r;break;case"iframe":case"object":case"embed":Pi("load",t),i=r;break;case"video":case"audio":for(i=0;i<zP.length;i++)Pi(zP[i],t);i=r;break;case"source":Pi("error",t),i=r;break;case"img":case"image":case"link":Pi("error",t),Pi("load",t),i=r;break;case"details":Pi("toggle",t),i=r;break;case"input":Vve(t,r),i=M9(t,r),Pi("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Yi({},r,{value:void 0}),Pi("invalid",t);break;case"textarea":Hve(t,r),i=I9(t,r),Pi("invalid",t);break;default:i=r}D9(n,i),d=i;for(o in d)if(d.hasOwnProperty(o)){var m=d[o];o==="style"?R1e(t,m):o==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&A1e(t,m)):o==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&cT(t,m):typeof m=="number"&&cT(t,""+m):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(uT.hasOwnProperty(o)?m!=null&&o==="onScroll"&&Pi("scroll",t):m!=null&&y$(t,o,m,u))}switch(n){case"input":I3(t),jve(t,r,!1);break;case"textarea":I3(t),Gve(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Km(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Dw(t,!!r.multiple,o,!1):r.defaultValue!=null&&Dw(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=uN)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wo(e),null;case 6:if(t&&e.stateNode!=null)nSe(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Xt(166));if(n=m0(wT.current),m0(Td.current),z3(e)){if(r=e.stateNode,n=e.memoizedProps,r[xd]=e,(o=r.nodeValue!==n)&&(t=bl,t!==null))switch(t.tag){case 3:U3(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&U3(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xd]=e,e.stateNode=r}return Wo(e),null;case 13:if(Ii(Wi),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Oi&&yl!==null&&e.mode&1&&!(e.flags&128))bxe(),Kw(),e.flags|=98560,o=!1;else if(o=z3(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Xt(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Xt(317));o[xd]=e}else Kw(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wo(e),o=!1}else yc!==null&&(fW(yc),yc=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Wi.current&1?js===0&&(js=3):e7())),e.updateQueue!==null&&(e.flags|=4),Wo(e),null);case 4:return qw(),oW(t,e),t===null&&vT(e.stateNode.containerInfo),Wo(e),null;case 10:return F$(e.type._context),Wo(e),null;case 17:return Za(e.type)&&cN(),Wo(e),null;case 19:if(Ii(Wi),o=e.memoizedState,o===null)return Wo(e),null;if(r=(e.flags&128)!==0,u=o.rendering,u===null)if(r)mP(o,!1);else{if(js!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(u=vN(t),u!==null){for(e.flags|=128,mP(o,!1),r=u.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,t=u.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return gi(Wi,Wi.current&1|2),e.child}t=t.sibling}o.tail!==null&&ws()>Zw&&(e.flags|=128,r=!0,mP(o,!1),e.lanes=4194304)}else{if(!r)if(t=vN(u),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),mP(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!Oi)return Wo(e),null}else 2*ws()-o.renderingStartTime>Zw&&n!==1073741824&&(e.flags|=128,r=!0,mP(o,!1),e.lanes=4194304);o.isBackwards?(u.sibling=e.child,e.child=u):(n=o.last,n!==null?n.sibling=u:e.child=u,o.last=u)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ws(),e.sibling=null,n=Wi.current,gi(Wi,r?n&1|2:n&1),e):(Wo(e),null);case 22:case 23:return J$(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gl&1073741824&&(Wo(e),e.subtreeFlags&6&&(e.flags|=8192)):Wo(e),null;case 24:return null;case 25:return null}throw Error(Xt(156,e.tag))}function lUe(t,e){switch(D$(e),e.tag){case 1:return Za(e.type)&&cN(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qw(),Ii(Ya),Ii(Jo),j$(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return V$(e),null;case 13:if(Ii(Wi),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Xt(340));Kw()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ii(Wi),null;case 4:return qw(),null;case 10:return F$(e.type._context),null;case 22:case 23:return J$(),null;case 24:return null;default:return null}}var H3=!1,Yo=!1,uUe=typeof WeakSet=="function"?WeakSet:Set,yn=null;function xw(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ns(t,e,r)}else n.current=null}function aW(t,e,n){try{n()}catch(r){ns(t,e,r)}}var D0e=!1;function cUe(t,e){if(G9=oN,t=oxe(),I$(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var u=0,d=-1,m=-1,v=0,x=0,E=t,M=null;t:for(;;){for(var R;E!==n||i!==0&&E.nodeType!==3||(d=u+i),E!==o||r!==0&&E.nodeType!==3||(m=u+r),E.nodeType===3&&(u+=E.nodeValue.length),(R=E.firstChild)!==null;)M=E,E=R;for(;;){if(E===t)break t;if(M===n&&++v===i&&(d=u),M===o&&++x===r&&(m=u),(R=E.nextSibling)!==null)break;E=M,M=E.parentNode}E=R}n=d===-1||m===-1?null:{start:d,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(W9={focusedElem:t,selectionRange:n},oN=!1,yn=e;yn!==null;)if(e=yn,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,yn=t;else for(;yn!==null;){e=yn;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var F=j.memoizedProps,B=j.memoizedState,z=e.stateNode,P=z.getSnapshotBeforeUpdate(e.elementType===e.type?F:gc(e.type,F),B);z.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var W=e.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Xt(163))}}catch(Z){ns(e,e.return,Z)}if(t=e.sibling,t!==null){t.return=e.return,yn=t;break}yn=e.return}return j=D0e,D0e=!1,j}function YP(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&aW(e,n,o)}i=i.next}while(i!==r)}}function gF(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lW(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rSe(t){var e=t.alternate;e!==null&&(t.alternate=null,rSe(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xd],delete e[bT],delete e[X9],delete e[$Be],delete e[KBe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iSe(t){return t.tag===5||t.tag===3||t.tag===4}function O0e(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||iSe(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function uW(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=uN));else if(r!==4&&(t=t.child,t!==null))for(uW(t,e,n),t=t.sibling;t!==null;)uW(t,e,n),t=t.sibling}function cW(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(cW(t,e,n),t=t.sibling;t!==null;)cW(t,e,n),t=t.sibling}var Co=null,vc=!1;function Qf(t,e,n){for(n=n.child;n!==null;)sSe(t,e,n),n=n.sibling}function sSe(t,e,n){if(Pd&&typeof Pd.onCommitFiberUnmount=="function")try{Pd.onCommitFiberUnmount(lF,n)}catch{}switch(n.tag){case 5:Yo||xw(n,e);case 6:var r=Co,i=vc;Co=null,Qf(t,e,n),Co=r,vc=i,Co!==null&&(vc?(t=Co,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Co.removeChild(n.stateNode));break;case 18:Co!==null&&(vc?(t=Co,n=n.stateNode,t.nodeType===8?GH(t.parentNode,n):t.nodeType===1&&GH(t,n),fT(t)):GH(Co,n.stateNode));break;case 4:r=Co,i=vc,Co=n.stateNode.containerInfo,vc=!0,Qf(t,e,n),Co=r,vc=i;break;case 0:case 11:case 14:case 15:if(!Yo&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,u=o.destroy;o=o.tag,u!==void 0&&(o&2||o&4)&&aW(n,e,u),i=i.next}while(i!==r)}Qf(t,e,n);break;case 1:if(!Yo&&(xw(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){ns(n,e,d)}Qf(t,e,n);break;case 21:Qf(t,e,n);break;case 22:n.mode&1?(Yo=(r=Yo)||n.memoizedState!==null,Qf(t,e,n),Yo=r):Qf(t,e,n);break;default:Qf(t,e,n)}}function L0e(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new uUe),e.forEach(function(r){var i=bUe.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function dc(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,u=e,d=u;e:for(;d!==null;){switch(d.tag){case 5:Co=d.stateNode,vc=!1;break e;case 3:Co=d.stateNode.containerInfo,vc=!0;break e;case 4:Co=d.stateNode.containerInfo,vc=!0;break e}d=d.return}if(Co===null)throw Error(Xt(160));sSe(o,u,i),Co=null,vc=!1;var m=i.alternate;m!==null&&(m.return=null),i.return=null}catch(v){ns(i,e,v)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)oSe(e,t),e=e.sibling}function oSe(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(dc(e,t),yd(t),r&4){try{YP(3,t,t.return),gF(3,t)}catch(F){ns(t,t.return,F)}try{YP(5,t,t.return)}catch(F){ns(t,t.return,F)}}break;case 1:dc(e,t),yd(t),r&512&&n!==null&&xw(n,n.return);break;case 5:if(dc(e,t),yd(t),r&512&&n!==null&&xw(n,n.return),t.flags&32){var i=t.stateNode;try{cT(i,"")}catch(F){ns(t,t.return,F)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,u=n!==null?n.memoizedProps:o,d=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{d==="input"&&o.type==="radio"&&o.name!=null&&T1e(i,o),O9(d,u);var v=O9(d,o);for(u=0;u<m.length;u+=2){var x=m[u],E=m[u+1];x==="style"?R1e(i,E):x==="dangerouslySetInnerHTML"?A1e(i,E):x==="children"?cT(i,E):y$(i,x,E,v)}switch(d){case"input":k9(i,o);break;case"textarea":M1e(i,o);break;case"select":var M=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var R=o.value;R!=null?Dw(i,!!o.multiple,R,!1):M!==!!o.multiple&&(o.defaultValue!=null?Dw(i,!!o.multiple,o.defaultValue,!0):Dw(i,!!o.multiple,o.multiple?[]:"",!1))}i[bT]=o}catch(F){ns(t,t.return,F)}}break;case 6:if(dc(e,t),yd(t),r&4){if(t.stateNode===null)throw Error(Xt(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(F){ns(t,t.return,F)}}break;case 3:if(dc(e,t),yd(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{fT(e.containerInfo)}catch(F){ns(t,t.return,F)}break;case 4:dc(e,t),yd(t);break;case 13:dc(e,t),yd(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Z$=ws())),r&4&&L0e(t);break;case 22:if(x=n!==null&&n.memoizedState!==null,t.mode&1?(Yo=(v=Yo)||x,dc(e,t),Yo=v):dc(e,t),yd(t),r&8192){if(v=t.memoizedState!==null,(t.stateNode.isHidden=v)&&!x&&t.mode&1)for(yn=t,x=t.child;x!==null;){for(E=yn=x;yn!==null;){switch(M=yn,R=M.child,M.tag){case 0:case 11:case 14:case 15:YP(4,M,M.return);break;case 1:xw(M,M.return);var j=M.stateNode;if(typeof j.componentWillUnmount=="function"){r=M,n=M.return;try{e=r,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(F){ns(r,n,F)}}break;case 5:xw(M,M.return);break;case 22:if(M.memoizedState!==null){F0e(E);continue}}R!==null?(R.return=M,yn=R):F0e(E)}x=x.sibling}e:for(x=null,E=t;;){if(E.tag===5){if(x===null){x=E;try{i=E.stateNode,v?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(d=E.stateNode,m=E.memoizedProps.style,u=m!=null&&m.hasOwnProperty("display")?m.display:null,d.style.display=I1e("display",u))}catch(F){ns(t,t.return,F)}}}else if(E.tag===6){if(x===null)try{E.stateNode.nodeValue=v?"":E.memoizedProps}catch(F){ns(t,t.return,F)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===t)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===t)break e;for(;E.sibling===null;){if(E.return===null||E.return===t)break e;x===E&&(x=null),E=E.return}x===E&&(x=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:dc(e,t),yd(t),r&4&&L0e(t);break;case 21:break;default:dc(e,t),yd(t)}}function yd(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(iSe(n)){var r=n;break e}n=n.return}throw Error(Xt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(cT(i,""),r.flags&=-33);var o=O0e(t);cW(t,o,i);break;case 3:case 4:var u=r.stateNode.containerInfo,d=O0e(t);uW(t,d,u);break;default:throw Error(Xt(161))}}catch(m){ns(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function dUe(t,e,n){yn=t,aSe(t)}function aSe(t,e,n){for(var r=(t.mode&1)!==0;yn!==null;){var i=yn,o=i.child;if(i.tag===22&&r){var u=i.memoizedState!==null||H3;if(!u){var d=i.alternate,m=d!==null&&d.memoizedState!==null||Yo;d=H3;var v=Yo;if(H3=u,(Yo=m)&&!v)for(yn=i;yn!==null;)u=yn,m=u.child,u.tag===22&&u.memoizedState!==null?B0e(i):m!==null?(m.return=u,yn=m):B0e(i);for(;o!==null;)yn=o,aSe(o),o=o.sibling;yn=i,H3=d,Yo=v}N0e(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,yn=o):N0e(t)}}function N0e(t){for(;yn!==null;){var e=yn;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yo||gF(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yo)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:gc(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&b0e(e,o,r);break;case 3:var u=e.updateQueue;if(u!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}b0e(e,u,n)}break;case 5:var d=e.stateNode;if(n===null&&e.flags&4){n=d;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var v=e.alternate;if(v!==null){var x=v.memoizedState;if(x!==null){var E=x.dehydrated;E!==null&&fT(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Xt(163))}Yo||e.flags&512&&lW(e)}catch(M){ns(e,e.return,M)}}if(e===t){yn=null;break}if(n=e.sibling,n!==null){n.return=e.return,yn=n;break}yn=e.return}}function F0e(t){for(;yn!==null;){var e=yn;if(e===t){yn=null;break}var n=e.sibling;if(n!==null){n.return=e.return,yn=n;break}yn=e.return}}function B0e(t){for(;yn!==null;){var e=yn;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{gF(4,e)}catch(m){ns(e,n,m)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(m){ns(e,i,m)}}var o=e.return;try{lW(e)}catch(m){ns(e,o,m)}break;case 5:var u=e.return;try{lW(e)}catch(m){ns(e,u,m)}}}catch(m){ns(e,e.return,m)}if(e===t){yn=null;break}var d=e.sibling;if(d!==null){d.return=e.return,yn=d;break}yn=e.return}}var hUe=Math.ceil,_N=yp.ReactCurrentDispatcher,q$=yp.ReactCurrentOwner,bu=yp.ReactCurrentBatchConfig,Br=0,so=null,As=null,To=0,gl=0,Sw=tg(0),js=0,CT=null,A0=0,vF=0,Y$=0,ZP=null,$a=null,Z$=0,Zw=1/0,Xh=null,wN=!1,dW=null,Bm=null,G3=!1,km=null,xN=0,QP=0,hW=null,jL=-1,HL=0;function Ea(){return Br&6?ws():jL!==-1?jL:jL=ws()}function Um(t){return t.mode&1?Br&2&&To!==0?To&-To:qBe.transition!==null?(HL===0&&(HL=G1e()),HL):(t=ni,t!==0||(t=window.event,t=t===void 0?16:Z1e(t.type)),t):1}function _c(t,e,n,r){if(50<QP)throw QP=0,hW=null,Error(Xt(185));eM(t,n,r),(!(Br&2)||t!==so)&&(t===so&&(!(Br&2)&&(vF|=n),js===4&&Pm(t,To)),Qa(t,r),n===1&&Br===0&&!(e.mode&1)&&(Zw=ws()+500,pF&&ng()))}function Qa(t,e){var n=t.callbackNode;qFe(t,e);var r=sN(t,t===so?To:0);if(r===0)n!==null&&Kve(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Kve(n),e===1)t.tag===0?XBe(U0e.bind(null,t)):gxe(U0e.bind(null,t)),GBe(function(){!(Br&6)&&ng()}),n=null;else{switch(W1e(r)){case 1:n=S$;break;case 4:n=j1e;break;case 16:n=iN;break;case 536870912:n=H1e;break;default:n=iN}n=mSe(n,lSe.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lSe(t,e){if(jL=-1,HL=0,Br&6)throw Error(Xt(327));var n=t.callbackNode;if(Bw()&&t.callbackNode!==n)return null;var r=sN(t,t===so?To:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=SN(t,r);else{e=r;var i=Br;Br|=2;var o=cSe();(so!==t||To!==e)&&(Xh=null,Zw=ws()+500,b0(t,e));do try{mUe();break}catch(d){uSe(t,d)}while(1);N$(),_N.current=o,Br=i,As!==null?e=0:(so=null,To=0,e=js)}if(e!==0){if(e===2&&(i=U9(t),i!==0&&(r=i,e=pW(t,i))),e===1)throw n=CT,b0(t,0),Pm(t,r),Qa(t,ws()),n;if(e===6)Pm(t,r);else{if(i=t.current.alternate,!(r&30)&&!pUe(i)&&(e=SN(t,r),e===2&&(o=U9(t),o!==0&&(r=o,e=pW(t,o))),e===1))throw n=CT,b0(t,0),Pm(t,r),Qa(t,ws()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Xt(345));case 2:l0(t,$a,Xh);break;case 3:if(Pm(t,r),(r&130023424)===r&&(e=Z$+500-ws(),10<e)){if(sN(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ea(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=K9(l0.bind(null,t,$a,Xh),e);break}l0(t,$a,Xh);break;case 4:if(Pm(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var u=31-bc(r);o=1<<u,u=e[u],u>i&&(i=u),r&=~o}if(r=i,r=ws()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hUe(r/1960))-r,10<r){t.timeoutHandle=K9(l0.bind(null,t,$a,Xh),r);break}l0(t,$a,Xh);break;case 5:l0(t,$a,Xh);break;default:throw Error(Xt(329))}}}return Qa(t,ws()),t.callbackNode===n?lSe.bind(null,t):null}function pW(t,e){var n=ZP;return t.current.memoizedState.isDehydrated&&(b0(t,e).flags|=256),t=SN(t,e),t!==2&&(e=$a,$a=n,e!==null&&fW(e)),t}function fW(t){$a===null?$a=t:$a.push.apply($a,t)}function pUe(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!wc(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pm(t,e){for(e&=~Y$,e&=~vF,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bc(e),r=1<<n;t[n]=-1,e&=~r}}function U0e(t){if(Br&6)throw Error(Xt(327));Bw();var e=sN(t,0);if(!(e&1))return Qa(t,ws()),null;var n=SN(t,e);if(t.tag!==0&&n===2){var r=U9(t);r!==0&&(e=r,n=pW(t,r))}if(n===1)throw n=CT,b0(t,0),Pm(t,e),Qa(t,ws()),n;if(n===6)throw Error(Xt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,l0(t,$a,Xh),Qa(t,ws()),null}function Q$(t,e){var n=Br;Br|=1;try{return t(e)}finally{Br=n,Br===0&&(Zw=ws()+500,pF&&ng())}}function I0(t){km!==null&&km.tag===0&&!(Br&6)&&Bw();var e=Br;Br|=1;var n=bu.transition,r=ni;try{if(bu.transition=null,ni=1,t)return t()}finally{ni=r,bu.transition=n,Br=e,!(Br&6)&&ng()}}function J$(){gl=Sw.current,Ii(Sw)}function b0(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,HBe(n)),As!==null)for(n=As.return;n!==null;){var r=n;switch(D$(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cN();break;case 3:qw(),Ii(Ya),Ii(Jo),j$();break;case 5:V$(r);break;case 4:qw();break;case 13:Ii(Wi);break;case 19:Ii(Wi);break;case 10:F$(r.type._context);break;case 22:case 23:J$()}n=n.return}if(so=t,As=t=zm(t.current,null),To=gl=e,js=0,CT=null,Y$=vF=A0=0,$a=ZP=null,f0!==null){for(e=0;e<f0.length;e++)if(n=f0[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var u=o.next;o.next=i,r.next=u}n.pending=r}f0=null}return t}function uSe(t,e){do{var n=As;try{if(N$(),UL.current=bN,yN){for(var r=Xi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}yN=!1}if(k0=0,to=Bs=Xi=null,qP=!1,xT=0,q$.current=null,n===null||n.return===null){js=1,CT=e,As=null;break}e:{var o=t,u=n.return,d=n,m=e;if(e=To,d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var v=m,x=d,E=x.tag;if(!(x.mode&1)&&(E===0||E===11||E===15)){var M=x.alternate;M?(x.updateQueue=M.updateQueue,x.memoizedState=M.memoizedState,x.lanes=M.lanes):(x.updateQueue=null,x.memoizedState=null)}var R=P0e(u);if(R!==null){R.flags&=-257,T0e(R,u,d,o,e),R.mode&1&&C0e(o,v,e),e=R,m=v;var j=e.updateQueue;if(j===null){var F=new Set;F.add(m),e.updateQueue=F}else j.add(m);break e}else{if(!(e&1)){C0e(o,v,e),e7();break e}m=Error(Xt(426))}}else if(Oi&&d.mode&1){var B=P0e(u);if(B!==null){!(B.flags&65536)&&(B.flags|=256),T0e(B,u,d,o,e),O$(Yw(m,d));break e}}o=m=Yw(m,d),js!==4&&(js=2),ZP===null?ZP=[o]:ZP.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var z=$xe(o,m,e);y0e(o,z);break e;case 1:d=m;var P=o.type,W=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Bm===null||!Bm.has(W)))){o.flags|=65536,e&=-e,o.lanes|=e;var Z=Kxe(o,d,e);y0e(o,Z);break e}}o=o.return}while(o!==null)}hSe(n)}catch(ge){e=ge,As===n&&n!==null&&(As=n=n.return);continue}break}while(1)}function cSe(){var t=_N.current;return _N.current=bN,t===null?bN:t}function e7(){(js===0||js===3||js===2)&&(js=4),so===null||!(A0&268435455)&&!(vF&268435455)||Pm(so,To)}function SN(t,e){var n=Br;Br|=2;var r=cSe();(so!==t||To!==e)&&(Xh=null,b0(t,e));do try{fUe();break}catch(i){uSe(t,i)}while(1);if(N$(),Br=n,_N.current=r,As!==null)throw Error(Xt(261));return so=null,To=0,js}function fUe(){for(;As!==null;)dSe(As)}function mUe(){for(;As!==null&&!zFe();)dSe(As)}function dSe(t){var e=fSe(t.alternate,t,gl);t.memoizedProps=t.pendingProps,e===null?hSe(t):As=e,q$.current=null}function hSe(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=lUe(n,e),n!==null){n.flags&=32767,As=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{js=6,As=null;return}}else if(n=aUe(n,e,gl),n!==null){As=n;return}if(e=e.sibling,e!==null){As=e;return}As=e=t}while(e!==null);js===0&&(js=5)}function l0(t,e,n){var r=ni,i=bu.transition;try{bu.transition=null,ni=1,gUe(t,e,n,r)}finally{bu.transition=i,ni=r}return null}function gUe(t,e,n,r){do Bw();while(km!==null);if(Br&6)throw Error(Xt(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Xt(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(YFe(t,o),t===so&&(As=so=null,To=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||G3||(G3=!0,mSe(iN,function(){return Bw(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=bu.transition,bu.transition=null;var u=ni;ni=1;var d=Br;Br|=4,q$.current=null,cUe(t,n),oSe(n,t),NBe(W9),oN=!!G9,W9=G9=null,t.current=n,dUe(n),VFe(),Br=d,ni=u,bu.transition=o}else t.current=n;if(G3&&(G3=!1,km=t,xN=i),o=t.pendingLanes,o===0&&(Bm=null),GFe(n.stateNode),Qa(t,ws()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wN)throw wN=!1,t=dW,dW=null,t;return xN&1&&t.tag!==0&&Bw(),o=t.pendingLanes,o&1?t===hW?QP++:(QP=0,hW=t):QP=0,ng(),null}function Bw(){if(km!==null){var t=W1e(xN),e=bu.transition,n=ni;try{if(bu.transition=null,ni=16>t?16:t,km===null)var r=!1;else{if(t=km,km=null,xN=0,Br&6)throw Error(Xt(331));var i=Br;for(Br|=4,yn=t.current;yn!==null;){var o=yn,u=o.child;if(yn.flags&16){var d=o.deletions;if(d!==null){for(var m=0;m<d.length;m++){var v=d[m];for(yn=v;yn!==null;){var x=yn;switch(x.tag){case 0:case 11:case 15:YP(8,x,o)}var E=x.child;if(E!==null)E.return=x,yn=E;else for(;yn!==null;){x=yn;var M=x.sibling,R=x.return;if(rSe(x),x===v){yn=null;break}if(M!==null){M.return=R,yn=M;break}yn=R}}}var j=o.alternate;if(j!==null){var F=j.child;if(F!==null){j.child=null;do{var B=F.sibling;F.sibling=null,F=B}while(F!==null)}}yn=o}}if(o.subtreeFlags&2064&&u!==null)u.return=o,yn=u;else e:for(;yn!==null;){if(o=yn,o.flags&2048)switch(o.tag){case 0:case 11:case 15:YP(9,o,o.return)}var z=o.sibling;if(z!==null){z.return=o.return,yn=z;break e}yn=o.return}}var P=t.current;for(yn=P;yn!==null;){u=yn;var W=u.child;if(u.subtreeFlags&2064&&W!==null)W.return=u,yn=W;else e:for(u=P;yn!==null;){if(d=yn,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:gF(9,d)}}catch(ge){ns(d,d.return,ge)}if(d===u){yn=null;break e}var Z=d.sibling;if(Z!==null){Z.return=d.return,yn=Z;break e}yn=d.return}}if(Br=i,ng(),Pd&&typeof Pd.onPostCommitFiberRoot=="function")try{Pd.onPostCommitFiberRoot(lF,t)}catch{}r=!0}return r}finally{ni=n,bu.transition=e}}return!1}function z0e(t,e,n){e=Yw(n,e),e=$xe(t,e,1),t=Fm(t,e,1),e=Ea(),t!==null&&(eM(t,1,e),Qa(t,e))}function ns(t,e,n){if(t.tag===3)z0e(t,t,n);else for(;e!==null;){if(e.tag===3){z0e(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bm===null||!Bm.has(r))){t=Yw(n,t),t=Kxe(e,t,1),e=Fm(e,t,1),t=Ea(),e!==null&&(eM(e,1,t),Qa(e,t));break}}e=e.return}}function vUe(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ea(),t.pingedLanes|=t.suspendedLanes&n,so===t&&(To&n)===n&&(js===4||js===3&&(To&130023424)===To&&500>ws()-Z$?b0(t,0):Y$|=n),Qa(t,e)}function pSe(t,e){e===0&&(t.mode&1?(e=O3,O3<<=1,!(O3&130023424)&&(O3=4194304)):e=1);var n=Ea();t=dp(t,e),t!==null&&(eM(t,e,n),Qa(t,n))}function yUe(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pSe(t,n)}function bUe(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Xt(314))}r!==null&&r.delete(e),pSe(t,n)}var fSe;fSe=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ya.current)Ka=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ka=!1,oUe(t,e,n);Ka=!!(t.flags&131072)}else Ka=!1,Oi&&e.flags&1048576&&vxe(e,pN,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;VL(t,e),t=e.pendingProps;var i=$w(e,Jo.current);Fw(e,n),i=G$(null,e,r,t,i,n);var o=W$();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Za(r)?(o=!0,dN(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,U$(e),i.updater=fF,e.stateNode=i,i._reactInternals=e,eW(e,r,t,n),e=rW(null,e,r,!0,o,n)):(e.tag=0,Oi&&o&&R$(e),_a(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(VL(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=wUe(r),t=gc(r,t),i){case 0:e=nW(null,e,r,t,n);break e;case 1:e=A0e(null,e,r,t,n);break e;case 11:e=M0e(null,e,r,t,n);break e;case 14:e=k0e(null,e,r,gc(r.type,t),n);break e}throw Error(Xt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gc(r,i),nW(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gc(r,i),A0e(t,e,r,i,n);case 3:e:{if(Zxe(e),t===null)throw Error(Xt(387));r=e.pendingProps,o=e.memoizedState,i=o.element,wxe(t,e),gN(e,r,null,n);var u=e.memoizedState;if(r=u.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Yw(Error(Xt(423)),e),e=I0e(t,e,r,n,i);break e}else if(r!==i){i=Yw(Error(Xt(424)),e),e=I0e(t,e,r,n,i);break e}else for(yl=Nm(e.stateNode.containerInfo.firstChild),bl=e,Oi=!0,yc=null,n=Cxe(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kw(),r===i){e=hp(t,e,n);break e}_a(t,e,r,n)}e=e.child}return e;case 5:return Pxe(e),t===null&&Z9(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,u=i.children,$9(r,i)?u=null:o!==null&&$9(r,o)&&(e.flags|=32),Yxe(t,e),_a(t,e,u,n),e.child;case 6:return t===null&&Z9(e),null;case 13:return Qxe(t,e,n);case 4:return z$(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xw(e,null,r,n):_a(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gc(r,i),M0e(t,e,r,i,n);case 7:return _a(t,e,e.pendingProps,n),e.child;case 8:return _a(t,e,e.pendingProps.children,n),e.child;case 12:return _a(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,u=i.value,gi(fN,r._currentValue),r._currentValue=u,o!==null)if(wc(o.value,u)){if(o.children===i.children&&!Ya.current){e=hp(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var d=o.dependencies;if(d!==null){u=o.child;for(var m=d.firstContext;m!==null;){if(m.context===r){if(o.tag===1){m=ip(-1,n&-n),m.tag=2;var v=o.updateQueue;if(v!==null){v=v.shared;var x=v.pending;x===null?m.next=m:(m.next=x.next,x.next=m),v.pending=m}}o.lanes|=n,m=o.alternate,m!==null&&(m.lanes|=n),Q9(o.return,n,e),d.lanes|=n;break}m=m.next}}else if(o.tag===10)u=o.type===e.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(Xt(341));u.lanes|=n,d=u.alternate,d!==null&&(d.lanes|=n),Q9(u,n,e),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===e){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}_a(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fw(e,n),i=xu(i),r=r(i),e.flags|=1,_a(t,e,r,n),e.child;case 14:return r=e.type,i=gc(r,e.pendingProps),i=gc(r.type,i),k0e(t,e,r,i,n);case 15:return Xxe(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gc(r,i),VL(t,e),e.tag=1,Za(r)?(t=!0,dN(e)):t=!1,Fw(e,n),Sxe(e,r,i),eW(e,r,i,n),rW(null,e,r,!0,t,n);case 19:return Jxe(t,e,n);case 22:return qxe(t,e,n)}throw Error(Xt(156,e.tag))};function mSe(t,e){return V1e(t,e)}function _Ue(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gu(t,e,n,r){return new _Ue(t,e,n,r)}function t7(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wUe(t){if(typeof t=="function")return t7(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_$)return 11;if(t===w$)return 14}return 2}function zm(t,e){var n=t.alternate;return n===null?(n=gu(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function GL(t,e,n,r,i,o){var u=2;if(r=t,typeof t=="function")t7(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case pw:return _0(n.children,i,o,e);case b$:u=8,i|=8;break;case E9:return t=gu(12,n,e,i|2),t.elementType=E9,t.lanes=o,t;case C9:return t=gu(13,n,e,i),t.elementType=C9,t.lanes=o,t;case P9:return t=gu(19,n,e,i),t.elementType=P9,t.lanes=o,t;case E1e:return yF(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case x1e:u=10;break e;case S1e:u=9;break e;case _$:u=11;break e;case w$:u=14;break e;case wm:u=16,r=null;break e}throw Error(Xt(130,t==null?t:typeof t,""))}return e=gu(u,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function _0(t,e,n,r){return t=gu(7,t,r,e),t.lanes=n,t}function yF(t,e,n,r){return t=gu(22,t,r,e),t.elementType=E1e,t.lanes=n,t.stateNode={isHidden:!1},t}function QH(t,e,n){return t=gu(6,t,null,e),t.lanes=n,t}function JH(t,e,n){return e=gu(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xUe(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=DH(0),this.expirationTimes=DH(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=DH(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function n7(t,e,n,r,i,o,u,d,m){return t=new xUe(t,e,n,d,m),e===1?(e=1,o===!0&&(e|=8)):e=0,o=gu(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},U$(o),t}function SUe(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hw,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function gSe(t){if(!t)return Xm;t=t._reactInternals;e:{if(G0(t)!==t||t.tag!==1)throw Error(Xt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Za(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Xt(171))}if(t.tag===1){var n=t.type;if(Za(n))return mxe(t,n,e)}return e}function vSe(t,e,n,r,i,o,u,d,m){return t=n7(n,r,!0,t,i,o,u,d,m),t.context=gSe(null),n=t.current,r=Ea(),i=Um(n),o=ip(r,i),o.callback=e??null,Fm(n,o,i),t.current.lanes=i,eM(t,i,r),Qa(t,r),t}function bF(t,e,n,r){var i=e.current,o=Ea(),u=Um(i);return n=gSe(n),e.context===null?e.context=n:e.pendingContext=n,e=ip(o,u),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Fm(i,e,u),t!==null&&(_c(t,i,u,o),BL(t,i,u)),u}function EN(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function V0e(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function r7(t,e){V0e(t,e),(t=t.alternate)&&V0e(t,e)}function EUe(){return null}var ySe=typeof reportError=="function"?reportError:function(t){console.error(t)};function i7(t){this._internalRoot=t}_F.prototype.render=i7.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Xt(409));bF(t,e,null,null)};_F.prototype.unmount=i7.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;I0(function(){bF(null,t,null,null)}),e[cp]=null}};function _F(t){this._internalRoot=t}_F.prototype.unstable_scheduleHydration=function(t){if(t){var e=X1e();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cm.length&&e!==0&&e<Cm[n].priority;n++);Cm.splice(n,0,t),n===0&&Y1e(t)}};function s7(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wF(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function j0e(){}function CUe(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var v=EN(u);o.call(v)}}var u=vSe(e,r,t,0,null,!1,!1,"",j0e);return t._reactRootContainer=u,t[cp]=u.current,vT(t.nodeType===8?t.parentNode:t),I0(),u}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var d=r;r=function(){var v=EN(m);d.call(v)}}var m=n7(t,0,!1,null,null,!1,!1,"",j0e);return t._reactRootContainer=m,t[cp]=m.current,vT(t.nodeType===8?t.parentNode:t),I0(function(){bF(e,m,n,r)}),m}function xF(t,e,n,r,i){var o=n._reactRootContainer;if(o){var u=o;if(typeof i=="function"){var d=i;i=function(){var m=EN(u);d.call(m)}}bF(e,u,t,i)}else u=CUe(n,e,t,i,r);return EN(u)}$1e=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=UP(e.pendingLanes);n!==0&&(E$(e,n|1),Qa(e,ws()),!(Br&6)&&(Zw=ws()+500,ng()))}break;case 13:I0(function(){var r=dp(t,1);if(r!==null){var i=Ea();_c(r,t,1,i)}}),r7(t,1)}};C$=function(t){if(t.tag===13){var e=dp(t,134217728);if(e!==null){var n=Ea();_c(e,t,134217728,n)}r7(t,134217728)}};K1e=function(t){if(t.tag===13){var e=Um(t),n=dp(t,e);if(n!==null){var r=Ea();_c(n,t,e,r)}r7(t,e)}};X1e=function(){return ni};q1e=function(t,e){var n=ni;try{return ni=t,e()}finally{ni=n}};N9=function(t,e,n){switch(e){case"input":if(k9(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=hF(r);if(!i)throw Error(Xt(90));P1e(r),k9(r,i)}}}break;case"textarea":M1e(t,n);break;case"select":e=n.value,e!=null&&Dw(t,!!n.multiple,e,!1)}};L1e=Q$;N1e=I0;var PUe={usingClientEntryPoint:!1,Events:[nM,vw,hF,D1e,O1e,Q$]},gP={findFiberByHostInstance:p0,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},TUe={bundleType:gP.bundleType,version:gP.version,rendererPackageName:gP.rendererPackageName,rendererConfig:gP.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yp.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=U1e(t),t===null?null:t.stateNode},findFiberByHostInstance:gP.findFiberByHostInstance||EUe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var W3=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!W3.isDisabled&&W3.supportsFiber)try{lF=W3.inject(TUe),Pd=W3}catch{}}Cl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PUe;Cl.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s7(e))throw Error(Xt(200));return SUe(t,e,null,n)};Cl.createRoot=function(t,e){if(!s7(t))throw Error(Xt(299));var n=!1,r="",i=ySe;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=n7(t,1,!1,null,null,n,!1,r,i),t[cp]=e.current,vT(t.nodeType===8?t.parentNode:t),new i7(e)};Cl.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Xt(188)):(t=Object.keys(t).join(","),Error(Xt(268,t)));return t=U1e(e),t=t===null?null:t.stateNode,t};Cl.flushSync=function(t){return I0(t)};Cl.hydrate=function(t,e,n){if(!wF(e))throw Error(Xt(200));return xF(null,t,e,!0,n)};Cl.hydrateRoot=function(t,e,n){if(!s7(t))throw Error(Xt(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",u=ySe;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(u=n.onRecoverableError)),e=vSe(e,null,t,1,n??null,i,!1,o,u),t[cp]=e.current,vT(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new _F(e)};Cl.render=function(t,e,n){if(!wF(e))throw Error(Xt(200));return xF(null,t,e,!1,n)};Cl.unmountComponentAtNode=function(t){if(!wF(t))throw Error(Xt(40));return t._reactRootContainer?(I0(function(){xF(null,null,t,!1,function(){t._reactRootContainer=null,t[cp]=null})}),!0):!1};Cl.unstable_batchedUpdates=Q$;Cl.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wF(n))throw Error(Xt(200));if(t==null||t._reactInternals===void 0)throw Error(Xt(38));return xF(t,e,n,!1,r)};Cl.version="18.2.0-next-9e3b772b8-20220608";function bSe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bSe)}catch(t){console.error(t)}}bSe(),v1e.exports=Cl;var MUe=v1e.exports,H0e=MUe;x9.createRoot=H0e.createRoot,x9.hydrateRoot=H0e.hydrateRoot;function $3(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var CN={exports:{}},Ut={};(function(t){var e=Object.defineProperty,n=Object.defineProperties,r=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,d=(ee,_e,ze)=>_e in ee?e(ee,_e,{enumerable:!0,configurable:!0,writable:!0,value:ze}):ee[_e]=ze,m=(ee,_e)=>{for(var ze in _e||(_e={}))o.call(_e,ze)&&d(ee,ze,_e[ze]);if(i)for(var ze of i(_e))u.call(_e,ze)&&d(ee,ze,_e[ze]);return ee},v=(ee,_e)=>n(ee,r(_e)),x=ee=>e(ee,"__esModule",{value:!0}),E=(ee,_e)=>{x(ee);for(var ze in _e)e(ee,ze,{get:_e[ze],enumerable:!0})};E(t,{Atom:()=>Pg,PointerProxy:()=>$1,Ticker:()=>$d,getPointerParts:()=>jd,isPointer:()=>Ll,isPrism:()=>Gd,iterateAndCountTicks:()=>W1,iterateOver:()=>Tg,pointer:()=>Mu,pointerToPrism:()=>Oc,prism:()=>Dc,val:()=>Dp});var M=Array.isArray,R=M,j=typeof Gi=="object"&&Gi&&Gi.Object===Object&&Gi,F=j,B=typeof self=="object"&&self&&self.Object===Object&&self,z=F||B||Function("return this")(),P=z,W=P.Symbol,Z=W,ge=Object.prototype,X=ge.hasOwnProperty,pe=ge.toString,ye=Z?Z.toStringTag:void 0;function te(ee){var _e=X.call(ee,ye),ze=ee[ye];try{ee[ye]=void 0;var xt=!0}catch{}var Gn=pe.call(ee);return xt&&(_e?ee[ye]=ze:delete ee[ye]),Gn}var ie=te,Pe=Object.prototype,_t=Pe.toString;function Tt(ee){return _t.call(ee)}var de=Tt,ot="[object Null]",Me="[object Undefined]",wt=Z?Z.toStringTag:void 0;function Ge(ee){return ee==null?ee===void 0?Me:ot:wt&&wt in Object(ee)?ie(ee):de(ee)}var it=Ge;function Qe(ee){return ee!=null&&typeof ee=="object"}var ut=Qe,je="[object Symbol]";function bt(ee){return typeof ee=="symbol"||ut(ee)&&it(ee)==je}var Fe=bt,at=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ot=/^\w*$/;function Gt(ee,_e){if(R(ee))return!1;var ze=typeof ee;return ze=="number"||ze=="symbol"||ze=="boolean"||ee==null||Fe(ee)?!0:Ot.test(ee)||!at.test(ee)||_e!=null&&ee in Object(_e)}var tn=Gt;function Kt(ee){var _e=typeof ee;return ee!=null&&(_e=="object"||_e=="function")}var Tn=Kt,nn="[object AsyncFunction]",He="[object Function]",jn="[object GeneratorFunction]",an="[object Proxy]";function dn(ee){if(!Tn(ee))return!1;var _e=it(ee);return _e==He||_e==jn||_e==nn||_e==an}var on=dn,zr=P["__core-js_shared__"],kn=zr,Se=function(){var ee=/[^.]+$/.exec(kn&&kn.keys&&kn.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}();function he(ee){return!!Se&&Se in ee}var dt=he,Nt=Function.prototype,Ft=Nt.toString;function At(ee){if(ee!=null){try{return Ft.call(ee)}catch{}try{return ee+""}catch{}}return""}var gn=At,Jt=/[\\^$.*+?()[\]{}|]/g,ln=/^\[object .+?Constructor\]$/,Dn=Function.prototype,Xn=Object.prototype,Bt=Dn.toString,gr=Xn.hasOwnProperty,sr=RegExp("^"+Bt.call(gr).replace(Jt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Cn(ee){if(!Tn(ee)||dt(ee))return!1;var _e=on(ee)?sr:ln;return _e.test(gn(ee))}var Mn=Cn;function rn(ee,_e){return ee==null?void 0:ee[_e]}var Un=rn;function Ae(ee,_e){var ze=Un(ee,_e);return Mn(ze)?ze:void 0}var Wt=Ae,Yt=Wt(Object,"create"),pn=Yt;function Te(){this.__data__=pn?pn(null):{},this.size=0}var Ht=Te;function Dt(ee){var _e=this.has(ee)&&delete this.__data__[ee];return this.size-=_e?1:0,_e}var fn=Dt,On="__lodash_hash_undefined__",ur=Object.prototype,or=ur.hasOwnProperty;function hr(ee){var _e=this.__data__;if(pn){var ze=_e[ee];return ze===On?void 0:ze}return or.call(_e,ee)?_e[ee]:void 0}var Pr=hr,Zn=Object.prototype,ri=Zn.hasOwnProperty;function Qi(ee){var _e=this.__data__;return pn?_e[ee]!==void 0:ri.call(_e,ee)}var Pc=Qi,Ld="__lodash_hash_undefined__";function Cu(ee,_e){var ze=this.__data__;return this.size+=this.has(ee)?0:1,ze[ee]=pn&&_e===void 0?Ld:_e,this}var _p=Cu;function ta(ee){var _e=-1,ze=ee==null?0:ee.length;for(this.clear();++_e<ze;){var xt=ee[_e];this.set(xt[0],xt[1])}}ta.prototype.clear=Ht,ta.prototype.delete=fn,ta.prototype.get=Pr,ta.prototype.has=Pc,ta.prototype.set=_p;var Tc=ta;function Nd(){this.__data__=[],this.size=0}var lg=Nd;function el(ee,_e){return ee===_e||ee!==ee&&_e!==_e}var wp=el;function be(ee,_e){for(var ze=ee.length;ze--;)if(wp(ee[ze][0],_e))return ze;return-1}var Ze=be,yt=Array.prototype,gt=yt.splice;function pt(ee){var _e=this.__data__,ze=Ze(_e,ee);if(ze<0)return!1;var xt=_e.length-1;return ze==xt?_e.pop():gt.call(_e,ze,1),--this.size,!0}var un=pt;function Sn(ee){var _e=this.__data__,ze=Ze(_e,ee);return ze<0?void 0:_e[ze][1]}var Nn=Sn;function Hn(ee){return Ze(this.__data__,ee)>-1}var rr=Hn;function qn(ee,_e){var ze=this.__data__,xt=Ze(ze,ee);return xt<0?(++this.size,ze.push([ee,_e])):ze[xt][1]=_e,this}var Fn=qn;function wr(ee){var _e=-1,ze=ee==null?0:ee.length;for(this.clear();++_e<ze;){var xt=ee[_e];this.set(xt[0],xt[1])}}wr.prototype.clear=lg,wr.prototype.delete=un,wr.prototype.get=Nn,wr.prototype.has=rr,wr.prototype.set=Fn;var Ds=wr,ci=Wt(P,"Map"),Io=ci;function Vr(){this.size=0,this.__data__={hash:new Tc,map:new(Io||Ds),string:new Tc}}var Kn=Vr;function Mc(ee){var _e=typeof ee;return _e=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?ee!=="__proto__":ee===null}var jr=Mc;function Ro(ee,_e){var ze=ee.__data__;return jr(_e)?ze[typeof _e=="string"?"string":"hash"]:ze.map}var Pu=Ro;function oo(ee){var _e=Pu(this,ee).delete(ee);return this.size-=_e?1:0,_e}var Il=oo;function yi(ee){return Pu(this,ee).get(ee)}var Ra=yi;function kc(ee){return Pu(this,ee).has(ee)}var Os=kc;function Ac(ee,_e){var ze=Pu(this,ee),xt=ze.size;return ze.set(ee,_e),this.size+=ze.size==xt?0:1,this}var Fd=Ac;function Da(ee){var _e=-1,ze=ee==null?0:ee.length;for(this.clear();++_e<ze;){var xt=ee[_e];this.set(xt[0],xt[1])}}Da.prototype.clear=Kn,Da.prototype.delete=Il,Da.prototype.get=Ra,Da.prototype.has=Os,Da.prototype.set=Fd;var ug=Da,xp="Expected a function";function cg(ee,_e){if(typeof ee!="function"||_e!=null&&typeof _e!="function")throw new TypeError(xp);var ze=function(){var xt=arguments,Gn=_e?_e.apply(this,xt):xt[0],Mr=ze.cache;if(Mr.has(Gn))return Mr.get(Gn);var Ss=ee.apply(this,xt);return ze.cache=Mr.set(Gn,Ss)||Mr,Ss};return ze.cache=new(cg.Cache||ug),ze}cg.Cache=ug;var P1=cg,Rl=500;function Bd(ee){var _e=P1(ee,function(xt){return ze.size===Rl&&ze.clear(),xt}),ze=_e.cache;return _e}var T1=Bd,Ud=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,J0=/\\(\\)?/g,ey=T1(function(ee){var _e=[];return ee.charCodeAt(0)===46&&_e.push(""),ee.replace(Ud,function(ze,xt,Gn,Mr){_e.push(Gn?Mr.replace(J0,"$1"):xt||ze)}),_e}),Dl=ey;function ty(ee,_e){for(var ze=-1,xt=ee==null?0:ee.length,Gn=Array(xt);++ze<xt;)Gn[ze]=_e(ee[ze],ze,ee);return Gn}var M1=ty,zd=1/0,dg=Z?Z.prototype:void 0,hg=dg?dg.toString:void 0;function pg(ee){if(typeof ee=="string")return ee;if(R(ee))return M1(ee,pg)+"";if(Fe(ee))return hg?hg.call(ee):"";var _e=ee+"";return _e=="0"&&1/ee==-zd?"-0":_e}var ny=pg;function ry(ee){return ee==null?"":ny(ee)}var iy=ry;function sy(ee,_e){return R(ee)?ee:tn(ee,_e)?[ee]:Dl(iy(ee))}var k1=sy,Ic=1/0;function Vd(ee){if(typeof ee=="string"||Fe(ee))return ee;var _e=ee+"";return _e=="0"&&1/ee==-Ic?"-0":_e}var A1=Vd;function fg(ee,_e){_e=k1(_e,ee);for(var ze=0,xt=_e.length;ee!=null&&ze<xt;)ee=ee[A1(_e[ze++])];return ze&&ze==xt?ee:void 0}var Ol=fg;function Tu(ee,_e,ze){var xt=ee==null?void 0:Ol(ee,_e);return xt===void 0?ze:xt}var oy=Tu;function Sp(ee,_e){return function(ze){return ee(_e(ze))}}var I1=Sp,R1=I1(Object.getPrototypeOf,Object),ay=R1,D1="[object Object]",O1=Function.prototype,ly=Object.prototype,uy=O1.toString,cy=ly.hasOwnProperty,mg=uy.call(Object);function dy(ee){if(!ut(ee)||it(ee)!=D1)return!1;var _e=ay(ee);if(_e===null)return!0;var ze=cy.call(_e,"constructor")&&_e.constructor;return typeof ze=="function"&&ze instanceof ze&&uy.call(ze)==mg}var hy=dy;function py(ee){var _e=ee==null?0:ee.length;return _e?ee[_e-1]:void 0}var gg=py,Ep=new WeakMap,Rc=new WeakMap,fy=Symbol("pointerMeta"),L1={get(ee,_e){if(_e===fy)return Ep.get(ee);let ze=Rc.get(ee);ze||(ze=new Map,Rc.set(ee,ze));const xt=ze.get(_e);if(xt!==void 0)return xt;const Gn=Ep.get(ee),Mr=Hd({root:Gn.root,path:[...Gn.path,_e]});return ze.set(_e,Mr),Mr}},Oa=ee=>ee[fy],jd=ee=>{const{root:_e,path:ze}=Oa(ee);return{root:_e,path:ze}};function Hd(ee){var _e;const ze={root:ee.root,path:(_e=ee.path)!=null?_e:[]},xt={};return Ep.set(xt,ze),new Proxy(xt,L1)}var Mu=Hd,Ll=ee=>ee&&!!Oa(ee);function vg(ee,_e,ze){return _e.length===0?ze(ee):ku(ee,_e,ze)}var ku=(ee,_e,ze)=>{if(_e.length===0)return ze(ee);if(Array.isArray(ee)){let[xt,...Gn]=_e;xt=parseInt(String(xt),10),isNaN(xt)&&(xt=0);const Mr=ee[xt],Ss=ku(Mr,Gn,ze);if(Mr===Ss)return ee;const na=[...ee];return na.splice(xt,1,Ss),na}else if(typeof ee=="object"&&ee!==null){const[xt,...Gn]=_e,Mr=ee[xt],Ss=ku(Mr,Gn,ze);return Mr===Ss?ee:v(m({},ee),{[xt]:Ss})}else{const[xt,...Gn]=_e;return{[xt]:ku(void 0,Gn,ze)}}},ls=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const ee=this._head;if(ee)return this._head=ee.next,ee.data}push(ee){const _e={next:this._head,data:ee};this._head=_e}};function Gd(ee){return!!(ee&&ee.isPrism&&ee.isPrism===!0)}function Cp(){const ee=()=>{},_e=new ls,ze=ee;return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{_e.push(ze)},stopIgnoringDependencies:()=>{_e.peek()!==ze||_e.pop()},reportResolutionStart:Lc=>{const Nc=_e.peek();Nc&&Nc(Lc),_e.push(ze)},reportResolutionEnd:Lc=>{_e.pop()},pushCollector:Lc=>{_e.push(Lc)},popCollector:Lc=>{if(_e.peek()!==Lc)throw new Error("Popped collector is not on top of the stack");_e.pop()}}}function N1(){const ee="__dataverse_discoveryMechanism_sharedStack",_e=typeof window<"u"?window:typeof Gi<"u"?Gi:{};if(_e){const ze=_e[ee];if(ze&&typeof ze=="object"&&ze.type==="Dataverse_discoveryMechanism")return ze;{const xt=Cp();return _e[ee]=xt,xt}}else return Cp()}var{startIgnoringDependencies:Au,stopIgnoringDependencies:Nl,reportResolutionEnd:yg,reportResolutionStart:F1,pushCollector:Pp,popCollector:B1}=N1(),my=()=>{},gy=class{constructor(ee,_e){this._fn=ee,this._prismInstance=_e,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new Tp(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=ze=>{this._possiblyStaleDeps.add(ze),this._markAsStale()};for(const ze of this._dependencies)ze._addDependent(this._reactToDependencyGoingStale);Au(),this.getValue(),Nl()}get hasDependents(){return this._dependents.size>0}removeDependent(ee){this._dependents.delete(ee)}addDependent(ee){this._dependents.add(ee)}destroy(){for(const ee of this._dependencies)ee._removeDependent(this._reactToDependencyGoingStale);_g(this._scope)}getValue(){if(!this._isFresh){const ee=this._recalculate();this._lastValue=ee,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let ee;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let xt=!1;Au();for(const Gn of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(Gn)!==Gn.getValue()){xt=!0;break}if(Nl(),this._possiblyStaleDeps.clear(),!xt)return this._lastValue}const _e=new Set;this._cacheOfDendencyValues.clear();const ze=xt=>{_e.add(xt),this._addDependency(xt)};Pp(ze),us.push(this._scope);try{ee=this._fn()}catch(xt){console.error(xt)}finally{us.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}B1(ze);for(const xt of this._dependencies)_e.has(xt)||this._removeDependency(xt);this._dependencies=_e,Au();for(const xt of _e)this._cacheOfDendencyValues.set(xt,xt.getValue());return Nl(),ee}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const ee of this._dependents)ee(this._prismInstance)}}_addDependency(ee){this._dependencies.has(ee)||(this._dependencies.add(ee),ee._addDependent(this._reactToDependencyGoingStale))}_removeDependency(ee){this._dependencies.has(ee)&&(this._dependencies.delete(ee),ee._removeDependent(this._reactToDependencyGoingStale))}},bg={},U1=class{constructor(ee){this._fn=ee,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(ee,_e,ze=!1){const xt=()=>{ee.onThisOrNextTick(Mr)};let Gn=bg;const Mr=()=>{const na=this.getValue();na!==Gn&&(Gn=na,_e(na))};return this._addDependent(xt),ze&&(Gn=this.getValue(),_e(Gn)),()=>{this._removeDependent(xt),ee.offThisOrNextTick(Mr),ee.offNextTick(Mr)}}onStale(ee){const _e=()=>{this._removeDependent(ze)},ze=()=>ee();return this._addDependent(ze),_e}keepHot(){return this.onStale(()=>{})}_addDependent(ee){this._state.hot||this._goHot(),this._state.handle.addDependent(ee)}_goHot(){const ee=new gy(this._fn,this);this._state={hot:!0,handle:ee}}_removeDependent(ee){const _e=this._state;if(!_e.hot)return;const ze=_e.handle;ze.removeDependent(ee),ze.hasDependents||(this._state={hot:!1,handle:void 0},ze.destroy())}getValue(){F1(this);const ee=this._state;let _e;return ee.hot?_e=ee.handle.getValue():_e=Wd(this._fn),yg(this),_e}},Tp=class{constructor(ee){this._hotHandle=ee,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(ee,_e){let ze=this._refs.get(ee);if(ze!==void 0)return ze;{const xt={current:_e};return this._refs.set(ee,xt),xt}}effect(ee,_e,ze){let xt=this.effects.get(ee);xt===void 0&&(xt={cleanup:my,deps:void 0},this.effects.set(ee,xt)),xg(xt.deps,ze)&&(xt.cleanup(),Au(),xt.cleanup=Mp(_e,my).value,Nl(),xt.deps=ze)}memo(ee,_e,ze){let xt=this.memos.get(ee);return xt===void 0&&(xt={cachedValue:null,deps:void 0},this.memos.set(ee,xt)),xg(xt.deps,ze)&&(Au(),xt.cachedValue=Mp(_e,void 0).value,Nl(),xt.deps=ze),xt.cachedValue}state(ee,_e){const{value:ze,setValue:xt}=this.memo("state/"+ee,()=>{const Gn={current:_e};return{value:Gn,setValue:Ss=>{Gn.current=Ss,this._hotHandle.forceStale()}}},[]);return[ze.current,xt]}sub(ee){return this.subs[ee]||(this.subs[ee]=new Tp(this._hotHandle)),this.subs[ee]}cleanupEffects(){for(const ee of this.effects.values())Mp(ee.cleanup,void 0);this.effects.clear()}source(ee,_e){const ze="$$source/blah";return this.effect(ze,()=>ee(()=>{this._hotHandle.forceStale()}),[ee]),_e()}};function _g(ee){for(const _e of Object.values(ee.subs))_g(_e);ee.cleanupEffects()}function Mp(ee,_e){try{return{value:ee(),ok:!0}}catch(ze){return setTimeout(function(){throw ze}),{value:_e,ok:!1}}}var us=new ls;function z1(ee,_e){const ze=us.peek();if(!ze)throw new Error("prism.ref() is called outside of a prism() call.");return ze.ref(ee,_e)}function wg(ee,_e,ze){const xt=us.peek();if(!xt)throw new Error("prism.effect() is called outside of a prism() call.");return xt.effect(ee,_e,ze)}function xg(ee,_e){if(ee===void 0||_e===void 0)return!0;const ze=ee.length;if(ze!==_e.length)return!0;for(let xt=0;xt<ze;xt++)if(ee[xt]!==_e[xt])return!0;return!1}function Sg(ee,_e,ze){const xt=us.peek();if(!xt)throw new Error("prism.memo() is called outside of a prism() call.");return xt.memo(ee,_e,ze)}function cs(ee,_e){const ze=us.peek();if(!ze)throw new Error("prism.state() is called outside of a prism() call.");return ze.state(ee,_e)}function kp(){if(!us.peek())throw new Error("The parent function is called outside of a prism() call.")}function V1(ee,_e){const ze=us.peek();if(!ze)throw new Error("prism.scope() is called outside of a prism() call.");const xt=ze.sub(ee);us.push(xt);const Gn=Mp(_e,void 0).value;return us.pop(),Gn}function Ap(ee,_e,ze){return Sg(ee,()=>bi(_e),ze).getValue()}function Ip(){return!!us.peek()}function j1(ee,_e){const ze=us.peek();if(!ze)throw new Error("prism.source() is called outside of a prism() call.");return ze.source(ee,_e)}var bi=ee=>new U1(ee),Fl=class{effect(ee,_e,ze){console.warn("prism.effect() does not run in cold prisms")}memo(ee,_e,ze){return _e()}state(ee,_e){return[_e,()=>{}]}ref(ee,_e){return{current:_e}}sub(ee){return new Fl}source(ee,_e){return _e()}};function Wd(ee){const _e=new Fl;us.push(_e);let ze;try{ze=ee()}catch(xt){console.error(xt)}finally{us.pop()!==_e&&console.warn("The Prism hook stack has slipped. This is a bug.")}return ze}bi.ref=z1,bi.effect=wg,bi.memo=Sg,bi.ensurePrism=kp,bi.state=cs,bi.scope=V1,bi.sub=Ap,bi.inPrism=Ip,bi.source=j1;var Dc=bi,Eg;(function(ee){ee[ee.Dict=0]="Dict",ee[ee.Array=1]="Array",ee[ee.Other=2]="Other"})(Eg||(Eg={}));var Hr=ee=>Array.isArray(ee)?1:hy(ee)?0:2,Cg=(ee,_e,ze=Hr(ee))=>ze===0&&typeof _e=="string"||ze===1&&H1(_e)?ee[_e]:void 0,H1=ee=>{const _e=typeof ee=="number"?ee:parseInt(ee,10);return!isNaN(_e)&&_e>=0&&_e<1/0&&(_e|0)===_e},Rp=class{constructor(ee,_e){this._parent=ee,this._path=_e,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(ee){this.identityChangeListeners.add(ee)}removeIdentityChangeListener(ee){this.identityChangeListeners.delete(ee),this._checkForGC()}removeChild(ee){this.children.delete(ee),this._checkForGC()}getChild(ee){return this.children.get(ee)}getOrCreateChild(ee){let _e=this.children.get(ee);return _e||(_e=_e=new Rp(this,this._path.concat([ee])),this.children.set(ee,_e)),_e}_checkForGC(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(gg(this._path))}},Pg=class{constructor(ee){this.$$isPointerToPrismProvider=!0,this.pointer=Mu({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(_e,ze)=>{const{path:xt}=jd(_e),Gn=this._getOrCreateScopeForPath(xt);return Gn.identityChangeListeners.add(ze),()=>{Gn.identityChangeListeners.delete(ze)}},this._currentState=ee,this._rootScope=new Rp(void 0,[])}set(ee){const _e=this._currentState;this._currentState=ee,this._checkUpdates(this._rootScope,_e,ee)}get(){return this._currentState}getByPointer(ee){const _e=Ll(ee)?ee:ee(this.pointer),ze=jd(_e).path;return this._getIn(ze)}_getIn(ee){return ee.length===0?this.get():oy(this.get(),ee)}reduce(ee){this.set(ee(this.get()))}reduceByPointer(ee,_e){const ze=Ll(ee)?ee:ee(this.pointer),xt=jd(ze).path,Gn=vg(this.get(),xt,_e);this.set(Gn)}setByPointer(ee,_e){this.reduceByPointer(ee,()=>_e)}_checkUpdates(ee,_e,ze){if(_e===ze)return;for(const Mr of ee.identityChangeListeners)Mr(ze);if(ee.children.size===0)return;const xt=Hr(_e),Gn=Hr(ze);if(!(xt===2&&xt===Gn))for(const[Mr,Ss]of ee.children){const na=Cg(_e,Mr,xt),by=Cg(ze,Mr,Gn);this._checkUpdates(Ss,na,by)}}_getOrCreateScopeForPath(ee){let _e=this._rootScope;for(const ze of ee)_e=_e.getOrCreateChild(ze);return _e}pointerToPrism(ee){const{path:_e}=jd(ee),ze=Gn=>this._onPointerValueChange(ee,Gn),xt=()=>this._getIn(_e);return Dc(()=>Dc.source(ze,xt))}},vy=new WeakMap;function G1(ee){return typeof ee=="object"&&ee!==null&&ee.$$isPointerToPrismProvider===!0}var Oc=ee=>{const _e=Oa(ee);let ze=vy.get(_e);if(!ze){const xt=_e.root;if(!G1(xt))throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");ze=xt.pointerToPrism(ee),vy.set(_e,ze)}return ze},Dp=ee=>Ll(ee)?Oc(ee).getValue():Gd(ee)?ee.getValue():ee;function*W1(ee){let _e;if(Ll(ee))_e=Oc(ee);else if(Gd(ee))_e=ee;else throw new Error("Only pointers and prisms are supported");let ze=0;const xt=_e.onStale(()=>{ze++});try{for(;;){const Gn=ze;ze=0,yield{value:_e.getValue(),ticks:Gn}}}finally{xt()}}var yy=60*3,$d=class{constructor(ee){this._conf=ee,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(ee){this._scheduledForThisOrNextTick.add(ee),this._dormant&&this._goActive()}onNextTick(ee){this._scheduledForNextTick.add(ee),this._dormant&&this._goActive()}offThisOrNextTick(ee){this._scheduledForThisOrNextTick.delete(ee)}offNextTick(ee){this._scheduledForNextTick.delete(ee)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var ee,_e;this._dormant&&(this._dormant=!1,(_e=(ee=this._conf)==null?void 0:ee.onActive)==null||_e.call(ee))}_goDormant(){var ee,_e;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,(_e=(ee=this._conf)==null?void 0:ee.onDormant)==null||_e.call(ee))}tick(ee=performance.now()){if(this.__ticks++,!this._dormant&&this._scheduledForNextTick.size===0&&this._scheduledForThisOrNextTick.size===0&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=yy)){this._goDormant();return}this._ticking=!0,this._timeAtCurrentTick=ee;for(const _e of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(_e);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(ee){const _e=this.time;if(ee>10&&console.warn("_tick() recursing for 10 times"),ee>100)throw new Error("Maximum recursion limit for _tick()");const ze=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const xt of ze)xt(_e);if(this._scheduledForThisOrNextTick.size>0)return this._tick(ee+1)}};function*Tg(ee){let _e;if(Ll(ee))_e=Oc(ee);else if(Gd(ee))_e=ee;else throw new Error("Only pointers and prisms are supported");const ze=new $d,xt=_e.onChange(ze,Gn=>{});try{for(;;)ze.tick(),yield _e.getValue()}finally{xt()}}var $1=class{constructor(ee){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new Pg(ee),this.pointer=Mu({root:this,path:[]})}setPointer(ee){this._currentPointerBox.set(ee)}pointerToPrism(ee){const{path:_e}=Oa(ee);return Dc(()=>{const ze=this._currentPointerBox.prism.getValue(),xt=_e.reduce((Gn,Mr)=>Gn[Mr],ze);return Dp(xt)})}}})(Ut);CN.exports;(function(t,e){var n=Object.create,r=Object.freeze,i=Object.defineProperty,o=Object.defineProperties,u=Object.getOwnPropertyDescriptor,d=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertyNames,v=Object.getOwnPropertySymbols,x=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,R=(s,a)=>{if(a=Symbol[s])return a;throw Error("Symbol."+s+" is not defined")},j=(s,a,l)=>a in s?i(s,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):s[a]=l,F=(s,a)=>{for(var l in a||(a={}))E.call(a,l)&&j(s,l,a[l]);if(v)for(var l of v(a))M.call(a,l)&&j(s,l,a[l]);return s},B=(s,a)=>o(s,d(a)),z=(s,a)=>{var l={};for(var h in s)E.call(s,h)&&a.indexOf(h)<0&&(l[h]=s[h]);if(s!=null&&v)for(var h of v(s))a.indexOf(h)<0&&M.call(s,h)&&(l[h]=s[h]);return l},P=(s,a)=>()=>(s&&(a=s(s=0)),a),W=(s,a)=>()=>(a||s((a={exports:{}}).exports,a),a.exports),Z=(s,a)=>{for(var l in a)i(s,l,{get:a[l],enumerable:!0})},ge=(s,a,l,h)=>{if(a&&typeof a=="object"||typeof a=="function")for(let f of m(a))!E.call(s,f)&&f!==l&&i(s,f,{get:()=>a[f],enumerable:!(h=u(a,f))||h.enumerable});return s},X=(s,a,l)=>(l=s!=null?n(x(s)):{},ge(a||!s||!s.__esModule?i(l,"default",{value:s,enumerable:!0}):l,s)),pe=s=>ge(i({},"__esModule",{value:!0}),s),ye=(s,a,l)=>(j(s,typeof a!="symbol"?a+"":a,l),l),te=(s,a)=>r(i(s,"raw",{value:r(a||s.slice())})),ie=(s,a,l)=>new Promise((h,f)=>{var g=S=>{try{_(l.next(S))}catch(C){f(C)}},b=S=>{try{_(l.throw(S))}catch(C){f(C)}},_=S=>S.done?h(S.value):Promise.resolve(S.value).then(g,b);_((l=l.apply(s,a)).next())}),Pe=function(s,a){this[0]=s,this[1]=a},_t=s=>{var a=s[R("asyncIterator")],l=!1,h,f={};return a==null?(a=s[R("iterator")](),h=g=>f[g]=b=>a[g](b)):(a=a.call(s),h=g=>f[g]=b=>{if(l){if(l=!1,g==="throw")throw b;return b}return l=!0,{done:!1,value:new Pe(new Promise(_=>{var S=a[g](b);if(!(S instanceof Object))throw TypeError("Object expected");_(S)}),1)}}),f[R("iterator")]=()=>f,h("next"),"throw"in a?h("throw"):f.throw=g=>{throw g},"return"in a&&h("return"),f};function Tt(s){ot=s}function de(){return ot}var ot,Me=P(()=>{});function wt(s,a,l=[]){if(typeof s=="object"&&s){if(Ge(s)||it(s)){a(s,l);return}for(let[h,f]of Object.entries(s))wt(f,a,[...l,h])}else{if(s==null)return;a(s,l)}}var Ge,it,Qe=P(()=>{Ge=s=>typeof s=="object"&&s!==null&&Object.hasOwnProperty.call(s,"type")&&s.type==="image"&&Object.hasOwnProperty.call(s,"id")&&typeof s.id=="string"&&s.id!=="",it=s=>typeof s=="object"&&s!==null&&Object.hasOwnProperty.call(s,"r")&&Object.hasOwnProperty.call(s,"g")&&Object.hasOwnProperty.call(s,"b")&&Object.hasOwnProperty.call(s,"a")&&typeof s.r=="number"&&typeof s.g=="number"&&typeof s.b=="number"&&typeof s.a=="number"});function ut(s){return a=>typeof a=="object"&&!!a&&a.type===s}var je,bt,Fe,at,Ot,Gt,tn,Kt=P(()=>{je=ut("Theatre_Project"),bt=ut("Theatre_Sheet"),Fe=ut("Theatre_SheetTemplate"),at=ut("Theatre_SheetObject"),Ot=ut("Theatre_SheetObjectTemplate"),Gt=ut("Theatre_Sheet_PublicAPI"),tn=ut("Theatre_SheetObject_PublicAPI")}),Tn,nn,He=P(()=>{Tn=typeof Gi=="object"&&Gi&&Gi.Object===Object&&Gi,nn=Tn}),jn,an,dn,on=P(()=>{He(),jn=typeof self=="object"&&self&&self.Object===Object&&self,an=nn||jn||Function("return this")(),dn=an}),zr,kn,Se=P(()=>{on(),zr=dn.Symbol,kn=zr});function he(s){var a=Nt.call(s,At),l=s[At];try{s[At]=void 0;var h=!0}catch{}var f=Ft.call(s);return h&&(a?s[At]=l:delete s[At]),f}var dt,Nt,Ft,At,gn,Jt=P(()=>{Se(),dt=Object.prototype,Nt=dt.hasOwnProperty,Ft=dt.toString,At=kn?kn.toStringTag:void 0,gn=he});function ln(s){return Xn.call(s)}var Dn,Xn,Bt,gr=P(()=>{Dn=Object.prototype,Xn=Dn.toString,Bt=ln});function sr(s){return s==null?s===void 0?Mn:Cn:rn&&rn in Object(s)?gn(s):Bt(s)}var Cn,Mn,rn,Un,Ae=P(()=>{Se(),Jt(),gr(),Cn="[object Null]",Mn="[object Undefined]",rn=kn?kn.toStringTag:void 0,Un=sr});function Wt(s){return s!=null&&typeof s=="object"}var Yt,pn=P(()=>{Yt=Wt});function Te(s){return typeof s=="symbol"||Yt(s)&&Un(s)==Ht}var Ht,Dt,fn=P(()=>{Ae(),pn(),Ht="[object Symbol]",Dt=Te});function On(s,a){for(var l=-1,h=s==null?0:s.length,f=Array(h);++l<h;)f[l]=a(s[l],l,s);return f}var ur,or=P(()=>{ur=On}),hr,Pr,Zn=P(()=>{hr=Array.isArray,Pr=hr});function ri(s){if(typeof s=="string")return s;if(Pr(s))return ur(s,ri)+"";if(Dt(s))return Ld?Ld.call(s):"";var a=s+"";return a=="0"&&1/s==-Qi?"-0":a}var Qi,Pc,Ld,Cu,_p=P(()=>{Se(),or(),Zn(),fn(),Qi=1/0,Pc=kn?kn.prototype:void 0,Ld=Pc?Pc.toString:void 0,Cu=ri});function ta(s){for(var a=s.length;a--&&Tc.test(s.charAt(a)););return a}var Tc,Nd,lg=P(()=>{Tc=/\s/,Nd=ta});function el(s){return s&&s.slice(0,Nd(s)+1).replace(wp,"")}var wp,be,Ze=P(()=>{lg(),wp=/^\s+/,be=el});function yt(s){var a=typeof s;return s!=null&&(a=="object"||a=="function")}var gt,pt=P(()=>{gt=yt});function un(s){if(typeof s=="number")return s;if(Dt(s))return Sn;if(gt(s)){var a=typeof s.valueOf=="function"?s.valueOf():s;s=gt(a)?a+"":a}if(typeof s!="string")return s===0?s:+s;s=be(s);var l=Hn.test(s);return l||rr.test(s)?qn(s.slice(2),l?2:8):Nn.test(s)?Sn:+s}var Sn,Nn,Hn,rr,qn,Fn,wr=P(()=>{Ze(),pt(),fn(),Sn=0/0,Nn=/^[-+]0x[0-9a-f]+$/i,Hn=/^0b[01]+$/i,rr=/^0o[0-7]+$/i,qn=parseInt,Fn=un});function Ds(s){if(!s)return s===0?s:0;if(s=Fn(s),s===ci||s===-ci){var a=s<0?-1:1;return a*Io}return s===s?s:0}var ci,Io,Vr,Kn=P(()=>{wr(),ci=1/0,Io=17976931348623157e292,Vr=Ds});function Mc(s){var a=Vr(s),l=a%1;return a===a?l?a-l:a:0}var jr,Ro=P(()=>{Kn(),jr=Mc});function Pu(s){return s}var oo,Il=P(()=>{oo=Pu});function yi(s){if(!gt(s))return!1;var a=Un(s);return a==kc||a==Os||a==Ra||a==Ac}var Ra,kc,Os,Ac,Fd,Da=P(()=>{Ae(),pt(),Ra="[object AsyncFunction]",kc="[object Function]",Os="[object GeneratorFunction]",Ac="[object Proxy]",Fd=yi}),ug,xp,cg=P(()=>{on(),ug=dn["__core-js_shared__"],xp=ug});function P1(s){return!!Rl&&Rl in s}var Rl,Bd,T1=P(()=>{cg(),Rl=function(){var s=/[^.]+$/.exec(xp&&xp.keys&&xp.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Bd=P1});function Ud(s){if(s!=null){try{return ey.call(s)}catch{}try{return s+""}catch{}}return""}var J0,ey,Dl,ty=P(()=>{J0=Function.prototype,ey=J0.toString,Dl=Ud});function M1(s){if(!gt(s)||Bd(s))return!1;var a=Fd(s)?iy:dg;return a.test(Dl(s))}var zd,dg,hg,pg,ny,ry,iy,sy,k1=P(()=>{Da(),T1(),pt(),ty(),zd=/[\\^$.*+?()[\]{}|]/g,dg=/^\[object .+?Constructor\]$/,hg=Function.prototype,pg=Object.prototype,ny=hg.toString,ry=pg.hasOwnProperty,iy=RegExp("^"+ny.call(ry).replace(zd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sy=M1});function Ic(s,a){return s==null?void 0:s[a]}var Vd,A1=P(()=>{Vd=Ic});function fg(s,a){var l=Vd(s,a);return sy(l)?l:void 0}var Ol,Tu=P(()=>{k1(),A1(),Ol=fg}),oy,Sp,I1=P(()=>{Tu(),on(),oy=Ol(dn,"WeakMap"),Sp=oy});function R1(s,a,l){switch(l.length){case 0:return s.call(a);case 1:return s.call(a,l[0]);case 2:return s.call(a,l[0],l[1]);case 3:return s.call(a,l[0],l[1],l[2])}return s.apply(a,l)}var ay,D1=P(()=>{ay=R1});function O1(){}var ly,uy=P(()=>{ly=O1});function cy(s,a){var l=-1,h=s.length;for(a||(a=Array(h));++l<h;)a[l]=s[l];return a}var mg,dy=P(()=>{mg=cy});function hy(s){var a=0,l=0;return function(){var h=Ep(),f=gg-(h-l);if(l=h,f>0){if(++a>=py)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}var py,gg,Ep,Rc,fy=P(()=>{py=800,gg=16,Ep=Date.now,Rc=hy});function L1(s){return function(){return s}}var Oa,jd=P(()=>{Oa=L1}),Hd,Mu,Ll=P(()=>{Tu(),Hd=function(){try{var s=Ol(Object,"defineProperty");return s({},"",{}),s}catch{}}(),Mu=Hd}),vg,ku,ls=P(()=>{jd(),Ll(),Il(),vg=Mu?function(s,a){return Mu(s,"toString",{configurable:!0,enumerable:!1,value:Oa(a),writable:!0})}:oo,ku=vg}),Gd,Cp,N1=P(()=>{ls(),fy(),Gd=Rc(ku),Cp=Gd});function Au(s,a,l,h){for(var f=s.length,g=l+(h?1:-1);h?g--:++g<f;)if(a(s[g],g,s))return g;return-1}var Nl,yg=P(()=>{Nl=Au});function F1(s){return s!==s}var Pp,B1=P(()=>{Pp=F1});function my(s,a,l){for(var h=l-1,f=s.length;++h<f;)if(s[h]===a)return h;return-1}var gy,bg=P(()=>{gy=my});function U1(s,a,l){return a===a?gy(s,a,l):Nl(s,Pp,l)}var Tp,_g=P(()=>{yg(),B1(),bg(),Tp=U1});function Mp(s,a){var l=s==null?0:s.length;return!!l&&Tp(s,a,0)>-1}var us,z1=P(()=>{_g(),us=Mp});function wg(s,a){var l=typeof s;return a=a??xg,!!a&&(l=="number"||l!="symbol"&&Sg.test(s))&&s>-1&&s%1==0&&s<a}var xg,Sg,cs,kp=P(()=>{xg=9007199254740991,Sg=/^(?:0|[1-9]\d*)$/,cs=wg});function V1(s,a,l){a=="__proto__"&&Mu?Mu(s,a,{configurable:!0,enumerable:!0,value:l,writable:!0}):s[a]=l}var Ap,Ip=P(()=>{Ll(),Ap=V1});function j1(s,a){return s===a||s!==s&&a!==a}var bi,Fl=P(()=>{bi=j1});function Wd(s,a,l){var h=s[a];(!(Eg.call(s,a)&&bi(h,l))||l===void 0&&!(a in s))&&Ap(s,a,l)}var Dc,Eg,Hr,Cg=P(()=>{Ip(),Fl(),Dc=Object.prototype,Eg=Dc.hasOwnProperty,Hr=Wd});function H1(s,a,l){return a=Rp(a===void 0?s.length-1:a,0),function(){for(var h=arguments,f=-1,g=Rp(h.length-a,0),b=Array(g);++f<g;)b[f]=h[a+f];f=-1;for(var _=Array(a+1);++f<a;)_[f]=h[f];return _[a]=l(b),ay(s,this,_)}}var Rp,Pg,vy=P(()=>{D1(),Rp=Math.max,Pg=H1});function G1(s,a){return Cp(Pg(s,a,oo),s+"")}var Oc,Dp=P(()=>{Il(),vy(),N1(),Oc=G1});function W1(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=yy}var yy,$d,Tg=P(()=>{yy=9007199254740991,$d=W1});function $1(s){return s!=null&&$d(s.length)&&!Fd(s)}var ee,_e=P(()=>{Da(),Tg(),ee=$1});function ze(s,a,l){if(!gt(l))return!1;var h=typeof a;return(h=="number"?ee(l)&&cs(a,l.length):h=="string"&&a in l)?bi(l[a],s):!1}var xt,Gn=P(()=>{Fl(),_e(),kp(),pt(),xt=ze});function Mr(s){var a=s&&s.constructor,l=typeof a=="function"&&a.prototype||Ss;return s===l}var Ss,na,by=P(()=>{Ss=Object.prototype,na=Mr});function Lc(s,a){for(var l=-1,h=Array(s);++l<s;)h[l]=a(l);return h}var Nc,AM=P(()=>{Nc=Lc});function iB(s){return Yt(s)&&Un(s)==IM}var IM,K1,sB=P(()=>{Ae(),pn(),IM="[object Arguments]",K1=iB}),X1,RM,DM,Mg,_y,q1=P(()=>{sB(),pn(),X1=Object.prototype,RM=X1.hasOwnProperty,DM=X1.propertyIsEnumerable,Mg=K1(function(){return arguments}())?K1:function(s){return Yt(s)&&RM.call(s,"callee")&&!DM.call(s,"callee")},_y=Mg});function Y1(){return!1}var OM,LM=P(()=>{OM=Y1}),Z1,Q1,wy,J1,NM,FM,xy,ex=P(()=>{on(),LM(),Z1=e&&!e.nodeType&&e,Q1=Z1&&!0&&t&&!t.nodeType&&t,wy=Q1&&Q1.exports===Z1,J1=wy?dn.Buffer:void 0,NM=J1?J1.isBuffer:void 0,FM=NM||OM,xy=FM});function BM(s){return Yt(s)&&$d(s.length)&&!!ii[Un(s)]}var UM,zM,VM,tx,jM,HM,nx,rx,GM,ix,WM,$M,kg,KM,XM,qM,YM,ZM,QM,JM,ek,tk,nk,rk,ii,ik,oB=P(()=>{Ae(),Tg(),pn(),UM="[object Arguments]",zM="[object Array]",VM="[object Boolean]",tx="[object Date]",jM="[object Error]",HM="[object Function]",nx="[object Map]",rx="[object Number]",GM="[object Object]",ix="[object RegExp]",WM="[object Set]",$M="[object String]",kg="[object WeakMap]",KM="[object ArrayBuffer]",XM="[object DataView]",qM="[object Float32Array]",YM="[object Float64Array]",ZM="[object Int8Array]",QM="[object Int16Array]",JM="[object Int32Array]",ek="[object Uint8Array]",tk="[object Uint8ClampedArray]",nk="[object Uint16Array]",rk="[object Uint32Array]",ii={},ii[qM]=ii[YM]=ii[ZM]=ii[QM]=ii[JM]=ii[ek]=ii[tk]=ii[nk]=ii[rk]=!0,ii[UM]=ii[zM]=ii[KM]=ii[VM]=ii[XM]=ii[tx]=ii[jM]=ii[HM]=ii[nx]=ii[rx]=ii[GM]=ii[ix]=ii[WM]=ii[$M]=ii[kg]=!1,ik=BM});function aB(s){return function(a){return s(a)}}var Sy,sx=P(()=>{Sy=aB}),ox,Op,sk,Ey,ok,ax,lB=P(()=>{He(),ox=e&&!e.nodeType&&e,Op=ox&&!0&&t&&!t.nodeType&&t,sk=Op&&Op.exports===ox,Ey=sk&&nn.process,ok=function(){try{var s=Op&&Op.require&&Op.require("util").types;return s||Ey&&Ey.binding&&Ey.binding("util")}catch{}}(),ax=ok}),Qr,ak,lx,lk=P(()=>{oB(),sx(),lB(),Qr=ax&&ax.isTypedArray,ak=Qr?Sy(Qr):ik,lx=ak});function ux(s,a){var l=Pr(s),h=!l&&_y(s),f=!l&&!h&&xy(s),g=!l&&!h&&!f&&lx(s),b=l||h||f||g,_=b?Nc(s.length,String):[],S=_.length;for(var C in s)(a||Lp.call(s,C))&&!(b&&(C=="length"||f&&(C=="offset"||C=="parent")||g&&(C=="buffer"||C=="byteLength"||C=="byteOffset")||cs(C,S)))&&_.push(C);return _}var cx,Lp,uk,dx=P(()=>{AM(),q1(),Zn(),ex(),kp(),lk(),cx=Object.prototype,Lp=cx.hasOwnProperty,uk=ux});function uB(s,a){return function(l){return s(a(l))}}var Fc,hx=P(()=>{Fc=uB}),ck,px,cB=P(()=>{hx(),ck=Fc(Object.keys,Object),px=ck});function dB(s){if(!na(s))return px(s);var a=[];for(var l in Object(s))fx.call(s,l)&&l!="constructor"&&a.push(l);return a}var dk,fx,hk,pk=P(()=>{by(),cB(),dk=Object.prototype,fx=dk.hasOwnProperty,hk=dB});function hB(s){return ee(s)?uk(s):hk(s)}var Cy,mx=P(()=>{dx(),pk(),_e(),Cy=hB});function pB(s,a){if(Pr(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||Dt(s)?!0:mk.test(s)||!fk.test(s)||a!=null&&s in Object(a)}var fk,mk,Py,Kd=P(()=>{Zn(),fn(),fk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mk=/^\w*$/,Py=pB}),gk,Np,Ty=P(()=>{Tu(),gk=Ol(Object,"create"),Np=gk});function fB(){this.__data__=Np?Np(null):{},this.size=0}var vk,mB=P(()=>{Ty(),vk=fB});function gB(s){var a=this.has(s)&&delete this.__data__[s];return this.size-=a?1:0,a}var My,vB=P(()=>{My=gB});function yk(s){var a=this.__data__;if(Np){var l=a[s];return l===bk?void 0:l}return _k.call(a,s)?a[s]:void 0}var bk,ky,_k,wk,yB=P(()=>{Ty(),bk="__lodash_hash_undefined__",ky=Object.prototype,_k=ky.hasOwnProperty,wk=yk});function xk(s){var a=this.__data__;return Np?a[s]!==void 0:Ek.call(a,s)}var Sk,Ek,Ck,bB=P(()=>{Ty(),Sk=Object.prototype,Ek=Sk.hasOwnProperty,Ck=xk});function _B(s,a){var l=this.__data__;return this.size+=this.has(s)?0:1,l[s]=Np&&a===void 0?gx:a,this}var gx,Pk,wB=P(()=>{Ty(),gx="__lodash_hash_undefined__",Pk=_B});function Fp(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var h=s[a];this.set(h[0],h[1])}}var vx,xB=P(()=>{mB(),vB(),yB(),bB(),wB(),Fp.prototype.clear=vk,Fp.prototype.delete=My,Fp.prototype.get=wk,Fp.prototype.has=Ck,Fp.prototype.set=Pk,vx=Fp});function SB(){this.__data__=[],this.size=0}var Tk,EB=P(()=>{Tk=SB});function CB(s,a){for(var l=s.length;l--;)if(bi(s[l][0],a))return l;return-1}var Ag,Ay=P(()=>{Fl(),Ag=CB});function yx(s){var a=this.__data__,l=Ag(a,s);if(l<0)return!1;var h=a.length-1;return l==h?a.pop():kk.call(a,l,1),--this.size,!0}var Mk,kk,bx,PB=P(()=>{Ay(),Mk=Array.prototype,kk=Mk.splice,bx=yx});function TB(s){var a=this.__data__,l=Ag(a,s);return l<0?void 0:a[l][1]}var Ak,MB=P(()=>{Ay(),Ak=TB});function kB(s){return Ag(this.__data__,s)>-1}var Ik,_x=P(()=>{Ay(),Ik=kB});function wx(s,a){var l=this.__data__,h=Ag(l,s);return h<0?(++this.size,l.push([s,a])):l[h][1]=a,this}var Rk,Dk=P(()=>{Ay(),Rk=wx});function Xd(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var h=s[a];this.set(h[0],h[1])}}var Bp,Iy=P(()=>{EB(),PB(),MB(),_x(),Dk(),Xd.prototype.clear=Tk,Xd.prototype.delete=bx,Xd.prototype.get=Ak,Xd.prototype.has=Ik,Xd.prototype.set=Rk,Bp=Xd}),xx,qd,Sx=P(()=>{Tu(),on(),xx=Ol(dn,"Map"),qd=xx});function AB(){this.size=0,this.__data__={hash:new vx,map:new(qd||Bp),string:new vx}}var Ok,IB=P(()=>{xB(),Iy(),Sx(),Ok=AB});function RB(s){var a=typeof s;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?s!=="__proto__":s===null}var Lk,DB=P(()=>{Lk=RB});function OB(s,a){var l=s.__data__;return Lk(a)?l[typeof a=="string"?"string":"hash"]:l.map}var Ig,Ry=P(()=>{DB(),Ig=OB});function LB(s){var a=Ig(this,s).delete(s);return this.size-=a?1:0,a}var Ex,NB=P(()=>{Ry(),Ex=LB});function FB(s){return Ig(this,s).get(s)}var Nk,BB=P(()=>{Ry(),Nk=FB});function UB(s){return Ig(this,s).has(s)}var Fk,zB=P(()=>{Ry(),Fk=UB});function VB(s,a){var l=Ig(this,s),h=l.size;return l.set(s,a),this.size+=l.size==h?0:1,this}var Bk,jB=P(()=>{Ry(),Bk=VB});function Up(s){var a=-1,l=s==null?0:s.length;for(this.clear();++a<l;){var h=s[a];this.set(h[0],h[1])}}var Bl,Yd=P(()=>{IB(),NB(),BB(),zB(),jB(),Up.prototype.clear=Ok,Up.prototype.delete=Ex,Up.prototype.get=Nk,Up.prototype.has=Fk,Up.prototype.set=Bk,Bl=Up});function Cx(s,a){if(typeof s!="function"||a!=null&&typeof a!="function")throw new TypeError(Uk);var l=function(){var h=arguments,f=a?a.apply(this,h):h[0],g=l.cache;if(g.has(f))return g.get(f);var b=s.apply(this,h);return l.cache=g.set(f,b)||g,b};return l.cache=new(Cx.Cache||Bl),l}var Uk,Px,zk=P(()=>{Yd(),Uk="Expected a function",Cx.Cache=Bl,Px=Cx});function Vk(s){var a=Px(s,function(h){return l.size===Tx&&l.clear(),h}),l=a.cache;return a}var Tx,jk,Hk=P(()=>{zk(),Tx=500,jk=Vk}),Mx,Gk,Wk,$k,HB=P(()=>{Hk(),Mx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gk=/\\(\\)?/g,Wk=jk(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(Mx,function(l,h,f,g){a.push(f?g.replace(Gk,"$1"):h||l)}),a}),$k=Wk});function GB(s){return s==null?"":Cu(s)}var Rg,Kk=P(()=>{_p(),Rg=GB});function WB(s,a){return Pr(s)?s:Py(s,a)?[s]:$k(Rg(s))}var Dg,kx=P(()=>{Zn(),Kd(),HB(),Kk(),Dg=WB});function Ax(s){if(typeof s=="string"||Dt(s))return s;var a=s+"";return a=="0"&&1/s==-Xk?"-0":a}var Xk,zp,Og=P(()=>{fn(),Xk=1/0,zp=Ax});function $B(s,a){a=Dg(a,s);for(var l=0,h=a.length;s!=null&&l<h;)s=s[zp(a[l++])];return l&&l==h?s:void 0}var Lg,Ix=P(()=>{kx(),Og(),Lg=$B});function KB(s,a,l){var h=s==null?void 0:Lg(s,a);return h===void 0?l:h}var Zd,Vp=P(()=>{Ix(),Zd=KB});function XB(s,a){for(var l=-1,h=a.length,f=s.length;++l<h;)s[f+l]=a[l];return s}var Ng,qk=P(()=>{Ng=XB});function qB(s){return Pr(s)||_y(s)||!!(Rx&&s&&s[Rx])}var Rx,Dy,YB=P(()=>{Se(),q1(),Zn(),Rx=kn?kn.isConcatSpreadable:void 0,Dy=qB});function Oy(s,a,l,h,f){var g=-1,b=s.length;for(l||(l=Dy),f||(f=[]);++g<b;){var _=s[g];a>0&&l(_)?a>1?Oy(_,a-1,l,h,f):Ng(f,_):h||(f[f.length]=_)}return f}var Yk,Dx=P(()=>{qk(),YB(),Yk=Oy}),Ox,Zk,Qk=P(()=>{hx(),Ox=Fc(Object.getPrototypeOf,Object),Zk=Ox});function Jk(s){if(!Yt(s)||Un(s)!=Lx)return!1;var a=Zk(s);if(a===null)return!0;var l=tA.call(a,"constructor")&&a.constructor;return typeof l=="function"&&l instanceof l&&Fx.call(l)==nA}var Lx,Nx,eA,Fx,tA,nA,Ly,Bc=P(()=>{Ae(),Qk(),pn(),Lx="[object Object]",Nx=Function.prototype,eA=Object.prototype,Fx=Nx.toString,tA=eA.hasOwnProperty,nA=Fx.call(Object),Ly=Jk});function Fg(s){var a=Math[s];return function(l,h){if(l=Fn(l),h=h==null?0:iA(jr(h),292),h&&rA(l)){var f=(Rg(l)+"e").split("e"),g=a(f[0]+"e"+(+f[1]+h));return f=(Rg(g)+"e").split("e"),+(f[0]+"e"+(+f[1]-h))}return a(l)}}var rA,iA,sA,ZB=P(()=>{on(),Ro(),wr(),Kk(),rA=dn.isFinite,iA=Math.min,sA=Fg});function QB(s,a,l){return s===s&&(l!==void 0&&(s=s<=l?s:l),a!==void 0&&(s=s>=a?s:a)),s}var Bg,JB=P(()=>{Bg=QB});function Bx(s,a,l){return l===void 0&&(l=a,a=void 0),l!==void 0&&(l=Fn(l),l=l===l?l:0),a!==void 0&&(a=Fn(a),a=a===a?a:0),Bg(Fn(s),a,l)}var _i,Ny=P(()=>{JB(),wr(),_i=Bx});function eU(){this.__data__=new Bp,this.size=0}var oA,tU=P(()=>{Iy(),oA=eU});function aA(s){var a=this.__data__,l=a.delete(s);return this.size=a.size,l}var Ux,nU=P(()=>{Ux=aA});function rU(s){return this.__data__.get(s)}var lA,iU=P(()=>{lA=rU});function sU(s){return this.__data__.has(s)}var uA,oU=P(()=>{uA=sU});function aU(s,a){var l=this.__data__;if(l instanceof Bp){var h=l.__data__;if(!qd||h.length<cA-1)return h.push([s,a]),this.size=++l.size,this;l=this.__data__=new Bl(h)}return l.set(s,a),this.size=l.size,this}var cA,dA,lU=P(()=>{Iy(),Sx(),Yd(),cA=200,dA=aU});function jp(s){var a=this.__data__=new Bp(s);this.size=a.size}var Ug,hA=P(()=>{Iy(),tU(),nU(),iU(),oU(),lU(),jp.prototype.clear=oA,jp.prototype.delete=Ux,jp.prototype.get=lA,jp.prototype.has=uA,jp.prototype.set=dA,Ug=jp});function uU(s,a){for(var l=-1,h=s==null?0:s.length,f=0,g=[];++l<h;){var b=s[l];a(b,l,s)&&(g[f++]=b)}return g}var pA,cU=P(()=>{pA=uU});function dU(){return[]}var fA,hU=P(()=>{fA=dU}),mA,gA,zx,vA,yA,pU=P(()=>{cU(),hU(),mA=Object.prototype,gA=mA.propertyIsEnumerable,zx=Object.getOwnPropertySymbols,vA=zx?function(s){return s==null?[]:(s=Object(s),pA(zx(s),function(a){return gA.call(s,a)}))}:fA,yA=vA});function fU(s,a,l){var h=a(s);return Pr(s)?h:Ng(h,l(s))}var bA,mU=P(()=>{qk(),Zn(),bA=fU});function gU(s){return bA(s,Cy,yA)}var Fy,vU=P(()=>{mU(),pU(),mx(),Fy=gU}),_A,By,yU=P(()=>{Tu(),on(),_A=Ol(dn,"DataView"),By=_A}),wA,zg,bU=P(()=>{Tu(),on(),wA=Ol(dn,"Promise"),zg=wA}),xA,Qd,SA=P(()=>{Tu(),on(),xA=Ol(dn,"Set"),Qd=xA}),Vx,jx,Hx,Gx,Wx,$x,Kx,EA,CA,PA,Xx,Uc,qx,_U=P(()=>{yU(),Sx(),bU(),SA(),I1(),Ae(),ty(),Vx="[object Map]",jx="[object Object]",Hx="[object Promise]",Gx="[object Set]",Wx="[object WeakMap]",$x="[object DataView]",Kx=Dl(By),EA=Dl(qd),CA=Dl(zg),PA=Dl(Qd),Xx=Dl(Sp),Uc=Un,(By&&Uc(new By(new ArrayBuffer(1)))!=$x||qd&&Uc(new qd)!=Vx||zg&&Uc(zg.resolve())!=Hx||Qd&&Uc(new Qd)!=Gx||Sp&&Uc(new Sp)!=Wx)&&(Uc=function(s){var a=Un(s),l=a==jx?s.constructor:void 0,h=l?Dl(l):"";if(h)switch(h){case Kx:return $x;case EA:return Vx;case CA:return Hx;case PA:return Gx;case Xx:return Wx}return a}),qx=Uc}),TA,Yx,wU=P(()=>{on(),TA=dn.Uint8Array,Yx=TA});function xU(s){return this.__data__.set(s,MA),this}var MA,kA,SU=P(()=>{MA="__lodash_hash_undefined__",kA=xU});function EU(s){return this.__data__.has(s)}var AA,CU=P(()=>{AA=EU});function Uy(s){var a=-1,l=s==null?0:s.length;for(this.__data__=new Bl;++a<l;)this.add(s[a])}var Zx,IA=P(()=>{Yd(),SU(),CU(),Uy.prototype.add=Uy.prototype.push=kA,Uy.prototype.has=AA,Zx=Uy});function si(s,a){for(var l=-1,h=s==null?0:s.length;++l<h;)if(a(s[l],l,s))return!0;return!1}var Vg,PU=P(()=>{Vg=si});function TU(s,a){return s.has(a)}var Qx,RA=P(()=>{Qx=TU});function MU(s,a,l,h,f,g){var b=l&DA,_=s.length,S=a.length;if(_!=S&&!(b&&S>_))return!1;var C=g.get(s),I=g.get(a);if(C&&I)return C==a&&I==s;var O=-1,D=!0,A=l&OA?new Zx:void 0;for(g.set(s,a),g.set(a,s);++O<_;){var N=s[O],L=a[O];if(h)var V=b?h(L,N,O,a,s,g):h(N,L,O,s,a,g);if(V!==void 0){if(V)continue;D=!1;break}if(A){if(!Vg(a,function(G,$){if(!Qx(A,$)&&(N===G||f(N,G,l,h,g)))return A.push($)})){D=!1;break}}else if(!(N===L||f(N,L,l,h,g))){D=!1;break}}return g.delete(s),g.delete(a),D}var DA,OA,Jx,LA=P(()=>{IA(),PU(),RA(),DA=1,OA=2,Jx=MU});function kU(s){var a=-1,l=Array(s.size);return s.forEach(function(h,f){l[++a]=[f,h]}),l}var jg,AU=P(()=>{jg=kU});function IU(s){var a=-1,l=Array(s.size);return s.forEach(function(h){l[++a]=h}),l}var zy,eS=P(()=>{zy=IU});function RU(s,a,l,h,f,g,b){switch(l){case KA:if(s.byteLength!=a.byteLength||s.byteOffset!=a.byteOffset)return!1;s=s.buffer,a=a.buffer;case $A:return!(s.byteLength!=a.byteLength||!g(new Yx(s),new Yx(a)));case BA:case tS:case VA:return bi(+s,+a);case UA:return s.name==a.name&&s.message==a.message;case jA:case GA:return s==a+"";case zA:var _=jg;case HA:var S=h&NA;if(_||(_=zy),s.size!=a.size&&!S)return!1;var C=b.get(s);if(C)return C==a;h|=FA,b.set(s,a);var I=Jx(_(s),_(a),h,f,g,b);return b.delete(s),I;case WA:if(Vy)return Vy.call(s)==Vy.call(a)}return!1}var NA,FA,BA,tS,UA,zA,VA,jA,HA,GA,WA,$A,KA,nS,Vy,XA,DU=P(()=>{Se(),wU(),Fl(),LA(),AU(),eS(),NA=1,FA=2,BA="[object Boolean]",tS="[object Date]",UA="[object Error]",zA="[object Map]",VA="[object Number]",jA="[object RegExp]",HA="[object Set]",GA="[object String]",WA="[object Symbol]",$A="[object ArrayBuffer]",KA="[object DataView]",nS=kn?kn.prototype:void 0,Vy=nS?nS.valueOf:void 0,XA=RU});function OU(s,a,l,h,f,g){var b=l&qA,_=Fy(s),S=_.length,C=Fy(a),I=C.length;if(S!=I&&!b)return!1;for(var O=S;O--;){var D=_[O];if(!(b?D in a:ZA.call(a,D)))return!1}var A=g.get(s),N=g.get(a);if(A&&N)return A==a&&N==s;var L=!0;g.set(s,a),g.set(a,s);for(var V=b;++O<S;){D=_[O];var G=s[D],$=a[D];if(h)var Y=b?h($,G,D,a,s,g):h(G,$,D,s,a,g);if(!(Y===void 0?G===$||f(G,$,l,h,g):Y)){L=!1;break}V||(V=D=="constructor")}if(L&&!V){var re=s.constructor,ne=a.constructor;re!=ne&&"constructor"in s&&"constructor"in a&&!(typeof re=="function"&&re instanceof re&&typeof ne=="function"&&ne instanceof ne)&&(L=!1)}return g.delete(s),g.delete(a),L}var qA,YA,ZA,rS,iS=P(()=>{vU(),qA=1,YA=Object.prototype,ZA=YA.hasOwnProperty,rS=OU});function LU(s,a,l,h,f,g){var b=Pr(s),_=Pr(a),S=b?oS:qx(s),C=_?oS:qx(a);S=S==sS?Hg:S,C=C==sS?Hg:C;var I=S==Hg,O=C==Hg,D=S==C;if(D&&xy(s)){if(!xy(a))return!1;b=!0,I=!1}if(D&&!I)return g||(g=new Ug),b||lx(s)?Jx(s,a,l,h,f,g):XA(s,a,S,l,h,f,g);if(!(l&QA)){var A=I&&aS.call(s,"__wrapped__"),N=O&&aS.call(a,"__wrapped__");if(A||N){var L=A?s.value():s,V=N?a.value():a;return g||(g=new Ug),f(L,V,l,h,g)}}return D?(g||(g=new Ug),rS(s,a,l,h,f,g)):!1}var QA,sS,oS,Hg,JA,aS,e2,t2=P(()=>{hA(),LA(),DU(),iS(),_U(),Zn(),ex(),lk(),QA=1,sS="[object Arguments]",oS="[object Array]",Hg="[object Object]",JA=Object.prototype,aS=JA.hasOwnProperty,e2=LU});function lS(s,a,l,h,f){return s===a?!0:s==null||a==null||!Yt(s)&&!Yt(a)?s!==s&&a!==a:e2(s,a,l,h,lS,f)}var Hp,n2=P(()=>{t2(),pn(),Hp=lS});function r2(s,a,l,h){var f=l.length,g=f,b=!h;if(s==null)return!g;for(s=Object(s);f--;){var _=l[f];if(b&&_[2]?_[1]!==s[_[0]]:!(_[0]in s))return!1}for(;++f<g;){_=l[f];var S=_[0],C=s[S],I=_[1];if(b&&_[2]){if(C===void 0&&!(S in s))return!1}else{var O=new Ug;if(h)var D=h(C,I,S,s,a,O);if(!(D===void 0?Hp(I,C,i2|s2,h,O):D))return!1}}return!0}var i2,s2,uS,o2=P(()=>{hA(),n2(),i2=1,s2=2,uS=r2});function NU(s){return s===s&&!gt(s)}var cS,a2=P(()=>{pt(),cS=NU});function FU(s){for(var a=Cy(s),l=a.length;l--;){var h=a[l],f=s[h];a[l]=[h,f,cS(f)]}return a}var l2,u2=P(()=>{a2(),mx(),l2=FU});function BU(s,a){return function(l){return l==null?!1:l[s]===a&&(a!==void 0||s in Object(l))}}var dS,c2=P(()=>{dS=BU});function d2(s){var a=l2(s);return a.length==1&&a[0][2]?dS(a[0][0],a[0][1]):function(l){return l===s||uS(l,s,a)}}var h2,UU=P(()=>{o2(),u2(),c2(),h2=d2});function zU(s,a){return s!=null&&a in Object(s)}var p2,VU=P(()=>{p2=zU});function jU(s,a,l){a=Dg(a,s);for(var h=-1,f=a.length,g=!1;++h<f;){var b=zp(a[h]);if(!(g=s!=null&&l(s,b)))break;s=s[b]}return g||++h!=f?g:(f=s==null?0:s.length,!!f&&$d(f)&&cs(b,f)&&(Pr(s)||_y(s)))}var f2,HU=P(()=>{kx(),q1(),Zn(),kp(),Tg(),Og(),f2=jU});function GU(s,a){return s!=null&&f2(s,a,p2)}var m2,WU=P(()=>{VU(),HU(),m2=GU});function $U(s,a){return Py(s)&&cS(a)?dS(zp(s),a):function(l){var h=Zd(l,s);return h===void 0&&h===a?m2(l,s):Hp(a,h,g2|hS)}}var g2,hS,v2,KU=P(()=>{n2(),Vp(),WU(),Kd(),a2(),c2(),Og(),g2=1,hS=2,v2=$U});function XU(s){return function(a){return a==null?void 0:a[s]}}var y2,qU=P(()=>{y2=XU});function YU(s){return function(a){return Lg(a,s)}}var b2,ZU=P(()=>{Ix(),b2=YU});function QU(s){return Py(s)?y2(zp(s)):b2(s)}var _2,JU=P(()=>{qU(),ZU(),Kd(),Og(),_2=QU});function e5(s){return typeof s=="function"?s:s==null?oo:typeof s=="object"?Pr(s)?v2(s[0],s[1]):h2(s):_2(s)}var Gp,Jd=P(()=>{UU(),KU(),Il(),Zn(),JU(),Gp=e5});function t5(s,a,l,h){for(var f=-1,g=s==null?0:s.length;++f<g;){var b=s[f];a(h,b,l(b),s)}return h}var w2,n5=P(()=>{w2=t5});function r5(s){return function(a,l,h){for(var f=-1,g=Object(a),b=h(a),_=b.length;_--;){var S=b[s?_:++f];if(l(g[S],S,g)===!1)break}return a}}var x2,i5=P(()=>{x2=r5}),S2,E2,s5=P(()=>{i5(),S2=x2(),E2=S2});function o5(s,a){return s&&E2(s,a,Cy)}var pS,C2=P(()=>{s5(),mx(),pS=o5});function a5(s,a){return function(l,h){if(l==null)return l;if(!ee(l))return s(l,h);for(var f=l.length,g=a?f:-1,b=Object(l);(a?g--:++g<f)&&h(b[g],g,b)!==!1;);return l}}var P2,l5=P(()=>{_e(),P2=a5}),T2,fS,M2=P(()=>{C2(),l5(),T2=P2(pS),fS=T2});function k2(s,a,l,h){return fS(s,function(f,g,b){a(h,f,l(f),b)}),h}var A2,u5=P(()=>{M2(),A2=k2});function I2(s,a){return function(l,h){var f=Pr(l)?w2:A2,g=a?a():{};return f(l,s,Gp(h,2),g)}}var R2,c5=P(()=>{n5(),u5(),Jd(),Zn(),R2=I2}),D2,jy,d5=P(()=>{on(),D2=function(){return dn.Date.now()},jy=D2});function h5(s,a,l){var h,f,g,b,_,S,C=0,I=!1,O=!1,D=!0;if(typeof s!="function")throw new TypeError(Hy);a=Fn(a)||0,gt(l)&&(I=!!l.leading,O="maxWait"in l,g=O?Gy(Fn(l.maxWait)||0,a):g,D="trailing"in l?!!l.trailing:D);function A(le){var Ce=h,ve=f;return h=f=void 0,C=le,b=s.apply(ve,Ce),b}function N(le){return C=le,_=setTimeout(G,a),I?A(le):b}function L(le){var Ce=le-S,ve=le-C,we=a-Ce;return O?O2(we,g-ve):we}function V(le){var Ce=le-S,ve=le-C;return S===void 0||Ce>=a||Ce<0||O&&ve>=g}function G(){var le=jy();if(V(le))return $(le);_=setTimeout(G,L(le))}function $(le){return _=void 0,D&&h?A(le):(h=f=void 0,b)}function Y(){_!==void 0&&clearTimeout(_),C=0,h=S=f=_=void 0}function re(){return _===void 0?b:$(jy())}function ne(){var le=jy(),Ce=V(le);if(h=arguments,f=this,S=le,Ce){if(_===void 0)return N(S);if(O)return clearTimeout(_),_=setTimeout(G,a),A(S)}return _===void 0&&(_=setTimeout(G,a)),b}return ne.cancel=Y,ne.flush=re,ne}var Hy,Gy,O2,Wy,mS=P(()=>{pt(),d5(),wr(),Hy="Expected a function",Gy=Math.max,O2=Math.min,Wy=h5});function L2(s,a,l){for(var h=-1,f=s==null?0:s.length;++h<f;)if(l(a,s[h]))return!0;return!1}var N2,F2=P(()=>{N2=L2});function B2(s){var a=s==null?0:s.length;return a?s[a-1]:void 0}var eh,$y=P(()=>{eh=B2});function p5(s,a,l){var h=s==null?0:s.length;if(!h)return-1;var f=l==null?0:jr(l);return f<0&&(f=gS(h+f,0)),Nl(s,Gp(a,3),f)}var gS,vS,f5=P(()=>{yg(),Jd(),Ro(),gS=Math.max,vS=p5});function m5(s,a,l){var h=s==null?0:s.length;if(!h)return-1;var f=h-1;return l!==void 0&&(f=jr(l),f=l<0?yS(h+f,0):U2(f,h-1)),Nl(s,Gp(a,3),f,!0)}var yS,U2,z2,g5=P(()=>{yg(),Jd(),Ro(),yS=Math.max,U2=Math.min,z2=m5});function v5(s,a){var l=-1,h=ee(s)?Array(s.length):[];return fS(s,function(f,g,b){h[++l]=a(f,g,b)}),h}var Wp,y5=P(()=>{M2(),_e(),Wp=v5});function V2(s,a,l){return s>=H2(a,l)&&s<j2(a,l)}var j2,H2,G2,Ky=P(()=>{j2=Math.max,H2=Math.min,G2=V2});function bS(s,a,l){return a=Vr(a),l===void 0?(l=a,a=0):l=Vr(l),s=Fn(s),G2(s,a,l)}var _S,b5=P(()=>{Ky(),Kn(),wr(),_S=bS});function oi(s){return typeof s=="number"&&s==jr(s)}var Do,ra=P(()=>{Ro(),Do=oi}),zc,Gr,Iu=P(()=>{Ip(),c5(),zc=R2(function(s,a,l){Ap(s,l,a)}),Gr=zc});function W2(s,a){var l={};return a=Gp(a,3),pS(s,function(h,f,g){Ap(l,f,a(h,f,g))}),l}var th,$2=P(()=>{Ip(),C2(),Jd(),th=W2});function _5(s,a,l,h){if(!gt(s))return s;a=Dg(a,s);for(var f=-1,g=a.length,b=g-1,_=s;_!=null&&++f<g;){var S=zp(a[f]),C=l;if(S==="__proto__"||S==="constructor"||S==="prototype")return s;if(f!=b){var I=_[S];C=h?h(I,S,_):void 0,C===void 0&&(C=gt(I)?I:cs(a[f+1])?[]:{})}Hr(_,S,C),_=_[S]}return s}var K2,w5=P(()=>{Cg(),kx(),kp(),pt(),Og(),K2=_5});function X2(s,a){var l=s.length;for(s.sort(a);l--;)s[l]=s[l].value;return s}var wS,Xy=P(()=>{wS=X2});function q2(s,a){if(s!==a){var l=s!==void 0,h=s===null,f=s===s,g=Dt(s),b=a!==void 0,_=a===null,S=a===a,C=Dt(a);if(!_&&!C&&!g&&s>a||g&&b&&S&&!_&&!C||h&&b&&S||!l&&S||!f)return 1;if(!h&&!g&&!C&&s<a||C&&l&&f&&!h&&!g||_&&l&&f||!b&&f||!S)return-1}return 0}var Y2,Z2=P(()=>{fn(),Y2=q2});function Q2(s,a,l){for(var h=-1,f=s.criteria,g=a.criteria,b=f.length,_=l.length;++h<b;){var S=Y2(f[h],g[h]);if(S){if(h>=_)return S;var C=l[h];return S*(C=="desc"?-1:1)}}return s.index-a.index}var xS,x5=P(()=>{Z2(),xS=Q2});function S5(s,a,l){a.length?a=ur(a,function(g){return Pr(g)?function(b){return Lg(b,g.length===1?g[0]:g)}:g}):a=[oo];var h=-1;a=ur(a,Sy(Gp));var f=Wp(s,function(g,b,_){var S=ur(a,function(C){return C(g)});return{criteria:S,index:++h,value:g}});return wS(f,function(g,b){return xS(g,b,l)})}var SS,E5=P(()=>{or(),Ix(),Jd(),y5(),Xy(),sx(),x5(),Il(),Zn(),SS=S5});function C5(s,a,l,h){for(var f=l-1,g=s.length;++f<g;)if(h(s[f],a))return f;return-1}var $p,J2=P(()=>{$p=C5});function P5(s,a,l,h){var f=h?$p:Tp,g=-1,b=a.length,_=s;for(s===a&&(a=mg(a)),l&&(_=ur(s,Sy(l)));++g<b;)for(var S=0,C=a[g],I=l?l(C):C;(S=f(_,I,S,h))>-1;)_!==s&&ds.call(_,S,1),ds.call(s,S,1);return s}var eI,ds,Ru,T5=P(()=>{or(),_g(),J2(),sx(),dy(),eI=Array.prototype,ds=eI.splice,Ru=P5});function qy(s,a){return s&&s.length&&a&&a.length?Ru(s,a):s}var tI,M5=P(()=>{T5(),tI=qy}),nI,rI,ES=P(()=>{Dp(),M5(),nI=Oc(tI),rI=nI}),iI,Gg,Kp=P(()=>{ZB(),iI=sA("round"),Gg=iI});function k5(s,a,l){return s==null?s:K2(s,a,l)}var Xp,Yy=P(()=>{w5(),Xp=k5}),Zy,sI,Qy=P(()=>{Dx(),E5(),Dp(),Gn(),Zy=Oc(function(s,a){if(s==null)return[];var l=a.length;return l>1&&xt(s,a[0],a[1])?a=[]:l>2&&xt(a[0],a[1],a[2])&&(a=[a[0]]),SS(s,Yk(a,1),[])}),sI=Zy}),CS,PS,oI,A5=P(()=>{SA(),uy(),eS(),CS=1/0,PS=Qd&&1/zy(new Qd([,-0]))[1]==CS?function(s){return new Qd(s)}:ly,oI=PS});function I5(s,a,l){var h=-1,f=us,g=s.length,b=!0,_=[],S=_;if(l)b=!1,f=N2;else if(g>=aI){var C=a?null:oI(s);if(C)return zy(C);b=!1,f=Qx,S=new Zx}else S=a?[]:_;e:for(;++h<g;){var I=s[h],O=a?a(I):I;if(I=l||I!==0?I:0,b&&O===O){for(var D=S.length;D--;)if(S[D]===O)continue e;a&&S.push(O),_.push(I)}else f(S,O,l)||(S!==_&&S.push(O),_.push(I))}return _}var aI,lI,R5=P(()=>{IA(),z1(),F2(),RA(),A5(),eS(),aI=200,lI=I5});function D5(s){return s&&s.length?lI(s):[]}var Oo,nh=P(()=>{R5(),Oo=D5}),di=P(()=>{Ny(),mS(),f5(),b5(),ra(),Bc(),$y(),$2(),zk(),Kp(),nh()}),TS=W((s,a)=>{var l;a.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Gi):h=>(l||(l=Promise.resolve())).then(h).catch(f=>setTimeout(()=>{throw f},0))}),uI=W(s=>{var a=Symbol.for("react.element"),l=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),_=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),I=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),D=Symbol.iterator;function A(ce){return ce===null||typeof ce!="object"?null:(ce=D&&ce[D]||ce["@@iterator"],typeof ce=="function"?ce:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,V={};function G(ce,me,tt){this.props=ce,this.context=me,this.refs=V,this.updater=tt||N}G.prototype.isReactComponent={},G.prototype.setState=function(ce,me){if(typeof ce!="object"&&typeof ce!="function"&&ce!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ce,me,"setState")},G.prototype.forceUpdate=function(ce){this.updater.enqueueForceUpdate(this,ce,"forceUpdate")};function $(){}$.prototype=G.prototype;function Y(ce,me,tt){this.props=ce,this.context=me,this.refs=V,this.updater=tt||N}var re=Y.prototype=new $;re.constructor=Y,L(re,G.prototype),re.isPureReactComponent=!0;var ne=Array.isArray,le=Object.prototype.hasOwnProperty,Ce={current:null},ve={key:!0,ref:!0,__self:!0,__source:!0};function we(ce,me,tt){var st,ht={},Xe=null,sn=null;if(me!=null)for(st in me.ref!==void 0&&(sn=me.ref),me.key!==void 0&&(Xe=""+me.key),me)le.call(me,st)&&!ve.hasOwnProperty(st)&&(ht[st]=me[st]);var Et=arguments.length-2;if(Et===1)ht.children=tt;else if(1<Et){for(var Qt=Array(Et),_n=0;_n<Et;_n++)Qt[_n]=arguments[_n+2];ht.children=Qt}if(ce&&ce.defaultProps)for(st in Et=ce.defaultProps,Et)ht[st]===void 0&&(ht[st]=Et[st]);return{$$typeof:a,type:ce,key:Xe,ref:sn,props:ht,_owner:Ce.current}}function Le(ce,me){return{$$typeof:a,type:ce.type,key:me,ref:ce.ref,props:ce.props,_owner:ce._owner}}function lt(ce){return typeof ce=="object"&&ce!==null&&ce.$$typeof===a}function ue(ce){var me={"=":"=0",":":"=2"};return"$"+ce.replace(/[=:]/g,function(tt){return me[tt]})}var Oe=/\/+/g;function Q(ce,me){return typeof ce=="object"&&ce!==null&&ce.key!=null?ue(""+ce.key):me.toString(36)}function We(ce,me,tt,st,ht){var Xe=typeof ce;(Xe==="undefined"||Xe==="boolean")&&(ce=null);var sn=!1;if(ce===null)sn=!0;else switch(Xe){case"string":case"number":sn=!0;break;case"object":switch(ce.$$typeof){case a:case l:sn=!0}}if(sn)return sn=ce,ht=ht(sn),ce=st===""?"."+Q(sn,0):st,ne(ht)?(tt="",ce!=null&&(tt=ce.replace(Oe,"$&/")+"/"),We(ht,me,tt,"",function(_n){return _n})):ht!=null&&(lt(ht)&&(ht=Le(ht,tt+(!ht.key||sn&&sn.key===ht.key?"":(""+ht.key).replace(Oe,"$&/")+"/")+ce)),me.push(ht)),1;if(sn=0,st=st===""?".":st+":",ne(ce))for(var Et=0;Et<ce.length;Et++){Xe=ce[Et];var Qt=st+Q(Xe,Et);sn+=We(Xe,me,tt,Qt,ht)}else if(Qt=A(ce),typeof Qt=="function")for(ce=Qt.call(ce),Et=0;!(Xe=ce.next()).done;)Xe=Xe.value,Qt=st+Q(Xe,Et++),sn+=We(Xe,me,tt,Qt,ht);else if(Xe==="object")throw me=String(ce),Error("Objects are not valid as a React child (found: "+(me==="[object Object]"?"object with keys {"+Object.keys(ce).join(", ")+"}":me)+"). If you meant to render a collection of children, use an array instead.");return sn}function Lt(ce,me,tt){if(ce==null)return ce;var st=[],ht=0;return We(ce,st,"","",function(Xe){return me.call(tt,Xe,ht++)}),st}function Ie(ce){if(ce._status===-1){var me=ce._result;me=me(),me.then(function(tt){(ce._status===0||ce._status===-1)&&(ce._status=1,ce._result=tt)},function(tt){(ce._status===0||ce._status===-1)&&(ce._status=2,ce._result=tt)}),ce._status===-1&&(ce._status=0,ce._result=me)}if(ce._status===1)return ce._result.default;throw ce._result}var Re={current:null},Ke={transition:null},Ct={ReactCurrentDispatcher:Re,ReactCurrentBatchConfig:Ke,ReactCurrentOwner:Ce};s.Children={map:Lt,forEach:function(ce,me,tt){Lt(ce,function(){me.apply(this,arguments)},tt)},count:function(ce){var me=0;return Lt(ce,function(){me++}),me},toArray:function(ce){return Lt(ce,function(me){return me})||[]},only:function(ce){if(!lt(ce))throw Error("React.Children.only expected to receive a single React element child.");return ce}},s.Component=G,s.Fragment=h,s.Profiler=g,s.PureComponent=Y,s.StrictMode=f,s.Suspense=C,s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ct,s.cloneElement=function(ce,me,tt){if(ce==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ce+".");var st=L({},ce.props),ht=ce.key,Xe=ce.ref,sn=ce._owner;if(me!=null){if(me.ref!==void 0&&(Xe=me.ref,sn=Ce.current),me.key!==void 0&&(ht=""+me.key),ce.type&&ce.type.defaultProps)var Et=ce.type.defaultProps;for(Qt in me)le.call(me,Qt)&&!ve.hasOwnProperty(Qt)&&(st[Qt]=me[Qt]===void 0&&Et!==void 0?Et[Qt]:me[Qt])}var Qt=arguments.length-2;if(Qt===1)st.children=tt;else if(1<Qt){Et=Array(Qt);for(var _n=0;_n<Qt;_n++)Et[_n]=arguments[_n+2];st.children=Et}return{$$typeof:a,type:ce.type,key:ht,ref:Xe,props:st,_owner:sn}},s.createContext=function(ce){return ce={$$typeof:_,_currentValue:ce,_currentValue2:ce,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ce.Provider={$$typeof:b,_context:ce},ce.Consumer=ce},s.createElement=we,s.createFactory=function(ce){var me=we.bind(null,ce);return me.type=ce,me},s.createRef=function(){return{current:null}},s.forwardRef=function(ce){return{$$typeof:S,render:ce}},s.isValidElement=lt,s.lazy=function(ce){return{$$typeof:O,_payload:{_status:-1,_result:ce},_init:Ie}},s.memo=function(ce,me){return{$$typeof:I,type:ce,compare:me===void 0?null:me}},s.startTransition=function(ce){var me=Ke.transition;Ke.transition={};try{ce()}finally{Ke.transition=me}},s.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},s.useCallback=function(ce,me){return Re.current.useCallback(ce,me)},s.useContext=function(ce){return Re.current.useContext(ce)},s.useDebugValue=function(){},s.useDeferredValue=function(ce){return Re.current.useDeferredValue(ce)},s.useEffect=function(ce,me){return Re.current.useEffect(ce,me)},s.useId=function(){return Re.current.useId()},s.useImperativeHandle=function(ce,me,tt){return Re.current.useImperativeHandle(ce,me,tt)},s.useInsertionEffect=function(ce,me){return Re.current.useInsertionEffect(ce,me)},s.useLayoutEffect=function(ce,me){return Re.current.useLayoutEffect(ce,me)},s.useMemo=function(ce,me){return Re.current.useMemo(ce,me)},s.useReducer=function(ce,me,tt){return Re.current.useReducer(ce,me,tt)},s.useRef=function(ce){return Re.current.useRef(ce)},s.useState=function(ce){return Re.current.useState(ce)},s.useSyncExternalStore=function(ce,me,tt){return Re.current.useSyncExternalStore(ce,me,tt)},s.useTransition=function(){return Re.current.useTransition()},s.version="18.2.0"}),Ne=W((s,a)=>{a.exports=uI()}),cI=W(s=>{function a(Re,Ke){var Ct=Re.length;Re.push(Ke);e:for(;0<Ct;){var ce=Ct-1>>>1,me=Re[ce];if(0<f(me,Ke))Re[ce]=Ke,Re[Ct]=me,Ct=ce;else break e}}function l(Re){return Re.length===0?null:Re[0]}function h(Re){if(Re.length===0)return null;var Ke=Re[0],Ct=Re.pop();if(Ct!==Ke){Re[0]=Ct;e:for(var ce=0,me=Re.length,tt=me>>>1;ce<tt;){var st=2*(ce+1)-1,ht=Re[st],Xe=st+1,sn=Re[Xe];if(0>f(ht,Ct))Xe<me&&0>f(sn,ht)?(Re[ce]=sn,Re[Xe]=Ct,ce=Xe):(Re[ce]=ht,Re[st]=Ct,ce=st);else if(Xe<me&&0>f(sn,Ct))Re[ce]=sn,Re[Xe]=Ct,ce=Xe;else break e}}return Ke}function f(Re,Ke){var Ct=Re.sortIndex-Ke.sortIndex;return Ct!==0?Ct:Re.id-Ke.id}typeof performance=="object"&&typeof performance.now=="function"?(g=performance,s.unstable_now=function(){return g.now()}):(b=Date,_=b.now(),s.unstable_now=function(){return b.now()-_});var g,b,_,S=[],C=[],I=1,O=null,D=3,A=!1,N=!1,L=!1,V=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(Re){for(var Ke=l(C);Ke!==null;){if(Ke.callback===null)h(C);else if(Ke.startTime<=Re)h(C),Ke.sortIndex=Ke.expirationTime,a(S,Ke);else break;Ke=l(C)}}function re(Re){if(L=!1,Y(Re),!N)if(l(S)!==null)N=!0,Lt(ne);else{var Ke=l(C);Ke!==null&&Ie(re,Ke.startTime-Re)}}function ne(Re,Ke){N=!1,L&&(L=!1,G(ve),ve=-1),A=!0;var Ct=D;try{for(Y(Ke),O=l(S);O!==null&&(!(O.expirationTime>Ke)||Re&&!lt());){var ce=O.callback;if(typeof ce=="function"){O.callback=null,D=O.priorityLevel;var me=ce(O.expirationTime<=Ke);Ke=s.unstable_now(),typeof me=="function"?O.callback=me:O===l(S)&&h(S),Y(Ke)}else h(S);O=l(S)}if(O!==null)var tt=!0;else{var st=l(C);st!==null&&Ie(re,st.startTime-Ke),tt=!1}return tt}finally{O=null,D=Ct,A=!1}}var le=!1,Ce=null,ve=-1,we=5,Le=-1;function lt(){return!(s.unstable_now()-Le<we)}function ue(){if(Ce!==null){var Re=s.unstable_now();Le=Re;var Ke=!0;try{Ke=Ce(!0,Re)}finally{Ke?Oe():(le=!1,Ce=null)}}else le=!1}var Oe;typeof $=="function"?Oe=function(){$(ue)}:typeof MessageChannel<"u"?(Q=new MessageChannel,We=Q.port2,Q.port1.onmessage=ue,Oe=function(){We.postMessage(null)}):Oe=function(){V(ue,0)};var Q,We;function Lt(Re){Ce=Re,le||(le=!0,Oe())}function Ie(Re,Ke){ve=V(function(){Re(s.unstable_now())},Ke)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Re){Re.callback=null},s.unstable_continueExecution=function(){N||A||(N=!0,Lt(ne))},s.unstable_forceFrameRate=function(Re){0>Re||125<Re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<Re?Math.floor(1e3/Re):5},s.unstable_getCurrentPriorityLevel=function(){return D},s.unstable_getFirstCallbackNode=function(){return l(S)},s.unstable_next=function(Re){switch(D){case 1:case 2:case 3:var Ke=3;break;default:Ke=D}var Ct=D;D=Ke;try{return Re()}finally{D=Ct}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Re,Ke){switch(Re){case 1:case 2:case 3:case 4:case 5:break;default:Re=3}var Ct=D;D=Re;try{return Ke()}finally{D=Ct}},s.unstable_scheduleCallback=function(Re,Ke,Ct){var ce=s.unstable_now();switch(typeof Ct=="object"&&Ct!==null?(Ct=Ct.delay,Ct=typeof Ct=="number"&&0<Ct?ce+Ct:ce):Ct=ce,Re){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=Ct+me,Re={id:I++,callback:Ke,priorityLevel:Re,startTime:Ct,expirationTime:me,sortIndex:-1},Ct>ce?(Re.sortIndex=Ct,a(C,Re),l(S)===null&&Re===l(C)&&(L?(G(ve),ve=-1):L=!0,Ie(re,Ct-ce))):(Re.sortIndex=me,a(S,Re),N||A||(N=!0,Lt(ne))),Re},s.unstable_shouldYield=lt,s.unstable_wrapCallback=function(Re){var Ke=D;return function(){var Ct=D;D=Ke;try{return Re.apply(this,arguments)}finally{D=Ct}}}}),O5=W((s,a)=>{a.exports=cI()}),MS=W(s=>{var a=Ne(),l=O5();function h(c){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+c,w=1;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w]);return"Minified React error #"+c+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,g={};function b(c,p){_(c,p),_(c+"Capture",p)}function _(c,p){for(g[c]=p,c=0;c<p.length;c++)f.add(p[c])}var S=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C=Object.prototype.hasOwnProperty,I=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O={},D={};function A(c){return C.call(D,c)?!0:C.call(O,c)?!1:I.test(c)?D[c]=!0:(O[c]=!0,!1)}function N(c,p,w,k){if(w!==null&&w.type===0)return!1;switch(typeof p){case"function":case"symbol":return!0;case"boolean":return k?!1:w!==null?!w.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function L(c,p,w,k){if(p===null||typeof p>"u"||N(c,p,w,k))return!0;if(k)return!1;if(w!==null)switch(w.type){case 3:return!p;case 4:return p===!1;case 5:return isNaN(p);case 6:return isNaN(p)||1>p}return!1}function V(c,p,w,k,H,K,oe){this.acceptsBooleans=p===2||p===3||p===4,this.attributeName=k,this.attributeNamespace=H,this.mustUseProperty=w,this.propertyName=c,this.type=p,this.sanitizeURL=K,this.removeEmptyString=oe}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){G[c]=new V(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var p=c[0];G[p]=new V(p,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){G[c]=new V(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){G[c]=new V(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){G[c]=new V(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){G[c]=new V(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){G[c]=new V(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){G[c]=new V(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){G[c]=new V(c,5,!1,c.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function Y(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var p=c.replace($,Y);G[p]=new V(p,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var p=c.replace($,Y);G[p]=new V(p,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var p=c.replace($,Y);G[p]=new V(p,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){G[c]=new V(c,1,!1,c.toLowerCase(),null,!1,!1)}),G.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){G[c]=new V(c,1,!1,c.toLowerCase(),null,!0,!0)});function re(c,p,w,k){var H=G.hasOwnProperty(p)?G[p]:null;(H!==null?H.type!==0:k||!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(L(p,w,H,k)&&(w=null),k||H===null?A(p)&&(w===null?c.removeAttribute(p):c.setAttribute(p,""+w)):H.mustUseProperty?c[H.propertyName]=w===null?H.type===3?!1:"":w:(p=H.attributeName,k=H.attributeNamespace,w===null?c.removeAttribute(p):(H=H.type,w=H===3||H===4&&w===!0?"":""+w,k?c.setAttributeNS(k,p,w):c.setAttribute(p,w))))}var ne=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,le=Symbol.for("react.element"),Ce=Symbol.for("react.portal"),ve=Symbol.for("react.fragment"),we=Symbol.for("react.strict_mode"),Le=Symbol.for("react.profiler"),lt=Symbol.for("react.provider"),ue=Symbol.for("react.context"),Oe=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),We=Symbol.for("react.suspense_list"),Lt=Symbol.for("react.memo"),Ie=Symbol.for("react.lazy"),Re=Symbol.for("react.offscreen"),Ke=Symbol.iterator;function Ct(c){return c===null||typeof c!="object"?null:(c=Ke&&c[Ke]||c["@@iterator"],typeof c=="function"?c:null)}var ce=Object.assign,me;function tt(c){if(me===void 0)try{throw Error()}catch(w){var p=w.stack.trim().match(/\n( *(at )?)/);me=p&&p[1]||""}return`
`+me+c}var st=!1;function ht(c,p){if(!c||st)return"";st=!0;var w=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(vt){var k=vt}Reflect.construct(c,[],p)}else{try{p.call()}catch(vt){k=vt}c.call(p.prototype)}else{try{throw Error()}catch(vt){k=vt}c()}}catch(vt){if(vt&&k&&typeof vt.stack=="string"){for(var H=vt.stack.split(`
`),K=k.stack.split(`
`),oe=H.length-1,ke=K.length-1;1<=oe&&0<=ke&&H[oe]!==K[ke];)ke--;for(;1<=oe&&0<=ke;oe--,ke--)if(H[oe]!==K[ke]){if(oe!==1||ke!==1)do if(oe--,ke--,0>ke||H[oe]!==K[ke]){var Ue=`
`+H[oe].replace(" at new "," at ");return c.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",c.displayName)),Ue}while(1<=oe&&0<=ke);break}}}finally{st=!1,Error.prepareStackTrace=w}return(c=c?c.displayName||c.name:"")?tt(c):""}function Xe(c){switch(c.tag){case 5:return tt(c.type);case 16:return tt("Lazy");case 13:return tt("Suspense");case 19:return tt("SuspenseList");case 0:case 2:case 15:return c=ht(c.type,!1),c;case 11:return c=ht(c.type.render,!1),c;case 1:return c=ht(c.type,!0),c;default:return""}}function sn(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case ve:return"Fragment";case Ce:return"Portal";case Le:return"Profiler";case we:return"StrictMode";case Q:return"Suspense";case We:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case ue:return(c.displayName||"Context")+".Consumer";case lt:return(c._context.displayName||"Context")+".Provider";case Oe:var p=c.render;return c=c.displayName,c||(c=p.displayName||p.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case Lt:return p=c.displayName||null,p!==null?p:sn(c.type)||"Memo";case Ie:p=c._payload,c=c._init;try{return sn(c(p))}catch{}}return null}function Et(c){var p=c.type;switch(c.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=p.render,c=c.displayName||c.name||"",p.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sn(p);case 8:return p===we?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function Qt(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function _n(c){var p=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(p==="checkbox"||p==="radio")}function Vn(c){var p=_n(c)?"checked":"value",w=Object.getOwnPropertyDescriptor(c.constructor.prototype,p),k=""+c[p];if(!c.hasOwnProperty(p)&&typeof w<"u"&&typeof w.get=="function"&&typeof w.set=="function"){var H=w.get,K=w.set;return Object.defineProperty(c,p,{configurable:!0,get:function(){return H.call(this)},set:function(oe){k=""+oe,K.call(this,oe)}}),Object.defineProperty(c,p,{enumerable:w.enumerable}),{getValue:function(){return k},setValue:function(oe){k=""+oe},stopTracking:function(){c._valueTracker=null,delete c[p]}}}}function Ln(c){c._valueTracker||(c._valueTracker=Vn(c))}function Wr(c){if(!c)return!1;var p=c._valueTracker;if(!p)return!0;var w=p.getValue(),k="";return c&&(k=_n(c)?c.checked?"true":"false":c.value),c=k,c!==w?(p.setValue(c),!0):!1}function J(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function mt(c,p){var w=p.checked;return ce({},p,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:w??c._wrapperState.initialChecked})}function ft(c,p){var w=p.defaultValue==null?"":p.defaultValue,k=p.checked!=null?p.checked:p.defaultChecked;w=Qt(p.value!=null?p.value:w),c._wrapperState={initialChecked:k,initialValue:w,controlled:p.type==="checkbox"||p.type==="radio"?p.checked!=null:p.value!=null}}function Ee(c,p){p=p.checked,p!=null&&re(c,"checked",p,!1)}function xe(c,p){Ee(c,p);var w=Qt(p.value),k=p.type;if(w!=null)k==="number"?(w===0&&c.value===""||c.value!=w)&&(c.value=""+w):c.value!==""+w&&(c.value=""+w);else if(k==="submit"||k==="reset"){c.removeAttribute("value");return}p.hasOwnProperty("value")?Pt(c,p.type,w):p.hasOwnProperty("defaultValue")&&Pt(c,p.type,Qt(p.defaultValue)),p.checked==null&&p.defaultChecked!=null&&(c.defaultChecked=!!p.defaultChecked)}function qe(c,p,w){if(p.hasOwnProperty("value")||p.hasOwnProperty("defaultValue")){var k=p.type;if(!(k!=="submit"&&k!=="reset"||p.value!==void 0&&p.value!==null))return;p=""+c._wrapperState.initialValue,w||p===c.value||(c.value=p),c.defaultValue=p}w=c.name,w!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,w!==""&&(c.name=w)}function Pt(c,p,w){(p!=="number"||J(c.ownerDocument)!==c)&&(w==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+w&&(c.defaultValue=""+w))}var It=Array.isArray;function nt(c,p,w,k){if(c=c.options,p){p={};for(var H=0;H<w.length;H++)p["$"+w[H]]=!0;for(w=0;w<c.length;w++)H=p.hasOwnProperty("$"+c[w].value),c[w].selected!==H&&(c[w].selected=H),H&&k&&(c[w].defaultSelected=!0)}else{for(w=""+Qt(w),p=null,H=0;H<c.length;H++){if(c[H].value===w){c[H].selected=!0,k&&(c[H].defaultSelected=!0);return}p!==null||c[H].disabled||(p=c[H])}p!==null&&(p.selected=!0)}}function zt(c,p){if(p.dangerouslySetInnerHTML!=null)throw Error(h(91));return ce({},p,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function kt(c,p){var w=p.value;if(w==null){if(w=p.children,p=p.defaultValue,w!=null){if(p!=null)throw Error(h(92));if(It(w)){if(1<w.length)throw Error(h(93));w=w[0]}p=w}p==null&&(p=""),w=p}c._wrapperState={initialValue:Qt(w)}}function Rt(c,p){var w=Qt(p.value),k=Qt(p.defaultValue);w!=null&&(w=""+w,w!==c.value&&(c.value=w),p.defaultValue==null&&c.defaultValue!==w&&(c.defaultValue=w)),k!=null&&(c.defaultValue=""+k)}function Rn(c){var p=c.textContent;p===c._wrapperState.initialValue&&p!==""&&p!==null&&(c.value=p)}function Or(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function tr(c,p){return c==null||c==="http://www.w3.org/1999/xhtml"?Or(p):c==="http://www.w3.org/2000/svg"&&p==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var _o,Rf=function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(p,w,k,H){MSApp.execUnsafeLocalFunction(function(){return c(p,w,k,H)})}:c}(function(c,p){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=p;else{for(_o=_o||document.createElement("div"),_o.innerHTML="<svg>"+p.valueOf().toString()+"</svg>",p=_o.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;p.firstChild;)c.appendChild(p.firstChild)}});function Uo(c,p){if(p){var w=c.firstChild;if(w&&w===c.lastChild&&w.nodeType===3){w.nodeValue=p;return}}c.textContent=p}var tc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vi=["Webkit","ms","Moz","O"];Object.keys(tc).forEach(function(c){Vi.forEach(function(p){p=p+c.charAt(0).toUpperCase()+c.substring(1),tc[p]=tc[c]})});function Fv(c,p,w){return p==null||typeof p=="boolean"||p===""?"":w||typeof p!="number"||p===0||tc.hasOwnProperty(c)&&tc[c]?(""+p).trim():p+"px"}function c_(c,p){c=c.style;for(var w in p)if(p.hasOwnProperty(w)){var k=w.indexOf("--")===0,H=Fv(w,p[w],k);w==="float"&&(w="cssFloat"),k?c.setProperty(w,H):c[w]=H}}var nc=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function d_(c,p){if(p){if(nc[c]&&(p.children!=null||p.dangerouslySetInnerHTML!=null))throw Error(h(137,c));if(p.dangerouslySetInnerHTML!=null){if(p.children!=null)throw Error(h(60));if(typeof p.dangerouslySetInnerHTML!="object"||!("__html"in p.dangerouslySetInnerHTML))throw Error(h(61))}if(p.style!=null&&typeof p.style!="object")throw Error(h(62))}}function EC(c,p){if(c.indexOf("-")===-1)return typeof p.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var CC=null;function PC(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var h_=null,Ql=null,rc=null;function qfe(c){if(c=KC(c)){if(typeof h_!="function")throw Error(h(280));var p=c.stateNode;p&&(p=WO(p),h_(c.stateNode,c.type,p))}}function Yfe(c){Ql?rc?rc.push(c):rc=[c]:Ql=c}function Zfe(){if(Ql){var c=Ql,p=rc;if(rc=Ql=null,qfe(c),p)for(c=0;c<p.length;c++)qfe(p[c])}}function Qfe(c,p){return c(p)}function Jfe(){}var X6=!1;function eme(c,p,w){if(X6)return c(p,w);X6=!0;try{return Qfe(c,p,w)}finally{X6=!1,(Ql!==null||rc!==null)&&(Jfe(),Zfe())}}function TC(c,p){var w=c.stateNode;if(w===null)return null;var k=WO(w);if(k===null)return null;w=k[p];e:switch(p){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(c=c.type,k=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!k;break e;default:c=!1}if(c)return null;if(w&&typeof w!="function")throw Error(h(231,p,typeof w));return w}var q6=!1;if(S)try{p_={},Object.defineProperty(p_,"passive",{get:function(){q6=!0}}),window.addEventListener("test",p_,p_),window.removeEventListener("test",p_,p_)}catch{q6=!1}var p_;function cLe(c,p,w,k,H,K,oe,ke,Ue){var vt=Array.prototype.slice.call(arguments,3);try{p.apply(w,vt)}catch(jt){this.onError(jt)}}var MC=!1,_O=null,wO=!1,Y6=null,dLe={onError:function(c){MC=!0,_O=c}};function hLe(c,p,w,k,H,K,oe,ke,Ue){MC=!1,_O=null,cLe.apply(dLe,arguments)}function pLe(c,p,w,k,H,K,oe,ke,Ue){if(hLe.apply(this,arguments),MC){if(MC){var vt=_O;MC=!1,_O=null}else throw Error(h(198));wO||(wO=!0,Y6=vt)}}function Bv(c){var p=c,w=c;if(c.alternate)for(;p.return;)p=p.return;else{c=p;do p=c,p.flags&4098&&(w=p.return),c=p.return;while(c)}return p.tag===3?w:null}function tme(c){if(c.tag===13){var p=c.memoizedState;if(p===null&&(c=c.alternate,c!==null&&(p=c.memoizedState)),p!==null)return p.dehydrated}return null}function nme(c){if(Bv(c)!==c)throw Error(h(188))}function fLe(c){var p=c.alternate;if(!p){if(p=Bv(c),p===null)throw Error(h(188));return p!==c?null:c}for(var w=c,k=p;;){var H=w.return;if(H===null)break;var K=H.alternate;if(K===null){if(k=H.return,k!==null){w=k;continue}break}if(H.child===K.child){for(K=H.child;K;){if(K===w)return nme(H),c;if(K===k)return nme(H),p;K=K.sibling}throw Error(h(188))}if(w.return!==k.return)w=H,k=K;else{for(var oe=!1,ke=H.child;ke;){if(ke===w){oe=!0,w=H,k=K;break}if(ke===k){oe=!0,k=H,w=K;break}ke=ke.sibling}if(!oe){for(ke=K.child;ke;){if(ke===w){oe=!0,w=K,k=H;break}if(ke===k){oe=!0,k=K,w=H;break}ke=ke.sibling}if(!oe)throw Error(h(189))}}if(w.alternate!==k)throw Error(h(190))}if(w.tag!==3)throw Error(h(188));return w.stateNode.current===w?c:p}function rme(c){return c=fLe(c),c!==null?ime(c):null}function ime(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var p=ime(c);if(p!==null)return p;c=c.sibling}return null}var sme=l.unstable_scheduleCallback,ome=l.unstable_cancelCallback,mLe=l.unstable_shouldYield,gLe=l.unstable_requestPaint,ms=l.unstable_now,vLe=l.unstable_getCurrentPriorityLevel,Z6=l.unstable_ImmediatePriority,ame=l.unstable_UserBlockingPriority,xO=l.unstable_NormalPriority,yLe=l.unstable_LowPriority,lme=l.unstable_IdlePriority,SO=null,pd=null;function bLe(c){if(pd&&typeof pd.onCommitFiberRoot=="function")try{pd.onCommitFiberRoot(SO,c,void 0,(c.current.flags&128)===128)}catch{}}var ic=Math.clz32?Math.clz32:xLe,_Le=Math.log,wLe=Math.LN2;function xLe(c){return c>>>=0,c===0?32:31-(_Le(c)/wLe|0)|0}var EO=64,CO=4194304;function kC(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function PO(c,p){var w=c.pendingLanes;if(w===0)return 0;var k=0,H=c.suspendedLanes,K=c.pingedLanes,oe=w&268435455;if(oe!==0){var ke=oe&~H;ke!==0?k=kC(ke):(K&=oe,K!==0&&(k=kC(K)))}else oe=w&~H,oe!==0?k=kC(oe):K!==0&&(k=kC(K));if(k===0)return 0;if(p!==0&&p!==k&&!(p&H)&&(H=k&-k,K=p&-p,H>=K||H===16&&(K&4194240)!==0))return p;if(k&4&&(k|=w&16),p=c.entangledLanes,p!==0)for(c=c.entanglements,p&=k;0<p;)w=31-ic(p),H=1<<w,k|=c[w],p&=~H;return k}function SLe(c,p){switch(c){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ELe(c,p){for(var w=c.suspendedLanes,k=c.pingedLanes,H=c.expirationTimes,K=c.pendingLanes;0<K;){var oe=31-ic(K),ke=1<<oe,Ue=H[oe];Ue===-1?(!(ke&w)||ke&k)&&(H[oe]=SLe(ke,p)):Ue<=p&&(c.expiredLanes|=ke),K&=~ke}}function Q6(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function ume(){var c=EO;return EO<<=1,!(EO&4194240)&&(EO=64),c}function J6(c){for(var p=[],w=0;31>w;w++)p.push(c);return p}function AC(c,p,w){c.pendingLanes|=p,p!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,p=31-ic(p),c[p]=w}function CLe(c,p){var w=c.pendingLanes&~p;c.pendingLanes=p,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=p,c.mutableReadLanes&=p,c.entangledLanes&=p,p=c.entanglements;var k=c.eventTimes;for(c=c.expirationTimes;0<w;){var H=31-ic(w),K=1<<H;p[H]=0,k[H]=-1,c[H]=-1,w&=~K}}function e8(c,p){var w=c.entangledLanes|=p;for(c=c.entanglements;w;){var k=31-ic(w),H=1<<k;H&p|c[k]&p&&(c[k]|=p),w&=~H}}var ti=0;function cme(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var dme,t8,hme,pme,fme,n8=!1,TO=[],Df=null,Of=null,Lf=null,IC=new Map,RC=new Map,Nf=[],PLe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mme(c,p){switch(c){case"focusin":case"focusout":Df=null;break;case"dragenter":case"dragleave":Of=null;break;case"mouseover":case"mouseout":Lf=null;break;case"pointerover":case"pointerout":IC.delete(p.pointerId);break;case"gotpointercapture":case"lostpointercapture":RC.delete(p.pointerId)}}function DC(c,p,w,k,H,K){return c===null||c.nativeEvent!==K?(c={blockedOn:p,domEventName:w,eventSystemFlags:k,nativeEvent:K,targetContainers:[H]},p!==null&&(p=KC(p),p!==null&&t8(p)),c):(c.eventSystemFlags|=k,p=c.targetContainers,H!==null&&p.indexOf(H)===-1&&p.push(H),c)}function TLe(c,p,w,k,H){switch(p){case"focusin":return Df=DC(Df,c,p,w,k,H),!0;case"dragenter":return Of=DC(Of,c,p,w,k,H),!0;case"mouseover":return Lf=DC(Lf,c,p,w,k,H),!0;case"pointerover":var K=H.pointerId;return IC.set(K,DC(IC.get(K)||null,c,p,w,k,H)),!0;case"gotpointercapture":return K=H.pointerId,RC.set(K,DC(RC.get(K)||null,c,p,w,k,H)),!0}return!1}function gme(c){var p=Uv(c.target);if(p!==null){var w=Bv(p);if(w!==null){if(p=w.tag,p===13){if(p=tme(w),p!==null){c.blockedOn=p,fme(c.priority,function(){hme(w)});return}}else if(p===3&&w.stateNode.current.memoizedState.isDehydrated){c.blockedOn=w.tag===3?w.stateNode.containerInfo:null;return}}}c.blockedOn=null}function MO(c){if(c.blockedOn!==null)return!1;for(var p=c.targetContainers;0<p.length;){var w=i8(c.domEventName,c.eventSystemFlags,p[0],c.nativeEvent);if(w===null){w=c.nativeEvent;var k=new w.constructor(w.type,w);CC=k,w.target.dispatchEvent(k),CC=null}else return p=KC(w),p!==null&&t8(p),c.blockedOn=w,!1;p.shift()}return!0}function vme(c,p,w){MO(c)&&w.delete(p)}function MLe(){n8=!1,Df!==null&&MO(Df)&&(Df=null),Of!==null&&MO(Of)&&(Of=null),Lf!==null&&MO(Lf)&&(Lf=null),IC.forEach(vme),RC.forEach(vme)}function OC(c,p){c.blockedOn===p&&(c.blockedOn=null,n8||(n8=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,MLe)))}function LC(c){function p(H){return OC(H,c)}if(0<TO.length){OC(TO[0],c);for(var w=1;w<TO.length;w++){var k=TO[w];k.blockedOn===c&&(k.blockedOn=null)}}for(Df!==null&&OC(Df,c),Of!==null&&OC(Of,c),Lf!==null&&OC(Lf,c),IC.forEach(p),RC.forEach(p),w=0;w<Nf.length;w++)k=Nf[w],k.blockedOn===c&&(k.blockedOn=null);for(;0<Nf.length&&(w=Nf[0],w.blockedOn===null);)gme(w),w.blockedOn===null&&Nf.shift()}var f_=ne.ReactCurrentBatchConfig,kO=!0;function kLe(c,p,w,k){var H=ti,K=f_.transition;f_.transition=null;try{ti=1,r8(c,p,w,k)}finally{ti=H,f_.transition=K}}function ALe(c,p,w,k){var H=ti,K=f_.transition;f_.transition=null;try{ti=4,r8(c,p,w,k)}finally{ti=H,f_.transition=K}}function r8(c,p,w,k){if(kO){var H=i8(c,p,w,k);if(H===null)b8(c,p,k,AO,w),mme(c,k);else if(TLe(H,c,p,w,k))k.stopPropagation();else if(mme(c,k),p&4&&-1<PLe.indexOf(c)){for(;H!==null;){var K=KC(H);if(K!==null&&dme(K),K=i8(c,p,w,k),K===null&&b8(c,p,k,AO,w),K===H)break;H=K}H!==null&&k.stopPropagation()}else b8(c,p,k,null,w)}}var AO=null;function i8(c,p,w,k){if(AO=null,c=PC(k),c=Uv(c),c!==null)if(p=Bv(c),p===null)c=null;else if(w=p.tag,w===13){if(c=tme(p),c!==null)return c;c=null}else if(w===3){if(p.stateNode.current.memoizedState.isDehydrated)return p.tag===3?p.stateNode.containerInfo:null;c=null}else p!==c&&(c=null);return AO=c,null}function yme(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vLe()){case Z6:return 1;case ame:return 4;case xO:case yLe:return 16;case lme:return 536870912;default:return 16}default:return 16}}var Ff=null,s8=null,IO=null;function bme(){if(IO)return IO;var c,p=s8,w=p.length,k,H="value"in Ff?Ff.value:Ff.textContent,K=H.length;for(c=0;c<w&&p[c]===H[c];c++);var oe=w-c;for(k=1;k<=oe&&p[w-k]===H[K-k];k++);return IO=H.slice(c,1<k?1-k:void 0)}function RO(c){var p=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&p===13&&(c=13)):c=p,c===10&&(c=13),32<=c||c===13?c:0}function DO(){return!0}function _me(){return!1}function cl(c){function p(w,k,H,K,oe){this._reactName=w,this._targetInst=H,this.type=k,this.nativeEvent=K,this.target=oe,this.currentTarget=null;for(var ke in c)c.hasOwnProperty(ke)&&(w=c[ke],this[ke]=w?w(K):K[ke]);return this.isDefaultPrevented=(K.defaultPrevented!=null?K.defaultPrevented:K.returnValue===!1)?DO:_me,this.isPropagationStopped=_me,this}return ce(p.prototype,{preventDefault:function(){this.defaultPrevented=!0;var w=this.nativeEvent;w&&(w.preventDefault?w.preventDefault():typeof w.returnValue!="unknown"&&(w.returnValue=!1),this.isDefaultPrevented=DO)},stopPropagation:function(){var w=this.nativeEvent;w&&(w.stopPropagation?w.stopPropagation():typeof w.cancelBubble!="unknown"&&(w.cancelBubble=!0),this.isPropagationStopped=DO)},persist:function(){},isPersistent:DO}),p}var m_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},o8=cl(m_),NC=ce({},m_,{view:0,detail:0}),ILe=cl(NC),a8,l8,FC,OO=ce({},NC,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:c8,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==FC&&(FC&&c.type==="mousemove"?(a8=c.screenX-FC.screenX,l8=c.screenY-FC.screenY):l8=a8=0,FC=c),a8)},movementY:function(c){return"movementY"in c?c.movementY:l8}}),wme=cl(OO),RLe=ce({},OO,{dataTransfer:0}),DLe=cl(RLe),OLe=ce({},NC,{relatedTarget:0}),u8=cl(OLe),LLe=ce({},m_,{animationName:0,elapsedTime:0,pseudoElement:0}),NLe=cl(LLe),FLe=ce({},m_,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),BLe=cl(FLe),ULe=ce({},m_,{data:0}),xme=cl(ULe),zLe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VLe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jLe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HLe(c){var p=this.nativeEvent;return p.getModifierState?p.getModifierState(c):(c=jLe[c])?!!p[c]:!1}function c8(){return HLe}var GLe=ce({},NC,{key:function(c){if(c.key){var p=zLe[c.key]||c.key;if(p!=="Unidentified")return p}return c.type==="keypress"?(c=RO(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?VLe[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:c8,charCode:function(c){return c.type==="keypress"?RO(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?RO(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),WLe=cl(GLe),$Le=ce({},OO,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sme=cl($Le),KLe=ce({},NC,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:c8}),XLe=cl(KLe),qLe=ce({},m_,{propertyName:0,elapsedTime:0,pseudoElement:0}),YLe=cl(qLe),ZLe=ce({},OO,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),QLe=cl(ZLe),JLe=[9,13,27,32],d8=S&&"CompositionEvent"in window,BC=null;S&&"documentMode"in document&&(BC=document.documentMode);var eNe=S&&"TextEvent"in window&&!BC,Eme=S&&(!d8||BC&&8<BC&&11>=BC),Cme=String.fromCharCode(32),Pme=!1;function Tme(c,p){switch(c){case"keyup":return JLe.indexOf(p.keyCode)!==-1;case"keydown":return p.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mme(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var g_=!1;function tNe(c,p){switch(c){case"compositionend":return Mme(p);case"keypress":return p.which!==32?null:(Pme=!0,Cme);case"textInput":return c=p.data,c===Cme&&Pme?null:c;default:return null}}function nNe(c,p){if(g_)return c==="compositionend"||!d8&&Tme(c,p)?(c=bme(),IO=s8=Ff=null,g_=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(p.ctrlKey||p.altKey||p.metaKey)||p.ctrlKey&&p.altKey){if(p.char&&1<p.char.length)return p.char;if(p.which)return String.fromCharCode(p.which)}return null;case"compositionend":return Eme&&p.locale!=="ko"?null:p.data;default:return null}}var rNe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kme(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p==="input"?!!rNe[c.type]:p==="textarea"}function Ame(c,p,w,k){Yfe(k),p=jO(p,"onChange"),0<p.length&&(w=new o8("onChange","change",null,w,k),c.push({event:w,listeners:p}))}var UC=null,zC=null;function iNe(c){qme(c,0)}function LO(c){var p=w_(c);if(Wr(p))return c}function sNe(c,p){if(c==="change")return p}var Ime=!1;S&&(S?(NO="oninput"in document,NO||(p8=document.createElement("div"),p8.setAttribute("oninput","return;"),NO=typeof p8.oninput=="function"),h8=NO):h8=!1,Ime=h8&&(!document.documentMode||9<document.documentMode));var h8,NO,p8;function Rme(){UC&&(UC.detachEvent("onpropertychange",Dme),zC=UC=null)}function Dme(c){if(c.propertyName==="value"&&LO(zC)){var p=[];Ame(p,zC,c,PC(c)),eme(iNe,p)}}function oNe(c,p,w){c==="focusin"?(Rme(),UC=p,zC=w,UC.attachEvent("onpropertychange",Dme)):c==="focusout"&&Rme()}function aNe(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return LO(zC)}function lNe(c,p){if(c==="click")return LO(p)}function uNe(c,p){if(c==="input"||c==="change")return LO(p)}function cNe(c,p){return c===p&&(c!==0||1/c===1/p)||c!==c&&p!==p}var sc=typeof Object.is=="function"?Object.is:cNe;function VC(c,p){if(sc(c,p))return!0;if(typeof c!="object"||c===null||typeof p!="object"||p===null)return!1;var w=Object.keys(c),k=Object.keys(p);if(w.length!==k.length)return!1;for(k=0;k<w.length;k++){var H=w[k];if(!C.call(p,H)||!sc(c[H],p[H]))return!1}return!0}function Ome(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Lme(c,p){var w=Ome(c);c=0;for(var k;w;){if(w.nodeType===3){if(k=c+w.textContent.length,c<=p&&k>=p)return{node:w,offset:p-c};c=k}e:{for(;w;){if(w.nextSibling){w=w.nextSibling;break e}w=w.parentNode}w=void 0}w=Ome(w)}}function Nme(c,p){return c&&p?c===p?!0:c&&c.nodeType===3?!1:p&&p.nodeType===3?Nme(c,p.parentNode):"contains"in c?c.contains(p):c.compareDocumentPosition?!!(c.compareDocumentPosition(p)&16):!1:!1}function Fme(){for(var c=window,p=J();p instanceof c.HTMLIFrameElement;){try{var w=typeof p.contentWindow.location.href=="string"}catch{w=!1}if(w)c=p.contentWindow;else break;p=J(c.document)}return p}function f8(c){var p=c&&c.nodeName&&c.nodeName.toLowerCase();return p&&(p==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||p==="textarea"||c.contentEditable==="true")}function dNe(c){var p=Fme(),w=c.focusedElem,k=c.selectionRange;if(p!==w&&w&&w.ownerDocument&&Nme(w.ownerDocument.documentElement,w)){if(k!==null&&f8(w)){if(p=k.start,c=k.end,c===void 0&&(c=p),"selectionStart"in w)w.selectionStart=p,w.selectionEnd=Math.min(c,w.value.length);else if(c=(p=w.ownerDocument||document)&&p.defaultView||window,c.getSelection){c=c.getSelection();var H=w.textContent.length,K=Math.min(k.start,H);k=k.end===void 0?K:Math.min(k.end,H),!c.extend&&K>k&&(H=k,k=K,K=H),H=Lme(w,K);var oe=Lme(w,k);H&&oe&&(c.rangeCount!==1||c.anchorNode!==H.node||c.anchorOffset!==H.offset||c.focusNode!==oe.node||c.focusOffset!==oe.offset)&&(p=p.createRange(),p.setStart(H.node,H.offset),c.removeAllRanges(),K>k?(c.addRange(p),c.extend(oe.node,oe.offset)):(p.setEnd(oe.node,oe.offset),c.addRange(p)))}}for(p=[],c=w;c=c.parentNode;)c.nodeType===1&&p.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<p.length;w++)c=p[w],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var hNe=S&&"documentMode"in document&&11>=document.documentMode,v_=null,m8=null,jC=null,g8=!1;function Bme(c,p,w){var k=w.window===w?w.document:w.nodeType===9?w:w.ownerDocument;g8||v_==null||v_!==J(k)||(k=v_,"selectionStart"in k&&f8(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),jC&&VC(jC,k)||(jC=k,k=jO(m8,"onSelect"),0<k.length&&(p=new o8("onSelect","select",null,p,w),c.push({event:p,listeners:k}),p.target=v_)))}function FO(c,p){var w={};return w[c.toLowerCase()]=p.toLowerCase(),w["Webkit"+c]="webkit"+p,w["Moz"+c]="moz"+p,w}var y_={animationend:FO("Animation","AnimationEnd"),animationiteration:FO("Animation","AnimationIteration"),animationstart:FO("Animation","AnimationStart"),transitionend:FO("Transition","TransitionEnd")},v8={},Ume={};S&&(Ume=document.createElement("div").style,"AnimationEvent"in window||(delete y_.animationend.animation,delete y_.animationiteration.animation,delete y_.animationstart.animation),"TransitionEvent"in window||delete y_.transitionend.transition);function BO(c){if(v8[c])return v8[c];if(!y_[c])return c;var p=y_[c],w;for(w in p)if(p.hasOwnProperty(w)&&w in Ume)return v8[c]=p[w];return c}var zme=BO("animationend"),Vme=BO("animationiteration"),jme=BO("animationstart"),Hme=BO("transitionend"),Gme=new Map,Wme="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bf(c,p){Gme.set(c,p),b(p,[c])}for(zO=0;zO<Wme.length;zO++)UO=Wme[zO],$me=UO.toLowerCase(),Kme=UO[0].toUpperCase()+UO.slice(1),Bf($me,"on"+Kme);var UO,$me,Kme,zO;Bf(zme,"onAnimationEnd"),Bf(Vme,"onAnimationIteration"),Bf(jme,"onAnimationStart"),Bf("dblclick","onDoubleClick"),Bf("focusin","onFocus"),Bf("focusout","onBlur"),Bf(Hme,"onTransitionEnd"),_("onMouseEnter",["mouseout","mouseover"]),_("onMouseLeave",["mouseout","mouseover"]),_("onPointerEnter",["pointerout","pointerover"]),_("onPointerLeave",["pointerout","pointerover"]),b("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),b("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),b("onBeforeInput",["compositionend","keypress","textInput","paste"]),b("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),b("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var HC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pNe=new Set("cancel close invalid load scroll toggle".split(" ").concat(HC));function Xme(c,p,w){var k=c.type||"unknown-event";c.currentTarget=w,pLe(k,p,void 0,c),c.currentTarget=null}function qme(c,p){p=(p&4)!==0;for(var w=0;w<c.length;w++){var k=c[w],H=k.event;k=k.listeners;e:{var K=void 0;if(p)for(var oe=k.length-1;0<=oe;oe--){var ke=k[oe],Ue=ke.instance,vt=ke.currentTarget;if(ke=ke.listener,Ue!==K&&H.isPropagationStopped())break e;Xme(H,ke,vt),K=Ue}else for(oe=0;oe<k.length;oe++){if(ke=k[oe],Ue=ke.instance,vt=ke.currentTarget,ke=ke.listener,Ue!==K&&H.isPropagationStopped())break e;Xme(H,ke,vt),K=Ue}}}if(wO)throw c=Y6,wO=!1,Y6=null,c}function Ei(c,p){var w=p[C8];w===void 0&&(w=p[C8]=new Set);var k=c+"__bubble";w.has(k)||(Yme(p,c,2,!1),w.add(k))}function y8(c,p,w){var k=0;p&&(k|=4),Yme(w,c,k,p)}var VO="_reactListening"+Math.random().toString(36).slice(2);function GC(c){if(!c[VO]){c[VO]=!0,f.forEach(function(w){w!=="selectionchange"&&(pNe.has(w)||y8(w,!1,c),y8(w,!0,c))});var p=c.nodeType===9?c:c.ownerDocument;p===null||p[VO]||(p[VO]=!0,y8("selectionchange",!1,p))}}function Yme(c,p,w,k){switch(yme(p)){case 1:var H=kLe;break;case 4:H=ALe;break;default:H=r8}w=H.bind(null,p,w,c),H=void 0,!q6||p!=="touchstart"&&p!=="touchmove"&&p!=="wheel"||(H=!0),k?H!==void 0?c.addEventListener(p,w,{capture:!0,passive:H}):c.addEventListener(p,w,!0):H!==void 0?c.addEventListener(p,w,{passive:H}):c.addEventListener(p,w,!1)}function b8(c,p,w,k,H){var K=k;if(!(p&1)&&!(p&2)&&k!==null)e:for(;;){if(k===null)return;var oe=k.tag;if(oe===3||oe===4){var ke=k.stateNode.containerInfo;if(ke===H||ke.nodeType===8&&ke.parentNode===H)break;if(oe===4)for(oe=k.return;oe!==null;){var Ue=oe.tag;if((Ue===3||Ue===4)&&(Ue=oe.stateNode.containerInfo,Ue===H||Ue.nodeType===8&&Ue.parentNode===H))return;oe=oe.return}for(;ke!==null;){if(oe=Uv(ke),oe===null)return;if(Ue=oe.tag,Ue===5||Ue===6){k=K=oe;continue e}ke=ke.parentNode}}k=k.return}eme(function(){var vt=K,jt=PC(w),$t=[];e:{var Vt=Gme.get(c);if(Vt!==void 0){var hn=o8,wn=c;switch(c){case"keypress":if(RO(w)===0)break e;case"keydown":case"keyup":hn=WLe;break;case"focusin":wn="focus",hn=u8;break;case"focusout":wn="blur",hn=u8;break;case"beforeblur":case"afterblur":hn=u8;break;case"click":if(w.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":hn=wme;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":hn=DLe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":hn=XLe;break;case zme:case Vme:case jme:hn=NLe;break;case Hme:hn=YLe;break;case"scroll":hn=ILe;break;case"wheel":hn=QLe;break;case"copy":case"cut":case"paste":hn=BLe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":hn=Sme}var Pn=(p&4)!==0,gs=!Pn&&c==="scroll",rt=Pn?Vt!==null?Vt+"Capture":null:Vt;Pn=[];for(var $e=vt,ct;$e!==null;){ct=$e;var qt=ct.stateNode;if(ct.tag===5&&qt!==null&&(ct=qt,rt!==null&&(qt=TC($e,rt),qt!=null&&Pn.push(WC($e,qt,ct)))),gs)break;$e=$e.return}0<Pn.length&&(Vt=new hn(Vt,wn,null,w,jt),$t.push({event:Vt,listeners:Pn}))}}if(!(p&7)){e:{if(Vt=c==="mouseover"||c==="pointerover",hn=c==="mouseout"||c==="pointerout",Vt&&w!==CC&&(wn=w.relatedTarget||w.fromElement)&&(Uv(wn)||wn[Ih]))break e;if((hn||Vt)&&(Vt=jt.window===jt?jt:(Vt=jt.ownerDocument)?Vt.defaultView||Vt.parentWindow:window,hn?(wn=w.relatedTarget||w.toElement,hn=vt,wn=wn?Uv(wn):null,wn!==null&&(gs=Bv(wn),wn!==gs||wn.tag!==5&&wn.tag!==6)&&(wn=null)):(hn=null,wn=vt),hn!==wn)){if(Pn=wme,qt="onMouseLeave",rt="onMouseEnter",$e="mouse",(c==="pointerout"||c==="pointerover")&&(Pn=Sme,qt="onPointerLeave",rt="onPointerEnter",$e="pointer"),gs=hn==null?Vt:w_(hn),ct=wn==null?Vt:w_(wn),Vt=new Pn(qt,$e+"leave",hn,w,jt),Vt.target=gs,Vt.relatedTarget=ct,qt=null,Uv(jt)===vt&&(Pn=new Pn(rt,$e+"enter",wn,w,jt),Pn.target=ct,Pn.relatedTarget=gs,qt=Pn),gs=qt,hn&&wn)t:{for(Pn=hn,rt=wn,$e=0,ct=Pn;ct;ct=b_(ct))$e++;for(ct=0,qt=rt;qt;qt=b_(qt))ct++;for(;0<$e-ct;)Pn=b_(Pn),$e--;for(;0<ct-$e;)rt=b_(rt),ct--;for(;$e--;){if(Pn===rt||rt!==null&&Pn===rt.alternate)break t;Pn=b_(Pn),rt=b_(rt)}Pn=null}else Pn=null;hn!==null&&Zme($t,Vt,hn,Pn,!1),wn!==null&&gs!==null&&Zme($t,gs,wn,Pn,!0)}}e:{if(Vt=vt?w_(vt):window,hn=Vt.nodeName&&Vt.nodeName.toLowerCase(),hn==="select"||hn==="input"&&Vt.type==="file")var An=sNe;else if(kme(Vt))if(Ime)An=uNe;else{An=aNe;var Wn=oNe}else(hn=Vt.nodeName)&&hn.toLowerCase()==="input"&&(Vt.type==="checkbox"||Vt.type==="radio")&&(An=lNe);if(An&&(An=An(c,vt))){Ame($t,An,w,jt);break e}Wn&&Wn(c,Vt,vt),c==="focusout"&&(Wn=Vt._wrapperState)&&Wn.controlled&&Vt.type==="number"&&Pt(Vt,"number",Vt.value)}switch(Wn=vt?w_(vt):window,c){case"focusin":(kme(Wn)||Wn.contentEditable==="true")&&(v_=Wn,m8=vt,jC=null);break;case"focusout":jC=m8=v_=null;break;case"mousedown":g8=!0;break;case"contextmenu":case"mouseup":case"dragend":g8=!1,Bme($t,w,jt);break;case"selectionchange":if(hNe)break;case"keydown":case"keyup":Bme($t,w,jt)}var $n;if(d8)e:{switch(c){case"compositionstart":var nr="onCompositionStart";break e;case"compositionend":nr="onCompositionEnd";break e;case"compositionupdate":nr="onCompositionUpdate";break e}nr=void 0}else g_?Tme(c,w)&&(nr="onCompositionEnd"):c==="keydown"&&w.keyCode===229&&(nr="onCompositionStart");nr&&(Eme&&w.locale!=="ko"&&(g_||nr!=="onCompositionStart"?nr==="onCompositionEnd"&&g_&&($n=bme()):(Ff=jt,s8="value"in Ff?Ff.value:Ff.textContent,g_=!0)),Wn=jO(vt,nr),0<Wn.length&&(nr=new xme(nr,c,null,w,jt),$t.push({event:nr,listeners:Wn}),$n?nr.data=$n:($n=Mme(w),$n!==null&&(nr.data=$n)))),($n=eNe?tNe(c,w):nNe(c,w))&&(vt=jO(vt,"onBeforeInput"),0<vt.length&&(jt=new xme("onBeforeInput","beforeinput",null,w,jt),$t.push({event:jt,listeners:vt}),jt.data=$n))}qme($t,p)})}function WC(c,p,w){return{instance:c,listener:p,currentTarget:w}}function jO(c,p){for(var w=p+"Capture",k=[];c!==null;){var H=c,K=H.stateNode;H.tag===5&&K!==null&&(H=K,K=TC(c,w),K!=null&&k.unshift(WC(c,K,H)),K=TC(c,p),K!=null&&k.push(WC(c,K,H))),c=c.return}return k}function b_(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function Zme(c,p,w,k,H){for(var K=p._reactName,oe=[];w!==null&&w!==k;){var ke=w,Ue=ke.alternate,vt=ke.stateNode;if(Ue!==null&&Ue===k)break;ke.tag===5&&vt!==null&&(ke=vt,H?(Ue=TC(w,K),Ue!=null&&oe.unshift(WC(w,Ue,ke))):H||(Ue=TC(w,K),Ue!=null&&oe.push(WC(w,Ue,ke)))),w=w.return}oe.length!==0&&c.push({event:p,listeners:oe})}var fNe=/\r\n?/g,mNe=/\u0000|\uFFFD/g;function Qme(c){return(typeof c=="string"?c:""+c).replace(fNe,`
`).replace(mNe,"")}function HO(c,p,w){if(p=Qme(p),Qme(c)!==p&&w)throw Error(h(425))}function GO(){}var _8=null,w8=null;function x8(c,p){return c==="textarea"||c==="noscript"||typeof p.children=="string"||typeof p.children=="number"||typeof p.dangerouslySetInnerHTML=="object"&&p.dangerouslySetInnerHTML!==null&&p.dangerouslySetInnerHTML.__html!=null}var S8=typeof setTimeout=="function"?setTimeout:void 0,gNe=typeof clearTimeout=="function"?clearTimeout:void 0,Jme=typeof Promise=="function"?Promise:void 0,vNe=typeof queueMicrotask=="function"?queueMicrotask:typeof Jme<"u"?function(c){return Jme.resolve(null).then(c).catch(yNe)}:S8;function yNe(c){setTimeout(function(){throw c})}function E8(c,p){var w=p,k=0;do{var H=w.nextSibling;if(c.removeChild(w),H&&H.nodeType===8)if(w=H.data,w==="/$"){if(k===0){c.removeChild(H),LC(p);return}k--}else w!=="$"&&w!=="$?"&&w!=="$!"||k++;w=H}while(w);LC(p)}function Uf(c){for(;c!=null;c=c.nextSibling){var p=c.nodeType;if(p===1||p===3)break;if(p===8){if(p=c.data,p==="$"||p==="$!"||p==="$?")break;if(p==="/$")return null}}return c}function ege(c){c=c.previousSibling;for(var p=0;c;){if(c.nodeType===8){var w=c.data;if(w==="$"||w==="$!"||w==="$?"){if(p===0)return c;p--}else w==="/$"&&p++}c=c.previousSibling}return null}var __=Math.random().toString(36).slice(2),fd="__reactFiber$"+__,$C="__reactProps$"+__,Ih="__reactContainer$"+__,C8="__reactEvents$"+__,bNe="__reactListeners$"+__,_Ne="__reactHandles$"+__;function Uv(c){var p=c[fd];if(p)return p;for(var w=c.parentNode;w;){if(p=w[Ih]||w[fd]){if(w=p.alternate,p.child!==null||w!==null&&w.child!==null)for(c=ege(c);c!==null;){if(w=c[fd])return w;c=ege(c)}return p}c=w,w=c.parentNode}return null}function KC(c){return c=c[fd]||c[Ih],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function w_(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(h(33))}function WO(c){return c[$C]||null}var P8=[],x_=-1;function zf(c){return{current:c}}function Ci(c){0>x_||(c.current=P8[x_],P8[x_]=null,x_--)}function mi(c,p){x_++,P8[x_]=c.current,c.current=p}var Vf={},zo=zf(Vf),Va=zf(!1),zv=Vf;function S_(c,p){var w=c.type.contextTypes;if(!w)return Vf;var k=c.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===p)return k.__reactInternalMemoizedMaskedChildContext;var H={},K;for(K in w)H[K]=p[K];return k&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=p,c.__reactInternalMemoizedMaskedChildContext=H),H}function ja(c){return c=c.childContextTypes,c!=null}function $O(){Ci(Va),Ci(zo)}function tge(c,p,w){if(zo.current!==Vf)throw Error(h(168));mi(zo,p),mi(Va,w)}function nge(c,p,w){var k=c.stateNode;if(p=p.childContextTypes,typeof k.getChildContext!="function")return w;k=k.getChildContext();for(var H in k)if(!(H in p))throw Error(h(108,Et(c)||"Unknown",H));return ce({},w,k)}function KO(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Vf,zv=zo.current,mi(zo,c),mi(Va,Va.current),!0}function rge(c,p,w){var k=c.stateNode;if(!k)throw Error(h(169));w?(c=nge(c,p,zv),k.__reactInternalMemoizedMergedChildContext=c,Ci(Va),Ci(zo),mi(zo,c)):Ci(Va),mi(Va,w)}var Rh=null,XO=!1,T8=!1;function ige(c){Rh===null?Rh=[c]:Rh.push(c)}function wNe(c){XO=!0,ige(c)}function jf(){if(!T8&&Rh!==null){T8=!0;var c=0,p=ti;try{var w=Rh;for(ti=1;c<w.length;c++){var k=w[c];do k=k(!0);while(k!==null)}Rh=null,XO=!1}catch(H){throw Rh!==null&&(Rh=Rh.slice(c+1)),sme(Z6,jf),H}finally{ti=p,T8=!1}}return null}var E_=[],C_=0,qO=null,YO=0,Jl=[],eu=0,Vv=null,Dh=1,Oh="";function jv(c,p){E_[C_++]=YO,E_[C_++]=qO,qO=c,YO=p}function sge(c,p,w){Jl[eu++]=Dh,Jl[eu++]=Oh,Jl[eu++]=Vv,Vv=c;var k=Dh;c=Oh;var H=32-ic(k)-1;k&=~(1<<H),w+=1;var K=32-ic(p)+H;if(30<K){var oe=H-H%5;K=(k&(1<<oe)-1).toString(32),k>>=oe,H-=oe,Dh=1<<32-ic(p)+H|w<<H|k,Oh=K+c}else Dh=1<<K|w<<H|k,Oh=c}function M8(c){c.return!==null&&(jv(c,1),sge(c,1,0))}function k8(c){for(;c===qO;)qO=E_[--C_],E_[C_]=null,YO=E_[--C_],E_[C_]=null;for(;c===Vv;)Vv=Jl[--eu],Jl[eu]=null,Oh=Jl[--eu],Jl[eu]=null,Dh=Jl[--eu],Jl[eu]=null}var dl=null,hl=null,Ri=!1,oc=null;function oge(c,p){var w=iu(5,null,null,0);w.elementType="DELETED",w.stateNode=p,w.return=c,p=c.deletions,p===null?(c.deletions=[w],c.flags|=16):p.push(w)}function age(c,p){switch(c.tag){case 5:var w=c.type;return p=p.nodeType!==1||w.toLowerCase()!==p.nodeName.toLowerCase()?null:p,p!==null?(c.stateNode=p,dl=c,hl=Uf(p.firstChild),!0):!1;case 6:return p=c.pendingProps===""||p.nodeType!==3?null:p,p!==null?(c.stateNode=p,dl=c,hl=null,!0):!1;case 13:return p=p.nodeType!==8?null:p,p!==null?(w=Vv!==null?{id:Dh,overflow:Oh}:null,c.memoizedState={dehydrated:p,treeContext:w,retryLane:1073741824},w=iu(18,null,null,0),w.stateNode=p,w.return=c,c.child=w,dl=c,hl=null,!0):!1;default:return!1}}function A8(c){return(c.mode&1)!==0&&(c.flags&128)===0}function I8(c){if(Ri){var p=hl;if(p){var w=p;if(!age(c,p)){if(A8(c))throw Error(h(418));p=Uf(w.nextSibling);var k=dl;p&&age(c,p)?oge(k,w):(c.flags=c.flags&-4097|2,Ri=!1,dl=c)}}else{if(A8(c))throw Error(h(418));c.flags=c.flags&-4097|2,Ri=!1,dl=c}}}function lge(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;dl=c}function ZO(c){if(c!==dl)return!1;if(!Ri)return lge(c),Ri=!0,!1;var p;if((p=c.tag!==3)&&!(p=c.tag!==5)&&(p=c.type,p=p!=="head"&&p!=="body"&&!x8(c.type,c.memoizedProps)),p&&(p=hl)){if(A8(c))throw uge(),Error(h(418));for(;p;)oge(c,p),p=Uf(p.nextSibling)}if(lge(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(h(317));e:{for(c=c.nextSibling,p=0;c;){if(c.nodeType===8){var w=c.data;if(w==="/$"){if(p===0){hl=Uf(c.nextSibling);break e}p--}else w!=="$"&&w!=="$!"&&w!=="$?"||p++}c=c.nextSibling}hl=null}}else hl=dl?Uf(c.stateNode.nextSibling):null;return!0}function uge(){for(var c=hl;c;)c=Uf(c.nextSibling)}function P_(){hl=dl=null,Ri=!1}function R8(c){oc===null?oc=[c]:oc.push(c)}var xNe=ne.ReactCurrentBatchConfig;function ac(c,p){if(c&&c.defaultProps){p=ce({},p),c=c.defaultProps;for(var w in c)p[w]===void 0&&(p[w]=c[w]);return p}return p}var QO=zf(null),JO=null,T_=null,D8=null;function O8(){D8=T_=JO=null}function L8(c){var p=QO.current;Ci(QO),c._currentValue=p}function N8(c,p,w){for(;c!==null;){var k=c.alternate;if((c.childLanes&p)!==p?(c.childLanes|=p,k!==null&&(k.childLanes|=p)):k!==null&&(k.childLanes&p)!==p&&(k.childLanes|=p),c===w)break;c=c.return}}function M_(c,p){JO=c,D8=T_=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&p&&(Ha=!0),c.firstContext=null)}function tu(c){var p=c._currentValue;if(D8!==c)if(c={context:c,memoizedValue:p,next:null},T_===null){if(JO===null)throw Error(h(308));T_=c,JO.dependencies={lanes:0,firstContext:c}}else T_=T_.next=c;return p}var Hv=null;function F8(c){Hv===null?Hv=[c]:Hv.push(c)}function cge(c,p,w,k){var H=p.interleaved;return H===null?(w.next=w,F8(p)):(w.next=H.next,H.next=w),p.interleaved=w,Lh(c,k)}function Lh(c,p){c.lanes|=p;var w=c.alternate;for(w!==null&&(w.lanes|=p),w=c,c=c.return;c!==null;)c.childLanes|=p,w=c.alternate,w!==null&&(w.childLanes|=p),w=c,c=c.return;return w.tag===3?w.stateNode:null}var Hf=!1;function B8(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dge(c,p){c=c.updateQueue,p.updateQueue===c&&(p.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Nh(c,p){return{eventTime:c,lane:p,tag:0,payload:null,callback:null,next:null}}function Gf(c,p,w){var k=c.updateQueue;if(k===null)return null;if(k=k.shared,Lr&2){var H=k.pending;return H===null?p.next=p:(p.next=H.next,H.next=p),k.pending=p,Lh(c,w)}return H=k.interleaved,H===null?(p.next=p,F8(k)):(p.next=H.next,H.next=p),k.interleaved=p,Lh(c,w)}function e3(c,p,w){if(p=p.updateQueue,p!==null&&(p=p.shared,(w&4194240)!==0)){var k=p.lanes;k&=c.pendingLanes,w|=k,p.lanes=w,e8(c,w)}}function hge(c,p){var w=c.updateQueue,k=c.alternate;if(k!==null&&(k=k.updateQueue,w===k)){var H=null,K=null;if(w=w.firstBaseUpdate,w!==null){do{var oe={eventTime:w.eventTime,lane:w.lane,tag:w.tag,payload:w.payload,callback:w.callback,next:null};K===null?H=K=oe:K=K.next=oe,w=w.next}while(w!==null);K===null?H=K=p:K=K.next=p}else H=K=p;w={baseState:k.baseState,firstBaseUpdate:H,lastBaseUpdate:K,shared:k.shared,effects:k.effects},c.updateQueue=w;return}c=w.lastBaseUpdate,c===null?w.firstBaseUpdate=p:c.next=p,w.lastBaseUpdate=p}function t3(c,p,w,k){var H=c.updateQueue;Hf=!1;var K=H.firstBaseUpdate,oe=H.lastBaseUpdate,ke=H.shared.pending;if(ke!==null){H.shared.pending=null;var Ue=ke,vt=Ue.next;Ue.next=null,oe===null?K=vt:oe.next=vt,oe=Ue;var jt=c.alternate;jt!==null&&(jt=jt.updateQueue,ke=jt.lastBaseUpdate,ke!==oe&&(ke===null?jt.firstBaseUpdate=vt:ke.next=vt,jt.lastBaseUpdate=Ue))}if(K!==null){var $t=H.baseState;oe=0,jt=vt=Ue=null,ke=K;do{var Vt=ke.lane,hn=ke.eventTime;if((k&Vt)===Vt){jt!==null&&(jt=jt.next={eventTime:hn,lane:0,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null});e:{var wn=c,Pn=ke;switch(Vt=p,hn=w,Pn.tag){case 1:if(wn=Pn.payload,typeof wn=="function"){$t=wn.call(hn,$t,Vt);break e}$t=wn;break e;case 3:wn.flags=wn.flags&-65537|128;case 0:if(wn=Pn.payload,Vt=typeof wn=="function"?wn.call(hn,$t,Vt):wn,Vt==null)break e;$t=ce({},$t,Vt);break e;case 2:Hf=!0}}ke.callback!==null&&ke.lane!==0&&(c.flags|=64,Vt=H.effects,Vt===null?H.effects=[ke]:Vt.push(ke))}else hn={eventTime:hn,lane:Vt,tag:ke.tag,payload:ke.payload,callback:ke.callback,next:null},jt===null?(vt=jt=hn,Ue=$t):jt=jt.next=hn,oe|=Vt;if(ke=ke.next,ke===null){if(ke=H.shared.pending,ke===null)break;Vt=ke,ke=Vt.next,Vt.next=null,H.lastBaseUpdate=Vt,H.shared.pending=null}}while(1);if(jt===null&&(Ue=$t),H.baseState=Ue,H.firstBaseUpdate=vt,H.lastBaseUpdate=jt,p=H.shared.interleaved,p!==null){H=p;do oe|=H.lane,H=H.next;while(H!==p)}else K===null&&(H.shared.lanes=0);$v|=oe,c.lanes=oe,c.memoizedState=$t}}function pge(c,p,w){if(c=p.effects,p.effects=null,c!==null)for(p=0;p<c.length;p++){var k=c[p],H=k.callback;if(H!==null){if(k.callback=null,k=w,typeof H!="function")throw Error(h(191,H));H.call(k)}}}var fge=new a.Component().refs;function U8(c,p,w,k){p=c.memoizedState,w=w(k,p),w=w==null?p:ce({},p,w),c.memoizedState=w,c.lanes===0&&(c.updateQueue.baseState=w)}var n3={isMounted:function(c){return(c=c._reactInternals)?Bv(c)===c:!1},enqueueSetState:function(c,p,w){c=c._reactInternals;var k=ma(),H=Xf(c),K=Nh(k,H);K.payload=p,w!=null&&(K.callback=w),p=Gf(c,K,H),p!==null&&(cc(p,c,H,k),e3(p,c,H))},enqueueReplaceState:function(c,p,w){c=c._reactInternals;var k=ma(),H=Xf(c),K=Nh(k,H);K.tag=1,K.payload=p,w!=null&&(K.callback=w),p=Gf(c,K,H),p!==null&&(cc(p,c,H,k),e3(p,c,H))},enqueueForceUpdate:function(c,p){c=c._reactInternals;var w=ma(),k=Xf(c),H=Nh(w,k);H.tag=2,p!=null&&(H.callback=p),p=Gf(c,H,k),p!==null&&(cc(p,c,k,w),e3(p,c,k))}};function mge(c,p,w,k,H,K,oe){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(k,K,oe):p.prototype&&p.prototype.isPureReactComponent?!VC(w,k)||!VC(H,K):!0}function gge(c,p,w){var k=!1,H=Vf,K=p.contextType;return typeof K=="object"&&K!==null?K=tu(K):(H=ja(p)?zv:zo.current,k=p.contextTypes,K=(k=k!=null)?S_(c,H):Vf),p=new p(w,K),c.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=n3,c.stateNode=p,p._reactInternals=c,k&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=H,c.__reactInternalMemoizedMaskedChildContext=K),p}function vge(c,p,w,k){c=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(w,k),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(w,k),p.state!==c&&n3.enqueueReplaceState(p,p.state,null)}function z8(c,p,w,k){var H=c.stateNode;H.props=w,H.state=c.memoizedState,H.refs=fge,B8(c);var K=p.contextType;typeof K=="object"&&K!==null?H.context=tu(K):(K=ja(p)?zv:zo.current,H.context=S_(c,K)),H.state=c.memoizedState,K=p.getDerivedStateFromProps,typeof K=="function"&&(U8(c,p,K,w),H.state=c.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof H.getSnapshotBeforeUpdate=="function"||typeof H.UNSAFE_componentWillMount!="function"&&typeof H.componentWillMount!="function"||(p=H.state,typeof H.componentWillMount=="function"&&H.componentWillMount(),typeof H.UNSAFE_componentWillMount=="function"&&H.UNSAFE_componentWillMount(),p!==H.state&&n3.enqueueReplaceState(H,H.state,null),t3(c,w,H,k),H.state=c.memoizedState),typeof H.componentDidMount=="function"&&(c.flags|=4194308)}function XC(c,p,w){if(c=w.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(w._owner){if(w=w._owner,w){if(w.tag!==1)throw Error(h(309));var k=w.stateNode}if(!k)throw Error(h(147,c));var H=k,K=""+c;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===K?p.ref:(p=function(oe){var ke=H.refs;ke===fge&&(ke=H.refs={}),oe===null?delete ke[K]:ke[K]=oe},p._stringRef=K,p)}if(typeof c!="string")throw Error(h(284));if(!w._owner)throw Error(h(290,c))}return c}function r3(c,p){throw c=Object.prototype.toString.call(p),Error(h(31,c==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":c))}function yge(c){var p=c._init;return p(c._payload)}function bge(c){function p(rt,$e){if(c){var ct=rt.deletions;ct===null?(rt.deletions=[$e],rt.flags|=16):ct.push($e)}}function w(rt,$e){if(!c)return null;for(;$e!==null;)p(rt,$e),$e=$e.sibling;return null}function k(rt,$e){for(rt=new Map;$e!==null;)$e.key!==null?rt.set($e.key,$e):rt.set($e.index,$e),$e=$e.sibling;return rt}function H(rt,$e){return rt=Yf(rt,$e),rt.index=0,rt.sibling=null,rt}function K(rt,$e,ct){return rt.index=ct,c?(ct=rt.alternate,ct!==null?(ct=ct.index,ct<$e?(rt.flags|=2,$e):ct):(rt.flags|=2,$e)):(rt.flags|=1048576,$e)}function oe(rt){return c&&rt.alternate===null&&(rt.flags|=2),rt}function ke(rt,$e,ct,qt){return $e===null||$e.tag!==6?($e=xH(ct,rt.mode,qt),$e.return=rt,$e):($e=H($e,ct),$e.return=rt,$e)}function Ue(rt,$e,ct,qt){var An=ct.type;return An===ve?jt(rt,$e,ct.props.children,qt,ct.key):$e!==null&&($e.elementType===An||typeof An=="object"&&An!==null&&An.$$typeof===Ie&&yge(An)===$e.type)?(qt=H($e,ct.props),qt.ref=XC(rt,$e,ct),qt.return=rt,qt):(qt=x3(ct.type,ct.key,ct.props,null,rt.mode,qt),qt.ref=XC(rt,$e,ct),qt.return=rt,qt)}function vt(rt,$e,ct,qt){return $e===null||$e.tag!==4||$e.stateNode.containerInfo!==ct.containerInfo||$e.stateNode.implementation!==ct.implementation?($e=SH(ct,rt.mode,qt),$e.return=rt,$e):($e=H($e,ct.children||[]),$e.return=rt,$e)}function jt(rt,$e,ct,qt,An){return $e===null||$e.tag!==7?($e=Yv(ct,rt.mode,qt,An),$e.return=rt,$e):($e=H($e,ct),$e.return=rt,$e)}function $t(rt,$e,ct){if(typeof $e=="string"&&$e!==""||typeof $e=="number")return $e=xH(""+$e,rt.mode,ct),$e.return=rt,$e;if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case le:return ct=x3($e.type,$e.key,$e.props,null,rt.mode,ct),ct.ref=XC(rt,null,$e),ct.return=rt,ct;case Ce:return $e=SH($e,rt.mode,ct),$e.return=rt,$e;case Ie:var qt=$e._init;return $t(rt,qt($e._payload),ct)}if(It($e)||Ct($e))return $e=Yv($e,rt.mode,ct,null),$e.return=rt,$e;r3(rt,$e)}return null}function Vt(rt,$e,ct,qt){var An=$e!==null?$e.key:null;if(typeof ct=="string"&&ct!==""||typeof ct=="number")return An!==null?null:ke(rt,$e,""+ct,qt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case le:return ct.key===An?Ue(rt,$e,ct,qt):null;case Ce:return ct.key===An?vt(rt,$e,ct,qt):null;case Ie:return An=ct._init,Vt(rt,$e,An(ct._payload),qt)}if(It(ct)||Ct(ct))return An!==null?null:jt(rt,$e,ct,qt,null);r3(rt,ct)}return null}function hn(rt,$e,ct,qt,An){if(typeof qt=="string"&&qt!==""||typeof qt=="number")return rt=rt.get(ct)||null,ke($e,rt,""+qt,An);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case le:return rt=rt.get(qt.key===null?ct:qt.key)||null,Ue($e,rt,qt,An);case Ce:return rt=rt.get(qt.key===null?ct:qt.key)||null,vt($e,rt,qt,An);case Ie:var Wn=qt._init;return hn(rt,$e,ct,Wn(qt._payload),An)}if(It(qt)||Ct(qt))return rt=rt.get(ct)||null,jt($e,rt,qt,An,null);r3($e,qt)}return null}function wn(rt,$e,ct,qt){for(var An=null,Wn=null,$n=$e,nr=$e=0,Js=null;$n!==null&&nr<ct.length;nr++){$n.index>nr?(Js=$n,$n=null):Js=$n.sibling;var $r=Vt(rt,$n,ct[nr],qt);if($r===null){$n===null&&($n=Js);break}c&&$n&&$r.alternate===null&&p(rt,$n),$e=K($r,$e,nr),Wn===null?An=$r:Wn.sibling=$r,Wn=$r,$n=Js}if(nr===ct.length)return w(rt,$n),Ri&&jv(rt,nr),An;if($n===null){for(;nr<ct.length;nr++)$n=$t(rt,ct[nr],qt),$n!==null&&($e=K($n,$e,nr),Wn===null?An=$n:Wn.sibling=$n,Wn=$n);return Ri&&jv(rt,nr),An}for($n=k(rt,$n);nr<ct.length;nr++)Js=hn($n,rt,nr,ct[nr],qt),Js!==null&&(c&&Js.alternate!==null&&$n.delete(Js.key===null?nr:Js.key),$e=K(Js,$e,nr),Wn===null?An=Js:Wn.sibling=Js,Wn=Js);return c&&$n.forEach(function(Zf){return p(rt,Zf)}),Ri&&jv(rt,nr),An}function Pn(rt,$e,ct,qt){var An=Ct(ct);if(typeof An!="function")throw Error(h(150));if(ct=An.call(ct),ct==null)throw Error(h(151));for(var Wn=An=null,$n=$e,nr=$e=0,Js=null,$r=ct.next();$n!==null&&!$r.done;nr++,$r=ct.next()){$n.index>nr?(Js=$n,$n=null):Js=$n.sibling;var Zf=Vt(rt,$n,$r.value,qt);if(Zf===null){$n===null&&($n=Js);break}c&&$n&&Zf.alternate===null&&p(rt,$n),$e=K(Zf,$e,nr),Wn===null?An=Zf:Wn.sibling=Zf,Wn=Zf,$n=Js}if($r.done)return w(rt,$n),Ri&&jv(rt,nr),An;if($n===null){for(;!$r.done;nr++,$r=ct.next())$r=$t(rt,$r.value,qt),$r!==null&&($e=K($r,$e,nr),Wn===null?An=$r:Wn.sibling=$r,Wn=$r);return Ri&&jv(rt,nr),An}for($n=k(rt,$n);!$r.done;nr++,$r=ct.next())$r=hn($n,rt,nr,$r.value,qt),$r!==null&&(c&&$r.alternate!==null&&$n.delete($r.key===null?nr:$r.key),$e=K($r,$e,nr),Wn===null?An=$r:Wn.sibling=$r,Wn=$r);return c&&$n.forEach(function(tFe){return p(rt,tFe)}),Ri&&jv(rt,nr),An}function gs(rt,$e,ct,qt){if(typeof ct=="object"&&ct!==null&&ct.type===ve&&ct.key===null&&(ct=ct.props.children),typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case le:e:{for(var An=ct.key,Wn=$e;Wn!==null;){if(Wn.key===An){if(An=ct.type,An===ve){if(Wn.tag===7){w(rt,Wn.sibling),$e=H(Wn,ct.props.children),$e.return=rt,rt=$e;break e}}else if(Wn.elementType===An||typeof An=="object"&&An!==null&&An.$$typeof===Ie&&yge(An)===Wn.type){w(rt,Wn.sibling),$e=H(Wn,ct.props),$e.ref=XC(rt,Wn,ct),$e.return=rt,rt=$e;break e}w(rt,Wn);break}else p(rt,Wn);Wn=Wn.sibling}ct.type===ve?($e=Yv(ct.props.children,rt.mode,qt,ct.key),$e.return=rt,rt=$e):(qt=x3(ct.type,ct.key,ct.props,null,rt.mode,qt),qt.ref=XC(rt,$e,ct),qt.return=rt,rt=qt)}return oe(rt);case Ce:e:{for(Wn=ct.key;$e!==null;){if($e.key===Wn)if($e.tag===4&&$e.stateNode.containerInfo===ct.containerInfo&&$e.stateNode.implementation===ct.implementation){w(rt,$e.sibling),$e=H($e,ct.children||[]),$e.return=rt,rt=$e;break e}else{w(rt,$e);break}else p(rt,$e);$e=$e.sibling}$e=SH(ct,rt.mode,qt),$e.return=rt,rt=$e}return oe(rt);case Ie:return Wn=ct._init,gs(rt,$e,Wn(ct._payload),qt)}if(It(ct))return wn(rt,$e,ct,qt);if(Ct(ct))return Pn(rt,$e,ct,qt);r3(rt,ct)}return typeof ct=="string"&&ct!==""||typeof ct=="number"?(ct=""+ct,$e!==null&&$e.tag===6?(w(rt,$e.sibling),$e=H($e,ct),$e.return=rt,rt=$e):(w(rt,$e),$e=xH(ct,rt.mode,qt),$e.return=rt,rt=$e),oe(rt)):w(rt,$e)}return gs}var k_=bge(!0),_ge=bge(!1),qC={},md=zf(qC),YC=zf(qC),ZC=zf(qC);function Gv(c){if(c===qC)throw Error(h(174));return c}function V8(c,p){switch(mi(ZC,p),mi(YC,c),mi(md,qC),c=p.nodeType,c){case 9:case 11:p=(p=p.documentElement)?p.namespaceURI:tr(null,"");break;default:c=c===8?p.parentNode:p,p=c.namespaceURI||null,c=c.tagName,p=tr(p,c)}Ci(md),mi(md,p)}function A_(){Ci(md),Ci(YC),Ci(ZC)}function wge(c){Gv(ZC.current);var p=Gv(md.current),w=tr(p,c.type);p!==w&&(mi(YC,c),mi(md,w))}function j8(c){YC.current===c&&(Ci(md),Ci(YC))}var ji=zf(0);function i3(c){for(var p=c;p!==null;){if(p.tag===13){var w=p.memoizedState;if(w!==null&&(w=w.dehydrated,w===null||w.data==="$?"||w.data==="$!"))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var H8=[];function G8(){for(var c=0;c<H8.length;c++)H8[c]._workInProgressVersionPrimary=null;H8.length=0}var s3=ne.ReactCurrentDispatcher,W8=ne.ReactCurrentBatchConfig,Wv=0,Hi=null,Ns=null,Zs=null,o3=!1,QC=!1,JC=0,SNe=0;function Vo(){throw Error(h(321))}function $8(c,p){if(p===null)return!1;for(var w=0;w<p.length&&w<c.length;w++)if(!sc(c[w],p[w]))return!1;return!0}function K8(c,p,w,k,H,K){if(Wv=K,Hi=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,s3.current=c===null||c.memoizedState===null?TNe:MNe,c=w(k,H),QC){K=0;do{if(QC=!1,JC=0,25<=K)throw Error(h(301));K+=1,Zs=Ns=null,p.updateQueue=null,s3.current=kNe,c=w(k,H)}while(QC)}if(s3.current=u3,p=Ns!==null&&Ns.next!==null,Wv=0,Zs=Ns=Hi=null,o3=!1,p)throw Error(h(300));return c}function X8(){var c=JC!==0;return JC=0,c}function gd(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zs===null?Hi.memoizedState=Zs=c:Zs=Zs.next=c,Zs}function nu(){if(Ns===null){var c=Hi.alternate;c=c!==null?c.memoizedState:null}else c=Ns.next;var p=Zs===null?Hi.memoizedState:Zs.next;if(p!==null)Zs=p,Ns=c;else{if(c===null)throw Error(h(310));Ns=c,c={memoizedState:Ns.memoizedState,baseState:Ns.baseState,baseQueue:Ns.baseQueue,queue:Ns.queue,next:null},Zs===null?Hi.memoizedState=Zs=c:Zs=Zs.next=c}return Zs}function eP(c,p){return typeof p=="function"?p(c):p}function q8(c){var p=nu(),w=p.queue;if(w===null)throw Error(h(311));w.lastRenderedReducer=c;var k=Ns,H=k.baseQueue,K=w.pending;if(K!==null){if(H!==null){var oe=H.next;H.next=K.next,K.next=oe}k.baseQueue=H=K,w.pending=null}if(H!==null){K=H.next,k=k.baseState;var ke=oe=null,Ue=null,vt=K;do{var jt=vt.lane;if((Wv&jt)===jt)Ue!==null&&(Ue=Ue.next={lane:0,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null}),k=vt.hasEagerState?vt.eagerState:c(k,vt.action);else{var $t={lane:jt,action:vt.action,hasEagerState:vt.hasEagerState,eagerState:vt.eagerState,next:null};Ue===null?(ke=Ue=$t,oe=k):Ue=Ue.next=$t,Hi.lanes|=jt,$v|=jt}vt=vt.next}while(vt!==null&&vt!==K);Ue===null?oe=k:Ue.next=ke,sc(k,p.memoizedState)||(Ha=!0),p.memoizedState=k,p.baseState=oe,p.baseQueue=Ue,w.lastRenderedState=k}if(c=w.interleaved,c!==null){H=c;do K=H.lane,Hi.lanes|=K,$v|=K,H=H.next;while(H!==c)}else H===null&&(w.lanes=0);return[p.memoizedState,w.dispatch]}function Y8(c){var p=nu(),w=p.queue;if(w===null)throw Error(h(311));w.lastRenderedReducer=c;var k=w.dispatch,H=w.pending,K=p.memoizedState;if(H!==null){w.pending=null;var oe=H=H.next;do K=c(K,oe.action),oe=oe.next;while(oe!==H);sc(K,p.memoizedState)||(Ha=!0),p.memoizedState=K,p.baseQueue===null&&(p.baseState=K),w.lastRenderedState=K}return[K,k]}function xge(){}function Sge(c,p){var w=Hi,k=nu(),H=p(),K=!sc(k.memoizedState,H);if(K&&(k.memoizedState=H,Ha=!0),k=k.queue,Z8(Pge.bind(null,w,k,c),[c]),k.getSnapshot!==p||K||Zs!==null&&Zs.memoizedState.tag&1){if(w.flags|=2048,tP(9,Cge.bind(null,w,k,H,p),void 0,null),Qs===null)throw Error(h(349));Wv&30||Ege(w,p,H)}return H}function Ege(c,p,w){c.flags|=16384,c={getSnapshot:p,value:w},p=Hi.updateQueue,p===null?(p={lastEffect:null,stores:null},Hi.updateQueue=p,p.stores=[c]):(w=p.stores,w===null?p.stores=[c]:w.push(c))}function Cge(c,p,w,k){p.value=w,p.getSnapshot=k,Tge(p)&&Mge(c)}function Pge(c,p,w){return w(function(){Tge(p)&&Mge(c)})}function Tge(c){var p=c.getSnapshot;c=c.value;try{var w=p();return!sc(c,w)}catch{return!0}}function Mge(c){var p=Lh(c,1);p!==null&&cc(p,c,1,-1)}function kge(c){var p=gd();return typeof c=="function"&&(c=c()),p.memoizedState=p.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eP,lastRenderedState:c},p.queue=c,c=c.dispatch=PNe.bind(null,Hi,c),[p.memoizedState,c]}function tP(c,p,w,k){return c={tag:c,create:p,destroy:w,deps:k,next:null},p=Hi.updateQueue,p===null?(p={lastEffect:null,stores:null},Hi.updateQueue=p,p.lastEffect=c.next=c):(w=p.lastEffect,w===null?p.lastEffect=c.next=c:(k=w.next,w.next=c,c.next=k,p.lastEffect=c)),c}function Age(){return nu().memoizedState}function a3(c,p,w,k){var H=gd();Hi.flags|=c,H.memoizedState=tP(1|p,w,void 0,k===void 0?null:k)}function l3(c,p,w,k){var H=nu();k=k===void 0?null:k;var K=void 0;if(Ns!==null){var oe=Ns.memoizedState;if(K=oe.destroy,k!==null&&$8(k,oe.deps)){H.memoizedState=tP(p,w,K,k);return}}Hi.flags|=c,H.memoizedState=tP(1|p,w,K,k)}function Ige(c,p){return a3(8390656,8,c,p)}function Z8(c,p){return l3(2048,8,c,p)}function Rge(c,p){return l3(4,2,c,p)}function Dge(c,p){return l3(4,4,c,p)}function Oge(c,p){if(typeof p=="function")return c=c(),p(c),function(){p(null)};if(p!=null)return c=c(),p.current=c,function(){p.current=null}}function Lge(c,p,w){return w=w!=null?w.concat([c]):null,l3(4,4,Oge.bind(null,p,c),w)}function Q8(){}function Nge(c,p){var w=nu();p=p===void 0?null:p;var k=w.memoizedState;return k!==null&&p!==null&&$8(p,k[1])?k[0]:(w.memoizedState=[c,p],c)}function Fge(c,p){var w=nu();p=p===void 0?null:p;var k=w.memoizedState;return k!==null&&p!==null&&$8(p,k[1])?k[0]:(c=c(),w.memoizedState=[c,p],c)}function Bge(c,p,w){return Wv&21?(sc(w,p)||(w=ume(),Hi.lanes|=w,$v|=w,c.baseState=!0),p):(c.baseState&&(c.baseState=!1,Ha=!0),c.memoizedState=w)}function ENe(c,p){var w=ti;ti=w!==0&&4>w?w:4,c(!0);var k=W8.transition;W8.transition={};try{c(!1),p()}finally{ti=w,W8.transition=k}}function Uge(){return nu().memoizedState}function CNe(c,p,w){var k=Xf(c);if(w={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null},zge(c))Vge(p,w);else if(w=cge(c,p,w,k),w!==null){var H=ma();cc(w,c,k,H),jge(w,p,k)}}function PNe(c,p,w){var k=Xf(c),H={lane:k,action:w,hasEagerState:!1,eagerState:null,next:null};if(zge(c))Vge(p,H);else{var K=c.alternate;if(c.lanes===0&&(K===null||K.lanes===0)&&(K=p.lastRenderedReducer,K!==null))try{var oe=p.lastRenderedState,ke=K(oe,w);if(H.hasEagerState=!0,H.eagerState=ke,sc(ke,oe)){var Ue=p.interleaved;Ue===null?(H.next=H,F8(p)):(H.next=Ue.next,Ue.next=H),p.interleaved=H;return}}catch{}finally{}w=cge(c,p,H,k),w!==null&&(H=ma(),cc(w,c,k,H),jge(w,p,k))}}function zge(c){var p=c.alternate;return c===Hi||p!==null&&p===Hi}function Vge(c,p){QC=o3=!0;var w=c.pending;w===null?p.next=p:(p.next=w.next,w.next=p),c.pending=p}function jge(c,p,w){if(w&4194240){var k=p.lanes;k&=c.pendingLanes,w|=k,p.lanes=w,e8(c,w)}}var u3={readContext:tu,useCallback:Vo,useContext:Vo,useEffect:Vo,useImperativeHandle:Vo,useInsertionEffect:Vo,useLayoutEffect:Vo,useMemo:Vo,useReducer:Vo,useRef:Vo,useState:Vo,useDebugValue:Vo,useDeferredValue:Vo,useTransition:Vo,useMutableSource:Vo,useSyncExternalStore:Vo,useId:Vo,unstable_isNewReconciler:!1},TNe={readContext:tu,useCallback:function(c,p){return gd().memoizedState=[c,p===void 0?null:p],c},useContext:tu,useEffect:Ige,useImperativeHandle:function(c,p,w){return w=w!=null?w.concat([c]):null,a3(4194308,4,Oge.bind(null,p,c),w)},useLayoutEffect:function(c,p){return a3(4194308,4,c,p)},useInsertionEffect:function(c,p){return a3(4,2,c,p)},useMemo:function(c,p){var w=gd();return p=p===void 0?null:p,c=c(),w.memoizedState=[c,p],c},useReducer:function(c,p,w){var k=gd();return p=w!==void 0?w(p):p,k.memoizedState=k.baseState=p,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:p},k.queue=c,c=c.dispatch=CNe.bind(null,Hi,c),[k.memoizedState,c]},useRef:function(c){var p=gd();return c={current:c},p.memoizedState=c},useState:kge,useDebugValue:Q8,useDeferredValue:function(c){return gd().memoizedState=c},useTransition:function(){var c=kge(!1),p=c[0];return c=ENe.bind(null,c[1]),gd().memoizedState=c,[p,c]},useMutableSource:function(){},useSyncExternalStore:function(c,p,w){var k=Hi,H=gd();if(Ri){if(w===void 0)throw Error(h(407));w=w()}else{if(w=p(),Qs===null)throw Error(h(349));Wv&30||Ege(k,p,w)}H.memoizedState=w;var K={value:w,getSnapshot:p};return H.queue=K,Ige(Pge.bind(null,k,K,c),[c]),k.flags|=2048,tP(9,Cge.bind(null,k,K,w,p),void 0,null),w},useId:function(){var c=gd(),p=Qs.identifierPrefix;if(Ri){var w=Oh,k=Dh;w=(k&~(1<<32-ic(k)-1)).toString(32)+w,p=":"+p+"R"+w,w=JC++,0<w&&(p+="H"+w.toString(32)),p+=":"}else w=SNe++,p=":"+p+"r"+w.toString(32)+":";return c.memoizedState=p},unstable_isNewReconciler:!1},MNe={readContext:tu,useCallback:Nge,useContext:tu,useEffect:Z8,useImperativeHandle:Lge,useInsertionEffect:Rge,useLayoutEffect:Dge,useMemo:Fge,useReducer:q8,useRef:Age,useState:function(){return q8(eP)},useDebugValue:Q8,useDeferredValue:function(c){var p=nu();return Bge(p,Ns.memoizedState,c)},useTransition:function(){var c=q8(eP)[0],p=nu().memoizedState;return[c,p]},useMutableSource:xge,useSyncExternalStore:Sge,useId:Uge,unstable_isNewReconciler:!1},kNe={readContext:tu,useCallback:Nge,useContext:tu,useEffect:Z8,useImperativeHandle:Lge,useInsertionEffect:Rge,useLayoutEffect:Dge,useMemo:Fge,useReducer:Y8,useRef:Age,useState:function(){return Y8(eP)},useDebugValue:Q8,useDeferredValue:function(c){var p=nu();return Ns===null?p.memoizedState=c:Bge(p,Ns.memoizedState,c)},useTransition:function(){var c=Y8(eP)[0],p=nu().memoizedState;return[c,p]},useMutableSource:xge,useSyncExternalStore:Sge,useId:Uge,unstable_isNewReconciler:!1};function I_(c,p){try{var w="",k=p;do w+=Xe(k),k=k.return;while(k);var H=w}catch(K){H=`
Error generating stack: `+K.message+`
`+K.stack}return{value:c,source:p,stack:H,digest:null}}function J8(c,p,w){return{value:c,source:null,stack:w??null,digest:p??null}}function eH(c,p){try{console.error(p.value)}catch(w){setTimeout(function(){throw w})}}var ANe=typeof WeakMap=="function"?WeakMap:Map;function Hge(c,p,w){w=Nh(-1,w),w.tag=3,w.payload={element:null};var k=p.value;return w.callback=function(){g3||(g3=!0,fH=k),eH(c,p)},w}function Gge(c,p,w){w=Nh(-1,w),w.tag=3;var k=c.type.getDerivedStateFromError;if(typeof k=="function"){var H=p.value;w.payload=function(){return k(H)},w.callback=function(){eH(c,p)}}var K=c.stateNode;return K!==null&&typeof K.componentDidCatch=="function"&&(w.callback=function(){eH(c,p),typeof k!="function"&&($f===null?$f=new Set([this]):$f.add(this));var oe=p.stack;this.componentDidCatch(p.value,{componentStack:oe!==null?oe:""})}),w}function Wge(c,p,w){var k=c.pingCache;if(k===null){k=c.pingCache=new ANe;var H=new Set;k.set(p,H)}else H=k.get(p),H===void 0&&(H=new Set,k.set(p,H));H.has(w)||(H.add(w),c=GNe.bind(null,c,p,w),p.then(c,c))}function $ge(c){do{var p;if((p=c.tag===13)&&(p=c.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return c;c=c.return}while(c!==null);return null}function Kge(c,p,w,k,H){return c.mode&1?(c.flags|=65536,c.lanes=H,c):(c===p?c.flags|=65536:(c.flags|=128,w.flags|=131072,w.flags&=-52805,w.tag===1&&(w.alternate===null?w.tag=17:(p=Nh(-1,1),p.tag=2,Gf(w,p,1))),w.lanes|=1),c)}var INe=ne.ReactCurrentOwner,Ha=!1;function fa(c,p,w,k){p.child=c===null?_ge(p,null,w,k):k_(p,c.child,w,k)}function Xge(c,p,w,k,H){w=w.render;var K=p.ref;return M_(p,H),k=K8(c,p,w,k,K,H),w=X8(),c!==null&&!Ha?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~H,Fh(c,p,H)):(Ri&&w&&M8(p),p.flags|=1,fa(c,p,k,H),p.child)}function qge(c,p,w,k,H){if(c===null){var K=w.type;return typeof K=="function"&&!wH(K)&&K.defaultProps===void 0&&w.compare===null&&w.defaultProps===void 0?(p.tag=15,p.type=K,Yge(c,p,K,k,H)):(c=x3(w.type,null,k,p,p.mode,H),c.ref=p.ref,c.return=p,p.child=c)}if(K=c.child,!(c.lanes&H)){var oe=K.memoizedProps;if(w=w.compare,w=w!==null?w:VC,w(oe,k)&&c.ref===p.ref)return Fh(c,p,H)}return p.flags|=1,c=Yf(K,k),c.ref=p.ref,c.return=p,p.child=c}function Yge(c,p,w,k,H){if(c!==null){var K=c.memoizedProps;if(VC(K,k)&&c.ref===p.ref)if(Ha=!1,p.pendingProps=k=K,(c.lanes&H)!==0)c.flags&131072&&(Ha=!0);else return p.lanes=c.lanes,Fh(c,p,H)}return tH(c,p,w,k,H)}function Zge(c,p,w){var k=p.pendingProps,H=k.children,K=c!==null?c.memoizedState:null;if(k.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null,transitions:null},mi(D_,pl),pl|=w;else{if(!(w&1073741824))return c=K!==null?K.baseLanes|w:w,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:c,cachePool:null,transitions:null},p.updateQueue=null,mi(D_,pl),pl|=c,null;p.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=K!==null?K.baseLanes:w,mi(D_,pl),pl|=k}else K!==null?(k=K.baseLanes|w,p.memoizedState=null):k=w,mi(D_,pl),pl|=k;return fa(c,p,H,w),p.child}function Qge(c,p){var w=p.ref;(c===null&&w!==null||c!==null&&c.ref!==w)&&(p.flags|=512,p.flags|=2097152)}function tH(c,p,w,k,H){var K=ja(w)?zv:zo.current;return K=S_(p,K),M_(p,H),w=K8(c,p,w,k,K,H),k=X8(),c!==null&&!Ha?(p.updateQueue=c.updateQueue,p.flags&=-2053,c.lanes&=~H,Fh(c,p,H)):(Ri&&k&&M8(p),p.flags|=1,fa(c,p,w,H),p.child)}function Jge(c,p,w,k,H){if(ja(w)){var K=!0;KO(p)}else K=!1;if(M_(p,H),p.stateNode===null)d3(c,p),gge(p,w,k),z8(p,w,k,H),k=!0;else if(c===null){var oe=p.stateNode,ke=p.memoizedProps;oe.props=ke;var Ue=oe.context,vt=w.contextType;typeof vt=="object"&&vt!==null?vt=tu(vt):(vt=ja(w)?zv:zo.current,vt=S_(p,vt));var jt=w.getDerivedStateFromProps,$t=typeof jt=="function"||typeof oe.getSnapshotBeforeUpdate=="function";$t||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(ke!==k||Ue!==vt)&&vge(p,oe,k,vt),Hf=!1;var Vt=p.memoizedState;oe.state=Vt,t3(p,k,oe,H),Ue=p.memoizedState,ke!==k||Vt!==Ue||Va.current||Hf?(typeof jt=="function"&&(U8(p,w,jt,k),Ue=p.memoizedState),(ke=Hf||mge(p,w,ke,k,Vt,Ue,vt))?($t||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(p.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=k,p.memoizedState=Ue),oe.props=k,oe.state=Ue,oe.context=vt,k=ke):(typeof oe.componentDidMount=="function"&&(p.flags|=4194308),k=!1)}else{oe=p.stateNode,dge(c,p),ke=p.memoizedProps,vt=p.type===p.elementType?ke:ac(p.type,ke),oe.props=vt,$t=p.pendingProps,Vt=oe.context,Ue=w.contextType,typeof Ue=="object"&&Ue!==null?Ue=tu(Ue):(Ue=ja(w)?zv:zo.current,Ue=S_(p,Ue));var hn=w.getDerivedStateFromProps;(jt=typeof hn=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(ke!==$t||Vt!==Ue)&&vge(p,oe,k,Ue),Hf=!1,Vt=p.memoizedState,oe.state=Vt,t3(p,k,oe,H);var wn=p.memoizedState;ke!==$t||Vt!==wn||Va.current||Hf?(typeof hn=="function"&&(U8(p,w,hn,k),wn=p.memoizedState),(vt=Hf||mge(p,w,vt,k,Vt,wn,Ue)||!1)?(jt||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(k,wn,Ue),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(k,wn,Ue)),typeof oe.componentDidUpdate=="function"&&(p.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof oe.componentDidUpdate!="function"||ke===c.memoizedProps&&Vt===c.memoizedState||(p.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||ke===c.memoizedProps&&Vt===c.memoizedState||(p.flags|=1024),p.memoizedProps=k,p.memoizedState=wn),oe.props=k,oe.state=wn,oe.context=Ue,k=vt):(typeof oe.componentDidUpdate!="function"||ke===c.memoizedProps&&Vt===c.memoizedState||(p.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||ke===c.memoizedProps&&Vt===c.memoizedState||(p.flags|=1024),k=!1)}return nH(c,p,w,k,K,H)}function nH(c,p,w,k,H,K){Qge(c,p);var oe=(p.flags&128)!==0;if(!k&&!oe)return H&&rge(p,w,!1),Fh(c,p,K);k=p.stateNode,INe.current=p;var ke=oe&&typeof w.getDerivedStateFromError!="function"?null:k.render();return p.flags|=1,c!==null&&oe?(p.child=k_(p,c.child,null,K),p.child=k_(p,null,ke,K)):fa(c,p,ke,K),p.memoizedState=k.state,H&&rge(p,w,!0),p.child}function eve(c){var p=c.stateNode;p.pendingContext?tge(c,p.pendingContext,p.pendingContext!==p.context):p.context&&tge(c,p.context,!1),V8(c,p.containerInfo)}function tve(c,p,w,k,H){return P_(),R8(H),p.flags|=256,fa(c,p,w,k),p.child}var rH={dehydrated:null,treeContext:null,retryLane:0};function iH(c){return{baseLanes:c,cachePool:null,transitions:null}}function nve(c,p,w){var k=p.pendingProps,H=ji.current,K=!1,oe=(p.flags&128)!==0,ke;if((ke=oe)||(ke=c!==null&&c.memoizedState===null?!1:(H&2)!==0),ke?(K=!0,p.flags&=-129):(c===null||c.memoizedState!==null)&&(H|=1),mi(ji,H&1),c===null)return I8(p),c=p.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(p.mode&1?c.data==="$!"?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(oe=k.children,c=k.fallback,K?(k=p.mode,K=p.child,oe={mode:"hidden",children:oe},!(k&1)&&K!==null?(K.childLanes=0,K.pendingProps=oe):K=S3(oe,k,0,null),c=Yv(c,k,w,null),K.return=p,c.return=p,K.sibling=c,p.child=K,p.child.memoizedState=iH(w),p.memoizedState=rH,c):sH(p,oe));if(H=c.memoizedState,H!==null&&(ke=H.dehydrated,ke!==null))return RNe(c,p,oe,k,ke,H,w);if(K){K=k.fallback,oe=p.mode,H=c.child,ke=H.sibling;var Ue={mode:"hidden",children:k.children};return!(oe&1)&&p.child!==H?(k=p.child,k.childLanes=0,k.pendingProps=Ue,p.deletions=null):(k=Yf(H,Ue),k.subtreeFlags=H.subtreeFlags&14680064),ke!==null?K=Yf(ke,K):(K=Yv(K,oe,w,null),K.flags|=2),K.return=p,k.return=p,k.sibling=K,p.child=k,k=K,K=p.child,oe=c.child.memoizedState,oe=oe===null?iH(w):{baseLanes:oe.baseLanes|w,cachePool:null,transitions:oe.transitions},K.memoizedState=oe,K.childLanes=c.childLanes&~w,p.memoizedState=rH,k}return K=c.child,c=K.sibling,k=Yf(K,{mode:"visible",children:k.children}),!(p.mode&1)&&(k.lanes=w),k.return=p,k.sibling=null,c!==null&&(w=p.deletions,w===null?(p.deletions=[c],p.flags|=16):w.push(c)),p.child=k,p.memoizedState=null,k}function sH(c,p){return p=S3({mode:"visible",children:p},c.mode,0,null),p.return=c,c.child=p}function c3(c,p,w,k){return k!==null&&R8(k),k_(p,c.child,null,w),c=sH(p,p.pendingProps.children),c.flags|=2,p.memoizedState=null,c}function RNe(c,p,w,k,H,K,oe){if(w)return p.flags&256?(p.flags&=-257,k=J8(Error(h(422))),c3(c,p,oe,k)):p.memoizedState!==null?(p.child=c.child,p.flags|=128,null):(K=k.fallback,H=p.mode,k=S3({mode:"visible",children:k.children},H,0,null),K=Yv(K,H,oe,null),K.flags|=2,k.return=p,K.return=p,k.sibling=K,p.child=k,p.mode&1&&k_(p,c.child,null,oe),p.child.memoizedState=iH(oe),p.memoizedState=rH,K);if(!(p.mode&1))return c3(c,p,oe,null);if(H.data==="$!"){if(k=H.nextSibling&&H.nextSibling.dataset,k)var ke=k.dgst;return k=ke,K=Error(h(419)),k=J8(K,k,void 0),c3(c,p,oe,k)}if(ke=(oe&c.childLanes)!==0,Ha||ke){if(k=Qs,k!==null){switch(oe&-oe){case 4:H=2;break;case 16:H=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:H=32;break;case 536870912:H=268435456;break;default:H=0}H=H&(k.suspendedLanes|oe)?0:H,H!==0&&H!==K.retryLane&&(K.retryLane=H,Lh(c,H),cc(k,c,H,-1))}return _H(),k=J8(Error(h(421))),c3(c,p,oe,k)}return H.data==="$?"?(p.flags|=128,p.child=c.child,p=WNe.bind(null,c),H._reactRetry=p,null):(c=K.treeContext,hl=Uf(H.nextSibling),dl=p,Ri=!0,oc=null,c!==null&&(Jl[eu++]=Dh,Jl[eu++]=Oh,Jl[eu++]=Vv,Dh=c.id,Oh=c.overflow,Vv=p),p=sH(p,k.children),p.flags|=4096,p)}function rve(c,p,w){c.lanes|=p;var k=c.alternate;k!==null&&(k.lanes|=p),N8(c.return,p,w)}function oH(c,p,w,k,H){var K=c.memoizedState;K===null?c.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:k,tail:w,tailMode:H}:(K.isBackwards=p,K.rendering=null,K.renderingStartTime=0,K.last=k,K.tail=w,K.tailMode=H)}function ive(c,p,w){var k=p.pendingProps,H=k.revealOrder,K=k.tail;if(fa(c,p,k.children,w),k=ji.current,k&2)k=k&1|2,p.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=p.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&rve(c,w,p);else if(c.tag===19)rve(c,w,p);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===p)break e;for(;c.sibling===null;){if(c.return===null||c.return===p)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}k&=1}if(mi(ji,k),!(p.mode&1))p.memoizedState=null;else switch(H){case"forwards":for(w=p.child,H=null;w!==null;)c=w.alternate,c!==null&&i3(c)===null&&(H=w),w=w.sibling;w=H,w===null?(H=p.child,p.child=null):(H=w.sibling,w.sibling=null),oH(p,!1,H,w,K);break;case"backwards":for(w=null,H=p.child,p.child=null;H!==null;){if(c=H.alternate,c!==null&&i3(c)===null){p.child=H;break}c=H.sibling,H.sibling=w,w=H,H=c}oH(p,!0,w,null,K);break;case"together":oH(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function d3(c,p){!(p.mode&1)&&c!==null&&(c.alternate=null,p.alternate=null,p.flags|=2)}function Fh(c,p,w){if(c!==null&&(p.dependencies=c.dependencies),$v|=p.lanes,!(w&p.childLanes))return null;if(c!==null&&p.child!==c.child)throw Error(h(153));if(p.child!==null){for(c=p.child,w=Yf(c,c.pendingProps),p.child=w,w.return=p;c.sibling!==null;)c=c.sibling,w=w.sibling=Yf(c,c.pendingProps),w.return=p;w.sibling=null}return p.child}function DNe(c,p,w){switch(p.tag){case 3:eve(p),P_();break;case 5:wge(p);break;case 1:ja(p.type)&&KO(p);break;case 4:V8(p,p.stateNode.containerInfo);break;case 10:var k=p.type._context,H=p.memoizedProps.value;mi(QO,k._currentValue),k._currentValue=H;break;case 13:if(k=p.memoizedState,k!==null)return k.dehydrated!==null?(mi(ji,ji.current&1),p.flags|=128,null):w&p.child.childLanes?nve(c,p,w):(mi(ji,ji.current&1),c=Fh(c,p,w),c!==null?c.sibling:null);mi(ji,ji.current&1);break;case 19:if(k=(w&p.childLanes)!==0,c.flags&128){if(k)return ive(c,p,w);p.flags|=128}if(H=p.memoizedState,H!==null&&(H.rendering=null,H.tail=null,H.lastEffect=null),mi(ji,ji.current),k)break;return null;case 22:case 23:return p.lanes=0,Zge(c,p,w)}return Fh(c,p,w)}var sve,aH,ove,ave;sve=function(c,p){for(var w=p.child;w!==null;){if(w.tag===5||w.tag===6)c.appendChild(w.stateNode);else if(w.tag!==4&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===p)break;for(;w.sibling===null;){if(w.return===null||w.return===p)return;w=w.return}w.sibling.return=w.return,w=w.sibling}},aH=function(){},ove=function(c,p,w,k){var H=c.memoizedProps;if(H!==k){c=p.stateNode,Gv(md.current);var K=null;switch(w){case"input":H=mt(c,H),k=mt(c,k),K=[];break;case"select":H=ce({},H,{value:void 0}),k=ce({},k,{value:void 0}),K=[];break;case"textarea":H=zt(c,H),k=zt(c,k),K=[];break;default:typeof H.onClick!="function"&&typeof k.onClick=="function"&&(c.onclick=GO)}d_(w,k);var oe;w=null;for(vt in H)if(!k.hasOwnProperty(vt)&&H.hasOwnProperty(vt)&&H[vt]!=null)if(vt==="style"){var ke=H[vt];for(oe in ke)ke.hasOwnProperty(oe)&&(w||(w={}),w[oe]="")}else vt!=="dangerouslySetInnerHTML"&&vt!=="children"&&vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&vt!=="autoFocus"&&(g.hasOwnProperty(vt)?K||(K=[]):(K=K||[]).push(vt,null));for(vt in k){var Ue=k[vt];if(ke=H!=null?H[vt]:void 0,k.hasOwnProperty(vt)&&Ue!==ke&&(Ue!=null||ke!=null))if(vt==="style")if(ke){for(oe in ke)!ke.hasOwnProperty(oe)||Ue&&Ue.hasOwnProperty(oe)||(w||(w={}),w[oe]="");for(oe in Ue)Ue.hasOwnProperty(oe)&&ke[oe]!==Ue[oe]&&(w||(w={}),w[oe]=Ue[oe])}else w||(K||(K=[]),K.push(vt,w)),w=Ue;else vt==="dangerouslySetInnerHTML"?(Ue=Ue?Ue.__html:void 0,ke=ke?ke.__html:void 0,Ue!=null&&ke!==Ue&&(K=K||[]).push(vt,Ue)):vt==="children"?typeof Ue!="string"&&typeof Ue!="number"||(K=K||[]).push(vt,""+Ue):vt!=="suppressContentEditableWarning"&&vt!=="suppressHydrationWarning"&&(g.hasOwnProperty(vt)?(Ue!=null&&vt==="onScroll"&&Ei("scroll",c),K||ke===Ue||(K=[])):(K=K||[]).push(vt,Ue))}w&&(K=K||[]).push("style",w);var vt=K;(p.updateQueue=vt)&&(p.flags|=4)}},ave=function(c,p,w,k){w!==k&&(p.flags|=4)};function nP(c,p){if(!Ri)switch(c.tailMode){case"hidden":p=c.tail;for(var w=null;p!==null;)p.alternate!==null&&(w=p),p=p.sibling;w===null?c.tail=null:w.sibling=null;break;case"collapsed":w=c.tail;for(var k=null;w!==null;)w.alternate!==null&&(k=w),w=w.sibling;k===null?p||c.tail===null?c.tail=null:c.tail.sibling=null:k.sibling=null}}function jo(c){var p=c.alternate!==null&&c.alternate.child===c.child,w=0,k=0;if(p)for(var H=c.child;H!==null;)w|=H.lanes|H.childLanes,k|=H.subtreeFlags&14680064,k|=H.flags&14680064,H.return=c,H=H.sibling;else for(H=c.child;H!==null;)w|=H.lanes|H.childLanes,k|=H.subtreeFlags,k|=H.flags,H.return=c,H=H.sibling;return c.subtreeFlags|=k,c.childLanes=w,p}function ONe(c,p,w){var k=p.pendingProps;switch(k8(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jo(p),null;case 1:return ja(p.type)&&$O(),jo(p),null;case 3:return k=p.stateNode,A_(),Ci(Va),Ci(zo),G8(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(c===null||c.child===null)&&(ZO(p)?p.flags|=4:c===null||c.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,oc!==null&&(vH(oc),oc=null))),aH(c,p),jo(p),null;case 5:j8(p);var H=Gv(ZC.current);if(w=p.type,c!==null&&p.stateNode!=null)ove(c,p,w,k,H),c.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!k){if(p.stateNode===null)throw Error(h(166));return jo(p),null}if(c=Gv(md.current),ZO(p)){k=p.stateNode,w=p.type;var K=p.memoizedProps;switch(k[fd]=p,k[$C]=K,c=(p.mode&1)!==0,w){case"dialog":Ei("cancel",k),Ei("close",k);break;case"iframe":case"object":case"embed":Ei("load",k);break;case"video":case"audio":for(H=0;H<HC.length;H++)Ei(HC[H],k);break;case"source":Ei("error",k);break;case"img":case"image":case"link":Ei("error",k),Ei("load",k);break;case"details":Ei("toggle",k);break;case"input":ft(k,K),Ei("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!K.multiple},Ei("invalid",k);break;case"textarea":kt(k,K),Ei("invalid",k)}d_(w,K),H=null;for(var oe in K)if(K.hasOwnProperty(oe)){var ke=K[oe];oe==="children"?typeof ke=="string"?k.textContent!==ke&&(K.suppressHydrationWarning!==!0&&HO(k.textContent,ke,c),H=["children",ke]):typeof ke=="number"&&k.textContent!==""+ke&&(K.suppressHydrationWarning!==!0&&HO(k.textContent,ke,c),H=["children",""+ke]):g.hasOwnProperty(oe)&&ke!=null&&oe==="onScroll"&&Ei("scroll",k)}switch(w){case"input":Ln(k),qe(k,K,!0);break;case"textarea":Ln(k),Rn(k);break;case"select":case"option":break;default:typeof K.onClick=="function"&&(k.onclick=GO)}k=H,p.updateQueue=k,k!==null&&(p.flags|=4)}else{oe=H.nodeType===9?H:H.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Or(w)),c==="http://www.w3.org/1999/xhtml"?w==="script"?(c=oe.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof k.is=="string"?c=oe.createElement(w,{is:k.is}):(c=oe.createElement(w),w==="select"&&(oe=c,k.multiple?oe.multiple=!0:k.size&&(oe.size=k.size))):c=oe.createElementNS(c,w),c[fd]=p,c[$C]=k,sve(c,p,!1,!1),p.stateNode=c;e:{switch(oe=EC(w,k),w){case"dialog":Ei("cancel",c),Ei("close",c),H=k;break;case"iframe":case"object":case"embed":Ei("load",c),H=k;break;case"video":case"audio":for(H=0;H<HC.length;H++)Ei(HC[H],c);H=k;break;case"source":Ei("error",c),H=k;break;case"img":case"image":case"link":Ei("error",c),Ei("load",c),H=k;break;case"details":Ei("toggle",c),H=k;break;case"input":ft(c,k),H=mt(c,k),Ei("invalid",c);break;case"option":H=k;break;case"select":c._wrapperState={wasMultiple:!!k.multiple},H=ce({},k,{value:void 0}),Ei("invalid",c);break;case"textarea":kt(c,k),H=zt(c,k),Ei("invalid",c);break;default:H=k}d_(w,H),ke=H;for(K in ke)if(ke.hasOwnProperty(K)){var Ue=ke[K];K==="style"?c_(c,Ue):K==="dangerouslySetInnerHTML"?(Ue=Ue?Ue.__html:void 0,Ue!=null&&Rf(c,Ue)):K==="children"?typeof Ue=="string"?(w!=="textarea"||Ue!=="")&&Uo(c,Ue):typeof Ue=="number"&&Uo(c,""+Ue):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(g.hasOwnProperty(K)?Ue!=null&&K==="onScroll"&&Ei("scroll",c):Ue!=null&&re(c,K,Ue,oe))}switch(w){case"input":Ln(c),qe(c,k,!1);break;case"textarea":Ln(c),Rn(c);break;case"option":k.value!=null&&c.setAttribute("value",""+Qt(k.value));break;case"select":c.multiple=!!k.multiple,K=k.value,K!=null?nt(c,!!k.multiple,K,!1):k.defaultValue!=null&&nt(c,!!k.multiple,k.defaultValue,!0);break;default:typeof H.onClick=="function"&&(c.onclick=GO)}switch(w){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(p.flags|=4)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return jo(p),null;case 6:if(c&&p.stateNode!=null)ave(c,p,c.memoizedProps,k);else{if(typeof k!="string"&&p.stateNode===null)throw Error(h(166));if(w=Gv(ZC.current),Gv(md.current),ZO(p)){if(k=p.stateNode,w=p.memoizedProps,k[fd]=p,(K=k.nodeValue!==w)&&(c=dl,c!==null))switch(c.tag){case 3:HO(k.nodeValue,w,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&HO(k.nodeValue,w,(c.mode&1)!==0)}K&&(p.flags|=4)}else k=(w.nodeType===9?w:w.ownerDocument).createTextNode(k),k[fd]=p,p.stateNode=k}return jo(p),null;case 13:if(Ci(ji),k=p.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Ri&&hl!==null&&p.mode&1&&!(p.flags&128))uge(),P_(),p.flags|=98560,K=!1;else if(K=ZO(p),k!==null&&k.dehydrated!==null){if(c===null){if(!K)throw Error(h(318));if(K=p.memoizedState,K=K!==null?K.dehydrated:null,!K)throw Error(h(317));K[fd]=p}else P_(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;jo(p),K=!1}else oc!==null&&(vH(oc),oc=null),K=!0;if(!K)return p.flags&65536?p:null}return p.flags&128?(p.lanes=w,p):(k=k!==null,k!==(c!==null&&c.memoizedState!==null)&&k&&(p.child.flags|=8192,p.mode&1&&(c===null||ji.current&1?Fs===0&&(Fs=3):_H())),p.updateQueue!==null&&(p.flags|=4),jo(p),null);case 4:return A_(),aH(c,p),c===null&&GC(p.stateNode.containerInfo),jo(p),null;case 10:return L8(p.type._context),jo(p),null;case 17:return ja(p.type)&&$O(),jo(p),null;case 19:if(Ci(ji),K=p.memoizedState,K===null)return jo(p),null;if(k=(p.flags&128)!==0,oe=K.rendering,oe===null)if(k)nP(K,!1);else{if(Fs!==0||c!==null&&c.flags&128)for(c=p.child;c!==null;){if(oe=i3(c),oe!==null){for(p.flags|=128,nP(K,!1),k=oe.updateQueue,k!==null&&(p.updateQueue=k,p.flags|=4),p.subtreeFlags=0,k=w,w=p.child;w!==null;)K=w,c=k,K.flags&=14680066,oe=K.alternate,oe===null?(K.childLanes=0,K.lanes=c,K.child=null,K.subtreeFlags=0,K.memoizedProps=null,K.memoizedState=null,K.updateQueue=null,K.dependencies=null,K.stateNode=null):(K.childLanes=oe.childLanes,K.lanes=oe.lanes,K.child=oe.child,K.subtreeFlags=0,K.deletions=null,K.memoizedProps=oe.memoizedProps,K.memoizedState=oe.memoizedState,K.updateQueue=oe.updateQueue,K.type=oe.type,c=oe.dependencies,K.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),w=w.sibling;return mi(ji,ji.current&1|2),p.child}c=c.sibling}K.tail!==null&&ms()>O_&&(p.flags|=128,k=!0,nP(K,!1),p.lanes=4194304)}else{if(!k)if(c=i3(oe),c!==null){if(p.flags|=128,k=!0,w=c.updateQueue,w!==null&&(p.updateQueue=w,p.flags|=4),nP(K,!0),K.tail===null&&K.tailMode==="hidden"&&!oe.alternate&&!Ri)return jo(p),null}else 2*ms()-K.renderingStartTime>O_&&w!==1073741824&&(p.flags|=128,k=!0,nP(K,!1),p.lanes=4194304);K.isBackwards?(oe.sibling=p.child,p.child=oe):(w=K.last,w!==null?w.sibling=oe:p.child=oe,K.last=oe)}return K.tail!==null?(p=K.tail,K.rendering=p,K.tail=p.sibling,K.renderingStartTime=ms(),p.sibling=null,w=ji.current,mi(ji,k?w&1|2:w&1),p):(jo(p),null);case 22:case 23:return bH(),k=p.memoizedState!==null,c!==null&&c.memoizedState!==null!==k&&(p.flags|=8192),k&&p.mode&1?pl&1073741824&&(jo(p),p.subtreeFlags&6&&(p.flags|=8192)):jo(p),null;case 24:return null;case 25:return null}throw Error(h(156,p.tag))}function LNe(c,p){switch(k8(p),p.tag){case 1:return ja(p.type)&&$O(),c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 3:return A_(),Ci(Va),Ci(zo),G8(),c=p.flags,c&65536&&!(c&128)?(p.flags=c&-65537|128,p):null;case 5:return j8(p),null;case 13:if(Ci(ji),c=p.memoizedState,c!==null&&c.dehydrated!==null){if(p.alternate===null)throw Error(h(340));P_()}return c=p.flags,c&65536?(p.flags=c&-65537|128,p):null;case 19:return Ci(ji),null;case 4:return A_(),null;case 10:return L8(p.type._context),null;case 22:case 23:return bH(),null;case 24:return null;default:return null}}var h3=!1,Ho=!1,NNe=typeof WeakSet=="function"?WeakSet:Set,vn=null;function R_(c,p){var w=c.ref;if(w!==null)if(typeof w=="function")try{w(null)}catch(k){es(c,p,k)}else w.current=null}function lve(c,p,w){try{w()}catch(k){es(c,p,k)}}var uve=!1;function FNe(c,p){if(_8=kO,c=Fme(),f8(c)){if("selectionStart"in c)var w={start:c.selectionStart,end:c.selectionEnd};else e:{w=(w=c.ownerDocument)&&w.defaultView||window;var k=w.getSelection&&w.getSelection();if(k&&k.rangeCount!==0){w=k.anchorNode;var H=k.anchorOffset,K=k.focusNode;k=k.focusOffset;try{w.nodeType,K.nodeType}catch{w=null;break e}var oe=0,ke=-1,Ue=-1,vt=0,jt=0,$t=c,Vt=null;t:for(;;){for(var hn;$t!==w||H!==0&&$t.nodeType!==3||(ke=oe+H),$t!==K||k!==0&&$t.nodeType!==3||(Ue=oe+k),$t.nodeType===3&&(oe+=$t.nodeValue.length),(hn=$t.firstChild)!==null;)Vt=$t,$t=hn;for(;;){if($t===c)break t;if(Vt===w&&++vt===H&&(ke=oe),Vt===K&&++jt===k&&(Ue=oe),(hn=$t.nextSibling)!==null)break;$t=Vt,Vt=$t.parentNode}$t=hn}w=ke===-1||Ue===-1?null:{start:ke,end:Ue}}else w=null}w=w||{start:0,end:0}}else w=null;for(w8={focusedElem:c,selectionRange:w},kO=!1,vn=p;vn!==null;)if(p=vn,c=p.child,(p.subtreeFlags&1028)!==0&&c!==null)c.return=p,vn=c;else for(;vn!==null;){p=vn;try{var wn=p.alternate;if(p.flags&1024)switch(p.tag){case 0:case 11:case 15:break;case 1:if(wn!==null){var Pn=wn.memoizedProps,gs=wn.memoizedState,rt=p.stateNode,$e=rt.getSnapshotBeforeUpdate(p.elementType===p.type?Pn:ac(p.type,Pn),gs);rt.__reactInternalSnapshotBeforeUpdate=$e}break;case 3:var ct=p.stateNode.containerInfo;ct.nodeType===1?ct.textContent="":ct.nodeType===9&&ct.documentElement&&ct.removeChild(ct.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(h(163))}}catch(qt){es(p,p.return,qt)}if(c=p.sibling,c!==null){c.return=p.return,vn=c;break}vn=p.return}return wn=uve,uve=!1,wn}function rP(c,p,w){var k=p.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var H=k=k.next;do{if((H.tag&c)===c){var K=H.destroy;H.destroy=void 0,K!==void 0&&lve(p,w,K)}H=H.next}while(H!==k)}}function p3(c,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var w=p=p.next;do{if((w.tag&c)===c){var k=w.create;w.destroy=k()}w=w.next}while(w!==p)}}function lH(c){var p=c.ref;if(p!==null){var w=c.stateNode;switch(c.tag){case 5:c=w;break;default:c=w}typeof p=="function"?p(c):p.current=c}}function cve(c){var p=c.alternate;p!==null&&(c.alternate=null,cve(p)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(p=c.stateNode,p!==null&&(delete p[fd],delete p[$C],delete p[C8],delete p[bNe],delete p[_Ne])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function dve(c){return c.tag===5||c.tag===3||c.tag===4}function hve(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||dve(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function uH(c,p,w){var k=c.tag;if(k===5||k===6)c=c.stateNode,p?w.nodeType===8?w.parentNode.insertBefore(c,p):w.insertBefore(c,p):(w.nodeType===8?(p=w.parentNode,p.insertBefore(c,w)):(p=w,p.appendChild(c)),w=w._reactRootContainer,w!=null||p.onclick!==null||(p.onclick=GO));else if(k!==4&&(c=c.child,c!==null))for(uH(c,p,w),c=c.sibling;c!==null;)uH(c,p,w),c=c.sibling}function cH(c,p,w){var k=c.tag;if(k===5||k===6)c=c.stateNode,p?w.insertBefore(c,p):w.appendChild(c);else if(k!==4&&(c=c.child,c!==null))for(cH(c,p,w),c=c.sibling;c!==null;)cH(c,p,w),c=c.sibling}var wo=null,lc=!1;function Wf(c,p,w){for(w=w.child;w!==null;)pve(c,p,w),w=w.sibling}function pve(c,p,w){if(pd&&typeof pd.onCommitFiberUnmount=="function")try{pd.onCommitFiberUnmount(SO,w)}catch{}switch(w.tag){case 5:Ho||R_(w,p);case 6:var k=wo,H=lc;wo=null,Wf(c,p,w),wo=k,lc=H,wo!==null&&(lc?(c=wo,w=w.stateNode,c.nodeType===8?c.parentNode.removeChild(w):c.removeChild(w)):wo.removeChild(w.stateNode));break;case 18:wo!==null&&(lc?(c=wo,w=w.stateNode,c.nodeType===8?E8(c.parentNode,w):c.nodeType===1&&E8(c,w),LC(c)):E8(wo,w.stateNode));break;case 4:k=wo,H=lc,wo=w.stateNode.containerInfo,lc=!0,Wf(c,p,w),wo=k,lc=H;break;case 0:case 11:case 14:case 15:if(!Ho&&(k=w.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){H=k=k.next;do{var K=H,oe=K.destroy;K=K.tag,oe!==void 0&&(K&2||K&4)&&lve(w,p,oe),H=H.next}while(H!==k)}Wf(c,p,w);break;case 1:if(!Ho&&(R_(w,p),k=w.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=w.memoizedProps,k.state=w.memoizedState,k.componentWillUnmount()}catch(ke){es(w,p,ke)}Wf(c,p,w);break;case 21:Wf(c,p,w);break;case 22:w.mode&1?(Ho=(k=Ho)||w.memoizedState!==null,Wf(c,p,w),Ho=k):Wf(c,p,w);break;default:Wf(c,p,w)}}function fve(c){var p=c.updateQueue;if(p!==null){c.updateQueue=null;var w=c.stateNode;w===null&&(w=c.stateNode=new NNe),p.forEach(function(k){var H=$Ne.bind(null,c,k);w.has(k)||(w.add(k),k.then(H,H))})}}function uc(c,p){var w=p.deletions;if(w!==null)for(var k=0;k<w.length;k++){var H=w[k];try{var K=c,oe=p,ke=oe;e:for(;ke!==null;){switch(ke.tag){case 5:wo=ke.stateNode,lc=!1;break e;case 3:wo=ke.stateNode.containerInfo,lc=!0;break e;case 4:wo=ke.stateNode.containerInfo,lc=!0;break e}ke=ke.return}if(wo===null)throw Error(h(160));pve(K,oe,H),wo=null,lc=!1;var Ue=H.alternate;Ue!==null&&(Ue.return=null),H.return=null}catch(vt){es(H,p,vt)}}if(p.subtreeFlags&12854)for(p=p.child;p!==null;)mve(p,c),p=p.sibling}function mve(c,p){var w=c.alternate,k=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(uc(p,c),vd(c),k&4){try{rP(3,c,c.return),p3(3,c)}catch(Pn){es(c,c.return,Pn)}try{rP(5,c,c.return)}catch(Pn){es(c,c.return,Pn)}}break;case 1:uc(p,c),vd(c),k&512&&w!==null&&R_(w,w.return);break;case 5:if(uc(p,c),vd(c),k&512&&w!==null&&R_(w,w.return),c.flags&32){var H=c.stateNode;try{Uo(H,"")}catch(Pn){es(c,c.return,Pn)}}if(k&4&&(H=c.stateNode,H!=null)){var K=c.memoizedProps,oe=w!==null?w.memoizedProps:K,ke=c.type,Ue=c.updateQueue;if(c.updateQueue=null,Ue!==null)try{ke==="input"&&K.type==="radio"&&K.name!=null&&Ee(H,K),EC(ke,oe);var vt=EC(ke,K);for(oe=0;oe<Ue.length;oe+=2){var jt=Ue[oe],$t=Ue[oe+1];jt==="style"?c_(H,$t):jt==="dangerouslySetInnerHTML"?Rf(H,$t):jt==="children"?Uo(H,$t):re(H,jt,$t,vt)}switch(ke){case"input":xe(H,K);break;case"textarea":Rt(H,K);break;case"select":var Vt=H._wrapperState.wasMultiple;H._wrapperState.wasMultiple=!!K.multiple;var hn=K.value;hn!=null?nt(H,!!K.multiple,hn,!1):Vt!==!!K.multiple&&(K.defaultValue!=null?nt(H,!!K.multiple,K.defaultValue,!0):nt(H,!!K.multiple,K.multiple?[]:"",!1))}H[$C]=K}catch(Pn){es(c,c.return,Pn)}}break;case 6:if(uc(p,c),vd(c),k&4){if(c.stateNode===null)throw Error(h(162));H=c.stateNode,K=c.memoizedProps;try{H.nodeValue=K}catch(Pn){es(c,c.return,Pn)}}break;case 3:if(uc(p,c),vd(c),k&4&&w!==null&&w.memoizedState.isDehydrated)try{LC(p.containerInfo)}catch(Pn){es(c,c.return,Pn)}break;case 4:uc(p,c),vd(c);break;case 13:uc(p,c),vd(c),H=c.child,H.flags&8192&&(K=H.memoizedState!==null,H.stateNode.isHidden=K,!K||H.alternate!==null&&H.alternate.memoizedState!==null||(pH=ms())),k&4&&fve(c);break;case 22:if(jt=w!==null&&w.memoizedState!==null,c.mode&1?(Ho=(vt=Ho)||jt,uc(p,c),Ho=vt):uc(p,c),vd(c),k&8192){if(vt=c.memoizedState!==null,(c.stateNode.isHidden=vt)&&!jt&&c.mode&1)for(vn=c,jt=c.child;jt!==null;){for($t=vn=jt;vn!==null;){switch(Vt=vn,hn=Vt.child,Vt.tag){case 0:case 11:case 14:case 15:rP(4,Vt,Vt.return);break;case 1:R_(Vt,Vt.return);var wn=Vt.stateNode;if(typeof wn.componentWillUnmount=="function"){k=Vt,w=Vt.return;try{p=k,wn.props=p.memoizedProps,wn.state=p.memoizedState,wn.componentWillUnmount()}catch(Pn){es(k,w,Pn)}}break;case 5:R_(Vt,Vt.return);break;case 22:if(Vt.memoizedState!==null){yve($t);continue}}hn!==null?(hn.return=Vt,vn=hn):yve($t)}jt=jt.sibling}e:for(jt=null,$t=c;;){if($t.tag===5){if(jt===null){jt=$t;try{H=$t.stateNode,vt?(K=H.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none"):(ke=$t.stateNode,Ue=$t.memoizedProps.style,oe=Ue!=null&&Ue.hasOwnProperty("display")?Ue.display:null,ke.style.display=Fv("display",oe))}catch(Pn){es(c,c.return,Pn)}}}else if($t.tag===6){if(jt===null)try{$t.stateNode.nodeValue=vt?"":$t.memoizedProps}catch(Pn){es(c,c.return,Pn)}}else if(($t.tag!==22&&$t.tag!==23||$t.memoizedState===null||$t===c)&&$t.child!==null){$t.child.return=$t,$t=$t.child;continue}if($t===c)break e;for(;$t.sibling===null;){if($t.return===null||$t.return===c)break e;jt===$t&&(jt=null),$t=$t.return}jt===$t&&(jt=null),$t.sibling.return=$t.return,$t=$t.sibling}}break;case 19:uc(p,c),vd(c),k&4&&fve(c);break;case 21:break;default:uc(p,c),vd(c)}}function vd(c){var p=c.flags;if(p&2){try{e:{for(var w=c.return;w!==null;){if(dve(w)){var k=w;break e}w=w.return}throw Error(h(160))}switch(k.tag){case 5:var H=k.stateNode;k.flags&32&&(Uo(H,""),k.flags&=-33);var K=hve(c);cH(c,K,H);break;case 3:case 4:var oe=k.stateNode.containerInfo,ke=hve(c);uH(c,ke,oe);break;default:throw Error(h(161))}}catch(Ue){es(c,c.return,Ue)}c.flags&=-3}p&4096&&(c.flags&=-4097)}function BNe(c,p,w){vn=c,gve(c)}function gve(c,p,w){for(var k=(c.mode&1)!==0;vn!==null;){var H=vn,K=H.child;if(H.tag===22&&k){var oe=H.memoizedState!==null||h3;if(!oe){var ke=H.alternate,Ue=ke!==null&&ke.memoizedState!==null||Ho;ke=h3;var vt=Ho;if(h3=oe,(Ho=Ue)&&!vt)for(vn=H;vn!==null;)oe=vn,Ue=oe.child,oe.tag===22&&oe.memoizedState!==null?bve(H):Ue!==null?(Ue.return=oe,vn=Ue):bve(H);for(;K!==null;)vn=K,gve(K),K=K.sibling;vn=H,h3=ke,Ho=vt}vve(c)}else H.subtreeFlags&8772&&K!==null?(K.return=H,vn=K):vve(c)}}function vve(c){for(;vn!==null;){var p=vn;if(p.flags&8772){var w=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:Ho||p3(5,p);break;case 1:var k=p.stateNode;if(p.flags&4&&!Ho)if(w===null)k.componentDidMount();else{var H=p.elementType===p.type?w.memoizedProps:ac(p.type,w.memoizedProps);k.componentDidUpdate(H,w.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var K=p.updateQueue;K!==null&&pge(p,K,k);break;case 3:var oe=p.updateQueue;if(oe!==null){if(w=null,p.child!==null)switch(p.child.tag){case 5:w=p.child.stateNode;break;case 1:w=p.child.stateNode}pge(p,oe,w)}break;case 5:var ke=p.stateNode;if(w===null&&p.flags&4){w=ke;var Ue=p.memoizedProps;switch(p.type){case"button":case"input":case"select":case"textarea":Ue.autoFocus&&w.focus();break;case"img":Ue.src&&(w.src=Ue.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(p.memoizedState===null){var vt=p.alternate;if(vt!==null){var jt=vt.memoizedState;if(jt!==null){var $t=jt.dehydrated;$t!==null&&LC($t)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(h(163))}Ho||p.flags&512&&lH(p)}catch(Vt){es(p,p.return,Vt)}}if(p===c){vn=null;break}if(w=p.sibling,w!==null){w.return=p.return,vn=w;break}vn=p.return}}function yve(c){for(;vn!==null;){var p=vn;if(p===c){vn=null;break}var w=p.sibling;if(w!==null){w.return=p.return,vn=w;break}vn=p.return}}function bve(c){for(;vn!==null;){var p=vn;try{switch(p.tag){case 0:case 11:case 15:var w=p.return;try{p3(4,p)}catch(Ue){es(p,w,Ue)}break;case 1:var k=p.stateNode;if(typeof k.componentDidMount=="function"){var H=p.return;try{k.componentDidMount()}catch(Ue){es(p,H,Ue)}}var K=p.return;try{lH(p)}catch(Ue){es(p,K,Ue)}break;case 5:var oe=p.return;try{lH(p)}catch(Ue){es(p,oe,Ue)}}}catch(Ue){es(p,p.return,Ue)}if(p===c){vn=null;break}var ke=p.sibling;if(ke!==null){ke.return=p.return,vn=ke;break}vn=p.return}}var UNe=Math.ceil,f3=ne.ReactCurrentDispatcher,dH=ne.ReactCurrentOwner,ru=ne.ReactCurrentBatchConfig,Lr=0,Qs=null,Ts=null,xo=0,pl=0,D_=zf(0),Fs=0,iP=null,$v=0,m3=0,hH=0,sP=null,Ga=null,pH=0,O_=1/0,Bh=null,g3=!1,fH=null,$f=null,v3=!1,Kf=null,y3=0,oP=0,mH=null,b3=-1,_3=0;function ma(){return Lr&6?ms():b3!==-1?b3:b3=ms()}function Xf(c){return c.mode&1?Lr&2&&xo!==0?xo&-xo:xNe.transition!==null?(_3===0&&(_3=ume()),_3):(c=ti,c!==0||(c=window.event,c=c===void 0?16:yme(c.type)),c):1}function cc(c,p,w,k){if(50<oP)throw oP=0,mH=null,Error(h(185));AC(c,w,k),(!(Lr&2)||c!==Qs)&&(c===Qs&&(!(Lr&2)&&(m3|=w),Fs===4&&qf(c,xo)),Wa(c,k),w===1&&Lr===0&&!(p.mode&1)&&(O_=ms()+500,XO&&jf()))}function Wa(c,p){var w=c.callbackNode;ELe(c,p);var k=PO(c,c===Qs?xo:0);if(k===0)w!==null&&ome(w),c.callbackNode=null,c.callbackPriority=0;else if(p=k&-k,c.callbackPriority!==p){if(w!=null&&ome(w),p===1)c.tag===0?wNe(wve.bind(null,c)):ige(wve.bind(null,c)),vNe(function(){!(Lr&6)&&jf()}),w=null;else{switch(cme(k)){case 1:w=Z6;break;case 4:w=ame;break;case 16:w=xO;break;case 536870912:w=lme;break;default:w=xO}w=kve(w,_ve.bind(null,c))}c.callbackPriority=p,c.callbackNode=w}}function _ve(c,p){if(b3=-1,_3=0,Lr&6)throw Error(h(327));var w=c.callbackNode;if(L_()&&c.callbackNode!==w)return null;var k=PO(c,c===Qs?xo:0);if(k===0)return null;if(k&30||k&c.expiredLanes||p)p=w3(c,k);else{p=k;var H=Lr;Lr|=2;var K=Sve();(Qs!==c||xo!==p)&&(Bh=null,O_=ms()+500,Xv(c,p));do try{jNe();break}catch(ke){xve(c,ke)}while(1);O8(),f3.current=K,Lr=H,Ts!==null?p=0:(Qs=null,xo=0,p=Fs)}if(p!==0){if(p===2&&(H=Q6(c),H!==0&&(k=H,p=gH(c,H))),p===1)throw w=iP,Xv(c,0),qf(c,k),Wa(c,ms()),w;if(p===6)qf(c,k);else{if(H=c.current.alternate,!(k&30)&&!zNe(H)&&(p=w3(c,k),p===2&&(K=Q6(c),K!==0&&(k=K,p=gH(c,K))),p===1))throw w=iP,Xv(c,0),qf(c,k),Wa(c,ms()),w;switch(c.finishedWork=H,c.finishedLanes=k,p){case 0:case 1:throw Error(h(345));case 2:qv(c,Ga,Bh);break;case 3:if(qf(c,k),(k&130023424)===k&&(p=pH+500-ms(),10<p)){if(PO(c,0)!==0)break;if(H=c.suspendedLanes,(H&k)!==k){ma(),c.pingedLanes|=c.suspendedLanes&H;break}c.timeoutHandle=S8(qv.bind(null,c,Ga,Bh),p);break}qv(c,Ga,Bh);break;case 4:if(qf(c,k),(k&4194240)===k)break;for(p=c.eventTimes,H=-1;0<k;){var oe=31-ic(k);K=1<<oe,oe=p[oe],oe>H&&(H=oe),k&=~K}if(k=H,k=ms()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*UNe(k/1960))-k,10<k){c.timeoutHandle=S8(qv.bind(null,c,Ga,Bh),k);break}qv(c,Ga,Bh);break;case 5:qv(c,Ga,Bh);break;default:throw Error(h(329))}}}return Wa(c,ms()),c.callbackNode===w?_ve.bind(null,c):null}function gH(c,p){var w=sP;return c.current.memoizedState.isDehydrated&&(Xv(c,p).flags|=256),c=w3(c,p),c!==2&&(p=Ga,Ga=w,p!==null&&vH(p)),c}function vH(c){Ga===null?Ga=c:Ga.push.apply(Ga,c)}function zNe(c){for(var p=c;;){if(p.flags&16384){var w=p.updateQueue;if(w!==null&&(w=w.stores,w!==null))for(var k=0;k<w.length;k++){var H=w[k],K=H.getSnapshot;H=H.value;try{if(!sc(K(),H))return!1}catch{return!1}}}if(w=p.child,p.subtreeFlags&16384&&w!==null)w.return=p,p=w;else{if(p===c)break;for(;p.sibling===null;){if(p.return===null||p.return===c)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function qf(c,p){for(p&=~hH,p&=~m3,c.suspendedLanes|=p,c.pingedLanes&=~p,c=c.expirationTimes;0<p;){var w=31-ic(p),k=1<<w;c[w]=-1,p&=~k}}function wve(c){if(Lr&6)throw Error(h(327));L_();var p=PO(c,0);if(!(p&1))return Wa(c,ms()),null;var w=w3(c,p);if(c.tag!==0&&w===2){var k=Q6(c);k!==0&&(p=k,w=gH(c,k))}if(w===1)throw w=iP,Xv(c,0),qf(c,p),Wa(c,ms()),w;if(w===6)throw Error(h(345));return c.finishedWork=c.current.alternate,c.finishedLanes=p,qv(c,Ga,Bh),Wa(c,ms()),null}function yH(c,p){var w=Lr;Lr|=1;try{return c(p)}finally{Lr=w,Lr===0&&(O_=ms()+500,XO&&jf())}}function Kv(c){Kf!==null&&Kf.tag===0&&!(Lr&6)&&L_();var p=Lr;Lr|=1;var w=ru.transition,k=ti;try{if(ru.transition=null,ti=1,c)return c()}finally{ti=k,ru.transition=w,Lr=p,!(Lr&6)&&jf()}}function bH(){pl=D_.current,Ci(D_)}function Xv(c,p){c.finishedWork=null,c.finishedLanes=0;var w=c.timeoutHandle;if(w!==-1&&(c.timeoutHandle=-1,gNe(w)),Ts!==null)for(w=Ts.return;w!==null;){var k=w;switch(k8(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&$O();break;case 3:A_(),Ci(Va),Ci(zo),G8();break;case 5:j8(k);break;case 4:A_();break;case 13:Ci(ji);break;case 19:Ci(ji);break;case 10:L8(k.type._context);break;case 22:case 23:bH()}w=w.return}if(Qs=c,Ts=c=Yf(c.current,null),xo=pl=p,Fs=0,iP=null,hH=m3=$v=0,Ga=sP=null,Hv!==null){for(p=0;p<Hv.length;p++)if(w=Hv[p],k=w.interleaved,k!==null){w.interleaved=null;var H=k.next,K=w.pending;if(K!==null){var oe=K.next;K.next=H,k.next=oe}w.pending=k}Hv=null}return c}function xve(c,p){do{var w=Ts;try{if(O8(),s3.current=u3,o3){for(var k=Hi.memoizedState;k!==null;){var H=k.queue;H!==null&&(H.pending=null),k=k.next}o3=!1}if(Wv=0,Zs=Ns=Hi=null,QC=!1,JC=0,dH.current=null,w===null||w.return===null){Fs=1,iP=p,Ts=null;break}e:{var K=c,oe=w.return,ke=w,Ue=p;if(p=xo,ke.flags|=32768,Ue!==null&&typeof Ue=="object"&&typeof Ue.then=="function"){var vt=Ue,jt=ke,$t=jt.tag;if(!(jt.mode&1)&&($t===0||$t===11||$t===15)){var Vt=jt.alternate;Vt?(jt.updateQueue=Vt.updateQueue,jt.memoizedState=Vt.memoizedState,jt.lanes=Vt.lanes):(jt.updateQueue=null,jt.memoizedState=null)}var hn=$ge(oe);if(hn!==null){hn.flags&=-257,Kge(hn,oe,ke,K,p),hn.mode&1&&Wge(K,vt,p),p=hn,Ue=vt;var wn=p.updateQueue;if(wn===null){var Pn=new Set;Pn.add(Ue),p.updateQueue=Pn}else wn.add(Ue);break e}else{if(!(p&1)){Wge(K,vt,p),_H();break e}Ue=Error(h(426))}}else if(Ri&&ke.mode&1){var gs=$ge(oe);if(gs!==null){!(gs.flags&65536)&&(gs.flags|=256),Kge(gs,oe,ke,K,p),R8(I_(Ue,ke));break e}}K=Ue=I_(Ue,ke),Fs!==4&&(Fs=2),sP===null?sP=[K]:sP.push(K),K=oe;do{switch(K.tag){case 3:K.flags|=65536,p&=-p,K.lanes|=p;var rt=Hge(K,Ue,p);hge(K,rt);break e;case 1:ke=Ue;var $e=K.type,ct=K.stateNode;if(!(K.flags&128)&&(typeof $e.getDerivedStateFromError=="function"||ct!==null&&typeof ct.componentDidCatch=="function"&&($f===null||!$f.has(ct)))){K.flags|=65536,p&=-p,K.lanes|=p;var qt=Gge(K,ke,p);hge(K,qt);break e}}K=K.return}while(K!==null)}Cve(w)}catch(An){p=An,Ts===w&&w!==null&&(Ts=w=w.return);continue}break}while(1)}function Sve(){var c=f3.current;return f3.current=u3,c===null?u3:c}function _H(){(Fs===0||Fs===3||Fs===2)&&(Fs=4),Qs===null||!($v&268435455)&&!(m3&268435455)||qf(Qs,xo)}function w3(c,p){var w=Lr;Lr|=2;var k=Sve();(Qs!==c||xo!==p)&&(Bh=null,Xv(c,p));do try{VNe();break}catch(H){xve(c,H)}while(1);if(O8(),Lr=w,f3.current=k,Ts!==null)throw Error(h(261));return Qs=null,xo=0,Fs}function VNe(){for(;Ts!==null;)Eve(Ts)}function jNe(){for(;Ts!==null&&!mLe();)Eve(Ts)}function Eve(c){var p=Mve(c.alternate,c,pl);c.memoizedProps=c.pendingProps,p===null?Cve(c):Ts=p,dH.current=null}function Cve(c){var p=c;do{var w=p.alternate;if(c=p.return,p.flags&32768){if(w=LNe(w,p),w!==null){w.flags&=32767,Ts=w;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Fs=6,Ts=null;return}}else if(w=ONe(w,p,pl),w!==null){Ts=w;return}if(p=p.sibling,p!==null){Ts=p;return}Ts=p=c}while(p!==null);Fs===0&&(Fs=5)}function qv(c,p,w){var k=ti,H=ru.transition;try{ru.transition=null,ti=1,HNe(c,p,w,k)}finally{ru.transition=H,ti=k}return null}function HNe(c,p,w,k){do L_();while(Kf!==null);if(Lr&6)throw Error(h(327));w=c.finishedWork;var H=c.finishedLanes;if(w===null)return null;if(c.finishedWork=null,c.finishedLanes=0,w===c.current)throw Error(h(177));c.callbackNode=null,c.callbackPriority=0;var K=w.lanes|w.childLanes;if(CLe(c,K),c===Qs&&(Ts=Qs=null,xo=0),!(w.subtreeFlags&2064)&&!(w.flags&2064)||v3||(v3=!0,kve(xO,function(){return L_(),null})),K=(w.flags&15990)!==0,w.subtreeFlags&15990||K){K=ru.transition,ru.transition=null;var oe=ti;ti=1;var ke=Lr;Lr|=4,dH.current=null,FNe(c,w),mve(w,c),dNe(w8),kO=!!_8,w8=_8=null,c.current=w,BNe(w),gLe(),Lr=ke,ti=oe,ru.transition=K}else c.current=w;if(v3&&(v3=!1,Kf=c,y3=H),K=c.pendingLanes,K===0&&($f=null),bLe(w.stateNode),Wa(c,ms()),p!==null)for(k=c.onRecoverableError,w=0;w<p.length;w++)H=p[w],k(H.value,{componentStack:H.stack,digest:H.digest});if(g3)throw g3=!1,c=fH,fH=null,c;return y3&1&&c.tag!==0&&L_(),K=c.pendingLanes,K&1?c===mH?oP++:(oP=0,mH=c):oP=0,jf(),null}function L_(){if(Kf!==null){var c=cme(y3),p=ru.transition,w=ti;try{if(ru.transition=null,ti=16>c?16:c,Kf===null)var k=!1;else{if(c=Kf,Kf=null,y3=0,Lr&6)throw Error(h(331));var H=Lr;for(Lr|=4,vn=c.current;vn!==null;){var K=vn,oe=K.child;if(vn.flags&16){var ke=K.deletions;if(ke!==null){for(var Ue=0;Ue<ke.length;Ue++){var vt=ke[Ue];for(vn=vt;vn!==null;){var jt=vn;switch(jt.tag){case 0:case 11:case 15:rP(8,jt,K)}var $t=jt.child;if($t!==null)$t.return=jt,vn=$t;else for(;vn!==null;){jt=vn;var Vt=jt.sibling,hn=jt.return;if(cve(jt),jt===vt){vn=null;break}if(Vt!==null){Vt.return=hn,vn=Vt;break}vn=hn}}}var wn=K.alternate;if(wn!==null){var Pn=wn.child;if(Pn!==null){wn.child=null;do{var gs=Pn.sibling;Pn.sibling=null,Pn=gs}while(Pn!==null)}}vn=K}}if(K.subtreeFlags&2064&&oe!==null)oe.return=K,vn=oe;else e:for(;vn!==null;){if(K=vn,K.flags&2048)switch(K.tag){case 0:case 11:case 15:rP(9,K,K.return)}var rt=K.sibling;if(rt!==null){rt.return=K.return,vn=rt;break e}vn=K.return}}var $e=c.current;for(vn=$e;vn!==null;){oe=vn;var ct=oe.child;if(oe.subtreeFlags&2064&&ct!==null)ct.return=oe,vn=ct;else e:for(oe=$e;vn!==null;){if(ke=vn,ke.flags&2048)try{switch(ke.tag){case 0:case 11:case 15:p3(9,ke)}}catch(An){es(ke,ke.return,An)}if(ke===oe){vn=null;break e}var qt=ke.sibling;if(qt!==null){qt.return=ke.return,vn=qt;break e}vn=ke.return}}if(Lr=H,jf(),pd&&typeof pd.onPostCommitFiberRoot=="function")try{pd.onPostCommitFiberRoot(SO,c)}catch{}k=!0}return k}finally{ti=w,ru.transition=p}}return!1}function Pve(c,p,w){p=I_(w,p),p=Hge(c,p,1),c=Gf(c,p,1),p=ma(),c!==null&&(AC(c,1,p),Wa(c,p))}function es(c,p,w){if(c.tag===3)Pve(c,c,w);else for(;p!==null;){if(p.tag===3){Pve(p,c,w);break}else if(p.tag===1){var k=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&($f===null||!$f.has(k))){c=I_(w,c),c=Gge(p,c,1),p=Gf(p,c,1),c=ma(),p!==null&&(AC(p,1,c),Wa(p,c));break}}p=p.return}}function GNe(c,p,w){var k=c.pingCache;k!==null&&k.delete(p),p=ma(),c.pingedLanes|=c.suspendedLanes&w,Qs===c&&(xo&w)===w&&(Fs===4||Fs===3&&(xo&130023424)===xo&&500>ms()-pH?Xv(c,0):hH|=w),Wa(c,p)}function Tve(c,p){p===0&&(c.mode&1?(p=CO,CO<<=1,!(CO&130023424)&&(CO=4194304)):p=1);var w=ma();c=Lh(c,p),c!==null&&(AC(c,p,w),Wa(c,w))}function WNe(c){var p=c.memoizedState,w=0;p!==null&&(w=p.retryLane),Tve(c,w)}function $Ne(c,p){var w=0;switch(c.tag){case 13:var k=c.stateNode,H=c.memoizedState;H!==null&&(w=H.retryLane);break;case 19:k=c.stateNode;break;default:throw Error(h(314))}k!==null&&k.delete(p),Tve(c,w)}var Mve;Mve=function(c,p,w){if(c!==null)if(c.memoizedProps!==p.pendingProps||Va.current)Ha=!0;else{if(!(c.lanes&w)&&!(p.flags&128))return Ha=!1,DNe(c,p,w);Ha=!!(c.flags&131072)}else Ha=!1,Ri&&p.flags&1048576&&sge(p,YO,p.index);switch(p.lanes=0,p.tag){case 2:var k=p.type;d3(c,p),c=p.pendingProps;var H=S_(p,zo.current);M_(p,w),H=K8(null,p,k,c,H,w);var K=X8();return p.flags|=1,typeof H=="object"&&H!==null&&typeof H.render=="function"&&H.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ja(k)?(K=!0,KO(p)):K=!1,p.memoizedState=H.state!==null&&H.state!==void 0?H.state:null,B8(p),H.updater=n3,p.stateNode=H,H._reactInternals=p,z8(p,k,c,w),p=nH(null,p,k,!0,K,w)):(p.tag=0,Ri&&K&&M8(p),fa(null,p,H,w),p=p.child),p;case 16:k=p.elementType;e:{switch(d3(c,p),c=p.pendingProps,H=k._init,k=H(k._payload),p.type=k,H=p.tag=XNe(k),c=ac(k,c),H){case 0:p=tH(null,p,k,c,w);break e;case 1:p=Jge(null,p,k,c,w);break e;case 11:p=Xge(null,p,k,c,w);break e;case 14:p=qge(null,p,k,ac(k.type,c),w);break e}throw Error(h(306,k,""))}return p;case 0:return k=p.type,H=p.pendingProps,H=p.elementType===k?H:ac(k,H),tH(c,p,k,H,w);case 1:return k=p.type,H=p.pendingProps,H=p.elementType===k?H:ac(k,H),Jge(c,p,k,H,w);case 3:e:{if(eve(p),c===null)throw Error(h(387));k=p.pendingProps,K=p.memoizedState,H=K.element,dge(c,p),t3(p,k,null,w);var oe=p.memoizedState;if(k=oe.element,K.isDehydrated)if(K={element:k,isDehydrated:!1,cache:oe.cache,pendingSuspenseBoundaries:oe.pendingSuspenseBoundaries,transitions:oe.transitions},p.updateQueue.baseState=K,p.memoizedState=K,p.flags&256){H=I_(Error(h(423)),p),p=tve(c,p,k,w,H);break e}else if(k!==H){H=I_(Error(h(424)),p),p=tve(c,p,k,w,H);break e}else for(hl=Uf(p.stateNode.containerInfo.firstChild),dl=p,Ri=!0,oc=null,w=_ge(p,null,k,w),p.child=w;w;)w.flags=w.flags&-3|4096,w=w.sibling;else{if(P_(),k===H){p=Fh(c,p,w);break e}fa(c,p,k,w)}p=p.child}return p;case 5:return wge(p),c===null&&I8(p),k=p.type,H=p.pendingProps,K=c!==null?c.memoizedProps:null,oe=H.children,x8(k,H)?oe=null:K!==null&&x8(k,K)&&(p.flags|=32),Qge(c,p),fa(c,p,oe,w),p.child;case 6:return c===null&&I8(p),null;case 13:return nve(c,p,w);case 4:return V8(p,p.stateNode.containerInfo),k=p.pendingProps,c===null?p.child=k_(p,null,k,w):fa(c,p,k,w),p.child;case 11:return k=p.type,H=p.pendingProps,H=p.elementType===k?H:ac(k,H),Xge(c,p,k,H,w);case 7:return fa(c,p,p.pendingProps,w),p.child;case 8:return fa(c,p,p.pendingProps.children,w),p.child;case 12:return fa(c,p,p.pendingProps.children,w),p.child;case 10:e:{if(k=p.type._context,H=p.pendingProps,K=p.memoizedProps,oe=H.value,mi(QO,k._currentValue),k._currentValue=oe,K!==null)if(sc(K.value,oe)){if(K.children===H.children&&!Va.current){p=Fh(c,p,w);break e}}else for(K=p.child,K!==null&&(K.return=p);K!==null;){var ke=K.dependencies;if(ke!==null){oe=K.child;for(var Ue=ke.firstContext;Ue!==null;){if(Ue.context===k){if(K.tag===1){Ue=Nh(-1,w&-w),Ue.tag=2;var vt=K.updateQueue;if(vt!==null){vt=vt.shared;var jt=vt.pending;jt===null?Ue.next=Ue:(Ue.next=jt.next,jt.next=Ue),vt.pending=Ue}}K.lanes|=w,Ue=K.alternate,Ue!==null&&(Ue.lanes|=w),N8(K.return,w,p),ke.lanes|=w;break}Ue=Ue.next}}else if(K.tag===10)oe=K.type===p.type?null:K.child;else if(K.tag===18){if(oe=K.return,oe===null)throw Error(h(341));oe.lanes|=w,ke=oe.alternate,ke!==null&&(ke.lanes|=w),N8(oe,w,p),oe=K.sibling}else oe=K.child;if(oe!==null)oe.return=K;else for(oe=K;oe!==null;){if(oe===p){oe=null;break}if(K=oe.sibling,K!==null){K.return=oe.return,oe=K;break}oe=oe.return}K=oe}fa(c,p,H.children,w),p=p.child}return p;case 9:return H=p.type,k=p.pendingProps.children,M_(p,w),H=tu(H),k=k(H),p.flags|=1,fa(c,p,k,w),p.child;case 14:return k=p.type,H=ac(k,p.pendingProps),H=ac(k.type,H),qge(c,p,k,H,w);case 15:return Yge(c,p,p.type,p.pendingProps,w);case 17:return k=p.type,H=p.pendingProps,H=p.elementType===k?H:ac(k,H),d3(c,p),p.tag=1,ja(k)?(c=!0,KO(p)):c=!1,M_(p,w),gge(p,k,H),z8(p,k,H,w),nH(null,p,k,!0,c,w);case 19:return ive(c,p,w);case 22:return Zge(c,p,w)}throw Error(h(156,p.tag))};function kve(c,p){return sme(c,p)}function KNe(c,p,w,k){this.tag=c,this.key=w,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function iu(c,p,w,k){return new KNe(c,p,w,k)}function wH(c){return c=c.prototype,!(!c||!c.isReactComponent)}function XNe(c){if(typeof c=="function")return wH(c)?1:0;if(c!=null){if(c=c.$$typeof,c===Oe)return 11;if(c===Lt)return 14}return 2}function Yf(c,p){var w=c.alternate;return w===null?(w=iu(c.tag,p,c.key,c.mode),w.elementType=c.elementType,w.type=c.type,w.stateNode=c.stateNode,w.alternate=c,c.alternate=w):(w.pendingProps=p,w.type=c.type,w.flags=0,w.subtreeFlags=0,w.deletions=null),w.flags=c.flags&14680064,w.childLanes=c.childLanes,w.lanes=c.lanes,w.child=c.child,w.memoizedProps=c.memoizedProps,w.memoizedState=c.memoizedState,w.updateQueue=c.updateQueue,p=c.dependencies,w.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},w.sibling=c.sibling,w.index=c.index,w.ref=c.ref,w}function x3(c,p,w,k,H,K){var oe=2;if(k=c,typeof c=="function")wH(c)&&(oe=1);else if(typeof c=="string")oe=5;else e:switch(c){case ve:return Yv(w.children,H,K,p);case we:oe=8,H|=8;break;case Le:return c=iu(12,w,p,H|2),c.elementType=Le,c.lanes=K,c;case Q:return c=iu(13,w,p,H),c.elementType=Q,c.lanes=K,c;case We:return c=iu(19,w,p,H),c.elementType=We,c.lanes=K,c;case Re:return S3(w,H,K,p);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case lt:oe=10;break e;case ue:oe=9;break e;case Oe:oe=11;break e;case Lt:oe=14;break e;case Ie:oe=16,k=null;break e}throw Error(h(130,c==null?c:typeof c,""))}return p=iu(oe,w,p,H),p.elementType=c,p.type=k,p.lanes=K,p}function Yv(c,p,w,k){return c=iu(7,c,k,p),c.lanes=w,c}function S3(c,p,w,k){return c=iu(22,c,k,p),c.elementType=Re,c.lanes=w,c.stateNode={isHidden:!1},c}function xH(c,p,w){return c=iu(6,c,null,p),c.lanes=w,c}function SH(c,p,w){return p=iu(4,c.children!==null?c.children:[],c.key,p),p.lanes=w,p.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},p}function qNe(c,p,w,k,H){this.tag=p,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=J6(0),this.expirationTimes=J6(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J6(0),this.identifierPrefix=k,this.onRecoverableError=H,this.mutableSourceEagerHydrationData=null}function EH(c,p,w,k,H,K,oe,ke,Ue){return c=new qNe(c,p,w,ke,Ue),p===1?(p=1,K===!0&&(p|=8)):p=0,K=iu(3,null,null,p),c.current=K,K.stateNode=c,K.memoizedState={element:k,isDehydrated:w,cache:null,transitions:null,pendingSuspenseBoundaries:null},B8(K),c}function YNe(c,p,w){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ce,key:k==null?null:""+k,children:c,containerInfo:p,implementation:w}}function Ave(c){if(!c)return Vf;c=c._reactInternals;e:{if(Bv(c)!==c||c.tag!==1)throw Error(h(170));var p=c;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ja(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(h(171))}if(c.tag===1){var w=c.type;if(ja(w))return nge(c,w,p)}return p}function Ive(c,p,w,k,H,K,oe,ke,Ue){return c=EH(w,k,!0,c,H,K,oe,ke,Ue),c.context=Ave(null),w=c.current,k=ma(),H=Xf(w),K=Nh(k,H),K.callback=p??null,Gf(w,K,H),c.current.lanes=H,AC(c,H,k),Wa(c,k),c}function E3(c,p,w,k){var H=p.current,K=ma(),oe=Xf(H);return w=Ave(w),p.context===null?p.context=w:p.pendingContext=w,p=Nh(K,oe),p.payload={element:c},k=k===void 0?null:k,k!==null&&(p.callback=k),c=Gf(H,p,oe),c!==null&&(cc(c,H,oe,K),e3(c,H,oe)),oe}function C3(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function Rve(c,p){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var w=c.retryLane;c.retryLane=w!==0&&w<p?w:p}}function CH(c,p){Rve(c,p),(c=c.alternate)&&Rve(c,p)}function ZNe(){return null}var Dve=typeof reportError=="function"?reportError:function(c){console.error(c)};function PH(c){this._internalRoot=c}P3.prototype.render=PH.prototype.render=function(c){var p=this._internalRoot;if(p===null)throw Error(h(409));E3(c,p,null,null)},P3.prototype.unmount=PH.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var p=c.containerInfo;Kv(function(){E3(null,c,null,null)}),p[Ih]=null}};function P3(c){this._internalRoot=c}P3.prototype.unstable_scheduleHydration=function(c){if(c){var p=pme();c={blockedOn:null,target:c,priority:p};for(var w=0;w<Nf.length&&p!==0&&p<Nf[w].priority;w++);Nf.splice(w,0,c),w===0&&gme(c)}};function TH(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function T3(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function Ove(){}function QNe(c,p,w,k,H){if(H){if(typeof k=="function"){var K=k;k=function(){var vt=C3(oe);K.call(vt)}}var oe=Ive(p,k,c,0,null,!1,!1,"",Ove);return c._reactRootContainer=oe,c[Ih]=oe.current,GC(c.nodeType===8?c.parentNode:c),Kv(),oe}for(;H=c.lastChild;)c.removeChild(H);if(typeof k=="function"){var ke=k;k=function(){var vt=C3(Ue);ke.call(vt)}}var Ue=EH(c,0,!1,null,null,!1,!1,"",Ove);return c._reactRootContainer=Ue,c[Ih]=Ue.current,GC(c.nodeType===8?c.parentNode:c),Kv(function(){E3(p,Ue,w,k)}),Ue}function M3(c,p,w,k,H){var K=w._reactRootContainer;if(K){var oe=K;if(typeof H=="function"){var ke=H;H=function(){var Ue=C3(oe);ke.call(Ue)}}E3(p,oe,c,H)}else oe=QNe(w,p,c,H,k);return C3(oe)}dme=function(c){switch(c.tag){case 3:var p=c.stateNode;if(p.current.memoizedState.isDehydrated){var w=kC(p.pendingLanes);w!==0&&(e8(p,w|1),Wa(p,ms()),!(Lr&6)&&(O_=ms()+500,jf()))}break;case 13:Kv(function(){var k=Lh(c,1);if(k!==null){var H=ma();cc(k,c,1,H)}}),CH(c,1)}},t8=function(c){if(c.tag===13){var p=Lh(c,134217728);if(p!==null){var w=ma();cc(p,c,134217728,w)}CH(c,134217728)}},hme=function(c){if(c.tag===13){var p=Xf(c),w=Lh(c,p);if(w!==null){var k=ma();cc(w,c,p,k)}CH(c,p)}},pme=function(){return ti},fme=function(c,p){var w=ti;try{return ti=c,p()}finally{ti=w}},h_=function(c,p,w){switch(p){case"input":if(xe(c,w),p=w.name,w.type==="radio"&&p!=null){for(w=c;w.parentNode;)w=w.parentNode;for(w=w.querySelectorAll("input[name="+JSON.stringify(""+p)+'][type="radio"]'),p=0;p<w.length;p++){var k=w[p];if(k!==c&&k.form===c.form){var H=WO(k);if(!H)throw Error(h(90));Wr(k),xe(k,H)}}}break;case"textarea":Rt(c,w);break;case"select":p=w.value,p!=null&&nt(c,!!w.multiple,p,!1)}},Qfe=yH,Jfe=Kv;var JNe={usingClientEntryPoint:!1,Events:[KC,w_,WO,Yfe,Zfe,yH]},aP={findFiberByHostInstance:Uv,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},eFe={bundleType:aP.bundleType,version:aP.version,rendererPackageName:aP.rendererPackageName,rendererConfig:aP.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=rme(c),c===null?null:c.stateNode},findFiberByHostInstance:aP.findFiberByHostInstance||ZNe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(lP=__REACT_DEVTOOLS_GLOBAL_HOOK__,!lP.isDisabled&&lP.supportsFiber))try{SO=lP.inject(eFe),pd=lP}catch{}var lP;s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JNe,s.createPortal=function(c,p){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!TH(p))throw Error(h(200));return YNe(c,p,null,w)},s.createRoot=function(c,p){if(!TH(c))throw Error(h(299));var w=!1,k="",H=Dve;return p!=null&&(p.unstable_strictMode===!0&&(w=!0),p.identifierPrefix!==void 0&&(k=p.identifierPrefix),p.onRecoverableError!==void 0&&(H=p.onRecoverableError)),p=EH(c,1,!1,null,null,w,!1,k,H),c[Ih]=p.current,GC(c.nodeType===8?c.parentNode:c),new PH(p)},s.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var p=c._reactInternals;if(p===void 0)throw typeof c.render=="function"?Error(h(188)):(c=Object.keys(c).join(","),Error(h(268,c)));return c=rme(p),c=c===null?null:c.stateNode,c},s.flushSync=function(c){return Kv(c)},s.hydrate=function(c,p,w){if(!T3(p))throw Error(h(200));return M3(null,c,p,!0,w)},s.hydrateRoot=function(c,p,w){if(!TH(c))throw Error(h(405));var k=w!=null&&w.hydratedSources||null,H=!1,K="",oe=Dve;if(w!=null&&(w.unstable_strictMode===!0&&(H=!0),w.identifierPrefix!==void 0&&(K=w.identifierPrefix),w.onRecoverableError!==void 0&&(oe=w.onRecoverableError)),p=Ive(p,null,c,1,w??null,H,!1,K,oe),c[Ih]=p.current,GC(c),k)for(c=0;c<k.length;c++)w=k[c],H=w._getVersion,H=H(w._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[w,H]:p.mutableSourceEagerHydrationData.push(w,H);return new P3(p)},s.render=function(c,p,w){if(!T3(p))throw Error(h(200));return M3(null,c,p,!1,w)},s.unmountComponentAtNode=function(c){if(!T3(c))throw Error(h(40));return c._reactRootContainer?(Kv(function(){M3(null,null,c,!1,function(){c._reactRootContainer=null,c[Ih]=null})}),!0):!1},s.unstable_batchedUpdates=yH,s.unstable_renderSubtreeIntoContainer=function(c,p,w,k){if(!T3(w))throw Error(h(200));if(c==null||c._reactInternals===void 0)throw Error(h(38));return M3(c,p,w,!1,k)},s.version="18.2.0-next-9e3b772b8-20220608"}),Du=W((s,a)=>{function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(h){console.error(h)}}l(),a.exports=MS()});function L5(s){let[,a]=(0,Vc.useState)(0);return(0,Vc.useCallback)(()=>{a(l=>l+1)},[])}function Qn(s,a,l){let h=(0,Vc.useCallback)(s,a),f=(0,Vc.useRef)(null);f.current?f.current.set(h):f.current=new La.Atom(h);let g=(0,Vc.useRef)(null);return g.current||(g.current=(0,La.prism)(()=>f.current.prism.getValue()())),Jy(g.current,l)}function dI(){Wg||(Wg=!0,(0,kS.default)(()=>{(0,hI.unstable_batchedUpdates)(function(){for(var s,a;tl.length>0;){let l=tl.shift();qp.delete(l);let h;Ou&&((s=l.debug)==null||s.history.push("queue reached"));try{h=l.der.getValue()}catch(f){Ou&&((a=l.debug)==null||a.history.push("queue: der.getValue() errored")),console.error("A `der.getValue()` in `usePrismInstance(der)` threw an error. This may be a zombie child issue, so we're gonna try to get its value again in a normal react render phase.If you see the same error again, then you either have an error in your prism code, or the deps array in `usePrism(fn, deps)` is missing a dependency and causing the prism to read stale values."),console.error(f),l.runUpdate();continue}h!==l.lastValue&&(l.lastValue=h,l.runUpdate())}Wg=!1},1)}))}function Jy(s,a){var l;let h=L5(),f=(0,Vc.useRef)(void 0);f.current||(AS++,f.current={order:AS,runUpdate:()=>{f.current.unmounted||h()},der:s,lastValue:void 0,unmounted:!1,queueUpdate:()=>{var b;Ou&&((b=f.current.debug)==null||b.history.push("queueUpdate()")),pI(f.current)},untap:s.onStale(()=>{Ou&&f.current.debug.history.push("onStale(cb)"),f.current.queueUpdate()})},Ou&&(f.current.debug={label:a,traceOfFirstTimeRender:new Error,history:[]})),(0,Vc.useLayoutEffect)(()=>function(){f.current.unmounted=!0,f.current.untap(),IS(f.current)},[]),IS(f.current);let g=f.current.der.getValue();return f.current.lastValue=g,Ou&&((l=f.current.debug)==null||l.history.push("rendered")),g}var La,kS,Vc,hI,Ou,ir,AS,tl,qp,Wg,pI,fI,IS,En=P(()=>{La=Ut,di(),kS=X(TS()),Vc=X(Ne()),hI=X(Du()),Ou=!1,ir=(s,a)=>Qn(()=>(0,La.val)(s),[s],a),AS=0,tl=[],qp=new Set,Wg=!1,pI=s=>{fI(s),dI()},fI=s=>{if(!qp.has(s))if(qp.add(s),tl.length===0)tl.push(s);else{let a=vS(tl,l=>l.order>=s.order);a===-1?tl.push(s):tl[a].order>s.order&&tl.splice(a,0,s)}},IS=s=>{if(!qp.has(s))return;qp.delete(s);let a=vS(tl,l=>l===s);tl.splice(a,1)}}),N5=W(s=>{var a=60103,l=60106,h=60107,f=60108,g=60114,b=60109,_=60110,S=60112,C=60113,I=60120,O=60115,D=60116,A=60121,N=60122,L=60117,V=60129,G=60131;typeof Symbol=="function"&&Symbol.for&&($=Symbol.for,a=$("react.element"),l=$("react.portal"),h=$("react.fragment"),f=$("react.strict_mode"),g=$("react.profiler"),b=$("react.provider"),_=$("react.context"),S=$("react.forward_ref"),C=$("react.suspense"),I=$("react.suspense_list"),O=$("react.memo"),D=$("react.lazy"),A=$("react.block"),N=$("react.server.block"),L=$("react.fundamental"),V=$("react.debug_trace_mode"),G=$("react.legacy_hidden"));var $;function Y(Q){if(typeof Q=="object"&&Q!==null){var We=Q.$$typeof;switch(We){case a:switch(Q=Q.type,Q){case h:case g:case f:case C:case I:return Q;default:switch(Q=Q&&Q.$$typeof,Q){case _:case S:case D:case O:case b:return Q;default:return We}}case l:return We}}}var re=b,ne=a,le=S,Ce=h,ve=D,we=O,Le=l,lt=g,ue=f,Oe=C;s.ContextConsumer=_,s.ContextProvider=re,s.Element=ne,s.ForwardRef=le,s.Fragment=Ce,s.Lazy=ve,s.Memo=we,s.Portal=Le,s.Profiler=lt,s.StrictMode=ue,s.Suspense=Oe,s.isAsyncMode=function(){return!1},s.isConcurrentMode=function(){return!1},s.isContextConsumer=function(Q){return Y(Q)===_},s.isContextProvider=function(Q){return Y(Q)===b},s.isElement=function(Q){return typeof Q=="object"&&Q!==null&&Q.$$typeof===a},s.isForwardRef=function(Q){return Y(Q)===S},s.isFragment=function(Q){return Y(Q)===h},s.isLazy=function(Q){return Y(Q)===D},s.isMemo=function(Q){return Y(Q)===O},s.isPortal=function(Q){return Y(Q)===l},s.isProfiler=function(Q){return Y(Q)===g},s.isStrictMode=function(Q){return Y(Q)===f},s.isSuspense=function(Q){return Y(Q)===C},s.isValidElementType=function(Q){return typeof Q=="string"||typeof Q=="function"||Q===h||Q===g||Q===V||Q===f||Q===C||Q===I||Q===G||typeof Q=="object"&&Q!==null&&(Q.$$typeof===D||Q.$$typeof===O||Q.$$typeof===b||Q.$$typeof===_||Q.$$typeof===S||Q.$$typeof===L||Q.$$typeof===A||Q[0]===N)},s.typeOf=Y}),F5=W((s,a)=>{a.exports=N5()}),RS=W((s,a)=>{a.exports=function(l,h,f,g){var b=f?f.call(g,l,h):void 0;if(b!==void 0)return!!b;if(l===h)return!0;if(typeof l!="object"||!l||typeof h!="object"||!h)return!1;var _=Object.keys(l),S=Object.keys(h);if(_.length!==S.length)return!1;for(var C=Object.prototype.hasOwnProperty.bind(h),I=0;I<_.length;I++){var O=_[I];if(!C(O))return!1;var D=l[O],A=h[O];if(b=f?f.call(g,D,A,O):void 0,b===!1||b===void 0&&D!==A)return!1}return!0}});function B5(s){function a(me,tt,st,ht,Xe){for(var sn=0,Et=0,Qt=0,_n=0,Vn,Ln,Wr=0,J=0,mt,ft=mt=Vn=0,Ee=0,xe=0,qe=0,Pt=0,It=st.length,nt=It-1,zt,kt="",Rt="",Rn="",Or="",tr;Ee<It;){if(Ln=st.charCodeAt(Ee),Ee===nt&&Et+_n+Qt+sn!==0&&(Et!==0&&(Ln=Et===47?10:47),_n=Qt=sn=0,It++,nt++),Et+_n+Qt+sn===0){if(Ee===nt&&(0<xe&&(kt=kt.replace(D,"")),0<kt.trim().length)){switch(Ln){case 32:case 9:case 59:case 13:case 10:break;default:kt+=st.charAt(Ee)}Ln=59}switch(Ln){case 123:for(kt=kt.trim(),Vn=kt.charCodeAt(0),mt=1,Pt=++Ee;Ee<It;){switch(Ln=st.charCodeAt(Ee)){case 123:mt++;break;case 125:mt--;break;case 47:switch(Ln=st.charCodeAt(Ee+1)){case 42:case 47:e:{for(ft=Ee+1;ft<nt;++ft)switch(st.charCodeAt(ft)){case 47:if(Ln===42&&st.charCodeAt(ft-1)===42&&Ee+2!==ft){Ee=ft+1;break e}break;case 10:if(Ln===47){Ee=ft+1;break e}}Ee=ft}}break;case 91:Ln++;case 40:Ln++;case 34:case 39:for(;Ee++<nt&&st.charCodeAt(Ee)!==Ln;);}if(mt===0)break;Ee++}switch(mt=st.substring(Pt,Ee),Vn===0&&(Vn=(kt=kt.replace(O,"").trim()).charCodeAt(0)),Vn){case 64:switch(0<xe&&(kt=kt.replace(D,"")),Ln=kt.charCodeAt(1),Ln){case 100:case 109:case 115:case 45:xe=tt;break;default:xe=Lt}if(mt=a(tt,xe,mt,Ln,Xe+1),Pt=mt.length,0<Re&&(xe=l(Lt,kt,qe),tr=_(3,mt,xe,tt,Oe,ue,Pt,Ln,Xe,ht),kt=xe.join(""),tr!==void 0&&(Pt=(mt=tr.trim()).length)===0&&(Ln=0,mt="")),0<Pt)switch(Ln){case 115:kt=kt.replace(le,b);case 100:case 109:case 45:mt=kt+"{"+mt+"}";break;case 107:kt=kt.replace($,"$1 $2"),mt=kt+"{"+mt+"}",mt=We===1||We===2&&g("@"+mt,3)?"@-webkit-"+mt+"@"+mt:"@"+mt;break;default:mt=kt+mt,ht===112&&(mt=(Rt+=mt,""))}else mt="";break;default:mt=a(tt,l(tt,kt,qe),mt,ht,Xe+1)}Rn+=mt,mt=qe=xe=ft=Vn=0,kt="",Ln=st.charCodeAt(++Ee);break;case 125:case 59:if(kt=(0<xe?kt.replace(D,""):kt).trim(),1<(Pt=kt.length))switch(ft===0&&(Vn=kt.charCodeAt(0),Vn===45||96<Vn&&123>Vn)&&(Pt=(kt=kt.replace(" ",":")).length),0<Re&&(tr=_(1,kt,tt,me,Oe,ue,Rt.length,ht,Xe,ht))!==void 0&&(Pt=(kt=tr.trim()).length)===0&&(kt="\0\0"),Vn=kt.charCodeAt(0),Ln=kt.charCodeAt(1),Vn){case 0:break;case 64:if(Ln===105||Ln===99){Or+=kt+st.charAt(Ee);break}default:kt.charCodeAt(Pt-1)!==58&&(Rt+=f(kt,Vn,Ln,kt.charCodeAt(2)))}qe=xe=ft=Vn=0,kt="",Ln=st.charCodeAt(++Ee)}}switch(Ln){case 13:case 10:Et===47?Et=0:1+Vn===0&&ht!==107&&0<kt.length&&(xe=1,kt+="\0"),0<Re*Ct&&_(0,kt,tt,me,Oe,ue,Rt.length,ht,Xe,ht),ue=1,Oe++;break;case 59:case 125:if(Et+_n+Qt+sn===0){ue++;break}default:switch(ue++,zt=st.charAt(Ee),Ln){case 9:case 32:if(_n+sn+Et===0)switch(Wr){case 44:case 58:case 9:case 32:zt="";break;default:Ln!==32&&(zt=" ")}break;case 0:zt="\\0";break;case 12:zt="\\f";break;case 11:zt="\\v";break;case 38:_n+Et+sn===0&&(xe=qe=1,zt="\f"+zt);break;case 108:if(_n+Et+sn+Q===0&&0<ft)switch(Ee-ft){case 2:Wr===112&&st.charCodeAt(Ee-3)===58&&(Q=Wr);case 8:J===111&&(Q=J)}break;case 58:_n+Et+sn===0&&(ft=Ee);break;case 44:Et+Qt+_n+sn===0&&(xe=1,zt+="\r");break;case 34:case 39:Et===0&&(_n=_n===Ln?0:_n===0?Ln:_n);break;case 91:_n+Et+Qt===0&&sn++;break;case 93:_n+Et+Qt===0&&sn--;break;case 41:_n+Et+sn===0&&Qt--;break;case 40:if(_n+Et+sn===0){if(Vn===0)switch(2*Wr+3*J){case 533:break;default:Vn=1}Qt++}break;case 64:Et+Qt+_n+sn+ft+mt===0&&(mt=1);break;case 42:case 47:if(!(0<_n+sn+Qt))switch(Et){case 0:switch(2*Ln+3*st.charCodeAt(Ee+1)){case 235:Et=47;break;case 220:Pt=Ee,Et=42}break;case 42:Ln===47&&Wr===42&&Pt+2!==Ee&&(st.charCodeAt(Pt+2)===33&&(Rt+=st.substring(Pt,Ee+1)),zt="",Et=0)}}Et===0&&(kt+=zt)}J=Wr,Wr=Ln,Ee++}if(Pt=Rt.length,0<Pt){if(xe=tt,0<Re&&(tr=_(2,Rt,xe,me,Oe,ue,Pt,ht,Xe,ht),tr!==void 0&&(Rt=tr).length===0))return Or+Rt+Rn;if(Rt=xe.join(",")+"{"+Rt+"}",We*Q!==0){switch(We!==2||g(Rt,2)||(Q=0),Q){case 111:Rt=Rt.replace(re,":-moz-$1")+Rt;break;case 112:Rt=Rt.replace(Y,"::-webkit-input-$1")+Rt.replace(Y,"::-moz-$1")+Rt.replace(Y,":-ms-input-$1")+Rt}Q=0}}return Or+Rt+Rn}function l(me,tt,st){var ht=tt.trim().split(V);tt=ht;var Xe=ht.length,sn=me.length;switch(sn){case 0:case 1:var Et=0;for(me=sn===0?"":me[0]+" ";Et<Xe;++Et)tt[Et]=h(me,tt[Et],st).trim();break;default:var Qt=Et=0;for(tt=[];Et<Xe;++Et)for(var _n=0;_n<sn;++_n)tt[Qt++]=h(me[_n]+" ",ht[Et],st).trim()}return tt}function h(me,tt,st){var ht=tt.charCodeAt(0);switch(33>ht&&(ht=(tt=tt.trim()).charCodeAt(0)),ht){case 38:return tt.replace(G,"$1"+me.trim());case 58:return me.trim()+tt.replace(G,"$1"+me.trim());default:if(0<1*st&&0<tt.indexOf("\f"))return tt.replace(G,(me.charCodeAt(0)===58?"":"$1")+me.trim())}return me+tt}function f(me,tt,st,ht){var Xe=me+";",sn=2*tt+3*st+4*ht;if(sn===944){me=Xe.indexOf(":",9)+1;var Et=Xe.substring(me,Xe.length-1).trim();return Et=Xe.substring(0,me).trim()+Et+";",We===1||We===2&&g(Et,1)?"-webkit-"+Et+Et:Et}if(We===0||We===2&&!g(Xe,1))return Xe;switch(sn){case 1015:return Xe.charCodeAt(10)===97?"-webkit-"+Xe+Xe:Xe;case 951:return Xe.charCodeAt(3)===116?"-webkit-"+Xe+Xe:Xe;case 963:return Xe.charCodeAt(5)===110?"-webkit-"+Xe+Xe:Xe;case 1009:if(Xe.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+Xe+Xe;case 978:return"-webkit-"+Xe+"-moz-"+Xe+Xe;case 1019:case 983:return"-webkit-"+Xe+"-moz-"+Xe+"-ms-"+Xe+Xe;case 883:if(Xe.charCodeAt(8)===45)return"-webkit-"+Xe+Xe;if(0<Xe.indexOf("image-set(",11))return Xe.replace(lt,"$1-webkit-$2")+Xe;break;case 932:if(Xe.charCodeAt(4)===45)switch(Xe.charCodeAt(5)){case 103:return"-webkit-box-"+Xe.replace("-grow","")+"-webkit-"+Xe+"-ms-"+Xe.replace("grow","positive")+Xe;case 115:return"-webkit-"+Xe+"-ms-"+Xe.replace("shrink","negative")+Xe;case 98:return"-webkit-"+Xe+"-ms-"+Xe.replace("basis","preferred-size")+Xe}return"-webkit-"+Xe+"-ms-"+Xe+Xe;case 964:return"-webkit-"+Xe+"-ms-flex-"+Xe+Xe;case 1023:if(Xe.charCodeAt(8)!==99)break;return Et=Xe.substring(Xe.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+Et+"-webkit-"+Xe+"-ms-flex-pack"+Et+Xe;case 1005:return N.test(Xe)?Xe.replace(A,":-webkit-")+Xe.replace(A,":-moz-")+Xe:Xe;case 1e3:switch(Et=Xe.substring(13).trim(),tt=Et.indexOf("-")+1,Et.charCodeAt(0)+Et.charCodeAt(tt)){case 226:Et=Xe.replace(ne,"tb");break;case 232:Et=Xe.replace(ne,"tb-rl");break;case 220:Et=Xe.replace(ne,"lr");break;default:return Xe}return"-webkit-"+Xe+"-ms-"+Et+Xe;case 1017:if(Xe.indexOf("sticky",9)===-1)break;case 975:switch(tt=(Xe=me).length-10,Et=(Xe.charCodeAt(tt)===33?Xe.substring(0,tt):Xe).substring(me.indexOf(":",7)+1).trim(),sn=Et.charCodeAt(0)+(Et.charCodeAt(7)|0)){case 203:if(111>Et.charCodeAt(8))break;case 115:Xe=Xe.replace(Et,"-webkit-"+Et)+";"+Xe;break;case 207:case 102:Xe=Xe.replace(Et,"-webkit-"+(102<sn?"inline-":"")+"box")+";"+Xe.replace(Et,"-webkit-"+Et)+";"+Xe.replace(Et,"-ms-"+Et+"box")+";"+Xe}return Xe+";";case 938:if(Xe.charCodeAt(5)===45)switch(Xe.charCodeAt(6)){case 105:return Et=Xe.replace("-items",""),"-webkit-"+Xe+"-webkit-box-"+Et+"-ms-flex-"+Et+Xe;case 115:return"-webkit-"+Xe+"-ms-flex-item-"+Xe.replace(ve,"")+Xe;default:return"-webkit-"+Xe+"-ms-flex-line-pack"+Xe.replace("align-content","").replace(ve,"")+Xe}break;case 973:case 989:if(Xe.charCodeAt(3)!==45||Xe.charCodeAt(4)===122)break;case 931:case 953:if(Le.test(me)===!0)return(Et=me.substring(me.indexOf(":")+1)).charCodeAt(0)===115?f(me.replace("stretch","fill-available"),tt,st,ht).replace(":fill-available",":stretch"):Xe.replace(Et,"-webkit-"+Et)+Xe.replace(Et,"-moz-"+Et.replace("fill-",""))+Xe;break;case 962:if(Xe="-webkit-"+Xe+(Xe.charCodeAt(5)===102?"-ms-"+Xe:"")+Xe,st+ht===211&&Xe.charCodeAt(13)===105&&0<Xe.indexOf("transform",10))return Xe.substring(0,Xe.indexOf(";",27)+1).replace(L,"$1-webkit-$2")+Xe}return Xe}function g(me,tt){var st=me.indexOf(tt===1?":":"{"),ht=me.substring(0,tt!==3?st:10);return st=me.substring(st+1,me.length-1),Ke(tt!==2?ht:ht.replace(we,"$1"),st,tt)}function b(me,tt){var st=f(tt,tt.charCodeAt(0),tt.charCodeAt(1),tt.charCodeAt(2));return st!==tt+";"?st.replace(Ce," or ($1)").substring(4):"("+tt+")"}function _(me,tt,st,ht,Xe,sn,Et,Qt,_n,Vn){for(var Ln=0,Wr=tt,J;Ln<Re;++Ln)switch(J=Ie[Ln].call(I,me,Wr,st,ht,Xe,sn,Et,Qt,_n,Vn)){case void 0:case!1:case!0:case null:break;default:Wr=J}if(Wr!==tt)return Wr}function S(me){switch(me){case void 0:case null:Re=Ie.length=0;break;default:if(typeof me=="function")Ie[Re++]=me;else if(typeof me=="object")for(var tt=0,st=me.length;tt<st;++tt)S(me[tt]);else Ct=!!me|0}return S}function C(me){return me=me.prefix,me!==void 0&&(Ke=null,me?typeof me!="function"?We=1:(We=2,Ke=me):We=0),C}function I(me,tt){var st=me;if(33>st.charCodeAt(0)&&(st=st.trim()),ce=st,st=[ce],0<Re){var ht=_(-1,tt,st,st,Oe,ue,0,0,0,0);ht!==void 0&&typeof ht=="string"&&(tt=ht)}var Xe=a(Lt,st,tt,0,0);return 0<Re&&(ht=_(-2,Xe,st,st,Oe,ue,Xe.length,0,0,0),ht!==void 0&&(Xe=ht)),ce="",Q=0,ue=Oe=1,Xe}var O=/^\0+/g,D=/[\0\r\f]/g,A=/: */g,N=/zoo|gra/,L=/([,: ])(transform)/g,V=/,\r+?/g,G=/([\t\r\n ])*\f?&/g,$=/@(k\w+)\s*(\S*)\s*/,Y=/::(place)/g,re=/:(read-only)/g,ne=/[svh]\w+-[tblr]{2}/,le=/\(\s*(.*)\s*\)/g,Ce=/([\s\S]*?);/g,ve=/-self|flex-/g,we=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Le=/stretch|:\s*\w+\-(?:conte|avail)/,lt=/([^-])(image-set\()/,ue=1,Oe=1,Q=0,We=1,Lt=[],Ie=[],Re=0,Ke=null,Ct=0,ce="";return I.use=S,I.set=C,s!==void 0&&C(s),I}var Yp,mI=P(()=>{Yp=B5}),gI,vI,U5=P(()=>{gI={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},vI=gI});function z5(s){var a=Object.create(null);return function(l){return a[l]===void 0&&(a[l]=s(l)),a[l]}}var eb,V5=P(()=>{eb=z5}),Zp,yI,DS,j5=P(()=>{V5(),Zp=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,yI=eb(function(s){return Zp.test(s)||s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)<91}),DS=yI}),H5=W(s=>{var a=typeof Symbol=="function"&&Symbol.for,l=a?Symbol.for("react.element"):60103,h=a?Symbol.for("react.portal"):60106,f=a?Symbol.for("react.fragment"):60107,g=a?Symbol.for("react.strict_mode"):60108,b=a?Symbol.for("react.profiler"):60114,_=a?Symbol.for("react.provider"):60109,S=a?Symbol.for("react.context"):60110,C=a?Symbol.for("react.async_mode"):60111,I=a?Symbol.for("react.concurrent_mode"):60111,O=a?Symbol.for("react.forward_ref"):60112,D=a?Symbol.for("react.suspense"):60113,A=a?Symbol.for("react.suspense_list"):60120,N=a?Symbol.for("react.memo"):60115,L=a?Symbol.for("react.lazy"):60116,V=a?Symbol.for("react.block"):60121,G=a?Symbol.for("react.fundamental"):60117,$=a?Symbol.for("react.responder"):60118,Y=a?Symbol.for("react.scope"):60119;function re(le){if(typeof le=="object"&&le!==null){var Ce=le.$$typeof;switch(Ce){case l:switch(le=le.type,le){case C:case I:case f:case b:case g:case D:return le;default:switch(le=le&&le.$$typeof,le){case S:case O:case L:case N:case _:return le;default:return Ce}}case h:return Ce}}}function ne(le){return re(le)===I}s.AsyncMode=C,s.ConcurrentMode=I,s.ContextConsumer=S,s.ContextProvider=_,s.Element=l,s.ForwardRef=O,s.Fragment=f,s.Lazy=L,s.Memo=N,s.Portal=h,s.Profiler=b,s.StrictMode=g,s.Suspense=D,s.isAsyncMode=function(le){return ne(le)||re(le)===C},s.isConcurrentMode=ne,s.isContextConsumer=function(le){return re(le)===S},s.isContextProvider=function(le){return re(le)===_},s.isElement=function(le){return typeof le=="object"&&le!==null&&le.$$typeof===l},s.isForwardRef=function(le){return re(le)===O},s.isFragment=function(le){return re(le)===f},s.isLazy=function(le){return re(le)===L},s.isMemo=function(le){return re(le)===N},s.isPortal=function(le){return re(le)===h},s.isProfiler=function(le){return re(le)===b},s.isStrictMode=function(le){return re(le)===g},s.isSuspense=function(le){return re(le)===D},s.isValidElementType=function(le){return typeof le=="string"||typeof le=="function"||le===f||le===I||le===b||le===g||le===D||le===A||typeof le=="object"&&le!==null&&(le.$$typeof===L||le.$$typeof===N||le.$$typeof===_||le.$$typeof===S||le.$$typeof===O||le.$$typeof===G||le.$$typeof===$||le.$$typeof===Y||le.$$typeof===V)},s.typeOf=re}),OS=W((s,a)=>{a.exports=H5()}),bI=W((s,a)=>{var l=OS(),h={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},f={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},g={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},b={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_={};_[l.ForwardRef]=g,_[l.Memo]=b;function S(V){return l.isMemo(V)?b:_[V.$$typeof]||h}var C=Object.defineProperty,I=Object.getOwnPropertyNames,O=Object.getOwnPropertySymbols,D=Object.getOwnPropertyDescriptor,A=Object.getPrototypeOf,N=Object.prototype;function L(V,G,$){if(typeof G!="string"){if(N){var Y=A(G);Y&&Y!==N&&L(V,Y,$)}var re=I(G);O&&(re=re.concat(O(G)));for(var ne=S(V),le=S(G),Ce=0;Ce<re.length;++Ce){var ve=re[Ce];if(!f[ve]&&!($&&$[ve])&&!(le&&le[ve])&&!(ne&&ne[ve])){var we=D(G,ve);try{C(V,ve,we)}catch{}}}}return V}a.exports=L});function nl(){return(nl=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(s[h]=l[h])}return s}).apply(this,arguments)}function $g(s){return typeof s=="function"}function ia(s){return s.displayName||s.name||"Component"}function Lu(s){return s&&typeof s.styledComponentId=="string"}function ao(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];throw new Error("An error occurred. See https://git.io/JUIaE#"+s+" for more information."+(l.length>0?" Args: "+l.join(", "):""))}function LS(s){var a,l="";for(a=Math.abs(s);a>52;a=a/52|0)l=jS(a%52)+l;return(jS(a%52)+l).replace(Yg,"$1-$2")}function Qp(s){for(var a=0;a<s.length;a+=1){var l=s[a];if($g(l)&&!Lu(l))return!1}return!0}function rh(s){var a,l,h,f,g=s===void 0?Na:s,b=g.options,_=b===void 0?Na:b,S=g.plugins,C=S===void 0?ih:S,I=new Yp(_),O=[],D=function(L){function V(G){if(G)try{L(G+"}")}catch{}}return function(G,$,Y,re,ne,le,Ce,ve,we,Le){switch(G){case 1:if(we===0&&$.charCodeAt(0)===64)return L($+";"),"";break;case 2:if(ve===0)return $+"/*|*/";break;case 3:switch(ve){case 102:case 112:return L(Y[0]+$),"";default:return $+(Le===0?"/*|*/":"")}case-2:$.split("/*|*/}").forEach(V)}}}(function(L){O.push(L)}),A=function(L,V,G){return V===0&&WS.indexOf(G[l.length])!==-1||G.match(f)?L:"."+a};function N(L,V,G,$){$===void 0&&($="&");var Y=L.replace(GS,""),re=V&&G?G+" "+V+" { "+Y+" }":Y;return a=$,l=V,h=new RegExp("\\"+l+"\\b","g"),f=new RegExp("(\\"+l+"\\b){2,}"),I(G||!V?"":V,re)}return I.use([].concat(C,[function(L,V,G){L===2&&G.length&&G[0].lastIndexOf(l)>0&&(G[0]=G[0].replace(h,A))},D,function(L){if(L===-2){var V=O;return O=[],V}}])),N.hash=C.length?C.reduce(function(L,V){return V.name||ao(15),hs(L,V.name)},5381).toString():"",N}function Kg(){return(0,wi.useContext)(hb)||$S}function _I(){return(0,wi.useContext)(pb)||rf}function NS(s){var a=(0,wi.useState)(s.stylisPlugins),l=a[0],h=a[1],f=Kg(),g=(0,wi.useMemo)(function(){var _=f;return s.sheet?_=s.sheet:s.target&&(_=_.reconstructWithOptions({target:s.target},!1)),s.disableCSSOMInjection&&(_=_.reconstructWithOptions({useCSSOMInjection:!1})),_},[s.disableCSSOMInjection,s.sheet,s.target]),b=(0,wi.useMemo)(function(){return rh({options:{prefix:!s.disableVendorPrefixes},plugins:l})},[s.disableVendorPrefixes,l]);return(0,wi.useEffect)(function(){(0,Xg.default)(l,s.stylisPlugins)||h(s.stylisPlugins)},[s.stylisPlugins]),wi.default.createElement(hb.Provider,{value:g},wi.default.createElement(pb.Provider,{value:b},s.children))}function wI(s){return MI.test(s)?s.replace(kI,XS).replace(fb,"-ms-"):s}function Nu(s,a,l,h){if(Array.isArray(s)){for(var f,g=[],b=0,_=s.length;b<_;b+=1)(f=Nu(s[b],a,l,h))!==""&&(Array.isArray(f)?g.push.apply(g,f):g.push(f));return g}if(qS(s))return"";if(Lu(s))return"."+s.styledComponentId;if($g(s)){if(typeof(C=s)!="function"||C.prototype&&C.prototype.isReactComponent||!a)return s;var S=s(a);return Nu(S,a,l,h)}var C;return s instanceof KS?l?(s.inject(l,h),s.getName(h)):s:sb(s)?function I(O,D){var A,N,L=[];for(var V in O)O.hasOwnProperty(V)&&!qS(O[V])&&(Array.isArray(O[V])&&O[V].isCss||$g(O[V])?L.push(wI(V)+":",O[V],";"):sb(O[V])?L.push.apply(L,I(O[V],V)):L.push(wI(V)+": "+(A=V,(N=O[V])==null||typeof N=="boolean"||N===""?"":typeof N!="number"||N===0||A in vI||A.startsWith("--")?String(N).trim():N+"px")+";"));return D?[D+" {"].concat(L,["}"]):L}(s):s.toString()}function lo(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];return $g(s)||sb(s)?YS(Nu(ib(ih,[s].concat(l)))):l.length===0&&s.length===1&&typeof s[0]=="string"?s:YS(Nu(ib(s,l)))}function Fu(s){return s.replace(T,"-").replace(U,"")}function Jp(s){return typeof s=="string"&&!0}function FS(s,a,l){var h=s[l];se(a)&&se(h)?xI(h,a):s[l]=a}function xI(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];for(var f=0,g=l;f<g.length;f++){var b=g[f];if(se(b))for(var _ in b)fe(_)&&FS(s,b[_],_)}return s}function tb(s,a,l){var h=Lu(s),f=!Jp(s),g=a.attrs,b=g===void 0?ih:g,_=a.componentId,S=_===void 0?function($,Y){var re=typeof $!="string"?"sc":Fu($);Ye[re]=(Ye[re]||0)+1;var ne=re+"-"+q("5.3.11"+re+Ye[re]);return Y?Y+"-"+ne:ne}(a.displayName,a.parentComponentId):_,C=a.displayName,I=C===void 0?function($){return Jp($)?"styled."+$:"Styled("+ia($)+")"}(s):C,O=a.displayName&&a.componentId?Fu(a.displayName)+"-"+a.componentId:a.componentId||S,D=h&&s.attrs?Array.prototype.concat(s.attrs,b).filter(Boolean):b,A=a.shouldForwardProp;h&&s.shouldForwardProp&&(A=a.shouldForwardProp?function($,Y,re){return s.shouldForwardProp($,Y,re)&&a.shouldForwardProp($,Y,re)}:s.shouldForwardProp);var N,L=new TI(l,O,h?s.componentStyle:void 0),V=L.isStatic&&b.length===0,G=function($,Y){return function(re,ne,le,Ce){var ve=re.attrs,we=re.componentStyle,Le=re.defaultProps,lt=re.foldedComponentIds,ue=re.shouldForwardProp,Oe=re.styledComponentId,Q=re.target,We=function(ht,Xe,sn){ht===void 0&&(ht=Na);var Et=nl({},Xe,{theme:ht}),Qt={};return sn.forEach(function(_n){var Vn,Ln,Wr,J=_n;for(Vn in $g(J)&&(J=J(Et)),J)Et[Vn]=Qt[Vn]=Vn==="className"?(Ln=Qt[Vn],Wr=J[Vn],Ln&&Wr?Ln+" "+Wr:Ln||Wr):J[Vn]}),[Et,Qt]}(y(ne,(0,wi.useContext)(De),Le)||Na,ne,ve),Lt=We[0],Ie=We[1],Re=function(ht,Xe,sn,Et){var Qt=Kg(),_n=_I(),Vn=Xe?ht.generateAndInjectStyles(Na,Qt,_n):ht.generateAndInjectStyles(sn,Qt,_n);return Vn}(we,Ce,Lt),Ke=le,Ct=Ie.$as||ne.$as||Ie.as||ne.as||Q,ce=Jp(Ct),me=Ie!==ne?nl({},ne,{},Ie):ne,tt={};for(var st in me)st[0]!=="$"&&st!=="as"&&(st==="forwardedAs"?tt.as=me[st]:(ue?ue(st,DS,Ct):!ce||DS(st))&&(tt[st]=me[st]));return ne.style&&Ie.style!==ne.style&&(tt.style=nl({},ne.style,{},Ie.style)),tt.className=Array.prototype.concat(lt,Oe,Re!==Oe?Re:null,ne.className,Ie.className).filter(Boolean).join(" "),tt.ref=Ke,(0,wi.createElement)(Ct,tt)}(N,$,Y,V)};return G.displayName=I,(N=wi.default.forwardRef(G)).attrs=D,N.componentStyle=L,N.displayName=I,N.shouldForwardProp=A,N.foldedComponentIds=h?Array.prototype.concat(s.foldedComponentIds,s.styledComponentId):ih,N.styledComponentId=O,N.target=h?s.target:s,N.withComponent=function($){var Y=a.componentId,re=function(le,Ce){if(le==null)return{};var ve,we,Le={},lt=Object.keys(le);for(we=0;we<lt.length;we++)ve=lt[we],Ce.indexOf(ve)>=0||(Le[ve]=le[ve]);return Le}(a,["componentId"]),ne=Y&&Y+"-"+(Jp($)?$:Fu(ia($)));return tb($,nl({},re,{attrs:D,componentId:ne}),l)},Object.defineProperty(N,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function($){this._foldedDefaultProps=h?xI({},s.defaultProps,$):$}}),Object.defineProperty(N,"toString",{value:function(){return"."+N.styledComponentId}}),f&&(0,rb.default)(N,s,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),N}function Ul(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];var f=lo.apply(void 0,[s].concat(l)),g="sc-global-"+q(JSON.stringify(f)),b=new St(f,g);function _(C){var I=Kg(),O=_I(),D=(0,wi.useContext)(De),A=(0,wi.useRef)(I.allocateGSInstance(g)).current;return I.server&&S(A,C,I,D,O),(0,wi.useLayoutEffect)(function(){if(!I.server)return S(A,C,I,D,O),function(){return b.removeStyles(A,I)}},[A,C,I,D,O]),null}function S(C,I,O,D,A){if(b.isStatic)b.renderStyles(C,BS,O,A);else{var N=nl({},I,{theme:y(I,D,_.defaultProps)});b.renderStyles(C,N,O,A)}}return wi.default.memo(_)}var nb,wi,Xg,rb,ib,sb,ih,Na,zl,sh,ob,BS,ab,oh,ah,ef,tf,US,nf,lb,SI,EI,zS,qg,ub,uo,CI,cb,VS,PI,Bu,Yg,jS,hs,HS,db,TI,GS,WS,hb,pb,$S,rf,KS,MI,kI,fb,XS,qS,YS,y,T,U,q,se,fe,De,Ye,et,St,ae,Ve=P(()=>{nb=X(F5()),wi=X(Ne()),Xg=X(RS()),mI(),U5(),j5(),rb=X(bI()),ib=function(s,a){for(var l=[s[0]],h=0,f=a.length;h<f;h+=1)l.push(a[h],s[h+1]);return l},sb=function(s){return s!==null&&typeof s=="object"&&(s.toString?s.toString():Object.prototype.toString.call(s))==="[object Object]"&&!(0,nb.typeOf)(s)},ih=Object.freeze([]),Na=Object.freeze({}),zl=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",sh=typeof window<"u"&&"HTMLElement"in window,ob=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY)),BS={},ab=function(){function s(l){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=l}var a=s.prototype;return a.indexOfGroup=function(l){for(var h=0,f=0;f<l;f++)h+=this.groupSizes[f];return h},a.insertRules=function(l,h){if(l>=this.groupSizes.length){for(var f=this.groupSizes,g=f.length,b=g;l>=b;)(b<<=1)<0&&ao(16,""+l);this.groupSizes=new Uint32Array(b),this.groupSizes.set(f),this.length=b;for(var _=g;_<b;_++)this.groupSizes[_]=0}for(var S=this.indexOfGroup(l+1),C=0,I=h.length;C<I;C++)this.tag.insertRule(S,h[C])&&(this.groupSizes[l]++,S++)},a.clearGroup=function(l){if(l<this.length){var h=this.groupSizes[l],f=this.indexOfGroup(l),g=f+h;this.groupSizes[l]=0;for(var b=f;b<g;b++)this.tag.deleteRule(f)}},a.getGroup=function(l){var h="";if(l>=this.length||this.groupSizes[l]===0)return h;for(var f=this.groupSizes[l],g=this.indexOfGroup(l),b=g+f,_=g;_<b;_++)h+=this.tag.getRule(_)+`/*!sc*/
`;return h},s}(),oh=new Map,ah=new Map,ef=1,tf=function(s){if(oh.has(s))return oh.get(s);for(;ah.has(ef);)ef++;var a=ef++;return oh.set(s,a),ah.set(a,s),a},US=function(s){return ah.get(s)},nf=function(s,a){a>=ef&&(ef=a+1),oh.set(s,a),ah.set(a,s)},lb="style["+zl+'][data-styled-version="5.3.11"]',SI=new RegExp("^"+zl+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),EI=function(s,a,l){for(var h,f=l.split(","),g=0,b=f.length;g<b;g++)(h=f[g])&&s.registerName(a,h)},zS=function(s,a){for(var l=(a.textContent||"").split(`/*!sc*/
`),h=[],f=0,g=l.length;f<g;f++){var b=l[f].trim();if(b){var _=b.match(SI);if(_){var S=0|parseInt(_[1],10),C=_[2];S!==0&&(nf(C,S),EI(s,C,_[3]),s.getTag().insertRules(S,h)),h.length=0}else h.push(b)}}},qg=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},ub=function(s){var a=document.head,l=s||a,h=document.createElement("style"),f=function(_){for(var S=_.childNodes,C=S.length;C>=0;C--){var I=S[C];if(I&&I.nodeType===1&&I.hasAttribute(zl))return I}}(l),g=f!==void 0?f.nextSibling:null;h.setAttribute(zl,"active"),h.setAttribute("data-styled-version","5.3.11");var b=qg();return b&&h.setAttribute("nonce",b),l.insertBefore(h,g),h},uo=function(){function s(l){var h=this.element=ub(l);h.appendChild(document.createTextNode("")),this.sheet=function(f){if(f.sheet)return f.sheet;for(var g=document.styleSheets,b=0,_=g.length;b<_;b++){var S=g[b];if(S.ownerNode===f)return S}ao(17)}(h),this.length=0}var a=s.prototype;return a.insertRule=function(l,h){try{return this.sheet.insertRule(h,l),this.length++,!0}catch{return!1}},a.deleteRule=function(l){this.sheet.deleteRule(l),this.length--},a.getRule=function(l){var h=this.sheet.cssRules[l];return h!==void 0&&typeof h.cssText=="string"?h.cssText:""},s}(),CI=function(){function s(l){var h=this.element=ub(l);this.nodes=h.childNodes,this.length=0}var a=s.prototype;return a.insertRule=function(l,h){if(l<=this.length&&l>=0){var f=document.createTextNode(h),g=this.nodes[l];return this.element.insertBefore(f,g||null),this.length++,!0}return!1},a.deleteRule=function(l){this.element.removeChild(this.nodes[l]),this.length--},a.getRule=function(l){return l<this.length?this.nodes[l].textContent:""},s}(),cb=function(){function s(l){this.rules=[],this.length=0}var a=s.prototype;return a.insertRule=function(l,h){return l<=this.length&&(this.rules.splice(l,0,h),this.length++,!0)},a.deleteRule=function(l){this.rules.splice(l,1),this.length--},a.getRule=function(l){return l<this.length?this.rules[l]:""},s}(),VS=sh,PI={isServer:!sh,useCSSOMInjection:!ob},Bu=function(){function s(l,h,f){l===void 0&&(l=Na),h===void 0&&(h={}),this.options=nl({},PI,{},l),this.gs=h,this.names=new Map(f),this.server=!!l.isServer,!this.server&&sh&&VS&&(VS=!1,function(g){for(var b=document.querySelectorAll(lb),_=0,S=b.length;_<S;_++){var C=b[_];C&&C.getAttribute(zl)!=="active"&&(zS(g,C),C.parentNode&&C.parentNode.removeChild(C))}}(this))}s.registerId=function(l){return tf(l)};var a=s.prototype;return a.reconstructWithOptions=function(l,h){return h===void 0&&(h=!0),new s(nl({},this.options,{},l),this.gs,h&&this.names||void 0)},a.allocateGSInstance=function(l){return this.gs[l]=(this.gs[l]||0)+1},a.getTag=function(){return this.tag||(this.tag=(f=(h=this.options).isServer,g=h.useCSSOMInjection,b=h.target,l=f?new cb(b):g?new uo(b):new CI(b),new ab(l)));var l,h,f,g,b},a.hasNameForId=function(l,h){return this.names.has(l)&&this.names.get(l).has(h)},a.registerName=function(l,h){if(tf(l),this.names.has(l))this.names.get(l).add(h);else{var f=new Set;f.add(h),this.names.set(l,f)}},a.insertRules=function(l,h,f){this.registerName(l,h),this.getTag().insertRules(tf(l),f)},a.clearNames=function(l){this.names.has(l)&&this.names.get(l).clear()},a.clearRules=function(l){this.getTag().clearGroup(tf(l)),this.clearNames(l)},a.clearTag=function(){this.tag=void 0},a.toString=function(){return function(l){for(var h=l.getTag(),f=h.length,g="",b=0;b<f;b++){var _=US(b);if(_!==void 0){var S=l.names.get(_),C=h.getGroup(b);if(S&&C&&S.size){var I=zl+".g"+b+'[id="'+_+'"]',O="";S!==void 0&&S.forEach(function(D){D.length>0&&(O+=D+",")}),g+=""+C+I+'{content:"'+O+`"}/*!sc*/
`}}}return g}(this)},s}(),Yg=/(a)(d)/gi,jS=function(s){return String.fromCharCode(s+(s>25?39:97))},hs=function(s,a){for(var l=a.length;l;)s=33*s^a.charCodeAt(--l);return s},HS=function(s){return hs(5381,s)},db=HS("5.3.11"),TI=function(){function s(a,l,h){this.rules=a,this.staticRulesId="",this.isStatic=(h===void 0||h.isStatic)&&Qp(a),this.componentId=l,this.baseHash=hs(db,l),this.baseStyle=h,Bu.registerId(l)}return s.prototype.generateAndInjectStyles=function(a,l,h){var f=this.componentId,g=[];if(this.baseStyle&&g.push(this.baseStyle.generateAndInjectStyles(a,l,h)),this.isStatic&&!h.hash)if(this.staticRulesId&&l.hasNameForId(f,this.staticRulesId))g.push(this.staticRulesId);else{var b=Nu(this.rules,a,l,h).join(""),_=LS(hs(this.baseHash,b)>>>0);if(!l.hasNameForId(f,_)){var S=h(b,"."+_,void 0,f);l.insertRules(f,_,S)}g.push(_),this.staticRulesId=_}else{for(var C=this.rules.length,I=hs(this.baseHash,h.hash),O="",D=0;D<C;D++){var A=this.rules[D];if(typeof A=="string")O+=A;else if(A){var N=Nu(A,a,l,h),L=Array.isArray(N)?N.join(""):N;I=hs(I,L+D),O+=L}}if(O){var V=LS(I>>>0);if(!l.hasNameForId(f,V)){var G=h(O,"."+V,void 0,f);l.insertRules(f,V,G)}g.push(V)}}return g.join(" ")},s}(),GS=/^\s*\/\/.*$/gm,WS=[":","[",".","#"],hb=wi.default.createContext(),hb.Consumer,pb=wi.default.createContext(),$S=(pb.Consumer,new Bu),rf=rh(),KS=function(){function s(a,l){var h=this;this.inject=function(f,g){g===void 0&&(g=rf);var b=h.name+g.hash;f.hasNameForId(h.id,b)||f.insertRules(h.id,b,g(h.rules,b,"@keyframes"))},this.toString=function(){return ao(12,String(h.name))},this.name=a,this.id="sc-keyframes-"+a,this.rules=l}return s.prototype.getName=function(a){return a===void 0&&(a=rf),this.name+a.hash},s}(),MI=/([A-Z])/,kI=/([A-Z])/g,fb=/^ms-/,XS=function(s){return"-"+s.toLowerCase()},qS=function(s){return s==null||s===!1||s===""},YS=function(s){return Array.isArray(s)&&(s.isCss=!0),s},y=function(s,a,l){return l===void 0&&(l=Na),s.theme!==l.theme&&s.theme||a||l.theme},T=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,U=/(^-|-$)/g,q=function(s){return LS(HS(s)>>>0)},se=function(s){return typeof s=="function"||typeof s=="object"&&s!==null&&!Array.isArray(s)},fe=function(s){return s!=="__proto__"&&s!=="constructor"&&s!=="prototype"},De=wi.default.createContext(),De.Consumer,Ye={},et=function(s){return function a(l,h,f){if(f===void 0&&(f=Na),!(0,nb.isValidElementType)(h))return ao(1,String(h));var g=function(){return l(h,f,lo.apply(void 0,arguments))};return g.withConfig=function(b){return a(l,h,nl({},f,{},b))},g.attrs=function(b){return a(l,h,nl({},f,{attrs:Array.prototype.concat(f.attrs,b).filter(Boolean)}))},g}(tb,s)},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(s){et[s]=et(s)}),St=function(){function s(l,h){this.rules=l,this.componentId=h,this.isStatic=Qp(l),Bu.registerId(this.componentId+1)}var a=s.prototype;return a.createStyles=function(l,h,f,g){var b=g(Nu(this.rules,h,f,g).join(""),""),_=this.componentId+l;f.insertRules(_,_,b)},a.removeStyles=function(l,h){h.clearRules(this.componentId+l)},a.renderStyles=function(l,h,f,g){l>2&&Bu.registerId(this.componentId+l),this.removeStyles(l,f),this.createStyles(l,h,f,g)},s}(),function(){function s(){var l=this;this._emitSheetCSS=function(){var h=l.instance.toString();if(!h)return"";var f=qg();return"<style "+[f&&'nonce="'+f+'"',zl+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+h+"</style>"},this.getStyleTags=function(){return l.sealed?ao(2):l._emitSheetCSS()},this.getStyleElement=function(){var h;if(l.sealed)return ao(2);var f=((h={})[zl]="",h["data-styled-version"]="5.3.11",h.dangerouslySetInnerHTML={__html:l.instance.toString()},h),g=qg();return g&&(f.nonce=g),[wi.default.createElement("style",nl({},f,{key:"sc-0-0"}))]},this.seal=function(){l.sealed=!0},this.instance=new Bu({isServer:!0}),this.sealed=!1}var a=s.prototype;return a.collectStyles=function(l){return this.sealed?ao(2):wi.default.createElement(NS,{sheet:this.instance},l)},a.interleaveWithNodeStream=function(l){return ao(3)},s}(),ae=et});function Zt(){return Zt=Object.assign||function(s){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(s[h]=l[h])}return s},Zt.apply(this,arguments)}var In=P(()=>{});function bn(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}var ar=P(()=>{});function lr(s,a){return lr=Object.setPrototypeOf||function(l,h){return l.__proto__=h,l},lr(s,a)}var er=P(()=>{});function Ir(s,a){s.prototype=Object.create(a.prototype),s.prototype.constructor=s,lr(s,a)}var $s=P(()=>{er()});function Ks(s){return Ks=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},Ks(s)}var Xs=P(()=>{});function Jr(s){return Function.toString.call(s).indexOf("[native code]")!==-1}var qs=P(()=>{});function sa(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Vl=P(()=>{});function jl(s,a,l){return sa()?jl=Reflect.construct:jl=function(h,f,g){var b=[null];b.push.apply(b,f);var _=Function.bind.apply(h,b),S=new _;return g&&lr(S,g.prototype),S},jl.apply(null,arguments)}var lh=P(()=>{er(),Vl()});function Uu(s){var a=typeof Map=="function"?new Map:void 0;return Uu=function(l){if(l===null||!Jr(l))return l;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(typeof a<"u"){if(a.has(l))return a.get(l);a.set(l,h)}function h(){return jl(l,arguments,Ks(this).constructor)}return h.prototype=Object.create(l.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),lr(h,l)},Uu(s)}var uh=P(()=>{Xs(),er(),qs(),lh()}),ch=P(()=>{});function Ji(s){return s.charAt(0).toUpperCase()+s.slice(1)}function oa(s,a){if(!s)return a.toLowerCase();var l=s.split("-");if(l.length>1)return l.splice(1,0,a),l.reduce(function(f,g){return""+f+Ji(g)});var h=s.replace(/([a-z])([A-Z])/g,"$1"+a+"$2");return s===h?""+s+a:h}function ai(s,a){for(var l={},h=0;h<a.length;h+=1)(a[h]||a[h]===0)&&(l[oa(s,bX[h])]=a[h]);return l}function Hl(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];var f=l[0],g=l[1],b=g===void 0?f:g,_=l[2],S=_===void 0?f:_,C=l[3],I=C===void 0?b:C,O=[f,b,S,I];return ai(s,O)}function rl(s){return Math.round(s*255)}function PMe(s,a,l){return rl(s)+","+rl(a)+","+rl(l)}function ZS(s,a,l,h){if(h===void 0&&(h=PMe),a===0)return h(l,l,l);var f=(s%360+360)%360/60,g=(1-Math.abs(2*l-1))*a,b=g*(1-Math.abs(f%2-1)),_=0,S=0,C=0;f>=0&&f<1?(_=g,S=b):f>=1&&f<2?(_=b,S=g):f>=2&&f<3?(S=g,C=b):f>=3&&f<4?(S=b,C=g):f>=4&&f<5?(_=b,C=g):f>=5&&f<6&&(_=g,C=b);var I=l-g/2,O=_+I,D=S+I,A=C+I;return h(O,D,A)}function TMe(s){if(typeof s!="string")return s;var a=s.toLowerCase();return Y5[a]?"#"+Y5[a]:s}function G5(s){if(typeof s!="string")throw new zu(3);var a=TMe(s);if(a.match(_X))return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16)};if(a.match(wX)){var l=parseFloat((parseInt(""+a[7]+a[8],16)/255).toFixed(2));return{red:parseInt(""+a[1]+a[2],16),green:parseInt(""+a[3]+a[4],16),blue:parseInt(""+a[5]+a[6],16),alpha:l}}if(a.match(xX))return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16)};if(a.match(SX)){var h=parseFloat((parseInt(""+a[4]+a[4],16)/255).toFixed(2));return{red:parseInt(""+a[1]+a[1],16),green:parseInt(""+a[2]+a[2],16),blue:parseInt(""+a[3]+a[3],16),alpha:h}}var f=DI.exec(a);if(f)return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10)};var g=EX.exec(a.substring(0,50));if(g)return{red:parseInt(""+g[1],10),green:parseInt(""+g[2],10),blue:parseInt(""+g[3],10),alpha:parseFloat(""+g[4])};var b=CX.exec(a);if(b){var _=parseInt(""+b[1],10),S=parseInt(""+b[2],10)/100,C=parseInt(""+b[3],10)/100,I="rgb("+ZS(_,S,C)+")",O=DI.exec(I);if(!O)throw new zu(4,a,I);return{red:parseInt(""+O[1],10),green:parseInt(""+O[2],10),blue:parseInt(""+O[3],10)}}var D=PX.exec(a.substring(0,50));if(D){var A=parseInt(""+D[1],10),N=parseInt(""+D[2],10)/100,L=parseInt(""+D[3],10)/100,V="rgb("+ZS(A,N,L)+")",G=DI.exec(V);if(!G)throw new zu(4,a,V);return{red:parseInt(""+G[1],10),green:parseInt(""+G[2],10),blue:parseInt(""+G[3],10),alpha:parseFloat(""+D[4])}}throw new zu(5)}function MMe(s){var a=s.red/255,l=s.green/255,h=s.blue/255,f=Math.max(a,l,h),g=Math.min(a,l,h),b=(f+g)/2;if(f===g)return s.alpha!==void 0?{hue:0,saturation:0,lightness:b,alpha:s.alpha}:{hue:0,saturation:0,lightness:b};var _,S=f-g,C=b>.5?S/(2-f-g):S/(f+g);switch(f){case a:_=(l-h)/S+(l<h?6:0);break;case l:_=(h-a)/S+2;break;default:_=(a-l)/S+4;break}return _*=60,s.alpha!==void 0?{hue:_,saturation:C,lightness:b,alpha:s.alpha}:{hue:_,saturation:C,lightness:b}}function W5(s){return MMe(G5(s))}function Zg(s){var a=s.toString(16);return a.length===1?"0"+a:a}function $5(s){return Zg(Math.round(s*255))}function kMe(s,a,l){return OI("#"+$5(s)+$5(a)+$5(l))}function AI(s,a,l){return ZS(s,a,l,kMe)}function AMe(s,a,l){if(typeof s=="number"&&typeof a=="number"&&typeof l=="number")return AI(s,a,l);if(typeof s=="object"&&a===void 0&&l===void 0)return AI(s.hue,s.saturation,s.lightness);throw new zu(1)}function IMe(s,a,l,h){if(typeof s=="number"&&typeof a=="number"&&typeof l=="number"&&typeof h=="number")return h>=1?AI(s,a,l):"rgba("+ZS(s,a,l)+","+h+")";if(typeof s=="object"&&a===void 0&&l===void 0&&h===void 0)return s.alpha>=1?AI(s.hue,s.saturation,s.lightness):"rgba("+ZS(s.hue,s.saturation,s.lightness)+","+s.alpha+")";throw new zu(2)}function K5(s,a,l){if(typeof s=="number"&&typeof a=="number"&&typeof l=="number")return OI("#"+Zg(s)+Zg(a)+Zg(l));if(typeof s=="object"&&a===void 0&&l===void 0)return OI("#"+Zg(s.red)+Zg(s.green)+Zg(s.blue));throw new zu(6)}function vX(s,a,l,h){if(typeof s=="string"&&typeof a=="number"){var f=G5(s);return"rgba("+f.red+","+f.green+","+f.blue+","+a+")"}else{if(typeof s=="number"&&typeof a=="number"&&typeof l=="number"&&typeof h=="number")return h>=1?K5(s,a,l):"rgba("+s+","+a+","+l+","+h+")";if(typeof s=="object"&&a===void 0&&l===void 0&&h===void 0)return s.alpha>=1?K5(s.red,s.green,s.blue):"rgba("+s.red+","+s.green+","+s.blue+","+s.alpha+")"}throw new zu(7)}function X5(s){if(typeof s!="object")throw new zu(8);if(MX(s))return vX(s);if(TX(s))return K5(s);if(AX(s))return IMe(s);if(kX(s))return AMe(s);throw new zu(8)}function yX(s,a,l){return function(){var h=l.concat(Array.prototype.slice.call(arguments));return h.length>=a?s.apply(this,h):yX(s,a,h)}}function II(s){return yX(s,s.length,[])}function RI(s,a,l){return Math.max(s,Math.min(a,l))}function RMe(s,a){if(a==="transparent")return a;var l=W5(a);return X5(Zt({},l,{lightness:RI(0,1,l.lightness-parseFloat(s))}))}function DMe(s,a){if(a==="transparent")return a;var l=W5(a);return X5(Zt({},l,{lightness:RI(0,1,l.lightness+parseFloat(s))}))}function OMe(s,a){if(a==="transparent")return a;var l=W5(a);return X5(Zt({},l,{saturation:RI(0,1,l.saturation+parseFloat(s))}))}function LMe(s,a){if(a==="transparent")return a;var l=G5(a),h=typeof l.alpha=="number"?l.alpha:1,f=Zt({},l,{alpha:RI(0,1,+(h*100-parseFloat(s)*100).toFixed(2)/100)});return vX(f)}function q5(s){for(var a=arguments.length,l=new Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];return IX.indexOf(s)>=0&&s?Zt({},Hl.apply(void 0,[""].concat(l)),{position:s}):Hl.apply(void 0,["",s].concat(l))}var zu,bX,Y5,_X,wX,xX,SX,DI,EX,CX,PX,OI,TX,MX,kX,AX,QS,mb,LI,Vu,IX,il=P(()=>{In(),ar(),$s(),uh(),ch(),zu=function(s){Ir(a,s);function a(l){var h;return h=s.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+l+" for more information.")||this,bn(h)}return a}(Uu(Error)),bX=["Top","Right","Bottom","Left"],Y5={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},_X=/^#[a-fA-F0-9]{6}$/,wX=/^#[a-fA-F0-9]{8}$/,xX=/^#[a-fA-F0-9]{3}$/,SX=/^#[a-fA-F0-9]{4}$/,DI=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,EX=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,CX=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,PX=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,OI=function(s){return s.length===7&&s[1]===s[2]&&s[3]===s[4]&&s[5]===s[6]?"#"+s[1]+s[3]+s[5]:s},TX=function(s){return typeof s.red=="number"&&typeof s.green=="number"&&typeof s.blue=="number"&&(typeof s.alpha!="number"||typeof s.alpha>"u")},MX=function(s){return typeof s.red=="number"&&typeof s.green=="number"&&typeof s.blue=="number"&&typeof s.alpha=="number"},kX=function(s){return typeof s.hue=="number"&&typeof s.saturation=="number"&&typeof s.lightness=="number"&&(typeof s.alpha!="number"||typeof s.alpha>"u")},AX=function(s){return typeof s.hue=="number"&&typeof s.saturation=="number"&&typeof s.lightness=="number"&&typeof s.alpha=="number"},QS=II(RMe),mb=II(DMe),LI=II(OMe),Vu=II(LMe),IX=["absolute","fixed","relative","static","sticky"]});function NMe(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function RX(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);a&&(h=h.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),l.push.apply(l,h)}return l}function Qg(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?RX(Object(l),!0).forEach(function(h){NMe(s,h,l[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):RX(Object(l)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(l,h))})}return s}function gb(s,a){if(s==null)return{};var l={},h=Object.keys(s),f,g;for(g=0;g<h.length;g++)f=h[g],!(a.indexOf(f)>=0)&&(l[f]=s[f]);return l}var JS=P(()=>{}),DX,Z5,OX=P(()=>{DX=X(Ne()),Z5=(0,DX.createContext)({})});function FMe(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function LX(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);a&&(h=h.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),l.push.apply(l,h)}return l}function vb(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?LX(Object(l),!0).forEach(function(h){FMe(s,h,l[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):LX(Object(l)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(l,h))})}return s}function Q5(s,a){if(s==null)return{};var l={},h=Object.keys(s),f,g;for(g=0;g<h.length;g++)f=h[g],!(a.indexOf(f)>=0)&&(l[f]=s[f]);return l}function BMe(s,a){if(s){if(typeof s=="string")return NX(s,a);var l=Object.prototype.toString.call(s).slice(8,-1);if(l==="Object"&&s.constructor&&(l=s.constructor.name),l==="Map"||l==="Set")return Array.from(s);if(l==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(l))return NX(s,a)}}function NX(s,a){(a==null||a>s.length)&&(a=s.length);for(var l=0,h=new Array(a);l<a;l++)h[l]=s[l];return h}function FX(s,a){var l;if(typeof Symbol>"u"||s[Symbol.iterator]==null){if(Array.isArray(s)||(l=BMe(s))||a&&s&&typeof s.length=="number"){l&&(s=l);var h=0;return function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return l=s[Symbol.iterator](),l.next.bind(l)}var NI=P(()=>{});function UMe(s){return typeof s=="function"}var J5,BX,zMe=P(()=>{J5=X(Ne()),OX(),NI(),BX=function(s,a,l){l===void 0&&(l=a.children);var h=(0,J5.useContext)(Z5);if(h.useCreateElement)return h.useCreateElement(s,a,l);if(typeof s=="string"&&UMe(l)){a.children;var f=Q5(a,["children"]);return l(f)}return(0,J5.createElement)(s,a,l)}});function VMe(s,a,l){return a in s?Object.defineProperty(s,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[a]=l,s}function UX(s,a){var l=Object.keys(s);if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(s);a&&(h=h.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),l.push.apply(l,h)}return l}function yb(s){for(var a=1;a<arguments.length;a++){var l=arguments[a]!=null?arguments[a]:{};a%2?UX(Object(l),!0).forEach(function(h){VMe(s,h,l[h])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(l)):UX(Object(l)).forEach(function(h){Object.defineProperty(s,h,Object.getOwnPropertyDescriptor(l,h))})}return s}function jMe(s,a){if(s==null)return{};var l={},h=Object.keys(s),f,g;for(g=0;g<h.length;g++)f=h[g],!(a.indexOf(f)>=0)&&(l[f]=s[f]);return l}var zX=P(()=>{});function HMe(s){return typeof s=="object"&&s!=null}var GMe=P(()=>{});function e4(s){var a;if(!HMe(s))return!1;var l=Object.getPrototypeOf(s);return l==null?!0:((a=l.constructor)===null||a===void 0?void 0:a.toString())===Object.toString()}var VX=P(()=>{GMe()});function jX(s,a){for(var l=Object.keys(s),h={},f={},g=0,b=l;g<b.length;g++){var _=b[g];a.indexOf(_)>=0?h[_]=s[_]:f[_]=s[_]}return[h,f]}function HX(s,a){if(a===void 0&&(a=[]),!e4(s.state))return jX(s,a);var l=jX(s,[].concat(a,["state"])),h=l[0],f=l[1],g=h.state,b=jMe(h,["state"]);return[yb(yb({},g),b),f]}var WMe=P(()=>{zX(),VX()});function FI(s,a){if(s===a)return!0;if(!s||!a||typeof s!="object"||typeof a!="object")return!1;var l=Object.keys(s),h=Object.keys(a),f=l.length;if(h.length!==f)return!1;for(var g=0,b=l;g<b.length;g++){var _=b[g];if(s[_]!==a[_])return!1}return!0}var t4=P(()=>{});function GX(s){return s.name==="normalizePropsAreEqualInner"?s:function(a,l){return!e4(a.state)||!e4(l.state)?s(a,l):s(yb(yb({},a.state),a),yb(yb({},l.state),l))}}var $Me=P(()=>{zX(),VX()});function KMe(s){return(0,n4.forwardRef)(s)}function XMe(s,a){return(0,n4.memo)(s,a)}function eE(s){var a=s.as,l=s.useHook,h=s.memo,f=s.propsAreEqual,g=f===void 0?l==null?void 0:l.unstable_propsAreEqual:f,b=s.keys,_=b===void 0?(l==null?void 0:l.__keys)||[]:b,S=s.useCreateElement,C=S===void 0?BX:S,I=function(O,D){var A=O.as,N=A===void 0?a:A,L=Q5(O,["as"]);if(l){var V,G=HX(L,_),$=G[0],Y=G[1],re=l($,vb({ref:D},Y)),ne=re.wrapElement,le=Q5(re,["wrapElement"]),Ce=((V=N.render)===null||V===void 0?void 0:V.__keys)||N.__keys,ve=Ce&&HX(L,Ce)[0],we=ve?vb(vb({},le),ve):le,Le=C(N,we);return ne?ne(Le):Le}return C(N,vb({ref:D},L))};return I=KMe(I),h&&(I=XMe(I,g&&GX(g))),I.__keys=_,I.unstable_propsAreEqual=GX(g||FI),I}var n4,tE=P(()=>{n4=X(Ne()),NI(),zMe(),WMe(),t4(),$Me()});function WX(s,a){(0,r4.useDebugValue)(s);var l=(0,r4.useContext)(Z5);return l[s]!=null?l[s]:a}var r4,$X=P(()=>{r4=X(Ne()),OX()});function qMe(s,a,l){a===void 0&&(a={}),l===void 0&&(l={});var h="use"+s+"Props";(0,KX.useDebugValue)(h);var f=WX(h);return f?f(a,l):l}var KX,YMe=P(()=>{KX=X(Ne()),$X()});function ZMe(s,a,l){a===void 0&&(a={}),l===void 0&&(l={});var h="use"+s+"Options";(0,XX.useDebugValue)(h);var f=WX(h);return f?vb(vb({},a),f(a,l)):a}var XX,QMe=P(()=>{XX=X(Ne()),$X(),NI()});function JMe(s){return Array.isArray(s)?s:typeof s<"u"?[s]:[]}var eke=P(()=>{});function nE(s){var a,l,h=JMe(s.compose),f=function(_,S){if(s.useOptions&&(_=s.useOptions(_,S)),s.name&&(_=ZMe(s.name,_,S)),s.compose)for(var C=FX(h),I;!(I=C()).done;){var O=I.value;_=O.__useOptions(_,S)}return _},g=function(_,S,C){if(_===void 0&&(_={}),S===void 0&&(S={}),C===void 0&&(C=!1),C||(_=f(_,S)),s.useProps&&(S=s.useProps(_,S)),s.name&&(S=qMe(s.name,_,S)),s.compose)if(s.useComposeOptions&&(_=s.useComposeOptions(_,S)),s.useComposeProps)S=s.useComposeProps(_,S);else for(var I=FX(h),O;!(O=I()).done;){var D=O.value;S=D(_,S,!0)}var A={},N=S||{};for(var L in N)N[L]!==void 0&&(A[L]=N[L]);return A};g.__useOptions=f;var b=h.reduce(function(_,S){return _.push.apply(_,S.__keys||[]),_},[]);return g.__keys=[].concat(b,((a=s.useState)===null||a===void 0?void 0:a.__keys)||[],s.keys||[]),g.unstable_propsAreEqual=s.propsAreEqual||((l=h[0])===null||l===void 0?void 0:l.unstable_propsAreEqual)||FI,g}var rE=P(()=>{X(Ne()),YMe(),NI(),QMe(),t4(),eke()});function qX(s,a){a===void 0&&(a=null),s&&(typeof s=="function"?s(a):s.current=a)}function YX(s,a){return(0,ZX.useMemo)(function(){return s==null&&a==null?null:function(l){qX(s,l),qX(a,l)}},[s,a])}var ZX,QX=P(()=>{ZX=X(Ne())});function i4(s){if(s.tagName==="BUTTON")return!0;if(s.tagName==="INPUT"){var a=s;return JX.indexOf(a.type)!==-1}return!1}var JX,s4=P(()=>{JX=["button","color","file","image","reset","submit"]}),o4=P(()=>{}),tke=P(()=>{o4(),X(Ne())}),BI=P(()=>{o4(),X(Ne()),tke()});function eq(s){return s?s.ownerDocument||s:document}var tq=P(()=>{});function nke(s){return s&&eq(s).defaultView||nq}var nq,rke=P(()=>{tq();try{nq=window}catch{}});function ike(){var s=nke();return!!(typeof s<"u"&&s.document&&s.document.createElement)}var UI,a4=P(()=>{rke(),UI=ike()}),l4,u4,c4=P(()=>{l4=X(Ne()),a4(),u4=UI?l4.useLayoutEffect:l4.useEffect});function bb(s){var a=(0,rq.useRef)(s);return u4(function(){a.current=s}),a}var rq,iq=P(()=>{rq=X(Ne()),c4()});function ske(s){return s.target===s.currentTarget}var oke=P(()=>{});function ake(s){var a=eq(s),l=a.activeElement;return l!=null&&l.nodeName?l:null}var lke=P(()=>{tq()});function sq(s,a){return s===a||s.contains(a)}var oq=P(()=>{});function uke(s){var a=ake(s);if(!a)return!1;if(sq(s,a))return!0;var l=a.getAttribute("aria-activedescendant");return l?l===s.id?!0:!!s.querySelector("#"+l):!1}var cke=P(()=>{lke(),oq()});function dke(s){return!sq(s.currentTarget,s.target)}var hke=P(()=>{oq()});function zI(s){return UI?window.navigator.userAgent.indexOf(s)!==-1:!1}var pke=P(()=>{a4()});function fke(s,a){return"matches"in s?s.matches(a):"msMatchesSelector"in s?s.msMatchesSelector(a):s.webkitMatchesSelector(a)}var mke=P(()=>{});function gke(s){var a=s;return a.offsetWidth>0||a.offsetHeight>0||s.getClientRects().length>0}function vke(s){return fke(s,aq)&&gke(s)}var aq,yke=P(()=>{mke(),aq="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])"}),lq,VI,uq=P(()=>{JS(),tE(),rE(),t4(),lq=["unstable_system"],VI=nE({name:"Role",keys:lq,propsAreEqual:function(s,a){var l=s.unstable_system,h=gb(s,["unstable_system"]),f=a.unstable_system,g=gb(a,["unstable_system"]);return l!==f&&!FI(l,f)?!1:FI(h,g)}}),eE({as:"div",useHook:VI})});function cq(s){!uke(s)&&vke(s)&&s.focus()}function bke(s){return s.tagName==="BUTTON"||s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.tagName==="A"}function _ke(s){return s.tagName==="BUTTON"||s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"}function wke(s,a,l,h){return s?a&&!l?-1:void 0:a?h:h||0}function d4(s,a){return(0,_b.useCallback)(function(l){var h;(h=s.current)===null||h===void 0||h.call(s,l),!l.defaultPrevented&&a&&(l.stopPropagation(),l.preventDefault())},[s,a])}var _b,dq,hq,h4,xke=P(()=>{JS(),tE(),rE(),_b=X(Ne()),QX(),s4(),BI(),iq(),c4(),cke(),hke(),pke(),yke(),uq(),dq=["disabled","focusable"],hq=zI("Mac")&&!zI("Chrome")&&(zI("Safari")||zI("Firefox")),h4=nE({name:"Tabbable",compose:VI,keys:dq,useOptions:function(s,a){var l=a.disabled;return Qg({disabled:l},s)},useProps:function(s,a){var l=a.ref,h=a.tabIndex,f=a.onClickCapture,g=a.onMouseDownCapture,b=a.onMouseDown,_=a.onKeyPressCapture,S=a.style,C=gb(a,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),I=(0,_b.useRef)(null),O=bb(f),D=bb(g),A=bb(b),N=bb(_),L=!!s.disabled&&!s.focusable,V=(0,_b.useState)(!0),G=V[0],$=V[1],Y=(0,_b.useState)(!0),re=Y[0],ne=Y[1],le=s.disabled?Qg({pointerEvents:"none"},S):S;u4(function(){var lt=I.current;lt&&(bke(lt)||$(!1),_ke(lt)||ne(!1))},[]);var Ce=d4(O,s.disabled),ve=d4(D,s.disabled),we=d4(N,s.disabled),Le=(0,_b.useCallback)(function(lt){var ue;(ue=A.current)===null||ue===void 0||ue.call(A,lt);var Oe=lt.currentTarget;if(!lt.defaultPrevented&&hq&&!dke(lt)&&i4(Oe)){var Q=requestAnimationFrame(function(){Oe.removeEventListener("mouseup",We,!0),cq(Oe)}),We=function(){cancelAnimationFrame(Q),cq(Oe)};Oe.addEventListener("mouseup",We,{once:!0,capture:!0})}},[]);return Qg({ref:YX(I,l),style:le,tabIndex:wke(L,G,re,h),disabled:L&&re?!0:void 0,"aria-disabled":s.disabled?!0:void 0,onClickCapture:Ce,onMouseDownCapture:ve,onMouseDown:Le,onKeyPressCapture:we},C)}}),eE({as:"div",useHook:h4})});function Ske(s){var a=s.currentTarget;return s.isTrusted?i4(a)||a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.tagName==="A"||a.tagName==="SELECT":!1}var jI,pq,p4,Eke=P(()=>{JS(),tE(),rE(),jI=X(Ne()),s4(),BI(),iq(),oke(),xke(),pq=["unstable_clickOnEnter","unstable_clickOnSpace"],p4=nE({name:"Clickable",compose:h4,keys:pq,useOptions:function(s){var a=s.unstable_clickOnEnter,l=a===void 0?!0:a,h=s.unstable_clickOnSpace,f=h===void 0?!0:h,g=gb(s,["unstable_clickOnEnter","unstable_clickOnSpace"]);return Qg({unstable_clickOnEnter:l,unstable_clickOnSpace:f},g)},useProps:function(s,a){var l=a.onKeyDown,h=a.onKeyUp,f=gb(a,["onKeyDown","onKeyUp"]),g=(0,jI.useState)(!1),b=g[0],_=g[1],S=bb(l),C=bb(h),I=(0,jI.useCallback)(function(D){var A;if((A=S.current)===null||A===void 0||A.call(S,D),!D.defaultPrevented&&!s.disabled&&!D.metaKey&&ske(D)){var N=s.unstable_clickOnEnter&&D.key==="Enter",L=s.unstable_clickOnSpace&&D.key===" ";if(N||L){if(Ske(D))return;D.preventDefault(),N?D.currentTarget.click():L&&_(!0)}}},[s.disabled,s.unstable_clickOnEnter,s.unstable_clickOnSpace]),O=(0,jI.useCallback)(function(D){var A;if((A=C.current)===null||A===void 0||A.call(C,D),!D.defaultPrevented&&!s.disabled&&!D.metaKey){var N=s.unstable_clickOnSpace&&D.key===" ";b&&N&&(_(!1),D.currentTarget.click())}},[s.disabled,s.unstable_clickOnSpace,b]);return Qg({"data-active":b||void 0,onKeyDown:I,onKeyUp:O},f)}}),eE({as:"button",memo:!0,useHook:p4})}),iE,fq,mq,gq,Cke=P(()=>{JS(),tE(),rE(),iE=X(Ne()),QX(),s4(),BI(),Eke(),fq=[],mq=nE({name:"Button",compose:p4,keys:fq,useProps:function(s,a){var l=a.ref,h=gb(a,["ref"]),f=(0,iE.useRef)(null),g=(0,iE.useState)(void 0),b=g[0],_=g[1],S=(0,iE.useState)("button"),C=S[0],I=S[1];return(0,iE.useEffect)(function(){var O=f.current;O&&(i4(O)||(O.tagName!=="A"&&_("button"),I(void 0)))},[]),Qg({ref:YX(f,l),role:b,type:C},h)}}),gq=eE({as:"button",memo:!0,useHook:mq})}),vq,yq,bq,Pke=P(()=>{JS(),tE(),rE(),uq(),vq=[],yq=nE({name:"Group",compose:VI,keys:vq,useProps:function(s,a){return Qg({role:"group"},a)}}),bq=eE({as:"div",useHook:yq})});function Tke(){return UI?document.body:null}var _q,wb,Mke=P(()=>{_q=X(Ne()),c4(),a4(),X(Du()),wb=(0,_q.createContext)(Tke())}),f4,kke=P(()=>{typeof window<"u"&&(f4={get passive(){}},window.addEventListener("testPassive",null,f4),window.removeEventListener("testPassive",null,f4))}),Jg=P(()=>{X(Ne()),BI(),Cke(),Pke(),X(Du()),Mke(),kke(),o4()});function xr(s){let a=(0,m4.useMemo)(()=>{let f=s;return{get current(){return f},set current(g){f=g,h(g)}}},[]),[l,h]=(0,m4.useState)(()=>s);return[a,l]}var m4,Rr=P(()=>{m4=X(Ne())});function Ake(s){return a=>Lo.default.createElement(Pq,null,Lo.default.createElement(s,F({},a)))}var Lo,wq,xq,kr,xb,Sq,Eq,Cq,g4,v4,Pq,Dr=P(()=>{il(),Ve(),Ve(),Lo=X(Ne()),wq=X(Du()),Jg(),Rr(),kr=lo(xq||(xq=te([`
  #pointer-root & {
    pointer-events: none;
  }
  #pointer-root.normal & {
    pointer-events: auto;
  }
`]))),xb={panel:{bg:"#282b2f",head:{title:{color:"#bbb"},punctuation:{color:"#808080"}},body:{compoudThing:{label:{get color(){return mb(.6,xb.panel.bg)}}}}}},Eq=typeof window<"u"?Ul(Sq||(Sq=te([`
  :host {
    all: initial;
    color: white;
    font: 11px -apple-system, BlinkMacSystemFont, Segoe WPC, Segoe Editor,
      HelveticaNeue-Light, Ubuntu, Droid Sans, sans-serif;
  }

  * {
    padding: 0;
    margin: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    list-style: none;
  }
`]))):{},g4=ae.div(Cq||(Cq=te([`
  z-index: 51;
  position: fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  pointer-events: none;
`]))),v4=s=>Lo.default.createElement(NS,{disableVendorPrefixes:!0,target:s.target},Lo.default.createElement(Lo.default.Fragment,null,Lo.default.createElement(Eq,null),s.children)),Pq=s=>{let[a,l]=(0,Lo.useState)(null),[h,f]=(0,Lo.useState)(null);(0,Lo.useLayoutEffect)(()=>{if(!a)return;let{parentNode:_}=a;if(!_)return;let S=_.shadowRoot?parent.shadowRoot:_.attachShadow({mode:"open"});f(S)},[a]);let[g,b]=xr(void 0);return h?wq.default.createPortal(Lo.default.createElement(v4,{target:h},Lo.default.createElement(Lo.default.Fragment,null,Lo.default.createElement(g4,{ref:g}),Lo.default.createElement(wb.Provider,{value:b},s.children))),h):Lo.default.createElement("template",{ref:l,"shadow-root":"open"},s.children)}}),Sb,Tq,Mq,sf,kq,sE,Aq,Iq,HI,Rq,y4,jc,dh=P(()=>{Dr(),Ve(),Sb={get outlinePanel(){return 1},get propsPanel(){return Sb.outlinePanel},get sequenceEditorPanel(){return this.outlinePanel-1},get toolbar(){return this.outlinePanel+1},get pluginPanes(){return this.sequenceEditorPanel-1}},Tq=xb.panel.bg,sf=ae.span(Mq||(Mq=te([`
  white-space: nowrap;
`]))),sE=ae.span(kq||(kq=te([`
  white-space: nowrap;
  color: `,`;
`])),xb.panel.head.punctuation.color),Iq=ae.div(Aq||(Aq=te([`
  background: `,`;
  flex-grow: 1;
  overflow-y: scroll;
  padding: 0;
`])),Tq),HI=18,y4=ae.div(Rq||(Rq=te([`
  height: `,`px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  padding: 0 10px;
  position: relative;
  color: #adadadb3;
  border-bottom: 1px solid rgb(0 0 0 / 13%);
  background-color: #25272b;
  font-size: 10px;
  font-weight: 500;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`])),HI),jc=100}),Dq,ju,Eb=P(()=>{Dq=()=>{},ju=Dq});function Ike(s){return b4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),b4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.775 2.781a.5.5 0 01.5.5v1.7H4.67c.108-.957.92-1.7 1.905-1.7h6.608a1.917 1.917 0 110 3.834H6.574c-.78 0-1.452-.466-1.751-1.135H2.275v5.03h2.39a2.032 2.032 0 012.023-1.854h6.38a2.031 2.031 0 110 4.063h-6.38c-.83 0-1.543-.497-1.858-1.21H1.775a.5.5 0 01-.5-.5V3.281a.5.5 0 01.5-.5zm4.799 1.5h6.608a.917.917 0 110 1.834H6.574a.917.917 0 110-1.834zm.114 5.875h6.38a1.031 1.031 0 110 2.063h-6.38a1.032 1.032 0 110-2.063z",fill:"currentColor"}))}var b4,_4,Rke=P(()=>{b4=X(Ne()),_4=Ike});function Dke(s){return w4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),w4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.5L4 6.654 5.2 5.5 8 8.385 10.8 5.5 12 6.654 8 10.5z",fill:"currentColor"}))}var w4,Oq,Oke=P(()=>{w4=X(Ne()),Oq=Dke});function Lke(s){return x4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),x4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 3c-1.072 0-1.969.904-1.969 1.969 0 1 .929 1.968 1.969 1.968h9A1.969 1.969 0 1012.5 3h-9zm9 1H5.531v1.938H12.5A.969.969 0 0012.5 4zM3.5 9.14a1.969 1.969 0 000 3.938h9a1.969 1.969 0 100-3.937h-9zm9 1H8.406v1.938H12.5a.969.969 0 100-1.937z",fill:"currentColor"}))}var x4,Lq,Nke=P(()=>{x4=X(Ne()),Lq=Lke});function Fke(s){return S4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),S4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.166 7.994a2.26 2.26 0 114.518 0 2.26 2.26 0 01-4.518 0zM2.425 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM5.74 7.994a2.26 2.26 0 114.519 0 2.26 2.26 0 01-4.519 0zM8 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM13.575 5.735a2.26 2.26 0 100 4.519 2.26 2.26 0 000-4.52zm-1.086 2.26a1.085 1.085 0 112.171 0 1.085 1.085 0 01-2.17 0z",fill:"currentColor"}))}var S4,Nq,Bke=P(()=>{S4=X(Ne()),Nq=Fke});function Uke(s){return E4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),E4.createElement("path",{d:"M8.339 4.5l-2.055.644 4.451 1.393v2.748l-2.966.928-2.504-.783V6.738l2.42.758 2.055-.644-4.458-1.395L4 5.858v4.463L7.768 11.5 12 10.175V5.646L8.339 4.5z",fill:"currentColor"}))}var E4,C4,zke=P(()=>{E4=X(Ne()),C4=Uke});function Vke(s){return P4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),P4.createElement("path",{d:"M8 1.57c-.416 0-.752.36-.752.804v.482c-1.715.372-3.006 1.994-3.006 3.938v.473c0 1.18-.407 2.32-1.14 3.205l-.173.208a.85.85 0 00-.125.864.75.75 0 00.686.475h9.019a.752.752 0 00.686-.475.845.845 0 00-.125-.864l-.174-.208a5.026 5.026 0 01-1.139-3.205v-.473c0-1.944-1.291-3.566-3.006-3.938v-.482c0-.445-.336-.804-.752-.804zm1.063 12.39c.282-.301.44-.71.44-1.138H6.496c0 .428.158.837.44 1.138.281.302.664.47 1.063.47.4 0 .783-.168 1.064-.47z",fill:"currentColor"}))}var P4,GI,jke=P(()=>{P4=X(Ne()),GI=Vke});function Hke(s){return T4.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),T4.createElement("path",{d:"M6.8 11.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6zm6-7.2h-2.4v-.6A1.8 1.8 0 008.6 2H7.4a1.8 1.8 0 00-1.8 1.8v.6H3.2a.6.6 0 100 1.2h.6v6.6A1.8 1.8 0 005.6 14h4.8a1.8 1.8 0 001.8-1.8V5.6h.6a.6.6 0 100-1.2zm-6-.6a.6.6 0 01.6-.6h1.2a.6.6 0 01.6.6v.6H6.8v-.6zm4.2 8.4a.6.6 0 01-.6.6H5.6a.6.6 0 01-.6-.6V5.6h6v6.6zm-1.8-.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6z",fill:"currentColor"}))}var T4,M4,Gke=P(()=>{T4=X(Ne()),M4=Hke}),oE=P(()=>{Rke(),Oke(),Nke(),Bke(),zke(),jke(),Gke()}),Hc,Fq,WI,Bq,Uq,zq,Vq,jq,Hq,Gq,Wq,$q,Kq,Xq,qq,Yq,Zq,Qq,aE,$I=P(()=>{Hc=X(Ne()),Ve(),Eb(),Dr(),oE(),WI=ae.li(Fq||(Fq=te([`
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  justify-content: flex-start;
  flex-direction: column;
  align-items: flex-start;
`]))),Uq=ae.div(Bq||(Bq=te([""]))),Vq=ae(Uq)(zq||(zq=te([`
  position: relative;
  margin-top: 2px;
  margin-bottom: 2px;
  margin-left: calc(4px + var(--depth) * 16px);
  padding-left: 4px;
  padding-right: 8px;
  gap: 4px;
  height: 21px;
  line-height: 0;
  box-sizing: border-box;
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  pointer-events: none;
  white-space: nowrap;

  border-radius: 2px;
  box-shadow: 0 3px 4px -1px rgba(0, 0, 0, 0.48);

  color: rgba(255, 255, 255, 0.9);
  background: rgba(40, 43, 47, 0.65);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);

  &.descendant-is-selected {
    background: rgba(29, 53, 59, 0.7);
  }

  `,`;
  &:not(.not-selectable):not(.selected):hover {
    background: rgba(59, 63, 69, 0.9);

    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &:not(.not-selectable):not(.selected):active {
    background: rgba(82, 88, 96, 0.9);
    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &.selected {
    background: rgba(30, 88, 102, 0.7);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),kr),Hq=lo(jq||(jq=te([`
  font-weight: 500;
  font-size: 11px;
  & {
  }
`]))),Wq=ae.span(Gq||(Gq=te([`
  `,`;

  `,`;
  position: relative;
  // Compensate for border bottom
  top: 0.5px;
  display: flex;
  height: 20px;
  align-items: center;
  box-sizing: border-box;
`])),Hq,kr),Kq=ae.div($q||($q=te([`
  font-weight: 500;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  opacity: 0.99;
`]))),qq=ae.span(Xq||(Xq=te([`
  font-size: 9px;
  position: relative;
  display: block;
  transition: transform 0.1s ease-out;

  &:hover {
    transform: rotate(-20deg);
  }

  `,`.collapsed & {
    transform: rotate(-90deg);

    &:hover {
      transform: rotate(-70deg);
    }
  }
`])),WI),Zq=ae.ul(Yq||(Yq=te([`
  margin: 0;
  padding: 0;
  list-style: none;

  `,`.collapsed & {
    display: none;
  }
`])),WI),Qq=({label:s,children:a,depth:l,select:h,selectionStatus:f,labelDecoration:g,collapsed:b=!1,setIsCollapsed:_})=>{let S=a!==void 0;return Hc.default.createElement(WI,{style:{"--depth":l},className:b?"collapsed":""},Hc.default.createElement(Vq,{className:f,onClick:h??ju,"data-header":!0},Hc.default.createElement(Kq,null,S?Hc.default.createElement(qq,{onClick:C=>{C.stopPropagation(),C.preventDefault(),_==null||_(!b)}},Hc.default.createElement(Oq,null)):Hc.default.createElement(C4,null)),Hc.default.createElement(Wq,null,Hc.default.createElement("span",null,s)),g),S&&Hc.default.createElement(Zq,null,a))},aE=Qq});function Wke(s){return Object.keys(s)}function $ke(s){return Object.keys((0,Gc.val)(s.sheetTemplatesP))}function Kke(){let s=Oo(of().filter(a=>bt(a)||at(a)).map(a=>at(a)?a.sheet:a))[0];if(s)return s.getSequence()}var Gc,of,Jq,af=P(()=>{Gc=Ut,Kt(),di(),Me(),of=()=>{var s;let a=(0,Gc.val)(de().projectsP),l=((s=(0,Gc.val)(de().atomP.historic.panels.outlinePanel.selection))!=null?s:[]).map(h=>{let f=a[h.projectId];if(!f)return;if(h.type==="Project")return f;if(!(0,Gc.val)(f.sheetTemplatesP[h.sheetId]))return;let g=Jq(f,h.sheetId);if(!g)return;if(h.type==="Sheet")return g;let b=(0,Gc.val)(g.objectsP[h.objectKey]);if(b)return b});return Oo(l.filter(h=>typeof h<"u"))},Jq=(s,a)=>{let l=de().atomP.historic.projects.stateByProjectId[s.address.projectId],h=(0,Gc.val)(l.stateBySheetId[a].selectedInstanceId),f=(0,Gc.val)(s.sheetTemplatesP[a]);if(f){if(h)return(0,Gc.val)(f.instancesP[h]);{let g=(0,Gc.val)(f.instancesP);return g[Wke(g)[0]]}}}}),eY,tY,Xke=P(()=>{Me(),eY=X(Ne()),$I(),En(),af(),tY=({sheetObject:s,depth:a,overrideLabel:l})=>{let h=()=>{de().transaction(({stateEditors:g})=>{g.studio.historic.panels.outline.selection.set([s])})},f=Qn(()=>of(),[]);return eY.default.createElement(aE,{select:h,label:l??s.address.objectKey,depth:a,selectionStatus:f.includes(s)?"selected":"not-selected"})}});function k4(s){var a;let l=s.type==="namespace"?"namespace:".concat(s.sheet.address.sheetId,":").concat(s.path.join("/")):s.type==="Theatre_Project"?"project":s.type==="Theatre_Sheet"?"sheetInstance:".concat(s.address.sheetId,":").concat(s.address.sheetInstanceId):"unknown",h=s.type==="namespace"?s.sheet.address.projectId:s.address.projectId,f=(a=ir(de().atomP.ahistoric.projects.stateByProjectId[h].collapsedItemsInOutline[l]))!=null?a:!1,g=(0,nY.useCallback)(b=>{de().transaction(({stateEditors:_})=>{_.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline.set({projectId:h,isCollapsed:b,itemKey:l})})},[l]);return{collapsed:f,setCollapsed:g}}var nY,A4=P(()=>{nY=X(Ne()),Me(),En()});function rY(s){return Wc.default.createElement(Wc.default.Fragment,null,[...s.namespace.entries()].map(([a,{object:l,nested:h}])=>Wc.default.createElement(qke,{key:a,label:a,object:l,nested:h,visualIndentation:s.visualIndentation,path:s.path,sheet:s.sheet})))}function qke(s){let{nested:a,label:l,object:h,sheet:f}=s,{collapsed:g,setCollapsed:b}=k4({type:"namespace",sheet:f,path:[...s.path,l]}),_=a&&Wc.default.createElement(rY,{namespace:a,path:[...s.path,l],key:"namespaceTree("+l+")",visualIndentation:s.visualIndentation+1,sheet:f}),S=h&&Wc.default.createElement(tY,{depth:s.visualIndentation,key:"objectPath("+h.address.objectKey+")",sheetObject:h,overrideLabel:l});return Wc.default.createElement(Wc.default.Fragment,{key:"".concat(l," - ").concat(s.visualIndentation)},S,_&&Wc.default.createElement(aE,{selectionStatus:"not-selectable",label:l,key:"baseItem(".concat(l,")"),depth:s.visualIndentation,children:_,collapsed:g,setIsCollapsed:b}))}function iY(s,a,l=Yke(a)){let[h,...f]=l,g=s.get(h);g||(g={nested:void 0,object:void 0,path:[...l]},s.set(h,g)),f.length===0?(console.assert(!g.object,"expect not to have existing object with same name",{existing:g,object:a}),g.object=a):(g.nested||(g.nested=new Map),iY(g.nested,a,f))}function Yke(s){let a=I4.get(s);return a||(a=s.address.objectKey.split(uY),console.assert(a.length>0,"expected not empty"),I4.set(s,a)),a}var sY,Wc,oY,aY,lY,uY,I4,Zke=P(()=>{En(),sY=Ut,Wc=X(Ne()),Ve(),Xke(),$I(),A4(),ae.li(oY||(oY=te([`
  color: `,`;
`])),s=>s.isSelected?"white":"hsl(1, 1%, 80%)"),aY=({sheet:s,depth:a})=>Qn(()=>{let l=(0,sY.val)(s.objectsP),h=Object.values(l).filter(g=>g!=null),f=new Map;return h.forEach(g=>{iY(f,g)}),Wc.default.createElement(rY,{namespace:f,visualIndentation:a,path:[],sheet:s})},[s,a]),lY=aY,uY=/\s*\/\s*/g,I4=new WeakMap}),Cb,cY,dY,hY,pY,fY,mY,Qke=P(()=>{Me(),af(),En(),Cb=X(Ne()),Ve(),Zke(),$I(),A4(),dY=ae.div(cY||(cY=te([`
  display: flex;
`]))),ae.li(hY||(hY=te([`
  color: `,`;
`])),s=>s.isSelected?"white":"hsl(1, 1%, 80%)"),fY=ae.div(pY||(pY=te([""]))),mY=({sheet:s,depth:a})=>{let{collapsed:l,setCollapsed:h}=k4(s),f=(0,Cb.useCallback)(()=>{de().transaction(({stateEditors:g})=>{g.studio.historic.panels.outline.selection.set([s])})},[s]);return Qn(()=>{let g=of();return Cb.default.createElement(aE,{depth:a,select:f,setIsCollapsed:h,collapsed:l,selectionStatus:g.some(b=>b===s)?"selected":g.some(b=>b.type==="Theatre_SheetObject"&&b.sheet===s)?"descendant-is-selected":"not-selected",label:Cb.default.createElement(dY,null,s.address.sheetId,": ",s.address.sheetInstanceId)},Cb.default.createElement(fY,null,Cb.default.createElement(lY,{depth:a+1,sheet:s,key:"objectList"+s.address.sheetInstanceId})))},[a,l])}}),R4,Pb,gY,vY,yY,bY,Jke=P(()=>{En(),R4=Ut,Pb=X(Ne()),Ve(),Qke(),ae.div(gY||(gY=te([`
  display: flex;
`]))),ae.li(vY||(vY=te([`
  color: `,`;
`])),s=>s.isSelected?"white":"hsl(1, 1%, 80%)"),ae.div(yY||(yY=te([""]))),bY=({sheetId:s,depth:a,project:l})=>Qn(()=>{let h=(0,R4.val)(l.sheetTemplatesP[s]);if(!h)return Pb.default.createElement(Pb.default.Fragment,null);let f=(0,R4.val)(h.instancesP);return Pb.default.createElement(Pb.default.Fragment,null,Object.entries(f).map(([g,b])=>Pb.default.createElement(mY,{key:b.address.sheetInstanceId,sheet:b,depth:a})))},[a,s,l])}),KI,_Y,wY,eAe=P(()=>{af(),En(),KI=X(Ne()),Jke(),_Y=({project:s,depth:a})=>Qn(()=>{if(!s)return null;let l=$ke(s);return KI.default.createElement(KI.default.Fragment,null,l.map(h=>KI.default.createElement(bY,{depth:a,sheetId:h,key:"sheet-".concat(h),project:s})))},[s,a]),wY=_Y}),lE,xY,SY,EY,CY,PY,tAe=P(()=>{lE=X(Ne()),$I(),eAe(),Me(),En(),af(),xY=Ut,Ve(),A4(),EY=ae.div(SY||(SY=te([`
  color: #ff6363;
  margin-left: 11px;
  background: #4c282d;
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 10px;
  box-shadow: 0 2px 8px -4px black;
`]))),CY=({depth:s,project:a})=>{let l=Qn(()=>of(),[]),h=Qn(()=>{let _=a.address.projectId,S=(0,xY.val)(de().atomP.ephemeral.coreByProject[_].loadingState);return(S==null?void 0:S.type)==="browserStateIsNotBasedOnDiskState"},[a]),f=(0,lE.useCallback)(()=>{de().transaction(({stateEditors:_})=>{_.studio.historic.panels.outline.selection.set([a])})},[a]),{collapsed:g,setCollapsed:b}=k4(a);return lE.default.createElement(aE,{depth:s,label:a.address.projectId,setIsCollapsed:b,collapsed:g,labelDecoration:h?lE.default.createElement(EY,null,"Has Conflicts"):null,children:lE.default.createElement(wY,{project:a,depth:s+1}),selectionStatus:l.includes(a)?"selected":l.some(_=>_.address.projectId===a.address.projectId)?"descendant-is-selected":"not-selected",select:f})},PY=CY}),TY,D4,MY,kY,AY,IY,nAe=P(()=>{TY=Ut,En(),Me(),D4=X(Ne()),Ve(),tAe(),kY=ae.ul(MY||(MY=te([`
  list-style: none;
  margin: 0;
  padding: 0;
  padding-right: 4px;
`]))),AY=s=>Qn(()=>{let a=(0,TY.val)(de().projectsP);return D4.default.createElement(kY,null,Object.keys(a).map(l=>{let h=a[l];return D4.default.createElement(PY,{depth:0,project:h,key:"projectListItem-".concat(l)})}))},[]),IY=AY});function RY(s){let[a,l]=(0,O4.useState)(!1);return(0,O4.useEffect)(()=>{let h=g=>{let b=a?200:50,_=56,S=s==="left"?g.x<b:g.x>window.innerWidth-b;S&&(S=g.y>_),l(!!S)};document.addEventListener("mousemove",h);let f=()=>{l(!1)};return document.addEventListener("mouseleave",f),()=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseleave",f)}},[a]),a}var O4,DY=P(()=>{O4=X(Ne())}),uE,Tb,L4,OY,LY,NY,FY,XI,cE,BY,rAe=P(()=>{uE=X(Ne()),Ve(),dh(),nAe(),En(),Me(),DY(),Tb=Ut,Dr(),L4="44px",LY=ae.div(OY||(OY=te([`
  `,`;
  background-color: transparent;
  position: absolute;
  left: 8px;
  z-index: `,`;

  top: calc(`,` + 8px);
  height: fit-content;
  max-height: calc(100% - `,`);
  overflow-y: scroll;
  overflow-x: hidden;
  padding: 0;
  user-select: none;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;

  display: `,`;

  &:hover {
    display: block;
  }

  // Create a small buffer on the bottom to aid selecting the bottom item in a long, scrolling list
  &::after {
    content: '';
    display: block;
    height: 20px;
  }
`])),kr,Sb.outlinePanel,L4,L4,({pin:s})=>s?"block":"none"),NY=()=>{var s;let a=(s=ir(de().atomP.ahistoric.pinOutline))!=null?s:!0,l=ir(BY),h=RY("left");return(0,uE.useLayoutEffect)(()=>{XI.set(h)},[h]),(0,uE.useEffect)(()=>()=>{cE.set(!1),XI.set(!1)},[]),uE.default.createElement(LY,{pin:a||l,onMouseEnter:()=>{cE.set(!0)},onMouseLeave:()=>{cE.set(!1)}},uE.default.createElement(IY,null))},FY=NY,XI=new Tb.Atom(!1),cE=new Tb.Atom(!1),BY=(0,Tb.prism)(()=>{let s=(0,Tb.val)(cE.prism),a=(0,Tb.val)(XI.prism);return s||a})}),UY,zY,VY,iAe=P(()=>{Ve(),zY=ae.input.attrs({type:"checkbox"})(UY||(UY=te([`
  outline: none;
`]))),VY=zY});function sAe({propConfig:s,editingTools:a,value:l,autoFocus:h}){let f=(0,N4.useCallback)(g=>{a.permanentlySetValue(!!g.target.checked)},[s,a]);return N4.default.createElement(HY,{checked:l,onChange:f,autoFocus:h})}var N4,jY,HY,GY,oAe=P(()=>{N4=X(Ne()),Ve(),iAe(),HY=ae(VY)(jY||(jY=te([`
  margin-left: 6px;

  :focus {
    outline: 1px solid #555;
  }
`]))),GY=sAe});function qI(s){return a=>{s.forEach(l=>{typeof l=="function"?l(a):l!=null&&(l.current=a)})}}var YI=P(()=>{});function F4(s,a,l){(0,WY.useEffect)(()=>{if(!s||l===!1)return;let h=Array.isArray(s)?s.filter(g=>g):[s],f=g=>{h.every(b=>!g.composedPath().includes(b))&&a(g)};return window.addEventListener("mousedown",f,{capture:!0,passive:!1}),()=>{window.removeEventListener("mousedown",f,{capture:!0,passive:!1})}},[s,l])}var WY,B4=P(()=>{WY=X(Ne())}),hh,$Y,ph,KY,XY,qY,YY,U4,ZY,Gl,QY,sl=P(()=>{hh=X(Ne()),Ve(),$Y="pointer-root",ph="--lockedCursor",XY=ae.div(KY||(KY=te([`
  pointer-events: auto;
  &.normal {
    pointer-events: none;
  }
`]))),YY=ae.div(qY||(qY=te([`
  position: absolute;
  inset: 0;
  pointer-events: none;

  #pointer-root:not(.normal) > & {
    pointer-events: auto;
  }
`]))),U4=(0,hh.createContext)({}),ZY=s=>{var a,l,h,f;let[g,b]=(0,hh.useState)([]),_=(0,hh.useMemo)(()=>({getLock:(C,I)=>{let O={className:C,cursor:I};return b(D=>[...D,O]),()=>{b(D=>D.filter(A=>A!==O))}}}),[]),S=(l=(a=g[0])==null?void 0:a.cursor)!=null?l:"";return hh.default.createElement(U4.Provider,{value:_},hh.default.createElement(XY,{id:$Y,className:((f=(h=g[0])==null?void 0:h.className)!=null?f:"normal")+" "+s.className},hh.default.createElement(YY,{style:{cursor:S,[ph]:S}},s.children)))},Gl=(s,a,l)=>{let h=(0,hh.useContext)(U4);(0,hh.useLayoutEffect)(()=>{if(s)return h.getLock(a,l)},[s,a,l])},QY=ZY});function JY(s){return dE.default.createElement(z4.Provider,{value:s.logger},s.children)}function lf(s,a){let l=(0,dE.useContext)(z4);return(0,dE.useMemo)(()=>s?l.named(s,a):l,[l,s,a])}var dE,z4,uf=P(()=>{dE=X(Ne()),z4=dE.default.createContext(null)});function aAe(){let s=lf("PointerCapturing"),a=Hu.default.useRef(null),l=()=>a.current!=null;return h=>{let f,g=b=>(f=b,a.current=b,b);return{capturing:{capturePointer(b){if(s._debug("Capturing pointer",{forDebugName:h,reason:b}),a.current!=null)throw new Error('"'.concat(h,'" attempted capturing pointer for "').concat(b,'" while already captured by "').concat(a.current.debugOwnerName,'" for "').concat(a.current.debugReason,'"'));let _=g({debugOwnerName:h,debugReason:b});return{isCapturing(){return _===a.current},release(){return _===a.current?(s._debug("Releasing pointer",{forDebugName:h,reason:b}),g(null),!0):!1}}},isPointerBeingCaptured:l},forceRelease(){f&&a.current===f&&(s._debug("Force releasing pointer",{localCapture:f}),g(null))}}}}function lAe(s){let a=aAe();return Hu.default.createElement(V4.Provider,{value:a},Hu.default.createElement(tZ,{children:s.children}))}function eZ(s){let a=(0,Hu.useContext)(V4),l=(0,Hu.useMemo)(()=>a(s),[s,a]);return(0,Hu.useEffect)(()=>()=>{l.forceRelease()},[l]),l.capturing}var Hu,V4,tZ,j4=P(()=>{Hu=X(Ne()),uf(),V4=Hu.default.createContext(null),tZ=Hu.default.memo(({children:s})=>Hu.default.createElement(Hu.default.Fragment,null,s))}),H4,uAe=P(()=>{H4=typeof window<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)});function Ui(s,a){let l=(0,Mb.useRef)(a);l.current=a;let h=a.shouldPointerLock&&!H4,f=(0,Mb.useRef)({domDragStarted:!1}),{capturePointer:g}=eZ("useDrag for ".concat(a.debugName)),b=(0,Mb.useRef)({onDrag:ju,onDragEnd:ju,onClick:ju}),_=(0,Mb.useRef)(),[S,C]=xr(!1);return(0,Mb.useLayoutEffect)(()=>{if(!s)return;let I=()=>{let $=f.current.domDragStarted&&f.current.detection.detected;S.current!==$&&(S.current=$)},O=$=>{if(!f.current.domDragStarted)return;let Y=f.current;if(!cAe($,Y)&&(Y.detection.detected||(Y.detection.totalDistanceMoved+=Math.abs($.movementY)+Math.abs($.movementX),Y.detection.totalDistanceMoved>nZ&&(h&&s.requestPointerLock(),Y.detection={detected:!0,dragMovement:{x:0,y:0},dragEventCount:0},I())),Y.detection.detected)){Y.detection.dragEventCount+=1;let{dragMovement:re}=Y.detection;if(h)re.x+=$.movementX,re.y+=$.movementY;else{let{startPos:ne}=Y;re.x=$.screenX-ne.x,re.y=$.screenY-ne.y}b.current.onDrag(re.x,re.y,$,$.movementX,$.movementY)}},D=$=>{if(N(),!f.current.domDragStarted)return;let Y=f.current.detection.detected;f.current={domDragStarted:!1},a.shouldPointerLock&&!H4&&document.exitPointerLock(),b.current.onDragEnd(Y),window.focus(),Y||b.current.onClick($),I()},A=()=>{document.addEventListener("mousemove",O),document.addEventListener("mouseup",D)},N=()=>{var $;($=_.current)==null||$.release(),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",D)},L=$=>{l.current.disabled||f.current.domDragStarted&&f.current.detection.detected&&(l.current.dontBlockMouseDown||($.stopPropagation(),$.preventDefault()),f.current.detection={detected:!1,totalDistanceMoved:0},I())},V=$=>{var Y,re,ne,le;(Y=_.current)==null||Y.release();let Ce=l.current;if(Ce.disabled===!0||!((re=Ce.buttons)!=null?re:[0]).includes($.button))return;let ve=Ce.onDragStart($);ve!==!1&&(b.current.onDrag=ve.onDrag,b.current.onDragEnd=(ne=ve.onDragEnd)!=null?ne:ju,b.current.onClick=(le=ve.onClick)!=null?le:ju,_.current=g("Drag start"),Ce.dontBlockMouseDown||($.stopPropagation(),$.preventDefault()),f.current={domDragStarted:!0,startPos:{x:$.screenX,y:$.screenY},detection:{detected:!1,totalDistanceMoved:0}},I(),A())},G=$=>{V($)};return s.addEventListener("mousedown",G),s.addEventListener("click",L),()=>{var $,Y;N(),s.removeEventListener("mousedown",G),s.removeEventListener("click",L),f.current.domDragStarted&&((Y=($=b.current).onDragEnd)==null||Y.call($,f.current.detection.detected)),f.current={domDragStarted:!1},I()}},[s]),Gl(C&&!!a.lockCSSCursorTo,"dragging",a.lockCSSCursorTo),[C]}function cAe(s,a){return(!a.detection.detected||a.detection.detected&&a.detection.dragEventCount<3)&&(Math.abs(s.movementX)>G4||Math.abs(s.movementY)>G4)}var Mb,nZ,G4,Es=P(()=>{Mb=X(Ne()),sl(),j4(),Eb(),uAe(),Rr(),nZ=3,G4=100});function dAe(s){return isNaN(s)?"NaN":Do(s)?s.toFixed(0):Gg(s,3).toString()}var rZ,iZ,fh,sZ,ZI,oZ,aZ,lZ,uZ,cZ,dZ,hZ,pZ,QI,W4=P(()=>{di(),rZ=X(Ne()),iZ=X(Ne()),fh=X(Ne()),Ve(),YI(),Rr(),B4(),Es(),ZI=ae.div(sZ||(sZ=te([`
  height: 100%;
  width: 100%;
  position: relative;
  z-index: 0;
  box-sizing: border-box;
  display: flex;
  align-items: center;

  &:after {
    position: absolute;
    inset: 1px 0 2px;
    display: block;
    content: ' ';
    background-color: transparent;
    border: 1px solid transparent;
    z-index: -2;
    box-sizing: border-box;
    border-radius: 1px;
  }

  &:hover,
  &.dragging,
  &.editingViaKeyboard {
    &:after {
      background-color: #10101042;
      border-color: #00000059;
    }
  }
`]))),aZ=ae.input(oZ||(oZ=te([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: ew-resize;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;

  &:focus {
    cursor: text;
  }
`]))),uZ=ae.div(lZ||(lZ=te([`
  position: absolute;
  inset: 3px 2px 4px;
  transform: scale(var(--percentage), 1);
  transform-origin: top left;
  background-color: #2d5561;
  z-index: -1;
  border-radius: 2px;
  pointer-events: none;

  `,".dragging &, ",`.noFocus:hover & {
    background-color: #338198;
  }
`])),ZI,ZI),dZ=ae.div(cZ||(cZ=te([`
  display: contents;
`]))),hZ=s=>!0,pZ=s=>{var a;let[l]=xr({mode:"noFocus"}),h=(a=s.isValid)!=null?a:hZ,f=(0,fh.useRef)(s);f.current=s;let g=(0,fh.useRef)(null);F4(g.current,()=>{g.current.blur()},l.current.mode==="editingViaKeyboard");let b=(0,fh.useRef)(null),_=(0,fh.useMemo)(()=>{let V=ve=>{let we=ve.target,{value:Le}=we,lt=l.current;l.current=B(F({},lt),{currentEditedValueInString:Le});let ue=parseFloat(Le);!isFinite(ue)||!h(ue)||f.current.temporarilySetValue(ue)},G=()=>{l.current.mode==="editingViaKeyboard"&&($(),l.current={mode:"noFocus"}),s.onBlur&&s.onBlur()},$=()=>{let ve=l.current,we=parseFloat(ve.currentEditedValueInString);!isFinite(we)||!h(we)||ve.valueBeforeEditing===we?f.current.discardTemporaryValue():f.current.permanentlySetValue(we)},Y=ve=>{ve.key==="Escape"?(f.current.discardTemporaryValue(),l.current={mode:"noFocus"},g.current.blur()):(ve.key==="Enter"||ve.key==="Tab")&&($(),g.current.blur())},re=ve=>{l.current.mode==="noFocus"&&(g.current.focus(),ve.preventDefault()),ve.stopPropagation()},ne=()=>{l.current.mode==="noFocus"?le():l.current.mode},le=()=>{let ve=f.current.value;l.current={mode:"editingViaKeyboard",currentEditedValueInString:String(ve),valueBeforeEditing:ve},setTimeout(()=>{g.current.focus(),g.current.setSelectionRange(0,100)})},Ce;return{inputChange:V,onBlur:G,transitionToDraggingMode:()=>{var ve;let we=f.current.value;Ce=(ve=g.current)==null?void 0:ve.getBoundingClientRect().width,l.current={mode:"dragging"};let Le=we,lt=we;return b.current=document.body.style.cursor,{onDrag(ue,Oe,Q,We){let Lt=Q.altKey?We/10:We,Ie=lt+s.nudge({deltaX:Lt,deltaFraction:Lt/Ce,magnitude:1});lt=s.range?_i(Ie,s.range[0],s.range[1]):Ie,f.current.temporarilySetValue(lt)},onDragEnd(ue){ue?(Le===lt?f.current.discardTemporaryValue():f.current.permanentlySetValue(lt),l.current={mode:"noFocus"}):(f.current.discardTemporaryValue(),l.current={mode:"noFocus"})},onClick(){g.current.focus(),g.current.setSelectionRange(0,100)}}},onInputKeyDown:Y,onClick:re,onFocus:ne}},[]);(0,rZ.useEffect)(()=>()=>{_.onBlur()},[]);let S=l.current.mode!=="editingViaKeyboard"?dAe(s.value):l.current.currentEditedValueInString;typeof S=="number"&&isNaN(S)&&(S="NaN");let C=[g];s.inputRef&&C.push(s.inputRef);let I=fh.default.createElement(aZ,{key:"input",type:"text",onChange:_.inputChange,value:S,onBlur:_.onBlur,onKeyDown:_.onInputKeyDown,onClick:_.onClick,onFocus:_.onFocus,ref:qI(C),onMouseDown:V=>{V.stopPropagation()},onDoubleClick:V=>{V.preventDefault(),V.stopPropagation()},autoFocus:s.autoFocus}),{range:O}=s,D=parseFloat(S),A=O?fh.default.createElement(uZ,{style:{"--percentage":_i((D-O[0])/(O[1]-O[0]),0,1)}}):null,[N,L]=(0,iZ.useState)(null);return Ui(N,{debugName:"form/BasicNumberInput",onDragStart:_.transitionToDraggingMode,lockCSSCursorTo:"ew-resize",shouldPointerLock:!0,disabled:l.current.mode==="editingViaKeyboard"}),fh.default.createElement(ZI,{className:s.className+" "+l.current.mode},fh.default.createElement(dZ,{ref:L},I),A)},QI=pZ});function hAe({propConfig:s,editingTools:a,value:l,autoFocus:h}){let f=(0,$4.useCallback)(g=>s.nudgeFn(B(F({},g),{config:s})),[s]);return $4.default.createElement(QI,{value:l,temporarilySetValue:a.temporarilySetValue,discardTemporaryValue:a.discardTemporaryValue,permanentlySetValue:a.permanentlySetValue,range:s.range,nudge:f,autoFocus:h})}var $4,K4,fZ=P(()=>{W4(),$4=X(Ne()),K4=hAe});function pAe({value:s,onChange:a,options:l,autoFocus:h}){let f=(0,hE.useCallback)(g=>{a(String(g.target.value))},[a]);return hE.default.createElement(X4,{role:"radiogroup"},Object.keys(l).map((g,b)=>hE.default.createElement(vZ,{key:"label-"+b,"data-checked":s===g},l[g],hE.default.createElement(bZ,{type:"radio",checked:s===g,value:g,onChange:f,name:"switchbox",autoFocus:h}))))}var hE,mZ,X4,gZ,vZ,yZ,bZ,_Z,fAe=P(()=>{il(),hE=X(Ne()),Ve(),X4=ae.form(mZ||(mZ=te([`
  display: flex;
  flex-direction: row;
  align-items: stretch;
  vertical-align: middle;
  justify-content: stretch;
  height: 24px;
  width: 100%;
`]))),vZ=ae.label(gZ||(gZ=te([`
  padding: 0 0.5em;
  background: transparent;
  /* background: #373748; */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  color: #a7a7a7;
  border: 1px solid transparent;
  box-sizing: border-box;
  border-right-width: 0px;

  & + &:last-child {
    border-right-width: 1px;
  }

  `,`:hover > & {
    border-color: #1c2123;
    /* background-color: #373748; */
    /* color: `,`; */
  }

  &&:hover {
    background-color: #464654;
  }

  &&[data-checked='true'] {
    color: white;
    background: #3f3f4c;
  }
`])),X4,QS(.1,"white")),bZ=ae.input(yZ||(yZ=te([`
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
`]))),_Z=pAe}),mAe=P(()=>{}),q4,Y4,Z4,wZ=P(()=>{q4=X(Ne()),Y4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Z4=q4.default.createContext&&q4.default.createContext(Y4)});function xZ(s){return s&&s.map(function(a,l){return Ab.default.createElement(a.tag,mh({key:l},a.attr),xZ(a.child))})}function kb(s){return function(a){return Ab.default.createElement(gAe,mh({attr:mh({},s.attr)},a),xZ(s.child))}}function gAe(s){var a=function(l){var h=s.attr,f=s.size,g=s.title,b=SZ(s,["attr","size","title"]),_=f||l.size||"1em",S;return l.className&&(S=l.className),s.className&&(S=(S?S+" ":"")+s.className),Ab.default.createElement("svg",mh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,h,b,{className:S,style:mh(mh({color:s.color||l.color},l.style),s.style),height:_,width:_,xmlns:"http://www.w3.org/2000/svg"}),g&&Ab.default.createElement("title",null,g),s.children)};return Z4!==void 0?Ab.default.createElement(Z4.Consumer,null,function(l){return a(l)}):a(Y4)}var Ab,mh,SZ,vAe=P(()=>{Ab=X(Ne()),wZ(),mh=function(){return mh=Object.assign||function(s){for(var a,l=1,h=arguments.length;l<h;l++){a=arguments[l];for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&(s[f]=a[f])}return s},mh.apply(this,arguments)},SZ=function(s,a){var l={};for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&a.indexOf(h)<0&&(l[h]=s[h]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,h=Object.getOwnPropertySymbols(s);f<h.length;f++)a.indexOf(h[f])<0&&Object.prototype.propertyIsEnumerable.call(s,h[f])&&(l[h[f]]=s[h[f]]);return l}}),ps=P(()=>{mAe(),vAe(),wZ()}),yAe=P(()=>{ps()}),bAe=P(()=>{ps()});function _Ae(s){return kb({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}}]})(s)}var wAe=P(()=>{ps()}),xAe=P(()=>{ps()}),SAe=P(()=>{ps()});function EAe(s){return kb({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.5 3L7 4.5 3.25 8 7 11.5 5.5 13l-5-5 5-5z"}}]})(s)}function CAe(s){return kb({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3l5 5z"}}]})(s)}var PAe=P(()=>{ps()}),TAe=P(()=>{ps()}),MAe=P(()=>{ps()}),kAe=P(()=>{ps()}),AAe=P(()=>{ps()}),IAe=P(()=>{ps()}),RAe=P(()=>{ps()}),DAe=P(()=>{ps()}),OAe=P(()=>{ps()}),LAe=P(()=>{ps()});function EZ(s){return kb({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(s)}var NAe=P(()=>{ps()}),FAe=P(()=>{ps()}),BAe=P(()=>{ps()}),UAe=P(()=>{ps()});function zAe(s){return kb({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M6 9.65685L7.41421 11.0711L11.6569 6.82843L15.8995 11.0711L17.3137 9.65685L11.6569 4L6 9.65685Z",fill:"currentColor"}},{tag:"path",attr:{d:"M6 14.4433L7.41421 13.0291L11.6569 17.2717L15.8995 13.0291L17.3137 14.4433L11.6569 20.1001L6 14.4433Z",fill:"currentColor"}}]})(s)}var VAe=P(()=>{ps()});function jAe(s){return kb({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 10.44l-.413.56H2.393L2 10.46 7.627 5h.827L14 10.44z"}}]})(s)}var HAe=P(()=>{ps()}),Ib=P(()=>{yAe(),bAe(),wAe(),xAe(),SAe(),PAe(),TAe(),MAe(),kAe(),AAe(),IAe(),RAe(),DAe(),OAe(),LAe(),NAe(),FAe(),BAe(),UAe(),VAe(),HAe()});function GAe({value:s,onChange:a,options:l,className:h,autoFocus:f}){let g=(0,ev.useCallback)(b=>{a(String(b.target.value))},[a]);return ev.default.createElement(PZ,null,ev.default.createElement(AZ,{className:h,value:s,onChange:g,autoFocus:f},Object.keys(l).map((b,_)=>ev.default.createElement("option",{key:"option-"+_,value:b},l[b]))),ev.default.createElement(MZ,null,ev.default.createElement(zAe,null)))}var ev,CZ,PZ,TZ,MZ,kZ,AZ,IZ,WAe=P(()=>{ev=X(Ne()),Ve(),Ib(),PZ=ae.div(CZ||(CZ=te([`
  width: 100%;
  position: relative;
`]))),MZ=ae.div(TZ||(TZ=te([`
  position: absolute;
  right: 0px;
  top: 0;
  bottom: 0;
  width: 1.5em;
  font-size: 14px;
  display: flex;
  align-items: center;
  color: #6b7280;
  pointer-events: none;
`]))),AZ=ae.select(kZ||(kZ=te([`
  appearance: none;
  background-color: transparent;
  box-sizing: border-box;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.85);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  text-align: left;
  width: 100%;
  border-radius: 2px;
  /*
  looks like putting percentages in the height of a select box doesn't work in Firefox. Not sure why.
  So we're hard-coding the height to 26px, unlike all other inputs that use a relative height.
  */
  height: 26px /* calc(100% - 4px); */;

  @supports (-moz-appearance: none) {
    /* Ugly hack to remove the extra left padding that shows up only in Firefox */
    text-indent: -2px;
  }

  &:hover,
  &:focus {
    background-color: #10101042;
    border-color: #00000059;
  }
`]))),IZ=GAe});function $Ae({propConfig:s,editingTools:a,value:l,autoFocus:h}){let f=(0,JI.useCallback)(g=>{a.permanentlySetValue(g)},[s,a]);return s.as==="menu"?JI.default.createElement(IZ,{value:l,onChange:f,options:s.valuesAndLabels,autoFocus:h}):JI.default.createElement(_Z,{value:l,onChange:f,options:s.valuesAndLabels,autoFocus:h})}var JI,RZ,KAe=P(()=>{JI=X(Ne()),fAe(),WAe(),RZ=$Ae}),DZ,pE,OZ,LZ,NZ,FZ,eR,Q4=P(()=>{Ve(),DZ=X(Ne()),pE=X(Ne()),YI(),Rr(),B4(),LZ=ae.input.attrs({type:"text"})(OZ||(OZ=te([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;
  border: 1px solid transparent;
  box-sizing: border-box;

  &:hover {
    background-color: #10101042;
    border-color: #00000059;
  }

  &:hover,
  &:focus {
    cursor: text;
    background-color: #10101042;
    border-color: #00000059;
  }

  &.invalid {
    border-color: red;
  }
`]))),NZ=s=>!0,FZ=s=>{var a,l;let[h]=xr({mode:"noFocus"}),f=(a=s.isValid)!=null?a:NZ,g=(0,pE.useRef)(s);g.current=s;let b=(0,pE.useRef)(null);F4(b.current,()=>{b.current.blur()},h.current.mode==="editingViaKeyboard");let _=(0,pE.useMemo)(()=>{let I=G=>{let $=G.target,{value:Y}=$,re=h.current;h.current=B(F({},re),{currentEditedValueInString:Y}),f(Y)&&g.current.temporarilySetValue(Y)},O=()=>{var G,$;h.current.mode==="editingViaKeyboard"&&(D(),h.current={mode:"noFocus"}),($=(G=g.current).onBlur)==null||$.call(G)},D=()=>{let G=h.current,$=G.currentEditedValueInString;f($)?G.valueBeforeEditing===$?g.current.discardTemporaryValue():g.current.permanentlySetValue($):g.current.discardTemporaryValue()},A=G=>{G.key==="Escape"?(g.current.discardTemporaryValue(),h.current={mode:"noFocus"},b.current.blur()):(G.key==="Enter"||G.key==="Tab")&&(D(),b.current.blur())},N=G=>{h.current.mode==="noFocus"&&(b.current.focus(),G.preventDefault()),G.stopPropagation()},L=()=>{h.current.mode==="noFocus"?V():h.current.mode},V=()=>{let G=g.current.value;h.current={mode:"editingViaKeyboard",currentEditedValueInString:String(G),valueBeforeEditing:G},setTimeout(()=>{b.current.focus()})};return{inputChange:I,onBlur:O,onInputKeyDown:A,onClick:N,onFocus:L}},[]);(0,DZ.useEffect)(()=>()=>{_.onBlur()},[]);let S=h.current.mode!=="editingViaKeyboard"?s.value:h.current.currentEditedValueInString,C=[b];return s.inputRef&&C.push(s.inputRef),pE.default.createElement(LZ,{key:"input",type:"text",className:"".concat((l=s.className)!=null?l:""," ").concat(f(S)?"":"invalid"),onChange:_.inputChange,value:S,onBlur:_.onBlur,onKeyDown:_.onInputKeyDown,onClick:_.onClick,onFocus:_.onFocus,ref:qI(C),onMouseDown:I=>{I.stopPropagation()},onDoubleClick:I=>{I.preventDefault(),I.stopPropagation()},autoFocus:s.autoFocus})},eR=FZ});function XAe({editingTools:s,value:a,autoFocus:l}){return BZ.default.createElement(eR,{value:a,temporarilySetValue:s.temporarilySetValue,discardTemporaryValue:s.discardTemporaryValue,permanentlySetValue:s.permanentlySetValue,autoFocus:l})}var BZ,UZ,qAe=P(()=>{BZ=X(Ne()),Q4(),UZ=XAe});function YAe(s){s=s.trim().toLowerCase();let a=s.match(tz);if(!a)return{r:0,g:0,b:0,a:1};let l=ZAe(a[1]);return{r:parseInt(l.substr(0,2),16)/255,g:parseInt(l.substr(2,2),16)/255,b:parseInt(l.substr(4,2),16)/255,a:parseInt(l.substr(6,2),16)/255}}function J4(s,{removeAlphaIfOpaque:a=!1}={}){let l=(s.a*255|256).toString(16).slice(1),h=(s.r*255|256).toString(16).slice(1)+(s.g*255|256).toString(16).slice(1)+(s.b*255|256).toString(16).slice(1)+(a&&l==="ff"?"":l);return"#".concat(h)}function ez(s){return B(F({},s),{toString(){return J4(this,{removeAlphaIfOpaque:!0})}})}function ZAe(s){switch(s.length){case 3:return"".concat(s.repeat(2),"ff");case 4:let a=s.substr(0,3),l=s[3];return"".concat(a.repeat(2)).concat(l.repeat(2));case 6:return"".concat(s,"ff")}return s}var tz,zZ=P(()=>{tz=/^#*([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i});function tR(s){let a=(0,nz.useRef)(s),l=(0,nz.useRef)(h=>{a.current&&a.current(h)});return a.current=s,l.current}var nz,VZ=P(()=>{nz=X(Ne())}),tv,nR=P(()=>{tv=(s,a=0,l=1)=>s>l?l:s<a?a:s}),fE,rz,jZ,iz,sz=P(()=>{fE=X(Ne()),rz=(0,fE.createContext)(void 0),jZ=({children:s})=>{let[a,l]=(0,fE.useState)(!1);return fE.default.createElement(rz.Provider,{value:{editing:a,setEditing:l}},s)},iz=()=>(0,fE.useContext)(rz)}),cf,Rb,HZ,rR,oz,az,GZ,WZ,$Z,KZ,mE,iR=P(()=>{cf=X(Ne()),VZ(),nR(),Ve(),sz(),Rb=s=>"touches"in s,HZ=(s,a)=>{for(let l=0;l<s.length;l++)if(s[l].identifier===a)return s[l];return s[0]},rR=s=>s&&s.ownerDocument.defaultView||self,oz=(s,a,l)=>{let h=s.getBoundingClientRect(),f=Rb(a)?HZ(a.touches,l):a;return{left:tv((f.pageX-(h.left+rR(s).pageXOffset))/h.width),top:tv((f.pageY-(h.top+rR(s).pageYOffset))/h.height)}},az=s=>{!Rb(s)&&s.preventDefault()},GZ=(s,a)=>a&&!Rb(s),$Z=ae.div(WZ||(WZ=te([`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  outline: none;
  /* Don't trigger the default scrolling behavior when the event is originating from this element */
  touch-action: none;
`]))),KZ=s=>{var a=s,{onMove:l,onKey:h}=a,f=z(a,["onMove","onKey"]);let g=(0,cf.useRef)(null),b=tR(l),_=tR(h),S=(0,cf.useRef)(null),C=(0,cf.useRef)(!1),{setEditing:I}=iz(),[O,D,A]=(0,cf.useMemo)(()=>{let N=({nativeEvent:Y})=>{let re=g.current;if(re&&(az(Y),!(GZ(Y,C.current)||!re))){if(Rb(Y)){C.current=!0;let ne=Y.changedTouches||[];ne.length&&(S.current=ne[0].identifier)}re.focus(),I(!0),b(oz(re,Y,S.current)),$(!0)}},L=Y=>{az(Y),(Rb(Y)?Y.touches.length>0:Y.buttons>0)&&g.current?b(oz(g.current,Y,S.current)):(I(!1),$(!1))},V=Y=>{I(!1),$(!1)},G=Y=>{let re=Y.which||Y.keyCode;re<37||re>40||(Y.preventDefault(),_({left:re===39?.05:re===37?-.05:0,top:re===40?.05:re===38?-.05:0}))};function $(Y){let re=C.current,ne=g.current,le=rR(ne),Ce=Y?le.addEventListener:le.removeEventListener;Ce(re?"touchmove":"mousemove",L),Ce(re?"touchend":"mouseup",V)}return[N,G,$]},[_,b]);return(0,cf.useEffect)(()=>A,[A]),cf.default.createElement($Z,B(F({},f),{onTouchStart:O,onMouseDown:O,ref:g,onKeyDown:D,tabIndex:0,role:"slider"}))},mE=cf.default.memo(KZ)}),lz,XZ,qZ,YZ,ZZ,QZ,JZ,sR,uz=P(()=>{lz=X(Ne()),Ve(),iR(),qZ=ae(mE)(XZ||(XZ=te([""]))),ZZ=ae.div(YZ||(YZ=te([`
  position: absolute;
  z-index: 1;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  transform: translate(-50%, -50%);
  background-color: #fff;
  border: 1px solid #ffffff00;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

  `,`:focus & {
    transform: translate(-50%, -50%) scale(1.1);
  }
`])),qZ),JZ=ae.div(QZ||(QZ=te([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;
`]))),sR=({className:s,color:a,left:l,top:h=.5})=>{let f={top:"".concat(h*100,"%"),left:"".concat(l*100,"%")};return lz.default.createElement(ZZ,{style:f,className:s},lz.default.createElement(JZ,{style:{backgroundColor:a}}))}}),No,oR=P(()=>{No=(s,a=0,l=Math.pow(10,a))=>Math.round(l*s)/l}),cz,aR,lR,eQ,tQ,uR=P(()=>{oR(),cz=({h:s,s:a,v:l,a:h})=>{let f=(200-a)*l/100;return{h:No(s),s:No(f>0&&f<200?a*l/100/(f<=100?f:200-f)*100:0),l:No(f/2),a:No(h,2)}},aR=s=>{let{h:a,s:l,l:h}=cz(s);return"hsl(".concat(a,", ").concat(l,"%, ").concat(h,"%)")},lR=s=>{let{h:a,s:l,l:h,a:f}=cz(s);return"hsla(".concat(a,", ").concat(l,"%, ").concat(h,"%, ").concat(f,")")},eQ=({h:s,s:a,v:l,a:h})=>{s=s/360*6,a=a/100,l=l/100;let f=Math.floor(s),g=l*(1-a),b=l*(1-(s-f)*a),_=l*(1-(1-s+f)*a),S=f%6;return{r:No([l,b,g,g,_,l][S]*255),g:No([_,l,l,b,g,g][S]*255),b:No([g,g,_,l,l,b][S]*255),a:No(h,2)}},tQ=({r:s,g:a,b:l,a:h})=>{let f=Math.max(s,a,l),g=f-Math.min(s,a,l),b=g?f===s?(a-l)/g:f===a?2+(l-s)/g:4+(s-a)/g:0;return{h:No(60*(b<0?b+6:b)),s:No(f?g/f*100:0),v:No(f/255*100),a:h}}}),gE,nQ,rQ,iQ,sQ,oQ,aQ,QAe=P(()=>{gE=X(Ne()),iR(),uz(),uR(),nR(),oR(),Ve(),rQ=ae.div(nQ||(nQ=te([`
  position: relative;
  height: 16px;
  border-radius: 2px;

  background: linear-gradient(
    to right,
    #f00 0%,
    #ff0 17%,
    #0f0 33%,
    #0ff 50%,
    #00f 67%,
    #f0f 83%,
    #f00 100%
  );
`]))),sQ=ae(sR)(iQ||(iQ=te([`
  z-index: 2;
`]))),oQ=({className:s,hue:a,onChange:l})=>gE.default.createElement(rQ,{className:s},gE.default.createElement(mE,{onMove:h=>{l({h:360*h.left})},onKey:h=>{l({h:tv(a+h.left*360,0,360)})},"aria-label":"Hue","aria-valuetext":No(a)},gE.default.createElement(sQ,{left:a/360,color:aR({h:a,s:100,v:100,a:1})}))),aQ=gE.default.memo(oQ)}),vE,lQ,uQ,cQ,dQ,hQ,pQ,JAe=P(()=>{vE=X(Ne()),iR(),uz(),uR(),nR(),oR(),Ve(),uQ=ae.div(lQ||(lQ=te([`
  position: relative;
  flex-grow: 1;
  border-color: transparent; /* Fixes https://github.com/omgovich/react-colorful/issues/139 */
  border-bottom: 12px solid #000;
  border-radius: 2px;
  background-image: linear-gradient(to top, #000, rgba(0, 0, 0, 0)),
    linear-gradient(to right, #fff, rgba(255, 255, 255, 0));

  // Improve elements rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),dQ=ae(sR)(cQ||(cQ=te([`
  z-index: 3;
`]))),hQ=({hsva:s,onChange:a})=>{let l=g=>{a({s:g.left*100,v:100-g.top*100})},h=g=>{a({s:tv(s.s+g.left*100,0,100),v:tv(s.v-g.top*100,0,100)})},f={backgroundColor:aR({h:s.h,s:100,v:100,a:1})};return vE.default.createElement(uQ,{style:f},vE.default.createElement(mE,{onMove:l,onKey:h,"aria-label":"Color","aria-valuetext":"Saturation ".concat(No(s.s),"%, Brightness ").concat(No(s.v),"%")},vE.default.createElement(dQ,{top:1-s.v/100,left:s.s/100,color:aR(s)})))},pQ=vE.default.memo(hQ)}),yE,fQ,mQ,gQ,vQ,yQ,bQ,_Q,e2e=P(()=>{yE=X(Ne()),iR(),uz(),uR(),nR(),oR(),Ve(),mQ=ae.div(fQ||(fQ=te([`
  position: relative;
  height: 16px;
  border-radius: 2px;
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),vQ=ae.div.attrs(({colorFrom:s,colorTo:a})=>({style:{backgroundImage:"linear-gradient(90deg, ".concat(s,", ").concat(a,")")}}))(gQ||(gQ=te([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;

  // Improve rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),bQ=ae(sR)(yQ||(yQ=te([`
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),_Q=({className:s,hsva:a,onChange:l})=>{let h=_=>{l({a:_.left})},f=_=>{l({a:tv(a.a+_.left)})},g=lR(Object.assign({},a,{a:0})),b=lR(Object.assign({},a,{a:1}));return yE.default.createElement(mQ,{className:s},yE.default.createElement(vQ,{colorFrom:g,colorTo:b}),yE.default.createElement(mE,{onMove:h,onKey:f,"aria-label":"Alpha","aria-valuetext":"".concat(No(a.a*100),"%")},yE.default.createElement(bQ,{left:a.a,color:lR(a)})))}}),cR,wQ=P(()=>{cR=(s,a)=>{if(s===a)return!0;for(let l in s)if(s[l]!==a[l])return!1;return!0}});function t2e(s,a,l,h){let{editing:f}=iz(),[g,b]=(0,gh.useState)(a),_=tR(l),S=tR(h),C=f?g:a,[I,O]=(0,gh.useState)(()=>s.toHsva(C)),D=(0,gh.useRef)({color:C,hsva:I}),A=(0,gh.useRef)({color:C,hsva:I});(0,gh.useEffect)(()=>{f&&b(D.current.color)},[f]),(0,gh.useEffect)(()=>{let L=s.fromHsva(I);f?!cR(I,D.current.hsva)&&!s.equal(L,D.current.color)&&(D.current={hsva:I,color:L},b(L),_(L)):!cR(I,A.current.hsva)&&!s.equal(L,A.current.color)&&(A.current={hsva:I,color:L},D.current={hsva:I,color:L},S(L))},[f,I,s,_,S]),(0,gh.useEffect)(()=>{if(!f&&!s.equal(C,A.current.color)){let L=s.toHsva(C);A.current={hsva:L,color:C},O(L)}},[f,C,s]);let N=(0,gh.useCallback)(L=>{O(V=>Object.assign({},V,L))},[]);return[I,N]}var gh,n2e=P(()=>{gh=X(Ne()),wQ(),VZ(),sz()}),Db,xQ,SQ,EQ,r2e=P(()=>{Db=X(Ne()),QAe(),JAe(),e2e(),n2e(),Ve(),SQ=ae.div(xQ||(xQ=te([`
  position: relative;
  display: flex;
  gap: 4px;
  flex-direction: column;
  width: 200px;
  height: 200px;
  user-select: none;
  cursor: default;
`]))),EQ=s=>{var a=s,{className:l,colorModel:h,color:f=h.defaultColor,temporarilySetValue:g,permanentlySetValue:b,discardTemporaryValue:_}=a,S=z(a,["className","colorModel","color","temporarilySetValue","permanentlySetValue","discardTemporaryValue"]);let[C,I]=t2e(h,f,g,b);return(0,Db.useEffect)(()=>()=>{_()},[]),Db.default.createElement(SQ,F({},S),Db.default.createElement(pQ,{hsva:C,onChange:I}),Db.default.createElement(aQ,{hue:C.h,onChange:I}),Db.default.createElement(_Q,{hsva:C,onChange:I}))}}),dz,CQ,PQ,TQ,MQ,i2e=P(()=>{dz=X(Ne()),r2e(),wQ(),uR(),sz(),CQ=s=>({r:s.r/255,g:s.g/255,b:s.b/255,a:s.a}),PQ=s=>({r:s.r*255,g:s.g*255,b:s.b*255,a:s.a}),TQ={defaultColor:{r:0,g:0,b:0,a:1},toHsva:s=>tQ(PQ(s)),fromHsva:s=>CQ(eQ(s)),equal:cR},MQ=s=>dz.default.createElement(jZ,null,dz.default.createElement(EQ,B(F({},s),{permanentlySetValue:a=>{s.permanentlySetValue(a)},colorModel:TQ})))}),s2e=P(()=>{i2e()}),kQ,AQ,IQ,o2e=P(()=>{kQ=X(Ne()),AQ=function(s){(0,kQ.useEffect)(s,[])},IQ=AQ}),RQ,DQ,OQ,a2e=P(()=>{RQ=X(Ne()),o2e(),DQ=function(s){var a=(0,RQ.useRef)(s);a.current=s,IQ(function(){return function(){return a.current()}})},OQ=DQ}),dR,LQ,NQ,l2e=P(()=>{dR=X(Ne()),a2e(),LQ=function(s){var a=(0,dR.useRef)(0),l=(0,dR.useState)(s),h=l[0],f=l[1],g=(0,dR.useCallback)(function(b){cancelAnimationFrame(a.current),a.current=requestAnimationFrame(function(){f(b)})},[]);return OQ(function(){cancelAnimationFrame(a.current)}),[h,g]},NQ=LQ});function u2e(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];s&&s.addEventListener&&s.addEventListener.apply(s,a)}function c2e(s){for(var a=[],l=1;l<arguments.length;l++)a[l-1]=arguments[l];s&&s.removeEventListener&&s.removeEventListener.apply(s,a)}var hR,d2e=P(()=>{hR=typeof window<"u"}),FQ,BQ,pR,hz=P(()=>{FQ=X(Ne()),l2e(),d2e(),BQ=function(s,a){s===void 0&&(s=1/0),a===void 0&&(a=1/0);var l=NQ({width:hR?window.innerWidth:s,height:hR?window.innerHeight:a}),h=l[0],f=l[1];return(0,FQ.useEffect)(function(){if(hR){var g=function(){f({width:window.innerWidth,height:window.innerHeight})};return u2e(window,"resize",g),function(){c2e(window,"resize",g)}}},[]),h},pR=BQ});function pz(s){let[a,l]=(0,fz.useState)(null);return(0,fz.useLayoutEffect)(()=>(s&&l(s.getBoundingClientRect()),()=>{l(null)}),[s]),a}var fz,UQ=P(()=>{fz=X(Ne())}),zQ,VQ,mz,jQ=P(()=>{zQ=X(Ne()),VQ=(0,zQ.createContext)({}),mz=VQ});function h2e(s,a,l){let h=s.getBoundingClientRect(),f=g=>{(g.clientX<h.left-a||g.clientX>h.left+h.width+a||g.clientY<h.top-a||g.clientY>h.top+h.height+a)&&l(g)};return window.addEventListener("mousemove",f),()=>{window.removeEventListener("mousemove",f)}}var p2e=P(()=>{}),HQ,fR,gz,GQ,vz,WQ=P(()=>{HQ=X(Ne()),fR=X(Ne()),hz(),UQ(),jQ(),Rr(),B4(),p2e(),Eb(),di(),gz=8,GQ=s=>{var a,l;let h=s.children(),[f,g]=xr(null),b=h.props.style?F({},h.props.style):{};b.position="absolute";let _=pz(g),S=pz(s.target),C=pR(),[I,O]=(0,fR.useState)({});return(0,fR.useLayoutEffect)(()=>{var D,A,N;if(!_||!g||!S)return;let L=(D=s.verticalGap)!=null?D:8,V={},G=(A=s.verticalPlacement)!=null?A:"bottom",$=0,Y=0;G==="bottom"?S.bottom+_.height+L<C.height?(G="bottom",$=S.bottom+L,V.top="0px"):S.top>_.height+L?(G="top",$=S.top-(_.height+L),V.bottom="0px",V.transform="rotateZ(180deg)"):G="overlay":G==="top"&&(S.top>_.height+L?(G="top",$=S.top-(_.height+L),V.bottom="0px",V.transform="rotateZ(180deg)"):S.bottom+_.height+L<C.height?(G="bottom",$=S.bottom+L,V.top="0px"):G="overlay");let re=0;if(G!=="overlay"){let Le=S.left+S.width/2;Le<_.width/2?(Y=L,re=Math.max(Le-L,gz)):Le+_.width/2>C.width?(Y=C.width-(L+_.width),re=Math.min(Le-Y,_.width-gz)):(Y=Le-_.width/2,re=_.width/2),V.left=re+"px"}let{minX:ne=-1/0,maxX:le=1/0,minY:Ce=-1/0,maxY:ve=1/0}=(N=s.constraints)!=null?N:{},we={left:_i(Y,ne,le-_.width),top:_i($,Ce,ve+_.height)};if(g.style.left=we.left+"px",g.style.top=we.top+"px",O(V),s.onPointerOutside)return h2e(g,s.onPointerOutside.threshold,s.onPointerOutside.callback)},[_,g,s.target,S,C,s.onPointerOutside]),F4([g,(a=s.target)!=null?a:null],(l=s.onClickOutside)!=null?l:ju),HQ.default.createElement(mz.Provider,{value:I},(0,fR.cloneElement)(h,{ref:f,style:b}))},vz=GQ});function $c(s,a){let l=(...A)=>{},{isPointerBeingCaptured:h}=eZ("usePopover"),[f,g]=xr({isOpen:!1}),b=(0,Fo.useRef)(s),_=(0,Fo.useCallback)(A=>{f.current={isOpen:!1}},[]),S=(0,Fo.useCallback)((A,N)=>{var L;let V=typeof b.current=="function"?b.current():b.current;function G(){I.childHasFocusRef.current||V.closeOnClickOutside!==!1&&_("clicked outside popover")}f.current={isOpen:!0,clickPoint:{clientX:A.clientX,clientY:A.clientY},target:N,opts:V,onClickOutside:G,onPointerOutside:V.closeWhenPointerIsDistant===!1?void 0:{threshold:(L=V.pointerDistanceThreshold)!=null?L:100,callback:()=>{I.childHasFocusRef.current||h()||_("pointer outside")}}}},[]),C=(0,Fo.useCallback)((...A)=>{f.current.isOpen?_("toggled"):S(...A)},[]),I=f2e({_debug:l,state:g}),[,O]=(0,Fo.useContext)($E);(0,Fo.useEffect)(()=>{let A;return g.isOpen&&(A=O()),()=>A==null?void 0:A()},[g.isOpen]);let D=(0,Fo.useContext)(wb);return{node:g.isOpen?(0,$Q.createPortal)(Fo.default.createElement(yz.Provider,{value:I.childPopoverLock},Fo.default.createElement(vz,{children:a,target:g.target,onClickOutside:g.onClickOutside,onPointerOutside:g.onPointerOutside,constraints:g.opts.constraints,verticalGap:g.opts.verticalGap})),D):Fo.default.createElement(Fo.default.Fragment,null),open:S,close:_,toggle:C,isOpen:g.isOpen}}function f2e(s){let a=(0,Fo.useContext)(yz);(0,Fo.useEffect)(()=>{if(s.state.isOpen){let h=a.takeFocus();return s._debug("take focus"),()=>{s._debug("release focus"),h.releaseFocus()}}},[s.state.isOpen]);let l=(0,Fo.useRef)(!1);return{childHasFocusRef:l,childPopoverLock:{takeFocus(){return l.current=!0,{releaseFocus(){l.current=!1}}}}}}var Fo,$Q,yz,Kc=P(()=>{j4(),Rr(),Fo=X(Ne()),$Q=X(Du()),Jg(),WQ(),aV(),yz=Fo.default.createContext({takeFocus(){return{releaseFocus(){}}}})}),vh,KQ,XQ,qQ,YQ,ZQ,QQ,JQ,eJ,tJ,nJ,rJ,iJ,m2e=P(()=>{vh=X(Ne()),Ve(),jQ(),XQ=ae.div(KQ||(KQ=te([`
  position: absolute;
  width: 0;
  height: 0;
  color: var(--popover-arrow-color);
  pointer-events: none;
`]))),YQ=ae.div(qQ||(qQ=te([`
  width: 12px;
  height: 8px;
  position: absolute;
  left: -7px;
  top: -8px;
  text-align: center;
  line-height: 0;
`]))),QQ=ae.path(ZQ||(ZQ=te([`
  fill: var(--popover-bg);
`]))),eJ=ae.path(JQ||(JQ=te([`
  fill: var(--popover-inner-stroke);
`]))),nJ=ae.path(tJ||(tJ=te([`
  fill: var(--popover-outer-stroke);
`]))),rJ=(0,vh.forwardRef)(({className:s},a)=>{let l=(0,vh.useContext)(mz);return vh.default.createElement(XQ,{className:s,ref:a,style:F({},l)},vh.default.createElement(YQ,null,vh.default.createElement("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},vh.default.createElement(nJ,{d:"M6 0L0 6H12L6 0Z"}),vh.default.createElement(eJ,{d:"M6 1.5L0 7.5H12L6 1.5Z"}),vh.default.createElement(QQ,{d:"M6 3L0 9H12L6 3Z"}))))}),iJ=rJ}),mR,bz,sJ,oJ,aJ,Xc,qc=P(()=>{Dr(),il(),mR=X(Ne()),Ve(),m2e(),bz=Vu(.05,"#2a2a31"),oJ=ae.div(sJ||(sJ=te([`
  position: absolute;
  --popover-bg: `,`;
  --popover-inner-stroke: #505159;
  --popover-outer-stroke: #111;

  background: var(--popover-bg);

  color: white;
  padding: 0;
  margin: 0;
  cursor: default;
  `,`;
  border-radius: 3px;
  z-index: 10000;
  border: 1px solid var(--popover-inner-stroke);
  box-shadow: 0 0 0 1px var(--popover-outer-stroke), 0 6px 8px -4px black;
  backdrop-filter: blur(8px);

  & a {
    color: inherit;
  }
`])),bz,kr),aJ=mR.default.forwardRef(({children:s,className:a,showPopoverEdgeTriangle:l=!0},h)=>mR.default.createElement(oJ,{className:a,ref:h},l?mR.default.createElement(iJ,null):void 0,s)),Xc=aJ});function g2e({editingTools:s,value:a,autoFocus:l}){let h=(0,Yc.useRef)(null),f=(0,Yc.useCallback)(b=>{let _=ez(YAe(b));s.permanentlySetValue(_)},[s]),g=$c({debugName:"RgbaPropEditor"},()=>Yc.default.createElement(mJ,null,Yc.default.createElement(MQ,{color:{r:a.r,g:a.g,b:a.b,a:a.a},temporarilySetValue:b=>{let _=ez(b);s.temporarilySetValue(_)},permanentlySetValue:b=>{let _=ez(b);s.permanentlySetValue(_)},discardTemporaryValue:s.discardTemporaryValue})));return Yc.default.createElement(Yc.default.Fragment,null,Yc.default.createElement(uJ,null,Yc.default.createElement(dJ,{rgbaColor:a,ref:h,onClick:b=>{g.toggle(b,h.current)}}),Yc.default.createElement(pJ,{value:J4(a,{removeAlphaIfOpaque:!0}),temporarilySetValue:_z,discardTemporaryValue:_z,permanentlySetValue:f,isValid:b=>!!b.match(tz),autoFocus:l})),g.node)}var Yc,lJ,uJ,cJ,dJ,hJ,pJ,_z,fJ,mJ,gJ,v2e=P(()=>{zZ(),zZ(),Yc=X(Ne()),s2e(),Ve(),Kc(),Q4(),qc(),uJ=ae.div(lJ||(lJ=te([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),dJ=ae.div.attrs(s=>({style:{background:J4(s.rgbaColor)}}))(cJ||(cJ=te([`
  height: 18px;
  aspect-ratio: 1;
  border-radius: 99999px;
`]))),pJ=ae(eR)(hJ||(hJ=te([`
  flex: 1;
`]))),_z=()=>{},mJ=ae.div(fJ||(fJ=te([`
  position: absolute;
  background-color: `,`;
  color: white;
  margin: 0;
  cursor: default;
  border-radius: 3px;
  z-index: 10000;
  backdrop-filter: blur(8px);

  padding: 4px;
  pointer-events: all;

  border: none;
  box-shadow: none;
`])),bz),gJ=g2e});function y2e({propConfig:s,editingTools:a,value:l,autoFocus:h}){let[f,g]=Gu.default.useState();(0,Gu.useEffect)(()=>{g(l?a.getAssetUrl(l):void 0)},[l]);let b=(0,Gu.useCallback)(S=>ie(this,null,function*(){let C=S.target.files[0];a.permanentlySetValue({type:"image",id:void 0});let I=yield a.createAsset(C);I?a.permanentlySetValue({type:"image",id:I}):a.permanentlySetValue(l),S.target.value=null}),[a,l]),_=!(l!=null&&l.id);return Gu.default.createElement(wz,{empty:_},Gu.default.createElement(SJ,{empty:_,title:_?"Upload image":'"'.concat(l.id,'" (Click to upload new image)')},Gu.default.createElement(CJ,{type:"file",onChange:b,accept:"image/*,.hdr",autoFocus:h}),f?Gu.default.createElement(TJ,{src:f}):Gu.default.createElement(bJ,null)),!_&&Gu.default.createElement(kJ,{title:"Delete image",onClick:()=>{a.permanentlySetValue({type:"image",id:void 0})}},Gu.default.createElement(M4,null)))}var Gu,vJ,wz,yJ,bJ,_J,wJ,xJ,SJ,EJ,CJ,PJ,TJ,MJ,kJ,AJ,b2e=P(()=>{oE(),Gu=X(Ne()),Ve(),wz=ae.div(vJ||(vJ=te([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),bJ=ae.div(yJ||(yJ=te([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),SJ=ae.label(xJ||(xJ=te([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),s=>s.empty?lo(_J||(_J=te([""]))):lo(wJ||(wJ=te([""])))),CJ=ae.input.attrs({type:"file"})(EJ||(EJ=te([`
  display: none;
`]))),TJ=ae.img(PJ||(PJ=te([`
  position: absolute;
  inset: 0;
  height: 100%;
  aspect-ratio: 1;

  object-fit: cover;
`]))),kJ=ae.button(MJ||(MJ=te([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),wz),AJ=y2e});function _2e({propConfig:s,editingTools:a,value:l,autoFocus:h}){let[f,g]=Wu.default.useState();(0,Wu.useEffect)(()=>{g(l?a.getAssetUrl(l):void 0)},[l]);let b=(0,Wu.useCallback)(S=>ie(this,null,function*(){let C=S.target.files[0];a.permanentlySetValue({type:"file",id:void 0});let I=yield a.createAsset(C);I?a.permanentlySetValue({type:"file",id:I}):a.permanentlySetValue(l),S.target.value=null}),[a,l]),_=!(l!=null&&l.id);return Wu.default.createElement(xz,{empty:_},Wu.default.createElement(FJ,{empty:_,title:_?"Upload file":'"'.concat(l.id,'" (Click to upload new file)')},Wu.default.createElement(UJ,{type:"file",onChange:b,autoFocus:h}),f?Wu.default.createElement(C4,null):Wu.default.createElement(DJ,null)),!_&&Wu.default.createElement(VJ,{title:"Delete file",onClick:()=>{a.permanentlySetValue({type:"file",id:void 0})}},Wu.default.createElement(M4,null)))}var Wu,IJ,xz,RJ,DJ,OJ,LJ,NJ,FJ,BJ,UJ,zJ,VJ,jJ,w2e=P(()=>{oE(),Wu=X(Ne()),Ve(),xz=ae.div(IJ||(IJ=te([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),DJ=ae.div(RJ||(RJ=te([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),FJ=ae.label(NJ||(NJ=te([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),s=>s.empty?lo(OJ||(OJ=te([""]))):lo(LJ||(LJ=te([""])))),UJ=ae.input.attrs({type:"file"})(BJ||(BJ=te([`
  display: none;
`]))),VJ=ae.button(zJ||(zJ=te([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),xz),jJ=_2e}),Sz,HJ=P(()=>{oAe(),fZ(),KAe(),qAe(),v2e(),b2e(),w2e(),Sz={number:K4,string:UZ,boolean:GY,stringLiteral:RZ,rgba:gJ,image:AJ,file:jJ}});function bE(s){let a=new WeakMap;return l=>(a.has(l)||a.set(l,s(l)),a.get(l))}var gR=P(()=>{});function Zc(s){return s.type==="compound"||s.type==="enum"}function vR(s,a){if(!s)return;let[l,...h]=a;if(l===void 0)return s;if(!Zc(s))return;let f=s.type==="enum"?s.cases[l]:s.props[l];return vR(f,h)}function yR(s,a){let l=a.deserializeAndSanitize(s);return l===void 0?a.default:l}function x2e(s){return!Zc(s)}function*_E(s,a){if(s.type==="compound")for(let l in s.props)yield*_t(_E(s.props[l],[...a,l]));else{if(s.type==="enum")throw new Error("Not implemented yet");return yield{path:a,conf:s}}}var Ez,df=P(()=>{gR(),Ez=bE(s=>{if(s.type==="enum")throw new Error("Not implemented yet for enums");for(let a in s.props){let l=s.props[a];if(Zc(l)){if(Ez(l))return!0}else return!0}return!1})}),Cz,GJ=P(()=>{Cz="calc(var(--left-pad) + var(--depth) * var(--step))"}),WJ,hf,nv=P(()=>{Ve(),hf=lo(WJ||(WJ=te([`
  font-weight: 300;
  font-size: 11px;
  color: `,`;
  text-shadow: 0.5px 0.5px 2px rgba(0, 0, 0, 0.3);
`])),s=>s.isHighlighted==="self"?"#CCC":"#919191")}),wE,bR,$J,KJ,XJ,qJ,YJ,ZJ,QJ=P(()=>{Eb(),wE=X(Ne()),Ve(),bR=26,KJ=ae.li($J||($J=te([`
  height: `,`px;
  padding: 0 12px;
  margin: 0;
  display: flex;
  align-items: center;
  font-size: 11px;
  font-weight: 400;
  position: relative;
  color: `,`;
  cursor: `,`;

  &:after {
    position: absolute;
    inset: 2px 1px;
    display: block;
    content: ' ';
    pointer-events: none;
    z-index: -1;
    border-radius: 3px;
  }

  &:hover:after {
    background-color: `,`;
  }
`])),bR,s=>s.enabled?"white":"#8f8f8f",s=>s.enabled?"normal":"not-allowed",s=>s.enabled?"rgba(63, 174, 191, 0.75)":"initial"),qJ=ae.span(XJ||(XJ=te([""]))),YJ=s=>wE.default.createElement(KJ,{onClick:s.enabled?s.onClick:ju,enabled:s.enabled,title:s.enabled?void 0:"Disabled"},wE.default.createElement(qJ,null,wE.default.createElement(wE.default.Fragment,null,s.label))),ZJ=YJ});function S2e(s){let a=(0,Pz.useRef)(s);a.current=s,(0,Pz.useEffect)(()=>{let l=h=>a.current(h);return window.addEventListener("keydown",l),()=>{window.removeEventListener("keydown",l)}},[])}var Pz,E2e=P(()=>{Pz=X(Ne())}),xE,JJ,eee,tee,nee,ree,iee,see,Tz,oee=P(()=>{xE=X(Ne()),QJ(),Ve(),il(),Dr(),JJ=190,eee=!0,nee=ae.ul(tee||(tee=te([`
  position: absolute;
  min-width: `,`px;
  z-index: 10000;
  background: `,`;
  backdrop-filter: blur(2px);
  color: white;
  list-style-type: none;
  padding: 2px 0;
  margin: 0;
  border-radius: 1px;
  cursor: default;
  `,`;
  border-radius: 3px;
`])),JJ,Vu(.2,"#111"),kr),iee=ae.div(ree||(ree=te([`
  padding: 4px 10px;
  border-bottom: 1px solid #6262626d;
  color: #adadadb3;
  font-size: 11px;
  font-weight: 500;
`]))),see=xE.default.forwardRef((s,a)=>xE.default.createElement(nee,{ref:a},eee&&s.displayName?xE.default.createElement(iee,null,s.displayName):null,s.items.map((l,h)=>xE.default.createElement(ZJ,{key:"item-".concat(h),label:l.label,enabled:l.enabled!==!1,onClick:f=>{l.callback&&l.callback(f),s.onRequestClose()}})))),Tz=see}),aee,lee,_R,uee,SE,cee,dee,C2e=P(()=>{UQ(),aee=X(Ne()),lee=X(Ne()),_R=X(Ne()),uee=X(Du()),hz(),QJ(),Jg(),E2e(),oee(),SE=20,cee=s=>{let[a,l]=(0,_R.useState)(null),h=pz(a),f=pR();(0,_R.useLayoutEffect)(()=>{if(!h||!a)return;let _={left:h.width/2,top:bR/2+(s.displayName?bR:0)},S={left:s.clickPoint.clientX-_.left,top:s.clickPoint.clientY-_.top};S.left<0?S.left=0:S.left+h.width>f.width&&(S.left=f.width-h.width),S.top<0?S.top=0:S.top+h.height>f.height&&(S.top=f.height-h.height),a.style.left=S.left+"px",a.style.top=S.top+"px";let C=I=>{(I.clientX<S.left-SE||I.clientX>S.left+h.width+SE||I.clientY<S.top-SE||I.clientY>S.top+h.height+SE)&&s.onRequestClose()};return window.addEventListener("mousemove",C),()=>{window.removeEventListener("mousemove",C)}},[h,a,s.clickPoint,f,s.onRequestClose]);let g=(0,lee.useContext)(wb);S2e(_=>{_.key==="Escape"&&s.onRequestClose()});let b=(0,aee.useMemo)(()=>{let _=Array.isArray(s.items)?s.items:s.items();return _.length>0?_:[{label:s.displayName?"No actions for ".concat(s.displayName):"No actions found",enabled:!1}]},[s.items]);return(0,uee.createPortal)(_R.default.createElement(Tz,{items:b,onRequestClose:s.onRequestClose,displayName:s.displayName,ref:l}),g)},dee=cee}),wR,hee,pee,P2e=P(()=>{wR=X(Ne()),hee=(s,a)=>{let[l,h]=(0,wR.useState)({isOpen:!1}),f=(0,wR.useCallback)(()=>h({isOpen:!1}),[]);return(0,wR.useEffect)(()=>{if(!s||a.disabled===!0){h({isOpen:!1});return}let g=b=>{h({isOpen:!0,event:b}),b.preventDefault(),b.stopPropagation()};return s.addEventListener("contextmenu",g),()=>{s.removeEventListener("contextmenu",g)}},[s,a.disabled]),[l,f]},pee=hee});function aa(s,a){let[l,h]=pee(s,a),[,f]=(0,Ob.useContext)($E);return(0,Ob.useEffect)(()=>{var g;let b;return l.isOpen&&((g=a.onOpen)==null||g.call(a),b=f()),()=>b==null?void 0:b()},[l.isOpen,a.onOpen]),[l.isOpen?Ob.default.createElement(dee,{items:a.menuItems,displayName:a.displayName,clickPoint:l.event,onRequestClose:h}):fee,h,l.isOpen]}var Ob,fee,la=P(()=>{Ob=X(Ne()),C2e(),P2e(),aV(),fee=Ob.default.createElement(Ob.default.Fragment,null)});function pf(s,a){return a.length===0?s:Zd(s,a)}var xR=P(()=>{Vp()});function mee(s,a){return s==null?null:s instanceof Element&&s.matches(a)?s:mee(s.parentElement,a)}var T2e=P(()=>{});function EE(s,a){let l=s;for(let h of a)l=l[h];return l}var SR=P(()=>{});function M2e(s){let a=new ER.Atom(void 0),l=new ER.Atom({}),h=new ER.Atom({}),f=0;return{addRelatedFlags(g,b){let _=String(++f),S=b.map(C=>{let I={flag:C.flag},O=[C.affects,g,_];return h.setByPointer(D=>EE(D,O),I),O});return()=>{for(let C of S)h.setByPointer(I=>EE(I,C),void 0)}},usePresenceFlag(g){if(!s.enabled)return;let b=(0,CE.useMemo)(()=>{if(!g)return kz;let _=a.prism,S=(0,PE.pointerToPrism)(l.pointer[g]),C=(0,PE.pointerToPrism)(h.pointer[g]);return(0,PE.prism)(()=>{if(S.getValue())return 2;{let I=C.getValue(),O=_.getValue(),D=I&&O&&I[O];if(D){let A;for(let N of Object.values(D))N&&(A&&A>=N.flag||(A=N.flag));return A}return}})},[g]);return Jy(b)},setUserHover(g){let b=a.get();b!==g&&(b&&l.setByPointer(_=>_[b],!1),a.set(g),g&&l.setByPointer(_=>_[g],!0))}}}function rv(s){let a=CE.default.useContext(Az),l=a.usePresenceFlag(s);return{attrs:{[CR]:s},flag:l,useRelations(h,f){(0,Mz.useEffect)(()=>s&&a.addRelatedFlags(s,h()),[s,...f])}}}function gee(s){let a=CE.default.useContext(Az),l=lf("PresenceListeners");(0,Mz.useEffect)(()=>{let h;if(!s)return;let f=g=>{if(g.target instanceof Node){let b=mee(g.target,"[".concat(CR,"]"));if(b){let _=b.getAttribute(CR);h!==_&&(h=_,a.setUserHover(_||void 0),l._debug("Updated current hover",{itemKey:_}));return}h!=null&&(h=null,a.setUserHover(void 0),l._debug("Cleared current hover"))}};return s.addEventListener("mouseover",f),()=>{s.removeEventListener("mouseover",f),h!=null&&(h=null,l._debug("Cleared current hover as part of cleanup"))}},[s,a])}var CE,Mz,PE,ER,kz,Az,CR,iv=P(()=>{CE=X(Ne()),Mz=X(Ne()),uf(),PE=Ut,ER=Ut,En(),T2e(),SR(),kz=(0,PE.prism)(()=>{}),kz.keepHot(),Az=CE.default.createContext(M2e({enabled:!1})),CR="data-pi-key"}),co,vee,TE,yee,Iz,ff,bee,Rz,_ee,wee,xee,PR,See,Eee,Cee,Pee,Tee,Mee,ME,kee,Dz,TR=P(()=>{Dr(),il(),co=X(Ne()),Ve(),iv(),TE=ae.div(vee||(vee=te([`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 16px;
  margin: 0 0px 0 2px;
  position: relative;
  z-index: 0;
  opacity: 0.7;

  &:after {
    position: absolute;
    left: -14px;
    right: -14px;
    top: -2px;
    bottom: -2px;
    content: ' ';
    display: none;
    z-index: -1;
    background: `,`;
  }

  &:hover {
    opacity: 1;
    &:after {
      display: block;
    }
  }
`])),Vu(.2,"black")),Iz=ae.div(yee||(yee=te([`
  background: none;
  position: relative;
  border: 0;
  transition: transform 0.1s ease-out;
  z-index: 0;
  outline: none;
  cursor: pointer;

  &:after {
    display: none;
    `,`:hover & {
      display: block;
    }
    position: absolute;
    left: -4px;
    right: -4px;
    top: -4px;
    bottom: -4px;
    content: ' ';
    z-index: -1;
  }
`])),TE),ff={offColor:"#555",onColor:"#e0c917"},Rz=ae(Iz)(bee||(bee=te([`
  &:hover {
    color: #e0c917;
  }

  color: `,`;
`])),s=>s.presence===2?"white":s.isOn?ff.onColor:ff.offColor),wee=lo(_ee||(_ee=te([`
  pointer-events: none !important;
`]))),PR=ae(Iz)(xee||(xee=te([`
  color: `,`;

  `,`;
`])),s=>s.flag===2?"white":s.available?ff.onColor:ff.offColor,s=>s.available?kr:wee),Eee=ae(PR)(See||(See=te([`
  transform: translateX(2px);
  `,`:hover & {
    transform: translateX(-7px);
  }
`])),TE),Pee=ae(PR)(Cee||(Cee=te([`
  transform: translateX(-2px);
  `,`:hover & {
    transform: translateX(7px);
  }
`])),TE),(s=>{let a=ae.g(Tee||(Tee=te([`
    stroke-width: 1;
    `,`:hover & path {
      stroke-width: 3;
    }
  `])),PR);s.Prev=()=>co.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},co.default.createElement(a,{transform:"translate(6 3)"},co.default.createElement("path",{d:"M4 1L1 4L4 7",stroke:"currentColor"}))),s.Next=()=>co.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},co.default.createElement(a,{transform:"translate(1 3)"},co.default.createElement("path",{d:"M1 1L4 4L1 7",stroke:"currentColor"})));let l=ae.g(Mee||(Mee=te([`
    stroke-width: 0;
    `,`:hover & path {
      stroke: currentColor;
      stroke-width: 2;
    }
  `])),Rz);s.Cur=()=>co.default.createElement("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},co.default.createElement(l,{transform:"translate(1 4)"},co.default.createElement("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"currentColor"})))})(ME||(ME={})),kee=s=>{var a,l,h,f,g;let b=rv((a=s.prev)==null?void 0:a.itemKey),_=rv(((l=s.cur)==null?void 0:l.type)==="on"?s.cur.itemKey:void 0),S=rv((h=s.next)==null?void 0:h.itemKey);return co.default.createElement(TE,null,co.default.createElement(Eee,F({available:!!s.prev,onClick:(f=s.prev)==null?void 0:f.jump,flag:b.flag},b.attrs),co.default.createElement(ME.Prev,null)),co.default.createElement(Rz,F({isOn:s.cur.type==="on",onClick:s.cur.toggle,presence:_.flag},_.attrs),co.default.createElement(ME.Cur,null)),co.default.createElement(Pee,F({available:!!s.next,onClick:(g=s.next)==null?void 0:g.jump,flag:S.flag},S.attrs),co.default.createElement(ME.Next,null)))},Dz=kee}),MR,kE,Aee,Iee,Ree,Dee,Oee,Lee,Nee,AE,Fee=P(()=>{il(),MR=X(Ne()),Ve(),Me(),TR(),df(),kE={defaultState:{color:Vu(.95,"#C4C4C4"),hoverColor:Vu(.15,ff.onColor)},withStaticOverride:{color:Vu(.85,"#C4C4C4"),hoverColor:Vu(.15,ff.onColor)}},Iee=ae.div(Aee||(Aee=te([`
  width: 16px;
  margin: 0 0px 0 2px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  color: `,`;

  &:hover {
    color: `,`;
  }
`])),s=>s.hasStaticOverride?kE.withStaticOverride.color:kE.defaultState.color,s=>s.hasStaticOverride?kE.withStaticOverride.hoverColor:kE.defaultState.hoverColor),Dee=ae.div(Ree||(Ree=te([`
  width: 5px;
  height: 5px;
  border-radius: 1px;
  transform: rotate(45deg);
  /* border: 1px solid currentColor; */
  background-color: currentColor;
`]))),Lee=ae.div(Oee||(Oee=te([`
  width: 5px;
  height: 5px;
  background-color: currentColor;
  border-radius: 1px;
  transform: rotate(45deg);
`]))),Nee=s=>{let{hasStaticOverride:a,obj:l,propConfig:h,pathToProp:f}=s;return MR.default.createElement(Iee,{hasStaticOverride:a,onClick:()=>{de().transaction(({stateEditors:g})=>{for(let{path:b,conf:_}of _E(h,f)){if(Zc(_))continue;let S=B(F({},l.address),{pathToProp:b});g.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(S,h)}})},title:"Sequence this prop"},a?MR.default.createElement(Lee,{title:"The default value is overridden"}):MR.default.createElement(Dee,{title:"This is the default value for this prop"}))},AE=Nee});function IE(s){return JSON.stringify(Oz(s))}function Oz(s){return Ly(s)?Object.keys(s).sort().reduce((a,l)=>(a[l]=Oz(s[l]),a),{}):Array.isArray(s)?s.map(Oz):s}var k2e=P(()=>{di()}),Bee,RE,Uee=P(()=>{Bee="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",RE=(s=21)=>{let a="",l=s;for(;l--;)a+=Bee[Math.random()*64|0];return a}});function zee(){return RE(10)}function A2e(){return RE(10)}function I2e(){return RE(10)}var Ls,yh=P(()=>{k2e(),Uee(),Ls={forSheet(){return"sheet"},forSheetObject(s){return IE({o:s.address.objectKey})},forSheetObjectProp(s,a){return IE({o:s.address.objectKey,p:a})},forTrackKeyframe(s,a,l){return IE({o:s.address.objectKey,t:a,k:l})},forSheetObjectAggregateKeyframe(s,a){return Ls.forCompoundPropAggregateKeyframe(s,[],a)},forSheetAggregateKeyframe(s,a){return IE({o:s.address.sheetId,pos:a})},forCompoundPropAggregateKeyframe(s,a,l){return IE({o:s.address.objectKey,p:a,pos:l})}}});function Vee(s,a,l){if(!a||a.data.keyframes.length===0)return jee;let h=Lz.get(a.data);if(h&&h[0]===l)return h[1];function f(b){if(!a)return;let _=a.data.keyframes[b];return _&&{kf:_,track:a,itemKey:Ls.forTrackKeyframe(s,a.id,_.id)}}let g=(()=>{let b=a.data.keyframes.findIndex(S=>S.position>=l);if(b===-1)return{prev:f(a.data.keyframes.length-1)};let _=f(b);return _.kf.position===l?{prev:f(b-1),cur:_,next:f(b+1)}:{next:_,prev:f(b-1)}})();return Lz.set(a.data,[l,g]),g}var Lz,jee,Hee=P(()=>{yh(),Lz=new WeakMap,jee={}}),Nz,Gee=P(()=>{Nz={}});function R2e(s,a,l){let h=(0,Wl.getPointerParts)(s).path;return Qn(()=>{if(!Ez(l))return{type:"AllStatic",beingScrubbed:!1,contextMenuItems:[],controlIndicators:sv.default.createElement(AE,{hasStaticOverride:!1,obj:a,pathToProp:h,propConfig:l})};let f=!!(0,Wl.val)(Zd(de().atomP.ephemeral.projects.stateByProjectId[a.address.projectId].stateBySheetId[a.address.sheetId].stateByObjectKey[a.address.objectKey].valuesBeingScrubbed,(0,Wl.getPointerParts)(s).path)),g=[],b={beingScrubbed:f,contextMenuItems:g,controlIndicators:sv.default.createElement(sv.default.Fragment,null)},_=(0,Wl.val)(a.template.getMapOfValidSequenceTracks_forStudio()),S=pf(_,h),C=S!==void 0&&Object.keys(S).length!==0,I=[],O=(0,Wl.val)(a.template.getStaticButNotSequencedOverrides()),D=pf(O??Nz,h)!==void 0;if(C)for(let A of _E(l,[])){if(Zc(A.conf))continue;let N=pf(S,A.path);typeof N!="string"?D=!0:I.push(N)}if((D||C)&&g.push({label:"Reset all to default",callback:()=>{de().transaction(({unset:A})=>{A(s)})}}),C&&g.push({label:"Make all static",callback:()=>{de().transaction(({stateEditors:A})=>{for(let{path:N,conf:L}of _E(l,[])){if(Zc(L))continue;let V=B(F({},a.address),{pathToProp:[...h,...N]}),G=EE(s,N);A.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(B(F({},V),{value:a.getValueByPointer(G)}))}})}}),(!C||C&&D)&&g.push({label:"Sequence all",callback:()=>{de().transaction(({stateEditors:A})=>{for(let{path:N,conf:L}of _E(l,h)){if(Zc(L))continue;let V=B(F({},a.address),{pathToProp:N});A.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(V,l)}})}}),C){let A=Wl.prism.memo("controlIndicators",()=>sv.default.createElement(D2e,{pointerToProp:s,obj:a,possibleSequenceTrackIds:S,listOfDescendantTrackIds:I}),[S,I]);return B(F({},b),{type:"HasSequences",controlIndicators:A})}else return B(F({},b),{type:"AllStatic",controlIndicators:sv.default.createElement(AE,{hasStaticOverride:D,obj:a,pathToProp:h,propConfig:l})})},[])}function D2e({pointerToProp:s,obj:a,possibleSequenceTrackIds:l,listOfDescendantTrackIds:h}){return Qn(()=>{let f=(0,Wl.getPointerParts)(s).path,g=(0,Wl.val)(a.sheet.getSequence().positionPrism),b=h.map(A=>({trackId:A,track:(0,Wl.val)(a.template.project.pointers.historic.sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[A])})).filter(({track:A})=>!!A).map(A=>B(F({},A),{nearbies:Vee(a,{id:A.trackId,data:A.track,sheetObject:a},g)})),_=b.find(({nearbies:A})=>!!A.cur),S=b.every(({nearbies:A})=>!!A.cur),C=b.reduce((A,N)=>N.nearbies.prev&&(A===void 0||N.nearbies.prev.kf.position>A.kf.position)?N.nearbies.prev:A,void 0),I=b.reduce((A,N)=>N.nearbies.next&&(A===void 0||N.nearbies.next.kf.position<A.kf.position)?N.nearbies.next:A,void 0),O=()=>{S?de().transaction(A=>{A.unset(s)}):_?de().transaction(A=>{A.set(s,(0,Wl.val)(s))}):de().transaction(A=>{A.set(s,(0,Wl.val)(s))})},D={cur:_?{type:"on",itemKey:Ls.forCompoundPropAggregateKeyframe(a,f,g),toggle:O}:{toggle:O,type:"off"},prev:C!==void 0?{position:C.kf.position,itemKey:Ls.forCompoundPropAggregateKeyframe(a,f,C.kf.position),jump:()=>{a.sheet.getSequence().position=C.kf.position}}:void 0,next:I!==void 0?{position:I.kf.position,itemKey:Ls.forCompoundPropAggregateKeyframe(a,f,I.kf.position),jump:()=>{a.sheet.getSequence().position=I.kf.position}}:void 0};return sv.default.createElement(Dz,F({},D))},[s,a,l,h])}var Wl,sv,O2e=P(()=>{Me(),xR(),En(),Wl=Ut,Vp(),sv=X(Ne()),Fee(),df(),yh(),SR(),TR(),Hee(),Gee()});function L2e(){let s=0,a=new Kee.Atom({hasLock:!1});return{replaceLock(l,h){let f=s++,g=a.get();return g.hasLock&&g.cleanup(),a.set({hasLock:!0,lockId:f,cleanup:h,deepPath:N2e(Wee(l))}),function(){let b=a.get();b.hasLock&&b.lockId===f&&(b.cleanup(),a.set({hasLock:!1}))}},getIsPropHighlightedD(l){let h=EE(a.pointer.deepPath,Wee(l));return(0,Xee.prism)(()=>{let f=(0,$ee.val)(h);return f===!0?"self":f?"descendent":null})}}}function Wee(s){return[s.projectId,s.sheetId,s.objectKey,...s.pathToProp]}function N2e(s){let a={};return Xp(a,s,!0),a}var $ee,Kee,Xee,kR,Fz=P(()=>{$ee=Ut,Kee=Ut,Xee=Ut,SR(),Yy(),kR=L2e()});function F2e(s,a){return JSON.stringify(s,a,2).replace(/^([\{\[])\n (\s+)/,"$1$2").replace(/(\n[ ]+[\{\[])\n\s+/g,"$1 ").replace(/\n\s*([\]\}])/g," $1")}var B2e=P(()=>{});function qee(s,a=!0){try{return typeof s=="string"?s:typeof s=="function"||s instanceof Error?s.toString():a?F2e(s):JSON.stringify(s)}catch{return(s==null?void 0:s.name)||String(s)}}var U2e=P(()=>{B2e()});function z2e(s,a,l){s||(arguments.length>2?Yee(a,l):Yee(a))}function Yee(s,a){let l=arguments.length>1,h=qee(typeof s=="function"?s():s),f=l?`
Instead found: `.concat(qee(a)):"";throw new tte("Invariant: ".concat(h).concat(f),a)}var Zee,Qee,Jee,ete,tte,V2e=P(()=>{U2e(),Zee=/^\s*at.+node:internal.+/gm,Qee=/^\s*(at|[^@]+@) (?:Object\.)?invariant.+/gm,Jee=/^\s*(at|[^@]+@).+test\-helpers.+/gm,ete=/^\s*(at|[^@]+@).+(debounce|invariant|iif)\.[tj]s.*/gm,tte=class extends Error{constructor(s,a){var l;super(s),ye(this,"found"),a!==void 0&&(this.found=a),this.stack=(l=this.stack)==null?void 0:l.replace(Qee,"").replace(ete,"").replace(Jee,"").replace(Zee,"")}}});function j2e(s){return(0,AR.prism)(()=>{if(Array.isArray(s)){let a=new Array(s.length);for(let l=0;l<s.length;l++)a[l]=s[l].getValue();return a}else{let a={};for(let l in s)a[l]=(0,AR.val)(s[l]);return a}})}function Bz(s){let a=Lb.default.memo(Lb.default.forwardRef(function(l,h){let f=[],g={},b={ref:h};for(let I in l){let O=l[I];(0,AR.isPrism)(O)?(f.push(O),g[I]=O):b[I]=O}let _=(0,Lb.useRef)(f.length);z2e(_.current===f.length,"expect same number of observable props on every invocation of deriver wrapped component.",{initial:_.current,count:f.length});let S=(0,Lb.useMemo)(()=>j2e(g),f),C=Jy(S);return C&&Lb.default.createElement(s,F(F({},b),C))}));return a.displayName="deriver(".concat(s.displayName,")"),a}var AR,Lb,nte=P(()=>{AR=Ut,En(),Lb=X(Ne()),V2e()});function H2e(s,a,l){return(0,$u.prism)(()=>{var h;let f=(0,$u.getPointerParts)(s).path,g=a.getValueByPointer(s),b=$u.prism.memo("editPropValue",()=>{let N=null;return{temporarilySetValue(L){N||(N=de().scrub()),N.capture(V=>{V.set(s,L)})},discardTemporaryValue(){N&&(N.discard(),N=null)},permanentlySetValue(L){N?(N.capture(V=>{V.set(s,L)}),N.commit(),N=null):de().transaction(V=>{V.set(s,L)})}}},[]),_={createAsset:N=>a.sheet.project.assetStorage.createAsset(N),getAssetUrl:N=>N.id?a.sheet.project.assetStorage.getAssetUrl(N.id):void 0},S=(0,$u.val)(Zd(de().atomP.ephemeral.projects.stateByProjectId[a.address.projectId].stateBySheetId[a.address.sheetId].stateByObjectKey[a.address.objectKey].valuesBeingScrubbed,(0,$u.getPointerParts)(s).path))===!0,C=[],I=B(F(F({},b),_),{value:g,beingScrubbed:S,contextMenuItems:C,controlIndicators:Nb.default.createElement(Nb.default.Fragment,null)}),O=x2e(l);if(O){let N=(0,$u.val)(a.template.getMapOfValidSequenceTracks_forStudio()),L=pf(N,f);if(typeof L=="string"){C.push({label:"Make static",callback:()=>{de().transaction(({stateEditors:le})=>{let Ce=B(F({},a.address),{pathToProp:f});le.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(B(F({},Ce),{value:a.getValueByPointer(s)}))})}});let V=L,G=$u.prism.sub("lcr",()=>{let le=(0,$u.val)(a.template.project.pointers.historic.sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[V]),Ce=(0,$u.val)(a.sheet.getSequence().positionPrism);return Vee(a,le&&{data:le,id:V,sheetObject:a},Ce)},[V]),$;I.beingScrubbed?$="Sequenced_OnKeyframe_BeingScrubbed":G.cur?$="Sequenced_OnKeyframe":((h=G.prev)==null?void 0:h.kf.connectedRight)===!0?$="Sequenced_BeingInterpolated":$="Sequened_NotBeingInterpolated";let Y=()=>{G.cur?de().transaction(le=>{le.unset(s)}):de().transaction(le=>{le.set(s,I.value)})},re={cur:G.cur?{type:"on",itemKey:G.cur.itemKey,toggle:Y}:{type:"off",toggle:Y},prev:G.prev!==void 0?{itemKey:G.prev.itemKey,position:G.prev.kf.position,jump:()=>{a.sheet.getSequence().position=G.prev.kf.position}}:void 0,next:G.next!==void 0?{itemKey:G.next.itemKey,position:G.next.kf.position,jump:()=>{a.sheet.getSequence().position=G.next.kf.position}}:void 0},ne=Nb.default.createElement(Dz,F({},re));return B(F({},I),{type:"Sequenced",shade:$,nearbyKeyframes:G,controlIndicators:ne})}}let D=(0,$u.val)(a.template.getStaticValues()),A=pf(D,f);return typeof A<"u"&&C.push({label:"Reset to default",callback:()=>{de().transaction(({unset:N})=>{N(s)})}}),O&&C.push({label:"Sequence",callback:()=>{de().transaction(({stateEditors:N})=>{let L=B(F({},a.address),{pathToProp:f});N.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(L,l)})}}),typeof A<"u"?B(F({},I),{type:"Static",shade:I.beingScrubbed?"Static_BeingScrubbed":"Static",controlIndicators:Nb.default.createElement(AE,{hasStaticOverride:!0,obj:a,pathToProp:f,propConfig:l})}):B(F({},I),{type:"Default",shade:"Default",controlIndicators:Nb.default.createElement(AE,{hasStaticOverride:!0,obj:a,pathToProp:f,propConfig:l})})})}function G2e(s,a,l){if(IR.has(s))return IR.get(s);{let h=H2e(s,a,l);return IR.set(s,h),h}}function Uz(s,a,l){let h=G2e(s,a,l);return Jy(h)}var Nb,$u,IR,zz=P(()=>{Vp(),Nb=X(Ne()),$u=Ut,Me(),xR(),En(),df(),Fee(),Hee(),TR(),IR=new WeakMap});function W2e({propConfig:s,pointerToProp:a,obj:l,SimpleEditorComponent:h}){let f=Uz(a,l,s);return ho.default.createElement(K4,{editingTools:f,propConfig:s,value:f.value})}function $2e({pointerToProp:s,obj:a,propConfig:l,visualIndentation:h}){var f;let g=(f=l.label)!=null?f:eh((0,DE.getPointerParts)(s).path),b=Object.entries(l.props),_=b.filter(([Y,re])=>Zc(re)),S=b.filter(([Y,re])=>!Zc(re)),[C,I]=xr(null),O=R2e(s,a,l),[D]=aa(I,{menuItems:O.contextMenuItems}),A=_.length>0,N=(0,ho.useMemo)(()=>kR.getIsPropHighlightedD(B(F({},a.address),{pathToProp:(0,DE.getPointerParts)(s).path})),[s]),L="".concat(a.address.projectId,",").concat(a.address.sheetId,",").concat(a.address.sheetInstanceId,",").concat(a.address.objectKey,",").concat((0,DE.getPointerParts)(s).path.join()),V=yte(l);(0,ho.useLayoutEffect)(()=>{RR.has(L)||RR.set(L,new DE.Atom(V))},[L,l]);let G=RR.get(L),$=Qn(()=>G?(0,rte.val)(G.pointer):V,[G]);return ho.default.createElement(ste,null,D,ho.default.createElement(Vz,{style:{"--depth":h-1}},ho.default.createElement(lte,{isVectorProp:V},ho.default.createElement(cte,null,O.controlIndicators),ho.default.createElement(hte,{isHighlighted:N,ref:C},ho.default.createElement("span",null,g||"Props")),ho.default.createElement(fte,{isCollapsed:$,isVector:V,onClick:()=>{G==null||G.set(!G.get())}},ho.default.createElement(EZ,null))),V&&$&&ho.default.createElement(_te,null,[...b].map(([Y,re])=>ho.default.createElement(W2e,{key:"prop-"+Y,propConfig:re,pointerToProp:s[Y],obj:a})))),!$&&ho.default.createElement(vte,{style:{"--depth":h},depth:h,lastSubIsComposite:A},[...S,..._].map(([Y,re])=>ho.default.createElement(Hz,{key:"prop-"+Y,propConfig:re,pointerToProp:s[Y],obj:a,visualIndentation:h+1}))))}var DE,ho,rte,ite,ste,ote,Vz,ate,lte,ute,cte,dte,hte,pte,fte,mte,gte,vte,yte,bte,_te,wte,RR,K2e=P(()=>{df(),DE=Ut,$y(),il(),ho=X(Ne()),Ve(),GJ(),nv(),Dr(),Rr(),Lte(),la(),O2e(),Fz(),nte(),fZ(),zz(),En(),rte=Ut,Ib(),gR(),ste=ae.div(ite||(ite=te([`
  --step: 15px;
  --left-pad: 15px;
  `,`;
  --right-width: 60%;
`])),kr),Vz=ae.div(ote||(ote=te([`
  height: 30px;
  display: flex;
  align-items: stretch;
  position: relative;
`]))),lte=ae.div(ate||(ate=te([`
  padding-left: `,`;
  display: flex;
  align-items: center;
  overflow: hidden;
  `,`;
`])),Cz,({isVectorProp:s})=>s?"width: calc(100% - var(--right-width))":""),cte=ae.div(ute||(ute=te([`
  flexshrink: 0;
`]))),hte=Bz(ae.div(dte||(dte=te([`
  margin-left: 4px;
  cursor: default;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 4px;
  user-select: none;
  &:hover {
    color: white;
  }
  overflow: hidden;

  `,`;
`])),()=>hf)),fte=ae.span(pte||(pte=te([`
  width: 28px;
  height: 28px;
  font-size: 9px;
  display: flex;
  align-items: center;
  justify-content: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  visibility: `,`;

  `,`:hover & {
    visibility: visible;
  }

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),s=>s.isCollapsed?0:90,s=>!s.isVector&&s.isCollapsed||s.isVector&&!s.isCollapsed?"visible":"hidden",Vz,s=>s.isCollapsed?15:75),mte=Vu(.05,"#282b2f"),vte=ae.div(gte||(gte=te([`
  /* background: `,`; */
  /* padding: `,` 0; */
`])),({depth:s})=>QS(s*.03,mte),s=>s.lastSubIsComposite?0:"4px"),yte=bE(s=>{let a=Object.entries(s.props);return a.length<=3&&a.every(([l,h])=>h.type==="number"&&["x","y","z"].includes(l))}),_te=ae.div(bte||(bte=te([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`]))),wte=ho.default.memo($2e),RR=new Map});function X2e({isHighlighted:s}){return s==="self"?"#1857a4":s==="descendent"?"#0a2f5c":"initial"}var q2e=P(()=>{});function Y2e({propConfig:s,pointerToProp:a,editingTools:l,children:h,isPropHighlightedD:f}){var g;let b=(g=s.label)!=null?g:eh((0,jz.getPointerParts)(a).path),[_,S]=xr(null),[C]=aa(S,{menuItems:l.contextMenuItems});return Fb.default.createElement(Ste,{isHighlighted:f},C,Fb.default.createElement(Cte,null,Fb.default.createElement(kte,null,l.controlIndicators),Fb.default.createElement(Tte,{isHighlighted:f,ref:_,title:["obj","props",...(0,jz.getPointerParts)(a).path].join(".")},b)),Fb.default.createElement(Ite,null,h))}var jz,Fb,xte,Ste,Ete,Cte,Pte,Tte,Mte,kte,Ate,Ite,Z2e=P(()=>{jz=Ut,la(),Rr(),di(),Fb=X(Ne()),Ve(),Dr(),nv(),nte(),GJ(),q2e(),Ste=Bz(ae.div(xte||(xte=te([`
  display: flex;
  height: 30px;
  justify-content: flex-start;
  align-items: stretch;
  // We cannot calculate both the container (details panel) width and the descendant
  // (this) width dynamically. This leads to the container width being calculated
  // without this percentage being taken into consideration leads to horizontal
  // clipping/scrolling--the same way as if we explicitly fixed either the container
  // width, or the descendant width.
  // The correct solution for tabulated UIs with dynamic container widths is to use
  // CSS grid. For now I fixed this issue by just giving a great enough width
  // to the details panel so most things don't break.
  --right-width: 60%;
  position: relative;
  `,`;

  /* background-color: `,`; */
`])),kr,X2e)),Cte=ae.div(Ete||(Ete=te([`
  box-sizing: border-box;
  padding-left: `,`;
  padding-right: 4px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: stretch;
  gap: 4px;
  flex-grow: 0;
  flex-shrink: 0;
  width: calc(100% - var(--right-width));
`])),Cz),Tte=Bz(ae.div(Pte||(Pte=te([`
  text-align: left;
  flex: 1 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  user-select: none;
  cursor: default;

  `,`;
  &:hover {
    color: white;
  }
`])),hf)),kte=ae.div(Mte||(Mte=te([`
  flex-basis: 8px;
  flex: 0 0;
  display: flex;
  align-items: center;
`]))),Ite=ae.div(Ate||(Ate=te([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`])))});function Q2e({propConfig:s,pointerToProp:a,obj:l,SimpleEditorComponent:h}){let f=Uz(a,l,s),g=(0,OE.useMemo)(()=>kR.getIsPropHighlightedD(B(F({},l.address),{pathToProp:(0,Rte.getPointerParts)(a).path})),[a]);return OE.default.createElement(Y2e,{editingTools:f,propConfig:s,pointerToProp:a,isPropHighlightedD:g},OE.default.createElement(h,{editingTools:f,propConfig:s,value:f.value}))}var OE,Rte,Dte,J2e=P(()=>{OE=X(Ne()),zz(),Z2e(),Rte=Ut,Fz(),Dte=OE.default.memo(Q2e)}),LE,Ote,Hz,Lte=P(()=>{LE=X(Ne()),HJ(),K2e(),J2e(),Ote=({propConfig:s,visualIndentation:a,pointerToProp:l,obj:h})=>{if(s.type==="compound")return LE.default.createElement(wte,{obj:h,visualIndentation:a,pointerToProp:l,propConfig:s});if(s.type==="enum")return LE.default.createElement(LE.default.Fragment,null);{let f=Sz[s.type];return LE.default.createElement(Dte,{SimpleEditorComponent:f,obj:h,visualIndentation:a,pointerToProp:l,propConfig:s})}},Hz=Ote});function Nte(s){return DR.has(s)||DR.set(s,(Fte++).toString()),DR.get(s)}var DR,Fte,Bte=P(()=>{DR=new WeakMap,Fte=0}),Bb,Ute,zte,Vte,jte,Hte,Gte,eIe=P(()=>{Bb=X(Ne()),Lte(),En(),Bte(),Ve(),zte=ae.div(Ute||(Ute=te([`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
`]))),jte=ae.button(Vte||(Vte=te([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  border-radius: 2px;

  color: #a8a8a9;
  background: rgba(255, 255, 255, 0.1);

  border: none;
  height: 28px;

  &:hover {
    background: rgba(255, 255, 255, 0.15);
  }

  &:active {
    background: rgba(255, 255, 255, 0.2);
  }
`]))),Hte=({objects:s})=>{let a=s[0],l=ir(a.template.configPointer),h=ir(a.template._temp_actionsPointer);return Bb.default.createElement(Bb.default.Fragment,null,Bb.default.createElement(Hz,{key:Nte(a),obj:a,pointerToProp:a.propsP,propConfig:l,visualIndentation:1}),Bb.default.createElement(zte,null,h&&Object.entries(h).map(([f,g])=>Bb.default.createElement(jte,{key:f,onClick:()=>{g(a.publicApi)}},f))))},Gte=Hte}),Wte,$te,OR,Kte=P(()=>{Ve(),$te=ae.button(Wte||(Wte=te([`
  text-align: center;
  padding: 8px;
  border-radius: 2px;
  border: 1px solid #627b7b87;
  background-color: #4b787d3d;
  color: #eaeaea;
  font-weight: 400;
  display: block;
  appearance: none;
  flex-grow: 1;
  cursor: `,`;
  opacity: `,`;

  &:hover {
    background-color: #7dc1c878;
    border-color: #9ebcbf;
  }
`])),s=>s.disabled?"none":"pointer",s=>s.disabled?.4:1),OR=$te}),tIe=P(()=>{}),Xte,nIe=P(()=>{tIe(),Xte=(s=21)=>{let a="",l=crypto.getRandomValues(new Uint8Array(s));for(;s--;){let h=l[s]&63;h<36?a+=h.toString(36):h<62?a+=(h-26).toString(36).toUpperCase():h<63?a+="_":a+="-"}return a}});function qte(){return Xte(16)}var Yte=P(()=>{nIe()}),Zte,bh,Gz,Qte,Jte,ene,tne,nne=P(()=>{Zte=Ut,Rr(),bh=X(Ne()),Gz=(0,bh.createContext)(null),Qte=0,Jte=()=>{let s=(0,bh.useMemo)(()=>Qte++,[]),{cur:a,set:l}=(0,bh.useContext)(Gz),[h,f]=xr(!1),g=(0,bh.useCallback)((b,_)=>{l(b?s:-1,_)},[]);return(0,bh.useEffect)(()=>a.onStale(()=>{let b=a.getValue()===s;h.current!==b&&(h.current=b)}),[a,s]),[f,g]},ene=({children:s})=>{let a=(0,bh.useMemo)(()=>new Zte.Atom(-1),[]),l=a.prism,h=(0,bh.useMemo)(()=>{let f;return(g,b)=>{let _=f!==void 0;f!==void 0&&(clearTimeout(f),f=void 0),b===0||_?a.set(g):f=setTimeout(()=>{a.set(g),f=void 0},b)}},[]);return bh.default.createElement(Gz.Provider,{value:{cur:l,set:h}},s)},tne=ene});function Ub(s,a){let l=s.enabled!==!1,[h,f]=Jte(),[g,b]=xr(null);(0,ine.useEffect)(()=>{if(!l)return;let S=g.current;if(!S)return;let C=()=>{var O;return f(!0,(O=s.enterDelay)!=null?O:400)},I=()=>{var O;return f(!1,(O=s.exitDelay)!=null?O:200)};return S.addEventListener("mouseenter",C),S.addEventListener("mouseleave",I),()=>{S.removeEventListener("mouseenter",C),S.removeEventListener("mouseleave",I)}},[g,l,s.enterDelay,s.exitDelay]);let _=(0,rne.useContext)(wb);return[l&&h&&b?(0,sne.createPortal)(LR.default.createElement(vz,{children:a,target:b,onClickOutside:ju,verticalPlacement:s.verticalPlacement,verticalGap:s.verticalGap}),_):LR.default.createElement(LR.default.Fragment,null),g,h]}var rne,ine,LR,sne,NE=P(()=>{Rr(),rne=X(Ne()),ine=X(Ne()),LR=X(Ne()),WQ(),sne=X(Du()),nne(),Jg(),Eb()}),one,ane,zb,NR=P(()=>{Ve(),qc(),ane=ae(Xc)(one||(one=te([`
  padding: 1em;
  max-width: 240px;
  pointer-events: none !important;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: #45464d;
`]))),zb=ane}),Qc,lne,une,cne,dne,hne,pne,fne,mne,gne,rIe=P(()=>{En(),Me(),Qc=X(Ne()),Ve(),Yte(),NE(),NR(),Kte(),une=ae.div(lne||(lne=te([`
  padding: 8px 10px;
  position: relative;
  background-color: #6d232352;
  &:before {
    position: absolute;
    content: ' ';
    display: block;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #ff000070;
  }
`]))),dne=ae.div(cne||(cne=te([`
  margin-bottom: 1em;
  & a {
    color: inherit;
  }
`]))),pne=ae.div(hne||(hne=te([`
  display: flex;
  gap: 8px;
`]))),fne=({projectId:s})=>{let a=ir(de().atomP.ephemeral.coreByProject[s].loadingState);return a&&a.type==="browserStateIsNotBasedOnDiskState"?Qc.default.createElement(mne,{loadingState:a,projectId:s}):null},mne=({projectId:s,loadingState:a})=>{let l=()=>{de().transaction(({drafts:S,stateEditors:C})=>{C.coreByProject.historic.revisionHistory.add({projectId:s,revision:a.onDiskState.revisionHistory[0]}),C.coreByProject.historic.revisionHistory.add({projectId:s,revision:qte()}),S.ephemeral.coreByProject[s].loadingState={type:"loaded"}})},h=()=>{de().transaction(({drafts:S})=>{S.historic.coreByProject[s]=a.onDiskState,S.ephemeral.coreByProject[s].loadingState={type:"loaded"}})},[f,g]=Ub({},()=>Qc.default.createElement(zb,null,"The browser's state will override the disk state.")),[b,_]=Ub({},()=>Qc.default.createElement(zb,null,"The disk's state will override the browser's state."));return Qc.default.createElement(une,null,Qc.default.createElement(dne,null,"Browser state is not based on disk state."," ",Qc.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Learn more.")),Qc.default.createElement(pne,null,f,Qc.default.createElement(OR,{onClick:l,ref:g},"Use browser's state"),b,Qc.default.createElement(OR,{onClick:h,ref:_},"Use disk state")))},gne=fne}),iIe=W((s,a)=>{(function(l){typeof s=="object"&&typeof a<"u"?a.exports=l():(typeof window<"u"?window:typeof Gi<"u"?Gi:typeof self<"u"?self:this).JSZip=l()})(function(){return function l(h,f,g){function b(C,I){if(!f[C]){if(!h[C]){var O=typeof $3=="function"&&$3;if(!I&&O)return O(C,!0);if(_)return _(C,!0);var D=new Error("Cannot find module '"+C+"'");throw D.code="MODULE_NOT_FOUND",D}var A=f[C]={exports:{}};h[C][0].call(A.exports,function(N){var L=h[C][1][N];return b(L||N)},A,A.exports,l,h,f,g)}return f[C].exports}for(var _=typeof $3=="function"&&$3,S=0;S<g.length;S++)b(g[S]);return b}({1:[function(l,h,f){var g=l("./utils"),b=l("./support"),_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f.encode=function(S){for(var C,I,O,D,A,N,L,V=[],G=0,$=S.length,Y=$,re=g.getTypeOf(S)!=="string";G<S.length;)Y=$-G,O=re?(C=S[G++],I=G<$?S[G++]:0,G<$?S[G++]:0):(C=S.charCodeAt(G++),I=G<$?S.charCodeAt(G++):0,G<$?S.charCodeAt(G++):0),D=C>>2,A=(3&C)<<4|I>>4,N=1<Y?(15&I)<<2|O>>6:64,L=2<Y?63&O:64,V.push(_.charAt(D)+_.charAt(A)+_.charAt(N)+_.charAt(L));return V.join("")},f.decode=function(S){var C,I,O,D,A,N,L=0,V=0,G="data:";if(S.substr(0,G.length)===G)throw new Error("Invalid base64 input, it looks like a data url.");var $,Y=3*(S=S.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(S.charAt(S.length-1)===_.charAt(64)&&Y--,S.charAt(S.length-2)===_.charAt(64)&&Y--,Y%1!=0)throw new Error("Invalid base64 input, bad content length.");for($=b.uint8array?new Uint8Array(0|Y):new Array(0|Y);L<S.length;)C=_.indexOf(S.charAt(L++))<<2|(D=_.indexOf(S.charAt(L++)))>>4,I=(15&D)<<4|(A=_.indexOf(S.charAt(L++)))>>2,O=(3&A)<<6|(N=_.indexOf(S.charAt(L++))),$[V++]=C,A!==64&&($[V++]=I),N!==64&&($[V++]=O);return $}},{"./support":30,"./utils":32}],2:[function(l,h,f){var g=l("./external"),b=l("./stream/DataWorker"),_=l("./stream/Crc32Probe"),S=l("./stream/DataLengthProbe");function C(I,O,D,A,N){this.compressedSize=I,this.uncompressedSize=O,this.crc32=D,this.compression=A,this.compressedContent=N}C.prototype={getContentWorker:function(){var I=new b(g.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new S("data_length")),O=this;return I.on("end",function(){if(this.streamInfo.data_length!==O.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),I},getCompressedWorker:function(){return new b(g.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},C.createWorkerFrom=function(I,O,D){return I.pipe(new _).pipe(new S("uncompressedSize")).pipe(O.compressWorker(D)).pipe(new S("compressedSize")).withStreamInfo("compression",O)},h.exports=C},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(l,h,f){var g=l("./stream/GenericWorker");f.STORE={magic:"\0\0",compressWorker:function(){return new g("STORE compression")},uncompressWorker:function(){return new g("STORE decompression")}},f.DEFLATE=l("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(l,h,f){var g=l("./utils"),b=function(){for(var _,S=[],C=0;C<256;C++){_=C;for(var I=0;I<8;I++)_=1&_?3988292384^_>>>1:_>>>1;S[C]=_}return S}();h.exports=function(_,S){return _!==void 0&&_.length?g.getTypeOf(_)!=="string"?function(C,I,O,D){var A=b,N=D+O;C^=-1;for(var L=D;L<N;L++)C=C>>>8^A[255&(C^I[L])];return-1^C}(0|S,_,_.length,0):function(C,I,O,D){var A=b,N=D+O;C^=-1;for(var L=D;L<N;L++)C=C>>>8^A[255&(C^I.charCodeAt(L))];return-1^C}(0|S,_,_.length,0):0}},{"./utils":32}],5:[function(l,h,f){f.base64=!1,f.binary=!1,f.dir=!1,f.createFolders=!0,f.date=null,f.compression=null,f.compressionOptions=null,f.comment=null,f.unixPermissions=null,f.dosPermissions=null},{}],6:[function(l,h,f){var g=null;g=typeof Promise<"u"?Promise:l("lie"),h.exports={Promise:g}},{lie:37}],7:[function(l,h,f){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",b=l("pako"),_=l("./utils"),S=l("./stream/GenericWorker"),C=g?"uint8array":"array";function I(O,D){S.call(this,"FlateWorker/"+O),this._pako=null,this._pakoAction=O,this._pakoOptions=D,this.meta={}}f.magic="\b\0",_.inherits(I,S),I.prototype.processChunk=function(O){this.meta=O.meta,this._pako===null&&this._createPako(),this._pako.push(_.transformTo(C,O.data),!1)},I.prototype.flush=function(){S.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},I.prototype.cleanUp=function(){S.prototype.cleanUp.call(this),this._pako=null},I.prototype._createPako=function(){this._pako=new b[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var O=this;this._pako.onData=function(D){O.push({data:D,meta:O.meta})}},f.compressWorker=function(O){return new I("Deflate",O)},f.uncompressWorker=function(){return new I("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(l,h,f){function g(A,N){var L,V="";for(L=0;L<N;L++)V+=String.fromCharCode(255&A),A>>>=8;return V}function b(A,N,L,V,G,$){var Y,re,ne=A.file,le=A.compression,Ce=$!==C.utf8encode,ve=_.transformTo("string",$(ne.name)),we=_.transformTo("string",C.utf8encode(ne.name)),Le=ne.comment,lt=_.transformTo("string",$(Le)),ue=_.transformTo("string",C.utf8encode(Le)),Oe=we.length!==ne.name.length,Q=ue.length!==Le.length,We="",Lt="",Ie="",Re=ne.dir,Ke=ne.date,Ct={crc32:0,compressedSize:0,uncompressedSize:0};N&&!L||(Ct.crc32=A.crc32,Ct.compressedSize=A.compressedSize,Ct.uncompressedSize=A.uncompressedSize);var ce=0;N&&(ce|=8),Ce||!Oe&&!Q||(ce|=2048);var me=0,tt=0;Re&&(me|=16),G==="UNIX"?(tt=798,me|=function(ht,Xe){var sn=ht;return ht||(sn=Xe?16893:33204),(65535&sn)<<16}(ne.unixPermissions,Re)):(tt=20,me|=function(ht){return 63&(ht||0)}(ne.dosPermissions)),Y=Ke.getUTCHours(),Y<<=6,Y|=Ke.getUTCMinutes(),Y<<=5,Y|=Ke.getUTCSeconds()/2,re=Ke.getUTCFullYear()-1980,re<<=4,re|=Ke.getUTCMonth()+1,re<<=5,re|=Ke.getUTCDate(),Oe&&(Lt=g(1,1)+g(I(ve),4)+we,We+="up"+g(Lt.length,2)+Lt),Q&&(Ie=g(1,1)+g(I(lt),4)+ue,We+="uc"+g(Ie.length,2)+Ie);var st="";return st+=`
\0`,st+=g(ce,2),st+=le.magic,st+=g(Y,2),st+=g(re,2),st+=g(Ct.crc32,4),st+=g(Ct.compressedSize,4),st+=g(Ct.uncompressedSize,4),st+=g(ve.length,2),st+=g(We.length,2),{fileRecord:O.LOCAL_FILE_HEADER+st+ve+We,dirRecord:O.CENTRAL_FILE_HEADER+g(tt,2)+st+g(lt.length,2)+"\0\0\0\0"+g(me,4)+g(V,4)+ve+We+lt}}var _=l("../utils"),S=l("../stream/GenericWorker"),C=l("../utf8"),I=l("../crc32"),O=l("../signature");function D(A,N,L,V){S.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=N,this.zipPlatform=L,this.encodeFileName=V,this.streamFiles=A,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}_.inherits(D,S),D.prototype.push=function(A){var N=A.meta.percent||0,L=this.entriesCount,V=this._sources.length;this.accumulate?this.contentBuffer.push(A):(this.bytesWritten+=A.data.length,S.prototype.push.call(this,{data:A.data,meta:{currentFile:this.currentFile,percent:L?(N+100*(L-V-1))/L:100}}))},D.prototype.openedSource=function(A){this.currentSourceOffset=this.bytesWritten,this.currentFile=A.file.name;var N=this.streamFiles&&!A.file.dir;if(N){var L=b(A,N,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:L.fileRecord,meta:{percent:0}})}else this.accumulate=!0},D.prototype.closedSource=function(A){this.accumulate=!1;var N=this.streamFiles&&!A.file.dir,L=b(A,N,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(L.dirRecord),N)this.push({data:function(V){return O.DATA_DESCRIPTOR+g(V.crc32,4)+g(V.compressedSize,4)+g(V.uncompressedSize,4)}(A),meta:{percent:100}});else for(this.push({data:L.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},D.prototype.flush=function(){for(var A=this.bytesWritten,N=0;N<this.dirRecords.length;N++)this.push({data:this.dirRecords[N],meta:{percent:100}});var L=this.bytesWritten-A,V=function(G,$,Y,re,ne){var le=_.transformTo("string",ne(re));return O.CENTRAL_DIRECTORY_END+"\0\0\0\0"+g(G,2)+g(G,2)+g($,4)+g(Y,4)+g(le.length,2)+le}(this.dirRecords.length,L,A,this.zipComment,this.encodeFileName);this.push({data:V,meta:{percent:100}})},D.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},D.prototype.registerPrevious=function(A){this._sources.push(A);var N=this;return A.on("data",function(L){N.processChunk(L)}),A.on("end",function(){N.closedSource(N.previous.streamInfo),N._sources.length?N.prepareNextSource():N.end()}),A.on("error",function(L){N.error(L)}),this},D.prototype.resume=function(){return!!S.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},D.prototype.error=function(A){var N=this._sources;if(!S.prototype.error.call(this,A))return!1;for(var L=0;L<N.length;L++)try{N[L].error(A)}catch{}return!0},D.prototype.lock=function(){S.prototype.lock.call(this);for(var A=this._sources,N=0;N<A.length;N++)A[N].lock()},h.exports=D},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(l,h,f){var g=l("../compressions"),b=l("./ZipFileWorker");f.generateWorker=function(_,S,C){var I=new b(S.streamFiles,C,S.platform,S.encodeFileName),O=0;try{_.forEach(function(D,A){O++;var N=function($,Y){var re=$||Y,ne=g[re];if(!ne)throw new Error(re+" is not a valid compression method !");return ne}(A.options.compression,S.compression),L=A.options.compressionOptions||S.compressionOptions||{},V=A.dir,G=A.date;A._compressWorker(N,L).withStreamInfo("file",{name:D,dir:V,date:G,comment:A.comment||"",unixPermissions:A.unixPermissions,dosPermissions:A.dosPermissions}).pipe(I)}),I.entriesCount=O}catch(D){I.error(D)}return I}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(l,h,f){function g(){if(!(this instanceof g))return new g;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var b=new g;for(var _ in this)typeof this[_]!="function"&&(b[_]=this[_]);return b}}(g.prototype=l("./object")).loadAsync=l("./load"),g.support=l("./support"),g.defaults=l("./defaults"),g.version="3.10.1",g.loadAsync=function(b,_){return new g().loadAsync(b,_)},g.external=l("./external"),h.exports=g},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(l,h,f){var g=l("./utils"),b=l("./external"),_=l("./utf8"),S=l("./zipEntries"),C=l("./stream/Crc32Probe"),I=l("./nodejsUtils");function O(D){return new b.Promise(function(A,N){var L=D.decompressed.getContentWorker().pipe(new C);L.on("error",function(V){N(V)}).on("end",function(){L.streamInfo.crc32!==D.decompressed.crc32?N(new Error("Corrupted zip : CRC32 mismatch")):A()}).resume()})}h.exports=function(D,A){var N=this;return A=g.extend(A||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:_.utf8decode}),I.isNode&&I.isStream(D)?b.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):g.prepareContent("the loaded zip file",D,!0,A.optimizedBinaryString,A.base64).then(function(L){var V=new S(A);return V.load(L),V}).then(function(L){var V=[b.Promise.resolve(L)],G=L.files;if(A.checkCRC32)for(var $=0;$<G.length;$++)V.push(O(G[$]));return b.Promise.all(V)}).then(function(L){for(var V=L.shift(),G=V.files,$=0;$<G.length;$++){var Y=G[$],re=Y.fileNameStr,ne=g.resolve(Y.fileNameStr);N.file(ne,Y.decompressed,{binary:!0,optimizedBinaryString:!0,date:Y.date,dir:Y.dir,comment:Y.fileCommentStr.length?Y.fileCommentStr:null,unixPermissions:Y.unixPermissions,dosPermissions:Y.dosPermissions,createFolders:A.createFolders}),Y.dir||(N.file(ne).unsafeOriginalName=re)}return V.zipComment.length&&(N.comment=V.zipComment),N})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(l,h,f){var g=l("../utils"),b=l("../stream/GenericWorker");function _(S,C){b.call(this,"Nodejs stream input adapter for "+S),this._upstreamEnded=!1,this._bindStream(C)}g.inherits(_,b),_.prototype._bindStream=function(S){var C=this;(this._stream=S).pause(),S.on("data",function(I){C.push({data:I,meta:{percent:0}})}).on("error",function(I){C.isPaused?this.generatedError=I:C.error(I)}).on("end",function(){C.isPaused?C._upstreamEnded=!0:C.end()})},_.prototype.pause=function(){return!!b.prototype.pause.call(this)&&(this._stream.pause(),!0)},_.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},h.exports=_},{"../stream/GenericWorker":28,"../utils":32}],13:[function(l,h,f){var g=l("readable-stream").Readable;function b(_,S,C){g.call(this,S),this._helper=_;var I=this;_.on("data",function(O,D){I.push(O)||I._helper.pause(),C&&C(D)}).on("error",function(O){I.emit("error",O)}).on("end",function(){I.push(null)})}l("../utils").inherits(b,g),b.prototype._read=function(){this._helper.resume()},h.exports=b},{"../utils":32,"readable-stream":16}],14:[function(l,h,f){h.exports={isNode:typeof Buffer<"u",newBufferFrom:function(g,b){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(g,b);if(typeof g=="number")throw new Error('The "data" argument must not be a number');return new Buffer(g,b)},allocBuffer:function(g){if(Buffer.alloc)return Buffer.alloc(g);var b=new Buffer(g);return b.fill(0),b},isBuffer:function(g){return Buffer.isBuffer(g)},isStream:function(g){return g&&typeof g.on=="function"&&typeof g.pause=="function"&&typeof g.resume=="function"}}},{}],15:[function(l,h,f){function g(ne,le,Ce){var ve,we=_.getTypeOf(le),Le=_.extend(Ce||{},I);Le.date=Le.date||new Date,Le.compression!==null&&(Le.compression=Le.compression.toUpperCase()),typeof Le.unixPermissions=="string"&&(Le.unixPermissions=parseInt(Le.unixPermissions,8)),Le.unixPermissions&&16384&Le.unixPermissions&&(Le.dir=!0),Le.dosPermissions&&16&Le.dosPermissions&&(Le.dir=!0),Le.dir&&(ne=G(ne)),Le.createFolders&&(ve=V(ne))&&$.call(this,ve,!0);var lt=we==="string"&&Le.binary===!1&&Le.base64===!1;Ce&&Ce.binary!==void 0||(Le.binary=!lt),(le instanceof O&&le.uncompressedSize===0||Le.dir||!le||le.length===0)&&(Le.base64=!1,Le.binary=!0,le="",Le.compression="STORE",we="string");var ue=null;ue=le instanceof O||le instanceof S?le:N.isNode&&N.isStream(le)?new L(ne,le):_.prepareContent(ne,le,Le.binary,Le.optimizedBinaryString,Le.base64);var Oe=new D(ne,ue,Le);this.files[ne]=Oe}var b=l("./utf8"),_=l("./utils"),S=l("./stream/GenericWorker"),C=l("./stream/StreamHelper"),I=l("./defaults"),O=l("./compressedObject"),D=l("./zipObject"),A=l("./generate"),N=l("./nodejsUtils"),L=l("./nodejs/NodejsStreamInputAdapter"),V=function(ne){ne.slice(-1)==="/"&&(ne=ne.substring(0,ne.length-1));var le=ne.lastIndexOf("/");return 0<le?ne.substring(0,le):""},G=function(ne){return ne.slice(-1)!=="/"&&(ne+="/"),ne},$=function(ne,le){return le=le!==void 0?le:I.createFolders,ne=G(ne),this.files[ne]||g.call(this,ne,null,{dir:!0,createFolders:le}),this.files[ne]};function Y(ne){return Object.prototype.toString.call(ne)==="[object RegExp]"}var re={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ne){var le,Ce,ve;for(le in this.files)ve=this.files[le],(Ce=le.slice(this.root.length,le.length))&&le.slice(0,this.root.length)===this.root&&ne(Ce,ve)},filter:function(ne){var le=[];return this.forEach(function(Ce,ve){ne(Ce,ve)&&le.push(ve)}),le},file:function(ne,le,Ce){if(arguments.length!==1)return ne=this.root+ne,g.call(this,ne,le,Ce),this;if(Y(ne)){var ve=ne;return this.filter(function(Le,lt){return!lt.dir&&ve.test(Le)})}var we=this.files[this.root+ne];return we&&!we.dir?we:null},folder:function(ne){if(!ne)return this;if(Y(ne))return this.filter(function(we,Le){return Le.dir&&ne.test(we)});var le=this.root+ne,Ce=$.call(this,le),ve=this.clone();return ve.root=Ce.name,ve},remove:function(ne){ne=this.root+ne;var le=this.files[ne];if(le||(ne.slice(-1)!=="/"&&(ne+="/"),le=this.files[ne]),le&&!le.dir)delete this.files[ne];else for(var Ce=this.filter(function(we,Le){return Le.name.slice(0,ne.length)===ne}),ve=0;ve<Ce.length;ve++)delete this.files[Ce[ve].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ne){var le,Ce={};try{if((Ce=_.extend(ne||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:b.utf8encode})).type=Ce.type.toLowerCase(),Ce.compression=Ce.compression.toUpperCase(),Ce.type==="binarystring"&&(Ce.type="string"),!Ce.type)throw new Error("No output type specified.");_.checkSupport(Ce.type),Ce.platform!=="darwin"&&Ce.platform!=="freebsd"&&Ce.platform!=="linux"&&Ce.platform!=="sunos"||(Ce.platform="UNIX"),Ce.platform==="win32"&&(Ce.platform="DOS");var ve=Ce.comment||this.comment||"";le=A.generateWorker(this,Ce,ve)}catch(we){(le=new S("error")).error(we)}return new C(le,Ce.type||"string",Ce.mimeType)},generateAsync:function(ne,le){return this.generateInternalStream(ne).accumulate(le)},generateNodeStream:function(ne,le){return(ne=ne||{}).type||(ne.type="nodebuffer"),this.generateInternalStream(ne).toNodejsStream(le)}};h.exports=re},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(l,h,f){h.exports=l("stream")},{stream:void 0}],17:[function(l,h,f){var g=l("./DataReader");function b(_){g.call(this,_);for(var S=0;S<this.data.length;S++)_[S]=255&_[S]}l("../utils").inherits(b,g),b.prototype.byteAt=function(_){return this.data[this.zero+_]},b.prototype.lastIndexOfSignature=function(_){for(var S=_.charCodeAt(0),C=_.charCodeAt(1),I=_.charCodeAt(2),O=_.charCodeAt(3),D=this.length-4;0<=D;--D)if(this.data[D]===S&&this.data[D+1]===C&&this.data[D+2]===I&&this.data[D+3]===O)return D-this.zero;return-1},b.prototype.readAndCheckSignature=function(_){var S=_.charCodeAt(0),C=_.charCodeAt(1),I=_.charCodeAt(2),O=_.charCodeAt(3),D=this.readData(4);return S===D[0]&&C===D[1]&&I===D[2]&&O===D[3]},b.prototype.readData=function(_){if(this.checkOffset(_),_===0)return[];var S=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,S},h.exports=b},{"../utils":32,"./DataReader":18}],18:[function(l,h,f){var g=l("../utils");function b(_){this.data=_,this.length=_.length,this.index=0,this.zero=0}b.prototype={checkOffset:function(_){this.checkIndex(this.index+_)},checkIndex:function(_){if(this.length<this.zero+_||_<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+_+"). Corrupted zip ?")},setIndex:function(_){this.checkIndex(_),this.index=_},skip:function(_){this.setIndex(this.index+_)},byteAt:function(){},readInt:function(_){var S,C=0;for(this.checkOffset(_),S=this.index+_-1;S>=this.index;S--)C=(C<<8)+this.byteAt(S);return this.index+=_,C},readString:function(_){return g.transformTo("string",this.readData(_))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var _=this.readInt(4);return new Date(Date.UTC(1980+(_>>25&127),(_>>21&15)-1,_>>16&31,_>>11&31,_>>5&63,(31&_)<<1))}},h.exports=b},{"../utils":32}],19:[function(l,h,f){var g=l("./Uint8ArrayReader");function b(_){g.call(this,_)}l("../utils").inherits(b,g),b.prototype.readData=function(_){this.checkOffset(_);var S=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,S},h.exports=b},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(l,h,f){var g=l("./DataReader");function b(_){g.call(this,_)}l("../utils").inherits(b,g),b.prototype.byteAt=function(_){return this.data.charCodeAt(this.zero+_)},b.prototype.lastIndexOfSignature=function(_){return this.data.lastIndexOf(_)-this.zero},b.prototype.readAndCheckSignature=function(_){return _===this.readData(4)},b.prototype.readData=function(_){this.checkOffset(_);var S=this.data.slice(this.zero+this.index,this.zero+this.index+_);return this.index+=_,S},h.exports=b},{"../utils":32,"./DataReader":18}],21:[function(l,h,f){var g=l("./ArrayReader");function b(_){g.call(this,_)}l("../utils").inherits(b,g),b.prototype.readData=function(_){if(this.checkOffset(_),_===0)return new Uint8Array(0);var S=this.data.subarray(this.zero+this.index,this.zero+this.index+_);return this.index+=_,S},h.exports=b},{"../utils":32,"./ArrayReader":17}],22:[function(l,h,f){var g=l("../utils"),b=l("../support"),_=l("./ArrayReader"),S=l("./StringReader"),C=l("./NodeBufferReader"),I=l("./Uint8ArrayReader");h.exports=function(O){var D=g.getTypeOf(O);return g.checkSupport(D),D!=="string"||b.uint8array?D==="nodebuffer"?new C(O):b.uint8array?new I(g.transformTo("uint8array",O)):new _(g.transformTo("array",O)):new S(O)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(l,h,f){f.LOCAL_FILE_HEADER="PK",f.CENTRAL_FILE_HEADER="PK",f.CENTRAL_DIRECTORY_END="PK",f.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",f.ZIP64_CENTRAL_DIRECTORY_END="PK",f.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(l,h,f){var g=l("./GenericWorker"),b=l("../utils");function _(S){g.call(this,"ConvertWorker to "+S),this.destType=S}b.inherits(_,g),_.prototype.processChunk=function(S){this.push({data:b.transformTo(this.destType,S.data),meta:S.meta})},h.exports=_},{"../utils":32,"./GenericWorker":28}],25:[function(l,h,f){var g=l("./GenericWorker"),b=l("../crc32");function _(){g.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}l("../utils").inherits(_,g),_.prototype.processChunk=function(S){this.streamInfo.crc32=b(S.data,this.streamInfo.crc32||0),this.push(S)},h.exports=_},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(l,h,f){var g=l("../utils"),b=l("./GenericWorker");function _(S){b.call(this,"DataLengthProbe for "+S),this.propName=S,this.withStreamInfo(S,0)}g.inherits(_,b),_.prototype.processChunk=function(S){if(S){var C=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=C+S.data.length}b.prototype.processChunk.call(this,S)},h.exports=_},{"../utils":32,"./GenericWorker":28}],27:[function(l,h,f){var g=l("../utils"),b=l("./GenericWorker");function _(S){b.call(this,"DataWorker");var C=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,S.then(function(I){C.dataIsReady=!0,C.data=I,C.max=I&&I.length||0,C.type=g.getTypeOf(I),C.isPaused||C._tickAndRepeat()},function(I){C.error(I)})}g.inherits(_,b),_.prototype.cleanUp=function(){b.prototype.cleanUp.call(this),this.data=null},_.prototype.resume=function(){return!!b.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,g.delay(this._tickAndRepeat,[],this)),!0)},_.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(g.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},_.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var S=null,C=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":S=this.data.substring(this.index,C);break;case"uint8array":S=this.data.subarray(this.index,C);break;case"array":case"nodebuffer":S=this.data.slice(this.index,C)}return this.index=C,this.push({data:S,meta:{percent:this.max?this.index/this.max*100:0}})},h.exports=_},{"../utils":32,"./GenericWorker":28}],28:[function(l,h,f){function g(b){this.name=b||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}g.prototype={push:function(b){this.emit("data",b)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(b){this.emit("error",b)}return!0},error:function(b){return!this.isFinished&&(this.isPaused?this.generatedError=b:(this.isFinished=!0,this.emit("error",b),this.previous&&this.previous.error(b),this.cleanUp()),!0)},on:function(b,_){return this._listeners[b].push(_),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(b,_){if(this._listeners[b])for(var S=0;S<this._listeners[b].length;S++)this._listeners[b][S].call(this,_)},pipe:function(b){return b.registerPrevious(this)},registerPrevious:function(b){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=b.streamInfo,this.mergeStreamInfo(),this.previous=b;var _=this;return b.on("data",function(S){_.processChunk(S)}),b.on("end",function(){_.end()}),b.on("error",function(S){_.error(S)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var b=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),b=!0),this.previous&&this.previous.resume(),!b},flush:function(){},processChunk:function(b){this.push(b)},withStreamInfo:function(b,_){return this.extraStreamInfo[b]=_,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var b in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,b)&&(this.streamInfo[b]=this.extraStreamInfo[b])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var b="Worker "+this.name;return this.previous?this.previous+" -> "+b:b}},h.exports=g},{}],29:[function(l,h,f){var g=l("../utils"),b=l("./ConvertWorker"),_=l("./GenericWorker"),S=l("../base64"),C=l("../support"),I=l("../external"),O=null;if(C.nodestream)try{O=l("../nodejs/NodejsStreamOutputAdapter")}catch{}function D(N,L){return new I.Promise(function(V,G){var $=[],Y=N._internalType,re=N._outputType,ne=N._mimeType;N.on("data",function(le,Ce){$.push(le),L&&L(Ce)}).on("error",function(le){$=[],G(le)}).on("end",function(){try{var le=function(Ce,ve,we){switch(Ce){case"blob":return g.newBlob(g.transformTo("arraybuffer",ve),we);case"base64":return S.encode(ve);default:return g.transformTo(Ce,ve)}}(re,function(Ce,ve){var we,Le=0,lt=null,ue=0;for(we=0;we<ve.length;we++)ue+=ve[we].length;switch(Ce){case"string":return ve.join("");case"array":return Array.prototype.concat.apply([],ve);case"uint8array":for(lt=new Uint8Array(ue),we=0;we<ve.length;we++)lt.set(ve[we],Le),Le+=ve[we].length;return lt;case"nodebuffer":return Buffer.concat(ve);default:throw new Error("concat : unsupported type '"+Ce+"'")}}(Y,$),ne);V(le)}catch(Ce){G(Ce)}$=[]}).resume()})}function A(N,L,V){var G=L;switch(L){case"blob":case"arraybuffer":G="uint8array";break;case"base64":G="string"}try{this._internalType=G,this._outputType=L,this._mimeType=V,g.checkSupport(G),this._worker=N.pipe(new b(G)),N.lock()}catch($){this._worker=new _("error"),this._worker.error($)}}A.prototype={accumulate:function(N){return D(this,N)},on:function(N,L){var V=this;return N==="data"?this._worker.on(N,function(G){L.call(V,G.data,G.meta)}):this._worker.on(N,function(){g.delay(L,arguments,V)}),this},resume:function(){return g.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(N){if(g.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new O(this,{objectMode:this._outputType!=="nodebuffer"},N)}},h.exports=A},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(l,h,f){if(f.base64=!0,f.array=!0,f.string=!0,f.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",f.nodebuffer=typeof Buffer<"u",f.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")f.blob=!1;else{var g=new ArrayBuffer(0);try{f.blob=new Blob([g],{type:"application/zip"}).size===0}catch{try{var b=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);b.append(g),f.blob=b.getBlob("application/zip").size===0}catch{f.blob=!1}}}try{f.nodestream=!!l("readable-stream").Readable}catch{f.nodestream=!1}},{"readable-stream":16}],31:[function(l,h,f){for(var g=l("./utils"),b=l("./support"),_=l("./nodejsUtils"),S=l("./stream/GenericWorker"),C=new Array(256),I=0;I<256;I++)C[I]=252<=I?6:248<=I?5:240<=I?4:224<=I?3:192<=I?2:1;C[254]=C[254]=1;function O(){S.call(this,"utf-8 decode"),this.leftOver=null}function D(){S.call(this,"utf-8 encode")}f.utf8encode=function(A){return b.nodebuffer?_.newBufferFrom(A,"utf-8"):function(N){var L,V,G,$,Y,re=N.length,ne=0;for($=0;$<re;$++)(64512&(V=N.charCodeAt($)))==55296&&$+1<re&&(64512&(G=N.charCodeAt($+1)))==56320&&(V=65536+(V-55296<<10)+(G-56320),$++),ne+=V<128?1:V<2048?2:V<65536?3:4;for(L=b.uint8array?new Uint8Array(ne):new Array(ne),$=Y=0;Y<ne;$++)(64512&(V=N.charCodeAt($)))==55296&&$+1<re&&(64512&(G=N.charCodeAt($+1)))==56320&&(V=65536+(V-55296<<10)+(G-56320),$++),V<128?L[Y++]=V:(V<2048?L[Y++]=192|V>>>6:(V<65536?L[Y++]=224|V>>>12:(L[Y++]=240|V>>>18,L[Y++]=128|V>>>12&63),L[Y++]=128|V>>>6&63),L[Y++]=128|63&V);return L}(A)},f.utf8decode=function(A){return b.nodebuffer?g.transformTo("nodebuffer",A).toString("utf-8"):function(N){var L,V,G,$,Y=N.length,re=new Array(2*Y);for(L=V=0;L<Y;)if((G=N[L++])<128)re[V++]=G;else if(4<($=C[G]))re[V++]=65533,L+=$-1;else{for(G&=$===2?31:$===3?15:7;1<$&&L<Y;)G=G<<6|63&N[L++],$--;1<$?re[V++]=65533:G<65536?re[V++]=G:(G-=65536,re[V++]=55296|G>>10&1023,re[V++]=56320|1023&G)}return re.length!==V&&(re.subarray?re=re.subarray(0,V):re.length=V),g.applyFromCharCode(re)}(A=g.transformTo(b.uint8array?"uint8array":"array",A))},g.inherits(O,S),O.prototype.processChunk=function(A){var N=g.transformTo(b.uint8array?"uint8array":"array",A.data);if(this.leftOver&&this.leftOver.length){if(b.uint8array){var L=N;(N=new Uint8Array(L.length+this.leftOver.length)).set(this.leftOver,0),N.set(L,this.leftOver.length)}else N=this.leftOver.concat(N);this.leftOver=null}var V=function($,Y){var re;for((Y=Y||$.length)>$.length&&(Y=$.length),re=Y-1;0<=re&&(192&$[re])==128;)re--;return re<0||re===0?Y:re+C[$[re]]>Y?re:Y}(N),G=N;V!==N.length&&(b.uint8array?(G=N.subarray(0,V),this.leftOver=N.subarray(V,N.length)):(G=N.slice(0,V),this.leftOver=N.slice(V,N.length))),this.push({data:f.utf8decode(G),meta:A.meta})},O.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:f.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},f.Utf8DecodeWorker=O,g.inherits(D,S),D.prototype.processChunk=function(A){this.push({data:f.utf8encode(A.data),meta:A.meta})},f.Utf8EncodeWorker=D},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(l,h,f){var g=l("./support"),b=l("./base64"),_=l("./nodejsUtils"),S=l("./external");function C(L){return L}function I(L,V){for(var G=0;G<L.length;++G)V[G]=255&L.charCodeAt(G);return V}l("setimmediate"),f.newBlob=function(L,V){f.checkSupport("blob");try{return new Blob([L],{type:V})}catch{try{var G=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return G.append(L),G.getBlob(V)}catch{throw new Error("Bug : can't construct the Blob.")}}};var O={stringifyByChunk:function(L,V,G){var $=[],Y=0,re=L.length;if(re<=G)return String.fromCharCode.apply(null,L);for(;Y<re;)V==="array"||V==="nodebuffer"?$.push(String.fromCharCode.apply(null,L.slice(Y,Math.min(Y+G,re)))):$.push(String.fromCharCode.apply(null,L.subarray(Y,Math.min(Y+G,re)))),Y+=G;return $.join("")},stringifyByChar:function(L){for(var V="",G=0;G<L.length;G++)V+=String.fromCharCode(L[G]);return V},applyCanBeUsed:{uint8array:function(){try{return g.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return g.nodebuffer&&String.fromCharCode.apply(null,_.allocBuffer(1)).length===1}catch{return!1}}()}};function D(L){var V=65536,G=f.getTypeOf(L),$=!0;if(G==="uint8array"?$=O.applyCanBeUsed.uint8array:G==="nodebuffer"&&($=O.applyCanBeUsed.nodebuffer),$)for(;1<V;)try{return O.stringifyByChunk(L,G,V)}catch{V=Math.floor(V/2)}return O.stringifyByChar(L)}function A(L,V){for(var G=0;G<L.length;G++)V[G]=L[G];return V}f.applyFromCharCode=D;var N={};N.string={string:C,array:function(L){return I(L,new Array(L.length))},arraybuffer:function(L){return N.string.uint8array(L).buffer},uint8array:function(L){return I(L,new Uint8Array(L.length))},nodebuffer:function(L){return I(L,_.allocBuffer(L.length))}},N.array={string:D,array:C,arraybuffer:function(L){return new Uint8Array(L).buffer},uint8array:function(L){return new Uint8Array(L)},nodebuffer:function(L){return _.newBufferFrom(L)}},N.arraybuffer={string:function(L){return D(new Uint8Array(L))},array:function(L){return A(new Uint8Array(L),new Array(L.byteLength))},arraybuffer:C,uint8array:function(L){return new Uint8Array(L)},nodebuffer:function(L){return _.newBufferFrom(new Uint8Array(L))}},N.uint8array={string:D,array:function(L){return A(L,new Array(L.length))},arraybuffer:function(L){return L.buffer},uint8array:C,nodebuffer:function(L){return _.newBufferFrom(L)}},N.nodebuffer={string:D,array:function(L){return A(L,new Array(L.length))},arraybuffer:function(L){return N.nodebuffer.uint8array(L).buffer},uint8array:function(L){return A(L,new Uint8Array(L.length))},nodebuffer:C},f.transformTo=function(L,V){if(V=V||"",!L)return V;f.checkSupport(L);var G=f.getTypeOf(V);return N[G][L](V)},f.resolve=function(L){for(var V=L.split("/"),G=[],$=0;$<V.length;$++){var Y=V[$];Y==="."||Y===""&&$!==0&&$!==V.length-1||(Y===".."?G.pop():G.push(Y))}return G.join("/")},f.getTypeOf=function(L){return typeof L=="string"?"string":Object.prototype.toString.call(L)==="[object Array]"?"array":g.nodebuffer&&_.isBuffer(L)?"nodebuffer":g.uint8array&&L instanceof Uint8Array?"uint8array":g.arraybuffer&&L instanceof ArrayBuffer?"arraybuffer":void 0},f.checkSupport=function(L){if(!g[L.toLowerCase()])throw new Error(L+" is not supported by this platform")},f.MAX_VALUE_16BITS=65535,f.MAX_VALUE_32BITS=-1,f.pretty=function(L){var V,G,$="";for(G=0;G<(L||"").length;G++)$+="\\x"+((V=L.charCodeAt(G))<16?"0":"")+V.toString(16).toUpperCase();return $},f.delay=function(L,V,G){setImmediate(function(){L.apply(G||null,V||[])})},f.inherits=function(L,V){function G(){}G.prototype=V.prototype,L.prototype=new G},f.extend=function(){var L,V,G={};for(L=0;L<arguments.length;L++)for(V in arguments[L])Object.prototype.hasOwnProperty.call(arguments[L],V)&&G[V]===void 0&&(G[V]=arguments[L][V]);return G},f.prepareContent=function(L,V,G,$,Y){return S.Promise.resolve(V).then(function(re){return g.blob&&(re instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(re))!==-1)&&typeof FileReader<"u"?new S.Promise(function(ne,le){var Ce=new FileReader;Ce.onload=function(ve){ne(ve.target.result)},Ce.onerror=function(ve){le(ve.target.error)},Ce.readAsArrayBuffer(re)}):re}).then(function(re){var ne=f.getTypeOf(re);return ne?(ne==="arraybuffer"?re=f.transformTo("uint8array",re):ne==="string"&&(Y?re=b.decode(re):G&&$!==!0&&(re=function(le){return I(le,g.uint8array?new Uint8Array(le.length):new Array(le.length))}(re))),re):S.Promise.reject(new Error("Can't read the data of '"+L+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(l,h,f){var g=l("./reader/readerFor"),b=l("./utils"),_=l("./signature"),S=l("./zipEntry"),C=l("./support");function I(O){this.files=[],this.loadOptions=O}I.prototype={checkSignature:function(O){if(!this.reader.readAndCheckSignature(O)){this.reader.index-=4;var D=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+b.pretty(D)+", expected "+b.pretty(O)+")")}},isSignature:function(O,D){var A=this.reader.index;this.reader.setIndex(O);var N=this.reader.readString(4)===D;return this.reader.setIndex(A),N},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var O=this.reader.readData(this.zipCommentLength),D=C.uint8array?"uint8array":"array",A=b.transformTo(D,O);this.zipComment=this.loadOptions.decodeFileName(A)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var O,D,A,N=this.zip64EndOfCentralSize-44;0<N;)O=this.reader.readInt(2),D=this.reader.readInt(4),A=this.reader.readData(D),this.zip64ExtensibleData[O]={id:O,length:D,value:A}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var O,D;for(O=0;O<this.files.length;O++)D=this.files[O],this.reader.setIndex(D.localHeaderOffset),this.checkSignature(_.LOCAL_FILE_HEADER),D.readLocalPart(this.reader),D.handleUTF8(),D.processAttributes()},readCentralDir:function(){var O;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(_.CENTRAL_FILE_HEADER);)(O=new S({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(O);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var O=this.reader.lastIndexOfSignature(_.CENTRAL_DIRECTORY_END);if(O<0)throw this.isSignature(0,_.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(O);var D=O;if(this.checkSignature(_.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===b.MAX_VALUE_16BITS||this.diskWithCentralDirStart===b.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===b.MAX_VALUE_16BITS||this.centralDirRecords===b.MAX_VALUE_16BITS||this.centralDirSize===b.MAX_VALUE_32BITS||this.centralDirOffset===b.MAX_VALUE_32BITS){if(this.zip64=!0,(O=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(O),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,_.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(_.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var A=this.centralDirOffset+this.centralDirSize;this.zip64&&(A+=20,A+=12+this.zip64EndOfCentralSize);var N=D-A;if(0<N)this.isSignature(D,_.CENTRAL_FILE_HEADER)||(this.reader.zero=N);else if(N<0)throw new Error("Corrupted zip: missing "+Math.abs(N)+" bytes.")},prepareReader:function(O){this.reader=g(O)},load:function(O){this.prepareReader(O),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},h.exports=I},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(l,h,f){var g=l("./reader/readerFor"),b=l("./utils"),_=l("./compressedObject"),S=l("./crc32"),C=l("./utf8"),I=l("./compressions"),O=l("./support");function D(A,N){this.options=A,this.loadOptions=N}D.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(A){var N,L;if(A.skip(22),this.fileNameLength=A.readInt(2),L=A.readInt(2),this.fileName=A.readData(this.fileNameLength),A.skip(L),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((N=function(V){for(var G in I)if(Object.prototype.hasOwnProperty.call(I,G)&&I[G].magic===V)return I[G];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+b.pretty(this.compressionMethod)+" unknown (inner file : "+b.transformTo("string",this.fileName)+")");this.decompressed=new _(this.compressedSize,this.uncompressedSize,this.crc32,N,A.readData(this.compressedSize))},readCentralPart:function(A){this.versionMadeBy=A.readInt(2),A.skip(2),this.bitFlag=A.readInt(2),this.compressionMethod=A.readString(2),this.date=A.readDate(),this.crc32=A.readInt(4),this.compressedSize=A.readInt(4),this.uncompressedSize=A.readInt(4);var N=A.readInt(2);if(this.extraFieldsLength=A.readInt(2),this.fileCommentLength=A.readInt(2),this.diskNumberStart=A.readInt(2),this.internalFileAttributes=A.readInt(2),this.externalFileAttributes=A.readInt(4),this.localHeaderOffset=A.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");A.skip(N),this.readExtraFields(A),this.parseZIP64ExtraField(A),this.fileComment=A.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var A=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),A==0&&(this.dosPermissions=63&this.externalFileAttributes),A==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var A=g(this.extraFields[1].value);this.uncompressedSize===b.MAX_VALUE_32BITS&&(this.uncompressedSize=A.readInt(8)),this.compressedSize===b.MAX_VALUE_32BITS&&(this.compressedSize=A.readInt(8)),this.localHeaderOffset===b.MAX_VALUE_32BITS&&(this.localHeaderOffset=A.readInt(8)),this.diskNumberStart===b.MAX_VALUE_32BITS&&(this.diskNumberStart=A.readInt(4))}},readExtraFields:function(A){var N,L,V,G=A.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});A.index+4<G;)N=A.readInt(2),L=A.readInt(2),V=A.readData(L),this.extraFields[N]={id:N,length:L,value:V};A.setIndex(G)},handleUTF8:function(){var A=O.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=C.utf8decode(this.fileName),this.fileCommentStr=C.utf8decode(this.fileComment);else{var N=this.findExtraFieldUnicodePath();if(N!==null)this.fileNameStr=N;else{var L=b.transformTo(A,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(L)}var V=this.findExtraFieldUnicodeComment();if(V!==null)this.fileCommentStr=V;else{var G=b.transformTo(A,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(G)}}},findExtraFieldUnicodePath:function(){var A=this.extraFields[28789];if(A){var N=g(A.value);return N.readInt(1)!==1||S(this.fileName)!==N.readInt(4)?null:C.utf8decode(N.readData(A.length-5))}return null},findExtraFieldUnicodeComment:function(){var A=this.extraFields[25461];if(A){var N=g(A.value);return N.readInt(1)!==1||S(this.fileComment)!==N.readInt(4)?null:C.utf8decode(N.readData(A.length-5))}return null}},h.exports=D},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(l,h,f){function g(N,L,V){this.name=N,this.dir=V.dir,this.date=V.date,this.comment=V.comment,this.unixPermissions=V.unixPermissions,this.dosPermissions=V.dosPermissions,this._data=L,this._dataBinary=V.binary,this.options={compression:V.compression,compressionOptions:V.compressionOptions}}var b=l("./stream/StreamHelper"),_=l("./stream/DataWorker"),S=l("./utf8"),C=l("./compressedObject"),I=l("./stream/GenericWorker");g.prototype={internalStream:function(N){var L=null,V="string";try{if(!N)throw new Error("No output type specified.");var G=(V=N.toLowerCase())==="string"||V==="text";V!=="binarystring"&&V!=="text"||(V="string"),L=this._decompressWorker();var $=!this._dataBinary;$&&!G&&(L=L.pipe(new S.Utf8EncodeWorker)),!$&&G&&(L=L.pipe(new S.Utf8DecodeWorker))}catch(Y){(L=new I("error")).error(Y)}return new b(L,V,"")},async:function(N,L){return this.internalStream(N).accumulate(L)},nodeStream:function(N,L){return this.internalStream(N||"nodebuffer").toNodejsStream(L)},_compressWorker:function(N,L){if(this._data instanceof C&&this._data.compression.magic===N.magic)return this._data.getCompressedWorker();var V=this._decompressWorker();return this._dataBinary||(V=V.pipe(new S.Utf8EncodeWorker)),C.createWorkerFrom(V,N,L)},_decompressWorker:function(){return this._data instanceof C?this._data.getContentWorker():this._data instanceof I?this._data:new _(this._data)}};for(var O=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],D=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},A=0;A<O.length;A++)g.prototype[O[A]]=D;h.exports=g},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(l,h,f){(function(g){var b,_,S=g.MutationObserver||g.WebKitMutationObserver;if(S){var C=0,I=new S(N),O=g.document.createTextNode("");I.observe(O,{characterData:!0}),b=function(){O.data=C=++C%2}}else if(g.setImmediate||g.MessageChannel===void 0)b="document"in g&&"onreadystatechange"in g.document.createElement("script")?function(){var L=g.document.createElement("script");L.onreadystatechange=function(){N(),L.onreadystatechange=null,L.parentNode.removeChild(L),L=null},g.document.documentElement.appendChild(L)}:function(){setTimeout(N,0)};else{var D=new g.MessageChannel;D.port1.onmessage=N,b=function(){D.port2.postMessage(0)}}var A=[];function N(){var L,V;_=!0;for(var G=A.length;G;){for(V=A,A=[],L=-1;++L<G;)V[L]();G=A.length}_=!1}h.exports=function(L){A.push(L)!==1||_||b()}}).call(this,typeof Gi<"u"?Gi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(l,h,f){var g=l("immediate");function b(){}var _={},S=["REJECTED"],C=["FULFILLED"],I=["PENDING"];function O(G){if(typeof G!="function")throw new TypeError("resolver must be a function");this.state=I,this.queue=[],this.outcome=void 0,G!==b&&L(this,G)}function D(G,$,Y){this.promise=G,typeof $=="function"&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),typeof Y=="function"&&(this.onRejected=Y,this.callRejected=this.otherCallRejected)}function A(G,$,Y){g(function(){var re;try{re=$(Y)}catch(ne){return _.reject(G,ne)}re===G?_.reject(G,new TypeError("Cannot resolve promise with itself")):_.resolve(G,re)})}function N(G){var $=G&&G.then;if(G&&(typeof G=="object"||typeof G=="function")&&typeof $=="function")return function(){$.apply(G,arguments)}}function L(G,$){var Y=!1;function re(Ce){Y||(Y=!0,_.reject(G,Ce))}function ne(Ce){Y||(Y=!0,_.resolve(G,Ce))}var le=V(function(){$(ne,re)});le.status==="error"&&re(le.value)}function V(G,$){var Y={};try{Y.value=G($),Y.status="success"}catch(re){Y.status="error",Y.value=re}return Y}(h.exports=O).prototype.finally=function(G){if(typeof G!="function")return this;var $=this.constructor;return this.then(function(Y){return $.resolve(G()).then(function(){return Y})},function(Y){return $.resolve(G()).then(function(){throw Y})})},O.prototype.catch=function(G){return this.then(null,G)},O.prototype.then=function(G,$){if(typeof G!="function"&&this.state===C||typeof $!="function"&&this.state===S)return this;var Y=new this.constructor(b);return this.state!==I?A(Y,this.state===C?G:$,this.outcome):this.queue.push(new D(Y,G,$)),Y},D.prototype.callFulfilled=function(G){_.resolve(this.promise,G)},D.prototype.otherCallFulfilled=function(G){A(this.promise,this.onFulfilled,G)},D.prototype.callRejected=function(G){_.reject(this.promise,G)},D.prototype.otherCallRejected=function(G){A(this.promise,this.onRejected,G)},_.resolve=function(G,$){var Y=V(N,$);if(Y.status==="error")return _.reject(G,Y.value);var re=Y.value;if(re)L(G,re);else{G.state=C,G.outcome=$;for(var ne=-1,le=G.queue.length;++ne<le;)G.queue[ne].callFulfilled($)}return G},_.reject=function(G,$){G.state=S,G.outcome=$;for(var Y=-1,re=G.queue.length;++Y<re;)G.queue[Y].callRejected($);return G},O.resolve=function(G){return G instanceof this?G:_.resolve(new this(b),G)},O.reject=function(G){var $=new this(b);return _.reject($,G)},O.all=function(G){var $=this;if(Object.prototype.toString.call(G)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Y=G.length,re=!1;if(!Y)return this.resolve([]);for(var ne=new Array(Y),le=0,Ce=-1,ve=new this(b);++Ce<Y;)we(G[Ce],Ce);return ve;function we(Le,lt){$.resolve(Le).then(function(ue){ne[lt]=ue,++le!==Y||re||(re=!0,_.resolve(ve,ne))},function(ue){re||(re=!0,_.reject(ve,ue))})}},O.race=function(G){var $=this;if(Object.prototype.toString.call(G)!=="[object Array]")return this.reject(new TypeError("must be an array"));var Y=G.length,re=!1;if(!Y)return this.resolve([]);for(var ne=-1,le=new this(b);++ne<Y;)Ce=G[ne],$.resolve(Ce).then(function(ve){re||(re=!0,_.resolve(le,ve))},function(ve){re||(re=!0,_.reject(le,ve))});var Ce;return le}},{immediate:36}],38:[function(l,h,f){var g={};(0,l("./lib/utils/common").assign)(g,l("./lib/deflate"),l("./lib/inflate"),l("./lib/zlib/constants")),h.exports=g},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(l,h,f){var g=l("./zlib/deflate"),b=l("./utils/common"),_=l("./utils/strings"),S=l("./zlib/messages"),C=l("./zlib/zstream"),I=Object.prototype.toString,O=0,D=-1,A=0,N=8;function L(G){if(!(this instanceof L))return new L(G);this.options=b.assign({level:D,method:N,chunkSize:16384,windowBits:15,memLevel:8,strategy:A,to:""},G||{});var $=this.options;$.raw&&0<$.windowBits?$.windowBits=-$.windowBits:$.gzip&&0<$.windowBits&&$.windowBits<16&&($.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new C,this.strm.avail_out=0;var Y=g.deflateInit2(this.strm,$.level,$.method,$.windowBits,$.memLevel,$.strategy);if(Y!==O)throw new Error(S[Y]);if($.header&&g.deflateSetHeader(this.strm,$.header),$.dictionary){var re;if(re=typeof $.dictionary=="string"?_.string2buf($.dictionary):I.call($.dictionary)==="[object ArrayBuffer]"?new Uint8Array($.dictionary):$.dictionary,(Y=g.deflateSetDictionary(this.strm,re))!==O)throw new Error(S[Y]);this._dict_set=!0}}function V(G,$){var Y=new L($);if(Y.push(G,!0),Y.err)throw Y.msg||S[Y.err];return Y.result}L.prototype.push=function(G,$){var Y,re,ne=this.strm,le=this.options.chunkSize;if(this.ended)return!1;re=$===~~$?$:$===!0?4:0,typeof G=="string"?ne.input=_.string2buf(G):I.call(G)==="[object ArrayBuffer]"?ne.input=new Uint8Array(G):ne.input=G,ne.next_in=0,ne.avail_in=ne.input.length;do{if(ne.avail_out===0&&(ne.output=new b.Buf8(le),ne.next_out=0,ne.avail_out=le),(Y=g.deflate(ne,re))!==1&&Y!==O)return this.onEnd(Y),!(this.ended=!0);ne.avail_out!==0&&(ne.avail_in!==0||re!==4&&re!==2)||(this.options.to==="string"?this.onData(_.buf2binstring(b.shrinkBuf(ne.output,ne.next_out))):this.onData(b.shrinkBuf(ne.output,ne.next_out)))}while((0<ne.avail_in||ne.avail_out===0)&&Y!==1);return re===4?(Y=g.deflateEnd(this.strm),this.onEnd(Y),this.ended=!0,Y===O):re!==2||(this.onEnd(O),!(ne.avail_out=0))},L.prototype.onData=function(G){this.chunks.push(G)},L.prototype.onEnd=function(G){G===O&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=G,this.msg=this.strm.msg},f.Deflate=L,f.deflate=V,f.deflateRaw=function(G,$){return($=$||{}).raw=!0,V(G,$)},f.gzip=function(G,$){return($=$||{}).gzip=!0,V(G,$)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(l,h,f){var g=l("./zlib/inflate"),b=l("./utils/common"),_=l("./utils/strings"),S=l("./zlib/constants"),C=l("./zlib/messages"),I=l("./zlib/zstream"),O=l("./zlib/gzheader"),D=Object.prototype.toString;function A(L){if(!(this instanceof A))return new A(L);this.options=b.assign({chunkSize:16384,windowBits:0,to:""},L||{});var V=this.options;V.raw&&0<=V.windowBits&&V.windowBits<16&&(V.windowBits=-V.windowBits,V.windowBits===0&&(V.windowBits=-15)),!(0<=V.windowBits&&V.windowBits<16)||L&&L.windowBits||(V.windowBits+=32),15<V.windowBits&&V.windowBits<48&&!(15&V.windowBits)&&(V.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new I,this.strm.avail_out=0;var G=g.inflateInit2(this.strm,V.windowBits);if(G!==S.Z_OK)throw new Error(C[G]);this.header=new O,g.inflateGetHeader(this.strm,this.header)}function N(L,V){var G=new A(V);if(G.push(L,!0),G.err)throw G.msg||C[G.err];return G.result}A.prototype.push=function(L,V){var G,$,Y,re,ne,le,Ce=this.strm,ve=this.options.chunkSize,we=this.options.dictionary,Le=!1;if(this.ended)return!1;$=V===~~V?V:V===!0?S.Z_FINISH:S.Z_NO_FLUSH,typeof L=="string"?Ce.input=_.binstring2buf(L):D.call(L)==="[object ArrayBuffer]"?Ce.input=new Uint8Array(L):Ce.input=L,Ce.next_in=0,Ce.avail_in=Ce.input.length;do{if(Ce.avail_out===0&&(Ce.output=new b.Buf8(ve),Ce.next_out=0,Ce.avail_out=ve),(G=g.inflate(Ce,S.Z_NO_FLUSH))===S.Z_NEED_DICT&&we&&(le=typeof we=="string"?_.string2buf(we):D.call(we)==="[object ArrayBuffer]"?new Uint8Array(we):we,G=g.inflateSetDictionary(this.strm,le)),G===S.Z_BUF_ERROR&&Le===!0&&(G=S.Z_OK,Le=!1),G!==S.Z_STREAM_END&&G!==S.Z_OK)return this.onEnd(G),!(this.ended=!0);Ce.next_out&&(Ce.avail_out!==0&&G!==S.Z_STREAM_END&&(Ce.avail_in!==0||$!==S.Z_FINISH&&$!==S.Z_SYNC_FLUSH)||(this.options.to==="string"?(Y=_.utf8border(Ce.output,Ce.next_out),re=Ce.next_out-Y,ne=_.buf2string(Ce.output,Y),Ce.next_out=re,Ce.avail_out=ve-re,re&&b.arraySet(Ce.output,Ce.output,Y,re,0),this.onData(ne)):this.onData(b.shrinkBuf(Ce.output,Ce.next_out)))),Ce.avail_in===0&&Ce.avail_out===0&&(Le=!0)}while((0<Ce.avail_in||Ce.avail_out===0)&&G!==S.Z_STREAM_END);return G===S.Z_STREAM_END&&($=S.Z_FINISH),$===S.Z_FINISH?(G=g.inflateEnd(this.strm),this.onEnd(G),this.ended=!0,G===S.Z_OK):$!==S.Z_SYNC_FLUSH||(this.onEnd(S.Z_OK),!(Ce.avail_out=0))},A.prototype.onData=function(L){this.chunks.push(L)},A.prototype.onEnd=function(L){L===S.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=b.flattenChunks(this.chunks)),this.chunks=[],this.err=L,this.msg=this.strm.msg},f.Inflate=A,f.inflate=N,f.inflateRaw=function(L,V){return(V=V||{}).raw=!0,N(L,V)},f.ungzip=N},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(l,h,f){var g=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";f.assign=function(S){for(var C=Array.prototype.slice.call(arguments,1);C.length;){var I=C.shift();if(I){if(typeof I!="object")throw new TypeError(I+"must be non-object");for(var O in I)I.hasOwnProperty(O)&&(S[O]=I[O])}}return S},f.shrinkBuf=function(S,C){return S.length===C?S:S.subarray?S.subarray(0,C):(S.length=C,S)};var b={arraySet:function(S,C,I,O,D){if(C.subarray&&S.subarray)S.set(C.subarray(I,I+O),D);else for(var A=0;A<O;A++)S[D+A]=C[I+A]},flattenChunks:function(S){var C,I,O,D,A,N;for(C=O=0,I=S.length;C<I;C++)O+=S[C].length;for(N=new Uint8Array(O),C=D=0,I=S.length;C<I;C++)A=S[C],N.set(A,D),D+=A.length;return N}},_={arraySet:function(S,C,I,O,D){for(var A=0;A<O;A++)S[D+A]=C[I+A]},flattenChunks:function(S){return[].concat.apply([],S)}};f.setTyped=function(S){S?(f.Buf8=Uint8Array,f.Buf16=Uint16Array,f.Buf32=Int32Array,f.assign(f,b)):(f.Buf8=Array,f.Buf16=Array,f.Buf32=Array,f.assign(f,_))},f.setTyped(g)},{}],42:[function(l,h,f){var g=l("./common"),b=!0,_=!0;try{String.fromCharCode.apply(null,[0])}catch{b=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_=!1}for(var S=new g.Buf8(256),C=0;C<256;C++)S[C]=252<=C?6:248<=C?5:240<=C?4:224<=C?3:192<=C?2:1;function I(O,D){if(D<65537&&(O.subarray&&_||!O.subarray&&b))return String.fromCharCode.apply(null,g.shrinkBuf(O,D));for(var A="",N=0;N<D;N++)A+=String.fromCharCode(O[N]);return A}S[254]=S[254]=1,f.string2buf=function(O){var D,A,N,L,V,G=O.length,$=0;for(L=0;L<G;L++)(64512&(A=O.charCodeAt(L)))==55296&&L+1<G&&(64512&(N=O.charCodeAt(L+1)))==56320&&(A=65536+(A-55296<<10)+(N-56320),L++),$+=A<128?1:A<2048?2:A<65536?3:4;for(D=new g.Buf8($),L=V=0;V<$;L++)(64512&(A=O.charCodeAt(L)))==55296&&L+1<G&&(64512&(N=O.charCodeAt(L+1)))==56320&&(A=65536+(A-55296<<10)+(N-56320),L++),A<128?D[V++]=A:(A<2048?D[V++]=192|A>>>6:(A<65536?D[V++]=224|A>>>12:(D[V++]=240|A>>>18,D[V++]=128|A>>>12&63),D[V++]=128|A>>>6&63),D[V++]=128|63&A);return D},f.buf2binstring=function(O){return I(O,O.length)},f.binstring2buf=function(O){for(var D=new g.Buf8(O.length),A=0,N=D.length;A<N;A++)D[A]=O.charCodeAt(A);return D},f.buf2string=function(O,D){var A,N,L,V,G=D||O.length,$=new Array(2*G);for(A=N=0;A<G;)if((L=O[A++])<128)$[N++]=L;else if(4<(V=S[L]))$[N++]=65533,A+=V-1;else{for(L&=V===2?31:V===3?15:7;1<V&&A<G;)L=L<<6|63&O[A++],V--;1<V?$[N++]=65533:L<65536?$[N++]=L:(L-=65536,$[N++]=55296|L>>10&1023,$[N++]=56320|1023&L)}return I($,N)},f.utf8border=function(O,D){var A;for((D=D||O.length)>O.length&&(D=O.length),A=D-1;0<=A&&(192&O[A])==128;)A--;return A<0||A===0?D:A+S[O[A]]>D?A:D}},{"./common":41}],43:[function(l,h,f){h.exports=function(g,b,_,S){for(var C=65535&g|0,I=g>>>16&65535|0,O=0;_!==0;){for(_-=O=2e3<_?2e3:_;I=I+(C=C+b[S++]|0)|0,--O;);C%=65521,I%=65521}return C|I<<16|0}},{}],44:[function(l,h,f){h.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(l,h,f){var g=function(){for(var b,_=[],S=0;S<256;S++){b=S;for(var C=0;C<8;C++)b=1&b?3988292384^b>>>1:b>>>1;_[S]=b}return _}();h.exports=function(b,_,S,C){var I=g,O=C+S;b^=-1;for(var D=C;D<O;D++)b=b>>>8^I[255&(b^_[D])];return-1^b}},{}],46:[function(l,h,f){var g,b=l("../utils/common"),_=l("./trees"),S=l("./adler32"),C=l("./crc32"),I=l("./messages"),O=0,D=4,A=0,N=-2,L=-1,V=4,G=2,$=8,Y=9,re=286,ne=30,le=19,Ce=2*re+1,ve=15,we=3,Le=258,lt=Le+we+1,ue=42,Oe=113,Q=1,We=2,Lt=3,Ie=4;function Re(J,mt){return J.msg=I[mt],mt}function Ke(J){return(J<<1)-(4<J?9:0)}function Ct(J){for(var mt=J.length;0<=--mt;)J[mt]=0}function ce(J){var mt=J.state,ft=mt.pending;ft>J.avail_out&&(ft=J.avail_out),ft!==0&&(b.arraySet(J.output,mt.pending_buf,mt.pending_out,ft,J.next_out),J.next_out+=ft,mt.pending_out+=ft,J.total_out+=ft,J.avail_out-=ft,mt.pending-=ft,mt.pending===0&&(mt.pending_out=0))}function me(J,mt){_._tr_flush_block(J,0<=J.block_start?J.block_start:-1,J.strstart-J.block_start,mt),J.block_start=J.strstart,ce(J.strm)}function tt(J,mt){J.pending_buf[J.pending++]=mt}function st(J,mt){J.pending_buf[J.pending++]=mt>>>8&255,J.pending_buf[J.pending++]=255&mt}function ht(J,mt){var ft,Ee,xe=J.max_chain_length,qe=J.strstart,Pt=J.prev_length,It=J.nice_match,nt=J.strstart>J.w_size-lt?J.strstart-(J.w_size-lt):0,zt=J.window,kt=J.w_mask,Rt=J.prev,Rn=J.strstart+Le,Or=zt[qe+Pt-1],tr=zt[qe+Pt];J.prev_length>=J.good_match&&(xe>>=2),It>J.lookahead&&(It=J.lookahead);do if(zt[(ft=mt)+Pt]===tr&&zt[ft+Pt-1]===Or&&zt[ft]===zt[qe]&&zt[++ft]===zt[qe+1]){qe+=2,ft++;do;while(zt[++qe]===zt[++ft]&&zt[++qe]===zt[++ft]&&zt[++qe]===zt[++ft]&&zt[++qe]===zt[++ft]&&zt[++qe]===zt[++ft]&&zt[++qe]===zt[++ft]&&zt[++qe]===zt[++ft]&&zt[++qe]===zt[++ft]&&qe<Rn);if(Ee=Le-(Rn-qe),qe=Rn-Le,Pt<Ee){if(J.match_start=mt,It<=(Pt=Ee))break;Or=zt[qe+Pt-1],tr=zt[qe+Pt]}}while((mt=Rt[mt&kt])>nt&&--xe!=0);return Pt<=J.lookahead?Pt:J.lookahead}function Xe(J){var mt,ft,Ee,xe,qe,Pt,It,nt,zt,kt,Rt=J.w_size;do{if(xe=J.window_size-J.lookahead-J.strstart,J.strstart>=Rt+(Rt-lt)){for(b.arraySet(J.window,J.window,Rt,Rt,0),J.match_start-=Rt,J.strstart-=Rt,J.block_start-=Rt,mt=ft=J.hash_size;Ee=J.head[--mt],J.head[mt]=Rt<=Ee?Ee-Rt:0,--ft;);for(mt=ft=Rt;Ee=J.prev[--mt],J.prev[mt]=Rt<=Ee?Ee-Rt:0,--ft;);xe+=Rt}if(J.strm.avail_in===0)break;if(Pt=J.strm,It=J.window,nt=J.strstart+J.lookahead,zt=xe,kt=void 0,kt=Pt.avail_in,zt<kt&&(kt=zt),ft=kt===0?0:(Pt.avail_in-=kt,b.arraySet(It,Pt.input,Pt.next_in,kt,nt),Pt.state.wrap===1?Pt.adler=S(Pt.adler,It,kt,nt):Pt.state.wrap===2&&(Pt.adler=C(Pt.adler,It,kt,nt)),Pt.next_in+=kt,Pt.total_in+=kt,kt),J.lookahead+=ft,J.lookahead+J.insert>=we)for(qe=J.strstart-J.insert,J.ins_h=J.window[qe],J.ins_h=(J.ins_h<<J.hash_shift^J.window[qe+1])&J.hash_mask;J.insert&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[qe+we-1])&J.hash_mask,J.prev[qe&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=qe,qe++,J.insert--,!(J.lookahead+J.insert<we)););}while(J.lookahead<lt&&J.strm.avail_in!==0)}function sn(J,mt){for(var ft,Ee;;){if(J.lookahead<lt){if(Xe(J),J.lookahead<lt&&mt===O)return Q;if(J.lookahead===0)break}if(ft=0,J.lookahead>=we&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+we-1])&J.hash_mask,ft=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),ft!==0&&J.strstart-ft<=J.w_size-lt&&(J.match_length=ht(J,ft)),J.match_length>=we)if(Ee=_._tr_tally(J,J.strstart-J.match_start,J.match_length-we),J.lookahead-=J.match_length,J.match_length<=J.max_lazy_match&&J.lookahead>=we){for(J.match_length--;J.strstart++,J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+we-1])&J.hash_mask,ft=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart,--J.match_length!=0;);J.strstart++}else J.strstart+=J.match_length,J.match_length=0,J.ins_h=J.window[J.strstart],J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+1])&J.hash_mask;else Ee=_._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++;if(Ee&&(me(J,!1),J.strm.avail_out===0))return Q}return J.insert=J.strstart<we-1?J.strstart:we-1,mt===D?(me(J,!0),J.strm.avail_out===0?Lt:Ie):J.last_lit&&(me(J,!1),J.strm.avail_out===0)?Q:We}function Et(J,mt){for(var ft,Ee,xe;;){if(J.lookahead<lt){if(Xe(J),J.lookahead<lt&&mt===O)return Q;if(J.lookahead===0)break}if(ft=0,J.lookahead>=we&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+we-1])&J.hash_mask,ft=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),J.prev_length=J.match_length,J.prev_match=J.match_start,J.match_length=we-1,ft!==0&&J.prev_length<J.max_lazy_match&&J.strstart-ft<=J.w_size-lt&&(J.match_length=ht(J,ft),J.match_length<=5&&(J.strategy===1||J.match_length===we&&4096<J.strstart-J.match_start)&&(J.match_length=we-1)),J.prev_length>=we&&J.match_length<=J.prev_length){for(xe=J.strstart+J.lookahead-we,Ee=_._tr_tally(J,J.strstart-1-J.prev_match,J.prev_length-we),J.lookahead-=J.prev_length-1,J.prev_length-=2;++J.strstart<=xe&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+we-1])&J.hash_mask,ft=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),--J.prev_length!=0;);if(J.match_available=0,J.match_length=we-1,J.strstart++,Ee&&(me(J,!1),J.strm.avail_out===0))return Q}else if(J.match_available){if((Ee=_._tr_tally(J,0,J.window[J.strstart-1]))&&me(J,!1),J.strstart++,J.lookahead--,J.strm.avail_out===0)return Q}else J.match_available=1,J.strstart++,J.lookahead--}return J.match_available&&(Ee=_._tr_tally(J,0,J.window[J.strstart-1]),J.match_available=0),J.insert=J.strstart<we-1?J.strstart:we-1,mt===D?(me(J,!0),J.strm.avail_out===0?Lt:Ie):J.last_lit&&(me(J,!1),J.strm.avail_out===0)?Q:We}function Qt(J,mt,ft,Ee,xe){this.good_length=J,this.max_lazy=mt,this.nice_length=ft,this.max_chain=Ee,this.func=xe}function _n(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new b.Buf16(2*Ce),this.dyn_dtree=new b.Buf16(2*(2*ne+1)),this.bl_tree=new b.Buf16(2*(2*le+1)),Ct(this.dyn_ltree),Ct(this.dyn_dtree),Ct(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new b.Buf16(ve+1),this.heap=new b.Buf16(2*re+1),Ct(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new b.Buf16(2*re+1),Ct(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Vn(J){var mt;return J&&J.state?(J.total_in=J.total_out=0,J.data_type=G,(mt=J.state).pending=0,mt.pending_out=0,mt.wrap<0&&(mt.wrap=-mt.wrap),mt.status=mt.wrap?ue:Oe,J.adler=mt.wrap===2?0:1,mt.last_flush=O,_._tr_init(mt),A):Re(J,N)}function Ln(J){var mt=Vn(J);return mt===A&&function(ft){ft.window_size=2*ft.w_size,Ct(ft.head),ft.max_lazy_match=g[ft.level].max_lazy,ft.good_match=g[ft.level].good_length,ft.nice_match=g[ft.level].nice_length,ft.max_chain_length=g[ft.level].max_chain,ft.strstart=0,ft.block_start=0,ft.lookahead=0,ft.insert=0,ft.match_length=ft.prev_length=we-1,ft.match_available=0,ft.ins_h=0}(J.state),mt}function Wr(J,mt,ft,Ee,xe,qe){if(!J)return N;var Pt=1;if(mt===L&&(mt=6),Ee<0?(Pt=0,Ee=-Ee):15<Ee&&(Pt=2,Ee-=16),xe<1||Y<xe||ft!==$||Ee<8||15<Ee||mt<0||9<mt||qe<0||V<qe)return Re(J,N);Ee===8&&(Ee=9);var It=new _n;return(J.state=It).strm=J,It.wrap=Pt,It.gzhead=null,It.w_bits=Ee,It.w_size=1<<It.w_bits,It.w_mask=It.w_size-1,It.hash_bits=xe+7,It.hash_size=1<<It.hash_bits,It.hash_mask=It.hash_size-1,It.hash_shift=~~((It.hash_bits+we-1)/we),It.window=new b.Buf8(2*It.w_size),It.head=new b.Buf16(It.hash_size),It.prev=new b.Buf16(It.w_size),It.lit_bufsize=1<<xe+6,It.pending_buf_size=4*It.lit_bufsize,It.pending_buf=new b.Buf8(It.pending_buf_size),It.d_buf=1*It.lit_bufsize,It.l_buf=3*It.lit_bufsize,It.level=mt,It.strategy=qe,It.method=ft,Ln(J)}g=[new Qt(0,0,0,0,function(J,mt){var ft=65535;for(ft>J.pending_buf_size-5&&(ft=J.pending_buf_size-5);;){if(J.lookahead<=1){if(Xe(J),J.lookahead===0&&mt===O)return Q;if(J.lookahead===0)break}J.strstart+=J.lookahead,J.lookahead=0;var Ee=J.block_start+ft;if((J.strstart===0||J.strstart>=Ee)&&(J.lookahead=J.strstart-Ee,J.strstart=Ee,me(J,!1),J.strm.avail_out===0)||J.strstart-J.block_start>=J.w_size-lt&&(me(J,!1),J.strm.avail_out===0))return Q}return J.insert=0,mt===D?(me(J,!0),J.strm.avail_out===0?Lt:Ie):(J.strstart>J.block_start&&(me(J,!1),J.strm.avail_out),Q)}),new Qt(4,4,8,4,sn),new Qt(4,5,16,8,sn),new Qt(4,6,32,32,sn),new Qt(4,4,16,16,Et),new Qt(8,16,32,32,Et),new Qt(8,16,128,128,Et),new Qt(8,32,128,256,Et),new Qt(32,128,258,1024,Et),new Qt(32,258,258,4096,Et)],f.deflateInit=function(J,mt){return Wr(J,mt,$,15,8,0)},f.deflateInit2=Wr,f.deflateReset=Ln,f.deflateResetKeep=Vn,f.deflateSetHeader=function(J,mt){return J&&J.state?J.state.wrap!==2?N:(J.state.gzhead=mt,A):N},f.deflate=function(J,mt){var ft,Ee,xe,qe;if(!J||!J.state||5<mt||mt<0)return J?Re(J,N):N;if(Ee=J.state,!J.output||!J.input&&J.avail_in!==0||Ee.status===666&&mt!==D)return Re(J,J.avail_out===0?-5:N);if(Ee.strm=J,ft=Ee.last_flush,Ee.last_flush=mt,Ee.status===ue)if(Ee.wrap===2)J.adler=0,tt(Ee,31),tt(Ee,139),tt(Ee,8),Ee.gzhead?(tt(Ee,(Ee.gzhead.text?1:0)+(Ee.gzhead.hcrc?2:0)+(Ee.gzhead.extra?4:0)+(Ee.gzhead.name?8:0)+(Ee.gzhead.comment?16:0)),tt(Ee,255&Ee.gzhead.time),tt(Ee,Ee.gzhead.time>>8&255),tt(Ee,Ee.gzhead.time>>16&255),tt(Ee,Ee.gzhead.time>>24&255),tt(Ee,Ee.level===9?2:2<=Ee.strategy||Ee.level<2?4:0),tt(Ee,255&Ee.gzhead.os),Ee.gzhead.extra&&Ee.gzhead.extra.length&&(tt(Ee,255&Ee.gzhead.extra.length),tt(Ee,Ee.gzhead.extra.length>>8&255)),Ee.gzhead.hcrc&&(J.adler=C(J.adler,Ee.pending_buf,Ee.pending,0)),Ee.gzindex=0,Ee.status=69):(tt(Ee,0),tt(Ee,0),tt(Ee,0),tt(Ee,0),tt(Ee,0),tt(Ee,Ee.level===9?2:2<=Ee.strategy||Ee.level<2?4:0),tt(Ee,3),Ee.status=Oe);else{var Pt=$+(Ee.w_bits-8<<4)<<8;Pt|=(2<=Ee.strategy||Ee.level<2?0:Ee.level<6?1:Ee.level===6?2:3)<<6,Ee.strstart!==0&&(Pt|=32),Pt+=31-Pt%31,Ee.status=Oe,st(Ee,Pt),Ee.strstart!==0&&(st(Ee,J.adler>>>16),st(Ee,65535&J.adler)),J.adler=1}if(Ee.status===69)if(Ee.gzhead.extra){for(xe=Ee.pending;Ee.gzindex<(65535&Ee.gzhead.extra.length)&&(Ee.pending!==Ee.pending_buf_size||(Ee.gzhead.hcrc&&Ee.pending>xe&&(J.adler=C(J.adler,Ee.pending_buf,Ee.pending-xe,xe)),ce(J),xe=Ee.pending,Ee.pending!==Ee.pending_buf_size));)tt(Ee,255&Ee.gzhead.extra[Ee.gzindex]),Ee.gzindex++;Ee.gzhead.hcrc&&Ee.pending>xe&&(J.adler=C(J.adler,Ee.pending_buf,Ee.pending-xe,xe)),Ee.gzindex===Ee.gzhead.extra.length&&(Ee.gzindex=0,Ee.status=73)}else Ee.status=73;if(Ee.status===73)if(Ee.gzhead.name){xe=Ee.pending;do{if(Ee.pending===Ee.pending_buf_size&&(Ee.gzhead.hcrc&&Ee.pending>xe&&(J.adler=C(J.adler,Ee.pending_buf,Ee.pending-xe,xe)),ce(J),xe=Ee.pending,Ee.pending===Ee.pending_buf_size)){qe=1;break}qe=Ee.gzindex<Ee.gzhead.name.length?255&Ee.gzhead.name.charCodeAt(Ee.gzindex++):0,tt(Ee,qe)}while(qe!==0);Ee.gzhead.hcrc&&Ee.pending>xe&&(J.adler=C(J.adler,Ee.pending_buf,Ee.pending-xe,xe)),qe===0&&(Ee.gzindex=0,Ee.status=91)}else Ee.status=91;if(Ee.status===91)if(Ee.gzhead.comment){xe=Ee.pending;do{if(Ee.pending===Ee.pending_buf_size&&(Ee.gzhead.hcrc&&Ee.pending>xe&&(J.adler=C(J.adler,Ee.pending_buf,Ee.pending-xe,xe)),ce(J),xe=Ee.pending,Ee.pending===Ee.pending_buf_size)){qe=1;break}qe=Ee.gzindex<Ee.gzhead.comment.length?255&Ee.gzhead.comment.charCodeAt(Ee.gzindex++):0,tt(Ee,qe)}while(qe!==0);Ee.gzhead.hcrc&&Ee.pending>xe&&(J.adler=C(J.adler,Ee.pending_buf,Ee.pending-xe,xe)),qe===0&&(Ee.status=103)}else Ee.status=103;if(Ee.status===103&&(Ee.gzhead.hcrc?(Ee.pending+2>Ee.pending_buf_size&&ce(J),Ee.pending+2<=Ee.pending_buf_size&&(tt(Ee,255&J.adler),tt(Ee,J.adler>>8&255),J.adler=0,Ee.status=Oe)):Ee.status=Oe),Ee.pending!==0){if(ce(J),J.avail_out===0)return Ee.last_flush=-1,A}else if(J.avail_in===0&&Ke(mt)<=Ke(ft)&&mt!==D)return Re(J,-5);if(Ee.status===666&&J.avail_in!==0)return Re(J,-5);if(J.avail_in!==0||Ee.lookahead!==0||mt!==O&&Ee.status!==666){var It=Ee.strategy===2?function(nt,zt){for(var kt;;){if(nt.lookahead===0&&(Xe(nt),nt.lookahead===0)){if(zt===O)return Q;break}if(nt.match_length=0,kt=_._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++,kt&&(me(nt,!1),nt.strm.avail_out===0))return Q}return nt.insert=0,zt===D?(me(nt,!0),nt.strm.avail_out===0?Lt:Ie):nt.last_lit&&(me(nt,!1),nt.strm.avail_out===0)?Q:We}(Ee,mt):Ee.strategy===3?function(nt,zt){for(var kt,Rt,Rn,Or,tr=nt.window;;){if(nt.lookahead<=Le){if(Xe(nt),nt.lookahead<=Le&&zt===O)return Q;if(nt.lookahead===0)break}if(nt.match_length=0,nt.lookahead>=we&&0<nt.strstart&&(Rt=tr[Rn=nt.strstart-1])===tr[++Rn]&&Rt===tr[++Rn]&&Rt===tr[++Rn]){Or=nt.strstart+Le;do;while(Rt===tr[++Rn]&&Rt===tr[++Rn]&&Rt===tr[++Rn]&&Rt===tr[++Rn]&&Rt===tr[++Rn]&&Rt===tr[++Rn]&&Rt===tr[++Rn]&&Rt===tr[++Rn]&&Rn<Or);nt.match_length=Le-(Or-Rn),nt.match_length>nt.lookahead&&(nt.match_length=nt.lookahead)}if(nt.match_length>=we?(kt=_._tr_tally(nt,1,nt.match_length-we),nt.lookahead-=nt.match_length,nt.strstart+=nt.match_length,nt.match_length=0):(kt=_._tr_tally(nt,0,nt.window[nt.strstart]),nt.lookahead--,nt.strstart++),kt&&(me(nt,!1),nt.strm.avail_out===0))return Q}return nt.insert=0,zt===D?(me(nt,!0),nt.strm.avail_out===0?Lt:Ie):nt.last_lit&&(me(nt,!1),nt.strm.avail_out===0)?Q:We}(Ee,mt):g[Ee.level].func(Ee,mt);if(It!==Lt&&It!==Ie||(Ee.status=666),It===Q||It===Lt)return J.avail_out===0&&(Ee.last_flush=-1),A;if(It===We&&(mt===1?_._tr_align(Ee):mt!==5&&(_._tr_stored_block(Ee,0,0,!1),mt===3&&(Ct(Ee.head),Ee.lookahead===0&&(Ee.strstart=0,Ee.block_start=0,Ee.insert=0))),ce(J),J.avail_out===0))return Ee.last_flush=-1,A}return mt!==D?A:Ee.wrap<=0?1:(Ee.wrap===2?(tt(Ee,255&J.adler),tt(Ee,J.adler>>8&255),tt(Ee,J.adler>>16&255),tt(Ee,J.adler>>24&255),tt(Ee,255&J.total_in),tt(Ee,J.total_in>>8&255),tt(Ee,J.total_in>>16&255),tt(Ee,J.total_in>>24&255)):(st(Ee,J.adler>>>16),st(Ee,65535&J.adler)),ce(J),0<Ee.wrap&&(Ee.wrap=-Ee.wrap),Ee.pending!==0?A:1)},f.deflateEnd=function(J){var mt;return J&&J.state?(mt=J.state.status)!==ue&&mt!==69&&mt!==73&&mt!==91&&mt!==103&&mt!==Oe&&mt!==666?Re(J,N):(J.state=null,mt===Oe?Re(J,-3):A):N},f.deflateSetDictionary=function(J,mt){var ft,Ee,xe,qe,Pt,It,nt,zt,kt=mt.length;if(!J||!J.state||(qe=(ft=J.state).wrap)===2||qe===1&&ft.status!==ue||ft.lookahead)return N;for(qe===1&&(J.adler=S(J.adler,mt,kt,0)),ft.wrap=0,kt>=ft.w_size&&(qe===0&&(Ct(ft.head),ft.strstart=0,ft.block_start=0,ft.insert=0),zt=new b.Buf8(ft.w_size),b.arraySet(zt,mt,kt-ft.w_size,ft.w_size,0),mt=zt,kt=ft.w_size),Pt=J.avail_in,It=J.next_in,nt=J.input,J.avail_in=kt,J.next_in=0,J.input=mt,Xe(ft);ft.lookahead>=we;){for(Ee=ft.strstart,xe=ft.lookahead-(we-1);ft.ins_h=(ft.ins_h<<ft.hash_shift^ft.window[Ee+we-1])&ft.hash_mask,ft.prev[Ee&ft.w_mask]=ft.head[ft.ins_h],ft.head[ft.ins_h]=Ee,Ee++,--xe;);ft.strstart=Ee,ft.lookahead=we-1,Xe(ft)}return ft.strstart+=ft.lookahead,ft.block_start=ft.strstart,ft.insert=ft.lookahead,ft.lookahead=0,ft.match_length=ft.prev_length=we-1,ft.match_available=0,J.next_in=It,J.input=nt,J.avail_in=Pt,ft.wrap=qe,A},f.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(l,h,f){h.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(l,h,f){h.exports=function(g,b){var _,S,C,I,O,D,A,N,L,V,G,$,Y,re,ne,le,Ce,ve,we,Le,lt,ue,Oe,Q,We;_=g.state,S=g.next_in,Q=g.input,C=S+(g.avail_in-5),I=g.next_out,We=g.output,O=I-(b-g.avail_out),D=I+(g.avail_out-257),A=_.dmax,N=_.wsize,L=_.whave,V=_.wnext,G=_.window,$=_.hold,Y=_.bits,re=_.lencode,ne=_.distcode,le=(1<<_.lenbits)-1,Ce=(1<<_.distbits)-1;e:do{Y<15&&($+=Q[S++]<<Y,Y+=8,$+=Q[S++]<<Y,Y+=8),ve=re[$&le];t:for(;;){if($>>>=we=ve>>>24,Y-=we,(we=ve>>>16&255)===0)We[I++]=65535&ve;else{if(!(16&we)){if(!(64&we)){ve=re[(65535&ve)+($&(1<<we)-1)];continue t}if(32&we){_.mode=12;break e}g.msg="invalid literal/length code",_.mode=30;break e}Le=65535&ve,(we&=15)&&(Y<we&&($+=Q[S++]<<Y,Y+=8),Le+=$&(1<<we)-1,$>>>=we,Y-=we),Y<15&&($+=Q[S++]<<Y,Y+=8,$+=Q[S++]<<Y,Y+=8),ve=ne[$&Ce];n:for(;;){if($>>>=we=ve>>>24,Y-=we,!(16&(we=ve>>>16&255))){if(!(64&we)){ve=ne[(65535&ve)+($&(1<<we)-1)];continue n}g.msg="invalid distance code",_.mode=30;break e}if(lt=65535&ve,Y<(we&=15)&&($+=Q[S++]<<Y,(Y+=8)<we&&($+=Q[S++]<<Y,Y+=8)),A<(lt+=$&(1<<we)-1)){g.msg="invalid distance too far back",_.mode=30;break e}if($>>>=we,Y-=we,(we=I-O)<lt){if(L<(we=lt-we)&&_.sane){g.msg="invalid distance too far back",_.mode=30;break e}if(Oe=G,(ue=0)===V){if(ue+=N-we,we<Le){for(Le-=we;We[I++]=G[ue++],--we;);ue=I-lt,Oe=We}}else if(V<we){if(ue+=N+V-we,(we-=V)<Le){for(Le-=we;We[I++]=G[ue++],--we;);if(ue=0,V<Le){for(Le-=we=V;We[I++]=G[ue++],--we;);ue=I-lt,Oe=We}}}else if(ue+=V-we,we<Le){for(Le-=we;We[I++]=G[ue++],--we;);ue=I-lt,Oe=We}for(;2<Le;)We[I++]=Oe[ue++],We[I++]=Oe[ue++],We[I++]=Oe[ue++],Le-=3;Le&&(We[I++]=Oe[ue++],1<Le&&(We[I++]=Oe[ue++]))}else{for(ue=I-lt;We[I++]=We[ue++],We[I++]=We[ue++],We[I++]=We[ue++],2<(Le-=3););Le&&(We[I++]=We[ue++],1<Le&&(We[I++]=We[ue++]))}break}}break}}while(S<C&&I<D);S-=Le=Y>>3,$&=(1<<(Y-=Le<<3))-1,g.next_in=S,g.next_out=I,g.avail_in=S<C?C-S+5:5-(S-C),g.avail_out=I<D?D-I+257:257-(I-D),_.hold=$,_.bits=Y}},{}],49:[function(l,h,f){var g=l("../utils/common"),b=l("./adler32"),_=l("./crc32"),S=l("./inffast"),C=l("./inftrees"),I=1,O=2,D=0,A=-2,N=1,L=852,V=592;function G(ue){return(ue>>>24&255)+(ue>>>8&65280)+((65280&ue)<<8)+((255&ue)<<24)}function $(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new g.Buf16(320),this.work=new g.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Y(ue){var Oe;return ue&&ue.state?(Oe=ue.state,ue.total_in=ue.total_out=Oe.total=0,ue.msg="",Oe.wrap&&(ue.adler=1&Oe.wrap),Oe.mode=N,Oe.last=0,Oe.havedict=0,Oe.dmax=32768,Oe.head=null,Oe.hold=0,Oe.bits=0,Oe.lencode=Oe.lendyn=new g.Buf32(L),Oe.distcode=Oe.distdyn=new g.Buf32(V),Oe.sane=1,Oe.back=-1,D):A}function re(ue){var Oe;return ue&&ue.state?((Oe=ue.state).wsize=0,Oe.whave=0,Oe.wnext=0,Y(ue)):A}function ne(ue,Oe){var Q,We;return ue&&ue.state?(We=ue.state,Oe<0?(Q=0,Oe=-Oe):(Q=1+(Oe>>4),Oe<48&&(Oe&=15)),Oe&&(Oe<8||15<Oe)?A:(We.window!==null&&We.wbits!==Oe&&(We.window=null),We.wrap=Q,We.wbits=Oe,re(ue))):A}function le(ue,Oe){var Q,We;return ue?(We=new $,(ue.state=We).window=null,(Q=ne(ue,Oe))!==D&&(ue.state=null),Q):A}var Ce,ve,we=!0;function Le(ue){if(we){var Oe;for(Ce=new g.Buf32(512),ve=new g.Buf32(32),Oe=0;Oe<144;)ue.lens[Oe++]=8;for(;Oe<256;)ue.lens[Oe++]=9;for(;Oe<280;)ue.lens[Oe++]=7;for(;Oe<288;)ue.lens[Oe++]=8;for(C(I,ue.lens,0,288,Ce,0,ue.work,{bits:9}),Oe=0;Oe<32;)ue.lens[Oe++]=5;C(O,ue.lens,0,32,ve,0,ue.work,{bits:5}),we=!1}ue.lencode=Ce,ue.lenbits=9,ue.distcode=ve,ue.distbits=5}function lt(ue,Oe,Q,We){var Lt,Ie=ue.state;return Ie.window===null&&(Ie.wsize=1<<Ie.wbits,Ie.wnext=0,Ie.whave=0,Ie.window=new g.Buf8(Ie.wsize)),We>=Ie.wsize?(g.arraySet(Ie.window,Oe,Q-Ie.wsize,Ie.wsize,0),Ie.wnext=0,Ie.whave=Ie.wsize):(We<(Lt=Ie.wsize-Ie.wnext)&&(Lt=We),g.arraySet(Ie.window,Oe,Q-We,Lt,Ie.wnext),(We-=Lt)?(g.arraySet(Ie.window,Oe,Q-We,We,0),Ie.wnext=We,Ie.whave=Ie.wsize):(Ie.wnext+=Lt,Ie.wnext===Ie.wsize&&(Ie.wnext=0),Ie.whave<Ie.wsize&&(Ie.whave+=Lt))),0}f.inflateReset=re,f.inflateReset2=ne,f.inflateResetKeep=Y,f.inflateInit=function(ue){return le(ue,15)},f.inflateInit2=le,f.inflate=function(ue,Oe){var Q,We,Lt,Ie,Re,Ke,Ct,ce,me,tt,st,ht,Xe,sn,Et,Qt,_n,Vn,Ln,Wr,J,mt,ft,Ee,xe=0,qe=new g.Buf8(4),Pt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ue||!ue.state||!ue.output||!ue.input&&ue.avail_in!==0)return A;(Q=ue.state).mode===12&&(Q.mode=13),Re=ue.next_out,Lt=ue.output,Ct=ue.avail_out,Ie=ue.next_in,We=ue.input,Ke=ue.avail_in,ce=Q.hold,me=Q.bits,tt=Ke,st=Ct,mt=D;e:for(;;)switch(Q.mode){case N:if(Q.wrap===0){Q.mode=13;break}for(;me<16;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}if(2&Q.wrap&&ce===35615){qe[Q.check=0]=255&ce,qe[1]=ce>>>8&255,Q.check=_(Q.check,qe,2,0),me=ce=0,Q.mode=2;break}if(Q.flags=0,Q.head&&(Q.head.done=!1),!(1&Q.wrap)||(((255&ce)<<8)+(ce>>8))%31){ue.msg="incorrect header check",Q.mode=30;break}if((15&ce)!=8){ue.msg="unknown compression method",Q.mode=30;break}if(me-=4,J=8+(15&(ce>>>=4)),Q.wbits===0)Q.wbits=J;else if(J>Q.wbits){ue.msg="invalid window size",Q.mode=30;break}Q.dmax=1<<J,ue.adler=Q.check=1,Q.mode=512&ce?10:12,me=ce=0;break;case 2:for(;me<16;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}if(Q.flags=ce,(255&Q.flags)!=8){ue.msg="unknown compression method",Q.mode=30;break}if(57344&Q.flags){ue.msg="unknown header flags set",Q.mode=30;break}Q.head&&(Q.head.text=ce>>8&1),512&Q.flags&&(qe[0]=255&ce,qe[1]=ce>>>8&255,Q.check=_(Q.check,qe,2,0)),me=ce=0,Q.mode=3;case 3:for(;me<32;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}Q.head&&(Q.head.time=ce),512&Q.flags&&(qe[0]=255&ce,qe[1]=ce>>>8&255,qe[2]=ce>>>16&255,qe[3]=ce>>>24&255,Q.check=_(Q.check,qe,4,0)),me=ce=0,Q.mode=4;case 4:for(;me<16;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}Q.head&&(Q.head.xflags=255&ce,Q.head.os=ce>>8),512&Q.flags&&(qe[0]=255&ce,qe[1]=ce>>>8&255,Q.check=_(Q.check,qe,2,0)),me=ce=0,Q.mode=5;case 5:if(1024&Q.flags){for(;me<16;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}Q.length=ce,Q.head&&(Q.head.extra_len=ce),512&Q.flags&&(qe[0]=255&ce,qe[1]=ce>>>8&255,Q.check=_(Q.check,qe,2,0)),me=ce=0}else Q.head&&(Q.head.extra=null);Q.mode=6;case 6:if(1024&Q.flags&&(Ke<(ht=Q.length)&&(ht=Ke),ht&&(Q.head&&(J=Q.head.extra_len-Q.length,Q.head.extra||(Q.head.extra=new Array(Q.head.extra_len)),g.arraySet(Q.head.extra,We,Ie,ht,J)),512&Q.flags&&(Q.check=_(Q.check,We,ht,Ie)),Ke-=ht,Ie+=ht,Q.length-=ht),Q.length))break e;Q.length=0,Q.mode=7;case 7:if(2048&Q.flags){if(Ke===0)break e;for(ht=0;J=We[Ie+ht++],Q.head&&J&&Q.length<65536&&(Q.head.name+=String.fromCharCode(J)),J&&ht<Ke;);if(512&Q.flags&&(Q.check=_(Q.check,We,ht,Ie)),Ke-=ht,Ie+=ht,J)break e}else Q.head&&(Q.head.name=null);Q.length=0,Q.mode=8;case 8:if(4096&Q.flags){if(Ke===0)break e;for(ht=0;J=We[Ie+ht++],Q.head&&J&&Q.length<65536&&(Q.head.comment+=String.fromCharCode(J)),J&&ht<Ke;);if(512&Q.flags&&(Q.check=_(Q.check,We,ht,Ie)),Ke-=ht,Ie+=ht,J)break e}else Q.head&&(Q.head.comment=null);Q.mode=9;case 9:if(512&Q.flags){for(;me<16;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}if(ce!==(65535&Q.check)){ue.msg="header crc mismatch",Q.mode=30;break}me=ce=0}Q.head&&(Q.head.hcrc=Q.flags>>9&1,Q.head.done=!0),ue.adler=Q.check=0,Q.mode=12;break;case 10:for(;me<32;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}ue.adler=Q.check=G(ce),me=ce=0,Q.mode=11;case 11:if(Q.havedict===0)return ue.next_out=Re,ue.avail_out=Ct,ue.next_in=Ie,ue.avail_in=Ke,Q.hold=ce,Q.bits=me,2;ue.adler=Q.check=1,Q.mode=12;case 12:if(Oe===5||Oe===6)break e;case 13:if(Q.last){ce>>>=7&me,me-=7&me,Q.mode=27;break}for(;me<3;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}switch(Q.last=1&ce,me-=1,3&(ce>>>=1)){case 0:Q.mode=14;break;case 1:if(Le(Q),Q.mode=20,Oe!==6)break;ce>>>=2,me-=2;break e;case 2:Q.mode=17;break;case 3:ue.msg="invalid block type",Q.mode=30}ce>>>=2,me-=2;break;case 14:for(ce>>>=7&me,me-=7&me;me<32;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}if((65535&ce)!=(ce>>>16^65535)){ue.msg="invalid stored block lengths",Q.mode=30;break}if(Q.length=65535&ce,me=ce=0,Q.mode=15,Oe===6)break e;case 15:Q.mode=16;case 16:if(ht=Q.length){if(Ke<ht&&(ht=Ke),Ct<ht&&(ht=Ct),ht===0)break e;g.arraySet(Lt,We,Ie,ht,Re),Ke-=ht,Ie+=ht,Ct-=ht,Re+=ht,Q.length-=ht;break}Q.mode=12;break;case 17:for(;me<14;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}if(Q.nlen=257+(31&ce),ce>>>=5,me-=5,Q.ndist=1+(31&ce),ce>>>=5,me-=5,Q.ncode=4+(15&ce),ce>>>=4,me-=4,286<Q.nlen||30<Q.ndist){ue.msg="too many length or distance symbols",Q.mode=30;break}Q.have=0,Q.mode=18;case 18:for(;Q.have<Q.ncode;){for(;me<3;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}Q.lens[Pt[Q.have++]]=7&ce,ce>>>=3,me-=3}for(;Q.have<19;)Q.lens[Pt[Q.have++]]=0;if(Q.lencode=Q.lendyn,Q.lenbits=7,ft={bits:Q.lenbits},mt=C(0,Q.lens,0,19,Q.lencode,0,Q.work,ft),Q.lenbits=ft.bits,mt){ue.msg="invalid code lengths set",Q.mode=30;break}Q.have=0,Q.mode=19;case 19:for(;Q.have<Q.nlen+Q.ndist;){for(;Qt=(xe=Q.lencode[ce&(1<<Q.lenbits)-1])>>>16&255,_n=65535&xe,!((Et=xe>>>24)<=me);){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}if(_n<16)ce>>>=Et,me-=Et,Q.lens[Q.have++]=_n;else{if(_n===16){for(Ee=Et+2;me<Ee;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}if(ce>>>=Et,me-=Et,Q.have===0){ue.msg="invalid bit length repeat",Q.mode=30;break}J=Q.lens[Q.have-1],ht=3+(3&ce),ce>>>=2,me-=2}else if(_n===17){for(Ee=Et+3;me<Ee;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}me-=Et,J=0,ht=3+(7&(ce>>>=Et)),ce>>>=3,me-=3}else{for(Ee=Et+7;me<Ee;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}me-=Et,J=0,ht=11+(127&(ce>>>=Et)),ce>>>=7,me-=7}if(Q.have+ht>Q.nlen+Q.ndist){ue.msg="invalid bit length repeat",Q.mode=30;break}for(;ht--;)Q.lens[Q.have++]=J}}if(Q.mode===30)break;if(Q.lens[256]===0){ue.msg="invalid code -- missing end-of-block",Q.mode=30;break}if(Q.lenbits=9,ft={bits:Q.lenbits},mt=C(I,Q.lens,0,Q.nlen,Q.lencode,0,Q.work,ft),Q.lenbits=ft.bits,mt){ue.msg="invalid literal/lengths set",Q.mode=30;break}if(Q.distbits=6,Q.distcode=Q.distdyn,ft={bits:Q.distbits},mt=C(O,Q.lens,Q.nlen,Q.ndist,Q.distcode,0,Q.work,ft),Q.distbits=ft.bits,mt){ue.msg="invalid distances set",Q.mode=30;break}if(Q.mode=20,Oe===6)break e;case 20:Q.mode=21;case 21:if(6<=Ke&&258<=Ct){ue.next_out=Re,ue.avail_out=Ct,ue.next_in=Ie,ue.avail_in=Ke,Q.hold=ce,Q.bits=me,S(ue,st),Re=ue.next_out,Lt=ue.output,Ct=ue.avail_out,Ie=ue.next_in,We=ue.input,Ke=ue.avail_in,ce=Q.hold,me=Q.bits,Q.mode===12&&(Q.back=-1);break}for(Q.back=0;Qt=(xe=Q.lencode[ce&(1<<Q.lenbits)-1])>>>16&255,_n=65535&xe,!((Et=xe>>>24)<=me);){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}if(Qt&&!(240&Qt)){for(Vn=Et,Ln=Qt,Wr=_n;Qt=(xe=Q.lencode[Wr+((ce&(1<<Vn+Ln)-1)>>Vn)])>>>16&255,_n=65535&xe,!(Vn+(Et=xe>>>24)<=me);){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}ce>>>=Vn,me-=Vn,Q.back+=Vn}if(ce>>>=Et,me-=Et,Q.back+=Et,Q.length=_n,Qt===0){Q.mode=26;break}if(32&Qt){Q.back=-1,Q.mode=12;break}if(64&Qt){ue.msg="invalid literal/length code",Q.mode=30;break}Q.extra=15&Qt,Q.mode=22;case 22:if(Q.extra){for(Ee=Q.extra;me<Ee;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}Q.length+=ce&(1<<Q.extra)-1,ce>>>=Q.extra,me-=Q.extra,Q.back+=Q.extra}Q.was=Q.length,Q.mode=23;case 23:for(;Qt=(xe=Q.distcode[ce&(1<<Q.distbits)-1])>>>16&255,_n=65535&xe,!((Et=xe>>>24)<=me);){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}if(!(240&Qt)){for(Vn=Et,Ln=Qt,Wr=_n;Qt=(xe=Q.distcode[Wr+((ce&(1<<Vn+Ln)-1)>>Vn)])>>>16&255,_n=65535&xe,!(Vn+(Et=xe>>>24)<=me);){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}ce>>>=Vn,me-=Vn,Q.back+=Vn}if(ce>>>=Et,me-=Et,Q.back+=Et,64&Qt){ue.msg="invalid distance code",Q.mode=30;break}Q.offset=_n,Q.extra=15&Qt,Q.mode=24;case 24:if(Q.extra){for(Ee=Q.extra;me<Ee;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}Q.offset+=ce&(1<<Q.extra)-1,ce>>>=Q.extra,me-=Q.extra,Q.back+=Q.extra}if(Q.offset>Q.dmax){ue.msg="invalid distance too far back",Q.mode=30;break}Q.mode=25;case 25:if(Ct===0)break e;if(ht=st-Ct,Q.offset>ht){if((ht=Q.offset-ht)>Q.whave&&Q.sane){ue.msg="invalid distance too far back",Q.mode=30;break}Xe=ht>Q.wnext?(ht-=Q.wnext,Q.wsize-ht):Q.wnext-ht,ht>Q.length&&(ht=Q.length),sn=Q.window}else sn=Lt,Xe=Re-Q.offset,ht=Q.length;for(Ct<ht&&(ht=Ct),Ct-=ht,Q.length-=ht;Lt[Re++]=sn[Xe++],--ht;);Q.length===0&&(Q.mode=21);break;case 26:if(Ct===0)break e;Lt[Re++]=Q.length,Ct--,Q.mode=21;break;case 27:if(Q.wrap){for(;me<32;){if(Ke===0)break e;Ke--,ce|=We[Ie++]<<me,me+=8}if(st-=Ct,ue.total_out+=st,Q.total+=st,st&&(ue.adler=Q.check=Q.flags?_(Q.check,Lt,st,Re-st):b(Q.check,Lt,st,Re-st)),st=Ct,(Q.flags?ce:G(ce))!==Q.check){ue.msg="incorrect data check",Q.mode=30;break}me=ce=0}Q.mode=28;case 28:if(Q.wrap&&Q.flags){for(;me<32;){if(Ke===0)break e;Ke--,ce+=We[Ie++]<<me,me+=8}if(ce!==(4294967295&Q.total)){ue.msg="incorrect length check",Q.mode=30;break}me=ce=0}Q.mode=29;case 29:mt=1;break e;case 30:mt=-3;break e;case 31:return-4;case 32:default:return A}return ue.next_out=Re,ue.avail_out=Ct,ue.next_in=Ie,ue.avail_in=Ke,Q.hold=ce,Q.bits=me,(Q.wsize||st!==ue.avail_out&&Q.mode<30&&(Q.mode<27||Oe!==4))&&lt(ue,ue.output,ue.next_out,st-ue.avail_out)?(Q.mode=31,-4):(tt-=ue.avail_in,st-=ue.avail_out,ue.total_in+=tt,ue.total_out+=st,Q.total+=st,Q.wrap&&st&&(ue.adler=Q.check=Q.flags?_(Q.check,Lt,st,ue.next_out-st):b(Q.check,Lt,st,ue.next_out-st)),ue.data_type=Q.bits+(Q.last?64:0)+(Q.mode===12?128:0)+(Q.mode===20||Q.mode===15?256:0),(tt==0&&st===0||Oe===4)&&mt===D&&(mt=-5),mt)},f.inflateEnd=function(ue){if(!ue||!ue.state)return A;var Oe=ue.state;return Oe.window&&(Oe.window=null),ue.state=null,D},f.inflateGetHeader=function(ue,Oe){var Q;return ue&&ue.state&&2&(Q=ue.state).wrap?((Q.head=Oe).done=!1,D):A},f.inflateSetDictionary=function(ue,Oe){var Q,We=Oe.length;return ue&&ue.state?(Q=ue.state).wrap!==0&&Q.mode!==11?A:Q.mode===11&&b(1,Oe,We,0)!==Q.check?-3:lt(ue,Oe,We,We)?(Q.mode=31,-4):(Q.havedict=1,D):A},f.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(l,h,f){var g=l("../utils/common"),b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],S=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],C=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];h.exports=function(I,O,D,A,N,L,V,G){var $,Y,re,ne,le,Ce,ve,we,Le,lt=G.bits,ue=0,Oe=0,Q=0,We=0,Lt=0,Ie=0,Re=0,Ke=0,Ct=0,ce=0,me=null,tt=0,st=new g.Buf16(16),ht=new g.Buf16(16),Xe=null,sn=0;for(ue=0;ue<=15;ue++)st[ue]=0;for(Oe=0;Oe<A;Oe++)st[O[D+Oe]]++;for(Lt=lt,We=15;1<=We&&st[We]===0;We--);if(We<Lt&&(Lt=We),We===0)return N[L++]=20971520,N[L++]=20971520,G.bits=1,0;for(Q=1;Q<We&&st[Q]===0;Q++);for(Lt<Q&&(Lt=Q),ue=Ke=1;ue<=15;ue++)if(Ke<<=1,(Ke-=st[ue])<0)return-1;if(0<Ke&&(I===0||We!==1))return-1;for(ht[1]=0,ue=1;ue<15;ue++)ht[ue+1]=ht[ue]+st[ue];for(Oe=0;Oe<A;Oe++)O[D+Oe]!==0&&(V[ht[O[D+Oe]]++]=Oe);if(Ce=I===0?(me=Xe=V,19):I===1?(me=b,tt-=257,Xe=_,sn-=257,256):(me=S,Xe=C,-1),ue=Q,le=L,Re=Oe=ce=0,re=-1,ne=(Ct=1<<(Ie=Lt))-1,I===1&&852<Ct||I===2&&592<Ct)return 1;for(;;){for(ve=ue-Re,Le=V[Oe]<Ce?(we=0,V[Oe]):V[Oe]>Ce?(we=Xe[sn+V[Oe]],me[tt+V[Oe]]):(we=96,0),$=1<<ue-Re,Q=Y=1<<Ie;N[le+(ce>>Re)+(Y-=$)]=ve<<24|we<<16|Le|0,Y!==0;);for($=1<<ue-1;ce&$;)$>>=1;if($!==0?(ce&=$-1,ce+=$):ce=0,Oe++,--st[ue]==0){if(ue===We)break;ue=O[D+V[Oe]]}if(Lt<ue&&(ce&ne)!==re){for(Re===0&&(Re=Lt),le+=Q,Ke=1<<(Ie=ue-Re);Ie+Re<We&&!((Ke-=st[Ie+Re])<=0);)Ie++,Ke<<=1;if(Ct+=1<<Ie,I===1&&852<Ct||I===2&&592<Ct)return 1;N[re=ce&ne]=Lt<<24|Ie<<16|le-L|0}}return ce!==0&&(N[le+ce]=ue-Re<<24|64<<16|0),G.bits=Lt,0}},{"../utils/common":41}],51:[function(l,h,f){h.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(l,h,f){var g=l("../utils/common"),b=0,_=1;function S(xe){for(var qe=xe.length;0<=--qe;)xe[qe]=0}var C=0,I=29,O=256,D=O+1+I,A=30,N=19,L=2*D+1,V=15,G=16,$=7,Y=256,re=16,ne=17,le=18,Ce=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ve=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],we=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Le=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],lt=new Array(2*(D+2));S(lt);var ue=new Array(2*A);S(ue);var Oe=new Array(512);S(Oe);var Q=new Array(256);S(Q);var We=new Array(I);S(We);var Lt,Ie,Re,Ke=new Array(A);function Ct(xe,qe,Pt,It,nt){this.static_tree=xe,this.extra_bits=qe,this.extra_base=Pt,this.elems=It,this.max_length=nt,this.has_stree=xe&&xe.length}function ce(xe,qe){this.dyn_tree=xe,this.max_code=0,this.stat_desc=qe}function me(xe){return xe<256?Oe[xe]:Oe[256+(xe>>>7)]}function tt(xe,qe){xe.pending_buf[xe.pending++]=255&qe,xe.pending_buf[xe.pending++]=qe>>>8&255}function st(xe,qe,Pt){xe.bi_valid>G-Pt?(xe.bi_buf|=qe<<xe.bi_valid&65535,tt(xe,xe.bi_buf),xe.bi_buf=qe>>G-xe.bi_valid,xe.bi_valid+=Pt-G):(xe.bi_buf|=qe<<xe.bi_valid&65535,xe.bi_valid+=Pt)}function ht(xe,qe,Pt){st(xe,Pt[2*qe],Pt[2*qe+1])}function Xe(xe,qe){for(var Pt=0;Pt|=1&xe,xe>>>=1,Pt<<=1,0<--qe;);return Pt>>>1}function sn(xe,qe,Pt){var It,nt,zt=new Array(V+1),kt=0;for(It=1;It<=V;It++)zt[It]=kt=kt+Pt[It-1]<<1;for(nt=0;nt<=qe;nt++){var Rt=xe[2*nt+1];Rt!==0&&(xe[2*nt]=Xe(zt[Rt]++,Rt))}}function Et(xe){var qe;for(qe=0;qe<D;qe++)xe.dyn_ltree[2*qe]=0;for(qe=0;qe<A;qe++)xe.dyn_dtree[2*qe]=0;for(qe=0;qe<N;qe++)xe.bl_tree[2*qe]=0;xe.dyn_ltree[2*Y]=1,xe.opt_len=xe.static_len=0,xe.last_lit=xe.matches=0}function Qt(xe){8<xe.bi_valid?tt(xe,xe.bi_buf):0<xe.bi_valid&&(xe.pending_buf[xe.pending++]=xe.bi_buf),xe.bi_buf=0,xe.bi_valid=0}function _n(xe,qe,Pt,It){var nt=2*qe,zt=2*Pt;return xe[nt]<xe[zt]||xe[nt]===xe[zt]&&It[qe]<=It[Pt]}function Vn(xe,qe,Pt){for(var It=xe.heap[Pt],nt=Pt<<1;nt<=xe.heap_len&&(nt<xe.heap_len&&_n(qe,xe.heap[nt+1],xe.heap[nt],xe.depth)&&nt++,!_n(qe,It,xe.heap[nt],xe.depth));)xe.heap[Pt]=xe.heap[nt],Pt=nt,nt<<=1;xe.heap[Pt]=It}function Ln(xe,qe,Pt){var It,nt,zt,kt,Rt=0;if(xe.last_lit!==0)for(;It=xe.pending_buf[xe.d_buf+2*Rt]<<8|xe.pending_buf[xe.d_buf+2*Rt+1],nt=xe.pending_buf[xe.l_buf+Rt],Rt++,It===0?ht(xe,nt,qe):(ht(xe,(zt=Q[nt])+O+1,qe),(kt=Ce[zt])!==0&&st(xe,nt-=We[zt],kt),ht(xe,zt=me(--It),Pt),(kt=ve[zt])!==0&&st(xe,It-=Ke[zt],kt)),Rt<xe.last_lit;);ht(xe,Y,qe)}function Wr(xe,qe){var Pt,It,nt,zt=qe.dyn_tree,kt=qe.stat_desc.static_tree,Rt=qe.stat_desc.has_stree,Rn=qe.stat_desc.elems,Or=-1;for(xe.heap_len=0,xe.heap_max=L,Pt=0;Pt<Rn;Pt++)zt[2*Pt]!==0?(xe.heap[++xe.heap_len]=Or=Pt,xe.depth[Pt]=0):zt[2*Pt+1]=0;for(;xe.heap_len<2;)zt[2*(nt=xe.heap[++xe.heap_len]=Or<2?++Or:0)]=1,xe.depth[nt]=0,xe.opt_len--,Rt&&(xe.static_len-=kt[2*nt+1]);for(qe.max_code=Or,Pt=xe.heap_len>>1;1<=Pt;Pt--)Vn(xe,zt,Pt);for(nt=Rn;Pt=xe.heap[1],xe.heap[1]=xe.heap[xe.heap_len--],Vn(xe,zt,1),It=xe.heap[1],xe.heap[--xe.heap_max]=Pt,xe.heap[--xe.heap_max]=It,zt[2*nt]=zt[2*Pt]+zt[2*It],xe.depth[nt]=(xe.depth[Pt]>=xe.depth[It]?xe.depth[Pt]:xe.depth[It])+1,zt[2*Pt+1]=zt[2*It+1]=nt,xe.heap[1]=nt++,Vn(xe,zt,1),2<=xe.heap_len;);xe.heap[--xe.heap_max]=xe.heap[1],function(tr,_o){var Rf,Uo,tc,Vi,Fv,c_,nc=_o.dyn_tree,d_=_o.max_code,EC=_o.stat_desc.static_tree,CC=_o.stat_desc.has_stree,PC=_o.stat_desc.extra_bits,h_=_o.stat_desc.extra_base,Ql=_o.stat_desc.max_length,rc=0;for(Vi=0;Vi<=V;Vi++)tr.bl_count[Vi]=0;for(nc[2*tr.heap[tr.heap_max]+1]=0,Rf=tr.heap_max+1;Rf<L;Rf++)Ql<(Vi=nc[2*nc[2*(Uo=tr.heap[Rf])+1]+1]+1)&&(Vi=Ql,rc++),nc[2*Uo+1]=Vi,d_<Uo||(tr.bl_count[Vi]++,Fv=0,h_<=Uo&&(Fv=PC[Uo-h_]),c_=nc[2*Uo],tr.opt_len+=c_*(Vi+Fv),CC&&(tr.static_len+=c_*(EC[2*Uo+1]+Fv)));if(rc!==0){do{for(Vi=Ql-1;tr.bl_count[Vi]===0;)Vi--;tr.bl_count[Vi]--,tr.bl_count[Vi+1]+=2,tr.bl_count[Ql]--,rc-=2}while(0<rc);for(Vi=Ql;Vi!==0;Vi--)for(Uo=tr.bl_count[Vi];Uo!==0;)d_<(tc=tr.heap[--Rf])||(nc[2*tc+1]!==Vi&&(tr.opt_len+=(Vi-nc[2*tc+1])*nc[2*tc],nc[2*tc+1]=Vi),Uo--)}}(xe,qe),sn(zt,Or,xe.bl_count)}function J(xe,qe,Pt){var It,nt,zt=-1,kt=qe[1],Rt=0,Rn=7,Or=4;for(kt===0&&(Rn=138,Or=3),qe[2*(Pt+1)+1]=65535,It=0;It<=Pt;It++)nt=kt,kt=qe[2*(It+1)+1],++Rt<Rn&&nt===kt||(Rt<Or?xe.bl_tree[2*nt]+=Rt:nt!==0?(nt!==zt&&xe.bl_tree[2*nt]++,xe.bl_tree[2*re]++):Rt<=10?xe.bl_tree[2*ne]++:xe.bl_tree[2*le]++,zt=nt,Or=(Rt=0)===kt?(Rn=138,3):nt===kt?(Rn=6,3):(Rn=7,4))}function mt(xe,qe,Pt){var It,nt,zt=-1,kt=qe[1],Rt=0,Rn=7,Or=4;for(kt===0&&(Rn=138,Or=3),It=0;It<=Pt;It++)if(nt=kt,kt=qe[2*(It+1)+1],!(++Rt<Rn&&nt===kt)){if(Rt<Or)for(;ht(xe,nt,xe.bl_tree),--Rt!=0;);else nt!==0?(nt!==zt&&(ht(xe,nt,xe.bl_tree),Rt--),ht(xe,re,xe.bl_tree),st(xe,Rt-3,2)):Rt<=10?(ht(xe,ne,xe.bl_tree),st(xe,Rt-3,3)):(ht(xe,le,xe.bl_tree),st(xe,Rt-11,7));zt=nt,Or=(Rt=0)===kt?(Rn=138,3):nt===kt?(Rn=6,3):(Rn=7,4)}}S(Ke);var ft=!1;function Ee(xe,qe,Pt,It){st(xe,(C<<1)+(It?1:0),3),function(nt,zt,kt,Rt){Qt(nt),Rt&&(tt(nt,kt),tt(nt,~kt)),g.arraySet(nt.pending_buf,nt.window,zt,kt,nt.pending),nt.pending+=kt}(xe,qe,Pt,!0)}f._tr_init=function(xe){ft||(function(){var qe,Pt,It,nt,zt,kt=new Array(V+1);for(nt=It=0;nt<I-1;nt++)for(We[nt]=It,qe=0;qe<1<<Ce[nt];qe++)Q[It++]=nt;for(Q[It-1]=nt,nt=zt=0;nt<16;nt++)for(Ke[nt]=zt,qe=0;qe<1<<ve[nt];qe++)Oe[zt++]=nt;for(zt>>=7;nt<A;nt++)for(Ke[nt]=zt<<7,qe=0;qe<1<<ve[nt]-7;qe++)Oe[256+zt++]=nt;for(Pt=0;Pt<=V;Pt++)kt[Pt]=0;for(qe=0;qe<=143;)lt[2*qe+1]=8,qe++,kt[8]++;for(;qe<=255;)lt[2*qe+1]=9,qe++,kt[9]++;for(;qe<=279;)lt[2*qe+1]=7,qe++,kt[7]++;for(;qe<=287;)lt[2*qe+1]=8,qe++,kt[8]++;for(sn(lt,D+1,kt),qe=0;qe<A;qe++)ue[2*qe+1]=5,ue[2*qe]=Xe(qe,5);Lt=new Ct(lt,Ce,O+1,D,V),Ie=new Ct(ue,ve,0,A,V),Re=new Ct(new Array(0),we,0,N,$)}(),ft=!0),xe.l_desc=new ce(xe.dyn_ltree,Lt),xe.d_desc=new ce(xe.dyn_dtree,Ie),xe.bl_desc=new ce(xe.bl_tree,Re),xe.bi_buf=0,xe.bi_valid=0,Et(xe)},f._tr_stored_block=Ee,f._tr_flush_block=function(xe,qe,Pt,It){var nt,zt,kt=0;0<xe.level?(xe.strm.data_type===2&&(xe.strm.data_type=function(Rt){var Rn,Or=4093624447;for(Rn=0;Rn<=31;Rn++,Or>>>=1)if(1&Or&&Rt.dyn_ltree[2*Rn]!==0)return b;if(Rt.dyn_ltree[18]!==0||Rt.dyn_ltree[20]!==0||Rt.dyn_ltree[26]!==0)return _;for(Rn=32;Rn<O;Rn++)if(Rt.dyn_ltree[2*Rn]!==0)return _;return b}(xe)),Wr(xe,xe.l_desc),Wr(xe,xe.d_desc),kt=function(Rt){var Rn;for(J(Rt,Rt.dyn_ltree,Rt.l_desc.max_code),J(Rt,Rt.dyn_dtree,Rt.d_desc.max_code),Wr(Rt,Rt.bl_desc),Rn=N-1;3<=Rn&&Rt.bl_tree[2*Le[Rn]+1]===0;Rn--);return Rt.opt_len+=3*(Rn+1)+5+5+4,Rn}(xe),nt=xe.opt_len+3+7>>>3,(zt=xe.static_len+3+7>>>3)<=nt&&(nt=zt)):nt=zt=Pt+5,Pt+4<=nt&&qe!==-1?Ee(xe,qe,Pt,It):xe.strategy===4||zt===nt?(st(xe,2+(It?1:0),3),Ln(xe,lt,ue)):(st(xe,4+(It?1:0),3),function(Rt,Rn,Or,tr){var _o;for(st(Rt,Rn-257,5),st(Rt,Or-1,5),st(Rt,tr-4,4),_o=0;_o<tr;_o++)st(Rt,Rt.bl_tree[2*Le[_o]+1],3);mt(Rt,Rt.dyn_ltree,Rn-1),mt(Rt,Rt.dyn_dtree,Or-1)}(xe,xe.l_desc.max_code+1,xe.d_desc.max_code+1,kt+1),Ln(xe,xe.dyn_ltree,xe.dyn_dtree)),Et(xe),It&&Qt(xe)},f._tr_tally=function(xe,qe,Pt){return xe.pending_buf[xe.d_buf+2*xe.last_lit]=qe>>>8&255,xe.pending_buf[xe.d_buf+2*xe.last_lit+1]=255&qe,xe.pending_buf[xe.l_buf+xe.last_lit]=255&Pt,xe.last_lit++,qe===0?xe.dyn_ltree[2*Pt]++:(xe.matches++,qe--,xe.dyn_ltree[2*(Q[Pt]+O+1)]++,xe.dyn_dtree[2*me(qe)]++),xe.last_lit===xe.lit_bufsize-1},f._tr_align=function(xe){st(xe,2,3),ht(xe,Y,lt),function(qe){qe.bi_valid===16?(tt(qe,qe.bi_buf),qe.bi_buf=0,qe.bi_valid=0):8<=qe.bi_valid&&(qe.pending_buf[qe.pending++]=255&qe.bi_buf,qe.bi_buf>>=8,qe.bi_valid-=8)}(xe)}},{"../utils/common":41}],53:[function(l,h,f){h.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(l,h,f){(function(g){(function(b,_){if(!b.setImmediate){var S,C,I,O,D=1,A={},N=!1,L=b.document,V=Object.getPrototypeOf&&Object.getPrototypeOf(b);V=V&&V.setTimeout?V:b,S={}.toString.call(b.process)==="[object process]"?function(re){process.nextTick(function(){$(re)})}:function(){if(b.postMessage&&!b.importScripts){var re=!0,ne=b.onmessage;return b.onmessage=function(){re=!1},b.postMessage("","*"),b.onmessage=ne,re}}()?(O="setImmediate$"+Math.random()+"$",b.addEventListener?b.addEventListener("message",Y,!1):b.attachEvent("onmessage",Y),function(re){b.postMessage(O+re,"*")}):b.MessageChannel?((I=new MessageChannel).port1.onmessage=function(re){$(re.data)},function(re){I.port2.postMessage(re)}):L&&"onreadystatechange"in L.createElement("script")?(C=L.documentElement,function(re){var ne=L.createElement("script");ne.onreadystatechange=function(){$(re),ne.onreadystatechange=null,C.removeChild(ne),ne=null},C.appendChild(ne)}):function(re){setTimeout($,0,re)},V.setImmediate=function(re){typeof re!="function"&&(re=new Function(""+re));for(var ne=new Array(arguments.length-1),le=0;le<ne.length;le++)ne[le]=arguments[le+1];var Ce={callback:re,args:ne};return A[D]=Ce,S(D),D++},V.clearImmediate=G}function G(re){delete A[re]}function $(re){if(N)setTimeout($,0,re);else{var ne=A[re];if(ne){N=!0;try{(function(le){var Ce=le.callback,ve=le.args;switch(ve.length){case 0:Ce();break;case 1:Ce(ve[0]);break;case 2:Ce(ve[0],ve[1]);break;case 3:Ce(ve[0],ve[1],ve[2]);break;default:Ce.apply(_,ve)}})(ne)}finally{G(re),N=!1}}}}function Y(re){re.source===b&&typeof re.data=="string"&&re.data.indexOf(O)===0&&$(+re.data.slice(O.length))}})(typeof self>"u"?g===void 0?this:g:self)}).call(this,typeof Gi<"u"?Gi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}),Wz,FR,vne,$z,yne,bne,FE,_ne,Kz,wne,BR,BE,UE,mf,xne,Sne,Ene,Vb,Fa,Cne,Pne,Xz,UR,sIe=P(()=>{Wz=X(Ne(),1),FR=X(Ne(),1),vne=s=>typeof s=="function",$z=(s,a)=>vne(s)?s(a):s,yne=(()=>{let s=0;return()=>(++s).toString()})(),bne=20,FE=new Map,_ne=1e3,Kz=s=>{if(FE.has(s))return;let a=setTimeout(()=>{FE.delete(s),mf({type:4,toastId:s})},_ne);FE.set(s,a)},wne=s=>{let a=FE.get(s);a&&clearTimeout(a)},BR=(s,a)=>{switch(a.type){case 0:return B(F({},s),{toasts:[a.toast,...s.toasts].slice(0,bne)});case 1:return a.toast.id&&wne(a.toast.id),B(F({},s),{toasts:s.toasts.map(g=>g.id===a.toast.id?F(F({},g),a.toast):g)});case 2:let{toast:l}=a;return s.toasts.find(g=>g.id===l.id)?BR(s,{type:1,toast:l}):BR(s,{type:0,toast:l});case 3:let{toastId:h}=a;return h?Kz(h):s.toasts.forEach(g=>{Kz(g.id)}),B(F({},s),{toasts:s.toasts.map(g=>g.id===h||h===void 0?B(F({},g),{visible:!1}):g)});case 4:return a.toastId===void 0?B(F({},s),{toasts:[]}):B(F({},s),{toasts:s.toasts.filter(g=>g.id!==a.toastId)});case 5:return B(F({},s),{pausedAt:a.time});case 6:let f=a.time-(s.pausedAt||0);return B(F({},s),{pausedAt:void 0,toasts:s.toasts.map(g=>B(F({},g),{pauseDuration:g.pauseDuration+f}))})}},BE=[],UE={toasts:[],pausedAt:void 0},mf=s=>{UE=BR(UE,s),BE.forEach(a=>{a(UE)})},xne={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Sne=(s={})=>{let[a,l]=(0,Wz.useState)(UE);(0,Wz.useEffect)(()=>(BE.push(l),()=>{let f=BE.indexOf(l);f>-1&&BE.splice(f,1)}),[a]);let h=a.toasts.map(f=>{var g,b;return B(F(F(F({},s),s[f.type]),f),{duration:f.duration||((g=s[f.type])==null?void 0:g.duration)||(s==null?void 0:s.duration)||xne[f.type],style:F(F(F({},s.style),(b=s[f.type])==null?void 0:b.style),f.style)})});return B(F({},a),{toasts:h})},Ene=(s,a="blank",l)=>B(F({createdAt:Date.now(),visible:!0,type:a,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0},l),{id:(l==null?void 0:l.id)||yne()}),Vb=s=>(a,l)=>{let h=Ene(a,s,l);return mf({type:2,toast:h}),h.id},Fa=(s,a)=>Vb("blank")(s,a),Fa.error=Vb("error"),Fa.success=Vb("success"),Fa.loading=Vb("loading"),Fa.custom=Vb("custom"),Fa.dismiss=s=>{mf({type:3,toastId:s})},Fa.remove=s=>mf({type:4,toastId:s}),Fa.promise=(s,a,l)=>{let h=Fa.loading(a.loading,F(F({},l),l==null?void 0:l.loading));return s.then(f=>(Fa.success($z(a.success,f),F(F({id:h},l),l==null?void 0:l.success)),f)).catch(f=>{Fa.error($z(a.error,f),F(F({id:h},l),l==null?void 0:l.error))}),s},Cne=(s,a)=>{mf({type:1,toast:{id:s,height:a}})},Pne=()=>{mf({type:5,time:Date.now()})},Xz=s=>{let{toasts:a,pausedAt:l}=Sne(s);(0,FR.useEffect)(()=>{if(l)return;let g=Date.now(),b=a.map(_=>{if(_.duration===1/0)return;let S=(_.duration||0)+_.pauseDuration-(g-_.createdAt);if(S<0){_.visible&&Fa.dismiss(_.id);return}return setTimeout(()=>Fa.dismiss(_.id),S)});return()=>{b.forEach(_=>_&&clearTimeout(_))}},[a,l]);let h=(0,FR.useCallback)(()=>{l&&mf({type:6,time:Date.now()})},[l]),f=(0,FR.useCallback)((g,b)=>{let{reverseOrder:_=!1,gutter:S=8,defaultPosition:C}=b||{},I=a.filter(A=>(A.position||C)===(g.position||C)&&A.height),O=I.findIndex(A=>A.id===g.id),D=I.filter((A,N)=>N<O&&A.visible).length;return I.filter(A=>A.visible).slice(..._?[D+1]:[0,D]).reduce((A,N)=>A+(N.height||0)+S,0)},[a]);return{toasts:a,handlers:{updateHeight:Cne,startPause:Pne,endPause:h,calculateOffset:f}}},UR=Fa});function Tne(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function oIe(s){ov=s}function Ys(s,a){if(a){if(Lne.test(s))return s.replace(Nne,qz)}else if(Fne.test(s))return s.replace(Bne,qz);return s}function Mne(s){return s.replace(zne,(a,l)=>(l=l.toLowerCase(),l==="colon"?":":l.charAt(0)==="#"?l.charAt(1)==="x"?String.fromCharCode(parseInt(l.substring(2),16)):String.fromCharCode(+l.substring(1)):""))}function ui(s,a){s=typeof s=="string"?s:s.source,a=a||"";let l={replace:(h,f)=>(f=f.source||f,f=f.replace(Vne,"$1"),s=s.replace(h,f),l),getRegex:()=>new RegExp(s,a)};return l}function kne(s,a,l){if(s){let h;try{h=decodeURIComponent(Mne(l)).replace(jne,"").toLowerCase()}catch{return null}if(h.indexOf("javascript:")===0||h.indexOf("vbscript:")===0||h.indexOf("data:")===0)return null}a&&!Hne.test(l)&&(l=aIe(a,l));try{l=encodeURI(l).replace(/%25/g,"%")}catch{return null}return l}function aIe(s,a){zE[" "+s]||(Gne.test(s)?zE[" "+s]=s+"/":zE[" "+s]=zR(s,"/",!0)),s=zE[" "+s];let l=s.indexOf(":")===-1;return a.substring(0,2)==="//"?l?a:s.replace(Wne,"$1")+a:a.charAt(0)==="/"?l?a:s.replace($ne,"$1")+a:s+a}function Ku(s){let a=1,l,h;for(;a<arguments.length;a++){l=arguments[a];for(h in l)Object.prototype.hasOwnProperty.call(l,h)&&(s[h]=l[h])}return s}function Ane(s,a){let l=s.replace(/\|/g,(g,b,_)=>{let S=!1,C=b;for(;--C>=0&&_[C]==="\\";)S=!S;return S?"|":" |"}),h=l.split(/ \|/),f=0;if(h[0].trim()||h.shift(),h.length>0&&!h[h.length-1].trim()&&h.pop(),h.length>a)h.splice(a);else for(;h.length<a;)h.push("");for(;f<h.length;f++)h[f]=h[f].trim().replace(/\\\|/g,"|");return h}function zR(s,a,l){let h=s.length;if(h===0)return"";let f=0;for(;f<h;){let g=s.charAt(h-f-1);if(g===a&&!l)f++;else if(g!==a&&l)f++;else break}return s.slice(0,h-f)}function lIe(s,a){if(s.indexOf(a[1])===-1)return-1;let l=s.length,h=0,f=0;for(;f<l;f++)if(s[f]==="\\")f++;else if(s[f]===a[0])h++;else if(s[f]===a[1]&&(h--,h<0))return f;return-1}function Ine(s){s&&s.sanitize&&!s.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Rne(s,a){if(a<1)return"";let l="";for(;a>1;)a&1&&(l+=s),a>>=1,s+=s;return l+s}function Dne(s,a,l,h){let f=a.href,g=a.title?Ys(a.title):null,b=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){h.state.inLink=!0;let _={type:"link",raw:l,href:f,title:g,text:b,tokens:h.inlineTokens(b)};return h.state.inLink=!1,_}return{type:"image",raw:l,href:f,title:g,text:Ys(b)}}function uIe(s,a){let l=s.match(/^(\s+)(?:```)/);if(l===null)return a;let h=l[1];return a.split(`
`).map(f=>{let g=f.match(/^\s+/);if(g===null)return f;let[b]=g;return b.length>=h.length?f.slice(h.length):f}).join(`
`)}function cIe(s){return s.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function One(s){let a="",l,h,f=s.length;for(l=0;l<f;l++)h=s.charCodeAt(l),Math.random()>.5&&(h="x"+h.toString(16)),a+="&#"+h+";";return a}function Jn(s,a,l){if(typeof s>"u"||s===null)throw new Error("marked(): input parameter is undefined or null");if(typeof s!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected");if(typeof a=="function"&&(l=a,a=null),a=Ku({},Jn.defaults,a||{}),Ine(a),l){let f=a.highlight,g;try{g=av.lex(s,a)}catch(S){return l(S)}let b=function(S){let C;if(!S)try{a.walkTokens&&Jn.walkTokens(g,a.walkTokens),C=gf.parse(g,a)}catch(I){S=I}return a.highlight=f,S?l(S):l(null,C)};if(!f||f.length<3||(delete a.highlight,!g.length))return b();let _=0;Jn.walkTokens(g,function(S){S.type==="code"&&(_++,setTimeout(()=>{f(S.text,S.lang,function(C,I){if(C)return b(C);I!=null&&I!==S.text&&(S.text=I,S.escaped=!0),_--,_===0&&b()})},0))}),_===0&&b();return}function h(f){if(f.message+=`
Please report this to https://github.com/markedjs/marked.`,a.silent)return"<p>An error occurred:</p><pre>"+Ys(f.message+"",!0)+"</pre>";throw f}try{let f=av.lex(s,a);if(a.walkTokens){if(a.async)return Promise.all(Jn.walkTokens(f,a.walkTokens)).then(()=>gf.parse(f,a)).catch(h);Jn.walkTokens(f,a.walkTokens)}return gf.parse(f,a)}catch(f){h(f)}}var ov,Lne,Nne,Fne,Bne,Une,qz,zne,Vne,jne,Hne,zE,Gne,Wne,$ne,VE,VR,zn,mn,av,jR,Yz,Zz,gf,dIe=P(()=>{ov=Tne(),Lne=/[&<>"']/,Nne=/[&<>"']/g,Fne=/[<>"']|&(?!#?\w+;)/,Bne=/[<>"']|&(?!#?\w+;)/g,Une={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},qz=s=>Une[s],zne=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,Vne=/(^|[^\[])\^/g,jne=/[^\w:]/g,Hne=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,zE={},Gne=/^[^:]+:\/*[^/]*$/,Wne=/^([^:]+:)[\s\S]*$/,$ne=/^([^:]+:\/*[^/]*)[\s\S]*$/,VE={exec:function(){}},VR=class{constructor(s){this.options=s||ov}space(s){let a=this.rules.block.newline.exec(s);if(a&&a[0].length>0)return{type:"space",raw:a[0]}}code(s){let a=this.rules.block.code.exec(s);if(a){let l=a[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:a[0],codeBlockStyle:"indented",text:this.options.pedantic?l:zR(l,`
`)}}}fences(s){let a=this.rules.block.fences.exec(s);if(a){let l=a[0],h=uIe(l,a[3]||"");return{type:"code",raw:l,lang:a[2]?a[2].trim():a[2],text:h}}}heading(s){let a=this.rules.block.heading.exec(s);if(a){let l=a[2].trim();if(/#$/.test(l)){let h=zR(l,"#");(this.options.pedantic||!h||/ $/.test(h))&&(l=h.trim())}return{type:"heading",raw:a[0],depth:a[1].length,text:l,tokens:this.lexer.inline(l)}}}hr(s){let a=this.rules.block.hr.exec(s);if(a)return{type:"hr",raw:a[0]}}blockquote(s){let a=this.rules.block.blockquote.exec(s);if(a){let l=a[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:a[0],tokens:this.lexer.blockTokens(l,[]),text:l}}}list(s){let a=this.rules.block.list.exec(s);if(a){let l,h,f,g,b,_,S,C,I,O,D,A,N=a[1].trim(),L=N.length>1,V={type:"list",raw:"",ordered:L,start:L?+N.slice(0,-1):"",loose:!1,items:[]};N=L?"\\d{1,9}\\".concat(N.slice(-1)):"\\".concat(N),this.options.pedantic&&(N=L?N:"[*+-]");let G=new RegExp("^( {0,3}".concat(N,")((?:[	 ][^\\n]*)?(?:\\n|$))"));for(;s&&(A=!1,!(!(a=G.exec(s))||this.rules.block.hr.test(s)));){if(l=a[0],s=s.substring(l.length),C=a[2].split(`
`,1)[0],I=s.split(`
`,1)[0],this.options.pedantic?(g=2,D=C.trimLeft()):(g=a[2].search(/[^ ]/),g=g>4?1:g,D=C.slice(g),g+=a[1].length),_=!1,!C&&/^ *$/.test(I)&&(l+=I+`
`,s=s.substring(I.length+1),A=!0),!A){let Y=new RegExp("^ {0,".concat(Math.min(3,g-1),"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))")),re=new RegExp("^ {0,".concat(Math.min(3,g-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),ne=new RegExp("^ {0,".concat(Math.min(3,g-1),"}(?:```|~~~)")),le=new RegExp("^ {0,".concat(Math.min(3,g-1),"}#"));for(;s&&(O=s.split(`
`,1)[0],C=O,this.options.pedantic&&(C=C.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(ne.test(C)||le.test(C)||Y.test(C)||re.test(s)));){if(C.search(/[^ ]/)>=g||!C.trim())D+=`
`+C.slice(g);else if(!_)D+=`
`+C;else break;!_&&!C.trim()&&(_=!0),l+=O+`
`,s=s.substring(O.length+1)}}V.loose||(S?V.loose=!0:/\n *\n *$/.test(l)&&(S=!0)),this.options.gfm&&(h=/^\[[ xX]\] /.exec(D),h&&(f=h[0]!=="[ ] ",D=D.replace(/^\[[ xX]\] +/,""))),V.items.push({type:"list_item",raw:l,task:!!h,checked:f,loose:!1,text:D}),V.raw+=l}V.items[V.items.length-1].raw=l.trimRight(),V.items[V.items.length-1].text=D.trimRight(),V.raw=V.raw.trimRight();let $=V.items.length;for(b=0;b<$;b++){this.lexer.state.top=!1,V.items[b].tokens=this.lexer.blockTokens(V.items[b].text,[]);let Y=V.items[b].tokens.filter(ne=>ne.type==="space"),re=Y.every(ne=>{let le=ne.raw.split(""),Ce=0;for(let ve of le)if(ve===`
`&&(Ce+=1),Ce>1)return!0;return!1});!V.loose&&Y.length&&re&&(V.loose=!0,V.items[b].loose=!0)}return V}}html(s){let a=this.rules.block.html.exec(s);if(a){let l={type:"html",raw:a[0],pre:!this.options.sanitizer&&(a[1]==="pre"||a[1]==="script"||a[1]==="style"),text:a[0]};if(this.options.sanitize){let h=this.options.sanitizer?this.options.sanitizer(a[0]):Ys(a[0]);l.type="paragraph",l.text=h,l.tokens=this.lexer.inline(h)}return l}}def(s){let a=this.rules.block.def.exec(s);if(a)return a[3]&&(a[3]=a[3].substring(1,a[3].length-1)),{type:"def",tag:a[1].toLowerCase().replace(/\s+/g," "),raw:a[0],href:a[2],title:a[3]}}table(s){let a=this.rules.block.table.exec(s);if(a){let l={type:"table",header:Ane(a[1]).map(h=>({text:h})),align:a[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:a[3]&&a[3].trim()?a[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(l.header.length===l.align.length){l.raw=a[0];let h=l.align.length,f,g,b,_;for(f=0;f<h;f++)/^ *-+: *$/.test(l.align[f])?l.align[f]="right":/^ *:-+: *$/.test(l.align[f])?l.align[f]="center":/^ *:-+ *$/.test(l.align[f])?l.align[f]="left":l.align[f]=null;for(h=l.rows.length,f=0;f<h;f++)l.rows[f]=Ane(l.rows[f],l.header.length).map(S=>({text:S}));for(h=l.header.length,g=0;g<h;g++)l.header[g].tokens=this.lexer.inline(l.header[g].text);for(h=l.rows.length,g=0;g<h;g++)for(_=l.rows[g],b=0;b<_.length;b++)_[b].tokens=this.lexer.inline(_[b].text);return l}}}lheading(s){let a=this.rules.block.lheading.exec(s);if(a)return{type:"heading",raw:a[0],depth:a[2].charAt(0)==="="?1:2,text:a[1],tokens:this.lexer.inline(a[1])}}paragraph(s){let a=this.rules.block.paragraph.exec(s);if(a){let l=a[1].charAt(a[1].length-1)===`
`?a[1].slice(0,-1):a[1];return{type:"paragraph",raw:a[0],text:l,tokens:this.lexer.inline(l)}}}text(s){let a=this.rules.block.text.exec(s);if(a)return{type:"text",raw:a[0],text:a[0],tokens:this.lexer.inline(a[0])}}escape(s){let a=this.rules.inline.escape.exec(s);if(a)return{type:"escape",raw:a[0],text:Ys(a[1])}}tag(s){let a=this.rules.inline.tag.exec(s);if(a)return!this.lexer.state.inLink&&/^<a /i.test(a[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(a[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(a[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(a[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:a[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):Ys(a[0]):a[0]}}link(s){let a=this.rules.inline.link.exec(s);if(a){let l=a[2].trim();if(!this.options.pedantic&&/^</.test(l)){if(!/>$/.test(l))return;let g=zR(l.slice(0,-1),"\\");if((l.length-g.length)%2===0)return}else{let g=lIe(a[2],"()");if(g>-1){let b=(a[0].indexOf("!")===0?5:4)+a[1].length+g;a[2]=a[2].substring(0,g),a[0]=a[0].substring(0,b).trim(),a[3]=""}}let h=a[2],f="";if(this.options.pedantic){let g=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(h);g&&(h=g[1],f=g[3])}else f=a[3]?a[3].slice(1,-1):"";return h=h.trim(),/^</.test(h)&&(this.options.pedantic&&!/>$/.test(l)?h=h.slice(1):h=h.slice(1,-1)),Dne(a,{href:h&&h.replace(this.rules.inline._escapes,"$1"),title:f&&f.replace(this.rules.inline._escapes,"$1")},a[0],this.lexer)}}reflink(s,a){let l;if((l=this.rules.inline.reflink.exec(s))||(l=this.rules.inline.nolink.exec(s))){let h=(l[2]||l[1]).replace(/\s+/g," ");if(h=a[h.toLowerCase()],!h||!h.href){let f=l[0].charAt(0);return{type:"text",raw:f,text:f}}return Dne(l,h,l[0],this.lexer)}}emStrong(s,a,l=""){let h=this.rules.inline.emStrong.lDelim.exec(s);if(!h||h[3]&&l.match(/[\p{L}\p{N}]/u))return;let f=h[1]||h[2]||"";if(!f||f&&(l===""||this.rules.inline.punctuation.exec(l))){let g=h[0].length-1,b,_,S=g,C=0,I=h[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(I.lastIndex=0,a=a.slice(-1*s.length+g);(h=I.exec(a))!=null;){if(b=h[1]||h[2]||h[3]||h[4]||h[5]||h[6],!b)continue;if(_=b.length,h[3]||h[4]){S+=_;continue}else if((h[5]||h[6])&&g%3&&!((g+_)%3)){C+=_;continue}if(S-=_,S>0)continue;if(_=Math.min(_,_+S+C),Math.min(g,_)%2){let D=s.slice(1,g+h.index+_);return{type:"em",raw:s.slice(0,g+h.index+_+1),text:D,tokens:this.lexer.inlineTokens(D)}}let O=s.slice(2,g+h.index+_-1);return{type:"strong",raw:s.slice(0,g+h.index+_+1),text:O,tokens:this.lexer.inlineTokens(O)}}}}codespan(s){let a=this.rules.inline.code.exec(s);if(a){let l=a[2].replace(/\n/g," "),h=/[^ ]/.test(l),f=/^ /.test(l)&&/ $/.test(l);return h&&f&&(l=l.substring(1,l.length-1)),l=Ys(l,!0),{type:"codespan",raw:a[0],text:l}}}br(s){let a=this.rules.inline.br.exec(s);if(a)return{type:"br",raw:a[0]}}del(s){let a=this.rules.inline.del.exec(s);if(a)return{type:"del",raw:a[0],text:a[2],tokens:this.lexer.inlineTokens(a[2])}}autolink(s,a){let l=this.rules.inline.autolink.exec(s);if(l){let h,f;return l[2]==="@"?(h=Ys(this.options.mangle?a(l[1]):l[1]),f="mailto:"+h):(h=Ys(l[1]),f=h),{type:"link",raw:l[0],text:h,href:f,tokens:[{type:"text",raw:h,text:h}]}}}url(s,a){let l;if(l=this.rules.inline.url.exec(s)){let h,f;if(l[2]==="@")h=Ys(this.options.mangle?a(l[0]):l[0]),f="mailto:"+h;else{let g;do g=l[0],l[0]=this.rules.inline._backpedal.exec(l[0])[0];while(g!==l[0]);h=Ys(l[0]),l[1]==="www."?f="http://"+h:f=h}return{type:"link",raw:l[0],text:h,href:f,tokens:[{type:"text",raw:h,text:h}]}}}inlineText(s,a){let l=this.rules.inline.text.exec(s);if(l){let h;return this.lexer.state.inRawBlock?h=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(l[0]):Ys(l[0]):l[0]:h=Ys(this.options.smartypants?a(l[0]):l[0]),{type:"text",raw:l[0],text:h}}}},zn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:VE,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/},zn._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,zn._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,zn.def=ui(zn.def).replace("label",zn._label).replace("title",zn._title).getRegex(),zn.bullet=/(?:[*+-]|\d{1,9}[.)])/,zn.listItemStart=ui(/^( *)(bull) */).replace("bull",zn.bullet).getRegex(),zn.list=ui(zn.list).replace(/bull/g,zn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+zn.def.source+")").getRegex(),zn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",zn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,zn.html=ui(zn.html,"i").replace("comment",zn._comment).replace("tag",zn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),zn.paragraph=ui(zn._paragraph).replace("hr",zn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",zn._tag).getRegex(),zn.blockquote=ui(zn.blockquote).replace("paragraph",zn.paragraph).getRegex(),zn.normal=Ku({},zn),zn.gfm=Ku({},zn.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),zn.gfm.table=ui(zn.gfm.table).replace("hr",zn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",zn._tag).getRegex(),zn.gfm.paragraph=ui(zn._paragraph).replace("hr",zn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",zn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",zn._tag).getRegex(),zn.pedantic=Ku({},zn.normal,{html:ui(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",zn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:VE,paragraph:ui(zn.normal._paragraph).replace("hr",zn.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",zn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),mn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:VE,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:VE,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/},mn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",mn.punctuation=ui(mn.punctuation).replace(/punctuation/g,mn._punctuation).getRegex(),mn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,mn.escapedEmSt=/\\\*|\\_/g,mn._comment=ui(zn._comment).replace("(?:-->|$)","-->").getRegex(),mn.emStrong.lDelim=ui(mn.emStrong.lDelim).replace(/punct/g,mn._punctuation).getRegex(),mn.emStrong.rDelimAst=ui(mn.emStrong.rDelimAst,"g").replace(/punct/g,mn._punctuation).getRegex(),mn.emStrong.rDelimUnd=ui(mn.emStrong.rDelimUnd,"g").replace(/punct/g,mn._punctuation).getRegex(),mn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,mn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,mn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,mn.autolink=ui(mn.autolink).replace("scheme",mn._scheme).replace("email",mn._email).getRegex(),mn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,mn.tag=ui(mn.tag).replace("comment",mn._comment).replace("attribute",mn._attribute).getRegex(),mn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,mn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,mn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,mn.link=ui(mn.link).replace("label",mn._label).replace("href",mn._href).replace("title",mn._title).getRegex(),mn.reflink=ui(mn.reflink).replace("label",mn._label).replace("ref",zn._label).getRegex(),mn.nolink=ui(mn.nolink).replace("ref",zn._label).getRegex(),mn.reflinkSearch=ui(mn.reflinkSearch,"g").replace("reflink",mn.reflink).replace("nolink",mn.nolink).getRegex(),mn.normal=Ku({},mn),mn.pedantic=Ku({},mn.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ui(/^!?\[(label)\]\((.*?)\)/).replace("label",mn._label).getRegex(),reflink:ui(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",mn._label).getRegex()}),mn.gfm=Ku({},mn.normal,{escape:ui(mn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),mn.gfm.url=ui(mn.gfm.url,"i").replace("email",mn.gfm._extended_email).getRegex(),mn.breaks=Ku({},mn.gfm,{br:ui(mn.br).replace("{2,}","*").getRegex(),text:ui(mn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),av=class mW{constructor(a){this.tokens=[],this.tokens.links=Object.create(null),this.options=a||ov,this.options.tokenizer=this.options.tokenizer||new VR,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let l={block:zn.normal,inline:mn.normal};this.options.pedantic?(l.block=zn.pedantic,l.inline=mn.pedantic):this.options.gfm&&(l.block=zn.gfm,this.options.breaks?l.inline=mn.breaks:l.inline=mn.gfm),this.tokenizer.rules=l}static get rules(){return{block:zn,inline:mn}}static lex(a,l){return new mW(l).lex(a)}static lexInline(a,l){return new mW(l).inlineTokens(a)}lex(a){a=a.replace(/\r\n|\r/g,`
`),this.blockTokens(a,this.tokens);let l;for(;l=this.inlineQueue.shift();)this.inlineTokens(l.src,l.tokens);return this.tokens}blockTokens(a,l=[]){this.options.pedantic?a=a.replace(/\t/g,"    ").replace(/^ +$/gm,""):a=a.replace(/^( *)(\t+)/gm,(_,S,C)=>S+"    ".repeat(C.length));let h,f,g,b;for(;a;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(_=>(h=_.call({lexer:this},a,l))?(a=a.substring(h.raw.length),l.push(h),!0):!1))){if(h=this.tokenizer.space(a)){a=a.substring(h.raw.length),h.raw.length===1&&l.length>0?l[l.length-1].raw+=`
`:l.push(h);continue}if(h=this.tokenizer.code(a)){a=a.substring(h.raw.length),f=l[l.length-1],f&&(f.type==="paragraph"||f.type==="text")?(f.raw+=`
`+h.raw,f.text+=`
`+h.text,this.inlineQueue[this.inlineQueue.length-1].src=f.text):l.push(h);continue}if(h=this.tokenizer.fences(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.heading(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.hr(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.blockquote(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.list(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.html(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.def(a)){a=a.substring(h.raw.length),f=l[l.length-1],f&&(f.type==="paragraph"||f.type==="text")?(f.raw+=`
`+h.raw,f.text+=`
`+h.raw,this.inlineQueue[this.inlineQueue.length-1].src=f.text):this.tokens.links[h.tag]||(this.tokens.links[h.tag]={href:h.href,title:h.title});continue}if(h=this.tokenizer.table(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.lheading(a)){a=a.substring(h.raw.length),l.push(h);continue}if(g=a,this.options.extensions&&this.options.extensions.startBlock){let _=1/0,S=a.slice(1),C;this.options.extensions.startBlock.forEach(function(I){C=I.call({lexer:this},S),typeof C=="number"&&C>=0&&(_=Math.min(_,C))}),_<1/0&&_>=0&&(g=a.substring(0,_+1))}if(this.state.top&&(h=this.tokenizer.paragraph(g))){f=l[l.length-1],b&&f.type==="paragraph"?(f.raw+=`
`+h.raw,f.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=f.text):l.push(h),b=g.length!==a.length,a=a.substring(h.raw.length);continue}if(h=this.tokenizer.text(a)){a=a.substring(h.raw.length),f=l[l.length-1],f&&f.type==="text"?(f.raw+=`
`+h.raw,f.text+=`
`+h.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=f.text):l.push(h);continue}if(a){let _="Infinite loop on byte: "+a.charCodeAt(0);if(this.options.silent){console.error(_);break}else throw new Error(_)}}return this.state.top=!0,l}inline(a,l=[]){return this.inlineQueue.push({src:a,tokens:l}),l}inlineTokens(a,l=[]){let h,f,g,b=a,_,S,C;if(this.tokens.links){let I=Object.keys(this.tokens.links);if(I.length>0)for(;(_=this.tokenizer.rules.inline.reflinkSearch.exec(b))!=null;)I.includes(_[0].slice(_[0].lastIndexOf("[")+1,-1))&&(b=b.slice(0,_.index)+"["+Rne("a",_[0].length-2)+"]"+b.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(_=this.tokenizer.rules.inline.blockSkip.exec(b))!=null;)b=b.slice(0,_.index)+"["+Rne("a",_[0].length-2)+"]"+b.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(_=this.tokenizer.rules.inline.escapedEmSt.exec(b))!=null;)b=b.slice(0,_.index)+"++"+b.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;a;)if(S||(C=""),S=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(I=>(h=I.call({lexer:this},a,l))?(a=a.substring(h.raw.length),l.push(h),!0):!1))){if(h=this.tokenizer.escape(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.tag(a)){a=a.substring(h.raw.length),f=l[l.length-1],f&&h.type==="text"&&f.type==="text"?(f.raw+=h.raw,f.text+=h.text):l.push(h);continue}if(h=this.tokenizer.link(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.reflink(a,this.tokens.links)){a=a.substring(h.raw.length),f=l[l.length-1],f&&h.type==="text"&&f.type==="text"?(f.raw+=h.raw,f.text+=h.text):l.push(h);continue}if(h=this.tokenizer.emStrong(a,b,C)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.codespan(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.br(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.del(a)){a=a.substring(h.raw.length),l.push(h);continue}if(h=this.tokenizer.autolink(a,One)){a=a.substring(h.raw.length),l.push(h);continue}if(!this.state.inLink&&(h=this.tokenizer.url(a,One))){a=a.substring(h.raw.length),l.push(h);continue}if(g=a,this.options.extensions&&this.options.extensions.startInline){let I=1/0,O=a.slice(1),D;this.options.extensions.startInline.forEach(function(A){D=A.call({lexer:this},O),typeof D=="number"&&D>=0&&(I=Math.min(I,D))}),I<1/0&&I>=0&&(g=a.substring(0,I+1))}if(h=this.tokenizer.inlineText(g,cIe)){a=a.substring(h.raw.length),h.raw.slice(-1)!=="_"&&(C=h.raw.slice(-1)),S=!0,f=l[l.length-1],f&&f.type==="text"?(f.raw+=h.raw,f.text+=h.text):l.push(h);continue}if(a){let I="Infinite loop on byte: "+a.charCodeAt(0);if(this.options.silent){console.error(I);break}else throw new Error(I)}}return l}},jR=class{constructor(s){this.options=s||ov}code(s,a,l){let h=(a||"").match(/\S*/)[0];if(this.options.highlight){let f=this.options.highlight(s,h);f!=null&&f!==s&&(l=!0,s=f)}return s=s.replace(/\n$/,"")+`
`,h?'<pre><code class="'+this.options.langPrefix+Ys(h,!0)+'">'+(l?s:Ys(s,!0))+`</code></pre>
`:"<pre><code>"+(l?s:Ys(s,!0))+`</code></pre>
`}blockquote(s){return`<blockquote>
`.concat(s,`</blockquote>
`)}html(s){return s}heading(s,a,l,h){if(this.options.headerIds){let f=this.options.headerPrefix+h.slug(l);return"<h".concat(a,' id="').concat(f,'">').concat(s,"</h").concat(a,`>
`)}return"<h".concat(a,">").concat(s,"</h").concat(a,`>
`)}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(s,a,l){let h=a?"ol":"ul",f=a&&l!==1?' start="'+l+'"':"";return"<"+h+f+`>
`+s+"</"+h+`>
`}listitem(s){return"<li>".concat(s,`</li>
`)}checkbox(s){return"<input "+(s?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(s){return"<p>".concat(s,`</p>
`)}table(s,a){return a&&(a="<tbody>".concat(a,"</tbody>")),`<table>
<thead>
`+s+`</thead>
`+a+`</table>
`}tablerow(s){return`<tr>
`.concat(s,`</tr>
`)}tablecell(s,a){let l=a.header?"th":"td";return(a.align?"<".concat(l,' align="').concat(a.align,'">'):"<".concat(l,">"))+s+"</".concat(l,`>
`)}strong(s){return"<strong>".concat(s,"</strong>")}em(s){return"<em>".concat(s,"</em>")}codespan(s){return"<code>".concat(s,"</code>")}br(){return this.options.xhtml?"<br/>":"<br>"}del(s){return"<del>".concat(s,"</del>")}link(s,a,l){if(s=kne(this.options.sanitize,this.options.baseUrl,s),s===null)return l;let h='<a href="'+Ys(s)+'"';return a&&(h+=' title="'+a+'"'),h+=">"+l+"</a>",h}image(s,a,l){if(s=kne(this.options.sanitize,this.options.baseUrl,s),s===null)return l;let h='<img src="'.concat(s,'" alt="').concat(l,'"');return a&&(h+=' title="'.concat(a,'"')),h+=this.options.xhtml?"/>":">",h}text(s){return s}},Yz=class{strong(s){return s}em(s){return s}codespan(s){return s}del(s){return s}html(s){return s}text(s){return s}link(s,a,l){return""+l}image(s,a,l){return""+l}br(){return""}},Zz=class{constructor(){this.seen={}}serialize(s){return s.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(s,a){let l=s,h=0;if(this.seen.hasOwnProperty(l)){h=this.seen[s];do h++,l=s+"-"+h;while(this.seen.hasOwnProperty(l))}return a||(this.seen[s]=h,this.seen[l]=0),l}slug(s,a={}){let l=this.serialize(s);return this.getNextSafeSlug(l,a.dryrun)}},gf=class gW{constructor(a){this.options=a||ov,this.options.renderer=this.options.renderer||new jR,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Yz,this.slugger=new Zz}static parse(a,l){return new gW(l).parse(a)}static parseInline(a,l){return new gW(l).parseInline(a)}parse(a,l=!0){let h="",f,g,b,_,S,C,I,O,D,A,N,L,V,G,$,Y,re,ne,le,Ce=a.length;for(f=0;f<Ce;f++){if(A=a[f],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[A.type]&&(le=this.options.extensions.renderers[A.type].call({parser:this},A),le!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(A.type))){h+=le||"";continue}switch(A.type){case"space":continue;case"hr":{h+=this.renderer.hr();continue}case"heading":{h+=this.renderer.heading(this.parseInline(A.tokens),A.depth,Mne(this.parseInline(A.tokens,this.textRenderer)),this.slugger);continue}case"code":{h+=this.renderer.code(A.text,A.lang,A.escaped);continue}case"table":{for(O="",I="",_=A.header.length,g=0;g<_;g++)I+=this.renderer.tablecell(this.parseInline(A.header[g].tokens),{header:!0,align:A.align[g]});for(O+=this.renderer.tablerow(I),D="",_=A.rows.length,g=0;g<_;g++){for(C=A.rows[g],I="",S=C.length,b=0;b<S;b++)I+=this.renderer.tablecell(this.parseInline(C[b].tokens),{header:!1,align:A.align[b]});D+=this.renderer.tablerow(I)}h+=this.renderer.table(O,D);continue}case"blockquote":{D=this.parse(A.tokens),h+=this.renderer.blockquote(D);continue}case"list":{for(N=A.ordered,L=A.start,V=A.loose,_=A.items.length,D="",g=0;g<_;g++)$=A.items[g],Y=$.checked,re=$.task,G="",$.task&&(ne=this.renderer.checkbox(Y),V?$.tokens.length>0&&$.tokens[0].type==="paragraph"?($.tokens[0].text=ne+" "+$.tokens[0].text,$.tokens[0].tokens&&$.tokens[0].tokens.length>0&&$.tokens[0].tokens[0].type==="text"&&($.tokens[0].tokens[0].text=ne+" "+$.tokens[0].tokens[0].text)):$.tokens.unshift({type:"text",text:ne}):G+=ne),G+=this.parse($.tokens,V),D+=this.renderer.listitem(G,re,Y);h+=this.renderer.list(D,N,L);continue}case"html":{h+=this.renderer.html(A.text);continue}case"paragraph":{h+=this.renderer.paragraph(this.parseInline(A.tokens));continue}case"text":{for(D=A.tokens?this.parseInline(A.tokens):A.text;f+1<Ce&&a[f+1].type==="text";)A=a[++f],D+=`
`+(A.tokens?this.parseInline(A.tokens):A.text);h+=l?this.renderer.paragraph(D):D;continue}default:{let ve='Token with "'+A.type+'" type was not found.';if(this.options.silent){console.error(ve);return}else throw new Error(ve)}}}return h}parseInline(a,l){l=l||this.renderer;let h="",f,g,b,_=a.length;for(f=0;f<_;f++){if(g=a[f],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[g.type]&&(b=this.options.extensions.renderers[g.type].call({parser:this},g),b!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(g.type))){h+=b||"";continue}switch(g.type){case"escape":{h+=l.text(g.text);break}case"html":{h+=l.html(g.text);break}case"link":{h+=l.link(g.href,g.title,this.parseInline(g.tokens,l));break}case"image":{h+=l.image(g.href,g.title,g.text);break}case"strong":{h+=l.strong(this.parseInline(g.tokens,l));break}case"em":{h+=l.em(this.parseInline(g.tokens,l));break}case"codespan":{h+=l.codespan(g.text);break}case"br":{h+=l.br();break}case"del":{h+=l.del(this.parseInline(g.tokens,l));break}case"text":{h+=l.text(g.text);break}default:{let S='Token with "'+g.type+'" type was not found.';if(this.options.silent){console.error(S);return}else throw new Error(S)}}}return h}},Jn.options=Jn.setOptions=function(s){return Ku(Jn.defaults,s),oIe(Jn.defaults),Jn},Jn.getDefaults=Tne,Jn.defaults=ov,Jn.use=function(...s){let a=Ku({},...s),l=Jn.defaults.extensions||{renderers:{},childTokens:{}},h;s.forEach(f=>{if(f.extensions&&(h=!0,f.extensions.forEach(g=>{if(!g.name)throw new Error("extension name required");if(g.renderer){let b=l.renderers?l.renderers[g.name]:null;b?l.renderers[g.name]=function(..._){let S=g.renderer.apply(this,_);return S===!1&&(S=b.apply(this,_)),S}:l.renderers[g.name]=g.renderer}if(g.tokenizer){if(!g.level||g.level!=="block"&&g.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");l[g.level]?l[g.level].unshift(g.tokenizer):l[g.level]=[g.tokenizer],g.start&&(g.level==="block"?l.startBlock?l.startBlock.push(g.start):l.startBlock=[g.start]:g.level==="inline"&&(l.startInline?l.startInline.push(g.start):l.startInline=[g.start]))}g.childTokens&&(l.childTokens[g.name]=g.childTokens)})),f.renderer){let g=Jn.defaults.renderer||new jR;for(let b in f.renderer){let _=g[b];g[b]=(...S)=>{let C=f.renderer[b].apply(g,S);return C===!1&&(C=_.apply(g,S)),C}}a.renderer=g}if(f.tokenizer){let g=Jn.defaults.tokenizer||new VR;for(let b in f.tokenizer){let _=g[b];g[b]=(...S)=>{let C=f.tokenizer[b].apply(g,S);return C===!1&&(C=_.apply(g,S)),C}}a.tokenizer=g}if(f.walkTokens){let g=Jn.defaults.walkTokens;a.walkTokens=function(b){let _=[];return _.push(f.walkTokens.call(this,b)),g&&(_=_.concat(g.call(this,b))),_}}h&&(a.extensions=l),Jn.setOptions(a)})},Jn.walkTokens=function(s,a){let l=[];for(let h of s)switch(l=l.concat(a.call(Jn,h)),h.type){case"table":{for(let f of h.header)l=l.concat(Jn.walkTokens(f.tokens,a));for(let f of h.rows)for(let g of f)l=l.concat(Jn.walkTokens(g.tokens,a));break}case"list":{l=l.concat(Jn.walkTokens(h.items,a));break}default:Jn.defaults.extensions&&Jn.defaults.extensions.childTokens&&Jn.defaults.extensions.childTokens[h.type]?Jn.defaults.extensions.childTokens[h.type].forEach(function(f){l=l.concat(Jn.walkTokens(h[f],a))}):h.tokens&&(l=l.concat(Jn.walkTokens(h.tokens,a)))}return l},Jn.parseInline=function(s,a){if(typeof s>"u"||s===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof s!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(s)+", string expected");a=Ku({},Jn.defaults,a||{}),Ine(a);try{let l=av.lexInline(s,a);return a.walkTokens&&Jn.walkTokens(l,a.walkTokens),gf.parseInline(l,a)}catch(l){if(l.message+=`
Please report this to https://github.com/markedjs/marked.`,a.silent)return"<p>An error occurred:</p><pre>"+Ys(l.message+"",!0)+"</pre>";throw l}},Jn.Parser=gf,Jn.parser=gf.parse,Jn.Renderer=jR,Jn.TextRenderer=Yz,Jn.Lexer=av,Jn.lexer=av.lex,Jn.Tokenizer=VR,Jn.Slugger=Zz,Jn.parse=Jn,Jn.options,Jn.setOptions,Jn.use,Jn.walkTokens,Jn.parseInline,gf.parse,av.lex}),Kne,Xne,Qz,qne=P(()=>{Ve(),NR(),Xne=ae(zb)(Kne||(Kne=te([`
  padding: 6px;
`]))),Qz=Xne}),fs,HR,jE,GR,Yne,Zne,Qne,Jz,Jne,ere,tre,eV,nre,rre,ire,sre,ore,HE,GE,are,lre,ure,cre,dre,hre,pre,fre,mre,gre,vre,yre,tV,WE=P(()=>{fs=X(Ne()),sIe(),Ve(),Dr(),En(),Me(),dIe(),NE(),qne(),HR=({title:s,message:a})=>"".concat(s," ").concat(a),jE=(()=>{let s=new Map;return{add:a=>{let l=HR(a);s.has(l)?s.set(l,s.get(l)+1):s.set(l,1)},delete:a=>{let l=HR(a);s.has(l)&&s.get(l)>1?s.set(l,s.get(l)-1):s.delete(l)},clear:()=>{s.clear()},check:a=>s.has(HR(a))}})(),GR=(()=>{let s=new Map;return{add:a=>{s.has(a)?s.set(a,s.get(a)+1):s.set(a,1)},delete:a=>{s.has(a)&&s.get(a)>1?s.set(a,s.get(a)-1):s.delete(a)},clear:()=>{s.clear()},check:a=>s.has(a),get types(){return Array.of(...s.keys())}}})(),Zne=ae.div(Yne||(Yne=te([`
  width: 100%;
  border-radius: 4px;
  display: flex;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),kr),Jz=ae.div(Qne||(Qne=te([`
  font-size: 14px;
  font-weight: bold;
  color: #fff;
`]))),ere=ae.div(Jne||(Jne=te([`
  flex: 1;
  flex-direction: column;
  width: 0;
  display: flex;
  padding: 16px 0;
  gap: 12px;
`]))),eV=ae.div(tre||(tre=te([`
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;

  a {
    color: rgba(255, 255, 255, 0.9);
  }

  em {
    font-style: italic;
  }

  strong {
    font-weight: bold;
    color: #d5d5d5;
  }

  p {
    margin-bottom: 8px;
  }

  code {
    font-family: monospace;
    background: rgba(0, 0, 0, 0.3);
    padding: 1px 1px 2px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    white-space: pre-wrap;
  }

  pre > code {
    white-space: pre;
    display: block;
    overflow: auto;
    padding: 4px;
  }

  pre {
    white-space: pre-wrap;
    margin-bottom: 8px;
  }
`]))),rre=ae.button(nre||(nre=te([`
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding-left: 12px;
  padding-right: 12px;
  border-left: 1px solid rgba(255, 255, 255, 0.05);

  &:hover {
    background: rgba(255, 255, 255, 0.05);
  }
`]))),ire={info:"#3b82f6",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},ore=ae.div(sre||(sre=te([`
  display: flex;
  justify-content: center;
  margin-left: 12px;
  padding-top: 21px;

  ::before {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 999999px;
    background-color: `,`;
  }
`])),({type:s})=>ire[s]),HE=s=>(a,l,h=[],f=!1)=>{(f||!jE.check({title:a,message:l}))&&(jE.add({title:a,message:l}),GR.add(s),UR.custom(g=>fs.default.createElement(Zne,null,fs.default.createElement(ore,{type:s}),fs.default.createElement(ere,null,fs.default.createElement(Jz,null,a),fs.default.createElement(eV,{dangerouslySetInnerHTML:{__html:Jn.parse(l)}}),h.length>0&&fs.default.createElement(eV,null,fs.default.createElement("span",null,"Docs:"," ",h.map((b,_)=>fs.default.createElement(fs.Fragment,{key:_},_>0&&", ",fs.default.createElement("a",{target:"_blank",href:b.url},b.title)))))),fs.default.createElement(rre,{onClick:()=>{UR.remove(g.id),jE.delete({title:a,message:l}),GR.delete(s)}},"Close")),{duration:1/0}))},GE={warning:HE("warning"),success:HE("success"),info:HE("info"),error:HE("error")},lre=ae.div(are||(are=te([`
  display: flex;
  justify-content: `,`;
  gap: 12px;
`])),({align:s})=>s==="center"?"center":"flex-end"),cre=ae.button(ure||(ure=te([`
  position: relative;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border: none;
  padding: 12px;
  color: #fff;
  overflow: hidden;

  ::before {
    content: '';
    position: absolute;
    inset: 0;
  }

  :hover::before {
    background: `,`;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),kr,({danger:s})=>s?"rgba(255, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"),hre=ae.div(dre||(dre=te([`
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: fixed;
  right: 92px;
  top: 50px;
  width: 500px;
  height: 85vh;
  min-height: 400px;
`]))),fre=ae.div(pre||(pre=te([`
  overflow: hidden;
  pointer-events: auto;
  border-radius: 4px;

  & > div {
    display: flex;
    flex-direction: column-reverse;
    gap: 8px;
    overflow: scroll;
    height: 100%;
  }
`]))),gre=ae.div(mre||(mre=te([`
  width: fit-content;
  padding: 8px;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;
`]))),vre=()=>{let{hasNotifications:s}=tV();return Ub({enabled:!s},()=>fs.default.createElement(Qz,null,fs.default.createElement(gre,null,fs.default.createElement(Jz,null,"No notifications"),"Notifications will appear here when you get them.")))},yre=()=>{var s;let{toasts:a,handlers:l}=Xz(),{startPause:h,endPause:f}=l,g=(s=ir(de().atomP.ahistoric.pinNotifications))!=null?s:!1;return fs.default.createElement(hre,null,g?a.length>0&&fs.default.createElement(fre,{onMouseEnter:h,onMouseLeave:f},fs.default.createElement("div",null,a.map(b=>fs.default.createElement("div",{key:b.id},b.message(b))))):null,fs.default.createElement(lre,{align:"side"},g&&a.length>0&&fs.default.createElement(cre,{onClick:()=>{GR.clear(),jE.clear(),UR.remove()},danger:!0},"Clear")))},tV=()=>{let{toasts:s}=Xz();return{hasNotifications:s.length>0}}});function nV(s,a){var l;let h=Object.values((l=(0,bre.val)(s.pointers.historic.sheetsById))!=null?l:{}),f=h.flatMap(b=>{var _;return Object.values((_=b==null?void 0:b.staticOverrides.byObject)!=null?_:{})}).flatMap(b=>Object.values(b??{})),g=[...h.flatMap(b=>{var _,S;return Object.values((S=(_=b==null?void 0:b.sequence)==null?void 0:_.tracksByObject)!=null?S:{})}).flatMap(b=>{var _;return Object.values((_=b==null?void 0:b.trackData)!=null?_:{})}).flatMap(b=>b==null?void 0:b.keyframes).map(b=>b==null?void 0:b.value)];return f.forEach(b=>{wt(b,_=>{g.push(_)},[])}),g.filter(b=>(b==null?void 0:b.type)&&(a?(b==null?void 0:b.type)==a:typeof(b==null?void 0:b.type)=="string")).map(b=>b.id).filter((b,_,S)=>b!==null&&b!==""&&S.indexOf(b)===_)}var bre,_re=P(()=>{bre=Ut,Qe()});function wre(s,a){let l=new File([s],a),h=URL.createObjectURL(l),f=Object.assign(document.createElement("a"),{href:h,target:"_blank",rel:"noopener"});f.setAttribute("download",a),f.click(),setTimeout(()=>{URL.revokeObjectURL(h)},4e4)}var ol,xre,Sre,Ere,Cre,Pre,Tre,Mre,kre,Are,hIe=P(()=>{Me(),qc(),Kc(),ol=X(Ne()),Ve(),Kte(),rIe(),xre=X(iIe()),WE(),_re(),Ere=ae.div(Sre||(Sre=te([""]))),Pre=ae.div(Cre||(Cre=te([`
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
`]))),Mre=ae(Xc)(Tre||(Tre=te([`
  display flex;
  flex-direction: column;
  gap: 1em;
  width: 280px;
  padding: 1em;
`]))),kre=({projects:s})=>{let a=s[0],l=a.address.projectId,h=l.replace(/[^\w\d'_\-]+/g," ").trim(),f="".concat(h,".theatre-project-state.json"),[g,b]=(0,ol.useState)(!1),_=(0,ol.useCallback)(()=>ie(void 0,null,function*(){var C,I;let O=nV(a),D=new Map;try{yield Promise.all(O.map(N=>ie(void 0,null,function*(){let L=a.assetStorage.getAssetUrl(N),V=yield fetch(L);V.ok&&D.set(N,yield V.blob())})))}catch{GE.error("Failed to access assets","Export aborted. Failed to access assets at ".concat((I=(C=a.config.assets)==null?void 0:C.baseUrl)!=null?I:"/",". This is likely due to a CORS issue."));return}if(D.size>0){let N=new xre.default;for(let[V,G]of D)N.file(V,G);let L=yield N.generateAsync({type:"blob"});wre(L,"".concat(h,".assets.zip"))}let A=JSON.stringify(de().createContentOfSaveFile(a.address.projectId),null,2);wre(A,f),b(!0),setTimeout(()=>{b(!1)},2e3)}),[a,f]),S=$c({debugName:"ProjectDetails",pointerDistanceThreshold:50},()=>ol.default.createElement(Mre,null,ol.default.createElement("p",null,"This will create a JSON file with the state of your project. You can commit this file to your git repo and include it in your production bundle."),ol.default.createElement("p",null,"If your project uses assets, this will also create a zip file with all the assets that you can unpack in your public folder."),ol.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Here is a quick guide on how to export to production.")));return ol.default.createElement(ol.default.Fragment,null,S.node,ol.default.createElement(Ere,null,ol.default.createElement(gne,{projectId:l}),ol.default.createElement(Pre,null,ol.default.createElement(OR,{onMouseEnter:C=>S.open(C,C.target),onClick:g?void 0:_,disabled:g},g?"(Exported)":"Export ".concat(l," to JSON")))))},Are=kre}),vf,Ire,Rre,Dre,Ore,Lre,Nre,Fre,Bre,Ure,zre,pIe=P(()=>{vf=X(Ne()),Ve(),oE(),Rre=ae.div(Ire||(Ire=te([`
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 24px;
`]))),Ore=ae.div(Dre||(Dre=te([`
  display: flex;
  flex-direction: column;
  gap: 11px;
  color: rgba(255, 255, 255, 0.9);
`]))),Nre=ae.div(Lre||(Lre=te([`
  color: rgba(145, 145, 145, 0.8);
`]))),Bre=ae.a(Fre||(Fre=te([`
  color: #919191;
  font-size: 10px;
  text-decoration-color: #40434a;
  text-underline-offset: 3px;
`]))),Ure=()=>vf.default.createElement(Rre,null,vf.default.createElement(Ore,null,vf.default.createElement(Nre,null,vf.default.createElement(_4,null)),vf.default.createElement("div",null,"Please select an object from the ",vf.default.createElement("u",null,"Outline Menu")," to see its properties.")),vf.default.createElement(Bre,{href:"https://www.theatrejs.com/docs/latest/manual/objects",target:"_blank"},"Learn more about Objects")),zre=Ure});function Vre(){let[s,a]=(0,rV.useState)(!1),l=(0,rV.useMemo)(()=>{let h=new Set;return()=>{let f=()=>{h.delete(f),a(h.size>0)};return h.add(f),a(!0),f}},[]);return[s,l]}var rV,jre=P(()=>{rV=X(Ne())}),hi,jb,Hre,Gre,WR,Wre,iV,$re,sV,Kre,oV,$E,Xre,qre,$R,lv,aV=P(()=>{af(),En(),hi=X(Ne()),Ve(),Kt(),dh(),Dr(),eIe(),hIe(),Me(),DY(),jb=Ut,pIe(),jre(),iv(),Hre="32px",WR=ae.div(Gre||(Gre=te([`
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  position: fixed;
  right: 8px;
  top: 50px;
  // Temporary, see comment about CSS grid in SingleRowPropEditor.
  width: 280px;
  height: fit-content;
  z-index: `,`;

  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border-radius: 2px;

  display: `,`;

  &:hover {
    display: block;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),kr,Sb.propsPanel,({pin:s})=>s?"block":"none"),iV=ae.div(Wre||(Wre=te([`
  margin: 0 10px;
  color: #919191;
  font-weight: 500;
  font-size: 10px;
  user-select: none;
  `,`;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`])),kr),sV=ae.div($re||($re=te([`
  height: `,`;
  display: flex;
  align-items: center;
`])),Hre),oV=ae.div(Kre||(Kre=te([`
  `,`;
  max-height: calc(100vh - 100px);
  overflow-y: scroll;
  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
  padding: 0;
  user-select: none;

  /* Set the font-size for input values in the detail panel */
  font-size: 12px;
`])),kr),$E=(0,hi.createContext)([!1,()=>()=>{}]),Xre=s=>{let a=ir(de().atomP.ahistoric.pinDetails)!==!1,l=RY("right");(0,hi.useLayoutEffect)(()=>{$R.set(l)},[l]),(0,hi.useEffect)(()=>()=>{lv.set(!1),$R.set(!1)},[]);let[h]=(0,hi.useContext)($E),f=a||l||h,[g,b]=(0,hi.useState)(null);return gee(g),Qn(()=>{let _=of(),S=_.find(at);if(S)return hi.default.createElement(WR,{"data-testid":"DetailPanel-Object",pin:f,ref:b,onMouseEnter:()=>{lv.set(!0)},onMouseLeave:()=>{lv.set(!1)}},hi.default.createElement(sV,null,hi.default.createElement(iV,{title:"".concat(S.sheet.address.sheetId,": ").concat(S.sheet.address.sheetInstanceId," > ").concat(S.address.objectKey)},hi.default.createElement(sf,null,S.sheet.address.sheetId," "),hi.default.createElement(sE,null,":"," "),hi.default.createElement(sf,null,S.sheet.address.sheetInstanceId," "),hi.default.createElement(sE,null," → "),hi.default.createElement(sf,null,S.address.objectKey))),hi.default.createElement(oV,null,hi.default.createElement(Gte,{objects:[S]})));let C=_.find(je);return C?hi.default.createElement(WR,{pin:f},hi.default.createElement(sV,null,hi.default.createElement(iV,{title:"".concat(C.address.projectId)},hi.default.createElement(sf,null,C.address.projectId," "))),hi.default.createElement(oV,null,hi.default.createElement(Are,{projects:[C]}))):hi.default.createElement(WR,{pin:f,onMouseEnter:()=>{lv.set(!0)},onMouseLeave:()=>{lv.set(!1)}},hi.default.createElement(zre,null))},[f])},qre=()=>{let s=Vre();return hi.default.createElement($E.Provider,{value:s},hi.default.createElement(Xre,null))},$R=new jb.Atom(!1),lv=new jb.Atom(!1),(0,jb.prism)(()=>{let s=(0,jb.val)(lv.prism),a=(0,jb.val)($R.prism);return s||a})}),lV,KR,XR,uV,Hb,Yre,cV,Gb=P(()=>{lV=Ut,En(),Me(),jre(),KR=X(Ne()),hz(),XR=(s,a)=>{let l=s.left/a.width,h=(s.left+s.width)/a.width,f=s.top/a.height,g=(s.height+s.top)/a.height;return{edges:{left:l<=.5?{from:"screenLeft",distance:l}:{from:"screenRight",distance:1-l},right:h<=.5?{from:"screenLeft",distance:h}:{from:"screenRight",distance:1-h},top:f<=.5?{from:"screenTop",distance:f}:{from:"screenBottom",distance:1-f},bottom:g<=.5?{from:"screenTop",distance:g}:{from:"screenBottom",distance:1-g}}}},uV=KR.default.createContext(null),Hb=()=>(0,KR.useContext)(uV),Yre=({panelId:s,children:a,defaultPosition:l,minDims:h})=>{let f=pR(800,200),[g,b]=Vre(),{stuff:_}=Qn(()=>{var S;let{edges:C}=(S=(0,lV.val)(de().atomP.historic.panelPositions[s]))!=null?S:l,I=Math.floor(f.width*(C.left.from==="screenLeft"?C.left.distance:1-C.left.distance)),O=Math.floor(f.width*(C.right.from==="screenLeft"?C.right.distance:1-C.right.distance)),D=Math.floor(f.height*(C.top.from==="screenTop"?C.top.distance:1-C.top.distance)),A=Math.floor(f.height*(C.bottom.from==="screenTop"?C.bottom.distance:1-C.bottom.distance)),N=Math.max(O-I,h.width),L=Math.max(A-D,h.height);return{stuff:{dims:lV.prism.memo("dims",()=>({width:N,left:I,top:D,height:L}),[N,I,D,L]),panelId:s,minDims:h,boundsHighlighted:g,addBoundsHighlightLock:b}}},[s,f,g,b]);return KR.default.createElement(uV.Provider,{value:_},a)},cV=Yre}),KE,Zre,Qre,Jre,dV,eie=P(()=>{Rr(),Me(),Es(),KE=X(Ne()),Ve(),Gb(),sl(),di(),dh(),Qre=ae.div(Zre||(Zre=te([`
  cursor: move;
`]))),Jre=s=>{let a=Hb(),l=(0,KE.useRef)(a);l.current=a;let[h,f]=xr(null),g=(0,KE.useMemo)(()=>({debugName:"PanelDragZone",lockCursorTo:"move",onDragStart(){let C=l.current,I,O=a.addBoundsHighlightLock();return{onDrag(D,A){let N=B(F({},C.dims),{top:_i(C.dims.top+A,0,window.innerHeight-jc),left:_i(C.dims.left+D,-C.dims.width+jc,window.innerWidth-jc)}),L=XR(N,{width:window.innerWidth,height:window.innerHeight});I==null||I.discard(),I=de().tempTransaction(({stateEditors:V})=>{V.studio.historic.panelPositions.setPanelPosition({position:L,panelId:C.panelId})})},onDragEnd(D){O(),D?I==null||I.commit():I==null||I.discard()}}}}),[]),[b]=Ui(f,g);Gl(b,"dragging","move");let[_,S]=(0,KE.useMemo)(()=>{let C;return[function(){if(C){let I=C;C=void 0,I()}C=a.addBoundsHighlightLock()},function(){if(C){let I=C;C=void 0,I()}}]},[]);return KE.default.createElement(Qre,B(F({},s),{ref:h,onMouseEnter:_,onMouseLeave:S}))},dV=Jre}),qR,tie,hV,nie,pV,rie,fV,iie,sie,oie,aie,lie,mV,uie,cie,die,hie,pie,XE,fie,mie,gie,vie,yie,bie,_ie,wie,xie,gV,Sie,_h,fIe=P(()=>{Rr(),Me(),Es(),il(),qR=X(Ne()),Ve(),Gb(),Dr(),di(),dh(),hV=ae.div(tie||(tie=te([`
  position: absolute;
  `,`;
  &:after {
    position: absolute;
    inset: -5px;
    display: block;
    content: ' ';
  }

  opacity: 0;
  background-color: #478698;

  &.isHighlighted {
    opacity: 0.7;
  }

  &.isDragging {
    opacity: 1;
    /* background-color: `,`; */
  }

  &:hover {
    opacity: 1;
  }
`])),kr,mb(.2,"#478698")),pV=ae(hV)(nie||(nie=te([`
  /**
  The horizintal/vertical resize handles have z-index:-1 and are offset 1px outside of the panel
  to make sure they don't occlude any element that pops out of the panel (like the Playhead in SequenceEditorPanel).

  This means that panels will always need an extra 1px margin for their resize handles to be visible, but that's not a problem
  that we have to deal with right now (if it is at all a problem).
  
   */
  z-index: -1;
`]))),fV=ae(pV)(rie||(rie=te([`
  left: 0px;
  right: 0px;
  height: 1px;
`]))),sie=ae(fV)(iie||(iie=te([`
  top: -1px;
`]))),aie=ae(fV)(oie||(oie=te([`
  bottom: -1px;
`]))),mV=ae(pV)(lie||(lie=te([`
  z-index: -1;
  top: -1px;
  bottom: -1px;
  width: 1px;
`]))),cie=ae(mV)(uie||(uie=te([`
  left: -1px;
`]))),hie=ae(mV)(die||(die=te([`
  right: -1px;
`]))),XE=ae(hV)(pie||(pie=te([`
  // The angles have z-index: 10 to make sure they _do_ occlude other elements in the panel.
  z-index: 10;
  width: 8px;
  height: 8px;
`]))),mie=ae(XE)(fie||(fie=te([`
  top: 0;
  left: 0;
`]))),vie=ae(XE)(gie||(gie=te([`
  top: 0;
  right: 0;
`]))),bie=ae(XE)(yie||(yie=te([`
  bottom: 0;
  left: 0;
`]))),wie=ae(XE)(_ie||(_ie=te([`
  bottom: 0;
  right: 0;
`]))),xie={Top:sie,TopLeft:mie,TopRight:vie,Bottom:aie,BottomLeft:bie,BottomRight:wie,Left:cie,Right:hie},gV={Top:"ns-resize",Bottom:"ns-resize",Left:"ew-resize",Right:"ew-resize",TopLeft:"nw-resize",TopRight:"ne-resize",BottomLeft:"sw-resize",BottomRight:"se-resize"},Sie=({which:s})=>{let a=Hb(),l=(0,qR.useRef)(a);l.current=a;let[h,f]=xr(null),g=(0,qR.useMemo)(()=>({debugName:"PanelResizeHandle",lockCursorTo:gV[s],onDragStart(){let C,I=l.current,O=a.addBoundsHighlightLock();return{onDrag(D,A){let N=F({},I.dims);if(s.startsWith("Bottom"))N.height=Math.max(N.height+A,I.minDims.height);else if(s.startsWith("Top")){let V=N.top+N.height,G=_i(N.top+A,0,Math.min(V-I.minDims.height,window.innerHeight-jc)),$=V-G;N.height=$,N.top=G}if(s.endsWith("Left")){let V=N.left+N.width,G=Math.min(N.left+D,Math.min(V-I.minDims.width,window.innerWidth-jc)),$=V-G;N.width=$,N.left=G}else s.endsWith("Right")&&(N.width=Math.max(N.width+D,Math.max(I.minDims.width,jc-I.dims.left)));let L=XR(N,{width:window.innerWidth,height:window.innerHeight});C==null||C.discard(),C=de().tempTransaction(({stateEditors:V})=>{V.studio.historic.panelPositions.setPanelPosition({position:L,panelId:I.panelId})})},onDragEnd(D){O(),D?C==null||C.commit():C==null||C.discard()}}}}),[s]),[b]=Ui(f,g),_=xie[s],S=s.length<=6;return qR.default.createElement(_,{ref:h,className:[b?"isDragging":"",a.boundsHighlighted&&S?"isHighlighted":""].join(" "),style:{cursor:gV[s]}})},_h=Sie}),Xu,Eie,Cie,mIe=P(()=>{Xu=X(Ne()),fIe(),Eie=s=>Xu.default.createElement(Xu.default.Fragment,null,Xu.default.createElement(_h,{which:"Bottom"}),Xu.default.createElement(_h,{which:"Top"}),Xu.default.createElement(_h,{which:"Left"}),Xu.default.createElement(_h,{which:"Right"}),Xu.default.createElement(_h,{which:"TopLeft"}),Xu.default.createElement(_h,{which:"TopRight"}),Xu.default.createElement(_h,{which:"BottomLeft"}),Xu.default.createElement(_h,{which:"BottomRight"})),Cie=Eie}),YR,Pie,Tie,Mie,vV,kie=P(()=>{Dr(),YR=X(Ne()),Ve(),Gb(),mIe(),Tie=ae.div(Pie||(Pie=te([`
  position: absolute;
  user-select: none;
  box-sizing: border-box;
  `,`;
  /* box-shadow: 1px 2px 10px -5px black; */

  z-index: 1000;
`])),kr),Mie=YR.default.forwardRef((s,a)=>{let l=Hb(),h=s,{style:f,children:g}=h,b=z(h,["style","children"]);return YR.default.createElement(Tie,B(F({ref:a},b),{style:F({width:l.dims.width+"px",height:l.dims.height+"px",top:l.dims.top+"px",left:l.dims.left+"px"},f??{})}),YR.default.createElement(Cie,null),g)}),vV=Mie}),gIe=W((s,a)=>{(function(l,h){typeof s=="object"&&typeof a<"u"?h(s,Ne()):(l=typeof globalThis<"u"?globalThis:l||self,h(l.ReactErrorBoundary={},l.React))})(s,function(l,h){function f(A){if(A&&A.__esModule)return A;var N=Object.create(null);return A&&Object.keys(A).forEach(function(L){if(L!=="default"){var V=Object.getOwnPropertyDescriptor(A,L);Object.defineProperty(N,L,V.get?V:{enumerable:!0,get:function(){return A[L]}})}}),N.default=A,Object.freeze(N)}var g=f(h);function b(A,N){return b=Object.setPrototypeOf||function(L,V){return L.__proto__=V,L},b(A,N)}function _(A,N){A.prototype=Object.create(N.prototype),A.prototype.constructor=A,b(A,N)}var S=function(A,N){return A===void 0&&(A=[]),N===void 0&&(N=[]),A.length!==N.length||A.some(function(L,V){return!Object.is(L,N[V])})},C={error:null},I=function(A){_(N,A);function N(){for(var V,G=arguments.length,$=new Array(G),Y=0;Y<G;Y++)$[Y]=arguments[Y];return V=A.call.apply(A,[this].concat($))||this,V.state=C,V.updatedWithError=!1,V.resetErrorBoundary=function(){for(var re,ne=arguments.length,le=new Array(ne),Ce=0;Ce<ne;Ce++)le[Ce]=arguments[Ce];V.props.onReset==null||(re=V.props).onReset.apply(re,le),V.reset()},V}N.getDerivedStateFromError=function(V){return{error:V}};var L=N.prototype;return L.reset=function(){this.updatedWithError=!1,this.setState(C)},L.componentDidCatch=function(V,G){var $,Y;($=(Y=this.props).onError)==null||$.call(Y,V,G)},L.componentDidMount=function(){var V=this.state.error;V!==null&&(this.updatedWithError=!0)},L.componentDidUpdate=function(V){var G=this.state.error,$=this.props.resetKeys;if(G!==null&&!this.updatedWithError){this.updatedWithError=!0;return}if(G!==null&&S(V.resetKeys,$)){var Y,re;(Y=(re=this.props).onResetKeysChange)==null||Y.call(re,V.resetKeys,$),this.reset()}},L.render=function(){var V=this.state.error,G=this.props,$=G.fallbackRender,Y=G.FallbackComponent,re=G.fallback;if(V!==null){var ne={error:V,resetErrorBoundary:this.resetErrorBoundary};if(g.isValidElement(re))return re;if(typeof $=="function")return $(ne);if(Y)return g.createElement(Y,ne);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},N}(g.Component);function O(A,N){var L=function(G){return g.createElement(I,N,g.createElement(A,G))},V=A.displayName||A.name||"Unknown";return L.displayName="withErrorBoundary("+V+")",L}function D(A){var N=g.useState(null),L=N[0],V=N[1];if(A!=null)throw A;if(L!=null)throw L;return V}l.ErrorBoundary=I,l.useErrorHandler=D,l.withErrorBoundary=O,Object.defineProperty(l,"__esModule",{value:!0})})}),po,Aie,Iie,Rie,Die,Oie,Lie,Nie,Fie,Bie,Uie,zie,Vie,jie,Hie,Gie,Wie,$ie,Kie,Xie,vIe=P(()=>{po=X(Ne()),Ve(),dh(),Gb(),eie(),kie(),Aie=X(gIe()),Ib(),Me(),dh(),Iie={edges:{left:{from:"screenLeft",distance:.3},right:{from:"screenRight",distance:.3},top:{from:"screenTop",distance:.3},bottom:{from:"screenBottom",distance:.3}}},Rie={width:300,height:300},Die=({paneInstance:s})=>po.default.createElement(cV,{panelId:"pane-".concat(s.instanceId),defaultPosition:Iie,minDims:Rie},po.default.createElement(Kie,{paneInstance:s})),Lie=ae(vV)(Oie||(Oie=te([`
  display: flex;
  flex-direction: column;

  box-shadow: 0px 5px 12px -4px rgb(0 0 0 / 22%);
  z-index: `,`;
`])),Sb.pluginPanes),Fie=ae.div(Nie||(Nie=te([`
  width: 100%;
`]))),Uie=ae.div(Bie||(Bie=te([`
  display: flex;
  align-items: center;
  opacity: 1;
  position: absolute;
  right: 4px;
  top: 0;
  bottom: 0;
`]))),Vie=ae.button(zie||(zie=te([`
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 2px;
  font-size: 11px;
  height: 10px;
  width: 18px;
  color: #adadadb3;
  background: transparent;
  border: none;
  cursor: pointer;
  &:hover {
    color: white;
  }
`]))),Hie=ae(Iq)(jie||(jie=te([`
  position: relative;
  overflow: hidden;

  &:after {
    z-index: 10;
    position: absolute;
    inset: 0;
    display: block;
    content: ' ';
    pointer-events: none;

    #pointer-root:not(.normal) & {
      pointer-events: auto;
    }
  }
`]))),Wie=ae.div(Gie||(Gie=te([`
  padding: 12px;

  & > pre {
    border: 1px solid #ff62624f;
    background-color: rgb(255 0 0 / 5%);
    margin: 8px 0;
    padding: 8px;
    font-family: monospace;
    overflow: scroll;
    color: #ff9896;
  }
`]))),$ie=s=>po.default.createElement(Wie,null,"An Error occurred rendering this pane. Open the console for more info.",po.default.createElement("pre",null,JSON.stringify({message:s.error.message,stack:s.error.stack},null,2))),Kie=({paneInstance:s})=>{let[a,l]=(0,po.useState)(null),h=s.definition.mount;(0,po.useLayoutEffect)(()=>{if(!a)return;let g=h({paneId:s.instanceId,node:a});if(typeof g=="function")return g},[a,h,s.instanceId]);let f=(0,po.useCallback)(()=>{de().paneManager.destroyPane(s.instanceId)},[s]);return po.default.createElement(Lie,{"data-testid":"theatre-pane-wrapper-".concat(s.instanceId)},po.default.createElement(dV,null,po.default.createElement(y4,null,po.default.createElement(Uie,null,po.default.createElement(Vie,{onClick:f,title:"Close Pane"},po.default.createElement(_Ae,null))),po.default.createElement(Fie,null,s.instanceId))),po.default.createElement(Aie.ErrorBoundary,{FallbackComponent:$ie},po.default.createElement(Hie,{"data-testid":"theatre-pane-content-".concat(s.instanceId),ref:l})))},Xie=Die}),yV,bV,qie=P(()=>{yV=Ut,bV=(s,a)=>{let l=yV.prism.memo(s,()=>new yV.Atom(a),[]);return l.set(a),l}});function Yie(s,a){(0,Zie.useLayoutEffect)(()=>{if(!s||a.type!=="propWithChildren"&&a.type!=="primitiveProp"&&a.type!=="sheetObject")return;let l=null,h=B(F({},a.sheetObject.address),{pathToProp:a.type==="sheetObject"?[]:a.pathToProp});function f(){l=kR.replaceLock(h,()=>{})}function g(){l==null||l()}return s.addEventListener("mouseenter",f),s.addEventListener("mouseleave",g),()=>{l==null||l(),s.removeEventListener("mouseenter",f),s.removeEventListener("mouseleave",g)}},[s])}var Zie,Qie=P(()=>{Zie=X(Ne()),Fz()}),yf,Jie,_V,ese,wV,tse,xV,nse,rse,ise,sse,ose,ase,lse,ZR,QR=P(()=>{Dr(),yf=X(Ne()),Ib(),Ve(),nv(),Qie(),_V=ae.li(Jie||(Jie=te([`
  --depth: `,`;
  margin: 0;
  padding: 0;
  list-style: none;
`])),s=>s.depth),wV=ae.div(ese||(ese=te([`
  border-bottom: 1px solid #7695b705;
`]))),xV=ae(wV)(tse||(tse=te([`
  padding-left: calc(8px + var(--depth) * 20px);

  display: flex;
  align-items: stretch;
  color: `,`;

  box-sizing: border-box;

  `,`;
`])),xb.panel.body.compoudThing.label.color,s=>s.isSelected&&"background: blue"),rse=ae.span(nse||(nse=te([`
  `,`;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding-right: 4px;
  line-height: 26px;
  flex-wrap: nowrap;

  `,`:hover & {
    color: #ccc;
  }
`])),hf,xV),sse=ae.span(ise||(ise=te([`
  width: 12px;
  padding: 8px;
  font-size: 9px;
  display: flex;
  align-items: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),s=>s.isCollapsed?0:90,s=>s.isCollapsed?15:75),ase=ae.ul(ose||(ose=te([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),lse=({leaf:s,label:a,children:l,isSelectable:h,isSelected:f,toggleSelect:g,toggleCollapsed:b,isCollapsed:_})=>{let S=Array.isArray(l)&&l.length>0,C=(0,yf.useRef)(null);return Yie(C.current,s),s.shouldRender?yf.default.createElement(_V,{depth:s.depth},yf.default.createElement(xV,{ref:C,style:{height:s.nodeHeight+"px"},isSelectable:h===!0,isSelected:f===!0,onClick:g,isEven:s.n%2===0},yf.default.createElement(sse,{isCollapsed:_,onClick:b},yf.default.createElement(EZ,null)),yf.default.createElement(rse,null,a)),S&&yf.default.createElement(ase,null,l)):null},ZR=lse});function yIe(s,a){return a.every((l,h)=>l===s[h])}function bIe(s,a){if(s.length!==a.length)return!1;for(let l=0;l<s.length;l++)if(s[l]!==a[l])return!1;return!0}function JR(s){var a;let l=[];for(;;){let h=l.length,f=(a=s[0])==null?void 0:a[h];if(f===void 0)return l;for(let g of s)if(f!==g[h])return l;l.push(f)}}var Jc,eD,ed=P(()=>{gR(),Jc=bE(s=>JSON.stringify(s)),eD=s=>JSON.parse(s)});function _Ie(s,a){let l=(0,SV.useRef)({combo:s,listener:a});l.current={combo:s,listener:a},(0,SV.useEffect)(()=>{function h(b){b.key===l.current.combo&&l.current.listener({down:!0,event:b})}function f(b){b.key===l.current.combo&&l.current.listener({down:!1,event:b})}function g(b){l.current.listener({down:!1,event:void 0})}return document.addEventListener("keydown",h),document.addEventListener("keyup",f),window.addEventListener("blur",g),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",f),window.removeEventListener("blur",g)}},[])}var SV,wIe=P(()=>{SV=X(Ne())});function use(s){let[a,l]=(0,cse.useState)(!1);return _Ie(s,({down:h})=>{l(h)}),a}var cse,dse=P(()=>{cse=X(Ne()),wIe()});function xIe(s){let a=(0,EV.useMemo)(()=>new hse.Atom(s),[]);return(0,EV.useLayoutEffect)(()=>{a.set(s)},[s]),a}var hse,EV,SIe=P(()=>{hse=Ut,EV=X(Ne())});function pse(s,a,l){let h=(0,CV.pointer)({root:{},path:[]}),f=a(h);Xp(s,(0,CV.getPointerParts)(f).path,l)}var CV,EIe=P(()=>{CV=Ut,Yy()}),tD,fse,ua,qu=P(()=>{tD="data-pos",fse={checkIfMouseEventSnapToPos(s,a){let l=s.composedPath().find(h=>h instanceof Element&&h!==(a==null?void 0:a.ignore)&&h.hasAttribute(tD));if(l){let h=parseFloat(l.getAttribute(tD));if(isFinite(h))return h}return null},includePositionSnapAttrs(s){return{[tD]:s}}},ua=fse});function nD(s){let a=s.type==="sheet"?PIe(s):PV(s);return{byPosition:CIe(a),tracks:a}}function CIe(s){let a=new Map;for(let l of s)for(let h of l.data.keyframes){let f=a.get(h.position);f||(f=[],a.set(h.position,f)),f.push({kf:h,track:l,itemKey:Ls.forTrackKeyframe(l.sheetObject,l.id,h.id)})}return a}function PIe(s){return s.children.flatMap(PV)}function PV(s){return s.children.flatMap(a=>a.type==="propWithChildren"?PV(a):TIe(a))}function TIe(s){let a=s.sheetObject,l=a.address.projectId,h=de().atomP.historic.coreByProject[l].sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey],f=(0,rD.val)(h.trackIdByPropPath[Jc(s.pathToProp)]);if(!f)return[];let g=(0,rD.val)(h.trackData[f]);return g?[{id:f,data:g,sheetObject:a}]:[]}function MIe(s,a){return Oo(s.children.flatMap(l=>TV(l,a)))}function TV(s,a){return Oo(s.children.flatMap(l=>l.type==="propWithChildren"?TV(l,a):kIe(l,a)))}function kIe(s,a){var l,h;let f=s.sheetObject,g=f.address.projectId,b=de().atomP.historic.coreByProject[g].sheetsById[f.address.sheetId].sequence.tracksByObject[f.address.objectKey],_=(0,rD.val)(b.trackIdByPropPath[Jc(s.pathToProp)]);return _?(h=(l=a[f.address.objectKey])==null?void 0:l[_])!=null?h:[]:[]}var rD,Wb=P(()=>{Me(),rD=Ut,yh(),ed(),di()});function AIe(s,a){let[l,h]=xr(null),f=lf("useCaptureSelection");return Ui(a,(0,$b.useMemo)(()=>({debugName:"DopeSheetSelectionView/useCaptureSelection",dontBlockMouseDown:!0,lockCSSCursorTo:"cell",onDragStart(g){if(!g.shiftKey||g.target instanceof HTMLInputElement)return!1;let b=a.getBoundingClientRect(),_=g.clientX-b.left-(0,$l.val)(s.scaledSpace.leftPadding),S=(0,$l.val)(s.scaledSpace.toUnitSpace)(_);return l.current={h:[S,S],v:[g.clientY-b.top,g.clientY-b.top]},(0,$l.val)(s.selectionAtom).set({current:void 0}),{onDrag(C,I,O){let D=a.getBoundingClientRect(),A=O.clientX-D.left-(0,$l.val)(s.scaledSpace.leftPadding),N=(0,$l.val)(s.scaledSpace.toUnitSpace)(A);l.current={h:[l.current.h[0],N],v:[l.current.v[0],O.clientY-D.top]};let L=MV.boundsToSelection(f,(0,$l.val)(s),l.current);(0,$l.val)(s.selectionAtom).set({current:L})},onDragEnd(C){l.current=null}}}}),[s,a,l])),h}var $l,$b,bf,mse,gse,vse,MV,yse,bse,kV,_se,wse,IIe=P(()=>{Me(),Es(),dse(),SIe(),EIe(),Rr(),En(),$l=Ut,$b=X(Ne()),Ve(),qu(),Wb(),uf(),bf=5,gse=ae.div(mse||(mse=te([`
  cursor: `,`;
`])),s=>s.isShiftDown?"cell":"default"),vse=({layoutP:s,children:a,height:l})=>{let[h,f]=xr(null),g=use("Shift"),b=AIe(s,f),_=(0,$b.useRef)(b);return _.current=b,$b.default.createElement(gse,{style:{height:l+"px"},ref:h,isShiftDown:g,className:"selectionview"},b&&$b.default.createElement(_se,{state:b,layoutP:s}),a)},(s=>{let a=(b,_,S,C,I)=>{let O=nD(S);if(S.top+S.nodeHeight/2+bf>C.v[0]&&S.top+S.nodeHeight/2-bf<C.v[1])for(let[D,A]of O.byPosition){let N=_.scaledSpace.toUnitSpace(bf);if(!(D+N<=C.h[0]||D-N>=C.h[1]))for(let L of A)pse(I,V=>V[L.track.sheetObject.address.objectKey].byTrackId[L.track.id].byKeyframeId[L.kf.id],!0)}h(b,_,S,C,I)},l={sheet(b,_,S,C,I){a(b,_,S,C,I)},propWithChildren(b,_,S,C,I){a(b,_,S,C,I)},sheetObject(b,_,S,C,I){a(b,_,S,C,I)},primitiveProp(b,_,S,C,I){let{sheetObject:O,trackId:D}=S,A=(0,$l.val)(de().atomP.historic.coreByProject[O.address.projectId].sheetsById[O.address.sheetId].sequence.tracksByObject[O.address.objectKey].trackData[D]);if(!(C.v[0]>S.top+S.heightIncludingChildren/2+bf||S.top+S.heightIncludingChildren/2-bf>C.v[1])){for(let N of A.keyframes)if(!(N.position+_.scaledSpace.toUnitSpace(bf)<=C.h[0])){if(N.position-_.scaledSpace.toUnitSpace(bf)>=C.h[1])break;pse(I,L=>L[O.address.objectKey].byTrackId[D].byKeyframeId[N.id],!0)}}}},h=(b,_,S,C,I)=>{if("children"in S)for(let O of S.children)f(b,_,O,C,I)};function f(b,_,S,C,I){if(!S.shouldRender||C.v[0]>S.top+S.heightIncludingChildren||S.top>C.v[1])return;let O=l[S.type];O?O(b,_,S,C,I):h(b,_,S,C,I)}function g(b,_,S){let C={};S=kV(S);let I=_.tree;f(b.utilFor.internal(),_,I,S,C);let O=_.tree.sheet;return{type:"DopeSheetSelection",byObjectKey:C,getDragHandlers(D){return{debugName:"DopeSheetSelectionView/boundsToSelection",onDragStart(){let A,N=_.scaledSpace.toUnitSpace;return{onDrag(L,V,G){A&&(A.discard(),A=void 0);let $=ua.checkIfMouseEventSnapToPos(G,{ignore:D.domNode}),Y=$!=null?$-D.positionAtStartOfDrag:N(L);A=de().tempTransaction(({stateEditors:re})=>{let ne=re.coreByProject.historic.sheetsById.sequence.transformKeyframes;for(let le of Object.keys(C)){let{byTrackId:Ce}=C[le];for(let ve of Object.keys(Ce)){let{byKeyframeId:we}=Ce[ve];ne({trackId:ve,keyframeIds:Object.keys(we),translate:Y,scale:1,origin:0,snappingFunction:O.getSequence().closestGridPosition,objectKey:le,projectId:D.projectId,sheetId:D.sheetId})}}})},onDragEnd(L){L?A==null||A.commit():A==null||A.discard()}}}}},delete(){de().transaction(({stateEditors:D})=>{let A=D.coreByProject.historic.sheetsById.sequence.deleteKeyframes;for(let N of Object.keys(C)){let{byTrackId:L}=C[N];for(let V of Object.keys(L)){let{byKeyframeId:G}=L[V];A(B(F({},O.address),{objectKey:N,trackId:V,keyframeIds:Object.keys(G)}))}}})}}}s.boundsToSelection=g})(MV||(MV={})),bse=ae.div(yse||(yse=te([`
  position: absolute;
  background: rgba(255, 255, 255, 0.1);
  border: 1px dashed rgba(255, 255, 255, 0.4);
  box-sizing: border-box;
`]))),kV=s=>({h:[...s.h].sort((a,l)=>a-l),v:[...s.v].sort((a,l)=>a-l)}),_se=({state:s,layoutP:a})=>{let l=xIe(s);return Qn(()=>{let h=(0,$l.val)(l.pointer),f=kV(h),g=(0,$l.val)(a.scaledSpace.fromUnitSpace),b=(0,$l.val)(a.scaledSpace.leftPadding),_=f.h.map(g).map(D=>D+b),S=f.v[0],C=f.v[1]-f.v[0],I=_[0],O=_[1]-_[0];return $b.default.createElement(bse,{style:{top:S+"px",height:C+"px",left:I+"px",width:O+"px"}})},[a,l])},wse=vse}),uv,xse,Sse,AV,Ese,Cse,Pse,Tse=P(()=>{Eb(),uv=X(Ne()),Ve(),Mh(),Sse=ae.div(xse||(xse=te([`
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  overflow-x: hidden;
  overflow-y: scroll;
  z-index: `,`;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
`])),()=>cd.scrollableArea),AV=(0,uv.createContext)(ju),Ese=()=>(0,uv.useContext)(AV),Cse=s=>{let a=(0,uv.useRef)(null),l=(0,uv.useCallback)(h=>{a.current.scrollBy(0,h.deltaY)},[]);return uv.default.createElement(AV.Provider,{value:l},uv.default.createElement(Sse,{ref:a},s.children))},Pse=Cse}),Mse,RIe=P(()=>{Mse='data:image/svg+xml,<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">%0A  <path d="M1 7V1H7" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M7 33H1L1 27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M33 27V33H27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M27 1L33 1V7" stroke="%2374FFDE" stroke-width="0.25" />%0A</svg>'}),Kl,iD=P(()=>{Kl=(s,a=s)=>`
  left: `.concat(s*-.5,`px;
  top: `).concat(a*-.5,`px;
  width: `).concat(s,`px;
  height: `).concat(a,`px;
`)}),sD,kse,Ase,DIe=P(()=>{sD=Ut,kse=(0,sD.prism)(()=>{let[s,a]=sD.prism.state("pos",null);return sD.prism.effect("setupListeners",()=>{let l=h=>{a(h)};return document.addEventListener("mousemove",l),()=>{document.removeEventListener("mousemove",l)}},[]),s}),Ase=kse}),wh,ca,qE,Ise,Rse,Dse,Ose,xh,td,oD,Lse,Nse,fo=P(()=>{wh=Ut,DIe(),di(),ca=X(Ne()),qE=(0,ca.createContext)(null),Ise=0,Rse=({children:s,layoutP:a})=>{let l=(0,ca.useMemo)(()=>new wh.Atom([]),[]),h=(0,ca.useMemo)(()=>(0,wh.prism)(()=>{let b=wh.prism.memo("p",()=>Lse(a),[a]).getValue(),_=(0,wh.val)(l.pointer);return _.length>0?eh(_).position:b}),[a]),f=(0,ca.useCallback)(()=>{let b=Ise++;return l.reduce(_=>[..._,{id:b,position:[-1,0]}]),{set:_=>{l.reduce(S=>{let C=S.findIndex(O=>O.id===b);if(C===-1)return console.warn("Lock is already freed. This is a bug."),S;let I=[...S];return I.splice(C,1,{id:b,position:[_,_===-1?0:1]}),I})},unlock:()=>{l.reduce(_=>_.filter(S=>S.id!==b))}}},[]),g={currentD:h,getLock:f};return ca.default.createElement(qE.Provider,{value:g},s)},Dse=()=>(0,ca.useContext)(qE).currentD,Ose=()=>{let{getLock:s}=(0,ca.useContext)(qE),a=(0,ca.useRef)();return(0,ca.useLayoutEffect)(()=>()=>{var l;(l=a.current)==null||l.unlock()},[]),(0,ca.useMemo)(()=>{let l;return(h,f)=>{var g,b;(l==null?void 0:l.shouldLock)!==h&&(h?a.current=s():(g=a.current)==null||g.unlock()),(l==null?void 0:l.pos)!==f&&h&&((b=a.current)==null||b.set(f)),l={shouldLock:h,pos:f}}},[s])},xh=(s,a)=>{let{getLock:l}=(0,ca.useContext)(qE),h=(0,ca.useRef)();(0,ca.useLayoutEffect)(()=>{if(s)return h.current=l(),()=>{h.current.unlock()}},[s,l]),(0,ca.useLayoutEffect)(()=>{s&&h.current.set(a)},[a,s])},td=s=>({[oD]:s==="hide"?s:s.toFixed(3)}),oD="data-theatre-lock-framestamp-to",Lse=s=>(0,wh.prism)(()=>{let a=(0,wh.val)(s.rightDims),l=(0,wh.val)(s.clippedSpace.toUnitSpace),h=(0,wh.val)(Ase);if(!h)return[-1,0];for(let I of h.composedPath()){if(!(I instanceof HTMLElement||I instanceof SVGElement))break;if(I.hasAttribute(oD)){let O=I.getAttribute(oD);if(typeof O!="string")continue;if(O==="hide")return[-1,0];let D=parseFloat(O);if(isFinite(D)&&D>=0)return[D,2]}}let{clientX:f,clientY:g}=h,{screenX:b,screenY:_,width:S,height:C}=a;if(_S(f,b,b+S)&&_S(g,_+16,_+C)){let I=f-b;return[l(I),3]}else return[-1,0]}),Nse=Rse}),Fse,YE,IV,Bse,Use,nd,zse=P(()=>{Dr(),sl(),Ve(),RIe(),iD(),qu(),fo(),Fse=12,YE=34,IV="beingDragged",nd={BEING_DRAGGED_CLASS:IV,CSS:lo(Bse||(Bse=te([`
    position: absolute;
    `,`;
    `,`;

    &.`,` {
      pointer-events: none !important;
    }
  `])),Kl(Fse),kr,IV),CSS_WHEN_SOMETHING_DRAGGING:lo(Use||(Use=te([`
    pointer-events: auto;
    cursor: var(`,`);

    // ⸢⸤⸣⸥ thing
    // This box extends the hitzone so the user does not
    // accidentally leave the hitzone
    &:hover:after {
      position: absolute;
      top: calc(50% - `,`px);
      left: calc(50% - `,`px);
      width: `,`px;
      height: `,`px;
      display: block;
      content: ' ';
      background: url(`,`) no-repeat 100% 100%;
      // This icon might also fit: GiConvergenceTarget
    }
  `])),ph,YE/2,YE/2,YE,YE,Mse),reactProps(s){return B(F(F({},td(s.position)),ua.includePositionSnapAttrs(s.position)),{className:s.isDragging?nd.BEING_DRAGGED_CLASS:""})}}});function RV(){QE.set({mode:"snapToAll"})}function cv(){QE.set({mode:"snapToNone"})}function Vse(s){QE.set({mode:"snapToSome",positions:s})}function jse(s,a){return Object.fromEntries(Object.entries(s).map(([l,h])=>[l,Object.fromEntries(Object.entries(h.trackData).map(([f,g])=>[f,g.keyframes.filter(b=>a(b,{trackId:f,trackData:g,objectKey:l})).map(b=>b.position)]))]))}var Hse,Gse,DV,Wse,$se,Kse,Xse,qse,ZE,QE,OV,dv=P(()=>{Hse=Ut,Gse=Ut,DV=X(Ne()),Ve(),zse(),$se=ae.div(Wse||(Wse=te([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  #pointer-root.draggingPositionInSequenceEditor & {
    `,`
  }
`])),nd.CSS,nd.CSS_WHEN_SOMETHING_DRAGGING),Xse=ae.div(Kse||(Kse=te([`
  position: absolute;
`]))),qse=s=>DV.default.createElement(Xse,{style:{top:"".concat(s.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,Gse.val)(s.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(s.position,"px))")}},DV.default.createElement($se,F({},nd.reactProps({isDragging:!1,position:s.position})))),ZE=qse,QE=new Hse.Atom({mode:"snapToNone"}),OV=QE.prism});function OIe(s,a){let l=(0,hv.useMemo)(()=>({debugName:"HorizontallyScrollableArea",onDragStart(f){if(f.target instanceof HTMLInputElement||f.shiftKey||f.altKey||f.ctrlKey||f.metaKey||f.composedPath().some(O=>O instanceof HTMLElement&&O.draggable===!0))return!1;let g=f.clientX-a.getBoundingClientRect().left,b=_i((0,zi.val)(s.clippedSpace.toUnitSpace)(g),0,1/0),_=(0,zi.val)(s.seeker.setIsSeeking),S=(0,zi.val)(s.sheet).getSequence();S.position=b;let C=b,I=(0,zi.val)(s.scaledSpace.toUnitSpace);return _(!0),RV(),{onDrag(O,D,A){let N=I(O),L=_i(C+N,0,S.length),V=ua.checkIfMouseEventSnapToPos(A,{});V!=null&&(L=V),S.position=L},onDragEnd(){_(!1),cv()}}}}),[s,a]),[h]=Ui(a,l);Gl(h,"draggingPositionInSequenceEditor","ew-resize")}function LIe(s,a){let l=Ese();(0,hv.useLayoutEffect)(()=>{if(!a)return;let h=g=>{if(g.ctrlKey){g.preventDefault(),g.stopPropagation();let b=g.clientX-a.getBoundingClientRect().left,_=(0,zi.val)(s.clippedSpace.toUnitSpace)(b),S=(0,zi.val)(s.clippedSpace.range),C=1+LV(g.deltaY,[-50,50])*.03,I=th(S,A=>(A-_)*C+_),O=(0,zi.val)(s.sheet).getSequence().length,D=O+O*.25;(0,zi.val)(s.clippedSpace.setRange)(NIe(I,[0,D]));return}else if(g.shiftKey){g.preventDefault(),g.stopPropagation();let b=(0,zi.val)(s.sheet).getSequence().length,_=(0,zi.val)(s.clippedSpace.range),S=(_.end-_.start)/b,C=LV(g.deltaY||g.deltaX,[-50,50])*.05*S,I=th(_,O=>O+C);(0,zi.val)(s.clippedSpace.setRange)(I);return}else{l(g),g.preventDefault(),g.stopPropagation();let b=(0,zi.val)(s.scaledSpace.toUnitSpace)(g.deltaX*1),_=(0,zi.val)(s.clippedSpace.range),S=th(_,C=>C+b);(0,zi.val)(s.clippedSpace.setRange)(S);return}},f={capture:!0,passive:!1};return a.addEventListener("wheel",h,f),()=>{a.removeEventListener("wheel",h,f)}},[a,s]),Ui(a,(0,hv.useMemo)(()=>({onDragStart(h){let f=(0,zi.val)(s.clippedSpace.range),g=(0,zi.val)(s.clippedSpace.setRange),b=(0,zi.val)(s.scaledSpace.toUnitSpace);return h.preventDefault(),h.stopPropagation(),{onDrag(_,S,C,I,O){l({deltaY:-O});let D=-b(_),A=th(f,N=>N+D);g(A)}}},debugName:"HorizontallyScrollableArea Middle Button Drag",buttons:[1],lockCSSCursorTo:"grabbing"}),[s]))}function LV(s,[a,l]){return Math.max(Math.min(s,l),a)}function NIe(s,a){return th(s,l=>LV(l,a))}function FIe(s,a){(0,hv.useLayoutEffect)(()=>{if(!a)return;let l=(0,zi.prism)(()=>{let b=(0,zi.val)(s.clippedSpace.range);return(0,zi.val)(s.scaledSpace.fromUnitSpace)(b.start)}),h=()=>{let b=l.getValue();a.scrollLeft=b},f=l.onStale(h);h();let g=setTimeout(h,100);return()=>{clearTimeout(g),f()}},[s,a])}var zi,hv,Yse,Zse,Qse,NV,Jse=P(()=>{Es(),Rr(),En(),zi=Ut,di(),hv=X(Ne()),Ve(),Tse(),Dr(),sl(),qu(),dv(),Zse=ae.div(Yse||(Yse=te([`
  position: absolute;

  right: 0;
  overflow-x: scroll;
  overflow-y: hidden;
  `,`;

  // hide the scrollbar on Gecko
  scrollbar-width: none;

  // hide the scrollbar on Webkit/Blink
  &::-webkit-scrollbar {
    display: none;
  }
`])),kr),Qse=hv.default.memo(({layoutP:s,children:a,height:l})=>{let{width:h,unitSpaceToScaledSpaceMultiplier:f}=Qn(()=>({width:(0,zi.val)(s.rightDims.width),unitSpaceToScaledSpaceMultiplier:(0,zi.val)(s.scaledSpace.fromUnitSpace)(1)}),[s]),[g,b]=xr(null);return LIe(s,b),OIe(s,b),FIe(s,b),hv.default.createElement(Zse,{ref:g,style:{width:h+"px",height:l+"px","--unitSpaceToScaledSpaceMultiplier":f}},a)}),NV=Qse}),aD,eoe,toe,noe,roe,ioe,soe,ooe,Kb,lD=P(()=>{aD=X(Ne()),Ve(),toe=ae.li(eoe||(eoe=te([`
  margin: 0;
  padding: 0;
  list-style: none;
  box-sizing: border-box;
  position: relative;
`]))),roe=ae.div(noe||(noe=te([`
  box-sizing: border-box;
  width: 100%;
  position: relative;

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -40px;
    top: 0;
    bottom: 0;
    right: 0;
    box-sizing: border-box;
    border-bottom: 1px solid #252b3869;
    background: `,`;
  }
`])),s=>s.isEven?"transparent":"#6b8fb505"),soe=ae.ul(ioe||(ioe=te([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),ooe=({leaf:s,children:a,node:l,isCollapsed:h})=>{let f=Array.isArray(a)&&a.length>0;return s.shouldRender?aD.default.createElement(toe,null,aD.default.createElement(roe,{style:{height:s.nodeHeight+"px"},isEven:s.n%2===0},l),f&&aD.default.createElement(soe,null,a)):null},Kb=ooe}),BIe=W((s,a)=>{(function(){var l=this,h={};typeof s<"u"?a.exports=h:l.fuzzy=h,h.simpleFilter=function(f,g){return g.filter(function(b){return h.test(f,b)})},h.test=function(f,g){return h.match(f,g)!==null},h.match=function(f,g,b){b=b||{};var _=0,S=[],C=g.length,I=0,O=0,D=b.pre||"",A=b.post||"",N=b.caseSensitive&&g||g.toLowerCase(),L;f=b.caseSensitive&&f||f.toLowerCase();for(var V=0;V<C;V++)L=g[V],N[V]===f[_]?(L=D+L+A,_+=1,O+=1+O):O=0,I+=O,S[S.length]=L;return _===f.length?(I=N===f?1/0:I,{rendered:S.join(""),score:I}):null},h.filter=function(f,g,b){return!g||g.length===0?[]:typeof f!="string"?g:(b=b||{},g.reduce(function(_,S,C,I){var O=S;b.extract&&(O=b.extract(S));var D=h.match(f,O,b);return D!=null&&(_[_.length]={string:D.rendered,score:D.score,index:C,original:S}),_},[]).sort(function(_,S){var C=S.score-_.score;return C||_.index-S.index}))}})()});function UIe(s,a){let[l,h]=(0,uD.useState)(!1),f=(0,uD.useRef)(a);return l||(f.current=a),(0,uD.useMemo)(()=>s(h),f.current)}var uD,zIe=P(()=>{uD=X(Ne())}),FV,_f,cD=P(()=>{FV="rgba(26, 28, 30, 0.97);",_f="#272B2F"});function aoe(s,a,l,h){let f=UIe(g=>({debugName:"CurveSegmentEditor/useKeyframeDrag",lockCSSCursorTo:"move",onDragStart(){return g(!0),{onDrag(b,_){s&&l.onCurveChange(h(b,_))},onDragEnd(b){g(!1),l.onCancelCurveChange()}}}}),[s,l.onCurveChange,l.onCancelCurveChange]);Ui(a,f)}var Tr,dD,JE,Xb,loe,eC,uoe,hD,coe,doe,hoe,qb,poe,pv,foe,moe,BV,goe,pD,voe,UV,yoe,boe,VIe=P(()=>{Tr=X(Ne()),Es(),Rr(),Ny(),Ve(),Dr(),zIe(),cD(),dD=.12,JE=1+dD*2,Xb=.01,loe=8,eC=(1-Xb)/(loe-1),uoe="#3EAAA4",hD="#3EAAA4",coe="#3EAAA4",doe="#3EAAA4",hoe="#3EAAA4",qb="#3EAAA4",poe="#3EAAA4",pv="#B3B3B3",foe="#3eaaa4",moe="#67dfd8",BV=["goldenrod","cornflowerblue","dodgerblue","lawngreen"],pD=ae.circle(goe||(goe=te([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.04px;
  pointer-events: none;
  transition: r 0.15s;
  fill: `,`;
`])),foe),UV=ae.circle(voe||(voe=te([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.09px;
  cursor: move;
  `,`;
  &:hover {
    opacity: 0.4;
  }
  &:hover + `,` {
    fill: `,`;
  }
`])),kr,pD,moe),yoe=s=>{let{curveConnection:{left:a,right:l},backgroundConnections:h}=s,f=Math.min(0,1-l.handles[1],1-a.handles[3]),g=Math.max(1,1-l.handles[1],1-a.handles[3]),b=Math.max(1,g-f),_=G=>(G-f)/b,[S,C]=xr(null),I=JE/((C==null?void 0:C.clientWidth)||1),O=JE/((C==null?void 0:C.clientHeight)||1),[D,A]=xr(null);aoe(C,A,s,(G,$)=>{let Y=_i(a.handles[2]+G*I,0,1),re=a.handles[3]-$*O;return[Y,re,l.handles[0],l.handles[1]]});let[N,L]=xr(null);aoe(C,L,s,(G,$)=>{let Y=_i(l.handles[0]+G*I,0,1),re=l.handles[1]-$*O;return[a.handles[2],a.handles[3],Y,re]});let V=G=>"M0 ".concat(_(1)," C").concat(G.left.handles[2]," ").concat(_(1-G.left.handles[3])," ").concat(G.right.handles[0]," ").concat(_(1-G.right.handles[1])," 1 ").concat(_(0));return Tr.default.createElement("svg",{height:"100%",width:"100%",ref:S,viewBox:"".concat(-dD," ").concat(-dD," ").concat(JE," ").concat(JE),xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none"},Tr.default.createElement("linearGradient",{id:"myGradient",gradientTransform:"rotate(90)"},Tr.default.createElement("stop",{offset:_(-1),stopColor:poe}),Tr.default.createElement("stop",{offset:_(0),stopColor:qb}),Tr.default.createElement("stop",{offset:_(.3),stopColor:hoe}),Tr.default.createElement("stop",{offset:_(.5),stopColor:doe}),Tr.default.createElement("stop",{offset:_(.7),stopColor:coe}),Tr.default.createElement("stop",{offset:_(1),stopColor:hD}),Tr.default.createElement("stop",{offset:_(2),stopColor:uoe})),Tr.default.createElement("pattern",{id:"dot-background-pattern-1",width:eC,height:eC/b,y:-f/b},Tr.default.createElement("rect",{width:Xb,height:Xb,fill:pv,opacity:.3})),Tr.default.createElement("rect",{x:0,y:0,width:"1",height:1,fill:"url(#dot-background-pattern-1)"}),Tr.default.createElement("pattern",{id:"dot-background-pattern-2",width:eC,height:eC},Tr.default.createElement("rect",{width:Xb,height:Xb,fill:pv})),Tr.default.createElement("rect",{x:0,y:_(0),width:"1",height:_(1)-_(0),fill:"url(#dot-background-pattern-2)"}),!a.type||a.type==="bezier"?Tr.default.createElement(Tr.default.Fragment,null,Tr.default.createElement("line",{x1:0,y1:_(1),x2:a.handles[2],y2:_(1-a.handles[3]),stroke:pv,strokeWidth:"0.01"}),Tr.default.createElement("line",{x1:1,y1:_(0),x2:l.handles[0],y2:_(1-l.handles[1]),stroke:pv,strokeWidth:"0.01"}),Tr.default.createElement("path",{d:V(s.curveConnection),stroke:"none",fill:"url('#myGradient')",opacity:"0.1"}),h.map((G,$)=>Tr.default.createElement("path",{key:G.objectKey+"/"+G.left.id,d:V(G),stroke:BV[$%BV.length],opacity:.6,strokeWidth:"0.01"})),Tr.default.createElement("path",{d:V(s.curveConnection),stroke:"url('#myGradient')",strokeWidth:"0.02"}),Tr.default.createElement("circle",{cx:0,cy:_(1),r:"0.025",stroke:hD,strokeWidth:"0.02",fill:_f}),Tr.default.createElement("circle",{cx:1,cy:_(0),r:"0.025",stroke:qb,strokeWidth:"0.02",fill:_f}),Tr.default.createElement(UV,{ref:D,cx:a.handles[2],cy:_(1-a.handles[3]),fill:hD,opacity:.2}),Tr.default.createElement(pD,{cx:a.handles[2],cy:_(1-a.handles[3])}),Tr.default.createElement(UV,{ref:N,cx:l.handles[0],cy:_(1-l.handles[1]),fill:qb,opacity:.2}),Tr.default.createElement(pD,{cx:l.handles[0],cy:_(1-l.handles[1])})):Tr.default.createElement(Tr.default.Fragment,null,Tr.default.createElement("line",{x1:0,y1:_(1),x2:1,y2:_(1),stroke:pv,strokeWidth:"0.01"}),Tr.default.createElement("line",{x1:1,y1:_(1),x2:1,y2:0,stroke:pv,strokeWidth:"0.01"}),Tr.default.createElement("circle",{cx:0,cy:1,r:"0.025",stroke:qb,strokeWidth:"0.02",fill:_f}),Tr.default.createElement("circle",{cx:1,cy:0,r:"0.025",stroke:qb,strokeWidth:"0.02",fill:_f})))},boe=yoe});function fD(s){return s.map(a=>a.toFixed(3)).join(", ")}function mD(s){if(!s||(s==null?void 0:s.length)>_oe)return null;let a=s.split(",");if(a.length!==4)return null;let l=a.map(h=>Number(h.trim()));return!l.every(h=>isFinite(h))||l[0]<0||l[0]>1||l[2]<0||l[2]>1?null:l}function jIe(s,a,l={threshold:.02}){if(!s||!a)return!1;let h=0;for(let f=0;f<4;f++)h+=Math.abs(s[f]-a[f]);return h<l.threshold}var _oe,gD,woe=P(()=>{_oe=128,gD=[{label:"Quad Out",value:"0.250, 0.460, 0.450, 0.940"},{label:"Quad In Out",value:"0.455, 0.030, 0.515, 0.955"},{label:"Quad In",value:"0.550, 0.085, 0.680, 0.530"},{label:"Cubic Out",value:"0.215, 0.610, 0.355, 1.000"},{label:"Cubic In Out",value:"0.645, 0.045, 0.355, 1.000"},{label:"Cubic In",value:"0.550, 0.055, 0.675, 0.190"},{label:"Quart Out",value:"0.165, 0.840, 0.440, 1.000"},{label:"Quart In Out",value:"0.770, 0.000, 0.175, 1.000"},{label:"Quart In",value:"0.895, 0.030, 0.685, 0.220"},{label:"Quint Out",value:"0.230, 1.000, 0.320, 1.000"},{label:"Quint In Out",value:"0.860, 0.000, 0.070, 1.000"},{label:"Quint In",value:"0.755, 0.050, 0.855, 0.060"},{label:"Sine Out",value:"0.390, 0.575, 0.565, 1.000"},{label:"Sine In Out",value:"0.445, 0.050, 0.550, 0.950"},{label:"Sine In",value:"0.470, 0.000, 0.745, 0.715"},{label:"Expo Out",value:"0.190, 1.000, 0.220, 1.000"},{label:"Expo In Out",value:"1.000, 0.000, 0.000, 1.000"},{label:"Expo In",value:"0.780, 0.000, 0.810, 0.00"},{label:"Circ Out",value:"0.075, 0.820, 0.165, 1.000"},{label:"Circ In Out",value:"0.785, 0.135, 0.150, 0.860"},{label:"Circ In",value:"0.600, 0.040, 0.980, 0.335"},{label:"Back Out",value:"0.175, 0.885, 0.320, 1.275"},{label:"Back In Out",value:"0.680, -0.550, 0.265, 1.550"},{label:"Back In",value:"0.600, -0.280, 0.735, 0.045"},{label:"linear",value:"0.5, 0.5, 0.5, 0.5"},{label:"In Out",value:"0.42,0,0.58,1"},{label:"Hold",value:"0, 0, Infinity, Infinity"}]}),Bo,vD,fv,zV,xoe,Soe,tC,VV,jV,Eoe,Coe,HIe=P(()=>{Bo=X(Ne()),vD=.75,fv=.1,zV=1+vD*2,xoe="#F5F5F5",Soe="#888888",tC="#4f4f4f",VV="rgba(255, 255, 255, 0.1)",jV=s=>1-s,Eoe=s=>{let{easing:a,isSelected:l}=s,h=l?xoe:Soe,f="".concat(-vD," ").concat(-vD," ").concat(zV," ").concat(zV);if(a){let g=[a[0],jV(a[1])],b=[a[2],jV(a[3])];return Bo.default.createElement("svg",{height:"100%",width:"100%",viewBox:f,fill:"none",xmlns:"http://www.w3.org/2000/svg"},Bo.default.createElement("line",{x1:"0",y1:"1",x2:g[0],y2:g[1],stroke:tC,strokeWidth:"0.1"}),Bo.default.createElement("line",{x1:"1",y1:"0",x2:b[0],y2:b[1],stroke:tC,strokeWidth:"0.1"}),Bo.default.createElement("circle",{cx:g[0],cy:g[1],r:.1,fill:VV}),Bo.default.createElement("circle",{cx:b[0],cy:b[1],r:.1,fill:VV}),Bo.default.createElement("circle",{cx:g[0],cy:g[1],r:fv,fill:tC}),Bo.default.createElement("circle",{cx:b[0],cy:b[1],r:fv,fill:tC}),Bo.default.createElement("path",{d:"M0 1 C".concat(g[0]," ").concat(g[1]," ").concat(b[0],` 
        `).concat(b[1]," 1 0"),stroke:h,strokeWidth:"0.08"}),Bo.default.createElement("circle",{cx:0,cy:1,r:fv,fill:h}),Bo.default.createElement("circle",{cx:1,cy:0,r:fv,fill:h}))}return Bo.default.createElement("svg",{height:"100%",width:"100%",viewBox:f,fill:"none",xmlns:"http://www.w3.org/2000/svg"},Bo.default.createElement("line",{x1:"0",y1:"1",x2:1,y2:1,stroke:h,strokeWidth:"0.08"}),Bo.default.createElement("line",{x1:"1",y1:"0",x2:1,y2:1,stroke:h,strokeWidth:"0.08"}),Bo.default.createElement("circle",{cx:0,cy:1,r:fv,fill:h}),Bo.default.createElement("circle",{cx:1,cy:0,r:fv,fill:h}))},Coe=Eoe}),nC,Poe,Toe,Moe,koe,Aoe,Ioe,Roe,GIe=P(()=>{NE(),nC=X(Ne()),Ve(),woe(),HIe(),YI(),cD(),qc(),Moe=ae.div(Toe||(Toe=te([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  aspect-ratio: 1;

  transition: background-color 0.15s;
  background-color: `,`;
  border-radius: 2px;
  cursor: pointer;
  outline: none;

  `,`

  &:hover {
    background-color: #31353a;
  }

  &:focus {
    background-color: #383d42;
  }
`])),_f,({isSelected:s})=>s&&lo(Poe||(Poe=te([`
      background-color: #383d42;
    `])))),Aoe=ae(Xc)(koe||(koe=te([`
  padding: 0.5em;
  color: white;
  max-width: 240px;
  pointer-events: none !important;
  --popover-bg: black;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: transparent;
  box-shadow: none;
`]))),Ioe=nC.default.forwardRef((s,a)=>{let[l,h]=Ub({enabled:!0,verticalPlacement:s.tooltipPlacement,verticalGap:0},()=>nC.default.createElement(Aoe,{showPopoverEdgeTriangle:!1},s.easing.label));return nC.default.createElement(Moe,F({ref:qI([h,a])},s),l,nC.default.createElement(Coe,{easing:mD(s.easing.value),isSelected:s.isSelected}))}),Roe=Ioe});function WIe(s){var a;let[l,h]=(0,Doe.useState)(null),f=b=>{if(l===null){s.items.length>0&&h(0);return}let _=l+b*s.uiColumns,S=_<0,C=_>s.items.length-1;if(S||C){if(s.canVerticleExit&&s.canVerticleExit(S?"top":"bottom")){h(null);return}return}h(_)},g=b=>{l===null?h(qIe(b,s.items.length)):l+b<0?h(null):h(Math.min(l+b,s.items.length-1))};return{focusFirstItem(){h(0)},onParentEltKeyDown:b=>{if(b.key==="ArrowRight")g(1);else if(b.key==="ArrowLeft")g(-1);else if(b.key==="ArrowUp")f(-1);else if(b.key==="ArrowDown")f(1);else return 0;return 1},gridItems:s.items.map((b,_)=>s.renderItem({isSelected:_===l,item:b,select(S){h(_),s.onSelectItem(b)===1&&(S==null||S.preventDefault(),S==null||S.stopPropagation())}})),currentSelection:(a=s.items[l??-1])!=null?a:null}}var Doe,$Ie=P(()=>{Doe=X(Ne()),bD()});function Ooe(s,a,l){var h;(h=s.current)==null||h.discard(),s.current=null;let f=mD(l);f===null?s.current=XIe(a):s.current=KIe(a,f)}function Loe(s){var a;(a=s.current)==null||a.discard(),s.current=null}function KIe(s,a){return de().tempTransaction(({stateEditors:l})=>{let{setHandlesForKeyframe:h,setKeyframeType:f}=l.coreByProject.historic.sheetsById.sequence;for(let{projectId:g,sheetId:b,objectKey:_,trackId:S,left:C,right:I}of s)h({projectId:g,sheetId:b,objectKey:_,trackId:S,keyframeId:C.id,start:[a[0],a[1]]}),h({projectId:g,sheetId:b,objectKey:_,trackId:S,keyframeId:I.id,end:[a[2],a[3]]}),f({projectId:g,sheetId:b,objectKey:_,trackId:S,keyframeId:C.id,keyframeType:"bezier"})})}function XIe(s){return de().tempTransaction(({stateEditors:a})=>{let{setKeyframeType:l}=a.coreByProject.historic.sheetsById.sequence;for(let{projectId:h,sheetId:f,objectKey:g,trackId:b,left:_}of s)l({projectId:h,sheetId:f,objectKey:g,trackId:b,keyframeId:_.id,keyframeType:"hold"})})}function qIe(s,a){return(s%a+a)%a}function YIe(s,a){return()=>setTimeout(s,a)}function ZIe({left:s,right:a}){return({left:l,right:h})=>s.handles[2]!==l.handles[2]||s.handles[3]!==l.handles[3]||a.handles[0]!==h.handles[0]||a.handles[1]!==h.handles[1]}var yD,xi,Noe,HV,GV,Foe,Boe,Uoe,zoe,Voe,joe,Hoe,Goe,Woe,$oe,Koe,Xoe,WV,QIe,$V,qoe,bD=P(()=>{yD=Ut,xi=X(Ne()),Ve(),Noe=X(BIe()),Me(),VIe(),GIe(),woe(),cD(),Rr(),$Ie(),HV=3,GV=53,Foe=25,Uoe=ae.div(Boe||(Boe=te([`
  background: `,`;
  display: grid;
  grid-template-areas:
    'search  tween'
    'presets tween';
  grid-template-rows: 32px 1fr;
  grid-template-columns: `,`px 120px;
  gap: 1px;
  height: 120px;
`])),FV,HV*GV),Voe=ae.div(zoe||(zoe=te([`
  overflow: auto;
  grid-area: presets;

  display: grid;
  grid-template-columns: repeat(`,`, 1fr);
  grid-auto-rows: min-content;
  gap: 1px;

  overflow-y: scroll;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
  &::-webkit-scrollbar {
    /* WebKit */
    width: 0;
    height: 0;
  }
`])),HV),Hoe=ae.input.attrs({type:"text"})(joe||(joe=te([`
  background-color: `,`;
  border: none;
  border-radius: 2px;
  color: rgba(255, 255, 255, 0.8);
  padding: 6px;
  font-size: 12px;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: 100%;
  box-sizing: border-box;

  grid-area: search;

  &:hover {
    background-color: #212121;
  }

  &:focus {
    background-color: rgba(16, 16, 16, 0.26);
    outline: 1px solid rgba(0, 0, 0, 0.35);
  }
`])),_f),Woe=ae.div(Goe||(Goe=te([`
  grid-area: tween;
  background: `,`;
`])),_f),Koe=ae.div($oe||($oe=te([`
  grid-column: 1 / 4;
  padding: 6px;
  color: #888888;
`]))),Xoe=s=>{let a=(0,xi.useMemo)(()=>[s.curveConnection,...s.additionalConnections],[s.curveConnection,...s.additionalConnections]),l=(0,xi.useRef)(null);(0,xi.useEffect)(()=>{let ue=qoe(a);return()=>{var Oe;ue(),(Oe=l.current)==null||Oe.commit()}},[l]);let h=[s.curveConnection.left.handles[2],s.curveConnection.left.handles[3],s.curveConnection.right.handles[0],s.curveConnection.right.handles[1]],f=(0,xi.useRef)(null);(0,xi.useLayoutEffect)(()=>{var ue,Oe;(ue=f.current)==null||ue.select(),(Oe=f.current)==null||Oe.focus()},[f.current]);let[g,b]=(0,xi.useState)(fD(h)),_=ue=>{ue!==void 0&&(I(1),b(ue.target.value),mD(ue.target.value)&&D(ue.target.value))},S=ue=>{var Oe,Q;I(1),(ue.key==="ArrowDown"||ue.key==="ArrowUp")&&ue.preventDefault(),ue.key==="ArrowDown"?(lt.focusFirstItem(),(Q=(Oe=le.current[G[0].label])==null?void 0:Oe.current)==null||Q.focus()):ue.key==="Escape"?(Loe(l),s.onRequestClose("key Escape")):ue.key==="Enter"&&s.onRequestClose("key Enter")},[C,I]=(0,xi.useState)(0);(0,xi.useEffect)(()=>{C===2?b(fD(h)):C===3&&g!==""&&b("")},a);let[O,D]=(0,xi.useState)(fD(h)),[A,N]=(0,xi.useState)(null);(0,xi.useEffect)(()=>{var ue;C!==0&&C!==3&&Ooe(l,a,(ue=A??O)!=null?ue:"")},[A,O,C]),a.some(ZIe(s.curveConnection))&&C===0&&I(3);let L=ue=>{var Oe,Q;I(2);let We=fD(ue);b(We),D(We),(Oe=f.current)==null||Oe.select(),(Q=f.current)==null||Q.focus()},V=()=>{},G=(0,xi.useMemo)(()=>/^[A-Za-z]/.test(g)?Noe.default.filter(g,gD,{extract:ue=>ue.label}).map(ue=>ue.original):gD,[g]);(0,xi.useEffect)(()=>{C===1&&G[0]&&D(G[0].value)},[G]);let $=ue=>{ue.key==="Escape"?(Loe(l),s.onRequestClose("key Escape"),ue.stopPropagation()):ue.key==="Enter"&&(s.onRequestClose("key Enter"),ue.stopPropagation())},Y=ue=>{C===0&&I(2),N(ue.value)},re=()=>N(null),ne=ue=>(Ooe(l,a,ue.value),s.onRequestClose("selected easing option"),1),le=(0,xi.useRef)(gD.reduce((ue,Oe)=>(ue[Oe.label]={current:null},ue),{})),[Ce,ve]=xr(null),[we,Le]=(0,xi.useState)(0);(0,xi.useEffect)(()=>{let ue=()=>{var Oe;Le((Oe=ve==null?void 0:ve.scrollTop)!=null?Oe:0)};return ve==null||ve.addEventListener("scroll",ue),()=>ve==null?void 0:ve.removeEventListener("scroll",ue)},[ve]);let lt=WIe({items:G,uiColumns:3,onSelectItem:ne,canVerticleExit(ue){var Oe,Q;return ue==="top"?((Oe=f.current)==null||Oe.select(),(Q=f.current)==null||Q.focus(),1):0},renderItem:({item:ue,select:Oe})=>{var Q,We;return xi.default.createElement(Roe,{key:ue.label,easing:ue,tabIndex:0,onKeyDown:$,ref:le.current[ue.label],onMouseOver:()=>Y(ue),onMouseOut:re,onClick:Oe,tooltipPlacement:((We=(Q=le.current[ue.label].current)==null?void 0:Q.offsetTop)!=null?We:0)-(we??0)<GV+Foe?"bottom":"top",isSelected:jIe(h,mD(ue.value))})}});return(0,xi.useLayoutEffect)(()=>{var ue,Oe;if(lt.currentSelection!==null&&document.activeElement!==f.current){let Q=(Oe=(ue=le.current)==null?void 0:ue[lt.currentSelection.label])==null?void 0:Oe.current;Q==null||Q.focus(),D(lt.currentSelection.value),/^[A-Za-z]/.test(g)||b(lt.currentSelection.value)}},[lt.currentSelection]),xi.default.createElement(Uoe,null,xi.default.createElement(Hoe,{value:g,placeholder:C===3?"Multiple easings selected":"Search presets...",onPaste:YIe(_),onChange:_,ref:f,onKeyDown:S}),xi.default.createElement(Voe,{ref:Ce,onKeyDown:ue=>lt.onParentEltKeyDown(ue)},lt.gridItems,lt.gridItems.length===0?xi.default.createElement(Koe,null,"No results found"):void 0),xi.default.createElement(Woe,{onClick:()=>{var ue;return(ue=f.current)==null?void 0:ue.focus()}},xi.default.createElement(boe,{curveConnection:s.curveConnection,backgroundConnections:s.additionalConnections,onCurveChange:L,onCancelCurveChange:V})))},WV=Xoe,{isCurveEditorOpenD:QIe,isConnectionEditingInCurvePopover:$V,getLock:qoe}=(()=>{let s=new yD.Atom([]);return{getLock(a){return s.set(a),function(){s.set([])}},isCurveEditorOpenD:(0,yD.prism)(()=>s.prism.getValue().length>0),isConnectionEditingInCurvePopover(a){return yD.prism.ensurePrism(),s.prism.getValue().some(({left:l,right:h})=>a.left.id===l.id&&a.right.id===h.id)}}})()});function JIe(s,a){for(let{keyframeId:l}of nRe(a))if(s.left.id===l)return!0;return!1}function Yoe(s,a,l){return(0,wD.prism)(()=>{if(l===void 0)return[];let h=[];for(let{objectKey:f,trackId:g}of Zoe(l)){let b=(0,wD.val)(de().atomP.historic.coreByProject[s].sheetsById[a].sequence.tracksByObject[f].trackData[g]);b&&(h=h.concat(tRe(b.keyframes).filter(_=>JIe(_,l)).map(({left:_,right:S})=>({left:_,right:S,trackId:g,objectKey:f,sheetId:a,projectId:s}))))}return h})}function _D(s,a,l){var h;if(l===void 0)return[];let f=[];for(let{objectKey:b,trackId:_,keyframeIds:S}of Zoe(l))f=f.concat((h=KV({projectId:s,sheetId:a,objectKey:b,trackId:_,keyframeIds:S}))!=null?h:[]);let g=JR(f.map(b=>b.pathToProp));return f.map(({keyframe:b,pathToProp:_})=>({keyframe:b,pathToProp:_.slice(g.length)}))}function KV({projectId:s,sheetId:a,objectKey:l,trackId:h,keyframeIds:f}){let g=(0,wD.val)(de().atomP.historic.coreByProject[s].sheetsById[a].sequence.tracksByObject[l]),b=g==null?void 0:g.trackData[h];if(!b)return null;let _=eRe((g==null?void 0:g.trackIdByPropPath)||{})[h];if(!_)return null;let S=[l,...eD(_)];return f.map(C=>({keyframe:b.keyframes.find(I=>I.id===C),pathToProp:S})).filter(({keyframe:C})=>C!==void 0)}function eRe(s){let a={};for(let[l,h]of Object.entries(s))a[h]=l;return a}function tRe(s){return s.map((a,l)=>({left:a,right:s[l+1]})).slice(0,-1)}function nRe(s){var a,l,h;let f=[];for(let[g,b]of Object.entries((a=s==null?void 0:s.byObjectKey)!=null?a:{}))for(let[_,S]of Object.entries((l=b==null?void 0:b.byTrackId)!=null?l:{}))for(let C of Object.keys((h=S==null?void 0:S.byKeyframeId)!=null?h:{}))f.push({objectKey:g,trackId:_,keyframeId:C});return f}function Zoe(s){var a,l,h;let f=[];for(let[g,b]of Object.entries((a=s==null?void 0:s.byObjectKey)!=null?a:{}))for(let[_,S]of Object.entries((l=b==null?void 0:b.byTrackId)!=null?l:{}))f.push({objectKey:g,trackId:_,keyframeIds:Object.keys((h=S==null?void 0:S.byKeyframeId)!=null?h:{})});return f}var wD,Yb=P(()=>{wD=Ut,Me(),ed()});function rRe(s,a){return(0,Qoe.useMemo)(()=>iRe(s,a),[])}function iRe(s,a){let l=null,h=b=>de().tempTransaction(_=>s(_,b));function f(){l==null||l.discard(),l=null}let g={createAsset:a.sheet.project.assetStorage.createAsset,getAssetUrl:b=>b.id?a.sheet.project.assetStorage.getAssetUrl(b.id):void 0};return F({temporarilySetValue(b){f(),l=h(b)},discardTemporaryValue:f,permanentlySetValue(b){f(),h(b).commit()}},g)}var Qoe,sRe=P(()=>{Me(),Qoe=X(Ne())});function XV(s){var a;if(s.type==="sheetObject")return mo.default.createElement(mo.default.Fragment,null,mo.default.createElement(xD,{style:{paddingLeft:"".concat(s.indent*SD,"px")}},s.sheetObject.address.objectKey),s.children.map((l,h)=>mo.default.createElement(XV,B(F({key:h},l),{autoFocusInput:s.autoFocusInput&&h===0,indent:s.indent+1}))));if(s.type==="propWithChildren"){let l=(a=s.propConfig.label)!=null?a:eh(s.pathToProp);return mo.default.createElement(mo.default.Fragment,null,mo.default.createElement(xD,{style:{paddingLeft:"".concat(s.indent*SD,"px")}},l),s.children.map((h,f)=>mo.default.createElement(XV,B(F({key:f},h),{autoFocusInput:s.autoFocusInput&&f===0,indent:s.indent+1}))))}else return mo.default.createElement(oRe,B(F({},s),{autoFocusInput:s.autoFocusInput,indent:s.indent}))}function oRe(s){var a;let l=(a=s.propConfig.label)!=null?a:eh(s.pathToProp),h=aRe(s);if(s.propConfig.type==="enum")return mo.default.createElement(mo.default.Fragment,null);{let f=Sz[s.propConfig.type];return mo.default.createElement(eae,null,mo.default.createElement(xD,null,mo.default.createElement("span",{style:{paddingLeft:"".concat(s.indent*SD,"px")}},l)),mo.default.createElement(rae,null,mo.default.createElement(f,{editingTools:h,propConfig:s.propConfig,value:yR(s.keyframe.value,s.propConfig),autoFocus:s.autoFocusInput})))}}function aRe(s){let a=s.sheetObject;return rRe(({stateEditors:l},h)=>{let f=B(F({},s.keyframe),{value:h});l.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},a.address),{trackId:s.trackId,keyframes:[f],snappingFunction:a.sheet.getSequence().closestGridPosition}))},a)}var mo,Joe,eae,tae,xD,SD,nae,rae,lRe=P(()=>{mo=X(Ne()),Ve(),HJ(),$y(),sRe(),df(),eae=ae.div(Joe||(Joe=te([`
  display: flex;
  align-items: stretch;
  min-width: 200px;

  select {
    min-width: 100px;
  }
`]))),xD=ae.div(tae||(tae=te([`
  font-style: normal;
  font-weight: 400;
  font-size: 11px;
  line-height: 13px;
  letter-spacing: 0.01em;
  padding: 6px 6px 6px 0;

  width: 40%;

  color: #919191;

  overflow: hidden;
`]))),SD=10,rae=ae.div(nae||(nae=te([`
  display: flex;
  align-items: center;
  width: 60%;
`])))});function ED(s){return $c({debugName:"useKeyframeInlineEditorPopover"},()=>CD.default.createElement(Xc,{showPopoverEdgeTriangle:!0},CD.default.createElement("div",{style:{margin:"1px 2px 1px 10px"}},Array.isArray(s)?s.map((a,l)=>CD.default.createElement(XV,B(F({key:l},a),{autoFocusInput:l===0,indent:0}))):void 0)))}var CD,PD=P(()=>{CD=X(Ne()),Kc(),qc(),lRe()});function uRe(s,a,l){return aa(s,{displayName:"Keyframe",menuItems:()=>{let h=_D(l.leaf.sheetObject.address.projectId,l.leaf.sheetObject.address.sheetId,l.selection);return[{label:h.length>0?"Copy (selection)":"Copy",callback:()=>{h.length>0?de().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes(h)}):de().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:l.keyframe,pathToProp:l.leaf.pathToProp}])})}},{label:l.selection!==void 0?"Delete (selection)":"Delete",callback:()=>{l.selection?l.selection.delete():de().transaction(({stateEditors:f})=>{f.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},l.leaf.sheetObject.address),{keyframeIds:[l.keyframe.id],trackId:l.leaf.trackId}))})}}]},onOpen(){a._debug("Show keyframe",l)}})}function cRe(s,a,l){let h=(0,wf.useRef)(a);h.current=a;let{onClickFromDrag:f}=l,g=(0,wf.useMemo)(()=>({debugName:"KeyframeDot/useDragKeyframe",onDragStart(_){let S=h.current,C=(0,TD.val)(de().atomP.historic.coreByProject[S.leaf.sheetObject.address.projectId].sheetsById[S.leaf.sheetObject.address.sheetId].sequence.tracksByObject),I=jse(C,function(N,{trackId:L,objectKey:V}){var G,$;return N.id!==S.keyframe.id&&!(S.selection&&($=(G=S.selection.byObjectKey[V])==null?void 0:G.byTrackId[L])!=null&&$.byKeyframeId[N.id])});if(Vse(I),S.selection){let{selection:N,leaf:L}=S,{sheetObject:V}=L,G=N.getDragHandlers(B(F({},V.address),{domNode:s,positionAtStartOfDrag:S.track.data.keyframes[S.index].position})).onDragStart(_);return G&&B(F({},G),{onClick:f,onDragEnd:(...$)=>{var Y;(Y=G.onDragEnd)==null||Y.call(G,...$),cv()}})}let O=S,D=(0,TD.val)(O.layoutP.scaledSpace.toUnitSpace),A;return{onDrag(N,L,V){var G;let $=O.track.data.keyframes[O.index],Y=Math.max((G=ua.checkIfMouseEventSnapToPos(V,{ignore:s}))!=null?G:$.position+D(N),0);A==null||A.discard(),A=void 0,A=de().tempTransaction(({stateEditors:re})=>{re.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},O.leaf.sheetObject.address),{trackId:O.leaf.trackId,keyframes:[B(F({},$),{position:Y})],snappingFunction:(0,TD.val)(O.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(N){N?A==null||A.commit():A==null||A.discard(),cv()},onClick(N){f(N)}}}}),[f]),[b]=Ui(s,g);return xh(b,a.keyframe.position),Gl(b,"draggingPositionInSequenceEditor","ew-resize"),[b]}var wf,TD,rC,qV,iC,YV,iae,MD,sae,oae,aae,lae,uae,cae,dae=P(()=>{wf=X(Ne()),Ve(),Me(),la(),Es(),Rr(),TD=Ut,fo(),sl(),qu(),iD(),uf(),Yb(),Dr(),dv(),PD(),iv(),rC=6,qV=rC+2,iC={normalColor:"#40AAA4",selectedColor:"#F2C95C",inlineEditorOpenColor:"#FCF3DC",selectedAndInlineEditorOpenColor:"#CBEBEA"},YV=({isSelected:s,isInlineEditorPopoverOpen:a})=>s&&a?iC.inlineEditorOpenColor:s?iC.selectedColor:a?iC.selectedAndInlineEditorOpenColor:iC.normalColor,MD=ae.div(iae||(iae=te([`
  position: absolute;
  `,`

  background: `,`;
  transform: rotateZ(45deg);

  `,`;

  z-index: 1;
  pointer-events: none;
`])),Kl(rC),s=>YV(s),s=>s.flag===2?"outline: 2px solid white;":""),oae=ae.div(sae||(sae=te([`
  position: absolute;
  `,`

  background: `,`;

  `,`;

  z-index: 1;
  pointer-events: none;
`])),Kl(rC*1.5),s=>YV(s),s=>s.flag===2?"outline: 2px solid white;":""),lae=ae.div(aae||(aae=te([`
  z-index: 1;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  & + `,` {
    `,`
  }

  &:hover + `,` {
    `,`
  }
`])),Kl(12),kr,MD,s=>s.isInlineEditorPopoverOpen?Kl(qV):"",MD,Kl(qV)),uae=s=>{let a=lf("SingleKeyframeDot",s.keyframe.id),l=rv(s.itemKey),[h,f]=xr(null),[g]=uRe(f,a,s),{node:b,toggle:_,isOpen:S}=ED([{type:"primitiveProp",keyframe:s.keyframe,pathToProp:s.leaf.pathToProp,propConfig:s.leaf.propConf,sheetObject:s.leaf.sheetObject,trackId:s.leaf.trackId}]);cRe(f,s,{onClickFromDrag(I){_(I,h.current)}});let C=!s.keyframe.type||s.keyframe.type==="bezier";return wf.default.createElement(wf.default.Fragment,null,wf.default.createElement(lae,F({ref:h,isInlineEditorPopoverOpen:S},l.attrs)),C?wf.default.createElement(MD,{isSelected:!!s.selection,isInlineEditorPopoverOpen:S,flag:l.flag}):wf.default.createElement(oae,{isSelected:!!s.selection,isInlineEditorPopoverOpen:S,flag:l.flag}),b,g)},cae=uae}),ZV,QV,JV,mv,hae,pae,ej,fae=P(()=>{il(),ZV=X(Ne()),Ve(),dae(),QV=rC/2+1,JV=1e3,mv={normalColor:"#365b59",selectedColor:"#8A7842",barColor:s=>{let a=s.isSelected?mv.selectedColor:mv.normalColor;return s.isPopoverOpen?LI(.2,mb(.2,a)):a},hoverColor:s=>{let a=s.isSelected?mv.selectedColor:mv.normalColor;return s.isPopoverOpen?LI(.2,mb(.2,a)):LI(.1,mb(.1,a))}},pae=ae.div(hae||(hae=te([`
  position: absolute;
  background: `,`;
  height: `,`px;
  width: `,`px;

  left: 0;
  top: -`,`px;
  transform-origin: top left;
  z-index: 0;
  cursor: ew-resize;

  &:after {
    display: block;
    position: absolute;
    content: ' ';
    top: -4px;
    bottom: -4px;
    left: 0;
    right: 0;
  }

  &:hover {
    background: `,`;
  }
`])),mv.barColor,QV,JV,QV/2,mv.hoverColor),ej=ZV.default.forwardRef((s,a)=>{let l={isPopoverOpen:s.isPopoverOpen,isSelected:s.isSelected};return ZV.default.createElement(pae,B(F({},l),{ref:a,style:{transform:"scaleX(calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(s.connectorLengthInUnitSpace/JV,"))")},onClick:h=>{var f;(f=s.openPopover)==null||f.call(s,h)}}),s.children)})});function dRe(s,a){let l=(0,tj.useRef)(a);l.current=a;let h=(0,tj.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(f){let g=l.current,b;if(g.selection){let{selection:I,leaf:O}=g,{sheetObject:D}=O;return I.getDragHandlers(B(F({},D.address),{domNode:s,positionAtStartOfDrag:g.track.data.keyframes[g.index].position})).onDragStart(f)}let _=g,S=(0,kD.val)(_.layoutP.sheet).getSequence(),C=(0,kD.val)(_.layoutP.scaledSpace.toUnitSpace);return{onDrag(I,O,D){let A=C(I);b&&(b.discard(),b=void 0),b=de().tempTransaction(({stateEditors:N})=>{N.coreByProject.historic.sheetsById.sequence.transformKeyframes(B(F({},_.leaf.sheetObject.address),{trackId:_.leaf.trackId,keyframeIds:[_.keyframe.id,_.track.data.keyframes[_.index+1].id],translate:A,scale:1,origin:0,snappingFunction:S.closestGridPosition}))})},onDragEnd(I){I?b&&b.commit():b&&b.discard()}}}}),[]);Ui(s,h)}function hRe(s,a,l,h){return aa(a,{displayName:"Tween",menuItems:()=>{let f=_D(s.leaf.sheetObject.address.projectId,s.leaf.sheetObject.address.sheetId,s.selection);return[{label:f.length>0?"Copy (selection)":"Copy",callback:()=>{f.length>0?de().transaction(g=>{g.stateEditors.studio.ahistoric.setClipboardKeyframes(f)}):de().transaction(g=>{g.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:l,pathToProp:s.leaf.pathToProp},{keyframe:h,pathToProp:s.leaf.pathToProp}])})}},{label:s.selection?"Delete (selection)":"Delete",callback:()=>{s.selection?s.selection.delete():de().transaction(({stateEditors:g})=>{g.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},s.leaf.sheetObject.address),{keyframeIds:[l.id,h.id],trackId:s.leaf.trackId}))})}}]}})}var kD,xf,tj,nj,mae,gae,vae,yae,bae,pRe=P(()=>{Me(),la(),Es(),Rr(),kD=Ut,xf=X(Ne()),tj=X(Ne()),Kc(),qc(),bD(),fae(),cD(),En(),Yb(),Yb(),Ve(),nj=5,gae=ae(Xc)(mae||(mae=te([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: `,`;
`])),FV),vae=s=>{let{index:a,track:l}=s,h=l.data.keyframes[a],f=l.data.keyframes[a+1],[g,b]=xr(null),{node:_,toggle:S,close:C}=$c(()=>{let A=(0,kD.val)(s.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:A.screenX+nj,maxX:A.screenX+A.width-nj}}},()=>xf.default.createElement(bae,B(F({},s),{closePopover:C}))),[I]=hRe(s,b,h,f);dRe(b,s);let O=f.position-h.position,D={isPopoverOpen:Qn(()=>$V(B(F({},s.leaf.sheetObject.address),{trackId:s.leaf.trackId,left:h,right:f})),[s.leaf.sheetObject.address,s.leaf.trackId,h,f]),isSelected:s.selection!==void 0};return xf.default.createElement(xf.default.Fragment,null,xf.default.createElement(ej,B(F({ref:g,connectorLengthInUnitSpace:O},D),{openPopover:A=>{b&&S(A,b)}}),_),I)},yae=vae,bae=xf.default.forwardRef((s,a)=>{let{index:l,track:{data:h},selection:f}=s,g=h.keyframes[l],b=h.keyframes[l+1],_=s.leaf.trackId,S=s.leaf.sheetObject.address,C=Qn(()=>Yoe(S.projectId,S.sheetId,f).getValue(),[S,f]),I=F({left:g,right:b,trackId:_},S);return xf.default.createElement(gae,{showPopoverEdgeTriangle:!1,ref:a},xf.default.createElement(WV,{curveConnection:I,additionalConnections:C,onRequestClose:s.closePopover}))})}),_ae,gv,wae,xae,Sae,Eae,Cae,fRe=P(()=>{_ae=Ut,gv=X(Ne()),Ve(),pRe(),dae(),xae=ae.div(wae||(wae=te([`
  position: absolute;
`]))),Sae=gv.default.createElement(gv.default.Fragment,null),Eae=gv.default.memo(s=>{let{index:a,track:{data:l}}=s,h=l.keyframes[a],f=l.keyframes[a+1],g=h.connectedRight&&!!f;return gv.default.createElement(xae,{style:{top:"".concat(s.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,_ae.val)(s.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(h.position,"px))")}},gv.default.createElement(cae,B(F({},s),{itemKey:s.itemKey})),g?gv.default.createElement(yae,F({},s)):Sae)}),Cae=Eae});function mRe(s,a){return aa(s,{displayName:"Keyframe Track",menuItems:()=>{var l;let h=(l=(0,Zb.val)(de().atomP.ahistoric.clipboard.keyframesWithRelativePaths))!=null?l:[];return[gRe(a,h)]}})}function gRe(s,a){return{label:"Paste Keyframes",enabled:a.length>0,callback:()=>{var l;let h=(0,Zb.val)(s.layoutP.sheet).getSequence(),f=(l=a[0])==null?void 0:l.pathToProp,g=a.filter(({keyframe:b,pathToProp:_})=>bIe(f,_)).map(({keyframe:b,pathToProp:_})=>b);de().transaction(({stateEditors:b})=>{var _;h.position=h.closestGridPosition(h.position);let S=(_=vRe(g))==null?void 0:_.position;for(let C of g)b.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(B(F({},s.leaf.sheetObject.address),{trackId:s.leaf.trackId,position:h.position+C.position-S,handles:C.handles,value:C.value,snappingFunction:h.closestGridPosition,type:C.type}))})}}}function vRe(s){let a=null;for(let l of s)(a===null||l.position<a.position)&&(a=l);return a}var Zb,Sh,Pae,Tae,rj,Mae,yRe=P(()=>{En(),Zb=Ut,Sh=X(Ne()),Ve(),fRe(),la(),Rr(),Me(),ed(),dv(),yh(),Tae=ae.div(Pae||(Pae=te([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),rj=Sh.default.memo(s=>{var a;let{layoutP:l,trackData:h,leaf:f}=s,[g,b]=xr(null),{selectedKeyframeIds:_,selection:S}=Qn(()=>{let Y=(0,Zb.val)(l.selectionAtom),re=(0,Zb.val)(Y.pointer.current.byObjectKey[f.sheetObject.address.objectKey].byTrackId[f.trackId].byKeyframeId);return re?{selectedKeyframeIds:re,selection:(0,Zb.val)(Y.pointer.current)}:{selectedKeyframeIds:{},selection:void 0}},[l,f.trackId]),[C,I,O]=mRe(b,s),D=ir(OV),A=D.mode==="snapToSome"?(a=D.positions[f.sheetObject.address.objectKey])==null?void 0:a[f.trackId]:[],N=D.mode==="snapToAll",L=(0,Sh.useMemo)(()=>({data:h,id:f.trackId,sheetObject:s.leaf.sheetObject}),[h,f.trackId]),V=h.keyframes.map((Y,re)=>Sh.default.createElement(Cae,{key:"keyframe-"+Y.id,itemKey:Ls.forTrackKeyframe(f.sheetObject,f.trackId,Y.id),keyframe:Y,index:re,track:L,layoutP:l,leaf:f,selection:_[Y.id]===!0?S:void 0})),G=A.map(Y=>Sh.default.createElement(ZE,{key:"snap-target-"+Y,layoutP:l,leaf:f,position:Y})),$=N?h.keyframes.map(Y=>Sh.default.createElement(ZE,{key:"additionalSnapTarget-".concat(Y.id),layoutP:l,leaf:f,position:Y.position})):null;return Sh.default.createElement(Tae,{ref:g,style:{background:O?"#444850 ":"unset"}},V,G,Sh.default.createElement(Sh.default.Fragment,null,$),C)}),rj.displayName="BasicKeyframedTrack",Mae=rj}),kae,sC,Aae,Iae,bRe=P(()=>{Me(),En(),kae=Ut,sC=X(Ne()),lD(),yRe(),uf(),Aae=({leaf:s,layoutP:a})=>{let l=lf("PrimitivePropRow",s.pathToProp.join());return Qn(()=>{let{sheetObject:h}=s,{trackId:f}=s,g=(0,kae.val)(de().atomP.historic.coreByProject[h.address.projectId].sheetsById[h.address.sheetId].sequence.tracksByObject[h.address.objectKey].trackData[f]);return(g==null?void 0:g.type)!=="BasicKeyframedTrack"?(l.errorDev("trackData type ".concat(g==null?void 0:g.type," is not yet supported on the sequence editor")),sC.default.createElement(Kb,{leaf:s,isCollapsed:!1,node:sC.default.createElement("div",null)})):sC.default.createElement(Kb,{leaf:s,isCollapsed:!1,node:sC.default.createElement(Mae,{layoutP:a,trackData:g,leaf:s})})},[s,a])},Iae=Aae});function _Re(s){return s()}var wRe=P(()=>{});function Rae(s){let{index:a,aggregateKeyframes:l,selection:h}=s;return Qn(Dae(s),[a,l,h,s.viewModel])}function Dae(s){let{index:a,aggregateKeyframes:l,selection:h}=s,{projectId:f,sheetId:g}=s.viewModel.type==="sheet"?s.viewModel.sheet.address:s.viewModel.sheetObject.address;return()=>{let b=l[a],_=l[a+1],S=_&&b.keyframes.length===_.keyframes.length&&b.keyframes.every(({track:D},A)=>_.keyframes[A].track===D)?{length:_.position-b.position,selected:b.selected===0&&_.selected===0}:null,C=S?b.keyframes.map(({kf:D,track:A},N)=>B(F({},A.sheetObject.address),{trackId:A.id,left:D,right:_.keyframes[N].kf})):[],I=_Re(()=>{let D=ij.prism.memo("selectedConnections",()=>Yoe(f,g,h),[f,g,h]).getValue();return[...C,...D]}),O=C.every(D=>$V(D));return{itemKey:ij.prism.memo("itemKey",()=>s.viewModel.type==="sheet"?Ls.forSheetAggregateKeyframe(s.viewModel.sheet,b.position):s.viewModel.type==="sheetObject"?Ls.forSheetObjectAggregateKeyframe(s.viewModel.sheetObject,b.position):Ls.forCompoundPropAggregateKeyframe(s.viewModel.sheetObject,s.viewModel.pathToProp,b.position),[s.viewModel,b.position]),cur:b,connected:S,isAggregateEditingInCurvePopover:O,allConnections:I}}}var ij,sj=P(()=>{ij=Ut,yh(),bD(),En(),Yb(),wRe()});function xRe(s,a){let l=(0,Xl.useRef)(a);l.current=a;let h=(0,Xl.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(f){let g=l.current,b,_=g.aggregateKeyframes[g.index].keyframes,{selection:S,viewModel:C}=g,I=C.type==="sheet"?C.sheet.address:C.sheetObject.address;if(S&&g.aggregateKeyframes[g.index].selected===0)return S.getDragHandlers(B(F({},I),{domNode:s,positionAtStartOfDrag:g.aggregateKeyframes[g.index].position})).onDragStart(f);let O=g,D=(0,AD.val)(O.layoutP.sheet).getSequence(),A=(0,AD.val)(O.layoutP.scaledSpace.toUnitSpace);return{onDrag(N,L,V){let G=A(N);b&&(b.discard(),b=void 0),b=de().tempTransaction(({stateEditors:$})=>{for(let Y of _)$.coreByProject.historic.sheetsById.sequence.transformKeyframes(B(F({},Y.track.sheetObject.address),{trackId:Y.track.id,keyframeIds:[Y.kf.id,Y.track.data.keyframes[Y.track.data.keyframes.indexOf(Y.kf)+1].id],translate:G,scale:1,origin:0,snappingFunction:D.closestGridPosition}))})},onDragEnd(N){N?b&&b.commit():b&&b.discard()}}}}),[]);return Ui(s,h)}function SRe(s,a){return aa(a,{displayName:"Aggregate Tween",menuItems:()=>{let l=s.utils.allConnections.reduce((_,S)=>{var C;return _.concat((C=KV(B(F({},S),{keyframeIds:[S.left.id,S.right.id]})))!=null?C:[])},[]),h=JR(l.map(_=>_.pathToProp)),f=l.map(({keyframe:_,pathToProp:S})=>({keyframe:_,pathToProp:S.slice(h.length)})),g=s.editorProps.viewModel,b=g.type==="sheet"?g.sheet.address:g.sheetObject.address;return[{label:"Copy",callback:()=>{if(s.editorProps.selection){let _=_D(b.projectId,b.sheetId,s.editorProps.selection);de().transaction(S=>{S.stateEditors.studio.ahistoric.setClipboardKeyframes(_)})}else de().transaction(_=>{_.stateEditors.studio.ahistoric.setClipboardKeyframes(f)})}},{label:"Delete",callback:()=>{s.editorProps.selection?s.editorProps.selection.delete():de().transaction(({stateEditors:_})=>{for(let S of s.utils.allConnections)_.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},b),{objectKey:S.objectKey,keyframeIds:[S.left.id,S.right.id],trackId:S.trackId}))})}}]}})}var AD,Xl,oj,Oae,Lae,Nae,Fae,ERe=P(()=>{AD=Ut,Xl=X(Ne()),fae(),Kc(),Rr(),Me(),Es(),bD(),sj(),Ve(),qc(),Yb(),la(),ed(),oj=5,Lae=ae(Xc)(Oae||(Oae=te([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: rgba(26, 28, 30, 0.97);
`]))),Nae=Xl.default.forwardRef((s,a)=>{let{allConnections:l}=Rae(s);return Xl.default.createElement(Lae,{showPopoverEdgeTriangle:!1,ref:a},Xl.default.createElement(WV,{curveConnection:l[0],additionalConnections:l,onRequestClose:s.closePopover}))}),Fae=s=>{let[a,l]=xr(null),{editorProps:h}=s,[f]=SRe(s,l),[g]=xRe(l,s.editorProps),{node:b,toggle:_,close:S}=$c(()=>{let O=(0,AD.val)(h.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:O.screenX+oj,maxX:O.screenX+O.width-oj}}},()=>Xl.default.createElement(Nae,B(F({},h),{closePopover:S}))),{connected:C,isAggregateEditingInCurvePopover:I}=s.utils;return C||g?Xl.default.createElement(Xl.default.Fragment,null,Xl.default.createElement(ej,{ref:a,connectorLengthInUnitSpace:C?C.length:0,isSelected:C?C.selected:!1,isPopoverOpen:I,openPopover:O=>{l&&_(O,l)}}),b,f):Xl.default.createElement(Xl.default.Fragment,null)}});function CRe(s){let a={isSelected:s.isSelected,flag:s.flag};return Eh.default.createElement(ID,null,s.isAllHere?Eh.default.createElement(Hae,F({},a)):Eh.default.createElement(Gae,F({},a)))}var Eh,aj,Bae,Uae,ID,zae,Vae,lj,uj,cj,dj,jae,Hae,Gae,PRe=P(()=>{Eh=X(Ne()),Ve(),iD(),Dr(),aj=16,Bae=aj+2,ID=ae.div(Uae||(Uae=te([`
  position: absolute;
  `,`
  z-index: 1;
`])),Kl(aj)),Vae=ae.div(zae||(zae=te([`
  z-index: 2;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  &:hover
    + `,`,
    #pointer-root.draggingPositionInSequenceEditor
    &:hover
    + `,` {
    `,`
  }
`])),Kl(12),kr,ID,ID,Kl(Bae)),lj="#F2C95C",uj="#40AAA4",cj="#45747C",dj=s=>s.isSelected===0?lj:s.isSelected===1?uj:cj,jae=s=>s.isSelected===0?lj:s.isSelected===1?uj:cj,Hae=s=>Eh.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Eh.default.createElement("rect",{x:"4.46443",y:"10.0078",width:"5",height:"5",transform:"rotate(-45 4.46443 10.0078)",fill:"#212327",stroke:jae(s)}),Eh.default.createElement("rect",{x:"3.75732",y:"6.01953",width:"6",height:"6",transform:"rotate(-45 3.75732 6.01953)",fill:dj(s),stroke:s.flag===2?"white":void 0,strokeWidth:s.flag===2?"2px":void 0})),Gae=s=>Eh.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Eh.default.createElement("rect",{x:"4.46443",y:"8",width:"5",height:"5",transform:"rotate(-45 4.46443 8)",fill:"#23262B",stroke:s.flag===2?"white":dj(s),strokeWidth:s.flag===2?"2px":void 0}))});function TRe(s,a){let l=s.children.map(h=>h.type==="propWithChildren"?hj(h,a):Wae(h,a)).filter(pj);return l.length===0?null:{type:"sheetObject",sheetObject:s.sheetObject,children:l}}function hj(s,a){let l=s.children.map(h=>h.type==="propWithChildren"?hj(h,a):Wae(h,a)).filter(pj);return l.length===0?null:{type:"propWithChildren",pathToProp:s.pathToProp,propConfig:s.propConf,children:l}}function Wae(s,a){let l=a.find(h=>h.track.id===s.trackId);return l?{type:"primitiveProp",keyframe:l.kf,pathToProp:s.pathToProp,propConfig:s.propConf,sheetObject:s.sheetObject,trackId:s.trackId}:null}function MRe(s){var a,l,h,f;let{cur:g}=s.utils,b=ED(s.editorProps.viewModel.type==="sheet"?null:s.editorProps.viewModel.type==="sheetObject"?(l=(a=TRe(s.editorProps.viewModel,g.keyframes))==null?void 0:a.children)!=null?l:null:(f=(h=hj(s.editorProps.viewModel,g.keyframes))==null?void 0:h.children)!=null?f:null),_=rv(s.utils.itemKey);_.useRelations(()=>g.keyframes.map(O=>({affects:O.itemKey,flag:2})),[g.keyframes.map(O=>O.track.id).join("-")]);let[S,C]=xr(null),[I]=kRe(s,C);return oC.default.createElement(oC.default.Fragment,null,oC.default.createElement(Vae,B(F(F({ref:S},_.attrs),ua.includePositionSnapAttrs(g.position)),{onClick:O=>s.editorProps.viewModel.type!=="sheet"?b.open(O,S.current):null})),oC.default.createElement(CRe,{flag:_.flag,isAllHere:g.allHere,isSelected:g.selected}),I,b.node)}function kRe(s,a){return aa(a,{displayName:"Aggregate Keyframe",menuItems:()=>{let l=s.editorProps.viewModel,h=s.editorProps.selection;return[{label:h?"Copy (selection)":"Copy",callback:()=>{if(h){let{projectId:f,sheetId:g}=l.type==="sheet"?l.sheet.address:l.sheetObject.address,b=_D(f,g,h);de().transaction(_=>{_.stateEditors.studio.ahistoric.setClipboardKeyframes(b)})}else{let f=s.utils.cur.keyframes.flatMap(S=>{var C;return(C=KV(B(F({},S.track.sheetObject.address),{trackId:S.track.id,keyframeIds:[S.kf.id]})))!=null?C:[]}),g=l.type==="sheet"?[]:l.type==="sheetObject"?[l.sheetObject.address.objectKey]:l.type==="propWithChildren"?[l.sheetObject.address.objectKey,...l.pathToProp]:[],b=JR([g,...f.map(S=>S.pathToProp)]),_=f.map(({keyframe:S,pathToProp:C})=>({keyframe:S,pathToProp:C.slice(b.length)}));de().transaction(S=>{S.stateEditors.studio.ahistoric.setClipboardKeyframes(_)})}}},{label:h?"Delete (selection)":"Delete",callback:()=>{h?h.delete():de().transaction(({stateEditors:f})=>{for(let g of s.utils.cur.keyframes)f.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},g.track.sheetObject.address),{keyframeIds:[g.kf.id],trackId:g.track.id}))})}}]}})}var oC,pj,ARe=P(()=>{oC=X(Ne()),Rr(),iv(),la(),PRe(),Me(),Yb(),ed(),qu(),PD(),pj=s=>s!==null}),$ae,aC,Kae,Xae,qae,Yae,IRe=P(()=>{$ae=Ut,aC=X(Ne()),Ve(),ERe(),sj(),ARe(),Xae=ae.div(Kae||(Kae=te([`
  position: absolute;
`]))),qae=aC.default.memo(s=>{let a=Rae(s);return aC.default.createElement(Xae,{style:{top:"".concat(s.viewModel.nodeHeight/2,"px"),left:"calc(".concat((0,$ae.val)(s.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(a.cur.position,"px))")}},aC.default.createElement(MRe,{editorProps:s,utils:a}),aC.default.createElement(Fae,{editorProps:s,utils:a}))}),Yae=qae});function RRe(s){let{layoutP:a,aggregatedKeyframes:l,viewModel:h}=s,f=lf("AggregatedKeyframeTrack"),[g,b]=xr(null),{selectedPositions:_,selection:S}=DRe(a,l),[C,I,O]=NRe(b,s,()=>f._debug("see aggregatedKeyframes",s.aggregatedKeyframes)),D=(0,ql.useMemo)(()=>[...l.byPosition.entries()].sort((Y,re)=>Y[0]-re[0]).map(([Y,re])=>({position:Y,keyframes:re,selected:_.get(Y),allHere:re.length===l.tracks.length})),[l,_]),A=ir(OV),N=A.mode==="snapToAll",L=A.mode==="snapToSome"?A.positions:Nz,V=(0,ql.useMemo)(()=>h.type==="sheet"?MIe(h,L):TV(h,L),[L]).map(Y=>ql.default.createElement(ZE,{key:"snap-target-"+Y,layoutP:a,leaf:h,position:Y})),G=(0,ql.useMemo)(()=>D.map(({position:Y,keyframes:re},ne)=>({position:Y,editorProps:{index:ne,layoutP:a,viewModel:h,aggregateKeyframes:D,selection:_.has(Y)?S:void 0}})),[D,h,_]);zRe(b,Y=>{var re;return(re=G.find(ne=>ne.position===Y))==null?void 0:re.editorProps},{onClickFromDrag(Y){}});let $=G.map((Y,re)=>ql.default.createElement(ql.Fragment,{key:"agg-"+D[re].keyframes[0].kf.id},N&&ql.default.createElement(ZE,{layoutP:a,leaf:h,position:Y.position}),ql.default.createElement(Yae,F({},Y.editorProps))));return ql.default.createElement(ele,{ref:g,style:{background:O?"#444850 ":"unset"}},$,V,C)}function DRe(s,a){return Qn(()=>(0,da.val)(ORe(s,a)),[s,a])}function ORe(s,a){return(0,da.prism)(()=>{let l=(0,da.val)(s.selectionAtom),h=(0,da.val)(l.pointer.current);if(!h)return tle;let f=new Map;for(let[g,b]of a.byPosition){let _=LRe(b,h);_!==void 0&&_!==DD&&f.set(g,_)}return{selectedPositions:f,selection:(0,da.val)(l.pointer.current)}})}function LRe(s,a){var l,h,f;let g;for(let{track:b,kf:_}of s){let S=((f=(h=(l=a.byObjectKey[b.sheetObject.address.objectKey])==null?void 0:l.byTrackId[b.id])==null?void 0:h.byKeyframeId)==null?void 0:f[_.id])===!0;g===void 0?S?g=gj:g=DD:S?g===DD&&(g=vj):g===gj&&(g=vj)}return g}function NRe(s,a,l){return aa(s,{onOpen:l,displayName:"Aggregate Keyframe Track",menuItems:()=>{var h;let f=(h=(0,da.pointerToPrism)(de().atomP.ahistoric.clipboard.keyframesWithRelativePaths).getValue())!=null?h:[];return[FRe(a,f)]}})}function FRe(s,a){return{label:"Paste Keyframes",enabled:a.length>0,callback:()=>{let l=(0,da.val)(s.layoutP.sheet).getSequence();s.viewModel.type==="sheet"?BRe(s.viewModel,a,l):URe(s.viewModel,a,l)}}}function BRe(s,a,l){var h;let{projectId:f,sheetId:g,sheetInstanceId:b}=s.sheet.address;if(a.every(({pathToProp:_})=>_.length===0))for(let _ of s.children.map(S=>S.sheetObject)){let S=(0,da.pointerToPrism)(de().atomP.historic.coreByProject[f].sheetsById[g].sequence.tracksByObject[_.address.objectKey]).getValue(),C=Object.keys((h=S==null?void 0:S.trackData)!=null?h:{});fj(_.address,C,a,l)}else{let _=(0,da.pointerToPrism)(de().atomP.historic.coreByProject[f].sheetsById[g].sequence.tracksByObject).getValue(),S=a.map(({keyframe:C,pathToProp:I})=>{var O,D;let A=I[0],N=I.slice(1),L=Jc([...N]),V=((D=(O=_==null?void 0:_[A])==null?void 0:O.trackIdByPropPath)!=null?D:{})[L];return V?{keyframe:C,trackId:V,address:{objectKey:A,projectId:f,sheetId:g,sheetInstanceId:b}}:null}).filter(C=>C!==null);Zae(S,l)}}function URe(s,a,l){var h;let{projectId:f,sheetId:g,objectKey:b}=s.sheetObject.address,_=(0,da.pointerToPrism)(de().atomP.historic.coreByProject[f].sheetsById[g].sequence.tracksByObject[b]).getValue();if(a.every(({pathToProp:S})=>S.length===0)){let S=Object.keys((h=_==null?void 0:_.trackData)!=null?h:{});if(s.type==="sheetObject")fj(s.sheetObject.address,S,a,l);else{let C=(_==null?void 0:_.trackIdByPropPath)||{},I=Object.entries(C).filter(([O,D])=>D!==void 0&&yIe(eD(O),s.pathToProp)).map(([O,D])=>D);fj(s.sheetObject.address,I,a,l)}}else{let S=(_==null?void 0:_.trackIdByPropPath)||{},C=s.type==="propWithChildren"?s.pathToProp:[],I=a.map(({keyframe:O,pathToProp:D})=>{let A=Jc([...C,...D]),N=S[A];return N?{keyframe:O,trackId:N,address:s.sheetObject.address}:null}).filter(O=>O!==null);Zae(I,l)}}function fj(s,a,l,h){var f;h.position=h.closestGridPosition(h.position);let g=(f=Qae(l.map(({keyframe:b})=>b)))==null?void 0:f.position;de().transaction(({stateEditors:b})=>{for(let _ of a)for(let{keyframe:S}of l)b.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(B(F({},s),{trackId:_,position:h.position+S.position-g,handles:S.handles,value:S.value,snappingFunction:h.closestGridPosition,type:S.type}))})}function Zae(s,a){var l;a.position=a.closestGridPosition(a.position);let h=(l=Qae(s.map(({keyframe:f})=>f)))==null?void 0:l.position;de().transaction(({stateEditors:f})=>{for(let{keyframe:g,trackId:b,address:_}of s)f.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(B(F({},_),{trackId:b,position:a.position+g.position-h,handles:g.handles,value:g.value,snappingFunction:a.closestGridPosition,type:g.type}))})}function Qae(s){let a=null;for(let l of s)(a===null||l.position<a.position)&&(a=l);return a}function zRe(s,a,l){let h=lf("useDragForAggregateKeyframeDot"),f=Ose(),g=(0,ql.useMemo)(()=>({debugName:"AggregateKeyframeDot/useDragKeyframe",onDragStart(_){h._debug("onDragStart",{target:_.target});let S=Number(_.target.dataset.pos),C=a(S);if(!C)return h._debug("no props found for ",{positionToFind:S}),!1;f(!0,S);let I=(0,da.prism)(Dae(C)).getValue().cur.keyframes,O=C.viewModel.type==="sheet"?C.viewModel.sheet.address:C.viewModel.sheetObject.address,D=(0,da.val)(de().atomP.historic.coreByProject[O.projectId].sheetsById[O.sheetId].sequence.tracksByObject),A=jse(D,function(G,{trackId:$,objectKey:Y}){var re,ne;return I.every(le=>G.id!==le.kf.id)&&!(C.selection&&(ne=(re=C.selection.byObjectKey[Y])==null?void 0:re.byTrackId[$])!=null&&ne.byKeyframeId[G.id])});if(Vse(A),C.selection&&C.aggregateKeyframes[C.index].selected===0){let{selection:G,viewModel:$}=C,Y=G.getDragHandlers(B(F({},O),{domNode:s,positionAtStartOfDrag:I[0].kf.position})).onDragStart(_);return Y&&B(F({},Y),{onClick:l.onClickFromDrag,onDragEnd:(...re)=>{var ne;(ne=Y.onDragEnd)==null||ne.call(Y,...re),cv()}})}let N=C,L=(0,da.val)(N.layoutP.scaledSpace.toUnitSpace),V;return{onDrag(G,$,Y){var re;let ne=Math.max((re=ua.checkIfMouseEventSnapToPos(Y,{}))!=null?re:I[0].kf.position+L(G),0);f(!0,ne),V==null||V.discard(),V=void 0,V=de().tempTransaction(({stateEditors:le})=>{for(let Ce of I){let ve=Ce.kf;le.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},Ce.track.sheetObject.address),{trackId:Ce.track.id,keyframes:[B(F({},ve),{position:ne})],snappingFunction:(0,da.val)(N.layoutP.sheet).getSequence().closestGridPosition}))}})},onDragEnd(G){f(!1,-1),G?V==null||V.commit():(V==null||V.discard(),l.onClickFromDrag(_)),cv()},onClick(G){l.onClickFromDrag(G)}}}}),[a,l.onClickFromDrag]),[b]=Ui(s,g);return Gl(b,"draggingPositionInSequenceEditor","ew-resize"),[b]}var da,ql,Jae,ele,tle,nle,RD,mj,gj,vj,DD,yj=P(()=>{En(),da=Ut,ql=X(Ne()),Ve(),la(),Rr(),IRe(),Wb(),uf(),sj(),qu(),Es(),fo(),sl(),Me(),ed(),dv(),Gee(),dv(),Wb(),ele=ae.div(Jae||(Jae=te([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),tle=Object.freeze({selectedPositions:new Map,selection:void 0}),nle=ql.default.memo(RRe),RD=nle,mj=(s=>(s[s.AllSelected=0]="AllSelected",s[s.AtLeastOneUnselected=1]="AtLeastOneUnselected",s[s.NoneSelected=2]="NoneSelected",s))(mj||{}),{AllSelected:gj,AtLeastOneUnselected:vj,NoneSelected:DD}=mj}),Qb,bj,rle,VRe=P(()=>{En(),Qb=X(Ne()),bRe(),lD(),yj(),Wb(),uf(),bj=(s,a)=>s.type==="propWithChildren"?Qb.default.createElement(rle,{layoutP:a,viewModel:s,key:"prop"+s.pathToProp[s.pathToProp.length-1]}):Qb.default.createElement(Iae,{layoutP:a,leaf:s,key:"prop"+s.pathToProp[s.pathToProp.length-1]}),rle=({viewModel:s,layoutP:a})=>{let l=lf("RightPropWithChildrenRow",s.pathToProp.join());return Qn(()=>{let h=nD(s);return Qb.default.createElement(JY,{logger:l},Qb.default.createElement(Kb,{leaf:s,node:Qb.default.createElement(RD,{layoutP:a,aggregatedKeyframes:h,viewModel:s}),isCollapsed:s.isCollapsed},s.children.map(f=>bj(f,a))))},[s,a])}}),_j,ile,sle,jRe=P(()=>{En(),_j=X(Ne()),VRe(),lD(),Wb(),yj(),ile=({leaf:s,layoutP:a})=>Qn(()=>{let l=nD(s);return _j.default.createElement(Kb,{leaf:s,node:_j.default.createElement(RD,{layoutP:a,aggregatedKeyframes:l,viewModel:s}),isCollapsed:s.isCollapsed},s.children.map(h=>bj(h,a)))},[s,a]),sle=ile}),OD,ole,ale,HRe=P(()=>{En(),OD=X(Ne()),jRe(),lD(),Wb(),yj(),ole=({leaf:s,layoutP:a})=>Qn(()=>{let l=nD(s);return OD.default.createElement(Kb,{leaf:s,node:OD.default.createElement(RD,{layoutP:a,aggregatedKeyframes:l,viewModel:s}),isCollapsed:s.isCollapsed},s.children.map(h=>OD.default.createElement(sle,{layoutP:a,key:"sheetObject-"+h.sheetObject.address.objectKey,leaf:h})))},[s,a]),ale=ole}),lC,vv,LD,lle,ule,cle,dle,hle=P(()=>{En(),lC=Ut,vv=X(Ne()),Ve(),IIe(),Jse(),HRe(),LD=1e6,ule=ae.ul(lle||(lle=te([`
  margin: 0;
  padding: 0;
  list-style: none;
  position: absolute;
  left: 0;
  width: `,`px;
`])),LD),cle=({layoutP:s})=>Qn(()=>{let a=(0,lC.val)(s.tree),l=(0,lC.val)(s.tree.top)+Math.max((0,lC.val)(s.tree.heightIncludingChildren),(0,lC.val)(s.dopeSheetDims.height));return vv.default.createElement(vv.default.Fragment,null,vv.default.createElement(NV,{layoutP:s,height:l},vv.default.createElement(wse,{layoutP:s,height:l},vv.default.createElement(ule,{style:{top:a.top+"px"}},vv.default.createElement(ale,{leaf:a,layoutP:s})))))},[s]),dle=cle});function wj(s,a,l,h){let f="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(s,"px)"),g="calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(a,") * 1px)");l===0&&(l=1e-4);let b="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(l,")");h===0&&(h=.001);let _="calc(var(--graphEditorVerticalSpace) * ".concat(h*-1,")");return"translate(".concat(f,", ").concat(g,") scale(").concat(b,", ").concat(_,")")}function GRe(s,a){let{index:l,trackData:h}=a,f=h.keyframes[l],g=h.keyframes[l+1];return aa(s,{menuItems:()=>[{label:"Delete",callback:()=>{de().transaction(({stateEditors:b})=>{let{deleteKeyframes:_}=b.coreByProject.historic.sheetsById.sequence;_(B(F({},a.sheetObject.address),{trackId:a.trackId,keyframeIds:[f.id,g.id]}))})}}]})}var ND,ple,fle,mle,gle,vle,xj=P(()=>{df(),Me(),la(),Rr(),ND=X(Ne()),Ve(),fle=ae.path(ple||(ple=te([`
  stroke-width: 2;
  stroke: var(--main-color);
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),mle="M 0 0 L 1 0 L 1 1",gle=s=>{let{index:a,trackData:l}=s,h=l.keyframes[a],f=l.keyframes[a+1],g=f.position-h.position,[b,_]=xr(null),[S]=GRe(_,s),C=s.isScalar?yR(h.value,s.propConfig):0,I=s.isScalar?yR(f.value,s.propConfig):1,O=s.extremumSpace.fromValueSpace(C),D=s.extremumSpace.fromValueSpace(I)-O,A=wj(h.position,O,g,D),N=h.handles[2],L=h.handles[3],V=f.handles[0],G=f.handles[1],$="M 0 0 C ".concat(N," ").concat(L," ").concat(V," ").concat(G," 1 1");return ND.default.createElement(ND.default.Fragment,null,ND.default.createElement(fle,{ref:b,d:!h.type||h.type==="bezier"?$:mle,style:{transform:A}}),S)},vle=gle});function WRe(s,a){let l=(0,yv.useRef)(a);l.current=a;let h=(0,yv.useMemo)(()=>({debugName:"CurveHandler/useOurDrags",lockCSSCursorTo:"move",onDragStart(){let f,g=l.current,b=(0,uC.val)(g.layoutP.scaledSpace.toUnitSpace),_=(0,uC.val)(g.layoutP.graphEditorVerticalSpace.toExtremumSpace),S=g.extremumSpace.lock();return{onDrag(C,I){f&&(f.discard(),f=void 0);let{index:O,trackData:D}=g,A=D.keyframes[O],N=D.keyframes[O+1],L=b(C)/(N.position-A.position),V=-I,G=_(V),$=g.extremumSpace.deltaToValueSpace(G),Y=a.isScalar?A.value:0,re=a.isScalar?N.value:1,ne=$/(re-Y);if(g.which==="left"){let le=_i(A.handles[2]+L,0,1),Ce=A.handles[3]+ne;f=de().tempTransaction(({stateEditors:ve})=>{ve.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},g.sheetObject.address),{snappingFunction:(0,uC.val)(g.layoutP.sheet).getSequence().closestGridPosition,trackId:g.trackId,keyframes:[B(F({},A),{handles:[A.handles[0],A.handles[1],le,Ce]})]}))})}else{let le=_i(N.handles[0]+L,0,1),Ce=N.handles[1]+ne;f=de().tempTransaction(({stateEditors:ve})=>{ve.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},g.sheetObject.address),{trackId:g.trackId,snappingFunction:(0,uC.val)(g.layoutP.sheet).getSequence().closestGridPosition,keyframes:[B(F({},N),{handles:[le,Ce,N.handles[2],N.handles[3]]})]}))})}},onDragEnd(C){S(),C?f&&f.commit():f&&f.discard()}}}}),[]);Ui(s,h)}function $Re(s,a){return aa(s,{menuItems:()=>[{label:"Delete",callback:()=>{de().transaction(({stateEditors:l})=>{l.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},a.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.trackId}))})}}]})}var uC,yv,yle,Sj,ble,_le,wle,xle,Sle,Ej,KRe=P(()=>{Me(),la(),Es(),Rr(),uC=Ut,di(),yv=X(Ne()),Ve(),xj(),Dr(),Sj=ae.circle(yle||(yle=te([`
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  fill: var(--main-color);
  r: 2px;
  pointer-events: none;
`]))),_le=ae.circle(ble||(ble=te([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  cursor: move;
  `,`;
  &:hover {
  }
  &:hover + `,` {
    r: 6px;
  }
`])),kr,Sj),xle=ae.path(wle||(wle=te([`
  stroke-width: 1;
  stroke: var(--main-color);
  /* stroke: gray; */
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),Sle=s=>{let[a,l]=xr(null),{index:h,trackData:f}=s,g=f.keyframes[h],b=f.keyframes[h+1],[_]=$Re(l,s);WRe(l,s);let S=s.which==="left"?g.handles[2]:b.handles[0],C=g.position+(b.position-g.position)*S,I=s.which==="left"?g.handles[3]:b.handles[1],O=s.isScalar?g.value:0,D=s.isScalar?b.value:1,A=O+(D-O)*I,N=s.extremumSpace.fromValueSpace(A),L=N-s.extremumSpace.fromValueSpace(s.which==="left"?O:D),V=wj(s.which==="left"?g.position:b.position,s.extremumSpace.fromValueSpace(s.which==="left"?O:D),C-(s.which==="left"?g.position:b.position),L);return yv.default.createElement("g",null,yv.default.createElement(_le,{ref:a,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(C," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(N,") * 1px)")}}),yv.default.createElement(Sj,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(C," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(N,") * 1px)")}}),yv.default.createElement(xle,{d:"M 0 0 L 1 1",style:{transform:V}}),_)},Ej=Sle});function XRe(s){let[a,l]=(0,Sf.useState)(!1);xh(a,s.props.keyframe.position);let h=(0,Sf.useRef)(s.props);h.current=s.props;let f=(0,Sf.useMemo)(()=>({debugName:"GraphEditorDotScalar/useDragKeyframe",lockCSSCursorTo:"move",onDragStart(g){l(!0);let b=!!g.altKey,_=h.current,S=(0,FD.val)(_.layoutP.scaledSpace.toUnitSpace),C=(0,FD.val)(_.layoutP.graphEditorVerticalSpace.toExtremumSpace),I=_.extremumSpace.lock(),O;return{onDrag(D,A){let N=_.trackData.keyframes[_.index],L=S(D),V=-A,G=C(V),$=_.extremumSpace.deltaToValueSpace(G),Y=[],re=B(F({},N),{position:N.position+L,value:N.value+$,handles:[...N.handles]});if(Y.push(re),b){let ne=_.trackData.keyframes[_.index-1];if(ne&&Math.abs(N.value-ne.value)>0){let Ce=B(F({},ne),{handles:[...ne.handles]});Y.push(Ce),Ce.handles[3]=YRe(ne.handles[3],ne.value,ne.value,N.value,re.value)}let le=_.trackData.keyframes[_.index+1];if(le&&Math.abs(N.value-le.value)>0){let Ce=B(F({},le),{handles:[...le.handles]});Y.push(Ce),Ce.handles[1]=ZRe(Ce.handles[1],Ce.value,Ce.value,N.value,re.value)}}O==null||O.discard(),O=de().tempTransaction(({stateEditors:ne})=>{ne.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},_.sheetObject.address),{trackId:_.trackId,keyframes:Y,snappingFunction:(0,FD.val)(_.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(D){l(!1),I(),D?O==null||O.commit():(O==null||O.discard(),s.onDetectedClick(g))}}}}),[]);return Ui(s.node,f),Gl(a,"draggingPositionInSequenceEditor","move"),a}function qRe(s,a){return aa(s,{menuItems:()=>[{label:"Delete",callback:()=>{de().transaction(({stateEditors:l})=>{l.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},a.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.trackId}))})}}]})}function YRe(s,a,l,h,f){return(h-a)*s/(f-l)}function ZRe(s,a,l,h,f){return((a-h)*s+h-a+l-f)/(l-f)}var FD,Sf,Ele,Cj,Cle,Ple,Tle,Mle,QRe=P(()=>{Me(),la(),Es(),Rr(),FD=Ut,Sf=X(Ne()),Ve(),fo(),fo(),Dr(),sl(),qu(),PD(),iv(),Cj=ae.circle(Ele||(Ele=te([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),Ple=ae.circle(Cle||(Cle=te([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: move;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),kr,Cj,ph),Tle=s=>{let[a,l]=xr(null),{index:h,trackData:f}=s,g=f.keyframes[h],[b]=qRe(l,s),_=rv(s.itemKey),S=g.value,C=s.extremumSpace.fromValueSpace(S),I=ED([{type:"primitiveProp",keyframe:s.keyframe,pathToProp:s.pathToProp,propConfig:s.propConfig,sheetObject:s.sheetObject,trackId:s.trackId}]),O=XRe({node:l,props:s,onDetectedClick:D=>I.toggle(D,D.target instanceof Element?D.target:l)});return Sf.default.createElement(Sf.default.Fragment,null,Sf.default.createElement(Ple,B(F(F(F({ref:a,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(C,") * 1px)")}},td(g.position)),ua.includePositionSnapAttrs(g.position)),_.attrs),{className:O?"beingDragged":""})),Sf.default.createElement(Cj,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(C,") * 1px)"),fill:_.flag===2?"white":void 0}}),I.node,b)},Mle=Tle});function JRe(s){let[a,l]=(0,Ef.useState)(!1);xh(a,s.props.keyframe.position);let h=(0,Ef.useRef)(s.props);h.current=s.props;let f=(0,Ef.useMemo)(()=>({debugName:"GraphEditorDotNonScalar/useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(g){l(!0);let b=h.current,_=(0,Pj.val)(b.layoutP.scaledSpace.toUnitSpace),S=b.extremumSpace.lock(),C;return{onDrag(I,O){let D=b.trackData.keyframes[b.index],A=_(I),N=[],L=B(F({},D),{position:D.position+A,value:D.value,handles:[...D.handles]});N.push(L),C==null||C.discard(),C=de().tempTransaction(({stateEditors:V})=>{V.coreByProject.historic.sheetsById.sequence.replaceKeyframes(B(F({},b.sheetObject.address),{trackId:b.trackId,keyframes:N,snappingFunction:(0,Pj.val)(b.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(I){l(!1),S(),I?C==null||C.commit():(C==null||C.discard(),s.onDetectedClick(g))}}}}),[]);return Ui(s.node,f),Gl(a,"draggingPositionInSequenceEditor","ew-resize"),a}function eDe(s,a){return aa(s,{menuItems:()=>[{label:"Delete",callback:()=>{de().transaction(({stateEditors:l})=>{l.coreByProject.historic.sheetsById.sequence.deleteKeyframes(B(F({},a.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.trackId}))})}}]})}var Pj,Ef,kle,Tj,Ale,Ile,Rle,Mj,tDe=P(()=>{Me(),la(),Es(),Rr(),Pj=Ut,Ef=X(Ne()),Ve(),fo(),fo(),Dr(),sl(),qu(),PD(),iv(),Tj=ae.circle(kle||(kle=te([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),Ile=ae.circle(Ale||(Ale=te([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: ew-resize;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),kr,Tj,ph),Rle=s=>{let[a,l]=xr(null),{index:h,trackData:f,itemKey:g}=s,b=f.keyframes[h],[_]=eDe(l,s),S=rv(g),C=s.which==="left"?0:1,I=ED([{type:"primitiveProp",keyframe:s.keyframe,pathToProp:s.pathToProp,propConfig:s.propConfig,sheetObject:s.sheetObject,trackId:s.trackId}]),O=JRe({node:l,props:s,onDetectedClick:A=>I.toggle(A,A.target instanceof Element?A.target:l)}),D=s.extremumSpace.fromValueSpace(C);return Ef.default.createElement(Ef.default.Fragment,null,Ef.default.createElement(Ile,B(F(F(F({ref:a,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(b.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(D,") * 1px)")}},S.attrs),td(b.position)),ua.includePositionSnapAttrs(b.position)),{className:O?"beingDragged":""})),Ef.default.createElement(Tj,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(b.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(D,") * 1px)"),fill:S.flag===2?"white":void 0}}),I.node,_)},Mj=Rle}),BD,Dle,Ole,Lle,Nle,nDe=P(()=>{BD=X(Ne()),Ve(),xj(),Ole=ae.path(Dle||(Dle=te([`
  stroke-width: 2;
  stroke: var(--main-color);
  stroke-dasharray: 3 2;
  fill: none;
  vector-effect: non-scaling-stroke;
  opacity: 0.3;
`]))),Lle=s=>{let{index:a,trackData:l}=s,h="M 0 0 L 1 1",f=wj(l.keyframes[a].position,s.extremumSpace.fromValueSpace(0),0,s.extremumSpace.fromValueSpace(1)-s.extremumSpace.fromValueSpace(0));return BD.default.createElement(BD.default.Fragment,null,BD.default.createElement(Ole,{d:h,style:{transform:f}}))},Nle=Lle}),go,Fle,Ble,Ule,zle,Vle,rDe=P(()=>{go=X(Ne()),Ve(),xj(),KRe(),QRe(),tDe(),nDe(),Ble=ae.g(Fle||(Fle=te([`
  /* position: absolute; */
`]))),Ule=go.default.createElement(go.default.Fragment,null),zle=s=>{let{index:a,trackData:l,isScalar:h}=s,f=l.keyframes[a],g=l.keyframes[a+1],b=f.connectedRight&&!!g&&g.value!==f.value;return go.default.createElement(Ble,null,b?go.default.createElement(go.default.Fragment,null,go.default.createElement(vle,F({},s)),!f.type||f.type==="bezier"&&go.default.createElement(go.default.Fragment,null,go.default.createElement(Ej,B(F({},s),{which:"left"})),go.default.createElement(Ej,B(F({},s),{which:"right"})))):Ule,h?go.default.createElement(Mle,F({},s)):go.default.createElement(go.default.Fragment,null,go.default.createElement(Mj,B(F({},s),{which:"left"})),go.default.createElement(Mj,B(F({},s),{which:"right"})),go.default.createElement(Nle,F({},s))))},Vle=zle});function iDe(s,a){let l=1/0,h=-1/0;function f(g){l=Math.min(g,l),h=Math.max(g,h)}return s.forEach((g,b)=>{let _=yR(g.value,a);if(f(_),!g.connectedRight)return;let S=s[b+1];if(!S)return;let C=(typeof S.value=="number"?S.value:1)-_;f(_+g.handles[3]*C),f(_+S.handles[1]*C)}),[l,h]}function sDe(s){let a=0,l=1;function h(f){a=Math.min(f,a),l=Math.max(f,l)}return s.forEach((f,g)=>{if(!f.connectedRight)return;let b=s[g+1];b&&(h(f.handles[3]),h(b.handles[1]))}),[a,l]}var rd,jle,Hle,oDe=P(()=>{yh(),rd=X(Ne()),zD(),rDe(),df(),En(),jle=rd.default.memo(({layoutP:s,trackData:a,sheetObject:l,trackId:h,color:f,pathToProp:g})=>{let b=vR(ir(l.template.configPointer),g);if(Zc(b))return console.error("Composite prop types cannot be keyframed"),rd.default.createElement(rd.default.Fragment,null);let[_,S]=(0,rd.useState)(!1),C=(0,rd.useMemo)(()=>{let A=new Set;return function(){let N=A.size===0;A.add(L),N&&S(!0);function L(){let V=A.size>0;A.delete(L),V&&A.size===0&&S(!1)}return L}},[]),I=(0,rd.useMemo)(()=>{let A=b.type==="number"?iDe(a.keyframes,b):sDe(a.keyframes),N=G=>(G-A[0])/(A[1]-A[0]),L=G=>A[0]+V(G),V=G=>G*(A[1]-A[0]);return{fromValueSpace:N,toValueSpace:L,deltaToValueSpace:V,lock:C}},[a.keyframes]),O=(0,rd.useRef)(void 0);_||(O.current=I);let D=a.keyframes.map((A,N)=>rd.default.createElement(Vle,{pathToProp:g,propConfig:b,itemKey:Ls.forTrackKeyframe(l,h,A.id),keyframe:A,index:N,trackData:a,layoutP:s,sheetObject:l,trackId:h,isScalar:b.type==="number",key:A.id,extremumSpace:O.current,color:f}));return rd.default.createElement("g",{style:{"--main-color":cC[f].iconColor}},D)}),Hle=jle}),Gle,UD,Wle,$le,aDe=P(()=>{Me(),En(),Gle=Ut,UD=X(Ne()),oDe(),Wle=s=>Qn(()=>{let{sheetObject:a,trackId:l}=s,h=(0,Gle.val)(de().atomP.historic.coreByProject[a.address.projectId].sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[l]);return(h==null?void 0:h.type)!=="BasicKeyframedTrack"?(console.error("trackData type ".concat(h==null?void 0:h.type," is not yet supported on the graph editor")),UD.default.createElement(UD.default.Fragment,null)):UD.default.createElement(Hle,B(F({},s),{trackData:h}))},[s.trackId,s.layoutP]),$le=Wle});function Kle({clippedSpaceRange:s,clippedSpaceWidth:a,fps:l,gapWidth:h=120},f){let g=1/l,b=s.end-s.start,_=a/(l*b),S=Math.floor(h/_),C=(S<l?Xle(l).find(D=>D>=S):l*Math.floor(S/l))*g,I=Math.floor(s.start/C),O=Math.ceil(s.end/C);for(let D=I;D<=O;D++){let A=D*C,N=A%1===0;f(A,N)}}var Xle,qle=P(()=>{di(),Xle=Px(s=>{let a=[];for(let l=1;l<=s;l++)s%l===0&&a.push(l);return a})});function lDe(s){let{clippedSpaceWidth:a,height:l,ctx:h,unitSpaceToClippedSpace:f,snapToGrid:g}=s;h.clearRect(0,0,a,l),Kle(s,(b,_)=>{let S=g(b),C=Math.floor(f(S));h.strokeStyle=_?"rgba(225, 225, 225, 0.04)":"rgba(255, 255, 255, 0.01)",h.beginPath(),h.moveTo(C,0),h.lineTo(C,l),h.stroke(),h.closePath()})}var bv,_v,Yle,Zle,Qle,Jle,eue,tue,nue,rue,kj,iue=P(()=>{bv=Ut,_v=X(Ne()),Ve(),qle(),Me(),Zle=ae.div(Yle||(Yle=te([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),Jle=ae.canvas(Qle||(Qle=te([`
  position: relative;
  left: 0;
`]))),eue=s=>{let a=s;return a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1},tue=()=>window.devicePixelRatio||1,nue=s=>tue()/eue(s),rue=({layoutP:s,width:a,height:l})=>{let h=(0,_v.useRef)(null),[f,g]=(0,_v.useState)(null),{ctx:b,ratio:_}=(0,_v.useMemo)(()=>{if(!f)return{};let S=f.getContext("2d"),C=nue(S);return{ctx:S,ratio:C}},[f]);return(0,_v.useLayoutEffect)(()=>{if(!b)return;f.width=a*_,f.height=l*_;let S=(0,bv.prism)(()=>{let C=(0,bv.val)(s.sheet).getSequence();return{ctx:b,clippedSpaceRange:(0,bv.val)(s.clippedSpace.range),clippedSpaceWidth:(0,bv.val)(s.clippedSpace.width),unitSpaceToClippedSpace:(0,bv.val)(s.clippedSpace.fromUnitSpace),height:l,leftPadding:(0,bv.val)(s.scaledSpace.leftPadding),fps:C.subUnitsPerUnit,snapToGrid:I=>C.closestGridPosition(I)}}).onChange(de().ticker,C=>{b.save(),b.scale(_,_),lDe(C),b.restore()},!0);return()=>{S()}},[b,a,l,s]),_v.default.createElement(Zle,{ref:h,style:{width:a+"px"}},_v.default.createElement(Jle,{ref:g,style:{width:a+"px",height:l+"px"}}))},kj=rue}),id,wv,cC,sue,oue,aue,lue,uue,cue,zD=P(()=>{Me(),ed(),xR(),En(),id=Ut,wv=X(Ne()),Ve(),hle(),Jse(),aDe(),iue(),il(),cC={1:{iconColor:"#b98b08"},2:{iconColor:"#70a904"},3:{iconColor:"#2e928a"},4:{iconColor:"#a943bb"},5:{iconColor:"#b90808"},6:{iconColor:"#b4bf0e"}},oue=ae.div(sue||(sue=te([`
  position: absolute;
  right: 0;
  bottom: 0;
  background: `,`;
`])),Vu(.03,"#1a1c1e")),lue=ae.svg(aue||(aue=te([`
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  pointer-events: none;
`]))),uue=({layoutP:s})=>Qn(()=>{let a=(0,id.val)(s.sheet),l=(0,id.val)(de().atomP.historic.projects.stateByProjectId[a.address.projectId].stateBySheetId[a.address.sheetId].sequenceEditor.selectedPropsByObject),h=(0,id.val)(s.graphEditorDims.height),f=(0,id.val)(s.scaledSpace.fromUnitSpace)(1),g=[];if(l)for(let[_,S]of Object.entries(l)){let C=a.getObject(_);if(!C)continue;let I=(0,id.val)(C.template.getMapOfValidSequenceTracks_forStudio());for(let[O,D]of Object.entries(S)){let A=eD(O),N=pf(I,A);N&&g.push(wv.default.createElement($le,{key:"graph-".concat(_,"-").concat(O),sheetObject:C,pathToProp:A,layoutP:s,trackId:N,color:D}))}}let b=(0,id.val)(s.rightDims.width);return wv.default.createElement(oue,{style:{width:b+"px",height:h+"px","--unitSpaceToScaledSpaceMultiplier":f,"--graphEditorVerticalSpace":"".concat((0,id.val)(s.graphEditorVerticalSpace.space))}},wv.default.createElement(kj,{layoutP:s,width:b,height:h}),wv.default.createElement(NV,{layoutP:s,height:h},wv.default.createElement(lue,{width:LD,height:h,viewBox:"0 0 ".concat(LD," ").concat(h)},wv.default.createElement("g",{style:{transform:"translate(".concat((0,id.val)(s.scaledSpace.leftPadding),"px, ").concat((0,id.val)(s.graphEditorDims.padding.top),"px)")}},g))))},[s]),cue=uue}),due,Yl,hue,pue,fue,mue,Aj,gue,vue,yue,bue,_ue,wue,xue,uDe=P(()=>{Me(),ed(),SR(),En(),due=Ut,Yl=X(Ne()),Ve(),zz(),TR(),zD(),QR(),nv(),Qie(),hue={label:{color:"#9a9a9a"}},fue=ae(_V)(pue||(pue=te([""]))),Aj=ae(wV)(mue||(mue=te([`
  display: flex;
  color: `,`;
  padding-right: 12px;
  align-items: center;
  justify-content: flex-end;
  box-sizing: border-box;
`])),hue.label.color),vue=ae.button(gue||(gue=te([`
  background: none;
  border: none;
  outline: none;
  display: flex;
  box-sizing: border-box;
  font-size: 14px;
  align-items: center;
  height: 100%;
  margin-left: 12px;
  color: `,`;

  &:not([disabled]):hover {
    color: white;
  }
`])),s=>s.isSelected?cC[s.graphEditorColor].iconColor:ff.offColor),yue=()=>Yl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 640 512"},Yl.default.createElement("g",{transform:"translate(0 100)"},Yl.default.createElement("path",{fill:"currentColor",d:"M368 32h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM208 88h-84.75C113.75 64.56 90.84 48 64 48 28.66 48 0 76.65 0 112s28.66 64 64 64c26.84 0 49.75-16.56 59.25-40h79.73c-55.37 32.52-95.86 87.32-109.54 152h49.4c11.3-41.61 36.77-77.21 71.04-101.56-3.7-8.08-5.88-16.99-5.88-26.44V88zm-48 232H64c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zM576 48c-26.84 0-49.75 16.56-59.25 40H432v72c0 9.45-2.19 18.36-5.88 26.44 34.27 24.35 59.74 59.95 71.04 101.56h49.4c-13.68-64.68-54.17-119.48-109.54-152h79.73c9.5 23.44 32.41 40 59.25 40 35.34 0 64-28.65 64-64s-28.66-64-64-64zm0 272h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"}))),_ue=ae.span(bue||(bue=te([`
  margin-right: 4px;
  `,`;

  `,`:hover & {
    color: #ccc;
  }
`])),hf,Aj),wue=({leaf:s})=>{var a;let l=EE(s.sheetObject.propsP,s.pathToProp),h=s.sheetObject,{controlIndicators:f}=Uz(l,h,s.propConf),g=Qn(()=>{let D=s.sheetObject.address,A=Jc(s.pathToProp);return(0,due.val)(de().atomP.historic.projects.stateByProjectId[D.projectId].stateBySheetId[D.sheetId].sequenceEditor.selectedPropsByObject[D.objectKey][A])},[s]),b=(0,Yl.useRef)(!1),_=typeof g=="string";b.current=_;let S=(0,Yl.useCallback)(()=>{let D=s.sheetObject.address;de().transaction(({stateEditors:A})=>{b.current?A.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removePropFromGraphEditor(B(F({},D),{pathToProp:s.pathToProp})):(A.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.addPropToGraphEditor(B(F({},D),{pathToProp:s.pathToProp})),A.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!0}))})},[s]),C=(a=s.propConf.label)!=null?a:s.pathToProp[s.pathToProp.length-1],I=!0,O=(0,Yl.useRef)(null);return Yie(O.current,s),Yl.default.createElement(fue,{depth:s.depth},Yl.default.createElement(Aj,{ref:O,isEven:s.n%2===0,style:{height:s.nodeHeight+"px"},isSelected:_===!0},Yl.default.createElement(_ue,null,C),f,Yl.default.createElement(vue,{onClick:S,isSelected:_===!0,graphEditorColor:g??"1",style:{opacity:1},disabled:!I},Yl.default.createElement(yue,null))))},xue=wue});function Ij(s,a){de().transaction(({stateEditors:l})=>{l.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.sequenceEditorCollapsableItems.set(B(F({},a.sheetAddress),{studioSheetItemKey:a.sheetItemKey,isCollapsed:s}))})}var Rj=P(()=>{Me()}),Jb,Dj,Sue,cDe=P(()=>{Jb=X(Ne()),QR(),uDe(),Rj(),Dj=s=>{let a="prop"+s.pathToProp[s.pathToProp.length-1];return s.shouldRender?s.type==="propWithChildren"?Jb.default.createElement(Sue,{leaf:s,key:a}):Jb.default.createElement(xue,{leaf:s,key:a}):Jb.default.createElement(Jb.default.Fragment,{key:a})},Sue=({leaf:s})=>Jb.default.createElement(ZR,{leaf:s,label:s.pathToProp[s.pathToProp.length-1],isCollapsed:s.isCollapsed,toggleCollapsed:()=>Ij(!s.isCollapsed,{sheetAddress:s.sheetObject.address,sheetItemKey:s.sheetItemKey})},s.children.map(a=>Dj(a)))}),Eue,Cue,Pue,dDe=P(()=>{Eue=X(Ne()),QR(),cDe(),Rj(),Me(),Cue=({leaf:s})=>Eue.default.createElement(ZR,{leaf:s,label:s.sheetObject.address.objectKey,isCollapsed:s.isCollapsed,toggleSelect:()=>{de().transaction(({stateEditors:a})=>{a.studio.historic.panels.outline.selection.set([s.sheetObject])})},toggleCollapsed:()=>Ij(!s.isCollapsed,{sheetAddress:s.sheetObject.address,sheetItemKey:s.sheetItemKey})},s.children.map(a=>Dj(a))),Pue=Cue}),Oj,Tue,Mue,hDe=P(()=>{En(),Oj=X(Ne()),dDe(),QR(),Rj(),Bte(),Tue=({leaf:s})=>Qn(()=>Oj.default.createElement(ZR,{leaf:s,label:s.sheet.address.sheetId,isCollapsed:s.isCollapsed,toggleCollapsed:()=>{Ij(!s.isCollapsed,{sheetAddress:s.sheet.address,sheetItemKey:s.sheetItemKey})}},s.children.map(a=>Oj.default.createElement(Pue,{key:"sheetObject-"+Nte(a.sheetObject),leaf:a}))),[s]),Mue=Tue}),Lj,VD,kue,Aue,Iue,Rue,Due,Oue,pDe=P(()=>{En(),Lj=Ut,VD=X(Ne()),Ve(),hDe(),Aue=ae.div(kue||(kue=te([`
  position: absolute;
  left: 0;
  overflow-x: visible;
`]))),Rue=ae.ul(Iue||(Iue=te([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),Due=({layoutP:s})=>Qn(()=>{let a=(0,Lj.val)(s.tree),l=(0,Lj.val)(s.leftDims.width);return VD.default.createElement(Aue,{style:{width:l+"px",top:a.top+"px"}},VD.default.createElement(Rue,null,VD.default.createElement(Mue,{leaf:a})))},[s]),Oue=Due}),Nj,Lue,Nue,Fue,Bue,fDe=P(()=>{Dr(),Mh(),En(),il(),Nj=X(Ne()),Ve(),iue(),Nue=ae.div(Lue||(Lue=te([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: hidden;
  background: `,`;
  pointer-events: none;
`])),()=>cd.rightBackground,Vu(.01,QS(1*.03,xb.panel.bg))),Fue=({layoutP:s})=>{let a=ir(s.rightDims.width),l=ir(s.panelDims.height);return Nj.default.createElement(Nue,{style:{width:a+"px"}},Nj.default.createElement(kj,{width:a,height:l,layoutP:s}))},Bue=Fue}),e_,Uue,zue,Vue,jue,mDe=P(()=>{En(),e_=X(Ne()),Ve(),pDe(),fDe(),hle(),Tse(),zue=ae.div(Uue||(Uue=te([`
  position: absolute;
  left: 0;
  right: 0;
`]))),Vue=({layoutP:s})=>{let a=ir(s.dopeSheetDims.height);return e_.default.createElement(zue,{style:{height:a+"px"}},e_.default.createElement(Bue,{layoutP:s}),e_.default.createElement(Pse,null,e_.default.createElement(Oue,{layoutP:s}),e_.default.createElement(dle,{layoutP:s})))},jue=Vue});function gDe(s,a,l){return Fj.prism.memo(s,()=>(0,Fj.prism)(a),l).getValue()}var Fj,vDe=P(()=>{Fj=Ut});function pi(s){return function(a,l){return s(a,l())}}function al(s){return Object.freeze({audience:xv(s,8)?"internal":xv(s,16)?"dev":"public",category:xv(s,4)?"troubleshooting":xv(s,2)?"todo":"general",level:xv(s,512)?512:xv(s,256)?256:xv(s,128)?128:64})}function xv(s,a){return(s&a)===a}function fi(s,a){return((a&32)===32?!0:(a&16)===16?s.dev:(a&8)===8?s.internal:!1)&&s.min<=a}function Hue(s=console,a={}){let l=B(F({},sd),{includes:F({},sd.includes)}),h={styled:_De.bind(l,s),noStyle:xDe.bind(l,s)},f=bDe.bind(l);function g(){return l.loggingConsoleStyle&&l.loggerConsoleStyle?h.styled:h.noStyle}return l.create=g(),{configureLogger(b){var _;b==="console"?(l.loggerConsoleStyle=sd.loggerConsoleStyle,l.create=g()):b.type==="console"?(l.loggerConsoleStyle=(_=b.style)!=null?_:sd.loggerConsoleStyle,l.create=g()):b.type==="keyed"?(l.creatExt=S=>b.keyed(S.names),l.create=f):b.type==="named"&&(l.creatExt=yDe.bind(null,b.named),l.create=f)},configureLogging(b){var _,S,C,I,O;l.includes.dev=(_=b.dev)!=null?_:sd.includes.dev,l.includes.internal=(S=b.internal)!=null?S:sd.includes.internal,l.includes.min=(C=b.min)!=null?C:sd.includes.min,l.include=(I=b.include)!=null?I:sd.include,l.loggingConsoleStyle=(O=b.consoleStyle)!=null?O:sd.loggingConsoleStyle,l.create=g()},getLogger(){return l.create({names:[]})}}}function yDe(s,a){let l=[];for(let{name:h,key:f}of a.names)l.push(f==null?h:"".concat(h," (").concat(f,")"));return s(l)}function bDe(s){let a=F(F({},this.includes),this.include(s)),l=this.filtered,h=this.named.bind(this,s),f=this.creatExt(s),g=fi(a,524),b=fi(a,522),_=fi(a,521),S=fi(a,529),C=fi(a,545),I=fi(a,265),O=fi(a,268),D=fi(a,273),A=fi(a,289),N=fi(a,137),L=fi(a,145),V=fi(a,73),G=fi(a,81),$=g?f.error.bind(f,Ba._hmm):l.bind(s,524),Y=b?f.error.bind(f,Ba._todo):l.bind(s,522),re=_?f.error.bind(f,Ba._error):l.bind(s,521),ne=S?f.error.bind(f,Ba.errorDev):l.bind(s,529),le=C?f.error.bind(f,Ba.errorPublic):l.bind(s,545),Ce=O?f.warn.bind(f,Ba._kapow):l.bind(s,268),ve=I?f.warn.bind(f,Ba._warn):l.bind(s,265),we=D?f.warn.bind(f,Ba.warnDev):l.bind(s,273),Le=A?f.warn.bind(f,Ba.warnPublic):l.bind(s,273),lt=N?f.debug.bind(f,Ba._debug):l.bind(s,137),ue=L?f.debug.bind(f,Ba.debugDev):l.bind(s,145),Oe=V?f.trace.bind(f,Ba._trace):l.bind(s,73),Q=G?f.trace.bind(f,Ba.traceDev):l.bind(s,81),We={_hmm:$,_todo:Y,_error:re,errorDev:ne,errorPublic:le,_kapow:Ce,_warn:ve,warnDev:we,warnPublic:Le,_debug:lt,debugDev:ue,_trace:Oe,traceDev:Q,lazy:{_hmm:g?pi($):$,_todo:b?pi(Y):Y,_error:_?pi(re):re,errorDev:S?pi(ne):ne,errorPublic:C?pi(le):le,_kapow:O?pi(Ce):Ce,_warn:I?pi(ve):ve,warnDev:D?pi(we):we,warnPublic:A?pi(Le):Le,_debug:N?pi(lt):lt,debugDev:L?pi(ue):ue,_trace:V?pi(Oe):Oe,traceDev:G?pi(Q):Q},named:h,utilFor:{internal(){return{debug:We._debug,error:We._error,warn:We._warn,trace:We._trace,named(Lt,Ie){return We.named(Lt,Ie).utilFor.internal()}}},dev(){return{debug:We.debugDev,error:We.errorDev,warn:We.warnDev,trace:We.traceDev,named(Lt,Ie){return We.named(Lt,Ie).utilFor.dev()}}},public(){return{error:We.errorPublic,warn:We.warnPublic,debug(Lt,Ie){We._warn('(public "debug" filtered out) '.concat(Lt),Ie)},trace(Lt,Ie){We._warn('(public "trace" filtered out) '.concat(Lt),Ie)},named(Lt,Ie){return We.named(Lt,Ie).utilFor.public()}}}}};return We}function _De(s,a){let l=F(F({},this.includes),this.include(a)),h=[],f="";for(let S=0;S<a.names.length;S++){let{name:C,key:I}=a.names[S];if(f+=" %c".concat(C),h.push(this.style.css(C)),I!=null){let O="%c#".concat(I);f+=O,h.push(this.style.css(O))}}let g=this.filtered,b=this.named.bind(this,a),_=[f,...h];return Gue(g,a,l,s,_,wDe(_),b)}function wDe(s){let a=s.slice(0);for(let l=1;l<a.length;l++)a[l]+=";background-color:#e0005a;padding:2px;color:white";return a}function xDe(s,a){let l=F(F({},this.includes),this.include(a)),h="";for(let _=0;_<a.names.length;_++){let{name:S,key:C}=a.names[_];h+=" ".concat(S),C!=null&&(h+="#".concat(C))}let f=this.filtered,g=this.named.bind(this,a),b=[h];return Gue(f,a,l,s,b,b,g)}function Gue(s,a,l,h,f,g,b){let _=fi(l,524),S=fi(l,522),C=fi(l,521),I=fi(l,529),O=fi(l,545),D=fi(l,265),A=fi(l,268),N=fi(l,273),L=fi(l,289),V=fi(l,137),G=fi(l,145),$=fi(l,73),Y=fi(l,81),re=_?h.error.bind(h,...f):s.bind(a,524),ne=S?h.error.bind(h,...f):s.bind(a,522),le=C?h.error.bind(h,...f):s.bind(a,521),Ce=I?h.error.bind(h,...f):s.bind(a,529),ve=O?h.error.bind(h,...f):s.bind(a,545),we=A?h.warn.bind(h,...g):s.bind(a,268),Le=D?h.warn.bind(h,...f):s.bind(a,265),lt=N?h.warn.bind(h,...f):s.bind(a,273),ue=L?h.warn.bind(h,...f):s.bind(a,273),Oe=V?h.info.bind(h,...f):s.bind(a,137),Q=G?h.info.bind(h,...f):s.bind(a,145),We=$?h.debug.bind(h,...f):s.bind(a,73),Lt=Y?h.debug.bind(h,...f):s.bind(a,81),Ie={_hmm:re,_todo:ne,_error:le,errorDev:Ce,errorPublic:ve,_kapow:we,_warn:Le,warnDev:lt,warnPublic:ue,_debug:Oe,debugDev:Q,_trace:We,traceDev:Lt,lazy:{_hmm:_?pi(re):re,_todo:S?pi(ne):ne,_error:C?pi(le):le,errorDev:I?pi(Ce):Ce,errorPublic:O?pi(ve):ve,_kapow:A?pi(we):we,_warn:D?pi(Le):Le,warnDev:N?pi(lt):lt,warnPublic:L?pi(ue):ue,_debug:V?pi(Oe):Oe,debugDev:G?pi(Q):Q,_trace:$?pi(We):We,traceDev:Y?pi(Lt):Lt},named:b,utilFor:{internal(){return{debug:Ie._debug,error:Ie._error,warn:Ie._warn,trace:Ie._trace,named(Re,Ke){return Ie.named(Re,Ke).utilFor.internal()}}},dev(){return{debug:Ie.debugDev,error:Ie.errorDev,warn:Ie.warnDev,trace:Ie.traceDev,named(Re,Ke){return Ie.named(Re,Ke).utilFor.dev()}}},public(){return{error:Ie.errorPublic,warn:Ie.warnPublic,debug(Re,Ke){Ie._warn('(public "debug" filtered out) '.concat(Re),Ke)},trace(Re,Ke){Ie._warn('(public "trace" filtered out) '.concat(Re),Ke)},named(Re,Ke){return Ie.named(Re,Ke).utilFor.public()}}}}};return Ie}var Ba,sd,Wue=P(()=>{Ba={_hmm:al(524),_todo:al(522),_error:al(521),errorDev:al(529),errorPublic:al(545),_kapow:al(268),_warn:al(265),warnDev:al(273),warnPublic:al(289),_debug:al(137),debugDev:al(145),_trace:al(73),traceDev:al(81)},sd={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(s,a,l){return this.create({names:[...s.names,{name:a,key:l}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(s){if(s.length<5)return s;let a=s.replace(this.collapseOnRE,"");return this.cssMemo.has(a)||this.cssMemo.set(a,this.css(s)),a},css(s){var a,l,h,f;let g=this.cssMemo.get(s);if(g)return g;let b="color:".concat((l=(a=this.color)==null?void 0:a.call(this,s))!=null?l:"hsl(".concat((s.charCodeAt(0)+s.charCodeAt(s.length-1))%360,", 100%, 60%)"));return(h=this.bold)!=null&&h.test(s)&&(b+=";font-weight:600"),(f=this.italic)!=null&&f.test(s)&&(b+=";font-style:italic"),this.cssMemo.set(s,b),b}}}}),Bj,jD,HD=P(()=>{Wue(),Wue(),Bj=Hue(console,{_debug:function(){},_error:function(){}}),Bj.configureLogging({dev:!0,min:64}),jD=Bj.getLogger().named("Theatre.js (default logger)").utilFor.dev()}),Cf,Sv,$ue,SDe=P(()=>{yh(),Cf=Ut,HD(),dh(),Sv=28,$ue=(s,a)=>{var l;Cf.prism.ensurePrism();let h=!0,f=HI+Sv,g=0,b=a.atomP.ahistoric.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId].sequence.collapsableItems,_=b.byId[Ls.forSheet()].isCollapsed,S=(l=(0,Cf.pointerToPrism)(_).getValue())!=null?l:!1,C={type:"sheet",isCollapsed:S,sheet:s,children:[],sheetItemKey:Ls.forSheet(),shouldRender:h,top:HI,depth:0,n:g,nodeHeight:h?Sv:0,heightIncludingChildren:-1};g+=1;for(let L of Object.values((0,Cf.val)(s.objectsP)))L&&I(L,C.children,C.depth+1,!S);C.heightIncludingChildren=f-C.top;function I(L,V,G,$){var Y;let re=(0,Cf.val)(L.template.getMapOfValidSequenceTracks_forStudio()),ne=(0,Cf.val)(L.template.configPointer);if(Object.keys(re).length===0)return;let le=b.byId[Ls.forSheetObject(L)].isCollapsed,Ce=(Y=(0,Cf.pointerToPrism)(le).getValue())!=null?Y:!1,ve={type:"sheetObject",isCollapsed:Ce,sheetItemKey:Ls.forSheetObject(L),shouldRender:$,top:f,children:[],depth:G,n:g,sheetObject:L,nodeHeight:$?Sv:0,heightIncludingChildren:-1};V.push(ve),$&&(g+=1,f+=ve.nodeHeight),O(L,re,[],ne,ve.children,G+1,$&&!Ce),ve.heightIncludingChildren=f-ve.top}function O(L,V,G,$,Y,re,ne){for(let[le,Ce]of Object.entries(V)){let ve=$.props[le];D(L,Ce,[...G,le],ve,Y,re,ne)}}function D(L,V,G,$,Y,re,ne){$.type==="compound"?A(L,V,$,G,$,Y,re,ne):$.type==="enum"?jD.warn("Prop type enum is not yet supported in the sequence editor"):N(L,V,G,$,Y,re,ne)}function A(L,V,G,$,Y,re,ne,le){var Ce;let ve=b.byId[Ls.forSheetObjectProp(L,$)].isCollapsed,we=(Ce=(0,Cf.pointerToPrism)(ve).getValue())!=null?Ce:!1,Le={type:"propWithChildren",isCollapsed:we,propConf:G,pathToProp:$,sheetItemKey:Ls.forSheetObjectProp(L,$),sheetObject:L,shouldRender:le,top:f,children:[],nodeHeight:le?Sv:0,heightIncludingChildren:-1,depth:ne,trackMapping:V,n:g};re.push(Le),le&&(f+=Le.nodeHeight,g+=1),O(L,V,$,Y,Le.children,ne+1,le&&!we),Le.heightIncludingChildren=f-Le.top}function N(L,V,G,$,Y,re,ne){let le={type:"primitiveProp",propConf:$,depth:re,sheetItemKey:Ls.forSheetObjectProp(L,G),sheetObject:L,pathToProp:G,shouldRender:ne,top:f,nodeHeight:ne?Sv:0,heightIncludingChildren:ne?Sv:0,trackId:V,n:g};Y.push(le),g+=1,f+=le.nodeHeight}return C}});function EDe(s,a){let l=de(),h=l.atomP.ahistoric.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId],f=l.atomP.historic.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId];return(0,Ua.prism)(()=>{var g;let b=gDe("tree",()=>$ue(s,l),[]),_=(0,Ua.val)(a),S=(0,Ua.val)(l.atomP.historic.panels.sequenceEditor.graphEditor),C=(0,Ua.val)(f.sequenceEditor.selectedPropsByObject),I=!!C&&Object.keys(C).length>0,{leftDims:O,rightDims:D,graphEditorDims:A,dopeSheetDims:N,horizontalScrollbarDims:L}=Ua.prism.memo("leftDims",()=>{var Le;let lt={width:Math.floor(_.width*Kue),height:_.height,screenX:_.screenX,screenY:_.screenY},ue={width:_.width-lt.width,height:_.height,screenX:_.screenX+lt.width,screenY:_.screenY},Oe=I&&(S==null?void 0:S.isOpen)===!0,Q=Math.floor((Oe?_i((Le=S==null?void 0:S.height)!=null?Le:.5,.1,.7):0)*_.heightWithoutBorder),We=0+Q,Lt=_.height-We,Ie={width:_.width,height:Lt,screenX:_.screenX,screenY:_.screenY},Re={isAvailable:I,isOpen:Oe,width:ue.width,height:Q,screenX:_.screenX,screenY:_.screenY+Lt,padding:{top:20,bottom:20}};return{leftDims:lt,rightDims:ue,graphEditorDims:Re,dopeSheetDims:Ie,horizontalScrollbarDims:{bottom:0}}},[_,S,I]),V=Ua.prism.memo("graphEditorVerticalSpace",()=>{let Le=A.height-A.padding.top-A.padding.bottom;return{space:Le,fromExtremumSpace(lt){return lt*Le},toExtremumSpace(lt){return lt/Le}}},[A]),[G,$]=Ua.prism.state("isSeeking",!1),Y={isSeeking:G,setIsSeeking:$},re={},ne=(g=(0,Ua.val)(h.sequence.clippedSpaceRange))!=null?g:Xue,le=Ua.prism.memo("scaledSpace",()=>{let Le=ne.end-ne.start,lt=D.width,ue=Le/lt,Oe=lt/Le;return{fromUnitSpace(Q){return Q*Oe},toUnitSpace(Q){return Q*ue},leftPadding:10}},[ne,D.width]),Ce=Ua.prism.memo("setClippedSpaceRange",()=>function(Le){l.transaction(({stateEditors:lt})=>{let ue=F({},Le);if(ue.end<=ue.start&&(ue.end=ue.start+1),ue.start<0){let Oe=ue.end-ue.start;ue.start=0,ue.end=Oe}lt.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.clippedSpaceRange.set(B(F({},s.address),{range:ue}))})},[]),ve=Ua.prism.memo("clippedSpace",()=>({range:ne,width:D.width,fromUnitSpace(Le){return le.fromUnitSpace(Le-ne.start)+le.leftPadding},toUnitSpace(Le){return le.toUnitSpace(Le-le.leftPadding)+ne.start},setRange:Ce}),[ne,D.width,le,Ce]),we=Ua.prism.memo("selection.current",()=>new Ua.Atom({}),[]);return bV("finalAtom",{sheet:s,tree:b,panelDims:_,leftDims:O,rightDims:D,dopeSheetDims:N,horizontalScrollbarDims:L,seeker:Y,unitSpace:re,scaledSpace:le,clippedSpace:ve,graphEditorDims:A,graphEditorVerticalSpace:V,selectionAtom:we}).pointer})}var Ua,Kue,Xue,CDe=P(()=>{Me(),vDe(),qie(),Ua=Ut,SDe(),di(),Kue=.2,Xue={start:0,end:10}});function PDe(s){let{fullSecondStampsContainer:a,sequencePositionFormatter:l,snapToGrid:h,unitSpaceToClippedSpace:f}=s,g="";Kle(s,(b,_)=>{let S=h(b),C=f(S);_?g+=que(l.formatFullUnitForGrid(S),C,"full-unit"):g+=que(l.formatSubUnitForGrid(S),C,"sub-unit")}),a.innerHTML=g}function que(s,a,l){return'<span class="'.concat(l,'" style="transform: translate3d(').concat(a.toFixed(1),'px, -50%, 0);">').concat(s,"</span>")}var Ev,Cv,Yue,Zue,Pf,Que,Jue,ece,tce,nce,rce,ice=P(()=>{Ev=Ut,il(),Cv=X(Ne()),Ve(),qle(),Me(),Zue=ae.div(Yue||(Yue=te([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),Pf={fullUnitStampColor:"#6a6a6a",stampFontSize:"10px",get subUnitStampColor(){return QS(.2,Pf.fullUnitStampColor)}},Jue=ae.div(Que||(Que=te([`
  position: absolute;
  top: 0;
  height: 100%;
  left: 0;
  overflow: hidden;
  z-index: 2;
  will-change: transform;
  pointer-events: none;
`]))),tce=ae.div(ece||(ece=te([`
  position: absolute;
  top: 0;
  left: 0;

  & > span {
    position: absolute;
    display: block;
    top: 9px;
    left: -10px;
    color: `,`;
    text-align: center;
    font-size: `,`;
    width: 20px;

    &.full-unit {
      color: `,`;
    }

    &.sub-unit {
      color: `,`;
    }
  }

  pointer-events: none;
`])),Pf.fullUnitStampColor,Pf.stampFontSize,Pf.fullUnitStampColor,Pf.subUnitStampColor),nce=({layoutP:s,width:a})=>{let l=(0,Cv.useRef)(null),[h,f]=(0,Cv.useState)(null);return(0,Cv.useLayoutEffect)(()=>{if(h)return(0,Ev.prism)(()=>{let g=(0,Ev.val)(s.sheet).getSequence();return{fullSecondStampsContainer:h,clippedSpaceRange:(0,Ev.val)(s.clippedSpace.range),clippedSpaceWidth:(0,Ev.val)(s.clippedSpace.width),unitSpaceToClippedSpace:(0,Ev.val)(s.clippedSpace.fromUnitSpace),leftPadding:(0,Ev.val)(s.scaledSpace.leftPadding),fps:g.subUnitsPerUnit,sequencePositionFormatter:g.positionFormatter,snapToGrid:b=>g.closestGridPosition(b)}}).onChange(de().ticker,PDe,!0)},[h,a,s]),Cv.default.createElement(Zue,{ref:l,style:{width:a+"px"}},Cv.default.createElement(Jue,{style:{width:a+"px"}},Cv.default.createElement(tce,{ref:f})))},rce=nce});function TDe(s){let[a,l]=(0,Uj.useState)(!1);return(0,Uj.useEffect)(()=>{if(l(!1),!s)return;let h=g=>{g.target===s?l(!0):l(!1)},f=()=>{l(!1)};return s.addEventListener("mouseenter",h),s.addEventListener("mousemove",h),s.addEventListener("mouseleave",f),()=>{l(!1),s.removeEventListener("mouseenter",h),s.removeEventListener("mousemove",h),s.removeEventListener("mouseleave",f)}},[s]),a}var Uj,MDe=P(()=>{Uj=X(Ne())});function kDe(s,a){let l=0,[h,f]=s,[g,b]=a;return f-h>b-g?[g,b]:(h<g&&(l=0-h),f>b&&(l=b-f),[h+l,f+l])}var od,Tf,Cs,zj,sce,GD,oce,ace,lce=P(()=>{od=Ut,En(),Dr(),Me(),Tv(),la(),Es(),Rr(),Tf=X(Ne()),Ve(),fo(),Cs={enabled:{backgroundColor:"#2C2F34",stroke:"#646568"},disabled:{backgroundColor:"#282a2cc5",stroke:"#595a5d"},hover:{backgroundColor:"#34373D",stroke:"#C8CAC0"},dragging:{backgroundColor:"#3F444A",stroke:"#C8CAC0"},thumbWidth:9,hitZoneWidth:26,rangeStripMinWidth:30},zj=1e3,GD=ae.div(sce||(sce=te([`
  position: absolute;
  height: `,`px;
  background-color: `,`;
  cursor: grab;
  top: 0;
  left: 0;
  width: `,`px;
  transform-origin: left top;
  &:hover {
    background-color: `,`;
  }
  &.dragging {
    background-color: `,`;
    cursor: grabbing !important;
  }
  `,`;

  /* covers the one pixel space between the focus range strip and the top strip
  of the sequence editor panel, which would have caused that one pixel to act
  like a panel drag zone */
  &:after {
    display: block;
    content: ' ';
    position: absolute;
    bottom: -1px;
    height: 1px;
    left: 0;
    right: 0;
    background: transparent;
    pointer-events: normal;
    z-index: -1;
  }
`])),()=>ld-1,s=>s.enabled?Cs.enabled.backgroundColor:Cs.disabled.backgroundColor,zj,Cs.hover.backgroundColor,Cs.dragging.backgroundColor,kr),oce=({layoutP:s})=>{let a=(0,Tf.useMemo)(()=>(0,od.prism)(()=>{let{projectId:C,sheetId:I}=(0,od.val)(s.sheet).address;return(0,od.val)(de().atomP.ahistoric.projects.stateByProjectId[C].stateBySheetId[I].sequence.focusRange)}),[s]),[l,h]=xr(null),[f]=aa(h,{menuItems:()=>{let C=(0,od.val)(s.sheet),I=a.getValue();return[{label:"Delete focus range",callback:()=>{de().tempTransaction(({stateEditors:O})=>{O.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.unset(F({},C.address))}).commit()}},{label:I!=null&&I.enabled?"Disable focus range":"Enable focus range",callback:()=>{I!==void 0&&de().tempTransaction(({stateEditors:O})=>{O.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(B(F({},C.address),{range:I.range,enabled:!I.enabled}))}).commit()}}]}}),g=ir(s.scaledSpace.toUnitSpace),b=ir(s.sheet),_=(0,Tf.useMemo)(()=>{let C,I;return{debugName:"FocusRangeStrip",onDragStart(O){let D,A=a.getValue();if(!A)return!1;let N=A.range.start,L=A.range.end,V=!1,G=(0,od.val)(s.sheet).getSequence();return{onDrag($){if(A=a.getValue(),A){V=!0;let Y=g($),re=N+Y,ne=L+Y;ne<re&&(ne=re),[C,I]=kDe([re,ne],[0,G.length]).map(le=>G.closestGridPosition(le)),D&&D.discard(),D=de().tempTransaction(({stateEditors:le})=>{var Ce;le.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(B(F({},b.address),{range:{start:C,end:I},enabled:(Ce=A==null?void 0:A.enabled)!=null?Ce:!0}))})}},onDragEnd(){A&&(V&&D!==void 0?D.commit():D&&D.discard())}}},lockCSSCursorTo:"grabbing"}},[b,g]),[S]=Ui(h,_);return xh(S,-1),Qn(()=>{let C=a.getValue(),I=(C==null?void 0:C.range)||{start:0,end:0},O=(0,od.val)(s.clippedSpace.fromUnitSpace)(I.start),D=(0,od.val)(s.clippedSpace.fromUnitSpace)(I.end),A,N;return O<0&&(O=0),D>(0,od.val)(s.clippedSpace.width)&&(D=(0,od.val)(s.clippedSpace.width)),O>D?(N=0,A=0):(N=O,A=(D-O)/zj),C?Tf.default.createElement(Tf.default.Fragment,null,f,Tf.default.createElement(GD,{id:"range-strip",enabled:C.enabled,className:"".concat(S?"dragging":""," ").concat(C.enabled?"enabled":""),ref:l,style:{transform:"translateX(".concat(N,"px) scale(").concat(A,", 1)")}})):Tf.default.createElement(Tf.default.Fragment,null)},[s,l,a,f,S])},ace=oce}),Mf,Ch,uce,cce,dce,hce,pce,fce,mce,Vj,ADe=P(()=>{Mf=Ut,En(),Me(),Tv(),sl(),Es(),Rr(),Ch=X(Ne()),Ve(),fo(),lce(),qu(),cce=ae.div(uce||(uce=te([`
  position: absolute;
  top: 0;
  // the right handle has to be pulled back by its width since its right side indicates its position, not its left side
  left: `,`px;
  transform-origin: left top;
  width: `,`px;
  height: `,`px;
  z-index: 3;

  --bg: `,`;

  stroke: `,`;
  user-select: none;

  cursor: `,`;

  // no pointer events unless pointer-root is in normal mode _and_ the
  // focus range is enabled
  #pointer-root & {
    pointer-events: none;
  }

  #pointer-root.normal & {
    pointer-events: auto;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.dragging {
    pointer-events: none !important;
  }

  // highlight the handle if it's hovered, or the whole strip is hovverd
  `,`:hover ~ &, &:hover {
    --bg: `,`;
    stroke: `,`;
  }

  // highlight the handle when it's being dragged or the whole strip is being dragged.
  // using dragging.dragging to give this selector priority, as it seems to be overridden
  // by the hover selector above
  &.dragging,
  `,`.dragging.dragging ~ & {
    --bg: `,`;
    stroke: `,`;
  }

  #pointer-root.draggingPositionInSequenceEditor &:hover {
    --bg: `,`;
    stroke: #40aaa4;
  }

  background-color: var(--bg);

  // a larger hit zone
  &:before {
    display: block;
    content: ' ';
    position: absolute;
    inset: -8px;
  }
`])),s=>s.type==="start"?0:-Cs.thumbWidth,Cs.thumbWidth,()=>ld-1,({enabled:s})=>s?Cs.enabled.backgroundColor:Cs.disabled.backgroundColor,Cs.enabled.stroke,s=>s.type==="start"?"w-resize":"e-resize",ph,()=>GD,Cs.hover.backgroundColor,Cs.hover.stroke,()=>GD,Cs.dragging.backgroundColor,Cs.dragging.stroke,Cs.dragging.backgroundColor),hce=ae.div(dce||(dce=te([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    var(--bg) 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),s=>s.type==="start"?90:-90,s=>s.type==="start"?Cs.thumbWidth:-Cs.thumbWidth+1),fce=ae.div(pce||(pce=te([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    `,` 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),s=>s.type==="start"?-90:90,()=>dC.backgroundColor,s=>s.type==="start"?-12:Cs.thumbWidth),mce=({layoutP:s,thumbType:a})=>{var l;let[h,f]=xr(null),g=(0,Ch.useMemo)(()=>(0,Mf.prism)(()=>{let{projectId:C,sheetId:I}=(0,Mf.val)(s.sheet).address;return(0,Mf.val)(de().atomP.ahistoric.projects.stateByProjectId[C].stateBySheetId[I].sequence.focusRange)}),[s]),b=(0,Ch.useMemo)(()=>({debugName:"FocusRangeThumb",onDragStart(){let C,I,O=(0,Mf.val)(s.sheet),D={start:0,end:O.getSequence().length},A=g.getValue()||{range:D,enabled:!1},N=A.enabled,L=A.range[a],V=(0,Mf.val)(s.scaledSpace.toUnitSpace),G=V(Cs.rangeStripMinWidth);return{onDrag($,Y,re){var ne;let le,Ce=ua.checkIfMouseEventSnapToPos(re,{ignore:f});if(Ce==null){let we=V($);le=L+we}else le=Ce;I=((ne=g.getValue())==null?void 0:ne.range)||D,a==="start"?le=Math.max(Math.min(le,I.end-G),0):le=Math.min(Math.max(le,I.start+G),O.getSequence().length);let ve=O.getSequence().closestGridPosition(le);C!==void 0&&C.discard(),C=de().tempTransaction(({stateEditors:we})=>{we.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(B(F({},O.address),{range:B(F({},I),{[a]:ve}),enabled:N}))})},onDragEnd($){$?C==null||C.commit():C==null||C.discard()}}}}),[s]),[_]=Ui(f,b);Gl(_,"draggingPositionInSequenceEditor",a==="start"?"w-resize":"e-resize");let S=ir(g);return xh(_,(l=S==null?void 0:S.range[a])!=null?l:0),Qn(()=>{let C=g.getValue();if(!C)return null;let{enabled:I}=C,O=C.range[a],D=(0,Mf.val)(s.clippedSpace.fromUnitSpace)(O);return(D<0||(0,Mf.val)(s.clippedSpace.width)<D)&&(D=-1e4),Ch.default.createElement(cce,B(F(F({ref:h},ua.includePositionSnapAttrs(O)),td(O)),{className:"".concat(_&&"dragging"," ").concat(I&&"enabled"),enabled:I,type:a,style:{transform:"translate3d(".concat(D,"px, 0, 0)")}}),Ch.default.createElement(hce,{type:a,enabled:I}),Ch.default.createElement(fce,{type:a}),Ch.default.createElement("svg",{viewBox:"0 0 9 18",xmlns:"http://www.w3.org/2000/svg"},Ch.default.createElement("line",{x1:"4",y1:"6",x2:"4",y2:"12"}),Ch.default.createElement("line",{x1:"6",y1:"6",x2:"6",y2:"12"})))},[s,h,g,_])},Vj=mce});function IDe(s,a){let[l,h]=(0,ad.useState)("none");return Gl(l!=="none","dragging",l==="creating"?"ew-resize":"move"),(0,ad.useMemo)(()=>{let f=()=>({debugName:"FocusRangeZone/focusRangeCreationGestureHandlers",onDragStart(b){let _,S=(0,Pv.val)(s.clippedSpace.toUnitSpace),C=(0,Pv.val)(s.scaledSpace.toUnitSpace),I=(0,Pv.val)(s.sheet),O=I.getSequence(),D=b.target.getBoundingClientRect(),A=S(b.clientX-D.left),N=C(Cs.rangeStripMinWidth);return{onDrag(L){let V=C(L),G=A,$=A+V;[G,$]=[_i(G,0,O.length),_i($,0,O.length)].map(Y=>O.closestGridPosition(Y)),$<G?[G,$]=[Math.max(Math.min($,G-N),0),G]:L>0&&($=Math.min(Math.max($,G+N),O.length)),_&&_.discard(),_=de().tempTransaction(({stateEditors:Y})=>{Y.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(B(F({},I.address),{range:{start:G,end:$},enabled:!0}))})},onDragEnd(L){L&&_!==void 0?_.commit():_&&_.discard()}}},lockCSSCursorTo:"ew-resize"}),g=()=>({debugName:"FocusRangeZone/panelMoveGestureHandlers",onDragStart(){let b,_=a.current,S=a.current.addBoundsHighlightLock();return{onDrag(C,I){let O=B(F({},_.dims),{top:_i(_.dims.top+I,0,window.innerHeight-jc),left:_i(_.dims.left+C,-_.dims.width+jc,window.innerWidth-jc)}),D=XR(O,{width:window.innerWidth,height:window.innerHeight});b==null||b.discard(),b=de().tempTransaction(({stateEditors:A})=>{A.studio.historic.panelPositions.setPanelPosition({position:D,panelId:_.panelId})})},onDragEnd(C){S(),C?b==null||b.commit():b==null||b.discard()}}},lockCSSCursorTo:"move"});return{debugName:"FocusRangeZone",onDragStart(b){let[_,S]=b.shiftKey?["creating",f().onDragStart(b)]:["moving-panel",g().onDragStart(b)];return h(_),S===!1?!1:{onDrag(C,I,O,D,A){S.onDrag(C,I,O,D,A)},onDragEnd(C){var I;h("none"),(I=S.onDragEnd)==null||I.call(S,C)}}}}},[s,a])}var Pv,ad,gce,vce,yce,bce,RDe=P(()=>{Pv=Ut,En(),Me(),Gb(),Tv(),sl(),Es(),MDe(),dse(),Rr(),di(),ad=X(Ne()),Ve(),lce(),ADe(),dh(),vce=ae.div(gce||(gce=te([`
  position: absolute;
  height: `,`px;
  left: 0;
  right: 0;
  box-sizing: border-box;
  /* Use the "grab" cursor if the shift key is up, which is the one used on the top strip of the sequence editor */
  cursor: `,`;
`])),()=>ld,s=>s.isShiftDown?"ew-resize":"move"),yce=({layoutP:s})=>{let[a,l]=xr(null),h=Hb(),f=(0,ad.useRef)(h);f.current=h;let g=(0,ad.useMemo)(()=>(0,Pv.prism)(()=>{let{projectId:S,sheetId:C}=(0,Pv.val)(s.sheet).address;return(0,Pv.val)(de().atomP.ahistoric.projects.stateByProjectId[S].stateBySheetId[C].sequence.focusRange)}),[s]);Ui(l,IDe(s,f));let b=use("Shift"),_=TDe(l);return(0,ad.useEffect)(()=>{if(!b&&_)return f.current.addBoundsHighlightLock()},[!b&&_]),Qn(()=>ad.default.createElement(vce,{ref:a,isShiftDown:b},ad.default.createElement(ace,{layoutP:s}),ad.default.createElement(Vj,{thumbType:"start",layoutP:s}),ad.default.createElement(Vj,{thumbType:"end",layoutP:s})),[s,g,b])},bce=yce}),t_,ld,dC,_ce,wce,xce,Sce,Tv=P(()=>{En(),t_=X(Ne()),Ve(),ice(),fo(),Dr(),RDe(),ld=18,dC={backgroundColor:"#1f2120eb",borderColor:"#1c1e21"},wce=ae.div(_ce||(_ce=te([`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border-bottom: 1px solid `,`;
  `,`;
`])),ld,dC.backgroundColor,dC.borderColor,kr),xce=({layoutP:s})=>{let a=ir(s.rightDims.width);return t_.default.createElement(t_.default.Fragment,null,t_.default.createElement(wce,F({},td("hide")),t_.default.createElement(rce,{layoutP:s,width:a,height:ld}),t_.default.createElement(bce,{layoutP:s})))},Sce=xce}),Mv,Ece,Cce,Pce,Tce,Mce,kce,Ace,Ice,DDe=P(()=>{Mv=X(Ne()),Ve(),En(),Me(),W4(),nv(),Ece=s=>isFinite(s)&&s>0,Pce=ae.div(Cce||(Cce=te([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),Mce=ae.div(Tce||(Tce=te([`
  `,`;
  white-space: nowrap;
`])),hf),kce=({deltaX:s})=>s*.25,Ace=({layoutP:s})=>{let a=ir(s.sheet),l=(0,Mv.useMemo)(()=>{let f;return{temporarilySetValue(g){f&&(f.discard(),f=void 0),f=de().tempTransaction(({stateEditors:b})=>{b.coreByProject.historic.sheetsById.sequence.setLength(B(F({},a.address),{length:g}))})},discardTemporaryValue(){f&&(f.discard(),f=void 0)},permanentlySetValue(g){f&&(f.discard(),f=void 0),de().transaction(({stateEditors:b})=>{b.coreByProject.historic.sheetsById.sequence.setLength(B(F({},a.address),{length:g}))})}}},[s,a]),h=(0,Mv.useRef)(null);return(0,Mv.useLayoutEffect)(()=>{h.current.focus()},[]),Qn(()=>{let f=a.getSequence().length;return Mv.default.createElement(Pce,null,Mv.default.createElement(Mce,null,"Sequence length"),Mv.default.createElement(QI,B(F({value:f},l),{isValid:Ece,inputRef:h,nudge:kce})))},[a,l,h])},Ice=Ace});function ODe(s,a){let l=(0,za.useRef)(a);l.current=a;let h=(0,za.useMemo)(()=>({debugName:"LengthIndicator/useDragBulge",lockCSSCursorTo:"ew-resize",onDragStart(g){let b,_=l.current,S=(0,kv.val)(l.current.layoutP.sheet),C=S.getSequence().length,I=(0,kv.val)(_.layoutP.scaledSpace.toUnitSpace);return{onDrag(O,D,A){let N=I(O);b&&(b.discard(),b=void 0),b=de().tempTransaction(({stateEditors:L})=>{L.coreByProject.historic.sheetsById.sequence.setLength(B(F({},S.address),{length:C+N}))})},onDragEnd(O){O?b&&b.commit():b&&b.discard()}}}}),[]),[f]=Ui(s,h);return xh(f,-1),[f]}var kv,za,jj,hC,Rce,kf,Dce,Oce,Lce,Nce,Fce,Bce,Uce,zce,Vce,jce,Hce,LDe=P(()=>{En(),kv=Ut,za=X(Ne()),Ve(),Mh(),Tv(),Rr(),Es(),Me(),Kc(),fo(),Ib(),DDe(),Dr(),qc(),jj=1e3,hC={stripNormal:"#0000006c",stripActive:"#000000"},kf=ae.div(Rce||(Rce=te([`
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  z-index: `,`;
  pointer-events: none;

  &:after {
    display: block;
    content: ' ';
    position: absolute;
    /* top: `,`px; */
    top: 0;
    bottom: 0;
    left: -1px;
    width: 1px;
    background-color: `,`;
  }

  &:hover:after,
  &.dragging:after {
    background-color: `,`;
  }
`])),()=>cd.lengthIndicatorStrip,ld,hC.stripNormal,hC.stripActive),Oce=ae.div(Dce||(Dce=te([`
  position: absolute;
  top: `,`px;
  width: 100px;
  left: -50px;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
`])),ld-15),Nce=ae.div(Lce||(Lce=te([`
  margin-top: 8px;
  font-size: 10px;
  white-space: nowrap;
  padding: 2px 8px;
  border-radius: 2px;
  `,`;
  cursor: ew-resize;
  color: #464646;
  background-color: #0000004d;
  display: none;

  `,":hover &, ",`.dragging & {
    display: block;
    color: white;
    background-color: `,`;
  }
`])),kr,kf,kf,hC.stripActive),Bce=ae.div(Fce||(Fce=te([`
  font-size: 10px;
  white-space: nowrap;
  padding: 1px 2px;
  border-radius: 2px;
  `,`;
  justify-content: center;
  align-items: center;
  cursor: ew-resize;
  color: #5d5d5d;
  background-color: #191919;

  `,":hover &, ",`.dragging & {
    color: white;
    background-color: `,`;

    & > svg:first-child {
      margin-right: -1px;
    }
  }

  & > svg:first-child {
    margin-right: -4px;
  }
`])),kr,kf,kf,hC.stripActive),zce=ae.div(Uce||(Uce=te([`
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgb(23 23 23 / 43%);
  width: `,`px;
  z-index: `,`;
  transform-origin: left top;

  `,".dragging ~ &, ",`:hover ~ & {
    background-color: rgb(23 23 23 / 60%);
  }
`])),jj,()=>cd.lengthIndicatorCover,kf,kf),Vce=-1e4,jce=({layoutP:s})=>{let[a,l]=xr(null),[h]=ODe(l,{layoutP:s}),{node:f,toggle:g,close:b}=$c({debugName:"LengthIndicator"},()=>za.default.createElement(Xc,null,za.default.createElement(Ice,{layoutP:s,onRequestClose:b})));return Qn(()=>{let _=(0,kv.val)(s.sheet),S=(0,kv.val)(s.rightDims.height),C=_.getSequence(),I=C.length,O=I,D=(0,kv.val)(s.clippedSpace.fromUnitSpace)(O),A=(0,kv.val)(s.clippedSpace.width),N,L;return D>A?(L=0,N=0):(D<0&&(D=0),L=D,N=(A-D)/jj),za.default.createElement(za.default.Fragment,null,f,za.default.createElement(kf,{style:{height:S+"px",transform:"translateX(".concat(L===0?Vce:L,"px)")},className:h?"dragging":""},za.default.createElement(Oce,null,za.default.createElement(Bce,F({ref:a,onClick:V=>{g(V,l)}},td("hide")),za.default.createElement(EAe,null),za.default.createElement(CAe,null)),za.default.createElement(Nce,null,"Sequence length:"," ",C.positionFormatter.formatBasic(I)))),za.default.createElement(zce,{title:"Length",style:{height:S+"px",transform:"translateX(".concat(L,"px) scale(").concat(N,", 1)")}}))},[s,a,h,f])},Hce=jce}),Hj,Ph,Gce,Wce,$ce,Kce,Xce,qce,Yce,Zce,NDe=P(()=>{En(),Hj=Ut,Ph=X(Ne()),Ve(),ice(),Mh(),Tv(),fo(),Wce=ae.div(Gce||(Gce=te([`
  position: absolute;
  top: 0;
  left: 0;
  margin-top: 0px;
`]))),Kce=ae.div($ce||($ce=te([`
  position: absolute;
  top: 16px;
  font-size: `,`;
  color: `,`;
  text-align: center;
  transform: translateX(-50%);
  background: `,`;
  padding: 1px 8px;
  font-variant-numeric: tabular-nums;
  pointer-events: none;
  z-index: `,`;
`])),Pf.stampFontSize,Pf.fullUnitStampColor,dC.backgroundColor,()=>cd.currentFrameStamp),qce=ae.div(Xce||(Xce=te([`
  position: absolute;
  top: 5px;
  left: -0px;
  bottom: 0;
  width: 0.5px;
  background: rgba(100, 100, 100, 0.2);
  pointer-events: none;
`]))),Yce=Ph.default.memo(({layoutP:s})=>{let[a,l]=ir(Dse()),h=ir(s.clippedSpace.fromUnitSpace),{sequence:f,formatter:g,clippedSpaceWidth:b}=Qn(()=>{let I=(0,Hj.val)(s.sheet).getSequence(),O=(0,Hj.val)(s.clippedSpace.width);return{sequence:I,formatter:I.positionFormatter,clippedSpaceWidth:O}},[s]);if(a==-1)return Ph.default.createElement(Ph.default.Fragment,null);let _=l===3?f.closestGridPosition(a):a,S=h(_),C=S>=0&&S<=b;return Ph.default.createElement(Ph.default.Fragment,null,Ph.default.createElement(Wce,null,Ph.default.createElement(Kce,{style:{opacity:C?1:0,transform:"translate3d(calc(".concat(S,"px - 50%), 0, 0)")}},g.formatForPlayhead(_)),Ph.default.createElement(qce,{posType:l,style:{opacity:C?1:0,transform:"translate3d(".concat(S,"px, 0, 0)")}}))," ")}),Zce=Yce}),Yu,ha,Qce,Jce,ede,tde,nde,WD,rde,Gj,ide,$D,sde,KD,ode,Wj,ade,lde,FDe=P(()=>{En(),Yu=Ut,$2(),il(),ha=X(Ne()),Ve(),Mh(),fo(),Dr(),Es(),Jce=ae.div(Qce||(Qce=te([`
  --threadHeight: 6px;
  --bg-inactive: #32353b;
  --bg-active: #5b5c5d;
  position: absolute;
  height: 0;
  width: 100%;
  left: 12px;
  /* bottom: 8px; */
  z-index: `,`;
  `,`
`])),()=>cd.horizontalScrollbar,kr),tde=ae.div(ede||(ede=te([`
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--threadHeight);
`]))),WD=ae.div(nde||(nde=te([`
  position: absolute;
  height: 5px;
  background: var(--bg-inactive);
  cursor: ew-resize;
  z-index: 2;

  &:hover,
  &:active {
    background: var(--bg-active);
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),q5("absolute","-4px")),Gj=ae.div(rde||(rde=te([`
  position: absolute;
  height: 5px;
  width: 7px;
  left: 0;
  z-index: 2;
  top: 0;
  bottom: 0;
  display: block;

  &:hover:before {
    background: var(--bg-active);
  }

  &:before {
    `,`;
    display: block;
    content: ' ';
    background: var(--bg-inactive);
    border-radius: 0 2px 2px 0;
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),q5("absolute","0"),q5("absolute","-4px")),$D=ae(Gj)(ide||(ide=te([`
  left: calc(-1 * 7px);
  cursor: w-resize;
  &:before {
    transform: scaleX(-1);
  }
`]))),KD=ae(Gj)(sde||(sde=te([`
  cursor: e-resize;
  left: 0px;
`]))),Wj=ae.div(ode||(ode=te([`
  display: `,`;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 4px;
  transform: translateX(-50%);
  background: #131d1f;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;

  `,`:hover &,
  `,`:hover &,
  `,":hover ~ ",` &,
  `,":hover ~ ",` & {
    display: block;
  }
`])),s=>s.active?"block":"none",$D,KD,WD,$D,WD,KD),ade=({layoutP:s})=>{let a=(0,ha.useCallback)(V=>V.toFixed(2),[]),l=(0,ha.useMemo)(()=>(0,Yu.prism)(()=>{let V=(0,Yu.val)(s.rightDims.width)-25,G=(0,Yu.val)(s.clippedSpace.range),$=(0,Yu.val)(s.sheet).getSequence().length,Y=Math.max(G.end,$),re=G.start/Y*V,ne=G.end/Y*V;return{rightWidth:V,clippedSpaceRange:G,sequenceLength:$,assumedLengthOfSequence:Y,rangeStartX:re,rangeEndX:ne,bottom:(0,Yu.val)(s.horizontalScrollbarDims.bottom)}}),[s]),{rangeStartX:h,rangeEndX:f,clippedSpaceRange:g,bottom:b}=ir(l),[_,S]=(0,ha.useState)("nothing"),C=(0,ha.useMemo)(()=>{let V=(0,Yu.val)(l),G=()=>{V=(0,Yu.val)(l)},$=Y=>Y/V.rightWidth*V.assumedLengthOfSequence;return{onRangeDragStart(){return G(),{onDrag(Y){S("both");let re=$(Y),ne=th(V.clippedSpaceRange,le=>le+re);(0,Yu.val)(s.clippedSpace.setRange)(ne)},onDragEnd(){S("nothing")}}},onRangeStartDragStart(){return G(),{onDrag(Y){S("start");let re=$(Y),ne={start:V.clippedSpaceRange.start+re,end:V.clippedSpaceRange.end};ne.start>ne.end-1&&(ne.start=ne.end-1),ne.start<=0&&(ne.start=0),(0,Yu.val)(s.clippedSpace.setRange)(ne)},onDragEnd(){S("nothing")}}},onRangeEndDragStart(){return G(),{onDrag(Y){S("end");let re=$(Y),ne={start:V.clippedSpaceRange.start,end:V.clippedSpaceRange.end+re};ne.end<ne.start+1&&(ne.end=ne.start+1),ne.end>=V.assumedLengthOfSequence&&(ne.end=V.assumedLengthOfSequence),(0,Yu.val)(s.clippedSpace.setRange)(ne)},onDragEnd(){S("nothing")}}}}},[s,l]),[I,O]=(0,ha.useState)(null);Ui(I,{debugName:"HorizontalScrollbar/onRangeDrag",onDragStart:C.onRangeDragStart,lockCSSCursorTo:"ew-resize"});let[D,A]=(0,ha.useState)(null);Ui(D,{debugName:"HorizontalScrollbar/onRangeStartDrag",onDragStart:C.onRangeStartDragStart,lockCSSCursorTo:"w-resize"});let[N,L]=(0,ha.useState)(null);return Ui(N,{debugName:"HorizontalScrollbar/onRangeEndDrag",onDragStart:C.onRangeEndDragStart,lockCSSCursorTo:"e-resize"}),ha.default.createElement(Jce,F({style:{bottom:b+8+"px"}},td("hide")),ha.default.createElement(tde,null,ha.default.createElement(WD,{ref:O,style:{width:"".concat(f-h,"px"),transform:"translate3d(".concat(h,"px, 0, 0)")}}),ha.default.createElement($D,{ref:A,style:{transform:"translate3d(".concat(h,"px, 0, 0)")}},ha.default.createElement(Wj,{active:_==="both"||_==="start"},a(g.start))),ha.default.createElement(KD,{ref:L,style:{transform:"translate3d(".concat(f,"px, 0, 0)")}},ha.default.createElement(Wj,{active:_==="both"||_==="end"},a(g.end)))))},lde=ade}),ude,cde,dde,hde,pde,BDe=P(()=>{ude=X(Ne()),Ve(),dde=ae.div(cde||(cde=te([`
  position: absolute;
  inset: `,`px;
`])),s=>s.room*-1),hde=s=>ude.default.createElement(dde,{room:s.room}),pde=hde}),XD,qD,$j,fde,mde,gde,vde,yde,bde,_de,wde,UDe=P(()=>{Ve(),En(),W4(),nv(),XD=X(Ne()),qD=X(Ne()),$j=Ut,Ny(),fde=s=>isFinite(s)&&s>=0,gde=ae.div(mde||(mde=te([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),yde=ae.div(vde||(vde=te([`
  `,`;
  white-space: nowrap;
`])),hf),bde=({deltaX:s})=>s*.25,_de=({layoutP:s,onRequestClose:a})=>{let l=(0,$j.val)(s.sheet),h=l.getSequence(),f=(0,XD.useMemo)(()=>{let b,_=h.position;return{temporarilySetValue(S){b&&(b=void 0),b=_i(S,0,h.length),h.position=b},discardTemporaryValue(){b&&(b=void 0,h.position=_,a("discardTemporaryValue"))},permanentlySetValue(S){b&&(b=void 0),h.position=_i(S,0,h.length),a("permanentlySetValue")}}},[s,h]),g=(0,XD.useRef)(null);return(0,XD.useLayoutEffect)(()=>{g.current.focus()},[]),Qn(()=>{let b=l.getSequence(),_=Number((0,$j.val)(b.pointer.position).toFixed(3));return qD.default.createElement(gde,null,qD.default.createElement(yde,null,"Sequence position"),qD.default.createElement(QI,B(F({value:_},f),{isValid:fde,inputRef:g,nudge:bde})))},[l,f,g])},wde=_de}),xde,zDe=P(()=>{xde=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0}),Sde,VDe=P(()=>{zDe(),Sde=s=>xde?s.metaKey===!0:s.ctrlKey===!0});function jDe(){YD=!1}function HDe(){YD=!0}function GDe(){let s=de();(0,Ede.useEffect)(()=>{let a=l=>{let h=l.composedPath()[0];if(!(h&&(h.tagName==="INPUT"||h.tagName==="TEXTAREA"))){if(l.key==="z"||l.key==="Z"||l.code==="KeyZ")if(Sde(l))l.shiftKey===!0?s.redo():s.undo();else return;else if(l.code==="Space"&&!l.shiftKey&&!l.metaKey&&!l.altKey&&!l.ctrlKey){if(!YD)return;let f=Kke();if(f)if(f.playing)f.pause();else{let{projectId:g,sheetId:b}=f.address,_=(0,Zu.prism)(()=>{let I=(0,Zu.val)(de().atomP.ahistoric.projects.stateByProjectId[g].stateBySheetId[b].sequence.focusRange);return Zu.prism.memo("shouldFollowFocusRange",()=>{let O=f.position;if(I){let D=O>=I.range.start&&O<=I.range.end;return I.enabled?!!D:!0}else return!0},[])&&I&&I.enabled?{range:[I.range.start,I.range.end],isFollowingARange:!0}:{range:[0,(0,Zu.val)(f.pointer.length)],isFollowingARange:!1}}),S=f.playDynamicRange((0,Zu.prism)(()=>(0,Zu.val)(_).range),de().ticker),C=Kj(f);S.finally(()=>{C.set(void 0)}),C.set(_)}else return}else if(l.altKey&&(l.key==="\\"||l.code==="Backslash"||l.code==="IntlBackslash"))s.transaction(({stateEditors:f,drafts:g})=>{f.studio.ahistoric.setVisibilityState(g.ahistoric.visibilityState==="everythingIsHidden"?"everythingIsVisible":"everythingIsHidden")});else return;l.preventDefault(),l.stopPropagation()}};return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[])}var Ede,Zu,YD,Kj,Cde,Xj=P(()=>{Ede=X(Ne()),Me(),VDe(),af(),Zu=Ut,gR(),YD=!0,Kj=bE(s=>new Zu.Atom(void 0)),Cde=bE(s=>(0,Zu.prism)(()=>{let a=Kj(s).prism.getValue();if(a)return a.getValue().isFollowingARange;{let{projectId:l,sheetId:h}=s.address,f=(0,Zu.val)(de().atomP.ahistoric.projects.stateByProjectId[l].stateBySheetId[h].sequence.focusRange);if(!f||!f.enabled)return!1;let g=(0,Zu.val)(s.pointer.position);return g>=f.range.start&&g<=f.range.end}}))});function WDe(s,a){return aa(s,{menuItems(){return[{label:"Place marker",callback:()=>{de().transaction(({stateEditors:l})=>{let h=(0,ud.val)(a.layoutP.sheet),f=h.getSequence();l.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:h.address,markers:[{id:I2e(),position:f.position}],snappingFunction:f.closestGridPosition})})}}]}})}var ud,Zl,Pde,Av,Tde,Mde,kde,qj,Ade,Ide,Rde,Dde,Ode,Lde,$De=P(()=>{BDe(),Es(),Rr(),En(),ud=Ut,Ny(),Zl=X(Ne()),Ve(),Mh(),fo(),Dr(),Kc(),qc(),UDe(),Xj(),sl(),la(),Me(),yh(),qu(),dv(),Av=ae.div(Pde||(Pde=te([`
  --thumbColor: #00e0ff;
  position: absolute;
  top: 0;
  left: 0;
  width: 5px;
  height: 100%;
  z-index: `,`;
  pointer-events: none;

  display: `,`;
`])),()=>cd.playhead,s=>s.isVisible?"block":"none"),Mde=ae.div(Tde||(Tde=te([`
  position: absolute;
  top: 8px;
  width: 0;
  height: calc(100% - 8px);
  border-left: 1px solid #27e0fd;
  z-index: 10;
  pointer-events: none;

  #pointer-root.draggingPositionInSequenceEditor &:not(.seeking) {
    /* pointer-events: auto; */
    /* cursor: var(`,`); */

    &:after {
      position: absolute;
      inset: -8px;
      display: block;
      content: ' ';
    }
  }
`])),ph),qj=ae.div(kde||(kde=te([`
  background-color: var(--thumbColor);
  position: absolute;
  width: 5px;
  height: 13px;
  top: -4px;
  left: -2px;
  z-index: 11;
  cursor: ew-resize;
  --sunblock-color: #1f2b2b;

  `,`;

  `,`.seeking > & {
    pointer-events: none !important;
  }

  #pointer-root.draggingPositionInSequenceEditor
    `,`:not(.seeking)
    > & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  `,`.playheadattachedtofocusrange > & {
    top: -8px;
    --sunblock-color: #005662;
    &:before,
    &:after {
      border-bottom-width: 8px;
    }
  }

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-left: 2px solid transparent;
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    right: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-right: 2px solid transparent;
  }
`])),kr,Av,Av,ph,Av),Ide=ae.div(Ade||(Ade=te([`
  position: absolute;
  left: 1px;
  right: 1px;
  top: 13px;
  border-top: 3px solid var(--thumbColor);
  border-right: 1px solid transparent;
  border-left: 1px solid transparent;
  pointer-events: none;

  /* `,`.playheadattachedtofocusrange & {
    top: 10px;
    &:before,
    &:after {
      height: 15px;
    }
  } */

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    left: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 0 100% 0 0;
    border-top: 1px solid var(--thumbColor);
    border-right: 1px solid var(--thumbColor);
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    right: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 100% 0 0 0;
    border-top: 1px solid var(--thumbColor);
    border-left: 1px solid var(--thumbColor);
  }
`])),Av),Dde=ae.div(Rde||(Rde=te([`
  display: none;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 2px;
  transform: translateX(-50%);
  background: #1a1a1a;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;
  `,":hover &, ",`.seeking & {
    display: block;
  }
`])),qj,Av),Ode=({layoutP:s})=>{let[a,l]=xr(null),{node:h,toggle:f,close:g}=$c({debugName:"Playhead"},()=>Zl.default.createElement(Xc,null,Zl.default.createElement(wde,{layoutP:s,onRequestClose:g}))),b=(0,Zl.useMemo)(()=>({debugName:"RightOverlay/Playhead",onDragStart(){let C=(0,ud.val)(s.sheet).getSequence(),I=C.position,O=(0,ud.val)(s.scaledSpace.toUnitSpace),D=(0,ud.val)(s.seeker.setIsSeeking);return D(!0),RV(),{onDrag(A,N,L){var V;let G=O(A);C.position=(V=ua.checkIfMouseEventSnapToPos(L,{ignore:l}))!=null?V:_i(I+G,0,C.length)},onDragEnd(A){D(!1),cv()},onClick(A){f(A,a.current)}}}}),[s,l]),[_]=Ui(l,b);Gl(_,"draggingPositionInSequenceEditor","ew-resize"),xh(ir(s.seeker.isSeeking)||_,-1);let[S]=WDe(l,{layoutP:s});return Qn(()=>{let C=(0,ud.val)(s.seeker.isSeeking),I=(0,ud.val)(s.sheet).getSequence(),O=(0,ud.val)(Cde(I)),D=I.positionPrism.getValue(),A=(0,ud.val)(s.clippedSpace.fromUnitSpace)(D),N=A>=0&&A<=(0,ud.val)(s.clippedSpace.width);return Zl.default.createElement(Zl.default.Fragment,null,S,h,Zl.default.createElement(Av,F({isVisible:N,style:{transform:"translate3d(".concat(A,"px, 0, 0)")},className:"".concat(C&&"seeking"," ").concat(O&&"playheadattachedtofocusrange")},td("hide")),Zl.default.createElement(qj,F({ref:a},ua.includePositionSnapAttrs(D)),Zl.default.createElement(pde,{room:8}),Zl.default.createElement(Ide,null),Zl.default.createElement(Dde,null,I.positionFormatter.formatForPlayhead(I.closestGridPosition(D)))),Zl.default.createElement(Mde,B(F({},ua.includePositionSnapAttrs(D)),{className:C?"seeking":""}))))},[s,a,h])},Lde=Ode}),Iv,pC,ZD,Nde,Fde,Bde,Ude,KDe=P(()=>{Iv=Ut,En(),Me(),Tv(),pC=X(Ne()),Ve(),ZD=1e3,Fde=ae.div(Nde||(Nde=te([`
  position: absolute;
  top: `,`px;
  left: 0;
  opacity: 0.15;
  width: `,`px;
  transform-origin: top left;
  pointer-events: none;
  background-color: `,`;
`])),ld,ZD,s=>s.enabled?"#000000":"transparent"),Bde=({layoutP:s})=>{let a=(0,pC.useMemo)(()=>(0,Iv.prism)(()=>{let{projectId:l,sheetId:h}=(0,Iv.val)(s.sheet).address;return(0,Iv.val)(de().atomP.ahistoric.projects.stateByProjectId[l].stateBySheetId[h].sequence.focusRange)}),[s]);return Qn(()=>{let l=a.getValue();if(!l||!l.enabled)return null;let h=(0,Iv.val)(s.rightDims.height)-ld,f=(0,Iv.val)(s.clippedSpace.fromUnitSpace),g=(0,Iv.val)(s.clippedSpace.width),b=[];{let _=0,S=f(l.range.start),C,I;_>S?(I=0,C=0):(S>g&&(S=g),I=_,C=(S-_)/ZD),b.push({translateX:I,scaleX:C})}{let _=f(l.range.end),S=g,C,I;_>S?(I=0,C=0):(_<0&&(_=0),I=_,C=(S-_)/ZD),b.push({translateX:I,scaleX:C})}return pC.default.createElement(pC.default.Fragment,null,b.map(({translateX:_,scaleX:S},C)=>pC.default.createElement(Fde,{key:"curtain-".concat(C),enabled:!0,style:{height:"".concat(h,"px"),transform:"translateX(".concat(_,"px) scaleX(").concat(S,")")}})))},[s,a])},Ude=Bde}),n_,zde,Vde,jde,Hde,Gde,XDe=P(()=>{n_=X(Ne()),Ve(),En(),Me(),nv(),Q4(),Vde=ae.div(zde||(zde=te([`
  display: flex;
  gap: 8px;
  /* padding: 4px 8px; */
  height: 28px;
  align-items: center;
`]))),ae.div(jde||(jde=te([`
  `,`;
  white-space: nowrap;
`])),hf),Hde=({layoutP:s,marker:a})=>{var l;let h=ir(s.sheet),f=(0,n_.useMemo)(()=>{let b;return{temporarilySetValue(_){b&&(b.discard(),b=void 0),b=de().tempTransaction(({stateEditors:S})=>{S.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:h.address,markerId:a.id,label:_})})},discardTemporaryValue(){b&&(b.discard(),b=void 0)},permanentlySetValue(_){b&&(b.discard(),b=void 0),de().transaction(({stateEditors:S})=>{S.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:h.address,markerId:a.id,label:_})})}}},[s,h]),g=(0,n_.useRef)(null);return(0,n_.useLayoutEffect)(()=>{g.current.focus()},[]),n_.default.createElement(Vde,null,n_.default.createElement(eR,B(F({value:(l=a.label)!=null?l:""},f),{isValid:()=>!0,inputRef:g})))},Gde=Hde});function qDe(s,a){return aa(s,{menuItems(){return[{label:"Remove marker",callback:()=>{de().transaction(({stateEditors:l})=>{l.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removeMarker({sheetAddress:a.sheetAddress,markerId:a.markerId})})}}]}})}function YDe(s,a){let l=(0,pa.useRef)(a);l.current=a;let h=(0,pa.useMemo)(()=>({debugName:"MarkerDot/useDragMarker (".concat(a.marker.id,")"),onDragStart(g){let b=l.current.marker,_=(0,QD.val)(a.layoutP.scaledSpace.toUnitSpace),S;return RV(),{onDrag(C,I,O){var D;let A=b,N=Math.max((D=ua.checkIfMouseEventSnapToPos(O,{ignore:s}))!=null?D:A.position+_(C),0);S==null||S.discard(),S=de().tempTransaction(({stateEditors:L})=>{L.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:(0,QD.val)(a.layoutP.sheet.address),markers:[B(F({},A),{position:N})],snappingFunction:(0,QD.val)(a.layoutP.sheet).getSequence().closestGridPosition})})},onDragEnd(C){C?S==null||S.commit():S==null||S.discard(),cv()}}}}),[]),[f]=Ui(s,h);return xh(f,a.marker.position),Gl(f,"draggingPositionInSequenceEditor draggingMarker","ew-resize"),[f]}var QD,pa,Yj,Zj,Wde,$de,Kde,Xde,qde,JD,Yde,Zde,Qde,Jde,ehe,the,ZDe=P(()=>{QD=Ut,En(),Me(),sl(),la(),Rr(),pa=X(Ne()),Ve(),fo(),Es(),Mh(),qu(),iD(),zse(),dv(),Kc(),qc(),XDe(),Yj=12,Zj=12,Wde=Yj*2,$de=Zj*2,Xde=ae.div(Kde||(Kde=te([`
  position: absolute;
  // below the sequence ruler "top bar"
  top: 18px;
  z-index: `,`;
`])),()=>cd.marker),JD=ae.div(qde||(qde=te([`
  position: absolute;
  `,`
  pointer-events: none;
`])),Kl(Yj,Zj)),Yde=pa.default.memo(()=>pa.default.createElement(JD,{children:pa.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},pa.default.createElement("path",{d:"M12 5H0V7H2.71973L5.96237 10.2426L9.20501 7H12V5Z",fill:"#40AAA4"}))})),Qde=ae.div(Zde||(Zde=te([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  // :not dragging marker to ensure that markers don't snap to other markers
  // this works because only one marker track (so this technique is not used by keyframes...)
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) & {
    `,`
  }

  // "All instances of this component <Mark/> inside #pointer-root when it has the .draggingPositionInSequenceEditor class"
  // ref: https://styled-components.com/docs/basics#pseudoelements-pseudoselectors-and-nesting
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) &,
  #pointer-root.draggingPositionInSequenceEditor
    &.`,` {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &:hover
    + `,`,
    // notice , "or" in CSS
    &.`,`
    + `,` {
    `,`
  }
`])),nd.CSS,nd.CSS_WHEN_SOMETHING_DRAGGING,nd.BEING_DRAGGED_CLASS,ph,JD,nd.BEING_DRAGGED_CLASS,JD,Kl(Wde,$de)),Jde=({layoutP:s,markerId:a})=>{let l=ir(s.sheet.address),h=ir(de().atomP.historic.projects.stateByProjectId[l.projectId].stateBySheetId[l.sheetId].sequenceEditor.markerSet.byId[a]);if(!h)return null;let f=ir(s.clippedSpace.width),g=ir(s.clippedSpace.fromUnitSpace)(h.position),b=g<=0||g>f,_=b?-1e4:g,S=b?0:1;return pa.default.createElement(Xde,{style:{transform:"translateX(".concat(_,"px) scale(").concat(S,")")}},pa.default.createElement(the,{marker:h,layoutP:s}))},ehe=Jde,the=({layoutP:s,marker:a})=>{let l=ir(s.sheet.address),[h,f]=xr(null),[g]=qDe(f,{sheetAddress:l,markerId:a.id}),[b]=YDe(f,{layoutP:s,marker:a}),{node:_,toggle:S,close:C}=$c({debugName:"MarkerPopover"},()=>pa.default.createElement(Xc,null,pa.default.createElement(Gde,{marker:a,layoutP:s,onRequestClose:C})));return pa.default.createElement(pa.default.Fragment,null,g,_,pa.default.createElement(Qde,F({title:a.label?"Marker: ".concat(a.label):"Marker",ref:h,onClick:I=>{S(I,h.current)}},nd.reactProps({isDragging:b,position:a.position}))),pa.default.createElement(Yde,null))}}),eO,nhe,rhe,QDe=P(()=>{En(),Me(),eO=X(Ne()),ZDe(),nhe=({layoutP:s})=>{let a=ir(s.sheet.address),l=de().atomP.historic.projects.stateByProjectId[a.projectId].stateBySheetId[a.sheetId].sequenceEditor.markerSet,h=ir(l.allIds);return eO.default.createElement(eO.default.Fragment,null,h&&Object.keys(h).map(f=>eO.default.createElement(ehe,{key:f,layoutP:s,markerId:f})))},rhe=nhe}),ihe,Th,she,ohe,ahe,lhe,JDe=P(()=>{Mh(),En(),ihe=Ut,Th=X(Ne()),Ve(),LDe(),NDe(),FDe(),$De(),Tv(),KDe(),QDe(),ohe=ae.div(she||(she=te([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: visible;
  pointer-events: none;
`])),()=>cd.rightOverlay),ahe=({layoutP:s})=>Qn(()=>{let a=(0,ihe.val)(s.rightDims.width);return Th.default.createElement(ohe,{style:{width:a+"px"}},Th.default.createElement(Lde,{layoutP:s}),Th.default.createElement(lde,{layoutP:s}),Th.default.createElement(Zce,{layoutP:s}),Th.default.createElement(Sce,{layoutP:s}),Th.default.createElement(rhe,{layoutP:s}),Th.default.createElement(Hce,{layoutP:s}),Th.default.createElement(Ude,{layoutP:s}))},[s]),lhe=ahe}),uhe,tO,che,dhe,hhe,phe,eOe=P(()=>{uhe=Ut,En(),Me(),tO=X(Ne()),Ve(),Ib(),fo(),dhe=ae.button(che||(che=te([`
  outline: none;
  background-color: #1c1d21;
  border: 1px solid #191919;
  border-radius: 2px;
  display: flex;
  bottom: 14px;
  right: 8px;
  z-index: 1;
  position: absolute;

  padding: 4px 8px;
  display: flex;
  color: #656d77;
  line-height: 20px;
  font-size: 10px;

  &:hover {
    color: white;
  }

  & > svg {
    transition: transform 0.3s;
    transform: rotateZ(0deg);
  }

  &:hover > svg {
    transform: rotateZ(-20deg);
  }

  &.open > svg {
    transform: rotateZ(-180deg);
  }

  &.open:hover > svg {
    transform: rotateZ(-160deg);
  }
`]))),hhe=({layoutP:s})=>{let a=ir(s.graphEditorDims.isOpen),l=(0,tO.useCallback)(()=>{let h=(0,uhe.val)(s.graphEditorDims.isOpen);de().transaction(({stateEditors:f})=>{f.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!h})})},[s]);return tO.default.createElement(dhe,F({onClick:l,title:"Toggle graph editor",className:a?"open":""},td("hide")),tO.default.createElement(jAe,null))},phe=hhe}),Qu,Si,fhe,mhe,ghe,vhe,cd,yhe,bhe,_he,whe,xhe,She,Ehe,Che,Phe,Mh=P(()=>{af(),En(),qie(),Qu=Ut,Si=X(Ne()),Ve(),mDe(),zD(),CDe(),JDe(),Gb(),eie(),kie(),fo(),Kt(),di(),eOe(),dh(),iv(),mhe=ae(vV)(fhe||(fhe=te([`
  z-index: `,`;
  box-shadow: 2px 2px 0 rgb(0 0 0 / 11%);
`])),Sb.sequenceEditorPanel),vhe=ae.div(ghe||(ghe=te([`
  background-color: rgba(40, 43, 47, 0.99);
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
  pointer-events: none;
`]))),cd=(()=>{let s={rightBackground:0,scrollableArea:0,rightOverlay:0,lengthIndicatorCover:0,lengthIndicatorStrip:0,playhead:0,currentFrameStamp:0,marker:0,horizontalScrollbar:0},a=-1;for(let l of Object.keys(s))s[l]=a,a++;return s})(),bhe=ae(dV)(yhe||(yhe=te([`
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1;
`]))),_he={edges:{left:{from:"screenLeft",distance:.1},right:{from:"screenRight",distance:.2},top:{from:"screenBottom",distance:.4},bottom:{from:"screenBottom",distance:.01}}},whe={width:800,height:200},xhe=s=>Si.default.createElement(cV,{panelId:"sequenceEditor",defaultPosition:_he,minDims:whe},Si.default.createElement(She,null)),She=()=>{let{dims:s}=Hb(),[a,l]=(0,Si.useState)(null);return gee(a),Qn(()=>{let h=Qu.prism.memo("panelSize",()=>{let D=s.width,A=s.height;return{width:D,height:A,widthWithoutBorder:D-2,heightWithoutBorder:A-4,screenX:s.left,screenY:s.top}},[s]),f=Oo(of().filter(D=>bt(D)||at(D)).map(D=>at(D)?D.sheet:D));if(Oo(f.map(D=>D.template)).length!==1)return Si.default.createElement(Si.default.Fragment,null);let g=f[0];if(!g)return Si.default.createElement(Si.default.Fragment,null);let b=bV("panelSizeP",h).pointer,_=Qu.prism.memo("key",()=>JSON.stringify(g.address),[g]),S=Qu.prism.memo("layout",()=>EDe(g,b),[g,b]).getValue();if((0,Qu.val)(S.tree.children).length===0)return Si.default.createElement(Si.default.Fragment,null);let C=Qu.prism.memo("containerRef",Phe,[]),I=(0,Qu.val)(S.graphEditorDims.isAvailable),O=(0,Qu.val)(S.graphEditorDims.isOpen);return Si.default.createElement(mhe,{ref:D=>{C(D),D!==a&&l(D)}},Si.default.createElement(vhe,{style:{width:"".concat((0,Qu.val)(S.leftDims.width),"px")}}),Si.default.createElement(Nse,{layoutP:S},Si.default.createElement(Ehe,{layoutP:S}),Si.default.createElement(jue,{key:_+"-dopeSheet",layoutP:S}),O&&Si.default.createElement(cue,{key:_+"-graphEditor",layoutP:S}),I&&Si.default.createElement(phe,{layoutP:S}),Si.default.createElement(lhe,{layoutP:S})))},[s,a])},Ehe=({layoutP:s})=>Qn(()=>{let a=(0,Qu.val)(s.sheet);return Si.default.createElement(bhe,{style:{width:(0,Qu.val)(s.leftDims.width)}},Si.default.createElement(y4,null,Si.default.createElement(sf,null,a.address.sheetId," "),Si.default.createElement(sE,null,":"," "),Si.default.createElement(sf,null,a.address.sheetInstanceId," "),Si.default.createElement(sE,null," ",">"," "),Si.default.createElement(sf,null,"Sequence")))},[s]),Che=xhe,Phe=()=>{let s=null,a={passive:!1,capture:!1},l=h=>{Math.abs(h.deltaY)<Math.abs(h.deltaX)&&(h.preventDefault(),h.stopPropagation())};return h=>{s!==h&&s&&s.removeEventListener("wheel",l,a),s=h,h&&h.addEventListener("wheel",l,a)}}}),Rv,The,Mhe,tOe=P(()=>{rAe(),aV(),Rv=X(Ne()),Me(),En(),vIe(),Mh(),The=()=>{let s=ir(de().paneManager.allPanesD),a=Object.entries(s).map(([l,h])=>Rv.default.createElement(Xie,{key:"pane-".concat(l),paneInstance:h}));return Rv.default.createElement(Rv.default.Fragment,null,a,Rv.default.createElement(FY,null),Rv.default.createElement(qre,null),Rv.default.createElement(Che,null))},Mhe=The}),khe,Ahe,Ihe,nOe=P(()=>{Ve(),NR(),Ahe=ae(zb)(khe||(khe=te([`
  --popover-outer-stroke: #e11c1c;
  --popover-inner-stroke: #2c1c1c;
  --popover-bg: #2c1c1c;
  pointer-events: none !important;
`]))),Ihe=Ahe}),rOe=W((s,a)=>{var l,h;l=[],h=[];function f(g,b,_){var S,C,I,O,D,A,N,L;if(g===b)return 0;if(S=g.length,C=b.length,S===0)return C;if(C===0)return S;for(_&&(g=g.toLowerCase(),b=b.toLowerCase()),N=0;N<S;)h[N]=g.charCodeAt(N),l[N]=++N;for(L=0;L<C;)for(I=b.charCodeAt(L),O=D=L++,N=-1;++N<S;)A=I===h[N]?D:D+1,D=l[N],l[N]=O=D>O?A>O?O+1:A:A>D?D+1:A;return O}a.exports=f}),iOe=W((s,a)=>{var l=rOe();function h(){var f,g,b,_,S,C=0,I=arguments[0],O=arguments[1],D=O.length,A=arguments[2];A&&(_=A.threshold,S=A.ignoreCase),_===void 0&&(_=0);for(var N=0;N<D;++N)S?g=l(I,O[N],!0):g=l(I,O[N]),g>I.length?f=1-g/O[N].length:f=1-g/I.length,f>C&&(C=f,b=O[N]);return C>=_?b:null}a.exports=h});function sOe(s,a,l="Did you mean ",h="?"){let f=(0,Rhe.default)(s,a,{threshold:.7});return f?l+JSON.stringify(f)+h:""}var Rhe,oOe=P(()=>{Rhe=X(iOe())});function Dhe(s,a){return s.length<=a?s:s.substr(0,a-3)+"..."}var aOe=P(()=>{}),Ohe,Qj,Lhe=P(()=>{aOe(),Ohe=s=>typeof s=="string"?'string("'.concat(Dhe(s,10),'")'):typeof s=="number"?"number(".concat(Dhe(String(s),10),")"):s===null?"null":s===void 0?"undefined":typeof s=="boolean"?String(s):Array.isArray(s)?"array":typeof s=="object"?"object":"unknown",Qj=Ohe}),Nhe,Fhe,Jj,Bhe=P(()=>{Ve(),Jg(),Fhe=ae(bq)(Nhe||(Nhe=te([`
  display: flex;
  height: fit-content;
  backdrop-filter: blur(14px);
  border-radius: 2px;
`]))),Jj=Fhe}),r_,Uhe,zhe,Vhe,i_,fC=P(()=>{Ve(),Dr(),r_=X(Ne()),NE(),YI(),qne(),Bhe(),zhe=ae.button(Uhe||(Uhe=te([`
  `,`;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  width: 32px;
  height: 32px;
  outline: none;

  color: #a8a8a9;

  background: rgba(40, 43, 47, 0.8);
  backdrop-filter: blur(14px);
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 2px;

  svg {
    display: block;
  }

  &:hover {
    background: rgba(59, 63, 69, 0.8);
  }

  &:active {
    background: rgba(82, 88, 96, 0.8);
  }

  &.selected {
    color: rgba(255, 255, 255, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.7);
  }

  // Don't blur if in a button group, because it already blurs. We need to blur
  // on the group-level, otherwise we get seams.
  `,` > & {
    backdrop-filter: none;
    filter: none;
    border-radius: 0;

    &:first-child {
      border-top-left-radius: 2px;
      border-bottom-left-radius: 2px;
    }

    &:last-child {
      border-bottom-right-radius: 2px;
      border-top-right-radius: 2px;
    }
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),kr,Jj),Vhe=r_.default.forwardRef((s,a)=>{var l=s,{title:h}=l,f=z(l,["title"]);let[g,b]=Ub({enabled:typeof h=="string"},()=>r_.default.createElement(Qz,null,h));return r_.default.createElement(r_.default.Fragment,null,g,r_.default.createElement(zhe,F({ref:qI([b,a])},f))," ")}),i_=Vhe}),jhe,Hhe,Ghe,Whe,$he,lOe=P(()=>{jhe=X(Ne()),fC(),Ve(),Dr(),Ghe=ae(i_)(Hhe||(Hhe=te([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),kr),Whe=({config:s,testId:a})=>{var l;return jhe.default.createElement(Ghe,{onClick:s.onClick,"data-testid":a,title:s.title,dangerouslySetInnerHTML:{__html:(l=s.svgSource)!=null?l:""}})},$he=Whe});function uOe({value:s,label:a,icon:l,onClick:h,isSelected:f}){return s_.default.createElement(s_.default.Fragment,null,s_.default.createElement(i_,{forwardedAs:gq,className:f?"selected":void 0,"aria-label":a,onClick:h,title:a},l))}var s_,Khe,Xhe,cOe=P(()=>{s_=X(Ne()),Jg(),fC(),Bhe(),Khe=({value:s,onChange:a,options:l})=>s_.default.createElement(Jj,null,l.map(({label:h,icon:f,value:g})=>s_.default.createElement(uOe,{key:g,value:g,isSelected:s===g,label:h,icon:f,onClick:()=>a(g)}))),Xhe=Khe}),e6,qhe,Yhe,Zhe,Qhe,dOe=P(()=>{e6=X(Ne()),Ve(),Dr(),cOe(),Yhe=ae.div(qhe||(qhe=te([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),kr),Zhe=({config:s})=>e6.default.createElement(Xhe,{onChange:s.onChange,options:s.options.map(({label:a,value:l,svgSource:h})=>({label:a,value:l,icon:e6.default.createElement(Yhe,{dangerouslySetInnerHTML:{__html:h}})})),value:s.value}),Qhe=Zhe}),mC,Jhe,epe,tpe,npe,hOe=P(()=>{mC=X(Ne()),Ve(),Dr(),fC(),oee(),Kc(),epe=ae.div(Jhe||(Jhe=te([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),kr),tpe=({config:s})=>{let a=(0,mC.useRef)(null),l=$c(()=>{let h=a.current.getBoundingClientRect();return{debugName:"ExtensionFlyoutMenu:"+s.label,constraints:{maxX:h.right,maxY:8,minX:h.left,minY:8},verticalGap:2}},()=>mC.default.createElement(Tz,{items:s.items.map((h,f)=>({label:h.label,callback:()=>{var g;try{(g=h.onClick)==null||g.call(h)}catch(b){console.error(b)}}})),onRequestClose:()=>{l.close("clicked")}}));return mC.default.createElement(epe,null,l.node,mC.default.createElement(i_,{ref:a,onClick:h=>{l.open(h,a.current)}},s.label))},npe=tpe});function pOe(s){return t6[s]}var gC,rpe,t6,ipe,spe,fOe=P(()=>{oOe(),Lhe(),gC=X(Ne()),lOe(),dOe(),hOe(),rpe=s=>gC.default.createElement(gC.default.Fragment,null,s.config.map((a,l)=>gC.default.createElement(ipe,{config:a,key:l}))),t6={Icon:$he,Switch:Qhe,Flyout:npe},ipe=({config:s})=>{let a=pOe(s.type);if(!a)throw new Error("No tool with tool.type ".concat(Qj(s.type)," exists. Did you mean ").concat(sOe(s.type,Object.keys(t6))));return gC.default.createElement(a,{config:s})},spe=rpe}),ope,dd,ape,lpe,upe,n6,cpe,dpe,r6,hpe=P(()=>{ope=Ut,En(),Me(),dd=X(Ne()),Ve(),fOe(),lpe=ae.div(ape||(ape=te([`
  height: 36px;
  /* pointer-events: none; */

  display: flex;
  gap: 0.5rem;
  justify-content: center;
`]))),n6=ae.div(upe||(upe=te([`
  position: abolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),cpe=({extension:s,toolbarId:a})=>{var l;let h=(0,dd.useMemo)(()=>new ope.Atom([]),[]),f=(l=s.toolbars)==null?void 0:l[a];(0,dd.useLayoutEffect)(()=>{let b=f==null?void 0:f(h.set.bind(h),de().publicApi);if(typeof b=="function")return b},[s,a,f]);let g=ir(h.prism);return dd.default.createElement(spe,{config:g})},dpe=({toolbarId:s,showLeftDivider:a})=>{var l;let h=[],f=ir(de().atomP.ephemeral.extensions.byId),g=!1;for(let[,b]of Object.entries(f))!b||!((l=b.toolbars)!=null&&l[s])||(h.push(dd.default.createElement(dd.default.Fragment,{key:"extensionToolbar-"+b.id},g?dd.default.createElement(n6,null):void 0,dd.default.createElement(cpe,{extension:b,toolbarId:s}))),g=!0);return h.length===0?null:dd.default.createElement(lpe,{"data-testid":"theatre-extensionToolbar-".concat(s)},a?dd.default.createElement(n6,null):void 0,h)},r6=dpe}),vC,ppe,fpe,mpe,nO,mOe=P(()=>{Ve(),vC=X(Ne()),fC(),fpe=ae(i_)(ppe||(ppe=te([`
  color: `,`;

  border-bottom: 1px solid
    `,`;
`])),({pinned:s})=>s?"rgba(255, 255, 255, 0.8)":"#A8A8A9",({pinned:s})=>s?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.08)"),mpe=(0,vC.forwardRef)((s,a)=>{var l=s,{children:h,hint:f,pinned:g,icon:b,pinHintIcon:_,unpinHintIcon:S}=l,C=z(l,["children","hint","pinned","icon","pinHintIcon","unpinHintIcon"]);let[I,O]=(0,vC.useState)(!1),D=I||f;return vC.default.createElement(fpe,B(F({},C),{pinned:g,ref:a,onMouseOver:()=>O(!0),onMouseOut:()=>O(!1)}),vC.default.createElement("div",{style:{pointerEvents:"none",width:"fit-content",height:"fit-content",inset:0}},D&&!g?_:D&&g?S:b),h)}),nO=mpe});function gOe(s){return i6.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),i6.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.732 4.048l-.792-.792L7.2 8l4.74 4.744.792-.792L8.781 8l3.951-3.952zm-3.932 0l-.792-.792L3.268 8l4.74 4.744.792-.792L4.848 8 8.8 4.048z",fill:"currentColor"}))}var i6,s6,vOe=P(()=>{i6=X(Ne()),s6=gOe});function yOe(s){return o6.createElement("svg",F({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s),o6.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.694 3.765l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.951-3.951-3.951-3.952zm3.932 0l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.952-3.951-3.952-3.952z",fill:"currentColor"}))}var o6,a6,bOe=P(()=>{o6=X(Ne()),a6=yOe}),Ps,gpe,vpe,ype,l6,bpe,Af,_pe,wpe,xpe,Spe,Epe,Cpe,Ppe,Tpe,Mpe,rO,kpe,Ape,u6,c6,Ipe,Rpe,_Oe=P(()=>{En(),Me(),Ps=X(Ne()),Ve(),vpe=ae.div(gpe||(gpe=te([`
  width: 138px;
  border-radius: 2px;
  background-color: rgba(42, 45, 50, 0.9);
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.25), 0px 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  pointer-events: auto;
  // makes the edges of the item highlights match the rounded corners
  overflow: hidden;

  @supports not (backdrop-filter: blur()) {
    background-color: rgba(42, 45, 50, 0.98);
  }

  color: rgba(255, 255, 255, 0.9);

  & a {
    // Fix colors of links to not be default
    color: inherit;
  }
`]))),l6=ae.div(ype||(ype=te([`
  position: relative;
  padding: 0px 12px;
  font-weight: 400;
  font-size: 11px;
  height: 32px;
  text-decoration: none;
  user-select: none;
  display: flex;
  flex-direction: row;
  align-items: center;
  cursor: default;
`]))),Af=ae(l6)(bpe||(bpe=te([`
  &:before {
    position: absolute;
    display: block;
    content: ' ';
    inset: 3px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.1);
    opacity: 0;
  }

  &.secondary {
    color: rgba(255, 255, 255, 0.5);
  }

  &:hover {
    /* background-color: #398995; */
    color: white !important;
    &:before {
      opacity: 1;
    }
  }
`]))),wpe=ae(l6)(_pe||(_pe=te([`
  height: auto;
  min-height: 32px;
  padding-top: 12px;
  padding-bottom: 10px;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  gap: 8px;
  color: rgba(255, 255, 255, 0.5);
`]))),Spe=ae.div(xpe||(xpe=te([`
  font-weight: 600;
`]))),Cpe=ae.div(Epe||(Epe=te([`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`]))),Tpe=ae.div(Ppe||(Ppe=te([`
  margin-left: 2px;
`]))),rO=ae.div(Mpe||(Mpe=te([`
  height: 1px;
  margin: 0 2px;
  background: rgba(255, 255, 255, 0.02);
`]))),Ape=ae.div(kpe||(kpe=te([`
  position: absolute;
  width: 8px;
  height: 8px;
  background: #40aaa4;
  right: 14px;
  top: 12px;
  border-radius: 50%;
`]))),u6="0.7.0",c6=u6.match(/^[^\-]+/)[0],Ipe=Ps.default.forwardRef((s,a)=>{let l=ir(de().atomP.ahistoric.updateChecker.result.hasUpdates);return Ps.default.createElement(vpe,{ref:a},Ps.default.createElement(Af,{as:"a",href:"https://www.theatrejs.com/docs/latest",className:"",target:"_blank"},"Docs"),Ps.default.createElement(Af,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases",className:"",target:"_blank"},"Changelog"),Ps.default.createElement(rO,null),Ps.default.createElement(Af,{as:"a",href:"https://github.com/theatre-js/theatre",className:"",target:"_blank"},"Github"),Ps.default.createElement(Af,{as:"a",href:"https://twitter.com/theatre_js",className:"",target:"_blank"},"Twitter"),Ps.default.createElement(Af,{className:"",as:"a",href:"https://discord.gg/bm9f8F9Y9N",target:"_blank"},"Discord"),Ps.default.createElement(rO,null),Ps.default.createElement(wpe,null,Ps.default.createElement(Spe,null,"Version"),Ps.default.createElement(Cpe,null,Ps.default.createElement(Tpe,null,u6," ",l===!0?"(outdated)":l===!1?"(latest)":""))),l===!0&&Ps.default.createElement(Ps.default.Fragment,null,Ps.default.createElement(rO,null),Ps.default.createElement(Af,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases".concat(encodeURIComponent(c6)),className:"",target:"_blank"},"Update",Ps.default.createElement(Ape,null)),Ps.default.createElement(Af,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases#".concat(encodeURIComponent(c6)),className:"",target:"_blank"},"What's new?")))}),Rpe=Ipe}),ei,Dpe,Ope,Lpe,Npe,Fpe,Bpe,d6,Upe,h6,zpe,p6,Vpe,jpe,wOe=P(()=>{En(),Me(),ei=X(Ne()),Ve(),NE(),nOe(),NR(),Dpe=Ut,hpe(),mOe(),oE(),vOe(),bOe(),fC(),Kc(),_Oe(),WE(),Lpe=ae.div(Ope||(Ope=te([`
  height: 36px;
  pointer-events: none;

  display: flex;
  justify-content: space-between;
  padding: 12px;
`]))),Fpe=ae.div(Npe||(Npe=te([`
  color: white;
  width: 14px;
  height: 14px;
  background: #d00;
  border-radius: 4px;
  text-align: center;
  line-height: 14px;
  font-weight: 600;
  font-size: 8px;
  position: relative;
  left: -6px;
  top: -11px;
  margin-right: -14px;
  box-shadow: 0 4px 6px -4px #00000059;
`]))),d6=ae.div(Bpe||(Bpe=te([`
  display: flex;
  gap: 8px;
`]))),h6=ae.div(Upe||(Upe=te([`
  position: absolute;
  background: `,`;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  right: -2px;
  top: -2px;
`])),({type:s})=>s==="info"?"#40aaa4":"#f59e0b"),ae.div(zpe||(zpe=te([`
  position: absolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),p6=!1,Vpe=()=>{var s,a,l;let h=Qn(()=>{let L=(0,Dpe.val)(de().atomP.ephemeral.coreByProject);return Object.entries(L).map(([V,G])=>({projectId:V,state:G})).filter(({state:V})=>V.loadingState.type==="browserStateIsNotBasedOnDiskState")},[]),[f,g]=Ub({enabled:h.length>0,enterDelay:h.length>0?0:200},()=>h.length>0?ei.default.createElement(Ihe,null,h.length===1?'There is a state conflict in project "'.concat(h[0].projectId,'". Select the project in the outline below in order to fix it.'):"There are ".concat(h.length," projects that have state conflicts. They are highlighted in the outline below. ")):ei.default.createElement(zb,null,ei.default.createElement(ei.default.Fragment,null,"Outline"))),b=(s=ir(de().atomP.ahistoric.pinOutline))!=null?s:!0,_=(a=ir(de().atomP.ahistoric.pinDetails))!=null?a:!0,S=ir(de().atomP.ahistoric.updateChecker.result.hasUpdates)===!0,C=$c(()=>{let L=I.current.getBoundingClientRect();return{debugName:"More Menu",constraints:{maxX:L.right,maxY:8,minX:L.left-140,minY:8},verticalGap:2}},()=>ei.default.createElement(Rpe,null)),I=(0,ei.useRef)(null),O=(0,ei.useMemo)(()=>(window.__IS_VISUAL_REGRESSION_TESTING&&(p6||(p6=!0,console.warn("Visual regression testing enabled, so we're showing the updates badge unconditionally"))),S||window.__IS_VISUAL_REGRESSION_TESTING?!0:S),[S]),{hasNotifications:D}=tV(),[A,N]=vre();return ei.default.createElement(Lpe,null,ei.default.createElement(d6,null,f,ei.default.createElement(nO,{ref:g,"data-testid":"OutlinePanel-TriggerButton",onClick:()=>{de().transaction(({stateEditors:L,drafts:V})=>{var G;L.studio.ahistoric.setPinOutline(!((G=V.ahistoric.pinOutline)==null||G))})},icon:ei.default.createElement(_4,null),pinHintIcon:ei.default.createElement(a6,null),unpinHintIcon:ei.default.createElement(s6,null),pinned:b}),h.length>0?ei.default.createElement(Fpe,null,h.length):null,ei.default.createElement(r6,{showLeftDivider:!0,toolbarId:"global"})),ei.default.createElement(d6,null,A,ei.default.createElement(nO,{ref:N,onClick:()=>{de().transaction(({stateEditors:L,drafts:V})=>{var G;L.studio.ahistoric.setPinNotifications(!((G=V.ahistoric.pinNotifications)!=null&&G))})},icon:ei.default.createElement(GI,null),pinHintIcon:ei.default.createElement(GI,null),unpinHintIcon:ei.default.createElement(GI,null),pinned:(l=ir(de().atomP.ahistoric.pinNotifications))!=null?l:!1},D&&ei.default.createElement(h6,{type:"warning"})),C.node,ei.default.createElement(i_,{ref:I,onClick:L=>{C.toggle(L,I.current)}},ei.default.createElement(Nq,null),O&&ei.default.createElement(h6,{type:"info"})),ei.default.createElement(nO,{ref:g,onClick:()=>{de().transaction(({stateEditors:L,drafts:V})=>{var G;L.studio.ahistoric.setPinDetails(!((G=V.ahistoric.pinDetails)==null||G))})},icon:ei.default.createElement(Lq,null),pinHintIcon:ei.default.createElement(s6,null),unpinHintIcon:ei.default.createElement(a6,null),pinned:_})))},jpe=Vpe}),Hpe,yC,Gpe,bC,Wpe,$pe,Kpe,Xpe,qpe=P(()=>{Hpe=Ut,En(),yC=X(Ne()),Gpe=X(Du()),bC=new Hpe.Atom({set:{},byId:{}}),Wpe=1,$pe=()=>{let s=Wpe++;function a(h,f,g){bC.reduce(b=>({byId:B(F({},b.byId),{[s]:{comp:h,props:f,portalNode:g}}),set:B(F({},b.set),{[s]:!0})}))}function l(){bC.reduce(h=>{let f=F({},h.set),g=F({},h.byId);return delete f[s],{byId:g,set:f}})}return{mountOrRender:a,unmount:l}},Kpe=()=>{let s=Object.keys(ir(bC.pointer.set));return yC.default.createElement(yC.default.Fragment,null,s.map(a=>yC.default.createElement(Xpe,{key:"id-"+a,id:a})))},Xpe=({id:s})=>{let{comp:a,portalNode:l,props:h}=ir(bC.pointer.byId[s]);return(0,Gpe.createPortal)(yC.default.createElement(a,F({},h)),l)}});function xOe(s){let a=de(),[l,h]=xr(void 0),f=Hue();f.configureLogging({min:128,dev:m6,internal:m6});let g=f.getLogger().named("Theatre.js UIRoot");GDe();let b=ir(a.atomP.ahistoric.visibilityState);return(0,vo.useEffect)(()=>(b==="everythingIsHidden"&&console.warn("Theatre.js Studio is hidden. Use the keyboard shortcut 'alt + \\' to restore the studio, or call studio.ui.restore()."),()=>{}),[b]),Qn(()=>{let _=(0,f6.val)(a.atomP.ahistoric.visibilityState);return(0,f6.val)(a.atomP.ephemeral.initialised)?vo.default.createElement(JY,{logger:g},vo.default.createElement(tne,null,vo.default.createElement(lAe,null,vo.default.createElement(tfe,null),vo.default.createElement(wb.Provider,{value:h},vo.default.createElement(v4,{target:window.__IS_VISUAL_REGRESSION_TESTING===!0?void 0:s.containerShadow},vo.default.createElement(vo.default.Fragment,null,vo.default.createElement(Zpe,null),vo.default.createElement(Jpe,{className:_==="everythingIsHidden"?"invisible":""},vo.default.createElement(g4,{ref:l}),vo.default.createElement(jpe,null),vo.default.createElement(Mhe,null),vo.default.createElement(yre,null)))))))):null},[a,l,h])}var f6,vo,Ype,Zpe,Qpe,Jpe,efe,m6,tfe,SOe=P(()=>{Me(),En(),f6=Ut,vo=X(Ne()),Ve(),tOe(),wOe(),Rr(),Jg(),Xj(),sl(),nne(),j4(),qpe(),Dr(),HD(),uf(),WE(),Zpe=typeof window<"u"?Ul(Ype||(Ype=te([`
  :host {
    contain: strict;
  }
`]))):{},Jpe=ae(QY)(Qpe||(Qpe=te([`
  z-index: 50;
  position: fixed;
  inset: 0;

  &.invisible {
    pointer-events: none !important;
    opacity: 0;
    transform: translateX(1000000px);
  }
`]))),m6=/Playground.+Theatre\.js/.test((efe=typeof document<"u"?document==null?void 0:document.title:null)!=null?efe:""),tfe=()=>vo.default.createElement(Kpe,null)}),EOe=W(s=>{var a=Du();s.createRoot=a.createRoot,s.hydrateRoot=a.hydrateRoot}),nfe={};Z(nfe,{default:()=>sfe});var rfe,ife,sfe,COe=P(()=>{SOe(),rfe=X(Ne()),ife=X(EOe()),qpe(),Dr(),hpe(),sfe=class{constructor(){ye(this,"containerEl",document.createElement("div")),ye(this,"_renderTimeout"),ye(this,"_documentBodyUIIsRenderedIn"),ye(this,"containerShadow"),this.containerEl.id="theatrejs-studio-root",this.containerEl.style.cssText=`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      z-index: 100;
    `;let s=()=>{if(window.__IS_VISUAL_REGRESSION_TESTING===!0){let a=document.createElement("div");return a.id="theatrejs-faux-shadow-root",document.body.appendChild(a),a}else return this.containerEl.attachShadow({mode:"open"})};this.containerShadow=s()}render(){let s=()=>{if(!document.body){this._renderTimeout=setTimeout(s,5);return}this._renderTimeout=void 0,this._documentBodyUIIsRenderedIn=document.body,this._documentBodyUIIsRenderedIn.appendChild(this.containerEl),ife.default.createRoot(this.containerShadow).render(rfe.default.createElement(xOe,{containerShadow:this.containerShadow}))};this._renderTimeout=setTimeout(s,10)}renderToolset(s,a){let l=$pe();return l.mountOrRender(Ake(r6),{toolbarId:s},a),l.unmount}}}),POe=W(s=>{s.compare=f,s.reduce=g;var a,l,h;s.REMOVE=a=-1,s.ADD=l=1,s.EQUAL=h=0;function f(I,O){var D=I.length,A=O.length,N=b(I,O),L=N<D&&N<A?_(I,O):0,V=L+N-1;D-=V,A-=V;for(var G=C(D,A),$=D-1;$>=0;--$)for(var Y=A-1;Y>=0;--Y)G[Y][$]=S(G,I,O,N,$,Y);return{prefix:N,matrix:G,suffix:L}}function g(I,O,D){var A,N,L,V,G=D.matrix,$=D.prefix;for(A=0;A<$;++A)O=I(O,h,A,A);for(L=A,$=G.length,A=0,N=0;A<$;)switch(V=G[A][N].type,O=I(O,V,A+L,N+L),V){case h:++A,++N;break;case a:++N;break;case l:++A;break}for(A+=L,N+=L,$=D.suffix,L=0;L<$;++L)O=I(O,h,A+L,N+L);return O}function b(I,O){for(var D=0,A=Math.min(I.length,O.length);D<A&&I[D]===O[D];)++D;return D}function _(I,O){for(var D=I.length-1,A=O.length-1,N=Math.min(D,A),L=0;L<N&&I[D-L]===O[A-L];)++L;return L}function S(I,O,D,A,N,L){return O[N+A]===D[L+A]?{value:I[L+1][N+1].value,type:h}:I[L][N+1].value<I[L+1][N].value?{value:I[L][N+1].value+1,type:a}:{value:I[L+1][N].value+1,type:l}}function C(I,O){var D=[],A,N,L;for(L=D[O]=[],N=0;N<I;++N)L[N]={value:I-N,type:a};for(A=0;A<O;++A)D[A]=[],D[A][I]={value:O-A,type:l};return D[O][I]={value:0,type:h},D}}),ofe=W(s=>{s.cons=a,s.tail=l,s.map=h;function a(f,g){var b=g.length,_=new Array(b+1);_[0]=f;for(var S=0;S<b;++S)_[S+1]=g[S];return _}function l(f){for(var g=f.length-1,b=new Array(g),_=0;_<g;++_)b[_]=f[_+1];return b}function h(f,g){for(var b=new Array(g.length),_=0;_<g.length;++_)b[_]=f(g[_]);return b}}),TOe=W((s,a)=>{a.exports=b;var l=/\/|~1|~0/g,h="/",f="~",g="~1";function b(_,S){var C,I,O,D;for(C=_.charAt(0)===h?1:0,I="",l.lastIndex=C;O=l.exec(_);)if(D=O[0],I+=_.slice(C,l.lastIndex-D.length),C=l.lastIndex,D===h){if(S(I)===!1)return _;I=""}else I+=D===g?h:f;return I+=_.slice(C),S(I),_}}),g6=W(s=>{var a=TOe();s.find=I,s.join=D,s.absolute=O,s.parse=A,s.contains=N,s.encodeSegment=V,s.decodeSegment=L,s.parseArrayIndex=Y,s.isValidArrayIndex=$;var l="/",h=/\//g,f="~1",g=/~1/g,b="~",_=/~/g,S="~0",C=/~0/g;function I(ne,le,Ce,ve){if(typeof le=="string"){if(le==="")return{target:ne,key:void 0};if(le===l)return{target:ne,key:""};var we=ne,Le,lt=ve!==void 0;return a(le,function(ue){if(ne==null)return we=null,!1;Array.isArray(ne)?Le=lt?re(Ce,Y(ue),ne,ve):ue==="-"?ue:Y(ue):Le=ue,we=ne,ne=ne[Le]}),we===null?void 0:{target:we,key:Le}}}function O(ne){return ne[0]===l?ne:l+ne}function D(ne){return ne.join(l)}function A(ne){var le=[];return a(ne,le.push.bind(le)),le}function N(ne,le){return le.indexOf(ne)===0&&le[ne.length]===l}function L(ne){return ne.replace(g,l).replace(C,b)}function V(ne){return ne.replace(_,S).replace(h,f)}var G=/^(0|[1-9]\d*)$/;function $(ne){return G.test(ne)}function Y(ne){if($(ne))return+ne;throw new SyntaxError("invalid array index "+ne)}function re(ne,le,Ce,ve){var we=le;if(we<0)throw new Error("array index out of bounds "+we);if(ve!==void 0&&typeof ne=="function"&&(we=ne(le,Ce,ve),we<0))throw new Error("could not find patch context "+ve);return we}}),afe=W((s,a)=>{a.exports=l;function l(g){return g==null||typeof g!="object"?g:Array.isArray(g)?h(g):f(g)}function h(g){for(var b=g.length,_=new Array(b),S=0;S<b;++S)_[S]=l(g[S]);return _}function f(g){for(var b=Object.keys(g),_={},S,C=0,I=b.length;C<I;++C)S=b[C],_[S]=l(g[S]);return _}}),MOe=W((s,a)=>{a.exports=l;function l(g,b){return g===b?!0:Array.isArray(g)&&Array.isArray(b)?h(g,b):typeof g=="object"&&typeof b=="object"?f(g,b):!1}function h(g,b){if(g.length!==b.length)return!1;for(var _=0;_<g.length;++_)if(!l(g[_],b[_]))return!1;return!0}function f(g,b){if(g===null&&b!==null||g!==null&&b===null)return!1;var _=Object.keys(g),S=Object.keys(b);if(_.length!==S.length)return!1;for(var C=0,I;C<_.length;++C)if(I=_[C],!(I in b&&l(g[I],b[I])))return!1;return!0}}),kOe=W((s,a)=>{var l=g6();a.exports=function(I,O){var D=l.parse(I.path),A=l.parse(O.path),N=S(D,A),L=g(D,A,N.length),V=C(I),G=C(O);return N.length===0&&!L?[G,V]:L?f(V,D,G,A):h(V,D,G)};function h(I,O,D,A){if(I.path===D.path)throw new TypeError("cannot commute "+I.op+","+D.op+" with identical object paths");return[D,I]}function f(I,O,D,A){return O.length===A.length?b(I,O,D,A):(O.length>A.length?(O=_(D,A,I,O,-1),I.path=l.absolute(l.join(O))):(A=_(I,O,D,A,1),D.path=l.absolute(l.join(A))),[D,I])}function g(I,O,D){return l.isValidArrayIndex(I[D])&&l.isValidArrayIndex(O[D])}function b(I,O,D,A){var N=O.length-1,L=+O[N],V=+A[N],G;return L<V?I.op==="add"||I.op==="copy"?(G=A.slice(),G[N]=Math.max(0,V-1),D.path=l.absolute(l.join(G))):I.op==="remove"&&(G=A.slice(),G[N]=V+1,D.path=l.absolute(l.join(G))):D.op==="add"||D.op==="copy"?(G=O.slice(),G[N]=L+1,I.path=l.absolute(l.join(G))):L>V&&D.op==="remove"&&(G=O.slice(),G[N]=Math.max(0,L-1),I.path=l.absolute(l.join(G))),[D,I]}function _(I,O,D,A,N){var L=O.length-1,V=+O[L],G=+A[L],$=A.slice();return V>G||(I.op==="add"||I.op==="copy"?$[L]=Math.max(0,G-N):I.op==="remove"&&($[L]=Math.max(0,G+N))),$}function S(I,O){var D=I.length,A=O.length;if(D===0||A===0||D<2&&A<2)return[];for(var N=D===A?D-1:Math.min(D,A),L=0;L<N&&I[L]===O[L];)++L;return I.slice(0,L)}function C(I){return I.op==="remove"?{op:I.op,path:I.path}:I.op==="copy"||I.op==="move"?{op:I.op,path:I.path,from:I.from}:{op:I.op,path:I.path,value:I.value}}}),lfe=W((s,a)=>{a.exports=l;function l(h){Error.call(this),this.name=this.constructor.name,this.message=h,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l}),v6=W((s,a)=>{a.exports=l;function l(h){Error.call(this),this.name=this.constructor.name,this.message=h,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l}),ufe=W((s,a)=>{a.exports=l;function l(h){Error.call(this),this.name=this.constructor.name,this.message=h,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l}),cfe=W(s=>{var a=g6(),l=afe(),h=MOe(),f=kOe(),g=ofe(),b=lfe(),_=v6(),S=ufe(),C=a.find,I=a.parseArrayIndex;s.test={apply:O,inverse:D,commute:A},s.add={apply:N,inverse:V,commute:G},s.remove={apply:ne,inverse:Ce,commute:ve},s.replace={apply:$,inverse:Y,commute:re},s.move={apply:we,inverse:Le,commute:lt},s.copy={apply:ue,inverse:Oe,commute:G};function O(Ie,Re,Ke){var Ct=C(Ie,Re.path,Ke.findContext,Re.context),ce=Ct.target,me,tt;if(Array.isArray(ce)?(me=I(Ct.key),tt=ce[me]):tt=Ct.key===void 0?Ct.target:Ct.target[Ct.key],!h(tt,Re.value))throw new b("test failed "+JSON.stringify(Re));return Ie}function D(Ie,Re){return Ie.push(Re),1}function A(Ie,Re){if(Ie.path===Re.path&&Re.op==="remove")throw new TypeError("Can't commute test,remove -> remove,test for same path");return Re.op==="test"||Re.op==="replace"?[Re,Ie]:f(Ie,Re)}function N(Ie,Re,Ke){var Ct=C(Ie,Re.path,Ke.findContext,Re.context);if(Q(Ct))throw new _("path does not exist "+Re.path);if(Re.value===void 0)throw new _("missing value");var ce=l(Re.value);return Ct.key===void 0?ce:(L(Ct,ce),Ie)}function L(Ie,Re){var Ke=Ie.target;if(Array.isArray(Ke))if(Ie.key==="-")Ke.push(Re);else{if(Ie.key>Ke.length)throw new _("target of add outside of array bounds");Ke.splice(Ie.key,0,Re)}else if(Lt(Ke))Ke[Ie.key]=Re;else throw new _("target of add must be an object or array "+Ie.key)}function V(Ie,Re){var Ke=Re.context;return Ke!==void 0&&(Ke={before:Ke.before,after:g.cons(Re.value,Ke.after)}),Ie.push({op:"test",path:Re.path,value:Re.value,context:Ke}),Ie.push({op:"remove",path:Re.path,context:Ke}),1}function G(Ie,Re){if(Ie.path===Re.path&&Re.op==="remove")throw new TypeError("Can't commute add,remove -> remove,add for same path");return f(Ie,Re)}function $(Ie,Re,Ke){var Ct=C(Ie,Re.path,Ke.findContext,Re.context);if(Q(Ct)||We(Ct))throw new _("path does not exist "+Re.path);if(Re.value===void 0)throw new _("missing value");var ce=l(Re.value);if(Ct.key===void 0)return ce;var me=Ct.target;return Array.isArray(me)?me[I(Ct.key)]=ce:me[Ct.key]=ce,Ie}function Y(Ie,Re,Ke,Ct){var ce=Ct[Ke-1];if(ce===void 0||ce.op!=="test"||ce.path!==Re.path)throw new S("cannot invert replace w/o test");var me=ce.context;return me!==void 0&&(me={before:me.before,after:g.cons(ce.value,g.tail(me.after))}),Ie.push({op:"test",path:ce.path,value:Re.value}),Ie.push({op:"replace",path:ce.path,value:ce.value}),2}function re(Ie,Re){if(Ie.path===Re.path&&Re.op==="remove")throw new TypeError("Can't commute replace,remove -> remove,replace for same path");return Re.op==="test"||Re.op==="replace"?[Re,Ie]:f(Ie,Re)}function ne(Ie,Re,Ke){var Ct=C(Ie,Re.path,Ke.findContext,Re.context);if(Q(Ct)||Ct.target[Ct.key]===void 0)throw new _("path does not exist "+Re.path);return le(Ct),Ie}function le(Ie){var Re=Ie.target,Ke;if(Array.isArray(Re))return Ke=Re.splice(I(Ie.key),1),Ke[0];if(Lt(Re))return Ke=Re[Ie.key],delete Re[Ie.key],Ke;throw new _("target of remove must be an object or array")}function Ce(Ie,Re,Ke,Ct){var ce=Ct[Ke-1];if(ce===void 0||ce.op!=="test"||ce.path!==Re.path)throw new S("cannot invert remove w/o test");var me=ce.context;return me!==void 0&&(me={before:me.before,after:g.tail(me.after)}),Ie.push({op:"add",path:ce.path,value:ce.value,context:me}),2}function ve(Ie,Re){return Ie.path===Re.path&&Re.op==="remove"?[Re,Ie]:f(Ie,Re)}function we(Ie,Re,Ke){if(a.contains(Re.path,Re.from))throw new _("move.from cannot be ancestor of move.path");var Ct=C(Ie,Re.path,Ke.findContext,Re.context),ce=C(Ie,Re.from,Ke.findContext,Re.fromContext);return L(Ct,le(ce)),Ie}function Le(Ie,Re){return Ie.push({op:"move",path:Re.from,context:Re.fromContext,from:Re.path,fromContext:Re.context}),1}function lt(Ie,Re){if(Ie.path===Re.path&&Re.op==="remove")throw new TypeError("Can't commute move,remove -> move,replace for same path");return f(Ie,Re)}function ue(Ie,Re,Ke){var Ct=C(Ie,Re.path,Ke.findContext,Re.context),ce=C(Ie,Re.from,Ke.findContext,Re.fromContext);if(Q(ce)||We(ce))throw new _("copy.from must exist");var me=ce.target,tt;return Array.isArray(me)?tt=me[I(ce.key)]:tt=me[ce.key],L(Ct,l(tt)),Ie}function Oe(Ie,Re){throw new S("cannot invert "+Re.op)}function Q(Ie){return Ie===void 0||Ie.target==null&&Ie.key!==void 0}function We(Ie){return Ie.key!==void 0&&Ie.target[Ie.key]===void 0}function Lt(Ie){return Ie!==null&&typeof Ie=="object"}}),AOe=W(s=>{var a=cfe(),l=afe(),h=v6();s.apply=g,s.applyInPlace=b,s.clone=l,s.isValidObject=S,s.defaultHash=_;var f={};function g(I,O,D){return b(I,l(O),D)}function b(I,O,D){if(D||(D=f),!Array.isArray(I))return O;for(var A,N,L=0;L<I.length;++L){if(N=I[L],A=a[N.op],A===void 0)throw new h("invalid op "+JSON.stringify(N));O=A.apply(O,N,D)}return O}function _(I){return S(I)||C(I)?JSON.stringify(I):I}function S(I){return I!==null&&Object.prototype.toString.call(I)==="[object Object]"}function C(I){return Object.prototype.toString.call(I)==="[object Array]"}}),IOe=W((s,a)=>{var l=cfe();a.exports=function(f){var g=[],b,_;for(b=f.length-1;b>=0;b-=_)_=h(g,f[b],b,f);return g};function h(f,g,b,_){var S=l[g.op];return S!==void 0&&typeof S.inverse=="function"?S.inverse(f,g,b,_):1}}),ROe=W(s=>{var a=POe(),l=ofe(),h=AOe(),f=IOe(),g=g6(),b=g.encodeSegment;s.diff=C,s.patch=h.apply,s.patchInPlace=h.applyInPlace,s.inverse=f,s.clone=h.clone,s.InvalidPatchOperationError=v6(),s.TestFailedError=lfe(),s.PatchNotInvertibleError=ufe();var _=h.isValidObject,S=h.defaultHash;function C(Y,re,ne){return O(Y,re,"",I(ne,[])).patch}function I(Y,re){return typeof Y=="object"?{patch:re,hash:V($,Y.hash,S),makeContext:V($,Y.makeContext,G),invertible:Y.invertible!==!1}:{patch:re,hash:V($,Y,S),makeContext:G,invertible:!0}}function O(Y,re,ne,le){return Array.isArray(Y)&&Array.isArray(re)?A(Y,re,ne,le):_(Y)&&_(re)?D(Y,re,ne,le):L(Y,re,ne,le)}function D(Y,re,ne,le){var Ce=Object.keys(re),ve=le.patch,we,Le;for(we=Ce.length-1;we>=0;--we){Le=Ce[we];var lt=ne+"/"+b(Le);Y[Le]!==void 0?O(Y[Le],re[Le],lt,le):ve.push({op:"add",path:lt,value:re[Le]})}for(Ce=Object.keys(Y),we=Ce.length-1;we>=0;--we)if(Le=Ce[we],re[Le]===void 0){var ue=ne+"/"+b(Le);le.invertible&&ve.push({op:"test",path:ue,value:Y[Le]}),ve.push({op:"remove",path:ue})}return le}function A(Y,re,ne,le){var Ce=l.map(le.hash,Y),ve=l.map(le.hash,re),we=a.compare(Ce,ve);return N(Y,re,ne,le,we)}function N(Y,re,ne,le,Ce){var ve=0;return a.reduce(function(we,Le,lt,ue){var Oe,Q,We=we.patch,Lt=ne+"/"+(ue+ve);return Le===a.REMOVE?(Oe=We[We.length-1],Q=we.makeContext(ue,Y),we.invertible&&We.push({op:"test",path:Lt,value:Y[ue],context:Q}),Oe!==void 0&&Oe.op==="add"&&Oe.path===Lt?(Oe.op="replace",Oe.context=Q):We.push({op:"remove",path:Lt,context:Q}),ve-=1):Le===a.ADD?(We.push({op:"add",path:Lt,value:re[lt],context:we.makeContext(ue,Y)}),ve+=1):O(Y[ue],re[lt],Lt,we),we},le,Ce)}function L(Y,re,ne,le){return Y!==re&&(le.invertible&&le.patch.push({op:"test",path:ne,value:Y}),le.patch.push({op:"replace",path:ne,value:re})),le}function V(Y,re,ne){return Y(re)?re:ne}function G(){}function $(Y){return typeof Y=="function"}}),Dv=W((s,a)=>{function l(h,f){for(var g=0,b=f.length-1;g<b;g++){if(!h[f[g]])return null;h=h[f[g]]}return h}a.exports=l}),If=W((s,a)=>{function l(f){return f==="~0"?"~":"/"}function h(f){var g=f.split("/");if(f.indexOf("~")===-1)return g;for(var b=0,_=g.length;b<_;b++)g[b].indexOf("~")!==-1&&(g[b]=g[b].replace(/~[01]/g,l));return g}a.exports=h}),DOe=W((s,a)=>{var l=Dv(),h=If();function f(g,b){var _=h(b),S=_[_.length-1],C=l(g,_);return C?C[S]:void 0}a.exports=f}),iO=W((s,a)=>{function l(h,f){if(h===f)return!0;if(!(h&&f)||typeof h!="object"||typeof f!="object"||h.length!==f.length)return!1;if(Array.isArray(h)){if(!Array.isArray(f))return!1;for(var g=0,b=h.length;g<b;g++)if(!l(h[g],f[g]))return!1;return!0}var _=Object.keys(h);if(_.length!==Object.keys(f).length)return!1;for(var S=0,C=_.length;S<C;S++){var I=_[S];if(!l(h[I],f[I]))return!1}return!0}a.exports=l}),sO=W((s,a)=>{function l(h,f){if(f==="-")return h.length;for(var g=0,b=f.length;g<b;g++){var _=f.charCodeAt(g);if(57<_||_<48)return 1/0}return+f}a.exports=l}),oO=W((s,a)=>{var l=iO(),h=Dv(),f=sO(),g=If();function b(_,S,C,I){if(typeof C>"u")return"[op:add] require value, but got undefined";var O=g(S),D=O[O.length-1],A=h(_,O);if(A===null)return"[op:add] path not found: "+S;if(Array.isArray(A)){var N=f(A,D);if(A.length<N)return"[op:add] invalid array index: "+S;I(_,O).splice(N,0,C)}else l(A[D],C)||(I(_,O)[D]=C)}a.exports=b}),dfe=W((s,a)=>{var l=Dv(),h=sO(),f=If();function g(b,_,S){var C=f(_),I=C[C.length-1],O=l(b,C);if(O===null)return"[op:remove] path not found: "+_;if(Array.isArray(O)){var D=h(O,I);if(O.length<=D)return"[op:remove] invalid array index: "+_;S(b,C).splice(D,1)}else delete S(b,C)[I]}a.exports=g}),hfe=W((s,a)=>{var l=iO(),h=Dv(),f=sO(),g=If();function b(_,S,C,I){if(typeof C>"u")return"[op:replace] require value, but got undefined";var O=g(S),D=O[O.length-1],A=h(_,O);if(A===null)return"[op:replace] path not found: "+S;if(Array.isArray(A)){var N=f(A,D);if(A.length<=N)return"[op:replace] invalid array index: "+S;l(A[N],C)||I(_,O).splice(N,1,C)}else l(A[D],C)||(I(_,O)[D]=C)}a.exports=b}),pfe=W((s,a)=>{var l=oO(),h=Dv(),f=sO(),g=If();function b(_,S,C,I){if(C!==S){var O=g(S),D=O[O.length-1],A=h(_,O);if(A===null)return"[op:move] path not found: "+S;var N=void 0;if(Array.isArray(A)){var L=f(A,D);if(A.length<=L)return"[op:move] invalid array index: "+C;N=A[L],I(_,O).splice(L,1)}else N=A[D],delete I(_,O)[D];return l(_,C,N,I)}}a.exports=b}),ffe=W((s,a)=>{var l=Dv(),h=If(),f=oO();function g(b,_,S,C){var I=h(_),O=I[I.length-1],D=l(b,I);return D===null?"[op:copy] path not found: "+_:f(b,S,D[O],C)}a.exports=g}),mfe=W((s,a)=>{var l=iO(),h=Dv(),f=If();function g(b,_,S){var C=f(_),I=C[C.length-1],O=h(b,C);if(O===null)return"[op:test] path not found: "+_;if(!l(O[I],S)){var D=JSON.stringify(O[I]),A=JSON.stringify(S);return"[op:test] not matched: "+D+" "+A}}a.exports=g}),y6=W((s,a)=>{function l(h){if(!h||typeof h!="object")return h;if(Array.isArray(h)){for(var f=h.length,g=new Array(f),b=0;b<f;b++)g[b]=h[b];return g}for(var _=Object.keys(h),S={},C=0,I=_.length;C<I;C++){var O=_[C];S[O]=h[O]}return S}a.exports=l}),OOe=W((s,a)=>{var l=DOe(),h=oO(),f=dfe(),g=hfe(),b=pfe(),_=ffe(),S=mfe(),C=iO(),I=y6(),O=If();function D(A,N){return{get:function(L){return l(A,L)},add:function(L,V){return h(A,L,V,N)},remove:function(L){return f(A,L,N)},replace:function(L,V){return g(A,L,V,N)},move:function(L,V){return b(A,L,V,N)},copy:function(L,V){return _(A,L,V,N)},test:function(L,V){return S(A,L,V)},deepEqual:C,shallowCopy:I,toKeys:O}}a.exports=D}),LOe=W((s,a)=>{function l(h,f,g,b){return b.error=g,b.partial?f[""]:h}a.exports=l}),NOe=W((s,a)=>{function l(h){return!!h}a.exports=l}),FOe=W((s,a)=>{function l(h){if(h)throw new TypeError(h)}a.exports=l}),BOe=W((s,a)=>{var l=y6();function h(f,g){for(var b=0,_=g.length-1;b<_;b++)f=f[g[b]]=l(f[g[b]]);return f}a.exports=h}),UOe=W((s,a)=>{var l=y6();function h(g,b,_){var S=g[b];return _.has(S)||(S=l(S),_.add(S)),S}function f(g,b,_){for(var S=0,C=b.length-1;S<C;S++)g=g[b[S]]=h(g,b[S],_);return g}a.exports=f}),zOe=W((s,a)=>{var l=OOe(),h=LOe(),f=NOe(),g=FOe(),b=BOe(),_=UOe(),S=oO(),C=dfe(),I=hfe(),O=pfe(),D=ffe(),A=mfe(),N=Set||function(){var V=[];return V.has=function(G){return this.indexOf(G)!==-1},V.add=function(G){this.push(G)},V};function L(V,G,$){if(G.length===0)return V;$=$||{};for(var Y=$.strict?g:f,re=G.length===1?b:function(Le){return function(lt,ue){return _(lt,ue,Le)}}(new N),ne={"":V},le,Ce=0,ve=G.length;Ce<ve;Ce++){var we=G[Ce];switch(we.op){case"add":if(Y(S(ne,""+we.path,we.value,re)))return h(V,ne,we,$);break;case"remove":if(Y(C(ne,""+we.path,re)))return h(V,ne,we,$);break;case"replace":if(Y(I(ne,""+we.path,we.value,re)))return h(V,ne,we,$);break;case"move":if(Y(O(ne,""+we.from,""+we.path,re)))return h(V,ne,we,$);break;case"copy":if(Y(D(ne,""+we.from,""+we.path,re)))return h(V,ne,we,$);break;case"test":if(Y(A(ne,""+we.path,we.value)))return h(V,ne,we,$);break;default:if($.custom&&$.custom[we.op]){if(le=le||l(ne,re),Y($.custom[we.op](le,we,Ce,G)))return h(V,ne,we,$)}else return Y("[op:"+we.op+"] unknown"),h(V,ne,we,$);break}}return ne[""]}a.exports=L}),VOe=W((s,a)=>{a.exports=zOe()}),jOe=W((s,a)=>{(function(l,h){typeof s=="object"&&typeof a=="object"?a.exports=h():typeof s=="object"?s.blobCompare=h():l.blobCompare=h()})(window,function(){return function(l){var h={};function f(g){if(h[g])return h[g].exports;var b=h[g]={i:g,l:!1,exports:{}};return l[g].call(b.exports,b,b.exports,f),b.l=!0,b.exports}return f.m=l,f.c=h,f.d=function(g,b,_){f.o(g,b)||Object.defineProperty(g,b,{enumerable:!0,get:_})},f.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},f.t=function(g,b){if(1&b&&(g=f(g)),8&b||4&b&&typeof g=="object"&&g&&g.__esModule)return g;var _=Object.create(null);if(f.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:g}),2&b&&typeof g!="string")for(var S in g)f.d(_,S,(function(C){return g[C]}).bind(null,S));return _},f.n=function(g){var b=g&&g.__esModule?function(){return g.default}:function(){return g};return f.d(b,"a",b),b},f.o=function(g,b){return Object.prototype.hasOwnProperty.call(g,b)},f.p="",f(f.s=4)}([function(l,h,f){var g=function(I,O){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return function(D,A){var N=[],L=!0,V=!1,G=void 0;try{for(var $,Y=D[Symbol.iterator]();!(L=($=Y.next()).done)&&(N.push($.value),!A||N.length!==A);L=!0);}catch(re){V=!0,G=re}finally{try{!L&&Y.return&&Y.return()}finally{if(V)throw G}}return N}(I,O);throw new TypeError("Invalid attempt to destructure non-iterable instance")},b=function(){function I(O,D){for(var A=0;A<D.length;A++){var N=D[A];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(O,N.key,N)}}return function(O,D,A){return D&&I(O.prototype,D),A&&I(O,A),O}}();function _(I){if(Array.isArray(I)){for(var O=0,D=Array(I.length);O<I.length;O++)D[O]=I[O];return D}return Array.from(I)}var S=f(2),C=function(I){function O(D){(function(N,L){if(!(N instanceof L))throw new TypeError("Cannot call a class as a function")})(this,O);var A=function(N,L){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!L||typeof L!="object"&&typeof L!="function"?N:L}(this,(O.__proto__||Object.getPrototypeOf(O)).call(this));return A._messageId=1,A._messages=new Map,A._worker=D,A._worker.onmessage=A._onMessage.bind(A),A._id=Math.ceil(1e7*Math.random()),A}return function(D,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);D.prototype=Object.create(A&&A.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(D,A):D.__proto__=A)}(O,I),b(O,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return this._messages.size===0}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(D){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,N=this,L=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],V=arguments[3];return new Promise(function(G,$){var Y=N._messageId++;N._messages.set(Y,[G,$,V]),N._worker.postMessage([Y,A,D],L||[])})}},{key:"postMessage",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,A=this,N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],L=arguments[2];return new Promise(function(V,G){var $=A._messageId++;A._messages.set($,[V,G,L]),A._worker.postMessage([$,D],N||[])})}},{key:"emit",value:function(D){for(var A=arguments.length,N=Array(A>1?A-1:0),L=1;L<A;L++)N[L-1]=arguments[L];this._worker.postMessage({eventName:D,args:N})}},{key:"_onMessage",value:function(D){var A;if(!Array.isArray(D.data)&&D.data.eventName)return(A=function $(Y,re,ne){Y===null&&(Y=Function.prototype);var le=Object.getOwnPropertyDescriptor(Y,re);if(le===void 0){var Ce=Object.getPrototypeOf(Y);return Ce===null?void 0:$(Ce,re,ne)}if("value"in le)return le.value;var ve=le.get;return ve!==void 0?ve.call(ne):void 0}(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"emit",this)).call.apply(A,[this,D.data.eventName].concat(_(D.data.args)));var N,L=(N=D.data,Array.isArray(N)?N:Array.from(N)),V=L[0],G=L.slice(1);if(V===1)this._onEvent.apply(this,_(G));else{if(V!==0)throw new Error("Wrong message type '"+V+"'");this._onResult.apply(this,_(G))}}},{key:"_onResult",value:function(D,A,N){var L=this._messages.get(D),V=g(L,2),G=V[0],$=V[1];return this._messages.delete(D),A===1?G(N):$(N)}},{key:"_onEvent",value:function(D,A,N){var L=this._messages.get(D),V=g(L,3)[2];V&&V(A,N)}}]),O}(S);l.exports=C},function(l,h,f){l.exports=function(){return f(3)(`!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=r(1),c=0,l=1,s=0,y=1,p="main",b=function(e){return"object"===(void 0===e?"undefined":i(e))&&"function"==typeof e.then&&"function"==typeof e.catch};var v=function e(t,r){u(this,e),this.payload=t,this.transferable=r};e.exports=function(e){var t,r,i,h=(i=e,(r=p)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t),d=self.postMessage.bind(self),m=new(function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var r,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(r,[this,e].concat(i))}},{key:"operation",value:function(e,t){return h[e]=t,this}}]),t}(f)),g=function(e,t,r){var n=function(t){t&&t instanceof v?w(e,y,t.payload,t.transferable):w(e,y,t)},o=function(t){w(e,s,{message:t.message,stack:t.stack})};try{var i=_(e,t,r);b(i)?i.then(n).catch(o):n(i)}catch(e){o(e)}},_=function(e,t,r){var n=h[r||p];if(!n)throw new Error("Not found handler for this request");return n(t,O.bind(null,e))},w=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];d([c,e,t,r],n)},O=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");d([l,e,t,r])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?g.apply(void 0,a(t)):t&&t.eventName&&m.emitLocally.apply(m,[t.eventName].concat(a(t.args)))})),m},e.exports.TransferableResponse=v},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return n(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,a=void 0;try{for(var u,f=this.__listeners[e][Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var c=u.value;c.apply(void 0,r)}}catch(e){i=!0,a=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(e,t){var r=this,n=function n(){r.off(e,n),t.apply(void 0,arguments)};return this.on(e,n)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}();e.exports=o},function(e,t,r){"use strict";r.r(t);var n=r(0);r.n(n)()().operation("binary",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsBinaryString(a)})}(e,t)).operation("buffer",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsArrayBuffer(a)})}(e,t)).operation("compare",({buf1:e,buf2:t})=>(function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),n=new DataView(t);for(var o=e.byteLength;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0})(e,t))}]);`,null)}},function(l,h,f){var g=function(){function _(S,C){for(var I=0;I<C.length;I++){var O=C[I];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(S,O.key,O)}}return function(S,C,I){return C&&_(S.prototype,C),I&&_(S,I),S}}(),b=function(){function _(){(function(S,C){if(!(S instanceof C))throw new TypeError("Cannot call a class as a function")})(this,_),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return g(_,[{key:"emit",value:function(S){if(!this.__listeners[S])return this;for(var C=arguments.length,I=Array(C>1?C-1:0),O=1;O<C;O++)I[O-1]=arguments[O];var D=!0,A=!1,N=void 0;try{for(var L,V=this.__listeners[S][Symbol.iterator]();!(D=(L=V.next()).done);D=!0){var G=L.value;G.apply(void 0,I)}}catch($){A=!0,N=$}finally{try{!D&&V.return&&V.return()}finally{if(A)throw N}}return this}},{key:"once",value:function(S,C){var I=this,O=function D(){I.off(S,D),C.apply(void 0,arguments)};return this.on(S,O)}},{key:"on",value:function(S,C){return this.__listeners[S]||(this.__listeners[S]=[]),this.__listeners[S].push(C),this}},{key:"off",value:function(S,C){return this.__listeners[S]=C?this.__listeners[S].filter(function(I){return I!==C}):[],this}}]),_}();l.exports=b},function(l,h,f){var g=window.URL||window.webkitURL;l.exports=function(b,_){try{try{var S;try{(S=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(b),S=S.getBlob()}catch{S=new Blob([b])}return new Worker(g.createObjectURL(S))}catch{return new Worker("data:application/javascript,"+encodeURIComponent(b))}}catch{if(!_)throw Error("Inline worker is not supported");return new Worker(_)}}},function(l,h,f){f.r(h);var g=f(0),b=f.n(g),_=f(1),S=f.n(_);f.d(h,"workersEnabled",function(){return C}),f.d(h,"default",function(){return I});let C=!!window.Worker;class I{static toBinaryStringWithWorker(D,A){return ie(this,null,function*(){let N=new b.a(new S.a),L=yield N.exec("binary",{blob:D,chunk:A});return N.terminate(),L})}static toBinaryStringWithoutWorker(D,A){return function(N,L){return new Promise((V,G)=>{let $=new FileReader,Y=L?Math.min(L,N.size):N.size,re=N.slice(0,Y);$.onload=()=>V($.result),$.onerror=G,$.readAsBinaryString(re)})}(D,A)}static toBinaryString(D,A,N=!0){return N&&C?this.toBinaryStringWithWorker(D,A):this.toBinaryStringWithoutWorker(D,A)}static toArrayBufferWithWorker(D,A){return ie(this,null,function*(){let N=new b.a(new S.a),L=yield N.exec("buffer",{blob:D,chunk:A});return N.terminate(),L})}static toArrayBufferWithoutWorker(D,A){return function(N,L){return new Promise((V,G)=>{let $=new FileReader,Y=L?Math.min(L,N.size):N.size,re=N.slice(0,Y);$.onload=()=>V($.result),$.onerror=G,$.readAsArrayBuffer(re)})}(D,A)}static toArrayBuffer(D,A,N=!0){return N&&C?this.toArrayBufferWithWorker(D,A):this.toArrayBufferWithoutWorker(D,A)}static compareBuffersWithWorker(D,A){return ie(this,null,function*(){if(D===A)return!0;let N=new b.a(new S.a),L=yield N.exec("compare",{buf1:D,buf2:A},[D,A]);return N.terminate(),L})}static compareBuffersWithoutWorker(D,A){return function(N,L){if(N===L)return!0;if(N.byteLength!==L.byteLength)return!1;let V=new DataView(N),G=new DataView(L);for(var $=N.byteLength;$--;)if(V.getUint8($)!==G.getUint8($))return!1;return!0}(D,A)}static compareBuffers(D,A,N=!0){return N&&C?this.compareBuffersWithWorker(D,A):this.compareBuffersWithoutWorker(D,A)}static sizeEqual(D,A){return D.size===A.size}static typeEqual(D,A){return D.type===A.type}static magicNumbersEqual(D,A,N=!0){return ie(this,null,function*(){if(D===A)return!0;let L=[24,16,14,12,8,6,4],[V,G]=yield Promise.all([this.toBinaryString(D,24,N),this.toBinaryString(A,24,N)]);for(let $ of L)if(V.substring(0,$)===G.substring(0,$))return!0;return!1})}static bytesEqualWithBinaryString(D,A,N,L=!0){return ie(this,null,function*(){if(D===A)return!0;let[V,G]=yield Promise.all([this.toBinaryString(D,N,L),this.toBinaryString(A,N,L)]);return V===G})}static bytesEqualWithArrayBuffer(D,A,N,L=!0){return ie(this,null,function*(){if(D===A)return!0;let[V,G]=yield Promise.all([this.toArrayBuffer(D,N,L),this.toArrayBuffer(A,N,L)]);return this.compareBuffers(V,G,L)})}static isEqual(D,A){return ie(this,arguments,function*(N,L,{methods:V=["size","type","magic","byte"],byte:G="buffer",partial:$=!1,chunks:Y=null,worker:re=!0}={}){let ne=null;for(let le of V){if(ne===!1||$&&ne===!0)break;switch(le){case"byte":case"bytes":case"content":Y=Y instanceof Array?Y:[N.size],ne=!0;for(let Ce of Y){let ve=!1;ve=G==="buffer"?yield this.bytesEqualWithArrayBuffer(N,L,Ce,re):yield this.bytesEqualWithBinaryString(N,L,Ce,re),ve||(ne=!1)}break;case"magic":case"headers":case"numbers":case"mime":ne=yield this.magicNumbersEqual(N,L,re);break;case"size":case"sizes":ne=this.sizeEqual(N,L);break;case"type":case"types":ne=this.typeEqual(N,L);break;default:throw new Error("Blob-compare : Unknown comparison method")}}return ne})}}}])})}),gfe={};Z(gfe,{ToolbarDropdownSelect:()=>oLe,default:()=>lLe}),t.exports=pe(gfe),Me(),Qe();var vfe=Ut;Kt();var HOe=0,GOe=class{constructor(s){this._studio=s,ye(this,"_id"),ye(this,"_state",{type:"Ready"}),this._id=String(HOe++)}get status(){return this._state.type}reset(){let{_state:s}=this;if(s.type!=="Ready")if(s.type==="Captured")this._state={type:"Ready"},s.transaction.discard(),s.flagsTransaction.discard();else throw s.type==="Committed"?new Error("This scrub is already committed and can't be reset."):new Error("This scrub is already discarded and can't be reset.")}commit(){let{_state:s}=this;if(s.type==="Captured")s.transaction.commit(),s.flagsTransaction.discard(),this._state={type:"Committed"};else if(s.type==="Ready"){console.warn("Scrub is empty. Nothing to commit.");return}else throw s.type==="Committed"?new Error("This scrub is already committed."):new Error("This scrub is already discarded and can't be comitted.")}capture(s){if(this._state.type==="Captured"&&this.reset(),this._state.type==="Ready"){let a=!0;try{this._state=F({type:"Captured"},this._capture(s)),a=!1}finally{a&&(console.error("This scrub's callback threw an error. We're undo-ing all of the changes made by this scrub, and marking it as discarded."),this._state={type:"Discarded"})}}else throw this._state.type==="Committed"?new Error("This scrub is already committed and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.commit()"):new Error("This scrub is already discarded and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.discard()")}_capture(s){let a=[],l=this._studio.tempTransaction(f=>{let g=!0,b={set:(_,S)=>{if(!g)throw new Error("You seem to have called the scrub api after scrub.capture()");let{root:C,path:I}=(0,vfe.getPointerParts)(_);if(!at(C))throw new Error("We can only scrub props of Sheet Objects for now");f.set(_,S),a.push(_)}};try{s(b)}finally{g=!1}}),h=this._studio.tempTransaction(({stateEditors:f})=>{a.forEach(g=>{let{root:b,path:_}=(0,vfe.getPointerParts)(g);if(!at(b))return;let S=b.template.getDefaultsAtPointer(g);wt(S,(C,I)=>{f.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey.propsBeingScrubbed.flag(B(F({},b.address),{pathToProp:I}))},_)})});return{transaction:l,flagsTransaction:h}}discard(){let{_state:s}=this;if(s.type==="Captured"||s.type==="Ready")s.type==="Captured"&&(s.transaction.discard(),s.flagsTransaction.discard()),this._state={type:"Discarded"};else throw s.type==="Committed"?new Error("This scrub is already committed and can't be discarded."):new Error("This scrub is already discarded")}},WOe=Ut,yfe=typeof window<"u"?Promise.resolve().then(()=>(COe(),nfe)).then(s=>s.default):null,$Oe=class{constructor(s){this.studio=s,ye(this,"_rendered",!1),ye(this,"_nonSSRBits",yfe?yfe.then(a=>new a):Promise.reject()),ye(this,"ready",this._nonSSRBits.then(()=>{},()=>{}))}render(){this._rendered||(this._rendered=!0,this._nonSSRBits.then(s=>{s.render()}).catch(s=>{throw console.error(s),s}))}hide(){this.studio.transaction(({drafts:s})=>{s.ahistoric.visibilityState="everythingIsHidden"})}restore(){this.render(),this.studio.transaction(({drafts:s})=>{s.ahistoric.visibilityState="everythingIsVisible"})}get isHidden(){return(0,WOe.val)(this.studio.atomP.ahistoric.visibilityState)==="everythingIsHidden"}renderToolset(s,a){let l=!1,h=null;return this._nonSSRBits.then(f=>{l||(h=f.renderToolset(s,a))}).catch(f=>{console.error(f)}),()=>{if(h){h();return}l||(l=!0)}}},aO=Ut;function KOe(s){return s}var XOe=(s,a=KOe)=>{let l=h=>({type:s,payload:a(h)});return l.type=s,l.is=h=>h&&h.type&&h.type===s,l},hd=XOe,bfe=X(ROe()),_fe=X(VOe());$y();var lO,qOe=new Uint8Array(16);function YOe(){if(!lO&&(lO=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!lO))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return lO(qOe)}var ZOe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function QOe(s){return typeof s=="string"&&ZOe.test(s)}var JOe=QOe,yo=[];for(uO=0;uO<256;++uO)yo.push((uO+256).toString(16).substr(1));var uO;function e3e(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=(yo[s[a+0]]+yo[s[a+1]]+yo[s[a+2]]+yo[s[a+3]]+"-"+yo[s[a+4]]+yo[s[a+5]]+"-"+yo[s[a+6]]+yo[s[a+7]]+"-"+yo[s[a+8]]+yo[s[a+9]]+"-"+yo[s[a+10]]+yo[s[a+11]]+yo[s[a+12]]+yo[s[a+13]]+yo[s[a+14]]+yo[s[a+15]]).toLowerCase();if(!JOe(l))throw TypeError("Stringified UUID is invalid");return l}var t3e=e3e;function n3e(s,a,l){s=s||{};var h=s.random||(s.rng||YOe)();if(h[6]=h[6]&15|64,h[8]=h[8]&63|128,a){l=l||0;for(var f=0;f<16;++f)a[l+f]=h[f];return a}return t3e(h)}var r3e=n3e,_C={replaceHistory:hd("@history/replaceHistory"),startHistoryFromScratch:hd("@history/startHistoryFromScratch"),undo:hd("@history/undo"),redo:hd("@history/redo")},i3e={type:"@history/unknownAction",payload:""},s3e={maxNumberOfCommits:100},o3e=(s,a=s3e)=>{let l=b6(s(void 0,i3e));return function(h,f){return _C.startHistoryFromScratch.is(f)?b6(s(void 0,f.payload)):_C.replaceHistory.is(f)?f.payload:_C.undo.is(f)?h?u3e(h):l:_C.redo.is(f)?h?c3e(h):l:h?a3e(h,s(h.innerState,f),a):b6(s(void 0,f))}};function b6(s){return{currentCommitHash:void 0,commitsByHash:{},listOfCommitHashes:[],innerState:s}}function a3e(s,a,l){if(a===s.innerState)return s;let h=l3e(s.innerState,a);if(h.forwardDiff.length===0)return s;let f=eh(s.listOfCommitHashes),g={currentCommitHash:h.hash,commitsByHash:F({},s.commitsByHash),listOfCommitHashes:[...s.listOfCommitHashes],innerState:a};if(s.currentCommitHash!==f){let b=s.listOfCommitHashes.findIndex(_=>_===s.currentCommitHash);s.listOfCommitHashes.slice(b+1).forEach(_=>{delete g.commitsByHash[_]}),g.listOfCommitHashes.splice(b+1,g.listOfCommitHashes.length)}if(g.listOfCommitHashes.push(h.hash),g.commitsByHash[h.hash]=h,g.listOfCommitHashes.length>l.maxNumberOfCommits){let b=g.listOfCommitHashes.length-l.maxNumberOfCommits;g.listOfCommitHashes.slice(0,b).forEach(_=>{delete g.commitsByHash[_]}),g.listOfCommitHashes.splice(0,b)}return g}function l3e(s,a){let l=bfe.default.diff(s,a,{invertible:!1}),h=bfe.default.diff(a,s,{invertible:!1}),f=Date.now(),g=r3e();return{forwardDiff:l,backwardDiff:h,timestamp:f,hash:g}}function u3e(s){if(s.currentCommitHash===void 0)return s;let a=s.listOfCommitHashes.findIndex(b=>b===s.currentCommitHash);if(a===-1)throw new Error("This should never happen");let l=s.commitsByHash[s.currentCommitHash],h=(0,_fe.default)(s.innerState,l.backwardDiff),f=a-1,g=f===-1?void 0:s.listOfCommitHashes[f];return B(F({},s),{currentCommitHash:g,innerState:h})}function c3e(s){if(s.listOfCommitHashes.length===0)return s;let a=s.listOfCommitHashes.findIndex(b=>b===s.currentCommitHash);if(a===s.listOfCommitHashes.length-1)return s;let l=a+1,h=s.listOfCommitHashes[l],f=s.commitsByHash[h],g=(0,_fe.default)(s.innerState,f.forwardDiff);return B(F({},s),{currentCommitHash:h,innerState:g})}HD();var cO={ahistoric:{visibilityState:"everythingIsVisible",theTrigger:{position:{closestCorner:"bottomLeft",distanceFromHorizontalEdge:.02,distanceFromVerticalEdge:.02}},coreByProject:{},projects:{stateByProjectId:{}}},historic:{projects:{stateByProjectId:{}},autoKey:!0,coreByProject:{},panelInstanceDesceriptors:{}},ephemeral:{initialised:!1,coreByProject:{},projects:{stateByProjectId:{}},extensions:{byId:{},paneClasses:{}},showOutline:!1}},wfe=hd("@storeBundle/replacePersistentState",s=>s),xfe=hd("@storeBundle/reduceParts",s=>s),o_={historic:_C,replacePersistentState:wfe,reduceParts:xfe},Sfe=hd("@storeBundle/setInnerHistoricState",s=>s),d3e=(s=cO.historic,a)=>Sfe.is(a)?a.payload:s,_6=o3e(d3e),Efe=(s,a)=>{if(wfe.is(a)){let{historic:l,ahistoric:h}=a.payload,f=(s==null?void 0:s.ephemeral)||cO.ephemeral;return{$persistent:{historic:l,ahistoric:h},ephemeral:f}}else if(s){let{historic:l,ahistoric:h}=s.$persistent,{ephemeral:f}=s;if(xfe.is(a)){let g={historic:s.$persistent.historic.innerState,ahistoric:s.$persistent.ahistoric,ephemeral:s.ephemeral},b=a.payload(g);if(b===g)return s;l.innerState!==b.historic&&(l=_6(l,Sfe(b.historic))),h=b.ahistoric,f=b.ephemeral}else{let g=_6(l,a);if(g===l)return s;l=g}return{$persistent:l===s.$persistent.historic&&h===s.$persistent.ahistoric?s.$persistent:{historic:l,ahistoric:h},ephemeral:f}}else{let l=_6(void 0,{}),h=cO.ahistoric,f=cO.ephemeral;return{$persistent:{historic:l,ahistoric:h},ephemeral:f}}},Cfe=hd("@history/pushTempAction",s=>s),Pfe=hd("@history/discardTempAction",s=>s),Tfe=hd("@history/commitTempAction",s=>s),h3e=0,p3e=()=>{let s=h3e++;return{push:a=>Cfe({id:s,originalAction:a}),discard:()=>Pfe(s),commit:()=>Tfe(s)}},f3e=(s,a)=>{if(s){let{tempActions:l,permanent:h}=s.$temps,f;if(Cfe.is(a))l=[...l,a];else if(Tfe.is(a)){let b=l.find(_=>_.payload.id===a.payload);b?(f=b.payload.originalAction,l=l.filter(_=>_.payload.id!==a.payload)):jD.error("Comitting temp action group ".concat(a.payload," isn't possible as this group doesn't exist"))}else Pfe.is(a)?l=l.filter(b=>b.payload.id!==a.payload):f=a;f&&(h=Efe(s.$temps.permanent,f));let g={historic:h.$persistent.historic.innerState,ahistoric:h.$persistent.ahistoric,ephemeral:h.ephemeral};for(let b of l)g=b.payload.originalAction.payload(g);return F({$temps:{tempActions:l,permanent:h},$persistent:h.$persistent},g)}else{let l=Efe(void 0,a);return{$temps:{permanent:l,tempActions:[]},$persistent:l.$persistent,historic:l.$persistent.historic.innerState,ahistoric:l.$persistent.ahistoric,ephemeral:l.ephemeral}}};ed(),ed(),yh();function Mfe(s,a){if(typeof s!="object"||s===null)return;if(a.length===0){for(let b of Object.keys(s))delete s[b];return}let l=a.slice(0,a.length-1),h=s,f=new WeakMap;for(let b of l){let _=h,S=_[b];if(typeof S!="object"||S===null)return;f.set(S,_),h=S}let g=a.slice().reverse();for(let b of g){if(delete h[b],Object.keys(h).length>0)return;h=f.get(h)}}function m3e(s,{scale:a,origin:l,translate:h}){let f=l+(s-l)*a;return h+f}function Ju(s){for(var a=arguments.length,l=Array(a>1?a-1:0),h=1;h<a;h++)l[h-1]=arguments[h];throw Error("[Immer] minified error nr: "+s+(l.length?" "+l.map(function(f){return"'"+f+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function a_(s){return!!s&&!!s[ll]}function Ov(s){return!!s&&(function(a){if(!a||typeof a!="object")return!1;var l=Object.getPrototypeOf(a);if(l===null)return!0;var h=Object.hasOwnProperty.call(l,"constructor")&&l.constructor;return h===Object||typeof h=="function"&&Function.toString.call(h)===x3e}(s)||Array.isArray(s)||!!s[Bfe]||!!s.constructor[Bfe]||x6(s)||S6(s))}function wC(s,a,l){l===void 0&&(l=!1),l_(s)===0?(l?Object.keys:L6)(s).forEach(function(h){l&&typeof h=="symbol"||a(h,s[h],s)}):s.forEach(function(h,f){return a(f,h,s)})}function l_(s){var a=s[ll];return a?a.i>3?a.i-4:a.i:Array.isArray(s)?1:x6(s)?2:S6(s)?3:0}function w6(s,a){return l_(s)===2?s.has(a):Object.prototype.hasOwnProperty.call(s,a)}function g3e(s,a){return l_(s)===2?s.get(a):s[a]}function kfe(s,a,l){var h=l_(s);h===2?s.set(a,l):h===3?(s.delete(a),s.add(l)):s[a]=l}function v3e(s,a){return s===a?s!==0||1/s==1/a:s!=s&&a!=a}function x6(s){return _3e&&s instanceof Map}function S6(s){return w3e&&s instanceof Set}function Lv(s){return s.o||s.t}function E6(s){if(Array.isArray(s))return Array.prototype.slice.call(s);var a=S3e(s);delete a[ll];for(var l=L6(a),h=0;h<l.length;h++){var f=l[h],g=a[f];g.writable===!1&&(g.writable=!0,g.configurable=!0),(g.get||g.set)&&(a[f]={configurable:!0,writable:!0,enumerable:g.enumerable,value:s[f]})}return Object.create(Object.getPrototypeOf(s),a)}function C6(s,a){return a===void 0&&(a=!1),P6(s)||a_(s)||!Ov(s)||(l_(s)>1&&(s.set=s.add=s.clear=s.delete=y3e),Object.freeze(s),a&&wC(s,function(l,h){return C6(h,!0)},!0)),s}function y3e(){Ju(2)}function P6(s){return s==null||typeof s!="object"||Object.isFrozen(s)}function kh(s){var a=E3e[s];return a||Ju(18,s),a}function Afe(){return xC}function T6(s,a){a&&(kh("Patches"),s.u=[],s.s=[],s.v=a)}function dO(s){M6(s),s.p.forEach(b3e),s.p=null}function M6(s){s===xC&&(xC=s.l)}function Ife(s){return xC={p:[],l:xC,h:s,m:!0,_:0}}function b3e(s){var a=s[ll];a.i===0||a.i===1?a.j():a.O=!0}function k6(s,a){a._=a.p.length;var l=a.p[0],h=s!==void 0&&s!==l;return a.h.g||kh("ES5").S(a,s,h),h?(l[ll].P&&(dO(a),Ju(4)),Ov(s)&&(s=hO(a,s),a.l||pO(a,s)),a.u&&kh("Patches").M(l[ll],s,a.u,a.s)):s=hO(a,l,[]),dO(a),a.u&&a.v(a.u,a.s),s!==Ffe?s:void 0}function hO(s,a,l){if(P6(a))return a;var h=a[ll];if(!h)return wC(a,function(g,b){return Rfe(s,h,a,g,b,l)},!0),a;if(h.A!==s)return a;if(!h.P)return pO(s,h.t,!0),h.t;if(!h.I){h.I=!0,h.A._--;var f=h.i===4||h.i===5?h.o=E6(h.k):h.o;wC(h.i===3?new Set(f):f,function(g,b){return Rfe(s,h,f,g,b,l)}),pO(s,f,!1),l&&s.u&&kh("Patches").R(h,l,s.u,s.s)}return h.o}function Rfe(s,a,l,h,f,g){if(a_(f)){var b=hO(s,f,g&&a&&a.i!==3&&!w6(a.D,h)?g.concat(h):void 0);if(kfe(l,h,b),!a_(b))return;s.m=!1}if(Ov(f)&&!P6(f)){if(!s.h.F&&s._<1)return;hO(s,f),a&&a.A.l||pO(s,f)}}function pO(s,a,l){l===void 0&&(l=!1),s.h.F&&s.m&&C6(a,l)}function A6(s,a){var l=s[ll];return(l?Lv(l):s)[a]}function Dfe(s,a){if(a in s)for(var l=Object.getPrototypeOf(s);l;){var h=Object.getOwnPropertyDescriptor(l,a);if(h)return h;l=Object.getPrototypeOf(l)}}function I6(s){s.P||(s.P=!0,s.l&&I6(s.l))}function R6(s){s.o||(s.o=E6(s.t))}function D6(s,a,l){var h=x6(a)?kh("MapSet").N(a,l):S6(a)?kh("MapSet").T(a,l):s.g?function(f,g){var b=Array.isArray(f),_={i:b?1:0,A:g?g.A:Afe(),P:!1,I:!1,D:{},l:g,t:f,k:null,o:null,j:null,C:!1},S=_,C=mO;b&&(S=[_],C=gO);var I=Proxy.revocable(S,C),O=I.revoke,D=I.proxy;return _.k=D,_.j=O,D}(a,l):kh("ES5").J(a,l);return(l?l.A:Afe()).p.push(h),h}function fO(s){return a_(s)||Ju(22,s),function a(l){if(!Ov(l))return l;var h,f=l[ll],g=l_(l);if(f){if(!f.P&&(f.i<4||!kh("ES5").K(f)))return f.t;f.I=!0,h=Ofe(l,g),f.I=!1}else h=Ofe(l,g);return wC(h,function(b,_){f&&g3e(f.t,b)===_||kfe(h,b,a(_))}),g===3?new Set(h):h}(s)}function Ofe(s,a){switch(a){case 2:return new Map(s);case 3:return Array.from(s)}return E6(s)}var Lfe,xC,O6=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",_3e=typeof Map<"u",w3e=typeof Set<"u",Nfe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Ffe=O6?Symbol.for("immer-nothing"):((Lfe={})["immer-nothing"]=!0,Lfe),Bfe=O6?Symbol.for("immer-draftable"):"__$immer_draftable",ll=O6?Symbol.for("immer-state"):"__$immer_state",x3e=""+Object.prototype.constructor,L6=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:Object.getOwnPropertyNames,S3e=Object.getOwnPropertyDescriptors||function(s){var a={};return L6(s).forEach(function(l){a[l]=Object.getOwnPropertyDescriptor(s,l)}),a},E3e={},mO={get:function(s,a){if(a===ll)return s;var l=Lv(s);if(!w6(l,a))return function(f,g,b){var _,S=Dfe(g,b);return S?"value"in S?S.value:(_=S.get)===null||_===void 0?void 0:_.call(f.k):void 0}(s,l,a);var h=l[a];return s.I||!Ov(h)?h:h===A6(s.t,a)?(R6(s),s.o[a]=D6(s.A.h,h,s)):h},has:function(s,a){return a in Lv(s)},ownKeys:function(s){return Reflect.ownKeys(Lv(s))},set:function(s,a,l){var h=Dfe(Lv(s),a);if(h!=null&&h.set)return h.set.call(s.k,l),!0;if(!s.P){var f=A6(Lv(s),a),g=f==null?void 0:f[ll];if(g&&g.t===l)return s.o[a]=l,s.D[a]=!1,!0;if(v3e(l,f)&&(l!==void 0||w6(s.t,a)))return!0;R6(s),I6(s)}return s.o[a]===l&&typeof l!="number"&&(l!==void 0||a in s.o)||(s.o[a]=l,s.D[a]=!0,!0)},deleteProperty:function(s,a){return A6(s.t,a)!==void 0||a in s.t?(s.D[a]=!1,R6(s),I6(s)):delete s.D[a],s.o&&delete s.o[a],!0},getOwnPropertyDescriptor:function(s,a){var l=Lv(s),h=Reflect.getOwnPropertyDescriptor(l,a);return h&&{writable:!0,configurable:s.i!==1||a!=="length",enumerable:h.enumerable,value:l[a]}},defineProperty:function(){Ju(11)},getPrototypeOf:function(s){return Object.getPrototypeOf(s.t)},setPrototypeOf:function(){Ju(12)}},gO={};wC(mO,function(s,a){gO[s]=function(){return arguments[0]=arguments[0][0],a.apply(this,arguments)}}),gO.deleteProperty=function(s,a){return mO.deleteProperty.call(this,s[0],a)},gO.set=function(s,a,l){return mO.set.call(this,s[0],a,l,s[0])};var C3e=function(){function s(l){var h=this;this.g=Nfe,this.F=!0,this.produce=function(f,g,b){if(typeof f=="function"&&typeof g!="function"){var _=g;g=f;var S=h;return function(A){var N=this;A===void 0&&(A=_);for(var L=arguments.length,V=Array(L>1?L-1:0),G=1;G<L;G++)V[G-1]=arguments[G];return S.produce(A,function($){var Y;return(Y=g).call.apply(Y,[N,$].concat(V))})}}var C;if(typeof g!="function"&&Ju(6),b!==void 0&&typeof b!="function"&&Ju(7),Ov(f)){var I=Ife(h),O=D6(h,f,void 0),D=!0;try{C=g(O),D=!1}finally{D?dO(I):M6(I)}return typeof Promise<"u"&&C instanceof Promise?C.then(function(A){return T6(I,b),k6(A,I)},function(A){throw dO(I),A}):(T6(I,b),k6(C,I))}if(!f||typeof f!="object")return(C=g(f))===Ffe?void 0:(C===void 0&&(C=f),h.F&&C6(C,!0),C);Ju(21,f)},this.produceWithPatches=function(f,g){return typeof f=="function"?function(S){for(var C=arguments.length,I=Array(C>1?C-1:0),O=1;O<C;O++)I[O-1]=arguments[O];return h.produceWithPatches(S,function(D){return f.apply(void 0,[D].concat(I))})}:[h.produce(f,g,function(S,C){b=S,_=C}),b,_];var b,_},typeof(l==null?void 0:l.useProxies)=="boolean"&&this.setUseProxies(l.useProxies),typeof(l==null?void 0:l.autoFreeze)=="boolean"&&this.setAutoFreeze(l.autoFreeze)}var a=s.prototype;return a.createDraft=function(l){Ov(l)||Ju(8),a_(l)&&(l=fO(l));var h=Ife(this),f=D6(this,l,void 0);return f[ll].C=!0,M6(h),f},a.finishDraft=function(l,h){var f=l&&l[ll],g=f.A;return T6(g,h),k6(void 0,g)},a.setAutoFreeze=function(l){this.F=l},a.setUseProxies=function(l){l&&!Nfe&&Ju(20),this.g=l},a.applyPatches=function(l,h){var f;for(f=h.length-1;f>=0;f--){var g=h[f];if(g.path.length===0&&g.op==="replace"){l=g.value;break}}var b=kh("Patches").$;return a_(l)?b(l,h):this.produce(l,function(_){return b(_,h.slice(f+1))})},s}(),ul=new C3e;ul.produce,ul.produceWithPatches.bind(ul),ul.setAutoFreeze.bind(ul),ul.setUseProxies.bind(ul),ul.applyPatches.bind(ul);var N6=ul.createDraft.bind(ul),F6=ul.finishDraft.bind(ul);g5(),Iu(),ES(),Yy(),Qy(),zD(),di(),Kt();var ec={create(s){let a={byId:{},allIds:{}};if(s)for(let[l,h]of s)a.byId[l]=h,a.allIds[l]=!0;return a},shallowCopy(s){return{byId:F({},s==null?void 0:s.byId),allIds:F({},s==null?void 0:s.allIds)}},add(s,a,l){return{byId:B(F({},s==null?void 0:s.byId),{[a]:l}),allIds:B(F({},s==null?void 0:s.allIds),{[a]:!0})}},merge(s){let a=ec.create();for(let l=0;l<s.length;l++)a.byId=F(F({},a.byId),s[l].byId),a.allIds=F(F({},a.allIds),s[l].allIds);return a},remove(s,a){let l=ec.shallowCopy(s);return delete l.allIds[a],delete l.byId[a],l},filter(s,a){let l=ec.shallowCopy(s);for(let[h,f]of Object.entries(l.byId))a(f)||(delete l.allIds[h],delete l.byId[h]);return l}},Ufe=s=>(B6=s,U6),B6,bo=()=>{if(B6===void 0)throw new Error("Calling stateEditors outside of a transaction is not allowed.");return B6},U6;(s=>{(a=>{(l=>{(h=>{function f(g){let b=bo().historic;b.panelPositions!=null||(b.panelPositions={}),b.panelPositions[g.panelId]=g.position}h.setPanelPosition=f})(l.panelPositions||(l.panelPositions={})),(h=>{function f(){var g;return(g=bo().historic).panels!=null||(g.panels={}),bo().historic.panels}h._ensure=f,(g=>{function b(){let _=s.studio.historic.panels._ensure();return _.outlinePanel!=null||(_.outlinePanel={}),_.outlinePanel}g._ensure=b,(_=>{function S(I){let O=[];for(let D of Oo(I))je(D)?O.push(F({type:"Project"},D.address)):bt(D)?(O.push(F({type:"Sheet"},D.template.address)),s.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(D.address)):Fe(D)?O.push(F({type:"Sheet"},D.address)):at(D)?(O.push(F({type:"SheetObject"},D.template.address)),s.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(D.sheet.address)):Ot(D)&&O.push(F({type:"SheetObject"},D.address));g._ensure().selection=O}_.set=S;function C(){g._ensure().selection=[]}_.unset=C})(g.selection||(g.selection={}))})(h.outline||(h.outline={})),(g=>{function b(){let _=s.studio.historic.panels._ensure();return _.sequenceEditor!=null||(_.sequenceEditor={}),_.sequenceEditor}g._ensure=b,(_=>{function S(){let I=g._ensure();return I.graphEditor!=null||(I.graphEditor={height:.5,isOpen:!1}),I.graphEditor}function C(I){S().isOpen=I.isOpen}_.setIsOpen=C})(g.graphEditor||(g.graphEditor={}))})(h.sequenceEditor||(h.sequenceEditor={}))})(l.panels||(l.panels={})),(h=>{(f=>{function g(b){let _=bo().historic;return _.projects.stateByProjectId[b.projectId]||(_.projects.stateByProjectId[b.projectId]={stateBySheetId:{}}),_.projects.stateByProjectId[b.projectId]}f._ensure=g,(b=>{function _(C){let I=s.studio.historic.projects.stateByProjectId._ensure(C);return I.stateBySheetId[C.sheetId]||(I.stateBySheetId[C.sheetId]={selectedInstanceId:void 0,sequenceEditor:{selectedPropsByObject:{}}}),I.stateBySheetId[C.sheetId]}b._ensure=_;function S(C){s.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(C).selectedInstanceId=C.sheetInstanceId}b.setSelectedInstanceId=S,(C=>{function I(V){let{selectedPropsByObject:G}=b._ensure(V).sequenceEditor;G[V.objectKey]||(G[V.objectKey]={});let $=G[V.objectKey],Y=Jc(V.pathToProp),re=new Set(Object.keys(cC));for(let[le,Ce]of Object.entries(fO(G)))for(let[ve,we]of Object.entries(Ce))re.delete(we);let ne=re.size>0?re.values().next().value:Object.keys(cC)[0];$[Y]=ne}C.addPropToGraphEditor=I;function O(V){let{selectedPropsByObject:G}=b._ensure(V).sequenceEditor;if(!G[V.objectKey])return;let $=G[V.objectKey],Y=Jc(V.pathToProp);$[Y]&&Mfe(G,[V.objectKey,Y])}C.removePropFromGraphEditor=O;function D(V){let G=s.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(V).sequenceEditor;return G.markerSet||(G.markerSet=ec.create()),G.markerSet}function A(V){let G=D(V.sheetAddress),$=V.markers.filter(le=>!!isFinite(le.position)).map(le=>B(F({},le),{position:V.snappingFunction(le.position)})),Y=Gr($,"id"),re=ec.filter(G,le=>le&&!Y[le.id]),ne=Gr(Object.values(re.byId),"position");$.forEach(({position:le})=>{let Ce=ne[le];Ce&&(re=ec.remove(re,Ce.id))}),Object.assign(G,ec.merge([re,ec.create($.map(le=>[le.id,le]))]))}C.replaceMarkers=A;function N(V){let G=D(V.sheetAddress);Object.assign(G,ec.remove(G,V.markerId))}C.removeMarker=N;function L(V){let G=D(V.sheetAddress).byId[V.markerId];G!==void 0&&(G.label=V.label)}C.updateMarker=L})(b.sequenceEditor||(b.sequenceEditor={}))})(f.stateBySheetId||(f.stateBySheetId={}))})(h.stateByProjectId||(h.stateByProjectId={}))})(l.projects||(l.projects={}))})(a.historic||(a.historic={})),(l=>{function h(f){bo().ephemeral.showOutline=f}l.setShowOutline=h,(f=>{(g=>{function b(_){let S=bo().ephemeral;return S.projects.stateByProjectId[_.projectId]||(S.projects.stateByProjectId[_.projectId]={stateBySheetId:{}}),S.projects.stateByProjectId[_.projectId]}g._ensure=b,(_=>{function S(C){let I=s.studio.ephemeral.projects.stateByProjectId._ensure(C);return I.stateBySheetId[C.sheetId]||(I.stateBySheetId[C.sheetId]={stateByObjectKey:{}}),I.stateBySheetId[C.sheetId]}_._ensure=S,(C=>{function I(O){var D;let A=s.studio.ephemeral.projects.stateByProjectId.stateBySheetId._ensure(O).stateByObjectKey;return A[D=O.objectKey]!=null||(A[D]={}),A[O.objectKey]}C._ensure=I,(O=>{function D(N){let L=s.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey._ensure(N);return L.valuesBeingScrubbed!=null||(L.valuesBeingScrubbed={}),L.valuesBeingScrubbed}O._ensure=D;function A(N){Xp(D(N),N.pathToProp,!0)}O.flag=A})(C.propsBeingScrubbed||(C.propsBeingScrubbed={}))})(_.stateByObjectKey||(_.stateByObjectKey={}))})(g.stateBySheetId||(g.stateBySheetId={}))})(f.stateByProjectId||(f.stateByProjectId={}))})(l.projects||(l.projects={}))})(a.ephemeral||(a.ephemeral={})),(l=>{function h(S){bo().ahistoric.pinOutline=S}l.setPinOutline=h;function f(S){bo().ahistoric.pinDetails=S}l.setPinDetails=f;function g(S){bo().ahistoric.pinNotifications=S}l.setPinNotifications=g;function b(S){bo().ahistoric.visibilityState=S}l.setVisibilityState=b;function _(S){let C=JR(S.map(D=>D.pathToProp)),I=S.map(({keyframe:D,pathToProp:A})=>({keyframe:D,pathToProp:A.slice(C.length)})),O=bo();O.ahistoric.clipboard?O.ahistoric.clipboard.keyframesWithRelativePaths=I:O.ahistoric.clipboard={keyframesWithRelativePaths:I}}l.setClipboardKeyframes=_,(S=>{(C=>{function I(O){let D=bo().ahistoric;return D.projects.stateByProjectId[O.projectId]||(D.projects.stateByProjectId[O.projectId]={stateBySheetId:{}}),D.projects.stateByProjectId[O.projectId]}C._ensure=I,(O=>{function D(N){let L=s.studio.ahistoric.projects.stateByProjectId._ensure(N);return L.collapsedItemsInOutline||(L.collapsedItemsInOutline={}),L.collapsedItemsInOutline}O._ensure=D;function A(N){let L=s.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline._ensure(N);N.isCollapsed?L[N.itemKey]=!0:delete L[N.itemKey]}O.set=A})(C.collapsedItemsInOutline||(C.collapsedItemsInOutline={})),(O=>{function D(A){let N=s.studio.ahistoric.projects.stateByProjectId._ensure(A);return N.stateBySheetId[A.sheetId]||(N.stateBySheetId[A.sheetId]={}),N.stateBySheetId[A.sheetId]}O._ensure=D,(A=>{function N(L){let V=s.studio.ahistoric.projects.stateByProjectId.stateBySheetId._ensure(L);return V.sequence||(V.sequence={}),V.sequence}A._ensure=N,(L=>{function V($){s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($).focusRange={range:$.range,enabled:$.enabled}}L.set=V;function G($){s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($).focusRange=void 0}L.unset=G})(A.focusRange||(A.focusRange={})),(L=>{function V(G){s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(G).clippedSpaceRange=F({},G.range)}L.set=V})(A.clippedSpaceRange||(A.clippedSpaceRange={})),(L=>{function V($){let Y=s.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($),re=Y.collapsableItems;return re||(re=Y.collapsableItems=ec.create()),re}function G($){let Y=V($);Object.assign(Y,ec.add(Y,$.studioSheetItemKey,{isCollapsed:$.isCollapsed}))}L.set=G})(A.sequenceEditorCollapsableItems||(A.sequenceEditorCollapsableItems={}))})(O.sequence||(O.sequence={}))})(C.stateBySheetId||(C.stateBySheetId={}))})(S.stateByProjectId||(S.stateByProjectId={}))})(l.projects||(l.projects={}))})(a.ahistoric||(a.ahistoric={}))})(s.studio||(s.studio={})),(a=>{(l=>{(h=>{function f(g){let b=bo().historic.coreByProject[g.projectId].revisionHistory,_=50;b.unshift(g.revision),b.length>_&&(b.length=_)}h.add=f})(l.revisionHistory||(l.revisionHistory={})),(h=>{function f(_){let S=bo().historic.coreByProject[_.projectId].sheetsById;return S[_.sheetId]||(S[_.sheetId]={staticOverrides:{byObject:{}}}),S[_.sheetId]}h._ensure=f;function g(_){let S=bo().historic.coreByProject[_.projectId].sheetsById[_.sheetId];if(!S)return;delete S.staticOverrides.byObject[_.objectKey];let C=S.sequence;C&&delete C.tracksByObject[_.objectKey]}h.forgetObject=g;function b(_){bo().historic.coreByProject[_.projectId].sheetsById[_.sheetId]&&delete bo().historic.coreByProject[_.projectId].sheetsById[_.sheetId]}h.forgetSheet=b,(_=>{function S(ve){let we=s.coreByProject.historic.sheetsById._ensure(ve);return we.sequence!=null||(we.sequence={subUnitsPerUnit:30,length:10,type:"PositionalSequence",tracksByObject:{}}),we.sequence}_._ensure=S;function C(ve){S(ve).length=_i(parseFloat(ve.length.toFixed(2)),.01,1/0)}_.setLength=C;function I(ve){var we;let Le=s.coreByProject.historic.sheetsById.sequence._ensure(ve).tracksByObject;return Le[we=ve.objectKey]!=null||(Le[we]={trackData:{},trackIdByPropPath:{}}),Le[ve.objectKey]}function O(ve,we){let Le=I(ve),lt=Jc(ve.pathToProp);if(typeof Le.trackIdByPropPath[lt]=="string")return;let ue=A2e(),Oe={type:"BasicKeyframedTrack",__debugName:"".concat(ve.objectKey,":").concat(lt),keyframes:[]};Le.trackData[ue]=Oe,Le.trackIdByPropPath[lt]=ue}_.setPrimitivePropAsSequenced=O;function D(ve){let we=I(ve),Le=Jc(ve.pathToProp),lt=we.trackIdByPropPath[Le];typeof lt=="string"&&(delete we.trackIdByPropPath[Le],delete we.trackData[lt],s.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(ve))}_.setPrimitivePropAsStatic=D;function A(ve){let we=I(ve);for(let Le of Object.keys(we.trackIdByPropPath)){let lt=JSON.parse(Le);if(ve.pathToProp.every((ue,Oe)=>lt[Oe]===ue)){let ue=we.trackIdByPropPath[Le];if(typeof ue!="string")continue;delete we.trackIdByPropPath[Le],delete we.trackData[ue]}}s.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfCompoundProp(ve)}_.setCompoundPropAsStatic=A;function N(ve){return I(ve).trackData[ve.trackId]}function L(ve){let we=N(ve);if(we)return we.keyframes.find(Le=>Le.id===ve.keyframeId)}function V(ve){let we=ve.snappingFunction(ve.position),Le=N(ve);if(!Le)return;let{keyframes:lt}=Le,ue=lt.findIndex(We=>We.position===we);if(ue!==-1){let We=lt[ue];We.value=ve.value;return}let Oe=z2(lt,We=>We.position<we);if(Oe===-1){lt.unshift({id:zee(),position:we,connectedRight:!0,handles:ve.handles||[.5,1,.5,0],type:ve.type||"bezier",value:ve.value});return}let Q=lt[Oe];lt.splice(Oe+1,0,{id:zee(),position:we,connectedRight:Q.connectedRight,handles:ve.handles||[.5,1,.5,0],type:ve.type||"bezier",value:ve.value})}_.setKeyframeAtPosition=V;function G(ve){let we=N(ve);if(!we)return;let{keyframes:Le}=we,lt=Le.findIndex(ue=>ue.position===ve.position);lt!==-1&&Le.splice(lt,1)}_.unsetKeyframeAtPosition=G;function $(ve){let we=N(ve);if(!we)return;let Le=fO(we.keyframes).filter(lt=>ve.keyframeIds.includes(lt.id)).map(lt=>{let ue=lt.position,Oe=ve.snappingFunction(m3e(ue,ve));return B(F({},lt),{position:Oe})});Ce(B(F({},ve),{keyframes:Le}))}_.transformKeyframes=$;function Y(ve){let we=N(ve);we&&(we.keyframes=we.keyframes.map((Le,lt)=>{let ue=we.keyframes[lt-1],Oe=ve.keyframeIds.includes(Le.id),Q=ve.keyframeIds.includes(ue==null?void 0:ue.id);return Oe&&!Q?B(F({},Le),{handles:[Le.handles[0],Le.handles[1],ve.handles[0],ve.handles[1]]}):Oe&&Q?B(F({},Le),{handles:[ve.handles[2],ve.handles[3],ve.handles[0],ve.handles[1]]}):Q?B(F({},Le),{handles:[ve.handles[2],ve.handles[3],Le.handles[2],Le.handles[3]]}):Le}))}_.setTweenBetweenKeyframes=Y;function re(ve){var we,Le,lt,ue,Oe,Q,We,Lt;let Ie=L(ve);Ie&&(Ie.handles=[(Le=(we=ve.end)==null?void 0:we[0])!=null?Le:Ie.handles[0],(ue=(lt=ve.end)==null?void 0:lt[1])!=null?ue:Ie.handles[1],(Q=(Oe=ve.start)==null?void 0:Oe[0])!=null?Q:Ie.handles[2],(Lt=(We=ve.start)==null?void 0:We[1])!=null?Lt:Ie.handles[3]])}_.setHandlesForKeyframe=re;function ne(ve){let we=N(ve);we&&(we.keyframes=we.keyframes.filter(Le=>ve.keyframeIds.indexOf(Le.id)===-1))}_.deleteKeyframes=ne;function le(ve){let we=L(ve);we&&(we.type=ve.keyframeType)}_.setKeyframeType=le;function Ce(ve){let we=N(ve);if(!we)return;let Le=fO(we.keyframes),lt=ve.keyframes.filter(Lt=>!(typeof Lt.value=="number"&&!isFinite(Lt.value)||!Lt.handles.every(Ie=>isFinite(Ie)))).map(Lt=>B(F({},Lt),{position:ve.snappingFunction(Lt.position)})),ue=Gr(lt,"id"),Oe=Le.filter(Lt=>!ue[Lt.id]),Q=Gr(Oe,"position");lt.forEach(({position:Lt})=>{let Ie=Q[Lt];Ie&&rI(Oe,Ie)});let We=sI([...Oe,...lt],"position");we.keyframes=We}_.replaceKeyframes=Ce})(h.sequence||(h.sequence={})),(_=>{(S=>{function C(A){var N;let L=s.coreByProject.historic.sheetsById._ensure(A).staticOverrides.byObject;return L[N=A.objectKey]!=null||(L[N]={}),L[A.objectKey]}function I(A){let N=C(A);Xp(N,A.pathToProp,A.value)}S.setValueOfCompoundProp=I;function O(A){let N=C(A);Xp(N,A.pathToProp,A.value)}S.setValueOfPrimitiveProp=O;function D(A){let N=s.coreByProject.historic.sheetsById._ensure(A).staticOverrides.byObject[A.objectKey];N&&Mfe(N,A.pathToProp)}S.unsetValueOfPrimitiveProp=D})(_.byObject||(_.byObject={}))})(h.staticOverrides||(h.staticOverrides={}))})(l.sheetsById||(l.sheetsById={}))})(a.historic||(a.historic={}))})(s.coreByProject||(s.coreByProject={}))})(U6||(U6={}));function z6(){let s,a,l=new Promise((f,g)=>{s=b=>{f(b),h.status="resolved"},a=b=>{g(b),h.status="rejected"}}),h={resolve:s,reject:a,promise:l,status:"pending"};return h}var P3e=Ut;function T3e(s){let a=s.getState(),l=new P3e.Atom(a);return s.subscribe(()=>{let h=s.getState();l.set(h),a=h}),l}Bc();function M3e(s){var a,l=s.Symbol;return typeof l=="function"?l.observable?a=l.observable:(a=l("observable"),l.observable=a):a="@@observable",a}var SC;typeof self<"u"?SC=self:typeof window<"u"?SC=window:typeof Gi<"u"?SC=Gi:SC=t;var k3e=M3e(SC),zfe=k3e,Vfe={INIT:"@@redux/INIT"};function jfe(s,a,l){var h;if(typeof a=="function"&&typeof l>"u"&&(l=a,a=void 0),typeof l<"u"){if(typeof l!="function")throw new Error("Expected the enhancer to be a function.");return l(jfe)(s,a)}if(typeof s!="function")throw new Error("Expected the reducer to be a function.");var f=s,g=a,b=[],_=b,S=!1;function C(){_===b&&(_=b.slice())}function I(){return g}function O(L){if(typeof L!="function")throw new Error("Expected listener to be a function.");var V=!0;return C(),_.push(L),function(){if(V){V=!1,C();var G=_.indexOf(L);_.splice(G,1)}}}function D(L){if(!Ly(L))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof L.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(S)throw new Error("Reducers may not dispatch actions.");try{S=!0,g=f(g,L)}finally{S=!1}for(var V=b=_,G=0;G<V.length;G++){var $=V[G];$()}return L}function A(L){if(typeof L!="function")throw new Error("Expected the nextReducer to be a function.");f=L,D({type:Vfe.INIT})}function N(){var L,V=O;return L={subscribe:function(G){if(typeof G!="object")throw new TypeError("Expected the observer to be an object.");function $(){G.next&&G.next(I())}$();var Y=V($);return{unsubscribe:Y}}},L[zfe]=function(){return this},L}return D({type:Vfe.INIT}),h={dispatch:D,subscribe:O,getState:I,replaceReducer:A},h[zfe]=N,h}function A3e(){for(var s=arguments.length,a=Array(s),l=0;l<s;l++)a[l]=arguments[l];return a.length===0?function(h){return h}:a.length===1?a[0]:a.reduce(function(h,f){return function(){return h(f.apply(void 0,arguments))}})}function I3e(s){let a=A3e();return jfe(s.rootReducer,void 0,a)}HD(),mS();var V6=new WeakMap,R3e=(s,a,l)=>{let h=S=>{s.dispatch(o_.replacePersistentState(S))},f=Hfe(l),g=()=>s.getState().$persistent;_();let b=()=>{let S=g(),C=V6.get(s);S!==C&&(V6.set(s,S),localStorage.setItem(f,JSON.stringify(S)))};s.subscribe(Wy(b,1e3)),window&&window.addEventListener("beforeunload",b);function _(){let S=localStorage.getItem(f);if(S){let C,I=!0;try{C=JSON.parse(S),I=!1}catch{jD.warn("Could not parse Theatre's persisted state. This must be a bug. Please report it.")}finally{I||h(C),a()}}else a()}},D3e=(s,a)=>{let l=Hfe(a),h=s.getState().$persistent;localStorage.removeItem(l),V6.set(s,h)};function Hfe(s){return s+".persistent"}Yte(),Kt(),Vp(),Qe(),xR();var vO=Ut;df(),di(),Lhe();function j6(s){if(typeof s=="boolean"||typeof s=="string"||typeof s=="number")return s;if(Ly(s)){let a={},l=!1;for(let[h,f]of Object.entries(s))j6(f)!==void 0&&(a[h]=f,l=!0);if(l)return a}else return}function Gfe(s,a,l){for(let[h,f]of Object.entries(s.props))if(f.type==="compound")Gfe(f,[...a,h],l);else{if(f.type==="enum")throw new Error("Not yet implemented");l(f,[...a,h])}}function O3e(s,a,l){return{set:(h,f)=>{s();let g=j6(f);if(typeof g>"u")return;let{root:b,path:_}=(0,vO.getPointerParts)(h);if(at(b)){let S=b.template.getMapOfValidSequenceTracks_forStudio().getValue(),C=vR(b.template.staticConfig,_);if(!C)throw new Error("Object ".concat(b.address.objectKey," does not have a prop at ").concat(JSON.stringify(_)));let I=(O,D,A)=>{if(O==null)return;if(j6(D.deserializeAndSanitize(O))===void 0)throw new Error("Invalid value ".concat(Qj(O)," for object.props").concat(A.map(V=>"[".concat(JSON.stringify(V),"]")).join("")," is invalid"));let N=B(F({},b.address),{pathToProp:A}),L=Zd(S,A);if(typeof L=="string"){let V=b.sheet.getSequence();V.position=V.closestGridPosition(V.position),a.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(B(F({},N),{trackId:L,position:V.position,value:O,snappingFunction:V.closestGridPosition,type:"bezier"}))}else a.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(B(F({},N),{value:O}))};if(C.type==="compound"){let O=(0,vO.getPointerParts)(h).path,D=O.length;Gfe(C,O,(A,N)=>{let L=N.slice(D),V=pf(g,L);if(typeof V<"u")I(V,A,N);else throw new Error("Property object.props".concat(N.map(G=>"[".concat(JSON.stringify(G),"]")).join("")," is required but not provided"))})}else{if(C.type==="enum")throw new Error("Enums aren't implemented yet");I(g,C,_)}}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},unset:h=>{s();let{root:f,path:g}=(0,vO.getPointerParts)(h);if(at(f)){let b=f.template.getMapOfValidSequenceTracks_forStudio().getValue(),_=pf(f.template.getDefaultValues().getValue(),g),S=vR(f.template.staticConfig,g),C=(I,O)=>{let D=B(F({},f.address),{pathToProp:O}),A=Zd(b,O);typeof A=="string"?a.coreByProject.historic.sheetsById.sequence.unsetKeyframeAtPosition(B(F({},D),{trackId:A,position:f.sheet.getSequence().positionSnappedToGrid})):S!==void 0&&a.coreByProject.historic.sheetsById.staticOverrides.byObject.unsetValueOfPrimitiveProp(D)};S.type==="compound"?wt(_,(I,O)=>{C(I,O)},(0,vO.getPointerParts)(h).path):C(_,g)}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},get drafts(){return s(),l},get stateEditors(){return a}}}var L3e=class{constructor(){ye(this,"_reduxStore"),ye(this,"_atom"),ye(this,"atomP"),this._reduxStore=I3e({rootReducer:f3e,devtoolsOptions:{name:"Theatre.js Studio"}}),this._atom=T3e(this._reduxStore),this.atomP=this._atom.pointer}initialize(s){let a=z6();return s.usePersistentStorage===!0?R3e(this._reduxStore,()=>{this.tempTransaction(({drafts:l})=>{l.ephemeral.initialised=!0}).commit(),a.resolve()},s.persistenceKey):(this.tempTransaction(({drafts:l})=>{l.ephemeral.initialised=!0}).commit(),a.resolve()),a.promise}getState(){return this._reduxStore.getState()}__experimental_clearPersistentStorage(s){return D3e(this._reduxStore,s),this.getState()}__dev_startHistoryFromScratch(s){this._reduxStore.dispatch(o_.historic.startHistoryFromScratch(o_.reduceParts(a=>B(F({},a),{historic:s}))))}tempTransaction(s){let a=p3e(),l,h=a.push(o_.reduceParts(f=>{let g={historic:N6(f.historic),ahistoric:N6(f.ahistoric),ephemeral:N6(f.ephemeral)},b=!0,_=()=>{if(!b)throw new Error("You seem to have called the transaction api after studio.transaction() has finished running")},S=Ufe(g),C=O3e(_,S,g);try{return s(C),b=!1,{historic:F6(g.historic),ahistoric:F6(g.ahistoric),ephemeral:F6(g.ephemeral)}}catch(I){return l=I,f}finally{Ufe(void 0)}}));if(this._reduxStore.dispatch(h),l)throw this._reduxStore.dispatch(a.discard()),l;return{commit:()=>{this._reduxStore.dispatch(a.commit())},discard:()=>{this._reduxStore.dispatch(a.discard())}}}undo(){this._reduxStore.dispatch(o_.historic.undo())}redo(){this._reduxStore.dispatch(o_.historic.redo())}createContentOfSaveFile(s){if(!this._reduxStore.getState().$persistent.historic.innerState.coreByProject[s])throw new Error("Project ".concat(s," has not been initialized."));let a=qte();this.tempTransaction(({stateEditors:h})=>{h.coreByProject.historic.revisionHistory.add({projectId:s,revision:a})}).commit();let l=this._reduxStore.getState().$persistent.historic.innerState.coreByProject[s];return F({},l)}},N3e=Ut,H6=class{constructor(){ye(this,"_values",{})}get(s,a){if(this.has(s))return this._values[s];{let l=a();return this._values[s]=l,l}}has(s){return this._values.hasOwnProperty(s)}};Kt(),af(),Me(),di(),Xj();var F3e=class{constructor(s){ye(this,"ui",{hide(){de().ui.hide()},get isHidden(){return de().ui.isHidden},restore(){de().ui.restore()},renderToolset(a,l){return de().ui.renderToolset(a,l)}}),ye(this,"_cache",new H6),ye(this,"__experimental",{__experimental_disblePlayPauseKeyboardShortcut(){jDe()},__experimental_enablePlayPauseKeyboardShortcut(){HDe()},__experimental_clearPersistentStorage(a){return de().clearPersistentStorage(a)},__experimental_createContentOfSaveFileTyped(a){return de().createContentOfSaveFile(a)}})}initialize(s){return de().initialize(s)}extend(s,a){de().extend(s,a)}transaction(s){return de().transaction(({set:a,unset:l,stateEditors:h})=>s({set:a,unset:l,__experimental_forgetObject:f=>{if(!tn(f))throw new Error("object in transactionApi.__experimental_forgetObject(object) must be the return type of sheet.object(...)");h.coreByProject.historic.sheetsById.forgetObject(f.address)},__experimental_forgetSheet:f=>{if(!Gt(f))throw new Error("sheet in transactionApi.__experimental_forgetSheet(sheet) must be the return type of project.sheet()");h.coreByProject.historic.sheetsById.forgetSheet(f.address)}}))}_getSelectionPrism(){return this._cache.get("_getSelectionPrism()",()=>(0,N3e.prism)(()=>of().filter(s=>s.type==="Theatre_SheetObject"||s.type==="Theatre_Sheet").map(s=>s.publicApi)))}_getSelection(){return this._getSelectionPrism().getValue()}setSelection(s){let a=[...s].filter(l=>tn(l)||Gt(l)).map(l=>de().corePrivateAPI(l));de().transaction(({stateEditors:l})=>{l.studio.historic.panels.outline.selection.set(a)})}onSelectionChange(s){let a=de();return this._getSelectionPrism().onChange(a.ticker,s,!0)}get selection(){return this._getSelection()}scrub(){return de().scrub()}getStudioProject(){let s=de().core;if(!s)throw new Error("You're calling studio.getStudioProject() before `@theatre/core` is loaded. To fix this:\n1. Check if `@theatre/core` is import/required in your bundle.\n2. Check the stack trace of this error and make sure the funciton that calls getStudioProject() is run after `@theatre/core` is loaded.");return de().getStudioProject(s)}debouncedScrub(s=1e3){let a,l=Wy(()=>{let h=a;h&&(a=void 0,h.commit())},s);return{capture:h=>{a||(a=this.scrub());let f=!0;try{a.capture(h),f=!1}finally{if(f){let g=a;a=void 0,g.discard()}else l()}}}}createPane(s){return de().paneManager.createPane(s)}destroyPane(s){return de().paneManager.destroyPane(s)}createContentOfSaveFile(s){return de().createContentOfSaveFile(s)}};Uee();var Nv=Ut,B3e=class{constructor(s){this._studio=s,ye(this,"_cache",new H6),this._instantiatePanesAsTheyComeIn()}_instantiatePanesAsTheyComeIn(){let s=this._getAllPanes();s.onStale(()=>{s.getValue()})}_getAllPanes(){return this._cache.get("_getAllPanels()",()=>(0,Nv.prism)(()=>{if(!(0,Nv.val)(this._studio.coreP))return{};let s=(0,Nv.val)(this._studio.atomP.historic.panelInstanceDesceriptors),a=(0,Nv.val)(this._studio.atomP.ephemeral.extensions.paneClasses),l={};for(let h of Object.values(s)){if(!h)continue;let f=a[h.paneClass];if(!f)continue;let{instanceId:g}=h,{extensionId:b,classDefinition:_}=f,S=Nv.prism.memo("instance-".concat(h.instanceId),()=>({extensionId:b,instanceId:g,definition:_}),[_]);l[g]=S}return l}))}get allPanesD(){return this._getAllPanes()}createPane(s){if(!this._studio.core)throw new Error("Can't create a pane because @theatre/core is not yet loaded");let a=(0,Nv.val)(this._studio.atomP.ephemeral.extensions.paneClasses[s].extensionId),l=(0,Nv.val)(this._studio.atomP.historic.panelInstanceDesceriptors),h;for(let f=1;f<1e3&&(h="".concat(s," #").concat(f),!!l[h]);f++);if(!a)throw new Error('Pane class "'.concat(s,'" is not registered.'));return this._studio.transaction(({drafts:f})=>{f.historic.panelInstanceDesceriptors[h]={instanceId:h,paneClass:s}}),this._getAllPanes().getValue()[h]}destroyPane(s){if(!this._studio.core)throw new Error("Can't do this yet because @theatre/core is not yet loaded");this._studio.transaction(({drafts:a})=>{delete a.historic.panelInstanceDesceriptors[s]})}},yO=Ut;Me();var Wfe=30*60*1e3,U3e=1e3*60*60;function z3e(){return ie(this,null,function*(){let s=de().atomP.ahistoric.visibilityState;if((0,yO.val)(s)==="everythingIsVisible")return;let a=z6(),l=(0,yO.pointerToPrism)(s).onStale(()=>{(0,yO.val)(s)==="everythingIsVisible"&&(l(),a.resolve(void 0))});return a.promise})}function V3e(){return ie(this,null,function*(){if(!"0.7.0".match(/COMPAT/))for(yield bO(500),yield z3e();;){let s=(0,yO.val)(de().atomP.ahistoric.updateChecker);if(s&&s.result!=="error"){let a=s.lastChecked,l=Date.now(),h=Math.abs(l-a);h<Wfe&&(yield bO(Wfe-h))}try{let a=yield fetch(new Request("https://updates.theatrejs.com/updates/0.7.0"));if(a.ok){let l=yield a.json();if(!j3e(l))throw new Error("Bad response");de().transaction(({drafts:h})=>{h.ahistoric.updateChecker={lastChecked:Date.now(),result:F({},l)}}),yield bO(1e3)}else throw new Error("HTTP Error ".concat(a.statusText))}catch{yield bO(U3e)}}})}var bO=s=>new Promise(a=>setTimeout(a,s));function j3e(s){if(typeof s!="object")return!1;let a=s;return typeof a.hasUpdates!="boolean"?!1:a.hasUpdates===!0&&typeof a.newVersion=="string"&&typeof a.releasePage=="string"||a.hasUpdates===!1}var H3e=X(RS());function Ah(s){return new Promise((a,l)=>{s.oncomplete=s.onsuccess=()=>a(s.result),s.onabort=s.onerror=()=>l(s.error)})}function $fe(s,a){let l=indexedDB.open(s);l.onupgradeneeded=()=>l.result.createObjectStore(a);let h=Ah(l);return(f,g)=>h.then(b=>g(b.transaction(a,f).objectStore(a)))}var G6;function u_(){return G6||(G6=$fe("keyval-store","keyval")),G6}function G3e(s,a=u_()){return a("readonly",l=>Ah(l.get(s)))}function W3e(s,a,l=u_()){return l("readwrite",h=>(h.put(a,s),Ah(h.transaction)))}function $3e(s,a=u_()){return a("readwrite",l=>(l.delete(s),Ah(l.transaction)))}function W6(s,a){return s.openCursor().onsuccess=function(){this.result&&(a(this.result),this.result.continue())},Ah(s.transaction)}function K3e(s=u_()){return s("readonly",a=>{if(a.getAllKeys)return Ah(a.getAllKeys());let l=[];return W6(a,h=>l.push(h.key)).then(()=>l)})}function X3e(s=u_()){return s("readonly",a=>{if(a.getAll)return Ah(a.getAll());let l=[];return W6(a,h=>l.push(h.value)).then(()=>l)})}function q3e(s=u_()){return s("readonly",a=>{if(a.getAll&&a.getAllKeys)return Promise.all([Ah(a.getAllKeys()),Ah(a.getAll())]).then(([h,f])=>h.map((g,b)=>[g,f[b]]));let l=[];return s("readonly",h=>W6(h,f=>l.push([f.key,f.value])).then(()=>l))})}var Y3e=s=>{let a=$fe("theatrejs-".concat(s),"default-store");return{set:(l,h)=>W3e(l,h,a),get:l=>G3e(l,a),del:l=>$3e(l,a),keys:()=>K3e(a),entries:()=>q3e(a),values:()=>X3e(a)}};_re(),WE();var Kfe="theatre-0.4",Z3e=`You seem to have imported '@theatre/studio' but haven't initialized it. You can initialize the studio by:
\`\`\`
import studio from '@theatre/studio'
studio.initialize()
\`\`\`

* If you didn't mean to import '@theatre/studio', this means that your bundler is not tree-shaking it. This is most likely a bundler misconfiguration.

* If you meant to import '@theatre/studio' without showing its UI, you can do that by running:

\`\`\`
import studio from '@theatre/studio'
studio.initialize()
studio.ui.hide()
\`\`\`
`,Q3e="You seem to have imported '@theatre/studio' but called `studio.initialize()` after some delay.\nTheatre.js projects remain in pending mode (won't play their sequences) until the studio is initialized, so you should place the `studio.initialize()` line right after the import line:\n\n```\nimport studio from '@theatre/studio'\n// ... and other imports\n\nstudio.initialize()\n```\n",J3e=class{constructor(){ye(this,"ui"),ye(this,"publicApi"),ye(this,"address"),ye(this,"_projectsProxy",new aO.PointerProxy(new aO.Atom({}).pointer)),ye(this,"projectsP",this._projectsProxy.pointer),ye(this,"_store",new L3e),ye(this,"_corePrivateApi"),ye(this,"_cache",new H6),ye(this,"paneManager"),ye(this,"_coreAtom",new aO.Atom({})),ye(this,"_initializedDeferred",z6()),ye(this,"_initializeFnCalled",!1),ye(this,"_didWarnAboutNotInitializing",!1),ye(this,"_coreBits"),ye(this,"_rafDriver"),this.address={studioId:RE(10)},this.publicApi=new F3e(this),this.ui=new $Oe(this),this._attachToIncomingProjects(),this.paneManager=new B3e(this),typeof window<"u"&&setTimeout(()=>{this._initializeFnCalled||(console.error(Z3e),this._didWarnAboutNotInitializing=!0)},100)}get ticker(){if(!this._rafDriver)throw new Error("`studio.ticker` was read before studio.initialize() was called.");return this._rafDriver.ticker}get atomP(){return this._store.atomP}initialize(s){return ie(this,null,function*(){if(!this._coreBits)throw new Error("You seem to have imported `@theatre/studio` without importing `@theatre/core`. Make sure to include an import of `@theatre/core` before calling `studio.initializer()`.");if(this._initializeFnCalled)return this._initializedDeferred.promise;this._initializeFnCalled=!0,this._didWarnAboutNotInitializing&&console.warn(Q3e);let a={persistenceKey:Kfe,usePersistentStorage:!0};if(typeof(s==null?void 0:s.persistenceKey)=="string"&&(a.persistenceKey=s.persistenceKey),((s==null?void 0:s.usePersistentStorage)===!1||typeof window>"u")&&(a.usePersistentStorage=!1),s!=null&&s.__experimental_rafDriver){if(s.__experimental_rafDriver.type!=="Theatre_RafDriver_PublicAPI")throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` must be either be undefined, or the return type of core.createRafDriver()");let l=this._coreBits.privateAPI(s.__experimental_rafDriver);if(!l)throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` seems to come from a different version of `@theatre/core` than the version that is attached to `@theatre/studio`");this._rafDriver=l}else this._rafDriver=this._coreBits.getCoreRafDriver();try{yield this._store.initialize(a)}catch(l){this._initializedDeferred.reject(l);return}typeof window<"u"&&(yield this.ui.ready),this._initializedDeferred.resolve(),this.ui.render(),V3e().catch(l=>{console.error(l)})})}get initialized(){return this._initializedDeferred.promise}_attachToIncomingProjects(){let s=(0,aO.pointerToPrism)(this.projectsP),a=l=>{for(let h of Object.values(l))h.isAttachedToStudio||h.attachToStudio(this)};s.onStale(()=>{a(s.getValue())}),a(s.getValue())}setCoreBits(s){this._coreBits=s,this._corePrivateApi=s.privateAPI,this._coreAtom.setByPointer(a=>a.core,s.coreExports),this._setProjectsP(s.projectsP)}_setProjectsP(s){this._projectsProxy.setPointer(s)}scrub(){return new GOe(this)}tempTransaction(s){return this._store.tempTransaction(s)}transaction(s){return this.tempTransaction(s).commit()}__dev_startHistoryFromScratch(s){return this._store.__dev_startHistoryFromScratch(s)}get corePrivateAPI(){return this._corePrivateApi}get core(){return this._coreAtom.get().core}get coreP(){return this._coreAtom.pointer.core}extend(s,a){if(!s||typeof s!="object")throw new Error("Extensions must be JS objects");if(typeof s.id!="string")throw new Error("extension.id must be a string");let l=(a==null?void 0:a.__experimental_reconfigure)===!0,h=s.id,f=this._store.getState().ephemeral.extensions.byId[h];if(f&&!l){if(s===f||(0,H3e.default)(s,f))return;throw new Error('Extension id "'.concat(s.id,'" is already defined. If you mean to re-configure the extension, do it like this: studio.extend(extension, {__experimental_reconfigure: true})})'))}this.transaction(({drafts:g})=>{var b,_;g.ephemeral.extensions.byId[s.id]=s;let S=g.ephemeral.extensions.paneClasses;l&&f&&((b=f.panes)==null||b.forEach(C=>{delete S[C.class]})),(_=s.panes)==null||_.forEach(C=>{if(typeof C.class!="string")throw new Error("pane.class must be a string");if(C.class.length<3)throw new Error("pane.class should be a string with 3 or more characters");let I=S[C.class];if(I)if(l&&I.extensionId===s.id)console.warn('Pane class "'.concat(C.class,'" already exists. This is a bug in Theatre.js. Please report it at https://github.com/theatre-js/theatre/issues/new'));else throw new Error('Pane class "'.concat(C.class,'" already exists and is supplied by extension ').concat(I));S[C.class]={extensionId:s.id,classDefinition:C}})})}getStudioProject(s){return this._cache.get("getStudioProject",()=>s.getProject("Studio"))}getExtensionSheet(s,a){return this._cache.get("extensionSheet-"+s,()=>this.getStudioProject(a).sheet("Extension "+s))}undo(){this._store.undo()}redo(){this._store.redo()}createContentOfSaveFile(s){return this._store.createContentOfSaveFile(s)}createAssetStorage(s,a){return ie(this,null,function*(){if(typeof window>"u")return{getAssetUrl:()=>"",createAsset:()=>Promise.resolve(null)};if(!("indexedDB"in window))return console.log("This browser doesn't support IndexedDB."),{getAssetUrl:C=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")},createAsset:C=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")}};let l=Y3e("".concat(s.address.projectId,"-assets")),h=nV(s),f=yield l.keys();yield Promise.all(f.map(C=>ie(this,null,function*(){h.includes(C)||(yield l.del(C))}))),yield Promise.all(f.map(C=>ie(this,null,function*(){var I,O;let D="".concat(a,"/").concat(C);try{(yield fetch(D,{method:"HEAD"})).ok&&(yield l.del(C))}catch{GE.error("Failed to access assets","Failed to access assets at ".concat((O=(I=s.config.assets)==null?void 0:I.baseUrl)!=null?O:"/",". This is likely due to a CORS issue."))}})));let g=new Map(yield l.entries()),b=new Map,_=C=>{if(b.has(C))return b.get(C);{let I=URL.createObjectURL(C);return b.set(C,I),I}},S=C=>{let I=g.get(C);if(!I)throw new Error("Asset with id ".concat(C," not found"));return _(I)};return{getAssetUrl:C=>g.has(C)?S(C):"".concat(a,"/").concat(C),createAsset:C=>ie(this,null,function*(){var I,O,D;let A=nV(s),N=!1;if(A.includes(C.name)){let L;try{L=(I=g.get(C.name))!=null?I:yield fetch("".concat(a,"/").concat(C.name)).then(V=>V.ok?V.blob():void 0)}catch{return GE.error("Failed to access assets","Failed to access assets at ".concat((D=(O=s.config.assets)==null?void 0:O.baseUrl)!=null?D:"/",". This is likely due to a CORS issue.")),Promise.resolve(null)}if(L){if(N=yield(yield Promise.resolve().then(()=>X(jOe()))).default.isEqual(C,L),N)return C.name;{let V=G=>{let $=prompt(G,C.name);return $===null?!1:$===""?V("Asset name cannot be empty. Please choose a different file name for this asset."):A.includes($)?(console.log(A),V("An asset with this name already exists. Please choose a different file name for this asset.")):(C=new File([C],$,{type:C.type}),!0)};if(!V("An asset with this name already exists. Please choose a different file name for this asset."))return null}}}return g.set(C.name,C),yield l.set(C.name,C),C.name})}})}clearPersistentStorage(s=Kfe){this._store.__experimental_clearPersistentStorage(s)}},$6="__TheatreJS_StudioBundle",eLe="__TheatreJS_CoreBundle",tLe="__TheatreJS_Notifications",nLe=class{constructor(s){this._studio=s,ye(this,"_coreBundle")}get type(){return"Theatre_StudioBundle"}registerCoreBundle(s){if(this._coreBundle)throw new Error("StudioBundle.coreBundle is already registered. This is a bug.");this._coreBundle=s;let a;s.getBitsForStudio(this._studio,l=>{a=l}),this._studio.setCoreBits(a)}},rLe=X(Ne());Ve();var Xfe,iLe=ae.div(Xfe||(Xfe=te([""]))),sLe=s=>rLe.default.createElement(iLe,null),oLe=sLe;WE();var K6=new J3e;Tt(K6);var aLe=K6.publicApi,lLe=aLe;uLe();function uLe(){if(typeof window>"u")return;let s=window[$6];if(typeof s<"u")throw typeof s=="object"&&s&&typeof s.version=="string"?new Error(`It seems that the module '@theatre/studio' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/studio' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat($6," seems to be already set by a module other than @theatre/core."));let a=new nLe(K6);window[$6]=a;let l=window[eLe];l&&l!==null&&l.type==="Theatre_CoreBundle"&&a.registerCoreBundle(l)}typeof window<"u"&&(window[tLe]={notify:GE});/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)

	queue-microtask/index.js:
	  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

	react/cjs/react.production.min.js:
	  (**
	   * @license React
	   * react.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	scheduler/cjs/scheduler.production.min.js:
	  (**
	   * @license React
	   * scheduler.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-dom/cjs/react-dom.production.min.js:
	  (**
	   * @license React
	   * react-dom.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v17.0.2
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v16.13.1
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	jszip/dist/jszip.min.js:
	  (*!
	  
	  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	  <http://stuartk.com/jszip>
	  
	  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
	  
	  JSZip uses the library pako released under the MIT license :
	  https://github.com/nodeca/pako/blob/main/LICENSE
	  *)

	jiff/lib/lcs.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/array.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointerParse.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointer.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/clone.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPatch.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/jiff.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)
	*/})(CN,CN.exports);var kUe=CN.exports;const _Se=s1e(kUe);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const iM="161",F_={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},B_={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},AUe=0,G0e=1,IUe=2,wSe=1,RUe=2,Kh=3,kd=0,Is=1,xa=2,_u=0,w0=1,vW=2,yW=3,bW=4,xSe=5,Tm=100,SSe=101,ESe=102,_W=103,wW=104,o7=200,a7=201,l7=202,u7=203,PT=204,TT=205,c7=206,d7=207,h7=208,p7=209,CSe=210,f7=211,m7=212,g7=213,v7=214,DUe=0,OUe=1,LUe=2,PN=3,NUe=4,FUe=5,BUe=6,UUe=7,SF=0,zUe=1,VUe=2,Vm=0,jUe=1,HUe=2,GUe=3,WUe=4,$Ue=5,KUe=6,W0e="attached",XUe="detached",PSe=300,Qw=301,Jw=302,TN=303,xW=304,EF=306,pp=1e3,vl=1001,SW=1002,Po=1003,$0e=1004,vP=1005,no=1006,eG=1007,g0=1008,_l=1009,qUe=1010,YUe=1011,y7=1012,TSe=1013,Qh=1014,Sd=1015,MT=1016,MSe=1017,kSe=1018,jm=1020,ZUe=1021,pu=1023,QUe=1024,JUe=1025,x0=1026,R0=1027,e5e=1028,ASe=1029,t5e=1030,ISe=1031,RSe=1033,tG=33776,nG=33777,rG=33778,iG=33779,K0e=35840,X0e=35841,q0e=35842,Y0e=35843,DSe=36196,Z0e=37492,Q0e=37496,J0e=37808,eye=37809,tye=37810,nye=37811,rye=37812,iye=37813,sye=37814,oye=37815,aye=37816,lye=37817,uye=37818,cye=37819,dye=37820,hye=37821,sG=36492,pye=36494,fye=36495,n5e=36283,mye=36284,gye=36285,vye=36286,r5e=2200,i5e=2201,s5e=2202,MN=2300,kN=2301,oG=2302,Ew=2400,Cw=2401,AN=2402,b7=2500,o5e=2501,CF=3e3,sp=3001,sM=3200,a5e=3201,d1=0,l5e=1,fu="",rs="srgb",fp="srgb-linear",_7="display-p3",PF="display-p3-linear",IN="linear",Ti="srgb",RN="rec709",DN="p3",U_=7680,yye=519,u5e=512,c5e=513,d5e=514,OSe=515,h5e=516,p5e=517,f5e=518,m5e=519,bye=35044,EW="300 es",CW=1035,Jh=2e3,ON=2001;class Tl{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,u=i.length;o<u;o++)i[o].call(this,e);e.target=null}}}const $o=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _ye=1234567;const JP=Math.PI/180,e1=180/Math.PI;function rg(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return($o[t&255]+$o[t>>8&255]+$o[t>>16&255]+$o[t>>24&255]+"-"+$o[e&255]+$o[e>>8&255]+"-"+$o[e>>16&15|64]+$o[e>>24&255]+"-"+$o[n&63|128]+$o[n>>8&255]+"-"+$o[n>>16&255]+$o[n>>24&255]+$o[r&255]+$o[r>>8&255]+$o[r>>16&255]+$o[r>>24&255]).toLowerCase()}function zs(t,e,n){return Math.max(e,Math.min(n,t))}function w7(t,e){return(t%e+e)%e}function g5e(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function v5e(t,e,n){return t!==e?(n-t)/(e-t):0}function eT(t,e,n){return(1-n)*t+n*e}function y5e(t,e,n,r){return eT(t,e,1-Math.exp(-n*r))}function b5e(t,e=1){return e-Math.abs(w7(t,e*2)-e)}function _5e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function w5e(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function x5e(t,e){return t+Math.floor(Math.random()*(e-t+1))}function S5e(t,e){return t+Math.random()*(e-t)}function E5e(t){return t*(.5-Math.random())}function C5e(t){t!==void 0&&(_ye=t);let e=_ye+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function P5e(t){return t*JP}function T5e(t){return t*e1}function PW(t){return(t&t-1)===0&&t!==0}function M5e(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function LN(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function k5e(t,e,n,r,i){const o=Math.cos,u=Math.sin,d=o(n/2),m=u(n/2),v=o((e+r)/2),x=u((e+r)/2),E=o((e-r)/2),M=u((e-r)/2),R=o((r-e)/2),j=u((r-e)/2);switch(i){case"XYX":t.set(d*x,m*E,m*M,d*v);break;case"YZY":t.set(m*M,d*x,m*E,d*v);break;case"ZXZ":t.set(m*E,m*M,d*x,d*v);break;case"XZX":t.set(d*x,m*j,m*R,d*v);break;case"YXY":t.set(m*R,d*x,m*j,d*v);break;case"ZYZ":t.set(m*j,m*R,d*x,d*v);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function cw(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ga(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const qo={DEG2RAD:JP,RAD2DEG:e1,generateUUID:rg,clamp:zs,euclideanModulo:w7,mapLinear:g5e,inverseLerp:v5e,lerp:eT,damp:y5e,pingpong:b5e,smoothstep:_5e,smootherstep:w5e,randInt:x5e,randFloat:S5e,randFloatSpread:E5e,seededRandom:C5e,degToRad:P5e,radToDeg:T5e,isPowerOfTwo:PW,ceilPowerOfTwo:M5e,floorPowerOfTwo:LN,setQuaternionFromProperEuler:k5e,normalize:ga,denormalize:cw};class cn{constructor(e=0,n=0){cn.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(zs(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),o=this.x-e.x,u=this.y-e.y;return this.x=o*r-u*i+e.x,this.y=o*i+u*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class fr{constructor(e,n,r,i,o,u,d,m,v){fr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,u,d,m,v)}set(e,n,r,i,o,u,d,m,v){const x=this.elements;return x[0]=e,x[1]=i,x[2]=d,x[3]=n,x[4]=o,x[5]=m,x[6]=r,x[7]=u,x[8]=v,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,u=r[0],d=r[3],m=r[6],v=r[1],x=r[4],E=r[7],M=r[2],R=r[5],j=r[8],F=i[0],B=i[3],z=i[6],P=i[1],W=i[4],Z=i[7],ge=i[2],X=i[5],pe=i[8];return o[0]=u*F+d*P+m*ge,o[3]=u*B+d*W+m*X,o[6]=u*z+d*Z+m*pe,o[1]=v*F+x*P+E*ge,o[4]=v*B+x*W+E*X,o[7]=v*z+x*Z+E*pe,o[2]=M*F+R*P+j*ge,o[5]=M*B+R*W+j*X,o[8]=M*z+R*Z+j*pe,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],d=e[5],m=e[6],v=e[7],x=e[8];return n*u*x-n*d*v-r*o*x+r*d*m+i*o*v-i*u*m}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],d=e[5],m=e[6],v=e[7],x=e[8],E=x*u-d*v,M=d*m-x*o,R=v*o-u*m,j=n*E+r*M+i*R;if(j===0)return this.set(0,0,0,0,0,0,0,0,0);const F=1/j;return e[0]=E*F,e[1]=(i*v-x*r)*F,e[2]=(d*r-i*u)*F,e[3]=M*F,e[4]=(x*n-i*m)*F,e[5]=(i*o-d*n)*F,e[6]=R*F,e[7]=(r*m-v*n)*F,e[8]=(u*n-r*o)*F,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,o,u,d){const m=Math.cos(o),v=Math.sin(o);return this.set(r*m,r*v,-r*(m*u+v*d)+u+e,-i*v,i*m,-i*(-v*u+m*d)+d+n,0,0,1),this}scale(e,n){return this.premultiply(aG.makeScale(e,n)),this}rotate(e){return this.premultiply(aG.makeRotation(-e)),this}translate(e,n){return this.premultiply(aG.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const aG=new fr;function LSe(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function kT(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function A5e(){const t=kT("canvas");return t.style.display="block",t}const wye={};function Uw(t){t in wye||(wye[t]=!0,console.warn(t))}const xye=new fr().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Sye=new fr().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),K3={[fp]:{transfer:IN,primaries:RN,toReference:t=>t,fromReference:t=>t},[rs]:{transfer:Ti,primaries:RN,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[PF]:{transfer:IN,primaries:DN,toReference:t=>t.applyMatrix3(Sye),fromReference:t=>t.applyMatrix3(xye)},[_7]:{transfer:Ti,primaries:DN,toReference:t=>t.convertSRGBToLinear().applyMatrix3(Sye),fromReference:t=>t.applyMatrix3(xye).convertLinearToSRGB()}},I5e=new Set([fp,PF]),li={enabled:!0,_workingColorSpace:fp,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!I5e.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=K3[e].toReference,i=K3[n].fromReference;return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return K3[t].primaries},getTransfer:function(t){return t===fu?IN:K3[t].transfer}};function zw(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function lG(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let z_;class NSe{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{z_===void 0&&(z_=kT("canvas")),z_.width=e.width,z_.height=e.height;const r=z_.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=z_}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=kT("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let u=0;u<o.length;u++)o[u]=zw(o[u]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(zw(n[r]/255)*255):n[r]=zw(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let R5e=0;class FSe{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:R5e++}),this.uuid=rg(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let u=0,d=i.length;u<d;u++)i[u].isDataTexture?o.push(uG(i[u].image)):o.push(uG(i[u]))}else o=uG(i);r.url=o}return n||(e.images[this.uuid]=r),r}}function uG(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?NSe.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let D5e=0;class qi extends Tl{constructor(e=qi.DEFAULT_IMAGE,n=qi.DEFAULT_MAPPING,r=vl,i=vl,o=no,u=g0,d=pu,m=_l,v=qi.DEFAULT_ANISOTROPY,x=fu){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:D5e++}),this.uuid=rg(),this.name="",this.source=new FSe(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=u,this.anisotropy=v,this.format=d,this.internalFormat=null,this.type=m,this.offset=new cn(0,0),this.repeat=new cn(1,1),this.center=new cn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new fr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof x=="string"?this.colorSpace=x:(Uw("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=x===sp?rs:fu),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==PSe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case pp:e.x=e.x-Math.floor(e.x);break;case vl:e.x=e.x<0?0:1;break;case SW:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case pp:e.y=e.y-Math.floor(e.y);break;case vl:e.y=e.y<0?0:1;break;case SW:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Uw("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===rs?sp:CF}set encoding(e){Uw("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===sp?rs:fu}}qi.DEFAULT_IMAGE=null;qi.DEFAULT_MAPPING=PSe;qi.DEFAULT_ANISOTROPY=1;class Ar{constructor(e=0,n=0,r=0,i=1){Ar.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=this.w,u=e.elements;return this.x=u[0]*n+u[4]*r+u[8]*i+u[12]*o,this.y=u[1]*n+u[5]*r+u[9]*i+u[13]*o,this.z=u[2]*n+u[6]*r+u[10]*i+u[14]*o,this.w=u[3]*n+u[7]*r+u[11]*i+u[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,o;const m=e.elements,v=m[0],x=m[4],E=m[8],M=m[1],R=m[5],j=m[9],F=m[2],B=m[6],z=m[10];if(Math.abs(x-M)<.01&&Math.abs(E-F)<.01&&Math.abs(j-B)<.01){if(Math.abs(x+M)<.1&&Math.abs(E+F)<.1&&Math.abs(j+B)<.1&&Math.abs(v+R+z-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const W=(v+1)/2,Z=(R+1)/2,ge=(z+1)/2,X=(x+M)/4,pe=(E+F)/4,ye=(j+B)/4;return W>Z&&W>ge?W<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(W),i=X/r,o=pe/r):Z>ge?Z<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(Z),r=X/i,o=ye/i):ge<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(ge),r=pe/o,i=ye/o),this.set(r,i,o,n),this}let P=Math.sqrt((B-j)*(B-j)+(E-F)*(E-F)+(M-x)*(M-x));return Math.abs(P)<.001&&(P=1),this.x=(B-j)/P,this.y=(E-F)/P,this.z=(M-x)/P,this.w=Math.acos((v+R+z-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class O5e extends Tl{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Ar(0,0,e,n),this.scissorTest=!1,this.viewport=new Ar(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(Uw("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===sp?rs:fu),r=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:no,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},r),this.texture=new qi(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps,this.texture.internalFormat=r.internalFormat,this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this.samples=r.samples}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new FSe(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Sl extends O5e{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class BSe extends qi{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Po,this.minFilter=Po,this.wrapR=vl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class L5e extends qi{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Po,this.minFilter=Po,this.wrapR=vl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Us{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,o,u,d){let m=r[i+0],v=r[i+1],x=r[i+2],E=r[i+3];const M=o[u+0],R=o[u+1],j=o[u+2],F=o[u+3];if(d===0){e[n+0]=m,e[n+1]=v,e[n+2]=x,e[n+3]=E;return}if(d===1){e[n+0]=M,e[n+1]=R,e[n+2]=j,e[n+3]=F;return}if(E!==F||m!==M||v!==R||x!==j){let B=1-d;const z=m*M+v*R+x*j+E*F,P=z>=0?1:-1,W=1-z*z;if(W>Number.EPSILON){const ge=Math.sqrt(W),X=Math.atan2(ge,z*P);B=Math.sin(B*X)/ge,d=Math.sin(d*X)/ge}const Z=d*P;if(m=m*B+M*Z,v=v*B+R*Z,x=x*B+j*Z,E=E*B+F*Z,B===1-d){const ge=1/Math.sqrt(m*m+v*v+x*x+E*E);m*=ge,v*=ge,x*=ge,E*=ge}}e[n]=m,e[n+1]=v,e[n+2]=x,e[n+3]=E}static multiplyQuaternionsFlat(e,n,r,i,o,u){const d=r[i],m=r[i+1],v=r[i+2],x=r[i+3],E=o[u],M=o[u+1],R=o[u+2],j=o[u+3];return e[n]=d*j+x*E+m*R-v*M,e[n+1]=m*j+x*M+v*E-d*R,e[n+2]=v*j+x*R+d*M-m*E,e[n+3]=x*j-d*E-m*M-v*R,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const r=e._x,i=e._y,o=e._z,u=e._order,d=Math.cos,m=Math.sin,v=d(r/2),x=d(i/2),E=d(o/2),M=m(r/2),R=m(i/2),j=m(o/2);switch(u){case"XYZ":this._x=M*x*E+v*R*j,this._y=v*R*E-M*x*j,this._z=v*x*j+M*R*E,this._w=v*x*E-M*R*j;break;case"YXZ":this._x=M*x*E+v*R*j,this._y=v*R*E-M*x*j,this._z=v*x*j-M*R*E,this._w=v*x*E+M*R*j;break;case"ZXY":this._x=M*x*E-v*R*j,this._y=v*R*E+M*x*j,this._z=v*x*j+M*R*E,this._w=v*x*E-M*R*j;break;case"ZYX":this._x=M*x*E-v*R*j,this._y=v*R*E+M*x*j,this._z=v*x*j-M*R*E,this._w=v*x*E+M*R*j;break;case"YZX":this._x=M*x*E+v*R*j,this._y=v*R*E+M*x*j,this._z=v*x*j-M*R*E,this._w=v*x*E-M*R*j;break;case"XZY":this._x=M*x*E-v*R*j,this._y=v*R*E-M*x*j,this._z=v*x*j+M*R*E,this._w=v*x*E+M*R*j;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+u)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],o=n[8],u=n[1],d=n[5],m=n[9],v=n[2],x=n[6],E=n[10],M=r+d+E;if(M>0){const R=.5/Math.sqrt(M+1);this._w=.25/R,this._x=(x-m)*R,this._y=(o-v)*R,this._z=(u-i)*R}else if(r>d&&r>E){const R=2*Math.sqrt(1+r-d-E);this._w=(x-m)/R,this._x=.25*R,this._y=(i+u)/R,this._z=(o+v)/R}else if(d>E){const R=2*Math.sqrt(1+d-r-E);this._w=(o-v)/R,this._x=(i+u)/R,this._y=.25*R,this._z=(m+x)/R}else{const R=2*Math.sqrt(1+E-r-d);this._w=(u-i)/R,this._x=(o+v)/R,this._y=(m+x)/R,this._z=.25*R}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(zs(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,o=e._z,u=e._w,d=n._x,m=n._y,v=n._z,x=n._w;return this._x=r*x+u*d+i*v-o*m,this._y=i*x+u*m+o*d-r*v,this._z=o*x+u*v+r*m-i*d,this._w=u*x-r*d-i*m-o*v,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,u=this._w;let d=u*e._w+r*e._x+i*e._y+o*e._z;if(d<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,d=-d):this.copy(e),d>=1)return this._w=u,this._x=r,this._y=i,this._z=o,this;const m=1-d*d;if(m<=Number.EPSILON){const R=1-n;return this._w=R*u+n*this._w,this._x=R*r+n*this._x,this._y=R*i+n*this._y,this._z=R*o+n*this._z,this.normalize(),this}const v=Math.sqrt(m),x=Math.atan2(v,d),E=Math.sin((1-n)*x)/v,M=Math.sin(n*x)/v;return this._w=u*E+this._w*M,this._x=r*E+this._x*M,this._y=i*E+this._y*M,this._z=o*E+this._z*M,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(o),r*Math.cos(o),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Be{constructor(e=0,n=0,r=0){Be.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(Eye.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(Eye.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6]*i,this.y=o[1]*n+o[4]*r+o[7]*i,this.z=o[2]*n+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,o=e.elements,u=1/(o[3]*n+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*i+o[12])*u,this.y=(o[1]*n+o[5]*r+o[9]*i+o[13])*u,this.z=(o[2]*n+o[6]*r+o[10]*i+o[14])*u,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,o=e.x,u=e.y,d=e.z,m=e.w,v=2*(u*i-d*r),x=2*(d*n-o*i),E=2*(o*r-u*n);return this.x=n+m*v+u*E-d*x,this.y=r+m*x+d*v-o*E,this.z=i+m*E+o*x-u*v,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i,this.y=o[1]*n+o[5]*r+o[9]*i,this.z=o[2]*n+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,o=e.z,u=n.x,d=n.y,m=n.z;return this.x=i*m-o*d,this.y=o*u-r*m,this.z=r*d-i*u,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return cG.copy(this).projectOnVector(e),this.sub(cG)}reflect(e){return this.sub(cG.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(zs(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const cG=new Be,Eye=new Us;class h1{constructor(e=new Be(1/0,1/0,1/0),n=new Be(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(hc.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(hc.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=hc.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const r=e.geometry;if(r!==void 0){const o=r.getAttribute("position");if(n===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let u=0,d=o.count;u<d;u++)e.isMesh===!0?e.getVertexPosition(u,hc):hc.fromBufferAttribute(o,u),hc.applyMatrix4(e.matrixWorld),this.expandByPoint(hc);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),X3.copy(e.boundingBox)):(r.boundingBox===null&&r.computeBoundingBox(),X3.copy(r.boundingBox)),X3.applyMatrix4(e.matrixWorld),this.union(X3)}const i=e.children;for(let o=0,u=i.length;o<u;o++)this.expandByObject(i[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,hc),hc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(yP),q3.subVectors(this.max,yP),V_.subVectors(e.a,yP),j_.subVectors(e.b,yP),H_.subVectors(e.c,yP),Jf.subVectors(j_,V_),em.subVectors(H_,j_),Zv.subVectors(V_,H_);let n=[0,-Jf.z,Jf.y,0,-em.z,em.y,0,-Zv.z,Zv.y,Jf.z,0,-Jf.x,em.z,0,-em.x,Zv.z,0,-Zv.x,-Jf.y,Jf.x,0,-em.y,em.x,0,-Zv.y,Zv.x,0];return!dG(n,V_,j_,H_,q3)||(n=[1,0,0,0,1,0,0,0,1],!dG(n,V_,j_,H_,q3))?!1:(Y3.crossVectors(Jf,em),n=[Y3.x,Y3.y,Y3.z],dG(n,V_,j_,H_,q3))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,hc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(hc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Uh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Uh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Uh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Uh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Uh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Uh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Uh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Uh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Uh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Uh=[new Be,new Be,new Be,new Be,new Be,new Be,new Be,new Be],hc=new Be,X3=new h1,V_=new Be,j_=new Be,H_=new Be,Jf=new Be,em=new Be,Zv=new Be,yP=new Be,q3=new Be,Y3=new Be,Qv=new Be;function dG(t,e,n,r,i){for(let o=0,u=t.length-3;o<=u;o+=3){Qv.fromArray(t,o);const d=i.x*Math.abs(Qv.x)+i.y*Math.abs(Qv.y)+i.z*Math.abs(Qv.z),m=e.dot(Qv),v=n.dot(Qv),x=r.dot(Qv);if(Math.max(-Math.max(m,v,x),Math.min(m,v,x))>d)return!1}return!0}const N5e=new h1,bP=new Be,hG=new Be;class W0{constructor(e=new Be,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):N5e.setFromPoints(e).getCenter(r);let i=0;for(let o=0,u=e.length;o<u;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;bP.subVectors(e,this.center);const n=bP.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(bP,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(hG.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(bP.copy(e.center).add(hG)),this.expandByPoint(bP.copy(e.center).sub(hG))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const zh=new Be,pG=new Be,Z3=new Be,tm=new Be,fG=new Be,Q3=new Be,mG=new Be;class p1{constructor(e=new Be,n=new Be(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,zh)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=zh.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(zh.copy(this.origin).addScaledVector(this.direction,n),zh.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){pG.copy(e).add(n).multiplyScalar(.5),Z3.copy(n).sub(e).normalize(),tm.copy(this.origin).sub(pG);const o=e.distanceTo(n)*.5,u=-this.direction.dot(Z3),d=tm.dot(this.direction),m=-tm.dot(Z3),v=tm.lengthSq(),x=Math.abs(1-u*u);let E,M,R,j;if(x>0)if(E=u*m-d,M=u*d-m,j=o*x,E>=0)if(M>=-j)if(M<=j){const F=1/x;E*=F,M*=F,R=E*(E+u*M+2*d)+M*(u*E+M+2*m)+v}else M=o,E=Math.max(0,-(u*M+d)),R=-E*E+M*(M+2*m)+v;else M=-o,E=Math.max(0,-(u*M+d)),R=-E*E+M*(M+2*m)+v;else M<=-j?(E=Math.max(0,-(-u*o+d)),M=E>0?-o:Math.min(Math.max(-o,-m),o),R=-E*E+M*(M+2*m)+v):M<=j?(E=0,M=Math.min(Math.max(-o,-m),o),R=M*(M+2*m)+v):(E=Math.max(0,-(u*o+d)),M=E>0?o:Math.min(Math.max(-o,-m),o),R=-E*E+M*(M+2*m)+v);else M=u>0?-o:o,E=Math.max(0,-(u*M+d)),R=-E*E+M*(M+2*m)+v;return r&&r.copy(this.origin).addScaledVector(this.direction,E),i&&i.copy(pG).addScaledVector(Z3,M),R}intersectSphere(e,n){zh.subVectors(e.center,this.origin);const r=zh.dot(this.direction),i=zh.dot(zh)-r*r,o=e.radius*e.radius;if(i>o)return null;const u=Math.sqrt(o-i),d=r-u,m=r+u;return m<0?null:d<0?this.at(m,n):this.at(d,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,o,u,d,m;const v=1/this.direction.x,x=1/this.direction.y,E=1/this.direction.z,M=this.origin;return v>=0?(r=(e.min.x-M.x)*v,i=(e.max.x-M.x)*v):(r=(e.max.x-M.x)*v,i=(e.min.x-M.x)*v),x>=0?(o=(e.min.y-M.y)*x,u=(e.max.y-M.y)*x):(o=(e.max.y-M.y)*x,u=(e.min.y-M.y)*x),r>u||o>i||((o>r||isNaN(r))&&(r=o),(u<i||isNaN(i))&&(i=u),E>=0?(d=(e.min.z-M.z)*E,m=(e.max.z-M.z)*E):(d=(e.max.z-M.z)*E,m=(e.min.z-M.z)*E),r>m||d>i)||((d>r||r!==r)&&(r=d),(m<i||i!==i)&&(i=m),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,zh)!==null}intersectTriangle(e,n,r,i,o){fG.subVectors(n,e),Q3.subVectors(r,e),mG.crossVectors(fG,Q3);let u=this.direction.dot(mG),d;if(u>0){if(i)return null;d=1}else if(u<0)d=-1,u=-u;else return null;tm.subVectors(this.origin,e);const m=d*this.direction.dot(Q3.crossVectors(tm,Q3));if(m<0)return null;const v=d*this.direction.dot(fG.cross(tm));if(v<0||m+v>u)return null;const x=-d*tm.dot(mG);return x<0?null:this.at(x/u,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Bn{constructor(e,n,r,i,o,u,d,m,v,x,E,M,R,j,F,B){Bn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,o,u,d,m,v,x,E,M,R,j,F,B)}set(e,n,r,i,o,u,d,m,v,x,E,M,R,j,F,B){const z=this.elements;return z[0]=e,z[4]=n,z[8]=r,z[12]=i,z[1]=o,z[5]=u,z[9]=d,z[13]=m,z[2]=v,z[6]=x,z[10]=E,z[14]=M,z[3]=R,z[7]=j,z[11]=F,z[15]=B,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Bn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/G_.setFromMatrixColumn(e,0).length(),o=1/G_.setFromMatrixColumn(e,1).length(),u=1/G_.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*u,n[9]=r[9]*u,n[10]=r[10]*u,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,o=e.z,u=Math.cos(r),d=Math.sin(r),m=Math.cos(i),v=Math.sin(i),x=Math.cos(o),E=Math.sin(o);if(e.order==="XYZ"){const M=u*x,R=u*E,j=d*x,F=d*E;n[0]=m*x,n[4]=-m*E,n[8]=v,n[1]=R+j*v,n[5]=M-F*v,n[9]=-d*m,n[2]=F-M*v,n[6]=j+R*v,n[10]=u*m}else if(e.order==="YXZ"){const M=m*x,R=m*E,j=v*x,F=v*E;n[0]=M+F*d,n[4]=j*d-R,n[8]=u*v,n[1]=u*E,n[5]=u*x,n[9]=-d,n[2]=R*d-j,n[6]=F+M*d,n[10]=u*m}else if(e.order==="ZXY"){const M=m*x,R=m*E,j=v*x,F=v*E;n[0]=M-F*d,n[4]=-u*E,n[8]=j+R*d,n[1]=R+j*d,n[5]=u*x,n[9]=F-M*d,n[2]=-u*v,n[6]=d,n[10]=u*m}else if(e.order==="ZYX"){const M=u*x,R=u*E,j=d*x,F=d*E;n[0]=m*x,n[4]=j*v-R,n[8]=M*v+F,n[1]=m*E,n[5]=F*v+M,n[9]=R*v-j,n[2]=-v,n[6]=d*m,n[10]=u*m}else if(e.order==="YZX"){const M=u*m,R=u*v,j=d*m,F=d*v;n[0]=m*x,n[4]=F-M*E,n[8]=j*E+R,n[1]=E,n[5]=u*x,n[9]=-d*x,n[2]=-v*x,n[6]=R*E+j,n[10]=M-F*E}else if(e.order==="XZY"){const M=u*m,R=u*v,j=d*m,F=d*v;n[0]=m*x,n[4]=-E,n[8]=v*x,n[1]=M*E+F,n[5]=u*x,n[9]=R*E-j,n[2]=j*E-R,n[6]=d*x,n[10]=F*E+M}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(F5e,e,B5e)}lookAt(e,n,r){const i=this.elements;return fl.subVectors(e,n),fl.lengthSq()===0&&(fl.z=1),fl.normalize(),nm.crossVectors(r,fl),nm.lengthSq()===0&&(Math.abs(r.z)===1?fl.x+=1e-4:fl.z+=1e-4,fl.normalize(),nm.crossVectors(r,fl)),nm.normalize(),J3.crossVectors(fl,nm),i[0]=nm.x,i[4]=J3.x,i[8]=fl.x,i[1]=nm.y,i[5]=J3.y,i[9]=fl.y,i[2]=nm.z,i[6]=J3.z,i[10]=fl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,o=this.elements,u=r[0],d=r[4],m=r[8],v=r[12],x=r[1],E=r[5],M=r[9],R=r[13],j=r[2],F=r[6],B=r[10],z=r[14],P=r[3],W=r[7],Z=r[11],ge=r[15],X=i[0],pe=i[4],ye=i[8],te=i[12],ie=i[1],Pe=i[5],_t=i[9],Tt=i[13],de=i[2],ot=i[6],Me=i[10],wt=i[14],Ge=i[3],it=i[7],Qe=i[11],ut=i[15];return o[0]=u*X+d*ie+m*de+v*Ge,o[4]=u*pe+d*Pe+m*ot+v*it,o[8]=u*ye+d*_t+m*Me+v*Qe,o[12]=u*te+d*Tt+m*wt+v*ut,o[1]=x*X+E*ie+M*de+R*Ge,o[5]=x*pe+E*Pe+M*ot+R*it,o[9]=x*ye+E*_t+M*Me+R*Qe,o[13]=x*te+E*Tt+M*wt+R*ut,o[2]=j*X+F*ie+B*de+z*Ge,o[6]=j*pe+F*Pe+B*ot+z*it,o[10]=j*ye+F*_t+B*Me+z*Qe,o[14]=j*te+F*Tt+B*wt+z*ut,o[3]=P*X+W*ie+Z*de+ge*Ge,o[7]=P*pe+W*Pe+Z*ot+ge*it,o[11]=P*ye+W*_t+Z*Me+ge*Qe,o[15]=P*te+W*Tt+Z*wt+ge*ut,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],o=e[12],u=e[1],d=e[5],m=e[9],v=e[13],x=e[2],E=e[6],M=e[10],R=e[14],j=e[3],F=e[7],B=e[11],z=e[15];return j*(+o*m*E-i*v*E-o*d*M+r*v*M+i*d*R-r*m*R)+F*(+n*m*R-n*v*M+o*u*M-i*u*R+i*v*x-o*m*x)+B*(+n*v*E-n*d*R-o*u*E+r*u*R+o*d*x-r*v*x)+z*(-i*d*x-n*m*E+n*d*M+i*u*E-r*u*M+r*m*x)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],o=e[3],u=e[4],d=e[5],m=e[6],v=e[7],x=e[8],E=e[9],M=e[10],R=e[11],j=e[12],F=e[13],B=e[14],z=e[15],P=E*B*v-F*M*v+F*m*R-d*B*R-E*m*z+d*M*z,W=j*M*v-x*B*v-j*m*R+u*B*R+x*m*z-u*M*z,Z=x*F*v-j*E*v+j*d*R-u*F*R-x*d*z+u*E*z,ge=j*E*m-x*F*m-j*d*M+u*F*M+x*d*B-u*E*B,X=n*P+r*W+i*Z+o*ge;if(X===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const pe=1/X;return e[0]=P*pe,e[1]=(F*M*o-E*B*o-F*i*R+r*B*R+E*i*z-r*M*z)*pe,e[2]=(d*B*o-F*m*o+F*i*v-r*B*v-d*i*z+r*m*z)*pe,e[3]=(E*m*o-d*M*o-E*i*v+r*M*v+d*i*R-r*m*R)*pe,e[4]=W*pe,e[5]=(x*B*o-j*M*o+j*i*R-n*B*R-x*i*z+n*M*z)*pe,e[6]=(j*m*o-u*B*o-j*i*v+n*B*v+u*i*z-n*m*z)*pe,e[7]=(u*M*o-x*m*o+x*i*v-n*M*v-u*i*R+n*m*R)*pe,e[8]=Z*pe,e[9]=(j*E*o-x*F*o-j*r*R+n*F*R+x*r*z-n*E*z)*pe,e[10]=(u*F*o-j*d*o+j*r*v-n*F*v-u*r*z+n*d*z)*pe,e[11]=(x*d*o-u*E*o-x*r*v+n*E*v+u*r*R-n*d*R)*pe,e[12]=ge*pe,e[13]=(x*F*i-j*E*i+j*r*M-n*F*M-x*r*B+n*E*B)*pe,e[14]=(j*d*i-u*F*i-j*r*m+n*F*m+u*r*B-n*d*B)*pe,e[15]=(u*E*i-x*d*i+x*r*m-n*E*m-u*r*M+n*d*M)*pe,this}scale(e){const n=this.elements,r=e.x,i=e.y,o=e.z;return n[0]*=r,n[4]*=i,n[8]*=o,n[1]*=r,n[5]*=i,n[9]*=o,n[2]*=r,n[6]*=i,n[10]*=o,n[3]*=r,n[7]*=i,n[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),o=1-r,u=e.x,d=e.y,m=e.z,v=o*u,x=o*d;return this.set(v*u+r,v*d-i*m,v*m+i*d,0,v*d+i*m,x*d+r,x*m-i*u,0,v*m-i*d,x*m+i*u,o*m*m+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,o,u){return this.set(1,r,o,0,e,1,u,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,o=n._x,u=n._y,d=n._z,m=n._w,v=o+o,x=u+u,E=d+d,M=o*v,R=o*x,j=o*E,F=u*x,B=u*E,z=d*E,P=m*v,W=m*x,Z=m*E,ge=r.x,X=r.y,pe=r.z;return i[0]=(1-(F+z))*ge,i[1]=(R+Z)*ge,i[2]=(j-W)*ge,i[3]=0,i[4]=(R-Z)*X,i[5]=(1-(M+z))*X,i[6]=(B+P)*X,i[7]=0,i[8]=(j+W)*pe,i[9]=(B-P)*pe,i[10]=(1-(M+F))*pe,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let o=G_.set(i[0],i[1],i[2]).length();const u=G_.set(i[4],i[5],i[6]).length(),d=G_.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],pc.copy(this);const v=1/o,x=1/u,E=1/d;return pc.elements[0]*=v,pc.elements[1]*=v,pc.elements[2]*=v,pc.elements[4]*=x,pc.elements[5]*=x,pc.elements[6]*=x,pc.elements[8]*=E,pc.elements[9]*=E,pc.elements[10]*=E,n.setFromRotationMatrix(pc),r.x=o,r.y=u,r.z=d,this}makePerspective(e,n,r,i,o,u,d=Jh){const m=this.elements,v=2*o/(n-e),x=2*o/(r-i),E=(n+e)/(n-e),M=(r+i)/(r-i);let R,j;if(d===Jh)R=-(u+o)/(u-o),j=-2*u*o/(u-o);else if(d===ON)R=-u/(u-o),j=-u*o/(u-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+d);return m[0]=v,m[4]=0,m[8]=E,m[12]=0,m[1]=0,m[5]=x,m[9]=M,m[13]=0,m[2]=0,m[6]=0,m[10]=R,m[14]=j,m[3]=0,m[7]=0,m[11]=-1,m[15]=0,this}makeOrthographic(e,n,r,i,o,u,d=Jh){const m=this.elements,v=1/(n-e),x=1/(r-i),E=1/(u-o),M=(n+e)*v,R=(r+i)*x;let j,F;if(d===Jh)j=(u+o)*E,F=-2*E;else if(d===ON)j=o*E,F=-1*E;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+d);return m[0]=2*v,m[4]=0,m[8]=0,m[12]=-M,m[1]=0,m[5]=2*x,m[9]=0,m[13]=-R,m[2]=0,m[6]=0,m[10]=F,m[14]=-j,m[3]=0,m[7]=0,m[11]=0,m[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const G_=new Be,pc=new Bn,F5e=new Be(0,0,0),B5e=new Be(1,1,1),nm=new Be,J3=new Be,fl=new Be,Cye=new Bn,Pye=new Us;class wa{constructor(e=0,n=0,r=0,i=wa.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,o=i[0],u=i[4],d=i[8],m=i[1],v=i[5],x=i[9],E=i[2],M=i[6],R=i[10];switch(n){case"XYZ":this._y=Math.asin(zs(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-x,R),this._z=Math.atan2(-u,o)):(this._x=Math.atan2(M,v),this._z=0);break;case"YXZ":this._x=Math.asin(-zs(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(d,R),this._z=Math.atan2(m,v)):(this._y=Math.atan2(-E,o),this._z=0);break;case"ZXY":this._x=Math.asin(zs(M,-1,1)),Math.abs(M)<.9999999?(this._y=Math.atan2(-E,R),this._z=Math.atan2(-u,v)):(this._y=0,this._z=Math.atan2(m,o));break;case"ZYX":this._y=Math.asin(-zs(E,-1,1)),Math.abs(E)<.9999999?(this._x=Math.atan2(M,R),this._z=Math.atan2(m,o)):(this._x=0,this._z=Math.atan2(-u,v));break;case"YZX":this._z=Math.asin(zs(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-x,v),this._y=Math.atan2(-E,o)):(this._x=0,this._y=Math.atan2(d,R));break;case"XZY":this._z=Math.asin(-zs(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(M,v),this._y=Math.atan2(d,o)):(this._x=Math.atan2(-x,R),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return Cye.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Cye,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Pye.setFromEuler(this),this.setFromQuaternion(Pye,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}wa.DEFAULT_ORDER="XYZ";class x7{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let U5e=0;const Tye=new Be,W_=new Us,Vh=new Bn,eL=new Be,_P=new Be,z5e=new Be,V5e=new Us,Mye=new Be(1,0,0),kye=new Be(0,1,0),Aye=new Be(0,0,1),j5e={type:"added"},H5e={type:"removed"};class qr extends Tl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:U5e++}),this.uuid=rg(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=qr.DEFAULT_UP.clone();const e=new Be,n=new wa,r=new Us,i=new Be(1,1,1);function o(){r.setFromEuler(n,!1)}function u(){n.setFromQuaternion(r,void 0,!1)}n._onChange(o),r._onChange(u),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Bn},normalMatrix:{value:new fr}}),this.matrix=new Bn,this.matrixWorld=new Bn,this.matrixAutoUpdate=qr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=qr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new x7,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return W_.setFromAxisAngle(e,n),this.quaternion.multiply(W_),this}rotateOnWorldAxis(e,n){return W_.setFromAxisAngle(e,n),this.quaternion.premultiply(W_),this}rotateX(e){return this.rotateOnAxis(Mye,e)}rotateY(e){return this.rotateOnAxis(kye,e)}rotateZ(e){return this.rotateOnAxis(Aye,e)}translateOnAxis(e,n){return Tye.copy(e).applyQuaternion(this.quaternion),this.position.add(Tye.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Mye,e)}translateY(e){return this.translateOnAxis(kye,e)}translateZ(e){return this.translateOnAxis(Aye,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Vh.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?eL.copy(e):eL.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),_P.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Vh.lookAt(_P,eL,this.up):Vh.lookAt(eL,_P,this.up),this.quaternion.setFromRotationMatrix(Vh),i&&(Vh.extractRotation(i.matrixWorld),W_.setFromRotationMatrix(Vh),this.quaternion.premultiply(W_.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(j5e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(H5e)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Vh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Vh.multiply(e.parent.matrixWorld)),e.applyMatrix4(Vh),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const u=this.children[r].getObjectByProperty(e,n);if(u!==void 0)return u}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);const i=this.children;for(let o=0,u=i.length;o<u;o++)i[o].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_P,e,z5e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_P,V5e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const o=n[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let o=0,u=i.length;o<u;o++){const d=i[o];d.matrixWorldAutoUpdate===!0&&d.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.visibility=this._visibility,i.active=this._active,i.bounds=this._bounds.map(d=>({boxInitialized:d.boxInitialized,boxMin:d.box.min.toArray(),boxMax:d.box.max.toArray(),sphereInitialized:d.sphereInitialized,sphereRadius:d.sphere.radius,sphereCenter:d.sphere.center.toArray()})),i.maxGeometryCount=this._maxGeometryCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.geometryCount=this._geometryCount,i.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(i.boundingSphere={center:i.boundingSphere.center.toArray(),radius:i.boundingSphere.radius}),this.boundingBox!==null&&(i.boundingBox={min:i.boundingBox.min.toArray(),max:i.boundingBox.max.toArray()}));function o(d,m){return d[m.uuid]===void 0&&(d[m.uuid]=m.toJSON(e)),m.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const d=this.geometry.parameters;if(d!==void 0&&d.shapes!==void 0){const m=d.shapes;if(Array.isArray(m))for(let v=0,x=m.length;v<x;v++){const E=m[v];o(e.shapes,E)}else o(e.shapes,m)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const d=[];for(let m=0,v=this.material.length;m<v;m++)d.push(o(e.materials,this.material[m]));i.material=d}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let d=0;d<this.children.length;d++)i.children.push(this.children[d].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let d=0;d<this.animations.length;d++){const m=this.animations[d];i.animations.push(o(e.animations,m))}}if(n){const d=u(e.geometries),m=u(e.materials),v=u(e.textures),x=u(e.images),E=u(e.shapes),M=u(e.skeletons),R=u(e.animations),j=u(e.nodes);d.length>0&&(r.geometries=d),m.length>0&&(r.materials=m),v.length>0&&(r.textures=v),x.length>0&&(r.images=x),E.length>0&&(r.shapes=E),M.length>0&&(r.skeletons=M),R.length>0&&(r.animations=R),j.length>0&&(r.nodes=j)}return r.object=i,r;function u(d){const m=[];for(const v in d){const x=d[v];delete x.metadata,m.push(x)}return m}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}qr.DEFAULT_UP=new Be(0,1,0);qr.DEFAULT_MATRIX_AUTO_UPDATE=!0;qr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const fc=new Be,jh=new Be,gG=new Be,Hh=new Be,$_=new Be,K_=new Be,Iye=new Be,vG=new Be,yG=new Be,bG=new Be;class Ed{constructor(e=new Be,n=new Be,r=new Be){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),fc.subVectors(e,n),i.cross(fc);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,n,r,i,o){fc.subVectors(i,n),jh.subVectors(r,n),gG.subVectors(e,n);const u=fc.dot(fc),d=fc.dot(jh),m=fc.dot(gG),v=jh.dot(jh),x=jh.dot(gG),E=u*v-d*d;if(E===0)return o.set(0,0,0),null;const M=1/E,R=(v*m-d*x)*M,j=(u*x-d*m)*M;return o.set(1-R-j,j,R)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Hh)===null?!1:Hh.x>=0&&Hh.y>=0&&Hh.x+Hh.y<=1}static getInterpolation(e,n,r,i,o,u,d,m){return this.getBarycoord(e,n,r,i,Hh)===null?(m.x=0,m.y=0,"z"in m&&(m.z=0),"w"in m&&(m.w=0),null):(m.setScalar(0),m.addScaledVector(o,Hh.x),m.addScaledVector(u,Hh.y),m.addScaledVector(d,Hh.z),m)}static isFrontFacing(e,n,r,i){return fc.subVectors(r,n),jh.subVectors(e,n),fc.cross(jh).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return fc.subVectors(this.c,this.b),jh.subVectors(this.a,this.b),fc.cross(jh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ed.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Ed.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,r,i,o){return Ed.getInterpolation(e,this.a,this.b,this.c,n,r,i,o)}containsPoint(e){return Ed.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ed.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,o=this.c;let u,d;$_.subVectors(i,r),K_.subVectors(o,r),vG.subVectors(e,r);const m=$_.dot(vG),v=K_.dot(vG);if(m<=0&&v<=0)return n.copy(r);yG.subVectors(e,i);const x=$_.dot(yG),E=K_.dot(yG);if(x>=0&&E<=x)return n.copy(i);const M=m*E-x*v;if(M<=0&&m>=0&&x<=0)return u=m/(m-x),n.copy(r).addScaledVector($_,u);bG.subVectors(e,o);const R=$_.dot(bG),j=K_.dot(bG);if(j>=0&&R<=j)return n.copy(o);const F=R*v-m*j;if(F<=0&&v>=0&&j<=0)return d=v/(v-j),n.copy(r).addScaledVector(K_,d);const B=x*j-R*E;if(B<=0&&E-x>=0&&R-j>=0)return Iye.subVectors(o,i),d=(E-x)/(E-x+(R-j)),n.copy(i).addScaledVector(Iye,d);const z=1/(B+F+M);return u=F*z,d=M*z,n.copy(r).addScaledVector($_,u).addScaledVector(K_,d)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const USe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},rm={h:0,s:0,l:0},tL={h:0,s:0,l:0};function _G(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class xn{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=rs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,li.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=li.workingColorSpace){return this.r=e,this.g=n,this.b=r,li.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=li.workingColorSpace){if(e=w7(e,1),n=zs(n,0,1),r=zs(r,0,1),n===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+n):r+n-r*n,u=2*r-o;this.r=_G(u,o,e+1/3),this.g=_G(u,o,e),this.b=_G(u,o,e-1/3)}return li.toWorkingColorSpace(this,i),this}setStyle(e,n=rs){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const u=i[1],d=i[2];switch(u){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,n);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,n);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(d))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],u=o.length;if(u===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,n);if(u===6)return this.setHex(parseInt(o,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=rs){const r=USe[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=zw(e.r),this.g=zw(e.g),this.b=zw(e.b),this}copyLinearToSRGB(e){return this.r=lG(e.r),this.g=lG(e.g),this.b=lG(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=rs){return li.fromWorkingColorSpace(Ko.copy(this),e),Math.round(zs(Ko.r*255,0,255))*65536+Math.round(zs(Ko.g*255,0,255))*256+Math.round(zs(Ko.b*255,0,255))}getHexString(e=rs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=li.workingColorSpace){li.fromWorkingColorSpace(Ko.copy(this),n);const r=Ko.r,i=Ko.g,o=Ko.b,u=Math.max(r,i,o),d=Math.min(r,i,o);let m,v;const x=(d+u)/2;if(d===u)m=0,v=0;else{const E=u-d;switch(v=x<=.5?E/(u+d):E/(2-u-d),u){case r:m=(i-o)/E+(i<o?6:0);break;case i:m=(o-r)/E+2;break;case o:m=(r-i)/E+4;break}m/=6}return e.h=m,e.s=v,e.l=x,e}getRGB(e,n=li.workingColorSpace){return li.fromWorkingColorSpace(Ko.copy(this),n),e.r=Ko.r,e.g=Ko.g,e.b=Ko.b,e}getStyle(e=rs){li.fromWorkingColorSpace(Ko.copy(this),e);const n=Ko.r,r=Ko.g,i=Ko.b;return e!==rs?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(rm),this.setHSL(rm.h+e,rm.s+n,rm.l+r)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(rm),e.getHSL(tL);const r=eT(rm.h,tL.h,n),i=eT(rm.s,tL.s,n),o=eT(rm.l,tL.l,n);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*n+o[3]*r+o[6]*i,this.g=o[1]*n+o[4]*r+o[7]*i,this.b=o[2]*n+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ko=new xn;xn.NAMES=USe;let G5e=0;class Ml extends Tl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:G5e++}),this.uuid=rg(),this.name="",this.type="Material",this.blending=w0,this.side=kd,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=PT,this.blendDst=TT,this.blendEquation=Tm,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new xn(0,0,0),this.blendAlpha=0,this.depthFunc=PN,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=yye,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=U_,this.stencilZFail=U_,this.stencilZPass=U_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==w0&&(r.blending=this.blending),this.side!==kd&&(r.side=this.side),this.vertexColors===!0&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=!0),this.blendSrc!==PT&&(r.blendSrc=this.blendSrc),this.blendDst!==TT&&(r.blendDst=this.blendDst),this.blendEquation!==Tm&&(r.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(r.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(r.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(r.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(r.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(r.blendAlpha=this.blendAlpha),this.depthFunc!==PN&&(r.depthFunc=this.depthFunc),this.depthTest===!1&&(r.depthTest=this.depthTest),this.depthWrite===!1&&(r.depthWrite=this.depthWrite),this.colorWrite===!1&&(r.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(r.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==yye&&(r.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(r.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(r.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==U_&&(r.stencilFail=this.stencilFail),this.stencilZFail!==U_&&(r.stencilZFail=this.stencilZFail),this.stencilZPass!==U_&&(r.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(r.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=!0),this.alphaToCoverage===!0&&(r.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=!0),this.forceSinglePass===!0&&(r.forceSinglePass=!0),this.wireframe===!0&&(r.wireframe=!0),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=!0),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const u=[];for(const d in o){const m=o[d];delete m.metadata,u.push(m)}return u}if(n){const o=i(e.textures),u=i(e.images);o.length>0&&(r.textures=o),u.length>0&&(r.images=u)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=n[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class t1 extends Ml{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new xn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=SF,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ms=new Be,nL=new cn;class Xa{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=bye,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Sd,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Uw("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)nL.fromBufferAttribute(this,n),nL.applyMatrix3(e),this.setXY(n,nL.x,nL.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Ms.fromBufferAttribute(this,n),Ms.applyMatrix3(e),this.setXYZ(n,Ms.x,Ms.y,Ms.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Ms.fromBufferAttribute(this,n),Ms.applyMatrix4(e),this.setXYZ(n,Ms.x,Ms.y,Ms.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Ms.fromBufferAttribute(this,n),Ms.applyNormalMatrix(e),this.setXYZ(n,Ms.x,Ms.y,Ms.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Ms.fromBufferAttribute(this,n),Ms.transformDirection(e),this.setXYZ(n,Ms.x,Ms.y,Ms.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=cw(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=ga(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=cw(n,this.array)),n}setX(e,n){return this.normalized&&(n=ga(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=cw(n,this.array)),n}setY(e,n){return this.normalized&&(n=ga(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=cw(n,this.array)),n}setZ(e,n){return this.normalized&&(n=ga(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=cw(n,this.array)),n}setW(e,n){return this.normalized&&(n=ga(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=ga(n,this.array),r=ga(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=ga(n,this.array),r=ga(r,this.array),i=ga(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,o){return e*=this.itemSize,this.normalized&&(n=ga(n,this.array),r=ga(r,this.array),i=ga(i,this.array),o=ga(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==bye&&(e.usage=this.usage),e}}class S7 extends Xa{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class zSe extends Xa{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class ki extends Xa{constructor(e,n,r){super(new Float32Array(e),n,r)}}let W5e=0;const su=new Bn,wG=new qr,X_=new Be,ml=new h1,wP=new h1,eo=new Be;class Mo extends Tl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:W5e++}),this.uuid=rg(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(LSe(e)?zSe:S7)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new fr().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return su.makeRotationFromQuaternion(e),this.applyMatrix4(su),this}rotateX(e){return su.makeRotationX(e),this.applyMatrix4(su),this}rotateY(e){return su.makeRotationY(e),this.applyMatrix4(su),this}rotateZ(e){return su.makeRotationZ(e),this.applyMatrix4(su),this}translate(e,n,r){return su.makeTranslation(e,n,r),this.applyMatrix4(su),this}scale(e,n,r){return su.makeScale(e,n,r),this.applyMatrix4(su),this}lookAt(e){return wG.lookAt(e),wG.updateMatrix(),this.applyMatrix4(wG.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(X_).negate(),this.translate(X_.x,X_.y,X_.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new ki(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new h1);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Be(-1/0,-1/0,-1/0),new Be(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const o=n[r];ml.setFromBufferAttribute(o),this.morphTargetsRelative?(eo.addVectors(this.boundingBox.min,ml.min),this.boundingBox.expandByPoint(eo),eo.addVectors(this.boundingBox.max,ml.max),this.boundingBox.expandByPoint(eo)):(this.boundingBox.expandByPoint(ml.min),this.boundingBox.expandByPoint(ml.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new W0);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Be,1/0);return}if(e){const r=this.boundingSphere.center;if(ml.setFromBufferAttribute(e),n)for(let o=0,u=n.length;o<u;o++){const d=n[o];wP.setFromBufferAttribute(d),this.morphTargetsRelative?(eo.addVectors(ml.min,wP.min),ml.expandByPoint(eo),eo.addVectors(ml.max,wP.max),ml.expandByPoint(eo)):(ml.expandByPoint(wP.min),ml.expandByPoint(wP.max))}ml.getCenter(r);let i=0;for(let o=0,u=e.count;o<u;o++)eo.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(eo));if(n)for(let o=0,u=n.length;o<u;o++){const d=n[o],m=this.morphTargetsRelative;for(let v=0,x=d.count;v<x;v++)eo.fromBufferAttribute(d,v),m&&(X_.fromBufferAttribute(e,v),eo.add(X_)),i=Math.max(i,r.distanceToSquared(eo))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,o=n.normal.array,u=n.uv.array,d=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xa(new Float32Array(4*d),4));const m=this.getAttribute("tangent").array,v=[],x=[];for(let ie=0;ie<d;ie++)v[ie]=new Be,x[ie]=new Be;const E=new Be,M=new Be,R=new Be,j=new cn,F=new cn,B=new cn,z=new Be,P=new Be;function W(ie,Pe,_t){E.fromArray(i,ie*3),M.fromArray(i,Pe*3),R.fromArray(i,_t*3),j.fromArray(u,ie*2),F.fromArray(u,Pe*2),B.fromArray(u,_t*2),M.sub(E),R.sub(E),F.sub(j),B.sub(j);const Tt=1/(F.x*B.y-B.x*F.y);isFinite(Tt)&&(z.copy(M).multiplyScalar(B.y).addScaledVector(R,-F.y).multiplyScalar(Tt),P.copy(R).multiplyScalar(F.x).addScaledVector(M,-B.x).multiplyScalar(Tt),v[ie].add(z),v[Pe].add(z),v[_t].add(z),x[ie].add(P),x[Pe].add(P),x[_t].add(P))}let Z=this.groups;Z.length===0&&(Z=[{start:0,count:r.length}]);for(let ie=0,Pe=Z.length;ie<Pe;++ie){const _t=Z[ie],Tt=_t.start,de=_t.count;for(let ot=Tt,Me=Tt+de;ot<Me;ot+=3)W(r[ot+0],r[ot+1],r[ot+2])}const ge=new Be,X=new Be,pe=new Be,ye=new Be;function te(ie){pe.fromArray(o,ie*3),ye.copy(pe);const Pe=v[ie];ge.copy(Pe),ge.sub(pe.multiplyScalar(pe.dot(Pe))).normalize(),X.crossVectors(ye,Pe);const Tt=X.dot(x[ie])<0?-1:1;m[ie*4]=ge.x,m[ie*4+1]=ge.y,m[ie*4+2]=ge.z,m[ie*4+3]=Tt}for(let ie=0,Pe=Z.length;ie<Pe;++ie){const _t=Z[ie],Tt=_t.start,de=_t.count;for(let ot=Tt,Me=Tt+de;ot<Me;ot+=3)te(r[ot+0]),te(r[ot+1]),te(r[ot+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Xa(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let M=0,R=r.count;M<R;M++)r.setXYZ(M,0,0,0);const i=new Be,o=new Be,u=new Be,d=new Be,m=new Be,v=new Be,x=new Be,E=new Be;if(e)for(let M=0,R=e.count;M<R;M+=3){const j=e.getX(M+0),F=e.getX(M+1),B=e.getX(M+2);i.fromBufferAttribute(n,j),o.fromBufferAttribute(n,F),u.fromBufferAttribute(n,B),x.subVectors(u,o),E.subVectors(i,o),x.cross(E),d.fromBufferAttribute(r,j),m.fromBufferAttribute(r,F),v.fromBufferAttribute(r,B),d.add(x),m.add(x),v.add(x),r.setXYZ(j,d.x,d.y,d.z),r.setXYZ(F,m.x,m.y,m.z),r.setXYZ(B,v.x,v.y,v.z)}else for(let M=0,R=n.count;M<R;M+=3)i.fromBufferAttribute(n,M+0),o.fromBufferAttribute(n,M+1),u.fromBufferAttribute(n,M+2),x.subVectors(u,o),E.subVectors(i,o),x.cross(E),r.setXYZ(M+0,x.x,x.y,x.z),r.setXYZ(M+1,x.x,x.y,x.z),r.setXYZ(M+2,x.x,x.y,x.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)eo.fromBufferAttribute(e,n),eo.normalize(),e.setXYZ(n,eo.x,eo.y,eo.z)}toNonIndexed(){function e(d,m){const v=d.array,x=d.itemSize,E=d.normalized,M=new v.constructor(m.length*x);let R=0,j=0;for(let F=0,B=m.length;F<B;F++){d.isInterleavedBufferAttribute?R=m[F]*d.data.stride+d.offset:R=m[F]*x;for(let z=0;z<x;z++)M[j++]=v[R++]}return new Xa(M,x,E)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Mo,r=this.index.array,i=this.attributes;for(const d in i){const m=i[d],v=e(m,r);n.setAttribute(d,v)}const o=this.morphAttributes;for(const d in o){const m=[],v=o[d];for(let x=0,E=v.length;x<E;x++){const M=v[x],R=e(M,r);m.push(R)}n.morphAttributes[d]=m}n.morphTargetsRelative=this.morphTargetsRelative;const u=this.groups;for(let d=0,m=u.length;d<m;d++){const v=u[d];n.addGroup(v.start,v.count,v.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const m=this.parameters;for(const v in m)m[v]!==void 0&&(e[v]=m[v]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const m in r){const v=r[m];e.data.attributes[m]=v.toJSON(e.data)}const i={};let o=!1;for(const m in this.morphAttributes){const v=this.morphAttributes[m],x=[];for(let E=0,M=v.length;E<M;E++){const R=v[E];x.push(R.toJSON(e.data))}x.length>0&&(i[m]=x,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const u=this.groups;u.length>0&&(e.data.groups=JSON.parse(JSON.stringify(u)));const d=this.boundingSphere;return d!==null&&(e.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const v in i){const x=i[v];this.setAttribute(v,x.clone(n))}const o=e.morphAttributes;for(const v in o){const x=[],E=o[v];for(let M=0,R=E.length;M<R;M++)x.push(E[M].clone(n));this.morphAttributes[v]=x}this.morphTargetsRelative=e.morphTargetsRelative;const u=e.groups;for(let v=0,x=u.length;v<x;v++){const E=u[v];this.addGroup(E.start,E.count,E.materialIndex)}const d=e.boundingBox;d!==null&&(this.boundingBox=d.clone());const m=e.boundingSphere;return m!==null&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Rye=new Bn,Jv=new p1,rL=new W0,Dye=new Be,q_=new Be,Y_=new Be,Z_=new Be,xG=new Be,iL=new Be,sL=new cn,oL=new cn,aL=new cn,Oye=new Be,Lye=new Be,Nye=new Be,lL=new Be,uL=new Be;class is extends qr{constructor(e=new Mo,n=new t1){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=i.length;o<u;o++){const d=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,u=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const d=this.morphTargetInfluences;if(o&&d){iL.set(0,0,0);for(let m=0,v=o.length;m<v;m++){const x=d[m],E=o[m];x!==0&&(xG.fromBufferAttribute(E,e),u?iL.addScaledVector(xG,x):iL.addScaledVector(xG.sub(n),x))}n.add(iL)}return n}raycast(e,n){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),rL.copy(r.boundingSphere),rL.applyMatrix4(o),Jv.copy(e.ray).recast(e.near),!(rL.containsPoint(Jv.origin)===!1&&(Jv.intersectSphere(rL,Dye)===null||Jv.origin.distanceToSquared(Dye)>(e.far-e.near)**2))&&(Rye.copy(o).invert(),Jv.copy(e.ray).applyMatrix4(Rye),!(r.boundingBox!==null&&Jv.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,Jv)))}_computeIntersections(e,n,r){let i;const o=this.geometry,u=this.material,d=o.index,m=o.attributes.position,v=o.attributes.uv,x=o.attributes.uv1,E=o.attributes.normal,M=o.groups,R=o.drawRange;if(d!==null)if(Array.isArray(u))for(let j=0,F=M.length;j<F;j++){const B=M[j],z=u[B.materialIndex],P=Math.max(B.start,R.start),W=Math.min(d.count,Math.min(B.start+B.count,R.start+R.count));for(let Z=P,ge=W;Z<ge;Z+=3){const X=d.getX(Z),pe=d.getX(Z+1),ye=d.getX(Z+2);i=cL(this,z,e,r,v,x,E,X,pe,ye),i&&(i.faceIndex=Math.floor(Z/3),i.face.materialIndex=B.materialIndex,n.push(i))}}else{const j=Math.max(0,R.start),F=Math.min(d.count,R.start+R.count);for(let B=j,z=F;B<z;B+=3){const P=d.getX(B),W=d.getX(B+1),Z=d.getX(B+2);i=cL(this,u,e,r,v,x,E,P,W,Z),i&&(i.faceIndex=Math.floor(B/3),n.push(i))}}else if(m!==void 0)if(Array.isArray(u))for(let j=0,F=M.length;j<F;j++){const B=M[j],z=u[B.materialIndex],P=Math.max(B.start,R.start),W=Math.min(m.count,Math.min(B.start+B.count,R.start+R.count));for(let Z=P,ge=W;Z<ge;Z+=3){const X=Z,pe=Z+1,ye=Z+2;i=cL(this,z,e,r,v,x,E,X,pe,ye),i&&(i.faceIndex=Math.floor(Z/3),i.face.materialIndex=B.materialIndex,n.push(i))}}else{const j=Math.max(0,R.start),F=Math.min(m.count,R.start+R.count);for(let B=j,z=F;B<z;B+=3){const P=B,W=B+1,Z=B+2;i=cL(this,u,e,r,v,x,E,P,W,Z),i&&(i.faceIndex=Math.floor(B/3),n.push(i))}}}}function $5e(t,e,n,r,i,o,u,d){let m;if(e.side===Is?m=r.intersectTriangle(u,o,i,!0,d):m=r.intersectTriangle(i,o,u,e.side===kd,d),m===null)return null;uL.copy(d),uL.applyMatrix4(t.matrixWorld);const v=n.ray.origin.distanceTo(uL);return v<n.near||v>n.far?null:{distance:v,point:uL.clone(),object:t}}function cL(t,e,n,r,i,o,u,d,m,v){t.getVertexPosition(d,q_),t.getVertexPosition(m,Y_),t.getVertexPosition(v,Z_);const x=$5e(t,e,n,r,q_,Y_,Z_,lL);if(x){i&&(sL.fromBufferAttribute(i,d),oL.fromBufferAttribute(i,m),aL.fromBufferAttribute(i,v),x.uv=Ed.getInterpolation(lL,q_,Y_,Z_,sL,oL,aL,new cn)),o&&(sL.fromBufferAttribute(o,d),oL.fromBufferAttribute(o,m),aL.fromBufferAttribute(o,v),x.uv1=Ed.getInterpolation(lL,q_,Y_,Z_,sL,oL,aL,new cn),x.uv2=x.uv1),u&&(Oye.fromBufferAttribute(u,d),Lye.fromBufferAttribute(u,m),Nye.fromBufferAttribute(u,v),x.normal=Ed.getInterpolation(lL,q_,Y_,Z_,Oye,Lye,Nye,new Be),x.normal.dot(r.direction)>0&&x.normal.multiplyScalar(-1));const E={a:d,b:m,c:v,normal:new Be,materialIndex:0};Ed.getNormal(q_,Y_,Z_,E.normal),x.face=E}return x}class oM extends Mo{constructor(e=1,n=1,r=1,i=1,o=1,u=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:o,depthSegments:u};const d=this;i=Math.floor(i),o=Math.floor(o),u=Math.floor(u);const m=[],v=[],x=[],E=[];let M=0,R=0;j("z","y","x",-1,-1,r,n,e,u,o,0),j("z","y","x",1,-1,r,n,-e,u,o,1),j("x","z","y",1,1,e,r,n,i,u,2),j("x","z","y",1,-1,e,r,-n,i,u,3),j("x","y","z",1,-1,e,n,r,i,o,4),j("x","y","z",-1,-1,e,n,-r,i,o,5),this.setIndex(m),this.setAttribute("position",new ki(v,3)),this.setAttribute("normal",new ki(x,3)),this.setAttribute("uv",new ki(E,2));function j(F,B,z,P,W,Z,ge,X,pe,ye,te){const ie=Z/pe,Pe=ge/ye,_t=Z/2,Tt=ge/2,de=X/2,ot=pe+1,Me=ye+1;let wt=0,Ge=0;const it=new Be;for(let Qe=0;Qe<Me;Qe++){const ut=Qe*Pe-Tt;for(let je=0;je<ot;je++){const bt=je*ie-_t;it[F]=bt*P,it[B]=ut*W,it[z]=de,v.push(it.x,it.y,it.z),it[F]=0,it[B]=0,it[z]=X>0?1:-1,x.push(it.x,it.y,it.z),E.push(je/pe),E.push(1-Qe/ye),wt+=1}}for(let Qe=0;Qe<ye;Qe++)for(let ut=0;ut<pe;ut++){const je=M+ut+ot*Qe,bt=M+ut+ot*(Qe+1),Fe=M+(ut+1)+ot*(Qe+1),at=M+(ut+1)+ot*Qe;m.push(je,bt,at),m.push(bt,Fe,at),Ge+=6}d.addGroup(R,Ge,te),R+=Ge,M+=wt}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oM(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function n1(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function va(t){const e={};for(let n=0;n<t.length;n++){const r=n1(t[n]);for(const i in r)e[i]=r[i]}return e}function K5e(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function VSe(t){return t.getRenderTarget()===null?t.outputColorSpace:li.workingColorSpace}const X5e={clone:n1,merge:va};var q5e=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Y5e=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ta extends Ml{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=q5e,this.fragmentShader=Y5e,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=n1(e.uniforms),this.uniformsGroups=K5e(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const u=this.uniforms[i].value;u&&u.isTexture?n.uniforms[i]={type:"t",value:u.toJSON(e).uuid}:u&&u.isColor?n.uniforms[i]={type:"c",value:u.getHex()}:u&&u.isVector2?n.uniforms[i]={type:"v2",value:u.toArray()}:u&&u.isVector3?n.uniforms[i]={type:"v3",value:u.toArray()}:u&&u.isVector4?n.uniforms[i]={type:"v4",value:u.toArray()}:u&&u.isMatrix3?n.uniforms[i]={type:"m3",value:u.toArray()}:u&&u.isMatrix4?n.uniforms[i]={type:"m4",value:u.toArray()}:n.uniforms[i]={value:u}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class TF extends qr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Bn,this.projectionMatrix=new Bn,this.projectionMatrixInverse=new Bn,this.coordinateSystem=Jh}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const im=new Be,Fye=new cn,Bye=new cn;class Vs extends TF{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=e1*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(JP*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return e1*2*Math.atan(Math.tan(JP*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,r){im.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(im.x,im.y).multiplyScalar(-e/im.z),im.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),r.set(im.x,im.y).multiplyScalar(-e/im.z)}getViewSize(e,n){return this.getViewBounds(e,Fye,Bye),n.subVectors(Bye,Fye)}setViewOffset(e,n,r,i,o,u){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(JP*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,o=-.5*i;const u=this.view;if(this.view!==null&&this.view.enabled){const m=u.fullWidth,v=u.fullHeight;o+=u.offsetX*i/m,n-=u.offsetY*r/v,i*=u.width/m,r*=u.height/v}const d=this.filmOffset;d!==0&&(o+=e*d/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Q_=-90,J_=1;class Z5e extends qr{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new Vs(Q_,J_,e,n);i.layers=this.layers,this.add(i);const o=new Vs(Q_,J_,e,n);o.layers=this.layers,this.add(o);const u=new Vs(Q_,J_,e,n);u.layers=this.layers,this.add(u);const d=new Vs(Q_,J_,e,n);d.layers=this.layers,this.add(d);const m=new Vs(Q_,J_,e,n);m.layers=this.layers,this.add(m);const v=new Vs(Q_,J_,e,n);v.layers=this.layers,this.add(v)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,o,u,d,m]=n;for(const v of n)this.remove(v);if(e===Jh)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),u.up.set(0,0,1),u.lookAt(0,-1,0),d.up.set(0,1,0),d.lookAt(0,0,1),m.up.set(0,1,0),m.lookAt(0,0,-1);else if(e===ON)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),u.up.set(0,0,-1),u.lookAt(0,-1,0),d.up.set(0,-1,0),d.lookAt(0,0,1),m.up.set(0,-1,0),m.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const v of n)this.add(v),v.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:r,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,u,d,m,v,x]=this.children,E=e.getRenderTarget(),M=e.getActiveCubeFace(),R=e.getActiveMipmapLevel(),j=e.xr.enabled;e.xr.enabled=!1;const F=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0,i),e.render(n,o),e.setRenderTarget(r,1,i),e.render(n,u),e.setRenderTarget(r,2,i),e.render(n,d),e.setRenderTarget(r,3,i),e.render(n,m),e.setRenderTarget(r,4,i),e.render(n,v),r.texture.generateMipmaps=F,e.setRenderTarget(r,5,i),e.render(n,x),e.setRenderTarget(E,M,R),e.xr.enabled=j,r.texture.needsPMREMUpdate=!0}}class MF extends qi{constructor(e,n,r,i,o,u,d,m,v,x){e=e!==void 0?e:[],n=n!==void 0?n:Qw,super(e,n,r,i,o,u,d,m,v,x),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Q5e extends Sl{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(Uw("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===sp?rs:fu),this.texture=new MF(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:no}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new oM(5,5,5),o=new Ta({name:"CubemapFromEquirect",uniforms:n1(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Is,blending:_u});o.uniforms.tEquirect.value=n;const u=new is(i,o),d=n.minFilter;return n.minFilter===g0&&(n.minFilter=no),new Z5e(1,10,this).update(e,u),n.minFilter=d,u.geometry.dispose(),u.material.dispose(),this}clear(e,n,r,i){const o=e.getRenderTarget();for(let u=0;u<6;u++)e.setRenderTarget(this,u),e.clear(n,r,i);e.setRenderTarget(o)}}const SG=new Be,J5e=new Be,e4e=new fr;class Sm{constructor(e=new Be(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=SG.subVectors(r,n).cross(J5e.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(SG),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:n.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||e4e.getNormalMatrix(e),i=this.coplanarPoint(SG).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const e0=new W0,dL=new Be;class E7{constructor(e=new Sm,n=new Sm,r=new Sm,i=new Sm,o=new Sm,u=new Sm){this.planes=[e,n,r,i,o,u]}set(e,n,r,i,o,u){const d=this.planes;return d[0].copy(e),d[1].copy(n),d[2].copy(r),d[3].copy(i),d[4].copy(o),d[5].copy(u),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Jh){const r=this.planes,i=e.elements,o=i[0],u=i[1],d=i[2],m=i[3],v=i[4],x=i[5],E=i[6],M=i[7],R=i[8],j=i[9],F=i[10],B=i[11],z=i[12],P=i[13],W=i[14],Z=i[15];if(r[0].setComponents(m-o,M-v,B-R,Z-z).normalize(),r[1].setComponents(m+o,M+v,B+R,Z+z).normalize(),r[2].setComponents(m+u,M+x,B+j,Z+P).normalize(),r[3].setComponents(m-u,M-x,B-j,Z-P).normalize(),r[4].setComponents(m-d,M-E,B-F,Z-W).normalize(),n===Jh)r[5].setComponents(m+d,M+E,B+F,Z+W).normalize();else if(n===ON)r[5].setComponents(d,E,F,W).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),e0.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),e0.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(e0)}intersectsSprite(e){return e0.center.set(0,0,0),e0.radius=.7071067811865476,e0.applyMatrix4(e.matrixWorld),this.intersectsSphere(e0)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(n[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(dL.x=i.normal.x>0?e.max.x:e.min.x,dL.y=i.normal.y>0?e.max.y:e.min.y,dL.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(dL)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function jSe(){let t=null,e=!1,n=null,r=null;function i(o,u){n(o,u),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){n=o},setContext:function(o){t=o}}}function t4e(t,e){const n=e.isWebGL2,r=new WeakMap;function i(v,x){const E=v.array,M=v.usage,R=E.byteLength,j=t.createBuffer();t.bindBuffer(x,j),t.bufferData(x,E,M),v.onUploadCallback();let F;if(E instanceof Float32Array)F=t.FLOAT;else if(E instanceof Uint16Array)if(v.isFloat16BufferAttribute)if(n)F=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else F=t.UNSIGNED_SHORT;else if(E instanceof Int16Array)F=t.SHORT;else if(E instanceof Uint32Array)F=t.UNSIGNED_INT;else if(E instanceof Int32Array)F=t.INT;else if(E instanceof Int8Array)F=t.BYTE;else if(E instanceof Uint8Array)F=t.UNSIGNED_BYTE;else if(E instanceof Uint8ClampedArray)F=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+E);return{buffer:j,type:F,bytesPerElement:E.BYTES_PER_ELEMENT,version:v.version,size:R}}function o(v,x,E){const M=x.array,R=x._updateRange,j=x.updateRanges;if(t.bindBuffer(E,v),R.count===-1&&j.length===0&&t.bufferSubData(E,0,M),j.length!==0){for(let F=0,B=j.length;F<B;F++){const z=j[F];n?t.bufferSubData(E,z.start*M.BYTES_PER_ELEMENT,M,z.start,z.count):t.bufferSubData(E,z.start*M.BYTES_PER_ELEMENT,M.subarray(z.start,z.start+z.count))}x.clearUpdateRanges()}R.count!==-1&&(n?t.bufferSubData(E,R.offset*M.BYTES_PER_ELEMENT,M,R.offset,R.count):t.bufferSubData(E,R.offset*M.BYTES_PER_ELEMENT,M.subarray(R.offset,R.offset+R.count)),R.count=-1),x.onUploadCallback()}function u(v){return v.isInterleavedBufferAttribute&&(v=v.data),r.get(v)}function d(v){v.isInterleavedBufferAttribute&&(v=v.data);const x=r.get(v);x&&(t.deleteBuffer(x.buffer),r.delete(v))}function m(v,x){if(v.isGLBufferAttribute){const M=r.get(v);(!M||M.version<v.version)&&r.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version});return}v.isInterleavedBufferAttribute&&(v=v.data);const E=r.get(v);if(E===void 0)r.set(v,i(v,x));else if(E.version<v.version){if(E.size!==v.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");o(E.buffer,v,x),E.version=v.version}}return{get:u,remove:d,update:m}}class f1 extends Mo{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const o=e/2,u=n/2,d=Math.floor(r),m=Math.floor(i),v=d+1,x=m+1,E=e/d,M=n/m,R=[],j=[],F=[],B=[];for(let z=0;z<x;z++){const P=z*M-u;for(let W=0;W<v;W++){const Z=W*E-o;j.push(Z,-P,0),F.push(0,0,1),B.push(W/d),B.push(1-z/m)}}for(let z=0;z<m;z++)for(let P=0;P<d;P++){const W=P+v*z,Z=P+v*(z+1),ge=P+1+v*(z+1),X=P+1+v*z;R.push(W,Z,X),R.push(Z,ge,X)}this.setIndex(R),this.setAttribute("position",new ki(j,3)),this.setAttribute("normal",new ki(F,3)),this.setAttribute("uv",new ki(B,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new f1(e.width,e.height,e.widthSegments,e.heightSegments)}}var n4e=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,r4e=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,i4e=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,s4e=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,o4e=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,a4e=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,l4e=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,u4e=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,c4e=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,d4e=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,h4e=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,p4e=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,f4e=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,m4e=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,g4e=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,v4e=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,y4e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,b4e=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,_4e=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,w4e=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,x4e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,S4e=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,E4e=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,C4e=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,P4e=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,T4e=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,M4e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,k4e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,A4e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,I4e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,R4e="gl_FragColor = linearToOutputTexel( gl_FragColor );",D4e=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,O4e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,L4e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,N4e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,F4e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,B4e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,U4e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,z4e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,V4e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,j4e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,H4e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,G4e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,W4e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,$4e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,K4e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,X4e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,q4e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Y4e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Z4e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Q4e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,J4e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,eze=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,tze=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,nze=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,rze=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,ize=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,sze=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,oze=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,aze=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,lze=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,uze=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,cze=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,dze=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,hze=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,pze=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,fze=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,mze=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,gze=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,vze=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,yze=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,bze=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,_ze=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,wze=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,xze=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Sze=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Eze=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Cze=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Pze=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Tze=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Mze=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,kze=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Aze=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Ize=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Rze=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Dze=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Oze=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Lze=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Nze=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Fze=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Bze=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Uze=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,zze=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Vze=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,jze=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Hze=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Gze=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Wze=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,$ze=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Kze=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Xze=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,qze=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Yze=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Zze=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Qze=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Jze=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,eVe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const tVe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,nVe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,rVe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,iVe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,sVe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,oVe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,aVe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,lVe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,uVe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,cVe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,dVe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,hVe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pVe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fVe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,mVe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,gVe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vVe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yVe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bVe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,_Ve=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wVe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,xVe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,SVe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,EVe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CVe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,PVe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TVe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MVe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kVe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,AVe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,IVe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,RVe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,DVe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,OVe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,pr={alphahash_fragment:n4e,alphahash_pars_fragment:r4e,alphamap_fragment:i4e,alphamap_pars_fragment:s4e,alphatest_fragment:o4e,alphatest_pars_fragment:a4e,aomap_fragment:l4e,aomap_pars_fragment:u4e,batching_pars_vertex:c4e,batching_vertex:d4e,begin_vertex:h4e,beginnormal_vertex:p4e,bsdfs:f4e,iridescence_fragment:m4e,bumpmap_pars_fragment:g4e,clipping_planes_fragment:v4e,clipping_planes_pars_fragment:y4e,clipping_planes_pars_vertex:b4e,clipping_planes_vertex:_4e,color_fragment:w4e,color_pars_fragment:x4e,color_pars_vertex:S4e,color_vertex:E4e,common:C4e,cube_uv_reflection_fragment:P4e,defaultnormal_vertex:T4e,displacementmap_pars_vertex:M4e,displacementmap_vertex:k4e,emissivemap_fragment:A4e,emissivemap_pars_fragment:I4e,colorspace_fragment:R4e,colorspace_pars_fragment:D4e,envmap_fragment:O4e,envmap_common_pars_fragment:L4e,envmap_pars_fragment:N4e,envmap_pars_vertex:F4e,envmap_physical_pars_fragment:q4e,envmap_vertex:B4e,fog_vertex:U4e,fog_pars_vertex:z4e,fog_fragment:V4e,fog_pars_fragment:j4e,gradientmap_pars_fragment:H4e,lightmap_fragment:G4e,lightmap_pars_fragment:W4e,lights_lambert_fragment:$4e,lights_lambert_pars_fragment:K4e,lights_pars_begin:X4e,lights_toon_fragment:Y4e,lights_toon_pars_fragment:Z4e,lights_phong_fragment:Q4e,lights_phong_pars_fragment:J4e,lights_physical_fragment:eze,lights_physical_pars_fragment:tze,lights_fragment_begin:nze,lights_fragment_maps:rze,lights_fragment_end:ize,logdepthbuf_fragment:sze,logdepthbuf_pars_fragment:oze,logdepthbuf_pars_vertex:aze,logdepthbuf_vertex:lze,map_fragment:uze,map_pars_fragment:cze,map_particle_fragment:dze,map_particle_pars_fragment:hze,metalnessmap_fragment:pze,metalnessmap_pars_fragment:fze,morphcolor_vertex:mze,morphnormal_vertex:gze,morphtarget_pars_vertex:vze,morphtarget_vertex:yze,normal_fragment_begin:bze,normal_fragment_maps:_ze,normal_pars_fragment:wze,normal_pars_vertex:xze,normal_vertex:Sze,normalmap_pars_fragment:Eze,clearcoat_normal_fragment_begin:Cze,clearcoat_normal_fragment_maps:Pze,clearcoat_pars_fragment:Tze,iridescence_pars_fragment:Mze,opaque_fragment:kze,packing:Aze,premultiplied_alpha_fragment:Ize,project_vertex:Rze,dithering_fragment:Dze,dithering_pars_fragment:Oze,roughnessmap_fragment:Lze,roughnessmap_pars_fragment:Nze,shadowmap_pars_fragment:Fze,shadowmap_pars_vertex:Bze,shadowmap_vertex:Uze,shadowmask_pars_fragment:zze,skinbase_vertex:Vze,skinning_pars_vertex:jze,skinning_vertex:Hze,skinnormal_vertex:Gze,specularmap_fragment:Wze,specularmap_pars_fragment:$ze,tonemapping_fragment:Kze,tonemapping_pars_fragment:Xze,transmission_fragment:qze,transmission_pars_fragment:Yze,uv_pars_fragment:Zze,uv_pars_vertex:Qze,uv_vertex:Jze,worldpos_vertex:eVe,background_vert:tVe,background_frag:nVe,backgroundCube_vert:rVe,backgroundCube_frag:iVe,cube_vert:sVe,cube_frag:oVe,depth_vert:aVe,depth_frag:lVe,distanceRGBA_vert:uVe,distanceRGBA_frag:cVe,equirect_vert:dVe,equirect_frag:hVe,linedashed_vert:pVe,linedashed_frag:fVe,meshbasic_vert:mVe,meshbasic_frag:gVe,meshlambert_vert:vVe,meshlambert_frag:yVe,meshmatcap_vert:bVe,meshmatcap_frag:_Ve,meshnormal_vert:wVe,meshnormal_frag:xVe,meshphong_vert:SVe,meshphong_frag:EVe,meshphysical_vert:CVe,meshphysical_frag:PVe,meshtoon_vert:TVe,meshtoon_frag:MVe,points_vert:kVe,points_frag:AVe,shadow_vert:IVe,shadow_frag:RVe,sprite_vert:DVe,sprite_frag:OVe},en={common:{diffuse:{value:new xn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new fr},alphaMap:{value:null},alphaMapTransform:{value:new fr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new fr}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new fr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new fr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new fr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new fr},normalScale:{value:new cn(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new fr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new fr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new fr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new fr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new fr},alphaTest:{value:0},uvTransform:{value:new fr}},sprite:{diffuse:{value:new xn(16777215)},opacity:{value:1},center:{value:new cn(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new fr},alphaMap:{value:null},alphaMapTransform:{value:new fr},alphaTest:{value:0}}},wd={basic:{uniforms:va([en.common,en.specularmap,en.envmap,en.aomap,en.lightmap,en.fog]),vertexShader:pr.meshbasic_vert,fragmentShader:pr.meshbasic_frag},lambert:{uniforms:va([en.common,en.specularmap,en.envmap,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.fog,en.lights,{emissive:{value:new xn(0)}}]),vertexShader:pr.meshlambert_vert,fragmentShader:pr.meshlambert_frag},phong:{uniforms:va([en.common,en.specularmap,en.envmap,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.fog,en.lights,{emissive:{value:new xn(0)},specular:{value:new xn(1118481)},shininess:{value:30}}]),vertexShader:pr.meshphong_vert,fragmentShader:pr.meshphong_frag},standard:{uniforms:va([en.common,en.envmap,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.roughnessmap,en.metalnessmap,en.fog,en.lights,{emissive:{value:new xn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:pr.meshphysical_vert,fragmentShader:pr.meshphysical_frag},toon:{uniforms:va([en.common,en.aomap,en.lightmap,en.emissivemap,en.bumpmap,en.normalmap,en.displacementmap,en.gradientmap,en.fog,en.lights,{emissive:{value:new xn(0)}}]),vertexShader:pr.meshtoon_vert,fragmentShader:pr.meshtoon_frag},matcap:{uniforms:va([en.common,en.bumpmap,en.normalmap,en.displacementmap,en.fog,{matcap:{value:null}}]),vertexShader:pr.meshmatcap_vert,fragmentShader:pr.meshmatcap_frag},points:{uniforms:va([en.points,en.fog]),vertexShader:pr.points_vert,fragmentShader:pr.points_frag},dashed:{uniforms:va([en.common,en.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pr.linedashed_vert,fragmentShader:pr.linedashed_frag},depth:{uniforms:va([en.common,en.displacementmap]),vertexShader:pr.depth_vert,fragmentShader:pr.depth_frag},normal:{uniforms:va([en.common,en.bumpmap,en.normalmap,en.displacementmap,{opacity:{value:1}}]),vertexShader:pr.meshnormal_vert,fragmentShader:pr.meshnormal_frag},sprite:{uniforms:va([en.sprite,en.fog]),vertexShader:pr.sprite_vert,fragmentShader:pr.sprite_frag},background:{uniforms:{uvTransform:{value:new fr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:pr.background_vert,fragmentShader:pr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:pr.backgroundCube_vert,fragmentShader:pr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:pr.cube_vert,fragmentShader:pr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pr.equirect_vert,fragmentShader:pr.equirect_frag},distanceRGBA:{uniforms:va([en.common,en.displacementmap,{referencePosition:{value:new Be},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pr.distanceRGBA_vert,fragmentShader:pr.distanceRGBA_frag},shadow:{uniforms:va([en.lights,en.fog,{color:{value:new xn(0)},opacity:{value:1}}]),vertexShader:pr.shadow_vert,fragmentShader:pr.shadow_frag}};wd.physical={uniforms:va([wd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new fr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new fr},clearcoatNormalScale:{value:new cn(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new fr},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new fr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new fr},sheen:{value:0},sheenColor:{value:new xn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new fr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new fr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new fr},transmissionSamplerSize:{value:new cn},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new fr},attenuationDistance:{value:0},attenuationColor:{value:new xn(0)},specularColor:{value:new xn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new fr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new fr},anisotropyVector:{value:new cn},anisotropyMap:{value:null},anisotropyMapTransform:{value:new fr}}]),vertexShader:pr.meshphysical_vert,fragmentShader:pr.meshphysical_frag};const hL={r:0,b:0,g:0};function LVe(t,e,n,r,i,o,u){const d=new xn(0);let m=o===!0?0:1,v,x,E=null,M=0,R=null;function j(B,z){let P=!1,W=z.isScene===!0?z.background:null;W&&W.isTexture&&(W=(z.backgroundBlurriness>0?n:e).get(W)),W===null?F(d,m):W&&W.isColor&&(F(W,1),P=!0);const Z=t.xr.getEnvironmentBlendMode();Z==="additive"?r.buffers.color.setClear(0,0,0,1,u):Z==="alpha-blend"&&r.buffers.color.setClear(0,0,0,0,u),(t.autoClear||P)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),W&&(W.isCubeTexture||W.mapping===EF)?(x===void 0&&(x=new is(new oM(1,1,1),new Ta({name:"BackgroundCubeMaterial",uniforms:n1(wd.backgroundCube.uniforms),vertexShader:wd.backgroundCube.vertexShader,fragmentShader:wd.backgroundCube.fragmentShader,side:Is,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),x.geometry.deleteAttribute("uv"),x.onBeforeRender=function(ge,X,pe){this.matrixWorld.copyPosition(pe.matrixWorld)},Object.defineProperty(x.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(x)),x.material.uniforms.envMap.value=W,x.material.uniforms.flipEnvMap.value=W.isCubeTexture&&W.isRenderTargetTexture===!1?-1:1,x.material.uniforms.backgroundBlurriness.value=z.backgroundBlurriness,x.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,x.material.toneMapped=li.getTransfer(W.colorSpace)!==Ti,(E!==W||M!==W.version||R!==t.toneMapping)&&(x.material.needsUpdate=!0,E=W,M=W.version,R=t.toneMapping),x.layers.enableAll(),B.unshift(x,x.geometry,x.material,0,0,null)):W&&W.isTexture&&(v===void 0&&(v=new is(new f1(2,2),new Ta({name:"BackgroundMaterial",uniforms:n1(wd.background.uniforms),vertexShader:wd.background.vertexShader,fragmentShader:wd.background.fragmentShader,side:kd,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),Object.defineProperty(v.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(v)),v.material.uniforms.t2D.value=W,v.material.uniforms.backgroundIntensity.value=z.backgroundIntensity,v.material.toneMapped=li.getTransfer(W.colorSpace)!==Ti,W.matrixAutoUpdate===!0&&W.updateMatrix(),v.material.uniforms.uvTransform.value.copy(W.matrix),(E!==W||M!==W.version||R!==t.toneMapping)&&(v.material.needsUpdate=!0,E=W,M=W.version,R=t.toneMapping),v.layers.enableAll(),B.unshift(v,v.geometry,v.material,0,0,null))}function F(B,z){B.getRGB(hL,VSe(t)),r.buffers.color.setClear(hL.r,hL.g,hL.b,z,u)}return{getClearColor:function(){return d},setClearColor:function(B,z=1){d.set(B),m=z,F(d,m)},getClearAlpha:function(){return m},setClearAlpha:function(B){m=B,F(d,m)},render:j}}function NVe(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),u=r.isWebGL2||o!==null,d={},m=B(null);let v=m,x=!1;function E(de,ot,Me,wt,Ge){let it=!1;if(u){const Qe=F(wt,Me,ot);v!==Qe&&(v=Qe,R(v.object)),it=z(de,wt,Me,Ge),it&&P(de,wt,Me,Ge)}else{const Qe=ot.wireframe===!0;(v.geometry!==wt.id||v.program!==Me.id||v.wireframe!==Qe)&&(v.geometry=wt.id,v.program=Me.id,v.wireframe=Qe,it=!0)}Ge!==null&&n.update(Ge,t.ELEMENT_ARRAY_BUFFER),(it||x)&&(x=!1,ye(de,ot,Me,wt),Ge!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(Ge).buffer))}function M(){return r.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function R(de){return r.isWebGL2?t.bindVertexArray(de):o.bindVertexArrayOES(de)}function j(de){return r.isWebGL2?t.deleteVertexArray(de):o.deleteVertexArrayOES(de)}function F(de,ot,Me){const wt=Me.wireframe===!0;let Ge=d[de.id];Ge===void 0&&(Ge={},d[de.id]=Ge);let it=Ge[ot.id];it===void 0&&(it={},Ge[ot.id]=it);let Qe=it[wt];return Qe===void 0&&(Qe=B(M()),it[wt]=Qe),Qe}function B(de){const ot=[],Me=[],wt=[];for(let Ge=0;Ge<i;Ge++)ot[Ge]=0,Me[Ge]=0,wt[Ge]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ot,enabledAttributes:Me,attributeDivisors:wt,object:de,attributes:{},index:null}}function z(de,ot,Me,wt){const Ge=v.attributes,it=ot.attributes;let Qe=0;const ut=Me.getAttributes();for(const je in ut)if(ut[je].location>=0){const Fe=Ge[je];let at=it[je];if(at===void 0&&(je==="instanceMatrix"&&de.instanceMatrix&&(at=de.instanceMatrix),je==="instanceColor"&&de.instanceColor&&(at=de.instanceColor)),Fe===void 0||Fe.attribute!==at||at&&Fe.data!==at.data)return!0;Qe++}return v.attributesNum!==Qe||v.index!==wt}function P(de,ot,Me,wt){const Ge={},it=ot.attributes;let Qe=0;const ut=Me.getAttributes();for(const je in ut)if(ut[je].location>=0){let Fe=it[je];Fe===void 0&&(je==="instanceMatrix"&&de.instanceMatrix&&(Fe=de.instanceMatrix),je==="instanceColor"&&de.instanceColor&&(Fe=de.instanceColor));const at={};at.attribute=Fe,Fe&&Fe.data&&(at.data=Fe.data),Ge[je]=at,Qe++}v.attributes=Ge,v.attributesNum=Qe,v.index=wt}function W(){const de=v.newAttributes;for(let ot=0,Me=de.length;ot<Me;ot++)de[ot]=0}function Z(de){ge(de,0)}function ge(de,ot){const Me=v.newAttributes,wt=v.enabledAttributes,Ge=v.attributeDivisors;Me[de]=1,wt[de]===0&&(t.enableVertexAttribArray(de),wt[de]=1),Ge[de]!==ot&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](de,ot),Ge[de]=ot)}function X(){const de=v.newAttributes,ot=v.enabledAttributes;for(let Me=0,wt=ot.length;Me<wt;Me++)ot[Me]!==de[Me]&&(t.disableVertexAttribArray(Me),ot[Me]=0)}function pe(de,ot,Me,wt,Ge,it,Qe){Qe===!0?t.vertexAttribIPointer(de,ot,Me,Ge,it):t.vertexAttribPointer(de,ot,Me,wt,Ge,it)}function ye(de,ot,Me,wt){if(r.isWebGL2===!1&&(de.isInstancedMesh||wt.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;W();const Ge=wt.attributes,it=Me.getAttributes(),Qe=ot.defaultAttributeValues;for(const ut in it){const je=it[ut];if(je.location>=0){let bt=Ge[ut];if(bt===void 0&&(ut==="instanceMatrix"&&de.instanceMatrix&&(bt=de.instanceMatrix),ut==="instanceColor"&&de.instanceColor&&(bt=de.instanceColor)),bt!==void 0){const Fe=bt.normalized,at=bt.itemSize,Ot=n.get(bt);if(Ot===void 0)continue;const Gt=Ot.buffer,tn=Ot.type,Kt=Ot.bytesPerElement,Tn=r.isWebGL2===!0&&(tn===t.INT||tn===t.UNSIGNED_INT||bt.gpuType===TSe);if(bt.isInterleavedBufferAttribute){const nn=bt.data,He=nn.stride,jn=bt.offset;if(nn.isInstancedInterleavedBuffer){for(let an=0;an<je.locationSize;an++)ge(je.location+an,nn.meshPerAttribute);de.isInstancedMesh!==!0&&wt._maxInstanceCount===void 0&&(wt._maxInstanceCount=nn.meshPerAttribute*nn.count)}else for(let an=0;an<je.locationSize;an++)Z(je.location+an);t.bindBuffer(t.ARRAY_BUFFER,Gt);for(let an=0;an<je.locationSize;an++)pe(je.location+an,at/je.locationSize,tn,Fe,He*Kt,(jn+at/je.locationSize*an)*Kt,Tn)}else{if(bt.isInstancedBufferAttribute){for(let nn=0;nn<je.locationSize;nn++)ge(je.location+nn,bt.meshPerAttribute);de.isInstancedMesh!==!0&&wt._maxInstanceCount===void 0&&(wt._maxInstanceCount=bt.meshPerAttribute*bt.count)}else for(let nn=0;nn<je.locationSize;nn++)Z(je.location+nn);t.bindBuffer(t.ARRAY_BUFFER,Gt);for(let nn=0;nn<je.locationSize;nn++)pe(je.location+nn,at/je.locationSize,tn,Fe,at*Kt,at/je.locationSize*nn*Kt,Tn)}}else if(Qe!==void 0){const Fe=Qe[ut];if(Fe!==void 0)switch(Fe.length){case 2:t.vertexAttrib2fv(je.location,Fe);break;case 3:t.vertexAttrib3fv(je.location,Fe);break;case 4:t.vertexAttrib4fv(je.location,Fe);break;default:t.vertexAttrib1fv(je.location,Fe)}}}}X()}function te(){_t();for(const de in d){const ot=d[de];for(const Me in ot){const wt=ot[Me];for(const Ge in wt)j(wt[Ge].object),delete wt[Ge];delete ot[Me]}delete d[de]}}function ie(de){if(d[de.id]===void 0)return;const ot=d[de.id];for(const Me in ot){const wt=ot[Me];for(const Ge in wt)j(wt[Ge].object),delete wt[Ge];delete ot[Me]}delete d[de.id]}function Pe(de){for(const ot in d){const Me=d[ot];if(Me[de.id]===void 0)continue;const wt=Me[de.id];for(const Ge in wt)j(wt[Ge].object),delete wt[Ge];delete Me[de.id]}}function _t(){Tt(),x=!0,v!==m&&(v=m,R(v.object))}function Tt(){m.geometry=null,m.program=null,m.wireframe=!1}return{setup:E,reset:_t,resetDefaultState:Tt,dispose:te,releaseStatesOfGeometry:ie,releaseStatesOfProgram:Pe,initAttributes:W,enableAttribute:Z,disableUnusedAttributes:X}}function FVe(t,e,n,r){const i=r.isWebGL2;let o;function u(x){o=x}function d(x,E){t.drawArrays(o,x,E),n.update(E,o,1)}function m(x,E,M){if(M===0)return;let R,j;if(i)R=t,j="drawArraysInstanced";else if(R=e.get("ANGLE_instanced_arrays"),j="drawArraysInstancedANGLE",R===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}R[j](o,x,E,M),n.update(E,o,M)}function v(x,E,M){if(M===0)return;const R=e.get("WEBGL_multi_draw");if(R===null)for(let j=0;j<M;j++)this.render(x[j],E[j]);else{R.multiDrawArraysWEBGL(o,x,0,E,0,M);let j=0;for(let F=0;F<M;F++)j+=E[F];n.update(j,o,1)}}this.setMode=u,this.render=d,this.renderInstances=m,this.renderMultiDraw=v}function BVe(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const pe=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(pe.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(pe){if(pe==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";pe="mediump"}return pe==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const u=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let d=n.precision!==void 0?n.precision:"highp";const m=o(d);m!==d&&(console.warn("THREE.WebGLRenderer:",d,"not supported, using",m,"instead."),d=m);const v=u||e.has("WEBGL_draw_buffers"),x=n.logarithmicDepthBuffer===!0,E=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),M=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),R=t.getParameter(t.MAX_TEXTURE_SIZE),j=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),F=t.getParameter(t.MAX_VERTEX_ATTRIBS),B=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),z=t.getParameter(t.MAX_VARYING_VECTORS),P=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),W=M>0,Z=u||e.has("OES_texture_float"),ge=W&&Z,X=u?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:u,drawBuffers:v,getMaxAnisotropy:i,getMaxPrecision:o,precision:d,logarithmicDepthBuffer:x,maxTextures:E,maxVertexTextures:M,maxTextureSize:R,maxCubemapSize:j,maxAttributes:F,maxVertexUniforms:B,maxVaryings:z,maxFragmentUniforms:P,vertexTextures:W,floatFragmentTextures:Z,floatVertexTextures:ge,maxSamples:X}}function UVe(t){const e=this;let n=null,r=0,i=!1,o=!1;const u=new Sm,d=new fr,m={value:null,needsUpdate:!1};this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(E,M){const R=E.length!==0||M||r!==0||i;return i=M,r=E.length,R},this.beginShadows=function(){o=!0,x(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(E,M){n=x(E,M,0)},this.setState=function(E,M,R){const j=E.clippingPlanes,F=E.clipIntersection,B=E.clipShadows,z=t.get(E);if(!i||j===null||j.length===0||o&&!B)o?x(null):v();else{const P=o?0:r,W=P*4;let Z=z.clippingState||null;m.value=Z,Z=x(j,M,W,R);for(let ge=0;ge!==W;++ge)Z[ge]=n[ge];z.clippingState=Z,this.numIntersection=F?this.numPlanes:0,this.numPlanes+=P}};function v(){m.value!==n&&(m.value=n,m.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function x(E,M,R,j){const F=E!==null?E.length:0;let B=null;if(F!==0){if(B=m.value,j!==!0||B===null){const z=R+F*4,P=M.matrixWorldInverse;d.getNormalMatrix(P),(B===null||B.length<z)&&(B=new Float32Array(z));for(let W=0,Z=R;W!==F;++W,Z+=4)u.copy(E[W]).applyMatrix4(P,d),u.normal.toArray(B,Z),B[Z+3]=u.constant}m.value=B,m.needsUpdate=!0}return e.numPlanes=F,e.numIntersection=0,B}}function zVe(t){let e=new WeakMap;function n(u,d){return d===TN?u.mapping=Qw:d===xW&&(u.mapping=Jw),u}function r(u){if(u&&u.isTexture){const d=u.mapping;if(d===TN||d===xW)if(e.has(u)){const m=e.get(u).texture;return n(m,u.mapping)}else{const m=u.image;if(m&&m.height>0){const v=new Q5e(m.height);return v.fromEquirectangularTexture(t,u),e.set(u,v),u.addEventListener("dispose",i),n(v.texture,u.mapping)}else return null}}return u}function i(u){const d=u.target;d.removeEventListener("dispose",i);const m=e.get(d);m!==void 0&&(e.delete(d),m.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class AT extends TF{constructor(e=-1,n=1,r=1,i=-1,o=.1,u=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=o,this.far=u,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,o,u){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=u,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,u=r+e,d=i+n,m=i-n;if(this.view!==null&&this.view.enabled){const v=(this.right-this.left)/this.view.fullWidth/this.zoom,x=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=v*this.view.offsetX,u=o+v*this.view.width,d-=x*this.view.offsetY,m=d-x*this.view.height}this.projectionMatrix.makeOrthographic(o,u,d,m,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Pw=4,Uye=[.125,.215,.35,.446,.526,.582],h0=20,EG=new AT,zye=new xn;let CG=null,PG=0,TG=0;const u0=(1+Math.sqrt(5))/2,ew=1/u0,Vye=[new Be(1,1,1),new Be(-1,1,1),new Be(1,1,-1),new Be(-1,1,-1),new Be(0,u0,ew),new Be(0,u0,-ew),new Be(ew,0,u0),new Be(-ew,0,u0),new Be(u0,ew,0),new Be(-u0,ew,0)];class jye{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){CG=this._renderer.getRenderTarget(),PG=this._renderer.getActiveCubeFace(),TG=this._renderer.getActiveMipmapLevel(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),n>0&&this._blur(o,0,0,n),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Wye(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Gye(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(CG,PG,TG),e.scissorTest=!1,pL(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===Qw||e.mapping===Jw?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),CG=this._renderer.getRenderTarget(),PG=this._renderer.getActiveCubeFace(),TG=this._renderer.getActiveMipmapLevel();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:no,minFilter:no,generateMipmaps:!1,type:MT,format:pu,colorSpace:fp,depthBuffer:!1},i=Hye(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Hye(e,n,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=VVe(o)),this._blurMaterial=jVe(o,e,n)}return i}_compileMaterial(e){const n=new is(this._lodPlanes[0],e);this._renderer.compile(n,EG)}_sceneToCubeUV(e,n,r,i){const d=new Vs(90,1,n,r),m=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],x=this._renderer,E=x.autoClear,M=x.toneMapping;x.getClearColor(zye),x.toneMapping=Vm,x.autoClear=!1;const R=new t1({name:"PMREM.Background",side:Is,depthWrite:!1,depthTest:!1}),j=new is(new oM,R);let F=!1;const B=e.background;B?B.isColor&&(R.color.copy(B),e.background=null,F=!0):(R.color.copy(zye),F=!0);for(let z=0;z<6;z++){const P=z%3;P===0?(d.up.set(0,m[z],0),d.lookAt(v[z],0,0)):P===1?(d.up.set(0,0,m[z]),d.lookAt(0,v[z],0)):(d.up.set(0,m[z],0),d.lookAt(0,0,v[z]));const W=this._cubeSize;pL(i,P*W,z>2?W:0,W,W),x.setRenderTarget(i),F&&x.render(j,d),x.render(e,d)}j.geometry.dispose(),j.material.dispose(),x.toneMapping=M,x.autoClear=E,e.background=B}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===Qw||e.mapping===Jw;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=Wye()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Gye());const o=i?this._cubemapMaterial:this._equirectMaterial,u=new is(this._lodPlanes[0],o),d=o.uniforms;d.envMap.value=e;const m=this._cubeSize;pL(n,0,0,3*m,2*m),r.setRenderTarget(n),r.render(u,EG)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),u=Vye[(i-1)%Vye.length];this._blur(e,i-1,i,o,u)}n.autoClear=r}_blur(e,n,r,i,o){const u=this._pingPongRenderTarget;this._halfBlur(e,u,n,r,i,"latitudinal",o),this._halfBlur(u,e,r,r,i,"longitudinal",o)}_halfBlur(e,n,r,i,o,u,d){const m=this._renderer,v=this._blurMaterial;u!=="latitudinal"&&u!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const x=3,E=new is(this._lodPlanes[i],v),M=v.uniforms,R=this._sizeLods[r]-1,j=isFinite(o)?Math.PI/(2*R):2*Math.PI/(2*h0-1),F=o/j,B=isFinite(o)?1+Math.floor(x*F):h0;B>h0&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${B} samples when the maximum is set to ${h0}`);const z=[];let P=0;for(let pe=0;pe<h0;++pe){const ye=pe/F,te=Math.exp(-ye*ye/2);z.push(te),pe===0?P+=te:pe<B&&(P+=2*te)}for(let pe=0;pe<z.length;pe++)z[pe]=z[pe]/P;M.envMap.value=e.texture,M.samples.value=B,M.weights.value=z,M.latitudinal.value=u==="latitudinal",d&&(M.poleAxis.value=d);const{_lodMax:W}=this;M.dTheta.value=j,M.mipInt.value=W-r;const Z=this._sizeLods[i],ge=3*Z*(i>W-Pw?i-W+Pw:0),X=4*(this._cubeSize-Z);pL(n,ge,X,3*Z,2*Z),m.setRenderTarget(n),m.render(E,EG)}}function VVe(t){const e=[],n=[],r=[];let i=t;const o=t-Pw+1+Uye.length;for(let u=0;u<o;u++){const d=Math.pow(2,i);n.push(d);let m=1/d;u>t-Pw?m=Uye[u-t+Pw-1]:u===0&&(m=0),r.push(m);const v=1/(d-2),x=-v,E=1+v,M=[x,x,E,x,E,E,x,x,E,E,x,E],R=6,j=6,F=3,B=2,z=1,P=new Float32Array(F*j*R),W=new Float32Array(B*j*R),Z=new Float32Array(z*j*R);for(let X=0;X<R;X++){const pe=X%3*2/3-1,ye=X>2?0:-1,te=[pe,ye,0,pe+2/3,ye,0,pe+2/3,ye+1,0,pe,ye,0,pe+2/3,ye+1,0,pe,ye+1,0];P.set(te,F*j*X),W.set(M,B*j*X);const ie=[X,X,X,X,X,X];Z.set(ie,z*j*X)}const ge=new Mo;ge.setAttribute("position",new Xa(P,F)),ge.setAttribute("uv",new Xa(W,B)),ge.setAttribute("faceIndex",new Xa(Z,z)),e.push(ge),i>Pw&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function Hye(t,e,n){const r=new Sl(t,e,n);return r.texture.mapping=EF,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function pL(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function jVe(t,e,n){const r=new Float32Array(h0),i=new Be(0,1,0);return new Ta({name:"SphericalGaussianBlur",defines:{n:h0,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:C7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:_u,depthTest:!1,depthWrite:!1})}function Gye(){return new Ta({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:C7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:_u,depthTest:!1,depthWrite:!1})}function Wye(){return new Ta({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:C7(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:_u,depthTest:!1,depthWrite:!1})}function C7(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function HVe(t){let e=new WeakMap,n=null;function r(d){if(d&&d.isTexture){const m=d.mapping,v=m===TN||m===xW,x=m===Qw||m===Jw;if(v||x)if(d.isRenderTargetTexture&&d.needsPMREMUpdate===!0){d.needsPMREMUpdate=!1;let E=e.get(d);return n===null&&(n=new jye(t)),E=v?n.fromEquirectangular(d,E):n.fromCubemap(d,E),e.set(d,E),E.texture}else{if(e.has(d))return e.get(d).texture;{const E=d.image;if(v&&E&&E.height>0||x&&E&&i(E)){n===null&&(n=new jye(t));const M=v?n.fromEquirectangular(d):n.fromCubemap(d);return e.set(d,M),d.addEventListener("dispose",o),M.texture}else return null}}}return d}function i(d){let m=0;const v=6;for(let x=0;x<v;x++)d[x]!==void 0&&m++;return m===v}function o(d){const m=d.target;m.removeEventListener("dispose",o);const v=e.get(m);v!==void 0&&(e.delete(m),v.dispose())}function u(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:u}}function GVe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function WVe(t,e,n,r){const i={},o=new WeakMap;function u(E){const M=E.target;M.index!==null&&e.remove(M.index);for(const j in M.attributes)e.remove(M.attributes[j]);for(const j in M.morphAttributes){const F=M.morphAttributes[j];for(let B=0,z=F.length;B<z;B++)e.remove(F[B])}M.removeEventListener("dispose",u),delete i[M.id];const R=o.get(M);R&&(e.remove(R),o.delete(M)),r.releaseStatesOfGeometry(M),M.isInstancedBufferGeometry===!0&&delete M._maxInstanceCount,n.memory.geometries--}function d(E,M){return i[M.id]===!0||(M.addEventListener("dispose",u),i[M.id]=!0,n.memory.geometries++),M}function m(E){const M=E.attributes;for(const j in M)e.update(M[j],t.ARRAY_BUFFER);const R=E.morphAttributes;for(const j in R){const F=R[j];for(let B=0,z=F.length;B<z;B++)e.update(F[B],t.ARRAY_BUFFER)}}function v(E){const M=[],R=E.index,j=E.attributes.position;let F=0;if(R!==null){const P=R.array;F=R.version;for(let W=0,Z=P.length;W<Z;W+=3){const ge=P[W+0],X=P[W+1],pe=P[W+2];M.push(ge,X,X,pe,pe,ge)}}else if(j!==void 0){const P=j.array;F=j.version;for(let W=0,Z=P.length/3-1;W<Z;W+=3){const ge=W+0,X=W+1,pe=W+2;M.push(ge,X,X,pe,pe,ge)}}else return;const B=new(LSe(M)?zSe:S7)(M,1);B.version=F;const z=o.get(E);z&&e.remove(z),o.set(E,B)}function x(E){const M=o.get(E);if(M){const R=E.index;R!==null&&M.version<R.version&&v(E)}else v(E);return o.get(E)}return{get:d,update:m,getWireframeAttribute:x}}function $Ve(t,e,n,r){const i=r.isWebGL2;let o;function u(R){o=R}let d,m;function v(R){d=R.type,m=R.bytesPerElement}function x(R,j){t.drawElements(o,j,d,R*m),n.update(j,o,1)}function E(R,j,F){if(F===0)return;let B,z;if(i)B=t,z="drawElementsInstanced";else if(B=e.get("ANGLE_instanced_arrays"),z="drawElementsInstancedANGLE",B===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}B[z](o,j,d,R*m,F),n.update(j,o,F)}function M(R,j,F){if(F===0)return;const B=e.get("WEBGL_multi_draw");if(B===null)for(let z=0;z<F;z++)this.render(R[z]/m,j[z]);else{B.multiDrawElementsWEBGL(o,j,0,d,R,0,F);let z=0;for(let P=0;P<F;P++)z+=j[P];n.update(z,o,1)}}this.setMode=u,this.setIndex=v,this.render=x,this.renderInstances=E,this.renderMultiDraw=M}function KVe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,u,d){switch(n.calls++,u){case t.TRIANGLES:n.triangles+=d*(o/3);break;case t.LINES:n.lines+=d*(o/2);break;case t.LINE_STRIP:n.lines+=d*(o-1);break;case t.LINE_LOOP:n.lines+=d*o;break;case t.POINTS:n.points+=d*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",u);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function XVe(t,e){return t[0]-e[0]}function qVe(t,e){return Math.abs(e[1])-Math.abs(t[1])}function YVe(t,e,n){const r={},i=new Float32Array(8),o=new WeakMap,u=new Ar,d=[];for(let v=0;v<8;v++)d[v]=[v,0];function m(v,x,E){const M=v.morphTargetInfluences;if(e.isWebGL2===!0){const j=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,F=j!==void 0?j.length:0;let B=o.get(x);if(B===void 0||B.count!==F){let ot=function(){Tt.dispose(),o.delete(x),x.removeEventListener("dispose",ot)};var R=ot;B!==void 0&&B.texture.dispose();const W=x.morphAttributes.position!==void 0,Z=x.morphAttributes.normal!==void 0,ge=x.morphAttributes.color!==void 0,X=x.morphAttributes.position||[],pe=x.morphAttributes.normal||[],ye=x.morphAttributes.color||[];let te=0;W===!0&&(te=1),Z===!0&&(te=2),ge===!0&&(te=3);let ie=x.attributes.position.count*te,Pe=1;ie>e.maxTextureSize&&(Pe=Math.ceil(ie/e.maxTextureSize),ie=e.maxTextureSize);const _t=new Float32Array(ie*Pe*4*F),Tt=new BSe(_t,ie,Pe,F);Tt.type=Sd,Tt.needsUpdate=!0;const de=te*4;for(let Me=0;Me<F;Me++){const wt=X[Me],Ge=pe[Me],it=ye[Me],Qe=ie*Pe*4*Me;for(let ut=0;ut<wt.count;ut++){const je=ut*de;W===!0&&(u.fromBufferAttribute(wt,ut),_t[Qe+je+0]=u.x,_t[Qe+je+1]=u.y,_t[Qe+je+2]=u.z,_t[Qe+je+3]=0),Z===!0&&(u.fromBufferAttribute(Ge,ut),_t[Qe+je+4]=u.x,_t[Qe+je+5]=u.y,_t[Qe+je+6]=u.z,_t[Qe+je+7]=0),ge===!0&&(u.fromBufferAttribute(it,ut),_t[Qe+je+8]=u.x,_t[Qe+je+9]=u.y,_t[Qe+je+10]=u.z,_t[Qe+je+11]=it.itemSize===4?u.w:1)}}B={count:F,texture:Tt,size:new cn(ie,Pe)},o.set(x,B),x.addEventListener("dispose",ot)}let z=0;for(let W=0;W<M.length;W++)z+=M[W];const P=x.morphTargetsRelative?1:1-z;E.getUniforms().setValue(t,"morphTargetBaseInfluence",P),E.getUniforms().setValue(t,"morphTargetInfluences",M),E.getUniforms().setValue(t,"morphTargetsTexture",B.texture,n),E.getUniforms().setValue(t,"morphTargetsTextureSize",B.size)}else{const j=M===void 0?0:M.length;let F=r[x.id];if(F===void 0||F.length!==j){F=[];for(let Z=0;Z<j;Z++)F[Z]=[Z,0];r[x.id]=F}for(let Z=0;Z<j;Z++){const ge=F[Z];ge[0]=Z,ge[1]=M[Z]}F.sort(qVe);for(let Z=0;Z<8;Z++)Z<j&&F[Z][1]?(d[Z][0]=F[Z][0],d[Z][1]=F[Z][1]):(d[Z][0]=Number.MAX_SAFE_INTEGER,d[Z][1]=0);d.sort(XVe);const B=x.morphAttributes.position,z=x.morphAttributes.normal;let P=0;for(let Z=0;Z<8;Z++){const ge=d[Z],X=ge[0],pe=ge[1];X!==Number.MAX_SAFE_INTEGER&&pe?(B&&x.getAttribute("morphTarget"+Z)!==B[X]&&x.setAttribute("morphTarget"+Z,B[X]),z&&x.getAttribute("morphNormal"+Z)!==z[X]&&x.setAttribute("morphNormal"+Z,z[X]),i[Z]=pe,P+=pe):(B&&x.hasAttribute("morphTarget"+Z)===!0&&x.deleteAttribute("morphTarget"+Z),z&&x.hasAttribute("morphNormal"+Z)===!0&&x.deleteAttribute("morphNormal"+Z),i[Z]=0)}const W=x.morphTargetsRelative?1:1-P;E.getUniforms().setValue(t,"morphTargetBaseInfluence",W),E.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:m}}function ZVe(t,e,n,r){let i=new WeakMap;function o(m){const v=r.render.frame,x=m.geometry,E=e.get(m,x);if(i.get(E)!==v&&(e.update(E),i.set(E,v)),m.isInstancedMesh&&(m.hasEventListener("dispose",d)===!1&&m.addEventListener("dispose",d),i.get(m)!==v&&(n.update(m.instanceMatrix,t.ARRAY_BUFFER),m.instanceColor!==null&&n.update(m.instanceColor,t.ARRAY_BUFFER),i.set(m,v))),m.isSkinnedMesh){const M=m.skeleton;i.get(M)!==v&&(M.update(),i.set(M,v))}return E}function u(){i=new WeakMap}function d(m){const v=m.target;v.removeEventListener("dispose",d),n.remove(v.instanceMatrix),v.instanceColor!==null&&n.remove(v.instanceColor)}return{update:o,dispose:u}}class P7 extends qi{constructor(e,n,r,i,o,u,d,m,v,x){if(x=x!==void 0?x:x0,x!==x0&&x!==R0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&x===x0&&(r=Qh),r===void 0&&x===R0&&(r=jm),super(null,i,o,u,d,m,x,r,v),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=d!==void 0?d:Po,this.minFilter=m!==void 0?m:Po,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const HSe=new qi,GSe=new P7(1,1);GSe.compareFunction=OSe;const WSe=new BSe,$Se=new L5e,KSe=new MF,$ye=[],Kye=[],Xye=new Float32Array(16),qye=new Float32Array(9),Yye=new Float32Array(4);function m1(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let o=$ye[i];if(o===void 0&&(o=new Float32Array(i),$ye[i]=o),e!==0){r.toArray(o,0);for(let u=1,d=0;u!==e;++u)d+=n,t[u].toArray(o,d)}return o}function Gs(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function Ws(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function kF(t,e){let n=Kye[e];n===void 0&&(n=new Int32Array(e),Kye[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function QVe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function JVe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gs(n,e))return;t.uniform2fv(this.addr,e),Ws(n,e)}}function eje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Gs(n,e))return;t.uniform3fv(this.addr,e),Ws(n,e)}}function tje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gs(n,e))return;t.uniform4fv(this.addr,e),Ws(n,e)}}function nje(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Gs(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Ws(n,e)}else{if(Gs(n,r))return;Yye.set(r),t.uniformMatrix2fv(this.addr,!1,Yye),Ws(n,r)}}function rje(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Gs(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Ws(n,e)}else{if(Gs(n,r))return;qye.set(r),t.uniformMatrix3fv(this.addr,!1,qye),Ws(n,r)}}function ije(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(Gs(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Ws(n,e)}else{if(Gs(n,r))return;Xye.set(r),t.uniformMatrix4fv(this.addr,!1,Xye),Ws(n,r)}}function sje(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function oje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gs(n,e))return;t.uniform2iv(this.addr,e),Ws(n,e)}}function aje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Gs(n,e))return;t.uniform3iv(this.addr,e),Ws(n,e)}}function lje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gs(n,e))return;t.uniform4iv(this.addr,e),Ws(n,e)}}function uje(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function cje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Gs(n,e))return;t.uniform2uiv(this.addr,e),Ws(n,e)}}function dje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(Gs(n,e))return;t.uniform3uiv(this.addr,e),Ws(n,e)}}function hje(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Gs(n,e))return;t.uniform4uiv(this.addr,e),Ws(n,e)}}function pje(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i);const o=this.type===t.SAMPLER_2D_SHADOW?GSe:HSe;n.setTexture2D(e||o,i)}function fje(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||$Se,i)}function mje(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||KSe,i)}function gje(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||WSe,i)}function vje(t){switch(t){case 5126:return QVe;case 35664:return JVe;case 35665:return eje;case 35666:return tje;case 35674:return nje;case 35675:return rje;case 35676:return ije;case 5124:case 35670:return sje;case 35667:case 35671:return oje;case 35668:case 35672:return aje;case 35669:case 35673:return lje;case 5125:return uje;case 36294:return cje;case 36295:return dje;case 36296:return hje;case 35678:case 36198:case 36298:case 36306:case 35682:return pje;case 35679:case 36299:case 36307:return fje;case 35680:case 36300:case 36308:case 36293:return mje;case 36289:case 36303:case 36311:case 36292:return gje}}function yje(t,e){t.uniform1fv(this.addr,e)}function bje(t,e){const n=m1(e,this.size,2);t.uniform2fv(this.addr,n)}function _je(t,e){const n=m1(e,this.size,3);t.uniform3fv(this.addr,n)}function wje(t,e){const n=m1(e,this.size,4);t.uniform4fv(this.addr,n)}function xje(t,e){const n=m1(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Sje(t,e){const n=m1(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Eje(t,e){const n=m1(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Cje(t,e){t.uniform1iv(this.addr,e)}function Pje(t,e){t.uniform2iv(this.addr,e)}function Tje(t,e){t.uniform3iv(this.addr,e)}function Mje(t,e){t.uniform4iv(this.addr,e)}function kje(t,e){t.uniform1uiv(this.addr,e)}function Aje(t,e){t.uniform2uiv(this.addr,e)}function Ije(t,e){t.uniform3uiv(this.addr,e)}function Rje(t,e){t.uniform4uiv(this.addr,e)}function Dje(t,e,n){const r=this.cache,i=e.length,o=kF(n,i);Gs(r,o)||(t.uniform1iv(this.addr,o),Ws(r,o));for(let u=0;u!==i;++u)n.setTexture2D(e[u]||HSe,o[u])}function Oje(t,e,n){const r=this.cache,i=e.length,o=kF(n,i);Gs(r,o)||(t.uniform1iv(this.addr,o),Ws(r,o));for(let u=0;u!==i;++u)n.setTexture3D(e[u]||$Se,o[u])}function Lje(t,e,n){const r=this.cache,i=e.length,o=kF(n,i);Gs(r,o)||(t.uniform1iv(this.addr,o),Ws(r,o));for(let u=0;u!==i;++u)n.setTextureCube(e[u]||KSe,o[u])}function Nje(t,e,n){const r=this.cache,i=e.length,o=kF(n,i);Gs(r,o)||(t.uniform1iv(this.addr,o),Ws(r,o));for(let u=0;u!==i;++u)n.setTexture2DArray(e[u]||WSe,o[u])}function Fje(t){switch(t){case 5126:return yje;case 35664:return bje;case 35665:return _je;case 35666:return wje;case 35674:return xje;case 35675:return Sje;case 35676:return Eje;case 5124:case 35670:return Cje;case 35667:case 35671:return Pje;case 35668:case 35672:return Tje;case 35669:case 35673:return Mje;case 5125:return kje;case 36294:return Aje;case 36295:return Ije;case 36296:return Rje;case 35678:case 36198:case 36298:case 36306:case 35682:return Dje;case 35679:case 36299:case 36307:return Oje;case 35680:case 36300:case 36308:case 36293:return Lje;case 36289:case 36303:case 36311:case 36292:return Nje}}class Bje{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.setValue=vje(n.type)}}class Uje{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=Fje(n.type)}}class zje{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let o=0,u=i.length;o!==u;++o){const d=i[o];d.setValue(e,n[d.id],r)}}}const MG=/(\w+)(\])?(\[|\.)?/g;function Zye(t,e){t.seq.push(e),t.map[e.id]=e}function Vje(t,e,n){const r=t.name,i=r.length;for(MG.lastIndex=0;;){const o=MG.exec(r),u=MG.lastIndex;let d=o[1];const m=o[2]==="]",v=o[3];if(m&&(d=d|0),v===void 0||v==="["&&u+2===i){Zye(n,v===void 0?new Bje(d,t,e):new Uje(d,t,e));break}else{let E=n.map[d];E===void 0&&(E=new zje(d),Zye(n,E)),n=E}}}class WL{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(n,i),u=e.getUniformLocation(n,o.name);Vje(o,u,this)}}setValue(e,n,r,i){const o=this.map[n];o!==void 0&&o.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let o=0,u=n.length;o!==u;++o){const d=n[o],m=r[d.id];m.needsUpdate!==!1&&d.setValue(e,m.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,o=e.length;i!==o;++i){const u=e[i];u.id in n&&r.push(u)}return r}}function Qye(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}const jje=37297;let Hje=0;function Gje(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,n.length);for(let u=i;u<o;u++){const d=u+1;r.push(`${d===e?">":" "} ${d}: ${n[u]}`)}return r.join(`
`)}function Wje(t){const e=li.getPrimaries(li.workingColorSpace),n=li.getPrimaries(t);let r;switch(e===n?r="":e===DN&&n===RN?r="LinearDisplayP3ToLinearSRGB":e===RN&&n===DN&&(r="LinearSRGBToLinearDisplayP3"),t){case fp:case PF:return[r,"LinearTransferOETF"];case rs:case _7:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[r,"LinearTransferOETF"]}}function Jye(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const u=parseInt(o[1]);return n.toUpperCase()+`

`+i+`

`+Gje(t.getShaderSource(e),u)}else return i}function $je(t,e){const n=Wje(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Kje(t,e){let n;switch(e){case jUe:n="Linear";break;case HUe:n="Reinhard";break;case GUe:n="OptimizedCineon";break;case WUe:n="ACESFilmic";break;case KUe:n="AgX";break;case $Ue:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Xje(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.alphaToCoverage||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Tw).join(`
`)}function qje(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Tw).join(`
`)}function Yje(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function Zje(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=t.getActiveAttrib(e,i),u=o.name;let d=1;o.type===t.FLOAT_MAT2&&(d=2),o.type===t.FLOAT_MAT3&&(d=3),o.type===t.FLOAT_MAT4&&(d=4),n[u]={type:o.type,location:t.getAttribLocation(e,u),locationSize:d}}return n}function Tw(t){return t!==""}function ebe(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function tbe(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Qje=/^[ \t]*#include +<([\w\d./]+)>/gm;function TW(t){return t.replace(Qje,e6e)}const Jje=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function e6e(t,e){let n=pr[e];if(n===void 0){const r=Jje.get(e);if(r!==void 0)n=pr[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return TW(n)}const t6e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function nbe(t){return t.replace(t6e,n6e)}function n6e(t,e,n,r){let i="";for(let o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function rbe(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	`;return t.isWebGL2&&(e+=`precision ${t.precision} sampler3D;
		precision ${t.precision} sampler2DArray;
		precision ${t.precision} sampler2DShadow;
		precision ${t.precision} samplerCubeShadow;
		precision ${t.precision} sampler2DArrayShadow;
		precision ${t.precision} isampler2D;
		precision ${t.precision} isampler3D;
		precision ${t.precision} isamplerCube;
		precision ${t.precision} isampler2DArray;
		precision ${t.precision} usampler2D;
		precision ${t.precision} usampler3D;
		precision ${t.precision} usamplerCube;
		precision ${t.precision} usampler2DArray;
		`),t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function r6e(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===wSe?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===RUe?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Kh&&(e="SHADOWMAP_TYPE_VSM"),e}function i6e(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Qw:case Jw:e="ENVMAP_TYPE_CUBE";break;case EF:e="ENVMAP_TYPE_CUBE_UV";break}return e}function s6e(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Jw:e="ENVMAP_MODE_REFRACTION";break}return e}function o6e(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case SF:e="ENVMAP_BLENDING_MULTIPLY";break;case zUe:e="ENVMAP_BLENDING_MIX";break;case VUe:e="ENVMAP_BLENDING_ADD";break}return e}function a6e(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function l6e(t,e,n,r){const i=t.getContext(),o=n.defines;let u=n.vertexShader,d=n.fragmentShader;const m=r6e(n),v=i6e(n),x=s6e(n),E=o6e(n),M=a6e(n),R=n.isWebGL2?"":Xje(n),j=qje(n),F=Yje(o),B=i.createProgram();let z,P,W=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(z=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,F].filter(Tw).join(`
`),z.length>0&&(z+=`
`),P=[R,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,F].filter(Tw).join(`
`),P.length>0&&(P+=`
`)):(z=[rbe(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,F,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+x:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+m:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Tw).join(`
`),P=[R,rbe(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,F,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.envMap?"#define "+x:"",n.envMap?"#define "+E:"",M?"#define CUBEUV_TEXEL_WIDTH "+M.texelWidth:"",M?"#define CUBEUV_TEXEL_HEIGHT "+M.texelHeight:"",M?"#define CUBEUV_MAX_MIP "+M.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+m:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Vm?"#define TONE_MAPPING":"",n.toneMapping!==Vm?pr.tonemapping_pars_fragment:"",n.toneMapping!==Vm?Kje("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",pr.colorspace_pars_fragment,$je("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Tw).join(`
`)),u=TW(u),u=ebe(u,n),u=tbe(u,n),d=TW(d),d=ebe(d,n),d=tbe(d,n),u=nbe(u),d=nbe(d),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(W=`#version 300 es
`,z=[j,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+z,P=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===EW?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===EW?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+P);const Z=W+z+u,ge=W+P+d,X=Qye(i,i.VERTEX_SHADER,Z),pe=Qye(i,i.FRAGMENT_SHADER,ge);i.attachShader(B,X),i.attachShader(B,pe),n.index0AttributeName!==void 0?i.bindAttribLocation(B,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(B,0,"position"),i.linkProgram(B);function ye(_t){if(t.debug.checkShaderErrors){const Tt=i.getProgramInfoLog(B).trim(),de=i.getShaderInfoLog(X).trim(),ot=i.getShaderInfoLog(pe).trim();let Me=!0,wt=!0;if(i.getProgramParameter(B,i.LINK_STATUS)===!1)if(Me=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,B,X,pe);else{const Ge=Jye(i,X,"vertex"),it=Jye(i,pe,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(B,i.VALIDATE_STATUS)+`

Material Name: `+_t.name+`
Material Type: `+_t.type+`

Program Info Log: `+Tt+`
`+Ge+`
`+it)}else Tt!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Tt):(de===""||ot==="")&&(wt=!1);wt&&(_t.diagnostics={runnable:Me,programLog:Tt,vertexShader:{log:de,prefix:z},fragmentShader:{log:ot,prefix:P}})}i.deleteShader(X),i.deleteShader(pe),te=new WL(i,B),ie=Zje(i,B)}let te;this.getUniforms=function(){return te===void 0&&ye(this),te};let ie;this.getAttributes=function(){return ie===void 0&&ye(this),ie};let Pe=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Pe===!1&&(Pe=i.getProgramParameter(B,jje)),Pe},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(B),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=Hje++,this.cacheKey=e,this.usedTimes=1,this.program=B,this.vertexShader=X,this.fragmentShader=pe,this}let u6e=0;class c6e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),o=this._getShaderStage(r),u=this._getShaderCacheForMaterial(e);return u.has(i)===!1&&(u.add(i),i.usedTimes++),u.has(o)===!1&&(u.add(o),o.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new d6e(e),n.set(e,r)),r}}class d6e{constructor(e){this.id=u6e++,this.code=e,this.usedTimes=0}}function h6e(t,e,n,r,i,o,u){const d=new x7,m=new c6e,v=new Set,x=[],E=i.isWebGL2,M=i.logarithmicDepthBuffer,R=i.vertexTextures;let j=i.precision;const F={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function B(ie){return v.add(ie),ie===0?"uv":`uv${ie}`}function z(ie,Pe,_t,Tt,de){const ot=Tt.fog,Me=de.geometry,wt=ie.isMeshStandardMaterial?Tt.environment:null,Ge=(ie.isMeshStandardMaterial?n:e).get(ie.envMap||wt),it=Ge&&Ge.mapping===EF?Ge.image.height:null,Qe=F[ie.type];ie.precision!==null&&(j=i.getMaxPrecision(ie.precision),j!==ie.precision&&console.warn("THREE.WebGLProgram.getParameters:",ie.precision,"not supported, using",j,"instead."));const ut=Me.morphAttributes.position||Me.morphAttributes.normal||Me.morphAttributes.color,je=ut!==void 0?ut.length:0;let bt=0;Me.morphAttributes.position!==void 0&&(bt=1),Me.morphAttributes.normal!==void 0&&(bt=2),Me.morphAttributes.color!==void 0&&(bt=3);let Fe,at,Ot,Gt;if(Qe){const or=wd[Qe];Fe=or.vertexShader,at=or.fragmentShader}else Fe=ie.vertexShader,at=ie.fragmentShader,m.update(ie),Ot=m.getVertexShaderID(ie),Gt=m.getFragmentShaderID(ie);const tn=t.getRenderTarget(),Kt=de.isInstancedMesh===!0,Tn=de.isBatchedMesh===!0,nn=!!ie.map,He=!!ie.matcap,jn=!!Ge,an=!!ie.aoMap,dn=!!ie.lightMap,on=!!ie.bumpMap,zr=!!ie.normalMap,kn=!!ie.displacementMap,Se=!!ie.emissiveMap,he=!!ie.metalnessMap,dt=!!ie.roughnessMap,Nt=ie.anisotropy>0,Ft=ie.clearcoat>0,At=ie.iridescence>0,gn=ie.sheen>0,Jt=ie.transmission>0,ln=Nt&&!!ie.anisotropyMap,Dn=Ft&&!!ie.clearcoatMap,Xn=Ft&&!!ie.clearcoatNormalMap,Bt=Ft&&!!ie.clearcoatRoughnessMap,gr=At&&!!ie.iridescenceMap,sr=At&&!!ie.iridescenceThicknessMap,Cn=gn&&!!ie.sheenColorMap,Mn=gn&&!!ie.sheenRoughnessMap,rn=!!ie.specularMap,Un=!!ie.specularColorMap,Ae=!!ie.specularIntensityMap,Wt=Jt&&!!ie.transmissionMap,Yt=Jt&&!!ie.thicknessMap,pn=!!ie.gradientMap,Te=!!ie.alphaMap,Ht=ie.alphaTest>0,Dt=!!ie.alphaHash,fn=!!ie.extensions;let On=Vm;ie.toneMapped&&(tn===null||tn.isXRRenderTarget===!0)&&(On=t.toneMapping);const ur={isWebGL2:E,shaderID:Qe,shaderType:ie.type,shaderName:ie.name,vertexShader:Fe,fragmentShader:at,defines:ie.defines,customVertexShaderID:Ot,customFragmentShaderID:Gt,isRawShaderMaterial:ie.isRawShaderMaterial===!0,glslVersion:ie.glslVersion,precision:j,batching:Tn,instancing:Kt,instancingColor:Kt&&de.instanceColor!==null,supportsVertexTextures:R,outputColorSpace:tn===null?t.outputColorSpace:tn.isXRRenderTarget===!0?tn.texture.colorSpace:fp,alphaToCoverage:!!ie.alphaToCoverage,map:nn,matcap:He,envMap:jn,envMapMode:jn&&Ge.mapping,envMapCubeUVHeight:it,aoMap:an,lightMap:dn,bumpMap:on,normalMap:zr,displacementMap:R&&kn,emissiveMap:Se,normalMapObjectSpace:zr&&ie.normalMapType===l5e,normalMapTangentSpace:zr&&ie.normalMapType===d1,metalnessMap:he,roughnessMap:dt,anisotropy:Nt,anisotropyMap:ln,clearcoat:Ft,clearcoatMap:Dn,clearcoatNormalMap:Xn,clearcoatRoughnessMap:Bt,iridescence:At,iridescenceMap:gr,iridescenceThicknessMap:sr,sheen:gn,sheenColorMap:Cn,sheenRoughnessMap:Mn,specularMap:rn,specularColorMap:Un,specularIntensityMap:Ae,transmission:Jt,transmissionMap:Wt,thicknessMap:Yt,gradientMap:pn,opaque:ie.transparent===!1&&ie.blending===w0&&ie.alphaToCoverage===!1,alphaMap:Te,alphaTest:Ht,alphaHash:Dt,combine:ie.combine,mapUv:nn&&B(ie.map.channel),aoMapUv:an&&B(ie.aoMap.channel),lightMapUv:dn&&B(ie.lightMap.channel),bumpMapUv:on&&B(ie.bumpMap.channel),normalMapUv:zr&&B(ie.normalMap.channel),displacementMapUv:kn&&B(ie.displacementMap.channel),emissiveMapUv:Se&&B(ie.emissiveMap.channel),metalnessMapUv:he&&B(ie.metalnessMap.channel),roughnessMapUv:dt&&B(ie.roughnessMap.channel),anisotropyMapUv:ln&&B(ie.anisotropyMap.channel),clearcoatMapUv:Dn&&B(ie.clearcoatMap.channel),clearcoatNormalMapUv:Xn&&B(ie.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Bt&&B(ie.clearcoatRoughnessMap.channel),iridescenceMapUv:gr&&B(ie.iridescenceMap.channel),iridescenceThicknessMapUv:sr&&B(ie.iridescenceThicknessMap.channel),sheenColorMapUv:Cn&&B(ie.sheenColorMap.channel),sheenRoughnessMapUv:Mn&&B(ie.sheenRoughnessMap.channel),specularMapUv:rn&&B(ie.specularMap.channel),specularColorMapUv:Un&&B(ie.specularColorMap.channel),specularIntensityMapUv:Ae&&B(ie.specularIntensityMap.channel),transmissionMapUv:Wt&&B(ie.transmissionMap.channel),thicknessMapUv:Yt&&B(ie.thicknessMap.channel),alphaMapUv:Te&&B(ie.alphaMap.channel),vertexTangents:!!Me.attributes.tangent&&(zr||Nt),vertexColors:ie.vertexColors,vertexAlphas:ie.vertexColors===!0&&!!Me.attributes.color&&Me.attributes.color.itemSize===4,pointsUvs:de.isPoints===!0&&!!Me.attributes.uv&&(nn||Te),fog:!!ot,useFog:ie.fog===!0,fogExp2:!!ot&&ot.isFogExp2,flatShading:ie.flatShading===!0,sizeAttenuation:ie.sizeAttenuation===!0,logarithmicDepthBuffer:M,skinning:de.isSkinnedMesh===!0,morphTargets:Me.morphAttributes.position!==void 0,morphNormals:Me.morphAttributes.normal!==void 0,morphColors:Me.morphAttributes.color!==void 0,morphTargetsCount:je,morphTextureStride:bt,numDirLights:Pe.directional.length,numPointLights:Pe.point.length,numSpotLights:Pe.spot.length,numSpotLightMaps:Pe.spotLightMap.length,numRectAreaLights:Pe.rectArea.length,numHemiLights:Pe.hemi.length,numDirLightShadows:Pe.directionalShadowMap.length,numPointLightShadows:Pe.pointShadowMap.length,numSpotLightShadows:Pe.spotShadowMap.length,numSpotLightShadowsWithMaps:Pe.numSpotLightShadowsWithMaps,numLightProbes:Pe.numLightProbes,numClippingPlanes:u.numPlanes,numClipIntersection:u.numIntersection,dithering:ie.dithering,shadowMapEnabled:t.shadowMap.enabled&&_t.length>0,shadowMapType:t.shadowMap.type,toneMapping:On,useLegacyLights:t._useLegacyLights,decodeVideoTexture:nn&&ie.map.isVideoTexture===!0&&li.getTransfer(ie.map.colorSpace)===Ti,premultipliedAlpha:ie.premultipliedAlpha,doubleSided:ie.side===xa,flipSided:ie.side===Is,useDepthPacking:ie.depthPacking>=0,depthPacking:ie.depthPacking||0,index0AttributeName:ie.index0AttributeName,extensionDerivatives:fn&&ie.extensions.derivatives===!0,extensionFragDepth:fn&&ie.extensions.fragDepth===!0,extensionDrawBuffers:fn&&ie.extensions.drawBuffers===!0,extensionShaderTextureLOD:fn&&ie.extensions.shaderTextureLOD===!0,extensionClipCullDistance:fn&&ie.extensions.clipCullDistance===!0&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:fn&&ie.extensions.multiDraw===!0&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:E||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:E||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:E||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:ie.customProgramCacheKey()};return ur.vertexUv1s=v.has(1),ur.vertexUv2s=v.has(2),ur.vertexUv3s=v.has(3),v.clear(),ur}function P(ie){const Pe=[];if(ie.shaderID?Pe.push(ie.shaderID):(Pe.push(ie.customVertexShaderID),Pe.push(ie.customFragmentShaderID)),ie.defines!==void 0)for(const _t in ie.defines)Pe.push(_t),Pe.push(ie.defines[_t]);return ie.isRawShaderMaterial===!1&&(W(Pe,ie),Z(Pe,ie),Pe.push(t.outputColorSpace)),Pe.push(ie.customProgramCacheKey),Pe.join()}function W(ie,Pe){ie.push(Pe.precision),ie.push(Pe.outputColorSpace),ie.push(Pe.envMapMode),ie.push(Pe.envMapCubeUVHeight),ie.push(Pe.mapUv),ie.push(Pe.alphaMapUv),ie.push(Pe.lightMapUv),ie.push(Pe.aoMapUv),ie.push(Pe.bumpMapUv),ie.push(Pe.normalMapUv),ie.push(Pe.displacementMapUv),ie.push(Pe.emissiveMapUv),ie.push(Pe.metalnessMapUv),ie.push(Pe.roughnessMapUv),ie.push(Pe.anisotropyMapUv),ie.push(Pe.clearcoatMapUv),ie.push(Pe.clearcoatNormalMapUv),ie.push(Pe.clearcoatRoughnessMapUv),ie.push(Pe.iridescenceMapUv),ie.push(Pe.iridescenceThicknessMapUv),ie.push(Pe.sheenColorMapUv),ie.push(Pe.sheenRoughnessMapUv),ie.push(Pe.specularMapUv),ie.push(Pe.specularColorMapUv),ie.push(Pe.specularIntensityMapUv),ie.push(Pe.transmissionMapUv),ie.push(Pe.thicknessMapUv),ie.push(Pe.combine),ie.push(Pe.fogExp2),ie.push(Pe.sizeAttenuation),ie.push(Pe.morphTargetsCount),ie.push(Pe.morphAttributeCount),ie.push(Pe.numDirLights),ie.push(Pe.numPointLights),ie.push(Pe.numSpotLights),ie.push(Pe.numSpotLightMaps),ie.push(Pe.numHemiLights),ie.push(Pe.numRectAreaLights),ie.push(Pe.numDirLightShadows),ie.push(Pe.numPointLightShadows),ie.push(Pe.numSpotLightShadows),ie.push(Pe.numSpotLightShadowsWithMaps),ie.push(Pe.numLightProbes),ie.push(Pe.shadowMapType),ie.push(Pe.toneMapping),ie.push(Pe.numClippingPlanes),ie.push(Pe.numClipIntersection),ie.push(Pe.depthPacking)}function Z(ie,Pe){d.disableAll(),Pe.isWebGL2&&d.enable(0),Pe.supportsVertexTextures&&d.enable(1),Pe.instancing&&d.enable(2),Pe.instancingColor&&d.enable(3),Pe.matcap&&d.enable(4),Pe.envMap&&d.enable(5),Pe.normalMapObjectSpace&&d.enable(6),Pe.normalMapTangentSpace&&d.enable(7),Pe.clearcoat&&d.enable(8),Pe.iridescence&&d.enable(9),Pe.alphaTest&&d.enable(10),Pe.vertexColors&&d.enable(11),Pe.vertexAlphas&&d.enable(12),Pe.vertexUv1s&&d.enable(13),Pe.vertexUv2s&&d.enable(14),Pe.vertexUv3s&&d.enable(15),Pe.vertexTangents&&d.enable(16),Pe.anisotropy&&d.enable(17),Pe.alphaHash&&d.enable(18),Pe.batching&&d.enable(19),ie.push(d.mask),d.disableAll(),Pe.fog&&d.enable(0),Pe.useFog&&d.enable(1),Pe.flatShading&&d.enable(2),Pe.logarithmicDepthBuffer&&d.enable(3),Pe.skinning&&d.enable(4),Pe.morphTargets&&d.enable(5),Pe.morphNormals&&d.enable(6),Pe.morphColors&&d.enable(7),Pe.premultipliedAlpha&&d.enable(8),Pe.shadowMapEnabled&&d.enable(9),Pe.useLegacyLights&&d.enable(10),Pe.doubleSided&&d.enable(11),Pe.flipSided&&d.enable(12),Pe.useDepthPacking&&d.enable(13),Pe.dithering&&d.enable(14),Pe.transmission&&d.enable(15),Pe.sheen&&d.enable(16),Pe.opaque&&d.enable(17),Pe.pointsUvs&&d.enable(18),Pe.decodeVideoTexture&&d.enable(19),Pe.alphaToCoverage&&d.enable(20),ie.push(d.mask)}function ge(ie){const Pe=F[ie.type];let _t;if(Pe){const Tt=wd[Pe];_t=X5e.clone(Tt.uniforms)}else _t=ie.uniforms;return _t}function X(ie,Pe){let _t;for(let Tt=0,de=x.length;Tt<de;Tt++){const ot=x[Tt];if(ot.cacheKey===Pe){_t=ot,++_t.usedTimes;break}}return _t===void 0&&(_t=new l6e(t,Pe,ie,o),x.push(_t)),_t}function pe(ie){if(--ie.usedTimes===0){const Pe=x.indexOf(ie);x[Pe]=x[x.length-1],x.pop(),ie.destroy()}}function ye(ie){m.remove(ie)}function te(){m.dispose()}return{getParameters:z,getProgramCacheKey:P,getUniforms:ge,acquireProgram:X,releaseProgram:pe,releaseShaderCache:ye,programs:x,dispose:te}}function p6e(){let t=new WeakMap;function e(o){let u=t.get(o);return u===void 0&&(u={},t.set(o,u)),u}function n(o){t.delete(o)}function r(o,u,d){t.get(o)[u]=d}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function f6e(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ibe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function sbe(){const t=[];let e=0;const n=[],r=[],i=[];function o(){e=0,n.length=0,r.length=0,i.length=0}function u(E,M,R,j,F,B){let z=t[e];return z===void 0?(z={id:E.id,object:E,geometry:M,material:R,groupOrder:j,renderOrder:E.renderOrder,z:F,group:B},t[e]=z):(z.id=E.id,z.object=E,z.geometry=M,z.material=R,z.groupOrder=j,z.renderOrder=E.renderOrder,z.z=F,z.group=B),e++,z}function d(E,M,R,j,F,B){const z=u(E,M,R,j,F,B);R.transmission>0?r.push(z):R.transparent===!0?i.push(z):n.push(z)}function m(E,M,R,j,F,B){const z=u(E,M,R,j,F,B);R.transmission>0?r.unshift(z):R.transparent===!0?i.unshift(z):n.unshift(z)}function v(E,M){n.length>1&&n.sort(E||f6e),r.length>1&&r.sort(M||ibe),i.length>1&&i.sort(M||ibe)}function x(){for(let E=e,M=t.length;E<M;E++){const R=t[E];if(R.id===null)break;R.id=null,R.object=null,R.geometry=null,R.material=null,R.group=null}}return{opaque:n,transmissive:r,transparent:i,init:o,push:d,unshift:m,finish:x,sort:v}}function m6e(){let t=new WeakMap;function e(r,i){const o=t.get(r);let u;return o===void 0?(u=new sbe,t.set(r,[u])):i>=o.length?(u=new sbe,o.push(u)):u=o[i],u}function n(){t=new WeakMap}return{get:e,dispose:n}}function g6e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Be,color:new xn};break;case"SpotLight":n={position:new Be,direction:new Be,color:new xn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Be,color:new xn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Be,skyColor:new xn,groundColor:new xn};break;case"RectAreaLight":n={color:new xn,position:new Be,halfWidth:new Be,halfHeight:new Be};break}return t[e.id]=n,n}}}function v6e(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new cn};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new cn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new cn,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let y6e=0;function b6e(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function _6e(t,e){const n=new g6e,r=v6e(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let x=0;x<9;x++)i.probe.push(new Be);const o=new Be,u=new Bn,d=new Bn;function m(x,E){let M=0,R=0,j=0;for(let _t=0;_t<9;_t++)i.probe[_t].set(0,0,0);let F=0,B=0,z=0,P=0,W=0,Z=0,ge=0,X=0,pe=0,ye=0,te=0;x.sort(b6e);const ie=E===!0?Math.PI:1;for(let _t=0,Tt=x.length;_t<Tt;_t++){const de=x[_t],ot=de.color,Me=de.intensity,wt=de.distance,Ge=de.shadow&&de.shadow.map?de.shadow.map.texture:null;if(de.isAmbientLight)M+=ot.r*Me*ie,R+=ot.g*Me*ie,j+=ot.b*Me*ie;else if(de.isLightProbe){for(let it=0;it<9;it++)i.probe[it].addScaledVector(de.sh.coefficients[it],Me);te++}else if(de.isDirectionalLight){const it=n.get(de);if(it.color.copy(de.color).multiplyScalar(de.intensity*ie),de.castShadow){const Qe=de.shadow,ut=r.get(de);ut.shadowBias=Qe.bias,ut.shadowNormalBias=Qe.normalBias,ut.shadowRadius=Qe.radius,ut.shadowMapSize=Qe.mapSize,i.directionalShadow[F]=ut,i.directionalShadowMap[F]=Ge,i.directionalShadowMatrix[F]=de.shadow.matrix,Z++}i.directional[F]=it,F++}else if(de.isSpotLight){const it=n.get(de);it.position.setFromMatrixPosition(de.matrixWorld),it.color.copy(ot).multiplyScalar(Me*ie),it.distance=wt,it.coneCos=Math.cos(de.angle),it.penumbraCos=Math.cos(de.angle*(1-de.penumbra)),it.decay=de.decay,i.spot[z]=it;const Qe=de.shadow;if(de.map&&(i.spotLightMap[pe]=de.map,pe++,Qe.updateMatrices(de),de.castShadow&&ye++),i.spotLightMatrix[z]=Qe.matrix,de.castShadow){const ut=r.get(de);ut.shadowBias=Qe.bias,ut.shadowNormalBias=Qe.normalBias,ut.shadowRadius=Qe.radius,ut.shadowMapSize=Qe.mapSize,i.spotShadow[z]=ut,i.spotShadowMap[z]=Ge,X++}z++}else if(de.isRectAreaLight){const it=n.get(de);it.color.copy(ot).multiplyScalar(Me),it.halfWidth.set(de.width*.5,0,0),it.halfHeight.set(0,de.height*.5,0),i.rectArea[P]=it,P++}else if(de.isPointLight){const it=n.get(de);if(it.color.copy(de.color).multiplyScalar(de.intensity*ie),it.distance=de.distance,it.decay=de.decay,de.castShadow){const Qe=de.shadow,ut=r.get(de);ut.shadowBias=Qe.bias,ut.shadowNormalBias=Qe.normalBias,ut.shadowRadius=Qe.radius,ut.shadowMapSize=Qe.mapSize,ut.shadowCameraNear=Qe.camera.near,ut.shadowCameraFar=Qe.camera.far,i.pointShadow[B]=ut,i.pointShadowMap[B]=Ge,i.pointShadowMatrix[B]=de.shadow.matrix,ge++}i.point[B]=it,B++}else if(de.isHemisphereLight){const it=n.get(de);it.skyColor.copy(de.color).multiplyScalar(Me*ie),it.groundColor.copy(de.groundColor).multiplyScalar(Me*ie),i.hemi[W]=it,W++}}P>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=en.LTC_FLOAT_1,i.rectAreaLTC2=en.LTC_FLOAT_2):(i.rectAreaLTC1=en.LTC_HALF_1,i.rectAreaLTC2=en.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=en.LTC_FLOAT_1,i.rectAreaLTC2=en.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=en.LTC_HALF_1,i.rectAreaLTC2=en.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=M,i.ambient[1]=R,i.ambient[2]=j;const Pe=i.hash;(Pe.directionalLength!==F||Pe.pointLength!==B||Pe.spotLength!==z||Pe.rectAreaLength!==P||Pe.hemiLength!==W||Pe.numDirectionalShadows!==Z||Pe.numPointShadows!==ge||Pe.numSpotShadows!==X||Pe.numSpotMaps!==pe||Pe.numLightProbes!==te)&&(i.directional.length=F,i.spot.length=z,i.rectArea.length=P,i.point.length=B,i.hemi.length=W,i.directionalShadow.length=Z,i.directionalShadowMap.length=Z,i.pointShadow.length=ge,i.pointShadowMap.length=ge,i.spotShadow.length=X,i.spotShadowMap.length=X,i.directionalShadowMatrix.length=Z,i.pointShadowMatrix.length=ge,i.spotLightMatrix.length=X+pe-ye,i.spotLightMap.length=pe,i.numSpotLightShadowsWithMaps=ye,i.numLightProbes=te,Pe.directionalLength=F,Pe.pointLength=B,Pe.spotLength=z,Pe.rectAreaLength=P,Pe.hemiLength=W,Pe.numDirectionalShadows=Z,Pe.numPointShadows=ge,Pe.numSpotShadows=X,Pe.numSpotMaps=pe,Pe.numLightProbes=te,i.version=y6e++)}function v(x,E){let M=0,R=0,j=0,F=0,B=0;const z=E.matrixWorldInverse;for(let P=0,W=x.length;P<W;P++){const Z=x[P];if(Z.isDirectionalLight){const ge=i.directional[M];ge.direction.setFromMatrixPosition(Z.matrixWorld),o.setFromMatrixPosition(Z.target.matrixWorld),ge.direction.sub(o),ge.direction.transformDirection(z),M++}else if(Z.isSpotLight){const ge=i.spot[j];ge.position.setFromMatrixPosition(Z.matrixWorld),ge.position.applyMatrix4(z),ge.direction.setFromMatrixPosition(Z.matrixWorld),o.setFromMatrixPosition(Z.target.matrixWorld),ge.direction.sub(o),ge.direction.transformDirection(z),j++}else if(Z.isRectAreaLight){const ge=i.rectArea[F];ge.position.setFromMatrixPosition(Z.matrixWorld),ge.position.applyMatrix4(z),d.identity(),u.copy(Z.matrixWorld),u.premultiply(z),d.extractRotation(u),ge.halfWidth.set(Z.width*.5,0,0),ge.halfHeight.set(0,Z.height*.5,0),ge.halfWidth.applyMatrix4(d),ge.halfHeight.applyMatrix4(d),F++}else if(Z.isPointLight){const ge=i.point[R];ge.position.setFromMatrixPosition(Z.matrixWorld),ge.position.applyMatrix4(z),R++}else if(Z.isHemisphereLight){const ge=i.hemi[B];ge.direction.setFromMatrixPosition(Z.matrixWorld),ge.direction.transformDirection(z),B++}}}return{setup:m,setupView:v,state:i}}function obe(t,e){const n=new _6e(t,e),r=[],i=[];function o(){r.length=0,i.length=0}function u(E){r.push(E)}function d(E){i.push(E)}function m(E){n.setup(r,E)}function v(E){n.setupView(r,E)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:m,setupLightsView:v,pushLight:u,pushShadow:d}}function w6e(t,e){let n=new WeakMap;function r(o,u=0){const d=n.get(o);let m;return d===void 0?(m=new obe(t,e),n.set(o,[m])):u>=d.length?(m=new obe(t,e),d.push(m)):m=d[u],m}function i(){n=new WeakMap}return{get:r,dispose:i}}class XSe extends Ml{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=sM,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class x6e extends Ml{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const S6e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,E6e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function C6e(t,e,n){let r=new E7;const i=new cn,o=new cn,u=new Ar,d=new XSe({depthPacking:a5e}),m=new x6e,v={},x=n.maxTextureSize,E={[kd]:Is,[Is]:kd,[xa]:xa},M=new Ta({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new cn},radius:{value:4}},vertexShader:S6e,fragmentShader:E6e}),R=M.clone();R.defines.HORIZONTAL_PASS=1;const j=new Mo;j.setAttribute("position",new Xa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const F=new is(j,M),B=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=wSe;let z=this.type;this.render=function(X,pe,ye){if(B.enabled===!1||B.autoUpdate===!1&&B.needsUpdate===!1||X.length===0)return;const te=t.getRenderTarget(),ie=t.getActiveCubeFace(),Pe=t.getActiveMipmapLevel(),_t=t.state;_t.setBlending(_u),_t.buffers.color.setClear(1,1,1,1),_t.buffers.depth.setTest(!0),_t.setScissorTest(!1);const Tt=z!==Kh&&this.type===Kh,de=z===Kh&&this.type!==Kh;for(let ot=0,Me=X.length;ot<Me;ot++){const wt=X[ot],Ge=wt.shadow;if(Ge===void 0){console.warn("THREE.WebGLShadowMap:",wt,"has no shadow.");continue}if(Ge.autoUpdate===!1&&Ge.needsUpdate===!1)continue;i.copy(Ge.mapSize);const it=Ge.getFrameExtents();if(i.multiply(it),o.copy(Ge.mapSize),(i.x>x||i.y>x)&&(i.x>x&&(o.x=Math.floor(x/it.x),i.x=o.x*it.x,Ge.mapSize.x=o.x),i.y>x&&(o.y=Math.floor(x/it.y),i.y=o.y*it.y,Ge.mapSize.y=o.y)),Ge.map===null||Tt===!0||de===!0){const ut=this.type!==Kh?{minFilter:Po,magFilter:Po}:{};Ge.map!==null&&Ge.map.dispose(),Ge.map=new Sl(i.x,i.y,ut),Ge.map.texture.name=wt.name+".shadowMap",Ge.camera.updateProjectionMatrix()}t.setRenderTarget(Ge.map),t.clear();const Qe=Ge.getViewportCount();for(let ut=0;ut<Qe;ut++){const je=Ge.getViewport(ut);u.set(o.x*je.x,o.y*je.y,o.x*je.z,o.y*je.w),_t.viewport(u),Ge.updateMatrices(wt,ut),r=Ge.getFrustum(),Z(pe,ye,Ge.camera,wt,this.type)}Ge.isPointLightShadow!==!0&&this.type===Kh&&P(Ge,ye),Ge.needsUpdate=!1}z=this.type,B.needsUpdate=!1,t.setRenderTarget(te,ie,Pe)};function P(X,pe){const ye=e.update(F);M.defines.VSM_SAMPLES!==X.blurSamples&&(M.defines.VSM_SAMPLES=X.blurSamples,R.defines.VSM_SAMPLES=X.blurSamples,M.needsUpdate=!0,R.needsUpdate=!0),X.mapPass===null&&(X.mapPass=new Sl(i.x,i.y)),M.uniforms.shadow_pass.value=X.map.texture,M.uniforms.resolution.value=X.mapSize,M.uniforms.radius.value=X.radius,t.setRenderTarget(X.mapPass),t.clear(),t.renderBufferDirect(pe,null,ye,M,F,null),R.uniforms.shadow_pass.value=X.mapPass.texture,R.uniforms.resolution.value=X.mapSize,R.uniforms.radius.value=X.radius,t.setRenderTarget(X.map),t.clear(),t.renderBufferDirect(pe,null,ye,R,F,null)}function W(X,pe,ye,te){let ie=null;const Pe=ye.isPointLight===!0?X.customDistanceMaterial:X.customDepthMaterial;if(Pe!==void 0)ie=Pe;else if(ie=ye.isPointLight===!0?m:d,t.localClippingEnabled&&pe.clipShadows===!0&&Array.isArray(pe.clippingPlanes)&&pe.clippingPlanes.length!==0||pe.displacementMap&&pe.displacementScale!==0||pe.alphaMap&&pe.alphaTest>0||pe.map&&pe.alphaTest>0){const _t=ie.uuid,Tt=pe.uuid;let de=v[_t];de===void 0&&(de={},v[_t]=de);let ot=de[Tt];ot===void 0&&(ot=ie.clone(),de[Tt]=ot,pe.addEventListener("dispose",ge)),ie=ot}if(ie.visible=pe.visible,ie.wireframe=pe.wireframe,te===Kh?ie.side=pe.shadowSide!==null?pe.shadowSide:pe.side:ie.side=pe.shadowSide!==null?pe.shadowSide:E[pe.side],ie.alphaMap=pe.alphaMap,ie.alphaTest=pe.alphaTest,ie.map=pe.map,ie.clipShadows=pe.clipShadows,ie.clippingPlanes=pe.clippingPlanes,ie.clipIntersection=pe.clipIntersection,ie.displacementMap=pe.displacementMap,ie.displacementScale=pe.displacementScale,ie.displacementBias=pe.displacementBias,ie.wireframeLinewidth=pe.wireframeLinewidth,ie.linewidth=pe.linewidth,ye.isPointLight===!0&&ie.isMeshDistanceMaterial===!0){const _t=t.properties.get(ie);_t.light=ye}return ie}function Z(X,pe,ye,te,ie){if(X.visible===!1)return;if(X.layers.test(pe.layers)&&(X.isMesh||X.isLine||X.isPoints)&&(X.castShadow||X.receiveShadow&&ie===Kh)&&(!X.frustumCulled||r.intersectsObject(X))){X.modelViewMatrix.multiplyMatrices(ye.matrixWorldInverse,X.matrixWorld);const Tt=e.update(X),de=X.material;if(Array.isArray(de)){const ot=Tt.groups;for(let Me=0,wt=ot.length;Me<wt;Me++){const Ge=ot[Me],it=de[Ge.materialIndex];if(it&&it.visible){const Qe=W(X,it,te,ie);X.onBeforeShadow(t,X,pe,ye,Tt,Qe,Ge),t.renderBufferDirect(ye,null,Tt,Qe,X,Ge),X.onAfterShadow(t,X,pe,ye,Tt,Qe,Ge)}}}else if(de.visible){const ot=W(X,de,te,ie);X.onBeforeShadow(t,X,pe,ye,Tt,ot,null),t.renderBufferDirect(ye,null,Tt,ot,X,null),X.onAfterShadow(t,X,pe,ye,Tt,ot,null)}}const _t=X.children;for(let Tt=0,de=_t.length;Tt<de;Tt++)Z(_t[Tt],pe,ye,te,ie)}function ge(X){X.target.removeEventListener("dispose",ge);for(const ye in v){const te=v[ye],ie=X.target.uuid;ie in te&&(te[ie].dispose(),delete te[ie])}}}function P6e(t,e,n){const r=n.isWebGL2;function i(){let Te=!1;const Ht=new Ar;let Dt=null;const fn=new Ar(0,0,0,0);return{setMask:function(On){Dt!==On&&!Te&&(t.colorMask(On,On,On,On),Dt=On)},setLocked:function(On){Te=On},setClear:function(On,ur,or,hr,Pr){Pr===!0&&(On*=hr,ur*=hr,or*=hr),Ht.set(On,ur,or,hr),fn.equals(Ht)===!1&&(t.clearColor(On,ur,or,hr),fn.copy(Ht))},reset:function(){Te=!1,Dt=null,fn.set(-1,0,0,0)}}}function o(){let Te=!1,Ht=null,Dt=null,fn=null;return{setTest:function(On){On?Kt(t.DEPTH_TEST):Tn(t.DEPTH_TEST)},setMask:function(On){Ht!==On&&!Te&&(t.depthMask(On),Ht=On)},setFunc:function(On){if(Dt!==On){switch(On){case DUe:t.depthFunc(t.NEVER);break;case OUe:t.depthFunc(t.ALWAYS);break;case LUe:t.depthFunc(t.LESS);break;case PN:t.depthFunc(t.LEQUAL);break;case NUe:t.depthFunc(t.EQUAL);break;case FUe:t.depthFunc(t.GEQUAL);break;case BUe:t.depthFunc(t.GREATER);break;case UUe:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Dt=On}},setLocked:function(On){Te=On},setClear:function(On){fn!==On&&(t.clearDepth(On),fn=On)},reset:function(){Te=!1,Ht=null,Dt=null,fn=null}}}function u(){let Te=!1,Ht=null,Dt=null,fn=null,On=null,ur=null,or=null,hr=null,Pr=null;return{setTest:function(Zn){Te||(Zn?Kt(t.STENCIL_TEST):Tn(t.STENCIL_TEST))},setMask:function(Zn){Ht!==Zn&&!Te&&(t.stencilMask(Zn),Ht=Zn)},setFunc:function(Zn,ri,Qi){(Dt!==Zn||fn!==ri||On!==Qi)&&(t.stencilFunc(Zn,ri,Qi),Dt=Zn,fn=ri,On=Qi)},setOp:function(Zn,ri,Qi){(ur!==Zn||or!==ri||hr!==Qi)&&(t.stencilOp(Zn,ri,Qi),ur=Zn,or=ri,hr=Qi)},setLocked:function(Zn){Te=Zn},setClear:function(Zn){Pr!==Zn&&(t.clearStencil(Zn),Pr=Zn)},reset:function(){Te=!1,Ht=null,Dt=null,fn=null,On=null,ur=null,or=null,hr=null,Pr=null}}}const d=new i,m=new o,v=new u,x=new WeakMap,E=new WeakMap;let M={},R={},j=new WeakMap,F=[],B=null,z=!1,P=null,W=null,Z=null,ge=null,X=null,pe=null,ye=null,te=new xn(0,0,0),ie=0,Pe=!1,_t=null,Tt=null,de=null,ot=null,Me=null;const wt=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Ge=!1,it=0;const Qe=t.getParameter(t.VERSION);Qe.indexOf("WebGL")!==-1?(it=parseFloat(/^WebGL (\d)/.exec(Qe)[1]),Ge=it>=1):Qe.indexOf("OpenGL ES")!==-1&&(it=parseFloat(/^OpenGL ES (\d)/.exec(Qe)[1]),Ge=it>=2);let ut=null,je={};const bt=t.getParameter(t.SCISSOR_BOX),Fe=t.getParameter(t.VIEWPORT),at=new Ar().fromArray(bt),Ot=new Ar().fromArray(Fe);function Gt(Te,Ht,Dt,fn){const On=new Uint8Array(4),ur=t.createTexture();t.bindTexture(Te,ur),t.texParameteri(Te,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Te,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let or=0;or<Dt;or++)r&&(Te===t.TEXTURE_3D||Te===t.TEXTURE_2D_ARRAY)?t.texImage3D(Ht,0,t.RGBA,1,1,fn,0,t.RGBA,t.UNSIGNED_BYTE,On):t.texImage2D(Ht+or,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,On);return ur}const tn={};tn[t.TEXTURE_2D]=Gt(t.TEXTURE_2D,t.TEXTURE_2D,1),tn[t.TEXTURE_CUBE_MAP]=Gt(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(tn[t.TEXTURE_2D_ARRAY]=Gt(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),tn[t.TEXTURE_3D]=Gt(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),d.setClear(0,0,0,1),m.setClear(1),v.setClear(0),Kt(t.DEPTH_TEST),m.setFunc(PN),kn(!1),Se(G0e),Kt(t.CULL_FACE),on(_u);function Kt(Te){M[Te]!==!0&&(t.enable(Te),M[Te]=!0)}function Tn(Te){M[Te]!==!1&&(t.disable(Te),M[Te]=!1)}function nn(Te,Ht){return R[Te]!==Ht?(t.bindFramebuffer(Te,Ht),R[Te]=Ht,r&&(Te===t.DRAW_FRAMEBUFFER&&(R[t.FRAMEBUFFER]=Ht),Te===t.FRAMEBUFFER&&(R[t.DRAW_FRAMEBUFFER]=Ht)),!0):!1}function He(Te,Ht){let Dt=F,fn=!1;if(Te)if(Dt=j.get(Ht),Dt===void 0&&(Dt=[],j.set(Ht,Dt)),Te.isWebGLMultipleRenderTargets){const On=Te.texture;if(Dt.length!==On.length||Dt[0]!==t.COLOR_ATTACHMENT0){for(let ur=0,or=On.length;ur<or;ur++)Dt[ur]=t.COLOR_ATTACHMENT0+ur;Dt.length=On.length,fn=!0}}else Dt[0]!==t.COLOR_ATTACHMENT0&&(Dt[0]=t.COLOR_ATTACHMENT0,fn=!0);else Dt[0]!==t.BACK&&(Dt[0]=t.BACK,fn=!0);fn&&(n.isWebGL2?t.drawBuffers(Dt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Dt))}function jn(Te){return B!==Te?(t.useProgram(Te),B=Te,!0):!1}const an={[Tm]:t.FUNC_ADD,[SSe]:t.FUNC_SUBTRACT,[ESe]:t.FUNC_REVERSE_SUBTRACT};if(r)an[_W]=t.MIN,an[wW]=t.MAX;else{const Te=e.get("EXT_blend_minmax");Te!==null&&(an[_W]=Te.MIN_EXT,an[wW]=Te.MAX_EXT)}const dn={[o7]:t.ZERO,[a7]:t.ONE,[l7]:t.SRC_COLOR,[PT]:t.SRC_ALPHA,[CSe]:t.SRC_ALPHA_SATURATE,[h7]:t.DST_COLOR,[c7]:t.DST_ALPHA,[u7]:t.ONE_MINUS_SRC_COLOR,[TT]:t.ONE_MINUS_SRC_ALPHA,[p7]:t.ONE_MINUS_DST_COLOR,[d7]:t.ONE_MINUS_DST_ALPHA,[f7]:t.CONSTANT_COLOR,[m7]:t.ONE_MINUS_CONSTANT_COLOR,[g7]:t.CONSTANT_ALPHA,[v7]:t.ONE_MINUS_CONSTANT_ALPHA};function on(Te,Ht,Dt,fn,On,ur,or,hr,Pr,Zn){if(Te===_u){z===!0&&(Tn(t.BLEND),z=!1);return}if(z===!1&&(Kt(t.BLEND),z=!0),Te!==xSe){if(Te!==P||Zn!==Pe){if((W!==Tm||X!==Tm)&&(t.blendEquation(t.FUNC_ADD),W=Tm,X=Tm),Zn)switch(Te){case w0:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case vW:t.blendFunc(t.ONE,t.ONE);break;case yW:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case bW:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}else switch(Te){case w0:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case vW:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case yW:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case bW:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}Z=null,ge=null,pe=null,ye=null,te.set(0,0,0),ie=0,P=Te,Pe=Zn}return}On=On||Ht,ur=ur||Dt,or=or||fn,(Ht!==W||On!==X)&&(t.blendEquationSeparate(an[Ht],an[On]),W=Ht,X=On),(Dt!==Z||fn!==ge||ur!==pe||or!==ye)&&(t.blendFuncSeparate(dn[Dt],dn[fn],dn[ur],dn[or]),Z=Dt,ge=fn,pe=ur,ye=or),(hr.equals(te)===!1||Pr!==ie)&&(t.blendColor(hr.r,hr.g,hr.b,Pr),te.copy(hr),ie=Pr),P=Te,Pe=!1}function zr(Te,Ht){Te.side===xa?Tn(t.CULL_FACE):Kt(t.CULL_FACE);let Dt=Te.side===Is;Ht&&(Dt=!Dt),kn(Dt),Te.blending===w0&&Te.transparent===!1?on(_u):on(Te.blending,Te.blendEquation,Te.blendSrc,Te.blendDst,Te.blendEquationAlpha,Te.blendSrcAlpha,Te.blendDstAlpha,Te.blendColor,Te.blendAlpha,Te.premultipliedAlpha),m.setFunc(Te.depthFunc),m.setTest(Te.depthTest),m.setMask(Te.depthWrite),d.setMask(Te.colorWrite);const fn=Te.stencilWrite;v.setTest(fn),fn&&(v.setMask(Te.stencilWriteMask),v.setFunc(Te.stencilFunc,Te.stencilRef,Te.stencilFuncMask),v.setOp(Te.stencilFail,Te.stencilZFail,Te.stencilZPass)),dt(Te.polygonOffset,Te.polygonOffsetFactor,Te.polygonOffsetUnits),Te.alphaToCoverage===!0?Kt(t.SAMPLE_ALPHA_TO_COVERAGE):Tn(t.SAMPLE_ALPHA_TO_COVERAGE)}function kn(Te){_t!==Te&&(Te?t.frontFace(t.CW):t.frontFace(t.CCW),_t=Te)}function Se(Te){Te!==AUe?(Kt(t.CULL_FACE),Te!==Tt&&(Te===G0e?t.cullFace(t.BACK):Te===IUe?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Tn(t.CULL_FACE),Tt=Te}function he(Te){Te!==de&&(Ge&&t.lineWidth(Te),de=Te)}function dt(Te,Ht,Dt){Te?(Kt(t.POLYGON_OFFSET_FILL),(ot!==Ht||Me!==Dt)&&(t.polygonOffset(Ht,Dt),ot=Ht,Me=Dt)):Tn(t.POLYGON_OFFSET_FILL)}function Nt(Te){Te?Kt(t.SCISSOR_TEST):Tn(t.SCISSOR_TEST)}function Ft(Te){Te===void 0&&(Te=t.TEXTURE0+wt-1),ut!==Te&&(t.activeTexture(Te),ut=Te)}function At(Te,Ht,Dt){Dt===void 0&&(ut===null?Dt=t.TEXTURE0+wt-1:Dt=ut);let fn=je[Dt];fn===void 0&&(fn={type:void 0,texture:void 0},je[Dt]=fn),(fn.type!==Te||fn.texture!==Ht)&&(ut!==Dt&&(t.activeTexture(Dt),ut=Dt),t.bindTexture(Te,Ht||tn[Te]),fn.type=Te,fn.texture=Ht)}function gn(){const Te=je[ut];Te!==void 0&&Te.type!==void 0&&(t.bindTexture(Te.type,null),Te.type=void 0,Te.texture=void 0)}function Jt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function ln(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Dn(){try{t.texSubImage2D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Xn(){try{t.texSubImage3D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Bt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function gr(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function sr(){try{t.texStorage2D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Cn(){try{t.texStorage3D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Mn(){try{t.texImage2D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function rn(){try{t.texImage3D.apply(t,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Un(Te){at.equals(Te)===!1&&(t.scissor(Te.x,Te.y,Te.z,Te.w),at.copy(Te))}function Ae(Te){Ot.equals(Te)===!1&&(t.viewport(Te.x,Te.y,Te.z,Te.w),Ot.copy(Te))}function Wt(Te,Ht){let Dt=E.get(Ht);Dt===void 0&&(Dt=new WeakMap,E.set(Ht,Dt));let fn=Dt.get(Te);fn===void 0&&(fn=t.getUniformBlockIndex(Ht,Te.name),Dt.set(Te,fn))}function Yt(Te,Ht){const fn=E.get(Ht).get(Te);x.get(Ht)!==fn&&(t.uniformBlockBinding(Ht,fn,Te.__bindingPointIndex),x.set(Ht,fn))}function pn(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),M={},ut=null,je={},R={},j=new WeakMap,F=[],B=null,z=!1,P=null,W=null,Z=null,ge=null,X=null,pe=null,ye=null,te=new xn(0,0,0),ie=0,Pe=!1,_t=null,Tt=null,de=null,ot=null,Me=null,at.set(0,0,t.canvas.width,t.canvas.height),Ot.set(0,0,t.canvas.width,t.canvas.height),d.reset(),m.reset(),v.reset()}return{buffers:{color:d,depth:m,stencil:v},enable:Kt,disable:Tn,bindFramebuffer:nn,drawBuffers:He,useProgram:jn,setBlending:on,setMaterial:zr,setFlipSided:kn,setCullFace:Se,setLineWidth:he,setPolygonOffset:dt,setScissorTest:Nt,activeTexture:Ft,bindTexture:At,unbindTexture:gn,compressedTexImage2D:Jt,compressedTexImage3D:ln,texImage2D:Mn,texImage3D:rn,updateUBOMapping:Wt,uniformBlockBinding:Yt,texStorage2D:sr,texStorage3D:Cn,texSubImage2D:Dn,texSubImage3D:Xn,compressedTexSubImage2D:Bt,compressedTexSubImage3D:gr,scissor:Un,viewport:Ae,reset:pn}}function T6e(t,e,n,r,i,o,u){const d=i.isWebGL2,m=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),x=new WeakMap;let E;const M=new WeakMap;let R=!1;try{R=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function j(Se,he){return R?new OffscreenCanvas(Se,he):kT("canvas")}function F(Se,he,dt,Nt){let Ft=1;if((Se.width>Nt||Se.height>Nt)&&(Ft=Nt/Math.max(Se.width,Se.height)),Ft<1||he===!0)if(typeof HTMLImageElement<"u"&&Se instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Se instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Se instanceof ImageBitmap){const At=he?LN:Math.floor,gn=At(Ft*Se.width),Jt=At(Ft*Se.height);E===void 0&&(E=j(gn,Jt));const ln=dt?j(gn,Jt):E;return ln.width=gn,ln.height=Jt,ln.getContext("2d").drawImage(Se,0,0,gn,Jt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Se.width+"x"+Se.height+") to ("+gn+"x"+Jt+")."),ln}else return"data"in Se&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Se.width+"x"+Se.height+")."),Se;return Se}function B(Se){return PW(Se.width)&&PW(Se.height)}function z(Se){return d?!1:Se.wrapS!==vl||Se.wrapT!==vl||Se.minFilter!==Po&&Se.minFilter!==no}function P(Se,he){return Se.generateMipmaps&&he&&Se.minFilter!==Po&&Se.minFilter!==no}function W(Se){t.generateMipmap(Se)}function Z(Se,he,dt,Nt,Ft=!1){if(d===!1)return he;if(Se!==null){if(t[Se]!==void 0)return t[Se];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Se+"'")}let At=he;if(he===t.RED&&(dt===t.FLOAT&&(At=t.R32F),dt===t.HALF_FLOAT&&(At=t.R16F),dt===t.UNSIGNED_BYTE&&(At=t.R8)),he===t.RED_INTEGER&&(dt===t.UNSIGNED_BYTE&&(At=t.R8UI),dt===t.UNSIGNED_SHORT&&(At=t.R16UI),dt===t.UNSIGNED_INT&&(At=t.R32UI),dt===t.BYTE&&(At=t.R8I),dt===t.SHORT&&(At=t.R16I),dt===t.INT&&(At=t.R32I)),he===t.RG&&(dt===t.FLOAT&&(At=t.RG32F),dt===t.HALF_FLOAT&&(At=t.RG16F),dt===t.UNSIGNED_BYTE&&(At=t.RG8)),he===t.RGBA){const gn=Ft?IN:li.getTransfer(Nt);dt===t.FLOAT&&(At=t.RGBA32F),dt===t.HALF_FLOAT&&(At=t.RGBA16F),dt===t.UNSIGNED_BYTE&&(At=gn===Ti?t.SRGB8_ALPHA8:t.RGBA8),dt===t.UNSIGNED_SHORT_4_4_4_4&&(At=t.RGBA4),dt===t.UNSIGNED_SHORT_5_5_5_1&&(At=t.RGB5_A1)}return(At===t.R16F||At===t.R32F||At===t.RG16F||At===t.RG32F||At===t.RGBA16F||At===t.RGBA32F)&&e.get("EXT_color_buffer_float"),At}function ge(Se,he,dt){return P(Se,dt)===!0||Se.isFramebufferTexture&&Se.minFilter!==Po&&Se.minFilter!==no?Math.log2(Math.max(he.width,he.height))+1:Se.mipmaps!==void 0&&Se.mipmaps.length>0?Se.mipmaps.length:Se.isCompressedTexture&&Array.isArray(Se.image)?he.mipmaps.length:1}function X(Se){return Se===Po||Se===$0e||Se===vP?t.NEAREST:t.LINEAR}function pe(Se){const he=Se.target;he.removeEventListener("dispose",pe),te(he),he.isVideoTexture&&x.delete(he)}function ye(Se){const he=Se.target;he.removeEventListener("dispose",ye),Pe(he)}function te(Se){const he=r.get(Se);if(he.__webglInit===void 0)return;const dt=Se.source,Nt=M.get(dt);if(Nt){const Ft=Nt[he.__cacheKey];Ft.usedTimes--,Ft.usedTimes===0&&ie(Se),Object.keys(Nt).length===0&&M.delete(dt)}r.remove(Se)}function ie(Se){const he=r.get(Se);t.deleteTexture(he.__webglTexture);const dt=Se.source,Nt=M.get(dt);delete Nt[he.__cacheKey],u.memory.textures--}function Pe(Se){const he=Se.texture,dt=r.get(Se),Nt=r.get(he);if(Nt.__webglTexture!==void 0&&(t.deleteTexture(Nt.__webglTexture),u.memory.textures--),Se.depthTexture&&Se.depthTexture.dispose(),Se.isWebGLCubeRenderTarget)for(let Ft=0;Ft<6;Ft++){if(Array.isArray(dt.__webglFramebuffer[Ft]))for(let At=0;At<dt.__webglFramebuffer[Ft].length;At++)t.deleteFramebuffer(dt.__webglFramebuffer[Ft][At]);else t.deleteFramebuffer(dt.__webglFramebuffer[Ft]);dt.__webglDepthbuffer&&t.deleteRenderbuffer(dt.__webglDepthbuffer[Ft])}else{if(Array.isArray(dt.__webglFramebuffer))for(let Ft=0;Ft<dt.__webglFramebuffer.length;Ft++)t.deleteFramebuffer(dt.__webglFramebuffer[Ft]);else t.deleteFramebuffer(dt.__webglFramebuffer);if(dt.__webglDepthbuffer&&t.deleteRenderbuffer(dt.__webglDepthbuffer),dt.__webglMultisampledFramebuffer&&t.deleteFramebuffer(dt.__webglMultisampledFramebuffer),dt.__webglColorRenderbuffer)for(let Ft=0;Ft<dt.__webglColorRenderbuffer.length;Ft++)dt.__webglColorRenderbuffer[Ft]&&t.deleteRenderbuffer(dt.__webglColorRenderbuffer[Ft]);dt.__webglDepthRenderbuffer&&t.deleteRenderbuffer(dt.__webglDepthRenderbuffer)}if(Se.isWebGLMultipleRenderTargets)for(let Ft=0,At=he.length;Ft<At;Ft++){const gn=r.get(he[Ft]);gn.__webglTexture&&(t.deleteTexture(gn.__webglTexture),u.memory.textures--),r.remove(he[Ft])}r.remove(he),r.remove(Se)}let _t=0;function Tt(){_t=0}function de(){const Se=_t;return Se>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Se+" texture units while this GPU supports only "+i.maxTextures),_t+=1,Se}function ot(Se){const he=[];return he.push(Se.wrapS),he.push(Se.wrapT),he.push(Se.wrapR||0),he.push(Se.magFilter),he.push(Se.minFilter),he.push(Se.anisotropy),he.push(Se.internalFormat),he.push(Se.format),he.push(Se.type),he.push(Se.generateMipmaps),he.push(Se.premultiplyAlpha),he.push(Se.flipY),he.push(Se.unpackAlignment),he.push(Se.colorSpace),he.join()}function Me(Se,he){const dt=r.get(Se);if(Se.isVideoTexture&&zr(Se),Se.isRenderTargetTexture===!1&&Se.version>0&&dt.__version!==Se.version){const Nt=Se.image;if(Nt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Nt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{at(dt,Se,he);return}}n.bindTexture(t.TEXTURE_2D,dt.__webglTexture,t.TEXTURE0+he)}function wt(Se,he){const dt=r.get(Se);if(Se.version>0&&dt.__version!==Se.version){at(dt,Se,he);return}n.bindTexture(t.TEXTURE_2D_ARRAY,dt.__webglTexture,t.TEXTURE0+he)}function Ge(Se,he){const dt=r.get(Se);if(Se.version>0&&dt.__version!==Se.version){at(dt,Se,he);return}n.bindTexture(t.TEXTURE_3D,dt.__webglTexture,t.TEXTURE0+he)}function it(Se,he){const dt=r.get(Se);if(Se.version>0&&dt.__version!==Se.version){Ot(dt,Se,he);return}n.bindTexture(t.TEXTURE_CUBE_MAP,dt.__webglTexture,t.TEXTURE0+he)}const Qe={[pp]:t.REPEAT,[vl]:t.CLAMP_TO_EDGE,[SW]:t.MIRRORED_REPEAT},ut={[Po]:t.NEAREST,[$0e]:t.NEAREST_MIPMAP_NEAREST,[vP]:t.NEAREST_MIPMAP_LINEAR,[no]:t.LINEAR,[eG]:t.LINEAR_MIPMAP_NEAREST,[g0]:t.LINEAR_MIPMAP_LINEAR},je={[u5e]:t.NEVER,[m5e]:t.ALWAYS,[c5e]:t.LESS,[OSe]:t.LEQUAL,[d5e]:t.EQUAL,[f5e]:t.GEQUAL,[h5e]:t.GREATER,[p5e]:t.NOTEQUAL};function bt(Se,he,dt){if(he.type===Sd&&e.has("OES_texture_float_linear")===!1&&(he.magFilter===no||he.magFilter===eG||he.magFilter===vP||he.magFilter===g0||he.minFilter===no||he.minFilter===eG||he.minFilter===vP||he.minFilter===g0)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),dt?(t.texParameteri(Se,t.TEXTURE_WRAP_S,Qe[he.wrapS]),t.texParameteri(Se,t.TEXTURE_WRAP_T,Qe[he.wrapT]),(Se===t.TEXTURE_3D||Se===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Se,t.TEXTURE_WRAP_R,Qe[he.wrapR]),t.texParameteri(Se,t.TEXTURE_MAG_FILTER,ut[he.magFilter]),t.texParameteri(Se,t.TEXTURE_MIN_FILTER,ut[he.minFilter])):(t.texParameteri(Se,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(Se,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(Se===t.TEXTURE_3D||Se===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Se,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(he.wrapS!==vl||he.wrapT!==vl)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(Se,t.TEXTURE_MAG_FILTER,X(he.magFilter)),t.texParameteri(Se,t.TEXTURE_MIN_FILTER,X(he.minFilter)),he.minFilter!==Po&&he.minFilter!==no&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),he.compareFunction&&(t.texParameteri(Se,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Se,t.TEXTURE_COMPARE_FUNC,je[he.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Nt=e.get("EXT_texture_filter_anisotropic");if(he.magFilter===Po||he.minFilter!==vP&&he.minFilter!==g0||he.type===Sd&&e.has("OES_texture_float_linear")===!1||d===!1&&he.type===MT&&e.has("OES_texture_half_float_linear")===!1)return;(he.anisotropy>1||r.get(he).__currentAnisotropy)&&(t.texParameterf(Se,Nt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(he.anisotropy,i.getMaxAnisotropy())),r.get(he).__currentAnisotropy=he.anisotropy)}}function Fe(Se,he){let dt=!1;Se.__webglInit===void 0&&(Se.__webglInit=!0,he.addEventListener("dispose",pe));const Nt=he.source;let Ft=M.get(Nt);Ft===void 0&&(Ft={},M.set(Nt,Ft));const At=ot(he);if(At!==Se.__cacheKey){Ft[At]===void 0&&(Ft[At]={texture:t.createTexture(),usedTimes:0},u.memory.textures++,dt=!0),Ft[At].usedTimes++;const gn=Ft[Se.__cacheKey];gn!==void 0&&(Ft[Se.__cacheKey].usedTimes--,gn.usedTimes===0&&ie(he)),Se.__cacheKey=At,Se.__webglTexture=Ft[At].texture}return dt}function at(Se,he,dt){let Nt=t.TEXTURE_2D;(he.isDataArrayTexture||he.isCompressedArrayTexture)&&(Nt=t.TEXTURE_2D_ARRAY),he.isData3DTexture&&(Nt=t.TEXTURE_3D);const Ft=Fe(Se,he),At=he.source;n.bindTexture(Nt,Se.__webglTexture,t.TEXTURE0+dt);const gn=r.get(At);if(At.version!==gn.__version||Ft===!0){n.activeTexture(t.TEXTURE0+dt);const Jt=li.getPrimaries(li.workingColorSpace),ln=he.colorSpace===fu?null:li.getPrimaries(he.colorSpace),Dn=he.colorSpace===fu||Jt===ln?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,he.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,he.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Dn);const Xn=z(he)&&B(he.image)===!1;let Bt=F(he.image,Xn,!1,i.maxTextureSize);Bt=kn(he,Bt);const gr=B(Bt)||d,sr=o.convert(he.format,he.colorSpace);let Cn=o.convert(he.type),Mn=Z(he.internalFormat,sr,Cn,he.colorSpace,he.isVideoTexture);bt(Nt,he,gr);let rn;const Un=he.mipmaps,Ae=d&&he.isVideoTexture!==!0&&Mn!==DSe,Wt=gn.__version===void 0||Ft===!0,Yt=At.dataReady,pn=ge(he,Bt,gr);if(he.isDepthTexture)Mn=t.DEPTH_COMPONENT,d?he.type===Sd?Mn=t.DEPTH_COMPONENT32F:he.type===Qh?Mn=t.DEPTH_COMPONENT24:he.type===jm?Mn=t.DEPTH24_STENCIL8:Mn=t.DEPTH_COMPONENT16:he.type===Sd&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),he.format===x0&&Mn===t.DEPTH_COMPONENT&&he.type!==y7&&he.type!==Qh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),he.type=Qh,Cn=o.convert(he.type)),he.format===R0&&Mn===t.DEPTH_COMPONENT&&(Mn=t.DEPTH_STENCIL,he.type!==jm&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),he.type=jm,Cn=o.convert(he.type))),Wt&&(Ae?n.texStorage2D(t.TEXTURE_2D,1,Mn,Bt.width,Bt.height):n.texImage2D(t.TEXTURE_2D,0,Mn,Bt.width,Bt.height,0,sr,Cn,null));else if(he.isDataTexture)if(Un.length>0&&gr){Ae&&Wt&&n.texStorage2D(t.TEXTURE_2D,pn,Mn,Un[0].width,Un[0].height);for(let Te=0,Ht=Un.length;Te<Ht;Te++)rn=Un[Te],Ae?Yt&&n.texSubImage2D(t.TEXTURE_2D,Te,0,0,rn.width,rn.height,sr,Cn,rn.data):n.texImage2D(t.TEXTURE_2D,Te,Mn,rn.width,rn.height,0,sr,Cn,rn.data);he.generateMipmaps=!1}else Ae?(Wt&&n.texStorage2D(t.TEXTURE_2D,pn,Mn,Bt.width,Bt.height),Yt&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Bt.width,Bt.height,sr,Cn,Bt.data)):n.texImage2D(t.TEXTURE_2D,0,Mn,Bt.width,Bt.height,0,sr,Cn,Bt.data);else if(he.isCompressedTexture)if(he.isCompressedArrayTexture){Ae&&Wt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,pn,Mn,Un[0].width,Un[0].height,Bt.depth);for(let Te=0,Ht=Un.length;Te<Ht;Te++)rn=Un[Te],he.format!==pu?sr!==null?Ae?Yt&&n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Te,0,0,0,rn.width,rn.height,Bt.depth,sr,rn.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Te,Mn,rn.width,rn.height,Bt.depth,0,rn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ae?Yt&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Te,0,0,0,rn.width,rn.height,Bt.depth,sr,Cn,rn.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Te,Mn,rn.width,rn.height,Bt.depth,0,sr,Cn,rn.data)}else{Ae&&Wt&&n.texStorage2D(t.TEXTURE_2D,pn,Mn,Un[0].width,Un[0].height);for(let Te=0,Ht=Un.length;Te<Ht;Te++)rn=Un[Te],he.format!==pu?sr!==null?Ae?Yt&&n.compressedTexSubImage2D(t.TEXTURE_2D,Te,0,0,rn.width,rn.height,sr,rn.data):n.compressedTexImage2D(t.TEXTURE_2D,Te,Mn,rn.width,rn.height,0,rn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ae?Yt&&n.texSubImage2D(t.TEXTURE_2D,Te,0,0,rn.width,rn.height,sr,Cn,rn.data):n.texImage2D(t.TEXTURE_2D,Te,Mn,rn.width,rn.height,0,sr,Cn,rn.data)}else if(he.isDataArrayTexture)Ae?(Wt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,pn,Mn,Bt.width,Bt.height,Bt.depth),Yt&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Bt.width,Bt.height,Bt.depth,sr,Cn,Bt.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Mn,Bt.width,Bt.height,Bt.depth,0,sr,Cn,Bt.data);else if(he.isData3DTexture)Ae?(Wt&&n.texStorage3D(t.TEXTURE_3D,pn,Mn,Bt.width,Bt.height,Bt.depth),Yt&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Bt.width,Bt.height,Bt.depth,sr,Cn,Bt.data)):n.texImage3D(t.TEXTURE_3D,0,Mn,Bt.width,Bt.height,Bt.depth,0,sr,Cn,Bt.data);else if(he.isFramebufferTexture){if(Wt)if(Ae)n.texStorage2D(t.TEXTURE_2D,pn,Mn,Bt.width,Bt.height);else{let Te=Bt.width,Ht=Bt.height;for(let Dt=0;Dt<pn;Dt++)n.texImage2D(t.TEXTURE_2D,Dt,Mn,Te,Ht,0,sr,Cn,null),Te>>=1,Ht>>=1}}else if(Un.length>0&&gr){Ae&&Wt&&n.texStorage2D(t.TEXTURE_2D,pn,Mn,Un[0].width,Un[0].height);for(let Te=0,Ht=Un.length;Te<Ht;Te++)rn=Un[Te],Ae?Yt&&n.texSubImage2D(t.TEXTURE_2D,Te,0,0,sr,Cn,rn):n.texImage2D(t.TEXTURE_2D,Te,Mn,sr,Cn,rn);he.generateMipmaps=!1}else Ae?(Wt&&n.texStorage2D(t.TEXTURE_2D,pn,Mn,Bt.width,Bt.height),Yt&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,sr,Cn,Bt)):n.texImage2D(t.TEXTURE_2D,0,Mn,sr,Cn,Bt);P(he,gr)&&W(Nt),gn.__version=At.version,he.onUpdate&&he.onUpdate(he)}Se.__version=he.version}function Ot(Se,he,dt){if(he.image.length!==6)return;const Nt=Fe(Se,he),Ft=he.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Se.__webglTexture,t.TEXTURE0+dt);const At=r.get(Ft);if(Ft.version!==At.__version||Nt===!0){n.activeTexture(t.TEXTURE0+dt);const gn=li.getPrimaries(li.workingColorSpace),Jt=he.colorSpace===fu?null:li.getPrimaries(he.colorSpace),ln=he.colorSpace===fu||gn===Jt?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,he.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,he.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,ln);const Dn=he.isCompressedTexture||he.image[0].isCompressedTexture,Xn=he.image[0]&&he.image[0].isDataTexture,Bt=[];for(let Te=0;Te<6;Te++)!Dn&&!Xn?Bt[Te]=F(he.image[Te],!1,!0,i.maxCubemapSize):Bt[Te]=Xn?he.image[Te].image:he.image[Te],Bt[Te]=kn(he,Bt[Te]);const gr=Bt[0],sr=B(gr)||d,Cn=o.convert(he.format,he.colorSpace),Mn=o.convert(he.type),rn=Z(he.internalFormat,Cn,Mn,he.colorSpace),Un=d&&he.isVideoTexture!==!0,Ae=At.__version===void 0||Nt===!0,Wt=Ft.dataReady;let Yt=ge(he,gr,sr);bt(t.TEXTURE_CUBE_MAP,he,sr);let pn;if(Dn){Un&&Ae&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Yt,rn,gr.width,gr.height);for(let Te=0;Te<6;Te++){pn=Bt[Te].mipmaps;for(let Ht=0;Ht<pn.length;Ht++){const Dt=pn[Ht];he.format!==pu?Cn!==null?Un?Wt&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ht,0,0,Dt.width,Dt.height,Cn,Dt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ht,rn,Dt.width,Dt.height,0,Dt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Un?Wt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ht,0,0,Dt.width,Dt.height,Cn,Mn,Dt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ht,rn,Dt.width,Dt.height,0,Cn,Mn,Dt.data)}}}else{pn=he.mipmaps,Un&&Ae&&(pn.length>0&&Yt++,n.texStorage2D(t.TEXTURE_CUBE_MAP,Yt,rn,Bt[0].width,Bt[0].height));for(let Te=0;Te<6;Te++)if(Xn){Un?Wt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,Bt[Te].width,Bt[Te].height,Cn,Mn,Bt[Te].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,rn,Bt[Te].width,Bt[Te].height,0,Cn,Mn,Bt[Te].data);for(let Ht=0;Ht<pn.length;Ht++){const fn=pn[Ht].image[Te].image;Un?Wt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ht+1,0,0,fn.width,fn.height,Cn,Mn,fn.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ht+1,rn,fn.width,fn.height,0,Cn,Mn,fn.data)}}else{Un?Wt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,Cn,Mn,Bt[Te]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,rn,Cn,Mn,Bt[Te]);for(let Ht=0;Ht<pn.length;Ht++){const Dt=pn[Ht];Un?Wt&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ht+1,0,0,Cn,Mn,Dt.image[Te]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ht+1,rn,Cn,Mn,Dt.image[Te])}}}P(he,sr)&&W(t.TEXTURE_CUBE_MAP),At.__version=Ft.version,he.onUpdate&&he.onUpdate(he)}Se.__version=he.version}function Gt(Se,he,dt,Nt,Ft,At){const gn=o.convert(dt.format,dt.colorSpace),Jt=o.convert(dt.type),ln=Z(dt.internalFormat,gn,Jt,dt.colorSpace);if(!r.get(he).__hasExternalTextures){const Xn=Math.max(1,he.width>>At),Bt=Math.max(1,he.height>>At);Ft===t.TEXTURE_3D||Ft===t.TEXTURE_2D_ARRAY?n.texImage3D(Ft,At,ln,Xn,Bt,he.depth,0,gn,Jt,null):n.texImage2D(Ft,At,ln,Xn,Bt,0,gn,Jt,null)}n.bindFramebuffer(t.FRAMEBUFFER,Se),on(he)?m.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Nt,Ft,r.get(dt).__webglTexture,0,dn(he)):(Ft===t.TEXTURE_2D||Ft>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Ft<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Nt,Ft,r.get(dt).__webglTexture,At),n.bindFramebuffer(t.FRAMEBUFFER,null)}function tn(Se,he,dt){if(t.bindRenderbuffer(t.RENDERBUFFER,Se),he.depthBuffer&&!he.stencilBuffer){let Nt=d===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(dt||on(he)){const Ft=he.depthTexture;Ft&&Ft.isDepthTexture&&(Ft.type===Sd?Nt=t.DEPTH_COMPONENT32F:Ft.type===Qh&&(Nt=t.DEPTH_COMPONENT24));const At=dn(he);on(he)?m.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,At,Nt,he.width,he.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,At,Nt,he.width,he.height)}else t.renderbufferStorage(t.RENDERBUFFER,Nt,he.width,he.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,Se)}else if(he.depthBuffer&&he.stencilBuffer){const Nt=dn(he);dt&&on(he)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Nt,t.DEPTH24_STENCIL8,he.width,he.height):on(he)?m.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Nt,t.DEPTH24_STENCIL8,he.width,he.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,he.width,he.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,Se)}else{const Nt=he.isWebGLMultipleRenderTargets===!0?he.texture:[he.texture];for(let Ft=0;Ft<Nt.length;Ft++){const At=Nt[Ft],gn=o.convert(At.format,At.colorSpace),Jt=o.convert(At.type),ln=Z(At.internalFormat,gn,Jt,At.colorSpace),Dn=dn(he);dt&&on(he)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Dn,ln,he.width,he.height):on(he)?m.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Dn,ln,he.width,he.height):t.renderbufferStorage(t.RENDERBUFFER,ln,he.width,he.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Kt(Se,he){if(he&&he.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Se),!(he.depthTexture&&he.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(he.depthTexture).__webglTexture||he.depthTexture.image.width!==he.width||he.depthTexture.image.height!==he.height)&&(he.depthTexture.image.width=he.width,he.depthTexture.image.height=he.height,he.depthTexture.needsUpdate=!0),Me(he.depthTexture,0);const Nt=r.get(he.depthTexture).__webglTexture,Ft=dn(he);if(he.depthTexture.format===x0)on(he)?m.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Nt,0,Ft):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Nt,0);else if(he.depthTexture.format===R0)on(he)?m.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Nt,0,Ft):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Nt,0);else throw new Error("Unknown depthTexture format")}function Tn(Se){const he=r.get(Se),dt=Se.isWebGLCubeRenderTarget===!0;if(Se.depthTexture&&!he.__autoAllocateDepthBuffer){if(dt)throw new Error("target.depthTexture not supported in Cube render targets");Kt(he.__webglFramebuffer,Se)}else if(dt){he.__webglDepthbuffer=[];for(let Nt=0;Nt<6;Nt++)n.bindFramebuffer(t.FRAMEBUFFER,he.__webglFramebuffer[Nt]),he.__webglDepthbuffer[Nt]=t.createRenderbuffer(),tn(he.__webglDepthbuffer[Nt],Se,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,he.__webglFramebuffer),he.__webglDepthbuffer=t.createRenderbuffer(),tn(he.__webglDepthbuffer,Se,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function nn(Se,he,dt){const Nt=r.get(Se);he!==void 0&&Gt(Nt.__webglFramebuffer,Se,Se.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),dt!==void 0&&Tn(Se)}function He(Se){const he=Se.texture,dt=r.get(Se),Nt=r.get(he);Se.addEventListener("dispose",ye),Se.isWebGLMultipleRenderTargets!==!0&&(Nt.__webglTexture===void 0&&(Nt.__webglTexture=t.createTexture()),Nt.__version=he.version,u.memory.textures++);const Ft=Se.isWebGLCubeRenderTarget===!0,At=Se.isWebGLMultipleRenderTargets===!0,gn=B(Se)||d;if(Ft){dt.__webglFramebuffer=[];for(let Jt=0;Jt<6;Jt++)if(d&&he.mipmaps&&he.mipmaps.length>0){dt.__webglFramebuffer[Jt]=[];for(let ln=0;ln<he.mipmaps.length;ln++)dt.__webglFramebuffer[Jt][ln]=t.createFramebuffer()}else dt.__webglFramebuffer[Jt]=t.createFramebuffer()}else{if(d&&he.mipmaps&&he.mipmaps.length>0){dt.__webglFramebuffer=[];for(let Jt=0;Jt<he.mipmaps.length;Jt++)dt.__webglFramebuffer[Jt]=t.createFramebuffer()}else dt.__webglFramebuffer=t.createFramebuffer();if(At)if(i.drawBuffers){const Jt=Se.texture;for(let ln=0,Dn=Jt.length;ln<Dn;ln++){const Xn=r.get(Jt[ln]);Xn.__webglTexture===void 0&&(Xn.__webglTexture=t.createTexture(),u.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(d&&Se.samples>0&&on(Se)===!1){const Jt=At?he:[he];dt.__webglMultisampledFramebuffer=t.createFramebuffer(),dt.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,dt.__webglMultisampledFramebuffer);for(let ln=0;ln<Jt.length;ln++){const Dn=Jt[ln];dt.__webglColorRenderbuffer[ln]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,dt.__webglColorRenderbuffer[ln]);const Xn=o.convert(Dn.format,Dn.colorSpace),Bt=o.convert(Dn.type),gr=Z(Dn.internalFormat,Xn,Bt,Dn.colorSpace,Se.isXRRenderTarget===!0),sr=dn(Se);t.renderbufferStorageMultisample(t.RENDERBUFFER,sr,gr,Se.width,Se.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+ln,t.RENDERBUFFER,dt.__webglColorRenderbuffer[ln])}t.bindRenderbuffer(t.RENDERBUFFER,null),Se.depthBuffer&&(dt.__webglDepthRenderbuffer=t.createRenderbuffer(),tn(dt.__webglDepthRenderbuffer,Se,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ft){n.bindTexture(t.TEXTURE_CUBE_MAP,Nt.__webglTexture),bt(t.TEXTURE_CUBE_MAP,he,gn);for(let Jt=0;Jt<6;Jt++)if(d&&he.mipmaps&&he.mipmaps.length>0)for(let ln=0;ln<he.mipmaps.length;ln++)Gt(dt.__webglFramebuffer[Jt][ln],Se,he,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,ln);else Gt(dt.__webglFramebuffer[Jt],Se,he,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Jt,0);P(he,gn)&&W(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(At){const Jt=Se.texture;for(let ln=0,Dn=Jt.length;ln<Dn;ln++){const Xn=Jt[ln],Bt=r.get(Xn);n.bindTexture(t.TEXTURE_2D,Bt.__webglTexture),bt(t.TEXTURE_2D,Xn,gn),Gt(dt.__webglFramebuffer,Se,Xn,t.COLOR_ATTACHMENT0+ln,t.TEXTURE_2D,0),P(Xn,gn)&&W(t.TEXTURE_2D)}n.unbindTexture()}else{let Jt=t.TEXTURE_2D;if((Se.isWebGL3DRenderTarget||Se.isWebGLArrayRenderTarget)&&(d?Jt=Se.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Jt,Nt.__webglTexture),bt(Jt,he,gn),d&&he.mipmaps&&he.mipmaps.length>0)for(let ln=0;ln<he.mipmaps.length;ln++)Gt(dt.__webglFramebuffer[ln],Se,he,t.COLOR_ATTACHMENT0,Jt,ln);else Gt(dt.__webglFramebuffer,Se,he,t.COLOR_ATTACHMENT0,Jt,0);P(he,gn)&&W(Jt),n.unbindTexture()}Se.depthBuffer&&Tn(Se)}function jn(Se){const he=B(Se)||d,dt=Se.isWebGLMultipleRenderTargets===!0?Se.texture:[Se.texture];for(let Nt=0,Ft=dt.length;Nt<Ft;Nt++){const At=dt[Nt];if(P(At,he)){const gn=Se.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Jt=r.get(At).__webglTexture;n.bindTexture(gn,Jt),W(gn),n.unbindTexture()}}}function an(Se){if(d&&Se.samples>0&&on(Se)===!1){const he=Se.isWebGLMultipleRenderTargets?Se.texture:[Se.texture],dt=Se.width,Nt=Se.height;let Ft=t.COLOR_BUFFER_BIT;const At=[],gn=Se.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Jt=r.get(Se),ln=Se.isWebGLMultipleRenderTargets===!0;if(ln)for(let Dn=0;Dn<he.length;Dn++)n.bindFramebuffer(t.FRAMEBUFFER,Jt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Dn,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Jt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Dn,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Jt.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Jt.__webglFramebuffer);for(let Dn=0;Dn<he.length;Dn++){At.push(t.COLOR_ATTACHMENT0+Dn),Se.depthBuffer&&At.push(gn);const Xn=Jt.__ignoreDepthValues!==void 0?Jt.__ignoreDepthValues:!1;if(Xn===!1&&(Se.depthBuffer&&(Ft|=t.DEPTH_BUFFER_BIT),Se.stencilBuffer&&(Ft|=t.STENCIL_BUFFER_BIT)),ln&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Jt.__webglColorRenderbuffer[Dn]),Xn===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[gn]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[gn])),ln){const Bt=r.get(he[Dn]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Bt,0)}t.blitFramebuffer(0,0,dt,Nt,0,0,dt,Nt,Ft,t.NEAREST),v&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,At)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),ln)for(let Dn=0;Dn<he.length;Dn++){n.bindFramebuffer(t.FRAMEBUFFER,Jt.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Dn,t.RENDERBUFFER,Jt.__webglColorRenderbuffer[Dn]);const Xn=r.get(he[Dn]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Jt.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Dn,t.TEXTURE_2D,Xn,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Jt.__webglMultisampledFramebuffer)}}function dn(Se){return Math.min(i.maxSamples,Se.samples)}function on(Se){const he=r.get(Se);return d&&Se.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&he.__useRenderToTexture!==!1}function zr(Se){const he=u.render.frame;x.get(Se)!==he&&(x.set(Se,he),Se.update())}function kn(Se,he){const dt=Se.colorSpace,Nt=Se.format,Ft=Se.type;return Se.isCompressedTexture===!0||Se.isVideoTexture===!0||Se.format===CW||dt!==fp&&dt!==fu&&(li.getTransfer(dt)===Ti?d===!1?e.has("EXT_sRGB")===!0&&Nt===pu?(Se.format=CW,Se.minFilter=no,Se.generateMipmaps=!1):he=NSe.sRGBToLinear(he):(Nt!==pu||Ft!==_l)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",dt)),he}this.allocateTextureUnit=de,this.resetTextureUnits=Tt,this.setTexture2D=Me,this.setTexture2DArray=wt,this.setTexture3D=Ge,this.setTextureCube=it,this.rebindTextures=nn,this.setupRenderTarget=He,this.updateRenderTargetMipmap=jn,this.updateMultisampleRenderTarget=an,this.setupDepthRenderbuffer=Tn,this.setupFrameBufferTexture=Gt,this.useMultisampledRTT=on}function M6e(t,e,n){const r=n.isWebGL2;function i(o,u=fu){let d;const m=li.getTransfer(u);if(o===_l)return t.UNSIGNED_BYTE;if(o===MSe)return t.UNSIGNED_SHORT_4_4_4_4;if(o===kSe)return t.UNSIGNED_SHORT_5_5_5_1;if(o===qUe)return t.BYTE;if(o===YUe)return t.SHORT;if(o===y7)return t.UNSIGNED_SHORT;if(o===TSe)return t.INT;if(o===Qh)return t.UNSIGNED_INT;if(o===Sd)return t.FLOAT;if(o===MT)return r?t.HALF_FLOAT:(d=e.get("OES_texture_half_float"),d!==null?d.HALF_FLOAT_OES:null);if(o===ZUe)return t.ALPHA;if(o===pu)return t.RGBA;if(o===QUe)return t.LUMINANCE;if(o===JUe)return t.LUMINANCE_ALPHA;if(o===x0)return t.DEPTH_COMPONENT;if(o===R0)return t.DEPTH_STENCIL;if(o===CW)return d=e.get("EXT_sRGB"),d!==null?d.SRGB_ALPHA_EXT:null;if(o===e5e)return t.RED;if(o===ASe)return t.RED_INTEGER;if(o===t5e)return t.RG;if(o===ISe)return t.RG_INTEGER;if(o===RSe)return t.RGBA_INTEGER;if(o===tG||o===nG||o===rG||o===iG)if(m===Ti)if(d=e.get("WEBGL_compressed_texture_s3tc_srgb"),d!==null){if(o===tG)return d.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===nG)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===rG)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===iG)return d.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(d=e.get("WEBGL_compressed_texture_s3tc"),d!==null){if(o===tG)return d.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===nG)return d.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===rG)return d.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===iG)return d.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===K0e||o===X0e||o===q0e||o===Y0e)if(d=e.get("WEBGL_compressed_texture_pvrtc"),d!==null){if(o===K0e)return d.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===X0e)return d.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===q0e)return d.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===Y0e)return d.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===DSe)return d=e.get("WEBGL_compressed_texture_etc1"),d!==null?d.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===Z0e||o===Q0e)if(d=e.get("WEBGL_compressed_texture_etc"),d!==null){if(o===Z0e)return m===Ti?d.COMPRESSED_SRGB8_ETC2:d.COMPRESSED_RGB8_ETC2;if(o===Q0e)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:d.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===J0e||o===eye||o===tye||o===nye||o===rye||o===iye||o===sye||o===oye||o===aye||o===lye||o===uye||o===cye||o===dye||o===hye)if(d=e.get("WEBGL_compressed_texture_astc"),d!==null){if(o===J0e)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:d.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===eye)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:d.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===tye)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:d.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===nye)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:d.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===rye)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:d.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===iye)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:d.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===sye)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:d.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===oye)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:d.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===aye)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:d.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===lye)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:d.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===uye)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:d.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===cye)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:d.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===dye)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:d.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===hye)return m===Ti?d.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:d.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===sG||o===pye||o===fye)if(d=e.get("EXT_texture_compression_bptc"),d!==null){if(o===sG)return m===Ti?d.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:d.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(o===pye)return d.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(o===fye)return d.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(o===n5e||o===mye||o===gye||o===vye)if(d=e.get("EXT_texture_compression_rgtc"),d!==null){if(o===sG)return d.COMPRESSED_RED_RGTC1_EXT;if(o===mye)return d.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===gye)return d.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===vye)return d.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===jm?r?t.UNSIGNED_INT_24_8:(d=e.get("WEBGL_depth_texture"),d!==null?d.UNSIGNED_INT_24_8_WEBGL:null):t[o]!==void 0?t[o]:null}return{convert:i}}class k6e extends Vs{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let v0=class extends qr{constructor(){super(),this.isGroup=!0,this.type="Group"}};const A6e={type:"move"};class kG{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new v0,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new v0,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Be,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Be),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new v0,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Be,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Be),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,o=null,u=null;const d=this._targetRay,m=this._grip,v=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(v&&e.hand){u=!0;for(const F of e.hand.values()){const B=n.getJointPose(F,r),z=this._getHandJoint(v,F);B!==null&&(z.matrix.fromArray(B.transform.matrix),z.matrix.decompose(z.position,z.rotation,z.scale),z.matrixWorldNeedsUpdate=!0,z.jointRadius=B.radius),z.visible=B!==null}const x=v.joints["index-finger-tip"],E=v.joints["thumb-tip"],M=x.position.distanceTo(E.position),R=.02,j=.005;v.inputState.pinching&&M>R+j?(v.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!v.inputState.pinching&&M<=R-j&&(v.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else m!==null&&e.gripSpace&&(o=n.getPose(e.gripSpace,r),o!==null&&(m.matrix.fromArray(o.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,o.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(o.linearVelocity)):m.hasLinearVelocity=!1,o.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(o.angularVelocity)):m.hasAngularVelocity=!1));d!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(d.matrix.fromArray(i.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,i.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(i.linearVelocity)):d.hasLinearVelocity=!1,i.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(i.angularVelocity)):d.hasAngularVelocity=!1,this.dispatchEvent(A6e)))}return d!==null&&(d.visible=i!==null),m!==null&&(m.visible=o!==null),v!==null&&(v.visible=u!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new v0;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}const I6e=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,R6e=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class D6e{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,r){if(this.texture===null){const i=new qi,o=e.properties.get(i);o.__webglTexture=n.texture,(n.depthNear!=r.depthNear||n.depthFar!=r.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=i}}render(e,n){if(this.texture!==null){if(this.mesh===null){const r=n.cameras[0].viewport,i=new Ta({extensions:{fragDepth:!0},vertexShader:I6e,fragmentShader:R6e,uniforms:{depthColor:{value:this.texture},depthWidth:{value:r.z},depthHeight:{value:r.w}}});this.mesh=new is(new f1(20,20),i)}e.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class O6e extends Tl{constructor(e,n){super();const r=this;let i=null,o=1,u=null,d="local-floor",m=1,v=null,x=null,E=null,M=null,R=null,j=null;const F=new D6e,B=n.getContextAttributes();let z=null,P=null;const W=[],Z=[],ge=new cn;let X=null;const pe=new Vs;pe.layers.enable(1),pe.viewport=new Ar;const ye=new Vs;ye.layers.enable(2),ye.viewport=new Ar;const te=[pe,ye],ie=new k6e;ie.layers.enable(1),ie.layers.enable(2);let Pe=null,_t=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Fe){let at=W[Fe];return at===void 0&&(at=new kG,W[Fe]=at),at.getTargetRaySpace()},this.getControllerGrip=function(Fe){let at=W[Fe];return at===void 0&&(at=new kG,W[Fe]=at),at.getGripSpace()},this.getHand=function(Fe){let at=W[Fe];return at===void 0&&(at=new kG,W[Fe]=at),at.getHandSpace()};function Tt(Fe){const at=Z.indexOf(Fe.inputSource);if(at===-1)return;const Ot=W[at];Ot!==void 0&&(Ot.update(Fe.inputSource,Fe.frame,v||u),Ot.dispatchEvent({type:Fe.type,data:Fe.inputSource}))}function de(){i.removeEventListener("select",Tt),i.removeEventListener("selectstart",Tt),i.removeEventListener("selectend",Tt),i.removeEventListener("squeeze",Tt),i.removeEventListener("squeezestart",Tt),i.removeEventListener("squeezeend",Tt),i.removeEventListener("end",de),i.removeEventListener("inputsourceschange",ot);for(let Fe=0;Fe<W.length;Fe++){const at=Z[Fe];at!==null&&(Z[Fe]=null,W[Fe].disconnect(at))}Pe=null,_t=null,F.reset(),e.setRenderTarget(z),R=null,M=null,E=null,i=null,P=null,bt.stop(),r.isPresenting=!1,e.setPixelRatio(X),e.setSize(ge.width,ge.height,!1),r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Fe){o=Fe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Fe){d=Fe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return v||u},this.setReferenceSpace=function(Fe){v=Fe},this.getBaseLayer=function(){return M!==null?M:R},this.getBinding=function(){return E},this.getFrame=function(){return j},this.getSession=function(){return i},this.setSession=async function(Fe){if(i=Fe,i!==null){if(z=e.getRenderTarget(),i.addEventListener("select",Tt),i.addEventListener("selectstart",Tt),i.addEventListener("selectend",Tt),i.addEventListener("squeeze",Tt),i.addEventListener("squeezestart",Tt),i.addEventListener("squeezeend",Tt),i.addEventListener("end",de),i.addEventListener("inputsourceschange",ot),B.xrCompatible!==!0&&await n.makeXRCompatible(),X=e.getPixelRatio(),e.getSize(ge),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const at={antialias:i.renderState.layers===void 0?B.antialias:!0,alpha:!0,depth:B.depth,stencil:B.stencil,framebufferScaleFactor:o};R=new XRWebGLLayer(i,n,at),i.updateRenderState({baseLayer:R}),e.setPixelRatio(1),e.setSize(R.framebufferWidth,R.framebufferHeight,!1),P=new Sl(R.framebufferWidth,R.framebufferHeight,{format:pu,type:_l,colorSpace:e.outputColorSpace,stencilBuffer:B.stencil})}else{let at=null,Ot=null,Gt=null;B.depth&&(Gt=B.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,at=B.stencil?R0:x0,Ot=B.stencil?jm:Qh);const tn={colorFormat:n.RGBA8,depthFormat:Gt,scaleFactor:o};E=new XRWebGLBinding(i,n),M=E.createProjectionLayer(tn),i.updateRenderState({layers:[M]}),e.setPixelRatio(1),e.setSize(M.textureWidth,M.textureHeight,!1),P=new Sl(M.textureWidth,M.textureHeight,{format:pu,type:_l,depthTexture:new P7(M.textureWidth,M.textureHeight,Ot,void 0,void 0,void 0,void 0,void 0,void 0,at),stencilBuffer:B.stencil,colorSpace:e.outputColorSpace,samples:B.antialias?4:0});const Kt=e.properties.get(P);Kt.__ignoreDepthValues=M.ignoreDepthValues}P.isXRRenderTarget=!0,this.setFoveation(m),v=null,u=await i.requestReferenceSpace(d),bt.setContext(i),bt.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function ot(Fe){for(let at=0;at<Fe.removed.length;at++){const Ot=Fe.removed[at],Gt=Z.indexOf(Ot);Gt>=0&&(Z[Gt]=null,W[Gt].disconnect(Ot))}for(let at=0;at<Fe.added.length;at++){const Ot=Fe.added[at];let Gt=Z.indexOf(Ot);if(Gt===-1){for(let Kt=0;Kt<W.length;Kt++)if(Kt>=Z.length){Z.push(Ot),Gt=Kt;break}else if(Z[Kt]===null){Z[Kt]=Ot,Gt=Kt;break}if(Gt===-1)break}const tn=W[Gt];tn&&tn.connect(Ot)}}const Me=new Be,wt=new Be;function Ge(Fe,at,Ot){Me.setFromMatrixPosition(at.matrixWorld),wt.setFromMatrixPosition(Ot.matrixWorld);const Gt=Me.distanceTo(wt),tn=at.projectionMatrix.elements,Kt=Ot.projectionMatrix.elements,Tn=tn[14]/(tn[10]-1),nn=tn[14]/(tn[10]+1),He=(tn[9]+1)/tn[5],jn=(tn[9]-1)/tn[5],an=(tn[8]-1)/tn[0],dn=(Kt[8]+1)/Kt[0],on=Tn*an,zr=Tn*dn,kn=Gt/(-an+dn),Se=kn*-an;at.matrixWorld.decompose(Fe.position,Fe.quaternion,Fe.scale),Fe.translateX(Se),Fe.translateZ(kn),Fe.matrixWorld.compose(Fe.position,Fe.quaternion,Fe.scale),Fe.matrixWorldInverse.copy(Fe.matrixWorld).invert();const he=Tn+kn,dt=nn+kn,Nt=on-Se,Ft=zr+(Gt-Se),At=He*nn/dt*he,gn=jn*nn/dt*he;Fe.projectionMatrix.makePerspective(Nt,Ft,At,gn,he,dt),Fe.projectionMatrixInverse.copy(Fe.projectionMatrix).invert()}function it(Fe,at){at===null?Fe.matrixWorld.copy(Fe.matrix):Fe.matrixWorld.multiplyMatrices(at.matrixWorld,Fe.matrix),Fe.matrixWorldInverse.copy(Fe.matrixWorld).invert()}this.updateCamera=function(Fe){if(i===null)return;F.texture!==null&&(Fe.near=F.depthNear,Fe.far=F.depthFar),ie.near=ye.near=pe.near=Fe.near,ie.far=ye.far=pe.far=Fe.far,(Pe!==ie.near||_t!==ie.far)&&(i.updateRenderState({depthNear:ie.near,depthFar:ie.far}),Pe=ie.near,_t=ie.far,pe.near=Pe,pe.far=_t,ye.near=Pe,ye.far=_t,pe.updateProjectionMatrix(),ye.updateProjectionMatrix(),Fe.updateProjectionMatrix());const at=Fe.parent,Ot=ie.cameras;it(ie,at);for(let Gt=0;Gt<Ot.length;Gt++)it(Ot[Gt],at);Ot.length===2?Ge(ie,pe,ye):ie.projectionMatrix.copy(pe.projectionMatrix),Qe(Fe,ie,at)};function Qe(Fe,at,Ot){Ot===null?Fe.matrix.copy(at.matrixWorld):(Fe.matrix.copy(Ot.matrixWorld),Fe.matrix.invert(),Fe.matrix.multiply(at.matrixWorld)),Fe.matrix.decompose(Fe.position,Fe.quaternion,Fe.scale),Fe.updateMatrixWorld(!0),Fe.projectionMatrix.copy(at.projectionMatrix),Fe.projectionMatrixInverse.copy(at.projectionMatrixInverse),Fe.isPerspectiveCamera&&(Fe.fov=e1*2*Math.atan(1/Fe.projectionMatrix.elements[5]),Fe.zoom=1)}this.getCamera=function(){return ie},this.getFoveation=function(){if(!(M===null&&R===null))return m},this.setFoveation=function(Fe){m=Fe,M!==null&&(M.fixedFoveation=Fe),R!==null&&R.fixedFoveation!==void 0&&(R.fixedFoveation=Fe)},this.hasDepthSensing=function(){return F.texture!==null};let ut=null;function je(Fe,at){if(x=at.getViewerPose(v||u),j=at,x!==null){const Ot=x.views;R!==null&&(e.setRenderTargetFramebuffer(P,R.framebuffer),e.setRenderTarget(P));let Gt=!1;Ot.length!==ie.cameras.length&&(ie.cameras.length=0,Gt=!0);for(let Kt=0;Kt<Ot.length;Kt++){const Tn=Ot[Kt];let nn=null;if(R!==null)nn=R.getViewport(Tn);else{const jn=E.getViewSubImage(M,Tn);nn=jn.viewport,Kt===0&&(e.setRenderTargetTextures(P,jn.colorTexture,M.ignoreDepthValues?void 0:jn.depthStencilTexture),e.setRenderTarget(P))}let He=te[Kt];He===void 0&&(He=new Vs,He.layers.enable(Kt),He.viewport=new Ar,te[Kt]=He),He.matrix.fromArray(Tn.transform.matrix),He.matrix.decompose(He.position,He.quaternion,He.scale),He.projectionMatrix.fromArray(Tn.projectionMatrix),He.projectionMatrixInverse.copy(He.projectionMatrix).invert(),He.viewport.set(nn.x,nn.y,nn.width,nn.height),Kt===0&&(ie.matrix.copy(He.matrix),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale)),Gt===!0&&ie.cameras.push(He)}const tn=i.enabledFeatures;if(tn&&tn.includes("depth-sensing")){const Kt=E.getDepthInformation(Ot[0]);Kt&&Kt.isValid&&Kt.texture&&F.init(e,Kt,i.renderState)}}for(let Ot=0;Ot<W.length;Ot++){const Gt=Z[Ot],tn=W[Ot];Gt!==null&&tn!==void 0&&tn.update(Gt,at,v||u)}F.render(e,ie),ut&&ut(Fe,at),at.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:at}),j=null}const bt=new jSe;bt.setAnimationLoop(je),this.setAnimationLoop=function(Fe){ut=Fe},this.dispose=function(){}}}function L6e(t,e){function n(B,z){B.matrixAutoUpdate===!0&&B.updateMatrix(),z.value.copy(B.matrix)}function r(B,z){z.color.getRGB(B.fogColor.value,VSe(t)),z.isFog?(B.fogNear.value=z.near,B.fogFar.value=z.far):z.isFogExp2&&(B.fogDensity.value=z.density)}function i(B,z,P,W,Z){z.isMeshBasicMaterial||z.isMeshLambertMaterial?o(B,z):z.isMeshToonMaterial?(o(B,z),E(B,z)):z.isMeshPhongMaterial?(o(B,z),x(B,z)):z.isMeshStandardMaterial?(o(B,z),M(B,z),z.isMeshPhysicalMaterial&&R(B,z,Z)):z.isMeshMatcapMaterial?(o(B,z),j(B,z)):z.isMeshDepthMaterial?o(B,z):z.isMeshDistanceMaterial?(o(B,z),F(B,z)):z.isMeshNormalMaterial?o(B,z):z.isLineBasicMaterial?(u(B,z),z.isLineDashedMaterial&&d(B,z)):z.isPointsMaterial?m(B,z,P,W):z.isSpriteMaterial?v(B,z):z.isShadowMaterial?(B.color.value.copy(z.color),B.opacity.value=z.opacity):z.isShaderMaterial&&(z.uniformsNeedUpdate=!1)}function o(B,z){B.opacity.value=z.opacity,z.color&&B.diffuse.value.copy(z.color),z.emissive&&B.emissive.value.copy(z.emissive).multiplyScalar(z.emissiveIntensity),z.map&&(B.map.value=z.map,n(z.map,B.mapTransform)),z.alphaMap&&(B.alphaMap.value=z.alphaMap,n(z.alphaMap,B.alphaMapTransform)),z.bumpMap&&(B.bumpMap.value=z.bumpMap,n(z.bumpMap,B.bumpMapTransform),B.bumpScale.value=z.bumpScale,z.side===Is&&(B.bumpScale.value*=-1)),z.normalMap&&(B.normalMap.value=z.normalMap,n(z.normalMap,B.normalMapTransform),B.normalScale.value.copy(z.normalScale),z.side===Is&&B.normalScale.value.negate()),z.displacementMap&&(B.displacementMap.value=z.displacementMap,n(z.displacementMap,B.displacementMapTransform),B.displacementScale.value=z.displacementScale,B.displacementBias.value=z.displacementBias),z.emissiveMap&&(B.emissiveMap.value=z.emissiveMap,n(z.emissiveMap,B.emissiveMapTransform)),z.specularMap&&(B.specularMap.value=z.specularMap,n(z.specularMap,B.specularMapTransform)),z.alphaTest>0&&(B.alphaTest.value=z.alphaTest);const P=e.get(z).envMap;if(P&&(B.envMap.value=P,B.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,B.reflectivity.value=z.reflectivity,B.ior.value=z.ior,B.refractionRatio.value=z.refractionRatio),z.lightMap){B.lightMap.value=z.lightMap;const W=t._useLegacyLights===!0?Math.PI:1;B.lightMapIntensity.value=z.lightMapIntensity*W,n(z.lightMap,B.lightMapTransform)}z.aoMap&&(B.aoMap.value=z.aoMap,B.aoMapIntensity.value=z.aoMapIntensity,n(z.aoMap,B.aoMapTransform))}function u(B,z){B.diffuse.value.copy(z.color),B.opacity.value=z.opacity,z.map&&(B.map.value=z.map,n(z.map,B.mapTransform))}function d(B,z){B.dashSize.value=z.dashSize,B.totalSize.value=z.dashSize+z.gapSize,B.scale.value=z.scale}function m(B,z,P,W){B.diffuse.value.copy(z.color),B.opacity.value=z.opacity,B.size.value=z.size*P,B.scale.value=W*.5,z.map&&(B.map.value=z.map,n(z.map,B.uvTransform)),z.alphaMap&&(B.alphaMap.value=z.alphaMap,n(z.alphaMap,B.alphaMapTransform)),z.alphaTest>0&&(B.alphaTest.value=z.alphaTest)}function v(B,z){B.diffuse.value.copy(z.color),B.opacity.value=z.opacity,B.rotation.value=z.rotation,z.map&&(B.map.value=z.map,n(z.map,B.mapTransform)),z.alphaMap&&(B.alphaMap.value=z.alphaMap,n(z.alphaMap,B.alphaMapTransform)),z.alphaTest>0&&(B.alphaTest.value=z.alphaTest)}function x(B,z){B.specular.value.copy(z.specular),B.shininess.value=Math.max(z.shininess,1e-4)}function E(B,z){z.gradientMap&&(B.gradientMap.value=z.gradientMap)}function M(B,z){B.metalness.value=z.metalness,z.metalnessMap&&(B.metalnessMap.value=z.metalnessMap,n(z.metalnessMap,B.metalnessMapTransform)),B.roughness.value=z.roughness,z.roughnessMap&&(B.roughnessMap.value=z.roughnessMap,n(z.roughnessMap,B.roughnessMapTransform)),e.get(z).envMap&&(B.envMapIntensity.value=z.envMapIntensity)}function R(B,z,P){B.ior.value=z.ior,z.sheen>0&&(B.sheenColor.value.copy(z.sheenColor).multiplyScalar(z.sheen),B.sheenRoughness.value=z.sheenRoughness,z.sheenColorMap&&(B.sheenColorMap.value=z.sheenColorMap,n(z.sheenColorMap,B.sheenColorMapTransform)),z.sheenRoughnessMap&&(B.sheenRoughnessMap.value=z.sheenRoughnessMap,n(z.sheenRoughnessMap,B.sheenRoughnessMapTransform))),z.clearcoat>0&&(B.clearcoat.value=z.clearcoat,B.clearcoatRoughness.value=z.clearcoatRoughness,z.clearcoatMap&&(B.clearcoatMap.value=z.clearcoatMap,n(z.clearcoatMap,B.clearcoatMapTransform)),z.clearcoatRoughnessMap&&(B.clearcoatRoughnessMap.value=z.clearcoatRoughnessMap,n(z.clearcoatRoughnessMap,B.clearcoatRoughnessMapTransform)),z.clearcoatNormalMap&&(B.clearcoatNormalMap.value=z.clearcoatNormalMap,n(z.clearcoatNormalMap,B.clearcoatNormalMapTransform),B.clearcoatNormalScale.value.copy(z.clearcoatNormalScale),z.side===Is&&B.clearcoatNormalScale.value.negate())),z.iridescence>0&&(B.iridescence.value=z.iridescence,B.iridescenceIOR.value=z.iridescenceIOR,B.iridescenceThicknessMinimum.value=z.iridescenceThicknessRange[0],B.iridescenceThicknessMaximum.value=z.iridescenceThicknessRange[1],z.iridescenceMap&&(B.iridescenceMap.value=z.iridescenceMap,n(z.iridescenceMap,B.iridescenceMapTransform)),z.iridescenceThicknessMap&&(B.iridescenceThicknessMap.value=z.iridescenceThicknessMap,n(z.iridescenceThicknessMap,B.iridescenceThicknessMapTransform))),z.transmission>0&&(B.transmission.value=z.transmission,B.transmissionSamplerMap.value=P.texture,B.transmissionSamplerSize.value.set(P.width,P.height),z.transmissionMap&&(B.transmissionMap.value=z.transmissionMap,n(z.transmissionMap,B.transmissionMapTransform)),B.thickness.value=z.thickness,z.thicknessMap&&(B.thicknessMap.value=z.thicknessMap,n(z.thicknessMap,B.thicknessMapTransform)),B.attenuationDistance.value=z.attenuationDistance,B.attenuationColor.value.copy(z.attenuationColor)),z.anisotropy>0&&(B.anisotropyVector.value.set(z.anisotropy*Math.cos(z.anisotropyRotation),z.anisotropy*Math.sin(z.anisotropyRotation)),z.anisotropyMap&&(B.anisotropyMap.value=z.anisotropyMap,n(z.anisotropyMap,B.anisotropyMapTransform))),B.specularIntensity.value=z.specularIntensity,B.specularColor.value.copy(z.specularColor),z.specularColorMap&&(B.specularColorMap.value=z.specularColorMap,n(z.specularColorMap,B.specularColorMapTransform)),z.specularIntensityMap&&(B.specularIntensityMap.value=z.specularIntensityMap,n(z.specularIntensityMap,B.specularIntensityMapTransform))}function j(B,z){z.matcap&&(B.matcap.value=z.matcap)}function F(B,z){const P=e.get(z).light;B.referencePosition.value.setFromMatrixPosition(P.matrixWorld),B.nearDistance.value=P.shadow.camera.near,B.farDistance.value=P.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function N6e(t,e,n,r){let i={},o={},u=[];const d=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function m(P,W){const Z=W.program;r.uniformBlockBinding(P,Z)}function v(P,W){let Z=i[P.id];Z===void 0&&(j(P),Z=x(P),i[P.id]=Z,P.addEventListener("dispose",B));const ge=W.program;r.updateUBOMapping(P,ge);const X=e.render.frame;o[P.id]!==X&&(M(P),o[P.id]=X)}function x(P){const W=E();P.__bindingPointIndex=W;const Z=t.createBuffer(),ge=P.__size,X=P.usage;return t.bindBuffer(t.UNIFORM_BUFFER,Z),t.bufferData(t.UNIFORM_BUFFER,ge,X),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,W,Z),Z}function E(){for(let P=0;P<d;P++)if(u.indexOf(P)===-1)return u.push(P),P;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function M(P){const W=i[P.id],Z=P.uniforms,ge=P.__cache;t.bindBuffer(t.UNIFORM_BUFFER,W);for(let X=0,pe=Z.length;X<pe;X++){const ye=Array.isArray(Z[X])?Z[X]:[Z[X]];for(let te=0,ie=ye.length;te<ie;te++){const Pe=ye[te];if(R(Pe,X,te,ge)===!0){const _t=Pe.__offset,Tt=Array.isArray(Pe.value)?Pe.value:[Pe.value];let de=0;for(let ot=0;ot<Tt.length;ot++){const Me=Tt[ot],wt=F(Me);typeof Me=="number"||typeof Me=="boolean"?(Pe.__data[0]=Me,t.bufferSubData(t.UNIFORM_BUFFER,_t+de,Pe.__data)):Me.isMatrix3?(Pe.__data[0]=Me.elements[0],Pe.__data[1]=Me.elements[1],Pe.__data[2]=Me.elements[2],Pe.__data[3]=0,Pe.__data[4]=Me.elements[3],Pe.__data[5]=Me.elements[4],Pe.__data[6]=Me.elements[5],Pe.__data[7]=0,Pe.__data[8]=Me.elements[6],Pe.__data[9]=Me.elements[7],Pe.__data[10]=Me.elements[8],Pe.__data[11]=0):(Me.toArray(Pe.__data,de),de+=wt.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,_t,Pe.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function R(P,W,Z,ge){const X=P.value,pe=W+"_"+Z;if(ge[pe]===void 0)return typeof X=="number"||typeof X=="boolean"?ge[pe]=X:ge[pe]=X.clone(),!0;{const ye=ge[pe];if(typeof X=="number"||typeof X=="boolean"){if(ye!==X)return ge[pe]=X,!0}else if(ye.equals(X)===!1)return ye.copy(X),!0}return!1}function j(P){const W=P.uniforms;let Z=0;const ge=16;for(let pe=0,ye=W.length;pe<ye;pe++){const te=Array.isArray(W[pe])?W[pe]:[W[pe]];for(let ie=0,Pe=te.length;ie<Pe;ie++){const _t=te[ie],Tt=Array.isArray(_t.value)?_t.value:[_t.value];for(let de=0,ot=Tt.length;de<ot;de++){const Me=Tt[de],wt=F(Me),Ge=Z%ge;Ge!==0&&ge-Ge<wt.boundary&&(Z+=ge-Ge),_t.__data=new Float32Array(wt.storage/Float32Array.BYTES_PER_ELEMENT),_t.__offset=Z,Z+=wt.storage}}}const X=Z%ge;return X>0&&(Z+=ge-X),P.__size=Z,P.__cache={},this}function F(P){const W={boundary:0,storage:0};return typeof P=="number"||typeof P=="boolean"?(W.boundary=4,W.storage=4):P.isVector2?(W.boundary=8,W.storage=8):P.isVector3||P.isColor?(W.boundary=16,W.storage=12):P.isVector4?(W.boundary=16,W.storage=16):P.isMatrix3?(W.boundary=48,W.storage=48):P.isMatrix4?(W.boundary=64,W.storage=64):P.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",P),W}function B(P){const W=P.target;W.removeEventListener("dispose",B);const Z=u.indexOf(W.__bindingPointIndex);u.splice(Z,1),t.deleteBuffer(i[W.id]),delete i[W.id],delete o[W.id]}function z(){for(const P in i)t.deleteBuffer(i[P]);u=[],i={},o={}}return{bind:m,update:v,dispose:z}}class T7{constructor(e={}){const{canvas:n=A5e(),context:r=null,depth:i=!0,stencil:o=!0,alpha:u=!1,antialias:d=!1,premultipliedAlpha:m=!0,preserveDrawingBuffer:v=!1,powerPreference:x="default",failIfMajorPerformanceCaveat:E=!1}=e;this.isWebGLRenderer=!0;let M;r!==null?M=r.getContextAttributes().alpha:M=u;const R=new Uint32Array(4),j=new Int32Array(4);let F=null,B=null;const z=[],P=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=rs,this._useLegacyLights=!1,this.toneMapping=Vm,this.toneMappingExposure=1;const W=this;let Z=!1,ge=0,X=0,pe=null,ye=-1,te=null;const ie=new Ar,Pe=new Ar;let _t=null;const Tt=new xn(0);let de=0,ot=n.width,Me=n.height,wt=1,Ge=null,it=null;const Qe=new Ar(0,0,ot,Me),ut=new Ar(0,0,ot,Me);let je=!1;const bt=new E7;let Fe=!1,at=!1,Ot=null;const Gt=new Bn,tn=new cn,Kt=new Be,Tn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function nn(){return pe===null?wt:1}let He=r;function jn(be,Ze){for(let yt=0;yt<be.length;yt++){const gt=be[yt],pt=n.getContext(gt,Ze);if(pt!==null)return pt}return null}try{const be={alpha:!0,depth:i,stencil:o,antialias:d,premultipliedAlpha:m,preserveDrawingBuffer:v,powerPreference:x,failIfMajorPerformanceCaveat:E};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${iM}`),n.addEventListener("webglcontextlost",pn,!1),n.addEventListener("webglcontextrestored",Te,!1),n.addEventListener("webglcontextcreationerror",Ht,!1),He===null){const Ze=["webgl2","webgl","experimental-webgl"];if(W.isWebGL1Renderer===!0&&Ze.shift(),He=jn(Ze,be),He===null)throw jn(Ze)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&He instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),He.getShaderPrecisionFormat===void 0&&(He.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(be){throw console.error("THREE.WebGLRenderer: "+be.message),be}let an,dn,on,zr,kn,Se,he,dt,Nt,Ft,At,gn,Jt,ln,Dn,Xn,Bt,gr,sr,Cn,Mn,rn,Un,Ae;function Wt(){an=new GVe(He),dn=new BVe(He,an,e),an.init(dn),rn=new M6e(He,an,dn),on=new P6e(He,an,dn),zr=new KVe(He),kn=new p6e,Se=new T6e(He,an,on,kn,dn,rn,zr),he=new zVe(W),dt=new HVe(W),Nt=new t4e(He,dn),Un=new NVe(He,an,Nt,dn),Ft=new WVe(He,Nt,zr,Un),At=new ZVe(He,Ft,Nt,zr),sr=new YVe(He,dn,Se),Xn=new UVe(kn),gn=new h6e(W,he,dt,an,dn,Un,Xn),Jt=new L6e(W,kn),ln=new m6e,Dn=new w6e(an,dn),gr=new LVe(W,he,dt,on,At,M,m),Bt=new C6e(W,At,dn),Ae=new N6e(He,zr,dn,on),Cn=new FVe(He,an,zr,dn),Mn=new $Ve(He,an,zr,dn),zr.programs=gn.programs,W.capabilities=dn,W.extensions=an,W.properties=kn,W.renderLists=ln,W.shadowMap=Bt,W.state=on,W.info=zr}Wt();const Yt=new O6e(W,He);this.xr=Yt,this.getContext=function(){return He},this.getContextAttributes=function(){return He.getContextAttributes()},this.forceContextLoss=function(){const be=an.get("WEBGL_lose_context");be&&be.loseContext()},this.forceContextRestore=function(){const be=an.get("WEBGL_lose_context");be&&be.restoreContext()},this.getPixelRatio=function(){return wt},this.setPixelRatio=function(be){be!==void 0&&(wt=be,this.setSize(ot,Me,!1))},this.getSize=function(be){return be.set(ot,Me)},this.setSize=function(be,Ze,yt=!0){if(Yt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ot=be,Me=Ze,n.width=Math.floor(be*wt),n.height=Math.floor(Ze*wt),yt===!0&&(n.style.width=be+"px",n.style.height=Ze+"px"),this.setViewport(0,0,be,Ze)},this.getDrawingBufferSize=function(be){return be.set(ot*wt,Me*wt).floor()},this.setDrawingBufferSize=function(be,Ze,yt){ot=be,Me=Ze,wt=yt,n.width=Math.floor(be*yt),n.height=Math.floor(Ze*yt),this.setViewport(0,0,be,Ze)},this.getCurrentViewport=function(be){return be.copy(ie)},this.getViewport=function(be){return be.copy(Qe)},this.setViewport=function(be,Ze,yt,gt){be.isVector4?Qe.set(be.x,be.y,be.z,be.w):Qe.set(be,Ze,yt,gt),on.viewport(ie.copy(Qe).multiplyScalar(wt).floor())},this.getScissor=function(be){return be.copy(ut)},this.setScissor=function(be,Ze,yt,gt){be.isVector4?ut.set(be.x,be.y,be.z,be.w):ut.set(be,Ze,yt,gt),on.scissor(Pe.copy(ut).multiplyScalar(wt).floor())},this.getScissorTest=function(){return je},this.setScissorTest=function(be){on.setScissorTest(je=be)},this.setOpaqueSort=function(be){Ge=be},this.setTransparentSort=function(be){it=be},this.getClearColor=function(be){return be.copy(gr.getClearColor())},this.setClearColor=function(){gr.setClearColor.apply(gr,arguments)},this.getClearAlpha=function(){return gr.getClearAlpha()},this.setClearAlpha=function(){gr.setClearAlpha.apply(gr,arguments)},this.clear=function(be=!0,Ze=!0,yt=!0){let gt=0;if(be){let pt=!1;if(pe!==null){const un=pe.texture.format;pt=un===RSe||un===ISe||un===ASe}if(pt){const un=pe.texture.type,Sn=un===_l||un===Qh||un===y7||un===jm||un===MSe||un===kSe,Nn=gr.getClearColor(),Hn=gr.getClearAlpha(),rr=Nn.r,qn=Nn.g,Fn=Nn.b;Sn?(R[0]=rr,R[1]=qn,R[2]=Fn,R[3]=Hn,He.clearBufferuiv(He.COLOR,0,R)):(j[0]=rr,j[1]=qn,j[2]=Fn,j[3]=Hn,He.clearBufferiv(He.COLOR,0,j))}else gt|=He.COLOR_BUFFER_BIT}Ze&&(gt|=He.DEPTH_BUFFER_BIT),yt&&(gt|=He.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),He.clear(gt)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",pn,!1),n.removeEventListener("webglcontextrestored",Te,!1),n.removeEventListener("webglcontextcreationerror",Ht,!1),ln.dispose(),Dn.dispose(),kn.dispose(),he.dispose(),dt.dispose(),At.dispose(),Un.dispose(),Ae.dispose(),gn.dispose(),Yt.dispose(),Yt.removeEventListener("sessionstart",Pr),Yt.removeEventListener("sessionend",Zn),Ot&&(Ot.dispose(),Ot=null),ri.stop()};function pn(be){be.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Z=!0}function Te(){console.log("THREE.WebGLRenderer: Context Restored."),Z=!1;const be=zr.autoReset,Ze=Bt.enabled,yt=Bt.autoUpdate,gt=Bt.needsUpdate,pt=Bt.type;Wt(),zr.autoReset=be,Bt.enabled=Ze,Bt.autoUpdate=yt,Bt.needsUpdate=gt,Bt.type=pt}function Ht(be){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",be.statusMessage)}function Dt(be){const Ze=be.target;Ze.removeEventListener("dispose",Dt),fn(Ze)}function fn(be){On(be),kn.remove(be)}function On(be){const Ze=kn.get(be).programs;Ze!==void 0&&(Ze.forEach(function(yt){gn.releaseProgram(yt)}),be.isShaderMaterial&&gn.releaseShaderCache(be))}this.renderBufferDirect=function(be,Ze,yt,gt,pt,un){Ze===null&&(Ze=Tn);const Sn=pt.isMesh&&pt.matrixWorld.determinant()<0,Nn=lg(be,Ze,yt,gt,pt);on.setMaterial(gt,Sn);let Hn=yt.index,rr=1;if(gt.wireframe===!0){if(Hn=Ft.getWireframeAttribute(yt),Hn===void 0)return;rr=2}const qn=yt.drawRange,Fn=yt.attributes.position;let wr=qn.start*rr,Ds=(qn.start+qn.count)*rr;un!==null&&(wr=Math.max(wr,un.start*rr),Ds=Math.min(Ds,(un.start+un.count)*rr)),Hn!==null?(wr=Math.max(wr,0),Ds=Math.min(Ds,Hn.count)):Fn!=null&&(wr=Math.max(wr,0),Ds=Math.min(Ds,Fn.count));const ci=Ds-wr;if(ci<0||ci===1/0)return;Un.setup(pt,gt,Nn,yt,Hn);let Io,Vr=Cn;if(Hn!==null&&(Io=Nt.get(Hn),Vr=Mn,Vr.setIndex(Io)),pt.isMesh)gt.wireframe===!0?(on.setLineWidth(gt.wireframeLinewidth*nn()),Vr.setMode(He.LINES)):Vr.setMode(He.TRIANGLES);else if(pt.isLine){let Kn=gt.linewidth;Kn===void 0&&(Kn=1),on.setLineWidth(Kn*nn()),pt.isLineSegments?Vr.setMode(He.LINES):pt.isLineLoop?Vr.setMode(He.LINE_LOOP):Vr.setMode(He.LINE_STRIP)}else pt.isPoints?Vr.setMode(He.POINTS):pt.isSprite&&Vr.setMode(He.TRIANGLES);if(pt.isBatchedMesh)Vr.renderMultiDraw(pt._multiDrawStarts,pt._multiDrawCounts,pt._multiDrawCount);else if(pt.isInstancedMesh)Vr.renderInstances(wr,ci,pt.count);else if(yt.isInstancedBufferGeometry){const Kn=yt._maxInstanceCount!==void 0?yt._maxInstanceCount:1/0,Mc=Math.min(yt.instanceCount,Kn);Vr.renderInstances(wr,ci,Mc)}else Vr.render(wr,ci)};function ur(be,Ze,yt){be.transparent===!0&&be.side===xa&&be.forceSinglePass===!1?(be.side=Is,be.needsUpdate=!0,ta(be,Ze,yt),be.side=kd,be.needsUpdate=!0,ta(be,Ze,yt),be.side=xa):ta(be,Ze,yt)}this.compile=function(be,Ze,yt=null){yt===null&&(yt=be),B=Dn.get(yt),B.init(),P.push(B),yt.traverseVisible(function(pt){pt.isLight&&pt.layers.test(Ze.layers)&&(B.pushLight(pt),pt.castShadow&&B.pushShadow(pt))}),be!==yt&&be.traverseVisible(function(pt){pt.isLight&&pt.layers.test(Ze.layers)&&(B.pushLight(pt),pt.castShadow&&B.pushShadow(pt))}),B.setupLights(W._useLegacyLights);const gt=new Set;return be.traverse(function(pt){const un=pt.material;if(un)if(Array.isArray(un))for(let Sn=0;Sn<un.length;Sn++){const Nn=un[Sn];ur(Nn,yt,pt),gt.add(Nn)}else ur(un,yt,pt),gt.add(un)}),P.pop(),B=null,gt},this.compileAsync=function(be,Ze,yt=null){const gt=this.compile(be,Ze,yt);return new Promise(pt=>{function un(){if(gt.forEach(function(Sn){kn.get(Sn).currentProgram.isReady()&&gt.delete(Sn)}),gt.size===0){pt(be);return}setTimeout(un,10)}an.get("KHR_parallel_shader_compile")!==null?un():setTimeout(un,10)})};let or=null;function hr(be){or&&or(be)}function Pr(){ri.stop()}function Zn(){ri.start()}const ri=new jSe;ri.setAnimationLoop(hr),typeof self<"u"&&ri.setContext(self),this.setAnimationLoop=function(be){or=be,Yt.setAnimationLoop(be),be===null?ri.stop():ri.start()},Yt.addEventListener("sessionstart",Pr),Yt.addEventListener("sessionend",Zn),this.render=function(be,Ze){if(Ze!==void 0&&Ze.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Z===!0)return;be.matrixWorldAutoUpdate===!0&&be.updateMatrixWorld(),Ze.parent===null&&Ze.matrixWorldAutoUpdate===!0&&Ze.updateMatrixWorld(),Yt.enabled===!0&&Yt.isPresenting===!0&&(Yt.cameraAutoUpdate===!0&&Yt.updateCamera(Ze),Ze=Yt.getCamera()),be.isScene===!0&&be.onBeforeRender(W,be,Ze,pe),B=Dn.get(be,P.length),B.init(),P.push(B),Gt.multiplyMatrices(Ze.projectionMatrix,Ze.matrixWorldInverse),bt.setFromProjectionMatrix(Gt),at=this.localClippingEnabled,Fe=Xn.init(this.clippingPlanes,at),F=ln.get(be,z.length),F.init(),z.push(F),Qi(be,Ze,0,W.sortObjects),F.finish(),W.sortObjects===!0&&F.sort(Ge,it),this.info.render.frame++,Fe===!0&&Xn.beginShadows();const yt=B.state.shadowsArray;if(Bt.render(yt,be,Ze),Fe===!0&&Xn.endShadows(),this.info.autoReset===!0&&this.info.reset(),(Yt.enabled===!1||Yt.isPresenting===!1||Yt.hasDepthSensing()===!1)&&gr.render(F,be),B.setupLights(W._useLegacyLights),Ze.isArrayCamera){const gt=Ze.cameras;for(let pt=0,un=gt.length;pt<un;pt++){const Sn=gt[pt];Pc(F,be,Sn,Sn.viewport)}}else Pc(F,be,Ze);pe!==null&&(Se.updateMultisampleRenderTarget(pe),Se.updateRenderTargetMipmap(pe)),be.isScene===!0&&be.onAfterRender(W,be,Ze),Un.resetDefaultState(),ye=-1,te=null,P.pop(),P.length>0?B=P[P.length-1]:B=null,z.pop(),z.length>0?F=z[z.length-1]:F=null};function Qi(be,Ze,yt,gt){if(be.visible===!1)return;if(be.layers.test(Ze.layers)){if(be.isGroup)yt=be.renderOrder;else if(be.isLOD)be.autoUpdate===!0&&be.update(Ze);else if(be.isLight)B.pushLight(be),be.castShadow&&B.pushShadow(be);else if(be.isSprite){if(!be.frustumCulled||bt.intersectsSprite(be)){gt&&Kt.setFromMatrixPosition(be.matrixWorld).applyMatrix4(Gt);const Sn=At.update(be),Nn=be.material;Nn.visible&&F.push(be,Sn,Nn,yt,Kt.z,null)}}else if((be.isMesh||be.isLine||be.isPoints)&&(!be.frustumCulled||bt.intersectsObject(be))){const Sn=At.update(be),Nn=be.material;if(gt&&(be.boundingSphere!==void 0?(be.boundingSphere===null&&be.computeBoundingSphere(),Kt.copy(be.boundingSphere.center)):(Sn.boundingSphere===null&&Sn.computeBoundingSphere(),Kt.copy(Sn.boundingSphere.center)),Kt.applyMatrix4(be.matrixWorld).applyMatrix4(Gt)),Array.isArray(Nn)){const Hn=Sn.groups;for(let rr=0,qn=Hn.length;rr<qn;rr++){const Fn=Hn[rr],wr=Nn[Fn.materialIndex];wr&&wr.visible&&F.push(be,Sn,wr,yt,Kt.z,Fn)}}else Nn.visible&&F.push(be,Sn,Nn,yt,Kt.z,null)}}const un=be.children;for(let Sn=0,Nn=un.length;Sn<Nn;Sn++)Qi(un[Sn],Ze,yt,gt)}function Pc(be,Ze,yt,gt){const pt=be.opaque,un=be.transmissive,Sn=be.transparent;B.setupLightsView(yt),Fe===!0&&Xn.setGlobalState(W.clippingPlanes,yt),un.length>0&&Ld(pt,un,Ze,yt),gt&&on.viewport(ie.copy(gt)),pt.length>0&&Cu(pt,Ze,yt),un.length>0&&Cu(un,Ze,yt),Sn.length>0&&Cu(Sn,Ze,yt),on.buffers.depth.setTest(!0),on.buffers.depth.setMask(!0),on.buffers.color.setMask(!0),on.setPolygonOffset(!1)}function Ld(be,Ze,yt,gt){if((yt.isScene===!0?yt.overrideMaterial:null)!==null)return;const un=dn.isWebGL2;Ot===null&&(Ot=new Sl(1,1,{generateMipmaps:!0,type:an.has("EXT_color_buffer_half_float")?MT:_l,minFilter:g0,samples:un?4:0})),W.getDrawingBufferSize(tn),un?Ot.setSize(tn.x,tn.y):Ot.setSize(LN(tn.x),LN(tn.y));const Sn=W.getRenderTarget();W.setRenderTarget(Ot),W.getClearColor(Tt),de=W.getClearAlpha(),de<1&&W.setClearColor(16777215,.5),W.clear();const Nn=W.toneMapping;W.toneMapping=Vm,Cu(be,yt,gt),Se.updateMultisampleRenderTarget(Ot),Se.updateRenderTargetMipmap(Ot);let Hn=!1;for(let rr=0,qn=Ze.length;rr<qn;rr++){const Fn=Ze[rr],wr=Fn.object,Ds=Fn.geometry,ci=Fn.material,Io=Fn.group;if(ci.side===xa&&wr.layers.test(gt.layers)){const Vr=ci.side;ci.side=Is,ci.needsUpdate=!0,_p(wr,yt,gt,Ds,ci,Io),ci.side=Vr,ci.needsUpdate=!0,Hn=!0}}Hn===!0&&(Se.updateMultisampleRenderTarget(Ot),Se.updateRenderTargetMipmap(Ot)),W.setRenderTarget(Sn),W.setClearColor(Tt,de),W.toneMapping=Nn}function Cu(be,Ze,yt){const gt=Ze.isScene===!0?Ze.overrideMaterial:null;for(let pt=0,un=be.length;pt<un;pt++){const Sn=be[pt],Nn=Sn.object,Hn=Sn.geometry,rr=gt===null?Sn.material:gt,qn=Sn.group;Nn.layers.test(yt.layers)&&_p(Nn,Ze,yt,Hn,rr,qn)}}function _p(be,Ze,yt,gt,pt,un){be.onBeforeRender(W,Ze,yt,gt,pt,un),be.modelViewMatrix.multiplyMatrices(yt.matrixWorldInverse,be.matrixWorld),be.normalMatrix.getNormalMatrix(be.modelViewMatrix),pt.onBeforeRender(W,Ze,yt,gt,be,un),pt.transparent===!0&&pt.side===xa&&pt.forceSinglePass===!1?(pt.side=Is,pt.needsUpdate=!0,W.renderBufferDirect(yt,Ze,gt,pt,be,un),pt.side=kd,pt.needsUpdate=!0,W.renderBufferDirect(yt,Ze,gt,pt,be,un),pt.side=xa):W.renderBufferDirect(yt,Ze,gt,pt,be,un),be.onAfterRender(W,Ze,yt,gt,pt,un)}function ta(be,Ze,yt){Ze.isScene!==!0&&(Ze=Tn);const gt=kn.get(be),pt=B.state.lights,un=B.state.shadowsArray,Sn=pt.state.version,Nn=gn.getParameters(be,pt.state,un,Ze,yt),Hn=gn.getProgramCacheKey(Nn);let rr=gt.programs;gt.environment=be.isMeshStandardMaterial?Ze.environment:null,gt.fog=Ze.fog,gt.envMap=(be.isMeshStandardMaterial?dt:he).get(be.envMap||gt.environment),rr===void 0&&(be.addEventListener("dispose",Dt),rr=new Map,gt.programs=rr);let qn=rr.get(Hn);if(qn!==void 0){if(gt.currentProgram===qn&&gt.lightsStateVersion===Sn)return Nd(be,Nn),qn}else Nn.uniforms=gn.getUniforms(be),be.onBuild(yt,Nn,W),be.onBeforeCompile(Nn,W),qn=gn.acquireProgram(Nn,Hn),rr.set(Hn,qn),gt.uniforms=Nn.uniforms;const Fn=gt.uniforms;return(!be.isShaderMaterial&&!be.isRawShaderMaterial||be.clipping===!0)&&(Fn.clippingPlanes=Xn.uniform),Nd(be,Nn),gt.needsLights=wp(be),gt.lightsStateVersion=Sn,gt.needsLights&&(Fn.ambientLightColor.value=pt.state.ambient,Fn.lightProbe.value=pt.state.probe,Fn.directionalLights.value=pt.state.directional,Fn.directionalLightShadows.value=pt.state.directionalShadow,Fn.spotLights.value=pt.state.spot,Fn.spotLightShadows.value=pt.state.spotShadow,Fn.rectAreaLights.value=pt.state.rectArea,Fn.ltc_1.value=pt.state.rectAreaLTC1,Fn.ltc_2.value=pt.state.rectAreaLTC2,Fn.pointLights.value=pt.state.point,Fn.pointLightShadows.value=pt.state.pointShadow,Fn.hemisphereLights.value=pt.state.hemi,Fn.directionalShadowMap.value=pt.state.directionalShadowMap,Fn.directionalShadowMatrix.value=pt.state.directionalShadowMatrix,Fn.spotShadowMap.value=pt.state.spotShadowMap,Fn.spotLightMatrix.value=pt.state.spotLightMatrix,Fn.spotLightMap.value=pt.state.spotLightMap,Fn.pointShadowMap.value=pt.state.pointShadowMap,Fn.pointShadowMatrix.value=pt.state.pointShadowMatrix),gt.currentProgram=qn,gt.uniformsList=null,qn}function Tc(be){if(be.uniformsList===null){const Ze=be.currentProgram.getUniforms();be.uniformsList=WL.seqWithValue(Ze.seq,be.uniforms)}return be.uniformsList}function Nd(be,Ze){const yt=kn.get(be);yt.outputColorSpace=Ze.outputColorSpace,yt.batching=Ze.batching,yt.instancing=Ze.instancing,yt.instancingColor=Ze.instancingColor,yt.skinning=Ze.skinning,yt.morphTargets=Ze.morphTargets,yt.morphNormals=Ze.morphNormals,yt.morphColors=Ze.morphColors,yt.morphTargetsCount=Ze.morphTargetsCount,yt.numClippingPlanes=Ze.numClippingPlanes,yt.numIntersection=Ze.numClipIntersection,yt.vertexAlphas=Ze.vertexAlphas,yt.vertexTangents=Ze.vertexTangents,yt.toneMapping=Ze.toneMapping}function lg(be,Ze,yt,gt,pt){Ze.isScene!==!0&&(Ze=Tn),Se.resetTextureUnits();const un=Ze.fog,Sn=gt.isMeshStandardMaterial?Ze.environment:null,Nn=pe===null?W.outputColorSpace:pe.isXRRenderTarget===!0?pe.texture.colorSpace:fp,Hn=(gt.isMeshStandardMaterial?dt:he).get(gt.envMap||Sn),rr=gt.vertexColors===!0&&!!yt.attributes.color&&yt.attributes.color.itemSize===4,qn=!!yt.attributes.tangent&&(!!gt.normalMap||gt.anisotropy>0),Fn=!!yt.morphAttributes.position,wr=!!yt.morphAttributes.normal,Ds=!!yt.morphAttributes.color;let ci=Vm;gt.toneMapped&&(pe===null||pe.isXRRenderTarget===!0)&&(ci=W.toneMapping);const Io=yt.morphAttributes.position||yt.morphAttributes.normal||yt.morphAttributes.color,Vr=Io!==void 0?Io.length:0,Kn=kn.get(gt),Mc=B.state.lights;if(Fe===!0&&(at===!0||be!==te)){const Os=be===te&&gt.id===ye;Xn.setState(gt,be,Os)}let jr=!1;gt.version===Kn.__version?(Kn.needsLights&&Kn.lightsStateVersion!==Mc.state.version||Kn.outputColorSpace!==Nn||pt.isBatchedMesh&&Kn.batching===!1||!pt.isBatchedMesh&&Kn.batching===!0||pt.isInstancedMesh&&Kn.instancing===!1||!pt.isInstancedMesh&&Kn.instancing===!0||pt.isSkinnedMesh&&Kn.skinning===!1||!pt.isSkinnedMesh&&Kn.skinning===!0||pt.isInstancedMesh&&Kn.instancingColor===!0&&pt.instanceColor===null||pt.isInstancedMesh&&Kn.instancingColor===!1&&pt.instanceColor!==null||Kn.envMap!==Hn||gt.fog===!0&&Kn.fog!==un||Kn.numClippingPlanes!==void 0&&(Kn.numClippingPlanes!==Xn.numPlanes||Kn.numIntersection!==Xn.numIntersection)||Kn.vertexAlphas!==rr||Kn.vertexTangents!==qn||Kn.morphTargets!==Fn||Kn.morphNormals!==wr||Kn.morphColors!==Ds||Kn.toneMapping!==ci||dn.isWebGL2===!0&&Kn.morphTargetsCount!==Vr)&&(jr=!0):(jr=!0,Kn.__version=gt.version);let Ro=Kn.currentProgram;jr===!0&&(Ro=ta(gt,Ze,pt));let Pu=!1,oo=!1,Il=!1;const yi=Ro.getUniforms(),Ra=Kn.uniforms;if(on.useProgram(Ro.program)&&(Pu=!0,oo=!0,Il=!0),gt.id!==ye&&(ye=gt.id,oo=!0),Pu||te!==be){yi.setValue(He,"projectionMatrix",be.projectionMatrix),yi.setValue(He,"viewMatrix",be.matrixWorldInverse);const Os=yi.map.cameraPosition;Os!==void 0&&Os.setValue(He,Kt.setFromMatrixPosition(be.matrixWorld)),dn.logarithmicDepthBuffer&&yi.setValue(He,"logDepthBufFC",2/(Math.log(be.far+1)/Math.LN2)),(gt.isMeshPhongMaterial||gt.isMeshToonMaterial||gt.isMeshLambertMaterial||gt.isMeshBasicMaterial||gt.isMeshStandardMaterial||gt.isShaderMaterial)&&yi.setValue(He,"isOrthographic",be.isOrthographicCamera===!0),te!==be&&(te=be,oo=!0,Il=!0)}if(pt.isSkinnedMesh){yi.setOptional(He,pt,"bindMatrix"),yi.setOptional(He,pt,"bindMatrixInverse");const Os=pt.skeleton;Os&&(dn.floatVertexTextures?(Os.boneTexture===null&&Os.computeBoneTexture(),yi.setValue(He,"boneTexture",Os.boneTexture,Se)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}pt.isBatchedMesh&&(yi.setOptional(He,pt,"batchingTexture"),yi.setValue(He,"batchingTexture",pt._matricesTexture,Se));const kc=yt.morphAttributes;if((kc.position!==void 0||kc.normal!==void 0||kc.color!==void 0&&dn.isWebGL2===!0)&&sr.update(pt,yt,Ro),(oo||Kn.receiveShadow!==pt.receiveShadow)&&(Kn.receiveShadow=pt.receiveShadow,yi.setValue(He,"receiveShadow",pt.receiveShadow)),gt.isMeshGouraudMaterial&&gt.envMap!==null&&(Ra.envMap.value=Hn,Ra.flipEnvMap.value=Hn.isCubeTexture&&Hn.isRenderTargetTexture===!1?-1:1),oo&&(yi.setValue(He,"toneMappingExposure",W.toneMappingExposure),Kn.needsLights&&el(Ra,Il),un&&gt.fog===!0&&Jt.refreshFogUniforms(Ra,un),Jt.refreshMaterialUniforms(Ra,gt,wt,Me,Ot),WL.upload(He,Tc(Kn),Ra,Se)),gt.isShaderMaterial&&gt.uniformsNeedUpdate===!0&&(WL.upload(He,Tc(Kn),Ra,Se),gt.uniformsNeedUpdate=!1),gt.isSpriteMaterial&&yi.setValue(He,"center",pt.center),yi.setValue(He,"modelViewMatrix",pt.modelViewMatrix),yi.setValue(He,"normalMatrix",pt.normalMatrix),yi.setValue(He,"modelMatrix",pt.matrixWorld),gt.isShaderMaterial||gt.isRawShaderMaterial){const Os=gt.uniformsGroups;for(let Ac=0,Fd=Os.length;Ac<Fd;Ac++)if(dn.isWebGL2){const Da=Os[Ac];Ae.update(Da,Ro),Ae.bind(Da,Ro)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ro}function el(be,Ze){be.ambientLightColor.needsUpdate=Ze,be.lightProbe.needsUpdate=Ze,be.directionalLights.needsUpdate=Ze,be.directionalLightShadows.needsUpdate=Ze,be.pointLights.needsUpdate=Ze,be.pointLightShadows.needsUpdate=Ze,be.spotLights.needsUpdate=Ze,be.spotLightShadows.needsUpdate=Ze,be.rectAreaLights.needsUpdate=Ze,be.hemisphereLights.needsUpdate=Ze}function wp(be){return be.isMeshLambertMaterial||be.isMeshToonMaterial||be.isMeshPhongMaterial||be.isMeshStandardMaterial||be.isShadowMaterial||be.isShaderMaterial&&be.lights===!0}this.getActiveCubeFace=function(){return ge},this.getActiveMipmapLevel=function(){return X},this.getRenderTarget=function(){return pe},this.setRenderTargetTextures=function(be,Ze,yt){kn.get(be.texture).__webglTexture=Ze,kn.get(be.depthTexture).__webglTexture=yt;const gt=kn.get(be);gt.__hasExternalTextures=!0,gt.__hasExternalTextures&&(gt.__autoAllocateDepthBuffer=yt===void 0,gt.__autoAllocateDepthBuffer||an.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),gt.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(be,Ze){const yt=kn.get(be);yt.__webglFramebuffer=Ze,yt.__useDefaultFramebuffer=Ze===void 0},this.setRenderTarget=function(be,Ze=0,yt=0){pe=be,ge=Ze,X=yt;let gt=!0,pt=null,un=!1,Sn=!1;if(be){const Hn=kn.get(be);Hn.__useDefaultFramebuffer!==void 0?(on.bindFramebuffer(He.FRAMEBUFFER,null),gt=!1):Hn.__webglFramebuffer===void 0?Se.setupRenderTarget(be):Hn.__hasExternalTextures&&Se.rebindTextures(be,kn.get(be.texture).__webglTexture,kn.get(be.depthTexture).__webglTexture);const rr=be.texture;(rr.isData3DTexture||rr.isDataArrayTexture||rr.isCompressedArrayTexture)&&(Sn=!0);const qn=kn.get(be).__webglFramebuffer;be.isWebGLCubeRenderTarget?(Array.isArray(qn[Ze])?pt=qn[Ze][yt]:pt=qn[Ze],un=!0):dn.isWebGL2&&be.samples>0&&Se.useMultisampledRTT(be)===!1?pt=kn.get(be).__webglMultisampledFramebuffer:Array.isArray(qn)?pt=qn[yt]:pt=qn,ie.copy(be.viewport),Pe.copy(be.scissor),_t=be.scissorTest}else ie.copy(Qe).multiplyScalar(wt).floor(),Pe.copy(ut).multiplyScalar(wt).floor(),_t=je;if(on.bindFramebuffer(He.FRAMEBUFFER,pt)&&dn.drawBuffers&&gt&&on.drawBuffers(be,pt),on.viewport(ie),on.scissor(Pe),on.setScissorTest(_t),un){const Hn=kn.get(be.texture);He.framebufferTexture2D(He.FRAMEBUFFER,He.COLOR_ATTACHMENT0,He.TEXTURE_CUBE_MAP_POSITIVE_X+Ze,Hn.__webglTexture,yt)}else if(Sn){const Hn=kn.get(be.texture),rr=Ze||0;He.framebufferTextureLayer(He.FRAMEBUFFER,He.COLOR_ATTACHMENT0,Hn.__webglTexture,yt||0,rr)}ye=-1},this.readRenderTargetPixels=function(be,Ze,yt,gt,pt,un,Sn){if(!(be&&be.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Nn=kn.get(be).__webglFramebuffer;if(be.isWebGLCubeRenderTarget&&Sn!==void 0&&(Nn=Nn[Sn]),Nn){on.bindFramebuffer(He.FRAMEBUFFER,Nn);try{const Hn=be.texture,rr=Hn.format,qn=Hn.type;if(rr!==pu&&rn.convert(rr)!==He.getParameter(He.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Fn=qn===MT&&(an.has("EXT_color_buffer_half_float")||dn.isWebGL2&&an.has("EXT_color_buffer_float"));if(qn!==_l&&rn.convert(qn)!==He.getParameter(He.IMPLEMENTATION_COLOR_READ_TYPE)&&!(qn===Sd&&(dn.isWebGL2||an.has("OES_texture_float")||an.has("WEBGL_color_buffer_float")))&&!Fn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ze>=0&&Ze<=be.width-gt&&yt>=0&&yt<=be.height-pt&&He.readPixels(Ze,yt,gt,pt,rn.convert(rr),rn.convert(qn),un)}finally{const Hn=pe!==null?kn.get(pe).__webglFramebuffer:null;on.bindFramebuffer(He.FRAMEBUFFER,Hn)}}},this.copyFramebufferToTexture=function(be,Ze,yt=0){const gt=Math.pow(2,-yt),pt=Math.floor(Ze.image.width*gt),un=Math.floor(Ze.image.height*gt);Se.setTexture2D(Ze,0),He.copyTexSubImage2D(He.TEXTURE_2D,yt,0,0,be.x,be.y,pt,un),on.unbindTexture()},this.copyTextureToTexture=function(be,Ze,yt,gt=0){const pt=Ze.image.width,un=Ze.image.height,Sn=rn.convert(yt.format),Nn=rn.convert(yt.type);Se.setTexture2D(yt,0),He.pixelStorei(He.UNPACK_FLIP_Y_WEBGL,yt.flipY),He.pixelStorei(He.UNPACK_PREMULTIPLY_ALPHA_WEBGL,yt.premultiplyAlpha),He.pixelStorei(He.UNPACK_ALIGNMENT,yt.unpackAlignment),Ze.isDataTexture?He.texSubImage2D(He.TEXTURE_2D,gt,be.x,be.y,pt,un,Sn,Nn,Ze.image.data):Ze.isCompressedTexture?He.compressedTexSubImage2D(He.TEXTURE_2D,gt,be.x,be.y,Ze.mipmaps[0].width,Ze.mipmaps[0].height,Sn,Ze.mipmaps[0].data):He.texSubImage2D(He.TEXTURE_2D,gt,be.x,be.y,Sn,Nn,Ze.image),gt===0&&yt.generateMipmaps&&He.generateMipmap(He.TEXTURE_2D),on.unbindTexture()},this.copyTextureToTexture3D=function(be,Ze,yt,gt,pt=0){if(W.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const un=be.max.x-be.min.x+1,Sn=be.max.y-be.min.y+1,Nn=be.max.z-be.min.z+1,Hn=rn.convert(gt.format),rr=rn.convert(gt.type);let qn;if(gt.isData3DTexture)Se.setTexture3D(gt,0),qn=He.TEXTURE_3D;else if(gt.isDataArrayTexture||gt.isCompressedArrayTexture)Se.setTexture2DArray(gt,0),qn=He.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}He.pixelStorei(He.UNPACK_FLIP_Y_WEBGL,gt.flipY),He.pixelStorei(He.UNPACK_PREMULTIPLY_ALPHA_WEBGL,gt.premultiplyAlpha),He.pixelStorei(He.UNPACK_ALIGNMENT,gt.unpackAlignment);const Fn=He.getParameter(He.UNPACK_ROW_LENGTH),wr=He.getParameter(He.UNPACK_IMAGE_HEIGHT),Ds=He.getParameter(He.UNPACK_SKIP_PIXELS),ci=He.getParameter(He.UNPACK_SKIP_ROWS),Io=He.getParameter(He.UNPACK_SKIP_IMAGES),Vr=yt.isCompressedTexture?yt.mipmaps[pt]:yt.image;He.pixelStorei(He.UNPACK_ROW_LENGTH,Vr.width),He.pixelStorei(He.UNPACK_IMAGE_HEIGHT,Vr.height),He.pixelStorei(He.UNPACK_SKIP_PIXELS,be.min.x),He.pixelStorei(He.UNPACK_SKIP_ROWS,be.min.y),He.pixelStorei(He.UNPACK_SKIP_IMAGES,be.min.z),yt.isDataTexture||yt.isData3DTexture?He.texSubImage3D(qn,pt,Ze.x,Ze.y,Ze.z,un,Sn,Nn,Hn,rr,Vr.data):yt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),He.compressedTexSubImage3D(qn,pt,Ze.x,Ze.y,Ze.z,un,Sn,Nn,Hn,Vr.data)):He.texSubImage3D(qn,pt,Ze.x,Ze.y,Ze.z,un,Sn,Nn,Hn,rr,Vr),He.pixelStorei(He.UNPACK_ROW_LENGTH,Fn),He.pixelStorei(He.UNPACK_IMAGE_HEIGHT,wr),He.pixelStorei(He.UNPACK_SKIP_PIXELS,Ds),He.pixelStorei(He.UNPACK_SKIP_ROWS,ci),He.pixelStorei(He.UNPACK_SKIP_IMAGES,Io),pt===0&&gt.generateMipmaps&&He.generateMipmap(qn),on.unbindTexture()},this.initTexture=function(be){be.isCubeTexture?Se.setTextureCube(be,0):be.isData3DTexture?Se.setTexture3D(be,0):be.isDataArrayTexture||be.isCompressedArrayTexture?Se.setTexture2DArray(be,0):Se.setTexture2D(be,0),on.unbindTexture()},this.resetState=function(){ge=0,X=0,pe=null,on.reset(),Un.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Jh}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===_7?"display-p3":"srgb",n.unpackColorSpace=li.workingColorSpace===PF?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===rs?sp:CF}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===sp?rs:fp}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class F6e extends T7{}F6e.prototype.isWebGL1Renderer=!0;class NN extends qr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}const abe=new Be,lbe=new Ar,ube=new Ar,B6e=new Be,cbe=new Bn,fL=new Be,AG=new W0,dbe=new Bn,IG=new p1;class qSe extends is{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=W0e,this.bindMatrix=new Bn,this.bindMatrixInverse=new Bn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new h1),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,fL),this.boundingBox.expandByPoint(fL)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new W0),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)this.getVertexPosition(r,fL),this.boundingSphere.expandByPoint(fL)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),AG.copy(this.boundingSphere),AG.applyMatrix4(i),e.ray.intersectsSphere(AG)!==!1&&(dbe.copy(i).invert(),IG.copy(e.ray).applyMatrix4(dbe),!(this.boundingBox!==null&&IG.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,IG)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ar,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===W0e?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===XUe?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;lbe.fromBufferAttribute(i.attributes.skinIndex,e),ube.fromBufferAttribute(i.attributes.skinWeight,e),abe.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let o=0;o<4;o++){const u=ube.getComponent(o);if(u!==0){const d=lbe.getComponent(o);cbe.multiplyMatrices(r.bones[d].matrixWorld,r.boneInverses[d]),n.addScaledVector(B6e.copy(abe).applyMatrix4(cbe),u)}}return n.applyMatrix4(this.bindMatrixInverse)}}class MW extends qr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class U6e extends qi{constructor(e=null,n=1,r=1,i,o,u,d,m,v=Po,x=Po,E,M){super(null,u,d,m,v,x,i,o,E,M),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const hbe=new Bn,z6e=new Bn;class M7{constructor(e=[],n=[]){this.uuid=rg(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Bn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new Bn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,u=e.length;o<u;o++){const d=e[o]?e[o].matrixWorld:z6e;hbe.multiplyMatrices(d,n[o]),hbe.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new M7(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new U6e(n,e,e,pu,Sd);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const o=e.bones[r];let u=n[o];u===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),u=new MW),this.bones.push(u),this.boneInverses.push(new Bn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,o=n.length;i<o;i++){const u=n[i];e.bones.push(u.uuid);const d=r[i];e.boneInverses.push(d.toArray())}return e}}class aM extends Ml{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new xn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const pbe=new Be,fbe=new Be,mbe=new Bn,RG=new p1,mL=new W0;class YSe extends qr{constructor(e=new Mo,n=new aM){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,o=n.count;i<o;i++)pbe.fromBufferAttribute(n,i-1),fbe.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=pbe.distanceTo(fbe);e.setAttribute("lineDistance",new ki(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,u=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),mL.copy(r.boundingSphere),mL.applyMatrix4(i),mL.radius+=o,e.ray.intersectsSphere(mL)===!1)return;mbe.copy(i).invert(),RG.copy(e.ray).applyMatrix4(mbe);const d=o/((this.scale.x+this.scale.y+this.scale.z)/3),m=d*d,v=new Be,x=new Be,E=new Be,M=new Be,R=this.isLineSegments?2:1,j=r.index,B=r.attributes.position;if(j!==null){const z=Math.max(0,u.start),P=Math.min(j.count,u.start+u.count);for(let W=z,Z=P-1;W<Z;W+=R){const ge=j.getX(W),X=j.getX(W+1);if(v.fromBufferAttribute(B,ge),x.fromBufferAttribute(B,X),RG.distanceSqToSegment(v,x,M,E)>m)continue;M.applyMatrix4(this.matrixWorld);const ye=e.ray.origin.distanceTo(M);ye<e.near||ye>e.far||n.push({distance:ye,point:E.clone().applyMatrix4(this.matrixWorld),index:W,face:null,faceIndex:null,object:this})}}else{const z=Math.max(0,u.start),P=Math.min(B.count,u.start+u.count);for(let W=z,Z=P-1;W<Z;W+=R){if(v.fromBufferAttribute(B,W),x.fromBufferAttribute(B,W+1),RG.distanceSqToSegment(v,x,M,E)>m)continue;M.applyMatrix4(this.matrixWorld);const X=e.ray.origin.distanceTo(M);X<e.near||X>e.far||n.push({distance:X,point:E.clone().applyMatrix4(this.matrixWorld),index:W,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=i.length;o<u;o++){const d=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}}const gbe=new Be,vbe=new Be;class k7 extends YSe{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,o=n.count;i<o;i+=2)gbe.fromBufferAttribute(n,i),vbe.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+gbe.distanceTo(vbe);e.setAttribute("lineDistance",new ki(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ZSe extends Ml{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new xn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ybe=new Bn,kW=new p1,gL=new W0,vL=new Be;class V6e extends qr{constructor(e=new Mo,n=new ZSe){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,u=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),gL.copy(r.boundingSphere),gL.applyMatrix4(i),gL.radius+=o,e.ray.intersectsSphere(gL)===!1)return;ybe.copy(i).invert(),kW.copy(e.ray).applyMatrix4(ybe);const d=o/((this.scale.x+this.scale.y+this.scale.z)/3),m=d*d,v=r.index,E=r.attributes.position;if(v!==null){const M=Math.max(0,u.start),R=Math.min(v.count,u.start+u.count);for(let j=M,F=R;j<F;j++){const B=v.getX(j);vL.fromBufferAttribute(E,B),bbe(vL,B,m,i,e,n,this)}}else{const M=Math.max(0,u.start),R=Math.min(E.count,u.start+u.count);for(let j=M,F=R;j<F;j++)vL.fromBufferAttribute(E,j),bbe(vL,j,m,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,u=i.length;o<u;o++){const d=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=o}}}}}function bbe(t,e,n,r,i,o,u){const d=kW.distanceSqToPoint(t);if(d<n){const m=new Be;kW.closestPointToPoint(t,m),m.applyMatrix4(r);const v=i.ray.origin.distanceTo(m);if(v<i.near||v>i.far)return;o.push({distance:v,distanceToRay:Math.sqrt(d),point:m,index:e,face:null,object:u})}}class j6e{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),o=0;n.push(0);for(let u=1;u<=e;u++)r=this.getPoint(u/e),o+=r.distanceTo(i),n.push(o),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const o=r.length;let u;n?u=n:u=e*r[o-1];let d=0,m=o-1,v;for(;d<=m;)if(i=Math.floor(d+(m-d)/2),v=r[i]-u,v<0)d=i+1;else if(v>0)m=i-1;else{m=i;break}if(i=m,r[i]===u)return i/(o-1);const x=r[i],M=r[i+1]-x,R=(u-x)/M;return(i+R)/(o-1)}getTangent(e,n){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const u=this.getPoint(i),d=this.getPoint(o),m=n||(u.isVector2?new cn:new Be);return m.copy(d).sub(u).normalize(),m}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new Be,i=[],o=[],u=[],d=new Be,m=new Bn;for(let R=0;R<=e;R++){const j=R/e;i[R]=this.getTangentAt(j,new Be)}o[0]=new Be,u[0]=new Be;let v=Number.MAX_VALUE;const x=Math.abs(i[0].x),E=Math.abs(i[0].y),M=Math.abs(i[0].z);x<=v&&(v=x,r.set(1,0,0)),E<=v&&(v=E,r.set(0,1,0)),M<=v&&r.set(0,0,1),d.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],d),u[0].crossVectors(i[0],o[0]);for(let R=1;R<=e;R++){if(o[R]=o[R-1].clone(),u[R]=u[R-1].clone(),d.crossVectors(i[R-1],i[R]),d.length()>Number.EPSILON){d.normalize();const j=Math.acos(zs(i[R-1].dot(i[R]),-1,1));o[R].applyMatrix4(m.makeRotationAxis(d,j))}u[R].crossVectors(i[R],o[R])}if(n===!0){let R=Math.acos(zs(o[0].dot(o[e]),-1,1));R/=e,i[0].dot(d.crossVectors(o[0],o[e]))>0&&(R=-R);for(let j=1;j<=e;j++)o[j].applyMatrix4(m.makeRotationAxis(i[j],R*j)),u[j].crossVectors(i[j],o[j])}return{tangents:i,normals:o,binormals:u}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class A7 extends Mo{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const o=[],u=[],d=[],m=[],v=new Be,x=new cn;u.push(0,0,0),d.push(0,0,1),m.push(.5,.5);for(let E=0,M=3;E<=n;E++,M+=3){const R=r+E/n*i;v.x=e*Math.cos(R),v.y=e*Math.sin(R),u.push(v.x,v.y,v.z),d.push(0,0,1),x.x=(u[M]/e+1)/2,x.y=(u[M+1]/e+1)/2,m.push(x.x,x.y)}for(let E=1;E<=n;E++)o.push(E,E+1,0);this.setIndex(o),this.setAttribute("position",new ki(u,3)),this.setAttribute("normal",new ki(d,3)),this.setAttribute("uv",new ki(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new A7(e.radius,e.segments,e.thetaStart,e.thetaLength)}}const H6e={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let o=QSe(t,0,i,n,!0);const u=[];if(!o||o.next===o.prev)return u;let d,m,v,x,E,M,R;if(r&&(o=X6e(t,e,o,n)),t.length>80*n){d=v=t[0],m=x=t[1];for(let j=n;j<i;j+=n)E=t[j],M=t[j+1],E<d&&(d=E),M<m&&(m=M),E>v&&(v=E),M>x&&(x=M);R=Math.max(v-d,x-m),R=R!==0?32767/R:0}return IT(o,u,n,d,m,R,0),u}};function QSe(t,e,n,r,i){let o,u;if(i===s8e(t,e,n,r)>0)for(o=e;o<n;o+=r)u=_be(o,t[o],t[o+1],u);else for(o=n-r;o>=e;o-=r)u=_be(o,t[o],t[o+1],u);return u&&AF(u,u.next)&&(DT(u),u=u.next),u}function D0(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(AF(n,n.next)||$i(n.prev,n,n.next)===0)){if(DT(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function IT(t,e,n,r,i,o,u){if(!t)return;!u&&o&&J6e(t,r,i,o);let d=t,m,v;for(;t.prev!==t.next;){if(m=t.prev,v=t.next,o?W6e(t,r,i,o):G6e(t)){e.push(m.i/n|0),e.push(t.i/n|0),e.push(v.i/n|0),DT(t),t=v.next,d=v.next;continue}if(t=v,t===d){u?u===1?(t=$6e(D0(t),e,n),IT(t,e,n,r,i,o,2)):u===2&&K6e(t,e,n,r,i,o):IT(D0(t),e,n,r,i,o,1);break}}}function G6e(t){const e=t.prev,n=t,r=t.next;if($i(e,n,r)>=0)return!1;const i=e.x,o=n.x,u=r.x,d=e.y,m=n.y,v=r.y,x=i<o?i<u?i:u:o<u?o:u,E=d<m?d<v?d:v:m<v?m:v,M=i>o?i>u?i:u:o>u?o:u,R=d>m?d>v?d:v:m>v?m:v;let j=r.next;for(;j!==e;){if(j.x>=x&&j.x<=M&&j.y>=E&&j.y<=R&&Mw(i,d,o,m,u,v,j.x,j.y)&&$i(j.prev,j,j.next)>=0)return!1;j=j.next}return!0}function W6e(t,e,n,r){const i=t.prev,o=t,u=t.next;if($i(i,o,u)>=0)return!1;const d=i.x,m=o.x,v=u.x,x=i.y,E=o.y,M=u.y,R=d<m?d<v?d:v:m<v?m:v,j=x<E?x<M?x:M:E<M?E:M,F=d>m?d>v?d:v:m>v?m:v,B=x>E?x>M?x:M:E>M?E:M,z=AW(R,j,e,n,r),P=AW(F,B,e,n,r);let W=t.prevZ,Z=t.nextZ;for(;W&&W.z>=z&&Z&&Z.z<=P;){if(W.x>=R&&W.x<=F&&W.y>=j&&W.y<=B&&W!==i&&W!==u&&Mw(d,x,m,E,v,M,W.x,W.y)&&$i(W.prev,W,W.next)>=0||(W=W.prevZ,Z.x>=R&&Z.x<=F&&Z.y>=j&&Z.y<=B&&Z!==i&&Z!==u&&Mw(d,x,m,E,v,M,Z.x,Z.y)&&$i(Z.prev,Z,Z.next)>=0))return!1;Z=Z.nextZ}for(;W&&W.z>=z;){if(W.x>=R&&W.x<=F&&W.y>=j&&W.y<=B&&W!==i&&W!==u&&Mw(d,x,m,E,v,M,W.x,W.y)&&$i(W.prev,W,W.next)>=0)return!1;W=W.prevZ}for(;Z&&Z.z<=P;){if(Z.x>=R&&Z.x<=F&&Z.y>=j&&Z.y<=B&&Z!==i&&Z!==u&&Mw(d,x,m,E,v,M,Z.x,Z.y)&&$i(Z.prev,Z,Z.next)>=0)return!1;Z=Z.nextZ}return!0}function $6e(t,e,n){let r=t;do{const i=r.prev,o=r.next.next;!AF(i,o)&&JSe(i,r,r.next,o)&&RT(i,o)&&RT(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),DT(r),DT(r.next),r=t=o),r=r.next}while(r!==t);return D0(r)}function K6e(t,e,n,r,i,o){let u=t;do{let d=u.next.next;for(;d!==u.prev;){if(u.i!==d.i&&n8e(u,d)){let m=eEe(u,d);u=D0(u,u.next),m=D0(m,m.next),IT(u,e,n,r,i,o,0),IT(m,e,n,r,i,o,0);return}d=d.next}u=u.next}while(u!==t)}function X6e(t,e,n,r){const i=[];let o,u,d,m,v;for(o=0,u=e.length;o<u;o++)d=e[o]*r,m=o<u-1?e[o+1]*r:t.length,v=QSe(t,d,m,r,!1),v===v.next&&(v.steiner=!0),i.push(t8e(v));for(i.sort(q6e),o=0;o<i.length;o++)n=Y6e(i[o],n);return n}function q6e(t,e){return t.x-e.x}function Y6e(t,e){const n=Z6e(t,e);if(!n)return e;const r=eEe(n,t);return D0(r,r.next),D0(n,n.next)}function Z6e(t,e){let n=e,r=-1/0,i;const o=t.x,u=t.y;do{if(u<=n.y&&u>=n.next.y&&n.next.y!==n.y){const M=n.x+(u-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(M<=o&&M>r&&(r=M,i=n.x<n.next.x?n:n.next,M===o))return i}n=n.next}while(n!==e);if(!i)return null;const d=i,m=i.x,v=i.y;let x=1/0,E;n=i;do o>=n.x&&n.x>=m&&o!==n.x&&Mw(u<v?o:r,u,m,v,u<v?r:o,u,n.x,n.y)&&(E=Math.abs(u-n.y)/(o-n.x),RT(n,t)&&(E<x||E===x&&(n.x>i.x||n.x===i.x&&Q6e(i,n)))&&(i=n,x=E)),n=n.next;while(n!==d);return i}function Q6e(t,e){return $i(t.prev,t,e.prev)<0&&$i(e.next,t,t.next)<0}function J6e(t,e,n,r){let i=t;do i.z===0&&(i.z=AW(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,e8e(i)}function e8e(t){let e,n,r,i,o,u,d,m,v=1;do{for(n=t,t=null,o=null,u=0;n;){for(u++,r=n,d=0,e=0;e<v&&(d++,r=r.nextZ,!!r);e++);for(m=v;d>0||m>0&&r;)d!==0&&(m===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,d--):(i=r,r=r.nextZ,m--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,v*=2}while(u>1);return t}function AW(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function t8e(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Mw(t,e,n,r,i,o,u,d){return(i-u)*(e-d)>=(t-u)*(o-d)&&(t-u)*(r-d)>=(n-u)*(e-d)&&(n-u)*(o-d)>=(i-u)*(r-d)}function n8e(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!r8e(t,e)&&(RT(t,e)&&RT(e,t)&&i8e(t,e)&&($i(t.prev,t,e.prev)||$i(t,e.prev,e))||AF(t,e)&&$i(t.prev,t,t.next)>0&&$i(e.prev,e,e.next)>0)}function $i(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function AF(t,e){return t.x===e.x&&t.y===e.y}function JSe(t,e,n,r){const i=bL($i(t,e,n)),o=bL($i(t,e,r)),u=bL($i(n,r,t)),d=bL($i(n,r,e));return!!(i!==o&&u!==d||i===0&&yL(t,n,e)||o===0&&yL(t,r,e)||u===0&&yL(n,t,r)||d===0&&yL(n,e,r))}function yL(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function bL(t){return t>0?1:t<0?-1:0}function r8e(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&JSe(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function RT(t,e){return $i(t.prev,t,t.next)<0?$i(t,e,t.next)>=0&&$i(t,t.prev,e)>=0:$i(t,e,t.prev)<0||$i(t,t.next,e)<0}function i8e(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function eEe(t,e){const n=new IW(t.i,t.x,t.y),r=new IW(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function _be(t,e,n,r){const i=new IW(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function DT(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function IW(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function s8e(t,e,n,r){let i=0;for(let o=e,u=n-r;o<n;o+=r)i+=(t[u]-t[o])*(t[o+1]+t[u+1]),u=o;return i}class I7{static area(e){const n=e.length;let r=0;for(let i=n-1,o=0;o<n;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return I7.area(e)<0}static triangulateShape(e,n){const r=[],i=[],o=[];wbe(e),xbe(r,e);let u=e.length;n.forEach(wbe);for(let m=0;m<n.length;m++)i.push(u),u+=n[m].length,xbe(r,n[m]);const d=H6e.triangulate(r,i);for(let m=0;m<d.length;m+=3)o.push(d.slice(m,m+3));return o}}function wbe(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function xbe(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class S0 extends Mo{constructor(e=1,n=32,r=16,i=0,o=Math.PI*2,u=0,d=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:o,thetaStart:u,thetaLength:d},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const m=Math.min(u+d,Math.PI);let v=0;const x=[],E=new Be,M=new Be,R=[],j=[],F=[],B=[];for(let z=0;z<=r;z++){const P=[],W=z/r;let Z=0;z===0&&u===0?Z=.5/n:z===r&&m===Math.PI&&(Z=-.5/n);for(let ge=0;ge<=n;ge++){const X=ge/n;E.x=-e*Math.cos(i+X*o)*Math.sin(u+W*d),E.y=e*Math.cos(u+W*d),E.z=e*Math.sin(i+X*o)*Math.sin(u+W*d),j.push(E.x,E.y,E.z),M.copy(E).normalize(),F.push(M.x,M.y,M.z),B.push(X+Z,1-W),P.push(v++)}x.push(P)}for(let z=0;z<r;z++)for(let P=0;P<n;P++){const W=x[z][P+1],Z=x[z][P],ge=x[z+1][P],X=x[z+1][P+1];(z!==0||u>0)&&R.push(W,Z,X),(z!==r-1||m<Math.PI)&&R.push(Z,ge,X)}this.setIndex(R),this.setAttribute("position",new ki(j,3)),this.setAttribute("normal",new ki(F,3)),this.setAttribute("uv",new ki(B,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class o8e extends Ml{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new xn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=d1,this.normalScale=new cn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class a8e extends o8e{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new cn(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return zs(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new xn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new xn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new xn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class tT extends Ml{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new xn(16777215),this.specular=new xn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=d1,this.normalScale=new cn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=SF,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class l8e extends Ml{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=d1,this.normalScale=new cn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class u8e extends Ml{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new xn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=d1,this.normalScale=new cn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=SF,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class tEe extends Ml{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new xn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=d1,this.normalScale=new cn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}function _L(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function c8e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function d8e(t){function e(i,o){return t[i]-t[o]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function Sbe(t,e,n){const r=t.length,i=new t.constructor(r);for(let o=0,u=0;u!==r;++o){const d=n[o]*e;for(let m=0;m!==e;++m)i[u++]=t[d+m]}return i}function nEe(t,e,n,r){let i=1,o=t[0];for(;o!==void 0&&o[r]===void 0;)o=t[i++];if(o===void 0)return;let u=o[r];if(u!==void 0)if(Array.isArray(u))do u=o[r],u!==void 0&&(e.push(o.time),n.push.apply(n,u)),o=t[i++];while(o!==void 0);else if(u.toArray!==void 0)do u=o[r],u!==void 0&&(e.push(o.time),u.toArray(n,n.length)),o=t[i++];while(o!==void 0);else do u=o[r],u!==void 0&&(e.push(o.time),n.push(u)),o=t[i++];while(o!==void 0)}class IF{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],o=n[r-1];e:{t:{let u;n:{r:if(!(e<i)){for(let d=r+2;;){if(i===void 0){if(e<o)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===d)break;if(o=i,i=n[++r],e<i)break t}u=n.length;break n}if(!(e>=o)){const d=n[1];e<d&&(r=2,o=d);for(let m=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===m)break;if(i=o,o=n[--r-1],e>=o)break t}u=r,r=0;break n}break e}for(;r<u;){const d=r+u>>>1;e<n[d]?u=d:r=d+1}if(i=n[r],o=n[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let u=0;u!==i;++u)n[u]=r[o+u];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class h8e extends IF{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ew,endingEnd:Ew}}intervalChanged_(e,n,r){const i=this.parameterPositions;let o=e-2,u=e+1,d=i[o],m=i[u];if(d===void 0)switch(this.getSettings_().endingStart){case Cw:o=e,d=2*n-r;break;case AN:o=i.length-2,d=n+i[o]-i[o+1];break;default:o=e,d=r}if(m===void 0)switch(this.getSettings_().endingEnd){case Cw:u=e,m=2*r-n;break;case AN:u=1,m=r+i[1]-i[0];break;default:u=e-1,m=n}const v=(r-n)*.5,x=this.valueSize;this._weightPrev=v/(n-d),this._weightNext=v/(m-r),this._offsetPrev=o*x,this._offsetNext=u*x}interpolate_(e,n,r,i){const o=this.resultBuffer,u=this.sampleValues,d=this.valueSize,m=e*d,v=m-d,x=this._offsetPrev,E=this._offsetNext,M=this._weightPrev,R=this._weightNext,j=(r-n)/(i-n),F=j*j,B=F*j,z=-M*B+2*M*F-M*j,P=(1+M)*B+(-1.5-2*M)*F+(-.5+M)*j+1,W=(-1-R)*B+(1.5+R)*F+.5*j,Z=R*B-R*F;for(let ge=0;ge!==d;++ge)o[ge]=z*u[x+ge]+P*u[v+ge]+W*u[m+ge]+Z*u[E+ge];return o}}class rEe extends IF{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,u=this.sampleValues,d=this.valueSize,m=e*d,v=m-d,x=(r-n)/(i-n),E=1-x;for(let M=0;M!==d;++M)o[M]=u[v+M]*E+u[m+M]*x;return o}}class p8e extends IF{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Od{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=_L(n,this.TimeBufferType),this.values=_L(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:_L(e.times,Array),values:_L(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new p8e(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new rEe(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new h8e(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case MN:n=this.InterpolantFactoryMethodDiscrete;break;case kN:n=this.InterpolantFactoryMethodLinear;break;case oG:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return MN;case this.InterpolantFactoryMethodLinear:return kN;case this.InterpolantFactoryMethodSmooth:return oG}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let o=0,u=i-1;for(;o!==i&&r[o]<e;)++o;for(;u!==-1&&r[u]>n;)--u;if(++u,o!==0||u!==i){o>=u&&(u=Math.max(u,1),o=u-1);const d=this.getValueSize();this.times=r.slice(o,u),this.values=this.values.slice(o*d,u*d)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let u=null;for(let d=0;d!==o;d++){const m=r[d];if(typeof m=="number"&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,d,m),e=!1;break}if(u!==null&&u>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,d,m,u),e=!1;break}u=m}if(i!==void 0&&c8e(i))for(let d=0,m=i.length;d!==m;++d){const v=i[d];if(isNaN(v)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,d,v),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),r=this.getValueSize(),i=this.getInterpolation()===oG,o=e.length-1;let u=1;for(let d=1;d<o;++d){let m=!1;const v=e[d],x=e[d+1];if(v!==x&&(d!==1||v!==e[0]))if(i)m=!0;else{const E=d*r,M=E-r,R=E+r;for(let j=0;j!==r;++j){const F=n[E+j];if(F!==n[M+j]||F!==n[R+j]){m=!0;break}}}if(m){if(d!==u){e[u]=e[d];const E=d*r,M=u*r;for(let R=0;R!==r;++R)n[M+R]=n[E+R]}++u}}if(o>0){e[u]=e[o];for(let d=o*r,m=u*r,v=0;v!==r;++v)n[m+v]=n[d+v];++u}return u!==e.length?(this.times=e.slice(0,u),this.values=n.slice(0,u*r)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Od.prototype.TimeBufferType=Float32Array;Od.prototype.ValueBufferType=Float32Array;Od.prototype.DefaultInterpolation=kN;class g1 extends Od{}g1.prototype.ValueTypeName="bool";g1.prototype.ValueBufferType=Array;g1.prototype.DefaultInterpolation=MN;g1.prototype.InterpolantFactoryMethodLinear=void 0;g1.prototype.InterpolantFactoryMethodSmooth=void 0;class iEe extends Od{}iEe.prototype.ValueTypeName="color";class OT extends Od{}OT.prototype.ValueTypeName="number";class f8e extends IF{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const o=this.resultBuffer,u=this.sampleValues,d=this.valueSize,m=(r-n)/(i-n);let v=e*d;for(let x=v+d;v!==x;v+=4)Us.slerpFlat(o,0,u,v-d,u,v,m);return o}}class O0 extends Od{InterpolantFactoryMethodLinear(e){return new f8e(this.times,this.values,this.getValueSize(),e)}}O0.prototype.ValueTypeName="quaternion";O0.prototype.DefaultInterpolation=kN;O0.prototype.InterpolantFactoryMethodSmooth=void 0;class v1 extends Od{}v1.prototype.ValueTypeName="string";v1.prototype.ValueBufferType=Array;v1.prototype.DefaultInterpolation=MN;v1.prototype.InterpolantFactoryMethodLinear=void 0;v1.prototype.InterpolantFactoryMethodSmooth=void 0;class LT extends Od{}LT.prototype.ValueTypeName="vector";class RW{constructor(e,n=-1,r,i=b7){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=rg(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let u=0,d=r.length;u!==d;++u)n.push(g8e(r[u]).scale(i));const o=new this(e.name,e.duration,n,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,u=r.length;o!==u;++o)n.push(Od.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const o=n.length,u=[];for(let d=0;d<o;d++){let m=[],v=[];m.push((d+o-1)%o,d,(d+1)%o),v.push(0,1,0);const x=d8e(m);m=Sbe(m,1,x),v=Sbe(v,1,x),!i&&m[0]===0&&(m.push(o),v.push(v[0])),u.push(new OT(".morphTargetInfluences["+n[d].name+"]",m,v).scale(1/r))}return new this(e,-1,u)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let d=0,m=e.length;d<m;d++){const v=e[d],x=v.name.match(o);if(x&&x.length>1){const E=x[1];let M=i[E];M||(i[E]=M=[]),M.push(v)}}const u=[];for(const d in i)u.push(this.CreateFromMorphTargetSequence(d,i[d],n,r));return u}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(E,M,R,j,F){if(R.length!==0){const B=[],z=[];nEe(R,B,z,j),B.length!==0&&F.push(new E(M,B,z))}},i=[],o=e.name||"default",u=e.fps||30,d=e.blendMode;let m=e.length||-1;const v=e.hierarchy||[];for(let E=0;E<v.length;E++){const M=v[E].keys;if(!(!M||M.length===0))if(M[0].morphTargets){const R={};let j;for(j=0;j<M.length;j++)if(M[j].morphTargets)for(let F=0;F<M[j].morphTargets.length;F++)R[M[j].morphTargets[F]]=-1;for(const F in R){const B=[],z=[];for(let P=0;P!==M[j].morphTargets.length;++P){const W=M[j];B.push(W.time),z.push(W.morphTarget===F?1:0)}i.push(new OT(".morphTargetInfluence["+F+"]",B,z))}m=R.length*u}else{const R=".bones["+n[E].name+"]";r(LT,R+".position",M,"pos",i),r(O0,R+".quaternion",M,"rot",i),r(LT,R+".scale",M,"scl",i)}}return i.length===0?null:new this(o,m,i,d)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const o=this.tracks[r];n=Math.max(n,o.times[o.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function m8e(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return OT;case"vector":case"vector2":case"vector3":case"vector4":return LT;case"color":return iEe;case"quaternion":return O0;case"bool":case"boolean":return g1;case"string":return v1}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function g8e(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=m8e(t.type);if(t.times===void 0){const n=[],r=[];nEe(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const FN={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class v8e{constructor(e,n,r){const i=this;let o=!1,u=0,d=0,m;const v=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(x){d++,o===!1&&i.onStart!==void 0&&i.onStart(x,u,d),o=!0},this.itemEnd=function(x){u++,i.onProgress!==void 0&&i.onProgress(x,u,d),u===d&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(x){i.onError!==void 0&&i.onError(x)},this.resolveURL=function(x){return m?m(x):x},this.setURLModifier=function(x){return m=x,this},this.addHandler=function(x,E){return v.push(x,E),this},this.removeHandler=function(x){const E=v.indexOf(x);return E!==-1&&v.splice(E,2),this},this.getHandler=function(x){for(let E=0,M=v.length;E<M;E+=2){const R=v[E],j=v[E+1];if(R.global&&(R.lastIndex=0),R.test(x))return j}return null}}}const y8e=new v8e;class qm{constructor(e){this.manager=e!==void 0?e:y8e,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,o){r.load(e,i,n,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}qm.DEFAULT_MATERIAL_NAME="__DEFAULT";const Gh={};class b8e extends Error{constructor(e,n){super(e),this.response=n}}class _8e extends qm{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=FN.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(o),this.manager.itemEnd(e)},0),o;if(Gh[e]!==void 0){Gh[e].push({onLoad:n,onProgress:r,onError:i});return}Gh[e]=[],Gh[e].push({onLoad:n,onProgress:r,onError:i});const u=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),d=this.mimeType,m=this.responseType;fetch(u).then(v=>{if(v.status===200||v.status===0){if(v.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||v.body===void 0||v.body.getReader===void 0)return v;const x=Gh[e],E=v.body.getReader(),M=v.headers.get("Content-Length")||v.headers.get("X-File-Size"),R=M?parseInt(M):0,j=R!==0;let F=0;const B=new ReadableStream({start(z){P();function P(){E.read().then(({done:W,value:Z})=>{if(W)z.close();else{F+=Z.byteLength;const ge=new ProgressEvent("progress",{lengthComputable:j,loaded:F,total:R});for(let X=0,pe=x.length;X<pe;X++){const ye=x[X];ye.onProgress&&ye.onProgress(ge)}z.enqueue(Z),P()}})}}});return new Response(B)}else throw new b8e(`fetch for "${v.url}" responded with ${v.status}: ${v.statusText}`,v)}).then(v=>{switch(m){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"document":return v.text().then(x=>new DOMParser().parseFromString(x,d));case"json":return v.json();default:if(d===void 0)return v.text();{const E=/charset="?([^;"\s]*)"?/i.exec(d),M=E&&E[1]?E[1].toLowerCase():void 0,R=new TextDecoder(M);return v.arrayBuffer().then(j=>R.decode(j))}}}).then(v=>{FN.add(e,v);const x=Gh[e];delete Gh[e];for(let E=0,M=x.length;E<M;E++){const R=x[E];R.onLoad&&R.onLoad(v)}}).catch(v=>{const x=Gh[e];if(x===void 0)throw this.manager.itemError(e),v;delete Gh[e];for(let E=0,M=x.length;E<M;E++){const R=x[E];R.onError&&R.onError(v)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class sEe extends qm{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,u=FN.get(e);if(u!==void 0)return o.manager.itemStart(e),setTimeout(function(){n&&n(u),o.manager.itemEnd(e)},0),u;const d=kT("img");function m(){x(),FN.add(e,this),n&&n(this),o.manager.itemEnd(e)}function v(E){x(),i&&i(E),o.manager.itemError(e),o.manager.itemEnd(e)}function x(){d.removeEventListener("load",m,!1),d.removeEventListener("error",v,!1)}return d.addEventListener("load",m,!1),d.addEventListener("error",v,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(d.crossOrigin=this.crossOrigin),o.manager.itemStart(e),d.src=e,d}}class w8e extends qm{constructor(e){super(e)}load(e,n,r,i){const o=new MF;o.colorSpace=rs;const u=new sEe(this.manager);u.setCrossOrigin(this.crossOrigin),u.setPath(this.path);let d=0;function m(v){u.load(e[v],function(x){o.images[v]=x,d++,d===6&&(o.needsUpdate=!0,n&&n(o))},void 0,i)}for(let v=0;v<e.length;++v)m(v);return o}}class oEe extends qm{constructor(e){super(e)}load(e,n,r,i){const o=new qi,u=new sEe(this.manager);return u.setCrossOrigin(this.crossOrigin),u.setPath(this.path),u.load(e,function(d){o.image=d,o.needsUpdate=!0,n!==void 0&&n(o)},r,i),o}}class lM extends qr{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new xn(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class x8e extends lM{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(qr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new xn(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const DG=new Bn,Ebe=new Be,Cbe=new Be;class R7{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new cn(512,512),this.map=null,this.mapPass=null,this.matrix=new Bn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new E7,this._frameExtents=new cn(1,1),this._viewportCount=1,this._viewports=[new Ar(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;Ebe.setFromMatrixPosition(e.matrixWorld),n.position.copy(Ebe),Cbe.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(Cbe),n.updateMatrixWorld(),DG.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(DG),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(DG)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class S8e extends R7{constructor(){super(new Vs(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=e1*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||n.far;(r!==n.fov||i!==n.aspect||o!==n.far)&&(n.fov=r,n.aspect=i,n.far=o,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class D7 extends lM{constructor(e,n,r=0,i=Math.PI/3,o=0,u=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(qr.DEFAULT_UP),this.updateMatrix(),this.target=new qr,this.distance=r,this.angle=i,this.penumbra=o,this.decay=u,this.map=null,this.shadow=new S8e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Pbe=new Bn,xP=new Be,OG=new Be;class E8e extends R7{constructor(){super(new Vs(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new cn(4,2),this._viewportCount=6,this._viewports=[new Ar(2,1,1,1),new Ar(0,1,1,1),new Ar(3,1,1,1),new Ar(1,1,1,1),new Ar(3,0,1,1),new Ar(1,0,1,1)],this._cubeDirections=[new Be(1,0,0),new Be(-1,0,0),new Be(0,0,1),new Be(0,0,-1),new Be(0,1,0),new Be(0,-1,0)],this._cubeUps=[new Be(0,1,0),new Be(0,1,0),new Be(0,1,0),new Be(0,1,0),new Be(0,0,1),new Be(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),xP.setFromMatrixPosition(e.matrixWorld),r.position.copy(xP),OG.copy(r.position),OG.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(OG),r.updateMatrixWorld(),i.makeTranslation(-xP.x,-xP.y,-xP.z),Pbe.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Pbe)}}class Tbe extends lM{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new E8e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class C8e extends R7{constructor(){super(new AT(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class O7 extends lM{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(qr.DEFAULT_UP),this.updateMatrix(),this.target=new qr,this.shadow=new C8e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class P8e extends lM{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class T8e{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class M8e{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Mbe(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=Mbe();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function Mbe(){return(typeof performance>"u"?Date:performance).now()}class k8e{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,o,u;switch(n){case"quaternion":i=this._slerp,o=this._slerpAdditive,u=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,u=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,u=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=u,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,o=e*i+i;let u=this.cumulativeWeight;if(u===0){for(let d=0;d!==i;++d)r[o+d]=r[d];u=n}else{u+=n;const d=n/u;this._mixBufferRegion(r,o,0,d,i)}this.cumulativeWeight=u}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,o=this.cumulativeWeight,u=this.cumulativeWeightAdditive,d=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const m=n*this._origIndex;this._mixBufferRegion(r,i,m,1-o,n)}u>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let m=n,v=n+n;m!==v;++m)if(r[m]!==r[m+n]){d.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let o=r,u=i;o!==u;++o)n[o]=n[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,o){if(i>=.5)for(let u=0;u!==o;++u)e[n+u]=e[r+u]}_slerp(e,n,r,i){Us.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,o){const u=this._workIndex*o;Us.multiplyQuaternionsFlat(e,u,e,n,e,r),Us.slerpFlat(e,n,e,n,e,u,i)}_lerp(e,n,r,i,o){const u=1-i;for(let d=0;d!==o;++d){const m=n+d;e[m]=e[m]*u+e[r+d]*i}}_lerpAdditive(e,n,r,i,o){for(let u=0;u!==o;++u){const d=n+u;e[d]=e[d]+e[r+u]*i}}}const L7="\\[\\]\\.:\\/",A8e=new RegExp("["+L7+"]","g"),N7="[^"+L7+"]",I8e="[^"+L7.replace("\\.","")+"]",R8e=/((?:WC+[\/:])*)/.source.replace("WC",N7),D8e=/(WCOD+)?/.source.replace("WCOD",I8e),O8e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",N7),L8e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",N7),N8e=new RegExp("^"+R8e+D8e+O8e+L8e+"$"),F8e=["material","materials","bones","map"];class B8e{constructor(e,n,r){const i=r||Nr.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Nr{constructor(e,n,r){this.path=n,this.parsedPath=r||Nr.parseTrackName(n),this.node=Nr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Nr.Composite(e,n,r):new Nr(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(A8e,"")}static parseTrackName(e){const n=N8e.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);F8e.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(o){for(let u=0;u<o.length;u++){const d=o[u];if(d.name===n||d.uuid===n)return d;const m=r(d.children);if(m)return m}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let o=n.propertyIndex;if(e||(e=Nr.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let v=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let x=0;x<e.length;x++)if(e[x].name===v){v=x;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(v!==void 0){if(e[v]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[v]}}const u=e[i];if(u===void 0){const v=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+v+"."+i+" but it wasn't found.",e);return}let d=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?d=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(d=this.Versioning.MatrixWorldNeedsUpdate);let m=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}m=this.BindingType.ArrayElement,this.resolvedProperty=u,this.propertyIndex=o}else u.fromArray!==void 0&&u.toArray!==void 0?(m=this.BindingType.HasFromToArray,this.resolvedProperty=u):Array.isArray(u)?(m=this.BindingType.EntireArray,this.resolvedProperty=u):this.propertyName=i;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][d]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nr.Composite=B8e;Nr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Nr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Nr.prototype.GetterByBindingType=[Nr.prototype._getValue_direct,Nr.prototype._getValue_array,Nr.prototype._getValue_arrayElement,Nr.prototype._getValue_toArray];Nr.prototype.SetterByBindingTypeAndVersioning=[[Nr.prototype._setValue_direct,Nr.prototype._setValue_direct_setNeedsUpdate,Nr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nr.prototype._setValue_array,Nr.prototype._setValue_array_setNeedsUpdate,Nr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nr.prototype._setValue_arrayElement,Nr.prototype._setValue_arrayElement_setNeedsUpdate,Nr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nr.prototype._setValue_fromArray,Nr.prototype._setValue_fromArray_setNeedsUpdate,Nr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class U8e{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const o=n.tracks,u=o.length,d=new Array(u),m={endingStart:Ew,endingEnd:Ew};for(let v=0;v!==u;++v){const x=o[v].createInterpolant(null);d[v]=x,x.settings=m}this._interpolantSettings=m,this._interpolants=d,this._propertyBindings=new Array(u),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=i5e,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,o=e._clip.duration,u=o/i,d=i/o;e.warp(1,u,n),this.warp(d,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,o=i.time,u=this.timeScale;let d=this._timeScaleInterpolant;d===null&&(d=i._lendControlInterpolant(),this._timeScaleInterpolant=d);const m=d.parameterPositions,v=d.sampleValues;return m[0]=o,m[1]=o+r,v[0]=e/u,v[1]=n/u,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const m=(e-o)*r;m<0||r===0?n=0:(this._startTime=null,n=r*m)}n*=this._updateTimeScale(e);const u=this._updateTime(n),d=this._updateWeight(e);if(d>0){const m=this._interpolants,v=this._propertyBindings;switch(this.blendMode){case o5e:for(let x=0,E=m.length;x!==E;++x)m[x].evaluate(u),v[x].accumulateAdditive(d);break;case b7:default:for(let x=0,E=m.length;x!==E;++x)m[x].evaluate(u),v[x].accumulate(i,d)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const u=r===s5e;if(e===0)return o===-1?i:u&&(o&1)===1?n-i:i;if(r===r5e){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,u)):this._setEndings(this.repetitions===0,!0,u)),i>=n||i<0){const d=Math.floor(i/n);i-=n*d,o+=Math.abs(d);const m=this.repetitions-o;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(m===1){const v=e<0;this._setEndings(v,!v,u)}else this._setEndings(!1,!1,u);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:d})}}else this.time=i;if(u&&(o&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Cw,i.endingEnd=Cw):(e?i.endingStart=this.zeroSlopeAtStart?Cw:Ew:i.endingStart=AN,n?i.endingEnd=this.zeroSlopeAtEnd?Cw:Ew:i.endingEnd=AN)}_scheduleFading(e,n,r){const i=this._mixer,o=i.time;let u=this._weightInterpolant;u===null&&(u=i._lendControlInterpolant(),this._weightInterpolant=u);const d=u.parameterPositions,m=u.sampleValues;return d[0]=o,m[0]=n,d[1]=o+e,m[1]=r,this}}const z8e=new Float32Array(1);class V8e extends Tl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,u=e._propertyBindings,d=e._interpolants,m=r.uuid,v=this._bindingsByRootAndName;let x=v[m];x===void 0&&(x={},v[m]=x);for(let E=0;E!==o;++E){const M=i[E],R=M.name;let j=x[R];if(j!==void 0)++j.referenceCount,u[E]=j;else{if(j=u[E],j!==void 0){j._cacheIndex===null&&(++j.referenceCount,this._addInactiveBinding(j,m,R));continue}const F=n&&n._propertyBindings[E].binding.parsedPath;j=new k8e(Nr.create(r,R,F),M.ValueTypeName,M.getValueSize()),++j.referenceCount,this._addInactiveBinding(j,m,R),u[E]=j}d[E].resultBuffer=j.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,o=this._actionsByClip;let u=o[n];if(u===void 0)u={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[n]=u;else{const d=u.knownActions;e._byClipCacheIndex=d.length,d.push(e)}e._cacheIndex=i.length,i.push(e),u.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const o=e._clip.uuid,u=this._actionsByClip,d=u[o],m=d.knownActions,v=m[m.length-1],x=e._byClipCacheIndex;v._byClipCacheIndex=x,m[x]=v,m.pop(),e._byClipCacheIndex=null;const E=d.actionByRoot,M=(e._localRoot||this._root).uuid;delete E[M],m.length===0&&delete u[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const o=n[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,o=this._bindings;let u=i[n];u===void 0&&(u={},i[n]=u),u[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,u=this._bindingsByRootAndName,d=u[i],m=n[n.length-1],v=e._cacheIndex;m._cacheIndex=v,n[v]=m,n.pop(),delete d[o],Object.keys(d).length===0&&delete u[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=n[i];e._cacheIndex=i,n[i]=e,o._cacheIndex=r,n[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new rEe(new Float32Array(2),new Float32Array(2),1,z8e),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=n[i];e.__cacheIndex=i,n[i]=e,o.__cacheIndex=r,n[r]=o}clipAction(e,n,r){const i=n||this._root,o=i.uuid;let u=typeof e=="string"?RW.findByName(i,e):e;const d=u!==null?u.uuid:e,m=this._actionsByClip[d];let v=null;if(r===void 0&&(u!==null?r=u.blendMode:r=b7),m!==void 0){const E=m.actionByRoot[o];if(E!==void 0&&E.blendMode===r)return E;v=m.knownActions[0],u===null&&(u=v._clip)}if(u===null)return null;const x=new U8e(this,u,n,r);return this._bindAction(x,v),this._addInactiveAction(x,d,o),x}existingAction(e,n){const r=n||this._root,i=r.uuid,o=typeof e=="string"?RW.findByName(r,e):e,u=o?o.uuid:e,d=this._actionsByClip[u];return d!==void 0&&d.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,o=Math.sign(e),u=this._accuIndex^=1;for(let v=0;v!==r;++v)n[v]._update(i,e,o,u);const d=this._bindings,m=this._nActiveBindings;for(let v=0;v!==m;++v)d[v].apply(u);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const u=o.knownActions;for(let d=0,m=u.length;d!==m;++d){const v=u[d];this._deactivateAction(v);const x=v._cacheIndex,E=n[n.length-1];v._cacheIndex=null,v._byClipCacheIndex=null,E._cacheIndex=x,n[x]=E,n.pop(),this._removeInactiveBindingsForAction(v)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const u in r){const d=r[u].actionByRoot,m=d[n];m!==void 0&&(this._deactivateAction(m),this._removeInactiveAction(m))}const i=this._bindingsByRootAndName,o=i[n];if(o!==void 0)for(const u in o){const d=o[u];d.restoreOriginalState(),this._removeInactiveBinding(d)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class Mi{constructor(e){this.value=e}clone(){return new Mi(this.value.clone===void 0?this.value:this.value.clone())}}class j8e{constructor(e,n,r=0,i=1/0){this.ray=new p1(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new x7,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return DW(e,this,r,n),r.sort(kbe),r}intersectObjects(e,n=!0,r=[]){for(let i=0,o=e.length;i<o;i++)DW(e[i],this,r,n);return r.sort(kbe),r}}function kbe(t,e){return t.distance-e.distance}function DW(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let o=0,u=i.length;o<u;o++)DW(i[o],e,n,!0)}}class Abe{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(zs(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}const wL=new Be,ts=new TF;class H8e extends k7{constructor(e){const n=new Mo,r=new aM({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],u={};d("n1","n2"),d("n2","n4"),d("n4","n3"),d("n3","n1"),d("f1","f2"),d("f2","f4"),d("f4","f3"),d("f3","f1"),d("n1","f1"),d("n2","f2"),d("n3","f3"),d("n4","f4"),d("p","n1"),d("p","n2"),d("p","n3"),d("p","n4"),d("u1","u2"),d("u2","u3"),d("u3","u1"),d("c","t"),d("p","c"),d("cn1","cn2"),d("cn3","cn4"),d("cf1","cf2"),d("cf3","cf4");function d(j,F){m(j),m(F)}function m(j){i.push(0,0,0),o.push(0,0,0),u[j]===void 0&&(u[j]=[]),u[j].push(i.length/3-1)}n.setAttribute("position",new ki(i,3)),n.setAttribute("color",new ki(o,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=u,this.update();const v=new xn(16755200),x=new xn(16711680),E=new xn(43775),M=new xn(16777215),R=new xn(3355443);this.setColors(v,x,E,M,R)}setColors(e,n,r,i,o){const d=this.geometry.getAttribute("color");d.setXYZ(0,e.r,e.g,e.b),d.setXYZ(1,e.r,e.g,e.b),d.setXYZ(2,e.r,e.g,e.b),d.setXYZ(3,e.r,e.g,e.b),d.setXYZ(4,e.r,e.g,e.b),d.setXYZ(5,e.r,e.g,e.b),d.setXYZ(6,e.r,e.g,e.b),d.setXYZ(7,e.r,e.g,e.b),d.setXYZ(8,e.r,e.g,e.b),d.setXYZ(9,e.r,e.g,e.b),d.setXYZ(10,e.r,e.g,e.b),d.setXYZ(11,e.r,e.g,e.b),d.setXYZ(12,e.r,e.g,e.b),d.setXYZ(13,e.r,e.g,e.b),d.setXYZ(14,e.r,e.g,e.b),d.setXYZ(15,e.r,e.g,e.b),d.setXYZ(16,e.r,e.g,e.b),d.setXYZ(17,e.r,e.g,e.b),d.setXYZ(18,e.r,e.g,e.b),d.setXYZ(19,e.r,e.g,e.b),d.setXYZ(20,e.r,e.g,e.b),d.setXYZ(21,e.r,e.g,e.b),d.setXYZ(22,e.r,e.g,e.b),d.setXYZ(23,e.r,e.g,e.b),d.setXYZ(24,n.r,n.g,n.b),d.setXYZ(25,n.r,n.g,n.b),d.setXYZ(26,n.r,n.g,n.b),d.setXYZ(27,n.r,n.g,n.b),d.setXYZ(28,n.r,n.g,n.b),d.setXYZ(29,n.r,n.g,n.b),d.setXYZ(30,n.r,n.g,n.b),d.setXYZ(31,n.r,n.g,n.b),d.setXYZ(32,r.r,r.g,r.b),d.setXYZ(33,r.r,r.g,r.b),d.setXYZ(34,r.r,r.g,r.b),d.setXYZ(35,r.r,r.g,r.b),d.setXYZ(36,r.r,r.g,r.b),d.setXYZ(37,r.r,r.g,r.b),d.setXYZ(38,i.r,i.g,i.b),d.setXYZ(39,i.r,i.g,i.b),d.setXYZ(40,o.r,o.g,o.b),d.setXYZ(41,o.r,o.g,o.b),d.setXYZ(42,o.r,o.g,o.b),d.setXYZ(43,o.r,o.g,o.b),d.setXYZ(44,o.r,o.g,o.b),d.setXYZ(45,o.r,o.g,o.b),d.setXYZ(46,o.r,o.g,o.b),d.setXYZ(47,o.r,o.g,o.b),d.setXYZ(48,o.r,o.g,o.b),d.setXYZ(49,o.r,o.g,o.b),d.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;ts.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),vs("c",n,e,ts,0,0,-1),vs("t",n,e,ts,0,0,1),vs("n1",n,e,ts,-r,-i,-1),vs("n2",n,e,ts,r,-i,-1),vs("n3",n,e,ts,-r,i,-1),vs("n4",n,e,ts,r,i,-1),vs("f1",n,e,ts,-r,-i,1),vs("f2",n,e,ts,r,-i,1),vs("f3",n,e,ts,-r,i,1),vs("f4",n,e,ts,r,i,1),vs("u1",n,e,ts,r*.7,i*1.1,-1),vs("u2",n,e,ts,-r*.7,i*1.1,-1),vs("u3",n,e,ts,0,i*2,-1),vs("cf1",n,e,ts,-r,0,1),vs("cf2",n,e,ts,r,0,1),vs("cf3",n,e,ts,0,-i,1),vs("cf4",n,e,ts,0,i,1),vs("cn1",n,e,ts,-r,0,-1),vs("cn2",n,e,ts,r,0,-1),vs("cn3",n,e,ts,0,-i,-1),vs("cn4",n,e,ts,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function vs(t,e,n,r,i,o,u){wL.set(i,o,u).unproject(r);const d=e[t];if(d!==void 0){const m=n.getAttribute("position");for(let v=0,x=d.length;v<x;v++)m.setXYZ(d[v],wL.x,wL.y,wL.z)}}class Ibe extends k7{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Mo;i.setAttribute("position",new ki(n,3)),i.setAttribute("color",new ki(r,3));const o=new aM({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,n,r){const i=new xn,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(n),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:iM}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=iM);class G8e{constructor(e,n,r=!0){yr(this,"components",new Map);yr(this,"listen");yr(this,"_debugEnabled");yr(this,"_broadcastChannel");yr(this,"_webSocket");yr(this,"_mode","app");yr(this,"_connected",!1);yr(this,"_useBC",!1);yr(this,"messageHandler",e=>{this.listen!==void 0&&(this._useBC?this.listen(e.data):this.listen(JSON.parse(e.data)))});yr(this,"openHandler",()=>{this._connected=!0});yr(this,"closeHandler",()=>{this._connected=!1});this._debugEnabled=n,n&&(this._useBC=r,r?(this._broadcastChannel=new BroadcastChannel(e),this._broadcastChannel.addEventListener("message",this.messageHandler)):(this._webSocket=new WebSocket(e),this._webSocket.addEventListener("open",this.openHandler),this._webSocket.addEventListener("close",this.closeHandler),this._webSocket.addEventListener("message",this.messageHandler)))}addComponent(e,n){this.components.set(e,n)}dispose(){this._broadcastChannel!==void 0&&this._broadcastChannel.removeEventListener("message",this.messageHandler),this._webSocket!==void 0&&(this._webSocket.removeEventListener("open",this.openHandler),this._webSocket.removeEventListener("close",this.closeHandler),this._webSocket.removeEventListener("message",this.messageHandler)),this.components.forEach(e=>{e.dispose()}),this.components.clear()}send(e){var n,r;this._mode!==e.target&&(this._useBC?(n=this._broadcastChannel)==null||n.postMessage(e):this._connected&&((r=this._webSocket)==null||r.send(JSON.stringify(e))))}get connected(){return this._connected}get debugEnabled(){return this._debugEnabled}get mode(){return this._mode}get isApp(){return this._mode==="app"}get editor(){return this._mode==="editor"}set editor(e){e&&(this._mode="editor")}}const Sr=new Tl,Er={CUSTOM:"ToolEvents::custom",SELECT_DROPDOWN:"ToolEvents::selectDropdown",DRAG_UPDATE:"ToolEvents::dragUpdate",SET_SCENE:"ToolEvents::setScene",GET_OBJECT:"ToolEvents::getObject",SET_OBJECT:"ToolEvents::setObject",UPDATE_OBJECT:"ToolEvents::updateObject",CREATE_TEXTURE:"ToolEvents::createTexture",REQUEST_METHOD:"ToolEvents::requestMethod",ADD_CAMERA:"ToolEvents::addCamera",REMOVE_CAMERA:"ToolEvents::removeCamera"};function W8e(t,e,n){function r(o){switch(e.forEach(u=>{u.callback(t,u.remote,o)}),o.event){case"custom":Sr.dispatchEvent({type:Er.CUSTOM,value:o.data});break}}function i(o){switch(n.forEach(u=>{u.callback(t,u.remote,o)}),o.event){case"custom":Sr.dispatchEvent({type:Er.CUSTOM,value:o.data});break}}t.listen=o=>{o.target==="editor"?i(o):r(o)}}class RF{constructor(e){yr(this,"app");this.app=e}dispose(){}handleApp(e,n,r){}handleEditor(e,n,r){}}class $8e extends RF{selectDropdown(e,n){this.app.send({event:"selectComponent",target:"app",data:{dropdown:e,value:n}})}updateDropdown(e,n){this.app.send({event:"draggableListUpdate",target:"app",data:{dropdown:e,value:n}})}handleApp(e,n,r){switch(r.event){case"selectComponent":Sr.dispatchEvent({type:Er.SELECT_DROPDOWN,value:r.data});break;case"draggableListUpdate":Sr.dispatchEvent({type:Er.DRAG_UPDATE,value:r.data});break}}}const aEe=()=>{};function NT(t){return t.substring(0,1).toUpperCase()+t.substring(1)}function tw(t,e,n){return Math.min(e,Math.max(t,n))}function Rbe(t,e,n){return(n-t)/(e-t)}function Dbe(t,e,n){return t*(1-n)+e*n}function K8e(){return Math.round(Math.random()*1e6).toString()}function X8e(t){return t.r!==void 0&&t.g!==void 0&&t.b!==void 0}function q8e(t){const e=Math.round(t.r*255),n=Math.round(t.g*255),r=Math.round(t.b*255),i=m=>{const v=m.toString(16);return v.length===1?"0"+v:v},o=i(e),u=i(n),d=i(r);return"#"+o+u+d}function nT(t,e=1){return Number(t.toFixed(e))}let OW=0;const Y8e=()=>{OW=0},DF=t=>{if(!t)return;let e=t.name.replace(" ","");e.length===0&&(e=`obj_${OW}`,OW++),t.parent!==null&&(e=`${t.parent.uuid}.${e}`),t.uuid=e,t.children.forEach(n=>{DF(n)})},Z8e=t=>{t&&(Array.isArray(t)?t.forEach(e=>e.dispose()):t.dispose())},BN=t=>{var e;if(t){for(;t.children.length>0;){const n=t.children[0];n.type==="Audio"?(n.pause(),n.parent&&n.parent.remove(n)):BN(n)}if(t.parent&&t.parent.remove(t),t.isMesh){const n=t;(e=n.geometry)==null||e.dispose(),Z8e(n.material)}t.dispose!==void 0&&t.dispose()}},oF=class oF extends RF{constructor(){super(...arguments);yr(this,"project");yr(this,"sheets",new Map);yr(this,"sheetObjects",new Map);yr(this,"sheetObjectCBs",new Map);yr(this,"sheetObjectUnsubscribe",new Map);yr(this,"activeSheet");yr(this,"studio")}dispose(){this.project=void 0,this.sheets=new Map,this.sheetObjects=new Map,this.sheetObjectCBs=new Map,this.sheetObjectUnsubscribe=new Map}sheet(n){var i;if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}let r=this.sheets.get(n);return r!==void 0||(r=(i=this.project)==null?void 0:i.sheet(n),this.sheets.set(n,r)),r}playSheet(n,r){var i;(i=this.sheet(n))==null||i.sequence.play(r),this.app.send({event:"playSheet",target:"editor",data:{sheet:n,value:r}})}pauseSheet(n){var r;(r=this.sheet(n))==null||r.sequence.pause(),this.app.send({event:"pauseSheet",target:"editor",data:{sheet:n}})}clearSheetObjects(n){this.sheetObjects.forEach((r,i)=>{i.search(`${n}_`)>-1&&this.unsubscribe(r)})}sheetObject(n,r,i,o){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const u=this.sheet(n);if(u===void 0)return;const d=`${n}_${r}`;let m=this.sheetObjects.get(d);m!==void 0?m=u.object(r,{...i,...m.value},{reconfigure:!0}):m=u.object(r,i),this.sheetObjects.set(d,m),this.sheetObjectCBs.set(d,o!==void 0?o:aEe);const v=m.onValuesChange(x=>{if(this.app.editor){for(const M in x){const R=x[M];typeof R=="object"&&X8e(R)&&(x[M]={r:R.r,g:R.g,b:R.b,a:R.a})}this.app.send({event:"updateSheetObject",target:"app",data:{sheet:n,sheetObject:d,values:x}})}const E=this.sheetObjectCBs.get(d);E!==void 0&&E(x)});return this.sheetObjectUnsubscribe.set(d,v),m}unsubscribe(n){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const r=n.address.sheetId,i=n.address.objectKey,o=this.sheets.get(r);o==null||o.detachObject(i);const u=`${r}_${i}`,d=this.sheetObjectUnsubscribe.get(u);d!==void 0&&(this.sheetObjects.delete(u),this.sheetObjectCBs.delete(u),this.sheetObjectUnsubscribe.delete(u),d())}handleApp(n,r,i){var d,m;const o=r;let u;switch(i.event){case"setSheet":u=o.sheets.get(i.data.sheet),u!==void 0&&(o.activeSheet=u,(d=this.studio)==null||d.setSelection([u]));break;case"setSheetObject":u=o.sheetObjects.get(`${i.data.sheet}_${i.data.key}`),u!==void 0&&((m=this.studio)==null||m.setSelection([u]));break;case"updateSheetObject":u=o.sheets.get(i.data.sheet),u!==void 0&&u.sequence.pause(),u=o.sheetObjectCBs.get(i.data.sheetObject),u!==void 0&&u(i.data.values);break;case"updateTimeline":u=o.sheets.get(i.data.sheet),o.activeSheet!==void 0&&(o.activeSheet.sequence.position=i.data.position);break}}handleEditor(n,r,i){var o,u;if(n.editor){const d=r;switch(i.event){case"playSheet":(o=d.sheet(i.data.sheet))==null||o.sequence.play(i.data.value);break;case"pauseSheet":(u=d.sheet(i.data.sheet))==null||u.sequence.pause();break}}}handleEditorApp(n,r){var i,o,u;if(n.editor){(i=this.studio)==null||i.ui.restore(),(o=this.studio)==null||o.onSelectionChange(x=>{x.length<1||x.forEach(E=>{let M=E.address.sheetId,R="setSheet",j={};switch(E.type){case"Theatre_Sheet_PublicAPI":R="setSheet",j={sheet:E.address.sheetId},r.activeSheet=r.sheets.get(E.address.sheetId);break;case"Theatre_SheetObject_PublicAPI":R="setSheetObject",M+=`_${E.address.objectKey}`,j={id:M,sheet:E.address.sheetId,key:E.address.objectKey},r.activeSheet=r.sheets.get(E.address.sheetId);break}n.send({event:R,target:"app",data:j})})});let d=-1;const m=()=>{var x;if((x=oF.rafDriver)==null||x.tick(performance.now()),r.activeSheet!==void 0&&d!==r.activeSheet.sequence.position){d=r.activeSheet.sequence.position;const E=r.activeSheet;n.send({event:"updateTimeline",target:"app",data:{position:d,sheet:E.address.sheetId}})}},v=()=>{m(),requestAnimationFrame(v)};m(),v()}else(u=this.studio)==null||u.ui.hide()}};yr(oF,"rafDriver");let r1=oF;function Q8e(t){if(t.name==="cameras")return"camera";if(t.name==="interactive")return"interactive";if(t.name==="lights")return"light";if(t.name==="ui")return"ui";if(t.name==="utils")return"utils";const e=t.type;return e.search("Helper")>-1?"icon_utils":e.search("Camera")>-1?"camera":e.search("Light")>-1?"light":"obj3D"}function lEe(t){const e={name:t.name,type:t.type,uuid:t.uuid,children:[]};return t.children.forEach(n=>{e.children.push(lEe(n))}),e}function J8e(t){const e={};for(const n in t){const r=t[n].value;e[n]={value:r},r===null?e[n].value={src:""}:r.isTexture&&(e[n].value={src:r.image.src})}return e}function eHe(t){switch(t){case"blendSrcAlpha":case"blendDstAlpha":case"blendEquationAlpha":case"clippingPlanes":case"shadowSide":case"precision":return!0}return!1}function nw(t){const e={};for(const n in t){if(n.substring(0,1)==="_"||n.substring(0,2)==="is"||eHe(n))continue;const r=typeof t[n],i=t[n];switch(r){case"boolean":case"number":case"string":e[n]=i;break;case"object":if(i!==null)if(e[n]=i,i.isTexture)if(i instanceof qi){const o=i.source.toJSON();e[n]={src:o.url}}else i instanceof MF&&(console.log("env map"),console.log(i.source.data),console.log(i.source.toJSON()),e[n]={src:""});else n==="uniforms"&&(e[n]=J8e(e[n]));else e[n]={src:""};break}}return e}function LG(t){t.updateMatrix();const e={name:t.name,type:t.type,uuid:t.uuid,visible:t.visible,matrix:t.matrix.elements,animations:[],material:void 0,perspectiveCameraInfo:void 0,orthographicCameraInfo:void 0,lightInfo:void 0};t.animations.forEach(r=>{e.animations.push({name:r.name,duration:r.duration,blendMode:r.blendMode})});const n=t.type.toLowerCase();if(n.search("mesh")>-1){const r=t;if(Array.isArray(r.material)){const i=[];r.material.forEach(o=>{i.push(nw(o))}),e.material=i}else e.material=nw(r.material)}else if(n.search("points")>-1){const r=t;if(Array.isArray(r.material)){const i=[];r.material.forEach(o=>{i.push(nw(o))}),e.material=i}else e.material=nw(r.material)}else if(n.search("line")>-1){const r=t;if(Array.isArray(r.material)){const i=[];r.material.forEach(o=>{i.push(nw(o))}),e.material=i}else e.material=nw(r.material)}else n.search("camera")>-1?t.type==="PerspectiveCamera"?e.perspectiveCameraInfo={fov:t.fov,zoom:t.zoom,near:t.near,far:t.far,focus:t.focus,aspect:t.aspect,filmGauge:t.filmGauge,filmOffset:t.filmOffset}:t.type==="OrthographicCamera"&&(e.orthographicCameraInfo={zoom:t.zoom,near:t.near,far:t.far,left:t.left,right:t.right,top:t.top,bottom:t.bottom}):n.search("light")>-1&&(e.lightInfo={color:t.color,intensity:t.intensity,decay:t.decay,distance:t.distance,angle:t.angle,penumbra:t.penumbra,groundColor:t.groundColor});return e}function tHe(t,e){const n=e.split(".");switch(n.length){case 1:return t[n[0]];case 2:return t[n[0]][n[1]];case 3:return t[n[0]][n[1]][n[2]];case 4:return t[n[0]][n[1]][n[2]][n[3]];case 5:return t[n[0]][n[1]][n[2]][n[3]][n[4]];case 6:return t[n[0]][n[1]][n[2]][n[3]][n[4]][n[5]]}}function bs(t,e,n){const r=e.split(".");switch(r.length){case 1:t[r[0]]=n;break;case 2:t[r[0]][r[1]]=n;break;case 3:t[r[0]][r[1]][r[2]]=n;break;case 4:t[r[0]][r[1]][r[2]][r[3]]=n;break;case 5:t[r[0]][r[1]][r[2]][r[3]][r[4]]=n;break}}function UN(t){return new Promise((e,n)=>{const r=new Image;r.onload=()=>{const i=new qi(r);i.wrapS=pp,i.wrapT=pp,i.needsUpdate=!0,e(i)},r.onerror=n,r.src=t})}class nHe extends RF{constructor(){super(...arguments);yr(this,"scene");yr(this,"renderer")}getObject(n){this.app.debugEnabled&&this.app.send({event:"getObject",target:"app",data:n})}setObject(n){const r=LG(n);this.app.send({event:"setObject",target:"editor",data:r})}requestMethod(n,r,i,o){this.app.send({event:"requestMethod",target:"app",data:{uuid:n,key:r,value:i,subitem:o}})}updateObject(n,r,i){this.app.send({event:"updateObject",target:"app",data:{uuid:n,key:r,value:i}})}createTexture(n,r,i){this.app.send({event:"createTexture",target:"app",data:{uuid:n,key:r,value:i}})}setScene(n){if(n===void 0||(this.scene=n,!this.app.debugEnabled))return;Y8e(),DF(this.scene);const r=lEe(this.scene);this.app.send({event:"setScene",target:"editor",data:r})}addCamera(n){if(!this.app.debugEnabled)return;const r=LG(n);this.app.send({event:"addCamera",target:"editor",data:r})}removeCamera(n){if(!this.app.debugEnabled)return;const r=LG(n);this.app.send({event:"removeCamera",target:"editor",data:r})}handleApp(n,r,i){switch(i.event){case"getObject":Sr.dispatchEvent({type:Er.GET_OBJECT,value:i.data});break;case"updateObject":Sr.dispatchEvent({type:Er.UPDATE_OBJECT,value:i.data});break;case"createTexture":Sr.dispatchEvent({type:Er.CREATE_TEXTURE,value:i.data});break;case"requestMethod":Sr.dispatchEvent({type:Er.REQUEST_METHOD,value:i.data});break}}handleEditor(n,r,i){switch(i.event){case"setObject":Sr.dispatchEvent({type:Er.SET_OBJECT,value:i.data});break;case"setScene":Sr.dispatchEvent({type:Er.SET_SCENE,value:i.data});break;case"addCamera":Sr.dispatchEvent({type:Er.ADD_CAMERA,value:i.data});break;case"removeCamera":Sr.dispatchEvent({type:Er.REMOVE_CAMERA,value:i.data});break}}}/*! Tweakpane 4.0.0 (c) 2016 cocopon, licensed under the MIT license. */function vi(t){return t==null}function F7(t){return t!==null&&typeof t=="object"}function LW(t){return t!==null&&typeof t=="object"}function rHe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function L0(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,i)=>{const o=t[i],u=e[i];return LW(o)&&LW(u)?Object.assign(Object.assign({},r),{[i]:L0(o,u)}):Object.assign(Object.assign({},r),{[i]:i in e?u:o})},{})}function B7(t){return F7(t)?"target"in t:!1}const iHe={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let Zo=class dw{static alreadyDisposed(){return new dw({type:"alreadydisposed"})}static notBindable(){return new dw({type:"notbindable"})}static notCompatible(e,n){return new dw({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new dw({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new dw({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=iHe[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}},Obe=class uEe{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!uEe.isBindable(r))throw Zo.notBindable();if(!(e in r))throw Zo.propertyNotFound(e);r[e]=n}},Rs=class{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(i=>i.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(i=>{i.handler(n)})}},sHe=class{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(i,o)=>i===o,this.emitter=new Rs,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,o=this.rawValue_;this.equals_(o,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:i,sender:this}))}},oHe=class{constructor(e){this.emitter=new Rs,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}},aHe=class{constructor(e){this.emitter=new Rs,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}};function Bi(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new oHe(t):new sHe(t,e)}function lHe(t){return[new aHe(t),(e,n)=>{t.setRawValue(e,n)}]}let _r=class cEe{constructor(e){this.emitter=new Rs,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,i)=>Object.assign(r,{[i]:Bi(e[i])}),{})}static fromObject(e){const n=this.createCore(e);return new cEe(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}},uM=class{constructor(e){this.values=_r.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}},uHe=class{constructor(e){this.values=_r.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let i=e;return vi(r)||(i=Math.max(i,r)),vi(n)||(i=Math.min(i,n)),i}},cHe=class{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}},dHe=class{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}};const hHe={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};let pHe=class{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=hHe[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const fHe={"+":t=>t,"-":t=>-t,"~":t=>~t};let mHe=class{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=fHe[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function U7(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(i!=="")return i}return""}}function FT(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function gHe(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function BT(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function vHe(t,e){const n=BT(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const i=BT(t,e);return i===""?"":r+i}function z7(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=vHe(t,e);return r===""?"":n+r}function dEe(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=gHe(t,e);return e+=r.length,r===""?"":r+BT(t,e)}function yHe(t,e){const n=dEe(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const i=BT(t,e);return e+=i.length,n+r+i+z7(t,e)}function bHe(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=BT(t,e);return e+=r.length,r===""?"":n+r+z7(t,e)}function _He(t,e){const n=dEe(t,e);return e+=n.length,n===""?"":n+z7(t,e)}const wHe=U7([yHe,bHe,_He]);function xHe(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function SHe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=xHe(t,e);return r===""?"":n+r}function EHe(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function CHe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=EHe(t,e);return r===""?"":n+r}function PHe(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function THe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=PHe(t,e);return r===""?"":n+r}const MHe=U7([SHe,CHe,THe]),kHe=U7([MHe,wHe]);function AHe(t,e){const n=kHe(t,e);return e+=n.length,n===""?null:{evaluable:new dHe(n),cursor:e}}function IHe(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=pEe(t,e);if(!r)return null;e=r.cursor,e+=FT(t,e).length;const i=t.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:e}}function RHe(t,e){var n;return(n=AHe(t,e))!==null&&n!==void 0?n:IHe(t,e)}function hEe(t,e){const n=RHe(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=hEe(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new mHe(r,i.evaluable)}):null}function DHe(t,e,n){n+=FT(e,n).length;const r=t.filter(i=>e.startsWith(i,n))[0];return r?(n+=r.length,n+=FT(e,n).length,{cursor:n,operator:r}):null}function OHe(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const u=DHe(e,n,r);if(!u)break;r=u.cursor;const d=t(n,r);if(!d)return null;r=d.cursor,o=new pHe(u.operator,o,d.evaluable)}return o?{cursor:r,evaluable:o}:null}}const LHe=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>OHe(t,e),hEe);function pEe(t,e){return e+=FT(t,e).length,LHe(t,e)}function NHe(t){const e=pEe(t,0);return!e||e.cursor+FT(t,e.cursor).length!==t.length?null:e.evaluable}function mp(t){var e;const n=NHe(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function fEe(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=mp(t);if(!vi(e))return e}return 0}function FHe(t){return String(t)}function Ja(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function Yr(t,e,n,r,i){const o=(t-e)/(n-e);return r+o*(i-r)}function Lbe(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Hs(t,e,n){return Math.min(Math.max(t,e),n)}function mEe(t,e){return(t%e+e)%e}function BHe(t,e){return vi(t.step)?Math.max(Lbe(e),2):Lbe(t.step)}function gEe(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function vEe(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function yEe(t,e){return vi(t.step)?null:new cHe(t.step,e)}function bEe(t){return!vi(t.max)&&!vi(t.min)?new uM({max:t.max,min:t.min}):!vi(t.max)||!vi(t.min)?new uHe({max:t.max,min:t.min}):null}function _Ee(t,e){var n,r,i;return{formatter:(n=t.format)!==null&&n!==void 0?n:Ja(BHe(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:gEe(t),pointerScale:(i=t.pointerScale)!==null&&i!==void 0?i:vEe(t,e)}}function wEe(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function V7(t){return{constraint:t.constraint,textProps:_r.fromObject(_Ee(t.params,t.initialValue))}}let $0=class{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}},OF=class{constructor(e){this.target=e}},cM=class extends OF{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}},UHe=class extends OF{constructor(e,n){super(e),this.expanded=n}},zHe=class extends OF{constructor(e,n){super(e),this.index=n}},UT=class extends $0{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new Rs,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new cM(this,n.binding.target.read(),e.options.last))}};class VHe{constructor(e,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new Rs}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function jHe(t){if(!("binding"in t))return!1;const e=t.binding;return B7(e)&&"read"in e&&"write"in e}function HHe(t,e){const r=Object.keys(e).reduce((i,o)=>{if(i===void 0)return;const u=e[o],d=u(t[o]);return d.succeeded?Object.assign(Object.assign({},i),{[o]:d.value}):void 0},{});return r}function GHe(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const i=e(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function WHe(t){return t===null?!1:typeof t=="object"}function Wh(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function Nbe(t){return{custom:e=>Wh(e)(t),boolean:Wh(e=>typeof e=="boolean"?e:void 0)(t),number:Wh(e=>typeof e=="number"?e:void 0)(t),string:Wh(e=>typeof e=="string"?e:void 0)(t),function:Wh(e=>typeof e=="function"?e:void 0)(t),constant:e=>Wh(n=>n===e?e:void 0)(t),raw:Wh(e=>e)(t),object:e=>Wh(n=>{if(WHe(n))return HHe(n,e)})(t),array:e=>Wh(n=>{if(Array.isArray(n))return GHe(n,e)})(t)}}const NW={optional:Nbe(!0),required:Nbe(!1)};function Zi(t,e){const n=e(NW),r=NW.required.object(n)(t);return r.succeeded?r.value:void 0}function kl(t,e,n,r){if(e&&!e(t))return!1;const i=Zi(t,n);return i?r(i):!1}function Al(t,e){var n;return L0((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function E0(t){return"value"in t}function xEe(t){if(!F7(t)||!("binding"in t))return!1;const e=t.binding;return B7(e)}const Cd="http://www.w3.org/2000/svg";function zN(t){t.offsetHeight}function $He(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function j7(t){return t.ontouchstart!==void 0}function KHe(){return globalThis}function XHe(){return KHe().document}function qHe(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const YHe={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function LF(t,e){const n=t.createElementNS(Cd,"svg");return n.innerHTML=YHe[e],n}function SEe(t,e,n){t.insertBefore(e,t.children[n])}function H7(t){t.parentElement&&t.parentElement.removeChild(t)}function EEe(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function ZHe(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function CEe(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function op(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function Ad(t,e,n){op(t.value(e),n)}const QHe="tp";function Ur(t){return(n,r)=>[QHe,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const SP=Ur("lbl");function JHe(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(i=>t.createTextNode(i)).forEach((i,o)=>{o>0&&n.appendChild(t.createElement("br")),n.appendChild(i)}),n}let PEe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(SP()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(SP("l")),Ad(n.props,"label",o=>{vi(o)?this.element.classList.add(SP(void 0,"nol")):(this.element.classList.remove(SP(void 0,"nol")),ZHe(r),r.appendChild(JHe(e,o)))}),this.element.appendChild(r),this.labelElement=r;const i=e.createElement("div");i.classList.add(SP("v")),this.element.appendChild(i),this.valueElement=i}},TEe=class{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new PEe(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return kl(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Al(null,{label:this.props.get("label")})}};function eGe(){return["veryfirst","first","last","verylast"]}const Fbe=Ur(""),Bbe={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let NF=class{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{eGe().forEach(r=>{n.classList.remove(Fbe(void 0,Bbe[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(Fbe(void 0,Bbe[r]))})}),this.viewProps.handleDispose(()=>{H7(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return kl(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Al(null,Object.assign({},this.viewProps.exportState()))}},N0=class extends NF{constructor(e,n){if(n.value!==n.valueController.value)throw Zo.shouldNeverHappen();const r=n.valueController.viewProps,i=new TEe(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new PEe(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return kl(e,n=>{var r,i,o;return super.importState(n)&&this.labelController.importProps(n)&&((o=(i=(r=this.valueController).importProps)===null||i===void 0?void 0:i.call(r,e))!==null&&o!==void 0?o:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return Al(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}};function Ube(t){const e=Object.assign({},t);return delete e.value,e}class MEe extends N0{constructor(e,n){super(e,n),this.tag=n.tag}importState(e){return kl(e,n=>super.importState(Ube(e)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return Al(()=>Ube(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function tGe(t){return E0(t)&&xEe(t.value)}class nGe extends MEe{importState(e){return kl(e,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function rGe(t){return E0(t)&&jHe(t.value)}function kEe(t,e){for(;t.length<e;)t.push(void 0)}function iGe(t){const e=[];return kEe(e,t),e}function sGe(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function oGe(t,e){const n=[...sGe(t),e];return n.length>t.length?n.splice(0,n.length-t.length):kEe(n,t.length),n}class aGe{constructor(e){this.emitter=new Rs,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=Bi(iGe(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=oGe(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function lGe(t){if(!("binding"in t))return!1;const e=t.binding;return B7(e)&&"read"in e&&!("write"in e)}class uGe extends MEe{exportState(){return Al(()=>super.exportState(),{binding:{readonly:!0}})}}function cGe(t){return E0(t)&&lGe(t.value)}let dGe=class extends $0{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new OF(this))}),this}};function hGe(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function y1(t,e){return n=>{hGe(t,e,n)}}function G7(t,e){op(t,n=>{e.textContent=n??""})}const NG=Ur("btn");let pGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(NG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(NG("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(NG("t")),G7(n.props.value("title"),i),this.buttonElement.appendChild(i)}},fGe=class{constructor(e,n){this.emitter=new Rs,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new pGe(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return kl(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Al(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}},zbe=class extends NF{constructor(e,n){const r=new fGe(e,{props:n.buttonProps,viewProps:n.viewProps}),i=new TEe(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(e){return kl(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Al(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},AEe=class{constructor(e){const[n,r]=e.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}};const b1=new AEe("2.0.0");function Ia(t){return Object.assign({core:b1},t)}const mGe=Ia({id:"button",type:"blade",accept(t){const e=Zi(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new zbe(t.document,{blade:t.blade,buttonProps:_r.fromObject({title:t.params.title}),labelProps:_r.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof zbe?new dGe(t.controller):null}});function gGe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function vGe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function yGe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function bGe(t){return F7(t)?"refresh"in t&&typeof t.refresh=="function":!1}function _Ge(t,e){if(!Obe.isBindable(t))throw Zo.notBindable();return new Obe(t,e)}let wGe=class{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new Rs,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const i=r??{},o=this.controller_.element.ownerDocument,u=this.pool_.createBinding(o,_Ge(e,n),i),d=this.pool_.createBindingApi(u);return this.add(d,i.index)}addFolder(e){return vGe(this,e)}addButton(e){return gGe(this,e)}addTab(e){return yGe(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),i=this.pool_.createApi(r);return this.add(i,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.children.forEach(e=>{bGe(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),i=xEe(n.value)?n.value.binding:null;this.emitter_.emit("change",new cM(r,i?i.target.read():n.value.rawValue,e.options.last))}},W7=class extends $0{constructor(e,n){super(e),this.rackApi_=new wGe(e.rackController,n)}},$7=class extends NF{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return kl(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return Al(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}};function FW(t){return"rackController"in t}let xGe=class{constructor(e){this.emitter=new Rs,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw Zo.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(o=>{this.cache_.add(o)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}};function SGe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(E0(r)&&r.value===e)return r}return null}function EGe(t){return FW(t)?t.rackController.rack.bcSet_:null}let CGe=class{constructor(e){var n,r;this.emitter=new Rs,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new xGe(EGe),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),E0(r))r.value.emitter.on("change",this.onChildValueChange_);else if(FW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.on("layout",this.onRackLayout_),o.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(E0(r))r.value.emitter.off("change",this.onChildValueChange_);else if(FW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.off("layout",this.onRackLayout_),o.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(i=>{const o=[];i===n&&(o.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&o.push("veryfirst")),i===r&&(o.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&o.push("verylast")),i.blade.set("positions",o)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=SGe(this.find(E0),e.sender);if(!n)throw Zo.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},K7=class{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new CGe({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&SEe(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&H7(e.bladeController.view.element)}};function _1(){return new _r({positions:Bi([],{equals:rHe})})}let X7=class IEe extends _r{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=_r.createCore(n);return new IEe(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!vi(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};Ad(this,"expanded",r),Ad(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function PGe(t,e){let n=0;return $He(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),zN(e),n=e.clientHeight,t.set("temporaryExpanded",null),zN(e)}),n}function Vbe(t,e){e.style.height=t.styleHeight}function q7(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),vi(t.get("expandedHeight"))){const n=PGe(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),zN(e)}),t.emitter.on("change",()=>{Vbe(t,e)}),Vbe(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}let REe=class extends W7{constructor(e,n){super(e,n),this.emitter_=new Rs,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new UHe(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.rackApi_.refresh()}};const DEe=Ur("cnt");let TGe=class{constructor(e,n){var r;this.className_=Ur((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),DEe()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Ad(this.foldable_,"completed",y1(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),Ad(n.props,"title",v=>{vi(v)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const o=e.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(this.className_("t")),G7(n.props.value("title"),u),this.buttonElement.appendChild(u),this.titleElement=u;const d=e.createElement("div");d.classList.add(this.className_("m")),this.buttonElement.appendChild(d);const m=e.createElement("div");m.classList.add(this.className_("c")),this.element.appendChild(m),this.containerElement=m}},BW=class extends $7{constructor(e,n){var r;const i=X7.create((r=n.expanded)!==null&&r!==void 0?r:!0),o=new TGe(e,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new K7({blade:n.blade,element:o.containerElement,root:n.root,viewProps:n.viewProps}),view:o})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,q7(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return kl(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Al(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};const MGe=Ia({id:"folder",type:"blade",accept(t){const e=Zi(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new BW(t.document,{blade:t.blade,expanded:t.params.expanded,props:_r.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof BW?new REe(t.controller,t.pool):null}}),kGe=Ur("");function jbe(t,e){return y1(t,kGe(void 0,e))}let K0=class OEe extends _r{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=lHe(Bi(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,i;const o=e??{};return new OEe(_r.createCore({disabled:(n=o.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=o.hidden)!==null&&r!==void 0?r:!1,parent:(i=o.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){op(this.globalDisabled_,jbe(e,"disabled")),Ad(this,"hidden",jbe(e,"hidden"))}bindDisabled(e){op(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){op(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const Hbe=Ur("tbp");let AGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Hbe()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Hbe("c")),this.element.appendChild(r),this.containerElement=r}};const EP=Ur("tbi");let IGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(EP()),n.viewProps.bindClassModifiers(this.element),Ad(n.props,"selected",o=>{o?this.element.classList.add(EP(void 0,"sel")):this.element.classList.remove(EP(void 0,"sel"))});const r=e.createElement("button");r.classList.add(EP("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(EP("t")),G7(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}},RGe=class{constructor(e,n){this.emitter=new Rs,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new IGe(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},UW=class extends $7{constructor(e,n){const r=new AGe(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new K7({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new RGe(e,{props:n.itemProps,viewProps:K0.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Ad(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return kl(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Al(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},DGe=class extends W7{constructor(e,n){super(e,n),this.emitter_=new Rs,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new UW(n,{blade:_1(),itemProps:_r.fromObject({selected:!1,title:e.title}),props:_r.fromObject({selected:!1}),viewProps:K0.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}onSelect_(e){this.emitter_.emit("select",new zHe(this,e.rawValue))}},OGe=class extends W7{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}};const Gbe=-1;let LGe=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Bi(!0),this.selectedIndex=Bi(Gbe),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Gbe,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}};const CP=Ur("tab");let NGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(CP(),DEe()),n.viewProps.bindClassModifiers(this.element),op(n.empty,y1(this.element,CP(void 0,"nop")));const r=e.createElement("div");r.classList.add(CP("t")),this.element.appendChild(r),this.itemsElement=r;const i=e.createElement("div");i.classList.add(CP("i")),this.element.appendChild(i);const o=e.createElement("div");o.classList.add(CP("c")),this.element.appendChild(o),this.contentsElement=o}},Wbe=class extends $7{constructor(e,n){const r=new LGe,i=new NGe(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new K7({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const o=this.rackController.rack;o.emitter.on("add",this.onRackAdd_),o.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;SEe(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;H7(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}};const LEe=Ia({id:"tab",type:"blade",accept(t){const e=Zi(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new Wbe(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new UW(t.document,{blade:_1(),itemProps:_r.fromObject({selected:!1,title:n.title}),props:_r.fromObject({selected:!1}),viewProps:K0.create()});e.add(r)}),e},api(t){return t.controller instanceof Wbe?new DGe(t.controller,t.pool):t.controller instanceof UW?new OGe(t.controller,t.pool):null}});function FGe(t,e){const n=t.accept(e.params);if(!n)return null;const r=Zi(e.params,i=>({disabled:i.optional.boolean,hidden:i.optional.boolean}));return t.controller({blade:_1(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden}),viewProps:K0.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})})}let Y7=class extends UT{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}},BGe=class{constructor(){this.disabled=!1,this.emitter=new Rs}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}},UGe=class{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new Rs,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}},dM=class{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}};function VN(t,e){if(t instanceof e)return t;if(t instanceof dM){const n=t.constraints.reduce((r,i)=>r||(i instanceof e?i:null),null);if(n)return n}return null}let hM=class{constructor(e){this.values=_r.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===e).length>0?e:n[0].value}};function pM(t){var e;const n=NW;if(Array.isArray(t))return(e=Zi({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function Z7(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function Q7(t){return vi(t)?null:new hM(Z7(t))}const FG=Ur("lst");let zGe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(FG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(FG("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=e.createElement("div");i.classList.add(FG("m")),i.appendChild(LF(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Ad(this.props_,"options",o=>{EEe(this.selectElement),o.forEach(u=>{const d=e.createElement("option");d.textContent=u.text,this.selectElement.appendChild(d)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},Ym=class{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new zGe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return kl(e,null,n=>({options:n.required.custom(pM)}),n=>(this.props.set("options",Z7(n.options)),!0))}exportProps(){return Al(null,{options:this.props.get("options")})}};const $be=Ur("pop");let VGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add($be()),n.viewProps.bindClassModifiers(this.element),op(n.shows,y1(this.element,$be(void 0,"v")))}},NEe=class{constructor(e,n){this.shows=Bi(!1),this.viewProps=n.viewProps,this.view=new VGe(e,{shows:this.shows,viewProps:this.viewProps})}};const Kbe=Ur("txt");let jGe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Kbe()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(Kbe("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}},zT=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new jGe(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);vi(i)||(this.value.rawValue=i),this.view.refresh()}};function HGe(t){return String(t)}function FEe(t){return t==="false"?!1:!!t}function Xbe(t){return HGe(t)}function GGe(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const WGe=Ja(0);function jN(t){return WGe(t)+"%"}function BEe(t){return String(t)}function zW(t){return t}function w1({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function o(u){i||(i=!0,u(),i=!1)}t.emitter.on("change",u=>{o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),e.emitter.on("change",u=>{o(()=>{t.setRawValue(r(t.rawValue,e.rawValue),u.options)}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function qa(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function VT(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function gp(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function $Ge(t){return t==="ArrowUp"||t==="ArrowDown"}function UEe(t){return $Ge(t)||t==="ArrowLeft"||t==="ArrowRight"}function BG(t,e){var n,r;const i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+o.left),y:t.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+o.top)}}let X0=class{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new Rs,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(BG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(BG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(BG(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}};const ou=Ur("txt");let KGe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(ou(),ou(void 0,"num")),n.arrayPosition&&this.element.classList.add(ou(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(ou("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(ou()),this.inputElement.classList.add(ou("i"));const i=e.createElement("div");i.classList.add(ou("k")),this.element.appendChild(i),this.knobElement=i;const o=e.createElementNS(Cd,"svg");o.classList.add(ou("g")),this.knobElement.appendChild(o);const u=e.createElementNS(Cd,"path");u.classList.add(ou("gb")),o.appendChild(u),this.guideBodyElem_=u;const d=e.createElementNS(Cd,"path");d.classList.add(ou("gh")),o.appendChild(d),this.guideHeadElem_=d;const m=e.createElement("div");m.classList.add(Ur("tt")()),this.knobElement.appendChild(m),this.tooltipElem_=m,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(ou(void 0,"drg"));return}this.element.classList.add(ou(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=Hs(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}},fM=class{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Bi(null),this.view=new KGe(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new X0(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),o=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let u=e;return i!==void 0&&(u=Math.max(u,i)),o!==void 0&&(u=Math.min(u,o)),u}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);vi(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const n=qa(this.props.get("keyScale"),VT(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){qa(this.props.get("keyScale"),VT(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const UG=Ur("sld");let XGe=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(UG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(UG("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add(UG("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=Hs(Yr(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}},qGe=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new XGe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new X0(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(Yr(Hs(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=qa(this.props.get("keyScale"),gp(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){qa(this.props.get("keyScale"),gp(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const zG=Ur("sldtxt");let YGe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(zG());const r=e.createElement("div");r.classList.add(zG("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(zG("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}},HN=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new qGe(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new fM(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new YGe(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return kl(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Al(null,{max:e.get("max"),min:e.get("min")})}};function zEe(t){return{sliderProps:new _r({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new _r({formatter:Bi(t.formatter),keyScale:t.keyScale,pointerScale:Bi(t.pointerScale)})}}const ZGe={containerUnitSize:"cnt-usz"};function VEe(t){return`--${ZGe[t]}`}function jT(t){return wEe(t)}function Am(t){if(LW(t))return Zi(t,jT)}function ep(t,e){if(!t)return;const n=[],r=yEe(t,e);r&&n.push(r);const i=bEe(t);return i&&n.push(i),new dM(n)}function QGe(t){return t?t.major===b1.major:!1}function jEe(t){if(t==="inline"||t==="popup")return t}function mM(t,e){t.write(e)}const xL=Ur("ckb");let JGe=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(xL()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(xL("l")),this.element.appendChild(r);const i=e.createElement("input");i.classList.add(xL("i")),i.type="checkbox",r.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const o=e.createElement("div");o.classList.add(xL("w")),r.appendChild(o);const u=LF(e,"check");o.appendChild(u),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},e9e=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new JGe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}};function t9e(t){const e=[],n=Q7(t.options);return n&&e.push(n),new dM(e)}const n9e=Ia({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Zi(e,r=>({options:r.optional.custom(pM),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>FEe,constraint:t=>t9e(t.params),writer:t=>mM},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&VN(r,hM);return i?new Ym(e,{props:new _r({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new e9e(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof Ym?new Y7(t.controller):null}}),t0=Ur("col");let r9e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(t0()),n.foldable.bindExpandedClass(this.element,t0(void 0,"expanded")),Ad(n.foldable,"completed",y1(this.element,t0(void 0,"cpl")));const r=e.createElement("div");r.classList.add(t0("h")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(t0("s")),r.appendChild(i),this.swatchElement=i;const o=e.createElement("div");if(o.classList.add(t0("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(t0("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}};function i9e(t,e,n){const r=Hs(t/255,0,1),i=Hs(e/255,0,1),o=Hs(n/255,0,1),u=Math.max(r,i,o),d=Math.min(r,i,o),m=u-d;let v=0,x=0;const E=(d+u)/2;return m!==0&&(x=m/(1-Math.abs(u+d-1)),r===u?v=(i-o)/m:i===u?v=2+(o-r)/m:v=4+(r-i)/m,v=v/6+(v<0?1:0)),[v*360,x*100,E*100]}function s9e(t,e,n){const r=(t%360+360)%360,i=Hs(e/100,0,1),o=Hs(n/100,0,1),u=(1-Math.abs(2*o-1))*i,d=u*(1-Math.abs(r/60%2-1)),m=o-u/2;let v,x,E;return r>=0&&r<60?[v,x,E]=[u,d,0]:r>=60&&r<120?[v,x,E]=[d,u,0]:r>=120&&r<180?[v,x,E]=[0,u,d]:r>=180&&r<240?[v,x,E]=[0,d,u]:r>=240&&r<300?[v,x,E]=[d,0,u]:[v,x,E]=[u,0,d],[(v+m)*255,(x+m)*255,(E+m)*255]}function o9e(t,e,n){const r=Hs(t/255,0,1),i=Hs(e/255,0,1),o=Hs(n/255,0,1),u=Math.max(r,i,o),d=Math.min(r,i,o),m=u-d;let v;m===0?v=0:u===r?v=60*(((i-o)/m%6+6)%6):u===i?v=60*((o-r)/m+2):v=60*((r-i)/m+4);const x=u===0?0:m/u,E=u;return[v,x*100,E*100]}function HEe(t,e,n){const r=mEe(t,360),i=Hs(e/100,0,1),o=Hs(n/100,0,1),u=o*i,d=u*(1-Math.abs(r/60%2-1)),m=o-u;let v,x,E;return r>=0&&r<60?[v,x,E]=[u,d,0]:r>=60&&r<120?[v,x,E]=[d,u,0]:r>=120&&r<180?[v,x,E]=[0,u,d]:r>=180&&r<240?[v,x,E]=[0,d,u]:r>=240&&r<300?[v,x,E]=[d,0,u]:[v,x,E]=[u,0,d],[(v+m)*255,(x+m)*255,(E+m)*255]}function a9e(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function l9e(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function Id(t){return[t[0],t[1],t[2]]}function FF(t,e){return[t[0],t[1],t[2],e]}const u9e={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:a9e,rgb:s9e},hsv:{hsl:l9e,hsv:(t,e,n)=>[t,e,n],rgb:HEe},rgb:{hsl:i9e,hsv:o9e,rgb:(t,e,n)=>[t,e,n]}};function i1(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function c9e(t,e){return t===e?e:mEe(t,e)}function GEe(t,e,n){var r;const i=i1(e,n);return[e==="rgb"?Hs(t[0],0,i[0]):c9e(t[0],i[0]),Hs(t[1],0,i[1]),Hs(t[2],0,i[2]),Hs((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function qbe(t,e,n,r){const i=i1(e,n),o=i1(e,r);return t.map((u,d)=>u/i[d]*o[d])}function WEe(t,e,n){const r=qbe(t,e.mode,e.type,"int"),i=u9e[e.mode][n.mode](...r);return qbe(i,n.mode,"int",n.type)}let Zr=class $Ee{static black(){return new $Ee([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=GEe(e,n,this.type)}getComponents(e){return FF(WEe(Id(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const sm=Ur("colp");let d9e=class{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(sm()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(sm("hsv"));const i=e.createElement("div");i.classList.add(sm("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const o=e.createElement("div");o.classList.add(sm("h")),this.hPaletteView_=n.hPaletteView,o.appendChild(this.hPaletteView_.element),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");if(u.classList.add(sm("rgb")),this.textsView_=n.textsView,u.appendChild(this.textsView_.element),this.element.appendChild(u),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const d=e.createElement("div");d.classList.add(sm("a"));const m=e.createElement("div");m.classList.add(sm("ap")),m.appendChild(this.alphaViews_.palette.element),d.appendChild(m);const v=e.createElement("div");v.classList.add(sm("at")),v.appendChild(this.alphaViews_.text.element),d.appendChild(v),this.element.appendChild(d)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}};function h9e(t){return t==="int"?"int":t==="float"?"float":void 0}function J7(t){return Zi(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(h9e)}),expanded:e.optional.boolean,picker:e.optional.custom(jEe),readonly:e.optional.constant(!1)}))}function F0(t){return t?.1:1}function KEe(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}let eK=class{constructor(e,n){this.type="float",this.mode=n,this.comps_=GEe(e,n,this.type)}getComponents(e){return FF(WEe(Id(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const p9e={int:(t,e)=>new Zr(t,e),float:(t,e)=>new eK(t,e)};function tK(t,e,n){return p9e[n](t,e)}function f9e(t){return t.type==="float"}function m9e(t){return t.type==="int"}function g9e(t){const e=t.getComponents(),n=i1(t.mode,"int");return new Zr([Math.round(Yr(e[0],0,1,0,n[0])),Math.round(Yr(e[1],0,1,0,n[1])),Math.round(Yr(e[2],0,1,0,n[2])),e[3]],t.mode)}function v9e(t){const e=t.getComponents(),n=i1(t.mode,"int");return new eK([Yr(e[0],0,n[0],0,1),Yr(e[1],0,n[1],0,1),Yr(e[2],0,n[2],0,1),e[3]],t.mode)}function Ca(t,e){if(t.type===e)return t;if(m9e(t)&&e==="float")return v9e(t);if(f9e(t)&&e==="int")return g9e(t);throw Zo.shouldNeverHappen()}function y9e(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function vu(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const b9e={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function XEe(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return b9e[r](n)}function qEe(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[vu(e[1],255),vu(e[2],255),vu(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function _9e(t){const e=qEe(t);return e?new Zr(e,"rgb"):null}function YEe(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[vu(e[1],255),vu(e[2],255),vu(e[3],255),vu(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function w9e(t){const e=YEe(t);return e?new Zr(e,"rgb"):null}function ZEe(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[XEe(e[1]),vu(e[2],100),vu(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function x9e(t){const e=ZEe(t);return e?new Zr(e,"hsl"):null}function QEe(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[XEe(e[1]),vu(e[2],100),vu(e[3],100),vu(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function S9e(t){const e=QEe(t);return e?new Zr(e,"hsl"):null}function JEe(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function E9e(t){const e=JEe(t);return e?new Zr(e,"rgb"):null}function eCe(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Yr(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Yr(parseInt(n[4],16),0,255,0,1)]:null}function C9e(t){const e=eCe(t);return e?new Zr(e,"rgb"):null}function tCe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Ybe(t){return e=>{const n=tCe(e);return n?tK(n,"rgb",t):null}}function nCe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Zbe(t){return e=>{const n=nCe(e);return n?tK(n,"rgb",t):null}}const P9e=[{parser:JEe,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:eCe,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:qEe,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:YEe,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:ZEe,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:QEe,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:tCe,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:nCe,result:{alpha:!0,mode:"rgb",notation:"object"}}];function T9e(t){return P9e.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function M9e(t,e="int"){const n=T9e(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function gM(t){const e=[E9e,C9e,_9e,w9e,x9e,S9e];t==="int"&&e.push(Ybe("int"),Zbe("int")),t==="float"&&e.push(Ybe("float"),Zbe("float"));const n=GGe(e);return r=>{const i=n(r);return i?Ca(i,t):null}}function k9e(t){const e=gM("int");if(typeof t!="string")return Zr.black();const n=e(t);return n??Zr.black()}function rCe(t){const e=Hs(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function nK(t,e="#"){const n=Id(t.getComponents("rgb")).map(rCe).join("");return`${e}${n}`}function rK(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(rCe).join("");return`${e}${r}`}function iCe(t){const e=Ja(0),n=Ca(t,"int");return`rgb(${Id(n.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function $L(t){const e=Ja(2),n=Ja(0);return`rgba(${Ca(t,"int").getComponents("rgb").map((o,u)=>(u===3?e:n)(o)).join(", ")})`}function A9e(t){const e=[Ja(0),jN,jN],n=Ca(t,"int");return`hsl(${Id(n.getComponents("hsl")).map((i,o)=>e[o](i)).join(", ")})`}function I9e(t){const e=[Ja(0),jN,jN,Ja(2)];return`hsla(${Ca(t,"int").getComponents("hsl").map((i,o)=>e[o](i)).join(", ")})`}function sCe(t,e){const n=Ja(e==="float"?2:0),r=["r","g","b"],i=Ca(t,e);return`{${Id(i.getComponents("rgb")).map((u,d)=>`${r[d]}: ${n(u)}`).join(", ")}}`}function R9e(t){return e=>sCe(e,t)}function oCe(t,e){const n=Ja(2),r=Ja(e==="float"?2:0),i=["r","g","b","a"];return`{${Ca(t,e).getComponents("rgb").map((d,m)=>{const v=m===3?n:r;return`${i[m]}: ${v(d)}`}).join(", ")}}`}function D9e(t){return e=>oCe(e,t)}const O9e=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:nK},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:rK},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:iCe},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:$L},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:A9e},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:I9e},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:R9e(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:D9e(e)}],[])];function aCe(t){return O9e.reduce((e,n)=>e||(y9e(n.format,t)?n.stringifier:null),null)}const PP=Ur("apl");let L9e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(PP()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(PP("b")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(PP("c")),r.appendChild(i),this.colorElem_=i;const o=e.createElement("div");o.classList.add(PP("m")),this.element.appendChild(o),this.markerElem_=o;const u=e.createElement("div");u.classList.add(PP("p")),this.markerElem_.appendChild(u),this.previewElem_=u,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Zr([n[0],n[1],n[2],0],"rgb"),i=new Zr([n[0],n[1],n[2],255],"rgb"),o=["to right",$L(r),$L(i)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=$L(e);const u=Yr(n[3],0,1,0,100);this.markerElem_.style.left=`${u}%`}onValueChange_(){this.update_()}},N9e=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new L9e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new X0(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,i=this.value.rawValue,[o,u,d]=i.getComponents("hsv");this.value.setRawValue(new Zr([o,u,d,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=qa(F0(!0),gp(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,d]=r.getComponents("hsv");this.value.setRawValue(new Zr([i,o,u,d+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){qa(F0(!0),gp(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const rw=Ur("coltxt");function F9e(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,i)=>{const o=t.createElement("option");return o.textContent=i.text,o.value=i.value,r.appendChild(o),r},t.createDocumentFragment())),e}let B9e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(rw()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(rw("m")),this.modeElem_=F9e(e),this.modeElem_.classList.add(rw("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(rw("mm")),i.appendChild(LF(e,"dropdown")),r.appendChild(i),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(rw("w")),this.element.appendChild(o),this.inputsElem_=o,this.inputViews_=n.inputViews,this.applyInputViews_(),op(n.mode,u=>{this.modeElem_.value=u})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){EEe(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(rw("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}};function U9e(t){return Ja(t==="float"?2:0)}function z9e(t,e,n){const r=i1(t,e)[n];return new uM({min:0,max:r})}function V9e(t,e,n){return new fM(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:_r.fromObject({formatter:U9e(e.colorType),keyScale:F0(!1),pointerScale:e.colorType==="float"?.01:1}),value:Bi(0,{constraint:z9e(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function j9e(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:mp,viewProps:e.viewProps};return[0,1,2].map(r=>{const i=V9e(t,n,r);return w1({primary:e.value,secondary:i.value,forward(o){return Ca(o,e.colorType).getComponents(e.colorMode)[r]},backward(o,u){const d=e.colorMode,v=Ca(o,e.colorType).getComponents(d);v[r]=u;const x=tK(FF(Id(v),v[3]),d,e.colorType);return Ca(x,"int")}}),i})}function H9e(t,e){const n=new zT(t,{parser:gM("int"),props:_r.fromObject({formatter:nK}),value:Bi(Zr.black()),viewProps:e.viewProps});return w1({primary:e.value,secondary:n.value,forward:r=>new Zr(Id(r.getComponents()),r.mode),backward:(r,i)=>new Zr(FF(Id(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function G9e(t){return t!=="hex"}let W9e=class{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Bi(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new B9e(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return G9e(n)?j9e(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):H9e(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}};const VG=Ur("hpl");let $9e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(VG()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(VG("c")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(VG("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=iCe(new Zr([n,100,100],"hsv"));const r=Yr(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}},K9e=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new $9e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new X0(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Yr(Hs(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,o,u,d]=i.getComponents("hsv");this.value.setRawValue(new Zr([r,o,u,d],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=qa(F0(!1),gp(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,d]=r.getComponents("hsv");this.value.setRawValue(new Zr([i+n,o,u,d],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){qa(F0(!1),gp(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const jG=Ur("svp"),Qbe=64;let X9e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(jG()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=Qbe,r.width=Qbe,r.classList.add(jG("c")),this.element.appendChild(r),this.canvasElement=r;const i=e.createElement("div");i.classList.add(jG("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=qHe(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,o=this.canvasElement.height,u=e.getImageData(0,0,i,o),d=u.data;for(let x=0;x<o;x++)for(let E=0;E<i;E++){const M=Yr(E,0,i,0,100),R=Yr(x,0,o,100,0),j=HEe(r[0],M,R),F=(x*i+E)*4;d[F]=j[0],d[F+1]=j[1],d[F+2]=j[2],d[F+3]=255}e.putImageData(u,0,0);const m=Yr(r[1],0,100,0,100);this.markerElem_.style.left=`${m}%`;const v=Yr(r[2],0,100,100,0);this.markerElem_.style.top=`${v}%`}onValueChange_(){this.update_()}},q9e=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new X9e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new X0(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Yr(e.point.x,0,e.bounds.width,0,100),i=Yr(e.point.y,0,e.bounds.height,100,0),[o,,,u]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Zr([o,r,i,u],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){UEe(e.key)&&e.preventDefault();const[n,r,i,o]=this.value.rawValue.getComponents("hsv"),u=F0(!1),d=qa(u,gp(e)),m=qa(u,VT(e));d===0&&m===0||this.value.setRawValue(new Zr([n,r+d,i+m,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=F0(!1),r=qa(n,gp(e)),i=qa(n,VT(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},Y9e=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new K9e(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new q9e(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new N9e(e,{value:this.value,viewProps:this.viewProps}),text:new fM(e,{parser:mp,props:_r.fromObject({pointerScale:.01,keyScale:.1,formatter:Ja(2)}),value:Bi(0,{constraint:new uM({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&w1({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const o=r.getComponents();return o[3]=i,new Zr(o,r.mode)}}),this.textsC_=new W9e(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new d9e(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const HG=Ur("colsw");let Z9e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(HG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(HG("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=e.createElement("button");i.classList.add(HG("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=rK(e)}onValueChange_(){this.update_()}},Q9e=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Z9e(e,{value:this.value,viewProps:this.viewProps})}},iK=class{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=X7.create(n.expanded),this.swatchC_=new Q9e(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new zT(e,{parser:n.parser,props:_r.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new r9e(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new NEe(e,{viewProps:this.viewProps}):null;const i=new Y9e(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),w1({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,u)=>u})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),q7(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=CEe(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!j7(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function J9e(t){return Id(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function eWe(t){return t.getComponents("rgb").reduce((e,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return e<<8|i},0)>>>0}function tWe(t){return new Zr([t>>16&255,t>>8&255,t&255],"rgb")}function nWe(t){return new Zr([t>>24&255,t>>16&255,t>>8&255,Yr(t&255,0,255,0,1)],"rgb")}function rWe(t){return typeof t!="number"?Zr.black():tWe(t)}function iWe(t){return typeof t!="number"?Zr.black():nWe(t)}function KL(t,e){return typeof t!="object"||vi(t)?!1:e in t&&typeof t[e]=="number"}function lCe(t){return KL(t,"r")&&KL(t,"g")&&KL(t,"b")}function uCe(t){return lCe(t)&&KL(t,"a")}function cCe(t){return lCe(t)}function sK(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function Jbe(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function sWe(t){const e=aCe(t);return e?(n,r)=>{mM(n,e(r))}:null}function oWe(t){const e=t?eWe:J9e;return(n,r)=>{mM(n,e(r))}}function aWe(t,e,n){const i=Ca(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function lWe(t,e,n){const i=Ca(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function uWe(t,e){return(n,r)=>{t?aWe(n,r,e):lWe(n,r,e)}}function cWe(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function dWe(t){return t?e=>rK(e,"0x"):e=>nK(e,"0x")}function hWe(t){return"color"in t||t.view==="color"}const pWe=Ia({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!hWe(e))return null;const n=J7(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:cWe(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?iWe:rWe,equals:sK,writer:t=>oWe(t.params.supportsAlpha)},controller:t=>{var e,n;return new iK(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:dWe(t.params.supportsAlpha),parser:gM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function fWe(t,e){if(!cCe(t))return Ca(Zr.black(),e);if(e==="int"){const n=Jbe(t);return new Zr(n,"rgb")}if(e==="float"){const n=Jbe(t);return new eK(n,"rgb")}return Ca(Zr.black(),"int")}function mWe(t){return uCe(t)}function gWe(t){return e=>{const n=fWe(e,t);return Ca(n,"int")}}function vWe(t,e){return n=>t?oCe(n,e):sCe(n,e)}const yWe=Ia({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!cCe(t))return null;const r=J7(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=KEe(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>gWe(t.params.colorType),equals:sK,writer:t=>uWe(mWe(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=uCe(t.initialValue);return new iK(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:vWe(r,t.params.colorType),parser:gM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}}),bWe=Ia({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=M9e(t,KEe(e));if(!n)return null;const r=aCe(n);if(!r)return null;const i=J7(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>k9e,equals:sK,writer:t=>{const e=sWe(t.params.format);if(!e)throw Zo.notBindable();return e}},controller:t=>{var e,n;return new iK(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:gM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});let oK=class{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,i)=>{var o,u;return(u=(o=this.components[i])===null||o===void 0?void 0:o.constrain(r))!==null&&u!==void 0?u:r});return this.asm_.fromComponents(n)}};const e_e=Ur("pndtxt");let _We=class{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(e_e()),this.textViews.forEach(r=>{const i=e.createElement("div");i.classList.add(e_e("a")),i.appendChild(r.element),this.element.appendChild(i)})}};function wWe(t,e,n){return new fM(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:Bi(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}let aK=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>wWe(e,n,i)),this.acs_.forEach((r,i)=>{w1({primary:this.value,secondary:r.value,forward:o=>n.assembly.toComponents(o)[i],backward:(o,u)=>{const d=n.assembly.toComponents(o);return d[i]=u,n.assembly.fromComponents(d)}})}),this.view=new _We(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}},xWe=class extends UT{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}};function SWe(t,e){const n=[],r=yEe(t,e);r&&n.push(r);const i=bEe(t);i&&n.push(i);const o=Q7(t.options);return o&&n.push(o),new dM(n)}const EWe=Ia({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=Zi(e,r=>Object.assign(Object.assign({},wEe(r)),{options:r.optional.custom(pM),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>fEe,constraint:t=>SWe(t.params,t.initialValue),writer:t=>mM},controller:t=>{const e=t.value,n=t.constraint,r=n&&VN(n,hM);if(r)return new Ym(t.document,{props:new _r({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const i=_Ee(t.params,e.rawValue),o=n&&VN(n,uM);return o?new HN(t.document,Object.assign(Object.assign({},zEe(Object.assign(Object.assign({},i),{keyScale:Bi(i.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:mp,value:e,viewProps:t.viewProps})):new fM(t.document,{parser:mp,props:_r.fromObject(i),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof HN?new xWe(t.controller):t.controller.valueController instanceof Ym?new Y7(t.controller):null}});let Hm=class{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(vi(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}};const dCe={toComponents:t=>t.getComponents(),fromComponents:t=>new Hm(...t)},iw=Ur("p2d");let CWe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(iw()),n.viewProps.bindClassModifiers(this.element),op(n.expanded,y1(this.element,iw(void 0,"expanded")));const r=e.createElement("div");r.classList.add(iw("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(iw("b")),i.appendChild(LF(e,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const o=e.createElement("div");if(o.classList.add(iw("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(iw("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}};const om=Ur("p2dp");let PWe=class{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(om()),n.layout==="popup"&&this.element.classList.add(om(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(om("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=e.createElementNS(Cd,"svg");i.classList.add(om("g")),this.padElement.appendChild(i),this.svgElem_=i;const o=e.createElementNS(Cd,"line");o.classList.add(om("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const u=e.createElementNS(Cd,"line");u.classList.add(om("ax")),u.setAttributeNS(null,"x1","50%"),u.setAttributeNS(null,"y1","0"),u.setAttributeNS(null,"x2","50%"),u.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(u);const d=e.createElementNS(Cd,"line");d.classList.add(om("l")),d.setAttributeNS(null,"x1","50%"),d.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(d),this.lineElem_=d;const m=e.createElement("div");m.classList.add(om("m")),this.padElement.appendChild(m),this.markerElem_=m,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=Yr(e,-r,+r,0,100),o=Yr(n,-r,+r,0,100),u=this.props_.get("invertsY")?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${u}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function t_e(t,e,n){return[qa(e[0],gp(t)),qa(e[1],VT(t))*(n?1:-1)]}let TWe=class{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new PWe(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new X0(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),i=Yr(e.point.x,0,e.bounds.width,-r,+r),o=Yr(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new Hm(i,o),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){UEe(e.key)&&e.preventDefault();const[n,r]=t_e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new Hm(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=t_e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},MWe=class{constructor(e,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=X7.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new NEe(e,{viewProps:this.viewProps}):null;const o=new TWe(e,{layout:n.pickerLayout,props:new _r({invertsY:Bi(n.invertsY),max:Bi(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new aK(e,{assembly:dCe,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new CWe(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),w1({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,d)=>d})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),q7(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=CEe(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!j7(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}};function kWe(t){return Hm.isObject(t)?new Hm(t.x,t.y):new Hm}function AWe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function IWe(t,e){return new oK({assembly:dCe,components:[ep(Object.assign(Object.assign({},t),t.x),e.x),ep(Object.assign(Object.assign({},t),t.y),e.y)]})}function n_e(t,e){var n,r;if(!vi(t.min)||!vi(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const i=gEe(t);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function RWe(t,e){var n,r;const i=n_e(L0(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),o=n_e(L0(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(i,o)}function DWe(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}const OWe=Ia({id:"input-point2d",type:"input",accept:(t,e)=>{if(!Hm.isObject(t))return null;const n=Zi(e,r=>Object.assign(Object.assign({},jT(r)),{expanded:r.optional.boolean,picker:r.optional.custom(jEe),readonly:r.optional.constant(!1),x:r.optional.custom(Am),y:r.optional.object(Object.assign(Object.assign({},jT(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>kWe,constraint:t=>IWe(t.params,t.initialValue),equals:Hm.equals,writer:()=>AWe},controller:t=>{var e,n;const r=t.document,i=t.value,o=t.constraint,u=[t.params.x,t.params.y];return new MWe(r,{axes:i.rawValue.getComponents().map((d,m)=>{var v;return V7({constraint:o.components[m],initialValue:d,params:L0(t.params,(v=u[m])!==null&&v!==void 0?v:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:DWe(t.params),max:RWe(t.params,i.rawValue),parser:mp,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps})}});let Vw=class{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(vi(e))return!1;const n=e.x,r=e.y,i=e.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const hCe={toComponents:t=>t.getComponents(),fromComponents:t=>new Vw(...t)};function LWe(t){return Vw.isObject(t)?new Vw(t.x,t.y,t.z):new Vw}function NWe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function FWe(t,e){return new oK({assembly:hCe,components:[ep(Object.assign(Object.assign({},t),t.x),e.x),ep(Object.assign(Object.assign({},t),t.y),e.y),ep(Object.assign(Object.assign({},t),t.z),e.z)]})}const BWe=Ia({id:"input-point3d",type:"input",accept:(t,e)=>{if(!Vw.isObject(t))return null;const n=Zi(e,r=>Object.assign(Object.assign({},jT(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Am),y:r.optional.custom(Am),z:r.optional.custom(Am)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>LWe,constraint:t=>FWe(t.params,t.initialValue),equals:Vw.equals,writer:t=>NWe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new aK(t.document,{assembly:hCe,axes:e.rawValue.getComponents().map((i,o)=>{var u;return V7({constraint:n.components[o],initialValue:i,params:L0(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:mp,value:e,viewProps:t.viewProps})}});let jw=class{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(vi(e))return!1;const n=e.x,r=e.y,i=e.z,o=e.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const pCe={toComponents:t=>t.getComponents(),fromComponents:t=>new jw(...t)};function UWe(t){return jw.isObject(t)?new jw(t.x,t.y,t.z,t.w):new jw}function zWe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function VWe(t,e){return new oK({assembly:pCe,components:[ep(Object.assign(Object.assign({},t),t.x),e.x),ep(Object.assign(Object.assign({},t),t.y),e.y),ep(Object.assign(Object.assign({},t),t.z),e.z),ep(Object.assign(Object.assign({},t),t.w),e.w)]})}const jWe=Ia({id:"input-point4d",type:"input",accept:(t,e)=>{if(!jw.isObject(t))return null;const n=Zi(e,r=>Object.assign(Object.assign({},jT(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Am),x:r.optional.custom(Am),y:r.optional.custom(Am),z:r.optional.custom(Am)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>UWe,constraint:t=>VWe(t.params,t.initialValue),equals:jw.equals,writer:t=>zWe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new aK(t.document,{assembly:pCe,axes:e.rawValue.getComponents().map((i,o)=>{var u;return V7({constraint:n.components[o],initialValue:i,params:L0(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:mp,value:e,viewProps:t.viewProps})}});function HWe(t){const e=[],n=Q7(t.options);return n&&e.push(n),new dM(e)}const GWe=Ia({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=Zi(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(pM)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>BEe,constraint:t=>HWe(t.params),writer:t=>mM},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&VN(r,hM);return i?new Ym(e,{props:new _r({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new zT(e,{parser:o=>o,props:_r.fromObject({formatter:zW}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof Ym?new Y7(t.controller):null}}),vM={monitor:{defaultInterval:200,defaultRows:3}},r_e=Ur("mll");let WWe=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(r_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(r_e("i")),r.style.height=`calc(var(${VEe("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}},lK=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new WWe(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}};const i_e=Ur("sgl");let $We=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(i_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(i_e("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}},uK=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new $We(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}};const KWe=Ia({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Zi(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>FEe},controller:t=>{var e;return t.value.rawValue.length===1?new uK(t.document,{formatter:Xbe,value:t.value,viewProps:t.viewProps}):new lK(t.document,{formatter:Xbe,rows:(e=t.params.rows)!==null&&e!==void 0?e:vM.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});let XWe=class extends UT{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}};const am=Ur("grl");let qWe=class{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(am()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(Cd,"svg");r.classList.add(am("g")),r.style.height=`calc(var(${VEe("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(Cd,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const o=e.createElement("div");o.classList.add(am("t"),Ur("tt")()),this.element.appendChild(o),this.tooltipElem_=o,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),i=this.props_.get("max"),o=[];this.value.rawValue.forEach((x,E)=>{if(x===void 0)return;const M=Yr(E,0,n,0,e.width),R=Yr(x,r,i,e.height,0);o.push([M,R].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const u=this.tooltipElem_,d=this.value.rawValue[this.cursor_.rawValue];if(d===void 0){u.classList.remove(am("t","a"));return}const m=Yr(this.cursor_.rawValue,0,n,0,e.width),v=Yr(d,r,i,e.height,0);u.style.left=`${m}px`,u.style.top=`${v}px`,u.textContent=`${this.formatter_(d)}`,u.classList.contains(am("t","a"))||(u.classList.add(am("t","a"),am("t","in")),zN(u),u.classList.remove(am("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},fCe=class{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Bi(-1),this.view=new qWe(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!j7(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new X0(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return kl(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Al(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Yr(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Yr(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function VW(t){return vi(t.format)?Ja(2):t.format}function YWe(t){var e;return t.value.rawValue.length===1?new uK(t.document,{formatter:VW(t.params),value:t.value,viewProps:t.viewProps}):new lK(t.document,{formatter:VW(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:vM.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function ZWe(t){var e,n,r;return new fCe(t.document,{formatter:VW(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:vM.monitor.defaultRows,props:_r.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function s_e(t){return t.view==="graph"}const QWe=Ia({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=Zi(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>s_e(t)?64:1,reader:t=>fEe},controller:t=>s_e(t.params)?ZWe(t):YWe(t),api:t=>t.controller.valueController instanceof fCe?new XWe(t.controller):null}),JWe=Ia({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=Zi(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>BEe},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new lK(t.document,{formatter:zW,rows:(e=t.params.rows)!==null&&e!==void 0?e:vM.monitor.defaultRows,value:n,viewProps:t.viewProps}):new uK(t.document,{formatter:zW,value:n,viewProps:t.viewProps})}});class e$e{constructor(){this.map_=new Map}get(e){var n;return(n=this.map_.get(e))!==null&&n!==void 0?n:null}has(e){return this.map_.has(e)}add(e,n){return this.map_.set(e,n),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),n}}class t$e{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function n$e(t,e){var n;const r=t.accept(e.target.read(),e.params);if(vi(r))return null;const i={target:e.target,initialValue:r.initialValue,params:r.params},o=Zi(e.params,E=>({disabled:E.optional.boolean,hidden:E.optional.boolean,label:E.optional.string,tag:E.optional.string})),u=t.binding.reader(i),d=t.binding.constraint?t.binding.constraint(i):void 0,m=new t$e({reader:u,target:e.target,writer:t.binding.writer(i)}),v=new VHe(Bi(u(r.initialValue),{constraint:d,equals:t.binding.equals}),m),x=t.controller({constraint:d,document:e.document,initialValue:r.initialValue,params:r.params,value:v,viewProps:K0.create({disabled:o==null?void 0:o.disabled,hidden:o==null?void 0:o.hidden})});return new nGe(e.document,{blade:_1(),props:_r.fromObject({label:"label"in e.params?(n=o==null?void 0:o.label)!==null&&n!==void 0?n:null:e.target.key}),tag:o==null?void 0:o.tag,value:v,valueController:x})}class r$e{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function i$e(t,e){return e===0?new BGe:new UGe(t,e??vM.monitor.defaultInterval)}function s$e(t,e){var n,r,i;const o=t.accept(e.target.read(),e.params);if(vi(o))return null;const u={target:e.target,initialValue:o.initialValue,params:o.params},d=Zi(e.params,M=>({bufferSize:M.optional.number,disabled:M.optional.boolean,hidden:M.optional.boolean,interval:M.optional.number,label:M.optional.string})),m=t.binding.reader(u),v=(r=(n=d==null?void 0:d.bufferSize)!==null&&n!==void 0?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(o.params))!==null&&r!==void 0?r:1,x=new aGe({binding:new r$e({reader:m,target:e.target}),bufferSize:v,ticker:i$e(e.document,d==null?void 0:d.interval)}),E=t.controller({document:e.document,params:o.params,value:x,viewProps:K0.create({disabled:d==null?void 0:d.disabled,hidden:d==null?void 0:d.hidden})});return E.viewProps.bindDisabled(x.ticker),E.viewProps.handleDispose(()=>{x.ticker.dispose()}),new uGe(e.document,{blade:_1(),props:_r.fromObject({label:"label"in e.params?(i=d==null?void 0:d.label)!==null&&i!==void 0?i:null:e.target.key}),value:x,valueController:E})}class o$e{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,n){if(!QGe(n.core))throw Zo.notCompatible(e,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(e,n,r){return this.pluginsMap_.inputs.reduce((i,o)=>i??n$e(o,{document:e,target:n,params:r}),null)}createMonitor_(e,n,r){return this.pluginsMap_.monitors.reduce((i,o)=>i??s$e(o,{document:e,params:r,target:n}),null)}createBinding(e,n,r){const i=n.read();if(vi(i))throw new Zo({context:{key:n.key},type:"nomatchingcontroller"});const o=this.createInput_(e,n,r);if(o)return o;const u=this.createMonitor_(e,n,r);if(u)return u;throw new Zo({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(e,n){const r=this.pluginsMap_.blades.reduce((i,o)=>i??FGe(o,{document:e,params:n}),null);if(!r)throw new Zo({type:"nomatchingview",context:{params:n}});return r}createInputBindingApi_(e){const n=this.pluginsMap_.inputs.reduce((r,i)=>{var o,u;return r||((u=(o=i.api)===null||o===void 0?void 0:o.call(i,{controller:e}))!==null&&u!==void 0?u:null)},null);return this.apiCache_.add(e,n??new UT(e))}createMonitorBindingApi_(e){const n=this.pluginsMap_.monitors.reduce((r,i)=>{var o,u;return r||((u=(o=i.api)===null||o===void 0?void 0:o.call(i,{controller:e}))!==null&&u!==void 0?u:null)},null);return this.apiCache_.add(e,n??new UT(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(rGe(e))return this.createInputBindingApi_(e);if(cGe(e))return this.createMonitorBindingApi_(e);throw Zo.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(tGe(e))return this.createBindingApi(e);const n=this.pluginsMap_.blades.reduce((r,i)=>r??i.api({controller:e,pool:this}),null);if(!n)throw Zo.shouldNeverHappen();return this.apiCache_.add(e,n)}}const a$e=new e$e;function l$e(){const t=new o$e(a$e);return[OWe,BWe,jWe,GWe,EWe,bWe,yWe,pWe,n9e,KWe,JWe,QWe,mGe,MGe,LEe].forEach(e=>{t.register("core",e)}),t}class u$e extends $0{constructor(e){super(e),this.emitter_=new Rs,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new cM(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}}class c$e extends $0{}class d$e extends $0{constructor(e){super(e),this.emitter_=new Rs,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new cM(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}}class h$e extends $0{constructor(e){super(e),this.emitter_=new Rs,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new cM(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}}const p$e=function(){return{id:"list",type:"blade",core:b1,accept(t){const e=Zi(t,n=>({options:n.required.custom(pM),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=new hM(Z7(t.params.options)),n=Bi(t.params.value,{constraint:e}),r=new Ym(t.document,{props:new _r({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new N0(t.document,{blade:t.blade,props:_r.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof N0)||!(t.controller.valueController instanceof Ym)?null:new u$e(t.controller)}}}();class f$e extends REe{constructor(e,n){super(e,n)}get element(){return this.controller.view.element}}class m$e extends BW{constructor(e,n){super(e,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const o_e=Ur("spr");class g$e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(o_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("hr");r.classList.add(o_e("r")),this.element.appendChild(r)}}class a_e extends NF{constructor(e,n){super(Object.assign(Object.assign({},n),{view:new g$e(e,{viewProps:n.viewProps})}))}}const v$e={id:"separator",type:"blade",core:b1,accept(t){const e=Zi(t,n=>({view:n.required.constant("separator")}));return e?{params:e}:null},controller(t){return new a_e(t.document,{blade:t.blade,viewProps:t.viewProps})},api(t){return t.controller instanceof a_e?new c$e(t.controller):null}},y$e={id:"slider",type:"blade",core:b1,accept(t){const e=Zi(t,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return e?{params:e}:null},controller(t){var e,n;const r=(e=t.params.value)!==null&&e!==void 0?e:0,i=new uM({max:t.params.max,min:t.params.min}),o=Bi(r,{constraint:i}),u=new HN(t.document,Object.assign(Object.assign({},zEe({formatter:(n=t.params.format)!==null&&n!==void 0?n:FHe,keyScale:Bi(1),max:i.values.value("max"),min:i.values.value("min"),pointerScale:vEe(t.params,r)})),{parser:mp,value:o,viewProps:t.viewProps}));return new N0(t.document,{blade:t.blade,props:_r.fromObject({label:t.params.label}),value:o,valueController:u})},api(t){return!(t.controller instanceof N0)||!(t.controller.valueController instanceof HN)?null:new d$e(t.controller)}},b$e=function(){return{id:"text",type:"blade",core:b1,accept(t){const e=Zi(t,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return e?{params:e}:null},controller(t){var e;const n=Bi(t.params.value),r=new zT(t.document,{parser:t.params.parse,props:_r.fromObject({formatter:(e=t.params.format)!==null&&e!==void 0?e:i=>String(i)}),value:n,viewProps:t.viewProps});return new N0(t.document,{blade:t.blade,props:_r.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof N0)||!(t.controller.valueController instanceof zT)?null:new h$e(t.controller)}}}();function _$e(t){const e=t.createElement("div");return e.classList.add(Ur("dfw")()),t.body&&t.body.appendChild(e),e}function w$e(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}class x$e extends f$e{constructor(e){var n,r;const i=e??{},o=(n=i.document)!==null&&n!==void 0?n:XHe(),u=l$e(),d=new m$e(o,{expanded:i.expanded,blade:_1(),props:_r.fromObject({title:i.title}),viewProps:K0.create()});super(d,u),this.pool_=u,this.containerElem_=(r=i.container)!==null&&r!==void 0?r:_$e(o),this.containerElem_.appendChild(this.element),this.doc_=o,this.usesDefaultWrapper_=!i.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw Zo.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw Zo.alreadyDisposed();if(this.usesDefaultWrapper_){const n=e.parentElement;n&&n.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&w$e(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(r=>{this.pool_.register(e.id,r)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(		2px * 2 + var(--cnt-usz) + var(--cnt-hp)	);position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(		var(--cnt-hp) + (				var(--cnt-usz) + 4px - 6px			) / 2 - 2px	);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(			var(--cnt-vp) + 2px		);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz) * 3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(			var(--bld-hp) - 5px		);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(			2px * 2 + var(--cnt-usz) + var(--cnt-hp)		);text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[p$e,v$e,y$e,LEe,b$e]})}}new AEe("4.0.0");function Ni(t){return t==null}function cK(t){return t!==null&&typeof t=="object"}function jW(t){return t!==null&&typeof t=="object"}function S$e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function B0(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,i)=>{const o=t[i],u=e[i];return jW(o)&&jW(u)?Object.assign(Object.assign({},r),{[i]:B0(o,u)}):Object.assign(Object.assign({},r),{[i]:i in e?u:o})},{})}function E$e(t){return cK(t)?"target"in t:!1}const C$e={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Sa{static alreadyDisposed(){return new Sa({type:"alreadydisposed"})}static notBindable(){return new Sa({type:"notbindable"})}static notCompatible(e,n){return new Sa({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new Sa({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new Sa({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=C$e[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class GN{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!GN.isBindable(r))throw Sa.notBindable();if(!(e in r))throw Sa.propertyNotFound(e);r[e]=n}}class ea{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(i=>i.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(i=>{i.handler(n)})}}class P$e{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(i,o)=>i===o,this.emitter=new ea,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.constraint_?this.constraint_.constrain(e):e,o=this.rawValue_;this.equals_(o,i)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=i,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:i,sender:this}))}}class T$e{constructor(e){this.emitter=new ea,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},i=this.value_;i===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:i,rawValue:this.value_,sender:this}))}}class M$e{constructor(e){this.emitter=new ea,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function os(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new T$e(t):new P$e(t,e)}function k$e(t){return[new M$e(t),(e,n)=>{t.setRawValue(e,n)}]}class dr{constructor(e){this.emitter=new ea,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,i)=>Object.assign(r,{[i]:os(e[i])}),{})}static fromObject(e){const n=this.createCore(e);return new dr(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}}class yM{constructor(e){this.values=dr.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}}class dK{constructor(e){this.values=dr.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let i=e;return Ni(r)||(i=Math.max(i,r)),Ni(n)||(i=Math.min(i,n)),i}}class A$e{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}}class I$e{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const R$e={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class D$e{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=R$e[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const O$e={"+":t=>t,"-":t=>-t,"~":t=>~t};class L$e{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=O$e[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function hK(t){return(e,n)=>{for(let r=0;r<t.length;r++){const i=t[r](e,n);if(i!=="")return i}return""}}function HT(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function N$e(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function GT(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function F$e(t,e){const n=GT(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const i=GT(t,e);return i===""?"":r+i}function pK(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=F$e(t,e);return r===""?"":n+r}function mCe(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=N$e(t,e);return e+=r.length,r===""?"":r+GT(t,e)}function B$e(t,e){const n=mCe(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const i=GT(t,e);return e+=i.length,n+r+i+pK(t,e)}function U$e(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=GT(t,e);return e+=r.length,r===""?"":n+r+pK(t,e)}function z$e(t,e){const n=mCe(t,e);return e+=n.length,n===""?"":n+pK(t,e)}const V$e=hK([B$e,U$e,z$e]);function j$e(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function H$e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=j$e(t,e);return r===""?"":n+r}function G$e(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function W$e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=G$e(t,e);return r===""?"":n+r}function $$e(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function K$e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=$$e(t,e);return r===""?"":n+r}const X$e=hK([H$e,W$e,K$e]),q$e=hK([X$e,V$e]);function Y$e(t,e){const n=q$e(t,e);return e+=n.length,n===""?null:{evaluable:new I$e(n),cursor:e}}function Z$e(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=vCe(t,e);if(!r)return null;e=r.cursor,e+=HT(t,e).length;const i=t.substr(e,1);return e+=i.length,i!==")"?null:{evaluable:r.evaluable,cursor:e}}function Q$e(t,e){var n;return(n=Y$e(t,e))!==null&&n!==void 0?n:Z$e(t,e)}function gCe(t,e){const n=Q$e(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const i=gCe(t,e);return i?(e=i.cursor,{cursor:e,evaluable:new L$e(r,i.evaluable)}):null}function J$e(t,e,n){n+=HT(e,n).length;const r=t.filter(i=>e.startsWith(i,n))[0];return r?(n+=r.length,n+=HT(e,n).length,{cursor:n,operator:r}):null}function e7e(t,e){return(n,r)=>{const i=t(n,r);if(!i)return null;r=i.cursor;let o=i.evaluable;for(;;){const u=J$e(e,n,r);if(!u)break;r=u.cursor;const d=t(n,r);if(!d)return null;r=d.cursor,o=new D$e(u.operator,o,d.evaluable)}return o?{cursor:r,evaluable:o}:null}}const t7e=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>e7e(t,e),gCe);function vCe(t,e){return e+=HT(t,e).length,t7e(t,e)}function n7e(t){const e=vCe(t,0);return!e||e.cursor+HT(t,e.cursor).length!==t.length?null:e.evaluable}function xc(t){var e;const n=n7e(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function fK(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=xc(t);if(!Ni(e))return e}return 0}function Ao(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function cr(t,e,n,r,i){const o=(t-e)/(n-e);return r+o*(i-r)}function l_e(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Ki(t,e,n){return Math.min(Math.max(t,e),n)}function yCe(t,e){return(t%e+e)%e}function r7e(t,e){return Ni(t.step)?Math.max(l_e(e),2):l_e(t.step)}function bCe(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function i7e(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function mK(t,e){return Ni(t.step)?null:new A$e(t.step,e)}function gK(t){return!Ni(t.max)&&!Ni(t.min)?new yM({max:t.max,min:t.min}):!Ni(t.max)||!Ni(t.min)?new dK({max:t.max,min:t.min}):null}function vK(t,e){var n,r,i;return{formatter:(n=t.format)!==null&&n!==void 0?n:Ao(r7e(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:bCe(t),pointerScale:(i=t.pointerScale)!==null&&i!==void 0?i:i7e(t,e)}}function yK(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function bK(t){return{constraint:t.constraint,textProps:dr.fromObject(vK(t.params,t.initialValue))}}class q0{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class x1{constructor(e){this.target=e}}class BF extends x1{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}}class s7e extends x1{constructor(e,n){super(e),this.expanded=n}}class o7e extends x1{constructor(e,n){super(e),this.index=n}}class _K extends q0{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new ea,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new BF(this,n.binding.target.read(),e.options.last))}}function a7e(t,e){const r=Object.keys(e).reduce((i,o)=>{if(i===void 0)return;const u=e[o],d=u(t[o]);return d.succeeded?Object.assign(Object.assign({},i),{[o]:d.value}):void 0},{});return r}function l7e(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const i=e(r);if(!(!i.succeeded||i.value===void 0))return[...n,i.value]},[])}function u7e(t){return t===null?!1:typeof t=="object"}function $h(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function u_e(t){return{custom:e=>$h(e)(t),boolean:$h(e=>typeof e=="boolean"?e:void 0)(t),number:$h(e=>typeof e=="number"?e:void 0)(t),string:$h(e=>typeof e=="string"?e:void 0)(t),function:$h(e=>typeof e=="function"?e:void 0)(t),constant:e=>$h(n=>n===e?e:void 0)(t),raw:$h(e=>e)(t),object:e=>$h(n=>{if(u7e(n))return a7e(n,e)})(t),array:e=>$h(n=>{if(Array.isArray(n))return l7e(n,e)})(t)}}const HW={optional:u_e(!0),required:u_e(!1)};function as(t,e){const n=e(HW),r=HW.required.object(n)(t);return r.succeeded?r.value:void 0}function Ec(t,e,n,r){if(e&&!e(t))return!1;const i=as(t,n);return i?r(i):!1}function Cc(t,e){var n;return B0((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function XL(t){return"value"in t}function c7e(t){if(!cK(t)||!("binding"in t))return!1;const e=t.binding;return E$e(e)}const ro="http://www.w3.org/2000/svg";function WN(t){t.offsetHeight}function d7e(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function UF(t){return t.ontouchstart!==void 0}function h7e(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const p7e={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function zF(t,e){const n=t.createElementNS(ro,"svg");return n.innerHTML=p7e[e],n}function _Ce(t,e,n){t.insertBefore(e,t.children[n])}function wK(t){t.parentElement&&t.parentElement.removeChild(t)}function wCe(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function f7e(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function xK(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function wu(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function Eu(t,e,n){wu(t.value(e),n)}const m7e="tp";function mr(t){return(n,r)=>[m7e,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const TP=mr("lbl");function g7e(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(i=>t.createTextNode(i)).forEach((i,o)=>{o>0&&n.appendChild(t.createElement("br")),n.appendChild(i)}),n}class xCe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(TP()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(TP("l")),Eu(n.props,"label",o=>{Ni(o)?this.element.classList.add(TP(void 0,"nol")):(this.element.classList.remove(TP(void 0,"nol")),f7e(r),r.appendChild(g7e(e,o)))}),this.element.appendChild(r),this.labelElement=r;const i=e.createElement("div");i.classList.add(TP("v")),this.element.appendChild(i),this.valueElement=i}}class VF{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new xCe(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Ec(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Cc(null,{label:this.props.get("label")})}}function v7e(){return["veryfirst","first","last","verylast"]}const c_e=mr(""),d_e={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class bM{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{v7e().forEach(r=>{n.classList.remove(c_e(void 0,d_e[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(c_e(void 0,d_e[r]))})}),this.viewProps.handleDispose(()=>{wK(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Ec(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Cc(null,Object.assign({},this.viewProps.exportState()))}}class $N extends bM{constructor(e,n){if(n.value!==n.valueController.value)throw Sa.shouldNeverHappen();const r=n.valueController.viewProps,i=new VF(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new xCe(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=i,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return Ec(e,n=>{var r,i,o;return super.importState(n)&&this.labelController.importProps(n)&&((o=(i=(r=this.valueController).importProps)===null||i===void 0?void 0:i.call(r,e))!==null&&o!==void 0?o:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return Cc(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}}function SCe(t,e){for(;t.length<e;)t.push(void 0)}function y7e(t){const e=[];return SCe(e,t),e}function b7e(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function _7e(t,e){const n=[...b7e(t),e];return n.length>t.length?n.splice(0,n.length-t.length):SCe(n,t.length),n}class w7e extends q0{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new x1(this))}),this}}function x7e(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function ig(t,e){return n=>{x7e(t,e,n)}}function SK(t,e){wu(t,n=>{e.textContent=n??""})}const GG=mr("btn");class S7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(GG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(GG("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(GG("t")),SK(n.props.value("title"),i),this.buttonElement.appendChild(i)}}class ECe{constructor(e,n){this.emitter=new ea,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new S7e(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Ec(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Cc(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}}class h_e extends bM{constructor(e,n){const r=new ECe(e,{props:n.buttonProps,viewProps:n.viewProps}),i=new VF(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=i}importState(e){return Ec(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Cc(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class E7e{constructor(e){const[n,r]=e.split("-"),i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const C7e=new E7e("2.0.0-beta.2");function xs(t){return Object.assign({core:C7e},t)}xs({id:"button",type:"blade",accept(t){const e=as(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new h_e(t.document,{blade:t.blade,buttonProps:dr.fromObject({title:t.params.title}),labelProps:dr.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof h_e?new w7e(t.controller):null}});function P7e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function T7e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function M7e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function k7e(t){return cK(t)?"refresh"in t&&typeof t.refresh=="function":!1}function A7e(t,e){if(!GN.isBindable(t))throw Sa.notBindable();return new GN(t,e)}class I7e{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new ea,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const i=r??{},o=this.controller_.element.ownerDocument,u=this.pool_.createBinding(o,A7e(e,n),i),d=this.pool_.createBindingApi(u);return this.add(d,i.index)}addFolder(e){return T7e(this,e)}addButton(e){return P7e(this,e)}addTab(e){return M7e(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),i=this.pool_.createApi(r);return this.add(i,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.children.forEach(e=>{k7e(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),i=c7e(n.value)?n.value.binding:null;this.emitter_.emit("change",new BF(r,i?i.target.read():n.value.rawValue,e.options.last))}}class EK extends q0{constructor(e,n){super(e),this.rackApi_=new I7e(e.rackController,n)}}class CK extends bM{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Ec(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,i)=>r.importState(n.children[i])))}exportState(){return Cc(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function GW(t){return"rackController"in t}class R7e{constructor(e){this.emitter=new ea,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw Sa.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const i=this.extract_(e);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(o=>{this.cache_.add(o)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(i=>{this.cache_.delete(i)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function D7e(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(XL(r)&&r.value===e)return r}return null}function O7e(t){return GW(t)?t.rackController.rack.bcSet_:null}class L7e{constructor(e){var n,r;this.emitter=new ea,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new R7e(O7e),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),XL(r))r.value.emitter.on("change",this.onChildValueChange_);else if(GW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.on("layout",this.onRackLayout_),o.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(XL(r))r.value.emitter.off("change",this.onChildValueChange_);else if(GW(r)){const i=r.rackController.rack;if(i){const o=i.emitter;o.off("layout",this.onRackLayout_),o.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(i=>!i.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(i=>{const o=[];i===n&&(o.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&o.push("veryfirst")),i===r&&(o.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&o.push("verylast")),i.blade.set("positions",o)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=D7e(this.find(XL),e.sender);if(!n)throw Sa.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class PK{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new L7e({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&_Ce(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&wK(e.bladeController.view.element)}}function CCe(){return new dr({positions:os([],{equals:S$e})})}class S1 extends dr{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=dr.createCore(n);return new S1(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!Ni(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};Eu(this,"expanded",r),Eu(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function N7e(t,e){let n=0;return d7e(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),WN(e),n=e.clientHeight,t.set("temporaryExpanded",null),WN(e)}),n}function p_e(t,e){e.style.height=t.styleHeight}function jF(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),Ni(t.get("expandedHeight"))){const n=N7e(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),WN(e)}),t.emitter.on("change",()=>{p_e(t,e)}),p_e(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}class F7e extends EK{constructor(e,n){super(e,n),this.emitter_=new ea,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new s7e(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}refresh(){this.rackApi_.refresh()}}const PCe=mr("cnt");class B7e{constructor(e,n){var r;this.className_=mr((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),PCe()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Eu(this.foldable_,"completed",ig(this.element,this.className_(void 0,"cpl")));const i=e.createElement("button");i.classList.add(this.className_("b")),Eu(n.props,"title",v=>{Ni(v)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i;const o=e.createElement("div");o.classList.add(this.className_("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(this.className_("t")),SK(n.props.value("title"),u),this.buttonElement.appendChild(u),this.titleElement=u;const d=e.createElement("div");d.classList.add(this.className_("m")),this.buttonElement.appendChild(d);const m=e.createElement("div");m.classList.add(this.className_("c")),this.element.appendChild(m),this.containerElement=m}}class f_e extends CK{constructor(e,n){var r;const i=S1.create((r=n.expanded)!==null&&r!==void 0?r:!0),o=new B7e(e,{foldable:i,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new PK({blade:n.blade,element:o.containerElement,root:n.root,viewProps:n.viewProps}),view:o})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=i,jF(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Ec(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Cc(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}xs({id:"folder",type:"blade",accept(t){const e=as(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new f_e(t.document,{blade:t.blade,expanded:t.params.expanded,props:dr.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof f_e?new F7e(t.controller,t.pool):null}});const U7e=mr("");function m_e(t,e){return ig(t,U7e(void 0,e))}class vp extends dr{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=k$e(os(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,i;const o=e??{};return new vp(dr.createCore({disabled:(n=o.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=o.hidden)!==null&&r!==void 0?r:!1,parent:(i=o.parent)!==null&&i!==void 0?i:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){wu(this.globalDisabled_,m_e(e,"disabled")),Eu(this,"hidden",m_e(e,"hidden"))}bindDisabled(e){wu(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){wu(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const g_e=mr("tbp");class z7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(g_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(g_e("c")),this.element.appendChild(r),this.containerElement=r}}const MP=mr("tbi");class V7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(MP()),n.viewProps.bindClassModifiers(this.element),Eu(n.props,"selected",o=>{o?this.element.classList.add(MP(void 0,"sel")):this.element.classList.remove(MP(void 0,"sel"))});const r=e.createElement("button");r.classList.add(MP("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const i=e.createElement("div");i.classList.add(MP("t")),SK(n.props.value("title"),i),this.buttonElement.appendChild(i),this.titleElement=i}}class j7e{constructor(e,n){this.emitter=new ea,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new V7e(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class WW extends CK{constructor(e,n){const r=new z7e(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new PK({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new j7e(e,{props:n.itemProps,viewProps:vp.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Eu(this.props,"selected",i=>{this.itemController.props.set("selected",i),this.viewProps.set("hidden",!i)})}get itemController(){return this.ic_}importState(e){return Ec(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Cc(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class H7e extends EK{constructor(e,n){super(e,n),this.emitter_=new ea,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new WW(n,{blade:CCe(),itemProps:dr.fromObject({selected:!1,title:e.title}),props:dr.fromObject({selected:!1}),viewProps:vp.create()}),i=this.pool_.createApi(r);return this.rackApi_.add(i,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i)}),this}onSelect_(e){this.emitter_.emit("select",new o7e(this,e.rawValue))}}class G7e extends EK{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}}const v_e=-1;class W7e{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=os(!0),this.selectedIndex=os(v_e),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=v_e,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,i)=>{r.rawValue=i===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const kP=mr("tab");class $7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(kP(),PCe()),n.viewProps.bindClassModifiers(this.element),wu(n.empty,ig(this.element,kP(void 0,"nop")));const r=e.createElement("div");r.classList.add(kP("t")),this.element.appendChild(r),this.itemsElement=r;const i=e.createElement("div");i.classList.add(kP("i")),this.element.appendChild(i);const o=e.createElement("div");o.classList.add(kP("c")),this.element.appendChild(o),this.contentsElement=o}}class y_e extends CK{constructor(e,n){const r=new W7e,i=new $7e(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new PK({blade:n.blade,element:i.contentsElement,viewProps:n.viewProps}),view:i}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const o=this.rackController.rack;o.emitter.on("add",this.onRackAdd_),o.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;_Ce(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;wK(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}xs({id:"tab",type:"blade",accept(t){const e=as(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new y_e(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new WW(t.document,{blade:CCe(),itemProps:dr.fromObject({selected:!1,title:n.title}),props:dr.fromObject({selected:!1}),viewProps:vp.create()});e.add(r)}),e},api(t){return t.controller instanceof y_e?new H7e(t.controller,t.pool):t.controller instanceof WW?new G7e(t.controller,t.pool):null}});class TK extends _K{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class K7e{constructor(){this.disabled=!1,this.emitter=new ea}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class X7e{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new ea,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class E1{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}}function WT(t,e){if(t instanceof e)return t;if(t instanceof E1){const n=t.constraints.reduce((r,i)=>r||(i instanceof e?i:null),null);if(n)return n}return null}class HF{constructor(e){this.values=dr.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(i=>i.value===e).length>0?e:n[0].value}}function GF(t){var e;const n=HW;if(Array.isArray(t))return(e=as({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function TCe(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function MK(t){return Ni(t)?null:new HF(TCe(t))}const WG=mr("lst");class q7e{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(WG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(WG("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const i=e.createElement("div");i.classList.add(WG("m")),i.appendChild(zF(e,"dropdown")),this.element.appendChild(i),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Eu(this.props_,"options",o=>{wCe(this.selectElement),o.forEach(u=>{const d=e.createElement("option");d.textContent=u.text,this.selectElement.appendChild(d)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class s1{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new q7e(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return Ec(e,null,n=>({options:n.required.custom(GF)}),n=>(this.props.set("options",TCe(n.options)),!0))}exportProps(){return Cc(null,{options:this.props.get("options")})}}const b_e=mr("pop");class Y7e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(b_e()),n.viewProps.bindClassModifiers(this.element),wu(n.shows,ig(this.element,b_e(void 0,"v")))}}class kK{constructor(e,n){this.shows=os(!1),this.viewProps=n.viewProps,this.view=new Y7e(e,{shows:this.shows,viewProps:this.viewProps})}}const __e=mr("txt");class Z7e{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(__e()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(__e("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class WF{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Z7e(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);Ni(i)||(this.value.rawValue=i),this.view.refresh()}}function Q7e(t){return String(t)}function AK(t){return t==="false"?!1:!!t}function w_e(t){return Q7e(t)}function J7e(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const eKe=Ao(0);function KN(t){return eKe(t)+"%"}function IK(t){return String(t)}function $W(t){return t}function Y0({primary:t,secondary:e,forward:n,backward:r}){let i=!1;function o(u){i||(i=!0,u(),i=!1)}t.emitter.on("change",u=>{o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),e.emitter.on("change",u=>{o(()=>{t.setRawValue(r(t.rawValue,e.rawValue),u.options)}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),u.options)})}),o(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function io(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function U0(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function Sc(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function tKe(t){return t==="ArrowUp"||t==="ArrowDown"}function XN(t){return tKe(t)||t==="ArrowLeft"||t==="ArrowRight"}function $G(t,e){var n,r;const i=e.ownerDocument.defaultView,o=e.getBoundingClientRect();return{x:t.pageX-(((n=i&&i.scrollX)!==null&&n!==void 0?n:0)+o.left),y:t.pageY-(((r=i&&i.scrollY)!==null&&r!==void 0?r:0)+o.top)}}class bp{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new ea,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_($G(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_($G(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_($G(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,i=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-i.left,y:r.clientY-i.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const au=mr("txt");class nKe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(au(),au(void 0,"num")),n.arrayPosition&&this.element.classList.add(au(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(au("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(au()),this.inputElement.classList.add(au("i"));const i=e.createElement("div");i.classList.add(au("k")),this.element.appendChild(i),this.knobElement=i;const o=e.createElementNS(ro,"svg");o.classList.add(au("g")),this.knobElement.appendChild(o);const u=e.createElementNS(ro,"path");u.classList.add(au("gb")),o.appendChild(u),this.guideBodyElem_=u;const d=e.createElementNS(ro,"path");d.classList.add(au("gh")),o.appendChild(d),this.guideHeadElem_=d;const m=e.createElement("div");m.classList.add(mr("tt")()),this.knobElement.appendChild(m),this.tooltipElem_=m,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(au(void 0,"drg"));return}this.element.classList.add(au(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),i=Ki(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+i},0 L${r},4 L${r+i},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class _M{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=os(null),this.view=new nKe(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const i=new bp(this.view.knobElement);i.emitter.on("down",this.onPointerDown_),i.emitter.on("move",this.onPointerMove_),i.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const i=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),o=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let u=e;return i!==void 0&&(u=Math.max(u,i)),o!==void 0&&(u=Math.min(u,o)),u}onInputChange_(e){const r=e.currentTarget.value,i=this.parser_(r);Ni(i)||(this.value.rawValue=this.constrainValue_(i)),this.view.refresh()}onInputKeyDown_(e){const n=io(this.props.get("keyScale"),U0(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){io(this.props.get("keyScale"),U0(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const KG=mr("sld");class rKe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(KG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(KG("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add(KG("k")),this.trackElement.appendChild(i),this.knobElement=i,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=Ki(cr(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class iKe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new rKe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new bp(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(cr(Ki(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=io(this.props.get("keyScale"),Sc(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){io(this.props.get("keyScale"),Sc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const XG=mr("sldtxt");class sKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(XG());const r=e.createElement("div");r.classList.add(XG("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(XG("t")),this.textView_=n.textView,i.appendChild(this.textView_.element),this.element.appendChild(i)}}class x_e{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new iKe(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new _M(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new sKe(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Ec(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Cc(null,{max:e.get("max"),min:e.get("min")})}}function oKe(t){return{sliderProps:new dr({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new dr({formatter:os(t.formatter),keyScale:t.keyScale,pointerScale:os(t.pointerScale)})}}const aKe={containerUnitSize:"cnt-usz"};function MCe(t){return`--${aKe[t]}`}class kCe{constructor(e,n){const r=mr(n.viewName);this.element=e.createElement("div"),this.element.classList.add(r()),n.viewProps.bindClassModifiers(this.element)}}function $T(t){return yK(t)}function Im(t){if(jW(t))return as(t,$T)}function tp(t,e){if(!t)return;const n=[],r=mK(t,e);r&&n.push(r);const i=gK(t);return i&&n.push(i),new E1(n)}function ACe(t){if(t==="inline"||t==="popup")return t}function sg(t,e){t.write(e)}const SL=mr("ckb");class lKe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(SL()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(SL("l")),this.element.appendChild(r);const i=e.createElement("input");i.classList.add(SL("i")),i.type="checkbox",r.appendChild(i),this.inputElement=i,n.viewProps.bindDisabled(this.inputElement);const o=e.createElement("div");o.classList.add(SL("w")),r.appendChild(o);const u=zF(e,"check");o.appendChild(u),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class uKe{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new lKe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}}function cKe(t){const e=[],n=MK(t.options);return n&&e.push(n),new E1(e)}xs({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=as(e,r=>({options:r.optional.custom(GF),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>AK,constraint:t=>cKe(t.params),writer:t=>sg},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&WT(r,HF);return i?new s1(e,{props:new dr({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new uKe(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof s1?new TK(t.controller):null}});const n0=mr("col");class dKe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(n0()),n.foldable.bindExpandedClass(this.element,n0(void 0,"expanded")),Eu(n.foldable,"completed",ig(this.element,n0(void 0,"cpl")));const r=e.createElement("div");r.classList.add(n0("h")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(n0("s")),r.appendChild(i),this.swatchElement=i;const o=e.createElement("div");if(o.classList.add(n0("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(n0("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}}function hKe(t,e,n){const r=Ki(t/255,0,1),i=Ki(e/255,0,1),o=Ki(n/255,0,1),u=Math.max(r,i,o),d=Math.min(r,i,o),m=u-d;let v=0,x=0;const E=(d+u)/2;return m!==0&&(x=m/(1-Math.abs(u+d-1)),r===u?v=(i-o)/m:i===u?v=2+(o-r)/m:v=4+(r-i)/m,v=v/6+(v<0?1:0)),[v*360,x*100,E*100]}function pKe(t,e,n){const r=(t%360+360)%360,i=Ki(e/100,0,1),o=Ki(n/100,0,1),u=(1-Math.abs(2*o-1))*i,d=u*(1-Math.abs(r/60%2-1)),m=o-u/2;let v,x,E;return r>=0&&r<60?[v,x,E]=[u,d,0]:r>=60&&r<120?[v,x,E]=[d,u,0]:r>=120&&r<180?[v,x,E]=[0,u,d]:r>=180&&r<240?[v,x,E]=[0,d,u]:r>=240&&r<300?[v,x,E]=[d,0,u]:[v,x,E]=[u,0,d],[(v+m)*255,(x+m)*255,(E+m)*255]}function fKe(t,e,n){const r=Ki(t/255,0,1),i=Ki(e/255,0,1),o=Ki(n/255,0,1),u=Math.max(r,i,o),d=Math.min(r,i,o),m=u-d;let v;m===0?v=0:u===r?v=60*(((i-o)/m%6+6)%6):u===i?v=60*((o-r)/m+2):v=60*((r-i)/m+4);const x=u===0?0:m/u,E=u;return[v,x*100,E*100]}function ICe(t,e,n){const r=yCe(t,360),i=Ki(e/100,0,1),o=Ki(n/100,0,1),u=o*i,d=u*(1-Math.abs(r/60%2-1)),m=o-u;let v,x,E;return r>=0&&r<60?[v,x,E]=[u,d,0]:r>=60&&r<120?[v,x,E]=[d,u,0]:r>=120&&r<180?[v,x,E]=[0,u,d]:r>=180&&r<240?[v,x,E]=[0,d,u]:r>=240&&r<300?[v,x,E]=[d,0,u]:[v,x,E]=[u,0,d],[(v+m)*255,(x+m)*255,(E+m)*255]}function mKe(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function gKe(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function Rd(t){return[t[0],t[1],t[2]]}function $F(t,e){return[t[0],t[1],t[2],e]}const vKe={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:mKe,rgb:pKe},hsv:{hsl:gKe,hsv:(t,e,n)=>[t,e,n],rgb:ICe},rgb:{hsl:hKe,hsv:fKe,rgb:(t,e,n)=>[t,e,n]}};function o1(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function yKe(t,e){return t===e?e:yCe(t,e)}function RCe(t,e,n){var r;const i=o1(e,n);return[e==="rgb"?Ki(t[0],0,i[0]):yKe(t[0],i[0]),Ki(t[1],0,i[1]),Ki(t[2],0,i[2]),Ki((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function S_e(t,e,n,r){const i=o1(e,n),o=o1(e,r);return t.map((u,d)=>u/i[d]*o[d])}function DCe(t,e,n){const r=S_e(t,e.mode,e.type,"int"),i=vKe[e.mode][n.mode](...r);return S_e(i,n.mode,"int",n.type)}class Xr{static black(){return new Xr([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=RCe(e,n,this.type)}getComponents(e){return $F(DCe(Rd(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const lm=mr("colp");class bKe{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(lm()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(lm("hsv"));const i=e.createElement("div");i.classList.add(lm("sv")),this.svPaletteView_=n.svPaletteView,i.appendChild(this.svPaletteView_.element),r.appendChild(i);const o=e.createElement("div");o.classList.add(lm("h")),this.hPaletteView_=n.hPaletteView,o.appendChild(this.hPaletteView_.element),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");if(u.classList.add(lm("rgb")),this.textsView_=n.textsView,u.appendChild(this.textsView_.element),this.element.appendChild(u),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const d=e.createElement("div");d.classList.add(lm("a"));const m=e.createElement("div");m.classList.add(lm("ap")),m.appendChild(this.alphaViews_.palette.element),d.appendChild(m);const v=e.createElement("div");v.classList.add(lm("at")),v.appendChild(this.alphaViews_.text.element),d.appendChild(v),this.element.appendChild(d)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function _Ke(t){return t==="int"?"int":t==="float"?"float":void 0}function RK(t){return as(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(_Ke)}),expanded:e.optional.boolean,picker:e.optional.custom(ACe),readonly:e.optional.constant(!1)}))}function z0(t){return t?.1:1}function OCe(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}class DK{constructor(e,n){this.type="float",this.mode=n,this.comps_=RCe(e,n,this.type)}getComponents(e){return $F(DCe(Rd(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const wKe={int:(t,e)=>new Xr(t,e),float:(t,e)=>new DK(t,e)};function OK(t,e,n){return wKe[n](t,e)}function xKe(t){return t.type==="float"}function SKe(t){return t.type==="int"}function EKe(t){const e=t.getComponents(),n=o1(t.mode,"int");return new Xr([Math.round(cr(e[0],0,1,0,n[0])),Math.round(cr(e[1],0,1,0,n[1])),Math.round(cr(e[2],0,1,0,n[2])),e[3]],t.mode)}function CKe(t){const e=t.getComponents(),n=o1(t.mode,"int");return new DK([cr(e[0],0,n[0],0,1),cr(e[1],0,n[1],0,1),cr(e[2],0,n[2],0,1),e[3]],t.mode)}function Pa(t,e){if(t.type===e)return t;if(SKe(t)&&e==="float")return CKe(t);if(xKe(t)&&e==="int")return EKe(t);throw Sa.shouldNeverHappen()}function PKe(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function yu(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const TKe={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function LCe(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return TKe[r](n)}function NCe(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[yu(e[1],255),yu(e[2],255),yu(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function MKe(t){const e=NCe(t);return e?new Xr(e,"rgb"):null}function FCe(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[yu(e[1],255),yu(e[2],255),yu(e[3],255),yu(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function kKe(t){const e=FCe(t);return e?new Xr(e,"rgb"):null}function BCe(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[LCe(e[1]),yu(e[2],100),yu(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function AKe(t){const e=BCe(t);return e?new Xr(e,"hsl"):null}function UCe(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[LCe(e[1]),yu(e[2],100),yu(e[3],100),yu(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function IKe(t){const e=UCe(t);return e?new Xr(e,"hsl"):null}function zCe(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function RKe(t){const e=zCe(t);return e?new Xr(e,"rgb"):null}function VCe(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),cr(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),cr(parseInt(n[4],16),0,255,0,1)]:null}function DKe(t){const e=VCe(t);return e?new Xr(e,"rgb"):null}function jCe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function E_e(t){return e=>{const n=jCe(e);return n?OK(n,"rgb",t):null}}function HCe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function C_e(t){return e=>{const n=HCe(e);return n?OK(n,"rgb",t):null}}const OKe=[{parser:zCe,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:VCe,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:NCe,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:FCe,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:BCe,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:UCe,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:jCe,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:HCe,result:{alpha:!0,mode:"rgb",notation:"object"}}];function LKe(t){return OKe.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function NKe(t,e="int"){const n=LKe(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function wM(t){const e=[RKe,DKe,MKe,kKe,AKe,IKe];t==="int"&&e.push(E_e("int"),C_e("int")),t==="float"&&e.push(E_e("float"),C_e("float"));const n=J7e(e);return r=>{const i=n(r);return i?Pa(i,t):null}}function FKe(t){const e=wM("int");if(typeof t!="string")return Xr.black();const n=e(t);return n??Xr.black()}function GCe(t){const e=Ki(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function LK(t,e="#"){const n=Rd(t.getComponents("rgb")).map(GCe).join("");return`${e}${n}`}function NK(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(GCe).join("");return`${e}${r}`}function WCe(t){const e=Ao(0),n=Pa(t,"int");return`rgb(${Rd(n.getComponents("rgb")).map(i=>e(i)).join(", ")})`}function qL(t){const e=Ao(2),n=Ao(0);return`rgba(${Pa(t,"int").getComponents("rgb").map((o,u)=>(u===3?e:n)(o)).join(", ")})`}function BKe(t){const e=[Ao(0),KN,KN],n=Pa(t,"int");return`hsl(${Rd(n.getComponents("hsl")).map((i,o)=>e[o](i)).join(", ")})`}function UKe(t){const e=[Ao(0),KN,KN,Ao(2)];return`hsla(${Pa(t,"int").getComponents("hsl").map((i,o)=>e[o](i)).join(", ")})`}function $Ce(t,e){const n=Ao(e==="float"?2:0),r=["r","g","b"],i=Pa(t,e);return`{${Rd(i.getComponents("rgb")).map((u,d)=>`${r[d]}: ${n(u)}`).join(", ")}}`}function zKe(t){return e=>$Ce(e,t)}function KCe(t,e){const n=Ao(2),r=Ao(e==="float"?2:0),i=["r","g","b","a"];return`{${Pa(t,e).getComponents("rgb").map((d,m)=>{const v=m===3?n:r;return`${i[m]}: ${v(d)}`}).join(", ")}}`}function VKe(t){return e=>KCe(e,t)}const jKe=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:LK},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:NK},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:WCe},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:qL},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:BKe},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:UKe},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:zKe(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:VKe(e)}],[])];function XCe(t){return jKe.reduce((e,n)=>e||(PKe(n.format,t)?n.stringifier:null),null)}const AP=mr("apl");class HKe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(AP()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(AP("b")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(AP("c")),r.appendChild(i),this.colorElem_=i;const o=e.createElement("div");o.classList.add(AP("m")),this.element.appendChild(o),this.markerElem_=o;const u=e.createElement("div");u.classList.add(AP("p")),this.markerElem_.appendChild(u),this.previewElem_=u,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Xr([n[0],n[1],n[2],0],"rgb"),i=new Xr([n[0],n[1],n[2],255],"rgb"),o=["to right",qL(r),qL(i)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=qL(e);const u=cr(n[3],0,1,0,100);this.markerElem_.style.left=`${u}%`}onValueChange_(){this.update_()}}class GKe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new HKe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new bp(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,i=this.value.rawValue,[o,u,d]=i.getComponents("hsv");this.value.setRawValue(new Xr([o,u,d,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=io(z0(!0),Sc(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,d]=r.getComponents("hsv");this.value.setRawValue(new Xr([i,o,u,d+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){io(z0(!0),Sc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const sw=mr("coltxt");function WKe(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,i)=>{const o=t.createElement("option");return o.textContent=i.text,o.value=i.value,r.appendChild(o),r},t.createDocumentFragment())),e}class $Ke{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(sw()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(sw("m")),this.modeElem_=WKe(e),this.modeElem_.classList.add(sw("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const i=e.createElement("div");i.classList.add(sw("mm")),i.appendChild(zF(e,"dropdown")),r.appendChild(i),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(sw("w")),this.element.appendChild(o),this.inputsElem_=o,this.inputViews_=n.inputViews,this.applyInputViews_(),wu(n.mode,u=>{this.modeElem_.value=u})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){wCe(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(sw("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}}function KKe(t){return Ao(t==="float"?2:0)}function XKe(t,e,n){const r=o1(t,e)[n];return new yM({min:0,max:r})}function qKe(t,e,n){return new _M(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:dr.fromObject({formatter:KKe(e.colorType),keyScale:z0(!1),pointerScale:e.colorType==="float"?.01:1}),value:os(0,{constraint:XKe(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function YKe(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:xc,viewProps:e.viewProps};return[0,1,2].map(r=>{const i=qKe(t,n,r);return Y0({primary:e.value,secondary:i.value,forward(o){return Pa(o,e.colorType).getComponents(e.colorMode)[r]},backward(o,u){const d=e.colorMode,v=Pa(o,e.colorType).getComponents(d);v[r]=u;const x=OK($F(Rd(v),v[3]),d,e.colorType);return Pa(x,"int")}}),i})}function ZKe(t,e){const n=new WF(t,{parser:wM("int"),props:dr.fromObject({formatter:LK}),value:os(Xr.black()),viewProps:e.viewProps});return Y0({primary:e.value,secondary:n.value,forward:r=>new Xr(Rd(r.getComponents()),r.mode),backward:(r,i)=>new Xr($F(Rd(i.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function QKe(t){return t!=="hex"}class JKe{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=os(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new $Ke(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return QKe(n)?YKe(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):ZKe(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}}const qG=mr("hpl");class eXe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(qG()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(qG("c")),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(qG("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=WCe(new Xr([n,100,100],"hsv"));const r=cr(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class tXe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new eXe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new bp(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=cr(Ki(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),i=this.value.rawValue,[,o,u,d]=i.getComponents("hsv");this.value.setRawValue(new Xr([r,o,u,d],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=io(z0(!1),Sc(e));if(n===0)return;const r=this.value.rawValue,[i,o,u,d]=r.getComponents("hsv");this.value.setRawValue(new Xr([i+n,o,u,d],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){io(z0(!1),Sc(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const YG=mr("svp"),P_e=64;class nXe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(YG()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=P_e,r.width=P_e,r.classList.add(YG("c")),this.element.appendChild(r),this.canvasElement=r;const i=e.createElement("div");i.classList.add(YG("m")),this.element.appendChild(i),this.markerElem_=i,this.update_()}update_(){const e=h7e(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),i=this.canvasElement.width,o=this.canvasElement.height,u=e.getImageData(0,0,i,o),d=u.data;for(let x=0;x<o;x++)for(let E=0;E<i;E++){const M=cr(E,0,i,0,100),R=cr(x,0,o,100,0),j=ICe(r[0],M,R),F=(x*i+E)*4;d[F]=j[0],d[F+1]=j[1],d[F+2]=j[2],d[F+3]=255}e.putImageData(u,0,0);const m=cr(r[1],0,100,0,100);this.markerElem_.style.left=`${m}%`;const v=cr(r[2],0,100,100,0);this.markerElem_.style.top=`${v}%`}onValueChange_(){this.update_()}}class rXe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new nXe(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new bp(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=cr(e.point.x,0,e.bounds.width,0,100),i=cr(e.point.y,0,e.bounds.height,100,0),[o,,,u]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Xr([o,r,i,u],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){XN(e.key)&&e.preventDefault();const[n,r,i,o]=this.value.rawValue.getComponents("hsv"),u=z0(!1),d=io(u,Sc(e)),m=io(u,U0(e));d===0&&m===0||this.value.setRawValue(new Xr([n,r+d,i+m,o],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=z0(!1),r=io(n,Sc(e)),i=io(n,U0(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class iXe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new tXe(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new rXe(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new GKe(e,{value:this.value,viewProps:this.viewProps}),text:new _M(e,{parser:xc,props:dr.fromObject({pointerScale:.01,keyScale:.1,formatter:Ao(2)}),value:os(0,{constraint:new yM({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Y0({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,i)=>{const o=r.getComponents();return o[3]=i,new Xr(o,r.mode)}}),this.textsC_=new JKe(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new bKe(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const ZG=mr("colsw");class sXe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(ZG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(ZG("sw")),this.element.appendChild(r),this.swatchElem_=r;const i=e.createElement("button");i.classList.add(ZG("b")),n.viewProps.bindDisabled(i),this.element.appendChild(i),this.buttonElement=i,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=NK(e)}onValueChange_(){this.update_()}}class oXe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new sXe(e,{value:this.value,viewProps:this.viewProps})}}class FK{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=S1.create(n.expanded),this.swatchC_=new oXe(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new WF(e,{parser:n.parser,props:dr.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new dKe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new kK(e,{viewProps:this.viewProps}):null;const i=new iXe(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});i.view.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=i,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(i.view.element),Y0({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,u)=>u})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),jF(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=xK(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!UF(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function aXe(t){return Rd(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function lXe(t){return t.getComponents("rgb").reduce((e,n,r)=>{const i=Math.floor(r===3?n*255:n)&255;return e<<8|i},0)>>>0}function uXe(t){return new Xr([t>>16&255,t>>8&255,t&255],"rgb")}function cXe(t){return new Xr([t>>24&255,t>>16&255,t>>8&255,cr(t&255,0,255,0,1)],"rgb")}function dXe(t){return typeof t!="number"?Xr.black():uXe(t)}function hXe(t){return typeof t!="number"?Xr.black():cXe(t)}function YL(t,e){return typeof t!="object"||Ni(t)?!1:e in t&&typeof t[e]=="number"}function qCe(t){return YL(t,"r")&&YL(t,"g")&&YL(t,"b")}function YCe(t){return qCe(t)&&YL(t,"a")}function ZCe(t){return qCe(t)}function BK(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}function T_e(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function pXe(t){const e=XCe(t);return e?(n,r)=>{sg(n,e(r))}:null}function fXe(t){const e=t?lXe:aXe;return(n,r)=>{sg(n,e(r))}}function mXe(t,e,n){const i=Pa(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b),t.writeProperty("a",i.a)}function gXe(t,e,n){const i=Pa(e,n).toRgbaObject();t.writeProperty("r",i.r),t.writeProperty("g",i.g),t.writeProperty("b",i.b)}function vXe(t,e){return(n,r)=>{t?mXe(n,r,e):gXe(n,r,e)}}function yXe(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function bXe(t){return t?e=>NK(e,"0x"):e=>LK(e,"0x")}function _Xe(t){return"color"in t||t.view==="color"}xs({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!_Xe(e))return null;const n=RK(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:yXe(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?hXe:dXe,equals:BK,writer:t=>fXe(t.params.supportsAlpha)},controller:t=>{var e,n;return new FK(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:bXe(t.params.supportsAlpha),parser:wM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function wXe(t,e){if(!ZCe(t))return Pa(Xr.black(),e);if(e==="int"){const n=T_e(t);return new Xr(n,"rgb")}if(e==="float"){const n=T_e(t);return new DK(n,"rgb")}return Pa(Xr.black(),"int")}function xXe(t){return YCe(t)}function SXe(t){return e=>{const n=wXe(e,t);return Pa(n,"int")}}function EXe(t,e){return n=>t?KCe(n,e):$Ce(n,e)}xs({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!ZCe(t))return null;const r=RK(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=OCe(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>SXe(t.params.colorType),equals:BK,writer:t=>vXe(xXe(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=YCe(t.initialValue);return new FK(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:EXe(r,t.params.colorType),parser:wM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}});xs({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=NKe(t,OCe(e));if(!n)return null;const r=XCe(n);if(!r)return null;const i=RK(e);return i?{initialValue:t,params:Object.assign(Object.assign({},i),{format:n,stringifier:r})}:null},binding:{reader:()=>FKe,equals:BK,writer:t=>{const e=pXe(t.params.format);if(!e)throw Sa.notBindable();return e}},controller:t=>{var e,n;return new FK(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:wM("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});class KF{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,i)=>{var o,u;return(u=(o=this.components[i])===null||o===void 0?void 0:o.constrain(r))!==null&&u!==void 0?u:r});return this.asm_.fromComponents(n)}}const M_e=mr("pndtxt");class CXe{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(M_e()),this.textViews.forEach(r=>{const i=e.createElement("div");i.classList.add(M_e("a")),i.appendChild(r.element),this.element.appendChild(i)})}}function PXe(t,e,n){return new _M(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:os(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class C1{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,i)=>PXe(e,n,i)),this.acs_.forEach((r,i)=>{Y0({primary:this.value,secondary:r.value,forward:o=>n.assembly.toComponents(o)[i],backward:(o,u)=>{const d=n.assembly.toComponents(o);return d[i]=u,n.assembly.fromComponents(d)}})}),this.view=new CXe(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}}class TXe extends _K{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function MXe(t,e){const n=[],r=mK(t,e);r&&n.push(r);const i=gK(t);i&&n.push(i);const o=MK(t.options);return o&&n.push(o),new E1(n)}xs({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=as(e,r=>Object.assign(Object.assign({},yK(r)),{options:r.optional.custom(GF),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>fK,constraint:t=>MXe(t.params,t.initialValue),writer:t=>sg},controller:t=>{const e=t.value,n=t.constraint,r=n&&WT(n,HF);if(r)return new s1(t.document,{props:new dr({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const i=vK(t.params,e.rawValue),o=n&&WT(n,yM);return o?new x_e(t.document,Object.assign(Object.assign({},oKe(Object.assign(Object.assign({},i),{keyScale:os(i.keyScale),max:o.values.value("max"),min:o.values.value("min")}))),{parser:xc,value:e,viewProps:t.viewProps})):new _M(t.document,{parser:xc,props:dr.fromObject(i),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof x_e?new TXe(t.controller):t.controller.valueController instanceof s1?new TK(t.controller):null}});class Gm{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(Ni(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}}const QCe={toComponents:t=>t.getComponents(),fromComponents:t=>new Gm(...t)},ow=mr("p2d");class kXe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(ow()),n.viewProps.bindClassModifiers(this.element),wu(n.expanded,ig(this.element,ow(void 0,"expanded")));const r=e.createElement("div");r.classList.add(ow("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(ow("b")),i.appendChild(zF(e,"p2dpad")),n.viewProps.bindDisabled(i),r.appendChild(i),this.buttonElement=i;const o=e.createElement("div");if(o.classList.add(ow("t")),r.appendChild(o),this.textElement=o,n.pickerLayout==="inline"){const u=e.createElement("div");u.classList.add(ow("p")),this.element.appendChild(u),this.pickerElement=u}else this.pickerElement=null}}const um=mr("p2dp");class AXe{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(um()),n.layout==="popup"&&this.element.classList.add(um(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(um("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const i=e.createElementNS(ro,"svg");i.classList.add(um("g")),this.padElement.appendChild(i),this.svgElem_=i;const o=e.createElementNS(ro,"line");o.classList.add(um("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const u=e.createElementNS(ro,"line");u.classList.add(um("ax")),u.setAttributeNS(null,"x1","50%"),u.setAttributeNS(null,"y1","0"),u.setAttributeNS(null,"x2","50%"),u.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(u);const d=e.createElementNS(ro,"line");d.classList.add(um("l")),d.setAttributeNS(null,"x1","50%"),d.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(d),this.lineElem_=d;const m=e.createElement("div");m.classList.add(um("m")),this.padElement.appendChild(m),this.markerElem_=m,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),i=cr(e,-r,+r,0,100),o=cr(n,-r,+r,0,100),u=this.props_.get("invertsY")?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${i}%`),this.lineElem_.setAttributeNS(null,"y2",`${u}%`),this.markerElem_.style.left=`${i}%`,this.markerElem_.style.top=`${u}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function k_e(t,e,n){return[io(e[0],Sc(t)),io(e[1],U0(t))*(n?1:-1)]}class IXe{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new AXe(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new bp(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),i=cr(e.point.x,0,e.bounds.width,-r,+r),o=cr(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new Gm(i,o),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){XN(e.key)&&e.preventDefault();const[n,r]=k_e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new Gm(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=k_e(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class RXe{constructor(e,n){var r,i;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=S1.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new kK(e,{viewProps:this.viewProps}):null;const o=new IXe(e,{layout:n.pickerLayout,props:new dr({invertsY:os(n.invertsY),max:os(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.textC_=new C1(e,{assembly:QCe,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new kXe(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(i=this.view.buttonElement)===null||i===void 0||i.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Y0({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,d)=>d})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),jF(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=xK(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!UF(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function DXe(t){return Gm.isObject(t)?new Gm(t.x,t.y):new Gm}function OXe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function LXe(t,e){return new KF({assembly:QCe,components:[tp(Object.assign(Object.assign({},t),t.x),e.x),tp(Object.assign(Object.assign({},t),t.y),e.y)]})}function A_e(t,e){var n,r;if(!Ni(t.min)||!Ni(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const i=bCe(t);return Math.max(Math.abs(i)*10,Math.abs(e)*10)}function NXe(t,e){var n,r;const i=A_e(B0(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),o=A_e(B0(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(i,o)}function FXe(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}xs({id:"input-point2d",type:"input",accept:(t,e)=>{if(!Gm.isObject(t))return null;const n=as(e,r=>Object.assign(Object.assign({},$T(r)),{expanded:r.optional.boolean,picker:r.optional.custom(ACe),readonly:r.optional.constant(!1),x:r.optional.custom(Im),y:r.optional.object(Object.assign(Object.assign({},$T(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>DXe,constraint:t=>LXe(t.params,t.initialValue),equals:Gm.equals,writer:()=>OXe},controller:t=>{var e,n;const r=t.document,i=t.value,o=t.constraint,u=[t.params.x,t.params.y];return new RXe(r,{axes:i.rawValue.getComponents().map((d,m)=>{var v;return bK({constraint:o.components[m],initialValue:d,params:B0(t.params,(v=u[m])!==null&&v!==void 0?v:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:FXe(t.params),max:NXe(t.params,i.rawValue),parser:xc,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps})}});class Hw{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(Ni(e))return!1;const n=e.x,r=e.y,i=e.z;return!(typeof n!="number"||typeof r!="number"||typeof i!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const JCe={toComponents:t=>t.getComponents(),fromComponents:t=>new Hw(...t)};function BXe(t){return Hw.isObject(t)?new Hw(t.x,t.y,t.z):new Hw}function UXe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function zXe(t,e){return new KF({assembly:JCe,components:[tp(Object.assign(Object.assign({},t),t.x),e.x),tp(Object.assign(Object.assign({},t),t.y),e.y),tp(Object.assign(Object.assign({},t),t.z),e.z)]})}xs({id:"input-point3d",type:"input",accept:(t,e)=>{if(!Hw.isObject(t))return null;const n=as(e,r=>Object.assign(Object.assign({},$T(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Im),y:r.optional.custom(Im),z:r.optional.custom(Im)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>BXe,constraint:t=>zXe(t.params,t.initialValue),equals:Hw.equals,writer:t=>UXe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new C1(t.document,{assembly:JCe,axes:e.rawValue.getComponents().map((i,o)=>{var u;return bK({constraint:n.components[o],initialValue:i,params:B0(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:xc,value:e,viewProps:t.viewProps})}});class Gw{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.z=r,this.w=i}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(Ni(e))return!1;const n=e.x,r=e.y,i=e.z,o=e.w;return!(typeof n!="number"||typeof r!="number"||typeof i!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const ePe={toComponents:t=>t.getComponents(),fromComponents:t=>new Gw(...t)};function VXe(t){return Gw.isObject(t)?new Gw(t.x,t.y,t.z,t.w):new Gw}function jXe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function HXe(t,e){return new KF({assembly:ePe,components:[tp(Object.assign(Object.assign({},t),t.x),e.x),tp(Object.assign(Object.assign({},t),t.y),e.y),tp(Object.assign(Object.assign({},t),t.z),e.z),tp(Object.assign(Object.assign({},t),t.w),e.w)]})}xs({id:"input-point4d",type:"input",accept:(t,e)=>{if(!Gw.isObject(t))return null;const n=as(e,r=>Object.assign(Object.assign({},$T(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Im),x:r.optional.custom(Im),y:r.optional.custom(Im),z:r.optional.custom(Im)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>VXe,constraint:t=>HXe(t.params,t.initialValue),equals:Gw.equals,writer:t=>jXe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new C1(t.document,{assembly:ePe,axes:e.rawValue.getComponents().map((i,o)=>{var u;return bK({constraint:n.components[o],initialValue:i,params:B0(t.params,(u=r[o])!==null&&u!==void 0?u:{})})}),parser:xc,value:e,viewProps:t.viewProps})}});function GXe(t){const e=[],n=MK(t.options);return n&&e.push(n),new E1(e)}xs({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=as(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(GF)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>IK,constraint:t=>GXe(t.params),writer:t=>sg},controller:t=>{const e=t.document,n=t.value,r=t.constraint,i=r&&WT(r,HF);return i?new s1(e,{props:new dr({options:i.values.value("options")}),value:n,viewProps:t.viewProps}):new WF(e,{parser:o=>o,props:dr.fromObject({formatter:$W}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof s1?new TK(t.controller):null}});const xM={monitor:{defaultInterval:200,defaultRows:3}},I_e=mr("mll");class WXe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(I_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(I_e("i")),r.style.height=`calc(var(${MCe("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(i=>{i!==void 0&&r.push(this.formatter_(i))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class UK{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new WXe(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const R_e=mr("sgl");class $Xe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(R_e()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(R_e("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class zK{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new $Xe(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}xs({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=as(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>AK},controller:t=>{var e;return t.value.rawValue.length===1?new zK(t.document,{formatter:w_e,value:t.value,viewProps:t.viewProps}):new UK(t.document,{formatter:w_e,rows:(e=t.params.rows)!==null&&e!==void 0?e:xM.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});class KXe extends _K{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const cm=mr("grl");class XXe{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(cm()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(ro,"svg");r.classList.add(cm("g")),r.style.height=`calc(var(${MCe("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(ro,"polyline");this.svgElem_.appendChild(i),this.lineElem_=i;const o=e.createElement("div");o.classList.add(cm("t"),mr("tt")()),this.element.appendChild(o),this.tooltipElem_=o,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),i=this.props_.get("max"),o=[];this.value.rawValue.forEach((x,E)=>{if(x===void 0)return;const M=cr(E,0,n,0,e.width),R=cr(x,r,i,e.height,0);o.push([M,R].join(","))}),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const u=this.tooltipElem_,d=this.value.rawValue[this.cursor_.rawValue];if(d===void 0){u.classList.remove(cm("t","a"));return}const m=cr(this.cursor_.rawValue,0,n,0,e.width),v=cr(d,r,i,e.height,0);u.style.left=`${m}px`,u.style.top=`${v}px`,u.textContent=`${this.formatter_(d)}`,u.classList.contains(cm("t","a"))||(u.classList.add(cm("t","a"),cm("t","in")),WN(u),u.classList.remove(cm("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class VK{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=os(-1),this.view=new XXe(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!UF(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new bp(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Ec(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Cc(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(cr(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(cr(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function KW(t){return Ni(t.format)?Ao(2):t.format}function qXe(t){var e;return t.value.rawValue.length===1?new zK(t.document,{formatter:KW(t.params),value:t.value,viewProps:t.viewProps}):new UK(t.document,{formatter:KW(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:xM.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function YXe(t){var e,n,r;return new VK(t.document,{formatter:KW(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:xM.monitor.defaultRows,props:dr.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function D_e(t){return t.view==="graph"}xs({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=as(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>D_e(t)?64:1,reader:t=>fK},controller:t=>D_e(t.params)?YXe(t):qXe(t),api:t=>t.controller.valueController instanceof VK?new KXe(t.controller):null});xs({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=as(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>IK},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new UK(t.document,{formatter:$W,rows:(e=t.params.rows)!==null&&e!==void 0?e:xM.monitor.defaultRows,value:n,viewProps:t.viewProps}):new zK(t.document,{formatter:$W,value:n,viewProps:t.viewProps})}});class tPe{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller_.emitter.on(e,()=>{r(new x1(this))}),this}}class ZXe extends x1{constructor(e,n,r){super(e),this.cell=n,this.index=r}}class nPe extends q0{constructor(e){super(e),this.cellToApiMap_=new Map,this.emitter_=new ea;const n=this.controller.valueController;n.cellControllers.forEach((r,i)=>{const o=new tPe(r);this.cellToApiMap_.set(r,o),r.emitter.on("click",()=>{const u=i%n.size[0],d=Math.floor(i/n.size[0]);this.emitter_.emit("click",{event:new ZXe(this,o,[u,d])})})})}cell(e,n){const r=this.controller.valueController,i=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(i)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,i=>{r(i.event)}),this}}class rPe{constructor(e,n){this.size=n.size;const[r,i]=this.size,o=[];for(let u=0;u<i;u++)for(let d=0;d<r;d++){const m=new ECe(e,{props:dr.fromObject(Object.assign({},n.cellConfig(d,u))),viewProps:vp.create()});o.push(m)}this.cellCs_=o,this.viewProps=vp.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(u=>{u.viewProps.set("disposed",!0)})}),this.view=new kCe(e,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(u=>{this.view.element.appendChild(u.view.element)})}get cellControllers(){return this.cellCs_}}class O_e extends bM{constructor(e,n){const r=n.valueController,i=new VF(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=i}}const QXe=xs({id:"buttongrid",type:"blade",accept(t){const e=as(t,n=>({cells:n.required.function,size:n.required.array(n.required.number),view:n.required.constant("buttongrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new O_e(t.document,{blade:t.blade,labelProps:dr.fromObject({label:t.params.label}),valueController:new rPe(t.document,{cellConfig:t.params.cells,size:t.params.size})})},api(t){return t.controller instanceof O_e?new nPe(t.controller):null}});class iPe extends q0{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get value(){return this.controller.valueController.value.rawValue}set value(e){this.controller.valueController.value.rawValue=e}on(e,n){const r=n.bind(this);return this.controller.valueController.value.emitter.on(e,i=>{r(new BF(this,i.rawValue,i.options.last))}),this}}function lu(t,e,n){return t*(1-n)+e*n}const JXe=20,eqe=.001,QG=100;function tqe(t,e){let n=.25,r=.5,i=-1;for(let o=0;o<JXe;o++){const[u,d]=t.curve(r);if(r+=n*(u<e?1:-1),i=d,n*=.5,Math.abs(e-u)<eqe)break}return i}class Zm{constructor(e=0,n=0,r=1,i=1){this.cache_=[],this.comps_=[e,n,r,i]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(e){return Ni(e)||!Array.isArray(e)?!1:typeof e[0]=="number"&&typeof e[1]=="number"&&typeof e[2]=="number"&&typeof e[3]=="number"}static equals(e,n){return e.x1===n.x1&&e.y1===n.y1&&e.x2===n.x2&&e.y2===n.y2}curve(e){const n=lu(0,this.x1,e),r=lu(0,this.y1,e),i=lu(this.x1,this.x2,e),o=lu(this.y1,this.y2,e),u=lu(this.x2,1,e),d=lu(this.y2,1,e),m=lu(n,i,e),v=lu(r,o,e),x=lu(i,u,e),E=lu(o,d,e);return[lu(m,x,e),lu(v,E,e)]}y(e){if(this.cache_.length===0){const n=[];for(let r=0;r<QG;r++)n.push(tqe(this,cr(r,0,QG-1,0,1)));this.cache_=n}return this.cache_[Math.round(cr(Ki(e,0,1),0,1,0,QG-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const jK={toComponents:t=>t.toObject(),fromComponents:t=>new Zm(...t)};function nqe(t){const e=Ao(2);return`cubic-bezier(${t.toObject().map(r=>e(r)).join(", ")})`}const L_e=[0,.5,.5,1];function rqe(t){const e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new Zm(...L_e);const n=[e[1],e[2],e[3],e[4]].reduce((r,i)=>{if(!r)return null;const o=Number(i);return isNaN(o)?null:[...r,o]},[]);return new Zm(...n??L_e)}const r0=mr("cbz");class sPe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(r0()),n.viewProps.bindClassModifiers(this.element),n.foldable.bindExpandedClass(this.element,r0(void 0,"expanded")),Eu(n.foldable,"completed",ig(this.element,r0(void 0,"cpl")));const r=e.createElement("div");r.classList.add(r0("h")),this.element.appendChild(r);const i=e.createElement("button");i.classList.add(r0("b")),n.viewProps.bindDisabled(i);const o=e.createElementNS(ro,"svg");o.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',i.appendChild(o),r.appendChild(i),this.buttonElement=i;const u=e.createElement("div");if(u.classList.add(r0("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const d=e.createElement("div");d.classList.add(r0("p")),this.element.appendChild(d),this.pickerElement=d}else this.pickerElement=null}}const JG=mr("cbzp");class oPe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(JG()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(JG("g")),this.element.appendChild(r),this.graphElement=r;const i=e.createElement("div");i.classList.add(JG("t")),this.element.appendChild(i),this.textElement=i}}function aPe(t,e){const n=new MutationObserver(i=>{for(const o of i)o.type==="childList"&&o.addedNodes.forEach(u=>{u.contains(u)&&(e(),n.disconnect())})}),r=t.ownerDocument;n.observe(r.body,{attributes:!0,childList:!0,subtree:!0})}const dm=mr("cbzg");function iqe(t,e){return n=>e(t(n))}class lPe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(dm()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(dm("p")),this.element.appendChild(r),this.previewElement=r;const i=e.createElementNS(ro,"svg");i.classList.add(dm("g")),this.element.appendChild(i),this.svgElem_=i;const o=e.createElementNS(ro,"path");o.classList.add(dm("u")),this.svgElem_.appendChild(o),this.guideElem_=o;const u=e.createElementNS(ro,"polyline");u.classList.add(dm("l")),this.svgElem_.appendChild(u),this.lineElem_=u,this.handleElems_=[e.createElement("div"),e.createElement("div")],this.handleElems_.forEach(d=>{d.classList.add(dm("h")),this.element.appendChild(d)}),this.vectorElems_=[e.createElementNS(ro,"line"),e.createElementNS(ro,"line")],this.vectorElems_.forEach(d=>{d.classList.add(dm("v")),this.svgElem_.appendChild(d)}),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=n.selection,this.handleElems_.forEach((d,m)=>{wu(this.sel_,iqe(v=>v===m,ig(d,dm("h","sel"))))}),aPe(this.element,()=>{this.refresh()})}getVertMargin_(e){return e*.25}valueToPosition(e,n){const r=this.element.getBoundingClientRect(),i=r.width,o=r.height,u=this.getVertMargin_(o);return{x:cr(e,0,1,0,i),y:cr(n,0,1,o-u,u)}}positionToValue(e,n){const r=this.element.getBoundingClientRect(),i=r.width,o=r.height,u=this.getVertMargin_(o);return{x:Ki(cr(e,0,i,0,1),0,1),y:cr(n,o-u,u,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(o=>{const u=this.valueToPosition(0,o),d=this.valueToPosition(1,o);return[`M ${u.x},${u.y}`,`L ${d.x},${d.y}`].join(" ")}).join(" "));const e=this.value_.rawValue,n=[];let r=0;for(;;){const o=this.valueToPosition(...e.curve(r));if(n.push([o.x,o.y].join(",")),r>=1)break;r=Math.min(r+.05,1)}this.lineElem_.setAttributeNS(null,"points",n.join(" "));const i=e.toObject();[0,1].forEach(o=>{const u=this.valueToPosition(o,o),d=this.valueToPosition(i[o*2],i[o*2+1]),m=this.vectorElems_[o];m.setAttributeNS(null,"x1",String(u.x)),m.setAttributeNS(null,"y1",String(u.y)),m.setAttributeNS(null,"x2",String(d.x)),m.setAttributeNS(null,"y2",String(d.y));const v=this.handleElems_[o];v.style.left=`${d.x}px`,v.style.top=`${d.y}px`})}onValueChange_(){this.refresh()}}const N_e=24,F_e=400,B_e=1e3,aw=mr("cbzprv");class uPe{constructor(e,n){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(aw()),n.viewProps.bindClassModifiers(this.element);const r=e.createElementNS(ro,"svg");r.classList.add(aw("g")),this.element.appendChild(r),this.svgElem_=r;const i=e.createElementNS(ro,"path");i.classList.add(aw("t")),this.svgElem_.appendChild(i),this.ticksElem_=i;const o=e.createElement("div");o.classList.add(aw("m")),this.element.appendChild(o),this.markerElem_=o,this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.viewProps.handleDispose(this.onDispose_),aPe(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(aw("m","a")),this.startTime_=new Date().getTime()+F_e,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(aw("m","a"))}onDispose_(){this.stop()}updateMarker_(e){const n=this.value_.rawValue.y(Ki(e,0,1));this.markerElem_.style.left=`${n*100}%`}refresh(){const e=this.svgElem_.getBoundingClientRect(),n=e.width,r=e.height,i=[],o=this.value_.rawValue;for(let u=0;u<N_e;u++){const d=cr(u,0,N_e-1,0,1),m=cr(o.y(d),0,1,0,n);i.push(`M ${m},0 v${r}`)}this.ticksElem_.setAttributeNS(null,"d",i.join(" "))}onTimer_(){if(this.startTime_===null)return;const e=new Date().getTime()-this.startTime_,n=e/B_e;this.updateMarker_(n),e>B_e+F_e&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function XW(t,e,n,r){const i=n-t,o=r-e;return Math.sqrt(i*i+o*o)}function sqe(t,e,n,r){const i=XW(t,e,n,r),o=Math.atan2(r-e,n-t),u=Math.round(o/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(u)*i,y:e+Math.sin(u)*i}}class cPe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.keyScale_=n.keyScale,this.value=n.value,this.sel_=os(0),this.viewProps=n.viewProps,this.view=new lPe(e,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new uPe(e,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",i=>{i.stopImmediatePropagation(),i.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const r=new bp(this.view.element);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(e,n,r){const i=this.sel_.rawValue,o=this.value.rawValue.toObject(),u=this.view.positionToValue(e.x,e.y),d=n?sqe(i,i,u.x,u.y):u;o[i*2]=d.x,o[i*2+1]=d.y,this.value.setRawValue(new Zm(...o),r)}onPointerDown_(e){const n=e.data;if(!n.point)return;const r=this.value.rawValue,i=this.view.valueToPosition(r.x1,r.y1),o=XW(n.point.x,n.point.y,i.x,i.y),u=this.view.valueToPosition(r.x2,r.y2),d=XW(n.point.x,n.point.y,u.x,u.y);this.sel_.rawValue=o<=d?0:1,this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(e){XN(e.key)&&e.preventDefault();const n=this.sel_.rawValue,r=this.value.rawValue.toObject(),i=this.keyScale_.rawValue;r[n*2]+=io(i,Sc(e)),r[n*2+1]+=io(i,U0(e)),this.value.setRawValue(new Zm(...r),{forceEmit:!1,last:!1})}onKeyUp_(e){XN(e.key)&&e.preventDefault();const n=this.keyScale_.rawValue,r=io(n,Sc(e)),i=io(n,U0(e));r===0&&i===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class dPe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new oPe(e,{viewProps:this.viewProps}),this.gc_=new cPe(e,{keyScale:n.axis.textProps.value("keyScale"),value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const r=Object.assign(Object.assign({},n.axis),{constraint:new dK({max:1,min:0})}),i=Object.assign(Object.assign({},n.axis),{constraint:void 0});this.tc_=new C1(e,{assembly:jK,axes:[r,i,r,i],parser:xc,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(e=>e.inputElement)]}refresh(){this.gc_.refresh()}}class qW{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=S1.create(n.expanded),this.view=new sPe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new WF(e,{parser:rqe,props:dr.fromObject({formatter:nqe}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=n.pickerLayout==="popup"?new kK(e,{viewProps:this.viewProps}):null;const r=new dPe(e,{axis:n.axis,value:this.value,viewProps:this.viewProps});r.allFocusableElements.forEach(i=>{i.addEventListener("blur",this.onPopupChildBlur_),i.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),wu(this.popC_.shows,i=>{i&&r.refresh()}),Y0({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:i=>i,backward:(i,o)=>o})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),jF(this.foldable_,this.view.pickerElement))}onButtonBlur_(e){if(!this.popC_)return;const n=e.relatedTarget;(!n||!this.popC_.view.element.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=xK(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!UF(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_&&e.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function oqe(){return new KF({assembly:jK,components:[0,1,2,3].map(t=>t%2===0?new dK({min:0,max:1}):void 0)})}const aqe=xs({id:"cubicbezier",type:"blade",accept(t){const e=as(t,n=>({value:n.required.array(n.required.number),view:n.required.constant("cubicbezier"),expanded:n.optional.boolean,label:n.optional.string,picker:n.optional.custom(r=>r==="inline"||r==="popup"?r:void 0)}));return e?{params:e}:null},controller(t){var e,n;const r=new Zm(...t.params.value),i=os(r,{constraint:oqe(),equals:Zm.equals}),o=new qW(t.document,{axis:{textProps:dr.fromObject({keyScale:.1,pointerScale:.01,formatter:Ao(2)})},expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:i,viewProps:t.viewProps});return new $N(t.document,{blade:t.blade,props:dr.fromObject({label:t.params.label}),value:i,valueController:o})},api(t){return!(t.controller instanceof $N)||!(t.controller.valueController instanceof qW)?null:new iPe(t.controller)}});class hPe extends q0{begin(){this.controller.valueController.begin()}end(){this.controller.valueController.end()}}const U_e=20;class pPe{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(e){this.start_=e.getTime()}calculateFps_(e){if(this.timestamps_.length===0)return null;const n=this.timestamps_[0];return 1e3*(this.frameCount_-n.frameCount)/(e-n.time)}compactTimestamps_(){if(this.timestamps_.length<=U_e)return;const e=this.timestamps_.length-U_e;this.timestamps_.splice(0,e);const n=this.timestamps_[0].frameCount;this.timestamps_.forEach(r=>{r.frameCount-=n}),this.frameCount_-=n}end(e){if(this.start_===null)return;const n=e.getTime();this.duration_=n-this.start_,this.start_=null,this.fps_=this.calculateFps_(n),this.timestamps_.push({frameCount:this.frameCount_,time:n}),++this.frameCount_,this.compactTimestamps_()}}const IP=mr("fps");class fPe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(IP()),n.viewProps.bindClassModifiers(this.element),this.graphElement=e.createElement("div"),this.graphElement.classList.add(IP("g")),this.element.appendChild(this.graphElement);const r=e.createElement("div");r.classList.add(IP("l")),this.element.appendChild(r);const i=e.createElement("span");i.classList.add(IP("v")),i.textContent="--",r.appendChild(i),this.valueElement=i;const o=e.createElement("span");o.classList.add(IP("u")),o.textContent="FPS",r.appendChild(o)}}class mPe{constructor(e,n){this.stopwatch_=new pPe,this.onTick_=this.onTick_.bind(this),this.ticker_=n.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=n.value,this.viewProps=n.viewProps,this.view=new fPe(e,{viewProps:this.viewProps}),this.graphC_=new VK(e,{formatter:Ao(0),props:dr.fromObject({max:n.maxValue,min:n.minValue}),rows:n.rows,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()})}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const e=this.stopwatch_.fps;if(e!==null){const n=this.value_.rawValue;this.value_.rawValue=_7e(n,e),this.view.valueElement.textContent=e.toFixed(0)}}}class z_e extends bM{constructor(e,n){const r=n.valueController,i=new VF(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:i.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=i}}function lqe(t,e){return e===0?new K7e:new X7e(t,e??xM.monitor.defaultInterval)}const uqe=xs({id:"fpsgraph",type:"blade",accept(t){const e=as(t,n=>({view:n.required.constant("fpsgraph"),interval:n.optional.number,label:n.optional.string,rows:n.optional.number,max:n.optional.number,min:n.optional.number}));return e?{params:e}:null},controller(t){var e,n,r,i;const o=(e=t.params.interval)!==null&&e!==void 0?e:500;return new z_e(t.document,{blade:t.blade,labelProps:dr.fromObject({label:t.params.label}),valueController:new mPe(t.document,{rows:(n=t.params.rows)!==null&&n!==void 0?n:2,maxValue:(r=t.params.max)!==null&&r!==void 0?r:90,minValue:(i=t.params.min)!==null&&i!==void 0?i:0,ticker:lqe(t.document,o),value:os(y7e(80)),viewProps:t.viewProps})})},api(t){return t.controller instanceof z_e?new hPe(t.controller):null}});class wl{constructor(e,n){this.min=e,this.max=n}static isObject(e){if(typeof e!="object"||e===null)return!1;const n=e.min,r=e.max;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.min===n.min&&e.max===n.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const HK={fromComponents:t=>new wl(t[0],t[1]),toComponents:t=>[t.min,t.max]};class GK{constructor(e){this.edge=e}constrain(e){var n,r,i,o,u,d,m,v;if(e.min<=e.max)return new wl((r=(n=this.edge)===null||n===void 0?void 0:n.constrain(e.min))!==null&&r!==void 0?r:e.min,(o=(i=this.edge)===null||i===void 0?void 0:i.constrain(e.max))!==null&&o!==void 0?o:e.max);const x=(e.min+e.max)/2;return new wl((d=(u=this.edge)===null||u===void 0?void 0:u.constrain(x))!==null&&d!==void 0?d:x,(v=(m=this.edge)===null||m===void 0?void 0:m.constrain(x))!==null&&v!==void 0?v:x)}}const e9=mr("rsltxt");class gPe{constructor(e,n){this.sliderView_=n.sliderView,this.textView_=n.textView,this.element=e.createElement("div"),this.element.classList.add(e9());const r=e.createElement("div");r.classList.add(e9("s")),r.appendChild(this.sliderView_.element),this.element.appendChild(r);const i=e.createElement("div");i.classList.add(e9("t")),i.appendChild(this.textView_.element),this.element.appendChild(i)}}const i0=mr("rsl");class vPe{constructor(e,n){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=n.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=e.createElement("div"),this.element.classList.add(i0()),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_);const r=e.createElement("div");r.classList.add(i0("t")),this.element.appendChild(r),this.trackElement=r;const i=e.createElement("div");i.classList.add(i0("b")),r.appendChild(i),this.barElement=i;const o=["min","max"].map(u=>{const d=e.createElement("div");return d.classList.add(i0("k"),i0("k",u)),r.appendChild(d),d});this.knobElements=[o[0],o[1]],this.update_()}valueToX_(e){const n=this.sliderProps_.get("min"),r=this.sliderProps_.get("max");return Ki(cr(e,n,r,0,1),0,1)*100}update_(){const e=this.value_.rawValue;e.length===0?this.element.classList.add(i0(void 0,"zero")):this.element.classList.remove(i0(void 0,"zero"));const n=[this.valueToX_(e.min),this.valueToX_(e.max)];this.barElement.style.left=`${n[0]}%`,this.barElement.style.right=`${100-n[1]}%`,this.knobElements.forEach((r,i)=>{r.style.left=`${n[i]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class yPe{constructor(e,n){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=n.sliderProps,this.viewProps=n.viewProps,this.value=n.value,this.view=new vPe(e,{sliderProps:this.sliderProps,value:this.value,viewProps:n.viewProps});const r=new bp(this.view.trackElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(e){if(!e.point)return null;const n=(e.point.x+this.ofs_())/e.bounds.width,r=this.sliderProps.get("min"),i=this.sliderProps.get("max");return cr(n,0,1,r,i)}onPointerDown_(e){if(!e.data.point)return;const n=e.data.point.x/e.data.bounds.width,r=this.value.rawValue,i=this.sliderProps.get("min"),o=this.sliderProps.get("max"),u=cr(r.min,i,o,0,1),d=cr(r.max,i,o,0,1);Math.abs(d-n)<=.025?this.grabbing_="max":Math.abs(u-n)<=.025?this.grabbing_="min":n>=u&&n<=d?(this.grabbing_="length",this.grabOffset_=cr(n-u,0,1,0,o-i)):n<u?(this.grabbing_="min",this.onPointerMove_(e)):n>d&&(this.grabbing_="max",this.onPointerMove_(e))}applyPointToValue_(e,n){const r=this.valueFromData_(e);if(r===null)return;const i=this.sliderProps.get("min"),o=this.sliderProps.get("max");if(this.grabbing_==="min")this.value.setRawValue(new wl(r,this.value.rawValue.max),n);else if(this.grabbing_==="max")this.value.setRawValue(new wl(this.value.rawValue.min,r),n);else if(this.grabbing_==="length"){const u=this.value.rawValue.length;let d=r-this.grabOffset_,m=d+u;d<i?(d=i,m=i+u):m>o&&(d=o-u,m=o),this.value.setRawValue(new wl(d,m),n)}}onPointerMove_(e){this.applyPointToValue_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.applyPointToValue_(e.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class bPe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sc_=new yPe(e,n);const r={constraint:n.constraint,textProps:n.textProps};this.tc_=new C1(e,{assembly:HK,axes:[r,r],parser:n.parser,value:this.value,viewProps:n.viewProps}),this.view=new gPe(e,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function cqe(t){return wl.isObject(t)?new wl(t.min,t.max):new wl(0,0)}function dqe(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function hqe(t){const e=[],n=gK(t);n&&e.push(n);const r=mK(t);return r&&e.push(r),new GK(new E1(e))}const pqe=xs({id:"input-interval",type:"input",accept:(t,e)=>{if(!wl.isObject(t))return null;const n=as(e,r=>Object.assign(Object.assign({},yK(r)),{readonly:r.optional.constant(!1)}));return n?{initialValue:new wl(t.min,t.max),params:n}:null},binding:{reader:t=>cqe,constraint:t=>hqe(t.params),equals:wl.equals,writer:t=>dqe},controller(t){const e=t.value,n=t.constraint;if(!(n instanceof GK))throw Sa.shouldNeverHappen();const r=(e.rawValue.min+e.rawValue.max)/2,i=dr.fromObject(vK(t.params,r)),o=n.edge&&WT(n.edge,yM);if(o)return new bPe(t.document,{constraint:n.edge,parser:xc,sliderProps:new dr({keyScale:i.value("keyScale"),max:o.values.value("max"),min:o.values.value("min")}),textProps:i,value:e,viewProps:t.viewProps});const u={constraint:n.edge,textProps:i};return new C1(t.document,{assembly:HK,axes:[u,u],parser:xc,value:e,viewProps:t.viewProps})}});class _Pe{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}}class wPe extends BF{constructor(e,n,r,i,o){super(e,i,o),this.cell=n,this.index=r}}class xPe extends q0{constructor(e){super(e),this.cellToApiMap_=new Map,this.controller.valueController.cellControllers.forEach(r=>{const i=new _Pe(r);this.cellToApiMap_.set(r,i)})}get value(){return this.controller.value}cell(e,n){const r=this.controller.valueController,i=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(i)}on(e,n){const r=n.bind(this);this.controller.value.emitter.on(e,i=>{const o=this.controller.valueController,u=o.findCellByValue(i.rawValue);if(!u)return;const d=this.cellToApiMap_.get(u);if(!d)return;const m=o.cellControllers.indexOf(u);r(new wPe(this,d,[m%o.size[0],Math.floor(m/o.size[0])],i.rawValue))})}}const RP=mr("rad");class SPe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(RP()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(RP("l")),this.element.appendChild(r);const i=e.createElement("input");i.classList.add(RP("i")),i.name=n.name,i.type="radio",n.viewProps.bindDisabled(i),r.appendChild(i),this.inputElement=i;const o=e.createElement("div");o.classList.add(RP("b")),r.appendChild(o);const u=e.createElement("div");u.classList.add(RP("t")),o.appendChild(u),Eu(n.props,"title",d=>{u.textContent=d})}}class EPe{constructor(e,n){this.props=n.props,this.viewProps=n.viewProps,this.view=new SPe(e,{name:n.name,props:this.props,viewProps:this.viewProps})}}class qN{constructor(e,n){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=n.size;const[r,i]=this.size;for(let o=0;o<i;o++)for(let u=0;u<r;u++){const d=new EPe(e,{name:n.groupName,props:dr.fromObject(Object.assign({},n.cellConfig(u,o))),viewProps:vp.create()});this.cellCs_.push(d),this.cellValues_.push(n.cellConfig(u,o).value)}this.value=n.value,wu(this.value,o=>{const u=this.findCellByValue(o);u&&(u.view.inputElement.checked=!0)}),this.viewProps=vp.create(),this.view=new kCe(e,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(o=>{o.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(o.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(e){const n=this.cellValues_.findIndex(r=>r===e);return n<0?null:this.cellCs_[n]}onCellInputChange_(e){const n=e.currentTarget,r=this.cellCs_.findIndex(i=>i.view.inputElement===n);r<0||(this.value.rawValue=this.cellValues_[r])}}const fqe=function(){return xs({id:"radiogrid",type:"blade",accept(t){const e=as(t,n=>({cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),value:n.required.raw,view:n.required.constant("radiogrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=os(t.params.value);return new $N(t.document,{blade:t.blade,props:dr.fromObject({label:t.params.label}),value:e,valueController:new qN(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:e})})},api(t){return!(t.controller instanceof $N)||!(t.controller.valueController instanceof qN)?null:new xPe(t.controller)}})}();function WK(t){return xs({id:"input-radiogrid",type:"input",accept(e,n){if(!t.isType(e))return null;const r=as(n,i=>({cells:i.required.function,groupName:i.required.string,size:i.required.array(i.required.number),view:i.required.constant("radiogrid")}));return r?{initialValue:e,params:r}:null},binding:t.binding,controller:e=>new qN(e.document,{cellConfig:e.params.cells,groupName:e.params.groupName,size:e.params.size,value:e.value})})}const mqe=WK({isType:t=>typeof t=="number",binding:{reader:t=>fK,writer:t=>sg}}),gqe=WK({isType:t=>typeof t=="string",binding:{reader:t=>IK,writer:t=>sg}}),vqe=WK({isType:t=>typeof t=="boolean",binding:{reader:t=>AK,writer:t=>sg}}),yqe="essentials",bqe='.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--cnt-usp);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-cbzpv_t{margin-top:var(--cnt-usp)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--cnt-usz) * 5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--cnt-usz));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--cnt-usz) - 8px);margin-top:calc((var(--cnt-usz) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',_qe=[QXe,aqe,uqe,pqe,fqe,vqe,mqe,gqe],wqe=Object.freeze(Object.defineProperty({__proto__:null,ButtonCellApi:tPe,ButtonGridApi:nPe,ButtonGridController:rPe,CubicBezier:Zm,CubicBezierApi:iPe,CubicBezierAssembly:jK,CubicBezierController:qW,CubicBezierGraphController:cPe,CubicBezierGraphView:lPe,CubicBezierPickerController:dPe,CubicBezierPickerView:oPe,CubicBezierPreviewView:uPe,CubicBezierView:sPe,FpsGraphBladeApi:hPe,FpsGraphController:mPe,FpsView:fPe,Fpswatch:pPe,Interval:wl,IntervalAssembly:HK,IntervalConstraint:GK,RadioCellApi:_Pe,RadioController:EPe,RadioGridApi:xPe,RadioGridController:qN,RadioView:SPe,RangeSliderController:yPe,RangeSliderTextController:bPe,RangeSliderTextView:gPe,RangeSliderView:vPe,TpRadioGridChangeEvent:wPe,css:bqe,id:yqe,plugins:_qe},Symbol.toStringTag,{value:"Module"}));class xqe extends RF{constructor(n){super(n);yr(this,"bindCBs");yr(this,"buttonCBs");yr(this,"pane");yr(this,"appCallbacks",0);yr(this,"editorCallbacks",0);yr(this,"inspectorFolder");this.bindCBs=new Map,this.buttonCBs=new Map,n.editor&&this.createGUI()}createGUI(){this.pane=new x$e({title:"GUI"}),this.pane.registerPlugin(wqe)}dispose(){var n;this.bindCBs.clear(),this.buttonCBs.clear(),this.appCallbacks=0,this.editorCallbacks=0,this.app.editor&&((n=this.pane)==null||n.dispose(),this.pane=void 0)}addFolder(n,r=void 0,i=void 0){if(this.app.editor)return this.pane===void 0&&this.createGUI(),(i!==void 0?i:this.pane).addFolder({title:n,...r});this.app.send({event:"addFolder",target:"app",data:{name:n,params:r,parent:i}})}get bindID(){return`debug_${Math.max(this.appCallbacks,this.editorCallbacks)}`}bind(n,r,i,o=void 0){const u=this.bindID,d=i.onChange!==void 0?i.onChange:aEe;this.bindCBs.set(u,d),this.app.editor?(this.pane===void 0&&this.createGUI(),(o!==void 0?o:this.pane).addBinding(n,r,i).on("change",v=>{this.app.send({event:"updateBind",target:"app",data:{id:u,value:v.value}})}),this.editorCallbacks++):(this.app.send({event:"bindObject",target:"app",data:{id:u,name:r,params:i,parent:o}}),this.appCallbacks++)}triggerBind(n,r){const i=this.bindCBs.get(n);i!==void 0?i(r):console.warn(`No callback for: ${n}`,r)}button(n,r,i=void 0){const o=this.bindID;this.buttonCBs.set(o,r),this.app.editor?(this.pane===void 0&&this.createGUI(),(i!==void 0?i:this.pane).addButton({title:n}).on("click",()=>{this.app.send({event:"clickButton",target:"app",data:{id:o}})}),this.editorCallbacks++):(this.app.send({event:"addButton",target:"app",data:{id:o,name:n,callback:r,parent:i}}),this.appCallbacks++)}triggerButton(n){const r=this.buttonCBs.get(n);r!==void 0&&r()}createInspector(){this.inspectorFolder=this.addFolder("Inspector",this.pane)}clearInspector(){const n=this.inspectorFolder.children.length-1;for(let r=n;r>-1;--r)this.inspectorFolder.remove(this.inspectorFolder.children[r])}handleApp(n,r,i){const o=r;switch(i.event){case"addFolder":o.addFolder(i.data.name,i.data.params,i.data.parent);break;case"bindObject":o.bind(i.data.name,i.data.params,i.data.parent);break;case"updateBind":o.triggerBind(i.data.id,i.data.value);break;case"addButton":o.button(i.data.name,i.data.callback,i.data.parent);break;case"clickButton":o.triggerButton(i.data.id);break}}}const Sqe=!0,Fr=new G8e("ws://localhost:8080",Sqe),bm=new r1(Fr),VP=new nHe(Fr);Fr.addComponent("theatre",bm);Fr.addComponent("three",VP);{bm.studio=_Se;const t=new $8e(Fr),e=new xqe(Fr);Fr.addComponent("components",t),Fr.addComponent("debug",e);const n=[{remote:bm,callback:bm.handleApp},{remote:VP,callback:VP.handleApp},{remote:t,callback:t.handleApp},{remote:e,callback:e.handleApp}],r=[{remote:bm,callback:bm.handleEditor},{remote:VP,callback:VP.handleEditor}];W8e(Fr,n,r),bm.handleEditorApp(Fr,bm)}const KT=new Tl,XT={LOAD_COMPLETE:"Events::loadComplete"};function Eqe(t){return Je.jsxs("div",{className:"editor",ref:t.ref,style:t.style,children:[Je.jsx("div",{className:"header",children:t.header}),t.children,Je.jsx("div",{className:"footer",children:t.footer})]})}function CPe(t){return t.title.search("<")>-1?Je.jsx("button",{className:"svg",dangerouslySetInnerHTML:{__html:t.title}}):Je.jsx("button",{children:t.title})}const $K=Mt.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),XF=Mt.createContext({}),KK=Mt.createContext(null),qF=typeof document<"u",YW=qF?Mt.useLayoutEffect:Mt.useEffect,PPe=Mt.createContext({strict:!1});function Cqe(t,e,n,r){const{visualElement:i}=Mt.useContext(XF),o=Mt.useContext(PPe),u=Mt.useContext(KK),d=Mt.useContext($K).reducedMotion,m=Mt.useRef();r=r||o.renderer,!m.current&&r&&(m.current=r(t,{visualState:e,parent:i,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const v=m.current;return Mt.useInsertionEffect(()=>{v&&v.update(n,u)}),YW(()=>{v&&v.render()}),Mt.useEffect(()=>{v&&v.updateFeatures()}),(window.HandoffAppearAnimations?YW:Mt.useEffect)(()=>{v&&v.animationState&&v.animationState.animateChanges()}),v}function kw(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Pqe(t,e,n){return Mt.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):kw(n)&&(n.current=r))},[e])}function qT(t){return typeof t=="string"||Array.isArray(t)}function YF(t){return typeof t=="object"&&typeof t.start=="function"}const XK=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],qK=["initial",...XK];function ZF(t){return YF(t.animate)||qK.some(e=>qT(t[e]))}function TPe(t){return!!(ZF(t)||t.variants)}function Tqe(t,e){if(ZF(t)){const{initial:n,animate:r}=t;return{initial:n===!1||qT(n)?n:void 0,animate:qT(r)?r:void 0}}return t.inherit!==!1?e:{}}function Mqe(t){const{initial:e,animate:n}=Tqe(t,Mt.useContext(XF));return Mt.useMemo(()=>({initial:e,animate:n}),[V_e(e),V_e(n)])}function V_e(t){return Array.isArray(t)?t.join(" "):t}const j_e={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},YT={};for(const t in j_e)YT[t]={isEnabled:e=>j_e[t].some(n=>!!e[n])};function kqe(t){for(const e in t)YT[e]={...YT[e],...t[e]}}const MPe=Mt.createContext({}),kPe=Mt.createContext({}),Aqe=Symbol.for("motionComponentSymbol");function Iqe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&kqe(t);function o(d,m){let v;const x={...Mt.useContext($K),...d,layoutId:Rqe(d)},{isStatic:E}=x,M=Mqe(d),R=r(d,E);if(!E&&qF){M.visualElement=Cqe(i,R,x,e);const j=Mt.useContext(kPe),F=Mt.useContext(PPe).strict;M.visualElement&&(v=M.visualElement.loadFeatures(x,F,t,j))}return Mt.createElement(XF.Provider,{value:M},v&&M.visualElement?Mt.createElement(v,{visualElement:M.visualElement,...x}):null,n(i,d,Pqe(R,M.visualElement,m),R,E,M.visualElement))}const u=Mt.forwardRef(o);return u[Aqe]=i,u}function Rqe({layoutId:t}){const e=Mt.useContext(MPe).id;return e&&t!==void 0?e+"-"+t:t}function Dqe(t){function e(r,i={}){return Iqe(t(r,i))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,i)=>(n.has(i)||n.set(i,e(i)),n.get(i))})}const Oqe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function YK(t){return typeof t!="string"||t.includes("-")?!1:!!(Oqe.indexOf(t)>-1||/[A-Z]/.test(t))}const YN={};function Lqe(t){Object.assign(YN,t)}const SM=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Z0=new Set(SM);function APe(t,{layout:e,layoutId:n}){return Z0.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!YN[t]||t==="opacity")}const Ma=t=>!!(t&&t.getVelocity),Nqe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Fqe=SM.length;function Bqe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,i){let o="";for(let u=0;u<Fqe;u++){const d=SM[u];if(t[d]!==void 0){const m=Nqe[d]||d;o+=`${m}(${t[d]}) `}}return e&&!t.z&&(o+="translateZ(0)"),o=o.trim(),i?o=i(t,r?"":o):n&&r&&(o="none"),o}const IPe=t=>e=>typeof e=="string"&&e.startsWith(t),RPe=IPe("--"),ZW=IPe("var(--"),Uqe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,zqe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Qm=(t,e,n)=>Math.min(Math.max(n,t),e),Q0={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},rT={...Q0,transform:t=>Qm(0,1,t)},EL={...Q0,default:1},iT=t=>Math.round(t*1e5)/1e5,QF=/(-)?([\d]*\.?[\d])+/g,DPe=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Vqe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function EM(t){return typeof t=="string"}const CM=t=>({test:e=>EM(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_m=CM("deg"),Md=CM("%"),Yn=CM("px"),jqe=CM("vh"),Hqe=CM("vw"),H_e={...Md,parse:t=>Md.parse(t)/100,transform:t=>Md.transform(t*100)},G_e={...Q0,transform:Math.round},OPe={borderWidth:Yn,borderTopWidth:Yn,borderRightWidth:Yn,borderBottomWidth:Yn,borderLeftWidth:Yn,borderRadius:Yn,radius:Yn,borderTopLeftRadius:Yn,borderTopRightRadius:Yn,borderBottomRightRadius:Yn,borderBottomLeftRadius:Yn,width:Yn,maxWidth:Yn,height:Yn,maxHeight:Yn,size:Yn,top:Yn,right:Yn,bottom:Yn,left:Yn,padding:Yn,paddingTop:Yn,paddingRight:Yn,paddingBottom:Yn,paddingLeft:Yn,margin:Yn,marginTop:Yn,marginRight:Yn,marginBottom:Yn,marginLeft:Yn,rotate:_m,rotateX:_m,rotateY:_m,rotateZ:_m,scale:EL,scaleX:EL,scaleY:EL,scaleZ:EL,skew:_m,skewX:_m,skewY:_m,distance:Yn,translateX:Yn,translateY:Yn,translateZ:Yn,x:Yn,y:Yn,z:Yn,perspective:Yn,transformPerspective:Yn,opacity:rT,originX:H_e,originY:H_e,originZ:Yn,zIndex:G_e,fillOpacity:rT,strokeOpacity:rT,numOctaves:G_e};function ZK(t,e,n,r){const{style:i,vars:o,transform:u,transformOrigin:d}=t;let m=!1,v=!1,x=!0;for(const E in e){const M=e[E];if(RPe(E)){o[E]=M;continue}const R=OPe[E],j=zqe(M,R);if(Z0.has(E)){if(m=!0,u[E]=j,!x)continue;M!==(R.default||0)&&(x=!1)}else E.startsWith("origin")?(v=!0,d[E]=j):i[E]=j}if(e.transform||(m||r?i.transform=Bqe(t.transform,n,x,r):i.transform&&(i.transform="none")),v){const{originX:E="50%",originY:M="50%",originZ:R=0}=d;i.transformOrigin=`${E} ${M} ${R}`}}const QK=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function LPe(t,e,n){for(const r in e)!Ma(e[r])&&!APe(r,n)&&(t[r]=e[r])}function Gqe({transformTemplate:t},e,n){return Mt.useMemo(()=>{const r=QK();return ZK(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function Wqe(t,e,n){const r=t.style||{},i={};return LPe(i,r,t),Object.assign(i,Gqe(t,e,n)),t.transformValues?t.transformValues(i):i}function $qe(t,e,n){const r={},i=Wqe(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=i,r}const Kqe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function ZN(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||Kqe.has(t)}let NPe=t=>!ZN(t);function Xqe(t){t&&(NPe=e=>e.startsWith("on")?!ZN(e):t(e))}try{Xqe(require("@emotion/is-prop-valid").default)}catch{}function qqe(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(NPe(i)||n===!0&&ZN(i)||!e&&!ZN(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function W_e(t,e,n){return typeof t=="string"?t:Yn.transform(e+n*t)}function Yqe(t,e,n){const r=W_e(e,t.x,t.width),i=W_e(n,t.y,t.height);return`${r} ${i}`}const Zqe={offset:"stroke-dashoffset",array:"stroke-dasharray"},Qqe={offset:"strokeDashoffset",array:"strokeDasharray"};function Jqe(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?Zqe:Qqe;t[o.offset]=Yn.transform(-r);const u=Yn.transform(e),d=Yn.transform(n);t[o.array]=`${u} ${d}`}function JK(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:u,pathSpacing:d=1,pathOffset:m=0,...v},x,E,M){if(ZK(t,v,x,M),E){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:R,style:j,dimensions:F}=t;R.transform&&(F&&(j.transform=R.transform),delete R.transform),F&&(i!==void 0||o!==void 0||j.transform)&&(j.transformOrigin=Yqe(F,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(R.x=e),n!==void 0&&(R.y=n),r!==void 0&&(R.scale=r),u!==void 0&&Jqe(R,u,d,m,!1)}const FPe=()=>({...QK(),attrs:{}}),eX=t=>typeof t=="string"&&t.toLowerCase()==="svg";function eYe(t,e,n,r){const i=Mt.useMemo(()=>{const o=FPe();return JK(o,e,{enableHardwareAcceleration:!1},eX(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};LPe(o,t.style,t),i.style={...o,...i.style}}return i}function tYe(t=!1){return(n,r,i,{latestValues:o},u)=>{const m=(YK(n)?eYe:$qe)(r,o,u,n),x={...qqe(r,typeof n=="string",t),...m,ref:i},{children:E}=r,M=Mt.useMemo(()=>Ma(E)?E.get():E,[E]);return Mt.createElement(n,{...x,children:M})}}const tX=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function BPe(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const UPe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zPe(t,e,n,r){BPe(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(UPe.has(i)?i:tX(i),e.attrs[i])}function nX(t,e){const{style:n}=t,r={};for(const i in n)(Ma(n[i])||e.style&&Ma(e.style[i])||APe(i,t))&&(r[i]=n[i]);return r}function VPe(t,e){const n=nX(t,e);for(const r in t)if(Ma(t[r])||Ma(e[r])){const i=SM.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[i]=t[r]}return n}function rX(t,e,n,r={},i={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,i)),e}function PM(t){const e=Mt.useRef(null);return e.current===null&&(e.current=t()),e.current}const QN=t=>Array.isArray(t),nYe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),rYe=t=>QN(t)?t[t.length-1]||0:t;function ZL(t){const e=Ma(t)?t.get():t;return nYe(e)?e.toValue():e}function iYe({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,i,o){const u={latestValues:sYe(r,i,o,t),renderState:e()};return n&&(u.mount=d=>n(r,d,u)),u}const jPe=t=>(e,n)=>{const r=Mt.useContext(XF),i=Mt.useContext(KK),o=()=>iYe(t,e,r,i);return n?o():PM(o)};function sYe(t,e,n,r){const i={},o=r(t,{});for(const M in o)i[M]=ZL(o[M]);let{initial:u,animate:d}=t;const m=ZF(t),v=TPe(t);e&&v&&!m&&t.inherit!==!1&&(u===void 0&&(u=e.initial),d===void 0&&(d=e.animate));let x=n?n.initial===!1:!1;x=x||u===!1;const E=x?d:u;return E&&typeof E!="boolean"&&!YF(E)&&(Array.isArray(E)?E:[E]).forEach(R=>{const j=rX(t,R);if(!j)return;const{transitionEnd:F,transition:B,...z}=j;for(const P in z){let W=z[P];if(Array.isArray(W)){const Z=x?W.length-1:0;W=W[Z]}W!==null&&(i[P]=W)}for(const P in F)i[P]=F[P]}),i}const oYe={useVisualState:jPe({scrapeMotionValuesFromProps:VPe,createRenderState:FPe,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}JK(n,r,{enableHardwareAcceleration:!1},eX(e.tagName),t.transformTemplate),zPe(e,n)}})},aYe={useVisualState:jPe({scrapeMotionValuesFromProps:nX,createRenderState:QK})};function lYe(t,{forwardMotionProps:e=!1},n,r){return{...YK(t)?oYe:aYe,preloadedFeatures:n,useRender:tYe(e),createVisualElement:r,Component:t}}function np(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const HPe=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function JF(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const uYe=t=>e=>HPe(e)&&t(e,JF(e));function ap(t,e,n,r){return np(t,e,uYe(n),r)}const cYe=(t,e)=>n=>e(t(n)),Wm=(...t)=>t.reduce(cYe);function GPe(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const $_e=GPe("dragHorizontal"),K_e=GPe("dragVertical");function WPe(t){let e=!1;if(t==="y")e=K_e();else if(t==="x")e=$_e();else{const n=$_e(),r=K_e();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function $Pe(){const t=WPe(!0);return t?(t(),!1):!0}class og{constructor(e){this.isMounted=!1,this.node=e}update(){}}const ss=t=>t;function dYe(t){let e=[],n=[],r=0,i=!1,o=!1;const u=new WeakSet,d={schedule:(m,v=!1,x=!1)=>{const E=x&&i,M=E?e:n;return v&&u.add(m),M.indexOf(m)===-1&&(M.push(m),E&&i&&(r=e.length)),m},cancel:m=>{const v=n.indexOf(m);v!==-1&&n.splice(v,1),u.delete(m)},process:m=>{if(i){o=!0;return}if(i=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let v=0;v<r;v++){const x=e[v];x(m),u.has(x)&&(d.schedule(x),t())}i=!1,o&&(o=!1,d.process(m))}};return d}const CL=["prepare","read","update","preRender","render","postRender"],hYe=40;function pYe(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=CL.reduce((E,M)=>(E[M]=dYe(()=>n=!0),E),{}),u=E=>o[E].process(i),d=()=>{const E=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,hYe),1),i.timestamp=E,i.isProcessing=!0,CL.forEach(u),i.isProcessing=!1,n&&e&&(r=!1,t(d))},m=()=>{n=!0,r=!0,i.isProcessing||t(d)};return{schedule:CL.reduce((E,M)=>{const R=o[M];return E[M]=(j,F=!1,B=!1)=>(n||m(),R.schedule(j,F,B)),E},{}),cancel:E=>CL.forEach(M=>o[M].cancel(E)),state:i,steps:o}}const{schedule:Fi,cancel:Dd,state:Xo,steps:t9}=pYe(typeof requestAnimationFrame<"u"?requestAnimationFrame:ss,!0);function X_e(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),i=(o,u)=>{if(o.type==="touch"||$Pe())return;const d=t.getProps();t.animationState&&d.whileHover&&t.animationState.setActive("whileHover",e),d[r]&&Fi.update(()=>d[r](o,u))};return ap(t.current,n,i,{passive:!t.getProps()[r]})}class fYe extends og{mount(){this.unmount=Wm(X_e(this.node,!0),X_e(this.node,!1))}unmount(){}}class mYe extends og{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wm(np(this.node.current,"focus",()=>this.onFocus()),np(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const KPe=(t,e)=>e?t===e?!0:KPe(t,e.parentElement):!1;function n9(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,JF(n))}class gYe extends og{constructor(){super(...arguments),this.removeStartListeners=ss,this.removeEndListeners=ss,this.removeAccessibleListeners=ss,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),o=ap(window,"pointerup",(d,m)=>{if(!this.checkPressEnd())return;const{onTap:v,onTapCancel:x}=this.node.getProps();Fi.update(()=>{KPe(this.node.current,d.target)?v&&v(d,m):x&&x(d,m)})},{passive:!(r.onTap||r.onPointerUp)}),u=ap(window,"pointercancel",(d,m)=>this.cancelPress(d,m),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Wm(o,u),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const u=d=>{d.key!=="Enter"||!this.checkPressEnd()||n9("up",(m,v)=>{const{onTap:x}=this.node.getProps();x&&Fi.update(()=>x(m,v))})};this.removeEndListeners(),this.removeEndListeners=np(this.node.current,"keyup",u),n9("down",(d,m)=>{this.startPress(d,m)})},n=np(this.node.current,"keydown",e),r=()=>{this.isPressing&&n9("cancel",(o,u)=>this.cancelPress(o,u))},i=np(this.node.current,"blur",r);this.removeAccessibleListeners=Wm(n,i)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Fi.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!$Pe()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Fi.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=ap(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=np(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Wm(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const QW=new WeakMap,r9=new WeakMap,vYe=t=>{const e=QW.get(t.target);e&&e(t)},yYe=t=>{t.forEach(vYe)};function bYe({root:t,...e}){const n=t||document;r9.has(n)||r9.set(n,{});const r=r9.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(yYe,{root:t,...e})),r[i]}function _Ye(t,e,n){const r=bYe(e);return QW.set(t,n),r.observe(t),()=>{QW.delete(t),r.unobserve(t)}}const wYe={some:0,all:1};class xYe extends og{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,u={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:wYe[i]},d=m=>{const{isIntersecting:v}=m;if(this.isInView===v||(this.isInView=v,o&&!v&&this.hasEnteredView))return;v&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",v);const{onViewportEnter:x,onViewportLeave:E}=this.node.getProps(),M=v?x:E;M&&M(m)};return _Ye(this.node.current,u,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(SYe(e,n))&&this.startObserver()}unmount(){}}function SYe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const EYe={inView:{Feature:xYe},tap:{Feature:gYe},focus:{Feature:mYe},hover:{Feature:fYe}};function XPe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function CYe(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function PYe(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function eB(t,e,n){const r=t.getProps();return rX(r,e,n!==void 0?n:r.custom,CYe(t),PYe(t))}const TYe="framerAppearId",MYe="data-"+tX(TYe);let kYe=ss,iX=ss;const $m=t=>t*1e3,lp=t=>t/1e3,AYe={current:!1},qPe=t=>Array.isArray(t)&&typeof t[0]=="number";function YPe(t){return!!(!t||typeof t=="string"&&ZPe[t]||qPe(t)||Array.isArray(t)&&t.every(YPe))}const jP=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ZPe={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jP([0,.65,.55,1]),circOut:jP([.55,0,1,.45]),backIn:jP([.31,.01,.66,-.59]),backOut:jP([.33,1.53,.69,.99])};function QPe(t){if(t)return qPe(t)?jP(t):Array.isArray(t)?t.map(QPe):ZPe[t]}function IYe(t,e,n,{delay:r=0,duration:i,repeat:o=0,repeatType:u="loop",ease:d,times:m}={}){const v={[e]:n};m&&(v.offset=m);const x=QPe(d);return Array.isArray(x)&&(v.easing=x),t.animate(v,{delay:r,duration:i,easing:Array.isArray(x)?"linear":x,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"})}function RYe(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const JPe=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,DYe=1e-7,OYe=12;function LYe(t,e,n,r,i){let o,u,d=0;do u=e+(n-e)/2,o=JPe(u,r,i)-t,o>0?n=u:e=u;while(Math.abs(o)>DYe&&++d<OYe);return u}function TM(t,e,n,r){if(t===e&&n===r)return ss;const i=o=>LYe(o,0,1,t,n);return o=>o===0||o===1?o:JPe(i(o),e,r)}const NYe=TM(.42,0,1,1),FYe=TM(0,0,.58,1),eTe=TM(.42,0,.58,1),BYe=t=>Array.isArray(t)&&typeof t[0]!="number",tTe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,nTe=t=>e=>1-t(1-e),rTe=t=>1-Math.sin(Math.acos(t)),sX=nTe(rTe),UYe=tTe(sX),iTe=TM(.33,1.53,.69,.99),oX=nTe(iTe),zYe=tTe(oX),VYe=t=>(t*=2)<1?.5*oX(t):.5*(2-Math.pow(2,-10*(t-1))),jYe={linear:ss,easeIn:NYe,easeInOut:eTe,easeOut:FYe,circIn:rTe,circInOut:UYe,circOut:sX,backIn:oX,backInOut:zYe,backOut:iTe,anticipate:VYe},q_e=t=>{if(Array.isArray(t)){iX(t.length===4);const[e,n,r,i]=t;return TM(e,n,r,i)}else if(typeof t=="string")return jYe[t];return t},aX=(t,e)=>n=>!!(EM(n)&&Vqe.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),sTe=(t,e,n)=>r=>{if(!EM(r))return r;const[i,o,u,d]=r.match(QF);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(u),alpha:d!==void 0?parseFloat(d):1}},HYe=t=>Qm(0,255,t),i9={...Q0,transform:t=>Math.round(HYe(t))},y0={test:aX("rgb","red"),parse:sTe("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+i9.transform(t)+", "+i9.transform(e)+", "+i9.transform(n)+", "+iT(rT.transform(r))+")"};function GYe(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const JW={test:aX("#"),parse:GYe,transform:y0.transform},Aw={test:aX("hsl","hue"),parse:sTe("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Md.transform(iT(e))+", "+Md.transform(iT(n))+", "+iT(rT.transform(r))+")"},ba={test:t=>y0.test(t)||JW.test(t)||Aw.test(t),parse:t=>y0.test(t)?y0.parse(t):Aw.test(t)?Aw.parse(t):JW.parse(t),transform:t=>EM(t)?t:t.hasOwnProperty("red")?y0.transform(t):Aw.transform(t)},Li=(t,e,n)=>-n*t+n*e+t;function s9(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function WYe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,u=0;if(!e)i=o=u=n;else{const d=n<.5?n*(1+e):n+e-n*e,m=2*n-d;i=s9(m,d,t+1/3),o=s9(m,d,t),u=s9(m,d,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:r}}const o9=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},$Ye=[JW,y0,Aw],KYe=t=>$Ye.find(e=>e.test(t));function Y_e(t){const e=KYe(t);let n=e.parse(t);return e===Aw&&(n=WYe(n)),n}const oTe=(t,e)=>{const n=Y_e(t),r=Y_e(e),i={...n};return o=>(i.red=o9(n.red,r.red,o),i.green=o9(n.green,r.green,o),i.blue=o9(n.blue,r.blue,o),i.alpha=Li(n.alpha,r.alpha,o),y0.transform(i))};function XYe(t){var e,n;return isNaN(t)&&EM(t)&&(((e=t.match(QF))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(DPe))===null||n===void 0?void 0:n.length)||0)>0}const aTe={regex:Uqe,countKey:"Vars",token:"${v}",parse:ss},lTe={regex:DPe,countKey:"Colors",token:"${c}",parse:ba.parse},uTe={regex:QF,countKey:"Numbers",token:"${n}",parse:Q0.parse};function a9(t,{regex:e,countKey:n,token:r,parse:i}){const o=t.tokenised.match(e);o&&(t["num"+n]=o.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...o.map(i)))}function JN(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&a9(n,aTe),a9(n,lTe),a9(n,uTe),n}function cTe(t){return JN(t).values}function dTe(t){const{values:e,numColors:n,numVars:r,tokenised:i}=JN(t),o=e.length;return u=>{let d=i;for(let m=0;m<o;m++)m<r?d=d.replace(aTe.token,u[m]):m<r+n?d=d.replace(lTe.token,ba.transform(u[m])):d=d.replace(uTe.token,iT(u[m]));return d}}const qYe=t=>typeof t=="number"?0:t;function YYe(t){const e=cTe(t);return dTe(t)(e.map(qYe))}const Jm={test:XYe,parse:cTe,createTransformer:dTe,getAnimatableNone:YYe},hTe=(t,e)=>n=>`${n>0?e:t}`;function pTe(t,e){return typeof t=="number"?n=>Li(t,e,n):ba.test(t)?oTe(t,e):t.startsWith("var(")?hTe(t,e):mTe(t,e)}const fTe=(t,e)=>{const n=[...t],r=n.length,i=t.map((o,u)=>pTe(o,e[u]));return o=>{for(let u=0;u<r;u++)n[u]=i[u](o);return n}},ZYe=(t,e)=>{const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=pTe(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}},mTe=(t,e)=>{const n=Jm.createTransformer(e),r=JN(t),i=JN(e);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Wm(fTe(r.values,i.values),n):hTe(t,e)},ZT=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Z_e=(t,e)=>n=>Li(t,e,n);function QYe(t){return typeof t=="number"?Z_e:typeof t=="string"?ba.test(t)?oTe:mTe:Array.isArray(t)?fTe:typeof t=="object"?ZYe:Z_e}function JYe(t,e,n){const r=[],i=n||QYe(t[0]),o=t.length-1;for(let u=0;u<o;u++){let d=i(t[u],t[u+1]);if(e){const m=Array.isArray(e)?e[u]||ss:e;d=Wm(m,d)}r.push(d)}return r}function lX(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(iX(o===e.length),o===1)return()=>e[0];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=JYe(e,r,i),d=u.length,m=v=>{let x=0;if(d>1)for(;x<t.length-2&&!(v<t[x+1]);x++);const E=ZT(t[x],t[x+1],v);return u[x](E)};return n?v=>m(Qm(t[0],t[o-1],v)):m}function eZe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ZT(0,e,r);t.push(Li(n,1,i))}}function tZe(t){const e=[0];return eZe(e,t.length-1),e}function nZe(t,e){return t.map(n=>n*e)}function rZe(t,e){return t.map(()=>e||eTe).splice(0,t.length-1)}function eF({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=BYe(r)?r.map(q_e):q_e(r),o={done:!1,value:e[0]},u=nZe(n&&n.length===e.length?n:tZe(e),t),d=lX(u,e,{ease:Array.isArray(i)?i:rZe(e,i)});return{calculatedDuration:t,next:m=>(o.value=d(m),o.done=m>=t,o)}}function gTe(t,e){return e?t*(1e3/e):0}const iZe=5;function vTe(t,e,n){const r=Math.max(e-iZe,0);return gTe(n-t(r),e-r)}const l9=.001,sZe=.01,Q_e=10,oZe=.05,aZe=1;function lZe({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let i,o;kYe(t<=$m(Q_e));let u=1-e;u=Qm(oZe,aZe,u),t=Qm(sZe,Q_e,lp(t)),u<1?(i=v=>{const x=v*u,E=x*t,M=x-n,R=e$(v,u),j=Math.exp(-E);return l9-M/R*j},o=v=>{const E=v*u*t,M=E*n+n,R=Math.pow(u,2)*Math.pow(v,2)*t,j=Math.exp(-E),F=e$(Math.pow(v,2),u);return(-i(v)+l9>0?-1:1)*((M-R)*j)/F}):(i=v=>{const x=Math.exp(-v*t),E=(v-n)*t+1;return-l9+x*E},o=v=>{const x=Math.exp(-v*t),E=(n-v)*(t*t);return x*E});const d=5/t,m=cZe(i,o,d);if(t=$m(t),isNaN(m))return{stiffness:100,damping:10,duration:t};{const v=Math.pow(m,2)*r;return{stiffness:v,damping:u*2*Math.sqrt(r*v),duration:t}}}const uZe=12;function cZe(t,e,n){let r=n;for(let i=1;i<uZe;i++)r=r-t(r)/e(r);return r}function e$(t,e){return t*Math.sqrt(1-e*e)}const dZe=["duration","bounce"],hZe=["stiffness","damping","mass"];function J_e(t,e){return e.some(n=>t[n]!==void 0)}function pZe(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!J_e(t,hZe)&&J_e(t,dZe)){const n=lZe(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function yTe({keyframes:t,restDelta:e,restSpeed:n,...r}){const i=t[0],o=t[t.length-1],u={done:!1,value:i},{stiffness:d,damping:m,mass:v,velocity:x,duration:E,isResolvedFromDuration:M}=pZe(r),R=x?-lp(x):0,j=m/(2*Math.sqrt(d*v)),F=o-i,B=lp(Math.sqrt(d/v)),z=Math.abs(F)<5;n||(n=z?.01:2),e||(e=z?.005:.5);let P;if(j<1){const W=e$(B,j);P=Z=>{const ge=Math.exp(-j*B*Z);return o-ge*((R+j*B*F)/W*Math.sin(W*Z)+F*Math.cos(W*Z))}}else if(j===1)P=W=>o-Math.exp(-B*W)*(F+(R+B*F)*W);else{const W=B*Math.sqrt(j*j-1);P=Z=>{const ge=Math.exp(-j*B*Z),X=Math.min(W*Z,300);return o-ge*((R+j*B*F)*Math.sinh(X)+W*F*Math.cosh(X))/W}}return{calculatedDuration:M&&E||null,next:W=>{const Z=P(W);if(M)u.done=W>=E;else{let ge=R;W!==0&&(j<1?ge=vTe(P,W,Z):ge=0);const X=Math.abs(ge)<=n,pe=Math.abs(o-Z)<=e;u.done=X&&pe}return u.value=u.done?o:Z,u}}}function ewe({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:u,min:d,max:m,restDelta:v=.5,restSpeed:x}){const E=t[0],M={done:!1,value:E},R=ye=>d!==void 0&&ye<d||m!==void 0&&ye>m,j=ye=>d===void 0?m:m===void 0||Math.abs(d-ye)<Math.abs(m-ye)?d:m;let F=n*e;const B=E+F,z=u===void 0?B:u(B);z!==B&&(F=z-E);const P=ye=>-F*Math.exp(-ye/r),W=ye=>z+P(ye),Z=ye=>{const te=P(ye),ie=W(ye);M.done=Math.abs(te)<=v,M.value=M.done?z:ie};let ge,X;const pe=ye=>{R(M.value)&&(ge=ye,X=yTe({keyframes:[M.value,j(M.value)],velocity:vTe(W,ye,M.value),damping:i,stiffness:o,restDelta:v,restSpeed:x}))};return pe(0),{calculatedDuration:null,next:ye=>{let te=!1;return!X&&ge===void 0&&(te=!0,Z(ye),pe(ye)),ge!==void 0&&ye>ge?X.next(ye-ge):(!te&&Z(ye),M)}}}const fZe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Fi.update(e,!0),stop:()=>Dd(e),now:()=>Xo.isProcessing?Xo.timestamp:performance.now()}},twe=2e4;function nwe(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<twe;)e+=n,r=t.next(e);return e>=twe?1/0:e}const mZe={decay:ewe,inertia:ewe,tween:eF,keyframes:eF,spring:yTe};function tF({autoplay:t=!0,delay:e=0,driver:n=fZe,keyframes:r,type:i="keyframes",repeat:o=0,repeatDelay:u=0,repeatType:d="loop",onPlay:m,onStop:v,onComplete:x,onUpdate:E,...M}){let R=1,j=!1,F,B;const z=()=>{B=new Promise(ut=>{F=ut})};z();let P;const W=mZe[i]||eF;let Z;W!==eF&&typeof r[0]!="number"&&(Z=lX([0,100],r,{clamp:!1}),r=[0,100]);const ge=W({...M,keyframes:r});let X;d==="mirror"&&(X=W({...M,keyframes:[...r].reverse(),velocity:-(M.velocity||0)}));let pe="idle",ye=null,te=null,ie=null;ge.calculatedDuration===null&&o&&(ge.calculatedDuration=nwe(ge));const{calculatedDuration:Pe}=ge;let _t=1/0,Tt=1/0;Pe!==null&&(_t=Pe+u,Tt=_t*(o+1)-u);let de=0;const ot=ut=>{if(te===null)return;R>0&&(te=Math.min(te,ut)),R<0&&(te=Math.min(ut-Tt/R,te)),ye!==null?de=ye:de=Math.round(ut-te)*R;const je=de-e*(R>=0?1:-1),bt=R>=0?je<0:je>Tt;de=Math.max(je,0),pe==="finished"&&ye===null&&(de=Tt);let Fe=de,at=ge;if(o){const Kt=de/_t;let Tn=Math.floor(Kt),nn=Kt%1;!nn&&Kt>=1&&(nn=1),nn===1&&Tn--,Tn=Math.min(Tn,o+1);const He=!!(Tn%2);He&&(d==="reverse"?(nn=1-nn,u&&(nn-=u/_t)):d==="mirror"&&(at=X));let jn=Qm(0,1,nn);de>Tt&&(jn=d==="reverse"&&He?1:0),Fe=jn*_t}const Ot=bt?{done:!1,value:r[0]}:at.next(Fe);Z&&(Ot.value=Z(Ot.value));let{done:Gt}=Ot;!bt&&Pe!==null&&(Gt=R>=0?de>=Tt:de<=0);const tn=ye===null&&(pe==="finished"||pe==="running"&&Gt);return E&&E(Ot.value),tn&&Ge(),Ot},Me=()=>{P&&P.stop(),P=void 0},wt=()=>{pe="idle",Me(),F(),z(),te=ie=null},Ge=()=>{pe="finished",x&&x(),Me(),F()},it=()=>{if(j)return;P||(P=n(ot));const ut=P.now();m&&m(),ye!==null?te=ut-ye:(!te||pe==="finished")&&(te=ut),pe==="finished"&&z(),ie=te,ye=null,pe="running",P.start()};t&&it();const Qe={then(ut,je){return B.then(ut,je)},get time(){return lp(de)},set time(ut){ut=$m(ut),de=ut,ye!==null||!P||R===0?ye=ut:te=P.now()-ut/R},get duration(){const ut=ge.calculatedDuration===null?nwe(ge):ge.calculatedDuration;return lp(ut)},get speed(){return R},set speed(ut){ut===R||!P||(R=ut,Qe.time=lp(de))},get state(){return pe},play:it,pause:()=>{pe="paused",ye=de},stop:()=>{j=!0,pe!=="idle"&&(pe="idle",v&&v(),wt())},cancel:()=>{ie!==null&&ot(ie),wt()},complete:()=>{pe="finished"},sample:ut=>(te=0,ot(ut))};return Qe}function gZe(t){let e;return()=>(e===void 0&&(e=t()),e)}const vZe=gZe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),yZe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),PL=10,bZe=2e4,_Ze=(t,e)=>e.type==="spring"||t==="backgroundColor"||!YPe(e.ease);function wZe(t,e,{onUpdate:n,onComplete:r,...i}){if(!(vZe()&&yZe.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let u=!1,d,m;const v=()=>{m=new Promise(P=>{d=P})};v();let{keyframes:x,duration:E=300,ease:M,times:R}=i;if(_Ze(e,i)){const P=tF({...i,repeat:0,delay:0});let W={done:!1,value:x[0]};const Z=[];let ge=0;for(;!W.done&&ge<bZe;)W=P.sample(ge),Z.push(W.value),ge+=PL;R=void 0,x=Z,E=ge-PL,M="linear"}const j=IYe(t.owner.current,e,x,{...i,duration:E,ease:M,times:R}),F=()=>j.cancel(),B=()=>{Fi.update(F),d(),v()};return j.onfinish=()=>{t.set(RYe(x,i)),r&&r(),B()},{then(P,W){return m.then(P,W)},attachTimeline(P){return j.timeline=P,j.onfinish=null,ss},get time(){return lp(j.currentTime||0)},set time(P){j.currentTime=$m(P)},get speed(){return j.playbackRate},set speed(P){j.playbackRate=P},get duration(){return lp(E)},play:()=>{u||(j.play(),Dd(F))},pause:()=>j.pause(),stop:()=>{if(u=!0,j.playState==="idle")return;const{currentTime:P}=j;if(P){const W=tF({...i,autoplay:!1});t.setWithVelocity(W.sample(P-PL).value,W.sample(P).value,PL)}B()},complete:()=>j.finish(),cancel:B}}function xZe({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const i=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ss,pause:ss,stop:ss,then:o=>(o(),Promise.resolve()),cancel:ss,complete:ss});return e?tF({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const SZe={type:"spring",stiffness:500,damping:25,restSpeed:10},EZe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),CZe={type:"keyframes",duration:.8},PZe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},TZe=(t,{keyframes:e})=>e.length>2?CZe:Z0.has(t)?t.startsWith("scale")?EZe(e[1]):SZe:PZe,t$=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Jm.test(e)||e==="0")&&!e.startsWith("url(")),MZe=new Set(["brightness","contrast","saturate","opacity"]);function kZe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(QF)||[];if(!r)return t;const i=n.replace(r,"");let o=MZe.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const AZe=/([a-z-]*)\(.*?\)/g,n$={...Jm,getAnimatableNone:t=>{const e=t.match(AZe);return e?e.map(kZe).join(" "):t}},IZe={...OPe,color:ba,backgroundColor:ba,outlineColor:ba,fill:ba,stroke:ba,borderColor:ba,borderTopColor:ba,borderRightColor:ba,borderBottomColor:ba,borderLeftColor:ba,filter:n$,WebkitFilter:n$},uX=t=>IZe[t];function bTe(t,e){let n=uX(t);return n!==n$&&(n=Jm),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const _Te=t=>/^0[^.\s]+$/.test(t);function RZe(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||_Te(t)}function DZe(t,e,n,r){const i=t$(e,n);let o;Array.isArray(n)?o=[...n]:o=[null,n];const u=r.from!==void 0?r.from:t.get();let d;const m=[];for(let v=0;v<o.length;v++)o[v]===null&&(o[v]=v===0?u:o[v-1]),RZe(o[v])&&m.push(v),typeof o[v]=="string"&&o[v]!=="none"&&o[v]!=="0"&&(d=o[v]);if(i&&m.length&&d)for(let v=0;v<m.length;v++){const x=m[v];o[x]=bTe(e,d)}return o}function OZe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:u,repeatDelay:d,from:m,elapsed:v,...x}){return!!Object.keys(x).length}function wTe(t,e){return t[e]||t.default||t}const cX=(t,e,n,r={})=>i=>{const o=wTe(r,t)||{},u=o.delay||r.delay||0;let{elapsed:d=0}=r;d=d-$m(u);const m=DZe(e,t,n,o),v=m[0],x=m[m.length-1],E=t$(t,v),M=t$(t,x);let R={keyframes:m,velocity:e.getVelocity(),ease:"easeOut",...o,delay:-d,onUpdate:j=>{e.set(j),o.onUpdate&&o.onUpdate(j)},onComplete:()=>{i(),o.onComplete&&o.onComplete()}};if(OZe(o)||(R={...R,...TZe(t,R)}),R.duration&&(R.duration=$m(R.duration)),R.repeatDelay&&(R.repeatDelay=$m(R.repeatDelay)),!E||!M||AYe.current||o.type===!1)return xZe(R);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const j=wZe(e,t,R);if(j)return j}return tF(R)};function nF(t){return!!(Ma(t)&&t.add)}const xTe=t=>/^\-?\d*\.?\d+$/.test(t);function dX(t,e){t.indexOf(e)===-1&&t.push(e)}function hX(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function LZe([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[o]=t.splice(e,1);t.splice(i,0,o)}return t}class pX{constructor(){this.subscriptions=[]}add(e){return dX(this.subscriptions,e),()=>hX(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const u=this.subscriptions[o];u&&u(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const NZe=t=>!isNaN(parseFloat(t)),sT={current:void 0};class FZe{constructor(e,n={}){this.version="10.16.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,i=!0)=>{this.prev=this.current,this.current=r;const{delta:o,timestamp:u}=Xo;this.lastUpdated!==u&&(this.timeDelta=o,this.lastUpdated=u,Fi.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Fi.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=NZe(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new pX);const r=this.events[e].add(n);return e==="change"?()=>{r(),Fi.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return sT.current&&sT.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?gTe(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function V0(t,e){return new FZe(t,e)}const STe=t=>e=>e.test(t),BZe={test:t=>t==="auto",parse:t=>t},ETe=[Q0,Yn,Md,_m,Hqe,jqe,BZe],DP=t=>ETe.find(STe(t)),UZe=[...ETe,ba,Jm],zZe=t=>UZe.find(STe(t));function VZe(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,V0(n))}function jZe(t,e){const n=eB(t,e);let{transitionEnd:r={},transition:i={},...o}=n?t.makeTargetAnimatable(n,!1):{};o={...o,...r};for(const u in o){const d=rYe(o[u]);VZe(t,u,d)}}function HZe(t,e,n){var r,i;const o=Object.keys(e).filter(d=>!t.hasValue(d)),u=o.length;if(u)for(let d=0;d<u;d++){const m=o[d],v=e[m];let x=null;Array.isArray(v)&&(x=v[0]),x===null&&(x=(i=(r=n[m])!==null&&r!==void 0?r:t.readValue(m))!==null&&i!==void 0?i:e[m]),x!=null&&(typeof x=="string"&&(xTe(x)||_Te(x))?x=parseFloat(x):!zZe(x)&&Jm.test(v)&&(x=bTe(m,v)),t.addValue(m,V0(x,{owner:t})),n[m]===void 0&&(n[m]=x),x!==null&&t.setBaseTarget(m,x))}}function GZe(t,e){return e?(e[t]||e.default||e).from:void 0}function WZe(t,e,n){const r={};for(const i in t){const o=GZe(i,e);if(o!==void 0)r[i]=o;else{const u=n.getValue(i);u&&(r[i]=u.get())}}return r}function $Ze({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function CTe(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:u,...d}=t.makeTargetAnimatable(e);const m=t.getValue("willChange");r&&(o=r);const v=[],x=i&&t.animationState&&t.animationState.getState()[i];for(const E in d){const M=t.getValue(E),R=d[E];if(!M||R===void 0||x&&$Ze(x,E))continue;const j={delay:n,elapsed:0,...o};if(window.HandoffAppearAnimations&&!M.hasAnimated){const B=t.getProps()[MYe];B&&(j.elapsed=window.HandoffAppearAnimations(B,E,M,Fi))}M.start(cX(E,M,R,t.shouldReduceMotion&&Z0.has(E)?{type:!1}:j));const F=M.animation;nF(m)&&(m.add(E),F.then(()=>m.remove(E))),v.push(F)}return u&&Promise.all(v).then(()=>{u&&jZe(t,u)}),v}function r$(t,e,n={}){const r=eB(t,e,n.custom);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(CTe(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:v=0,staggerChildren:x,staggerDirection:E}=i;return KZe(t,e,v+m,x,E,n)}:()=>Promise.resolve(),{when:d}=i;if(d){const[m,v]=d==="beforeChildren"?[o,u]:[u,o];return m().then(()=>v())}else return Promise.all([o(),u(n.delay)])}function KZe(t,e,n=0,r=0,i=1,o){const u=[],d=(t.variantChildren.size-1)*r,m=i===1?(v=0)=>v*r:(v=0)=>d-v*r;return Array.from(t.variantChildren).sort(XZe).forEach((v,x)=>{v.notify("AnimationStart",e),u.push(r$(v,e,{...o,delay:n+m(x)}).then(()=>v.notify("AnimationComplete",e)))}),Promise.all(u)}function XZe(t,e){return t.sortNodePosition(e)}function qZe(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>r$(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=r$(t,e,n);else{const i=typeof e=="function"?eB(t,e,n.custom):e;r=Promise.all(CTe(t,i,n))}return r.then(()=>t.notify("AnimationComplete",e))}const YZe=[...XK].reverse(),ZZe=XK.length;function QZe(t){return e=>Promise.all(e.map(({animation:n,options:r})=>qZe(t,n,r)))}function JZe(t){let e=QZe(t);const n=tQe();let r=!0;const i=(m,v)=>{const x=eB(t,v);if(x){const{transition:E,transitionEnd:M,...R}=x;m={...m,...R,...M}}return m};function o(m){e=m(t)}function u(m,v){const x=t.getProps(),E=t.getVariantContext(!0)||{},M=[],R=new Set;let j={},F=1/0;for(let z=0;z<ZZe;z++){const P=YZe[z],W=n[P],Z=x[P]!==void 0?x[P]:E[P],ge=qT(Z),X=P===v?W.isActive:null;X===!1&&(F=z);let pe=Z===E[P]&&Z!==x[P]&&ge;if(pe&&r&&t.manuallyAnimateOnMount&&(pe=!1),W.protectedKeys={...j},!W.isActive&&X===null||!Z&&!W.prevProp||YF(Z)||typeof Z=="boolean")continue;const ye=eQe(W.prevProp,Z);let te=ye||P===v&&W.isActive&&!pe&&ge||z>F&&ge;const ie=Array.isArray(Z)?Z:[Z];let Pe=ie.reduce(i,{});X===!1&&(Pe={});const{prevResolvedValues:_t={}}=W,Tt={..._t,...Pe},de=ot=>{te=!0,R.delete(ot),W.needsAnimating[ot]=!0};for(const ot in Tt){const Me=Pe[ot],wt=_t[ot];j.hasOwnProperty(ot)||(Me!==wt?QN(Me)&&QN(wt)?!XPe(Me,wt)||ye?de(ot):W.protectedKeys[ot]=!0:Me!==void 0?de(ot):R.add(ot):Me!==void 0&&R.has(ot)?de(ot):W.protectedKeys[ot]=!0)}W.prevProp=Z,W.prevResolvedValues=Pe,W.isActive&&(j={...j,...Pe}),r&&t.blockInitialAnimation&&(te=!1),te&&!pe&&M.push(...ie.map(ot=>({animation:ot,options:{type:P,...m}})))}if(R.size){const z={};R.forEach(P=>{const W=t.getBaseTarget(P);W!==void 0&&(z[P]=W)}),M.push({animation:z})}let B=!!M.length;return r&&x.initial===!1&&!t.manuallyAnimateOnMount&&(B=!1),r=!1,B?e(M):Promise.resolve()}function d(m,v,x){var E;if(n[m].isActive===v)return Promise.resolve();(E=t.variantChildren)===null||E===void 0||E.forEach(R=>{var j;return(j=R.animationState)===null||j===void 0?void 0:j.setActive(m,v)}),n[m].isActive=v;const M=u(x,m);for(const R in n)n[R].protectedKeys={};return M}return{animateChanges:u,setActive:d,setAnimateFunction:o,getState:()=>n}}function eQe(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!XPe(e,t):!1}function s0(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tQe(){return{animate:s0(!0),whileInView:s0(),whileHover:s0(),whileTap:s0(),whileDrag:s0(),whileFocus:s0(),exit:s0()}}class nQe extends og{constructor(e){super(e),e.animationState||(e.animationState=JZe(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),YF(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let rQe=0;class iQe extends og{constructor(){super(...arguments),this.id=rQe++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const o=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&o.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const sQe={animation:{Feature:nQe},exit:{Feature:iQe}},rwe=(t,e)=>Math.abs(t-e);function oQe(t,e){const n=rwe(t.x,e.x),r=rwe(t.y,e.y);return Math.sqrt(n**2+r**2)}class PTe{constructor(e,n,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=c9(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,E=oQe(v.offset,{x:0,y:0})>=3;if(!x&&!E)return;const{point:M}=v,{timestamp:R}=Xo;this.history.push({...M,timestamp:R});const{onStart:j,onMove:F}=this.handlers;x||(j&&j(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),F&&F(this.lastMoveEvent,v)},this.handlePointerMove=(v,x)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=u9(x,this.transformPagePoint),Fi.update(this.updatePoint,!0)},this.handlePointerUp=(v,x)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:E,onSessionEnd:M}=this.handlers,R=c9(v.type==="pointercancel"?this.lastMoveEventInfo:u9(x,this.transformPagePoint),this.history);this.startEvent&&E&&E(v,R),M&&M(v,R)},!HPe(e))return;this.handlers=n,this.transformPagePoint=r;const i=JF(e),o=u9(i,this.transformPagePoint),{point:u}=o,{timestamp:d}=Xo;this.history=[{...u,timestamp:d}];const{onSessionStart:m}=n;m&&m(e,c9(o,this.history)),this.removeListeners=Wm(ap(window,"pointermove",this.handlePointerMove),ap(window,"pointerup",this.handlePointerUp),ap(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Dd(this.updatePoint)}}function u9(t,e){return e?{point:e(t.point)}:t}function iwe(t,e){return{x:t.x-e.x,y:t.y-e.y}}function c9({point:t},e){return{point:t,delta:iwe(t,TTe(e)),offset:iwe(t,aQe(e)),velocity:lQe(e,.1)}}function aQe(t){return t[0]}function TTe(t){return t[t.length-1]}function lQe(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=TTe(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>$m(e)));)n--;if(!r)return{x:0,y:0};const o=lp(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const u={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function El(t){return t.max-t.min}function i$(t,e=0,n=.01){return Math.abs(t-e)<=n}function swe(t,e,n,r=.5){t.origin=r,t.originPoint=Li(e.min,e.max,t.origin),t.scale=El(n)/El(e),(i$(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Li(n.min,n.max,t.origin)-t.originPoint,(i$(t.translate)||isNaN(t.translate))&&(t.translate=0)}function oT(t,e,n,r){swe(t.x,e.x,n.x,r?r.originX:void 0),swe(t.y,e.y,n.y,r?r.originY:void 0)}function owe(t,e,n){t.min=n.min+e.min,t.max=t.min+El(e)}function uQe(t,e,n){owe(t.x,e.x,n.x),owe(t.y,e.y,n.y)}function awe(t,e,n){t.min=e.min-n.min,t.max=t.min+El(e)}function aT(t,e,n){awe(t.x,e.x,n.x),awe(t.y,e.y,n.y)}function cQe(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Li(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Li(n,t,r.max):Math.min(t,n)),t}function lwe(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function dQe(t,{top:e,left:n,bottom:r,right:i}){return{x:lwe(t.x,n,i),y:lwe(t.y,e,r)}}function uwe(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function hQe(t,e){return{x:uwe(t.x,e.x),y:uwe(t.y,e.y)}}function pQe(t,e){let n=.5;const r=El(t),i=El(e);return i>r?n=ZT(e.min,e.max-r,t.min):r>i&&(n=ZT(t.min,t.max-i,e.min)),Qm(0,1,n)}function fQe(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const s$=.35;function mQe(t=s$){return t===!1?t=0:t===!0&&(t=s$),{x:cwe(t,"left","right"),y:cwe(t,"top","bottom")}}function cwe(t,e,n){return{min:dwe(t,e),max:dwe(t,n)}}function dwe(t,e){return typeof t=="number"?t:t[e]||0}const hwe=()=>({translate:0,scale:1,origin:0,originPoint:0}),Iw=()=>({x:hwe(),y:hwe()}),pwe=()=>({min:0,max:0}),ks=()=>({x:pwe(),y:pwe()});function _d(t){return[t("x"),t("y")]}function MTe({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function gQe({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function vQe(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function d9(t){return t===void 0||t===1}function o$({scale:t,scaleX:e,scaleY:n}){return!d9(t)||!d9(e)||!d9(n)}function c0(t){return o$(t)||kTe(t)||t.z||t.rotate||t.rotateX||t.rotateY}function kTe(t){return fwe(t.x)||fwe(t.y)}function fwe(t){return t&&t!=="0%"}function rF(t,e,n){const r=t-n,i=e*r;return n+i}function mwe(t,e,n,r,i){return i!==void 0&&(t=rF(t,i,r)),rF(t,n,r)+e}function a$(t,e=0,n=1,r,i){t.min=mwe(t.min,e,n,r,i),t.max=mwe(t.max,e,n,r,i)}function ATe(t,{x:e,y:n}){a$(t.x,e.translate,e.scale,e.originPoint),a$(t.y,n.translate,n.scale,n.originPoint)}function yQe(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,u;for(let d=0;d<i;d++){o=n[d],u=o.projectionDelta;const m=o.instance;m&&m.style&&m.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Rw(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,ATe(t,u)),r&&c0(o.latestValues)&&Rw(t,o.latestValues))}e.x=gwe(e.x),e.y=gwe(e.y)}function gwe(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Em(t,e){t.min=t.min+e,t.max=t.max+e}function vwe(t,e,[n,r,i]){const o=e[i]!==void 0?e[i]:.5,u=Li(t.min,t.max,o);a$(t,e[n],e[r],u,e.scale)}const bQe=["x","scaleX","originX"],_Qe=["y","scaleY","originY"];function Rw(t,e){vwe(t.x,e,bQe),vwe(t.y,e,_Qe)}function ITe(t,e){return MTe(vQe(t.getBoundingClientRect(),e))}function wQe(t,e,n){const r=ITe(t,n),{scroll:i}=e;return i&&(Em(r.x,i.offset.x),Em(r.y,i.offset.y)),r}const xQe=new WeakMap;class SQe{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ks(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=m=>{this.stopAnimation(),n&&this.snapToCursor(JF(m,"page").point)},o=(m,v)=>{const{drag:x,dragPropagation:E,onDragStart:M}=this.getProps();if(x&&!E&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=WPe(x),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_d(j=>{let F=this.getAxisMotionValue(j).get()||0;if(Md.test(F)){const{projection:B}=this.visualElement;if(B&&B.layout){const z=B.layout.layoutBox[j];z&&(F=El(z)*(parseFloat(F)/100))}}this.originPoint[j]=F}),M&&Fi.update(()=>M(m,v),!1,!0);const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},u=(m,v)=>{const{dragPropagation:x,dragDirectionLock:E,onDirectionLock:M,onDrag:R}=this.getProps();if(!x&&!this.openGlobalLock)return;const{offset:j}=v;if(E&&this.currentDirection===null){this.currentDirection=EQe(j),this.currentDirection!==null&&M&&M(this.currentDirection);return}this.updateAxis("x",v.point,j),this.updateAxis("y",v.point,j),this.visualElement.render(),R&&R(m,v)},d=(m,v)=>this.stop(m,v);this.panSession=new PTe(e,{onSessionStart:i,onStart:o,onMove:u,onSessionEnd:d},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&Fi.update(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!TL(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=cQe(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:r}=this.visualElement.projection||{},i=this.constraints;e&&kw(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=dQe(r.layoutBox,e):this.constraints=!1,this.elastic=mQe(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&_d(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=fQe(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!kw(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=wQe(r,i.root,this.visualElement.getTransformPagePoint());let u=hQe(i.layout.layoutBox,o);if(n){const d=n(gQe(u));this.hasMutatedConstraints=!!d,d&&(u=MTe(d))}return u}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:d}=this.getProps(),m=this.constraints||{},v=_d(x=>{if(!TL(x,n,this.currentDirection))return;let E=m&&m[x]||{};u&&(E={min:0,max:0});const M=i?200:1e6,R=i?40:1e7,j={type:"inertia",velocity:r?e[x]:0,bounceStiffness:M,bounceDamping:R,timeConstant:750,restDelta:1,restSpeed:10,...o,...E};return this.startAxisValueAnimation(x,j)});return Promise.all(v).then(d)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(cX(e,r,0,n))}stopAnimation(){_d(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){_d(n=>{const{drag:r}=this.getProps();if(!TL(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:u,max:d}=i.layout.layoutBox[n];o.set(e[n]-Li(u,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!kw(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};_d(u=>{const d=this.getAxisMotionValue(u);if(d){const m=d.get();i[u]=pQe({min:m,max:m},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),_d(u=>{if(!TL(u,e,null))return;const d=this.getAxisMotionValue(u),{min:m,max:v}=this.constraints[u];d.set(Li(m,v,i[u]))})}addListeners(){if(!this.visualElement.current)return;xQe.set(this.visualElement,this);const e=this.visualElement.current,n=ap(e,"pointerdown",m=>{const{drag:v,dragListener:x=!0}=this.getProps();v&&x&&this.start(m)}),r=()=>{const{dragConstraints:m}=this.getProps();kw(m)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),r();const u=np(window,"resize",()=>this.scalePositionWithinConstraints()),d=i.addEventListener("didUpdate",({delta:m,hasLayoutChanged:v})=>{this.isDragging&&v&&(_d(x=>{const E=this.getAxisMotionValue(x);E&&(this.originPoint[x]+=m[x].translate,E.set(E.get()+m[x].translate))}),this.visualElement.render())});return()=>{u(),n(),o(),d&&d()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:u=s$,dragMomentum:d=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:u,dragMomentum:d}}}function TL(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function EQe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class CQe extends og{constructor(e){super(e),this.removeGroupControls=ss,this.removeListeners=ss,this.controls=new SQe(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ss}unmount(){this.removeGroupControls(),this.removeListeners()}}const ywe=t=>(e,n)=>{t&&Fi.update(()=>t(e,n))};class PQe extends og{constructor(){super(...arguments),this.removePointerDownListener=ss}onPointerDown(e){this.session=new PTe(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ywe(e),onStart:ywe(n),onMove:r,onEnd:(o,u)=>{delete this.session,i&&Fi.update(()=>i(o,u))}}}mount(){this.removePointerDownListener=ap(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function TQe(){const t=Mt.useContext(KK);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,i=Mt.useId();return Mt.useEffect(()=>r(i),[]),!e&&n?[!1,()=>n&&n(i)]:[!0]}const QL={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function bwe(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const OP={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Yn.test(t))t=parseFloat(t);else return t;const n=bwe(t,e.target.x),r=bwe(t,e.target.y);return`${n}% ${r}%`}},MQe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Jm.parse(t);if(i.length>5)return r;const o=Jm.createTransformer(t),u=typeof i[0]!="number"?1:0,d=n.x.scale*e.x,m=n.y.scale*e.y;i[0+u]/=d,i[1+u]/=m;const v=Li(d,m,.5);return typeof i[2+u]=="number"&&(i[2+u]/=v),typeof i[3+u]=="number"&&(i[3+u]/=v),o(i)}};class kQe extends m1e.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;Lqe(AQe),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),QL.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,u=r.projection;return u&&(u.isPresent=o,i||e.layoutDependency!==n||n===void 0?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||Fi.postRender(()=>{const d=u.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function RTe(t){const[e,n]=TQe(),r=Mt.useContext(MPe);return m1e.createElement(kQe,{...t,layoutGroup:r,switchLayoutGroup:Mt.useContext(kPe),isPresent:e,safeToRemove:n})}const AQe={borderRadius:{...OP,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:OP,borderTopRightRadius:OP,borderBottomLeftRadius:OP,borderBottomRightRadius:OP,boxShadow:MQe},DTe=["TopLeft","TopRight","BottomLeft","BottomRight"],IQe=DTe.length,_we=t=>typeof t=="string"?parseFloat(t):t,wwe=t=>typeof t=="number"||Yn.test(t);function RQe(t,e,n,r,i,o){i?(t.opacity=Li(0,n.opacity!==void 0?n.opacity:1,DQe(r)),t.opacityExit=Li(e.opacity!==void 0?e.opacity:1,0,OQe(r))):o&&(t.opacity=Li(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let u=0;u<IQe;u++){const d=`border${DTe[u]}Radius`;let m=xwe(e,d),v=xwe(n,d);if(m===void 0&&v===void 0)continue;m||(m=0),v||(v=0),m===0||v===0||wwe(m)===wwe(v)?(t[d]=Math.max(Li(_we(m),_we(v),r),0),(Md.test(v)||Md.test(m))&&(t[d]+="%")):t[d]=v}(e.rotate||n.rotate)&&(t.rotate=Li(e.rotate||0,n.rotate||0,r))}function xwe(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const DQe=OTe(0,.5,sX),OQe=OTe(.5,.95,ss);function OTe(t,e,n){return r=>r<t?0:r>e?1:n(ZT(t,e,r))}function Swe(t,e){t.min=e.min,t.max=e.max}function uu(t,e){Swe(t.x,e.x),Swe(t.y,e.y)}function Ewe(t,e,n,r,i){return t-=e,t=rF(t,1/n,r),i!==void 0&&(t=rF(t,1/i,r)),t}function LQe(t,e=0,n=1,r=.5,i,o=t,u=t){if(Md.test(e)&&(e=parseFloat(e),e=Li(u.min,u.max,e/100)-u.min),typeof e!="number")return;let d=Li(o.min,o.max,r);t===o&&(d-=e),t.min=Ewe(t.min,e,n,d,i),t.max=Ewe(t.max,e,n,d,i)}function Cwe(t,e,[n,r,i],o,u){LQe(t,e[n],e[r],e[i],e.scale,o,u)}const NQe=["x","scaleX","originX"],FQe=["y","scaleY","originY"];function Pwe(t,e,n,r){Cwe(t.x,e,NQe,n?n.x:void 0,r?r.x:void 0),Cwe(t.y,e,FQe,n?n.y:void 0,r?r.y:void 0)}function Twe(t){return t.translate===0&&t.scale===1}function LTe(t){return Twe(t.x)&&Twe(t.y)}function BQe(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function NTe(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Mwe(t){return El(t.x)/El(t.y)}class UQe{constructor(){this.members=[]}add(e){dX(this.members,e),e.scheduleRender()}remove(e){if(hX(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function kwe(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y;if((i||o)&&(r=`translate3d(${i}px, ${o}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:m,rotateX:v,rotateY:x}=n;m&&(r+=`rotate(${m}deg) `),v&&(r+=`rotateX(${v}deg) `),x&&(r+=`rotateY(${x}deg) `)}const u=t.x.scale*e.x,d=t.y.scale*e.y;return(u!==1||d!==1)&&(r+=`scale(${u}, ${d})`),r||"none"}const zQe=(t,e)=>t.depth-e.depth;class VQe{constructor(){this.children=[],this.isDirty=!1}add(e){dX(this.children,e),this.isDirty=!0}remove(e){hX(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(zQe),this.isDirty=!1,this.children.forEach(e)}}function jQe(t,e){const n=performance.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Dd(r),t(o-e))};return Fi.read(r,!0),()=>Dd(r)}function HQe(t){window.MotionDebug&&window.MotionDebug.record(t)}function GQe(t){return t instanceof SVGElement&&t.tagName!=="svg"}function WQe(t,e,n){const r=Ma(t)?t:V0(t);return r.start(cX("",r,e,n)),r.animation}const Awe=["","X","Y","Z"],Iwe=1e3;let $Qe=0;const d0={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function FTe({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(u={},d=e==null?void 0:e()){this.id=$Qe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{d0.totalNodes=d0.resolvedTargetDeltas=d0.recalculatedProjection=0,this.nodes.forEach(qQe),this.nodes.forEach(eJe),this.nodes.forEach(tJe),this.nodes.forEach(YQe),HQe(d0)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new VQe)}addEventListener(u,d){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new pX),this.eventHandlers.get(u).add(d)}notifyListeners(u,...d){const m=this.eventHandlers.get(u);m&&m.notify(...d)}hasListeners(u){return this.eventHandlers.has(u)}mount(u,d=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=GQe(u),this.instance=u;const{layoutId:m,layout:v,visualElement:x}=this.options;if(x&&!x.current&&x.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),d&&(v||m)&&(this.isLayoutDirty=!0),t){let E;const M=()=>this.root.updateBlockedByResize=!1;t(u,()=>{this.root.updateBlockedByResize=!0,E&&E(),E=jQe(M,250),QL.hasAnimatedSinceResize&&(QL.hasAnimatedSinceResize=!1,this.nodes.forEach(Dwe))})}m&&this.root.registerSharedNode(m,this),this.options.animate!==!1&&x&&(m||v)&&this.addEventListener("didUpdate",({delta:E,hasLayoutChanged:M,hasRelativeTargetChanged:R,layout:j})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const F=this.options.transition||x.getDefaultTransition()||oJe,{onLayoutAnimationStart:B,onLayoutAnimationComplete:z}=x.getProps(),P=!this.targetLayout||!NTe(this.targetLayout,j)||R,W=!M&&R;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||W||M&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(E,W);const Z={...wTe(F,"layout"),onPlay:B,onComplete:z};(x.shouldReduceMotion||this.options.layoutRoot)&&(Z.delay=0,Z.type=!1),this.startAnimation(Z)}else M||Dwe(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=j})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Dd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(nJe),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let x=0;x<this.path.length;x++){const E=this.path[x];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:d,layout:m}=this.options;if(d===void 0&&!m)return;const v=this.getTransformTemplate();this.prevTransformTemplateValue=v?v(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Rwe);return}this.isUpdating||this.nodes.forEach(QQe),this.isUpdating=!1,this.nodes.forEach(JQe),this.nodes.forEach(KQe),this.nodes.forEach(XQe),this.clearAllSnapshots();const d=performance.now();Xo.delta=Qm(0,1e3/60,d-Xo.timestamp),Xo.timestamp=d,Xo.isProcessing=!0,t9.update.process(Xo),t9.preRender.process(Xo),t9.render.process(Xo),Xo.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(ZQe),this.sharedNodes.forEach(rJe)}scheduleUpdateProjection(){Fi.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){Fi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ks(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let d=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(d=!1),d&&(this.scroll={animationId:this.root.animationId,phase:u,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!i)return;const u=this.isLayoutDirty||this.shouldResetTransform,d=this.projectionDelta&&!LTe(this.projectionDelta),m=this.getTransformTemplate(),v=m?m(this.latestValues,""):void 0,x=v!==this.prevTransformTemplateValue;u&&(d||c0(this.latestValues)||x)&&(i(this.instance,v),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const d=this.measurePageBox();let m=this.removeElementScroll(d);return u&&(m=this.removeTransform(m)),aJe(m),{animationId:this.root.animationId,measuredBox:d,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return ks();const d=u.measureViewportBox(),{scroll:m}=this.root;return m&&(Em(d.x,m.offset.x),Em(d.y,m.offset.y)),d}removeElementScroll(u){const d=ks();uu(d,u);for(let m=0;m<this.path.length;m++){const v=this.path[m],{scroll:x,options:E}=v;if(v!==this.root&&x&&E.layoutScroll){if(x.isRoot){uu(d,u);const{scroll:M}=this.root;M&&(Em(d.x,-M.offset.x),Em(d.y,-M.offset.y))}Em(d.x,x.offset.x),Em(d.y,x.offset.y)}}return d}applyTransform(u,d=!1){const m=ks();uu(m,u);for(let v=0;v<this.path.length;v++){const x=this.path[v];!d&&x.options.layoutScroll&&x.scroll&&x!==x.root&&Rw(m,{x:-x.scroll.offset.x,y:-x.scroll.offset.y}),c0(x.latestValues)&&Rw(m,x.latestValues)}return c0(this.latestValues)&&Rw(m,this.latestValues),m}removeTransform(u){const d=ks();uu(d,u);for(let m=0;m<this.path.length;m++){const v=this.path[m];if(!v.instance||!c0(v.latestValues))continue;o$(v.latestValues)&&v.updateSnapshot();const x=ks(),E=v.measurePageBox();uu(x,E),Pwe(d,v.latestValues,v.snapshot?v.snapshot.layoutBox:void 0,x)}return c0(this.latestValues)&&Pwe(d,this.latestValues),d}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xo.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){var d;const m=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=m.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=m.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=m.isSharedProjectionDirty);const v=!!this.resumingFrom||this!==m;if(!(u||v&&this.isSharedProjectionDirty||this.isProjectionDirty||!((d=this.parent)===null||d===void 0)&&d.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:E,layoutId:M}=this.options;if(!(!this.layout||!(E||M))){if(this.resolvedRelativeTargetAt=Xo.timestamp,!this.targetDelta&&!this.relativeTarget){const R=this.getClosestProjectingParent();R&&R.layout&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ks(),this.relativeTargetOrigin=ks(),aT(this.relativeTargetOrigin,this.layout.layoutBox,R.layout.layoutBox),uu(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ks(),this.targetWithTransforms=ks()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),uQe(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):uu(this.target,this.layout.layoutBox),ATe(this.target,this.targetDelta)):uu(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const R=this.getClosestProjectingParent();R&&!!R.resumingFrom==!!this.resumingFrom&&!R.options.layoutScroll&&R.target&&this.animationProgress!==1?(this.relativeParent=R,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ks(),this.relativeTargetOrigin=ks(),aT(this.relativeTargetOrigin,this.target,R.target),uu(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}d0.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||o$(this.parent.latestValues)||kTe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var u;const d=this.getLead(),m=!!this.resumingFrom||this!==d;let v=!0;if((this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty)&&(v=!1),m&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(v=!1),this.resolvedRelativeTargetAt===Xo.timestamp&&(v=!1),v)return;const{layout:x,layoutId:E}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||E))return;uu(this.layoutCorrected,this.layout.layoutBox);const M=this.treeScale.x,R=this.treeScale.y;yQe(this.layoutCorrected,this.treeScale,this.path,m),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox);const{target:j}=d;if(!j){this.projectionTransform&&(this.projectionDelta=Iw(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Iw(),this.projectionDeltaWithTransform=Iw());const F=this.projectionTransform;oT(this.projectionDelta,this.layoutCorrected,j,this.latestValues),this.projectionTransform=kwe(this.projectionDelta,this.treeScale),(this.projectionTransform!==F||this.treeScale.x!==M||this.treeScale.y!==R)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",j)),d0.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),u){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(u,d=!1){const m=this.snapshot,v=m?m.latestValues:{},x={...this.latestValues},E=Iw();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const M=ks(),R=m?m.source:void 0,j=this.layout?this.layout.source:void 0,F=R!==j,B=this.getStack(),z=!B||B.members.length<=1,P=!!(F&&!z&&this.options.crossfade===!0&&!this.path.some(sJe));this.animationProgress=0;let W;this.mixTargetDelta=Z=>{const ge=Z/1e3;Owe(E.x,u.x,ge),Owe(E.y,u.y,ge),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(aT(M,this.layout.layoutBox,this.relativeParent.layout.layoutBox),iJe(this.relativeTarget,this.relativeTargetOrigin,M,ge),W&&BQe(this.relativeTarget,W)&&(this.isProjectionDirty=!1),W||(W=ks()),uu(W,this.relativeTarget)),F&&(this.animationValues=x,RQe(x,v,this.latestValues,ge,P,z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ge},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Dd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fi.update(()=>{QL.hasAnimatedSinceResize=!0,this.currentAnimation=WQe(0,Iwe,{...u,onUpdate:d=>{this.mixTargetDelta(d),u.onUpdate&&u.onUpdate(d)},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Iwe),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:d,target:m,layout:v,latestValues:x}=u;if(!(!d||!m||!v)){if(this!==u&&this.layout&&v&&BTe(this.options.animationType,this.layout.layoutBox,v.layoutBox)){m=this.target||ks();const E=El(this.layout.layoutBox.x);m.x.min=u.target.x.min,m.x.max=m.x.min+E;const M=El(this.layout.layoutBox.y);m.y.min=u.target.y.min,m.y.max=m.y.min+M}uu(d,m),Rw(d,x),oT(this.projectionDeltaWithTransform,this.layoutCorrected,d,x)}}registerSharedNode(u,d){this.sharedNodes.has(u)||this.sharedNodes.set(u,new UQe),this.sharedNodes.get(u).add(d);const v=d.options.initialPromotionConfig;d.promote({transition:v?v.transition:void 0,preserveFollowOpacity:v&&v.shouldPreserveFollowOpacity?v.shouldPreserveFollowOpacity(d):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){var u;const{layoutId:d}=this.options;return d?((u=this.getStack())===null||u===void 0?void 0:u.lead)||this:this}getPrevLead(){var u;const{layoutId:d}=this.options;return d?(u=this.getStack())===null||u===void 0?void 0:u.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:d,preserveFollowOpacity:m}={}){const v=this.getStack();v&&v.promote(this,m),u&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetRotation(){const{visualElement:u}=this.options;if(!u)return;let d=!1;const{latestValues:m}=u;if((m.rotate||m.rotateX||m.rotateY||m.rotateZ)&&(d=!0),!d)return;const v={};for(let x=0;x<Awe.length;x++){const E="rotate"+Awe[x];m[E]&&(v[E]=m[E],u.setStaticValue(E,0))}u.render();for(const x in v)u.setStaticValue(x,v[x]);u.scheduleRender()}getProjectionStyles(u={}){var d,m;const v={};if(!this.instance||this.isSVG)return v;if(this.isVisible)v.visibility="";else return{visibility:"hidden"};const x=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,v.opacity="",v.pointerEvents=ZL(u.pointerEvents)||"",v.transform=x?x(this.latestValues,""):"none",v;const E=this.getLead();if(!this.projectionDelta||!this.layout||!E.target){const F={};return this.options.layoutId&&(F.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,F.pointerEvents=ZL(u.pointerEvents)||""),this.hasProjected&&!c0(this.latestValues)&&(F.transform=x?x({},""):"none",this.hasProjected=!1),F}const M=E.animationValues||E.latestValues;this.applyTransformsToTarget(),v.transform=kwe(this.projectionDeltaWithTransform,this.treeScale,M),x&&(v.transform=x(M,v.transform));const{x:R,y:j}=this.projectionDelta;v.transformOrigin=`${R.origin*100}% ${j.origin*100}% 0`,E.animationValues?v.opacity=E===this?(m=(d=M.opacity)!==null&&d!==void 0?d:this.latestValues.opacity)!==null&&m!==void 0?m:1:this.preserveOpacity?this.latestValues.opacity:M.opacityExit:v.opacity=E===this?M.opacity!==void 0?M.opacity:"":M.opacityExit!==void 0?M.opacityExit:0;for(const F in YN){if(M[F]===void 0)continue;const{correct:B,applyTo:z}=YN[F],P=v.transform==="none"?M[F]:B(M[F],E);if(z){const W=z.length;for(let Z=0;Z<W;Z++)v[z[Z]]=P}else v[F]=P}return this.options.layoutId&&(v.pointerEvents=E===this?ZL(u.pointerEvents)||"":"none"),v}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>{var d;return(d=u.currentAnimation)===null||d===void 0?void 0:d.stop()}),this.root.nodes.forEach(Rwe),this.root.sharedNodes.clear()}}}function KQe(t){t.updateLayout()}function XQe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,u=n.source!==t.layout.source;o==="size"?_d(E=>{const M=u?n.measuredBox[E]:n.layoutBox[E],R=El(M);M.min=r[E].min,M.max=M.min+R}):BTe(o,n.layoutBox,r)&&_d(E=>{const M=u?n.measuredBox[E]:n.layoutBox[E],R=El(r[E]);M.max=M.min+R,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[E].max=t.relativeTarget[E].min+R)});const d=Iw();oT(d,r,n.layoutBox);const m=Iw();u?oT(m,t.applyTransform(i,!0),n.measuredBox):oT(m,r,n.layoutBox);const v=!LTe(d);let x=!1;if(!t.resumeFrom){const E=t.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:M,layout:R}=E;if(M&&R){const j=ks();aT(j,n.layoutBox,M.layoutBox);const F=ks();aT(F,r,R.layoutBox),NTe(j,F)||(x=!0),E.options.layoutRoot&&(t.relativeTarget=F,t.relativeTargetOrigin=j,t.relativeParent=E)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:m,layoutDelta:d,hasLayoutChanged:v,hasRelativeTargetChanged:x})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function qQe(t){d0.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function YQe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ZQe(t){t.clearSnapshot()}function Rwe(t){t.clearMeasurements()}function QQe(t){t.isLayoutDirty=!1}function JQe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Dwe(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function eJe(t){t.resolveTargetDelta()}function tJe(t){t.calcProjection()}function nJe(t){t.resetRotation()}function rJe(t){t.removeLeadSnapshot()}function Owe(t,e,n){t.translate=Li(e.translate,0,n),t.scale=Li(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Lwe(t,e,n,r){t.min=Li(e.min,n.min,r),t.max=Li(e.max,n.max,r)}function iJe(t,e,n,r){Lwe(t.x,e.x,n.x,r),Lwe(t.y,e.y,n.y,r)}function sJe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const oJe={duration:.45,ease:[.4,0,.1,1]},Nwe=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Fwe=Nwe("applewebkit/")&&!Nwe("chrome/")?Math.round:ss;function Bwe(t){t.min=Fwe(t.min),t.max=Fwe(t.max)}function aJe(t){Bwe(t.x),Bwe(t.y)}function BTe(t,e,n){return t==="position"||t==="preserve-aspect"&&!i$(Mwe(e),Mwe(n),.2)}const lJe=FTe({attachResizeListener:(t,e)=>np(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),h9={current:void 0},UTe=FTe({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!h9.current){const t=new lJe({});t.mount(window),t.setOptions({layoutScroll:!0}),h9.current=t}return h9.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),uJe={pan:{Feature:PQe},drag:{Feature:CQe,ProjectionNode:UTe,MeasureLayout:RTe}},cJe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function dJe(t){const e=cJe.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function l$(t,e,n=1){const[r,i]=dJe(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const u=o.trim();return xTe(u)?parseFloat(u):u}else return ZW(i)?l$(i,e,n+1):i}function hJe(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(i=>{const o=i.get();if(!ZW(o))return;const u=l$(o,r);u&&i.set(u)});for(const i in e){const o=e[i];if(!ZW(o))continue;const u=l$(o,r);u&&(e[i]=u,n||(n={}),n[i]===void 0&&(n[i]=o))}return{target:e,transitionEnd:n}}const pJe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),zTe=t=>pJe.has(t),fJe=t=>Object.keys(t).some(zTe),Uwe=t=>t===Q0||t===Yn,zwe=(t,e)=>parseFloat(t.split(", ")[e]),Vwe=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/);if(i)return zwe(i[1],e);{const o=r.match(/^matrix\((.+)\)$/);return o?zwe(o[1],t):0}},mJe=new Set(["x","y","z"]),gJe=SM.filter(t=>!mJe.has(t));function vJe(t){const e=[];return gJe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const a1={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:Vwe(4,13),y:Vwe(5,14)};a1.translateX=a1.x;a1.translateY=a1.y;const yJe=(t,e,n)=>{const r=e.measureViewportBox(),i=e.current,o=getComputedStyle(i),{display:u}=o,d={};u==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(v=>{d[v]=a1[v](r,o)}),e.render();const m=e.measureViewportBox();return n.forEach(v=>{const x=e.getValue(v);x&&x.jump(d[v]),t[v]=a1[v](m,o)}),t},bJe=(t,e,n={},r={})=>{e={...e},r={...r};const i=Object.keys(e).filter(zTe);let o=[],u=!1;const d=[];if(i.forEach(m=>{const v=t.getValue(m);if(!t.hasValue(m))return;let x=n[m],E=DP(x);const M=e[m];let R;if(QN(M)){const j=M.length,F=M[0]===null?1:0;x=M[F],E=DP(x);for(let B=F;B<j&&M[B]!==null;B++)R?iX(DP(M[B])===R):R=DP(M[B])}else R=DP(M);if(E!==R)if(Uwe(E)&&Uwe(R)){const j=v.get();typeof j=="string"&&v.set(parseFloat(j)),typeof M=="string"?e[m]=parseFloat(M):Array.isArray(M)&&R===Yn&&(e[m]=M.map(parseFloat))}else E!=null&&E.transform&&(R!=null&&R.transform)&&(x===0||M===0)?x===0?v.set(R.transform(x)):e[m]=E.transform(M):(u||(o=vJe(t),u=!0),d.push(m),r[m]=r[m]!==void 0?r[m]:e[m],v.jump(M))}),d.length){const m=d.indexOf("height")>=0?window.pageYOffset:null,v=yJe(e,t,d);return o.length&&o.forEach(([x,E])=>{t.getValue(x).set(E)}),t.render(),qF&&m!==null&&window.scrollTo({top:m}),{target:v,transitionEnd:r}}else return{target:e,transitionEnd:r}};function _Je(t,e,n,r){return fJe(e)?bJe(t,e,n,r):{target:e,transitionEnd:r}}const wJe=(t,e,n,r)=>{const i=hJe(t,e,r);return e=i.target,r=i.transitionEnd,_Je(t,e,n,r)},u$={current:null},VTe={current:!1};function xJe(){if(VTe.current=!0,!!qF)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>u$.current=t.matches;t.addListener(e),e()}else u$.current=!1}function SJe(t,e,n){const{willChange:r}=e;for(const i in e){const o=e[i],u=n[i];if(Ma(o))t.addValue(i,o),nF(r)&&r.add(i);else if(Ma(u))t.addValue(i,V0(o,{owner:t})),nF(r)&&r.remove(i);else if(u!==o)if(t.hasValue(i)){const d=t.getValue(i);!d.hasAnimated&&d.set(o)}else{const d=t.getStaticValue(i);t.addValue(i,V0(d!==void 0?d:o,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const jwe=new WeakMap,jTe=Object.keys(YT),EJe=jTe.length,Hwe=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],CJe=qK.length;class PJe{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,visualState:o},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Fi.render(this.render,!1,!0);const{latestValues:d,renderState:m}=o;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=u,this.isControllingVariants=ZF(n),this.isVariantNode=TPe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...x}=this.scrapeMotionValuesFromProps(n,{});for(const E in x){const M=x[E];d[E]!==void 0&&Ma(M)&&(M.set(d[E],!1),nF(v)&&v.add(E))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,jwe.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),VTe.current||xJe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:u$.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){jwe.delete(this.current),this.projection&&this.projection.unmount(),Dd(this.notifyUpdate),Dd(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Z0.has(e),i=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&Fi.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),o()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,i,o){let u,d;for(let m=0;m<EJe;m++){const v=jTe[m],{isEnabled:x,Feature:E,ProjectionNode:M,MeasureLayout:R}=YT[v];M&&(u=M),x(n)&&(!this.features[v]&&E&&(this.features[v]=new E(this)),R&&(d=R))}if(!this.projection&&u){this.projection=new u(this.latestValues,this.parent&&this.parent.projection);const{layoutId:m,layout:v,drag:x,dragConstraints:E,layoutScroll:M,layoutRoot:R}=n;this.projection.setOptions({layoutId:m,layout:v,alwaysMeasureLayout:!!x||E&&kw(E),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof v=="string"?v:"both",initialPromotionConfig:o,layoutScroll:M,layoutRoot:R})}return d}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ks()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Hwe.length;r++){const i=Hwe[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o=e["on"+i];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=SJe(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<CJe;r++){const i=qK[r],o=this.props[i];(qT(o)||o===!1)&&(n[i]=o)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=V0(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,i=typeof r=="string"||typeof r=="object"?(n=rX(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!Ma(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new pX),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class HTe extends PJe{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:i},o){let u=WZe(r,e||{},this);if(i&&(n&&(n=i(n)),r&&(r=i(r)),u&&(u=i(u))),o){HZe(this,r,u);const d=wJe(this,r,u,n);n=d.transitionEnd,r=d.target}return{transition:e,transitionEnd:n,...r}}}function TJe(t){return window.getComputedStyle(t)}class MJe extends HTe{readValueFromInstance(e,n){if(Z0.has(n)){const r=uX(n);return r&&r.default||0}else{const r=TJe(e),i=(RPe(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return ITe(e,n)}build(e,n,r,i){ZK(e,n,r,i.transformTemplate)}scrapeMotionValuesFromProps(e,n){return nX(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ma(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,i){BPe(e,n,r,i)}}class kJe extends HTe{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Z0.has(n)){const r=uX(n);return r&&r.default||0}return n=UPe.has(n)?n:tX(n),e.getAttribute(n)}measureInstanceViewportBox(){return ks()}scrapeMotionValuesFromProps(e,n){return VPe(e,n)}build(e,n,r,i){JK(e,n,r,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,r,i){zPe(e,n,r,i)}mount(e){this.isSVGTag=eX(e.tagName),super.mount(e)}}const AJe=(t,e)=>YK(t)?new kJe(e,{enableHardwareAcceleration:!1}):new MJe(e,{enableHardwareAcceleration:!0}),IJe={layout:{ProjectionNode:UTe,MeasureLayout:RTe}},RJe={...sQe,...EYe,...uJe,...IJe},GTe=Dqe((t,e)=>lYe(t,e,RJe,AJe)),WTe=Mt.createContext(null);function DJe(t,e,n,r){if(!r)return t;const i=t.findIndex(x=>x.value===e);if(i===-1)return t;const o=r>0?1:-1,u=t[i+o];if(!u)return t;const d=t[i],m=u.layout,v=Li(m.min,m.max,.5);return o===1&&d.layout.max+n>v||o===-1&&d.layout.min+n<v?LZe(t,i,i+o):t}function OJe({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...o},u){const d=PM(()=>GTe(e)),m=[],v=Mt.useRef(!1),x={axis:n,registerItem:(E,M)=>{M&&m.findIndex(R=>E===R.value)===-1&&(m.push({value:E,layout:M[n]}),m.sort(FJe))},updateOrder:(E,M,R)=>{if(v.current)return;const j=DJe(m,E,M,R);m!==j&&(v.current=!0,r(j.map(NJe).filter(F=>i.indexOf(F)!==-1)))}};return Mt.useEffect(()=>{v.current=!1}),Mt.createElement(d,{...o,ref:u,ignoreStrict:!0},Mt.createElement(WTe.Provider,{value:x},t))}const LJe=Mt.forwardRef(OJe);function NJe(t){return t.value}function FJe(t,e){return t.layout.min-e.layout.min}function $Te(t){const e=PM(()=>V0(t)),{isStatic:n}=Mt.useContext($K);if(n){const[,r]=Mt.useState(t);Mt.useEffect(()=>e.on("change",r),[])}return e}const BJe=t=>typeof t=="object"&&t.mix,UJe=t=>BJe(t)?t.mix:void 0;function zJe(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],o=t[2+n],u=t[3+n],d=lX(i,o,{mixer:UJe(o[0]),...u});return e?d(r):d}function KTe(t,e){const n=$Te(e()),r=()=>n.set(e());return r(),YW(()=>{const i=()=>Fi.update(r,!1,!0),o=t.map(u=>u.on("change",i));return()=>{o.forEach(u=>u()),Dd(r)}}),n}function VJe(t){sT.current=[],t();const e=KTe(sT.current,t);return sT.current=void 0,e}function jJe(t,e,n,r){if(typeof t=="function")return VJe(t);const i=typeof e=="function"?e:zJe(e,n,r);return Array.isArray(t)?Gwe(t,i):Gwe([t],([o])=>i(o))}function Gwe(t,e){const n=PM(()=>[]);return KTe(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}function Wwe(t,e=0){return Ma(t)?t:$Te(e)}function HJe({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:o=!0,...u},d){const m=PM(()=>GTe(r)),v=Mt.useContext(WTe),x={x:Wwe(e.x),y:Wwe(e.y)},E=jJe([x.x,x.y],([B,z])=>B||z?1:"unset"),M=Mt.useRef(null),{axis:R,registerItem:j,updateOrder:F}=v;return Mt.useEffect(()=>{j(n,M.current)},[v]),Mt.createElement(m,{drag:R,...u,dragSnapToOrigin:!0,style:{...e,x:x.x,y:x.y,zIndex:E},layout:o,onDrag:(B,z)=>{const{velocity:P}=z;P[R]&&F(n,x[R].get(),P[R]),i&&i(B,z)},onLayoutMeasure:B=>{M.current=B},ref:d,ignoreStrict:!0},t)}const GJe=Mt.forwardRef(HJe),XTe={Group:LJe,Item:GJe},WJe=Je.jsxs("svg",{className:"closeIcon",width:"14",height:"14",fill:"none",stroke:"#666666",strokeMiterlimit:"10",children:[Je.jsx("circle",{cx:"7",cy:"7",r:"6"}),Je.jsx("line",{x1:"4",y1:"4",x2:"10",y2:"10"}),Je.jsx("line",{x1:"4",y1:"10",x2:"10",y2:"4"})]}),$Je=Je.jsx("svg",{className:"dragIcon",width:"14",height:"14",fill:"#666666",stroke:"none",children:Je.jsx("path",{d:`M10.43,4H3.57C3.26,4,3,4.22,3,4.5v1C3,5.78,3.26,6,3.57,6h6.86C10.74,6,11,5.78,11,5.5v-1
C11,4.22,10.74,4,10.43,4z M10.43,8H3.57C3.26,8,3,8.22,3,8.5v1C3,9.78,3.26,10,3.57,10h6.86C10.74,10,11,9.78,11,9.5v-1
C11,8.22,10.74,8,10.43,8z`})});function KJe(t){return Je.jsx(XTe.Item,{value:t.title,children:Je.jsxs("div",{children:[$Je,Je.jsx("span",{children:t.title}),Je.jsx("button",{className:"closeIcon",onClick:()=>{t.onDelete(t.index)},children:WJe})]})},t.title)}function XJe(t){const[e,n]=Mt.useState(!1),[r,i]=Mt.useState(t.options),o=v=>{t.onDragComplete(v),i(v)},u=v=>{const x=[...r];x.splice(v,1),o(x)},d=[];r.forEach((v,x)=>{d.push(Je.jsx(KJe,{index:x,title:v,onDelete:u},v))});let m="dropdown draggable";return t.subdropdown&&(m+=" subdropdown"),Je.jsxs("div",{className:m,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[Je.jsx(CPe,{title:t.title}),Je.jsx(XTe.Group,{axis:"y",values:r,onReorder:o,style:{visibility:e?"visible":"hidden"},children:d})]})}function qJe(t){const{option:e}=t,[n,r]=Mt.useState("");let i;switch(e.type){case"draggable":i=Je.jsx(XJe,{title:e.title,options:e.value,onDragComplete:o=>{e.onDragComplete!==void 0&&e.onDragComplete(o)},subdropdown:!0});break;case"dropdown":i=Je.jsx(qTe,{title:e.title,options:e.value,onSelect:e.onSelect,subdropdown:!0});break;case"option":i=Je.jsx("button",{onClick:()=>{e.onSelect!==void 0&&e.onSelect(e.value),e.selectable&&(n!==e.title?r(e.title):r(""))},children:e.title});break}return Je.jsx("li",{className:n===e.title?"selected":"",children:i},K8e())}function qTe(t){const[e,n]=Mt.useState(!1),r=[];t.options.map((o,u)=>{t.onSelect!==void 0&&(o.onSelect=t.onSelect),r.push(Je.jsx(qJe,{option:o},u))});let i="dropdown";return t.subdropdown&&(i+=" subdropdown"),Je.jsxs("div",{className:i,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[Je.jsx(CPe,{title:t.title}),Je.jsx("ul",{style:{visibility:e?"visible":"hidden"},children:r})]})}function fX(t){const[e,n]=Mt.useState(t.open!==void 0?t.open:!0),r=!e||t.children===void 0;return Je.jsxs("div",{className:`accordion ${r?"hide":""}`,children:[Je.jsxs("button",{className:"toggle",onClick:()=>{const i=!e;t.onToggle!==void 0&&t.onToggle(i),n(i)},children:[Je.jsx("p",{className:`status ${e?"open":""}`,children:"Toggle"}),Je.jsx("p",{className:"label",children:NT(t.label)})]}),t.button,Je.jsx("div",{className:e?"open":"",children:Je.jsx("div",{children:t.children})})]})}function YTe(t){const[e,n]=Mt.useState(!1),r=t.child!==void 0&&t.child.children.length>0,i=[];return t.child!==void 0&&t.child.children.length>0&&t.child.children.map(o=>{i.push(Je.jsx(YTe,{child:o,three:t.three},Math.random()))}),Je.jsx(Je.Fragment,{children:t.child!==void 0&&Je.jsxs("div",{className:"childObject",children:[Je.jsxs("div",{className:"child",children:[r?Je.jsx("button",{className:"status",style:{backgroundPositionX:e?"-14px":"2px"},onClick:()=>{n(!e)}}):null,Je.jsx("button",{className:"name",style:{left:r?"20px":"5px"},onClick:()=>{t.child!==void 0&&(t.three.getObject(t.child.uuid),e||n(!0))},children:t.child.name.length>0?`${t.child.name} (${t.child.type})`:`${t.child.type}::${t.child.uuid}`}),Je.jsx("div",{className:`icon ${Q8e(t.child)}`})]}),Je.jsx("div",{className:e?"open":"",children:Je.jsx("div",{className:"container",children:i})})]},Math.random())})}function YJe(t){var n;const e=[];return(n=t.child)==null||n.children.map(r=>{e.push(Je.jsx(YTe,{child:r,three:t.three},Math.random()))}),Je.jsx("div",{className:`scene ${t.class!==void 0?t.class:""}`,children:e})}const ZJe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA5klEQVRoge2Y0Q6EIAwE6cX//+X6cCFpSMEKVTdk501OpRNKiyelFC0b8Ps6gCwoggZF0KAIGhRBgyJoUAQNiqCxjciR9SLV//eZiAyvK3U8i/QVaQO2YyLSFVvlkdTKDjJCukh2ykR5ZEW+kHmlatl90RaBtDkK/w7CYhuRUEO0ee3l+J3m55Vm+17vtwjTnV1V3QA8qfbeUXCzRWDpiLLS+OyzvRW7IzW9R+okvclsqR09743bo0yUpc1+lSJvNsa002+Euk9GKzV7SmZDRIMiaFAEDYqgQRE0KIIGRdCgCBoUQeMEMERadX7YUz8AAAAASUVORK5CYII=";function QJe(t){return"items"in t}function j0(t){const e=[];return t.items.forEach(n=>{QJe(n)?e.push(Je.jsx(j0,{title:NT(n.title),items:n.items},Math.random())):e.push(Je.jsx(HP,{title:n.title,prop:n.prop,value:n.value,type:n.type,min:n.min,max:n.max,step:n.step,disabled:n.disabled,options:n.options,onChange:(r,i)=>{n.onChange!==void 0&&n.onChange(r,i)}},Math.random()))}),Je.jsx(fX,{label:t.title,open:t.expanded===!0,children:e})}function JJe(t){return!(t==="alphaHash"||t==="alphaToCoverage"||t==="attenuationDistance"||t==="blendDstAlpha"||t==="colorWrite"||t==="combine"||t==="defaultAttributeValues"||t==="depthFunc"||t==="forceSinglePass"||t==="glslVersion"||t==="linecap"||t==="linejoin"||t==="linewidth"||t==="normalMapType"||t==="precision"||t==="premultipliedAlpha"||t==="shadowSide"||t==="toneMapped"||t==="uniformsGroups"||t==="uniformsNeedUpdate"||t==="userData"||t==="vertexColors"||t==="version"||t==="wireframeLinecap"||t==="wireframeLinejoin"||t==="wireframeLinewidth"||t.slice(0,4)==="clip"||t.slice(0,7)==="polygon"||t.slice(0,7)==="stencil"||t.slice(0,2)==="is")}function hm(t){switch(t){case"alphaMap":return"Alpha Map";case"anisotropyMap":return"Anisotropy Map";case"anisotropyRotation":return"Anisotropy Rotation";case"aoMap":return"AO Map";case"aoMapIntensity":return"AO Map Intensity";case"attenuationColor":return"Attenuation Color";case"blendAlpha":return"Blend Alpha";case"blendColor":return"Blend Color";case"blendDst":return"Blend Dst";case"blendDstAlpha":return"Blend Dst Alha";case"blendEquation":return"Blend Equation";case"blendEquationAlpha":return"Blend Equation Alpha";case"blending":return"Blending";case"blendSrc":return"Blend Src";case"blendSrcAlpha":return"Blend Src Alpha";case"bumpMap":return"Bump Map";case"bumpScale":return"Bump Scale";case"clearcoatMap":return"Clearcoat Map";case"clearcoatNormalMap":return"Clearcoat Normal Map";case"clearcoatNormalScale":return"Clearcoat Normal Scale";case"clearcoatRoughness":return"Clearcoat Roughness";case"clearcoatRoughnessMap":return"Clearcoat Roughness Map";case"color":return"Color";case"defines":return"Defines";case"depthTest":return"Depth Test";case"depthWrite":return"Depth Write";case"displacementBias":return"Displacement Bias";case"displacementMap":return"Displacement Map";case"displacementScale":return"Displacement Scale";case"dithering":return"Dithering";case"emissive":return"Emissive";case"emissiveMap":return"Emissive Map";case"emissiveIntensity":return"Emissive Intensity";case"envMap":return"Environment Map";case"envMapIntensity":return"Environment Map Intensity";case"extensions":return"Extensions";case"flatShading":return"Flat Shading";case"fragmentShader":return"Fragment Shader";case"fog":return"Fog";case"gradientMap":return"Gradient Map";case"ior":return"IOR";case"iridescenceIOR":return"Iridescence IOR";case"iridescenceMap":return"Iridescence Map";case"iridescenceThicknessMap":return"Iridescence Thickness Map";case"iridescenceThicknessRange":return"Iridescence Thickness Range";case"lights":return"Lights";case"lightMap":return"Light Map";case"lightMapIntensity":return"Light Map Intensity";case"map":return"Map";case"matcap":return"Matcap";case"metalness":return"Metalness";case"metalnessMap":return"Metalness Map";case"name":return"Name";case"normalMap":return"Normal Map";case"normalScale":return"Normal Scale";case"opacity":return"Opacity";case"reflectivity":return"Reflectivity";case"refractionRatio":return"Refraction Ratio";case"roughness":return"Roughness";case"roughnessMap":return"Roughness Map";case"sheenColor":return"Sheen Color";case"sheenColorMap":return"Sheen Color Map";case"sheenRoughness":return"Sheen Roughness";case"sheenRoughnessMap":return"Sheen Roughness Map";case"shininess":return"Shininess";case"side":return"Side";case"size":return"Size";case"sizeAttenuation":return"Size Attenuation";case"specular":return"Specular";case"specularColor":return"Specular Color";case"specularColorMap":return"Specular Color Map";case"specularIntensity":return"Specular Intensity";case"specularIntensityMap":return"Specular Map Intensity";case"thickness":return"Thickness";case"thicknessMap":return"Thickness Map";case"transmission":return"Transmission";case"transmissionMap":return"Transmission Map";case"transparent":return"Transparent";case"type":return"Type";case"uuid":return"UUID";case"uniforms":return"Uniforms";case"vertexShader":return"Vertex Shader";case"visible":return"Visible";case"wireframe":return"Wireframe"}return t}function eet(t){return t.toLowerCase().search("intensity")>-1||t==="anisotropyRotation"||t==="blendAlpha"||t==="bumpScale"||t==="clearcoatRoughness"||t==="displacementBias"||t==="displacementScale"||t==="metalness"||t==="opacity"||t==="reflectivity"||t==="refractionRatio"||t==="roughness"||t==="sheenRoughness"||t==="thickness"}function tet(){const t=document.createElement("input");return t.type="file",new Promise((e,n)=>{t.addEventListener("change",function(){if(t.files===null)n();else{const r=t.files[0],i=new FileReader;i.onload=function(o){e(o.target.result)},i.readAsDataURL(r)}}),t.click()})}const net=[{title:"Front",value:kd},{title:"Back",value:Is},{title:"Double",value:xa}],ret=[{title:"No Blending",value:_u},{title:"Normal",value:w0},{title:"Additive",value:vW},{title:"Subtractive",value:yW},{title:"Multiply",value:bW},{title:"Custom",value:xSe}],iet=[{title:"Add",value:Tm},{title:"Subtract",value:SSe},{title:"Reverse Subtract",value:ESe},{title:"Min",value:_W},{title:"Max",value:wW}],set=[{title:"Zero",valye:o7},{title:"One",valye:a7},{title:"Src Color",valye:l7},{title:"One Minus Src Color",valye:u7},{title:"Src Alpha",valye:PT},{title:"One Minus Src Alpha",valye:TT},{title:"Dst Alpha",valye:c7},{title:"One Minus Dst Alpha",valye:d7},{title:"Dst Color",valye:h7},{title:"One Minus Dst Color",valye:p7},{title:"Src Alpha Saturate",valye:CSe},{title:"Constant Color",valye:f7},{title:"One Minus Constant Color",valye:m7},{title:"Constant Alpha",valye:g7},{title:"One Minus Constant Alpha",valye:v7}],oet=[{title:"Zero",valye:o7},{title:"One",valye:a7},{title:"Src Color",valye:l7},{title:"One Minus Src Color",valye:u7},{title:"Src Alpha",valye:PT},{title:"One Minus Src Alpha",valye:TT},{title:"Dst Alpha",valye:c7},{title:"One Minus Dst Alpha",valye:d7},{title:"Dst Color",valye:h7},{title:"One Minus Dst Color",valye:p7},{title:"Constant Color",valye:f7},{title:"One Minus Constant Color",valye:m7},{title:"Constant Alpha",valye:g7},{title:"One Minus Constant Alpha",valye:v7}];function LP(t,e){t.needsUpdate=!0,t.type="option",t.options=e}function $we(t,e,n){const r=[];for(const i in t){if(!JJe(i))continue;const o=typeof t[i],u=t[i];if(o==="boolean"||o==="number"||o==="string"){const d={title:hm(i),prop:i,type:o,value:u,min:void 0,max:void 0,needsUpdate:o==="boolean",onChange:(v,x)=>{var M;n.updateObject(e.uuid,`material.${v}`,x),d.needsUpdate&&n.updateObject(e.uuid,"material.needsUpdate",!0);const E=(M=n.scene)==null?void 0:M.getObjectByProperty("uuid",e.uuid);E!==void 0&&bs(E,`material.${v}`,x)}};switch(i){case"blending":LP(d,ret);break;case"blendDst":LP(d,oet);break;case"blendEquation":LP(d,iet);break;case"blendSrc":LP(d,set);break;case"side":LP(d,net);break}eet(i)&&(d.value=Number(u),d.type="range",d.min=0,d.max=1,d.step=.01);const m=o==="string"&&(i==="vertexShader"||i==="fragmentShader");m&&(d.disabled=!1,d.latest=d.value,d.onChange=(v,x)=>{d.latest=x}),r.push(d),m&&r.push({title:`${NT(i)} - Update`,type:"button",onChange:()=>{var x;n.updateObject(e.uuid,`material.${i}`,d.latest),n.updateObject(e.uuid,"material.needsUpdate",!0);const v=(x=n.scene)==null?void 0:x.getObjectByProperty("uuid",e.uuid);v!==void 0&&(bs(v,`material.${i}`,d.latest),v.material.needsUpdate=!0)}})}else if(o==="object")if(u.isColor)r.push({title:hm(i),prop:i,type:"color",value:u,onChange:(d,m)=>{var E;const v=new xn(m);n.updateObject(e.uuid,`material.${d}`,v);const x=(E=n.scene)==null?void 0:E.getObjectByProperty("uuid",e.uuid);x!==void 0&&bs(x,`material.${d}`,v)}});else if(Array.isArray(u)){const d=[];for(const m in u)d.push({title:`${m}`,type:`${typeof u[m]}`,value:u[m],onChange:(v,x)=>{var M;n.updateObject(e.uuid,`material.${i}`,x);const E=(M=n.scene)==null?void 0:M.getObjectByProperty("uuid",e.uuid);E!==void 0&&bs(E,`material.${i}`,x)}});r.push({title:hm(i),items:d})}else if(u.x!==void 0&&u.y!==void 0&&u.z===void 0)r.push({title:hm(i),prop:i,type:"vector",value:u,onChange:(d,m)=>{var x;n.updateObject(e.uuid,`material.${d}`,m);const v=(x=n.scene)==null?void 0:x.getObjectByProperty("uuid",e.uuid);v!==void 0&&bs(v,`material.${d}`,m)}});else{const d=[];for(const m in u){const v=u[m];switch(typeof v){case"boolean":case"number":case"string":m==="src"?r.push({title:hm(i),type:"image",value:v,onChange:(E,M)=>{var j;n.createTexture(e.uuid,`material.${i}`,M);const R=(j=n.scene)==null?void 0:j.getObjectByProperty("uuid",e.uuid);R!==void 0&&UN(M).then(F=>{bs(R,`material.${i}`,F),bs(R,"material.needsUpdate",!0)})}}):d.push({title:`${hm(m)}`,prop:`material.${i}.${m}`,type:`${typeof t[i][m]}`,value:u[m],onChange:(E,M)=>{var j;n.updateObject(e.uuid,`material.${i}.${m}`,M);const R=(j=n.scene)==null?void 0:j.getObjectByProperty("uuid",e.uuid);R!==void 0&&bs(R,`material.${i}.${m}`,M)}});break;case"object":if(v.value!==void 0&&v.value.src!==void 0)d.push({title:hm(m),type:"image",value:v.value.src,onChange:(E,M)=>{var j;n.createTexture(e.uuid,`material.${i}.${m}.value`,u);const R=(j=n.scene)==null?void 0:j.getObjectByProperty("uuid",e.uuid);R!==void 0&&UN(M).then(F=>{bs(R,`material.${i}.${m}.value`,F)})}});else if(i==="uniforms"){const E=v.value,M=(R,j,F)=>({title:R,type:"number",value:F,step:.01,onChange:(B,z)=>{var Z;const P=`material.uniforms.${m}.value.${j}`;n.updateObject(e.uuid,P,z);const W=(Z=n.scene)==null?void 0:Z.getObjectByProperty("uuid",e.uuid);W!==void 0&&bs(W,P,z)}});if(typeof v.value=="number")d.push({title:m,type:"number",value:v.value,step:.01,onChange:(R,j)=>{var z;const F=`material.${i}.${R}.value`;n.updateObject(e.uuid,F,j);const B=(z=n.scene)==null?void 0:z.getObjectByProperty("uuid",e.uuid);B!==void 0&&bs(B,F,j)}});else if(E.r!==void 0&&E.g!==void 0&&E.b!==void 0)d.push({title:m,type:"color",value:v.value,onChange:(R,j)=>{var P;const F=new xn(j),B=`material.${i}.${R}.value`;n.updateObject(e.uuid,B,F);const z=(P=n.scene)==null?void 0:P.getObjectByProperty("uuid",e.uuid);z!==void 0&&bs(z,B,F)}});else if(E.x!==void 0&&E.y!==void 0&&E.z===void 0&&E.w===void 0)d.push({title:m,type:"vector",value:v.value,prop:`material.${i}.${m}.value`,onChange:(R,j)=>{var B;n.updateObject(e.uuid,R,j);const F=(B=n.scene)==null?void 0:B.getObjectByProperty("uuid",e.uuid);F!==void 0&&bs(F,R,j)}});else if(E.x!==void 0&&E.y!==void 0&&E.z!==void 0&&E.w===void 0)d.push({title:m,items:[M("X","x",v.value.x),M("Y","y",v.value.y),M("Z","z",v.value.z)]});else if(E.x!==void 0&&E.y!==void 0&&E.z!==void 0&&E.w!==void 0)d.push({title:m,items:[M("X","x",v.value.x),M("Y","y",v.value.y),M("Z","z",v.value.z),M("W","w",v.value.w)]});else if(E.elements!==void 0){const R=E.elements,j=[];for(let F=0;F<R.length;F++)j.push(M(F.toString(),F.toString(),R[F]));d.push({title:m,items:j})}else console.log(">>> need to add this format:",m,E)}else d.push({title:m,type:`${typeof v.value}`,value:v.value,onChange:(E,M)=>{var j;n.updateObject(e.uuid,`material.${i}.${m}.value`,M);const R=(j=n.scene)==null?void 0:j.getObjectByProperty("uuid",e.uuid);R!==void 0&&bs(R,`material.${i}.${m}.value`,M)}});break}}d.length>0&&r.push({title:hm(i),items:d})}else u!==void 0&&console.log("other:",i,o,u)}return r.sort((i,o)=>i.title<o.title?-1:i.title>o.title?1:0),r.push({title:"Update Material",type:"button",onChange:()=>{n.updateObject(e.uuid,"material.needsUpdate",!0)}}),r}function aet(t,e){const n=t.material;if(Array.isArray(n)){const r=[],i=n.length;for(let o=0;o<i;o++)r.push(Je.jsx(j0,{title:`Material ${o}`,items:$we(n[o],t,e)},`Material ${o}`));return Je.jsx(Je.Fragment,{children:r})}else return Je.jsx(j0,{title:"Material",items:$we(n,t,e)})}function uet(t){const e=Mt.useRef(null),n=Mt.useRef(null),r=Mt.useRef(null),i=Mt.useRef(null),o=Mt.useRef(null),u=Mt.useRef(null),[d,m]=Mt.useState(t.value),[v,x]=Mt.useState({min:t.min,max:t.max}),[E,M]=Mt.useState(!1);function R(){E||(window.addEventListener("mousemove",F),window.addEventListener("mouseup",j),window.addEventListener("mouseup",j),M(!0))}function j(){window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",j),M(!1)}function F(W){const Z=o.current.getBoundingClientRect(),ge=tw(0,99,W.clientX-Z.left)/99,X=tw(0,99,W.clientY-Z.top)/99,pe=nT(Dbe(v.min,v.max,ge),3),ye=nT(Dbe(v.min,v.max,X),3);t.onChange({target:{value:{x:pe,y:ye}}}),m({x:pe,y:ye})}function B(W){let Z=d.x,ge=d.y;W.target===e.current?Z=Number(W.target.value):ge=Number(W.target.value),m({x:Z,y:ge})}function z(){const W=Number(r.current.value);x({min:W,max:v.max}),(d.x<W||d.y<W)&&m({x:tw(W,v.max,d.x),y:tw(W,v.max,d.y)})}function P(){const W=Number(i.current.value);x({min:v.min,max:W}),(d.x>W||d.y>W)&&m({x:tw(v.min,W,d.x),y:tw(v.min,W,d.y)})}return Mt.useEffect(()=>{console.log(v.min,v.max,d.x,d.y);const W=Rbe(v.min,v.max,d.x),Z=Rbe(v.min,v.max,d.y);u.current.style.left=`${W*100}%`,u.current.style.top=`${Z*100}%`},[v,d]),Je.jsxs("div",{className:"vector",children:[Je.jsxs("div",{className:"fields",children:[Je.jsxs("div",{children:[Je.jsx("label",{children:"X:"}),Je.jsx("input",{ref:e,type:"number",value:d.x,min:v.min,max:v.max,step:.01,onChange:B})]}),Je.jsxs("div",{children:[Je.jsx("label",{children:"Y:"}),Je.jsx("input",{ref:n,type:"number",value:d.y,min:v.min,max:v.max,step:.01,onChange:B})]}),Je.jsxs("div",{children:[Je.jsx("label",{children:"Min:"}),Je.jsx("input",{ref:r,type:"number",value:v.min,step:.01,onChange:z})]}),Je.jsxs("div",{children:[Je.jsx("label",{children:"Max:"}),Je.jsx("input",{ref:i,type:"number",value:v.max,step:.01,onChange:P})]})]}),Je.jsxs("div",{className:"input",ref:o,onMouseDown:R,onMouseUp:j,children:[Je.jsx("div",{className:"x"}),Je.jsx("div",{className:"y"}),Je.jsx("div",{className:"pt",ref:u})]})]})}function HP(t){var x;let e=t.value;e!==void 0&&e.isColor!==void 0&&(e=q8e(t.value));const[n,r]=Mt.useState(e),i=Mt.useRef(null),o=Mt.useRef(null),u=Mt.useRef(null);Mt.useEffect(()=>{var Z;let E=!1,M=-1,R=0,j=Number(n);const F=ge=>{E=!0,R=j,M=ge.clientX},B=ge=>{if(!E)return;const X=t.step!==void 0?t.step:1,pe=(ge.clientX-M)*X;j=Number((R+pe).toFixed(4)),o.current!==null&&(o.current.value=j.toString()),t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,j)},z=()=>{E=!1},P=()=>{E=!1},W=t.type==="number";return W&&((Z=i.current)==null||Z.addEventListener("mousedown",F,!1),document.addEventListener("mouseup",z,!1),document.addEventListener("mousemove",B,!1),document.addEventListener("contextmenu",P,!1)),()=>{var ge;W&&((ge=i.current)==null||ge.removeEventListener("mousedown",F),document.removeEventListener("mouseup",z),document.removeEventListener("mousemove",B),document.removeEventListener("contextmenu",P))}},[n]);const d=t.type==="string"&&(n.length>100||n.search(`
`)>-1),m=d||t.type==="image"||t.type==="vector",v=E=>{let M=E.target.value;t.type==="boolean"?M=E.target.checked:t.type==="option"&&(M=t.options[M].value),r(M),t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,M)};return Je.jsxs("div",{className:`field ${m?"block":""}`,children:[t.type!=="button"&&Je.jsx("label",{ref:i,children:NT(t.title)},"fieldLabel"),t.type==="string"&&!d&&Je.jsx("input",{type:"text",disabled:t.disabled,onChange:v,value:n}),t.type==="string"&&d&&Je.jsx("textarea",{cols:50,rows:10,disabled:t.disabled!==void 0?t.disabled:!0,onChange:v,value:n}),t.type==="boolean"&&Je.jsx("input",{type:"checkbox",disabled:t.disabled,onChange:v,checked:n}),t.type==="number"&&Je.jsx("input",{ref:o,type:"number",value:n,min:t.min,max:t.max,step:t.step,disabled:t.disabled,onChange:v}),t.type==="range"&&Je.jsxs(Je.Fragment,{children:[Je.jsx("input",{type:"text",value:n.toString(),onChange:v,disabled:t.disabled,className:"min"}),Je.jsx("input",{disabled:t.disabled,type:"range",value:n,min:t.min,max:t.max,step:t.step,onChange:v})]}),t.type==="color"&&Je.jsxs(Je.Fragment,{children:[Je.jsx("input",{type:"text",value:n.toString(),onChange:v,disabled:t.disabled,className:"color"}),Je.jsx("input",{type:"color",value:n,onChange:v,disabled:t.disabled})]}),t.type==="button"&&Je.jsx("button",{disabled:t.disabled,onClick:()=>{t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,!0)},children:t.title}),t.type==="image"&&Je.jsx("img",{ref:u,onClick:()=>{tet().then(E=>{u.current.src=E,t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,E)})},src:n.length>0?n:ZJe}),t.type==="option"&&Je.jsx(Je.Fragment,{children:Je.jsx("select",{onChange:v,disabled:t.disabled,defaultValue:t.value,children:(x=t.options)==null?void 0:x.map((E,M)=>Je.jsx("option",{value:E.value,children:NT(E.title)},M))})}),t.type==="vector"&&Je.jsx(uet,{value:n,min:-1,max:1,onChange:v})]})}function Kwe(t){switch(t){case"fov":return"FOV";case"zoom":return"Zoom";case"near":return"Near";case"far":return"Far";case"focus":return"Focus";case"aspect":return"Aspect";case"filmGauge":return"Film Gauge";case"filmOffset":return"Film Offset";case"left":return"Left";case"right":return"Right";case"top":return"Top";case"bottom":return"Bottom"}return t}function cet(t,e){const n=[];if(t.perspectiveCameraInfo!==void 0)for(const r in t.perspectiveCameraInfo)n.push({title:Kwe(r),prop:r,type:"number",step:.01,value:t.perspectiveCameraInfo[r],onChange:(i,o)=>{var d;e.updateObject(t.uuid,i,o),e.requestMethod(t.uuid,"updateProjectionMatrix");const u=(d=e.scene)==null?void 0:d.getObjectByProperty("uuid",t.uuid);u!==void 0&&(bs(u,i,o),u.updateProjectionMatrix())}});else if(t.orthographicCameraInfo!==void 0)for(const r in t.orthographicCameraInfo)n.push({title:Kwe(r),prop:r,type:"number",step:.01,value:t.perspectiveCameraInfo[r],onChange:(i,o)=>{var d;e.updateObject(t.uuid,i,o),e.requestMethod(t.uuid,"updateProjectionMatrix");const u=(d=e.scene)==null?void 0:d.getObjectByProperty("uuid",t.uuid);u!==void 0&&(bs(u,i,o),u.updateProjectionMatrix())}});return Je.jsx(j0,{title:"Camera",items:n})}const det=Math.PI/180,het=180/Math.PI;function lw(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function pet(t){return t*det}function p9(t){return t*het}function fet(t,e){const n=new Bn;n.elements=t.matrix;const r=new Be,i=new wa,o=new Be;t.uuid.length>0&&(r.setFromMatrixPosition(n),i.setFromRotationMatrix(n),o.setFromMatrixScale(n));const u=(m,v)=>{var E;e.updateObject(t.uuid,m,v);const x=(E=e.scene)==null?void 0:E.getObjectByProperty("uuid",t.uuid);x!==void 0&&bs(x,m,v)},d=(m,v)=>{u(m,pet(v))};return Je.jsx(j0,{title:"Transform",items:[{title:"Position X",prop:"position.x",type:"number",value:r.x,onChange:u},{title:"Position Y",prop:"position.y",type:"number",value:r.y,onChange:u},{title:"Position Z",prop:"position.z",type:"number",value:r.z,onChange:u},{title:"Rotation X",prop:"rotation.x",type:"number",value:nT(p9(i.x)),min:-360,max:360,step:.1,onChange:d},{title:"Rotation Y",prop:"rotation.y",type:"number",value:nT(p9(i.y)),min:-360,max:360,step:.1,onChange:d},{title:"Rotation Z",prop:"rotation.z",type:"number",value:nT(p9(i.z)),min:-360,max:360,step:.1,onChange:d},{title:"Scale X",prop:"scale.x",type:"number",value:o.x,step:.01,onChange:u},{title:"Scale Y",prop:"scale.y",type:"number",value:o.y,step:.01,onChange:u},{title:"Scale Z",prop:"scale.z",type:"number",value:o.z,step:.01,onChange:u}]})}function Xwe(t){switch(t){case"color":return"Color";case"intensity":return"Intensity";case"decay":return"Decay";case"distance":return"Distance";case"angle":return"Angle";case"penumbra":return"Penumbra";case"groundColor":return"Ground Color"}return t}function met(t,e){const n=[];if(t.lightInfo!==void 0)for(const r in t.lightInfo){const i=t.lightInfo[r];i!==void 0&&(i.isColor!==void 0?n.push({title:Xwe(r),prop:r,type:"color",value:i,onChange:(o,u)=>{var v;const d=new xn(u);e.updateObject(t.uuid,o,d);const m=(v=e.scene)==null?void 0:v.getObjectByProperty("uuid",t.uuid);m!==void 0&&bs(m,o,d)}}):n.push({title:Xwe(r),prop:r,type:typeof i,value:i,step:typeof i=="number"?.01:void 0,onChange:(o,u)=>{var m;e.updateObject(t.uuid,o,u);const d=(m=e.scene)==null?void 0:m.getObjectByProperty("uuid",t.uuid);d!==void 0&&bs(d,o,u)}}))}return Je.jsx(j0,{title:"Light",items:n})}function get(t,e){var d;const n=[],r=[];let i=0;t.animations.forEach(m=>{i=Math.max(i,m.duration),m.duration>0&&r.push({title:m.name,items:[{title:"Duration",type:"number",value:m.duration,disabled:!0},{title:"Blend Mode",type:"option",disabled:!0,options:[{title:"Normal",value:2500},{title:"Additive",value:2501}]}]})}),n.push({title:"Animations",items:r});const o=(d=e.scene)==null?void 0:d.getObjectByProperty("uuid",t.uuid);let u=!1;if(o!==void 0){const m=o.mixer;if(u=m!==void 0,u){const v=[{title:"Time Scale",type:"range",value:m.timeScale,step:.01,min:-1,max:2,onChange:(x,E)=>{m.timeScale=E,e.updateObject(t.uuid,"mixer.timeScale",E)}}];v.push({title:"Stop All",type:"button",onChange:()=>{m.stopAllAction(),e.requestMethod(t.uuid,"stopAllAction",void 0,"mixer")}}),n.push({title:"Mixer",items:v})}}return Je.jsx(j0,{title:"Animation",items:n})}const ZTe={name:"",uuid:"",type:"",visible:!1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],animations:[],material:void 0,perspectiveCameraInfo:void 0,orthographicCameraInfo:void 0,lightInfo:void 0};let So={...ZTe};function vet(t){const[e,n]=Mt.useState(-1);Mt.useEffect(()=>{function u(m){So={...m.value},n(Date.now())}function d(){So={...ZTe},n(Date.now())}return Sr.addEventListener(Er.SET_SCENE,d),Sr.addEventListener(Er.SET_OBJECT,u),()=>{Sr.removeEventListener(Er.SET_SCENE,d),Sr.removeEventListener(Er.SET_OBJECT,u)}},[]);const r=So.type.toLowerCase(),i=So.animations.length>0||So.mixer!==void 0,o=r.search("mesh")>-1||r.search("line")>-1||r.search("points")>-1;return Je.jsx(fX,{label:"Inspector",children:Je.jsx("div",{id:"Inspector",className:t.class,children:So.uuid.length>0&&Je.jsxs(Je.Fragment,{children:[Je.jsxs(Je.Fragment,{children:[Je.jsx(HP,{type:"string",title:"Name",prop:"name",value:So.name,disabled:!0}),Je.jsx(HP,{type:"string",title:"Type",prop:"type",value:So.type,disabled:!0}),Je.jsx(HP,{type:"string",title:"UUID",prop:"uuid",value:So.uuid,disabled:!0}),Je.jsx(HP,{type:"boolean",title:"Visible",prop:"visible",value:So.visible,onChange:(u,d)=>{var v;t.three.updateObject(So.uuid,u,d);const m=(v=t.three.scene)==null?void 0:v.getObjectByProperty("uuid",So.uuid);m!==void 0&&bs(m,u,d)}})]}),Je.jsxs(Je.Fragment,{children:[fet(So,t.three),i?get(So,t.three):null,r.search("camera")>-1?cet(So,t.three):null,r.search("light")>-1?met(So,t.three):null,o?aet(So,t.three):null]})]})},e)},"Inspector")}function yet(t){const[e,n]=Mt.useState(t.scene);Mt.useEffect(()=>{const o=u=>{n(u.value)};return Sr.addEventListener(Er.SET_SCENE,o),()=>{Sr.removeEventListener(Er.SET_SCENE,o)}},[]);const r=e!==null,i="Hierarchy - "+(r?`${e==null?void 0:e.name}`:"No Scene");return Je.jsxs("div",{id:"SidePanel",children:[Je.jsx(fX,{label:i,open:!0,children:Je.jsx(Je.Fragment,{children:r&&Je.jsx(YJe,{child:e,three:t.three})})}),Je.jsx(vet,{three:t.three})]},"SidePanel")}const qwe={type:"change"},f9={type:"start"},Ywe={type:"end"},ML=new p1,Zwe=new Sm,bet=Math.cos(70*qo.DEG2RAD);class _et extends Tl{constructor(e,n){super(),this.object=e,this.domElement=n,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Be,this.cursor=new Be,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:F_.ROTATE,MIDDLE:F_.DOLLY,RIGHT:F_.PAN},this.touches={ONE:B_.ROTATE,TWO:B_.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return d.phi},this.getAzimuthalAngle=function(){return d.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Ae){Ae.addEventListener("keydown",Dn),this._domElementKeyEvents=Ae},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Dn),this._domElementKeyEvents=null},this.saveState=function(){r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=function(){r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(qwe),r.update(),o=i.NONE},this.update=function(){const Ae=new Be,Wt=new Us().setFromUnitVectors(e.up,new Be(0,1,0)),Yt=Wt.clone().invert(),pn=new Be,Te=new Us,Ht=new Be,Dt=2*Math.PI;return function(On=null){const ur=r.object.position;Ae.copy(ur).sub(r.target),Ae.applyQuaternion(Wt),d.setFromVector3(Ae),r.autoRotate&&o===i.NONE&&_t(ie(On)),r.enableDamping?(d.theta+=m.theta*r.dampingFactor,d.phi+=m.phi*r.dampingFactor):(d.theta+=m.theta,d.phi+=m.phi);let or=r.minAzimuthAngle,hr=r.maxAzimuthAngle;isFinite(or)&&isFinite(hr)&&(or<-Math.PI?or+=Dt:or>Math.PI&&(or-=Dt),hr<-Math.PI?hr+=Dt:hr>Math.PI&&(hr-=Dt),or<=hr?d.theta=Math.max(or,Math.min(hr,d.theta)):d.theta=d.theta>(or+hr)/2?Math.max(or,d.theta):Math.min(hr,d.theta)),d.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,d.phi)),d.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(x,r.dampingFactor):r.target.add(x),r.target.sub(r.cursor),r.target.clampLength(r.minTargetRadius,r.maxTargetRadius),r.target.add(r.cursor),r.zoomToCursor&&X||r.object.isOrthographicCamera?d.radius=Qe(d.radius):d.radius=Qe(d.radius*v),Ae.setFromSpherical(d),Ae.applyQuaternion(Yt),ur.copy(r.target).add(Ae),r.object.lookAt(r.target),r.enableDamping===!0?(m.theta*=1-r.dampingFactor,m.phi*=1-r.dampingFactor,x.multiplyScalar(1-r.dampingFactor)):(m.set(0,0,0),x.set(0,0,0));let Pr=!1;if(r.zoomToCursor&&X){let Zn=null;if(r.object.isPerspectiveCamera){const ri=Ae.length();Zn=Qe(ri*v);const Qi=ri-Zn;r.object.position.addScaledVector(Z,Qi),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const ri=new Be(ge.x,ge.y,0);ri.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/v)),r.object.updateProjectionMatrix(),Pr=!0;const Qi=new Be(ge.x,ge.y,0);Qi.unproject(r.object),r.object.position.sub(Qi).add(ri),r.object.updateMatrixWorld(),Zn=Ae.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;Zn!==null&&(this.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(Zn).add(r.object.position):(ML.origin.copy(r.object.position),ML.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(ML.direction))<bet?e.lookAt(r.target):(Zwe.setFromNormalAndCoplanarPoint(r.object.up,r.target),ML.intersectPlane(Zwe,r.target))))}else r.object.isOrthographicCamera&&(Pr=v!==1,Pr&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/v)),r.object.updateProjectionMatrix()));return v=1,X=!1,Pr||pn.distanceToSquared(r.object.position)>u||8*(1-Te.dot(r.object.quaternion))>u||Ht.distanceToSquared(r.target)>0?(r.dispatchEvent(qwe),pn.copy(r.object.position),Te.copy(r.object.quaternion),Ht.copy(r.target),!0):!1}}(),this.dispose=function(){r.domElement.removeEventListener("contextmenu",gr),r.domElement.removeEventListener("pointerdown",Se),r.domElement.removeEventListener("pointercancel",dt),r.domElement.removeEventListener("wheel",At),r.domElement.removeEventListener("pointermove",he),r.domElement.removeEventListener("pointerup",dt),r._domElementKeyEvents!==null&&(r._domElementKeyEvents.removeEventListener("keydown",Dn),r._domElementKeyEvents=null)};const r=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const u=1e-6,d=new Abe,m=new Abe;let v=1;const x=new Be,E=new cn,M=new cn,R=new cn,j=new cn,F=new cn,B=new cn,z=new cn,P=new cn,W=new cn,Z=new Be,ge=new cn;let X=!1;const pe=[],ye={};let te=!1;function ie(Ae){return Ae!==null?2*Math.PI/60*r.autoRotateSpeed*Ae:2*Math.PI/60/60*r.autoRotateSpeed}function Pe(Ae){const Wt=Math.abs(Ae*.01);return Math.pow(.95,r.zoomSpeed*Wt)}function _t(Ae){m.theta-=Ae}function Tt(Ae){m.phi-=Ae}const de=function(){const Ae=new Be;return function(Yt,pn){Ae.setFromMatrixColumn(pn,0),Ae.multiplyScalar(-Yt),x.add(Ae)}}(),ot=function(){const Ae=new Be;return function(Yt,pn){r.screenSpacePanning===!0?Ae.setFromMatrixColumn(pn,1):(Ae.setFromMatrixColumn(pn,0),Ae.crossVectors(r.object.up,Ae)),Ae.multiplyScalar(Yt),x.add(Ae)}}(),Me=function(){const Ae=new Be;return function(Yt,pn){const Te=r.domElement;if(r.object.isPerspectiveCamera){const Ht=r.object.position;Ae.copy(Ht).sub(r.target);let Dt=Ae.length();Dt*=Math.tan(r.object.fov/2*Math.PI/180),de(2*Yt*Dt/Te.clientHeight,r.object.matrix),ot(2*pn*Dt/Te.clientHeight,r.object.matrix)}else r.object.isOrthographicCamera?(de(Yt*(r.object.right-r.object.left)/r.object.zoom/Te.clientWidth,r.object.matrix),ot(pn*(r.object.top-r.object.bottom)/r.object.zoom/Te.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}}();function wt(Ae){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?v/=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Ge(Ae){r.object.isPerspectiveCamera||r.object.isOrthographicCamera?v*=Ae:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function it(Ae,Wt){if(!r.zoomToCursor)return;X=!0;const Yt=r.domElement.getBoundingClientRect(),pn=Ae-Yt.left,Te=Wt-Yt.top,Ht=Yt.width,Dt=Yt.height;ge.x=pn/Ht*2-1,ge.y=-(Te/Dt)*2+1,Z.set(ge.x,ge.y,1).unproject(r.object).sub(r.object.position).normalize()}function Qe(Ae){return Math.max(r.minDistance,Math.min(r.maxDistance,Ae))}function ut(Ae){E.set(Ae.clientX,Ae.clientY)}function je(Ae){it(Ae.clientX,Ae.clientX),z.set(Ae.clientX,Ae.clientY)}function bt(Ae){j.set(Ae.clientX,Ae.clientY)}function Fe(Ae){M.set(Ae.clientX,Ae.clientY),R.subVectors(M,E).multiplyScalar(r.rotateSpeed);const Wt=r.domElement;_t(2*Math.PI*R.x/Wt.clientHeight),Tt(2*Math.PI*R.y/Wt.clientHeight),E.copy(M),r.update()}function at(Ae){P.set(Ae.clientX,Ae.clientY),W.subVectors(P,z),W.y>0?wt(Pe(W.y)):W.y<0&&Ge(Pe(W.y)),z.copy(P),r.update()}function Ot(Ae){F.set(Ae.clientX,Ae.clientY),B.subVectors(F,j).multiplyScalar(r.panSpeed),Me(B.x,B.y),j.copy(F),r.update()}function Gt(Ae){it(Ae.clientX,Ae.clientY),Ae.deltaY<0?Ge(Pe(Ae.deltaY)):Ae.deltaY>0&&wt(Pe(Ae.deltaY)),r.update()}function tn(Ae){let Wt=!1;switch(Ae.code){case r.keys.UP:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?Tt(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Me(0,r.keyPanSpeed),Wt=!0;break;case r.keys.BOTTOM:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?Tt(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Me(0,-r.keyPanSpeed),Wt=!0;break;case r.keys.LEFT:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?_t(2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Me(r.keyPanSpeed,0),Wt=!0;break;case r.keys.RIGHT:Ae.ctrlKey||Ae.metaKey||Ae.shiftKey?_t(-2*Math.PI*r.rotateSpeed/r.domElement.clientHeight):Me(-r.keyPanSpeed,0),Wt=!0;break}Wt&&(Ae.preventDefault(),r.update())}function Kt(Ae){if(pe.length===1)E.set(Ae.pageX,Ae.pageY);else{const Wt=rn(Ae),Yt=.5*(Ae.pageX+Wt.x),pn=.5*(Ae.pageY+Wt.y);E.set(Yt,pn)}}function Tn(Ae){if(pe.length===1)j.set(Ae.pageX,Ae.pageY);else{const Wt=rn(Ae),Yt=.5*(Ae.pageX+Wt.x),pn=.5*(Ae.pageY+Wt.y);j.set(Yt,pn)}}function nn(Ae){const Wt=rn(Ae),Yt=Ae.pageX-Wt.x,pn=Ae.pageY-Wt.y,Te=Math.sqrt(Yt*Yt+pn*pn);z.set(0,Te)}function He(Ae){r.enableZoom&&nn(Ae),r.enablePan&&Tn(Ae)}function jn(Ae){r.enableZoom&&nn(Ae),r.enableRotate&&Kt(Ae)}function an(Ae){if(pe.length==1)M.set(Ae.pageX,Ae.pageY);else{const Yt=rn(Ae),pn=.5*(Ae.pageX+Yt.x),Te=.5*(Ae.pageY+Yt.y);M.set(pn,Te)}R.subVectors(M,E).multiplyScalar(r.rotateSpeed);const Wt=r.domElement;_t(2*Math.PI*R.x/Wt.clientHeight),Tt(2*Math.PI*R.y/Wt.clientHeight),E.copy(M)}function dn(Ae){if(pe.length===1)F.set(Ae.pageX,Ae.pageY);else{const Wt=rn(Ae),Yt=.5*(Ae.pageX+Wt.x),pn=.5*(Ae.pageY+Wt.y);F.set(Yt,pn)}B.subVectors(F,j).multiplyScalar(r.panSpeed),Me(B.x,B.y),j.copy(F)}function on(Ae){const Wt=rn(Ae),Yt=Ae.pageX-Wt.x,pn=Ae.pageY-Wt.y,Te=Math.sqrt(Yt*Yt+pn*pn);P.set(0,Te),W.set(0,Math.pow(P.y/z.y,r.zoomSpeed)),wt(W.y),z.copy(P);const Ht=(Ae.pageX+Wt.x)*.5,Dt=(Ae.pageY+Wt.y)*.5;it(Ht,Dt)}function zr(Ae){r.enableZoom&&on(Ae),r.enablePan&&dn(Ae)}function kn(Ae){r.enableZoom&&on(Ae),r.enableRotate&&an(Ae)}function Se(Ae){r.enabled!==!1&&(pe.length===0&&(r.domElement.setPointerCapture(Ae.pointerId),r.domElement.addEventListener("pointermove",he),r.domElement.addEventListener("pointerup",dt)),sr(Ae),Ae.pointerType==="touch"?Xn(Ae):Nt(Ae))}function he(Ae){r.enabled!==!1&&(Ae.pointerType==="touch"?Bt(Ae):Ft(Ae))}function dt(Ae){switch(Cn(Ae),pe.length){case 0:r.domElement.releasePointerCapture(Ae.pointerId),r.domElement.removeEventListener("pointermove",he),r.domElement.removeEventListener("pointerup",dt),r.dispatchEvent(Ywe),o=i.NONE;break;case 1:const Wt=pe[0],Yt=ye[Wt];Xn({pointerId:Wt,pageX:Yt.x,pageY:Yt.y});break}}function Nt(Ae){let Wt;switch(Ae.button){case 0:Wt=r.mouseButtons.LEFT;break;case 1:Wt=r.mouseButtons.MIDDLE;break;case 2:Wt=r.mouseButtons.RIGHT;break;default:Wt=-1}switch(Wt){case F_.DOLLY:if(r.enableZoom===!1)return;je(Ae),o=i.DOLLY;break;case F_.ROTATE:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(r.enablePan===!1)return;bt(Ae),o=i.PAN}else{if(r.enableRotate===!1)return;ut(Ae),o=i.ROTATE}break;case F_.PAN:if(Ae.ctrlKey||Ae.metaKey||Ae.shiftKey){if(r.enableRotate===!1)return;ut(Ae),o=i.ROTATE}else{if(r.enablePan===!1)return;bt(Ae),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(f9)}function Ft(Ae){switch(o){case i.ROTATE:if(r.enableRotate===!1)return;Fe(Ae);break;case i.DOLLY:if(r.enableZoom===!1)return;at(Ae);break;case i.PAN:if(r.enablePan===!1)return;Ot(Ae);break}}function At(Ae){r.enabled===!1||r.enableZoom===!1||o!==i.NONE||(Ae.preventDefault(),r.dispatchEvent(f9),Gt(gn(Ae)),r.dispatchEvent(Ywe))}function gn(Ae){const Wt=Ae.deltaMode,Yt={clientX:Ae.clientX,clientY:Ae.clientY,deltaY:Ae.deltaY};switch(Wt){case 1:Yt.deltaY*=16;break;case 2:Yt.deltaY*=100;break}return Ae.ctrlKey&&!te&&(Yt.deltaY*=10),Yt}function Jt(Ae){Ae.key==="Control"&&(te=!0,r.domElement.getRootNode().addEventListener("keyup",ln,{passive:!0,capture:!0}))}function ln(Ae){Ae.key==="Control"&&(te=!1,r.domElement.getRootNode().removeEventListener("keyup",ln,{passive:!0,capture:!0}))}function Dn(Ae){r.enabled===!1||r.enablePan===!1||tn(Ae)}function Xn(Ae){switch(Mn(Ae),pe.length){case 1:switch(r.touches.ONE){case B_.ROTATE:if(r.enableRotate===!1)return;Kt(Ae),o=i.TOUCH_ROTATE;break;case B_.PAN:if(r.enablePan===!1)return;Tn(Ae),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(r.touches.TWO){case B_.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;He(Ae),o=i.TOUCH_DOLLY_PAN;break;case B_.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;jn(Ae),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&r.dispatchEvent(f9)}function Bt(Ae){switch(Mn(Ae),o){case i.TOUCH_ROTATE:if(r.enableRotate===!1)return;an(Ae),r.update();break;case i.TOUCH_PAN:if(r.enablePan===!1)return;dn(Ae),r.update();break;case i.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;zr(Ae),r.update();break;case i.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;kn(Ae),r.update();break;default:o=i.NONE}}function gr(Ae){r.enabled!==!1&&Ae.preventDefault()}function sr(Ae){pe.push(Ae.pointerId)}function Cn(Ae){delete ye[Ae.pointerId];for(let Wt=0;Wt<pe.length;Wt++)if(pe[Wt]==Ae.pointerId){pe.splice(Wt,1);return}}function Mn(Ae){let Wt=ye[Ae.pointerId];Wt===void 0&&(Wt=new cn,ye[Ae.pointerId]=Wt),Wt.set(Ae.pageX,Ae.pageY)}function rn(Ae){const Wt=Ae.pointerId===pe[0]?pe[1]:pe[0];return ye[Wt]}r.domElement.addEventListener("contextmenu",gr),r.domElement.addEventListener("pointerdown",Se),r.domElement.addEventListener("pointercancel",dt),r.domElement.addEventListener("wheel",At,{passive:!1}),r.domElement.getRootNode().addEventListener("keydown",Jt,{passive:!0,capture:!0}),this.update()}}const JL=t=>{const[e,n]=Mt.useState(t.options[t.index]),r=()=>{t.onToggle(!t.open)},i=o=>{o!==e&&(t.onSelect(o),n(o)),t.onToggle(!1)};return Je.jsxs("div",{className:`dropdown ${t.up===!0?"up":""}`,children:[Je.jsx("div",{className:"dropdown-toggle",onClick:r,children:e}),t.open&&Je.jsx("ul",{className:"dropdown-menu",children:t.options.map(o=>Je.jsx("li",{onClick:()=>i(o),children:o},o))})]})},o0=Mt.forwardRef(function(e,n){const[r,i]=Mt.useState(!1),o=e.options.indexOf(e.camera.name);return Je.jsxs("div",{className:"CameraWindow",children:[Je.jsx("div",{ref:n,className:"clickable",onClick:()=>{r&&i(!1)}}),Je.jsx(JL,{index:o,open:r,options:e.options,onSelect:e.onSelect,onToggle:u=>{i(u)},up:!0})]})});class wet extends Ta{constructor(e){super({extensions:{derivatives:!0},glslVersion:EW,side:xa,transparent:!0,uniforms:{uScale:{value:(e==null?void 0:e.scale)!==void 0?e==null?void 0:e.scale:.1},uDivisions:{value:(e==null?void 0:e.divisions)!==void 0?e==null?void 0:e.divisions:10},uColor:{value:(e==null?void 0:e.color)!==void 0?e==null?void 0:e.color:new xn(16777215)},uDistance:{value:(e==null?void 0:e.distance)!==void 0?e==null?void 0:e.distance:1e4},uSubgridOpacity:{value:(e==null?void 0:e.subgridOpacity)!==void 0?e==null?void 0:e.subgridOpacity:.15},uGridOpacity:{value:(e==null?void 0:e.gridOpacity)!==void 0?e==null?void 0:e.gridOpacity:.25}},vertexShader:`out vec3 worldPosition;
      uniform float uDistance;
      
      void main() {
        // Scale the plane by the drawing distance
        worldPosition = position.xzy * uDistance;
        worldPosition.xz += cameraPosition.xz;
      
        gl_Position = projectionMatrix * modelViewMatrix * vec4(worldPosition, 1.0);
      }`,fragmentShader:`out vec4 fragColor;
      in vec3 worldPosition;
      
      uniform float uDivisions;
      uniform float uScale;
      uniform vec3 uColor;
      uniform float uDistance;
      uniform float uSubgridOpacity;
      uniform float uGridOpacity;
      
      float getGrid(float gapSize) {
        vec2 worldPositionByDivision = worldPosition.xz / gapSize;
      
        // Inverted, 0 where line, >1 where there's no line
        // We use the worldPosition (which in this case we use similarly to UVs) differential to control the anti-aliasing
        // We need to do the -0.5)-0.5 trick because the result fades out from 0 to 1, and we want both
        // worldPositionByDivision == 0.3 and worldPositionByDivision == 0.7 to result in the same fade, i.e. 0.3,
        // otherwise only one side of the line will be anti-aliased
        vec2 grid = abs(fract(worldPositionByDivision-0.5)-0.5) / fwidth(worldPositionByDivision) / 2.0;
        float gridLine = min(grid.x, grid.y);
      
        // Uninvert and clamp
        return 1.0 - min(gridLine, 1.0);
      }
      
      void main() {
        float cameraDistanceToGridPlane = distance(cameraPosition.y, worldPosition.y);
        float cameraDistanceToFragmentOnGridPlane = distance(cameraPosition.xz, worldPosition.xz);
      
        // The size of the grid and subgrid are powers of each other and they are determined based on camera distance.
        // The current grid will become the next subgrid when it becomes too small, and its next power becomes the new grid.
        float subGridPower = pow(uDivisions, floor(log(cameraDistanceToGridPlane) / log(uDivisions)));
        float gridPower = subGridPower * uDivisions;
      
        // If we want to fade both the grid and its subgrid, we need to displays 3 different opacities, with the next grid being the third
        float nextGridPower = gridPower * uDivisions;
      
        // 1 where grid, 0 where no grid
        float subgrid = getGrid(subGridPower * uScale);
        float grid = getGrid(gridPower * uScale);
        float nextGrid = getGrid(nextGridPower * uScale);
      
        // Where we are between the introduction of the current grid power and when we switch to the next grid power
        float stepPercentage = (cameraDistanceToGridPlane - subGridPower)/(gridPower - subGridPower);
      
        // The last x percentage of the current step over which we want to fade
        float fadeRange = 0.3;
      
        // We calculate the fade percentage from the step percentage and the fade range
        float fadePercentage = max(stepPercentage - 1.0 + fadeRange, 0.0) / fadeRange;
      
        // Set base opacity based on how close we are to the drawing distance, with a cubic falloff
        float baseOpacity = subgrid * pow(1.0 - min(cameraDistanceToFragmentOnGridPlane / uDistance, 1.0), 3.0);
      
        // Shade the subgrid
        fragColor = vec4(uColor.rgb, (baseOpacity - fadePercentage) * uSubgridOpacity);
      
        // Somewhat arbitrary additional fade coefficient to counter anti-aliasing popping when switching between grid powers
        float fadeCoefficient = 0.5;
      
        // Shade the grid
        fragColor.a = mix(fragColor.a, baseOpacity * uGridOpacity - fadePercentage * (uGridOpacity - uSubgridOpacity) * fadeCoefficient, grid);
      
        // Shade the next grid
        fragColor.a = mix(fragColor.a, baseOpacity * uGridOpacity, nextGrid);
      
        if (fragColor.a <= 0.0) discard;
      }`,name:"InfiniteGrid",depthWrite:!1})}}class xet extends is{constructor(){const n=new wet;super(new f1(2,2),n);yr(this,"gridMaterial");this.gridMaterial=n,this.frustumCulled=!1,this.name="InfiniteGridHelper",this.position.y=.1}update(){this.gridMaterial.needsUpdate=!0}}const Eet=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>

	#if defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif

	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
}`,Cet=`
#include <common>
#include <uv_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {
	#include <clipping_planes_fragment>
	gl_FragColor = vec4(vec3(vUv, 0.0), 1.0);
}`;class Pet extends Ta{constructor(){super({defines:{USE_UV:""},vertexShader:Eet,fragmentShader:Cet})}}let kL="Renderer",pm,AL=!1,Qwe=!1,Di,Eo,fm,mm;function Tet(t){const e=Mt.useMemo(()=>new Map,[]),n=Mt.useMemo(()=>new Map,[]),r=Mt.useMemo(()=>new Map,[]),i=Mt.useMemo(()=>new NN,[]),o=Mt.useMemo(()=>new v0,[]),u=Mt.useMemo(()=>new xet,[]),d=Mt.useMemo(()=>new Ibe(500),[]),m=Mt.useMemo(()=>new Ibe(100),[]),v=Mt.useMemo(()=>new XSe,[]),x=Mt.useMemo(()=>new l8e,[]),E=Mt.useMemo(()=>new Pet,[]),M=Mt.useMemo(()=>new t1({opacity:.33,transparent:!0,wireframe:!0}),[]);function R(je,bt){const Fe=new AT(-100,100,100,-100,50,3e3);return Fe.name=je,Fe.position.copy(bt),Fe.lookAt(0,0,0),e.set(je,Fe),Fe}const j=["Renderer","Depth","Normals","UVs","Wireframe"],F=["Single","Side by Side","Stacked","Quad"];Mt.useEffect(()=>{i.name="Debug Scene",o.name="helpers",i.add(o),o.add(u),d.name="axisHelper",o.add(d),m.name="interactionHelper",o.add(m),m.visible=!1,R("Top",new Be(0,1e3,0)),R("Bottom",new Be(0,-1e3,0)),R("Left",new Be(-1e3,0,0)),R("Right",new Be(1e3,0,0)),R("Front",new Be(0,0,1e3)),R("Back",new Be(0,0,-1e3)),R("Orthographic",new Be(1e3,1e3,1e3));const je=new Vs(60,1,50,3e3);je.name="Debug",je.position.set(500,500,500),je.lookAt(0,0,0),e.set("Debug",je),Di=e.get("Debug"),Eo=e.get("Orthographic"),fm=e.get("Front"),mm=e.get("Top")},[]);const B=Mt.useRef(null),z=Mt.useRef(null),P=Mt.useRef(null),W=Mt.useRef(null),Z=Mt.useRef(null),ge=Mt.useRef(null),[X,pe]=Mt.useState(t.mode!==void 0?t.mode:"Single"),[ye,te]=Mt.useState(null),[ie,Pe]=Mt.useState(!1),[_t,Tt]=Mt.useState(!1),[de,ot]=Mt.useState(!1),[,Me]=Mt.useState(Date.now()),wt=(je,bt)=>{const Fe=n.get(je.name);Fe!==void 0&&Fe.dispose(),n.delete(je.name);const at=r.get(je.name);at!==void 0&&(i.remove(at),at.dispose()),r.delete(je.name);const Ot=new _et(je,bt);switch(Ot.enableDamping=!0,Ot.dampingFactor=.05,je.name){case"Top":case"Bottom":case"Left":case"Right":case"Front":case"Back":Ot.enableRotate=!1;break}if(n.set(je.name,Ot),je instanceof Vs){const Gt=new H8e(je);r.set(je.name,Gt),i.add(Gt)}},Ge=je=>{const bt=r.get(je.name);bt!==void 0&&(i.remove(bt),bt.dispose(),r.delete(je.name));const Fe=n.get(je.name);Fe!==void 0&&(Fe.dispose(),n.delete(je.name))},it=()=>{n.forEach((je,bt)=>{je.dispose();const Fe=r.get(bt);Fe!==void 0&&(i.remove(Fe),Fe.dispose()),r.delete(bt),n.delete(bt)}),n.clear(),r.clear()},Qe=()=>{switch(X){case"Single":wt(Di,P.current);break;case"Side by Side":case"Stacked":wt(Di,P.current),wt(Eo,W.current);break;case"Quad":wt(Di,P.current),wt(Eo,W.current),wt(fm,Z.current),wt(mm,ge.current);break}};Mt.useEffect(()=>{const je=new T7({canvas:B.current,stencil:!1});je.autoClear=!1,je.shadowMap.enabled=!0,je.setPixelRatio(devicePixelRatio),je.setClearColor(0),t.three.renderer=je,te(je)},[]),Mt.useEffect(()=>{const je=at=>{BN(pm),i.remove(pm);const Ot=t.scenes.get(at.value.name);if(Ot!==void 0){const Gt=new Ot;t.onSceneSet!==void 0&&t.onSceneSet(Gt),pm=Gt,t.three.scene=pm,i.add(pm),Qwe=!0}},bt=at=>{var tn;const Ot=at.value,Gt=(tn=t.three.scene)==null?void 0:tn.getObjectByProperty("uuid",Ot.uuid);Gt!==void 0&&e.set(Ot.name,Gt),Me(Date.now())},Fe=at=>{e.delete(at.value.name),Me(Date.now())};return Sr.addEventListener(Er.SET_SCENE,je),Sr.addEventListener(Er.ADD_CAMERA,bt),Sr.addEventListener(Er.REMOVE_CAMERA,Fe),()=>{Sr.removeEventListener(Er.SET_SCENE,je),Sr.removeEventListener(Er.ADD_CAMERA,bt),Sr.removeEventListener(Er.REMOVE_CAMERA,Fe)}},[]),Mt.useEffect(()=>{if(ye===null)return;let je=window.innerWidth,bt=window.innerHeight,Fe=Math.floor(je/2),at=Math.floor(bt/2),Ot=-1;const Gt=()=>{je=window.innerWidth-300,bt=window.innerHeight,Fe=Math.floor(je/2),at=Math.floor(bt/2),ye.setSize(je,bt);let He=je,jn=bt;switch(X){case"Side by Side":He=Fe,jn=bt;break;case"Stacked":He=je,jn=at;break;case"Quad":He=Fe,jn=at;break}e.forEach(an=>{var dn;an instanceof AT?(an.left=He/-2,an.right=He/2,an.top=jn/2,an.bottom=jn/-2,an.updateProjectionMatrix()):an instanceof Vs&&(an.aspect=He/jn,an.updateProjectionMatrix(),(dn=r.get(an.name))==null||dn.update())})},tn=()=>{ye.setViewport(0,0,je,bt),ye.setScissor(0,0,je,bt),ye.render(i,Di)},Kt=()=>{if(X==="Side by Side")ye.setViewport(0,0,Fe,bt),ye.setScissor(0,0,Fe,bt),ye.render(i,Di),ye.setViewport(Fe,0,Fe,bt),ye.setScissor(Fe,0,Fe,bt),ye.render(i,Eo);else{const He=bt-at;ye.setViewport(0,He,je,at),ye.setScissor(0,He,je,at),ye.render(i,Di),ye.setViewport(0,0,je,at),ye.setScissor(0,0,je,at),ye.render(i,Eo)}},Tn=()=>{let He=0,jn=0;jn=bt-at,He=0,ye.setViewport(He,jn,Fe,at),ye.setScissor(He,jn,Fe,at),ye.render(i,Di),He=Fe,ye.setViewport(He,jn,Fe,at),ye.setScissor(He,jn,Fe,at),ye.render(i,Eo),jn=0,He=0,ye.setViewport(He,jn,Fe,at),ye.setScissor(He,jn,Fe,at),ye.render(i,fm),He=Fe,ye.setViewport(He,jn,Fe,at),ye.setScissor(He,jn,Fe,at),ye.render(i,mm)},nn=()=>{switch(n.forEach(He=>{He.update()}),t.onSceneUpdate!==void 0&&Qwe&&t.onSceneUpdate(pm),ye.clear(),X){case"Single":tn();break;case"Side by Side":case"Stacked":Kt();break;case"Quad":Tn();break}Ot=requestAnimationFrame(nn)};return Qe(),window.addEventListener("resize",Gt),Gt(),nn(),()=>{window.removeEventListener("resize",Gt),cancelAnimationFrame(Ot),Ot=-1}},[X,ye]),Mt.useEffect(()=>{if(ye!==null){const je=new j8e,bt=new cn,Fe=(tn,Kt,Tn,nn)=>{switch(X){case"Quad":tn<Tn?Kt<nn?je.setFromCamera(bt,Di):je.setFromCamera(bt,fm):Kt<nn?je.setFromCamera(bt,Eo):je.setFromCamera(bt,mm);break;case"Side by Side":tn<Tn?je.setFromCamera(bt,Di):je.setFromCamera(bt,Eo);break;case"Single":je.setFromCamera(bt,Di);break;case"Stacked":Kt<nn?je.setFromCamera(bt,Di):je.setFromCamera(bt,Eo);break}},at=tn=>{if(!AL)return;const Kt=new cn;ye.getSize(Kt);const Tn=Math.min(tn.clientX,Kt.x),nn=Math.min(tn.clientY,Kt.y);bt.x=lw(Tn,0,Kt.x,-1,1),bt.y=lw(nn,0,Kt.y,1,-1);const He=Kt.x/2,jn=Kt.y/2,an=()=>{Tn<He?bt.x=lw(Tn,0,He,-1,1):bt.x=lw(Tn,He,Kt.x,-1,1)},dn=()=>{nn<jn?bt.y=lw(nn,0,jn,1,-1):bt.y=lw(nn,jn,Kt.y,1,-1)};switch(X){case"Quad":an(),dn();break;case"Side by Side":an();break;case"Stacked":dn(),dn();break}Fe(Tn,nn,He,jn);const on=je.intersectObjects(pm.children);on.length>0&&m.position.copy(on[0].point)},Ot=tn=>{if(!AL)return;const Kt=new cn;if(ye.getSize(Kt),tn.clientX>=Kt.x)return;at(tn);const Tn=je.intersectObjects(pm.children);Tn.length>0&&t.three.getObject(Tn[0].object.uuid)},Gt=z.current;return Gt.addEventListener("mousemove",at,!1),Gt.addEventListener("click",Ot,!1),()=>{Gt.removeEventListener("mousemove",at),Gt.removeEventListener("click",Ot)}}},[X,ye]);const ut=[];return e.forEach((je,bt)=>{ut.push(bt)}),Je.jsxs("div",{className:"multiview",children:[Je.jsx("canvas",{ref:B}),ye!==null&&Je.jsxs(Je.Fragment,{children:[Je.jsxs("div",{className:`cameras ${X==="Single"||X==="Stacked"?"single":""}`,ref:z,children:[X==="Single"&&Je.jsx(Je.Fragment,{children:Je.jsx(o0,{camera:Di,options:ut,ref:P,onSelect:je=>{var Fe;(Fe=n.get(Di.name))==null||Fe.dispose();const bt=e.get(je);bt!==void 0&&(Ge(Di),Di=bt,wt(bt,P.current))}})}),(X==="Side by Side"||X==="Stacked")&&Je.jsxs(Je.Fragment,{children:[Je.jsx(o0,{camera:Di,options:ut,ref:P,onSelect:je=>{var Fe;(Fe=n.get(Di.name))==null||Fe.dispose();const bt=e.get(je);bt!==void 0&&(Ge(Di),Di=bt,wt(bt,P.current))}}),Je.jsx(o0,{camera:Eo,options:ut,ref:W,onSelect:je=>{var Fe;(Fe=n.get(Eo.name))==null||Fe.dispose();const bt=e.get(je);bt!==void 0&&(Ge(Eo),Eo=bt,wt(bt,W.current))}})]}),X==="Quad"&&Je.jsxs(Je.Fragment,{children:[Je.jsx(o0,{camera:Di,options:ut,ref:P,onSelect:je=>{var Fe;(Fe=n.get(Di.name))==null||Fe.dispose();const bt=e.get(je);bt!==void 0&&(Ge(Di),Di=bt,wt(bt,P.current))}}),Je.jsx(o0,{camera:Eo,options:ut,ref:W,onSelect:je=>{var Fe;(Fe=n.get(Eo.name))==null||Fe.dispose();const bt=e.get(je);bt!==void 0&&(Ge(Eo),Eo=bt,wt(bt,W.current))}}),Je.jsx(o0,{camera:fm,options:ut,ref:Z,onSelect:je=>{var Fe;(Fe=n.get(fm.name))==null||Fe.dispose();const bt=e.get(je);bt!==void 0&&(Ge(fm),fm=bt,wt(bt,Z.current))}}),Je.jsx(o0,{camera:mm,options:ut,ref:ge,onSelect:je=>{var Fe;(Fe=n.get(mm.name))==null||Fe.dispose();const bt=e.get(je);bt!==void 0&&(Ge(mm),mm=bt,wt(bt,ge.current))}})]})]}),Je.jsxs("div",{className:"settings",children:[Je.jsx(JL,{index:F.indexOf(X),options:F,onSelect:je=>{je!==X&&(it(),pe(je))},open:ie,onToggle:je=>{Pe(je),_t&&Tt(!1),de&&ot(!1)}}),Je.jsx(JL,{index:j.indexOf(kL),options:j,onSelect:je=>{if(je!==kL)switch(kL=je,kL){case"Depth":i.overrideMaterial=v;break;case"Normals":i.overrideMaterial=x;break;default:case"Renderer":i.overrideMaterial=null;break;case"Wireframe":i.overrideMaterial=M;break;case"UVs":i.overrideMaterial=E;break}},open:_t,onToggle:je=>{ie&&Pe(!1),Tt(je),de&&ot(!1)}}),Je.jsx(JL,{index:0,options:["Orbit Mode","Selection Mode"],onSelect:je=>{AL=je==="Selection Mode",m.visible=AL},open:de,onToggle:je=>{ie&&Pe(!1),_t&&Tt(!1),ot(je)}})]})]})]})}/**
 * postprocessing v6.34.1 build Wed Dec 27 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rüschen
 * @license Zlib
 */var Met="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",br={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},QTe="",Qo="srgb",tB="srgb-linear",C0={NONE:0,DEPTH:1,CONVOLUTION:2},Kr={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},MM={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},IL={DEFAULT:0,ESKIL:1},JTe=Number(iM.replace(/\D+/g,"")),eMe=JTe>=152,ket=new Map([[CF,tB],[sp,Qo]]),Aet=new Map([[tB,CF],[Qo,sp]]);function QT(t){return t===null?null:eMe?t.outputColorSpace:ket.get(t.outputEncoding)}function P0(t,e){t!==null&&(eMe?t.colorSpace=e:t.encoding=Aet.get(e))}function nB(t){return JTe<154?t.replace("colorspace_fragment","encodings_fragment"):t}var Iet=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Ret="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Det=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],tMe=class extends Ta{constructor(t=new Ar){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Mi(null),texelSize:new Mi(new Ar),scale:new Mi(1),kernel:new Mi(0)},blending:_u,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Iet,vertexShader:Ret}),this.fragmentShader=nB(this.fragmentShader),this.setTexelSize(t.x,t.y),this.kernelSize=MM.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return Det[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,t*.5,e*.5)}setSize(t,e){const n=1/t,r=1/e;this.uniforms.texelSize.value.set(n,r,n*.5,r*.5)}},Oet=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,nMe=class extends Ta{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Mi(null),opacity:new Mi(1)},blending:_u,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Oet,vertexShader:Met}),this.fragmentShader=nB(this.fragmentShader)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},Let=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,Net="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Fet=class extends Ta{constructor(t,e,n,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:iM.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Mi(null),depthBuffer:new Mi(null),resolution:new Mi(new cn),texelSize:new Mi(new cn),cameraNear:new Mi(.3),cameraFar:new Mi(1e3),aspect:new Mi(1),time:new Mi(0)},blending:_u,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=sM){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=Let.replace(Kr.FRAGMENT_HEAD,t.get(Kr.FRAGMENT_HEAD)||"").replace(Kr.FRAGMENT_MAIN_UV,t.get(Kr.FRAGMENT_MAIN_UV)||"").replace(Kr.FRAGMENT_MAIN_IMAGE,t.get(Kr.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Net.replace(Kr.VERTEX_HEAD,t.get(Kr.VERTEX_HEAD)||"").replace(Kr.VERTEX_MAIN_SUPPORT,t.get(Kr.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=nB(this.fragmentShader),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof Vs?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return Kr}},Bet=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec4 maskParams;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;float linearGradientMask(const in float x){return smoothstep(maskParams.x,maskParams.y,x)-smoothstep(maskParams.w,maskParams.z,x);}void main(){vec2 dUv=vOffset*(1.0-linearGradientMask(vUv2.y));vec4 sum=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y-dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y-dUv.y));gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Uet="uniform vec4 texelSize;uniform float kernel;uniform float scale;uniform float aspect;uniform vec2 rotation;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));vOffset=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;gl_Position=vec4(position.xy,1.0,1.0);}",zet=class extends tMe{constructor({kernelSize:t=MM.MEDIUM,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3}={}){super(),this.fragmentShader=Bet,this.vertexShader=Uet,this.kernelSize=t,this.fragmentShader=nB(this.fragmentShader),this.uniforms.aspect=new Mi(1),this.uniforms.rotation=new Mi(new cn),this.uniforms.maskParams=new Mi(new Ar),this._offset=e,this._focusArea=r,this._feather=i,this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.maskParams.value,e=Math.max(this.focusArea,0),n=Math.max(e-this.feather,0);t.set(this.offset-e,this.offset-n,this.offset+e,this.offset+n)}get rotation(){return Math.acos(this.uniforms.rotation.value.x)}set rotation(t){this.uniforms.rotation.value.set(Math.cos(t),Math.sin(t))}get offset(){return this._offset}set offset(t){this._offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.updateParams()}setSize(t,e){super.setSize(t,e),this.uniforms.aspect.value=t/e}},Vet=new TF,gm=null;function jet(){if(gm===null){const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);gm=new Mo,gm.setAttribute!==void 0?(gm.setAttribute("position",new Xa(t,3)),gm.setAttribute("uv",new Xa(e,2))):(gm.addAttribute("position",new Xa(t,3)),gm.addAttribute("uv",new Xa(e,2)))}return gm}var ag=class rMe{constructor(e="Pass",n=new NN,r=Vet){this.name=e,this.renderer=null,this.scene=n,this.camera=r,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const n=this.fullscreenMaterial;n!==null&&(n.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let n=this.screen;n!==null?n.material=e:(n=new is(jet(),e),n.frustumCulled=!1,this.scene===null&&(this.scene=new NN),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,n=sM){}render(e,n,r,i,o){throw new Error("Render method not implemented!")}setSize(e,n){}initialize(e,n,r){}dispose(){for(const e of Object.keys(this)){const n=this[e];(n instanceof Sl||n instanceof Ml||n instanceof qi||n instanceof rMe)&&this[e].dispose()}}},Het=class extends ag{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new nMe,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new Sl(1,1,{minFilter:no,magFilter:no,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,r,i){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==_l?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":QT(t)===Qo&&P0(this.renderTarget.texture,Qo))}},Get=class extends ag{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,r,i){const o=t.state.buffers.stencil;o.setLocked(!1),o.setTest(!1)}},Jwe=new xn,iMe=class extends ag{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,r,i){const o=this.overrideClearColor,u=this.overrideClearAlpha,d=t.getClearAlpha(),m=o!==null,v=u>=0;m?(t.getClearColor(Jwe),t.setClearColor(o,v?u:d)):v&&t.setClearAlpha(u),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),m?t.setClearColor(Jwe,d):v&&t.setClearAlpha(d)}},Wet=class extends ag{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new iMe,this.overrideMaterialManager=n===null?null:new t1e(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){const t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){const e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new t1e(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,r,i){const o=this.scene,u=this.camera,d=this.selection,m=u.layers.mask,v=o.background,x=t.shadowMap.autoUpdate,E=this.renderToScreen?null:e;d!==null&&u.layers.set(d.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(o.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(E),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,o,u):t.render(o,u),u.layers.mask=m,o.background=v,t.shadowMap.autoUpdate=x}};function e1e(t,e,n){for(const r of e){const i="$1"+t+r.charAt(0).toUpperCase()+r.slice(1),o=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const u of n.entries())u[1]!==null&&n.set(u[0],u[1].replace(o,i))}}function $et(t,e,n){let r=e.getFragmentShader(),i=e.getVertexShader();const o=r!==void 0&&/mainImage/.test(r),u=r!==void 0&&/mainUv/.test(r);if(n.attributes|=e.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(u&&n.attributes&C0.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!o&&!u)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const d=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,m=n.shaderParts;let v=m.get(Kr.FRAGMENT_HEAD)||"",x=m.get(Kr.FRAGMENT_MAIN_UV)||"",E=m.get(Kr.FRAGMENT_MAIN_IMAGE)||"",M=m.get(Kr.VERTEX_HEAD)||"",R=m.get(Kr.VERTEX_MAIN_SUPPORT)||"";const j=new Set,F=new Set;if(u&&(x+=`	${t}MainUv(UV);
`,n.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const P=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);R+=`	${t}MainSupport(`,R+=P?`vUv);
`:`);
`;for(const W of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const Z of W[1].split(/\s*,\s*/))n.varyings.add(Z),j.add(Z),F.add(Z);for(const W of i.matchAll(d))F.add(W[1])}for(const P of r.matchAll(d))F.add(P[1]);for(const P of e.defines.keys())F.add(P.replace(/\([\w\s,]*\)/g,""));for(const P of e.uniforms.keys())F.add(P);F.delete("while"),F.delete("for"),F.delete("if"),e.uniforms.forEach((P,W)=>n.uniforms.set(t+W.charAt(0).toUpperCase()+W.slice(1),P)),e.defines.forEach((P,W)=>n.defines.set(t+W.charAt(0).toUpperCase()+W.slice(1),P));const B=new Map([["fragment",r],["vertex",i]]);e1e(t,F,n.defines),e1e(t,F,B),r=B.get("fragment"),i=B.get("vertex");const z=e.blendMode;if(n.blendModes.set(z.blendFunction,z),o){e.inputColorSpace!==null&&e.inputColorSpace!==n.colorSpace&&(E+=e.inputColorSpace===Qo?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==QTe?n.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(n.colorSpace=e.inputColorSpace);const P=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;E+=`${t}MainImage(color0, UV, `,n.attributes&C0.DEPTH&&P.test(r)&&(E+="depth, ",n.readDepth=!0),E+=`color1);
	`;const W=t+"BlendOpacity";n.uniforms.set(W,z.opacity),E+=`color0 = blend${z.blendFunction}(color0, color1, ${W});

	`,v+=`uniform float ${W};

`}if(v+=r+`
`,i!==null&&(M+=i+`
`),m.set(Kr.FRAGMENT_HEAD,v),m.set(Kr.FRAGMENT_MAIN_UV,x),m.set(Kr.FRAGMENT_MAIN_IMAGE,E),m.set(Kr.VERTEX_HEAD,M),m.set(Kr.VERTEX_MAIN_SUPPORT,R),e.extensions!==null)for(const P of e.extensions)n.extensions.add(P)}}var m9=class extends ag{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new Fet(null,null,null,t),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(const e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(const e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort((e,n)=>n.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const t=new Jet;let e=0;for(const u of this.effects)if(u.blendMode.blendFunction===br.DST)t.attributes|=u.getAttributes()&C0.DEPTH;else{if(t.attributes&u.getAttributes()&C0.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${u.name})`);$et("e"+e++,u,t)}let n=t.shaderParts.get(Kr.FRAGMENT_HEAD),r=t.shaderParts.get(Kr.FRAGMENT_MAIN_IMAGE),i=t.shaderParts.get(Kr.FRAGMENT_MAIN_UV);const o=/\bblend\b/g;for(const u of t.blendModes.values())n+=u.getShaderCode().replace(o,`blend${u.blendFunction}`)+`
`;t.attributes&C0.DEPTH?(t.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,t.colorSpace===Qo&&(r+=`color0 = sRGBToLinear(color0);
	`),t.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(Kr.FRAGMENT_HEAD,n),t.shaderParts.set(Kr.FRAGMENT_MAIN_IMAGE,r),t.shaderParts.set(Kr.FRAGMENT_MAIN_UV,i);for(const[u,d]of t.shaderParts)d!==null&&t.shaderParts.set(u,d.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=sM){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,r,i){for(const o of this.effects)o.update(t,e,r);if(!this.skipRendering||this.renderToScreen){const o=this.fullscreenMaterial;o.inputBuffer=e.texture,o.time+=r*this.timeScale,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(const r of this.effects)r.initialize(t,e,n);this.updateMaterial(),n!==void 0&&n!==_l&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},Ket=class extends ag{constructor({kernelSize:t=MM.MEDIUM,resolutionScale:e=.5,width:n=rp.AUTO_SIZE,height:r=rp.AUTO_SIZE,resolutionX:i=n,resolutionY:o=r}={}){super("KawaseBlurPass"),this.renderTargetA=new Sl(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const u=this.resolution=new rp(this,i,o,e);u.addEventListener("change",d=>this.setSize(u.baseWidth,u.baseHeight)),this._blurMaterial=new tMe,this._blurMaterial.kernelSize=t,this.copyMaterial=new nMe}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const o=this.scene,u=this.camera,d=this.renderTargetA,m=this.renderTargetB,v=this.blurMaterial,x=v.kernelSequence;let E=e;this.fullscreenMaterial=v;for(let M=0,R=x.length;M<R;++M){const j=M&1?m:d;v.kernel=x[M],v.inputBuffer=E.texture,t.setRenderTarget(j),t.render(o,u),E=j}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=E.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(o,u)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==_l?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):QT(t)===Qo&&(P0(this.renderTargetA.texture,Qo),P0(this.renderTargetB.texture,Qo)))}static get AUTO_SIZE(){return rp.AUTO_SIZE}},Xet=class extends ag{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new iMe(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,r,i){const o=t.getContext(),u=t.state.buffers,d=this.scene,m=this.camera,v=this.clearPass,x=this.inverted?0:1,E=1-x;u.color.setMask(!1),u.depth.setMask(!1),u.color.setLocked(!0),u.depth.setLocked(!0),u.stencil.setTest(!0),u.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),u.stencil.setFunc(o.ALWAYS,x,4294967295),u.stencil.setClear(E),u.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?v.render(t,null):(v.render(t,e),v.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(d,m)):(t.setRenderTarget(e),t.render(d,m),t.setRenderTarget(n),t.render(d,m)),u.color.setLocked(!1),u.depth.setLocked(!1),u.stencil.setLocked(!1),u.stencil.setFunc(o.EQUAL,1,4294967295),u.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),u.stencil.setLocked(!0)}},qet=class extends Ket{constructor({offset:t=0,rotation:e=0,focusArea:n=.4,feather:r=.3,kernelSize:i=MM.MEDIUM,resolutionScale:o=.5,resolutionX:u=rp.AUTO_SIZE,resolutionY:d=rp.AUTO_SIZE}={}){super({kernelSize:i,resolutionScale:o,resolutionX:u,resolutionY:d}),this.blurMaterial=new zet({kernelSize:i,offset:t,rotation:e,focusArea:n,feather:r})}},g9=1/1e3,Yet=1e3,Zet=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*g9}get fixedDelta(){return this._fixedDelta*g9}set fixedDelta(t){this._fixedDelta=t*Yet}get elapsed(){return this._elapsed*g9}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(t!==void 0?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},Qet=class{constructor(t=null,{depthBuffer:e=!0,stencilBuffer:n=!1,multisampling:r=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,n,i,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Het,this.depthTexture=null,this.passes=[],this.timer=new Zet,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){const e=this.inputBuffer,n=this.multisampling;n>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,t!==null){const e=t.getSize(new cn),n=t.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===_l&&QT(t)===Qo&&(P0(this.inputBuffer.texture,Qo),P0(this.outputBuffer.texture,Qo),this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(e.width,e.height);for(const i of this.passes)i.initialize(t,n,r)}}replaceRenderer(t,e=!0){const n=this.renderer,r=n.domElement.parentNode;return this.setRenderer(t),e&&r!==null&&(r.removeChild(n.domElement),r.appendChild(t.domElement)),n}createDepthTexture(){const t=this.depthTexture=new P7;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=R0,t.type=jm):t.type=Qh,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,n,r){const i=this.renderer,o=i===null?new cn:i.getDrawingBufferSize(new cn),u={minFilter:no,magFilter:no,stencilBuffer:e,depthBuffer:t,type:n},d=new Sl(o.width,o.height,u);return r>0&&(d.ignoreDepthForMultisampleCopy=!1,d.samples=r),n===_l&&QT(i)===Qo&&P0(d.texture,Qo),d.texture.name="EffectComposer.Buffer",d.texture.generateMipmaps=!1,d}setMainScene(t){for(const e of this.passes)e.mainScene=t}setMainCamera(t){for(const e of this.passes)e.mainCamera=t}addPass(t,e){const n=this.passes,r=this.renderer,i=r.getDrawingBufferSize(new cn),o=r.getContext().getContextAttributes().alpha,u=this.inputBuffer.texture.type;if(t.setRenderer(r),t.setSize(i.width,i.height),t.initialize(r,o,u),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?n.splice(e,0,t):n.push(t),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const d=this.createDepthTexture();for(t of n)t.setDepthTexture(d)}else t.setDepthTexture(this.depthTexture)}removePass(t){const e=this.passes,n=e.indexOf(t);if(n!==-1&&e.splice(n,1).length>0){if(this.depthTexture!==null){const o=(d,m)=>d||m.needsDepthTexture;e.reduce(o,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){const e=this.renderer,n=this.copyPass;let r=this.inputBuffer,i=this.outputBuffer,o=!1,u,d,m;t===void 0&&(this.timer.update(),t=this.timer.delta);for(const v of this.passes)v.enabled&&(v.render(e,r,i,t,o),v.needsSwap&&(o&&(n.renderToScreen=v.renderToScreen,u=e.getContext(),d=e.state.buffers.stencil,d.setFunc(u.NOTEQUAL,1,4294967295),n.render(e,r,i,t,o),d.setFunc(u.EQUAL,1,4294967295)),m=r,r=i,i=m),v instanceof Xet?o=!0:v instanceof Get&&(o=!1))}setSize(t,e,n){const r=this.renderer,i=r.getSize(new cn);(t===void 0||e===void 0)&&(t=i.width,e=i.height),(i.width!==t||i.height!==e)&&r.setSize(t,e,n);const o=r.getDrawingBufferSize(new cn);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const u of this.passes)u.setSize(o.width,o.height)}reset(){const t=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=t}dispose(){for(const t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},Jet=class{constructor(){this.shaderParts=new Map([[Kr.FRAGMENT_HEAD,null],[Kr.FRAGMENT_MAIN_UV,null],[Kr.FRAGMENT_MAIN_IMAGE,null],[Kr.VERTEX_HEAD,null],[Kr.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=C0.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=tB}},v9=!1,t1e=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case xa:n=this.materialsFlatShadedDoubleSide;break;case Is:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case xa:n=this.materialsDoubleSide;break;case Is:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof Ta))return t.clone();const e=t.uniforms,n=new Map;for(const i in e){const o=e[i].value;o.isRenderTargetTexture&&(e[i].value=null,n.set(i,o))}const r=t.clone();for(const i of n)e[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){const e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(const n of e)n.uniforms=Object.assign({},t.uniforms),n.side=kd;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=Is,r}),this.materialsDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=xa,r}),this.materialsFlatShaded=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=Is,r}),this.materialsFlatShadedDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=xa,r})}}render(t,e,n){const r=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,v9){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(const o of i)o[0].material=o[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=i}t.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return v9}static set workaroundEnabled(t){v9=t}},vm=-1,rp=class extends Tl{constructor(t,e=vm,n=vm,r=1){super(),this.resizable=t,this.baseSize=new cn(1,1),this.preferredSize=new cn(e,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new cn,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,r=this.scale;e.width!==vm?n.width=e.width:e.height!==vm?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*r),e.height!==vm?n.height=e.height:e.width!==vm?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*r)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(vm),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return vm}},ett="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",ttt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",ntt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",rtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",itt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",stt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",ott="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",att="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",ltt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",utt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",ctt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",dtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",htt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",ptt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",ftt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",mtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",gtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",vtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",ytt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",btt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",_tt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",wtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",xtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",Stt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",Ett="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",Ctt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",Ptt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Ttt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",Mtt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",ktt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Att="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",Itt="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Rtt=new Map([[br.ADD,ett],[br.ALPHA,ttt],[br.AVERAGE,ntt],[br.COLOR,rtt],[br.COLOR_BURN,itt],[br.COLOR_DODGE,stt],[br.DARKEN,ott],[br.DIFFERENCE,att],[br.DIVIDE,ltt],[br.DST,null],[br.EXCLUSION,utt],[br.HARD_LIGHT,ctt],[br.HARD_MIX,dtt],[br.HUE,htt],[br.INVERT,ptt],[br.INVERT_RGB,ftt],[br.LIGHTEN,mtt],[br.LINEAR_BURN,gtt],[br.LINEAR_DODGE,vtt],[br.LINEAR_LIGHT,ytt],[br.LUMINOSITY,btt],[br.MULTIPLY,_tt],[br.NEGATION,wtt],[br.NORMAL,xtt],[br.OVERLAY,Stt],[br.PIN_LIGHT,Ett],[br.REFLECT,Ctt],[br.SATURATION,Ptt],[br.SCREEN,Ttt],[br.SOFT_LIGHT,Mtt],[br.SRC,ktt],[br.SUBTRACT,Att],[br.VIVID_LIGHT,Itt]]),Dtt=class extends Tl{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new Mi(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return Rtt.get(this.blendFunction)}},rB=class extends Tl{constructor(t,e,{attributes:n=C0.NONE,blendFunction:r=br.NORMAL,defines:i=new Map,uniforms:o=new Map,extensions:u=null,vertexShader:d=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=d,this.defines=i,this.uniforms=o,this.extensions=u,this.blendMode=new Dtt(r),this.blendMode.addEventListener("change",m=>this.setChanged()),this._inputColorSpace=tB,this._outputColorSpace=QTe}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=sM){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof Sl||e instanceof Ml||e instanceof qi||e instanceof ag)&&this[t].dispose()}}},Ott=`#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))
#define ONE_OVER_TWELVE 0.08333333333333333
varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;vec4 fxaa(const in vec4 inputColor,const in vec2 uv){float lumaCenter=luminance(inputColor.rgb);float lumaDown=luminance(texture2D(inputBuffer,vUvDown).rgb);float lumaUp=luminance(texture2D(inputBuffer,vUvUp).rgb);float lumaLeft=luminance(texture2D(inputBuffer,vUvLeft).rgb);float lumaRight=luminance(texture2D(inputBuffer,vUvRight).rgb);float lumaMin=min(lumaCenter,min(min(lumaDown,lumaUp),min(lumaLeft,lumaRight)));float lumaMax=max(lumaCenter,max(max(lumaDown,lumaUp),max(lumaLeft,lumaRight)));float lumaRange=lumaMax-lumaMin;if(lumaRange<max(EDGE_THRESHOLD_MIN,lumaMax*EDGE_THRESHOLD_MAX)){return inputColor;}float lumaDownLeft=luminance(texture2D(inputBuffer,vUvDownLeft).rgb);float lumaUpRight=luminance(texture2D(inputBuffer,vUvUpRight).rgb);float lumaUpLeft=luminance(texture2D(inputBuffer,vUvUpLeft).rgb);float lumaDownRight=luminance(texture2D(inputBuffer,vUvDownRight).rgb);float lumaDownUp=lumaDown+lumaUp;float lumaLeftRight=lumaLeft+lumaRight;float lumaLeftCorners=lumaDownLeft+lumaUpLeft;float lumaDownCorners=lumaDownLeft+lumaDownRight;float lumaRightCorners=lumaDownRight+lumaUpRight;float lumaUpCorners=lumaUpRight+lumaUpLeft;float edgeHorizontal=(abs(-2.0*lumaLeft+lumaLeftCorners)+abs(-2.0*lumaCenter+lumaDownUp)*2.0+abs(-2.0*lumaRight+lumaRightCorners));float edgeVertical=(abs(-2.0*lumaUp+lumaUpCorners)+abs(-2.0*lumaCenter+lumaLeftRight)*2.0+abs(-2.0*lumaDown+lumaDownCorners));bool isHorizontal=(edgeHorizontal>=edgeVertical);float stepLength=isHorizontal?texelSize.y:texelSize.x;float luma1=isHorizontal?lumaDown:lumaLeft;float luma2=isHorizontal?lumaUp:lumaRight;float gradient1=abs(luma1-lumaCenter);float gradient2=abs(luma2-lumaCenter);bool is1Steepest=gradient1>=gradient2;float gradientScaled=0.25*max(gradient1,gradient2);float lumaLocalAverage=0.0;if(is1Steepest){stepLength=-stepLength;lumaLocalAverage=0.5*(luma1+lumaCenter);}else{lumaLocalAverage=0.5*(luma2+lumaCenter);}vec2 currentUv=uv;if(isHorizontal){currentUv.y+=stepLength*0.5;}else{currentUv.x+=stepLength*0.5;}vec2 offset=isHorizontal?vec2(texelSize.x,0.0):vec2(0.0,texelSize.y);vec2 uv1=currentUv-offset*QUALITY(0);vec2 uv2=currentUv+offset*QUALITY(0);float lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);float lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd1-=lumaLocalAverage;lumaEnd2-=lumaLocalAverage;bool reached1=abs(lumaEnd1)>=gradientScaled;bool reached2=abs(lumaEnd2)>=gradientScaled;bool reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(1);}if(!reached2){uv2+=offset*QUALITY(1);}if(!reachedBoth){for(int i=2;i<SAMPLES;++i){if(!reached1){lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);lumaEnd1=lumaEnd1-lumaLocalAverage;}if(!reached2){lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd2=lumaEnd2-lumaLocalAverage;}reached1=abs(lumaEnd1)>=gradientScaled;reached2=abs(lumaEnd2)>=gradientScaled;reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(i);}if(!reached2){uv2+=offset*QUALITY(i);}if(reachedBoth){break;}}}float distance1=isHorizontal?(uv.x-uv1.x):(uv.y-uv1.y);float distance2=isHorizontal?(uv2.x-uv.x):(uv2.y-uv.y);bool isDirection1=distance1<distance2;float distanceFinal=min(distance1,distance2);float edgeThickness=(distance1+distance2);bool isLumaCenterSmaller=lumaCenter<lumaLocalAverage;bool correctVariation1=(lumaEnd1<0.0)!=isLumaCenterSmaller;bool correctVariation2=(lumaEnd2<0.0)!=isLumaCenterSmaller;bool correctVariation=isDirection1?correctVariation1:correctVariation2;float pixelOffset=-distanceFinal/edgeThickness+0.5;float finalOffset=correctVariation?pixelOffset:0.0;float lumaAverage=ONE_OVER_TWELVE*(2.0*(lumaDownUp+lumaLeftRight)+lumaLeftCorners+lumaRightCorners);float subPixelOffset1=clamp(abs(lumaAverage-lumaCenter)/lumaRange,0.0,1.0);float subPixelOffset2=(-2.0*subPixelOffset1+3.0)*subPixelOffset1*subPixelOffset1;float subPixelOffsetFinal=subPixelOffset2*subPixelOffset2*SUBPIXEL_QUALITY;finalOffset=max(finalOffset,subPixelOffsetFinal);vec2 finalUv=uv;if(isHorizontal){finalUv.y+=finalOffset*stepLength;}else{finalUv.x+=finalOffset*stepLength;}return texture2D(inputBuffer,finalUv);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=fxaa(inputColor,uv);}`,Ltt="varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;void mainSupport(const in vec2 uv){vUvDown=uv+vec2(0.0,-1.0)*texelSize;vUvUp=uv+vec2(0.0,1.0)*texelSize;vUvRight=uv+vec2(1.0,0.0)*texelSize;vUvLeft=uv+vec2(-1.0,0.0)*texelSize;vUvDownLeft=uv+vec2(-1.0,-1.0)*texelSize;vUvUpRight=uv+vec2(1.0,1.0)*texelSize;vUvUpLeft=uv+vec2(-1.0,1.0)*texelSize;vUvDownRight=uv+vec2(1.0,-1.0)*texelSize;}",Ntt=class extends rB{constructor({blendFunction:t=br.SRC}={}){super("FXAAEffect",Ott,{vertexShader:Ltt,blendFunction:t,defines:new Map([["EDGE_THRESHOLD_MIN","0.0312"],["EDGE_THRESHOLD_MAX","0.125"],["SUBPIXEL_QUALITY","0.75"],["SAMPLES","12"]])})}get minEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MIN"))}set minEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MIN",t.toFixed(12)),this.setChanged()}get maxEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MAX"))}set maxEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MAX",t.toFixed(12)),this.setChanged()}get subpixelQuality(){return Number(this.defines.get("SUBPIXEL_QUALITY"))}set subpixelQuality(t){this.defines.set("SUBPIXEL_QUALITY",t.toFixed(12)),this.setChanged()}get samples(){return Number(this.defines.get("SAMPLES"))}set samples(t){this.defines.set("SAMPLES",t.toFixed(0)),this.setChanged()}},Ftt=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,Btt=class extends rB{constructor({blendFunction:t=br.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",Ftt,{blendFunction:t}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}},Utt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform vec2 maskParams;varying vec2 vUv2;float linearGradientMask(const in float x){return step(maskParams.x,x)-step(maskParams.y,x);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float mask=linearGradientMask(vUv2.y);vec4 texel=texture2D(map,uv);outputColor=mix(texel,inputColor,mask);}`,ztt="uniform vec2 rotation;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));}",Vtt=class extends rB{constructor({blendFunction:t,offset:e=0,rotation:n=0,focusArea:r=.4,feather:i=.3,kernelSize:o=MM.MEDIUM,resolutionScale:u=.5,resolutionX:d=rp.AUTO_SIZE,resolutionY:m=rp.AUTO_SIZE}={}){super("TiltShiftEffect",Utt,{vertexShader:ztt,blendFunction:t,uniforms:new Map([["rotation",new Mi(new cn)],["maskParams",new Mi(new cn)],["map",new Mi(null)]])}),this._offset=e,this._focusArea=r,this._feather=i,this.renderTarget=new Sl(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="TiltShift.Target",this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new qet({kernelSize:o,resolutionScale:u,resolutionX:d,resolutionY:m,offset:e,rotation:n,focusArea:r,feather:i});const v=this.resolution=new rp(this,d,m,u);v.addEventListener("change",x=>this.setSize(v.baseWidth,v.baseHeight)),this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.get("maskParams").value,e=Math.max(this.focusArea-this.feather,0);t.set(this.offset-e,this.offset+e)}get rotation(){return Math.acos(this.uniforms.get("rotation").value.x)}set rotation(t){this.uniforms.get("rotation").value.set(Math.cos(t),Math.sin(t)),this.blurPass.blurMaterial.rotation=t}get offset(){return this._offset}set offset(t){this._offset=t,this.blurPass.blurMaterial.offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.blurPass.blurMaterial.focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.blurPass.blurMaterial.feather=t,this.updateParams()}get bias(){return 0}set bias(t){}update(t,e,n){this.blurPass.render(t,e,this.renderTarget)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n)}initialize(t,e,n){this.blurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,QT(t)===Qo&&P0(this.renderTarget.texture,Qo))}},jtt=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,Htt=class extends rB{constructor({blendFunction:t,technique:e=IL.DEFAULT,eskil:n=!1,offset:r=.5,darkness:i=.5}={}){super("VignetteEffect",jtt,{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new Mi(r)],["darkness",new Mi(i)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===IL.ESKIL}set eskil(t){this.technique=t?IL.ESKIL:IL.DEFAULT}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}};const Gtt=`varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,Wtt=`uniform float time;
uniform float opacity;
uniform vec2 resolution;
uniform vec3 diffuse;
uniform vec3 mouse;
uniform sampler2D map;
varying vec2 vUv;

#define MIN_ALPHA 2.0 / 255.0

void main() {
  if (opacity < MIN_ALPHA) discard;
  vec2 imageUV = vUv * 10.0 + (mouse.xy * mouse.z);
  vec3 image = texture2D(map, imageUV).rgb;
  vec3 col = image * diffuse;
  col += (sin(time * 0.1) * 0.5 + 0.5) * 0.2;
  col = vec3(resolution, 0.0);
  gl_FragColor = vec4(col, opacity);
}`,$tt="data:image/png;base64,R0lGODlhCAAIAIAAAP///wAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OTc3NywgMjAyMy8wNi8yNS0yMzo1NzoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjIgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjVENjQyODM4QTYzMTFFRUJFQTBFOTJFNjA1OTQ5N0YiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjVENjQyODQ4QTYzMTFFRUJFQTBFOTJFNjA1OTQ5N0YiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2NUQ2NDI4MThBNjMxMUVFQkVBMEU5MkU2MDU5NDk3RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2NUQ2NDI4MjhBNjMxMUVFQkVBMEU5MkU2MDU5NDk3RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAAAAAAALAAAAAAIAAgAAAIOjH8AprzRkHyspqSoNAUAOw==";class sMe extends Ta{constructor(){super({vertexShader:Gtt,fragmentShader:Wtt,name:"ExampleScene/SimpleShader",transparent:!0,uniforms:{diffuse:{value:new xn(16777215)},opacity:{value:1},time:{value:0},map:{value:null},resolution:{value:new cn},mouse:{value:new Be},testM3:{value:new fr},testM4:{value:new Bn}}}),UN($tt).then(e=>{this.uniforms.map.value=e})}update(e){this.uniforms.opacity.value=this.opacity,this.uniforms.time.value+=e}}function Ktt(t){const e=new Map,n=new Map,r=t.clone();return oMe(t,r,function(i,o){e.set(o,i),n.set(i,o)}),r.traverse(function(i){if(!i.isSkinnedMesh)return;const o=i,u=e.get(i),d=u.skeleton.bones;o.skeleton=u.skeleton.clone(),o.bindMatrix.copy(u.bindMatrix),o.skeleton.bones=d.map(function(m){return n.get(m)}),o.bind(o.skeleton,o.bindMatrix)}),r}function oMe(t,e,n){n(t,e);for(let r=0;r<t.children.length;r++)oMe(t.children[r],e.children[r],n)}/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var n1e=function(t){return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};try{URL.revokeObjectURL(n1e(""))}catch{n1e=function(e){return"data:application/javascript;charset=UTF-8,"+encodeURI(e)}}var mu=Uint8Array,Rm=Uint16Array,c$=Uint32Array,aMe=new mu([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lMe=new mu([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Xtt=new mu([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),uMe=function(t,e){for(var n=new Rm(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new c$(n[30]),r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},cMe=uMe(aMe,2),dMe=cMe[0],qtt=cMe[1];dMe[28]=258,qtt[258]=28;var Ytt=uMe(lMe,0),Ztt=Ytt[0],d$=new Rm(32768);for(var Ai=0;Ai<32768;++Ai){var ym=(Ai&43690)>>>1|(Ai&21845)<<1;ym=(ym&52428)>>>2|(ym&13107)<<2,ym=(ym&61680)>>>4|(ym&3855)<<4,d$[Ai]=((ym&65280)>>>8|(ym&255)<<8)>>>1}var lT=function(t,e,n){for(var r=t.length,i=0,o=new Rm(e);i<r;++i)++o[t[i]-1];var u=new Rm(e);for(i=0;i<e;++i)u[i]=u[i-1]+o[i-1]<<1;var d;if(n){d=new Rm(1<<e);var m=15-e;for(i=0;i<r;++i)if(t[i])for(var v=i<<4|t[i],x=e-t[i],E=u[t[i]-1]++<<x,M=E|(1<<x)-1;E<=M;++E)d[d$[E]>>>m]=v}else for(d=new Rm(r),i=0;i<r;++i)t[i]&&(d[i]=d$[u[t[i]-1]++]>>>15-t[i]);return d},kM=new mu(288);for(var Ai=0;Ai<144;++Ai)kM[Ai]=8;for(var Ai=144;Ai<256;++Ai)kM[Ai]=9;for(var Ai=256;Ai<280;++Ai)kM[Ai]=7;for(var Ai=280;Ai<288;++Ai)kM[Ai]=8;var hMe=new mu(32);for(var Ai=0;Ai<32;++Ai)hMe[Ai]=5;var Qtt=lT(kM,9,1),Jtt=lT(hMe,5,1),y9=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},mc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},b9=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},ent=function(t){return(t/8|0)+(t&7&&1)},tnt=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof Rm?Rm:t instanceof c$?c$:mu)(n-e);return r.set(t.subarray(e,n)),r},nnt=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new mu(0);var i=!e||n,o=!n||n.i;n||(n={}),e||(e=new mu(r*3));var u=function(Ot){var Gt=e.length;if(Ot>Gt){var tn=new mu(Math.max(Gt*2,Ot));tn.set(e),e=tn}},d=n.f||0,m=n.p||0,v=n.b||0,x=n.l,E=n.d,M=n.m,R=n.n,j=r*8;do{if(!x){n.f=d=mc(t,m,1);var F=mc(t,m+1,3);if(m+=3,F)if(F==1)x=Qtt,E=Jtt,M=9,R=5;else if(F==2){var W=mc(t,m,31)+257,Z=mc(t,m+10,15)+4,ge=W+mc(t,m+5,31)+1;m+=14;for(var X=new mu(ge),pe=new mu(19),ye=0;ye<Z;++ye)pe[Xtt[ye]]=mc(t,m+ye*3,7);m+=Z*3;for(var te=y9(pe),ie=(1<<te)-1,Pe=lT(pe,te,1),ye=0;ye<ge;){var _t=Pe[mc(t,m,ie)];m+=_t&15;var B=_t>>>4;if(B<16)X[ye++]=B;else{var Tt=0,de=0;for(B==16?(de=3+mc(t,m,3),m+=2,Tt=X[ye-1]):B==17?(de=3+mc(t,m,7),m+=3):B==18&&(de=11+mc(t,m,127),m+=7);de--;)X[ye++]=Tt}}var ot=X.subarray(0,W),Me=X.subarray(W);M=y9(ot),R=y9(Me),x=lT(ot,M,1),E=lT(Me,R,1)}else throw"invalid block type";else{var B=ent(m)+4,z=t[B-4]|t[B-3]<<8,P=B+z;if(P>r){if(o)throw"unexpected EOF";break}i&&u(v+z),e.set(t.subarray(B,P),v),n.b=v+=z,n.p=m=P*8;continue}if(m>j){if(o)throw"unexpected EOF";break}}i&&u(v+131072);for(var wt=(1<<M)-1,Ge=(1<<R)-1,it=m;;it=m){var Tt=x[b9(t,m)&wt],Qe=Tt>>>4;if(m+=Tt&15,m>j){if(o)throw"unexpected EOF";break}if(!Tt)throw"invalid length/literal";if(Qe<256)e[v++]=Qe;else if(Qe==256){it=m,x=null;break}else{var ut=Qe-254;if(Qe>264){var ye=Qe-257,je=aMe[ye];ut=mc(t,m,(1<<je)-1)+dMe[ye],m+=je}var bt=E[b9(t,m)&Ge],Fe=bt>>>4;if(!bt)throw"invalid distance";m+=bt&15;var Me=Ztt[Fe];if(Fe>3){var je=lMe[Fe];Me+=b9(t,m)&(1<<je)-1,m+=je}if(m>j){if(o)throw"unexpected EOF";break}i&&u(v+131072);for(var at=v+ut;v<at;v+=4)e[v]=e[v-Me],e[v+1]=e[v+1-Me],e[v+2]=e[v+2-Me],e[v+3]=e[v+3-Me];v=at}}n.l=x,n.p=it,n.b=v,x&&(d=1,n.m=M,n.d=E,n.n=R)}while(!d);return v==e.length?e:tnt(e,0,v)},rnt=new mu(0),int=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function snt(t,e){return nnt((int(t),t.subarray(2,-4)),e)}var ont=typeof TextDecoder<"u"&&new TextDecoder,ant=0;try{ont.decode(rnt,{stream:!0}),ant=1}catch{}function pMe(t,e,n){const r=n.length-t-1;if(e>=n[r])return r-1;if(e<=n[t])return t;let i=t,o=r,u=Math.floor((i+o)/2);for(;e<n[u]||e>=n[u+1];)e<n[u]?o=u:i=u,u=Math.floor((i+o)/2);return u}function lnt(t,e,n,r){const i=[],o=[],u=[];i[0]=1;for(let d=1;d<=n;++d){o[d]=e-r[t+1-d],u[d]=r[t+d]-e;let m=0;for(let v=0;v<d;++v){const x=u[v+1],E=o[d-v],M=i[v]/(x+E);i[v]=m+x*M,m=E*M}i[d]=m}return i}function unt(t,e,n,r){const i=pMe(t,r,e),o=lnt(i,r,t,e),u=new Ar(0,0,0,0);for(let d=0;d<=t;++d){const m=n[i-t+d],v=o[d],x=m.w*v;u.x+=m.x*x,u.y+=m.y*x,u.z+=m.z*x,u.w+=m.w*v}return u}function cnt(t,e,n,r,i){const o=[];for(let E=0;E<=n;++E)o[E]=0;const u=[];for(let E=0;E<=r;++E)u[E]=o.slice(0);const d=[];for(let E=0;E<=n;++E)d[E]=o.slice(0);d[0][0]=1;const m=o.slice(0),v=o.slice(0);for(let E=1;E<=n;++E){m[E]=e-i[t+1-E],v[E]=i[t+E]-e;let M=0;for(let R=0;R<E;++R){const j=v[R+1],F=m[E-R];d[E][R]=j+F;const B=d[R][E-1]/d[E][R];d[R][E]=M+j*B,M=F*B}d[E][E]=M}for(let E=0;E<=n;++E)u[0][E]=d[E][n];for(let E=0;E<=n;++E){let M=0,R=1;const j=[];for(let F=0;F<=n;++F)j[F]=o.slice(0);j[0][0]=1;for(let F=1;F<=r;++F){let B=0;const z=E-F,P=n-F;E>=F&&(j[R][0]=j[M][0]/d[P+1][z],B=j[R][0]*d[z][P]);const W=z>=-1?1:-z,Z=E-1<=P?F-1:n-E;for(let X=W;X<=Z;++X)j[R][X]=(j[M][X]-j[M][X-1])/d[P+1][z+X],B+=j[R][X]*d[z+X][P];E<=P&&(j[R][F]=-j[M][F-1]/d[P+1][E],B+=j[R][F]*d[E][P]),u[F][E]=B;const ge=M;M=R,R=ge}}let x=n;for(let E=1;E<=r;++E){for(let M=0;M<=n;++M)u[E][M]*=x;x*=n-E}return u}function dnt(t,e,n,r,i){const o=i<t?i:t,u=[],d=pMe(t,r,e),m=cnt(d,r,t,o,e),v=[];for(let x=0;x<n.length;++x){const E=n[x].clone(),M=E.w;E.x*=M,E.y*=M,E.z*=M,v[x]=E}for(let x=0;x<=o;++x){const E=v[d-t].clone().multiplyScalar(m[x][0]);for(let M=1;M<=t;++M)E.add(v[d-t+M].clone().multiplyScalar(m[x][M]));u[x]=E}for(let x=o+1;x<=i+1;++x)u[x]=new Ar(0,0,0);return u}function hnt(t,e){let n=1;for(let i=2;i<=t;++i)n*=i;let r=1;for(let i=2;i<=e;++i)r*=i;for(let i=2;i<=t-e;++i)r*=i;return n/r}function pnt(t){const e=t.length,n=[],r=[];for(let o=0;o<e;++o){const u=t[o];n[o]=new Be(u.x,u.y,u.z),r[o]=u.w}const i=[];for(let o=0;o<e;++o){const u=n[o].clone();for(let d=1;d<=o;++d)u.sub(i[o-d].clone().multiplyScalar(hnt(o,d)*r[d]));i[o]=u.divideScalar(r[0])}return i}function fnt(t,e,n,r,i){const o=dnt(t,e,n,r,i);return pnt(o)}class mnt extends j6e{constructor(e,n,r,i,o){super(),this.degree=e,this.knots=n,this.controlPoints=[],this.startKnot=i||0,this.endKnot=o||this.knots.length-1;for(let u=0;u<r.length;++u){const d=r[u];this.controlPoints[u]=new Ar(d.x,d.y,d.z,d.w)}}getPoint(e,n=new Be){const r=n,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=unt(this.degree,this.knots,this.controlPoints,i);return o.w!==1&&o.divideScalar(o.w),r.set(o.x,o.y,o.z)}getTangent(e,n=new Be){const r=n,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=fnt(this.degree,this.knots,this.controlPoints,i,1);return r.copy(o[1]).normalize(),r}}let vr,_s,ya;class gnt extends qm{constructor(e){super(e)}load(e,n,r,i){const o=this,u=o.path===""?T8e.extractUrlBase(e):o.path,d=new _8e(this.manager);d.setPath(o.path),d.setResponseType("arraybuffer"),d.setRequestHeader(o.requestHeader),d.setWithCredentials(o.withCredentials),d.load(e,function(m){try{n(o.parse(m,u))}catch(v){i?i(v):console.error(v),o.manager.itemError(e)}},r,i)}parse(e,n){if(xnt(e))vr=new wnt().parse(e);else{const i=vMe(e);if(!Snt(i))throw new Error("THREE.FBXLoader: Unknown format.");if(i1e(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i1e(i));vr=new _nt().parse(i)}const r=new oEe(this.manager).setPath(this.resourcePath||n).setCrossOrigin(this.crossOrigin);return new vnt(r,this.manager).parse(vr)}}class vnt{constructor(e,n){this.textureLoader=e,this.manager=n}parse(){_s=this.parseConnections();const e=this.parseImages(),n=this.parseTextures(e),r=this.parseMaterials(n),i=this.parseDeformers(),o=new ynt().parse(i);return this.parseScene(i,o,r),ya}parseConnections(){const e=new Map;return"Connections"in vr&&vr.Connections.connections.forEach(function(r){const i=r[0],o=r[1],u=r[2];e.has(i)||e.set(i,{parents:[],children:[]});const d={ID:o,relationship:u};e.get(i).parents.push(d),e.has(o)||e.set(o,{parents:[],children:[]});const m={ID:i,relationship:u};e.get(o).children.push(m)}),e}parseImages(){const e={},n={};if("Video"in vr.Objects){const r=vr.Objects.Video;for(const i in r){const o=r[i],u=parseInt(i);if(e[u]=o.RelativeFilename||o.Filename,"Content"in o){const d=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,m=typeof o.Content=="string"&&o.Content!=="";if(d||m){const v=this.parseImage(r[i]);n[o.RelativeFilename||o.Filename]=v}}}}for(const r in e){const i=e[r];n[i]!==void 0?e[r]=n[i]:e[r]=e[r].split("\\").pop()}return e}parseImage(e){const n=e.Content,r=e.RelativeFilename||e.Filename,i=r.slice(r.lastIndexOf(".")+1).toLowerCase();let o;switch(i){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",r),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+i+'" is not supported.');return}if(typeof n=="string")return"data:"+o+";base64,"+n;{const u=new Uint8Array(n);return window.URL.createObjectURL(new Blob([u],{type:o}))}}parseTextures(e){const n=new Map;if("Texture"in vr.Objects){const r=vr.Objects.Texture;for(const i in r){const o=this.parseTexture(r[i],e);n.set(parseInt(i),o)}}return n}parseTexture(e,n){const r=this.loadTexture(e,n);r.ID=e.id,r.name=e.attrName;const i=e.WrapModeU,o=e.WrapModeV,u=i!==void 0?i.value:0,d=o!==void 0?o.value:0;if(r.wrapS=u===0?pp:vl,r.wrapT=d===0?pp:vl,"Scaling"in e){const m=e.Scaling.value;r.repeat.x=m[0],r.repeat.y=m[1]}if("Translation"in e){const m=e.Translation.value;r.offset.x=m[0],r.offset.y=m[1]}return r}loadTexture(e,n){let r;const i=this.textureLoader.path,o=_s.get(e.id).children;o!==void 0&&o.length>0&&n[o[0].ID]!==void 0&&(r=n[o[0].ID],(r.indexOf("blob:")===0||r.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let u;const d=e.FileName.slice(-3).toLowerCase();if(d==="tga"){const m=this.manager.getHandler(".tga");m===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),u=new qi):(m.setPath(this.textureLoader.path),u=m.load(r))}else if(d==="dds"){const m=this.manager.getHandler(".dds");m===null?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",e.RelativeFilename),u=new qi):(m.setPath(this.textureLoader.path),u=m.load(r))}else d==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),u=new qi):u=this.textureLoader.load(r);return this.textureLoader.setPath(i),u}parseMaterials(e){const n=new Map;if("Material"in vr.Objects){const r=vr.Objects.Material;for(const i in r){const o=this.parseMaterial(r[i],e);o!==null&&n.set(parseInt(i),o)}}return n}parseMaterial(e,n){const r=e.id,i=e.attrName;let o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!_s.has(r))return null;const u=this.parseParameters(e,n,r);let d;switch(o.toLowerCase()){case"phong":d=new tT;break;case"lambert":d=new u8e;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),d=new tT;break}return d.setValues(u),d.name=i,d}parseParameters(e,n,r){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=new xn().fromArray(e.Diffuse.value).convertSRGBToLinear():e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(i.color=new xn().fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=new xn().fromArray(e.Emissive.value).convertSRGBToLinear():e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(i.emissive=new xn().fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=new xn().fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&e.SpecularColor.type==="Color"&&(i.specular=new xn().fromArray(e.SpecularColor.value).convertSRGBToLinear());const o=this;return _s.get(r).children.forEach(function(u){const d=u.relationship;switch(d){case"Bump":i.bumpMap=o.getTexture(n,u.ID);break;case"Maya|TEX_ao_map":i.aoMap=o.getTexture(n,u.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=o.getTexture(n,u.ID),i.map!==void 0&&(i.map.colorSpace=rs);break;case"DisplacementColor":i.displacementMap=o.getTexture(n,u.ID);break;case"EmissiveColor":i.emissiveMap=o.getTexture(n,u.ID),i.emissiveMap!==void 0&&(i.emissiveMap.colorSpace=rs);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=o.getTexture(n,u.ID);break;case"ReflectionColor":i.envMap=o.getTexture(n,u.ID),i.envMap!==void 0&&(i.envMap.mapping=TN,i.envMap.colorSpace=rs);break;case"SpecularColor":i.specularMap=o.getTexture(n,u.ID),i.specularMap!==void 0&&(i.specularMap.colorSpace=rs);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=o.getTexture(n,u.ID),i.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",d);break}}),i}getTexture(e,n){return"LayeredTexture"in vr.Objects&&n in vr.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=_s.get(n).children[0].ID),e.get(n)}parseDeformers(){const e={},n={};if("Deformer"in vr.Objects){const r=vr.Objects.Deformer;for(const i in r){const o=r[i],u=_s.get(parseInt(i));if(o.attrType==="Skin"){const d=this.parseSkeleton(u,r);d.ID=i,u.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),d.geometryID=u.parents[0].ID,e[i]=d}else if(o.attrType==="BlendShape"){const d={id:i};d.rawTargets=this.parseMorphTargets(u,r),d.id=i,u.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[i]=d}}}return{skeletons:e,morphTargets:n}}parseSkeleton(e,n){const r=[];return e.children.forEach(function(i){const o=n[i.ID];if(o.attrType!=="Cluster")return;const u={ID:i.ID,indices:[],weights:[],transformLink:new Bn().fromArray(o.TransformLink.a)};"Indexes"in o&&(u.indices=o.Indexes.a,u.weights=o.Weights.a),r.push(u)}),{rawBones:r,bones:[]}}parseMorphTargets(e,n){const r=[];for(let i=0;i<e.children.length;i++){const o=e.children[i],u=n[o.ID],d={name:u.attrName,initialWeight:u.DeformPercent,id:u.id,fullWeights:u.FullWeights.a};if(u.attrType!=="BlendShapeChannel")return;d.geoID=_s.get(parseInt(o.ID)).children.filter(function(m){return m.relationship===void 0})[0].ID,r.push(d)}return r}parseScene(e,n,r){ya=new v0;const i=this.parseModels(e.skeletons,n,r),o=vr.Objects.Model,u=this;i.forEach(function(m){const v=o[m.ID];u.setLookAtProperties(m,v),_s.get(m.ID).parents.forEach(function(E){const M=i.get(E.ID);M!==void 0&&M.add(m)}),m.parent===null&&ya.add(m)}),this.bindSkeleton(e.skeletons,n,i),this.addGlobalSceneSettings(),ya.traverse(function(m){if(m.userData.transformData){m.parent&&(m.userData.transformData.parentMatrix=m.parent.matrix,m.userData.transformData.parentMatrixWorld=m.parent.matrixWorld);const v=mMe(m.userData.transformData);m.applyMatrix4(v),m.updateWorldMatrix()}});const d=new bnt().parse();ya.children.length===1&&ya.children[0].isGroup&&(ya.children[0].animations=d,ya=ya.children[0]),ya.animations=d}parseModels(e,n,r){const i=new Map,o=vr.Objects.Model;for(const u in o){const d=parseInt(u),m=o[u],v=_s.get(d);let x=this.buildSkeleton(v,e,d,m.attrName);if(!x){switch(m.attrType){case"Camera":x=this.createCamera(v);break;case"Light":x=this.createLight(v);break;case"Mesh":x=this.createMesh(v,n,r);break;case"NurbsCurve":x=this.createCurve(v,n);break;case"LimbNode":case"Root":x=new MW;break;case"Null":default:x=new v0;break}x.name=m.attrName?Nr.sanitizeNodeName(m.attrName):"",x.userData.originalName=m.attrName,x.ID=d}this.getTransformData(x,m),i.set(d,x)}return i}buildSkeleton(e,n,r,i){let o=null;return e.parents.forEach(function(u){for(const d in n){const m=n[d];m.rawBones.forEach(function(v,x){if(v.ID===u.ID){const E=o;o=new MW,o.matrixWorld.copy(v.transformLink),o.name=i?Nr.sanitizeNodeName(i):"",o.userData.originalName=i,o.ID=r,m.bones[x]=o,E!==null&&o.add(E)}})}}),o}createCamera(e){let n,r;if(e.children.forEach(function(i){const o=vr.Objects.NodeAttribute[i.ID];o!==void 0&&(r=o)}),r===void 0)n=new qr;else{let i=0;r.CameraProjectionType!==void 0&&r.CameraProjectionType.value===1&&(i=1);let o=1;r.NearPlane!==void 0&&(o=r.NearPlane.value/1e3);let u=1e3;r.FarPlane!==void 0&&(u=r.FarPlane.value/1e3);let d=window.innerWidth,m=window.innerHeight;r.AspectWidth!==void 0&&r.AspectHeight!==void 0&&(d=r.AspectWidth.value,m=r.AspectHeight.value);const v=d/m;let x=45;r.FieldOfView!==void 0&&(x=r.FieldOfView.value);const E=r.FocalLength?r.FocalLength.value:null;switch(i){case 0:n=new Vs(x,v,o,u),E!==null&&n.setFocalLength(E);break;case 1:n=new AT(-d/2,d/2,m/2,-m/2,o,u);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+i+"."),n=new qr;break}}return n}createLight(e){let n,r;if(e.children.forEach(function(i){const o=vr.Objects.NodeAttribute[i.ID];o!==void 0&&(r=o)}),r===void 0)n=new qr;else{let i;r.LightType===void 0?i=0:i=r.LightType.value;let o=16777215;r.Color!==void 0&&(o=new xn().fromArray(r.Color.value).convertSRGBToLinear());let u=r.Intensity===void 0?1:r.Intensity.value/100;r.CastLightOnObject!==void 0&&r.CastLightOnObject.value===0&&(u=0);let d=0;r.FarAttenuationEnd!==void 0&&(r.EnableFarAttenuation!==void 0&&r.EnableFarAttenuation.value===0?d=0:d=r.FarAttenuationEnd.value);const m=1;switch(i){case 0:n=new Tbe(o,u,d,m);break;case 1:n=new O7(o,u);break;case 2:let v=Math.PI/3;r.InnerAngle!==void 0&&(v=qo.degToRad(r.InnerAngle.value));let x=0;r.OuterAngle!==void 0&&(x=qo.degToRad(r.OuterAngle.value),x=Math.max(x,1)),n=new D7(o,u,d,v,x,m);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),n=new Tbe(o,u);break}r.CastShadows!==void 0&&r.CastShadows.value===1&&(n.castShadow=!0)}return n}createMesh(e,n,r){let i,o=null,u=null;const d=[];return e.children.forEach(function(m){n.has(m.ID)&&(o=n.get(m.ID)),r.has(m.ID)&&d.push(r.get(m.ID))}),d.length>1?u=d:d.length>0?u=d[0]:(u=new tT({name:qm.DEFAULT_MATERIAL_NAME,color:13421772}),d.push(u)),"color"in o.attributes&&d.forEach(function(m){m.vertexColors=!0}),o.FBX_Deformer?(i=new qSe(o,u),i.normalizeSkinWeights()):i=new is(o,u),i}createCurve(e,n){const r=e.children.reduce(function(o,u){return n.has(u.ID)&&(o=n.get(u.ID)),o},null),i=new aM({name:qm.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new YSe(r,i)}getTransformData(e,n){const r={};"InheritType"in n&&(r.inheritType=parseInt(n.InheritType.value)),"RotationOrder"in n?r.eulerOrder=gMe(n.RotationOrder.value):r.eulerOrder="ZYX","Lcl_Translation"in n&&(r.translation=n.Lcl_Translation.value),"PreRotation"in n&&(r.preRotation=n.PreRotation.value),"Lcl_Rotation"in n&&(r.rotation=n.Lcl_Rotation.value),"PostRotation"in n&&(r.postRotation=n.PostRotation.value),"Lcl_Scaling"in n&&(r.scale=n.Lcl_Scaling.value),"ScalingOffset"in n&&(r.scalingOffset=n.ScalingOffset.value),"ScalingPivot"in n&&(r.scalingPivot=n.ScalingPivot.value),"RotationOffset"in n&&(r.rotationOffset=n.RotationOffset.value),"RotationPivot"in n&&(r.rotationPivot=n.RotationPivot.value),e.userData.transformData=r}setLookAtProperties(e,n){"LookAtProperty"in n&&_s.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const o=vr.Objects.Model[i.ID];if("Lcl_Translation"in o){const u=o.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(u),ya.add(e.target)):e.lookAt(new Be().fromArray(u))}}})}bindSkeleton(e,n,r){const i=this.parsePoseNodes();for(const o in e){const u=e[o];_s.get(parseInt(u.ID)).parents.forEach(function(m){if(n.has(m.ID)){const v=m.ID;_s.get(v).parents.forEach(function(E){r.has(E.ID)&&r.get(E.ID).bind(new M7(u.bones),i[E.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in vr.Objects){const n=vr.Objects.Pose;for(const r in n)if(n[r].attrType==="BindPose"&&n[r].NbPoseNodes>0){const i=n[r].PoseNode;Array.isArray(i)?i.forEach(function(o){e[o.Node]=new Bn().fromArray(o.Matrix.a)}):e[i.Node]=new Bn().fromArray(i.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in vr){if("AmbientColor"in vr.GlobalSettings){const e=vr.GlobalSettings.AmbientColor.value,n=e[0],r=e[1],i=e[2];if(n!==0||r!==0||i!==0){const o=new xn(n,r,i).convertSRGBToLinear();ya.add(new P8e(o,1))}}"UnitScaleFactor"in vr.GlobalSettings&&(ya.userData.unitScaleFactor=vr.GlobalSettings.UnitScaleFactor.value)}}}class ynt{constructor(){this.negativeMaterialIndices=!1}parse(e){const n=new Map;if("Geometry"in vr.Objects){const r=vr.Objects.Geometry;for(const i in r){const o=_s.get(parseInt(i)),u=this.parseGeometry(o,r[i],e);n.set(parseInt(i),u)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),n}parseGeometry(e,n,r){switch(n.attrType){case"Mesh":return this.parseMeshGeometry(e,n,r);case"NurbsCurve":return this.parseNurbsGeometry(n)}}parseMeshGeometry(e,n,r){const i=r.skeletons,o=[],u=e.parents.map(function(E){return vr.Objects.Model[E.ID]});if(u.length===0)return;const d=e.children.reduce(function(E,M){return i[M.ID]!==void 0&&(E=i[M.ID]),E},null);e.children.forEach(function(E){r.morphTargets[E.ID]!==void 0&&o.push(r.morphTargets[E.ID])});const m=u[0],v={};"RotationOrder"in m&&(v.eulerOrder=gMe(m.RotationOrder.value)),"InheritType"in m&&(v.inheritType=parseInt(m.InheritType.value)),"GeometricTranslation"in m&&(v.translation=m.GeometricTranslation.value),"GeometricRotation"in m&&(v.rotation=m.GeometricRotation.value),"GeometricScaling"in m&&(v.scale=m.GeometricScaling.value);const x=mMe(v);return this.genGeometry(n,d,o,x)}genGeometry(e,n,r,i){const o=new Mo;e.attrName&&(o.name=e.attrName);const u=this.parseGeoNode(e,n),d=this.genBuffers(u),m=new ki(d.vertex,3);if(m.applyMatrix4(i),o.setAttribute("position",m),d.colors.length>0&&o.setAttribute("color",new ki(d.colors,3)),n&&(o.setAttribute("skinIndex",new S7(d.weightsIndices,4)),o.setAttribute("skinWeight",new ki(d.vertexWeights,4)),o.FBX_Deformer=n),d.normal.length>0){const v=new fr().getNormalMatrix(i),x=new ki(d.normal,3);x.applyNormalMatrix(v),o.setAttribute("normal",x)}if(d.uvs.forEach(function(v,x){const E=x===0?"uv":`uv${x}`;o.setAttribute(E,new ki(d.uvs[x],2))}),u.material&&u.material.mappingType!=="AllSame"){let v=d.materialIndex[0],x=0;if(d.materialIndex.forEach(function(E,M){E!==v&&(o.addGroup(x,M-x,v),v=E,x=M)}),o.groups.length>0){const E=o.groups[o.groups.length-1],M=E.start+E.count;M!==d.materialIndex.length&&o.addGroup(M,d.materialIndex.length-M,v)}o.groups.length===0&&o.addGroup(0,d.materialIndex.length,d.materialIndex[0])}return this.addMorphTargets(o,e,r,i),o}parseGeoNode(e,n){const r={};if(r.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],r.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];let i=0;for(;e.LayerElementUV[i];)e.LayerElementUV[i].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[i])),i++}return r.weightTable={},n!==null&&(r.skeleton=n,n.rawBones.forEach(function(i,o){i.indices.forEach(function(u,d){r.weightTable[u]===void 0&&(r.weightTable[u]=[]),r.weightTable[u].push({id:o,weight:i.weights[d]})})})),r}genBuffers(e){const n={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let r=0,i=0,o=!1,u=[],d=[],m=[],v=[],x=[],E=[];const M=this;return e.vertexIndices.forEach(function(R,j){let F,B=!1;R<0&&(R=R^-1,B=!0);let z=[],P=[];if(u.push(R*3,R*3+1,R*3+2),e.color){const W=RL(j,r,R,e.color);m.push(W[0],W[1],W[2])}if(e.skeleton){if(e.weightTable[R]!==void 0&&e.weightTable[R].forEach(function(W){P.push(W.weight),z.push(W.id)}),P.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const W=[0,0,0,0],Z=[0,0,0,0];P.forEach(function(ge,X){let pe=ge,ye=z[X];Z.forEach(function(te,ie,Pe){if(pe>te){Pe[ie]=pe,pe=te;const _t=W[ie];W[ie]=ye,ye=_t}})}),z=W,P=Z}for(;P.length<4;)P.push(0),z.push(0);for(let W=0;W<4;++W)x.push(P[W]),E.push(z[W])}if(e.normal){const W=RL(j,r,R,e.normal);d.push(W[0],W[1],W[2])}e.material&&e.material.mappingType!=="AllSame"&&(F=RL(j,r,R,e.material)[0],F<0&&(M.negativeMaterialIndices=!0,F=0)),e.uv&&e.uv.forEach(function(W,Z){const ge=RL(j,r,R,W);v[Z]===void 0&&(v[Z]=[]),v[Z].push(ge[0]),v[Z].push(ge[1])}),i++,B&&(M.genFace(n,e,u,F,d,m,v,x,E,i),r++,i=0,u=[],d=[],m=[],v=[],x=[],E=[])}),n}getNormalNewell(e){const n=new Be(0,0,0);for(let r=0;r<e.length;r++){const i=e[r],o=e[(r+1)%e.length];n.x+=(i.y-o.y)*(i.z+o.z),n.y+=(i.z-o.z)*(i.x+o.x),n.z+=(i.x-o.x)*(i.y+o.y)}return n.normalize(),n}getNormalTangentAndBitangent(e){const n=this.getNormalNewell(e),i=(Math.abs(n.z)>.5?new Be(0,1,0):new Be(0,0,1)).cross(n).normalize(),o=n.clone().cross(i).normalize();return{normal:n,tangent:i,bitangent:o}}flattenVertex(e,n,r){return new cn(e.dot(n),e.dot(r))}genFace(e,n,r,i,o,u,d,m,v,x){let E;if(x>3){const M=[];for(let B=0;B<r.length;B+=3)M.push(new Be(n.vertexPositions[r[B]],n.vertexPositions[r[B+1]],n.vertexPositions[r[B+2]]));const{tangent:R,bitangent:j}=this.getNormalTangentAndBitangent(M),F=[];for(const B of M)F.push(this.flattenVertex(B,R,j));E=I7.triangulateShape(F,[])}else E=[[0,1,2]];for(const[M,R,j]of E)e.vertex.push(n.vertexPositions[r[M*3]]),e.vertex.push(n.vertexPositions[r[M*3+1]]),e.vertex.push(n.vertexPositions[r[M*3+2]]),e.vertex.push(n.vertexPositions[r[R*3]]),e.vertex.push(n.vertexPositions[r[R*3+1]]),e.vertex.push(n.vertexPositions[r[R*3+2]]),e.vertex.push(n.vertexPositions[r[j*3]]),e.vertex.push(n.vertexPositions[r[j*3+1]]),e.vertex.push(n.vertexPositions[r[j*3+2]]),n.skeleton&&(e.vertexWeights.push(m[M*4]),e.vertexWeights.push(m[M*4+1]),e.vertexWeights.push(m[M*4+2]),e.vertexWeights.push(m[M*4+3]),e.vertexWeights.push(m[R*4]),e.vertexWeights.push(m[R*4+1]),e.vertexWeights.push(m[R*4+2]),e.vertexWeights.push(m[R*4+3]),e.vertexWeights.push(m[j*4]),e.vertexWeights.push(m[j*4+1]),e.vertexWeights.push(m[j*4+2]),e.vertexWeights.push(m[j*4+3]),e.weightsIndices.push(v[M*4]),e.weightsIndices.push(v[M*4+1]),e.weightsIndices.push(v[M*4+2]),e.weightsIndices.push(v[M*4+3]),e.weightsIndices.push(v[R*4]),e.weightsIndices.push(v[R*4+1]),e.weightsIndices.push(v[R*4+2]),e.weightsIndices.push(v[R*4+3]),e.weightsIndices.push(v[j*4]),e.weightsIndices.push(v[j*4+1]),e.weightsIndices.push(v[j*4+2]),e.weightsIndices.push(v[j*4+3])),n.color&&(e.colors.push(u[M*3]),e.colors.push(u[M*3+1]),e.colors.push(u[M*3+2]),e.colors.push(u[R*3]),e.colors.push(u[R*3+1]),e.colors.push(u[R*3+2]),e.colors.push(u[j*3]),e.colors.push(u[j*3+1]),e.colors.push(u[j*3+2])),n.material&&n.material.mappingType!=="AllSame"&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),n.normal&&(e.normal.push(o[M*3]),e.normal.push(o[M*3+1]),e.normal.push(o[M*3+2]),e.normal.push(o[R*3]),e.normal.push(o[R*3+1]),e.normal.push(o[R*3+2]),e.normal.push(o[j*3]),e.normal.push(o[j*3+1]),e.normal.push(o[j*3+2])),n.uv&&n.uv.forEach(function(F,B){e.uvs[B]===void 0&&(e.uvs[B]=[]),e.uvs[B].push(d[B][M*2]),e.uvs[B].push(d[B][M*2+1]),e.uvs[B].push(d[B][R*2]),e.uvs[B].push(d[B][R*2+1]),e.uvs[B].push(d[B][j*2]),e.uvs[B].push(d[B][j*2+1])})}addMorphTargets(e,n,r,i){if(r.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const o=this;r.forEach(function(u){u.rawTargets.forEach(function(d){const m=vr.Objects.Geometry[d.geoID];m!==void 0&&o.genMorphGeometry(e,n,m,i,d.name)})})}genMorphGeometry(e,n,r,i,o){const u=n.PolygonVertexIndex!==void 0?n.PolygonVertexIndex.a:[],d=r.Vertices!==void 0?r.Vertices.a:[],m=r.Indexes!==void 0?r.Indexes.a:[],v=e.attributes.position.count*3,x=new Float32Array(v);for(let j=0;j<m.length;j++){const F=m[j]*3;x[F]=d[j*3],x[F+1]=d[j*3+1],x[F+2]=d[j*3+2]}const E={vertexIndices:u,vertexPositions:x},M=this.genBuffers(E),R=new ki(M.vertex,3);R.name=o||r.attrName,R.applyMatrix4(i),e.morphAttributes.position.push(R)}parseNormals(e){const n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Normals.a;let o=[];return r==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:i,indices:o,mappingType:n,referenceType:r}}parseUVs(e){const n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.UV.a;let o=[];return r==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:i,indices:o,mappingType:n,referenceType:r}}parseVertexColors(e){const n=e.MappingInformationType,r=e.ReferenceInformationType,i=e.Colors.a;let o=[];r==="IndexToDirect"&&(o=e.ColorIndex.a);for(let u=0,d=new xn;u<i.length;u+=4)d.fromArray(i,u).convertSRGBToLinear().toArray(i,u);return{dataSize:4,buffer:i,indices:o,mappingType:n,referenceType:r}}parseMaterialIndices(e){const n=e.MappingInformationType,r=e.ReferenceInformationType;if(n==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};const i=e.Materials.a,o=[];for(let u=0;u<i.length;++u)o.push(u);return{dataSize:1,buffer:i,indices:o,mappingType:n,referenceType:r}}parseNurbsGeometry(e){const n=parseInt(e.Order);if(isNaN(n))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Mo;const r=n-1,i=e.KnotVector.a,o=[],u=e.Points.a;for(let E=0,M=u.length;E<M;E+=4)o.push(new Ar().fromArray(u,E));let d,m;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){d=r,m=i.length-1-d;for(let E=0;E<r;++E)o.push(o[E])}const x=new mnt(r,i,o,d,m).getPoints(o.length*12);return new Mo().setFromPoints(x)}}class bnt{parse(){const e=[],n=this.parseClips();if(n!==void 0)for(const r in n){const i=n[r],o=this.addClip(i);e.push(o)}return e}parseClips(){if(vr.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const n=this.parseAnimationLayers(e);return this.parseAnimStacks(n)}parseAnimationCurveNodes(){const e=vr.Objects.AnimationCurveNode,n=new Map;for(const r in e){const i=e[r];if(i.attrName.match(/S|R|T|DeformPercent/)!==null){const o={id:i.id,attr:i.attrName,curves:{}};n.set(o.id,o)}}return n}parseAnimationCurves(e){const n=vr.Objects.AnimationCurve;for(const r in n){const i={id:n[r].id,times:n[r].KeyTime.a.map(Ent),values:n[r].KeyValueFloat.a},o=_s.get(i.id);if(o!==void 0){const u=o.parents[0].ID,d=o.parents[0].relationship;d.match(/X/)?e.get(u).curves.x=i:d.match(/Y/)?e.get(u).curves.y=i:d.match(/Z/)?e.get(u).curves.z=i:d.match(/DeformPercent/)&&e.has(u)&&(e.get(u).curves.morph=i)}}}parseAnimationLayers(e){const n=vr.Objects.AnimationLayer,r=new Map;for(const i in n){const o=[],u=_s.get(parseInt(i));u!==void 0&&(u.children.forEach(function(m,v){if(e.has(m.ID)){const x=e.get(m.ID);if(x.curves.x!==void 0||x.curves.y!==void 0||x.curves.z!==void 0){if(o[v]===void 0){const E=_s.get(m.ID).parents.filter(function(M){return M.relationship!==void 0})[0].ID;if(E!==void 0){const M=vr.Objects.Model[E.toString()];if(M===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",m);return}const R={modelName:M.attrName?Nr.sanitizeNodeName(M.attrName):"",ID:M.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};ya.traverse(function(j){j.ID===M.id&&(R.transform=j.matrix,j.userData.transformData&&(R.eulerOrder=j.userData.transformData.eulerOrder))}),R.transform||(R.transform=new Bn),"PreRotation"in M&&(R.preRotation=M.PreRotation.value),"PostRotation"in M&&(R.postRotation=M.PostRotation.value),o[v]=R}}o[v]&&(o[v][x.attr]=x)}else if(x.curves.morph!==void 0){if(o[v]===void 0){const E=_s.get(m.ID).parents.filter(function(z){return z.relationship!==void 0})[0].ID,M=_s.get(E).parents[0].ID,R=_s.get(M).parents[0].ID,j=_s.get(R).parents[0].ID,F=vr.Objects.Model[j],B={modelName:F.attrName?Nr.sanitizeNodeName(F.attrName):"",morphName:vr.Objects.Deformer[E].attrName};o[v]=B}o[v][x.attr]=x}}}),r.set(parseInt(i),o))}return r}parseAnimStacks(e){const n=vr.Objects.AnimationStack,r={};for(const i in n){const o=_s.get(parseInt(i)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const u=e.get(o[0].ID);r[i]={name:n[i].attrName,layer:u}}return r}addClip(e){let n=[];const r=this;return e.layer.forEach(function(i){n=n.concat(r.generateTracks(i))}),new RW(e.name,-1,n)}generateTracks(e){const n=[];let r=new Be,i=new Be;if(e.transform&&e.transform.decompose(r,new Us,i),r=r.toArray(),i=i.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");o!==void 0&&n.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&n.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");o!==void 0&&n.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&n.push(o)}return n}generateVectorTrack(e,n,r,i){const o=this.getTimesForAllAxes(n),u=this.getKeyframeTrackValues(o,n,r);return new LT(e+"."+i,o,u)}generateRotationTrack(e,n,r,i,o){let u,d;if(n.x!==void 0&&n.y!==void 0&&n.z!==void 0){const E=this.interpolateRotations(n.x,n.y,n.z,o);u=E[0],d=E[1]}r!==void 0&&(r=r.map(qo.degToRad),r.push(o),r=new wa().fromArray(r),r=new Us().setFromEuler(r)),i!==void 0&&(i=i.map(qo.degToRad),i.push(o),i=new wa().fromArray(i),i=new Us().setFromEuler(i).invert());const m=new Us,v=new wa,x=[];if(!d||!u)return new O0(e+".quaternion",[],[]);for(let E=0;E<d.length;E+=3)v.set(d[E],d[E+1],d[E+2],o),m.setFromEuler(v),r!==void 0&&m.premultiply(r),i!==void 0&&m.multiply(i),E>2&&new Us().fromArray(x,(E-3)/3*4).dot(m)<0&&m.set(-m.x,-m.y,-m.z,-m.w),m.toArray(x,E/3*4);return new O0(e+".quaternion",u,x)}generateMorphTrack(e){const n=e.DeformPercent.curves.morph,r=n.values.map(function(o){return o/100}),i=ya.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new OT(e.modelName+".morphTargetInfluences["+i+"]",n.times,r)}getTimesForAllAxes(e){let n=[];if(e.x!==void 0&&(n=n.concat(e.x.times)),e.y!==void 0&&(n=n.concat(e.y.times)),e.z!==void 0&&(n=n.concat(e.z.times)),n=n.sort(function(r,i){return r-i}),n.length>1){let r=1,i=n[0];for(let o=1;o<n.length;o++){const u=n[o];u!==i&&(n[r]=u,i=u,r++)}n=n.slice(0,r)}return n}getKeyframeTrackValues(e,n,r){const i=r,o=[];let u=-1,d=-1,m=-1;return e.forEach(function(v){if(n.x&&(u=n.x.times.indexOf(v)),n.y&&(d=n.y.times.indexOf(v)),n.z&&(m=n.z.times.indexOf(v)),u!==-1){const x=n.x.values[u];o.push(x),i[0]=x}else o.push(i[0]);if(d!==-1){const x=n.y.values[d];o.push(x),i[1]=x}else o.push(i[1]);if(m!==-1){const x=n.z.values[m];o.push(x),i[2]=x}else o.push(i[2])}),o}interpolateRotations(e,n,r,i){const o=[],u=[];o.push(e.times[0]),u.push(qo.degToRad(e.values[0])),u.push(qo.degToRad(n.values[0])),u.push(qo.degToRad(r.values[0]));for(let d=1;d<e.values.length;d++){const m=[e.values[d-1],n.values[d-1],r.values[d-1]];if(isNaN(m[0])||isNaN(m[1])||isNaN(m[2]))continue;const v=m.map(qo.degToRad),x=[e.values[d],n.values[d],r.values[d]];if(isNaN(x[0])||isNaN(x[1])||isNaN(x[2]))continue;const E=x.map(qo.degToRad),M=[x[0]-m[0],x[1]-m[1],x[2]-m[2]],R=[Math.abs(M[0]),Math.abs(M[1]),Math.abs(M[2])];if(R[0]>=180||R[1]>=180||R[2]>=180){const F=Math.max(...R)/180,B=new wa(...v,i),z=new wa(...E,i),P=new Us().setFromEuler(B),W=new Us().setFromEuler(z);P.dot(W)&&W.set(-W.x,-W.y,-W.z,-W.w);const Z=e.times[d-1],ge=e.times[d]-Z,X=new Us,pe=new wa;for(let ye=0;ye<1;ye+=1/F)X.copy(P.clone().slerp(W.clone(),ye)),o.push(Z+ye*ge),pe.setFromQuaternion(X,i),u.push(pe.x),u.push(pe.y),u.push(pe.z)}else o.push(e.times[d]),u.push(qo.degToRad(e.values[d])),u.push(qo.degToRad(n.values[d])),u.push(qo.degToRad(r.values[d]))}return[o,u]}}class _nt{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,n){this.currentProp=e,this.currentPropName=n}parse(e){this.currentIndent=0,this.allNodes=new fMe,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const n=this,r=e.split(/[\r\n]+/);return r.forEach(function(i,o){const u=i.match(/^[\s\t]*;/),d=i.match(/^[\s\t]*$/);if(u||d)return;const m=i.match("^\\t{"+n.currentIndent+"}(\\w+):(.*){",""),v=i.match("^\\t{"+n.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),x=i.match("^\\t{"+(n.currentIndent-1)+"}}");m?n.parseNodeBegin(i,m):v?n.parseNodeProperty(i,v,r[++o]):x?n.popStack():i.match(/^[^\s\t}]/)&&n.parseNodePropertyContinued(i)}),this.allNodes}parseNodeBegin(e,n){const r=n[1].trim().replace(/^"/,"").replace(/"$/,""),i=n[2].split(",").map(function(m){return m.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:r},u=this.parseNodeAttr(i),d=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(r,o):r in d?(r==="PoseNode"?d.PoseNode.push(o):d[r].id!==void 0&&(d[r]={},d[r][d[r].id]=d[r]),u.id!==""&&(d[r][u.id]=o)):typeof u.id=="number"?(d[r]={},d[r][u.id]=o):r!=="Properties70"&&(r==="PoseNode"?d[r]=[o]:d[r]=o),typeof u.id=="number"&&(o.id=u.id),u.name!==""&&(o.attrName=u.name),u.type!==""&&(o.attrType=u.type),this.pushStack(o)}parseNodeAttr(e){let n=e[0];e[0]!==""&&(n=parseInt(e[0]),isNaN(n)&&(n=e[0]));let r="",i="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),i=e[2]),{id:n,name:r,type:i}}parseNodeProperty(e,n,r){let i=n[1].replace(/^"/,"").replace(/"$/,"").trim(),o=n[2].replace(/^"/,"").replace(/"$/,"").trim();i==="Content"&&o===","&&(o=r.replace(/"/g,"").replace(/,$/,"").trim());const u=this.getCurrentNode();if(u.name==="Properties70"){this.parseNodeSpecialProperty(e,i,o);return}if(i==="C"){const m=o.split(",").slice(1),v=parseInt(m[0]),x=parseInt(m[1]);let E=o.split(",").slice(3);E=E.map(function(M){return M.trim().replace(/^"/,"")}),i="connections",o=[v,x],Pnt(o,E),u[i]===void 0&&(u[i]=[])}i==="Node"&&(u.id=o),i in u&&Array.isArray(u[i])?u[i].push(o):i!=="a"?u[i]=o:u.a=o,this.setCurrentProp(u,i),i==="a"&&o.slice(-1)!==","&&(u.a=w9(o))}parseNodePropertyContinued(e){const n=this.getCurrentNode();n.a+=e,e.slice(-1)!==","&&(n.a=w9(n.a))}parseNodeSpecialProperty(e,n,r){const i=r.split('",').map(function(x){return x.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=i[0],u=i[1],d=i[2],m=i[3];let v=i[4];switch(u){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":v=parseFloat(v);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":v=w9(v);break}this.getPrevNode()[o]={type:u,type2:d,flag:m,value:v},this.setCurrentProp(this.getPrevNode(),o)}}class wnt{parse(e){const n=new r1e(e);n.skip(23);const r=n.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);const i=new fMe;for(;!this.endOfContent(n);){const o=this.parseNode(n,r);o!==null&&i.add(o.name,o)}return i}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,n){const r={},i=n>=7500?e.getUint64():e.getUint32(),o=n>=7500?e.getUint64():e.getUint32();n>=7500?e.getUint64():e.getUint32();const u=e.getUint8(),d=e.getString(u);if(i===0)return null;const m=[];for(let M=0;M<o;M++)m.push(this.parseProperty(e));const v=m.length>0?m[0]:"",x=m.length>1?m[1]:"",E=m.length>2?m[2]:"";for(r.singleProperty=o===1&&e.getOffset()===i;i>e.getOffset();){const M=this.parseNode(e,n);M!==null&&this.parseSubNode(d,r,M)}return r.propertyList=m,typeof v=="number"&&(r.id=v),x!==""&&(r.attrName=x),E!==""&&(r.attrType=E),d!==""&&(r.name=d),r}parseSubNode(e,n,r){if(r.singleProperty===!0){const i=r.propertyList[0];Array.isArray(i)?(n[r.name]=r,r.a=i):n[r.name]=i}else if(e==="Connections"&&r.name==="C"){const i=[];r.propertyList.forEach(function(o,u){u!==0&&i.push(o)}),n.connections===void 0&&(n.connections=[]),n.connections.push(i)}else if(r.name==="Properties70")Object.keys(r).forEach(function(o){n[o]=r[o]});else if(e==="Properties70"&&r.name==="P"){let i=r.propertyList[0],o=r.propertyList[1];const u=r.propertyList[2],d=r.propertyList[3];let m;i.indexOf("Lcl ")===0&&(i=i.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?m=[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:m=r.propertyList[4],n[i]={type:o,type2:u,flag:d,value:m}}else n[r.name]===void 0?typeof r.id=="number"?(n[r.name]={},n[r.name][r.id]=r):n[r.name]=r:r.name==="PoseNode"?(Array.isArray(n[r.name])||(n[r.name]=[n[r.name]]),n[r.name].push(r)):n[r.name][r.id]===void 0&&(n[r.name][r.id]=r)}parseProperty(e){const n=e.getString(1);let r;switch(n){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return r=e.getUint32(),e.getArrayBuffer(r);case"S":return r=e.getUint32(),e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const i=e.getUint32(),o=e.getUint32(),u=e.getUint32();if(o===0)switch(n){case"b":case"c":return e.getBooleanArray(i);case"d":return e.getFloat64Array(i);case"f":return e.getFloat32Array(i);case"i":return e.getInt32Array(i);case"l":return e.getInt64Array(i)}const d=snt(new Uint8Array(e.getArrayBuffer(u))),m=new r1e(d.buffer);switch(n){case"b":case"c":return m.getBooleanArray(i);case"d":return m.getFloat64Array(i);case"f":return m.getFloat32Array(i);case"i":return m.getInt32Array(i);case"l":return m.getInt64Array(i)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+n)}}}class r1e{constructor(e,n){this.dv=new DataView(e),this.offset=0,this.littleEndian=n!==void 0?n:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const n=[];for(let r=0;r<e;r++)n.push(this.getBoolean());return n}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getInt32());return n}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n&2147483648?(n=~n&4294967295,e=~e&4294967295,e===4294967295&&(n=n+1&4294967295),e=e+1&4294967295,-(n*4294967296+e)):n*4294967296+e}getInt64Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getInt64());return n}getUint64(){let e,n;return this.littleEndian?(e=this.getUint32(),n=this.getUint32()):(n=this.getUint32(),e=this.getUint32()),n*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getFloat32());return n}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const n=[];for(let r=0;r<e;r++)n.push(this.getFloat64());return n}getArrayBuffer(e){const n=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,n}getString(e){const n=this.offset;let r=new Uint8Array(this.dv.buffer,n,e);this.skip(e);const i=r.indexOf(0);return i>=0&&(r=new Uint8Array(this.dv.buffer,n,i)),this._textDecoder.decode(r)}}class fMe{add(e,n){this[e]=n}}function xnt(t){const e="Kaydara FBX Binary  \0";return t.byteLength>=e.length&&e===vMe(t,0,e.length)}function Snt(t){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function r(i){const o=t[i-1];return t=t.slice(n+i),n++,o}for(let i=0;i<e.length;++i)if(r(1)===e[i])return!1;return!0}function i1e(t){const e=/FBXVersion: (\d+)/,n=t.match(e);if(n)return parseInt(n[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Ent(t){return t/46186158e3}const Cnt=[];function RL(t,e,n,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=t;break;case"ByPolygon":i=e;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}r.referenceType==="IndexToDirect"&&(i=r.indices[i]);const o=i*r.dataSize,u=o+r.dataSize;return Tnt(Cnt,r.buffer,o,u)}const _9=new wa,uw=new Be;function mMe(t){const e=new Bn,n=new Bn,r=new Bn,i=new Bn,o=new Bn,u=new Bn,d=new Bn,m=new Bn,v=new Bn,x=new Bn,E=new Bn,M=new Bn,R=t.inheritType?t.inheritType:0;if(t.translation&&e.setPosition(uw.fromArray(t.translation)),t.preRotation){const ie=t.preRotation.map(qo.degToRad);ie.push(t.eulerOrder||wa.DEFAULT_ORDER),n.makeRotationFromEuler(_9.fromArray(ie))}if(t.rotation){const ie=t.rotation.map(qo.degToRad);ie.push(t.eulerOrder||wa.DEFAULT_ORDER),r.makeRotationFromEuler(_9.fromArray(ie))}if(t.postRotation){const ie=t.postRotation.map(qo.degToRad);ie.push(t.eulerOrder||wa.DEFAULT_ORDER),i.makeRotationFromEuler(_9.fromArray(ie)),i.invert()}t.scale&&o.scale(uw.fromArray(t.scale)),t.scalingOffset&&d.setPosition(uw.fromArray(t.scalingOffset)),t.scalingPivot&&u.setPosition(uw.fromArray(t.scalingPivot)),t.rotationOffset&&m.setPosition(uw.fromArray(t.rotationOffset)),t.rotationPivot&&v.setPosition(uw.fromArray(t.rotationPivot)),t.parentMatrixWorld&&(E.copy(t.parentMatrix),x.copy(t.parentMatrixWorld));const j=n.clone().multiply(r).multiply(i),F=new Bn;F.extractRotation(x);const B=new Bn;B.copyPosition(x);const z=B.clone().invert().multiply(x),P=F.clone().invert().multiply(z),W=o,Z=new Bn;if(R===0)Z.copy(F).multiply(j).multiply(P).multiply(W);else if(R===1)Z.copy(F).multiply(P).multiply(j).multiply(W);else{const Pe=new Bn().scale(new Be().setFromMatrixScale(E)).clone().invert(),_t=P.clone().multiply(Pe);Z.copy(F).multiply(j).multiply(_t).multiply(W)}const ge=v.clone().invert(),X=u.clone().invert();let pe=e.clone().multiply(m).multiply(v).multiply(n).multiply(r).multiply(i).multiply(ge).multiply(d).multiply(u).multiply(o).multiply(X);const ye=new Bn().copyPosition(pe),te=x.clone().multiply(ye);return M.copyPosition(te),pe=M.clone().multiply(Z),pe.premultiply(x.invert()),pe}function gMe(t){t=t||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return t===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[t]}function w9(t){return t.split(",").map(function(n){return parseFloat(n)})}function vMe(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=t.byteLength),new TextDecoder().decode(new Uint8Array(t,e,n))}function Pnt(t,e){for(let n=0,r=t.length,i=e.length;n<i;n++,r++)t[r]=e[n]}function Tnt(t,e,n,r){for(let i=n,o=0;i<r;i++,o++)t[o]=e[i];return t}const yMe=new Map,bMe=new Map,_Me=new Map,mX=new Map;function Mnt(t,e){return new Promise((n,r)=>{new w8e().setPath("images/milkyWay/").load(e,i=>{yMe.set(t,i),n(i)},void 0,()=>{r()})})}function knt(t,e){return new Promise((n,r)=>{new gnt().setPath("./models/").loadAsync(e).then(i=>{i.traverse(o=>{o.isMesh&&(o.castShadow=!0,o.receiveShadow=!0)}),_Me.set(t,i),n(i)}).catch(i=>{console.log("Couldn't load:",e),console.log(i),r()})})}function Ant(t,e){return new Promise((n,r)=>{new oEe().load(e,i=>{i.wrapS=pp,i.wrapT=pp,i.needsUpdate=!0,mX.set(t,i),n(i)},void 0,()=>{r()})})}function Int(t,e){return new Promise((n,r)=>{fetch(e).then(i=>{if(!i.ok)throw new Error(`Network response was not ok: ${i.status}`);return i.json()}).then(i=>{bMe.set(t,i),n(i)}).catch(()=>{console.log(`Couldn't load: ${e}`),r()})})}function Rnt(){return new Promise((t,e)=>{const n=[()=>Mnt("environment",["dark-s_px.jpg","dark-s_nx.jpg","dark-s_py.jpg","dark-s_ny.jpg","dark-s_pz.jpg","dark-s_nz.jpg"]),()=>Ant("uv_grid","images/uv_grid_opengl.jpg"),()=>knt("Flair","Flair.fbx"),()=>Int("animation","json/animation.json")];Promise.all(n.map(r=>r())).then(()=>{KT.dispatchEvent({type:XT.LOAD_COMPLETE}),t()}).catch(()=>{e()})})}class wMe extends qr{constructor(n){super();yr(this,"mixer");this.name=n,this.scale.setScalar(.5);const r=_Me.get(n),i=Ktt(r);this.add(i),this.mixer=new V8e(i),i.mixer=this.mixer,this.mixer.clipAction(i.animations[0]).play()}update(n){this.mixer.update(n)}}class xMe extends NN{constructor(n){super();yr(this,"camera");yr(this,"renderer");yr(this,"clock");this.renderer=n,this.clock=new M8e,this.clock.start();const r=new qr;r.name="cameras",this.add(r),this.camera=new Vs(90,1,10,1e3),this.camera.name="Main",this.camera.position.set(0,100,125),this.camera.lookAt(0,50,0),r.add(this.camera)}dispose(){Fr.components.get("theatre").clearSheetObjects(this.name)}resize(n,r){this.camera.aspect=n/r,this.camera.updateProjectionMatrix()}update(){}draw(){this.renderer.render(this,this.camera)}}class SMe extends xMe{constructor(n){super(n);yr(this,"dance");yr(this,"customMat");yr(this,"post");this.name="Scene1";const r=yMe.get("environment");if(this.background=r,Fr.editor){const i=new is(new S0,new t1({envMap:r,side:Is}));i.name="bg",i.scale.setScalar(1e3),this.add(i)}this.createLights(),this.createWorld(),Fr.editor||this.createPost(),this.createAnimation(),DF(this)}createLights(){const n=new qr;n.name="lights",this.add(n);const r=new O7(16777215,.25);r.name="sun",r.castShadow=!0,r.position.set(0,50,50);const i=256;r.shadow.camera.top=i,r.shadow.camera.bottom=-i,r.shadow.camera.left=-i,r.shadow.camera.right=i,r.shadow.mapSize.width=1024,r.shadow.mapSize.height=1024,r.shadow.camera.near=10,r.shadow.camera.far=1e3,r.shadow.bias=1e-4,n.add(r);const o=new x8e(7320802,12872999,.5);o.name="hemi",n.add(o);const u=new D7(16777215,3);u.angle=5.8,u.decay=0,u.distance=1e3,u.penumbra=Math.PI,u.name="spotlight",u.castShadow=!0,u.position.set(-50,200,200),u.lookAt(0,50,0),n.add(u)}createWorld(){const n=new qr;n.name="world",this.add(n);const r=mX.get("uv_grid");r.repeat.setScalar(10),r.needsUpdate=!0;const i=new tT({map:r}),o=new is(new A7(500,36),i);o.name="floor",o.receiveShadow=!0,o.rotateX(-Math.PI/2),n.add(o),this.dance=new wMe("Flair"),this.dance.position.set(0,0,0),n.add(this.dance),this.createTestMaterials(n)}createTestMaterials(n){const r=new S0(20),i=[],o=new is(r,new t1({name:"BasicMaterial",transparent:!0}));o.name="Basic",n.add(o),i.push(o);const u=new is(r,new tEe({transparent:!0}));u.name="Matcap",n.add(u),i.push(u);const d=new is(r,new tT({name:"PhongMaterial",transparent:!0}));d.name="Phong",n.add(d),i.push(d);const m=new is(r,new a8e({name:"PhysicalMaterial",transparent:!0}));m.name="Physical",n.add(m),i.push(m),this.customMat=new sMe;const v=new is(r,this.customMat);v.name="Shader",n.add(v),i.push(v);const x=50,E=i.length,M=(E-1)/2*x;for(let R=0;R<E;R++){const j=R*x-M;i[R].position.set(j,100,-150),i[R].castShadow=!0}}createPost(){this.post=new Qet(this.renderer),this.post.addPass(new Wet(this,this.camera));const n=new Ntt;n.minEdgeThreshold=.01,this.post.addPass(new m9(this.camera,n));const r=new Vtt({focusArea:.6});this.post.addPass(new m9(this.camera,r));const i=new Btt({});i.blendMode.opacity.value=.33,i.blendMode.blendFunction=br.MULTIPLY;const o=new Htt({});this.post.addPass(new m9(this.camera,i,o))}createAnimation(){const n=Fr.components.get("theatre");n.sheet(this.name),n.sheetObject(this.name,"Camera",{position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},rotation:{x:this.camera.rotation.x,y:this.camera.rotation.y,z:this.camera.rotation.z}},r=>{this.camera.position.set(r.position.x,r.position.y,r.position.z),this.camera.rotation.set(r.rotation.x,r.rotation.y,r.rotation.z)}),n.sheetObject(this.name,"Break Dancer",{position:{x:this.dance.position.x,y:this.dance.position.y,z:this.dance.position.z},rotation:{x:this.dance.rotation.x,y:this.dance.rotation.y,z:this.dance.rotation.z}},r=>{this.dance.position.set(r.position.x,r.position.y,r.position.z),this.dance.rotation.set(r.rotation.x,r.rotation.y,r.rotation.z)}),n.playSheet(this.name,{iterationCount:1/0})}update(){const n=this.clock.getDelta();this.customMat.update(n),this.dance.update(n)}draw(){Fr.editor,this.post.render()}resize(n,r){super.resize(n,r),Fr.editor||this.post.setSize(n,r)}}class EMe extends xMe{constructor(n){super(n);yr(this,"dance");this.name="Scene2",this.camera.position.set(0,0,125),this.camera.lookAt(0,0,0),this.createLights(),this.createWorld(),this.createAnimation(),DF(this)}createLights(){const n=new qr;n.name="lights",this.add(n);const r=new O7(16777215,.25);r.name="sun",r.castShadow=!0,r.position.set(0,50,50),n.add(r);const i=new D7(16777215,3);i.angle=5.8,i.decay=0,i.distance=1e3,i.penumbra=Math.PI,i.name="spotlight",i.position.set(-50,200,200),i.lookAt(0,50,0),n.add(i)}createWorld(){const n=new qr;n.name="world",this.add(n);const r=mX.get("uv_grid");r.repeat.setScalar(10),r.needsUpdate=!0;const i=new t1({map:r}),o=new is(new S0(250,36),i);o.name="floor",o.receiveShadow=!0,o.position.y=-75,o.scale.y=.1,n.add(o);const u=new V6e(new S0(50),new ZSe({size:2}));u.name="points",u.position.x=-100,n.add(u);const d=new k7(new S0(50),new aM);d.name="lines",d.position.x=100,n.add(d);const m=new is(new f1(100,100),new sMe);m.name="testShader",m.position.z=-100,n.add(m),this.dance=new wMe("Flair"),this.dance.name="flair",this.dance.traverse(v=>{if(v instanceof qSe){const x=v;x.material=new tEe}}),n.add(this.dance)}createAnimation(){const n=Fr.components.get("theatre");n.sheet(this.name),n.sheetObject(this.name,"Camera",{position:{x:this.camera.position.x,y:this.camera.position.y,z:this.camera.position.z},rotation:{x:this.camera.rotation.x,y:this.camera.rotation.y,z:this.camera.rotation.z}},r=>{this.camera.position.set(r.position.x,r.position.y,r.position.z),this.camera.rotation.set(r.rotation.x,r.rotation.y,r.rotation.z)}),n.sheetObject(this.name,"Dancer",{position:{x:this.dance.position.x,y:this.dance.position.y,z:this.dance.position.z},rotation:{x:this.dance.rotation.x,y:this.dance.rotation.y,z:this.dance.rotation.z}},r=>{this.dance.position.set(r.position.x,r.position.y,r.position.z),this.dance.rotation.set(r.rotation.x,r.rotation.y,r.rotation.z)}),n.playSheet(this.name,{iterationCount:1/0})}update(){const n=this.clock.getDelta();this.dance.update(n)}}const gX=new Map;gX.set("Scene1",SMe);gX.set("Scene2",EMe);function Dnt(){const[t,e]=Mt.useState(!1);Mt.useEffect(()=>{const r=()=>{KT.removeEventListener(XT.LOAD_COMPLETE,r),e(!0)};KT.addEventListener(XT.LOAD_COMPLETE,r)},[]);const n=Fr.components.get("three");return Je.jsx(Je.Fragment,{children:t&&Fr.editor&&Je.jsx(Eqe,{header:[Je.jsx(qTe,{title:"Scenes",options:[{type:"option",title:"Scene 1",value:"scene1"},{type:"option",title:"Scene 2",value:"scene2"}],onSelect:r=>{Fr.send({target:"app",event:"selectComponent",data:{dropdown:"Scenes",value:r}})}},"Scenes")],children:Je.jsxs(Je.Fragment,{children:[Je.jsx(Tet,{three:n,scenes:gX,onSceneUpdate:r=>{r.update()}}),Je.jsx(yet,{three:n})]})})})}var iF={exports:{}};iF.exports;(function(t,e){var n=Object.create,r=Object.defineProperty,i=Object.defineProperties,o=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,v=Object.getPrototypeOf,x=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,M=(y,T,U)=>T in y?r(y,T,{enumerable:!0,configurable:!0,writable:!0,value:U}):y[T]=U,R=(y,T)=>{for(var U in T||(T={}))x.call(T,U)&&M(y,U,T[U]);if(m)for(var U of m(T))E.call(T,U)&&M(y,U,T[U]);return y},j=(y,T)=>i(y,u(T)),F=(y,T)=>function(){return T||(0,y[d(y)[0]])((T={exports:{}}).exports,T),T.exports},B=(y,T)=>{for(var U in T)r(y,U,{get:T[U],enumerable:!0})},z=(y,T,U,q)=>{if(T&&typeof T=="object"||typeof T=="function")for(let se of d(T))!x.call(y,se)&&se!==U&&r(y,se,{get:()=>T[se],enumerable:!(q=o(T,se))||q.enumerable});return y},P=(y,T,U)=>(U=y!=null?n(v(y)):{},z(T||!y||!y.__esModule?r(U,"default",{value:y,enumerable:!0}):U,y)),W=y=>z(r({},"__esModule",{value:!0}),y),Z=(y,T,U)=>(M(y,typeof T!="symbol"?T+"":T,U),U),ge=F({"../node_modules/timing-function/lib/UnitBezier.js"(y,T){T.exports=function(){function U(q,se,fe,De){this.set(q,se,fe,De)}return U.prototype.set=function(q,se,fe,De){this._cx=3*q,this._bx=3*(fe-q)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*se,this._by=3*(De-se)-this._cy,this._ay=1-this._cy-this._by},U.epsilon=1e-6,U.prototype._sampleCurveX=function(q){return((this._ax*q+this._bx)*q+this._cx)*q},U.prototype._sampleCurveY=function(q){return((this._ay*q+this._by)*q+this._cy)*q},U.prototype._sampleCurveDerivativeX=function(q){return(3*this._ax*q+2*this._bx)*q+this._cx},U.prototype._solveCurveX=function(q,se){var fe,De,Ye,et,St,ae;for(Ye=void 0,et=void 0,St=void 0,ae=void 0,fe=void 0,De=void 0,St=q,De=0;De<8;){if(ae=this._sampleCurveX(St)-q,Math.abs(ae)<se)return St;if(fe=this._sampleCurveDerivativeX(St),Math.abs(fe)<se)break;St=St-ae/fe,De++}if(Ye=0,et=1,St=q,St<Ye)return Ye;if(St>et)return et;for(;Ye<et;){if(ae=this._sampleCurveX(St),Math.abs(ae-q)<se)return St;q>ae?Ye=St:et=St,St=(et-Ye)*.5+Ye}return St},U.prototype.solve=function(q,se){return this._sampleCurveY(this._solveCurveX(q,se))},U.prototype.solveSimple=function(q){return this._sampleCurveY(this._solveCurveX(q,1e-6))},U}()}}),X=F({"../node_modules/levenshtein-edit-distance/index.js"(y,T){var U,q;U=[],q=[];function se(fe,De,Ye){var et,St,ae,Ve,Zt,In,bn,ar;if(fe===De)return 0;if(et=fe.length,St=De.length,et===0)return St;if(St===0)return et;for(Ye&&(fe=fe.toLowerCase(),De=De.toLowerCase()),bn=0;bn<et;)q[bn]=fe.charCodeAt(bn),U[bn]=++bn;for(ar=0;ar<St;)for(ae=De.charCodeAt(ar),Ve=Zt=ar++,bn=-1;++bn<et;)In=ae===q[bn]?Zt:Zt+1,Zt=U[bn],U[bn]=Ve=Zt>Ve?In>Ve?Ve+1:In:In>Zt?Zt+1:In;return Ve}T.exports=se}}),pe=F({"../node_modules/propose/propose.js"(y,T){var U=X();function q(){var se,fe,De,Ye,et,St=0,ae=arguments[0],Ve=arguments[1],Zt=Ve.length,In=arguments[2];In&&(Ye=In.threshold,et=In.ignoreCase),Ye===void 0&&(Ye=0);for(var bn=0;bn<Zt;++bn)et?fe=U(ae,Ve[bn],!0):fe=U(ae,Ve[bn]),fe>ae.length?se=1-fe/Ve[bn].length:se=1-fe/ae.length,se>St&&(St=se,De=Ve[bn]);return St>=Ye?De:null}T.exports=q}}),ye=F({"../node_modules/fast-deep-equal/index.js"(y,T){T.exports=function U(q,se){if(q===se)return!0;if(q&&se&&typeof q=="object"&&typeof se=="object"){if(q.constructor!==se.constructor)return!1;var fe,De,Ye;if(Array.isArray(q)){if(fe=q.length,fe!=se.length)return!1;for(De=fe;De--!==0;)if(!U(q[De],se[De]))return!1;return!0}if(q.constructor===RegExp)return q.source===se.source&&q.flags===se.flags;if(q.valueOf!==Object.prototype.valueOf)return q.valueOf()===se.valueOf();if(q.toString!==Object.prototype.toString)return q.toString()===se.toString();if(Ye=Object.keys(q),fe=Ye.length,fe!==Object.keys(se).length)return!1;for(De=fe;De--!==0;)if(!Object.prototype.hasOwnProperty.call(se,Ye[De]))return!1;for(De=fe;De--!==0;){var et=Ye[De];if(!U(q[et],se[et]))return!1}return!0}return q!==q&&se!==se}}}),te={};B(te,{createRafDriver:()=>Zy,getProject:()=>KS,notify:()=>Kp,onChange:()=>fb,types:()=>TS,val:()=>XS}),t.exports=W(te);var ie={};B(ie,{createRafDriver:()=>Zy,getProject:()=>KS,notify:()=>Kp,onChange:()=>fb,types:()=>TS,val:()=>XS});var Pe=Ut,_t=class{constructor(){Z(this,"atom",new Pe.Atom({projects:{}}))}add(y,T){this.atom.setByPointer(U=>U.projects[y],T)}get(y){return this.atom.get().projects[y]}has(y){return!!this.get(y)}},Tt=new _t,de=Tt,ot=new WeakMap;function Me(y){return ot.get(y)}function wt(y,T){ot.set(y,T)}var Ge=[],it=Array.isArray,Qe=it,ut=typeof Gi=="object"&&Gi&&Gi.Object===Object&&Gi,je=ut,bt=typeof self=="object"&&self&&self.Object===Object&&self,Fe=je||bt||Function("return this")(),at=Fe,Ot=at.Symbol,Gt=Ot,tn=Object.prototype,Kt=tn.hasOwnProperty,Tn=tn.toString,nn=Gt?Gt.toStringTag:void 0;function He(y){var T=Kt.call(y,nn),U=y[nn];try{y[nn]=void 0;var q=!0}catch{}var se=Tn.call(y);return q&&(T?y[nn]=U:delete y[nn]),se}var jn=He,an=Object.prototype,dn=an.toString;function on(y){return dn.call(y)}var zr=on,kn="[object Null]",Se="[object Undefined]",he=Gt?Gt.toStringTag:void 0;function dt(y){return y==null?y===void 0?Se:kn:he&&he in Object(y)?jn(y):zr(y)}var Nt=dt;function Ft(y){return y!=null&&typeof y=="object"}var At=Ft,gn="[object Symbol]";function Jt(y){return typeof y=="symbol"||At(y)&&Nt(y)==gn}var ln=Jt,Dn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xn=/^\w*$/;function Bt(y,T){if(Qe(y))return!1;var U=typeof y;return U=="number"||U=="symbol"||U=="boolean"||y==null||ln(y)?!0:Xn.test(y)||!Dn.test(y)||T!=null&&y in Object(T)}var gr=Bt;function sr(y){var T=typeof y;return y!=null&&(T=="object"||T=="function")}var Cn=sr,Mn="[object AsyncFunction]",rn="[object Function]",Un="[object GeneratorFunction]",Ae="[object Proxy]";function Wt(y){if(!Cn(y))return!1;var T=Nt(y);return T==rn||T==Un||T==Mn||T==Ae}var Yt=Wt,pn=at["__core-js_shared__"],Te=pn,Ht=function(){var y=/[^.]+$/.exec(Te&&Te.keys&&Te.keys.IE_PROTO||"");return y?"Symbol(src)_1."+y:""}();function Dt(y){return!!Ht&&Ht in y}var fn=Dt,On=Function.prototype,ur=On.toString;function or(y){if(y!=null){try{return ur.call(y)}catch{}try{return y+""}catch{}}return""}var hr=or,Pr=/[\\^$.*+?()[\]{}|]/g,Zn=/^\[object .+?Constructor\]$/,ri=Function.prototype,Qi=Object.prototype,Pc=ri.toString,Ld=Qi.hasOwnProperty,Cu=RegExp("^"+Pc.call(Ld).replace(Pr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function _p(y){if(!Cn(y)||fn(y))return!1;var T=Yt(y)?Cu:Zn;return T.test(hr(y))}var ta=_p;function Tc(y,T){return y==null?void 0:y[T]}var Nd=Tc;function lg(y,T){var U=Nd(y,T);return ta(U)?U:void 0}var el=lg,wp=el(Object,"create"),be=wp;function Ze(){this.__data__=be?be(null):{},this.size=0}var yt=Ze;function gt(y){var T=this.has(y)&&delete this.__data__[y];return this.size-=T?1:0,T}var pt=gt,un="__lodash_hash_undefined__",Sn=Object.prototype,Nn=Sn.hasOwnProperty;function Hn(y){var T=this.__data__;if(be){var U=T[y];return U===un?void 0:U}return Nn.call(T,y)?T[y]:void 0}var rr=Hn,qn=Object.prototype,Fn=qn.hasOwnProperty;function wr(y){var T=this.__data__;return be?T[y]!==void 0:Fn.call(T,y)}var Ds=wr,ci="__lodash_hash_undefined__";function Io(y,T){var U=this.__data__;return this.size+=this.has(y)?0:1,U[y]=be&&T===void 0?ci:T,this}var Vr=Io;function Kn(y){var T=-1,U=y==null?0:y.length;for(this.clear();++T<U;){var q=y[T];this.set(q[0],q[1])}}Kn.prototype.clear=yt,Kn.prototype.delete=pt,Kn.prototype.get=rr,Kn.prototype.has=Ds,Kn.prototype.set=Vr;var Mc=Kn;function jr(){this.__data__=[],this.size=0}var Ro=jr;function Pu(y,T){return y===T||y!==y&&T!==T}var oo=Pu;function Il(y,T){for(var U=y.length;U--;)if(oo(y[U][0],T))return U;return-1}var yi=Il,Ra=Array.prototype,kc=Ra.splice;function Os(y){var T=this.__data__,U=yi(T,y);if(U<0)return!1;var q=T.length-1;return U==q?T.pop():kc.call(T,U,1),--this.size,!0}var Ac=Os;function Fd(y){var T=this.__data__,U=yi(T,y);return U<0?void 0:T[U][1]}var Da=Fd;function ug(y){return yi(this.__data__,y)>-1}var xp=ug;function cg(y,T){var U=this.__data__,q=yi(U,y);return q<0?(++this.size,U.push([y,T])):U[q][1]=T,this}var P1=cg;function Rl(y){var T=-1,U=y==null?0:y.length;for(this.clear();++T<U;){var q=y[T];this.set(q[0],q[1])}}Rl.prototype.clear=Ro,Rl.prototype.delete=Ac,Rl.prototype.get=Da,Rl.prototype.has=xp,Rl.prototype.set=P1;var Bd=Rl,T1=el(at,"Map"),Ud=T1;function J0(){this.size=0,this.__data__={hash:new Mc,map:new(Ud||Bd),string:new Mc}}var ey=J0;function Dl(y){var T=typeof y;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?y!=="__proto__":y===null}var ty=Dl;function M1(y,T){var U=y.__data__;return ty(T)?U[typeof T=="string"?"string":"hash"]:U.map}var zd=M1;function dg(y){var T=zd(this,y).delete(y);return this.size-=T?1:0,T}var hg=dg;function pg(y){return zd(this,y).get(y)}var ny=pg;function ry(y){return zd(this,y).has(y)}var iy=ry;function sy(y,T){var U=zd(this,y),q=U.size;return U.set(y,T),this.size+=U.size==q?0:1,this}var k1=sy;function Ic(y){var T=-1,U=y==null?0:y.length;for(this.clear();++T<U;){var q=y[T];this.set(q[0],q[1])}}Ic.prototype.clear=ey,Ic.prototype.delete=hg,Ic.prototype.get=ny,Ic.prototype.has=iy,Ic.prototype.set=k1;var Vd=Ic,A1="Expected a function";function fg(y,T){if(typeof y!="function"||T!=null&&typeof T!="function")throw new TypeError(A1);var U=function(){var q=arguments,se=T?T.apply(this,q):q[0],fe=U.cache;if(fe.has(se))return fe.get(se);var De=y.apply(this,q);return U.cache=fe.set(se,De)||fe,De};return U.cache=new(fg.Cache||Vd),U}fg.Cache=Vd;var Ol=fg,Tu=500;function oy(y){var T=Ol(y,function(q){return U.size===Tu&&U.clear(),q}),U=T.cache;return T}var Sp=oy,I1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,R1=/\\(\\)?/g,ay=Sp(function(y){var T=[];return y.charCodeAt(0)===46&&T.push(""),y.replace(I1,function(U,q,se,fe){T.push(se?fe.replace(R1,"$1"):q||U)}),T}),D1=ay;function O1(y,T){for(var U=-1,q=y==null?0:y.length,se=Array(q);++U<q;)se[U]=T(y[U],U,y);return se}var ly=O1,uy=1/0,cy=Gt?Gt.prototype:void 0,mg=cy?cy.toString:void 0;function dy(y){if(typeof y=="string")return y;if(Qe(y))return ly(y,dy)+"";if(ln(y))return mg?mg.call(y):"";var T=y+"";return T=="0"&&1/y==-uy?"-0":T}var hy=dy;function py(y){return y==null?"":hy(y)}var gg=py;function Ep(y,T){return Qe(y)?y:gr(y,T)?[y]:D1(gg(y))}var Rc=Ep,fy=1/0;function L1(y){if(typeof y=="string"||ln(y))return y;var T=y+"";return T=="0"&&1/y==-fy?"-0":T}var Oa=L1;function jd(y,T){T=Rc(T,y);for(var U=0,q=T.length;y!=null&&U<q;)y=y[Oa(T[U++])];return U&&U==q?y:void 0}var Hd=jd;function Mu(y,T,U){var q=y==null?void 0:Hd(y,T);return q===void 0?U:q}var Ll=Mu;function vg(y,T){return T.length===0?y:Ll(y,T)}var ku=class{constructor(){Z(this,"_values",{})}get(y,T){if(this.has(y))return this._values[y];{const U=T();return this._values[y]=U,U}}has(y){return this._values.hasOwnProperty(y)}},ls=Ut,Gd=function(){try{var y=el(Object,"defineProperty");return y({},"",{}),y}catch{}}(),Cp=Gd;function N1(y,T,U){T=="__proto__"&&Cp?Cp(y,T,{configurable:!0,enumerable:!0,value:U,writable:!0}):y[T]=U}var Au=N1,Nl=Object.prototype,yg=Nl.hasOwnProperty;function F1(y,T,U){var q=y[T];(!(yg.call(y,T)&&oo(q,U))||U===void 0&&!(T in y))&&Au(y,T,U)}var Pp=F1,B1=9007199254740991,my=/^(?:0|[1-9]\d*)$/;function gy(y,T){var U=typeof y;return T=T??B1,!!T&&(U=="number"||U!="symbol"&&my.test(y))&&y>-1&&y%1==0&&y<T}var bg=gy;function U1(y,T,U,q){if(!Cn(y))return y;T=Rc(T,y);for(var se=-1,fe=T.length,De=fe-1,Ye=y;Ye!=null&&++se<fe;){var et=Oa(T[se]),St=U;if(et==="__proto__"||et==="constructor"||et==="prototype")return y;if(se!=De){var ae=Ye[et];St=q?q(ae,et,Ye):void 0,St===void 0&&(St=Cn(ae)?ae:bg(T[se+1])?[]:{})}Pp(Ye,et,St),Ye=Ye[et]}return y}var Tp=U1;function _g(y,T,U){return y==null?y:Tp(y,T,U)}var Mp=_g,us=new WeakMap;function z1(y){return wg(y)}function wg(y){if(us.has(y))return us.get(y);const T=y.type==="compound"?Sg(y):y.type==="enum"?xg(y):y.default;return us.set(y,T),T}function xg(y){const T={$case:y.defaultCase};for(const[U,q]of Object.entries(y.cases))T[U]=wg(q);return T}function Sg(y){const T={};for(const[U,q]of Object.entries(y.props))T[U]=wg(q);return T}var cs=Ut,kp=P(ge());function V1(y,T,U){return(0,cs.prism)(()=>{const q=(0,cs.val)(T);return cs.prism.memo("driver",()=>q?q.type==="BasicKeyframedTrack"?Ap(y,q,U):(y.logger.error("Track type not yet supported."),(0,cs.prism)(()=>{})):(0,cs.prism)(()=>{}),[q]).getValue()})}function Ap(y,T,U){return(0,cs.prism)(()=>{let q=cs.prism.ref("state",{started:!1}),se=q.current;const fe=U.getValue();return(!se.started||fe<se.validFrom||se.validTo<=fe)&&(q.current=se=j1(y,U,T)),se.der.getValue()})}var Ip=(0,cs.prism)(()=>{});function j1(y,T,U){const q=T.getValue();if(U.keyframes.length===0)return{started:!0,validFrom:-1/0,validTo:1/0,der:Ip};let se=0;for(;;){const fe=U.keyframes[se];if(!fe)return bi.error;const De=se===U.keyframes.length-1;if(q<fe.position)return se===0?bi.beforeFirstKeyframe(fe):bi.error;if(fe.position===q)return De?bi.lastKeyframe(fe):bi.between(fe,U.keyframes[se+1],T);if(se===U.keyframes.length-1)return bi.lastKeyframe(fe);{const Ye=se+1;if(U.keyframes[Ye].position<=q){se=Ye;continue}else return bi.between(fe,U.keyframes[se+1],T)}}}var bi={beforeFirstKeyframe(y){return{started:!0,validFrom:-1/0,validTo:y.position,der:(0,cs.prism)(()=>({left:y.value,progression:0}))}},lastKeyframe(y){return{started:!0,validFrom:y.position,validTo:1/0,der:(0,cs.prism)(()=>({left:y.value,progression:0}))}},between(y,T,U){if(!y.connectedRight)return{started:!0,validFrom:y.position,validTo:T.position,der:(0,cs.prism)(()=>({left:y.value,progression:0}))};const q=fe=>(fe-y.position)/(T.position-y.position);if(!y.type||y.type==="bezier"){const fe=new kp.default(y.handles[2],y.handles[3],T.handles[0],T.handles[1]),De=(0,cs.prism)(()=>{const Ye=q(U.getValue()),et=fe.solveSimple(Ye);return{left:y.value,right:T.value,progression:et}});return{started:!0,validFrom:y.position,validTo:T.position,der:De}}const se=(0,cs.prism)(()=>{const fe=q(U.getValue()),De=Math.floor(fe);return{left:y.value,right:T.value,progression:De}});return{started:!0,validFrom:y.position,validTo:T.position,der:se}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:Ip}};function Fl(y,T,U){const se=U.get(y);if(se&&se.override===T)return se.merged;const fe=R({},y);for(const De of Object.keys(T)){const Ye=T[De],et=y[De];fe[De]=typeof Ye=="object"&&typeof et=="object"?Fl(et,Ye,U):Ye===void 0?et:Ye}return U.set(y,{override:T,merged:fe}),fe}function Wd(y,T){let U=y;for(const q of T)U=U[q];return U}var Dc=Ut,Eg=(y,T)=>{const U=Dc.prism.memo(y,()=>new Dc.Atom(T),[]);return U.set(T),U},Hr=Ut,Cg=Ut,H1=/\s/;function Rp(y){for(var T=y.length;T--&&H1.test(y.charAt(T)););return T}var Pg=Rp,vy=/^\s+/;function G1(y){return y&&y.slice(0,Pg(y)+1).replace(vy,"")}var Oc=G1,Dp=0/0,W1=/^[-+]0x[0-9a-f]+$/i,yy=/^0b[01]+$/i,$d=/^0o[0-7]+$/i,Tg=parseInt;function $1(y){if(typeof y=="number")return y;if(ln(y))return Dp;if(Cn(y)){var T=typeof y.valueOf=="function"?y.valueOf():y;y=Cn(T)?T+"":T}if(typeof y!="string")return y===0?y:+y;y=Oc(y);var U=yy.test(y);return U||$d.test(y)?Tg(y.slice(2),U?2:8):W1.test(y)?Dp:+y}var ee=$1,_e=1/0,ze=17976931348623157e292;function xt(y){if(!y)return y===0?y:0;if(y=ee(y),y===_e||y===-_e){var T=y<0?-1:1;return T*ze}return y===y?y:0}var Gn=xt;function Mr(y){var T=Gn(y),U=T%1;return T===T?U?T-U:T:0}var Ss=Mr;function na(y){return y}var by=na,Lc=el(at,"WeakMap"),Nc=Lc,AM=Object.create,iB=function(){function y(){}return function(T){if(!Cn(T))return{};if(AM)return AM(T);y.prototype=T;var U=new y;return y.prototype=void 0,U}}(),IM=iB;function K1(y,T){var U=-1,q=y.length;for(T||(T=Array(q));++U<q;)T[U]=y[U];return T}var sB=K1;function X1(y,T){for(var U=-1,q=y==null?0:y.length;++U<q&&T(y[U],U,y)!==!1;);return y}var RM=X1;function DM(y,T,U,q){var se=!U;U||(U={});for(var fe=-1,De=T.length;++fe<De;){var Ye=T[fe],et=q?q(U[Ye],y[Ye],Ye,U,y):void 0;et===void 0&&(et=y[Ye]),se?Au(U,Ye,et):Pp(U,Ye,et)}return U}var Mg=DM,_y=9007199254740991;function q1(y){return typeof y=="number"&&y>-1&&y%1==0&&y<=_y}var Y1=q1;function OM(y){return y!=null&&Y1(y.length)&&!Yt(y)}var LM=OM,Z1=Object.prototype;function Q1(y){var T=y&&y.constructor,U=typeof T=="function"&&T.prototype||Z1;return y===U}var wy=Q1;function J1(y,T){for(var U=-1,q=Array(y);++U<y;)q[U]=T(U);return q}var NM=J1,FM="[object Arguments]";function xy(y){return At(y)&&Nt(y)==FM}var ex=xy,BM=Object.prototype,UM=BM.hasOwnProperty,zM=BM.propertyIsEnumerable,VM=ex(function(){return arguments}())?ex:function(y){return At(y)&&UM.call(y,"callee")&&!zM.call(y,"callee")},tx=VM;function jM(){return!1}var HM=jM,nx=e&&!e.nodeType&&e,rx=nx&&!0&&t&&!t.nodeType&&t,GM=rx&&rx.exports===nx,ix=GM?at.Buffer:void 0,WM=ix?ix.isBuffer:void 0,$M=WM||HM,kg=$M,KM="[object Arguments]",XM="[object Array]",qM="[object Boolean]",YM="[object Date]",ZM="[object Error]",QM="[object Function]",JM="[object Map]",ek="[object Number]",tk="[object Object]",nk="[object RegExp]",rk="[object Set]",ii="[object String]",ik="[object WeakMap]",oB="[object ArrayBuffer]",aB="[object DataView]",Sy="[object Float32Array]",sx="[object Float64Array]",ox="[object Int8Array]",Op="[object Int16Array]",sk="[object Int32Array]",Ey="[object Uint8Array]",ok="[object Uint8ClampedArray]",ax="[object Uint16Array]",lB="[object Uint32Array]",Qr={};Qr[Sy]=Qr[sx]=Qr[ox]=Qr[Op]=Qr[sk]=Qr[Ey]=Qr[ok]=Qr[ax]=Qr[lB]=!0,Qr[KM]=Qr[XM]=Qr[oB]=Qr[qM]=Qr[aB]=Qr[YM]=Qr[ZM]=Qr[QM]=Qr[JM]=Qr[ek]=Qr[tk]=Qr[nk]=Qr[rk]=Qr[ii]=Qr[ik]=!1;function ak(y){return At(y)&&Y1(y.length)&&!!Qr[Nt(y)]}var lx=ak;function lk(y){return function(T){return y(T)}}var ux=lk,cx=e&&!e.nodeType&&e,Lp=cx&&!0&&t&&!t.nodeType&&t,uk=Lp&&Lp.exports===cx,dx=uk&&je.process,uB=function(){try{var y=Lp&&Lp.require&&Lp.require("util").types;return y||dx&&dx.binding&&dx.binding("util")}catch{}}(),Fc=uB,hx=Fc&&Fc.isTypedArray,ck=hx?ux(hx):lx,px=ck,cB=Object.prototype,dB=cB.hasOwnProperty;function dk(y,T){var U=Qe(y),q=!U&&tx(y),se=!U&&!q&&kg(y),fe=!U&&!q&&!se&&px(y),De=U||q||se||fe,Ye=De?NM(y.length,String):[],et=Ye.length;for(var St in y)(T||dB.call(y,St))&&!(De&&(St=="length"||se&&(St=="offset"||St=="parent")||fe&&(St=="buffer"||St=="byteLength"||St=="byteOffset")||bg(St,et)))&&Ye.push(St);return Ye}var fx=dk;function hk(y,T){return function(U){return y(T(U))}}var pk=hk,hB=pk(Object.keys,Object),Cy=hB,mx=Object.prototype,pB=mx.hasOwnProperty;function fk(y){if(!wy(y))return Cy(y);var T=[];for(var U in Object(y))pB.call(y,U)&&U!="constructor"&&T.push(U);return T}var mk=fk;function Py(y){return LM(y)?fx(y):mk(y)}var Kd=Py;function gk(y){var T=[];if(y!=null)for(var U in Object(y))T.push(U);return T}var Np=gk,Ty=Object.prototype,fB=Ty.hasOwnProperty;function vk(y){if(!Cn(y))return Np(y);var T=wy(y),U=[];for(var q in y)q=="constructor"&&(T||!fB.call(y,q))||U.push(q);return U}var mB=vk;function gB(y){return LM(y)?fx(y,!0):mB(y)}var My=gB;function vB(y,T){for(var U=-1,q=T.length,se=y.length;++U<q;)y[se+U]=T[U];return y}var yk=vB,bk=pk(Object.getPrototypeOf,Object),ky=bk,_k="[object Object]",wk=Function.prototype,yB=Object.prototype,xk=wk.toString,Sk=yB.hasOwnProperty,Ek=xk.call(Object);function Ck(y){if(!At(y)||Nt(y)!=_k)return!1;var T=ky(y);if(T===null)return!0;var U=Sk.call(T,"constructor")&&T.constructor;return typeof U=="function"&&U instanceof U&&xk.call(U)==Ek}var bB=Ck;function _B(y,T,U){var q=-1,se=y.length;T<0&&(T=-T>se?0:se+T),U=U>se?se:U,U<0&&(U+=se),se=T>U?0:U-T>>>0,T>>>=0;for(var fe=Array(se);++q<se;)fe[q]=y[q+T];return fe}var gx=_B;function Pk(y,T,U){var q=y.length;return U=U===void 0?q:U,!T&&U>=q?y:gx(y,T,U)}var wB=Pk,Fp="\\ud800-\\udfff",vx="\\u0300-\\u036f",xB="\\ufe20-\\ufe2f",SB="\\u20d0-\\u20ff",Tk=vx+xB+SB,EB="\\ufe0e\\ufe0f",CB="\\u200d",Ag=RegExp("["+CB+Fp+Tk+EB+"]");function Ay(y){return Ag.test(y)}var yx=Ay;function Mk(y){return y.split("")}var kk=Mk,bx="\\ud800-\\udfff",PB="\\u0300-\\u036f",TB="\\ufe20-\\ufe2f",Ak="\\u20d0-\\u20ff",MB=PB+TB+Ak,kB="\\ufe0e\\ufe0f",Ik="["+bx+"]",_x="["+MB+"]",wx="\\ud83c[\\udffb-\\udfff]",Rk="(?:"+_x+"|"+wx+")",Dk="[^"+bx+"]",Xd="(?:\\ud83c[\\udde6-\\uddff]){2}",Bp="[\\ud800-\\udbff][\\udc00-\\udfff]",Iy="\\u200d",xx=Rk+"?",qd="["+kB+"]?",Sx="(?:"+Iy+"(?:"+[Dk,Xd,Bp].join("|")+")"+qd+xx+")*",AB=qd+xx+Sx,Ok="(?:"+[Dk+_x+"?",_x,Xd,Bp,Ik].join("|")+")",IB=RegExp(wx+"(?="+wx+")|"+Ok+AB,"g");function RB(y){return y.match(IB)||[]}var Lk=RB;function DB(y){return yx(y)?Lk(y):kk(y)}var OB=DB;function Ig(y,T,U){return y===y&&(U!==void 0&&(y=y<=U?y:U),T!==void 0&&(y=y>=T?y:T)),y}var Ry=Ig;function LB(y,T,U){return U===void 0&&(U=T,T=void 0),U!==void 0&&(U=ee(U),U=U===U?U:0),T!==void 0&&(T=ee(T),T=T===T?T:0),Ry(ee(y),T,U)}var Ex=LB;function NB(){this.__data__=new Bd,this.size=0}var FB=NB;function Nk(y){var T=this.__data__,U=T.delete(y);return this.size=T.size,U}var BB=Nk;function UB(y){return this.__data__.get(y)}var Fk=UB;function zB(y){return this.__data__.has(y)}var VB=zB,Bk=200;function jB(y,T){var U=this.__data__;if(U instanceof Bd){var q=U.__data__;if(!Ud||q.length<Bk-1)return q.push([y,T]),this.size=++U.size,this;U=this.__data__=new Vd(q)}return U.set(y,T),this.size=U.size,this}var Up=jB;function Bl(y){var T=this.__data__=new Bd(y);this.size=T.size}Bl.prototype.clear=FB,Bl.prototype.delete=BB,Bl.prototype.get=Fk,Bl.prototype.has=VB,Bl.prototype.set=Up;var Yd=Bl;function Cx(y,T){return y&&Mg(T,Kd(T),y)}var Uk=Cx;function Px(y,T){return y&&Mg(T,My(T),y)}var zk=Px,Vk=e&&!e.nodeType&&e,Tx=Vk&&!0&&t&&!t.nodeType&&t,jk=Tx&&Tx.exports===Vk,Hk=jk?at.Buffer:void 0,Mx=Hk?Hk.allocUnsafe:void 0;function Gk(y,T){if(T)return y.slice();var U=y.length,q=Mx?Mx(U):new y.constructor(U);return y.copy(q),q}var Wk=Gk;function $k(y,T){for(var U=-1,q=y==null?0:y.length,se=0,fe=[];++U<q;){var De=y[U];T(De,U,y)&&(fe[se++]=De)}return fe}var HB=$k;function GB(){return[]}var Rg=GB,Kk=Object.prototype,WB=Kk.propertyIsEnumerable,Dg=Object.getOwnPropertySymbols,kx=Dg?function(y){return y==null?[]:(y=Object(y),HB(Dg(y),function(T){return WB.call(y,T)}))}:Rg,Ax=kx;function Xk(y,T){return Mg(y,Ax(y),T)}var zp=Xk,Og=Object.getOwnPropertySymbols,$B=Og?function(y){for(var T=[];y;)yk(T,Ax(y)),y=ky(y);return T}:Rg,Lg=$B;function Ix(y,T){return Mg(y,Lg(y),T)}var KB=Ix;function Zd(y,T,U){var q=T(y);return Qe(y)?q:yk(q,U(y))}var Vp=Zd;function XB(y){return Vp(y,Kd,Ax)}var Ng=XB;function qk(y){return Vp(y,My,Lg)}var qB=qk,Rx=el(at,"DataView"),Dy=Rx,YB=el(at,"Promise"),Oy=YB,Yk=el(at,"Set"),Dx=Yk,Ox="[object Map]",Zk="[object Object]",Qk="[object Promise]",Jk="[object Set]",Lx="[object WeakMap]",Nx="[object DataView]",eA=hr(Dy),Fx=hr(Ud),tA=hr(Oy),nA=hr(Dx),Ly=hr(Nc),Bc=Nt;(Dy&&Bc(new Dy(new ArrayBuffer(1)))!=Nx||Ud&&Bc(new Ud)!=Ox||Oy&&Bc(Oy.resolve())!=Qk||Dx&&Bc(new Dx)!=Jk||Nc&&Bc(new Nc)!=Lx)&&(Bc=function(y){var T=Nt(y),U=T==Zk?y.constructor:void 0,q=U?hr(U):"";if(q)switch(q){case eA:return Nx;case Fx:return Ox;case tA:return Qk;case nA:return Jk;case Ly:return Lx}return T});var Fg=Bc,rA=Object.prototype,iA=rA.hasOwnProperty;function sA(y){var T=y.length,U=new y.constructor(T);return T&&typeof y[0]=="string"&&iA.call(y,"index")&&(U.index=y.index,U.input=y.input),U}var ZB=sA,QB=at.Uint8Array,Bg=QB;function JB(y){var T=new y.constructor(y.byteLength);return new Bg(T).set(new Bg(y)),T}var Bx=JB;function _i(y,T){var U=T?Bx(y.buffer):y.buffer;return new y.constructor(U,y.byteOffset,y.byteLength)}var Ny=_i,eU=/\w*$/;function oA(y){var T=new y.constructor(y.source,eU.exec(y));return T.lastIndex=y.lastIndex,T}var tU=oA,aA=Gt?Gt.prototype:void 0,Ux=aA?aA.valueOf:void 0;function nU(y){return Ux?Object(Ux.call(y)):{}}var rU=nU;function lA(y,T){var U=T?Bx(y.buffer):y.buffer;return new y.constructor(U,y.byteOffset,y.length)}var iU=lA,sU="[object Boolean]",uA="[object Date]",oU="[object Map]",aU="[object Number]",cA="[object RegExp]",dA="[object Set]",lU="[object String]",jp="[object Symbol]",Ug="[object ArrayBuffer]",hA="[object DataView]",uU="[object Float32Array]",pA="[object Float64Array]",cU="[object Int8Array]",dU="[object Int16Array]",fA="[object Int32Array]",hU="[object Uint8Array]",mA="[object Uint8ClampedArray]",gA="[object Uint16Array]",zx="[object Uint32Array]";function vA(y,T,U){var q=y.constructor;switch(T){case Ug:return Bx(y);case sU:case uA:return new q(+y);case hA:return Ny(y,U);case uU:case pA:case cU:case dU:case fA:case hU:case mA:case gA:case zx:return iU(y,U);case oU:return new q;case aU:case lU:return new q(y);case cA:return tU(y);case dA:return new q;case jp:return rU(y)}}var yA=vA;function pU(y){return typeof y.constructor=="function"&&!wy(y)?IM(ky(y)):{}}var fU=pU,bA="[object Map]";function mU(y){return At(y)&&Fg(y)==bA}var gU=mU,Fy=Fc&&Fc.isMap,vU=Fy?ux(Fy):gU,_A=vU,By="[object Set]";function yU(y){return At(y)&&Fg(y)==By}var wA=yU,zg=Fc&&Fc.isSet,bU=zg?ux(zg):wA,xA=bU,Qd=1,SA=2,Vx=4,jx="[object Arguments]",Hx="[object Array]",Gx="[object Boolean]",Wx="[object Date]",$x="[object Error]",Kx="[object Function]",EA="[object GeneratorFunction]",CA="[object Map]",PA="[object Number]",Xx="[object Object]",Uc="[object RegExp]",qx="[object Set]",_U="[object String]",TA="[object Symbol]",Yx="[object WeakMap]",wU="[object ArrayBuffer]",xU="[object DataView]",MA="[object Float32Array]",kA="[object Float64Array]",SU="[object Int8Array]",EU="[object Int16Array]",AA="[object Int32Array]",CU="[object Uint8Array]",Uy="[object Uint8ClampedArray]",Zx="[object Uint16Array]",IA="[object Uint32Array]",si={};si[jx]=si[Hx]=si[wU]=si[xU]=si[Gx]=si[Wx]=si[MA]=si[kA]=si[SU]=si[EU]=si[AA]=si[CA]=si[PA]=si[Xx]=si[Uc]=si[qx]=si[_U]=si[TA]=si[CU]=si[Uy]=si[Zx]=si[IA]=!0,si[$x]=si[Kx]=si[Yx]=!1;function Vg(y,T,U,q,se,fe){var De,Ye=T&Qd,et=T&SA,St=T&Vx;if(U&&(De=se?U(y,q,se,fe):U(y)),De!==void 0)return De;if(!Cn(y))return y;var ae=Qe(y);if(ae){if(De=ZB(y),!Ye)return sB(y,De)}else{var Ve=Fg(y),Zt=Ve==Kx||Ve==EA;if(kg(y))return Wk(y,Ye);if(Ve==Xx||Ve==jx||Zt&&!se){if(De=et||Zt?{}:fU(y),!Ye)return et?KB(y,zk(De,y)):zp(y,Uk(De,y))}else{if(!si[Ve])return se?y:{};De=yA(y,Ve,Ye)}}fe||(fe=new Yd);var In=fe.get(y);if(In)return In;fe.set(y,De),xA(y)?y.forEach(function(lr){De.add(Vg(lr,T,U,lr,y,fe))}):_A(y)&&y.forEach(function(lr,er){De.set(er,Vg(lr,T,U,er,y,fe))});var bn=St?et?qB:Ng:et?My:Kd,ar=ae?void 0:bn(y);return RM(ar||y,function(lr,er){ar&&(er=lr,lr=y[er]),Pp(De,er,Vg(lr,T,U,er,y,fe))}),De}var PU=Vg,TU=1,Qx=4;function RA(y){return PU(y,TU|Qx)}var MU=RA,DA="__lodash_hash_undefined__";function OA(y){return this.__data__.set(y,DA),this}var Jx=OA;function LA(y){return this.__data__.has(y)}var kU=LA;function jg(y){var T=-1,U=y==null?0:y.length;for(this.__data__=new Vd;++T<U;)this.add(y[T])}jg.prototype.add=jg.prototype.push=Jx,jg.prototype.has=kU;var AU=jg;function IU(y,T){for(var U=-1,q=y==null?0:y.length;++U<q;)if(T(y[U],U,y))return!0;return!1}var zy=IU;function eS(y,T){return y.has(T)}var RU=eS,NA=1,FA=2;function BA(y,T,U,q,se,fe){var De=U&NA,Ye=y.length,et=T.length;if(Ye!=et&&!(De&&et>Ye))return!1;var St=fe.get(y),ae=fe.get(T);if(St&&ae)return St==T&&ae==y;var Ve=-1,Zt=!0,In=U&FA?new AU:void 0;for(fe.set(y,T),fe.set(T,y);++Ve<Ye;){var bn=y[Ve],ar=T[Ve];if(q)var lr=De?q(ar,bn,Ve,T,y,fe):q(bn,ar,Ve,y,T,fe);if(lr!==void 0){if(lr)continue;Zt=!1;break}if(In){if(!zy(T,function(er,Ir){if(!RU(In,Ir)&&(bn===er||se(bn,er,U,q,fe)))return In.push(Ir)})){Zt=!1;break}}else if(!(bn===ar||se(bn,ar,U,q,fe))){Zt=!1;break}}return fe.delete(y),fe.delete(T),Zt}var tS=BA;function UA(y){var T=-1,U=Array(y.size);return y.forEach(function(q,se){U[++T]=[se,q]}),U}var zA=UA;function VA(y){var T=-1,U=Array(y.size);return y.forEach(function(q){U[++T]=q}),U}var jA=VA,HA=1,GA=2,WA="[object Boolean]",$A="[object Date]",KA="[object Error]",nS="[object Map]",Vy="[object Number]",XA="[object RegExp]",DU="[object Set]",OU="[object String]",qA="[object Symbol]",YA="[object ArrayBuffer]",ZA="[object DataView]",rS=Gt?Gt.prototype:void 0,iS=rS?rS.valueOf:void 0;function LU(y,T,U,q,se,fe,De){switch(U){case ZA:if(y.byteLength!=T.byteLength||y.byteOffset!=T.byteOffset)return!1;y=y.buffer,T=T.buffer;case YA:return!(y.byteLength!=T.byteLength||!fe(new Bg(y),new Bg(T)));case WA:case $A:case Vy:return oo(+y,+T);case KA:return y.name==T.name&&y.message==T.message;case XA:case OU:return y==T+"";case nS:var Ye=zA;case DU:var et=q&HA;if(Ye||(Ye=jA),y.size!=T.size&&!et)return!1;var St=De.get(y);if(St)return St==T;q|=GA,De.set(y,T);var ae=tS(Ye(y),Ye(T),q,se,fe,De);return De.delete(y),ae;case qA:if(iS)return iS.call(y)==iS.call(T)}return!1}var QA=LU,sS=1,oS=Object.prototype,Hg=oS.hasOwnProperty;function JA(y,T,U,q,se,fe){var De=U&sS,Ye=Ng(y),et=Ye.length,St=Ng(T),ae=St.length;if(et!=ae&&!De)return!1;for(var Ve=et;Ve--;){var Zt=Ye[Ve];if(!(De?Zt in T:Hg.call(T,Zt)))return!1}var In=fe.get(y),bn=fe.get(T);if(In&&bn)return In==T&&bn==y;var ar=!0;fe.set(y,T),fe.set(T,y);for(var lr=De;++Ve<et;){Zt=Ye[Ve];var er=y[Zt],Ir=T[Zt];if(q)var $s=De?q(Ir,er,Zt,T,y,fe):q(er,Ir,Zt,y,T,fe);if(!($s===void 0?er===Ir||se(er,Ir,U,q,fe):$s)){ar=!1;break}lr||(lr=Zt=="constructor")}if(ar&&!lr){var Ks=y.constructor,Xs=T.constructor;Ks!=Xs&&"constructor"in y&&"constructor"in T&&!(typeof Ks=="function"&&Ks instanceof Ks&&typeof Xs=="function"&&Xs instanceof Xs)&&(ar=!1)}return fe.delete(y),fe.delete(T),ar}var aS=JA,e2=1,t2="[object Arguments]",lS="[object Array]",Hp="[object Object]",n2=Object.prototype,r2=n2.hasOwnProperty;function i2(y,T,U,q,se,fe){var De=Qe(y),Ye=Qe(T),et=De?lS:Fg(y),St=Ye?lS:Fg(T);et=et==t2?Hp:et,St=St==t2?Hp:St;var ae=et==Hp,Ve=St==Hp,Zt=et==St;if(Zt&&kg(y)){if(!kg(T))return!1;De=!0,ae=!1}if(Zt&&!ae)return fe||(fe=new Yd),De||px(y)?tS(y,T,U,q,se,fe):QA(y,T,et,U,q,se,fe);if(!(U&e2)){var In=ae&&r2.call(y,"__wrapped__"),bn=Ve&&r2.call(T,"__wrapped__");if(In||bn){var ar=In?y.value():y,lr=bn?T.value():T;return fe||(fe=new Yd),se(ar,lr,U,q,fe)}}return Zt?(fe||(fe=new Yd),aS(y,T,U,q,se,fe)):!1}var s2=i2;function uS(y,T,U,q,se){return y===T?!0:y==null||T==null||!At(y)&&!At(T)?y!==y&&T!==T:s2(y,T,U,q,uS,se)}var o2=uS,NU=1,cS=2;function a2(y,T,U,q){var se=U.length,fe=se,De=!q;if(y==null)return!fe;for(y=Object(y);se--;){var Ye=U[se];if(De&&Ye[2]?Ye[1]!==y[Ye[0]]:!(Ye[0]in y))return!1}for(;++se<fe;){Ye=U[se];var et=Ye[0],St=y[et],ae=Ye[1];if(De&&Ye[2]){if(St===void 0&&!(et in y))return!1}else{var Ve=new Yd;if(q)var Zt=q(St,ae,et,y,T,Ve);if(!(Zt===void 0?o2(ae,St,NU|cS,q,Ve):Zt))return!1}}return!0}var FU=a2;function l2(y){return y===y&&!Cn(y)}var u2=l2;function BU(y){for(var T=Kd(y),U=T.length;U--;){var q=T[U],se=y[q];T[U]=[q,se,u2(se)]}return T}var dS=BU;function c2(y,T){return function(U){return U==null?!1:U[y]===T&&(T!==void 0||y in Object(U))}}var d2=c2;function h2(y){var T=dS(y);return T.length==1&&T[0][2]?d2(T[0][0],T[0][1]):function(U){return U===y||FU(U,y,T)}}var UU=h2;function zU(y,T){return y!=null&&T in Object(y)}var p2=zU;function VU(y,T,U){T=Rc(T,y);for(var q=-1,se=T.length,fe=!1;++q<se;){var De=Oa(T[q]);if(!(fe=y!=null&&U(y,De)))break;y=y[De]}return fe||++q!=se?fe:(se=y==null?0:y.length,!!se&&Y1(se)&&bg(De,se)&&(Qe(y)||tx(y)))}var jU=VU;function f2(y,T){return y!=null&&jU(y,T,p2)}var HU=f2,GU=1,m2=2;function WU(y,T){return gr(y)&&u2(T)?d2(Oa(y),T):function(U){var q=Ll(U,y);return q===void 0&&q===T?HU(U,y):o2(T,q,GU|m2)}}var $U=WU;function g2(y){return function(T){return T==null?void 0:T[y]}}var hS=g2;function v2(y){return function(T){return Hd(T,y)}}var KU=v2;function XU(y){return gr(y)?hS(Oa(y)):KU(y)}var y2=XU;function qU(y){return typeof y=="function"?y:y==null?by:typeof y=="object"?Qe(y)?$U(y[0],y[1]):UU(y):y2(y)}var YU=qU;function b2(y){return function(T,U,q){for(var se=-1,fe=Object(T),De=q(T),Ye=De.length;Ye--;){var et=De[y?Ye:++se];if(U(fe[et],et,fe)===!1)break}return T}}var ZU=b2,QU=ZU(),_2=QU;function JU(y,T){return y&&_2(y,T,Kd)}var e5=JU,Gp=function(){return at.Date.now()},Jd=Gp,t5="Expected a function",w2=Math.max,n5=Math.min;function r5(y,T,U){var q,se,fe,De,Ye,et,St=0,ae=!1,Ve=!1,Zt=!0;if(typeof y!="function")throw new TypeError(t5);T=ee(T)||0,Cn(U)&&(ae=!!U.leading,Ve="maxWait"in U,fe=Ve?w2(ee(U.maxWait)||0,T):fe,Zt="trailing"in U?!!U.trailing:Zt);function In(Jr){var qs=q,sa=se;return q=se=void 0,St=Jr,De=y.apply(sa,qs),De}function bn(Jr){return St=Jr,Ye=setTimeout(er,T),ae?In(Jr):De}function ar(Jr){var qs=Jr-et,sa=Jr-St,Vl=T-qs;return Ve?n5(Vl,fe-sa):Vl}function lr(Jr){var qs=Jr-et,sa=Jr-St;return et===void 0||qs>=T||qs<0||Ve&&sa>=fe}function er(){var Jr=Jd();if(lr(Jr))return Ir(Jr);Ye=setTimeout(er,ar(Jr))}function Ir(Jr){return Ye=void 0,Zt&&q?In(Jr):(q=se=void 0,De)}function $s(){Ye!==void 0&&clearTimeout(Ye),St=0,q=et=se=Ye=void 0}function Ks(){return Ye===void 0?De:Ir(Jd())}function Xs(){var Jr=Jd(),qs=lr(Jr);if(q=arguments,se=this,et=Jr,qs){if(Ye===void 0)return bn(et);if(Ve)return clearTimeout(Ye),Ye=setTimeout(er,T),In(et)}return Ye===void 0&&(Ye=setTimeout(er,T)),De}return Xs.cancel=$s,Xs.flush=Ks,Xs}var x2=r5;function i5(y){var T=y==null?0:y.length;return T?y[T-1]:void 0}var S2=i5;function E2(y,T){return T.length<2?y:Hd(y,gx(T,0,-1))}var s5=E2;function o5(y){return typeof y=="number"&&y==Ss(y)}var pS=o5;function C2(y,T){var U={};return T=YU(T),e5(y,function(q,se,fe){Au(U,se,T(q,se,fe))}),U}var a5=C2;function P2(y,T){return T=Rc(T,y),y=s5(y,T),y==null||delete y[Oa(S2(T))]}var l5=P2,T2=9007199254740991,fS=Math.floor;function M2(y,T){var U="";if(!y||T<1||T>T2)return U;do T%2&&(U+=y),T=fS(T/2),T&&(y+=y);while(T);return U}var k2=M2,A2=hS("length"),u5=A2,I2="\\ud800-\\udfff",R2="\\u0300-\\u036f",c5="\\ufe20-\\ufe2f",D2="\\u20d0-\\u20ff",jy=R2+c5+D2,d5="\\ufe0e\\ufe0f",h5="["+I2+"]",Hy="["+jy+"]",Gy="\\ud83c[\\udffb-\\udfff]",O2="(?:"+Hy+"|"+Gy+")",Wy="[^"+I2+"]",mS="(?:\\ud83c[\\udde6-\\uddff]){2}",L2="[\\ud800-\\udbff][\\udc00-\\udfff]",N2="\\u200d",F2=O2+"?",B2="["+d5+"]?",eh="(?:"+N2+"(?:"+[Wy,mS,L2].join("|")+")"+B2+F2+")*",$y=B2+F2+eh,p5="(?:"+[Wy+Hy+"?",Hy,mS,L2,h5].join("|")+")",gS=RegExp(Gy+"(?="+Gy+")|"+p5+$y,"g");function vS(y){for(var T=gS.lastIndex=0;gS.test(y);)++T;return T}var f5=vS;function m5(y){return yx(y)?f5(y):u5(y)}var yS=m5,U2=Math.ceil;function z2(y,T){T=T===void 0?" ":hy(T);var U=T.length;if(U<2)return U?k2(T,y):T;var q=k2(T,U2(y/yS(T)));return yx(T)?wB(OB(q),0,y).join(""):q.slice(0,y)}var g5=z2;function v5(y,T,U){y=gg(y),T=Ss(T);var q=T?yS(y):0;return T&&q<T?g5(T-q,U)+y:y}var Wp=v5;function y5(y,T){return y==null?!0:l5(y,T)}var V2=y5,j2=5*1e3,H2=class{constructor(y){Z(this,"_cache",new ku),Z(this,"_keepHotUntapDebounce"),wt(this,y)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return Me(this).propsP}get sheet(){return Me(this).sheet.publicApi}get project(){return Me(this).sheet.project.publicApi}get address(){return R({},Me(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",()=>{const y=Me(this);return(0,Cg.prism)(()=>(0,Cg.val)(y.getValues().getValue()))})}onValuesChange(y,T){return fb(this._valuesPrism(),y,T)}get value(){const y=this._valuesPrism();{if(!y.isHot){this._keepHotUntapDebounce!=null&&this._keepHotUntapDebounce.flush();const T=y.keepHot();this._keepHotUntapDebounce=x2(()=>{T(),this._keepHotUntapDebounce=void 0},j2)}this._keepHotUntapDebounce&&this._keepHotUntapDebounce()}return y.getValue()}set initialValue(y){Me(this).setInitialValue(y)}};function G2(y){const T=new WeakMap;return U=>(T.has(U)||T.set(U,y(U)),T.get(U))}function Ky(y){return y.type==="compound"||y.type==="enum"}function bS(y,T){if(!y)return;const[U,...q]=T;if(U===void 0)return y;if(!Ky(y))return;const se=y.type==="enum"?y.cases[U]:y.props[U];return bS(se,q)}function _S(y){return!Ky(y)}var b5=class{constructor(y,T,U){this.sheet=y,this.template=T,this.nativeObject=U,Z(this,"$$isPointerToPrismProvider",!0),Z(this,"address"),Z(this,"publicApi"),Z(this,"_initialValue",new Hr.Atom({})),Z(this,"_cache",new ku),Z(this,"_logger"),Z(this,"_internalUtilCtx"),this._logger=y._logger.named("SheetObject",T.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=j(R({},T.address),{sheetInstanceId:y.address.sheetInstanceId}),this.publicApi=new H2(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",()=>(0,Hr.prism)(()=>{const y=(0,Hr.val)(this.template.getDefaultValues()),T=(0,Hr.val)(this._initialValue.pointer),U=Hr.prism.memo("withInitialCache",()=>new WeakMap,[]),q=Fl(y,T,U),se=(0,Hr.val)(this.template.getStaticValues()),fe=Hr.prism.memo("withStatics",()=>new WeakMap,[]);let Ye=Fl(q,se,fe),et;{const ae=Hr.prism.memo("seq",()=>this.getSequencedValues(),[]),Ve=Hr.prism.memo("withSeqsCache",()=>new WeakMap,[]);et=(0,Hr.val)((0,Hr.val)(ae)),Ye=Fl(Ye,et,Ve)}return Eg("finalAtom",Ye).pointer}))}getValueByPointer(y){const T=(0,Hr.val)(this.getValues()),{path:U}=(0,Hr.getPointerParts)(y);return(0,Hr.val)(Wd(T,U))}pointerToPrism(y){const{path:T}=(0,Hr.getPointerParts)(y);return(0,Hr.prism)(()=>{const U=(0,Hr.val)(this.getValues());return(0,Hr.val)(Wd(U,T))})}getSequencedValues(){return(0,Hr.prism)(()=>{const y=Hr.prism.memo("tracksToProcess",()=>this.template.getArrayOfValidSequenceTracks(),[]),T=(0,Hr.val)(y),U=new Hr.Atom({}),q=(0,Hr.val)(this.template.configPointer);return Hr.prism.effect("processTracks",()=>{const se=[];for(const{trackId:fe,pathToProp:De}of T){const Ye=this._trackIdToPrism(fe),et=bS(q,De),St=et.deserializeAndSanitize,ae=et.interpolate,Ve=()=>{const In=Ye.getValue();if(!In)return U.setByPointer(Ir=>Wd(Ir,De),void 0);const bn=St(In.left),ar=bn===void 0?et.default:bn;if(In.right===void 0)return U.setByPointer(Ir=>Wd(Ir,De),ar);const lr=St(In.right),er=lr===void 0?et.default:lr;return U.setByPointer(Ir=>Wd(Ir,De),ae(ar,er,In.progression))},Zt=Ye.onStale(Ve);Ve(),se.push(Zt)}return()=>{for(const fe of se)fe()}},[q,...T]),U.pointer})}_trackIdToPrism(y){const T=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[y],U=this.sheet.getSequence().positionPrism;return V1(this._internalUtilCtx,T,U)}get propsP(){return this._cache.get("propsP",()=>(0,Hr.pointer)({root:this,path:[]}))}validateValue(y,T){}setInitialValue(y){this.validateValue(this.propsP,y),this._initialValue.set(y)}};function oi(y){return function(U,q){return y(U,q())}}var Do={_hmm:ra(524),_todo:ra(522),_error:ra(521),errorDev:ra(529),errorPublic:ra(545),_kapow:ra(268),_warn:ra(265),warnDev:ra(273),warnPublic:ra(289),_debug:ra(137),debugDev:ra(145),_trace:ra(73),traceDev:ra(81)};function ra(y){return Object.freeze({audience:zc(y,8)?"internal":zc(y,16)?"dev":"public",category:zc(y,4)?"troubleshooting":zc(y,2)?"todo":"general",level:zc(y,512)?512:zc(y,256)?256:zc(y,128)?128:64})}function zc(y,T){return(y&T)===T}function Gr(y,T){return((T&32)===32?!0:(T&16)===16?y.dev:(T&8)===8?y.internal:!1)&&y.min<=T}var Iu={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(y,T,U){return this.create({names:[...y.names,{name:T,key:U}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(y){if(y.length<5)return y;const T=y.replace(this.collapseOnRE,"");return this.cssMemo.has(T)||this.cssMemo.set(T,this.css(y)),T},css(y){var T,U,q,se;const fe=this.cssMemo.get(y);if(fe)return fe;let De="color:".concat((U=(T=this.color)==null?void 0:T.call(this,y))!=null?U:"hsl(".concat((y.charCodeAt(0)+y.charCodeAt(y.length-1))%360,", 100%, 60%)"));return(q=this.bold)!=null&&q.test(y)&&(De+=";font-weight:600"),(se=this.italic)!=null&&se.test(y)&&(De+=";font-style:italic"),this.cssMemo.set(y,De),De}}};function W2(y=console,T={}){const U=j(R({},Iu),{includes:R({},Iu.includes)}),q={styled:_5.bind(U,y),noStyle:w5.bind(U,y)},se=$2.bind(U);function fe(){return U.loggingConsoleStyle&&U.loggerConsoleStyle?q.styled:q.noStyle}return U.create=fe(),{configureLogger(De){var Ye;De==="console"?(U.loggerConsoleStyle=Iu.loggerConsoleStyle,U.create=fe()):De.type==="console"?(U.loggerConsoleStyle=(Ye=De.style)!=null?Ye:Iu.loggerConsoleStyle,U.create=fe()):De.type==="keyed"?(U.creatExt=et=>De.keyed(et.names),U.create=se):De.type==="named"&&(U.creatExt=th.bind(null,De.named),U.create=se)},configureLogging(De){var Ye,et,St,ae,Ve;U.includes.dev=(Ye=De.dev)!=null?Ye:Iu.includes.dev,U.includes.internal=(et=De.internal)!=null?et:Iu.includes.internal,U.includes.min=(St=De.min)!=null?St:Iu.includes.min,U.include=(ae=De.include)!=null?ae:Iu.include,U.loggingConsoleStyle=(Ve=De.consoleStyle)!=null?Ve:Iu.loggingConsoleStyle,U.create=fe()},getLogger(){return U.create({names:[]})}}}function th(y,T){const U=[];for(let{name:q,key:se}of T.names)U.push(se==null?q:"".concat(q," (").concat(se,")"));return y(U)}function $2(y){const T=R(R({},this.includes),this.include(y)),U=this.filtered,q=this.named.bind(this,y),se=this.creatExt(y),fe=Gr(T,524),De=Gr(T,522),Ye=Gr(T,521),et=Gr(T,529),St=Gr(T,545),ae=Gr(T,265),Ve=Gr(T,268),Zt=Gr(T,273),In=Gr(T,289),bn=Gr(T,137),ar=Gr(T,145),lr=Gr(T,73),er=Gr(T,81),Ir=fe?se.error.bind(se,Do._hmm):U.bind(y,524),$s=De?se.error.bind(se,Do._todo):U.bind(y,522),Ks=Ye?se.error.bind(se,Do._error):U.bind(y,521),Xs=et?se.error.bind(se,Do.errorDev):U.bind(y,529),Jr=St?se.error.bind(se,Do.errorPublic):U.bind(y,545),qs=Ve?se.warn.bind(se,Do._kapow):U.bind(y,268),sa=ae?se.warn.bind(se,Do._warn):U.bind(y,265),Vl=Zt?se.warn.bind(se,Do.warnDev):U.bind(y,273),jl=In?se.warn.bind(se,Do.warnPublic):U.bind(y,273),lh=bn?se.debug.bind(se,Do._debug):U.bind(y,137),Uu=ar?se.debug.bind(se,Do.debugDev):U.bind(y,145),uh=lr?se.trace.bind(se,Do._trace):U.bind(y,73),ch=er?se.trace.bind(se,Do.traceDev):U.bind(y,81),Ji={_hmm:Ir,_todo:$s,_error:Ks,errorDev:Xs,errorPublic:Jr,_kapow:qs,_warn:sa,warnDev:Vl,warnPublic:jl,_debug:lh,debugDev:Uu,_trace:uh,traceDev:ch,lazy:{_hmm:fe?oi(Ir):Ir,_todo:De?oi($s):$s,_error:Ye?oi(Ks):Ks,errorDev:et?oi(Xs):Xs,errorPublic:St?oi(Jr):Jr,_kapow:Ve?oi(qs):qs,_warn:ae?oi(sa):sa,warnDev:Zt?oi(Vl):Vl,warnPublic:In?oi(jl):jl,_debug:bn?oi(lh):lh,debugDev:ar?oi(Uu):Uu,_trace:lr?oi(uh):uh,traceDev:er?oi(ch):ch},named:q,utilFor:{internal(){return{debug:Ji._debug,error:Ji._error,warn:Ji._warn,trace:Ji._trace,named(oa,ai){return Ji.named(oa,ai).utilFor.internal()}}},dev(){return{debug:Ji.debugDev,error:Ji.errorDev,warn:Ji.warnDev,trace:Ji.traceDev,named(oa,ai){return Ji.named(oa,ai).utilFor.dev()}}},public(){return{error:Ji.errorPublic,warn:Ji.warnPublic,debug(oa,ai){Ji._warn('(public "debug" filtered out) '.concat(oa),ai)},trace(oa,ai){Ji._warn('(public "trace" filtered out) '.concat(oa),ai)},named(oa,ai){return Ji.named(oa,ai).utilFor.public()}}}}};return Ji}function _5(y,T){const U=R(R({},this.includes),this.include(T)),q=[];let se="";for(let et=0;et<T.names.length;et++){const{name:St,key:ae}=T.names[et];if(se+=" %c".concat(St),q.push(this.style.css(St)),ae!=null){const Ve="%c#".concat(ae);se+=Ve,q.push(this.style.css(Ve))}}const fe=this.filtered,De=this.named.bind(this,T),Ye=[se,...q];return X2(fe,T,U,y,Ye,K2(Ye),De)}function K2(y){const T=y.slice(0);for(let U=1;U<T.length;U++)T[U]+=";background-color:#e0005a;padding:2px;color:white";return T}function w5(y,T){const U=R(R({},this.includes),this.include(T));let q="";for(let Ye=0;Ye<T.names.length;Ye++){const{name:et,key:St}=T.names[Ye];q+=" ".concat(et),St!=null&&(q+="#".concat(St))}const se=this.filtered,fe=this.named.bind(this,T),De=[q];return X2(se,T,U,y,De,De,fe)}function X2(y,T,U,q,se,fe,De){const Ye=Gr(U,524),et=Gr(U,522),St=Gr(U,521),ae=Gr(U,529),Ve=Gr(U,545),Zt=Gr(U,265),In=Gr(U,268),bn=Gr(U,273),ar=Gr(U,289),lr=Gr(U,137),er=Gr(U,145),Ir=Gr(U,73),$s=Gr(U,81),Ks=Ye?q.error.bind(q,...se):y.bind(T,524),Xs=et?q.error.bind(q,...se):y.bind(T,522),Jr=St?q.error.bind(q,...se):y.bind(T,521),qs=ae?q.error.bind(q,...se):y.bind(T,529),sa=Ve?q.error.bind(q,...se):y.bind(T,545),Vl=In?q.warn.bind(q,...fe):y.bind(T,268),jl=Zt?q.warn.bind(q,...se):y.bind(T,265),lh=bn?q.warn.bind(q,...se):y.bind(T,273),Uu=ar?q.warn.bind(q,...se):y.bind(T,273),uh=lr?q.info.bind(q,...se):y.bind(T,137),ch=er?q.info.bind(q,...se):y.bind(T,145),Ji=Ir?q.debug.bind(q,...se):y.bind(T,73),oa=$s?q.debug.bind(q,...se):y.bind(T,81),ai={_hmm:Ks,_todo:Xs,_error:Jr,errorDev:qs,errorPublic:sa,_kapow:Vl,_warn:jl,warnDev:lh,warnPublic:Uu,_debug:uh,debugDev:ch,_trace:Ji,traceDev:oa,lazy:{_hmm:Ye?oi(Ks):Ks,_todo:et?oi(Xs):Xs,_error:St?oi(Jr):Jr,errorDev:ae?oi(qs):qs,errorPublic:Ve?oi(sa):sa,_kapow:In?oi(Vl):Vl,_warn:Zt?oi(jl):jl,warnDev:bn?oi(lh):lh,warnPublic:ar?oi(Uu):Uu,_debug:lr?oi(uh):uh,debugDev:er?oi(ch):ch,_trace:Ir?oi(Ji):Ji,traceDev:$s?oi(oa):oa},named:De,utilFor:{internal(){return{debug:ai._debug,error:ai._error,warn:ai._warn,trace:ai._trace,named(Hl,rl){return ai.named(Hl,rl).utilFor.internal()}}},dev(){return{debug:ai.debugDev,error:ai.errorDev,warn:ai.warnDev,trace:ai.traceDev,named(Hl,rl){return ai.named(Hl,rl).utilFor.dev()}}},public(){return{error:ai.errorPublic,warn:ai.warnPublic,debug(Hl,rl){ai._warn('(public "debug" filtered out) '.concat(Hl),rl)},trace(Hl,rl){ai._warn('(public "trace" filtered out) '.concat(Hl),rl)},named(Hl,rl){return ai.named(Hl,rl).utilFor.public()}}}}};return ai}var wS=W2(console,{_debug:function(){},_error:function(){}});wS.configureLogging({dev:!0,min:64});var Xy=wS.getLogger().named("Theatre.js (default logger)").utilFor.dev(),q2=new WeakMap;function Y2(y){const T=q2.get(y);if(T)return T;const U=new Map;return q2.set(y,U),Z2([],y,U),U}function Z2(y,T,U){for(const[q,se]of Object.entries(T.props))if(!Ky(se)){const fe=[...y,q];U.set(JSON.stringify(fe),U.size),Q2(fe,se,U)}for(const[q,se]of Object.entries(T.props))if(Ky(se)){const fe=[...y,q];U.set(JSON.stringify(fe),U.size),Q2(fe,se,U)}}function Q2(y,T,U){if(T.type==="compound")Z2(y,T,U);else{if(T.type==="enum")throw new Error("Enums aren't supported yet");U.set(JSON.stringify(y),U.size)}}function xS(y){return typeof y=="object"&&y!==null&&Object.keys(y).length===0}var x5=class{constructor(y,T,U,q,se){this.sheetTemplate=y,Z(this,"address"),Z(this,"type","Theatre_SheetObjectTemplate"),Z(this,"_config"),Z(this,"_temp_actions_atom"),Z(this,"_cache",new ku),Z(this,"project"),Z(this,"pointerToSheetState"),Z(this,"pointerToStaticOverrides"),this.address=j(R({},y.address),{objectKey:T}),this._config=new ls.Atom(q),this._temp_actions_atom=new ls.Atom(se),this.project=y.project,this.pointerToSheetState=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],this.pointerToStaticOverrides=this.pointerToSheetState.staticOverrides.byObject[this.address.objectKey]}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(y,T,U){return this._config.set(U),new b5(y,this,T)}reconfigure(y){this._config.set(y)}_temp_setActions(y){this._temp_actions_atom.set(y)}getDefaultValues(){return this._cache.get("getDefaultValues()",()=>(0,ls.prism)(()=>{const y=(0,ls.val)(this.configPointer);return z1(y)}))}getStaticValues(){return this._cache.get("getStaticValues",()=>(0,ls.prism)(()=>{var y;const T=(y=(0,ls.val)(this.pointerToStaticOverrides))!=null?y:{};return(0,ls.val)(this.configPointer).deserializeAndSanitize(T)||{}}))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",()=>(0,ls.prism)(()=>{const y=this.project.pointers.historic.sheetsById[this.address.sheetId],T=(0,ls.val)(y.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!T)return Ge;const U=[];if(!T)return Ge;const q=(0,ls.val)(this.configPointer),se=Object.entries(T);for(const[De,Ye]of se){const et=S5(De);if(!et)continue;const St=bS(q,et);St&&_S(St)&&U.push({pathToProp:et,trackId:Ye})}const fe=Y2(q);return U.sort((De,Ye)=>{const et=De.pathToProp,St=Ye.pathToProp,ae=fe.get(JSON.stringify(et)),Ve=fe.get(JSON.stringify(St));return ae>Ve?1:-1}),U.length===0?Ge:U}))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",()=>(0,ls.prism)(()=>{const y=(0,ls.val)(this.getArrayOfValidSequenceTracks());let T={};for(const{pathToProp:U,trackId:q}of y)Mp(T,U,q);return T}))}getStaticButNotSequencedOverrides(){return this._cache.get("getStaticButNotSequencedOverrides",()=>(0,ls.prism)(()=>{const y=(0,ls.val)(this.getStaticValues()),T=(0,ls.val)(this.getArrayOfValidSequenceTracks()),U=MU(y);for(const{pathToProp:q}of T){V2(U,q);let se=q.slice(0,-1);for(;se.length>0;){const fe=vg(U,se);if(!xS(fe))break;V2(U,se),se=se.slice(0,-1)}}if(!xS(U))return U}))}getDefaultsAtPointer(y){const{path:T}=(0,ls.getPointerParts)(y),U=this.getDefaultValues().getValue();return vg(U,T)}};function S5(y){try{return JSON.parse(y)}catch{Xy.warn("property ".concat(JSON.stringify(y)," cannot be parsed. Skipping."));return}}var SS=Ut,E5=G2(y=>JSON.stringify(y));P(pe());var C5=class extends Error{},$p=class extends C5{},J2=Ut,P5=Ut,eI=Ut,ds=Ut;function Ru(){let y,T;const U=new Promise((se,fe)=>{y=De=>{se(De),q.status="resolved"},T=De=>{fe(De),q.status="rejected"}}),q={resolve:y,reject:T,promise:U,status:"pending"};return q}var T5=()=>{},qy=T5,tI=Ut,M5=class{constructor(){Z(this,"_stopPlayCallback",qy),Z(this,"_state",new tI.Atom({position:0,playing:!1})),Z(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=qy}gotoPosition(y){this._updatePositionInState(y)}_updatePositionInState(y){this._state.setByPointer(T=>T.position,y)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(y){this._state.setByPointer(T=>T.playing,y)}play(y,T,U,q,se){this.playing&&this.pause(),this.playing=!0;const fe=T[1]-T[0];{const Zt=this.getCurrentPosition();Zt<T[0]||Zt>T[1]?q==="normal"||q==="alternate"?this._updatePositionInState(T[0]):(q==="reverse"||q==="alternateReverse")&&this._updatePositionInState(T[1]):q==="normal"||q==="alternate"?Zt===T[1]&&this._updatePositionInState(T[0]):Zt===T[0]&&this._updatePositionInState(T[1])}const De=Ru(),Ye=se.time,et=fe*y;let St=this.getCurrentPosition()-T[0];(q==="reverse"||q==="alternateReverse")&&(St=T[1]-this.getCurrentPosition());const ae=Zt=>{const bn=Math.max(Zt-Ye,0)/1e3,ar=Math.min(bn*U+St,et);if(ar!==et){const lr=Math.floor(ar/fe);let er=ar/fe%1*fe;if(q!=="normal")if(q==="reverse")er=fe-er;else{const Ir=lr%2===0;q==="alternate"?Ir||(er=fe-er):Ir&&(er=fe-er)}this._updatePositionInState(er+T[0]),Ve()}else{if(q==="normal")this._updatePositionInState(T[1]);else if(q==="reverse")this._updatePositionInState(T[0]);else{const lr=(y-1)%2===0;q==="alternate"?lr?this._updatePositionInState(T[1]):this._updatePositionInState(T[0]):lr?this._updatePositionInState(T[0]):this._updatePositionInState(T[1])}this.playing=!1,De.resolve(!0)}};this._stopPlayCallback=()=>{se.offThisOrNextTick(ae),se.offNextTick(ae),this.playing&&De.resolve(!1)};const Ve=()=>se.onNextTick(ae);return se.onThisOrNextTick(ae),De.promise}playDynamicRange(y,T){this.playing&&this.pause(),this.playing=!0;const U=Ru(),q=y.keepHot();U.promise.then(q,q);let se=T.time;const fe=Ye=>{const et=Math.max(Ye-se,0);se=Ye;const St=et/1e3,ae=this.getCurrentPosition(),Ve=y.getValue();if(ae<Ve[0]||ae>Ve[1])this.gotoPosition(Ve[0]);else{let Zt=ae+St;Zt>Ve[1]&&(Zt=Ve[0]+(Zt-Ve[1])),this.gotoPosition(Zt)}De()};this._stopPlayCallback=()=>{T.offThisOrNextTick(fe),T.offNextTick(fe),U.resolve(!1)};const De=()=>T.onNextTick(fe);return T.onThisOrNextTick(fe),U.promise}},nI=Ut,rI="__TheatreJS_StudioBundle",ES="__TheatreJS_CoreBundle",iI="__TheatreJS_Notifications",Gg=y=>(...T)=>{var U;switch(y){case"success":{Xy.debug(T.slice(0,2).join(`
`));break}case"info":{Xy.debug(T.slice(0,2).join(`
`));break}case"warning":{Xy.warn(T.slice(0,2).join(`
`));break}}return typeof window<"u"?(U=window[iI])==null?void 0:U.notify[y](...T):void 0},Kp={warning:Gg("warning"),success:Gg("success"),info:Gg("info"),error:Gg("error")};typeof window<"u"&&(window.addEventListener("error",y=>{Kp.error("An error occurred","<pre>".concat(y.message,`</pre>

See **console** for details.`))}),window.addEventListener("unhandledrejection",y=>{Kp.error("An error occurred","<pre>".concat(y.reason,`</pre>

See **console** for details.`))}));var k5=class{constructor(y,T,U){this._decodedBuffer=y,this._audioContext=T,this._nodeDestination=U,Z(this,"_mainGain"),Z(this,"_state",new nI.Atom({position:0,playing:!1})),Z(this,"statePointer"),Z(this,"_stopPlayCallback",qy),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(y,T){const U=Ru();this._playing&&this.pause(),this._playing=!0;let q;const se=()=>{q==null||q(),q=this._loopInRange(y.getValue(),T).stop},fe=y.onStale(se);return se(),this._stopPlayCallback=()=>{q==null||q(),fe(),U.resolve(!1)},U.promise}_loopInRange(y,T){let q=this.getCurrentPosition();const se=y[1]-y[0];q<y[0]||q>y[1]?this._updatePositionInState(y[0]):q===y[1]&&this._updatePositionInState(y[0]),q=this.getCurrentPosition();const fe=this._audioContext.createBufferSource();fe.buffer=this._decodedBuffer,fe.connect(this._mainGain),fe.playbackRate.value=1,fe.loop=!0,fe.loopStart=y[0],fe.loopEnd=y[1];const De=T.time;let Ye=q-y[0];fe.start(0,q);const et=Ve=>{let ar=(Math.max(Ve-De,0)/1e3*1+Ye)/se%1*se;this._updatePositionInState(ar+y[0]),St()},St=()=>T.onNextTick(et);return T.onThisOrNextTick(et),{stop:()=>{fe.stop(),fe.disconnect(),T.offThisOrNextTick(et),T.offNextTick(et)}}}get _playing(){return this._state.get().playing}set _playing(y){this._state.setByPointer(T=>T.playing,y)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=qy}gotoPosition(y){this._updatePositionInState(y)}_updatePositionInState(y){this._state.reduce(T=>j(R({},T),{position:y}))}getCurrentPosition(){return this._state.get().position}play(y,T,U,q,se){this._playing&&this.pause(),this._playing=!0;let fe=this.getCurrentPosition();const De=T[1]-T[0];if(q!=="normal")throw new $p('Audio-controlled sequences can only be played in the "normal" direction. '+"'".concat(q,"' given."));fe<T[0]||fe>T[1]?this._updatePositionInState(T[0]):fe===T[1]&&this._updatePositionInState(T[0]),fe=this.getCurrentPosition();const Ye=Ru(),et=this._audioContext.createBufferSource();et.buffer=this._decodedBuffer,et.connect(this._mainGain),et.playbackRate.value=U,y>1e3&&(Kp.warning("Can't play sequences with audio more than 1000 times","The sequence will still play, but only 1000 times. The `iterationCount: ".concat(y,"` provided to `sequence.play()`\nis too high for a sequence with audio.\n\nTo fix this, either set `iterationCount` to a lower value, or remove the audio from the sequence."),[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),y=1e3),y>1&&(et.loop=!0,et.loopStart=T[0],et.loopEnd=T[1]);const St=se.time;let ae=fe-T[0];const Ve=De*y;et.start(0,fe,Ve-ae);const Zt=ar=>{const er=Math.max(ar-St,0)/1e3,Ir=Math.min(er*U+ae,Ve);if(Ir!==Ve){let $s=Ir/De%1*De;this._updatePositionInState($s+T[0]),bn()}else this._updatePositionInState(T[1]),this._playing=!1,In(),Ye.resolve(!0)},In=()=>{et.stop(),et.disconnect()};this._stopPlayCallback=()=>{In(),se.offThisOrNextTick(Zt),se.offNextTick(Zt),this._playing&&Ye.resolve(!1)};const bn=()=>se.onNextTick(Zt);return se.onThisOrNextTick(Zt),Ye.promise}},Xp=Ut,Yy=0;function Zy(y){var T;const U=De=>{q.tick(De)},q=new Xp.Ticker({onActive(){var De;(De=y==null?void 0:y.start)==null||De.call(y)},onDormant(){var De;(De=y==null?void 0:y.stop)==null||De.call(y)}}),se={tick:U,id:Yy++,name:(T=y==null?void 0:y.name)!=null?T:"CustomRafDriver-".concat(Yy),type:"Theatre_RafDriver_PublicAPI"},fe={type:"Theatre_RafDriver_PrivateAPI",publicApi:se,ticker:q,start:y==null?void 0:y.start,stop:y==null?void 0:y.stop};return wt(se,fe),se}function sI(){let y=null;const q=Zy({name:"DefaultCoreRafDriver",start:()=>{if(typeof window<"u"){const se=fe=>{q.tick(fe),y=window.requestAnimationFrame(se)};y=window.requestAnimationFrame(se)}else q.tick(0),setTimeout(()=>q.tick(1),0)},stop:()=>{typeof window<"u"&&y!==null&&window.cancelAnimationFrame(y)}});return q}var Qy;function CS(){return Qy||oI(sI()),Qy}function PS(){return CS().ticker}function oI(y){if(Qy)throw new Error("`setCoreRafDriver()` is already called.");Qy=Me(y)}var A5=class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(y){wt(this,y)}play(y){const T=Me(this);if(T._project.isReady()){const U=y!=null&&y.rafDriver?Me(y.rafDriver).ticker:PS();return T.play(y??{},U)}else{const U=Ru();return U.resolve(!0),U.promise}}pause(){Me(this).pause()}get position(){return Me(this).position}set position(y){Me(this).position=y}__experimental_getKeyframes(y){return Me(this).getKeyframesOfSimpleProp(y)}async attachAudio(y){const{audioContext:T,destinationNode:U,decodedBuffer:q,gainNode:se}=await I5(y),fe=new k5(q,T,se);return Me(this).replacePlaybackController(fe),{audioContext:T,destinationNode:U,decodedBuffer:q,gainNode:se}}get pointer(){return Me(this).pointer}};async function I5(y){function T(){if(y.audioContext)return Promise.resolve(y.audioContext);const St=new AudioContext;return St.state==="running"||typeof window>"u"?Promise.resolve(St):new Promise(ae=>{const Ve=()=>{St.resume().catch(bn=>{console.error(bn)})},Zt=["mousedown","keydown","touchstart"],In={capture:!0,passive:!1};Zt.forEach(bn=>{window.addEventListener(bn,Ve,In)}),St.addEventListener("statechange",()=>{St.state==="running"&&(Zt.forEach(bn=>{window.removeEventListener(bn,Ve,In)}),ae(St))})})}async function U(){if(y.source instanceof AudioBuffer)return y.source;const St=Ru();if(typeof y.source!="string")throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let ae;try{ae=await fetch(y.source)}catch(bn){throw console.error(bn),new Error("Could not fetch '".concat(y.source,"'. Network error logged above."))}let Ve;try{Ve=await ae.arrayBuffer()}catch(bn){throw console.error(bn),new Error("Could not read '".concat(y.source,"' as an arrayBuffer."))}(await q).decodeAudioData(Ve,St.resolve,St.reject);let In;try{In=await St.promise}catch(bn){throw console.error(bn),new Error("Could not decode ".concat(y.source," as an audio file."))}return In}const q=T(),se=U(),[fe,De]=await Promise.all([q,se]),Ye=y.destinationNode||fe.destination,et=fe.createGain();return et.connect(Ye),{audioContext:fe,decodedBuffer:De,gainNode:et,destinationNode:Ye}}var aI=lI("Theatre_SheetObject");function lI(y){return T=>typeof T=="object"&&!!T&&T.type===y}var R5=class{constructor(y,T,U,q,se){this._project=y,this._sheet=T,this._lengthD=U,this._subUnitsPerUnitD=q,Z(this,"address"),Z(this,"publicApi"),Z(this,"_playbackControllerBox"),Z(this,"_prismOfStatePointer"),Z(this,"_positionD"),Z(this,"_positionFormatterD"),Z(this,"_playableRangeD"),Z(this,"pointer",(0,eI.pointer)({root:this,path:[]})),Z(this,"$$isPointerToPrismProvider",!0),Z(this,"_logger"),Z(this,"closestGridPosition",fe=>{const Ye=1/this.subUnitsPerUnit;return parseFloat((Math.round(fe/Ye)*Ye).toFixed(3))}),this._logger=y._logger.named("Sheet",T.address.sheetId).named("Instance",T.address.sheetInstanceId),this.address=j(R({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new A5(this),this._playbackControllerBox=new P5.Atom(se??new M5),this._prismOfStatePointer=(0,ds.prism)(()=>this._playbackControllerBox.prism.getValue().statePointer),this._positionD=(0,ds.prism)(()=>{const fe=this._prismOfStatePointer.getValue();return(0,ds.val)(fe.position)}),this._positionFormatterD=(0,ds.prism)(()=>{const fe=(0,ds.val)(this._subUnitsPerUnitD);return new D5(fe)})}pointerToPrism(y){const{path:T}=(0,J2.getPointerParts)(y);if(T.length===0)return(0,ds.prism)(()=>({length:(0,ds.val)(this.pointer.length),playing:(0,ds.val)(this.pointer.playing),position:(0,ds.val)(this.pointer.position)}));if(T.length>1)return(0,ds.prism)(()=>{});const[U]=T;return U==="length"?this._lengthD:U==="position"?this._positionD:U==="playing"?(0,ds.prism)(()=>(0,ds.val)(this._prismOfStatePointer.getValue().playing)):(0,ds.prism)(()=>{})}getKeyframesOfSimpleProp(y){const{path:T,root:U}=(0,J2.getPointerParts)(y);if(!aI(U))throw new $p("Argument prop must be a pointer to a SheetObject property");const q=(0,ds.val)(this._project.pointers.historic.sheetsById[this._sheet.address.sheetId].sequence.tracksByObject[U.address.objectKey]);if(!q)return[];const{trackData:se,trackIdByPropPath:fe}=q,De=E5(T),Ye=fe[De];if(!Ye)return[];const et=se[Ye];return et?et.keyframes:[]}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(y){let T=y;this.pause(),T>this.length&&(T=this.length);const U=this.length;this._playbackControllerBox.get().gotoPosition(T>U?U:T)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,ds.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,ds.prism)(()=>[0,(0,ds.val)(this._lengthD)])}playDynamicRange(y,T){return this._playbackControllerBox.get().playDynamicRange(y,T)}async play(y,T){const U=this.length,q=y&&y.range?y.range:[0,U],se=y&&typeof y.iterationCount=="number"?y.iterationCount:1,fe=y&&typeof y.rate<"u"?y.rate:1,De=y&&y.direction?y.direction:"normal";return await this._play(se,[q[0],q[1]],fe,De,T)}_play(y,T,U,q,se){return this._playbackControllerBox.get().play(y,T,U,q,se)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(y){this.pause();const T=this._playbackControllerBox.get();this._playbackControllerBox.set(y);const U=T.getCurrentPosition();T.destroy(),y.gotoPosition(U)}},D5=class{constructor(y){this._fps=y}formatSubUnitForGrid(y){const T=y%1,U=1/this._fps;return Math.round(T/U)+"f"}formatFullUnitForGrid(y){let T=y,U="";if(T>=di){const se=Math.floor(T/di);U+=se+"h",T=T%di}if(T>=nh){const se=Math.floor(T/nh);U+=se+"m",T=T%nh}if(T>=Oo){const se=Math.floor(T/Oo);U+=se+"s",T=T%Oo}const q=1/this._fps;if(T>=q){const se=Math.floor(T/q);U+=se+"f",T=T%q}return U.length===0?"0s":U}formatForPlayhead(y){let T=y,U="";if(T>=di){const se=Math.floor(T/di);U+=Wp(se.toString(),2,"0")+"h",T=T%di}if(T>=nh){const se=Math.floor(T/nh);U+=Wp(se.toString(),2,"0")+"m",T=T%nh}else U.length>0&&(U+="00m");if(T>=Oo){const se=Math.floor(T/Oo);U+=Wp(se.toString(),2,"0")+"s",T=T%Oo}else U+="00s";const q=1/this._fps;if(T>=q){const se=Math.round(T/q);U+=Wp(se.toString(),2,"0")+"f",T=T%q}else T/q>.98?(U+=Wp(1 .toString(),2,"0")+"f",T=T%q):U+="00f";return U.length===0?"00s00f":U}formatBasic(y){return y.toFixed(2)+"s"}},Oo=1,nh=Oo*60,di=nh*60,TS={};B(TS,{boolean:()=>RS,compound:()=>Ou,file:()=>ir,image:()=>tl,number:()=>Wg,rgba:()=>En,string:()=>mI,stringLiteral:()=>vI});function uI(y,T){return y.length<=T?y:y.substr(0,T-3)+"..."}var Ne=y=>typeof y=="string"?'string("'.concat(uI(y,10),'")'):typeof y=="number"?"number(".concat(uI(String(y),10),")"):y===null?"null":y===void 0?"undefined":typeof y=="boolean"?String(y):Array.isArray(y)?"array":typeof y=="object"?"object":"unknown",cI=Ne;function O5(y,{removeAlphaIfOpaque:T=!1}={}){const U=(y.a*255|256).toString(16).slice(1),q=(y.r*255|256).toString(16).slice(1)+(y.g*255|256).toString(16).slice(1)+(y.b*255|256).toString(16).slice(1)+(T&&U==="ff"?"":U);return"#".concat(q)}function MS(y){return j(R({},y),{toString(){return O5(this,{removeAlphaIfOpaque:!0})}})}function Du(y){return Object.fromEntries(Object.entries(y).map(([T,U])=>[T,Ex(U,0,1)]))}function L5(y){function T(U){return U>=.0031308?1.055*U**(1/2.4)-.055:12.92*U}return Du({r:T(y.r),g:T(y.g),b:T(y.b),a:y.a})}function Qn(y){function T(U){return U>=.04045?((U+.055)/(1+.055))**2.4:U/12.92}return{r:T(y.r),g:T(y.g),b:T(y.b),a:y.a}}function dI(y){let T=.4122214708*y.r+.5363325363*y.g+.0514459929*y.b,U=.2119034982*y.r+.6806995451*y.g+.1073969566*y.b,q=.0883024619*y.r+.2817188376*y.g+.6299787005*y.b,se=Math.cbrt(T),fe=Math.cbrt(U),De=Math.cbrt(q);return{L:.2104542553*se+.793617785*fe-.0040720468*De,a:1.9779984951*se-2.428592205*fe+.4505937099*De,b:.0259040371*se+.7827717662*fe-.808675766*De,alpha:y.a}}function Jy(y){let T=y.L+.3963377774*y.a+.2158037573*y.b,U=y.L-.1055613458*y.a-.0638541728*y.b,q=y.L-.0894841775*y.a-1.291485548*y.b,se=T*T*T,fe=U*U*U,De=q*q*q;return{r:4.0767416621*se-3.3077115913*fe+.2309699292*De,g:-1.2684380046*se+2.6097574011*fe-.3413193965*De,b:-.0041960863*se-.7034186147*fe+1.707614701*De,a:y.alpha}}var La=Symbol("TheatrePropType_Basic");function kS(y){return typeof y=="object"&&!!y&&y[La]==="TheatrePropType"}function Vc(y){if(typeof y=="number")return Wg(y);if(typeof y=="boolean")return RS(y);if(typeof y=="string")return mI(y);if(typeof y=="object"&&y){if(kS(y))return y;if(bB(y))return Ou(y);throw new $p("This value is not a valid prop type: ".concat(cI(y)))}else throw new $p("This value is not a valid prop type: ".concat(cI(y)))}function hI(y){const T={};for(const U of Object.keys(y)){const q=y[U];kS(q)?T[U]=q:T[U]=Vc(q)}return T}var Ou=(y,T={})=>{const U=hI(y),q=new WeakMap;return{type:"compound",props:U,valueType:null,[La]:"TheatrePropType",label:T.label,default:a5(U,fe=>fe.default),deserializeAndSanitize:fe=>{if(typeof fe!="object"||!fe)return;if(q.has(fe))return q.get(fe);const De={};let Ye=!1;for(const[et,St]of Object.entries(U))if(Object.prototype.hasOwnProperty.call(fe,et)){const ae=St.deserializeAndSanitize(fe[et]);ae!=null&&(Ye=!0,De[et]=ae)}if(q.set(fe,De),Ye)return De}}},ir=(y,T={})=>{const U=(q,se,fe)=>{var De;return{type:"file",id:((De=T.interpolate)!=null?De:Yp)(q.id,se.id,fe)}};return{type:"file",default:{type:"file",id:y},valueType:null,[La]:"TheatrePropType",label:T.label,interpolate:U,deserializeAndSanitize:AS}},AS=y=>{if(!y)return;let T=!0;if(typeof y.id!="string"&&![null,void 0].includes(y.id)&&(T=!1),y.type!=="file"&&(T=!1),!!T)return y},tl=(y,T={})=>{const U=(q,se,fe)=>{var De;return{type:"image",id:((De=T.interpolate)!=null?De:Yp)(q.id,se.id,fe)}};return{type:"image",default:{type:"image",id:y},valueType:null,[La]:"TheatrePropType",label:T.label,interpolate:U,deserializeAndSanitize:qp}},qp=y=>{if(!y)return;let T=!0;if(typeof y.id!="string"&&![null,void 0].includes(y.id)&&(T=!1),y.type!=="image"&&(T=!1),!!T)return y},Wg=(y,T={})=>{var U;return j(R({type:"number",valueType:0,default:y,[La]:"TheatrePropType"},T||{}),{label:T.label,nudgeFn:(U=T.nudgeFn)!=null?U:U5,nudgeMultiplier:typeof T.nudgeMultiplier=="number"?T.nudgeMultiplier:void 0,interpolate:IS,deserializeAndSanitize:pI(T.range)})},pI=y=>y?T=>{if(typeof T=="number"&&isFinite(T))return Ex(T,y[0],y[1])}:fI,fI=y=>typeof y=="number"&&isFinite(y)?y:void 0,IS=(y,T,U)=>y+U*(T-y),En=(y={r:0,g:0,b:0,a:1},T={})=>{const U={};for(const q of["r","g","b","a"])U[q]=Math.min(Math.max(y[q],0),1);return{type:"rgba",valueType:null,default:MS(U),[La]:"TheatrePropType",label:T.label,interpolate:F5,deserializeAndSanitize:N5}},N5=y=>{if(!y)return;let T=!0;for(const q of["r","g","b","a"])(!Object.prototype.hasOwnProperty.call(y,q)||typeof y[q]!="number")&&(T=!1);if(!T)return;const U={};for(const q of["r","g","b","a"])U[q]=Math.min(Math.max(y[q],0),1);return MS(U)},F5=(y,T,U)=>{const q=dI(Qn(y)),se=dI(Qn(T)),fe={L:(1-U)*q.L+U*se.L,a:(1-U)*q.a+U*se.a,b:(1-U)*q.b+U*se.b,alpha:(1-U)*q.alpha+U*se.alpha},De=L5(Jy(fe));return MS(De)},RS=(y,T={})=>{var U;return{type:"boolean",default:y,valueType:null,[La]:"TheatrePropType",label:T.label,interpolate:(U=T.interpolate)!=null?U:Yp,deserializeAndSanitize:B5}},B5=y=>typeof y=="boolean"?y:void 0;function Yp(y){return y}var mI=(y,T={})=>{var U;return{type:"string",default:y,valueType:null,[La]:"TheatrePropType",label:T.label,interpolate:(U=T.interpolate)!=null?U:Yp,deserializeAndSanitize:gI}};function gI(y){return typeof y=="string"?y:void 0}function vI(y,T,U={}){var q,se;return{type:"stringLiteral",default:y,valuesAndLabels:R({},T),[La]:"TheatrePropType",valueType:null,as:(q=U.as)!=null?q:"menu",label:U.label,interpolate:(se=U.interpolate)!=null?se:Yp,deserializeAndSanitize(fe){if(typeof fe=="string"&&Object.prototype.hasOwnProperty.call(T,fe))return fe}}}var U5=({config:y,deltaX:T,deltaFraction:U,magnitude:q})=>{var se;const{range:fe}=y;return!y.nudgeMultiplier&&fe&&!fe.includes(1/0)&&!fe.includes(-1/0)?U*(fe[1]-fe[0])*q:T*q*((se=y.nudgeMultiplier)!=null?se:1)},z5=y=>y.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");function eb(y,T){return z5(y)}P(ye());var V5=class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(y){wt(this,y)}object(y,T,U){const q=Me(this),se=eb(y),fe=q.getObject(se),De=null,Ye=U==null?void 0:U.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(fe)return Ye&&fe.template._temp_setActions(Ye),fe.publicApi;{const et=Ou(T);return q.createObject(se,De,et,Ye).publicApi}}get sequence(){return Me(this).getSequence().publicApi}get project(){return Me(this).project.publicApi}get address(){return R({},Me(this).address)}detachObject(y){const T=Me(this),U=eb(y);if(!T.getObject(U)){Kp.warning(`Couldn't delete object "`.concat(U,'"'),'There is no object with key "'.concat(U,`".

To fix this, make sure you are calling \`sheet.deleteObject("`).concat(U,'")` with the correct key.')),console.warn('Object key "'.concat(U,'" does not exist.'));return}T.deleteObject(U)}},Zp=Ut,yI=class{constructor(y,T){this.template=y,this.instanceId=T,Z(this,"_objects",new Zp.Atom({})),Z(this,"_sequence"),Z(this,"address"),Z(this,"publicApi"),Z(this,"project"),Z(this,"objectsP",this._objects.pointer),Z(this,"type","Theatre_Sheet"),Z(this,"_logger"),this._logger=y.project._logger.named("Sheet",T),this._logger._trace("creating sheet"),this.project=y.project,this.address=j(R({},y.address),{sheetInstanceId:this.instanceId}),this.publicApi=new V5(this)}createObject(y,T,U,q={}){const fe=this.template.getObjectTemplate(y,T,U,q).createInstance(this,T,U);return this._objects.setByPointer(De=>De[y],fe),fe}getObject(y){return this._objects.get()[y]}deleteObject(y){this._objects.reduce(T=>{const U=R({},T);return delete U[y],U})}getSequence(){if(!this._sequence){const y=(0,Zp.prism)(()=>{const U=(0,Zp.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length);return DS(U)}),T=(0,Zp.prism)(()=>{const U=(0,Zp.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit);return j5(U)});this._sequence=new R5(this.template.project,this,y,T)}return this._sequence}},DS=y=>typeof y=="number"&&isFinite(y)&&y>0?y:10,j5=y=>typeof y=="number"&&pS(y)&&y>=1&&y<=1e3?y:30,H5=class{constructor(y,T){this.project=y,Z(this,"type","Theatre_SheetTemplate"),Z(this,"address"),Z(this,"_instances",new SS.Atom({})),Z(this,"instancesP",this._instances.pointer),Z(this,"_objectTemplates",new SS.Atom({})),Z(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=j(R({},y.address),{sheetId:T})}getInstance(y){let T=this._instances.get()[y];return T||(T=new yI(this,y),this._instances.setByPointer(U=>U[y],T)),T}getObjectTemplate(y,T,U,q){let se=this._objectTemplates.get()[y];return se||(se=new x5(this,y,T,U,q),this._objectTemplates.setByPointer(fe=>fe[y],se)),se}},OS=Ut,bI=Ut,nl=y=>new Promise(T=>setTimeout(T,y)),$g=nl;function ia(y){for(var T=arguments.length,U=Array(T>1?T-1:0),q=1;q<T;q++)U[q-1]=arguments[q];throw Error("[Immer] minified error nr: "+y+(U.length?" "+U.map(function(se){return"'"+se+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Lu(y){return!!y&&!!y[uo]}function ao(y){return!!y&&(function(T){if(!T||typeof T!="object")return!1;var U=Object.getPrototypeOf(T);if(U===null)return!0;var q=Object.hasOwnProperty.call(U,"constructor")&&U.constructor;return q===Object||typeof q=="function"&&Function.toString.call(q)===CI}(y)||Array.isArray(y)||!!y[ub]||!!y.constructor[ub]||Nu(y)||lo(y))}function LS(y){return Lu(y)||ia(23,y),y[uo].t}function Qp(y,T,U){U===void 0&&(U=!1),rh(y)===0?(U?Object.keys:cb)(y).forEach(function(q){U&&typeof q=="symbol"||T(q,y[q],y)}):y.forEach(function(q,se){return T(se,q,y)})}function rh(y){var T=y[uo];return T?T.i>3?T.i-4:T.i:Array.isArray(y)?1:Nu(y)?2:lo(y)?3:0}function Kg(y,T){return rh(y)===2?y.has(T):Object.prototype.hasOwnProperty.call(y,T)}function _I(y,T){return rh(y)===2?y.get(T):y[T]}function NS(y,T,U){var q=rh(y);q===2?y.set(T,U):q===3?(y.delete(T),y.add(U)):y[T]=U}function wI(y,T){return y===T?y!==0||1/y==1/T:y!=y&&T!=T}function Nu(y){return SI&&y instanceof Map}function lo(y){return EI&&y instanceof Set}function Fu(y){return y.o||y.t}function Jp(y){if(Array.isArray(y))return Array.prototype.slice.call(y);var T=VS(y);delete T[uo];for(var U=cb(T),q=0;q<U.length;q++){var se=U[q],fe=T[se];fe.writable===!1&&(fe.writable=!0,fe.configurable=!0),(fe.get||fe.set)&&(T[se]={configurable:!0,writable:!0,enumerable:fe.enumerable,value:y[se]})}return Object.create(Object.getPrototypeOf(y),T)}function FS(y,T){return T===void 0&&(T=!1),tb(y)||Lu(y)||!ao(y)||(rh(y)>1&&(y.set=y.add=y.clear=y.delete=xI),Object.freeze(y),T&&Qp(y,function(U,q){return FS(q,!0)},!0)),y}function xI(){ia(2)}function tb(y){return y==null||typeof y!="object"||Object.isFrozen(y)}function Ul(y){var T=PI[y];return T||ia(18,y),T}function nb(){return nf}function wi(y,T){T&&(Ul("Patches"),y.u=[],y.s=[],y.v=T)}function Xg(y){rb(y),y.p.forEach(sb),y.p=null}function rb(y){y===nf&&(nf=y.l)}function ib(y){return nf={p:[],l:nf,h:y,m:!0,_:0}}function sb(y){var T=y[uo];T.i===0||T.i===1?T.j():T.O=!0}function ih(y,T){T._=T.p.length;var U=T.p[0],q=y!==void 0&&y!==U;return T.h.g||Ul("ES5").S(T,y,q),q?(U[uo].P&&(Xg(T),ia(4)),ao(y)&&(y=Na(T,y),T.l||sh(T,y)),T.u&&Ul("Patches").M(U[uo],y,T.u,T.s)):y=Na(T,U,[]),Xg(T),T.u&&T.v(T.u,T.s),y!==qg?y:void 0}function Na(y,T,U){if(tb(T))return T;var q=T[uo];if(!q)return Qp(T,function(fe,De){return zl(y,q,T,fe,De,U)},!0),T;if(q.A!==y)return T;if(!q.P)return sh(y,q.t,!0),q.t;if(!q.I){q.I=!0,q.A._--;var se=q.i===4||q.i===5?q.o=Jp(q.k):q.o;Qp(q.i===3?new Set(se):se,function(fe,De){return zl(y,q,se,fe,De,U)}),sh(y,se,!1),U&&y.u&&Ul("Patches").R(q,U,y.u,y.s)}return q.o}function zl(y,T,U,q,se,fe){if(Lu(se)){var De=Na(y,se,fe&&T&&T.i!==3&&!Kg(T.D,q)?fe.concat(q):void 0);if(NS(U,q,De),!Lu(De))return;y.m=!1}if(ao(se)&&!tb(se)){if(!y.h.F&&y._<1)return;Na(y,se),T&&T.A.l||sh(y,se)}}function sh(y,T,U){U===void 0&&(U=!1),y.h.F&&y.m&&FS(T,U)}function ob(y,T){var U=y[uo];return(U?Fu(U):y)[T]}function BS(y,T){if(T in y)for(var U=Object.getPrototypeOf(y);U;){var q=Object.getOwnPropertyDescriptor(U,T);if(q)return q;U=Object.getPrototypeOf(U)}}function ab(y){y.P||(y.P=!0,y.l&&ab(y.l))}function oh(y){y.o||(y.o=Jp(y.t))}function ah(y,T,U){var q=Nu(T)?Ul("MapSet").N(T,U):lo(T)?Ul("MapSet").T(T,U):y.g?function(se,fe){var De=Array.isArray(se),Ye={i:De?1:0,A:fe?fe.A:nb(),P:!1,I:!1,D:{},l:fe,t:se,k:null,o:null,j:null,C:!1},et=Ye,St=Bu;De&&(et=[Ye],St=Yg);var ae=Proxy.revocable(et,St),Ve=ae.revoke,Zt=ae.proxy;return Ye.k=Zt,Ye.j=Ve,Zt}(T,U):Ul("ES5").J(T,U);return(U?U.A:nb()).p.push(q),q}function ef(y){return Lu(y)||ia(22,y),function T(U){if(!ao(U))return U;var q,se=U[uo],fe=rh(U);if(se){if(!se.P&&(se.i<4||!Ul("ES5").K(se)))return se.t;se.I=!0,q=tf(U,fe),se.I=!1}else q=tf(U,fe);return Qp(q,function(De,Ye){se&&_I(se.t,De)===Ye||NS(q,De,T(Ye))}),fe===3?new Set(q):q}(y)}function tf(y,T){switch(T){case 2:return new Map(y);case 3:return Array.from(y)}return Jp(y)}var US,nf,lb=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",SI=typeof Map<"u",EI=typeof Set<"u",zS=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",qg=lb?Symbol.for("immer-nothing"):((US={})["immer-nothing"]=!0,US),ub=lb?Symbol.for("immer-draftable"):"__$immer_draftable",uo=lb?Symbol.for("immer-state"):"__$immer_state",CI=""+Object.prototype.constructor,cb=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(y){return Object.getOwnPropertyNames(y).concat(Object.getOwnPropertySymbols(y))}:Object.getOwnPropertyNames,VS=Object.getOwnPropertyDescriptors||function(y){var T={};return cb(y).forEach(function(U){T[U]=Object.getOwnPropertyDescriptor(y,U)}),T},PI={},Bu={get:function(y,T){if(T===uo)return y;var U=Fu(y);if(!Kg(U,T))return function(se,fe,De){var Ye,et=BS(fe,De);return et?"value"in et?et.value:(Ye=et.get)===null||Ye===void 0?void 0:Ye.call(se.k):void 0}(y,U,T);var q=U[T];return y.I||!ao(q)?q:q===ob(y.t,T)?(oh(y),y.o[T]=ah(y.A.h,q,y)):q},has:function(y,T){return T in Fu(y)},ownKeys:function(y){return Reflect.ownKeys(Fu(y))},set:function(y,T,U){var q=BS(Fu(y),T);if(q!=null&&q.set)return q.set.call(y.k,U),!0;if(!y.P){var se=ob(Fu(y),T),fe=se==null?void 0:se[uo];if(fe&&fe.t===U)return y.o[T]=U,y.D[T]=!1,!0;if(wI(U,se)&&(U!==void 0||Kg(y.t,T)))return!0;oh(y),ab(y)}return y.o[T]===U&&typeof U!="number"&&(U!==void 0||T in y.o)||(y.o[T]=U,y.D[T]=!0,!0)},deleteProperty:function(y,T){return ob(y.t,T)!==void 0||T in y.t?(y.D[T]=!1,oh(y),ab(y)):delete y.D[T],y.o&&delete y.o[T],!0},getOwnPropertyDescriptor:function(y,T){var U=Fu(y),q=Reflect.getOwnPropertyDescriptor(U,T);return q&&{writable:!0,configurable:y.i!==1||T!=="length",enumerable:q.enumerable,value:U[T]}},defineProperty:function(){ia(11)},getPrototypeOf:function(y){return Object.getPrototypeOf(y.t)},setPrototypeOf:function(){ia(12)}},Yg={};Qp(Bu,function(y,T){Yg[y]=function(){return arguments[0]=arguments[0][0],T.apply(this,arguments)}}),Yg.deleteProperty=function(y,T){return Bu.deleteProperty.call(this,y[0],T)},Yg.set=function(y,T,U){return Bu.set.call(this,y[0],T,U,y[0])};var jS=function(){function y(U){var q=this;this.g=zS,this.F=!0,this.produce=function(se,fe,De){if(typeof se=="function"&&typeof fe!="function"){var Ye=fe;fe=se;var et=q;return function(In){var bn=this;In===void 0&&(In=Ye);for(var ar=arguments.length,lr=Array(ar>1?ar-1:0),er=1;er<ar;er++)lr[er-1]=arguments[er];return et.produce(In,function(Ir){var $s;return($s=fe).call.apply($s,[bn,Ir].concat(lr))})}}var St;if(typeof fe!="function"&&ia(6),De!==void 0&&typeof De!="function"&&ia(7),ao(se)){var ae=ib(q),Ve=ah(q,se,void 0),Zt=!0;try{St=fe(Ve),Zt=!1}finally{Zt?Xg(ae):rb(ae)}return typeof Promise<"u"&&St instanceof Promise?St.then(function(In){return wi(ae,De),ih(In,ae)},function(In){throw Xg(ae),In}):(wi(ae,De),ih(St,ae))}if(!se||typeof se!="object")return(St=fe(se))===qg?void 0:(St===void 0&&(St=se),q.F&&FS(St,!0),St);ia(21,se)},this.produceWithPatches=function(se,fe){return typeof se=="function"?function(et){for(var St=arguments.length,ae=Array(St>1?St-1:0),Ve=1;Ve<St;Ve++)ae[Ve-1]=arguments[Ve];return q.produceWithPatches(et,function(Zt){return se.apply(void 0,[Zt].concat(ae))})}:[q.produce(se,fe,function(et,St){De=et,Ye=St}),De,Ye];var De,Ye},typeof(U==null?void 0:U.useProxies)=="boolean"&&this.setUseProxies(U.useProxies),typeof(U==null?void 0:U.autoFreeze)=="boolean"&&this.setAutoFreeze(U.autoFreeze)}var T=y.prototype;return T.createDraft=function(U){ao(U)||ia(8),Lu(U)&&(U=ef(U));var q=ib(this),se=ah(this,U,void 0);return se[uo].C=!0,rb(q),se},T.finishDraft=function(U,q){var se=U&&U[uo],fe=se.A;return wi(fe,q),ih(void 0,fe)},T.setAutoFreeze=function(U){this.F=U},T.setUseProxies=function(U){U&&!zS&&ia(20),this.g=U},T.applyPatches=function(U,q){var se;for(se=q.length-1;se>=0;se--){var fe=q[se];if(fe.path.length===0&&fe.op==="replace"){U=fe.value;break}}var De=Ul("Patches").$;return Lu(U)?De(U,q):this.produce(U,function(Ye){return De(Ye,q.slice(se+1))})},y}(),hs=new jS;hs.produce,hs.produceWithPatches.bind(hs),hs.setAutoFreeze.bind(hs),hs.setUseProxies.bind(hs),hs.applyPatches.bind(hs),hs.createDraft.bind(hs),hs.finishDraft.bind(hs);var HS={currentProjectStateDefinitionVersion:"0.4.0"},db=HS;async function TI(y,T,U){await $g(0),y.transaction(({drafts:q})=>{var se;const fe=T.address.projectId;q.ephemeral.coreByProject[fe]={lastExportedObject:null,loadingState:{type:"loading"}},q.ahistoric.coreByProject[fe]={ahistoricStuff:""};function De(){q.ephemeral.coreByProject[fe].loadingState={type:"loaded"},q.historic.coreByProject[fe]={sheetsById:{},definitionVersion:db.currentProjectStateDefinitionVersion,revisionHistory:[]}}function Ye(Ve){q.ephemeral.coreByProject[fe].loadingState={type:"loaded"},q.historic.coreByProject[fe]=Ve}function et(){q.ephemeral.coreByProject[fe].loadingState={type:"loaded"}}function St(Ve){q.ephemeral.coreByProject[fe].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:Ve}}const ae=(se=LS(q.historic))==null?void 0:se.coreByProject[T.address.projectId];ae?U&&ae.revisionHistory.indexOf(U.revisionHistory[0])==-1?St(U):et():U?Ye(U):De()})}function GS(){}function WS(y){var T,U;const q=(T=y==null?void 0:y.logging)!=null&&T.internal?(U=y.logging.min)!=null?U:256:1/0,se=q<=128,fe=q<=512,De=W2(void 0,{_debug:se?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):GS,_error:fe?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):GS});if(y){const{logger:Ye,logging:et}=y;Ye&&De.configureLogger(Ye),et?De.configureLogging(et):De.configureLogging({dev:!1})}return De.getLogger().named("Theatre")}var hb=class{constructor(y,T={},U){this.config=T,this.publicApi=U,Z(this,"pointers"),Z(this,"_pointerProxies"),Z(this,"address"),Z(this,"_studioReadyDeferred"),Z(this,"_assetStorageReadyDeferred"),Z(this,"_readyPromise"),Z(this,"_sheetTemplates",new bI.Atom({})),Z(this,"sheetTemplatesP",this._sheetTemplates.pointer),Z(this,"_studio"),Z(this,"assetStorage"),Z(this,"type","Theatre_Project"),Z(this,"_logger");var q;this._logger=WS({logging:{dev:!0}}).named("Project",y),this._logger.traceDev("creating project"),this.address={projectId:y};const se=new bI.Atom({ahistoric:{ahistoricStuff:""},historic:(q=T.state)!=null?q:{sheetsById:{},definitionVersion:db.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=Ru(),this.assetStorage={getAssetUrl:fe=>{var De;return"".concat((De=T.assets)==null?void 0:De.baseUrl,"/").concat(fe)},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new OS.PointerProxy(se.pointer.historic),ahistoric:new OS.PointerProxy(se.pointer.ahistoric),ephemeral:new OS.PointerProxy(se.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},de.add(y,this),this._studioReadyDeferred=Ru(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then(()=>{}),T.state?setTimeout(()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))},0):typeof window>"u"?console.error('Argument config.state in Theatre.getProject("'.concat(y,'", config) is empty. ')+"You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state"):setTimeout(()=>{if(!this._studio)throw new Error('Argument config.state in Theatre.getProject("'.concat(y,'", config) is empty. This is fine ')+"while you are using @theatre/core along with @theatre/studio. But since @theatre/studio "+'is not loaded, the state of project "'.concat(y,`" will be empty.

`)+`To fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state
`)},1e3)}attachToStudio(y){if(this._studio){if(this._studio!==y)throw new Error("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));console.warn("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));return}this._studio=y,y.initialized.then(async()=>{var T;await TI(y,this,this.config.state),this._pointerProxies.historic.setPointer(y.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(y.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(y.atomP.ephemeral.coreByProject[this.address.projectId]),await y.createAssetStorage(this,(T=this.config.assets)==null?void 0:T.baseUrl).then(U=>{this.assetStorage=U,this._assetStorageReadyDeferred.resolve(void 0)}),this._studioReadyDeferred.resolve(void 0)}).catch(T=>{throw console.error(T),T})}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return this._studioReadyDeferred.status==="resolved"&&this._assetStorageReadyDeferred.status==="resolved"}getOrCreateSheet(y,T="default"){let U=this._sheetTemplates.get()[y];return U||(U=new H5(this,y),this._sheetTemplates.reduce(q=>j(R({},q),{[y]:U}))),U.getInstance(T)}},pb=class{get type(){return"Theatre_Project_PublicAPI"}constructor(y,T={}){wt(this,new hb(y,T,this))}get ready(){return Me(this).ready}get isReady(){return Me(this).isReady()}get address(){return R({},Me(this).address)}getAssetUrl(y){if(!this.isReady){console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.");return}return y.id?Me(this).assetStorage.getAssetUrl(y.id):void 0}sheet(y,T="default"){const U=eb(y);return Me(this).getOrCreateSheet(U,T).publicApi}};P(ye());var $S=Ut,rf=Ut;function KS(y,T={}){const U=de.get(y);if(U)return U.publicApi;const se=WS().named("Project",y);return T.state?(kI(y,T.state),se._debug("deep validated config.state on disk")):se._debug("no config.state"),new pb(y,T)}var MI=(y,T)=>{if(Array.isArray(T)||T==null||T.definitionVersion!==db.currentProjectStateDefinitionVersion)throw new $p("Error validating conf.state in Theatre.getProject(".concat(JSON.stringify(y),", conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state"))},kI=(y,T)=>{MI(y,T)};function fb(y,T,U){const q=U?Me(U).ticker:PS();if((0,$S.isPointer)(y))return(0,rf.pointerToPrism)(y).onChange(q,T,!0);if((0,rf.isPrism)(y))return y.onChange(q,T,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function XS(y){if((0,$S.isPointer)(y))return(0,rf.pointerToPrism)(y).getValue();throw new Error("Called val(p) where p is not a pointer.")}var qS=class{constructor(){Z(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.7.0"}getBitsForStudio(y,T){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=y;const U={projectsP:de.atom.pointer.projects,privateAPI:Me,coreExports:ie,getCoreRafDriver:CS};T(U)}};YS();function YS(){if(typeof window>"u")return;const y=window[ES];if(typeof y<"u")throw typeof y=="object"&&y&&typeof y.version=="string"?new Error(`It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(ES," seems to be already set by a module other than @theatre/core."));const T=new qS;window[ES]=T;const U=window[rI];U&&U!==null&&U.type==="Theatre_StudioBundle"&&U.registerCoreBundle(T)}/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)
	*/})(iF,iF.exports);var sF=iF.exports;class Ont{constructor(e,n,r){this.name=e,this.fg=n,this.bg=r,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=90*this.PR,this.canvas.height=48*this.PR,this.canvas.style.width="90px",this.canvas.style.position="absolute",this.canvas.style.height="48px",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(e,n,r,i,o=0){let u=1/0,d=0;this.context&&(u=Math.min(u,e),d=Math.max(r,e),i=Math.max(i,n),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(e.toFixed(o)+" "+this.name+" ("+u.toFixed(o)+"-"+parseFloat(d.toFixed(o))+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,(1-n/i)*this.GRAPH_HEIGHT))}}const CMe=class eN{constructor({logsPerSecond:e=20,samplesLog:n=100,samplesGraph:r=10,precision:i=2,minimal:o=!1,horizontal:u=!0,mode:d=0}={}){this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalFps=0,this.activeQuery=null,this.gpuQueries=[],this.renderCount=0,this.mode=d,this.horizontal=u,this.dom=document.createElement("div"),this.dom.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000;",o&&(this.dom.style.cssText+="cursor:pointer"),this.gl=null,this.query=null,this.isRunningCPUProfiling=!1,this.minimal=o,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.frames=0,this.renderCount=0,this.threeRendererPatched=!1,this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.queryCreated=!1,this.fpsPanel=this.addPanel(new eN.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new eN.Panel("CPU","#0f0","#020"),1),this.gpuPanel=null,this.samplesLog=n,this.samplesGraph=r,this.precision=i,this.logsPerSecond=e,this.minimal?(this.dom.addEventListener("click",m=>{m.preventDefault(),this.showPanel(++this.mode%this.dom.children.length)},!1),this.mode=d,this.showPanel(this.mode)):window.addEventListener("resize",()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2)})}patchThreeRenderer(e){const n=e.render,r=this;e.render=function(i,o){r.begin(),n.call(this,i,o),r.end()},this.threeRendererPatched=!0}resizePanel(e,n){e.canvas.style.position="absolute",this.minimal?e.canvas.style.display="none":(e.canvas.style.display="block",this.horizontal?(e.canvas.style.top="0px",e.canvas.style.left=n*e.WIDTH/e.PR+"px"):(e.canvas.style.left="0px",e.canvas.style.top=n*e.HEIGHT/e.PR+"px"))}addPanel(e,n){return e.canvas&&(this.dom.appendChild(e.canvas),this.resizePanel(e,n)),e}showPanel(e){for(let n=0;n<this.dom.children.length;n++){const r=this.dom.children[n];r.style.display=n===e?"block":"none"}this.mode=e}init(e){if(!e){console.error('Stats: The "canvas" parameter is undefined.');return}if(e.isWebGLRenderer&&!this.threeRendererPatched){const n=e;this.patchThreeRenderer(n),this.gl=n.getContext()}if(!this.gl&&e instanceof WebGL2RenderingContext)this.gl=e;else if(!this.gl&&e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas){if(this.gl=e.getContext("webgl2"),!this.gl){console.error("Stats: Unable to obtain WebGL2 context.");return}}else if(!this.gl){console.error("Stats: Invalid input type. Expected WebGL2RenderingContext, HTMLCanvasElement, or OffscreenCanvas.");return}this.ext=this.gl.getExtension("EXT_disjoint_timer_query_webgl2"),this.ext&&(this.gpuPanel=this.addPanel(new eN.Panel("GPU","#ff0","#220"),2))}begin(){this.isRunningCPUProfiling||this.beginProfiling("cpu-started"),!(!this.gl||!this.ext)&&this.gl&&this.ext&&(this.activeQuery&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.activeQuery=this.gl.createQuery(),this.activeQuery!==null&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.activeQuery))}end(){this.renderCount++,this.gl&&this.ext&&this.activeQuery&&(this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.gpuQueries.push({query:this.activeQuery}),this.activeQuery=null)}processGpuQueries(){!this.gl||!this.ext||(this.totalGpuDuration=0,this.gpuQueries.forEach((e,n)=>{if(this.gl){const r=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT_AVAILABLE),i=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT);if(r&&!i){const u=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT)*1e-6;this.totalGpuDuration+=u,this.gl.deleteQuery(e.query),this.gpuQueries.splice(n,1)}}}))}update(){this.processGpuQueries(),this.endProfiling("cpu-started","cpu-finished","cpu-duration"),this.addToAverage(this.totalCpuDuration,this.averageCpu),this.addToAverage(this.totalGpuDuration,this.averageGpu),this.renderCount=0,this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalFps=0,this.beginTime=this.endInternal()}endInternal(){this.frames++;const e=(performance||Date).now();if(e>=this.prevCpuTime+1e3/this.logsPerSecond&&(this.updatePanel(this.msPanel,this.averageCpu),this.updatePanel(this.gpuPanel,this.averageGpu),this.prevCpuTime=e),e>=this.prevTime+1e3){const n=this.frames*1e3/(e-this.prevTime);this.fpsPanel.update(n,n,100,100,0),this.prevTime=e,this.frames=0}return e}addToAverage(e,n){n.logs.push(e),n.logs.length>this.samplesLog&&n.logs.shift(),n.graph.push(e),n.graph.length>this.samplesGraph&&n.graph.shift()}beginProfiling(e){window.performance&&(window.performance.mark(e),this.isRunningCPUProfiling=!0)}endProfiling(e,n,r){if(window.performance&&n&&this.isRunningCPUProfiling){window.performance.mark(n);const i=performance.measure(r,e,n);this.totalCpuDuration+=i.duration,this.isRunningCPUProfiling=!1}}updatePanel(e,n){if(n.logs.length>0){let r=0,i=.01;for(let d=0;d<n.logs.length;d++)r+=n.logs[d],n.logs[d]>i&&(i=n.logs[d]);let o=0,u=.01;for(let d=0;d<n.graph.length;d++)o+=n.graph[d],n.graph[d]>u&&(u=n.graph[d]);e&&e.update(r/Math.min(n.logs.length,this.samplesLog),o/Math.min(n.graph.length,this.samplesGraph),i,u,this.precision)}}get domElement(){return this.dom}get container(){return console.warn("Stats: Deprecated! this.container as been replaced to this.dom "),this.dom}};CMe.Panel=Ont;let Lnt=CMe;function Nnt(t){function e(){return t.three.scene===void 0?(console.log("No scene:",t.three),!1):!0}const n=d=>{var v;if(!e())return;const m=(v=t.three.scene)==null?void 0:v.getObjectByProperty("uuid",d.value);m!==void 0&&t.three.setObject(m)},r=(d,m,v)=>{var E;if(!e())return;const x=(E=t.three.scene)==null?void 0:E.getObjectByProperty("uuid",d);x!==void 0&&bs(x,m,v)},i=d=>{if(!e())return;const m=d.value,{key:v,value:x,uuid:E}=m;r(E,v,x)},o=d=>{if(!e())return;const m=d.value;UN(m.value).then(v=>{r(m.uuid,m.key,v),r(m.uuid,"material.needsUpdate",!0)})},u=d=>{var R;if(!e())return;const{key:m,uuid:v,value:x,subitem:E}=d.value,M=(R=t.three.scene)==null?void 0:R.getObjectByProperty("uuid",v);if(M!==void 0)try{E!==void 0?tHe(M,E)[m](x):M[m](x)}catch(j){console.log("Error requesting method:"),console.log(j),console.log(m),console.log(x)}};return Mt.useEffect(()=>(Sr.addEventListener(Er.GET_OBJECT,n),Sr.addEventListener(Er.UPDATE_OBJECT,i),Sr.addEventListener(Er.CREATE_TEXTURE,o),Sr.addEventListener(Er.REQUEST_METHOD,u),()=>{Sr.removeEventListener(Er.GET_OBJECT,n),Sr.removeEventListener(Er.UPDATE_OBJECT,i),Sr.removeEventListener(Er.CREATE_TEXTURE,o),Sr.removeEventListener(Er.REQUEST_METHOD,u)}),[]),null}let cu,ys,NP="";Fr.editor=document.location.hash.search("editor")>-1;function Fnt(){const t=Mt.useRef(null),e=Mt.useRef(null),n=Fr.components.get("theatre"),r=Fr.components.get("three");Fr.components.get("debug"),Mt.useEffect(()=>{if(n===void 0)return;const d=t.current;d.style.visibility=Fr.editor?"hidden":"inherit",n.sheet("App");const m=n==null?void 0:n.sheetObject("App","Box",{x:sF.types.number(100,{range:[0,window.innerWidth]}),y:sF.types.number(100,{range:[0,window.innerHeight]})},v=>{d.style.left=`${v.x}px`,d.style.top=`${v.y}px`});return()=>{m!==void 0&&(n==null||n.unsubscribe(m)),Fr.dispose()}},[]),Fr.editor||Mt.useEffect(()=>(cu=new T7({canvas:e.current,stencil:!1}),cu.autoClear=!1,cu.shadowMap.enabled=!0,cu.setPixelRatio(devicePixelRatio),cu.setClearColor(0),Fr.components.get("three").renderer=cu,()=>{cu.dispose()}),[]),Mt.useEffect(()=>{let d;Fr.editor||(d=new Lnt,d.init(cu),document.body.appendChild(d.dom));let m=-1;const v=()=>{const E=window.innerWidth,M=window.innerHeight;ys==null||ys.resize(E,M),cu.setSize(E,M)},x=()=>{var E;(E=r1.rafDriver)==null||E.tick(performance.now()),ys==null||ys.update(),d.begin(),cu.clear(),ys==null||ys.draw(),d.end(),d.update(),m=requestAnimationFrame(x)};return Fr.editor||(window.addEventListener("resize",v),v(),x()),()=>{ys!==void 0&&(r.removeCamera(ys.camera),BN(ys)),window.removeEventListener("resize",v),cancelAnimationFrame(m),m=-1}},[]);const i=()=>{ys!==void 0&&(ys.camera!==void 0&&r.removeCamera(ys.camera),BN(ys)),NP==="scene1"?ys=new SMe(cu):ys=new EMe(cu),ys.resize(window.innerWidth,window.innerHeight),r.setScene(ys),r.addCamera(ys.camera)},o=()=>{NP!=="scene1"&&(NP="scene1",i())},u=()=>{NP!=="scene2"&&(NP="scene2",i())};return Mt.useEffect(()=>{const d=t.current;d.style.visibility=Fr.editor?"hidden":"inherit";const m=x=>{console.log("Custom:",x.value)},v=x=>{const E=x.value.value;E==="scene1"?o():E==="scene2"&&u()};return Sr.addEventListener(Er.CUSTOM,m),Sr.addEventListener(Er.SELECT_DROPDOWN,v),()=>{Sr.removeEventListener(Er.CUSTOM,m),Sr.removeEventListener(Er.SELECT_DROPDOWN,v)}},[]),Je.jsxs(Je.Fragment,{children:[Fr.isApp&&Je.jsx("canvas",{ref:e}),Je.jsx("div",{id:"box",ref:t,children:Je.jsx("button",{onClick:()=>{n.playSheet("Scene1")},children:"Click"})}),Je.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"20px"},children:[Je.jsx("button",{onClick:o,children:"Scene 1"}),Je.jsx("button",{onClick:u,children:"Scene 2"})]}),Je.jsx(Nnt,{three:r})]})}function Bnt(){const[t,e]=Mt.useState(!1);return Mt.useEffect(()=>{const n=()=>{KT.removeEventListener(XT.LOAD_COMPLETE,n);const r=Fr.components.get("theatre"),i=bMe.get("animation");r.project=sF.getProject("RemoteApp",{state:i}),r.project.ready.then(()=>{e(!0)})};KT.addEventListener(XT.LOAD_COMPLETE,n),Rnt()},[e]),Je.jsxs(Je.Fragment,{children:[!t&&Je.jsx("p",{children:"Loading..."}),t&&Je.jsx(Fnt,{})]})}r1.rafDriver=sF.createRafDriver();_Se.initialize({__experimental_rafDriver:r1.rafDriver});x9.createRoot(document.getElementById("root")).render(Je.jsx(Je.Fragment,{children:Je.jsxs(Je.Fragment,{children:[Je.jsx(Dnt,{}),Je.jsx(Bnt,{})]})}));
