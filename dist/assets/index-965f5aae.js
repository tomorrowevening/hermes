var xOe=Object.defineProperty;var SOe=(t,e,n)=>e in t?xOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Bi=(t,e,n)=>(SOe(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var Ai=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hye(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pye={exports:{}},Q3={},fye={exports:{}},ar={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xP=Symbol.for("react.element"),EOe=Symbol.for("react.portal"),COe=Symbol.for("react.fragment"),POe=Symbol.for("react.strict_mode"),kOe=Symbol.for("react.profiler"),TOe=Symbol.for("react.provider"),MOe=Symbol.for("react.context"),AOe=Symbol.for("react.forward_ref"),IOe=Symbol.for("react.suspense"),ROe=Symbol.for("react.memo"),OOe=Symbol.for("react.lazy"),Sfe=Symbol.iterator;function DOe(t){return t===null||typeof t!="object"?null:(t=Sfe&&t[Sfe]||t["@@iterator"],typeof t=="function"?t:null)}var mye={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vye=Object.assign,gye={};function J_(t,e,n){this.props=t,this.context=e,this.refs=gye,this.updater=n||mye}J_.prototype.isReactComponent={};J_.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};J_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function yye(){}yye.prototype=J_.prototype;function x9(t,e,n){this.props=t,this.context=e,this.refs=gye,this.updater=n||mye}var S9=x9.prototype=new yye;S9.constructor=x9;vye(S9,J_.prototype);S9.isPureReactComponent=!0;var Efe=Array.isArray,bye=Object.prototype.hasOwnProperty,E9={current:null},_ye={key:!0,ref:!0,__self:!0,__source:!0};function wye(t,e,n){var r,o={},u=null,h=null;if(e!=null)for(r in e.ref!==void 0&&(h=e.ref),e.key!==void 0&&(u=""+e.key),e)bye.call(e,r)&&!_ye.hasOwnProperty(r)&&(o[r]=e[r]);var m=arguments.length-2;if(m===1)o.children=n;else if(1<m){for(var _=Array(m),x=0;x<m;x++)_[x]=arguments[x+2];o.children=_}if(t&&t.defaultProps)for(r in m=t.defaultProps,m)o[r]===void 0&&(o[r]=m[r]);return{$$typeof:xP,type:t,key:u,ref:h,props:o,_owner:E9.current}}function LOe(t,e){return{$$typeof:xP,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function C9(t){return typeof t=="object"&&t!==null&&t.$$typeof===xP}function NOe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Cfe=/\/+/g;function l6(t,e){return typeof t=="object"&&t!==null&&t.key!=null?NOe(""+t.key):e.toString(36)}function jD(t,e,n,r,o){var u=typeof t;(u==="undefined"||u==="boolean")&&(t=null);var h=!1;if(t===null)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case xP:case EOe:h=!0}}if(h)return h=t,o=o(h),t=r===""?"."+l6(h,0):r,Efe(o)?(n="",t!=null&&(n=t.replace(Cfe,"$&/")+"/"),jD(o,e,n,"",function(x){return x})):o!=null&&(C9(o)&&(o=LOe(o,n+(!o.key||h&&h.key===o.key?"":(""+o.key).replace(Cfe,"$&/")+"/")+t)),e.push(o)),1;if(h=0,r=r===""?".":r+":",Efe(t))for(var m=0;m<t.length;m++){u=t[m];var _=r+l6(u,m);h+=jD(u,e,n,_,o)}else if(_=DOe(t),typeof _=="function")for(t=_.call(t),m=0;!(u=t.next()).done;)u=u.value,_=r+l6(u,m++),h+=jD(u,e,n,_,o);else if(u==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return h}function YO(t,e,n){if(t==null)return t;var r=[],o=0;return jD(t,r,"","",function(u){return e.call(n,u,o++)}),r}function FOe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qs={current:null},zD={transition:null},BOe={ReactCurrentDispatcher:qs,ReactCurrentBatchConfig:zD,ReactCurrentOwner:E9};ar.Children={map:YO,forEach:function(t,e,n){YO(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return YO(t,function(){e++}),e},toArray:function(t){return YO(t,function(e){return e})||[]},only:function(t){if(!C9(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ar.Component=J_;ar.Fragment=COe;ar.Profiler=kOe;ar.PureComponent=x9;ar.StrictMode=POe;ar.Suspense=IOe;ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BOe;ar.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=vye({},t.props),o=t.key,u=t.ref,h=t._owner;if(e!=null){if(e.ref!==void 0&&(u=e.ref,h=E9.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var m=t.type.defaultProps;for(_ in e)bye.call(e,_)&&!_ye.hasOwnProperty(_)&&(r[_]=e[_]===void 0&&m!==void 0?m[_]:e[_])}var _=arguments.length-2;if(_===1)r.children=n;else if(1<_){m=Array(_);for(var x=0;x<_;x++)m[x]=arguments[x+2];r.children=m}return{$$typeof:xP,type:t.type,key:o,ref:u,props:r,_owner:h}};ar.createContext=function(t){return t={$$typeof:MOe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TOe,_context:t},t.Consumer=t};ar.createElement=wye;ar.createFactory=function(t){var e=wye.bind(null,t);return e.type=t,e};ar.createRef=function(){return{current:null}};ar.forwardRef=function(t){return{$$typeof:AOe,render:t}};ar.isValidElement=C9;ar.lazy=function(t){return{$$typeof:OOe,_payload:{_status:-1,_result:t},_init:FOe}};ar.memo=function(t,e){return{$$typeof:ROe,type:t,compare:e===void 0?null:e}};ar.startTransition=function(t){var e=zD.transition;zD.transition={};try{t()}finally{zD.transition=e}};ar.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ar.useCallback=function(t,e){return qs.current.useCallback(t,e)};ar.useContext=function(t){return qs.current.useContext(t)};ar.useDebugValue=function(){};ar.useDeferredValue=function(t){return qs.current.useDeferredValue(t)};ar.useEffect=function(t,e){return qs.current.useEffect(t,e)};ar.useId=function(){return qs.current.useId()};ar.useImperativeHandle=function(t,e,n){return qs.current.useImperativeHandle(t,e,n)};ar.useInsertionEffect=function(t,e){return qs.current.useInsertionEffect(t,e)};ar.useLayoutEffect=function(t,e){return qs.current.useLayoutEffect(t,e)};ar.useMemo=function(t,e){return qs.current.useMemo(t,e)};ar.useReducer=function(t,e,n){return qs.current.useReducer(t,e,n)};ar.useRef=function(t){return qs.current.useRef(t)};ar.useState=function(t){return qs.current.useState(t)};ar.useSyncExternalStore=function(t,e,n){return qs.current.useSyncExternalStore(t,e,n)};ar.useTransition=function(){return qs.current.useTransition()};ar.version="18.2.0";fye.exports=ar;var Qt=fye.exports;const xye=hye(Qt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UOe=Qt,VOe=Symbol.for("react.element"),jOe=Symbol.for("react.fragment"),zOe=Object.prototype.hasOwnProperty,HOe=UOe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GOe={key:!0,ref:!0,__self:!0,__source:!0};function Sye(t,e,n){var r,o={},u=null,h=null;n!==void 0&&(u=""+n),e.key!==void 0&&(u=""+e.key),e.ref!==void 0&&(h=e.ref);for(r in e)zOe.call(e,r)&&!GOe.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:VOe,type:t,key:u,ref:h,props:o,_owner:HOe.current}}Q3.Fragment=jOe;Q3.jsx=Sye;Q3.jsxs=Sye;pye.exports=Q3;var Lt=pye.exports,z8={},Eye={exports:{}},Ga={},Cye={exports:{}},Pye={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Ge,mt){var Je=Ge.length;Ge.push(mt);e:for(;0<Je;){var Be=Je-1>>>1,nt=Ge[Be];if(0<o(nt,mt))Ge[Be]=mt,Ge[Je]=nt,Je=Be;else break e}}function n(Ge){return Ge.length===0?null:Ge[0]}function r(Ge){if(Ge.length===0)return null;var mt=Ge[0],Je=Ge.pop();if(Je!==mt){Ge[0]=Je;e:for(var Be=0,nt=Ge.length,Wt=nt>>>1;Be<Wt;){var Ut=2*(Be+1)-1,Dt=Ge[Ut],en=Ut+1,on=Ge[en];if(0>o(Dt,Je))en<nt&&0>o(on,Dt)?(Ge[Be]=on,Ge[en]=Je,Be=en):(Ge[Be]=Dt,Ge[Ut]=Je,Be=Ut);else if(en<nt&&0>o(on,Je))Ge[Be]=on,Ge[en]=Je,Be=en;else break e}}return mt}function o(Ge,mt){var Je=Ge.sortIndex-mt.sortIndex;return Je!==0?Je:Ge.id-mt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();t.unstable_now=function(){return h.now()-m}}var _=[],x=[],T=1,I=null,N=3,H=!1,Z=!1,j=!1,z=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(Ge){for(var mt=n(x);mt!==null;){if(mt.callback===null)r(x);else if(mt.startTime<=Ge)r(x),mt.sortIndex=mt.expirationTime,e(_,mt);else break;mt=n(x)}}function te(Ge){if(j=!1,K(Ge),!Z)if(n(_)!==null)Z=!0,Fe(pe);else{var mt=n(x);mt!==null&&vt(te,mt.startTime-Ge)}}function pe(Ge,mt){Z=!1,j&&(j=!1,U(Pe),Pe=-1),H=!0;var Je=N;try{for(K(mt),I=n(_);I!==null&&(!(I.expirationTime>mt)||Ge&&!St());){var Be=I.callback;if(typeof Be=="function"){I.callback=null,N=I.priorityLevel;var nt=Be(I.expirationTime<=mt);mt=t.unstable_now(),typeof nt=="function"?I.callback=nt:I===n(_)&&r(_),K(mt)}else r(_);I=n(_)}if(I!==null)var Wt=!0;else{var Ut=n(x);Ut!==null&&vt(te,Ut.startTime-mt),Wt=!1}return Wt}finally{I=null,N=Je,H=!1}}var Q=!1,Se=null,Pe=-1,G=5,ye=-1;function St(){return!(t.unstable_now()-ye<G)}function kt(){if(Se!==null){var Ge=t.unstable_now();ye=Ge;var mt=!0;try{mt=Se(!0,Ge)}finally{mt?it():(Q=!1,Se=null)}}else Q=!1}var it;if(typeof C=="function")it=function(){C(kt)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,lt=me.port2;me.port1.onmessage=kt,it=function(){lt.postMessage(null)}}else it=function(){z(kt,0)};function Fe(Ge){Se=Ge,Q||(Q=!0,it())}function vt(Ge,mt){Pe=z(function(){Ge(t.unstable_now())},mt)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ge){Ge.callback=null},t.unstable_continueExecution=function(){Z||H||(Z=!0,Fe(pe))},t.unstable_forceFrameRate=function(Ge){0>Ge||125<Ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<Ge?Math.floor(1e3/Ge):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return n(_)},t.unstable_next=function(Ge){switch(N){case 1:case 2:case 3:var mt=3;break;default:mt=N}var Je=N;N=mt;try{return Ge()}finally{N=Je}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ge,mt){switch(Ge){case 1:case 2:case 3:case 4:case 5:break;default:Ge=3}var Je=N;N=Ge;try{return mt()}finally{N=Je}},t.unstable_scheduleCallback=function(Ge,mt,Je){var Be=t.unstable_now();switch(typeof Je=="object"&&Je!==null?(Je=Je.delay,Je=typeof Je=="number"&&0<Je?Be+Je:Be):Je=Be,Ge){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Je+nt,Ge={id:T++,callback:mt,priorityLevel:Ge,startTime:Je,expirationTime:nt,sortIndex:-1},Je>Be?(Ge.sortIndex=Je,e(x,Ge),n(_)===null&&Ge===n(x)&&(j?(U(Pe),Pe=-1):j=!0,vt(te,Je-Be))):(Ge.sortIndex=nt,e(_,Ge),Z||H||(Z=!0,Fe(pe))),Ge},t.unstable_shouldYield=St,t.unstable_wrapCallback=function(Ge){var mt=N;return function(){var Je=N;N=mt;try{return Ge.apply(this,arguments)}finally{N=Je}}}})(Pye);Cye.exports=Pye;var WOe=Cye.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kye=Qt,za=WOe;function Ft(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Tye=new Set,zC={};function Wg(t,e){B_(t,e),B_(t+"Capture",e)}function B_(t,e){for(zC[t]=e,t=0;t<e.length;t++)Tye.add(e[t])}var Ch=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),H8=Object.prototype.hasOwnProperty,$Oe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pfe={},kfe={};function KOe(t){return H8.call(kfe,t)?!0:H8.call(Pfe,t)?!1:$Oe.test(t)?kfe[t]=!0:(Pfe[t]=!0,!1)}function qOe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XOe(t,e,n,r){if(e===null||typeof e>"u"||qOe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xs(t,e,n,r,o,u,h){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=u,this.removeEmptyString=h}var Qo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qo[t]=new Xs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qo[e]=new Xs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qo[t]=new Xs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qo[t]=new Xs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qo[t]=new Xs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qo[t]=new Xs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qo[t]=new Xs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qo[t]=new Xs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qo[t]=new Xs(t,5,!1,t.toLowerCase(),null,!1,!1)});var P9=/[\-:]([a-z])/g;function k9(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(P9,k9);Qo[e]=new Xs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(P9,k9);Qo[e]=new Xs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(P9,k9);Qo[e]=new Xs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qo[t]=new Xs(t,1,!1,t.toLowerCase(),null,!1,!1)});Qo.xlinkHref=new Xs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qo[t]=new Xs(t,1,!1,t.toLowerCase(),null,!0,!0)});function T9(t,e,n,r){var o=Qo.hasOwnProperty(e)?Qo[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XOe(e,n,o,r)&&(n=null),r||o===null?KOe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rh=kye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ZO=Symbol.for("react.element"),u_=Symbol.for("react.portal"),c_=Symbol.for("react.fragment"),M9=Symbol.for("react.strict_mode"),G8=Symbol.for("react.profiler"),Mye=Symbol.for("react.provider"),Aye=Symbol.for("react.context"),A9=Symbol.for("react.forward_ref"),W8=Symbol.for("react.suspense"),$8=Symbol.for("react.suspense_list"),I9=Symbol.for("react.memo"),Cf=Symbol.for("react.lazy"),Iye=Symbol.for("react.offscreen"),Tfe=Symbol.iterator;function XE(t){return t===null||typeof t!="object"?null:(t=Tfe&&t[Tfe]||t["@@iterator"],typeof t=="function"?t:null)}var Di=Object.assign,u6;function _C(t){if(u6===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);u6=e&&e[1]||""}return`
`+u6+t}var c6=!1;function d6(t,e){if(!t||c6)return"";c6=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(x){var r=x}Reflect.construct(t,[],e)}else{try{e.call()}catch(x){r=x}t.call(e.prototype)}else{try{throw Error()}catch(x){r=x}t()}}catch(x){if(x&&r&&typeof x.stack=="string"){for(var o=x.stack.split(`
`),u=r.stack.split(`
`),h=o.length-1,m=u.length-1;1<=h&&0<=m&&o[h]!==u[m];)m--;for(;1<=h&&0<=m;h--,m--)if(o[h]!==u[m]){if(h!==1||m!==1)do if(h--,m--,0>m||o[h]!==u[m]){var _=`
`+o[h].replace(" at new "," at ");return t.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",t.displayName)),_}while(1<=h&&0<=m);break}}}finally{c6=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_C(t):""}function YOe(t){switch(t.tag){case 5:return _C(t.type);case 16:return _C("Lazy");case 13:return _C("Suspense");case 19:return _C("SuspenseList");case 0:case 2:case 15:return t=d6(t.type,!1),t;case 11:return t=d6(t.type.render,!1),t;case 1:return t=d6(t.type,!0),t;default:return""}}function K8(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case c_:return"Fragment";case u_:return"Portal";case G8:return"Profiler";case M9:return"StrictMode";case W8:return"Suspense";case $8:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Aye:return(t.displayName||"Context")+".Consumer";case Mye:return(t._context.displayName||"Context")+".Provider";case A9:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I9:return e=t.displayName||null,e!==null?e:K8(t.type)||"Memo";case Cf:e=t._payload,t=t._init;try{return K8(t(e))}catch{}}return null}function ZOe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K8(e);case 8:return e===M9?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rye(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function QOe(t){var e=Rye(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,u=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(h){r=""+h,u.call(this,h)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(h){r=""+h},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function QO(t){t._valueTracker||(t._valueTracker=QOe(t))}function Oye(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rye(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function a3(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function q8(t,e){var n=e.checked;return Di({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Mfe(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dye(t,e){e=e.checked,e!=null&&T9(t,"checked",e,!1)}function X8(t,e){Dye(t,e);var n=Zf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Y8(t,e.type,n):e.hasOwnProperty("defaultValue")&&Y8(t,e.type,Zf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Afe(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Y8(t,e,n){(e!=="number"||a3(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var wC=Array.isArray;function P_(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zf(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Z8(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ft(91));return Di({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ife(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ft(92));if(wC(n)){if(1<n.length)throw Error(Ft(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zf(n)}}function Lye(t,e){var n=Zf(e.value),r=Zf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rfe(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Nye(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Q8(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Nye(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var JO,Fye=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(JO=JO||document.createElement("div"),JO.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=JO.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function HC(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var kC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},JOe=["Webkit","ms","Moz","O"];Object.keys(kC).forEach(function(t){JOe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kC[e]=kC[t]})});function Bye(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||kC.hasOwnProperty(t)&&kC[t]?(""+e).trim():e+"px"}function Uye(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Bye(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var eDe=Di({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function J8(t,e){if(e){if(eDe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ft(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ft(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ft(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ft(62))}}function eH(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tH=null;function R9(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var nH=null,k_=null,T_=null;function Ofe(t){if(t=CP(t)){if(typeof nH!="function")throw Error(Ft(280));var e=t.stateNode;e&&(e=rL(e),nH(t.stateNode,t.type,e))}}function Vye(t){k_?T_?T_.push(t):T_=[t]:k_=t}function jye(){if(k_){var t=k_,e=T_;if(T_=k_=null,Ofe(t),e)for(t=0;t<e.length;t++)Ofe(e[t])}}function zye(t,e){return t(e)}function Hye(){}var h6=!1;function Gye(t,e,n){if(h6)return t(e,n);h6=!0;try{return zye(t,e,n)}finally{h6=!1,(k_!==null||T_!==null)&&(Hye(),jye())}}function GC(t,e){var n=t.stateNode;if(n===null)return null;var r=rL(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ft(231,e,typeof n));return n}var rH=!1;if(Ch)try{var YE={};Object.defineProperty(YE,"passive",{get:function(){rH=!0}}),window.addEventListener("test",YE,YE),window.removeEventListener("test",YE,YE)}catch{rH=!1}function tDe(t,e,n,r,o,u,h,m,_){var x=Array.prototype.slice.call(arguments,3);try{e.apply(n,x)}catch(T){this.onError(T)}}var TC=!1,l3=null,u3=!1,iH=null,nDe={onError:function(t){TC=!0,l3=t}};function rDe(t,e,n,r,o,u,h,m,_){TC=!1,l3=null,tDe.apply(nDe,arguments)}function iDe(t,e,n,r,o,u,h,m,_){if(rDe.apply(this,arguments),TC){if(TC){var x=l3;TC=!1,l3=null}else throw Error(Ft(198));u3||(u3=!0,iH=x)}}function $g(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wye(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dfe(t){if($g(t)!==t)throw Error(Ft(188))}function oDe(t){var e=t.alternate;if(!e){if(e=$g(t),e===null)throw Error(Ft(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var u=o.alternate;if(u===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===n)return Dfe(o),t;if(u===r)return Dfe(o),e;u=u.sibling}throw Error(Ft(188))}if(n.return!==r.return)n=o,r=u;else{for(var h=!1,m=o.child;m;){if(m===n){h=!0,n=o,r=u;break}if(m===r){h=!0,r=o,n=u;break}m=m.sibling}if(!h){for(m=u.child;m;){if(m===n){h=!0,n=u,r=o;break}if(m===r){h=!0,r=u,n=o;break}m=m.sibling}if(!h)throw Error(Ft(189))}}if(n.alternate!==r)throw Error(Ft(190))}if(n.tag!==3)throw Error(Ft(188));return n.stateNode.current===n?t:e}function $ye(t){return t=oDe(t),t!==null?Kye(t):null}function Kye(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kye(t);if(e!==null)return e;t=t.sibling}return null}var qye=za.unstable_scheduleCallback,Lfe=za.unstable_cancelCallback,sDe=za.unstable_shouldYield,aDe=za.unstable_requestPaint,Qi=za.unstable_now,lDe=za.unstable_getCurrentPriorityLevel,O9=za.unstable_ImmediatePriority,Xye=za.unstable_UserBlockingPriority,c3=za.unstable_NormalPriority,uDe=za.unstable_LowPriority,Yye=za.unstable_IdlePriority,J3=null,Vc=null;function cDe(t){if(Vc&&typeof Vc.onCommitFiberRoot=="function")try{Vc.onCommitFiberRoot(J3,t,void 0,(t.current.flags&128)===128)}catch{}}var Bu=Math.clz32?Math.clz32:pDe,dDe=Math.log,hDe=Math.LN2;function pDe(t){return t>>>=0,t===0?32:31-(dDe(t)/hDe|0)|0}var eD=64,tD=4194304;function xC(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function d3(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,u=t.pingedLanes,h=n&268435455;if(h!==0){var m=h&~o;m!==0?r=xC(m):(u&=h,u!==0&&(r=xC(u)))}else h=n&~o,h!==0?r=xC(h):u!==0&&(r=xC(u));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,u=e&-e,o>=u||o===16&&(u&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bu(e),o=1<<n,r|=t[n],e&=~o;return r}function fDe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mDe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,u=t.pendingLanes;0<u;){var h=31-Bu(u),m=1<<h,_=o[h];_===-1?(!(m&n)||m&r)&&(o[h]=fDe(m,e)):_<=e&&(t.expiredLanes|=m),u&=~m}}function oH(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zye(){var t=eD;return eD<<=1,!(eD&4194240)&&(eD=64),t}function p6(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function SP(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bu(e),t[e]=n}function vDe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Bu(n),u=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~u}}function D9(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bu(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var Hr=0;function Qye(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Jye,L9,ebe,tbe,nbe,sH=!1,nD=[],Nf=null,Ff=null,Bf=null,WC=new Map,$C=new Map,Tf=[],gDe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Nfe(t,e){switch(t){case"focusin":case"focusout":Nf=null;break;case"dragenter":case"dragleave":Ff=null;break;case"mouseover":case"mouseout":Bf=null;break;case"pointerover":case"pointerout":WC.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$C.delete(e.pointerId)}}function ZE(t,e,n,r,o,u){return t===null||t.nativeEvent!==u?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:u,targetContainers:[o]},e!==null&&(e=CP(e),e!==null&&L9(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function yDe(t,e,n,r,o){switch(e){case"focusin":return Nf=ZE(Nf,t,e,n,r,o),!0;case"dragenter":return Ff=ZE(Ff,t,e,n,r,o),!0;case"mouseover":return Bf=ZE(Bf,t,e,n,r,o),!0;case"pointerover":var u=o.pointerId;return WC.set(u,ZE(WC.get(u)||null,t,e,n,r,o)),!0;case"gotpointercapture":return u=o.pointerId,$C.set(u,ZE($C.get(u)||null,t,e,n,r,o)),!0}return!1}function rbe(t){var e=_g(t.target);if(e!==null){var n=$g(e);if(n!==null){if(e=n.tag,e===13){if(e=Wye(n),e!==null){t.blockedOn=e,nbe(t.priority,function(){ebe(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function HD(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=aH(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);tH=r,n.target.dispatchEvent(r),tH=null}else return e=CP(n),e!==null&&L9(e),t.blockedOn=n,!1;e.shift()}return!0}function Ffe(t,e,n){HD(t)&&n.delete(e)}function bDe(){sH=!1,Nf!==null&&HD(Nf)&&(Nf=null),Ff!==null&&HD(Ff)&&(Ff=null),Bf!==null&&HD(Bf)&&(Bf=null),WC.forEach(Ffe),$C.forEach(Ffe)}function QE(t,e){t.blockedOn===e&&(t.blockedOn=null,sH||(sH=!0,za.unstable_scheduleCallback(za.unstable_NormalPriority,bDe)))}function KC(t){function e(o){return QE(o,t)}if(0<nD.length){QE(nD[0],t);for(var n=1;n<nD.length;n++){var r=nD[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Nf!==null&&QE(Nf,t),Ff!==null&&QE(Ff,t),Bf!==null&&QE(Bf,t),WC.forEach(e),$C.forEach(e),n=0;n<Tf.length;n++)r=Tf[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Tf.length&&(n=Tf[0],n.blockedOn===null);)rbe(n),n.blockedOn===null&&Tf.shift()}var M_=Rh.ReactCurrentBatchConfig,h3=!0;function _De(t,e,n,r){var o=Hr,u=M_.transition;M_.transition=null;try{Hr=1,N9(t,e,n,r)}finally{Hr=o,M_.transition=u}}function wDe(t,e,n,r){var o=Hr,u=M_.transition;M_.transition=null;try{Hr=4,N9(t,e,n,r)}finally{Hr=o,M_.transition=u}}function N9(t,e,n,r){if(h3){var o=aH(t,e,n,r);if(o===null)S6(t,e,r,p3,n),Nfe(t,r);else if(yDe(o,t,e,n,r))r.stopPropagation();else if(Nfe(t,r),e&4&&-1<gDe.indexOf(t)){for(;o!==null;){var u=CP(o);if(u!==null&&Jye(u),u=aH(t,e,n,r),u===null&&S6(t,e,r,p3,n),u===o)break;o=u}o!==null&&r.stopPropagation()}else S6(t,e,r,null,n)}}var p3=null;function aH(t,e,n,r){if(p3=null,t=R9(r),t=_g(t),t!==null)if(e=$g(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Wye(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return p3=t,null}function ibe(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lDe()){case O9:return 1;case Xye:return 4;case c3:case uDe:return 16;case Yye:return 536870912;default:return 16}default:return 16}}var Af=null,F9=null,GD=null;function obe(){if(GD)return GD;var t,e=F9,n=e.length,r,o="value"in Af?Af.value:Af.textContent,u=o.length;for(t=0;t<n&&e[t]===o[t];t++);var h=n-t;for(r=1;r<=h&&e[n-r]===o[u-r];r++);return GD=o.slice(t,1<r?1-r:void 0)}function WD(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rD(){return!0}function Bfe(){return!1}function Wa(t){function e(n,r,o,u,h){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var m in t)t.hasOwnProperty(m)&&(n=t[m],this[m]=n?n(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?rD:Bfe,this.isPropagationStopped=Bfe,this}return Di(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rD)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rD)},persist:function(){},isPersistent:rD}),e}var ew={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},B9=Wa(ew),EP=Di({},ew,{view:0,detail:0}),xDe=Wa(EP),f6,m6,JE,eL=Di({},EP,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:U9,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==JE&&(JE&&t.type==="mousemove"?(f6=t.screenX-JE.screenX,m6=t.screenY-JE.screenY):m6=f6=0,JE=t),f6)},movementY:function(t){return"movementY"in t?t.movementY:m6}}),Ufe=Wa(eL),SDe=Di({},eL,{dataTransfer:0}),EDe=Wa(SDe),CDe=Di({},EP,{relatedTarget:0}),v6=Wa(CDe),PDe=Di({},ew,{animationName:0,elapsedTime:0,pseudoElement:0}),kDe=Wa(PDe),TDe=Di({},ew,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),MDe=Wa(TDe),ADe=Di({},ew,{data:0}),Vfe=Wa(ADe),IDe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RDe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ODe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DDe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ODe[t])?!!e[t]:!1}function U9(){return DDe}var LDe=Di({},EP,{key:function(t){if(t.key){var e=IDe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=WD(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?RDe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:U9,charCode:function(t){return t.type==="keypress"?WD(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?WD(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NDe=Wa(LDe),FDe=Di({},eL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jfe=Wa(FDe),BDe=Di({},EP,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:U9}),UDe=Wa(BDe),VDe=Di({},ew,{propertyName:0,elapsedTime:0,pseudoElement:0}),jDe=Wa(VDe),zDe=Di({},eL,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),HDe=Wa(zDe),GDe=[9,13,27,32],V9=Ch&&"CompositionEvent"in window,MC=null;Ch&&"documentMode"in document&&(MC=document.documentMode);var WDe=Ch&&"TextEvent"in window&&!MC,sbe=Ch&&(!V9||MC&&8<MC&&11>=MC),zfe=String.fromCharCode(32),Hfe=!1;function abe(t,e){switch(t){case"keyup":return GDe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lbe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var d_=!1;function $De(t,e){switch(t){case"compositionend":return lbe(e);case"keypress":return e.which!==32?null:(Hfe=!0,zfe);case"textInput":return t=e.data,t===zfe&&Hfe?null:t;default:return null}}function KDe(t,e){if(d_)return t==="compositionend"||!V9&&abe(t,e)?(t=obe(),GD=F9=Af=null,d_=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sbe&&e.locale!=="ko"?null:e.data;default:return null}}var qDe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gfe(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!qDe[t.type]:e==="textarea"}function ube(t,e,n,r){Vye(r),e=f3(e,"onChange"),0<e.length&&(n=new B9("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var AC=null,qC=null;function XDe(t){_be(t,0)}function tL(t){var e=f_(t);if(Oye(e))return t}function YDe(t,e){if(t==="change")return e}var cbe=!1;if(Ch){var g6;if(Ch){var y6="oninput"in document;if(!y6){var Wfe=document.createElement("div");Wfe.setAttribute("oninput","return;"),y6=typeof Wfe.oninput=="function"}g6=y6}else g6=!1;cbe=g6&&(!document.documentMode||9<document.documentMode)}function $fe(){AC&&(AC.detachEvent("onpropertychange",dbe),qC=AC=null)}function dbe(t){if(t.propertyName==="value"&&tL(qC)){var e=[];ube(e,qC,t,R9(t)),Gye(XDe,e)}}function ZDe(t,e,n){t==="focusin"?($fe(),AC=e,qC=n,AC.attachEvent("onpropertychange",dbe)):t==="focusout"&&$fe()}function QDe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tL(qC)}function JDe(t,e){if(t==="click")return tL(e)}function e3e(t,e){if(t==="input"||t==="change")return tL(e)}function t3e(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vu=typeof Object.is=="function"?Object.is:t3e;function XC(t,e){if(Vu(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!H8.call(e,o)||!Vu(t[o],e[o]))return!1}return!0}function Kfe(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qfe(t,e){var n=Kfe(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kfe(n)}}function hbe(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?hbe(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pbe(){for(var t=window,e=a3();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=a3(t.document)}return e}function j9(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function n3e(t){var e=pbe(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hbe(n.ownerDocument.documentElement,n)){if(r!==null&&j9(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,u=Math.min(r.start,o);r=r.end===void 0?u:Math.min(r.end,o),!t.extend&&u>r&&(o=r,r=u,u=o),o=qfe(n,u);var h=qfe(n,r);o&&h&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),u>r?(t.addRange(e),t.extend(h.node,h.offset)):(e.setEnd(h.node,h.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var r3e=Ch&&"documentMode"in document&&11>=document.documentMode,h_=null,lH=null,IC=null,uH=!1;function Xfe(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;uH||h_==null||h_!==a3(r)||(r=h_,"selectionStart"in r&&j9(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),IC&&XC(IC,r)||(IC=r,r=f3(lH,"onSelect"),0<r.length&&(e=new B9("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=h_)))}function iD(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var p_={animationend:iD("Animation","AnimationEnd"),animationiteration:iD("Animation","AnimationIteration"),animationstart:iD("Animation","AnimationStart"),transitionend:iD("Transition","TransitionEnd")},b6={},fbe={};Ch&&(fbe=document.createElement("div").style,"AnimationEvent"in window||(delete p_.animationend.animation,delete p_.animationiteration.animation,delete p_.animationstart.animation),"TransitionEvent"in window||delete p_.transitionend.transition);function nL(t){if(b6[t])return b6[t];if(!p_[t])return t;var e=p_[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in fbe)return b6[t]=e[n];return t}var mbe=nL("animationend"),vbe=nL("animationiteration"),gbe=nL("animationstart"),ybe=nL("transitionend"),bbe=new Map,Yfe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function om(t,e){bbe.set(t,e),Wg(e,[t])}for(var _6=0;_6<Yfe.length;_6++){var w6=Yfe[_6],i3e=w6.toLowerCase(),o3e=w6[0].toUpperCase()+w6.slice(1);om(i3e,"on"+o3e)}om(mbe,"onAnimationEnd");om(vbe,"onAnimationIteration");om(gbe,"onAnimationStart");om("dblclick","onDoubleClick");om("focusin","onFocus");om("focusout","onBlur");om(ybe,"onTransitionEnd");B_("onMouseEnter",["mouseout","mouseover"]);B_("onMouseLeave",["mouseout","mouseover"]);B_("onPointerEnter",["pointerout","pointerover"]);B_("onPointerLeave",["pointerout","pointerover"]);Wg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Wg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Wg("onBeforeInput",["compositionend","keypress","textInput","paste"]);Wg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Wg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Wg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var SC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s3e=new Set("cancel close invalid load scroll toggle".split(" ").concat(SC));function Zfe(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,iDe(r,e,void 0,t),t.currentTarget=null}function _be(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var u=void 0;if(e)for(var h=r.length-1;0<=h;h--){var m=r[h],_=m.instance,x=m.currentTarget;if(m=m.listener,_!==u&&o.isPropagationStopped())break e;Zfe(o,m,x),u=_}else for(h=0;h<r.length;h++){if(m=r[h],_=m.instance,x=m.currentTarget,m=m.listener,_!==u&&o.isPropagationStopped())break e;Zfe(o,m,x),u=_}}}if(u3)throw t=iH,u3=!1,iH=null,t}function vi(t,e){var n=e[fH];n===void 0&&(n=e[fH]=new Set);var r=t+"__bubble";n.has(r)||(wbe(e,t,2,!1),n.add(r))}function x6(t,e,n){var r=0;e&&(r|=4),wbe(n,t,r,e)}var oD="_reactListening"+Math.random().toString(36).slice(2);function YC(t){if(!t[oD]){t[oD]=!0,Tye.forEach(function(n){n!=="selectionchange"&&(s3e.has(n)||x6(n,!1,t),x6(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[oD]||(e[oD]=!0,x6("selectionchange",!1,e))}}function wbe(t,e,n,r){switch(ibe(e)){case 1:var o=_De;break;case 4:o=wDe;break;default:o=N9}n=o.bind(null,e,n,t),o=void 0,!rH||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function S6(t,e,n,r,o){var u=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var m=r.stateNode.containerInfo;if(m===o||m.nodeType===8&&m.parentNode===o)break;if(h===4)for(h=r.return;h!==null;){var _=h.tag;if((_===3||_===4)&&(_=h.stateNode.containerInfo,_===o||_.nodeType===8&&_.parentNode===o))return;h=h.return}for(;m!==null;){if(h=_g(m),h===null)return;if(_=h.tag,_===5||_===6){r=u=h;continue e}m=m.parentNode}}r=r.return}Gye(function(){var x=u,T=R9(n),I=[];e:{var N=bbe.get(t);if(N!==void 0){var H=B9,Z=t;switch(t){case"keypress":if(WD(n)===0)break e;case"keydown":case"keyup":H=NDe;break;case"focusin":Z="focus",H=v6;break;case"focusout":Z="blur",H=v6;break;case"beforeblur":case"afterblur":H=v6;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Ufe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=EDe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=UDe;break;case mbe:case vbe:case gbe:H=kDe;break;case ybe:H=jDe;break;case"scroll":H=xDe;break;case"wheel":H=HDe;break;case"copy":case"cut":case"paste":H=MDe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=jfe}var j=(e&4)!==0,z=!j&&t==="scroll",U=j?N!==null?N+"Capture":null:N;j=[];for(var C=x,K;C!==null;){K=C;var te=K.stateNode;if(K.tag===5&&te!==null&&(K=te,U!==null&&(te=GC(C,U),te!=null&&j.push(ZC(C,te,K)))),z)break;C=C.return}0<j.length&&(N=new H(N,Z,null,n,T),I.push({event:N,listeners:j}))}}if(!(e&7)){e:{if(N=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",N&&n!==tH&&(Z=n.relatedTarget||n.fromElement)&&(_g(Z)||Z[Ph]))break e;if((H||N)&&(N=T.window===T?T:(N=T.ownerDocument)?N.defaultView||N.parentWindow:window,H?(Z=n.relatedTarget||n.toElement,H=x,Z=Z?_g(Z):null,Z!==null&&(z=$g(Z),Z!==z||Z.tag!==5&&Z.tag!==6)&&(Z=null)):(H=null,Z=x),H!==Z)){if(j=Ufe,te="onMouseLeave",U="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(j=jfe,te="onPointerLeave",U="onPointerEnter",C="pointer"),z=H==null?N:f_(H),K=Z==null?N:f_(Z),N=new j(te,C+"leave",H,n,T),N.target=z,N.relatedTarget=K,te=null,_g(T)===x&&(j=new j(U,C+"enter",Z,n,T),j.target=K,j.relatedTarget=z,te=j),z=te,H&&Z)t:{for(j=H,U=Z,C=0,K=j;K;K=Bb(K))C++;for(K=0,te=U;te;te=Bb(te))K++;for(;0<C-K;)j=Bb(j),C--;for(;0<K-C;)U=Bb(U),K--;for(;C--;){if(j===U||U!==null&&j===U.alternate)break t;j=Bb(j),U=Bb(U)}j=null}else j=null;H!==null&&Qfe(I,N,H,j,!1),Z!==null&&z!==null&&Qfe(I,z,Z,j,!0)}}e:{if(N=x?f_(x):window,H=N.nodeName&&N.nodeName.toLowerCase(),H==="select"||H==="input"&&N.type==="file")var pe=YDe;else if(Gfe(N))if(cbe)pe=e3e;else{pe=QDe;var Q=ZDe}else(H=N.nodeName)&&H.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(pe=JDe);if(pe&&(pe=pe(t,x))){ube(I,pe,n,T);break e}Q&&Q(t,N,x),t==="focusout"&&(Q=N._wrapperState)&&Q.controlled&&N.type==="number"&&Y8(N,"number",N.value)}switch(Q=x?f_(x):window,t){case"focusin":(Gfe(Q)||Q.contentEditable==="true")&&(h_=Q,lH=x,IC=null);break;case"focusout":IC=lH=h_=null;break;case"mousedown":uH=!0;break;case"contextmenu":case"mouseup":case"dragend":uH=!1,Xfe(I,n,T);break;case"selectionchange":if(r3e)break;case"keydown":case"keyup":Xfe(I,n,T)}var Se;if(V9)e:{switch(t){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else d_?abe(t,n)&&(Pe="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Pe="onCompositionStart");Pe&&(sbe&&n.locale!=="ko"&&(d_||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&d_&&(Se=obe()):(Af=T,F9="value"in Af?Af.value:Af.textContent,d_=!0)),Q=f3(x,Pe),0<Q.length&&(Pe=new Vfe(Pe,t,null,n,T),I.push({event:Pe,listeners:Q}),Se?Pe.data=Se:(Se=lbe(n),Se!==null&&(Pe.data=Se)))),(Se=WDe?$De(t,n):KDe(t,n))&&(x=f3(x,"onBeforeInput"),0<x.length&&(T=new Vfe("onBeforeInput","beforeinput",null,n,T),I.push({event:T,listeners:x}),T.data=Se))}_be(I,e)})}function ZC(t,e,n){return{instance:t,listener:e,currentTarget:n}}function f3(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,u=o.stateNode;o.tag===5&&u!==null&&(o=u,u=GC(t,n),u!=null&&r.unshift(ZC(t,u,o)),u=GC(t,e),u!=null&&r.push(ZC(t,u,o))),t=t.return}return r}function Bb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Qfe(t,e,n,r,o){for(var u=e._reactName,h=[];n!==null&&n!==r;){var m=n,_=m.alternate,x=m.stateNode;if(_!==null&&_===r)break;m.tag===5&&x!==null&&(m=x,o?(_=GC(n,u),_!=null&&h.unshift(ZC(n,_,m))):o||(_=GC(n,u),_!=null&&h.push(ZC(n,_,m)))),n=n.return}h.length!==0&&t.push({event:e,listeners:h})}var a3e=/\r\n?/g,l3e=/\u0000|\uFFFD/g;function Jfe(t){return(typeof t=="string"?t:""+t).replace(a3e,`
`).replace(l3e,"")}function sD(t,e,n){if(e=Jfe(e),Jfe(t)!==e&&n)throw Error(Ft(425))}function m3(){}var cH=null,dH=null;function hH(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var pH=typeof setTimeout=="function"?setTimeout:void 0,u3e=typeof clearTimeout=="function"?clearTimeout:void 0,eme=typeof Promise=="function"?Promise:void 0,c3e=typeof queueMicrotask=="function"?queueMicrotask:typeof eme<"u"?function(t){return eme.resolve(null).then(t).catch(d3e)}:pH;function d3e(t){setTimeout(function(){throw t})}function E6(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),KC(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);KC(e)}function Uf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function tme(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var tw=Math.random().toString(36).slice(2),Bc="__reactFiber$"+tw,QC="__reactProps$"+tw,Ph="__reactContainer$"+tw,fH="__reactEvents$"+tw,h3e="__reactListeners$"+tw,p3e="__reactHandles$"+tw;function _g(t){var e=t[Bc];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ph]||n[Bc]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=tme(t);t!==null;){if(n=t[Bc])return n;t=tme(t)}return e}t=n,n=t.parentNode}return null}function CP(t){return t=t[Bc]||t[Ph],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function f_(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ft(33))}function rL(t){return t[QC]||null}var mH=[],m_=-1;function sm(t){return{current:t}}function gi(t){0>m_||(t.current=mH[m_],mH[m_]=null,m_--)}function si(t,e){m_++,mH[m_]=t.current,t.current=e}var Qf={},ws=sm(Qf),ma=sm(!1),Ig=Qf;function U_(t,e){var n=t.type.contextTypes;if(!n)return Qf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},u;for(u in n)o[u]=e[u];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function va(t){return t=t.childContextTypes,t!=null}function v3(){gi(ma),gi(ws)}function nme(t,e,n){if(ws.current!==Qf)throw Error(Ft(168));si(ws,e),si(ma,n)}function xbe(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(Ft(108,ZOe(t)||"Unknown",o));return Di({},n,r)}function g3(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qf,Ig=ws.current,si(ws,t),si(ma,ma.current),!0}function rme(t,e,n){var r=t.stateNode;if(!r)throw Error(Ft(169));n?(t=xbe(t,e,Ig),r.__reactInternalMemoizedMergedChildContext=t,gi(ma),gi(ws),si(ws,t)):gi(ma),si(ma,n)}var ph=null,iL=!1,C6=!1;function Sbe(t){ph===null?ph=[t]:ph.push(t)}function f3e(t){iL=!0,Sbe(t)}function am(){if(!C6&&ph!==null){C6=!0;var t=0,e=Hr;try{var n=ph;for(Hr=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ph=null,iL=!1}catch(o){throw ph!==null&&(ph=ph.slice(t+1)),qye(O9,am),o}finally{Hr=e,C6=!1}}return null}var v_=[],g_=0,y3=null,b3=0,Il=[],Rl=0,Rg=null,mh=1,vh="";function pg(t,e){v_[g_++]=b3,v_[g_++]=y3,y3=t,b3=e}function Ebe(t,e,n){Il[Rl++]=mh,Il[Rl++]=vh,Il[Rl++]=Rg,Rg=t;var r=mh;t=vh;var o=32-Bu(r)-1;r&=~(1<<o),n+=1;var u=32-Bu(e)+o;if(30<u){var h=o-o%5;u=(r&(1<<h)-1).toString(32),r>>=h,o-=h,mh=1<<32-Bu(e)+o|n<<o|r,vh=u+t}else mh=1<<u|n<<o|r,vh=t}function z9(t){t.return!==null&&(pg(t,1),Ebe(t,1,0))}function H9(t){for(;t===y3;)y3=v_[--g_],v_[g_]=null,b3=v_[--g_],v_[g_]=null;for(;t===Rg;)Rg=Il[--Rl],Il[Rl]=null,vh=Il[--Rl],Il[Rl]=null,mh=Il[--Rl],Il[Rl]=null}var Va=null,Ba=null,bi=!1,Du=null;function Cbe(t,e){var n=Dl(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ime(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Va=t,Ba=Uf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Va=t,Ba=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rg!==null?{id:mh,overflow:vh}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Dl(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Va=t,Ba=null,!0):!1;default:return!1}}function vH(t){return(t.mode&1)!==0&&(t.flags&128)===0}function gH(t){if(bi){var e=Ba;if(e){var n=e;if(!ime(t,e)){if(vH(t))throw Error(Ft(418));e=Uf(n.nextSibling);var r=Va;e&&ime(t,e)?Cbe(r,n):(t.flags=t.flags&-4097|2,bi=!1,Va=t)}}else{if(vH(t))throw Error(Ft(418));t.flags=t.flags&-4097|2,bi=!1,Va=t}}}function ome(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Va=t}function aD(t){if(t!==Va)return!1;if(!bi)return ome(t),bi=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hH(t.type,t.memoizedProps)),e&&(e=Ba)){if(vH(t))throw Pbe(),Error(Ft(418));for(;e;)Cbe(t,e),e=Uf(e.nextSibling)}if(ome(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ft(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ba=Uf(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ba=null}}else Ba=Va?Uf(t.stateNode.nextSibling):null;return!0}function Pbe(){for(var t=Ba;t;)t=Uf(t.nextSibling)}function V_(){Ba=Va=null,bi=!1}function G9(t){Du===null?Du=[t]:Du.push(t)}var m3e=Rh.ReactCurrentBatchConfig;function Ru(t,e){if(t&&t.defaultProps){e=Di({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var _3=sm(null),w3=null,y_=null,W9=null;function $9(){W9=y_=w3=null}function K9(t){var e=_3.current;gi(_3),t._currentValue=e}function yH(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function A_(t,e){w3=t,W9=y_=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(pa=!0),t.firstContext=null)}function Ul(t){var e=t._currentValue;if(W9!==t)if(t={context:t,memoizedValue:e,next:null},y_===null){if(w3===null)throw Error(Ft(308));y_=t,w3.dependencies={lanes:0,firstContext:t}}else y_=y_.next=t;return e}var wg=null;function q9(t){wg===null?wg=[t]:wg.push(t)}function kbe(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,q9(e)):(n.next=o.next,o.next=n),e.interleaved=n,kh(t,r)}function kh(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pf=!1;function X9(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tbe(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vf(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,br&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,kh(t,n)}return o=r.interleaved,o===null?(e.next=e,q9(r)):(e.next=o.next,o.next=e),r.interleaved=e,kh(t,n)}function $D(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,D9(t,n)}}function sme(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var h={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?o=u=h:u=u.next=h,n=n.next}while(n!==null);u===null?o=u=e:u=u.next=e}else o=u=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function x3(t,e,n,r){var o=t.updateQueue;Pf=!1;var u=o.firstBaseUpdate,h=o.lastBaseUpdate,m=o.shared.pending;if(m!==null){o.shared.pending=null;var _=m,x=_.next;_.next=null,h===null?u=x:h.next=x,h=_;var T=t.alternate;T!==null&&(T=T.updateQueue,m=T.lastBaseUpdate,m!==h&&(m===null?T.firstBaseUpdate=x:m.next=x,T.lastBaseUpdate=_))}if(u!==null){var I=o.baseState;h=0,T=x=_=null,m=u;do{var N=m.lane,H=m.eventTime;if((r&N)===N){T!==null&&(T=T.next={eventTime:H,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var Z=t,j=m;switch(N=e,H=n,j.tag){case 1:if(Z=j.payload,typeof Z=="function"){I=Z.call(H,I,N);break e}I=Z;break e;case 3:Z.flags=Z.flags&-65537|128;case 0:if(Z=j.payload,N=typeof Z=="function"?Z.call(H,I,N):Z,N==null)break e;I=Di({},I,N);break e;case 2:Pf=!0}}m.callback!==null&&m.lane!==0&&(t.flags|=64,N=o.effects,N===null?o.effects=[m]:N.push(m))}else H={eventTime:H,lane:N,tag:m.tag,payload:m.payload,callback:m.callback,next:null},T===null?(x=T=H,_=I):T=T.next=H,h|=N;if(m=m.next,m===null){if(m=o.shared.pending,m===null)break;N=m,m=N.next,N.next=null,o.lastBaseUpdate=N,o.shared.pending=null}}while(1);if(T===null&&(_=I),o.baseState=_,o.firstBaseUpdate=x,o.lastBaseUpdate=T,e=o.shared.interleaved,e!==null){o=e;do h|=o.lane,o=o.next;while(o!==e)}else u===null&&(o.shared.lanes=0);Dg|=h,t.lanes=h,t.memoizedState=I}}function ame(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Ft(191,o));o.call(r)}}}var Mbe=new kye.Component().refs;function bH(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Di({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var oL={isMounted:function(t){return(t=t._reactInternals)?$g(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gs(),o=zf(t),u=wh(r,o);u.payload=e,n!=null&&(u.callback=n),e=Vf(t,u,o),e!==null&&(Uu(e,t,o,r),$D(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gs(),o=zf(t),u=wh(r,o);u.tag=1,u.payload=e,n!=null&&(u.callback=n),e=Vf(t,u,o),e!==null&&(Uu(e,t,o,r),$D(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gs(),r=zf(t),o=wh(n,r);o.tag=2,e!=null&&(o.callback=e),e=Vf(t,o,r),e!==null&&(Uu(e,t,r,n),$D(e,t,r))}};function lme(t,e,n,r,o,u,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,u,h):e.prototype&&e.prototype.isPureReactComponent?!XC(n,r)||!XC(o,u):!0}function Abe(t,e,n){var r=!1,o=Qf,u=e.contextType;return typeof u=="object"&&u!==null?u=Ul(u):(o=va(e)?Ig:ws.current,r=e.contextTypes,u=(r=r!=null)?U_(t,o):Qf),e=new e(n,u),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oL,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=u),e}function ume(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&oL.enqueueReplaceState(e,e.state,null)}function _H(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs=Mbe,X9(t);var u=e.contextType;typeof u=="object"&&u!==null?o.context=Ul(u):(u=va(e)?Ig:ws.current,o.context=U_(t,u)),o.state=t.memoizedState,u=e.getDerivedStateFromProps,typeof u=="function"&&(bH(t,e,u,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&oL.enqueueReplaceState(o,o.state,null),x3(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function eC(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ft(309));var r=n.stateNode}if(!r)throw Error(Ft(147,t));var o=r,u=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===u?e.ref:(e=function(h){var m=o.refs;m===Mbe&&(m=o.refs={}),h===null?delete m[u]:m[u]=h},e._stringRef=u,e)}if(typeof t!="string")throw Error(Ft(284));if(!n._owner)throw Error(Ft(290,t))}return t}function lD(t,e){throw t=Object.prototype.toString.call(e),Error(Ft(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cme(t){var e=t._init;return e(t._payload)}function Ibe(t){function e(U,C){if(t){var K=U.deletions;K===null?(U.deletions=[C],U.flags|=16):K.push(C)}}function n(U,C){if(!t)return null;for(;C!==null;)e(U,C),C=C.sibling;return null}function r(U,C){for(U=new Map;C!==null;)C.key!==null?U.set(C.key,C):U.set(C.index,C),C=C.sibling;return U}function o(U,C){return U=Hf(U,C),U.index=0,U.sibling=null,U}function u(U,C,K){return U.index=K,t?(K=U.alternate,K!==null?(K=K.index,K<C?(U.flags|=2,C):K):(U.flags|=2,C)):(U.flags|=1048576,C)}function h(U){return t&&U.alternate===null&&(U.flags|=2),U}function m(U,C,K,te){return C===null||C.tag!==6?(C=R6(K,U.mode,te),C.return=U,C):(C=o(C,K),C.return=U,C)}function _(U,C,K,te){var pe=K.type;return pe===c_?T(U,C,K.props.children,te,K.key):C!==null&&(C.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Cf&&cme(pe)===C.type)?(te=o(C,K.props),te.ref=eC(U,C,K),te.return=U,te):(te=QD(K.type,K.key,K.props,null,U.mode,te),te.ref=eC(U,C,K),te.return=U,te)}function x(U,C,K,te){return C===null||C.tag!==4||C.stateNode.containerInfo!==K.containerInfo||C.stateNode.implementation!==K.implementation?(C=O6(K,U.mode,te),C.return=U,C):(C=o(C,K.children||[]),C.return=U,C)}function T(U,C,K,te,pe){return C===null||C.tag!==7?(C=Cg(K,U.mode,te,pe),C.return=U,C):(C=o(C,K),C.return=U,C)}function I(U,C,K){if(typeof C=="string"&&C!==""||typeof C=="number")return C=R6(""+C,U.mode,K),C.return=U,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ZO:return K=QD(C.type,C.key,C.props,null,U.mode,K),K.ref=eC(U,null,C),K.return=U,K;case u_:return C=O6(C,U.mode,K),C.return=U,C;case Cf:var te=C._init;return I(U,te(C._payload),K)}if(wC(C)||XE(C))return C=Cg(C,U.mode,K,null),C.return=U,C;lD(U,C)}return null}function N(U,C,K,te){var pe=C!==null?C.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return pe!==null?null:m(U,C,""+K,te);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case ZO:return K.key===pe?_(U,C,K,te):null;case u_:return K.key===pe?x(U,C,K,te):null;case Cf:return pe=K._init,N(U,C,pe(K._payload),te)}if(wC(K)||XE(K))return pe!==null?null:T(U,C,K,te,null);lD(U,K)}return null}function H(U,C,K,te,pe){if(typeof te=="string"&&te!==""||typeof te=="number")return U=U.get(K)||null,m(C,U,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case ZO:return U=U.get(te.key===null?K:te.key)||null,_(C,U,te,pe);case u_:return U=U.get(te.key===null?K:te.key)||null,x(C,U,te,pe);case Cf:var Q=te._init;return H(U,C,K,Q(te._payload),pe)}if(wC(te)||XE(te))return U=U.get(K)||null,T(C,U,te,pe,null);lD(C,te)}return null}function Z(U,C,K,te){for(var pe=null,Q=null,Se=C,Pe=C=0,G=null;Se!==null&&Pe<K.length;Pe++){Se.index>Pe?(G=Se,Se=null):G=Se.sibling;var ye=N(U,Se,K[Pe],te);if(ye===null){Se===null&&(Se=G);break}t&&Se&&ye.alternate===null&&e(U,Se),C=u(ye,C,Pe),Q===null?pe=ye:Q.sibling=ye,Q=ye,Se=G}if(Pe===K.length)return n(U,Se),bi&&pg(U,Pe),pe;if(Se===null){for(;Pe<K.length;Pe++)Se=I(U,K[Pe],te),Se!==null&&(C=u(Se,C,Pe),Q===null?pe=Se:Q.sibling=Se,Q=Se);return bi&&pg(U,Pe),pe}for(Se=r(U,Se);Pe<K.length;Pe++)G=H(Se,U,Pe,K[Pe],te),G!==null&&(t&&G.alternate!==null&&Se.delete(G.key===null?Pe:G.key),C=u(G,C,Pe),Q===null?pe=G:Q.sibling=G,Q=G);return t&&Se.forEach(function(St){return e(U,St)}),bi&&pg(U,Pe),pe}function j(U,C,K,te){var pe=XE(K);if(typeof pe!="function")throw Error(Ft(150));if(K=pe.call(K),K==null)throw Error(Ft(151));for(var Q=pe=null,Se=C,Pe=C=0,G=null,ye=K.next();Se!==null&&!ye.done;Pe++,ye=K.next()){Se.index>Pe?(G=Se,Se=null):G=Se.sibling;var St=N(U,Se,ye.value,te);if(St===null){Se===null&&(Se=G);break}t&&Se&&St.alternate===null&&e(U,Se),C=u(St,C,Pe),Q===null?pe=St:Q.sibling=St,Q=St,Se=G}if(ye.done)return n(U,Se),bi&&pg(U,Pe),pe;if(Se===null){for(;!ye.done;Pe++,ye=K.next())ye=I(U,ye.value,te),ye!==null&&(C=u(ye,C,Pe),Q===null?pe=ye:Q.sibling=ye,Q=ye);return bi&&pg(U,Pe),pe}for(Se=r(U,Se);!ye.done;Pe++,ye=K.next())ye=H(Se,U,Pe,ye.value,te),ye!==null&&(t&&ye.alternate!==null&&Se.delete(ye.key===null?Pe:ye.key),C=u(ye,C,Pe),Q===null?pe=ye:Q.sibling=ye,Q=ye);return t&&Se.forEach(function(kt){return e(U,kt)}),bi&&pg(U,Pe),pe}function z(U,C,K,te){if(typeof K=="object"&&K!==null&&K.type===c_&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case ZO:e:{for(var pe=K.key,Q=C;Q!==null;){if(Q.key===pe){if(pe=K.type,pe===c_){if(Q.tag===7){n(U,Q.sibling),C=o(Q,K.props.children),C.return=U,U=C;break e}}else if(Q.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Cf&&cme(pe)===Q.type){n(U,Q.sibling),C=o(Q,K.props),C.ref=eC(U,Q,K),C.return=U,U=C;break e}n(U,Q);break}else e(U,Q);Q=Q.sibling}K.type===c_?(C=Cg(K.props.children,U.mode,te,K.key),C.return=U,U=C):(te=QD(K.type,K.key,K.props,null,U.mode,te),te.ref=eC(U,C,K),te.return=U,U=te)}return h(U);case u_:e:{for(Q=K.key;C!==null;){if(C.key===Q)if(C.tag===4&&C.stateNode.containerInfo===K.containerInfo&&C.stateNode.implementation===K.implementation){n(U,C.sibling),C=o(C,K.children||[]),C.return=U,U=C;break e}else{n(U,C);break}else e(U,C);C=C.sibling}C=O6(K,U.mode,te),C.return=U,U=C}return h(U);case Cf:return Q=K._init,z(U,C,Q(K._payload),te)}if(wC(K))return Z(U,C,K,te);if(XE(K))return j(U,C,K,te);lD(U,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,C!==null&&C.tag===6?(n(U,C.sibling),C=o(C,K),C.return=U,U=C):(n(U,C),C=R6(K,U.mode,te),C.return=U,U=C),h(U)):n(U,C)}return z}var j_=Ibe(!0),Rbe=Ibe(!1),PP={},jc=sm(PP),JC=sm(PP),eP=sm(PP);function xg(t){if(t===PP)throw Error(Ft(174));return t}function Y9(t,e){switch(si(eP,e),si(JC,t),si(jc,PP),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Q8(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Q8(e,t)}gi(jc),si(jc,e)}function z_(){gi(jc),gi(JC),gi(eP)}function Obe(t){xg(eP.current);var e=xg(jc.current),n=Q8(e,t.type);e!==n&&(si(JC,t),si(jc,n))}function Z9(t){JC.current===t&&(gi(jc),gi(JC))}var Ii=sm(0);function S3(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var P6=[];function Q9(){for(var t=0;t<P6.length;t++)P6[t]._workInProgressVersionPrimary=null;P6.length=0}var KD=Rh.ReactCurrentDispatcher,k6=Rh.ReactCurrentBatchConfig,Og=0,Oi=null,mo=null,Mo=null,E3=!1,RC=!1,tP=0,v3e=0;function ps(){throw Error(Ft(321))}function J9(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vu(t[n],e[n]))return!1;return!0}function eG(t,e,n,r,o,u){if(Og=u,Oi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,KD.current=t===null||t.memoizedState===null?_3e:w3e,t=n(r,o),RC){u=0;do{if(RC=!1,tP=0,25<=u)throw Error(Ft(301));u+=1,Mo=mo=null,e.updateQueue=null,KD.current=x3e,t=n(r,o)}while(RC)}if(KD.current=C3,e=mo!==null&&mo.next!==null,Og=0,Mo=mo=Oi=null,E3=!1,e)throw Error(Ft(300));return t}function tG(){var t=tP!==0;return tP=0,t}function Lc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mo===null?Oi.memoizedState=Mo=t:Mo=Mo.next=t,Mo}function Vl(){if(mo===null){var t=Oi.alternate;t=t!==null?t.memoizedState:null}else t=mo.next;var e=Mo===null?Oi.memoizedState:Mo.next;if(e!==null)Mo=e,mo=t;else{if(t===null)throw Error(Ft(310));mo=t,t={memoizedState:mo.memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},Mo===null?Oi.memoizedState=Mo=t:Mo=Mo.next=t}return Mo}function nP(t,e){return typeof e=="function"?e(t):e}function T6(t){var e=Vl(),n=e.queue;if(n===null)throw Error(Ft(311));n.lastRenderedReducer=t;var r=mo,o=r.baseQueue,u=n.pending;if(u!==null){if(o!==null){var h=o.next;o.next=u.next,u.next=h}r.baseQueue=o=u,n.pending=null}if(o!==null){u=o.next,r=r.baseState;var m=h=null,_=null,x=u;do{var T=x.lane;if((Og&T)===T)_!==null&&(_=_.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),r=x.hasEagerState?x.eagerState:t(r,x.action);else{var I={lane:T,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};_===null?(m=_=I,h=r):_=_.next=I,Oi.lanes|=T,Dg|=T}x=x.next}while(x!==null&&x!==u);_===null?h=r:_.next=m,Vu(r,e.memoizedState)||(pa=!0),e.memoizedState=r,e.baseState=h,e.baseQueue=_,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do u=o.lane,Oi.lanes|=u,Dg|=u,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function M6(t){var e=Vl(),n=e.queue;if(n===null)throw Error(Ft(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,u=e.memoizedState;if(o!==null){n.pending=null;var h=o=o.next;do u=t(u,h.action),h=h.next;while(h!==o);Vu(u,e.memoizedState)||(pa=!0),e.memoizedState=u,e.baseQueue===null&&(e.baseState=u),n.lastRenderedState=u}return[u,r]}function Dbe(){}function Lbe(t,e){var n=Oi,r=Vl(),o=e(),u=!Vu(r.memoizedState,o);if(u&&(r.memoizedState=o,pa=!0),r=r.queue,nG(Bbe.bind(null,n,r,t),[t]),r.getSnapshot!==e||u||Mo!==null&&Mo.memoizedState.tag&1){if(n.flags|=2048,rP(9,Fbe.bind(null,n,r,o,e),void 0,null),Oo===null)throw Error(Ft(349));Og&30||Nbe(n,e,o)}return o}function Nbe(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oi.updateQueue,e===null?(e={lastEffect:null,stores:null},Oi.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Fbe(t,e,n,r){e.value=n,e.getSnapshot=r,Ube(e)&&Vbe(t)}function Bbe(t,e,n){return n(function(){Ube(e)&&Vbe(t)})}function Ube(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vu(t,n)}catch{return!0}}function Vbe(t){var e=kh(t,1);e!==null&&Uu(e,t,1,-1)}function dme(t){var e=Lc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nP,lastRenderedState:t},e.queue=t,t=t.dispatch=b3e.bind(null,Oi,t),[e.memoizedState,t]}function rP(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oi.updateQueue,e===null?(e={lastEffect:null,stores:null},Oi.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function jbe(){return Vl().memoizedState}function qD(t,e,n,r){var o=Lc();Oi.flags|=t,o.memoizedState=rP(1|e,n,void 0,r===void 0?null:r)}function sL(t,e,n,r){var o=Vl();r=r===void 0?null:r;var u=void 0;if(mo!==null){var h=mo.memoizedState;if(u=h.destroy,r!==null&&J9(r,h.deps)){o.memoizedState=rP(e,n,u,r);return}}Oi.flags|=t,o.memoizedState=rP(1|e,n,u,r)}function hme(t,e){return qD(8390656,8,t,e)}function nG(t,e){return sL(2048,8,t,e)}function zbe(t,e){return sL(4,2,t,e)}function Hbe(t,e){return sL(4,4,t,e)}function Gbe(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wbe(t,e,n){return n=n!=null?n.concat([t]):null,sL(4,4,Gbe.bind(null,e,t),n)}function rG(){}function $be(t,e){var n=Vl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&J9(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Kbe(t,e){var n=Vl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&J9(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qbe(t,e,n){return Og&21?(Vu(n,e)||(n=Zye(),Oi.lanes|=n,Dg|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,pa=!0),t.memoizedState=n)}function g3e(t,e){var n=Hr;Hr=n!==0&&4>n?n:4,t(!0);var r=k6.transition;k6.transition={};try{t(!1),e()}finally{Hr=n,k6.transition=r}}function Xbe(){return Vl().memoizedState}function y3e(t,e,n){var r=zf(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ybe(t))Zbe(e,n);else if(n=kbe(t,e,n,r),n!==null){var o=Gs();Uu(n,t,r,o),Qbe(n,e,r)}}function b3e(t,e,n){var r=zf(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ybe(t))Zbe(e,o);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=e.lastRenderedReducer,u!==null))try{var h=e.lastRenderedState,m=u(h,n);if(o.hasEagerState=!0,o.eagerState=m,Vu(m,h)){var _=e.interleaved;_===null?(o.next=o,q9(e)):(o.next=_.next,_.next=o),e.interleaved=o;return}}catch{}finally{}n=kbe(t,e,o,r),n!==null&&(o=Gs(),Uu(n,t,r,o),Qbe(n,e,r))}}function Ybe(t){var e=t.alternate;return t===Oi||e!==null&&e===Oi}function Zbe(t,e){RC=E3=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Qbe(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,D9(t,n)}}var C3={readContext:Ul,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},_3e={readContext:Ul,useCallback:function(t,e){return Lc().memoizedState=[t,e===void 0?null:e],t},useContext:Ul,useEffect:hme,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,qD(4194308,4,Gbe.bind(null,e,t),n)},useLayoutEffect:function(t,e){return qD(4194308,4,t,e)},useInsertionEffect:function(t,e){return qD(4,2,t,e)},useMemo:function(t,e){var n=Lc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=y3e.bind(null,Oi,t),[r.memoizedState,t]},useRef:function(t){var e=Lc();return t={current:t},e.memoizedState=t},useState:dme,useDebugValue:rG,useDeferredValue:function(t){return Lc().memoizedState=t},useTransition:function(){var t=dme(!1),e=t[0];return t=g3e.bind(null,t[1]),Lc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oi,o=Lc();if(bi){if(n===void 0)throw Error(Ft(407));n=n()}else{if(n=e(),Oo===null)throw Error(Ft(349));Og&30||Nbe(r,e,n)}o.memoizedState=n;var u={value:n,getSnapshot:e};return o.queue=u,hme(Bbe.bind(null,r,u,t),[t]),r.flags|=2048,rP(9,Fbe.bind(null,r,u,n,e),void 0,null),n},useId:function(){var t=Lc(),e=Oo.identifierPrefix;if(bi){var n=vh,r=mh;n=(r&~(1<<32-Bu(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=tP++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=v3e++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},w3e={readContext:Ul,useCallback:$be,useContext:Ul,useEffect:nG,useImperativeHandle:Wbe,useInsertionEffect:zbe,useLayoutEffect:Hbe,useMemo:Kbe,useReducer:T6,useRef:jbe,useState:function(){return T6(nP)},useDebugValue:rG,useDeferredValue:function(t){var e=Vl();return qbe(e,mo.memoizedState,t)},useTransition:function(){var t=T6(nP)[0],e=Vl().memoizedState;return[t,e]},useMutableSource:Dbe,useSyncExternalStore:Lbe,useId:Xbe,unstable_isNewReconciler:!1},x3e={readContext:Ul,useCallback:$be,useContext:Ul,useEffect:nG,useImperativeHandle:Wbe,useInsertionEffect:zbe,useLayoutEffect:Hbe,useMemo:Kbe,useReducer:M6,useRef:jbe,useState:function(){return M6(nP)},useDebugValue:rG,useDeferredValue:function(t){var e=Vl();return mo===null?e.memoizedState=t:qbe(e,mo.memoizedState,t)},useTransition:function(){var t=M6(nP)[0],e=Vl().memoizedState;return[t,e]},useMutableSource:Dbe,useSyncExternalStore:Lbe,useId:Xbe,unstable_isNewReconciler:!1};function H_(t,e){try{var n="",r=e;do n+=YOe(r),r=r.return;while(r);var o=n}catch(u){o=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:e,stack:o,digest:null}}function A6(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function wH(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var S3e=typeof WeakMap=="function"?WeakMap:Map;function Jbe(t,e,n){n=wh(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){k3||(k3=!0,IH=r),wH(t,e)},n}function e_e(t,e,n){n=wh(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){wH(t,e)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){wH(t,e),typeof r!="function"&&(jf===null?jf=new Set([this]):jf.add(this));var h=e.stack;this.componentDidCatch(e.value,{componentStack:h!==null?h:""})}),n}function pme(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new S3e;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=F3e.bind(null,t,e,n),e.then(t,t))}function fme(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mme(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wh(-1,1),e.tag=2,Vf(n,e,1))),n.lanes|=1),t)}var E3e=Rh.ReactCurrentOwner,pa=!1;function Vs(t,e,n,r){e.child=t===null?Rbe(e,null,n,r):j_(e,t.child,n,r)}function vme(t,e,n,r,o){n=n.render;var u=e.ref;return A_(e,o),r=eG(t,e,n,r,u,o),n=tG(),t!==null&&!pa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Th(t,e,o)):(bi&&n&&z9(e),e.flags|=1,Vs(t,e,r,o),e.child)}function gme(t,e,n,r,o){if(t===null){var u=n.type;return typeof u=="function"&&!dG(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=u,t_e(t,e,u,r,o)):(t=QD(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(u=t.child,!(t.lanes&o)){var h=u.memoizedProps;if(n=n.compare,n=n!==null?n:XC,n(h,r)&&t.ref===e.ref)return Th(t,e,o)}return e.flags|=1,t=Hf(u,r),t.ref=e.ref,t.return=e,e.child=t}function t_e(t,e,n,r,o){if(t!==null){var u=t.memoizedProps;if(XC(u,r)&&t.ref===e.ref)if(pa=!1,e.pendingProps=r=u,(t.lanes&o)!==0)t.flags&131072&&(pa=!0);else return e.lanes=t.lanes,Th(t,e,o)}return xH(t,e,n,r,o)}function n_e(t,e,n){var r=e.pendingProps,o=r.children,u=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},si(__,Na),Na|=n;else{if(!(n&1073741824))return t=u!==null?u.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,si(__,Na),Na|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=u!==null?u.baseLanes:n,si(__,Na),Na|=r}else u!==null?(r=u.baseLanes|n,e.memoizedState=null):r=n,si(__,Na),Na|=r;return Vs(t,e,o,n),e.child}function r_e(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xH(t,e,n,r,o){var u=va(n)?Ig:ws.current;return u=U_(e,u),A_(e,o),n=eG(t,e,n,r,u,o),r=tG(),t!==null&&!pa?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Th(t,e,o)):(bi&&r&&z9(e),e.flags|=1,Vs(t,e,n,o),e.child)}function yme(t,e,n,r,o){if(va(n)){var u=!0;g3(e)}else u=!1;if(A_(e,o),e.stateNode===null)XD(t,e),Abe(e,n,r),_H(e,n,r,o),r=!0;else if(t===null){var h=e.stateNode,m=e.memoizedProps;h.props=m;var _=h.context,x=n.contextType;typeof x=="object"&&x!==null?x=Ul(x):(x=va(n)?Ig:ws.current,x=U_(e,x));var T=n.getDerivedStateFromProps,I=typeof T=="function"||typeof h.getSnapshotBeforeUpdate=="function";I||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(m!==r||_!==x)&&ume(e,h,r,x),Pf=!1;var N=e.memoizedState;h.state=N,x3(e,r,h,o),_=e.memoizedState,m!==r||N!==_||ma.current||Pf?(typeof T=="function"&&(bH(e,n,T,r),_=e.memoizedState),(m=Pf||lme(e,n,m,r,N,_,x))?(I||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(e.flags|=4194308)):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=_),h.props=r,h.state=_,h.context=x,r=m):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{h=e.stateNode,Tbe(t,e),m=e.memoizedProps,x=e.type===e.elementType?m:Ru(e.type,m),h.props=x,I=e.pendingProps,N=h.context,_=n.contextType,typeof _=="object"&&_!==null?_=Ul(_):(_=va(n)?Ig:ws.current,_=U_(e,_));var H=n.getDerivedStateFromProps;(T=typeof H=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(m!==I||N!==_)&&ume(e,h,r,_),Pf=!1,N=e.memoizedState,h.state=N,x3(e,r,h,o);var Z=e.memoizedState;m!==I||N!==Z||ma.current||Pf?(typeof H=="function"&&(bH(e,n,H,r),Z=e.memoizedState),(x=Pf||lme(e,n,x,r,N,Z,_)||!1)?(T||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,Z,_),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,Z,_)),typeof h.componentDidUpdate=="function"&&(e.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof h.componentDidUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=Z),h.props=r,h.state=Z,h.context=_,r=x):(typeof h.componentDidUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(e.flags|=1024),r=!1)}return SH(t,e,n,r,u,o)}function SH(t,e,n,r,o,u){r_e(t,e);var h=(e.flags&128)!==0;if(!r&&!h)return o&&rme(e,n,!1),Th(t,e,u);r=e.stateNode,E3e.current=e;var m=h&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&h?(e.child=j_(e,t.child,null,u),e.child=j_(e,null,m,u)):Vs(t,e,m,u),e.memoizedState=r.state,o&&rme(e,n,!0),e.child}function i_e(t){var e=t.stateNode;e.pendingContext?nme(t,e.pendingContext,e.pendingContext!==e.context):e.context&&nme(t,e.context,!1),Y9(t,e.containerInfo)}function bme(t,e,n,r,o){return V_(),G9(o),e.flags|=256,Vs(t,e,n,r),e.child}var EH={dehydrated:null,treeContext:null,retryLane:0};function CH(t){return{baseLanes:t,cachePool:null,transitions:null}}function o_e(t,e,n){var r=e.pendingProps,o=Ii.current,u=!1,h=(e.flags&128)!==0,m;if((m=h)||(m=t!==null&&t.memoizedState===null?!1:(o&2)!==0),m?(u=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),si(Ii,o&1),t===null)return gH(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(h=r.children,t=r.fallback,u?(r=e.mode,u=e.child,h={mode:"hidden",children:h},!(r&1)&&u!==null?(u.childLanes=0,u.pendingProps=h):u=uL(h,r,0,null),t=Cg(t,r,n,null),u.return=e,t.return=e,u.sibling=t,e.child=u,e.child.memoizedState=CH(n),e.memoizedState=EH,t):iG(e,h));if(o=t.memoizedState,o!==null&&(m=o.dehydrated,m!==null))return C3e(t,e,h,r,m,o,n);if(u){u=r.fallback,h=e.mode,o=t.child,m=o.sibling;var _={mode:"hidden",children:r.children};return!(h&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=_,e.deletions=null):(r=Hf(o,_),r.subtreeFlags=o.subtreeFlags&14680064),m!==null?u=Hf(m,u):(u=Cg(u,h,n,null),u.flags|=2),u.return=e,r.return=e,r.sibling=u,e.child=r,r=u,u=e.child,h=t.child.memoizedState,h=h===null?CH(n):{baseLanes:h.baseLanes|n,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=t.childLanes&~n,e.memoizedState=EH,r}return u=t.child,t=u.sibling,r=Hf(u,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function iG(t,e){return e=uL({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function uD(t,e,n,r){return r!==null&&G9(r),j_(e,t.child,null,n),t=iG(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function C3e(t,e,n,r,o,u,h){if(n)return e.flags&256?(e.flags&=-257,r=A6(Error(Ft(422))),uD(t,e,h,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(u=r.fallback,o=e.mode,r=uL({mode:"visible",children:r.children},o,0,null),u=Cg(u,o,h,null),u.flags|=2,r.return=e,u.return=e,r.sibling=u,e.child=r,e.mode&1&&j_(e,t.child,null,h),e.child.memoizedState=CH(h),e.memoizedState=EH,u);if(!(e.mode&1))return uD(t,e,h,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var m=r.dgst;return r=m,u=Error(Ft(419)),r=A6(u,r,void 0),uD(t,e,h,r)}if(m=(h&t.childLanes)!==0,pa||m){if(r=Oo,r!==null){switch(h&-h){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|h)?0:o,o!==0&&o!==u.retryLane&&(u.retryLane=o,kh(t,o),Uu(r,t,o,-1))}return cG(),r=A6(Error(Ft(421))),uD(t,e,h,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=B3e.bind(null,t),o._reactRetry=e,null):(t=u.treeContext,Ba=Uf(o.nextSibling),Va=e,bi=!0,Du=null,t!==null&&(Il[Rl++]=mh,Il[Rl++]=vh,Il[Rl++]=Rg,mh=t.id,vh=t.overflow,Rg=e),e=iG(e,r.children),e.flags|=4096,e)}function _me(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),yH(t.return,e,n)}function I6(t,e,n,r,o){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(u.isBackwards=e,u.rendering=null,u.renderingStartTime=0,u.last=r,u.tail=n,u.tailMode=o)}function s_e(t,e,n){var r=e.pendingProps,o=r.revealOrder,u=r.tail;if(Vs(t,e,r.children,n),r=Ii.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_me(t,n,e);else if(t.tag===19)_me(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(si(Ii,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&S3(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),I6(e,!1,o,n,u);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&S3(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}I6(e,!0,n,null,u);break;case"together":I6(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function XD(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Th(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Dg|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ft(153));if(e.child!==null){for(t=e.child,n=Hf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function P3e(t,e,n){switch(e.tag){case 3:i_e(e),V_();break;case 5:Obe(e);break;case 1:va(e.type)&&g3(e);break;case 4:Y9(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;si(_3,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(si(Ii,Ii.current&1),e.flags|=128,null):n&e.child.childLanes?o_e(t,e,n):(si(Ii,Ii.current&1),t=Th(t,e,n),t!==null?t.sibling:null);si(Ii,Ii.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return s_e(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),si(Ii,Ii.current),r)break;return null;case 22:case 23:return e.lanes=0,n_e(t,e,n)}return Th(t,e,n)}var a_e,PH,l_e,u_e;a_e=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};PH=function(){};l_e=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,xg(jc.current);var u=null;switch(n){case"input":o=q8(t,o),r=q8(t,r),u=[];break;case"select":o=Di({},o,{value:void 0}),r=Di({},r,{value:void 0}),u=[];break;case"textarea":o=Z8(t,o),r=Z8(t,r),u=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=m3)}J8(n,r);var h;n=null;for(x in o)if(!r.hasOwnProperty(x)&&o.hasOwnProperty(x)&&o[x]!=null)if(x==="style"){var m=o[x];for(h in m)m.hasOwnProperty(h)&&(n||(n={}),n[h]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(zC.hasOwnProperty(x)?u||(u=[]):(u=u||[]).push(x,null));for(x in r){var _=r[x];if(m=o!=null?o[x]:void 0,r.hasOwnProperty(x)&&_!==m&&(_!=null||m!=null))if(x==="style")if(m){for(h in m)!m.hasOwnProperty(h)||_&&_.hasOwnProperty(h)||(n||(n={}),n[h]="");for(h in _)_.hasOwnProperty(h)&&m[h]!==_[h]&&(n||(n={}),n[h]=_[h])}else n||(u||(u=[]),u.push(x,n)),n=_;else x==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,m=m?m.__html:void 0,_!=null&&m!==_&&(u=u||[]).push(x,_)):x==="children"?typeof _!="string"&&typeof _!="number"||(u=u||[]).push(x,""+_):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(zC.hasOwnProperty(x)?(_!=null&&x==="onScroll"&&vi("scroll",t),u||m===_||(u=[])):(u=u||[]).push(x,_))}n&&(u=u||[]).push("style",n);var x=u;(e.updateQueue=x)&&(e.flags|=4)}};u_e=function(t,e,n,r){n!==r&&(e.flags|=4)};function tC(t,e){if(!bi)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function fs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function k3e(t,e,n){var r=e.pendingProps;switch(H9(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fs(e),null;case 1:return va(e.type)&&v3(),fs(e),null;case 3:return r=e.stateNode,z_(),gi(ma),gi(ws),Q9(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(aD(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Du!==null&&(DH(Du),Du=null))),PH(t,e),fs(e),null;case 5:Z9(e);var o=xg(eP.current);if(n=e.type,t!==null&&e.stateNode!=null)l_e(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ft(166));return fs(e),null}if(t=xg(jc.current),aD(e)){r=e.stateNode,n=e.type;var u=e.memoizedProps;switch(r[Bc]=e,r[QC]=u,t=(e.mode&1)!==0,n){case"dialog":vi("cancel",r),vi("close",r);break;case"iframe":case"object":case"embed":vi("load",r);break;case"video":case"audio":for(o=0;o<SC.length;o++)vi(SC[o],r);break;case"source":vi("error",r);break;case"img":case"image":case"link":vi("error",r),vi("load",r);break;case"details":vi("toggle",r);break;case"input":Mfe(r,u),vi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},vi("invalid",r);break;case"textarea":Ife(r,u),vi("invalid",r)}J8(n,u),o=null;for(var h in u)if(u.hasOwnProperty(h)){var m=u[h];h==="children"?typeof m=="string"?r.textContent!==m&&(u.suppressHydrationWarning!==!0&&sD(r.textContent,m,t),o=["children",m]):typeof m=="number"&&r.textContent!==""+m&&(u.suppressHydrationWarning!==!0&&sD(r.textContent,m,t),o=["children",""+m]):zC.hasOwnProperty(h)&&m!=null&&h==="onScroll"&&vi("scroll",r)}switch(n){case"input":QO(r),Afe(r,u,!0);break;case"textarea":QO(r),Rfe(r);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(r.onclick=m3)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{h=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Nye(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=h.createElement(n,{is:r.is}):(t=h.createElement(n),n==="select"&&(h=t,r.multiple?h.multiple=!0:r.size&&(h.size=r.size))):t=h.createElementNS(t,n),t[Bc]=e,t[QC]=r,a_e(t,e,!1,!1),e.stateNode=t;e:{switch(h=eH(n,r),n){case"dialog":vi("cancel",t),vi("close",t),o=r;break;case"iframe":case"object":case"embed":vi("load",t),o=r;break;case"video":case"audio":for(o=0;o<SC.length;o++)vi(SC[o],t);o=r;break;case"source":vi("error",t),o=r;break;case"img":case"image":case"link":vi("error",t),vi("load",t),o=r;break;case"details":vi("toggle",t),o=r;break;case"input":Mfe(t,r),o=q8(t,r),vi("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=Di({},r,{value:void 0}),vi("invalid",t);break;case"textarea":Ife(t,r),o=Z8(t,r),vi("invalid",t);break;default:o=r}J8(n,o),m=o;for(u in m)if(m.hasOwnProperty(u)){var _=m[u];u==="style"?Uye(t,_):u==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&Fye(t,_)):u==="children"?typeof _=="string"?(n!=="textarea"||_!=="")&&HC(t,_):typeof _=="number"&&HC(t,""+_):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zC.hasOwnProperty(u)?_!=null&&u==="onScroll"&&vi("scroll",t):_!=null&&T9(t,u,_,h))}switch(n){case"input":QO(t),Afe(t,r,!1);break;case"textarea":QO(t),Rfe(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zf(r.value));break;case"select":t.multiple=!!r.multiple,u=r.value,u!=null?P_(t,!!r.multiple,u,!1):r.defaultValue!=null&&P_(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=m3)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fs(e),null;case 6:if(t&&e.stateNode!=null)u_e(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ft(166));if(n=xg(eP.current),xg(jc.current),aD(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bc]=e,(u=r.nodeValue!==n)&&(t=Va,t!==null))switch(t.tag){case 3:sD(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&sD(r.nodeValue,n,(t.mode&1)!==0)}u&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bc]=e,e.stateNode=r}return fs(e),null;case 13:if(gi(Ii),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bi&&Ba!==null&&e.mode&1&&!(e.flags&128))Pbe(),V_(),e.flags|=98560,u=!1;else if(u=aD(e),r!==null&&r.dehydrated!==null){if(t===null){if(!u)throw Error(Ft(318));if(u=e.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(Ft(317));u[Bc]=e}else V_(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fs(e),u=!1}else Du!==null&&(DH(Du),Du=null),u=!0;if(!u)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ii.current&1?vo===0&&(vo=3):cG())),e.updateQueue!==null&&(e.flags|=4),fs(e),null);case 4:return z_(),PH(t,e),t===null&&YC(e.stateNode.containerInfo),fs(e),null;case 10:return K9(e.type._context),fs(e),null;case 17:return va(e.type)&&v3(),fs(e),null;case 19:if(gi(Ii),u=e.memoizedState,u===null)return fs(e),null;if(r=(e.flags&128)!==0,h=u.rendering,h===null)if(r)tC(u,!1);else{if(vo!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(h=S3(t),h!==null){for(e.flags|=128,tC(u,!1),r=h.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)u=n,t=r,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=t,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,t=h.dependencies,u.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return si(Ii,Ii.current&1|2),e.child}t=t.sibling}u.tail!==null&&Qi()>G_&&(e.flags|=128,r=!0,tC(u,!1),e.lanes=4194304)}else{if(!r)if(t=S3(h),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),tC(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!bi)return fs(e),null}else 2*Qi()-u.renderingStartTime>G_&&n!==1073741824&&(e.flags|=128,r=!0,tC(u,!1),e.lanes=4194304);u.isBackwards?(h.sibling=e.child,e.child=h):(n=u.last,n!==null?n.sibling=h:e.child=h,u.last=h)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=Qi(),e.sibling=null,n=Ii.current,si(Ii,r?n&1|2:n&1),e):(fs(e),null);case 22:case 23:return uG(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Na&1073741824&&(fs(e),e.subtreeFlags&6&&(e.flags|=8192)):fs(e),null;case 24:return null;case 25:return null}throw Error(Ft(156,e.tag))}function T3e(t,e){switch(H9(e),e.tag){case 1:return va(e.type)&&v3(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return z_(),gi(ma),gi(ws),Q9(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Z9(e),null;case 13:if(gi(Ii),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ft(340));V_()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gi(Ii),null;case 4:return z_(),null;case 10:return K9(e.type._context),null;case 22:case 23:return uG(),null;case 24:return null;default:return null}}var cD=!1,ys=!1,M3e=typeof WeakSet=="function"?WeakSet:Set,ln=null;function b_(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ui(t,e,r)}else n.current=null}function kH(t,e,n){try{n()}catch(r){Ui(t,e,r)}}var wme=!1;function A3e(t,e){if(cH=h3,t=pbe(),j9(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var h=0,m=-1,_=-1,x=0,T=0,I=t,N=null;t:for(;;){for(var H;I!==n||o!==0&&I.nodeType!==3||(m=h+o),I!==u||r!==0&&I.nodeType!==3||(_=h+r),I.nodeType===3&&(h+=I.nodeValue.length),(H=I.firstChild)!==null;)N=I,I=H;for(;;){if(I===t)break t;if(N===n&&++x===o&&(m=h),N===u&&++T===r&&(_=h),(H=I.nextSibling)!==null)break;I=N,N=I.parentNode}I=H}n=m===-1||_===-1?null:{start:m,end:_}}else n=null}n=n||{start:0,end:0}}else n=null;for(dH={focusedElem:t,selectionRange:n},h3=!1,ln=e;ln!==null;)if(e=ln,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ln=t;else for(;ln!==null;){e=ln;try{var Z=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(Z!==null){var j=Z.memoizedProps,z=Z.memoizedState,U=e.stateNode,C=U.getSnapshotBeforeUpdate(e.elementType===e.type?j:Ru(e.type,j),z);U.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var K=e.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ft(163))}}catch(te){Ui(e,e.return,te)}if(t=e.sibling,t!==null){t.return=e.return,ln=t;break}ln=e.return}return Z=wme,wme=!1,Z}function OC(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.destroy;o.destroy=void 0,u!==void 0&&kH(e,n,u)}o=o.next}while(o!==r)}}function aL(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function TH(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function c_e(t){var e=t.alternate;e!==null&&(t.alternate=null,c_e(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bc],delete e[QC],delete e[fH],delete e[h3e],delete e[p3e])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function d_e(t){return t.tag===5||t.tag===3||t.tag===4}function xme(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d_e(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function MH(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=m3));else if(r!==4&&(t=t.child,t!==null))for(MH(t,e,n),t=t.sibling;t!==null;)MH(t,e,n),t=t.sibling}function AH(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(AH(t,e,n),t=t.sibling;t!==null;)AH(t,e,n),t=t.sibling}var Yo=null,Ou=!1;function hf(t,e,n){for(n=n.child;n!==null;)h_e(t,e,n),n=n.sibling}function h_e(t,e,n){if(Vc&&typeof Vc.onCommitFiberUnmount=="function")try{Vc.onCommitFiberUnmount(J3,n)}catch{}switch(n.tag){case 5:ys||b_(n,e);case 6:var r=Yo,o=Ou;Yo=null,hf(t,e,n),Yo=r,Ou=o,Yo!==null&&(Ou?(t=Yo,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Yo.removeChild(n.stateNode));break;case 18:Yo!==null&&(Ou?(t=Yo,n=n.stateNode,t.nodeType===8?E6(t.parentNode,n):t.nodeType===1&&E6(t,n),KC(t)):E6(Yo,n.stateNode));break;case 4:r=Yo,o=Ou,Yo=n.stateNode.containerInfo,Ou=!0,hf(t,e,n),Yo=r,Ou=o;break;case 0:case 11:case 14:case 15:if(!ys&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var u=o,h=u.destroy;u=u.tag,h!==void 0&&(u&2||u&4)&&kH(n,e,h),o=o.next}while(o!==r)}hf(t,e,n);break;case 1:if(!ys&&(b_(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(m){Ui(n,e,m)}hf(t,e,n);break;case 21:hf(t,e,n);break;case 22:n.mode&1?(ys=(r=ys)||n.memoizedState!==null,hf(t,e,n),ys=r):hf(t,e,n);break;default:hf(t,e,n)}}function Sme(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new M3e),e.forEach(function(r){var o=U3e.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function ku(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var u=t,h=e,m=h;e:for(;m!==null;){switch(m.tag){case 5:Yo=m.stateNode,Ou=!1;break e;case 3:Yo=m.stateNode.containerInfo,Ou=!0;break e;case 4:Yo=m.stateNode.containerInfo,Ou=!0;break e}m=m.return}if(Yo===null)throw Error(Ft(160));h_e(u,h,o),Yo=null,Ou=!1;var _=o.alternate;_!==null&&(_.return=null),o.return=null}catch(x){Ui(o,e,x)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)p_e(e,t),e=e.sibling}function p_e(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ku(e,t),Dc(t),r&4){try{OC(3,t,t.return),aL(3,t)}catch(j){Ui(t,t.return,j)}try{OC(5,t,t.return)}catch(j){Ui(t,t.return,j)}}break;case 1:ku(e,t),Dc(t),r&512&&n!==null&&b_(n,n.return);break;case 5:if(ku(e,t),Dc(t),r&512&&n!==null&&b_(n,n.return),t.flags&32){var o=t.stateNode;try{HC(o,"")}catch(j){Ui(t,t.return,j)}}if(r&4&&(o=t.stateNode,o!=null)){var u=t.memoizedProps,h=n!==null?n.memoizedProps:u,m=t.type,_=t.updateQueue;if(t.updateQueue=null,_!==null)try{m==="input"&&u.type==="radio"&&u.name!=null&&Dye(o,u),eH(m,h);var x=eH(m,u);for(h=0;h<_.length;h+=2){var T=_[h],I=_[h+1];T==="style"?Uye(o,I):T==="dangerouslySetInnerHTML"?Fye(o,I):T==="children"?HC(o,I):T9(o,T,I,x)}switch(m){case"input":X8(o,u);break;case"textarea":Lye(o,u);break;case"select":var N=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!u.multiple;var H=u.value;H!=null?P_(o,!!u.multiple,H,!1):N!==!!u.multiple&&(u.defaultValue!=null?P_(o,!!u.multiple,u.defaultValue,!0):P_(o,!!u.multiple,u.multiple?[]:"",!1))}o[QC]=u}catch(j){Ui(t,t.return,j)}}break;case 6:if(ku(e,t),Dc(t),r&4){if(t.stateNode===null)throw Error(Ft(162));o=t.stateNode,u=t.memoizedProps;try{o.nodeValue=u}catch(j){Ui(t,t.return,j)}}break;case 3:if(ku(e,t),Dc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{KC(e.containerInfo)}catch(j){Ui(t,t.return,j)}break;case 4:ku(e,t),Dc(t);break;case 13:ku(e,t),Dc(t),o=t.child,o.flags&8192&&(u=o.memoizedState!==null,o.stateNode.isHidden=u,!u||o.alternate!==null&&o.alternate.memoizedState!==null||(aG=Qi())),r&4&&Sme(t);break;case 22:if(T=n!==null&&n.memoizedState!==null,t.mode&1?(ys=(x=ys)||T,ku(e,t),ys=x):ku(e,t),Dc(t),r&8192){if(x=t.memoizedState!==null,(t.stateNode.isHidden=x)&&!T&&t.mode&1)for(ln=t,T=t.child;T!==null;){for(I=ln=T;ln!==null;){switch(N=ln,H=N.child,N.tag){case 0:case 11:case 14:case 15:OC(4,N,N.return);break;case 1:b_(N,N.return);var Z=N.stateNode;if(typeof Z.componentWillUnmount=="function"){r=N,n=N.return;try{e=r,Z.props=e.memoizedProps,Z.state=e.memoizedState,Z.componentWillUnmount()}catch(j){Ui(r,n,j)}}break;case 5:b_(N,N.return);break;case 22:if(N.memoizedState!==null){Cme(I);continue}}H!==null?(H.return=N,ln=H):Cme(I)}T=T.sibling}e:for(T=null,I=t;;){if(I.tag===5){if(T===null){T=I;try{o=I.stateNode,x?(u=o.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(m=I.stateNode,_=I.memoizedProps.style,h=_!=null&&_.hasOwnProperty("display")?_.display:null,m.style.display=Bye("display",h))}catch(j){Ui(t,t.return,j)}}}else if(I.tag===6){if(T===null)try{I.stateNode.nodeValue=x?"":I.memoizedProps}catch(j){Ui(t,t.return,j)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===t)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===t)break e;for(;I.sibling===null;){if(I.return===null||I.return===t)break e;T===I&&(T=null),I=I.return}T===I&&(T=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:ku(e,t),Dc(t),r&4&&Sme(t);break;case 21:break;default:ku(e,t),Dc(t)}}function Dc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(d_e(n)){var r=n;break e}n=n.return}throw Error(Ft(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(HC(o,""),r.flags&=-33);var u=xme(t);AH(t,u,o);break;case 3:case 4:var h=r.stateNode.containerInfo,m=xme(t);MH(t,m,h);break;default:throw Error(Ft(161))}}catch(_){Ui(t,t.return,_)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function I3e(t,e,n){ln=t,f_e(t)}function f_e(t,e,n){for(var r=(t.mode&1)!==0;ln!==null;){var o=ln,u=o.child;if(o.tag===22&&r){var h=o.memoizedState!==null||cD;if(!h){var m=o.alternate,_=m!==null&&m.memoizedState!==null||ys;m=cD;var x=ys;if(cD=h,(ys=_)&&!x)for(ln=o;ln!==null;)h=ln,_=h.child,h.tag===22&&h.memoizedState!==null?Pme(o):_!==null?(_.return=h,ln=_):Pme(o);for(;u!==null;)ln=u,f_e(u),u=u.sibling;ln=o,cD=m,ys=x}Eme(t)}else o.subtreeFlags&8772&&u!==null?(u.return=o,ln=u):Eme(t)}}function Eme(t){for(;ln!==null;){var e=ln;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ys||aL(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ys)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Ru(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var u=e.updateQueue;u!==null&&ame(e,u,r);break;case 3:var h=e.updateQueue;if(h!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ame(e,h,n)}break;case 5:var m=e.stateNode;if(n===null&&e.flags&4){n=m;var _=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&n.focus();break;case"img":_.src&&(n.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var x=e.alternate;if(x!==null){var T=x.memoizedState;if(T!==null){var I=T.dehydrated;I!==null&&KC(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ft(163))}ys||e.flags&512&&TH(e)}catch(N){Ui(e,e.return,N)}}if(e===t){ln=null;break}if(n=e.sibling,n!==null){n.return=e.return,ln=n;break}ln=e.return}}function Cme(t){for(;ln!==null;){var e=ln;if(e===t){ln=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ln=n;break}ln=e.return}}function Pme(t){for(;ln!==null;){var e=ln;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{aL(4,e)}catch(_){Ui(e,n,_)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(_){Ui(e,o,_)}}var u=e.return;try{TH(e)}catch(_){Ui(e,u,_)}break;case 5:var h=e.return;try{TH(e)}catch(_){Ui(e,h,_)}}}catch(_){Ui(e,e.return,_)}if(e===t){ln=null;break}var m=e.sibling;if(m!==null){m.return=e.return,ln=m;break}ln=e.return}}var R3e=Math.ceil,P3=Rh.ReactCurrentDispatcher,oG=Rh.ReactCurrentOwner,Fl=Rh.ReactCurrentBatchConfig,br=0,Oo=null,lo=null,Zo=0,Na=0,__=sm(0),vo=0,iP=null,Dg=0,lL=0,sG=0,DC=null,ha=null,aG=0,G_=1/0,hh=null,k3=!1,IH=null,jf=null,dD=!1,If=null,T3=0,LC=0,RH=null,YD=-1,ZD=0;function Gs(){return br&6?Qi():YD!==-1?YD:YD=Qi()}function zf(t){return t.mode&1?br&2&&Zo!==0?Zo&-Zo:m3e.transition!==null?(ZD===0&&(ZD=Zye()),ZD):(t=Hr,t!==0||(t=window.event,t=t===void 0?16:ibe(t.type)),t):1}function Uu(t,e,n,r){if(50<LC)throw LC=0,RH=null,Error(Ft(185));SP(t,n,r),(!(br&2)||t!==Oo)&&(t===Oo&&(!(br&2)&&(lL|=n),vo===4&&Mf(t,Zo)),ga(t,r),n===1&&br===0&&!(e.mode&1)&&(G_=Qi()+500,iL&&am()))}function ga(t,e){var n=t.callbackNode;mDe(t,e);var r=d3(t,t===Oo?Zo:0);if(r===0)n!==null&&Lfe(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Lfe(n),e===1)t.tag===0?f3e(kme.bind(null,t)):Sbe(kme.bind(null,t)),c3e(function(){!(br&6)&&am()}),n=null;else{switch(Qye(r)){case 1:n=O9;break;case 4:n=Xye;break;case 16:n=c3;break;case 536870912:n=Yye;break;default:n=c3}n=x_e(n,m_e.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function m_e(t,e){if(YD=-1,ZD=0,br&6)throw Error(Ft(327));var n=t.callbackNode;if(I_()&&t.callbackNode!==n)return null;var r=d3(t,t===Oo?Zo:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=M3(t,r);else{e=r;var o=br;br|=2;var u=g_e();(Oo!==t||Zo!==e)&&(hh=null,G_=Qi()+500,Eg(t,e));do try{L3e();break}catch(m){v_e(t,m)}while(1);$9(),P3.current=u,br=o,lo!==null?e=0:(Oo=null,Zo=0,e=vo)}if(e!==0){if(e===2&&(o=oH(t),o!==0&&(r=o,e=OH(t,o))),e===1)throw n=iP,Eg(t,0),Mf(t,r),ga(t,Qi()),n;if(e===6)Mf(t,r);else{if(o=t.current.alternate,!(r&30)&&!O3e(o)&&(e=M3(t,r),e===2&&(u=oH(t),u!==0&&(r=u,e=OH(t,u))),e===1))throw n=iP,Eg(t,0),Mf(t,r),ga(t,Qi()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(Ft(345));case 2:fg(t,ha,hh);break;case 3:if(Mf(t,r),(r&130023424)===r&&(e=aG+500-Qi(),10<e)){if(d3(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Gs(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=pH(fg.bind(null,t,ha,hh),e);break}fg(t,ha,hh);break;case 4:if(Mf(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var h=31-Bu(r);u=1<<h,h=e[h],h>o&&(o=h),r&=~u}if(r=o,r=Qi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*R3e(r/1960))-r,10<r){t.timeoutHandle=pH(fg.bind(null,t,ha,hh),r);break}fg(t,ha,hh);break;case 5:fg(t,ha,hh);break;default:throw Error(Ft(329))}}}return ga(t,Qi()),t.callbackNode===n?m_e.bind(null,t):null}function OH(t,e){var n=DC;return t.current.memoizedState.isDehydrated&&(Eg(t,e).flags|=256),t=M3(t,e),t!==2&&(e=ha,ha=n,e!==null&&DH(e)),t}function DH(t){ha===null?ha=t:ha.push.apply(ha,t)}function O3e(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],u=o.getSnapshot;o=o.value;try{if(!Vu(u(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mf(t,e){for(e&=~sG,e&=~lL,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bu(e),r=1<<n;t[n]=-1,e&=~r}}function kme(t){if(br&6)throw Error(Ft(327));I_();var e=d3(t,0);if(!(e&1))return ga(t,Qi()),null;var n=M3(t,e);if(t.tag!==0&&n===2){var r=oH(t);r!==0&&(e=r,n=OH(t,r))}if(n===1)throw n=iP,Eg(t,0),Mf(t,e),ga(t,Qi()),n;if(n===6)throw Error(Ft(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fg(t,ha,hh),ga(t,Qi()),null}function lG(t,e){var n=br;br|=1;try{return t(e)}finally{br=n,br===0&&(G_=Qi()+500,iL&&am())}}function Lg(t){If!==null&&If.tag===0&&!(br&6)&&I_();var e=br;br|=1;var n=Fl.transition,r=Hr;try{if(Fl.transition=null,Hr=1,t)return t()}finally{Hr=r,Fl.transition=n,br=e,!(br&6)&&am()}}function uG(){Na=__.current,gi(__)}function Eg(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,u3e(n)),lo!==null)for(n=lo.return;n!==null;){var r=n;switch(H9(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&v3();break;case 3:z_(),gi(ma),gi(ws),Q9();break;case 5:Z9(r);break;case 4:z_();break;case 13:gi(Ii);break;case 19:gi(Ii);break;case 10:K9(r.type._context);break;case 22:case 23:uG()}n=n.return}if(Oo=t,lo=t=Hf(t.current,null),Zo=Na=e,vo=0,iP=null,sG=lL=Dg=0,ha=DC=null,wg!==null){for(e=0;e<wg.length;e++)if(n=wg[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,u=n.pending;if(u!==null){var h=u.next;u.next=o,r.next=h}n.pending=r}wg=null}return t}function v_e(t,e){do{var n=lo;try{if($9(),KD.current=C3,E3){for(var r=Oi.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}E3=!1}if(Og=0,Mo=mo=Oi=null,RC=!1,tP=0,oG.current=null,n===null||n.return===null){vo=1,iP=e,lo=null;break}e:{var u=t,h=n.return,m=n,_=e;if(e=Zo,m.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var x=_,T=m,I=T.tag;if(!(T.mode&1)&&(I===0||I===11||I===15)){var N=T.alternate;N?(T.updateQueue=N.updateQueue,T.memoizedState=N.memoizedState,T.lanes=N.lanes):(T.updateQueue=null,T.memoizedState=null)}var H=fme(h);if(H!==null){H.flags&=-257,mme(H,h,m,u,e),H.mode&1&&pme(u,x,e),e=H,_=x;var Z=e.updateQueue;if(Z===null){var j=new Set;j.add(_),e.updateQueue=j}else Z.add(_);break e}else{if(!(e&1)){pme(u,x,e),cG();break e}_=Error(Ft(426))}}else if(bi&&m.mode&1){var z=fme(h);if(z!==null){!(z.flags&65536)&&(z.flags|=256),mme(z,h,m,u,e),G9(H_(_,m));break e}}u=_=H_(_,m),vo!==4&&(vo=2),DC===null?DC=[u]:DC.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,e&=-e,u.lanes|=e;var U=Jbe(u,_,e);sme(u,U);break e;case 1:m=_;var C=u.type,K=u.stateNode;if(!(u.flags&128)&&(typeof C.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(jf===null||!jf.has(K)))){u.flags|=65536,e&=-e,u.lanes|=e;var te=e_e(u,m,e);sme(u,te);break e}}u=u.return}while(u!==null)}b_e(n)}catch(pe){e=pe,lo===n&&n!==null&&(lo=n=n.return);continue}break}while(1)}function g_e(){var t=P3.current;return P3.current=C3,t===null?C3:t}function cG(){(vo===0||vo===3||vo===2)&&(vo=4),Oo===null||!(Dg&268435455)&&!(lL&268435455)||Mf(Oo,Zo)}function M3(t,e){var n=br;br|=2;var r=g_e();(Oo!==t||Zo!==e)&&(hh=null,Eg(t,e));do try{D3e();break}catch(o){v_e(t,o)}while(1);if($9(),br=n,P3.current=r,lo!==null)throw Error(Ft(261));return Oo=null,Zo=0,vo}function D3e(){for(;lo!==null;)y_e(lo)}function L3e(){for(;lo!==null&&!sDe();)y_e(lo)}function y_e(t){var e=w_e(t.alternate,t,Na);t.memoizedProps=t.pendingProps,e===null?b_e(t):lo=e,oG.current=null}function b_e(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=T3e(n,e),n!==null){n.flags&=32767,lo=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vo=6,lo=null;return}}else if(n=k3e(n,e,Na),n!==null){lo=n;return}if(e=e.sibling,e!==null){lo=e;return}lo=e=t}while(e!==null);vo===0&&(vo=5)}function fg(t,e,n){var r=Hr,o=Fl.transition;try{Fl.transition=null,Hr=1,N3e(t,e,n,r)}finally{Fl.transition=o,Hr=r}return null}function N3e(t,e,n,r){do I_();while(If!==null);if(br&6)throw Error(Ft(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ft(177));t.callbackNode=null,t.callbackPriority=0;var u=n.lanes|n.childLanes;if(vDe(t,u),t===Oo&&(lo=Oo=null,Zo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dD||(dD=!0,x_e(c3,function(){return I_(),null})),u=(n.flags&15990)!==0,n.subtreeFlags&15990||u){u=Fl.transition,Fl.transition=null;var h=Hr;Hr=1;var m=br;br|=4,oG.current=null,A3e(t,n),p_e(n,t),n3e(dH),h3=!!cH,dH=cH=null,t.current=n,I3e(n),aDe(),br=m,Hr=h,Fl.transition=u}else t.current=n;if(dD&&(dD=!1,If=t,T3=o),u=t.pendingLanes,u===0&&(jf=null),cDe(n.stateNode),ga(t,Qi()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(k3)throw k3=!1,t=IH,IH=null,t;return T3&1&&t.tag!==0&&I_(),u=t.pendingLanes,u&1?t===RH?LC++:(LC=0,RH=t):LC=0,am(),null}function I_(){if(If!==null){var t=Qye(T3),e=Fl.transition,n=Hr;try{if(Fl.transition=null,Hr=16>t?16:t,If===null)var r=!1;else{if(t=If,If=null,T3=0,br&6)throw Error(Ft(331));var o=br;for(br|=4,ln=t.current;ln!==null;){var u=ln,h=u.child;if(ln.flags&16){var m=u.deletions;if(m!==null){for(var _=0;_<m.length;_++){var x=m[_];for(ln=x;ln!==null;){var T=ln;switch(T.tag){case 0:case 11:case 15:OC(8,T,u)}var I=T.child;if(I!==null)I.return=T,ln=I;else for(;ln!==null;){T=ln;var N=T.sibling,H=T.return;if(c_e(T),T===x){ln=null;break}if(N!==null){N.return=H,ln=N;break}ln=H}}}var Z=u.alternate;if(Z!==null){var j=Z.child;if(j!==null){Z.child=null;do{var z=j.sibling;j.sibling=null,j=z}while(j!==null)}}ln=u}}if(u.subtreeFlags&2064&&h!==null)h.return=u,ln=h;else e:for(;ln!==null;){if(u=ln,u.flags&2048)switch(u.tag){case 0:case 11:case 15:OC(9,u,u.return)}var U=u.sibling;if(U!==null){U.return=u.return,ln=U;break e}ln=u.return}}var C=t.current;for(ln=C;ln!==null;){h=ln;var K=h.child;if(h.subtreeFlags&2064&&K!==null)K.return=h,ln=K;else e:for(h=C;ln!==null;){if(m=ln,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:aL(9,m)}}catch(pe){Ui(m,m.return,pe)}if(m===h){ln=null;break e}var te=m.sibling;if(te!==null){te.return=m.return,ln=te;break e}ln=m.return}}if(br=o,am(),Vc&&typeof Vc.onPostCommitFiberRoot=="function")try{Vc.onPostCommitFiberRoot(J3,t)}catch{}r=!0}return r}finally{Hr=n,Fl.transition=e}}return!1}function Tme(t,e,n){e=H_(n,e),e=Jbe(t,e,1),t=Vf(t,e,1),e=Gs(),t!==null&&(SP(t,1,e),ga(t,e))}function Ui(t,e,n){if(t.tag===3)Tme(t,t,n);else for(;e!==null;){if(e.tag===3){Tme(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jf===null||!jf.has(r))){t=H_(n,t),t=e_e(e,t,1),e=Vf(e,t,1),t=Gs(),e!==null&&(SP(e,1,t),ga(e,t));break}}e=e.return}}function F3e(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gs(),t.pingedLanes|=t.suspendedLanes&n,Oo===t&&(Zo&n)===n&&(vo===4||vo===3&&(Zo&130023424)===Zo&&500>Qi()-aG?Eg(t,0):sG|=n),ga(t,e)}function __e(t,e){e===0&&(t.mode&1?(e=tD,tD<<=1,!(tD&130023424)&&(tD=4194304)):e=1);var n=Gs();t=kh(t,e),t!==null&&(SP(t,e,n),ga(t,n))}function B3e(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),__e(t,n)}function U3e(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ft(314))}r!==null&&r.delete(e),__e(t,n)}var w_e;w_e=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ma.current)pa=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return pa=!1,P3e(t,e,n);pa=!!(t.flags&131072)}else pa=!1,bi&&e.flags&1048576&&Ebe(e,b3,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;XD(t,e),t=e.pendingProps;var o=U_(e,ws.current);A_(e,n),o=eG(null,e,r,t,o,n);var u=tG();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,va(r)?(u=!0,g3(e)):u=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,X9(e),o.updater=oL,e.stateNode=o,o._reactInternals=e,_H(e,r,t,n),e=SH(null,e,r,!0,u,n)):(e.tag=0,bi&&u&&z9(e),Vs(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(XD(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=j3e(r),t=Ru(r,t),o){case 0:e=xH(null,e,r,t,n);break e;case 1:e=yme(null,e,r,t,n);break e;case 11:e=vme(null,e,r,t,n);break e;case 14:e=gme(null,e,r,Ru(r.type,t),n);break e}throw Error(Ft(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ru(r,o),xH(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ru(r,o),yme(t,e,r,o,n);case 3:e:{if(i_e(e),t===null)throw Error(Ft(387));r=e.pendingProps,u=e.memoizedState,o=u.element,Tbe(t,e),x3(e,r,null,n);var h=e.memoizedState;if(r=h.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},e.updateQueue.baseState=u,e.memoizedState=u,e.flags&256){o=H_(Error(Ft(423)),e),e=bme(t,e,r,n,o);break e}else if(r!==o){o=H_(Error(Ft(424)),e),e=bme(t,e,r,n,o);break e}else for(Ba=Uf(e.stateNode.containerInfo.firstChild),Va=e,bi=!0,Du=null,n=Rbe(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(V_(),r===o){e=Th(t,e,n);break e}Vs(t,e,r,n)}e=e.child}return e;case 5:return Obe(e),t===null&&gH(e),r=e.type,o=e.pendingProps,u=t!==null?t.memoizedProps:null,h=o.children,hH(r,o)?h=null:u!==null&&hH(r,u)&&(e.flags|=32),r_e(t,e),Vs(t,e,h,n),e.child;case 6:return t===null&&gH(e),null;case 13:return o_e(t,e,n);case 4:return Y9(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=j_(e,null,r,n):Vs(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ru(r,o),vme(t,e,r,o,n);case 7:return Vs(t,e,e.pendingProps,n),e.child;case 8:return Vs(t,e,e.pendingProps.children,n),e.child;case 12:return Vs(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,u=e.memoizedProps,h=o.value,si(_3,r._currentValue),r._currentValue=h,u!==null)if(Vu(u.value,h)){if(u.children===o.children&&!ma.current){e=Th(t,e,n);break e}}else for(u=e.child,u!==null&&(u.return=e);u!==null;){var m=u.dependencies;if(m!==null){h=u.child;for(var _=m.firstContext;_!==null;){if(_.context===r){if(u.tag===1){_=wh(-1,n&-n),_.tag=2;var x=u.updateQueue;if(x!==null){x=x.shared;var T=x.pending;T===null?_.next=_:(_.next=T.next,T.next=_),x.pending=_}}u.lanes|=n,_=u.alternate,_!==null&&(_.lanes|=n),yH(u.return,n,e),m.lanes|=n;break}_=_.next}}else if(u.tag===10)h=u.type===e.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(Ft(341));h.lanes|=n,m=h.alternate,m!==null&&(m.lanes|=n),yH(h,n,e),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===e){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}Vs(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,A_(e,n),o=Ul(o),r=r(o),e.flags|=1,Vs(t,e,r,n),e.child;case 14:return r=e.type,o=Ru(r,e.pendingProps),o=Ru(r.type,o),gme(t,e,r,o,n);case 15:return t_e(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ru(r,o),XD(t,e),e.tag=1,va(r)?(t=!0,g3(e)):t=!1,A_(e,n),Abe(e,r,o),_H(e,r,o,n),SH(null,e,r,!0,t,n);case 19:return s_e(t,e,n);case 22:return n_e(t,e,n)}throw Error(Ft(156,e.tag))};function x_e(t,e){return qye(t,e)}function V3e(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dl(t,e,n,r){return new V3e(t,e,n,r)}function dG(t){return t=t.prototype,!(!t||!t.isReactComponent)}function j3e(t){if(typeof t=="function")return dG(t)?1:0;if(t!=null){if(t=t.$$typeof,t===A9)return 11;if(t===I9)return 14}return 2}function Hf(t,e){var n=t.alternate;return n===null?(n=Dl(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function QD(t,e,n,r,o,u){var h=2;if(r=t,typeof t=="function")dG(t)&&(h=1);else if(typeof t=="string")h=5;else e:switch(t){case c_:return Cg(n.children,o,u,e);case M9:h=8,o|=8;break;case G8:return t=Dl(12,n,e,o|2),t.elementType=G8,t.lanes=u,t;case W8:return t=Dl(13,n,e,o),t.elementType=W8,t.lanes=u,t;case $8:return t=Dl(19,n,e,o),t.elementType=$8,t.lanes=u,t;case Iye:return uL(n,o,u,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mye:h=10;break e;case Aye:h=9;break e;case A9:h=11;break e;case I9:h=14;break e;case Cf:h=16,r=null;break e}throw Error(Ft(130,t==null?t:typeof t,""))}return e=Dl(h,n,e,o),e.elementType=t,e.type=r,e.lanes=u,e}function Cg(t,e,n,r){return t=Dl(7,t,r,e),t.lanes=n,t}function uL(t,e,n,r){return t=Dl(22,t,r,e),t.elementType=Iye,t.lanes=n,t.stateNode={isHidden:!1},t}function R6(t,e,n){return t=Dl(6,t,null,e),t.lanes=n,t}function O6(t,e,n){return e=Dl(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function z3e(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=p6(0),this.expirationTimes=p6(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=p6(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function hG(t,e,n,r,o,u,h,m,_){return t=new z3e(t,e,n,m,_),e===1?(e=1,u===!0&&(e|=8)):e=0,u=Dl(3,null,null,e),t.current=u,u.stateNode=t,u.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},X9(u),t}function H3e(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u_,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function S_e(t){if(!t)return Qf;t=t._reactInternals;e:{if($g(t)!==t||t.tag!==1)throw Error(Ft(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(va(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ft(171))}if(t.tag===1){var n=t.type;if(va(n))return xbe(t,n,e)}return e}function E_e(t,e,n,r,o,u,h,m,_){return t=hG(n,r,!0,t,o,u,h,m,_),t.context=S_e(null),n=t.current,r=Gs(),o=zf(n),u=wh(r,o),u.callback=e??null,Vf(n,u,o),t.current.lanes=o,SP(t,o,r),ga(t,r),t}function cL(t,e,n,r){var o=e.current,u=Gs(),h=zf(o);return n=S_e(n),e.context===null?e.context=n:e.pendingContext=n,e=wh(u,h),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vf(o,e,h),t!==null&&(Uu(t,o,h,u),$D(t,o,h)),h}function A3(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Mme(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function pG(t,e){Mme(t,e),(t=t.alternate)&&Mme(t,e)}function G3e(){return null}var C_e=typeof reportError=="function"?reportError:function(t){console.error(t)};function fG(t){this._internalRoot=t}dL.prototype.render=fG.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ft(409));cL(t,e,null,null)};dL.prototype.unmount=fG.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Lg(function(){cL(null,t,null,null)}),e[Ph]=null}};function dL(t){this._internalRoot=t}dL.prototype.unstable_scheduleHydration=function(t){if(t){var e=tbe();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tf.length&&e!==0&&e<Tf[n].priority;n++);Tf.splice(n,0,t),n===0&&rbe(t)}};function mG(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ame(){}function W3e(t,e,n,r,o){if(o){if(typeof r=="function"){var u=r;r=function(){var x=A3(h);u.call(x)}}var h=E_e(e,r,t,0,null,!1,!1,"",Ame);return t._reactRootContainer=h,t[Ph]=h.current,YC(t.nodeType===8?t.parentNode:t),Lg(),h}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var m=r;r=function(){var x=A3(_);m.call(x)}}var _=hG(t,0,!1,null,null,!1,!1,"",Ame);return t._reactRootContainer=_,t[Ph]=_.current,YC(t.nodeType===8?t.parentNode:t),Lg(function(){cL(e,_,n,r)}),_}function pL(t,e,n,r,o){var u=n._reactRootContainer;if(u){var h=u;if(typeof o=="function"){var m=o;o=function(){var _=A3(h);m.call(_)}}cL(e,h,t,o)}else h=W3e(n,e,t,o,r);return A3(h)}Jye=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=xC(e.pendingLanes);n!==0&&(D9(e,n|1),ga(e,Qi()),!(br&6)&&(G_=Qi()+500,am()))}break;case 13:Lg(function(){var r=kh(t,1);if(r!==null){var o=Gs();Uu(r,t,1,o)}}),pG(t,1)}};L9=function(t){if(t.tag===13){var e=kh(t,134217728);if(e!==null){var n=Gs();Uu(e,t,134217728,n)}pG(t,134217728)}};ebe=function(t){if(t.tag===13){var e=zf(t),n=kh(t,e);if(n!==null){var r=Gs();Uu(n,t,e,r)}pG(t,e)}};tbe=function(){return Hr};nbe=function(t,e){var n=Hr;try{return Hr=t,e()}finally{Hr=n}};nH=function(t,e,n){switch(e){case"input":if(X8(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=rL(r);if(!o)throw Error(Ft(90));Oye(r),X8(r,o)}}}break;case"textarea":Lye(t,n);break;case"select":e=n.value,e!=null&&P_(t,!!n.multiple,e,!1)}};zye=lG;Hye=Lg;var $3e={usingClientEntryPoint:!1,Events:[CP,f_,rL,Vye,jye,lG]},nC={findFiberByHostInstance:_g,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},K3e={bundleType:nC.bundleType,version:nC.version,rendererPackageName:nC.rendererPackageName,rendererConfig:nC.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rh.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$ye(t),t===null?null:t.stateNode},findFiberByHostInstance:nC.findFiberByHostInstance||G3e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hD=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hD.isDisabled&&hD.supportsFiber)try{J3=hD.inject(K3e),Vc=hD}catch{}}Ga.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$3e;Ga.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mG(e))throw Error(Ft(200));return H3e(t,e,null,n)};Ga.createRoot=function(t,e){if(!mG(t))throw Error(Ft(299));var n=!1,r="",o=C_e;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=hG(t,1,!1,null,null,n,!1,r,o),t[Ph]=e.current,YC(t.nodeType===8?t.parentNode:t),new fG(e)};Ga.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ft(188)):(t=Object.keys(t).join(","),Error(Ft(268,t)));return t=$ye(e),t=t===null?null:t.stateNode,t};Ga.flushSync=function(t){return Lg(t)};Ga.hydrate=function(t,e,n){if(!hL(e))throw Error(Ft(200));return pL(null,t,e,!0,n)};Ga.hydrateRoot=function(t,e,n){if(!mG(t))throw Error(Ft(405));var r=n!=null&&n.hydratedSources||null,o=!1,u="",h=C_e;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),e=E_e(e,null,t,1,n??null,o,!1,u,h),t[Ph]=e.current,YC(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new dL(e)};Ga.render=function(t,e,n){if(!hL(e))throw Error(Ft(200));return pL(null,t,e,!1,n)};Ga.unmountComponentAtNode=function(t){if(!hL(t))throw Error(Ft(40));return t._reactRootContainer?(Lg(function(){pL(null,null,t,!1,function(){t._reactRootContainer=null,t[Ph]=null})}),!0):!1};Ga.unstable_batchedUpdates=lG;Ga.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!hL(n))throw Error(Ft(200));if(t==null||t._reactInternals===void 0)throw Error(Ft(38));return pL(t,e,n,!1,r)};Ga.version="18.2.0-next-9e3b772b8-20220608";function P_e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(P_e)}catch(t){console.error(t)}}P_e(),Eye.exports=Ga;var q3e=Eye.exports,Ime=q3e;z8.createRoot=Ime.createRoot,z8.hydrateRoot=Ime.hydrateRoot;function pD(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var I3={exports:{}},Mt={};(function(t){var e=Object.defineProperty,n=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(ee,ve,De)=>ve in ee?e(ee,ve,{enumerable:!0,configurable:!0,writable:!0,value:De}):ee[ve]=De,_=(ee,ve)=>{for(var De in ve||(ve={}))u.call(ve,De)&&m(ee,De,ve[De]);if(o)for(var De of o(ve))h.call(ve,De)&&m(ee,De,ve[De]);return ee},x=(ee,ve)=>n(ee,r(ve)),T=ee=>e(ee,"__esModule",{value:!0}),I=(ee,ve)=>{T(ee);for(var De in ve)e(ee,De,{get:ve[De],enumerable:!0})};I(t,{Atom:()=>Im,PointerProxy:()=>Rw,Ticker:()=>cd,getPointerParts:()=>sd,isPointer:()=>nl,isPrism:()=>ld,iterateAndCountTicks:()=>Iw,iterateOver:()=>Rm,pointer:()=>Gl,pointerToPrism:()=>Yu,prism:()=>Xu,val:()=>Kh});var N=Array.isArray,H=N,Z=typeof Ai=="object"&&Ai&&Ai.Object===Object&&Ai,j=Z,z=typeof self=="object"&&self&&self.Object===Object&&self,U=j||z||Function("return this")(),C=U,K=C.Symbol,te=K,pe=Object.prototype,Q=pe.hasOwnProperty,Se=pe.toString,Pe=te?te.toStringTag:void 0;function G(ee){var ve=Q.call(ee,Pe),De=ee[Pe];try{ee[Pe]=void 0;var ft=!0}catch{}var Rn=Se.call(ee);return ft&&(ve?ee[Pe]=De:delete ee[Pe]),Rn}var ye=G,St=Object.prototype,kt=St.toString;function it(ee){return kt.call(ee)}var me=it,lt="[object Null]",Fe="[object Undefined]",vt=te?te.toStringTag:void 0;function Ge(ee){return ee==null?ee===void 0?Fe:lt:vt&&vt in Object(ee)?ye(ee):me(ee)}var mt=Ge;function Je(ee){return ee!=null&&typeof ee=="object"}var Be=Je,nt="[object Symbol]";function Wt(ee){return typeof ee=="symbol"||Be(ee)&&mt(ee)==nt}var Ut=Wt,Dt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,en=/^\w*$/;function on(ee,ve){if(H(ee))return!1;var De=typeof ee;return De=="number"||De=="symbol"||De=="boolean"||ee==null||Ut(ee)?!0:en.test(ee)||!Dt.test(ee)||ve!=null&&ee in Object(ve)}var wn=on;function $n(ee){var ve=typeof ee;return ee!=null&&(ve=="object"||ve=="function")}var Yr=$n,xn="[object AsyncFunction]",et="[object Function]",ei="[object GeneratorFunction]",Pn="[object Proxy]";function Sn(ee){if(!Yr(ee))return!1;var ve=mt(ee);return ve==et||ve==ei||ve==xn||ve==Pn}var gn=Sn,Ir=C["__core-js_shared__"],kn=Ir,Nn=function(){var ee=/[^.]+$/.exec(kn&&kn.keys&&kn.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}();function cr(ee){return!!Nn&&Nn in ee}var li=cr,Dr=Function.prototype,Ee=Dr.toString;function ce(ee){if(ee!=null){try{return Ee.call(ee)}catch{}try{return ee+""}catch{}}return""}var ut=ce,Vt=/[\\^$.*+?()[\]{}|]/g,Ot=/^\[object .+?Constructor\]$/,Bt=Function.prototype,mn=Object.prototype,Ht=Bt.toString,pt=mn.hasOwnProperty,En=RegExp("^"+Ht.call(pt).replace(Vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function tn(ee){if(!Yr(ee)||li(ee))return!1;var ve=gn(ee)?En:Ot;return ve.test(ut(ee))}var yn=tn;function rn(ee,ve){return ee==null?void 0:ee[ve]}var Jt=rn;function Bn(ee,ve){var De=Jt(ee,ve);return yn(De)?De:void 0}var pr=Bn,Le=pr(Object,"create"),Gt=Le;function ht(){this.__data__=Gt?Gt(null):{},this.size=0}var jt=ht;function qt(ee){var ve=this.has(ee)&&delete this.__data__[ee];return this.size-=ve?1:0,ve}var Qn=qt,Lr="__lodash_hash_undefined__",Mr=Object.prototype,es=Mr.hasOwnProperty;function rr(ee){var ve=this.__data__;if(Gt){var De=ve[ee];return De===Lr?void 0:De}return es.call(ve,ee)?ve[ee]:void 0}var Gr=rr,Ar=Object.prototype,Yc=Ar.hasOwnProperty;function Zc(ee){var ve=this.__data__;return Gt?ve[ee]!==void 0:Yc.call(ve,ee)}var Qc=Zc,qa="__lodash_hash_undefined__";function Jc(ee,ve){var De=this.__data__;return this.size+=this.has(ee)?0:1,De[ee]=Gt&&ve===void 0?qa:ve,this}var Wu=Jc;function _a(ee){var ve=-1,De=ee==null?0:ee.length;for(this.clear();++ve<De;){var ft=ee[ve];this.set(ft[0],ft[1])}}_a.prototype.clear=jt,_a.prototype.delete=Qn,_a.prototype.get=Gr,_a.prototype.has=Qc,_a.prototype.set=Wu;var ed=_a;function Dh(){this.__data__=[],this.size=0}var hm=Dh;function _e(ee,ve){return ee===ve||ee!==ee&&ve!==ve}var tt=_e;function yt(ee,ve){for(var De=ee.length;De--;)if(tt(ee[De][0],ve))return De;return-1}var $e=yt,_t=Array.prototype,Xt=_t.splice;function pn(ee){var ve=this.__data__,De=$e(ve,ee);if(De<0)return!1;var ft=ve.length-1;return De==ft?ve.pop():Xt.call(ve,De,1),--this.size,!0}var Ln=pn;function Tn(ee){var ve=this.__data__,De=$e(ve,ee);return De<0?void 0:ve[De][1]}var Kn=Tn;function Mn(ee){return $e(this.__data__,ee)>-1}var jn=Mn;function Nr(ee,ve){var De=this.__data__,ft=$e(De,ee);return ft<0?(++this.size,De.push([ee,ve])):De[ft][1]=ve,this}var lr=Nr;function Zr(ee){var ve=-1,De=ee==null?0:ee.length;for(this.clear();++ve<De;){var ft=ee[ve];this.set(ft[0],ft[1])}}Zr.prototype.clear=hm,Zr.prototype.delete=Ln,Zr.prototype.get=Kn,Zr.prototype.has=jn,Zr.prototype.set=lr;var Ss=Zr,Wr=pr(C,"Map"),Yn=Wr;function Xa(){this.size=0,this.__data__={hash:new ed,map:new(Yn||Ss),string:new ed}}var wr=Xa;function Zs(ee){var ve=typeof ee;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?ee!=="__proto__":ee===null}var Ya=Zs;function Qs(ee,ve){var De=ee.__data__;return Ya(ve)?De[typeof ve=="string"?"string":"hash"]:De.map}var Za=Qs;function Qr(ee){var ve=Za(this,ee).delete(ee);return this.size-=ve?1:0,ve}var ts=Qr;function Qa(ee){return Za(this,ee).get(ee)}var eo=Qa;function $u(ee){return Za(this,ee).has(ee)}var Lh=$u;function td(ee,ve){var De=Za(this,ee),ft=De.size;return De.set(ee,ve),this.size+=De.size==ft?0:1,this}var pm=td;function zl(ee){var ve=-1,De=ee==null?0:ee.length;for(this.clear();++ve<De;){var ft=ee[ve];this.set(ft[0],ft[1])}}zl.prototype.clear=wr,zl.prototype.delete=ts,zl.prototype.get=eo,zl.prototype.has=Lh,zl.prototype.set=pm;var fm=zl,Nh="Expected a function";function mm(ee,ve){if(typeof ee!="function"||ve!=null&&typeof ve!="function")throw new TypeError(Nh);var De=function(){var ft=arguments,Rn=ve?ve.apply(this,ft):ft[0],dr=De.cache;if(dr.has(Rn))return dr.get(Rn);var to=ee.apply(this,ft);return De.cache=dr.set(Rn,to)||dr,to};return De.cache=new(mm.Cache||fm),De}mm.Cache=fm;var hw=mm,Ja=500;function nd(ee){var ve=hw(ee,function(ft){return De.size===Ja&&De.clear(),ft}),De=ve.cache;return ve}var pw=nd,rd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,t0=/\\(\\)?/g,n0=pw(function(ee){var ve=[];return ee.charCodeAt(0)===46&&ve.push(""),ee.replace(rd,function(De,ft,Rn,dr){ve.push(Rn?dr.replace(t0,"$1"):ft||De)}),ve}),el=n0;function r0(ee,ve){for(var De=-1,ft=ee==null?0:ee.length,Rn=Array(ft);++De<ft;)Rn[De]=ve(ee[De],De,ee);return Rn}var fw=r0,id=1/0,vm=te?te.prototype:void 0,gm=vm?vm.toString:void 0;function ym(ee){if(typeof ee=="string")return ee;if(H(ee))return fw(ee,ym)+"";if(Ut(ee))return gm?gm.call(ee):"";var ve=ee+"";return ve=="0"&&1/ee==-id?"-0":ve}var i0=ym;function o0(ee){return ee==null?"":i0(ee)}var s0=o0;function a0(ee,ve){return H(ee)?ee:wn(ee,ve)?[ee]:el(s0(ee))}var mw=a0,Ku=1/0;function od(ee){if(typeof ee=="string"||Ut(ee))return ee;var ve=ee+"";return ve=="0"&&1/ee==-Ku?"-0":ve}var vw=od;function bm(ee,ve){ve=mw(ve,ee);for(var De=0,ft=ve.length;ee!=null&&De<ft;)ee=ee[vw(ve[De++])];return De&&De==ft?ee:void 0}var tl=bm;function Hl(ee,ve,De){var ft=ee==null?void 0:tl(ee,ve);return ft===void 0?De:ft}var l0=Hl;function Fh(ee,ve){return function(De){return ee(ve(De))}}var gw=Fh,yw=gw(Object.getPrototypeOf,Object),u0=yw,bw="[object Object]",_w=Function.prototype,c0=Object.prototype,d0=_w.toString,h0=c0.hasOwnProperty,_m=d0.call(Object);function p0(ee){if(!Be(ee)||mt(ee)!=bw)return!1;var ve=u0(ee);if(ve===null)return!0;var De=h0.call(ve,"constructor")&&ve.constructor;return typeof De=="function"&&De instanceof De&&d0.call(De)==_m}var f0=p0;function m0(ee){var ve=ee==null?0:ee.length;return ve?ee[ve-1]:void 0}var wm=m0,Bh=new WeakMap,qu=new WeakMap,v0=Symbol("pointerMeta"),ww={get(ee,ve){if(ve===v0)return Bh.get(ee);let De=qu.get(ee);De||(De=new Map,qu.set(ee,De));const ft=De.get(ve);if(ft!==void 0)return ft;const Rn=Bh.get(ee),dr=ad({root:Rn.root,path:[...Rn.path,ve]});return De.set(ve,dr),dr}},Js=ee=>ee[v0],sd=ee=>{const{root:ve,path:De}=Js(ee);return{root:ve,path:De}};function ad(ee){var ve;const De={root:ee.root,path:(ve=ee.path)!=null?ve:[]},ft={};return Bh.set(ft,De),new Proxy(ft,ww)}var Gl=ad,nl=ee=>ee&&!!Js(ee);function xm(ee,ve,De){return ve.length===0?De(ee):Wl(ee,ve,De)}var Wl=(ee,ve,De)=>{if(ve.length===0)return De(ee);if(Array.isArray(ee)){let[ft,...Rn]=ve;ft=parseInt(String(ft),10),isNaN(ft)&&(ft=0);const dr=ee[ft],to=Wl(dr,Rn,De);if(dr===to)return ee;const Es=[...ee];return Es.splice(ft,1,to),Es}else if(typeof ee=="object"&&ee!==null){const[ft,...Rn]=ve,dr=ee[ft],to=Wl(dr,Rn,De);return dr===to?ee:x(_({},ee),{[ft]:to})}else{const[ft,...Rn]=ve;return{[ft]:Wl(void 0,Rn,De)}}},Hi=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const ee=this._head;if(ee)return this._head=ee.next,ee.data}push(ee){const ve={next:this._head,data:ee};this._head=ve}};function ld(ee){return!!(ee&&ee.isPrism&&ee.isPrism===!0)}function Uh(){const ee=()=>{},ve=new Hi,De=ee;return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{ve.push(De)},stopIgnoringDependencies:()=>{ve.peek()!==De||ve.pop()},reportResolutionStart:Zu=>{const Qu=ve.peek();Qu&&Qu(Zu),ve.push(De)},reportResolutionEnd:Zu=>{ve.pop()},pushCollector:Zu=>{ve.push(Zu)},popCollector:Zu=>{if(ve.peek()!==Zu)throw new Error("Popped collector is not on top of the stack");ve.pop()}}}function xw(){const ee="__dataverse_discoveryMechanism_sharedStack",ve=typeof window<"u"?window:typeof Ai<"u"?Ai:{};if(ve){const De=ve[ee];if(De&&typeof De=="object"&&De.type==="Dataverse_discoveryMechanism")return De;{const ft=Uh();return ve[ee]=ft,ft}}else return Uh()}var{startIgnoringDependencies:$l,stopIgnoringDependencies:rl,reportResolutionEnd:Sm,reportResolutionStart:Sw,pushCollector:Vh,popCollector:Ew}=xw(),g0=()=>{},y0=class{constructor(ee,ve){this._fn=ee,this._prismInstance=ve,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new jh(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=De=>{this._possiblyStaleDeps.add(De),this._markAsStale()};for(const De of this._dependencies)De._addDependent(this._reactToDependencyGoingStale);$l(),this.getValue(),rl()}get hasDependents(){return this._dependents.size>0}removeDependent(ee){this._dependents.delete(ee)}addDependent(ee){this._dependents.add(ee)}destroy(){for(const ee of this._dependencies)ee._removeDependent(this._reactToDependencyGoingStale);Cm(this._scope)}getValue(){if(!this._isFresh){const ee=this._recalculate();this._lastValue=ee,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let ee;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let ft=!1;$l();for(const Rn of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(Rn)!==Rn.getValue()){ft=!0;break}if(rl(),this._possiblyStaleDeps.clear(),!ft)return this._lastValue}const ve=new Set;this._cacheOfDendencyValues.clear();const De=ft=>{ve.add(ft),this._addDependency(ft)};Vh(De),Gi.push(this._scope);try{ee=this._fn()}catch(ft){console.error(ft)}finally{Gi.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}Ew(De);for(const ft of this._dependencies)ve.has(ft)||this._removeDependency(ft);this._dependencies=ve,$l();for(const ft of ve)this._cacheOfDendencyValues.set(ft,ft.getValue());return rl(),ee}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const ee of this._dependents)ee(this._prismInstance)}}_addDependency(ee){this._dependencies.has(ee)||(this._dependencies.add(ee),ee._addDependent(this._reactToDependencyGoingStale))}_removeDependency(ee){this._dependencies.has(ee)&&(this._dependencies.delete(ee),ee._removeDependent(this._reactToDependencyGoingStale))}},Em={},Cw=class{constructor(ee){this._fn=ee,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(ee,ve,De=!1){const ft=()=>{ee.onThisOrNextTick(dr)};let Rn=Em;const dr=()=>{const Es=this.getValue();Es!==Rn&&(Rn=Es,ve(Es))};return this._addDependent(ft),De&&(Rn=this.getValue(),ve(Rn)),()=>{this._removeDependent(ft),ee.offThisOrNextTick(dr),ee.offNextTick(dr)}}onStale(ee){const ve=()=>{this._removeDependent(De)},De=()=>ee();return this._addDependent(De),ve}keepHot(){return this.onStale(()=>{})}_addDependent(ee){this._state.hot||this._goHot(),this._state.handle.addDependent(ee)}_goHot(){const ee=new y0(this._fn,this);this._state={hot:!0,handle:ee}}_removeDependent(ee){const ve=this._state;if(!ve.hot)return;const De=ve.handle;De.removeDependent(ee),De.hasDependents||(this._state={hot:!1,handle:void 0},De.destroy())}getValue(){Sw(this);const ee=this._state;let ve;return ee.hot?ve=ee.handle.getValue():ve=ud(this._fn),Sm(this),ve}},jh=class{constructor(ee){this._hotHandle=ee,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(ee,ve){let De=this._refs.get(ee);if(De!==void 0)return De;{const ft={current:ve};return this._refs.set(ee,ft),ft}}effect(ee,ve,De){let ft=this.effects.get(ee);ft===void 0&&(ft={cleanup:g0,deps:void 0},this.effects.set(ee,ft)),km(ft.deps,De)&&(ft.cleanup(),$l(),ft.cleanup=zh(ve,g0).value,rl(),ft.deps=De)}memo(ee,ve,De){let ft=this.memos.get(ee);return ft===void 0&&(ft={cachedValue:null,deps:void 0},this.memos.set(ee,ft)),km(ft.deps,De)&&($l(),ft.cachedValue=zh(ve,void 0).value,rl(),ft.deps=De),ft.cachedValue}state(ee,ve){const{value:De,setValue:ft}=this.memo("state/"+ee,()=>{const Rn={current:ve};return{value:Rn,setValue:to=>{Rn.current=to,this._hotHandle.forceStale()}}},[]);return[De.current,ft]}sub(ee){return this.subs[ee]||(this.subs[ee]=new jh(this._hotHandle)),this.subs[ee]}cleanupEffects(){for(const ee of this.effects.values())zh(ee.cleanup,void 0);this.effects.clear()}source(ee,ve){const De="$$source/blah";return this.effect(De,()=>ee(()=>{this._hotHandle.forceStale()}),[ee]),ve()}};function Cm(ee){for(const ve of Object.values(ee.subs))Cm(ve);ee.cleanupEffects()}function zh(ee,ve){try{return{value:ee(),ok:!0}}catch(De){return setTimeout(function(){throw De}),{value:ve,ok:!1}}}var Gi=new Hi;function Pw(ee,ve){const De=Gi.peek();if(!De)throw new Error("prism.ref() is called outside of a prism() call.");return De.ref(ee,ve)}function Pm(ee,ve,De){const ft=Gi.peek();if(!ft)throw new Error("prism.effect() is called outside of a prism() call.");return ft.effect(ee,ve,De)}function km(ee,ve){if(ee===void 0||ve===void 0)return!0;const De=ee.length;if(De!==ve.length)return!0;for(let ft=0;ft<De;ft++)if(ee[ft]!==ve[ft])return!0;return!1}function Tm(ee,ve,De){const ft=Gi.peek();if(!ft)throw new Error("prism.memo() is called outside of a prism() call.");return ft.memo(ee,ve,De)}function Wi(ee,ve){const De=Gi.peek();if(!De)throw new Error("prism.state() is called outside of a prism() call.");return De.state(ee,ve)}function Hh(){if(!Gi.peek())throw new Error("The parent function is called outside of a prism() call.")}function kw(ee,ve){const De=Gi.peek();if(!De)throw new Error("prism.scope() is called outside of a prism() call.");const ft=De.sub(ee);Gi.push(ft);const Rn=zh(ve,void 0).value;return Gi.pop(),Rn}function Gh(ee,ve,De){return Tm(ee,()=>ui(ve),De).getValue()}function Wh(){return!!Gi.peek()}function Tw(ee,ve){const De=Gi.peek();if(!De)throw new Error("prism.source() is called outside of a prism() call.");return De.source(ee,ve)}var ui=ee=>new Cw(ee),il=class{effect(ee,ve,De){console.warn("prism.effect() does not run in cold prisms")}memo(ee,ve,De){return ve()}state(ee,ve){return[ve,()=>{}]}ref(ee,ve){return{current:ve}}sub(ee){return new il}source(ee,ve){return ve()}};function ud(ee){const ve=new il;Gi.push(ve);let De;try{De=ee()}catch(ft){console.error(ft)}finally{Gi.pop()!==ve&&console.warn("The Prism hook stack has slipped. This is a bug.")}return De}ui.ref=Pw,ui.effect=Pm,ui.memo=Tm,ui.ensurePrism=Hh,ui.state=Wi,ui.scope=kw,ui.sub=Gh,ui.inPrism=Wh,ui.source=Tw;var Xu=ui,Mm;(function(ee){ee[ee.Dict=0]="Dict",ee[ee.Array=1]="Array",ee[ee.Other=2]="Other"})(Mm||(Mm={}));var xr=ee=>Array.isArray(ee)?1:f0(ee)?0:2,Am=(ee,ve,De=xr(ee))=>De===0&&typeof ve=="string"||De===1&&Mw(ve)?ee[ve]:void 0,Mw=ee=>{const ve=typeof ee=="number"?ee:parseInt(ee,10);return!isNaN(ve)&&ve>=0&&ve<1/0&&(ve|0)===ve},$h=class{constructor(ee,ve){this._parent=ee,this._path=ve,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(ee){this.identityChangeListeners.add(ee)}removeIdentityChangeListener(ee){this.identityChangeListeners.delete(ee),this._checkForGC()}removeChild(ee){this.children.delete(ee),this._checkForGC()}getChild(ee){return this.children.get(ee)}getOrCreateChild(ee){let ve=this.children.get(ee);return ve||(ve=ve=new $h(this,this._path.concat([ee])),this.children.set(ee,ve)),ve}_checkForGC(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(wm(this._path))}},Im=class{constructor(ee){this.$$isPointerToPrismProvider=!0,this.pointer=Gl({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(ve,De)=>{const{path:ft}=sd(ve),Rn=this._getOrCreateScopeForPath(ft);return Rn.identityChangeListeners.add(De),()=>{Rn.identityChangeListeners.delete(De)}},this._currentState=ee,this._rootScope=new $h(void 0,[])}set(ee){const ve=this._currentState;this._currentState=ee,this._checkUpdates(this._rootScope,ve,ee)}get(){return this._currentState}getByPointer(ee){const ve=nl(ee)?ee:ee(this.pointer),De=sd(ve).path;return this._getIn(De)}_getIn(ee){return ee.length===0?this.get():l0(this.get(),ee)}reduce(ee){this.set(ee(this.get()))}reduceByPointer(ee,ve){const De=nl(ee)?ee:ee(this.pointer),ft=sd(De).path,Rn=xm(this.get(),ft,ve);this.set(Rn)}setByPointer(ee,ve){this.reduceByPointer(ee,()=>ve)}_checkUpdates(ee,ve,De){if(ve===De)return;for(const dr of ee.identityChangeListeners)dr(De);if(ee.children.size===0)return;const ft=xr(ve),Rn=xr(De);if(!(ft===2&&ft===Rn))for(const[dr,to]of ee.children){const Es=Am(ve,dr,ft),w0=Am(De,dr,Rn);this._checkUpdates(to,Es,w0)}}_getOrCreateScopeForPath(ee){let ve=this._rootScope;for(const De of ee)ve=ve.getOrCreateChild(De);return ve}pointerToPrism(ee){const{path:ve}=sd(ee),De=Rn=>this._onPointerValueChange(ee,Rn),ft=()=>this._getIn(ve);return Xu(()=>Xu.source(De,ft))}},b0=new WeakMap;function Aw(ee){return typeof ee=="object"&&ee!==null&&ee.$$isPointerToPrismProvider===!0}var Yu=ee=>{const ve=Js(ee);let De=b0.get(ve);if(!De){const ft=ve.root;if(!Aw(ft))throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");De=ft.pointerToPrism(ee),b0.set(ve,De)}return De},Kh=ee=>nl(ee)?Yu(ee).getValue():ld(ee)?ee.getValue():ee;function*Iw(ee){let ve;if(nl(ee))ve=Yu(ee);else if(ld(ee))ve=ee;else throw new Error("Only pointers and prisms are supported");let De=0;const ft=ve.onStale(()=>{De++});try{for(;;){const Rn=De;De=0,yield{value:ve.getValue(),ticks:Rn}}}finally{ft()}}var _0=60*3,cd=class{constructor(ee){this._conf=ee,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(ee){this._scheduledForThisOrNextTick.add(ee),this._dormant&&this._goActive()}onNextTick(ee){this._scheduledForNextTick.add(ee),this._dormant&&this._goActive()}offThisOrNextTick(ee){this._scheduledForThisOrNextTick.delete(ee)}offNextTick(ee){this._scheduledForNextTick.delete(ee)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var ee,ve;this._dormant&&(this._dormant=!1,(ve=(ee=this._conf)==null?void 0:ee.onActive)==null||ve.call(ee))}_goDormant(){var ee,ve;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,(ve=(ee=this._conf)==null?void 0:ee.onDormant)==null||ve.call(ee))}tick(ee=performance.now()){if(this.__ticks++,!this._dormant&&this._scheduledForNextTick.size===0&&this._scheduledForThisOrNextTick.size===0&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=_0)){this._goDormant();return}this._ticking=!0,this._timeAtCurrentTick=ee;for(const ve of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(ve);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(ee){const ve=this.time;if(ee>10&&console.warn("_tick() recursing for 10 times"),ee>100)throw new Error("Maximum recursion limit for _tick()");const De=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const ft of De)ft(ve);if(this._scheduledForThisOrNextTick.size>0)return this._tick(ee+1)}};function*Rm(ee){let ve;if(nl(ee))ve=Yu(ee);else if(ld(ee))ve=ee;else throw new Error("Only pointers and prisms are supported");const De=new cd,ft=ve.onChange(De,Rn=>{});try{for(;;)De.tick(),yield ve.getValue()}finally{ft()}}var Rw=class{constructor(ee){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new Im(ee),this.pointer=Gl({root:this,path:[]})}setPointer(ee){this._currentPointerBox.set(ee)}pointerToPrism(ee){const{path:ve}=Js(ee);return Xu(()=>{const De=this._currentPointerBox.prism.getValue(),ft=ve.reduce((Rn,dr)=>Rn[dr],De);return Kh(ft)})}}})(Mt);I3.exports;(function(t,e){var n=Object.create,r=Object.freeze,o=Object.defineProperty,u=Object.defineProperties,h=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,T=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,H=(i,s)=>{if(s=Symbol[i])return s;throw Error("Symbol."+i+" is not defined")},Z=(i,s,a)=>s in i?o(i,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[s]=a,j=(i,s)=>{for(var a in s||(s={}))I.call(s,a)&&Z(i,a,s[a]);if(x)for(var a of x(s))N.call(s,a)&&Z(i,a,s[a]);return i},z=(i,s)=>u(i,m(s)),U=(i,s)=>{var a={};for(var c in i)I.call(i,c)&&s.indexOf(c)<0&&(a[c]=i[c]);if(i!=null&&x)for(var c of x(i))s.indexOf(c)<0&&N.call(i,c)&&(a[c]=i[c]);return a},C=(i,s)=>()=>(i&&(s=i(i=0)),s),K=(i,s)=>()=>(s||i((s={exports:{}}).exports,s),s.exports),te=(i,s)=>{for(var a in s)o(i,a,{get:s[a],enumerable:!0})},pe=(i,s,a,c)=>{if(s&&typeof s=="object"||typeof s=="function")for(let p of _(s))!I.call(i,p)&&p!==a&&o(i,p,{get:()=>s[p],enumerable:!(c=h(s,p))||c.enumerable});return i},Q=(i,s,a)=>(a=i!=null?n(T(i)):{},pe(s||!i||!i.__esModule?o(a,"default",{value:i,enumerable:!0}):a,i)),Se=i=>pe(o({},"__esModule",{value:!0}),i),Pe=(i,s,a)=>(Z(i,typeof s!="symbol"?s+"":s,a),a),G=(i,s)=>r(o(i,"raw",{value:r(s||i.slice())})),ye=(i,s,a)=>new Promise((c,p)=>{var f=w=>{try{y(a.next(w))}catch(S){p(S)}},g=w=>{try{y(a.throw(w))}catch(S){p(S)}},y=w=>w.done?c(w.value):Promise.resolve(w.value).then(f,g);y((a=a.apply(i,s)).next())}),St=function(i,s){this[0]=i,this[1]=s},kt=i=>{var s=i[H("asyncIterator")],a=!1,c,p={};return s==null?(s=i[H("iterator")](),c=f=>p[f]=g=>s[f](g)):(s=s.call(i),c=f=>p[f]=g=>{if(a){if(a=!1,f==="throw")throw g;return g}return a=!0,{done:!1,value:new St(new Promise(y=>{var w=s[f](g);if(!(w instanceof Object))throw TypeError("Object expected");y(w)}),1)}}),p[H("iterator")]=()=>p,c("next"),"throw"in s?c("throw"):p.throw=f=>{throw f},"return"in s&&c("return"),p};function it(i){lt=i}function me(){return lt}var lt,Fe=C(()=>{});function vt(i,s,a=[]){if(typeof i=="object"&&i){if(Ge(i)||mt(i)){s(i,a);return}for(let[c,p]of Object.entries(i))vt(p,s,[...a,c])}else{if(i==null)return;s(i,a)}}var Ge,mt,Je=C(()=>{Ge=i=>typeof i=="object"&&i!==null&&Object.hasOwnProperty.call(i,"type")&&i.type==="image"&&Object.hasOwnProperty.call(i,"id")&&typeof i.id=="string"&&i.id!=="",mt=i=>typeof i=="object"&&i!==null&&Object.hasOwnProperty.call(i,"r")&&Object.hasOwnProperty.call(i,"g")&&Object.hasOwnProperty.call(i,"b")&&Object.hasOwnProperty.call(i,"a")&&typeof i.r=="number"&&typeof i.g=="number"&&typeof i.b=="number"&&typeof i.a=="number"});function Be(i){return s=>typeof s=="object"&&!!s&&s.type===i}var nt,Wt,Ut,Dt,en,on,wn,$n=C(()=>{nt=Be("Theatre_Project"),Wt=Be("Theatre_Sheet"),Ut=Be("Theatre_SheetTemplate"),Dt=Be("Theatre_SheetObject"),en=Be("Theatre_SheetObjectTemplate"),on=Be("Theatre_Sheet_PublicAPI"),wn=Be("Theatre_SheetObject_PublicAPI")}),Yr,xn,et=C(()=>{Yr=typeof Ai=="object"&&Ai&&Ai.Object===Object&&Ai,xn=Yr}),ei,Pn,Sn,gn=C(()=>{et(),ei=typeof self=="object"&&self&&self.Object===Object&&self,Pn=xn||ei||Function("return this")(),Sn=Pn}),Ir,kn,Nn=C(()=>{gn(),Ir=Sn.Symbol,kn=Ir});function cr(i){var s=Dr.call(i,ce),a=i[ce];try{i[ce]=void 0;var c=!0}catch{}var p=Ee.call(i);return c&&(s?i[ce]=a:delete i[ce]),p}var li,Dr,Ee,ce,ut,Vt=C(()=>{Nn(),li=Object.prototype,Dr=li.hasOwnProperty,Ee=li.toString,ce=kn?kn.toStringTag:void 0,ut=cr});function Ot(i){return mn.call(i)}var Bt,mn,Ht,pt=C(()=>{Bt=Object.prototype,mn=Bt.toString,Ht=Ot});function En(i){return i==null?i===void 0?yn:tn:rn&&rn in Object(i)?ut(i):Ht(i)}var tn,yn,rn,Jt,Bn=C(()=>{Nn(),Vt(),pt(),tn="[object Null]",yn="[object Undefined]",rn=kn?kn.toStringTag:void 0,Jt=En});function pr(i){return i!=null&&typeof i=="object"}var Le,Gt=C(()=>{Le=pr});function ht(i){return typeof i=="symbol"||Le(i)&&Jt(i)==jt}var jt,qt,Qn=C(()=>{Bn(),Gt(),jt="[object Symbol]",qt=ht});function Lr(i,s){for(var a=-1,c=i==null?0:i.length,p=Array(c);++a<c;)p[a]=s(i[a],a,i);return p}var Mr,es=C(()=>{Mr=Lr}),rr,Gr,Ar=C(()=>{rr=Array.isArray,Gr=rr});function Yc(i){if(typeof i=="string")return i;if(Gr(i))return Mr(i,Yc)+"";if(qt(i))return qa?qa.call(i):"";var s=i+"";return s=="0"&&1/i==-Zc?"-0":s}var Zc,Qc,qa,Jc,Wu=C(()=>{Nn(),es(),Ar(),Qn(),Zc=1/0,Qc=kn?kn.prototype:void 0,qa=Qc?Qc.toString:void 0,Jc=Yc});function _a(i){for(var s=i.length;s--&&ed.test(i.charAt(s)););return s}var ed,Dh,hm=C(()=>{ed=/\s/,Dh=_a});function _e(i){return i&&i.slice(0,Dh(i)+1).replace(tt,"")}var tt,yt,$e=C(()=>{hm(),tt=/^\s+/,yt=_e});function _t(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}var Xt,pn=C(()=>{Xt=_t});function Ln(i){if(typeof i=="number")return i;if(qt(i))return Tn;if(Xt(i)){var s=typeof i.valueOf=="function"?i.valueOf():i;i=Xt(s)?s+"":s}if(typeof i!="string")return i===0?i:+i;i=yt(i);var a=Mn.test(i);return a||jn.test(i)?Nr(i.slice(2),a?2:8):Kn.test(i)?Tn:+i}var Tn,Kn,Mn,jn,Nr,lr,Zr=C(()=>{$e(),pn(),Qn(),Tn=0/0,Kn=/^[-+]0x[0-9a-f]+$/i,Mn=/^0b[01]+$/i,jn=/^0o[0-7]+$/i,Nr=parseInt,lr=Ln});function Ss(i){if(!i)return i===0?i:0;if(i=lr(i),i===Wr||i===-Wr){var s=i<0?-1:1;return s*Yn}return i===i?i:0}var Wr,Yn,Xa,wr=C(()=>{Zr(),Wr=1/0,Yn=17976931348623157e292,Xa=Ss});function Zs(i){var s=Xa(i),a=s%1;return s===s?a?s-a:s:0}var Ya,Qs=C(()=>{wr(),Ya=Zs});function Za(i){return i}var Qr,ts=C(()=>{Qr=Za});function Qa(i){if(!Xt(i))return!1;var s=Jt(i);return s==$u||s==Lh||s==eo||s==td}var eo,$u,Lh,td,pm,zl=C(()=>{Bn(),pn(),eo="[object AsyncFunction]",$u="[object Function]",Lh="[object GeneratorFunction]",td="[object Proxy]",pm=Qa}),fm,Nh,mm=C(()=>{gn(),fm=Sn["__core-js_shared__"],Nh=fm});function hw(i){return!!Ja&&Ja in i}var Ja,nd,pw=C(()=>{mm(),Ja=function(){var i=/[^.]+$/.exec(Nh&&Nh.keys&&Nh.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),nd=hw});function rd(i){if(i!=null){try{return n0.call(i)}catch{}try{return i+""}catch{}}return""}var t0,n0,el,r0=C(()=>{t0=Function.prototype,n0=t0.toString,el=rd});function fw(i){if(!Xt(i)||nd(i))return!1;var s=pm(i)?s0:vm;return s.test(el(i))}var id,vm,gm,ym,i0,o0,s0,a0,mw=C(()=>{zl(),pw(),pn(),r0(),id=/[\\^$.*+?()[\]{}|]/g,vm=/^\[object .+?Constructor\]$/,gm=Function.prototype,ym=Object.prototype,i0=gm.toString,o0=ym.hasOwnProperty,s0=RegExp("^"+i0.call(o0).replace(id,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),a0=fw});function Ku(i,s){return i==null?void 0:i[s]}var od,vw=C(()=>{od=Ku});function bm(i,s){var a=od(i,s);return a0(a)?a:void 0}var tl,Hl=C(()=>{mw(),vw(),tl=bm}),l0,Fh,gw=C(()=>{Hl(),gn(),l0=tl(Sn,"WeakMap"),Fh=l0});function yw(i,s,a){switch(a.length){case 0:return i.call(s);case 1:return i.call(s,a[0]);case 2:return i.call(s,a[0],a[1]);case 3:return i.call(s,a[0],a[1],a[2])}return i.apply(s,a)}var u0,bw=C(()=>{u0=yw});function _w(){}var c0,d0=C(()=>{c0=_w});function h0(i,s){var a=-1,c=i.length;for(s||(s=Array(c));++a<c;)s[a]=i[a];return s}var _m,p0=C(()=>{_m=h0});function f0(i){var s=0,a=0;return function(){var c=Bh(),p=wm-(c-a);if(a=c,p>0){if(++s>=m0)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}var m0,wm,Bh,qu,v0=C(()=>{m0=800,wm=16,Bh=Date.now,qu=f0});function ww(i){return function(){return i}}var Js,sd=C(()=>{Js=ww}),ad,Gl,nl=C(()=>{Hl(),ad=function(){try{var i=tl(Object,"defineProperty");return i({},"",{}),i}catch{}}(),Gl=ad}),xm,Wl,Hi=C(()=>{sd(),nl(),ts(),xm=Gl?function(i,s){return Gl(i,"toString",{configurable:!0,enumerable:!1,value:Js(s),writable:!0})}:Qr,Wl=xm}),ld,Uh,xw=C(()=>{Hi(),v0(),ld=qu(Wl),Uh=ld});function $l(i,s,a,c){for(var p=i.length,f=a+(c?1:-1);c?f--:++f<p;)if(s(i[f],f,i))return f;return-1}var rl,Sm=C(()=>{rl=$l});function Sw(i){return i!==i}var Vh,Ew=C(()=>{Vh=Sw});function g0(i,s,a){for(var c=a-1,p=i.length;++c<p;)if(i[c]===s)return c;return-1}var y0,Em=C(()=>{y0=g0});function Cw(i,s,a){return s===s?y0(i,s,a):rl(i,Vh,a)}var jh,Cm=C(()=>{Sm(),Ew(),Em(),jh=Cw});function zh(i,s){var a=i==null?0:i.length;return!!a&&jh(i,s,0)>-1}var Gi,Pw=C(()=>{Cm(),Gi=zh});function Pm(i,s){var a=typeof i;return s=s??km,!!s&&(a=="number"||a!="symbol"&&Tm.test(i))&&i>-1&&i%1==0&&i<s}var km,Tm,Wi,Hh=C(()=>{km=9007199254740991,Tm=/^(?:0|[1-9]\d*)$/,Wi=Pm});function kw(i,s,a){s=="__proto__"&&Gl?Gl(i,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):i[s]=a}var Gh,Wh=C(()=>{nl(),Gh=kw});function Tw(i,s){return i===s||i!==i&&s!==s}var ui,il=C(()=>{ui=Tw});function ud(i,s,a){var c=i[s];(!(Mm.call(i,s)&&ui(c,a))||a===void 0&&!(s in i))&&Gh(i,s,a)}var Xu,Mm,xr,Am=C(()=>{Wh(),il(),Xu=Object.prototype,Mm=Xu.hasOwnProperty,xr=ud});function Mw(i,s,a){return s=$h(s===void 0?i.length-1:s,0),function(){for(var c=arguments,p=-1,f=$h(c.length-s,0),g=Array(f);++p<f;)g[p]=c[s+p];p=-1;for(var y=Array(s+1);++p<s;)y[p]=c[p];return y[s]=a(g),u0(i,this,y)}}var $h,Im,b0=C(()=>{bw(),$h=Math.max,Im=Mw});function Aw(i,s){return Uh(Im(i,s,Qr),i+"")}var Yu,Kh=C(()=>{ts(),b0(),xw(),Yu=Aw});function Iw(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=_0}var _0,cd,Rm=C(()=>{_0=9007199254740991,cd=Iw});function Rw(i){return i!=null&&cd(i.length)&&!pm(i)}var ee,ve=C(()=>{zl(),Rm(),ee=Rw});function De(i,s,a){if(!Xt(a))return!1;var c=typeof s;return(c=="number"?ee(a)&&Wi(s,a.length):c=="string"&&s in a)?ui(a[s],i):!1}var ft,Rn=C(()=>{il(),ve(),Hh(),pn(),ft=De});function dr(i){var s=i&&i.constructor,a=typeof s=="function"&&s.prototype||to;return i===a}var to,Es,w0=C(()=>{to=Object.prototype,Es=dr});function Zu(i,s){for(var a=-1,c=Array(i);++a<i;)c[a]=s(a);return c}var Qu,ZP=C(()=>{Qu=Zu});function BL(i){return Le(i)&&Jt(i)==QP}var QP,Ow,UL=C(()=>{Bn(),Gt(),QP="[object Arguments]",Ow=BL}),Dw,JP,ek,Om,x0,Lw=C(()=>{UL(),Gt(),Dw=Object.prototype,JP=Dw.hasOwnProperty,ek=Dw.propertyIsEnumerable,Om=Ow(function(){return arguments}())?Ow:function(i){return Le(i)&&JP.call(i,"callee")&&!ek.call(i,"callee")},x0=Om});function Nw(){return!1}var tk,nk=C(()=>{tk=Nw}),Fw,Bw,S0,Uw,rk,ik,E0,Vw=C(()=>{gn(),nk(),Fw=e&&!e.nodeType&&e,Bw=Fw&&!0&&t&&!t.nodeType&&t,S0=Bw&&Bw.exports===Fw,Uw=S0?Sn.Buffer:void 0,rk=Uw?Uw.isBuffer:void 0,ik=rk||tk,E0=ik});function ok(i){return Le(i)&&cd(i.length)&&!!$r[Jt(i)]}var sk,ak,lk,jw,uk,ck,zw,Hw,dk,Gw,hk,pk,Dm,fk,mk,vk,gk,yk,bk,_k,wk,xk,Sk,Ek,$r,Ck,VL=C(()=>{Bn(),Rm(),Gt(),sk="[object Arguments]",ak="[object Array]",lk="[object Boolean]",jw="[object Date]",uk="[object Error]",ck="[object Function]",zw="[object Map]",Hw="[object Number]",dk="[object Object]",Gw="[object RegExp]",hk="[object Set]",pk="[object String]",Dm="[object WeakMap]",fk="[object ArrayBuffer]",mk="[object DataView]",vk="[object Float32Array]",gk="[object Float64Array]",yk="[object Int8Array]",bk="[object Int16Array]",_k="[object Int32Array]",wk="[object Uint8Array]",xk="[object Uint8ClampedArray]",Sk="[object Uint16Array]",Ek="[object Uint32Array]",$r={},$r[vk]=$r[gk]=$r[yk]=$r[bk]=$r[_k]=$r[wk]=$r[xk]=$r[Sk]=$r[Ek]=!0,$r[sk]=$r[ak]=$r[fk]=$r[lk]=$r[mk]=$r[jw]=$r[uk]=$r[ck]=$r[zw]=$r[Hw]=$r[dk]=$r[Gw]=$r[hk]=$r[pk]=$r[Dm]=!1,Ck=ok});function jL(i){return function(s){return i(s)}}var C0,Ww=C(()=>{C0=jL}),$w,qh,Pk,P0,kk,Kw,zL=C(()=>{et(),$w=e&&!e.nodeType&&e,qh=$w&&!0&&t&&!t.nodeType&&t,Pk=qh&&qh.exports===$w,P0=Pk&&xn.process,kk=function(){try{var i=qh&&qh.require&&qh.require("util").types;return i||P0&&P0.binding&&P0.binding("util")}catch{}}(),Kw=kk}),Fr,Tk,qw,Mk=C(()=>{VL(),Ww(),zL(),Fr=Kw&&Kw.isTypedArray,Tk=Fr?C0(Fr):Ck,qw=Tk});function Xw(i,s){var a=Gr(i),c=!a&&x0(i),p=!a&&!c&&E0(i),f=!a&&!c&&!p&&qw(i),g=a||c||p||f,y=g?Qu(i.length,String):[],w=y.length;for(var S in i)(s||Xh.call(i,S))&&!(g&&(S=="length"||p&&(S=="offset"||S=="parent")||f&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||Wi(S,w)))&&y.push(S);return y}var Yw,Xh,Ak,Zw=C(()=>{ZP(),Lw(),Ar(),Vw(),Hh(),Mk(),Yw=Object.prototype,Xh=Yw.hasOwnProperty,Ak=Xw});function HL(i,s){return function(a){return i(s(a))}}var Ju,Qw=C(()=>{Ju=HL}),Ik,Jw,GL=C(()=>{Qw(),Ik=Ju(Object.keys,Object),Jw=Ik});function WL(i){if(!Es(i))return Jw(i);var s=[];for(var a in Object(i))e1.call(i,a)&&a!="constructor"&&s.push(a);return s}var Rk,e1,Ok,Dk=C(()=>{w0(),GL(),Rk=Object.prototype,e1=Rk.hasOwnProperty,Ok=WL});function $L(i){return ee(i)?Ak(i):Ok(i)}var k0,t1=C(()=>{Zw(),Dk(),ve(),k0=$L});function KL(i,s){if(Gr(i))return!1;var a=typeof i;return a=="number"||a=="symbol"||a=="boolean"||i==null||qt(i)?!0:Nk.test(i)||!Lk.test(i)||s!=null&&i in Object(s)}var Lk,Nk,T0,dd=C(()=>{Ar(),Qn(),Lk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nk=/^\w*$/,T0=KL}),Fk,Yh,M0=C(()=>{Hl(),Fk=tl(Object,"create"),Yh=Fk});function qL(){this.__data__=Yh?Yh(null):{},this.size=0}var Bk,XL=C(()=>{M0(),Bk=qL});function YL(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}var A0,ZL=C(()=>{A0=YL});function Uk(i){var s=this.__data__;if(Yh){var a=s[i];return a===Vk?void 0:a}return jk.call(s,i)?s[i]:void 0}var Vk,I0,jk,zk,QL=C(()=>{M0(),Vk="__lodash_hash_undefined__",I0=Object.prototype,jk=I0.hasOwnProperty,zk=Uk});function Hk(i){var s=this.__data__;return Yh?s[i]!==void 0:Wk.call(s,i)}var Gk,Wk,$k,JL=C(()=>{M0(),Gk=Object.prototype,Wk=Gk.hasOwnProperty,$k=Hk});function eN(i,s){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=Yh&&s===void 0?n1:s,this}var n1,Kk,tN=C(()=>{M0(),n1="__lodash_hash_undefined__",Kk=eN});function Zh(i){var s=-1,a=i==null?0:i.length;for(this.clear();++s<a;){var c=i[s];this.set(c[0],c[1])}}var r1,nN=C(()=>{XL(),ZL(),QL(),JL(),tN(),Zh.prototype.clear=Bk,Zh.prototype.delete=A0,Zh.prototype.get=zk,Zh.prototype.has=$k,Zh.prototype.set=Kk,r1=Zh});function rN(){this.__data__=[],this.size=0}var qk,iN=C(()=>{qk=rN});function oN(i,s){for(var a=i.length;a--;)if(ui(i[a][0],s))return a;return-1}var Lm,R0=C(()=>{il(),Lm=oN});function i1(i){var s=this.__data__,a=Lm(s,i);if(a<0)return!1;var c=s.length-1;return a==c?s.pop():Yk.call(s,a,1),--this.size,!0}var Xk,Yk,o1,sN=C(()=>{R0(),Xk=Array.prototype,Yk=Xk.splice,o1=i1});function aN(i){var s=this.__data__,a=Lm(s,i);return a<0?void 0:s[a][1]}var Zk,lN=C(()=>{R0(),Zk=aN});function uN(i){return Lm(this.__data__,i)>-1}var Qk,s1=C(()=>{R0(),Qk=uN});function a1(i,s){var a=this.__data__,c=Lm(a,i);return c<0?(++this.size,a.push([i,s])):a[c][1]=s,this}var Jk,eT=C(()=>{R0(),Jk=a1});function hd(i){var s=-1,a=i==null?0:i.length;for(this.clear();++s<a;){var c=i[s];this.set(c[0],c[1])}}var Qh,O0=C(()=>{iN(),sN(),lN(),s1(),eT(),hd.prototype.clear=qk,hd.prototype.delete=o1,hd.prototype.get=Zk,hd.prototype.has=Qk,hd.prototype.set=Jk,Qh=hd}),l1,pd,u1=C(()=>{Hl(),gn(),l1=tl(Sn,"Map"),pd=l1});function cN(){this.size=0,this.__data__={hash:new r1,map:new(pd||Qh),string:new r1}}var tT,dN=C(()=>{nN(),O0(),u1(),tT=cN});function hN(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}var nT,pN=C(()=>{nT=hN});function fN(i,s){var a=i.__data__;return nT(s)?a[typeof s=="string"?"string":"hash"]:a.map}var Nm,D0=C(()=>{pN(),Nm=fN});function mN(i){var s=Nm(this,i).delete(i);return this.size-=s?1:0,s}var c1,vN=C(()=>{D0(),c1=mN});function gN(i){return Nm(this,i).get(i)}var rT,yN=C(()=>{D0(),rT=gN});function bN(i){return Nm(this,i).has(i)}var iT,_N=C(()=>{D0(),iT=bN});function wN(i,s){var a=Nm(this,i),c=a.size;return a.set(i,s),this.size+=a.size==c?0:1,this}var oT,xN=C(()=>{D0(),oT=wN});function Jh(i){var s=-1,a=i==null?0:i.length;for(this.clear();++s<a;){var c=i[s];this.set(c[0],c[1])}}var ol,fd=C(()=>{dN(),vN(),yN(),_N(),xN(),Jh.prototype.clear=tT,Jh.prototype.delete=c1,Jh.prototype.get=rT,Jh.prototype.has=iT,Jh.prototype.set=oT,ol=Jh});function d1(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new TypeError(sT);var a=function(){var c=arguments,p=s?s.apply(this,c):c[0],f=a.cache;if(f.has(p))return f.get(p);var g=i.apply(this,c);return a.cache=f.set(p,g)||f,g};return a.cache=new(d1.Cache||ol),a}var sT,h1,aT=C(()=>{fd(),sT="Expected a function",d1.Cache=ol,h1=d1});function lT(i){var s=h1(i,function(c){return a.size===p1&&a.clear(),c}),a=s.cache;return s}var p1,uT,cT=C(()=>{aT(),p1=500,uT=lT}),f1,dT,hT,pT,SN=C(()=>{cT(),f1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dT=/\\(\\)?/g,hT=uT(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(f1,function(a,c,p,f){s.push(p?f.replace(dT,"$1"):c||a)}),s}),pT=hT});function EN(i){return i==null?"":Jc(i)}var Fm,fT=C(()=>{Wu(),Fm=EN});function CN(i,s){return Gr(i)?i:T0(i,s)?[i]:pT(Fm(i))}var Bm,m1=C(()=>{Ar(),dd(),SN(),fT(),Bm=CN});function v1(i){if(typeof i=="string"||qt(i))return i;var s=i+"";return s=="0"&&1/i==-mT?"-0":s}var mT,ep,Um=C(()=>{Qn(),mT=1/0,ep=v1});function PN(i,s){s=Bm(s,i);for(var a=0,c=s.length;i!=null&&a<c;)i=i[ep(s[a++])];return a&&a==c?i:void 0}var Vm,g1=C(()=>{m1(),Um(),Vm=PN});function kN(i,s,a){var c=i==null?void 0:Vm(i,s);return c===void 0?a:c}var md,tp=C(()=>{g1(),md=kN});function TN(i,s){for(var a=-1,c=s.length,p=i.length;++a<c;)i[p+a]=s[a];return i}var jm,vT=C(()=>{jm=TN});function MN(i){return Gr(i)||x0(i)||!!(y1&&i&&i[y1])}var y1,L0,AN=C(()=>{Nn(),Lw(),Ar(),y1=kn?kn.isConcatSpreadable:void 0,L0=MN});function N0(i,s,a,c,p){var f=-1,g=i.length;for(a||(a=L0),p||(p=[]);++f<g;){var y=i[f];s>0&&a(y)?s>1?N0(y,s-1,a,c,p):jm(p,y):c||(p[p.length]=y)}return p}var gT,b1=C(()=>{vT(),AN(),gT=N0}),_1,yT,bT=C(()=>{Qw(),_1=Ju(Object.getPrototypeOf,Object),yT=_1});function _T(i){if(!Le(i)||Jt(i)!=w1)return!1;var s=yT(i);if(s===null)return!0;var a=xT.call(s,"constructor")&&s.constructor;return typeof a=="function"&&a instanceof a&&S1.call(a)==ST}var w1,x1,wT,S1,xT,ST,F0,ec=C(()=>{Bn(),bT(),Gt(),w1="[object Object]",x1=Function.prototype,wT=Object.prototype,S1=x1.toString,xT=wT.hasOwnProperty,ST=S1.call(Object),F0=_T});function zm(i){var s=Math[i];return function(a,c){if(a=lr(a),c=c==null?0:CT(Ya(c),292),c&&ET(a)){var p=(Fm(a)+"e").split("e"),f=s(p[0]+"e"+(+p[1]+c));return p=(Fm(f)+"e").split("e"),+(p[0]+"e"+(+p[1]-c))}return s(a)}}var ET,CT,PT,IN=C(()=>{gn(),Qs(),Zr(),fT(),ET=Sn.isFinite,CT=Math.min,PT=zm});function RN(i,s,a){return i===i&&(a!==void 0&&(i=i<=a?i:a),s!==void 0&&(i=i>=s?i:s)),i}var Hm,ON=C(()=>{Hm=RN});function E1(i,s,a){return a===void 0&&(a=s,s=void 0),a!==void 0&&(a=lr(a),a=a===a?a:0),s!==void 0&&(s=lr(s),s=s===s?s:0),Hm(lr(i),s,a)}var ci,B0=C(()=>{ON(),Zr(),ci=E1});function DN(){this.__data__=new Qh,this.size=0}var kT,LN=C(()=>{O0(),kT=DN});function TT(i){var s=this.__data__,a=s.delete(i);return this.size=s.size,a}var C1,NN=C(()=>{C1=TT});function FN(i){return this.__data__.get(i)}var MT,BN=C(()=>{MT=FN});function UN(i){return this.__data__.has(i)}var AT,VN=C(()=>{AT=UN});function jN(i,s){var a=this.__data__;if(a instanceof Qh){var c=a.__data__;if(!pd||c.length<IT-1)return c.push([i,s]),this.size=++a.size,this;a=this.__data__=new ol(c)}return a.set(i,s),this.size=a.size,this}var IT,RT,zN=C(()=>{O0(),u1(),fd(),IT=200,RT=jN});function np(i){var s=this.__data__=new Qh(i);this.size=s.size}var Gm,OT=C(()=>{O0(),LN(),NN(),BN(),VN(),zN(),np.prototype.clear=kT,np.prototype.delete=C1,np.prototype.get=MT,np.prototype.has=AT,np.prototype.set=RT,Gm=np});function HN(i,s){for(var a=-1,c=i==null?0:i.length,p=0,f=[];++a<c;){var g=i[a];s(g,a,i)&&(f[p++]=g)}return f}var DT,GN=C(()=>{DT=HN});function WN(){return[]}var LT,$N=C(()=>{LT=WN}),NT,FT,P1,BT,UT,KN=C(()=>{GN(),$N(),NT=Object.prototype,FT=NT.propertyIsEnumerable,P1=Object.getOwnPropertySymbols,BT=P1?function(i){return i==null?[]:(i=Object(i),DT(P1(i),function(s){return FT.call(i,s)}))}:LT,UT=BT});function qN(i,s,a){var c=s(i);return Gr(i)?c:jm(c,a(i))}var VT,XN=C(()=>{vT(),Ar(),VT=qN});function YN(i){return VT(i,k0,UT)}var U0,ZN=C(()=>{XN(),KN(),t1(),U0=YN}),jT,V0,QN=C(()=>{Hl(),gn(),jT=tl(Sn,"DataView"),V0=jT}),zT,Wm,JN=C(()=>{Hl(),gn(),zT=tl(Sn,"Promise"),Wm=zT}),HT,vd,GT=C(()=>{Hl(),gn(),HT=tl(Sn,"Set"),vd=HT}),k1,T1,M1,A1,I1,R1,O1,WT,$T,KT,D1,tc,L1,e5=C(()=>{QN(),u1(),JN(),GT(),gw(),Bn(),r0(),k1="[object Map]",T1="[object Object]",M1="[object Promise]",A1="[object Set]",I1="[object WeakMap]",R1="[object DataView]",O1=el(V0),WT=el(pd),$T=el(Wm),KT=el(vd),D1=el(Fh),tc=Jt,(V0&&tc(new V0(new ArrayBuffer(1)))!=R1||pd&&tc(new pd)!=k1||Wm&&tc(Wm.resolve())!=M1||vd&&tc(new vd)!=A1||Fh&&tc(new Fh)!=I1)&&(tc=function(i){var s=Jt(i),a=s==T1?i.constructor:void 0,c=a?el(a):"";if(c)switch(c){case O1:return R1;case WT:return k1;case $T:return M1;case KT:return A1;case D1:return I1}return s}),L1=tc}),qT,N1,t5=C(()=>{gn(),qT=Sn.Uint8Array,N1=qT});function n5(i){return this.__data__.set(i,XT),this}var XT,YT,r5=C(()=>{XT="__lodash_hash_undefined__",YT=n5});function i5(i){return this.__data__.has(i)}var ZT,o5=C(()=>{ZT=i5});function j0(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new ol;++s<a;)this.add(i[s])}var F1,QT=C(()=>{fd(),r5(),o5(),j0.prototype.add=j0.prototype.push=YT,j0.prototype.has=ZT,F1=j0});function Kr(i,s){for(var a=-1,c=i==null?0:i.length;++a<c;)if(s(i[a],a,i))return!0;return!1}var $m,s5=C(()=>{$m=Kr});function a5(i,s){return i.has(s)}var B1,JT=C(()=>{B1=a5});function l5(i,s,a,c,p,f){var g=a&eM,y=i.length,w=s.length;if(y!=w&&!(g&&w>y))return!1;var S=f.get(i),M=f.get(s);if(S&&M)return S==s&&M==i;var R=-1,A=!0,k=a&tM?new F1:void 0;for(f.set(i,s),f.set(s,i);++R<y;){var D=i[R],O=s[R];if(c)var F=g?c(O,D,R,s,i,f):c(D,O,R,i,s,f);if(F!==void 0){if(F)continue;A=!1;break}if(k){if(!$m(s,function(V,W){if(!B1(k,W)&&(D===V||p(D,V,a,c,f)))return k.push(W)})){A=!1;break}}else if(!(D===O||p(D,O,a,c,f))){A=!1;break}}return f.delete(i),f.delete(s),A}var eM,tM,U1,nM=C(()=>{QT(),s5(),JT(),eM=1,tM=2,U1=l5});function u5(i){var s=-1,a=Array(i.size);return i.forEach(function(c,p){a[++s]=[p,c]}),a}var Km,c5=C(()=>{Km=u5});function d5(i){var s=-1,a=Array(i.size);return i.forEach(function(c){a[++s]=c}),a}var z0,V1=C(()=>{z0=d5});function h5(i,s,a,c,p,f,g){switch(a){case fM:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case pM:return!(i.byteLength!=s.byteLength||!f(new N1(i),new N1(s)));case oM:case j1:case lM:return ui(+i,+s);case sM:return i.name==s.name&&i.message==s.message;case uM:case dM:return i==s+"";case aM:var y=Km;case cM:var w=c&rM;if(y||(y=z0),i.size!=s.size&&!w)return!1;var S=g.get(i);if(S)return S==s;c|=iM,g.set(i,s);var M=U1(y(i),y(s),c,p,f,g);return g.delete(i),M;case hM:if(H0)return H0.call(i)==H0.call(s)}return!1}var rM,iM,oM,j1,sM,aM,lM,uM,cM,dM,hM,pM,fM,z1,H0,mM,p5=C(()=>{Nn(),t5(),il(),nM(),c5(),V1(),rM=1,iM=2,oM="[object Boolean]",j1="[object Date]",sM="[object Error]",aM="[object Map]",lM="[object Number]",uM="[object RegExp]",cM="[object Set]",dM="[object String]",hM="[object Symbol]",pM="[object ArrayBuffer]",fM="[object DataView]",z1=kn?kn.prototype:void 0,H0=z1?z1.valueOf:void 0,mM=h5});function f5(i,s,a,c,p,f){var g=a&vM,y=U0(i),w=y.length,S=U0(s),M=S.length;if(w!=M&&!g)return!1;for(var R=w;R--;){var A=y[R];if(!(g?A in s:yM.call(s,A)))return!1}var k=f.get(i),D=f.get(s);if(k&&D)return k==s&&D==i;var O=!0;f.set(i,s),f.set(s,i);for(var F=g;++R<w;){A=y[R];var V=i[A],W=s[A];if(c)var X=g?c(W,V,A,s,i,f):c(V,W,A,i,s,f);if(!(X===void 0?V===W||p(V,W,a,c,f):X)){O=!1;break}F||(F=A=="constructor")}if(O&&!F){var re=i.constructor,ne=s.constructor;re!=ne&&"constructor"in i&&"constructor"in s&&!(typeof re=="function"&&re instanceof re&&typeof ne=="function"&&ne instanceof ne)&&(O=!1)}return f.delete(i),f.delete(s),O}var vM,gM,yM,H1,G1=C(()=>{ZN(),vM=1,gM=Object.prototype,yM=gM.hasOwnProperty,H1=f5});function m5(i,s,a,c,p,f){var g=Gr(i),y=Gr(s),w=g?$1:L1(i),S=y?$1:L1(s);w=w==W1?qm:w,S=S==W1?qm:S;var M=w==qm,R=S==qm,A=w==S;if(A&&E0(i)){if(!E0(s))return!1;g=!0,M=!1}if(A&&!M)return f||(f=new Gm),g||qw(i)?U1(i,s,a,c,p,f):mM(i,s,w,a,c,p,f);if(!(a&bM)){var k=M&&K1.call(i,"__wrapped__"),D=R&&K1.call(s,"__wrapped__");if(k||D){var O=k?i.value():i,F=D?s.value():s;return f||(f=new Gm),p(O,F,a,c,f)}}return A?(f||(f=new Gm),H1(i,s,a,c,p,f)):!1}var bM,W1,$1,qm,_M,K1,wM,xM=C(()=>{OT(),nM(),p5(),G1(),e5(),Ar(),Vw(),Mk(),bM=1,W1="[object Arguments]",$1="[object Array]",qm="[object Object]",_M=Object.prototype,K1=_M.hasOwnProperty,wM=m5});function q1(i,s,a,c,p){return i===s?!0:i==null||s==null||!Le(i)&&!Le(s)?i!==i&&s!==s:wM(i,s,a,c,q1,p)}var rp,SM=C(()=>{xM(),Gt(),rp=q1});function EM(i,s,a,c){var p=a.length,f=p,g=!c;if(i==null)return!f;for(i=Object(i);p--;){var y=a[p];if(g&&y[2]?y[1]!==i[y[0]]:!(y[0]in i))return!1}for(;++p<f;){y=a[p];var w=y[0],S=i[w],M=y[1];if(g&&y[2]){if(S===void 0&&!(w in i))return!1}else{var R=new Gm;if(c)var A=c(S,M,w,i,s,R);if(!(A===void 0?rp(M,S,CM|PM,c,R):A))return!1}}return!0}var CM,PM,X1,kM=C(()=>{OT(),SM(),CM=1,PM=2,X1=EM});function v5(i){return i===i&&!Xt(i)}var Y1,TM=C(()=>{pn(),Y1=v5});function g5(i){for(var s=k0(i),a=s.length;a--;){var c=s[a],p=i[c];s[a]=[c,p,Y1(p)]}return s}var MM,AM=C(()=>{TM(),t1(),MM=g5});function y5(i,s){return function(a){return a==null?!1:a[i]===s&&(s!==void 0||i in Object(a))}}var Z1,IM=C(()=>{Z1=y5});function RM(i){var s=MM(i);return s.length==1&&s[0][2]?Z1(s[0][0],s[0][1]):function(a){return a===i||X1(a,i,s)}}var OM,b5=C(()=>{kM(),AM(),IM(),OM=RM});function _5(i,s){return i!=null&&s in Object(i)}var DM,w5=C(()=>{DM=_5});function x5(i,s,a){s=Bm(s,i);for(var c=-1,p=s.length,f=!1;++c<p;){var g=ep(s[c]);if(!(f=i!=null&&a(i,g)))break;i=i[g]}return f||++c!=p?f:(p=i==null?0:i.length,!!p&&cd(p)&&Wi(g,p)&&(Gr(i)||x0(i)))}var LM,S5=C(()=>{m1(),Lw(),Ar(),Hh(),Rm(),Um(),LM=x5});function E5(i,s){return i!=null&&LM(i,s,DM)}var NM,C5=C(()=>{w5(),S5(),NM=E5});function P5(i,s){return T0(i)&&Y1(s)?Z1(ep(i),s):function(a){var c=md(a,i);return c===void 0&&c===s?NM(a,i):rp(s,c,FM|Q1)}}var FM,Q1,BM,k5=C(()=>{SM(),tp(),C5(),dd(),TM(),IM(),Um(),FM=1,Q1=2,BM=P5});function T5(i){return function(s){return s==null?void 0:s[i]}}var UM,M5=C(()=>{UM=T5});function A5(i){return function(s){return Vm(s,i)}}var VM,I5=C(()=>{g1(),VM=A5});function R5(i){return T0(i)?UM(ep(i)):VM(i)}var jM,O5=C(()=>{M5(),I5(),dd(),Um(),jM=R5});function D5(i){return typeof i=="function"?i:i==null?Qr:typeof i=="object"?Gr(i)?BM(i[0],i[1]):OM(i):jM(i)}var ip,gd=C(()=>{b5(),k5(),ts(),Ar(),O5(),ip=D5});function L5(i,s,a,c){for(var p=-1,f=i==null?0:i.length;++p<f;){var g=i[p];s(c,g,a(g),i)}return c}var zM,N5=C(()=>{zM=L5});function F5(i){return function(s,a,c){for(var p=-1,f=Object(s),g=c(s),y=g.length;y--;){var w=g[i?y:++p];if(a(f[w],w,f)===!1)break}return s}}var HM,B5=C(()=>{HM=F5}),GM,WM,U5=C(()=>{B5(),GM=HM(),WM=GM});function V5(i,s){return i&&WM(i,s,k0)}var J1,$M=C(()=>{U5(),t1(),J1=V5});function j5(i,s){return function(a,c){if(a==null)return a;if(!ee(a))return i(a,c);for(var p=a.length,f=s?p:-1,g=Object(a);(s?f--:++f<p)&&c(g[f],f,g)!==!1;);return a}}var KM,z5=C(()=>{ve(),KM=j5}),qM,ex,XM=C(()=>{$M(),z5(),qM=KM(J1),ex=qM});function YM(i,s,a,c){return ex(i,function(p,f,g){s(c,p,a(p),g)}),c}var ZM,H5=C(()=>{XM(),ZM=YM});function QM(i,s){return function(a,c){var p=Gr(a)?zM:ZM,f=s?s():{};return p(a,i,ip(c,2),f)}}var JM,G5=C(()=>{N5(),H5(),gd(),Ar(),JM=QM}),e2,G0,W5=C(()=>{gn(),e2=function(){return Sn.Date.now()},G0=e2});function $5(i,s,a){var c,p,f,g,y,w,S=0,M=!1,R=!1,A=!0;if(typeof i!="function")throw new TypeError(W0);s=lr(s)||0,Xt(a)&&(M=!!a.leading,R="maxWait"in a,f=R?$0(lr(a.maxWait)||0,s):f,A="trailing"in a?!!a.trailing:A);function k(ae){var xe=c,fe=p;return c=p=void 0,S=ae,g=i.apply(fe,xe),g}function D(ae){return S=ae,y=setTimeout(V,s),M?k(ae):g}function O(ae){var xe=ae-w,fe=ae-S,ge=s-xe;return R?t2(ge,f-fe):ge}function F(ae){var xe=ae-w,fe=ae-S;return w===void 0||xe>=s||xe<0||R&&fe>=f}function V(){var ae=G0();if(F(ae))return W(ae);y=setTimeout(V,O(ae))}function W(ae){return y=void 0,A&&c?k(ae):(c=p=void 0,g)}function X(){y!==void 0&&clearTimeout(y),S=0,c=w=p=y=void 0}function re(){return y===void 0?g:W(G0())}function ne(){var ae=G0(),xe=F(ae);if(c=arguments,p=this,w=ae,xe){if(y===void 0)return D(w);if(R)return clearTimeout(y),y=setTimeout(V,s),k(w)}return y===void 0&&(y=setTimeout(V,s)),g}return ne.cancel=X,ne.flush=re,ne}var W0,$0,t2,K0,tx=C(()=>{pn(),W5(),Zr(),W0="Expected a function",$0=Math.max,t2=Math.min,K0=$5});function n2(i,s,a){for(var c=-1,p=i==null?0:i.length;++c<p;)if(a(s,i[c]))return!0;return!1}var r2,i2=C(()=>{r2=n2});function o2(i){var s=i==null?0:i.length;return s?i[s-1]:void 0}var yd,q0=C(()=>{yd=o2});function K5(i,s,a){var c=i==null?0:i.length;if(!c)return-1;var p=a==null?0:Ya(a);return p<0&&(p=nx(c+p,0)),rl(i,ip(s,3),p)}var nx,rx,q5=C(()=>{Sm(),gd(),Qs(),nx=Math.max,rx=K5});function X5(i,s,a){var c=i==null?0:i.length;if(!c)return-1;var p=c-1;return a!==void 0&&(p=Ya(a),p=a<0?ix(c+p,0):s2(p,c-1)),rl(i,ip(s,3),p,!0)}var ix,s2,a2,Y5=C(()=>{Sm(),gd(),Qs(),ix=Math.max,s2=Math.min,a2=X5});function Z5(i,s){var a=-1,c=ee(i)?Array(i.length):[];return ex(i,function(p,f,g){c[++a]=s(p,f,g)}),c}var op,Q5=C(()=>{XM(),ve(),op=Z5});function l2(i,s,a){return i>=c2(s,a)&&i<u2(s,a)}var u2,c2,d2,X0=C(()=>{u2=Math.max,c2=Math.min,d2=l2});function ox(i,s,a){return s=Xa(s),a===void 0?(a=s,s=0):a=Xa(a),i=lr(i),d2(i,s,a)}var sx,J5=C(()=>{X0(),wr(),Zr(),sx=ox});function qr(i){return typeof i=="number"&&i==Ya(i)}var ns,Cs=C(()=>{Qs(),ns=qr}),nc,Sr,Kl=C(()=>{Wh(),G5(),nc=JM(function(i,s,a){Gh(i,a,s)}),Sr=nc});function h2(i,s){var a={};return s=ip(s,3),J1(i,function(c,p,f){Gh(a,p,s(c,p,f))}),a}var bd,p2=C(()=>{Wh(),$M(),gd(),bd=h2});function eF(i,s,a,c){if(!Xt(i))return i;s=Bm(s,i);for(var p=-1,f=s.length,g=f-1,y=i;y!=null&&++p<f;){var w=ep(s[p]),S=a;if(w==="__proto__"||w==="constructor"||w==="prototype")return i;if(p!=g){var M=y[w];S=c?c(M,w,y):void 0,S===void 0&&(S=Xt(M)?M:Wi(s[p+1])?[]:{})}xr(y,w,S),y=y[w]}return i}var f2,tF=C(()=>{Am(),m1(),Hh(),pn(),Um(),f2=eF});function m2(i,s){var a=i.length;for(i.sort(s);a--;)i[a]=i[a].value;return i}var ax,Y0=C(()=>{ax=m2});function v2(i,s){if(i!==s){var a=i!==void 0,c=i===null,p=i===i,f=qt(i),g=s!==void 0,y=s===null,w=s===s,S=qt(s);if(!y&&!S&&!f&&i>s||f&&g&&w&&!y&&!S||c&&g&&w||!a&&w||!p)return 1;if(!c&&!f&&!S&&i<s||S&&a&&p&&!c&&!f||y&&a&&p||!g&&p||!w)return-1}return 0}var g2,y2=C(()=>{Qn(),g2=v2});function b2(i,s,a){for(var c=-1,p=i.criteria,f=s.criteria,g=p.length,y=a.length;++c<g;){var w=g2(p[c],f[c]);if(w){if(c>=y)return w;var S=a[c];return w*(S=="desc"?-1:1)}}return i.index-s.index}var lx,nF=C(()=>{y2(),lx=b2});function rF(i,s,a){s.length?s=Mr(s,function(f){return Gr(f)?function(g){return Vm(g,f.length===1?f[0]:f)}:f}):s=[Qr];var c=-1;s=Mr(s,C0(ip));var p=op(i,function(f,g,y){var w=Mr(s,function(S){return S(f)});return{criteria:w,index:++c,value:f}});return ax(p,function(f,g){return lx(f,g,a)})}var ux,iF=C(()=>{es(),g1(),gd(),Q5(),Y0(),Ww(),nF(),ts(),Ar(),ux=rF});function oF(i,s,a,c){for(var p=a-1,f=i.length;++p<f;)if(c(i[p],s))return p;return-1}var sp,_2=C(()=>{sp=oF});function sF(i,s,a,c){var p=c?sp:jh,f=-1,g=s.length,y=i;for(i===s&&(s=_m(s)),a&&(y=Mr(i,C0(a)));++f<g;)for(var w=0,S=s[f],M=a?a(S):S;(w=p(y,M,w,c))>-1;)y!==i&&$i.call(y,w,1),$i.call(i,w,1);return i}var w2,$i,ql,aF=C(()=>{es(),Cm(),_2(),Ww(),p0(),w2=Array.prototype,$i=w2.splice,ql=sF});function Z0(i,s){return i&&i.length&&s&&s.length?ql(i,s):i}var x2,lF=C(()=>{aF(),x2=Z0}),S2,E2,cx=C(()=>{Kh(),lF(),S2=Yu(x2),E2=S2}),C2,Xm,ap=C(()=>{IN(),C2=PT("round"),Xm=C2});function uF(i,s,a){return i==null?i:f2(i,s,a)}var lp,Q0=C(()=>{tF(),lp=uF}),J0,P2,ey=C(()=>{b1(),iF(),Kh(),Rn(),J0=Yu(function(i,s){if(i==null)return[];var a=s.length;return a>1&&ft(i,s[0],s[1])?s=[]:a>2&&ft(s[0],s[1],s[2])&&(s=[s[0]]),ux(i,gT(s,1),[])}),P2=J0}),dx,hx,k2,cF=C(()=>{GT(),d0(),V1(),dx=1/0,hx=vd&&1/z0(new vd([,-0]))[1]==dx?function(i){return new vd(i)}:c0,k2=hx});function dF(i,s,a){var c=-1,p=Gi,f=i.length,g=!0,y=[],w=y;if(a)g=!1,p=r2;else if(f>=T2){var S=s?null:k2(i);if(S)return z0(S);g=!1,p=B1,w=new F1}else w=s?[]:y;e:for(;++c<f;){var M=i[c],R=s?s(M):M;if(M=a||M!==0?M:0,g&&R===R){for(var A=w.length;A--;)if(w[A]===R)continue e;s&&w.push(R),y.push(M)}else p(w,R,a)||(w!==y&&w.push(R),y.push(M))}return y}var T2,M2,hF=C(()=>{QT(),Pw(),i2(),JT(),cF(),V1(),T2=200,M2=dF});function pF(i){return i&&i.length?M2(i):[]}var rs,_d=C(()=>{hF(),rs=pF}),ti=C(()=>{B0(),tx(),q5(),J5(),Cs(),ec(),q0(),p2(),aT(),ap(),_d()}),px=K((i,s)=>{var a;s.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:Ai):c=>(a||(a=Promise.resolve())).then(c).catch(p=>setTimeout(()=>{throw p},0))}),A2=K(i=>{var s=Symbol.for("react.element"),a=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),A=Symbol.iterator;function k(ue){return ue===null||typeof ue!="object"?null:(ue=A&&ue[A]||ue["@@iterator"],typeof ue=="function"?ue:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,F={};function V(ue,he,qe){this.props=ue,this.context=he,this.refs=F,this.updater=qe||D}V.prototype.isReactComponent={},V.prototype.setState=function(ue,he){if(typeof ue!="object"&&typeof ue!="function"&&ue!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ue,he,"setState")},V.prototype.forceUpdate=function(ue){this.updater.enqueueForceUpdate(this,ue,"forceUpdate")};function W(){}W.prototype=V.prototype;function X(ue,he,qe){this.props=ue,this.context=he,this.refs=F,this.updater=qe||D}var re=X.prototype=new W;re.constructor=X,O(re,V.prototype),re.isPureReactComponent=!0;var ne=Array.isArray,ae=Object.prototype.hasOwnProperty,xe={current:null},fe={key:!0,ref:!0,__self:!0,__source:!0};function ge(ue,he,qe){var Ze,ot={},ze=null,Zt=null;if(he!=null)for(Ze in he.ref!==void 0&&(Zt=he.ref),he.key!==void 0&&(ze=""+he.key),he)ae.call(he,Ze)&&!fe.hasOwnProperty(Ze)&&(ot[Ze]=he[Ze]);var bt=arguments.length-2;if(bt===1)ot.children=qe;else if(1<bt){for(var Kt=Array(bt),cn=0;cn<bt;cn++)Kt[cn]=arguments[cn+2];ot.children=Kt}if(ue&&ue.defaultProps)for(Ze in bt=ue.defaultProps,bt)ot[Ze]===void 0&&(ot[Ze]=bt[Ze]);return{$$typeof:s,type:ue,key:ze,ref:Zt,props:ot,_owner:xe.current}}function Ie(ue,he){return{$$typeof:s,type:ue.type,key:he,ref:ue.ref,props:ue.props,_owner:ue._owner}}function Qe(ue){return typeof ue=="object"&&ue!==null&&ue.$$typeof===s}function le(ue){var he={"=":"=0",":":"=2"};return"$"+ue.replace(/[=:]/g,function(qe){return he[qe]})}var Ae=/\/+/g;function Y(ue,he){return typeof ue=="object"&&ue!==null&&ue.key!=null?le(""+ue.key):he.toString(36)}function Ue(ue,he,qe,Ze,ot){var ze=typeof ue;(ze==="undefined"||ze==="boolean")&&(ue=null);var Zt=!1;if(ue===null)Zt=!0;else switch(ze){case"string":case"number":Zt=!0;break;case"object":switch(ue.$$typeof){case s:case a:Zt=!0}}if(Zt)return Zt=ue,ot=ot(Zt),ue=Ze===""?"."+Y(Zt,0):Ze,ne(ot)?(qe="",ue!=null&&(qe=ue.replace(Ae,"$&/")+"/"),Ue(ot,he,qe,"",function(cn){return cn})):ot!=null&&(Qe(ot)&&(ot=Ie(ot,qe+(!ot.key||Zt&&Zt.key===ot.key?"":(""+ot.key).replace(Ae,"$&/")+"/")+ue)),he.push(ot)),1;if(Zt=0,Ze=Ze===""?".":Ze+":",ne(ue))for(var bt=0;bt<ue.length;bt++){ze=ue[bt];var Kt=Ze+Y(ze,bt);Zt+=Ue(ze,he,qe,Kt,ot)}else if(Kt=k(ue),typeof Kt=="function")for(ue=Kt.call(ue),bt=0;!(ze=ue.next()).done;)ze=ze.value,Kt=Ze+Y(ze,bt++),Zt+=Ue(ze,he,qe,Kt,ot);else if(ze==="object")throw he=String(ue),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(ue).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.");return Zt}function Tt(ue,he,qe){if(ue==null)return ue;var Ze=[],ot=0;return Ue(ue,Ze,"","",function(ze){return he.call(qe,ze,ot++)}),Ze}function ke(ue){if(ue._status===-1){var he=ue._result;he=he(),he.then(function(qe){(ue._status===0||ue._status===-1)&&(ue._status=1,ue._result=qe)},function(qe){(ue._status===0||ue._status===-1)&&(ue._status=2,ue._result=qe)}),ue._status===-1&&(ue._status=0,ue._result=he)}if(ue._status===1)return ue._result.default;throw ue._result}var Te={current:null},je={transition:null},wt={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:je,ReactCurrentOwner:xe};i.Children={map:Tt,forEach:function(ue,he,qe){Tt(ue,function(){he.apply(this,arguments)},qe)},count:function(ue){var he=0;return Tt(ue,function(){he++}),he},toArray:function(ue){return Tt(ue,function(he){return he})||[]},only:function(ue){if(!Qe(ue))throw Error("React.Children.only expected to receive a single React element child.");return ue}},i.Component=V,i.Fragment=c,i.Profiler=f,i.PureComponent=X,i.StrictMode=p,i.Suspense=S,i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wt,i.cloneElement=function(ue,he,qe){if(ue==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ue+".");var Ze=O({},ue.props),ot=ue.key,ze=ue.ref,Zt=ue._owner;if(he!=null){if(he.ref!==void 0&&(ze=he.ref,Zt=xe.current),he.key!==void 0&&(ot=""+he.key),ue.type&&ue.type.defaultProps)var bt=ue.type.defaultProps;for(Kt in he)ae.call(he,Kt)&&!fe.hasOwnProperty(Kt)&&(Ze[Kt]=he[Kt]===void 0&&bt!==void 0?bt[Kt]:he[Kt])}var Kt=arguments.length-2;if(Kt===1)Ze.children=qe;else if(1<Kt){bt=Array(Kt);for(var cn=0;cn<Kt;cn++)bt[cn]=arguments[cn+2];Ze.children=bt}return{$$typeof:s,type:ue.type,key:ot,ref:ze,props:Ze,_owner:Zt}},i.createContext=function(ue){return ue={$$typeof:y,_currentValue:ue,_currentValue2:ue,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ue.Provider={$$typeof:g,_context:ue},ue.Consumer=ue},i.createElement=ge,i.createFactory=function(ue){var he=ge.bind(null,ue);return he.type=ue,he},i.createRef=function(){return{current:null}},i.forwardRef=function(ue){return{$$typeof:w,render:ue}},i.isValidElement=Qe,i.lazy=function(ue){return{$$typeof:R,_payload:{_status:-1,_result:ue},_init:ke}},i.memo=function(ue,he){return{$$typeof:M,type:ue,compare:he===void 0?null:he}},i.startTransition=function(ue){var he=je.transition;je.transition={};try{ue()}finally{je.transition=he}},i.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},i.useCallback=function(ue,he){return Te.current.useCallback(ue,he)},i.useContext=function(ue){return Te.current.useContext(ue)},i.useDebugValue=function(){},i.useDeferredValue=function(ue){return Te.current.useDeferredValue(ue)},i.useEffect=function(ue,he){return Te.current.useEffect(ue,he)},i.useId=function(){return Te.current.useId()},i.useImperativeHandle=function(ue,he,qe){return Te.current.useImperativeHandle(ue,he,qe)},i.useInsertionEffect=function(ue,he){return Te.current.useInsertionEffect(ue,he)},i.useLayoutEffect=function(ue,he){return Te.current.useLayoutEffect(ue,he)},i.useMemo=function(ue,he){return Te.current.useMemo(ue,he)},i.useReducer=function(ue,he,qe){return Te.current.useReducer(ue,he,qe)},i.useRef=function(ue){return Te.current.useRef(ue)},i.useState=function(ue){return Te.current.useState(ue)},i.useSyncExternalStore=function(ue,he,qe){return Te.current.useSyncExternalStore(ue,he,qe)},i.useTransition=function(){return Te.current.useTransition()},i.version="18.2.0"}),Re=K((i,s)=>{s.exports=A2()}),I2=K(i=>{function s(Te,je){var wt=Te.length;Te.push(je);e:for(;0<wt;){var ue=wt-1>>>1,he=Te[ue];if(0<p(he,je))Te[ue]=je,Te[wt]=he,wt=ue;else break e}}function a(Te){return Te.length===0?null:Te[0]}function c(Te){if(Te.length===0)return null;var je=Te[0],wt=Te.pop();if(wt!==je){Te[0]=wt;e:for(var ue=0,he=Te.length,qe=he>>>1;ue<qe;){var Ze=2*(ue+1)-1,ot=Te[Ze],ze=Ze+1,Zt=Te[ze];if(0>p(ot,wt))ze<he&&0>p(Zt,ot)?(Te[ue]=Zt,Te[ze]=wt,ue=ze):(Te[ue]=ot,Te[Ze]=wt,ue=Ze);else if(ze<he&&0>p(Zt,wt))Te[ue]=Zt,Te[ze]=wt,ue=ze;else break e}}return je}function p(Te,je){var wt=Te.sortIndex-je.sortIndex;return wt!==0?wt:Te.id-je.id}typeof performance=="object"&&typeof performance.now=="function"?(f=performance,i.unstable_now=function(){return f.now()}):(g=Date,y=g.now(),i.unstable_now=function(){return g.now()-y});var f,g,y,w=[],S=[],M=1,R=null,A=3,k=!1,D=!1,O=!1,F=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(Te){for(var je=a(S);je!==null;){if(je.callback===null)c(S);else if(je.startTime<=Te)c(S),je.sortIndex=je.expirationTime,s(w,je);else break;je=a(S)}}function re(Te){if(O=!1,X(Te),!D)if(a(w)!==null)D=!0,Tt(ne);else{var je=a(S);je!==null&&ke(re,je.startTime-Te)}}function ne(Te,je){D=!1,O&&(O=!1,V(fe),fe=-1),k=!0;var wt=A;try{for(X(je),R=a(w);R!==null&&(!(R.expirationTime>je)||Te&&!Qe());){var ue=R.callback;if(typeof ue=="function"){R.callback=null,A=R.priorityLevel;var he=ue(R.expirationTime<=je);je=i.unstable_now(),typeof he=="function"?R.callback=he:R===a(w)&&c(w),X(je)}else c(w);R=a(w)}if(R!==null)var qe=!0;else{var Ze=a(S);Ze!==null&&ke(re,Ze.startTime-je),qe=!1}return qe}finally{R=null,A=wt,k=!1}}var ae=!1,xe=null,fe=-1,ge=5,Ie=-1;function Qe(){return!(i.unstable_now()-Ie<ge)}function le(){if(xe!==null){var Te=i.unstable_now();Ie=Te;var je=!0;try{je=xe(!0,Te)}finally{je?Ae():(ae=!1,xe=null)}}else ae=!1}var Ae;typeof W=="function"?Ae=function(){W(le)}:typeof MessageChannel<"u"?(Y=new MessageChannel,Ue=Y.port2,Y.port1.onmessage=le,Ae=function(){Ue.postMessage(null)}):Ae=function(){F(le,0)};var Y,Ue;function Tt(Te){xe=Te,ae||(ae=!0,Ae())}function ke(Te,je){fe=F(function(){Te(i.unstable_now())},je)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Te){Te.callback=null},i.unstable_continueExecution=function(){D||k||(D=!0,Tt(ne))},i.unstable_forceFrameRate=function(Te){0>Te||125<Te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<Te?Math.floor(1e3/Te):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_getFirstCallbackNode=function(){return a(w)},i.unstable_next=function(Te){switch(A){case 1:case 2:case 3:var je=3;break;default:je=A}var wt=A;A=je;try{return Te()}finally{A=wt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Te,je){switch(Te){case 1:case 2:case 3:case 4:case 5:break;default:Te=3}var wt=A;A=Te;try{return je()}finally{A=wt}},i.unstable_scheduleCallback=function(Te,je,wt){var ue=i.unstable_now();switch(typeof wt=="object"&&wt!==null?(wt=wt.delay,wt=typeof wt=="number"&&0<wt?ue+wt:ue):wt=ue,Te){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=wt+he,Te={id:M++,callback:je,priorityLevel:Te,startTime:wt,expirationTime:he,sortIndex:-1},wt>ue?(Te.sortIndex=wt,s(S,Te),a(w)===null&&Te===a(S)&&(O?(V(fe),fe=-1):O=!0,ke(re,wt-ue))):(Te.sortIndex=he,s(w,Te),D||k||(D=!0,Tt(ne))),Te},i.unstable_shouldYield=Qe,i.unstable_wrapCallback=function(Te){var je=A;return function(){var wt=A;A=je;try{return Te.apply(this,arguments)}finally{A=wt}}}}),fF=K((i,s)=>{s.exports=I2()}),fx=K(i=>{var s=Re(),a=fF();function c(l){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+l,b=1;b<arguments.length;b++)d+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=new Set,f={};function g(l,d){y(l,d),y(l+"Capture",d)}function y(l,d){for(f[l]=d,l=0;l<d.length;l++)p.add(d[l])}var w=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S=Object.prototype.hasOwnProperty,M=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R={},A={};function k(l){return S.call(A,l)?!0:S.call(R,l)?!1:M.test(l)?A[l]=!0:(R[l]=!0,!1)}function D(l,d,b,P){if(b!==null&&b.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return P?!1:b!==null?!b.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function O(l,d,b,P){if(d===null||typeof d>"u"||D(l,d,b,P))return!0;if(P)return!1;if(b!==null)switch(b.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function F(l,d,b,P,B,$,oe){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=P,this.attributeNamespace=B,this.mustUseProperty=b,this.propertyName=l,this.type=d,this.sanitizeURL=$,this.removeEmptyString=oe}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){V[l]=new F(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var d=l[0];V[d]=new F(d,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){V[l]=new F(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){V[l]=new F(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){V[l]=new F(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){V[l]=new F(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){V[l]=new F(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){V[l]=new F(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){V[l]=new F(l,5,!1,l.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function X(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var d=l.replace(W,X);V[d]=new F(d,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var d=l.replace(W,X);V[d]=new F(d,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var d=l.replace(W,X);V[d]=new F(d,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){V[l]=new F(l,1,!1,l.toLowerCase(),null,!1,!1)}),V.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){V[l]=new F(l,1,!1,l.toLowerCase(),null,!0,!0)});function re(l,d,b,P){var B=V.hasOwnProperty(d)?V[d]:null;(B!==null?B.type!==0:P||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(O(d,b,B,P)&&(b=null),P||B===null?k(d)&&(b===null?l.removeAttribute(d):l.setAttribute(d,""+b)):B.mustUseProperty?l[B.propertyName]=b===null?B.type===3?!1:"":b:(d=B.attributeName,P=B.attributeNamespace,b===null?l.removeAttribute(d):(B=B.type,b=B===3||B===4&&b===!0?"":""+b,P?l.setAttributeNS(P,d,b):l.setAttribute(d,b))))}var ne=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=Symbol.for("react.element"),xe=Symbol.for("react.portal"),fe=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),Ie=Symbol.for("react.profiler"),Qe=Symbol.for("react.provider"),le=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),Tt=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),je=Symbol.iterator;function wt(l){return l===null||typeof l!="object"?null:(l=je&&l[je]||l["@@iterator"],typeof l=="function"?l:null)}var ue=Object.assign,he;function qe(l){if(he===void 0)try{throw Error()}catch(b){var d=b.stack.trim().match(/\n( *(at )?)/);he=d&&d[1]||""}return`
`+he+l}var Ze=!1;function ot(l,d){if(!l||Ze)return"";Ze=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ct){var P=ct}Reflect.construct(l,[],d)}else{try{d.call()}catch(ct){P=ct}l.call(d.prototype)}else{try{throw Error()}catch(ct){P=ct}l()}}catch(ct){if(ct&&P&&typeof ct.stack=="string"){for(var B=ct.stack.split(`
`),$=P.stack.split(`
`),oe=B.length-1,Ce=$.length-1;1<=oe&&0<=Ce&&B[oe]!==$[Ce];)Ce--;for(;1<=oe&&0<=Ce;oe--,Ce--)if(B[oe]!==$[Ce]){if(oe!==1||Ce!==1)do if(oe--,Ce--,0>Ce||B[oe]!==$[Ce]){var Oe=`
`+B[oe].replace(" at new "," at ");return l.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",l.displayName)),Oe}while(1<=oe&&0<=Ce);break}}}finally{Ze=!1,Error.prepareStackTrace=b}return(l=l?l.displayName||l.name:"")?qe(l):""}function ze(l){switch(l.tag){case 5:return qe(l.type);case 16:return qe("Lazy");case 13:return qe("Suspense");case 19:return qe("SuspenseList");case 0:case 2:case 15:return l=ot(l.type,!1),l;case 11:return l=ot(l.type.render,!1),l;case 1:return l=ot(l.type,!0),l;default:return""}}function Zt(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case fe:return"Fragment";case xe:return"Portal";case Ie:return"Profiler";case ge:return"StrictMode";case Y:return"Suspense";case Ue:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case le:return(l.displayName||"Context")+".Consumer";case Qe:return(l._context.displayName||"Context")+".Provider";case Ae:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Tt:return d=l.displayName||null,d!==null?d:Zt(l.type)||"Memo";case ke:d=l._payload,l=l._init;try{return Zt(l(d))}catch{}}return null}function bt(l){var d=l.type;switch(l.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=d.render,l=l.displayName||l.name||"",d.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zt(d);case 8:return d===ge?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Kt(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function cn(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function In(l){var d=cn(l)?"checked":"value",b=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),P=""+l[d];if(!l.hasOwnProperty(d)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var B=b.get,$=b.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return B.call(this)},set:function(oe){P=""+oe,$.call(this,oe)}}),Object.defineProperty(l,d,{enumerable:b.enumerable}),{getValue:function(){return P},setValue:function(oe){P=""+oe},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Cn(l){l._valueTracker||(l._valueTracker=In(l))}function Er(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var b=d.getValue(),P="";return l&&(P=cn(l)?l.checked?"true":"false":l.value),l=P,l!==b?(d.setValue(l),!0):!1}function J(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function at(l,d){var b=d.checked;return ue({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??l._wrapperState.initialChecked})}function st(l,d){var b=d.defaultValue==null?"":d.defaultValue,P=d.checked!=null?d.checked:d.defaultChecked;b=Kt(d.value!=null?d.value:b),l._wrapperState={initialChecked:P,initialValue:b,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function we(l,d){d=d.checked,d!=null&&re(l,"checked",d,!1)}function be(l,d){we(l,d);var b=Kt(d.value),P=d.type;if(b!=null)P==="number"?(b===0&&l.value===""||l.value!=b)&&(l.value=""+b):l.value!==""+b&&(l.value=""+b);else if(P==="submit"||P==="reset"){l.removeAttribute("value");return}d.hasOwnProperty("value")?xt(l,d.type,b):d.hasOwnProperty("defaultValue")&&xt(l,d.type,Kt(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(l.defaultChecked=!!d.defaultChecked)}function He(l,d,b){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var P=d.type;if(!(P!=="submit"&&P!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+l._wrapperState.initialValue,b||d===l.value||(l.value=d),l.defaultValue=d}b=l.name,b!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,b!==""&&(l.name=b)}function xt(l,d,b){(d!=="number"||J(l.ownerDocument)!==l)&&(b==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+b&&(l.defaultValue=""+b))}var Ct=Array.isArray;function Xe(l,d,b,P){if(l=l.options,d){d={};for(var B=0;B<b.length;B++)d["$"+b[B]]=!0;for(b=0;b<l.length;b++)B=d.hasOwnProperty("$"+l[b].value),l[b].selected!==B&&(l[b].selected=B),B&&P&&(l[b].defaultSelected=!0)}else{for(b=""+Kt(b),d=null,B=0;B<l.length;B++){if(l[B].value===b){l[B].selected=!0,P&&(l[B].defaultSelected=!0);return}d!==null||l[B].disabled||(d=l[B])}d!==null&&(d.selected=!0)}}function At(l,d){if(d.dangerouslySetInnerHTML!=null)throw Error(c(91));return ue({},d,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Et(l,d){var b=d.value;if(b==null){if(b=d.children,d=d.defaultValue,b!=null){if(d!=null)throw Error(c(92));if(Ct(b)){if(1<b.length)throw Error(c(93));b=b[0]}d=b}d==null&&(d=""),b=d}l._wrapperState={initialValue:Kt(b)}}function Pt(l,d){var b=Kt(d.value),P=Kt(d.defaultValue);b!=null&&(b=""+b,b!==l.value&&(l.value=b),d.defaultValue==null&&l.defaultValue!==b&&(l.defaultValue=b)),P!=null&&(l.defaultValue=""+P)}function _n(l){var d=l.textContent;d===l._wrapperState.initialValue&&d!==""&&d!==null&&(l.value=d)}function gr(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hn(l,d){return l==null||l==="http://www.w3.org/1999/xhtml"?gr(d):l==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Ko,Wp=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,b,P,B){MSApp.execUnsafeLocalFunction(function(){return l(d,b,P,B)})}:l}(function(l,d){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=d;else{for(Ko=Ko||document.createElement("div"),Ko.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Ko.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;d.firstChild;)l.appendChild(d.firstChild)}});function ls(l,d){if(d){var b=l.firstChild;if(b&&b===l.lastChild&&b.nodeType===3){b.nodeValue=d;return}}l.textContent=d}var gu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Pi=["Webkit","ms","Moz","O"];Object.keys(gu).forEach(function(l){Pi.forEach(function(d){d=d+l.charAt(0).toUpperCase()+l.substring(1),gu[d]=gu[l]})});function zv(l,d,b){return d==null||typeof d=="boolean"||d===""?"":b||typeof d!="number"||d===0||gu.hasOwnProperty(l)&&gu[l]?(""+d).trim():d+"px"}function hb(l,d){l=l.style;for(var b in d)if(d.hasOwnProperty(b)){var P=b.indexOf("--")===0,B=zv(b,d[b],P);b==="float"&&(b="cssFloat"),P?l.setProperty(b,B):l[b]=B}}var yu=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pb(l,d){if(d){if(yu[l]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(c(137,l));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(c(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(c(61))}if(d.style!=null&&typeof d.style!="object")throw Error(c(62))}}function cE(l,d){if(l.indexOf("-")===-1)return typeof d.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dE=null;function hE(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var fb=null,bl=null,bu=null;function Fde(l){if(l=OE(l)){if(typeof fb!="function")throw Error(c(280));var d=l.stateNode;d&&(d=hO(d),fb(l.stateNode,l.type,d))}}function Bde(l){bl?bu?bu.push(l):bu=[l]:bl=l}function Ude(){if(bl){var l=bl,d=bu;if(bu=bl=null,Fde(l),d)for(l=0;l<d.length;l++)Fde(d[l])}}function Vde(l,d){return l(d)}function jde(){}var Tj=!1;function zde(l,d,b){if(Tj)return l(d,b);Tj=!0;try{return Vde(l,d,b)}finally{Tj=!1,(bl!==null||bu!==null)&&(jde(),Ude())}}function pE(l,d){var b=l.stateNode;if(b===null)return null;var P=hO(b);if(P===null)return null;b=P[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(l=l.type,P=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!P;break e;default:l=!1}if(l)return null;if(b&&typeof b!="function")throw Error(c(231,d,typeof b));return b}var Mj=!1;if(w)try{mb={},Object.defineProperty(mb,"passive",{get:function(){Mj=!0}}),window.addEventListener("test",mb,mb),window.removeEventListener("test",mb,mb)}catch{Mj=!1}var mb;function AIe(l,d,b,P,B,$,oe,Ce,Oe){var ct=Array.prototype.slice.call(arguments,3);try{d.apply(b,ct)}catch(Rt){this.onError(Rt)}}var fE=!1,jR=null,zR=!1,Aj=null,IIe={onError:function(l){fE=!0,jR=l}};function RIe(l,d,b,P,B,$,oe,Ce,Oe){fE=!1,jR=null,AIe.apply(IIe,arguments)}function OIe(l,d,b,P,B,$,oe,Ce,Oe){if(RIe.apply(this,arguments),fE){if(fE){var ct=jR;fE=!1,jR=null}else throw Error(c(198));zR||(zR=!0,Aj=ct)}}function Hv(l){var d=l,b=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,d.flags&4098&&(b=d.return),l=d.return;while(l)}return d.tag===3?b:null}function Hde(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function Gde(l){if(Hv(l)!==l)throw Error(c(188))}function DIe(l){var d=l.alternate;if(!d){if(d=Hv(l),d===null)throw Error(c(188));return d!==l?null:l}for(var b=l,P=d;;){var B=b.return;if(B===null)break;var $=B.alternate;if($===null){if(P=B.return,P!==null){b=P;continue}break}if(B.child===$.child){for($=B.child;$;){if($===b)return Gde(B),l;if($===P)return Gde(B),d;$=$.sibling}throw Error(c(188))}if(b.return!==P.return)b=B,P=$;else{for(var oe=!1,Ce=B.child;Ce;){if(Ce===b){oe=!0,b=B,P=$;break}if(Ce===P){oe=!0,P=B,b=$;break}Ce=Ce.sibling}if(!oe){for(Ce=$.child;Ce;){if(Ce===b){oe=!0,b=$,P=B;break}if(Ce===P){oe=!0,P=$,b=B;break}Ce=Ce.sibling}if(!oe)throw Error(c(189))}}if(b.alternate!==P)throw Error(c(190))}if(b.tag!==3)throw Error(c(188));return b.stateNode.current===b?l:d}function Wde(l){return l=DIe(l),l!==null?$de(l):null}function $de(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var d=$de(l);if(d!==null)return d;l=l.sibling}return null}var Kde=a.unstable_scheduleCallback,qde=a.unstable_cancelCallback,LIe=a.unstable_shouldYield,NIe=a.unstable_requestPaint,Yi=a.unstable_now,FIe=a.unstable_getCurrentPriorityLevel,Ij=a.unstable_ImmediatePriority,Xde=a.unstable_UserBlockingPriority,HR=a.unstable_NormalPriority,BIe=a.unstable_LowPriority,Yde=a.unstable_IdlePriority,GR=null,Mc=null;function UIe(l){if(Mc&&typeof Mc.onCommitFiberRoot=="function")try{Mc.onCommitFiberRoot(GR,l,void 0,(l.current.flags&128)===128)}catch{}}var _u=Math.clz32?Math.clz32:zIe,VIe=Math.log,jIe=Math.LN2;function zIe(l){return l>>>=0,l===0?32:31-(VIe(l)/jIe|0)|0}var WR=64,$R=4194304;function mE(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function KR(l,d){var b=l.pendingLanes;if(b===0)return 0;var P=0,B=l.suspendedLanes,$=l.pingedLanes,oe=b&268435455;if(oe!==0){var Ce=oe&~B;Ce!==0?P=mE(Ce):($&=oe,$!==0&&(P=mE($)))}else oe=b&~B,oe!==0?P=mE(oe):$!==0&&(P=mE($));if(P===0)return 0;if(d!==0&&d!==P&&!(d&B)&&(B=P&-P,$=d&-d,B>=$||B===16&&($&4194240)!==0))return d;if(P&4&&(P|=b&16),d=l.entangledLanes,d!==0)for(l=l.entanglements,d&=P;0<d;)b=31-_u(d),B=1<<b,P|=l[b],d&=~B;return P}function HIe(l,d){switch(l){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GIe(l,d){for(var b=l.suspendedLanes,P=l.pingedLanes,B=l.expirationTimes,$=l.pendingLanes;0<$;){var oe=31-_u($),Ce=1<<oe,Oe=B[oe];Oe===-1?(!(Ce&b)||Ce&P)&&(B[oe]=HIe(Ce,d)):Oe<=d&&(l.expiredLanes|=Ce),$&=~Ce}}function Rj(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Zde(){var l=WR;return WR<<=1,!(WR&4194240)&&(WR=64),l}function Oj(l){for(var d=[],b=0;31>b;b++)d.push(l);return d}function vE(l,d,b){l.pendingLanes|=d,d!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,d=31-_u(d),l[d]=b}function WIe(l,d){var b=l.pendingLanes&~d;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=d,l.mutableReadLanes&=d,l.entangledLanes&=d,d=l.entanglements;var P=l.eventTimes;for(l=l.expirationTimes;0<b;){var B=31-_u(b),$=1<<B;d[B]=0,P[B]=-1,l[B]=-1,b&=~$}}function Dj(l,d){var b=l.entangledLanes|=d;for(l=l.entanglements;b;){var P=31-_u(b),B=1<<P;B&d|l[P]&d&&(l[P]|=d),b&=~B}}var Vr=0;function Qde(l){return l&=-l,1<l?4<l?l&268435455?16:536870912:4:1}var Jde,Lj,ehe,the,nhe,Nj=!1,qR=[],$p=null,Kp=null,qp=null,gE=new Map,yE=new Map,Xp=[],$Ie="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rhe(l,d){switch(l){case"focusin":case"focusout":$p=null;break;case"dragenter":case"dragleave":Kp=null;break;case"mouseover":case"mouseout":qp=null;break;case"pointerover":case"pointerout":gE.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":yE.delete(d.pointerId)}}function bE(l,d,b,P,B,$){return l===null||l.nativeEvent!==$?(l={blockedOn:d,domEventName:b,eventSystemFlags:P,nativeEvent:$,targetContainers:[B]},d!==null&&(d=OE(d),d!==null&&Lj(d)),l):(l.eventSystemFlags|=P,d=l.targetContainers,B!==null&&d.indexOf(B)===-1&&d.push(B),l)}function KIe(l,d,b,P,B){switch(d){case"focusin":return $p=bE($p,l,d,b,P,B),!0;case"dragenter":return Kp=bE(Kp,l,d,b,P,B),!0;case"mouseover":return qp=bE(qp,l,d,b,P,B),!0;case"pointerover":var $=B.pointerId;return gE.set($,bE(gE.get($)||null,l,d,b,P,B)),!0;case"gotpointercapture":return $=B.pointerId,yE.set($,bE(yE.get($)||null,l,d,b,P,B)),!0}return!1}function ihe(l){var d=Gv(l.target);if(d!==null){var b=Hv(d);if(b!==null){if(d=b.tag,d===13){if(d=Hde(b),d!==null){l.blockedOn=d,nhe(l.priority,function(){ehe(b)});return}}else if(d===3&&b.stateNode.current.memoizedState.isDehydrated){l.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}l.blockedOn=null}function XR(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var b=Bj(l.domEventName,l.eventSystemFlags,d[0],l.nativeEvent);if(b===null){b=l.nativeEvent;var P=new b.constructor(b.type,b);dE=P,b.target.dispatchEvent(P),dE=null}else return d=OE(b),d!==null&&Lj(d),l.blockedOn=b,!1;d.shift()}return!0}function ohe(l,d,b){XR(l)&&b.delete(d)}function qIe(){Nj=!1,$p!==null&&XR($p)&&($p=null),Kp!==null&&XR(Kp)&&(Kp=null),qp!==null&&XR(qp)&&(qp=null),gE.forEach(ohe),yE.forEach(ohe)}function _E(l,d){l.blockedOn===d&&(l.blockedOn=null,Nj||(Nj=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,qIe)))}function wE(l){function d(B){return _E(B,l)}if(0<qR.length){_E(qR[0],l);for(var b=1;b<qR.length;b++){var P=qR[b];P.blockedOn===l&&(P.blockedOn=null)}}for($p!==null&&_E($p,l),Kp!==null&&_E(Kp,l),qp!==null&&_E(qp,l),gE.forEach(d),yE.forEach(d),b=0;b<Xp.length;b++)P=Xp[b],P.blockedOn===l&&(P.blockedOn=null);for(;0<Xp.length&&(b=Xp[0],b.blockedOn===null);)ihe(b),b.blockedOn===null&&Xp.shift()}var vb=ne.ReactCurrentBatchConfig,YR=!0;function XIe(l,d,b,P){var B=Vr,$=vb.transition;vb.transition=null;try{Vr=1,Fj(l,d,b,P)}finally{Vr=B,vb.transition=$}}function YIe(l,d,b,P){var B=Vr,$=vb.transition;vb.transition=null;try{Vr=4,Fj(l,d,b,P)}finally{Vr=B,vb.transition=$}}function Fj(l,d,b,P){if(YR){var B=Bj(l,d,b,P);if(B===null)Jj(l,d,P,ZR,b),rhe(l,P);else if(KIe(B,l,d,b,P))P.stopPropagation();else if(rhe(l,P),d&4&&-1<$Ie.indexOf(l)){for(;B!==null;){var $=OE(B);if($!==null&&Jde($),$=Bj(l,d,b,P),$===null&&Jj(l,d,P,ZR,b),$===B)break;B=$}B!==null&&P.stopPropagation()}else Jj(l,d,P,null,b)}}var ZR=null;function Bj(l,d,b,P){if(ZR=null,l=hE(P),l=Gv(l),l!==null)if(d=Hv(l),d===null)l=null;else if(b=d.tag,b===13){if(l=Hde(d),l!==null)return l;l=null}else if(b===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null);return ZR=l,null}function she(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FIe()){case Ij:return 1;case Xde:return 4;case HR:case BIe:return 16;case Yde:return 536870912;default:return 16}default:return 16}}var Yp=null,Uj=null,QR=null;function ahe(){if(QR)return QR;var l,d=Uj,b=d.length,P,B="value"in Yp?Yp.value:Yp.textContent,$=B.length;for(l=0;l<b&&d[l]===B[l];l++);var oe=b-l;for(P=1;P<=oe&&d[b-P]===B[$-P];P++);return QR=B.slice(l,1<P?1-P:void 0)}function JR(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function eO(){return!0}function lhe(){return!1}function Aa(l){function d(b,P,B,$,oe){this._reactName=b,this._targetInst=B,this.type=P,this.nativeEvent=$,this.target=oe,this.currentTarget=null;for(var Ce in l)l.hasOwnProperty(Ce)&&(b=l[Ce],this[Ce]=b?b($):$[Ce]);return this.isDefaultPrevented=($.defaultPrevented!=null?$.defaultPrevented:$.returnValue===!1)?eO:lhe,this.isPropagationStopped=lhe,this}return ue(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=eO)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=eO)},persist:function(){},isPersistent:eO}),d}var gb={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vj=Aa(gb),xE=ue({},gb,{view:0,detail:0}),ZIe=Aa(xE),jj,zj,SE,tO=ue({},xE,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gj,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==SE&&(SE&&l.type==="mousemove"?(jj=l.screenX-SE.screenX,zj=l.screenY-SE.screenY):zj=jj=0,SE=l),jj)},movementY:function(l){return"movementY"in l?l.movementY:zj}}),uhe=Aa(tO),QIe=ue({},tO,{dataTransfer:0}),JIe=Aa(QIe),eRe=ue({},xE,{relatedTarget:0}),Hj=Aa(eRe),tRe=ue({},gb,{animationName:0,elapsedTime:0,pseudoElement:0}),nRe=Aa(tRe),rRe=ue({},gb,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),iRe=Aa(rRe),oRe=ue({},gb,{data:0}),che=Aa(oRe),sRe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aRe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lRe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uRe(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=lRe[l])?!!d[l]:!1}function Gj(){return uRe}var cRe=ue({},xE,{key:function(l){if(l.key){var d=sRe[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=JR(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?aRe[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gj,charCode:function(l){return l.type==="keypress"?JR(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?JR(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),dRe=Aa(cRe),hRe=ue({},tO,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dhe=Aa(hRe),pRe=ue({},xE,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gj}),fRe=Aa(pRe),mRe=ue({},gb,{propertyName:0,elapsedTime:0,pseudoElement:0}),vRe=Aa(mRe),gRe=ue({},tO,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),yRe=Aa(gRe),bRe=[9,13,27,32],Wj=w&&"CompositionEvent"in window,EE=null;w&&"documentMode"in document&&(EE=document.documentMode);var _Re=w&&"TextEvent"in window&&!EE,hhe=w&&(!Wj||EE&&8<EE&&11>=EE),phe=String.fromCharCode(32),fhe=!1;function mhe(l,d){switch(l){case"keyup":return bRe.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vhe(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var yb=!1;function wRe(l,d){switch(l){case"compositionend":return vhe(d);case"keypress":return d.which!==32?null:(fhe=!0,phe);case"textInput":return l=d.data,l===phe&&fhe?null:l;default:return null}}function xRe(l,d){if(yb)return l==="compositionend"||!Wj&&mhe(l,d)?(l=ahe(),QR=Uj=Yp=null,yb=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return hhe&&d.locale!=="ko"?null:d.data;default:return null}}var SRe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ghe(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!SRe[l.type]:d==="textarea"}function yhe(l,d,b,P){Bde(P),d=uO(d,"onChange"),0<d.length&&(b=new Vj("onChange","change",null,b,P),l.push({event:b,listeners:d}))}var CE=null,PE=null;function ERe(l){Fhe(l,0)}function nO(l){var d=Sb(l);if(Er(d))return l}function CRe(l,d){if(l==="change")return d}var bhe=!1;w&&(w?(rO="oninput"in document,rO||(Kj=document.createElement("div"),Kj.setAttribute("oninput","return;"),rO=typeof Kj.oninput=="function"),$j=rO):$j=!1,bhe=$j&&(!document.documentMode||9<document.documentMode));var $j,rO,Kj;function _he(){CE&&(CE.detachEvent("onpropertychange",whe),PE=CE=null)}function whe(l){if(l.propertyName==="value"&&nO(PE)){var d=[];yhe(d,PE,l,hE(l)),zde(ERe,d)}}function PRe(l,d,b){l==="focusin"?(_he(),CE=d,PE=b,CE.attachEvent("onpropertychange",whe)):l==="focusout"&&_he()}function kRe(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return nO(PE)}function TRe(l,d){if(l==="click")return nO(d)}function MRe(l,d){if(l==="input"||l==="change")return nO(d)}function ARe(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var wu=typeof Object.is=="function"?Object.is:ARe;function kE(l,d){if(wu(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var b=Object.keys(l),P=Object.keys(d);if(b.length!==P.length)return!1;for(P=0;P<b.length;P++){var B=b[P];if(!S.call(d,B)||!wu(l[B],d[B]))return!1}return!0}function xhe(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function She(l,d){var b=xhe(l);l=0;for(var P;b;){if(b.nodeType===3){if(P=l+b.textContent.length,l<=d&&P>=d)return{node:b,offset:d-l};l=P}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=xhe(b)}}function Ehe(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?Ehe(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function Che(){for(var l=window,d=J();d instanceof l.HTMLIFrameElement;){try{var b=typeof d.contentWindow.location.href=="string"}catch{b=!1}if(b)l=d.contentWindow;else break;d=J(l.document)}return d}function qj(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}function IRe(l){var d=Che(),b=l.focusedElem,P=l.selectionRange;if(d!==b&&b&&b.ownerDocument&&Ehe(b.ownerDocument.documentElement,b)){if(P!==null&&qj(b)){if(d=P.start,l=P.end,l===void 0&&(l=d),"selectionStart"in b)b.selectionStart=d,b.selectionEnd=Math.min(l,b.value.length);else if(l=(d=b.ownerDocument||document)&&d.defaultView||window,l.getSelection){l=l.getSelection();var B=b.textContent.length,$=Math.min(P.start,B);P=P.end===void 0?$:Math.min(P.end,B),!l.extend&&$>P&&(B=P,P=$,$=B),B=She(b,$);var oe=She(b,P);B&&oe&&(l.rangeCount!==1||l.anchorNode!==B.node||l.anchorOffset!==B.offset||l.focusNode!==oe.node||l.focusOffset!==oe.offset)&&(d=d.createRange(),d.setStart(B.node,B.offset),l.removeAllRanges(),$>P?(l.addRange(d),l.extend(oe.node,oe.offset)):(d.setEnd(oe.node,oe.offset),l.addRange(d)))}}for(d=[],l=b;l=l.parentNode;)l.nodeType===1&&d.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<d.length;b++)l=d[b],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var RRe=w&&"documentMode"in document&&11>=document.documentMode,bb=null,Xj=null,TE=null,Yj=!1;function Phe(l,d,b){var P=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Yj||bb==null||bb!==J(P)||(P=bb,"selectionStart"in P&&qj(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),TE&&kE(TE,P)||(TE=P,P=uO(Xj,"onSelect"),0<P.length&&(d=new Vj("onSelect","select",null,d,b),l.push({event:d,listeners:P}),d.target=bb)))}function iO(l,d){var b={};return b[l.toLowerCase()]=d.toLowerCase(),b["Webkit"+l]="webkit"+d,b["Moz"+l]="moz"+d,b}var _b={animationend:iO("Animation","AnimationEnd"),animationiteration:iO("Animation","AnimationIteration"),animationstart:iO("Animation","AnimationStart"),transitionend:iO("Transition","TransitionEnd")},Zj={},khe={};w&&(khe=document.createElement("div").style,"AnimationEvent"in window||(delete _b.animationend.animation,delete _b.animationiteration.animation,delete _b.animationstart.animation),"TransitionEvent"in window||delete _b.transitionend.transition);function oO(l){if(Zj[l])return Zj[l];if(!_b[l])return l;var d=_b[l],b;for(b in d)if(d.hasOwnProperty(b)&&b in khe)return Zj[l]=d[b];return l}var The=oO("animationend"),Mhe=oO("animationiteration"),Ahe=oO("animationstart"),Ihe=oO("transitionend"),Rhe=new Map,Ohe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zp(l,d){Rhe.set(l,d),g(d,[l])}for(aO=0;aO<Ohe.length;aO++)sO=Ohe[aO],Dhe=sO.toLowerCase(),Lhe=sO[0].toUpperCase()+sO.slice(1),Zp(Dhe,"on"+Lhe);var sO,Dhe,Lhe,aO;Zp(The,"onAnimationEnd"),Zp(Mhe,"onAnimationIteration"),Zp(Ahe,"onAnimationStart"),Zp("dblclick","onDoubleClick"),Zp("focusin","onFocus"),Zp("focusout","onBlur"),Zp(Ihe,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ME="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ORe=new Set("cancel close invalid load scroll toggle".split(" ").concat(ME));function Nhe(l,d,b){var P=l.type||"unknown-event";l.currentTarget=b,OIe(P,d,void 0,l),l.currentTarget=null}function Fhe(l,d){d=(d&4)!==0;for(var b=0;b<l.length;b++){var P=l[b],B=P.event;P=P.listeners;e:{var $=void 0;if(d)for(var oe=P.length-1;0<=oe;oe--){var Ce=P[oe],Oe=Ce.instance,ct=Ce.currentTarget;if(Ce=Ce.listener,Oe!==$&&B.isPropagationStopped())break e;Nhe(B,Ce,ct),$=Oe}else for(oe=0;oe<P.length;oe++){if(Ce=P[oe],Oe=Ce.instance,ct=Ce.currentTarget,Ce=Ce.listener,Oe!==$&&B.isPropagationStopped())break e;Nhe(B,Ce,ct),$=Oe}}}if(zR)throw l=Aj,zR=!1,Aj=null,l}function fi(l,d){var b=d[oz];b===void 0&&(b=d[oz]=new Set);var P=l+"__bubble";b.has(P)||(Bhe(d,l,2,!1),b.add(P))}function Qj(l,d,b){var P=0;d&&(P|=4),Bhe(b,l,P,d)}var lO="_reactListening"+Math.random().toString(36).slice(2);function AE(l){if(!l[lO]){l[lO]=!0,p.forEach(function(b){b!=="selectionchange"&&(ORe.has(b)||Qj(b,!1,l),Qj(b,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[lO]||(d[lO]=!0,Qj("selectionchange",!1,d))}}function Bhe(l,d,b,P){switch(she(d)){case 1:var B=XIe;break;case 4:B=YIe;break;default:B=Fj}b=B.bind(null,d,b,l),B=void 0,!Mj||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(B=!0),P?B!==void 0?l.addEventListener(d,b,{capture:!0,passive:B}):l.addEventListener(d,b,!0):B!==void 0?l.addEventListener(d,b,{passive:B}):l.addEventListener(d,b,!1)}function Jj(l,d,b,P,B){var $=P;if(!(d&1)&&!(d&2)&&P!==null)e:for(;;){if(P===null)return;var oe=P.tag;if(oe===3||oe===4){var Ce=P.stateNode.containerInfo;if(Ce===B||Ce.nodeType===8&&Ce.parentNode===B)break;if(oe===4)for(oe=P.return;oe!==null;){var Oe=oe.tag;if((Oe===3||Oe===4)&&(Oe=oe.stateNode.containerInfo,Oe===B||Oe.nodeType===8&&Oe.parentNode===B))return;oe=oe.return}for(;Ce!==null;){if(oe=Gv(Ce),oe===null)return;if(Oe=oe.tag,Oe===5||Oe===6){P=$=oe;continue e}Ce=Ce.parentNode}}P=P.return}zde(function(){var ct=$,Rt=hE(b),Nt=[];e:{var It=Rhe.get(l);if(It!==void 0){var nn=Vj,dn=l;switch(l){case"keypress":if(JR(b)===0)break e;case"keydown":case"keyup":nn=dRe;break;case"focusin":dn="focus",nn=Hj;break;case"focusout":dn="blur",nn=Hj;break;case"beforeblur":case"afterblur":nn=Hj;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nn=uhe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nn=JIe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nn=fRe;break;case The:case Mhe:case Ahe:nn=nRe;break;case Ihe:nn=vRe;break;case"scroll":nn=ZIe;break;case"wheel":nn=yRe;break;case"copy":case"cut":case"paste":nn=iRe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nn=dhe}var fn=(d&4)!==0,Zi=!fn&&l==="scroll",Ye=fn?It!==null?It+"Capture":null:It;fn=[];for(var Ve=ct,rt;Ve!==null;){rt=Ve;var zt=rt.stateNode;if(rt.tag===5&&zt!==null&&(rt=zt,Ye!==null&&(zt=pE(Ve,Ye),zt!=null&&fn.push(IE(Ve,zt,rt)))),Zi)break;Ve=Ve.return}0<fn.length&&(It=new nn(It,dn,null,b,Rt),Nt.push({event:It,listeners:fn}))}}if(!(d&7)){e:{if(It=l==="mouseover"||l==="pointerover",nn=l==="mouseout"||l==="pointerout",It&&b!==dE&&(dn=b.relatedTarget||b.fromElement)&&(Gv(dn)||dn[Xd]))break e;if((nn||It)&&(It=Rt.window===Rt?Rt:(It=Rt.ownerDocument)?It.defaultView||It.parentWindow:window,nn?(dn=b.relatedTarget||b.toElement,nn=ct,dn=dn?Gv(dn):null,dn!==null&&(Zi=Hv(dn),dn!==Zi||dn.tag!==5&&dn.tag!==6)&&(dn=null)):(nn=null,dn=ct),nn!==dn)){if(fn=uhe,zt="onMouseLeave",Ye="onMouseEnter",Ve="mouse",(l==="pointerout"||l==="pointerover")&&(fn=dhe,zt="onPointerLeave",Ye="onPointerEnter",Ve="pointer"),Zi=nn==null?It:Sb(nn),rt=dn==null?It:Sb(dn),It=new fn(zt,Ve+"leave",nn,b,Rt),It.target=Zi,It.relatedTarget=rt,zt=null,Gv(Rt)===ct&&(fn=new fn(Ye,Ve+"enter",dn,b,Rt),fn.target=rt,fn.relatedTarget=Zi,zt=fn),Zi=zt,nn&&dn)t:{for(fn=nn,Ye=dn,Ve=0,rt=fn;rt;rt=wb(rt))Ve++;for(rt=0,zt=Ye;zt;zt=wb(zt))rt++;for(;0<Ve-rt;)fn=wb(fn),Ve--;for(;0<rt-Ve;)Ye=wb(Ye),rt--;for(;Ve--;){if(fn===Ye||Ye!==null&&fn===Ye.alternate)break t;fn=wb(fn),Ye=wb(Ye)}fn=null}else fn=null;nn!==null&&Uhe(Nt,It,nn,fn,!1),dn!==null&&Zi!==null&&Uhe(Nt,Zi,dn,fn,!0)}}e:{if(It=ct?Sb(ct):window,nn=It.nodeName&&It.nodeName.toLowerCase(),nn==="select"||nn==="input"&&It.type==="file")var vn=CRe;else if(ghe(It))if(bhe)vn=MRe;else{vn=kRe;var On=PRe}else(nn=It.nodeName)&&nn.toLowerCase()==="input"&&(It.type==="checkbox"||It.type==="radio")&&(vn=TRe);if(vn&&(vn=vn(l,ct))){yhe(Nt,vn,b,Rt);break e}On&&On(l,It,ct),l==="focusout"&&(On=It._wrapperState)&&On.controlled&&It.type==="number"&&xt(It,"number",It.value)}switch(On=ct?Sb(ct):window,l){case"focusin":(ghe(On)||On.contentEditable==="true")&&(bb=On,Xj=ct,TE=null);break;case"focusout":TE=Xj=bb=null;break;case"mousedown":Yj=!0;break;case"contextmenu":case"mouseup":case"dragend":Yj=!1,Phe(Nt,b,Rt);break;case"selectionchange":if(RRe)break;case"keydown":case"keyup":Phe(Nt,b,Rt)}var Dn;if(Wj)e:{switch(l){case"compositionstart":var Gn="onCompositionStart";break e;case"compositionend":Gn="onCompositionEnd";break e;case"compositionupdate":Gn="onCompositionUpdate";break e}Gn=void 0}else yb?mhe(l,b)&&(Gn="onCompositionEnd"):l==="keydown"&&b.keyCode===229&&(Gn="onCompositionStart");Gn&&(hhe&&b.locale!=="ko"&&(yb||Gn!=="onCompositionStart"?Gn==="onCompositionEnd"&&yb&&(Dn=ahe()):(Yp=Rt,Uj="value"in Yp?Yp.value:Yp.textContent,yb=!0)),On=uO(ct,Gn),0<On.length&&(Gn=new che(Gn,l,null,b,Rt),Nt.push({event:Gn,listeners:On}),Dn?Gn.data=Dn:(Dn=vhe(b),Dn!==null&&(Gn.data=Dn)))),(Dn=_Re?wRe(l,b):xRe(l,b))&&(ct=uO(ct,"onBeforeInput"),0<ct.length&&(Rt=new che("onBeforeInput","beforeinput",null,b,Rt),Nt.push({event:Rt,listeners:ct}),Rt.data=Dn))}Fhe(Nt,d)})}function IE(l,d,b){return{instance:l,listener:d,currentTarget:b}}function uO(l,d){for(var b=d+"Capture",P=[];l!==null;){var B=l,$=B.stateNode;B.tag===5&&$!==null&&(B=$,$=pE(l,b),$!=null&&P.unshift(IE(l,$,B)),$=pE(l,d),$!=null&&P.push(IE(l,$,B))),l=l.return}return P}function wb(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Uhe(l,d,b,P,B){for(var $=d._reactName,oe=[];b!==null&&b!==P;){var Ce=b,Oe=Ce.alternate,ct=Ce.stateNode;if(Oe!==null&&Oe===P)break;Ce.tag===5&&ct!==null&&(Ce=ct,B?(Oe=pE(b,$),Oe!=null&&oe.unshift(IE(b,Oe,Ce))):B||(Oe=pE(b,$),Oe!=null&&oe.push(IE(b,Oe,Ce)))),b=b.return}oe.length!==0&&l.push({event:d,listeners:oe})}var DRe=/\r\n?/g,LRe=/\u0000|\uFFFD/g;function Vhe(l){return(typeof l=="string"?l:""+l).replace(DRe,`
`).replace(LRe,"")}function cO(l,d,b){if(d=Vhe(d),Vhe(l)!==d&&b)throw Error(c(425))}function dO(){}var ez=null,tz=null;function nz(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var rz=typeof setTimeout=="function"?setTimeout:void 0,NRe=typeof clearTimeout=="function"?clearTimeout:void 0,jhe=typeof Promise=="function"?Promise:void 0,FRe=typeof queueMicrotask=="function"?queueMicrotask:typeof jhe<"u"?function(l){return jhe.resolve(null).then(l).catch(BRe)}:rz;function BRe(l){setTimeout(function(){throw l})}function iz(l,d){var b=d,P=0;do{var B=b.nextSibling;if(l.removeChild(b),B&&B.nodeType===8)if(b=B.data,b==="/$"){if(P===0){l.removeChild(B),wE(d);return}P--}else b!=="$"&&b!=="$?"&&b!=="$!"||P++;b=B}while(b);wE(d)}function Qp(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return l}function zhe(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var b=l.data;if(b==="$"||b==="$!"||b==="$?"){if(d===0)return l;d--}else b==="/$"&&d++}l=l.previousSibling}return null}var xb=Math.random().toString(36).slice(2),Ac="__reactFiber$"+xb,RE="__reactProps$"+xb,Xd="__reactContainer$"+xb,oz="__reactEvents$"+xb,URe="__reactListeners$"+xb,VRe="__reactHandles$"+xb;function Gv(l){var d=l[Ac];if(d)return d;for(var b=l.parentNode;b;){if(d=b[Xd]||b[Ac]){if(b=d.alternate,d.child!==null||b!==null&&b.child!==null)for(l=zhe(l);l!==null;){if(b=l[Ac])return b;l=zhe(l)}return d}l=b,b=l.parentNode}return null}function OE(l){return l=l[Ac]||l[Xd],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function Sb(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(c(33))}function hO(l){return l[RE]||null}var sz=[],Eb=-1;function Jp(l){return{current:l}}function mi(l){0>Eb||(l.current=sz[Eb],sz[Eb]=null,Eb--)}function oi(l,d){Eb++,sz[Eb]=l.current,l.current=d}var ef={},us=Jp(ef),sa=Jp(!1),Wv=ef;function Cb(l,d){var b=l.type.contextTypes;if(!b)return ef;var P=l.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===d)return P.__reactInternalMemoizedMaskedChildContext;var B={},$;for($ in b)B[$]=d[$];return P&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=d,l.__reactInternalMemoizedMaskedChildContext=B),B}function aa(l){return l=l.childContextTypes,l!=null}function pO(){mi(sa),mi(us)}function Hhe(l,d,b){if(us.current!==ef)throw Error(c(168));oi(us,d),oi(sa,b)}function Ghe(l,d,b){var P=l.stateNode;if(d=d.childContextTypes,typeof P.getChildContext!="function")return b;P=P.getChildContext();for(var B in P)if(!(B in d))throw Error(c(108,bt(l)||"Unknown",B));return ue({},b,P)}function fO(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||ef,Wv=us.current,oi(us,l),oi(sa,sa.current),!0}function Whe(l,d,b){var P=l.stateNode;if(!P)throw Error(c(169));b?(l=Ghe(l,d,Wv),P.__reactInternalMemoizedMergedChildContext=l,mi(sa),mi(us),oi(us,l)):mi(sa),oi(sa,b)}var Yd=null,mO=!1,az=!1;function $he(l){Yd===null?Yd=[l]:Yd.push(l)}function jRe(l){mO=!0,$he(l)}function tf(){if(!az&&Yd!==null){az=!0;var l=0,d=Vr;try{var b=Yd;for(Vr=1;l<b.length;l++){var P=b[l];do P=P(!0);while(P!==null)}Yd=null,mO=!1}catch(B){throw Yd!==null&&(Yd=Yd.slice(l+1)),Kde(Ij,tf),B}finally{Vr=d,az=!1}}return null}var Pb=[],kb=0,vO=null,gO=0,_l=[],wl=0,$v=null,Zd=1,Qd="";function Kv(l,d){Pb[kb++]=gO,Pb[kb++]=vO,vO=l,gO=d}function Khe(l,d,b){_l[wl++]=Zd,_l[wl++]=Qd,_l[wl++]=$v,$v=l;var P=Zd;l=Qd;var B=32-_u(P)-1;P&=~(1<<B),b+=1;var $=32-_u(d)+B;if(30<$){var oe=B-B%5;$=(P&(1<<oe)-1).toString(32),P>>=oe,B-=oe,Zd=1<<32-_u(d)+B|b<<B|P,Qd=$+l}else Zd=1<<$|b<<B|P,Qd=l}function lz(l){l.return!==null&&(Kv(l,1),Khe(l,1,0))}function uz(l){for(;l===vO;)vO=Pb[--kb],Pb[kb]=null,gO=Pb[--kb],Pb[kb]=null;for(;l===$v;)$v=_l[--wl],_l[wl]=null,Qd=_l[--wl],_l[wl]=null,Zd=_l[--wl],_l[wl]=null}var Ia=null,Ra=null,yi=!1,xu=null;function qhe(l,d){var b=Cl(5,null,null,0);b.elementType="DELETED",b.stateNode=d,b.return=l,d=l.deletions,d===null?(l.deletions=[b],l.flags|=16):d.push(b)}function Xhe(l,d){switch(l.tag){case 5:var b=l.type;return d=d.nodeType!==1||b.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(l.stateNode=d,Ia=l,Ra=Qp(d.firstChild),!0):!1;case 6:return d=l.pendingProps===""||d.nodeType!==3?null:d,d!==null?(l.stateNode=d,Ia=l,Ra=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(b=$v!==null?{id:Zd,overflow:Qd}:null,l.memoizedState={dehydrated:d,treeContext:b,retryLane:1073741824},b=Cl(18,null,null,0),b.stateNode=d,b.return=l,l.child=b,Ia=l,Ra=null,!0):!1;default:return!1}}function cz(l){return(l.mode&1)!==0&&(l.flags&128)===0}function dz(l){if(yi){var d=Ra;if(d){var b=d;if(!Xhe(l,d)){if(cz(l))throw Error(c(418));d=Qp(b.nextSibling);var P=Ia;d&&Xhe(l,d)?qhe(P,b):(l.flags=l.flags&-4097|2,yi=!1,Ia=l)}}else{if(cz(l))throw Error(c(418));l.flags=l.flags&-4097|2,yi=!1,Ia=l}}}function Yhe(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Ia=l}function yO(l){if(l!==Ia)return!1;if(!yi)return Yhe(l),yi=!0,!1;var d;if((d=l.tag!==3)&&!(d=l.tag!==5)&&(d=l.type,d=d!=="head"&&d!=="body"&&!nz(l.type,l.memoizedProps)),d&&(d=Ra)){if(cz(l))throw Zhe(),Error(c(418));for(;d;)qhe(l,d),d=Qp(d.nextSibling)}if(Yhe(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(c(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8){var b=l.data;if(b==="/$"){if(d===0){Ra=Qp(l.nextSibling);break e}d--}else b!=="$"&&b!=="$!"&&b!=="$?"||d++}l=l.nextSibling}Ra=null}}else Ra=Ia?Qp(l.stateNode.nextSibling):null;return!0}function Zhe(){for(var l=Ra;l;)l=Qp(l.nextSibling)}function Tb(){Ra=Ia=null,yi=!1}function hz(l){xu===null?xu=[l]:xu.push(l)}var zRe=ne.ReactCurrentBatchConfig;function Su(l,d){if(l&&l.defaultProps){d=ue({},d),l=l.defaultProps;for(var b in l)d[b]===void 0&&(d[b]=l[b]);return d}return d}var bO=Jp(null),_O=null,Mb=null,pz=null;function fz(){pz=Mb=_O=null}function mz(l){var d=bO.current;mi(bO),l._currentValue=d}function vz(l,d,b){for(;l!==null;){var P=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,P!==null&&(P.childLanes|=d)):P!==null&&(P.childLanes&d)!==d&&(P.childLanes|=d),l===b)break;l=l.return}}function Ab(l,d){_O=l,pz=Mb=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&d&&(la=!0),l.firstContext=null)}function xl(l){var d=l._currentValue;if(pz!==l)if(l={context:l,memoizedValue:d,next:null},Mb===null){if(_O===null)throw Error(c(308));Mb=l,_O.dependencies={lanes:0,firstContext:l}}else Mb=Mb.next=l;return d}var qv=null;function gz(l){qv===null?qv=[l]:qv.push(l)}function Qhe(l,d,b,P){var B=d.interleaved;return B===null?(b.next=b,gz(d)):(b.next=B.next,B.next=b),d.interleaved=b,Jd(l,P)}function Jd(l,d){l.lanes|=d;var b=l.alternate;for(b!==null&&(b.lanes|=d),b=l,l=l.return;l!==null;)l.childLanes|=d,b=l.alternate,b!==null&&(b.childLanes|=d),b=l,l=l.return;return b.tag===3?b.stateNode:null}var nf=!1;function yz(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jhe(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function eh(l,d){return{eventTime:l,lane:d,tag:0,payload:null,callback:null,next:null}}function rf(l,d,b){var P=l.updateQueue;if(P===null)return null;if(P=P.shared,yr&2){var B=P.pending;return B===null?d.next=d:(d.next=B.next,B.next=d),P.pending=d,Jd(l,b)}return B=P.interleaved,B===null?(d.next=d,gz(P)):(d.next=B.next,B.next=d),P.interleaved=d,Jd(l,b)}function wO(l,d,b){if(d=d.updateQueue,d!==null&&(d=d.shared,(b&4194240)!==0)){var P=d.lanes;P&=l.pendingLanes,b|=P,d.lanes=b,Dj(l,b)}}function epe(l,d){var b=l.updateQueue,P=l.alternate;if(P!==null&&(P=P.updateQueue,b===P)){var B=null,$=null;if(b=b.firstBaseUpdate,b!==null){do{var oe={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};$===null?B=$=oe:$=$.next=oe,b=b.next}while(b!==null);$===null?B=$=d:$=$.next=d}else B=$=d;b={baseState:P.baseState,firstBaseUpdate:B,lastBaseUpdate:$,shared:P.shared,effects:P.effects},l.updateQueue=b;return}l=b.lastBaseUpdate,l===null?b.firstBaseUpdate=d:l.next=d,b.lastBaseUpdate=d}function xO(l,d,b,P){var B=l.updateQueue;nf=!1;var $=B.firstBaseUpdate,oe=B.lastBaseUpdate,Ce=B.shared.pending;if(Ce!==null){B.shared.pending=null;var Oe=Ce,ct=Oe.next;Oe.next=null,oe===null?$=ct:oe.next=ct,oe=Oe;var Rt=l.alternate;Rt!==null&&(Rt=Rt.updateQueue,Ce=Rt.lastBaseUpdate,Ce!==oe&&(Ce===null?Rt.firstBaseUpdate=ct:Ce.next=ct,Rt.lastBaseUpdate=Oe))}if($!==null){var Nt=B.baseState;oe=0,Rt=ct=Oe=null,Ce=$;do{var It=Ce.lane,nn=Ce.eventTime;if((P&It)===It){Rt!==null&&(Rt=Rt.next={eventTime:nn,lane:0,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null});e:{var dn=l,fn=Ce;switch(It=d,nn=b,fn.tag){case 1:if(dn=fn.payload,typeof dn=="function"){Nt=dn.call(nn,Nt,It);break e}Nt=dn;break e;case 3:dn.flags=dn.flags&-65537|128;case 0:if(dn=fn.payload,It=typeof dn=="function"?dn.call(nn,Nt,It):dn,It==null)break e;Nt=ue({},Nt,It);break e;case 2:nf=!0}}Ce.callback!==null&&Ce.lane!==0&&(l.flags|=64,It=B.effects,It===null?B.effects=[Ce]:It.push(Ce))}else nn={eventTime:nn,lane:It,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},Rt===null?(ct=Rt=nn,Oe=Nt):Rt=Rt.next=nn,oe|=It;if(Ce=Ce.next,Ce===null){if(Ce=B.shared.pending,Ce===null)break;It=Ce,Ce=It.next,It.next=null,B.lastBaseUpdate=It,B.shared.pending=null}}while(1);if(Rt===null&&(Oe=Nt),B.baseState=Oe,B.firstBaseUpdate=ct,B.lastBaseUpdate=Rt,d=B.shared.interleaved,d!==null){B=d;do oe|=B.lane,B=B.next;while(B!==d)}else $===null&&(B.shared.lanes=0);Zv|=oe,l.lanes=oe,l.memoizedState=Nt}}function tpe(l,d,b){if(l=d.effects,d.effects=null,l!==null)for(d=0;d<l.length;d++){var P=l[d],B=P.callback;if(B!==null){if(P.callback=null,P=b,typeof B!="function")throw Error(c(191,B));B.call(P)}}}var npe=new s.Component().refs;function bz(l,d,b,P){d=l.memoizedState,b=b(P,d),b=b==null?d:ue({},d,b),l.memoizedState=b,l.lanes===0&&(l.updateQueue.baseState=b)}var SO={isMounted:function(l){return(l=l._reactInternals)?Hv(l)===l:!1},enqueueSetState:function(l,d,b){l=l._reactInternals;var P=Fs(),B=lf(l),$=eh(P,B);$.payload=d,b!=null&&($.callback=b),d=rf(l,$,B),d!==null&&(Pu(d,l,B,P),wO(d,l,B))},enqueueReplaceState:function(l,d,b){l=l._reactInternals;var P=Fs(),B=lf(l),$=eh(P,B);$.tag=1,$.payload=d,b!=null&&($.callback=b),d=rf(l,$,B),d!==null&&(Pu(d,l,B,P),wO(d,l,B))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var b=Fs(),P=lf(l),B=eh(b,P);B.tag=2,d!=null&&(B.callback=d),d=rf(l,B,P),d!==null&&(Pu(d,l,P,b),wO(d,l,P))}};function rpe(l,d,b,P,B,$,oe){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(P,$,oe):d.prototype&&d.prototype.isPureReactComponent?!kE(b,P)||!kE(B,$):!0}function ipe(l,d,b){var P=!1,B=ef,$=d.contextType;return typeof $=="object"&&$!==null?$=xl($):(B=aa(d)?Wv:us.current,P=d.contextTypes,$=(P=P!=null)?Cb(l,B):ef),d=new d(b,$),l.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=SO,l.stateNode=d,d._reactInternals=l,P&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=B,l.__reactInternalMemoizedMaskedChildContext=$),d}function ope(l,d,b,P){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(b,P),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(b,P),d.state!==l&&SO.enqueueReplaceState(d,d.state,null)}function _z(l,d,b,P){var B=l.stateNode;B.props=b,B.state=l.memoizedState,B.refs=npe,yz(l);var $=d.contextType;typeof $=="object"&&$!==null?B.context=xl($):($=aa(d)?Wv:us.current,B.context=Cb(l,$)),B.state=l.memoizedState,$=d.getDerivedStateFromProps,typeof $=="function"&&(bz(l,d,$,b),B.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(d=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),d!==B.state&&SO.enqueueReplaceState(B,B.state,null),xO(l,b,B,P),B.state=l.memoizedState),typeof B.componentDidMount=="function"&&(l.flags|=4194308)}function DE(l,d,b){if(l=b.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(c(309));var P=b.stateNode}if(!P)throw Error(c(147,l));var B=P,$=""+l;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===$?d.ref:(d=function(oe){var Ce=B.refs;Ce===npe&&(Ce=B.refs={}),oe===null?delete Ce[$]:Ce[$]=oe},d._stringRef=$,d)}if(typeof l!="string")throw Error(c(284));if(!b._owner)throw Error(c(290,l))}return l}function EO(l,d){throw l=Object.prototype.toString.call(d),Error(c(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l))}function spe(l){var d=l._init;return d(l._payload)}function ape(l){function d(Ye,Ve){if(l){var rt=Ye.deletions;rt===null?(Ye.deletions=[Ve],Ye.flags|=16):rt.push(Ve)}}function b(Ye,Ve){if(!l)return null;for(;Ve!==null;)d(Ye,Ve),Ve=Ve.sibling;return null}function P(Ye,Ve){for(Ye=new Map;Ve!==null;)Ve.key!==null?Ye.set(Ve.key,Ve):Ye.set(Ve.index,Ve),Ve=Ve.sibling;return Ye}function B(Ye,Ve){return Ye=cf(Ye,Ve),Ye.index=0,Ye.sibling=null,Ye}function $(Ye,Ve,rt){return Ye.index=rt,l?(rt=Ye.alternate,rt!==null?(rt=rt.index,rt<Ve?(Ye.flags|=2,Ve):rt):(Ye.flags|=2,Ve)):(Ye.flags|=1048576,Ve)}function oe(Ye){return l&&Ye.alternate===null&&(Ye.flags|=2),Ye}function Ce(Ye,Ve,rt,zt){return Ve===null||Ve.tag!==6?(Ve=n6(rt,Ye.mode,zt),Ve.return=Ye,Ve):(Ve=B(Ve,rt),Ve.return=Ye,Ve)}function Oe(Ye,Ve,rt,zt){var vn=rt.type;return vn===fe?Rt(Ye,Ve,rt.props.children,zt,rt.key):Ve!==null&&(Ve.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===ke&&spe(vn)===Ve.type)?(zt=B(Ve,rt.props),zt.ref=DE(Ye,Ve,rt),zt.return=Ye,zt):(zt=HO(rt.type,rt.key,rt.props,null,Ye.mode,zt),zt.ref=DE(Ye,Ve,rt),zt.return=Ye,zt)}function ct(Ye,Ve,rt,zt){return Ve===null||Ve.tag!==4||Ve.stateNode.containerInfo!==rt.containerInfo||Ve.stateNode.implementation!==rt.implementation?(Ve=r6(rt,Ye.mode,zt),Ve.return=Ye,Ve):(Ve=B(Ve,rt.children||[]),Ve.return=Ye,Ve)}function Rt(Ye,Ve,rt,zt,vn){return Ve===null||Ve.tag!==7?(Ve=tg(rt,Ye.mode,zt,vn),Ve.return=Ye,Ve):(Ve=B(Ve,rt),Ve.return=Ye,Ve)}function Nt(Ye,Ve,rt){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return Ve=n6(""+Ve,Ye.mode,rt),Ve.return=Ye,Ve;if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case ae:return rt=HO(Ve.type,Ve.key,Ve.props,null,Ye.mode,rt),rt.ref=DE(Ye,null,Ve),rt.return=Ye,rt;case xe:return Ve=r6(Ve,Ye.mode,rt),Ve.return=Ye,Ve;case ke:var zt=Ve._init;return Nt(Ye,zt(Ve._payload),rt)}if(Ct(Ve)||wt(Ve))return Ve=tg(Ve,Ye.mode,rt,null),Ve.return=Ye,Ve;EO(Ye,Ve)}return null}function It(Ye,Ve,rt,zt){var vn=Ve!==null?Ve.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number")return vn!==null?null:Ce(Ye,Ve,""+rt,zt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case ae:return rt.key===vn?Oe(Ye,Ve,rt,zt):null;case xe:return rt.key===vn?ct(Ye,Ve,rt,zt):null;case ke:return vn=rt._init,It(Ye,Ve,vn(rt._payload),zt)}if(Ct(rt)||wt(rt))return vn!==null?null:Rt(Ye,Ve,rt,zt,null);EO(Ye,rt)}return null}function nn(Ye,Ve,rt,zt,vn){if(typeof zt=="string"&&zt!==""||typeof zt=="number")return Ye=Ye.get(rt)||null,Ce(Ve,Ye,""+zt,vn);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case ae:return Ye=Ye.get(zt.key===null?rt:zt.key)||null,Oe(Ve,Ye,zt,vn);case xe:return Ye=Ye.get(zt.key===null?rt:zt.key)||null,ct(Ve,Ye,zt,vn);case ke:var On=zt._init;return nn(Ye,Ve,rt,On(zt._payload),vn)}if(Ct(zt)||wt(zt))return Ye=Ye.get(rt)||null,Rt(Ve,Ye,zt,vn,null);EO(Ve,zt)}return null}function dn(Ye,Ve,rt,zt){for(var vn=null,On=null,Dn=Ve,Gn=Ve=0,ko=null;Dn!==null&&Gn<rt.length;Gn++){Dn.index>Gn?(ko=Dn,Dn=null):ko=Dn.sibling;var Cr=It(Ye,Dn,rt[Gn],zt);if(Cr===null){Dn===null&&(Dn=ko);break}l&&Dn&&Cr.alternate===null&&d(Ye,Dn),Ve=$(Cr,Ve,Gn),On===null?vn=Cr:On.sibling=Cr,On=Cr,Dn=ko}if(Gn===rt.length)return b(Ye,Dn),yi&&Kv(Ye,Gn),vn;if(Dn===null){for(;Gn<rt.length;Gn++)Dn=Nt(Ye,rt[Gn],zt),Dn!==null&&(Ve=$(Dn,Ve,Gn),On===null?vn=Dn:On.sibling=Dn,On=Dn);return yi&&Kv(Ye,Gn),vn}for(Dn=P(Ye,Dn);Gn<rt.length;Gn++)ko=nn(Dn,Ye,Gn,rt[Gn],zt),ko!==null&&(l&&ko.alternate!==null&&Dn.delete(ko.key===null?Gn:ko.key),Ve=$(ko,Ve,Gn),On===null?vn=ko:On.sibling=ko,On=ko);return l&&Dn.forEach(function(df){return d(Ye,df)}),yi&&Kv(Ye,Gn),vn}function fn(Ye,Ve,rt,zt){var vn=wt(rt);if(typeof vn!="function")throw Error(c(150));if(rt=vn.call(rt),rt==null)throw Error(c(151));for(var On=vn=null,Dn=Ve,Gn=Ve=0,ko=null,Cr=rt.next();Dn!==null&&!Cr.done;Gn++,Cr=rt.next()){Dn.index>Gn?(ko=Dn,Dn=null):ko=Dn.sibling;var df=It(Ye,Dn,Cr.value,zt);if(df===null){Dn===null&&(Dn=ko);break}l&&Dn&&df.alternate===null&&d(Ye,Dn),Ve=$(df,Ve,Gn),On===null?vn=df:On.sibling=df,On=df,Dn=ko}if(Cr.done)return b(Ye,Dn),yi&&Kv(Ye,Gn),vn;if(Dn===null){for(;!Cr.done;Gn++,Cr=rt.next())Cr=Nt(Ye,Cr.value,zt),Cr!==null&&(Ve=$(Cr,Ve,Gn),On===null?vn=Cr:On.sibling=Cr,On=Cr);return yi&&Kv(Ye,Gn),vn}for(Dn=P(Ye,Dn);!Cr.done;Gn++,Cr=rt.next())Cr=nn(Dn,Ye,Gn,Cr.value,zt),Cr!==null&&(l&&Cr.alternate!==null&&Dn.delete(Cr.key===null?Gn:Cr.key),Ve=$(Cr,Ve,Gn),On===null?vn=Cr:On.sibling=Cr,On=Cr);return l&&Dn.forEach(function(wOe){return d(Ye,wOe)}),yi&&Kv(Ye,Gn),vn}function Zi(Ye,Ve,rt,zt){if(typeof rt=="object"&&rt!==null&&rt.type===fe&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case ae:e:{for(var vn=rt.key,On=Ve;On!==null;){if(On.key===vn){if(vn=rt.type,vn===fe){if(On.tag===7){b(Ye,On.sibling),Ve=B(On,rt.props.children),Ve.return=Ye,Ye=Ve;break e}}else if(On.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===ke&&spe(vn)===On.type){b(Ye,On.sibling),Ve=B(On,rt.props),Ve.ref=DE(Ye,On,rt),Ve.return=Ye,Ye=Ve;break e}b(Ye,On);break}else d(Ye,On);On=On.sibling}rt.type===fe?(Ve=tg(rt.props.children,Ye.mode,zt,rt.key),Ve.return=Ye,Ye=Ve):(zt=HO(rt.type,rt.key,rt.props,null,Ye.mode,zt),zt.ref=DE(Ye,Ve,rt),zt.return=Ye,Ye=zt)}return oe(Ye);case xe:e:{for(On=rt.key;Ve!==null;){if(Ve.key===On)if(Ve.tag===4&&Ve.stateNode.containerInfo===rt.containerInfo&&Ve.stateNode.implementation===rt.implementation){b(Ye,Ve.sibling),Ve=B(Ve,rt.children||[]),Ve.return=Ye,Ye=Ve;break e}else{b(Ye,Ve);break}else d(Ye,Ve);Ve=Ve.sibling}Ve=r6(rt,Ye.mode,zt),Ve.return=Ye,Ye=Ve}return oe(Ye);case ke:return On=rt._init,Zi(Ye,Ve,On(rt._payload),zt)}if(Ct(rt))return dn(Ye,Ve,rt,zt);if(wt(rt))return fn(Ye,Ve,rt,zt);EO(Ye,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"?(rt=""+rt,Ve!==null&&Ve.tag===6?(b(Ye,Ve.sibling),Ve=B(Ve,rt),Ve.return=Ye,Ye=Ve):(b(Ye,Ve),Ve=n6(rt,Ye.mode,zt),Ve.return=Ye,Ye=Ve),oe(Ye)):b(Ye,Ve)}return Zi}var Ib=ape(!0),lpe=ape(!1),LE={},Ic=Jp(LE),NE=Jp(LE),FE=Jp(LE);function Xv(l){if(l===LE)throw Error(c(174));return l}function wz(l,d){switch(oi(FE,d),oi(NE,l),oi(Ic,LE),l=d.nodeType,l){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Hn(null,"");break;default:l=l===8?d.parentNode:d,d=l.namespaceURI||null,l=l.tagName,d=Hn(d,l)}mi(Ic),oi(Ic,d)}function Rb(){mi(Ic),mi(NE),mi(FE)}function upe(l){Xv(FE.current);var d=Xv(Ic.current),b=Hn(d,l.type);d!==b&&(oi(NE,l),oi(Ic,b))}function xz(l){NE.current===l&&(mi(Ic),mi(NE))}var ki=Jp(0);function CO(l){for(var d=l;d!==null;){if(d.tag===13){var b=d.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Sz=[];function Ez(){for(var l=0;l<Sz.length;l++)Sz[l]._workInProgressVersionPrimary=null;Sz.length=0}var PO=ne.ReactCurrentDispatcher,Cz=ne.ReactCurrentBatchConfig,Yv=0,Ti=null,po=null,Co=null,kO=!1,BE=!1,UE=0,HRe=0;function cs(){throw Error(c(321))}function Pz(l,d){if(d===null)return!1;for(var b=0;b<d.length&&b<l.length;b++)if(!wu(l[b],d[b]))return!1;return!0}function kz(l,d,b,P,B,$){if(Yv=$,Ti=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,PO.current=l===null||l.memoizedState===null?KRe:qRe,l=b(P,B),BE){$=0;do{if(BE=!1,UE=0,25<=$)throw Error(c(301));$+=1,Co=po=null,d.updateQueue=null,PO.current=XRe,l=b(P,B)}while(BE)}if(PO.current=AO,d=po!==null&&po.next!==null,Yv=0,Co=po=Ti=null,kO=!1,d)throw Error(c(300));return l}function Tz(){var l=UE!==0;return UE=0,l}function Rc(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Co===null?Ti.memoizedState=Co=l:Co=Co.next=l,Co}function Sl(){if(po===null){var l=Ti.alternate;l=l!==null?l.memoizedState:null}else l=po.next;var d=Co===null?Ti.memoizedState:Co.next;if(d!==null)Co=d,po=l;else{if(l===null)throw Error(c(310));po=l,l={memoizedState:po.memoizedState,baseState:po.baseState,baseQueue:po.baseQueue,queue:po.queue,next:null},Co===null?Ti.memoizedState=Co=l:Co=Co.next=l}return Co}function VE(l,d){return typeof d=="function"?d(l):d}function Mz(l){var d=Sl(),b=d.queue;if(b===null)throw Error(c(311));b.lastRenderedReducer=l;var P=po,B=P.baseQueue,$=b.pending;if($!==null){if(B!==null){var oe=B.next;B.next=$.next,$.next=oe}P.baseQueue=B=$,b.pending=null}if(B!==null){$=B.next,P=P.baseState;var Ce=oe=null,Oe=null,ct=$;do{var Rt=ct.lane;if((Yv&Rt)===Rt)Oe!==null&&(Oe=Oe.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),P=ct.hasEagerState?ct.eagerState:l(P,ct.action);else{var Nt={lane:Rt,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};Oe===null?(Ce=Oe=Nt,oe=P):Oe=Oe.next=Nt,Ti.lanes|=Rt,Zv|=Rt}ct=ct.next}while(ct!==null&&ct!==$);Oe===null?oe=P:Oe.next=Ce,wu(P,d.memoizedState)||(la=!0),d.memoizedState=P,d.baseState=oe,d.baseQueue=Oe,b.lastRenderedState=P}if(l=b.interleaved,l!==null){B=l;do $=B.lane,Ti.lanes|=$,Zv|=$,B=B.next;while(B!==l)}else B===null&&(b.lanes=0);return[d.memoizedState,b.dispatch]}function Az(l){var d=Sl(),b=d.queue;if(b===null)throw Error(c(311));b.lastRenderedReducer=l;var P=b.dispatch,B=b.pending,$=d.memoizedState;if(B!==null){b.pending=null;var oe=B=B.next;do $=l($,oe.action),oe=oe.next;while(oe!==B);wu($,d.memoizedState)||(la=!0),d.memoizedState=$,d.baseQueue===null&&(d.baseState=$),b.lastRenderedState=$}return[$,P]}function cpe(){}function dpe(l,d){var b=Ti,P=Sl(),B=d(),$=!wu(P.memoizedState,B);if($&&(P.memoizedState=B,la=!0),P=P.queue,Iz(fpe.bind(null,b,P,l),[l]),P.getSnapshot!==d||$||Co!==null&&Co.memoizedState.tag&1){if(b.flags|=2048,jE(9,ppe.bind(null,b,P,B,d),void 0,null),Po===null)throw Error(c(349));Yv&30||hpe(b,d,B)}return B}function hpe(l,d,b){l.flags|=16384,l={getSnapshot:d,value:b},d=Ti.updateQueue,d===null?(d={lastEffect:null,stores:null},Ti.updateQueue=d,d.stores=[l]):(b=d.stores,b===null?d.stores=[l]:b.push(l))}function ppe(l,d,b,P){d.value=b,d.getSnapshot=P,mpe(d)&&vpe(l)}function fpe(l,d,b){return b(function(){mpe(d)&&vpe(l)})}function mpe(l){var d=l.getSnapshot;l=l.value;try{var b=d();return!wu(l,b)}catch{return!0}}function vpe(l){var d=Jd(l,1);d!==null&&Pu(d,l,1,-1)}function gpe(l){var d=Rc();return typeof l=="function"&&(l=l()),d.memoizedState=d.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:VE,lastRenderedState:l},d.queue=l,l=l.dispatch=$Re.bind(null,Ti,l),[d.memoizedState,l]}function jE(l,d,b,P){return l={tag:l,create:d,destroy:b,deps:P,next:null},d=Ti.updateQueue,d===null?(d={lastEffect:null,stores:null},Ti.updateQueue=d,d.lastEffect=l.next=l):(b=d.lastEffect,b===null?d.lastEffect=l.next=l:(P=b.next,b.next=l,l.next=P,d.lastEffect=l)),l}function ype(){return Sl().memoizedState}function TO(l,d,b,P){var B=Rc();Ti.flags|=l,B.memoizedState=jE(1|d,b,void 0,P===void 0?null:P)}function MO(l,d,b,P){var B=Sl();P=P===void 0?null:P;var $=void 0;if(po!==null){var oe=po.memoizedState;if($=oe.destroy,P!==null&&Pz(P,oe.deps)){B.memoizedState=jE(d,b,$,P);return}}Ti.flags|=l,B.memoizedState=jE(1|d,b,$,P)}function bpe(l,d){return TO(8390656,8,l,d)}function Iz(l,d){return MO(2048,8,l,d)}function _pe(l,d){return MO(4,2,l,d)}function wpe(l,d){return MO(4,4,l,d)}function xpe(l,d){if(typeof d=="function")return l=l(),d(l),function(){d(null)};if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function Spe(l,d,b){return b=b!=null?b.concat([l]):null,MO(4,4,xpe.bind(null,d,l),b)}function Rz(){}function Epe(l,d){var b=Sl();d=d===void 0?null:d;var P=b.memoizedState;return P!==null&&d!==null&&Pz(d,P[1])?P[0]:(b.memoizedState=[l,d],l)}function Cpe(l,d){var b=Sl();d=d===void 0?null:d;var P=b.memoizedState;return P!==null&&d!==null&&Pz(d,P[1])?P[0]:(l=l(),b.memoizedState=[l,d],l)}function Ppe(l,d,b){return Yv&21?(wu(b,d)||(b=Zde(),Ti.lanes|=b,Zv|=b,l.baseState=!0),d):(l.baseState&&(l.baseState=!1,la=!0),l.memoizedState=b)}function GRe(l,d){var b=Vr;Vr=b!==0&&4>b?b:4,l(!0);var P=Cz.transition;Cz.transition={};try{l(!1),d()}finally{Vr=b,Cz.transition=P}}function kpe(){return Sl().memoizedState}function WRe(l,d,b){var P=lf(l);if(b={lane:P,action:b,hasEagerState:!1,eagerState:null,next:null},Tpe(l))Mpe(d,b);else if(b=Qhe(l,d,b,P),b!==null){var B=Fs();Pu(b,l,P,B),Ape(b,d,P)}}function $Re(l,d,b){var P=lf(l),B={lane:P,action:b,hasEagerState:!1,eagerState:null,next:null};if(Tpe(l))Mpe(d,B);else{var $=l.alternate;if(l.lanes===0&&($===null||$.lanes===0)&&($=d.lastRenderedReducer,$!==null))try{var oe=d.lastRenderedState,Ce=$(oe,b);if(B.hasEagerState=!0,B.eagerState=Ce,wu(Ce,oe)){var Oe=d.interleaved;Oe===null?(B.next=B,gz(d)):(B.next=Oe.next,Oe.next=B),d.interleaved=B;return}}catch{}finally{}b=Qhe(l,d,B,P),b!==null&&(B=Fs(),Pu(b,l,P,B),Ape(b,d,P))}}function Tpe(l){var d=l.alternate;return l===Ti||d!==null&&d===Ti}function Mpe(l,d){BE=kO=!0;var b=l.pending;b===null?d.next=d:(d.next=b.next,b.next=d),l.pending=d}function Ape(l,d,b){if(b&4194240){var P=d.lanes;P&=l.pendingLanes,b|=P,d.lanes=b,Dj(l,b)}}var AO={readContext:xl,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useInsertionEffect:cs,useLayoutEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useMutableSource:cs,useSyncExternalStore:cs,useId:cs,unstable_isNewReconciler:!1},KRe={readContext:xl,useCallback:function(l,d){return Rc().memoizedState=[l,d===void 0?null:d],l},useContext:xl,useEffect:bpe,useImperativeHandle:function(l,d,b){return b=b!=null?b.concat([l]):null,TO(4194308,4,xpe.bind(null,d,l),b)},useLayoutEffect:function(l,d){return TO(4194308,4,l,d)},useInsertionEffect:function(l,d){return TO(4,2,l,d)},useMemo:function(l,d){var b=Rc();return d=d===void 0?null:d,l=l(),b.memoizedState=[l,d],l},useReducer:function(l,d,b){var P=Rc();return d=b!==void 0?b(d):d,P.memoizedState=P.baseState=d,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:d},P.queue=l,l=l.dispatch=WRe.bind(null,Ti,l),[P.memoizedState,l]},useRef:function(l){var d=Rc();return l={current:l},d.memoizedState=l},useState:gpe,useDebugValue:Rz,useDeferredValue:function(l){return Rc().memoizedState=l},useTransition:function(){var l=gpe(!1),d=l[0];return l=GRe.bind(null,l[1]),Rc().memoizedState=l,[d,l]},useMutableSource:function(){},useSyncExternalStore:function(l,d,b){var P=Ti,B=Rc();if(yi){if(b===void 0)throw Error(c(407));b=b()}else{if(b=d(),Po===null)throw Error(c(349));Yv&30||hpe(P,d,b)}B.memoizedState=b;var $={value:b,getSnapshot:d};return B.queue=$,bpe(fpe.bind(null,P,$,l),[l]),P.flags|=2048,jE(9,ppe.bind(null,P,$,b,d),void 0,null),b},useId:function(){var l=Rc(),d=Po.identifierPrefix;if(yi){var b=Qd,P=Zd;b=(P&~(1<<32-_u(P)-1)).toString(32)+b,d=":"+d+"R"+b,b=UE++,0<b&&(d+="H"+b.toString(32)),d+=":"}else b=HRe++,d=":"+d+"r"+b.toString(32)+":";return l.memoizedState=d},unstable_isNewReconciler:!1},qRe={readContext:xl,useCallback:Epe,useContext:xl,useEffect:Iz,useImperativeHandle:Spe,useInsertionEffect:_pe,useLayoutEffect:wpe,useMemo:Cpe,useReducer:Mz,useRef:ype,useState:function(){return Mz(VE)},useDebugValue:Rz,useDeferredValue:function(l){var d=Sl();return Ppe(d,po.memoizedState,l)},useTransition:function(){var l=Mz(VE)[0],d=Sl().memoizedState;return[l,d]},useMutableSource:cpe,useSyncExternalStore:dpe,useId:kpe,unstable_isNewReconciler:!1},XRe={readContext:xl,useCallback:Epe,useContext:xl,useEffect:Iz,useImperativeHandle:Spe,useInsertionEffect:_pe,useLayoutEffect:wpe,useMemo:Cpe,useReducer:Az,useRef:ype,useState:function(){return Az(VE)},useDebugValue:Rz,useDeferredValue:function(l){var d=Sl();return po===null?d.memoizedState=l:Ppe(d,po.memoizedState,l)},useTransition:function(){var l=Az(VE)[0],d=Sl().memoizedState;return[l,d]},useMutableSource:cpe,useSyncExternalStore:dpe,useId:kpe,unstable_isNewReconciler:!1};function Ob(l,d){try{var b="",P=d;do b+=ze(P),P=P.return;while(P);var B=b}catch($){B=`
Error generating stack: `+$.message+`
`+$.stack}return{value:l,source:d,stack:B,digest:null}}function Oz(l,d,b){return{value:l,source:null,stack:b??null,digest:d??null}}function Dz(l,d){try{console.error(d.value)}catch(b){setTimeout(function(){throw b})}}var YRe=typeof WeakMap=="function"?WeakMap:Map;function Ipe(l,d,b){b=eh(-1,b),b.tag=3,b.payload={element:null};var P=d.value;return b.callback=function(){FO||(FO=!0,qz=P),Dz(l,d)},b}function Rpe(l,d,b){b=eh(-1,b),b.tag=3;var P=l.type.getDerivedStateFromError;if(typeof P=="function"){var B=d.value;b.payload=function(){return P(B)},b.callback=function(){Dz(l,d)}}var $=l.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(b.callback=function(){Dz(l,d),typeof P!="function"&&(sf===null?sf=new Set([this]):sf.add(this));var oe=d.stack;this.componentDidCatch(d.value,{componentStack:oe!==null?oe:""})}),b}function Ope(l,d,b){var P=l.pingCache;if(P===null){P=l.pingCache=new YRe;var B=new Set;P.set(d,B)}else B=P.get(d),B===void 0&&(B=new Set,P.set(d,B));B.has(b)||(B.add(b),l=cOe.bind(null,l,d,b),d.then(l,l))}function Dpe(l){do{var d;if((d=l.tag===13)&&(d=l.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return l;l=l.return}while(l!==null);return null}function Lpe(l,d,b,P,B){return l.mode&1?(l.flags|=65536,l.lanes=B,l):(l===d?l.flags|=65536:(l.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(d=eh(-1,1),d.tag=2,rf(b,d,1))),b.lanes|=1),l)}var ZRe=ne.ReactCurrentOwner,la=!1;function Ns(l,d,b,P){d.child=l===null?lpe(d,null,b,P):Ib(d,l.child,b,P)}function Npe(l,d,b,P,B){b=b.render;var $=d.ref;return Ab(d,B),P=kz(l,d,b,P,$,B),b=Tz(),l!==null&&!la?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~B,th(l,d,B)):(yi&&b&&lz(d),d.flags|=1,Ns(l,d,P,B),d.child)}function Fpe(l,d,b,P,B){if(l===null){var $=b.type;return typeof $=="function"&&!t6($)&&$.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(d.tag=15,d.type=$,Bpe(l,d,$,P,B)):(l=HO(b.type,null,P,d,d.mode,B),l.ref=d.ref,l.return=d,d.child=l)}if($=l.child,!(l.lanes&B)){var oe=$.memoizedProps;if(b=b.compare,b=b!==null?b:kE,b(oe,P)&&l.ref===d.ref)return th(l,d,B)}return d.flags|=1,l=cf($,P),l.ref=d.ref,l.return=d,d.child=l}function Bpe(l,d,b,P,B){if(l!==null){var $=l.memoizedProps;if(kE($,P)&&l.ref===d.ref)if(la=!1,d.pendingProps=P=$,(l.lanes&B)!==0)l.flags&131072&&(la=!0);else return d.lanes=l.lanes,th(l,d,B)}return Lz(l,d,b,P,B)}function Upe(l,d,b){var P=d.pendingProps,B=P.children,$=l!==null?l.memoizedState:null;if(P.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},oi(Lb,Oa),Oa|=b;else{if(!(b&1073741824))return l=$!==null?$.baseLanes|b:b,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:l,cachePool:null,transitions:null},d.updateQueue=null,oi(Lb,Oa),Oa|=l,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},P=$!==null?$.baseLanes:b,oi(Lb,Oa),Oa|=P}else $!==null?(P=$.baseLanes|b,d.memoizedState=null):P=b,oi(Lb,Oa),Oa|=P;return Ns(l,d,B,b),d.child}function Vpe(l,d){var b=d.ref;(l===null&&b!==null||l!==null&&l.ref!==b)&&(d.flags|=512,d.flags|=2097152)}function Lz(l,d,b,P,B){var $=aa(b)?Wv:us.current;return $=Cb(d,$),Ab(d,B),b=kz(l,d,b,P,$,B),P=Tz(),l!==null&&!la?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~B,th(l,d,B)):(yi&&P&&lz(d),d.flags|=1,Ns(l,d,b,B),d.child)}function jpe(l,d,b,P,B){if(aa(b)){var $=!0;fO(d)}else $=!1;if(Ab(d,B),d.stateNode===null)RO(l,d),ipe(d,b,P),_z(d,b,P,B),P=!0;else if(l===null){var oe=d.stateNode,Ce=d.memoizedProps;oe.props=Ce;var Oe=oe.context,ct=b.contextType;typeof ct=="object"&&ct!==null?ct=xl(ct):(ct=aa(b)?Wv:us.current,ct=Cb(d,ct));var Rt=b.getDerivedStateFromProps,Nt=typeof Rt=="function"||typeof oe.getSnapshotBeforeUpdate=="function";Nt||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Ce!==P||Oe!==ct)&&ope(d,oe,P,ct),nf=!1;var It=d.memoizedState;oe.state=It,xO(d,P,oe,B),Oe=d.memoizedState,Ce!==P||It!==Oe||sa.current||nf?(typeof Rt=="function"&&(bz(d,b,Rt,P),Oe=d.memoizedState),(Ce=nf||rpe(d,b,Ce,P,It,Oe,ct))?(Nt||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(d.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=P,d.memoizedState=Oe),oe.props=P,oe.state=Oe,oe.context=ct,P=Ce):(typeof oe.componentDidMount=="function"&&(d.flags|=4194308),P=!1)}else{oe=d.stateNode,Jhe(l,d),Ce=d.memoizedProps,ct=d.type===d.elementType?Ce:Su(d.type,Ce),oe.props=ct,Nt=d.pendingProps,It=oe.context,Oe=b.contextType,typeof Oe=="object"&&Oe!==null?Oe=xl(Oe):(Oe=aa(b)?Wv:us.current,Oe=Cb(d,Oe));var nn=b.getDerivedStateFromProps;(Rt=typeof nn=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Ce!==Nt||It!==Oe)&&ope(d,oe,P,Oe),nf=!1,It=d.memoizedState,oe.state=It,xO(d,P,oe,B);var dn=d.memoizedState;Ce!==Nt||It!==dn||sa.current||nf?(typeof nn=="function"&&(bz(d,b,nn,P),dn=d.memoizedState),(ct=nf||rpe(d,b,ct,P,It,dn,Oe)||!1)?(Rt||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(P,dn,Oe),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(P,dn,Oe)),typeof oe.componentDidUpdate=="function"&&(d.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof oe.componentDidUpdate!="function"||Ce===l.memoizedProps&&It===l.memoizedState||(d.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Ce===l.memoizedProps&&It===l.memoizedState||(d.flags|=1024),d.memoizedProps=P,d.memoizedState=dn),oe.props=P,oe.state=dn,oe.context=Oe,P=ct):(typeof oe.componentDidUpdate!="function"||Ce===l.memoizedProps&&It===l.memoizedState||(d.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Ce===l.memoizedProps&&It===l.memoizedState||(d.flags|=1024),P=!1)}return Nz(l,d,b,P,$,B)}function Nz(l,d,b,P,B,$){Vpe(l,d);var oe=(d.flags&128)!==0;if(!P&&!oe)return B&&Whe(d,b,!1),th(l,d,$);P=d.stateNode,ZRe.current=d;var Ce=oe&&typeof b.getDerivedStateFromError!="function"?null:P.render();return d.flags|=1,l!==null&&oe?(d.child=Ib(d,l.child,null,$),d.child=Ib(d,null,Ce,$)):Ns(l,d,Ce,$),d.memoizedState=P.state,B&&Whe(d,b,!0),d.child}function zpe(l){var d=l.stateNode;d.pendingContext?Hhe(l,d.pendingContext,d.pendingContext!==d.context):d.context&&Hhe(l,d.context,!1),wz(l,d.containerInfo)}function Hpe(l,d,b,P,B){return Tb(),hz(B),d.flags|=256,Ns(l,d,b,P),d.child}var Fz={dehydrated:null,treeContext:null,retryLane:0};function Bz(l){return{baseLanes:l,cachePool:null,transitions:null}}function Gpe(l,d,b){var P=d.pendingProps,B=ki.current,$=!1,oe=(d.flags&128)!==0,Ce;if((Ce=oe)||(Ce=l!==null&&l.memoizedState===null?!1:(B&2)!==0),Ce?($=!0,d.flags&=-129):(l===null||l.memoizedState!==null)&&(B|=1),oi(ki,B&1),l===null)return dz(d),l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(d.mode&1?l.data==="$!"?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(oe=P.children,l=P.fallback,$?(P=d.mode,$=d.child,oe={mode:"hidden",children:oe},!(P&1)&&$!==null?($.childLanes=0,$.pendingProps=oe):$=GO(oe,P,0,null),l=tg(l,P,b,null),$.return=d,l.return=d,$.sibling=l,d.child=$,d.child.memoizedState=Bz(b),d.memoizedState=Fz,l):Uz(d,oe));if(B=l.memoizedState,B!==null&&(Ce=B.dehydrated,Ce!==null))return QRe(l,d,oe,P,Ce,B,b);if($){$=P.fallback,oe=d.mode,B=l.child,Ce=B.sibling;var Oe={mode:"hidden",children:P.children};return!(oe&1)&&d.child!==B?(P=d.child,P.childLanes=0,P.pendingProps=Oe,d.deletions=null):(P=cf(B,Oe),P.subtreeFlags=B.subtreeFlags&14680064),Ce!==null?$=cf(Ce,$):($=tg($,oe,b,null),$.flags|=2),$.return=d,P.return=d,P.sibling=$,d.child=P,P=$,$=d.child,oe=l.child.memoizedState,oe=oe===null?Bz(b):{baseLanes:oe.baseLanes|b,cachePool:null,transitions:oe.transitions},$.memoizedState=oe,$.childLanes=l.childLanes&~b,d.memoizedState=Fz,P}return $=l.child,l=$.sibling,P=cf($,{mode:"visible",children:P.children}),!(d.mode&1)&&(P.lanes=b),P.return=d,P.sibling=null,l!==null&&(b=d.deletions,b===null?(d.deletions=[l],d.flags|=16):b.push(l)),d.child=P,d.memoizedState=null,P}function Uz(l,d){return d=GO({mode:"visible",children:d},l.mode,0,null),d.return=l,l.child=d}function IO(l,d,b,P){return P!==null&&hz(P),Ib(d,l.child,null,b),l=Uz(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function QRe(l,d,b,P,B,$,oe){if(b)return d.flags&256?(d.flags&=-257,P=Oz(Error(c(422))),IO(l,d,oe,P)):d.memoizedState!==null?(d.child=l.child,d.flags|=128,null):($=P.fallback,B=d.mode,P=GO({mode:"visible",children:P.children},B,0,null),$=tg($,B,oe,null),$.flags|=2,P.return=d,$.return=d,P.sibling=$,d.child=P,d.mode&1&&Ib(d,l.child,null,oe),d.child.memoizedState=Bz(oe),d.memoizedState=Fz,$);if(!(d.mode&1))return IO(l,d,oe,null);if(B.data==="$!"){if(P=B.nextSibling&&B.nextSibling.dataset,P)var Ce=P.dgst;return P=Ce,$=Error(c(419)),P=Oz($,P,void 0),IO(l,d,oe,P)}if(Ce=(oe&l.childLanes)!==0,la||Ce){if(P=Po,P!==null){switch(oe&-oe){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}B=B&(P.suspendedLanes|oe)?0:B,B!==0&&B!==$.retryLane&&($.retryLane=B,Jd(l,B),Pu(P,l,B,-1))}return e6(),P=Oz(Error(c(421))),IO(l,d,oe,P)}return B.data==="$?"?(d.flags|=128,d.child=l.child,d=dOe.bind(null,l),B._reactRetry=d,null):(l=$.treeContext,Ra=Qp(B.nextSibling),Ia=d,yi=!0,xu=null,l!==null&&(_l[wl++]=Zd,_l[wl++]=Qd,_l[wl++]=$v,Zd=l.id,Qd=l.overflow,$v=d),d=Uz(d,P.children),d.flags|=4096,d)}function Wpe(l,d,b){l.lanes|=d;var P=l.alternate;P!==null&&(P.lanes|=d),vz(l.return,d,b)}function Vz(l,d,b,P,B){var $=l.memoizedState;$===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:P,tail:b,tailMode:B}:($.isBackwards=d,$.rendering=null,$.renderingStartTime=0,$.last=P,$.tail=b,$.tailMode=B)}function $pe(l,d,b){var P=d.pendingProps,B=P.revealOrder,$=P.tail;if(Ns(l,d,P.children,b),P=ki.current,P&2)P=P&1|2,d.flags|=128;else{if(l!==null&&l.flags&128)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Wpe(l,b,d);else if(l.tag===19)Wpe(l,b,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}P&=1}if(oi(ki,P),!(d.mode&1))d.memoizedState=null;else switch(B){case"forwards":for(b=d.child,B=null;b!==null;)l=b.alternate,l!==null&&CO(l)===null&&(B=b),b=b.sibling;b=B,b===null?(B=d.child,d.child=null):(B=b.sibling,b.sibling=null),Vz(d,!1,B,b,$);break;case"backwards":for(b=null,B=d.child,d.child=null;B!==null;){if(l=B.alternate,l!==null&&CO(l)===null){d.child=B;break}l=B.sibling,B.sibling=b,b=B,B=l}Vz(d,!0,b,null,$);break;case"together":Vz(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function RO(l,d){!(d.mode&1)&&l!==null&&(l.alternate=null,d.alternate=null,d.flags|=2)}function th(l,d,b){if(l!==null&&(d.dependencies=l.dependencies),Zv|=d.lanes,!(b&d.childLanes))return null;if(l!==null&&d.child!==l.child)throw Error(c(153));if(d.child!==null){for(l=d.child,b=cf(l,l.pendingProps),d.child=b,b.return=d;l.sibling!==null;)l=l.sibling,b=b.sibling=cf(l,l.pendingProps),b.return=d;b.sibling=null}return d.child}function JRe(l,d,b){switch(d.tag){case 3:zpe(d),Tb();break;case 5:upe(d);break;case 1:aa(d.type)&&fO(d);break;case 4:wz(d,d.stateNode.containerInfo);break;case 10:var P=d.type._context,B=d.memoizedProps.value;oi(bO,P._currentValue),P._currentValue=B;break;case 13:if(P=d.memoizedState,P!==null)return P.dehydrated!==null?(oi(ki,ki.current&1),d.flags|=128,null):b&d.child.childLanes?Gpe(l,d,b):(oi(ki,ki.current&1),l=th(l,d,b),l!==null?l.sibling:null);oi(ki,ki.current&1);break;case 19:if(P=(b&d.childLanes)!==0,l.flags&128){if(P)return $pe(l,d,b);d.flags|=128}if(B=d.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),oi(ki,ki.current),P)break;return null;case 22:case 23:return d.lanes=0,Upe(l,d,b)}return th(l,d,b)}var Kpe,jz,qpe,Xpe;Kpe=function(l,d){for(var b=d.child;b!==null;){if(b.tag===5||b.tag===6)l.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===d)break;for(;b.sibling===null;){if(b.return===null||b.return===d)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},jz=function(){},qpe=function(l,d,b,P){var B=l.memoizedProps;if(B!==P){l=d.stateNode,Xv(Ic.current);var $=null;switch(b){case"input":B=at(l,B),P=at(l,P),$=[];break;case"select":B=ue({},B,{value:void 0}),P=ue({},P,{value:void 0}),$=[];break;case"textarea":B=At(l,B),P=At(l,P),$=[];break;default:typeof B.onClick!="function"&&typeof P.onClick=="function"&&(l.onclick=dO)}pb(b,P);var oe;b=null;for(ct in B)if(!P.hasOwnProperty(ct)&&B.hasOwnProperty(ct)&&B[ct]!=null)if(ct==="style"){var Ce=B[ct];for(oe in Ce)Ce.hasOwnProperty(oe)&&(b||(b={}),b[oe]="")}else ct!=="dangerouslySetInnerHTML"&&ct!=="children"&&ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(f.hasOwnProperty(ct)?$||($=[]):($=$||[]).push(ct,null));for(ct in P){var Oe=P[ct];if(Ce=B!=null?B[ct]:void 0,P.hasOwnProperty(ct)&&Oe!==Ce&&(Oe!=null||Ce!=null))if(ct==="style")if(Ce){for(oe in Ce)!Ce.hasOwnProperty(oe)||Oe&&Oe.hasOwnProperty(oe)||(b||(b={}),b[oe]="");for(oe in Oe)Oe.hasOwnProperty(oe)&&Ce[oe]!==Oe[oe]&&(b||(b={}),b[oe]=Oe[oe])}else b||($||($=[]),$.push(ct,b)),b=Oe;else ct==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Ce=Ce?Ce.__html:void 0,Oe!=null&&Ce!==Oe&&($=$||[]).push(ct,Oe)):ct==="children"?typeof Oe!="string"&&typeof Oe!="number"||($=$||[]).push(ct,""+Oe):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&(f.hasOwnProperty(ct)?(Oe!=null&&ct==="onScroll"&&fi("scroll",l),$||Ce===Oe||($=[])):($=$||[]).push(ct,Oe))}b&&($=$||[]).push("style",b);var ct=$;(d.updateQueue=ct)&&(d.flags|=4)}},Xpe=function(l,d,b,P){b!==P&&(d.flags|=4)};function zE(l,d){if(!yi)switch(l.tailMode){case"hidden":d=l.tail;for(var b=null;d!==null;)d.alternate!==null&&(b=d),d=d.sibling;b===null?l.tail=null:b.sibling=null;break;case"collapsed":b=l.tail;for(var P=null;b!==null;)b.alternate!==null&&(P=b),b=b.sibling;P===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:P.sibling=null}}function ds(l){var d=l.alternate!==null&&l.alternate.child===l.child,b=0,P=0;if(d)for(var B=l.child;B!==null;)b|=B.lanes|B.childLanes,P|=B.subtreeFlags&14680064,P|=B.flags&14680064,B.return=l,B=B.sibling;else for(B=l.child;B!==null;)b|=B.lanes|B.childLanes,P|=B.subtreeFlags,P|=B.flags,B.return=l,B=B.sibling;return l.subtreeFlags|=P,l.childLanes=b,d}function eOe(l,d,b){var P=d.pendingProps;switch(uz(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ds(d),null;case 1:return aa(d.type)&&pO(),ds(d),null;case 3:return P=d.stateNode,Rb(),mi(sa),mi(us),Ez(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(l===null||l.child===null)&&(yO(d)?d.flags|=4:l===null||l.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,xu!==null&&(Zz(xu),xu=null))),jz(l,d),ds(d),null;case 5:xz(d);var B=Xv(FE.current);if(b=d.type,l!==null&&d.stateNode!=null)qpe(l,d,b,P,B),l.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!P){if(d.stateNode===null)throw Error(c(166));return ds(d),null}if(l=Xv(Ic.current),yO(d)){P=d.stateNode,b=d.type;var $=d.memoizedProps;switch(P[Ac]=d,P[RE]=$,l=(d.mode&1)!==0,b){case"dialog":fi("cancel",P),fi("close",P);break;case"iframe":case"object":case"embed":fi("load",P);break;case"video":case"audio":for(B=0;B<ME.length;B++)fi(ME[B],P);break;case"source":fi("error",P);break;case"img":case"image":case"link":fi("error",P),fi("load",P);break;case"details":fi("toggle",P);break;case"input":st(P,$),fi("invalid",P);break;case"select":P._wrapperState={wasMultiple:!!$.multiple},fi("invalid",P);break;case"textarea":Et(P,$),fi("invalid",P)}pb(b,$),B=null;for(var oe in $)if($.hasOwnProperty(oe)){var Ce=$[oe];oe==="children"?typeof Ce=="string"?P.textContent!==Ce&&($.suppressHydrationWarning!==!0&&cO(P.textContent,Ce,l),B=["children",Ce]):typeof Ce=="number"&&P.textContent!==""+Ce&&($.suppressHydrationWarning!==!0&&cO(P.textContent,Ce,l),B=["children",""+Ce]):f.hasOwnProperty(oe)&&Ce!=null&&oe==="onScroll"&&fi("scroll",P)}switch(b){case"input":Cn(P),He(P,$,!0);break;case"textarea":Cn(P),_n(P);break;case"select":case"option":break;default:typeof $.onClick=="function"&&(P.onclick=dO)}P=B,d.updateQueue=P,P!==null&&(d.flags|=4)}else{oe=B.nodeType===9?B:B.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=gr(b)),l==="http://www.w3.org/1999/xhtml"?b==="script"?(l=oe.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof P.is=="string"?l=oe.createElement(b,{is:P.is}):(l=oe.createElement(b),b==="select"&&(oe=l,P.multiple?oe.multiple=!0:P.size&&(oe.size=P.size))):l=oe.createElementNS(l,b),l[Ac]=d,l[RE]=P,Kpe(l,d,!1,!1),d.stateNode=l;e:{switch(oe=cE(b,P),b){case"dialog":fi("cancel",l),fi("close",l),B=P;break;case"iframe":case"object":case"embed":fi("load",l),B=P;break;case"video":case"audio":for(B=0;B<ME.length;B++)fi(ME[B],l);B=P;break;case"source":fi("error",l),B=P;break;case"img":case"image":case"link":fi("error",l),fi("load",l),B=P;break;case"details":fi("toggle",l),B=P;break;case"input":st(l,P),B=at(l,P),fi("invalid",l);break;case"option":B=P;break;case"select":l._wrapperState={wasMultiple:!!P.multiple},B=ue({},P,{value:void 0}),fi("invalid",l);break;case"textarea":Et(l,P),B=At(l,P),fi("invalid",l);break;default:B=P}pb(b,B),Ce=B;for($ in Ce)if(Ce.hasOwnProperty($)){var Oe=Ce[$];$==="style"?hb(l,Oe):$==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Oe!=null&&Wp(l,Oe)):$==="children"?typeof Oe=="string"?(b!=="textarea"||Oe!=="")&&ls(l,Oe):typeof Oe=="number"&&ls(l,""+Oe):$!=="suppressContentEditableWarning"&&$!=="suppressHydrationWarning"&&$!=="autoFocus"&&(f.hasOwnProperty($)?Oe!=null&&$==="onScroll"&&fi("scroll",l):Oe!=null&&re(l,$,Oe,oe))}switch(b){case"input":Cn(l),He(l,P,!1);break;case"textarea":Cn(l),_n(l);break;case"option":P.value!=null&&l.setAttribute("value",""+Kt(P.value));break;case"select":l.multiple=!!P.multiple,$=P.value,$!=null?Xe(l,!!P.multiple,$,!1):P.defaultValue!=null&&Xe(l,!!P.multiple,P.defaultValue,!0);break;default:typeof B.onClick=="function"&&(l.onclick=dO)}switch(b){case"button":case"input":case"select":case"textarea":P=!!P.autoFocus;break e;case"img":P=!0;break e;default:P=!1}}P&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return ds(d),null;case 6:if(l&&d.stateNode!=null)Xpe(l,d,l.memoizedProps,P);else{if(typeof P!="string"&&d.stateNode===null)throw Error(c(166));if(b=Xv(FE.current),Xv(Ic.current),yO(d)){if(P=d.stateNode,b=d.memoizedProps,P[Ac]=d,($=P.nodeValue!==b)&&(l=Ia,l!==null))switch(l.tag){case 3:cO(P.nodeValue,b,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&cO(P.nodeValue,b,(l.mode&1)!==0)}$&&(d.flags|=4)}else P=(b.nodeType===9?b:b.ownerDocument).createTextNode(P),P[Ac]=d,d.stateNode=P}return ds(d),null;case 13:if(mi(ki),P=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(yi&&Ra!==null&&d.mode&1&&!(d.flags&128))Zhe(),Tb(),d.flags|=98560,$=!1;else if($=yO(d),P!==null&&P.dehydrated!==null){if(l===null){if(!$)throw Error(c(318));if($=d.memoizedState,$=$!==null?$.dehydrated:null,!$)throw Error(c(317));$[Ac]=d}else Tb(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;ds(d),$=!1}else xu!==null&&(Zz(xu),xu=null),$=!0;if(!$)return d.flags&65536?d:null}return d.flags&128?(d.lanes=b,d):(P=P!==null,P!==(l!==null&&l.memoizedState!==null)&&P&&(d.child.flags|=8192,d.mode&1&&(l===null||ki.current&1?fo===0&&(fo=3):e6())),d.updateQueue!==null&&(d.flags|=4),ds(d),null);case 4:return Rb(),jz(l,d),l===null&&AE(d.stateNode.containerInfo),ds(d),null;case 10:return mz(d.type._context),ds(d),null;case 17:return aa(d.type)&&pO(),ds(d),null;case 19:if(mi(ki),$=d.memoizedState,$===null)return ds(d),null;if(P=(d.flags&128)!==0,oe=$.rendering,oe===null)if(P)zE($,!1);else{if(fo!==0||l!==null&&l.flags&128)for(l=d.child;l!==null;){if(oe=CO(l),oe!==null){for(d.flags|=128,zE($,!1),P=oe.updateQueue,P!==null&&(d.updateQueue=P,d.flags|=4),d.subtreeFlags=0,P=b,b=d.child;b!==null;)$=b,l=P,$.flags&=14680066,oe=$.alternate,oe===null?($.childLanes=0,$.lanes=l,$.child=null,$.subtreeFlags=0,$.memoizedProps=null,$.memoizedState=null,$.updateQueue=null,$.dependencies=null,$.stateNode=null):($.childLanes=oe.childLanes,$.lanes=oe.lanes,$.child=oe.child,$.subtreeFlags=0,$.deletions=null,$.memoizedProps=oe.memoizedProps,$.memoizedState=oe.memoizedState,$.updateQueue=oe.updateQueue,$.type=oe.type,l=oe.dependencies,$.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),b=b.sibling;return oi(ki,ki.current&1|2),d.child}l=l.sibling}$.tail!==null&&Yi()>Nb&&(d.flags|=128,P=!0,zE($,!1),d.lanes=4194304)}else{if(!P)if(l=CO(oe),l!==null){if(d.flags|=128,P=!0,b=l.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),zE($,!0),$.tail===null&&$.tailMode==="hidden"&&!oe.alternate&&!yi)return ds(d),null}else 2*Yi()-$.renderingStartTime>Nb&&b!==1073741824&&(d.flags|=128,P=!0,zE($,!1),d.lanes=4194304);$.isBackwards?(oe.sibling=d.child,d.child=oe):(b=$.last,b!==null?b.sibling=oe:d.child=oe,$.last=oe)}return $.tail!==null?(d=$.tail,$.rendering=d,$.tail=d.sibling,$.renderingStartTime=Yi(),d.sibling=null,b=ki.current,oi(ki,P?b&1|2:b&1),d):(ds(d),null);case 22:case 23:return Jz(),P=d.memoizedState!==null,l!==null&&l.memoizedState!==null!==P&&(d.flags|=8192),P&&d.mode&1?Oa&1073741824&&(ds(d),d.subtreeFlags&6&&(d.flags|=8192)):ds(d),null;case 24:return null;case 25:return null}throw Error(c(156,d.tag))}function tOe(l,d){switch(uz(d),d.tag){case 1:return aa(d.type)&&pO(),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Rb(),mi(sa),mi(us),Ez(),l=d.flags,l&65536&&!(l&128)?(d.flags=l&-65537|128,d):null;case 5:return xz(d),null;case 13:if(mi(ki),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(c(340));Tb()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return mi(ki),null;case 4:return Rb(),null;case 10:return mz(d.type._context),null;case 22:case 23:return Jz(),null;case 24:return null;default:return null}}var OO=!1,hs=!1,nOe=typeof WeakSet=="function"?WeakSet:Set,an=null;function Db(l,d){var b=l.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(P){Fi(l,d,P)}else b.current=null}function Ype(l,d,b){try{b()}catch(P){Fi(l,d,P)}}var Zpe=!1;function rOe(l,d){if(ez=YR,l=Che(),qj(l)){if("selectionStart"in l)var b={start:l.selectionStart,end:l.selectionEnd};else e:{b=(b=l.ownerDocument)&&b.defaultView||window;var P=b.getSelection&&b.getSelection();if(P&&P.rangeCount!==0){b=P.anchorNode;var B=P.anchorOffset,$=P.focusNode;P=P.focusOffset;try{b.nodeType,$.nodeType}catch{b=null;break e}var oe=0,Ce=-1,Oe=-1,ct=0,Rt=0,Nt=l,It=null;t:for(;;){for(var nn;Nt!==b||B!==0&&Nt.nodeType!==3||(Ce=oe+B),Nt!==$||P!==0&&Nt.nodeType!==3||(Oe=oe+P),Nt.nodeType===3&&(oe+=Nt.nodeValue.length),(nn=Nt.firstChild)!==null;)It=Nt,Nt=nn;for(;;){if(Nt===l)break t;if(It===b&&++ct===B&&(Ce=oe),It===$&&++Rt===P&&(Oe=oe),(nn=Nt.nextSibling)!==null)break;Nt=It,It=Nt.parentNode}Nt=nn}b=Ce===-1||Oe===-1?null:{start:Ce,end:Oe}}else b=null}b=b||{start:0,end:0}}else b=null;for(tz={focusedElem:l,selectionRange:b},YR=!1,an=d;an!==null;)if(d=an,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,an=l;else for(;an!==null;){d=an;try{var dn=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(dn!==null){var fn=dn.memoizedProps,Zi=dn.memoizedState,Ye=d.stateNode,Ve=Ye.getSnapshotBeforeUpdate(d.elementType===d.type?fn:Su(d.type,fn),Zi);Ye.__reactInternalSnapshotBeforeUpdate=Ve}break;case 3:var rt=d.stateNode.containerInfo;rt.nodeType===1?rt.textContent="":rt.nodeType===9&&rt.documentElement&&rt.removeChild(rt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(zt){Fi(d,d.return,zt)}if(l=d.sibling,l!==null){l.return=d.return,an=l;break}an=d.return}return dn=Zpe,Zpe=!1,dn}function HE(l,d,b){var P=d.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var B=P=P.next;do{if((B.tag&l)===l){var $=B.destroy;B.destroy=void 0,$!==void 0&&Ype(d,b,$)}B=B.next}while(B!==P)}}function DO(l,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var b=d=d.next;do{if((b.tag&l)===l){var P=b.create;b.destroy=P()}b=b.next}while(b!==d)}}function zz(l){var d=l.ref;if(d!==null){var b=l.stateNode;switch(l.tag){case 5:l=b;break;default:l=b}typeof d=="function"?d(l):d.current=l}}function Qpe(l){var d=l.alternate;d!==null&&(l.alternate=null,Qpe(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&(delete d[Ac],delete d[RE],delete d[oz],delete d[URe],delete d[VRe])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Jpe(l){return l.tag===5||l.tag===3||l.tag===4}function efe(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Jpe(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function Hz(l,d,b){var P=l.tag;if(P===5||P===6)l=l.stateNode,d?b.nodeType===8?b.parentNode.insertBefore(l,d):b.insertBefore(l,d):(b.nodeType===8?(d=b.parentNode,d.insertBefore(l,b)):(d=b,d.appendChild(l)),b=b._reactRootContainer,b!=null||d.onclick!==null||(d.onclick=dO));else if(P!==4&&(l=l.child,l!==null))for(Hz(l,d,b),l=l.sibling;l!==null;)Hz(l,d,b),l=l.sibling}function Gz(l,d,b){var P=l.tag;if(P===5||P===6)l=l.stateNode,d?b.insertBefore(l,d):b.appendChild(l);else if(P!==4&&(l=l.child,l!==null))for(Gz(l,d,b),l=l.sibling;l!==null;)Gz(l,d,b),l=l.sibling}var qo=null,Eu=!1;function of(l,d,b){for(b=b.child;b!==null;)tfe(l,d,b),b=b.sibling}function tfe(l,d,b){if(Mc&&typeof Mc.onCommitFiberUnmount=="function")try{Mc.onCommitFiberUnmount(GR,b)}catch{}switch(b.tag){case 5:hs||Db(b,d);case 6:var P=qo,B=Eu;qo=null,of(l,d,b),qo=P,Eu=B,qo!==null&&(Eu?(l=qo,b=b.stateNode,l.nodeType===8?l.parentNode.removeChild(b):l.removeChild(b)):qo.removeChild(b.stateNode));break;case 18:qo!==null&&(Eu?(l=qo,b=b.stateNode,l.nodeType===8?iz(l.parentNode,b):l.nodeType===1&&iz(l,b),wE(l)):iz(qo,b.stateNode));break;case 4:P=qo,B=Eu,qo=b.stateNode.containerInfo,Eu=!0,of(l,d,b),qo=P,Eu=B;break;case 0:case 11:case 14:case 15:if(!hs&&(P=b.updateQueue,P!==null&&(P=P.lastEffect,P!==null))){B=P=P.next;do{var $=B,oe=$.destroy;$=$.tag,oe!==void 0&&($&2||$&4)&&Ype(b,d,oe),B=B.next}while(B!==P)}of(l,d,b);break;case 1:if(!hs&&(Db(b,d),P=b.stateNode,typeof P.componentWillUnmount=="function"))try{P.props=b.memoizedProps,P.state=b.memoizedState,P.componentWillUnmount()}catch(Ce){Fi(b,d,Ce)}of(l,d,b);break;case 21:of(l,d,b);break;case 22:b.mode&1?(hs=(P=hs)||b.memoizedState!==null,of(l,d,b),hs=P):of(l,d,b);break;default:of(l,d,b)}}function nfe(l){var d=l.updateQueue;if(d!==null){l.updateQueue=null;var b=l.stateNode;b===null&&(b=l.stateNode=new nOe),d.forEach(function(P){var B=hOe.bind(null,l,P);b.has(P)||(b.add(P),P.then(B,B))})}}function Cu(l,d){var b=d.deletions;if(b!==null)for(var P=0;P<b.length;P++){var B=b[P];try{var $=l,oe=d,Ce=oe;e:for(;Ce!==null;){switch(Ce.tag){case 5:qo=Ce.stateNode,Eu=!1;break e;case 3:qo=Ce.stateNode.containerInfo,Eu=!0;break e;case 4:qo=Ce.stateNode.containerInfo,Eu=!0;break e}Ce=Ce.return}if(qo===null)throw Error(c(160));tfe($,oe,B),qo=null,Eu=!1;var Oe=B.alternate;Oe!==null&&(Oe.return=null),B.return=null}catch(ct){Fi(B,d,ct)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)rfe(d,l),d=d.sibling}function rfe(l,d){var b=l.alternate,P=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Cu(d,l),Oc(l),P&4){try{HE(3,l,l.return),DO(3,l)}catch(fn){Fi(l,l.return,fn)}try{HE(5,l,l.return)}catch(fn){Fi(l,l.return,fn)}}break;case 1:Cu(d,l),Oc(l),P&512&&b!==null&&Db(b,b.return);break;case 5:if(Cu(d,l),Oc(l),P&512&&b!==null&&Db(b,b.return),l.flags&32){var B=l.stateNode;try{ls(B,"")}catch(fn){Fi(l,l.return,fn)}}if(P&4&&(B=l.stateNode,B!=null)){var $=l.memoizedProps,oe=b!==null?b.memoizedProps:$,Ce=l.type,Oe=l.updateQueue;if(l.updateQueue=null,Oe!==null)try{Ce==="input"&&$.type==="radio"&&$.name!=null&&we(B,$),cE(Ce,oe);var ct=cE(Ce,$);for(oe=0;oe<Oe.length;oe+=2){var Rt=Oe[oe],Nt=Oe[oe+1];Rt==="style"?hb(B,Nt):Rt==="dangerouslySetInnerHTML"?Wp(B,Nt):Rt==="children"?ls(B,Nt):re(B,Rt,Nt,ct)}switch(Ce){case"input":be(B,$);break;case"textarea":Pt(B,$);break;case"select":var It=B._wrapperState.wasMultiple;B._wrapperState.wasMultiple=!!$.multiple;var nn=$.value;nn!=null?Xe(B,!!$.multiple,nn,!1):It!==!!$.multiple&&($.defaultValue!=null?Xe(B,!!$.multiple,$.defaultValue,!0):Xe(B,!!$.multiple,$.multiple?[]:"",!1))}B[RE]=$}catch(fn){Fi(l,l.return,fn)}}break;case 6:if(Cu(d,l),Oc(l),P&4){if(l.stateNode===null)throw Error(c(162));B=l.stateNode,$=l.memoizedProps;try{B.nodeValue=$}catch(fn){Fi(l,l.return,fn)}}break;case 3:if(Cu(d,l),Oc(l),P&4&&b!==null&&b.memoizedState.isDehydrated)try{wE(d.containerInfo)}catch(fn){Fi(l,l.return,fn)}break;case 4:Cu(d,l),Oc(l);break;case 13:Cu(d,l),Oc(l),B=l.child,B.flags&8192&&($=B.memoizedState!==null,B.stateNode.isHidden=$,!$||B.alternate!==null&&B.alternate.memoizedState!==null||(Kz=Yi())),P&4&&nfe(l);break;case 22:if(Rt=b!==null&&b.memoizedState!==null,l.mode&1?(hs=(ct=hs)||Rt,Cu(d,l),hs=ct):Cu(d,l),Oc(l),P&8192){if(ct=l.memoizedState!==null,(l.stateNode.isHidden=ct)&&!Rt&&l.mode&1)for(an=l,Rt=l.child;Rt!==null;){for(Nt=an=Rt;an!==null;){switch(It=an,nn=It.child,It.tag){case 0:case 11:case 14:case 15:HE(4,It,It.return);break;case 1:Db(It,It.return);var dn=It.stateNode;if(typeof dn.componentWillUnmount=="function"){P=It,b=It.return;try{d=P,dn.props=d.memoizedProps,dn.state=d.memoizedState,dn.componentWillUnmount()}catch(fn){Fi(P,b,fn)}}break;case 5:Db(It,It.return);break;case 22:if(It.memoizedState!==null){sfe(Nt);continue}}nn!==null?(nn.return=It,an=nn):sfe(Nt)}Rt=Rt.sibling}e:for(Rt=null,Nt=l;;){if(Nt.tag===5){if(Rt===null){Rt=Nt;try{B=Nt.stateNode,ct?($=B.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none"):(Ce=Nt.stateNode,Oe=Nt.memoizedProps.style,oe=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null,Ce.style.display=zv("display",oe))}catch(fn){Fi(l,l.return,fn)}}}else if(Nt.tag===6){if(Rt===null)try{Nt.stateNode.nodeValue=ct?"":Nt.memoizedProps}catch(fn){Fi(l,l.return,fn)}}else if((Nt.tag!==22&&Nt.tag!==23||Nt.memoizedState===null||Nt===l)&&Nt.child!==null){Nt.child.return=Nt,Nt=Nt.child;continue}if(Nt===l)break e;for(;Nt.sibling===null;){if(Nt.return===null||Nt.return===l)break e;Rt===Nt&&(Rt=null),Nt=Nt.return}Rt===Nt&&(Rt=null),Nt.sibling.return=Nt.return,Nt=Nt.sibling}}break;case 19:Cu(d,l),Oc(l),P&4&&nfe(l);break;case 21:break;default:Cu(d,l),Oc(l)}}function Oc(l){var d=l.flags;if(d&2){try{e:{for(var b=l.return;b!==null;){if(Jpe(b)){var P=b;break e}b=b.return}throw Error(c(160))}switch(P.tag){case 5:var B=P.stateNode;P.flags&32&&(ls(B,""),P.flags&=-33);var $=efe(l);Gz(l,$,B);break;case 3:case 4:var oe=P.stateNode.containerInfo,Ce=efe(l);Hz(l,Ce,oe);break;default:throw Error(c(161))}}catch(Oe){Fi(l,l.return,Oe)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function iOe(l,d,b){an=l,ife(l)}function ife(l,d,b){for(var P=(l.mode&1)!==0;an!==null;){var B=an,$=B.child;if(B.tag===22&&P){var oe=B.memoizedState!==null||OO;if(!oe){var Ce=B.alternate,Oe=Ce!==null&&Ce.memoizedState!==null||hs;Ce=OO;var ct=hs;if(OO=oe,(hs=Oe)&&!ct)for(an=B;an!==null;)oe=an,Oe=oe.child,oe.tag===22&&oe.memoizedState!==null?afe(B):Oe!==null?(Oe.return=oe,an=Oe):afe(B);for(;$!==null;)an=$,ife($),$=$.sibling;an=B,OO=Ce,hs=ct}ofe(l)}else B.subtreeFlags&8772&&$!==null?($.return=B,an=$):ofe(l)}}function ofe(l){for(;an!==null;){var d=an;if(d.flags&8772){var b=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:hs||DO(5,d);break;case 1:var P=d.stateNode;if(d.flags&4&&!hs)if(b===null)P.componentDidMount();else{var B=d.elementType===d.type?b.memoizedProps:Su(d.type,b.memoizedProps);P.componentDidUpdate(B,b.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var $=d.updateQueue;$!==null&&tpe(d,$,P);break;case 3:var oe=d.updateQueue;if(oe!==null){if(b=null,d.child!==null)switch(d.child.tag){case 5:b=d.child.stateNode;break;case 1:b=d.child.stateNode}tpe(d,oe,b)}break;case 5:var Ce=d.stateNode;if(b===null&&d.flags&4){b=Ce;var Oe=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":Oe.autoFocus&&b.focus();break;case"img":Oe.src&&(b.src=Oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var ct=d.alternate;if(ct!==null){var Rt=ct.memoizedState;if(Rt!==null){var Nt=Rt.dehydrated;Nt!==null&&wE(Nt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}hs||d.flags&512&&zz(d)}catch(It){Fi(d,d.return,It)}}if(d===l){an=null;break}if(b=d.sibling,b!==null){b.return=d.return,an=b;break}an=d.return}}function sfe(l){for(;an!==null;){var d=an;if(d===l){an=null;break}var b=d.sibling;if(b!==null){b.return=d.return,an=b;break}an=d.return}}function afe(l){for(;an!==null;){var d=an;try{switch(d.tag){case 0:case 11:case 15:var b=d.return;try{DO(4,d)}catch(Oe){Fi(d,b,Oe)}break;case 1:var P=d.stateNode;if(typeof P.componentDidMount=="function"){var B=d.return;try{P.componentDidMount()}catch(Oe){Fi(d,B,Oe)}}var $=d.return;try{zz(d)}catch(Oe){Fi(d,$,Oe)}break;case 5:var oe=d.return;try{zz(d)}catch(Oe){Fi(d,oe,Oe)}}}catch(Oe){Fi(d,d.return,Oe)}if(d===l){an=null;break}var Ce=d.sibling;if(Ce!==null){Ce.return=d.return,an=Ce;break}an=d.return}}var oOe=Math.ceil,LO=ne.ReactCurrentDispatcher,Wz=ne.ReactCurrentOwner,El=ne.ReactCurrentBatchConfig,yr=0,Po=null,oo=null,Xo=0,Oa=0,Lb=Jp(0),fo=0,GE=null,Zv=0,NO=0,$z=0,WE=null,ua=null,Kz=0,Nb=1/0,nh=null,FO=!1,qz=null,sf=null,BO=!1,af=null,UO=0,$E=0,Xz=null,VO=-1,jO=0;function Fs(){return yr&6?Yi():VO!==-1?VO:VO=Yi()}function lf(l){return l.mode&1?yr&2&&Xo!==0?Xo&-Xo:zRe.transition!==null?(jO===0&&(jO=Zde()),jO):(l=Vr,l!==0||(l=window.event,l=l===void 0?16:she(l.type)),l):1}function Pu(l,d,b,P){if(50<$E)throw $E=0,Xz=null,Error(c(185));vE(l,b,P),(!(yr&2)||l!==Po)&&(l===Po&&(!(yr&2)&&(NO|=b),fo===4&&uf(l,Xo)),ca(l,P),b===1&&yr===0&&!(d.mode&1)&&(Nb=Yi()+500,mO&&tf()))}function ca(l,d){var b=l.callbackNode;GIe(l,d);var P=KR(l,l===Po?Xo:0);if(P===0)b!==null&&qde(b),l.callbackNode=null,l.callbackPriority=0;else if(d=P&-P,l.callbackPriority!==d){if(b!=null&&qde(b),d===1)l.tag===0?jRe(ufe.bind(null,l)):$he(ufe.bind(null,l)),FRe(function(){!(yr&6)&&tf()}),b=null;else{switch(Qde(P)){case 1:b=Ij;break;case 4:b=Xde;break;case 16:b=HR;break;case 536870912:b=Yde;break;default:b=HR}b=gfe(b,lfe.bind(null,l))}l.callbackPriority=d,l.callbackNode=b}}function lfe(l,d){if(VO=-1,jO=0,yr&6)throw Error(c(327));var b=l.callbackNode;if(Fb()&&l.callbackNode!==b)return null;var P=KR(l,l===Po?Xo:0);if(P===0)return null;if(P&30||P&l.expiredLanes||d)d=zO(l,P);else{d=P;var B=yr;yr|=2;var $=dfe();(Po!==l||Xo!==d)&&(nh=null,Nb=Yi()+500,Jv(l,d));do try{lOe();break}catch(Ce){cfe(l,Ce)}while(1);fz(),LO.current=$,yr=B,oo!==null?d=0:(Po=null,Xo=0,d=fo)}if(d!==0){if(d===2&&(B=Rj(l),B!==0&&(P=B,d=Yz(l,B))),d===1)throw b=GE,Jv(l,0),uf(l,P),ca(l,Yi()),b;if(d===6)uf(l,P);else{if(B=l.current.alternate,!(P&30)&&!sOe(B)&&(d=zO(l,P),d===2&&($=Rj(l),$!==0&&(P=$,d=Yz(l,$))),d===1))throw b=GE,Jv(l,0),uf(l,P),ca(l,Yi()),b;switch(l.finishedWork=B,l.finishedLanes=P,d){case 0:case 1:throw Error(c(345));case 2:eg(l,ua,nh);break;case 3:if(uf(l,P),(P&130023424)===P&&(d=Kz+500-Yi(),10<d)){if(KR(l,0)!==0)break;if(B=l.suspendedLanes,(B&P)!==P){Fs(),l.pingedLanes|=l.suspendedLanes&B;break}l.timeoutHandle=rz(eg.bind(null,l,ua,nh),d);break}eg(l,ua,nh);break;case 4:if(uf(l,P),(P&4194240)===P)break;for(d=l.eventTimes,B=-1;0<P;){var oe=31-_u(P);$=1<<oe,oe=d[oe],oe>B&&(B=oe),P&=~$}if(P=B,P=Yi()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*oOe(P/1960))-P,10<P){l.timeoutHandle=rz(eg.bind(null,l,ua,nh),P);break}eg(l,ua,nh);break;case 5:eg(l,ua,nh);break;default:throw Error(c(329))}}}return ca(l,Yi()),l.callbackNode===b?lfe.bind(null,l):null}function Yz(l,d){var b=WE;return l.current.memoizedState.isDehydrated&&(Jv(l,d).flags|=256),l=zO(l,d),l!==2&&(d=ua,ua=b,d!==null&&Zz(d)),l}function Zz(l){ua===null?ua=l:ua.push.apply(ua,l)}function sOe(l){for(var d=l;;){if(d.flags&16384){var b=d.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var P=0;P<b.length;P++){var B=b[P],$=B.getSnapshot;B=B.value;try{if(!wu($(),B))return!1}catch{return!1}}}if(b=d.child,d.subtreeFlags&16384&&b!==null)b.return=d,d=b;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function uf(l,d){for(d&=~$z,d&=~NO,l.suspendedLanes|=d,l.pingedLanes&=~d,l=l.expirationTimes;0<d;){var b=31-_u(d),P=1<<b;l[b]=-1,d&=~P}}function ufe(l){if(yr&6)throw Error(c(327));Fb();var d=KR(l,0);if(!(d&1))return ca(l,Yi()),null;var b=zO(l,d);if(l.tag!==0&&b===2){var P=Rj(l);P!==0&&(d=P,b=Yz(l,P))}if(b===1)throw b=GE,Jv(l,0),uf(l,d),ca(l,Yi()),b;if(b===6)throw Error(c(345));return l.finishedWork=l.current.alternate,l.finishedLanes=d,eg(l,ua,nh),ca(l,Yi()),null}function Qz(l,d){var b=yr;yr|=1;try{return l(d)}finally{yr=b,yr===0&&(Nb=Yi()+500,mO&&tf())}}function Qv(l){af!==null&&af.tag===0&&!(yr&6)&&Fb();var d=yr;yr|=1;var b=El.transition,P=Vr;try{if(El.transition=null,Vr=1,l)return l()}finally{Vr=P,El.transition=b,yr=d,!(yr&6)&&tf()}}function Jz(){Oa=Lb.current,mi(Lb)}function Jv(l,d){l.finishedWork=null,l.finishedLanes=0;var b=l.timeoutHandle;if(b!==-1&&(l.timeoutHandle=-1,NRe(b)),oo!==null)for(b=oo.return;b!==null;){var P=b;switch(uz(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&pO();break;case 3:Rb(),mi(sa),mi(us),Ez();break;case 5:xz(P);break;case 4:Rb();break;case 13:mi(ki);break;case 19:mi(ki);break;case 10:mz(P.type._context);break;case 22:case 23:Jz()}b=b.return}if(Po=l,oo=l=cf(l.current,null),Xo=Oa=d,fo=0,GE=null,$z=NO=Zv=0,ua=WE=null,qv!==null){for(d=0;d<qv.length;d++)if(b=qv[d],P=b.interleaved,P!==null){b.interleaved=null;var B=P.next,$=b.pending;if($!==null){var oe=$.next;$.next=B,P.next=oe}b.pending=P}qv=null}return l}function cfe(l,d){do{var b=oo;try{if(fz(),PO.current=AO,kO){for(var P=Ti.memoizedState;P!==null;){var B=P.queue;B!==null&&(B.pending=null),P=P.next}kO=!1}if(Yv=0,Co=po=Ti=null,BE=!1,UE=0,Wz.current=null,b===null||b.return===null){fo=1,GE=d,oo=null;break}e:{var $=l,oe=b.return,Ce=b,Oe=d;if(d=Xo,Ce.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var ct=Oe,Rt=Ce,Nt=Rt.tag;if(!(Rt.mode&1)&&(Nt===0||Nt===11||Nt===15)){var It=Rt.alternate;It?(Rt.updateQueue=It.updateQueue,Rt.memoizedState=It.memoizedState,Rt.lanes=It.lanes):(Rt.updateQueue=null,Rt.memoizedState=null)}var nn=Dpe(oe);if(nn!==null){nn.flags&=-257,Lpe(nn,oe,Ce,$,d),nn.mode&1&&Ope($,ct,d),d=nn,Oe=ct;var dn=d.updateQueue;if(dn===null){var fn=new Set;fn.add(Oe),d.updateQueue=fn}else dn.add(Oe);break e}else{if(!(d&1)){Ope($,ct,d),e6();break e}Oe=Error(c(426))}}else if(yi&&Ce.mode&1){var Zi=Dpe(oe);if(Zi!==null){!(Zi.flags&65536)&&(Zi.flags|=256),Lpe(Zi,oe,Ce,$,d),hz(Ob(Oe,Ce));break e}}$=Oe=Ob(Oe,Ce),fo!==4&&(fo=2),WE===null?WE=[$]:WE.push($),$=oe;do{switch($.tag){case 3:$.flags|=65536,d&=-d,$.lanes|=d;var Ye=Ipe($,Oe,d);epe($,Ye);break e;case 1:Ce=Oe;var Ve=$.type,rt=$.stateNode;if(!($.flags&128)&&(typeof Ve.getDerivedStateFromError=="function"||rt!==null&&typeof rt.componentDidCatch=="function"&&(sf===null||!sf.has(rt)))){$.flags|=65536,d&=-d,$.lanes|=d;var zt=Rpe($,Ce,d);epe($,zt);break e}}$=$.return}while($!==null)}pfe(b)}catch(vn){d=vn,oo===b&&b!==null&&(oo=b=b.return);continue}break}while(1)}function dfe(){var l=LO.current;return LO.current=AO,l===null?AO:l}function e6(){(fo===0||fo===3||fo===2)&&(fo=4),Po===null||!(Zv&268435455)&&!(NO&268435455)||uf(Po,Xo)}function zO(l,d){var b=yr;yr|=2;var P=dfe();(Po!==l||Xo!==d)&&(nh=null,Jv(l,d));do try{aOe();break}catch(B){cfe(l,B)}while(1);if(fz(),yr=b,LO.current=P,oo!==null)throw Error(c(261));return Po=null,Xo=0,fo}function aOe(){for(;oo!==null;)hfe(oo)}function lOe(){for(;oo!==null&&!LIe();)hfe(oo)}function hfe(l){var d=vfe(l.alternate,l,Oa);l.memoizedProps=l.pendingProps,d===null?pfe(l):oo=d,Wz.current=null}function pfe(l){var d=l;do{var b=d.alternate;if(l=d.return,d.flags&32768){if(b=tOe(b,d),b!==null){b.flags&=32767,oo=b;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{fo=6,oo=null;return}}else if(b=eOe(b,d,Oa),b!==null){oo=b;return}if(d=d.sibling,d!==null){oo=d;return}oo=d=l}while(d!==null);fo===0&&(fo=5)}function eg(l,d,b){var P=Vr,B=El.transition;try{El.transition=null,Vr=1,uOe(l,d,b,P)}finally{El.transition=B,Vr=P}return null}function uOe(l,d,b,P){do Fb();while(af!==null);if(yr&6)throw Error(c(327));b=l.finishedWork;var B=l.finishedLanes;if(b===null)return null;if(l.finishedWork=null,l.finishedLanes=0,b===l.current)throw Error(c(177));l.callbackNode=null,l.callbackPriority=0;var $=b.lanes|b.childLanes;if(WIe(l,$),l===Po&&(oo=Po=null,Xo=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||BO||(BO=!0,gfe(HR,function(){return Fb(),null})),$=(b.flags&15990)!==0,b.subtreeFlags&15990||$){$=El.transition,El.transition=null;var oe=Vr;Vr=1;var Ce=yr;yr|=4,Wz.current=null,rOe(l,b),rfe(b,l),IRe(tz),YR=!!ez,tz=ez=null,l.current=b,iOe(b),NIe(),yr=Ce,Vr=oe,El.transition=$}else l.current=b;if(BO&&(BO=!1,af=l,UO=B),$=l.pendingLanes,$===0&&(sf=null),UIe(b.stateNode),ca(l,Yi()),d!==null)for(P=l.onRecoverableError,b=0;b<d.length;b++)B=d[b],P(B.value,{componentStack:B.stack,digest:B.digest});if(FO)throw FO=!1,l=qz,qz=null,l;return UO&1&&l.tag!==0&&Fb(),$=l.pendingLanes,$&1?l===Xz?$E++:($E=0,Xz=l):$E=0,tf(),null}function Fb(){if(af!==null){var l=Qde(UO),d=El.transition,b=Vr;try{if(El.transition=null,Vr=16>l?16:l,af===null)var P=!1;else{if(l=af,af=null,UO=0,yr&6)throw Error(c(331));var B=yr;for(yr|=4,an=l.current;an!==null;){var $=an,oe=$.child;if(an.flags&16){var Ce=$.deletions;if(Ce!==null){for(var Oe=0;Oe<Ce.length;Oe++){var ct=Ce[Oe];for(an=ct;an!==null;){var Rt=an;switch(Rt.tag){case 0:case 11:case 15:HE(8,Rt,$)}var Nt=Rt.child;if(Nt!==null)Nt.return=Rt,an=Nt;else for(;an!==null;){Rt=an;var It=Rt.sibling,nn=Rt.return;if(Qpe(Rt),Rt===ct){an=null;break}if(It!==null){It.return=nn,an=It;break}an=nn}}}var dn=$.alternate;if(dn!==null){var fn=dn.child;if(fn!==null){dn.child=null;do{var Zi=fn.sibling;fn.sibling=null,fn=Zi}while(fn!==null)}}an=$}}if($.subtreeFlags&2064&&oe!==null)oe.return=$,an=oe;else e:for(;an!==null;){if($=an,$.flags&2048)switch($.tag){case 0:case 11:case 15:HE(9,$,$.return)}var Ye=$.sibling;if(Ye!==null){Ye.return=$.return,an=Ye;break e}an=$.return}}var Ve=l.current;for(an=Ve;an!==null;){oe=an;var rt=oe.child;if(oe.subtreeFlags&2064&&rt!==null)rt.return=oe,an=rt;else e:for(oe=Ve;an!==null;){if(Ce=an,Ce.flags&2048)try{switch(Ce.tag){case 0:case 11:case 15:DO(9,Ce)}}catch(vn){Fi(Ce,Ce.return,vn)}if(Ce===oe){an=null;break e}var zt=Ce.sibling;if(zt!==null){zt.return=Ce.return,an=zt;break e}an=Ce.return}}if(yr=B,tf(),Mc&&typeof Mc.onPostCommitFiberRoot=="function")try{Mc.onPostCommitFiberRoot(GR,l)}catch{}P=!0}return P}finally{Vr=b,El.transition=d}}return!1}function ffe(l,d,b){d=Ob(b,d),d=Ipe(l,d,1),l=rf(l,d,1),d=Fs(),l!==null&&(vE(l,1,d),ca(l,d))}function Fi(l,d,b){if(l.tag===3)ffe(l,l,b);else for(;d!==null;){if(d.tag===3){ffe(d,l,b);break}else if(d.tag===1){var P=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(sf===null||!sf.has(P))){l=Ob(b,l),l=Rpe(d,l,1),d=rf(d,l,1),l=Fs(),d!==null&&(vE(d,1,l),ca(d,l));break}}d=d.return}}function cOe(l,d,b){var P=l.pingCache;P!==null&&P.delete(d),d=Fs(),l.pingedLanes|=l.suspendedLanes&b,Po===l&&(Xo&b)===b&&(fo===4||fo===3&&(Xo&130023424)===Xo&&500>Yi()-Kz?Jv(l,0):$z|=b),ca(l,d)}function mfe(l,d){d===0&&(l.mode&1?(d=$R,$R<<=1,!($R&130023424)&&($R=4194304)):d=1);var b=Fs();l=Jd(l,d),l!==null&&(vE(l,d,b),ca(l,b))}function dOe(l){var d=l.memoizedState,b=0;d!==null&&(b=d.retryLane),mfe(l,b)}function hOe(l,d){var b=0;switch(l.tag){case 13:var P=l.stateNode,B=l.memoizedState;B!==null&&(b=B.retryLane);break;case 19:P=l.stateNode;break;default:throw Error(c(314))}P!==null&&P.delete(d),mfe(l,b)}var vfe;vfe=function(l,d,b){if(l!==null)if(l.memoizedProps!==d.pendingProps||sa.current)la=!0;else{if(!(l.lanes&b)&&!(d.flags&128))return la=!1,JRe(l,d,b);la=!!(l.flags&131072)}else la=!1,yi&&d.flags&1048576&&Khe(d,gO,d.index);switch(d.lanes=0,d.tag){case 2:var P=d.type;RO(l,d),l=d.pendingProps;var B=Cb(d,us.current);Ab(d,b),B=kz(null,d,P,l,B,b);var $=Tz();return d.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,aa(P)?($=!0,fO(d)):$=!1,d.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,yz(d),B.updater=SO,d.stateNode=B,B._reactInternals=d,_z(d,P,l,b),d=Nz(null,d,P,!0,$,b)):(d.tag=0,yi&&$&&lz(d),Ns(null,d,B,b),d=d.child),d;case 16:P=d.elementType;e:{switch(RO(l,d),l=d.pendingProps,B=P._init,P=B(P._payload),d.type=P,B=d.tag=fOe(P),l=Su(P,l),B){case 0:d=Lz(null,d,P,l,b);break e;case 1:d=jpe(null,d,P,l,b);break e;case 11:d=Npe(null,d,P,l,b);break e;case 14:d=Fpe(null,d,P,Su(P.type,l),b);break e}throw Error(c(306,P,""))}return d;case 0:return P=d.type,B=d.pendingProps,B=d.elementType===P?B:Su(P,B),Lz(l,d,P,B,b);case 1:return P=d.type,B=d.pendingProps,B=d.elementType===P?B:Su(P,B),jpe(l,d,P,B,b);case 3:e:{if(zpe(d),l===null)throw Error(c(387));P=d.pendingProps,$=d.memoizedState,B=$.element,Jhe(l,d),xO(d,P,null,b);var oe=d.memoizedState;if(P=oe.element,$.isDehydrated)if($={element:P,isDehydrated:!1,cache:oe.cache,pendingSuspenseBoundaries:oe.pendingSuspenseBoundaries,transitions:oe.transitions},d.updateQueue.baseState=$,d.memoizedState=$,d.flags&256){B=Ob(Error(c(423)),d),d=Hpe(l,d,P,b,B);break e}else if(P!==B){B=Ob(Error(c(424)),d),d=Hpe(l,d,P,b,B);break e}else for(Ra=Qp(d.stateNode.containerInfo.firstChild),Ia=d,yi=!0,xu=null,b=lpe(d,null,P,b),d.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Tb(),P===B){d=th(l,d,b);break e}Ns(l,d,P,b)}d=d.child}return d;case 5:return upe(d),l===null&&dz(d),P=d.type,B=d.pendingProps,$=l!==null?l.memoizedProps:null,oe=B.children,nz(P,B)?oe=null:$!==null&&nz(P,$)&&(d.flags|=32),Vpe(l,d),Ns(l,d,oe,b),d.child;case 6:return l===null&&dz(d),null;case 13:return Gpe(l,d,b);case 4:return wz(d,d.stateNode.containerInfo),P=d.pendingProps,l===null?d.child=Ib(d,null,P,b):Ns(l,d,P,b),d.child;case 11:return P=d.type,B=d.pendingProps,B=d.elementType===P?B:Su(P,B),Npe(l,d,P,B,b);case 7:return Ns(l,d,d.pendingProps,b),d.child;case 8:return Ns(l,d,d.pendingProps.children,b),d.child;case 12:return Ns(l,d,d.pendingProps.children,b),d.child;case 10:e:{if(P=d.type._context,B=d.pendingProps,$=d.memoizedProps,oe=B.value,oi(bO,P._currentValue),P._currentValue=oe,$!==null)if(wu($.value,oe)){if($.children===B.children&&!sa.current){d=th(l,d,b);break e}}else for($=d.child,$!==null&&($.return=d);$!==null;){var Ce=$.dependencies;if(Ce!==null){oe=$.child;for(var Oe=Ce.firstContext;Oe!==null;){if(Oe.context===P){if($.tag===1){Oe=eh(-1,b&-b),Oe.tag=2;var ct=$.updateQueue;if(ct!==null){ct=ct.shared;var Rt=ct.pending;Rt===null?Oe.next=Oe:(Oe.next=Rt.next,Rt.next=Oe),ct.pending=Oe}}$.lanes|=b,Oe=$.alternate,Oe!==null&&(Oe.lanes|=b),vz($.return,b,d),Ce.lanes|=b;break}Oe=Oe.next}}else if($.tag===10)oe=$.type===d.type?null:$.child;else if($.tag===18){if(oe=$.return,oe===null)throw Error(c(341));oe.lanes|=b,Ce=oe.alternate,Ce!==null&&(Ce.lanes|=b),vz(oe,b,d),oe=$.sibling}else oe=$.child;if(oe!==null)oe.return=$;else for(oe=$;oe!==null;){if(oe===d){oe=null;break}if($=oe.sibling,$!==null){$.return=oe.return,oe=$;break}oe=oe.return}$=oe}Ns(l,d,B.children,b),d=d.child}return d;case 9:return B=d.type,P=d.pendingProps.children,Ab(d,b),B=xl(B),P=P(B),d.flags|=1,Ns(l,d,P,b),d.child;case 14:return P=d.type,B=Su(P,d.pendingProps),B=Su(P.type,B),Fpe(l,d,P,B,b);case 15:return Bpe(l,d,d.type,d.pendingProps,b);case 17:return P=d.type,B=d.pendingProps,B=d.elementType===P?B:Su(P,B),RO(l,d),d.tag=1,aa(P)?(l=!0,fO(d)):l=!1,Ab(d,b),ipe(d,P,B),_z(d,P,B,b),Nz(null,d,P,!0,l,b);case 19:return $pe(l,d,b);case 22:return Upe(l,d,b)}throw Error(c(156,d.tag))};function gfe(l,d){return Kde(l,d)}function pOe(l,d,b,P){this.tag=l,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cl(l,d,b,P){return new pOe(l,d,b,P)}function t6(l){return l=l.prototype,!(!l||!l.isReactComponent)}function fOe(l){if(typeof l=="function")return t6(l)?1:0;if(l!=null){if(l=l.$$typeof,l===Ae)return 11;if(l===Tt)return 14}return 2}function cf(l,d){var b=l.alternate;return b===null?(b=Cl(l.tag,d,l.key,l.mode),b.elementType=l.elementType,b.type=l.type,b.stateNode=l.stateNode,b.alternate=l,l.alternate=b):(b.pendingProps=d,b.type=l.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=l.flags&14680064,b.childLanes=l.childLanes,b.lanes=l.lanes,b.child=l.child,b.memoizedProps=l.memoizedProps,b.memoizedState=l.memoizedState,b.updateQueue=l.updateQueue,d=l.dependencies,b.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},b.sibling=l.sibling,b.index=l.index,b.ref=l.ref,b}function HO(l,d,b,P,B,$){var oe=2;if(P=l,typeof l=="function")t6(l)&&(oe=1);else if(typeof l=="string")oe=5;else e:switch(l){case fe:return tg(b.children,B,$,d);case ge:oe=8,B|=8;break;case Ie:return l=Cl(12,b,d,B|2),l.elementType=Ie,l.lanes=$,l;case Y:return l=Cl(13,b,d,B),l.elementType=Y,l.lanes=$,l;case Ue:return l=Cl(19,b,d,B),l.elementType=Ue,l.lanes=$,l;case Te:return GO(b,B,$,d);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case Qe:oe=10;break e;case le:oe=9;break e;case Ae:oe=11;break e;case Tt:oe=14;break e;case ke:oe=16,P=null;break e}throw Error(c(130,l==null?l:typeof l,""))}return d=Cl(oe,b,d,B),d.elementType=l,d.type=P,d.lanes=$,d}function tg(l,d,b,P){return l=Cl(7,l,P,d),l.lanes=b,l}function GO(l,d,b,P){return l=Cl(22,l,P,d),l.elementType=Te,l.lanes=b,l.stateNode={isHidden:!1},l}function n6(l,d,b){return l=Cl(6,l,null,d),l.lanes=b,l}function r6(l,d,b){return d=Cl(4,l.children!==null?l.children:[],l.key,d),d.lanes=b,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}function mOe(l,d,b,P,B){this.tag=d,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oj(0),this.expirationTimes=Oj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oj(0),this.identifierPrefix=P,this.onRecoverableError=B,this.mutableSourceEagerHydrationData=null}function i6(l,d,b,P,B,$,oe,Ce,Oe){return l=new mOe(l,d,b,Ce,Oe),d===1?(d=1,$===!0&&(d|=8)):d=0,$=Cl(3,null,null,d),l.current=$,$.stateNode=l,$.memoizedState={element:P,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},yz($),l}function vOe(l,d,b){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xe,key:P==null?null:""+P,children:l,containerInfo:d,implementation:b}}function yfe(l){if(!l)return ef;l=l._reactInternals;e:{if(Hv(l)!==l||l.tag!==1)throw Error(c(170));var d=l;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(aa(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(c(171))}if(l.tag===1){var b=l.type;if(aa(b))return Ghe(l,b,d)}return d}function bfe(l,d,b,P,B,$,oe,Ce,Oe){return l=i6(b,P,!0,l,B,$,oe,Ce,Oe),l.context=yfe(null),b=l.current,P=Fs(),B=lf(b),$=eh(P,B),$.callback=d??null,rf(b,$,B),l.current.lanes=B,vE(l,B,P),ca(l,P),l}function WO(l,d,b,P){var B=d.current,$=Fs(),oe=lf(B);return b=yfe(b),d.context===null?d.context=b:d.pendingContext=b,d=eh($,oe),d.payload={element:l},P=P===void 0?null:P,P!==null&&(d.callback=P),l=rf(B,d,oe),l!==null&&(Pu(l,B,oe,$),wO(l,B,oe)),oe}function $O(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function _fe(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var b=l.retryLane;l.retryLane=b!==0&&b<d?b:d}}function o6(l,d){_fe(l,d),(l=l.alternate)&&_fe(l,d)}function gOe(){return null}var wfe=typeof reportError=="function"?reportError:function(l){console.error(l)};function s6(l){this._internalRoot=l}KO.prototype.render=s6.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(c(409));WO(l,d,null,null)},KO.prototype.unmount=s6.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;Qv(function(){WO(null,l,null,null)}),d[Xd]=null}};function KO(l){this._internalRoot=l}KO.prototype.unstable_scheduleHydration=function(l){if(l){var d=the();l={blockedOn:null,target:l,priority:d};for(var b=0;b<Xp.length&&d!==0&&d<Xp[b].priority;b++);Xp.splice(b,0,l),b===0&&ihe(l)}};function a6(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function qO(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function xfe(){}function yOe(l,d,b,P,B){if(B){if(typeof P=="function"){var $=P;P=function(){var ct=$O(oe);$.call(ct)}}var oe=bfe(d,P,l,0,null,!1,!1,"",xfe);return l._reactRootContainer=oe,l[Xd]=oe.current,AE(l.nodeType===8?l.parentNode:l),Qv(),oe}for(;B=l.lastChild;)l.removeChild(B);if(typeof P=="function"){var Ce=P;P=function(){var ct=$O(Oe);Ce.call(ct)}}var Oe=i6(l,0,!1,null,null,!1,!1,"",xfe);return l._reactRootContainer=Oe,l[Xd]=Oe.current,AE(l.nodeType===8?l.parentNode:l),Qv(function(){WO(d,Oe,b,P)}),Oe}function XO(l,d,b,P,B){var $=b._reactRootContainer;if($){var oe=$;if(typeof B=="function"){var Ce=B;B=function(){var Oe=$O(oe);Ce.call(Oe)}}WO(d,oe,l,B)}else oe=yOe(b,d,l,B,P);return $O(oe)}Jde=function(l){switch(l.tag){case 3:var d=l.stateNode;if(d.current.memoizedState.isDehydrated){var b=mE(d.pendingLanes);b!==0&&(Dj(d,b|1),ca(d,Yi()),!(yr&6)&&(Nb=Yi()+500,tf()))}break;case 13:Qv(function(){var P=Jd(l,1);if(P!==null){var B=Fs();Pu(P,l,1,B)}}),o6(l,1)}},Lj=function(l){if(l.tag===13){var d=Jd(l,134217728);if(d!==null){var b=Fs();Pu(d,l,134217728,b)}o6(l,134217728)}},ehe=function(l){if(l.tag===13){var d=lf(l),b=Jd(l,d);if(b!==null){var P=Fs();Pu(b,l,d,P)}o6(l,d)}},the=function(){return Vr},nhe=function(l,d){var b=Vr;try{return Vr=l,d()}finally{Vr=b}},fb=function(l,d,b){switch(d){case"input":if(be(l,b),d=b.name,b.type==="radio"&&d!=null){for(b=l;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<b.length;d++){var P=b[d];if(P!==l&&P.form===l.form){var B=hO(P);if(!B)throw Error(c(90));Er(P),be(P,B)}}}break;case"textarea":Pt(l,b);break;case"select":d=b.value,d!=null&&Xe(l,!!b.multiple,d,!1)}},Vde=Qz,jde=Qv;var bOe={usingClientEntryPoint:!1,Events:[OE,Sb,hO,Bde,Ude,Qz]},KE={findFiberByHostInstance:Gv,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},_Oe={bundleType:KE.bundleType,version:KE.version,rendererPackageName:KE.rendererPackageName,rendererConfig:KE.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=Wde(l),l===null?null:l.stateNode},findFiberByHostInstance:KE.findFiberByHostInstance||gOe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(qE=__REACT_DEVTOOLS_GLOBAL_HOOK__,!qE.isDisabled&&qE.supportsFiber))try{GR=qE.inject(_Oe),Mc=qE}catch{}var qE;i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bOe,i.createPortal=function(l,d){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a6(d))throw Error(c(200));return vOe(l,d,null,b)},i.createRoot=function(l,d){if(!a6(l))throw Error(c(299));var b=!1,P="",B=wfe;return d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(P=d.identifierPrefix),d.onRecoverableError!==void 0&&(B=d.onRecoverableError)),d=i6(l,1,!1,null,null,b,!1,P,B),l[Xd]=d.current,AE(l.nodeType===8?l.parentNode:l),new s6(d)},i.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(c(188)):(l=Object.keys(l).join(","),Error(c(268,l)));return l=Wde(d),l=l===null?null:l.stateNode,l},i.flushSync=function(l){return Qv(l)},i.hydrate=function(l,d,b){if(!qO(d))throw Error(c(200));return XO(null,l,d,!0,b)},i.hydrateRoot=function(l,d,b){if(!a6(l))throw Error(c(405));var P=b!=null&&b.hydratedSources||null,B=!1,$="",oe=wfe;if(b!=null&&(b.unstable_strictMode===!0&&(B=!0),b.identifierPrefix!==void 0&&($=b.identifierPrefix),b.onRecoverableError!==void 0&&(oe=b.onRecoverableError)),d=bfe(d,null,l,1,b??null,B,!1,$,oe),l[Xd]=d.current,AE(l),P)for(l=0;l<P.length;l++)b=P[l],B=b._getVersion,B=B(b._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[b,B]:d.mutableSourceEagerHydrationData.push(b,B);return new KO(d)},i.render=function(l,d,b){if(!qO(d))throw Error(c(200));return XO(null,l,d,!1,b)},i.unmountComponentAtNode=function(l){if(!qO(l))throw Error(c(40));return l._reactRootContainer?(Qv(function(){XO(null,null,l,!1,function(){l._reactRootContainer=null,l[Xd]=null})}),!0):!1},i.unstable_batchedUpdates=Qz,i.unstable_renderSubtreeIntoContainer=function(l,d,b,P){if(!qO(b))throw Error(c(200));if(l==null||l._reactInternals===void 0)throw Error(c(38));return XO(l,d,b,!1,P)},i.version="18.2.0-next-9e3b772b8-20220608"}),Xl=K((i,s)=>{function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(c){console.error(c)}}a(),s.exports=fx()});function mF(i){let[,s]=(0,rc.useState)(0);return(0,rc.useCallback)(()=>{s(a=>a+1)},[])}function Un(i,s,a){let c=(0,rc.useCallback)(i,s),p=(0,rc.useRef)(null);p.current?p.current.set(c):p.current=new ea.Atom(c);let f=(0,rc.useRef)(null);return f.current||(f.current=(0,ea.prism)(()=>p.current.prism.getValue()())),ty(f.current,a)}function R2(){Ym||(Ym=!0,(0,mx.default)(()=>{(0,O2.unstable_batchedUpdates)(function(){for(var i,s;wa.length>0;){let a=wa.shift();up.delete(a);let c;Yl&&((i=a.debug)==null||i.history.push("queue reached"));try{c=a.der.getValue()}catch(p){Yl&&((s=a.debug)==null||s.history.push("queue: der.getValue() errored")),console.error("A `der.getValue()` in `usePrismInstance(der)` threw an error. This may be a zombie child issue, so we're gonna try to get its value again in a normal react render phase.If you see the same error again, then you either have an error in your prism code, or the deps array in `usePrism(fn, deps)` is missing a dependency and causing the prism to read stale values."),console.error(p),a.runUpdate();continue}c!==a.lastValue&&(a.lastValue=c,a.runUpdate())}Ym=!1},1)}))}function ty(i,s){var a;let c=mF(),p=(0,rc.useRef)(void 0);p.current||(vx++,p.current={order:vx,runUpdate:()=>{p.current.unmounted||c()},der:i,lastValue:void 0,unmounted:!1,queueUpdate:()=>{var g;Yl&&((g=p.current.debug)==null||g.history.push("queueUpdate()")),D2(p.current)},untap:i.onStale(()=>{Yl&&p.current.debug.history.push("onStale(cb)"),p.current.queueUpdate()})},Yl&&(p.current.debug={label:s,traceOfFirstTimeRender:new Error,history:[]})),(0,rc.useLayoutEffect)(()=>function(){p.current.unmounted=!0,p.current.untap(),gx(p.current)},[]),gx(p.current);let f=p.current.der.getValue();return p.current.lastValue=f,Yl&&((a=p.current.debug)==null||a.history.push("rendered")),f}var ea,mx,rc,O2,Yl,Wn,vx,wa,up,Ym,D2,L2,gx,hn=C(()=>{ea=Mt,ti(),mx=Q(px()),rc=Q(Re()),O2=Q(Xl()),Yl=!1,Wn=(i,s)=>Un(()=>(0,ea.val)(i),[i],s),vx=0,wa=[],up=new Set,Ym=!1,D2=i=>{L2(i),R2()},L2=i=>{if(!up.has(i))if(up.add(i),wa.length===0)wa.push(i);else{let s=rx(wa,a=>a.order>=i.order);s===-1?wa.push(i):wa[s].order>i.order&&wa.splice(s,0,i)}},gx=i=>{if(!up.has(i))return;up.delete(i);let s=rx(wa,a=>a===i);wa.splice(s,1)}}),vF=K(i=>{var s=60103,a=60106,c=60107,p=60108,f=60114,g=60109,y=60110,w=60112,S=60113,M=60120,R=60115,A=60116,k=60121,D=60122,O=60117,F=60129,V=60131;typeof Symbol=="function"&&Symbol.for&&(W=Symbol.for,s=W("react.element"),a=W("react.portal"),c=W("react.fragment"),p=W("react.strict_mode"),f=W("react.profiler"),g=W("react.provider"),y=W("react.context"),w=W("react.forward_ref"),S=W("react.suspense"),M=W("react.suspense_list"),R=W("react.memo"),A=W("react.lazy"),k=W("react.block"),D=W("react.server.block"),O=W("react.fundamental"),F=W("react.debug_trace_mode"),V=W("react.legacy_hidden"));var W;function X(Y){if(typeof Y=="object"&&Y!==null){var Ue=Y.$$typeof;switch(Ue){case s:switch(Y=Y.type,Y){case c:case f:case p:case S:case M:return Y;default:switch(Y=Y&&Y.$$typeof,Y){case y:case w:case A:case R:case g:return Y;default:return Ue}}case a:return Ue}}}var re=g,ne=s,ae=w,xe=c,fe=A,ge=R,Ie=a,Qe=f,le=p,Ae=S;i.ContextConsumer=y,i.ContextProvider=re,i.Element=ne,i.ForwardRef=ae,i.Fragment=xe,i.Lazy=fe,i.Memo=ge,i.Portal=Ie,i.Profiler=Qe,i.StrictMode=le,i.Suspense=Ae,i.isAsyncMode=function(){return!1},i.isConcurrentMode=function(){return!1},i.isContextConsumer=function(Y){return X(Y)===y},i.isContextProvider=function(Y){return X(Y)===g},i.isElement=function(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===s},i.isForwardRef=function(Y){return X(Y)===w},i.isFragment=function(Y){return X(Y)===c},i.isLazy=function(Y){return X(Y)===A},i.isMemo=function(Y){return X(Y)===R},i.isPortal=function(Y){return X(Y)===a},i.isProfiler=function(Y){return X(Y)===f},i.isStrictMode=function(Y){return X(Y)===p},i.isSuspense=function(Y){return X(Y)===S},i.isValidElementType=function(Y){return typeof Y=="string"||typeof Y=="function"||Y===c||Y===f||Y===F||Y===p||Y===S||Y===M||Y===V||typeof Y=="object"&&Y!==null&&(Y.$$typeof===A||Y.$$typeof===R||Y.$$typeof===g||Y.$$typeof===y||Y.$$typeof===w||Y.$$typeof===O||Y.$$typeof===k||Y[0]===D)},i.typeOf=X}),gF=K((i,s)=>{s.exports=vF()}),yx=K((i,s)=>{s.exports=function(a,c,p,f){var g=p?p.call(f,a,c):void 0;if(g!==void 0)return!!g;if(a===c)return!0;if(typeof a!="object"||!a||typeof c!="object"||!c)return!1;var y=Object.keys(a),w=Object.keys(c);if(y.length!==w.length)return!1;for(var S=Object.prototype.hasOwnProperty.bind(c),M=0;M<y.length;M++){var R=y[M];if(!S(R))return!1;var A=a[R],k=c[R];if(g=p?p.call(f,A,k,R):void 0,g===!1||g===void 0&&A!==k)return!1}return!0}});function yF(i){function s(he,qe,Ze,ot,ze){for(var Zt=0,bt=0,Kt=0,cn=0,In,Cn,Er=0,J=0,at,st=at=In=0,we=0,be=0,He=0,xt=0,Ct=Ze.length,Xe=Ct-1,At,Et="",Pt="",_n="",gr="",Hn;we<Ct;){if(Cn=Ze.charCodeAt(we),we===Xe&&bt+cn+Kt+Zt!==0&&(bt!==0&&(Cn=bt===47?10:47),cn=Kt=Zt=0,Ct++,Xe++),bt+cn+Kt+Zt===0){if(we===Xe&&(0<be&&(Et=Et.replace(A,"")),0<Et.trim().length)){switch(Cn){case 32:case 9:case 59:case 13:case 10:break;default:Et+=Ze.charAt(we)}Cn=59}switch(Cn){case 123:for(Et=Et.trim(),In=Et.charCodeAt(0),at=1,xt=++we;we<Ct;){switch(Cn=Ze.charCodeAt(we)){case 123:at++;break;case 125:at--;break;case 47:switch(Cn=Ze.charCodeAt(we+1)){case 42:case 47:e:{for(st=we+1;st<Xe;++st)switch(Ze.charCodeAt(st)){case 47:if(Cn===42&&Ze.charCodeAt(st-1)===42&&we+2!==st){we=st+1;break e}break;case 10:if(Cn===47){we=st+1;break e}}we=st}}break;case 91:Cn++;case 40:Cn++;case 34:case 39:for(;we++<Xe&&Ze.charCodeAt(we)!==Cn;);}if(at===0)break;we++}switch(at=Ze.substring(xt,we),In===0&&(In=(Et=Et.replace(R,"").trim()).charCodeAt(0)),In){case 64:switch(0<be&&(Et=Et.replace(A,"")),Cn=Et.charCodeAt(1),Cn){case 100:case 109:case 115:case 45:be=qe;break;default:be=Tt}if(at=s(qe,be,at,Cn,ze+1),xt=at.length,0<Te&&(be=a(Tt,Et,He),Hn=y(3,at,be,qe,Ae,le,xt,Cn,ze,ot),Et=be.join(""),Hn!==void 0&&(xt=(at=Hn.trim()).length)===0&&(Cn=0,at="")),0<xt)switch(Cn){case 115:Et=Et.replace(ae,g);case 100:case 109:case 45:at=Et+"{"+at+"}";break;case 107:Et=Et.replace(W,"$1 $2"),at=Et+"{"+at+"}",at=Ue===1||Ue===2&&f("@"+at,3)?"@-webkit-"+at+"@"+at:"@"+at;break;default:at=Et+at,ot===112&&(at=(Pt+=at,""))}else at="";break;default:at=s(qe,a(qe,Et,He),at,ot,ze+1)}_n+=at,at=He=be=st=In=0,Et="",Cn=Ze.charCodeAt(++we);break;case 125:case 59:if(Et=(0<be?Et.replace(A,""):Et).trim(),1<(xt=Et.length))switch(st===0&&(In=Et.charCodeAt(0),In===45||96<In&&123>In)&&(xt=(Et=Et.replace(" ",":")).length),0<Te&&(Hn=y(1,Et,qe,he,Ae,le,Pt.length,ot,ze,ot))!==void 0&&(xt=(Et=Hn.trim()).length)===0&&(Et="\0\0"),In=Et.charCodeAt(0),Cn=Et.charCodeAt(1),In){case 0:break;case 64:if(Cn===105||Cn===99){gr+=Et+Ze.charAt(we);break}default:Et.charCodeAt(xt-1)!==58&&(Pt+=p(Et,In,Cn,Et.charCodeAt(2)))}He=be=st=In=0,Et="",Cn=Ze.charCodeAt(++we)}}switch(Cn){case 13:case 10:bt===47?bt=0:1+In===0&&ot!==107&&0<Et.length&&(be=1,Et+="\0"),0<Te*wt&&y(0,Et,qe,he,Ae,le,Pt.length,ot,ze,ot),le=1,Ae++;break;case 59:case 125:if(bt+cn+Kt+Zt===0){le++;break}default:switch(le++,At=Ze.charAt(we),Cn){case 9:case 32:if(cn+Zt+bt===0)switch(Er){case 44:case 58:case 9:case 32:At="";break;default:Cn!==32&&(At=" ")}break;case 0:At="\\0";break;case 12:At="\\f";break;case 11:At="\\v";break;case 38:cn+bt+Zt===0&&(be=He=1,At="\f"+At);break;case 108:if(cn+bt+Zt+Y===0&&0<st)switch(we-st){case 2:Er===112&&Ze.charCodeAt(we-3)===58&&(Y=Er);case 8:J===111&&(Y=J)}break;case 58:cn+bt+Zt===0&&(st=we);break;case 44:bt+Kt+cn+Zt===0&&(be=1,At+="\r");break;case 34:case 39:bt===0&&(cn=cn===Cn?0:cn===0?Cn:cn);break;case 91:cn+bt+Kt===0&&Zt++;break;case 93:cn+bt+Kt===0&&Zt--;break;case 41:cn+bt+Zt===0&&Kt--;break;case 40:if(cn+bt+Zt===0){if(In===0)switch(2*Er+3*J){case 533:break;default:In=1}Kt++}break;case 64:bt+Kt+cn+Zt+st+at===0&&(at=1);break;case 42:case 47:if(!(0<cn+Zt+Kt))switch(bt){case 0:switch(2*Cn+3*Ze.charCodeAt(we+1)){case 235:bt=47;break;case 220:xt=we,bt=42}break;case 42:Cn===47&&Er===42&&xt+2!==we&&(Ze.charCodeAt(xt+2)===33&&(Pt+=Ze.substring(xt,we+1)),At="",bt=0)}}bt===0&&(Et+=At)}J=Er,Er=Cn,we++}if(xt=Pt.length,0<xt){if(be=qe,0<Te&&(Hn=y(2,Pt,be,he,Ae,le,xt,ot,ze,ot),Hn!==void 0&&(Pt=Hn).length===0))return gr+Pt+_n;if(Pt=be.join(",")+"{"+Pt+"}",Ue*Y!==0){switch(Ue!==2||f(Pt,2)||(Y=0),Y){case 111:Pt=Pt.replace(re,":-moz-$1")+Pt;break;case 112:Pt=Pt.replace(X,"::-webkit-input-$1")+Pt.replace(X,"::-moz-$1")+Pt.replace(X,":-ms-input-$1")+Pt}Y=0}}return gr+Pt+_n}function a(he,qe,Ze){var ot=qe.trim().split(F);qe=ot;var ze=ot.length,Zt=he.length;switch(Zt){case 0:case 1:var bt=0;for(he=Zt===0?"":he[0]+" ";bt<ze;++bt)qe[bt]=c(he,qe[bt],Ze).trim();break;default:var Kt=bt=0;for(qe=[];bt<ze;++bt)for(var cn=0;cn<Zt;++cn)qe[Kt++]=c(he[cn]+" ",ot[bt],Ze).trim()}return qe}function c(he,qe,Ze){var ot=qe.charCodeAt(0);switch(33>ot&&(ot=(qe=qe.trim()).charCodeAt(0)),ot){case 38:return qe.replace(V,"$1"+he.trim());case 58:return he.trim()+qe.replace(V,"$1"+he.trim());default:if(0<1*Ze&&0<qe.indexOf("\f"))return qe.replace(V,(he.charCodeAt(0)===58?"":"$1")+he.trim())}return he+qe}function p(he,qe,Ze,ot){var ze=he+";",Zt=2*qe+3*Ze+4*ot;if(Zt===944){he=ze.indexOf(":",9)+1;var bt=ze.substring(he,ze.length-1).trim();return bt=ze.substring(0,he).trim()+bt+";",Ue===1||Ue===2&&f(bt,1)?"-webkit-"+bt+bt:bt}if(Ue===0||Ue===2&&!f(ze,1))return ze;switch(Zt){case 1015:return ze.charCodeAt(10)===97?"-webkit-"+ze+ze:ze;case 951:return ze.charCodeAt(3)===116?"-webkit-"+ze+ze:ze;case 963:return ze.charCodeAt(5)===110?"-webkit-"+ze+ze:ze;case 1009:if(ze.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+ze+ze;case 978:return"-webkit-"+ze+"-moz-"+ze+ze;case 1019:case 983:return"-webkit-"+ze+"-moz-"+ze+"-ms-"+ze+ze;case 883:if(ze.charCodeAt(8)===45)return"-webkit-"+ze+ze;if(0<ze.indexOf("image-set(",11))return ze.replace(Qe,"$1-webkit-$2")+ze;break;case 932:if(ze.charCodeAt(4)===45)switch(ze.charCodeAt(5)){case 103:return"-webkit-box-"+ze.replace("-grow","")+"-webkit-"+ze+"-ms-"+ze.replace("grow","positive")+ze;case 115:return"-webkit-"+ze+"-ms-"+ze.replace("shrink","negative")+ze;case 98:return"-webkit-"+ze+"-ms-"+ze.replace("basis","preferred-size")+ze}return"-webkit-"+ze+"-ms-"+ze+ze;case 964:return"-webkit-"+ze+"-ms-flex-"+ze+ze;case 1023:if(ze.charCodeAt(8)!==99)break;return bt=ze.substring(ze.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+bt+"-webkit-"+ze+"-ms-flex-pack"+bt+ze;case 1005:return D.test(ze)?ze.replace(k,":-webkit-")+ze.replace(k,":-moz-")+ze:ze;case 1e3:switch(bt=ze.substring(13).trim(),qe=bt.indexOf("-")+1,bt.charCodeAt(0)+bt.charCodeAt(qe)){case 226:bt=ze.replace(ne,"tb");break;case 232:bt=ze.replace(ne,"tb-rl");break;case 220:bt=ze.replace(ne,"lr");break;default:return ze}return"-webkit-"+ze+"-ms-"+bt+ze;case 1017:if(ze.indexOf("sticky",9)===-1)break;case 975:switch(qe=(ze=he).length-10,bt=(ze.charCodeAt(qe)===33?ze.substring(0,qe):ze).substring(he.indexOf(":",7)+1).trim(),Zt=bt.charCodeAt(0)+(bt.charCodeAt(7)|0)){case 203:if(111>bt.charCodeAt(8))break;case 115:ze=ze.replace(bt,"-webkit-"+bt)+";"+ze;break;case 207:case 102:ze=ze.replace(bt,"-webkit-"+(102<Zt?"inline-":"")+"box")+";"+ze.replace(bt,"-webkit-"+bt)+";"+ze.replace(bt,"-ms-"+bt+"box")+";"+ze}return ze+";";case 938:if(ze.charCodeAt(5)===45)switch(ze.charCodeAt(6)){case 105:return bt=ze.replace("-items",""),"-webkit-"+ze+"-webkit-box-"+bt+"-ms-flex-"+bt+ze;case 115:return"-webkit-"+ze+"-ms-flex-item-"+ze.replace(fe,"")+ze;default:return"-webkit-"+ze+"-ms-flex-line-pack"+ze.replace("align-content","").replace(fe,"")+ze}break;case 973:case 989:if(ze.charCodeAt(3)!==45||ze.charCodeAt(4)===122)break;case 931:case 953:if(Ie.test(he)===!0)return(bt=he.substring(he.indexOf(":")+1)).charCodeAt(0)===115?p(he.replace("stretch","fill-available"),qe,Ze,ot).replace(":fill-available",":stretch"):ze.replace(bt,"-webkit-"+bt)+ze.replace(bt,"-moz-"+bt.replace("fill-",""))+ze;break;case 962:if(ze="-webkit-"+ze+(ze.charCodeAt(5)===102?"-ms-"+ze:"")+ze,Ze+ot===211&&ze.charCodeAt(13)===105&&0<ze.indexOf("transform",10))return ze.substring(0,ze.indexOf(";",27)+1).replace(O,"$1-webkit-$2")+ze}return ze}function f(he,qe){var Ze=he.indexOf(qe===1?":":"{"),ot=he.substring(0,qe!==3?Ze:10);return Ze=he.substring(Ze+1,he.length-1),je(qe!==2?ot:ot.replace(ge,"$1"),Ze,qe)}function g(he,qe){var Ze=p(qe,qe.charCodeAt(0),qe.charCodeAt(1),qe.charCodeAt(2));return Ze!==qe+";"?Ze.replace(xe," or ($1)").substring(4):"("+qe+")"}function y(he,qe,Ze,ot,ze,Zt,bt,Kt,cn,In){for(var Cn=0,Er=qe,J;Cn<Te;++Cn)switch(J=ke[Cn].call(M,he,Er,Ze,ot,ze,Zt,bt,Kt,cn,In)){case void 0:case!1:case!0:case null:break;default:Er=J}if(Er!==qe)return Er}function w(he){switch(he){case void 0:case null:Te=ke.length=0;break;default:if(typeof he=="function")ke[Te++]=he;else if(typeof he=="object")for(var qe=0,Ze=he.length;qe<Ze;++qe)w(he[qe]);else wt=!!he|0}return w}function S(he){return he=he.prefix,he!==void 0&&(je=null,he?typeof he!="function"?Ue=1:(Ue=2,je=he):Ue=0),S}function M(he,qe){var Ze=he;if(33>Ze.charCodeAt(0)&&(Ze=Ze.trim()),ue=Ze,Ze=[ue],0<Te){var ot=y(-1,qe,Ze,Ze,Ae,le,0,0,0,0);ot!==void 0&&typeof ot=="string"&&(qe=ot)}var ze=s(Tt,Ze,qe,0,0);return 0<Te&&(ot=y(-2,ze,Ze,Ze,Ae,le,ze.length,0,0,0),ot!==void 0&&(ze=ot)),ue="",Y=0,le=Ae=1,ze}var R=/^\0+/g,A=/[\0\r\f]/g,k=/: */g,D=/zoo|gra/,O=/([,: ])(transform)/g,F=/,\r+?/g,V=/([\t\r\n ])*\f?&/g,W=/@(k\w+)\s*(\S*)\s*/,X=/::(place)/g,re=/:(read-only)/g,ne=/[svh]\w+-[tblr]{2}/,ae=/\(\s*(.*)\s*\)/g,xe=/([\s\S]*?);/g,fe=/-self|flex-/g,ge=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Ie=/stretch|:\s*\w+\-(?:conte|avail)/,Qe=/([^-])(image-set\()/,le=1,Ae=1,Y=0,Ue=1,Tt=[],ke=[],Te=0,je=null,wt=0,ue="";return M.use=w,M.set=S,i!==void 0&&S(i),M}var cp,N2=C(()=>{cp=yF}),F2,B2,bF=C(()=>{F2={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},B2=F2});function _F(i){var s=Object.create(null);return function(a){return s[a]===void 0&&(s[a]=i(a)),s[a]}}var ny,wF=C(()=>{ny=_F}),dp,U2,bx,xF=C(()=>{wF(),dp=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,U2=ny(function(i){return dp.test(i)||i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)<91}),bx=U2}),SF=K(i=>{var s=typeof Symbol=="function"&&Symbol.for,a=s?Symbol.for("react.element"):60103,c=s?Symbol.for("react.portal"):60106,p=s?Symbol.for("react.fragment"):60107,f=s?Symbol.for("react.strict_mode"):60108,g=s?Symbol.for("react.profiler"):60114,y=s?Symbol.for("react.provider"):60109,w=s?Symbol.for("react.context"):60110,S=s?Symbol.for("react.async_mode"):60111,M=s?Symbol.for("react.concurrent_mode"):60111,R=s?Symbol.for("react.forward_ref"):60112,A=s?Symbol.for("react.suspense"):60113,k=s?Symbol.for("react.suspense_list"):60120,D=s?Symbol.for("react.memo"):60115,O=s?Symbol.for("react.lazy"):60116,F=s?Symbol.for("react.block"):60121,V=s?Symbol.for("react.fundamental"):60117,W=s?Symbol.for("react.responder"):60118,X=s?Symbol.for("react.scope"):60119;function re(ae){if(typeof ae=="object"&&ae!==null){var xe=ae.$$typeof;switch(xe){case a:switch(ae=ae.type,ae){case S:case M:case p:case g:case f:case A:return ae;default:switch(ae=ae&&ae.$$typeof,ae){case w:case R:case O:case D:case y:return ae;default:return xe}}case c:return xe}}}function ne(ae){return re(ae)===M}i.AsyncMode=S,i.ConcurrentMode=M,i.ContextConsumer=w,i.ContextProvider=y,i.Element=a,i.ForwardRef=R,i.Fragment=p,i.Lazy=O,i.Memo=D,i.Portal=c,i.Profiler=g,i.StrictMode=f,i.Suspense=A,i.isAsyncMode=function(ae){return ne(ae)||re(ae)===S},i.isConcurrentMode=ne,i.isContextConsumer=function(ae){return re(ae)===w},i.isContextProvider=function(ae){return re(ae)===y},i.isElement=function(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===a},i.isForwardRef=function(ae){return re(ae)===R},i.isFragment=function(ae){return re(ae)===p},i.isLazy=function(ae){return re(ae)===O},i.isMemo=function(ae){return re(ae)===D},i.isPortal=function(ae){return re(ae)===c},i.isProfiler=function(ae){return re(ae)===g},i.isStrictMode=function(ae){return re(ae)===f},i.isSuspense=function(ae){return re(ae)===A},i.isValidElementType=function(ae){return typeof ae=="string"||typeof ae=="function"||ae===p||ae===M||ae===g||ae===f||ae===A||ae===k||typeof ae=="object"&&ae!==null&&(ae.$$typeof===O||ae.$$typeof===D||ae.$$typeof===y||ae.$$typeof===w||ae.$$typeof===R||ae.$$typeof===V||ae.$$typeof===W||ae.$$typeof===X||ae.$$typeof===F)},i.typeOf=re}),_x=K((i,s)=>{s.exports=SF()}),V2=K((i,s)=>{var a=_x(),c={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},p={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},f={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},g={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},y={};y[a.ForwardRef]=f,y[a.Memo]=g;function w(F){return a.isMemo(F)?g:y[F.$$typeof]||c}var S=Object.defineProperty,M=Object.getOwnPropertyNames,R=Object.getOwnPropertySymbols,A=Object.getOwnPropertyDescriptor,k=Object.getPrototypeOf,D=Object.prototype;function O(F,V,W){if(typeof V!="string"){if(D){var X=k(V);X&&X!==D&&O(F,X,W)}var re=M(V);R&&(re=re.concat(R(V)));for(var ne=w(F),ae=w(V),xe=0;xe<re.length;++xe){var fe=re[xe];if(!p[fe]&&!(W&&W[fe])&&!(ae&&ae[fe])&&!(ne&&ne[fe])){var ge=A(V,fe);try{S(F,fe,ge)}catch{}}}}return F}s.exports=O});function xa(){return(xa=Object.assign||function(i){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])}return i}).apply(this,arguments)}function Zm(i){return typeof i=="function"}function Ps(i){return i.displayName||i.name||"Component"}function Zl(i){return i&&typeof i.styledComponentId=="string"}function Lo(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];throw new Error("An error occurred. See https://git.io/JUIaE#"+i+" for more information."+(a.length>0?" Args: "+a.join(", "):""))}function wx(i){var s,a="";for(s=Math.abs(i);s>52;s=s/52|0)a=Tx(s%52)+a;return(Tx(s%52)+a).replace(tv,"$1-$2")}function hp(i){for(var s=0;s<i.length;s+=1){var a=i[s];if(Zm(a)&&!Zl(a))return!1}return!0}function wd(i){var s,a,c,p,f=i===void 0?ta:i,g=f.options,y=g===void 0?ta:g,w=f.plugins,S=w===void 0?xd:w,M=new cp(y),R=[],A=function(O){function F(V){if(V)try{O(V+"}")}catch{}}return function(V,W,X,re,ne,ae,xe,fe,ge,Ie){switch(V){case 1:if(ge===0&&W.charCodeAt(0)===64)return O(W+";"),"";break;case 2:if(fe===0)return W+"/*|*/";break;case 3:switch(fe){case 102:case 112:return O(X[0]+W),"";default:return W+(Ie===0?"/*|*/":"")}case-2:W.split("/*|*/}").forEach(F)}}}(function(O){R.push(O)}),k=function(O,F,V){return F===0&&Ix.indexOf(V[a.length])!==-1||V.match(p)?O:"."+s};function D(O,F,V,W){W===void 0&&(W="&");var X=O.replace(Ax,""),re=F&&V?V+" "+F+" { "+X+" }":X;return s=W,a=F,c=new RegExp("\\"+a+"\\b","g"),p=new RegExp("(\\"+a+"\\b){2,}"),M(V||!F?"":F,re)}return M.use([].concat(S,[function(O,F,V){O===2&&V.length&&V[0].lastIndexOf(a)>0&&(V[0]=V[0].replace(c,k))},A,function(O){if(O===-2){var F=R;return R=[],F}}])),D.hash=S.length?S.reduce(function(O,F){return F.name||Lo(15),Ki(O,F.name)},5381).toString():"",D}function Qm(){return(0,di.useContext)(fy)||Rx}function j2(){return(0,di.useContext)(my)||gp}function xx(i){var s=(0,di.useState)(i.stylisPlugins),a=s[0],c=s[1],p=Qm(),f=(0,di.useMemo)(function(){var y=p;return i.sheet?y=i.sheet:i.target&&(y=y.reconstructWithOptions({target:i.target},!1)),i.disableCSSOMInjection&&(y=y.reconstructWithOptions({useCSSOMInjection:!1})),y},[i.disableCSSOMInjection,i.sheet,i.target]),g=(0,di.useMemo)(function(){return wd({options:{prefix:!i.disableVendorPrefixes},plugins:a})},[i.disableVendorPrefixes,a]);return(0,di.useEffect)(function(){(0,Jm.default)(a,i.stylisPlugins)||c(i.stylisPlugins)},[i.stylisPlugins]),di.default.createElement(fy.Provider,{value:f},di.default.createElement(my.Provider,{value:g},i.children))}function z2(i){return X2.test(i)?i.replace(Y2,Dx).replace(vy,"-ms-"):i}function Ql(i,s,a,c){if(Array.isArray(i)){for(var p,f=[],g=0,y=i.length;g<y;g+=1)(p=Ql(i[g],s,a,c))!==""&&(Array.isArray(p)?f.push.apply(f,p):f.push(p));return f}if(Lx(i))return"";if(Zl(i))return"."+i.styledComponentId;if(Zm(i)){if(typeof(S=i)!="function"||S.prototype&&S.prototype.isReactComponent||!s)return i;var w=i(s);return Ql(w,s,a,c)}var S;return i instanceof Ox?a?(i.inject(a,c),i.getName(c)):i:ay(i)?function M(R,A){var k,D,O=[];for(var F in R)R.hasOwnProperty(F)&&!Lx(R[F])&&(Array.isArray(R[F])&&R[F].isCss||Zm(R[F])?O.push(z2(F)+":",R[F],";"):ay(R[F])?O.push.apply(O,M(R[F],F)):O.push(z2(F)+": "+(k=F,(D=R[F])==null||typeof D=="boolean"||D===""?"":typeof D!="number"||D===0||k in B2||k.startsWith("--")?String(D).trim():D+"px")+";"));return A?[A+" {"].concat(O,["}"]):O}(i):i.toString()}function No(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return Zm(i)||ay(i)?Nx(Ql(sy(xd,[i].concat(a)))):a.length===0&&i.length===1&&typeof i[0]=="string"?i:Nx(Ql(sy(i,a)))}function Jl(i){return i.replace(E,"-").replace(L,"")}function pp(i){return typeof i=="string"&&!0}function Sx(i,s,a){var c=i[a];ie(s)&&ie(c)?H2(c,s):i[a]=s}function H2(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];for(var p=0,f=a;p<f.length;p++){var g=f[p];if(ie(g))for(var y in g)de(y)&&Sx(i,g[y],y)}return i}function ry(i,s,a){var c=Zl(i),p=!pp(i),f=s.attrs,g=f===void 0?xd:f,y=s.componentId,w=y===void 0?function(W,X){var re=typeof W!="string"?"sc":Jl(W);We[re]=(We[re]||0)+1;var ne=re+"-"+q("5.3.11"+re+We[re]);return X?X+"-"+ne:ne}(s.displayName,s.parentComponentId):y,S=s.displayName,M=S===void 0?function(W){return pp(W)?"styled."+W:"Styled("+Ps(W)+")"}(i):S,R=s.displayName&&s.componentId?Jl(s.displayName)+"-"+s.componentId:s.componentId||w,A=c&&i.attrs?Array.prototype.concat(i.attrs,g).filter(Boolean):g,k=s.shouldForwardProp;c&&i.shouldForwardProp&&(k=s.shouldForwardProp?function(W,X,re){return i.shouldForwardProp(W,X,re)&&s.shouldForwardProp(W,X,re)}:i.shouldForwardProp);var D,O=new q2(a,R,c?i.componentStyle:void 0),F=O.isStatic&&g.length===0,V=function(W,X){return function(re,ne,ae,xe){var fe=re.attrs,ge=re.componentStyle,Ie=re.defaultProps,Qe=re.foldedComponentIds,le=re.shouldForwardProp,Ae=re.styledComponentId,Y=re.target,Ue=function(ot,ze,Zt){ot===void 0&&(ot=ta);var bt=xa({},ze,{theme:ot}),Kt={};return Zt.forEach(function(cn){var In,Cn,Er,J=cn;for(In in Zm(J)&&(J=J(bt)),J)bt[In]=Kt[In]=In==="className"?(Cn=Kt[In],Er=J[In],Cn&&Er?Cn+" "+Er:Cn||Er):J[In]}),[bt,Kt]}(v(ne,(0,di.useContext)(Me),Ie)||ta,ne,fe),Tt=Ue[0],ke=Ue[1],Te=function(ot,ze,Zt,bt){var Kt=Qm(),cn=j2(),In=ze?ot.generateAndInjectStyles(ta,Kt,cn):ot.generateAndInjectStyles(Zt,Kt,cn);return In}(ge,xe,Tt),je=ae,wt=ke.$as||ne.$as||ke.as||ne.as||Y,ue=pp(wt),he=ke!==ne?xa({},ne,{},ke):ne,qe={};for(var Ze in he)Ze[0]!=="$"&&Ze!=="as"&&(Ze==="forwardedAs"?qe.as=he[Ze]:(le?le(Ze,bx,wt):!ue||bx(Ze))&&(qe[Ze]=he[Ze]));return ne.style&&ke.style!==ne.style&&(qe.style=xa({},ne.style,{},ke.style)),qe.className=Array.prototype.concat(Qe,Ae,Te!==Ae?Te:null,ne.className,ke.className).filter(Boolean).join(" "),qe.ref=je,(0,di.createElement)(wt,qe)}(D,W,X,F)};return V.displayName=M,(D=di.default.forwardRef(V)).attrs=A,D.componentStyle=O,D.displayName=M,D.shouldForwardProp=k,D.foldedComponentIds=c?Array.prototype.concat(i.foldedComponentIds,i.styledComponentId):xd,D.styledComponentId=R,D.target=c?i.target:i,D.withComponent=function(W){var X=s.componentId,re=function(ae,xe){if(ae==null)return{};var fe,ge,Ie={},Qe=Object.keys(ae);for(ge=0;ge<Qe.length;ge++)fe=Qe[ge],xe.indexOf(fe)>=0||(Ie[fe]=ae[fe]);return Ie}(s,["componentId"]),ne=X&&X+"-"+(pp(W)?W:Jl(Ps(W)));return ry(W,xa({},re,{attrs:A,componentId:ne}),a)},Object.defineProperty(D,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(W){this._foldedDefaultProps=c?H2({},i.defaultProps,W):W}}),Object.defineProperty(D,"toString",{value:function(){return"."+D.styledComponentId}}),p&&(0,oy.default)(D,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),D}function sl(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];var p=No.apply(void 0,[i].concat(a)),f="sc-global-"+q(JSON.stringify(p)),g=new gt(p,f);function y(S){var M=Qm(),R=j2(),A=(0,di.useContext)(Me),k=(0,di.useRef)(M.allocateGSInstance(f)).current;return M.server&&w(k,S,M,A,R),(0,di.useLayoutEffect)(function(){if(!M.server)return w(k,S,M,A,R),function(){return g.removeStyles(k,M)}},[k,S,M,A,R]),null}function w(S,M,R,A,k){if(g.isStatic)g.renderStyles(S,Ex,R,k);else{var D=xa({},M,{theme:v(M,A,y.defaultProps)});g.renderStyles(S,D,R,k)}}return di.default.memo(y)}var iy,di,Jm,oy,sy,ay,xd,ta,al,Sd,ly,Ex,uy,Ed,Cd,fp,mp,Cx,vp,cy,G2,W2,Px,ev,dy,Fo,$2,hy,kx,K2,eu,tv,Tx,Ki,Mx,py,q2,Ax,Ix,fy,my,Rx,gp,Ox,X2,Y2,vy,Dx,Lx,Nx,v,E,L,q,ie,de,Me,We,Ke,gt,se,Ne=C(()=>{iy=Q(gF()),di=Q(Re()),Jm=Q(yx()),N2(),bF(),xF(),oy=Q(V2()),sy=function(i,s){for(var a=[i[0]],c=0,p=s.length;c<p;c+=1)a.push(s[c],i[c+1]);return a},ay=function(i){return i!==null&&typeof i=="object"&&(i.toString?i.toString():Object.prototype.toString.call(i))==="[object Object]"&&!(0,iy.typeOf)(i)},xd=Object.freeze([]),ta=Object.freeze({}),al=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Sd=typeof window<"u"&&"HTMLElement"in window,ly=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY)),Ex={},uy=function(){function i(a){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=a}var s=i.prototype;return s.indexOfGroup=function(a){for(var c=0,p=0;p<a;p++)c+=this.groupSizes[p];return c},s.insertRules=function(a,c){if(a>=this.groupSizes.length){for(var p=this.groupSizes,f=p.length,g=f;a>=g;)(g<<=1)<0&&Lo(16,""+a);this.groupSizes=new Uint32Array(g),this.groupSizes.set(p),this.length=g;for(var y=f;y<g;y++)this.groupSizes[y]=0}for(var w=this.indexOfGroup(a+1),S=0,M=c.length;S<M;S++)this.tag.insertRule(w,c[S])&&(this.groupSizes[a]++,w++)},s.clearGroup=function(a){if(a<this.length){var c=this.groupSizes[a],p=this.indexOfGroup(a),f=p+c;this.groupSizes[a]=0;for(var g=p;g<f;g++)this.tag.deleteRule(p)}},s.getGroup=function(a){var c="";if(a>=this.length||this.groupSizes[a]===0)return c;for(var p=this.groupSizes[a],f=this.indexOfGroup(a),g=f+p,y=f;y<g;y++)c+=this.tag.getRule(y)+`/*!sc*/
`;return c},i}(),Ed=new Map,Cd=new Map,fp=1,mp=function(i){if(Ed.has(i))return Ed.get(i);for(;Cd.has(fp);)fp++;var s=fp++;return Ed.set(i,s),Cd.set(s,i),s},Cx=function(i){return Cd.get(i)},vp=function(i,s){s>=fp&&(fp=s+1),Ed.set(i,s),Cd.set(s,i)},cy="style["+al+'][data-styled-version="5.3.11"]',G2=new RegExp("^"+al+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),W2=function(i,s,a){for(var c,p=a.split(","),f=0,g=p.length;f<g;f++)(c=p[f])&&i.registerName(s,c)},Px=function(i,s){for(var a=(s.textContent||"").split(`/*!sc*/
`),c=[],p=0,f=a.length;p<f;p++){var g=a[p].trim();if(g){var y=g.match(G2);if(y){var w=0|parseInt(y[1],10),S=y[2];w!==0&&(vp(S,w),W2(i,S,y[3]),i.getTag().insertRules(w,c)),c.length=0}else c.push(g)}}},ev=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},dy=function(i){var s=document.head,a=i||s,c=document.createElement("style"),p=function(y){for(var w=y.childNodes,S=w.length;S>=0;S--){var M=w[S];if(M&&M.nodeType===1&&M.hasAttribute(al))return M}}(a),f=p!==void 0?p.nextSibling:null;c.setAttribute(al,"active"),c.setAttribute("data-styled-version","5.3.11");var g=ev();return g&&c.setAttribute("nonce",g),a.insertBefore(c,f),c},Fo=function(){function i(a){var c=this.element=dy(a);c.appendChild(document.createTextNode("")),this.sheet=function(p){if(p.sheet)return p.sheet;for(var f=document.styleSheets,g=0,y=f.length;g<y;g++){var w=f[g];if(w.ownerNode===p)return w}Lo(17)}(c),this.length=0}var s=i.prototype;return s.insertRule=function(a,c){try{return this.sheet.insertRule(c,a),this.length++,!0}catch{return!1}},s.deleteRule=function(a){this.sheet.deleteRule(a),this.length--},s.getRule=function(a){var c=this.sheet.cssRules[a];return c!==void 0&&typeof c.cssText=="string"?c.cssText:""},i}(),$2=function(){function i(a){var c=this.element=dy(a);this.nodes=c.childNodes,this.length=0}var s=i.prototype;return s.insertRule=function(a,c){if(a<=this.length&&a>=0){var p=document.createTextNode(c),f=this.nodes[a];return this.element.insertBefore(p,f||null),this.length++,!0}return!1},s.deleteRule=function(a){this.element.removeChild(this.nodes[a]),this.length--},s.getRule=function(a){return a<this.length?this.nodes[a].textContent:""},i}(),hy=function(){function i(a){this.rules=[],this.length=0}var s=i.prototype;return s.insertRule=function(a,c){return a<=this.length&&(this.rules.splice(a,0,c),this.length++,!0)},s.deleteRule=function(a){this.rules.splice(a,1),this.length--},s.getRule=function(a){return a<this.length?this.rules[a]:""},i}(),kx=Sd,K2={isServer:!Sd,useCSSOMInjection:!ly},eu=function(){function i(a,c,p){a===void 0&&(a=ta),c===void 0&&(c={}),this.options=xa({},K2,{},a),this.gs=c,this.names=new Map(p),this.server=!!a.isServer,!this.server&&Sd&&kx&&(kx=!1,function(f){for(var g=document.querySelectorAll(cy),y=0,w=g.length;y<w;y++){var S=g[y];S&&S.getAttribute(al)!=="active"&&(Px(f,S),S.parentNode&&S.parentNode.removeChild(S))}}(this))}i.registerId=function(a){return mp(a)};var s=i.prototype;return s.reconstructWithOptions=function(a,c){return c===void 0&&(c=!0),new i(xa({},this.options,{},a),this.gs,c&&this.names||void 0)},s.allocateGSInstance=function(a){return this.gs[a]=(this.gs[a]||0)+1},s.getTag=function(){return this.tag||(this.tag=(p=(c=this.options).isServer,f=c.useCSSOMInjection,g=c.target,a=p?new hy(g):f?new Fo(g):new $2(g),new uy(a)));var a,c,p,f,g},s.hasNameForId=function(a,c){return this.names.has(a)&&this.names.get(a).has(c)},s.registerName=function(a,c){if(mp(a),this.names.has(a))this.names.get(a).add(c);else{var p=new Set;p.add(c),this.names.set(a,p)}},s.insertRules=function(a,c,p){this.registerName(a,c),this.getTag().insertRules(mp(a),p)},s.clearNames=function(a){this.names.has(a)&&this.names.get(a).clear()},s.clearRules=function(a){this.getTag().clearGroup(mp(a)),this.clearNames(a)},s.clearTag=function(){this.tag=void 0},s.toString=function(){return function(a){for(var c=a.getTag(),p=c.length,f="",g=0;g<p;g++){var y=Cx(g);if(y!==void 0){var w=a.names.get(y),S=c.getGroup(g);if(w&&S&&w.size){var M=al+".g"+g+'[id="'+y+'"]',R="";w!==void 0&&w.forEach(function(A){A.length>0&&(R+=A+",")}),f+=""+S+M+'{content:"'+R+`"}/*!sc*/
`}}}return f}(this)},i}(),tv=/(a)(d)/gi,Tx=function(i){return String.fromCharCode(i+(i>25?39:97))},Ki=function(i,s){for(var a=s.length;a;)i=33*i^s.charCodeAt(--a);return i},Mx=function(i){return Ki(5381,i)},py=Mx("5.3.11"),q2=function(){function i(s,a,c){this.rules=s,this.staticRulesId="",this.isStatic=(c===void 0||c.isStatic)&&hp(s),this.componentId=a,this.baseHash=Ki(py,a),this.baseStyle=c,eu.registerId(a)}return i.prototype.generateAndInjectStyles=function(s,a,c){var p=this.componentId,f=[];if(this.baseStyle&&f.push(this.baseStyle.generateAndInjectStyles(s,a,c)),this.isStatic&&!c.hash)if(this.staticRulesId&&a.hasNameForId(p,this.staticRulesId))f.push(this.staticRulesId);else{var g=Ql(this.rules,s,a,c).join(""),y=wx(Ki(this.baseHash,g)>>>0);if(!a.hasNameForId(p,y)){var w=c(g,"."+y,void 0,p);a.insertRules(p,y,w)}f.push(y),this.staticRulesId=y}else{for(var S=this.rules.length,M=Ki(this.baseHash,c.hash),R="",A=0;A<S;A++){var k=this.rules[A];if(typeof k=="string")R+=k;else if(k){var D=Ql(k,s,a,c),O=Array.isArray(D)?D.join(""):D;M=Ki(M,O+A),R+=O}}if(R){var F=wx(M>>>0);if(!a.hasNameForId(p,F)){var V=c(R,"."+F,void 0,p);a.insertRules(p,F,V)}f.push(F)}}return f.join(" ")},i}(),Ax=/^\s*\/\/.*$/gm,Ix=[":","[",".","#"],fy=di.default.createContext(),fy.Consumer,my=di.default.createContext(),Rx=(my.Consumer,new eu),gp=wd(),Ox=function(){function i(s,a){var c=this;this.inject=function(p,f){f===void 0&&(f=gp);var g=c.name+f.hash;p.hasNameForId(c.id,g)||p.insertRules(c.id,g,f(c.rules,g,"@keyframes"))},this.toString=function(){return Lo(12,String(c.name))},this.name=s,this.id="sc-keyframes-"+s,this.rules=a}return i.prototype.getName=function(s){return s===void 0&&(s=gp),this.name+s.hash},i}(),X2=/([A-Z])/,Y2=/([A-Z])/g,vy=/^ms-/,Dx=function(i){return"-"+i.toLowerCase()},Lx=function(i){return i==null||i===!1||i===""},Nx=function(i){return Array.isArray(i)&&(i.isCss=!0),i},v=function(i,s,a){return a===void 0&&(a=ta),i.theme!==a.theme&&i.theme||s||a.theme},E=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,L=/(^-|-$)/g,q=function(i){return wx(Mx(i)>>>0)},ie=function(i){return typeof i=="function"||typeof i=="object"&&i!==null&&!Array.isArray(i)},de=function(i){return i!=="__proto__"&&i!=="constructor"&&i!=="prototype"},Me=di.default.createContext(),Me.Consumer,We={},Ke=function(i){return function s(a,c,p){if(p===void 0&&(p=ta),!(0,iy.isValidElementType)(c))return Lo(1,String(c));var f=function(){return a(c,p,No.apply(void 0,arguments))};return f.withConfig=function(g){return s(a,c,xa({},p,{},g))},f.attrs=function(g){return s(a,c,xa({},p,{attrs:Array.prototype.concat(p.attrs,g).filter(Boolean)}))},f}(ry,i)},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(i){Ke[i]=Ke(i)}),gt=function(){function i(a,c){this.rules=a,this.componentId=c,this.isStatic=hp(a),eu.registerId(this.componentId+1)}var s=i.prototype;return s.createStyles=function(a,c,p,f){var g=f(Ql(this.rules,c,p,f).join(""),""),y=this.componentId+a;p.insertRules(y,y,g)},s.removeStyles=function(a,c){c.clearRules(this.componentId+a)},s.renderStyles=function(a,c,p,f){a>2&&eu.registerId(this.componentId+a),this.removeStyles(a,p),this.createStyles(a,c,p,f)},i}(),function(){function i(){var a=this;this._emitSheetCSS=function(){var c=a.instance.toString();if(!c)return"";var p=ev();return"<style "+[p&&'nonce="'+p+'"',al+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+c+"</style>"},this.getStyleTags=function(){return a.sealed?Lo(2):a._emitSheetCSS()},this.getStyleElement=function(){var c;if(a.sealed)return Lo(2);var p=((c={})[al]="",c["data-styled-version"]="5.3.11",c.dangerouslySetInnerHTML={__html:a.instance.toString()},c),f=ev();return f&&(p.nonce=f),[di.default.createElement("style",xa({},p,{key:"sc-0-0"}))]},this.seal=function(){a.sealed=!0},this.instance=new eu({isServer:!0}),this.sealed=!1}var s=i.prototype;return s.collectStyles=function(a){return this.sealed?Lo(2):di.default.createElement(xx,{sheet:this.instance},a)},s.interleaveWithNodeStream=function(a){return Lo(3)},i}(),se=Ke});function $t(){return $t=Object.assign||function(i){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])}return i},$t.apply(this,arguments)}var bn=C(()=>{});function un(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var qn=C(()=>{});function Xn(i,s){return Xn=Object.setPrototypeOf||function(a,c){return a.__proto__=c,a},Xn(i,s)}var zn=C(()=>{});function fr(i,s){i.prototype=Object.create(s.prototype),i.prototype.constructor=i,Xn(i,s)}var _o=C(()=>{zn()});function wo(i){return wo=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},wo(i)}var xo=C(()=>{});function Br(i){return Function.toString.call(i).indexOf("[native code]")!==-1}var So=C(()=>{});function ks(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ll=C(()=>{});function ul(i,s,a){return ks()?ul=Reflect.construct:ul=function(c,p,f){var g=[null];g.push.apply(g,p);var y=Function.bind.apply(c,g),w=new y;return f&&Xn(w,f.prototype),w},ul.apply(null,arguments)}var Pd=C(()=>{zn(),ll()});function tu(i){var s=typeof Map=="function"?new Map:void 0;return tu=function(a){if(a===null||!Br(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s<"u"){if(s.has(a))return s.get(a);s.set(a,c)}function c(){return ul(a,arguments,wo(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),Xn(c,a)},tu(i)}var kd=C(()=>{xo(),zn(),So(),Pd()}),Td=C(()=>{});function Ni(i){return i.charAt(0).toUpperCase()+i.slice(1)}function Ts(i,s){if(!i)return s.toLowerCase();var a=i.split("-");if(a.length>1)return a.splice(1,0,s),a.reduce(function(p,f){return""+p+Ni(f)});var c=i.replace(/([a-z])([A-Z])/g,"$1"+s+"$2");return i===c?""+i+s:c}function Xr(i,s){for(var a={},c=0;c<s.length;c+=1)(s[c]||s[c]===0)&&(a[Ts(i,a$[c])]=s[c]);return a}function cl(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];var p=a[0],f=a[1],g=f===void 0?p:f,y=a[2],w=y===void 0?p:y,S=a[3],M=S===void 0?g:S,R=[p,g,w,M];return Xr(i,R)}function Sa(i){return Math.round(i*255)}function $Se(i,s,a){return Sa(i)+","+Sa(s)+","+Sa(a)}function Fx(i,s,a,c){if(c===void 0&&(c=$Se),s===0)return c(a,a,a);var p=(i%360+360)%360/60,f=(1-Math.abs(2*a-1))*s,g=f*(1-Math.abs(p%2-1)),y=0,w=0,S=0;p>=0&&p<1?(y=f,w=g):p>=1&&p<2?(y=g,w=f):p>=2&&p<3?(w=f,S=g):p>=3&&p<4?(w=g,S=f):p>=4&&p<5?(y=g,S=f):p>=5&&p<6&&(y=f,S=g);var M=a-f/2,R=y+M,A=w+M,k=S+M;return c(R,A,k)}function KSe(i){if(typeof i!="string")return i;var s=i.toLowerCase();return AF[s]?"#"+AF[s]:i}function EF(i){if(typeof i!="string")throw new nu(3);var s=KSe(i);if(s.match(l$))return{red:parseInt(""+s[1]+s[2],16),green:parseInt(""+s[3]+s[4],16),blue:parseInt(""+s[5]+s[6],16)};if(s.match(u$)){var a=parseFloat((parseInt(""+s[7]+s[8],16)/255).toFixed(2));return{red:parseInt(""+s[1]+s[2],16),green:parseInt(""+s[3]+s[4],16),blue:parseInt(""+s[5]+s[6],16),alpha:a}}if(s.match(c$))return{red:parseInt(""+s[1]+s[1],16),green:parseInt(""+s[2]+s[2],16),blue:parseInt(""+s[3]+s[3],16)};if(s.match(d$)){var c=parseFloat((parseInt(""+s[4]+s[4],16)/255).toFixed(2));return{red:parseInt(""+s[1]+s[1],16),green:parseInt(""+s[2]+s[2],16),blue:parseInt(""+s[3]+s[3],16),alpha:c}}var p=eA.exec(s);if(p)return{red:parseInt(""+p[1],10),green:parseInt(""+p[2],10),blue:parseInt(""+p[3],10)};var f=h$.exec(s.substring(0,50));if(f)return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10),alpha:parseFloat(""+f[4])};var g=p$.exec(s);if(g){var y=parseInt(""+g[1],10),w=parseInt(""+g[2],10)/100,S=parseInt(""+g[3],10)/100,M="rgb("+Fx(y,w,S)+")",R=eA.exec(M);if(!R)throw new nu(4,s,M);return{red:parseInt(""+R[1],10),green:parseInt(""+R[2],10),blue:parseInt(""+R[3],10)}}var A=f$.exec(s.substring(0,50));if(A){var k=parseInt(""+A[1],10),D=parseInt(""+A[2],10)/100,O=parseInt(""+A[3],10)/100,F="rgb("+Fx(k,D,O)+")",V=eA.exec(F);if(!V)throw new nu(4,s,F);return{red:parseInt(""+V[1],10),green:parseInt(""+V[2],10),blue:parseInt(""+V[3],10),alpha:parseFloat(""+A[4])}}throw new nu(5)}function qSe(i){var s=i.red/255,a=i.green/255,c=i.blue/255,p=Math.max(s,a,c),f=Math.min(s,a,c),g=(p+f)/2;if(p===f)return i.alpha!==void 0?{hue:0,saturation:0,lightness:g,alpha:i.alpha}:{hue:0,saturation:0,lightness:g};var y,w=p-f,S=g>.5?w/(2-p-f):w/(p+f);switch(p){case s:y=(a-c)/w+(a<c?6:0);break;case a:y=(c-s)/w+2;break;default:y=(s-a)/w+4;break}return y*=60,i.alpha!==void 0?{hue:y,saturation:S,lightness:g,alpha:i.alpha}:{hue:y,saturation:S,lightness:g}}function CF(i){return qSe(EF(i))}function nv(i){var s=i.toString(16);return s.length===1?"0"+s:s}function PF(i){return nv(Math.round(i*255))}function XSe(i,s,a){return tA("#"+PF(i)+PF(s)+PF(a))}function Z2(i,s,a){return Fx(i,s,a,XSe)}function YSe(i,s,a){if(typeof i=="number"&&typeof s=="number"&&typeof a=="number")return Z2(i,s,a);if(typeof i=="object"&&s===void 0&&a===void 0)return Z2(i.hue,i.saturation,i.lightness);throw new nu(1)}function ZSe(i,s,a,c){if(typeof i=="number"&&typeof s=="number"&&typeof a=="number"&&typeof c=="number")return c>=1?Z2(i,s,a):"rgba("+Fx(i,s,a)+","+c+")";if(typeof i=="object"&&s===void 0&&a===void 0&&c===void 0)return i.alpha>=1?Z2(i.hue,i.saturation,i.lightness):"rgba("+Fx(i.hue,i.saturation,i.lightness)+","+i.alpha+")";throw new nu(2)}function kF(i,s,a){if(typeof i=="number"&&typeof s=="number"&&typeof a=="number")return tA("#"+nv(i)+nv(s)+nv(a));if(typeof i=="object"&&s===void 0&&a===void 0)return tA("#"+nv(i.red)+nv(i.green)+nv(i.blue));throw new nu(6)}function o$(i,s,a,c){if(typeof i=="string"&&typeof s=="number"){var p=EF(i);return"rgba("+p.red+","+p.green+","+p.blue+","+s+")"}else{if(typeof i=="number"&&typeof s=="number"&&typeof a=="number"&&typeof c=="number")return c>=1?kF(i,s,a):"rgba("+i+","+s+","+a+","+c+")";if(typeof i=="object"&&s===void 0&&a===void 0&&c===void 0)return i.alpha>=1?kF(i.red,i.green,i.blue):"rgba("+i.red+","+i.green+","+i.blue+","+i.alpha+")"}throw new nu(7)}function TF(i){if(typeof i!="object")throw new nu(8);if(v$(i))return o$(i);if(m$(i))return kF(i);if(y$(i))return ZSe(i);if(g$(i))return YSe(i);throw new nu(8)}function s$(i,s,a){return function(){var c=a.concat(Array.prototype.slice.call(arguments));return c.length>=s?i.apply(this,c):s$(i,s,c)}}function Q2(i){return s$(i,i.length,[])}function J2(i,s,a){return Math.max(i,Math.min(s,a))}function QSe(i,s){if(s==="transparent")return s;var a=CF(s);return TF($t({},a,{lightness:J2(0,1,a.lightness-parseFloat(i))}))}function JSe(i,s){if(s==="transparent")return s;var a=CF(s);return TF($t({},a,{lightness:J2(0,1,a.lightness+parseFloat(i))}))}function eEe(i,s){if(s==="transparent")return s;var a=CF(s);return TF($t({},a,{saturation:J2(0,1,a.saturation+parseFloat(i))}))}function tEe(i,s){if(s==="transparent")return s;var a=EF(s),c=typeof a.alpha=="number"?a.alpha:1,p=$t({},a,{alpha:J2(0,1,+(c*100-parseFloat(i)*100).toFixed(2)/100)});return o$(p)}function MF(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return b$.indexOf(i)>=0&&i?$t({},cl.apply(void 0,[""].concat(a)),{position:i}):cl.apply(void 0,["",i].concat(a))}var nu,a$,AF,l$,u$,c$,d$,eA,h$,p$,f$,tA,m$,v$,g$,y$,Bx,gy,nA,ru,b$,Ea=C(()=>{bn(),qn(),_o(),kd(),Td(),nu=function(i){fr(s,i);function s(a){var c;return c=i.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+a+" for more information.")||this,un(c)}return s}(tu(Error)),a$=["Top","Right","Bottom","Left"],AF={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},l$=/^#[a-fA-F0-9]{6}$/,u$=/^#[a-fA-F0-9]{8}$/,c$=/^#[a-fA-F0-9]{3}$/,d$=/^#[a-fA-F0-9]{4}$/,eA=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,h$=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,p$=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,f$=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,tA=function(i){return i.length===7&&i[1]===i[2]&&i[3]===i[4]&&i[5]===i[6]?"#"+i[1]+i[3]+i[5]:i},m$=function(i){return typeof i.red=="number"&&typeof i.green=="number"&&typeof i.blue=="number"&&(typeof i.alpha!="number"||typeof i.alpha>"u")},v$=function(i){return typeof i.red=="number"&&typeof i.green=="number"&&typeof i.blue=="number"&&typeof i.alpha=="number"},g$=function(i){return typeof i.hue=="number"&&typeof i.saturation=="number"&&typeof i.lightness=="number"&&(typeof i.alpha!="number"||typeof i.alpha>"u")},y$=function(i){return typeof i.hue=="number"&&typeof i.saturation=="number"&&typeof i.lightness=="number"&&typeof i.alpha=="number"},Bx=Q2(QSe),gy=Q2(JSe),nA=Q2(eEe),ru=Q2(tEe),b$=["absolute","fixed","relative","static","sticky"]});function nEe(i,s,a){return s in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i}function _$(i,s){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);s&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),a.push.apply(a,c)}return a}function rv(i){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?_$(Object(a),!0).forEach(function(c){nEe(i,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):_$(Object(a)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(a,c))})}return i}function yy(i,s){if(i==null)return{};var a={},c=Object.keys(i),p,f;for(f=0;f<c.length;f++)p=c[f],!(s.indexOf(p)>=0)&&(a[p]=i[p]);return a}var Ux=C(()=>{}),w$,IF,x$=C(()=>{w$=Q(Re()),IF=(0,w$.createContext)({})});function rEe(i,s,a){return s in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i}function S$(i,s){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);s&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),a.push.apply(a,c)}return a}function by(i){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?S$(Object(a),!0).forEach(function(c){rEe(i,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):S$(Object(a)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(a,c))})}return i}function RF(i,s){if(i==null)return{};var a={},c=Object.keys(i),p,f;for(f=0;f<c.length;f++)p=c[f],!(s.indexOf(p)>=0)&&(a[p]=i[p]);return a}function iEe(i,s){if(i){if(typeof i=="string")return E$(i,s);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return E$(i,s)}}function E$(i,s){(s==null||s>i.length)&&(s=i.length);for(var a=0,c=new Array(s);a<s;a++)c[a]=i[a];return c}function C$(i,s){var a;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(a=iEe(i))||s&&i&&typeof i.length=="number"){a&&(i=a);var c=0;return function(){return c>=i.length?{done:!0}:{done:!1,value:i[c++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return a=i[Symbol.iterator](),a.next.bind(a)}var rA=C(()=>{});function oEe(i){return typeof i=="function"}var OF,P$,sEe=C(()=>{OF=Q(Re()),x$(),rA(),P$=function(i,s,a){a===void 0&&(a=s.children);var c=(0,OF.useContext)(IF);if(c.useCreateElement)return c.useCreateElement(i,s,a);if(typeof i=="string"&&oEe(a)){s.children;var p=RF(s,["children"]);return a(p)}return(0,OF.createElement)(i,s,a)}});function aEe(i,s,a){return s in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i}function k$(i,s){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);s&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),a.push.apply(a,c)}return a}function _y(i){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?k$(Object(a),!0).forEach(function(c){aEe(i,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):k$(Object(a)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(a,c))})}return i}function lEe(i,s){if(i==null)return{};var a={},c=Object.keys(i),p,f;for(f=0;f<c.length;f++)p=c[f],!(s.indexOf(p)>=0)&&(a[p]=i[p]);return a}var T$=C(()=>{});function uEe(i){return typeof i=="object"&&i!=null}var cEe=C(()=>{});function DF(i){var s;if(!uEe(i))return!1;var a=Object.getPrototypeOf(i);return a==null?!0:((s=a.constructor)===null||s===void 0?void 0:s.toString())===Object.toString()}var M$=C(()=>{cEe()});function A$(i,s){for(var a=Object.keys(i),c={},p={},f=0,g=a;f<g.length;f++){var y=g[f];s.indexOf(y)>=0?c[y]=i[y]:p[y]=i[y]}return[c,p]}function I$(i,s){if(s===void 0&&(s=[]),!DF(i.state))return A$(i,s);var a=A$(i,[].concat(s,["state"])),c=a[0],p=a[1],f=c.state,g=lEe(c,["state"]);return[_y(_y({},f),g),p]}var dEe=C(()=>{T$(),M$()});function iA(i,s){if(i===s)return!0;if(!i||!s||typeof i!="object"||typeof s!="object")return!1;var a=Object.keys(i),c=Object.keys(s),p=a.length;if(c.length!==p)return!1;for(var f=0,g=a;f<g.length;f++){var y=g[f];if(i[y]!==s[y])return!1}return!0}var LF=C(()=>{});function R$(i){return i.name==="normalizePropsAreEqualInner"?i:function(s,a){return!DF(s.state)||!DF(a.state)?i(s,a):i(_y(_y({},s.state),s),_y(_y({},a.state),a))}}var hEe=C(()=>{T$(),M$()});function pEe(i){return(0,NF.forwardRef)(i)}function fEe(i,s){return(0,NF.memo)(i,s)}function Vx(i){var s=i.as,a=i.useHook,c=i.memo,p=i.propsAreEqual,f=p===void 0?a==null?void 0:a.unstable_propsAreEqual:p,g=i.keys,y=g===void 0?(a==null?void 0:a.__keys)||[]:g,w=i.useCreateElement,S=w===void 0?P$:w,M=function(R,A){var k=R.as,D=k===void 0?s:k,O=RF(R,["as"]);if(a){var F,V=I$(O,y),W=V[0],X=V[1],re=a(W,by({ref:A},X)),ne=re.wrapElement,ae=RF(re,["wrapElement"]),xe=((F=D.render)===null||F===void 0?void 0:F.__keys)||D.__keys,fe=xe&&I$(O,xe)[0],ge=fe?by(by({},ae),fe):ae,Ie=S(D,ge);return ne?ne(Ie):Ie}return S(D,by({ref:A},O))};return M=pEe(M),c&&(M=fEe(M,f&&R$(f))),M.__keys=y,M.unstable_propsAreEqual=R$(f||iA),M}var NF,jx=C(()=>{NF=Q(Re()),rA(),sEe(),dEe(),LF(),hEe()});function O$(i,s){(0,FF.useDebugValue)(i);var a=(0,FF.useContext)(IF);return a[i]!=null?a[i]:s}var FF,D$=C(()=>{FF=Q(Re()),x$()});function mEe(i,s,a){s===void 0&&(s={}),a===void 0&&(a={});var c="use"+i+"Props";(0,L$.useDebugValue)(c);var p=O$(c);return p?p(s,a):a}var L$,vEe=C(()=>{L$=Q(Re()),D$()});function gEe(i,s,a){s===void 0&&(s={}),a===void 0&&(a={});var c="use"+i+"Options";(0,N$.useDebugValue)(c);var p=O$(c);return p?by(by({},s),p(s,a)):s}var N$,yEe=C(()=>{N$=Q(Re()),D$(),rA()});function bEe(i){return Array.isArray(i)?i:typeof i<"u"?[i]:[]}var _Ee=C(()=>{});function zx(i){var s,a,c=bEe(i.compose),p=function(y,w){if(i.useOptions&&(y=i.useOptions(y,w)),i.name&&(y=gEe(i.name,y,w)),i.compose)for(var S=C$(c),M;!(M=S()).done;){var R=M.value;y=R.__useOptions(y,w)}return y},f=function(y,w,S){if(y===void 0&&(y={}),w===void 0&&(w={}),S===void 0&&(S=!1),S||(y=p(y,w)),i.useProps&&(w=i.useProps(y,w)),i.name&&(w=mEe(i.name,y,w)),i.compose)if(i.useComposeOptions&&(y=i.useComposeOptions(y,w)),i.useComposeProps)w=i.useComposeProps(y,w);else for(var M=C$(c),R;!(R=M()).done;){var A=R.value;w=A(y,w,!0)}var k={},D=w||{};for(var O in D)D[O]!==void 0&&(k[O]=D[O]);return k};f.__useOptions=p;var g=c.reduce(function(y,w){return y.push.apply(y,w.__keys||[]),y},[]);return f.__keys=[].concat(g,((s=i.useState)===null||s===void 0?void 0:s.__keys)||[],i.keys||[]),f.unstable_propsAreEqual=i.propsAreEqual||((a=c[0])===null||a===void 0?void 0:a.unstable_propsAreEqual)||iA,f}var Hx=C(()=>{Q(Re()),vEe(),rA(),yEe(),LF(),_Ee()});function F$(i,s){s===void 0&&(s=null),i&&(typeof i=="function"?i(s):i.current=s)}function B$(i,s){return(0,U$.useMemo)(function(){return i==null&&s==null?null:function(a){F$(i,a),F$(s,a)}},[i,s])}var U$,V$=C(()=>{U$=Q(Re())});function BF(i){if(i.tagName==="BUTTON")return!0;if(i.tagName==="INPUT"){var s=i;return j$.indexOf(s.type)!==-1}return!1}var j$,UF=C(()=>{j$=["button","color","file","image","reset","submit"]}),VF=C(()=>{}),wEe=C(()=>{VF(),Q(Re())}),oA=C(()=>{VF(),Q(Re()),wEe()});function z$(i){return i?i.ownerDocument||i:document}var H$=C(()=>{});function xEe(i){return i&&z$(i).defaultView||G$}var G$,SEe=C(()=>{H$();try{G$=window}catch{}});function EEe(){var i=xEe();return!!(typeof i<"u"&&i.document&&i.document.createElement)}var sA,jF=C(()=>{SEe(),sA=EEe()}),zF,HF,GF=C(()=>{zF=Q(Re()),jF(),HF=sA?zF.useLayoutEffect:zF.useEffect});function wy(i){var s=(0,W$.useRef)(i);return HF(function(){s.current=i}),s}var W$,$$=C(()=>{W$=Q(Re()),GF()});function CEe(i){return i.target===i.currentTarget}var PEe=C(()=>{});function kEe(i){var s=z$(i),a=s.activeElement;return a!=null&&a.nodeName?a:null}var TEe=C(()=>{H$()});function K$(i,s){return i===s||i.contains(s)}var q$=C(()=>{});function MEe(i){var s=kEe(i);if(!s)return!1;if(K$(i,s))return!0;var a=s.getAttribute("aria-activedescendant");return a?a===i.id?!0:!!i.querySelector("#"+a):!1}var AEe=C(()=>{TEe(),q$()});function IEe(i){return!K$(i.currentTarget,i.target)}var REe=C(()=>{q$()});function aA(i){return sA?window.navigator.userAgent.indexOf(i)!==-1:!1}var OEe=C(()=>{jF()});function DEe(i,s){return"matches"in i?i.matches(s):"msMatchesSelector"in i?i.msMatchesSelector(s):i.webkitMatchesSelector(s)}var LEe=C(()=>{});function NEe(i){var s=i;return s.offsetWidth>0||s.offsetHeight>0||i.getClientRects().length>0}function FEe(i){return DEe(i,X$)&&NEe(i)}var X$,BEe=C(()=>{LEe(),X$="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])"}),Y$,lA,Z$=C(()=>{Ux(),jx(),Hx(),LF(),Y$=["unstable_system"],lA=zx({name:"Role",keys:Y$,propsAreEqual:function(i,s){var a=i.unstable_system,c=yy(i,["unstable_system"]),p=s.unstable_system,f=yy(s,["unstable_system"]);return a!==p&&!iA(a,p)?!1:iA(c,f)}}),Vx({as:"div",useHook:lA})});function Q$(i){!MEe(i)&&FEe(i)&&i.focus()}function UEe(i){return i.tagName==="BUTTON"||i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.tagName==="A"}function VEe(i){return i.tagName==="BUTTON"||i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"}function jEe(i,s,a,c){return i?s&&!a?-1:void 0:s?c:c||0}function WF(i,s){return(0,xy.useCallback)(function(a){var c;(c=i.current)===null||c===void 0||c.call(i,a),!a.defaultPrevented&&s&&(a.stopPropagation(),a.preventDefault())},[i,s])}var xy,J$,e7,$F,zEe=C(()=>{Ux(),jx(),Hx(),xy=Q(Re()),V$(),UF(),oA(),$$(),GF(),AEe(),REe(),OEe(),BEe(),Z$(),J$=["disabled","focusable"],e7=aA("Mac")&&!aA("Chrome")&&(aA("Safari")||aA("Firefox")),$F=zx({name:"Tabbable",compose:lA,keys:J$,useOptions:function(i,s){var a=s.disabled;return rv({disabled:a},i)},useProps:function(i,s){var a=s.ref,c=s.tabIndex,p=s.onClickCapture,f=s.onMouseDownCapture,g=s.onMouseDown,y=s.onKeyPressCapture,w=s.style,S=yy(s,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),M=(0,xy.useRef)(null),R=wy(p),A=wy(f),k=wy(g),D=wy(y),O=!!i.disabled&&!i.focusable,F=(0,xy.useState)(!0),V=F[0],W=F[1],X=(0,xy.useState)(!0),re=X[0],ne=X[1],ae=i.disabled?rv({pointerEvents:"none"},w):w;HF(function(){var Qe=M.current;Qe&&(UEe(Qe)||W(!1),VEe(Qe)||ne(!1))},[]);var xe=WF(R,i.disabled),fe=WF(A,i.disabled),ge=WF(D,i.disabled),Ie=(0,xy.useCallback)(function(Qe){var le;(le=k.current)===null||le===void 0||le.call(k,Qe);var Ae=Qe.currentTarget;if(!Qe.defaultPrevented&&e7&&!IEe(Qe)&&BF(Ae)){var Y=requestAnimationFrame(function(){Ae.removeEventListener("mouseup",Ue,!0),Q$(Ae)}),Ue=function(){cancelAnimationFrame(Y),Q$(Ae)};Ae.addEventListener("mouseup",Ue,{once:!0,capture:!0})}},[]);return rv({ref:B$(M,a),style:ae,tabIndex:jEe(O,V,re,c),disabled:O&&re?!0:void 0,"aria-disabled":i.disabled?!0:void 0,onClickCapture:xe,onMouseDownCapture:fe,onMouseDown:Ie,onKeyPressCapture:ge},S)}}),Vx({as:"div",useHook:$F})});function HEe(i){var s=i.currentTarget;return i.isTrusted?BF(s)||s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.tagName==="A"||s.tagName==="SELECT":!1}var uA,t7,KF,GEe=C(()=>{Ux(),jx(),Hx(),uA=Q(Re()),UF(),oA(),$$(),PEe(),zEe(),t7=["unstable_clickOnEnter","unstable_clickOnSpace"],KF=zx({name:"Clickable",compose:$F,keys:t7,useOptions:function(i){var s=i.unstable_clickOnEnter,a=s===void 0?!0:s,c=i.unstable_clickOnSpace,p=c===void 0?!0:c,f=yy(i,["unstable_clickOnEnter","unstable_clickOnSpace"]);return rv({unstable_clickOnEnter:a,unstable_clickOnSpace:p},f)},useProps:function(i,s){var a=s.onKeyDown,c=s.onKeyUp,p=yy(s,["onKeyDown","onKeyUp"]),f=(0,uA.useState)(!1),g=f[0],y=f[1],w=wy(a),S=wy(c),M=(0,uA.useCallback)(function(A){var k;if((k=w.current)===null||k===void 0||k.call(w,A),!A.defaultPrevented&&!i.disabled&&!A.metaKey&&CEe(A)){var D=i.unstable_clickOnEnter&&A.key==="Enter",O=i.unstable_clickOnSpace&&A.key===" ";if(D||O){if(HEe(A))return;A.preventDefault(),D?A.currentTarget.click():O&&y(!0)}}},[i.disabled,i.unstable_clickOnEnter,i.unstable_clickOnSpace]),R=(0,uA.useCallback)(function(A){var k;if((k=S.current)===null||k===void 0||k.call(S,A),!A.defaultPrevented&&!i.disabled&&!A.metaKey){var D=i.unstable_clickOnSpace&&A.key===" ";g&&D&&(y(!1),A.currentTarget.click())}},[i.disabled,i.unstable_clickOnSpace,g]);return rv({"data-active":g||void 0,onKeyDown:M,onKeyUp:R},p)}}),Vx({as:"button",memo:!0,useHook:KF})}),Gx,n7,r7,i7,WEe=C(()=>{Ux(),jx(),Hx(),Gx=Q(Re()),V$(),UF(),oA(),GEe(),n7=[],r7=zx({name:"Button",compose:KF,keys:n7,useProps:function(i,s){var a=s.ref,c=yy(s,["ref"]),p=(0,Gx.useRef)(null),f=(0,Gx.useState)(void 0),g=f[0],y=f[1],w=(0,Gx.useState)("button"),S=w[0],M=w[1];return(0,Gx.useEffect)(function(){var R=p.current;R&&(BF(R)||(R.tagName!=="A"&&y("button"),M(void 0)))},[]),rv({ref:B$(p,a),role:g,type:S},c)}}),i7=Vx({as:"button",memo:!0,useHook:r7})}),o7,s7,a7,$Ee=C(()=>{Ux(),jx(),Hx(),Z$(),o7=[],s7=zx({name:"Group",compose:lA,keys:o7,useProps:function(i,s){return rv({role:"group"},s)}}),a7=Vx({as:"div",useHook:s7})});function KEe(){return sA?document.body:null}var l7,Sy,qEe=C(()=>{l7=Q(Re()),GF(),jF(),Q(Xl()),Sy=(0,l7.createContext)(KEe())}),qF,XEe=C(()=>{typeof window<"u"&&(qF={get passive(){}},window.addEventListener("testPassive",null,qF),window.removeEventListener("testPassive",null,qF))}),iv=C(()=>{Q(Re()),oA(),WEe(),$Ee(),Q(Xl()),qEe(),XEe(),VF()});function sr(i){let s=(0,XF.useMemo)(()=>{let p=i;return{get current(){return p},set current(f){p=f,c(f)}}},[]),[a,c]=(0,XF.useState)(()=>i);return[s,a]}var XF,mr=C(()=>{XF=Q(Re())});function YEe(i){return s=>is.default.createElement(f7,null,is.default.createElement(i,j({},s)))}var is,u7,c7,hr,Ey,d7,h7,p7,YF,ZF,f7,vr=C(()=>{Ea(),Ne(),Ne(),is=Q(Re()),u7=Q(Xl()),iv(),mr(),hr=No(c7||(c7=G([`
  #pointer-root & {
    pointer-events: none;
  }
  #pointer-root.normal & {
    pointer-events: auto;
  }
`]))),Ey={panel:{bg:"#282b2f",head:{title:{color:"#bbb"},punctuation:{color:"#808080"}},body:{compoudThing:{label:{get color(){return gy(.6,Ey.panel.bg)}}}}}},h7=typeof window<"u"?sl(d7||(d7=G([`
  :host {
    all: initial;
    color: white;
    font: 11px -apple-system, BlinkMacSystemFont, Segoe WPC, Segoe Editor,
      HelveticaNeue-Light, Ubuntu, Droid Sans, sans-serif;
  }

  * {
    padding: 0;
    margin: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    list-style: none;
  }
`]))):{},YF=se.div(p7||(p7=G([`
  z-index: 51;
  position: fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  pointer-events: none;
`]))),ZF=i=>is.default.createElement(xx,{disableVendorPrefixes:!0,target:i.target},is.default.createElement(is.default.Fragment,null,is.default.createElement(h7,null),i.children)),f7=i=>{let[s,a]=(0,is.useState)(null),[c,p]=(0,is.useState)(null);(0,is.useLayoutEffect)(()=>{if(!s)return;let{parentNode:y}=s;if(!y)return;let w=y.shadowRoot?parent.shadowRoot:y.attachShadow({mode:"open"});p(w)},[s]);let[f,g]=sr(void 0);return c?u7.default.createPortal(is.default.createElement(ZF,{target:c},is.default.createElement(is.default.Fragment,null,is.default.createElement(YF,{ref:f}),is.default.createElement(Sy.Provider,{value:g},i.children))),c):is.default.createElement("template",{ref:a,"shadow-root":"open"},i.children)}}),Cy,m7,v7,yp,g7,Wx,y7,b7,cA,_7,QF,ic,Md=C(()=>{vr(),Ne(),Cy={get outlinePanel(){return 1},get propsPanel(){return Cy.outlinePanel},get sequenceEditorPanel(){return this.outlinePanel-1},get toolbar(){return this.outlinePanel+1},get pluginPanes(){return this.sequenceEditorPanel-1}},m7=Ey.panel.bg,yp=se.span(v7||(v7=G([`
  white-space: nowrap;
`]))),Wx=se.span(g7||(g7=G([`
  white-space: nowrap;
  color: `,`;
`])),Ey.panel.head.punctuation.color),b7=se.div(y7||(y7=G([`
  background: `,`;
  flex-grow: 1;
  overflow-y: scroll;
  padding: 0;
`])),m7),cA=18,QF=se.div(_7||(_7=G([`
  height: `,`px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  padding: 0 10px;
  position: relative;
  color: #adadadb3;
  border-bottom: 1px solid rgb(0 0 0 / 13%);
  background-color: #25272b;
  font-size: 10px;
  font-weight: 500;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`])),cA),ic=100}),w7,iu,Py=C(()=>{w7=()=>{},iu=w7});function ZEe(i){return JF.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),JF.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.775 2.781a.5.5 0 01.5.5v1.7H4.67c.108-.957.92-1.7 1.905-1.7h6.608a1.917 1.917 0 110 3.834H6.574c-.78 0-1.452-.466-1.751-1.135H2.275v5.03h2.39a2.032 2.032 0 012.023-1.854h6.38a2.031 2.031 0 110 4.063h-6.38c-.83 0-1.543-.497-1.858-1.21H1.775a.5.5 0 01-.5-.5V3.281a.5.5 0 01.5-.5zm4.799 1.5h6.608a.917.917 0 110 1.834H6.574a.917.917 0 110-1.834zm.114 5.875h6.38a1.031 1.031 0 110 2.063h-6.38a1.032 1.032 0 110-2.063z",fill:"currentColor"}))}var JF,eB,QEe=C(()=>{JF=Q(Re()),eB=ZEe});function JEe(i){return tB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),tB.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.5L4 6.654 5.2 5.5 8 8.385 10.8 5.5 12 6.654 8 10.5z",fill:"currentColor"}))}var tB,x7,eCe=C(()=>{tB=Q(Re()),x7=JEe});function tCe(i){return nB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),nB.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 3c-1.072 0-1.969.904-1.969 1.969 0 1 .929 1.968 1.969 1.968h9A1.969 1.969 0 1012.5 3h-9zm9 1H5.531v1.938H12.5A.969.969 0 0012.5 4zM3.5 9.14a1.969 1.969 0 000 3.938h9a1.969 1.969 0 100-3.937h-9zm9 1H8.406v1.938H12.5a.969.969 0 100-1.937z",fill:"currentColor"}))}var nB,S7,nCe=C(()=>{nB=Q(Re()),S7=tCe});function rCe(i){return rB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),rB.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.166 7.994a2.26 2.26 0 114.518 0 2.26 2.26 0 01-4.518 0zM2.425 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM5.74 7.994a2.26 2.26 0 114.519 0 2.26 2.26 0 01-4.519 0zM8 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM13.575 5.735a2.26 2.26 0 100 4.519 2.26 2.26 0 000-4.52zm-1.086 2.26a1.085 1.085 0 112.171 0 1.085 1.085 0 01-2.17 0z",fill:"currentColor"}))}var rB,E7,iCe=C(()=>{rB=Q(Re()),E7=rCe});function oCe(i){return iB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),iB.createElement("path",{d:"M8.339 4.5l-2.055.644 4.451 1.393v2.748l-2.966.928-2.504-.783V6.738l2.42.758 2.055-.644-4.458-1.395L4 5.858v4.463L7.768 11.5 12 10.175V5.646L8.339 4.5z",fill:"currentColor"}))}var iB,oB,sCe=C(()=>{iB=Q(Re()),oB=oCe});function aCe(i){return sB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),sB.createElement("path",{d:"M8 1.57c-.416 0-.752.36-.752.804v.482c-1.715.372-3.006 1.994-3.006 3.938v.473c0 1.18-.407 2.32-1.14 3.205l-.173.208a.85.85 0 00-.125.864.75.75 0 00.686.475h9.019a.752.752 0 00.686-.475.845.845 0 00-.125-.864l-.174-.208a5.026 5.026 0 01-1.139-3.205v-.473c0-1.944-1.291-3.566-3.006-3.938v-.482c0-.445-.336-.804-.752-.804zm1.063 12.39c.282-.301.44-.71.44-1.138H6.496c0 .428.158.837.44 1.138.281.302.664.47 1.063.47.4 0 .783-.168 1.064-.47z",fill:"currentColor"}))}var sB,dA,lCe=C(()=>{sB=Q(Re()),dA=aCe});function uCe(i){return aB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),aB.createElement("path",{d:"M6.8 11.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6zm6-7.2h-2.4v-.6A1.8 1.8 0 008.6 2H7.4a1.8 1.8 0 00-1.8 1.8v.6H3.2a.6.6 0 100 1.2h.6v6.6A1.8 1.8 0 005.6 14h4.8a1.8 1.8 0 001.8-1.8V5.6h.6a.6.6 0 100-1.2zm-6-.6a.6.6 0 01.6-.6h1.2a.6.6 0 01.6.6v.6H6.8v-.6zm4.2 8.4a.6.6 0 01-.6.6H5.6a.6.6 0 01-.6-.6V5.6h6v6.6zm-1.8-.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6z",fill:"currentColor"}))}var aB,lB,cCe=C(()=>{aB=Q(Re()),lB=uCe}),$x=C(()=>{QEe(),eCe(),nCe(),iCe(),sCe(),lCe(),cCe()}),oc,C7,hA,P7,k7,T7,M7,A7,I7,R7,O7,D7,L7,N7,F7,B7,U7,V7,Kx,pA=C(()=>{oc=Q(Re()),Ne(),Py(),vr(),$x(),hA=se.li(C7||(C7=G([`
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  justify-content: flex-start;
  flex-direction: column;
  align-items: flex-start;
`]))),k7=se.div(P7||(P7=G([""]))),M7=se(k7)(T7||(T7=G([`
  position: relative;
  margin-top: 2px;
  margin-bottom: 2px;
  margin-left: calc(4px + var(--depth) * 16px);
  padding-left: 4px;
  padding-right: 8px;
  gap: 4px;
  height: 21px;
  line-height: 0;
  box-sizing: border-box;
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  pointer-events: none;
  white-space: nowrap;

  border-radius: 2px;
  box-shadow: 0 3px 4px -1px rgba(0, 0, 0, 0.48);

  color: rgba(255, 255, 255, 0.9);
  background: rgba(40, 43, 47, 0.65);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);

  &.descendant-is-selected {
    background: rgba(29, 53, 59, 0.7);
  }

  `,`;
  &:not(.not-selectable):not(.selected):hover {
    background: rgba(59, 63, 69, 0.9);

    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &:not(.not-selectable):not(.selected):active {
    background: rgba(82, 88, 96, 0.9);
    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &.selected {
    background: rgba(30, 88, 102, 0.7);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr),I7=No(A7||(A7=G([`
  font-weight: 500;
  font-size: 11px;
  & {
  }
`]))),O7=se.span(R7||(R7=G([`
  `,`;

  `,`;
  position: relative;
  // Compensate for border bottom
  top: 0.5px;
  display: flex;
  height: 20px;
  align-items: center;
  box-sizing: border-box;
`])),I7,hr),L7=se.div(D7||(D7=G([`
  font-weight: 500;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  opacity: 0.99;
`]))),F7=se.span(N7||(N7=G([`
  font-size: 9px;
  position: relative;
  display: block;
  transition: transform 0.1s ease-out;

  &:hover {
    transform: rotate(-20deg);
  }

  `,`.collapsed & {
    transform: rotate(-90deg);

    &:hover {
      transform: rotate(-70deg);
    }
  }
`])),hA),U7=se.ul(B7||(B7=G([`
  margin: 0;
  padding: 0;
  list-style: none;

  `,`.collapsed & {
    display: none;
  }
`])),hA),V7=({label:i,children:s,depth:a,select:c,selectionStatus:p,labelDecoration:f,collapsed:g=!1,setIsCollapsed:y})=>{let w=s!==void 0;return oc.default.createElement(hA,{style:{"--depth":a},className:g?"collapsed":""},oc.default.createElement(M7,{className:p,onClick:c??iu,"data-header":!0},oc.default.createElement(L7,null,w?oc.default.createElement(F7,{onClick:S=>{S.stopPropagation(),S.preventDefault(),y==null||y(!g)}},oc.default.createElement(x7,null)):oc.default.createElement(oB,null)),oc.default.createElement(O7,null,oc.default.createElement("span",null,i)),f),w&&oc.default.createElement(U7,null,s))},Kx=V7});function dCe(i){return Object.keys(i)}function hCe(i){return Object.keys((0,sc.val)(i.sheetTemplatesP))}function pCe(){let i=rs(bp().filter(s=>Wt(s)||Dt(s)).map(s=>Dt(s)?s.sheet:s))[0];if(i)return i.getSequence()}var sc,bp,j7,_p=C(()=>{sc=Mt,$n(),ti(),Fe(),bp=()=>{var i;let s=(0,sc.val)(me().projectsP),a=((i=(0,sc.val)(me().atomP.historic.panels.outlinePanel.selection))!=null?i:[]).map(c=>{let p=s[c.projectId];if(!p)return;if(c.type==="Project")return p;if(!(0,sc.val)(p.sheetTemplatesP[c.sheetId]))return;let f=j7(p,c.sheetId);if(!f)return;if(c.type==="Sheet")return f;let g=(0,sc.val)(f.objectsP[c.objectKey]);if(g)return g});return rs(a.filter(c=>typeof c<"u"))},j7=(i,s)=>{let a=me().atomP.historic.projects.stateByProjectId[i.address.projectId],c=(0,sc.val)(a.stateBySheetId[s].selectedInstanceId),p=(0,sc.val)(i.sheetTemplatesP[s]);if(p){if(c)return(0,sc.val)(p.instancesP[c]);{let f=(0,sc.val)(p.instancesP);return f[dCe(f)[0]]}}}}),z7,H7,fCe=C(()=>{Fe(),z7=Q(Re()),pA(),hn(),_p(),H7=({sheetObject:i,depth:s,overrideLabel:a})=>{let c=()=>{me().transaction(({stateEditors:f})=>{f.studio.historic.panels.outline.selection.set([i])})},p=Un(()=>bp(),[]);return z7.default.createElement(Kx,{select:c,label:a??i.address.objectKey,depth:s,selectionStatus:p.includes(i)?"selected":"not-selected"})}});function uB(i){var s;let a=i.type==="namespace"?"namespace:".concat(i.sheet.address.sheetId,":").concat(i.path.join("/")):i.type==="Theatre_Project"?"project":i.type==="Theatre_Sheet"?"sheetInstance:".concat(i.address.sheetId,":").concat(i.address.sheetInstanceId):"unknown",c=i.type==="namespace"?i.sheet.address.projectId:i.address.projectId,p=(s=Wn(me().atomP.ahistoric.projects.stateByProjectId[c].collapsedItemsInOutline[a]))!=null?s:!1,f=(0,G7.useCallback)(g=>{me().transaction(({stateEditors:y})=>{y.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline.set({projectId:c,isCollapsed:g,itemKey:a})})},[a]);return{collapsed:p,setCollapsed:f}}var G7,cB=C(()=>{G7=Q(Re()),Fe(),hn()});function W7(i){return ac.default.createElement(ac.default.Fragment,null,[...i.namespace.entries()].map(([s,{object:a,nested:c}])=>ac.default.createElement(mCe,{key:s,label:s,object:a,nested:c,visualIndentation:i.visualIndentation,path:i.path,sheet:i.sheet})))}function mCe(i){let{nested:s,label:a,object:c,sheet:p}=i,{collapsed:f,setCollapsed:g}=uB({type:"namespace",sheet:p,path:[...i.path,a]}),y=s&&ac.default.createElement(W7,{namespace:s,path:[...i.path,a],key:"namespaceTree("+a+")",visualIndentation:i.visualIndentation+1,sheet:p}),w=c&&ac.default.createElement(H7,{depth:i.visualIndentation,key:"objectPath("+c.address.objectKey+")",sheetObject:c,overrideLabel:a});return ac.default.createElement(ac.default.Fragment,{key:"".concat(a," - ").concat(i.visualIndentation)},w,y&&ac.default.createElement(Kx,{selectionStatus:"not-selectable",label:a,key:"baseItem(".concat(a,")"),depth:i.visualIndentation,children:y,collapsed:f,setIsCollapsed:g}))}function $7(i,s,a=vCe(s)){let[c,...p]=a,f=i.get(c);f||(f={nested:void 0,object:void 0,path:[...a]},i.set(c,f)),p.length===0?(console.assert(!f.object,"expect not to have existing object with same name",{existing:f,object:s}),f.object=s):(f.nested||(f.nested=new Map),$7(f.nested,s,p))}function vCe(i){let s=dB.get(i);return s||(s=i.address.objectKey.split(Z7),console.assert(s.length>0,"expected not empty"),dB.set(i,s)),s}var K7,ac,q7,X7,Y7,Z7,dB,gCe=C(()=>{hn(),K7=Mt,ac=Q(Re()),Ne(),fCe(),pA(),cB(),se.li(q7||(q7=G([`
  color: `,`;
`])),i=>i.isSelected?"white":"hsl(1, 1%, 80%)"),X7=({sheet:i,depth:s})=>Un(()=>{let a=(0,K7.val)(i.objectsP),c=Object.values(a).filter(f=>f!=null),p=new Map;return c.forEach(f=>{$7(p,f)}),ac.default.createElement(W7,{namespace:p,visualIndentation:s,path:[],sheet:i})},[i,s]),Y7=X7,Z7=/\s*\/\s*/g,dB=new WeakMap}),ky,Q7,J7,eK,tK,nK,rK,yCe=C(()=>{Fe(),_p(),hn(),ky=Q(Re()),Ne(),gCe(),pA(),cB(),J7=se.div(Q7||(Q7=G([`
  display: flex;
`]))),se.li(eK||(eK=G([`
  color: `,`;
`])),i=>i.isSelected?"white":"hsl(1, 1%, 80%)"),nK=se.div(tK||(tK=G([""]))),rK=({sheet:i,depth:s})=>{let{collapsed:a,setCollapsed:c}=uB(i),p=(0,ky.useCallback)(()=>{me().transaction(({stateEditors:f})=>{f.studio.historic.panels.outline.selection.set([i])})},[i]);return Un(()=>{let f=bp();return ky.default.createElement(Kx,{depth:s,select:p,setIsCollapsed:c,collapsed:a,selectionStatus:f.some(g=>g===i)?"selected":f.some(g=>g.type==="Theatre_SheetObject"&&g.sheet===i)?"descendant-is-selected":"not-selected",label:ky.default.createElement(J7,null,i.address.sheetId,": ",i.address.sheetInstanceId)},ky.default.createElement(nK,null,ky.default.createElement(Y7,{depth:s+1,sheet:i,key:"objectList"+i.address.sheetInstanceId})))},[s,a])}}),hB,Ty,iK,oK,sK,aK,bCe=C(()=>{hn(),hB=Mt,Ty=Q(Re()),Ne(),yCe(),se.div(iK||(iK=G([`
  display: flex;
`]))),se.li(oK||(oK=G([`
  color: `,`;
`])),i=>i.isSelected?"white":"hsl(1, 1%, 80%)"),se.div(sK||(sK=G([""]))),aK=({sheetId:i,depth:s,project:a})=>Un(()=>{let c=(0,hB.val)(a.sheetTemplatesP[i]);if(!c)return Ty.default.createElement(Ty.default.Fragment,null);let p=(0,hB.val)(c.instancesP);return Ty.default.createElement(Ty.default.Fragment,null,Object.entries(p).map(([f,g])=>Ty.default.createElement(rK,{key:g.address.sheetInstanceId,sheet:g,depth:s})))},[s,i,a])}),fA,lK,uK,_Ce=C(()=>{_p(),hn(),fA=Q(Re()),bCe(),lK=({project:i,depth:s})=>Un(()=>{if(!i)return null;let a=hCe(i);return fA.default.createElement(fA.default.Fragment,null,a.map(c=>fA.default.createElement(aK,{depth:s,sheetId:c,key:"sheet-".concat(c),project:i})))},[i,s]),uK=lK}),qx,cK,dK,hK,pK,fK,wCe=C(()=>{qx=Q(Re()),pA(),_Ce(),Fe(),hn(),_p(),cK=Mt,Ne(),cB(),hK=se.div(dK||(dK=G([`
  color: #ff6363;
  margin-left: 11px;
  background: #4c282d;
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 10px;
  box-shadow: 0 2px 8px -4px black;
`]))),pK=({depth:i,project:s})=>{let a=Un(()=>bp(),[]),c=Un(()=>{let y=s.address.projectId,w=(0,cK.val)(me().atomP.ephemeral.coreByProject[y].loadingState);return(w==null?void 0:w.type)==="browserStateIsNotBasedOnDiskState"},[s]),p=(0,qx.useCallback)(()=>{me().transaction(({stateEditors:y})=>{y.studio.historic.panels.outline.selection.set([s])})},[s]),{collapsed:f,setCollapsed:g}=uB(s);return qx.default.createElement(Kx,{depth:i,label:s.address.projectId,setIsCollapsed:g,collapsed:f,labelDecoration:c?qx.default.createElement(hK,null,"Has Conflicts"):null,children:qx.default.createElement(uK,{project:s,depth:i+1}),selectionStatus:a.includes(s)?"selected":a.some(y=>y.address.projectId===s.address.projectId)?"descendant-is-selected":"not-selected",select:p})},fK=pK}),mK,pB,vK,gK,yK,bK,xCe=C(()=>{mK=Mt,hn(),Fe(),pB=Q(Re()),Ne(),wCe(),gK=se.ul(vK||(vK=G([`
  list-style: none;
  margin: 0;
  padding: 0;
  padding-right: 4px;
`]))),yK=i=>Un(()=>{let s=(0,mK.val)(me().projectsP);return pB.default.createElement(gK,null,Object.keys(s).map(a=>{let c=s[a];return pB.default.createElement(fK,{depth:0,project:c,key:"projectListItem-".concat(a)})}))},[]),bK=yK});function _K(i){let[s,a]=(0,fB.useState)(!1);return(0,fB.useEffect)(()=>{let c=f=>{let g=s?200:50,y=56,w=i==="left"?f.x<g:f.x>window.innerWidth-g;w&&(w=f.y>y),a(!!w)};document.addEventListener("mousemove",c);let p=()=>{a(!1)};return document.addEventListener("mouseleave",p),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseleave",p)}},[s]),s}var fB,wK=C(()=>{fB=Q(Re())}),Xx,My,mB,xK,SK,EK,CK,mA,Yx,PK,SCe=C(()=>{Xx=Q(Re()),Ne(),Md(),xCe(),hn(),Fe(),wK(),My=Mt,vr(),mB="44px",SK=se.div(xK||(xK=G([`
  `,`;
  background-color: transparent;
  position: absolute;
  left: 8px;
  z-index: `,`;

  top: calc(`,` + 8px);
  height: fit-content;
  max-height: calc(100% - `,`);
  overflow-y: scroll;
  overflow-x: hidden;
  padding: 0;
  user-select: none;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;

  display: `,`;

  &:hover {
    display: block;
  }

  // Create a small buffer on the bottom to aid selecting the bottom item in a long, scrolling list
  &::after {
    content: '';
    display: block;
    height: 20px;
  }
`])),hr,Cy.outlinePanel,mB,mB,({pin:i})=>i?"block":"none"),EK=()=>{var i;let s=(i=Wn(me().atomP.ahistoric.pinOutline))!=null?i:!0,a=Wn(PK),c=_K("left");return(0,Xx.useLayoutEffect)(()=>{mA.set(c)},[c]),(0,Xx.useEffect)(()=>()=>{Yx.set(!1),mA.set(!1)},[]),Xx.default.createElement(SK,{pin:s||a,onMouseEnter:()=>{Yx.set(!0)},onMouseLeave:()=>{Yx.set(!1)}},Xx.default.createElement(bK,null))},CK=EK,mA=new My.Atom(!1),Yx=new My.Atom(!1),PK=(0,My.prism)(()=>{let i=(0,My.val)(Yx.prism),s=(0,My.val)(mA.prism);return i||s})}),kK,TK,MK,ECe=C(()=>{Ne(),TK=se.input.attrs({type:"checkbox"})(kK||(kK=G([`
  outline: none;
`]))),MK=TK});function CCe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let p=(0,vB.useCallback)(f=>{s.permanentlySetValue(!!f.target.checked)},[i,s]);return vB.default.createElement(IK,{checked:a,onChange:p,autoFocus:c})}var vB,AK,IK,RK,PCe=C(()=>{vB=Q(Re()),Ne(),ECe(),IK=se(MK)(AK||(AK=G([`
  margin-left: 6px;

  :focus {
    outline: 1px solid #555;
  }
`]))),RK=CCe});function vA(i){return s=>{i.forEach(a=>{typeof a=="function"?a(s):a!=null&&(a.current=s)})}}var gA=C(()=>{});function gB(i,s,a){(0,OK.useEffect)(()=>{if(!i||a===!1)return;let c=Array.isArray(i)?i.filter(f=>f):[i],p=f=>{c.every(g=>!f.composedPath().includes(g))&&s(f)};return window.addEventListener("mousedown",p,{capture:!0,passive:!1}),()=>{window.removeEventListener("mousedown",p,{capture:!0,passive:!1})}},[i,a])}var OK,yB=C(()=>{OK=Q(Re())}),Ad,DK,Id,LK,NK,FK,BK,bB,UK,dl,VK,Ca=C(()=>{Ad=Q(Re()),Ne(),DK="pointer-root",Id="--lockedCursor",NK=se.div(LK||(LK=G([`
  pointer-events: auto;
  &.normal {
    pointer-events: none;
  }
`]))),BK=se.div(FK||(FK=G([`
  position: absolute;
  inset: 0;
  pointer-events: none;

  #pointer-root:not(.normal) > & {
    pointer-events: auto;
  }
`]))),bB=(0,Ad.createContext)({}),UK=i=>{var s,a,c,p;let[f,g]=(0,Ad.useState)([]),y=(0,Ad.useMemo)(()=>({getLock:(S,M)=>{let R={className:S,cursor:M};return g(A=>[...A,R]),()=>{g(A=>A.filter(k=>k!==R))}}}),[]),w=(a=(s=f[0])==null?void 0:s.cursor)!=null?a:"";return Ad.default.createElement(bB.Provider,{value:y},Ad.default.createElement(NK,{id:DK,className:((p=(c=f[0])==null?void 0:c.className)!=null?p:"normal")+" "+i.className},Ad.default.createElement(BK,{style:{cursor:w,[Id]:w}},i.children)))},dl=(i,s,a)=>{let c=(0,Ad.useContext)(bB);(0,Ad.useLayoutEffect)(()=>{if(i)return c.getLock(s,a)},[i,s,a])},VK=UK});function jK(i){return Zx.default.createElement(_B.Provider,{value:i.logger},i.children)}function wp(i,s){let a=(0,Zx.useContext)(_B);return(0,Zx.useMemo)(()=>i?a.named(i,s):a,[a,i,s])}var Zx,_B,xp=C(()=>{Zx=Q(Re()),_B=Zx.default.createContext(null)});function kCe(){let i=wp("PointerCapturing"),s=ou.default.useRef(null),a=()=>s.current!=null;return c=>{let p,f=g=>(p=g,s.current=g,g);return{capturing:{capturePointer(g){if(i._debug("Capturing pointer",{forDebugName:c,reason:g}),s.current!=null)throw new Error('"'.concat(c,'" attempted capturing pointer for "').concat(g,'" while already captured by "').concat(s.current.debugOwnerName,'" for "').concat(s.current.debugReason,'"'));let y=f({debugOwnerName:c,debugReason:g});return{isCapturing(){return y===s.current},release(){return y===s.current?(i._debug("Releasing pointer",{forDebugName:c,reason:g}),f(null),!0):!1}}},isPointerBeingCaptured:a},forceRelease(){p&&s.current===p&&(i._debug("Force releasing pointer",{localCapture:p}),f(null))}}}}function TCe(i){let s=kCe();return ou.default.createElement(wB.Provider,{value:s},ou.default.createElement(HK,{children:i.children}))}function zK(i){let s=(0,ou.useContext)(wB),a=(0,ou.useMemo)(()=>s(i),[i,s]);return(0,ou.useEffect)(()=>()=>{a.forceRelease()},[a]),a.capturing}var ou,wB,HK,xB=C(()=>{ou=Q(Re()),xp(),wB=ou.default.createContext(null),HK=ou.default.memo(({children:i})=>ou.default.createElement(ou.default.Fragment,null,i))}),SB,MCe=C(()=>{SB=typeof window<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)});function Ei(i,s){let a=(0,Ay.useRef)(s);a.current=s;let c=s.shouldPointerLock&&!SB,p=(0,Ay.useRef)({domDragStarted:!1}),{capturePointer:f}=zK("useDrag for ".concat(s.debugName)),g=(0,Ay.useRef)({onDrag:iu,onDragEnd:iu,onClick:iu}),y=(0,Ay.useRef)(),[w,S]=sr(!1);return(0,Ay.useLayoutEffect)(()=>{if(!i)return;let M=()=>{let W=p.current.domDragStarted&&p.current.detection.detected;w.current!==W&&(w.current=W)},R=W=>{if(!p.current.domDragStarted)return;let X=p.current;if(!ACe(W,X)&&(X.detection.detected||(X.detection.totalDistanceMoved+=Math.abs(W.movementY)+Math.abs(W.movementX),X.detection.totalDistanceMoved>GK&&(c&&i.requestPointerLock(),X.detection={detected:!0,dragMovement:{x:0,y:0},dragEventCount:0},M())),X.detection.detected)){X.detection.dragEventCount+=1;let{dragMovement:re}=X.detection;if(c)re.x+=W.movementX,re.y+=W.movementY;else{let{startPos:ne}=X;re.x=W.screenX-ne.x,re.y=W.screenY-ne.y}g.current.onDrag(re.x,re.y,W,W.movementX,W.movementY)}},A=W=>{if(D(),!p.current.domDragStarted)return;let X=p.current.detection.detected;p.current={domDragStarted:!1},s.shouldPointerLock&&!SB&&document.exitPointerLock(),g.current.onDragEnd(X),window.focus(),X||g.current.onClick(W),M()},k=()=>{document.addEventListener("mousemove",R),document.addEventListener("mouseup",A)},D=()=>{var W;(W=y.current)==null||W.release(),document.removeEventListener("mousemove",R),document.removeEventListener("mouseup",A)},O=W=>{a.current.disabled||p.current.domDragStarted&&p.current.detection.detected&&(a.current.dontBlockMouseDown||(W.stopPropagation(),W.preventDefault()),p.current.detection={detected:!1,totalDistanceMoved:0},M())},F=W=>{var X,re,ne,ae;(X=y.current)==null||X.release();let xe=a.current;if(xe.disabled===!0||!((re=xe.buttons)!=null?re:[0]).includes(W.button))return;let fe=xe.onDragStart(W);fe!==!1&&(g.current.onDrag=fe.onDrag,g.current.onDragEnd=(ne=fe.onDragEnd)!=null?ne:iu,g.current.onClick=(ae=fe.onClick)!=null?ae:iu,y.current=f("Drag start"),xe.dontBlockMouseDown||(W.stopPropagation(),W.preventDefault()),p.current={domDragStarted:!0,startPos:{x:W.screenX,y:W.screenY},detection:{detected:!1,totalDistanceMoved:0}},M(),k())},V=W=>{F(W)};return i.addEventListener("mousedown",V),i.addEventListener("click",O),()=>{var W,X;D(),i.removeEventListener("mousedown",V),i.removeEventListener("click",O),p.current.domDragStarted&&((X=(W=g.current).onDragEnd)==null||X.call(W,p.current.detection.detected)),p.current={domDragStarted:!1},M()}},[i]),dl(S&&!!s.lockCSSCursorTo,"dragging",s.lockCSSCursorTo),[S]}function ACe(i,s){return(!s.detection.detected||s.detection.detected&&s.detection.dragEventCount<3)&&(Math.abs(i.movementX)>EB||Math.abs(i.movementY)>EB)}var Ay,GK,EB,no=C(()=>{Ay=Q(Re()),Ca(),xB(),Py(),MCe(),mr(),GK=3,EB=100});function ICe(i){return isNaN(i)?"NaN":ns(i)?i.toFixed(0):Xm(i,3).toString()}var WK,$K,Rd,KK,yA,qK,XK,YK,ZK,QK,JK,eq,tq,bA,CB=C(()=>{ti(),WK=Q(Re()),$K=Q(Re()),Rd=Q(Re()),Ne(),gA(),mr(),yB(),no(),yA=se.div(KK||(KK=G([`
  height: 100%;
  width: 100%;
  position: relative;
  z-index: 0;
  box-sizing: border-box;
  display: flex;
  align-items: center;

  &:after {
    position: absolute;
    inset: 1px 0 2px;
    display: block;
    content: ' ';
    background-color: transparent;
    border: 1px solid transparent;
    z-index: -2;
    box-sizing: border-box;
    border-radius: 1px;
  }

  &:hover,
  &.dragging,
  &.editingViaKeyboard {
    &:after {
      background-color: #10101042;
      border-color: #00000059;
    }
  }
`]))),XK=se.input(qK||(qK=G([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: ew-resize;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;

  &:focus {
    cursor: text;
  }
`]))),ZK=se.div(YK||(YK=G([`
  position: absolute;
  inset: 3px 2px 4px;
  transform: scale(var(--percentage), 1);
  transform-origin: top left;
  background-color: #2d5561;
  z-index: -1;
  border-radius: 2px;
  pointer-events: none;

  `,".dragging &, ",`.noFocus:hover & {
    background-color: #338198;
  }
`])),yA,yA),JK=se.div(QK||(QK=G([`
  display: contents;
`]))),eq=i=>!0,tq=i=>{var s;let[a]=sr({mode:"noFocus"}),c=(s=i.isValid)!=null?s:eq,p=(0,Rd.useRef)(i);p.current=i;let f=(0,Rd.useRef)(null);gB(f.current,()=>{f.current.blur()},a.current.mode==="editingViaKeyboard");let g=(0,Rd.useRef)(null),y=(0,Rd.useMemo)(()=>{let F=fe=>{let ge=fe.target,{value:Ie}=ge,Qe=a.current;a.current=z(j({},Qe),{currentEditedValueInString:Ie});let le=parseFloat(Ie);!isFinite(le)||!c(le)||p.current.temporarilySetValue(le)},V=()=>{a.current.mode==="editingViaKeyboard"&&(W(),a.current={mode:"noFocus"}),i.onBlur&&i.onBlur()},W=()=>{let fe=a.current,ge=parseFloat(fe.currentEditedValueInString);!isFinite(ge)||!c(ge)||fe.valueBeforeEditing===ge?p.current.discardTemporaryValue():p.current.permanentlySetValue(ge)},X=fe=>{fe.key==="Escape"?(p.current.discardTemporaryValue(),a.current={mode:"noFocus"},f.current.blur()):(fe.key==="Enter"||fe.key==="Tab")&&(W(),f.current.blur())},re=fe=>{a.current.mode==="noFocus"&&(f.current.focus(),fe.preventDefault()),fe.stopPropagation()},ne=()=>{a.current.mode==="noFocus"?ae():a.current.mode},ae=()=>{let fe=p.current.value;a.current={mode:"editingViaKeyboard",currentEditedValueInString:String(fe),valueBeforeEditing:fe},setTimeout(()=>{f.current.focus(),f.current.setSelectionRange(0,100)})},xe;return{inputChange:F,onBlur:V,transitionToDraggingMode:()=>{var fe;let ge=p.current.value;xe=(fe=f.current)==null?void 0:fe.getBoundingClientRect().width,a.current={mode:"dragging"};let Ie=ge,Qe=ge;return g.current=document.body.style.cursor,{onDrag(le,Ae,Y,Ue){let Tt=Y.altKey?Ue/10:Ue,ke=Qe+i.nudge({deltaX:Tt,deltaFraction:Tt/xe,magnitude:1});Qe=i.range?ci(ke,i.range[0],i.range[1]):ke,p.current.temporarilySetValue(Qe)},onDragEnd(le){le?(Ie===Qe?p.current.discardTemporaryValue():p.current.permanentlySetValue(Qe),a.current={mode:"noFocus"}):(p.current.discardTemporaryValue(),a.current={mode:"noFocus"})},onClick(){f.current.focus(),f.current.setSelectionRange(0,100)}}},onInputKeyDown:X,onClick:re,onFocus:ne}},[]);(0,WK.useEffect)(()=>()=>{y.onBlur()},[]);let w=a.current.mode!=="editingViaKeyboard"?ICe(i.value):a.current.currentEditedValueInString;typeof w=="number"&&isNaN(w)&&(w="NaN");let S=[f];i.inputRef&&S.push(i.inputRef);let M=Rd.default.createElement(XK,{key:"input",type:"text",onChange:y.inputChange,value:w,onBlur:y.onBlur,onKeyDown:y.onInputKeyDown,onClick:y.onClick,onFocus:y.onFocus,ref:vA(S),onMouseDown:F=>{F.stopPropagation()},onDoubleClick:F=>{F.preventDefault(),F.stopPropagation()},autoFocus:i.autoFocus}),{range:R}=i,A=parseFloat(w),k=R?Rd.default.createElement(ZK,{style:{"--percentage":ci((A-R[0])/(R[1]-R[0]),0,1)}}):null,[D,O]=(0,$K.useState)(null);return Ei(D,{debugName:"form/BasicNumberInput",onDragStart:y.transitionToDraggingMode,lockCSSCursorTo:"ew-resize",shouldPointerLock:!0,disabled:a.current.mode==="editingViaKeyboard"}),Rd.default.createElement(yA,{className:i.className+" "+a.current.mode},Rd.default.createElement(JK,{ref:O},M),k)},bA=tq});function RCe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let p=(0,PB.useCallback)(f=>i.nudgeFn(z(j({},f),{config:i})),[i]);return PB.default.createElement(bA,{value:a,temporarilySetValue:s.temporarilySetValue,discardTemporaryValue:s.discardTemporaryValue,permanentlySetValue:s.permanentlySetValue,range:i.range,nudge:p,autoFocus:c})}var PB,kB,nq=C(()=>{CB(),PB=Q(Re()),kB=RCe});function OCe({value:i,onChange:s,options:a,autoFocus:c}){let p=(0,Qx.useCallback)(f=>{s(String(f.target.value))},[s]);return Qx.default.createElement(TB,{role:"radiogroup"},Object.keys(a).map((f,g)=>Qx.default.createElement(oq,{key:"label-"+g,"data-checked":i===f},a[f],Qx.default.createElement(aq,{type:"radio",checked:i===f,value:f,onChange:p,name:"switchbox",autoFocus:c}))))}var Qx,rq,TB,iq,oq,sq,aq,lq,DCe=C(()=>{Ea(),Qx=Q(Re()),Ne(),TB=se.form(rq||(rq=G([`
  display: flex;
  flex-direction: row;
  align-items: stretch;
  vertical-align: middle;
  justify-content: stretch;
  height: 24px;
  width: 100%;
`]))),oq=se.label(iq||(iq=G([`
  padding: 0 0.5em;
  background: transparent;
  /* background: #373748; */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  color: #a7a7a7;
  border: 1px solid transparent;
  box-sizing: border-box;
  border-right-width: 0px;

  & + &:last-child {
    border-right-width: 1px;
  }

  `,`:hover > & {
    border-color: #1c2123;
    /* background-color: #373748; */
    /* color: `,`; */
  }

  &&:hover {
    background-color: #464654;
  }

  &&[data-checked='true'] {
    color: white;
    background: #3f3f4c;
  }
`])),TB,Bx(.1,"white")),aq=se.input(sq||(sq=G([`
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
`]))),lq=OCe}),LCe=C(()=>{}),MB,AB,IB,uq=C(()=>{MB=Q(Re()),AB={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IB=MB.default.createContext&&MB.default.createContext(AB)});function cq(i){return i&&i.map(function(s,a){return Ry.default.createElement(s.tag,Od({key:a},s.attr),cq(s.child))})}function Iy(i){return function(s){return Ry.default.createElement(NCe,Od({attr:Od({},i.attr)},s),cq(i.child))}}function NCe(i){var s=function(a){var c=i.attr,p=i.size,f=i.title,g=dq(i,["attr","size","title"]),y=p||a.size||"1em",w;return a.className&&(w=a.className),i.className&&(w=(w?w+" ":"")+i.className),Ry.default.createElement("svg",Od({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,c,g,{className:w,style:Od(Od({color:i.color||a.color},a.style),i.style),height:y,width:y,xmlns:"http://www.w3.org/2000/svg"}),f&&Ry.default.createElement("title",null,f),i.children)};return IB!==void 0?Ry.default.createElement(IB.Consumer,null,function(a){return s(a)}):s(AB)}var Ry,Od,dq,FCe=C(()=>{Ry=Q(Re()),uq(),Od=function(){return Od=Object.assign||function(i){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(i[p]=s[p])}return i},Od.apply(this,arguments)},dq=function(i,s){var a={};for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&s.indexOf(c)<0&&(a[c]=i[c]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,c=Object.getOwnPropertySymbols(i);p<c.length;p++)s.indexOf(c[p])<0&&Object.prototype.propertyIsEnumerable.call(i,c[p])&&(a[c[p]]=i[c[p]]);return a}}),qi=C(()=>{LCe(),FCe(),uq()}),BCe=C(()=>{qi()}),UCe=C(()=>{qi()});function VCe(i){return Iy({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}}]})(i)}var jCe=C(()=>{qi()}),zCe=C(()=>{qi()}),HCe=C(()=>{qi()});function GCe(i){return Iy({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.5 3L7 4.5 3.25 8 7 11.5 5.5 13l-5-5 5-5z"}}]})(i)}function WCe(i){return Iy({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3l5 5z"}}]})(i)}var $Ce=C(()=>{qi()}),KCe=C(()=>{qi()}),qCe=C(()=>{qi()}),XCe=C(()=>{qi()}),YCe=C(()=>{qi()}),ZCe=C(()=>{qi()}),QCe=C(()=>{qi()}),JCe=C(()=>{qi()}),ePe=C(()=>{qi()}),tPe=C(()=>{qi()});function hq(i){return Iy({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(i)}var nPe=C(()=>{qi()}),rPe=C(()=>{qi()}),iPe=C(()=>{qi()}),oPe=C(()=>{qi()});function sPe(i){return Iy({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M6 9.65685L7.41421 11.0711L11.6569 6.82843L15.8995 11.0711L17.3137 9.65685L11.6569 4L6 9.65685Z",fill:"currentColor"}},{tag:"path",attr:{d:"M6 14.4433L7.41421 13.0291L11.6569 17.2717L15.8995 13.0291L17.3137 14.4433L11.6569 20.1001L6 14.4433Z",fill:"currentColor"}}]})(i)}var aPe=C(()=>{qi()});function lPe(i){return Iy({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 10.44l-.413.56H2.393L2 10.46 7.627 5h.827L14 10.44z"}}]})(i)}var uPe=C(()=>{qi()}),Oy=C(()=>{BCe(),UCe(),jCe(),zCe(),HCe(),$Ce(),KCe(),qCe(),XCe(),YCe(),ZCe(),QCe(),JCe(),ePe(),tPe(),nPe(),rPe(),iPe(),oPe(),aPe(),uPe()});function cPe({value:i,onChange:s,options:a,className:c,autoFocus:p}){let f=(0,ov.useCallback)(g=>{s(String(g.target.value))},[s]);return ov.default.createElement(fq,null,ov.default.createElement(yq,{className:c,value:i,onChange:f,autoFocus:p},Object.keys(a).map((g,y)=>ov.default.createElement("option",{key:"option-"+y,value:g},a[g]))),ov.default.createElement(vq,null,ov.default.createElement(sPe,null)))}var ov,pq,fq,mq,vq,gq,yq,bq,dPe=C(()=>{ov=Q(Re()),Ne(),Oy(),fq=se.div(pq||(pq=G([`
  width: 100%;
  position: relative;
`]))),vq=se.div(mq||(mq=G([`
  position: absolute;
  right: 0px;
  top: 0;
  bottom: 0;
  width: 1.5em;
  font-size: 14px;
  display: flex;
  align-items: center;
  color: #6b7280;
  pointer-events: none;
`]))),yq=se.select(gq||(gq=G([`
  appearance: none;
  background-color: transparent;
  box-sizing: border-box;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.85);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  text-align: left;
  width: 100%;
  border-radius: 2px;
  /*
  looks like putting percentages in the height of a select box doesn't work in Firefox. Not sure why.
  So we're hard-coding the height to 26px, unlike all other inputs that use a relative height.
  */
  height: 26px /* calc(100% - 4px); */;

  @supports (-moz-appearance: none) {
    /* Ugly hack to remove the extra left padding that shows up only in Firefox */
    text-indent: -2px;
  }

  &:hover,
  &:focus {
    background-color: #10101042;
    border-color: #00000059;
  }
`]))),bq=cPe});function hPe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let p=(0,_A.useCallback)(f=>{s.permanentlySetValue(f)},[i,s]);return i.as==="menu"?_A.default.createElement(bq,{value:a,onChange:p,options:i.valuesAndLabels,autoFocus:c}):_A.default.createElement(lq,{value:a,onChange:p,options:i.valuesAndLabels,autoFocus:c})}var _A,_q,pPe=C(()=>{_A=Q(Re()),DCe(),dPe(),_q=hPe}),wq,Jx,xq,Sq,Eq,Cq,wA,RB=C(()=>{Ne(),wq=Q(Re()),Jx=Q(Re()),gA(),mr(),yB(),Sq=se.input.attrs({type:"text"})(xq||(xq=G([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;
  border: 1px solid transparent;
  box-sizing: border-box;

  &:hover {
    background-color: #10101042;
    border-color: #00000059;
  }

  &:hover,
  &:focus {
    cursor: text;
    background-color: #10101042;
    border-color: #00000059;
  }

  &.invalid {
    border-color: red;
  }
`]))),Eq=i=>!0,Cq=i=>{var s,a;let[c]=sr({mode:"noFocus"}),p=(s=i.isValid)!=null?s:Eq,f=(0,Jx.useRef)(i);f.current=i;let g=(0,Jx.useRef)(null);gB(g.current,()=>{g.current.blur()},c.current.mode==="editingViaKeyboard");let y=(0,Jx.useMemo)(()=>{let M=V=>{let W=V.target,{value:X}=W,re=c.current;c.current=z(j({},re),{currentEditedValueInString:X}),p(X)&&f.current.temporarilySetValue(X)},R=()=>{var V,W;c.current.mode==="editingViaKeyboard"&&(A(),c.current={mode:"noFocus"}),(W=(V=f.current).onBlur)==null||W.call(V)},A=()=>{let V=c.current,W=V.currentEditedValueInString;p(W)?V.valueBeforeEditing===W?f.current.discardTemporaryValue():f.current.permanentlySetValue(W):f.current.discardTemporaryValue()},k=V=>{V.key==="Escape"?(f.current.discardTemporaryValue(),c.current={mode:"noFocus"},g.current.blur()):(V.key==="Enter"||V.key==="Tab")&&(A(),g.current.blur())},D=V=>{c.current.mode==="noFocus"&&(g.current.focus(),V.preventDefault()),V.stopPropagation()},O=()=>{c.current.mode==="noFocus"?F():c.current.mode},F=()=>{let V=f.current.value;c.current={mode:"editingViaKeyboard",currentEditedValueInString:String(V),valueBeforeEditing:V},setTimeout(()=>{g.current.focus()})};return{inputChange:M,onBlur:R,onInputKeyDown:k,onClick:D,onFocus:O}},[]);(0,wq.useEffect)(()=>()=>{y.onBlur()},[]);let w=c.current.mode!=="editingViaKeyboard"?i.value:c.current.currentEditedValueInString,S=[g];return i.inputRef&&S.push(i.inputRef),Jx.default.createElement(Sq,{key:"input",type:"text",className:"".concat((a=i.className)!=null?a:""," ").concat(p(w)?"":"invalid"),onChange:y.inputChange,value:w,onBlur:y.onBlur,onKeyDown:y.onInputKeyDown,onClick:y.onClick,onFocus:y.onFocus,ref:vA(S),onMouseDown:M=>{M.stopPropagation()},onDoubleClick:M=>{M.preventDefault(),M.stopPropagation()},autoFocus:i.autoFocus})},wA=Cq});function fPe({editingTools:i,value:s,autoFocus:a}){return Pq.default.createElement(wA,{value:s,temporarilySetValue:i.temporarilySetValue,discardTemporaryValue:i.discardTemporaryValue,permanentlySetValue:i.permanentlySetValue,autoFocus:a})}var Pq,kq,mPe=C(()=>{Pq=Q(Re()),RB(),kq=fPe});function vPe(i){i=i.trim().toLowerCase();let s=i.match(LB);if(!s)return{r:0,g:0,b:0,a:1};let a=gPe(s[1]);return{r:parseInt(a.substr(0,2),16)/255,g:parseInt(a.substr(2,2),16)/255,b:parseInt(a.substr(4,2),16)/255,a:parseInt(a.substr(6,2),16)/255}}function OB(i,{removeAlphaIfOpaque:s=!1}={}){let a=(i.a*255|256).toString(16).slice(1),c=(i.r*255|256).toString(16).slice(1)+(i.g*255|256).toString(16).slice(1)+(i.b*255|256).toString(16).slice(1)+(s&&a==="ff"?"":a);return"#".concat(c)}function DB(i){return z(j({},i),{toString(){return OB(this,{removeAlphaIfOpaque:!0})}})}function gPe(i){switch(i.length){case 3:return"".concat(i.repeat(2),"ff");case 4:let s=i.substr(0,3),a=i[3];return"".concat(s.repeat(2)).concat(a.repeat(2));case 6:return"".concat(i,"ff")}return i}var LB,Tq=C(()=>{LB=/^#*([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i});function xA(i){let s=(0,NB.useRef)(i),a=(0,NB.useRef)(c=>{s.current&&s.current(c)});return s.current=i,a.current}var NB,Mq=C(()=>{NB=Q(Re())}),sv,SA=C(()=>{sv=(i,s=0,a=1)=>i>a?a:i<s?s:i}),eS,FB,Aq,BB,UB=C(()=>{eS=Q(Re()),FB=(0,eS.createContext)(void 0),Aq=({children:i})=>{let[s,a]=(0,eS.useState)(!1);return eS.default.createElement(FB.Provider,{value:{editing:s,setEditing:a}},i)},BB=()=>(0,eS.useContext)(FB)}),Sp,Dy,Iq,EA,VB,jB,Rq,Oq,Dq,Lq,tS,CA=C(()=>{Sp=Q(Re()),Mq(),SA(),Ne(),UB(),Dy=i=>"touches"in i,Iq=(i,s)=>{for(let a=0;a<i.length;a++)if(i[a].identifier===s)return i[a];return i[0]},EA=i=>i&&i.ownerDocument.defaultView||self,VB=(i,s,a)=>{let c=i.getBoundingClientRect(),p=Dy(s)?Iq(s.touches,a):s;return{left:sv((p.pageX-(c.left+EA(i).pageXOffset))/c.width),top:sv((p.pageY-(c.top+EA(i).pageYOffset))/c.height)}},jB=i=>{!Dy(i)&&i.preventDefault()},Rq=(i,s)=>s&&!Dy(i),Dq=se.div(Oq||(Oq=G([`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  outline: none;
  /* Don't trigger the default scrolling behavior when the event is originating from this element */
  touch-action: none;
`]))),Lq=i=>{var s=i,{onMove:a,onKey:c}=s,p=U(s,["onMove","onKey"]);let f=(0,Sp.useRef)(null),g=xA(a),y=xA(c),w=(0,Sp.useRef)(null),S=(0,Sp.useRef)(!1),{setEditing:M}=BB(),[R,A,k]=(0,Sp.useMemo)(()=>{let D=({nativeEvent:X})=>{let re=f.current;if(re&&(jB(X),!(Rq(X,S.current)||!re))){if(Dy(X)){S.current=!0;let ne=X.changedTouches||[];ne.length&&(w.current=ne[0].identifier)}re.focus(),M(!0),g(VB(re,X,w.current)),W(!0)}},O=X=>{jB(X),(Dy(X)?X.touches.length>0:X.buttons>0)&&f.current?g(VB(f.current,X,w.current)):(M(!1),W(!1))},F=X=>{M(!1),W(!1)},V=X=>{let re=X.which||X.keyCode;re<37||re>40||(X.preventDefault(),y({left:re===39?.05:re===37?-.05:0,top:re===40?.05:re===38?-.05:0}))};function W(X){let re=S.current,ne=f.current,ae=EA(ne),xe=X?ae.addEventListener:ae.removeEventListener;xe(re?"touchmove":"mousemove",O),xe(re?"touchend":"mouseup",F)}return[D,V,W]},[y,g]);return(0,Sp.useEffect)(()=>k,[k]),Sp.default.createElement(Dq,z(j({},p),{onTouchStart:R,onMouseDown:R,ref:f,onKeyDown:A,tabIndex:0,role:"slider"}))},tS=Sp.default.memo(Lq)}),zB,Nq,Fq,Bq,Uq,Vq,jq,PA,HB=C(()=>{zB=Q(Re()),Ne(),CA(),Fq=se(tS)(Nq||(Nq=G([""]))),Uq=se.div(Bq||(Bq=G([`
  position: absolute;
  z-index: 1;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  transform: translate(-50%, -50%);
  background-color: #fff;
  border: 1px solid #ffffff00;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

  `,`:focus & {
    transform: translate(-50%, -50%) scale(1.1);
  }
`])),Fq),jq=se.div(Vq||(Vq=G([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;
`]))),PA=({className:i,color:s,left:a,top:c=.5})=>{let p={top:"".concat(c*100,"%"),left:"".concat(a*100,"%")};return zB.default.createElement(Uq,{style:p,className:i},zB.default.createElement(jq,{style:{backgroundColor:s}}))}}),os,kA=C(()=>{os=(i,s=0,a=Math.pow(10,s))=>Math.round(a*i)/a}),GB,TA,MA,zq,Hq,AA=C(()=>{kA(),GB=({h:i,s,v:a,a:c})=>{let p=(200-s)*a/100;return{h:os(i),s:os(p>0&&p<200?s*a/100/(p<=100?p:200-p)*100:0),l:os(p/2),a:os(c,2)}},TA=i=>{let{h:s,s:a,l:c}=GB(i);return"hsl(".concat(s,", ").concat(a,"%, ").concat(c,"%)")},MA=i=>{let{h:s,s:a,l:c,a:p}=GB(i);return"hsla(".concat(s,", ").concat(a,"%, ").concat(c,"%, ").concat(p,")")},zq=({h:i,s,v:a,a:c})=>{i=i/360*6,s=s/100,a=a/100;let p=Math.floor(i),f=a*(1-s),g=a*(1-(i-p)*s),y=a*(1-(1-i+p)*s),w=p%6;return{r:os([a,g,f,f,y,a][w]*255),g:os([y,a,a,g,f,f][w]*255),b:os([f,f,y,a,a,g][w]*255),a:os(c,2)}},Hq=({r:i,g:s,b:a,a:c})=>{let p=Math.max(i,s,a),f=p-Math.min(i,s,a),g=f?p===i?(s-a)/f:p===s?2+(a-i)/f:4+(i-s)/f:0;return{h:os(60*(g<0?g+6:g)),s:os(p?f/p*100:0),v:os(p/255*100),a:c}}}),nS,Gq,Wq,$q,Kq,qq,Xq,yPe=C(()=>{nS=Q(Re()),CA(),HB(),AA(),SA(),kA(),Ne(),Wq=se.div(Gq||(Gq=G([`
  position: relative;
  height: 16px;
  border-radius: 2px;

  background: linear-gradient(
    to right,
    #f00 0%,
    #ff0 17%,
    #0f0 33%,
    #0ff 50%,
    #00f 67%,
    #f0f 83%,
    #f00 100%
  );
`]))),Kq=se(PA)($q||($q=G([`
  z-index: 2;
`]))),qq=({className:i,hue:s,onChange:a})=>nS.default.createElement(Wq,{className:i},nS.default.createElement(tS,{onMove:c=>{a({h:360*c.left})},onKey:c=>{a({h:sv(s+c.left*360,0,360)})},"aria-label":"Hue","aria-valuetext":os(s)},nS.default.createElement(Kq,{left:s/360,color:TA({h:s,s:100,v:100,a:1})}))),Xq=nS.default.memo(qq)}),rS,Yq,Zq,Qq,Jq,eX,tX,bPe=C(()=>{rS=Q(Re()),CA(),HB(),AA(),SA(),kA(),Ne(),Zq=se.div(Yq||(Yq=G([`
  position: relative;
  flex-grow: 1;
  border-color: transparent; /* Fixes https://github.com/omgovich/react-colorful/issues/139 */
  border-bottom: 12px solid #000;
  border-radius: 2px;
  background-image: linear-gradient(to top, #000, rgba(0, 0, 0, 0)),
    linear-gradient(to right, #fff, rgba(255, 255, 255, 0));

  // Improve elements rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),Jq=se(PA)(Qq||(Qq=G([`
  z-index: 3;
`]))),eX=({hsva:i,onChange:s})=>{let a=f=>{s({s:f.left*100,v:100-f.top*100})},c=f=>{s({s:sv(i.s+f.left*100,0,100),v:sv(i.v-f.top*100,0,100)})},p={backgroundColor:TA({h:i.h,s:100,v:100,a:1})};return rS.default.createElement(Zq,{style:p},rS.default.createElement(tS,{onMove:a,onKey:c,"aria-label":"Color","aria-valuetext":"Saturation ".concat(os(i.s),"%, Brightness ").concat(os(i.v),"%")},rS.default.createElement(Jq,{top:1-i.v/100,left:i.s/100,color:TA(i)})))},tX=rS.default.memo(eX)}),iS,nX,rX,iX,oX,sX,aX,lX,_Pe=C(()=>{iS=Q(Re()),CA(),HB(),AA(),SA(),kA(),Ne(),rX=se.div(nX||(nX=G([`
  position: relative;
  height: 16px;
  border-radius: 2px;
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),oX=se.div.attrs(({colorFrom:i,colorTo:s})=>({style:{backgroundImage:"linear-gradient(90deg, ".concat(i,", ").concat(s,")")}}))(iX||(iX=G([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;

  // Improve rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),aX=se(PA)(sX||(sX=G([`
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),lX=({className:i,hsva:s,onChange:a})=>{let c=y=>{a({a:y.left})},p=y=>{a({a:sv(s.a+y.left)})},f=MA(Object.assign({},s,{a:0})),g=MA(Object.assign({},s,{a:1}));return iS.default.createElement(rX,{className:i},iS.default.createElement(oX,{colorFrom:f,colorTo:g}),iS.default.createElement(tS,{onMove:c,onKey:p,"aria-label":"Alpha","aria-valuetext":"".concat(os(s.a*100),"%")},iS.default.createElement(aX,{left:s.a,color:MA(s)})))}}),IA,uX=C(()=>{IA=(i,s)=>{if(i===s)return!0;for(let a in i)if(i[a]!==s[a])return!1;return!0}});function wPe(i,s,a,c){let{editing:p}=BB(),[f,g]=(0,Dd.useState)(s),y=xA(a),w=xA(c),S=p?f:s,[M,R]=(0,Dd.useState)(()=>i.toHsva(S)),A=(0,Dd.useRef)({color:S,hsva:M}),k=(0,Dd.useRef)({color:S,hsva:M});(0,Dd.useEffect)(()=>{p&&g(A.current.color)},[p]),(0,Dd.useEffect)(()=>{let O=i.fromHsva(M);p?!IA(M,A.current.hsva)&&!i.equal(O,A.current.color)&&(A.current={hsva:M,color:O},g(O),y(O)):!IA(M,k.current.hsva)&&!i.equal(O,k.current.color)&&(k.current={hsva:M,color:O},A.current={hsva:M,color:O},w(O))},[p,M,i,y,w]),(0,Dd.useEffect)(()=>{if(!p&&!i.equal(S,k.current.color)){let O=i.toHsva(S);k.current={hsva:O,color:S},R(O)}},[p,S,i]);let D=(0,Dd.useCallback)(O=>{R(F=>Object.assign({},F,O))},[]);return[M,D]}var Dd,xPe=C(()=>{Dd=Q(Re()),uX(),Mq(),UB()}),Ly,cX,dX,hX,SPe=C(()=>{Ly=Q(Re()),yPe(),bPe(),_Pe(),xPe(),Ne(),dX=se.div(cX||(cX=G([`
  position: relative;
  display: flex;
  gap: 4px;
  flex-direction: column;
  width: 200px;
  height: 200px;
  user-select: none;
  cursor: default;
`]))),hX=i=>{var s=i,{className:a,colorModel:c,color:p=c.defaultColor,temporarilySetValue:f,permanentlySetValue:g,discardTemporaryValue:y}=s,w=U(s,["className","colorModel","color","temporarilySetValue","permanentlySetValue","discardTemporaryValue"]);let[S,M]=wPe(c,p,f,g);return(0,Ly.useEffect)(()=>()=>{y()},[]),Ly.default.createElement(dX,j({},w),Ly.default.createElement(tX,{hsva:S,onChange:M}),Ly.default.createElement(Xq,{hue:S.h,onChange:M}),Ly.default.createElement(lX,{hsva:S,onChange:M}))}}),WB,pX,fX,mX,vX,EPe=C(()=>{WB=Q(Re()),SPe(),uX(),AA(),UB(),pX=i=>({r:i.r/255,g:i.g/255,b:i.b/255,a:i.a}),fX=i=>({r:i.r*255,g:i.g*255,b:i.b*255,a:i.a}),mX={defaultColor:{r:0,g:0,b:0,a:1},toHsva:i=>Hq(fX(i)),fromHsva:i=>pX(zq(i)),equal:IA},vX=i=>WB.default.createElement(Aq,null,WB.default.createElement(hX,z(j({},i),{permanentlySetValue:s=>{i.permanentlySetValue(s)},colorModel:mX})))}),CPe=C(()=>{EPe()}),gX,yX,bX,PPe=C(()=>{gX=Q(Re()),yX=function(i){(0,gX.useEffect)(i,[])},bX=yX}),_X,wX,xX,kPe=C(()=>{_X=Q(Re()),PPe(),wX=function(i){var s=(0,_X.useRef)(i);s.current=i,bX(function(){return function(){return s.current()}})},xX=wX}),RA,SX,EX,TPe=C(()=>{RA=Q(Re()),kPe(),SX=function(i){var s=(0,RA.useRef)(0),a=(0,RA.useState)(i),c=a[0],p=a[1],f=(0,RA.useCallback)(function(g){cancelAnimationFrame(s.current),s.current=requestAnimationFrame(function(){p(g)})},[]);return xX(function(){cancelAnimationFrame(s.current)}),[c,f]},EX=SX});function MPe(i){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];i&&i.addEventListener&&i.addEventListener.apply(i,s)}function APe(i){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];i&&i.removeEventListener&&i.removeEventListener.apply(i,s)}var OA,IPe=C(()=>{OA=typeof window<"u"}),CX,PX,DA,$B=C(()=>{CX=Q(Re()),TPe(),IPe(),PX=function(i,s){i===void 0&&(i=1/0),s===void 0&&(s=1/0);var a=EX({width:OA?window.innerWidth:i,height:OA?window.innerHeight:s}),c=a[0],p=a[1];return(0,CX.useEffect)(function(){if(OA){var f=function(){p({width:window.innerWidth,height:window.innerHeight})};return MPe(window,"resize",f),function(){APe(window,"resize",f)}}},[]),c},DA=PX});function KB(i){let[s,a]=(0,qB.useState)(null);return(0,qB.useLayoutEffect)(()=>(i&&a(i.getBoundingClientRect()),()=>{a(null)}),[i]),s}var qB,kX=C(()=>{qB=Q(Re())}),TX,MX,XB,AX=C(()=>{TX=Q(Re()),MX=(0,TX.createContext)({}),XB=MX});function RPe(i,s,a){let c=i.getBoundingClientRect(),p=f=>{(f.clientX<c.left-s||f.clientX>c.left+c.width+s||f.clientY<c.top-s||f.clientY>c.top+c.height+s)&&a(f)};return window.addEventListener("mousemove",p),()=>{window.removeEventListener("mousemove",p)}}var OPe=C(()=>{}),IX,LA,YB,RX,ZB,OX=C(()=>{IX=Q(Re()),LA=Q(Re()),$B(),kX(),AX(),mr(),yB(),OPe(),Py(),ti(),YB=8,RX=i=>{var s,a;let c=i.children(),[p,f]=sr(null),g=c.props.style?j({},c.props.style):{};g.position="absolute";let y=KB(f),w=KB(i.target),S=DA(),[M,R]=(0,LA.useState)({});return(0,LA.useLayoutEffect)(()=>{var A,k,D;if(!y||!f||!w)return;let O=(A=i.verticalGap)!=null?A:8,F={},V=(k=i.verticalPlacement)!=null?k:"bottom",W=0,X=0;V==="bottom"?w.bottom+y.height+O<S.height?(V="bottom",W=w.bottom+O,F.top="0px"):w.top>y.height+O?(V="top",W=w.top-(y.height+O),F.bottom="0px",F.transform="rotateZ(180deg)"):V="overlay":V==="top"&&(w.top>y.height+O?(V="top",W=w.top-(y.height+O),F.bottom="0px",F.transform="rotateZ(180deg)"):w.bottom+y.height+O<S.height?(V="bottom",W=w.bottom+O,F.top="0px"):V="overlay");let re=0;if(V!=="overlay"){let Ie=w.left+w.width/2;Ie<y.width/2?(X=O,re=Math.max(Ie-O,YB)):Ie+y.width/2>S.width?(X=S.width-(O+y.width),re=Math.min(Ie-X,y.width-YB)):(X=Ie-y.width/2,re=y.width/2),F.left=re+"px"}let{minX:ne=-1/0,maxX:ae=1/0,minY:xe=-1/0,maxY:fe=1/0}=(D=i.constraints)!=null?D:{},ge={left:ci(X,ne,ae-y.width),top:ci(W,xe,fe+y.height)};if(f.style.left=ge.left+"px",f.style.top=ge.top+"px",R(F),i.onPointerOutside)return RPe(f,i.onPointerOutside.threshold,i.onPointerOutside.callback)},[y,f,i.target,w,S,i.onPointerOutside]),gB([f,(s=i.target)!=null?s:null],(a=i.onClickOutside)!=null?a:iu),IX.default.createElement(XB.Provider,{value:M},(0,LA.cloneElement)(c,{ref:p,style:g}))},ZB=RX});function lc(i,s){let a=(...k)=>{},{isPointerBeingCaptured:c}=zK("usePopover"),[p,f]=sr({isOpen:!1}),g=(0,ss.useRef)(i),y=(0,ss.useCallback)(k=>{p.current={isOpen:!1}},[]),w=(0,ss.useCallback)((k,D)=>{var O;let F=typeof g.current=="function"?g.current():g.current;function V(){M.childHasFocusRef.current||F.closeOnClickOutside!==!1&&y("clicked outside popover")}p.current={isOpen:!0,clickPoint:{clientX:k.clientX,clientY:k.clientY},target:D,opts:F,onClickOutside:V,onPointerOutside:F.closeWhenPointerIsDistant===!1?void 0:{threshold:(O=F.pointerDistanceThreshold)!=null?O:100,callback:()=>{M.childHasFocusRef.current||c()||y("pointer outside")}}}},[]),S=(0,ss.useCallback)((...k)=>{p.current.isOpen?y("toggled"):w(...k)},[]),M=DPe({_debug:a,state:f}),[,R]=(0,ss.useContext)(RS);(0,ss.useEffect)(()=>{let k;return f.isOpen&&(k=R()),()=>k==null?void 0:k()},[f.isOpen]);let A=(0,ss.useContext)(Sy);return{node:f.isOpen?(0,DX.createPortal)(ss.default.createElement(QB.Provider,{value:M.childPopoverLock},ss.default.createElement(ZB,{children:s,target:f.target,onClickOutside:f.onClickOutside,onPointerOutside:f.onPointerOutside,constraints:f.opts.constraints,verticalGap:f.opts.verticalGap})),A):ss.default.createElement(ss.default.Fragment,null),open:w,close:y,toggle:S,isOpen:f.isOpen}}function DPe(i){let s=(0,ss.useContext)(QB);(0,ss.useEffect)(()=>{if(i.state.isOpen){let c=s.takeFocus();return i._debug("take focus"),()=>{i._debug("release focus"),c.releaseFocus()}}},[i.state.isOpen]);let a=(0,ss.useRef)(!1);return{childHasFocusRef:a,childPopoverLock:{takeFocus(){return a.current=!0,{releaseFocus(){a.current=!1}}}}}}var ss,DX,QB,uc=C(()=>{xB(),mr(),ss=Q(Re()),DX=Q(Xl()),iv(),OX(),jU(),QB=ss.default.createContext({takeFocus(){return{releaseFocus(){}}}})}),Ld,LX,NX,FX,BX,UX,VX,jX,zX,HX,GX,WX,$X,LPe=C(()=>{Ld=Q(Re()),Ne(),AX(),NX=se.div(LX||(LX=G([`
  position: absolute;
  width: 0;
  height: 0;
  color: var(--popover-arrow-color);
  pointer-events: none;
`]))),BX=se.div(FX||(FX=G([`
  width: 12px;
  height: 8px;
  position: absolute;
  left: -7px;
  top: -8px;
  text-align: center;
  line-height: 0;
`]))),VX=se.path(UX||(UX=G([`
  fill: var(--popover-bg);
`]))),zX=se.path(jX||(jX=G([`
  fill: var(--popover-inner-stroke);
`]))),GX=se.path(HX||(HX=G([`
  fill: var(--popover-outer-stroke);
`]))),WX=(0,Ld.forwardRef)(({className:i},s)=>{let a=(0,Ld.useContext)(XB);return Ld.default.createElement(NX,{className:i,ref:s,style:j({},a)},Ld.default.createElement(BX,null,Ld.default.createElement("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ld.default.createElement(GX,{d:"M6 0L0 6H12L6 0Z"}),Ld.default.createElement(zX,{d:"M6 1.5L0 7.5H12L6 1.5Z"}),Ld.default.createElement(VX,{d:"M6 3L0 9H12L6 3Z"}))))}),$X=WX}),NA,JB,KX,qX,XX,cc,dc=C(()=>{vr(),Ea(),NA=Q(Re()),Ne(),LPe(),JB=ru(.05,"#2a2a31"),qX=se.div(KX||(KX=G([`
  position: absolute;
  --popover-bg: `,`;
  --popover-inner-stroke: #505159;
  --popover-outer-stroke: #111;

  background: var(--popover-bg);

  color: white;
  padding: 0;
  margin: 0;
  cursor: default;
  `,`;
  border-radius: 3px;
  z-index: 10000;
  border: 1px solid var(--popover-inner-stroke);
  box-shadow: 0 0 0 1px var(--popover-outer-stroke), 0 6px 8px -4px black;
  backdrop-filter: blur(8px);

  & a {
    color: inherit;
  }
`])),JB,hr),XX=NA.default.forwardRef(({children:i,className:s,showPopoverEdgeTriangle:a=!0},c)=>NA.default.createElement(qX,{className:s,ref:c},a?NA.default.createElement($X,null):void 0,i)),cc=XX});function NPe({editingTools:i,value:s,autoFocus:a}){let c=(0,hc.useRef)(null),p=(0,hc.useCallback)(g=>{let y=DB(vPe(g));i.permanentlySetValue(y)},[i]),f=lc({debugName:"RgbaPropEditor"},()=>hc.default.createElement(rY,null,hc.default.createElement(vX,{color:{r:s.r,g:s.g,b:s.b,a:s.a},temporarilySetValue:g=>{let y=DB(g);i.temporarilySetValue(y)},permanentlySetValue:g=>{let y=DB(g);i.permanentlySetValue(y)},discardTemporaryValue:i.discardTemporaryValue})));return hc.default.createElement(hc.default.Fragment,null,hc.default.createElement(ZX,null,hc.default.createElement(JX,{rgbaColor:s,ref:c,onClick:g=>{f.toggle(g,c.current)}}),hc.default.createElement(tY,{value:OB(s,{removeAlphaIfOpaque:!0}),temporarilySetValue:eU,discardTemporaryValue:eU,permanentlySetValue:p,isValid:g=>!!g.match(LB),autoFocus:a})),f.node)}var hc,YX,ZX,QX,JX,eY,tY,eU,nY,rY,iY,FPe=C(()=>{Tq(),Tq(),hc=Q(Re()),CPe(),Ne(),uc(),RB(),dc(),ZX=se.div(YX||(YX=G([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),JX=se.div.attrs(i=>({style:{background:OB(i.rgbaColor)}}))(QX||(QX=G([`
  height: 18px;
  aspect-ratio: 1;
  border-radius: 99999px;
`]))),tY=se(wA)(eY||(eY=G([`
  flex: 1;
`]))),eU=()=>{},rY=se.div(nY||(nY=G([`
  position: absolute;
  background-color: `,`;
  color: white;
  margin: 0;
  cursor: default;
  border-radius: 3px;
  z-index: 10000;
  backdrop-filter: blur(8px);

  padding: 4px;
  pointer-events: all;

  border: none;
  box-shadow: none;
`])),JB),iY=NPe});function BPe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let[p,f]=su.default.useState();(0,su.useEffect)(()=>{f(a?s.getAssetUrl(a):void 0)},[a]);let g=(0,su.useCallback)(w=>ye(this,null,function*(){let S=w.target.files[0];s.permanentlySetValue({type:"image",id:void 0});let M=yield s.createAsset(S);M?s.permanentlySetValue({type:"image",id:M}):s.permanentlySetValue(a),w.target.value=null}),[s,a]),y=!(a!=null&&a.id);return su.default.createElement(tU,{empty:y},su.default.createElement(dY,{empty:y,title:y?"Upload image":'"'.concat(a.id,'" (Click to upload new image)')},su.default.createElement(pY,{type:"file",onChange:g,accept:"image/*,.hdr",autoFocus:c}),p?su.default.createElement(mY,{src:p}):su.default.createElement(aY,null)),!y&&su.default.createElement(gY,{title:"Delete image",onClick:()=>{s.permanentlySetValue({type:"image",id:void 0})}},su.default.createElement(lB,null)))}var su,oY,tU,sY,aY,lY,uY,cY,dY,hY,pY,fY,mY,vY,gY,yY,UPe=C(()=>{$x(),su=Q(Re()),Ne(),tU=se.div(oY||(oY=G([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),aY=se.div(sY||(sY=G([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),dY=se.label(cY||(cY=G([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),i=>i.empty?No(lY||(lY=G([""]))):No(uY||(uY=G([""])))),pY=se.input.attrs({type:"file"})(hY||(hY=G([`
  display: none;
`]))),mY=se.img(fY||(fY=G([`
  position: absolute;
  inset: 0;
  height: 100%;
  aspect-ratio: 1;

  object-fit: cover;
`]))),gY=se.button(vY||(vY=G([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),tU),yY=BPe});function VPe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let[p,f]=au.default.useState();(0,au.useEffect)(()=>{f(a?s.getAssetUrl(a):void 0)},[a]);let g=(0,au.useCallback)(w=>ye(this,null,function*(){let S=w.target.files[0];s.permanentlySetValue({type:"file",id:void 0});let M=yield s.createAsset(S);M?s.permanentlySetValue({type:"file",id:M}):s.permanentlySetValue(a),w.target.value=null}),[s,a]),y=!(a!=null&&a.id);return au.default.createElement(nU,{empty:y},au.default.createElement(CY,{empty:y,title:y?"Upload file":'"'.concat(a.id,'" (Click to upload new file)')},au.default.createElement(kY,{type:"file",onChange:g,autoFocus:c}),p?au.default.createElement(oB,null):au.default.createElement(wY,null)),!y&&au.default.createElement(MY,{title:"Delete file",onClick:()=>{s.permanentlySetValue({type:"file",id:void 0})}},au.default.createElement(lB,null)))}var au,bY,nU,_Y,wY,xY,SY,EY,CY,PY,kY,TY,MY,AY,jPe=C(()=>{$x(),au=Q(Re()),Ne(),nU=se.div(bY||(bY=G([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),wY=se.div(_Y||(_Y=G([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),CY=se.label(EY||(EY=G([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),i=>i.empty?No(xY||(xY=G([""]))):No(SY||(SY=G([""])))),kY=se.input.attrs({type:"file"})(PY||(PY=G([`
  display: none;
`]))),MY=se.button(TY||(TY=G([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),nU),AY=VPe}),rU,IY=C(()=>{PCe(),nq(),pPe(),mPe(),FPe(),UPe(),jPe(),rU={number:kB,string:kq,boolean:RK,stringLiteral:_q,rgba:iY,image:yY,file:AY}});function oS(i){let s=new WeakMap;return a=>(s.has(a)||s.set(a,i(a)),s.get(a))}var FA=C(()=>{});function pc(i){return i.type==="compound"||i.type==="enum"}function BA(i,s){if(!i)return;let[a,...c]=s;if(a===void 0)return i;if(!pc(i))return;let p=i.type==="enum"?i.cases[a]:i.props[a];return BA(p,c)}function UA(i,s){let a=s.deserializeAndSanitize(i);return a===void 0?s.default:a}function zPe(i){return!pc(i)}function*sS(i,s){if(i.type==="compound")for(let a in i.props)yield*kt(sS(i.props[a],[...s,a]));else{if(i.type==="enum")throw new Error("Not implemented yet");return yield{path:s,conf:i}}}var iU,Ep=C(()=>{FA(),iU=oS(i=>{if(i.type==="enum")throw new Error("Not implemented yet for enums");for(let s in i.props){let a=i.props[s];if(pc(a)){if(iU(a))return!0}else return!0}return!1})}),oU,RY=C(()=>{oU="calc(var(--left-pad) + var(--depth) * var(--step))"}),OY,Cp,av=C(()=>{Ne(),Cp=No(OY||(OY=G([`
  font-weight: 300;
  font-size: 11px;
  color: `,`;
  text-shadow: 0.5px 0.5px 2px rgba(0, 0, 0, 0.3);
`])),i=>i.isHighlighted==="self"?"#CCC":"#919191")}),aS,VA,DY,LY,NY,FY,BY,UY,VY=C(()=>{Py(),aS=Q(Re()),Ne(),VA=26,LY=se.li(DY||(DY=G([`
  height: `,`px;
  padding: 0 12px;
  margin: 0;
  display: flex;
  align-items: center;
  font-size: 11px;
  font-weight: 400;
  position: relative;
  color: `,`;
  cursor: `,`;

  &:after {
    position: absolute;
    inset: 2px 1px;
    display: block;
    content: ' ';
    pointer-events: none;
    z-index: -1;
    border-radius: 3px;
  }

  &:hover:after {
    background-color: `,`;
  }
`])),VA,i=>i.enabled?"white":"#8f8f8f",i=>i.enabled?"normal":"not-allowed",i=>i.enabled?"rgba(63, 174, 191, 0.75)":"initial"),FY=se.span(NY||(NY=G([""]))),BY=i=>aS.default.createElement(LY,{onClick:i.enabled?i.onClick:iu,enabled:i.enabled,title:i.enabled?void 0:"Disabled"},aS.default.createElement(FY,null,aS.default.createElement(aS.default.Fragment,null,i.label))),UY=BY});function HPe(i){let s=(0,sU.useRef)(i);s.current=i,(0,sU.useEffect)(()=>{let a=c=>s.current(c);return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[])}var sU,GPe=C(()=>{sU=Q(Re())}),lS,jY,zY,HY,GY,WY,$Y,KY,aU,qY=C(()=>{lS=Q(Re()),VY(),Ne(),Ea(),vr(),jY=190,zY=!0,GY=se.ul(HY||(HY=G([`
  position: absolute;
  min-width: `,`px;
  z-index: 10000;
  background: `,`;
  backdrop-filter: blur(2px);
  color: white;
  list-style-type: none;
  padding: 2px 0;
  margin: 0;
  border-radius: 1px;
  cursor: default;
  `,`;
  border-radius: 3px;
`])),jY,ru(.2,"#111"),hr),$Y=se.div(WY||(WY=G([`
  padding: 4px 10px;
  border-bottom: 1px solid #6262626d;
  color: #adadadb3;
  font-size: 11px;
  font-weight: 500;
`]))),KY=lS.default.forwardRef((i,s)=>lS.default.createElement(GY,{ref:s},zY&&i.displayName?lS.default.createElement($Y,null,i.displayName):null,i.items.map((a,c)=>lS.default.createElement(UY,{key:"item-".concat(c),label:a.label,enabled:a.enabled!==!1,onClick:p=>{a.callback&&a.callback(p),i.onRequestClose()}})))),aU=KY}),XY,YY,jA,ZY,uS,QY,JY,WPe=C(()=>{kX(),XY=Q(Re()),YY=Q(Re()),jA=Q(Re()),ZY=Q(Xl()),$B(),VY(),iv(),GPe(),qY(),uS=20,QY=i=>{let[s,a]=(0,jA.useState)(null),c=KB(s),p=DA();(0,jA.useLayoutEffect)(()=>{if(!c||!s)return;let y={left:c.width/2,top:VA/2+(i.displayName?VA:0)},w={left:i.clickPoint.clientX-y.left,top:i.clickPoint.clientY-y.top};w.left<0?w.left=0:w.left+c.width>p.width&&(w.left=p.width-c.width),w.top<0?w.top=0:w.top+c.height>p.height&&(w.top=p.height-c.height),s.style.left=w.left+"px",s.style.top=w.top+"px";let S=M=>{(M.clientX<w.left-uS||M.clientX>w.left+c.width+uS||M.clientY<w.top-uS||M.clientY>w.top+c.height+uS)&&i.onRequestClose()};return window.addEventListener("mousemove",S),()=>{window.removeEventListener("mousemove",S)}},[c,s,i.clickPoint,p,i.onRequestClose]);let f=(0,YY.useContext)(Sy);HPe(y=>{y.key==="Escape"&&i.onRequestClose()});let g=(0,XY.useMemo)(()=>{let y=Array.isArray(i.items)?i.items:i.items();return y.length>0?y:[{label:i.displayName?"No actions for ".concat(i.displayName):"No actions found",enabled:!1}]},[i.items]);return(0,ZY.createPortal)(jA.default.createElement(aU,{items:g,onRequestClose:i.onRequestClose,displayName:i.displayName,ref:a}),f)},JY=QY}),zA,eZ,tZ,$Pe=C(()=>{zA=Q(Re()),eZ=(i,s)=>{let[a,c]=(0,zA.useState)({isOpen:!1}),p=(0,zA.useCallback)(()=>c({isOpen:!1}),[]);return(0,zA.useEffect)(()=>{if(!i||s.disabled===!0){c({isOpen:!1});return}let f=g=>{c({isOpen:!0,event:g}),g.preventDefault(),g.stopPropagation()};return i.addEventListener("contextmenu",f),()=>{i.removeEventListener("contextmenu",f)}},[i,s.disabled]),[a,p]},tZ=eZ});function Ms(i,s){let[a,c]=tZ(i,s),[,p]=(0,Ny.useContext)(RS);return(0,Ny.useEffect)(()=>{var f;let g;return a.isOpen&&((f=s.onOpen)==null||f.call(s),g=p()),()=>g==null?void 0:g()},[a.isOpen,s.onOpen]),[a.isOpen?Ny.default.createElement(JY,{items:s.menuItems,displayName:s.displayName,clickPoint:a.event,onRequestClose:c}):nZ,c,a.isOpen]}var Ny,nZ,As=C(()=>{Ny=Q(Re()),WPe(),$Pe(),jU(),nZ=Ny.default.createElement(Ny.default.Fragment,null)});function Pp(i,s){return s.length===0?i:md(i,s)}var HA=C(()=>{tp()});function rZ(i,s){return i==null?null:i instanceof Element&&i.matches(s)?i:rZ(i.parentElement,s)}var KPe=C(()=>{});function cS(i,s){let a=i;for(let c of s)a=a[c];return a}var GA=C(()=>{});function qPe(i){let s=new WA.Atom(void 0),a=new WA.Atom({}),c=new WA.Atom({}),p=0;return{addRelatedFlags(f,g){let y=String(++p),w=g.map(S=>{let M={flag:S.flag},R=[S.affects,f,y];return c.setByPointer(A=>cS(A,R),M),R});return()=>{for(let S of w)c.setByPointer(M=>cS(M,S),void 0)}},usePresenceFlag(f){if(!i.enabled)return;let g=(0,dS.useMemo)(()=>{if(!f)return uU;let y=s.prism,w=(0,hS.pointerToPrism)(a.pointer[f]),S=(0,hS.pointerToPrism)(c.pointer[f]);return(0,hS.prism)(()=>{if(w.getValue())return 2;{let M=S.getValue(),R=y.getValue(),A=M&&R&&M[R];if(A){let k;for(let D of Object.values(A))D&&(k&&k>=D.flag||(k=D.flag));return k}return}})},[f]);return ty(g)},setUserHover(f){let g=s.get();g!==f&&(g&&a.setByPointer(y=>y[g],!1),s.set(f),f&&a.setByPointer(y=>y[f],!0))}}}function lv(i){let s=dS.default.useContext(cU),a=s.usePresenceFlag(i);return{attrs:{[$A]:i},flag:a,useRelations(c,p){(0,lU.useEffect)(()=>i&&s.addRelatedFlags(i,c()),[i,...p])}}}function iZ(i){let s=dS.default.useContext(cU),a=wp("PresenceListeners");(0,lU.useEffect)(()=>{let c;if(!i)return;let p=f=>{if(f.target instanceof Node){let g=rZ(f.target,"[".concat($A,"]"));if(g){let y=g.getAttribute($A);c!==y&&(c=y,s.setUserHover(y||void 0),a._debug("Updated current hover",{itemKey:y}));return}c!=null&&(c=null,s.setUserHover(void 0),a._debug("Cleared current hover"))}};return i.addEventListener("mouseover",p),()=>{i.removeEventListener("mouseover",p),c!=null&&(c=null,a._debug("Cleared current hover as part of cleanup"))}},[i,s])}var dS,lU,hS,WA,uU,cU,$A,uv=C(()=>{dS=Q(Re()),lU=Q(Re()),xp(),hS=Mt,WA=Mt,hn(),KPe(),GA(),uU=(0,hS.prism)(()=>{}),uU.keepHot(),cU=dS.default.createContext(qPe({enabled:!1})),$A="data-pi-key"}),Bo,oZ,pS,sZ,dU,kp,aZ,hU,lZ,uZ,cZ,KA,dZ,hZ,pZ,fZ,mZ,vZ,fS,gZ,pU,qA=C(()=>{vr(),Ea(),Bo=Q(Re()),Ne(),uv(),pS=se.div(oZ||(oZ=G([`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 16px;
  margin: 0 0px 0 2px;
  position: relative;
  z-index: 0;
  opacity: 0.7;

  &:after {
    position: absolute;
    left: -14px;
    right: -14px;
    top: -2px;
    bottom: -2px;
    content: ' ';
    display: none;
    z-index: -1;
    background: `,`;
  }

  &:hover {
    opacity: 1;
    &:after {
      display: block;
    }
  }
`])),ru(.2,"black")),dU=se.div(sZ||(sZ=G([`
  background: none;
  position: relative;
  border: 0;
  transition: transform 0.1s ease-out;
  z-index: 0;
  outline: none;
  cursor: pointer;

  &:after {
    display: none;
    `,`:hover & {
      display: block;
    }
    position: absolute;
    left: -4px;
    right: -4px;
    top: -4px;
    bottom: -4px;
    content: ' ';
    z-index: -1;
  }
`])),pS),kp={offColor:"#555",onColor:"#e0c917"},hU=se(dU)(aZ||(aZ=G([`
  &:hover {
    color: #e0c917;
  }

  color: `,`;
`])),i=>i.presence===2?"white":i.isOn?kp.onColor:kp.offColor),uZ=No(lZ||(lZ=G([`
  pointer-events: none !important;
`]))),KA=se(dU)(cZ||(cZ=G([`
  color: `,`;

  `,`;
`])),i=>i.flag===2?"white":i.available?kp.onColor:kp.offColor,i=>i.available?hr:uZ),hZ=se(KA)(dZ||(dZ=G([`
  transform: translateX(2px);
  `,`:hover & {
    transform: translateX(-7px);
  }
`])),pS),fZ=se(KA)(pZ||(pZ=G([`
  transform: translateX(-2px);
  `,`:hover & {
    transform: translateX(7px);
  }
`])),pS),(i=>{let s=se.g(mZ||(mZ=G([`
    stroke-width: 1;
    `,`:hover & path {
      stroke-width: 3;
    }
  `])),KA);i.Prev=()=>Bo.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Bo.default.createElement(s,{transform:"translate(6 3)"},Bo.default.createElement("path",{d:"M4 1L1 4L4 7",stroke:"currentColor"}))),i.Next=()=>Bo.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Bo.default.createElement(s,{transform:"translate(1 3)"},Bo.default.createElement("path",{d:"M1 1L4 4L1 7",stroke:"currentColor"})));let a=se.g(vZ||(vZ=G([`
    stroke-width: 0;
    `,`:hover & path {
      stroke: currentColor;
      stroke-width: 2;
    }
  `])),hU);i.Cur=()=>Bo.default.createElement("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Bo.default.createElement(a,{transform:"translate(1 4)"},Bo.default.createElement("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"currentColor"})))})(fS||(fS={})),gZ=i=>{var s,a,c,p,f;let g=lv((s=i.prev)==null?void 0:s.itemKey),y=lv(((a=i.cur)==null?void 0:a.type)==="on"?i.cur.itemKey:void 0),w=lv((c=i.next)==null?void 0:c.itemKey);return Bo.default.createElement(pS,null,Bo.default.createElement(hZ,j({available:!!i.prev,onClick:(p=i.prev)==null?void 0:p.jump,flag:g.flag},g.attrs),Bo.default.createElement(fS.Prev,null)),Bo.default.createElement(hU,j({isOn:i.cur.type==="on",onClick:i.cur.toggle,presence:y.flag},y.attrs),Bo.default.createElement(fS.Cur,null)),Bo.default.createElement(fZ,j({available:!!i.next,onClick:(f=i.next)==null?void 0:f.jump,flag:w.flag},w.attrs),Bo.default.createElement(fS.Next,null)))},pU=gZ}),XA,mS,yZ,bZ,_Z,wZ,xZ,SZ,EZ,vS,CZ=C(()=>{Ea(),XA=Q(Re()),Ne(),Fe(),qA(),Ep(),mS={defaultState:{color:ru(.95,"#C4C4C4"),hoverColor:ru(.15,kp.onColor)},withStaticOverride:{color:ru(.85,"#C4C4C4"),hoverColor:ru(.15,kp.onColor)}},bZ=se.div(yZ||(yZ=G([`
  width: 16px;
  margin: 0 0px 0 2px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  color: `,`;

  &:hover {
    color: `,`;
  }
`])),i=>i.hasStaticOverride?mS.withStaticOverride.color:mS.defaultState.color,i=>i.hasStaticOverride?mS.withStaticOverride.hoverColor:mS.defaultState.hoverColor),wZ=se.div(_Z||(_Z=G([`
  width: 5px;
  height: 5px;
  border-radius: 1px;
  transform: rotate(45deg);
  /* border: 1px solid currentColor; */
  background-color: currentColor;
`]))),SZ=se.div(xZ||(xZ=G([`
  width: 5px;
  height: 5px;
  background-color: currentColor;
  border-radius: 1px;
  transform: rotate(45deg);
`]))),EZ=i=>{let{hasStaticOverride:s,obj:a,propConfig:c,pathToProp:p}=i;return XA.default.createElement(bZ,{hasStaticOverride:s,onClick:()=>{me().transaction(({stateEditors:f})=>{for(let{path:g,conf:y}of sS(c,p)){if(pc(y))continue;let w=z(j({},a.address),{pathToProp:g});f.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(w,c)}})},title:"Sequence this prop"},s?XA.default.createElement(SZ,{title:"The default value is overridden"}):XA.default.createElement(wZ,{title:"This is the default value for this prop"}))},vS=EZ});function gS(i){return JSON.stringify(fU(i))}function fU(i){return F0(i)?Object.keys(i).sort().reduce((s,a)=>(s[a]=fU(i[a]),s),{}):Array.isArray(i)?i.map(fU):i}var XPe=C(()=>{ti()}),PZ,yS,kZ=C(()=>{PZ="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",yS=(i=21)=>{let s="",a=i;for(;a--;)s+=PZ[Math.random()*64|0];return s}});function TZ(){return yS(10)}function YPe(){return yS(10)}function ZPe(){return yS(10)}var ho,Nd=C(()=>{XPe(),kZ(),ho={forSheet(){return"sheet"},forSheetObject(i){return gS({o:i.address.objectKey})},forSheetObjectProp(i,s){return gS({o:i.address.objectKey,p:s})},forTrackKeyframe(i,s,a){return gS({o:i.address.objectKey,t:s,k:a})},forSheetObjectAggregateKeyframe(i,s){return ho.forCompoundPropAggregateKeyframe(i,[],s)},forSheetAggregateKeyframe(i,s){return gS({o:i.address.sheetId,pos:s})},forCompoundPropAggregateKeyframe(i,s,a){return gS({o:i.address.objectKey,p:s,pos:a})}}});function MZ(i,s,a){if(!s||s.data.keyframes.length===0)return AZ;let c=mU.get(s.data);if(c&&c[0]===a)return c[1];function p(g){if(!s)return;let y=s.data.keyframes[g];return y&&{kf:y,track:s,itemKey:ho.forTrackKeyframe(i,s.id,y.id)}}let f=(()=>{let g=s.data.keyframes.findIndex(w=>w.position>=a);if(g===-1)return{prev:p(s.data.keyframes.length-1)};let y=p(g);return y.kf.position===a?{prev:p(g-1),cur:y,next:p(g+1)}:{next:y,prev:p(g-1)}})();return mU.set(s.data,[a,f]),f}var mU,AZ,IZ=C(()=>{Nd(),mU=new WeakMap,AZ={}}),vU,RZ=C(()=>{vU={}});function QPe(i,s,a){let c=(0,hl.getPointerParts)(i).path;return Un(()=>{if(!iU(a))return{type:"AllStatic",beingScrubbed:!1,contextMenuItems:[],controlIndicators:cv.default.createElement(vS,{hasStaticOverride:!1,obj:s,pathToProp:c,propConfig:a})};let p=!!(0,hl.val)(md(me().atomP.ephemeral.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId].stateByObjectKey[s.address.objectKey].valuesBeingScrubbed,(0,hl.getPointerParts)(i).path)),f=[],g={beingScrubbed:p,contextMenuItems:f,controlIndicators:cv.default.createElement(cv.default.Fragment,null)},y=(0,hl.val)(s.template.getMapOfValidSequenceTracks_forStudio()),w=Pp(y,c),S=w!==void 0&&Object.keys(w).length!==0,M=[],R=(0,hl.val)(s.template.getStaticButNotSequencedOverrides()),A=Pp(R??vU,c)!==void 0;if(S)for(let k of sS(a,[])){if(pc(k.conf))continue;let D=Pp(w,k.path);typeof D!="string"?A=!0:M.push(D)}if((A||S)&&f.push({label:"Reset all to default",callback:()=>{me().transaction(({unset:k})=>{k(i)})}}),S&&f.push({label:"Make all static",callback:()=>{me().transaction(({stateEditors:k})=>{for(let{path:D,conf:O}of sS(a,[])){if(pc(O))continue;let F=z(j({},s.address),{pathToProp:[...c,...D]}),V=cS(i,D);k.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(z(j({},F),{value:s.getValueByPointer(V)}))}})}}),(!S||S&&A)&&f.push({label:"Sequence all",callback:()=>{me().transaction(({stateEditors:k})=>{for(let{path:D,conf:O}of sS(a,c)){if(pc(O))continue;let F=z(j({},s.address),{pathToProp:D});k.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(F,a)}})}}),S){let k=hl.prism.memo("controlIndicators",()=>cv.default.createElement(JPe,{pointerToProp:i,obj:s,possibleSequenceTrackIds:w,listOfDescendantTrackIds:M}),[w,M]);return z(j({},g),{type:"HasSequences",controlIndicators:k})}else return z(j({},g),{type:"AllStatic",controlIndicators:cv.default.createElement(vS,{hasStaticOverride:A,obj:s,pathToProp:c,propConfig:a})})},[])}function JPe({pointerToProp:i,obj:s,possibleSequenceTrackIds:a,listOfDescendantTrackIds:c}){return Un(()=>{let p=(0,hl.getPointerParts)(i).path,f=(0,hl.val)(s.sheet.getSequence().positionPrism),g=c.map(k=>({trackId:k,track:(0,hl.val)(s.template.project.pointers.historic.sheetsById[s.address.sheetId].sequence.tracksByObject[s.address.objectKey].trackData[k])})).filter(({track:k})=>!!k).map(k=>z(j({},k),{nearbies:MZ(s,{id:k.trackId,data:k.track,sheetObject:s},f)})),y=g.find(({nearbies:k})=>!!k.cur),w=g.every(({nearbies:k})=>!!k.cur),S=g.reduce((k,D)=>D.nearbies.prev&&(k===void 0||D.nearbies.prev.kf.position>k.kf.position)?D.nearbies.prev:k,void 0),M=g.reduce((k,D)=>D.nearbies.next&&(k===void 0||D.nearbies.next.kf.position<k.kf.position)?D.nearbies.next:k,void 0),R=()=>{w?me().transaction(k=>{k.unset(i)}):y?me().transaction(k=>{k.set(i,(0,hl.val)(i))}):me().transaction(k=>{k.set(i,(0,hl.val)(i))})},A={cur:y?{type:"on",itemKey:ho.forCompoundPropAggregateKeyframe(s,p,f),toggle:R}:{toggle:R,type:"off"},prev:S!==void 0?{position:S.kf.position,itemKey:ho.forCompoundPropAggregateKeyframe(s,p,S.kf.position),jump:()=>{s.sheet.getSequence().position=S.kf.position}}:void 0,next:M!==void 0?{position:M.kf.position,itemKey:ho.forCompoundPropAggregateKeyframe(s,p,M.kf.position),jump:()=>{s.sheet.getSequence().position=M.kf.position}}:void 0};return cv.default.createElement(pU,j({},A))},[i,s,a,c])}var hl,cv,eke=C(()=>{Fe(),HA(),hn(),hl=Mt,tp(),cv=Q(Re()),CZ(),Ep(),Nd(),GA(),qA(),IZ(),RZ()});function tke(){let i=0,s=new LZ.Atom({hasLock:!1});return{replaceLock(a,c){let p=i++,f=s.get();return f.hasLock&&f.cleanup(),s.set({hasLock:!0,lockId:p,cleanup:c,deepPath:nke(OZ(a))}),function(){let g=s.get();g.hasLock&&g.lockId===p&&(g.cleanup(),s.set({hasLock:!1}))}},getIsPropHighlightedD(a){let c=cS(s.pointer.deepPath,OZ(a));return(0,NZ.prism)(()=>{let p=(0,DZ.val)(c);return p===!0?"self":p?"descendent":null})}}}function OZ(i){return[i.projectId,i.sheetId,i.objectKey,...i.pathToProp]}function nke(i){let s={};return lp(s,i,!0),s}var DZ,LZ,NZ,YA,gU=C(()=>{DZ=Mt,LZ=Mt,NZ=Mt,GA(),Q0(),YA=tke()});function rke(i,s){return JSON.stringify(i,s,2).replace(/^([\{\[])\n (\s+)/,"$1$2").replace(/(\n[ ]+[\{\[])\n\s+/g,"$1 ").replace(/\n\s*([\]\}])/g," $1")}var ike=C(()=>{});function FZ(i,s=!0){try{return typeof i=="string"?i:typeof i=="function"||i instanceof Error?i.toString():s?rke(i):JSON.stringify(i)}catch{return(i==null?void 0:i.name)||String(i)}}var oke=C(()=>{ike()});function ske(i,s,a){i||(arguments.length>2?BZ(s,a):BZ(s))}function BZ(i,s){let a=arguments.length>1,c=FZ(typeof i=="function"?i():i),p=a?`
Instead found: `.concat(FZ(s)):"";throw new HZ("Invariant: ".concat(c).concat(p),s)}var UZ,VZ,jZ,zZ,HZ,ake=C(()=>{oke(),UZ=/^\s*at.+node:internal.+/gm,VZ=/^\s*(at|[^@]+@) (?:Object\.)?invariant.+/gm,jZ=/^\s*(at|[^@]+@).+test\-helpers.+/gm,zZ=/^\s*(at|[^@]+@).+(debounce|invariant|iif)\.[tj]s.*/gm,HZ=class extends Error{constructor(i,s){var a;super(i),Pe(this,"found"),s!==void 0&&(this.found=s),this.stack=(a=this.stack)==null?void 0:a.replace(VZ,"").replace(zZ,"").replace(jZ,"").replace(UZ,"")}}});function lke(i){return(0,ZA.prism)(()=>{if(Array.isArray(i)){let s=new Array(i.length);for(let a=0;a<i.length;a++)s[a]=i[a].getValue();return s}else{let s={};for(let a in i)s[a]=(0,ZA.val)(i[a]);return s}})}function yU(i){let s=Fy.default.memo(Fy.default.forwardRef(function(a,c){let p=[],f={},g={ref:c};for(let M in a){let R=a[M];(0,ZA.isPrism)(R)?(p.push(R),f[M]=R):g[M]=R}let y=(0,Fy.useRef)(p.length);ske(y.current===p.length,"expect same number of observable props on every invocation of deriver wrapped component.",{initial:y.current,count:p.length});let w=(0,Fy.useMemo)(()=>lke(f),p),S=ty(w);return S&&Fy.default.createElement(i,j(j({},g),S))}));return s.displayName="deriver(".concat(i.displayName,")"),s}var ZA,Fy,GZ=C(()=>{ZA=Mt,hn(),Fy=Q(Re()),ake()});function uke(i,s,a){return(0,lu.prism)(()=>{var c;let p=(0,lu.getPointerParts)(i).path,f=s.getValueByPointer(i),g=lu.prism.memo("editPropValue",()=>{let D=null;return{temporarilySetValue(O){D||(D=me().scrub()),D.capture(F=>{F.set(i,O)})},discardTemporaryValue(){D&&(D.discard(),D=null)},permanentlySetValue(O){D?(D.capture(F=>{F.set(i,O)}),D.commit(),D=null):me().transaction(F=>{F.set(i,O)})}}},[]),y={createAsset:D=>s.sheet.project.assetStorage.createAsset(D),getAssetUrl:D=>D.id?s.sheet.project.assetStorage.getAssetUrl(D.id):void 0},w=(0,lu.val)(md(me().atomP.ephemeral.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId].stateByObjectKey[s.address.objectKey].valuesBeingScrubbed,(0,lu.getPointerParts)(i).path))===!0,S=[],M=z(j(j({},g),y),{value:f,beingScrubbed:w,contextMenuItems:S,controlIndicators:By.default.createElement(By.default.Fragment,null)}),R=zPe(a);if(R){let D=(0,lu.val)(s.template.getMapOfValidSequenceTracks_forStudio()),O=Pp(D,p);if(typeof O=="string"){S.push({label:"Make static",callback:()=>{me().transaction(({stateEditors:ae})=>{let xe=z(j({},s.address),{pathToProp:p});ae.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(z(j({},xe),{value:s.getValueByPointer(i)}))})}});let F=O,V=lu.prism.sub("lcr",()=>{let ae=(0,lu.val)(s.template.project.pointers.historic.sheetsById[s.address.sheetId].sequence.tracksByObject[s.address.objectKey].trackData[F]),xe=(0,lu.val)(s.sheet.getSequence().positionPrism);return MZ(s,ae&&{data:ae,id:F,sheetObject:s},xe)},[F]),W;M.beingScrubbed?W="Sequenced_OnKeyframe_BeingScrubbed":V.cur?W="Sequenced_OnKeyframe":((c=V.prev)==null?void 0:c.kf.connectedRight)===!0?W="Sequenced_BeingInterpolated":W="Sequened_NotBeingInterpolated";let X=()=>{V.cur?me().transaction(ae=>{ae.unset(i)}):me().transaction(ae=>{ae.set(i,M.value)})},re={cur:V.cur?{type:"on",itemKey:V.cur.itemKey,toggle:X}:{type:"off",toggle:X},prev:V.prev!==void 0?{itemKey:V.prev.itemKey,position:V.prev.kf.position,jump:()=>{s.sheet.getSequence().position=V.prev.kf.position}}:void 0,next:V.next!==void 0?{itemKey:V.next.itemKey,position:V.next.kf.position,jump:()=>{s.sheet.getSequence().position=V.next.kf.position}}:void 0},ne=By.default.createElement(pU,j({},re));return z(j({},M),{type:"Sequenced",shade:W,nearbyKeyframes:V,controlIndicators:ne})}}let A=(0,lu.val)(s.template.getStaticValues()),k=Pp(A,p);return typeof k<"u"&&S.push({label:"Reset to default",callback:()=>{me().transaction(({unset:D})=>{D(i)})}}),R&&S.push({label:"Sequence",callback:()=>{me().transaction(({stateEditors:D})=>{let O=z(j({},s.address),{pathToProp:p});D.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(O,a)})}}),typeof k<"u"?z(j({},M),{type:"Static",shade:M.beingScrubbed?"Static_BeingScrubbed":"Static",controlIndicators:By.default.createElement(vS,{hasStaticOverride:!0,obj:s,pathToProp:p,propConfig:a})}):z(j({},M),{type:"Default",shade:"Default",controlIndicators:By.default.createElement(vS,{hasStaticOverride:!0,obj:s,pathToProp:p,propConfig:a})})})}function cke(i,s,a){if(QA.has(i))return QA.get(i);{let c=uke(i,s,a);return QA.set(i,c),c}}function bU(i,s,a){let c=cke(i,s,a);return ty(c)}var By,lu,QA,_U=C(()=>{tp(),By=Q(Re()),lu=Mt,Fe(),HA(),hn(),Ep(),CZ(),IZ(),qA(),QA=new WeakMap});function dke({propConfig:i,pointerToProp:s,obj:a,SimpleEditorComponent:c}){let p=bU(s,a,i);return Uo.default.createElement(kB,{editingTools:p,propConfig:i,value:p.value})}function hke({pointerToProp:i,obj:s,propConfig:a,visualIndentation:c}){var p;let f=(p=a.label)!=null?p:yd((0,bS.getPointerParts)(i).path),g=Object.entries(a.props),y=g.filter(([X,re])=>pc(re)),w=g.filter(([X,re])=>!pc(re)),[S,M]=sr(null),R=QPe(i,s,a),[A]=Ms(M,{menuItems:R.contextMenuItems}),k=y.length>0,D=(0,Uo.useMemo)(()=>YA.getIsPropHighlightedD(z(j({},s.address),{pathToProp:(0,bS.getPointerParts)(i).path})),[i]),O="".concat(s.address.projectId,",").concat(s.address.sheetId,",").concat(s.address.sheetInstanceId,",").concat(s.address.objectKey,",").concat((0,bS.getPointerParts)(i).path.join()),F=sQ(a);(0,Uo.useLayoutEffect)(()=>{JA.has(O)||JA.set(O,new bS.Atom(F))},[O,a]);let V=JA.get(O),W=Un(()=>V?(0,WZ.val)(V.pointer):F,[V]);return Uo.default.createElement(KZ,null,A,Uo.default.createElement(wU,{style:{"--depth":c-1}},Uo.default.createElement(YZ,{isVectorProp:F},Uo.default.createElement(QZ,null,R.controlIndicators),Uo.default.createElement(eQ,{isHighlighted:D,ref:S},Uo.default.createElement("span",null,f||"Props")),Uo.default.createElement(nQ,{isCollapsed:W,isVector:F,onClick:()=>{V==null||V.set(!V.get())}},Uo.default.createElement(hq,null))),F&&W&&Uo.default.createElement(lQ,null,[...g].map(([X,re])=>Uo.default.createElement(dke,{key:"prop-"+X,propConfig:re,pointerToProp:i[X],obj:s})))),!W&&Uo.default.createElement(oQ,{style:{"--depth":c},depth:c,lastSubIsComposite:k},[...w,...y].map(([X,re])=>Uo.default.createElement(SU,{key:"prop-"+X,propConfig:re,pointerToProp:i[X],obj:s,visualIndentation:c+1}))))}var bS,Uo,WZ,$Z,KZ,qZ,wU,XZ,YZ,ZZ,QZ,JZ,eQ,tQ,nQ,rQ,iQ,oQ,sQ,aQ,lQ,uQ,JA,pke=C(()=>{Ep(),bS=Mt,q0(),Ea(),Uo=Q(Re()),Ne(),RY(),av(),vr(),mr(),SQ(),As(),eke(),gU(),GZ(),nq(),_U(),hn(),WZ=Mt,Oy(),FA(),KZ=se.div($Z||($Z=G([`
  --step: 15px;
  --left-pad: 15px;
  `,`;
  --right-width: 60%;
`])),hr),wU=se.div(qZ||(qZ=G([`
  height: 30px;
  display: flex;
  align-items: stretch;
  position: relative;
`]))),YZ=se.div(XZ||(XZ=G([`
  padding-left: `,`;
  display: flex;
  align-items: center;
  overflow: hidden;
  `,`;
`])),oU,({isVectorProp:i})=>i?"width: calc(100% - var(--right-width))":""),QZ=se.div(ZZ||(ZZ=G([`
  flexshrink: 0;
`]))),eQ=yU(se.div(JZ||(JZ=G([`
  margin-left: 4px;
  cursor: default;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 4px;
  user-select: none;
  &:hover {
    color: white;
  }
  overflow: hidden;

  `,`;
`])),()=>Cp)),nQ=se.span(tQ||(tQ=G([`
  width: 28px;
  height: 28px;
  font-size: 9px;
  display: flex;
  align-items: center;
  justify-content: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  visibility: `,`;

  `,`:hover & {
    visibility: visible;
  }

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),i=>i.isCollapsed?0:90,i=>!i.isVector&&i.isCollapsed||i.isVector&&!i.isCollapsed?"visible":"hidden",wU,i=>i.isCollapsed?15:75),rQ=ru(.05,"#282b2f"),oQ=se.div(iQ||(iQ=G([`
  /* background: `,`; */
  /* padding: `,` 0; */
`])),({depth:i})=>Bx(i*.03,rQ),i=>i.lastSubIsComposite?0:"4px"),sQ=oS(i=>{let s=Object.entries(i.props);return s.length<=3&&s.every(([a,c])=>c.type==="number"&&["x","y","z"].includes(a))}),lQ=se.div(aQ||(aQ=G([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`]))),uQ=Uo.default.memo(hke),JA=new Map});function fke({isHighlighted:i}){return i==="self"?"#1857a4":i==="descendent"?"#0a2f5c":"initial"}var mke=C(()=>{});function vke({propConfig:i,pointerToProp:s,editingTools:a,children:c,isPropHighlightedD:p}){var f;let g=(f=i.label)!=null?f:yd((0,xU.getPointerParts)(s).path),[y,w]=sr(null),[S]=Ms(w,{menuItems:a.contextMenuItems});return Uy.default.createElement(dQ,{isHighlighted:p},S,Uy.default.createElement(pQ,null,Uy.default.createElement(gQ,null,a.controlIndicators),Uy.default.createElement(mQ,{isHighlighted:p,ref:y,title:["obj","props",...(0,xU.getPointerParts)(s).path].join(".")},g)),Uy.default.createElement(bQ,null,c))}var xU,Uy,cQ,dQ,hQ,pQ,fQ,mQ,vQ,gQ,yQ,bQ,gke=C(()=>{xU=Mt,As(),mr(),ti(),Uy=Q(Re()),Ne(),vr(),av(),GZ(),RY(),mke(),dQ=yU(se.div(cQ||(cQ=G([`
  display: flex;
  height: 30px;
  justify-content: flex-start;
  align-items: stretch;
  // We cannot calculate both the container (details panel) width and the descendant
  // (this) width dynamically. This leads to the container width being calculated
  // without this percentage being taken into consideration leads to horizontal
  // clipping/scrolling--the same way as if we explicitly fixed either the container
  // width, or the descendant width.
  // The correct solution for tabulated UIs with dynamic container widths is to use
  // CSS grid. For now I fixed this issue by just giving a great enough width
  // to the details panel so most things don't break.
  --right-width: 60%;
  position: relative;
  `,`;

  /* background-color: `,`; */
`])),hr,fke)),pQ=se.div(hQ||(hQ=G([`
  box-sizing: border-box;
  padding-left: `,`;
  padding-right: 4px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: stretch;
  gap: 4px;
  flex-grow: 0;
  flex-shrink: 0;
  width: calc(100% - var(--right-width));
`])),oU),mQ=yU(se.div(fQ||(fQ=G([`
  text-align: left;
  flex: 1 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  user-select: none;
  cursor: default;

  `,`;
  &:hover {
    color: white;
  }
`])),Cp)),gQ=se.div(vQ||(vQ=G([`
  flex-basis: 8px;
  flex: 0 0;
  display: flex;
  align-items: center;
`]))),bQ=se.div(yQ||(yQ=G([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`])))});function yke({propConfig:i,pointerToProp:s,obj:a,SimpleEditorComponent:c}){let p=bU(s,a,i),f=(0,_S.useMemo)(()=>YA.getIsPropHighlightedD(z(j({},a.address),{pathToProp:(0,_Q.getPointerParts)(s).path})),[s]);return _S.default.createElement(vke,{editingTools:p,propConfig:i,pointerToProp:s,isPropHighlightedD:f},_S.default.createElement(c,{editingTools:p,propConfig:i,value:p.value}))}var _S,_Q,wQ,bke=C(()=>{_S=Q(Re()),_U(),gke(),_Q=Mt,gU(),wQ=_S.default.memo(yke)}),wS,xQ,SU,SQ=C(()=>{wS=Q(Re()),IY(),pke(),bke(),xQ=({propConfig:i,visualIndentation:s,pointerToProp:a,obj:c})=>{if(i.type==="compound")return wS.default.createElement(uQ,{obj:c,visualIndentation:s,pointerToProp:a,propConfig:i});if(i.type==="enum")return wS.default.createElement(wS.default.Fragment,null);{let p=rU[i.type];return wS.default.createElement(wQ,{SimpleEditorComponent:p,obj:c,visualIndentation:s,pointerToProp:a,propConfig:i})}},SU=xQ});function EQ(i){return eI.has(i)||eI.set(i,(CQ++).toString()),eI.get(i)}var eI,CQ,PQ=C(()=>{eI=new WeakMap,CQ=0}),Vy,kQ,TQ,MQ,AQ,IQ,RQ,_ke=C(()=>{Vy=Q(Re()),SQ(),hn(),PQ(),Ne(),TQ=se.div(kQ||(kQ=G([`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
`]))),AQ=se.button(MQ||(MQ=G([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  border-radius: 2px;

  color: #a8a8a9;
  background: rgba(255, 255, 255, 0.1);

  border: none;
  height: 28px;

  &:hover {
    background: rgba(255, 255, 255, 0.15);
  }

  &:active {
    background: rgba(255, 255, 255, 0.2);
  }
`]))),IQ=({objects:i})=>{let s=i[0],a=Wn(s.template.configPointer),c=Wn(s.template._temp_actionsPointer);return Vy.default.createElement(Vy.default.Fragment,null,Vy.default.createElement(SU,{key:EQ(s),obj:s,pointerToProp:s.propsP,propConfig:a,visualIndentation:1}),Vy.default.createElement(TQ,null,c&&Object.entries(c).map(([p,f])=>Vy.default.createElement(AQ,{key:p,onClick:()=>{f(s.publicApi)}},p))))},RQ=IQ}),OQ,DQ,tI,LQ=C(()=>{Ne(),DQ=se.button(OQ||(OQ=G([`
  text-align: center;
  padding: 8px;
  border-radius: 2px;
  border: 1px solid #627b7b87;
  background-color: #4b787d3d;
  color: #eaeaea;
  font-weight: 400;
  display: block;
  appearance: none;
  flex-grow: 1;
  cursor: `,`;
  opacity: `,`;

  &:hover {
    background-color: #7dc1c878;
    border-color: #9ebcbf;
  }
`])),i=>i.disabled?"none":"pointer",i=>i.disabled?.4:1),tI=DQ}),wke=C(()=>{}),NQ,xke=C(()=>{wke(),NQ=(i=21)=>{let s="",a=crypto.getRandomValues(new Uint8Array(i));for(;i--;){let c=a[i]&63;c<36?s+=c.toString(36):c<62?s+=(c-26).toString(36).toUpperCase():c<63?s+="_":s+="-"}return s}});function FQ(){return NQ(16)}var BQ=C(()=>{xke()}),UQ,Fd,EU,VQ,jQ,zQ,HQ,GQ=C(()=>{UQ=Mt,mr(),Fd=Q(Re()),EU=(0,Fd.createContext)(null),VQ=0,jQ=()=>{let i=(0,Fd.useMemo)(()=>VQ++,[]),{cur:s,set:a}=(0,Fd.useContext)(EU),[c,p]=sr(!1),f=(0,Fd.useCallback)((g,y)=>{a(g?i:-1,y)},[]);return(0,Fd.useEffect)(()=>s.onStale(()=>{let g=s.getValue()===i;c.current!==g&&(c.current=g)}),[s,i]),[p,f]},zQ=({children:i})=>{let s=(0,Fd.useMemo)(()=>new UQ.Atom(-1),[]),a=s.prism,c=(0,Fd.useMemo)(()=>{let p;return(f,g)=>{let y=p!==void 0;p!==void 0&&(clearTimeout(p),p=void 0),g===0||y?s.set(f):p=setTimeout(()=>{s.set(f),p=void 0},g)}},[]);return Fd.default.createElement(EU.Provider,{value:{cur:a,set:c}},i)},HQ=zQ});function jy(i,s){let a=i.enabled!==!1,[c,p]=jQ(),[f,g]=sr(null);(0,$Q.useEffect)(()=>{if(!a)return;let w=f.current;if(!w)return;let S=()=>{var R;return p(!0,(R=i.enterDelay)!=null?R:400)},M=()=>{var R;return p(!1,(R=i.exitDelay)!=null?R:200)};return w.addEventListener("mouseenter",S),w.addEventListener("mouseleave",M),()=>{w.removeEventListener("mouseenter",S),w.removeEventListener("mouseleave",M)}},[f,a,i.enterDelay,i.exitDelay]);let y=(0,WQ.useContext)(Sy);return[a&&c&&g?(0,KQ.createPortal)(nI.default.createElement(ZB,{children:s,target:g,onClickOutside:iu,verticalPlacement:i.verticalPlacement,verticalGap:i.verticalGap}),y):nI.default.createElement(nI.default.Fragment,null),f,c]}var WQ,$Q,nI,KQ,xS=C(()=>{mr(),WQ=Q(Re()),$Q=Q(Re()),nI=Q(Re()),OX(),KQ=Q(Xl()),GQ(),iv(),Py()}),qQ,XQ,zy,rI=C(()=>{Ne(),dc(),XQ=se(cc)(qQ||(qQ=G([`
  padding: 1em;
  max-width: 240px;
  pointer-events: none !important;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: #45464d;
`]))),zy=XQ}),fc,YQ,ZQ,QQ,JQ,eJ,tJ,nJ,rJ,iJ,Ske=C(()=>{hn(),Fe(),fc=Q(Re()),Ne(),BQ(),xS(),rI(),LQ(),ZQ=se.div(YQ||(YQ=G([`
  padding: 8px 10px;
  position: relative;
  background-color: #6d232352;
  &:before {
    position: absolute;
    content: ' ';
    display: block;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #ff000070;
  }
`]))),JQ=se.div(QQ||(QQ=G([`
  margin-bottom: 1em;
  & a {
    color: inherit;
  }
`]))),tJ=se.div(eJ||(eJ=G([`
  display: flex;
  gap: 8px;
`]))),nJ=({projectId:i})=>{let s=Wn(me().atomP.ephemeral.coreByProject[i].loadingState);return s&&s.type==="browserStateIsNotBasedOnDiskState"?fc.default.createElement(rJ,{loadingState:s,projectId:i}):null},rJ=({projectId:i,loadingState:s})=>{let a=()=>{me().transaction(({drafts:w,stateEditors:S})=>{S.coreByProject.historic.revisionHistory.add({projectId:i,revision:s.onDiskState.revisionHistory[0]}),S.coreByProject.historic.revisionHistory.add({projectId:i,revision:FQ()}),w.ephemeral.coreByProject[i].loadingState={type:"loaded"}})},c=()=>{me().transaction(({drafts:w})=>{w.historic.coreByProject[i]=s.onDiskState,w.ephemeral.coreByProject[i].loadingState={type:"loaded"}})},[p,f]=jy({},()=>fc.default.createElement(zy,null,"The browser's state will override the disk state.")),[g,y]=jy({},()=>fc.default.createElement(zy,null,"The disk's state will override the browser's state."));return fc.default.createElement(ZQ,null,fc.default.createElement(JQ,null,"Browser state is not based on disk state."," ",fc.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Learn more.")),fc.default.createElement(tJ,null,p,fc.default.createElement(tI,{onClick:a,ref:f},"Use browser's state"),g,fc.default.createElement(tI,{onClick:c,ref:y},"Use disk state")))},iJ=nJ}),Eke=K((i,s)=>{(function(a){typeof i=="object"&&typeof s<"u"?s.exports=a():(typeof window<"u"?window:typeof Ai<"u"?Ai:typeof self<"u"?self:this).JSZip=a()})(function(){return function a(c,p,f){function g(S,M){if(!p[S]){if(!c[S]){var R=typeof pD=="function"&&pD;if(!M&&R)return R(S,!0);if(y)return y(S,!0);var A=new Error("Cannot find module '"+S+"'");throw A.code="MODULE_NOT_FOUND",A}var k=p[S]={exports:{}};c[S][0].call(k.exports,function(D){var O=c[S][1][D];return g(O||D)},k,k.exports,a,c,p,f)}return p[S].exports}for(var y=typeof pD=="function"&&pD,w=0;w<f.length;w++)g(f[w]);return g}({1:[function(a,c,p){var f=a("./utils"),g=a("./support"),y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";p.encode=function(w){for(var S,M,R,A,k,D,O,F=[],V=0,W=w.length,X=W,re=f.getTypeOf(w)!=="string";V<w.length;)X=W-V,R=re?(S=w[V++],M=V<W?w[V++]:0,V<W?w[V++]:0):(S=w.charCodeAt(V++),M=V<W?w.charCodeAt(V++):0,V<W?w.charCodeAt(V++):0),A=S>>2,k=(3&S)<<4|M>>4,D=1<X?(15&M)<<2|R>>6:64,O=2<X?63&R:64,F.push(y.charAt(A)+y.charAt(k)+y.charAt(D)+y.charAt(O));return F.join("")},p.decode=function(w){var S,M,R,A,k,D,O=0,F=0,V="data:";if(w.substr(0,V.length)===V)throw new Error("Invalid base64 input, it looks like a data url.");var W,X=3*(w=w.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(w.charAt(w.length-1)===y.charAt(64)&&X--,w.charAt(w.length-2)===y.charAt(64)&&X--,X%1!=0)throw new Error("Invalid base64 input, bad content length.");for(W=g.uint8array?new Uint8Array(0|X):new Array(0|X);O<w.length;)S=y.indexOf(w.charAt(O++))<<2|(A=y.indexOf(w.charAt(O++)))>>4,M=(15&A)<<4|(k=y.indexOf(w.charAt(O++)))>>2,R=(3&k)<<6|(D=y.indexOf(w.charAt(O++))),W[F++]=S,k!==64&&(W[F++]=M),D!==64&&(W[F++]=R);return W}},{"./support":30,"./utils":32}],2:[function(a,c,p){var f=a("./external"),g=a("./stream/DataWorker"),y=a("./stream/Crc32Probe"),w=a("./stream/DataLengthProbe");function S(M,R,A,k,D){this.compressedSize=M,this.uncompressedSize=R,this.crc32=A,this.compression=k,this.compressedContent=D}S.prototype={getContentWorker:function(){var M=new g(f.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new w("data_length")),R=this;return M.on("end",function(){if(this.streamInfo.data_length!==R.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),M},getCompressedWorker:function(){return new g(f.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},S.createWorkerFrom=function(M,R,A){return M.pipe(new y).pipe(new w("uncompressedSize")).pipe(R.compressWorker(A)).pipe(new w("compressedSize")).withStreamInfo("compression",R)},c.exports=S},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,c,p){var f=a("./stream/GenericWorker");p.STORE={magic:"\0\0",compressWorker:function(){return new f("STORE compression")},uncompressWorker:function(){return new f("STORE decompression")}},p.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,c,p){var f=a("./utils"),g=function(){for(var y,w=[],S=0;S<256;S++){y=S;for(var M=0;M<8;M++)y=1&y?3988292384^y>>>1:y>>>1;w[S]=y}return w}();c.exports=function(y,w){return y!==void 0&&y.length?f.getTypeOf(y)!=="string"?function(S,M,R,A){var k=g,D=A+R;S^=-1;for(var O=A;O<D;O++)S=S>>>8^k[255&(S^M[O])];return-1^S}(0|w,y,y.length,0):function(S,M,R,A){var k=g,D=A+R;S^=-1;for(var O=A;O<D;O++)S=S>>>8^k[255&(S^M.charCodeAt(O))];return-1^S}(0|w,y,y.length,0):0}},{"./utils":32}],5:[function(a,c,p){p.base64=!1,p.binary=!1,p.dir=!1,p.createFolders=!0,p.date=null,p.compression=null,p.compressionOptions=null,p.comment=null,p.unixPermissions=null,p.dosPermissions=null},{}],6:[function(a,c,p){var f=null;f=typeof Promise<"u"?Promise:a("lie"),c.exports={Promise:f}},{lie:37}],7:[function(a,c,p){var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",g=a("pako"),y=a("./utils"),w=a("./stream/GenericWorker"),S=f?"uint8array":"array";function M(R,A){w.call(this,"FlateWorker/"+R),this._pako=null,this._pakoAction=R,this._pakoOptions=A,this.meta={}}p.magic="\b\0",y.inherits(M,w),M.prototype.processChunk=function(R){this.meta=R.meta,this._pako===null&&this._createPako(),this._pako.push(y.transformTo(S,R.data),!1)},M.prototype.flush=function(){w.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},M.prototype.cleanUp=function(){w.prototype.cleanUp.call(this),this._pako=null},M.prototype._createPako=function(){this._pako=new g[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var R=this;this._pako.onData=function(A){R.push({data:A,meta:R.meta})}},p.compressWorker=function(R){return new M("Deflate",R)},p.uncompressWorker=function(){return new M("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,c,p){function f(k,D){var O,F="";for(O=0;O<D;O++)F+=String.fromCharCode(255&k),k>>>=8;return F}function g(k,D,O,F,V,W){var X,re,ne=k.file,ae=k.compression,xe=W!==S.utf8encode,fe=y.transformTo("string",W(ne.name)),ge=y.transformTo("string",S.utf8encode(ne.name)),Ie=ne.comment,Qe=y.transformTo("string",W(Ie)),le=y.transformTo("string",S.utf8encode(Ie)),Ae=ge.length!==ne.name.length,Y=le.length!==Ie.length,Ue="",Tt="",ke="",Te=ne.dir,je=ne.date,wt={crc32:0,compressedSize:0,uncompressedSize:0};D&&!O||(wt.crc32=k.crc32,wt.compressedSize=k.compressedSize,wt.uncompressedSize=k.uncompressedSize);var ue=0;D&&(ue|=8),xe||!Ae&&!Y||(ue|=2048);var he=0,qe=0;Te&&(he|=16),V==="UNIX"?(qe=798,he|=function(ot,ze){var Zt=ot;return ot||(Zt=ze?16893:33204),(65535&Zt)<<16}(ne.unixPermissions,Te)):(qe=20,he|=function(ot){return 63&(ot||0)}(ne.dosPermissions)),X=je.getUTCHours(),X<<=6,X|=je.getUTCMinutes(),X<<=5,X|=je.getUTCSeconds()/2,re=je.getUTCFullYear()-1980,re<<=4,re|=je.getUTCMonth()+1,re<<=5,re|=je.getUTCDate(),Ae&&(Tt=f(1,1)+f(M(fe),4)+ge,Ue+="up"+f(Tt.length,2)+Tt),Y&&(ke=f(1,1)+f(M(Qe),4)+le,Ue+="uc"+f(ke.length,2)+ke);var Ze="";return Ze+=`
\0`,Ze+=f(ue,2),Ze+=ae.magic,Ze+=f(X,2),Ze+=f(re,2),Ze+=f(wt.crc32,4),Ze+=f(wt.compressedSize,4),Ze+=f(wt.uncompressedSize,4),Ze+=f(fe.length,2),Ze+=f(Ue.length,2),{fileRecord:R.LOCAL_FILE_HEADER+Ze+fe+Ue,dirRecord:R.CENTRAL_FILE_HEADER+f(qe,2)+Ze+f(Qe.length,2)+"\0\0\0\0"+f(he,4)+f(F,4)+fe+Ue+Qe}}var y=a("../utils"),w=a("../stream/GenericWorker"),S=a("../utf8"),M=a("../crc32"),R=a("../signature");function A(k,D,O,F){w.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=D,this.zipPlatform=O,this.encodeFileName=F,this.streamFiles=k,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}y.inherits(A,w),A.prototype.push=function(k){var D=k.meta.percent||0,O=this.entriesCount,F=this._sources.length;this.accumulate?this.contentBuffer.push(k):(this.bytesWritten+=k.data.length,w.prototype.push.call(this,{data:k.data,meta:{currentFile:this.currentFile,percent:O?(D+100*(O-F-1))/O:100}}))},A.prototype.openedSource=function(k){this.currentSourceOffset=this.bytesWritten,this.currentFile=k.file.name;var D=this.streamFiles&&!k.file.dir;if(D){var O=g(k,D,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:O.fileRecord,meta:{percent:0}})}else this.accumulate=!0},A.prototype.closedSource=function(k){this.accumulate=!1;var D=this.streamFiles&&!k.file.dir,O=g(k,D,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(O.dirRecord),D)this.push({data:function(F){return R.DATA_DESCRIPTOR+f(F.crc32,4)+f(F.compressedSize,4)+f(F.uncompressedSize,4)}(k),meta:{percent:100}});else for(this.push({data:O.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},A.prototype.flush=function(){for(var k=this.bytesWritten,D=0;D<this.dirRecords.length;D++)this.push({data:this.dirRecords[D],meta:{percent:100}});var O=this.bytesWritten-k,F=function(V,W,X,re,ne){var ae=y.transformTo("string",ne(re));return R.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(V,2)+f(V,2)+f(W,4)+f(X,4)+f(ae.length,2)+ae}(this.dirRecords.length,O,k,this.zipComment,this.encodeFileName);this.push({data:F,meta:{percent:100}})},A.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},A.prototype.registerPrevious=function(k){this._sources.push(k);var D=this;return k.on("data",function(O){D.processChunk(O)}),k.on("end",function(){D.closedSource(D.previous.streamInfo),D._sources.length?D.prepareNextSource():D.end()}),k.on("error",function(O){D.error(O)}),this},A.prototype.resume=function(){return!!w.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},A.prototype.error=function(k){var D=this._sources;if(!w.prototype.error.call(this,k))return!1;for(var O=0;O<D.length;O++)try{D[O].error(k)}catch{}return!0},A.prototype.lock=function(){w.prototype.lock.call(this);for(var k=this._sources,D=0;D<k.length;D++)k[D].lock()},c.exports=A},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,c,p){var f=a("../compressions"),g=a("./ZipFileWorker");p.generateWorker=function(y,w,S){var M=new g(w.streamFiles,S,w.platform,w.encodeFileName),R=0;try{y.forEach(function(A,k){R++;var D=function(W,X){var re=W||X,ne=f[re];if(!ne)throw new Error(re+" is not a valid compression method !");return ne}(k.options.compression,w.compression),O=k.options.compressionOptions||w.compressionOptions||{},F=k.dir,V=k.date;k._compressWorker(D,O).withStreamInfo("file",{name:A,dir:F,date:V,comment:k.comment||"",unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions}).pipe(M)}),M.entriesCount=R}catch(A){M.error(A)}return M}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,c,p){function f(){if(!(this instanceof f))return new f;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var g=new f;for(var y in this)typeof this[y]!="function"&&(g[y]=this[y]);return g}}(f.prototype=a("./object")).loadAsync=a("./load"),f.support=a("./support"),f.defaults=a("./defaults"),f.version="3.10.1",f.loadAsync=function(g,y){return new f().loadAsync(g,y)},f.external=a("./external"),c.exports=f},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,c,p){var f=a("./utils"),g=a("./external"),y=a("./utf8"),w=a("./zipEntries"),S=a("./stream/Crc32Probe"),M=a("./nodejsUtils");function R(A){return new g.Promise(function(k,D){var O=A.decompressed.getContentWorker().pipe(new S);O.on("error",function(F){D(F)}).on("end",function(){O.streamInfo.crc32!==A.decompressed.crc32?D(new Error("Corrupted zip : CRC32 mismatch")):k()}).resume()})}c.exports=function(A,k){var D=this;return k=f.extend(k||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:y.utf8decode}),M.isNode&&M.isStream(A)?g.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):f.prepareContent("the loaded zip file",A,!0,k.optimizedBinaryString,k.base64).then(function(O){var F=new w(k);return F.load(O),F}).then(function(O){var F=[g.Promise.resolve(O)],V=O.files;if(k.checkCRC32)for(var W=0;W<V.length;W++)F.push(R(V[W]));return g.Promise.all(F)}).then(function(O){for(var F=O.shift(),V=F.files,W=0;W<V.length;W++){var X=V[W],re=X.fileNameStr,ne=f.resolve(X.fileNameStr);D.file(ne,X.decompressed,{binary:!0,optimizedBinaryString:!0,date:X.date,dir:X.dir,comment:X.fileCommentStr.length?X.fileCommentStr:null,unixPermissions:X.unixPermissions,dosPermissions:X.dosPermissions,createFolders:k.createFolders}),X.dir||(D.file(ne).unsafeOriginalName=re)}return F.zipComment.length&&(D.comment=F.zipComment),D})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,c,p){var f=a("../utils"),g=a("../stream/GenericWorker");function y(w,S){g.call(this,"Nodejs stream input adapter for "+w),this._upstreamEnded=!1,this._bindStream(S)}f.inherits(y,g),y.prototype._bindStream=function(w){var S=this;(this._stream=w).pause(),w.on("data",function(M){S.push({data:M,meta:{percent:0}})}).on("error",function(M){S.isPaused?this.generatedError=M:S.error(M)}).on("end",function(){S.isPaused?S._upstreamEnded=!0:S.end()})},y.prototype.pause=function(){return!!g.prototype.pause.call(this)&&(this._stream.pause(),!0)},y.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},c.exports=y},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,c,p){var f=a("readable-stream").Readable;function g(y,w,S){f.call(this,w),this._helper=y;var M=this;y.on("data",function(R,A){M.push(R)||M._helper.pause(),S&&S(A)}).on("error",function(R){M.emit("error",R)}).on("end",function(){M.push(null)})}a("../utils").inherits(g,f),g.prototype._read=function(){this._helper.resume()},c.exports=g},{"../utils":32,"readable-stream":16}],14:[function(a,c,p){c.exports={isNode:typeof Buffer<"u",newBufferFrom:function(f,g){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(f,g);if(typeof f=="number")throw new Error('The "data" argument must not be a number');return new Buffer(f,g)},allocBuffer:function(f){if(Buffer.alloc)return Buffer.alloc(f);var g=new Buffer(f);return g.fill(0),g},isBuffer:function(f){return Buffer.isBuffer(f)},isStream:function(f){return f&&typeof f.on=="function"&&typeof f.pause=="function"&&typeof f.resume=="function"}}},{}],15:[function(a,c,p){function f(ne,ae,xe){var fe,ge=y.getTypeOf(ae),Ie=y.extend(xe||{},M);Ie.date=Ie.date||new Date,Ie.compression!==null&&(Ie.compression=Ie.compression.toUpperCase()),typeof Ie.unixPermissions=="string"&&(Ie.unixPermissions=parseInt(Ie.unixPermissions,8)),Ie.unixPermissions&&16384&Ie.unixPermissions&&(Ie.dir=!0),Ie.dosPermissions&&16&Ie.dosPermissions&&(Ie.dir=!0),Ie.dir&&(ne=V(ne)),Ie.createFolders&&(fe=F(ne))&&W.call(this,fe,!0);var Qe=ge==="string"&&Ie.binary===!1&&Ie.base64===!1;xe&&xe.binary!==void 0||(Ie.binary=!Qe),(ae instanceof R&&ae.uncompressedSize===0||Ie.dir||!ae||ae.length===0)&&(Ie.base64=!1,Ie.binary=!0,ae="",Ie.compression="STORE",ge="string");var le=null;le=ae instanceof R||ae instanceof w?ae:D.isNode&&D.isStream(ae)?new O(ne,ae):y.prepareContent(ne,ae,Ie.binary,Ie.optimizedBinaryString,Ie.base64);var Ae=new A(ne,le,Ie);this.files[ne]=Ae}var g=a("./utf8"),y=a("./utils"),w=a("./stream/GenericWorker"),S=a("./stream/StreamHelper"),M=a("./defaults"),R=a("./compressedObject"),A=a("./zipObject"),k=a("./generate"),D=a("./nodejsUtils"),O=a("./nodejs/NodejsStreamInputAdapter"),F=function(ne){ne.slice(-1)==="/"&&(ne=ne.substring(0,ne.length-1));var ae=ne.lastIndexOf("/");return 0<ae?ne.substring(0,ae):""},V=function(ne){return ne.slice(-1)!=="/"&&(ne+="/"),ne},W=function(ne,ae){return ae=ae!==void 0?ae:M.createFolders,ne=V(ne),this.files[ne]||f.call(this,ne,null,{dir:!0,createFolders:ae}),this.files[ne]};function X(ne){return Object.prototype.toString.call(ne)==="[object RegExp]"}var re={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ne){var ae,xe,fe;for(ae in this.files)fe=this.files[ae],(xe=ae.slice(this.root.length,ae.length))&&ae.slice(0,this.root.length)===this.root&&ne(xe,fe)},filter:function(ne){var ae=[];return this.forEach(function(xe,fe){ne(xe,fe)&&ae.push(fe)}),ae},file:function(ne,ae,xe){if(arguments.length!==1)return ne=this.root+ne,f.call(this,ne,ae,xe),this;if(X(ne)){var fe=ne;return this.filter(function(Ie,Qe){return!Qe.dir&&fe.test(Ie)})}var ge=this.files[this.root+ne];return ge&&!ge.dir?ge:null},folder:function(ne){if(!ne)return this;if(X(ne))return this.filter(function(ge,Ie){return Ie.dir&&ne.test(ge)});var ae=this.root+ne,xe=W.call(this,ae),fe=this.clone();return fe.root=xe.name,fe},remove:function(ne){ne=this.root+ne;var ae=this.files[ne];if(ae||(ne.slice(-1)!=="/"&&(ne+="/"),ae=this.files[ne]),ae&&!ae.dir)delete this.files[ne];else for(var xe=this.filter(function(ge,Ie){return Ie.name.slice(0,ne.length)===ne}),fe=0;fe<xe.length;fe++)delete this.files[xe[fe].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ne){var ae,xe={};try{if((xe=y.extend(ne||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:g.utf8encode})).type=xe.type.toLowerCase(),xe.compression=xe.compression.toUpperCase(),xe.type==="binarystring"&&(xe.type="string"),!xe.type)throw new Error("No output type specified.");y.checkSupport(xe.type),xe.platform!=="darwin"&&xe.platform!=="freebsd"&&xe.platform!=="linux"&&xe.platform!=="sunos"||(xe.platform="UNIX"),xe.platform==="win32"&&(xe.platform="DOS");var fe=xe.comment||this.comment||"";ae=k.generateWorker(this,xe,fe)}catch(ge){(ae=new w("error")).error(ge)}return new S(ae,xe.type||"string",xe.mimeType)},generateAsync:function(ne,ae){return this.generateInternalStream(ne).accumulate(ae)},generateNodeStream:function(ne,ae){return(ne=ne||{}).type||(ne.type="nodebuffer"),this.generateInternalStream(ne).toNodejsStream(ae)}};c.exports=re},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,c,p){c.exports=a("stream")},{stream:void 0}],17:[function(a,c,p){var f=a("./DataReader");function g(y){f.call(this,y);for(var w=0;w<this.data.length;w++)y[w]=255&y[w]}a("../utils").inherits(g,f),g.prototype.byteAt=function(y){return this.data[this.zero+y]},g.prototype.lastIndexOfSignature=function(y){for(var w=y.charCodeAt(0),S=y.charCodeAt(1),M=y.charCodeAt(2),R=y.charCodeAt(3),A=this.length-4;0<=A;--A)if(this.data[A]===w&&this.data[A+1]===S&&this.data[A+2]===M&&this.data[A+3]===R)return A-this.zero;return-1},g.prototype.readAndCheckSignature=function(y){var w=y.charCodeAt(0),S=y.charCodeAt(1),M=y.charCodeAt(2),R=y.charCodeAt(3),A=this.readData(4);return w===A[0]&&S===A[1]&&M===A[2]&&R===A[3]},g.prototype.readData=function(y){if(this.checkOffset(y),y===0)return[];var w=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,w},c.exports=g},{"../utils":32,"./DataReader":18}],18:[function(a,c,p){var f=a("../utils");function g(y){this.data=y,this.length=y.length,this.index=0,this.zero=0}g.prototype={checkOffset:function(y){this.checkIndex(this.index+y)},checkIndex:function(y){if(this.length<this.zero+y||y<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+y+"). Corrupted zip ?")},setIndex:function(y){this.checkIndex(y),this.index=y},skip:function(y){this.setIndex(this.index+y)},byteAt:function(){},readInt:function(y){var w,S=0;for(this.checkOffset(y),w=this.index+y-1;w>=this.index;w--)S=(S<<8)+this.byteAt(w);return this.index+=y,S},readString:function(y){return f.transformTo("string",this.readData(y))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var y=this.readInt(4);return new Date(Date.UTC(1980+(y>>25&127),(y>>21&15)-1,y>>16&31,y>>11&31,y>>5&63,(31&y)<<1))}},c.exports=g},{"../utils":32}],19:[function(a,c,p){var f=a("./Uint8ArrayReader");function g(y){f.call(this,y)}a("../utils").inherits(g,f),g.prototype.readData=function(y){this.checkOffset(y);var w=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,w},c.exports=g},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,c,p){var f=a("./DataReader");function g(y){f.call(this,y)}a("../utils").inherits(g,f),g.prototype.byteAt=function(y){return this.data.charCodeAt(this.zero+y)},g.prototype.lastIndexOfSignature=function(y){return this.data.lastIndexOf(y)-this.zero},g.prototype.readAndCheckSignature=function(y){return y===this.readData(4)},g.prototype.readData=function(y){this.checkOffset(y);var w=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,w},c.exports=g},{"../utils":32,"./DataReader":18}],21:[function(a,c,p){var f=a("./ArrayReader");function g(y){f.call(this,y)}a("../utils").inherits(g,f),g.prototype.readData=function(y){if(this.checkOffset(y),y===0)return new Uint8Array(0);var w=this.data.subarray(this.zero+this.index,this.zero+this.index+y);return this.index+=y,w},c.exports=g},{"../utils":32,"./ArrayReader":17}],22:[function(a,c,p){var f=a("../utils"),g=a("../support"),y=a("./ArrayReader"),w=a("./StringReader"),S=a("./NodeBufferReader"),M=a("./Uint8ArrayReader");c.exports=function(R){var A=f.getTypeOf(R);return f.checkSupport(A),A!=="string"||g.uint8array?A==="nodebuffer"?new S(R):g.uint8array?new M(f.transformTo("uint8array",R)):new y(f.transformTo("array",R)):new w(R)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,c,p){p.LOCAL_FILE_HEADER="PK",p.CENTRAL_FILE_HEADER="PK",p.CENTRAL_DIRECTORY_END="PK",p.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",p.ZIP64_CENTRAL_DIRECTORY_END="PK",p.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,c,p){var f=a("./GenericWorker"),g=a("../utils");function y(w){f.call(this,"ConvertWorker to "+w),this.destType=w}g.inherits(y,f),y.prototype.processChunk=function(w){this.push({data:g.transformTo(this.destType,w.data),meta:w.meta})},c.exports=y},{"../utils":32,"./GenericWorker":28}],25:[function(a,c,p){var f=a("./GenericWorker"),g=a("../crc32");function y(){f.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(y,f),y.prototype.processChunk=function(w){this.streamInfo.crc32=g(w.data,this.streamInfo.crc32||0),this.push(w)},c.exports=y},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,c,p){var f=a("../utils"),g=a("./GenericWorker");function y(w){g.call(this,"DataLengthProbe for "+w),this.propName=w,this.withStreamInfo(w,0)}f.inherits(y,g),y.prototype.processChunk=function(w){if(w){var S=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=S+w.data.length}g.prototype.processChunk.call(this,w)},c.exports=y},{"../utils":32,"./GenericWorker":28}],27:[function(a,c,p){var f=a("../utils"),g=a("./GenericWorker");function y(w){g.call(this,"DataWorker");var S=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,w.then(function(M){S.dataIsReady=!0,S.data=M,S.max=M&&M.length||0,S.type=f.getTypeOf(M),S.isPaused||S._tickAndRepeat()},function(M){S.error(M)})}f.inherits(y,g),y.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this.data=null},y.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,f.delay(this._tickAndRepeat,[],this)),!0)},y.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(f.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},y.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var w=null,S=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":w=this.data.substring(this.index,S);break;case"uint8array":w=this.data.subarray(this.index,S);break;case"array":case"nodebuffer":w=this.data.slice(this.index,S)}return this.index=S,this.push({data:w,meta:{percent:this.max?this.index/this.max*100:0}})},c.exports=y},{"../utils":32,"./GenericWorker":28}],28:[function(a,c,p){function f(g){this.name=g||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}f.prototype={push:function(g){this.emit("data",g)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(g){this.emit("error",g)}return!0},error:function(g){return!this.isFinished&&(this.isPaused?this.generatedError=g:(this.isFinished=!0,this.emit("error",g),this.previous&&this.previous.error(g),this.cleanUp()),!0)},on:function(g,y){return this._listeners[g].push(y),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(g,y){if(this._listeners[g])for(var w=0;w<this._listeners[g].length;w++)this._listeners[g][w].call(this,y)},pipe:function(g){return g.registerPrevious(this)},registerPrevious:function(g){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=g.streamInfo,this.mergeStreamInfo(),this.previous=g;var y=this;return g.on("data",function(w){y.processChunk(w)}),g.on("end",function(){y.end()}),g.on("error",function(w){y.error(w)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var g=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),g=!0),this.previous&&this.previous.resume(),!g},flush:function(){},processChunk:function(g){this.push(g)},withStreamInfo:function(g,y){return this.extraStreamInfo[g]=y,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var g in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,g)&&(this.streamInfo[g]=this.extraStreamInfo[g])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var g="Worker "+this.name;return this.previous?this.previous+" -> "+g:g}},c.exports=f},{}],29:[function(a,c,p){var f=a("../utils"),g=a("./ConvertWorker"),y=a("./GenericWorker"),w=a("../base64"),S=a("../support"),M=a("../external"),R=null;if(S.nodestream)try{R=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function A(D,O){return new M.Promise(function(F,V){var W=[],X=D._internalType,re=D._outputType,ne=D._mimeType;D.on("data",function(ae,xe){W.push(ae),O&&O(xe)}).on("error",function(ae){W=[],V(ae)}).on("end",function(){try{var ae=function(xe,fe,ge){switch(xe){case"blob":return f.newBlob(f.transformTo("arraybuffer",fe),ge);case"base64":return w.encode(fe);default:return f.transformTo(xe,fe)}}(re,function(xe,fe){var ge,Ie=0,Qe=null,le=0;for(ge=0;ge<fe.length;ge++)le+=fe[ge].length;switch(xe){case"string":return fe.join("");case"array":return Array.prototype.concat.apply([],fe);case"uint8array":for(Qe=new Uint8Array(le),ge=0;ge<fe.length;ge++)Qe.set(fe[ge],Ie),Ie+=fe[ge].length;return Qe;case"nodebuffer":return Buffer.concat(fe);default:throw new Error("concat : unsupported type '"+xe+"'")}}(X,W),ne);F(ae)}catch(xe){V(xe)}W=[]}).resume()})}function k(D,O,F){var V=O;switch(O){case"blob":case"arraybuffer":V="uint8array";break;case"base64":V="string"}try{this._internalType=V,this._outputType=O,this._mimeType=F,f.checkSupport(V),this._worker=D.pipe(new g(V)),D.lock()}catch(W){this._worker=new y("error"),this._worker.error(W)}}k.prototype={accumulate:function(D){return A(this,D)},on:function(D,O){var F=this;return D==="data"?this._worker.on(D,function(V){O.call(F,V.data,V.meta)}):this._worker.on(D,function(){f.delay(O,arguments,F)}),this},resume:function(){return f.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(D){if(f.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new R(this,{objectMode:this._outputType!=="nodebuffer"},D)}},c.exports=k},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,c,p){if(p.base64=!0,p.array=!0,p.string=!0,p.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",p.nodebuffer=typeof Buffer<"u",p.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")p.blob=!1;else{var f=new ArrayBuffer(0);try{p.blob=new Blob([f],{type:"application/zip"}).size===0}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);g.append(f),p.blob=g.getBlob("application/zip").size===0}catch{p.blob=!1}}}try{p.nodestream=!!a("readable-stream").Readable}catch{p.nodestream=!1}},{"readable-stream":16}],31:[function(a,c,p){for(var f=a("./utils"),g=a("./support"),y=a("./nodejsUtils"),w=a("./stream/GenericWorker"),S=new Array(256),M=0;M<256;M++)S[M]=252<=M?6:248<=M?5:240<=M?4:224<=M?3:192<=M?2:1;S[254]=S[254]=1;function R(){w.call(this,"utf-8 decode"),this.leftOver=null}function A(){w.call(this,"utf-8 encode")}p.utf8encode=function(k){return g.nodebuffer?y.newBufferFrom(k,"utf-8"):function(D){var O,F,V,W,X,re=D.length,ne=0;for(W=0;W<re;W++)(64512&(F=D.charCodeAt(W)))==55296&&W+1<re&&(64512&(V=D.charCodeAt(W+1)))==56320&&(F=65536+(F-55296<<10)+(V-56320),W++),ne+=F<128?1:F<2048?2:F<65536?3:4;for(O=g.uint8array?new Uint8Array(ne):new Array(ne),W=X=0;X<ne;W++)(64512&(F=D.charCodeAt(W)))==55296&&W+1<re&&(64512&(V=D.charCodeAt(W+1)))==56320&&(F=65536+(F-55296<<10)+(V-56320),W++),F<128?O[X++]=F:(F<2048?O[X++]=192|F>>>6:(F<65536?O[X++]=224|F>>>12:(O[X++]=240|F>>>18,O[X++]=128|F>>>12&63),O[X++]=128|F>>>6&63),O[X++]=128|63&F);return O}(k)},p.utf8decode=function(k){return g.nodebuffer?f.transformTo("nodebuffer",k).toString("utf-8"):function(D){var O,F,V,W,X=D.length,re=new Array(2*X);for(O=F=0;O<X;)if((V=D[O++])<128)re[F++]=V;else if(4<(W=S[V]))re[F++]=65533,O+=W-1;else{for(V&=W===2?31:W===3?15:7;1<W&&O<X;)V=V<<6|63&D[O++],W--;1<W?re[F++]=65533:V<65536?re[F++]=V:(V-=65536,re[F++]=55296|V>>10&1023,re[F++]=56320|1023&V)}return re.length!==F&&(re.subarray?re=re.subarray(0,F):re.length=F),f.applyFromCharCode(re)}(k=f.transformTo(g.uint8array?"uint8array":"array",k))},f.inherits(R,w),R.prototype.processChunk=function(k){var D=f.transformTo(g.uint8array?"uint8array":"array",k.data);if(this.leftOver&&this.leftOver.length){if(g.uint8array){var O=D;(D=new Uint8Array(O.length+this.leftOver.length)).set(this.leftOver,0),D.set(O,this.leftOver.length)}else D=this.leftOver.concat(D);this.leftOver=null}var F=function(W,X){var re;for((X=X||W.length)>W.length&&(X=W.length),re=X-1;0<=re&&(192&W[re])==128;)re--;return re<0||re===0?X:re+S[W[re]]>X?re:X}(D),V=D;F!==D.length&&(g.uint8array?(V=D.subarray(0,F),this.leftOver=D.subarray(F,D.length)):(V=D.slice(0,F),this.leftOver=D.slice(F,D.length))),this.push({data:p.utf8decode(V),meta:k.meta})},R.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:p.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},p.Utf8DecodeWorker=R,f.inherits(A,w),A.prototype.processChunk=function(k){this.push({data:p.utf8encode(k.data),meta:k.meta})},p.Utf8EncodeWorker=A},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,c,p){var f=a("./support"),g=a("./base64"),y=a("./nodejsUtils"),w=a("./external");function S(O){return O}function M(O,F){for(var V=0;V<O.length;++V)F[V]=255&O.charCodeAt(V);return F}a("setimmediate"),p.newBlob=function(O,F){p.checkSupport("blob");try{return new Blob([O],{type:F})}catch{try{var V=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return V.append(O),V.getBlob(F)}catch{throw new Error("Bug : can't construct the Blob.")}}};var R={stringifyByChunk:function(O,F,V){var W=[],X=0,re=O.length;if(re<=V)return String.fromCharCode.apply(null,O);for(;X<re;)F==="array"||F==="nodebuffer"?W.push(String.fromCharCode.apply(null,O.slice(X,Math.min(X+V,re)))):W.push(String.fromCharCode.apply(null,O.subarray(X,Math.min(X+V,re)))),X+=V;return W.join("")},stringifyByChar:function(O){for(var F="",V=0;V<O.length;V++)F+=String.fromCharCode(O[V]);return F},applyCanBeUsed:{uint8array:function(){try{return f.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return f.nodebuffer&&String.fromCharCode.apply(null,y.allocBuffer(1)).length===1}catch{return!1}}()}};function A(O){var F=65536,V=p.getTypeOf(O),W=!0;if(V==="uint8array"?W=R.applyCanBeUsed.uint8array:V==="nodebuffer"&&(W=R.applyCanBeUsed.nodebuffer),W)for(;1<F;)try{return R.stringifyByChunk(O,V,F)}catch{F=Math.floor(F/2)}return R.stringifyByChar(O)}function k(O,F){for(var V=0;V<O.length;V++)F[V]=O[V];return F}p.applyFromCharCode=A;var D={};D.string={string:S,array:function(O){return M(O,new Array(O.length))},arraybuffer:function(O){return D.string.uint8array(O).buffer},uint8array:function(O){return M(O,new Uint8Array(O.length))},nodebuffer:function(O){return M(O,y.allocBuffer(O.length))}},D.array={string:A,array:S,arraybuffer:function(O){return new Uint8Array(O).buffer},uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return y.newBufferFrom(O)}},D.arraybuffer={string:function(O){return A(new Uint8Array(O))},array:function(O){return k(new Uint8Array(O),new Array(O.byteLength))},arraybuffer:S,uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return y.newBufferFrom(new Uint8Array(O))}},D.uint8array={string:A,array:function(O){return k(O,new Array(O.length))},arraybuffer:function(O){return O.buffer},uint8array:S,nodebuffer:function(O){return y.newBufferFrom(O)}},D.nodebuffer={string:A,array:function(O){return k(O,new Array(O.length))},arraybuffer:function(O){return D.nodebuffer.uint8array(O).buffer},uint8array:function(O){return k(O,new Uint8Array(O.length))},nodebuffer:S},p.transformTo=function(O,F){if(F=F||"",!O)return F;p.checkSupport(O);var V=p.getTypeOf(F);return D[V][O](F)},p.resolve=function(O){for(var F=O.split("/"),V=[],W=0;W<F.length;W++){var X=F[W];X==="."||X===""&&W!==0&&W!==F.length-1||(X===".."?V.pop():V.push(X))}return V.join("/")},p.getTypeOf=function(O){return typeof O=="string"?"string":Object.prototype.toString.call(O)==="[object Array]"?"array":f.nodebuffer&&y.isBuffer(O)?"nodebuffer":f.uint8array&&O instanceof Uint8Array?"uint8array":f.arraybuffer&&O instanceof ArrayBuffer?"arraybuffer":void 0},p.checkSupport=function(O){if(!f[O.toLowerCase()])throw new Error(O+" is not supported by this platform")},p.MAX_VALUE_16BITS=65535,p.MAX_VALUE_32BITS=-1,p.pretty=function(O){var F,V,W="";for(V=0;V<(O||"").length;V++)W+="\\x"+((F=O.charCodeAt(V))<16?"0":"")+F.toString(16).toUpperCase();return W},p.delay=function(O,F,V){setImmediate(function(){O.apply(V||null,F||[])})},p.inherits=function(O,F){function V(){}V.prototype=F.prototype,O.prototype=new V},p.extend=function(){var O,F,V={};for(O=0;O<arguments.length;O++)for(F in arguments[O])Object.prototype.hasOwnProperty.call(arguments[O],F)&&V[F]===void 0&&(V[F]=arguments[O][F]);return V},p.prepareContent=function(O,F,V,W,X){return w.Promise.resolve(F).then(function(re){return f.blob&&(re instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(re))!==-1)&&typeof FileReader<"u"?new w.Promise(function(ne,ae){var xe=new FileReader;xe.onload=function(fe){ne(fe.target.result)},xe.onerror=function(fe){ae(fe.target.error)},xe.readAsArrayBuffer(re)}):re}).then(function(re){var ne=p.getTypeOf(re);return ne?(ne==="arraybuffer"?re=p.transformTo("uint8array",re):ne==="string"&&(X?re=g.decode(re):V&&W!==!0&&(re=function(ae){return M(ae,f.uint8array?new Uint8Array(ae.length):new Array(ae.length))}(re))),re):w.Promise.reject(new Error("Can't read the data of '"+O+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,c,p){var f=a("./reader/readerFor"),g=a("./utils"),y=a("./signature"),w=a("./zipEntry"),S=a("./support");function M(R){this.files=[],this.loadOptions=R}M.prototype={checkSignature:function(R){if(!this.reader.readAndCheckSignature(R)){this.reader.index-=4;var A=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+g.pretty(A)+", expected "+g.pretty(R)+")")}},isSignature:function(R,A){var k=this.reader.index;this.reader.setIndex(R);var D=this.reader.readString(4)===A;return this.reader.setIndex(k),D},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var R=this.reader.readData(this.zipCommentLength),A=S.uint8array?"uint8array":"array",k=g.transformTo(A,R);this.zipComment=this.loadOptions.decodeFileName(k)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var R,A,k,D=this.zip64EndOfCentralSize-44;0<D;)R=this.reader.readInt(2),A=this.reader.readInt(4),k=this.reader.readData(A),this.zip64ExtensibleData[R]={id:R,length:A,value:k}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var R,A;for(R=0;R<this.files.length;R++)A=this.files[R],this.reader.setIndex(A.localHeaderOffset),this.checkSignature(y.LOCAL_FILE_HEADER),A.readLocalPart(this.reader),A.handleUTF8(),A.processAttributes()},readCentralDir:function(){var R;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(y.CENTRAL_FILE_HEADER);)(R=new w({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(R);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var R=this.reader.lastIndexOfSignature(y.CENTRAL_DIRECTORY_END);if(R<0)throw this.isSignature(0,y.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(R);var A=R;if(this.checkSignature(y.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===g.MAX_VALUE_16BITS||this.diskWithCentralDirStart===g.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===g.MAX_VALUE_16BITS||this.centralDirRecords===g.MAX_VALUE_16BITS||this.centralDirSize===g.MAX_VALUE_32BITS||this.centralDirOffset===g.MAX_VALUE_32BITS){if(this.zip64=!0,(R=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(R),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,y.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var k=this.centralDirOffset+this.centralDirSize;this.zip64&&(k+=20,k+=12+this.zip64EndOfCentralSize);var D=A-k;if(0<D)this.isSignature(A,y.CENTRAL_FILE_HEADER)||(this.reader.zero=D);else if(D<0)throw new Error("Corrupted zip: missing "+Math.abs(D)+" bytes.")},prepareReader:function(R){this.reader=f(R)},load:function(R){this.prepareReader(R),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},c.exports=M},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,c,p){var f=a("./reader/readerFor"),g=a("./utils"),y=a("./compressedObject"),w=a("./crc32"),S=a("./utf8"),M=a("./compressions"),R=a("./support");function A(k,D){this.options=k,this.loadOptions=D}A.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(k){var D,O;if(k.skip(22),this.fileNameLength=k.readInt(2),O=k.readInt(2),this.fileName=k.readData(this.fileNameLength),k.skip(O),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((D=function(F){for(var V in M)if(Object.prototype.hasOwnProperty.call(M,V)&&M[V].magic===F)return M[V];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+g.pretty(this.compressionMethod)+" unknown (inner file : "+g.transformTo("string",this.fileName)+")");this.decompressed=new y(this.compressedSize,this.uncompressedSize,this.crc32,D,k.readData(this.compressedSize))},readCentralPart:function(k){this.versionMadeBy=k.readInt(2),k.skip(2),this.bitFlag=k.readInt(2),this.compressionMethod=k.readString(2),this.date=k.readDate(),this.crc32=k.readInt(4),this.compressedSize=k.readInt(4),this.uncompressedSize=k.readInt(4);var D=k.readInt(2);if(this.extraFieldsLength=k.readInt(2),this.fileCommentLength=k.readInt(2),this.diskNumberStart=k.readInt(2),this.internalFileAttributes=k.readInt(2),this.externalFileAttributes=k.readInt(4),this.localHeaderOffset=k.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");k.skip(D),this.readExtraFields(k),this.parseZIP64ExtraField(k),this.fileComment=k.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var k=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),k==0&&(this.dosPermissions=63&this.externalFileAttributes),k==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var k=f(this.extraFields[1].value);this.uncompressedSize===g.MAX_VALUE_32BITS&&(this.uncompressedSize=k.readInt(8)),this.compressedSize===g.MAX_VALUE_32BITS&&(this.compressedSize=k.readInt(8)),this.localHeaderOffset===g.MAX_VALUE_32BITS&&(this.localHeaderOffset=k.readInt(8)),this.diskNumberStart===g.MAX_VALUE_32BITS&&(this.diskNumberStart=k.readInt(4))}},readExtraFields:function(k){var D,O,F,V=k.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});k.index+4<V;)D=k.readInt(2),O=k.readInt(2),F=k.readData(O),this.extraFields[D]={id:D,length:O,value:F};k.setIndex(V)},handleUTF8:function(){var k=R.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=S.utf8decode(this.fileName),this.fileCommentStr=S.utf8decode(this.fileComment);else{var D=this.findExtraFieldUnicodePath();if(D!==null)this.fileNameStr=D;else{var O=g.transformTo(k,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(O)}var F=this.findExtraFieldUnicodeComment();if(F!==null)this.fileCommentStr=F;else{var V=g.transformTo(k,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(V)}}},findExtraFieldUnicodePath:function(){var k=this.extraFields[28789];if(k){var D=f(k.value);return D.readInt(1)!==1||w(this.fileName)!==D.readInt(4)?null:S.utf8decode(D.readData(k.length-5))}return null},findExtraFieldUnicodeComment:function(){var k=this.extraFields[25461];if(k){var D=f(k.value);return D.readInt(1)!==1||w(this.fileComment)!==D.readInt(4)?null:S.utf8decode(D.readData(k.length-5))}return null}},c.exports=A},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,c,p){function f(D,O,F){this.name=D,this.dir=F.dir,this.date=F.date,this.comment=F.comment,this.unixPermissions=F.unixPermissions,this.dosPermissions=F.dosPermissions,this._data=O,this._dataBinary=F.binary,this.options={compression:F.compression,compressionOptions:F.compressionOptions}}var g=a("./stream/StreamHelper"),y=a("./stream/DataWorker"),w=a("./utf8"),S=a("./compressedObject"),M=a("./stream/GenericWorker");f.prototype={internalStream:function(D){var O=null,F="string";try{if(!D)throw new Error("No output type specified.");var V=(F=D.toLowerCase())==="string"||F==="text";F!=="binarystring"&&F!=="text"||(F="string"),O=this._decompressWorker();var W=!this._dataBinary;W&&!V&&(O=O.pipe(new w.Utf8EncodeWorker)),!W&&V&&(O=O.pipe(new w.Utf8DecodeWorker))}catch(X){(O=new M("error")).error(X)}return new g(O,F,"")},async:function(D,O){return this.internalStream(D).accumulate(O)},nodeStream:function(D,O){return this.internalStream(D||"nodebuffer").toNodejsStream(O)},_compressWorker:function(D,O){if(this._data instanceof S&&this._data.compression.magic===D.magic)return this._data.getCompressedWorker();var F=this._decompressWorker();return this._dataBinary||(F=F.pipe(new w.Utf8EncodeWorker)),S.createWorkerFrom(F,D,O)},_decompressWorker:function(){return this._data instanceof S?this._data.getContentWorker():this._data instanceof M?this._data:new y(this._data)}};for(var R=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],A=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},k=0;k<R.length;k++)f.prototype[R[k]]=A;c.exports=f},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,c,p){(function(f){var g,y,w=f.MutationObserver||f.WebKitMutationObserver;if(w){var S=0,M=new w(D),R=f.document.createTextNode("");M.observe(R,{characterData:!0}),g=function(){R.data=S=++S%2}}else if(f.setImmediate||f.MessageChannel===void 0)g="document"in f&&"onreadystatechange"in f.document.createElement("script")?function(){var O=f.document.createElement("script");O.onreadystatechange=function(){D(),O.onreadystatechange=null,O.parentNode.removeChild(O),O=null},f.document.documentElement.appendChild(O)}:function(){setTimeout(D,0)};else{var A=new f.MessageChannel;A.port1.onmessage=D,g=function(){A.port2.postMessage(0)}}var k=[];function D(){var O,F;y=!0;for(var V=k.length;V;){for(F=k,k=[],O=-1;++O<V;)F[O]();V=k.length}y=!1}c.exports=function(O){k.push(O)!==1||y||g()}}).call(this,typeof Ai<"u"?Ai:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,c,p){var f=a("immediate");function g(){}var y={},w=["REJECTED"],S=["FULFILLED"],M=["PENDING"];function R(V){if(typeof V!="function")throw new TypeError("resolver must be a function");this.state=M,this.queue=[],this.outcome=void 0,V!==g&&O(this,V)}function A(V,W,X){this.promise=V,typeof W=="function"&&(this.onFulfilled=W,this.callFulfilled=this.otherCallFulfilled),typeof X=="function"&&(this.onRejected=X,this.callRejected=this.otherCallRejected)}function k(V,W,X){f(function(){var re;try{re=W(X)}catch(ne){return y.reject(V,ne)}re===V?y.reject(V,new TypeError("Cannot resolve promise with itself")):y.resolve(V,re)})}function D(V){var W=V&&V.then;if(V&&(typeof V=="object"||typeof V=="function")&&typeof W=="function")return function(){W.apply(V,arguments)}}function O(V,W){var X=!1;function re(xe){X||(X=!0,y.reject(V,xe))}function ne(xe){X||(X=!0,y.resolve(V,xe))}var ae=F(function(){W(ne,re)});ae.status==="error"&&re(ae.value)}function F(V,W){var X={};try{X.value=V(W),X.status="success"}catch(re){X.status="error",X.value=re}return X}(c.exports=R).prototype.finally=function(V){if(typeof V!="function")return this;var W=this.constructor;return this.then(function(X){return W.resolve(V()).then(function(){return X})},function(X){return W.resolve(V()).then(function(){throw X})})},R.prototype.catch=function(V){return this.then(null,V)},R.prototype.then=function(V,W){if(typeof V!="function"&&this.state===S||typeof W!="function"&&this.state===w)return this;var X=new this.constructor(g);return this.state!==M?k(X,this.state===S?V:W,this.outcome):this.queue.push(new A(X,V,W)),X},A.prototype.callFulfilled=function(V){y.resolve(this.promise,V)},A.prototype.otherCallFulfilled=function(V){k(this.promise,this.onFulfilled,V)},A.prototype.callRejected=function(V){y.reject(this.promise,V)},A.prototype.otherCallRejected=function(V){k(this.promise,this.onRejected,V)},y.resolve=function(V,W){var X=F(D,W);if(X.status==="error")return y.reject(V,X.value);var re=X.value;if(re)O(V,re);else{V.state=S,V.outcome=W;for(var ne=-1,ae=V.queue.length;++ne<ae;)V.queue[ne].callFulfilled(W)}return V},y.reject=function(V,W){V.state=w,V.outcome=W;for(var X=-1,re=V.queue.length;++X<re;)V.queue[X].callRejected(W);return V},R.resolve=function(V){return V instanceof this?V:y.resolve(new this(g),V)},R.reject=function(V){var W=new this(g);return y.reject(W,V)},R.all=function(V){var W=this;if(Object.prototype.toString.call(V)!=="[object Array]")return this.reject(new TypeError("must be an array"));var X=V.length,re=!1;if(!X)return this.resolve([]);for(var ne=new Array(X),ae=0,xe=-1,fe=new this(g);++xe<X;)ge(V[xe],xe);return fe;function ge(Ie,Qe){W.resolve(Ie).then(function(le){ne[Qe]=le,++ae!==X||re||(re=!0,y.resolve(fe,ne))},function(le){re||(re=!0,y.reject(fe,le))})}},R.race=function(V){var W=this;if(Object.prototype.toString.call(V)!=="[object Array]")return this.reject(new TypeError("must be an array"));var X=V.length,re=!1;if(!X)return this.resolve([]);for(var ne=-1,ae=new this(g);++ne<X;)xe=V[ne],W.resolve(xe).then(function(fe){re||(re=!0,y.resolve(ae,fe))},function(fe){re||(re=!0,y.reject(ae,fe))});var xe;return ae}},{immediate:36}],38:[function(a,c,p){var f={};(0,a("./lib/utils/common").assign)(f,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),c.exports=f},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,c,p){var f=a("./zlib/deflate"),g=a("./utils/common"),y=a("./utils/strings"),w=a("./zlib/messages"),S=a("./zlib/zstream"),M=Object.prototype.toString,R=0,A=-1,k=0,D=8;function O(V){if(!(this instanceof O))return new O(V);this.options=g.assign({level:A,method:D,chunkSize:16384,windowBits:15,memLevel:8,strategy:k,to:""},V||{});var W=this.options;W.raw&&0<W.windowBits?W.windowBits=-W.windowBits:W.gzip&&0<W.windowBits&&W.windowBits<16&&(W.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S,this.strm.avail_out=0;var X=f.deflateInit2(this.strm,W.level,W.method,W.windowBits,W.memLevel,W.strategy);if(X!==R)throw new Error(w[X]);if(W.header&&f.deflateSetHeader(this.strm,W.header),W.dictionary){var re;if(re=typeof W.dictionary=="string"?y.string2buf(W.dictionary):M.call(W.dictionary)==="[object ArrayBuffer]"?new Uint8Array(W.dictionary):W.dictionary,(X=f.deflateSetDictionary(this.strm,re))!==R)throw new Error(w[X]);this._dict_set=!0}}function F(V,W){var X=new O(W);if(X.push(V,!0),X.err)throw X.msg||w[X.err];return X.result}O.prototype.push=function(V,W){var X,re,ne=this.strm,ae=this.options.chunkSize;if(this.ended)return!1;re=W===~~W?W:W===!0?4:0,typeof V=="string"?ne.input=y.string2buf(V):M.call(V)==="[object ArrayBuffer]"?ne.input=new Uint8Array(V):ne.input=V,ne.next_in=0,ne.avail_in=ne.input.length;do{if(ne.avail_out===0&&(ne.output=new g.Buf8(ae),ne.next_out=0,ne.avail_out=ae),(X=f.deflate(ne,re))!==1&&X!==R)return this.onEnd(X),!(this.ended=!0);ne.avail_out!==0&&(ne.avail_in!==0||re!==4&&re!==2)||(this.options.to==="string"?this.onData(y.buf2binstring(g.shrinkBuf(ne.output,ne.next_out))):this.onData(g.shrinkBuf(ne.output,ne.next_out)))}while((0<ne.avail_in||ne.avail_out===0)&&X!==1);return re===4?(X=f.deflateEnd(this.strm),this.onEnd(X),this.ended=!0,X===R):re!==2||(this.onEnd(R),!(ne.avail_out=0))},O.prototype.onData=function(V){this.chunks.push(V)},O.prototype.onEnd=function(V){V===R&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=V,this.msg=this.strm.msg},p.Deflate=O,p.deflate=F,p.deflateRaw=function(V,W){return(W=W||{}).raw=!0,F(V,W)},p.gzip=function(V,W){return(W=W||{}).gzip=!0,F(V,W)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,c,p){var f=a("./zlib/inflate"),g=a("./utils/common"),y=a("./utils/strings"),w=a("./zlib/constants"),S=a("./zlib/messages"),M=a("./zlib/zstream"),R=a("./zlib/gzheader"),A=Object.prototype.toString;function k(O){if(!(this instanceof k))return new k(O);this.options=g.assign({chunkSize:16384,windowBits:0,to:""},O||{});var F=this.options;F.raw&&0<=F.windowBits&&F.windowBits<16&&(F.windowBits=-F.windowBits,F.windowBits===0&&(F.windowBits=-15)),!(0<=F.windowBits&&F.windowBits<16)||O&&O.windowBits||(F.windowBits+=32),15<F.windowBits&&F.windowBits<48&&!(15&F.windowBits)&&(F.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new M,this.strm.avail_out=0;var V=f.inflateInit2(this.strm,F.windowBits);if(V!==w.Z_OK)throw new Error(S[V]);this.header=new R,f.inflateGetHeader(this.strm,this.header)}function D(O,F){var V=new k(F);if(V.push(O,!0),V.err)throw V.msg||S[V.err];return V.result}k.prototype.push=function(O,F){var V,W,X,re,ne,ae,xe=this.strm,fe=this.options.chunkSize,ge=this.options.dictionary,Ie=!1;if(this.ended)return!1;W=F===~~F?F:F===!0?w.Z_FINISH:w.Z_NO_FLUSH,typeof O=="string"?xe.input=y.binstring2buf(O):A.call(O)==="[object ArrayBuffer]"?xe.input=new Uint8Array(O):xe.input=O,xe.next_in=0,xe.avail_in=xe.input.length;do{if(xe.avail_out===0&&(xe.output=new g.Buf8(fe),xe.next_out=0,xe.avail_out=fe),(V=f.inflate(xe,w.Z_NO_FLUSH))===w.Z_NEED_DICT&&ge&&(ae=typeof ge=="string"?y.string2buf(ge):A.call(ge)==="[object ArrayBuffer]"?new Uint8Array(ge):ge,V=f.inflateSetDictionary(this.strm,ae)),V===w.Z_BUF_ERROR&&Ie===!0&&(V=w.Z_OK,Ie=!1),V!==w.Z_STREAM_END&&V!==w.Z_OK)return this.onEnd(V),!(this.ended=!0);xe.next_out&&(xe.avail_out!==0&&V!==w.Z_STREAM_END&&(xe.avail_in!==0||W!==w.Z_FINISH&&W!==w.Z_SYNC_FLUSH)||(this.options.to==="string"?(X=y.utf8border(xe.output,xe.next_out),re=xe.next_out-X,ne=y.buf2string(xe.output,X),xe.next_out=re,xe.avail_out=fe-re,re&&g.arraySet(xe.output,xe.output,X,re,0),this.onData(ne)):this.onData(g.shrinkBuf(xe.output,xe.next_out)))),xe.avail_in===0&&xe.avail_out===0&&(Ie=!0)}while((0<xe.avail_in||xe.avail_out===0)&&V!==w.Z_STREAM_END);return V===w.Z_STREAM_END&&(W=w.Z_FINISH),W===w.Z_FINISH?(V=f.inflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===w.Z_OK):W!==w.Z_SYNC_FLUSH||(this.onEnd(w.Z_OK),!(xe.avail_out=0))},k.prototype.onData=function(O){this.chunks.push(O)},k.prototype.onEnd=function(O){O===w.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},p.Inflate=k,p.inflate=D,p.inflateRaw=function(O,F){return(F=F||{}).raw=!0,D(O,F)},p.ungzip=D},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,c,p){var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";p.assign=function(w){for(var S=Array.prototype.slice.call(arguments,1);S.length;){var M=S.shift();if(M){if(typeof M!="object")throw new TypeError(M+"must be non-object");for(var R in M)M.hasOwnProperty(R)&&(w[R]=M[R])}}return w},p.shrinkBuf=function(w,S){return w.length===S?w:w.subarray?w.subarray(0,S):(w.length=S,w)};var g={arraySet:function(w,S,M,R,A){if(S.subarray&&w.subarray)w.set(S.subarray(M,M+R),A);else for(var k=0;k<R;k++)w[A+k]=S[M+k]},flattenChunks:function(w){var S,M,R,A,k,D;for(S=R=0,M=w.length;S<M;S++)R+=w[S].length;for(D=new Uint8Array(R),S=A=0,M=w.length;S<M;S++)k=w[S],D.set(k,A),A+=k.length;return D}},y={arraySet:function(w,S,M,R,A){for(var k=0;k<R;k++)w[A+k]=S[M+k]},flattenChunks:function(w){return[].concat.apply([],w)}};p.setTyped=function(w){w?(p.Buf8=Uint8Array,p.Buf16=Uint16Array,p.Buf32=Int32Array,p.assign(p,g)):(p.Buf8=Array,p.Buf16=Array,p.Buf32=Array,p.assign(p,y))},p.setTyped(f)},{}],42:[function(a,c,p){var f=a("./common"),g=!0,y=!0;try{String.fromCharCode.apply(null,[0])}catch{g=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{y=!1}for(var w=new f.Buf8(256),S=0;S<256;S++)w[S]=252<=S?6:248<=S?5:240<=S?4:224<=S?3:192<=S?2:1;function M(R,A){if(A<65537&&(R.subarray&&y||!R.subarray&&g))return String.fromCharCode.apply(null,f.shrinkBuf(R,A));for(var k="",D=0;D<A;D++)k+=String.fromCharCode(R[D]);return k}w[254]=w[254]=1,p.string2buf=function(R){var A,k,D,O,F,V=R.length,W=0;for(O=0;O<V;O++)(64512&(k=R.charCodeAt(O)))==55296&&O+1<V&&(64512&(D=R.charCodeAt(O+1)))==56320&&(k=65536+(k-55296<<10)+(D-56320),O++),W+=k<128?1:k<2048?2:k<65536?3:4;for(A=new f.Buf8(W),O=F=0;F<W;O++)(64512&(k=R.charCodeAt(O)))==55296&&O+1<V&&(64512&(D=R.charCodeAt(O+1)))==56320&&(k=65536+(k-55296<<10)+(D-56320),O++),k<128?A[F++]=k:(k<2048?A[F++]=192|k>>>6:(k<65536?A[F++]=224|k>>>12:(A[F++]=240|k>>>18,A[F++]=128|k>>>12&63),A[F++]=128|k>>>6&63),A[F++]=128|63&k);return A},p.buf2binstring=function(R){return M(R,R.length)},p.binstring2buf=function(R){for(var A=new f.Buf8(R.length),k=0,D=A.length;k<D;k++)A[k]=R.charCodeAt(k);return A},p.buf2string=function(R,A){var k,D,O,F,V=A||R.length,W=new Array(2*V);for(k=D=0;k<V;)if((O=R[k++])<128)W[D++]=O;else if(4<(F=w[O]))W[D++]=65533,k+=F-1;else{for(O&=F===2?31:F===3?15:7;1<F&&k<V;)O=O<<6|63&R[k++],F--;1<F?W[D++]=65533:O<65536?W[D++]=O:(O-=65536,W[D++]=55296|O>>10&1023,W[D++]=56320|1023&O)}return M(W,D)},p.utf8border=function(R,A){var k;for((A=A||R.length)>R.length&&(A=R.length),k=A-1;0<=k&&(192&R[k])==128;)k--;return k<0||k===0?A:k+w[R[k]]>A?k:A}},{"./common":41}],43:[function(a,c,p){c.exports=function(f,g,y,w){for(var S=65535&f|0,M=f>>>16&65535|0,R=0;y!==0;){for(y-=R=2e3<y?2e3:y;M=M+(S=S+g[w++]|0)|0,--R;);S%=65521,M%=65521}return S|M<<16|0}},{}],44:[function(a,c,p){c.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,c,p){var f=function(){for(var g,y=[],w=0;w<256;w++){g=w;for(var S=0;S<8;S++)g=1&g?3988292384^g>>>1:g>>>1;y[w]=g}return y}();c.exports=function(g,y,w,S){var M=f,R=S+w;g^=-1;for(var A=S;A<R;A++)g=g>>>8^M[255&(g^y[A])];return-1^g}},{}],46:[function(a,c,p){var f,g=a("../utils/common"),y=a("./trees"),w=a("./adler32"),S=a("./crc32"),M=a("./messages"),R=0,A=4,k=0,D=-2,O=-1,F=4,V=2,W=8,X=9,re=286,ne=30,ae=19,xe=2*re+1,fe=15,ge=3,Ie=258,Qe=Ie+ge+1,le=42,Ae=113,Y=1,Ue=2,Tt=3,ke=4;function Te(J,at){return J.msg=M[at],at}function je(J){return(J<<1)-(4<J?9:0)}function wt(J){for(var at=J.length;0<=--at;)J[at]=0}function ue(J){var at=J.state,st=at.pending;st>J.avail_out&&(st=J.avail_out),st!==0&&(g.arraySet(J.output,at.pending_buf,at.pending_out,st,J.next_out),J.next_out+=st,at.pending_out+=st,J.total_out+=st,J.avail_out-=st,at.pending-=st,at.pending===0&&(at.pending_out=0))}function he(J,at){y._tr_flush_block(J,0<=J.block_start?J.block_start:-1,J.strstart-J.block_start,at),J.block_start=J.strstart,ue(J.strm)}function qe(J,at){J.pending_buf[J.pending++]=at}function Ze(J,at){J.pending_buf[J.pending++]=at>>>8&255,J.pending_buf[J.pending++]=255&at}function ot(J,at){var st,we,be=J.max_chain_length,He=J.strstart,xt=J.prev_length,Ct=J.nice_match,Xe=J.strstart>J.w_size-Qe?J.strstart-(J.w_size-Qe):0,At=J.window,Et=J.w_mask,Pt=J.prev,_n=J.strstart+Ie,gr=At[He+xt-1],Hn=At[He+xt];J.prev_length>=J.good_match&&(be>>=2),Ct>J.lookahead&&(Ct=J.lookahead);do if(At[(st=at)+xt]===Hn&&At[st+xt-1]===gr&&At[st]===At[He]&&At[++st]===At[He+1]){He+=2,st++;do;while(At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&He<_n);if(we=Ie-(_n-He),He=_n-Ie,xt<we){if(J.match_start=at,Ct<=(xt=we))break;gr=At[He+xt-1],Hn=At[He+xt]}}while((at=Pt[at&Et])>Xe&&--be!=0);return xt<=J.lookahead?xt:J.lookahead}function ze(J){var at,st,we,be,He,xt,Ct,Xe,At,Et,Pt=J.w_size;do{if(be=J.window_size-J.lookahead-J.strstart,J.strstart>=Pt+(Pt-Qe)){for(g.arraySet(J.window,J.window,Pt,Pt,0),J.match_start-=Pt,J.strstart-=Pt,J.block_start-=Pt,at=st=J.hash_size;we=J.head[--at],J.head[at]=Pt<=we?we-Pt:0,--st;);for(at=st=Pt;we=J.prev[--at],J.prev[at]=Pt<=we?we-Pt:0,--st;);be+=Pt}if(J.strm.avail_in===0)break;if(xt=J.strm,Ct=J.window,Xe=J.strstart+J.lookahead,At=be,Et=void 0,Et=xt.avail_in,At<Et&&(Et=At),st=Et===0?0:(xt.avail_in-=Et,g.arraySet(Ct,xt.input,xt.next_in,Et,Xe),xt.state.wrap===1?xt.adler=w(xt.adler,Ct,Et,Xe):xt.state.wrap===2&&(xt.adler=S(xt.adler,Ct,Et,Xe)),xt.next_in+=Et,xt.total_in+=Et,Et),J.lookahead+=st,J.lookahead+J.insert>=ge)for(He=J.strstart-J.insert,J.ins_h=J.window[He],J.ins_h=(J.ins_h<<J.hash_shift^J.window[He+1])&J.hash_mask;J.insert&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[He+ge-1])&J.hash_mask,J.prev[He&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=He,He++,J.insert--,!(J.lookahead+J.insert<ge)););}while(J.lookahead<Qe&&J.strm.avail_in!==0)}function Zt(J,at){for(var st,we;;){if(J.lookahead<Qe){if(ze(J),J.lookahead<Qe&&at===R)return Y;if(J.lookahead===0)break}if(st=0,J.lookahead>=ge&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+ge-1])&J.hash_mask,st=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),st!==0&&J.strstart-st<=J.w_size-Qe&&(J.match_length=ot(J,st)),J.match_length>=ge)if(we=y._tr_tally(J,J.strstart-J.match_start,J.match_length-ge),J.lookahead-=J.match_length,J.match_length<=J.max_lazy_match&&J.lookahead>=ge){for(J.match_length--;J.strstart++,J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+ge-1])&J.hash_mask,st=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart,--J.match_length!=0;);J.strstart++}else J.strstart+=J.match_length,J.match_length=0,J.ins_h=J.window[J.strstart],J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+1])&J.hash_mask;else we=y._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++;if(we&&(he(J,!1),J.strm.avail_out===0))return Y}return J.insert=J.strstart<ge-1?J.strstart:ge-1,at===A?(he(J,!0),J.strm.avail_out===0?Tt:ke):J.last_lit&&(he(J,!1),J.strm.avail_out===0)?Y:Ue}function bt(J,at){for(var st,we,be;;){if(J.lookahead<Qe){if(ze(J),J.lookahead<Qe&&at===R)return Y;if(J.lookahead===0)break}if(st=0,J.lookahead>=ge&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+ge-1])&J.hash_mask,st=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),J.prev_length=J.match_length,J.prev_match=J.match_start,J.match_length=ge-1,st!==0&&J.prev_length<J.max_lazy_match&&J.strstart-st<=J.w_size-Qe&&(J.match_length=ot(J,st),J.match_length<=5&&(J.strategy===1||J.match_length===ge&&4096<J.strstart-J.match_start)&&(J.match_length=ge-1)),J.prev_length>=ge&&J.match_length<=J.prev_length){for(be=J.strstart+J.lookahead-ge,we=y._tr_tally(J,J.strstart-1-J.prev_match,J.prev_length-ge),J.lookahead-=J.prev_length-1,J.prev_length-=2;++J.strstart<=be&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+ge-1])&J.hash_mask,st=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),--J.prev_length!=0;);if(J.match_available=0,J.match_length=ge-1,J.strstart++,we&&(he(J,!1),J.strm.avail_out===0))return Y}else if(J.match_available){if((we=y._tr_tally(J,0,J.window[J.strstart-1]))&&he(J,!1),J.strstart++,J.lookahead--,J.strm.avail_out===0)return Y}else J.match_available=1,J.strstart++,J.lookahead--}return J.match_available&&(we=y._tr_tally(J,0,J.window[J.strstart-1]),J.match_available=0),J.insert=J.strstart<ge-1?J.strstart:ge-1,at===A?(he(J,!0),J.strm.avail_out===0?Tt:ke):J.last_lit&&(he(J,!1),J.strm.avail_out===0)?Y:Ue}function Kt(J,at,st,we,be){this.good_length=J,this.max_lazy=at,this.nice_length=st,this.max_chain=we,this.func=be}function cn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=W,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new g.Buf16(2*xe),this.dyn_dtree=new g.Buf16(2*(2*ne+1)),this.bl_tree=new g.Buf16(2*(2*ae+1)),wt(this.dyn_ltree),wt(this.dyn_dtree),wt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new g.Buf16(fe+1),this.heap=new g.Buf16(2*re+1),wt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new g.Buf16(2*re+1),wt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function In(J){var at;return J&&J.state?(J.total_in=J.total_out=0,J.data_type=V,(at=J.state).pending=0,at.pending_out=0,at.wrap<0&&(at.wrap=-at.wrap),at.status=at.wrap?le:Ae,J.adler=at.wrap===2?0:1,at.last_flush=R,y._tr_init(at),k):Te(J,D)}function Cn(J){var at=In(J);return at===k&&function(st){st.window_size=2*st.w_size,wt(st.head),st.max_lazy_match=f[st.level].max_lazy,st.good_match=f[st.level].good_length,st.nice_match=f[st.level].nice_length,st.max_chain_length=f[st.level].max_chain,st.strstart=0,st.block_start=0,st.lookahead=0,st.insert=0,st.match_length=st.prev_length=ge-1,st.match_available=0,st.ins_h=0}(J.state),at}function Er(J,at,st,we,be,He){if(!J)return D;var xt=1;if(at===O&&(at=6),we<0?(xt=0,we=-we):15<we&&(xt=2,we-=16),be<1||X<be||st!==W||we<8||15<we||at<0||9<at||He<0||F<He)return Te(J,D);we===8&&(we=9);var Ct=new cn;return(J.state=Ct).strm=J,Ct.wrap=xt,Ct.gzhead=null,Ct.w_bits=we,Ct.w_size=1<<Ct.w_bits,Ct.w_mask=Ct.w_size-1,Ct.hash_bits=be+7,Ct.hash_size=1<<Ct.hash_bits,Ct.hash_mask=Ct.hash_size-1,Ct.hash_shift=~~((Ct.hash_bits+ge-1)/ge),Ct.window=new g.Buf8(2*Ct.w_size),Ct.head=new g.Buf16(Ct.hash_size),Ct.prev=new g.Buf16(Ct.w_size),Ct.lit_bufsize=1<<be+6,Ct.pending_buf_size=4*Ct.lit_bufsize,Ct.pending_buf=new g.Buf8(Ct.pending_buf_size),Ct.d_buf=1*Ct.lit_bufsize,Ct.l_buf=3*Ct.lit_bufsize,Ct.level=at,Ct.strategy=He,Ct.method=st,Cn(J)}f=[new Kt(0,0,0,0,function(J,at){var st=65535;for(st>J.pending_buf_size-5&&(st=J.pending_buf_size-5);;){if(J.lookahead<=1){if(ze(J),J.lookahead===0&&at===R)return Y;if(J.lookahead===0)break}J.strstart+=J.lookahead,J.lookahead=0;var we=J.block_start+st;if((J.strstart===0||J.strstart>=we)&&(J.lookahead=J.strstart-we,J.strstart=we,he(J,!1),J.strm.avail_out===0)||J.strstart-J.block_start>=J.w_size-Qe&&(he(J,!1),J.strm.avail_out===0))return Y}return J.insert=0,at===A?(he(J,!0),J.strm.avail_out===0?Tt:ke):(J.strstart>J.block_start&&(he(J,!1),J.strm.avail_out),Y)}),new Kt(4,4,8,4,Zt),new Kt(4,5,16,8,Zt),new Kt(4,6,32,32,Zt),new Kt(4,4,16,16,bt),new Kt(8,16,32,32,bt),new Kt(8,16,128,128,bt),new Kt(8,32,128,256,bt),new Kt(32,128,258,1024,bt),new Kt(32,258,258,4096,bt)],p.deflateInit=function(J,at){return Er(J,at,W,15,8,0)},p.deflateInit2=Er,p.deflateReset=Cn,p.deflateResetKeep=In,p.deflateSetHeader=function(J,at){return J&&J.state?J.state.wrap!==2?D:(J.state.gzhead=at,k):D},p.deflate=function(J,at){var st,we,be,He;if(!J||!J.state||5<at||at<0)return J?Te(J,D):D;if(we=J.state,!J.output||!J.input&&J.avail_in!==0||we.status===666&&at!==A)return Te(J,J.avail_out===0?-5:D);if(we.strm=J,st=we.last_flush,we.last_flush=at,we.status===le)if(we.wrap===2)J.adler=0,qe(we,31),qe(we,139),qe(we,8),we.gzhead?(qe(we,(we.gzhead.text?1:0)+(we.gzhead.hcrc?2:0)+(we.gzhead.extra?4:0)+(we.gzhead.name?8:0)+(we.gzhead.comment?16:0)),qe(we,255&we.gzhead.time),qe(we,we.gzhead.time>>8&255),qe(we,we.gzhead.time>>16&255),qe(we,we.gzhead.time>>24&255),qe(we,we.level===9?2:2<=we.strategy||we.level<2?4:0),qe(we,255&we.gzhead.os),we.gzhead.extra&&we.gzhead.extra.length&&(qe(we,255&we.gzhead.extra.length),qe(we,we.gzhead.extra.length>>8&255)),we.gzhead.hcrc&&(J.adler=S(J.adler,we.pending_buf,we.pending,0)),we.gzindex=0,we.status=69):(qe(we,0),qe(we,0),qe(we,0),qe(we,0),qe(we,0),qe(we,we.level===9?2:2<=we.strategy||we.level<2?4:0),qe(we,3),we.status=Ae);else{var xt=W+(we.w_bits-8<<4)<<8;xt|=(2<=we.strategy||we.level<2?0:we.level<6?1:we.level===6?2:3)<<6,we.strstart!==0&&(xt|=32),xt+=31-xt%31,we.status=Ae,Ze(we,xt),we.strstart!==0&&(Ze(we,J.adler>>>16),Ze(we,65535&J.adler)),J.adler=1}if(we.status===69)if(we.gzhead.extra){for(be=we.pending;we.gzindex<(65535&we.gzhead.extra.length)&&(we.pending!==we.pending_buf_size||(we.gzhead.hcrc&&we.pending>be&&(J.adler=S(J.adler,we.pending_buf,we.pending-be,be)),ue(J),be=we.pending,we.pending!==we.pending_buf_size));)qe(we,255&we.gzhead.extra[we.gzindex]),we.gzindex++;we.gzhead.hcrc&&we.pending>be&&(J.adler=S(J.adler,we.pending_buf,we.pending-be,be)),we.gzindex===we.gzhead.extra.length&&(we.gzindex=0,we.status=73)}else we.status=73;if(we.status===73)if(we.gzhead.name){be=we.pending;do{if(we.pending===we.pending_buf_size&&(we.gzhead.hcrc&&we.pending>be&&(J.adler=S(J.adler,we.pending_buf,we.pending-be,be)),ue(J),be=we.pending,we.pending===we.pending_buf_size)){He=1;break}He=we.gzindex<we.gzhead.name.length?255&we.gzhead.name.charCodeAt(we.gzindex++):0,qe(we,He)}while(He!==0);we.gzhead.hcrc&&we.pending>be&&(J.adler=S(J.adler,we.pending_buf,we.pending-be,be)),He===0&&(we.gzindex=0,we.status=91)}else we.status=91;if(we.status===91)if(we.gzhead.comment){be=we.pending;do{if(we.pending===we.pending_buf_size&&(we.gzhead.hcrc&&we.pending>be&&(J.adler=S(J.adler,we.pending_buf,we.pending-be,be)),ue(J),be=we.pending,we.pending===we.pending_buf_size)){He=1;break}He=we.gzindex<we.gzhead.comment.length?255&we.gzhead.comment.charCodeAt(we.gzindex++):0,qe(we,He)}while(He!==0);we.gzhead.hcrc&&we.pending>be&&(J.adler=S(J.adler,we.pending_buf,we.pending-be,be)),He===0&&(we.status=103)}else we.status=103;if(we.status===103&&(we.gzhead.hcrc?(we.pending+2>we.pending_buf_size&&ue(J),we.pending+2<=we.pending_buf_size&&(qe(we,255&J.adler),qe(we,J.adler>>8&255),J.adler=0,we.status=Ae)):we.status=Ae),we.pending!==0){if(ue(J),J.avail_out===0)return we.last_flush=-1,k}else if(J.avail_in===0&&je(at)<=je(st)&&at!==A)return Te(J,-5);if(we.status===666&&J.avail_in!==0)return Te(J,-5);if(J.avail_in!==0||we.lookahead!==0||at!==R&&we.status!==666){var Ct=we.strategy===2?function(Xe,At){for(var Et;;){if(Xe.lookahead===0&&(ze(Xe),Xe.lookahead===0)){if(At===R)return Y;break}if(Xe.match_length=0,Et=y._tr_tally(Xe,0,Xe.window[Xe.strstart]),Xe.lookahead--,Xe.strstart++,Et&&(he(Xe,!1),Xe.strm.avail_out===0))return Y}return Xe.insert=0,At===A?(he(Xe,!0),Xe.strm.avail_out===0?Tt:ke):Xe.last_lit&&(he(Xe,!1),Xe.strm.avail_out===0)?Y:Ue}(we,at):we.strategy===3?function(Xe,At){for(var Et,Pt,_n,gr,Hn=Xe.window;;){if(Xe.lookahead<=Ie){if(ze(Xe),Xe.lookahead<=Ie&&At===R)return Y;if(Xe.lookahead===0)break}if(Xe.match_length=0,Xe.lookahead>=ge&&0<Xe.strstart&&(Pt=Hn[_n=Xe.strstart-1])===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]){gr=Xe.strstart+Ie;do;while(Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&_n<gr);Xe.match_length=Ie-(gr-_n),Xe.match_length>Xe.lookahead&&(Xe.match_length=Xe.lookahead)}if(Xe.match_length>=ge?(Et=y._tr_tally(Xe,1,Xe.match_length-ge),Xe.lookahead-=Xe.match_length,Xe.strstart+=Xe.match_length,Xe.match_length=0):(Et=y._tr_tally(Xe,0,Xe.window[Xe.strstart]),Xe.lookahead--,Xe.strstart++),Et&&(he(Xe,!1),Xe.strm.avail_out===0))return Y}return Xe.insert=0,At===A?(he(Xe,!0),Xe.strm.avail_out===0?Tt:ke):Xe.last_lit&&(he(Xe,!1),Xe.strm.avail_out===0)?Y:Ue}(we,at):f[we.level].func(we,at);if(Ct!==Tt&&Ct!==ke||(we.status=666),Ct===Y||Ct===Tt)return J.avail_out===0&&(we.last_flush=-1),k;if(Ct===Ue&&(at===1?y._tr_align(we):at!==5&&(y._tr_stored_block(we,0,0,!1),at===3&&(wt(we.head),we.lookahead===0&&(we.strstart=0,we.block_start=0,we.insert=0))),ue(J),J.avail_out===0))return we.last_flush=-1,k}return at!==A?k:we.wrap<=0?1:(we.wrap===2?(qe(we,255&J.adler),qe(we,J.adler>>8&255),qe(we,J.adler>>16&255),qe(we,J.adler>>24&255),qe(we,255&J.total_in),qe(we,J.total_in>>8&255),qe(we,J.total_in>>16&255),qe(we,J.total_in>>24&255)):(Ze(we,J.adler>>>16),Ze(we,65535&J.adler)),ue(J),0<we.wrap&&(we.wrap=-we.wrap),we.pending!==0?k:1)},p.deflateEnd=function(J){var at;return J&&J.state?(at=J.state.status)!==le&&at!==69&&at!==73&&at!==91&&at!==103&&at!==Ae&&at!==666?Te(J,D):(J.state=null,at===Ae?Te(J,-3):k):D},p.deflateSetDictionary=function(J,at){var st,we,be,He,xt,Ct,Xe,At,Et=at.length;if(!J||!J.state||(He=(st=J.state).wrap)===2||He===1&&st.status!==le||st.lookahead)return D;for(He===1&&(J.adler=w(J.adler,at,Et,0)),st.wrap=0,Et>=st.w_size&&(He===0&&(wt(st.head),st.strstart=0,st.block_start=0,st.insert=0),At=new g.Buf8(st.w_size),g.arraySet(At,at,Et-st.w_size,st.w_size,0),at=At,Et=st.w_size),xt=J.avail_in,Ct=J.next_in,Xe=J.input,J.avail_in=Et,J.next_in=0,J.input=at,ze(st);st.lookahead>=ge;){for(we=st.strstart,be=st.lookahead-(ge-1);st.ins_h=(st.ins_h<<st.hash_shift^st.window[we+ge-1])&st.hash_mask,st.prev[we&st.w_mask]=st.head[st.ins_h],st.head[st.ins_h]=we,we++,--be;);st.strstart=we,st.lookahead=ge-1,ze(st)}return st.strstart+=st.lookahead,st.block_start=st.strstart,st.insert=st.lookahead,st.lookahead=0,st.match_length=st.prev_length=ge-1,st.match_available=0,J.next_in=Ct,J.input=Xe,J.avail_in=xt,st.wrap=He,k},p.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,c,p){c.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,c,p){c.exports=function(f,g){var y,w,S,M,R,A,k,D,O,F,V,W,X,re,ne,ae,xe,fe,ge,Ie,Qe,le,Ae,Y,Ue;y=f.state,w=f.next_in,Y=f.input,S=w+(f.avail_in-5),M=f.next_out,Ue=f.output,R=M-(g-f.avail_out),A=M+(f.avail_out-257),k=y.dmax,D=y.wsize,O=y.whave,F=y.wnext,V=y.window,W=y.hold,X=y.bits,re=y.lencode,ne=y.distcode,ae=(1<<y.lenbits)-1,xe=(1<<y.distbits)-1;e:do{X<15&&(W+=Y[w++]<<X,X+=8,W+=Y[w++]<<X,X+=8),fe=re[W&ae];t:for(;;){if(W>>>=ge=fe>>>24,X-=ge,(ge=fe>>>16&255)===0)Ue[M++]=65535&fe;else{if(!(16&ge)){if(!(64&ge)){fe=re[(65535&fe)+(W&(1<<ge)-1)];continue t}if(32&ge){y.mode=12;break e}f.msg="invalid literal/length code",y.mode=30;break e}Ie=65535&fe,(ge&=15)&&(X<ge&&(W+=Y[w++]<<X,X+=8),Ie+=W&(1<<ge)-1,W>>>=ge,X-=ge),X<15&&(W+=Y[w++]<<X,X+=8,W+=Y[w++]<<X,X+=8),fe=ne[W&xe];n:for(;;){if(W>>>=ge=fe>>>24,X-=ge,!(16&(ge=fe>>>16&255))){if(!(64&ge)){fe=ne[(65535&fe)+(W&(1<<ge)-1)];continue n}f.msg="invalid distance code",y.mode=30;break e}if(Qe=65535&fe,X<(ge&=15)&&(W+=Y[w++]<<X,(X+=8)<ge&&(W+=Y[w++]<<X,X+=8)),k<(Qe+=W&(1<<ge)-1)){f.msg="invalid distance too far back",y.mode=30;break e}if(W>>>=ge,X-=ge,(ge=M-R)<Qe){if(O<(ge=Qe-ge)&&y.sane){f.msg="invalid distance too far back",y.mode=30;break e}if(Ae=V,(le=0)===F){if(le+=D-ge,ge<Ie){for(Ie-=ge;Ue[M++]=V[le++],--ge;);le=M-Qe,Ae=Ue}}else if(F<ge){if(le+=D+F-ge,(ge-=F)<Ie){for(Ie-=ge;Ue[M++]=V[le++],--ge;);if(le=0,F<Ie){for(Ie-=ge=F;Ue[M++]=V[le++],--ge;);le=M-Qe,Ae=Ue}}}else if(le+=F-ge,ge<Ie){for(Ie-=ge;Ue[M++]=V[le++],--ge;);le=M-Qe,Ae=Ue}for(;2<Ie;)Ue[M++]=Ae[le++],Ue[M++]=Ae[le++],Ue[M++]=Ae[le++],Ie-=3;Ie&&(Ue[M++]=Ae[le++],1<Ie&&(Ue[M++]=Ae[le++]))}else{for(le=M-Qe;Ue[M++]=Ue[le++],Ue[M++]=Ue[le++],Ue[M++]=Ue[le++],2<(Ie-=3););Ie&&(Ue[M++]=Ue[le++],1<Ie&&(Ue[M++]=Ue[le++]))}break}}break}}while(w<S&&M<A);w-=Ie=X>>3,W&=(1<<(X-=Ie<<3))-1,f.next_in=w,f.next_out=M,f.avail_in=w<S?S-w+5:5-(w-S),f.avail_out=M<A?A-M+257:257-(M-A),y.hold=W,y.bits=X}},{}],49:[function(a,c,p){var f=a("../utils/common"),g=a("./adler32"),y=a("./crc32"),w=a("./inffast"),S=a("./inftrees"),M=1,R=2,A=0,k=-2,D=1,O=852,F=592;function V(le){return(le>>>24&255)+(le>>>8&65280)+((65280&le)<<8)+((255&le)<<24)}function W(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function X(le){var Ae;return le&&le.state?(Ae=le.state,le.total_in=le.total_out=Ae.total=0,le.msg="",Ae.wrap&&(le.adler=1&Ae.wrap),Ae.mode=D,Ae.last=0,Ae.havedict=0,Ae.dmax=32768,Ae.head=null,Ae.hold=0,Ae.bits=0,Ae.lencode=Ae.lendyn=new f.Buf32(O),Ae.distcode=Ae.distdyn=new f.Buf32(F),Ae.sane=1,Ae.back=-1,A):k}function re(le){var Ae;return le&&le.state?((Ae=le.state).wsize=0,Ae.whave=0,Ae.wnext=0,X(le)):k}function ne(le,Ae){var Y,Ue;return le&&le.state?(Ue=le.state,Ae<0?(Y=0,Ae=-Ae):(Y=1+(Ae>>4),Ae<48&&(Ae&=15)),Ae&&(Ae<8||15<Ae)?k:(Ue.window!==null&&Ue.wbits!==Ae&&(Ue.window=null),Ue.wrap=Y,Ue.wbits=Ae,re(le))):k}function ae(le,Ae){var Y,Ue;return le?(Ue=new W,(le.state=Ue).window=null,(Y=ne(le,Ae))!==A&&(le.state=null),Y):k}var xe,fe,ge=!0;function Ie(le){if(ge){var Ae;for(xe=new f.Buf32(512),fe=new f.Buf32(32),Ae=0;Ae<144;)le.lens[Ae++]=8;for(;Ae<256;)le.lens[Ae++]=9;for(;Ae<280;)le.lens[Ae++]=7;for(;Ae<288;)le.lens[Ae++]=8;for(S(M,le.lens,0,288,xe,0,le.work,{bits:9}),Ae=0;Ae<32;)le.lens[Ae++]=5;S(R,le.lens,0,32,fe,0,le.work,{bits:5}),ge=!1}le.lencode=xe,le.lenbits=9,le.distcode=fe,le.distbits=5}function Qe(le,Ae,Y,Ue){var Tt,ke=le.state;return ke.window===null&&(ke.wsize=1<<ke.wbits,ke.wnext=0,ke.whave=0,ke.window=new f.Buf8(ke.wsize)),Ue>=ke.wsize?(f.arraySet(ke.window,Ae,Y-ke.wsize,ke.wsize,0),ke.wnext=0,ke.whave=ke.wsize):(Ue<(Tt=ke.wsize-ke.wnext)&&(Tt=Ue),f.arraySet(ke.window,Ae,Y-Ue,Tt,ke.wnext),(Ue-=Tt)?(f.arraySet(ke.window,Ae,Y-Ue,Ue,0),ke.wnext=Ue,ke.whave=ke.wsize):(ke.wnext+=Tt,ke.wnext===ke.wsize&&(ke.wnext=0),ke.whave<ke.wsize&&(ke.whave+=Tt))),0}p.inflateReset=re,p.inflateReset2=ne,p.inflateResetKeep=X,p.inflateInit=function(le){return ae(le,15)},p.inflateInit2=ae,p.inflate=function(le,Ae){var Y,Ue,Tt,ke,Te,je,wt,ue,he,qe,Ze,ot,ze,Zt,bt,Kt,cn,In,Cn,Er,J,at,st,we,be=0,He=new f.Buf8(4),xt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!le||!le.state||!le.output||!le.input&&le.avail_in!==0)return k;(Y=le.state).mode===12&&(Y.mode=13),Te=le.next_out,Tt=le.output,wt=le.avail_out,ke=le.next_in,Ue=le.input,je=le.avail_in,ue=Y.hold,he=Y.bits,qe=je,Ze=wt,at=A;e:for(;;)switch(Y.mode){case D:if(Y.wrap===0){Y.mode=13;break}for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(2&Y.wrap&&ue===35615){He[Y.check=0]=255&ue,He[1]=ue>>>8&255,Y.check=y(Y.check,He,2,0),he=ue=0,Y.mode=2;break}if(Y.flags=0,Y.head&&(Y.head.done=!1),!(1&Y.wrap)||(((255&ue)<<8)+(ue>>8))%31){le.msg="incorrect header check",Y.mode=30;break}if((15&ue)!=8){le.msg="unknown compression method",Y.mode=30;break}if(he-=4,J=8+(15&(ue>>>=4)),Y.wbits===0)Y.wbits=J;else if(J>Y.wbits){le.msg="invalid window size",Y.mode=30;break}Y.dmax=1<<J,le.adler=Y.check=1,Y.mode=512&ue?10:12,he=ue=0;break;case 2:for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(Y.flags=ue,(255&Y.flags)!=8){le.msg="unknown compression method",Y.mode=30;break}if(57344&Y.flags){le.msg="unknown header flags set",Y.mode=30;break}Y.head&&(Y.head.text=ue>>8&1),512&Y.flags&&(He[0]=255&ue,He[1]=ue>>>8&255,Y.check=y(Y.check,He,2,0)),he=ue=0,Y.mode=3;case 3:for(;he<32;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.head&&(Y.head.time=ue),512&Y.flags&&(He[0]=255&ue,He[1]=ue>>>8&255,He[2]=ue>>>16&255,He[3]=ue>>>24&255,Y.check=y(Y.check,He,4,0)),he=ue=0,Y.mode=4;case 4:for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.head&&(Y.head.xflags=255&ue,Y.head.os=ue>>8),512&Y.flags&&(He[0]=255&ue,He[1]=ue>>>8&255,Y.check=y(Y.check,He,2,0)),he=ue=0,Y.mode=5;case 5:if(1024&Y.flags){for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.length=ue,Y.head&&(Y.head.extra_len=ue),512&Y.flags&&(He[0]=255&ue,He[1]=ue>>>8&255,Y.check=y(Y.check,He,2,0)),he=ue=0}else Y.head&&(Y.head.extra=null);Y.mode=6;case 6:if(1024&Y.flags&&(je<(ot=Y.length)&&(ot=je),ot&&(Y.head&&(J=Y.head.extra_len-Y.length,Y.head.extra||(Y.head.extra=new Array(Y.head.extra_len)),f.arraySet(Y.head.extra,Ue,ke,ot,J)),512&Y.flags&&(Y.check=y(Y.check,Ue,ot,ke)),je-=ot,ke+=ot,Y.length-=ot),Y.length))break e;Y.length=0,Y.mode=7;case 7:if(2048&Y.flags){if(je===0)break e;for(ot=0;J=Ue[ke+ot++],Y.head&&J&&Y.length<65536&&(Y.head.name+=String.fromCharCode(J)),J&&ot<je;);if(512&Y.flags&&(Y.check=y(Y.check,Ue,ot,ke)),je-=ot,ke+=ot,J)break e}else Y.head&&(Y.head.name=null);Y.length=0,Y.mode=8;case 8:if(4096&Y.flags){if(je===0)break e;for(ot=0;J=Ue[ke+ot++],Y.head&&J&&Y.length<65536&&(Y.head.comment+=String.fromCharCode(J)),J&&ot<je;);if(512&Y.flags&&(Y.check=y(Y.check,Ue,ot,ke)),je-=ot,ke+=ot,J)break e}else Y.head&&(Y.head.comment=null);Y.mode=9;case 9:if(512&Y.flags){for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(ue!==(65535&Y.check)){le.msg="header crc mismatch",Y.mode=30;break}he=ue=0}Y.head&&(Y.head.hcrc=Y.flags>>9&1,Y.head.done=!0),le.adler=Y.check=0,Y.mode=12;break;case 10:for(;he<32;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}le.adler=Y.check=V(ue),he=ue=0,Y.mode=11;case 11:if(Y.havedict===0)return le.next_out=Te,le.avail_out=wt,le.next_in=ke,le.avail_in=je,Y.hold=ue,Y.bits=he,2;le.adler=Y.check=1,Y.mode=12;case 12:if(Ae===5||Ae===6)break e;case 13:if(Y.last){ue>>>=7&he,he-=7&he,Y.mode=27;break}for(;he<3;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}switch(Y.last=1&ue,he-=1,3&(ue>>>=1)){case 0:Y.mode=14;break;case 1:if(Ie(Y),Y.mode=20,Ae!==6)break;ue>>>=2,he-=2;break e;case 2:Y.mode=17;break;case 3:le.msg="invalid block type",Y.mode=30}ue>>>=2,he-=2;break;case 14:for(ue>>>=7&he,he-=7&he;he<32;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if((65535&ue)!=(ue>>>16^65535)){le.msg="invalid stored block lengths",Y.mode=30;break}if(Y.length=65535&ue,he=ue=0,Y.mode=15,Ae===6)break e;case 15:Y.mode=16;case 16:if(ot=Y.length){if(je<ot&&(ot=je),wt<ot&&(ot=wt),ot===0)break e;f.arraySet(Tt,Ue,ke,ot,Te),je-=ot,ke+=ot,wt-=ot,Te+=ot,Y.length-=ot;break}Y.mode=12;break;case 17:for(;he<14;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(Y.nlen=257+(31&ue),ue>>>=5,he-=5,Y.ndist=1+(31&ue),ue>>>=5,he-=5,Y.ncode=4+(15&ue),ue>>>=4,he-=4,286<Y.nlen||30<Y.ndist){le.msg="too many length or distance symbols",Y.mode=30;break}Y.have=0,Y.mode=18;case 18:for(;Y.have<Y.ncode;){for(;he<3;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.lens[xt[Y.have++]]=7&ue,ue>>>=3,he-=3}for(;Y.have<19;)Y.lens[xt[Y.have++]]=0;if(Y.lencode=Y.lendyn,Y.lenbits=7,st={bits:Y.lenbits},at=S(0,Y.lens,0,19,Y.lencode,0,Y.work,st),Y.lenbits=st.bits,at){le.msg="invalid code lengths set",Y.mode=30;break}Y.have=0,Y.mode=19;case 19:for(;Y.have<Y.nlen+Y.ndist;){for(;Kt=(be=Y.lencode[ue&(1<<Y.lenbits)-1])>>>16&255,cn=65535&be,!((bt=be>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(cn<16)ue>>>=bt,he-=bt,Y.lens[Y.have++]=cn;else{if(cn===16){for(we=bt+2;he<we;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(ue>>>=bt,he-=bt,Y.have===0){le.msg="invalid bit length repeat",Y.mode=30;break}J=Y.lens[Y.have-1],ot=3+(3&ue),ue>>>=2,he-=2}else if(cn===17){for(we=bt+3;he<we;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}he-=bt,J=0,ot=3+(7&(ue>>>=bt)),ue>>>=3,he-=3}else{for(we=bt+7;he<we;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}he-=bt,J=0,ot=11+(127&(ue>>>=bt)),ue>>>=7,he-=7}if(Y.have+ot>Y.nlen+Y.ndist){le.msg="invalid bit length repeat",Y.mode=30;break}for(;ot--;)Y.lens[Y.have++]=J}}if(Y.mode===30)break;if(Y.lens[256]===0){le.msg="invalid code -- missing end-of-block",Y.mode=30;break}if(Y.lenbits=9,st={bits:Y.lenbits},at=S(M,Y.lens,0,Y.nlen,Y.lencode,0,Y.work,st),Y.lenbits=st.bits,at){le.msg="invalid literal/lengths set",Y.mode=30;break}if(Y.distbits=6,Y.distcode=Y.distdyn,st={bits:Y.distbits},at=S(R,Y.lens,Y.nlen,Y.ndist,Y.distcode,0,Y.work,st),Y.distbits=st.bits,at){le.msg="invalid distances set",Y.mode=30;break}if(Y.mode=20,Ae===6)break e;case 20:Y.mode=21;case 21:if(6<=je&&258<=wt){le.next_out=Te,le.avail_out=wt,le.next_in=ke,le.avail_in=je,Y.hold=ue,Y.bits=he,w(le,Ze),Te=le.next_out,Tt=le.output,wt=le.avail_out,ke=le.next_in,Ue=le.input,je=le.avail_in,ue=Y.hold,he=Y.bits,Y.mode===12&&(Y.back=-1);break}for(Y.back=0;Kt=(be=Y.lencode[ue&(1<<Y.lenbits)-1])>>>16&255,cn=65535&be,!((bt=be>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(Kt&&!(240&Kt)){for(In=bt,Cn=Kt,Er=cn;Kt=(be=Y.lencode[Er+((ue&(1<<In+Cn)-1)>>In)])>>>16&255,cn=65535&be,!(In+(bt=be>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}ue>>>=In,he-=In,Y.back+=In}if(ue>>>=bt,he-=bt,Y.back+=bt,Y.length=cn,Kt===0){Y.mode=26;break}if(32&Kt){Y.back=-1,Y.mode=12;break}if(64&Kt){le.msg="invalid literal/length code",Y.mode=30;break}Y.extra=15&Kt,Y.mode=22;case 22:if(Y.extra){for(we=Y.extra;he<we;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.length+=ue&(1<<Y.extra)-1,ue>>>=Y.extra,he-=Y.extra,Y.back+=Y.extra}Y.was=Y.length,Y.mode=23;case 23:for(;Kt=(be=Y.distcode[ue&(1<<Y.distbits)-1])>>>16&255,cn=65535&be,!((bt=be>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(!(240&Kt)){for(In=bt,Cn=Kt,Er=cn;Kt=(be=Y.distcode[Er+((ue&(1<<In+Cn)-1)>>In)])>>>16&255,cn=65535&be,!(In+(bt=be>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}ue>>>=In,he-=In,Y.back+=In}if(ue>>>=bt,he-=bt,Y.back+=bt,64&Kt){le.msg="invalid distance code",Y.mode=30;break}Y.offset=cn,Y.extra=15&Kt,Y.mode=24;case 24:if(Y.extra){for(we=Y.extra;he<we;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.offset+=ue&(1<<Y.extra)-1,ue>>>=Y.extra,he-=Y.extra,Y.back+=Y.extra}if(Y.offset>Y.dmax){le.msg="invalid distance too far back",Y.mode=30;break}Y.mode=25;case 25:if(wt===0)break e;if(ot=Ze-wt,Y.offset>ot){if((ot=Y.offset-ot)>Y.whave&&Y.sane){le.msg="invalid distance too far back",Y.mode=30;break}ze=ot>Y.wnext?(ot-=Y.wnext,Y.wsize-ot):Y.wnext-ot,ot>Y.length&&(ot=Y.length),Zt=Y.window}else Zt=Tt,ze=Te-Y.offset,ot=Y.length;for(wt<ot&&(ot=wt),wt-=ot,Y.length-=ot;Tt[Te++]=Zt[ze++],--ot;);Y.length===0&&(Y.mode=21);break;case 26:if(wt===0)break e;Tt[Te++]=Y.length,wt--,Y.mode=21;break;case 27:if(Y.wrap){for(;he<32;){if(je===0)break e;je--,ue|=Ue[ke++]<<he,he+=8}if(Ze-=wt,le.total_out+=Ze,Y.total+=Ze,Ze&&(le.adler=Y.check=Y.flags?y(Y.check,Tt,Ze,Te-Ze):g(Y.check,Tt,Ze,Te-Ze)),Ze=wt,(Y.flags?ue:V(ue))!==Y.check){le.msg="incorrect data check",Y.mode=30;break}he=ue=0}Y.mode=28;case 28:if(Y.wrap&&Y.flags){for(;he<32;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(ue!==(4294967295&Y.total)){le.msg="incorrect length check",Y.mode=30;break}he=ue=0}Y.mode=29;case 29:at=1;break e;case 30:at=-3;break e;case 31:return-4;case 32:default:return k}return le.next_out=Te,le.avail_out=wt,le.next_in=ke,le.avail_in=je,Y.hold=ue,Y.bits=he,(Y.wsize||Ze!==le.avail_out&&Y.mode<30&&(Y.mode<27||Ae!==4))&&Qe(le,le.output,le.next_out,Ze-le.avail_out)?(Y.mode=31,-4):(qe-=le.avail_in,Ze-=le.avail_out,le.total_in+=qe,le.total_out+=Ze,Y.total+=Ze,Y.wrap&&Ze&&(le.adler=Y.check=Y.flags?y(Y.check,Tt,Ze,le.next_out-Ze):g(Y.check,Tt,Ze,le.next_out-Ze)),le.data_type=Y.bits+(Y.last?64:0)+(Y.mode===12?128:0)+(Y.mode===20||Y.mode===15?256:0),(qe==0&&Ze===0||Ae===4)&&at===A&&(at=-5),at)},p.inflateEnd=function(le){if(!le||!le.state)return k;var Ae=le.state;return Ae.window&&(Ae.window=null),le.state=null,A},p.inflateGetHeader=function(le,Ae){var Y;return le&&le.state&&2&(Y=le.state).wrap?((Y.head=Ae).done=!1,A):k},p.inflateSetDictionary=function(le,Ae){var Y,Ue=Ae.length;return le&&le.state?(Y=le.state).wrap!==0&&Y.mode!==11?k:Y.mode===11&&g(1,Ae,Ue,0)!==Y.check?-3:Qe(le,Ae,Ue,Ue)?(Y.mode=31,-4):(Y.havedict=1,A):k},p.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,c,p){var f=a("../utils/common"),g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],S=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];c.exports=function(M,R,A,k,D,O,F,V){var W,X,re,ne,ae,xe,fe,ge,Ie,Qe=V.bits,le=0,Ae=0,Y=0,Ue=0,Tt=0,ke=0,Te=0,je=0,wt=0,ue=0,he=null,qe=0,Ze=new f.Buf16(16),ot=new f.Buf16(16),ze=null,Zt=0;for(le=0;le<=15;le++)Ze[le]=0;for(Ae=0;Ae<k;Ae++)Ze[R[A+Ae]]++;for(Tt=Qe,Ue=15;1<=Ue&&Ze[Ue]===0;Ue--);if(Ue<Tt&&(Tt=Ue),Ue===0)return D[O++]=20971520,D[O++]=20971520,V.bits=1,0;for(Y=1;Y<Ue&&Ze[Y]===0;Y++);for(Tt<Y&&(Tt=Y),le=je=1;le<=15;le++)if(je<<=1,(je-=Ze[le])<0)return-1;if(0<je&&(M===0||Ue!==1))return-1;for(ot[1]=0,le=1;le<15;le++)ot[le+1]=ot[le]+Ze[le];for(Ae=0;Ae<k;Ae++)R[A+Ae]!==0&&(F[ot[R[A+Ae]]++]=Ae);if(xe=M===0?(he=ze=F,19):M===1?(he=g,qe-=257,ze=y,Zt-=257,256):(he=w,ze=S,-1),le=Y,ae=O,Te=Ae=ue=0,re=-1,ne=(wt=1<<(ke=Tt))-1,M===1&&852<wt||M===2&&592<wt)return 1;for(;;){for(fe=le-Te,Ie=F[Ae]<xe?(ge=0,F[Ae]):F[Ae]>xe?(ge=ze[Zt+F[Ae]],he[qe+F[Ae]]):(ge=96,0),W=1<<le-Te,Y=X=1<<ke;D[ae+(ue>>Te)+(X-=W)]=fe<<24|ge<<16|Ie|0,X!==0;);for(W=1<<le-1;ue&W;)W>>=1;if(W!==0?(ue&=W-1,ue+=W):ue=0,Ae++,--Ze[le]==0){if(le===Ue)break;le=R[A+F[Ae]]}if(Tt<le&&(ue&ne)!==re){for(Te===0&&(Te=Tt),ae+=Y,je=1<<(ke=le-Te);ke+Te<Ue&&!((je-=Ze[ke+Te])<=0);)ke++,je<<=1;if(wt+=1<<ke,M===1&&852<wt||M===2&&592<wt)return 1;D[re=ue&ne]=Tt<<24|ke<<16|ae-O|0}}return ue!==0&&(D[ae+ue]=le-Te<<24|64<<16|0),V.bits=Tt,0}},{"../utils/common":41}],51:[function(a,c,p){c.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,c,p){var f=a("../utils/common"),g=0,y=1;function w(be){for(var He=be.length;0<=--He;)be[He]=0}var S=0,M=29,R=256,A=R+1+M,k=30,D=19,O=2*A+1,F=15,V=16,W=7,X=256,re=16,ne=17,ae=18,xe=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],fe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Qe=new Array(2*(A+2));w(Qe);var le=new Array(2*k);w(le);var Ae=new Array(512);w(Ae);var Y=new Array(256);w(Y);var Ue=new Array(M);w(Ue);var Tt,ke,Te,je=new Array(k);function wt(be,He,xt,Ct,Xe){this.static_tree=be,this.extra_bits=He,this.extra_base=xt,this.elems=Ct,this.max_length=Xe,this.has_stree=be&&be.length}function ue(be,He){this.dyn_tree=be,this.max_code=0,this.stat_desc=He}function he(be){return be<256?Ae[be]:Ae[256+(be>>>7)]}function qe(be,He){be.pending_buf[be.pending++]=255&He,be.pending_buf[be.pending++]=He>>>8&255}function Ze(be,He,xt){be.bi_valid>V-xt?(be.bi_buf|=He<<be.bi_valid&65535,qe(be,be.bi_buf),be.bi_buf=He>>V-be.bi_valid,be.bi_valid+=xt-V):(be.bi_buf|=He<<be.bi_valid&65535,be.bi_valid+=xt)}function ot(be,He,xt){Ze(be,xt[2*He],xt[2*He+1])}function ze(be,He){for(var xt=0;xt|=1&be,be>>>=1,xt<<=1,0<--He;);return xt>>>1}function Zt(be,He,xt){var Ct,Xe,At=new Array(F+1),Et=0;for(Ct=1;Ct<=F;Ct++)At[Ct]=Et=Et+xt[Ct-1]<<1;for(Xe=0;Xe<=He;Xe++){var Pt=be[2*Xe+1];Pt!==0&&(be[2*Xe]=ze(At[Pt]++,Pt))}}function bt(be){var He;for(He=0;He<A;He++)be.dyn_ltree[2*He]=0;for(He=0;He<k;He++)be.dyn_dtree[2*He]=0;for(He=0;He<D;He++)be.bl_tree[2*He]=0;be.dyn_ltree[2*X]=1,be.opt_len=be.static_len=0,be.last_lit=be.matches=0}function Kt(be){8<be.bi_valid?qe(be,be.bi_buf):0<be.bi_valid&&(be.pending_buf[be.pending++]=be.bi_buf),be.bi_buf=0,be.bi_valid=0}function cn(be,He,xt,Ct){var Xe=2*He,At=2*xt;return be[Xe]<be[At]||be[Xe]===be[At]&&Ct[He]<=Ct[xt]}function In(be,He,xt){for(var Ct=be.heap[xt],Xe=xt<<1;Xe<=be.heap_len&&(Xe<be.heap_len&&cn(He,be.heap[Xe+1],be.heap[Xe],be.depth)&&Xe++,!cn(He,Ct,be.heap[Xe],be.depth));)be.heap[xt]=be.heap[Xe],xt=Xe,Xe<<=1;be.heap[xt]=Ct}function Cn(be,He,xt){var Ct,Xe,At,Et,Pt=0;if(be.last_lit!==0)for(;Ct=be.pending_buf[be.d_buf+2*Pt]<<8|be.pending_buf[be.d_buf+2*Pt+1],Xe=be.pending_buf[be.l_buf+Pt],Pt++,Ct===0?ot(be,Xe,He):(ot(be,(At=Y[Xe])+R+1,He),(Et=xe[At])!==0&&Ze(be,Xe-=Ue[At],Et),ot(be,At=he(--Ct),xt),(Et=fe[At])!==0&&Ze(be,Ct-=je[At],Et)),Pt<be.last_lit;);ot(be,X,He)}function Er(be,He){var xt,Ct,Xe,At=He.dyn_tree,Et=He.stat_desc.static_tree,Pt=He.stat_desc.has_stree,_n=He.stat_desc.elems,gr=-1;for(be.heap_len=0,be.heap_max=O,xt=0;xt<_n;xt++)At[2*xt]!==0?(be.heap[++be.heap_len]=gr=xt,be.depth[xt]=0):At[2*xt+1]=0;for(;be.heap_len<2;)At[2*(Xe=be.heap[++be.heap_len]=gr<2?++gr:0)]=1,be.depth[Xe]=0,be.opt_len--,Pt&&(be.static_len-=Et[2*Xe+1]);for(He.max_code=gr,xt=be.heap_len>>1;1<=xt;xt--)In(be,At,xt);for(Xe=_n;xt=be.heap[1],be.heap[1]=be.heap[be.heap_len--],In(be,At,1),Ct=be.heap[1],be.heap[--be.heap_max]=xt,be.heap[--be.heap_max]=Ct,At[2*Xe]=At[2*xt]+At[2*Ct],be.depth[Xe]=(be.depth[xt]>=be.depth[Ct]?be.depth[xt]:be.depth[Ct])+1,At[2*xt+1]=At[2*Ct+1]=Xe,be.heap[1]=Xe++,In(be,At,1),2<=be.heap_len;);be.heap[--be.heap_max]=be.heap[1],function(Hn,Ko){var Wp,ls,gu,Pi,zv,hb,yu=Ko.dyn_tree,pb=Ko.max_code,cE=Ko.stat_desc.static_tree,dE=Ko.stat_desc.has_stree,hE=Ko.stat_desc.extra_bits,fb=Ko.stat_desc.extra_base,bl=Ko.stat_desc.max_length,bu=0;for(Pi=0;Pi<=F;Pi++)Hn.bl_count[Pi]=0;for(yu[2*Hn.heap[Hn.heap_max]+1]=0,Wp=Hn.heap_max+1;Wp<O;Wp++)bl<(Pi=yu[2*yu[2*(ls=Hn.heap[Wp])+1]+1]+1)&&(Pi=bl,bu++),yu[2*ls+1]=Pi,pb<ls||(Hn.bl_count[Pi]++,zv=0,fb<=ls&&(zv=hE[ls-fb]),hb=yu[2*ls],Hn.opt_len+=hb*(Pi+zv),dE&&(Hn.static_len+=hb*(cE[2*ls+1]+zv)));if(bu!==0){do{for(Pi=bl-1;Hn.bl_count[Pi]===0;)Pi--;Hn.bl_count[Pi]--,Hn.bl_count[Pi+1]+=2,Hn.bl_count[bl]--,bu-=2}while(0<bu);for(Pi=bl;Pi!==0;Pi--)for(ls=Hn.bl_count[Pi];ls!==0;)pb<(gu=Hn.heap[--Wp])||(yu[2*gu+1]!==Pi&&(Hn.opt_len+=(Pi-yu[2*gu+1])*yu[2*gu],yu[2*gu+1]=Pi),ls--)}}(be,He),Zt(At,gr,be.bl_count)}function J(be,He,xt){var Ct,Xe,At=-1,Et=He[1],Pt=0,_n=7,gr=4;for(Et===0&&(_n=138,gr=3),He[2*(xt+1)+1]=65535,Ct=0;Ct<=xt;Ct++)Xe=Et,Et=He[2*(Ct+1)+1],++Pt<_n&&Xe===Et||(Pt<gr?be.bl_tree[2*Xe]+=Pt:Xe!==0?(Xe!==At&&be.bl_tree[2*Xe]++,be.bl_tree[2*re]++):Pt<=10?be.bl_tree[2*ne]++:be.bl_tree[2*ae]++,At=Xe,gr=(Pt=0)===Et?(_n=138,3):Xe===Et?(_n=6,3):(_n=7,4))}function at(be,He,xt){var Ct,Xe,At=-1,Et=He[1],Pt=0,_n=7,gr=4;for(Et===0&&(_n=138,gr=3),Ct=0;Ct<=xt;Ct++)if(Xe=Et,Et=He[2*(Ct+1)+1],!(++Pt<_n&&Xe===Et)){if(Pt<gr)for(;ot(be,Xe,be.bl_tree),--Pt!=0;);else Xe!==0?(Xe!==At&&(ot(be,Xe,be.bl_tree),Pt--),ot(be,re,be.bl_tree),Ze(be,Pt-3,2)):Pt<=10?(ot(be,ne,be.bl_tree),Ze(be,Pt-3,3)):(ot(be,ae,be.bl_tree),Ze(be,Pt-11,7));At=Xe,gr=(Pt=0)===Et?(_n=138,3):Xe===Et?(_n=6,3):(_n=7,4)}}w(je);var st=!1;function we(be,He,xt,Ct){Ze(be,(S<<1)+(Ct?1:0),3),function(Xe,At,Et,Pt){Kt(Xe),Pt&&(qe(Xe,Et),qe(Xe,~Et)),f.arraySet(Xe.pending_buf,Xe.window,At,Et,Xe.pending),Xe.pending+=Et}(be,He,xt,!0)}p._tr_init=function(be){st||(function(){var He,xt,Ct,Xe,At,Et=new Array(F+1);for(Xe=Ct=0;Xe<M-1;Xe++)for(Ue[Xe]=Ct,He=0;He<1<<xe[Xe];He++)Y[Ct++]=Xe;for(Y[Ct-1]=Xe,Xe=At=0;Xe<16;Xe++)for(je[Xe]=At,He=0;He<1<<fe[Xe];He++)Ae[At++]=Xe;for(At>>=7;Xe<k;Xe++)for(je[Xe]=At<<7,He=0;He<1<<fe[Xe]-7;He++)Ae[256+At++]=Xe;for(xt=0;xt<=F;xt++)Et[xt]=0;for(He=0;He<=143;)Qe[2*He+1]=8,He++,Et[8]++;for(;He<=255;)Qe[2*He+1]=9,He++,Et[9]++;for(;He<=279;)Qe[2*He+1]=7,He++,Et[7]++;for(;He<=287;)Qe[2*He+1]=8,He++,Et[8]++;for(Zt(Qe,A+1,Et),He=0;He<k;He++)le[2*He+1]=5,le[2*He]=ze(He,5);Tt=new wt(Qe,xe,R+1,A,F),ke=new wt(le,fe,0,k,F),Te=new wt(new Array(0),ge,0,D,W)}(),st=!0),be.l_desc=new ue(be.dyn_ltree,Tt),be.d_desc=new ue(be.dyn_dtree,ke),be.bl_desc=new ue(be.bl_tree,Te),be.bi_buf=0,be.bi_valid=0,bt(be)},p._tr_stored_block=we,p._tr_flush_block=function(be,He,xt,Ct){var Xe,At,Et=0;0<be.level?(be.strm.data_type===2&&(be.strm.data_type=function(Pt){var _n,gr=4093624447;for(_n=0;_n<=31;_n++,gr>>>=1)if(1&gr&&Pt.dyn_ltree[2*_n]!==0)return g;if(Pt.dyn_ltree[18]!==0||Pt.dyn_ltree[20]!==0||Pt.dyn_ltree[26]!==0)return y;for(_n=32;_n<R;_n++)if(Pt.dyn_ltree[2*_n]!==0)return y;return g}(be)),Er(be,be.l_desc),Er(be,be.d_desc),Et=function(Pt){var _n;for(J(Pt,Pt.dyn_ltree,Pt.l_desc.max_code),J(Pt,Pt.dyn_dtree,Pt.d_desc.max_code),Er(Pt,Pt.bl_desc),_n=D-1;3<=_n&&Pt.bl_tree[2*Ie[_n]+1]===0;_n--);return Pt.opt_len+=3*(_n+1)+5+5+4,_n}(be),Xe=be.opt_len+3+7>>>3,(At=be.static_len+3+7>>>3)<=Xe&&(Xe=At)):Xe=At=xt+5,xt+4<=Xe&&He!==-1?we(be,He,xt,Ct):be.strategy===4||At===Xe?(Ze(be,2+(Ct?1:0),3),Cn(be,Qe,le)):(Ze(be,4+(Ct?1:0),3),function(Pt,_n,gr,Hn){var Ko;for(Ze(Pt,_n-257,5),Ze(Pt,gr-1,5),Ze(Pt,Hn-4,4),Ko=0;Ko<Hn;Ko++)Ze(Pt,Pt.bl_tree[2*Ie[Ko]+1],3);at(Pt,Pt.dyn_ltree,_n-1),at(Pt,Pt.dyn_dtree,gr-1)}(be,be.l_desc.max_code+1,be.d_desc.max_code+1,Et+1),Cn(be,be.dyn_ltree,be.dyn_dtree)),bt(be),Ct&&Kt(be)},p._tr_tally=function(be,He,xt){return be.pending_buf[be.d_buf+2*be.last_lit]=He>>>8&255,be.pending_buf[be.d_buf+2*be.last_lit+1]=255&He,be.pending_buf[be.l_buf+be.last_lit]=255&xt,be.last_lit++,He===0?be.dyn_ltree[2*xt]++:(be.matches++,He--,be.dyn_ltree[2*(Y[xt]+R+1)]++,be.dyn_dtree[2*he(He)]++),be.last_lit===be.lit_bufsize-1},p._tr_align=function(be){Ze(be,2,3),ot(be,X,Qe),function(He){He.bi_valid===16?(qe(He,He.bi_buf),He.bi_buf=0,He.bi_valid=0):8<=He.bi_valid&&(He.pending_buf[He.pending++]=255&He.bi_buf,He.bi_buf>>=8,He.bi_valid-=8)}(be)}},{"../utils/common":41}],53:[function(a,c,p){c.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,c,p){(function(f){(function(g,y){if(!g.setImmediate){var w,S,M,R,A=1,k={},D=!1,O=g.document,F=Object.getPrototypeOf&&Object.getPrototypeOf(g);F=F&&F.setTimeout?F:g,w={}.toString.call(g.process)==="[object process]"?function(re){process.nextTick(function(){W(re)})}:function(){if(g.postMessage&&!g.importScripts){var re=!0,ne=g.onmessage;return g.onmessage=function(){re=!1},g.postMessage("","*"),g.onmessage=ne,re}}()?(R="setImmediate$"+Math.random()+"$",g.addEventListener?g.addEventListener("message",X,!1):g.attachEvent("onmessage",X),function(re){g.postMessage(R+re,"*")}):g.MessageChannel?((M=new MessageChannel).port1.onmessage=function(re){W(re.data)},function(re){M.port2.postMessage(re)}):O&&"onreadystatechange"in O.createElement("script")?(S=O.documentElement,function(re){var ne=O.createElement("script");ne.onreadystatechange=function(){W(re),ne.onreadystatechange=null,S.removeChild(ne),ne=null},S.appendChild(ne)}):function(re){setTimeout(W,0,re)},F.setImmediate=function(re){typeof re!="function"&&(re=new Function(""+re));for(var ne=new Array(arguments.length-1),ae=0;ae<ne.length;ae++)ne[ae]=arguments[ae+1];var xe={callback:re,args:ne};return k[A]=xe,w(A),A++},F.clearImmediate=V}function V(re){delete k[re]}function W(re){if(D)setTimeout(W,0,re);else{var ne=k[re];if(ne){D=!0;try{(function(ae){var xe=ae.callback,fe=ae.args;switch(fe.length){case 0:xe();break;case 1:xe(fe[0]);break;case 2:xe(fe[0],fe[1]);break;case 3:xe(fe[0],fe[1],fe[2]);break;default:xe.apply(y,fe)}})(ne)}finally{V(re),D=!1}}}}function X(re){re.source===g&&typeof re.data=="string"&&re.data.indexOf(R)===0&&W(+re.data.slice(R.length))}})(typeof self>"u"?f===void 0?this:f:self)}).call(this,typeof Ai<"u"?Ai:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}),CU,iI,oJ,PU,sJ,aJ,SS,lJ,kU,uJ,oI,ES,CS,Tp,cJ,dJ,hJ,Hy,na,pJ,fJ,TU,sI,Cke=C(()=>{CU=Q(Re(),1),iI=Q(Re(),1),oJ=i=>typeof i=="function",PU=(i,s)=>oJ(i)?i(s):i,sJ=(()=>{let i=0;return()=>(++i).toString()})(),aJ=20,SS=new Map,lJ=1e3,kU=i=>{if(SS.has(i))return;let s=setTimeout(()=>{SS.delete(i),Tp({type:4,toastId:i})},lJ);SS.set(i,s)},uJ=i=>{let s=SS.get(i);s&&clearTimeout(s)},oI=(i,s)=>{switch(s.type){case 0:return z(j({},i),{toasts:[s.toast,...i.toasts].slice(0,aJ)});case 1:return s.toast.id&&uJ(s.toast.id),z(j({},i),{toasts:i.toasts.map(f=>f.id===s.toast.id?j(j({},f),s.toast):f)});case 2:let{toast:a}=s;return i.toasts.find(f=>f.id===a.id)?oI(i,{type:1,toast:a}):oI(i,{type:0,toast:a});case 3:let{toastId:c}=s;return c?kU(c):i.toasts.forEach(f=>{kU(f.id)}),z(j({},i),{toasts:i.toasts.map(f=>f.id===c||c===void 0?z(j({},f),{visible:!1}):f)});case 4:return s.toastId===void 0?z(j({},i),{toasts:[]}):z(j({},i),{toasts:i.toasts.filter(f=>f.id!==s.toastId)});case 5:return z(j({},i),{pausedAt:s.time});case 6:let p=s.time-(i.pausedAt||0);return z(j({},i),{pausedAt:void 0,toasts:i.toasts.map(f=>z(j({},f),{pauseDuration:f.pauseDuration+p}))})}},ES=[],CS={toasts:[],pausedAt:void 0},Tp=i=>{CS=oI(CS,i),ES.forEach(s=>{s(CS)})},cJ={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},dJ=(i={})=>{let[s,a]=(0,CU.useState)(CS);(0,CU.useEffect)(()=>(ES.push(a),()=>{let p=ES.indexOf(a);p>-1&&ES.splice(p,1)}),[s]);let c=s.toasts.map(p=>{var f,g;return z(j(j(j({},i),i[p.type]),p),{duration:p.duration||((f=i[p.type])==null?void 0:f.duration)||(i==null?void 0:i.duration)||cJ[p.type],style:j(j(j({},i.style),(g=i[p.type])==null?void 0:g.style),p.style)})});return z(j({},s),{toasts:c})},hJ=(i,s="blank",a)=>z(j({createdAt:Date.now(),visible:!0,type:s,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0},a),{id:(a==null?void 0:a.id)||sJ()}),Hy=i=>(s,a)=>{let c=hJ(s,i,a);return Tp({type:2,toast:c}),c.id},na=(i,s)=>Hy("blank")(i,s),na.error=Hy("error"),na.success=Hy("success"),na.loading=Hy("loading"),na.custom=Hy("custom"),na.dismiss=i=>{Tp({type:3,toastId:i})},na.remove=i=>Tp({type:4,toastId:i}),na.promise=(i,s,a)=>{let c=na.loading(s.loading,j(j({},a),a==null?void 0:a.loading));return i.then(p=>(na.success(PU(s.success,p),j(j({id:c},a),a==null?void 0:a.success)),p)).catch(p=>{na.error(PU(s.error,p),j(j({id:c},a),a==null?void 0:a.error))}),i},pJ=(i,s)=>{Tp({type:1,toast:{id:i,height:s}})},fJ=()=>{Tp({type:5,time:Date.now()})},TU=i=>{let{toasts:s,pausedAt:a}=dJ(i);(0,iI.useEffect)(()=>{if(a)return;let f=Date.now(),g=s.map(y=>{if(y.duration===1/0)return;let w=(y.duration||0)+y.pauseDuration-(f-y.createdAt);if(w<0){y.visible&&na.dismiss(y.id);return}return setTimeout(()=>na.dismiss(y.id),w)});return()=>{g.forEach(y=>y&&clearTimeout(y))}},[s,a]);let c=(0,iI.useCallback)(()=>{a&&Tp({type:6,time:Date.now()})},[a]),p=(0,iI.useCallback)((f,g)=>{let{reverseOrder:y=!1,gutter:w=8,defaultPosition:S}=g||{},M=s.filter(k=>(k.position||S)===(f.position||S)&&k.height),R=M.findIndex(k=>k.id===f.id),A=M.filter((k,D)=>D<R&&k.visible).length;return M.filter(k=>k.visible).slice(...y?[A+1]:[0,A]).reduce((k,D)=>k+(D.height||0)+w,0)},[s]);return{toasts:s,handlers:{updateHeight:pJ,startPause:fJ,endPause:c,calculateOffset:p}}},sI=na});function mJ(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function Pke(i){dv=i}function Eo(i,s){if(s){if(SJ.test(i))return i.replace(EJ,MU)}else if(CJ.test(i))return i.replace(PJ,MU);return i}function vJ(i){return i.replace(TJ,(s,a)=>(a=a.toLowerCase(),a==="colon"?":":a.charAt(0)==="#"?a.charAt(1)==="x"?String.fromCharCode(parseInt(a.substring(2),16)):String.fromCharCode(+a.substring(1)):""))}function Jr(i,s){i=typeof i=="string"?i:i.source,s=s||"";let a={replace:(c,p)=>(p=p.source||p,p=p.replace(MJ,"$1"),i=i.replace(c,p),a),getRegex:()=>new RegExp(i,s)};return a}function gJ(i,s,a){if(i){let c;try{c=decodeURIComponent(vJ(a)).replace(AJ,"").toLowerCase()}catch{return null}if(c.indexOf("javascript:")===0||c.indexOf("vbscript:")===0||c.indexOf("data:")===0)return null}s&&!IJ.test(a)&&(a=kke(s,a));try{a=encodeURI(a).replace(/%25/g,"%")}catch{return null}return a}function kke(i,s){PS[" "+i]||(RJ.test(i)?PS[" "+i]=i+"/":PS[" "+i]=aI(i,"/",!0)),i=PS[" "+i];let a=i.indexOf(":")===-1;return s.substring(0,2)==="//"?a?s:i.replace(OJ,"$1")+s:s.charAt(0)==="/"?a?s:i.replace(DJ,"$1")+s:i+s}function uu(i){let s=1,a,c;for(;s<arguments.length;s++){a=arguments[s];for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])}return i}function yJ(i,s){let a=i.replace(/\|/g,(f,g,y)=>{let w=!1,S=g;for(;--S>=0&&y[S]==="\\";)w=!w;return w?"|":" |"}),c=a.split(/ \|/),p=0;if(c[0].trim()||c.shift(),c.length>0&&!c[c.length-1].trim()&&c.pop(),c.length>s)c.splice(s);else for(;c.length<s;)c.push("");for(;p<c.length;p++)c[p]=c[p].trim().replace(/\\\|/g,"|");return c}function aI(i,s,a){let c=i.length;if(c===0)return"";let p=0;for(;p<c;){let f=i.charAt(c-p-1);if(f===s&&!a)p++;else if(f!==s&&a)p++;else break}return i.slice(0,c-p)}function Tke(i,s){if(i.indexOf(s[1])===-1)return-1;let a=i.length,c=0,p=0;for(;p<a;p++)if(i[p]==="\\")p++;else if(i[p]===s[0])c++;else if(i[p]===s[1]&&(c--,c<0))return p;return-1}function bJ(i){i&&i.sanitize&&!i.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function _J(i,s){if(s<1)return"";let a="";for(;s>1;)s&1&&(a+=i),s>>=1,i+=i;return a+i}function wJ(i,s,a,c){let p=s.href,f=s.title?Eo(s.title):null,g=i[1].replace(/\\([\[\]])/g,"$1");if(i[0].charAt(0)!=="!"){c.state.inLink=!0;let y={type:"link",raw:a,href:p,title:f,text:g,tokens:c.inlineTokens(g)};return c.state.inLink=!1,y}return{type:"image",raw:a,href:p,title:f,text:Eo(g)}}function Mke(i,s){let a=i.match(/^(\s+)(?:```)/);if(a===null)return s;let c=a[1];return s.split(`
`).map(p=>{let f=p.match(/^\s+/);if(f===null)return p;let[g]=f;return g.length>=c.length?p.slice(c.length):p}).join(`
`)}function Ake(i){return i.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function xJ(i){let s="",a,c,p=i.length;for(a=0;a<p;a++)c=i.charCodeAt(a),Math.random()>.5&&(c="x"+c.toString(16)),s+="&#"+c+";";return s}function Vn(i,s,a){if(typeof i>"u"||i===null)throw new Error("marked(): input parameter is undefined or null");if(typeof i!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected");if(typeof s=="function"&&(a=s,s=null),s=uu({},Vn.defaults,s||{}),bJ(s),a){let p=s.highlight,f;try{f=hv.lex(i,s)}catch(w){return a(w)}let g=function(w){let S;if(!w)try{s.walkTokens&&Vn.walkTokens(f,s.walkTokens),S=Mp.parse(f,s)}catch(M){w=M}return s.highlight=p,w?a(w):a(null,S)};if(!p||p.length<3||(delete s.highlight,!f.length))return g();let y=0;Vn.walkTokens(f,function(w){w.type==="code"&&(y++,setTimeout(()=>{p(w.text,w.lang,function(S,M){if(S)return g(S);M!=null&&M!==w.text&&(w.text=M,w.escaped=!0),y--,y===0&&g()})},0))}),y===0&&g();return}function c(p){if(p.message+=`
Please report this to https://github.com/markedjs/marked.`,s.silent)return"<p>An error occurred:</p><pre>"+Eo(p.message+"",!0)+"</pre>";throw p}try{let p=hv.lex(i,s);if(s.walkTokens){if(s.async)return Promise.all(Vn.walkTokens(p,s.walkTokens)).then(()=>Mp.parse(p,s)).catch(c);Vn.walkTokens(p,s.walkTokens)}return Mp.parse(p,s)}catch(p){c(p)}}var dv,SJ,EJ,CJ,PJ,kJ,MU,TJ,MJ,AJ,IJ,PS,RJ,OJ,DJ,kS,lI,An,sn,hv,uI,AU,IU,Mp,Ike=C(()=>{dv=mJ(),SJ=/[&<>"']/,EJ=/[&<>"']/g,CJ=/[<>"']|&(?!#?\w+;)/,PJ=/[<>"']|&(?!#?\w+;)/g,kJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},MU=i=>kJ[i],TJ=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,MJ=/(^|[^\[])\^/g,AJ=/[^\w:]/g,IJ=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,PS={},RJ=/^[^:]+:\/*[^/]*$/,OJ=/^([^:]+:)[\s\S]*$/,DJ=/^([^:]+:\/*[^/]*)[\s\S]*$/,kS={exec:function(){}},lI=class{constructor(i){this.options=i||dv}space(i){let s=this.rules.block.newline.exec(i);if(s&&s[0].length>0)return{type:"space",raw:s[0]}}code(i){let s=this.rules.block.code.exec(i);if(s){let a=s[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:s[0],codeBlockStyle:"indented",text:this.options.pedantic?a:aI(a,`
`)}}}fences(i){let s=this.rules.block.fences.exec(i);if(s){let a=s[0],c=Mke(a,s[3]||"");return{type:"code",raw:a,lang:s[2]?s[2].trim():s[2],text:c}}}heading(i){let s=this.rules.block.heading.exec(i);if(s){let a=s[2].trim();if(/#$/.test(a)){let c=aI(a,"#");(this.options.pedantic||!c||/ $/.test(c))&&(a=c.trim())}return{type:"heading",raw:s[0],depth:s[1].length,text:a,tokens:this.lexer.inline(a)}}}hr(i){let s=this.rules.block.hr.exec(i);if(s)return{type:"hr",raw:s[0]}}blockquote(i){let s=this.rules.block.blockquote.exec(i);if(s){let a=s[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:s[0],tokens:this.lexer.blockTokens(a,[]),text:a}}}list(i){let s=this.rules.block.list.exec(i);if(s){let a,c,p,f,g,y,w,S,M,R,A,k,D=s[1].trim(),O=D.length>1,F={type:"list",raw:"",ordered:O,start:O?+D.slice(0,-1):"",loose:!1,items:[]};D=O?"\\d{1,9}\\".concat(D.slice(-1)):"\\".concat(D),this.options.pedantic&&(D=O?D:"[*+-]");let V=new RegExp("^( {0,3}".concat(D,")((?:[	 ][^\\n]*)?(?:\\n|$))"));for(;i&&(k=!1,!(!(s=V.exec(i))||this.rules.block.hr.test(i)));){if(a=s[0],i=i.substring(a.length),S=s[2].split(`
`,1)[0],M=i.split(`
`,1)[0],this.options.pedantic?(f=2,A=S.trimLeft()):(f=s[2].search(/[^ ]/),f=f>4?1:f,A=S.slice(f),f+=s[1].length),y=!1,!S&&/^ *$/.test(M)&&(a+=M+`
`,i=i.substring(M.length+1),k=!0),!k){let X=new RegExp("^ {0,".concat(Math.min(3,f-1),"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))")),re=new RegExp("^ {0,".concat(Math.min(3,f-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),ne=new RegExp("^ {0,".concat(Math.min(3,f-1),"}(?:```|~~~)")),ae=new RegExp("^ {0,".concat(Math.min(3,f-1),"}#"));for(;i&&(R=i.split(`
`,1)[0],S=R,this.options.pedantic&&(S=S.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(ne.test(S)||ae.test(S)||X.test(S)||re.test(i)));){if(S.search(/[^ ]/)>=f||!S.trim())A+=`
`+S.slice(f);else if(!y)A+=`
`+S;else break;!y&&!S.trim()&&(y=!0),a+=R+`
`,i=i.substring(R.length+1)}}F.loose||(w?F.loose=!0:/\n *\n *$/.test(a)&&(w=!0)),this.options.gfm&&(c=/^\[[ xX]\] /.exec(A),c&&(p=c[0]!=="[ ] ",A=A.replace(/^\[[ xX]\] +/,""))),F.items.push({type:"list_item",raw:a,task:!!c,checked:p,loose:!1,text:A}),F.raw+=a}F.items[F.items.length-1].raw=a.trimRight(),F.items[F.items.length-1].text=A.trimRight(),F.raw=F.raw.trimRight();let W=F.items.length;for(g=0;g<W;g++){this.lexer.state.top=!1,F.items[g].tokens=this.lexer.blockTokens(F.items[g].text,[]);let X=F.items[g].tokens.filter(ne=>ne.type==="space"),re=X.every(ne=>{let ae=ne.raw.split(""),xe=0;for(let fe of ae)if(fe===`
`&&(xe+=1),xe>1)return!0;return!1});!F.loose&&X.length&&re&&(F.loose=!0,F.items[g].loose=!0)}return F}}html(i){let s=this.rules.block.html.exec(i);if(s){let a={type:"html",raw:s[0],pre:!this.options.sanitizer&&(s[1]==="pre"||s[1]==="script"||s[1]==="style"),text:s[0]};if(this.options.sanitize){let c=this.options.sanitizer?this.options.sanitizer(s[0]):Eo(s[0]);a.type="paragraph",a.text=c,a.tokens=this.lexer.inline(c)}return a}}def(i){let s=this.rules.block.def.exec(i);if(s)return s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),{type:"def",tag:s[1].toLowerCase().replace(/\s+/g," "),raw:s[0],href:s[2],title:s[3]}}table(i){let s=this.rules.block.table.exec(i);if(s){let a={type:"table",header:yJ(s[1]).map(c=>({text:c})),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:s[3]&&s[3].trim()?s[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(a.header.length===a.align.length){a.raw=s[0];let c=a.align.length,p,f,g,y;for(p=0;p<c;p++)/^ *-+: *$/.test(a.align[p])?a.align[p]="right":/^ *:-+: *$/.test(a.align[p])?a.align[p]="center":/^ *:-+ *$/.test(a.align[p])?a.align[p]="left":a.align[p]=null;for(c=a.rows.length,p=0;p<c;p++)a.rows[p]=yJ(a.rows[p],a.header.length).map(w=>({text:w}));for(c=a.header.length,f=0;f<c;f++)a.header[f].tokens=this.lexer.inline(a.header[f].text);for(c=a.rows.length,f=0;f<c;f++)for(y=a.rows[f],g=0;g<y.length;g++)y[g].tokens=this.lexer.inline(y[g].text);return a}}}lheading(i){let s=this.rules.block.lheading.exec(i);if(s)return{type:"heading",raw:s[0],depth:s[2].charAt(0)==="="?1:2,text:s[1],tokens:this.lexer.inline(s[1])}}paragraph(i){let s=this.rules.block.paragraph.exec(i);if(s){let a=s[1].charAt(s[1].length-1)===`
`?s[1].slice(0,-1):s[1];return{type:"paragraph",raw:s[0],text:a,tokens:this.lexer.inline(a)}}}text(i){let s=this.rules.block.text.exec(i);if(s)return{type:"text",raw:s[0],text:s[0],tokens:this.lexer.inline(s[0])}}escape(i){let s=this.rules.inline.escape.exec(i);if(s)return{type:"escape",raw:s[0],text:Eo(s[1])}}tag(i){let s=this.rules.inline.tag.exec(i);if(s)return!this.lexer.state.inLink&&/^<a /i.test(s[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(s[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:s[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):Eo(s[0]):s[0]}}link(i){let s=this.rules.inline.link.exec(i);if(s){let a=s[2].trim();if(!this.options.pedantic&&/^</.test(a)){if(!/>$/.test(a))return;let f=aI(a.slice(0,-1),"\\");if((a.length-f.length)%2===0)return}else{let f=Tke(s[2],"()");if(f>-1){let g=(s[0].indexOf("!")===0?5:4)+s[1].length+f;s[2]=s[2].substring(0,f),s[0]=s[0].substring(0,g).trim(),s[3]=""}}let c=s[2],p="";if(this.options.pedantic){let f=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(c);f&&(c=f[1],p=f[3])}else p=s[3]?s[3].slice(1,-1):"";return c=c.trim(),/^</.test(c)&&(this.options.pedantic&&!/>$/.test(a)?c=c.slice(1):c=c.slice(1,-1)),wJ(s,{href:c&&c.replace(this.rules.inline._escapes,"$1"),title:p&&p.replace(this.rules.inline._escapes,"$1")},s[0],this.lexer)}}reflink(i,s){let a;if((a=this.rules.inline.reflink.exec(i))||(a=this.rules.inline.nolink.exec(i))){let c=(a[2]||a[1]).replace(/\s+/g," ");if(c=s[c.toLowerCase()],!c||!c.href){let p=a[0].charAt(0);return{type:"text",raw:p,text:p}}return wJ(a,c,a[0],this.lexer)}}emStrong(i,s,a=""){let c=this.rules.inline.emStrong.lDelim.exec(i);if(!c||c[3]&&a.match(/[\p{L}\p{N}]/u))return;let p=c[1]||c[2]||"";if(!p||p&&(a===""||this.rules.inline.punctuation.exec(a))){let f=c[0].length-1,g,y,w=f,S=0,M=c[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(M.lastIndex=0,s=s.slice(-1*i.length+f);(c=M.exec(s))!=null;){if(g=c[1]||c[2]||c[3]||c[4]||c[5]||c[6],!g)continue;if(y=g.length,c[3]||c[4]){w+=y;continue}else if((c[5]||c[6])&&f%3&&!((f+y)%3)){S+=y;continue}if(w-=y,w>0)continue;if(y=Math.min(y,y+w+S),Math.min(f,y)%2){let A=i.slice(1,f+c.index+y);return{type:"em",raw:i.slice(0,f+c.index+y+1),text:A,tokens:this.lexer.inlineTokens(A)}}let R=i.slice(2,f+c.index+y-1);return{type:"strong",raw:i.slice(0,f+c.index+y+1),text:R,tokens:this.lexer.inlineTokens(R)}}}}codespan(i){let s=this.rules.inline.code.exec(i);if(s){let a=s[2].replace(/\n/g," "),c=/[^ ]/.test(a),p=/^ /.test(a)&&/ $/.test(a);return c&&p&&(a=a.substring(1,a.length-1)),a=Eo(a,!0),{type:"codespan",raw:s[0],text:a}}}br(i){let s=this.rules.inline.br.exec(i);if(s)return{type:"br",raw:s[0]}}del(i){let s=this.rules.inline.del.exec(i);if(s)return{type:"del",raw:s[0],text:s[2],tokens:this.lexer.inlineTokens(s[2])}}autolink(i,s){let a=this.rules.inline.autolink.exec(i);if(a){let c,p;return a[2]==="@"?(c=Eo(this.options.mangle?s(a[1]):a[1]),p="mailto:"+c):(c=Eo(a[1]),p=c),{type:"link",raw:a[0],text:c,href:p,tokens:[{type:"text",raw:c,text:c}]}}}url(i,s){let a;if(a=this.rules.inline.url.exec(i)){let c,p;if(a[2]==="@")c=Eo(this.options.mangle?s(a[0]):a[0]),p="mailto:"+c;else{let f;do f=a[0],a[0]=this.rules.inline._backpedal.exec(a[0])[0];while(f!==a[0]);c=Eo(a[0]),a[1]==="www."?p="http://"+c:p=c}return{type:"link",raw:a[0],text:c,href:p,tokens:[{type:"text",raw:c,text:c}]}}}inlineText(i,s){let a=this.rules.inline.text.exec(i);if(a){let c;return this.lexer.state.inRawBlock?c=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):Eo(a[0]):a[0]:c=Eo(this.options.smartypants?s(a[0]):a[0]),{type:"text",raw:a[0],text:c}}}},An={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:kS,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/},An._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,An._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,An.def=Jr(An.def).replace("label",An._label).replace("title",An._title).getRegex(),An.bullet=/(?:[*+-]|\d{1,9}[.)])/,An.listItemStart=Jr(/^( *)(bull) */).replace("bull",An.bullet).getRegex(),An.list=Jr(An.list).replace(/bull/g,An.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+An.def.source+")").getRegex(),An._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",An._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,An.html=Jr(An.html,"i").replace("comment",An._comment).replace("tag",An._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),An.paragraph=Jr(An._paragraph).replace("hr",An.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An._tag).getRegex(),An.blockquote=Jr(An.blockquote).replace("paragraph",An.paragraph).getRegex(),An.normal=uu({},An),An.gfm=uu({},An.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),An.gfm.table=Jr(An.gfm.table).replace("hr",An.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An._tag).getRegex(),An.gfm.paragraph=Jr(An._paragraph).replace("hr",An.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",An.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An._tag).getRegex(),An.pedantic=uu({},An.normal,{html:Jr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",An._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:kS,paragraph:Jr(An.normal._paragraph).replace("hr",An.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",An.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),sn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:kS,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:kS,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/},sn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",sn.punctuation=Jr(sn.punctuation).replace(/punctuation/g,sn._punctuation).getRegex(),sn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,sn.escapedEmSt=/\\\*|\\_/g,sn._comment=Jr(An._comment).replace("(?:-->|$)","-->").getRegex(),sn.emStrong.lDelim=Jr(sn.emStrong.lDelim).replace(/punct/g,sn._punctuation).getRegex(),sn.emStrong.rDelimAst=Jr(sn.emStrong.rDelimAst,"g").replace(/punct/g,sn._punctuation).getRegex(),sn.emStrong.rDelimUnd=Jr(sn.emStrong.rDelimUnd,"g").replace(/punct/g,sn._punctuation).getRegex(),sn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,sn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,sn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,sn.autolink=Jr(sn.autolink).replace("scheme",sn._scheme).replace("email",sn._email).getRegex(),sn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,sn.tag=Jr(sn.tag).replace("comment",sn._comment).replace("attribute",sn._attribute).getRegex(),sn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,sn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,sn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,sn.link=Jr(sn.link).replace("label",sn._label).replace("href",sn._href).replace("title",sn._title).getRegex(),sn.reflink=Jr(sn.reflink).replace("label",sn._label).replace("ref",An._label).getRegex(),sn.nolink=Jr(sn.nolink).replace("ref",An._label).getRegex(),sn.reflinkSearch=Jr(sn.reflinkSearch,"g").replace("reflink",sn.reflink).replace("nolink",sn.nolink).getRegex(),sn.normal=uu({},sn),sn.pedantic=uu({},sn.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Jr(/^!?\[(label)\]\((.*?)\)/).replace("label",sn._label).getRegex(),reflink:Jr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",sn._label).getRegex()}),sn.gfm=uu({},sn.normal,{escape:Jr(sn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),sn.gfm.url=Jr(sn.gfm.url,"i").replace("email",sn.gfm._extended_email).getRegex(),sn.breaks=uu({},sn.gfm,{br:Jr(sn.br).replace("{2,}","*").getRegex(),text:Jr(sn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),hv=class LH{constructor(s){this.tokens=[],this.tokens.links=Object.create(null),this.options=s||dv,this.options.tokenizer=this.options.tokenizer||new lI,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let a={block:An.normal,inline:sn.normal};this.options.pedantic?(a.block=An.pedantic,a.inline=sn.pedantic):this.options.gfm&&(a.block=An.gfm,this.options.breaks?a.inline=sn.breaks:a.inline=sn.gfm),this.tokenizer.rules=a}static get rules(){return{block:An,inline:sn}}static lex(s,a){return new LH(a).lex(s)}static lexInline(s,a){return new LH(a).inlineTokens(s)}lex(s){s=s.replace(/\r\n|\r/g,`
`),this.blockTokens(s,this.tokens);let a;for(;a=this.inlineQueue.shift();)this.inlineTokens(a.src,a.tokens);return this.tokens}blockTokens(s,a=[]){this.options.pedantic?s=s.replace(/\t/g,"    ").replace(/^ +$/gm,""):s=s.replace(/^( *)(\t+)/gm,(y,w,S)=>w+"    ".repeat(S.length));let c,p,f,g;for(;s;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(y=>(c=y.call({lexer:this},s,a))?(s=s.substring(c.raw.length),a.push(c),!0):!1))){if(c=this.tokenizer.space(s)){s=s.substring(c.raw.length),c.raw.length===1&&a.length>0?a[a.length-1].raw+=`
`:a.push(c);continue}if(c=this.tokenizer.code(s)){s=s.substring(c.raw.length),p=a[a.length-1],p&&(p.type==="paragraph"||p.type==="text")?(p.raw+=`
`+c.raw,p.text+=`
`+c.text,this.inlineQueue[this.inlineQueue.length-1].src=p.text):a.push(c);continue}if(c=this.tokenizer.fences(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.heading(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.hr(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.blockquote(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.list(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.html(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.def(s)){s=s.substring(c.raw.length),p=a[a.length-1],p&&(p.type==="paragraph"||p.type==="text")?(p.raw+=`
`+c.raw,p.text+=`
`+c.raw,this.inlineQueue[this.inlineQueue.length-1].src=p.text):this.tokens.links[c.tag]||(this.tokens.links[c.tag]={href:c.href,title:c.title});continue}if(c=this.tokenizer.table(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.lheading(s)){s=s.substring(c.raw.length),a.push(c);continue}if(f=s,this.options.extensions&&this.options.extensions.startBlock){let y=1/0,w=s.slice(1),S;this.options.extensions.startBlock.forEach(function(M){S=M.call({lexer:this},w),typeof S=="number"&&S>=0&&(y=Math.min(y,S))}),y<1/0&&y>=0&&(f=s.substring(0,y+1))}if(this.state.top&&(c=this.tokenizer.paragraph(f))){p=a[a.length-1],g&&p.type==="paragraph"?(p.raw+=`
`+c.raw,p.text+=`
`+c.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=p.text):a.push(c),g=f.length!==s.length,s=s.substring(c.raw.length);continue}if(c=this.tokenizer.text(s)){s=s.substring(c.raw.length),p=a[a.length-1],p&&p.type==="text"?(p.raw+=`
`+c.raw,p.text+=`
`+c.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=p.text):a.push(c);continue}if(s){let y="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return this.state.top=!0,a}inline(s,a=[]){return this.inlineQueue.push({src:s,tokens:a}),a}inlineTokens(s,a=[]){let c,p,f,g=s,y,w,S;if(this.tokens.links){let M=Object.keys(this.tokens.links);if(M.length>0)for(;(y=this.tokenizer.rules.inline.reflinkSearch.exec(g))!=null;)M.includes(y[0].slice(y[0].lastIndexOf("[")+1,-1))&&(g=g.slice(0,y.index)+"["+_J("a",y[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(y=this.tokenizer.rules.inline.blockSkip.exec(g))!=null;)g=g.slice(0,y.index)+"["+_J("a",y[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(y=this.tokenizer.rules.inline.escapedEmSt.exec(g))!=null;)g=g.slice(0,y.index)+"++"+g.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;s;)if(w||(S=""),w=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(M=>(c=M.call({lexer:this},s,a))?(s=s.substring(c.raw.length),a.push(c),!0):!1))){if(c=this.tokenizer.escape(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.tag(s)){s=s.substring(c.raw.length),p=a[a.length-1],p&&c.type==="text"&&p.type==="text"?(p.raw+=c.raw,p.text+=c.text):a.push(c);continue}if(c=this.tokenizer.link(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.reflink(s,this.tokens.links)){s=s.substring(c.raw.length),p=a[a.length-1],p&&c.type==="text"&&p.type==="text"?(p.raw+=c.raw,p.text+=c.text):a.push(c);continue}if(c=this.tokenizer.emStrong(s,g,S)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.codespan(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.br(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.del(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.autolink(s,xJ)){s=s.substring(c.raw.length),a.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(s,xJ))){s=s.substring(c.raw.length),a.push(c);continue}if(f=s,this.options.extensions&&this.options.extensions.startInline){let M=1/0,R=s.slice(1),A;this.options.extensions.startInline.forEach(function(k){A=k.call({lexer:this},R),typeof A=="number"&&A>=0&&(M=Math.min(M,A))}),M<1/0&&M>=0&&(f=s.substring(0,M+1))}if(c=this.tokenizer.inlineText(f,Ake)){s=s.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(S=c.raw.slice(-1)),w=!0,p=a[a.length-1],p&&p.type==="text"?(p.raw+=c.raw,p.text+=c.text):a.push(c);continue}if(s){let M="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(M);break}else throw new Error(M)}}return a}},uI=class{constructor(i){this.options=i||dv}code(i,s,a){let c=(s||"").match(/\S*/)[0];if(this.options.highlight){let p=this.options.highlight(i,c);p!=null&&p!==i&&(a=!0,i=p)}return i=i.replace(/\n$/,"")+`
`,c?'<pre><code class="'+this.options.langPrefix+Eo(c,!0)+'">'+(a?i:Eo(i,!0))+`</code></pre>
`:"<pre><code>"+(a?i:Eo(i,!0))+`</code></pre>
`}blockquote(i){return`<blockquote>
`.concat(i,`</blockquote>
`)}html(i){return i}heading(i,s,a,c){if(this.options.headerIds){let p=this.options.headerPrefix+c.slug(a);return"<h".concat(s,' id="').concat(p,'">').concat(i,"</h").concat(s,`>
`)}return"<h".concat(s,">").concat(i,"</h").concat(s,`>
`)}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(i,s,a){let c=s?"ol":"ul",p=s&&a!==1?' start="'+a+'"':"";return"<"+c+p+`>
`+i+"</"+c+`>
`}listitem(i){return"<li>".concat(i,`</li>
`)}checkbox(i){return"<input "+(i?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(i){return"<p>".concat(i,`</p>
`)}table(i,s){return s&&(s="<tbody>".concat(s,"</tbody>")),`<table>
<thead>
`+i+`</thead>
`+s+`</table>
`}tablerow(i){return`<tr>
`.concat(i,`</tr>
`)}tablecell(i,s){let a=s.header?"th":"td";return(s.align?"<".concat(a,' align="').concat(s.align,'">'):"<".concat(a,">"))+i+"</".concat(a,`>
`)}strong(i){return"<strong>".concat(i,"</strong>")}em(i){return"<em>".concat(i,"</em>")}codespan(i){return"<code>".concat(i,"</code>")}br(){return this.options.xhtml?"<br/>":"<br>"}del(i){return"<del>".concat(i,"</del>")}link(i,s,a){if(i=gJ(this.options.sanitize,this.options.baseUrl,i),i===null)return a;let c='<a href="'+Eo(i)+'"';return s&&(c+=' title="'+s+'"'),c+=">"+a+"</a>",c}image(i,s,a){if(i=gJ(this.options.sanitize,this.options.baseUrl,i),i===null)return a;let c='<img src="'.concat(i,'" alt="').concat(a,'"');return s&&(c+=' title="'.concat(s,'"')),c+=this.options.xhtml?"/>":">",c}text(i){return i}},AU=class{strong(i){return i}em(i){return i}codespan(i){return i}del(i){return i}html(i){return i}text(i){return i}link(i,s,a){return""+a}image(i,s,a){return""+a}br(){return""}},IU=class{constructor(){this.seen={}}serialize(i){return i.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(i,s){let a=i,c=0;if(this.seen.hasOwnProperty(a)){c=this.seen[i];do c++,a=i+"-"+c;while(this.seen.hasOwnProperty(a))}return s||(this.seen[i]=c,this.seen[a]=0),a}slug(i,s={}){let a=this.serialize(i);return this.getNextSafeSlug(a,s.dryrun)}},Mp=class NH{constructor(s){this.options=s||dv,this.options.renderer=this.options.renderer||new uI,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new AU,this.slugger=new IU}static parse(s,a){return new NH(a).parse(s)}static parseInline(s,a){return new NH(a).parseInline(s)}parse(s,a=!0){let c="",p,f,g,y,w,S,M,R,A,k,D,O,F,V,W,X,re,ne,ae,xe=s.length;for(p=0;p<xe;p++){if(k=s[p],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[k.type]&&(ae=this.options.extensions.renderers[k.type].call({parser:this},k),ae!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(k.type))){c+=ae||"";continue}switch(k.type){case"space":continue;case"hr":{c+=this.renderer.hr();continue}case"heading":{c+=this.renderer.heading(this.parseInline(k.tokens),k.depth,vJ(this.parseInline(k.tokens,this.textRenderer)),this.slugger);continue}case"code":{c+=this.renderer.code(k.text,k.lang,k.escaped);continue}case"table":{for(R="",M="",y=k.header.length,f=0;f<y;f++)M+=this.renderer.tablecell(this.parseInline(k.header[f].tokens),{header:!0,align:k.align[f]});for(R+=this.renderer.tablerow(M),A="",y=k.rows.length,f=0;f<y;f++){for(S=k.rows[f],M="",w=S.length,g=0;g<w;g++)M+=this.renderer.tablecell(this.parseInline(S[g].tokens),{header:!1,align:k.align[g]});A+=this.renderer.tablerow(M)}c+=this.renderer.table(R,A);continue}case"blockquote":{A=this.parse(k.tokens),c+=this.renderer.blockquote(A);continue}case"list":{for(D=k.ordered,O=k.start,F=k.loose,y=k.items.length,A="",f=0;f<y;f++)W=k.items[f],X=W.checked,re=W.task,V="",W.task&&(ne=this.renderer.checkbox(X),F?W.tokens.length>0&&W.tokens[0].type==="paragraph"?(W.tokens[0].text=ne+" "+W.tokens[0].text,W.tokens[0].tokens&&W.tokens[0].tokens.length>0&&W.tokens[0].tokens[0].type==="text"&&(W.tokens[0].tokens[0].text=ne+" "+W.tokens[0].tokens[0].text)):W.tokens.unshift({type:"text",text:ne}):V+=ne),V+=this.parse(W.tokens,F),A+=this.renderer.listitem(V,re,X);c+=this.renderer.list(A,D,O);continue}case"html":{c+=this.renderer.html(k.text);continue}case"paragraph":{c+=this.renderer.paragraph(this.parseInline(k.tokens));continue}case"text":{for(A=k.tokens?this.parseInline(k.tokens):k.text;p+1<xe&&s[p+1].type==="text";)k=s[++p],A+=`
`+(k.tokens?this.parseInline(k.tokens):k.text);c+=a?this.renderer.paragraph(A):A;continue}default:{let fe='Token with "'+k.type+'" type was not found.';if(this.options.silent){console.error(fe);return}else throw new Error(fe)}}}return c}parseInline(s,a){a=a||this.renderer;let c="",p,f,g,y=s.length;for(p=0;p<y;p++){if(f=s[p],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[f.type]&&(g=this.options.extensions.renderers[f.type].call({parser:this},f),g!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(f.type))){c+=g||"";continue}switch(f.type){case"escape":{c+=a.text(f.text);break}case"html":{c+=a.html(f.text);break}case"link":{c+=a.link(f.href,f.title,this.parseInline(f.tokens,a));break}case"image":{c+=a.image(f.href,f.title,f.text);break}case"strong":{c+=a.strong(this.parseInline(f.tokens,a));break}case"em":{c+=a.em(this.parseInline(f.tokens,a));break}case"codespan":{c+=a.codespan(f.text);break}case"br":{c+=a.br();break}case"del":{c+=a.del(this.parseInline(f.tokens,a));break}case"text":{c+=a.text(f.text);break}default:{let w='Token with "'+f.type+'" type was not found.';if(this.options.silent){console.error(w);return}else throw new Error(w)}}}return c}},Vn.options=Vn.setOptions=function(i){return uu(Vn.defaults,i),Pke(Vn.defaults),Vn},Vn.getDefaults=mJ,Vn.defaults=dv,Vn.use=function(...i){let s=uu({},...i),a=Vn.defaults.extensions||{renderers:{},childTokens:{}},c;i.forEach(p=>{if(p.extensions&&(c=!0,p.extensions.forEach(f=>{if(!f.name)throw new Error("extension name required");if(f.renderer){let g=a.renderers?a.renderers[f.name]:null;g?a.renderers[f.name]=function(...y){let w=f.renderer.apply(this,y);return w===!1&&(w=g.apply(this,y)),w}:a.renderers[f.name]=f.renderer}if(f.tokenizer){if(!f.level||f.level!=="block"&&f.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");a[f.level]?a[f.level].unshift(f.tokenizer):a[f.level]=[f.tokenizer],f.start&&(f.level==="block"?a.startBlock?a.startBlock.push(f.start):a.startBlock=[f.start]:f.level==="inline"&&(a.startInline?a.startInline.push(f.start):a.startInline=[f.start]))}f.childTokens&&(a.childTokens[f.name]=f.childTokens)})),p.renderer){let f=Vn.defaults.renderer||new uI;for(let g in p.renderer){let y=f[g];f[g]=(...w)=>{let S=p.renderer[g].apply(f,w);return S===!1&&(S=y.apply(f,w)),S}}s.renderer=f}if(p.tokenizer){let f=Vn.defaults.tokenizer||new lI;for(let g in p.tokenizer){let y=f[g];f[g]=(...w)=>{let S=p.tokenizer[g].apply(f,w);return S===!1&&(S=y.apply(f,w)),S}}s.tokenizer=f}if(p.walkTokens){let f=Vn.defaults.walkTokens;s.walkTokens=function(g){let y=[];return y.push(p.walkTokens.call(this,g)),f&&(y=y.concat(f.call(this,g))),y}}c&&(s.extensions=a),Vn.setOptions(s)})},Vn.walkTokens=function(i,s){let a=[];for(let c of i)switch(a=a.concat(s.call(Vn,c)),c.type){case"table":{for(let p of c.header)a=a.concat(Vn.walkTokens(p.tokens,s));for(let p of c.rows)for(let f of p)a=a.concat(Vn.walkTokens(f.tokens,s));break}case"list":{a=a.concat(Vn.walkTokens(c.items,s));break}default:Vn.defaults.extensions&&Vn.defaults.extensions.childTokens&&Vn.defaults.extensions.childTokens[c.type]?Vn.defaults.extensions.childTokens[c.type].forEach(function(p){a=a.concat(Vn.walkTokens(c[p],s))}):c.tokens&&(a=a.concat(Vn.walkTokens(c.tokens,s)))}return a},Vn.parseInline=function(i,s){if(typeof i>"u"||i===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof i!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected");s=uu({},Vn.defaults,s||{}),bJ(s);try{let a=hv.lexInline(i,s);return s.walkTokens&&Vn.walkTokens(a,s.walkTokens),Mp.parseInline(a,s)}catch(a){if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,s.silent)return"<p>An error occurred:</p><pre>"+Eo(a.message+"",!0)+"</pre>";throw a}},Vn.Parser=Mp,Vn.parser=Mp.parse,Vn.Renderer=uI,Vn.TextRenderer=AU,Vn.Lexer=hv,Vn.lexer=hv.lex,Vn.Tokenizer=lI,Vn.Slugger=IU,Vn.parse=Vn,Vn.options,Vn.setOptions,Vn.use,Vn.walkTokens,Vn.parseInline,Mp.parse,hv.lex}),LJ,NJ,RU,FJ=C(()=>{Ne(),rI(),NJ=se(zy)(LJ||(LJ=G([`
  padding: 6px;
`]))),RU=NJ}),Xi,cI,TS,dI,BJ,UJ,VJ,OU,jJ,zJ,HJ,DU,GJ,WJ,$J,KJ,qJ,MS,AS,XJ,YJ,ZJ,QJ,JJ,eee,tee,nee,ree,iee,oee,see,LU,IS=C(()=>{Xi=Q(Re()),Cke(),Ne(),vr(),hn(),Fe(),Ike(),xS(),FJ(),cI=({title:i,message:s})=>"".concat(i," ").concat(s),TS=(()=>{let i=new Map;return{add:s=>{let a=cI(s);i.has(a)?i.set(a,i.get(a)+1):i.set(a,1)},delete:s=>{let a=cI(s);i.has(a)&&i.get(a)>1?i.set(a,i.get(a)-1):i.delete(a)},clear:()=>{i.clear()},check:s=>i.has(cI(s))}})(),dI=(()=>{let i=new Map;return{add:s=>{i.has(s)?i.set(s,i.get(s)+1):i.set(s,1)},delete:s=>{i.has(s)&&i.get(s)>1?i.set(s,i.get(s)-1):i.delete(s)},clear:()=>{i.clear()},check:s=>i.has(s),get types(){return Array.of(...i.keys())}}})(),UJ=se.div(BJ||(BJ=G([`
  width: 100%;
  border-radius: 4px;
  display: flex;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr),OU=se.div(VJ||(VJ=G([`
  font-size: 14px;
  font-weight: bold;
  color: #fff;
`]))),zJ=se.div(jJ||(jJ=G([`
  flex: 1;
  flex-direction: column;
  width: 0;
  display: flex;
  padding: 16px 0;
  gap: 12px;
`]))),DU=se.div(HJ||(HJ=G([`
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;

  a {
    color: rgba(255, 255, 255, 0.9);
  }

  em {
    font-style: italic;
  }

  strong {
    font-weight: bold;
    color: #d5d5d5;
  }

  p {
    margin-bottom: 8px;
  }

  code {
    font-family: monospace;
    background: rgba(0, 0, 0, 0.3);
    padding: 1px 1px 2px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    white-space: pre-wrap;
  }

  pre > code {
    white-space: pre;
    display: block;
    overflow: auto;
    padding: 4px;
  }

  pre {
    white-space: pre-wrap;
    margin-bottom: 8px;
  }
`]))),WJ=se.button(GJ||(GJ=G([`
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding-left: 12px;
  padding-right: 12px;
  border-left: 1px solid rgba(255, 255, 255, 0.05);

  &:hover {
    background: rgba(255, 255, 255, 0.05);
  }
`]))),$J={info:"#3b82f6",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},qJ=se.div(KJ||(KJ=G([`
  display: flex;
  justify-content: center;
  margin-left: 12px;
  padding-top: 21px;

  ::before {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 999999px;
    background-color: `,`;
  }
`])),({type:i})=>$J[i]),MS=i=>(s,a,c=[],p=!1)=>{(p||!TS.check({title:s,message:a}))&&(TS.add({title:s,message:a}),dI.add(i),sI.custom(f=>Xi.default.createElement(UJ,null,Xi.default.createElement(qJ,{type:i}),Xi.default.createElement(zJ,null,Xi.default.createElement(OU,null,s),Xi.default.createElement(DU,{dangerouslySetInnerHTML:{__html:Vn.parse(a)}}),c.length>0&&Xi.default.createElement(DU,null,Xi.default.createElement("span",null,"Docs:"," ",c.map((g,y)=>Xi.default.createElement(Xi.Fragment,{key:y},y>0&&", ",Xi.default.createElement("a",{target:"_blank",href:g.url},g.title)))))),Xi.default.createElement(WJ,{onClick:()=>{sI.remove(f.id),TS.delete({title:s,message:a}),dI.delete(i)}},"Close")),{duration:1/0}))},AS={warning:MS("warning"),success:MS("success"),info:MS("info"),error:MS("error")},YJ=se.div(XJ||(XJ=G([`
  display: flex;
  justify-content: `,`;
  gap: 12px;
`])),({align:i})=>i==="center"?"center":"flex-end"),QJ=se.button(ZJ||(ZJ=G([`
  position: relative;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border: none;
  padding: 12px;
  color: #fff;
  overflow: hidden;

  ::before {
    content: '';
    position: absolute;
    inset: 0;
  }

  :hover::before {
    background: `,`;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr,({danger:i})=>i?"rgba(255, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"),eee=se.div(JJ||(JJ=G([`
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: fixed;
  right: 92px;
  top: 50px;
  width: 500px;
  height: 85vh;
  min-height: 400px;
`]))),nee=se.div(tee||(tee=G([`
  overflow: hidden;
  pointer-events: auto;
  border-radius: 4px;

  & > div {
    display: flex;
    flex-direction: column-reverse;
    gap: 8px;
    overflow: scroll;
    height: 100%;
  }
`]))),iee=se.div(ree||(ree=G([`
  width: fit-content;
  padding: 8px;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;
`]))),oee=()=>{let{hasNotifications:i}=LU();return jy({enabled:!i},()=>Xi.default.createElement(RU,null,Xi.default.createElement(iee,null,Xi.default.createElement(OU,null,"No notifications"),"Notifications will appear here when you get them.")))},see=()=>{var i;let{toasts:s,handlers:a}=TU(),{startPause:c,endPause:p}=a,f=(i=Wn(me().atomP.ahistoric.pinNotifications))!=null?i:!1;return Xi.default.createElement(eee,null,f?s.length>0&&Xi.default.createElement(nee,{onMouseEnter:c,onMouseLeave:p},Xi.default.createElement("div",null,s.map(g=>Xi.default.createElement("div",{key:g.id},g.message(g))))):null,Xi.default.createElement(YJ,{align:"side"},f&&s.length>0&&Xi.default.createElement(QJ,{onClick:()=>{dI.clear(),TS.clear(),sI.remove()},danger:!0},"Clear")))},LU=()=>{let{toasts:i}=TU();return{hasNotifications:i.length>0}}});function NU(i,s){var a;let c=Object.values((a=(0,aee.val)(i.pointers.historic.sheetsById))!=null?a:{}),p=c.flatMap(g=>{var y;return Object.values((y=g==null?void 0:g.staticOverrides.byObject)!=null?y:{})}).flatMap(g=>Object.values(g??{})),f=[...c.flatMap(g=>{var y,w;return Object.values((w=(y=g==null?void 0:g.sequence)==null?void 0:y.tracksByObject)!=null?w:{})}).flatMap(g=>{var y;return Object.values((y=g==null?void 0:g.trackData)!=null?y:{})}).flatMap(g=>g==null?void 0:g.keyframes).map(g=>g==null?void 0:g.value)];return p.forEach(g=>{vt(g,y=>{f.push(y)},[])}),f.filter(g=>(g==null?void 0:g.type)&&(s?(g==null?void 0:g.type)==s:typeof(g==null?void 0:g.type)=="string")).map(g=>g.id).filter((g,y,w)=>g!==null&&g!==""&&w.indexOf(g)===y)}var aee,lee=C(()=>{aee=Mt,Je()});function uee(i,s){let a=new File([i],s),c=URL.createObjectURL(a),p=Object.assign(document.createElement("a"),{href:c,target:"_blank",rel:"noopener"});p.setAttribute("download",s),p.click(),setTimeout(()=>{URL.revokeObjectURL(c)},4e4)}var Pa,cee,dee,hee,pee,fee,mee,vee,gee,yee,Rke=C(()=>{Fe(),dc(),uc(),Pa=Q(Re()),Ne(),LQ(),Ske(),cee=Q(Eke()),IS(),lee(),hee=se.div(dee||(dee=G([""]))),fee=se.div(pee||(pee=G([`
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
`]))),vee=se(cc)(mee||(mee=G([`
  display flex;
  flex-direction: column;
  gap: 1em;
  width: 280px;
  padding: 1em;
`]))),gee=({projects:i})=>{let s=i[0],a=s.address.projectId,c=a.replace(/[^\w\d'_\-]+/g," ").trim(),p="".concat(c,".theatre-project-state.json"),[f,g]=(0,Pa.useState)(!1),y=(0,Pa.useCallback)(()=>ye(void 0,null,function*(){var S,M;let R=NU(s),A=new Map;try{yield Promise.all(R.map(D=>ye(void 0,null,function*(){let O=s.assetStorage.getAssetUrl(D),F=yield fetch(O);F.ok&&A.set(D,yield F.blob())})))}catch{AS.error("Failed to access assets","Export aborted. Failed to access assets at ".concat((M=(S=s.config.assets)==null?void 0:S.baseUrl)!=null?M:"/",". This is likely due to a CORS issue."));return}if(A.size>0){let D=new cee.default;for(let[F,V]of A)D.file(F,V);let O=yield D.generateAsync({type:"blob"});uee(O,"".concat(c,".assets.zip"))}let k=JSON.stringify(me().createContentOfSaveFile(s.address.projectId),null,2);uee(k,p),g(!0),setTimeout(()=>{g(!1)},2e3)}),[s,p]),w=lc({debugName:"ProjectDetails",pointerDistanceThreshold:50},()=>Pa.default.createElement(vee,null,Pa.default.createElement("p",null,"This will create a JSON file with the state of your project. You can commit this file to your git repo and include it in your production bundle."),Pa.default.createElement("p",null,"If your project uses assets, this will also create a zip file with all the assets that you can unpack in your public folder."),Pa.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Here is a quick guide on how to export to production.")));return Pa.default.createElement(Pa.default.Fragment,null,w.node,Pa.default.createElement(hee,null,Pa.default.createElement(iJ,{projectId:a}),Pa.default.createElement(fee,null,Pa.default.createElement(tI,{onMouseEnter:S=>w.open(S,S.target),onClick:f?void 0:y,disabled:f},f?"(Exported)":"Export ".concat(a," to JSON")))))},yee=gee}),Ap,bee,_ee,wee,xee,See,Eee,Cee,Pee,kee,Tee,Oke=C(()=>{Ap=Q(Re()),Ne(),$x(),_ee=se.div(bee||(bee=G([`
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 24px;
`]))),xee=se.div(wee||(wee=G([`
  display: flex;
  flex-direction: column;
  gap: 11px;
  color: rgba(255, 255, 255, 0.9);
`]))),Eee=se.div(See||(See=G([`
  color: rgba(145, 145, 145, 0.8);
`]))),Pee=se.a(Cee||(Cee=G([`
  color: #919191;
  font-size: 10px;
  text-decoration-color: #40434a;
  text-underline-offset: 3px;
`]))),kee=()=>Ap.default.createElement(_ee,null,Ap.default.createElement(xee,null,Ap.default.createElement(Eee,null,Ap.default.createElement(eB,null)),Ap.default.createElement("div",null,"Please select an object from the ",Ap.default.createElement("u",null,"Outline Menu")," to see its properties.")),Ap.default.createElement(Pee,{href:"https://www.theatrejs.com/docs/latest/manual/objects",target:"_blank"},"Learn more about Objects")),Tee=kee});function Mee(){let[i,s]=(0,FU.useState)(!1),a=(0,FU.useMemo)(()=>{let c=new Set;return()=>{let p=()=>{c.delete(p),s(c.size>0)};return c.add(p),s(!0),p}},[]);return[i,a]}var FU,Aee=C(()=>{FU=Q(Re())}),ni,Gy,Iee,Ree,hI,Oee,BU,Dee,UU,Lee,VU,RS,Nee,Fee,pI,pv,jU=C(()=>{_p(),hn(),ni=Q(Re()),Ne(),$n(),Md(),vr(),_ke(),Rke(),Fe(),wK(),Gy=Mt,Oke(),Aee(),uv(),Iee="32px",hI=se.div(Ree||(Ree=G([`
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  position: fixed;
  right: 8px;
  top: 50px;
  // Temporary, see comment about CSS grid in SingleRowPropEditor.
  width: 280px;
  height: fit-content;
  z-index: `,`;

  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border-radius: 2px;

  display: `,`;

  &:hover {
    display: block;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr,Cy.propsPanel,({pin:i})=>i?"block":"none"),BU=se.div(Oee||(Oee=G([`
  margin: 0 10px;
  color: #919191;
  font-weight: 500;
  font-size: 10px;
  user-select: none;
  `,`;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`])),hr),UU=se.div(Dee||(Dee=G([`
  height: `,`;
  display: flex;
  align-items: center;
`])),Iee),VU=se.div(Lee||(Lee=G([`
  `,`;
  max-height: calc(100vh - 100px);
  overflow-y: scroll;
  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
  padding: 0;
  user-select: none;

  /* Set the font-size for input values in the detail panel */
  font-size: 12px;
`])),hr),RS=(0,ni.createContext)([!1,()=>()=>{}]),Nee=i=>{let s=Wn(me().atomP.ahistoric.pinDetails)!==!1,a=_K("right");(0,ni.useLayoutEffect)(()=>{pI.set(a)},[a]),(0,ni.useEffect)(()=>()=>{pv.set(!1),pI.set(!1)},[]);let[c]=(0,ni.useContext)(RS),p=s||a||c,[f,g]=(0,ni.useState)(null);return iZ(f),Un(()=>{let y=bp(),w=y.find(Dt);if(w)return ni.default.createElement(hI,{"data-testid":"DetailPanel-Object",pin:p,ref:g,onMouseEnter:()=>{pv.set(!0)},onMouseLeave:()=>{pv.set(!1)}},ni.default.createElement(UU,null,ni.default.createElement(BU,{title:"".concat(w.sheet.address.sheetId,": ").concat(w.sheet.address.sheetInstanceId," > ").concat(w.address.objectKey)},ni.default.createElement(yp,null,w.sheet.address.sheetId," "),ni.default.createElement(Wx,null,":",""),ni.default.createElement(yp,null,w.sheet.address.sheetInstanceId," "),ni.default.createElement(Wx,null,""),ni.default.createElement(yp,null,w.address.objectKey))),ni.default.createElement(VU,null,ni.default.createElement(RQ,{objects:[w]})));let S=y.find(nt);return S?ni.default.createElement(hI,{pin:p},ni.default.createElement(UU,null,ni.default.createElement(BU,{title:"".concat(S.address.projectId)},ni.default.createElement(yp,null,S.address.projectId," "))),ni.default.createElement(VU,null,ni.default.createElement(yee,{projects:[S]}))):ni.default.createElement(hI,{pin:p,onMouseEnter:()=>{pv.set(!0)},onMouseLeave:()=>{pv.set(!1)}},ni.default.createElement(Tee,null))},[p])},Fee=()=>{let i=Mee();return ni.default.createElement(RS.Provider,{value:i},ni.default.createElement(Nee,null))},pI=new Gy.Atom(!1),pv=new Gy.Atom(!1),(0,Gy.prism)(()=>{let i=(0,Gy.val)(pv.prism),s=(0,Gy.val)(pI.prism);return i||s})}),zU,fI,mI,HU,Wy,Bee,GU,$y=C(()=>{zU=Mt,hn(),Fe(),Aee(),fI=Q(Re()),$B(),mI=(i,s)=>{let a=i.left/s.width,c=(i.left+i.width)/s.width,p=i.top/s.height,f=(i.height+i.top)/s.height;return{edges:{left:a<=.5?{from:"screenLeft",distance:a}:{from:"screenRight",distance:1-a},right:c<=.5?{from:"screenLeft",distance:c}:{from:"screenRight",distance:1-c},top:p<=.5?{from:"screenTop",distance:p}:{from:"screenBottom",distance:1-p},bottom:f<=.5?{from:"screenTop",distance:f}:{from:"screenBottom",distance:1-f}}}},HU=fI.default.createContext(null),Wy=()=>(0,fI.useContext)(HU),Bee=({panelId:i,children:s,defaultPosition:a,minDims:c})=>{let p=DA(800,200),[f,g]=Mee(),{stuff:y}=Un(()=>{var w;let{edges:S}=(w=(0,zU.val)(me().atomP.historic.panelPositions[i]))!=null?w:a,M=Math.floor(p.width*(S.left.from==="screenLeft"?S.left.distance:1-S.left.distance)),R=Math.floor(p.width*(S.right.from==="screenLeft"?S.right.distance:1-S.right.distance)),A=Math.floor(p.height*(S.top.from==="screenTop"?S.top.distance:1-S.top.distance)),k=Math.floor(p.height*(S.bottom.from==="screenTop"?S.bottom.distance:1-S.bottom.distance)),D=Math.max(R-M,c.width),O=Math.max(k-A,c.height);return{stuff:{dims:zU.prism.memo("dims",()=>({width:D,left:M,top:A,height:O}),[D,M,A,O]),panelId:i,minDims:c,boundsHighlighted:f,addBoundsHighlightLock:g}}},[i,p,f,g]);return fI.default.createElement(HU.Provider,{value:y},s)},GU=Bee}),OS,Uee,Vee,jee,WU,zee=C(()=>{mr(),Fe(),no(),OS=Q(Re()),Ne(),$y(),Ca(),ti(),Md(),Vee=se.div(Uee||(Uee=G([`
  cursor: move;
`]))),jee=i=>{let s=Wy(),a=(0,OS.useRef)(s);a.current=s;let[c,p]=sr(null),f=(0,OS.useMemo)(()=>({debugName:"PanelDragZone",lockCursorTo:"move",onDragStart(){let S=a.current,M,R=s.addBoundsHighlightLock();return{onDrag(A,k){let D=z(j({},S.dims),{top:ci(S.dims.top+k,0,window.innerHeight-ic),left:ci(S.dims.left+A,-S.dims.width+ic,window.innerWidth-ic)}),O=mI(D,{width:window.innerWidth,height:window.innerHeight});M==null||M.discard(),M=me().tempTransaction(({stateEditors:F})=>{F.studio.historic.panelPositions.setPanelPosition({position:O,panelId:S.panelId})})},onDragEnd(A){R(),A?M==null||M.commit():M==null||M.discard()}}}}),[]),[g]=Ei(p,f);dl(g,"dragging","move");let[y,w]=(0,OS.useMemo)(()=>{let S;return[function(){if(S){let M=S;S=void 0,M()}S=s.addBoundsHighlightLock()},function(){if(S){let M=S;S=void 0,M()}}]},[]);return OS.default.createElement(Vee,z(j({},i),{ref:c,onMouseEnter:y,onMouseLeave:w}))},WU=jee}),vI,Hee,$U,Gee,KU,Wee,qU,$ee,Kee,qee,Xee,Yee,XU,Zee,Qee,Jee,ete,tte,DS,nte,rte,ite,ote,ste,ate,lte,ute,cte,YU,dte,Bd,Dke=C(()=>{mr(),Fe(),no(),Ea(),vI=Q(Re()),Ne(),$y(),vr(),ti(),Md(),$U=se.div(Hee||(Hee=G([`
  position: absolute;
  `,`;
  &:after {
    position: absolute;
    inset: -5px;
    display: block;
    content: ' ';
  }

  opacity: 0;
  background-color: #478698;

  &.isHighlighted {
    opacity: 0.7;
  }

  &.isDragging {
    opacity: 1;
    /* background-color: `,`; */
  }

  &:hover {
    opacity: 1;
  }
`])),hr,gy(.2,"#478698")),KU=se($U)(Gee||(Gee=G([`
  /**
  The horizintal/vertical resize handles have z-index:-1 and are offset 1px outside of the panel
  to make sure they don't occlude any element that pops out of the panel (like the Playhead in SequenceEditorPanel).

  This means that panels will always need an extra 1px margin for their resize handles to be visible, but that's not a problem
  that we have to deal with right now (if it is at all a problem).
  
   */
  z-index: -1;
`]))),qU=se(KU)(Wee||(Wee=G([`
  left: 0px;
  right: 0px;
  height: 1px;
`]))),Kee=se(qU)($ee||($ee=G([`
  top: -1px;
`]))),Xee=se(qU)(qee||(qee=G([`
  bottom: -1px;
`]))),XU=se(KU)(Yee||(Yee=G([`
  z-index: -1;
  top: -1px;
  bottom: -1px;
  width: 1px;
`]))),Qee=se(XU)(Zee||(Zee=G([`
  left: -1px;
`]))),ete=se(XU)(Jee||(Jee=G([`
  right: -1px;
`]))),DS=se($U)(tte||(tte=G([`
  // The angles have z-index: 10 to make sure they _do_ occlude other elements in the panel.
  z-index: 10;
  width: 8px;
  height: 8px;
`]))),rte=se(DS)(nte||(nte=G([`
  top: 0;
  left: 0;
`]))),ote=se(DS)(ite||(ite=G([`
  top: 0;
  right: 0;
`]))),ate=se(DS)(ste||(ste=G([`
  bottom: 0;
  left: 0;
`]))),ute=se(DS)(lte||(lte=G([`
  bottom: 0;
  right: 0;
`]))),cte={Top:Kee,TopLeft:rte,TopRight:ote,Bottom:Xee,BottomLeft:ate,BottomRight:ute,Left:Qee,Right:ete},YU={Top:"ns-resize",Bottom:"ns-resize",Left:"ew-resize",Right:"ew-resize",TopLeft:"nw-resize",TopRight:"ne-resize",BottomLeft:"sw-resize",BottomRight:"se-resize"},dte=({which:i})=>{let s=Wy(),a=(0,vI.useRef)(s);a.current=s;let[c,p]=sr(null),f=(0,vI.useMemo)(()=>({debugName:"PanelResizeHandle",lockCursorTo:YU[i],onDragStart(){let S,M=a.current,R=s.addBoundsHighlightLock();return{onDrag(A,k){let D=j({},M.dims);if(i.startsWith("Bottom"))D.height=Math.max(D.height+k,M.minDims.height);else if(i.startsWith("Top")){let F=D.top+D.height,V=ci(D.top+k,0,Math.min(F-M.minDims.height,window.innerHeight-ic)),W=F-V;D.height=W,D.top=V}if(i.endsWith("Left")){let F=D.left+D.width,V=Math.min(D.left+A,Math.min(F-M.minDims.width,window.innerWidth-ic)),W=F-V;D.width=W,D.left=V}else i.endsWith("Right")&&(D.width=Math.max(D.width+A,Math.max(M.minDims.width,ic-M.dims.left)));let O=mI(D,{width:window.innerWidth,height:window.innerHeight});S==null||S.discard(),S=me().tempTransaction(({stateEditors:F})=>{F.studio.historic.panelPositions.setPanelPosition({position:O,panelId:M.panelId})})},onDragEnd(A){R(),A?S==null||S.commit():S==null||S.discard()}}}}),[i]),[g]=Ei(p,f),y=cte[i],w=i.length<=6;return vI.default.createElement(y,{ref:c,className:[g?"isDragging":"",s.boundsHighlighted&&w?"isHighlighted":""].join(" "),style:{cursor:YU[i]}})},Bd=dte}),cu,hte,pte,Lke=C(()=>{cu=Q(Re()),Dke(),hte=i=>cu.default.createElement(cu.default.Fragment,null,cu.default.createElement(Bd,{which:"Bottom"}),cu.default.createElement(Bd,{which:"Top"}),cu.default.createElement(Bd,{which:"Left"}),cu.default.createElement(Bd,{which:"Right"}),cu.default.createElement(Bd,{which:"TopLeft"}),cu.default.createElement(Bd,{which:"TopRight"}),cu.default.createElement(Bd,{which:"BottomLeft"}),cu.default.createElement(Bd,{which:"BottomRight"})),pte=hte}),gI,fte,mte,vte,ZU,gte=C(()=>{vr(),gI=Q(Re()),Ne(),$y(),Lke(),mte=se.div(fte||(fte=G([`
  position: absolute;
  user-select: none;
  box-sizing: border-box;
  `,`;
  /* box-shadow: 1px 2px 10px -5px black; */

  z-index: 1000;
`])),hr),vte=gI.default.forwardRef((i,s)=>{let a=Wy(),c=i,{style:p,children:f}=c,g=U(c,["style","children"]);return gI.default.createElement(mte,z(j({ref:s},g),{style:j({width:a.dims.width+"px",height:a.dims.height+"px",top:a.dims.top+"px",left:a.dims.left+"px"},p??{})}),gI.default.createElement(pte,null),f)}),ZU=vte}),Nke=K((i,s)=>{(function(a,c){typeof i=="object"&&typeof s<"u"?c(i,Re()):(a=typeof globalThis<"u"?globalThis:a||self,c(a.ReactErrorBoundary={},a.React))})(i,function(a,c){function p(k){if(k&&k.__esModule)return k;var D=Object.create(null);return k&&Object.keys(k).forEach(function(O){if(O!=="default"){var F=Object.getOwnPropertyDescriptor(k,O);Object.defineProperty(D,O,F.get?F:{enumerable:!0,get:function(){return k[O]}})}}),D.default=k,Object.freeze(D)}var f=p(c);function g(k,D){return g=Object.setPrototypeOf||function(O,F){return O.__proto__=F,O},g(k,D)}function y(k,D){k.prototype=Object.create(D.prototype),k.prototype.constructor=k,g(k,D)}var w=function(k,D){return k===void 0&&(k=[]),D===void 0&&(D=[]),k.length!==D.length||k.some(function(O,F){return!Object.is(O,D[F])})},S={error:null},M=function(k){y(D,k);function D(){for(var F,V=arguments.length,W=new Array(V),X=0;X<V;X++)W[X]=arguments[X];return F=k.call.apply(k,[this].concat(W))||this,F.state=S,F.updatedWithError=!1,F.resetErrorBoundary=function(){for(var re,ne=arguments.length,ae=new Array(ne),xe=0;xe<ne;xe++)ae[xe]=arguments[xe];F.props.onReset==null||(re=F.props).onReset.apply(re,ae),F.reset()},F}D.getDerivedStateFromError=function(F){return{error:F}};var O=D.prototype;return O.reset=function(){this.updatedWithError=!1,this.setState(S)},O.componentDidCatch=function(F,V){var W,X;(W=(X=this.props).onError)==null||W.call(X,F,V)},O.componentDidMount=function(){var F=this.state.error;F!==null&&(this.updatedWithError=!0)},O.componentDidUpdate=function(F){var V=this.state.error,W=this.props.resetKeys;if(V!==null&&!this.updatedWithError){this.updatedWithError=!0;return}if(V!==null&&w(F.resetKeys,W)){var X,re;(X=(re=this.props).onResetKeysChange)==null||X.call(re,F.resetKeys,W),this.reset()}},O.render=function(){var F=this.state.error,V=this.props,W=V.fallbackRender,X=V.FallbackComponent,re=V.fallback;if(F!==null){var ne={error:F,resetErrorBoundary:this.resetErrorBoundary};if(f.isValidElement(re))return re;if(typeof W=="function")return W(ne);if(X)return f.createElement(X,ne);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},D}(f.Component);function R(k,D){var O=function(V){return f.createElement(M,D,f.createElement(k,V))},F=k.displayName||k.name||"Unknown";return O.displayName="withErrorBoundary("+F+")",O}function A(k){var D=f.useState(null),O=D[0],F=D[1];if(k!=null)throw k;if(O!=null)throw O;return F}a.ErrorBoundary=M,a.useErrorHandler=A,a.withErrorBoundary=R,Object.defineProperty(a,"__esModule",{value:!0})})}),Vo,yte,bte,_te,wte,xte,Ste,Ete,Cte,Pte,kte,Tte,Mte,Ate,Ite,Rte,Ote,Dte,Lte,Nte,Fke=C(()=>{Vo=Q(Re()),Ne(),Md(),$y(),zee(),gte(),yte=Q(Nke()),Oy(),Fe(),Md(),bte={edges:{left:{from:"screenLeft",distance:.3},right:{from:"screenRight",distance:.3},top:{from:"screenTop",distance:.3},bottom:{from:"screenBottom",distance:.3}}},_te={width:300,height:300},wte=({paneInstance:i})=>Vo.default.createElement(GU,{panelId:"pane-".concat(i.instanceId),defaultPosition:bte,minDims:_te},Vo.default.createElement(Lte,{paneInstance:i})),Ste=se(ZU)(xte||(xte=G([`
  display: flex;
  flex-direction: column;

  box-shadow: 0px 5px 12px -4px rgb(0 0 0 / 22%);
  z-index: `,`;
`])),Cy.pluginPanes),Cte=se.div(Ete||(Ete=G([`
  width: 100%;
`]))),kte=se.div(Pte||(Pte=G([`
  display: flex;
  align-items: center;
  opacity: 1;
  position: absolute;
  right: 4px;
  top: 0;
  bottom: 0;
`]))),Mte=se.button(Tte||(Tte=G([`
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 2px;
  font-size: 11px;
  height: 10px;
  width: 18px;
  color: #adadadb3;
  background: transparent;
  border: none;
  cursor: pointer;
  &:hover {
    color: white;
  }
`]))),Ite=se(b7)(Ate||(Ate=G([`
  position: relative;
  overflow: hidden;

  &:after {
    z-index: 10;
    position: absolute;
    inset: 0;
    display: block;
    content: ' ';
    pointer-events: none;

    #pointer-root:not(.normal) & {
      pointer-events: auto;
    }
  }
`]))),Ote=se.div(Rte||(Rte=G([`
  padding: 12px;

  & > pre {
    border: 1px solid #ff62624f;
    background-color: rgb(255 0 0 / 5%);
    margin: 8px 0;
    padding: 8px;
    font-family: monospace;
    overflow: scroll;
    color: #ff9896;
  }
`]))),Dte=i=>Vo.default.createElement(Ote,null,"An Error occurred rendering this pane. Open the console for more info.",Vo.default.createElement("pre",null,JSON.stringify({message:i.error.message,stack:i.error.stack},null,2))),Lte=({paneInstance:i})=>{let[s,a]=(0,Vo.useState)(null),c=i.definition.mount;(0,Vo.useLayoutEffect)(()=>{if(!s)return;let f=c({paneId:i.instanceId,node:s});if(typeof f=="function")return f},[s,c,i.instanceId]);let p=(0,Vo.useCallback)(()=>{me().paneManager.destroyPane(i.instanceId)},[i]);return Vo.default.createElement(Ste,{"data-testid":"theatre-pane-wrapper-".concat(i.instanceId)},Vo.default.createElement(WU,null,Vo.default.createElement(QF,null,Vo.default.createElement(kte,null,Vo.default.createElement(Mte,{onClick:p,title:"Close Pane"},Vo.default.createElement(VCe,null))),Vo.default.createElement(Cte,null,i.instanceId))),Vo.default.createElement(yte.ErrorBoundary,{FallbackComponent:Dte},Vo.default.createElement(Ite,{"data-testid":"theatre-pane-content-".concat(i.instanceId),ref:a})))},Nte=wte}),QU,JU,Fte=C(()=>{QU=Mt,JU=(i,s)=>{let a=QU.prism.memo(i,()=>new QU.Atom(s),[]);return a.set(s),a}});function Bte(i,s){(0,Ute.useLayoutEffect)(()=>{if(!i||s.type!=="propWithChildren"&&s.type!=="primitiveProp"&&s.type!=="sheetObject")return;let a=null,c=z(j({},s.sheetObject.address),{pathToProp:s.type==="sheetObject"?[]:s.pathToProp});function p(){a=YA.replaceLock(c,()=>{})}function f(){a==null||a()}return i.addEventListener("mouseenter",p),i.addEventListener("mouseleave",f),()=>{a==null||a(),i.removeEventListener("mouseenter",p),i.removeEventListener("mouseleave",f)}},[i])}var Ute,Vte=C(()=>{Ute=Q(Re()),gU()}),Ip,jte,e4,zte,t4,Hte,n4,Gte,Wte,$te,Kte,qte,Xte,Yte,yI,bI=C(()=>{vr(),Ip=Q(Re()),Oy(),Ne(),av(),Vte(),e4=se.li(jte||(jte=G([`
  --depth: `,`;
  margin: 0;
  padding: 0;
  list-style: none;
`])),i=>i.depth),t4=se.div(zte||(zte=G([`
  border-bottom: 1px solid #7695b705;
`]))),n4=se(t4)(Hte||(Hte=G([`
  padding-left: calc(8px + var(--depth) * 20px);

  display: flex;
  align-items: stretch;
  color: `,`;

  box-sizing: border-box;

  `,`;
`])),Ey.panel.body.compoudThing.label.color,i=>i.isSelected&&"background: blue"),Wte=se.span(Gte||(Gte=G([`
  `,`;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding-right: 4px;
  line-height: 26px;
  flex-wrap: nowrap;

  `,`:hover & {
    color: #ccc;
  }
`])),Cp,n4),Kte=se.span($te||($te=G([`
  width: 12px;
  padding: 8px;
  font-size: 9px;
  display: flex;
  align-items: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),i=>i.isCollapsed?0:90,i=>i.isCollapsed?15:75),Xte=se.ul(qte||(qte=G([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),Yte=({leaf:i,label:s,children:a,isSelectable:c,isSelected:p,toggleSelect:f,toggleCollapsed:g,isCollapsed:y})=>{let w=Array.isArray(a)&&a.length>0,S=(0,Ip.useRef)(null);return Bte(S.current,i),i.shouldRender?Ip.default.createElement(e4,{depth:i.depth},Ip.default.createElement(n4,{ref:S,style:{height:i.nodeHeight+"px"},isSelectable:c===!0,isSelected:p===!0,onClick:f,isEven:i.n%2===0},Ip.default.createElement(Kte,{isCollapsed:y,onClick:g},Ip.default.createElement(hq,null)),Ip.default.createElement(Wte,null,s)),w&&Ip.default.createElement(Xte,null,a)):null},yI=Yte});function Bke(i,s){return s.every((a,c)=>a===i[c])}function Uke(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;a++)if(i[a]!==s[a])return!1;return!0}function _I(i){var s;let a=[];for(;;){let c=a.length,p=(s=i[0])==null?void 0:s[c];if(p===void 0)return a;for(let f of i)if(p!==f[c])return a;a.push(p)}}var mc,wI,vc=C(()=>{FA(),mc=oS(i=>JSON.stringify(i)),wI=i=>JSON.parse(i)});function Vke(i,s){let a=(0,r4.useRef)({combo:i,listener:s});a.current={combo:i,listener:s},(0,r4.useEffect)(()=>{function c(g){g.key===a.current.combo&&a.current.listener({down:!0,event:g})}function p(g){g.key===a.current.combo&&a.current.listener({down:!1,event:g})}function f(g){a.current.listener({down:!1,event:void 0})}return document.addEventListener("keydown",c),document.addEventListener("keyup",p),window.addEventListener("blur",f),()=>{document.removeEventListener("keydown",c),document.removeEventListener("keyup",p),window.removeEventListener("blur",f)}},[])}var r4,jke=C(()=>{r4=Q(Re())});function Zte(i){let[s,a]=(0,Qte.useState)(!1);return Vke(i,({down:c})=>{a(c)}),s}var Qte,Jte=C(()=>{Qte=Q(Re()),jke()});function zke(i){let s=(0,i4.useMemo)(()=>new ene.Atom(i),[]);return(0,i4.useLayoutEffect)(()=>{s.set(i)},[i]),s}var ene,i4,Hke=C(()=>{ene=Mt,i4=Q(Re())});function tne(i,s,a){let c=(0,o4.pointer)({root:{},path:[]}),p=s(c);lp(i,(0,o4.getPointerParts)(p).path,a)}var o4,Gke=C(()=>{o4=Mt,Q0()}),xI,nne,Is,du=C(()=>{xI="data-pos",nne={checkIfMouseEventSnapToPos(i,s){let a=i.composedPath().find(c=>c instanceof Element&&c!==(s==null?void 0:s.ignore)&&c.hasAttribute(xI));if(a){let c=parseFloat(a.getAttribute(xI));if(isFinite(c))return c}return null},includePositionSnapAttrs(i){return{[xI]:i}}},Is=nne});function SI(i){let s=i.type==="sheet"?$ke(i):s4(i);return{byPosition:Wke(s),tracks:s}}function Wke(i){let s=new Map;for(let a of i)for(let c of a.data.keyframes){let p=s.get(c.position);p||(p=[],s.set(c.position,p)),p.push({kf:c,track:a,itemKey:ho.forTrackKeyframe(a.sheetObject,a.id,c.id)})}return s}function $ke(i){return i.children.flatMap(s4)}function s4(i){return i.children.flatMap(s=>s.type==="propWithChildren"?s4(s):Kke(s))}function Kke(i){let s=i.sheetObject,a=s.address.projectId,c=me().atomP.historic.coreByProject[a].sheetsById[s.address.sheetId].sequence.tracksByObject[s.address.objectKey],p=(0,EI.val)(c.trackIdByPropPath[mc(i.pathToProp)]);if(!p)return[];let f=(0,EI.val)(c.trackData[p]);return f?[{id:p,data:f,sheetObject:s}]:[]}function qke(i,s){return rs(i.children.flatMap(a=>a4(a,s)))}function a4(i,s){return rs(i.children.flatMap(a=>a.type==="propWithChildren"?a4(a,s):Xke(a,s)))}function Xke(i,s){var a,c;let p=i.sheetObject,f=p.address.projectId,g=me().atomP.historic.coreByProject[f].sheetsById[p.address.sheetId].sequence.tracksByObject[p.address.objectKey],y=(0,EI.val)(g.trackIdByPropPath[mc(i.pathToProp)]);return y?(c=(a=s[p.address.objectKey])==null?void 0:a[y])!=null?c:[]:[]}var EI,Ky=C(()=>{Fe(),EI=Mt,Nd(),vc(),ti()});function Yke(i,s){let[a,c]=sr(null),p=wp("useCaptureSelection");return Ei(s,(0,qy.useMemo)(()=>({debugName:"DopeSheetSelectionView/useCaptureSelection",dontBlockMouseDown:!0,lockCSSCursorTo:"cell",onDragStart(f){if(!f.shiftKey||f.target instanceof HTMLInputElement)return!1;let g=s.getBoundingClientRect(),y=f.clientX-g.left-(0,pl.val)(i.scaledSpace.leftPadding),w=(0,pl.val)(i.scaledSpace.toUnitSpace)(y);return a.current={h:[w,w],v:[f.clientY-g.top,f.clientY-g.top]},(0,pl.val)(i.selectionAtom).set({current:void 0}),{onDrag(S,M,R){let A=s.getBoundingClientRect(),k=R.clientX-A.left-(0,pl.val)(i.scaledSpace.leftPadding),D=(0,pl.val)(i.scaledSpace.toUnitSpace)(k);a.current={h:[a.current.h[0],D],v:[a.current.v[0],R.clientY-A.top]};let O=l4.boundsToSelection(p,(0,pl.val)(i),a.current);(0,pl.val)(i.selectionAtom).set({current:O})},onDragEnd(S){a.current=null}}}}),[i,s,a])),c}var pl,qy,Rp,rne,ine,one,l4,sne,ane,u4,lne,une,Zke=C(()=>{Fe(),no(),Jte(),Hke(),Gke(),mr(),hn(),pl=Mt,qy=Q(Re()),Ne(),du(),Ky(),xp(),Rp=5,ine=se.div(rne||(rne=G([`
  cursor: `,`;
`])),i=>i.isShiftDown?"cell":"default"),one=({layoutP:i,children:s,height:a})=>{let[c,p]=sr(null),f=Zte("Shift"),g=Yke(i,p),y=(0,qy.useRef)(g);return y.current=g,qy.default.createElement(ine,{style:{height:a+"px"},ref:c,isShiftDown:f,className:"selectionview"},g&&qy.default.createElement(lne,{state:g,layoutP:i}),s)},(i=>{let s=(g,y,w,S,M)=>{let R=SI(w);if(w.top+w.nodeHeight/2+Rp>S.v[0]&&w.top+w.nodeHeight/2-Rp<S.v[1])for(let[A,k]of R.byPosition){let D=y.scaledSpace.toUnitSpace(Rp);if(!(A+D<=S.h[0]||A-D>=S.h[1]))for(let O of k)tne(M,F=>F[O.track.sheetObject.address.objectKey].byTrackId[O.track.id].byKeyframeId[O.kf.id],!0)}c(g,y,w,S,M)},a={sheet(g,y,w,S,M){s(g,y,w,S,M)},propWithChildren(g,y,w,S,M){s(g,y,w,S,M)},sheetObject(g,y,w,S,M){s(g,y,w,S,M)},primitiveProp(g,y,w,S,M){let{sheetObject:R,trackId:A}=w,k=(0,pl.val)(me().atomP.historic.coreByProject[R.address.projectId].sheetsById[R.address.sheetId].sequence.tracksByObject[R.address.objectKey].trackData[A]);if(!(S.v[0]>w.top+w.heightIncludingChildren/2+Rp||w.top+w.heightIncludingChildren/2-Rp>S.v[1])){for(let D of k.keyframes)if(!(D.position+y.scaledSpace.toUnitSpace(Rp)<=S.h[0])){if(D.position-y.scaledSpace.toUnitSpace(Rp)>=S.h[1])break;tne(M,O=>O[R.address.objectKey].byTrackId[A].byKeyframeId[D.id],!0)}}}},c=(g,y,w,S,M)=>{if("children"in w)for(let R of w.children)p(g,y,R,S,M)};function p(g,y,w,S,M){if(!w.shouldRender||S.v[0]>w.top+w.heightIncludingChildren||w.top>S.v[1])return;let R=a[w.type];R?R(g,y,w,S,M):c(g,y,w,S,M)}function f(g,y,w){let S={};w=u4(w);let M=y.tree;p(g.utilFor.internal(),y,M,w,S);let R=y.tree.sheet;return{type:"DopeSheetSelection",byObjectKey:S,getDragHandlers(A){return{debugName:"DopeSheetSelectionView/boundsToSelection",onDragStart(){let k,D=y.scaledSpace.toUnitSpace;return{onDrag(O,F,V){k&&(k.discard(),k=void 0);let W=Is.checkIfMouseEventSnapToPos(V,{ignore:A.domNode}),X=W!=null?W-A.positionAtStartOfDrag:D(O);k=me().tempTransaction(({stateEditors:re})=>{let ne=re.coreByProject.historic.sheetsById.sequence.transformKeyframes;for(let ae of Object.keys(S)){let{byTrackId:xe}=S[ae];for(let fe of Object.keys(xe)){let{byKeyframeId:ge}=xe[fe];ne({trackId:fe,keyframeIds:Object.keys(ge),translate:X,scale:1,origin:0,snappingFunction:R.getSequence().closestGridPosition,objectKey:ae,projectId:A.projectId,sheetId:A.sheetId})}}})},onDragEnd(O){O?k==null||k.commit():k==null||k.discard()}}}}},delete(){me().transaction(({stateEditors:A})=>{let k=A.coreByProject.historic.sheetsById.sequence.deleteKeyframes;for(let D of Object.keys(S)){let{byTrackId:O}=S[D];for(let F of Object.keys(O)){let{byKeyframeId:V}=O[F];k(z(j({},R.address),{objectKey:D,trackId:F,keyframeIds:Object.keys(V)}))}}})}}}i.boundsToSelection=f})(l4||(l4={})),ane=se.div(sne||(sne=G([`
  position: absolute;
  background: rgba(255, 255, 255, 0.1);
  border: 1px dashed rgba(255, 255, 255, 0.4);
  box-sizing: border-box;
`]))),u4=i=>({h:[...i.h].sort((s,a)=>s-a),v:[...i.v].sort((s,a)=>s-a)}),lne=({state:i,layoutP:s})=>{let a=zke(i);return Un(()=>{let c=(0,pl.val)(a.pointer),p=u4(c),f=(0,pl.val)(s.scaledSpace.fromUnitSpace),g=(0,pl.val)(s.scaledSpace.leftPadding),y=p.h.map(f).map(A=>A+g),w=p.v[0],S=p.v[1]-p.v[0],M=y[0],R=y[1]-y[0];return qy.default.createElement(ane,{style:{top:w+"px",height:S+"px",left:M+"px",width:R+"px"}})},[s,a])},une=one}),fv,cne,dne,c4,hne,pne,fne,mne=C(()=>{Py(),fv=Q(Re()),Ne(),$d(),dne=se.div(cne||(cne=G([`
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  overflow-x: hidden;
  overflow-y: scroll;
  z-index: `,`;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
`])),()=>Pc.scrollableArea),c4=(0,fv.createContext)(iu),hne=()=>(0,fv.useContext)(c4),pne=i=>{let s=(0,fv.useRef)(null),a=(0,fv.useCallback)(c=>{s.current.scrollBy(0,c.deltaY)},[]);return fv.default.createElement(c4.Provider,{value:a},fv.default.createElement(dne,{ref:s},i.children))},fne=pne}),vne,Qke=C(()=>{vne='data:image/svg+xml,<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">%0A  <path d="M1 7V1H7" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M7 33H1L1 27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M33 27V33H27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M27 1L33 1V7" stroke="%2374FFDE" stroke-width="0.25" />%0A</svg>'}),fl,CI=C(()=>{fl=(i,s=i)=>`
  left: `.concat(i*-.5,`px;
  top: `).concat(s*-.5,`px;
  width: `).concat(i,`px;
  height: `).concat(s,`px;
`)}),PI,gne,yne,Jke=C(()=>{PI=Mt,gne=(0,PI.prism)(()=>{let[i,s]=PI.prism.state("pos",null);return PI.prism.effect("setupListeners",()=>{let a=c=>{s(c)};return document.addEventListener("mousemove",a),()=>{document.removeEventListener("mousemove",a)}},[]),i}),yne=gne}),Ud,Rs,LS,bne,_ne,wne,xne,Vd,gc,kI,Sne,Ene,jo=C(()=>{Ud=Mt,Jke(),ti(),Rs=Q(Re()),LS=(0,Rs.createContext)(null),bne=0,_ne=({children:i,layoutP:s})=>{let a=(0,Rs.useMemo)(()=>new Ud.Atom([]),[]),c=(0,Rs.useMemo)(()=>(0,Ud.prism)(()=>{let g=Ud.prism.memo("p",()=>Sne(s),[s]).getValue(),y=(0,Ud.val)(a.pointer);return y.length>0?yd(y).position:g}),[s]),p=(0,Rs.useCallback)(()=>{let g=bne++;return a.reduce(y=>[...y,{id:g,position:[-1,0]}]),{set:y=>{a.reduce(w=>{let S=w.findIndex(R=>R.id===g);if(S===-1)return console.warn("Lock is already freed. This is a bug."),w;let M=[...w];return M.splice(S,1,{id:g,position:[y,y===-1?0:1]}),M})},unlock:()=>{a.reduce(y=>y.filter(w=>w.id!==g))}}},[]),f={currentD:c,getLock:p};return Rs.default.createElement(LS.Provider,{value:f},i)},wne=()=>(0,Rs.useContext)(LS).currentD,xne=()=>{let{getLock:i}=(0,Rs.useContext)(LS),s=(0,Rs.useRef)();return(0,Rs.useLayoutEffect)(()=>()=>{var a;(a=s.current)==null||a.unlock()},[]),(0,Rs.useMemo)(()=>{let a;return(c,p)=>{var f,g;(a==null?void 0:a.shouldLock)!==c&&(c?s.current=i():(f=s.current)==null||f.unlock()),(a==null?void 0:a.pos)!==p&&c&&((g=s.current)==null||g.set(p)),a={shouldLock:c,pos:p}}},[i])},Vd=(i,s)=>{let{getLock:a}=(0,Rs.useContext)(LS),c=(0,Rs.useRef)();(0,Rs.useLayoutEffect)(()=>{if(i)return c.current=a(),()=>{c.current.unlock()}},[i,a]),(0,Rs.useLayoutEffect)(()=>{i&&c.current.set(s)},[s,i])},gc=i=>({[kI]:i==="hide"?i:i.toFixed(3)}),kI="data-theatre-lock-framestamp-to",Sne=i=>(0,Ud.prism)(()=>{let s=(0,Ud.val)(i.rightDims),a=(0,Ud.val)(i.clippedSpace.toUnitSpace),c=(0,Ud.val)(yne);if(!c)return[-1,0];for(let M of c.composedPath()){if(!(M instanceof HTMLElement||M instanceof SVGElement))break;if(M.hasAttribute(kI)){let R=M.getAttribute(kI);if(typeof R!="string")continue;if(R==="hide")return[-1,0];let A=parseFloat(R);if(isFinite(A)&&A>=0)return[A,2]}}let{clientX:p,clientY:f}=c,{screenX:g,screenY:y,width:w,height:S}=s;if(sx(p,g,g+w)&&sx(f,y+16,y+S)){let M=p-g;return[a(M),3]}else return[-1,0]}),Ene=_ne}),Cne,NS,d4,Pne,kne,yc,Tne=C(()=>{vr(),Ca(),Ne(),Qke(),CI(),du(),jo(),Cne=12,NS=34,d4="beingDragged",yc={BEING_DRAGGED_CLASS:d4,CSS:No(Pne||(Pne=G([`
    position: absolute;
    `,`;
    `,`;

    &.`,` {
      pointer-events: none !important;
    }
  `])),fl(Cne),hr,d4),CSS_WHEN_SOMETHING_DRAGGING:No(kne||(kne=G([`
    pointer-events: auto;
    cursor: var(`,`);

    //  thing
    // This box extends the hitzone so the user does not
    // accidentally leave the hitzone
    &:hover:after {
      position: absolute;
      top: calc(50% - `,`px);
      left: calc(50% - `,`px);
      width: `,`px;
      height: `,`px;
      display: block;
      content: ' ';
      background: url(`,`) no-repeat 100% 100%;
      // This icon might also fit: GiConvergenceTarget
    }
  `])),Id,NS/2,NS/2,NS,NS,vne),reactProps(i){return z(j(j({},gc(i.position)),Is.includePositionSnapAttrs(i.position)),{className:i.isDragging?yc.BEING_DRAGGED_CLASS:""})}}});function h4(){BS.set({mode:"snapToAll"})}function mv(){BS.set({mode:"snapToNone"})}function Mne(i){BS.set({mode:"snapToSome",positions:i})}function Ane(i,s){return Object.fromEntries(Object.entries(i).map(([a,c])=>[a,Object.fromEntries(Object.entries(c.trackData).map(([p,f])=>[p,f.keyframes.filter(g=>s(g,{trackId:p,trackData:f,objectKey:a})).map(g=>g.position)]))]))}var Ine,Rne,p4,One,Dne,Lne,Nne,Fne,FS,BS,f4,vv=C(()=>{Ine=Mt,Rne=Mt,p4=Q(Re()),Ne(),Tne(),Dne=se.div(One||(One=G([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  #pointer-root.draggingPositionInSequenceEditor & {
    `,`
  }
`])),yc.CSS,yc.CSS_WHEN_SOMETHING_DRAGGING),Nne=se.div(Lne||(Lne=G([`
  position: absolute;
`]))),Fne=i=>p4.default.createElement(Nne,{style:{top:"".concat(i.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,Rne.val)(i.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(i.position,"px))")}},p4.default.createElement(Dne,j({},yc.reactProps({isDragging:!1,position:i.position})))),FS=Fne,BS=new Ine.Atom({mode:"snapToNone"}),f4=BS.prism});function eTe(i,s){let a=(0,gv.useMemo)(()=>({debugName:"HorizontallyScrollableArea",onDragStart(p){if(p.target instanceof HTMLInputElement||p.shiftKey||p.altKey||p.ctrlKey||p.metaKey||p.composedPath().some(R=>R instanceof HTMLElement&&R.draggable===!0))return!1;let f=p.clientX-s.getBoundingClientRect().left,g=ci((0,Ci.val)(i.clippedSpace.toUnitSpace)(f),0,1/0),y=(0,Ci.val)(i.seeker.setIsSeeking),w=(0,Ci.val)(i.sheet).getSequence();w.position=g;let S=g,M=(0,Ci.val)(i.scaledSpace.toUnitSpace);return y(!0),h4(),{onDrag(R,A,k){let D=M(R),O=ci(S+D,0,w.length),F=Is.checkIfMouseEventSnapToPos(k,{});F!=null&&(O=F),w.position=O},onDragEnd(){y(!1),mv()}}}}),[i,s]),[c]=Ei(s,a);dl(c,"draggingPositionInSequenceEditor","ew-resize")}function tTe(i,s){let a=hne();(0,gv.useLayoutEffect)(()=>{if(!s)return;let c=f=>{if(f.ctrlKey){f.preventDefault(),f.stopPropagation();let g=f.clientX-s.getBoundingClientRect().left,y=(0,Ci.val)(i.clippedSpace.toUnitSpace)(g),w=(0,Ci.val)(i.clippedSpace.range),S=1+m4(f.deltaY,[-50,50])*.03,M=bd(w,k=>(k-y)*S+y),R=(0,Ci.val)(i.sheet).getSequence().length,A=R+R*.25;(0,Ci.val)(i.clippedSpace.setRange)(nTe(M,[0,A]));return}else if(f.shiftKey){f.preventDefault(),f.stopPropagation();let g=(0,Ci.val)(i.sheet).getSequence().length,y=(0,Ci.val)(i.clippedSpace.range),w=(y.end-y.start)/g,S=m4(f.deltaY||f.deltaX,[-50,50])*.05*w,M=bd(y,R=>R+S);(0,Ci.val)(i.clippedSpace.setRange)(M);return}else{a(f),f.preventDefault(),f.stopPropagation();let g=(0,Ci.val)(i.scaledSpace.toUnitSpace)(f.deltaX*1),y=(0,Ci.val)(i.clippedSpace.range),w=bd(y,S=>S+g);(0,Ci.val)(i.clippedSpace.setRange)(w);return}},p={capture:!0,passive:!1};return s.addEventListener("wheel",c,p),()=>{s.removeEventListener("wheel",c,p)}},[s,i]),Ei(s,(0,gv.useMemo)(()=>({onDragStart(c){let p=(0,Ci.val)(i.clippedSpace.range),f=(0,Ci.val)(i.clippedSpace.setRange),g=(0,Ci.val)(i.scaledSpace.toUnitSpace);return c.preventDefault(),c.stopPropagation(),{onDrag(y,w,S,M,R){a({deltaY:-R});let A=-g(y),k=bd(p,D=>D+A);f(k)}}},debugName:"HorizontallyScrollableArea Middle Button Drag",buttons:[1],lockCSSCursorTo:"grabbing"}),[i]))}function m4(i,[s,a]){return Math.max(Math.min(i,a),s)}function nTe(i,s){return bd(i,a=>m4(a,s))}function rTe(i,s){(0,gv.useLayoutEffect)(()=>{if(!s)return;let a=(0,Ci.prism)(()=>{let g=(0,Ci.val)(i.clippedSpace.range);return(0,Ci.val)(i.scaledSpace.fromUnitSpace)(g.start)}),c=()=>{let g=a.getValue();s.scrollLeft=g},p=a.onStale(c);c();let f=setTimeout(c,100);return()=>{clearTimeout(f),p()}},[i,s])}var Ci,gv,Bne,Une,Vne,v4,jne=C(()=>{no(),mr(),hn(),Ci=Mt,ti(),gv=Q(Re()),Ne(),mne(),vr(),Ca(),du(),vv(),Une=se.div(Bne||(Bne=G([`
  position: absolute;

  right: 0;
  overflow-x: scroll;
  overflow-y: hidden;
  `,`;

  // hide the scrollbar on Gecko
  scrollbar-width: none;

  // hide the scrollbar on Webkit/Blink
  &::-webkit-scrollbar {
    display: none;
  }
`])),hr),Vne=gv.default.memo(({layoutP:i,children:s,height:a})=>{let{width:c,unitSpaceToScaledSpaceMultiplier:p}=Un(()=>({width:(0,Ci.val)(i.rightDims.width),unitSpaceToScaledSpaceMultiplier:(0,Ci.val)(i.scaledSpace.fromUnitSpace)(1)}),[i]),[f,g]=sr(null);return tTe(i,g),eTe(i,g),rTe(i,g),gv.default.createElement(Une,{ref:f,style:{width:c+"px",height:a+"px","--unitSpaceToScaledSpaceMultiplier":p}},s)}),v4=Vne}),TI,zne,Hne,Gne,Wne,$ne,Kne,qne,Xy,MI=C(()=>{TI=Q(Re()),Ne(),Hne=se.li(zne||(zne=G([`
  margin: 0;
  padding: 0;
  list-style: none;
  box-sizing: border-box;
  position: relative;
`]))),Wne=se.div(Gne||(Gne=G([`
  box-sizing: border-box;
  width: 100%;
  position: relative;

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -40px;
    top: 0;
    bottom: 0;
    right: 0;
    box-sizing: border-box;
    border-bottom: 1px solid #252b3869;
    background: `,`;
  }
`])),i=>i.isEven?"transparent":"#6b8fb505"),Kne=se.ul($ne||($ne=G([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),qne=({leaf:i,children:s,node:a,isCollapsed:c})=>{let p=Array.isArray(s)&&s.length>0;return i.shouldRender?TI.default.createElement(Hne,null,TI.default.createElement(Wne,{style:{height:i.nodeHeight+"px"},isEven:i.n%2===0},a),p&&TI.default.createElement(Kne,null,s)):null},Xy=qne}),iTe=K((i,s)=>{(function(){var a=this,c={};typeof i<"u"?s.exports=c:a.fuzzy=c,c.simpleFilter=function(p,f){return f.filter(function(g){return c.test(p,g)})},c.test=function(p,f){return c.match(p,f)!==null},c.match=function(p,f,g){g=g||{};var y=0,w=[],S=f.length,M=0,R=0,A=g.pre||"",k=g.post||"",D=g.caseSensitive&&f||f.toLowerCase(),O;p=g.caseSensitive&&p||p.toLowerCase();for(var F=0;F<S;F++)O=f[F],D[F]===p[y]?(O=A+O+k,y+=1,R+=1+R):R=0,M+=R,w[w.length]=O;return y===p.length?(M=D===p?1/0:M,{rendered:w.join(""),score:M}):null},c.filter=function(p,f,g){return!f||f.length===0?[]:typeof p!="string"?f:(g=g||{},f.reduce(function(y,w,S,M){var R=w;g.extract&&(R=g.extract(w));var A=c.match(p,R,g);return A!=null&&(y[y.length]={string:A.rendered,score:A.score,index:S,original:w}),y},[]).sort(function(y,w){var S=w.score-y.score;return S||y.index-w.index}))}})()});function oTe(i,s){let[a,c]=(0,AI.useState)(!1),p=(0,AI.useRef)(s);return a||(p.current=s),(0,AI.useMemo)(()=>i(c),p.current)}var AI,sTe=C(()=>{AI=Q(Re())}),g4,Op,II=C(()=>{g4="rgba(26, 28, 30, 0.97);",Op="#272B2F"});function Xne(i,s,a,c){let p=oTe(f=>({debugName:"CurveSegmentEditor/useKeyframeDrag",lockCSSCursorTo:"move",onDragStart(){return f(!0),{onDrag(g,y){i&&a.onCurveChange(c(g,y))},onDragEnd(g){f(!1),a.onCancelCurveChange()}}}}),[i,a.onCurveChange,a.onCancelCurveChange]);Ei(s,p)}var ur,RI,US,Yy,Yne,VS,Zne,OI,Qne,Jne,ere,Zy,tre,yv,nre,rre,y4,ire,DI,ore,b4,sre,are,aTe=C(()=>{ur=Q(Re()),no(),mr(),B0(),Ne(),vr(),sTe(),II(),RI=.12,US=1+RI*2,Yy=.01,Yne=8,VS=(1-Yy)/(Yne-1),Zne="#3EAAA4",OI="#3EAAA4",Qne="#3EAAA4",Jne="#3EAAA4",ere="#3EAAA4",Zy="#3EAAA4",tre="#3EAAA4",yv="#B3B3B3",nre="#3eaaa4",rre="#67dfd8",y4=["goldenrod","cornflowerblue","dodgerblue","lawngreen"],DI=se.circle(ire||(ire=G([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.04px;
  pointer-events: none;
  transition: r 0.15s;
  fill: `,`;
`])),nre),b4=se.circle(ore||(ore=G([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.09px;
  cursor: move;
  `,`;
  &:hover {
    opacity: 0.4;
  }
  &:hover + `,` {
    fill: `,`;
  }
`])),hr,DI,rre),sre=i=>{let{curveConnection:{left:s,right:a},backgroundConnections:c}=i,p=Math.min(0,1-a.handles[1],1-s.handles[3]),f=Math.max(1,1-a.handles[1],1-s.handles[3]),g=Math.max(1,f-p),y=V=>(V-p)/g,[w,S]=sr(null),M=US/((S==null?void 0:S.clientWidth)||1),R=US/((S==null?void 0:S.clientHeight)||1),[A,k]=sr(null);Xne(S,k,i,(V,W)=>{let X=ci(s.handles[2]+V*M,0,1),re=s.handles[3]-W*R;return[X,re,a.handles[0],a.handles[1]]});let[D,O]=sr(null);Xne(S,O,i,(V,W)=>{let X=ci(a.handles[0]+V*M,0,1),re=a.handles[1]-W*R;return[s.handles[2],s.handles[3],X,re]});let F=V=>"M0 ".concat(y(1)," C").concat(V.left.handles[2]," ").concat(y(1-V.left.handles[3])," ").concat(V.right.handles[0]," ").concat(y(1-V.right.handles[1])," 1 ").concat(y(0));return ur.default.createElement("svg",{height:"100%",width:"100%",ref:w,viewBox:"".concat(-RI," ").concat(-RI," ").concat(US," ").concat(US),xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none"},ur.default.createElement("linearGradient",{id:"myGradient",gradientTransform:"rotate(90)"},ur.default.createElement("stop",{offset:y(-1),stopColor:tre}),ur.default.createElement("stop",{offset:y(0),stopColor:Zy}),ur.default.createElement("stop",{offset:y(.3),stopColor:ere}),ur.default.createElement("stop",{offset:y(.5),stopColor:Jne}),ur.default.createElement("stop",{offset:y(.7),stopColor:Qne}),ur.default.createElement("stop",{offset:y(1),stopColor:OI}),ur.default.createElement("stop",{offset:y(2),stopColor:Zne})),ur.default.createElement("pattern",{id:"dot-background-pattern-1",width:VS,height:VS/g,y:-p/g},ur.default.createElement("rect",{width:Yy,height:Yy,fill:yv,opacity:.3})),ur.default.createElement("rect",{x:0,y:0,width:"1",height:1,fill:"url(#dot-background-pattern-1)"}),ur.default.createElement("pattern",{id:"dot-background-pattern-2",width:VS,height:VS},ur.default.createElement("rect",{width:Yy,height:Yy,fill:yv})),ur.default.createElement("rect",{x:0,y:y(0),width:"1",height:y(1)-y(0),fill:"url(#dot-background-pattern-2)"}),!s.type||s.type==="bezier"?ur.default.createElement(ur.default.Fragment,null,ur.default.createElement("line",{x1:0,y1:y(1),x2:s.handles[2],y2:y(1-s.handles[3]),stroke:yv,strokeWidth:"0.01"}),ur.default.createElement("line",{x1:1,y1:y(0),x2:a.handles[0],y2:y(1-a.handles[1]),stroke:yv,strokeWidth:"0.01"}),ur.default.createElement("path",{d:F(i.curveConnection),stroke:"none",fill:"url('#myGradient')",opacity:"0.1"}),c.map((V,W)=>ur.default.createElement("path",{key:V.objectKey+"/"+V.left.id,d:F(V),stroke:y4[W%y4.length],opacity:.6,strokeWidth:"0.01"})),ur.default.createElement("path",{d:F(i.curveConnection),stroke:"url('#myGradient')",strokeWidth:"0.02"}),ur.default.createElement("circle",{cx:0,cy:y(1),r:"0.025",stroke:OI,strokeWidth:"0.02",fill:Op}),ur.default.createElement("circle",{cx:1,cy:y(0),r:"0.025",stroke:Zy,strokeWidth:"0.02",fill:Op}),ur.default.createElement(b4,{ref:A,cx:s.handles[2],cy:y(1-s.handles[3]),fill:OI,opacity:.2}),ur.default.createElement(DI,{cx:s.handles[2],cy:y(1-s.handles[3])}),ur.default.createElement(b4,{ref:D,cx:a.handles[0],cy:y(1-a.handles[1]),fill:Zy,opacity:.2}),ur.default.createElement(DI,{cx:a.handles[0],cy:y(1-a.handles[1])})):ur.default.createElement(ur.default.Fragment,null,ur.default.createElement("line",{x1:0,y1:y(1),x2:1,y2:y(1),stroke:yv,strokeWidth:"0.01"}),ur.default.createElement("line",{x1:1,y1:y(1),x2:1,y2:0,stroke:yv,strokeWidth:"0.01"}),ur.default.createElement("circle",{cx:0,cy:1,r:"0.025",stroke:Zy,strokeWidth:"0.02",fill:Op}),ur.default.createElement("circle",{cx:1,cy:0,r:"0.025",stroke:Zy,strokeWidth:"0.02",fill:Op})))},are=sre});function LI(i){return i.map(s=>s.toFixed(3)).join(", ")}function NI(i){if(!i||(i==null?void 0:i.length)>lre)return null;let s=i.split(",");if(s.length!==4)return null;let a=s.map(c=>Number(c.trim()));return!a.every(c=>isFinite(c))||a[0]<0||a[0]>1||a[2]<0||a[2]>1?null:a}function lTe(i,s,a={threshold:.02}){if(!i||!s)return!1;let c=0;for(let p=0;p<4;p++)c+=Math.abs(i[p]-s[p]);return c<a.threshold}var lre,FI,ure=C(()=>{lre=128,FI=[{label:"Quad Out",value:"0.250, 0.460, 0.450, 0.940"},{label:"Quad In Out",value:"0.455, 0.030, 0.515, 0.955"},{label:"Quad In",value:"0.550, 0.085, 0.680, 0.530"},{label:"Cubic Out",value:"0.215, 0.610, 0.355, 1.000"},{label:"Cubic In Out",value:"0.645, 0.045, 0.355, 1.000"},{label:"Cubic In",value:"0.550, 0.055, 0.675, 0.190"},{label:"Quart Out",value:"0.165, 0.840, 0.440, 1.000"},{label:"Quart In Out",value:"0.770, 0.000, 0.175, 1.000"},{label:"Quart In",value:"0.895, 0.030, 0.685, 0.220"},{label:"Quint Out",value:"0.230, 1.000, 0.320, 1.000"},{label:"Quint In Out",value:"0.860, 0.000, 0.070, 1.000"},{label:"Quint In",value:"0.755, 0.050, 0.855, 0.060"},{label:"Sine Out",value:"0.390, 0.575, 0.565, 1.000"},{label:"Sine In Out",value:"0.445, 0.050, 0.550, 0.950"},{label:"Sine In",value:"0.470, 0.000, 0.745, 0.715"},{label:"Expo Out",value:"0.190, 1.000, 0.220, 1.000"},{label:"Expo In Out",value:"1.000, 0.000, 0.000, 1.000"},{label:"Expo In",value:"0.780, 0.000, 0.810, 0.00"},{label:"Circ Out",value:"0.075, 0.820, 0.165, 1.000"},{label:"Circ In Out",value:"0.785, 0.135, 0.150, 0.860"},{label:"Circ In",value:"0.600, 0.040, 0.980, 0.335"},{label:"Back Out",value:"0.175, 0.885, 0.320, 1.275"},{label:"Back In Out",value:"0.680, -0.550, 0.265, 1.550"},{label:"Back In",value:"0.600, -0.280, 0.735, 0.045"},{label:"linear",value:"0.5, 0.5, 0.5, 0.5"},{label:"In Out",value:"0.42,0,0.58,1"},{label:"Hold",value:"0, 0, Infinity, Infinity"}]}),as,BI,bv,_4,cre,dre,jS,w4,x4,hre,pre,uTe=C(()=>{as=Q(Re()),BI=.75,bv=.1,_4=1+BI*2,cre="#F5F5F5",dre="#888888",jS="#4f4f4f",w4="rgba(255, 255, 255, 0.1)",x4=i=>1-i,hre=i=>{let{easing:s,isSelected:a}=i,c=a?cre:dre,p="".concat(-BI," ").concat(-BI," ").concat(_4," ").concat(_4);if(s){let f=[s[0],x4(s[1])],g=[s[2],x4(s[3])];return as.default.createElement("svg",{height:"100%",width:"100%",viewBox:p,fill:"none",xmlns:"http://www.w3.org/2000/svg"},as.default.createElement("line",{x1:"0",y1:"1",x2:f[0],y2:f[1],stroke:jS,strokeWidth:"0.1"}),as.default.createElement("line",{x1:"1",y1:"0",x2:g[0],y2:g[1],stroke:jS,strokeWidth:"0.1"}),as.default.createElement("circle",{cx:f[0],cy:f[1],r:.1,fill:w4}),as.default.createElement("circle",{cx:g[0],cy:g[1],r:.1,fill:w4}),as.default.createElement("circle",{cx:f[0],cy:f[1],r:bv,fill:jS}),as.default.createElement("circle",{cx:g[0],cy:g[1],r:bv,fill:jS}),as.default.createElement("path",{d:"M0 1 C".concat(f[0]," ").concat(f[1]," ").concat(g[0],` 
        `).concat(g[1]," 1 0"),stroke:c,strokeWidth:"0.08"}),as.default.createElement("circle",{cx:0,cy:1,r:bv,fill:c}),as.default.createElement("circle",{cx:1,cy:0,r:bv,fill:c}))}return as.default.createElement("svg",{height:"100%",width:"100%",viewBox:p,fill:"none",xmlns:"http://www.w3.org/2000/svg"},as.default.createElement("line",{x1:"0",y1:"1",x2:1,y2:1,stroke:c,strokeWidth:"0.08"}),as.default.createElement("line",{x1:"1",y1:"0",x2:1,y2:1,stroke:c,strokeWidth:"0.08"}),as.default.createElement("circle",{cx:0,cy:1,r:bv,fill:c}),as.default.createElement("circle",{cx:1,cy:0,r:bv,fill:c}))},pre=hre}),zS,fre,mre,vre,gre,yre,bre,_re,cTe=C(()=>{xS(),zS=Q(Re()),Ne(),ure(),uTe(),gA(),II(),dc(),vre=se.div(mre||(mre=G([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  aspect-ratio: 1;

  transition: background-color 0.15s;
  background-color: `,`;
  border-radius: 2px;
  cursor: pointer;
  outline: none;

  `,`

  &:hover {
    background-color: #31353a;
  }

  &:focus {
    background-color: #383d42;
  }
`])),Op,({isSelected:i})=>i&&No(fre||(fre=G([`
      background-color: #383d42;
    `])))),yre=se(cc)(gre||(gre=G([`
  padding: 0.5em;
  color: white;
  max-width: 240px;
  pointer-events: none !important;
  --popover-bg: black;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: transparent;
  box-shadow: none;
`]))),bre=zS.default.forwardRef((i,s)=>{let[a,c]=jy({enabled:!0,verticalPlacement:i.tooltipPlacement,verticalGap:0},()=>zS.default.createElement(yre,{showPopoverEdgeTriangle:!1},i.easing.label));return zS.default.createElement(vre,j({ref:vA([c,s])},i),a,zS.default.createElement(pre,{easing:NI(i.easing.value),isSelected:i.isSelected}))}),_re=bre});function dTe(i){var s;let[a,c]=(0,wre.useState)(null),p=g=>{if(a===null){i.items.length>0&&c(0);return}let y=a+g*i.uiColumns,w=y<0,S=y>i.items.length-1;if(w||S){if(i.canVerticleExit&&i.canVerticleExit(w?"top":"bottom")){c(null);return}return}c(y)},f=g=>{a===null?c(mTe(g,i.items.length)):a+g<0?c(null):c(Math.min(a+g,i.items.length-1))};return{focusFirstItem(){c(0)},onParentEltKeyDown:g=>{if(g.key==="ArrowRight")f(1);else if(g.key==="ArrowLeft")f(-1);else if(g.key==="ArrowUp")p(-1);else if(g.key==="ArrowDown")p(1);else return 0;return 1},gridItems:i.items.map((g,y)=>i.renderItem({isSelected:y===a,item:g,select(w){c(y),i.onSelectItem(g)===1&&(w==null||w.preventDefault(),w==null||w.stopPropagation())}})),currentSelection:(s=i.items[a??-1])!=null?s:null}}var wre,hTe=C(()=>{wre=Q(Re()),VI()});function xre(i,s,a){var c;(c=i.current)==null||c.discard(),i.current=null;let p=NI(a);p===null?i.current=fTe(s):i.current=pTe(s,p)}function Sre(i){var s;(s=i.current)==null||s.discard(),i.current=null}function pTe(i,s){return me().tempTransaction(({stateEditors:a})=>{let{setHandlesForKeyframe:c,setKeyframeType:p}=a.coreByProject.historic.sheetsById.sequence;for(let{projectId:f,sheetId:g,objectKey:y,trackId:w,left:S,right:M}of i)c({projectId:f,sheetId:g,objectKey:y,trackId:w,keyframeId:S.id,start:[s[0],s[1]]}),c({projectId:f,sheetId:g,objectKey:y,trackId:w,keyframeId:M.id,end:[s[2],s[3]]}),p({projectId:f,sheetId:g,objectKey:y,trackId:w,keyframeId:S.id,keyframeType:"bezier"})})}function fTe(i){return me().tempTransaction(({stateEditors:s})=>{let{setKeyframeType:a}=s.coreByProject.historic.sheetsById.sequence;for(let{projectId:c,sheetId:p,objectKey:f,trackId:g,left:y}of i)a({projectId:c,sheetId:p,objectKey:f,trackId:g,keyframeId:y.id,keyframeType:"hold"})})}function mTe(i,s){return(i%s+s)%s}function vTe(i,s){return()=>setTimeout(i,s)}function gTe({left:i,right:s}){return({left:a,right:c})=>i.handles[2]!==a.handles[2]||i.handles[3]!==a.handles[3]||s.handles[0]!==c.handles[0]||s.handles[1]!==c.handles[1]}var UI,hi,Ere,S4,E4,Cre,Pre,kre,Tre,Mre,Are,Ire,Rre,Ore,Dre,Lre,Nre,C4,yTe,P4,Fre,VI=C(()=>{UI=Mt,hi=Q(Re()),Ne(),Ere=Q(iTe()),Fe(),aTe(),cTe(),ure(),II(),mr(),hTe(),S4=3,E4=53,Cre=25,kre=se.div(Pre||(Pre=G([`
  background: `,`;
  display: grid;
  grid-template-areas:
    'search  tween'
    'presets tween';
  grid-template-rows: 32px 1fr;
  grid-template-columns: `,`px 120px;
  gap: 1px;
  height: 120px;
`])),g4,S4*E4),Mre=se.div(Tre||(Tre=G([`
  overflow: auto;
  grid-area: presets;

  display: grid;
  grid-template-columns: repeat(`,`, 1fr);
  grid-auto-rows: min-content;
  gap: 1px;

  overflow-y: scroll;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
  &::-webkit-scrollbar {
    /* WebKit */
    width: 0;
    height: 0;
  }
`])),S4),Ire=se.input.attrs({type:"text"})(Are||(Are=G([`
  background-color: `,`;
  border: none;
  border-radius: 2px;
  color: rgba(255, 255, 255, 0.8);
  padding: 6px;
  font-size: 12px;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: 100%;
  box-sizing: border-box;

  grid-area: search;

  &:hover {
    background-color: #212121;
  }

  &:focus {
    background-color: rgba(16, 16, 16, 0.26);
    outline: 1px solid rgba(0, 0, 0, 0.35);
  }
`])),Op),Ore=se.div(Rre||(Rre=G([`
  grid-area: tween;
  background: `,`;
`])),Op),Lre=se.div(Dre||(Dre=G([`
  grid-column: 1 / 4;
  padding: 6px;
  color: #888888;
`]))),Nre=i=>{let s=(0,hi.useMemo)(()=>[i.curveConnection,...i.additionalConnections],[i.curveConnection,...i.additionalConnections]),a=(0,hi.useRef)(null);(0,hi.useEffect)(()=>{let le=Fre(s);return()=>{var Ae;le(),(Ae=a.current)==null||Ae.commit()}},[a]);let c=[i.curveConnection.left.handles[2],i.curveConnection.left.handles[3],i.curveConnection.right.handles[0],i.curveConnection.right.handles[1]],p=(0,hi.useRef)(null);(0,hi.useLayoutEffect)(()=>{var le,Ae;(le=p.current)==null||le.select(),(Ae=p.current)==null||Ae.focus()},[p.current]);let[f,g]=(0,hi.useState)(LI(c)),y=le=>{le!==void 0&&(M(1),g(le.target.value),NI(le.target.value)&&A(le.target.value))},w=le=>{var Ae,Y;M(1),(le.key==="ArrowDown"||le.key==="ArrowUp")&&le.preventDefault(),le.key==="ArrowDown"?(Qe.focusFirstItem(),(Y=(Ae=ae.current[V[0].label])==null?void 0:Ae.current)==null||Y.focus()):le.key==="Escape"?(Sre(a),i.onRequestClose("key Escape")):le.key==="Enter"&&i.onRequestClose("key Enter")},[S,M]=(0,hi.useState)(0);(0,hi.useEffect)(()=>{S===2?g(LI(c)):S===3&&f!==""&&g("")},s);let[R,A]=(0,hi.useState)(LI(c)),[k,D]=(0,hi.useState)(null);(0,hi.useEffect)(()=>{var le;S!==0&&S!==3&&xre(a,s,(le=k??R)!=null?le:"")},[k,R,S]),s.some(gTe(i.curveConnection))&&S===0&&M(3);let O=le=>{var Ae,Y;M(2);let Ue=LI(le);g(Ue),A(Ue),(Ae=p.current)==null||Ae.select(),(Y=p.current)==null||Y.focus()},F=()=>{},V=(0,hi.useMemo)(()=>/^[A-Za-z]/.test(f)?Ere.default.filter(f,FI,{extract:le=>le.label}).map(le=>le.original):FI,[f]);(0,hi.useEffect)(()=>{S===1&&V[0]&&A(V[0].value)},[V]);let W=le=>{le.key==="Escape"?(Sre(a),i.onRequestClose("key Escape"),le.stopPropagation()):le.key==="Enter"&&(i.onRequestClose("key Enter"),le.stopPropagation())},X=le=>{S===0&&M(2),D(le.value)},re=()=>D(null),ne=le=>(xre(a,s,le.value),i.onRequestClose("selected easing option"),1),ae=(0,hi.useRef)(FI.reduce((le,Ae)=>(le[Ae.label]={current:null},le),{})),[xe,fe]=sr(null),[ge,Ie]=(0,hi.useState)(0);(0,hi.useEffect)(()=>{let le=()=>{var Ae;Ie((Ae=fe==null?void 0:fe.scrollTop)!=null?Ae:0)};return fe==null||fe.addEventListener("scroll",le),()=>fe==null?void 0:fe.removeEventListener("scroll",le)},[fe]);let Qe=dTe({items:V,uiColumns:3,onSelectItem:ne,canVerticleExit(le){var Ae,Y;return le==="top"?((Ae=p.current)==null||Ae.select(),(Y=p.current)==null||Y.focus(),1):0},renderItem:({item:le,select:Ae})=>{var Y,Ue;return hi.default.createElement(_re,{key:le.label,easing:le,tabIndex:0,onKeyDown:W,ref:ae.current[le.label],onMouseOver:()=>X(le),onMouseOut:re,onClick:Ae,tooltipPlacement:((Ue=(Y=ae.current[le.label].current)==null?void 0:Y.offsetTop)!=null?Ue:0)-(ge??0)<E4+Cre?"bottom":"top",isSelected:lTe(c,NI(le.value))})}});return(0,hi.useLayoutEffect)(()=>{var le,Ae;if(Qe.currentSelection!==null&&document.activeElement!==p.current){let Y=(Ae=(le=ae.current)==null?void 0:le[Qe.currentSelection.label])==null?void 0:Ae.current;Y==null||Y.focus(),A(Qe.currentSelection.value),/^[A-Za-z]/.test(f)||g(Qe.currentSelection.value)}},[Qe.currentSelection]),hi.default.createElement(kre,null,hi.default.createElement(Ire,{value:f,placeholder:S===3?"Multiple easings selected":"Search presets...",onPaste:vTe(y),onChange:y,ref:p,onKeyDown:w}),hi.default.createElement(Mre,{ref:xe,onKeyDown:le=>Qe.onParentEltKeyDown(le)},Qe.gridItems,Qe.gridItems.length===0?hi.default.createElement(Lre,null,"No results found"):void 0),hi.default.createElement(Ore,{onClick:()=>{var le;return(le=p.current)==null?void 0:le.focus()}},hi.default.createElement(are,{curveConnection:i.curveConnection,backgroundConnections:i.additionalConnections,onCurveChange:O,onCancelCurveChange:F})))},C4=Nre,{isCurveEditorOpenD:yTe,isConnectionEditingInCurvePopover:P4,getLock:Fre}=(()=>{let i=new UI.Atom([]);return{getLock(s){return i.set(s),function(){i.set([])}},isCurveEditorOpenD:(0,UI.prism)(()=>i.prism.getValue().length>0),isConnectionEditingInCurvePopover(s){return UI.prism.ensurePrism(),i.prism.getValue().some(({left:a,right:c})=>s.left.id===a.id&&s.right.id===c.id)}}})()});function bTe(i,s){for(let{keyframeId:a}of xTe(s))if(i.left.id===a)return!0;return!1}function Bre(i,s,a){return(0,zI.prism)(()=>{if(a===void 0)return[];let c=[];for(let{objectKey:p,trackId:f}of Ure(a)){let g=(0,zI.val)(me().atomP.historic.coreByProject[i].sheetsById[s].sequence.tracksByObject[p].trackData[f]);g&&(c=c.concat(wTe(g.keyframes).filter(y=>bTe(y,a)).map(({left:y,right:w})=>({left:y,right:w,trackId:f,objectKey:p,sheetId:s,projectId:i}))))}return c})}function jI(i,s,a){var c;if(a===void 0)return[];let p=[];for(let{objectKey:g,trackId:y,keyframeIds:w}of Ure(a))p=p.concat((c=k4({projectId:i,sheetId:s,objectKey:g,trackId:y,keyframeIds:w}))!=null?c:[]);let f=_I(p.map(g=>g.pathToProp));return p.map(({keyframe:g,pathToProp:y})=>({keyframe:g,pathToProp:y.slice(f.length)}))}function k4({projectId:i,sheetId:s,objectKey:a,trackId:c,keyframeIds:p}){let f=(0,zI.val)(me().atomP.historic.coreByProject[i].sheetsById[s].sequence.tracksByObject[a]),g=f==null?void 0:f.trackData[c];if(!g)return null;let y=_Te((f==null?void 0:f.trackIdByPropPath)||{})[c];if(!y)return null;let w=[a,...wI(y)];return p.map(S=>({keyframe:g.keyframes.find(M=>M.id===S),pathToProp:w})).filter(({keyframe:S})=>S!==void 0)}function _Te(i){let s={};for(let[a,c]of Object.entries(i))s[c]=a;return s}function wTe(i){return i.map((s,a)=>({left:s,right:i[a+1]})).slice(0,-1)}function xTe(i){var s,a,c;let p=[];for(let[f,g]of Object.entries((s=i==null?void 0:i.byObjectKey)!=null?s:{}))for(let[y,w]of Object.entries((a=g==null?void 0:g.byTrackId)!=null?a:{}))for(let S of Object.keys((c=w==null?void 0:w.byKeyframeId)!=null?c:{}))p.push({objectKey:f,trackId:y,keyframeId:S});return p}function Ure(i){var s,a,c;let p=[];for(let[f,g]of Object.entries((s=i==null?void 0:i.byObjectKey)!=null?s:{}))for(let[y,w]of Object.entries((a=g==null?void 0:g.byTrackId)!=null?a:{}))p.push({objectKey:f,trackId:y,keyframeIds:Object.keys((c=w==null?void 0:w.byKeyframeId)!=null?c:{})});return p}var zI,Qy=C(()=>{zI=Mt,Fe(),vc()});function STe(i,s){return(0,Vre.useMemo)(()=>ETe(i,s),[])}function ETe(i,s){let a=null,c=g=>me().tempTransaction(y=>i(y,g));function p(){a==null||a.discard(),a=null}let f={createAsset:s.sheet.project.assetStorage.createAsset,getAssetUrl:g=>g.id?s.sheet.project.assetStorage.getAssetUrl(g.id):void 0};return j({temporarilySetValue(g){p(),a=c(g)},discardTemporaryValue:p,permanentlySetValue(g){p(),c(g).commit()}},f)}var Vre,CTe=C(()=>{Fe(),Vre=Q(Re())});function T4(i){var s;if(i.type==="sheetObject")return zo.default.createElement(zo.default.Fragment,null,zo.default.createElement(HI,{style:{paddingLeft:"".concat(i.indent*GI,"px")}},i.sheetObject.address.objectKey),i.children.map((a,c)=>zo.default.createElement(T4,z(j({key:c},a),{autoFocusInput:i.autoFocusInput&&c===0,indent:i.indent+1}))));if(i.type==="propWithChildren"){let a=(s=i.propConfig.label)!=null?s:yd(i.pathToProp);return zo.default.createElement(zo.default.Fragment,null,zo.default.createElement(HI,{style:{paddingLeft:"".concat(i.indent*GI,"px")}},a),i.children.map((c,p)=>zo.default.createElement(T4,z(j({key:p},c),{autoFocusInput:i.autoFocusInput&&p===0,indent:i.indent+1}))))}else return zo.default.createElement(PTe,z(j({},i),{autoFocusInput:i.autoFocusInput,indent:i.indent}))}function PTe(i){var s;let a=(s=i.propConfig.label)!=null?s:yd(i.pathToProp),c=kTe(i);if(i.propConfig.type==="enum")return zo.default.createElement(zo.default.Fragment,null);{let p=rU[i.propConfig.type];return zo.default.createElement(zre,null,zo.default.createElement(HI,null,zo.default.createElement("span",{style:{paddingLeft:"".concat(i.indent*GI,"px")}},a)),zo.default.createElement(Wre,null,zo.default.createElement(p,{editingTools:c,propConfig:i.propConfig,value:UA(i.keyframe.value,i.propConfig),autoFocus:i.autoFocusInput})))}}function kTe(i){let s=i.sheetObject;return STe(({stateEditors:a},c)=>{let p=z(j({},i.keyframe),{value:c});a.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},s.address),{trackId:i.trackId,keyframes:[p],snappingFunction:s.sheet.getSequence().closestGridPosition}))},s)}var zo,jre,zre,Hre,HI,GI,Gre,Wre,TTe=C(()=>{zo=Q(Re()),Ne(),IY(),q0(),CTe(),Ep(),zre=se.div(jre||(jre=G([`
  display: flex;
  align-items: stretch;
  min-width: 200px;

  select {
    min-width: 100px;
  }
`]))),HI=se.div(Hre||(Hre=G([`
  font-style: normal;
  font-weight: 400;
  font-size: 11px;
  line-height: 13px;
  letter-spacing: 0.01em;
  padding: 6px 6px 6px 0;

  width: 40%;

  color: #919191;

  overflow: hidden;
`]))),GI=10,Wre=se.div(Gre||(Gre=G([`
  display: flex;
  align-items: center;
  width: 60%;
`])))});function WI(i){return lc({debugName:"useKeyframeInlineEditorPopover"},()=>$I.default.createElement(cc,{showPopoverEdgeTriangle:!0},$I.default.createElement("div",{style:{margin:"1px 2px 1px 10px"}},Array.isArray(i)?i.map((s,a)=>$I.default.createElement(T4,z(j({key:a},s),{autoFocusInput:a===0,indent:0}))):void 0)))}var $I,KI=C(()=>{$I=Q(Re()),uc(),dc(),TTe()});function MTe(i,s,a){return Ms(i,{displayName:"Keyframe",menuItems:()=>{let c=jI(a.leaf.sheetObject.address.projectId,a.leaf.sheetObject.address.sheetId,a.selection);return[{label:c.length>0?"Copy (selection)":"Copy",callback:()=>{c.length>0?me().transaction(p=>{p.stateEditors.studio.ahistoric.setClipboardKeyframes(c)}):me().transaction(p=>{p.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:a.keyframe,pathToProp:a.leaf.pathToProp}])})}},{label:a.selection!==void 0?"Delete (selection)":"Delete",callback:()=>{a.selection?a.selection.delete():me().transaction(({stateEditors:p})=>{p.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},a.leaf.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.leaf.trackId}))})}}]},onOpen(){s._debug("Show keyframe",a)}})}function ATe(i,s,a){let c=(0,Dp.useRef)(s);c.current=s;let{onClickFromDrag:p}=a,f=(0,Dp.useMemo)(()=>({debugName:"KeyframeDot/useDragKeyframe",onDragStart(y){let w=c.current,S=(0,qI.val)(me().atomP.historic.coreByProject[w.leaf.sheetObject.address.projectId].sheetsById[w.leaf.sheetObject.address.sheetId].sequence.tracksByObject),M=Ane(S,function(D,{trackId:O,objectKey:F}){var V,W;return D.id!==w.keyframe.id&&!(w.selection&&(W=(V=w.selection.byObjectKey[F])==null?void 0:V.byTrackId[O])!=null&&W.byKeyframeId[D.id])});if(Mne(M),w.selection){let{selection:D,leaf:O}=w,{sheetObject:F}=O,V=D.getDragHandlers(z(j({},F.address),{domNode:i,positionAtStartOfDrag:w.track.data.keyframes[w.index].position})).onDragStart(y);return V&&z(j({},V),{onClick:p,onDragEnd:(...W)=>{var X;(X=V.onDragEnd)==null||X.call(V,...W),mv()}})}let R=w,A=(0,qI.val)(R.layoutP.scaledSpace.toUnitSpace),k;return{onDrag(D,O,F){var V;let W=R.track.data.keyframes[R.index],X=Math.max((V=Is.checkIfMouseEventSnapToPos(F,{ignore:i}))!=null?V:W.position+A(D),0);k==null||k.discard(),k=void 0,k=me().tempTransaction(({stateEditors:re})=>{re.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},R.leaf.sheetObject.address),{trackId:R.leaf.trackId,keyframes:[z(j({},W),{position:X})],snappingFunction:(0,qI.val)(R.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(D){D?k==null||k.commit():k==null||k.discard(),mv()},onClick(D){p(D)}}}}),[p]),[g]=Ei(i,f);return Vd(g,s.keyframe.position),dl(g,"draggingPositionInSequenceEditor","ew-resize"),[g]}var Dp,qI,HS,M4,GS,A4,$re,XI,Kre,qre,Xre,Yre,Zre,Qre,Jre=C(()=>{Dp=Q(Re()),Ne(),Fe(),As(),no(),mr(),qI=Mt,jo(),Ca(),du(),CI(),xp(),Qy(),vr(),vv(),KI(),uv(),HS=6,M4=HS+2,GS={normalColor:"#40AAA4",selectedColor:"#F2C95C",inlineEditorOpenColor:"#FCF3DC",selectedAndInlineEditorOpenColor:"#CBEBEA"},A4=({isSelected:i,isInlineEditorPopoverOpen:s})=>i&&s?GS.inlineEditorOpenColor:i?GS.selectedColor:s?GS.selectedAndInlineEditorOpenColor:GS.normalColor,XI=se.div($re||($re=G([`
  position: absolute;
  `,`

  background: `,`;
  transform: rotateZ(45deg);

  `,`;

  z-index: 1;
  pointer-events: none;
`])),fl(HS),i=>A4(i),i=>i.flag===2?"outline: 2px solid white;":""),qre=se.div(Kre||(Kre=G([`
  position: absolute;
  `,`

  background: `,`;

  `,`;

  z-index: 1;
  pointer-events: none;
`])),fl(HS*1.5),i=>A4(i),i=>i.flag===2?"outline: 2px solid white;":""),Yre=se.div(Xre||(Xre=G([`
  z-index: 1;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  & + `,` {
    `,`
  }

  &:hover + `,` {
    `,`
  }
`])),fl(12),hr,XI,i=>i.isInlineEditorPopoverOpen?fl(M4):"",XI,fl(M4)),Zre=i=>{let s=wp("SingleKeyframeDot",i.keyframe.id),a=lv(i.itemKey),[c,p]=sr(null),[f]=MTe(p,s,i),{node:g,toggle:y,isOpen:w}=WI([{type:"primitiveProp",keyframe:i.keyframe,pathToProp:i.leaf.pathToProp,propConfig:i.leaf.propConf,sheetObject:i.leaf.sheetObject,trackId:i.leaf.trackId}]);ATe(p,i,{onClickFromDrag(M){y(M,c.current)}});let S=!i.keyframe.type||i.keyframe.type==="bezier";return Dp.default.createElement(Dp.default.Fragment,null,Dp.default.createElement(Yre,j({ref:c,isInlineEditorPopoverOpen:w},a.attrs)),S?Dp.default.createElement(XI,{isSelected:!!i.selection,isInlineEditorPopoverOpen:w,flag:a.flag}):Dp.default.createElement(qre,{isSelected:!!i.selection,isInlineEditorPopoverOpen:w,flag:a.flag}),g,f)},Qre=Zre}),I4,R4,O4,_v,eie,tie,D4,nie=C(()=>{Ea(),I4=Q(Re()),Ne(),Jre(),R4=HS/2+1,O4=1e3,_v={normalColor:"#365b59",selectedColor:"#8A7842",barColor:i=>{let s=i.isSelected?_v.selectedColor:_v.normalColor;return i.isPopoverOpen?nA(.2,gy(.2,s)):s},hoverColor:i=>{let s=i.isSelected?_v.selectedColor:_v.normalColor;return i.isPopoverOpen?nA(.2,gy(.2,s)):nA(.1,gy(.1,s))}},tie=se.div(eie||(eie=G([`
  position: absolute;
  background: `,`;
  height: `,`px;
  width: `,`px;

  left: 0;
  top: -`,`px;
  transform-origin: top left;
  z-index: 0;
  cursor: ew-resize;

  &:after {
    display: block;
    position: absolute;
    content: ' ';
    top: -4px;
    bottom: -4px;
    left: 0;
    right: 0;
  }

  &:hover {
    background: `,`;
  }
`])),_v.barColor,R4,O4,R4/2,_v.hoverColor),D4=I4.default.forwardRef((i,s)=>{let a={isPopoverOpen:i.isPopoverOpen,isSelected:i.isSelected};return I4.default.createElement(tie,z(j({},a),{ref:s,style:{transform:"scaleX(calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(i.connectorLengthInUnitSpace/O4,"))")},onClick:c=>{var p;(p=i.openPopover)==null||p.call(i,c)}}),i.children)})});function ITe(i,s){let a=(0,L4.useRef)(s);a.current=s;let c=(0,L4.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(p){let f=a.current,g;if(f.selection){let{selection:M,leaf:R}=f,{sheetObject:A}=R;return M.getDragHandlers(z(j({},A.address),{domNode:i,positionAtStartOfDrag:f.track.data.keyframes[f.index].position})).onDragStart(p)}let y=f,w=(0,YI.val)(y.layoutP.sheet).getSequence(),S=(0,YI.val)(y.layoutP.scaledSpace.toUnitSpace);return{onDrag(M,R,A){let k=S(M);g&&(g.discard(),g=void 0),g=me().tempTransaction(({stateEditors:D})=>{D.coreByProject.historic.sheetsById.sequence.transformKeyframes(z(j({},y.leaf.sheetObject.address),{trackId:y.leaf.trackId,keyframeIds:[y.keyframe.id,y.track.data.keyframes[y.index+1].id],translate:k,scale:1,origin:0,snappingFunction:w.closestGridPosition}))})},onDragEnd(M){M?g&&g.commit():g&&g.discard()}}}}),[]);Ei(i,c)}function RTe(i,s,a,c){return Ms(s,{displayName:"Tween",menuItems:()=>{let p=jI(i.leaf.sheetObject.address.projectId,i.leaf.sheetObject.address.sheetId,i.selection);return[{label:p.length>0?"Copy (selection)":"Copy",callback:()=>{p.length>0?me().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes(p)}):me().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:a,pathToProp:i.leaf.pathToProp},{keyframe:c,pathToProp:i.leaf.pathToProp}])})}},{label:i.selection?"Delete (selection)":"Delete",callback:()=>{i.selection?i.selection.delete():me().transaction(({stateEditors:f})=>{f.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},i.leaf.sheetObject.address),{keyframeIds:[a.id,c.id],trackId:i.leaf.trackId}))})}}]}})}var YI,Lp,L4,N4,rie,iie,oie,sie,aie,OTe=C(()=>{Fe(),As(),no(),mr(),YI=Mt,Lp=Q(Re()),L4=Q(Re()),uc(),dc(),VI(),nie(),II(),hn(),Qy(),Qy(),Ne(),N4=5,iie=se(cc)(rie||(rie=G([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: `,`;
`])),g4),oie=i=>{let{index:s,track:a}=i,c=a.data.keyframes[s],p=a.data.keyframes[s+1],[f,g]=sr(null),{node:y,toggle:w,close:S}=lc(()=>{let k=(0,YI.val)(i.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:k.screenX+N4,maxX:k.screenX+k.width-N4}}},()=>Lp.default.createElement(aie,z(j({},i),{closePopover:S}))),[M]=RTe(i,g,c,p);ITe(g,i);let R=p.position-c.position,A={isPopoverOpen:Un(()=>P4(z(j({},i.leaf.sheetObject.address),{trackId:i.leaf.trackId,left:c,right:p})),[i.leaf.sheetObject.address,i.leaf.trackId,c,p]),isSelected:i.selection!==void 0};return Lp.default.createElement(Lp.default.Fragment,null,Lp.default.createElement(D4,z(j({ref:f,connectorLengthInUnitSpace:R},A),{openPopover:k=>{g&&w(k,g)}}),y),M)},sie=oie,aie=Lp.default.forwardRef((i,s)=>{let{index:a,track:{data:c},selection:p}=i,f=c.keyframes[a],g=c.keyframes[a+1],y=i.leaf.trackId,w=i.leaf.sheetObject.address,S=Un(()=>Bre(w.projectId,w.sheetId,p).getValue(),[w,p]),M=j({left:f,right:g,trackId:y},w);return Lp.default.createElement(iie,{showPopoverEdgeTriangle:!1,ref:s},Lp.default.createElement(C4,{curveConnection:M,additionalConnections:S,onRequestClose:i.closePopover}))})}),lie,wv,uie,cie,die,hie,pie,DTe=C(()=>{lie=Mt,wv=Q(Re()),Ne(),OTe(),Jre(),cie=se.div(uie||(uie=G([`
  position: absolute;
`]))),die=wv.default.createElement(wv.default.Fragment,null),hie=wv.default.memo(i=>{let{index:s,track:{data:a}}=i,c=a.keyframes[s],p=a.keyframes[s+1],f=c.connectedRight&&!!p;return wv.default.createElement(cie,{style:{top:"".concat(i.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,lie.val)(i.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(c.position,"px))")}},wv.default.createElement(Qre,z(j({},i),{itemKey:i.itemKey})),f?wv.default.createElement(sie,j({},i)):die)}),pie=hie});function LTe(i,s){return Ms(i,{displayName:"Keyframe Track",menuItems:()=>{var a;let c=(a=(0,Jy.val)(me().atomP.ahistoric.clipboard.keyframesWithRelativePaths))!=null?a:[];return[NTe(s,c)]}})}function NTe(i,s){return{label:"Paste Keyframes",enabled:s.length>0,callback:()=>{var a;let c=(0,Jy.val)(i.layoutP.sheet).getSequence(),p=(a=s[0])==null?void 0:a.pathToProp,f=s.filter(({keyframe:g,pathToProp:y})=>Uke(p,y)).map(({keyframe:g,pathToProp:y})=>g);me().transaction(({stateEditors:g})=>{var y;c.position=c.closestGridPosition(c.position);let w=(y=FTe(f))==null?void 0:y.position;for(let S of f)g.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(j({},i.leaf.sheetObject.address),{trackId:i.leaf.trackId,position:c.position+S.position-w,handles:S.handles,value:S.value,snappingFunction:c.closestGridPosition,type:S.type}))})}}}function FTe(i){let s=null;for(let a of i)(s===null||a.position<s.position)&&(s=a);return s}var Jy,jd,fie,mie,F4,vie,BTe=C(()=>{hn(),Jy=Mt,jd=Q(Re()),Ne(),DTe(),As(),mr(),Fe(),vc(),vv(),Nd(),mie=se.div(fie||(fie=G([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),F4=jd.default.memo(i=>{var s;let{layoutP:a,trackData:c,leaf:p}=i,[f,g]=sr(null),{selectedKeyframeIds:y,selection:w}=Un(()=>{let X=(0,Jy.val)(a.selectionAtom),re=(0,Jy.val)(X.pointer.current.byObjectKey[p.sheetObject.address.objectKey].byTrackId[p.trackId].byKeyframeId);return re?{selectedKeyframeIds:re,selection:(0,Jy.val)(X.pointer.current)}:{selectedKeyframeIds:{},selection:void 0}},[a,p.trackId]),[S,M,R]=LTe(g,i),A=Wn(f4),k=A.mode==="snapToSome"?(s=A.positions[p.sheetObject.address.objectKey])==null?void 0:s[p.trackId]:[],D=A.mode==="snapToAll",O=(0,jd.useMemo)(()=>({data:c,id:p.trackId,sheetObject:i.leaf.sheetObject}),[c,p.trackId]),F=c.keyframes.map((X,re)=>jd.default.createElement(pie,{key:"keyframe-"+X.id,itemKey:ho.forTrackKeyframe(p.sheetObject,p.trackId,X.id),keyframe:X,index:re,track:O,layoutP:a,leaf:p,selection:y[X.id]===!0?w:void 0})),V=k.map(X=>jd.default.createElement(FS,{key:"snap-target-"+X,layoutP:a,leaf:p,position:X})),W=D?c.keyframes.map(X=>jd.default.createElement(FS,{key:"additionalSnapTarget-".concat(X.id),layoutP:a,leaf:p,position:X.position})):null;return jd.default.createElement(mie,{ref:f,style:{background:R?"#444850 ":"unset"}},F,V,jd.default.createElement(jd.default.Fragment,null,W),S)}),F4.displayName="BasicKeyframedTrack",vie=F4}),gie,WS,yie,bie,UTe=C(()=>{Fe(),hn(),gie=Mt,WS=Q(Re()),MI(),BTe(),xp(),yie=({leaf:i,layoutP:s})=>{let a=wp("PrimitivePropRow",i.pathToProp.join());return Un(()=>{let{sheetObject:c}=i,{trackId:p}=i,f=(0,gie.val)(me().atomP.historic.coreByProject[c.address.projectId].sheetsById[c.address.sheetId].sequence.tracksByObject[c.address.objectKey].trackData[p]);return(f==null?void 0:f.type)!=="BasicKeyframedTrack"?(a.errorDev("trackData type ".concat(f==null?void 0:f.type," is not yet supported on the sequence editor")),WS.default.createElement(Xy,{leaf:i,isCollapsed:!1,node:WS.default.createElement("div",null)})):WS.default.createElement(Xy,{leaf:i,isCollapsed:!1,node:WS.default.createElement(vie,{layoutP:s,trackData:f,leaf:i})})},[i,s])},bie=yie});function VTe(i){return i()}var jTe=C(()=>{});function _ie(i){let{index:s,aggregateKeyframes:a,selection:c}=i;return Un(wie(i),[s,a,c,i.viewModel])}function wie(i){let{index:s,aggregateKeyframes:a,selection:c}=i,{projectId:p,sheetId:f}=i.viewModel.type==="sheet"?i.viewModel.sheet.address:i.viewModel.sheetObject.address;return()=>{let g=a[s],y=a[s+1],w=y&&g.keyframes.length===y.keyframes.length&&g.keyframes.every(({track:A},k)=>y.keyframes[k].track===A)?{length:y.position-g.position,selected:g.selected===0&&y.selected===0}:null,S=w?g.keyframes.map(({kf:A,track:k},D)=>z(j({},k.sheetObject.address),{trackId:k.id,left:A,right:y.keyframes[D].kf})):[],M=VTe(()=>{let A=B4.prism.memo("selectedConnections",()=>Bre(p,f,c),[p,f,c]).getValue();return[...S,...A]}),R=S.every(A=>P4(A));return{itemKey:B4.prism.memo("itemKey",()=>i.viewModel.type==="sheet"?ho.forSheetAggregateKeyframe(i.viewModel.sheet,g.position):i.viewModel.type==="sheetObject"?ho.forSheetObjectAggregateKeyframe(i.viewModel.sheetObject,g.position):ho.forCompoundPropAggregateKeyframe(i.viewModel.sheetObject,i.viewModel.pathToProp,g.position),[i.viewModel,g.position]),cur:g,connected:w,isAggregateEditingInCurvePopover:R,allConnections:M}}}var B4,U4=C(()=>{B4=Mt,Nd(),VI(),hn(),Qy(),jTe()});function zTe(i,s){let a=(0,ml.useRef)(s);a.current=s;let c=(0,ml.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(p){let f=a.current,g,y=f.aggregateKeyframes[f.index].keyframes,{selection:w,viewModel:S}=f,M=S.type==="sheet"?S.sheet.address:S.sheetObject.address;if(w&&f.aggregateKeyframes[f.index].selected===0)return w.getDragHandlers(z(j({},M),{domNode:i,positionAtStartOfDrag:f.aggregateKeyframes[f.index].position})).onDragStart(p);let R=f,A=(0,ZI.val)(R.layoutP.sheet).getSequence(),k=(0,ZI.val)(R.layoutP.scaledSpace.toUnitSpace);return{onDrag(D,O,F){let V=k(D);g&&(g.discard(),g=void 0),g=me().tempTransaction(({stateEditors:W})=>{for(let X of y)W.coreByProject.historic.sheetsById.sequence.transformKeyframes(z(j({},X.track.sheetObject.address),{trackId:X.track.id,keyframeIds:[X.kf.id,X.track.data.keyframes[X.track.data.keyframes.indexOf(X.kf)+1].id],translate:V,scale:1,origin:0,snappingFunction:A.closestGridPosition}))})},onDragEnd(D){D?g&&g.commit():g&&g.discard()}}}}),[]);return Ei(i,c)}function HTe(i,s){return Ms(s,{displayName:"Aggregate Tween",menuItems:()=>{let a=i.utils.allConnections.reduce((y,w)=>{var S;return y.concat((S=k4(z(j({},w),{keyframeIds:[w.left.id,w.right.id]})))!=null?S:[])},[]),c=_I(a.map(y=>y.pathToProp)),p=a.map(({keyframe:y,pathToProp:w})=>({keyframe:y,pathToProp:w.slice(c.length)})),f=i.editorProps.viewModel,g=f.type==="sheet"?f.sheet.address:f.sheetObject.address;return[{label:"Copy",callback:()=>{if(i.editorProps.selection){let y=jI(g.projectId,g.sheetId,i.editorProps.selection);me().transaction(w=>{w.stateEditors.studio.ahistoric.setClipboardKeyframes(y)})}else me().transaction(y=>{y.stateEditors.studio.ahistoric.setClipboardKeyframes(p)})}},{label:"Delete",callback:()=>{i.editorProps.selection?i.editorProps.selection.delete():me().transaction(({stateEditors:y})=>{for(let w of i.utils.allConnections)y.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},g),{objectKey:w.objectKey,keyframeIds:[w.left.id,w.right.id],trackId:w.trackId}))})}}]}})}var ZI,ml,V4,xie,Sie,Eie,Cie,GTe=C(()=>{ZI=Mt,ml=Q(Re()),nie(),uc(),mr(),Fe(),no(),VI(),U4(),Ne(),dc(),Qy(),As(),vc(),V4=5,Sie=se(cc)(xie||(xie=G([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: rgba(26, 28, 30, 0.97);
`]))),Eie=ml.default.forwardRef((i,s)=>{let{allConnections:a}=_ie(i);return ml.default.createElement(Sie,{showPopoverEdgeTriangle:!1,ref:s},ml.default.createElement(C4,{curveConnection:a[0],additionalConnections:a,onRequestClose:i.closePopover}))}),Cie=i=>{let[s,a]=sr(null),{editorProps:c}=i,[p]=HTe(i,a),[f]=zTe(a,i.editorProps),{node:g,toggle:y,close:w}=lc(()=>{let R=(0,ZI.val)(c.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:R.screenX+V4,maxX:R.screenX+R.width-V4}}},()=>ml.default.createElement(Eie,z(j({},c),{closePopover:w}))),{connected:S,isAggregateEditingInCurvePopover:M}=i.utils;return S||f?ml.default.createElement(ml.default.Fragment,null,ml.default.createElement(D4,{ref:s,connectorLengthInUnitSpace:S?S.length:0,isSelected:S?S.selected:!1,isPopoverOpen:M,openPopover:R=>{a&&y(R,a)}}),g,p):ml.default.createElement(ml.default.Fragment,null)}});function WTe(i){let s={isSelected:i.isSelected,flag:i.flag};return zd.default.createElement(QI,null,i.isAllHere?zd.default.createElement(Iie,j({},s)):zd.default.createElement(Rie,j({},s)))}var zd,j4,Pie,kie,QI,Tie,Mie,z4,H4,G4,W4,Aie,Iie,Rie,$Te=C(()=>{zd=Q(Re()),Ne(),CI(),vr(),j4=16,Pie=j4+2,QI=se.div(kie||(kie=G([`
  position: absolute;
  `,`
  z-index: 1;
`])),fl(j4)),Mie=se.div(Tie||(Tie=G([`
  z-index: 2;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  &:hover
    + `,`,
    #pointer-root.draggingPositionInSequenceEditor
    &:hover
    + `,` {
    `,`
  }
`])),fl(12),hr,QI,QI,fl(Pie)),z4="#F2C95C",H4="#40AAA4",G4="#45747C",W4=i=>i.isSelected===0?z4:i.isSelected===1?H4:G4,Aie=i=>i.isSelected===0?z4:i.isSelected===1?H4:G4,Iie=i=>zd.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},zd.default.createElement("rect",{x:"4.46443",y:"10.0078",width:"5",height:"5",transform:"rotate(-45 4.46443 10.0078)",fill:"#212327",stroke:Aie(i)}),zd.default.createElement("rect",{x:"3.75732",y:"6.01953",width:"6",height:"6",transform:"rotate(-45 3.75732 6.01953)",fill:W4(i),stroke:i.flag===2?"white":void 0,strokeWidth:i.flag===2?"2px":void 0})),Rie=i=>zd.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},zd.default.createElement("rect",{x:"4.46443",y:"8",width:"5",height:"5",transform:"rotate(-45 4.46443 8)",fill:"#23262B",stroke:i.flag===2?"white":W4(i),strokeWidth:i.flag===2?"2px":void 0}))});function KTe(i,s){let a=i.children.map(c=>c.type==="propWithChildren"?$4(c,s):Oie(c,s)).filter(K4);return a.length===0?null:{type:"sheetObject",sheetObject:i.sheetObject,children:a}}function $4(i,s){let a=i.children.map(c=>c.type==="propWithChildren"?$4(c,s):Oie(c,s)).filter(K4);return a.length===0?null:{type:"propWithChildren",pathToProp:i.pathToProp,propConfig:i.propConf,children:a}}function Oie(i,s){let a=s.find(c=>c.track.id===i.trackId);return a?{type:"primitiveProp",keyframe:a.kf,pathToProp:i.pathToProp,propConfig:i.propConf,sheetObject:i.sheetObject,trackId:i.trackId}:null}function qTe(i){var s,a,c,p;let{cur:f}=i.utils,g=WI(i.editorProps.viewModel.type==="sheet"?null:i.editorProps.viewModel.type==="sheetObject"?(a=(s=KTe(i.editorProps.viewModel,f.keyframes))==null?void 0:s.children)!=null?a:null:(p=(c=$4(i.editorProps.viewModel,f.keyframes))==null?void 0:c.children)!=null?p:null),y=lv(i.utils.itemKey);y.useRelations(()=>f.keyframes.map(R=>({affects:R.itemKey,flag:2})),[f.keyframes.map(R=>R.track.id).join("-")]);let[w,S]=sr(null),[M]=XTe(i,S);return $S.default.createElement($S.default.Fragment,null,$S.default.createElement(Mie,z(j(j({ref:w},y.attrs),Is.includePositionSnapAttrs(f.position)),{onClick:R=>i.editorProps.viewModel.type!=="sheet"?g.open(R,w.current):null})),$S.default.createElement(WTe,{flag:y.flag,isAllHere:f.allHere,isSelected:f.selected}),M,g.node)}function XTe(i,s){return Ms(s,{displayName:"Aggregate Keyframe",menuItems:()=>{let a=i.editorProps.viewModel,c=i.editorProps.selection;return[{label:c?"Copy (selection)":"Copy",callback:()=>{if(c){let{projectId:p,sheetId:f}=a.type==="sheet"?a.sheet.address:a.sheetObject.address,g=jI(p,f,c);me().transaction(y=>{y.stateEditors.studio.ahistoric.setClipboardKeyframes(g)})}else{let p=i.utils.cur.keyframes.flatMap(w=>{var S;return(S=k4(z(j({},w.track.sheetObject.address),{trackId:w.track.id,keyframeIds:[w.kf.id]})))!=null?S:[]}),f=a.type==="sheet"?[]:a.type==="sheetObject"?[a.sheetObject.address.objectKey]:a.type==="propWithChildren"?[a.sheetObject.address.objectKey,...a.pathToProp]:[],g=_I([f,...p.map(w=>w.pathToProp)]),y=p.map(({keyframe:w,pathToProp:S})=>({keyframe:w,pathToProp:S.slice(g.length)}));me().transaction(w=>{w.stateEditors.studio.ahistoric.setClipboardKeyframes(y)})}}},{label:c?"Delete (selection)":"Delete",callback:()=>{c?c.delete():me().transaction(({stateEditors:p})=>{for(let f of i.utils.cur.keyframes)p.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},f.track.sheetObject.address),{keyframeIds:[f.kf.id],trackId:f.track.id}))})}}]}})}var $S,K4,YTe=C(()=>{$S=Q(Re()),mr(),uv(),As(),$Te(),Fe(),Qy(),vc(),du(),KI(),K4=i=>i!==null}),Die,KS,Lie,Nie,Fie,Bie,ZTe=C(()=>{Die=Mt,KS=Q(Re()),Ne(),GTe(),U4(),YTe(),Nie=se.div(Lie||(Lie=G([`
  position: absolute;
`]))),Fie=KS.default.memo(i=>{let s=_ie(i);return KS.default.createElement(Nie,{style:{top:"".concat(i.viewModel.nodeHeight/2,"px"),left:"calc(".concat((0,Die.val)(i.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(s.cur.position,"px))")}},KS.default.createElement(qTe,{editorProps:i,utils:s}),KS.default.createElement(Cie,{editorProps:i,utils:s}))}),Bie=Fie});function QTe(i){let{layoutP:s,aggregatedKeyframes:a,viewModel:c}=i,p=wp("AggregatedKeyframeTrack"),[f,g]=sr(null),{selectedPositions:y,selection:w}=JTe(s,a),[S,M,R]=nMe(g,i,()=>p._debug("see aggregatedKeyframes",i.aggregatedKeyframes)),A=(0,vl.useMemo)(()=>[...a.byPosition.entries()].sort((X,re)=>X[0]-re[0]).map(([X,re])=>({position:X,keyframes:re,selected:y.get(X),allHere:re.length===a.tracks.length})),[a,y]),k=Wn(f4),D=k.mode==="snapToAll",O=k.mode==="snapToSome"?k.positions:vU,F=(0,vl.useMemo)(()=>c.type==="sheet"?qke(c,O):a4(c,O),[O]).map(X=>vl.default.createElement(FS,{key:"snap-target-"+X,layoutP:s,leaf:c,position:X})),V=(0,vl.useMemo)(()=>A.map(({position:X,keyframes:re},ne)=>({position:X,editorProps:{index:ne,layoutP:s,viewModel:c,aggregateKeyframes:A,selection:y.has(X)?w:void 0}})),[A,c,y]);sMe(g,X=>{var re;return(re=V.find(ne=>ne.position===X))==null?void 0:re.editorProps},{onClickFromDrag(X){}});let W=V.map((X,re)=>vl.default.createElement(vl.Fragment,{key:"agg-"+A[re].keyframes[0].kf.id},D&&vl.default.createElement(FS,{layoutP:s,leaf:c,position:X.position}),vl.default.createElement(Bie,j({},X.editorProps))));return vl.default.createElement(zie,{ref:f,style:{background:R?"#444850 ":"unset"}},W,F,S)}function JTe(i,s){return Un(()=>(0,Os.val)(eMe(i,s)),[i,s])}function eMe(i,s){return(0,Os.prism)(()=>{let a=(0,Os.val)(i.selectionAtom),c=(0,Os.val)(a.pointer.current);if(!c)return Hie;let p=new Map;for(let[f,g]of s.byPosition){let y=tMe(g,c);y!==void 0&&y!==eR&&p.set(f,y)}return{selectedPositions:p,selection:(0,Os.val)(a.pointer.current)}})}function tMe(i,s){var a,c,p;let f;for(let{track:g,kf:y}of i){let w=((p=(c=(a=s.byObjectKey[g.sheetObject.address.objectKey])==null?void 0:a.byTrackId[g.id])==null?void 0:c.byKeyframeId)==null?void 0:p[y.id])===!0;f===void 0?w?f=Y4:f=eR:w?f===eR&&(f=Z4):f===Y4&&(f=Z4)}return f}function nMe(i,s,a){return Ms(i,{onOpen:a,displayName:"Aggregate Keyframe Track",menuItems:()=>{var c;let p=(c=(0,Os.pointerToPrism)(me().atomP.ahistoric.clipboard.keyframesWithRelativePaths).getValue())!=null?c:[];return[rMe(s,p)]}})}function rMe(i,s){return{label:"Paste Keyframes",enabled:s.length>0,callback:()=>{let a=(0,Os.val)(i.layoutP.sheet).getSequence();i.viewModel.type==="sheet"?iMe(i.viewModel,s,a):oMe(i.viewModel,s,a)}}}function iMe(i,s,a){var c;let{projectId:p,sheetId:f,sheetInstanceId:g}=i.sheet.address;if(s.every(({pathToProp:y})=>y.length===0))for(let y of i.children.map(w=>w.sheetObject)){let w=(0,Os.pointerToPrism)(me().atomP.historic.coreByProject[p].sheetsById[f].sequence.tracksByObject[y.address.objectKey]).getValue(),S=Object.keys((c=w==null?void 0:w.trackData)!=null?c:{});q4(y.address,S,s,a)}else{let y=(0,Os.pointerToPrism)(me().atomP.historic.coreByProject[p].sheetsById[f].sequence.tracksByObject).getValue(),w=s.map(({keyframe:S,pathToProp:M})=>{var R,A;let k=M[0],D=M.slice(1),O=mc([...D]),F=((A=(R=y==null?void 0:y[k])==null?void 0:R.trackIdByPropPath)!=null?A:{})[O];return F?{keyframe:S,trackId:F,address:{objectKey:k,projectId:p,sheetId:f,sheetInstanceId:g}}:null}).filter(S=>S!==null);Uie(w,a)}}function oMe(i,s,a){var c;let{projectId:p,sheetId:f,objectKey:g}=i.sheetObject.address,y=(0,Os.pointerToPrism)(me().atomP.historic.coreByProject[p].sheetsById[f].sequence.tracksByObject[g]).getValue();if(s.every(({pathToProp:w})=>w.length===0)){let w=Object.keys((c=y==null?void 0:y.trackData)!=null?c:{});if(i.type==="sheetObject")q4(i.sheetObject.address,w,s,a);else{let S=(y==null?void 0:y.trackIdByPropPath)||{},M=Object.entries(S).filter(([R,A])=>A!==void 0&&Bke(wI(R),i.pathToProp)).map(([R,A])=>A);q4(i.sheetObject.address,M,s,a)}}else{let w=(y==null?void 0:y.trackIdByPropPath)||{},S=i.type==="propWithChildren"?i.pathToProp:[],M=s.map(({keyframe:R,pathToProp:A})=>{let k=mc([...S,...A]),D=w[k];return D?{keyframe:R,trackId:D,address:i.sheetObject.address}:null}).filter(R=>R!==null);Uie(M,a)}}function q4(i,s,a,c){var p;c.position=c.closestGridPosition(c.position);let f=(p=Vie(a.map(({keyframe:g})=>g)))==null?void 0:p.position;me().transaction(({stateEditors:g})=>{for(let y of s)for(let{keyframe:w}of a)g.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(j({},i),{trackId:y,position:c.position+w.position-f,handles:w.handles,value:w.value,snappingFunction:c.closestGridPosition,type:w.type}))})}function Uie(i,s){var a;s.position=s.closestGridPosition(s.position);let c=(a=Vie(i.map(({keyframe:p})=>p)))==null?void 0:a.position;me().transaction(({stateEditors:p})=>{for(let{keyframe:f,trackId:g,address:y}of i)p.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(j({},y),{trackId:g,position:s.position+f.position-c,handles:f.handles,value:f.value,snappingFunction:s.closestGridPosition,type:f.type}))})}function Vie(i){let s=null;for(let a of i)(s===null||a.position<s.position)&&(s=a);return s}function sMe(i,s,a){let c=wp("useDragForAggregateKeyframeDot"),p=xne(),f=(0,vl.useMemo)(()=>({debugName:"AggregateKeyframeDot/useDragKeyframe",onDragStart(y){c._debug("onDragStart",{target:y.target});let w=Number(y.target.dataset.pos),S=s(w);if(!S)return c._debug("no props found for ",{positionToFind:w}),!1;p(!0,w);let M=(0,Os.prism)(wie(S)).getValue().cur.keyframes,R=S.viewModel.type==="sheet"?S.viewModel.sheet.address:S.viewModel.sheetObject.address,A=(0,Os.val)(me().atomP.historic.coreByProject[R.projectId].sheetsById[R.sheetId].sequence.tracksByObject),k=Ane(A,function(V,{trackId:W,objectKey:X}){var re,ne;return M.every(ae=>V.id!==ae.kf.id)&&!(S.selection&&(ne=(re=S.selection.byObjectKey[X])==null?void 0:re.byTrackId[W])!=null&&ne.byKeyframeId[V.id])});if(Mne(k),S.selection&&S.aggregateKeyframes[S.index].selected===0){let{selection:V,viewModel:W}=S,X=V.getDragHandlers(z(j({},R),{domNode:i,positionAtStartOfDrag:M[0].kf.position})).onDragStart(y);return X&&z(j({},X),{onClick:a.onClickFromDrag,onDragEnd:(...re)=>{var ne;(ne=X.onDragEnd)==null||ne.call(X,...re),mv()}})}let D=S,O=(0,Os.val)(D.layoutP.scaledSpace.toUnitSpace),F;return{onDrag(V,W,X){var re;let ne=Math.max((re=Is.checkIfMouseEventSnapToPos(X,{}))!=null?re:M[0].kf.position+O(V),0);p(!0,ne),F==null||F.discard(),F=void 0,F=me().tempTransaction(({stateEditors:ae})=>{for(let xe of M){let fe=xe.kf;ae.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},xe.track.sheetObject.address),{trackId:xe.track.id,keyframes:[z(j({},fe),{position:ne})],snappingFunction:(0,Os.val)(D.layoutP.sheet).getSequence().closestGridPosition}))}})},onDragEnd(V){p(!1,-1),V?F==null||F.commit():(F==null||F.discard(),a.onClickFromDrag(y)),mv()},onClick(V){a.onClickFromDrag(V)}}}}),[s,a.onClickFromDrag]),[g]=Ei(i,f);return dl(g,"draggingPositionInSequenceEditor","ew-resize"),[g]}var Os,vl,jie,zie,Hie,Gie,JI,X4,Y4,Z4,eR,Q4=C(()=>{hn(),Os=Mt,vl=Q(Re()),Ne(),As(),mr(),ZTe(),Ky(),xp(),U4(),du(),no(),jo(),Ca(),Fe(),vc(),vv(),RZ(),vv(),Ky(),zie=se.div(jie||(jie=G([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),Hie=Object.freeze({selectedPositions:new Map,selection:void 0}),Gie=vl.default.memo(QTe),JI=Gie,X4=(i=>(i[i.AllSelected=0]="AllSelected",i[i.AtLeastOneUnselected=1]="AtLeastOneUnselected",i[i.NoneSelected=2]="NoneSelected",i))(X4||{}),{AllSelected:Y4,AtLeastOneUnselected:Z4,NoneSelected:eR}=X4}),eb,J4,Wie,aMe=C(()=>{hn(),eb=Q(Re()),UTe(),MI(),Q4(),Ky(),xp(),J4=(i,s)=>i.type==="propWithChildren"?eb.default.createElement(Wie,{layoutP:s,viewModel:i,key:"prop"+i.pathToProp[i.pathToProp.length-1]}):eb.default.createElement(bie,{layoutP:s,leaf:i,key:"prop"+i.pathToProp[i.pathToProp.length-1]}),Wie=({viewModel:i,layoutP:s})=>{let a=wp("RightPropWithChildrenRow",i.pathToProp.join());return Un(()=>{let c=SI(i);return eb.default.createElement(jK,{logger:a},eb.default.createElement(Xy,{leaf:i,node:eb.default.createElement(JI,{layoutP:s,aggregatedKeyframes:c,viewModel:i}),isCollapsed:i.isCollapsed},i.children.map(p=>J4(p,s))))},[i,s])}}),eV,$ie,Kie,lMe=C(()=>{hn(),eV=Q(Re()),aMe(),MI(),Ky(),Q4(),$ie=({leaf:i,layoutP:s})=>Un(()=>{let a=SI(i);return eV.default.createElement(Xy,{leaf:i,node:eV.default.createElement(JI,{layoutP:s,aggregatedKeyframes:a,viewModel:i}),isCollapsed:i.isCollapsed},i.children.map(c=>J4(c,s)))},[i,s]),Kie=$ie}),tR,qie,Xie,uMe=C(()=>{hn(),tR=Q(Re()),lMe(),MI(),Ky(),Q4(),qie=({leaf:i,layoutP:s})=>Un(()=>{let a=SI(i);return tR.default.createElement(Xy,{leaf:i,node:tR.default.createElement(JI,{layoutP:s,aggregatedKeyframes:a,viewModel:i}),isCollapsed:i.isCollapsed},i.children.map(c=>tR.default.createElement(Kie,{layoutP:s,key:"sheetObject-"+c.sheetObject.address.objectKey,leaf:c})))},[i,s]),Xie=qie}),qS,xv,nR,Yie,Zie,Qie,Jie,eoe=C(()=>{hn(),qS=Mt,xv=Q(Re()),Ne(),Zke(),jne(),uMe(),nR=1e6,Zie=se.ul(Yie||(Yie=G([`
  margin: 0;
  padding: 0;
  list-style: none;
  position: absolute;
  left: 0;
  width: `,`px;
`])),nR),Qie=({layoutP:i})=>Un(()=>{let s=(0,qS.val)(i.tree),a=(0,qS.val)(i.tree.top)+Math.max((0,qS.val)(i.tree.heightIncludingChildren),(0,qS.val)(i.dopeSheetDims.height));return xv.default.createElement(xv.default.Fragment,null,xv.default.createElement(v4,{layoutP:i,height:a},xv.default.createElement(une,{layoutP:i,height:a},xv.default.createElement(Zie,{style:{top:s.top+"px"}},xv.default.createElement(Xie,{leaf:s,layoutP:i})))))},[i]),Jie=Qie});function tV(i,s,a,c){let p="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(i,"px)"),f="calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(s,") * 1px)");a===0&&(a=1e-4);let g="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(a,")");c===0&&(c=.001);let y="calc(var(--graphEditorVerticalSpace) * ".concat(c*-1,")");return"translate(".concat(p,", ").concat(f,") scale(").concat(g,", ").concat(y,")")}function cMe(i,s){let{index:a,trackData:c}=s,p=c.keyframes[a],f=c.keyframes[a+1];return Ms(i,{menuItems:()=>[{label:"Delete",callback:()=>{me().transaction(({stateEditors:g})=>{let{deleteKeyframes:y}=g.coreByProject.historic.sheetsById.sequence;y(z(j({},s.sheetObject.address),{trackId:s.trackId,keyframeIds:[p.id,f.id]}))})}}]})}var rR,toe,noe,roe,ioe,ooe,nV=C(()=>{Ep(),Fe(),As(),mr(),rR=Q(Re()),Ne(),noe=se.path(toe||(toe=G([`
  stroke-width: 2;
  stroke: var(--main-color);
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),roe="M 0 0 L 1 0 L 1 1",ioe=i=>{let{index:s,trackData:a}=i,c=a.keyframes[s],p=a.keyframes[s+1],f=p.position-c.position,[g,y]=sr(null),[w]=cMe(y,i),S=i.isScalar?UA(c.value,i.propConfig):0,M=i.isScalar?UA(p.value,i.propConfig):1,R=i.extremumSpace.fromValueSpace(S),A=i.extremumSpace.fromValueSpace(M)-R,k=tV(c.position,R,f,A),D=c.handles[2],O=c.handles[3],F=p.handles[0],V=p.handles[1],W="M 0 0 C ".concat(D," ").concat(O," ").concat(F," ").concat(V," 1 1");return rR.default.createElement(rR.default.Fragment,null,rR.default.createElement(noe,{ref:g,d:!c.type||c.type==="bezier"?W:roe,style:{transform:k}}),w)},ooe=ioe});function dMe(i,s){let a=(0,Sv.useRef)(s);a.current=s;let c=(0,Sv.useMemo)(()=>({debugName:"CurveHandler/useOurDrags",lockCSSCursorTo:"move",onDragStart(){let p,f=a.current,g=(0,XS.val)(f.layoutP.scaledSpace.toUnitSpace),y=(0,XS.val)(f.layoutP.graphEditorVerticalSpace.toExtremumSpace),w=f.extremumSpace.lock();return{onDrag(S,M){p&&(p.discard(),p=void 0);let{index:R,trackData:A}=f,k=A.keyframes[R],D=A.keyframes[R+1],O=g(S)/(D.position-k.position),F=-M,V=y(F),W=f.extremumSpace.deltaToValueSpace(V),X=s.isScalar?k.value:0,re=s.isScalar?D.value:1,ne=W/(re-X);if(f.which==="left"){let ae=ci(k.handles[2]+O,0,1),xe=k.handles[3]+ne;p=me().tempTransaction(({stateEditors:fe})=>{fe.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},f.sheetObject.address),{snappingFunction:(0,XS.val)(f.layoutP.sheet).getSequence().closestGridPosition,trackId:f.trackId,keyframes:[z(j({},k),{handles:[k.handles[0],k.handles[1],ae,xe]})]}))})}else{let ae=ci(D.handles[0]+O,0,1),xe=D.handles[1]+ne;p=me().tempTransaction(({stateEditors:fe})=>{fe.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},f.sheetObject.address),{trackId:f.trackId,snappingFunction:(0,XS.val)(f.layoutP.sheet).getSequence().closestGridPosition,keyframes:[z(j({},D),{handles:[ae,xe,D.handles[2],D.handles[3]]})]}))})}},onDragEnd(S){w(),S?p&&p.commit():p&&p.discard()}}}}),[]);Ei(i,c)}function hMe(i,s){return Ms(i,{menuItems:()=>[{label:"Delete",callback:()=>{me().transaction(({stateEditors:a})=>{a.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},s.sheetObject.address),{keyframeIds:[s.keyframe.id],trackId:s.trackId}))})}}]})}var XS,Sv,soe,rV,aoe,loe,uoe,coe,doe,iV,pMe=C(()=>{Fe(),As(),no(),mr(),XS=Mt,ti(),Sv=Q(Re()),Ne(),nV(),vr(),rV=se.circle(soe||(soe=G([`
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  fill: var(--main-color);
  r: 2px;
  pointer-events: none;
`]))),loe=se.circle(aoe||(aoe=G([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  cursor: move;
  `,`;
  &:hover {
  }
  &:hover + `,` {
    r: 6px;
  }
`])),hr,rV),coe=se.path(uoe||(uoe=G([`
  stroke-width: 1;
  stroke: var(--main-color);
  /* stroke: gray; */
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),doe=i=>{let[s,a]=sr(null),{index:c,trackData:p}=i,f=p.keyframes[c],g=p.keyframes[c+1],[y]=hMe(a,i);dMe(a,i);let w=i.which==="left"?f.handles[2]:g.handles[0],S=f.position+(g.position-f.position)*w,M=i.which==="left"?f.handles[3]:g.handles[1],R=i.isScalar?f.value:0,A=i.isScalar?g.value:1,k=R+(A-R)*M,D=i.extremumSpace.fromValueSpace(k),O=D-i.extremumSpace.fromValueSpace(i.which==="left"?R:A),F=tV(i.which==="left"?f.position:g.position,i.extremumSpace.fromValueSpace(i.which==="left"?R:A),S-(i.which==="left"?f.position:g.position),O);return Sv.default.createElement("g",null,Sv.default.createElement(loe,{ref:s,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(S," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(D,") * 1px)")}}),Sv.default.createElement(rV,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(S," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(D,") * 1px)")}}),Sv.default.createElement(coe,{d:"M 0 0 L 1 1",style:{transform:F}}),y)},iV=doe});function fMe(i){let[s,a]=(0,Np.useState)(!1);Vd(s,i.props.keyframe.position);let c=(0,Np.useRef)(i.props);c.current=i.props;let p=(0,Np.useMemo)(()=>({debugName:"GraphEditorDotScalar/useDragKeyframe",lockCSSCursorTo:"move",onDragStart(f){a(!0);let g=!!f.altKey,y=c.current,w=(0,iR.val)(y.layoutP.scaledSpace.toUnitSpace),S=(0,iR.val)(y.layoutP.graphEditorVerticalSpace.toExtremumSpace),M=y.extremumSpace.lock(),R;return{onDrag(A,k){let D=y.trackData.keyframes[y.index],O=w(A),F=-k,V=S(F),W=y.extremumSpace.deltaToValueSpace(V),X=[],re=z(j({},D),{position:D.position+O,value:D.value+W,handles:[...D.handles]});if(X.push(re),g){let ne=y.trackData.keyframes[y.index-1];if(ne&&Math.abs(D.value-ne.value)>0){let xe=z(j({},ne),{handles:[...ne.handles]});X.push(xe),xe.handles[3]=vMe(ne.handles[3],ne.value,ne.value,D.value,re.value)}let ae=y.trackData.keyframes[y.index+1];if(ae&&Math.abs(D.value-ae.value)>0){let xe=z(j({},ae),{handles:[...ae.handles]});X.push(xe),xe.handles[1]=gMe(xe.handles[1],xe.value,xe.value,D.value,re.value)}}R==null||R.discard(),R=me().tempTransaction(({stateEditors:ne})=>{ne.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},y.sheetObject.address),{trackId:y.trackId,keyframes:X,snappingFunction:(0,iR.val)(y.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(A){a(!1),M(),A?R==null||R.commit():(R==null||R.discard(),i.onDetectedClick(f))}}}}),[]);return Ei(i.node,p),dl(s,"draggingPositionInSequenceEditor","move"),s}function mMe(i,s){return Ms(i,{menuItems:()=>[{label:"Delete",callback:()=>{me().transaction(({stateEditors:a})=>{a.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},s.sheetObject.address),{keyframeIds:[s.keyframe.id],trackId:s.trackId}))})}}]})}function vMe(i,s,a,c,p){return(c-s)*i/(p-a)}function gMe(i,s,a,c,p){return((s-c)*i+c-s+a-p)/(a-p)}var iR,Np,hoe,oV,poe,foe,moe,voe,yMe=C(()=>{Fe(),As(),no(),mr(),iR=Mt,Np=Q(Re()),Ne(),jo(),jo(),vr(),Ca(),du(),KI(),uv(),oV=se.circle(hoe||(hoe=G([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),foe=se.circle(poe||(poe=G([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: move;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),hr,oV,Id),moe=i=>{let[s,a]=sr(null),{index:c,trackData:p}=i,f=p.keyframes[c],[g]=mMe(a,i),y=lv(i.itemKey),w=f.value,S=i.extremumSpace.fromValueSpace(w),M=WI([{type:"primitiveProp",keyframe:i.keyframe,pathToProp:i.pathToProp,propConfig:i.propConfig,sheetObject:i.sheetObject,trackId:i.trackId}]),R=fMe({node:a,props:i,onDetectedClick:A=>M.toggle(A,A.target instanceof Element?A.target:a)});return Np.default.createElement(Np.default.Fragment,null,Np.default.createElement(foe,z(j(j(j({ref:s,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(f.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(S,") * 1px)")}},gc(f.position)),Is.includePositionSnapAttrs(f.position)),y.attrs),{className:R?"beingDragged":""})),Np.default.createElement(oV,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(f.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(S,") * 1px)"),fill:y.flag===2?"white":void 0}}),M.node,g)},voe=moe});function bMe(i){let[s,a]=(0,Fp.useState)(!1);Vd(s,i.props.keyframe.position);let c=(0,Fp.useRef)(i.props);c.current=i.props;let p=(0,Fp.useMemo)(()=>({debugName:"GraphEditorDotNonScalar/useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(f){a(!0);let g=c.current,y=(0,sV.val)(g.layoutP.scaledSpace.toUnitSpace),w=g.extremumSpace.lock(),S;return{onDrag(M,R){let A=g.trackData.keyframes[g.index],k=y(M),D=[],O=z(j({},A),{position:A.position+k,value:A.value,handles:[...A.handles]});D.push(O),S==null||S.discard(),S=me().tempTransaction(({stateEditors:F})=>{F.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},g.sheetObject.address),{trackId:g.trackId,keyframes:D,snappingFunction:(0,sV.val)(g.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(M){a(!1),w(),M?S==null||S.commit():(S==null||S.discard(),i.onDetectedClick(f))}}}}),[]);return Ei(i.node,p),dl(s,"draggingPositionInSequenceEditor","ew-resize"),s}function _Me(i,s){return Ms(i,{menuItems:()=>[{label:"Delete",callback:()=>{me().transaction(({stateEditors:a})=>{a.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},s.sheetObject.address),{keyframeIds:[s.keyframe.id],trackId:s.trackId}))})}}]})}var sV,Fp,goe,aV,yoe,boe,_oe,lV,wMe=C(()=>{Fe(),As(),no(),mr(),sV=Mt,Fp=Q(Re()),Ne(),jo(),jo(),vr(),Ca(),du(),KI(),uv(),aV=se.circle(goe||(goe=G([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),boe=se.circle(yoe||(yoe=G([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: ew-resize;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),hr,aV,Id),_oe=i=>{let[s,a]=sr(null),{index:c,trackData:p,itemKey:f}=i,g=p.keyframes[c],[y]=_Me(a,i),w=lv(f),S=i.which==="left"?0:1,M=WI([{type:"primitiveProp",keyframe:i.keyframe,pathToProp:i.pathToProp,propConfig:i.propConfig,sheetObject:i.sheetObject,trackId:i.trackId}]),R=bMe({node:a,props:i,onDetectedClick:k=>M.toggle(k,k.target instanceof Element?k.target:a)}),A=i.extremumSpace.fromValueSpace(S);return Fp.default.createElement(Fp.default.Fragment,null,Fp.default.createElement(boe,z(j(j(j({ref:s,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(A,") * 1px)")}},w.attrs),gc(g.position)),Is.includePositionSnapAttrs(g.position)),{className:R?"beingDragged":""})),Fp.default.createElement(aV,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(A,") * 1px)"),fill:w.flag===2?"white":void 0}}),M.node,y)},lV=_oe}),oR,woe,xoe,Soe,Eoe,xMe=C(()=>{oR=Q(Re()),Ne(),nV(),xoe=se.path(woe||(woe=G([`
  stroke-width: 2;
  stroke: var(--main-color);
  stroke-dasharray: 3 2;
  fill: none;
  vector-effect: non-scaling-stroke;
  opacity: 0.3;
`]))),Soe=i=>{let{index:s,trackData:a}=i,c="M 0 0 L 1 1",p=tV(a.keyframes[s].position,i.extremumSpace.fromValueSpace(0),0,i.extremumSpace.fromValueSpace(1)-i.extremumSpace.fromValueSpace(0));return oR.default.createElement(oR.default.Fragment,null,oR.default.createElement(xoe,{d:c,style:{transform:p}}))},Eoe=Soe}),Ho,Coe,Poe,koe,Toe,Moe,SMe=C(()=>{Ho=Q(Re()),Ne(),nV(),pMe(),yMe(),wMe(),xMe(),Poe=se.g(Coe||(Coe=G([`
  /* position: absolute; */
`]))),koe=Ho.default.createElement(Ho.default.Fragment,null),Toe=i=>{let{index:s,trackData:a,isScalar:c}=i,p=a.keyframes[s],f=a.keyframes[s+1],g=p.connectedRight&&!!f&&f.value!==p.value;return Ho.default.createElement(Poe,null,g?Ho.default.createElement(Ho.default.Fragment,null,Ho.default.createElement(ooe,j({},i)),!p.type||p.type==="bezier"&&Ho.default.createElement(Ho.default.Fragment,null,Ho.default.createElement(iV,z(j({},i),{which:"left"})),Ho.default.createElement(iV,z(j({},i),{which:"right"})))):koe,c?Ho.default.createElement(voe,j({},i)):Ho.default.createElement(Ho.default.Fragment,null,Ho.default.createElement(lV,z(j({},i),{which:"left"})),Ho.default.createElement(lV,z(j({},i),{which:"right"})),Ho.default.createElement(Eoe,j({},i))))},Moe=Toe});function EMe(i,s){let a=1/0,c=-1/0;function p(f){a=Math.min(f,a),c=Math.max(f,c)}return i.forEach((f,g)=>{let y=UA(f.value,s);if(p(y),!f.connectedRight)return;let w=i[g+1];if(!w)return;let S=(typeof w.value=="number"?w.value:1)-y;p(y+f.handles[3]*S),p(y+w.handles[1]*S)}),[a,c]}function CMe(i){let s=0,a=1;function c(p){s=Math.min(p,s),a=Math.max(p,a)}return i.forEach((p,f)=>{if(!p.connectedRight)return;let g=i[f+1];g&&(c(p.handles[3]),c(g.handles[1]))}),[s,a]}var bc,Aoe,Ioe,PMe=C(()=>{Nd(),bc=Q(Re()),aR(),SMe(),Ep(),hn(),Aoe=bc.default.memo(({layoutP:i,trackData:s,sheetObject:a,trackId:c,color:p,pathToProp:f})=>{let g=BA(Wn(a.template.configPointer),f);if(pc(g))return console.error("Composite prop types cannot be keyframed"),bc.default.createElement(bc.default.Fragment,null);let[y,w]=(0,bc.useState)(!1),S=(0,bc.useMemo)(()=>{let k=new Set;return function(){let D=k.size===0;k.add(O),D&&w(!0);function O(){let F=k.size>0;k.delete(O),F&&k.size===0&&w(!1)}return O}},[]),M=(0,bc.useMemo)(()=>{let k=g.type==="number"?EMe(s.keyframes,g):CMe(s.keyframes),D=V=>(V-k[0])/(k[1]-k[0]),O=V=>k[0]+F(V),F=V=>V*(k[1]-k[0]);return{fromValueSpace:D,toValueSpace:O,deltaToValueSpace:F,lock:S}},[s.keyframes]),R=(0,bc.useRef)(void 0);y||(R.current=M);let A=s.keyframes.map((k,D)=>bc.default.createElement(Moe,{pathToProp:f,propConfig:g,itemKey:ho.forTrackKeyframe(a,c,k.id),keyframe:k,index:D,trackData:s,layoutP:i,sheetObject:a,trackId:c,isScalar:g.type==="number",key:k.id,extremumSpace:R.current,color:p}));return bc.default.createElement("g",{style:{"--main-color":YS[p].iconColor}},A)}),Ioe=Aoe}),Roe,sR,Ooe,Doe,kMe=C(()=>{Fe(),hn(),Roe=Mt,sR=Q(Re()),PMe(),Ooe=i=>Un(()=>{let{sheetObject:s,trackId:a}=i,c=(0,Roe.val)(me().atomP.historic.coreByProject[s.address.projectId].sheetsById[s.address.sheetId].sequence.tracksByObject[s.address.objectKey].trackData[a]);return(c==null?void 0:c.type)!=="BasicKeyframedTrack"?(console.error("trackData type ".concat(c==null?void 0:c.type," is not yet supported on the graph editor")),sR.default.createElement(sR.default.Fragment,null)):sR.default.createElement(Ioe,z(j({},i),{trackData:c}))},[i.trackId,i.layoutP]),Doe=Ooe});function Loe({clippedSpaceRange:i,clippedSpaceWidth:s,fps:a,gapWidth:c=120},p){let f=1/a,g=i.end-i.start,y=s/(a*g),w=Math.floor(c/y),S=(w<a?Noe(a).find(A=>A>=w):a*Math.floor(w/a))*f,M=Math.floor(i.start/S),R=Math.ceil(i.end/S);for(let A=M;A<=R;A++){let k=A*S,D=k%1===0;p(k,D)}}var Noe,Foe=C(()=>{ti(),Noe=h1(i=>{let s=[];for(let a=1;a<=i;a++)i%a===0&&s.push(a);return s})});function TMe(i){let{clippedSpaceWidth:s,height:a,ctx:c,unitSpaceToClippedSpace:p,snapToGrid:f}=i;c.clearRect(0,0,s,a),Loe(i,(g,y)=>{let w=f(g),S=Math.floor(p(w));c.strokeStyle=y?"rgba(225, 225, 225, 0.04)":"rgba(255, 255, 255, 0.01)",c.beginPath(),c.moveTo(S,0),c.lineTo(S,a),c.stroke(),c.closePath()})}var Ev,Cv,Boe,Uoe,Voe,joe,zoe,Hoe,Goe,Woe,uV,$oe=C(()=>{Ev=Mt,Cv=Q(Re()),Ne(),Foe(),Fe(),Uoe=se.div(Boe||(Boe=G([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),joe=se.canvas(Voe||(Voe=G([`
  position: relative;
  left: 0;
`]))),zoe=i=>{let s=i;return s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1},Hoe=()=>window.devicePixelRatio||1,Goe=i=>Hoe()/zoe(i),Woe=({layoutP:i,width:s,height:a})=>{let c=(0,Cv.useRef)(null),[p,f]=(0,Cv.useState)(null),{ctx:g,ratio:y}=(0,Cv.useMemo)(()=>{if(!p)return{};let w=p.getContext("2d"),S=Goe(w);return{ctx:w,ratio:S}},[p]);return(0,Cv.useLayoutEffect)(()=>{if(!g)return;p.width=s*y,p.height=a*y;let w=(0,Ev.prism)(()=>{let S=(0,Ev.val)(i.sheet).getSequence();return{ctx:g,clippedSpaceRange:(0,Ev.val)(i.clippedSpace.range),clippedSpaceWidth:(0,Ev.val)(i.clippedSpace.width),unitSpaceToClippedSpace:(0,Ev.val)(i.clippedSpace.fromUnitSpace),height:a,leftPadding:(0,Ev.val)(i.scaledSpace.leftPadding),fps:S.subUnitsPerUnit,snapToGrid:M=>S.closestGridPosition(M)}}).onChange(me().ticker,S=>{g.save(),g.scale(y,y),TMe(S),g.restore()},!0);return()=>{w()}},[g,s,a,i]),Cv.default.createElement(Uoe,{ref:c,style:{width:s+"px"}},Cv.default.createElement(joe,{ref:f,style:{width:s+"px",height:a+"px"}}))},uV=Woe}),_c,Pv,YS,Koe,qoe,Xoe,Yoe,Zoe,Qoe,aR=C(()=>{Fe(),vc(),HA(),hn(),_c=Mt,Pv=Q(Re()),Ne(),eoe(),jne(),kMe(),$oe(),Ea(),YS={1:{iconColor:"#b98b08"},2:{iconColor:"#70a904"},3:{iconColor:"#2e928a"},4:{iconColor:"#a943bb"},5:{iconColor:"#b90808"},6:{iconColor:"#b4bf0e"}},qoe=se.div(Koe||(Koe=G([`
  position: absolute;
  right: 0;
  bottom: 0;
  background: `,`;
`])),ru(.03,"#1a1c1e")),Yoe=se.svg(Xoe||(Xoe=G([`
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  pointer-events: none;
`]))),Zoe=({layoutP:i})=>Un(()=>{let s=(0,_c.val)(i.sheet),a=(0,_c.val)(me().atomP.historic.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId].sequenceEditor.selectedPropsByObject),c=(0,_c.val)(i.graphEditorDims.height),p=(0,_c.val)(i.scaledSpace.fromUnitSpace)(1),f=[];if(a)for(let[y,w]of Object.entries(a)){let S=s.getObject(y);if(!S)continue;let M=(0,_c.val)(S.template.getMapOfValidSequenceTracks_forStudio());for(let[R,A]of Object.entries(w)){let k=wI(R),D=Pp(M,k);D&&f.push(Pv.default.createElement(Doe,{key:"graph-".concat(y,"-").concat(R),sheetObject:S,pathToProp:k,layoutP:i,trackId:D,color:A}))}}let g=(0,_c.val)(i.rightDims.width);return Pv.default.createElement(qoe,{style:{width:g+"px",height:c+"px","--unitSpaceToScaledSpaceMultiplier":p,"--graphEditorVerticalSpace":"".concat((0,_c.val)(i.graphEditorVerticalSpace.space))}},Pv.default.createElement(uV,{layoutP:i,width:g,height:c}),Pv.default.createElement(v4,{layoutP:i,height:c},Pv.default.createElement(Yoe,{width:nR,height:c,viewBox:"0 0 ".concat(nR," ").concat(c)},Pv.default.createElement("g",{style:{transform:"translate(".concat((0,_c.val)(i.scaledSpace.leftPadding),"px, ").concat((0,_c.val)(i.graphEditorDims.padding.top),"px)")}},f))))},[i]),Qoe=Zoe}),Joe,gl,ese,tse,nse,rse,cV,ise,ose,sse,ase,lse,use,cse,MMe=C(()=>{Fe(),vc(),GA(),hn(),Joe=Mt,gl=Q(Re()),Ne(),_U(),qA(),aR(),bI(),av(),Vte(),ese={label:{color:"#9a9a9a"}},nse=se(e4)(tse||(tse=G([""]))),cV=se(t4)(rse||(rse=G([`
  display: flex;
  color: `,`;
  padding-right: 12px;
  align-items: center;
  justify-content: flex-end;
  box-sizing: border-box;
`])),ese.label.color),ose=se.button(ise||(ise=G([`
  background: none;
  border: none;
  outline: none;
  display: flex;
  box-sizing: border-box;
  font-size: 14px;
  align-items: center;
  height: 100%;
  margin-left: 12px;
  color: `,`;

  &:not([disabled]):hover {
    color: white;
  }
`])),i=>i.isSelected?YS[i.graphEditorColor].iconColor:kp.offColor),sse=()=>gl.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 640 512"},gl.default.createElement("g",{transform:"translate(0 100)"},gl.default.createElement("path",{fill:"currentColor",d:"M368 32h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM208 88h-84.75C113.75 64.56 90.84 48 64 48 28.66 48 0 76.65 0 112s28.66 64 64 64c26.84 0 49.75-16.56 59.25-40h79.73c-55.37 32.52-95.86 87.32-109.54 152h49.4c11.3-41.61 36.77-77.21 71.04-101.56-3.7-8.08-5.88-16.99-5.88-26.44V88zm-48 232H64c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zM576 48c-26.84 0-49.75 16.56-59.25 40H432v72c0 9.45-2.19 18.36-5.88 26.44 34.27 24.35 59.74 59.95 71.04 101.56h49.4c-13.68-64.68-54.17-119.48-109.54-152h79.73c9.5 23.44 32.41 40 59.25 40 35.34 0 64-28.65 64-64s-28.66-64-64-64zm0 272h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"}))),lse=se.span(ase||(ase=G([`
  margin-right: 4px;
  `,`;

  `,`:hover & {
    color: #ccc;
  }
`])),Cp,cV),use=({leaf:i})=>{var s;let a=cS(i.sheetObject.propsP,i.pathToProp),c=i.sheetObject,{controlIndicators:p}=bU(a,c,i.propConf),f=Un(()=>{let A=i.sheetObject.address,k=mc(i.pathToProp);return(0,Joe.val)(me().atomP.historic.projects.stateByProjectId[A.projectId].stateBySheetId[A.sheetId].sequenceEditor.selectedPropsByObject[A.objectKey][k])},[i]),g=(0,gl.useRef)(!1),y=typeof f=="string";g.current=y;let w=(0,gl.useCallback)(()=>{let A=i.sheetObject.address;me().transaction(({stateEditors:k})=>{g.current?k.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removePropFromGraphEditor(z(j({},A),{pathToProp:i.pathToProp})):(k.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.addPropToGraphEditor(z(j({},A),{pathToProp:i.pathToProp})),k.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!0}))})},[i]),S=(s=i.propConf.label)!=null?s:i.pathToProp[i.pathToProp.length-1],M=!0,R=(0,gl.useRef)(null);return Bte(R.current,i),gl.default.createElement(nse,{depth:i.depth},gl.default.createElement(cV,{ref:R,isEven:i.n%2===0,style:{height:i.nodeHeight+"px"},isSelected:y===!0},gl.default.createElement(lse,null,S),p,gl.default.createElement(ose,{onClick:w,isSelected:y===!0,graphEditorColor:f??"1",style:{opacity:1},disabled:!M},gl.default.createElement(sse,null))))},cse=use});function dV(i,s){me().transaction(({stateEditors:a})=>{a.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.sequenceEditorCollapsableItems.set(z(j({},s.sheetAddress),{studioSheetItemKey:s.sheetItemKey,isCollapsed:i}))})}var hV=C(()=>{Fe()}),tb,pV,dse,AMe=C(()=>{tb=Q(Re()),bI(),MMe(),hV(),pV=i=>{let s="prop"+i.pathToProp[i.pathToProp.length-1];return i.shouldRender?i.type==="propWithChildren"?tb.default.createElement(dse,{leaf:i,key:s}):tb.default.createElement(cse,{leaf:i,key:s}):tb.default.createElement(tb.default.Fragment,{key:s})},dse=({leaf:i})=>tb.default.createElement(yI,{leaf:i,label:i.pathToProp[i.pathToProp.length-1],isCollapsed:i.isCollapsed,toggleCollapsed:()=>dV(!i.isCollapsed,{sheetAddress:i.sheetObject.address,sheetItemKey:i.sheetItemKey})},i.children.map(s=>pV(s)))}),hse,pse,fse,IMe=C(()=>{hse=Q(Re()),bI(),AMe(),hV(),Fe(),pse=({leaf:i})=>hse.default.createElement(yI,{leaf:i,label:i.sheetObject.address.objectKey,isCollapsed:i.isCollapsed,toggleSelect:()=>{me().transaction(({stateEditors:s})=>{s.studio.historic.panels.outline.selection.set([i.sheetObject])})},toggleCollapsed:()=>dV(!i.isCollapsed,{sheetAddress:i.sheetObject.address,sheetItemKey:i.sheetItemKey})},i.children.map(s=>pV(s))),fse=pse}),fV,mse,vse,RMe=C(()=>{hn(),fV=Q(Re()),IMe(),bI(),hV(),PQ(),mse=({leaf:i})=>Un(()=>fV.default.createElement(yI,{leaf:i,label:i.sheet.address.sheetId,isCollapsed:i.isCollapsed,toggleCollapsed:()=>{dV(!i.isCollapsed,{sheetAddress:i.sheet.address,sheetItemKey:i.sheetItemKey})}},i.children.map(s=>fV.default.createElement(fse,{key:"sheetObject-"+EQ(s.sheetObject),leaf:s}))),[i]),vse=mse}),mV,lR,gse,yse,bse,_se,wse,xse,OMe=C(()=>{hn(),mV=Mt,lR=Q(Re()),Ne(),RMe(),yse=se.div(gse||(gse=G([`
  position: absolute;
  left: 0;
  overflow-x: visible;
`]))),_se=se.ul(bse||(bse=G([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),wse=({layoutP:i})=>Un(()=>{let s=(0,mV.val)(i.tree),a=(0,mV.val)(i.leftDims.width);return lR.default.createElement(yse,{style:{width:a+"px",top:s.top+"px"}},lR.default.createElement(_se,null,lR.default.createElement(vse,{leaf:s})))},[i]),xse=wse}),vV,Sse,Ese,Cse,Pse,DMe=C(()=>{vr(),$d(),hn(),Ea(),vV=Q(Re()),Ne(),$oe(),Ese=se.div(Sse||(Sse=G([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: hidden;
  background: `,`;
  pointer-events: none;
`])),()=>Pc.rightBackground,ru(.01,Bx(1*.03,Ey.panel.bg))),Cse=({layoutP:i})=>{let s=Wn(i.rightDims.width),a=Wn(i.panelDims.height);return vV.default.createElement(Ese,{style:{width:s+"px"}},vV.default.createElement(uV,{width:s,height:a,layoutP:i}))},Pse=Cse}),nb,kse,Tse,Mse,Ase,LMe=C(()=>{hn(),nb=Q(Re()),Ne(),OMe(),DMe(),eoe(),mne(),Tse=se.div(kse||(kse=G([`
  position: absolute;
  left: 0;
  right: 0;
`]))),Mse=({layoutP:i})=>{let s=Wn(i.dopeSheetDims.height);return nb.default.createElement(Tse,{style:{height:s+"px"}},nb.default.createElement(Pse,{layoutP:i}),nb.default.createElement(fne,null,nb.default.createElement(xse,{layoutP:i}),nb.default.createElement(Jie,{layoutP:i})))},Ase=Mse});function NMe(i,s,a){return gV.prism.memo(i,()=>(0,gV.prism)(s),a).getValue()}var gV,FMe=C(()=>{gV=Mt});function ri(i){return function(s,a){return i(s,a())}}function ka(i){return Object.freeze({audience:kv(i,8)?"internal":kv(i,16)?"dev":"public",category:kv(i,4)?"troubleshooting":kv(i,2)?"todo":"general",level:kv(i,512)?512:kv(i,256)?256:kv(i,128)?128:64})}function kv(i,s){return(i&s)===s}function ii(i,s){return((s&32)===32?!0:(s&16)===16?i.dev:(s&8)===8?i.internal:!1)&&i.min<=s}function Ise(i=console,s={}){let a=z(j({},wc),{includes:j({},wc.includes)}),c={styled:VMe.bind(a,i),noStyle:zMe.bind(a,i)},p=UMe.bind(a);function f(){return a.loggingConsoleStyle&&a.loggerConsoleStyle?c.styled:c.noStyle}return a.create=f(),{configureLogger(g){var y;g==="console"?(a.loggerConsoleStyle=wc.loggerConsoleStyle,a.create=f()):g.type==="console"?(a.loggerConsoleStyle=(y=g.style)!=null?y:wc.loggerConsoleStyle,a.create=f()):g.type==="keyed"?(a.creatExt=w=>g.keyed(w.names),a.create=p):g.type==="named"&&(a.creatExt=BMe.bind(null,g.named),a.create=p)},configureLogging(g){var y,w,S,M,R;a.includes.dev=(y=g.dev)!=null?y:wc.includes.dev,a.includes.internal=(w=g.internal)!=null?w:wc.includes.internal,a.includes.min=(S=g.min)!=null?S:wc.includes.min,a.include=(M=g.include)!=null?M:wc.include,a.loggingConsoleStyle=(R=g.consoleStyle)!=null?R:wc.loggingConsoleStyle,a.create=f()},getLogger(){return a.create({names:[]})}}}function BMe(i,s){let a=[];for(let{name:c,key:p}of s.names)a.push(p==null?c:"".concat(c," (").concat(p,")"));return i(a)}function UMe(i){let s=j(j({},this.includes),this.include(i)),a=this.filtered,c=this.named.bind(this,i),p=this.creatExt(i),f=ii(s,524),g=ii(s,522),y=ii(s,521),w=ii(s,529),S=ii(s,545),M=ii(s,265),R=ii(s,268),A=ii(s,273),k=ii(s,289),D=ii(s,137),O=ii(s,145),F=ii(s,73),V=ii(s,81),W=f?p.error.bind(p,ra._hmm):a.bind(i,524),X=g?p.error.bind(p,ra._todo):a.bind(i,522),re=y?p.error.bind(p,ra._error):a.bind(i,521),ne=w?p.error.bind(p,ra.errorDev):a.bind(i,529),ae=S?p.error.bind(p,ra.errorPublic):a.bind(i,545),xe=R?p.warn.bind(p,ra._kapow):a.bind(i,268),fe=M?p.warn.bind(p,ra._warn):a.bind(i,265),ge=A?p.warn.bind(p,ra.warnDev):a.bind(i,273),Ie=k?p.warn.bind(p,ra.warnPublic):a.bind(i,273),Qe=D?p.debug.bind(p,ra._debug):a.bind(i,137),le=O?p.debug.bind(p,ra.debugDev):a.bind(i,145),Ae=F?p.trace.bind(p,ra._trace):a.bind(i,73),Y=V?p.trace.bind(p,ra.traceDev):a.bind(i,81),Ue={_hmm:W,_todo:X,_error:re,errorDev:ne,errorPublic:ae,_kapow:xe,_warn:fe,warnDev:ge,warnPublic:Ie,_debug:Qe,debugDev:le,_trace:Ae,traceDev:Y,lazy:{_hmm:f?ri(W):W,_todo:g?ri(X):X,_error:y?ri(re):re,errorDev:w?ri(ne):ne,errorPublic:S?ri(ae):ae,_kapow:R?ri(xe):xe,_warn:M?ri(fe):fe,warnDev:A?ri(ge):ge,warnPublic:k?ri(Ie):Ie,_debug:D?ri(Qe):Qe,debugDev:O?ri(le):le,_trace:F?ri(Ae):Ae,traceDev:V?ri(Y):Y},named:c,utilFor:{internal(){return{debug:Ue._debug,error:Ue._error,warn:Ue._warn,trace:Ue._trace,named(Tt,ke){return Ue.named(Tt,ke).utilFor.internal()}}},dev(){return{debug:Ue.debugDev,error:Ue.errorDev,warn:Ue.warnDev,trace:Ue.traceDev,named(Tt,ke){return Ue.named(Tt,ke).utilFor.dev()}}},public(){return{error:Ue.errorPublic,warn:Ue.warnPublic,debug(Tt,ke){Ue._warn('(public "debug" filtered out) '.concat(Tt),ke)},trace(Tt,ke){Ue._warn('(public "trace" filtered out) '.concat(Tt),ke)},named(Tt,ke){return Ue.named(Tt,ke).utilFor.public()}}}}};return Ue}function VMe(i,s){let a=j(j({},this.includes),this.include(s)),c=[],p="";for(let w=0;w<s.names.length;w++){let{name:S,key:M}=s.names[w];if(p+=" %c".concat(S),c.push(this.style.css(S)),M!=null){let R="%c#".concat(M);p+=R,c.push(this.style.css(R))}}let f=this.filtered,g=this.named.bind(this,s),y=[p,...c];return Rse(f,s,a,i,y,jMe(y),g)}function jMe(i){let s=i.slice(0);for(let a=1;a<s.length;a++)s[a]+=";background-color:#e0005a;padding:2px;color:white";return s}function zMe(i,s){let a=j(j({},this.includes),this.include(s)),c="";for(let y=0;y<s.names.length;y++){let{name:w,key:S}=s.names[y];c+=" ".concat(w),S!=null&&(c+="#".concat(S))}let p=this.filtered,f=this.named.bind(this,s),g=[c];return Rse(p,s,a,i,g,g,f)}function Rse(i,s,a,c,p,f,g){let y=ii(a,524),w=ii(a,522),S=ii(a,521),M=ii(a,529),R=ii(a,545),A=ii(a,265),k=ii(a,268),D=ii(a,273),O=ii(a,289),F=ii(a,137),V=ii(a,145),W=ii(a,73),X=ii(a,81),re=y?c.error.bind(c,...p):i.bind(s,524),ne=w?c.error.bind(c,...p):i.bind(s,522),ae=S?c.error.bind(c,...p):i.bind(s,521),xe=M?c.error.bind(c,...p):i.bind(s,529),fe=R?c.error.bind(c,...p):i.bind(s,545),ge=k?c.warn.bind(c,...f):i.bind(s,268),Ie=A?c.warn.bind(c,...p):i.bind(s,265),Qe=D?c.warn.bind(c,...p):i.bind(s,273),le=O?c.warn.bind(c,...p):i.bind(s,273),Ae=F?c.info.bind(c,...p):i.bind(s,137),Y=V?c.info.bind(c,...p):i.bind(s,145),Ue=W?c.debug.bind(c,...p):i.bind(s,73),Tt=X?c.debug.bind(c,...p):i.bind(s,81),ke={_hmm:re,_todo:ne,_error:ae,errorDev:xe,errorPublic:fe,_kapow:ge,_warn:Ie,warnDev:Qe,warnPublic:le,_debug:Ae,debugDev:Y,_trace:Ue,traceDev:Tt,lazy:{_hmm:y?ri(re):re,_todo:w?ri(ne):ne,_error:S?ri(ae):ae,errorDev:M?ri(xe):xe,errorPublic:R?ri(fe):fe,_kapow:k?ri(ge):ge,_warn:A?ri(Ie):Ie,warnDev:D?ri(Qe):Qe,warnPublic:O?ri(le):le,_debug:F?ri(Ae):Ae,debugDev:V?ri(Y):Y,_trace:W?ri(Ue):Ue,traceDev:X?ri(Tt):Tt},named:g,utilFor:{internal(){return{debug:ke._debug,error:ke._error,warn:ke._warn,trace:ke._trace,named(Te,je){return ke.named(Te,je).utilFor.internal()}}},dev(){return{debug:ke.debugDev,error:ke.errorDev,warn:ke.warnDev,trace:ke.traceDev,named(Te,je){return ke.named(Te,je).utilFor.dev()}}},public(){return{error:ke.errorPublic,warn:ke.warnPublic,debug(Te,je){ke._warn('(public "debug" filtered out) '.concat(Te),je)},trace(Te,je){ke._warn('(public "trace" filtered out) '.concat(Te),je)},named(Te,je){return ke.named(Te,je).utilFor.public()}}}}};return ke}var ra,wc,Ose=C(()=>{ra={_hmm:ka(524),_todo:ka(522),_error:ka(521),errorDev:ka(529),errorPublic:ka(545),_kapow:ka(268),_warn:ka(265),warnDev:ka(273),warnPublic:ka(289),_debug:ka(137),debugDev:ka(145),_trace:ka(73),traceDev:ka(81)},wc={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(i,s,a){return this.create({names:[...i.names,{name:s,key:a}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(i){if(i.length<5)return i;let s=i.replace(this.collapseOnRE,"");return this.cssMemo.has(s)||this.cssMemo.set(s,this.css(i)),s},css(i){var s,a,c,p;let f=this.cssMemo.get(i);if(f)return f;let g="color:".concat((a=(s=this.color)==null?void 0:s.call(this,i))!=null?a:"hsl(".concat((i.charCodeAt(0)+i.charCodeAt(i.length-1))%360,", 100%, 60%)"));return(c=this.bold)!=null&&c.test(i)&&(g+=";font-weight:600"),(p=this.italic)!=null&&p.test(i)&&(g+=";font-style:italic"),this.cssMemo.set(i,g),g}}}}),yV,uR,cR=C(()=>{Ose(),Ose(),yV=Ise(console,{_debug:function(){},_error:function(){}}),yV.configureLogging({dev:!0,min:64}),uR=yV.getLogger().named("Theatre.js (default logger)").utilFor.dev()}),Bp,Tv,Dse,HMe=C(()=>{Nd(),Bp=Mt,cR(),Md(),Tv=28,Dse=(i,s)=>{var a;Bp.prism.ensurePrism();let c=!0,p=cA+Tv,f=0,g=s.atomP.ahistoric.projects.stateByProjectId[i.address.projectId].stateBySheetId[i.address.sheetId].sequence.collapsableItems,y=g.byId[ho.forSheet()].isCollapsed,w=(a=(0,Bp.pointerToPrism)(y).getValue())!=null?a:!1,S={type:"sheet",isCollapsed:w,sheet:i,children:[],sheetItemKey:ho.forSheet(),shouldRender:c,top:cA,depth:0,n:f,nodeHeight:c?Tv:0,heightIncludingChildren:-1};f+=1;for(let O of Object.values((0,Bp.val)(i.objectsP)))O&&M(O,S.children,S.depth+1,!w);S.heightIncludingChildren=p-S.top;function M(O,F,V,W){var X;let re=(0,Bp.val)(O.template.getMapOfValidSequenceTracks_forStudio()),ne=(0,Bp.val)(O.template.configPointer);if(Object.keys(re).length===0)return;let ae=g.byId[ho.forSheetObject(O)].isCollapsed,xe=(X=(0,Bp.pointerToPrism)(ae).getValue())!=null?X:!1,fe={type:"sheetObject",isCollapsed:xe,sheetItemKey:ho.forSheetObject(O),shouldRender:W,top:p,children:[],depth:V,n:f,sheetObject:O,nodeHeight:W?Tv:0,heightIncludingChildren:-1};F.push(fe),W&&(f+=1,p+=fe.nodeHeight),R(O,re,[],ne,fe.children,V+1,W&&!xe),fe.heightIncludingChildren=p-fe.top}function R(O,F,V,W,X,re,ne){for(let[ae,xe]of Object.entries(F)){let fe=W.props[ae];A(O,xe,[...V,ae],fe,X,re,ne)}}function A(O,F,V,W,X,re,ne){W.type==="compound"?k(O,F,W,V,W,X,re,ne):W.type==="enum"?uR.warn("Prop type enum is not yet supported in the sequence editor"):D(O,F,V,W,X,re,ne)}function k(O,F,V,W,X,re,ne,ae){var xe;let fe=g.byId[ho.forSheetObjectProp(O,W)].isCollapsed,ge=(xe=(0,Bp.pointerToPrism)(fe).getValue())!=null?xe:!1,Ie={type:"propWithChildren",isCollapsed:ge,propConf:V,pathToProp:W,sheetItemKey:ho.forSheetObjectProp(O,W),sheetObject:O,shouldRender:ae,top:p,children:[],nodeHeight:ae?Tv:0,heightIncludingChildren:-1,depth:ne,trackMapping:F,n:f};re.push(Ie),ae&&(p+=Ie.nodeHeight,f+=1),R(O,F,W,X,Ie.children,ne+1,ae&&!ge),Ie.heightIncludingChildren=p-Ie.top}function D(O,F,V,W,X,re,ne){let ae={type:"primitiveProp",propConf:W,depth:re,sheetItemKey:ho.forSheetObjectProp(O,V),sheetObject:O,pathToProp:V,shouldRender:ne,top:p,nodeHeight:ne?Tv:0,heightIncludingChildren:ne?Tv:0,trackId:F,n:f};X.push(ae),f+=1,p+=ae.nodeHeight}return S}});function GMe(i,s){let a=me(),c=a.atomP.ahistoric.projects.stateByProjectId[i.address.projectId].stateBySheetId[i.address.sheetId],p=a.atomP.historic.projects.stateByProjectId[i.address.projectId].stateBySheetId[i.address.sheetId];return(0,ia.prism)(()=>{var f;let g=NMe("tree",()=>Dse(i,a),[]),y=(0,ia.val)(s),w=(0,ia.val)(a.atomP.historic.panels.sequenceEditor.graphEditor),S=(0,ia.val)(p.sequenceEditor.selectedPropsByObject),M=!!S&&Object.keys(S).length>0,{leftDims:R,rightDims:A,graphEditorDims:k,dopeSheetDims:D,horizontalScrollbarDims:O}=ia.prism.memo("leftDims",()=>{var Ie;let Qe={width:Math.floor(y.width*Lse),height:y.height,screenX:y.screenX,screenY:y.screenY},le={width:y.width-Qe.width,height:y.height,screenX:y.screenX+Qe.width,screenY:y.screenY},Ae=M&&(w==null?void 0:w.isOpen)===!0,Y=Math.floor((Ae?ci((Ie=w==null?void 0:w.height)!=null?Ie:.5,.1,.7):0)*y.heightWithoutBorder),Ue=0+Y,Tt=y.height-Ue,ke={width:y.width,height:Tt,screenX:y.screenX,screenY:y.screenY},Te={isAvailable:M,isOpen:Ae,width:le.width,height:Y,screenX:y.screenX,screenY:y.screenY+Tt,padding:{top:20,bottom:20}};return{leftDims:Qe,rightDims:le,graphEditorDims:Te,dopeSheetDims:ke,horizontalScrollbarDims:{bottom:0}}},[y,w,M]),F=ia.prism.memo("graphEditorVerticalSpace",()=>{let Ie=k.height-k.padding.top-k.padding.bottom;return{space:Ie,fromExtremumSpace(Qe){return Qe*Ie},toExtremumSpace(Qe){return Qe/Ie}}},[k]),[V,W]=ia.prism.state("isSeeking",!1),X={isSeeking:V,setIsSeeking:W},re={},ne=(f=(0,ia.val)(c.sequence.clippedSpaceRange))!=null?f:Nse,ae=ia.prism.memo("scaledSpace",()=>{let Ie=ne.end-ne.start,Qe=A.width,le=Ie/Qe,Ae=Qe/Ie;return{fromUnitSpace(Y){return Y*Ae},toUnitSpace(Y){return Y*le},leftPadding:10}},[ne,A.width]),xe=ia.prism.memo("setClippedSpaceRange",()=>function(Ie){a.transaction(({stateEditors:Qe})=>{let le=j({},Ie);if(le.end<=le.start&&(le.end=le.start+1),le.start<0){let Ae=le.end-le.start;le.start=0,le.end=Ae}Qe.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.clippedSpaceRange.set(z(j({},i.address),{range:le}))})},[]),fe=ia.prism.memo("clippedSpace",()=>({range:ne,width:A.width,fromUnitSpace(Ie){return ae.fromUnitSpace(Ie-ne.start)+ae.leftPadding},toUnitSpace(Ie){return ae.toUnitSpace(Ie-ae.leftPadding)+ne.start},setRange:xe}),[ne,A.width,ae,xe]),ge=ia.prism.memo("selection.current",()=>new ia.Atom({}),[]);return JU("finalAtom",{sheet:i,tree:g,panelDims:y,leftDims:R,rightDims:A,dopeSheetDims:D,horizontalScrollbarDims:O,seeker:X,unitSpace:re,scaledSpace:ae,clippedSpace:fe,graphEditorDims:k,graphEditorVerticalSpace:F,selectionAtom:ge}).pointer})}var ia,Lse,Nse,WMe=C(()=>{Fe(),FMe(),Fte(),ia=Mt,HMe(),ti(),Lse=.2,Nse={start:0,end:10}});function $Me(i){let{fullSecondStampsContainer:s,sequencePositionFormatter:a,snapToGrid:c,unitSpaceToClippedSpace:p}=i,f="";Loe(i,(g,y)=>{let w=c(g),S=p(w);y?f+=Fse(a.formatFullUnitForGrid(w),S,"full-unit"):f+=Fse(a.formatSubUnitForGrid(w),S,"sub-unit")}),s.innerHTML=f}function Fse(i,s,a){return'<span class="'.concat(a,'" style="transform: translate3d(').concat(s.toFixed(1),'px, -50%, 0);">').concat(i,"</span>")}var Mv,Av,Bse,Use,Up,Vse,jse,zse,Hse,Gse,Wse,$se=C(()=>{Mv=Mt,Ea(),Av=Q(Re()),Ne(),Foe(),Fe(),Use=se.div(Bse||(Bse=G([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),Up={fullUnitStampColor:"#6a6a6a",stampFontSize:"10px",get subUnitStampColor(){return Bx(.2,Up.fullUnitStampColor)}},jse=se.div(Vse||(Vse=G([`
  position: absolute;
  top: 0;
  height: 100%;
  left: 0;
  overflow: hidden;
  z-index: 2;
  will-change: transform;
  pointer-events: none;
`]))),Hse=se.div(zse||(zse=G([`
  position: absolute;
  top: 0;
  left: 0;

  & > span {
    position: absolute;
    display: block;
    top: 9px;
    left: -10px;
    color: `,`;
    text-align: center;
    font-size: `,`;
    width: 20px;

    &.full-unit {
      color: `,`;
    }

    &.sub-unit {
      color: `,`;
    }
  }

  pointer-events: none;
`])),Up.fullUnitStampColor,Up.stampFontSize,Up.fullUnitStampColor,Up.subUnitStampColor),Gse=({layoutP:i,width:s})=>{let a=(0,Av.useRef)(null),[c,p]=(0,Av.useState)(null);return(0,Av.useLayoutEffect)(()=>{if(c)return(0,Mv.prism)(()=>{let f=(0,Mv.val)(i.sheet).getSequence();return{fullSecondStampsContainer:c,clippedSpaceRange:(0,Mv.val)(i.clippedSpace.range),clippedSpaceWidth:(0,Mv.val)(i.clippedSpace.width),unitSpaceToClippedSpace:(0,Mv.val)(i.clippedSpace.fromUnitSpace),leftPadding:(0,Mv.val)(i.scaledSpace.leftPadding),fps:f.subUnitsPerUnit,sequencePositionFormatter:f.positionFormatter,snapToGrid:g=>f.closestGridPosition(g)}}).onChange(me().ticker,$Me,!0)},[c,s,i]),Av.default.createElement(Use,{ref:a,style:{width:s+"px"}},Av.default.createElement(jse,{style:{width:s+"px"}},Av.default.createElement(Hse,{ref:p})))},Wse=Gse});function KMe(i){let[s,a]=(0,bV.useState)(!1);return(0,bV.useEffect)(()=>{if(a(!1),!i)return;let c=f=>{f.target===i?a(!0):a(!1)},p=()=>{a(!1)};return i.addEventListener("mouseenter",c),i.addEventListener("mousemove",c),i.addEventListener("mouseleave",p),()=>{a(!1),i.removeEventListener("mouseenter",c),i.removeEventListener("mousemove",c),i.removeEventListener("mouseleave",p)}},[i]),s}var bV,qMe=C(()=>{bV=Q(Re())});function XMe(i,s){let a=0,[c,p]=i,[f,g]=s;return p-c>g-f?[f,g]:(c<f&&(a=0-c),p>g&&(a=g-p),[c+a,p+a])}var xc,Vp,ro,_V,Kse,dR,qse,Xse,Yse=C(()=>{xc=Mt,hn(),vr(),Fe(),Rv(),As(),no(),mr(),Vp=Q(Re()),Ne(),jo(),ro={enabled:{backgroundColor:"#2C2F34",stroke:"#646568"},disabled:{backgroundColor:"#282a2cc5",stroke:"#595a5d"},hover:{backgroundColor:"#34373D",stroke:"#C8CAC0"},dragging:{backgroundColor:"#3F444A",stroke:"#C8CAC0"},thumbWidth:9,hitZoneWidth:26,rangeStripMinWidth:30},_V=1e3,dR=se.div(Kse||(Kse=G([`
  position: absolute;
  height: `,`px;
  background-color: `,`;
  cursor: grab;
  top: 0;
  left: 0;
  width: `,`px;
  transform-origin: left top;
  &:hover {
    background-color: `,`;
  }
  &.dragging {
    background-color: `,`;
    cursor: grabbing !important;
  }
  `,`;

  /* covers the one pixel space between the focus range strip and the top strip
  of the sequence editor panel, which would have caused that one pixel to act
  like a panel drag zone */
  &:after {
    display: block;
    content: ' ';
    position: absolute;
    bottom: -1px;
    height: 1px;
    left: 0;
    right: 0;
    background: transparent;
    pointer-events: normal;
    z-index: -1;
  }
`])),()=>Ec-1,i=>i.enabled?ro.enabled.backgroundColor:ro.disabled.backgroundColor,_V,ro.hover.backgroundColor,ro.dragging.backgroundColor,hr),qse=({layoutP:i})=>{let s=(0,Vp.useMemo)(()=>(0,xc.prism)(()=>{let{projectId:S,sheetId:M}=(0,xc.val)(i.sheet).address;return(0,xc.val)(me().atomP.ahistoric.projects.stateByProjectId[S].stateBySheetId[M].sequence.focusRange)}),[i]),[a,c]=sr(null),[p]=Ms(c,{menuItems:()=>{let S=(0,xc.val)(i.sheet),M=s.getValue();return[{label:"Delete focus range",callback:()=>{me().tempTransaction(({stateEditors:R})=>{R.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.unset(j({},S.address))}).commit()}},{label:M!=null&&M.enabled?"Disable focus range":"Enable focus range",callback:()=>{M!==void 0&&me().tempTransaction(({stateEditors:R})=>{R.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(j({},S.address),{range:M.range,enabled:!M.enabled}))}).commit()}}]}}),f=Wn(i.scaledSpace.toUnitSpace),g=Wn(i.sheet),y=(0,Vp.useMemo)(()=>{let S,M;return{debugName:"FocusRangeStrip",onDragStart(R){let A,k=s.getValue();if(!k)return!1;let D=k.range.start,O=k.range.end,F=!1,V=(0,xc.val)(i.sheet).getSequence();return{onDrag(W){if(k=s.getValue(),k){F=!0;let X=f(W),re=D+X,ne=O+X;ne<re&&(ne=re),[S,M]=XMe([re,ne],[0,V.length]).map(ae=>V.closestGridPosition(ae)),A&&A.discard(),A=me().tempTransaction(({stateEditors:ae})=>{var xe;ae.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(j({},g.address),{range:{start:S,end:M},enabled:(xe=k==null?void 0:k.enabled)!=null?xe:!0}))})}},onDragEnd(){k&&(F&&A!==void 0?A.commit():A&&A.discard())}}},lockCSSCursorTo:"grabbing"}},[g,f]),[w]=Ei(c,y);return Vd(w,-1),Un(()=>{let S=s.getValue(),M=(S==null?void 0:S.range)||{start:0,end:0},R=(0,xc.val)(i.clippedSpace.fromUnitSpace)(M.start),A=(0,xc.val)(i.clippedSpace.fromUnitSpace)(M.end),k,D;return R<0&&(R=0),A>(0,xc.val)(i.clippedSpace.width)&&(A=(0,xc.val)(i.clippedSpace.width)),R>A?(D=0,k=0):(D=R,k=(A-R)/_V),S?Vp.default.createElement(Vp.default.Fragment,null,p,Vp.default.createElement(dR,{id:"range-strip",enabled:S.enabled,className:"".concat(w?"dragging":""," ").concat(S.enabled?"enabled":""),ref:a,style:{transform:"translateX(".concat(D,"px) scale(").concat(k,", 1)")}})):Vp.default.createElement(Vp.default.Fragment,null)},[i,a,s,p,w])},Xse=qse}),jp,Hd,Zse,Qse,Jse,eae,tae,nae,rae,wV,YMe=C(()=>{jp=Mt,hn(),Fe(),Rv(),Ca(),no(),mr(),Hd=Q(Re()),Ne(),jo(),Yse(),du(),Qse=se.div(Zse||(Zse=G([`
  position: absolute;
  top: 0;
  // the right handle has to be pulled back by its width since its right side indicates its position, not its left side
  left: `,`px;
  transform-origin: left top;
  width: `,`px;
  height: `,`px;
  z-index: 3;

  --bg: `,`;

  stroke: `,`;
  user-select: none;

  cursor: `,`;

  // no pointer events unless pointer-root is in normal mode _and_ the
  // focus range is enabled
  #pointer-root & {
    pointer-events: none;
  }

  #pointer-root.normal & {
    pointer-events: auto;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.dragging {
    pointer-events: none !important;
  }

  // highlight the handle if it's hovered, or the whole strip is hovverd
  `,`:hover ~ &, &:hover {
    --bg: `,`;
    stroke: `,`;
  }

  // highlight the handle when it's being dragged or the whole strip is being dragged.
  // using dragging.dragging to give this selector priority, as it seems to be overridden
  // by the hover selector above
  &.dragging,
  `,`.dragging.dragging ~ & {
    --bg: `,`;
    stroke: `,`;
  }

  #pointer-root.draggingPositionInSequenceEditor &:hover {
    --bg: `,`;
    stroke: #40aaa4;
  }

  background-color: var(--bg);

  // a larger hit zone
  &:before {
    display: block;
    content: ' ';
    position: absolute;
    inset: -8px;
  }
`])),i=>i.type==="start"?0:-ro.thumbWidth,ro.thumbWidth,()=>Ec-1,({enabled:i})=>i?ro.enabled.backgroundColor:ro.disabled.backgroundColor,ro.enabled.stroke,i=>i.type==="start"?"w-resize":"e-resize",Id,()=>dR,ro.hover.backgroundColor,ro.hover.stroke,()=>dR,ro.dragging.backgroundColor,ro.dragging.stroke,ro.dragging.backgroundColor),eae=se.div(Jse||(Jse=G([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    var(--bg) 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),i=>i.type==="start"?90:-90,i=>i.type==="start"?ro.thumbWidth:-ro.thumbWidth+1),nae=se.div(tae||(tae=G([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    `,` 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),i=>i.type==="start"?-90:90,()=>ZS.backgroundColor,i=>i.type==="start"?-12:ro.thumbWidth),rae=({layoutP:i,thumbType:s})=>{var a;let[c,p]=sr(null),f=(0,Hd.useMemo)(()=>(0,jp.prism)(()=>{let{projectId:S,sheetId:M}=(0,jp.val)(i.sheet).address;return(0,jp.val)(me().atomP.ahistoric.projects.stateByProjectId[S].stateBySheetId[M].sequence.focusRange)}),[i]),g=(0,Hd.useMemo)(()=>({debugName:"FocusRangeThumb",onDragStart(){let S,M,R=(0,jp.val)(i.sheet),A={start:0,end:R.getSequence().length},k=f.getValue()||{range:A,enabled:!1},D=k.enabled,O=k.range[s],F=(0,jp.val)(i.scaledSpace.toUnitSpace),V=F(ro.rangeStripMinWidth);return{onDrag(W,X,re){var ne;let ae,xe=Is.checkIfMouseEventSnapToPos(re,{ignore:p});if(xe==null){let ge=F(W);ae=O+ge}else ae=xe;M=((ne=f.getValue())==null?void 0:ne.range)||A,s==="start"?ae=Math.max(Math.min(ae,M.end-V),0):ae=Math.min(Math.max(ae,M.start+V),R.getSequence().length);let fe=R.getSequence().closestGridPosition(ae);S!==void 0&&S.discard(),S=me().tempTransaction(({stateEditors:ge})=>{ge.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(j({},R.address),{range:z(j({},M),{[s]:fe}),enabled:D}))})},onDragEnd(W){W?S==null||S.commit():S==null||S.discard()}}}}),[i]),[y]=Ei(p,g);dl(y,"draggingPositionInSequenceEditor",s==="start"?"w-resize":"e-resize");let w=Wn(f);return Vd(y,(a=w==null?void 0:w.range[s])!=null?a:0),Un(()=>{let S=f.getValue();if(!S)return null;let{enabled:M}=S,R=S.range[s],A=(0,jp.val)(i.clippedSpace.fromUnitSpace)(R);return(A<0||(0,jp.val)(i.clippedSpace.width)<A)&&(A=-1e4),Hd.default.createElement(Qse,z(j(j({ref:c},Is.includePositionSnapAttrs(R)),gc(R)),{className:"".concat(y&&"dragging"," ").concat(M&&"enabled"),enabled:M,type:s,style:{transform:"translate3d(".concat(A,"px, 0, 0)")}}),Hd.default.createElement(eae,{type:s,enabled:M}),Hd.default.createElement(nae,{type:s}),Hd.default.createElement("svg",{viewBox:"0 0 9 18",xmlns:"http://www.w3.org/2000/svg"},Hd.default.createElement("line",{x1:"4",y1:"6",x2:"4",y2:"12"}),Hd.default.createElement("line",{x1:"6",y1:"6",x2:"6",y2:"12"})))},[i,c,f,y])},wV=rae});function ZMe(i,s){let[a,c]=(0,Sc.useState)("none");return dl(a!=="none","dragging",a==="creating"?"ew-resize":"move"),(0,Sc.useMemo)(()=>{let p=()=>({debugName:"FocusRangeZone/focusRangeCreationGestureHandlers",onDragStart(g){let y,w=(0,Iv.val)(i.clippedSpace.toUnitSpace),S=(0,Iv.val)(i.scaledSpace.toUnitSpace),M=(0,Iv.val)(i.sheet),R=M.getSequence(),A=g.target.getBoundingClientRect(),k=w(g.clientX-A.left),D=S(ro.rangeStripMinWidth);return{onDrag(O){let F=S(O),V=k,W=k+F;[V,W]=[ci(V,0,R.length),ci(W,0,R.length)].map(X=>R.closestGridPosition(X)),W<V?[V,W]=[Math.max(Math.min(W,V-D),0),V]:O>0&&(W=Math.min(Math.max(W,V+D),R.length)),y&&y.discard(),y=me().tempTransaction(({stateEditors:X})=>{X.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(j({},M.address),{range:{start:V,end:W},enabled:!0}))})},onDragEnd(O){O&&y!==void 0?y.commit():y&&y.discard()}}},lockCSSCursorTo:"ew-resize"}),f=()=>({debugName:"FocusRangeZone/panelMoveGestureHandlers",onDragStart(){let g,y=s.current,w=s.current.addBoundsHighlightLock();return{onDrag(S,M){let R=z(j({},y.dims),{top:ci(y.dims.top+M,0,window.innerHeight-ic),left:ci(y.dims.left+S,-y.dims.width+ic,window.innerWidth-ic)}),A=mI(R,{width:window.innerWidth,height:window.innerHeight});g==null||g.discard(),g=me().tempTransaction(({stateEditors:k})=>{k.studio.historic.panelPositions.setPanelPosition({position:A,panelId:y.panelId})})},onDragEnd(S){w(),S?g==null||g.commit():g==null||g.discard()}}},lockCSSCursorTo:"move"});return{debugName:"FocusRangeZone",onDragStart(g){let[y,w]=g.shiftKey?["creating",p().onDragStart(g)]:["moving-panel",f().onDragStart(g)];return c(y),w===!1?!1:{onDrag(S,M,R,A,k){w.onDrag(S,M,R,A,k)},onDragEnd(S){var M;c("none"),(M=w.onDragEnd)==null||M.call(w,S)}}}}},[i,s])}var Iv,Sc,iae,oae,sae,aae,QMe=C(()=>{Iv=Mt,hn(),Fe(),$y(),Rv(),Ca(),no(),qMe(),Jte(),mr(),ti(),Sc=Q(Re()),Ne(),Yse(),YMe(),Md(),oae=se.div(iae||(iae=G([`
  position: absolute;
  height: `,`px;
  left: 0;
  right: 0;
  box-sizing: border-box;
  /* Use the "grab" cursor if the shift key is up, which is the one used on the top strip of the sequence editor */
  cursor: `,`;
`])),()=>Ec,i=>i.isShiftDown?"ew-resize":"move"),sae=({layoutP:i})=>{let[s,a]=sr(null),c=Wy(),p=(0,Sc.useRef)(c);p.current=c;let f=(0,Sc.useMemo)(()=>(0,Iv.prism)(()=>{let{projectId:w,sheetId:S}=(0,Iv.val)(i.sheet).address;return(0,Iv.val)(me().atomP.ahistoric.projects.stateByProjectId[w].stateBySheetId[S].sequence.focusRange)}),[i]);Ei(a,ZMe(i,p));let g=Zte("Shift"),y=KMe(a);return(0,Sc.useEffect)(()=>{if(!g&&y)return p.current.addBoundsHighlightLock()},[!g&&y]),Un(()=>Sc.default.createElement(oae,{ref:s,isShiftDown:g},Sc.default.createElement(Xse,{layoutP:i}),Sc.default.createElement(wV,{thumbType:"start",layoutP:i}),Sc.default.createElement(wV,{thumbType:"end",layoutP:i})),[i,f,g])},aae=sae}),rb,Ec,ZS,lae,uae,cae,dae,Rv=C(()=>{hn(),rb=Q(Re()),Ne(),$se(),jo(),vr(),QMe(),Ec=18,ZS={backgroundColor:"#1f2120eb",borderColor:"#1c1e21"},uae=se.div(lae||(lae=G([`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border-bottom: 1px solid `,`;
  `,`;
`])),Ec,ZS.backgroundColor,ZS.borderColor,hr),cae=({layoutP:i})=>{let s=Wn(i.rightDims.width);return rb.default.createElement(rb.default.Fragment,null,rb.default.createElement(uae,j({},gc("hide")),rb.default.createElement(Wse,{layoutP:i,width:s,height:Ec}),rb.default.createElement(aae,{layoutP:i})))},dae=cae}),Ov,hae,pae,fae,mae,vae,gae,yae,bae,JMe=C(()=>{Ov=Q(Re()),Ne(),hn(),Fe(),CB(),av(),hae=i=>isFinite(i)&&i>0,fae=se.div(pae||(pae=G([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),vae=se.div(mae||(mae=G([`
  `,`;
  white-space: nowrap;
`])),Cp),gae=({deltaX:i})=>i*.25,yae=({layoutP:i})=>{let s=Wn(i.sheet),a=(0,Ov.useMemo)(()=>{let p;return{temporarilySetValue(f){p&&(p.discard(),p=void 0),p=me().tempTransaction(({stateEditors:g})=>{g.coreByProject.historic.sheetsById.sequence.setLength(z(j({},s.address),{length:f}))})},discardTemporaryValue(){p&&(p.discard(),p=void 0)},permanentlySetValue(f){p&&(p.discard(),p=void 0),me().transaction(({stateEditors:g})=>{g.coreByProject.historic.sheetsById.sequence.setLength(z(j({},s.address),{length:f}))})}}},[i,s]),c=(0,Ov.useRef)(null);return(0,Ov.useLayoutEffect)(()=>{c.current.focus()},[]),Un(()=>{let p=s.getSequence().length;return Ov.default.createElement(fae,null,Ov.default.createElement(vae,null,"Sequence length"),Ov.default.createElement(bA,z(j({value:p},a),{isValid:hae,inputRef:c,nudge:gae})))},[s,a,c])},bae=yae});function e2e(i,s){let a=(0,oa.useRef)(s);a.current=s;let c=(0,oa.useMemo)(()=>({debugName:"LengthIndicator/useDragBulge",lockCSSCursorTo:"ew-resize",onDragStart(f){let g,y=a.current,w=(0,Dv.val)(a.current.layoutP.sheet),S=w.getSequence().length,M=(0,Dv.val)(y.layoutP.scaledSpace.toUnitSpace);return{onDrag(R,A,k){let D=M(R);g&&(g.discard(),g=void 0),g=me().tempTransaction(({stateEditors:O})=>{O.coreByProject.historic.sheetsById.sequence.setLength(z(j({},w.address),{length:S+D}))})},onDragEnd(R){R?g&&g.commit():g&&g.discard()}}}}),[]),[p]=Ei(i,c);return Vd(p,-1),[p]}var Dv,oa,xV,QS,_ae,zp,wae,xae,Sae,Eae,Cae,Pae,kae,Tae,Mae,Aae,Iae,t2e=C(()=>{hn(),Dv=Mt,oa=Q(Re()),Ne(),$d(),Rv(),mr(),no(),Fe(),uc(),jo(),Oy(),JMe(),vr(),dc(),xV=1e3,QS={stripNormal:"#0000006c",stripActive:"#000000"},zp=se.div(_ae||(_ae=G([`
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  z-index: `,`;
  pointer-events: none;

  &:after {
    display: block;
    content: ' ';
    position: absolute;
    /* top: `,`px; */
    top: 0;
    bottom: 0;
    left: -1px;
    width: 1px;
    background-color: `,`;
  }

  &:hover:after,
  &.dragging:after {
    background-color: `,`;
  }
`])),()=>Pc.lengthIndicatorStrip,Ec,QS.stripNormal,QS.stripActive),xae=se.div(wae||(wae=G([`
  position: absolute;
  top: `,`px;
  width: 100px;
  left: -50px;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
`])),Ec-15),Eae=se.div(Sae||(Sae=G([`
  margin-top: 8px;
  font-size: 10px;
  white-space: nowrap;
  padding: 2px 8px;
  border-radius: 2px;
  `,`;
  cursor: ew-resize;
  color: #464646;
  background-color: #0000004d;
  display: none;

  `,":hover &, ",`.dragging & {
    display: block;
    color: white;
    background-color: `,`;
  }
`])),hr,zp,zp,QS.stripActive),Pae=se.div(Cae||(Cae=G([`
  font-size: 10px;
  white-space: nowrap;
  padding: 1px 2px;
  border-radius: 2px;
  `,`;
  justify-content: center;
  align-items: center;
  cursor: ew-resize;
  color: #5d5d5d;
  background-color: #191919;

  `,":hover &, ",`.dragging & {
    color: white;
    background-color: `,`;

    & > svg:first-child {
      margin-right: -1px;
    }
  }

  & > svg:first-child {
    margin-right: -4px;
  }
`])),hr,zp,zp,QS.stripActive),Tae=se.div(kae||(kae=G([`
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgb(23 23 23 / 43%);
  width: `,`px;
  z-index: `,`;
  transform-origin: left top;

  `,".dragging ~ &, ",`:hover ~ & {
    background-color: rgb(23 23 23 / 60%);
  }
`])),xV,()=>Pc.lengthIndicatorCover,zp,zp),Mae=-1e4,Aae=({layoutP:i})=>{let[s,a]=sr(null),[c]=e2e(a,{layoutP:i}),{node:p,toggle:f,close:g}=lc({debugName:"LengthIndicator"},()=>oa.default.createElement(cc,null,oa.default.createElement(bae,{layoutP:i,onRequestClose:g})));return Un(()=>{let y=(0,Dv.val)(i.sheet),w=(0,Dv.val)(i.rightDims.height),S=y.getSequence(),M=S.length,R=M,A=(0,Dv.val)(i.clippedSpace.fromUnitSpace)(R),k=(0,Dv.val)(i.clippedSpace.width),D,O;return A>k?(O=0,D=0):(A<0&&(A=0),O=A,D=(k-A)/xV),oa.default.createElement(oa.default.Fragment,null,p,oa.default.createElement(zp,{style:{height:w+"px",transform:"translateX(".concat(O===0?Mae:O,"px)")},className:c?"dragging":""},oa.default.createElement(xae,null,oa.default.createElement(Pae,j({ref:s,onClick:F=>{f(F,a)}},gc("hide")),oa.default.createElement(GCe,null),oa.default.createElement(WCe,null)),oa.default.createElement(Eae,null,"Sequence length:"," ",S.positionFormatter.formatBasic(M)))),oa.default.createElement(Tae,{title:"Length",style:{height:w+"px",transform:"translateX(".concat(O,"px) scale(").concat(D,", 1)")}}))},[i,s,c,p])},Iae=Aae}),SV,Gd,Rae,Oae,Dae,Lae,Nae,Fae,Bae,Uae,n2e=C(()=>{hn(),SV=Mt,Gd=Q(Re()),Ne(),$se(),$d(),Rv(),jo(),Oae=se.div(Rae||(Rae=G([`
  position: absolute;
  top: 0;
  left: 0;
  margin-top: 0px;
`]))),Lae=se.div(Dae||(Dae=G([`
  position: absolute;
  top: 16px;
  font-size: `,`;
  color: `,`;
  text-align: center;
  transform: translateX(-50%);
  background: `,`;
  padding: 1px 8px;
  font-variant-numeric: tabular-nums;
  pointer-events: none;
  z-index: `,`;
`])),Up.stampFontSize,Up.fullUnitStampColor,ZS.backgroundColor,()=>Pc.currentFrameStamp),Fae=se.div(Nae||(Nae=G([`
  position: absolute;
  top: 5px;
  left: -0px;
  bottom: 0;
  width: 0.5px;
  background: rgba(100, 100, 100, 0.2);
  pointer-events: none;
`]))),Bae=Gd.default.memo(({layoutP:i})=>{let[s,a]=Wn(wne()),c=Wn(i.clippedSpace.fromUnitSpace),{sequence:p,formatter:f,clippedSpaceWidth:g}=Un(()=>{let M=(0,SV.val)(i.sheet).getSequence(),R=(0,SV.val)(i.clippedSpace.width);return{sequence:M,formatter:M.positionFormatter,clippedSpaceWidth:R}},[i]);if(s==-1)return Gd.default.createElement(Gd.default.Fragment,null);let y=a===3?p.closestGridPosition(s):s,w=c(y),S=w>=0&&w<=g;return Gd.default.createElement(Gd.default.Fragment,null,Gd.default.createElement(Oae,null,Gd.default.createElement(Lae,{style:{opacity:S?1:0,transform:"translate3d(calc(".concat(w,"px - 50%), 0, 0)")}},f.formatForPlayhead(y)),Gd.default.createElement(Fae,{posType:a,style:{opacity:S?1:0,transform:"translate3d(".concat(w,"px, 0, 0)")}}))," ")}),Uae=Bae}),hu,Ds,Vae,jae,zae,Hae,Gae,hR,Wae,EV,$ae,pR,Kae,fR,qae,CV,Xae,Yae,r2e=C(()=>{hn(),hu=Mt,p2(),Ea(),Ds=Q(Re()),Ne(),$d(),jo(),vr(),no(),jae=se.div(Vae||(Vae=G([`
  --threadHeight: 6px;
  --bg-inactive: #32353b;
  --bg-active: #5b5c5d;
  position: absolute;
  height: 0;
  width: 100%;
  left: 12px;
  /* bottom: 8px; */
  z-index: `,`;
  `,`
`])),()=>Pc.horizontalScrollbar,hr),Hae=se.div(zae||(zae=G([`
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--threadHeight);
`]))),hR=se.div(Gae||(Gae=G([`
  position: absolute;
  height: 5px;
  background: var(--bg-inactive);
  cursor: ew-resize;
  z-index: 2;

  &:hover,
  &:active {
    background: var(--bg-active);
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),MF("absolute","-4px")),EV=se.div(Wae||(Wae=G([`
  position: absolute;
  height: 5px;
  width: 7px;
  left: 0;
  z-index: 2;
  top: 0;
  bottom: 0;
  display: block;

  &:hover:before {
    background: var(--bg-active);
  }

  &:before {
    `,`;
    display: block;
    content: ' ';
    background: var(--bg-inactive);
    border-radius: 0 2px 2px 0;
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),MF("absolute","0"),MF("absolute","-4px")),pR=se(EV)($ae||($ae=G([`
  left: calc(-1 * 7px);
  cursor: w-resize;
  &:before {
    transform: scaleX(-1);
  }
`]))),fR=se(EV)(Kae||(Kae=G([`
  cursor: e-resize;
  left: 0px;
`]))),CV=se.div(qae||(qae=G([`
  display: `,`;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 4px;
  transform: translateX(-50%);
  background: #131d1f;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;

  `,`:hover &,
  `,`:hover &,
  `,":hover ~ ",` &,
  `,":hover ~ ",` & {
    display: block;
  }
`])),i=>i.active?"block":"none",pR,fR,hR,pR,hR,fR),Xae=({layoutP:i})=>{let s=(0,Ds.useCallback)(F=>F.toFixed(2),[]),a=(0,Ds.useMemo)(()=>(0,hu.prism)(()=>{let F=(0,hu.val)(i.rightDims.width)-25,V=(0,hu.val)(i.clippedSpace.range),W=(0,hu.val)(i.sheet).getSequence().length,X=Math.max(V.end,W),re=V.start/X*F,ne=V.end/X*F;return{rightWidth:F,clippedSpaceRange:V,sequenceLength:W,assumedLengthOfSequence:X,rangeStartX:re,rangeEndX:ne,bottom:(0,hu.val)(i.horizontalScrollbarDims.bottom)}}),[i]),{rangeStartX:c,rangeEndX:p,clippedSpaceRange:f,bottom:g}=Wn(a),[y,w]=(0,Ds.useState)("nothing"),S=(0,Ds.useMemo)(()=>{let F=(0,hu.val)(a),V=()=>{F=(0,hu.val)(a)},W=X=>X/F.rightWidth*F.assumedLengthOfSequence;return{onRangeDragStart(){return V(),{onDrag(X){w("both");let re=W(X),ne=bd(F.clippedSpaceRange,ae=>ae+re);(0,hu.val)(i.clippedSpace.setRange)(ne)},onDragEnd(){w("nothing")}}},onRangeStartDragStart(){return V(),{onDrag(X){w("start");let re=W(X),ne={start:F.clippedSpaceRange.start+re,end:F.clippedSpaceRange.end};ne.start>ne.end-1&&(ne.start=ne.end-1),ne.start<=0&&(ne.start=0),(0,hu.val)(i.clippedSpace.setRange)(ne)},onDragEnd(){w("nothing")}}},onRangeEndDragStart(){return V(),{onDrag(X){w("end");let re=W(X),ne={start:F.clippedSpaceRange.start,end:F.clippedSpaceRange.end+re};ne.end<ne.start+1&&(ne.end=ne.start+1),ne.end>=F.assumedLengthOfSequence&&(ne.end=F.assumedLengthOfSequence),(0,hu.val)(i.clippedSpace.setRange)(ne)},onDragEnd(){w("nothing")}}}}},[i,a]),[M,R]=(0,Ds.useState)(null);Ei(M,{debugName:"HorizontalScrollbar/onRangeDrag",onDragStart:S.onRangeDragStart,lockCSSCursorTo:"ew-resize"});let[A,k]=(0,Ds.useState)(null);Ei(A,{debugName:"HorizontalScrollbar/onRangeStartDrag",onDragStart:S.onRangeStartDragStart,lockCSSCursorTo:"w-resize"});let[D,O]=(0,Ds.useState)(null);return Ei(D,{debugName:"HorizontalScrollbar/onRangeEndDrag",onDragStart:S.onRangeEndDragStart,lockCSSCursorTo:"e-resize"}),Ds.default.createElement(jae,j({style:{bottom:g+8+"px"}},gc("hide")),Ds.default.createElement(Hae,null,Ds.default.createElement(hR,{ref:R,style:{width:"".concat(p-c,"px"),transform:"translate3d(".concat(c,"px, 0, 0)")}}),Ds.default.createElement(pR,{ref:k,style:{transform:"translate3d(".concat(c,"px, 0, 0)")}},Ds.default.createElement(CV,{active:y==="both"||y==="start"},s(f.start))),Ds.default.createElement(fR,{ref:O,style:{transform:"translate3d(".concat(p,"px, 0, 0)")}},Ds.default.createElement(CV,{active:y==="both"||y==="end"},s(f.end)))))},Yae=Xae}),Zae,Qae,Jae,ele,tle,i2e=C(()=>{Zae=Q(Re()),Ne(),Jae=se.div(Qae||(Qae=G([`
  position: absolute;
  inset: `,`px;
`])),i=>i.room*-1),ele=i=>Zae.default.createElement(Jae,{room:i.room}),tle=ele}),mR,vR,PV,nle,rle,ile,ole,sle,ale,lle,ule,o2e=C(()=>{Ne(),hn(),CB(),av(),mR=Q(Re()),vR=Q(Re()),PV=Mt,B0(),nle=i=>isFinite(i)&&i>=0,ile=se.div(rle||(rle=G([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),sle=se.div(ole||(ole=G([`
  `,`;
  white-space: nowrap;
`])),Cp),ale=({deltaX:i})=>i*.25,lle=({layoutP:i,onRequestClose:s})=>{let a=(0,PV.val)(i.sheet),c=a.getSequence(),p=(0,mR.useMemo)(()=>{let g,y=c.position;return{temporarilySetValue(w){g&&(g=void 0),g=ci(w,0,c.length),c.position=g},discardTemporaryValue(){g&&(g=void 0,c.position=y,s("discardTemporaryValue"))},permanentlySetValue(w){g&&(g=void 0),c.position=ci(w,0,c.length),s("permanentlySetValue")}}},[i,c]),f=(0,mR.useRef)(null);return(0,mR.useLayoutEffect)(()=>{f.current.focus()},[]),Un(()=>{let g=a.getSequence(),y=Number((0,PV.val)(g.pointer.position).toFixed(3));return vR.default.createElement(ile,null,vR.default.createElement(sle,null,"Sequence position"),vR.default.createElement(bA,z(j({value:y},p),{isValid:nle,inputRef:f,nudge:ale})))},[a,p,f])},ule=lle}),cle,s2e=C(()=>{cle=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0}),dle,a2e=C(()=>{s2e(),dle=i=>cle?i.metaKey===!0:i.ctrlKey===!0});function l2e(){gR=!1}function u2e(){gR=!0}function c2e(){let i=me();(0,hle.useEffect)(()=>{let s=a=>{let c=a.composedPath()[0];if(!(c&&(c.tagName==="INPUT"||c.tagName==="TEXTAREA"))){if(a.key==="z"||a.key==="Z"||a.code==="KeyZ")if(dle(a))a.shiftKey===!0?i.redo():i.undo();else return;else if(a.code==="Space"&&!a.shiftKey&&!a.metaKey&&!a.altKey&&!a.ctrlKey){if(!gR)return;let p=pCe();if(p)if(p.playing)p.pause();else{let{projectId:f,sheetId:g}=p.address,y=(0,pu.prism)(()=>{let M=(0,pu.val)(me().atomP.ahistoric.projects.stateByProjectId[f].stateBySheetId[g].sequence.focusRange);return pu.prism.memo("shouldFollowFocusRange",()=>{let R=p.position;if(M){let A=R>=M.range.start&&R<=M.range.end;return M.enabled?!!A:!0}else return!0},[])&&M&&M.enabled?{range:[M.range.start,M.range.end],isFollowingARange:!0}:{range:[0,(0,pu.val)(p.pointer.length)],isFollowingARange:!1}}),w=p.playDynamicRange((0,pu.prism)(()=>(0,pu.val)(y).range),me().ticker),S=kV(p);w.finally(()=>{S.set(void 0)}),S.set(y)}else return}else if(a.altKey&&(a.key==="\\"||a.code==="Backslash"||a.code==="IntlBackslash"))i.transaction(({stateEditors:p,drafts:f})=>{p.studio.ahistoric.setVisibilityState(f.ahistoric.visibilityState==="everythingIsHidden"?"everythingIsVisible":"everythingIsHidden")});else return;a.preventDefault(),a.stopPropagation()}};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[])}var hle,pu,gR,kV,ple,TV=C(()=>{hle=Q(Re()),Fe(),a2e(),_p(),pu=Mt,FA(),gR=!0,kV=oS(i=>new pu.Atom(void 0)),ple=oS(i=>(0,pu.prism)(()=>{let s=kV(i).prism.getValue();if(s)return s.getValue().isFollowingARange;{let{projectId:a,sheetId:c}=i.address,p=(0,pu.val)(me().atomP.ahistoric.projects.stateByProjectId[a].stateBySheetId[c].sequence.focusRange);if(!p||!p.enabled)return!1;let f=(0,pu.val)(i.pointer.position);return f>=p.range.start&&f<=p.range.end}}))});function d2e(i,s){return Ms(i,{menuItems(){return[{label:"Place marker",callback:()=>{me().transaction(({stateEditors:a})=>{let c=(0,Cc.val)(s.layoutP.sheet),p=c.getSequence();a.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:c.address,markers:[{id:ZPe(),position:p.position}],snappingFunction:p.closestGridPosition})})}}]}})}var Cc,yl,fle,Lv,mle,vle,gle,MV,yle,ble,_le,wle,xle,Sle,h2e=C(()=>{i2e(),no(),mr(),hn(),Cc=Mt,B0(),yl=Q(Re()),Ne(),$d(),jo(),vr(),uc(),dc(),o2e(),TV(),Ca(),As(),Fe(),Nd(),du(),vv(),Lv=se.div(fle||(fle=G([`
  --thumbColor: #00e0ff;
  position: absolute;
  top: 0;
  left: 0;
  width: 5px;
  height: 100%;
  z-index: `,`;
  pointer-events: none;

  display: `,`;
`])),()=>Pc.playhead,i=>i.isVisible?"block":"none"),vle=se.div(mle||(mle=G([`
  position: absolute;
  top: 8px;
  width: 0;
  height: calc(100% - 8px);
  border-left: 1px solid #27e0fd;
  z-index: 10;
  pointer-events: none;

  #pointer-root.draggingPositionInSequenceEditor &:not(.seeking) {
    /* pointer-events: auto; */
    /* cursor: var(`,`); */

    &:after {
      position: absolute;
      inset: -8px;
      display: block;
      content: ' ';
    }
  }
`])),Id),MV=se.div(gle||(gle=G([`
  background-color: var(--thumbColor);
  position: absolute;
  width: 5px;
  height: 13px;
  top: -4px;
  left: -2px;
  z-index: 11;
  cursor: ew-resize;
  --sunblock-color: #1f2b2b;

  `,`;

  `,`.seeking > & {
    pointer-events: none !important;
  }

  #pointer-root.draggingPositionInSequenceEditor
    `,`:not(.seeking)
    > & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  `,`.playheadattachedtofocusrange > & {
    top: -8px;
    --sunblock-color: #005662;
    &:before,
    &:after {
      border-bottom-width: 8px;
    }
  }

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-left: 2px solid transparent;
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    right: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-right: 2px solid transparent;
  }
`])),hr,Lv,Lv,Id,Lv),ble=se.div(yle||(yle=G([`
  position: absolute;
  left: 1px;
  right: 1px;
  top: 13px;
  border-top: 3px solid var(--thumbColor);
  border-right: 1px solid transparent;
  border-left: 1px solid transparent;
  pointer-events: none;

  /* `,`.playheadattachedtofocusrange & {
    top: 10px;
    &:before,
    &:after {
      height: 15px;
    }
  } */

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    left: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 0 100% 0 0;
    border-top: 1px solid var(--thumbColor);
    border-right: 1px solid var(--thumbColor);
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    right: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 100% 0 0 0;
    border-top: 1px solid var(--thumbColor);
    border-left: 1px solid var(--thumbColor);
  }
`])),Lv),wle=se.div(_le||(_le=G([`
  display: none;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 2px;
  transform: translateX(-50%);
  background: #1a1a1a;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;
  `,":hover &, ",`.seeking & {
    display: block;
  }
`])),MV,Lv),xle=({layoutP:i})=>{let[s,a]=sr(null),{node:c,toggle:p,close:f}=lc({debugName:"Playhead"},()=>yl.default.createElement(cc,null,yl.default.createElement(ule,{layoutP:i,onRequestClose:f}))),g=(0,yl.useMemo)(()=>({debugName:"RightOverlay/Playhead",onDragStart(){let S=(0,Cc.val)(i.sheet).getSequence(),M=S.position,R=(0,Cc.val)(i.scaledSpace.toUnitSpace),A=(0,Cc.val)(i.seeker.setIsSeeking);return A(!0),h4(),{onDrag(k,D,O){var F;let V=R(k);S.position=(F=Is.checkIfMouseEventSnapToPos(O,{ignore:a}))!=null?F:ci(M+V,0,S.length)},onDragEnd(k){A(!1),mv()},onClick(k){p(k,s.current)}}}}),[i,a]),[y]=Ei(a,g);dl(y,"draggingPositionInSequenceEditor","ew-resize"),Vd(Wn(i.seeker.isSeeking)||y,-1);let[w]=d2e(a,{layoutP:i});return Un(()=>{let S=(0,Cc.val)(i.seeker.isSeeking),M=(0,Cc.val)(i.sheet).getSequence(),R=(0,Cc.val)(ple(M)),A=M.positionPrism.getValue(),k=(0,Cc.val)(i.clippedSpace.fromUnitSpace)(A),D=k>=0&&k<=(0,Cc.val)(i.clippedSpace.width);return yl.default.createElement(yl.default.Fragment,null,w,c,yl.default.createElement(Lv,j({isVisible:D,style:{transform:"translate3d(".concat(k,"px, 0, 0)")},className:"".concat(S&&"seeking"," ").concat(R&&"playheadattachedtofocusrange")},gc("hide")),yl.default.createElement(MV,j({ref:s},Is.includePositionSnapAttrs(A)),yl.default.createElement(tle,{room:8}),yl.default.createElement(ble,null),yl.default.createElement(wle,null,M.positionFormatter.formatForPlayhead(M.closestGridPosition(A)))),yl.default.createElement(vle,z(j({},Is.includePositionSnapAttrs(A)),{className:S?"seeking":""}))))},[i,s,c])},Sle=xle}),Nv,JS,yR,Ele,Cle,Ple,kle,p2e=C(()=>{Nv=Mt,hn(),Fe(),Rv(),JS=Q(Re()),Ne(),yR=1e3,Cle=se.div(Ele||(Ele=G([`
  position: absolute;
  top: `,`px;
  left: 0;
  opacity: 0.15;
  width: `,`px;
  transform-origin: top left;
  pointer-events: none;
  background-color: `,`;
`])),Ec,yR,i=>i.enabled?"#000000":"transparent"),Ple=({layoutP:i})=>{let s=(0,JS.useMemo)(()=>(0,Nv.prism)(()=>{let{projectId:a,sheetId:c}=(0,Nv.val)(i.sheet).address;return(0,Nv.val)(me().atomP.ahistoric.projects.stateByProjectId[a].stateBySheetId[c].sequence.focusRange)}),[i]);return Un(()=>{let a=s.getValue();if(!a||!a.enabled)return null;let c=(0,Nv.val)(i.rightDims.height)-Ec,p=(0,Nv.val)(i.clippedSpace.fromUnitSpace),f=(0,Nv.val)(i.clippedSpace.width),g=[];{let y=0,w=p(a.range.start),S,M;y>w?(M=0,S=0):(w>f&&(w=f),M=y,S=(w-y)/yR),g.push({translateX:M,scaleX:S})}{let y=p(a.range.end),w=f,S,M;y>w?(M=0,S=0):(y<0&&(y=0),M=y,S=(w-y)/yR),g.push({translateX:M,scaleX:S})}return JS.default.createElement(JS.default.Fragment,null,g.map(({translateX:y,scaleX:w},S)=>JS.default.createElement(Cle,{key:"curtain-".concat(S),enabled:!0,style:{height:"".concat(c,"px"),transform:"translateX(".concat(y,"px) scaleX(").concat(w,")")}})))},[i,s])},kle=Ple}),ib,Tle,Mle,Ale,Ile,Rle,f2e=C(()=>{ib=Q(Re()),Ne(),hn(),Fe(),av(),RB(),Mle=se.div(Tle||(Tle=G([`
  display: flex;
  gap: 8px;
  /* padding: 4px 8px; */
  height: 28px;
  align-items: center;
`]))),se.div(Ale||(Ale=G([`
  `,`;
  white-space: nowrap;
`])),Cp),Ile=({layoutP:i,marker:s})=>{var a;let c=Wn(i.sheet),p=(0,ib.useMemo)(()=>{let g;return{temporarilySetValue(y){g&&(g.discard(),g=void 0),g=me().tempTransaction(({stateEditors:w})=>{w.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:c.address,markerId:s.id,label:y})})},discardTemporaryValue(){g&&(g.discard(),g=void 0)},permanentlySetValue(y){g&&(g.discard(),g=void 0),me().transaction(({stateEditors:w})=>{w.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:c.address,markerId:s.id,label:y})})}}},[i,c]),f=(0,ib.useRef)(null);return(0,ib.useLayoutEffect)(()=>{f.current.focus()},[]),ib.default.createElement(Mle,null,ib.default.createElement(wA,z(j({value:(a=s.label)!=null?a:""},p),{isValid:()=>!0,inputRef:f})))},Rle=Ile});function m2e(i,s){return Ms(i,{menuItems(){return[{label:"Remove marker",callback:()=>{me().transaction(({stateEditors:a})=>{a.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removeMarker({sheetAddress:s.sheetAddress,markerId:s.markerId})})}}]}})}function v2e(i,s){let a=(0,Ls.useRef)(s);a.current=s;let c=(0,Ls.useMemo)(()=>({debugName:"MarkerDot/useDragMarker (".concat(s.marker.id,")"),onDragStart(f){let g=a.current.marker,y=(0,bR.val)(s.layoutP.scaledSpace.toUnitSpace),w;return h4(),{onDrag(S,M,R){var A;let k=g,D=Math.max((A=Is.checkIfMouseEventSnapToPos(R,{ignore:i}))!=null?A:k.position+y(S),0);w==null||w.discard(),w=me().tempTransaction(({stateEditors:O})=>{O.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:(0,bR.val)(s.layoutP.sheet.address),markers:[z(j({},k),{position:D})],snappingFunction:(0,bR.val)(s.layoutP.sheet).getSequence().closestGridPosition})})},onDragEnd(S){S?w==null||w.commit():w==null||w.discard(),mv()}}}}),[]),[p]=Ei(i,c);return Vd(p,s.marker.position),dl(p,"draggingPositionInSequenceEditor draggingMarker","ew-resize"),[p]}var bR,Ls,AV,IV,Ole,Dle,Lle,Nle,Fle,_R,Ble,Ule,Vle,jle,zle,Hle,g2e=C(()=>{bR=Mt,hn(),Fe(),Ca(),As(),mr(),Ls=Q(Re()),Ne(),jo(),no(),$d(),du(),CI(),Tne(),vv(),uc(),dc(),f2e(),AV=12,IV=12,Ole=AV*2,Dle=IV*2,Nle=se.div(Lle||(Lle=G([`
  position: absolute;
  // below the sequence ruler "top bar"
  top: 18px;
  z-index: `,`;
`])),()=>Pc.marker),_R=se.div(Fle||(Fle=G([`
  position: absolute;
  `,`
  pointer-events: none;
`])),fl(AV,IV)),Ble=Ls.default.memo(()=>Ls.default.createElement(_R,{children:Ls.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ls.default.createElement("path",{d:"M12 5H0V7H2.71973L5.96237 10.2426L9.20501 7H12V5Z",fill:"#40AAA4"}))})),Vle=se.div(Ule||(Ule=G([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  // :not dragging marker to ensure that markers don't snap to other markers
  // this works because only one marker track (so this technique is not used by keyframes...)
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) & {
    `,`
  }

  // "All instances of this component <Mark/> inside #pointer-root when it has the .draggingPositionInSequenceEditor class"
  // ref: https://styled-components.com/docs/basics#pseudoelements-pseudoselectors-and-nesting
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) &,
  #pointer-root.draggingPositionInSequenceEditor
    &.`,` {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &:hover
    + `,`,
    // notice , "or" in CSS
    &.`,`
    + `,` {
    `,`
  }
`])),yc.CSS,yc.CSS_WHEN_SOMETHING_DRAGGING,yc.BEING_DRAGGED_CLASS,Id,_R,yc.BEING_DRAGGED_CLASS,_R,fl(Ole,Dle)),jle=({layoutP:i,markerId:s})=>{let a=Wn(i.sheet.address),c=Wn(me().atomP.historic.projects.stateByProjectId[a.projectId].stateBySheetId[a.sheetId].sequenceEditor.markerSet.byId[s]);if(!c)return null;let p=Wn(i.clippedSpace.width),f=Wn(i.clippedSpace.fromUnitSpace)(c.position),g=f<=0||f>p,y=g?-1e4:f,w=g?0:1;return Ls.default.createElement(Nle,{style:{transform:"translateX(".concat(y,"px) scale(").concat(w,")")}},Ls.default.createElement(Hle,{marker:c,layoutP:i}))},zle=jle,Hle=({layoutP:i,marker:s})=>{let a=Wn(i.sheet.address),[c,p]=sr(null),[f]=m2e(p,{sheetAddress:a,markerId:s.id}),[g]=v2e(p,{layoutP:i,marker:s}),{node:y,toggle:w,close:S}=lc({debugName:"MarkerPopover"},()=>Ls.default.createElement(cc,null,Ls.default.createElement(Rle,{marker:s,layoutP:i,onRequestClose:S})));return Ls.default.createElement(Ls.default.Fragment,null,f,y,Ls.default.createElement(Vle,j({title:s.label?"Marker: ".concat(s.label):"Marker",ref:c,onClick:M=>{w(M,c.current)}},yc.reactProps({isDragging:g,position:s.position}))),Ls.default.createElement(Ble,null))}}),wR,Gle,Wle,y2e=C(()=>{hn(),Fe(),wR=Q(Re()),g2e(),Gle=({layoutP:i})=>{let s=Wn(i.sheet.address),a=me().atomP.historic.projects.stateByProjectId[s.projectId].stateBySheetId[s.sheetId].sequenceEditor.markerSet,c=Wn(a.allIds);return wR.default.createElement(wR.default.Fragment,null,c&&Object.keys(c).map(p=>wR.default.createElement(zle,{key:p,layoutP:i,markerId:p})))},Wle=Gle}),$le,Wd,Kle,qle,Xle,Yle,b2e=C(()=>{$d(),hn(),$le=Mt,Wd=Q(Re()),Ne(),t2e(),n2e(),r2e(),h2e(),Rv(),p2e(),y2e(),qle=se.div(Kle||(Kle=G([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: visible;
  pointer-events: none;
`])),()=>Pc.rightOverlay),Xle=({layoutP:i})=>Un(()=>{let s=(0,$le.val)(i.rightDims.width);return Wd.default.createElement(qle,{style:{width:s+"px"}},Wd.default.createElement(Sle,{layoutP:i}),Wd.default.createElement(Yae,{layoutP:i}),Wd.default.createElement(Uae,{layoutP:i}),Wd.default.createElement(dae,{layoutP:i}),Wd.default.createElement(Wle,{layoutP:i}),Wd.default.createElement(Iae,{layoutP:i}),Wd.default.createElement(kle,{layoutP:i}))},[i]),Yle=Xle}),Zle,xR,Qle,Jle,eue,tue,_2e=C(()=>{Zle=Mt,hn(),Fe(),xR=Q(Re()),Ne(),Oy(),jo(),Jle=se.button(Qle||(Qle=G([`
  outline: none;
  background-color: #1c1d21;
  border: 1px solid #191919;
  border-radius: 2px;
  display: flex;
  bottom: 14px;
  right: 8px;
  z-index: 1;
  position: absolute;

  padding: 4px 8px;
  display: flex;
  color: #656d77;
  line-height: 20px;
  font-size: 10px;

  &:hover {
    color: white;
  }

  & > svg {
    transition: transform 0.3s;
    transform: rotateZ(0deg);
  }

  &:hover > svg {
    transform: rotateZ(-20deg);
  }

  &.open > svg {
    transform: rotateZ(-180deg);
  }

  &.open:hover > svg {
    transform: rotateZ(-160deg);
  }
`]))),eue=({layoutP:i})=>{let s=Wn(i.graphEditorDims.isOpen),a=(0,xR.useCallback)(()=>{let c=(0,Zle.val)(i.graphEditorDims.isOpen);me().transaction(({stateEditors:p})=>{p.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!c})})},[i]);return xR.default.createElement(Jle,j({onClick:a,title:"Toggle graph editor",className:s?"open":""},gc("hide")),xR.default.createElement(lPe,null))},tue=eue}),fu,pi,nue,rue,iue,oue,Pc,sue,aue,lue,uue,cue,due,hue,pue,fue,$d=C(()=>{_p(),hn(),Fte(),fu=Mt,pi=Q(Re()),Ne(),LMe(),aR(),WMe(),b2e(),$y(),zee(),gte(),jo(),$n(),ti(),_2e(),Md(),uv(),rue=se(ZU)(nue||(nue=G([`
  z-index: `,`;
  box-shadow: 2px 2px 0 rgb(0 0 0 / 11%);
`])),Cy.sequenceEditorPanel),oue=se.div(iue||(iue=G([`
  background-color: rgba(40, 43, 47, 0.99);
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
  pointer-events: none;
`]))),Pc=(()=>{let i={rightBackground:0,scrollableArea:0,rightOverlay:0,lengthIndicatorCover:0,lengthIndicatorStrip:0,playhead:0,currentFrameStamp:0,marker:0,horizontalScrollbar:0},s=-1;for(let a of Object.keys(i))i[a]=s,s++;return i})(),aue=se(WU)(sue||(sue=G([`
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1;
`]))),lue={edges:{left:{from:"screenLeft",distance:.1},right:{from:"screenRight",distance:.2},top:{from:"screenBottom",distance:.4},bottom:{from:"screenBottom",distance:.01}}},uue={width:800,height:200},cue=i=>pi.default.createElement(GU,{panelId:"sequenceEditor",defaultPosition:lue,minDims:uue},pi.default.createElement(due,null)),due=()=>{let{dims:i}=Wy(),[s,a]=(0,pi.useState)(null);return iZ(s),Un(()=>{let c=fu.prism.memo("panelSize",()=>{let A=i.width,k=i.height;return{width:A,height:k,widthWithoutBorder:A-2,heightWithoutBorder:k-4,screenX:i.left,screenY:i.top}},[i]),p=rs(bp().filter(A=>Wt(A)||Dt(A)).map(A=>Dt(A)?A.sheet:A));if(rs(p.map(A=>A.template)).length!==1)return pi.default.createElement(pi.default.Fragment,null);let f=p[0];if(!f)return pi.default.createElement(pi.default.Fragment,null);let g=JU("panelSizeP",c).pointer,y=fu.prism.memo("key",()=>JSON.stringify(f.address),[f]),w=fu.prism.memo("layout",()=>GMe(f,g),[f,g]).getValue();if((0,fu.val)(w.tree.children).length===0)return pi.default.createElement(pi.default.Fragment,null);let S=fu.prism.memo("containerRef",fue,[]),M=(0,fu.val)(w.graphEditorDims.isAvailable),R=(0,fu.val)(w.graphEditorDims.isOpen);return pi.default.createElement(rue,{ref:A=>{S(A),A!==s&&a(A)}},pi.default.createElement(oue,{style:{width:"".concat((0,fu.val)(w.leftDims.width),"px")}}),pi.default.createElement(Ene,{layoutP:w},pi.default.createElement(hue,{layoutP:w}),pi.default.createElement(Ase,{key:y+"-dopeSheet",layoutP:w}),R&&pi.default.createElement(Qoe,{key:y+"-graphEditor",layoutP:w}),M&&pi.default.createElement(tue,{layoutP:w}),pi.default.createElement(Yle,{layoutP:w})))},[i,s])},hue=({layoutP:i})=>Un(()=>{let s=(0,fu.val)(i.sheet);return pi.default.createElement(aue,{style:{width:(0,fu.val)(i.leftDims.width)}},pi.default.createElement(QF,null,pi.default.createElement(yp,null,s.address.sheetId," "),pi.default.createElement(Wx,null,":",""),pi.default.createElement(yp,null,s.address.sheetInstanceId," "),pi.default.createElement(Wx,null,"",">",""),pi.default.createElement(yp,null,"Sequence")))},[i]),pue=cue,fue=()=>{let i=null,s={passive:!1,capture:!1},a=c=>{Math.abs(c.deltaY)<Math.abs(c.deltaX)&&(c.preventDefault(),c.stopPropagation())};return c=>{i!==c&&i&&i.removeEventListener("wheel",a,s),i=c,c&&c.addEventListener("wheel",a,s)}}}),Fv,mue,vue,w2e=C(()=>{SCe(),jU(),Fv=Q(Re()),Fe(),hn(),Fke(),$d(),mue=()=>{let i=Wn(me().paneManager.allPanesD),s=Object.entries(i).map(([a,c])=>Fv.default.createElement(Nte,{key:"pane-".concat(a),paneInstance:c}));return Fv.default.createElement(Fv.default.Fragment,null,s,Fv.default.createElement(CK,null),Fv.default.createElement(Fee,null),Fv.default.createElement(pue,null))},vue=mue}),gue,yue,bue,x2e=C(()=>{Ne(),rI(),yue=se(zy)(gue||(gue=G([`
  --popover-outer-stroke: #e11c1c;
  --popover-inner-stroke: #2c1c1c;
  --popover-bg: #2c1c1c;
  pointer-events: none !important;
`]))),bue=yue}),S2e=K((i,s)=>{var a,c;a=[],c=[];function p(f,g,y){var w,S,M,R,A,k,D,O;if(f===g)return 0;if(w=f.length,S=g.length,w===0)return S;if(S===0)return w;for(y&&(f=f.toLowerCase(),g=g.toLowerCase()),D=0;D<w;)c[D]=f.charCodeAt(D),a[D]=++D;for(O=0;O<S;)for(M=g.charCodeAt(O),R=A=O++,D=-1;++D<w;)k=M===c[D]?A:A+1,A=a[D],a[D]=R=A>R?k>R?R+1:k:k>A?A+1:k;return R}s.exports=p}),E2e=K((i,s)=>{var a=S2e();function c(){var p,f,g,y,w,S=0,M=arguments[0],R=arguments[1],A=R.length,k=arguments[2];k&&(y=k.threshold,w=k.ignoreCase),y===void 0&&(y=0);for(var D=0;D<A;++D)w?f=a(M,R[D],!0):f=a(M,R[D]),f>M.length?p=1-f/R[D].length:p=1-f/M.length,p>S&&(S=p,g=R[D]);return S>=y?g:null}s.exports=c});function C2e(i,s,a="Did you mean ",c="?"){let p=(0,_ue.default)(i,s,{threshold:.7});return p?a+JSON.stringify(p)+c:""}var _ue,P2e=C(()=>{_ue=Q(E2e())});function wue(i,s){return i.length<=s?i:i.substr(0,s-3)+"..."}var k2e=C(()=>{}),xue,RV,Sue=C(()=>{k2e(),xue=i=>typeof i=="string"?'string("'.concat(wue(i,10),'")'):typeof i=="number"?"number(".concat(wue(String(i),10),")"):i===null?"null":i===void 0?"undefined":typeof i=="boolean"?String(i):Array.isArray(i)?"array":typeof i=="object"?"object":"unknown",RV=xue}),Eue,Cue,OV,Pue=C(()=>{Ne(),iv(),Cue=se(a7)(Eue||(Eue=G([`
  display: flex;
  height: fit-content;
  backdrop-filter: blur(14px);
  border-radius: 2px;
`]))),OV=Cue}),ob,kue,Tue,Mue,sb,eE=C(()=>{Ne(),vr(),ob=Q(Re()),xS(),gA(),FJ(),Pue(),Tue=se.button(kue||(kue=G([`
  `,`;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  width: 32px;
  height: 32px;
  outline: none;

  color: #a8a8a9;

  background: rgba(40, 43, 47, 0.8);
  backdrop-filter: blur(14px);
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 2px;

  svg {
    display: block;
  }

  &:hover {
    background: rgba(59, 63, 69, 0.8);
  }

  &:active {
    background: rgba(82, 88, 96, 0.8);
  }

  &.selected {
    color: rgba(255, 255, 255, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.7);
  }

  // Don't blur if in a button group, because it already blurs. We need to blur
  // on the group-level, otherwise we get seams.
  `,` > & {
    backdrop-filter: none;
    filter: none;
    border-radius: 0;

    &:first-child {
      border-top-left-radius: 2px;
      border-bottom-left-radius: 2px;
    }

    &:last-child {
      border-bottom-right-radius: 2px;
      border-top-right-radius: 2px;
    }
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr,OV),Mue=ob.default.forwardRef((i,s)=>{var a=i,{title:c}=a,p=U(a,["title"]);let[f,g]=jy({enabled:typeof c=="string"},()=>ob.default.createElement(RU,null,c));return ob.default.createElement(ob.default.Fragment,null,f,ob.default.createElement(Tue,j({ref:vA([g,s])},p))," ")}),sb=Mue}),Aue,Iue,Rue,Oue,Due,T2e=C(()=>{Aue=Q(Re()),eE(),Ne(),vr(),Rue=se(sb)(Iue||(Iue=G([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),hr),Oue=({config:i,testId:s})=>{var a;return Aue.default.createElement(Rue,{onClick:i.onClick,"data-testid":s,title:i.title,dangerouslySetInnerHTML:{__html:(a=i.svgSource)!=null?a:""}})},Due=Oue});function M2e({value:i,label:s,icon:a,onClick:c,isSelected:p}){return ab.default.createElement(ab.default.Fragment,null,ab.default.createElement(sb,{forwardedAs:i7,className:p?"selected":void 0,"aria-label":s,onClick:c,title:s},a))}var ab,Lue,Nue,A2e=C(()=>{ab=Q(Re()),iv(),eE(),Pue(),Lue=({value:i,onChange:s,options:a})=>ab.default.createElement(OV,null,a.map(({label:c,icon:p,value:f})=>ab.default.createElement(M2e,{key:f,value:f,isSelected:i===f,label:c,icon:p,onClick:()=>s(f)}))),Nue=Lue}),DV,Fue,Bue,Uue,Vue,I2e=C(()=>{DV=Q(Re()),Ne(),vr(),A2e(),Bue=se.div(Fue||(Fue=G([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),hr),Uue=({config:i})=>DV.default.createElement(Nue,{onChange:i.onChange,options:i.options.map(({label:s,value:a,svgSource:c})=>({label:s,value:a,icon:DV.default.createElement(Bue,{dangerouslySetInnerHTML:{__html:c}})})),value:i.value}),Vue=Uue}),tE,jue,zue,Hue,Gue,R2e=C(()=>{tE=Q(Re()),Ne(),vr(),eE(),qY(),uc(),zue=se.div(jue||(jue=G([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),hr),Hue=({config:i})=>{let s=(0,tE.useRef)(null),a=lc(()=>{let c=s.current.getBoundingClientRect();return{debugName:"ExtensionFlyoutMenu:"+i.label,constraints:{maxX:c.right,maxY:8,minX:c.left,minY:8},verticalGap:2}},()=>tE.default.createElement(aU,{items:i.items.map((c,p)=>({label:c.label,callback:()=>{var f;try{(f=c.onClick)==null||f.call(c)}catch(g){console.error(g)}}})),onRequestClose:()=>{a.close("clicked")}}));return tE.default.createElement(zue,null,a.node,tE.default.createElement(sb,{ref:s,onClick:c=>{a.open(c,s.current)}},i.label))},Gue=Hue});function O2e(i){return LV[i]}var nE,Wue,LV,$ue,Kue,D2e=C(()=>{P2e(),Sue(),nE=Q(Re()),T2e(),I2e(),R2e(),Wue=i=>nE.default.createElement(nE.default.Fragment,null,i.config.map((s,a)=>nE.default.createElement($ue,{config:s,key:a}))),LV={Icon:Due,Switch:Vue,Flyout:Gue},$ue=({config:i})=>{let s=O2e(i.type);if(!s)throw new Error("No tool with tool.type ".concat(RV(i.type)," exists. Did you mean ").concat(C2e(i.type,Object.keys(LV))));return nE.default.createElement(s,{config:i})},Kue=Wue}),que,kc,Xue,Yue,Zue,NV,Que,Jue,FV,ece=C(()=>{que=Mt,hn(),Fe(),kc=Q(Re()),Ne(),D2e(),Yue=se.div(Xue||(Xue=G([`
  height: 36px;
  /* pointer-events: none; */

  display: flex;
  gap: 0.5rem;
  justify-content: center;
`]))),NV=se.div(Zue||(Zue=G([`
  position: abolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),Que=({extension:i,toolbarId:s})=>{var a;let c=(0,kc.useMemo)(()=>new que.Atom([]),[]),p=(a=i.toolbars)==null?void 0:a[s];(0,kc.useLayoutEffect)(()=>{let g=p==null?void 0:p(c.set.bind(c),me().publicApi);if(typeof g=="function")return g},[i,s,p]);let f=Wn(c.prism);return kc.default.createElement(Kue,{config:f})},Jue=({toolbarId:i,showLeftDivider:s})=>{var a;let c=[],p=Wn(me().atomP.ephemeral.extensions.byId),f=!1;for(let[,g]of Object.entries(p))!g||!((a=g.toolbars)!=null&&a[i])||(c.push(kc.default.createElement(kc.default.Fragment,{key:"extensionToolbar-"+g.id},f?kc.default.createElement(NV,null):void 0,kc.default.createElement(Que,{extension:g,toolbarId:i}))),f=!0);return c.length===0?null:kc.default.createElement(Yue,{"data-testid":"theatre-extensionToolbar-".concat(i)},s?kc.default.createElement(NV,null):void 0,c)},FV=Jue}),rE,tce,nce,rce,SR,L2e=C(()=>{Ne(),rE=Q(Re()),eE(),nce=se(sb)(tce||(tce=G([`
  color: `,`;

  border-bottom: 1px solid
    `,`;
`])),({pinned:i})=>i?"rgba(255, 255, 255, 0.8)":"#A8A8A9",({pinned:i})=>i?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.08)"),rce=(0,rE.forwardRef)((i,s)=>{var a=i,{children:c,hint:p,pinned:f,icon:g,pinHintIcon:y,unpinHintIcon:w}=a,S=U(a,["children","hint","pinned","icon","pinHintIcon","unpinHintIcon"]);let[M,R]=(0,rE.useState)(!1),A=M||p;return rE.default.createElement(nce,z(j({},S),{pinned:f,ref:s,onMouseOver:()=>R(!0),onMouseOut:()=>R(!1)}),rE.default.createElement("div",{style:{pointerEvents:"none",width:"fit-content",height:"fit-content",inset:0}},A&&!f?y:A&&f?w:g),c)}),SR=rce});function N2e(i){return BV.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),BV.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.732 4.048l-.792-.792L7.2 8l4.74 4.744.792-.792L8.781 8l3.951-3.952zm-3.932 0l-.792-.792L3.268 8l4.74 4.744.792-.792L4.848 8 8.8 4.048z",fill:"currentColor"}))}var BV,UV,F2e=C(()=>{BV=Q(Re()),UV=N2e});function B2e(i){return VV.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),VV.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.694 3.765l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.951-3.951-3.951-3.952zm3.932 0l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.952-3.951-3.952-3.952z",fill:"currentColor"}))}var VV,jV,U2e=C(()=>{VV=Q(Re()),jV=B2e}),io,ice,oce,sce,zV,ace,Hp,lce,uce,cce,dce,hce,pce,fce,mce,vce,ER,gce,yce,HV,GV,bce,_ce,V2e=C(()=>{hn(),Fe(),io=Q(Re()),Ne(),oce=se.div(ice||(ice=G([`
  width: 138px;
  border-radius: 2px;
  background-color: rgba(42, 45, 50, 0.9);
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.25), 0px 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  pointer-events: auto;
  // makes the edges of the item highlights match the rounded corners
  overflow: hidden;

  @supports not (backdrop-filter: blur()) {
    background-color: rgba(42, 45, 50, 0.98);
  }

  color: rgba(255, 255, 255, 0.9);

  & a {
    // Fix colors of links to not be default
    color: inherit;
  }
`]))),zV=se.div(sce||(sce=G([`
  position: relative;
  padding: 0px 12px;
  font-weight: 400;
  font-size: 11px;
  height: 32px;
  text-decoration: none;
  user-select: none;
  display: flex;
  flex-direction: row;
  align-items: center;
  cursor: default;
`]))),Hp=se(zV)(ace||(ace=G([`
  &:before {
    position: absolute;
    display: block;
    content: ' ';
    inset: 3px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.1);
    opacity: 0;
  }

  &.secondary {
    color: rgba(255, 255, 255, 0.5);
  }

  &:hover {
    /* background-color: #398995; */
    color: white !important;
    &:before {
      opacity: 1;
    }
  }
`]))),uce=se(zV)(lce||(lce=G([`
  height: auto;
  min-height: 32px;
  padding-top: 12px;
  padding-bottom: 10px;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  gap: 8px;
  color: rgba(255, 255, 255, 0.5);
`]))),dce=se.div(cce||(cce=G([`
  font-weight: 600;
`]))),pce=se.div(hce||(hce=G([`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`]))),mce=se.div(fce||(fce=G([`
  margin-left: 2px;
`]))),ER=se.div(vce||(vce=G([`
  height: 1px;
  margin: 0 2px;
  background: rgba(255, 255, 255, 0.02);
`]))),yce=se.div(gce||(gce=G([`
  position: absolute;
  width: 8px;
  height: 8px;
  background: #40aaa4;
  right: 14px;
  top: 12px;
  border-radius: 50%;
`]))),HV="0.7.0",GV=HV.match(/^[^\-]+/)[0],bce=io.default.forwardRef((i,s)=>{let a=Wn(me().atomP.ahistoric.updateChecker.result.hasUpdates);return io.default.createElement(oce,{ref:s},io.default.createElement(Hp,{as:"a",href:"https://www.theatrejs.com/docs/latest",className:"",target:"_blank"},"Docs"),io.default.createElement(Hp,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases",className:"",target:"_blank"},"Changelog"),io.default.createElement(ER,null),io.default.createElement(Hp,{as:"a",href:"https://github.com/theatre-js/theatre",className:"",target:"_blank"},"Github"),io.default.createElement(Hp,{as:"a",href:"https://twitter.com/theatre_js",className:"",target:"_blank"},"Twitter"),io.default.createElement(Hp,{className:"",as:"a",href:"https://discord.gg/bm9f8F9Y9N",target:"_blank"},"Discord"),io.default.createElement(ER,null),io.default.createElement(uce,null,io.default.createElement(dce,null,"Version"),io.default.createElement(pce,null,io.default.createElement(mce,null,HV," ",a===!0?"(outdated)":a===!1?"(latest)":""))),a===!0&&io.default.createElement(io.default.Fragment,null,io.default.createElement(ER,null),io.default.createElement(Hp,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases".concat(encodeURIComponent(GV)),className:"",target:"_blank"},"Update",io.default.createElement(yce,null)),io.default.createElement(Hp,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases#".concat(encodeURIComponent(GV)),className:"",target:"_blank"},"What's new?")))}),_ce=bce}),Ur,wce,xce,Sce,Ece,Cce,Pce,WV,kce,$V,Tce,KV,Mce,Ace,j2e=C(()=>{hn(),Fe(),Ur=Q(Re()),Ne(),xS(),x2e(),rI(),wce=Mt,ece(),L2e(),$x(),F2e(),U2e(),eE(),uc(),V2e(),IS(),Sce=se.div(xce||(xce=G([`
  height: 36px;
  pointer-events: none;

  display: flex;
  justify-content: space-between;
  padding: 12px;
`]))),Cce=se.div(Ece||(Ece=G([`
  color: white;
  width: 14px;
  height: 14px;
  background: #d00;
  border-radius: 4px;
  text-align: center;
  line-height: 14px;
  font-weight: 600;
  font-size: 8px;
  position: relative;
  left: -6px;
  top: -11px;
  margin-right: -14px;
  box-shadow: 0 4px 6px -4px #00000059;
`]))),WV=se.div(Pce||(Pce=G([`
  display: flex;
  gap: 8px;
`]))),$V=se.div(kce||(kce=G([`
  position: absolute;
  background: `,`;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  right: -2px;
  top: -2px;
`])),({type:i})=>i==="info"?"#40aaa4":"#f59e0b"),se.div(Tce||(Tce=G([`
  position: absolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),KV=!1,Mce=()=>{var i,s,a;let c=Un(()=>{let O=(0,wce.val)(me().atomP.ephemeral.coreByProject);return Object.entries(O).map(([F,V])=>({projectId:F,state:V})).filter(({state:F})=>F.loadingState.type==="browserStateIsNotBasedOnDiskState")},[]),[p,f]=jy({enabled:c.length>0,enterDelay:c.length>0?0:200},()=>c.length>0?Ur.default.createElement(bue,null,c.length===1?'There is a state conflict in project "'.concat(c[0].projectId,'". Select the project in the outline below in order to fix it.'):"There are ".concat(c.length," projects that have state conflicts. They are highlighted in the outline below. ")):Ur.default.createElement(zy,null,Ur.default.createElement(Ur.default.Fragment,null,"Outline"))),g=(i=Wn(me().atomP.ahistoric.pinOutline))!=null?i:!0,y=(s=Wn(me().atomP.ahistoric.pinDetails))!=null?s:!0,w=Wn(me().atomP.ahistoric.updateChecker.result.hasUpdates)===!0,S=lc(()=>{let O=M.current.getBoundingClientRect();return{debugName:"More Menu",constraints:{maxX:O.right,maxY:8,minX:O.left-140,minY:8},verticalGap:2}},()=>Ur.default.createElement(_ce,null)),M=(0,Ur.useRef)(null),R=(0,Ur.useMemo)(()=>(window.__IS_VISUAL_REGRESSION_TESTING&&(KV||(KV=!0,console.warn("Visual regression testing enabled, so we're showing the updates badge unconditionally"))),w||window.__IS_VISUAL_REGRESSION_TESTING?!0:w),[w]),{hasNotifications:A}=LU(),[k,D]=oee();return Ur.default.createElement(Sce,null,Ur.default.createElement(WV,null,p,Ur.default.createElement(SR,{ref:f,"data-testid":"OutlinePanel-TriggerButton",onClick:()=>{me().transaction(({stateEditors:O,drafts:F})=>{var V;O.studio.ahistoric.setPinOutline(!((V=F.ahistoric.pinOutline)==null||V))})},icon:Ur.default.createElement(eB,null),pinHintIcon:Ur.default.createElement(jV,null),unpinHintIcon:Ur.default.createElement(UV,null),pinned:g}),c.length>0?Ur.default.createElement(Cce,null,c.length):null,Ur.default.createElement(FV,{showLeftDivider:!0,toolbarId:"global"})),Ur.default.createElement(WV,null,k,Ur.default.createElement(SR,{ref:D,onClick:()=>{me().transaction(({stateEditors:O,drafts:F})=>{var V;O.studio.ahistoric.setPinNotifications(!((V=F.ahistoric.pinNotifications)!=null&&V))})},icon:Ur.default.createElement(dA,null),pinHintIcon:Ur.default.createElement(dA,null),unpinHintIcon:Ur.default.createElement(dA,null),pinned:(a=Wn(me().atomP.ahistoric.pinNotifications))!=null?a:!1},A&&Ur.default.createElement($V,{type:"warning"})),S.node,Ur.default.createElement(sb,{ref:M,onClick:O=>{S.toggle(O,M.current)}},Ur.default.createElement(E7,null),R&&Ur.default.createElement($V,{type:"info"})),Ur.default.createElement(SR,{ref:f,onClick:()=>{me().transaction(({stateEditors:O,drafts:F})=>{var V;O.studio.ahistoric.setPinDetails(!((V=F.ahistoric.pinDetails)==null||V))})},icon:Ur.default.createElement(S7,null),pinHintIcon:Ur.default.createElement(UV,null),unpinHintIcon:Ur.default.createElement(jV,null),pinned:y})))},Ace=Mce}),Ice,iE,Rce,oE,Oce,Dce,Lce,Nce,Fce=C(()=>{Ice=Mt,hn(),iE=Q(Re()),Rce=Q(Xl()),oE=new Ice.Atom({set:{},byId:{}}),Oce=1,Dce=()=>{let i=Oce++;function s(c,p,f){oE.reduce(g=>({byId:z(j({},g.byId),{[i]:{comp:c,props:p,portalNode:f}}),set:z(j({},g.set),{[i]:!0})}))}function a(){oE.reduce(c=>{let p=j({},c.set),f=j({},c.byId);return delete p[i],{byId:f,set:p}})}return{mountOrRender:s,unmount:a}},Lce=()=>{let i=Object.keys(Wn(oE.pointer.set));return iE.default.createElement(iE.default.Fragment,null,i.map(s=>iE.default.createElement(Nce,{key:"id-"+s,id:s})))},Nce=({id:i})=>{let{comp:s,portalNode:a,props:c}=Wn(oE.pointer.byId[i]);return(0,Rce.createPortal)(iE.default.createElement(s,j({},c)),a)}});function z2e(i){let s=me(),[a,c]=sr(void 0),p=Ise();p.configureLogging({min:128,dev:XV,internal:XV});let f=p.getLogger().named("Theatre.js UIRoot");c2e();let g=Wn(s.atomP.ahistoric.visibilityState);return(0,Go.useEffect)(()=>(g==="everythingIsHidden"&&console.warn("Theatre.js Studio is hidden. Use the keyboard shortcut 'alt + \\' to restore the studio, or call studio.ui.restore()."),()=>{}),[g]),Un(()=>{let y=(0,qV.val)(s.atomP.ahistoric.visibilityState);return(0,qV.val)(s.atomP.ephemeral.initialised)?Go.default.createElement(jK,{logger:f},Go.default.createElement(HQ,null,Go.default.createElement(TCe,null,Go.default.createElement(Hce,null),Go.default.createElement(Sy.Provider,{value:c},Go.default.createElement(ZF,{target:window.__IS_VISUAL_REGRESSION_TESTING===!0?void 0:i.containerShadow},Go.default.createElement(Go.default.Fragment,null,Go.default.createElement(Uce,null),Go.default.createElement(jce,{className:y==="everythingIsHidden"?"invisible":""},Go.default.createElement(YF,{ref:a}),Go.default.createElement(Ace,null),Go.default.createElement(vue,null),Go.default.createElement(see,null)))))))):null},[s,a,c])}var qV,Go,Bce,Uce,Vce,jce,zce,XV,Hce,H2e=C(()=>{Fe(),hn(),qV=Mt,Go=Q(Re()),Ne(),w2e(),j2e(),mr(),iv(),TV(),Ca(),GQ(),xB(),Fce(),vr(),cR(),xp(),IS(),Uce=typeof window<"u"?sl(Bce||(Bce=G([`
  :host {
    contain: strict;
  }
`]))):{},jce=se(VK)(Vce||(Vce=G([`
  z-index: 50;
  position: fixed;
  inset: 0;

  &.invisible {
    pointer-events: none !important;
    opacity: 0;
    transform: translateX(1000000px);
  }
`]))),XV=/Playground.+Theatre\.js/.test((zce=typeof document<"u"?document==null?void 0:document.title:null)!=null?zce:""),Hce=()=>Go.default.createElement(Lce,null)}),G2e=K(i=>{var s=Xl();i.createRoot=s.createRoot,i.hydrateRoot=s.hydrateRoot}),Gce={};te(Gce,{default:()=>Kce});var Wce,$ce,Kce,W2e=C(()=>{H2e(),Wce=Q(Re()),$ce=Q(G2e()),Fce(),vr(),ece(),Kce=class{constructor(){Pe(this,"containerEl",document.createElement("div")),Pe(this,"_renderTimeout"),Pe(this,"_documentBodyUIIsRenderedIn"),Pe(this,"containerShadow"),this.containerEl.id="theatrejs-studio-root",this.containerEl.style.cssText=`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      z-index: 100;
    `;let i=()=>{if(window.__IS_VISUAL_REGRESSION_TESTING===!0){let s=document.createElement("div");return s.id="theatrejs-faux-shadow-root",document.body.appendChild(s),s}else return this.containerEl.attachShadow({mode:"open"})};this.containerShadow=i()}render(){let i=()=>{if(!document.body){this._renderTimeout=setTimeout(i,5);return}this._renderTimeout=void 0,this._documentBodyUIIsRenderedIn=document.body,this._documentBodyUIIsRenderedIn.appendChild(this.containerEl),$ce.default.createRoot(this.containerShadow).render(Wce.default.createElement(z2e,{containerShadow:this.containerShadow}))};this._renderTimeout=setTimeout(i,10)}renderToolset(i,s){let a=Dce();return a.mountOrRender(YEe(FV),{toolbarId:i},s),a.unmount}}}),$2e=K(i=>{i.compare=p,i.reduce=f;var s,a,c;i.REMOVE=s=-1,i.ADD=a=1,i.EQUAL=c=0;function p(M,R){var A=M.length,k=R.length,D=g(M,R),O=D<A&&D<k?y(M,R):0,F=O+D-1;A-=F,k-=F;for(var V=S(A,k),W=A-1;W>=0;--W)for(var X=k-1;X>=0;--X)V[X][W]=w(V,M,R,D,W,X);return{prefix:D,matrix:V,suffix:O}}function f(M,R,A){var k,D,O,F,V=A.matrix,W=A.prefix;for(k=0;k<W;++k)R=M(R,c,k,k);for(O=k,W=V.length,k=0,D=0;k<W;)switch(F=V[k][D].type,R=M(R,F,k+O,D+O),F){case c:++k,++D;break;case s:++D;break;case a:++k;break}for(k+=O,D+=O,W=A.suffix,O=0;O<W;++O)R=M(R,c,k+O,D+O);return R}function g(M,R){for(var A=0,k=Math.min(M.length,R.length);A<k&&M[A]===R[A];)++A;return A}function y(M,R){for(var A=M.length-1,k=R.length-1,D=Math.min(A,k),O=0;O<D&&M[A-O]===R[k-O];)++O;return O}function w(M,R,A,k,D,O){return R[D+k]===A[O+k]?{value:M[O+1][D+1].value,type:c}:M[O][D+1].value<M[O+1][D].value?{value:M[O][D+1].value+1,type:s}:{value:M[O+1][D].value+1,type:a}}function S(M,R){var A=[],k,D,O;for(O=A[R]=[],D=0;D<M;++D)O[D]={value:M-D,type:s};for(k=0;k<R;++k)A[k]=[],A[k][M]={value:R-k,type:a};return A[R][M]={value:0,type:c},A}}),qce=K(i=>{i.cons=s,i.tail=a,i.map=c;function s(p,f){var g=f.length,y=new Array(g+1);y[0]=p;for(var w=0;w<g;++w)y[w+1]=f[w];return y}function a(p){for(var f=p.length-1,g=new Array(f),y=0;y<f;++y)g[y]=p[y+1];return g}function c(p,f){for(var g=new Array(f.length),y=0;y<f.length;++y)g[y]=p(f[y]);return g}}),K2e=K((i,s)=>{s.exports=g;var a=/\/|~1|~0/g,c="/",p="~",f="~1";function g(y,w){var S,M,R,A;for(S=y.charAt(0)===c?1:0,M="",a.lastIndex=S;R=a.exec(y);)if(A=R[0],M+=y.slice(S,a.lastIndex-A.length),S=a.lastIndex,A===c){if(w(M)===!1)return y;M=""}else M+=A===f?c:p;return M+=y.slice(S),w(M),y}}),YV=K(i=>{var s=K2e();i.find=M,i.join=A,i.absolute=R,i.parse=k,i.contains=D,i.encodeSegment=F,i.decodeSegment=O,i.parseArrayIndex=X,i.isValidArrayIndex=W;var a="/",c=/\//g,p="~1",f=/~1/g,g="~",y=/~/g,w="~0",S=/~0/g;function M(ne,ae,xe,fe){if(typeof ae=="string"){if(ae==="")return{target:ne,key:void 0};if(ae===a)return{target:ne,key:""};var ge=ne,Ie,Qe=fe!==void 0;return s(ae,function(le){if(ne==null)return ge=null,!1;Array.isArray(ne)?Ie=Qe?re(xe,X(le),ne,fe):le==="-"?le:X(le):Ie=le,ge=ne,ne=ne[Ie]}),ge===null?void 0:{target:ge,key:Ie}}}function R(ne){return ne[0]===a?ne:a+ne}function A(ne){return ne.join(a)}function k(ne){var ae=[];return s(ne,ae.push.bind(ae)),ae}function D(ne,ae){return ae.indexOf(ne)===0&&ae[ne.length]===a}function O(ne){return ne.replace(f,a).replace(S,g)}function F(ne){return ne.replace(y,w).replace(c,p)}var V=/^(0|[1-9]\d*)$/;function W(ne){return V.test(ne)}function X(ne){if(W(ne))return+ne;throw new SyntaxError("invalid array index "+ne)}function re(ne,ae,xe,fe){var ge=ae;if(ge<0)throw new Error("array index out of bounds "+ge);if(fe!==void 0&&typeof ne=="function"&&(ge=ne(ae,xe,fe),ge<0))throw new Error("could not find patch context "+fe);return ge}}),Xce=K((i,s)=>{s.exports=a;function a(f){return f==null||typeof f!="object"?f:Array.isArray(f)?c(f):p(f)}function c(f){for(var g=f.length,y=new Array(g),w=0;w<g;++w)y[w]=a(f[w]);return y}function p(f){for(var g=Object.keys(f),y={},w,S=0,M=g.length;S<M;++S)w=g[S],y[w]=a(f[w]);return y}}),q2e=K((i,s)=>{s.exports=a;function a(f,g){return f===g?!0:Array.isArray(f)&&Array.isArray(g)?c(f,g):typeof f=="object"&&typeof g=="object"?p(f,g):!1}function c(f,g){if(f.length!==g.length)return!1;for(var y=0;y<f.length;++y)if(!a(f[y],g[y]))return!1;return!0}function p(f,g){if(f===null&&g!==null||f!==null&&g===null)return!1;var y=Object.keys(f),w=Object.keys(g);if(y.length!==w.length)return!1;for(var S=0,M;S<y.length;++S)if(M=y[S],!(M in g&&a(f[M],g[M])))return!1;return!0}}),X2e=K((i,s)=>{var a=YV();s.exports=function(M,R){var A=a.parse(M.path),k=a.parse(R.path),D=w(A,k),O=f(A,k,D.length),F=S(M),V=S(R);return D.length===0&&!O?[V,F]:O?p(F,A,V,k):c(F,A,V)};function c(M,R,A,k){if(M.path===A.path)throw new TypeError("cannot commute "+M.op+","+A.op+" with identical object paths");return[A,M]}function p(M,R,A,k){return R.length===k.length?g(M,R,A,k):(R.length>k.length?(R=y(A,k,M,R,-1),M.path=a.absolute(a.join(R))):(k=y(M,R,A,k,1),A.path=a.absolute(a.join(k))),[A,M])}function f(M,R,A){return a.isValidArrayIndex(M[A])&&a.isValidArrayIndex(R[A])}function g(M,R,A,k){var D=R.length-1,O=+R[D],F=+k[D],V;return O<F?M.op==="add"||M.op==="copy"?(V=k.slice(),V[D]=Math.max(0,F-1),A.path=a.absolute(a.join(V))):M.op==="remove"&&(V=k.slice(),V[D]=F+1,A.path=a.absolute(a.join(V))):A.op==="add"||A.op==="copy"?(V=R.slice(),V[D]=O+1,M.path=a.absolute(a.join(V))):O>F&&A.op==="remove"&&(V=R.slice(),V[D]=Math.max(0,O-1),M.path=a.absolute(a.join(V))),[A,M]}function y(M,R,A,k,D){var O=R.length-1,F=+R[O],V=+k[O],W=k.slice();return F>V||(M.op==="add"||M.op==="copy"?W[O]=Math.max(0,V-D):M.op==="remove"&&(W[O]=Math.max(0,V+D))),W}function w(M,R){var A=M.length,k=R.length;if(A===0||k===0||A<2&&k<2)return[];for(var D=A===k?A-1:Math.min(A,k),O=0;O<D&&M[O]===R[O];)++O;return M.slice(0,O)}function S(M){return M.op==="remove"?{op:M.op,path:M.path}:M.op==="copy"||M.op==="move"?{op:M.op,path:M.path,from:M.from}:{op:M.op,path:M.path,value:M.value}}}),Yce=K((i,s)=>{s.exports=a;function a(c){Error.call(this),this.name=this.constructor.name,this.message=c,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a}),ZV=K((i,s)=>{s.exports=a;function a(c){Error.call(this),this.name=this.constructor.name,this.message=c,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a}),Zce=K((i,s)=>{s.exports=a;function a(c){Error.call(this),this.name=this.constructor.name,this.message=c,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a}),Qce=K(i=>{var s=YV(),a=Xce(),c=q2e(),p=X2e(),f=qce(),g=Yce(),y=ZV(),w=Zce(),S=s.find,M=s.parseArrayIndex;i.test={apply:R,inverse:A,commute:k},i.add={apply:D,inverse:F,commute:V},i.remove={apply:ne,inverse:xe,commute:fe},i.replace={apply:W,inverse:X,commute:re},i.move={apply:ge,inverse:Ie,commute:Qe},i.copy={apply:le,inverse:Ae,commute:V};function R(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context),ue=wt.target,he,qe;if(Array.isArray(ue)?(he=M(wt.key),qe=ue[he]):qe=wt.key===void 0?wt.target:wt.target[wt.key],!c(qe,Te.value))throw new g("test failed "+JSON.stringify(Te));return ke}function A(ke,Te){return ke.push(Te),1}function k(ke,Te){if(ke.path===Te.path&&Te.op==="remove")throw new TypeError("Can't commute test,remove -> remove,test for same path");return Te.op==="test"||Te.op==="replace"?[Te,ke]:p(ke,Te)}function D(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context);if(Y(wt))throw new y("path does not exist "+Te.path);if(Te.value===void 0)throw new y("missing value");var ue=a(Te.value);return wt.key===void 0?ue:(O(wt,ue),ke)}function O(ke,Te){var je=ke.target;if(Array.isArray(je))if(ke.key==="-")je.push(Te);else{if(ke.key>je.length)throw new y("target of add outside of array bounds");je.splice(ke.key,0,Te)}else if(Tt(je))je[ke.key]=Te;else throw new y("target of add must be an object or array "+ke.key)}function F(ke,Te){var je=Te.context;return je!==void 0&&(je={before:je.before,after:f.cons(Te.value,je.after)}),ke.push({op:"test",path:Te.path,value:Te.value,context:je}),ke.push({op:"remove",path:Te.path,context:je}),1}function V(ke,Te){if(ke.path===Te.path&&Te.op==="remove")throw new TypeError("Can't commute add,remove -> remove,add for same path");return p(ke,Te)}function W(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context);if(Y(wt)||Ue(wt))throw new y("path does not exist "+Te.path);if(Te.value===void 0)throw new y("missing value");var ue=a(Te.value);if(wt.key===void 0)return ue;var he=wt.target;return Array.isArray(he)?he[M(wt.key)]=ue:he[wt.key]=ue,ke}function X(ke,Te,je,wt){var ue=wt[je-1];if(ue===void 0||ue.op!=="test"||ue.path!==Te.path)throw new w("cannot invert replace w/o test");var he=ue.context;return he!==void 0&&(he={before:he.before,after:f.cons(ue.value,f.tail(he.after))}),ke.push({op:"test",path:ue.path,value:Te.value}),ke.push({op:"replace",path:ue.path,value:ue.value}),2}function re(ke,Te){if(ke.path===Te.path&&Te.op==="remove")throw new TypeError("Can't commute replace,remove -> remove,replace for same path");return Te.op==="test"||Te.op==="replace"?[Te,ke]:p(ke,Te)}function ne(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context);if(Y(wt)||wt.target[wt.key]===void 0)throw new y("path does not exist "+Te.path);return ae(wt),ke}function ae(ke){var Te=ke.target,je;if(Array.isArray(Te))return je=Te.splice(M(ke.key),1),je[0];if(Tt(Te))return je=Te[ke.key],delete Te[ke.key],je;throw new y("target of remove must be an object or array")}function xe(ke,Te,je,wt){var ue=wt[je-1];if(ue===void 0||ue.op!=="test"||ue.path!==Te.path)throw new w("cannot invert remove w/o test");var he=ue.context;return he!==void 0&&(he={before:he.before,after:f.tail(he.after)}),ke.push({op:"add",path:ue.path,value:ue.value,context:he}),2}function fe(ke,Te){return ke.path===Te.path&&Te.op==="remove"?[Te,ke]:p(ke,Te)}function ge(ke,Te,je){if(s.contains(Te.path,Te.from))throw new y("move.from cannot be ancestor of move.path");var wt=S(ke,Te.path,je.findContext,Te.context),ue=S(ke,Te.from,je.findContext,Te.fromContext);return O(wt,ae(ue)),ke}function Ie(ke,Te){return ke.push({op:"move",path:Te.from,context:Te.fromContext,from:Te.path,fromContext:Te.context}),1}function Qe(ke,Te){if(ke.path===Te.path&&Te.op==="remove")throw new TypeError("Can't commute move,remove -> move,replace for same path");return p(ke,Te)}function le(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context),ue=S(ke,Te.from,je.findContext,Te.fromContext);if(Y(ue)||Ue(ue))throw new y("copy.from must exist");var he=ue.target,qe;return Array.isArray(he)?qe=he[M(ue.key)]:qe=he[ue.key],O(wt,a(qe)),ke}function Ae(ke,Te){throw new w("cannot invert "+Te.op)}function Y(ke){return ke===void 0||ke.target==null&&ke.key!==void 0}function Ue(ke){return ke.key!==void 0&&ke.target[ke.key]===void 0}function Tt(ke){return ke!==null&&typeof ke=="object"}}),Y2e=K(i=>{var s=Qce(),a=Xce(),c=ZV();i.apply=f,i.applyInPlace=g,i.clone=a,i.isValidObject=w,i.defaultHash=y;var p={};function f(M,R,A){return g(M,a(R),A)}function g(M,R,A){if(A||(A=p),!Array.isArray(M))return R;for(var k,D,O=0;O<M.length;++O){if(D=M[O],k=s[D.op],k===void 0)throw new c("invalid op "+JSON.stringify(D));R=k.apply(R,D,A)}return R}function y(M){return w(M)||S(M)?JSON.stringify(M):M}function w(M){return M!==null&&Object.prototype.toString.call(M)==="[object Object]"}function S(M){return Object.prototype.toString.call(M)==="[object Array]"}}),Z2e=K((i,s)=>{var a=Qce();s.exports=function(p){var f=[],g,y;for(g=p.length-1;g>=0;g-=y)y=c(f,p[g],g,p);return f};function c(p,f,g,y){var w=a[f.op];return w!==void 0&&typeof w.inverse=="function"?w.inverse(p,f,g,y):1}}),Q2e=K(i=>{var s=$2e(),a=qce(),c=Y2e(),p=Z2e(),f=YV(),g=f.encodeSegment;i.diff=S,i.patch=c.apply,i.patchInPlace=c.applyInPlace,i.inverse=p,i.clone=c.clone,i.InvalidPatchOperationError=ZV(),i.TestFailedError=Yce(),i.PatchNotInvertibleError=Zce();var y=c.isValidObject,w=c.defaultHash;function S(X,re,ne){return R(X,re,"",M(ne,[])).patch}function M(X,re){return typeof X=="object"?{patch:re,hash:F(W,X.hash,w),makeContext:F(W,X.makeContext,V),invertible:X.invertible!==!1}:{patch:re,hash:F(W,X,w),makeContext:V,invertible:!0}}function R(X,re,ne,ae){return Array.isArray(X)&&Array.isArray(re)?k(X,re,ne,ae):y(X)&&y(re)?A(X,re,ne,ae):O(X,re,ne,ae)}function A(X,re,ne,ae){var xe=Object.keys(re),fe=ae.patch,ge,Ie;for(ge=xe.length-1;ge>=0;--ge){Ie=xe[ge];var Qe=ne+"/"+g(Ie);X[Ie]!==void 0?R(X[Ie],re[Ie],Qe,ae):fe.push({op:"add",path:Qe,value:re[Ie]})}for(xe=Object.keys(X),ge=xe.length-1;ge>=0;--ge)if(Ie=xe[ge],re[Ie]===void 0){var le=ne+"/"+g(Ie);ae.invertible&&fe.push({op:"test",path:le,value:X[Ie]}),fe.push({op:"remove",path:le})}return ae}function k(X,re,ne,ae){var xe=a.map(ae.hash,X),fe=a.map(ae.hash,re),ge=s.compare(xe,fe);return D(X,re,ne,ae,ge)}function D(X,re,ne,ae,xe){var fe=0;return s.reduce(function(ge,Ie,Qe,le){var Ae,Y,Ue=ge.patch,Tt=ne+"/"+(le+fe);return Ie===s.REMOVE?(Ae=Ue[Ue.length-1],Y=ge.makeContext(le,X),ge.invertible&&Ue.push({op:"test",path:Tt,value:X[le],context:Y}),Ae!==void 0&&Ae.op==="add"&&Ae.path===Tt?(Ae.op="replace",Ae.context=Y):Ue.push({op:"remove",path:Tt,context:Y}),fe-=1):Ie===s.ADD?(Ue.push({op:"add",path:Tt,value:re[Qe],context:ge.makeContext(le,X)}),fe+=1):R(X[le],re[Qe],Tt,ge),ge},ae,xe)}function O(X,re,ne,ae){return X!==re&&(ae.invertible&&ae.patch.push({op:"test",path:ne,value:X}),ae.patch.push({op:"replace",path:ne,value:re})),ae}function F(X,re,ne){return X(re)?re:ne}function V(){}function W(X){return typeof X=="function"}}),Bv=K((i,s)=>{function a(c,p){for(var f=0,g=p.length-1;f<g;f++){if(!c[p[f]])return null;c=c[p[f]]}return c}s.exports=a}),Gp=K((i,s)=>{function a(p){return p==="~0"?"~":"/"}function c(p){var f=p.split("/");if(p.indexOf("~")===-1)return f;for(var g=0,y=f.length;g<y;g++)f[g].indexOf("~")!==-1&&(f[g]=f[g].replace(/~[01]/g,a));return f}s.exports=c}),J2e=K((i,s)=>{var a=Bv(),c=Gp();function p(f,g){var y=c(g),w=y[y.length-1],S=a(f,y);return S?S[w]:void 0}s.exports=p}),CR=K((i,s)=>{function a(c,p){if(c===p)return!0;if(!(c&&p)||typeof c!="object"||typeof p!="object"||c.length!==p.length)return!1;if(Array.isArray(c)){if(!Array.isArray(p))return!1;for(var f=0,g=c.length;f<g;f++)if(!a(c[f],p[f]))return!1;return!0}var y=Object.keys(c);if(y.length!==Object.keys(p).length)return!1;for(var w=0,S=y.length;w<S;w++){var M=y[w];if(!a(c[M],p[M]))return!1}return!0}s.exports=a}),PR=K((i,s)=>{function a(c,p){if(p==="-")return c.length;for(var f=0,g=p.length;f<g;f++){var y=p.charCodeAt(f);if(57<y||y<48)return 1/0}return+p}s.exports=a}),kR=K((i,s)=>{var a=CR(),c=Bv(),p=PR(),f=Gp();function g(y,w,S,M){if(typeof S>"u")return"[op:add] require value, but got undefined";var R=f(w),A=R[R.length-1],k=c(y,R);if(k===null)return"[op:add] path not found: "+w;if(Array.isArray(k)){var D=p(k,A);if(k.length<D)return"[op:add] invalid array index: "+w;M(y,R).splice(D,0,S)}else a(k[A],S)||(M(y,R)[A]=S)}s.exports=g}),Jce=K((i,s)=>{var a=Bv(),c=PR(),p=Gp();function f(g,y,w){var S=p(y),M=S[S.length-1],R=a(g,S);if(R===null)return"[op:remove] path not found: "+y;if(Array.isArray(R)){var A=c(R,M);if(R.length<=A)return"[op:remove] invalid array index: "+y;w(g,S).splice(A,1)}else delete w(g,S)[M]}s.exports=f}),ede=K((i,s)=>{var a=CR(),c=Bv(),p=PR(),f=Gp();function g(y,w,S,M){if(typeof S>"u")return"[op:replace] require value, but got undefined";var R=f(w),A=R[R.length-1],k=c(y,R);if(k===null)return"[op:replace] path not found: "+w;if(Array.isArray(k)){var D=p(k,A);if(k.length<=D)return"[op:replace] invalid array index: "+w;a(k[D],S)||M(y,R).splice(D,1,S)}else a(k[A],S)||(M(y,R)[A]=S)}s.exports=g}),tde=K((i,s)=>{var a=kR(),c=Bv(),p=PR(),f=Gp();function g(y,w,S,M){if(S!==w){var R=f(w),A=R[R.length-1],k=c(y,R);if(k===null)return"[op:move] path not found: "+w;var D=void 0;if(Array.isArray(k)){var O=p(k,A);if(k.length<=O)return"[op:move] invalid array index: "+S;D=k[O],M(y,R).splice(O,1)}else D=k[A],delete M(y,R)[A];return a(y,S,D,M)}}s.exports=g}),nde=K((i,s)=>{var a=Bv(),c=Gp(),p=kR();function f(g,y,w,S){var M=c(y),R=M[M.length-1],A=a(g,M);return A===null?"[op:copy] path not found: "+y:p(g,w,A[R],S)}s.exports=f}),rde=K((i,s)=>{var a=CR(),c=Bv(),p=Gp();function f(g,y,w){var S=p(y),M=S[S.length-1],R=c(g,S);if(R===null)return"[op:test] path not found: "+y;if(!a(R[M],w)){var A=JSON.stringify(R[M]),k=JSON.stringify(w);return"[op:test] not matched: "+A+" "+k}}s.exports=f}),QV=K((i,s)=>{function a(c){if(!c||typeof c!="object")return c;if(Array.isArray(c)){for(var p=c.length,f=new Array(p),g=0;g<p;g++)f[g]=c[g];return f}for(var y=Object.keys(c),w={},S=0,M=y.length;S<M;S++){var R=y[S];w[R]=c[R]}return w}s.exports=a}),eAe=K((i,s)=>{var a=J2e(),c=kR(),p=Jce(),f=ede(),g=tde(),y=nde(),w=rde(),S=CR(),M=QV(),R=Gp();function A(k,D){return{get:function(O){return a(k,O)},add:function(O,F){return c(k,O,F,D)},remove:function(O){return p(k,O,D)},replace:function(O,F){return f(k,O,F,D)},move:function(O,F){return g(k,O,F,D)},copy:function(O,F){return y(k,O,F,D)},test:function(O,F){return w(k,O,F)},deepEqual:S,shallowCopy:M,toKeys:R}}s.exports=A}),tAe=K((i,s)=>{function a(c,p,f,g){return g.error=f,g.partial?p[""]:c}s.exports=a}),nAe=K((i,s)=>{function a(c){return!!c}s.exports=a}),rAe=K((i,s)=>{function a(c){if(c)throw new TypeError(c)}s.exports=a}),iAe=K((i,s)=>{var a=QV();function c(p,f){for(var g=0,y=f.length-1;g<y;g++)p=p[f[g]]=a(p[f[g]]);return p}s.exports=c}),oAe=K((i,s)=>{var a=QV();function c(f,g,y){var w=f[g];return y.has(w)||(w=a(w),y.add(w)),w}function p(f,g,y){for(var w=0,S=g.length-1;w<S;w++)f=f[g[w]]=c(f,g[w],y);return f}s.exports=p}),sAe=K((i,s)=>{var a=eAe(),c=tAe(),p=nAe(),f=rAe(),g=iAe(),y=oAe(),w=kR(),S=Jce(),M=ede(),R=tde(),A=nde(),k=rde(),D=Set||function(){var F=[];return F.has=function(V){return this.indexOf(V)!==-1},F.add=function(V){this.push(V)},F};function O(F,V,W){if(V.length===0)return F;W=W||{};for(var X=W.strict?f:p,re=V.length===1?g:function(Ie){return function(Qe,le){return y(Qe,le,Ie)}}(new D),ne={"":F},ae,xe=0,fe=V.length;xe<fe;xe++){var ge=V[xe];switch(ge.op){case"add":if(X(w(ne,""+ge.path,ge.value,re)))return c(F,ne,ge,W);break;case"remove":if(X(S(ne,""+ge.path,re)))return c(F,ne,ge,W);break;case"replace":if(X(M(ne,""+ge.path,ge.value,re)))return c(F,ne,ge,W);break;case"move":if(X(R(ne,""+ge.from,""+ge.path,re)))return c(F,ne,ge,W);break;case"copy":if(X(A(ne,""+ge.from,""+ge.path,re)))return c(F,ne,ge,W);break;case"test":if(X(k(ne,""+ge.path,ge.value)))return c(F,ne,ge,W);break;default:if(W.custom&&W.custom[ge.op]){if(ae=ae||a(ne,re),X(W.custom[ge.op](ae,ge,xe,V)))return c(F,ne,ge,W)}else return X("[op:"+ge.op+"] unknown"),c(F,ne,ge,W);break}}return ne[""]}s.exports=O}),aAe=K((i,s)=>{s.exports=sAe()}),lAe=K((i,s)=>{(function(a,c){typeof i=="object"&&typeof s=="object"?s.exports=c():typeof i=="object"?i.blobCompare=c():a.blobCompare=c()})(window,function(){return function(a){var c={};function p(f){if(c[f])return c[f].exports;var g=c[f]={i:f,l:!1,exports:{}};return a[f].call(g.exports,g,g.exports,p),g.l=!0,g.exports}return p.m=a,p.c=c,p.d=function(f,g,y){p.o(f,g)||Object.defineProperty(f,g,{enumerable:!0,get:y})},p.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},p.t=function(f,g){if(1&g&&(f=p(f)),8&g||4&g&&typeof f=="object"&&f&&f.__esModule)return f;var y=Object.create(null);if(p.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:f}),2&g&&typeof f!="string")for(var w in f)p.d(y,w,(function(S){return f[S]}).bind(null,w));return y},p.n=function(f){var g=f&&f.__esModule?function(){return f.default}:function(){return f};return p.d(g,"a",g),g},p.o=function(f,g){return Object.prototype.hasOwnProperty.call(f,g)},p.p="",p(p.s=4)}([function(a,c,p){var f=function(M,R){if(Array.isArray(M))return M;if(Symbol.iterator in Object(M))return function(A,k){var D=[],O=!0,F=!1,V=void 0;try{for(var W,X=A[Symbol.iterator]();!(O=(W=X.next()).done)&&(D.push(W.value),!k||D.length!==k);O=!0);}catch(re){F=!0,V=re}finally{try{!O&&X.return&&X.return()}finally{if(F)throw V}}return D}(M,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")},g=function(){function M(R,A){for(var k=0;k<A.length;k++){var D=A[k];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(R,D.key,D)}}return function(R,A,k){return A&&M(R.prototype,A),k&&M(R,k),R}}();function y(M){if(Array.isArray(M)){for(var R=0,A=Array(M.length);R<M.length;R++)A[R]=M[R];return A}return Array.from(M)}var w=p(2),S=function(M){function R(A){(function(D,O){if(!(D instanceof O))throw new TypeError("Cannot call a class as a function")})(this,R);var k=function(D,O){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||typeof O!="object"&&typeof O!="function"?D:O}(this,(R.__proto__||Object.getPrototypeOf(R)).call(this));return k._messageId=1,k._messages=new Map,k._worker=A,k._worker.onmessage=k._onMessage.bind(k),k._id=Math.ceil(1e7*Math.random()),k}return function(A,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);A.prototype=Object.create(k&&k.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(A,k):A.__proto__=k)}(R,M),g(R,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return this._messages.size===0}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(A){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,D=this,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],F=arguments[3];return new Promise(function(V,W){var X=D._messageId++;D._messages.set(X,[V,W,F]),D._worker.postMessage([X,k,A],O||[])})}},{key:"postMessage",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,k=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],O=arguments[2];return new Promise(function(F,V){var W=k._messageId++;k._messages.set(W,[F,V,O]),k._worker.postMessage([W,A],D||[])})}},{key:"emit",value:function(A){for(var k=arguments.length,D=Array(k>1?k-1:0),O=1;O<k;O++)D[O-1]=arguments[O];this._worker.postMessage({eventName:A,args:D})}},{key:"_onMessage",value:function(A){var k;if(!Array.isArray(A.data)&&A.data.eventName)return(k=function W(X,re,ne){X===null&&(X=Function.prototype);var ae=Object.getOwnPropertyDescriptor(X,re);if(ae===void 0){var xe=Object.getPrototypeOf(X);return xe===null?void 0:W(xe,re,ne)}if("value"in ae)return ae.value;var fe=ae.get;return fe!==void 0?fe.call(ne):void 0}(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"emit",this)).call.apply(k,[this,A.data.eventName].concat(y(A.data.args)));var D,O=(D=A.data,Array.isArray(D)?D:Array.from(D)),F=O[0],V=O.slice(1);if(F===1)this._onEvent.apply(this,y(V));else{if(F!==0)throw new Error("Wrong message type '"+F+"'");this._onResult.apply(this,y(V))}}},{key:"_onResult",value:function(A,k,D){var O=this._messages.get(A),F=f(O,2),V=F[0],W=F[1];return this._messages.delete(A),k===1?V(D):W(D)}},{key:"_onEvent",value:function(A,k,D){var O=this._messages.get(A),F=f(O,3)[2];F&&F(k,D)}}]),R}(w);a.exports=S},function(a,c,p){a.exports=function(){return p(3)(`!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=r(1),c=0,l=1,s=0,y=1,p="main",b=function(e){return"object"===(void 0===e?"undefined":i(e))&&"function"==typeof e.then&&"function"==typeof e.catch};var v=function e(t,r){u(this,e),this.payload=t,this.transferable=r};e.exports=function(e){var t,r,i,h=(i=e,(r=p)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t),d=self.postMessage.bind(self),m=new(function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var r,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(r,[this,e].concat(i))}},{key:"operation",value:function(e,t){return h[e]=t,this}}]),t}(f)),g=function(e,t,r){var n=function(t){t&&t instanceof v?w(e,y,t.payload,t.transferable):w(e,y,t)},o=function(t){w(e,s,{message:t.message,stack:t.stack})};try{var i=_(e,t,r);b(i)?i.then(n).catch(o):n(i)}catch(e){o(e)}},_=function(e,t,r){var n=h[r||p];if(!n)throw new Error("Not found handler for this request");return n(t,O.bind(null,e))},w=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];d([c,e,t,r],n)},O=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");d([l,e,t,r])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?g.apply(void 0,a(t)):t&&t.eventName&&m.emitLocally.apply(m,[t.eventName].concat(a(t.args)))})),m},e.exports.TransferableResponse=v},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return n(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,a=void 0;try{for(var u,f=this.__listeners[e][Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var c=u.value;c.apply(void 0,r)}}catch(e){i=!0,a=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(e,t){var r=this,n=function n(){r.off(e,n),t.apply(void 0,arguments)};return this.on(e,n)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}();e.exports=o},function(e,t,r){"use strict";r.r(t);var n=r(0);r.n(n)()().operation("binary",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsBinaryString(a)})}(e,t)).operation("buffer",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsArrayBuffer(a)})}(e,t)).operation("compare",({buf1:e,buf2:t})=>(function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),n=new DataView(t);for(var o=e.byteLength;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0})(e,t))}]);`,null)}},function(a,c,p){var f=function(){function y(w,S){for(var M=0;M<S.length;M++){var R=S[M];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(w,R.key,R)}}return function(w,S,M){return S&&y(w.prototype,S),M&&y(w,M),w}}(),g=function(){function y(){(function(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")})(this,y),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return f(y,[{key:"emit",value:function(w){if(!this.__listeners[w])return this;for(var S=arguments.length,M=Array(S>1?S-1:0),R=1;R<S;R++)M[R-1]=arguments[R];var A=!0,k=!1,D=void 0;try{for(var O,F=this.__listeners[w][Symbol.iterator]();!(A=(O=F.next()).done);A=!0){var V=O.value;V.apply(void 0,M)}}catch(W){k=!0,D=W}finally{try{!A&&F.return&&F.return()}finally{if(k)throw D}}return this}},{key:"once",value:function(w,S){var M=this,R=function A(){M.off(w,A),S.apply(void 0,arguments)};return this.on(w,R)}},{key:"on",value:function(w,S){return this.__listeners[w]||(this.__listeners[w]=[]),this.__listeners[w].push(S),this}},{key:"off",value:function(w,S){return this.__listeners[w]=S?this.__listeners[w].filter(function(M){return M!==S}):[],this}}]),y}();a.exports=g},function(a,c,p){var f=window.URL||window.webkitURL;a.exports=function(g,y){try{try{var w;try{(w=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(g),w=w.getBlob()}catch{w=new Blob([g])}return new Worker(f.createObjectURL(w))}catch{return new Worker("data:application/javascript,"+encodeURIComponent(g))}}catch{if(!y)throw Error("Inline worker is not supported");return new Worker(y)}}},function(a,c,p){p.r(c);var f=p(0),g=p.n(f),y=p(1),w=p.n(y);p.d(c,"workersEnabled",function(){return S}),p.d(c,"default",function(){return M});let S=!!window.Worker;class M{static toBinaryStringWithWorker(A,k){return ye(this,null,function*(){let D=new g.a(new w.a),O=yield D.exec("binary",{blob:A,chunk:k});return D.terminate(),O})}static toBinaryStringWithoutWorker(A,k){return function(D,O){return new Promise((F,V)=>{let W=new FileReader,X=O?Math.min(O,D.size):D.size,re=D.slice(0,X);W.onload=()=>F(W.result),W.onerror=V,W.readAsBinaryString(re)})}(A,k)}static toBinaryString(A,k,D=!0){return D&&S?this.toBinaryStringWithWorker(A,k):this.toBinaryStringWithoutWorker(A,k)}static toArrayBufferWithWorker(A,k){return ye(this,null,function*(){let D=new g.a(new w.a),O=yield D.exec("buffer",{blob:A,chunk:k});return D.terminate(),O})}static toArrayBufferWithoutWorker(A,k){return function(D,O){return new Promise((F,V)=>{let W=new FileReader,X=O?Math.min(O,D.size):D.size,re=D.slice(0,X);W.onload=()=>F(W.result),W.onerror=V,W.readAsArrayBuffer(re)})}(A,k)}static toArrayBuffer(A,k,D=!0){return D&&S?this.toArrayBufferWithWorker(A,k):this.toArrayBufferWithoutWorker(A,k)}static compareBuffersWithWorker(A,k){return ye(this,null,function*(){if(A===k)return!0;let D=new g.a(new w.a),O=yield D.exec("compare",{buf1:A,buf2:k},[A,k]);return D.terminate(),O})}static compareBuffersWithoutWorker(A,k){return function(D,O){if(D===O)return!0;if(D.byteLength!==O.byteLength)return!1;let F=new DataView(D),V=new DataView(O);for(var W=D.byteLength;W--;)if(F.getUint8(W)!==V.getUint8(W))return!1;return!0}(A,k)}static compareBuffers(A,k,D=!0){return D&&S?this.compareBuffersWithWorker(A,k):this.compareBuffersWithoutWorker(A,k)}static sizeEqual(A,k){return A.size===k.size}static typeEqual(A,k){return A.type===k.type}static magicNumbersEqual(A,k,D=!0){return ye(this,null,function*(){if(A===k)return!0;let O=[24,16,14,12,8,6,4],[F,V]=yield Promise.all([this.toBinaryString(A,24,D),this.toBinaryString(k,24,D)]);for(let W of O)if(F.substring(0,W)===V.substring(0,W))return!0;return!1})}static bytesEqualWithBinaryString(A,k,D,O=!0){return ye(this,null,function*(){if(A===k)return!0;let[F,V]=yield Promise.all([this.toBinaryString(A,D,O),this.toBinaryString(k,D,O)]);return F===V})}static bytesEqualWithArrayBuffer(A,k,D,O=!0){return ye(this,null,function*(){if(A===k)return!0;let[F,V]=yield Promise.all([this.toArrayBuffer(A,D,O),this.toArrayBuffer(k,D,O)]);return this.compareBuffers(F,V,O)})}static isEqual(A,k){return ye(this,arguments,function*(D,O,{methods:F=["size","type","magic","byte"],byte:V="buffer",partial:W=!1,chunks:X=null,worker:re=!0}={}){let ne=null;for(let ae of F){if(ne===!1||W&&ne===!0)break;switch(ae){case"byte":case"bytes":case"content":X=X instanceof Array?X:[D.size],ne=!0;for(let xe of X){let fe=!1;fe=V==="buffer"?yield this.bytesEqualWithArrayBuffer(D,O,xe,re):yield this.bytesEqualWithBinaryString(D,O,xe,re),fe||(ne=!1)}break;case"magic":case"headers":case"numbers":case"mime":ne=yield this.magicNumbersEqual(D,O,re);break;case"size":case"sizes":ne=this.sizeEqual(D,O);break;case"type":case"types":ne=this.typeEqual(D,O);break;default:throw new Error("Blob-compare : Unknown comparison method")}}return ne})}}}])})}),ide={};te(ide,{ToolbarDropdownSelect:()=>PIe,default:()=>TIe}),t.exports=Se(ide),Fe(),Je();var ode=Mt;$n();var uAe=0,cAe=class{constructor(i){this._studio=i,Pe(this,"_id"),Pe(this,"_state",{type:"Ready"}),this._id=String(uAe++)}get status(){return this._state.type}reset(){let{_state:i}=this;if(i.type!=="Ready")if(i.type==="Captured")this._state={type:"Ready"},i.transaction.discard(),i.flagsTransaction.discard();else throw i.type==="Committed"?new Error("This scrub is already committed and can't be reset."):new Error("This scrub is already discarded and can't be reset.")}commit(){let{_state:i}=this;if(i.type==="Captured")i.transaction.commit(),i.flagsTransaction.discard(),this._state={type:"Committed"};else if(i.type==="Ready"){console.warn("Scrub is empty. Nothing to commit.");return}else throw i.type==="Committed"?new Error("This scrub is already committed."):new Error("This scrub is already discarded and can't be comitted.")}capture(i){if(this._state.type==="Captured"&&this.reset(),this._state.type==="Ready"){let s=!0;try{this._state=j({type:"Captured"},this._capture(i)),s=!1}finally{s&&(console.error("This scrub's callback threw an error. We're undo-ing all of the changes made by this scrub, and marking it as discarded."),this._state={type:"Discarded"})}}else throw this._state.type==="Committed"?new Error("This scrub is already committed and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.commit()"):new Error("This scrub is already discarded and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.discard()")}_capture(i){let s=[],a=this._studio.tempTransaction(p=>{let f=!0,g={set:(y,w)=>{if(!f)throw new Error("You seem to have called the scrub api after scrub.capture()");let{root:S,path:M}=(0,ode.getPointerParts)(y);if(!Dt(S))throw new Error("We can only scrub props of Sheet Objects for now");p.set(y,w),s.push(y)}};try{i(g)}finally{f=!1}}),c=this._studio.tempTransaction(({stateEditors:p})=>{s.forEach(f=>{let{root:g,path:y}=(0,ode.getPointerParts)(f);if(!Dt(g))return;let w=g.template.getDefaultsAtPointer(f);vt(w,(S,M)=>{p.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey.propsBeingScrubbed.flag(z(j({},g.address),{pathToProp:M}))},y)})});return{transaction:a,flagsTransaction:c}}discard(){let{_state:i}=this;if(i.type==="Captured"||i.type==="Ready")i.type==="Captured"&&(i.transaction.discard(),i.flagsTransaction.discard()),this._state={type:"Discarded"};else throw i.type==="Committed"?new Error("This scrub is already committed and can't be discarded."):new Error("This scrub is already discarded")}},dAe=Mt,sde=typeof window<"u"?Promise.resolve().then(()=>(W2e(),Gce)).then(i=>i.default):null,hAe=class{constructor(i){this.studio=i,Pe(this,"_rendered",!1),Pe(this,"_nonSSRBits",sde?sde.then(s=>new s):Promise.reject()),Pe(this,"ready",this._nonSSRBits.then(()=>{},()=>{}))}render(){this._rendered||(this._rendered=!0,this._nonSSRBits.then(i=>{i.render()}).catch(i=>{throw console.error(i),i}))}hide(){this.studio.transaction(({drafts:i})=>{i.ahistoric.visibilityState="everythingIsHidden"})}restore(){this.render(),this.studio.transaction(({drafts:i})=>{i.ahistoric.visibilityState="everythingIsVisible"})}get isHidden(){return(0,dAe.val)(this.studio.atomP.ahistoric.visibilityState)==="everythingIsHidden"}renderToolset(i,s){let a=!1,c=null;return this._nonSSRBits.then(p=>{a||(c=p.renderToolset(i,s))}).catch(p=>{console.error(p)}),()=>{if(c){c();return}a||(a=!0)}}},TR=Mt;function pAe(i){return i}var fAe=(i,s=pAe)=>{let a=c=>({type:i,payload:s(c)});return a.type=i,a.is=c=>c&&c.type&&c.type===i,a},Tc=fAe,ade=Q(Q2e()),lde=Q(aAe());q0();var MR,mAe=new Uint8Array(16);function vAe(){if(!MR&&(MR=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!MR))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return MR(mAe)}var gAe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function yAe(i){return typeof i=="string"&&gAe.test(i)}var bAe=yAe,Wo=[];for(AR=0;AR<256;++AR)Wo.push((AR+256).toString(16).substr(1));var AR;function _Ae(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=(Wo[i[s+0]]+Wo[i[s+1]]+Wo[i[s+2]]+Wo[i[s+3]]+"-"+Wo[i[s+4]]+Wo[i[s+5]]+"-"+Wo[i[s+6]]+Wo[i[s+7]]+"-"+Wo[i[s+8]]+Wo[i[s+9]]+"-"+Wo[i[s+10]]+Wo[i[s+11]]+Wo[i[s+12]]+Wo[i[s+13]]+Wo[i[s+14]]+Wo[i[s+15]]).toLowerCase();if(!bAe(a))throw TypeError("Stringified UUID is invalid");return a}var wAe=_Ae;function xAe(i,s,a){i=i||{};var c=i.random||(i.rng||vAe)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,s){a=a||0;for(var p=0;p<16;++p)s[a+p]=c[p];return s}return wAe(c)}var SAe=xAe,sE={replaceHistory:Tc("@history/replaceHistory"),startHistoryFromScratch:Tc("@history/startHistoryFromScratch"),undo:Tc("@history/undo"),redo:Tc("@history/redo")},EAe={type:"@history/unknownAction",payload:""},CAe={maxNumberOfCommits:100},PAe=(i,s=CAe)=>{let a=JV(i(void 0,EAe));return function(c,p){return sE.startHistoryFromScratch.is(p)?JV(i(void 0,p.payload)):sE.replaceHistory.is(p)?p.payload:sE.undo.is(p)?c?MAe(c):a:sE.redo.is(p)?c?AAe(c):a:c?kAe(c,i(c.innerState,p),s):JV(i(void 0,p))}};function JV(i){return{currentCommitHash:void 0,commitsByHash:{},listOfCommitHashes:[],innerState:i}}function kAe(i,s,a){if(s===i.innerState)return i;let c=TAe(i.innerState,s);if(c.forwardDiff.length===0)return i;let p=yd(i.listOfCommitHashes),f={currentCommitHash:c.hash,commitsByHash:j({},i.commitsByHash),listOfCommitHashes:[...i.listOfCommitHashes],innerState:s};if(i.currentCommitHash!==p){let g=i.listOfCommitHashes.findIndex(y=>y===i.currentCommitHash);i.listOfCommitHashes.slice(g+1).forEach(y=>{delete f.commitsByHash[y]}),f.listOfCommitHashes.splice(g+1,f.listOfCommitHashes.length)}if(f.listOfCommitHashes.push(c.hash),f.commitsByHash[c.hash]=c,f.listOfCommitHashes.length>a.maxNumberOfCommits){let g=f.listOfCommitHashes.length-a.maxNumberOfCommits;f.listOfCommitHashes.slice(0,g).forEach(y=>{delete f.commitsByHash[y]}),f.listOfCommitHashes.splice(0,g)}return f}function TAe(i,s){let a=ade.default.diff(i,s,{invertible:!1}),c=ade.default.diff(s,i,{invertible:!1}),p=Date.now(),f=SAe();return{forwardDiff:a,backwardDiff:c,timestamp:p,hash:f}}function MAe(i){if(i.currentCommitHash===void 0)return i;let s=i.listOfCommitHashes.findIndex(g=>g===i.currentCommitHash);if(s===-1)throw new Error("This should never happen");let a=i.commitsByHash[i.currentCommitHash],c=(0,lde.default)(i.innerState,a.backwardDiff),p=s-1,f=p===-1?void 0:i.listOfCommitHashes[p];return z(j({},i),{currentCommitHash:f,innerState:c})}function AAe(i){if(i.listOfCommitHashes.length===0)return i;let s=i.listOfCommitHashes.findIndex(g=>g===i.currentCommitHash);if(s===i.listOfCommitHashes.length-1)return i;let a=s+1,c=i.listOfCommitHashes[a],p=i.commitsByHash[c],f=(0,lde.default)(i.innerState,p.forwardDiff);return z(j({},i),{currentCommitHash:c,innerState:f})}cR();var IR={ahistoric:{visibilityState:"everythingIsVisible",theTrigger:{position:{closestCorner:"bottomLeft",distanceFromHorizontalEdge:.02,distanceFromVerticalEdge:.02}},coreByProject:{},projects:{stateByProjectId:{}}},historic:{projects:{stateByProjectId:{}},autoKey:!0,coreByProject:{},panelInstanceDesceriptors:{}},ephemeral:{initialised:!1,coreByProject:{},projects:{stateByProjectId:{}},extensions:{byId:{},paneClasses:{}},showOutline:!1}},ude=Tc("@storeBundle/replacePersistentState",i=>i),cde=Tc("@storeBundle/reduceParts",i=>i),lb={historic:sE,replacePersistentState:ude,reduceParts:cde},dde=Tc("@storeBundle/setInnerHistoricState",i=>i),IAe=(i=IR.historic,s)=>dde.is(s)?s.payload:i,ej=PAe(IAe),hde=(i,s)=>{if(ude.is(s)){let{historic:a,ahistoric:c}=s.payload,p=(i==null?void 0:i.ephemeral)||IR.ephemeral;return{$persistent:{historic:a,ahistoric:c},ephemeral:p}}else if(i){let{historic:a,ahistoric:c}=i.$persistent,{ephemeral:p}=i;if(cde.is(s)){let f={historic:i.$persistent.historic.innerState,ahistoric:i.$persistent.ahistoric,ephemeral:i.ephemeral},g=s.payload(f);if(g===f)return i;a.innerState!==g.historic&&(a=ej(a,dde(g.historic))),c=g.ahistoric,p=g.ephemeral}else{let f=ej(a,s);if(f===a)return i;a=f}return{$persistent:a===i.$persistent.historic&&c===i.$persistent.ahistoric?i.$persistent:{historic:a,ahistoric:c},ephemeral:p}}else{let a=ej(void 0,{}),c=IR.ahistoric,p=IR.ephemeral;return{$persistent:{historic:a,ahistoric:c},ephemeral:p}}},pde=Tc("@history/pushTempAction",i=>i),fde=Tc("@history/discardTempAction",i=>i),mde=Tc("@history/commitTempAction",i=>i),RAe=0,OAe=()=>{let i=RAe++;return{push:s=>pde({id:i,originalAction:s}),discard:()=>fde(i),commit:()=>mde(i)}},DAe=(i,s)=>{if(i){let{tempActions:a,permanent:c}=i.$temps,p;if(pde.is(s))a=[...a,s];else if(mde.is(s)){let g=a.find(y=>y.payload.id===s.payload);g?(p=g.payload.originalAction,a=a.filter(y=>y.payload.id!==s.payload)):uR.error("Comitting temp action group ".concat(s.payload," isn't possible as this group doesn't exist"))}else fde.is(s)?a=a.filter(g=>g.payload.id!==s.payload):p=s;p&&(c=hde(i.$temps.permanent,p));let f={historic:c.$persistent.historic.innerState,ahistoric:c.$persistent.ahistoric,ephemeral:c.ephemeral};for(let g of a)f=g.payload.originalAction.payload(f);return j({$temps:{tempActions:a,permanent:c},$persistent:c.$persistent},f)}else{let a=hde(void 0,s);return{$temps:{permanent:a,tempActions:[]},$persistent:a.$persistent,historic:a.$persistent.historic.innerState,ahistoric:a.$persistent.ahistoric,ephemeral:a.ephemeral}}};vc(),vc(),Nd();function vde(i,s){if(typeof i!="object"||i===null)return;if(s.length===0){for(let g of Object.keys(i))delete i[g];return}let a=s.slice(0,s.length-1),c=i,p=new WeakMap;for(let g of a){let y=c,w=y[g];if(typeof w!="object"||w===null)return;p.set(w,y),c=w}let f=s.slice().reverse();for(let g of f){if(delete c[g],Object.keys(c).length>0)return;c=p.get(c)}}function LAe(i,{scale:s,origin:a,translate:c}){let p=a+(i-a)*s;return c+p}function mu(i){for(var s=arguments.length,a=Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];throw Error("[Immer] minified error nr: "+i+(a.length?" "+a.map(function(p){return"'"+p+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ub(i){return!!i&&!!i[Ta]}function Uv(i){return!!i&&(function(s){if(!s||typeof s!="object")return!1;var a=Object.getPrototypeOf(s);if(a===null)return!0;var c=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return c===Object||typeof c=="function"&&Function.toString.call(c)===zAe}(i)||Array.isArray(i)||!!i[Pde]||!!i.constructor[Pde]||nj(i)||rj(i))}function aE(i,s,a){a===void 0&&(a=!1),cb(i)===0?(a?Object.keys:mj)(i).forEach(function(c){a&&typeof c=="symbol"||s(c,i[c],i)}):i.forEach(function(c,p){return s(p,c,i)})}function cb(i){var s=i[Ta];return s?s.i>3?s.i-4:s.i:Array.isArray(i)?1:nj(i)?2:rj(i)?3:0}function tj(i,s){return cb(i)===2?i.has(s):Object.prototype.hasOwnProperty.call(i,s)}function NAe(i,s){return cb(i)===2?i.get(s):i[s]}function gde(i,s,a){var c=cb(i);c===2?i.set(s,a):c===3?(i.delete(s),i.add(a)):i[s]=a}function FAe(i,s){return i===s?i!==0||1/i==1/s:i!=i&&s!=s}function nj(i){return VAe&&i instanceof Map}function rj(i){return jAe&&i instanceof Set}function Vv(i){return i.o||i.t}function ij(i){if(Array.isArray(i))return Array.prototype.slice.call(i);var s=HAe(i);delete s[Ta];for(var a=mj(s),c=0;c<a.length;c++){var p=a[c],f=s[p];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(s[p]={configurable:!0,writable:!0,enumerable:f.enumerable,value:i[p]})}return Object.create(Object.getPrototypeOf(i),s)}function oj(i,s){return s===void 0&&(s=!1),sj(i)||ub(i)||!Uv(i)||(cb(i)>1&&(i.set=i.add=i.clear=i.delete=BAe),Object.freeze(i),s&&aE(i,function(a,c){return oj(c,!0)},!0)),i}function BAe(){mu(2)}function sj(i){return i==null||typeof i!="object"||Object.isFrozen(i)}function Kd(i){var s=GAe[i];return s||mu(18,i),s}function yde(){return lE}function aj(i,s){s&&(Kd("Patches"),i.u=[],i.s=[],i.v=s)}function RR(i){lj(i),i.p.forEach(UAe),i.p=null}function lj(i){i===lE&&(lE=i.l)}function bde(i){return lE={p:[],l:lE,h:i,m:!0,_:0}}function UAe(i){var s=i[Ta];s.i===0||s.i===1?s.j():s.O=!0}function uj(i,s){s._=s.p.length;var a=s.p[0],c=i!==void 0&&i!==a;return s.h.g||Kd("ES5").S(s,i,c),c?(a[Ta].P&&(RR(s),mu(4)),Uv(i)&&(i=OR(s,i),s.l||DR(s,i)),s.u&&Kd("Patches").M(a[Ta],i,s.u,s.s)):i=OR(s,a,[]),RR(s),s.u&&s.v(s.u,s.s),i!==Cde?i:void 0}function OR(i,s,a){if(sj(s))return s;var c=s[Ta];if(!c)return aE(s,function(f,g){return _de(i,c,s,f,g,a)},!0),s;if(c.A!==i)return s;if(!c.P)return DR(i,c.t,!0),c.t;if(!c.I){c.I=!0,c.A._--;var p=c.i===4||c.i===5?c.o=ij(c.k):c.o;aE(c.i===3?new Set(p):p,function(f,g){return _de(i,c,p,f,g,a)}),DR(i,p,!1),a&&i.u&&Kd("Patches").R(c,a,i.u,i.s)}return c.o}function _de(i,s,a,c,p,f){if(ub(p)){var g=OR(i,p,f&&s&&s.i!==3&&!tj(s.D,c)?f.concat(c):void 0);if(gde(a,c,g),!ub(g))return;i.m=!1}if(Uv(p)&&!sj(p)){if(!i.h.F&&i._<1)return;OR(i,p),s&&s.A.l||DR(i,p)}}function DR(i,s,a){a===void 0&&(a=!1),i.h.F&&i.m&&oj(s,a)}function cj(i,s){var a=i[Ta];return(a?Vv(a):i)[s]}function wde(i,s){if(s in i)for(var a=Object.getPrototypeOf(i);a;){var c=Object.getOwnPropertyDescriptor(a,s);if(c)return c;a=Object.getPrototypeOf(a)}}function dj(i){i.P||(i.P=!0,i.l&&dj(i.l))}function hj(i){i.o||(i.o=ij(i.t))}function pj(i,s,a){var c=nj(s)?Kd("MapSet").N(s,a):rj(s)?Kd("MapSet").T(s,a):i.g?function(p,f){var g=Array.isArray(p),y={i:g?1:0,A:f?f.A:yde(),P:!1,I:!1,D:{},l:f,t:p,k:null,o:null,j:null,C:!1},w=y,S=NR;g&&(w=[y],S=FR);var M=Proxy.revocable(w,S),R=M.revoke,A=M.proxy;return y.k=A,y.j=R,A}(s,a):Kd("ES5").J(s,a);return(a?a.A:yde()).p.push(c),c}function LR(i){return ub(i)||mu(22,i),function s(a){if(!Uv(a))return a;var c,p=a[Ta],f=cb(a);if(p){if(!p.P&&(p.i<4||!Kd("ES5").K(p)))return p.t;p.I=!0,c=xde(a,f),p.I=!1}else c=xde(a,f);return aE(c,function(g,y){p&&NAe(p.t,g)===y||gde(c,g,s(y))}),f===3?new Set(c):c}(i)}function xde(i,s){switch(s){case 2:return new Map(i);case 3:return Array.from(i)}return ij(i)}var Sde,lE,fj=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",VAe=typeof Map<"u",jAe=typeof Set<"u",Ede=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Cde=fj?Symbol.for("immer-nothing"):((Sde={})["immer-nothing"]=!0,Sde),Pde=fj?Symbol.for("immer-draftable"):"__$immer_draftable",Ta=fj?Symbol.for("immer-state"):"__$immer_state",zAe=""+Object.prototype.constructor,mj=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:Object.getOwnPropertyNames,HAe=Object.getOwnPropertyDescriptors||function(i){var s={};return mj(i).forEach(function(a){s[a]=Object.getOwnPropertyDescriptor(i,a)}),s},GAe={},NR={get:function(i,s){if(s===Ta)return i;var a=Vv(i);if(!tj(a,s))return function(p,f,g){var y,w=wde(f,g);return w?"value"in w?w.value:(y=w.get)===null||y===void 0?void 0:y.call(p.k):void 0}(i,a,s);var c=a[s];return i.I||!Uv(c)?c:c===cj(i.t,s)?(hj(i),i.o[s]=pj(i.A.h,c,i)):c},has:function(i,s){return s in Vv(i)},ownKeys:function(i){return Reflect.ownKeys(Vv(i))},set:function(i,s,a){var c=wde(Vv(i),s);if(c!=null&&c.set)return c.set.call(i.k,a),!0;if(!i.P){var p=cj(Vv(i),s),f=p==null?void 0:p[Ta];if(f&&f.t===a)return i.o[s]=a,i.D[s]=!1,!0;if(FAe(a,p)&&(a!==void 0||tj(i.t,s)))return!0;hj(i),dj(i)}return i.o[s]===a&&typeof a!="number"&&(a!==void 0||s in i.o)||(i.o[s]=a,i.D[s]=!0,!0)},deleteProperty:function(i,s){return cj(i.t,s)!==void 0||s in i.t?(i.D[s]=!1,hj(i),dj(i)):delete i.D[s],i.o&&delete i.o[s],!0},getOwnPropertyDescriptor:function(i,s){var a=Vv(i),c=Reflect.getOwnPropertyDescriptor(a,s);return c&&{writable:!0,configurable:i.i!==1||s!=="length",enumerable:c.enumerable,value:a[s]}},defineProperty:function(){mu(11)},getPrototypeOf:function(i){return Object.getPrototypeOf(i.t)},setPrototypeOf:function(){mu(12)}},FR={};aE(NR,function(i,s){FR[i]=function(){return arguments[0]=arguments[0][0],s.apply(this,arguments)}}),FR.deleteProperty=function(i,s){return NR.deleteProperty.call(this,i[0],s)},FR.set=function(i,s,a){return NR.set.call(this,i[0],s,a,i[0])};var WAe=function(){function i(a){var c=this;this.g=Ede,this.F=!0,this.produce=function(p,f,g){if(typeof p=="function"&&typeof f!="function"){var y=f;f=p;var w=c;return function(k){var D=this;k===void 0&&(k=y);for(var O=arguments.length,F=Array(O>1?O-1:0),V=1;V<O;V++)F[V-1]=arguments[V];return w.produce(k,function(W){var X;return(X=f).call.apply(X,[D,W].concat(F))})}}var S;if(typeof f!="function"&&mu(6),g!==void 0&&typeof g!="function"&&mu(7),Uv(p)){var M=bde(c),R=pj(c,p,void 0),A=!0;try{S=f(R),A=!1}finally{A?RR(M):lj(M)}return typeof Promise<"u"&&S instanceof Promise?S.then(function(k){return aj(M,g),uj(k,M)},function(k){throw RR(M),k}):(aj(M,g),uj(S,M))}if(!p||typeof p!="object")return(S=f(p))===Cde?void 0:(S===void 0&&(S=p),c.F&&oj(S,!0),S);mu(21,p)},this.produceWithPatches=function(p,f){return typeof p=="function"?function(w){for(var S=arguments.length,M=Array(S>1?S-1:0),R=1;R<S;R++)M[R-1]=arguments[R];return c.produceWithPatches(w,function(A){return p.apply(void 0,[A].concat(M))})}:[c.produce(p,f,function(w,S){g=w,y=S}),g,y];var g,y},typeof(a==null?void 0:a.useProxies)=="boolean"&&this.setUseProxies(a.useProxies),typeof(a==null?void 0:a.autoFreeze)=="boolean"&&this.setAutoFreeze(a.autoFreeze)}var s=i.prototype;return s.createDraft=function(a){Uv(a)||mu(8),ub(a)&&(a=LR(a));var c=bde(this),p=pj(this,a,void 0);return p[Ta].C=!0,lj(c),p},s.finishDraft=function(a,c){var p=a&&a[Ta],f=p.A;return aj(f,c),uj(void 0,f)},s.setAutoFreeze=function(a){this.F=a},s.setUseProxies=function(a){a&&!Ede&&mu(20),this.g=a},s.applyPatches=function(a,c){var p;for(p=c.length-1;p>=0;p--){var f=c[p];if(f.path.length===0&&f.op==="replace"){a=f.value;break}}var g=Kd("Patches").$;return ub(a)?g(a,c):this.produce(a,function(y){return g(y,c.slice(p+1))})},i}(),Ma=new WAe;Ma.produce,Ma.produceWithPatches.bind(Ma),Ma.setAutoFreeze.bind(Ma),Ma.setUseProxies.bind(Ma),Ma.applyPatches.bind(Ma);var vj=Ma.createDraft.bind(Ma),gj=Ma.finishDraft.bind(Ma);Y5(),Kl(),cx(),Q0(),ey(),aR(),ti(),$n();var vu={create(i){let s={byId:{},allIds:{}};if(i)for(let[a,c]of i)s.byId[a]=c,s.allIds[a]=!0;return s},shallowCopy(i){return{byId:j({},i==null?void 0:i.byId),allIds:j({},i==null?void 0:i.allIds)}},add(i,s,a){return{byId:z(j({},i==null?void 0:i.byId),{[s]:a}),allIds:z(j({},i==null?void 0:i.allIds),{[s]:!0})}},merge(i){let s=vu.create();for(let a=0;a<i.length;a++)s.byId=j(j({},s.byId),i[a].byId),s.allIds=j(j({},s.allIds),i[a].allIds);return s},remove(i,s){let a=vu.shallowCopy(i);return delete a.allIds[s],delete a.byId[s],a},filter(i,s){let a=vu.shallowCopy(i);for(let[c,p]of Object.entries(a.byId))s(p)||(delete a.allIds[c],delete a.byId[c]);return a}},kde=i=>(yj=i,bj),yj,$o=()=>{if(yj===void 0)throw new Error("Calling stateEditors outside of a transaction is not allowed.");return yj},bj;(i=>{(s=>{(a=>{(c=>{function p(f){let g=$o().historic;g.panelPositions!=null||(g.panelPositions={}),g.panelPositions[f.panelId]=f.position}c.setPanelPosition=p})(a.panelPositions||(a.panelPositions={})),(c=>{function p(){var f;return(f=$o().historic).panels!=null||(f.panels={}),$o().historic.panels}c._ensure=p,(f=>{function g(){let y=i.studio.historic.panels._ensure();return y.outlinePanel!=null||(y.outlinePanel={}),y.outlinePanel}f._ensure=g,(y=>{function w(M){let R=[];for(let A of rs(M))nt(A)?R.push(j({type:"Project"},A.address)):Wt(A)?(R.push(j({type:"Sheet"},A.template.address)),i.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(A.address)):Ut(A)?R.push(j({type:"Sheet"},A.address)):Dt(A)?(R.push(j({type:"SheetObject"},A.template.address)),i.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(A.sheet.address)):en(A)&&R.push(j({type:"SheetObject"},A.address));f._ensure().selection=R}y.set=w;function S(){f._ensure().selection=[]}y.unset=S})(f.selection||(f.selection={}))})(c.outline||(c.outline={})),(f=>{function g(){let y=i.studio.historic.panels._ensure();return y.sequenceEditor!=null||(y.sequenceEditor={}),y.sequenceEditor}f._ensure=g,(y=>{function w(){let M=f._ensure();return M.graphEditor!=null||(M.graphEditor={height:.5,isOpen:!1}),M.graphEditor}function S(M){w().isOpen=M.isOpen}y.setIsOpen=S})(f.graphEditor||(f.graphEditor={}))})(c.sequenceEditor||(c.sequenceEditor={}))})(a.panels||(a.panels={})),(c=>{(p=>{function f(g){let y=$o().historic;return y.projects.stateByProjectId[g.projectId]||(y.projects.stateByProjectId[g.projectId]={stateBySheetId:{}}),y.projects.stateByProjectId[g.projectId]}p._ensure=f,(g=>{function y(S){let M=i.studio.historic.projects.stateByProjectId._ensure(S);return M.stateBySheetId[S.sheetId]||(M.stateBySheetId[S.sheetId]={selectedInstanceId:void 0,sequenceEditor:{selectedPropsByObject:{}}}),M.stateBySheetId[S.sheetId]}g._ensure=y;function w(S){i.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(S).selectedInstanceId=S.sheetInstanceId}g.setSelectedInstanceId=w,(S=>{function M(F){let{selectedPropsByObject:V}=g._ensure(F).sequenceEditor;V[F.objectKey]||(V[F.objectKey]={});let W=V[F.objectKey],X=mc(F.pathToProp),re=new Set(Object.keys(YS));for(let[ae,xe]of Object.entries(LR(V)))for(let[fe,ge]of Object.entries(xe))re.delete(ge);let ne=re.size>0?re.values().next().value:Object.keys(YS)[0];W[X]=ne}S.addPropToGraphEditor=M;function R(F){let{selectedPropsByObject:V}=g._ensure(F).sequenceEditor;if(!V[F.objectKey])return;let W=V[F.objectKey],X=mc(F.pathToProp);W[X]&&vde(V,[F.objectKey,X])}S.removePropFromGraphEditor=R;function A(F){let V=i.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(F).sequenceEditor;return V.markerSet||(V.markerSet=vu.create()),V.markerSet}function k(F){let V=A(F.sheetAddress),W=F.markers.filter(ae=>!!isFinite(ae.position)).map(ae=>z(j({},ae),{position:F.snappingFunction(ae.position)})),X=Sr(W,"id"),re=vu.filter(V,ae=>ae&&!X[ae.id]),ne=Sr(Object.values(re.byId),"position");W.forEach(({position:ae})=>{let xe=ne[ae];xe&&(re=vu.remove(re,xe.id))}),Object.assign(V,vu.merge([re,vu.create(W.map(ae=>[ae.id,ae]))]))}S.replaceMarkers=k;function D(F){let V=A(F.sheetAddress);Object.assign(V,vu.remove(V,F.markerId))}S.removeMarker=D;function O(F){let V=A(F.sheetAddress).byId[F.markerId];V!==void 0&&(V.label=F.label)}S.updateMarker=O})(g.sequenceEditor||(g.sequenceEditor={}))})(p.stateBySheetId||(p.stateBySheetId={}))})(c.stateByProjectId||(c.stateByProjectId={}))})(a.projects||(a.projects={}))})(s.historic||(s.historic={})),(a=>{function c(p){$o().ephemeral.showOutline=p}a.setShowOutline=c,(p=>{(f=>{function g(y){let w=$o().ephemeral;return w.projects.stateByProjectId[y.projectId]||(w.projects.stateByProjectId[y.projectId]={stateBySheetId:{}}),w.projects.stateByProjectId[y.projectId]}f._ensure=g,(y=>{function w(S){let M=i.studio.ephemeral.projects.stateByProjectId._ensure(S);return M.stateBySheetId[S.sheetId]||(M.stateBySheetId[S.sheetId]={stateByObjectKey:{}}),M.stateBySheetId[S.sheetId]}y._ensure=w,(S=>{function M(R){var A;let k=i.studio.ephemeral.projects.stateByProjectId.stateBySheetId._ensure(R).stateByObjectKey;return k[A=R.objectKey]!=null||(k[A]={}),k[R.objectKey]}S._ensure=M,(R=>{function A(D){let O=i.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey._ensure(D);return O.valuesBeingScrubbed!=null||(O.valuesBeingScrubbed={}),O.valuesBeingScrubbed}R._ensure=A;function k(D){lp(A(D),D.pathToProp,!0)}R.flag=k})(S.propsBeingScrubbed||(S.propsBeingScrubbed={}))})(y.stateByObjectKey||(y.stateByObjectKey={}))})(f.stateBySheetId||(f.stateBySheetId={}))})(p.stateByProjectId||(p.stateByProjectId={}))})(a.projects||(a.projects={}))})(s.ephemeral||(s.ephemeral={})),(a=>{function c(w){$o().ahistoric.pinOutline=w}a.setPinOutline=c;function p(w){$o().ahistoric.pinDetails=w}a.setPinDetails=p;function f(w){$o().ahistoric.pinNotifications=w}a.setPinNotifications=f;function g(w){$o().ahistoric.visibilityState=w}a.setVisibilityState=g;function y(w){let S=_I(w.map(A=>A.pathToProp)),M=w.map(({keyframe:A,pathToProp:k})=>({keyframe:A,pathToProp:k.slice(S.length)})),R=$o();R.ahistoric.clipboard?R.ahistoric.clipboard.keyframesWithRelativePaths=M:R.ahistoric.clipboard={keyframesWithRelativePaths:M}}a.setClipboardKeyframes=y,(w=>{(S=>{function M(R){let A=$o().ahistoric;return A.projects.stateByProjectId[R.projectId]||(A.projects.stateByProjectId[R.projectId]={stateBySheetId:{}}),A.projects.stateByProjectId[R.projectId]}S._ensure=M,(R=>{function A(D){let O=i.studio.ahistoric.projects.stateByProjectId._ensure(D);return O.collapsedItemsInOutline||(O.collapsedItemsInOutline={}),O.collapsedItemsInOutline}R._ensure=A;function k(D){let O=i.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline._ensure(D);D.isCollapsed?O[D.itemKey]=!0:delete O[D.itemKey]}R.set=k})(S.collapsedItemsInOutline||(S.collapsedItemsInOutline={})),(R=>{function A(k){let D=i.studio.ahistoric.projects.stateByProjectId._ensure(k);return D.stateBySheetId[k.sheetId]||(D.stateBySheetId[k.sheetId]={}),D.stateBySheetId[k.sheetId]}R._ensure=A,(k=>{function D(O){let F=i.studio.ahistoric.projects.stateByProjectId.stateBySheetId._ensure(O);return F.sequence||(F.sequence={}),F.sequence}k._ensure=D,(O=>{function F(W){i.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(W).focusRange={range:W.range,enabled:W.enabled}}O.set=F;function V(W){i.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(W).focusRange=void 0}O.unset=V})(k.focusRange||(k.focusRange={})),(O=>{function F(V){i.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(V).clippedSpaceRange=j({},V.range)}O.set=F})(k.clippedSpaceRange||(k.clippedSpaceRange={})),(O=>{function F(W){let X=i.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(W),re=X.collapsableItems;return re||(re=X.collapsableItems=vu.create()),re}function V(W){let X=F(W);Object.assign(X,vu.add(X,W.studioSheetItemKey,{isCollapsed:W.isCollapsed}))}O.set=V})(k.sequenceEditorCollapsableItems||(k.sequenceEditorCollapsableItems={}))})(R.sequence||(R.sequence={}))})(S.stateBySheetId||(S.stateBySheetId={}))})(w.stateByProjectId||(w.stateByProjectId={}))})(a.projects||(a.projects={}))})(s.ahistoric||(s.ahistoric={}))})(i.studio||(i.studio={})),(s=>{(a=>{(c=>{function p(f){let g=$o().historic.coreByProject[f.projectId].revisionHistory,y=50;g.unshift(f.revision),g.length>y&&(g.length=y)}c.add=p})(a.revisionHistory||(a.revisionHistory={})),(c=>{function p(y){let w=$o().historic.coreByProject[y.projectId].sheetsById;return w[y.sheetId]||(w[y.sheetId]={staticOverrides:{byObject:{}}}),w[y.sheetId]}c._ensure=p;function f(y){let w=$o().historic.coreByProject[y.projectId].sheetsById[y.sheetId];if(!w)return;delete w.staticOverrides.byObject[y.objectKey];let S=w.sequence;S&&delete S.tracksByObject[y.objectKey]}c.forgetObject=f;function g(y){$o().historic.coreByProject[y.projectId].sheetsById[y.sheetId]&&delete $o().historic.coreByProject[y.projectId].sheetsById[y.sheetId]}c.forgetSheet=g,(y=>{function w(fe){let ge=i.coreByProject.historic.sheetsById._ensure(fe);return ge.sequence!=null||(ge.sequence={subUnitsPerUnit:30,length:10,type:"PositionalSequence",tracksByObject:{}}),ge.sequence}y._ensure=w;function S(fe){w(fe).length=ci(parseFloat(fe.length.toFixed(2)),.01,1/0)}y.setLength=S;function M(fe){var ge;let Ie=i.coreByProject.historic.sheetsById.sequence._ensure(fe).tracksByObject;return Ie[ge=fe.objectKey]!=null||(Ie[ge]={trackData:{},trackIdByPropPath:{}}),Ie[fe.objectKey]}function R(fe,ge){let Ie=M(fe),Qe=mc(fe.pathToProp);if(typeof Ie.trackIdByPropPath[Qe]=="string")return;let le=YPe(),Ae={type:"BasicKeyframedTrack",__debugName:"".concat(fe.objectKey,":").concat(Qe),keyframes:[]};Ie.trackData[le]=Ae,Ie.trackIdByPropPath[Qe]=le}y.setPrimitivePropAsSequenced=R;function A(fe){let ge=M(fe),Ie=mc(fe.pathToProp),Qe=ge.trackIdByPropPath[Ie];typeof Qe=="string"&&(delete ge.trackIdByPropPath[Ie],delete ge.trackData[Qe],i.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(fe))}y.setPrimitivePropAsStatic=A;function k(fe){let ge=M(fe);for(let Ie of Object.keys(ge.trackIdByPropPath)){let Qe=JSON.parse(Ie);if(fe.pathToProp.every((le,Ae)=>Qe[Ae]===le)){let le=ge.trackIdByPropPath[Ie];if(typeof le!="string")continue;delete ge.trackIdByPropPath[Ie],delete ge.trackData[le]}}i.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfCompoundProp(fe)}y.setCompoundPropAsStatic=k;function D(fe){return M(fe).trackData[fe.trackId]}function O(fe){let ge=D(fe);if(ge)return ge.keyframes.find(Ie=>Ie.id===fe.keyframeId)}function F(fe){let ge=fe.snappingFunction(fe.position),Ie=D(fe);if(!Ie)return;let{keyframes:Qe}=Ie,le=Qe.findIndex(Ue=>Ue.position===ge);if(le!==-1){let Ue=Qe[le];Ue.value=fe.value;return}let Ae=a2(Qe,Ue=>Ue.position<ge);if(Ae===-1){Qe.unshift({id:TZ(),position:ge,connectedRight:!0,handles:fe.handles||[.5,1,.5,0],type:fe.type||"bezier",value:fe.value});return}let Y=Qe[Ae];Qe.splice(Ae+1,0,{id:TZ(),position:ge,connectedRight:Y.connectedRight,handles:fe.handles||[.5,1,.5,0],type:fe.type||"bezier",value:fe.value})}y.setKeyframeAtPosition=F;function V(fe){let ge=D(fe);if(!ge)return;let{keyframes:Ie}=ge,Qe=Ie.findIndex(le=>le.position===fe.position);Qe!==-1&&Ie.splice(Qe,1)}y.unsetKeyframeAtPosition=V;function W(fe){let ge=D(fe);if(!ge)return;let Ie=LR(ge.keyframes).filter(Qe=>fe.keyframeIds.includes(Qe.id)).map(Qe=>{let le=Qe.position,Ae=fe.snappingFunction(LAe(le,fe));return z(j({},Qe),{position:Ae})});xe(z(j({},fe),{keyframes:Ie}))}y.transformKeyframes=W;function X(fe){let ge=D(fe);ge&&(ge.keyframes=ge.keyframes.map((Ie,Qe)=>{let le=ge.keyframes[Qe-1],Ae=fe.keyframeIds.includes(Ie.id),Y=fe.keyframeIds.includes(le==null?void 0:le.id);return Ae&&!Y?z(j({},Ie),{handles:[Ie.handles[0],Ie.handles[1],fe.handles[0],fe.handles[1]]}):Ae&&Y?z(j({},Ie),{handles:[fe.handles[2],fe.handles[3],fe.handles[0],fe.handles[1]]}):Y?z(j({},Ie),{handles:[fe.handles[2],fe.handles[3],Ie.handles[2],Ie.handles[3]]}):Ie}))}y.setTweenBetweenKeyframes=X;function re(fe){var ge,Ie,Qe,le,Ae,Y,Ue,Tt;let ke=O(fe);ke&&(ke.handles=[(Ie=(ge=fe.end)==null?void 0:ge[0])!=null?Ie:ke.handles[0],(le=(Qe=fe.end)==null?void 0:Qe[1])!=null?le:ke.handles[1],(Y=(Ae=fe.start)==null?void 0:Ae[0])!=null?Y:ke.handles[2],(Tt=(Ue=fe.start)==null?void 0:Ue[1])!=null?Tt:ke.handles[3]])}y.setHandlesForKeyframe=re;function ne(fe){let ge=D(fe);ge&&(ge.keyframes=ge.keyframes.filter(Ie=>fe.keyframeIds.indexOf(Ie.id)===-1))}y.deleteKeyframes=ne;function ae(fe){let ge=O(fe);ge&&(ge.type=fe.keyframeType)}y.setKeyframeType=ae;function xe(fe){let ge=D(fe);if(!ge)return;let Ie=LR(ge.keyframes),Qe=fe.keyframes.filter(Tt=>!(typeof Tt.value=="number"&&!isFinite(Tt.value)||!Tt.handles.every(ke=>isFinite(ke)))).map(Tt=>z(j({},Tt),{position:fe.snappingFunction(Tt.position)})),le=Sr(Qe,"id"),Ae=Ie.filter(Tt=>!le[Tt.id]),Y=Sr(Ae,"position");Qe.forEach(({position:Tt})=>{let ke=Y[Tt];ke&&E2(Ae,ke)});let Ue=P2([...Ae,...Qe],"position");ge.keyframes=Ue}y.replaceKeyframes=xe})(c.sequence||(c.sequence={})),(y=>{(w=>{function S(k){var D;let O=i.coreByProject.historic.sheetsById._ensure(k).staticOverrides.byObject;return O[D=k.objectKey]!=null||(O[D]={}),O[k.objectKey]}function M(k){let D=S(k);lp(D,k.pathToProp,k.value)}w.setValueOfCompoundProp=M;function R(k){let D=S(k);lp(D,k.pathToProp,k.value)}w.setValueOfPrimitiveProp=R;function A(k){let D=i.coreByProject.historic.sheetsById._ensure(k).staticOverrides.byObject[k.objectKey];D&&vde(D,k.pathToProp)}w.unsetValueOfPrimitiveProp=A})(y.byObject||(y.byObject={}))})(c.staticOverrides||(c.staticOverrides={}))})(a.sheetsById||(a.sheetsById={}))})(s.historic||(s.historic={}))})(i.coreByProject||(i.coreByProject={}))})(bj||(bj={}));function _j(){let i,s,a=new Promise((p,f)=>{i=g=>{p(g),c.status="resolved"},s=g=>{f(g),c.status="rejected"}}),c={resolve:i,reject:s,promise:a,status:"pending"};return c}var $Ae=Mt;function KAe(i){let s=i.getState(),a=new $Ae.Atom(s);return i.subscribe(()=>{let c=i.getState();a.set(c),s=c}),a}ec();function qAe(i){var s,a=i.Symbol;return typeof a=="function"?a.observable?s=a.observable:(s=a("observable"),a.observable=s):s="@@observable",s}var uE;typeof self<"u"?uE=self:typeof window<"u"?uE=window:typeof Ai<"u"?uE=Ai:uE=t;var XAe=qAe(uE),Tde=XAe,Mde={INIT:"@@redux/INIT"};function Ade(i,s,a){var c;if(typeof s=="function"&&typeof a>"u"&&(a=s,s=void 0),typeof a<"u"){if(typeof a!="function")throw new Error("Expected the enhancer to be a function.");return a(Ade)(i,s)}if(typeof i!="function")throw new Error("Expected the reducer to be a function.");var p=i,f=s,g=[],y=g,w=!1;function S(){y===g&&(y=g.slice())}function M(){return f}function R(O){if(typeof O!="function")throw new Error("Expected listener to be a function.");var F=!0;return S(),y.push(O),function(){if(F){F=!1,S();var V=y.indexOf(O);y.splice(V,1)}}}function A(O){if(!F0(O))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof O.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(w)throw new Error("Reducers may not dispatch actions.");try{w=!0,f=p(f,O)}finally{w=!1}for(var F=g=y,V=0;V<F.length;V++){var W=F[V];W()}return O}function k(O){if(typeof O!="function")throw new Error("Expected the nextReducer to be a function.");p=O,A({type:Mde.INIT})}function D(){var O,F=R;return O={subscribe:function(V){if(typeof V!="object")throw new TypeError("Expected the observer to be an object.");function W(){V.next&&V.next(M())}W();var X=F(W);return{unsubscribe:X}}},O[Tde]=function(){return this},O}return A({type:Mde.INIT}),c={dispatch:A,subscribe:R,getState:M,replaceReducer:k},c[Tde]=D,c}function YAe(){for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return s.length===0?function(c){return c}:s.length===1?s[0]:s.reduce(function(c,p){return function(){return c(p.apply(void 0,arguments))}})}function ZAe(i){let s=YAe();return Ade(i.rootReducer,void 0,s)}cR(),tx();var wj=new WeakMap,QAe=(i,s,a)=>{let c=w=>{i.dispatch(lb.replacePersistentState(w))},p=Ide(a),f=()=>i.getState().$persistent;y();let g=()=>{let w=f(),S=wj.get(i);w!==S&&(wj.set(i,w),localStorage.setItem(p,JSON.stringify(w)))};i.subscribe(K0(g,1e3)),window&&window.addEventListener("beforeunload",g);function y(){let w=localStorage.getItem(p);if(w){let S,M=!0;try{S=JSON.parse(w),M=!1}catch{uR.warn("Could not parse Theatre's persisted state. This must be a bug. Please report it.")}finally{M||c(S),s()}}else s()}},JAe=(i,s)=>{let a=Ide(s),c=i.getState().$persistent;localStorage.removeItem(a),wj.set(i,c)};function Ide(i){return i+".persistent"}BQ(),$n(),tp(),Je(),HA();var BR=Mt;Ep(),ti(),Sue();function xj(i){if(typeof i=="boolean"||typeof i=="string"||typeof i=="number")return i;if(F0(i)){let s={},a=!1;for(let[c,p]of Object.entries(i))xj(p)!==void 0&&(s[c]=p,a=!0);if(a)return s}else return}function Rde(i,s,a){for(let[c,p]of Object.entries(i.props))if(p.type==="compound")Rde(p,[...s,c],a);else{if(p.type==="enum")throw new Error("Not yet implemented");a(p,[...s,c])}}function eIe(i,s,a){return{set:(c,p)=>{i();let f=xj(p);if(typeof f>"u")return;let{root:g,path:y}=(0,BR.getPointerParts)(c);if(Dt(g)){let w=g.template.getMapOfValidSequenceTracks_forStudio().getValue(),S=BA(g.template.staticConfig,y);if(!S)throw new Error("Object ".concat(g.address.objectKey," does not have a prop at ").concat(JSON.stringify(y)));let M=(R,A,k)=>{if(R==null)return;if(xj(A.deserializeAndSanitize(R))===void 0)throw new Error("Invalid value ".concat(RV(R)," for object.props").concat(k.map(F=>"[".concat(JSON.stringify(F),"]")).join("")," is invalid"));let D=z(j({},g.address),{pathToProp:k}),O=md(w,k);if(typeof O=="string"){let F=g.sheet.getSequence();F.position=F.closestGridPosition(F.position),s.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(j({},D),{trackId:O,position:F.position,value:R,snappingFunction:F.closestGridPosition,type:"bezier"}))}else s.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(z(j({},D),{value:R}))};if(S.type==="compound"){let R=(0,BR.getPointerParts)(c).path,A=R.length;Rde(S,R,(k,D)=>{let O=D.slice(A),F=Pp(f,O);if(typeof F<"u")M(F,k,D);else throw new Error("Property object.props".concat(D.map(V=>"[".concat(JSON.stringify(V),"]")).join("")," is required but not provided"))})}else{if(S.type==="enum")throw new Error("Enums aren't implemented yet");M(f,S,y)}}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},unset:c=>{i();let{root:p,path:f}=(0,BR.getPointerParts)(c);if(Dt(p)){let g=p.template.getMapOfValidSequenceTracks_forStudio().getValue(),y=Pp(p.template.getDefaultValues().getValue(),f),w=BA(p.template.staticConfig,f),S=(M,R)=>{let A=z(j({},p.address),{pathToProp:R}),k=md(g,R);typeof k=="string"?s.coreByProject.historic.sheetsById.sequence.unsetKeyframeAtPosition(z(j({},A),{trackId:k,position:p.sheet.getSequence().positionSnappedToGrid})):w!==void 0&&s.coreByProject.historic.sheetsById.staticOverrides.byObject.unsetValueOfPrimitiveProp(A)};w.type==="compound"?vt(y,(M,R)=>{S(M,R)},(0,BR.getPointerParts)(c).path):S(y,f)}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},get drafts(){return i(),a},get stateEditors(){return s}}}var tIe=class{constructor(){Pe(this,"_reduxStore"),Pe(this,"_atom"),Pe(this,"atomP"),this._reduxStore=ZAe({rootReducer:DAe,devtoolsOptions:{name:"Theatre.js Studio"}}),this._atom=KAe(this._reduxStore),this.atomP=this._atom.pointer}initialize(i){let s=_j();return i.usePersistentStorage===!0?QAe(this._reduxStore,()=>{this.tempTransaction(({drafts:a})=>{a.ephemeral.initialised=!0}).commit(),s.resolve()},i.persistenceKey):(this.tempTransaction(({drafts:a})=>{a.ephemeral.initialised=!0}).commit(),s.resolve()),s.promise}getState(){return this._reduxStore.getState()}__experimental_clearPersistentStorage(i){return JAe(this._reduxStore,i),this.getState()}__dev_startHistoryFromScratch(i){this._reduxStore.dispatch(lb.historic.startHistoryFromScratch(lb.reduceParts(s=>z(j({},s),{historic:i}))))}tempTransaction(i){let s=OAe(),a,c=s.push(lb.reduceParts(p=>{let f={historic:vj(p.historic),ahistoric:vj(p.ahistoric),ephemeral:vj(p.ephemeral)},g=!0,y=()=>{if(!g)throw new Error("You seem to have called the transaction api after studio.transaction() has finished running")},w=kde(f),S=eIe(y,w,f);try{return i(S),g=!1,{historic:gj(f.historic),ahistoric:gj(f.ahistoric),ephemeral:gj(f.ephemeral)}}catch(M){return a=M,p}finally{kde(void 0)}}));if(this._reduxStore.dispatch(c),a)throw this._reduxStore.dispatch(s.discard()),a;return{commit:()=>{this._reduxStore.dispatch(s.commit())},discard:()=>{this._reduxStore.dispatch(s.discard())}}}undo(){this._reduxStore.dispatch(lb.historic.undo())}redo(){this._reduxStore.dispatch(lb.historic.redo())}createContentOfSaveFile(i){if(!this._reduxStore.getState().$persistent.historic.innerState.coreByProject[i])throw new Error("Project ".concat(i," has not been initialized."));let s=FQ();this.tempTransaction(({stateEditors:c})=>{c.coreByProject.historic.revisionHistory.add({projectId:i,revision:s})}).commit();let a=this._reduxStore.getState().$persistent.historic.innerState.coreByProject[i];return j({},a)}},nIe=Mt,Sj=class{constructor(){Pe(this,"_values",{})}get(i,s){if(this.has(i))return this._values[i];{let a=s();return this._values[i]=a,a}}has(i){return this._values.hasOwnProperty(i)}};$n(),_p(),Fe(),ti(),TV();var rIe=class{constructor(i){Pe(this,"ui",{hide(){me().ui.hide()},get isHidden(){return me().ui.isHidden},restore(){me().ui.restore()},renderToolset(s,a){return me().ui.renderToolset(s,a)}}),Pe(this,"_cache",new Sj),Pe(this,"__experimental",{__experimental_disblePlayPauseKeyboardShortcut(){l2e()},__experimental_enablePlayPauseKeyboardShortcut(){u2e()},__experimental_clearPersistentStorage(s){return me().clearPersistentStorage(s)},__experimental_createContentOfSaveFileTyped(s){return me().createContentOfSaveFile(s)}})}initialize(i){return me().initialize(i)}extend(i,s){me().extend(i,s)}transaction(i){return me().transaction(({set:s,unset:a,stateEditors:c})=>i({set:s,unset:a,__experimental_forgetObject:p=>{if(!wn(p))throw new Error("object in transactionApi.__experimental_forgetObject(object) must be the return type of sheet.object(...)");c.coreByProject.historic.sheetsById.forgetObject(p.address)},__experimental_forgetSheet:p=>{if(!on(p))throw new Error("sheet in transactionApi.__experimental_forgetSheet(sheet) must be the return type of project.sheet()");c.coreByProject.historic.sheetsById.forgetSheet(p.address)}}))}_getSelectionPrism(){return this._cache.get("_getSelectionPrism()",()=>(0,nIe.prism)(()=>bp().filter(i=>i.type==="Theatre_SheetObject"||i.type==="Theatre_Sheet").map(i=>i.publicApi)))}_getSelection(){return this._getSelectionPrism().getValue()}setSelection(i){let s=[...i].filter(a=>wn(a)||on(a)).map(a=>me().corePrivateAPI(a));me().transaction(({stateEditors:a})=>{a.studio.historic.panels.outline.selection.set(s)})}onSelectionChange(i){let s=me();return this._getSelectionPrism().onChange(s.ticker,i,!0)}get selection(){return this._getSelection()}scrub(){return me().scrub()}getStudioProject(){let i=me().core;if(!i)throw new Error("You're calling studio.getStudioProject() before `@theatre/core` is loaded. To fix this:\n1. Check if `@theatre/core` is import/required in your bundle.\n2. Check the stack trace of this error and make sure the funciton that calls getStudioProject() is run after `@theatre/core` is loaded.");return me().getStudioProject(i)}debouncedScrub(i=1e3){let s,a=K0(()=>{let c=s;c&&(s=void 0,c.commit())},i);return{capture:c=>{s||(s=this.scrub());let p=!0;try{s.capture(c),p=!1}finally{if(p){let f=s;s=void 0,f.discard()}else a()}}}}createPane(i){return me().paneManager.createPane(i)}destroyPane(i){return me().paneManager.destroyPane(i)}createContentOfSaveFile(i){return me().createContentOfSaveFile(i)}};kZ();var jv=Mt,iIe=class{constructor(i){this._studio=i,Pe(this,"_cache",new Sj),this._instantiatePanesAsTheyComeIn()}_instantiatePanesAsTheyComeIn(){let i=this._getAllPanes();i.onStale(()=>{i.getValue()})}_getAllPanes(){return this._cache.get("_getAllPanels()",()=>(0,jv.prism)(()=>{if(!(0,jv.val)(this._studio.coreP))return{};let i=(0,jv.val)(this._studio.atomP.historic.panelInstanceDesceriptors),s=(0,jv.val)(this._studio.atomP.ephemeral.extensions.paneClasses),a={};for(let c of Object.values(i)){if(!c)continue;let p=s[c.paneClass];if(!p)continue;let{instanceId:f}=c,{extensionId:g,classDefinition:y}=p,w=jv.prism.memo("instance-".concat(c.instanceId),()=>({extensionId:g,instanceId:f,definition:y}),[y]);a[f]=w}return a}))}get allPanesD(){return this._getAllPanes()}createPane(i){if(!this._studio.core)throw new Error("Can't create a pane because @theatre/core is not yet loaded");let s=(0,jv.val)(this._studio.atomP.ephemeral.extensions.paneClasses[i].extensionId),a=(0,jv.val)(this._studio.atomP.historic.panelInstanceDesceriptors),c;for(let p=1;p<1e3&&(c="".concat(i," #").concat(p),!!a[c]);p++);if(!s)throw new Error('Pane class "'.concat(i,'" is not registered.'));return this._studio.transaction(({drafts:p})=>{p.historic.panelInstanceDesceriptors[c]={instanceId:c,paneClass:i}}),this._getAllPanes().getValue()[c]}destroyPane(i){if(!this._studio.core)throw new Error("Can't do this yet because @theatre/core is not yet loaded");this._studio.transaction(({drafts:s})=>{delete s.historic.panelInstanceDesceriptors[i]})}},UR=Mt;Fe();var Ode=30*60*1e3,oIe=1e3*60*60;function sIe(){return ye(this,null,function*(){let i=me().atomP.ahistoric.visibilityState;if((0,UR.val)(i)==="everythingIsVisible")return;let s=_j(),a=(0,UR.pointerToPrism)(i).onStale(()=>{(0,UR.val)(i)==="everythingIsVisible"&&(a(),s.resolve(void 0))});return s.promise})}function aIe(){return ye(this,null,function*(){if(!"0.7.0".match(/COMPAT/))for(yield VR(500),yield sIe();;){let i=(0,UR.val)(me().atomP.ahistoric.updateChecker);if(i&&i.result!=="error"){let s=i.lastChecked,a=Date.now(),c=Math.abs(a-s);c<Ode&&(yield VR(Ode-c))}try{let s=yield fetch(new Request("https://updates.theatrejs.com/updates/0.7.0"));if(s.ok){let a=yield s.json();if(!lIe(a))throw new Error("Bad response");me().transaction(({drafts:c})=>{c.ahistoric.updateChecker={lastChecked:Date.now(),result:j({},a)}}),yield VR(1e3)}else throw new Error("HTTP Error ".concat(s.statusText))}catch{yield VR(oIe)}}})}var VR=i=>new Promise(s=>setTimeout(s,i));function lIe(i){if(typeof i!="object")return!1;let s=i;return typeof s.hasUpdates!="boolean"?!1:s.hasUpdates===!0&&typeof s.newVersion=="string"&&typeof s.releasePage=="string"||s.hasUpdates===!1}var uIe=Q(yx());function qd(i){return new Promise((s,a)=>{i.oncomplete=i.onsuccess=()=>s(i.result),i.onabort=i.onerror=()=>a(i.error)})}function Dde(i,s){let a=indexedDB.open(i);a.onupgradeneeded=()=>a.result.createObjectStore(s);let c=qd(a);return(p,f)=>c.then(g=>f(g.transaction(s,p).objectStore(s)))}var Ej;function db(){return Ej||(Ej=Dde("keyval-store","keyval")),Ej}function cIe(i,s=db()){return s("readonly",a=>qd(a.get(i)))}function dIe(i,s,a=db()){return a("readwrite",c=>(c.put(s,i),qd(c.transaction)))}function hIe(i,s=db()){return s("readwrite",a=>(a.delete(i),qd(a.transaction)))}function Cj(i,s){return i.openCursor().onsuccess=function(){this.result&&(s(this.result),this.result.continue())},qd(i.transaction)}function pIe(i=db()){return i("readonly",s=>{if(s.getAllKeys)return qd(s.getAllKeys());let a=[];return Cj(s,c=>a.push(c.key)).then(()=>a)})}function fIe(i=db()){return i("readonly",s=>{if(s.getAll)return qd(s.getAll());let a=[];return Cj(s,c=>a.push(c.value)).then(()=>a)})}function mIe(i=db()){return i("readonly",s=>{if(s.getAll&&s.getAllKeys)return Promise.all([qd(s.getAllKeys()),qd(s.getAll())]).then(([c,p])=>c.map((f,g)=>[f,p[g]]));let a=[];return i("readonly",c=>Cj(c,p=>a.push([p.key,p.value])).then(()=>a))})}var vIe=i=>{let s=Dde("theatrejs-".concat(i),"default-store");return{set:(a,c)=>dIe(a,c,s),get:a=>cIe(a,s),del:a=>hIe(a,s),keys:()=>pIe(s),entries:()=>mIe(s),values:()=>fIe(s)}};lee(),IS();var Lde="theatre-0.4",gIe=`You seem to have imported '@theatre/studio' but haven't initialized it. You can initialize the studio by:
\`\`\`
import studio from '@theatre/studio'
studio.initialize()
\`\`\`

* If you didn't mean to import '@theatre/studio', this means that your bundler is not tree-shaking it. This is most likely a bundler misconfiguration.

* If you meant to import '@theatre/studio' without showing its UI, you can do that by running:

\`\`\`
import studio from '@theatre/studio'
studio.initialize()
studio.ui.hide()
\`\`\`
`,yIe="You seem to have imported '@theatre/studio' but called `studio.initialize()` after some delay.\nTheatre.js projects remain in pending mode (won't play their sequences) until the studio is initialized, so you should place the `studio.initialize()` line right after the import line:\n\n```\nimport studio from '@theatre/studio'\n// ... and other imports\n\nstudio.initialize()\n```\n",bIe=class{constructor(){Pe(this,"ui"),Pe(this,"publicApi"),Pe(this,"address"),Pe(this,"_projectsProxy",new TR.PointerProxy(new TR.Atom({}).pointer)),Pe(this,"projectsP",this._projectsProxy.pointer),Pe(this,"_store",new tIe),Pe(this,"_corePrivateApi"),Pe(this,"_cache",new Sj),Pe(this,"paneManager"),Pe(this,"_coreAtom",new TR.Atom({})),Pe(this,"_initializedDeferred",_j()),Pe(this,"_initializeFnCalled",!1),Pe(this,"_didWarnAboutNotInitializing",!1),Pe(this,"_coreBits"),Pe(this,"_rafDriver"),this.address={studioId:yS(10)},this.publicApi=new rIe(this),this.ui=new hAe(this),this._attachToIncomingProjects(),this.paneManager=new iIe(this),typeof window<"u"&&setTimeout(()=>{this._initializeFnCalled||(console.error(gIe),this._didWarnAboutNotInitializing=!0)},100)}get ticker(){if(!this._rafDriver)throw new Error("`studio.ticker` was read before studio.initialize() was called.");return this._rafDriver.ticker}get atomP(){return this._store.atomP}initialize(i){return ye(this,null,function*(){if(!this._coreBits)throw new Error("You seem to have imported `@theatre/studio` without importing `@theatre/core`. Make sure to include an import of `@theatre/core` before calling `studio.initializer()`.");if(this._initializeFnCalled)return this._initializedDeferred.promise;this._initializeFnCalled=!0,this._didWarnAboutNotInitializing&&console.warn(yIe);let s={persistenceKey:Lde,usePersistentStorage:!0};if(typeof(i==null?void 0:i.persistenceKey)=="string"&&(s.persistenceKey=i.persistenceKey),((i==null?void 0:i.usePersistentStorage)===!1||typeof window>"u")&&(s.usePersistentStorage=!1),i!=null&&i.__experimental_rafDriver){if(i.__experimental_rafDriver.type!=="Theatre_RafDriver_PublicAPI")throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` must be either be undefined, or the return type of core.createRafDriver()");let a=this._coreBits.privateAPI(i.__experimental_rafDriver);if(!a)throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` seems to come from a different version of `@theatre/core` than the version that is attached to `@theatre/studio`");this._rafDriver=a}else this._rafDriver=this._coreBits.getCoreRafDriver();try{yield this._store.initialize(s)}catch(a){this._initializedDeferred.reject(a);return}typeof window<"u"&&(yield this.ui.ready),this._initializedDeferred.resolve(),this.ui.render(),aIe().catch(a=>{console.error(a)})})}get initialized(){return this._initializedDeferred.promise}_attachToIncomingProjects(){let i=(0,TR.pointerToPrism)(this.projectsP),s=a=>{for(let c of Object.values(a))c.isAttachedToStudio||c.attachToStudio(this)};i.onStale(()=>{s(i.getValue())}),s(i.getValue())}setCoreBits(i){this._coreBits=i,this._corePrivateApi=i.privateAPI,this._coreAtom.setByPointer(s=>s.core,i.coreExports),this._setProjectsP(i.projectsP)}_setProjectsP(i){this._projectsProxy.setPointer(i)}scrub(){return new cAe(this)}tempTransaction(i){return this._store.tempTransaction(i)}transaction(i){return this.tempTransaction(i).commit()}__dev_startHistoryFromScratch(i){return this._store.__dev_startHistoryFromScratch(i)}get corePrivateAPI(){return this._corePrivateApi}get core(){return this._coreAtom.get().core}get coreP(){return this._coreAtom.pointer.core}extend(i,s){if(!i||typeof i!="object")throw new Error("Extensions must be JS objects");if(typeof i.id!="string")throw new Error("extension.id must be a string");let a=(s==null?void 0:s.__experimental_reconfigure)===!0,c=i.id,p=this._store.getState().ephemeral.extensions.byId[c];if(p&&!a){if(i===p||(0,uIe.default)(i,p))return;throw new Error('Extension id "'.concat(i.id,'" is already defined. If you mean to re-configure the extension, do it like this: studio.extend(extension, {__experimental_reconfigure: true})})'))}this.transaction(({drafts:f})=>{var g,y;f.ephemeral.extensions.byId[i.id]=i;let w=f.ephemeral.extensions.paneClasses;a&&p&&((g=p.panes)==null||g.forEach(S=>{delete w[S.class]})),(y=i.panes)==null||y.forEach(S=>{if(typeof S.class!="string")throw new Error("pane.class must be a string");if(S.class.length<3)throw new Error("pane.class should be a string with 3 or more characters");let M=w[S.class];if(M)if(a&&M.extensionId===i.id)console.warn('Pane class "'.concat(S.class,'" already exists. This is a bug in Theatre.js. Please report it at https://github.com/theatre-js/theatre/issues/new'));else throw new Error('Pane class "'.concat(S.class,'" already exists and is supplied by extension ').concat(M));w[S.class]={extensionId:i.id,classDefinition:S}})})}getStudioProject(i){return this._cache.get("getStudioProject",()=>i.getProject("Studio"))}getExtensionSheet(i,s){return this._cache.get("extensionSheet-"+i,()=>this.getStudioProject(s).sheet("Extension "+i))}undo(){this._store.undo()}redo(){this._store.redo()}createContentOfSaveFile(i){return this._store.createContentOfSaveFile(i)}createAssetStorage(i,s){return ye(this,null,function*(){if(typeof window>"u")return{getAssetUrl:()=>"",createAsset:()=>Promise.resolve(null)};if(!("indexedDB"in window))return console.log("This browser doesn't support IndexedDB."),{getAssetUrl:S=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")},createAsset:S=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")}};let a=vIe("".concat(i.address.projectId,"-assets")),c=NU(i),p=yield a.keys();yield Promise.all(p.map(S=>ye(this,null,function*(){c.includes(S)||(yield a.del(S))}))),yield Promise.all(p.map(S=>ye(this,null,function*(){var M,R;let A="".concat(s,"/").concat(S);try{(yield fetch(A,{method:"HEAD"})).ok&&(yield a.del(S))}catch{AS.error("Failed to access assets","Failed to access assets at ".concat((R=(M=i.config.assets)==null?void 0:M.baseUrl)!=null?R:"/",". This is likely due to a CORS issue."))}})));let f=new Map(yield a.entries()),g=new Map,y=S=>{if(g.has(S))return g.get(S);{let M=URL.createObjectURL(S);return g.set(S,M),M}},w=S=>{let M=f.get(S);if(!M)throw new Error("Asset with id ".concat(S," not found"));return y(M)};return{getAssetUrl:S=>f.has(S)?w(S):"".concat(s,"/").concat(S),createAsset:S=>ye(this,null,function*(){var M,R,A;let k=NU(i),D=!1;if(k.includes(S.name)){let O;try{O=(M=f.get(S.name))!=null?M:yield fetch("".concat(s,"/").concat(S.name)).then(F=>F.ok?F.blob():void 0)}catch{return AS.error("Failed to access assets","Failed to access assets at ".concat((A=(R=i.config.assets)==null?void 0:R.baseUrl)!=null?A:"/",". This is likely due to a CORS issue.")),Promise.resolve(null)}if(O){if(D=yield(yield Promise.resolve().then(()=>Q(lAe()))).default.isEqual(S,O),D)return S.name;{let F=V=>{let W=prompt(V,S.name);return W===null?!1:W===""?F("Asset name cannot be empty. Please choose a different file name for this asset."):k.includes(W)?(console.log(k),F("An asset with this name already exists. Please choose a different file name for this asset.")):(S=new File([S],W,{type:S.type}),!0)};if(!F("An asset with this name already exists. Please choose a different file name for this asset."))return null}}}return f.set(S.name,S),yield a.set(S.name,S),S.name})}})}clearPersistentStorage(i=Lde){this._store.__experimental_clearPersistentStorage(i)}},Pj="__TheatreJS_StudioBundle",_Ie="__TheatreJS_CoreBundle",wIe="__TheatreJS_Notifications",xIe=class{constructor(i){this._studio=i,Pe(this,"_coreBundle")}get type(){return"Theatre_StudioBundle"}registerCoreBundle(i){if(this._coreBundle)throw new Error("StudioBundle.coreBundle is already registered. This is a bug.");this._coreBundle=i;let s;i.getBitsForStudio(this._studio,a=>{s=a}),this._studio.setCoreBits(s)}},SIe=Q(Re());Ne();var Nde,EIe=se.div(Nde||(Nde=G([""]))),CIe=i=>SIe.default.createElement(EIe,null),PIe=CIe;IS();var kj=new bIe;it(kj);var kIe=kj.publicApi,TIe=kIe;MIe();function MIe(){if(typeof window>"u")return;let i=window[Pj];if(typeof i<"u")throw typeof i=="object"&&i&&typeof i.version=="string"?new Error(`It seems that the module '@theatre/studio' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/studio' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(Pj," seems to be already set by a module other than @theatre/core."));let s=new xIe(kj);window[Pj]=s;let a=window[_Ie];a&&a!==null&&a.type==="Theatre_CoreBundle"&&s.registerCoreBundle(a)}typeof window<"u"&&(window[wIe]={notify:AS});/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)

	queue-microtask/index.js:
	  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

	react/cjs/react.production.min.js:
	  (**
	   * @license React
	   * react.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	scheduler/cjs/scheduler.production.min.js:
	  (**
	   * @license React
	   * scheduler.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-dom/cjs/react-dom.production.min.js:
	  (**
	   * @license React
	   * react-dom.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v17.0.2
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v16.13.1
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	jszip/dist/jszip.min.js:
	  (*!
	  
	  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	  <http://stuartk.com/jszip>
	  
	  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
	  
	  JSZip uses the library pako released under the MIT license :
	  https://github.com/nodeca/pako/blob/main/LICENSE
	  *)

	jiff/lib/lcs.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/array.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointerParse.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointer.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/clone.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPatch.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/jiff.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)
	*/})(I3,I3.exports);var X3e=I3.exports;const s_=hye(X3e);class Y3e{constructor(e,n,r){Bi(this,"channel");Bi(this,"components",new Map);Bi(this,"_mode","app");this.editor=n&&document.location.hash.search(r)>-1,n&&(this.channel=new BroadcastChannel(e))}addComponent(e,n){this.components.set(e,n)}dispose(){this.components.forEach(e=>{e.dispose()}),this.components.clear()}send(e){this.channel!==void 0&&this._mode!==e.target&&this.channel.postMessage(e)}listen(e){this.channel!==void 0&&(this.channel.onmessage=n=>{e(n.data)})}get mode(){return this._mode}get editor(){return this._mode==="editor"}set editor(e){e&&(this._mode="editor",document.title+=" - Editor")}}class fL{constructor(e){Bi(this,"app");this.app=e}dispose(){}}class Z3e extends fL{selectDropdown(e,n){this.app.send({event:"selectComponent",target:"app",data:{dropdown:e,value:n}})}updateDropdown(e,n){this.app.send({event:"draggableListUpdate",target:"app",data:{dropdown:e,value:n}})}}var R3={exports:{}};R3.exports;(function(t,e){var n=Object.create,r=Object.defineProperty,o=Object.defineProperties,u=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertyNames,_=Object.getOwnPropertySymbols,x=Object.getPrototypeOf,T=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,N=(v,E,L)=>E in v?r(v,E,{enumerable:!0,configurable:!0,writable:!0,value:L}):v[E]=L,H=(v,E)=>{for(var L in E||(E={}))T.call(E,L)&&N(v,L,E[L]);if(_)for(var L of _(E))I.call(E,L)&&N(v,L,E[L]);return v},Z=(v,E)=>o(v,h(E)),j=(v,E)=>function(){return E||(0,v[m(v)[0]])((E={exports:{}}).exports,E),E.exports},z=(v,E)=>{for(var L in E)r(v,L,{get:E[L],enumerable:!0})},U=(v,E,L,q)=>{if(E&&typeof E=="object"||typeof E=="function")for(let ie of m(E))!T.call(v,ie)&&ie!==L&&r(v,ie,{get:()=>E[ie],enumerable:!(q=u(E,ie))||q.enumerable});return v},C=(v,E,L)=>(L=v!=null?n(x(v)):{},U(E||!v||!v.__esModule?r(L,"default",{value:v,enumerable:!0}):L,v)),K=v=>U(r({},"__esModule",{value:!0}),v),te=(v,E,L)=>(N(v,typeof E!="symbol"?E+"":E,L),L),pe=j({"../node_modules/timing-function/lib/UnitBezier.js"(v,E){E.exports=function(){function L(q,ie,de,Me){this.set(q,ie,de,Me)}return L.prototype.set=function(q,ie,de,Me){this._cx=3*q,this._bx=3*(de-q)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*ie,this._by=3*(Me-ie)-this._cy,this._ay=1-this._cy-this._by},L.epsilon=1e-6,L.prototype._sampleCurveX=function(q){return((this._ax*q+this._bx)*q+this._cx)*q},L.prototype._sampleCurveY=function(q){return((this._ay*q+this._by)*q+this._cy)*q},L.prototype._sampleCurveDerivativeX=function(q){return(3*this._ax*q+2*this._bx)*q+this._cx},L.prototype._solveCurveX=function(q,ie){var de,Me,We,Ke,gt,se;for(We=void 0,Ke=void 0,gt=void 0,se=void 0,de=void 0,Me=void 0,gt=q,Me=0;Me<8;){if(se=this._sampleCurveX(gt)-q,Math.abs(se)<ie)return gt;if(de=this._sampleCurveDerivativeX(gt),Math.abs(de)<ie)break;gt=gt-se/de,Me++}if(We=0,Ke=1,gt=q,gt<We)return We;if(gt>Ke)return Ke;for(;We<Ke;){if(se=this._sampleCurveX(gt),Math.abs(se-q)<ie)return gt;q>se?We=gt:Ke=gt,gt=(Ke-We)*.5+We}return gt},L.prototype.solve=function(q,ie){return this._sampleCurveY(this._solveCurveX(q,ie))},L.prototype.solveSimple=function(q){return this._sampleCurveY(this._solveCurveX(q,1e-6))},L}()}}),Q=j({"../node_modules/levenshtein-edit-distance/index.js"(v,E){var L,q;L=[],q=[];function ie(de,Me,We){var Ke,gt,se,Ne,$t,bn,un,qn;if(de===Me)return 0;if(Ke=de.length,gt=Me.length,Ke===0)return gt;if(gt===0)return Ke;for(We&&(de=de.toLowerCase(),Me=Me.toLowerCase()),un=0;un<Ke;)q[un]=de.charCodeAt(un),L[un]=++un;for(qn=0;qn<gt;)for(se=Me.charCodeAt(qn),Ne=$t=qn++,un=-1;++un<Ke;)bn=se===q[un]?$t:$t+1,$t=L[un],L[un]=Ne=$t>Ne?bn>Ne?Ne+1:bn:bn>$t?$t+1:bn;return Ne}E.exports=ie}}),Se=j({"../node_modules/propose/propose.js"(v,E){var L=Q();function q(){var ie,de,Me,We,Ke,gt=0,se=arguments[0],Ne=arguments[1],$t=Ne.length,bn=arguments[2];bn&&(We=bn.threshold,Ke=bn.ignoreCase),We===void 0&&(We=0);for(var un=0;un<$t;++un)Ke?de=L(se,Ne[un],!0):de=L(se,Ne[un]),de>se.length?ie=1-de/Ne[un].length:ie=1-de/se.length,ie>gt&&(gt=ie,Me=Ne[un]);return gt>=We?Me:null}E.exports=q}}),Pe=j({"../node_modules/fast-deep-equal/index.js"(v,E){E.exports=function L(q,ie){if(q===ie)return!0;if(q&&ie&&typeof q=="object"&&typeof ie=="object"){if(q.constructor!==ie.constructor)return!1;var de,Me,We;if(Array.isArray(q)){if(de=q.length,de!=ie.length)return!1;for(Me=de;Me--!==0;)if(!L(q[Me],ie[Me]))return!1;return!0}if(q.constructor===RegExp)return q.source===ie.source&&q.flags===ie.flags;if(q.valueOf!==Object.prototype.valueOf)return q.valueOf()===ie.valueOf();if(q.toString!==Object.prototype.toString)return q.toString()===ie.toString();if(We=Object.keys(q),de=We.length,de!==Object.keys(ie).length)return!1;for(Me=de;Me--!==0;)if(!Object.prototype.hasOwnProperty.call(ie,We[Me]))return!1;for(Me=de;Me--!==0;){var Ke=We[Me];if(!L(q[Ke],ie[Ke]))return!1}return!0}return q!==q&&ie!==ie}}}),G={};z(G,{createRafDriver:()=>J0,getProject:()=>Ox,notify:()=>ap,onChange:()=>vy,types:()=>px,val:()=>Dx}),t.exports=K(G);var ye={};z(ye,{createRafDriver:()=>J0,getProject:()=>Ox,notify:()=>ap,onChange:()=>vy,types:()=>px,val:()=>Dx});var St=Mt,kt=class{constructor(){te(this,"atom",new St.Atom({projects:{}}))}add(v,E){this.atom.setByPointer(L=>L.projects[v],E)}get(v){return this.atom.get().projects[v]}has(v){return!!this.get(v)}},it=new kt,me=it,lt=new WeakMap;function Fe(v){return lt.get(v)}function vt(v,E){lt.set(v,E)}var Ge=[],mt=Array.isArray,Je=mt,Be=typeof Ai=="object"&&Ai&&Ai.Object===Object&&Ai,nt=Be,Wt=typeof self=="object"&&self&&self.Object===Object&&self,Ut=nt||Wt||Function("return this")(),Dt=Ut,en=Dt.Symbol,on=en,wn=Object.prototype,$n=wn.hasOwnProperty,Yr=wn.toString,xn=on?on.toStringTag:void 0;function et(v){var E=$n.call(v,xn),L=v[xn];try{v[xn]=void 0;var q=!0}catch{}var ie=Yr.call(v);return q&&(E?v[xn]=L:delete v[xn]),ie}var ei=et,Pn=Object.prototype,Sn=Pn.toString;function gn(v){return Sn.call(v)}var Ir=gn,kn="[object Null]",Nn="[object Undefined]",cr=on?on.toStringTag:void 0;function li(v){return v==null?v===void 0?Nn:kn:cr&&cr in Object(v)?ei(v):Ir(v)}var Dr=li;function Ee(v){return v!=null&&typeof v=="object"}var ce=Ee,ut="[object Symbol]";function Vt(v){return typeof v=="symbol"||ce(v)&&Dr(v)==ut}var Ot=Vt,Bt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mn=/^\w*$/;function Ht(v,E){if(Je(v))return!1;var L=typeof v;return L=="number"||L=="symbol"||L=="boolean"||v==null||Ot(v)?!0:mn.test(v)||!Bt.test(v)||E!=null&&v in Object(E)}var pt=Ht;function En(v){var E=typeof v;return v!=null&&(E=="object"||E=="function")}var tn=En,yn="[object AsyncFunction]",rn="[object Function]",Jt="[object GeneratorFunction]",Bn="[object Proxy]";function pr(v){if(!tn(v))return!1;var E=Dr(v);return E==rn||E==Jt||E==yn||E==Bn}var Le=pr,Gt=Dt["__core-js_shared__"],ht=Gt,jt=function(){var v=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}();function qt(v){return!!jt&&jt in v}var Qn=qt,Lr=Function.prototype,Mr=Lr.toString;function es(v){if(v!=null){try{return Mr.call(v)}catch{}try{return v+""}catch{}}return""}var rr=es,Gr=/[\\^$.*+?()[\]{}|]/g,Ar=/^\[object .+?Constructor\]$/,Yc=Function.prototype,Zc=Object.prototype,Qc=Yc.toString,qa=Zc.hasOwnProperty,Jc=RegExp("^"+Qc.call(qa).replace(Gr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wu(v){if(!tn(v)||Qn(v))return!1;var E=Le(v)?Jc:Ar;return E.test(rr(v))}var _a=Wu;function ed(v,E){return v==null?void 0:v[E]}var Dh=ed;function hm(v,E){var L=Dh(v,E);return _a(L)?L:void 0}var _e=hm,tt=_e(Object,"create"),yt=tt;function $e(){this.__data__=yt?yt(null):{},this.size=0}var _t=$e;function Xt(v){var E=this.has(v)&&delete this.__data__[v];return this.size-=E?1:0,E}var pn=Xt,Ln="__lodash_hash_undefined__",Tn=Object.prototype,Kn=Tn.hasOwnProperty;function Mn(v){var E=this.__data__;if(yt){var L=E[v];return L===Ln?void 0:L}return Kn.call(E,v)?E[v]:void 0}var jn=Mn,Nr=Object.prototype,lr=Nr.hasOwnProperty;function Zr(v){var E=this.__data__;return yt?E[v]!==void 0:lr.call(E,v)}var Ss=Zr,Wr="__lodash_hash_undefined__";function Yn(v,E){var L=this.__data__;return this.size+=this.has(v)?0:1,L[v]=yt&&E===void 0?Wr:E,this}var Xa=Yn;function wr(v){var E=-1,L=v==null?0:v.length;for(this.clear();++E<L;){var q=v[E];this.set(q[0],q[1])}}wr.prototype.clear=_t,wr.prototype.delete=pn,wr.prototype.get=jn,wr.prototype.has=Ss,wr.prototype.set=Xa;var Zs=wr;function Ya(){this.__data__=[],this.size=0}var Qs=Ya;function Za(v,E){return v===E||v!==v&&E!==E}var Qr=Za;function ts(v,E){for(var L=v.length;L--;)if(Qr(v[L][0],E))return L;return-1}var Qa=ts,eo=Array.prototype,$u=eo.splice;function Lh(v){var E=this.__data__,L=Qa(E,v);if(L<0)return!1;var q=E.length-1;return L==q?E.pop():$u.call(E,L,1),--this.size,!0}var td=Lh;function pm(v){var E=this.__data__,L=Qa(E,v);return L<0?void 0:E[L][1]}var zl=pm;function fm(v){return Qa(this.__data__,v)>-1}var Nh=fm;function mm(v,E){var L=this.__data__,q=Qa(L,v);return q<0?(++this.size,L.push([v,E])):L[q][1]=E,this}var hw=mm;function Ja(v){var E=-1,L=v==null?0:v.length;for(this.clear();++E<L;){var q=v[E];this.set(q[0],q[1])}}Ja.prototype.clear=Qs,Ja.prototype.delete=td,Ja.prototype.get=zl,Ja.prototype.has=Nh,Ja.prototype.set=hw;var nd=Ja,pw=_e(Dt,"Map"),rd=pw;function t0(){this.size=0,this.__data__={hash:new Zs,map:new(rd||nd),string:new Zs}}var n0=t0;function el(v){var E=typeof v;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?v!=="__proto__":v===null}var r0=el;function fw(v,E){var L=v.__data__;return r0(E)?L[typeof E=="string"?"string":"hash"]:L.map}var id=fw;function vm(v){var E=id(this,v).delete(v);return this.size-=E?1:0,E}var gm=vm;function ym(v){return id(this,v).get(v)}var i0=ym;function o0(v){return id(this,v).has(v)}var s0=o0;function a0(v,E){var L=id(this,v),q=L.size;return L.set(v,E),this.size+=L.size==q?0:1,this}var mw=a0;function Ku(v){var E=-1,L=v==null?0:v.length;for(this.clear();++E<L;){var q=v[E];this.set(q[0],q[1])}}Ku.prototype.clear=n0,Ku.prototype.delete=gm,Ku.prototype.get=i0,Ku.prototype.has=s0,Ku.prototype.set=mw;var od=Ku,vw="Expected a function";function bm(v,E){if(typeof v!="function"||E!=null&&typeof E!="function")throw new TypeError(vw);var L=function(){var q=arguments,ie=E?E.apply(this,q):q[0],de=L.cache;if(de.has(ie))return de.get(ie);var Me=v.apply(this,q);return L.cache=de.set(ie,Me)||de,Me};return L.cache=new(bm.Cache||od),L}bm.Cache=od;var tl=bm,Hl=500;function l0(v){var E=tl(v,function(q){return L.size===Hl&&L.clear(),q}),L=E.cache;return E}var Fh=l0,gw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,yw=/\\(\\)?/g,u0=Fh(function(v){var E=[];return v.charCodeAt(0)===46&&E.push(""),v.replace(gw,function(L,q,ie,de){E.push(ie?de.replace(yw,"$1"):q||L)}),E}),bw=u0;function _w(v,E){for(var L=-1,q=v==null?0:v.length,ie=Array(q);++L<q;)ie[L]=E(v[L],L,v);return ie}var c0=_w,d0=1/0,h0=on?on.prototype:void 0,_m=h0?h0.toString:void 0;function p0(v){if(typeof v=="string")return v;if(Je(v))return c0(v,p0)+"";if(Ot(v))return _m?_m.call(v):"";var E=v+"";return E=="0"&&1/v==-d0?"-0":E}var f0=p0;function m0(v){return v==null?"":f0(v)}var wm=m0;function Bh(v,E){return Je(v)?v:pt(v,E)?[v]:bw(wm(v))}var qu=Bh,v0=1/0;function ww(v){if(typeof v=="string"||Ot(v))return v;var E=v+"";return E=="0"&&1/v==-v0?"-0":E}var Js=ww;function sd(v,E){E=qu(E,v);for(var L=0,q=E.length;v!=null&&L<q;)v=v[Js(E[L++])];return L&&L==q?v:void 0}var ad=sd;function Gl(v,E,L){var q=v==null?void 0:ad(v,E);return q===void 0?L:q}var nl=Gl;function xm(v,E){return E.length===0?v:nl(v,E)}var Wl=class{constructor(){te(this,"_values",{})}get(v,E){if(this.has(v))return this._values[v];{const L=E();return this._values[v]=L,L}}has(v){return this._values.hasOwnProperty(v)}},Hi=Mt,ld=function(){try{var v=_e(Object,"defineProperty");return v({},"",{}),v}catch{}}(),Uh=ld;function xw(v,E,L){E=="__proto__"&&Uh?Uh(v,E,{configurable:!0,enumerable:!0,value:L,writable:!0}):v[E]=L}var $l=xw,rl=Object.prototype,Sm=rl.hasOwnProperty;function Sw(v,E,L){var q=v[E];(!(Sm.call(v,E)&&Qr(q,L))||L===void 0&&!(E in v))&&$l(v,E,L)}var Vh=Sw,Ew=9007199254740991,g0=/^(?:0|[1-9]\d*)$/;function y0(v,E){var L=typeof v;return E=E??Ew,!!E&&(L=="number"||L!="symbol"&&g0.test(v))&&v>-1&&v%1==0&&v<E}var Em=y0;function Cw(v,E,L,q){if(!tn(v))return v;E=qu(E,v);for(var ie=-1,de=E.length,Me=de-1,We=v;We!=null&&++ie<de;){var Ke=Js(E[ie]),gt=L;if(Ke==="__proto__"||Ke==="constructor"||Ke==="prototype")return v;if(ie!=Me){var se=We[Ke];gt=q?q(se,Ke,We):void 0,gt===void 0&&(gt=tn(se)?se:Em(E[ie+1])?[]:{})}Vh(We,Ke,gt),We=We[Ke]}return v}var jh=Cw;function Cm(v,E,L){return v==null?v:jh(v,E,L)}var zh=Cm,Gi=new WeakMap;function Pw(v){return Pm(v)}function Pm(v){if(Gi.has(v))return Gi.get(v);const E=v.type==="compound"?Tm(v):v.type==="enum"?km(v):v.default;return Gi.set(v,E),E}function km(v){const E={$case:v.defaultCase};for(const[L,q]of Object.entries(v.cases))E[L]=Pm(q);return E}function Tm(v){const E={};for(const[L,q]of Object.entries(v.props))E[L]=Pm(q);return E}var Wi=Mt,Hh=C(pe());function kw(v,E,L){return(0,Wi.prism)(()=>{const q=(0,Wi.val)(E);return Wi.prism.memo("driver",()=>q?q.type==="BasicKeyframedTrack"?Gh(v,q,L):(v.logger.error("Track type not yet supported."),(0,Wi.prism)(()=>{})):(0,Wi.prism)(()=>{}),[q]).getValue()})}function Gh(v,E,L){return(0,Wi.prism)(()=>{let q=Wi.prism.ref("state",{started:!1}),ie=q.current;const de=L.getValue();return(!ie.started||de<ie.validFrom||ie.validTo<=de)&&(q.current=ie=Tw(v,L,E)),ie.der.getValue()})}var Wh=(0,Wi.prism)(()=>{});function Tw(v,E,L){const q=E.getValue();if(L.keyframes.length===0)return{started:!0,validFrom:-1/0,validTo:1/0,der:Wh};let ie=0;for(;;){const de=L.keyframes[ie];if(!de)return ui.error;const Me=ie===L.keyframes.length-1;if(q<de.position)return ie===0?ui.beforeFirstKeyframe(de):ui.error;if(de.position===q)return Me?ui.lastKeyframe(de):ui.between(de,L.keyframes[ie+1],E);if(ie===L.keyframes.length-1)return ui.lastKeyframe(de);{const We=ie+1;if(L.keyframes[We].position<=q){ie=We;continue}else return ui.between(de,L.keyframes[ie+1],E)}}}var ui={beforeFirstKeyframe(v){return{started:!0,validFrom:-1/0,validTo:v.position,der:(0,Wi.prism)(()=>({left:v.value,progression:0}))}},lastKeyframe(v){return{started:!0,validFrom:v.position,validTo:1/0,der:(0,Wi.prism)(()=>({left:v.value,progression:0}))}},between(v,E,L){if(!v.connectedRight)return{started:!0,validFrom:v.position,validTo:E.position,der:(0,Wi.prism)(()=>({left:v.value,progression:0}))};const q=de=>(de-v.position)/(E.position-v.position);if(!v.type||v.type==="bezier"){const de=new Hh.default(v.handles[2],v.handles[3],E.handles[0],E.handles[1]),Me=(0,Wi.prism)(()=>{const We=q(L.getValue()),Ke=de.solveSimple(We);return{left:v.value,right:E.value,progression:Ke}});return{started:!0,validFrom:v.position,validTo:E.position,der:Me}}const ie=(0,Wi.prism)(()=>{const de=q(L.getValue()),Me=Math.floor(de);return{left:v.value,right:E.value,progression:Me}});return{started:!0,validFrom:v.position,validTo:E.position,der:ie}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:Wh}};function il(v,E,L){const ie=L.get(v);if(ie&&ie.override===E)return ie.merged;const de=H({},v);for(const Me of Object.keys(E)){const We=E[Me],Ke=v[Me];de[Me]=typeof We=="object"&&typeof Ke=="object"?il(Ke,We,L):We===void 0?Ke:We}return L.set(v,{override:E,merged:de}),de}function ud(v,E){let L=v;for(const q of E)L=L[q];return L}var Xu=Mt,Mm=(v,E)=>{const L=Xu.prism.memo(v,()=>new Xu.Atom(E),[]);return L.set(E),L},xr=Mt,Am=Mt,Mw=/\s/;function $h(v){for(var E=v.length;E--&&Mw.test(v.charAt(E)););return E}var Im=$h,b0=/^\s+/;function Aw(v){return v&&v.slice(0,Im(v)+1).replace(b0,"")}var Yu=Aw,Kh=0/0,Iw=/^[-+]0x[0-9a-f]+$/i,_0=/^0b[01]+$/i,cd=/^0o[0-7]+$/i,Rm=parseInt;function Rw(v){if(typeof v=="number")return v;if(Ot(v))return Kh;if(tn(v)){var E=typeof v.valueOf=="function"?v.valueOf():v;v=tn(E)?E+"":E}if(typeof v!="string")return v===0?v:+v;v=Yu(v);var L=_0.test(v);return L||cd.test(v)?Rm(v.slice(2),L?2:8):Iw.test(v)?Kh:+v}var ee=Rw,ve=1/0,De=17976931348623157e292;function ft(v){if(!v)return v===0?v:0;if(v=ee(v),v===ve||v===-ve){var E=v<0?-1:1;return E*De}return v===v?v:0}var Rn=ft;function dr(v){var E=Rn(v),L=E%1;return E===E?L?E-L:E:0}var to=dr;function Es(v){return v}var w0=Es,Zu=_e(Dt,"WeakMap"),Qu=Zu,ZP=Object.create,BL=function(){function v(){}return function(E){if(!tn(E))return{};if(ZP)return ZP(E);v.prototype=E;var L=new v;return v.prototype=void 0,L}}(),QP=BL;function Ow(v,E){var L=-1,q=v.length;for(E||(E=Array(q));++L<q;)E[L]=v[L];return E}var UL=Ow;function Dw(v,E){for(var L=-1,q=v==null?0:v.length;++L<q&&E(v[L],L,v)!==!1;);return v}var JP=Dw;function ek(v,E,L,q){var ie=!L;L||(L={});for(var de=-1,Me=E.length;++de<Me;){var We=E[de],Ke=q?q(L[We],v[We],We,L,v):void 0;Ke===void 0&&(Ke=v[We]),ie?$l(L,We,Ke):Vh(L,We,Ke)}return L}var Om=ek,x0=9007199254740991;function Lw(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=x0}var Nw=Lw;function tk(v){return v!=null&&Nw(v.length)&&!Le(v)}var nk=tk,Fw=Object.prototype;function Bw(v){var E=v&&v.constructor,L=typeof E=="function"&&E.prototype||Fw;return v===L}var S0=Bw;function Uw(v,E){for(var L=-1,q=Array(v);++L<v;)q[L]=E(L);return q}var rk=Uw,ik="[object Arguments]";function E0(v){return ce(v)&&Dr(v)==ik}var Vw=E0,ok=Object.prototype,sk=ok.hasOwnProperty,ak=ok.propertyIsEnumerable,lk=Vw(function(){return arguments}())?Vw:function(v){return ce(v)&&sk.call(v,"callee")&&!ak.call(v,"callee")},jw=lk;function uk(){return!1}var ck=uk,zw=e&&!e.nodeType&&e,Hw=zw&&!0&&t&&!t.nodeType&&t,dk=Hw&&Hw.exports===zw,Gw=dk?Dt.Buffer:void 0,hk=Gw?Gw.isBuffer:void 0,pk=hk||ck,Dm=pk,fk="[object Arguments]",mk="[object Array]",vk="[object Boolean]",gk="[object Date]",yk="[object Error]",bk="[object Function]",_k="[object Map]",wk="[object Number]",xk="[object Object]",Sk="[object RegExp]",Ek="[object Set]",$r="[object String]",Ck="[object WeakMap]",VL="[object ArrayBuffer]",jL="[object DataView]",C0="[object Float32Array]",Ww="[object Float64Array]",$w="[object Int8Array]",qh="[object Int16Array]",Pk="[object Int32Array]",P0="[object Uint8Array]",kk="[object Uint8ClampedArray]",Kw="[object Uint16Array]",zL="[object Uint32Array]",Fr={};Fr[C0]=Fr[Ww]=Fr[$w]=Fr[qh]=Fr[Pk]=Fr[P0]=Fr[kk]=Fr[Kw]=Fr[zL]=!0,Fr[fk]=Fr[mk]=Fr[VL]=Fr[vk]=Fr[jL]=Fr[gk]=Fr[yk]=Fr[bk]=Fr[_k]=Fr[wk]=Fr[xk]=Fr[Sk]=Fr[Ek]=Fr[$r]=Fr[Ck]=!1;function Tk(v){return ce(v)&&Nw(v.length)&&!!Fr[Dr(v)]}var qw=Tk;function Mk(v){return function(E){return v(E)}}var Xw=Mk,Yw=e&&!e.nodeType&&e,Xh=Yw&&!0&&t&&!t.nodeType&&t,Ak=Xh&&Xh.exports===Yw,Zw=Ak&&nt.process,HL=function(){try{var v=Xh&&Xh.require&&Xh.require("util").types;return v||Zw&&Zw.binding&&Zw.binding("util")}catch{}}(),Ju=HL,Qw=Ju&&Ju.isTypedArray,Ik=Qw?Xw(Qw):qw,Jw=Ik,GL=Object.prototype,WL=GL.hasOwnProperty;function Rk(v,E){var L=Je(v),q=!L&&jw(v),ie=!L&&!q&&Dm(v),de=!L&&!q&&!ie&&Jw(v),Me=L||q||ie||de,We=Me?rk(v.length,String):[],Ke=We.length;for(var gt in v)(E||WL.call(v,gt))&&!(Me&&(gt=="length"||ie&&(gt=="offset"||gt=="parent")||de&&(gt=="buffer"||gt=="byteLength"||gt=="byteOffset")||Em(gt,Ke)))&&We.push(gt);return We}var e1=Rk;function Ok(v,E){return function(L){return v(E(L))}}var Dk=Ok,$L=Dk(Object.keys,Object),k0=$L,t1=Object.prototype,KL=t1.hasOwnProperty;function Lk(v){if(!S0(v))return k0(v);var E=[];for(var L in Object(v))KL.call(v,L)&&L!="constructor"&&E.push(L);return E}var Nk=Lk;function T0(v){return nk(v)?e1(v):Nk(v)}var dd=T0;function Fk(v){var E=[];if(v!=null)for(var L in Object(v))E.push(L);return E}var Yh=Fk,M0=Object.prototype,qL=M0.hasOwnProperty;function Bk(v){if(!tn(v))return Yh(v);var E=S0(v),L=[];for(var q in v)q=="constructor"&&(E||!qL.call(v,q))||L.push(q);return L}var XL=Bk;function YL(v){return nk(v)?e1(v,!0):XL(v)}var A0=YL;function ZL(v,E){for(var L=-1,q=E.length,ie=v.length;++L<q;)v[ie+L]=E[L];return v}var Uk=ZL,Vk=Dk(Object.getPrototypeOf,Object),I0=Vk,jk="[object Object]",zk=Function.prototype,QL=Object.prototype,Hk=zk.toString,Gk=QL.hasOwnProperty,Wk=Hk.call(Object);function $k(v){if(!ce(v)||Dr(v)!=jk)return!1;var E=I0(v);if(E===null)return!0;var L=Gk.call(E,"constructor")&&E.constructor;return typeof L=="function"&&L instanceof L&&Hk.call(L)==Wk}var JL=$k;function eN(v,E,L){var q=-1,ie=v.length;E<0&&(E=-E>ie?0:ie+E),L=L>ie?ie:L,L<0&&(L+=ie),ie=E>L?0:L-E>>>0,E>>>=0;for(var de=Array(ie);++q<ie;)de[q]=v[q+E];return de}var n1=eN;function Kk(v,E,L){var q=v.length;return L=L===void 0?q:L,!E&&L>=q?v:n1(v,E,L)}var tN=Kk,Zh="\\ud800-\\udfff",r1="\\u0300-\\u036f",nN="\\ufe20-\\ufe2f",rN="\\u20d0-\\u20ff",qk=r1+nN+rN,iN="\\ufe0e\\ufe0f",oN="\\u200d",Lm=RegExp("["+oN+Zh+qk+iN+"]");function R0(v){return Lm.test(v)}var i1=R0;function Xk(v){return v.split("")}var Yk=Xk,o1="\\ud800-\\udfff",sN="\\u0300-\\u036f",aN="\\ufe20-\\ufe2f",Zk="\\u20d0-\\u20ff",lN=sN+aN+Zk,uN="\\ufe0e\\ufe0f",Qk="["+o1+"]",s1="["+lN+"]",a1="\\ud83c[\\udffb-\\udfff]",Jk="(?:"+s1+"|"+a1+")",eT="[^"+o1+"]",hd="(?:\\ud83c[\\udde6-\\uddff]){2}",Qh="[\\ud800-\\udbff][\\udc00-\\udfff]",O0="\\u200d",l1=Jk+"?",pd="["+uN+"]?",u1="(?:"+O0+"(?:"+[eT,hd,Qh].join("|")+")"+pd+l1+")*",cN=pd+l1+u1,tT="(?:"+[eT+s1+"?",s1,hd,Qh,Qk].join("|")+")",dN=RegExp(a1+"(?="+a1+")|"+tT+cN,"g");function hN(v){return v.match(dN)||[]}var nT=hN;function pN(v){return i1(v)?nT(v):Yk(v)}var fN=pN;function Nm(v,E,L){return v===v&&(L!==void 0&&(v=v<=L?v:L),E!==void 0&&(v=v>=E?v:E)),v}var D0=Nm;function mN(v,E,L){return L===void 0&&(L=E,E=void 0),L!==void 0&&(L=ee(L),L=L===L?L:0),E!==void 0&&(E=ee(E),E=E===E?E:0),D0(ee(v),E,L)}var c1=mN;function vN(){this.__data__=new nd,this.size=0}var gN=vN;function rT(v){var E=this.__data__,L=E.delete(v);return this.size=E.size,L}var yN=rT;function bN(v){return this.__data__.get(v)}var iT=bN;function _N(v){return this.__data__.has(v)}var wN=_N,oT=200;function xN(v,E){var L=this.__data__;if(L instanceof nd){var q=L.__data__;if(!rd||q.length<oT-1)return q.push([v,E]),this.size=++L.size,this;L=this.__data__=new od(q)}return L.set(v,E),this.size=L.size,this}var Jh=xN;function ol(v){var E=this.__data__=new nd(v);this.size=E.size}ol.prototype.clear=gN,ol.prototype.delete=yN,ol.prototype.get=iT,ol.prototype.has=wN,ol.prototype.set=Jh;var fd=ol;function d1(v,E){return v&&Om(E,dd(E),v)}var sT=d1;function h1(v,E){return v&&Om(E,A0(E),v)}var aT=h1,lT=e&&!e.nodeType&&e,p1=lT&&!0&&t&&!t.nodeType&&t,uT=p1&&p1.exports===lT,cT=uT?Dt.Buffer:void 0,f1=cT?cT.allocUnsafe:void 0;function dT(v,E){if(E)return v.slice();var L=v.length,q=f1?f1(L):new v.constructor(L);return v.copy(q),q}var hT=dT;function pT(v,E){for(var L=-1,q=v==null?0:v.length,ie=0,de=[];++L<q;){var Me=v[L];E(Me,L,v)&&(de[ie++]=Me)}return de}var SN=pT;function EN(){return[]}var Fm=EN,fT=Object.prototype,CN=fT.propertyIsEnumerable,Bm=Object.getOwnPropertySymbols,m1=Bm?function(v){return v==null?[]:(v=Object(v),SN(Bm(v),function(E){return CN.call(v,E)}))}:Fm,v1=m1;function mT(v,E){return Om(v,v1(v),E)}var ep=mT,Um=Object.getOwnPropertySymbols,PN=Um?function(v){for(var E=[];v;)Uk(E,v1(v)),v=I0(v);return E}:Fm,Vm=PN;function g1(v,E){return Om(v,Vm(v),E)}var kN=g1;function md(v,E,L){var q=E(v);return Je(v)?q:Uk(q,L(v))}var tp=md;function TN(v){return tp(v,dd,v1)}var jm=TN;function vT(v){return tp(v,A0,Vm)}var MN=vT,y1=_e(Dt,"DataView"),L0=y1,AN=_e(Dt,"Promise"),N0=AN,gT=_e(Dt,"Set"),b1=gT,_1="[object Map]",yT="[object Object]",bT="[object Promise]",_T="[object Set]",w1="[object WeakMap]",x1="[object DataView]",wT=rr(L0),S1=rr(rd),xT=rr(N0),ST=rr(b1),F0=rr(Qu),ec=Dr;(L0&&ec(new L0(new ArrayBuffer(1)))!=x1||rd&&ec(new rd)!=_1||N0&&ec(N0.resolve())!=bT||b1&&ec(new b1)!=_T||Qu&&ec(new Qu)!=w1)&&(ec=function(v){var E=Dr(v),L=E==yT?v.constructor:void 0,q=L?rr(L):"";if(q)switch(q){case wT:return x1;case S1:return _1;case xT:return bT;case ST:return _T;case F0:return w1}return E});var zm=ec,ET=Object.prototype,CT=ET.hasOwnProperty;function PT(v){var E=v.length,L=new v.constructor(E);return E&&typeof v[0]=="string"&&CT.call(v,"index")&&(L.index=v.index,L.input=v.input),L}var IN=PT,RN=Dt.Uint8Array,Hm=RN;function ON(v){var E=new v.constructor(v.byteLength);return new Hm(E).set(new Hm(v)),E}var E1=ON;function ci(v,E){var L=E?E1(v.buffer):v.buffer;return new v.constructor(L,v.byteOffset,v.byteLength)}var B0=ci,DN=/\w*$/;function kT(v){var E=new v.constructor(v.source,DN.exec(v));return E.lastIndex=v.lastIndex,E}var LN=kT,TT=on?on.prototype:void 0,C1=TT?TT.valueOf:void 0;function NN(v){return C1?Object(C1.call(v)):{}}var FN=NN;function MT(v,E){var L=E?E1(v.buffer):v.buffer;return new v.constructor(L,v.byteOffset,v.length)}var BN=MT,UN="[object Boolean]",AT="[object Date]",VN="[object Map]",jN="[object Number]",IT="[object RegExp]",RT="[object Set]",zN="[object String]",np="[object Symbol]",Gm="[object ArrayBuffer]",OT="[object DataView]",HN="[object Float32Array]",DT="[object Float64Array]",GN="[object Int8Array]",WN="[object Int16Array]",LT="[object Int32Array]",$N="[object Uint8Array]",NT="[object Uint8ClampedArray]",FT="[object Uint16Array]",P1="[object Uint32Array]";function BT(v,E,L){var q=v.constructor;switch(E){case Gm:return E1(v);case UN:case AT:return new q(+v);case OT:return B0(v,L);case HN:case DT:case GN:case WN:case LT:case $N:case NT:case FT:case P1:return BN(v,L);case VN:return new q;case jN:case zN:return new q(v);case IT:return LN(v);case RT:return new q;case np:return FN(v)}}var UT=BT;function KN(v){return typeof v.constructor=="function"&&!S0(v)?QP(I0(v)):{}}var qN=KN,VT="[object Map]";function XN(v){return ce(v)&&zm(v)==VT}var YN=XN,U0=Ju&&Ju.isMap,ZN=U0?Xw(U0):YN,jT=ZN,V0="[object Set]";function QN(v){return ce(v)&&zm(v)==V0}var zT=QN,Wm=Ju&&Ju.isSet,JN=Wm?Xw(Wm):zT,HT=JN,vd=1,GT=2,k1=4,T1="[object Arguments]",M1="[object Array]",A1="[object Boolean]",I1="[object Date]",R1="[object Error]",O1="[object Function]",WT="[object GeneratorFunction]",$T="[object Map]",KT="[object Number]",D1="[object Object]",tc="[object RegExp]",L1="[object Set]",e5="[object String]",qT="[object Symbol]",N1="[object WeakMap]",t5="[object ArrayBuffer]",n5="[object DataView]",XT="[object Float32Array]",YT="[object Float64Array]",r5="[object Int8Array]",i5="[object Int16Array]",ZT="[object Int32Array]",o5="[object Uint8Array]",j0="[object Uint8ClampedArray]",F1="[object Uint16Array]",QT="[object Uint32Array]",Kr={};Kr[T1]=Kr[M1]=Kr[t5]=Kr[n5]=Kr[A1]=Kr[I1]=Kr[XT]=Kr[YT]=Kr[r5]=Kr[i5]=Kr[ZT]=Kr[$T]=Kr[KT]=Kr[D1]=Kr[tc]=Kr[L1]=Kr[e5]=Kr[qT]=Kr[o5]=Kr[j0]=Kr[F1]=Kr[QT]=!0,Kr[R1]=Kr[O1]=Kr[N1]=!1;function $m(v,E,L,q,ie,de){var Me,We=E&vd,Ke=E&GT,gt=E&k1;if(L&&(Me=ie?L(v,q,ie,de):L(v)),Me!==void 0)return Me;if(!tn(v))return v;var se=Je(v);if(se){if(Me=IN(v),!We)return UL(v,Me)}else{var Ne=zm(v),$t=Ne==O1||Ne==WT;if(Dm(v))return hT(v,We);if(Ne==D1||Ne==T1||$t&&!ie){if(Me=Ke||$t?{}:qN(v),!We)return Ke?kN(v,aT(Me,v)):ep(v,sT(Me,v))}else{if(!Kr[Ne])return ie?v:{};Me=UT(v,Ne,We)}}de||(de=new fd);var bn=de.get(v);if(bn)return bn;de.set(v,Me),HT(v)?v.forEach(function(Xn){Me.add($m(Xn,E,L,Xn,v,de))}):jT(v)&&v.forEach(function(Xn,zn){Me.set(zn,$m(Xn,E,L,zn,v,de))});var un=gt?Ke?MN:jm:Ke?A0:dd,qn=se?void 0:un(v);return JP(qn||v,function(Xn,zn){qn&&(zn=Xn,Xn=v[zn]),Vh(Me,zn,$m(Xn,E,L,zn,v,de))}),Me}var s5=$m,a5=1,B1=4;function JT(v){return s5(v,a5|B1)}var l5=JT,eM="__lodash_hash_undefined__";function tM(v){return this.__data__.set(v,eM),this}var U1=tM;function nM(v){return this.__data__.has(v)}var u5=nM;function Km(v){var E=-1,L=v==null?0:v.length;for(this.__data__=new od;++E<L;)this.add(v[E])}Km.prototype.add=Km.prototype.push=U1,Km.prototype.has=u5;var c5=Km;function d5(v,E){for(var L=-1,q=v==null?0:v.length;++L<q;)if(E(v[L],L,v))return!0;return!1}var z0=d5;function V1(v,E){return v.has(E)}var h5=V1,rM=1,iM=2;function oM(v,E,L,q,ie,de){var Me=L&rM,We=v.length,Ke=E.length;if(We!=Ke&&!(Me&&Ke>We))return!1;var gt=de.get(v),se=de.get(E);if(gt&&se)return gt==E&&se==v;var Ne=-1,$t=!0,bn=L&iM?new c5:void 0;for(de.set(v,E),de.set(E,v);++Ne<We;){var un=v[Ne],qn=E[Ne];if(q)var Xn=Me?q(qn,un,Ne,E,v,de):q(un,qn,Ne,v,E,de);if(Xn!==void 0){if(Xn)continue;$t=!1;break}if(bn){if(!z0(E,function(zn,fr){if(!h5(bn,fr)&&(un===zn||ie(un,zn,L,q,de)))return bn.push(fr)})){$t=!1;break}}else if(!(un===qn||ie(un,qn,L,q,de))){$t=!1;break}}return de.delete(v),de.delete(E),$t}var j1=oM;function sM(v){var E=-1,L=Array(v.size);return v.forEach(function(q,ie){L[++E]=[ie,q]}),L}var aM=sM;function lM(v){var E=-1,L=Array(v.size);return v.forEach(function(q){L[++E]=q}),L}var uM=lM,cM=1,dM=2,hM="[object Boolean]",pM="[object Date]",fM="[object Error]",z1="[object Map]",H0="[object Number]",mM="[object RegExp]",p5="[object Set]",f5="[object String]",vM="[object Symbol]",gM="[object ArrayBuffer]",yM="[object DataView]",H1=on?on.prototype:void 0,G1=H1?H1.valueOf:void 0;function m5(v,E,L,q,ie,de,Me){switch(L){case yM:if(v.byteLength!=E.byteLength||v.byteOffset!=E.byteOffset)return!1;v=v.buffer,E=E.buffer;case gM:return!(v.byteLength!=E.byteLength||!de(new Hm(v),new Hm(E)));case hM:case pM:case H0:return Qr(+v,+E);case fM:return v.name==E.name&&v.message==E.message;case mM:case f5:return v==E+"";case z1:var We=aM;case p5:var Ke=q&cM;if(We||(We=uM),v.size!=E.size&&!Ke)return!1;var gt=Me.get(v);if(gt)return gt==E;q|=dM,Me.set(v,E);var se=j1(We(v),We(E),q,ie,de,Me);return Me.delete(v),se;case vM:if(G1)return G1.call(v)==G1.call(E)}return!1}var bM=m5,W1=1,$1=Object.prototype,qm=$1.hasOwnProperty;function _M(v,E,L,q,ie,de){var Me=L&W1,We=jm(v),Ke=We.length,gt=jm(E),se=gt.length;if(Ke!=se&&!Me)return!1;for(var Ne=Ke;Ne--;){var $t=We[Ne];if(!(Me?$t in E:qm.call(E,$t)))return!1}var bn=de.get(v),un=de.get(E);if(bn&&un)return bn==E&&un==v;var qn=!0;de.set(v,E),de.set(E,v);for(var Xn=Me;++Ne<Ke;){$t=We[Ne];var zn=v[$t],fr=E[$t];if(q)var _o=Me?q(fr,zn,$t,E,v,de):q(zn,fr,$t,v,E,de);if(!(_o===void 0?zn===fr||ie(zn,fr,L,q,de):_o)){qn=!1;break}Xn||(Xn=$t=="constructor")}if(qn&&!Xn){var wo=v.constructor,xo=E.constructor;wo!=xo&&"constructor"in v&&"constructor"in E&&!(typeof wo=="function"&&wo instanceof wo&&typeof xo=="function"&&xo instanceof xo)&&(qn=!1)}return de.delete(v),de.delete(E),qn}var K1=_M,wM=1,xM="[object Arguments]",q1="[object Array]",rp="[object Object]",SM=Object.prototype,EM=SM.hasOwnProperty;function CM(v,E,L,q,ie,de){var Me=Je(v),We=Je(E),Ke=Me?q1:zm(v),gt=We?q1:zm(E);Ke=Ke==xM?rp:Ke,gt=gt==xM?rp:gt;var se=Ke==rp,Ne=gt==rp,$t=Ke==gt;if($t&&Dm(v)){if(!Dm(E))return!1;Me=!0,se=!1}if($t&&!se)return de||(de=new fd),Me||Jw(v)?j1(v,E,L,q,ie,de):bM(v,E,Ke,L,q,ie,de);if(!(L&wM)){var bn=se&&EM.call(v,"__wrapped__"),un=Ne&&EM.call(E,"__wrapped__");if(bn||un){var qn=bn?v.value():v,Xn=un?E.value():E;return de||(de=new fd),ie(qn,Xn,L,q,de)}}return $t?(de||(de=new fd),K1(v,E,L,q,ie,de)):!1}var PM=CM;function X1(v,E,L,q,ie){return v===E?!0:v==null||E==null||!ce(v)&&!ce(E)?v!==v&&E!==E:PM(v,E,L,q,X1,ie)}var kM=X1,v5=1,Y1=2;function TM(v,E,L,q){var ie=L.length,de=ie,Me=!q;if(v==null)return!de;for(v=Object(v);ie--;){var We=L[ie];if(Me&&We[2]?We[1]!==v[We[0]]:!(We[0]in v))return!1}for(;++ie<de;){We=L[ie];var Ke=We[0],gt=v[Ke],se=We[1];if(Me&&We[2]){if(gt===void 0&&!(Ke in v))return!1}else{var Ne=new fd;if(q)var $t=q(gt,se,Ke,v,E,Ne);if(!($t===void 0?kM(se,gt,v5|Y1,q,Ne):$t))return!1}}return!0}var g5=TM;function MM(v){return v===v&&!tn(v)}var AM=MM;function y5(v){for(var E=dd(v),L=E.length;L--;){var q=E[L],ie=v[q];E[L]=[q,ie,AM(ie)]}return E}var Z1=y5;function IM(v,E){return function(L){return L==null?!1:L[v]===E&&(E!==void 0||v in Object(L))}}var RM=IM;function OM(v){var E=Z1(v);return E.length==1&&E[0][2]?RM(E[0][0],E[0][1]):function(L){return L===v||g5(L,v,E)}}var b5=OM;function _5(v,E){return v!=null&&E in Object(v)}var DM=_5;function w5(v,E,L){E=qu(E,v);for(var q=-1,ie=E.length,de=!1;++q<ie;){var Me=Js(E[q]);if(!(de=v!=null&&L(v,Me)))break;v=v[Me]}return de||++q!=ie?de:(ie=v==null?0:v.length,!!ie&&Nw(ie)&&Em(Me,ie)&&(Je(v)||jw(v)))}var x5=w5;function LM(v,E){return v!=null&&x5(v,E,DM)}var S5=LM,E5=1,NM=2;function C5(v,E){return pt(v)&&AM(E)?RM(Js(v),E):function(L){var q=nl(L,v);return q===void 0&&q===E?S5(L,v):kM(E,q,E5|NM)}}var P5=C5;function FM(v){return function(E){return E==null?void 0:E[v]}}var Q1=FM;function BM(v){return function(E){return ad(E,v)}}var k5=BM;function T5(v){return pt(v)?Q1(Js(v)):k5(v)}var UM=T5;function M5(v){return typeof v=="function"?v:v==null?w0:typeof v=="object"?Je(v)?P5(v[0],v[1]):b5(v):UM(v)}var A5=M5;function VM(v){return function(E,L,q){for(var ie=-1,de=Object(E),Me=q(E),We=Me.length;We--;){var Ke=Me[v?We:++ie];if(L(de[Ke],Ke,de)===!1)break}return E}}var I5=VM,R5=I5(),jM=R5;function O5(v,E){return v&&jM(v,E,dd)}var D5=O5,ip=function(){return Dt.Date.now()},gd=ip,L5="Expected a function",zM=Math.max,N5=Math.min;function F5(v,E,L){var q,ie,de,Me,We,Ke,gt=0,se=!1,Ne=!1,$t=!0;if(typeof v!="function")throw new TypeError(L5);E=ee(E)||0,tn(L)&&(se=!!L.leading,Ne="maxWait"in L,de=Ne?zM(ee(L.maxWait)||0,E):de,$t="trailing"in L?!!L.trailing:$t);function bn(Br){var So=q,ks=ie;return q=ie=void 0,gt=Br,Me=v.apply(ks,So),Me}function un(Br){return gt=Br,We=setTimeout(zn,E),se?bn(Br):Me}function qn(Br){var So=Br-Ke,ks=Br-gt,ll=E-So;return Ne?N5(ll,de-ks):ll}function Xn(Br){var So=Br-Ke,ks=Br-gt;return Ke===void 0||So>=E||So<0||Ne&&ks>=de}function zn(){var Br=gd();if(Xn(Br))return fr(Br);We=setTimeout(zn,qn(Br))}function fr(Br){return We=void 0,$t&&q?bn(Br):(q=ie=void 0,Me)}function _o(){We!==void 0&&clearTimeout(We),gt=0,q=Ke=ie=We=void 0}function wo(){return We===void 0?Me:fr(gd())}function xo(){var Br=gd(),So=Xn(Br);if(q=arguments,ie=this,Ke=Br,So){if(We===void 0)return un(Ke);if(Ne)return clearTimeout(We),We=setTimeout(zn,E),bn(Ke)}return We===void 0&&(We=setTimeout(zn,E)),Me}return xo.cancel=_o,xo.flush=wo,xo}var HM=F5;function B5(v){var E=v==null?0:v.length;return E?v[E-1]:void 0}var GM=B5;function WM(v,E){return E.length<2?v:ad(v,n1(E,0,-1))}var U5=WM;function V5(v){return typeof v=="number"&&v==to(v)}var J1=V5;function $M(v,E){var L={};return E=A5(E),D5(v,function(q,ie,de){$l(L,ie,E(q,ie,de))}),L}var j5=$M;function KM(v,E){return E=qu(E,v),v=U5(v,E),v==null||delete v[Js(GM(E))]}var z5=KM,qM=9007199254740991,ex=Math.floor;function XM(v,E){var L="";if(!v||E<1||E>qM)return L;do E%2&&(L+=v),E=ex(E/2),E&&(v+=v);while(E);return L}var YM=XM,ZM=Q1("length"),H5=ZM,QM="\\ud800-\\udfff",JM="\\u0300-\\u036f",G5="\\ufe20-\\ufe2f",e2="\\u20d0-\\u20ff",G0=JM+G5+e2,W5="\\ufe0e\\ufe0f",$5="["+QM+"]",W0="["+G0+"]",$0="\\ud83c[\\udffb-\\udfff]",t2="(?:"+W0+"|"+$0+")",K0="[^"+QM+"]",tx="(?:\\ud83c[\\udde6-\\uddff]){2}",n2="[\\ud800-\\udbff][\\udc00-\\udfff]",r2="\\u200d",i2=t2+"?",o2="["+W5+"]?",yd="(?:"+r2+"(?:"+[K0,tx,n2].join("|")+")"+o2+i2+")*",q0=o2+i2+yd,K5="(?:"+[K0+W0+"?",W0,tx,n2,$5].join("|")+")",nx=RegExp($0+"(?="+$0+")|"+K5+q0,"g");function rx(v){for(var E=nx.lastIndex=0;nx.test(v);)++E;return E}var q5=rx;function X5(v){return i1(v)?q5(v):H5(v)}var ix=X5,s2=Math.ceil;function a2(v,E){E=E===void 0?" ":f0(E);var L=E.length;if(L<2)return L?YM(E,v):E;var q=YM(E,s2(v/ix(E)));return i1(E)?tN(fN(q),0,v).join(""):q.slice(0,v)}var Y5=a2;function Z5(v,E,L){v=wm(v),E=to(E);var q=E?ix(v):0;return E&&q<E?Y5(E-q,L)+v:v}var op=Z5;function Q5(v,E){return v==null?!0:z5(v,E)}var l2=Q5,u2=5*1e3,c2=class{constructor(v){te(this,"_cache",new Wl),te(this,"_keepHotUntapDebounce"),vt(this,v)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return Fe(this).propsP}get sheet(){return Fe(this).sheet.publicApi}get project(){return Fe(this).sheet.project.publicApi}get address(){return H({},Fe(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",()=>{const v=Fe(this);return(0,Am.prism)(()=>(0,Am.val)(v.getValues().getValue()))})}onValuesChange(v,E){return vy(this._valuesPrism(),v,E)}get value(){const v=this._valuesPrism();{if(!v.isHot){this._keepHotUntapDebounce!=null&&this._keepHotUntapDebounce.flush();const E=v.keepHot();this._keepHotUntapDebounce=HM(()=>{E(),this._keepHotUntapDebounce=void 0},u2)}this._keepHotUntapDebounce&&this._keepHotUntapDebounce()}return v.getValue()}set initialValue(v){Fe(this).setInitialValue(v)}};function d2(v){const E=new WeakMap;return L=>(E.has(L)||E.set(L,v(L)),E.get(L))}function X0(v){return v.type==="compound"||v.type==="enum"}function ox(v,E){if(!v)return;const[L,...q]=E;if(L===void 0)return v;if(!X0(v))return;const ie=v.type==="enum"?v.cases[L]:v.props[L];return ox(ie,q)}function sx(v){return!X0(v)}var J5=class{constructor(v,E,L){this.sheet=v,this.template=E,this.nativeObject=L,te(this,"$$isPointerToPrismProvider",!0),te(this,"address"),te(this,"publicApi"),te(this,"_initialValue",new xr.Atom({})),te(this,"_cache",new Wl),te(this,"_logger"),te(this,"_internalUtilCtx"),this._logger=v._logger.named("SheetObject",E.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=Z(H({},E.address),{sheetInstanceId:v.address.sheetInstanceId}),this.publicApi=new c2(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",()=>(0,xr.prism)(()=>{const v=(0,xr.val)(this.template.getDefaultValues()),E=(0,xr.val)(this._initialValue.pointer),L=xr.prism.memo("withInitialCache",()=>new WeakMap,[]),q=il(v,E,L),ie=(0,xr.val)(this.template.getStaticValues()),de=xr.prism.memo("withStatics",()=>new WeakMap,[]);let We=il(q,ie,de),Ke;{const se=xr.prism.memo("seq",()=>this.getSequencedValues(),[]),Ne=xr.prism.memo("withSeqsCache",()=>new WeakMap,[]);Ke=(0,xr.val)((0,xr.val)(se)),We=il(We,Ke,Ne)}return Mm("finalAtom",We).pointer}))}getValueByPointer(v){const E=(0,xr.val)(this.getValues()),{path:L}=(0,xr.getPointerParts)(v);return(0,xr.val)(ud(E,L))}pointerToPrism(v){const{path:E}=(0,xr.getPointerParts)(v);return(0,xr.prism)(()=>{const L=(0,xr.val)(this.getValues());return(0,xr.val)(ud(L,E))})}getSequencedValues(){return(0,xr.prism)(()=>{const v=xr.prism.memo("tracksToProcess",()=>this.template.getArrayOfValidSequenceTracks(),[]),E=(0,xr.val)(v),L=new xr.Atom({}),q=(0,xr.val)(this.template.configPointer);return xr.prism.effect("processTracks",()=>{const ie=[];for(const{trackId:de,pathToProp:Me}of E){const We=this._trackIdToPrism(de),Ke=ox(q,Me),gt=Ke.deserializeAndSanitize,se=Ke.interpolate,Ne=()=>{const bn=We.getValue();if(!bn)return L.setByPointer(fr=>ud(fr,Me),void 0);const un=gt(bn.left),qn=un===void 0?Ke.default:un;if(bn.right===void 0)return L.setByPointer(fr=>ud(fr,Me),qn);const Xn=gt(bn.right),zn=Xn===void 0?Ke.default:Xn;return L.setByPointer(fr=>ud(fr,Me),se(qn,zn,bn.progression))},$t=We.onStale(Ne);Ne(),ie.push($t)}return()=>{for(const de of ie)de()}},[q,...E]),L.pointer})}_trackIdToPrism(v){const E=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[v],L=this.sheet.getSequence().positionPrism;return kw(this._internalUtilCtx,E,L)}get propsP(){return this._cache.get("propsP",()=>(0,xr.pointer)({root:this,path:[]}))}validateValue(v,E){}setInitialValue(v){this.validateValue(this.propsP,v),this._initialValue.set(v)}};function qr(v){return function(L,q){return v(L,q())}}var ns={_hmm:Cs(524),_todo:Cs(522),_error:Cs(521),errorDev:Cs(529),errorPublic:Cs(545),_kapow:Cs(268),_warn:Cs(265),warnDev:Cs(273),warnPublic:Cs(289),_debug:Cs(137),debugDev:Cs(145),_trace:Cs(73),traceDev:Cs(81)};function Cs(v){return Object.freeze({audience:nc(v,8)?"internal":nc(v,16)?"dev":"public",category:nc(v,4)?"troubleshooting":nc(v,2)?"todo":"general",level:nc(v,512)?512:nc(v,256)?256:nc(v,128)?128:64})}function nc(v,E){return(v&E)===E}function Sr(v,E){return((E&32)===32?!0:(E&16)===16?v.dev:(E&8)===8?v.internal:!1)&&v.min<=E}var Kl={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(v,E,L){return this.create({names:[...v.names,{name:E,key:L}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(v){if(v.length<5)return v;const E=v.replace(this.collapseOnRE,"");return this.cssMemo.has(E)||this.cssMemo.set(E,this.css(v)),E},css(v){var E,L,q,ie;const de=this.cssMemo.get(v);if(de)return de;let Me="color:".concat((L=(E=this.color)==null?void 0:E.call(this,v))!=null?L:"hsl(".concat((v.charCodeAt(0)+v.charCodeAt(v.length-1))%360,", 100%, 60%)"));return(q=this.bold)!=null&&q.test(v)&&(Me+=";font-weight:600"),(ie=this.italic)!=null&&ie.test(v)&&(Me+=";font-style:italic"),this.cssMemo.set(v,Me),Me}}};function h2(v=console,E={}){const L=Z(H({},Kl),{includes:H({},Kl.includes)}),q={styled:eF.bind(L,v),noStyle:tF.bind(L,v)},ie=p2.bind(L);function de(){return L.loggingConsoleStyle&&L.loggerConsoleStyle?q.styled:q.noStyle}return L.create=de(),{configureLogger(Me){var We;Me==="console"?(L.loggerConsoleStyle=Kl.loggerConsoleStyle,L.create=de()):Me.type==="console"?(L.loggerConsoleStyle=(We=Me.style)!=null?We:Kl.loggerConsoleStyle,L.create=de()):Me.type==="keyed"?(L.creatExt=Ke=>Me.keyed(Ke.names),L.create=ie):Me.type==="named"&&(L.creatExt=bd.bind(null,Me.named),L.create=ie)},configureLogging(Me){var We,Ke,gt,se,Ne;L.includes.dev=(We=Me.dev)!=null?We:Kl.includes.dev,L.includes.internal=(Ke=Me.internal)!=null?Ke:Kl.includes.internal,L.includes.min=(gt=Me.min)!=null?gt:Kl.includes.min,L.include=(se=Me.include)!=null?se:Kl.include,L.loggingConsoleStyle=(Ne=Me.consoleStyle)!=null?Ne:Kl.loggingConsoleStyle,L.create=de()},getLogger(){return L.create({names:[]})}}}function bd(v,E){const L=[];for(let{name:q,key:ie}of E.names)L.push(ie==null?q:"".concat(q," (").concat(ie,")"));return v(L)}function p2(v){const E=H(H({},this.includes),this.include(v)),L=this.filtered,q=this.named.bind(this,v),ie=this.creatExt(v),de=Sr(E,524),Me=Sr(E,522),We=Sr(E,521),Ke=Sr(E,529),gt=Sr(E,545),se=Sr(E,265),Ne=Sr(E,268),$t=Sr(E,273),bn=Sr(E,289),un=Sr(E,137),qn=Sr(E,145),Xn=Sr(E,73),zn=Sr(E,81),fr=de?ie.error.bind(ie,ns._hmm):L.bind(v,524),_o=Me?ie.error.bind(ie,ns._todo):L.bind(v,522),wo=We?ie.error.bind(ie,ns._error):L.bind(v,521),xo=Ke?ie.error.bind(ie,ns.errorDev):L.bind(v,529),Br=gt?ie.error.bind(ie,ns.errorPublic):L.bind(v,545),So=Ne?ie.warn.bind(ie,ns._kapow):L.bind(v,268),ks=se?ie.warn.bind(ie,ns._warn):L.bind(v,265),ll=$t?ie.warn.bind(ie,ns.warnDev):L.bind(v,273),ul=bn?ie.warn.bind(ie,ns.warnPublic):L.bind(v,273),Pd=un?ie.debug.bind(ie,ns._debug):L.bind(v,137),tu=qn?ie.debug.bind(ie,ns.debugDev):L.bind(v,145),kd=Xn?ie.trace.bind(ie,ns._trace):L.bind(v,73),Td=zn?ie.trace.bind(ie,ns.traceDev):L.bind(v,81),Ni={_hmm:fr,_todo:_o,_error:wo,errorDev:xo,errorPublic:Br,_kapow:So,_warn:ks,warnDev:ll,warnPublic:ul,_debug:Pd,debugDev:tu,_trace:kd,traceDev:Td,lazy:{_hmm:de?qr(fr):fr,_todo:Me?qr(_o):_o,_error:We?qr(wo):wo,errorDev:Ke?qr(xo):xo,errorPublic:gt?qr(Br):Br,_kapow:Ne?qr(So):So,_warn:se?qr(ks):ks,warnDev:$t?qr(ll):ll,warnPublic:bn?qr(ul):ul,_debug:un?qr(Pd):Pd,debugDev:qn?qr(tu):tu,_trace:Xn?qr(kd):kd,traceDev:zn?qr(Td):Td},named:q,utilFor:{internal(){return{debug:Ni._debug,error:Ni._error,warn:Ni._warn,trace:Ni._trace,named(Ts,Xr){return Ni.named(Ts,Xr).utilFor.internal()}}},dev(){return{debug:Ni.debugDev,error:Ni.errorDev,warn:Ni.warnDev,trace:Ni.traceDev,named(Ts,Xr){return Ni.named(Ts,Xr).utilFor.dev()}}},public(){return{error:Ni.errorPublic,warn:Ni.warnPublic,debug(Ts,Xr){Ni._warn('(public "debug" filtered out) '.concat(Ts),Xr)},trace(Ts,Xr){Ni._warn('(public "trace" filtered out) '.concat(Ts),Xr)},named(Ts,Xr){return Ni.named(Ts,Xr).utilFor.public()}}}}};return Ni}function eF(v,E){const L=H(H({},this.includes),this.include(E)),q=[];let ie="";for(let Ke=0;Ke<E.names.length;Ke++){const{name:gt,key:se}=E.names[Ke];if(ie+=" %c".concat(gt),q.push(this.style.css(gt)),se!=null){const Ne="%c#".concat(se);ie+=Ne,q.push(this.style.css(Ne))}}const de=this.filtered,Me=this.named.bind(this,E),We=[ie,...q];return m2(de,E,L,v,We,f2(We),Me)}function f2(v){const E=v.slice(0);for(let L=1;L<E.length;L++)E[L]+=";background-color:#e0005a;padding:2px;color:white";return E}function tF(v,E){const L=H(H({},this.includes),this.include(E));let q="";for(let We=0;We<E.names.length;We++){const{name:Ke,key:gt}=E.names[We];q+=" ".concat(Ke),gt!=null&&(q+="#".concat(gt))}const ie=this.filtered,de=this.named.bind(this,E),Me=[q];return m2(ie,E,L,v,Me,Me,de)}function m2(v,E,L,q,ie,de,Me){const We=Sr(L,524),Ke=Sr(L,522),gt=Sr(L,521),se=Sr(L,529),Ne=Sr(L,545),$t=Sr(L,265),bn=Sr(L,268),un=Sr(L,273),qn=Sr(L,289),Xn=Sr(L,137),zn=Sr(L,145),fr=Sr(L,73),_o=Sr(L,81),wo=We?q.error.bind(q,...ie):v.bind(E,524),xo=Ke?q.error.bind(q,...ie):v.bind(E,522),Br=gt?q.error.bind(q,...ie):v.bind(E,521),So=se?q.error.bind(q,...ie):v.bind(E,529),ks=Ne?q.error.bind(q,...ie):v.bind(E,545),ll=bn?q.warn.bind(q,...de):v.bind(E,268),ul=$t?q.warn.bind(q,...ie):v.bind(E,265),Pd=un?q.warn.bind(q,...ie):v.bind(E,273),tu=qn?q.warn.bind(q,...ie):v.bind(E,273),kd=Xn?q.info.bind(q,...ie):v.bind(E,137),Td=zn?q.info.bind(q,...ie):v.bind(E,145),Ni=fr?q.debug.bind(q,...ie):v.bind(E,73),Ts=_o?q.debug.bind(q,...ie):v.bind(E,81),Xr={_hmm:wo,_todo:xo,_error:Br,errorDev:So,errorPublic:ks,_kapow:ll,_warn:ul,warnDev:Pd,warnPublic:tu,_debug:kd,debugDev:Td,_trace:Ni,traceDev:Ts,lazy:{_hmm:We?qr(wo):wo,_todo:Ke?qr(xo):xo,_error:gt?qr(Br):Br,errorDev:se?qr(So):So,errorPublic:Ne?qr(ks):ks,_kapow:bn?qr(ll):ll,_warn:$t?qr(ul):ul,warnDev:un?qr(Pd):Pd,warnPublic:qn?qr(tu):tu,_debug:Xn?qr(kd):kd,debugDev:zn?qr(Td):Td,_trace:fr?qr(Ni):Ni,traceDev:_o?qr(Ts):Ts},named:Me,utilFor:{internal(){return{debug:Xr._debug,error:Xr._error,warn:Xr._warn,trace:Xr._trace,named(cl,Sa){return Xr.named(cl,Sa).utilFor.internal()}}},dev(){return{debug:Xr.debugDev,error:Xr.errorDev,warn:Xr.warnDev,trace:Xr.traceDev,named(cl,Sa){return Xr.named(cl,Sa).utilFor.dev()}}},public(){return{error:Xr.errorPublic,warn:Xr.warnPublic,debug(cl,Sa){Xr._warn('(public "debug" filtered out) '.concat(cl),Sa)},trace(cl,Sa){Xr._warn('(public "trace" filtered out) '.concat(cl),Sa)},named(cl,Sa){return Xr.named(cl,Sa).utilFor.public()}}}}};return Xr}var ax=h2(console,{_debug:function(){},_error:function(){}});ax.configureLogging({dev:!0,min:64});var Y0=ax.getLogger().named("Theatre.js (default logger)").utilFor.dev(),v2=new WeakMap;function g2(v){const E=v2.get(v);if(E)return E;const L=new Map;return v2.set(v,L),y2([],v,L),L}function y2(v,E,L){for(const[q,ie]of Object.entries(E.props))if(!X0(ie)){const de=[...v,q];L.set(JSON.stringify(de),L.size),b2(de,ie,L)}for(const[q,ie]of Object.entries(E.props))if(X0(ie)){const de=[...v,q];L.set(JSON.stringify(de),L.size),b2(de,ie,L)}}function b2(v,E,L){if(E.type==="compound")y2(v,E,L);else{if(E.type==="enum")throw new Error("Enums aren't supported yet");L.set(JSON.stringify(v),L.size)}}function lx(v){return typeof v=="object"&&v!==null&&Object.keys(v).length===0}var nF=class{constructor(v,E,L,q,ie){this.sheetTemplate=v,te(this,"address"),te(this,"type","Theatre_SheetObjectTemplate"),te(this,"_config"),te(this,"_temp_actions_atom"),te(this,"_cache",new Wl),te(this,"project"),te(this,"pointerToSheetState"),te(this,"pointerToStaticOverrides"),this.address=Z(H({},v.address),{objectKey:E}),this._config=new Hi.Atom(q),this._temp_actions_atom=new Hi.Atom(ie),this.project=v.project,this.pointerToSheetState=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],this.pointerToStaticOverrides=this.pointerToSheetState.staticOverrides.byObject[this.address.objectKey]}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(v,E,L){return this._config.set(L),new J5(v,this,E)}reconfigure(v){this._config.set(v)}_temp_setActions(v){this._temp_actions_atom.set(v)}getDefaultValues(){return this._cache.get("getDefaultValues()",()=>(0,Hi.prism)(()=>{const v=(0,Hi.val)(this.configPointer);return Pw(v)}))}getStaticValues(){return this._cache.get("getStaticValues",()=>(0,Hi.prism)(()=>{var v;const E=(v=(0,Hi.val)(this.pointerToStaticOverrides))!=null?v:{};return(0,Hi.val)(this.configPointer).deserializeAndSanitize(E)||{}}))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",()=>(0,Hi.prism)(()=>{const v=this.project.pointers.historic.sheetsById[this.address.sheetId],E=(0,Hi.val)(v.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!E)return Ge;const L=[];if(!E)return Ge;const q=(0,Hi.val)(this.configPointer),ie=Object.entries(E);for(const[Me,We]of ie){const Ke=rF(Me);if(!Ke)continue;const gt=ox(q,Ke);gt&&sx(gt)&&L.push({pathToProp:Ke,trackId:We})}const de=g2(q);return L.sort((Me,We)=>{const Ke=Me.pathToProp,gt=We.pathToProp,se=de.get(JSON.stringify(Ke)),Ne=de.get(JSON.stringify(gt));return se>Ne?1:-1}),L.length===0?Ge:L}))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",()=>(0,Hi.prism)(()=>{const v=(0,Hi.val)(this.getArrayOfValidSequenceTracks());let E={};for(const{pathToProp:L,trackId:q}of v)zh(E,L,q);return E}))}getStaticButNotSequencedOverrides(){return this._cache.get("getStaticButNotSequencedOverrides",()=>(0,Hi.prism)(()=>{const v=(0,Hi.val)(this.getStaticValues()),E=(0,Hi.val)(this.getArrayOfValidSequenceTracks()),L=l5(v);for(const{pathToProp:q}of E){l2(L,q);let ie=q.slice(0,-1);for(;ie.length>0;){const de=xm(L,ie);if(!lx(de))break;l2(L,ie),ie=ie.slice(0,-1)}}if(!lx(L))return L}))}getDefaultsAtPointer(v){const{path:E}=(0,Hi.getPointerParts)(v),L=this.getDefaultValues().getValue();return xm(L,E)}};function rF(v){try{return JSON.parse(v)}catch{Y0.warn("property ".concat(JSON.stringify(v)," cannot be parsed. Skipping."));return}}var ux=Mt,iF=d2(v=>JSON.stringify(v));C(Se());var oF=class extends Error{},sp=class extends oF{},_2=Mt,sF=Mt,w2=Mt,$i=Mt;function ql(){let v,E;const L=new Promise((ie,de)=>{v=Me=>{ie(Me),q.status="resolved"},E=Me=>{de(Me),q.status="rejected"}}),q={resolve:v,reject:E,promise:L,status:"pending"};return q}var aF=()=>{},Z0=aF,x2=Mt,lF=class{constructor(){te(this,"_stopPlayCallback",Z0),te(this,"_state",new x2.Atom({position:0,playing:!1})),te(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=Z0}gotoPosition(v){this._updatePositionInState(v)}_updatePositionInState(v){this._state.setByPointer(E=>E.position,v)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(v){this._state.setByPointer(E=>E.playing,v)}play(v,E,L,q,ie){this.playing&&this.pause(),this.playing=!0;const de=E[1]-E[0];{const $t=this.getCurrentPosition();$t<E[0]||$t>E[1]?q==="normal"||q==="alternate"?this._updatePositionInState(E[0]):(q==="reverse"||q==="alternateReverse")&&this._updatePositionInState(E[1]):q==="normal"||q==="alternate"?$t===E[1]&&this._updatePositionInState(E[0]):$t===E[0]&&this._updatePositionInState(E[1])}const Me=ql(),We=ie.time,Ke=de*v;let gt=this.getCurrentPosition()-E[0];(q==="reverse"||q==="alternateReverse")&&(gt=E[1]-this.getCurrentPosition());const se=$t=>{const un=Math.max($t-We,0)/1e3,qn=Math.min(un*L+gt,Ke);if(qn!==Ke){const Xn=Math.floor(qn/de);let zn=qn/de%1*de;if(q!=="normal")if(q==="reverse")zn=de-zn;else{const fr=Xn%2===0;q==="alternate"?fr||(zn=de-zn):fr&&(zn=de-zn)}this._updatePositionInState(zn+E[0]),Ne()}else{if(q==="normal")this._updatePositionInState(E[1]);else if(q==="reverse")this._updatePositionInState(E[0]);else{const Xn=(v-1)%2===0;q==="alternate"?Xn?this._updatePositionInState(E[1]):this._updatePositionInState(E[0]):Xn?this._updatePositionInState(E[0]):this._updatePositionInState(E[1])}this.playing=!1,Me.resolve(!0)}};this._stopPlayCallback=()=>{ie.offThisOrNextTick(se),ie.offNextTick(se),this.playing&&Me.resolve(!1)};const Ne=()=>ie.onNextTick(se);return ie.onThisOrNextTick(se),Me.promise}playDynamicRange(v,E){this.playing&&this.pause(),this.playing=!0;const L=ql(),q=v.keepHot();L.promise.then(q,q);let ie=E.time;const de=We=>{const Ke=Math.max(We-ie,0);ie=We;const gt=Ke/1e3,se=this.getCurrentPosition(),Ne=v.getValue();if(se<Ne[0]||se>Ne[1])this.gotoPosition(Ne[0]);else{let $t=se+gt;$t>Ne[1]&&($t=Ne[0]+($t-Ne[1])),this.gotoPosition($t)}Me()};this._stopPlayCallback=()=>{E.offThisOrNextTick(de),E.offNextTick(de),L.resolve(!1)};const Me=()=>E.onNextTick(de);return E.onThisOrNextTick(de),L.promise}},S2=Mt,E2="__TheatreJS_StudioBundle",cx="__TheatreJS_CoreBundle",C2="__TheatreJS_Notifications",Xm=v=>(...E)=>{var L;switch(v){case"success":{Y0.debug(E.slice(0,2).join(`
`));break}case"info":{Y0.debug(E.slice(0,2).join(`
`));break}case"warning":{Y0.warn(E.slice(0,2).join(`
`));break}}return typeof window<"u"?(L=window[C2])==null?void 0:L.notify[v](...E):void 0},ap={warning:Xm("warning"),success:Xm("success"),info:Xm("info"),error:Xm("error")};typeof window<"u"&&(window.addEventListener("error",v=>{ap.error("An error occurred","<pre>".concat(v.message,`</pre>

See **console** for details.`))}),window.addEventListener("unhandledrejection",v=>{ap.error("An error occurred","<pre>".concat(v.reason,`</pre>

See **console** for details.`))}));var uF=class{constructor(v,E,L){this._decodedBuffer=v,this._audioContext=E,this._nodeDestination=L,te(this,"_mainGain"),te(this,"_state",new S2.Atom({position:0,playing:!1})),te(this,"statePointer"),te(this,"_stopPlayCallback",Z0),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(v,E){const L=ql();this._playing&&this.pause(),this._playing=!0;let q;const ie=()=>{q==null||q(),q=this._loopInRange(v.getValue(),E).stop},de=v.onStale(ie);return ie(),this._stopPlayCallback=()=>{q==null||q(),de(),L.resolve(!1)},L.promise}_loopInRange(v,E){let q=this.getCurrentPosition();const ie=v[1]-v[0];q<v[0]||q>v[1]?this._updatePositionInState(v[0]):q===v[1]&&this._updatePositionInState(v[0]),q=this.getCurrentPosition();const de=this._audioContext.createBufferSource();de.buffer=this._decodedBuffer,de.connect(this._mainGain),de.playbackRate.value=1,de.loop=!0,de.loopStart=v[0],de.loopEnd=v[1];const Me=E.time;let We=q-v[0];de.start(0,q);const Ke=Ne=>{let qn=(Math.max(Ne-Me,0)/1e3*1+We)/ie%1*ie;this._updatePositionInState(qn+v[0]),gt()},gt=()=>E.onNextTick(Ke);return E.onThisOrNextTick(Ke),{stop:()=>{de.stop(),de.disconnect(),E.offThisOrNextTick(Ke),E.offNextTick(Ke)}}}get _playing(){return this._state.get().playing}set _playing(v){this._state.setByPointer(E=>E.playing,v)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=Z0}gotoPosition(v){this._updatePositionInState(v)}_updatePositionInState(v){this._state.reduce(E=>Z(H({},E),{position:v}))}getCurrentPosition(){return this._state.get().position}play(v,E,L,q,ie){this._playing&&this.pause(),this._playing=!0;let de=this.getCurrentPosition();const Me=E[1]-E[0];if(q!=="normal")throw new sp('Audio-controlled sequences can only be played in the "normal" direction. '+"'".concat(q,"' given."));de<E[0]||de>E[1]?this._updatePositionInState(E[0]):de===E[1]&&this._updatePositionInState(E[0]),de=this.getCurrentPosition();const We=ql(),Ke=this._audioContext.createBufferSource();Ke.buffer=this._decodedBuffer,Ke.connect(this._mainGain),Ke.playbackRate.value=L,v>1e3&&(ap.warning("Can't play sequences with audio more than 1000 times","The sequence will still play, but only 1000 times. The `iterationCount: ".concat(v,"` provided to `sequence.play()`\nis too high for a sequence with audio.\n\nTo fix this, either set `iterationCount` to a lower value, or remove the audio from the sequence."),[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),v=1e3),v>1&&(Ke.loop=!0,Ke.loopStart=E[0],Ke.loopEnd=E[1]);const gt=ie.time;let se=de-E[0];const Ne=Me*v;Ke.start(0,de,Ne-se);const $t=qn=>{const zn=Math.max(qn-gt,0)/1e3,fr=Math.min(zn*L+se,Ne);if(fr!==Ne){let _o=fr/Me%1*Me;this._updatePositionInState(_o+E[0]),un()}else this._updatePositionInState(E[1]),this._playing=!1,bn(),We.resolve(!0)},bn=()=>{Ke.stop(),Ke.disconnect()};this._stopPlayCallback=()=>{bn(),ie.offThisOrNextTick($t),ie.offNextTick($t),this._playing&&We.resolve(!1)};const un=()=>ie.onNextTick($t);return ie.onThisOrNextTick($t),We.promise}},lp=Mt,Q0=0;function J0(v){var E;const L=Me=>{q.tick(Me)},q=new lp.Ticker({onActive(){var Me;(Me=v==null?void 0:v.start)==null||Me.call(v)},onDormant(){var Me;(Me=v==null?void 0:v.stop)==null||Me.call(v)}}),ie={tick:L,id:Q0++,name:(E=v==null?void 0:v.name)!=null?E:"CustomRafDriver-".concat(Q0),type:"Theatre_RafDriver_PublicAPI"},de={type:"Theatre_RafDriver_PrivateAPI",publicApi:ie,ticker:q,start:v==null?void 0:v.start,stop:v==null?void 0:v.stop};return vt(ie,de),ie}function P2(){let v=null;const q=J0({name:"DefaultCoreRafDriver",start:()=>{if(typeof window<"u"){const ie=de=>{q.tick(de),v=window.requestAnimationFrame(ie)};v=window.requestAnimationFrame(ie)}else q.tick(0),setTimeout(()=>q.tick(1),0)},stop:()=>{typeof window<"u"&&v!==null&&window.cancelAnimationFrame(v)}});return q}var ey;function dx(){return ey||k2(P2()),ey}function hx(){return dx().ticker}function k2(v){if(ey)throw new Error("`setCoreRafDriver()` is already called.");ey=Fe(v)}var cF=class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(v){vt(this,v)}play(v){const E=Fe(this);if(E._project.isReady()){const L=v!=null&&v.rafDriver?Fe(v.rafDriver).ticker:hx();return E.play(v??{},L)}else{const L=ql();return L.resolve(!0),L.promise}}pause(){Fe(this).pause()}get position(){return Fe(this).position}set position(v){Fe(this).position=v}__experimental_getKeyframes(v){return Fe(this).getKeyframesOfSimpleProp(v)}async attachAudio(v){const{audioContext:E,destinationNode:L,decodedBuffer:q,gainNode:ie}=await dF(v),de=new uF(q,E,ie);return Fe(this).replacePlaybackController(de),{audioContext:E,destinationNode:L,decodedBuffer:q,gainNode:ie}}get pointer(){return Fe(this).pointer}};async function dF(v){function E(){if(v.audioContext)return Promise.resolve(v.audioContext);const gt=new AudioContext;return gt.state==="running"||typeof window>"u"?Promise.resolve(gt):new Promise(se=>{const Ne=()=>{gt.resume().catch(un=>{console.error(un)})},$t=["mousedown","keydown","touchstart"],bn={capture:!0,passive:!1};$t.forEach(un=>{window.addEventListener(un,Ne,bn)}),gt.addEventListener("statechange",()=>{gt.state==="running"&&($t.forEach(un=>{window.removeEventListener(un,Ne,bn)}),se(gt))})})}async function L(){if(v.source instanceof AudioBuffer)return v.source;const gt=ql();if(typeof v.source!="string")throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let se;try{se=await fetch(v.source)}catch(un){throw console.error(un),new Error("Could not fetch '".concat(v.source,"'. Network error logged above."))}let Ne;try{Ne=await se.arrayBuffer()}catch(un){throw console.error(un),new Error("Could not read '".concat(v.source,"' as an arrayBuffer."))}(await q).decodeAudioData(Ne,gt.resolve,gt.reject);let bn;try{bn=await gt.promise}catch(un){throw console.error(un),new Error("Could not decode ".concat(v.source," as an audio file."))}return bn}const q=E(),ie=L(),[de,Me]=await Promise.all([q,ie]),We=v.destinationNode||de.destination,Ke=de.createGain();return Ke.connect(We),{audioContext:de,decodedBuffer:Me,gainNode:Ke,destinationNode:We}}var T2=M2("Theatre_SheetObject");function M2(v){return E=>typeof E=="object"&&!!E&&E.type===v}var hF=class{constructor(v,E,L,q,ie){this._project=v,this._sheet=E,this._lengthD=L,this._subUnitsPerUnitD=q,te(this,"address"),te(this,"publicApi"),te(this,"_playbackControllerBox"),te(this,"_prismOfStatePointer"),te(this,"_positionD"),te(this,"_positionFormatterD"),te(this,"_playableRangeD"),te(this,"pointer",(0,w2.pointer)({root:this,path:[]})),te(this,"$$isPointerToPrismProvider",!0),te(this,"_logger"),te(this,"closestGridPosition",de=>{const We=1/this.subUnitsPerUnit;return parseFloat((Math.round(de/We)*We).toFixed(3))}),this._logger=v._logger.named("Sheet",E.address.sheetId).named("Instance",E.address.sheetInstanceId),this.address=Z(H({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new cF(this),this._playbackControllerBox=new sF.Atom(ie??new lF),this._prismOfStatePointer=(0,$i.prism)(()=>this._playbackControllerBox.prism.getValue().statePointer),this._positionD=(0,$i.prism)(()=>{const de=this._prismOfStatePointer.getValue();return(0,$i.val)(de.position)}),this._positionFormatterD=(0,$i.prism)(()=>{const de=(0,$i.val)(this._subUnitsPerUnitD);return new pF(de)})}pointerToPrism(v){const{path:E}=(0,_2.getPointerParts)(v);if(E.length===0)return(0,$i.prism)(()=>({length:(0,$i.val)(this.pointer.length),playing:(0,$i.val)(this.pointer.playing),position:(0,$i.val)(this.pointer.position)}));if(E.length>1)return(0,$i.prism)(()=>{});const[L]=E;return L==="length"?this._lengthD:L==="position"?this._positionD:L==="playing"?(0,$i.prism)(()=>(0,$i.val)(this._prismOfStatePointer.getValue().playing)):(0,$i.prism)(()=>{})}getKeyframesOfSimpleProp(v){const{path:E,root:L}=(0,_2.getPointerParts)(v);if(!T2(L))throw new sp("Argument prop must be a pointer to a SheetObject property");const q=(0,$i.val)(this._project.pointers.historic.sheetsById[this._sheet.address.sheetId].sequence.tracksByObject[L.address.objectKey]);if(!q)return[];const{trackData:ie,trackIdByPropPath:de}=q,Me=iF(E),We=de[Me];if(!We)return[];const Ke=ie[We];return Ke?Ke.keyframes:[]}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(v){let E=v;this.pause(),E>this.length&&(E=this.length);const L=this.length;this._playbackControllerBox.get().gotoPosition(E>L?L:E)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,$i.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,$i.prism)(()=>[0,(0,$i.val)(this._lengthD)])}playDynamicRange(v,E){return this._playbackControllerBox.get().playDynamicRange(v,E)}async play(v,E){const L=this.length,q=v&&v.range?v.range:[0,L],ie=v&&typeof v.iterationCount=="number"?v.iterationCount:1,de=v&&typeof v.rate<"u"?v.rate:1,Me=v&&v.direction?v.direction:"normal";return await this._play(ie,[q[0],q[1]],de,Me,E)}_play(v,E,L,q,ie){return this._playbackControllerBox.get().play(v,E,L,q,ie)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(v){this.pause();const E=this._playbackControllerBox.get();this._playbackControllerBox.set(v);const L=E.getCurrentPosition();E.destroy(),v.gotoPosition(L)}},pF=class{constructor(v){this._fps=v}formatSubUnitForGrid(v){const E=v%1,L=1/this._fps;return Math.round(E/L)+"f"}formatFullUnitForGrid(v){let E=v,L="";if(E>=ti){const ie=Math.floor(E/ti);L+=ie+"h",E=E%ti}if(E>=_d){const ie=Math.floor(E/_d);L+=ie+"m",E=E%_d}if(E>=rs){const ie=Math.floor(E/rs);L+=ie+"s",E=E%rs}const q=1/this._fps;if(E>=q){const ie=Math.floor(E/q);L+=ie+"f",E=E%q}return L.length===0?"0s":L}formatForPlayhead(v){let E=v,L="";if(E>=ti){const ie=Math.floor(E/ti);L+=op(ie.toString(),2,"0")+"h",E=E%ti}if(E>=_d){const ie=Math.floor(E/_d);L+=op(ie.toString(),2,"0")+"m",E=E%_d}else L.length>0&&(L+="00m");if(E>=rs){const ie=Math.floor(E/rs);L+=op(ie.toString(),2,"0")+"s",E=E%rs}else L+="00s";const q=1/this._fps;if(E>=q){const ie=Math.round(E/q);L+=op(ie.toString(),2,"0")+"f",E=E%q}else E/q>.98?(L+=op(1 .toString(),2,"0")+"f",E=E%q):L+="00f";return L.length===0?"00s00f":L}formatBasic(v){return v.toFixed(2)+"s"}},rs=1,_d=rs*60,ti=_d*60,px={};z(px,{boolean:()=>yx,compound:()=>Yl,file:()=>Wn,image:()=>wa,number:()=>Ym,rgba:()=>hn,string:()=>N2,stringLiteral:()=>B2});function A2(v,E){return v.length<=E?v:v.substr(0,E-3)+"..."}var Re=v=>typeof v=="string"?'string("'.concat(A2(v,10),'")'):typeof v=="number"?"number(".concat(A2(String(v),10),")"):v===null?"null":v===void 0?"undefined":typeof v=="boolean"?String(v):Array.isArray(v)?"array":typeof v=="object"?"object":"unknown",I2=Re;function fF(v,{removeAlphaIfOpaque:E=!1}={}){const L=(v.a*255|256).toString(16).slice(1),q=(v.r*255|256).toString(16).slice(1)+(v.g*255|256).toString(16).slice(1)+(v.b*255|256).toString(16).slice(1)+(E&&L==="ff"?"":L);return"#".concat(q)}function fx(v){return Z(H({},v),{toString(){return fF(this,{removeAlphaIfOpaque:!0})}})}function Xl(v){return Object.fromEntries(Object.entries(v).map(([E,L])=>[E,c1(L,0,1)]))}function mF(v){function E(L){return L>=.0031308?1.055*L**(1/2.4)-.055:12.92*L}return Xl({r:E(v.r),g:E(v.g),b:E(v.b),a:v.a})}function Un(v){function E(L){return L>=.04045?((L+.055)/(1+.055))**2.4:L/12.92}return{r:E(v.r),g:E(v.g),b:E(v.b),a:v.a}}function R2(v){let E=.4122214708*v.r+.5363325363*v.g+.0514459929*v.b,L=.2119034982*v.r+.6806995451*v.g+.1073969566*v.b,q=.0883024619*v.r+.2817188376*v.g+.6299787005*v.b,ie=Math.cbrt(E),de=Math.cbrt(L),Me=Math.cbrt(q);return{L:.2104542553*ie+.793617785*de-.0040720468*Me,a:1.9779984951*ie-2.428592205*de+.4505937099*Me,b:.0259040371*ie+.7827717662*de-.808675766*Me,alpha:v.a}}function ty(v){let E=v.L+.3963377774*v.a+.2158037573*v.b,L=v.L-.1055613458*v.a-.0638541728*v.b,q=v.L-.0894841775*v.a-1.291485548*v.b,ie=E*E*E,de=L*L*L,Me=q*q*q;return{r:4.0767416621*ie-3.3077115913*de+.2309699292*Me,g:-1.2684380046*ie+2.6097574011*de-.3413193965*Me,b:-.0041960863*ie-.7034186147*de+1.707614701*Me,a:v.alpha}}var ea=Symbol("TheatrePropType_Basic");function mx(v){return typeof v=="object"&&!!v&&v[ea]==="TheatrePropType"}function rc(v){if(typeof v=="number")return Ym(v);if(typeof v=="boolean")return yx(v);if(typeof v=="string")return N2(v);if(typeof v=="object"&&v){if(mx(v))return v;if(JL(v))return Yl(v);throw new sp("This value is not a valid prop type: ".concat(I2(v)))}else throw new sp("This value is not a valid prop type: ".concat(I2(v)))}function O2(v){const E={};for(const L of Object.keys(v)){const q=v[L];mx(q)?E[L]=q:E[L]=rc(q)}return E}var Yl=(v,E={})=>{const L=O2(v),q=new WeakMap;return{type:"compound",props:L,valueType:null,[ea]:"TheatrePropType",label:E.label,default:j5(L,de=>de.default),deserializeAndSanitize:de=>{if(typeof de!="object"||!de)return;if(q.has(de))return q.get(de);const Me={};let We=!1;for(const[Ke,gt]of Object.entries(L))if(Object.prototype.hasOwnProperty.call(de,Ke)){const se=gt.deserializeAndSanitize(de[Ke]);se!=null&&(We=!0,Me[Ke]=se)}if(q.set(de,Me),We)return Me}}},Wn=(v,E={})=>{const L=(q,ie,de)=>{var Me;return{type:"file",id:((Me=E.interpolate)!=null?Me:cp)(q.id,ie.id,de)}};return{type:"file",default:{type:"file",id:v},valueType:null,[ea]:"TheatrePropType",label:E.label,interpolate:L,deserializeAndSanitize:vx}},vx=v=>{if(!v)return;let E=!0;if(typeof v.id!="string"&&![null,void 0].includes(v.id)&&(E=!1),v.type!=="file"&&(E=!1),!!E)return v},wa=(v,E={})=>{const L=(q,ie,de)=>{var Me;return{type:"image",id:((Me=E.interpolate)!=null?Me:cp)(q.id,ie.id,de)}};return{type:"image",default:{type:"image",id:v},valueType:null,[ea]:"TheatrePropType",label:E.label,interpolate:L,deserializeAndSanitize:up}},up=v=>{if(!v)return;let E=!0;if(typeof v.id!="string"&&![null,void 0].includes(v.id)&&(E=!1),v.type!=="image"&&(E=!1),!!E)return v},Ym=(v,E={})=>{var L;return Z(H({type:"number",valueType:0,default:v,[ea]:"TheatrePropType"},E||{}),{label:E.label,nudgeFn:(L=E.nudgeFn)!=null?L:bF,nudgeMultiplier:typeof E.nudgeMultiplier=="number"?E.nudgeMultiplier:void 0,interpolate:gx,deserializeAndSanitize:D2(E.range)})},D2=v=>v?E=>{if(typeof E=="number"&&isFinite(E))return c1(E,v[0],v[1])}:L2,L2=v=>typeof v=="number"&&isFinite(v)?v:void 0,gx=(v,E,L)=>v+L*(E-v),hn=(v={r:0,g:0,b:0,a:1},E={})=>{const L={};for(const q of["r","g","b","a"])L[q]=Math.min(Math.max(v[q],0),1);return{type:"rgba",valueType:null,default:fx(L),[ea]:"TheatrePropType",label:E.label,interpolate:gF,deserializeAndSanitize:vF}},vF=v=>{if(!v)return;let E=!0;for(const q of["r","g","b","a"])(!Object.prototype.hasOwnProperty.call(v,q)||typeof v[q]!="number")&&(E=!1);if(!E)return;const L={};for(const q of["r","g","b","a"])L[q]=Math.min(Math.max(v[q],0),1);return fx(L)},gF=(v,E,L)=>{const q=R2(Un(v)),ie=R2(Un(E)),de={L:(1-L)*q.L+L*ie.L,a:(1-L)*q.a+L*ie.a,b:(1-L)*q.b+L*ie.b,alpha:(1-L)*q.alpha+L*ie.alpha},Me=mF(ty(de));return fx(Me)},yx=(v,E={})=>{var L;return{type:"boolean",default:v,valueType:null,[ea]:"TheatrePropType",label:E.label,interpolate:(L=E.interpolate)!=null?L:cp,deserializeAndSanitize:yF}},yF=v=>typeof v=="boolean"?v:void 0;function cp(v){return v}var N2=(v,E={})=>{var L;return{type:"string",default:v,valueType:null,[ea]:"TheatrePropType",label:E.label,interpolate:(L=E.interpolate)!=null?L:cp,deserializeAndSanitize:F2}};function F2(v){return typeof v=="string"?v:void 0}function B2(v,E,L={}){var q,ie;return{type:"stringLiteral",default:v,valuesAndLabels:H({},E),[ea]:"TheatrePropType",valueType:null,as:(q=L.as)!=null?q:"menu",label:L.label,interpolate:(ie=L.interpolate)!=null?ie:cp,deserializeAndSanitize(de){if(typeof de=="string"&&Object.prototype.hasOwnProperty.call(E,de))return de}}}var bF=({config:v,deltaX:E,deltaFraction:L,magnitude:q})=>{var ie;const{range:de}=v;return!v.nudgeMultiplier&&de&&!de.includes(1/0)&&!de.includes(-1/0)?L*(de[1]-de[0])*q:E*q*((ie=v.nudgeMultiplier)!=null?ie:1)},_F=v=>v.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");function ny(v,E){return _F(v)}C(Pe());var wF=class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(v){vt(this,v)}object(v,E,L){const q=Fe(this),ie=ny(v),de=q.getObject(ie),Me=null,We=L==null?void 0:L.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(de)return We&&de.template._temp_setActions(We),de.publicApi;{const Ke=Yl(E);return q.createObject(ie,Me,Ke,We).publicApi}}get sequence(){return Fe(this).getSequence().publicApi}get project(){return Fe(this).project.publicApi}get address(){return H({},Fe(this).address)}detachObject(v){const E=Fe(this),L=ny(v);if(!E.getObject(L)){ap.warning(`Couldn't delete object "`.concat(L,'"'),'There is no object with key "'.concat(L,`".

To fix this, make sure you are calling \`sheet.deleteObject("`).concat(L,'")` with the correct key.')),console.warn('Object key "'.concat(L,'" does not exist.'));return}E.deleteObject(L)}},dp=Mt,U2=class{constructor(v,E){this.template=v,this.instanceId=E,te(this,"_objects",new dp.Atom({})),te(this,"_sequence"),te(this,"address"),te(this,"publicApi"),te(this,"project"),te(this,"objectsP",this._objects.pointer),te(this,"type","Theatre_Sheet"),te(this,"_logger"),this._logger=v.project._logger.named("Sheet",E),this._logger._trace("creating sheet"),this.project=v.project,this.address=Z(H({},v.address),{sheetInstanceId:this.instanceId}),this.publicApi=new wF(this)}createObject(v,E,L,q={}){const de=this.template.getObjectTemplate(v,E,L,q).createInstance(this,E,L);return this._objects.setByPointer(Me=>Me[v],de),de}getObject(v){return this._objects.get()[v]}deleteObject(v){this._objects.reduce(E=>{const L=H({},E);return delete L[v],L})}getSequence(){if(!this._sequence){const v=(0,dp.prism)(()=>{const L=(0,dp.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length);return bx(L)}),E=(0,dp.prism)(()=>{const L=(0,dp.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit);return xF(L)});this._sequence=new hF(this.template.project,this,v,E)}return this._sequence}},bx=v=>typeof v=="number"&&isFinite(v)&&v>0?v:10,xF=v=>typeof v=="number"&&J1(v)&&v>=1&&v<=1e3?v:30,SF=class{constructor(v,E){this.project=v,te(this,"type","Theatre_SheetTemplate"),te(this,"address"),te(this,"_instances",new ux.Atom({})),te(this,"instancesP",this._instances.pointer),te(this,"_objectTemplates",new ux.Atom({})),te(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=Z(H({},v.address),{sheetId:E})}getInstance(v){let E=this._instances.get()[v];return E||(E=new U2(this,v),this._instances.setByPointer(L=>L[v],E)),E}getObjectTemplate(v,E,L,q){let ie=this._objectTemplates.get()[v];return ie||(ie=new nF(this,v,E,L,q),this._objectTemplates.setByPointer(de=>de[v],ie)),ie}},_x=Mt,V2=Mt,xa=v=>new Promise(E=>setTimeout(E,v)),Zm=xa;function Ps(v){for(var E=arguments.length,L=Array(E>1?E-1:0),q=1;q<E;q++)L[q-1]=arguments[q];throw Error("[Immer] minified error nr: "+v+(L.length?" "+L.map(function(ie){return"'"+ie+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Zl(v){return!!v&&!!v[Fo]}function Lo(v){return!!v&&(function(E){if(!E||typeof E!="object")return!1;var L=Object.getPrototypeOf(E);if(L===null)return!0;var q=Object.hasOwnProperty.call(L,"constructor")&&L.constructor;return q===Object||typeof q=="function"&&Function.toString.call(q)===$2}(v)||Array.isArray(v)||!!v[dy]||!!v.constructor[dy]||Ql(v)||No(v))}function wx(v){return Zl(v)||Ps(23,v),v[Fo].t}function hp(v,E,L){L===void 0&&(L=!1),wd(v)===0?(L?Object.keys:hy)(v).forEach(function(q){L&&typeof q=="symbol"||E(q,v[q],v)}):v.forEach(function(q,ie){return E(ie,q,v)})}function wd(v){var E=v[Fo];return E?E.i>3?E.i-4:E.i:Array.isArray(v)?1:Ql(v)?2:No(v)?3:0}function Qm(v,E){return wd(v)===2?v.has(E):Object.prototype.hasOwnProperty.call(v,E)}function j2(v,E){return wd(v)===2?v.get(E):v[E]}function xx(v,E,L){var q=wd(v);q===2?v.set(E,L):q===3?(v.delete(E),v.add(L)):v[E]=L}function z2(v,E){return v===E?v!==0||1/v==1/E:v!=v&&E!=E}function Ql(v){return G2&&v instanceof Map}function No(v){return W2&&v instanceof Set}function Jl(v){return v.o||v.t}function pp(v){if(Array.isArray(v))return Array.prototype.slice.call(v);var E=kx(v);delete E[Fo];for(var L=hy(E),q=0;q<L.length;q++){var ie=L[q],de=E[ie];de.writable===!1&&(de.writable=!0,de.configurable=!0),(de.get||de.set)&&(E[ie]={configurable:!0,writable:!0,enumerable:de.enumerable,value:v[ie]})}return Object.create(Object.getPrototypeOf(v),E)}function Sx(v,E){return E===void 0&&(E=!1),ry(v)||Zl(v)||!Lo(v)||(wd(v)>1&&(v.set=v.add=v.clear=v.delete=H2),Object.freeze(v),E&&hp(v,function(L,q){return Sx(q,!0)},!0)),v}function H2(){Ps(2)}function ry(v){return v==null||typeof v!="object"||Object.isFrozen(v)}function sl(v){var E=K2[v];return E||Ps(18,v),E}function iy(){return vp}function di(v,E){E&&(sl("Patches"),v.u=[],v.s=[],v.v=E)}function Jm(v){oy(v),v.p.forEach(ay),v.p=null}function oy(v){v===vp&&(vp=v.l)}function sy(v){return vp={p:[],l:vp,h:v,m:!0,_:0}}function ay(v){var E=v[Fo];E.i===0||E.i===1?E.j():E.O=!0}function xd(v,E){E._=E.p.length;var L=E.p[0],q=v!==void 0&&v!==L;return E.h.g||sl("ES5").S(E,v,q),q?(L[Fo].P&&(Jm(E),Ps(4)),Lo(v)&&(v=ta(E,v),E.l||Sd(E,v)),E.u&&sl("Patches").M(L[Fo],v,E.u,E.s)):v=ta(E,L,[]),Jm(E),E.u&&E.v(E.u,E.s),v!==ev?v:void 0}function ta(v,E,L){if(ry(E))return E;var q=E[Fo];if(!q)return hp(E,function(de,Me){return al(v,q,E,de,Me,L)},!0),E;if(q.A!==v)return E;if(!q.P)return Sd(v,q.t,!0),q.t;if(!q.I){q.I=!0,q.A._--;var ie=q.i===4||q.i===5?q.o=pp(q.k):q.o;hp(q.i===3?new Set(ie):ie,function(de,Me){return al(v,q,ie,de,Me,L)}),Sd(v,ie,!1),L&&v.u&&sl("Patches").R(q,L,v.u,v.s)}return q.o}function al(v,E,L,q,ie,de){if(Zl(ie)){var Me=ta(v,ie,de&&E&&E.i!==3&&!Qm(E.D,q)?de.concat(q):void 0);if(xx(L,q,Me),!Zl(Me))return;v.m=!1}if(Lo(ie)&&!ry(ie)){if(!v.h.F&&v._<1)return;ta(v,ie),E&&E.A.l||Sd(v,ie)}}function Sd(v,E,L){L===void 0&&(L=!1),v.h.F&&v.m&&Sx(E,L)}function ly(v,E){var L=v[Fo];return(L?Jl(L):v)[E]}function Ex(v,E){if(E in v)for(var L=Object.getPrototypeOf(v);L;){var q=Object.getOwnPropertyDescriptor(L,E);if(q)return q;L=Object.getPrototypeOf(L)}}function uy(v){v.P||(v.P=!0,v.l&&uy(v.l))}function Ed(v){v.o||(v.o=pp(v.t))}function Cd(v,E,L){var q=Ql(E)?sl("MapSet").N(E,L):No(E)?sl("MapSet").T(E,L):v.g?function(ie,de){var Me=Array.isArray(ie),We={i:Me?1:0,A:de?de.A:iy(),P:!1,I:!1,D:{},l:de,t:ie,k:null,o:null,j:null,C:!1},Ke=We,gt=eu;Me&&(Ke=[We],gt=tv);var se=Proxy.revocable(Ke,gt),Ne=se.revoke,$t=se.proxy;return We.k=$t,We.j=Ne,$t}(E,L):sl("ES5").J(E,L);return(L?L.A:iy()).p.push(q),q}function fp(v){return Zl(v)||Ps(22,v),function E(L){if(!Lo(L))return L;var q,ie=L[Fo],de=wd(L);if(ie){if(!ie.P&&(ie.i<4||!sl("ES5").K(ie)))return ie.t;ie.I=!0,q=mp(L,de),ie.I=!1}else q=mp(L,de);return hp(q,function(Me,We){ie&&j2(ie.t,Me)===We||xx(q,Me,E(We))}),de===3?new Set(q):q}(v)}function mp(v,E){switch(E){case 2:return new Map(v);case 3:return Array.from(v)}return pp(v)}var Cx,vp,cy=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",G2=typeof Map<"u",W2=typeof Set<"u",Px=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",ev=cy?Symbol.for("immer-nothing"):((Cx={})["immer-nothing"]=!0,Cx),dy=cy?Symbol.for("immer-draftable"):"__$immer_draftable",Fo=cy?Symbol.for("immer-state"):"__$immer_state",$2=""+Object.prototype.constructor,hy=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:Object.getOwnPropertyNames,kx=Object.getOwnPropertyDescriptors||function(v){var E={};return hy(v).forEach(function(L){E[L]=Object.getOwnPropertyDescriptor(v,L)}),E},K2={},eu={get:function(v,E){if(E===Fo)return v;var L=Jl(v);if(!Qm(L,E))return function(ie,de,Me){var We,Ke=Ex(de,Me);return Ke?"value"in Ke?Ke.value:(We=Ke.get)===null||We===void 0?void 0:We.call(ie.k):void 0}(v,L,E);var q=L[E];return v.I||!Lo(q)?q:q===ly(v.t,E)?(Ed(v),v.o[E]=Cd(v.A.h,q,v)):q},has:function(v,E){return E in Jl(v)},ownKeys:function(v){return Reflect.ownKeys(Jl(v))},set:function(v,E,L){var q=Ex(Jl(v),E);if(q!=null&&q.set)return q.set.call(v.k,L),!0;if(!v.P){var ie=ly(Jl(v),E),de=ie==null?void 0:ie[Fo];if(de&&de.t===L)return v.o[E]=L,v.D[E]=!1,!0;if(z2(L,ie)&&(L!==void 0||Qm(v.t,E)))return!0;Ed(v),uy(v)}return v.o[E]===L&&typeof L!="number"&&(L!==void 0||E in v.o)||(v.o[E]=L,v.D[E]=!0,!0)},deleteProperty:function(v,E){return ly(v.t,E)!==void 0||E in v.t?(v.D[E]=!1,Ed(v),uy(v)):delete v.D[E],v.o&&delete v.o[E],!0},getOwnPropertyDescriptor:function(v,E){var L=Jl(v),q=Reflect.getOwnPropertyDescriptor(L,E);return q&&{writable:!0,configurable:v.i!==1||E!=="length",enumerable:q.enumerable,value:L[E]}},defineProperty:function(){Ps(11)},getPrototypeOf:function(v){return Object.getPrototypeOf(v.t)},setPrototypeOf:function(){Ps(12)}},tv={};hp(eu,function(v,E){tv[v]=function(){return arguments[0]=arguments[0][0],E.apply(this,arguments)}}),tv.deleteProperty=function(v,E){return eu.deleteProperty.call(this,v[0],E)},tv.set=function(v,E,L){return eu.set.call(this,v[0],E,L,v[0])};var Tx=function(){function v(L){var q=this;this.g=Px,this.F=!0,this.produce=function(ie,de,Me){if(typeof ie=="function"&&typeof de!="function"){var We=de;de=ie;var Ke=q;return function(bn){var un=this;bn===void 0&&(bn=We);for(var qn=arguments.length,Xn=Array(qn>1?qn-1:0),zn=1;zn<qn;zn++)Xn[zn-1]=arguments[zn];return Ke.produce(bn,function(fr){var _o;return(_o=de).call.apply(_o,[un,fr].concat(Xn))})}}var gt;if(typeof de!="function"&&Ps(6),Me!==void 0&&typeof Me!="function"&&Ps(7),Lo(ie)){var se=sy(q),Ne=Cd(q,ie,void 0),$t=!0;try{gt=de(Ne),$t=!1}finally{$t?Jm(se):oy(se)}return typeof Promise<"u"&&gt instanceof Promise?gt.then(function(bn){return di(se,Me),xd(bn,se)},function(bn){throw Jm(se),bn}):(di(se,Me),xd(gt,se))}if(!ie||typeof ie!="object")return(gt=de(ie))===ev?void 0:(gt===void 0&&(gt=ie),q.F&&Sx(gt,!0),gt);Ps(21,ie)},this.produceWithPatches=function(ie,de){return typeof ie=="function"?function(Ke){for(var gt=arguments.length,se=Array(gt>1?gt-1:0),Ne=1;Ne<gt;Ne++)se[Ne-1]=arguments[Ne];return q.produceWithPatches(Ke,function($t){return ie.apply(void 0,[$t].concat(se))})}:[q.produce(ie,de,function(Ke,gt){Me=Ke,We=gt}),Me,We];var Me,We},typeof(L==null?void 0:L.useProxies)=="boolean"&&this.setUseProxies(L.useProxies),typeof(L==null?void 0:L.autoFreeze)=="boolean"&&this.setAutoFreeze(L.autoFreeze)}var E=v.prototype;return E.createDraft=function(L){Lo(L)||Ps(8),Zl(L)&&(L=fp(L));var q=sy(this),ie=Cd(this,L,void 0);return ie[Fo].C=!0,oy(q),ie},E.finishDraft=function(L,q){var ie=L&&L[Fo],de=ie.A;return di(de,q),xd(void 0,de)},E.setAutoFreeze=function(L){this.F=L},E.setUseProxies=function(L){L&&!Px&&Ps(20),this.g=L},E.applyPatches=function(L,q){var ie;for(ie=q.length-1;ie>=0;ie--){var de=q[ie];if(de.path.length===0&&de.op==="replace"){L=de.value;break}}var Me=sl("Patches").$;return Zl(L)?Me(L,q):this.produce(L,function(We){return Me(We,q.slice(ie+1))})},v}(),Ki=new Tx;Ki.produce,Ki.produceWithPatches.bind(Ki),Ki.setAutoFreeze.bind(Ki),Ki.setUseProxies.bind(Ki),Ki.applyPatches.bind(Ki),Ki.createDraft.bind(Ki),Ki.finishDraft.bind(Ki);var Mx={currentProjectStateDefinitionVersion:"0.4.0"},py=Mx;async function q2(v,E,L){await Zm(0),v.transaction(({drafts:q})=>{var ie;const de=E.address.projectId;q.ephemeral.coreByProject[de]={lastExportedObject:null,loadingState:{type:"loading"}},q.ahistoric.coreByProject[de]={ahistoricStuff:""};function Me(){q.ephemeral.coreByProject[de].loadingState={type:"loaded"},q.historic.coreByProject[de]={sheetsById:{},definitionVersion:py.currentProjectStateDefinitionVersion,revisionHistory:[]}}function We(Ne){q.ephemeral.coreByProject[de].loadingState={type:"loaded"},q.historic.coreByProject[de]=Ne}function Ke(){q.ephemeral.coreByProject[de].loadingState={type:"loaded"}}function gt(Ne){q.ephemeral.coreByProject[de].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:Ne}}const se=(ie=wx(q.historic))==null?void 0:ie.coreByProject[E.address.projectId];se?L&&se.revisionHistory.indexOf(L.revisionHistory[0])==-1?gt(L):Ke():L?We(L):Me()})}function Ax(){}function Ix(v){var E,L;const q=(E=v==null?void 0:v.logging)!=null&&E.internal?(L=v.logging.min)!=null?L:256:1/0,ie=q<=128,de=q<=512,Me=h2(void 0,{_debug:ie?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):Ax,_error:de?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):Ax});if(v){const{logger:We,logging:Ke}=v;We&&Me.configureLogger(We),Ke?Me.configureLogging(Ke):Me.configureLogging({dev:!1})}return Me.getLogger().named("Theatre")}var fy=class{constructor(v,E={},L){this.config=E,this.publicApi=L,te(this,"pointers"),te(this,"_pointerProxies"),te(this,"address"),te(this,"_studioReadyDeferred"),te(this,"_assetStorageReadyDeferred"),te(this,"_readyPromise"),te(this,"_sheetTemplates",new V2.Atom({})),te(this,"sheetTemplatesP",this._sheetTemplates.pointer),te(this,"_studio"),te(this,"assetStorage"),te(this,"type","Theatre_Project"),te(this,"_logger");var q;this._logger=Ix({logging:{dev:!0}}).named("Project",v),this._logger.traceDev("creating project"),this.address={projectId:v};const ie=new V2.Atom({ahistoric:{ahistoricStuff:""},historic:(q=E.state)!=null?q:{sheetsById:{},definitionVersion:py.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=ql(),this.assetStorage={getAssetUrl:de=>{var Me;return"".concat((Me=E.assets)==null?void 0:Me.baseUrl,"/").concat(de)},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new _x.PointerProxy(ie.pointer.historic),ahistoric:new _x.PointerProxy(ie.pointer.ahistoric),ephemeral:new _x.PointerProxy(ie.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},me.add(v,this),this._studioReadyDeferred=ql(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then(()=>{}),E.state?setTimeout(()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))},0):typeof window>"u"?console.error('Argument config.state in Theatre.getProject("'.concat(v,'", config) is empty. ')+"You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state"):setTimeout(()=>{if(!this._studio)throw new Error('Argument config.state in Theatre.getProject("'.concat(v,'", config) is empty. This is fine ')+"while you are using @theatre/core along with @theatre/studio. But since @theatre/studio "+'is not loaded, the state of project "'.concat(v,`" will be empty.

`)+`To fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state
`)},1e3)}attachToStudio(v){if(this._studio){if(this._studio!==v)throw new Error("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));console.warn("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));return}this._studio=v,v.initialized.then(async()=>{var E;await q2(v,this,this.config.state),this._pointerProxies.historic.setPointer(v.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(v.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(v.atomP.ephemeral.coreByProject[this.address.projectId]),await v.createAssetStorage(this,(E=this.config.assets)==null?void 0:E.baseUrl).then(L=>{this.assetStorage=L,this._assetStorageReadyDeferred.resolve(void 0)}),this._studioReadyDeferred.resolve(void 0)}).catch(E=>{throw console.error(E),E})}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return this._studioReadyDeferred.status==="resolved"&&this._assetStorageReadyDeferred.status==="resolved"}getOrCreateSheet(v,E="default"){let L=this._sheetTemplates.get()[v];return L||(L=new SF(this,v),this._sheetTemplates.reduce(q=>Z(H({},q),{[v]:L}))),L.getInstance(E)}},my=class{get type(){return"Theatre_Project_PublicAPI"}constructor(v,E={}){vt(this,new fy(v,E,this))}get ready(){return Fe(this).ready}get isReady(){return Fe(this).isReady()}get address(){return H({},Fe(this).address)}getAssetUrl(v){if(!this.isReady){console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.");return}return v.id?Fe(this).assetStorage.getAssetUrl(v.id):void 0}sheet(v,E="default"){const L=ny(v);return Fe(this).getOrCreateSheet(L,E).publicApi}};C(Pe());var Rx=Mt,gp=Mt;function Ox(v,E={}){const L=me.get(v);if(L)return L.publicApi;const ie=Ix().named("Project",v);return E.state?(Y2(v,E.state),ie._debug("deep validated config.state on disk")):ie._debug("no config.state"),new my(v,E)}var X2=(v,E)=>{if(Array.isArray(E)||E==null||E.definitionVersion!==py.currentProjectStateDefinitionVersion)throw new sp("Error validating conf.state in Theatre.getProject(".concat(JSON.stringify(v),", conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state"))},Y2=(v,E)=>{X2(v,E)};function vy(v,E,L){const q=L?Fe(L).ticker:hx();if((0,Rx.isPointer)(v))return(0,gp.pointerToPrism)(v).onChange(q,E,!0);if((0,gp.isPrism)(v))return v.onChange(q,E,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function Dx(v){if((0,Rx.isPointer)(v))return(0,gp.pointerToPrism)(v).getValue();throw new Error("Called val(p) where p is not a pointer.")}var Lx=class{constructor(){te(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.7.0"}getBitsForStudio(v,E){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=v;const L={projectsP:me.atom.pointer.projects,privateAPI:Fe,coreExports:ye,getCoreRafDriver:dx};E(L)}};Nx();function Nx(){if(typeof window>"u")return;const v=window[cx];if(typeof v<"u")throw typeof v=="object"&&v&&typeof v.version=="string"?new Error(`It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(cx," seems to be already set by a module other than @theatre/core."));const E=new Lx;window[cx]=E;const L=window[E2];L&&L!==null&&L.type==="Theatre_StudioBundle"&&L.registerCoreBundle(E)}/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)
	*/})(R3,R3.exports);var FH=R3.exports;function Q3e(){return Math.round(Math.random()*1e6).toString()}function J3e(t){return t.r!==void 0&&t.g!==void 0&&t.b!==void 0}function eLe(t){const e=Math.round(t.r*255),n=Math.round(t.g*255),r=Math.round(t.b*255),o=_=>{const x=_.toString(16);return x.length===1?"0"+x:x},u=o(e),h=o(n),m=o(r);return"#"+u+h+m}const k_e=()=>{};class tLe extends fL{constructor(n,r,o){super(n);Bi(this,"project");Bi(this,"sheets");Bi(this,"sheetObjects");Bi(this,"sheetObjectCBs");Bi(this,"sheetObjectUnsubscribe");this.project=FH.getProject(r,o),this.sheets=new Map,this.sheetObjects=new Map,this.sheetObjectCBs=new Map,this.sheetObjectUnsubscribe=new Map}dispose(){this.project=void 0,this.sheets=new Map,this.sheetObjects=new Map,this.sheetObjectCBs=new Map,this.sheetObjectUnsubscribe=new Map}sheet(n){var o;if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}let r=this.sheets.get(n);return r!==void 0||(r=(o=this.project)==null?void 0:o.sheet(n),this.sheets.set(n,r)),r}sheetObject(n,r,o,u){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const h=this.sheets.get(n);if(h===void 0)return;const m=`${n}_${r}`;let _=this.sheetObjects.get(m);if(_!==void 0)return _=h.object(r,{...o,..._.value},{reconfigure:!0}),_;_=h.object(r,o),this.sheetObjects.set(m,_),this.sheetObjectCBs.set(m,u!==void 0?u:k_e);const x=_.onValuesChange(T=>{if(this.app.editor){for(const I in T){const N=T[I];typeof N=="object"&&J3e(N)&&(T[I]={r:N.r,g:N.g,b:N.b,a:N.a})}this.app.send({event:"updateSheetObject",target:"app",data:{sheetObject:m,values:T}})}else{const I=this.sheetObjectCBs.get(m);I!==void 0&&I(T)}});return this.sheetObjectUnsubscribe.set(m,x),_}unsubscribe(n){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const r=`${n.address.sheetId}_${n.address.objectKey}`,o=this.sheetObjectUnsubscribe.get(r);o!==void 0&&o()}}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const vG="155",nLe=0,Rme=1,rLe=2,T_e=1,iLe=2,dh=3,Jf=0,ya=1,fh=2,Gf=0,R_=1,Ome=2,Dme=3,Lme=4,oLe=5,a_=100,sLe=101,aLe=102,Nme=103,Fme=104,lLe=200,uLe=201,cLe=202,dLe=203,M_e=204,A_e=205,hLe=206,pLe=207,fLe=208,mLe=209,vLe=210,gLe=0,yLe=1,bLe=2,BH=3,_Le=4,wLe=5,xLe=6,SLe=7,I_e=0,ELe=1,CLe=2,Wf=0,PLe=1,kLe=2,TLe=3,MLe=4,ALe=5,R_e=300,W_=301,$_=302,UH=303,VH=304,mL=306,Ng=1e3,Nu=1001,jH=1002,js=1003,Bme=1004,D6=1005,Ol=1006,ILe=1007,oP=1008,$f=1009,RLe=1010,OLe=1011,gG=1012,O_e=1013,Rf=1014,Of=1015,sP=1016,D_e=1017,L_e=1018,Pg=1020,DLe=1021,Fu=1023,LLe=1024,NLe=1025,kg=1026,K_=1027,FLe=1028,N_e=1029,BLe=1030,F_e=1031,B_e=1033,L6=33776,N6=33777,F6=33778,B6=33779,Ume=35840,Vme=35841,jme=35842,zme=35843,ULe=36196,Hme=37492,Gme=37496,Wme=37808,$me=37809,Kme=37810,qme=37811,Xme=37812,Yme=37813,Zme=37814,Qme=37815,Jme=37816,eve=37817,tve=37818,nve=37819,rve=37820,ive=37821,U6=36492,VLe=36283,ove=36284,sve=36285,ave=36286,U_e=3e3,Tg=3001,jLe=3200,zLe=3201,yG=0,HLe=1,Mg="",tr="srgb",Wc="srgb-linear",V_e="display-p3",V6=7680,GLe=519,WLe=512,$Le=513,KLe=514,qLe=515,XLe=516,YLe=517,ZLe=518,QLe=519,lve=35044,uve="300 es",zH=1035,gh=2e3,O3=2001;class Kg{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const o=this._listeners[e];if(o!==void 0){const u=o.indexOf(n);u!==-1&&o.splice(u,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const o=r.slice(0);for(let u=0,h=o.length;u<h;u++)o[u].call(this,e);e.target=null}}}const ms=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],j6=Math.PI/180,HH=180/Math.PI;function kP(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ms[t&255]+ms[t>>8&255]+ms[t>>16&255]+ms[t>>24&255]+"-"+ms[e&255]+ms[e>>8&255]+"-"+ms[e>>16&15|64]+ms[e>>24&255]+"-"+ms[n&63|128]+ms[n>>8&255]+"-"+ms[n>>16&255]+ms[n>>24&255]+ms[r&255]+ms[r>>8&255]+ms[r>>16&255]+ms[r>>24&255]).toLowerCase()}function zs(t,e,n){return Math.max(e,Math.min(n,t))}function JLe(t,e){return(t%e+e)%e}function z6(t,e,n){return(1-n)*t+n*e}function cve(t){return(t&t-1)===0&&t!==0}function GH(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function rC(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function da(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}class kr{constructor(e=0,n=0){kr.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6],this.y=o[1]*n+o[4]*r+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(zs(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),o=Math.sin(n),u=this.x-e.x,h=this.y-e.y;return this.x=u*r-h*o+e.x,this.y=u*o+h*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ir{constructor(e,n,r,o,u,h,m,_,x){ir.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,o,u,h,m,_,x)}set(e,n,r,o,u,h,m,_,x){const T=this.elements;return T[0]=e,T[1]=o,T[2]=m,T[3]=n,T[4]=u,T[5]=_,T[6]=r,T[7]=h,T[8]=x,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,o=n.elements,u=this.elements,h=r[0],m=r[3],_=r[6],x=r[1],T=r[4],I=r[7],N=r[2],H=r[5],Z=r[8],j=o[0],z=o[3],U=o[6],C=o[1],K=o[4],te=o[7],pe=o[2],Q=o[5],Se=o[8];return u[0]=h*j+m*C+_*pe,u[3]=h*z+m*K+_*Q,u[6]=h*U+m*te+_*Se,u[1]=x*j+T*C+I*pe,u[4]=x*z+T*K+I*Q,u[7]=x*U+T*te+I*Se,u[2]=N*j+H*C+Z*pe,u[5]=N*z+H*K+Z*Q,u[8]=N*U+H*te+Z*Se,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],o=e[2],u=e[3],h=e[4],m=e[5],_=e[6],x=e[7],T=e[8];return n*h*T-n*m*x-r*u*T+r*m*_+o*u*x-o*h*_}invert(){const e=this.elements,n=e[0],r=e[1],o=e[2],u=e[3],h=e[4],m=e[5],_=e[6],x=e[7],T=e[8],I=T*h-m*x,N=m*_-T*u,H=x*u-h*_,Z=n*I+r*N+o*H;if(Z===0)return this.set(0,0,0,0,0,0,0,0,0);const j=1/Z;return e[0]=I*j,e[1]=(o*x-T*r)*j,e[2]=(m*r-o*h)*j,e[3]=N*j,e[4]=(T*n-o*_)*j,e[5]=(o*u-m*n)*j,e[6]=H*j,e[7]=(r*_-x*n)*j,e[8]=(h*n-r*u)*j,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,o,u,h,m){const _=Math.cos(u),x=Math.sin(u);return this.set(r*_,r*x,-r*(_*h+x*m)+h+e,-o*x,o*_,-o*(-x*h+_*m)+m+n,0,0,1),this}scale(e,n){return this.premultiply(H6.makeScale(e,n)),this}rotate(e){return this.premultiply(H6.makeRotation(-e)),this}translate(e,n){return this.premultiply(H6.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let o=0;o<9;o++)if(n[o]!==r[o])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const H6=new ir;function j_e(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function aP(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const dve={};function NC(t){t in dve||(dve[t]=!0,console.warn(t))}function O_(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function G6(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const eNe=new ir().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),tNe=new ir().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function nNe(t){return t.convertSRGBToLinear().applyMatrix3(tNe)}function rNe(t){return t.applyMatrix3(eNe).convertLinearToSRGB()}const iNe={[Wc]:t=>t,[tr]:t=>t.convertSRGBToLinear(),[V_e]:nNe},oNe={[Wc]:t=>t,[tr]:t=>t.convertLinearToSRGB(),[V_e]:rNe},Tu={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Wc},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=iNe[e],o=oNe[n];if(r===void 0||o===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return o(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let Ub;class z_e{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Ub===void 0&&(Ub=aP("canvas")),Ub.width=e.width,Ub.height=e.height;const r=Ub.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Ub}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=aP("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),u=o.data;for(let h=0;h<u.length;h++)u[h]=O_(u[h]/255)*255;return r.putImageData(o,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(O_(n[r]/255)*255):n[r]=O_(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let sNe=0;class H_e{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:sNe++}),this.uuid=kP(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},o=this.data;if(o!==null){let u;if(Array.isArray(o)){u=[];for(let h=0,m=o.length;h<m;h++)o[h].isDataTexture?u.push(W6(o[h].image)):u.push(W6(o[h]))}else u=W6(o);r.url=u}return n||(e.images[this.uuid]=r),r}}function W6(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?z_e.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let aNe=0;class _s extends Kg{constructor(e=_s.DEFAULT_IMAGE,n=_s.DEFAULT_MAPPING,r=Nu,o=Nu,u=Ol,h=oP,m=Fu,_=$f,x=_s.DEFAULT_ANISOTROPY,T=Mg){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:aNe++}),this.uuid=kP(),this.name="",this.source=new H_e(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=u,this.minFilter=h,this.anisotropy=x,this.format=m,this.internalFormat=null,this.type=_,this.offset=new kr(0,0),this.repeat=new kr(1,1),this.center=new kr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ir,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof T=="string"?this.colorSpace=T:(NC("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=T===Tg?tr:Mg),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==R_e)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ng:e.x=e.x-Math.floor(e.x);break;case Nu:e.x=e.x<0?0:1;break;case jH:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ng:e.y=e.y-Math.floor(e.y);break;case Nu:e.y=e.y<0?0:1;break;case jH:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return NC("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===tr?Tg:U_e}set encoding(e){NC("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Tg?tr:Mg}}_s.DEFAULT_IMAGE=null;_s.DEFAULT_MAPPING=R_e;_s.DEFAULT_ANISOTROPY=1;class Io{constructor(e=0,n=0,r=0,o=1){Io.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,o){return this.x=e,this.y=n,this.z=r,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,o=this.z,u=this.w,h=e.elements;return this.x=h[0]*n+h[4]*r+h[8]*o+h[12]*u,this.y=h[1]*n+h[5]*r+h[9]*o+h[13]*u,this.z=h[2]*n+h[6]*r+h[10]*o+h[14]*u,this.w=h[3]*n+h[7]*r+h[11]*o+h[15]*u,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,o,u;const _=e.elements,x=_[0],T=_[4],I=_[8],N=_[1],H=_[5],Z=_[9],j=_[2],z=_[6],U=_[10];if(Math.abs(T-N)<.01&&Math.abs(I-j)<.01&&Math.abs(Z-z)<.01){if(Math.abs(T+N)<.1&&Math.abs(I+j)<.1&&Math.abs(Z+z)<.1&&Math.abs(x+H+U-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const K=(x+1)/2,te=(H+1)/2,pe=(U+1)/2,Q=(T+N)/4,Se=(I+j)/4,Pe=(Z+z)/4;return K>te&&K>pe?K<.01?(r=0,o=.707106781,u=.707106781):(r=Math.sqrt(K),o=Q/r,u=Se/r):te>pe?te<.01?(r=.707106781,o=0,u=.707106781):(o=Math.sqrt(te),r=Q/o,u=Pe/o):pe<.01?(r=.707106781,o=.707106781,u=0):(u=Math.sqrt(pe),r=Se/u,o=Pe/u),this.set(r,o,u,n),this}let C=Math.sqrt((z-Z)*(z-Z)+(I-j)*(I-j)+(N-T)*(N-T));return Math.abs(C)<.001&&(C=1),this.x=(z-Z)/C,this.y=(I-j)/C,this.z=(N-T)/C,this.w=Math.acos((x+H+U-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class lNe extends Kg{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Io(0,0,e,n),this.scissorTest=!1,this.viewport=new Io(0,0,e,n);const o={width:e,height:n,depth:1};r.encoding!==void 0&&(NC("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Tg?tr:Mg),this.texture=new _s(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Ol,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new H_e(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Fg extends lNe{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class G_e extends _s{constructor(e=null,n=1,r=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:o},this.magFilter=js,this.minFilter=js,this.wrapR=Nu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class uNe extends _s{constructor(e=null,n=1,r=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:o},this.magFilter=js,this.minFilter=js,this.wrapR=Nu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class TP{constructor(e=0,n=0,r=0,o=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=o}static slerpFlat(e,n,r,o,u,h,m){let _=r[o+0],x=r[o+1],T=r[o+2],I=r[o+3];const N=u[h+0],H=u[h+1],Z=u[h+2],j=u[h+3];if(m===0){e[n+0]=_,e[n+1]=x,e[n+2]=T,e[n+3]=I;return}if(m===1){e[n+0]=N,e[n+1]=H,e[n+2]=Z,e[n+3]=j;return}if(I!==j||_!==N||x!==H||T!==Z){let z=1-m;const U=_*N+x*H+T*Z+I*j,C=U>=0?1:-1,K=1-U*U;if(K>Number.EPSILON){const pe=Math.sqrt(K),Q=Math.atan2(pe,U*C);z=Math.sin(z*Q)/pe,m=Math.sin(m*Q)/pe}const te=m*C;if(_=_*z+N*te,x=x*z+H*te,T=T*z+Z*te,I=I*z+j*te,z===1-m){const pe=1/Math.sqrt(_*_+x*x+T*T+I*I);_*=pe,x*=pe,T*=pe,I*=pe}}e[n]=_,e[n+1]=x,e[n+2]=T,e[n+3]=I}static multiplyQuaternionsFlat(e,n,r,o,u,h){const m=r[o],_=r[o+1],x=r[o+2],T=r[o+3],I=u[h],N=u[h+1],H=u[h+2],Z=u[h+3];return e[n]=m*Z+T*I+_*H-x*N,e[n+1]=_*Z+T*N+x*I-m*H,e[n+2]=x*Z+T*H+m*N-_*I,e[n+3]=T*Z-m*I-_*N-x*H,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,o){return this._x=e,this._y=n,this._z=r,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,o=e._y,u=e._z,h=e._order,m=Math.cos,_=Math.sin,x=m(r/2),T=m(o/2),I=m(u/2),N=_(r/2),H=_(o/2),Z=_(u/2);switch(h){case"XYZ":this._x=N*T*I+x*H*Z,this._y=x*H*I-N*T*Z,this._z=x*T*Z+N*H*I,this._w=x*T*I-N*H*Z;break;case"YXZ":this._x=N*T*I+x*H*Z,this._y=x*H*I-N*T*Z,this._z=x*T*Z-N*H*I,this._w=x*T*I+N*H*Z;break;case"ZXY":this._x=N*T*I-x*H*Z,this._y=x*H*I+N*T*Z,this._z=x*T*Z+N*H*I,this._w=x*T*I-N*H*Z;break;case"ZYX":this._x=N*T*I-x*H*Z,this._y=x*H*I+N*T*Z,this._z=x*T*Z-N*H*I,this._w=x*T*I+N*H*Z;break;case"YZX":this._x=N*T*I+x*H*Z,this._y=x*H*I+N*T*Z,this._z=x*T*Z-N*H*I,this._w=x*T*I-N*H*Z;break;case"XZY":this._x=N*T*I-x*H*Z,this._y=x*H*I-N*T*Z,this._z=x*T*Z+N*H*I,this._w=x*T*I+N*H*Z;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,o=Math.sin(r);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],o=n[4],u=n[8],h=n[1],m=n[5],_=n[9],x=n[2],T=n[6],I=n[10],N=r+m+I;if(N>0){const H=.5/Math.sqrt(N+1);this._w=.25/H,this._x=(T-_)*H,this._y=(u-x)*H,this._z=(h-o)*H}else if(r>m&&r>I){const H=2*Math.sqrt(1+r-m-I);this._w=(T-_)/H,this._x=.25*H,this._y=(o+h)/H,this._z=(u+x)/H}else if(m>I){const H=2*Math.sqrt(1+m-r-I);this._w=(u-x)/H,this._x=(o+h)/H,this._y=.25*H,this._z=(_+T)/H}else{const H=2*Math.sqrt(1+I-r-m);this._w=(h-o)/H,this._x=(u+x)/H,this._y=(_+T)/H,this._z=.25*H}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(zs(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const o=Math.min(1,n/r);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,o=e._y,u=e._z,h=e._w,m=n._x,_=n._y,x=n._z,T=n._w;return this._x=r*T+h*m+o*x-u*_,this._y=o*T+h*_+u*m-r*x,this._z=u*T+h*x+r*_-o*m,this._w=h*T-r*m-o*_-u*x,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,o=this._y,u=this._z,h=this._w;let m=h*e._w+r*e._x+o*e._y+u*e._z;if(m<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,m=-m):this.copy(e),m>=1)return this._w=h,this._x=r,this._y=o,this._z=u,this;const _=1-m*m;if(_<=Number.EPSILON){const H=1-n;return this._w=H*h+n*this._w,this._x=H*r+n*this._x,this._y=H*o+n*this._y,this._z=H*u+n*this._z,this.normalize(),this._onChangeCallback(),this}const x=Math.sqrt(_),T=Math.atan2(x,m),I=Math.sin((1-n)*T)/x,N=Math.sin(n*T)/x;return this._w=h*I+this._w*N,this._x=r*I+this._x*N,this._y=o*I+this._y*N,this._z=u*I+this._z*N,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),o=2*Math.PI*Math.random(),u=2*Math.PI*Math.random();return this.set(n*Math.cos(o),r*Math.sin(u),r*Math.cos(u),n*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class dt{constructor(e=0,n=0,r=0){dt.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(hve.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(hve.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,o=this.z,u=e.elements;return this.x=u[0]*n+u[3]*r+u[6]*o,this.y=u[1]*n+u[4]*r+u[7]*o,this.z=u[2]*n+u[5]*r+u[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,o=this.z,u=e.elements,h=1/(u[3]*n+u[7]*r+u[11]*o+u[15]);return this.x=(u[0]*n+u[4]*r+u[8]*o+u[12])*h,this.y=(u[1]*n+u[5]*r+u[9]*o+u[13])*h,this.z=(u[2]*n+u[6]*r+u[10]*o+u[14])*h,this}applyQuaternion(e){const n=this.x,r=this.y,o=this.z,u=e.x,h=e.y,m=e.z,_=e.w,x=_*n+h*o-m*r,T=_*r+m*n-u*o,I=_*o+u*r-h*n,N=-u*n-h*r-m*o;return this.x=x*_+N*-u+T*-m-I*-h,this.y=T*_+N*-h+I*-u-x*-m,this.z=I*_+N*-m+x*-h-T*-u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,o=this.z,u=e.elements;return this.x=u[0]*n+u[4]*r+u[8]*o,this.y=u[1]*n+u[5]*r+u[9]*o,this.z=u[2]*n+u[6]*r+u[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,o=e.y,u=e.z,h=n.x,m=n.y,_=n.z;return this.x=o*_-u*m,this.y=u*h-r*_,this.z=r*m-o*h,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return $6.copy(this).projectOnVector(e),this.sub($6)}reflect(e){return this.sub($6.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(zs(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,o=this.z-e.z;return n*n+r*r+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const o=Math.sin(n)*e;return this.x=o*Math.sin(r),this.y=Math.cos(n)*e,this.z=o*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=o,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const $6=new dt,hve=new TP;class MP{constructor(e=new dt(1/0,1/0,1/0),n=new dt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(ih.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(ih.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=ih.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Vb.copy(e.boundingBox),Vb.applyMatrix4(e.matrixWorld),this.union(Vb);else{const o=e.geometry;if(o!==void 0)if(n&&o.attributes!==void 0&&o.attributes.position!==void 0){const u=o.attributes.position;for(let h=0,m=u.count;h<m;h++)ih.fromBufferAttribute(u,h).applyMatrix4(e.matrixWorld),this.expandByPoint(ih)}else o.boundingBox===null&&o.computeBoundingBox(),Vb.copy(o.boundingBox),Vb.applyMatrix4(e.matrixWorld),this.union(Vb)}const r=e.children;for(let o=0,u=r.length;o<u;o++)this.expandByObject(r[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ih),ih.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(iC),fD.subVectors(this.max,iC),jb.subVectors(e.a,iC),zb.subVectors(e.b,iC),Hb.subVectors(e.c,iC),pf.subVectors(zb,jb),ff.subVectors(Hb,zb),ng.subVectors(jb,Hb);let n=[0,-pf.z,pf.y,0,-ff.z,ff.y,0,-ng.z,ng.y,pf.z,0,-pf.x,ff.z,0,-ff.x,ng.z,0,-ng.x,-pf.y,pf.x,0,-ff.y,ff.x,0,-ng.y,ng.x,0];return!K6(n,jb,zb,Hb,fD)||(n=[1,0,0,0,1,0,0,0,1],!K6(n,jb,zb,Hb,fD))?!1:(mD.crossVectors(pf,ff),n=[mD.x,mD.y,mD.z],K6(n,jb,zb,Hb,fD))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ih).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ih).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(rh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),rh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),rh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),rh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),rh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),rh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),rh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),rh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(rh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const rh=[new dt,new dt,new dt,new dt,new dt,new dt,new dt,new dt],ih=new dt,Vb=new MP,jb=new dt,zb=new dt,Hb=new dt,pf=new dt,ff=new dt,ng=new dt,iC=new dt,fD=new dt,mD=new dt,rg=new dt;function K6(t,e,n,r,o){for(let u=0,h=t.length-3;u<=h;u+=3){rg.fromArray(t,u);const m=o.x*Math.abs(rg.x)+o.y*Math.abs(rg.y)+o.z*Math.abs(rg.z),_=e.dot(rg),x=n.dot(rg),T=r.dot(rg);if(Math.max(-Math.max(_,x,T),Math.min(_,x,T))>m)return!1}return!0}const cNe=new MP,oC=new dt,q6=new dt;class bG{constructor(e=new dt,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):cNe.setFromPoints(e).getCenter(r);let o=0;for(let u=0,h=e.length;u<h;u++)o=Math.max(o,r.distanceToSquared(e[u]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;oC.subVectors(e,this.center);const n=oC.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),o=(r-this.radius)*.5;this.center.addScaledVector(oC,o/r),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(q6.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(oC.copy(e.center).add(q6)),this.expandByPoint(oC.copy(e.center).sub(q6))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const oh=new dt,X6=new dt,vD=new dt,mf=new dt,Y6=new dt,gD=new dt,Z6=new dt;class dNe{constructor(e=new dt,n=new dt(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,oh)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=oh.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(oh.copy(this.origin).addScaledVector(this.direction,n),oh.distanceToSquared(e))}distanceSqToSegment(e,n,r,o){X6.copy(e).add(n).multiplyScalar(.5),vD.copy(n).sub(e).normalize(),mf.copy(this.origin).sub(X6);const u=e.distanceTo(n)*.5,h=-this.direction.dot(vD),m=mf.dot(this.direction),_=-mf.dot(vD),x=mf.lengthSq(),T=Math.abs(1-h*h);let I,N,H,Z;if(T>0)if(I=h*_-m,N=h*m-_,Z=u*T,I>=0)if(N>=-Z)if(N<=Z){const j=1/T;I*=j,N*=j,H=I*(I+h*N+2*m)+N*(h*I+N+2*_)+x}else N=u,I=Math.max(0,-(h*N+m)),H=-I*I+N*(N+2*_)+x;else N=-u,I=Math.max(0,-(h*N+m)),H=-I*I+N*(N+2*_)+x;else N<=-Z?(I=Math.max(0,-(-h*u+m)),N=I>0?-u:Math.min(Math.max(-u,-_),u),H=-I*I+N*(N+2*_)+x):N<=Z?(I=0,N=Math.min(Math.max(-u,-_),u),H=N*(N+2*_)+x):(I=Math.max(0,-(h*u+m)),N=I>0?u:Math.min(Math.max(-u,-_),u),H=-I*I+N*(N+2*_)+x);else N=h>0?-u:u,I=Math.max(0,-(h*N+m)),H=-I*I+N*(N+2*_)+x;return r&&r.copy(this.origin).addScaledVector(this.direction,I),o&&o.copy(X6).addScaledVector(vD,N),H}intersectSphere(e,n){oh.subVectors(e.center,this.origin);const r=oh.dot(this.direction),o=oh.dot(oh)-r*r,u=e.radius*e.radius;if(o>u)return null;const h=Math.sqrt(u-o),m=r-h,_=r+h;return _<0?null:m<0?this.at(_,n):this.at(m,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,o,u,h,m,_;const x=1/this.direction.x,T=1/this.direction.y,I=1/this.direction.z,N=this.origin;return x>=0?(r=(e.min.x-N.x)*x,o=(e.max.x-N.x)*x):(r=(e.max.x-N.x)*x,o=(e.min.x-N.x)*x),T>=0?(u=(e.min.y-N.y)*T,h=(e.max.y-N.y)*T):(u=(e.max.y-N.y)*T,h=(e.min.y-N.y)*T),r>h||u>o||((u>r||isNaN(r))&&(r=u),(h<o||isNaN(o))&&(o=h),I>=0?(m=(e.min.z-N.z)*I,_=(e.max.z-N.z)*I):(m=(e.max.z-N.z)*I,_=(e.min.z-N.z)*I),r>_||m>o)||((m>r||r!==r)&&(r=m),(_<o||o!==o)&&(o=_),o<0)?null:this.at(r>=0?r:o,n)}intersectsBox(e){return this.intersectBox(e,oh)!==null}intersectTriangle(e,n,r,o,u){Y6.subVectors(n,e),gD.subVectors(r,e),Z6.crossVectors(Y6,gD);let h=this.direction.dot(Z6),m;if(h>0){if(o)return null;m=1}else if(h<0)m=-1,h=-h;else return null;mf.subVectors(this.origin,e);const _=m*this.direction.dot(gD.crossVectors(mf,gD));if(_<0)return null;const x=m*this.direction.dot(Y6.cross(mf));if(x<0||_+x>h)return null;const T=-m*mf.dot(Z6);return T<0?null:this.at(T/h,u)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class uo{constructor(e,n,r,o,u,h,m,_,x,T,I,N,H,Z,j,z){uo.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,o,u,h,m,_,x,T,I,N,H,Z,j,z)}set(e,n,r,o,u,h,m,_,x,T,I,N,H,Z,j,z){const U=this.elements;return U[0]=e,U[4]=n,U[8]=r,U[12]=o,U[1]=u,U[5]=h,U[9]=m,U[13]=_,U[2]=x,U[6]=T,U[10]=I,U[14]=N,U[3]=H,U[7]=Z,U[11]=j,U[15]=z,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new uo().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,o=1/Gb.setFromMatrixColumn(e,0).length(),u=1/Gb.setFromMatrixColumn(e,1).length(),h=1/Gb.setFromMatrixColumn(e,2).length();return n[0]=r[0]*o,n[1]=r[1]*o,n[2]=r[2]*o,n[3]=0,n[4]=r[4]*u,n[5]=r[5]*u,n[6]=r[6]*u,n[7]=0,n[8]=r[8]*h,n[9]=r[9]*h,n[10]=r[10]*h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,o=e.y,u=e.z,h=Math.cos(r),m=Math.sin(r),_=Math.cos(o),x=Math.sin(o),T=Math.cos(u),I=Math.sin(u);if(e.order==="XYZ"){const N=h*T,H=h*I,Z=m*T,j=m*I;n[0]=_*T,n[4]=-_*I,n[8]=x,n[1]=H+Z*x,n[5]=N-j*x,n[9]=-m*_,n[2]=j-N*x,n[6]=Z+H*x,n[10]=h*_}else if(e.order==="YXZ"){const N=_*T,H=_*I,Z=x*T,j=x*I;n[0]=N+j*m,n[4]=Z*m-H,n[8]=h*x,n[1]=h*I,n[5]=h*T,n[9]=-m,n[2]=H*m-Z,n[6]=j+N*m,n[10]=h*_}else if(e.order==="ZXY"){const N=_*T,H=_*I,Z=x*T,j=x*I;n[0]=N-j*m,n[4]=-h*I,n[8]=Z+H*m,n[1]=H+Z*m,n[5]=h*T,n[9]=j-N*m,n[2]=-h*x,n[6]=m,n[10]=h*_}else if(e.order==="ZYX"){const N=h*T,H=h*I,Z=m*T,j=m*I;n[0]=_*T,n[4]=Z*x-H,n[8]=N*x+j,n[1]=_*I,n[5]=j*x+N,n[9]=H*x-Z,n[2]=-x,n[6]=m*_,n[10]=h*_}else if(e.order==="YZX"){const N=h*_,H=h*x,Z=m*_,j=m*x;n[0]=_*T,n[4]=j-N*I,n[8]=Z*I+H,n[1]=I,n[5]=h*T,n[9]=-m*T,n[2]=-x*T,n[6]=H*I+Z,n[10]=N-j*I}else if(e.order==="XZY"){const N=h*_,H=h*x,Z=m*_,j=m*x;n[0]=_*T,n[4]=-I,n[8]=x*T,n[1]=N*I+j,n[5]=h*T,n[9]=H*I-Z,n[2]=Z*I-H,n[6]=m*T,n[10]=j*I+N}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(hNe,e,pNe)}lookAt(e,n,r){const o=this.elements;return Da.subVectors(e,n),Da.lengthSq()===0&&(Da.z=1),Da.normalize(),vf.crossVectors(r,Da),vf.lengthSq()===0&&(Math.abs(r.z)===1?Da.x+=1e-4:Da.z+=1e-4,Da.normalize(),vf.crossVectors(r,Da)),vf.normalize(),yD.crossVectors(Da,vf),o[0]=vf.x,o[4]=yD.x,o[8]=Da.x,o[1]=vf.y,o[5]=yD.y,o[9]=Da.y,o[2]=vf.z,o[6]=yD.z,o[10]=Da.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,o=n.elements,u=this.elements,h=r[0],m=r[4],_=r[8],x=r[12],T=r[1],I=r[5],N=r[9],H=r[13],Z=r[2],j=r[6],z=r[10],U=r[14],C=r[3],K=r[7],te=r[11],pe=r[15],Q=o[0],Se=o[4],Pe=o[8],G=o[12],ye=o[1],St=o[5],kt=o[9],it=o[13],me=o[2],lt=o[6],Fe=o[10],vt=o[14],Ge=o[3],mt=o[7],Je=o[11],Be=o[15];return u[0]=h*Q+m*ye+_*me+x*Ge,u[4]=h*Se+m*St+_*lt+x*mt,u[8]=h*Pe+m*kt+_*Fe+x*Je,u[12]=h*G+m*it+_*vt+x*Be,u[1]=T*Q+I*ye+N*me+H*Ge,u[5]=T*Se+I*St+N*lt+H*mt,u[9]=T*Pe+I*kt+N*Fe+H*Je,u[13]=T*G+I*it+N*vt+H*Be,u[2]=Z*Q+j*ye+z*me+U*Ge,u[6]=Z*Se+j*St+z*lt+U*mt,u[10]=Z*Pe+j*kt+z*Fe+U*Je,u[14]=Z*G+j*it+z*vt+U*Be,u[3]=C*Q+K*ye+te*me+pe*Ge,u[7]=C*Se+K*St+te*lt+pe*mt,u[11]=C*Pe+K*kt+te*Fe+pe*Je,u[15]=C*G+K*it+te*vt+pe*Be,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],o=e[8],u=e[12],h=e[1],m=e[5],_=e[9],x=e[13],T=e[2],I=e[6],N=e[10],H=e[14],Z=e[3],j=e[7],z=e[11],U=e[15];return Z*(+u*_*I-o*x*I-u*m*N+r*x*N+o*m*H-r*_*H)+j*(+n*_*H-n*x*N+u*h*N-o*h*H+o*x*T-u*_*T)+z*(+n*x*I-n*m*H-u*h*I+r*h*H+u*m*T-r*x*T)+U*(-o*m*T-n*_*I+n*m*N+o*h*I-r*h*N+r*_*T)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=n,o[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],o=e[2],u=e[3],h=e[4],m=e[5],_=e[6],x=e[7],T=e[8],I=e[9],N=e[10],H=e[11],Z=e[12],j=e[13],z=e[14],U=e[15],C=I*z*x-j*N*x+j*_*H-m*z*H-I*_*U+m*N*U,K=Z*N*x-T*z*x-Z*_*H+h*z*H+T*_*U-h*N*U,te=T*j*x-Z*I*x+Z*m*H-h*j*H-T*m*U+h*I*U,pe=Z*I*_-T*j*_-Z*m*N+h*j*N+T*m*z-h*I*z,Q=n*C+r*K+o*te+u*pe;if(Q===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Se=1/Q;return e[0]=C*Se,e[1]=(j*N*u-I*z*u-j*o*H+r*z*H+I*o*U-r*N*U)*Se,e[2]=(m*z*u-j*_*u+j*o*x-r*z*x-m*o*U+r*_*U)*Se,e[3]=(I*_*u-m*N*u-I*o*x+r*N*x+m*o*H-r*_*H)*Se,e[4]=K*Se,e[5]=(T*z*u-Z*N*u+Z*o*H-n*z*H-T*o*U+n*N*U)*Se,e[6]=(Z*_*u-h*z*u-Z*o*x+n*z*x+h*o*U-n*_*U)*Se,e[7]=(h*N*u-T*_*u+T*o*x-n*N*x-h*o*H+n*_*H)*Se,e[8]=te*Se,e[9]=(Z*I*u-T*j*u-Z*r*H+n*j*H+T*r*U-n*I*U)*Se,e[10]=(h*j*u-Z*m*u+Z*r*x-n*j*x-h*r*U+n*m*U)*Se,e[11]=(T*m*u-h*I*u-T*r*x+n*I*x+h*r*H-n*m*H)*Se,e[12]=pe*Se,e[13]=(T*j*o-Z*I*o+Z*r*N-n*j*N-T*r*z+n*I*z)*Se,e[14]=(Z*m*o-h*j*o-Z*r*_+n*j*_+h*r*z-n*m*z)*Se,e[15]=(h*I*o-T*m*o+T*r*_-n*I*_-h*r*N+n*m*N)*Se,this}scale(e){const n=this.elements,r=e.x,o=e.y,u=e.z;return n[0]*=r,n[4]*=o,n[8]*=u,n[1]*=r,n[5]*=o,n[9]*=u,n[2]*=r,n[6]*=o,n[10]*=u,n[3]*=r,n[7]*=o,n[11]*=u,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,o))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),o=Math.sin(n),u=1-r,h=e.x,m=e.y,_=e.z,x=u*h,T=u*m;return this.set(x*h+r,x*m-o*_,x*_+o*m,0,x*m+o*_,T*m+r,T*_-o*h,0,x*_-o*m,T*_+o*h,u*_*_+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,o,u,h){return this.set(1,r,u,0,e,1,h,0,n,o,1,0,0,0,0,1),this}compose(e,n,r){const o=this.elements,u=n._x,h=n._y,m=n._z,_=n._w,x=u+u,T=h+h,I=m+m,N=u*x,H=u*T,Z=u*I,j=h*T,z=h*I,U=m*I,C=_*x,K=_*T,te=_*I,pe=r.x,Q=r.y,Se=r.z;return o[0]=(1-(j+U))*pe,o[1]=(H+te)*pe,o[2]=(Z-K)*pe,o[3]=0,o[4]=(H-te)*Q,o[5]=(1-(N+U))*Q,o[6]=(z+C)*Q,o[7]=0,o[8]=(Z+K)*Se,o[9]=(z-C)*Se,o[10]=(1-(N+j))*Se,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,n,r){const o=this.elements;let u=Gb.set(o[0],o[1],o[2]).length();const h=Gb.set(o[4],o[5],o[6]).length(),m=Gb.set(o[8],o[9],o[10]).length();this.determinant()<0&&(u=-u),e.x=o[12],e.y=o[13],e.z=o[14],Mu.copy(this);const x=1/u,T=1/h,I=1/m;return Mu.elements[0]*=x,Mu.elements[1]*=x,Mu.elements[2]*=x,Mu.elements[4]*=T,Mu.elements[5]*=T,Mu.elements[6]*=T,Mu.elements[8]*=I,Mu.elements[9]*=I,Mu.elements[10]*=I,n.setFromRotationMatrix(Mu),r.x=u,r.y=h,r.z=m,this}makePerspective(e,n,r,o,u,h,m=gh){const _=this.elements,x=2*u/(n-e),T=2*u/(r-o),I=(n+e)/(n-e),N=(r+o)/(r-o);let H,Z;if(m===gh)H=-(h+u)/(h-u),Z=-2*h*u/(h-u);else if(m===O3)H=-h/(h-u),Z=-h*u/(h-u);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+m);return _[0]=x,_[4]=0,_[8]=I,_[12]=0,_[1]=0,_[5]=T,_[9]=N,_[13]=0,_[2]=0,_[6]=0,_[10]=H,_[14]=Z,_[3]=0,_[7]=0,_[11]=-1,_[15]=0,this}makeOrthographic(e,n,r,o,u,h,m=gh){const _=this.elements,x=1/(n-e),T=1/(r-o),I=1/(h-u),N=(n+e)*x,H=(r+o)*T;let Z,j;if(m===gh)Z=(h+u)*I,j=-2*I;else if(m===O3)Z=u*I,j=-1*I;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+m);return _[0]=2*x,_[4]=0,_[8]=0,_[12]=-N,_[1]=0,_[5]=2*T,_[9]=0,_[13]=-H,_[2]=0,_[6]=0,_[10]=j,_[14]=-Z,_[3]=0,_[7]=0,_[11]=0,_[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let o=0;o<16;o++)if(n[o]!==r[o])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Gb=new dt,Mu=new uo,hNe=new dt(0,0,0),pNe=new dt(1,1,1),vf=new dt,yD=new dt,Da=new dt,pve=new uo,fve=new TP;class AP{constructor(e=0,n=0,r=0,o=AP.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,o=this._order){return this._x=e,this._y=n,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const o=e.elements,u=o[0],h=o[4],m=o[8],_=o[1],x=o[5],T=o[9],I=o[2],N=o[6],H=o[10];switch(n){case"XYZ":this._y=Math.asin(zs(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-T,H),this._z=Math.atan2(-h,u)):(this._x=Math.atan2(N,x),this._z=0);break;case"YXZ":this._x=Math.asin(-zs(T,-1,1)),Math.abs(T)<.9999999?(this._y=Math.atan2(m,H),this._z=Math.atan2(_,x)):(this._y=Math.atan2(-I,u),this._z=0);break;case"ZXY":this._x=Math.asin(zs(N,-1,1)),Math.abs(N)<.9999999?(this._y=Math.atan2(-I,H),this._z=Math.atan2(-h,x)):(this._y=0,this._z=Math.atan2(_,u));break;case"ZYX":this._y=Math.asin(-zs(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(N,H),this._z=Math.atan2(_,u)):(this._x=0,this._z=Math.atan2(-h,x));break;case"YZX":this._z=Math.asin(zs(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-T,x),this._y=Math.atan2(-I,u)):(this._x=0,this._y=Math.atan2(m,H));break;case"XZY":this._z=Math.asin(-zs(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(N,x),this._y=Math.atan2(m,u)):(this._x=Math.atan2(-T,H),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return pve.makeRotationFromQuaternion(e),this.setFromRotationMatrix(pve,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return fve.setFromEuler(this),this.setFromQuaternion(fve,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}AP.DEFAULT_ORDER="XYZ";class W_e{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let fNe=0;const mve=new dt,Wb=new TP,sh=new uo,bD=new dt,sC=new dt,mNe=new dt,vNe=new TP,vve=new dt(1,0,0),gve=new dt(0,1,0),yve=new dt(0,0,1),gNe={type:"added"},bve={type:"removed"};class Do extends Kg{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:fNe++}),this.uuid=kP(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Do.DEFAULT_UP.clone();const e=new dt,n=new AP,r=new TP,o=new dt(1,1,1);function u(){r.setFromEuler(n,!1)}function h(){n.setFromQuaternion(r,void 0,!1)}n._onChange(u),r._onChange(h),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new uo},normalMatrix:{value:new ir}}),this.matrix=new uo,this.matrixWorld=new uo,this.matrixAutoUpdate=Do.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Do.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new W_e,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Wb.setFromAxisAngle(e,n),this.quaternion.multiply(Wb),this}rotateOnWorldAxis(e,n){return Wb.setFromAxisAngle(e,n),this.quaternion.premultiply(Wb),this}rotateX(e){return this.rotateOnAxis(vve,e)}rotateY(e){return this.rotateOnAxis(gve,e)}rotateZ(e){return this.rotateOnAxis(yve,e)}translateOnAxis(e,n){return mve.copy(e).applyQuaternion(this.quaternion),this.position.add(mve.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(vve,e)}translateY(e){return this.translateOnAxis(gve,e)}translateZ(e){return this.translateOnAxis(yve,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(sh.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?bD.copy(e):bD.set(e,n,r);const o=this.parent;this.updateWorldMatrix(!0,!1),sC.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?sh.lookAt(sC,bD,this.up):sh.lookAt(bD,sC,this.up),this.quaternion.setFromRotationMatrix(sh),o&&(sh.extractRotation(o.matrixWorld),Wb.setFromRotationMatrix(sh),this.quaternion.premultiply(Wb.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(gNe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(bve)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(bve)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),sh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),sh.multiply(e.parent.matrixWorld)),e.applyMatrix4(sh),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,o=this.children.length;r<o;r++){const h=this.children[r].getObjectByProperty(e,n);if(h!==void 0)return h}}getObjectsByProperty(e,n){let r=[];this[e]===n&&r.push(this);for(let o=0,u=this.children.length;o<u;o++){const h=this.children[o].getObjectsByProperty(e,n);h.length>0&&(r=r.concat(h))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sC,e,mNe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(sC,vNe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,o=n.length;r<o;r++){const u=n[r];(u.matrixWorldAutoUpdate===!0||e===!0)&&u.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const o=this.children;for(let u=0,h=o.length;u<h;u++){const m=o[u];m.matrixWorldAutoUpdate===!0&&m.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON()));function u(m,_){return m[_.uuid]===void 0&&(m[_.uuid]=_.toJSON(e)),_.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=u(e.geometries,this.geometry);const m=this.geometry.parameters;if(m!==void 0&&m.shapes!==void 0){const _=m.shapes;if(Array.isArray(_))for(let x=0,T=_.length;x<T;x++){const I=_[x];u(e.shapes,I)}else u(e.shapes,_)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(u(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const m=[];for(let _=0,x=this.material.length;_<x;_++)m.push(u(e.materials,this.material[_]));o.material=m}else o.material=u(e.materials,this.material);if(this.children.length>0){o.children=[];for(let m=0;m<this.children.length;m++)o.children.push(this.children[m].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let m=0;m<this.animations.length;m++){const _=this.animations[m];o.animations.push(u(e.animations,_))}}if(n){const m=h(e.geometries),_=h(e.materials),x=h(e.textures),T=h(e.images),I=h(e.shapes),N=h(e.skeletons),H=h(e.animations),Z=h(e.nodes);m.length>0&&(r.geometries=m),_.length>0&&(r.materials=_),x.length>0&&(r.textures=x),T.length>0&&(r.images=T),I.length>0&&(r.shapes=I),N.length>0&&(r.skeletons=N),H.length>0&&(r.animations=H),Z.length>0&&(r.nodes=Z)}return r.object=o,r;function h(m){const _=[];for(const x in m){const T=m[x];delete T.metadata,_.push(T)}return _}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const o=e.children[r];this.add(o.clone())}return this}}Do.DEFAULT_UP=new dt(0,1,0);Do.DEFAULT_MATRIX_AUTO_UPDATE=!0;Do.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Au=new dt,ah=new dt,Q6=new dt,lh=new dt,$b=new dt,Kb=new dt,_ve=new dt,J6=new dt,e8=new dt,t8=new dt;let _D=!1;class Lu{constructor(e=new dt,n=new dt,r=new dt){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,o){o.subVectors(r,n),Au.subVectors(e,n),o.cross(Au);const u=o.lengthSq();return u>0?o.multiplyScalar(1/Math.sqrt(u)):o.set(0,0,0)}static getBarycoord(e,n,r,o,u){Au.subVectors(o,n),ah.subVectors(r,n),Q6.subVectors(e,n);const h=Au.dot(Au),m=Au.dot(ah),_=Au.dot(Q6),x=ah.dot(ah),T=ah.dot(Q6),I=h*x-m*m;if(I===0)return u.set(-2,-1,-1);const N=1/I,H=(x*_-m*T)*N,Z=(h*T-m*_)*N;return u.set(1-H-Z,Z,H)}static containsPoint(e,n,r,o){return this.getBarycoord(e,n,r,o,lh),lh.x>=0&&lh.y>=0&&lh.x+lh.y<=1}static getUV(e,n,r,o,u,h,m,_){return _D===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),_D=!0),this.getInterpolation(e,n,r,o,u,h,m,_)}static getInterpolation(e,n,r,o,u,h,m,_){return this.getBarycoord(e,n,r,o,lh),_.setScalar(0),_.addScaledVector(u,lh.x),_.addScaledVector(h,lh.y),_.addScaledVector(m,lh.z),_}static isFrontFacing(e,n,r,o){return Au.subVectors(r,n),ah.subVectors(e,n),Au.cross(ah).dot(o)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,o){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,n,r,o){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Au.subVectors(this.c,this.b),ah.subVectors(this.a,this.b),Au.cross(ah).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Lu.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Lu.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,o,u){return _D===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),_D=!0),Lu.getInterpolation(e,this.a,this.b,this.c,n,r,o,u)}getInterpolation(e,n,r,o,u){return Lu.getInterpolation(e,this.a,this.b,this.c,n,r,o,u)}containsPoint(e){return Lu.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Lu.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,o=this.b,u=this.c;let h,m;$b.subVectors(o,r),Kb.subVectors(u,r),J6.subVectors(e,r);const _=$b.dot(J6),x=Kb.dot(J6);if(_<=0&&x<=0)return n.copy(r);e8.subVectors(e,o);const T=$b.dot(e8),I=Kb.dot(e8);if(T>=0&&I<=T)return n.copy(o);const N=_*I-T*x;if(N<=0&&_>=0&&T<=0)return h=_/(_-T),n.copy(r).addScaledVector($b,h);t8.subVectors(e,u);const H=$b.dot(t8),Z=Kb.dot(t8);if(Z>=0&&H<=Z)return n.copy(u);const j=H*x-_*Z;if(j<=0&&x>=0&&Z<=0)return m=x/(x-Z),n.copy(r).addScaledVector(Kb,m);const z=T*Z-H*I;if(z<=0&&I-T>=0&&H-Z>=0)return _ve.subVectors(u,o),m=(I-T)/(I-T+(H-Z)),n.copy(o).addScaledVector(_ve,m);const U=1/(z+j+N);return h=j*U,m=N*U,n.copy(r).addScaledVector($b,h).addScaledVector(Kb,m)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let yNe=0;class nw extends Kg{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:yNe++}),this.uuid=kP(),this.name="",this.type="Material",this.blending=R_,this.side=Jf,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=M_e,this.blendDst=A_e,this.blendEquation=a_,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=BH,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=GLe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=V6,this.stencilZFail=V6,this.stencilZPass=V6,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const o=this[n];if(o===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(r):o&&o.isVector3&&r&&r.isVector3?o.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==R_&&(r.blending=this.blending),this.side!==Jf&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function o(u){const h=[];for(const m in u){const _=u[m];delete _.metadata,h.push(_)}return h}if(n){const u=o(e.textures),h=o(e.images);u.length>0&&(r.textures=u),h.length>0&&(r.images=h)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const o=n.length;r=new Array(o);for(let u=0;u!==o;++u)r[u]=n[u].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const $_e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Iu={h:0,s:0,l:0},wD={h:0,s:0,l:0};function n8(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Pr{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=tr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Tu.toWorkingColorSpace(this,n),this}setRGB(e,n,r,o=Tu.workingColorSpace){return this.r=e,this.g=n,this.b=r,Tu.toWorkingColorSpace(this,o),this}setHSL(e,n,r,o=Tu.workingColorSpace){if(e=JLe(e,1),n=zs(n,0,1),r=zs(r,0,1),n===0)this.r=this.g=this.b=r;else{const u=r<=.5?r*(1+n):r+n-r*n,h=2*r-u;this.r=n8(h,u,e+1/3),this.g=n8(h,u,e),this.b=n8(h,u,e-1/3)}return Tu.toWorkingColorSpace(this,o),this}setStyle(e,n=tr){function r(u){u!==void 0&&parseFloat(u)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let u;const h=o[1],m=o[2];switch(h){case"rgb":case"rgba":if(u=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return r(u[4]),this.setRGB(Math.min(255,parseInt(u[1],10))/255,Math.min(255,parseInt(u[2],10))/255,Math.min(255,parseInt(u[3],10))/255,n);if(u=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return r(u[4]),this.setRGB(Math.min(100,parseInt(u[1],10))/100,Math.min(100,parseInt(u[2],10))/100,Math.min(100,parseInt(u[3],10))/100,n);break;case"hsl":case"hsla":if(u=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return r(u[4]),this.setHSL(parseFloat(u[1])/360,parseFloat(u[2])/100,parseFloat(u[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const u=o[1],h=u.length;if(h===3)return this.setRGB(parseInt(u.charAt(0),16)/15,parseInt(u.charAt(1),16)/15,parseInt(u.charAt(2),16)/15,n);if(h===6)return this.setHex(parseInt(u,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=tr){const r=$_e[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=O_(e.r),this.g=O_(e.g),this.b=O_(e.b),this}copyLinearToSRGB(e){return this.r=G6(e.r),this.g=G6(e.g),this.b=G6(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=tr){return Tu.fromWorkingColorSpace(vs.copy(this),e),Math.round(zs(vs.r*255,0,255))*65536+Math.round(zs(vs.g*255,0,255))*256+Math.round(zs(vs.b*255,0,255))}getHexString(e=tr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Tu.workingColorSpace){Tu.fromWorkingColorSpace(vs.copy(this),n);const r=vs.r,o=vs.g,u=vs.b,h=Math.max(r,o,u),m=Math.min(r,o,u);let _,x;const T=(m+h)/2;if(m===h)_=0,x=0;else{const I=h-m;switch(x=T<=.5?I/(h+m):I/(2-h-m),h){case r:_=(o-u)/I+(o<u?6:0);break;case o:_=(u-r)/I+2;break;case u:_=(r-o)/I+4;break}_/=6}return e.h=_,e.s=x,e.l=T,e}getRGB(e,n=Tu.workingColorSpace){return Tu.fromWorkingColorSpace(vs.copy(this),n),e.r=vs.r,e.g=vs.g,e.b=vs.b,e}getStyle(e=tr){Tu.fromWorkingColorSpace(vs.copy(this),e);const n=vs.r,r=vs.g,o=vs.b;return e!==tr?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(o*255)})`}offsetHSL(e,n,r){return this.getHSL(Iu),Iu.h+=e,Iu.s+=n,Iu.l+=r,this.setHSL(Iu.h,Iu.s,Iu.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Iu),e.getHSL(wD);const r=z6(Iu.h,wD.h,n),o=z6(Iu.s,wD.s,n),u=z6(Iu.l,wD.l,n);return this.setHSL(r,o,u),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,o=this.b,u=e.elements;return this.r=u[0]*n+u[3]*r+u[6]*o,this.g=u[1]*n+u[4]*r+u[7]*o,this.b=u[2]*n+u[5]*r+u[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const vs=new Pr;Pr.NAMES=$_e;class _G extends nw{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Pr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=I_e,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const so=new dt,xD=new kr;class zc{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=lve,this.updateRange={offset:0,count:-1},this.gpuType=Of,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let o=0,u=this.itemSize;o<u;o++)this.array[e+o]=n.array[r+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)xD.fromBufferAttribute(this,n),xD.applyMatrix3(e),this.setXY(n,xD.x,xD.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyMatrix3(e),this.setXYZ(n,so.x,so.y,so.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyMatrix4(e),this.setXYZ(n,so.x,so.y,so.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyNormalMatrix(e),this.setXYZ(n,so.x,so.y,so.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.transformDirection(e),this.setXYZ(n,so.x,so.y,so.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=rC(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=da(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=rC(n,this.array)),n}setX(e,n){return this.normalized&&(n=da(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=rC(n,this.array)),n}setY(e,n){return this.normalized&&(n=da(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=rC(n,this.array)),n}setZ(e,n){return this.normalized&&(n=da(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=rC(n,this.array)),n}setW(e,n){return this.normalized&&(n=da(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=da(n,this.array),r=da(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,o){return e*=this.itemSize,this.normalized&&(n=da(n,this.array),r=da(r,this.array),o=da(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=o,this}setXYZW(e,n,r,o,u){return e*=this.itemSize,this.normalized&&(n=da(n,this.array),r=da(r,this.array),o=da(o,this.array),u=da(u,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=o,this.array[e+3]=u,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==lve&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class K_e extends zc{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class q_e extends zc{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Hc extends zc{constructor(e,n,r){super(new Float32Array(e),n,r)}}let bNe=0;const Pl=new uo,r8=new Do,qb=new dt,La=new MP,aC=new MP,To=new dt;class lm extends Kg{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:bNe++}),this.uuid=kP(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(j_e(e)?q_e:K_e)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const u=new ir().getNormalMatrix(e);r.applyNormalMatrix(u),r.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Pl.makeRotationFromQuaternion(e),this.applyMatrix4(Pl),this}rotateX(e){return Pl.makeRotationX(e),this.applyMatrix4(Pl),this}rotateY(e){return Pl.makeRotationY(e),this.applyMatrix4(Pl),this}rotateZ(e){return Pl.makeRotationZ(e),this.applyMatrix4(Pl),this}translate(e,n,r){return Pl.makeTranslation(e,n,r),this.applyMatrix4(Pl),this}scale(e,n,r){return Pl.makeScale(e,n,r),this.applyMatrix4(Pl),this}lookAt(e){return r8.lookAt(e),r8.updateMatrix(),this.applyMatrix4(r8.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(qb).negate(),this.translate(qb.x,qb.y,qb.z),this}setFromPoints(e){const n=[];for(let r=0,o=e.length;r<o;r++){const u=e[r];n.push(u.x,u.y,u.z||0)}return this.setAttribute("position",new Hc(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new MP);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new dt(-1/0,-1/0,-1/0),new dt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,o=n.length;r<o;r++){const u=n[r];La.setFromBufferAttribute(u),this.morphTargetsRelative?(To.addVectors(this.boundingBox.min,La.min),this.boundingBox.expandByPoint(To),To.addVectors(this.boundingBox.max,La.max),this.boundingBox.expandByPoint(To)):(this.boundingBox.expandByPoint(La.min),this.boundingBox.expandByPoint(La.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bG);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new dt,1/0);return}if(e){const r=this.boundingSphere.center;if(La.setFromBufferAttribute(e),n)for(let u=0,h=n.length;u<h;u++){const m=n[u];aC.setFromBufferAttribute(m),this.morphTargetsRelative?(To.addVectors(La.min,aC.min),La.expandByPoint(To),To.addVectors(La.max,aC.max),La.expandByPoint(To)):(La.expandByPoint(aC.min),La.expandByPoint(aC.max))}La.getCenter(r);let o=0;for(let u=0,h=e.count;u<h;u++)To.fromBufferAttribute(e,u),o=Math.max(o,r.distanceToSquared(To));if(n)for(let u=0,h=n.length;u<h;u++){const m=n[u],_=this.morphTargetsRelative;for(let x=0,T=m.count;x<T;x++)To.fromBufferAttribute(m,x),_&&(qb.fromBufferAttribute(e,x),To.add(qb)),o=Math.max(o,r.distanceToSquared(To))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,o=n.position.array,u=n.normal.array,h=n.uv.array,m=o.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zc(new Float32Array(4*m),4));const _=this.getAttribute("tangent").array,x=[],T=[];for(let ye=0;ye<m;ye++)x[ye]=new dt,T[ye]=new dt;const I=new dt,N=new dt,H=new dt,Z=new kr,j=new kr,z=new kr,U=new dt,C=new dt;function K(ye,St,kt){I.fromArray(o,ye*3),N.fromArray(o,St*3),H.fromArray(o,kt*3),Z.fromArray(h,ye*2),j.fromArray(h,St*2),z.fromArray(h,kt*2),N.sub(I),H.sub(I),j.sub(Z),z.sub(Z);const it=1/(j.x*z.y-z.x*j.y);isFinite(it)&&(U.copy(N).multiplyScalar(z.y).addScaledVector(H,-j.y).multiplyScalar(it),C.copy(H).multiplyScalar(j.x).addScaledVector(N,-z.x).multiplyScalar(it),x[ye].add(U),x[St].add(U),x[kt].add(U),T[ye].add(C),T[St].add(C),T[kt].add(C))}let te=this.groups;te.length===0&&(te=[{start:0,count:r.length}]);for(let ye=0,St=te.length;ye<St;++ye){const kt=te[ye],it=kt.start,me=kt.count;for(let lt=it,Fe=it+me;lt<Fe;lt+=3)K(r[lt+0],r[lt+1],r[lt+2])}const pe=new dt,Q=new dt,Se=new dt,Pe=new dt;function G(ye){Se.fromArray(u,ye*3),Pe.copy(Se);const St=x[ye];pe.copy(St),pe.sub(Se.multiplyScalar(Se.dot(St))).normalize(),Q.crossVectors(Pe,St);const it=Q.dot(T[ye])<0?-1:1;_[ye*4]=pe.x,_[ye*4+1]=pe.y,_[ye*4+2]=pe.z,_[ye*4+3]=it}for(let ye=0,St=te.length;ye<St;++ye){const kt=te[ye],it=kt.start,me=kt.count;for(let lt=it,Fe=it+me;lt<Fe;lt+=3)G(r[lt+0]),G(r[lt+1]),G(r[lt+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new zc(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let N=0,H=r.count;N<H;N++)r.setXYZ(N,0,0,0);const o=new dt,u=new dt,h=new dt,m=new dt,_=new dt,x=new dt,T=new dt,I=new dt;if(e)for(let N=0,H=e.count;N<H;N+=3){const Z=e.getX(N+0),j=e.getX(N+1),z=e.getX(N+2);o.fromBufferAttribute(n,Z),u.fromBufferAttribute(n,j),h.fromBufferAttribute(n,z),T.subVectors(h,u),I.subVectors(o,u),T.cross(I),m.fromBufferAttribute(r,Z),_.fromBufferAttribute(r,j),x.fromBufferAttribute(r,z),m.add(T),_.add(T),x.add(T),r.setXYZ(Z,m.x,m.y,m.z),r.setXYZ(j,_.x,_.y,_.z),r.setXYZ(z,x.x,x.y,x.z)}else for(let N=0,H=n.count;N<H;N+=3)o.fromBufferAttribute(n,N+0),u.fromBufferAttribute(n,N+1),h.fromBufferAttribute(n,N+2),T.subVectors(h,u),I.subVectors(o,u),T.cross(I),r.setXYZ(N+0,T.x,T.y,T.z),r.setXYZ(N+1,T.x,T.y,T.z),r.setXYZ(N+2,T.x,T.y,T.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)To.fromBufferAttribute(e,n),To.normalize(),e.setXYZ(n,To.x,To.y,To.z)}toNonIndexed(){function e(m,_){const x=m.array,T=m.itemSize,I=m.normalized,N=new x.constructor(_.length*T);let H=0,Z=0;for(let j=0,z=_.length;j<z;j++){m.isInterleavedBufferAttribute?H=_[j]*m.data.stride+m.offset:H=_[j]*T;for(let U=0;U<T;U++)N[Z++]=x[H++]}return new zc(N,T,I)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new lm,r=this.index.array,o=this.attributes;for(const m in o){const _=o[m],x=e(_,r);n.setAttribute(m,x)}const u=this.morphAttributes;for(const m in u){const _=[],x=u[m];for(let T=0,I=x.length;T<I;T++){const N=x[T],H=e(N,r);_.push(H)}n.morphAttributes[m]=_}n.morphTargetsRelative=this.morphTargetsRelative;const h=this.groups;for(let m=0,_=h.length;m<_;m++){const x=h[m];n.addGroup(x.start,x.count,x.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const _=this.parameters;for(const x in _)_[x]!==void 0&&(e[x]=_[x]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const _ in r){const x=r[_];e.data.attributes[_]=x.toJSON(e.data)}const o={};let u=!1;for(const _ in this.morphAttributes){const x=this.morphAttributes[_],T=[];for(let I=0,N=x.length;I<N;I++){const H=x[I];T.push(H.toJSON(e.data))}T.length>0&&(o[_]=T,u=!0)}u&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const h=this.groups;h.length>0&&(e.data.groups=JSON.parse(JSON.stringify(h)));const m=this.boundingSphere;return m!==null&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const o=e.attributes;for(const x in o){const T=o[x];this.setAttribute(x,T.clone(n))}const u=e.morphAttributes;for(const x in u){const T=[],I=u[x];for(let N=0,H=I.length;N<H;N++)T.push(I[N].clone(n));this.morphAttributes[x]=T}this.morphTargetsRelative=e.morphTargetsRelative;const h=e.groups;for(let x=0,T=h.length;x<T;x++){const I=h[x];this.addGroup(I.start,I.count,I.materialIndex)}const m=e.boundingBox;m!==null&&(this.boundingBox=m.clone());const _=e.boundingSphere;return _!==null&&(this.boundingSphere=_.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const wve=new uo,ig=new dNe,SD=new bG,xve=new dt,Xb=new dt,Yb=new dt,Zb=new dt,i8=new dt,ED=new dt,CD=new kr,PD=new kr,kD=new kr,Sve=new dt,Eve=new dt,Cve=new dt,TD=new dt,MD=new dt;class Ua extends Do{constructor(e=new lm,n=new _G){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const o=n[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,h=o.length;u<h;u++){const m=o[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=u}}}}getVertexPosition(e,n){const r=this.geometry,o=r.attributes.position,u=r.morphAttributes.position,h=r.morphTargetsRelative;n.fromBufferAttribute(o,e);const m=this.morphTargetInfluences;if(u&&m){ED.set(0,0,0);for(let _=0,x=u.length;_<x;_++){const T=m[_],I=u[_];T!==0&&(i8.fromBufferAttribute(I,e),h?ED.addScaledVector(i8,T):ED.addScaledVector(i8.sub(n),T))}n.add(ED)}return n}raycast(e,n){const r=this.geometry,o=this.material,u=this.matrixWorld;o!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),SD.copy(r.boundingSphere),SD.applyMatrix4(u),ig.copy(e.ray).recast(e.near),!(SD.containsPoint(ig.origin)===!1&&(ig.intersectSphere(SD,xve)===null||ig.origin.distanceToSquared(xve)>(e.far-e.near)**2))&&(wve.copy(u).invert(),ig.copy(e.ray).applyMatrix4(wve),!(r.boundingBox!==null&&ig.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,ig)))}_computeIntersections(e,n,r){let o;const u=this.geometry,h=this.material,m=u.index,_=u.attributes.position,x=u.attributes.uv,T=u.attributes.uv1,I=u.attributes.normal,N=u.groups,H=u.drawRange;if(m!==null)if(Array.isArray(h))for(let Z=0,j=N.length;Z<j;Z++){const z=N[Z],U=h[z.materialIndex],C=Math.max(z.start,H.start),K=Math.min(m.count,Math.min(z.start+z.count,H.start+H.count));for(let te=C,pe=K;te<pe;te+=3){const Q=m.getX(te),Se=m.getX(te+1),Pe=m.getX(te+2);o=AD(this,U,e,r,x,T,I,Q,Se,Pe),o&&(o.faceIndex=Math.floor(te/3),o.face.materialIndex=z.materialIndex,n.push(o))}}else{const Z=Math.max(0,H.start),j=Math.min(m.count,H.start+H.count);for(let z=Z,U=j;z<U;z+=3){const C=m.getX(z),K=m.getX(z+1),te=m.getX(z+2);o=AD(this,h,e,r,x,T,I,C,K,te),o&&(o.faceIndex=Math.floor(z/3),n.push(o))}}else if(_!==void 0)if(Array.isArray(h))for(let Z=0,j=N.length;Z<j;Z++){const z=N[Z],U=h[z.materialIndex],C=Math.max(z.start,H.start),K=Math.min(_.count,Math.min(z.start+z.count,H.start+H.count));for(let te=C,pe=K;te<pe;te+=3){const Q=te,Se=te+1,Pe=te+2;o=AD(this,U,e,r,x,T,I,Q,Se,Pe),o&&(o.faceIndex=Math.floor(te/3),o.face.materialIndex=z.materialIndex,n.push(o))}}else{const Z=Math.max(0,H.start),j=Math.min(_.count,H.start+H.count);for(let z=Z,U=j;z<U;z+=3){const C=z,K=z+1,te=z+2;o=AD(this,h,e,r,x,T,I,C,K,te),o&&(o.faceIndex=Math.floor(z/3),n.push(o))}}}}function _Ne(t,e,n,r,o,u,h,m){let _;if(e.side===ya?_=r.intersectTriangle(h,u,o,!0,m):_=r.intersectTriangle(o,u,h,e.side===Jf,m),_===null)return null;MD.copy(m),MD.applyMatrix4(t.matrixWorld);const x=n.ray.origin.distanceTo(MD);return x<n.near||x>n.far?null:{distance:x,point:MD.clone(),object:t}}function AD(t,e,n,r,o,u,h,m,_,x){t.getVertexPosition(m,Xb),t.getVertexPosition(_,Yb),t.getVertexPosition(x,Zb);const T=_Ne(t,e,n,r,Xb,Yb,Zb,TD);if(T){o&&(CD.fromBufferAttribute(o,m),PD.fromBufferAttribute(o,_),kD.fromBufferAttribute(o,x),T.uv=Lu.getInterpolation(TD,Xb,Yb,Zb,CD,PD,kD,new kr)),u&&(CD.fromBufferAttribute(u,m),PD.fromBufferAttribute(u,_),kD.fromBufferAttribute(u,x),T.uv1=Lu.getInterpolation(TD,Xb,Yb,Zb,CD,PD,kD,new kr),T.uv2=T.uv1),h&&(Sve.fromBufferAttribute(h,m),Eve.fromBufferAttribute(h,_),Cve.fromBufferAttribute(h,x),T.normal=Lu.getInterpolation(TD,Xb,Yb,Zb,Sve,Eve,Cve,new dt),T.normal.dot(r.direction)>0&&T.normal.multiplyScalar(-1));const I={a:m,b:_,c:x,normal:new dt,materialIndex:0};Lu.getNormal(Xb,Yb,Zb,I.normal),T.face=I}return T}class IP extends lm{constructor(e=1,n=1,r=1,o=1,u=1,h=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:o,heightSegments:u,depthSegments:h};const m=this;o=Math.floor(o),u=Math.floor(u),h=Math.floor(h);const _=[],x=[],T=[],I=[];let N=0,H=0;Z("z","y","x",-1,-1,r,n,e,h,u,0),Z("z","y","x",1,-1,r,n,-e,h,u,1),Z("x","z","y",1,1,e,r,n,o,h,2),Z("x","z","y",1,-1,e,r,-n,o,h,3),Z("x","y","z",1,-1,e,n,r,o,u,4),Z("x","y","z",-1,-1,e,n,-r,o,u,5),this.setIndex(_),this.setAttribute("position",new Hc(x,3)),this.setAttribute("normal",new Hc(T,3)),this.setAttribute("uv",new Hc(I,2));function Z(j,z,U,C,K,te,pe,Q,Se,Pe,G){const ye=te/Se,St=pe/Pe,kt=te/2,it=pe/2,me=Q/2,lt=Se+1,Fe=Pe+1;let vt=0,Ge=0;const mt=new dt;for(let Je=0;Je<Fe;Je++){const Be=Je*St-it;for(let nt=0;nt<lt;nt++){const Wt=nt*ye-kt;mt[j]=Wt*C,mt[z]=Be*K,mt[U]=me,x.push(mt.x,mt.y,mt.z),mt[j]=0,mt[z]=0,mt[U]=Q>0?1:-1,T.push(mt.x,mt.y,mt.z),I.push(nt/Se),I.push(1-Je/Pe),vt+=1}}for(let Je=0;Je<Pe;Je++)for(let Be=0;Be<Se;Be++){const nt=N+Be+lt*Je,Wt=N+Be+lt*(Je+1),Ut=N+(Be+1)+lt*(Je+1),Dt=N+(Be+1)+lt*Je;_.push(nt,Wt,Dt),_.push(Wt,Ut,Dt),Ge+=6}m.addGroup(H,Ge,G),H+=Ge,N+=vt}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new IP(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function q_(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const o=t[n][r];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=o.clone():Array.isArray(o)?e[n][r]=o.slice():e[n][r]=o}}return e}function Bs(t){const e={};for(let n=0;n<t.length;n++){const r=q_(t[n]);for(const o in r)e[o]=r[o]}return e}function wNe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function X_e(t){return t.getRenderTarget()===null?t.outputColorSpace:Wc}const xNe={clone:q_,merge:Bs};var SNe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,ENe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class em extends nw{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=SNe,this.fragmentShader=ENe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=q_(e.uniforms),this.uniformsGroups=wNe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const o in this.uniforms){const h=this.uniforms[o].value;h&&h.isTexture?n.uniforms[o]={type:"t",value:h.toJSON(e).uuid}:h&&h.isColor?n.uniforms[o]={type:"c",value:h.getHex()}:h&&h.isVector2?n.uniforms[o]={type:"v2",value:h.toArray()}:h&&h.isVector3?n.uniforms[o]={type:"v3",value:h.toArray()}:h&&h.isVector4?n.uniforms[o]={type:"v4",value:h.toArray()}:h&&h.isMatrix3?n.uniforms[o]={type:"m3",value:h.toArray()}:h&&h.isMatrix4?n.uniforms[o]={type:"m4",value:h.toArray()}:n.uniforms[o]={value:h}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const o in this.extensions)this.extensions[o]===!0&&(r[o]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class wG extends Do{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new uo,this.projectionMatrix=new uo,this.projectionMatrixInverse=new uo,this.coordinateSystem=gh}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Fa extends wG{constructor(e=50,n=1,r=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=o,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=HH*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(j6*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return HH*2*Math.atan(Math.tan(j6*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,o,u,h){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=o,this.view.width=u,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(j6*.5*this.fov)/this.zoom,r=2*n,o=this.aspect*r,u=-.5*o;const h=this.view;if(this.view!==null&&this.view.enabled){const _=h.fullWidth,x=h.fullHeight;u+=h.offsetX*o/_,n-=h.offsetY*r/x,o*=h.width/_,r*=h.height/x}const m=this.filmOffset;m!==0&&(u+=e*m/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+o,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Qb=-90,Jb=1;class CNe extends Do{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null;const o=new Fa(Qb,Jb,e,n);o.layers=this.layers,this.add(o);const u=new Fa(Qb,Jb,e,n);u.layers=this.layers,this.add(u);const h=new Fa(Qb,Jb,e,n);h.layers=this.layers,this.add(h);const m=new Fa(Qb,Jb,e,n);m.layers=this.layers,this.add(m);const _=new Fa(Qb,Jb,e,n);_.layers=this.layers,this.add(_);const x=new Fa(Qb,Jb,e,n);x.layers=this.layers,this.add(x)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,o,u,h,m,_]=n;for(const x of n)this.remove(x);if(e===gh)r.up.set(0,1,0),r.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),u.up.set(0,0,-1),u.lookAt(0,1,0),h.up.set(0,0,1),h.lookAt(0,-1,0),m.up.set(0,1,0),m.lookAt(0,0,1),_.up.set(0,1,0),_.lookAt(0,0,-1);else if(e===O3)r.up.set(0,-1,0),r.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),u.up.set(0,0,1),u.lookAt(0,1,0),h.up.set(0,0,-1),h.lookAt(0,-1,0),m.up.set(0,-1,0),m.lookAt(0,0,1),_.up.set(0,-1,0),_.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const x of n)this.add(x),x.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,u,h,m,_,x]=this.children,T=e.getRenderTarget(),I=e.xr.enabled;e.xr.enabled=!1;const N=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,o),e.setRenderTarget(r,1),e.render(n,u),e.setRenderTarget(r,2),e.render(n,h),e.setRenderTarget(r,3),e.render(n,m),e.setRenderTarget(r,4),e.render(n,_),r.texture.generateMipmaps=N,e.setRenderTarget(r,5),e.render(n,x),e.setRenderTarget(T),e.xr.enabled=I,r.texture.needsPMREMUpdate=!0}}class Y_e extends _s{constructor(e,n,r,o,u,h,m,_,x,T){e=e!==void 0?e:[],n=n!==void 0?n:W_,super(e,n,r,o,u,h,m,_,x,T),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class PNe extends Fg{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},o=[r,r,r,r,r,r];n.encoding!==void 0&&(NC("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Tg?tr:Mg),this.texture=new Y_e(o,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Ol}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new IP(5,5,5),u=new em({name:"CubemapFromEquirect",uniforms:q_(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ya,blending:Gf});u.uniforms.tEquirect.value=n;const h=new Ua(o,u),m=n.minFilter;return n.minFilter===oP&&(n.minFilter=Ol),new CNe(1,10,this).update(e,h),n.minFilter=m,h.geometry.dispose(),h.material.dispose(),this}clear(e,n,r,o){const u=e.getRenderTarget();for(let h=0;h<6;h++)e.setRenderTarget(this,h),e.clear(n,r,o);e.setRenderTarget(u)}}const o8=new dt,kNe=new dt,TNe=new ir;class mg{constructor(e=new dt(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,o){return this.normal.set(e,n,r),this.constant=o,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const o=o8.subVectors(r,n).cross(kNe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(o8),o=this.normal.dot(r);if(o===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const u=-(e.start.dot(this.normal)+this.constant)/o;return u<0||u>1?null:n.copy(e.start).addScaledVector(r,u)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||TNe.getNormalMatrix(e),o=this.coplanarPoint(o8).applyMatrix4(e),u=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(u),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const og=new bG,ID=new dt;class xG{constructor(e=new mg,n=new mg,r=new mg,o=new mg,u=new mg,h=new mg){this.planes=[e,n,r,o,u,h]}set(e,n,r,o,u,h){const m=this.planes;return m[0].copy(e),m[1].copy(n),m[2].copy(r),m[3].copy(o),m[4].copy(u),m[5].copy(h),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=gh){const r=this.planes,o=e.elements,u=o[0],h=o[1],m=o[2],_=o[3],x=o[4],T=o[5],I=o[6],N=o[7],H=o[8],Z=o[9],j=o[10],z=o[11],U=o[12],C=o[13],K=o[14],te=o[15];if(r[0].setComponents(_-u,N-x,z-H,te-U).normalize(),r[1].setComponents(_+u,N+x,z+H,te+U).normalize(),r[2].setComponents(_+h,N+T,z+Z,te+C).normalize(),r[3].setComponents(_-h,N-T,z-Z,te-C).normalize(),r[4].setComponents(_-m,N-I,z-j,te-K).normalize(),n===gh)r[5].setComponents(_+m,N+I,z+j,te+K).normalize();else if(n===O3)r[5].setComponents(m,I,j,K).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),og.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),og.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(og)}intersectsSprite(e){return og.center.set(0,0,0),og.radius=.7071067811865476,og.applyMatrix4(e.matrixWorld),this.intersectsSphere(og)}intersectsSphere(e){const n=this.planes,r=e.center,o=-e.radius;for(let u=0;u<6;u++)if(n[u].distanceToPoint(r)<o)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const o=n[r];if(ID.x=o.normal.x>0?e.max.x:e.min.x,ID.y=o.normal.y>0?e.max.y:e.min.y,ID.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(ID)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Z_e(){let t=null,e=!1,n=null,r=null;function o(u,h){n(u,h),r=t.requestAnimationFrame(o)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(o),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(u){n=u},setContext:function(u){t=u}}}function MNe(t,e){const n=e.isWebGL2,r=new WeakMap;function o(x,T){const I=x.array,N=x.usage,H=t.createBuffer();t.bindBuffer(T,H),t.bufferData(T,I,N),x.onUploadCallback();let Z;if(I instanceof Float32Array)Z=t.FLOAT;else if(I instanceof Uint16Array)if(x.isFloat16BufferAttribute)if(n)Z=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else Z=t.UNSIGNED_SHORT;else if(I instanceof Int16Array)Z=t.SHORT;else if(I instanceof Uint32Array)Z=t.UNSIGNED_INT;else if(I instanceof Int32Array)Z=t.INT;else if(I instanceof Int8Array)Z=t.BYTE;else if(I instanceof Uint8Array)Z=t.UNSIGNED_BYTE;else if(I instanceof Uint8ClampedArray)Z=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+I);return{buffer:H,type:Z,bytesPerElement:I.BYTES_PER_ELEMENT,version:x.version}}function u(x,T,I){const N=T.array,H=T.updateRange;t.bindBuffer(I,x),H.count===-1?t.bufferSubData(I,0,N):(n?t.bufferSubData(I,H.offset*N.BYTES_PER_ELEMENT,N,H.offset,H.count):t.bufferSubData(I,H.offset*N.BYTES_PER_ELEMENT,N.subarray(H.offset,H.offset+H.count)),H.count=-1),T.onUploadCallback()}function h(x){return x.isInterleavedBufferAttribute&&(x=x.data),r.get(x)}function m(x){x.isInterleavedBufferAttribute&&(x=x.data);const T=r.get(x);T&&(t.deleteBuffer(T.buffer),r.delete(x))}function _(x,T){if(x.isGLBufferAttribute){const N=r.get(x);(!N||N.version<x.version)&&r.set(x,{buffer:x.buffer,type:x.type,bytesPerElement:x.elementSize,version:x.version});return}x.isInterleavedBufferAttribute&&(x=x.data);const I=r.get(x);I===void 0?r.set(x,o(x,T)):I.version<x.version&&(u(I.buffer,x,T),I.version=x.version)}return{get:h,remove:m,update:_}}class SG extends lm{constructor(e=1,n=1,r=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:o};const u=e/2,h=n/2,m=Math.floor(r),_=Math.floor(o),x=m+1,T=_+1,I=e/m,N=n/_,H=[],Z=[],j=[],z=[];for(let U=0;U<T;U++){const C=U*N-h;for(let K=0;K<x;K++){const te=K*I-u;Z.push(te,-C,0),j.push(0,0,1),z.push(K/m),z.push(1-U/_)}}for(let U=0;U<_;U++)for(let C=0;C<m;C++){const K=C+x*U,te=C+x*(U+1),pe=C+1+x*(U+1),Q=C+1+x*U;H.push(K,te,Q),H.push(te,pe,Q)}this.setIndex(H),this.setAttribute("position",new Hc(Z,3)),this.setAttribute("normal",new Hc(j,3)),this.setAttribute("uv",new Hc(z,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new SG(e.width,e.height,e.widthSegments,e.heightSegments)}}var ANe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,INe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,RNe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,ONe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,DNe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,LNe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,NNe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,FNe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,BNe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,UNe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,VNe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,jNe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,zNe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,HNe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,GNe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,WNe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,$Ne=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,KNe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,qNe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,XNe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,YNe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,ZNe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,QNe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,JNe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,e5e=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,t5e=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,n5e=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,r5e=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,i5e="gl_FragColor = linearToOutputTexel( gl_FragColor );",o5e=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,s5e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,a5e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,l5e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,u5e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,c5e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,d5e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,h5e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,p5e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,f5e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,m5e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,v5e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,g5e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,y5e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,b5e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,_5e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,w5e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,x5e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,S5e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,E5e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,C5e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,P5e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,k5e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,T5e=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,M5e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,A5e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,I5e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,R5e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,O5e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,D5e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,L5e=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,N5e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,F5e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,B5e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,U5e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,V5e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,j5e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,z5e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,H5e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,G5e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,W5e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,$5e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,K5e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,q5e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,X5e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Y5e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Z5e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Q5e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,J5e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,eFe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,tFe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,nFe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,rFe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,iFe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,oFe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,sFe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,aFe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,lFe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,uFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,cFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,dFe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,hFe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,pFe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,fFe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,mFe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,vFe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,gFe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,yFe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,bFe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,_Fe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,wFe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,xFe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,SFe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,EFe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,CFe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,PFe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const kFe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,TFe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,MFe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,AFe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,IFe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,RFe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,OFe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,DFe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,LFe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,NFe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,FFe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,BFe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,UFe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,VFe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jFe=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,zFe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HFe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,GFe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WFe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,$Fe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KFe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,qFe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,XFe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,YFe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZFe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,QFe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JFe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eBe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tBe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,nBe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,rBe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iBe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,oBe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sBe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,er={alphahash_fragment:ANe,alphahash_pars_fragment:INe,alphamap_fragment:RNe,alphamap_pars_fragment:ONe,alphatest_fragment:DNe,alphatest_pars_fragment:LNe,aomap_fragment:NNe,aomap_pars_fragment:FNe,begin_vertex:BNe,beginnormal_vertex:UNe,bsdfs:VNe,iridescence_fragment:jNe,bumpmap_pars_fragment:zNe,clipping_planes_fragment:HNe,clipping_planes_pars_fragment:GNe,clipping_planes_pars_vertex:WNe,clipping_planes_vertex:$Ne,color_fragment:KNe,color_pars_fragment:qNe,color_pars_vertex:XNe,color_vertex:YNe,common:ZNe,cube_uv_reflection_fragment:QNe,defaultnormal_vertex:JNe,displacementmap_pars_vertex:e5e,displacementmap_vertex:t5e,emissivemap_fragment:n5e,emissivemap_pars_fragment:r5e,colorspace_fragment:i5e,colorspace_pars_fragment:o5e,envmap_fragment:s5e,envmap_common_pars_fragment:a5e,envmap_pars_fragment:l5e,envmap_pars_vertex:u5e,envmap_physical_pars_fragment:w5e,envmap_vertex:c5e,fog_vertex:d5e,fog_pars_vertex:h5e,fog_fragment:p5e,fog_pars_fragment:f5e,gradientmap_pars_fragment:m5e,lightmap_fragment:v5e,lightmap_pars_fragment:g5e,lights_lambert_fragment:y5e,lights_lambert_pars_fragment:b5e,lights_pars_begin:_5e,lights_toon_fragment:x5e,lights_toon_pars_fragment:S5e,lights_phong_fragment:E5e,lights_phong_pars_fragment:C5e,lights_physical_fragment:P5e,lights_physical_pars_fragment:k5e,lights_fragment_begin:T5e,lights_fragment_maps:M5e,lights_fragment_end:A5e,logdepthbuf_fragment:I5e,logdepthbuf_pars_fragment:R5e,logdepthbuf_pars_vertex:O5e,logdepthbuf_vertex:D5e,map_fragment:L5e,map_pars_fragment:N5e,map_particle_fragment:F5e,map_particle_pars_fragment:B5e,metalnessmap_fragment:U5e,metalnessmap_pars_fragment:V5e,morphcolor_vertex:j5e,morphnormal_vertex:z5e,morphtarget_pars_vertex:H5e,morphtarget_vertex:G5e,normal_fragment_begin:W5e,normal_fragment_maps:$5e,normal_pars_fragment:K5e,normal_pars_vertex:q5e,normal_vertex:X5e,normalmap_pars_fragment:Y5e,clearcoat_normal_fragment_begin:Z5e,clearcoat_normal_fragment_maps:Q5e,clearcoat_pars_fragment:J5e,iridescence_pars_fragment:eFe,opaque_fragment:tFe,packing:nFe,premultiplied_alpha_fragment:rFe,project_vertex:iFe,dithering_fragment:oFe,dithering_pars_fragment:sFe,roughnessmap_fragment:aFe,roughnessmap_pars_fragment:lFe,shadowmap_pars_fragment:uFe,shadowmap_pars_vertex:cFe,shadowmap_vertex:dFe,shadowmask_pars_fragment:hFe,skinbase_vertex:pFe,skinning_pars_vertex:fFe,skinning_vertex:mFe,skinnormal_vertex:vFe,specularmap_fragment:gFe,specularmap_pars_fragment:yFe,tonemapping_fragment:bFe,tonemapping_pars_fragment:_Fe,transmission_fragment:wFe,transmission_pars_fragment:xFe,uv_pars_fragment:SFe,uv_pars_vertex:EFe,uv_vertex:CFe,worldpos_vertex:PFe,background_vert:kFe,background_frag:TFe,backgroundCube_vert:MFe,backgroundCube_frag:AFe,cube_vert:IFe,cube_frag:RFe,depth_vert:OFe,depth_frag:DFe,distanceRGBA_vert:LFe,distanceRGBA_frag:NFe,equirect_vert:FFe,equirect_frag:BFe,linedashed_vert:UFe,linedashed_frag:VFe,meshbasic_vert:jFe,meshbasic_frag:zFe,meshlambert_vert:HFe,meshlambert_frag:GFe,meshmatcap_vert:WFe,meshmatcap_frag:$Fe,meshnormal_vert:KFe,meshnormal_frag:qFe,meshphong_vert:XFe,meshphong_frag:YFe,meshphysical_vert:ZFe,meshphysical_frag:QFe,meshtoon_vert:JFe,meshtoon_frag:eBe,points_vert:tBe,points_frag:nBe,shadow_vert:rBe,shadow_frag:iBe,sprite_vert:oBe,sprite_frag:sBe},Yt={common:{diffuse:{value:new Pr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ir},alphaMap:{value:null},alphaMapTransform:{value:new ir},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ir}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ir}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ir}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ir},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ir},normalScale:{value:new kr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ir},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ir}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ir}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ir}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ir},alphaTest:{value:0},uvTransform:{value:new ir}},sprite:{diffuse:{value:new Pr(16777215)},opacity:{value:1},center:{value:new kr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ir},alphaMap:{value:null},alphaMapTransform:{value:new ir},alphaTest:{value:0}}},Fc={basic:{uniforms:Bs([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.fog]),vertexShader:er.meshbasic_vert,fragmentShader:er.meshbasic_frag},lambert:{uniforms:Bs([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,Yt.lights,{emissive:{value:new Pr(0)}}]),vertexShader:er.meshlambert_vert,fragmentShader:er.meshlambert_frag},phong:{uniforms:Bs([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,Yt.lights,{emissive:{value:new Pr(0)},specular:{value:new Pr(1118481)},shininess:{value:30}}]),vertexShader:er.meshphong_vert,fragmentShader:er.meshphong_frag},standard:{uniforms:Bs([Yt.common,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.roughnessmap,Yt.metalnessmap,Yt.fog,Yt.lights,{emissive:{value:new Pr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:er.meshphysical_vert,fragmentShader:er.meshphysical_frag},toon:{uniforms:Bs([Yt.common,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.gradientmap,Yt.fog,Yt.lights,{emissive:{value:new Pr(0)}}]),vertexShader:er.meshtoon_vert,fragmentShader:er.meshtoon_frag},matcap:{uniforms:Bs([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,{matcap:{value:null}}]),vertexShader:er.meshmatcap_vert,fragmentShader:er.meshmatcap_frag},points:{uniforms:Bs([Yt.points,Yt.fog]),vertexShader:er.points_vert,fragmentShader:er.points_frag},dashed:{uniforms:Bs([Yt.common,Yt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:er.linedashed_vert,fragmentShader:er.linedashed_frag},depth:{uniforms:Bs([Yt.common,Yt.displacementmap]),vertexShader:er.depth_vert,fragmentShader:er.depth_frag},normal:{uniforms:Bs([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,{opacity:{value:1}}]),vertexShader:er.meshnormal_vert,fragmentShader:er.meshnormal_frag},sprite:{uniforms:Bs([Yt.sprite,Yt.fog]),vertexShader:er.sprite_vert,fragmentShader:er.sprite_frag},background:{uniforms:{uvTransform:{value:new ir},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:er.background_vert,fragmentShader:er.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:er.backgroundCube_vert,fragmentShader:er.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:er.cube_vert,fragmentShader:er.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:er.equirect_vert,fragmentShader:er.equirect_frag},distanceRGBA:{uniforms:Bs([Yt.common,Yt.displacementmap,{referencePosition:{value:new dt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:er.distanceRGBA_vert,fragmentShader:er.distanceRGBA_frag},shadow:{uniforms:Bs([Yt.lights,Yt.fog,{color:{value:new Pr(0)},opacity:{value:1}}]),vertexShader:er.shadow_vert,fragmentShader:er.shadow_frag}};Fc.physical={uniforms:Bs([Fc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ir},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ir},clearcoatNormalScale:{value:new kr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ir},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ir},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ir},sheen:{value:0},sheenColor:{value:new Pr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ir},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ir},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ir},transmissionSamplerSize:{value:new kr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ir},attenuationDistance:{value:0},attenuationColor:{value:new Pr(0)},specularColor:{value:new Pr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ir},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ir},anisotropyVector:{value:new kr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ir}}]),vertexShader:er.meshphysical_vert,fragmentShader:er.meshphysical_frag};const RD={r:0,b:0,g:0};function aBe(t,e,n,r,o,u,h){const m=new Pr(0);let _=u===!0?0:1,x,T,I=null,N=0,H=null;function Z(z,U){let C=!1,K=U.isScene===!0?U.background:null;switch(K&&K.isTexture&&(K=(U.backgroundBlurriness>0?n:e).get(K)),K===null?j(m,_):K&&K.isColor&&(j(K,1),C=!0),t.xr.getEnvironmentBlendMode()){case"opaque":C=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,h),C=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,h),C=!0;break}(t.autoClear||C)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),K&&(K.isCubeTexture||K.mapping===mL)?(T===void 0&&(T=new Ua(new IP(1,1,1),new em({name:"BackgroundCubeMaterial",uniforms:q_(Fc.backgroundCube.uniforms),vertexShader:Fc.backgroundCube.vertexShader,fragmentShader:Fc.backgroundCube.fragmentShader,side:ya,depthTest:!1,depthWrite:!1,fog:!1})),T.geometry.deleteAttribute("normal"),T.geometry.deleteAttribute("uv"),T.onBeforeRender=function(Q,Se,Pe){this.matrixWorld.copyPosition(Pe.matrixWorld)},Object.defineProperty(T.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(T)),T.material.uniforms.envMap.value=K,T.material.uniforms.flipEnvMap.value=K.isCubeTexture&&K.isRenderTargetTexture===!1?-1:1,T.material.uniforms.backgroundBlurriness.value=U.backgroundBlurriness,T.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,T.material.toneMapped=K.colorSpace!==tr,(I!==K||N!==K.version||H!==t.toneMapping)&&(T.material.needsUpdate=!0,I=K,N=K.version,H=t.toneMapping),T.layers.enableAll(),z.unshift(T,T.geometry,T.material,0,0,null)):K&&K.isTexture&&(x===void 0&&(x=new Ua(new SG(2,2),new em({name:"BackgroundMaterial",uniforms:q_(Fc.background.uniforms),vertexShader:Fc.background.vertexShader,fragmentShader:Fc.background.fragmentShader,side:Jf,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),Object.defineProperty(x.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(x)),x.material.uniforms.t2D.value=K,x.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,x.material.toneMapped=K.colorSpace!==tr,K.matrixAutoUpdate===!0&&K.updateMatrix(),x.material.uniforms.uvTransform.value.copy(K.matrix),(I!==K||N!==K.version||H!==t.toneMapping)&&(x.material.needsUpdate=!0,I=K,N=K.version,H=t.toneMapping),x.layers.enableAll(),z.unshift(x,x.geometry,x.material,0,0,null))}function j(z,U){z.getRGB(RD,X_e(t)),r.buffers.color.setClear(RD.r,RD.g,RD.b,U,h)}return{getClearColor:function(){return m},setClearColor:function(z,U=1){m.set(z),_=U,j(m,_)},getClearAlpha:function(){return _},setClearAlpha:function(z){_=z,j(m,_)},render:Z}}function lBe(t,e,n,r){const o=t.getParameter(t.MAX_VERTEX_ATTRIBS),u=r.isWebGL2?null:e.get("OES_vertex_array_object"),h=r.isWebGL2||u!==null,m={},_=z(null);let x=_,T=!1;function I(me,lt,Fe,vt,Ge){let mt=!1;if(h){const Je=j(vt,Fe,lt);x!==Je&&(x=Je,H(x.object)),mt=U(me,vt,Fe,Ge),mt&&C(me,vt,Fe,Ge)}else{const Je=lt.wireframe===!0;(x.geometry!==vt.id||x.program!==Fe.id||x.wireframe!==Je)&&(x.geometry=vt.id,x.program=Fe.id,x.wireframe=Je,mt=!0)}Ge!==null&&n.update(Ge,t.ELEMENT_ARRAY_BUFFER),(mt||T)&&(T=!1,Pe(me,lt,Fe,vt),Ge!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(Ge).buffer))}function N(){return r.isWebGL2?t.createVertexArray():u.createVertexArrayOES()}function H(me){return r.isWebGL2?t.bindVertexArray(me):u.bindVertexArrayOES(me)}function Z(me){return r.isWebGL2?t.deleteVertexArray(me):u.deleteVertexArrayOES(me)}function j(me,lt,Fe){const vt=Fe.wireframe===!0;let Ge=m[me.id];Ge===void 0&&(Ge={},m[me.id]=Ge);let mt=Ge[lt.id];mt===void 0&&(mt={},Ge[lt.id]=mt);let Je=mt[vt];return Je===void 0&&(Je=z(N()),mt[vt]=Je),Je}function z(me){const lt=[],Fe=[],vt=[];for(let Ge=0;Ge<o;Ge++)lt[Ge]=0,Fe[Ge]=0,vt[Ge]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:lt,enabledAttributes:Fe,attributeDivisors:vt,object:me,attributes:{},index:null}}function U(me,lt,Fe,vt){const Ge=x.attributes,mt=lt.attributes;let Je=0;const Be=Fe.getAttributes();for(const nt in Be)if(Be[nt].location>=0){const Ut=Ge[nt];let Dt=mt[nt];if(Dt===void 0&&(nt==="instanceMatrix"&&me.instanceMatrix&&(Dt=me.instanceMatrix),nt==="instanceColor"&&me.instanceColor&&(Dt=me.instanceColor)),Ut===void 0||Ut.attribute!==Dt||Dt&&Ut.data!==Dt.data)return!0;Je++}return x.attributesNum!==Je||x.index!==vt}function C(me,lt,Fe,vt){const Ge={},mt=lt.attributes;let Je=0;const Be=Fe.getAttributes();for(const nt in Be)if(Be[nt].location>=0){let Ut=mt[nt];Ut===void 0&&(nt==="instanceMatrix"&&me.instanceMatrix&&(Ut=me.instanceMatrix),nt==="instanceColor"&&me.instanceColor&&(Ut=me.instanceColor));const Dt={};Dt.attribute=Ut,Ut&&Ut.data&&(Dt.data=Ut.data),Ge[nt]=Dt,Je++}x.attributes=Ge,x.attributesNum=Je,x.index=vt}function K(){const me=x.newAttributes;for(let lt=0,Fe=me.length;lt<Fe;lt++)me[lt]=0}function te(me){pe(me,0)}function pe(me,lt){const Fe=x.newAttributes,vt=x.enabledAttributes,Ge=x.attributeDivisors;Fe[me]=1,vt[me]===0&&(t.enableVertexAttribArray(me),vt[me]=1),Ge[me]!==lt&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](me,lt),Ge[me]=lt)}function Q(){const me=x.newAttributes,lt=x.enabledAttributes;for(let Fe=0,vt=lt.length;Fe<vt;Fe++)lt[Fe]!==me[Fe]&&(t.disableVertexAttribArray(Fe),lt[Fe]=0)}function Se(me,lt,Fe,vt,Ge,mt,Je){Je===!0?t.vertexAttribIPointer(me,lt,Fe,Ge,mt):t.vertexAttribPointer(me,lt,Fe,vt,Ge,mt)}function Pe(me,lt,Fe,vt){if(r.isWebGL2===!1&&(me.isInstancedMesh||vt.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;K();const Ge=vt.attributes,mt=Fe.getAttributes(),Je=lt.defaultAttributeValues;for(const Be in mt){const nt=mt[Be];if(nt.location>=0){let Wt=Ge[Be];if(Wt===void 0&&(Be==="instanceMatrix"&&me.instanceMatrix&&(Wt=me.instanceMatrix),Be==="instanceColor"&&me.instanceColor&&(Wt=me.instanceColor)),Wt!==void 0){const Ut=Wt.normalized,Dt=Wt.itemSize,en=n.get(Wt);if(en===void 0)continue;const on=en.buffer,wn=en.type,$n=en.bytesPerElement,Yr=r.isWebGL2===!0&&(wn===t.INT||wn===t.UNSIGNED_INT||Wt.gpuType===O_e);if(Wt.isInterleavedBufferAttribute){const xn=Wt.data,et=xn.stride,ei=Wt.offset;if(xn.isInstancedInterleavedBuffer){for(let Pn=0;Pn<nt.locationSize;Pn++)pe(nt.location+Pn,xn.meshPerAttribute);me.isInstancedMesh!==!0&&vt._maxInstanceCount===void 0&&(vt._maxInstanceCount=xn.meshPerAttribute*xn.count)}else for(let Pn=0;Pn<nt.locationSize;Pn++)te(nt.location+Pn);t.bindBuffer(t.ARRAY_BUFFER,on);for(let Pn=0;Pn<nt.locationSize;Pn++)Se(nt.location+Pn,Dt/nt.locationSize,wn,Ut,et*$n,(ei+Dt/nt.locationSize*Pn)*$n,Yr)}else{if(Wt.isInstancedBufferAttribute){for(let xn=0;xn<nt.locationSize;xn++)pe(nt.location+xn,Wt.meshPerAttribute);me.isInstancedMesh!==!0&&vt._maxInstanceCount===void 0&&(vt._maxInstanceCount=Wt.meshPerAttribute*Wt.count)}else for(let xn=0;xn<nt.locationSize;xn++)te(nt.location+xn);t.bindBuffer(t.ARRAY_BUFFER,on);for(let xn=0;xn<nt.locationSize;xn++)Se(nt.location+xn,Dt/nt.locationSize,wn,Ut,Dt*$n,Dt/nt.locationSize*xn*$n,Yr)}}else if(Je!==void 0){const Ut=Je[Be];if(Ut!==void 0)switch(Ut.length){case 2:t.vertexAttrib2fv(nt.location,Ut);break;case 3:t.vertexAttrib3fv(nt.location,Ut);break;case 4:t.vertexAttrib4fv(nt.location,Ut);break;default:t.vertexAttrib1fv(nt.location,Ut)}}}}Q()}function G(){kt();for(const me in m){const lt=m[me];for(const Fe in lt){const vt=lt[Fe];for(const Ge in vt)Z(vt[Ge].object),delete vt[Ge];delete lt[Fe]}delete m[me]}}function ye(me){if(m[me.id]===void 0)return;const lt=m[me.id];for(const Fe in lt){const vt=lt[Fe];for(const Ge in vt)Z(vt[Ge].object),delete vt[Ge];delete lt[Fe]}delete m[me.id]}function St(me){for(const lt in m){const Fe=m[lt];if(Fe[me.id]===void 0)continue;const vt=Fe[me.id];for(const Ge in vt)Z(vt[Ge].object),delete vt[Ge];delete Fe[me.id]}}function kt(){it(),T=!0,x!==_&&(x=_,H(x.object))}function it(){_.geometry=null,_.program=null,_.wireframe=!1}return{setup:I,reset:kt,resetDefaultState:it,dispose:G,releaseStatesOfGeometry:ye,releaseStatesOfProgram:St,initAttributes:K,enableAttribute:te,disableUnusedAttributes:Q}}function uBe(t,e,n,r){const o=r.isWebGL2;let u;function h(x){u=x}function m(x,T){t.drawArrays(u,x,T),n.update(T,u,1)}function _(x,T,I){if(I===0)return;let N,H;if(o)N=t,H="drawArraysInstanced";else if(N=e.get("ANGLE_instanced_arrays"),H="drawArraysInstancedANGLE",N===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}N[H](u,x,T,I),n.update(T,u,I)}this.setMode=h,this.render=m,this.renderInstances=_}function cBe(t,e,n){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const Se=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(Se.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function u(Se){if(Se==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";Se="mediump"}return Se==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const h=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let m=n.precision!==void 0?n.precision:"highp";const _=u(m);_!==m&&(console.warn("THREE.WebGLRenderer:",m,"not supported, using",_,"instead."),m=_);const x=h||e.has("WEBGL_draw_buffers"),T=n.logarithmicDepthBuffer===!0,I=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),N=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),H=t.getParameter(t.MAX_TEXTURE_SIZE),Z=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),j=t.getParameter(t.MAX_VERTEX_ATTRIBS),z=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),U=t.getParameter(t.MAX_VARYING_VECTORS),C=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),K=N>0,te=h||e.has("OES_texture_float"),pe=K&&te,Q=h?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:h,drawBuffers:x,getMaxAnisotropy:o,getMaxPrecision:u,precision:m,logarithmicDepthBuffer:T,maxTextures:I,maxVertexTextures:N,maxTextureSize:H,maxCubemapSize:Z,maxAttributes:j,maxVertexUniforms:z,maxVaryings:U,maxFragmentUniforms:C,vertexTextures:K,floatFragmentTextures:te,floatVertexTextures:pe,maxSamples:Q}}function dBe(t){const e=this;let n=null,r=0,o=!1,u=!1;const h=new mg,m=new ir,_={value:null,needsUpdate:!1};this.uniform=_,this.numPlanes=0,this.numIntersection=0,this.init=function(I,N){const H=I.length!==0||N||r!==0||o;return o=N,r=I.length,H},this.beginShadows=function(){u=!0,T(null)},this.endShadows=function(){u=!1},this.setGlobalState=function(I,N){n=T(I,N,0)},this.setState=function(I,N,H){const Z=I.clippingPlanes,j=I.clipIntersection,z=I.clipShadows,U=t.get(I);if(!o||Z===null||Z.length===0||u&&!z)u?T(null):x();else{const C=u?0:r,K=C*4;let te=U.clippingState||null;_.value=te,te=T(Z,N,K,H);for(let pe=0;pe!==K;++pe)te[pe]=n[pe];U.clippingState=te,this.numIntersection=j?this.numPlanes:0,this.numPlanes+=C}};function x(){_.value!==n&&(_.value=n,_.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function T(I,N,H,Z){const j=I!==null?I.length:0;let z=null;if(j!==0){if(z=_.value,Z!==!0||z===null){const U=H+j*4,C=N.matrixWorldInverse;m.getNormalMatrix(C),(z===null||z.length<U)&&(z=new Float32Array(U));for(let K=0,te=H;K!==j;++K,te+=4)h.copy(I[K]).applyMatrix4(C,m),h.normal.toArray(z,te),z[te+3]=h.constant}_.value=z,_.needsUpdate=!0}return e.numPlanes=j,e.numIntersection=0,z}}function hBe(t){let e=new WeakMap;function n(h,m){return m===UH?h.mapping=W_:m===VH&&(h.mapping=$_),h}function r(h){if(h&&h.isTexture&&h.isRenderTargetTexture===!1){const m=h.mapping;if(m===UH||m===VH)if(e.has(h)){const _=e.get(h).texture;return n(_,h.mapping)}else{const _=h.image;if(_&&_.height>0){const x=new PNe(_.height/2);return x.fromEquirectangularTexture(t,h),e.set(h,x),h.addEventListener("dispose",o),n(x.texture,h.mapping)}else return null}}return h}function o(h){const m=h.target;m.removeEventListener("dispose",o);const _=e.get(m);_!==void 0&&(e.delete(m),_.dispose())}function u(){e=new WeakMap}return{get:r,dispose:u}}class EG extends wG{constructor(e=-1,n=1,r=1,o=-1,u=.1,h=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=o,this.near=u,this.far=h,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,o,u,h){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=o,this.view.width=u,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let u=r-e,h=r+e,m=o+n,_=o-n;if(this.view!==null&&this.view.enabled){const x=(this.right-this.left)/this.view.fullWidth/this.zoom,T=(this.top-this.bottom)/this.view.fullHeight/this.zoom;u+=x*this.view.offsetX,h=u+x*this.view.width,m-=T*this.view.offsetY,_=m-T*this.view.height}this.projectionMatrix.makeOrthographic(u,h,m,_,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const w_=4,Pve=[.125,.215,.35,.446,.526,.582],bg=20,s8=new EG,kve=new Pr;let a8=null;const vg=(1+Math.sqrt(5))/2,e_=1/vg,Tve=[new dt(1,1,1),new dt(-1,1,1),new dt(1,1,-1),new dt(-1,1,-1),new dt(0,vg,e_),new dt(0,vg,-e_),new dt(e_,0,vg),new dt(-e_,0,vg),new dt(vg,e_,0),new dt(-vg,e_,0)];class Mve{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,o=100){a8=this._renderer.getRenderTarget(),this._setSize(256);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,r,o,u),n>0&&this._blur(u,0,0,n),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Rve(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Ive(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(a8),e.scissorTest=!1,OD(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===W_||e.mapping===$_?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),a8=this._renderer.getRenderTarget();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Ol,minFilter:Ol,generateMipmaps:!1,type:sP,format:Fu,colorSpace:Wc,depthBuffer:!1},o=Ave(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Ave(e,n,r);const{_lodMax:u}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=pBe(u)),this._blurMaterial=fBe(u,e,n)}return o}_compileMaterial(e){const n=new Ua(this._lodPlanes[0],e);this._renderer.compile(n,s8)}_sceneToCubeUV(e,n,r,o){const m=new Fa(90,1,n,r),_=[1,-1,1,1,1,1],x=[1,1,1,-1,-1,-1],T=this._renderer,I=T.autoClear,N=T.toneMapping;T.getClearColor(kve),T.toneMapping=Wf,T.autoClear=!1;const H=new _G({name:"PMREM.Background",side:ya,depthWrite:!1,depthTest:!1}),Z=new Ua(new IP,H);let j=!1;const z=e.background;z?z.isColor&&(H.color.copy(z),e.background=null,j=!0):(H.color.copy(kve),j=!0);for(let U=0;U<6;U++){const C=U%3;C===0?(m.up.set(0,_[U],0),m.lookAt(x[U],0,0)):C===1?(m.up.set(0,0,_[U]),m.lookAt(0,x[U],0)):(m.up.set(0,_[U],0),m.lookAt(0,0,x[U]));const K=this._cubeSize;OD(o,C*K,U>2?K:0,K,K),T.setRenderTarget(o),j&&T.render(Z,m),T.render(e,m)}Z.geometry.dispose(),Z.material.dispose(),T.toneMapping=N,T.autoClear=I,e.background=z}_textureToCubeUV(e,n){const r=this._renderer,o=e.mapping===W_||e.mapping===$_;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=Rve()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Ive());const u=o?this._cubemapMaterial:this._equirectMaterial,h=new Ua(this._lodPlanes[0],u),m=u.uniforms;m.envMap.value=e;const _=this._cubeSize;OD(n,0,0,3*_,2*_),r.setRenderTarget(n),r.render(h,s8)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){const u=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),h=Tve[(o-1)%Tve.length];this._blur(e,o-1,o,u,h)}n.autoClear=r}_blur(e,n,r,o,u){const h=this._pingPongRenderTarget;this._halfBlur(e,h,n,r,o,"latitudinal",u),this._halfBlur(h,e,r,r,o,"longitudinal",u)}_halfBlur(e,n,r,o,u,h,m){const _=this._renderer,x=this._blurMaterial;h!=="latitudinal"&&h!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const T=3,I=new Ua(this._lodPlanes[o],x),N=x.uniforms,H=this._sizeLods[r]-1,Z=isFinite(u)?Math.PI/(2*H):2*Math.PI/(2*bg-1),j=u/Z,z=isFinite(u)?1+Math.floor(T*j):bg;z>bg&&console.warn(`sigmaRadians, ${u}, is too large and will clip, as it requested ${z} samples when the maximum is set to ${bg}`);const U=[];let C=0;for(let Se=0;Se<bg;++Se){const Pe=Se/j,G=Math.exp(-Pe*Pe/2);U.push(G),Se===0?C+=G:Se<z&&(C+=2*G)}for(let Se=0;Se<U.length;Se++)U[Se]=U[Se]/C;N.envMap.value=e.texture,N.samples.value=z,N.weights.value=U,N.latitudinal.value=h==="latitudinal",m&&(N.poleAxis.value=m);const{_lodMax:K}=this;N.dTheta.value=Z,N.mipInt.value=K-r;const te=this._sizeLods[o],pe=3*te*(o>K-w_?o-K+w_:0),Q=4*(this._cubeSize-te);OD(n,pe,Q,3*te,2*te),_.setRenderTarget(n),_.render(I,s8)}}function pBe(t){const e=[],n=[],r=[];let o=t;const u=t-w_+1+Pve.length;for(let h=0;h<u;h++){const m=Math.pow(2,o);n.push(m);let _=1/m;h>t-w_?_=Pve[h-t+w_-1]:h===0&&(_=0),r.push(_);const x=1/(m-2),T=-x,I=1+x,N=[T,T,I,T,I,I,T,T,I,I,T,I],H=6,Z=6,j=3,z=2,U=1,C=new Float32Array(j*Z*H),K=new Float32Array(z*Z*H),te=new Float32Array(U*Z*H);for(let Q=0;Q<H;Q++){const Se=Q%3*2/3-1,Pe=Q>2?0:-1,G=[Se,Pe,0,Se+2/3,Pe,0,Se+2/3,Pe+1,0,Se,Pe,0,Se+2/3,Pe+1,0,Se,Pe+1,0];C.set(G,j*Z*Q),K.set(N,z*Z*Q);const ye=[Q,Q,Q,Q,Q,Q];te.set(ye,U*Z*Q)}const pe=new lm;pe.setAttribute("position",new zc(C,j)),pe.setAttribute("uv",new zc(K,z)),pe.setAttribute("faceIndex",new zc(te,U)),e.push(pe),o>w_&&o--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function Ave(t,e,n){const r=new Fg(t,e,n);return r.texture.mapping=mL,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function OD(t,e,n,r,o){t.viewport.set(e,n,r,o),t.scissor.set(e,n,r,o)}function fBe(t,e,n){const r=new Float32Array(bg),o=new dt(0,1,0);return new em({name:"SphericalGaussianBlur",defines:{n:bg,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:CG(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Gf,depthTest:!1,depthWrite:!1})}function Ive(){return new em({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:CG(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Gf,depthTest:!1,depthWrite:!1})}function Rve(){return new em({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:CG(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Gf,depthTest:!1,depthWrite:!1})}function CG(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function mBe(t){let e=new WeakMap,n=null;function r(m){if(m&&m.isTexture){const _=m.mapping,x=_===UH||_===VH,T=_===W_||_===$_;if(x||T)if(m.isRenderTargetTexture&&m.needsPMREMUpdate===!0){m.needsPMREMUpdate=!1;let I=e.get(m);return n===null&&(n=new Mve(t)),I=x?n.fromEquirectangular(m,I):n.fromCubemap(m,I),e.set(m,I),I.texture}else{if(e.has(m))return e.get(m).texture;{const I=m.image;if(x&&I&&I.height>0||T&&I&&o(I)){n===null&&(n=new Mve(t));const N=x?n.fromEquirectangular(m):n.fromCubemap(m);return e.set(m,N),m.addEventListener("dispose",u),N.texture}else return null}}}return m}function o(m){let _=0;const x=6;for(let T=0;T<x;T++)m[T]!==void 0&&_++;return _===x}function u(m){const _=m.target;_.removeEventListener("dispose",u);const x=e.get(_);x!==void 0&&(e.delete(_),x.dispose())}function h(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:h}}function vBe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let o;switch(r){case"WEBGL_depth_texture":o=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=t.getExtension(r)}return e[r]=o,o}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const o=n(r);return o===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),o}}}function gBe(t,e,n,r){const o={},u=new WeakMap;function h(I){const N=I.target;N.index!==null&&e.remove(N.index);for(const Z in N.attributes)e.remove(N.attributes[Z]);for(const Z in N.morphAttributes){const j=N.morphAttributes[Z];for(let z=0,U=j.length;z<U;z++)e.remove(j[z])}N.removeEventListener("dispose",h),delete o[N.id];const H=u.get(N);H&&(e.remove(H),u.delete(N)),r.releaseStatesOfGeometry(N),N.isInstancedBufferGeometry===!0&&delete N._maxInstanceCount,n.memory.geometries--}function m(I,N){return o[N.id]===!0||(N.addEventListener("dispose",h),o[N.id]=!0,n.memory.geometries++),N}function _(I){const N=I.attributes;for(const Z in N)e.update(N[Z],t.ARRAY_BUFFER);const H=I.morphAttributes;for(const Z in H){const j=H[Z];for(let z=0,U=j.length;z<U;z++)e.update(j[z],t.ARRAY_BUFFER)}}function x(I){const N=[],H=I.index,Z=I.attributes.position;let j=0;if(H!==null){const C=H.array;j=H.version;for(let K=0,te=C.length;K<te;K+=3){const pe=C[K+0],Q=C[K+1],Se=C[K+2];N.push(pe,Q,Q,Se,Se,pe)}}else if(Z!==void 0){const C=Z.array;j=Z.version;for(let K=0,te=C.length/3-1;K<te;K+=3){const pe=K+0,Q=K+1,Se=K+2;N.push(pe,Q,Q,Se,Se,pe)}}else return;const z=new(j_e(N)?q_e:K_e)(N,1);z.version=j;const U=u.get(I);U&&e.remove(U),u.set(I,z)}function T(I){const N=u.get(I);if(N){const H=I.index;H!==null&&N.version<H.version&&x(I)}else x(I);return u.get(I)}return{get:m,update:_,getWireframeAttribute:T}}function yBe(t,e,n,r){const o=r.isWebGL2;let u;function h(N){u=N}let m,_;function x(N){m=N.type,_=N.bytesPerElement}function T(N,H){t.drawElements(u,H,m,N*_),n.update(H,u,1)}function I(N,H,Z){if(Z===0)return;let j,z;if(o)j=t,z="drawElementsInstanced";else if(j=e.get("ANGLE_instanced_arrays"),z="drawElementsInstancedANGLE",j===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}j[z](u,H,m,N*_,Z),n.update(H,u,Z)}this.setMode=h,this.setIndex=x,this.render=T,this.renderInstances=I}function bBe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(u,h,m){switch(n.calls++,h){case t.TRIANGLES:n.triangles+=m*(u/3);break;case t.LINES:n.lines+=m*(u/2);break;case t.LINE_STRIP:n.lines+=m*(u-1);break;case t.LINE_LOOP:n.lines+=m*u;break;case t.POINTS:n.points+=m*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",h);break}}function o(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:o,update:r}}function _Be(t,e){return t[0]-e[0]}function wBe(t,e){return Math.abs(e[1])-Math.abs(t[1])}function xBe(t,e,n){const r={},o=new Float32Array(8),u=new WeakMap,h=new Io,m=[];for(let x=0;x<8;x++)m[x]=[x,0];function _(x,T,I){const N=x.morphTargetInfluences;if(e.isWebGL2===!0){const Z=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,j=Z!==void 0?Z.length:0;let z=u.get(T);if(z===void 0||z.count!==j){let lt=function(){it.dispose(),u.delete(T),T.removeEventListener("dispose",lt)};var H=lt;z!==void 0&&z.texture.dispose();const K=T.morphAttributes.position!==void 0,te=T.morphAttributes.normal!==void 0,pe=T.morphAttributes.color!==void 0,Q=T.morphAttributes.position||[],Se=T.morphAttributes.normal||[],Pe=T.morphAttributes.color||[];let G=0;K===!0&&(G=1),te===!0&&(G=2),pe===!0&&(G=3);let ye=T.attributes.position.count*G,St=1;ye>e.maxTextureSize&&(St=Math.ceil(ye/e.maxTextureSize),ye=e.maxTextureSize);const kt=new Float32Array(ye*St*4*j),it=new G_e(kt,ye,St,j);it.type=Of,it.needsUpdate=!0;const me=G*4;for(let Fe=0;Fe<j;Fe++){const vt=Q[Fe],Ge=Se[Fe],mt=Pe[Fe],Je=ye*St*4*Fe;for(let Be=0;Be<vt.count;Be++){const nt=Be*me;K===!0&&(h.fromBufferAttribute(vt,Be),kt[Je+nt+0]=h.x,kt[Je+nt+1]=h.y,kt[Je+nt+2]=h.z,kt[Je+nt+3]=0),te===!0&&(h.fromBufferAttribute(Ge,Be),kt[Je+nt+4]=h.x,kt[Je+nt+5]=h.y,kt[Je+nt+6]=h.z,kt[Je+nt+7]=0),pe===!0&&(h.fromBufferAttribute(mt,Be),kt[Je+nt+8]=h.x,kt[Je+nt+9]=h.y,kt[Je+nt+10]=h.z,kt[Je+nt+11]=mt.itemSize===4?h.w:1)}}z={count:j,texture:it,size:new kr(ye,St)},u.set(T,z),T.addEventListener("dispose",lt)}let U=0;for(let K=0;K<N.length;K++)U+=N[K];const C=T.morphTargetsRelative?1:1-U;I.getUniforms().setValue(t,"morphTargetBaseInfluence",C),I.getUniforms().setValue(t,"morphTargetInfluences",N),I.getUniforms().setValue(t,"morphTargetsTexture",z.texture,n),I.getUniforms().setValue(t,"morphTargetsTextureSize",z.size)}else{const Z=N===void 0?0:N.length;let j=r[T.id];if(j===void 0||j.length!==Z){j=[];for(let te=0;te<Z;te++)j[te]=[te,0];r[T.id]=j}for(let te=0;te<Z;te++){const pe=j[te];pe[0]=te,pe[1]=N[te]}j.sort(wBe);for(let te=0;te<8;te++)te<Z&&j[te][1]?(m[te][0]=j[te][0],m[te][1]=j[te][1]):(m[te][0]=Number.MAX_SAFE_INTEGER,m[te][1]=0);m.sort(_Be);const z=T.morphAttributes.position,U=T.morphAttributes.normal;let C=0;for(let te=0;te<8;te++){const pe=m[te],Q=pe[0],Se=pe[1];Q!==Number.MAX_SAFE_INTEGER&&Se?(z&&T.getAttribute("morphTarget"+te)!==z[Q]&&T.setAttribute("morphTarget"+te,z[Q]),U&&T.getAttribute("morphNormal"+te)!==U[Q]&&T.setAttribute("morphNormal"+te,U[Q]),o[te]=Se,C+=Se):(z&&T.hasAttribute("morphTarget"+te)===!0&&T.deleteAttribute("morphTarget"+te),U&&T.hasAttribute("morphNormal"+te)===!0&&T.deleteAttribute("morphNormal"+te),o[te]=0)}const K=T.morphTargetsRelative?1:1-C;I.getUniforms().setValue(t,"morphTargetBaseInfluence",K),I.getUniforms().setValue(t,"morphTargetInfluences",o)}}return{update:_}}function SBe(t,e,n,r){let o=new WeakMap;function u(_){const x=r.render.frame,T=_.geometry,I=e.get(_,T);if(o.get(I)!==x&&(e.update(I),o.set(I,x)),_.isInstancedMesh&&(_.hasEventListener("dispose",m)===!1&&_.addEventListener("dispose",m),o.get(_)!==x&&(n.update(_.instanceMatrix,t.ARRAY_BUFFER),_.instanceColor!==null&&n.update(_.instanceColor,t.ARRAY_BUFFER),o.set(_,x))),_.isSkinnedMesh){const N=_.skeleton;o.get(N)!==x&&(N.update(),o.set(N,x))}return I}function h(){o=new WeakMap}function m(_){const x=_.target;x.removeEventListener("dispose",m),n.remove(x.instanceMatrix),x.instanceColor!==null&&n.remove(x.instanceColor)}return{update:u,dispose:h}}const Q_e=new _s,J_e=new G_e,ewe=new uNe,twe=new Y_e,Ove=[],Dve=[],Lve=new Float32Array(16),Nve=new Float32Array(9),Fve=new Float32Array(4);function rw(t,e,n){const r=t[0];if(r<=0||r>0)return t;const o=e*n;let u=Ove[o];if(u===void 0&&(u=new Float32Array(o),Ove[o]=u),e!==0){r.toArray(u,0);for(let h=1,m=0;h!==e;++h)m+=n,t[h].toArray(u,m)}return u}function yo(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function bo(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function vL(t,e){let n=Dve[e];n===void 0&&(n=new Int32Array(e),Dve[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function EBe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function CBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yo(n,e))return;t.uniform2fv(this.addr,e),bo(n,e)}}function PBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(yo(n,e))return;t.uniform3fv(this.addr,e),bo(n,e)}}function kBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yo(n,e))return;t.uniform4fv(this.addr,e),bo(n,e)}}function TBe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(yo(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),bo(n,e)}else{if(yo(n,r))return;Fve.set(r),t.uniformMatrix2fv(this.addr,!1,Fve),bo(n,r)}}function MBe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(yo(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),bo(n,e)}else{if(yo(n,r))return;Nve.set(r),t.uniformMatrix3fv(this.addr,!1,Nve),bo(n,r)}}function ABe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(yo(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),bo(n,e)}else{if(yo(n,r))return;Lve.set(r),t.uniformMatrix4fv(this.addr,!1,Lve),bo(n,r)}}function IBe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function RBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yo(n,e))return;t.uniform2iv(this.addr,e),bo(n,e)}}function OBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(yo(n,e))return;t.uniform3iv(this.addr,e),bo(n,e)}}function DBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yo(n,e))return;t.uniform4iv(this.addr,e),bo(n,e)}}function LBe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function NBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yo(n,e))return;t.uniform2uiv(this.addr,e),bo(n,e)}}function FBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(yo(n,e))return;t.uniform3uiv(this.addr,e),bo(n,e)}}function BBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yo(n,e))return;t.uniform4uiv(this.addr,e),bo(n,e)}}function UBe(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture2D(e||Q_e,o)}function VBe(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture3D(e||ewe,o)}function jBe(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTextureCube(e||twe,o)}function zBe(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture2DArray(e||J_e,o)}function HBe(t){switch(t){case 5126:return EBe;case 35664:return CBe;case 35665:return PBe;case 35666:return kBe;case 35674:return TBe;case 35675:return MBe;case 35676:return ABe;case 5124:case 35670:return IBe;case 35667:case 35671:return RBe;case 35668:case 35672:return OBe;case 35669:case 35673:return DBe;case 5125:return LBe;case 36294:return NBe;case 36295:return FBe;case 36296:return BBe;case 35678:case 36198:case 36298:case 36306:case 35682:return UBe;case 35679:case 36299:case 36307:return VBe;case 35680:case 36300:case 36308:case 36293:return jBe;case 36289:case 36303:case 36311:case 36292:return zBe}}function GBe(t,e){t.uniform1fv(this.addr,e)}function WBe(t,e){const n=rw(e,this.size,2);t.uniform2fv(this.addr,n)}function $Be(t,e){const n=rw(e,this.size,3);t.uniform3fv(this.addr,n)}function KBe(t,e){const n=rw(e,this.size,4);t.uniform4fv(this.addr,n)}function qBe(t,e){const n=rw(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function XBe(t,e){const n=rw(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function YBe(t,e){const n=rw(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function ZBe(t,e){t.uniform1iv(this.addr,e)}function QBe(t,e){t.uniform2iv(this.addr,e)}function JBe(t,e){t.uniform3iv(this.addr,e)}function eUe(t,e){t.uniform4iv(this.addr,e)}function tUe(t,e){t.uniform1uiv(this.addr,e)}function nUe(t,e){t.uniform2uiv(this.addr,e)}function rUe(t,e){t.uniform3uiv(this.addr,e)}function iUe(t,e){t.uniform4uiv(this.addr,e)}function oUe(t,e,n){const r=this.cache,o=e.length,u=vL(n,o);yo(r,u)||(t.uniform1iv(this.addr,u),bo(r,u));for(let h=0;h!==o;++h)n.setTexture2D(e[h]||Q_e,u[h])}function sUe(t,e,n){const r=this.cache,o=e.length,u=vL(n,o);yo(r,u)||(t.uniform1iv(this.addr,u),bo(r,u));for(let h=0;h!==o;++h)n.setTexture3D(e[h]||ewe,u[h])}function aUe(t,e,n){const r=this.cache,o=e.length,u=vL(n,o);yo(r,u)||(t.uniform1iv(this.addr,u),bo(r,u));for(let h=0;h!==o;++h)n.setTextureCube(e[h]||twe,u[h])}function lUe(t,e,n){const r=this.cache,o=e.length,u=vL(n,o);yo(r,u)||(t.uniform1iv(this.addr,u),bo(r,u));for(let h=0;h!==o;++h)n.setTexture2DArray(e[h]||J_e,u[h])}function uUe(t){switch(t){case 5126:return GBe;case 35664:return WBe;case 35665:return $Be;case 35666:return KBe;case 35674:return qBe;case 35675:return XBe;case 35676:return YBe;case 5124:case 35670:return ZBe;case 35667:case 35671:return QBe;case 35668:case 35672:return JBe;case 35669:case 35673:return eUe;case 5125:return tUe;case 36294:return nUe;case 36295:return rUe;case 36296:return iUe;case 35678:case 36198:case 36298:case 36306:case 35682:return oUe;case 35679:case 36299:case 36307:return sUe;case 35680:case 36300:case 36308:case 36293:return aUe;case 36289:case 36303:case 36311:case 36292:return lUe}}class cUe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=HBe(n.type)}}class dUe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=uUe(n.type)}}class hUe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const o=this.seq;for(let u=0,h=o.length;u!==h;++u){const m=o[u];m.setValue(e,n[m.id],r)}}}const l8=/(\w+)(\])?(\[|\.)?/g;function Bve(t,e){t.seq.push(e),t.map[e.id]=e}function pUe(t,e,n){const r=t.name,o=r.length;for(l8.lastIndex=0;;){const u=l8.exec(r),h=l8.lastIndex;let m=u[1];const _=u[2]==="]",x=u[3];if(_&&(m=m|0),x===void 0||x==="["&&h+2===o){Bve(n,x===void 0?new cUe(m,t,e):new dUe(m,t,e));break}else{let I=n.map[m];I===void 0&&(I=new hUe(m),Bve(n,I)),n=I}}}class JD{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let o=0;o<r;++o){const u=e.getActiveUniform(n,o),h=e.getUniformLocation(n,u.name);pUe(u,h,this)}}setValue(e,n,r,o){const u=this.map[n];u!==void 0&&u.setValue(e,r,o)}setOptional(e,n,r){const o=n[r];o!==void 0&&this.setValue(e,r,o)}static upload(e,n,r,o){for(let u=0,h=n.length;u!==h;++u){const m=n[u],_=r[m.id];_.needsUpdate!==!1&&m.setValue(e,_.value,o)}}static seqWithValue(e,n){const r=[];for(let o=0,u=e.length;o!==u;++o){const h=e[o];h.id in n&&r.push(h)}return r}}function Uve(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let fUe=0;function mUe(t,e){const n=t.split(`
`),r=[],o=Math.max(e-6,0),u=Math.min(e+6,n.length);for(let h=o;h<u;h++){const m=h+1;r.push(`${m===e?">":" "} ${m}: ${n[h]}`)}return r.join(`
`)}function vUe(t){switch(t){case Wc:return["Linear","( value )"];case tr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function Vve(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),o=t.getShaderInfoLog(e).trim();if(r&&o==="")return"";const u=/ERROR: 0:(\d+)/.exec(o);if(u){const h=parseInt(u[1]);return n.toUpperCase()+`

`+o+`

`+mUe(t.getShaderSource(e),h)}else return o}function gUe(t,e){const n=vUe(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function yUe(t,e){let n;switch(e){case PLe:n="Linear";break;case kLe:n="Reinhard";break;case TLe:n="OptimizedCineon";break;case MLe:n="ACESFilmic";break;case ALe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function bUe(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(EC).join(`
`)}function _Ue(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function wUe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let o=0;o<r;o++){const u=t.getActiveAttrib(e,o),h=u.name;let m=1;u.type===t.FLOAT_MAT2&&(m=2),u.type===t.FLOAT_MAT3&&(m=3),u.type===t.FLOAT_MAT4&&(m=4),n[h]={type:u.type,location:t.getAttribLocation(e,h),locationSize:m}}return n}function EC(t){return t!==""}function jve(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function zve(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const xUe=/^[ \t]*#include +<([\w\d./]+)>/gm;function WH(t){return t.replace(xUe,EUe)}const SUe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function EUe(t,e){let n=er[e];if(n===void 0){const r=SUe.get(e);if(r!==void 0)n=er[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return WH(n)}const CUe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Hve(t){return t.replace(CUe,PUe)}function PUe(t,e,n,r){let o="";for(let u=parseInt(e);u<parseInt(n);u++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return o}function Gve(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function kUe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===T_e?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===iLe?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===dh&&(e="SHADOWMAP_TYPE_VSM"),e}function TUe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case W_:case $_:e="ENVMAP_TYPE_CUBE";break;case mL:e="ENVMAP_TYPE_CUBE_UV";break}return e}function MUe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case $_:e="ENVMAP_MODE_REFRACTION";break}return e}function AUe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case I_e:e="ENVMAP_BLENDING_MULTIPLY";break;case ELe:e="ENVMAP_BLENDING_MIX";break;case CLe:e="ENVMAP_BLENDING_ADD";break}return e}function IUe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function RUe(t,e,n,r){const o=t.getContext(),u=n.defines;let h=n.vertexShader,m=n.fragmentShader;const _=kUe(n),x=TUe(n),T=MUe(n),I=AUe(n),N=IUe(n),H=n.isWebGL2?"":bUe(n),Z=_Ue(u),j=o.createProgram();let z,U,C=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(z=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Z].filter(EC).join(`
`),z.length>0&&(z+=`
`),U=[H,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Z].filter(EC).join(`
`),U.length>0&&(U+=`
`)):(z=[Gve(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Z,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+T:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+_:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(EC).join(`
`),U=[H,Gve(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Z,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+x:"",n.envMap?"#define "+T:"",n.envMap?"#define "+I:"",N?"#define CUBEUV_TEXEL_WIDTH "+N.texelWidth:"",N?"#define CUBEUV_TEXEL_HEIGHT "+N.texelHeight:"",N?"#define CUBEUV_MAX_MIP "+N.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+_:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Wf?"#define TONE_MAPPING":"",n.toneMapping!==Wf?er.tonemapping_pars_fragment:"",n.toneMapping!==Wf?yUe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",er.colorspace_pars_fragment,gUe("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(EC).join(`
`)),h=WH(h),h=jve(h,n),h=zve(h,n),m=WH(m),m=jve(m,n),m=zve(m,n),h=Hve(h),m=Hve(m),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,z=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+z,U=["#define varying in",n.glslVersion===uve?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===uve?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+U);const K=C+z+h,te=C+U+m,pe=Uve(o,o.VERTEX_SHADER,K),Q=Uve(o,o.FRAGMENT_SHADER,te);if(o.attachShader(j,pe),o.attachShader(j,Q),n.index0AttributeName!==void 0?o.bindAttribLocation(j,0,n.index0AttributeName):n.morphTargets===!0&&o.bindAttribLocation(j,0,"position"),o.linkProgram(j),t.debug.checkShaderErrors){const G=o.getProgramInfoLog(j).trim(),ye=o.getShaderInfoLog(pe).trim(),St=o.getShaderInfoLog(Q).trim();let kt=!0,it=!0;if(o.getProgramParameter(j,o.LINK_STATUS)===!1)if(kt=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(o,j,pe,Q);else{const me=Vve(o,pe,"vertex"),lt=Vve(o,Q,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(j,o.VALIDATE_STATUS)+`

Program Info Log: `+G+`
`+me+`
`+lt)}else G!==""?console.warn("THREE.WebGLProgram: Program Info Log:",G):(ye===""||St==="")&&(it=!1);it&&(this.diagnostics={runnable:kt,programLog:G,vertexShader:{log:ye,prefix:z},fragmentShader:{log:St,prefix:U}})}o.deleteShader(pe),o.deleteShader(Q);let Se;this.getUniforms=function(){return Se===void 0&&(Se=new JD(o,j)),Se};let Pe;return this.getAttributes=function(){return Pe===void 0&&(Pe=wUe(o,j)),Pe},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(j),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=fUe++,this.cacheKey=e,this.usedTimes=1,this.program=j,this.vertexShader=pe,this.fragmentShader=Q,this}let OUe=0;class DUe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,o=this._getShaderStage(n),u=this._getShaderStage(r),h=this._getShaderCacheForMaterial(e);return h.has(o)===!1&&(h.add(o),o.usedTimes++),h.has(u)===!1&&(h.add(u),u.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new LUe(e),n.set(e,r)),r}}class LUe{constructor(e){this.id=OUe++,this.code=e,this.usedTimes=0}}function NUe(t,e,n,r,o,u,h){const m=new W_e,_=new DUe,x=[],T=o.isWebGL2,I=o.logarithmicDepthBuffer,N=o.vertexTextures;let H=o.precision;const Z={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function j(G){return G===0?"uv":`uv${G}`}function z(G,ye,St,kt,it){const me=kt.fog,lt=it.geometry,Fe=G.isMeshStandardMaterial?kt.environment:null,vt=(G.isMeshStandardMaterial?n:e).get(G.envMap||Fe),Ge=vt&&vt.mapping===mL?vt.image.height:null,mt=Z[G.type];G.precision!==null&&(H=o.getMaxPrecision(G.precision),H!==G.precision&&console.warn("THREE.WebGLProgram.getParameters:",G.precision,"not supported, using",H,"instead."));const Je=lt.morphAttributes.position||lt.morphAttributes.normal||lt.morphAttributes.color,Be=Je!==void 0?Je.length:0;let nt=0;lt.morphAttributes.position!==void 0&&(nt=1),lt.morphAttributes.normal!==void 0&&(nt=2),lt.morphAttributes.color!==void 0&&(nt=3);let Wt,Ut,Dt,en;if(mt){const rr=Fc[mt];Wt=rr.vertexShader,Ut=rr.fragmentShader}else Wt=G.vertexShader,Ut=G.fragmentShader,_.update(G),Dt=_.getVertexShaderID(G),en=_.getFragmentShaderID(G);const on=t.getRenderTarget(),wn=it.isInstancedMesh===!0,$n=!!G.map,Yr=!!G.matcap,xn=!!vt,et=!!G.aoMap,ei=!!G.lightMap,Pn=!!G.bumpMap,Sn=!!G.normalMap,gn=!!G.displacementMap,Ir=!!G.emissiveMap,kn=!!G.metalnessMap,Nn=!!G.roughnessMap,cr=G.anisotropy>0,li=G.clearcoat>0,Dr=G.iridescence>0,Ee=G.sheen>0,ce=G.transmission>0,ut=cr&&!!G.anisotropyMap,Vt=li&&!!G.clearcoatMap,Ot=li&&!!G.clearcoatNormalMap,Bt=li&&!!G.clearcoatRoughnessMap,mn=Dr&&!!G.iridescenceMap,Ht=Dr&&!!G.iridescenceThicknessMap,pt=Ee&&!!G.sheenColorMap,En=Ee&&!!G.sheenRoughnessMap,tn=!!G.specularMap,yn=!!G.specularColorMap,rn=!!G.specularIntensityMap,Jt=ce&&!!G.transmissionMap,Bn=ce&&!!G.thicknessMap,pr=!!G.gradientMap,Le=!!G.alphaMap,Gt=G.alphaTest>0,ht=!!G.alphaHash,jt=!!G.extensions,qt=!!lt.attributes.uv1,Qn=!!lt.attributes.uv2,Lr=!!lt.attributes.uv3;let Mr=Wf;return G.toneMapped&&(on===null||on.isXRRenderTarget===!0)&&(Mr=t.toneMapping),{isWebGL2:T,shaderID:mt,shaderType:G.type,shaderName:G.name,vertexShader:Wt,fragmentShader:Ut,defines:G.defines,customVertexShaderID:Dt,customFragmentShaderID:en,isRawShaderMaterial:G.isRawShaderMaterial===!0,glslVersion:G.glslVersion,precision:H,instancing:wn,instancingColor:wn&&it.instanceColor!==null,supportsVertexTextures:N,outputColorSpace:on===null?t.outputColorSpace:on.isXRRenderTarget===!0?on.texture.colorSpace:Wc,map:$n,matcap:Yr,envMap:xn,envMapMode:xn&&vt.mapping,envMapCubeUVHeight:Ge,aoMap:et,lightMap:ei,bumpMap:Pn,normalMap:Sn,displacementMap:N&&gn,emissiveMap:Ir,normalMapObjectSpace:Sn&&G.normalMapType===HLe,normalMapTangentSpace:Sn&&G.normalMapType===yG,metalnessMap:kn,roughnessMap:Nn,anisotropy:cr,anisotropyMap:ut,clearcoat:li,clearcoatMap:Vt,clearcoatNormalMap:Ot,clearcoatRoughnessMap:Bt,iridescence:Dr,iridescenceMap:mn,iridescenceThicknessMap:Ht,sheen:Ee,sheenColorMap:pt,sheenRoughnessMap:En,specularMap:tn,specularColorMap:yn,specularIntensityMap:rn,transmission:ce,transmissionMap:Jt,thicknessMap:Bn,gradientMap:pr,opaque:G.transparent===!1&&G.blending===R_,alphaMap:Le,alphaTest:Gt,alphaHash:ht,combine:G.combine,mapUv:$n&&j(G.map.channel),aoMapUv:et&&j(G.aoMap.channel),lightMapUv:ei&&j(G.lightMap.channel),bumpMapUv:Pn&&j(G.bumpMap.channel),normalMapUv:Sn&&j(G.normalMap.channel),displacementMapUv:gn&&j(G.displacementMap.channel),emissiveMapUv:Ir&&j(G.emissiveMap.channel),metalnessMapUv:kn&&j(G.metalnessMap.channel),roughnessMapUv:Nn&&j(G.roughnessMap.channel),anisotropyMapUv:ut&&j(G.anisotropyMap.channel),clearcoatMapUv:Vt&&j(G.clearcoatMap.channel),clearcoatNormalMapUv:Ot&&j(G.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Bt&&j(G.clearcoatRoughnessMap.channel),iridescenceMapUv:mn&&j(G.iridescenceMap.channel),iridescenceThicknessMapUv:Ht&&j(G.iridescenceThicknessMap.channel),sheenColorMapUv:pt&&j(G.sheenColorMap.channel),sheenRoughnessMapUv:En&&j(G.sheenRoughnessMap.channel),specularMapUv:tn&&j(G.specularMap.channel),specularColorMapUv:yn&&j(G.specularColorMap.channel),specularIntensityMapUv:rn&&j(G.specularIntensityMap.channel),transmissionMapUv:Jt&&j(G.transmissionMap.channel),thicknessMapUv:Bn&&j(G.thicknessMap.channel),alphaMapUv:Le&&j(G.alphaMap.channel),vertexTangents:!!lt.attributes.tangent&&(Sn||cr),vertexColors:G.vertexColors,vertexAlphas:G.vertexColors===!0&&!!lt.attributes.color&&lt.attributes.color.itemSize===4,vertexUv1s:qt,vertexUv2s:Qn,vertexUv3s:Lr,pointsUvs:it.isPoints===!0&&!!lt.attributes.uv&&($n||Le),fog:!!me,useFog:G.fog===!0,fogExp2:me&&me.isFogExp2,flatShading:G.flatShading===!0,sizeAttenuation:G.sizeAttenuation===!0,logarithmicDepthBuffer:I,skinning:it.isSkinnedMesh===!0,morphTargets:lt.morphAttributes.position!==void 0,morphNormals:lt.morphAttributes.normal!==void 0,morphColors:lt.morphAttributes.color!==void 0,morphTargetsCount:Be,morphTextureStride:nt,numDirLights:ye.directional.length,numPointLights:ye.point.length,numSpotLights:ye.spot.length,numSpotLightMaps:ye.spotLightMap.length,numRectAreaLights:ye.rectArea.length,numHemiLights:ye.hemi.length,numDirLightShadows:ye.directionalShadowMap.length,numPointLightShadows:ye.pointShadowMap.length,numSpotLightShadows:ye.spotShadowMap.length,numSpotLightShadowsWithMaps:ye.numSpotLightShadowsWithMaps,numClippingPlanes:h.numPlanes,numClipIntersection:h.numIntersection,dithering:G.dithering,shadowMapEnabled:t.shadowMap.enabled&&St.length>0,shadowMapType:t.shadowMap.type,toneMapping:Mr,useLegacyLights:t._useLegacyLights,premultipliedAlpha:G.premultipliedAlpha,doubleSided:G.side===fh,flipSided:G.side===ya,useDepthPacking:G.depthPacking>=0,depthPacking:G.depthPacking||0,index0AttributeName:G.index0AttributeName,extensionDerivatives:jt&&G.extensions.derivatives===!0,extensionFragDepth:jt&&G.extensions.fragDepth===!0,extensionDrawBuffers:jt&&G.extensions.drawBuffers===!0,extensionShaderTextureLOD:jt&&G.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:T||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:T||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:T||r.has("EXT_shader_texture_lod"),customProgramCacheKey:G.customProgramCacheKey()}}function U(G){const ye=[];if(G.shaderID?ye.push(G.shaderID):(ye.push(G.customVertexShaderID),ye.push(G.customFragmentShaderID)),G.defines!==void 0)for(const St in G.defines)ye.push(St),ye.push(G.defines[St]);return G.isRawShaderMaterial===!1&&(C(ye,G),K(ye,G),ye.push(t.outputColorSpace)),ye.push(G.customProgramCacheKey),ye.join()}function C(G,ye){G.push(ye.precision),G.push(ye.outputColorSpace),G.push(ye.envMapMode),G.push(ye.envMapCubeUVHeight),G.push(ye.mapUv),G.push(ye.alphaMapUv),G.push(ye.lightMapUv),G.push(ye.aoMapUv),G.push(ye.bumpMapUv),G.push(ye.normalMapUv),G.push(ye.displacementMapUv),G.push(ye.emissiveMapUv),G.push(ye.metalnessMapUv),G.push(ye.roughnessMapUv),G.push(ye.anisotropyMapUv),G.push(ye.clearcoatMapUv),G.push(ye.clearcoatNormalMapUv),G.push(ye.clearcoatRoughnessMapUv),G.push(ye.iridescenceMapUv),G.push(ye.iridescenceThicknessMapUv),G.push(ye.sheenColorMapUv),G.push(ye.sheenRoughnessMapUv),G.push(ye.specularMapUv),G.push(ye.specularColorMapUv),G.push(ye.specularIntensityMapUv),G.push(ye.transmissionMapUv),G.push(ye.thicknessMapUv),G.push(ye.combine),G.push(ye.fogExp2),G.push(ye.sizeAttenuation),G.push(ye.morphTargetsCount),G.push(ye.morphAttributeCount),G.push(ye.numDirLights),G.push(ye.numPointLights),G.push(ye.numSpotLights),G.push(ye.numSpotLightMaps),G.push(ye.numHemiLights),G.push(ye.numRectAreaLights),G.push(ye.numDirLightShadows),G.push(ye.numPointLightShadows),G.push(ye.numSpotLightShadows),G.push(ye.numSpotLightShadowsWithMaps),G.push(ye.shadowMapType),G.push(ye.toneMapping),G.push(ye.numClippingPlanes),G.push(ye.numClipIntersection),G.push(ye.depthPacking)}function K(G,ye){m.disableAll(),ye.isWebGL2&&m.enable(0),ye.supportsVertexTextures&&m.enable(1),ye.instancing&&m.enable(2),ye.instancingColor&&m.enable(3),ye.matcap&&m.enable(4),ye.envMap&&m.enable(5),ye.normalMapObjectSpace&&m.enable(6),ye.normalMapTangentSpace&&m.enable(7),ye.clearcoat&&m.enable(8),ye.iridescence&&m.enable(9),ye.alphaTest&&m.enable(10),ye.vertexColors&&m.enable(11),ye.vertexAlphas&&m.enable(12),ye.vertexUv1s&&m.enable(13),ye.vertexUv2s&&m.enable(14),ye.vertexUv3s&&m.enable(15),ye.vertexTangents&&m.enable(16),ye.anisotropy&&m.enable(17),G.push(m.mask),m.disableAll(),ye.fog&&m.enable(0),ye.useFog&&m.enable(1),ye.flatShading&&m.enable(2),ye.logarithmicDepthBuffer&&m.enable(3),ye.skinning&&m.enable(4),ye.morphTargets&&m.enable(5),ye.morphNormals&&m.enable(6),ye.morphColors&&m.enable(7),ye.premultipliedAlpha&&m.enable(8),ye.shadowMapEnabled&&m.enable(9),ye.useLegacyLights&&m.enable(10),ye.doubleSided&&m.enable(11),ye.flipSided&&m.enable(12),ye.useDepthPacking&&m.enable(13),ye.dithering&&m.enable(14),ye.transmission&&m.enable(15),ye.sheen&&m.enable(16),ye.opaque&&m.enable(17),ye.pointsUvs&&m.enable(18),G.push(m.mask)}function te(G){const ye=Z[G.type];let St;if(ye){const kt=Fc[ye];St=xNe.clone(kt.uniforms)}else St=G.uniforms;return St}function pe(G,ye){let St;for(let kt=0,it=x.length;kt<it;kt++){const me=x[kt];if(me.cacheKey===ye){St=me,++St.usedTimes;break}}return St===void 0&&(St=new RUe(t,ye,G,u),x.push(St)),St}function Q(G){if(--G.usedTimes===0){const ye=x.indexOf(G);x[ye]=x[x.length-1],x.pop(),G.destroy()}}function Se(G){_.remove(G)}function Pe(){_.dispose()}return{getParameters:z,getProgramCacheKey:U,getUniforms:te,acquireProgram:pe,releaseProgram:Q,releaseShaderCache:Se,programs:x,dispose:Pe}}function FUe(){let t=new WeakMap;function e(u){let h=t.get(u);return h===void 0&&(h={},t.set(u,h)),h}function n(u){t.delete(u)}function r(u,h,m){t.get(u)[h]=m}function o(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:o}}function BUe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Wve(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function $ve(){const t=[];let e=0;const n=[],r=[],o=[];function u(){e=0,n.length=0,r.length=0,o.length=0}function h(I,N,H,Z,j,z){let U=t[e];return U===void 0?(U={id:I.id,object:I,geometry:N,material:H,groupOrder:Z,renderOrder:I.renderOrder,z:j,group:z},t[e]=U):(U.id=I.id,U.object=I,U.geometry=N,U.material=H,U.groupOrder=Z,U.renderOrder=I.renderOrder,U.z=j,U.group=z),e++,U}function m(I,N,H,Z,j,z){const U=h(I,N,H,Z,j,z);H.transmission>0?r.push(U):H.transparent===!0?o.push(U):n.push(U)}function _(I,N,H,Z,j,z){const U=h(I,N,H,Z,j,z);H.transmission>0?r.unshift(U):H.transparent===!0?o.unshift(U):n.unshift(U)}function x(I,N){n.length>1&&n.sort(I||BUe),r.length>1&&r.sort(N||Wve),o.length>1&&o.sort(N||Wve)}function T(){for(let I=e,N=t.length;I<N;I++){const H=t[I];if(H.id===null)break;H.id=null,H.object=null,H.geometry=null,H.material=null,H.group=null}}return{opaque:n,transmissive:r,transparent:o,init:u,push:m,unshift:_,finish:T,sort:x}}function UUe(){let t=new WeakMap;function e(r,o){const u=t.get(r);let h;return u===void 0?(h=new $ve,t.set(r,[h])):o>=u.length?(h=new $ve,u.push(h)):h=u[o],h}function n(){t=new WeakMap}return{get:e,dispose:n}}function VUe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new dt,color:new Pr};break;case"SpotLight":n={position:new dt,direction:new dt,color:new Pr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new dt,color:new Pr,distance:0,decay:0};break;case"HemisphereLight":n={direction:new dt,skyColor:new Pr,groundColor:new Pr};break;case"RectAreaLight":n={color:new Pr,position:new dt,halfWidth:new dt,halfHeight:new dt};break}return t[e.id]=n,n}}}function jUe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new kr};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new kr};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new kr,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let zUe=0;function HUe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function GUe(t,e){const n=new VUe,r=jUe(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let T=0;T<9;T++)o.probe.push(new dt);const u=new dt,h=new uo,m=new uo;function _(T,I){let N=0,H=0,Z=0;for(let St=0;St<9;St++)o.probe[St].set(0,0,0);let j=0,z=0,U=0,C=0,K=0,te=0,pe=0,Q=0,Se=0,Pe=0;T.sort(HUe);const G=I===!0?Math.PI:1;for(let St=0,kt=T.length;St<kt;St++){const it=T[St],me=it.color,lt=it.intensity,Fe=it.distance,vt=it.shadow&&it.shadow.map?it.shadow.map.texture:null;if(it.isAmbientLight)N+=me.r*lt*G,H+=me.g*lt*G,Z+=me.b*lt*G;else if(it.isLightProbe)for(let Ge=0;Ge<9;Ge++)o.probe[Ge].addScaledVector(it.sh.coefficients[Ge],lt);else if(it.isDirectionalLight){const Ge=n.get(it);if(Ge.color.copy(it.color).multiplyScalar(it.intensity*G),it.castShadow){const mt=it.shadow,Je=r.get(it);Je.shadowBias=mt.bias,Je.shadowNormalBias=mt.normalBias,Je.shadowRadius=mt.radius,Je.shadowMapSize=mt.mapSize,o.directionalShadow[j]=Je,o.directionalShadowMap[j]=vt,o.directionalShadowMatrix[j]=it.shadow.matrix,te++}o.directional[j]=Ge,j++}else if(it.isSpotLight){const Ge=n.get(it);Ge.position.setFromMatrixPosition(it.matrixWorld),Ge.color.copy(me).multiplyScalar(lt*G),Ge.distance=Fe,Ge.coneCos=Math.cos(it.angle),Ge.penumbraCos=Math.cos(it.angle*(1-it.penumbra)),Ge.decay=it.decay,o.spot[U]=Ge;const mt=it.shadow;if(it.map&&(o.spotLightMap[Se]=it.map,Se++,mt.updateMatrices(it),it.castShadow&&Pe++),o.spotLightMatrix[U]=mt.matrix,it.castShadow){const Je=r.get(it);Je.shadowBias=mt.bias,Je.shadowNormalBias=mt.normalBias,Je.shadowRadius=mt.radius,Je.shadowMapSize=mt.mapSize,o.spotShadow[U]=Je,o.spotShadowMap[U]=vt,Q++}U++}else if(it.isRectAreaLight){const Ge=n.get(it);Ge.color.copy(me).multiplyScalar(lt),Ge.halfWidth.set(it.width*.5,0,0),Ge.halfHeight.set(0,it.height*.5,0),o.rectArea[C]=Ge,C++}else if(it.isPointLight){const Ge=n.get(it);if(Ge.color.copy(it.color).multiplyScalar(it.intensity*G),Ge.distance=it.distance,Ge.decay=it.decay,it.castShadow){const mt=it.shadow,Je=r.get(it);Je.shadowBias=mt.bias,Je.shadowNormalBias=mt.normalBias,Je.shadowRadius=mt.radius,Je.shadowMapSize=mt.mapSize,Je.shadowCameraNear=mt.camera.near,Je.shadowCameraFar=mt.camera.far,o.pointShadow[z]=Je,o.pointShadowMap[z]=vt,o.pointShadowMatrix[z]=it.shadow.matrix,pe++}o.point[z]=Ge,z++}else if(it.isHemisphereLight){const Ge=n.get(it);Ge.skyColor.copy(it.color).multiplyScalar(lt*G),Ge.groundColor.copy(it.groundColor).multiplyScalar(lt*G),o.hemi[K]=Ge,K++}}C>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=Yt.LTC_FLOAT_1,o.rectAreaLTC2=Yt.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=Yt.LTC_HALF_1,o.rectAreaLTC2=Yt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=N,o.ambient[1]=H,o.ambient[2]=Z;const ye=o.hash;(ye.directionalLength!==j||ye.pointLength!==z||ye.spotLength!==U||ye.rectAreaLength!==C||ye.hemiLength!==K||ye.numDirectionalShadows!==te||ye.numPointShadows!==pe||ye.numSpotShadows!==Q||ye.numSpotMaps!==Se)&&(o.directional.length=j,o.spot.length=U,o.rectArea.length=C,o.point.length=z,o.hemi.length=K,o.directionalShadow.length=te,o.directionalShadowMap.length=te,o.pointShadow.length=pe,o.pointShadowMap.length=pe,o.spotShadow.length=Q,o.spotShadowMap.length=Q,o.directionalShadowMatrix.length=te,o.pointShadowMatrix.length=pe,o.spotLightMatrix.length=Q+Se-Pe,o.spotLightMap.length=Se,o.numSpotLightShadowsWithMaps=Pe,ye.directionalLength=j,ye.pointLength=z,ye.spotLength=U,ye.rectAreaLength=C,ye.hemiLength=K,ye.numDirectionalShadows=te,ye.numPointShadows=pe,ye.numSpotShadows=Q,ye.numSpotMaps=Se,o.version=zUe++)}function x(T,I){let N=0,H=0,Z=0,j=0,z=0;const U=I.matrixWorldInverse;for(let C=0,K=T.length;C<K;C++){const te=T[C];if(te.isDirectionalLight){const pe=o.directional[N];pe.direction.setFromMatrixPosition(te.matrixWorld),u.setFromMatrixPosition(te.target.matrixWorld),pe.direction.sub(u),pe.direction.transformDirection(U),N++}else if(te.isSpotLight){const pe=o.spot[Z];pe.position.setFromMatrixPosition(te.matrixWorld),pe.position.applyMatrix4(U),pe.direction.setFromMatrixPosition(te.matrixWorld),u.setFromMatrixPosition(te.target.matrixWorld),pe.direction.sub(u),pe.direction.transformDirection(U),Z++}else if(te.isRectAreaLight){const pe=o.rectArea[j];pe.position.setFromMatrixPosition(te.matrixWorld),pe.position.applyMatrix4(U),m.identity(),h.copy(te.matrixWorld),h.premultiply(U),m.extractRotation(h),pe.halfWidth.set(te.width*.5,0,0),pe.halfHeight.set(0,te.height*.5,0),pe.halfWidth.applyMatrix4(m),pe.halfHeight.applyMatrix4(m),j++}else if(te.isPointLight){const pe=o.point[H];pe.position.setFromMatrixPosition(te.matrixWorld),pe.position.applyMatrix4(U),H++}else if(te.isHemisphereLight){const pe=o.hemi[z];pe.direction.setFromMatrixPosition(te.matrixWorld),pe.direction.transformDirection(U),z++}}}return{setup:_,setupView:x,state:o}}function Kve(t,e){const n=new GUe(t,e),r=[],o=[];function u(){r.length=0,o.length=0}function h(I){r.push(I)}function m(I){o.push(I)}function _(I){n.setup(r,I)}function x(I){n.setupView(r,I)}return{init:u,state:{lightsArray:r,shadowsArray:o,lights:n},setupLights:_,setupLightsView:x,pushLight:h,pushShadow:m}}function WUe(t,e){let n=new WeakMap;function r(u,h=0){const m=n.get(u);let _;return m===void 0?(_=new Kve(t,e),n.set(u,[_])):h>=m.length?(_=new Kve(t,e),m.push(_)):_=m[h],_}function o(){n=new WeakMap}return{get:r,dispose:o}}class $Ue extends nw{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=jLe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class KUe extends nw{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const qUe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,XUe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function YUe(t,e,n){let r=new xG;const o=new kr,u=new kr,h=new Io,m=new $Ue({depthPacking:zLe}),_=new KUe,x={},T=n.maxTextureSize,I={[Jf]:ya,[ya]:Jf,[fh]:fh},N=new em({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new kr},radius:{value:4}},vertexShader:qUe,fragmentShader:XUe}),H=N.clone();H.defines.HORIZONTAL_PASS=1;const Z=new lm;Z.setAttribute("position",new zc(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const j=new Ua(Z,N),z=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=T_e;let U=this.type;this.render=function(pe,Q,Se){if(z.enabled===!1||z.autoUpdate===!1&&z.needsUpdate===!1||pe.length===0)return;const Pe=t.getRenderTarget(),G=t.getActiveCubeFace(),ye=t.getActiveMipmapLevel(),St=t.state;St.setBlending(Gf),St.buffers.color.setClear(1,1,1,1),St.buffers.depth.setTest(!0),St.setScissorTest(!1);const kt=U!==dh&&this.type===dh,it=U===dh&&this.type!==dh;for(let me=0,lt=pe.length;me<lt;me++){const Fe=pe[me],vt=Fe.shadow;if(vt===void 0){console.warn("THREE.WebGLShadowMap:",Fe,"has no shadow.");continue}if(vt.autoUpdate===!1&&vt.needsUpdate===!1)continue;o.copy(vt.mapSize);const Ge=vt.getFrameExtents();if(o.multiply(Ge),u.copy(vt.mapSize),(o.x>T||o.y>T)&&(o.x>T&&(u.x=Math.floor(T/Ge.x),o.x=u.x*Ge.x,vt.mapSize.x=u.x),o.y>T&&(u.y=Math.floor(T/Ge.y),o.y=u.y*Ge.y,vt.mapSize.y=u.y)),vt.map===null||kt===!0||it===!0){const Je=this.type!==dh?{minFilter:js,magFilter:js}:{};vt.map!==null&&vt.map.dispose(),vt.map=new Fg(o.x,o.y,Je),vt.map.texture.name=Fe.name+".shadowMap",vt.camera.updateProjectionMatrix()}t.setRenderTarget(vt.map),t.clear();const mt=vt.getViewportCount();for(let Je=0;Je<mt;Je++){const Be=vt.getViewport(Je);h.set(u.x*Be.x,u.y*Be.y,u.x*Be.z,u.y*Be.w),St.viewport(h),vt.updateMatrices(Fe,Je),r=vt.getFrustum(),te(Q,Se,vt.camera,Fe,this.type)}vt.isPointLightShadow!==!0&&this.type===dh&&C(vt,Se),vt.needsUpdate=!1}U=this.type,z.needsUpdate=!1,t.setRenderTarget(Pe,G,ye)};function C(pe,Q){const Se=e.update(j);N.defines.VSM_SAMPLES!==pe.blurSamples&&(N.defines.VSM_SAMPLES=pe.blurSamples,H.defines.VSM_SAMPLES=pe.blurSamples,N.needsUpdate=!0,H.needsUpdate=!0),pe.mapPass===null&&(pe.mapPass=new Fg(o.x,o.y)),N.uniforms.shadow_pass.value=pe.map.texture,N.uniforms.resolution.value=pe.mapSize,N.uniforms.radius.value=pe.radius,t.setRenderTarget(pe.mapPass),t.clear(),t.renderBufferDirect(Q,null,Se,N,j,null),H.uniforms.shadow_pass.value=pe.mapPass.texture,H.uniforms.resolution.value=pe.mapSize,H.uniforms.radius.value=pe.radius,t.setRenderTarget(pe.map),t.clear(),t.renderBufferDirect(Q,null,Se,H,j,null)}function K(pe,Q,Se,Pe){let G=null;const ye=Se.isPointLight===!0?pe.customDistanceMaterial:pe.customDepthMaterial;if(ye!==void 0)G=ye;else if(G=Se.isPointLight===!0?_:m,t.localClippingEnabled&&Q.clipShadows===!0&&Array.isArray(Q.clippingPlanes)&&Q.clippingPlanes.length!==0||Q.displacementMap&&Q.displacementScale!==0||Q.alphaMap&&Q.alphaTest>0||Q.map&&Q.alphaTest>0){const St=G.uuid,kt=Q.uuid;let it=x[St];it===void 0&&(it={},x[St]=it);let me=it[kt];me===void 0&&(me=G.clone(),it[kt]=me),G=me}if(G.visible=Q.visible,G.wireframe=Q.wireframe,Pe===dh?G.side=Q.shadowSide!==null?Q.shadowSide:Q.side:G.side=Q.shadowSide!==null?Q.shadowSide:I[Q.side],G.alphaMap=Q.alphaMap,G.alphaTest=Q.alphaTest,G.map=Q.map,G.clipShadows=Q.clipShadows,G.clippingPlanes=Q.clippingPlanes,G.clipIntersection=Q.clipIntersection,G.displacementMap=Q.displacementMap,G.displacementScale=Q.displacementScale,G.displacementBias=Q.displacementBias,G.wireframeLinewidth=Q.wireframeLinewidth,G.linewidth=Q.linewidth,Se.isPointLight===!0&&G.isMeshDistanceMaterial===!0){const St=t.properties.get(G);St.light=Se}return G}function te(pe,Q,Se,Pe,G){if(pe.visible===!1)return;if(pe.layers.test(Q.layers)&&(pe.isMesh||pe.isLine||pe.isPoints)&&(pe.castShadow||pe.receiveShadow&&G===dh)&&(!pe.frustumCulled||r.intersectsObject(pe))){pe.modelViewMatrix.multiplyMatrices(Se.matrixWorldInverse,pe.matrixWorld);const kt=e.update(pe),it=pe.material;if(Array.isArray(it)){const me=kt.groups;for(let lt=0,Fe=me.length;lt<Fe;lt++){const vt=me[lt],Ge=it[vt.materialIndex];if(Ge&&Ge.visible){const mt=K(pe,Ge,Pe,G);t.renderBufferDirect(Se,null,kt,mt,pe,vt)}}}else if(it.visible){const me=K(pe,it,Pe,G);t.renderBufferDirect(Se,null,kt,me,pe,null)}}const St=pe.children;for(let kt=0,it=St.length;kt<it;kt++)te(St[kt],Q,Se,Pe,G)}}function ZUe(t,e,n){const r=n.isWebGL2;function o(){let Le=!1;const Gt=new Io;let ht=null;const jt=new Io(0,0,0,0);return{setMask:function(qt){ht!==qt&&!Le&&(t.colorMask(qt,qt,qt,qt),ht=qt)},setLocked:function(qt){Le=qt},setClear:function(qt,Qn,Lr,Mr,es){es===!0&&(qt*=Mr,Qn*=Mr,Lr*=Mr),Gt.set(qt,Qn,Lr,Mr),jt.equals(Gt)===!1&&(t.clearColor(qt,Qn,Lr,Mr),jt.copy(Gt))},reset:function(){Le=!1,ht=null,jt.set(-1,0,0,0)}}}function u(){let Le=!1,Gt=null,ht=null,jt=null;return{setTest:function(qt){qt?on(t.DEPTH_TEST):wn(t.DEPTH_TEST)},setMask:function(qt){Gt!==qt&&!Le&&(t.depthMask(qt),Gt=qt)},setFunc:function(qt){if(ht!==qt){switch(qt){case gLe:t.depthFunc(t.NEVER);break;case yLe:t.depthFunc(t.ALWAYS);break;case bLe:t.depthFunc(t.LESS);break;case BH:t.depthFunc(t.LEQUAL);break;case _Le:t.depthFunc(t.EQUAL);break;case wLe:t.depthFunc(t.GEQUAL);break;case xLe:t.depthFunc(t.GREATER);break;case SLe:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ht=qt}},setLocked:function(qt){Le=qt},setClear:function(qt){jt!==qt&&(t.clearDepth(qt),jt=qt)},reset:function(){Le=!1,Gt=null,ht=null,jt=null}}}function h(){let Le=!1,Gt=null,ht=null,jt=null,qt=null,Qn=null,Lr=null,Mr=null,es=null;return{setTest:function(rr){Le||(rr?on(t.STENCIL_TEST):wn(t.STENCIL_TEST))},setMask:function(rr){Gt!==rr&&!Le&&(t.stencilMask(rr),Gt=rr)},setFunc:function(rr,Gr,Ar){(ht!==rr||jt!==Gr||qt!==Ar)&&(t.stencilFunc(rr,Gr,Ar),ht=rr,jt=Gr,qt=Ar)},setOp:function(rr,Gr,Ar){(Qn!==rr||Lr!==Gr||Mr!==Ar)&&(t.stencilOp(rr,Gr,Ar),Qn=rr,Lr=Gr,Mr=Ar)},setLocked:function(rr){Le=rr},setClear:function(rr){es!==rr&&(t.clearStencil(rr),es=rr)},reset:function(){Le=!1,Gt=null,ht=null,jt=null,qt=null,Qn=null,Lr=null,Mr=null,es=null}}}const m=new o,_=new u,x=new h,T=new WeakMap,I=new WeakMap;let N={},H={},Z=new WeakMap,j=[],z=null,U=!1,C=null,K=null,te=null,pe=null,Q=null,Se=null,Pe=null,G=!1,ye=null,St=null,kt=null,it=null,me=null;const lt=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Fe=!1,vt=0;const Ge=t.getParameter(t.VERSION);Ge.indexOf("WebGL")!==-1?(vt=parseFloat(/^WebGL (\d)/.exec(Ge)[1]),Fe=vt>=1):Ge.indexOf("OpenGL ES")!==-1&&(vt=parseFloat(/^OpenGL ES (\d)/.exec(Ge)[1]),Fe=vt>=2);let mt=null,Je={};const Be=t.getParameter(t.SCISSOR_BOX),nt=t.getParameter(t.VIEWPORT),Wt=new Io().fromArray(Be),Ut=new Io().fromArray(nt);function Dt(Le,Gt,ht,jt){const qt=new Uint8Array(4),Qn=t.createTexture();t.bindTexture(Le,Qn),t.texParameteri(Le,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Le,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Lr=0;Lr<ht;Lr++)r&&(Le===t.TEXTURE_3D||Le===t.TEXTURE_2D_ARRAY)?t.texImage3D(Gt,0,t.RGBA,1,1,jt,0,t.RGBA,t.UNSIGNED_BYTE,qt):t.texImage2D(Gt+Lr,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,qt);return Qn}const en={};en[t.TEXTURE_2D]=Dt(t.TEXTURE_2D,t.TEXTURE_2D,1),en[t.TEXTURE_CUBE_MAP]=Dt(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(en[t.TEXTURE_2D_ARRAY]=Dt(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),en[t.TEXTURE_3D]=Dt(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),m.setClear(0,0,0,1),_.setClear(1),x.setClear(0),on(t.DEPTH_TEST),_.setFunc(BH),gn(!1),Ir(Rme),on(t.CULL_FACE),Pn(Gf);function on(Le){N[Le]!==!0&&(t.enable(Le),N[Le]=!0)}function wn(Le){N[Le]!==!1&&(t.disable(Le),N[Le]=!1)}function $n(Le,Gt){return H[Le]!==Gt?(t.bindFramebuffer(Le,Gt),H[Le]=Gt,r&&(Le===t.DRAW_FRAMEBUFFER&&(H[t.FRAMEBUFFER]=Gt),Le===t.FRAMEBUFFER&&(H[t.DRAW_FRAMEBUFFER]=Gt)),!0):!1}function Yr(Le,Gt){let ht=j,jt=!1;if(Le)if(ht=Z.get(Gt),ht===void 0&&(ht=[],Z.set(Gt,ht)),Le.isWebGLMultipleRenderTargets){const qt=Le.texture;if(ht.length!==qt.length||ht[0]!==t.COLOR_ATTACHMENT0){for(let Qn=0,Lr=qt.length;Qn<Lr;Qn++)ht[Qn]=t.COLOR_ATTACHMENT0+Qn;ht.length=qt.length,jt=!0}}else ht[0]!==t.COLOR_ATTACHMENT0&&(ht[0]=t.COLOR_ATTACHMENT0,jt=!0);else ht[0]!==t.BACK&&(ht[0]=t.BACK,jt=!0);jt&&(n.isWebGL2?t.drawBuffers(ht):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ht))}function xn(Le){return z!==Le?(t.useProgram(Le),z=Le,!0):!1}const et={[a_]:t.FUNC_ADD,[sLe]:t.FUNC_SUBTRACT,[aLe]:t.FUNC_REVERSE_SUBTRACT};if(r)et[Nme]=t.MIN,et[Fme]=t.MAX;else{const Le=e.get("EXT_blend_minmax");Le!==null&&(et[Nme]=Le.MIN_EXT,et[Fme]=Le.MAX_EXT)}const ei={[lLe]:t.ZERO,[uLe]:t.ONE,[cLe]:t.SRC_COLOR,[M_e]:t.SRC_ALPHA,[vLe]:t.SRC_ALPHA_SATURATE,[fLe]:t.DST_COLOR,[hLe]:t.DST_ALPHA,[dLe]:t.ONE_MINUS_SRC_COLOR,[A_e]:t.ONE_MINUS_SRC_ALPHA,[mLe]:t.ONE_MINUS_DST_COLOR,[pLe]:t.ONE_MINUS_DST_ALPHA};function Pn(Le,Gt,ht,jt,qt,Qn,Lr,Mr){if(Le===Gf){U===!0&&(wn(t.BLEND),U=!1);return}if(U===!1&&(on(t.BLEND),U=!0),Le!==oLe){if(Le!==C||Mr!==G){if((K!==a_||Q!==a_)&&(t.blendEquation(t.FUNC_ADD),K=a_,Q=a_),Mr)switch(Le){case R_:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Ome:t.blendFunc(t.ONE,t.ONE);break;case Dme:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Lme:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Le);break}else switch(Le){case R_:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Ome:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case Dme:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Lme:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Le);break}te=null,pe=null,Se=null,Pe=null,C=Le,G=Mr}return}qt=qt||Gt,Qn=Qn||ht,Lr=Lr||jt,(Gt!==K||qt!==Q)&&(t.blendEquationSeparate(et[Gt],et[qt]),K=Gt,Q=qt),(ht!==te||jt!==pe||Qn!==Se||Lr!==Pe)&&(t.blendFuncSeparate(ei[ht],ei[jt],ei[Qn],ei[Lr]),te=ht,pe=jt,Se=Qn,Pe=Lr),C=Le,G=!1}function Sn(Le,Gt){Le.side===fh?wn(t.CULL_FACE):on(t.CULL_FACE);let ht=Le.side===ya;Gt&&(ht=!ht),gn(ht),Le.blending===R_&&Le.transparent===!1?Pn(Gf):Pn(Le.blending,Le.blendEquation,Le.blendSrc,Le.blendDst,Le.blendEquationAlpha,Le.blendSrcAlpha,Le.blendDstAlpha,Le.premultipliedAlpha),_.setFunc(Le.depthFunc),_.setTest(Le.depthTest),_.setMask(Le.depthWrite),m.setMask(Le.colorWrite);const jt=Le.stencilWrite;x.setTest(jt),jt&&(x.setMask(Le.stencilWriteMask),x.setFunc(Le.stencilFunc,Le.stencilRef,Le.stencilFuncMask),x.setOp(Le.stencilFail,Le.stencilZFail,Le.stencilZPass)),Nn(Le.polygonOffset,Le.polygonOffsetFactor,Le.polygonOffsetUnits),Le.alphaToCoverage===!0?on(t.SAMPLE_ALPHA_TO_COVERAGE):wn(t.SAMPLE_ALPHA_TO_COVERAGE)}function gn(Le){ye!==Le&&(Le?t.frontFace(t.CW):t.frontFace(t.CCW),ye=Le)}function Ir(Le){Le!==nLe?(on(t.CULL_FACE),Le!==St&&(Le===Rme?t.cullFace(t.BACK):Le===rLe?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):wn(t.CULL_FACE),St=Le}function kn(Le){Le!==kt&&(Fe&&t.lineWidth(Le),kt=Le)}function Nn(Le,Gt,ht){Le?(on(t.POLYGON_OFFSET_FILL),(it!==Gt||me!==ht)&&(t.polygonOffset(Gt,ht),it=Gt,me=ht)):wn(t.POLYGON_OFFSET_FILL)}function cr(Le){Le?on(t.SCISSOR_TEST):wn(t.SCISSOR_TEST)}function li(Le){Le===void 0&&(Le=t.TEXTURE0+lt-1),mt!==Le&&(t.activeTexture(Le),mt=Le)}function Dr(Le,Gt,ht){ht===void 0&&(mt===null?ht=t.TEXTURE0+lt-1:ht=mt);let jt=Je[ht];jt===void 0&&(jt={type:void 0,texture:void 0},Je[ht]=jt),(jt.type!==Le||jt.texture!==Gt)&&(mt!==ht&&(t.activeTexture(ht),mt=ht),t.bindTexture(Le,Gt||en[Le]),jt.type=Le,jt.texture=Gt)}function Ee(){const Le=Je[mt];Le!==void 0&&Le.type!==void 0&&(t.bindTexture(Le.type,null),Le.type=void 0,Le.texture=void 0)}function ce(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function ut(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Vt(){try{t.texSubImage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Ot(){try{t.texSubImage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Bt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function mn(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Ht(){try{t.texStorage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function pt(){try{t.texStorage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function En(){try{t.texImage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function tn(){try{t.texImage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function yn(Le){Wt.equals(Le)===!1&&(t.scissor(Le.x,Le.y,Le.z,Le.w),Wt.copy(Le))}function rn(Le){Ut.equals(Le)===!1&&(t.viewport(Le.x,Le.y,Le.z,Le.w),Ut.copy(Le))}function Jt(Le,Gt){let ht=I.get(Gt);ht===void 0&&(ht=new WeakMap,I.set(Gt,ht));let jt=ht.get(Le);jt===void 0&&(jt=t.getUniformBlockIndex(Gt,Le.name),ht.set(Le,jt))}function Bn(Le,Gt){const jt=I.get(Gt).get(Le);T.get(Gt)!==jt&&(t.uniformBlockBinding(Gt,jt,Le.__bindingPointIndex),T.set(Gt,jt))}function pr(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),N={},mt=null,Je={},H={},Z=new WeakMap,j=[],z=null,U=!1,C=null,K=null,te=null,pe=null,Q=null,Se=null,Pe=null,G=!1,ye=null,St=null,kt=null,it=null,me=null,Wt.set(0,0,t.canvas.width,t.canvas.height),Ut.set(0,0,t.canvas.width,t.canvas.height),m.reset(),_.reset(),x.reset()}return{buffers:{color:m,depth:_,stencil:x},enable:on,disable:wn,bindFramebuffer:$n,drawBuffers:Yr,useProgram:xn,setBlending:Pn,setMaterial:Sn,setFlipSided:gn,setCullFace:Ir,setLineWidth:kn,setPolygonOffset:Nn,setScissorTest:cr,activeTexture:li,bindTexture:Dr,unbindTexture:Ee,compressedTexImage2D:ce,compressedTexImage3D:ut,texImage2D:En,texImage3D:tn,updateUBOMapping:Jt,uniformBlockBinding:Bn,texStorage2D:Ht,texStorage3D:pt,texSubImage2D:Vt,texSubImage3D:Ot,compressedTexSubImage2D:Bt,compressedTexSubImage3D:mn,scissor:yn,viewport:rn,reset:pr}}function QUe(t,e,n,r,o,u,h){const m=o.isWebGL2,_=o.maxTextures,x=o.maxCubemapSize,T=o.maxTextureSize,I=o.maxSamples,N=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,H=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),Z=new WeakMap;let j;const z=new WeakMap;let U=!1;try{U=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function C(Ee,ce){return U?new OffscreenCanvas(Ee,ce):aP("canvas")}function K(Ee,ce,ut,Vt){let Ot=1;if((Ee.width>Vt||Ee.height>Vt)&&(Ot=Vt/Math.max(Ee.width,Ee.height)),Ot<1||ce===!0)if(typeof HTMLImageElement<"u"&&Ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ee instanceof ImageBitmap){const Bt=ce?GH:Math.floor,mn=Bt(Ot*Ee.width),Ht=Bt(Ot*Ee.height);j===void 0&&(j=C(mn,Ht));const pt=ut?C(mn,Ht):j;return pt.width=mn,pt.height=Ht,pt.getContext("2d").drawImage(Ee,0,0,mn,Ht),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ee.width+"x"+Ee.height+") to ("+mn+"x"+Ht+")."),pt}else return"data"in Ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ee.width+"x"+Ee.height+")."),Ee;return Ee}function te(Ee){return cve(Ee.width)&&cve(Ee.height)}function pe(Ee){return m?!1:Ee.wrapS!==Nu||Ee.wrapT!==Nu||Ee.minFilter!==js&&Ee.minFilter!==Ol}function Q(Ee,ce){return Ee.generateMipmaps&&ce&&Ee.minFilter!==js&&Ee.minFilter!==Ol}function Se(Ee){t.generateMipmap(Ee)}function Pe(Ee,ce,ut,Vt,Ot=!1){if(m===!1)return ce;if(Ee!==null){if(t[Ee]!==void 0)return t[Ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ee+"'")}let Bt=ce;return ce===t.RED&&(ut===t.FLOAT&&(Bt=t.R32F),ut===t.HALF_FLOAT&&(Bt=t.R16F),ut===t.UNSIGNED_BYTE&&(Bt=t.R8)),ce===t.RED_INTEGER&&(ut===t.UNSIGNED_BYTE&&(Bt=t.R8UI),ut===t.UNSIGNED_SHORT&&(Bt=t.R16UI),ut===t.UNSIGNED_INT&&(Bt=t.R32UI),ut===t.BYTE&&(Bt=t.R8I),ut===t.SHORT&&(Bt=t.R16I),ut===t.INT&&(Bt=t.R32I)),ce===t.RG&&(ut===t.FLOAT&&(Bt=t.RG32F),ut===t.HALF_FLOAT&&(Bt=t.RG16F),ut===t.UNSIGNED_BYTE&&(Bt=t.RG8)),ce===t.RGBA&&(ut===t.FLOAT&&(Bt=t.RGBA32F),ut===t.HALF_FLOAT&&(Bt=t.RGBA16F),ut===t.UNSIGNED_BYTE&&(Bt=Vt===tr&&Ot===!1?t.SRGB8_ALPHA8:t.RGBA8),ut===t.UNSIGNED_SHORT_4_4_4_4&&(Bt=t.RGBA4),ut===t.UNSIGNED_SHORT_5_5_5_1&&(Bt=t.RGB5_A1)),(Bt===t.R16F||Bt===t.R32F||Bt===t.RG16F||Bt===t.RG32F||Bt===t.RGBA16F||Bt===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Bt}function G(Ee,ce,ut){return Q(Ee,ut)===!0||Ee.isFramebufferTexture&&Ee.minFilter!==js&&Ee.minFilter!==Ol?Math.log2(Math.max(ce.width,ce.height))+1:Ee.mipmaps!==void 0&&Ee.mipmaps.length>0?Ee.mipmaps.length:Ee.isCompressedTexture&&Array.isArray(Ee.image)?ce.mipmaps.length:1}function ye(Ee){return Ee===js||Ee===Bme||Ee===D6?t.NEAREST:t.LINEAR}function St(Ee){const ce=Ee.target;ce.removeEventListener("dispose",St),it(ce),ce.isVideoTexture&&Z.delete(ce)}function kt(Ee){const ce=Ee.target;ce.removeEventListener("dispose",kt),lt(ce)}function it(Ee){const ce=r.get(Ee);if(ce.__webglInit===void 0)return;const ut=Ee.source,Vt=z.get(ut);if(Vt){const Ot=Vt[ce.__cacheKey];Ot.usedTimes--,Ot.usedTimes===0&&me(Ee),Object.keys(Vt).length===0&&z.delete(ut)}r.remove(Ee)}function me(Ee){const ce=r.get(Ee);t.deleteTexture(ce.__webglTexture);const ut=Ee.source,Vt=z.get(ut);delete Vt[ce.__cacheKey],h.memory.textures--}function lt(Ee){const ce=Ee.texture,ut=r.get(Ee),Vt=r.get(ce);if(Vt.__webglTexture!==void 0&&(t.deleteTexture(Vt.__webglTexture),h.memory.textures--),Ee.depthTexture&&Ee.depthTexture.dispose(),Ee.isWebGLCubeRenderTarget)for(let Ot=0;Ot<6;Ot++){if(Array.isArray(ut.__webglFramebuffer[Ot]))for(let Bt=0;Bt<ut.__webglFramebuffer[Ot].length;Bt++)t.deleteFramebuffer(ut.__webglFramebuffer[Ot][Bt]);else t.deleteFramebuffer(ut.__webglFramebuffer[Ot]);ut.__webglDepthbuffer&&t.deleteRenderbuffer(ut.__webglDepthbuffer[Ot])}else{if(Array.isArray(ut.__webglFramebuffer))for(let Ot=0;Ot<ut.__webglFramebuffer.length;Ot++)t.deleteFramebuffer(ut.__webglFramebuffer[Ot]);else t.deleteFramebuffer(ut.__webglFramebuffer);if(ut.__webglDepthbuffer&&t.deleteRenderbuffer(ut.__webglDepthbuffer),ut.__webglMultisampledFramebuffer&&t.deleteFramebuffer(ut.__webglMultisampledFramebuffer),ut.__webglColorRenderbuffer)for(let Ot=0;Ot<ut.__webglColorRenderbuffer.length;Ot++)ut.__webglColorRenderbuffer[Ot]&&t.deleteRenderbuffer(ut.__webglColorRenderbuffer[Ot]);ut.__webglDepthRenderbuffer&&t.deleteRenderbuffer(ut.__webglDepthRenderbuffer)}if(Ee.isWebGLMultipleRenderTargets)for(let Ot=0,Bt=ce.length;Ot<Bt;Ot++){const mn=r.get(ce[Ot]);mn.__webglTexture&&(t.deleteTexture(mn.__webglTexture),h.memory.textures--),r.remove(ce[Ot])}r.remove(ce),r.remove(Ee)}let Fe=0;function vt(){Fe=0}function Ge(){const Ee=Fe;return Ee>=_&&console.warn("THREE.WebGLTextures: Trying to use "+Ee+" texture units while this GPU supports only "+_),Fe+=1,Ee}function mt(Ee){const ce=[];return ce.push(Ee.wrapS),ce.push(Ee.wrapT),ce.push(Ee.wrapR||0),ce.push(Ee.magFilter),ce.push(Ee.minFilter),ce.push(Ee.anisotropy),ce.push(Ee.internalFormat),ce.push(Ee.format),ce.push(Ee.type),ce.push(Ee.generateMipmaps),ce.push(Ee.premultiplyAlpha),ce.push(Ee.flipY),ce.push(Ee.unpackAlignment),ce.push(Ee.colorSpace),ce.join()}function Je(Ee,ce){const ut=r.get(Ee);if(Ee.isVideoTexture&&li(Ee),Ee.isRenderTargetTexture===!1&&Ee.version>0&&ut.__version!==Ee.version){const Vt=Ee.image;if(Vt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Vt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{$n(ut,Ee,ce);return}}n.bindTexture(t.TEXTURE_2D,ut.__webglTexture,t.TEXTURE0+ce)}function Be(Ee,ce){const ut=r.get(Ee);if(Ee.version>0&&ut.__version!==Ee.version){$n(ut,Ee,ce);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ut.__webglTexture,t.TEXTURE0+ce)}function nt(Ee,ce){const ut=r.get(Ee);if(Ee.version>0&&ut.__version!==Ee.version){$n(ut,Ee,ce);return}n.bindTexture(t.TEXTURE_3D,ut.__webglTexture,t.TEXTURE0+ce)}function Wt(Ee,ce){const ut=r.get(Ee);if(Ee.version>0&&ut.__version!==Ee.version){Yr(ut,Ee,ce);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ut.__webglTexture,t.TEXTURE0+ce)}const Ut={[Ng]:t.REPEAT,[Nu]:t.CLAMP_TO_EDGE,[jH]:t.MIRRORED_REPEAT},Dt={[js]:t.NEAREST,[Bme]:t.NEAREST_MIPMAP_NEAREST,[D6]:t.NEAREST_MIPMAP_LINEAR,[Ol]:t.LINEAR,[ILe]:t.LINEAR_MIPMAP_NEAREST,[oP]:t.LINEAR_MIPMAP_LINEAR},en={[WLe]:t.NEVER,[QLe]:t.ALWAYS,[$Le]:t.LESS,[qLe]:t.LEQUAL,[KLe]:t.EQUAL,[ZLe]:t.GEQUAL,[XLe]:t.GREATER,[YLe]:t.NOTEQUAL};function on(Ee,ce,ut){if(ut?(t.texParameteri(Ee,t.TEXTURE_WRAP_S,Ut[ce.wrapS]),t.texParameteri(Ee,t.TEXTURE_WRAP_T,Ut[ce.wrapT]),(Ee===t.TEXTURE_3D||Ee===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Ee,t.TEXTURE_WRAP_R,Ut[ce.wrapR]),t.texParameteri(Ee,t.TEXTURE_MAG_FILTER,Dt[ce.magFilter]),t.texParameteri(Ee,t.TEXTURE_MIN_FILTER,Dt[ce.minFilter])):(t.texParameteri(Ee,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(Ee,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(Ee===t.TEXTURE_3D||Ee===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Ee,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(ce.wrapS!==Nu||ce.wrapT!==Nu)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(Ee,t.TEXTURE_MAG_FILTER,ye(ce.magFilter)),t.texParameteri(Ee,t.TEXTURE_MIN_FILTER,ye(ce.minFilter)),ce.minFilter!==js&&ce.minFilter!==Ol&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),ce.compareFunction&&(t.texParameteri(Ee,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Ee,t.TEXTURE_COMPARE_FUNC,en[ce.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Vt=e.get("EXT_texture_filter_anisotropic");if(ce.magFilter===js||ce.minFilter!==D6&&ce.minFilter!==oP||ce.type===Of&&e.has("OES_texture_float_linear")===!1||m===!1&&ce.type===sP&&e.has("OES_texture_half_float_linear")===!1)return;(ce.anisotropy>1||r.get(ce).__currentAnisotropy)&&(t.texParameterf(Ee,Vt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ce.anisotropy,o.getMaxAnisotropy())),r.get(ce).__currentAnisotropy=ce.anisotropy)}}function wn(Ee,ce){let ut=!1;Ee.__webglInit===void 0&&(Ee.__webglInit=!0,ce.addEventListener("dispose",St));const Vt=ce.source;let Ot=z.get(Vt);Ot===void 0&&(Ot={},z.set(Vt,Ot));const Bt=mt(ce);if(Bt!==Ee.__cacheKey){Ot[Bt]===void 0&&(Ot[Bt]={texture:t.createTexture(),usedTimes:0},h.memory.textures++,ut=!0),Ot[Bt].usedTimes++;const mn=Ot[Ee.__cacheKey];mn!==void 0&&(Ot[Ee.__cacheKey].usedTimes--,mn.usedTimes===0&&me(ce)),Ee.__cacheKey=Bt,Ee.__webglTexture=Ot[Bt].texture}return ut}function $n(Ee,ce,ut){let Vt=t.TEXTURE_2D;(ce.isDataArrayTexture||ce.isCompressedArrayTexture)&&(Vt=t.TEXTURE_2D_ARRAY),ce.isData3DTexture&&(Vt=t.TEXTURE_3D);const Ot=wn(Ee,ce),Bt=ce.source;n.bindTexture(Vt,Ee.__webglTexture,t.TEXTURE0+ut);const mn=r.get(Bt);if(Bt.version!==mn.__version||Ot===!0){n.activeTexture(t.TEXTURE0+ut),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,ce.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,ce.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Ht=pe(ce)&&te(ce.image)===!1;let pt=K(ce.image,Ht,!1,T);pt=Dr(ce,pt);const En=te(pt)||m,tn=u.convert(ce.format,ce.colorSpace);let yn=u.convert(ce.type),rn=Pe(ce.internalFormat,tn,yn,ce.colorSpace);on(Vt,ce,En);let Jt;const Bn=ce.mipmaps,pr=m&&ce.isVideoTexture!==!0,Le=mn.__version===void 0||Ot===!0,Gt=G(ce,pt,En);if(ce.isDepthTexture)rn=t.DEPTH_COMPONENT,m?ce.type===Of?rn=t.DEPTH_COMPONENT32F:ce.type===Rf?rn=t.DEPTH_COMPONENT24:ce.type===Pg?rn=t.DEPTH24_STENCIL8:rn=t.DEPTH_COMPONENT16:ce.type===Of&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ce.format===kg&&rn===t.DEPTH_COMPONENT&&ce.type!==gG&&ce.type!==Rf&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ce.type=Rf,yn=u.convert(ce.type)),ce.format===K_&&rn===t.DEPTH_COMPONENT&&(rn=t.DEPTH_STENCIL,ce.type!==Pg&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ce.type=Pg,yn=u.convert(ce.type))),Le&&(pr?n.texStorage2D(t.TEXTURE_2D,1,rn,pt.width,pt.height):n.texImage2D(t.TEXTURE_2D,0,rn,pt.width,pt.height,0,tn,yn,null));else if(ce.isDataTexture)if(Bn.length>0&&En){pr&&Le&&n.texStorage2D(t.TEXTURE_2D,Gt,rn,Bn[0].width,Bn[0].height);for(let ht=0,jt=Bn.length;ht<jt;ht++)Jt=Bn[ht],pr?n.texSubImage2D(t.TEXTURE_2D,ht,0,0,Jt.width,Jt.height,tn,yn,Jt.data):n.texImage2D(t.TEXTURE_2D,ht,rn,Jt.width,Jt.height,0,tn,yn,Jt.data);ce.generateMipmaps=!1}else pr?(Le&&n.texStorage2D(t.TEXTURE_2D,Gt,rn,pt.width,pt.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,pt.width,pt.height,tn,yn,pt.data)):n.texImage2D(t.TEXTURE_2D,0,rn,pt.width,pt.height,0,tn,yn,pt.data);else if(ce.isCompressedTexture)if(ce.isCompressedArrayTexture){pr&&Le&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Gt,rn,Bn[0].width,Bn[0].height,pt.depth);for(let ht=0,jt=Bn.length;ht<jt;ht++)Jt=Bn[ht],ce.format!==Fu?tn!==null?pr?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ht,0,0,0,Jt.width,Jt.height,pt.depth,tn,Jt.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,ht,rn,Jt.width,Jt.height,pt.depth,0,Jt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pr?n.texSubImage3D(t.TEXTURE_2D_ARRAY,ht,0,0,0,Jt.width,Jt.height,pt.depth,tn,yn,Jt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,ht,rn,Jt.width,Jt.height,pt.depth,0,tn,yn,Jt.data)}else{pr&&Le&&n.texStorage2D(t.TEXTURE_2D,Gt,rn,Bn[0].width,Bn[0].height);for(let ht=0,jt=Bn.length;ht<jt;ht++)Jt=Bn[ht],ce.format!==Fu?tn!==null?pr?n.compressedTexSubImage2D(t.TEXTURE_2D,ht,0,0,Jt.width,Jt.height,tn,Jt.data):n.compressedTexImage2D(t.TEXTURE_2D,ht,rn,Jt.width,Jt.height,0,Jt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pr?n.texSubImage2D(t.TEXTURE_2D,ht,0,0,Jt.width,Jt.height,tn,yn,Jt.data):n.texImage2D(t.TEXTURE_2D,ht,rn,Jt.width,Jt.height,0,tn,yn,Jt.data)}else if(ce.isDataArrayTexture)pr?(Le&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Gt,rn,pt.width,pt.height,pt.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,pt.width,pt.height,pt.depth,tn,yn,pt.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,rn,pt.width,pt.height,pt.depth,0,tn,yn,pt.data);else if(ce.isData3DTexture)pr?(Le&&n.texStorage3D(t.TEXTURE_3D,Gt,rn,pt.width,pt.height,pt.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,pt.width,pt.height,pt.depth,tn,yn,pt.data)):n.texImage3D(t.TEXTURE_3D,0,rn,pt.width,pt.height,pt.depth,0,tn,yn,pt.data);else if(ce.isFramebufferTexture){if(Le)if(pr)n.texStorage2D(t.TEXTURE_2D,Gt,rn,pt.width,pt.height);else{let ht=pt.width,jt=pt.height;for(let qt=0;qt<Gt;qt++)n.texImage2D(t.TEXTURE_2D,qt,rn,ht,jt,0,tn,yn,null),ht>>=1,jt>>=1}}else if(Bn.length>0&&En){pr&&Le&&n.texStorage2D(t.TEXTURE_2D,Gt,rn,Bn[0].width,Bn[0].height);for(let ht=0,jt=Bn.length;ht<jt;ht++)Jt=Bn[ht],pr?n.texSubImage2D(t.TEXTURE_2D,ht,0,0,tn,yn,Jt):n.texImage2D(t.TEXTURE_2D,ht,rn,tn,yn,Jt);ce.generateMipmaps=!1}else pr?(Le&&n.texStorage2D(t.TEXTURE_2D,Gt,rn,pt.width,pt.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,tn,yn,pt)):n.texImage2D(t.TEXTURE_2D,0,rn,tn,yn,pt);Q(ce,En)&&Se(Vt),mn.__version=Bt.version,ce.onUpdate&&ce.onUpdate(ce)}Ee.__version=ce.version}function Yr(Ee,ce,ut){if(ce.image.length!==6)return;const Vt=wn(Ee,ce),Ot=ce.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Ee.__webglTexture,t.TEXTURE0+ut);const Bt=r.get(Ot);if(Ot.version!==Bt.__version||Vt===!0){n.activeTexture(t.TEXTURE0+ut),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,ce.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,ce.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const mn=ce.isCompressedTexture||ce.image[0].isCompressedTexture,Ht=ce.image[0]&&ce.image[0].isDataTexture,pt=[];for(let ht=0;ht<6;ht++)!mn&&!Ht?pt[ht]=K(ce.image[ht],!1,!0,x):pt[ht]=Ht?ce.image[ht].image:ce.image[ht],pt[ht]=Dr(ce,pt[ht]);const En=pt[0],tn=te(En)||m,yn=u.convert(ce.format,ce.colorSpace),rn=u.convert(ce.type),Jt=Pe(ce.internalFormat,yn,rn,ce.colorSpace),Bn=m&&ce.isVideoTexture!==!0,pr=Bt.__version===void 0||Vt===!0;let Le=G(ce,En,tn);on(t.TEXTURE_CUBE_MAP,ce,tn);let Gt;if(mn){Bn&&pr&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Le,Jt,En.width,En.height);for(let ht=0;ht<6;ht++){Gt=pt[ht].mipmaps;for(let jt=0;jt<Gt.length;jt++){const qt=Gt[jt];ce.format!==Fu?yn!==null?Bn?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt,0,0,qt.width,qt.height,yn,qt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt,Jt,qt.width,qt.height,0,qt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt,0,0,qt.width,qt.height,yn,rn,qt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt,Jt,qt.width,qt.height,0,yn,rn,qt.data)}}}else{Gt=ce.mipmaps,Bn&&pr&&(Gt.length>0&&Le++,n.texStorage2D(t.TEXTURE_CUBE_MAP,Le,Jt,pt[0].width,pt[0].height));for(let ht=0;ht<6;ht++)if(Ht){Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0,0,0,pt[ht].width,pt[ht].height,yn,rn,pt[ht].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0,Jt,pt[ht].width,pt[ht].height,0,yn,rn,pt[ht].data);for(let jt=0;jt<Gt.length;jt++){const Qn=Gt[jt].image[ht].image;Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt+1,0,0,Qn.width,Qn.height,yn,rn,Qn.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt+1,Jt,Qn.width,Qn.height,0,yn,rn,Qn.data)}}else{Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0,0,0,yn,rn,pt[ht]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0,Jt,yn,rn,pt[ht]);for(let jt=0;jt<Gt.length;jt++){const qt=Gt[jt];Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt+1,0,0,yn,rn,qt.image[ht]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt+1,Jt,yn,rn,qt.image[ht])}}}Q(ce,tn)&&Se(t.TEXTURE_CUBE_MAP),Bt.__version=Ot.version,ce.onUpdate&&ce.onUpdate(ce)}Ee.__version=ce.version}function xn(Ee,ce,ut,Vt,Ot,Bt){const mn=u.convert(ut.format,ut.colorSpace),Ht=u.convert(ut.type),pt=Pe(ut.internalFormat,mn,Ht,ut.colorSpace);if(!r.get(ce).__hasExternalTextures){const tn=Math.max(1,ce.width>>Bt),yn=Math.max(1,ce.height>>Bt);Ot===t.TEXTURE_3D||Ot===t.TEXTURE_2D_ARRAY?n.texImage3D(Ot,Bt,pt,tn,yn,ce.depth,0,mn,Ht,null):n.texImage2D(Ot,Bt,pt,tn,yn,0,mn,Ht,null)}n.bindFramebuffer(t.FRAMEBUFFER,Ee),cr(ce)?N.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Vt,Ot,r.get(ut).__webglTexture,0,Nn(ce)):(Ot===t.TEXTURE_2D||Ot>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Ot<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Vt,Ot,r.get(ut).__webglTexture,Bt),n.bindFramebuffer(t.FRAMEBUFFER,null)}function et(Ee,ce,ut){if(t.bindRenderbuffer(t.RENDERBUFFER,Ee),ce.depthBuffer&&!ce.stencilBuffer){let Vt=t.DEPTH_COMPONENT16;if(ut||cr(ce)){const Ot=ce.depthTexture;Ot&&Ot.isDepthTexture&&(Ot.type===Of?Vt=t.DEPTH_COMPONENT32F:Ot.type===Rf&&(Vt=t.DEPTH_COMPONENT24));const Bt=Nn(ce);cr(ce)?N.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Bt,Vt,ce.width,ce.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Bt,Vt,ce.width,ce.height)}else t.renderbufferStorage(t.RENDERBUFFER,Vt,ce.width,ce.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,Ee)}else if(ce.depthBuffer&&ce.stencilBuffer){const Vt=Nn(ce);ut&&cr(ce)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Vt,t.DEPTH24_STENCIL8,ce.width,ce.height):cr(ce)?N.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Vt,t.DEPTH24_STENCIL8,ce.width,ce.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,ce.width,ce.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,Ee)}else{const Vt=ce.isWebGLMultipleRenderTargets===!0?ce.texture:[ce.texture];for(let Ot=0;Ot<Vt.length;Ot++){const Bt=Vt[Ot],mn=u.convert(Bt.format,Bt.colorSpace),Ht=u.convert(Bt.type),pt=Pe(Bt.internalFormat,mn,Ht,Bt.colorSpace),En=Nn(ce);ut&&cr(ce)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,En,pt,ce.width,ce.height):cr(ce)?N.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,En,pt,ce.width,ce.height):t.renderbufferStorage(t.RENDERBUFFER,pt,ce.width,ce.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ei(Ee,ce){if(ce&&ce.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Ee),!(ce.depthTexture&&ce.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ce.depthTexture).__webglTexture||ce.depthTexture.image.width!==ce.width||ce.depthTexture.image.height!==ce.height)&&(ce.depthTexture.image.width=ce.width,ce.depthTexture.image.height=ce.height,ce.depthTexture.needsUpdate=!0),Je(ce.depthTexture,0);const Vt=r.get(ce.depthTexture).__webglTexture,Ot=Nn(ce);if(ce.depthTexture.format===kg)cr(ce)?N.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Vt,0,Ot):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Vt,0);else if(ce.depthTexture.format===K_)cr(ce)?N.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Vt,0,Ot):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Vt,0);else throw new Error("Unknown depthTexture format")}function Pn(Ee){const ce=r.get(Ee),ut=Ee.isWebGLCubeRenderTarget===!0;if(Ee.depthTexture&&!ce.__autoAllocateDepthBuffer){if(ut)throw new Error("target.depthTexture not supported in Cube render targets");ei(ce.__webglFramebuffer,Ee)}else if(ut){ce.__webglDepthbuffer=[];for(let Vt=0;Vt<6;Vt++)n.bindFramebuffer(t.FRAMEBUFFER,ce.__webglFramebuffer[Vt]),ce.__webglDepthbuffer[Vt]=t.createRenderbuffer(),et(ce.__webglDepthbuffer[Vt],Ee,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,ce.__webglFramebuffer),ce.__webglDepthbuffer=t.createRenderbuffer(),et(ce.__webglDepthbuffer,Ee,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Sn(Ee,ce,ut){const Vt=r.get(Ee);ce!==void 0&&xn(Vt.__webglFramebuffer,Ee,Ee.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ut!==void 0&&Pn(Ee)}function gn(Ee){const ce=Ee.texture,ut=r.get(Ee),Vt=r.get(ce);Ee.addEventListener("dispose",kt),Ee.isWebGLMultipleRenderTargets!==!0&&(Vt.__webglTexture===void 0&&(Vt.__webglTexture=t.createTexture()),Vt.__version=ce.version,h.memory.textures++);const Ot=Ee.isWebGLCubeRenderTarget===!0,Bt=Ee.isWebGLMultipleRenderTargets===!0,mn=te(Ee)||m;if(Ot){ut.__webglFramebuffer=[];for(let Ht=0;Ht<6;Ht++)if(m&&ce.mipmaps&&ce.mipmaps.length>0){ut.__webglFramebuffer[Ht]=[];for(let pt=0;pt<ce.mipmaps.length;pt++)ut.__webglFramebuffer[Ht][pt]=t.createFramebuffer()}else ut.__webglFramebuffer[Ht]=t.createFramebuffer()}else{if(m&&ce.mipmaps&&ce.mipmaps.length>0){ut.__webglFramebuffer=[];for(let Ht=0;Ht<ce.mipmaps.length;Ht++)ut.__webglFramebuffer[Ht]=t.createFramebuffer()}else ut.__webglFramebuffer=t.createFramebuffer();if(Bt)if(o.drawBuffers){const Ht=Ee.texture;for(let pt=0,En=Ht.length;pt<En;pt++){const tn=r.get(Ht[pt]);tn.__webglTexture===void 0&&(tn.__webglTexture=t.createTexture(),h.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(m&&Ee.samples>0&&cr(Ee)===!1){const Ht=Bt?ce:[ce];ut.__webglMultisampledFramebuffer=t.createFramebuffer(),ut.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ut.__webglMultisampledFramebuffer);for(let pt=0;pt<Ht.length;pt++){const En=Ht[pt];ut.__webglColorRenderbuffer[pt]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ut.__webglColorRenderbuffer[pt]);const tn=u.convert(En.format,En.colorSpace),yn=u.convert(En.type),rn=Pe(En.internalFormat,tn,yn,En.colorSpace,Ee.isXRRenderTarget===!0),Jt=Nn(Ee);t.renderbufferStorageMultisample(t.RENDERBUFFER,Jt,rn,Ee.width,Ee.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+pt,t.RENDERBUFFER,ut.__webglColorRenderbuffer[pt])}t.bindRenderbuffer(t.RENDERBUFFER,null),Ee.depthBuffer&&(ut.__webglDepthRenderbuffer=t.createRenderbuffer(),et(ut.__webglDepthRenderbuffer,Ee,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ot){n.bindTexture(t.TEXTURE_CUBE_MAP,Vt.__webglTexture),on(t.TEXTURE_CUBE_MAP,ce,mn);for(let Ht=0;Ht<6;Ht++)if(m&&ce.mipmaps&&ce.mipmaps.length>0)for(let pt=0;pt<ce.mipmaps.length;pt++)xn(ut.__webglFramebuffer[Ht][pt],Ee,ce,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,pt);else xn(ut.__webglFramebuffer[Ht],Ee,ce,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,0);Q(ce,mn)&&Se(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Bt){const Ht=Ee.texture;for(let pt=0,En=Ht.length;pt<En;pt++){const tn=Ht[pt],yn=r.get(tn);n.bindTexture(t.TEXTURE_2D,yn.__webglTexture),on(t.TEXTURE_2D,tn,mn),xn(ut.__webglFramebuffer,Ee,tn,t.COLOR_ATTACHMENT0+pt,t.TEXTURE_2D,0),Q(tn,mn)&&Se(t.TEXTURE_2D)}n.unbindTexture()}else{let Ht=t.TEXTURE_2D;if((Ee.isWebGL3DRenderTarget||Ee.isWebGLArrayRenderTarget)&&(m?Ht=Ee.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Ht,Vt.__webglTexture),on(Ht,ce,mn),m&&ce.mipmaps&&ce.mipmaps.length>0)for(let pt=0;pt<ce.mipmaps.length;pt++)xn(ut.__webglFramebuffer[pt],Ee,ce,t.COLOR_ATTACHMENT0,Ht,pt);else xn(ut.__webglFramebuffer,Ee,ce,t.COLOR_ATTACHMENT0,Ht,0);Q(ce,mn)&&Se(Ht),n.unbindTexture()}Ee.depthBuffer&&Pn(Ee)}function Ir(Ee){const ce=te(Ee)||m,ut=Ee.isWebGLMultipleRenderTargets===!0?Ee.texture:[Ee.texture];for(let Vt=0,Ot=ut.length;Vt<Ot;Vt++){const Bt=ut[Vt];if(Q(Bt,ce)){const mn=Ee.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Ht=r.get(Bt).__webglTexture;n.bindTexture(mn,Ht),Se(mn),n.unbindTexture()}}}function kn(Ee){if(m&&Ee.samples>0&&cr(Ee)===!1){const ce=Ee.isWebGLMultipleRenderTargets?Ee.texture:[Ee.texture],ut=Ee.width,Vt=Ee.height;let Ot=t.COLOR_BUFFER_BIT;const Bt=[],mn=Ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ht=r.get(Ee),pt=Ee.isWebGLMultipleRenderTargets===!0;if(pt)for(let En=0;En<ce.length;En++)n.bindFramebuffer(t.FRAMEBUFFER,Ht.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+En,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ht.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+En,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ht.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ht.__webglFramebuffer);for(let En=0;En<ce.length;En++){Bt.push(t.COLOR_ATTACHMENT0+En),Ee.depthBuffer&&Bt.push(mn);const tn=Ht.__ignoreDepthValues!==void 0?Ht.__ignoreDepthValues:!1;if(tn===!1&&(Ee.depthBuffer&&(Ot|=t.DEPTH_BUFFER_BIT),Ee.stencilBuffer&&(Ot|=t.STENCIL_BUFFER_BIT)),pt&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ht.__webglColorRenderbuffer[En]),tn===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[mn]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[mn])),pt){const yn=r.get(ce[En]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,yn,0)}t.blitFramebuffer(0,0,ut,Vt,0,0,ut,Vt,Ot,t.NEAREST),H&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Bt)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),pt)for(let En=0;En<ce.length;En++){n.bindFramebuffer(t.FRAMEBUFFER,Ht.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+En,t.RENDERBUFFER,Ht.__webglColorRenderbuffer[En]);const tn=r.get(ce[En]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ht.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+En,t.TEXTURE_2D,tn,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ht.__webglMultisampledFramebuffer)}}function Nn(Ee){return Math.min(I,Ee.samples)}function cr(Ee){const ce=r.get(Ee);return m&&Ee.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ce.__useRenderToTexture!==!1}function li(Ee){const ce=h.render.frame;Z.get(Ee)!==ce&&(Z.set(Ee,ce),Ee.update())}function Dr(Ee,ce){const ut=Ee.colorSpace,Vt=Ee.format,Ot=Ee.type;return Ee.isCompressedTexture===!0||Ee.format===zH||ut!==Wc&&ut!==Mg&&(ut===tr?m===!1?e.has("EXT_sRGB")===!0&&Vt===Fu?(Ee.format=zH,Ee.minFilter=Ol,Ee.generateMipmaps=!1):ce=z_e.sRGBToLinear(ce):(Vt!==Fu||Ot!==$f)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ut)),ce}this.allocateTextureUnit=Ge,this.resetTextureUnits=vt,this.setTexture2D=Je,this.setTexture2DArray=Be,this.setTexture3D=nt,this.setTextureCube=Wt,this.rebindTextures=Sn,this.setupRenderTarget=gn,this.updateRenderTargetMipmap=Ir,this.updateMultisampleRenderTarget=kn,this.setupDepthRenderbuffer=Pn,this.setupFrameBufferTexture=xn,this.useMultisampledRTT=cr}function JUe(t,e,n){const r=n.isWebGL2;function o(u,h=Mg){let m;if(u===$f)return t.UNSIGNED_BYTE;if(u===D_e)return t.UNSIGNED_SHORT_4_4_4_4;if(u===L_e)return t.UNSIGNED_SHORT_5_5_5_1;if(u===RLe)return t.BYTE;if(u===OLe)return t.SHORT;if(u===gG)return t.UNSIGNED_SHORT;if(u===O_e)return t.INT;if(u===Rf)return t.UNSIGNED_INT;if(u===Of)return t.FLOAT;if(u===sP)return r?t.HALF_FLOAT:(m=e.get("OES_texture_half_float"),m!==null?m.HALF_FLOAT_OES:null);if(u===DLe)return t.ALPHA;if(u===Fu)return t.RGBA;if(u===LLe)return t.LUMINANCE;if(u===NLe)return t.LUMINANCE_ALPHA;if(u===kg)return t.DEPTH_COMPONENT;if(u===K_)return t.DEPTH_STENCIL;if(u===zH)return m=e.get("EXT_sRGB"),m!==null?m.SRGB_ALPHA_EXT:null;if(u===FLe)return t.RED;if(u===N_e)return t.RED_INTEGER;if(u===BLe)return t.RG;if(u===F_e)return t.RG_INTEGER;if(u===B_e)return t.RGBA_INTEGER;if(u===L6||u===N6||u===F6||u===B6)if(h===tr)if(m=e.get("WEBGL_compressed_texture_s3tc_srgb"),m!==null){if(u===L6)return m.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(u===N6)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(u===F6)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(u===B6)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(m=e.get("WEBGL_compressed_texture_s3tc"),m!==null){if(u===L6)return m.COMPRESSED_RGB_S3TC_DXT1_EXT;if(u===N6)return m.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(u===F6)return m.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(u===B6)return m.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(u===Ume||u===Vme||u===jme||u===zme)if(m=e.get("WEBGL_compressed_texture_pvrtc"),m!==null){if(u===Ume)return m.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(u===Vme)return m.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(u===jme)return m.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(u===zme)return m.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(u===ULe)return m=e.get("WEBGL_compressed_texture_etc1"),m!==null?m.COMPRESSED_RGB_ETC1_WEBGL:null;if(u===Hme||u===Gme)if(m=e.get("WEBGL_compressed_texture_etc"),m!==null){if(u===Hme)return h===tr?m.COMPRESSED_SRGB8_ETC2:m.COMPRESSED_RGB8_ETC2;if(u===Gme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:m.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(u===Wme||u===$me||u===Kme||u===qme||u===Xme||u===Yme||u===Zme||u===Qme||u===Jme||u===eve||u===tve||u===nve||u===rve||u===ive)if(m=e.get("WEBGL_compressed_texture_astc"),m!==null){if(u===Wme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:m.COMPRESSED_RGBA_ASTC_4x4_KHR;if(u===$me)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:m.COMPRESSED_RGBA_ASTC_5x4_KHR;if(u===Kme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:m.COMPRESSED_RGBA_ASTC_5x5_KHR;if(u===qme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:m.COMPRESSED_RGBA_ASTC_6x5_KHR;if(u===Xme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:m.COMPRESSED_RGBA_ASTC_6x6_KHR;if(u===Yme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:m.COMPRESSED_RGBA_ASTC_8x5_KHR;if(u===Zme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:m.COMPRESSED_RGBA_ASTC_8x6_KHR;if(u===Qme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:m.COMPRESSED_RGBA_ASTC_8x8_KHR;if(u===Jme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:m.COMPRESSED_RGBA_ASTC_10x5_KHR;if(u===eve)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:m.COMPRESSED_RGBA_ASTC_10x6_KHR;if(u===tve)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:m.COMPRESSED_RGBA_ASTC_10x8_KHR;if(u===nve)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:m.COMPRESSED_RGBA_ASTC_10x10_KHR;if(u===rve)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:m.COMPRESSED_RGBA_ASTC_12x10_KHR;if(u===ive)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:m.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(u===U6)if(m=e.get("EXT_texture_compression_bptc"),m!==null){if(u===U6)return h===tr?m.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:m.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(u===VLe||u===ove||u===sve||u===ave)if(m=e.get("EXT_texture_compression_rgtc"),m!==null){if(u===U6)return m.COMPRESSED_RED_RGTC1_EXT;if(u===ove)return m.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(u===sve)return m.COMPRESSED_RED_GREEN_RGTC2_EXT;if(u===ave)return m.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return u===Pg?r?t.UNSIGNED_INT_24_8:(m=e.get("WEBGL_depth_texture"),m!==null?m.UNSIGNED_INT_24_8_WEBGL:null):t[u]!==void 0?t[u]:null}return{convert:o}}class e4e extends Fa{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let DD=class extends Do{constructor(){super(),this.isGroup=!0,this.type="Group"}};const t4e={type:"move"};class u8{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new DD,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new DD,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new dt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new dt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new DD,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new dt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new dt),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let o=null,u=null,h=null;const m=this._targetRay,_=this._grip,x=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(x&&e.hand){h=!0;for(const j of e.hand.values()){const z=n.getJointPose(j,r),U=this._getHandJoint(x,j);z!==null&&(U.matrix.fromArray(z.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale),U.matrixWorldNeedsUpdate=!0,U.jointRadius=z.radius),U.visible=z!==null}const T=x.joints["index-finger-tip"],I=x.joints["thumb-tip"],N=T.position.distanceTo(I.position),H=.02,Z=.005;x.inputState.pinching&&N>H+Z?(x.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!x.inputState.pinching&&N<=H-Z&&(x.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else _!==null&&e.gripSpace&&(u=n.getPose(e.gripSpace,r),u!==null&&(_.matrix.fromArray(u.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,u.linearVelocity?(_.hasLinearVelocity=!0,_.linearVelocity.copy(u.linearVelocity)):_.hasLinearVelocity=!1,u.angularVelocity?(_.hasAngularVelocity=!0,_.angularVelocity.copy(u.angularVelocity)):_.hasAngularVelocity=!1));m!==null&&(o=n.getPose(e.targetRaySpace,r),o===null&&u!==null&&(o=u),o!==null&&(m.matrix.fromArray(o.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,o.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(o.linearVelocity)):m.hasLinearVelocity=!1,o.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(o.angularVelocity)):m.hasAngularVelocity=!1,this.dispatchEvent(t4e)))}return m!==null&&(m.visible=o!==null),_!==null&&(_.visible=u!==null),x!==null&&(x.visible=h!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new DD;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class n4e extends _s{constructor(e,n,r,o,u,h,m,_,x,T){if(T=T!==void 0?T:kg,T!==kg&&T!==K_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&T===kg&&(r=Rf),r===void 0&&T===K_&&(r=Pg),super(null,o,u,h,m,_,T,r,x),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=m!==void 0?m:js,this.minFilter=_!==void 0?_:js,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class r4e extends Kg{constructor(e,n){super();const r=this;let o=null,u=1,h=null,m="local-floor",_=1,x=null,T=null,I=null,N=null,H=null,Z=null;const j=n.getContextAttributes();let z=null,U=null;const C=[],K=[],te=new Fa;te.layers.enable(1),te.viewport=new Io;const pe=new Fa;pe.layers.enable(2),pe.viewport=new Io;const Q=[te,pe],Se=new e4e;Se.layers.enable(1),Se.layers.enable(2);let Pe=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Be){let nt=C[Be];return nt===void 0&&(nt=new u8,C[Be]=nt),nt.getTargetRaySpace()},this.getControllerGrip=function(Be){let nt=C[Be];return nt===void 0&&(nt=new u8,C[Be]=nt),nt.getGripSpace()},this.getHand=function(Be){let nt=C[Be];return nt===void 0&&(nt=new u8,C[Be]=nt),nt.getHandSpace()};function ye(Be){const nt=K.indexOf(Be.inputSource);if(nt===-1)return;const Wt=C[nt];Wt!==void 0&&(Wt.update(Be.inputSource,Be.frame,x||h),Wt.dispatchEvent({type:Be.type,data:Be.inputSource}))}function St(){o.removeEventListener("select",ye),o.removeEventListener("selectstart",ye),o.removeEventListener("selectend",ye),o.removeEventListener("squeeze",ye),o.removeEventListener("squeezestart",ye),o.removeEventListener("squeezeend",ye),o.removeEventListener("end",St),o.removeEventListener("inputsourceschange",kt);for(let Be=0;Be<C.length;Be++){const nt=K[Be];nt!==null&&(K[Be]=null,C[Be].disconnect(nt))}Pe=null,G=null,e.setRenderTarget(z),H=null,N=null,I=null,o=null,U=null,Je.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Be){u=Be,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Be){m=Be,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return x||h},this.setReferenceSpace=function(Be){x=Be},this.getBaseLayer=function(){return N!==null?N:H},this.getBinding=function(){return I},this.getFrame=function(){return Z},this.getSession=function(){return o},this.setSession=async function(Be){if(o=Be,o!==null){if(z=e.getRenderTarget(),o.addEventListener("select",ye),o.addEventListener("selectstart",ye),o.addEventListener("selectend",ye),o.addEventListener("squeeze",ye),o.addEventListener("squeezestart",ye),o.addEventListener("squeezeend",ye),o.addEventListener("end",St),o.addEventListener("inputsourceschange",kt),j.xrCompatible!==!0&&await n.makeXRCompatible(),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const nt={antialias:o.renderState.layers===void 0?j.antialias:!0,alpha:!0,depth:j.depth,stencil:j.stencil,framebufferScaleFactor:u};H=new XRWebGLLayer(o,n,nt),o.updateRenderState({baseLayer:H}),U=new Fg(H.framebufferWidth,H.framebufferHeight,{format:Fu,type:$f,colorSpace:e.outputColorSpace,stencilBuffer:j.stencil})}else{let nt=null,Wt=null,Ut=null;j.depth&&(Ut=j.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,nt=j.stencil?K_:kg,Wt=j.stencil?Pg:Rf);const Dt={colorFormat:n.RGBA8,depthFormat:Ut,scaleFactor:u};I=new XRWebGLBinding(o,n),N=I.createProjectionLayer(Dt),o.updateRenderState({layers:[N]}),U=new Fg(N.textureWidth,N.textureHeight,{format:Fu,type:$f,depthTexture:new n4e(N.textureWidth,N.textureHeight,Wt,void 0,void 0,void 0,void 0,void 0,void 0,nt),stencilBuffer:j.stencil,colorSpace:e.outputColorSpace,samples:j.antialias?4:0});const en=e.properties.get(U);en.__ignoreDepthValues=N.ignoreDepthValues}U.isXRRenderTarget=!0,this.setFoveation(_),x=null,h=await o.requestReferenceSpace(m),Je.setContext(o),Je.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode};function kt(Be){for(let nt=0;nt<Be.removed.length;nt++){const Wt=Be.removed[nt],Ut=K.indexOf(Wt);Ut>=0&&(K[Ut]=null,C[Ut].disconnect(Wt))}for(let nt=0;nt<Be.added.length;nt++){const Wt=Be.added[nt];let Ut=K.indexOf(Wt);if(Ut===-1){for(let en=0;en<C.length;en++)if(en>=K.length){K.push(Wt),Ut=en;break}else if(K[en]===null){K[en]=Wt,Ut=en;break}if(Ut===-1)break}const Dt=C[Ut];Dt&&Dt.connect(Wt)}}const it=new dt,me=new dt;function lt(Be,nt,Wt){it.setFromMatrixPosition(nt.matrixWorld),me.setFromMatrixPosition(Wt.matrixWorld);const Ut=it.distanceTo(me),Dt=nt.projectionMatrix.elements,en=Wt.projectionMatrix.elements,on=Dt[14]/(Dt[10]-1),wn=Dt[14]/(Dt[10]+1),$n=(Dt[9]+1)/Dt[5],Yr=(Dt[9]-1)/Dt[5],xn=(Dt[8]-1)/Dt[0],et=(en[8]+1)/en[0],ei=on*xn,Pn=on*et,Sn=Ut/(-xn+et),gn=Sn*-xn;nt.matrixWorld.decompose(Be.position,Be.quaternion,Be.scale),Be.translateX(gn),Be.translateZ(Sn),Be.matrixWorld.compose(Be.position,Be.quaternion,Be.scale),Be.matrixWorldInverse.copy(Be.matrixWorld).invert();const Ir=on+Sn,kn=wn+Sn,Nn=ei-gn,cr=Pn+(Ut-gn),li=$n*wn/kn*Ir,Dr=Yr*wn/kn*Ir;Be.projectionMatrix.makePerspective(Nn,cr,li,Dr,Ir,kn),Be.projectionMatrixInverse.copy(Be.projectionMatrix).invert()}function Fe(Be,nt){nt===null?Be.matrixWorld.copy(Be.matrix):Be.matrixWorld.multiplyMatrices(nt.matrixWorld,Be.matrix),Be.matrixWorldInverse.copy(Be.matrixWorld).invert()}this.updateCamera=function(Be){if(o===null)return;Se.near=pe.near=te.near=Be.near,Se.far=pe.far=te.far=Be.far,(Pe!==Se.near||G!==Se.far)&&(o.updateRenderState({depthNear:Se.near,depthFar:Se.far}),Pe=Se.near,G=Se.far);const nt=Be.parent,Wt=Se.cameras;Fe(Se,nt);for(let Ut=0;Ut<Wt.length;Ut++)Fe(Wt[Ut],nt);Wt.length===2?lt(Se,te,pe):Se.projectionMatrix.copy(te.projectionMatrix),vt(Be,Se,nt)};function vt(Be,nt,Wt){Wt===null?Be.matrix.copy(nt.matrixWorld):(Be.matrix.copy(Wt.matrixWorld),Be.matrix.invert(),Be.matrix.multiply(nt.matrixWorld)),Be.matrix.decompose(Be.position,Be.quaternion,Be.scale),Be.updateMatrixWorld(!0);const Ut=Be.children;for(let Dt=0,en=Ut.length;Dt<en;Dt++)Ut[Dt].updateMatrixWorld(!0);Be.projectionMatrix.copy(nt.projectionMatrix),Be.projectionMatrixInverse.copy(nt.projectionMatrixInverse),Be.isPerspectiveCamera&&(Be.fov=HH*2*Math.atan(1/Be.projectionMatrix.elements[5]),Be.zoom=1)}this.getCamera=function(){return Se},this.getFoveation=function(){if(!(N===null&&H===null))return _},this.setFoveation=function(Be){_=Be,N!==null&&(N.fixedFoveation=Be),H!==null&&H.fixedFoveation!==void 0&&(H.fixedFoveation=Be)};let Ge=null;function mt(Be,nt){if(T=nt.getViewerPose(x||h),Z=nt,T!==null){const Wt=T.views;H!==null&&(e.setRenderTargetFramebuffer(U,H.framebuffer),e.setRenderTarget(U));let Ut=!1;Wt.length!==Se.cameras.length&&(Se.cameras.length=0,Ut=!0);for(let Dt=0;Dt<Wt.length;Dt++){const en=Wt[Dt];let on=null;if(H!==null)on=H.getViewport(en);else{const $n=I.getViewSubImage(N,en);on=$n.viewport,Dt===0&&(e.setRenderTargetTextures(U,$n.colorTexture,N.ignoreDepthValues?void 0:$n.depthStencilTexture),e.setRenderTarget(U))}let wn=Q[Dt];wn===void 0&&(wn=new Fa,wn.layers.enable(Dt),wn.viewport=new Io,Q[Dt]=wn),wn.matrix.fromArray(en.transform.matrix),wn.matrix.decompose(wn.position,wn.quaternion,wn.scale),wn.projectionMatrix.fromArray(en.projectionMatrix),wn.projectionMatrixInverse.copy(wn.projectionMatrix).invert(),wn.viewport.set(on.x,on.y,on.width,on.height),Dt===0&&(Se.matrix.copy(wn.matrix),Se.matrix.decompose(Se.position,Se.quaternion,Se.scale)),Ut===!0&&Se.cameras.push(wn)}}for(let Wt=0;Wt<C.length;Wt++){const Ut=K[Wt],Dt=C[Wt];Ut!==null&&Dt!==void 0&&Dt.update(Ut,nt,x||h)}Ge&&Ge(Be,nt),nt.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:nt}),Z=null}const Je=new Z_e;Je.setAnimationLoop(mt),this.setAnimationLoop=function(Be){Ge=Be},this.dispose=function(){}}}function i4e(t,e){function n(z,U){z.matrixAutoUpdate===!0&&z.updateMatrix(),U.value.copy(z.matrix)}function r(z,U){U.color.getRGB(z.fogColor.value,X_e(t)),U.isFog?(z.fogNear.value=U.near,z.fogFar.value=U.far):U.isFogExp2&&(z.fogDensity.value=U.density)}function o(z,U,C,K,te){U.isMeshBasicMaterial||U.isMeshLambertMaterial?u(z,U):U.isMeshToonMaterial?(u(z,U),I(z,U)):U.isMeshPhongMaterial?(u(z,U),T(z,U)):U.isMeshStandardMaterial?(u(z,U),N(z,U),U.isMeshPhysicalMaterial&&H(z,U,te)):U.isMeshMatcapMaterial?(u(z,U),Z(z,U)):U.isMeshDepthMaterial?u(z,U):U.isMeshDistanceMaterial?(u(z,U),j(z,U)):U.isMeshNormalMaterial?u(z,U):U.isLineBasicMaterial?(h(z,U),U.isLineDashedMaterial&&m(z,U)):U.isPointsMaterial?_(z,U,C,K):U.isSpriteMaterial?x(z,U):U.isShadowMaterial?(z.color.value.copy(U.color),z.opacity.value=U.opacity):U.isShaderMaterial&&(U.uniformsNeedUpdate=!1)}function u(z,U){z.opacity.value=U.opacity,U.color&&z.diffuse.value.copy(U.color),U.emissive&&z.emissive.value.copy(U.emissive).multiplyScalar(U.emissiveIntensity),U.map&&(z.map.value=U.map,n(U.map,z.mapTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,n(U.alphaMap,z.alphaMapTransform)),U.bumpMap&&(z.bumpMap.value=U.bumpMap,n(U.bumpMap,z.bumpMapTransform),z.bumpScale.value=U.bumpScale,U.side===ya&&(z.bumpScale.value*=-1)),U.normalMap&&(z.normalMap.value=U.normalMap,n(U.normalMap,z.normalMapTransform),z.normalScale.value.copy(U.normalScale),U.side===ya&&z.normalScale.value.negate()),U.displacementMap&&(z.displacementMap.value=U.displacementMap,n(U.displacementMap,z.displacementMapTransform),z.displacementScale.value=U.displacementScale,z.displacementBias.value=U.displacementBias),U.emissiveMap&&(z.emissiveMap.value=U.emissiveMap,n(U.emissiveMap,z.emissiveMapTransform)),U.specularMap&&(z.specularMap.value=U.specularMap,n(U.specularMap,z.specularMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest);const C=e.get(U).envMap;if(C&&(z.envMap.value=C,z.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,z.reflectivity.value=U.reflectivity,z.ior.value=U.ior,z.refractionRatio.value=U.refractionRatio),U.lightMap){z.lightMap.value=U.lightMap;const K=t._useLegacyLights===!0?Math.PI:1;z.lightMapIntensity.value=U.lightMapIntensity*K,n(U.lightMap,z.lightMapTransform)}U.aoMap&&(z.aoMap.value=U.aoMap,z.aoMapIntensity.value=U.aoMapIntensity,n(U.aoMap,z.aoMapTransform))}function h(z,U){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,U.map&&(z.map.value=U.map,n(U.map,z.mapTransform))}function m(z,U){z.dashSize.value=U.dashSize,z.totalSize.value=U.dashSize+U.gapSize,z.scale.value=U.scale}function _(z,U,C,K){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,z.size.value=U.size*C,z.scale.value=K*.5,U.map&&(z.map.value=U.map,n(U.map,z.uvTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,n(U.alphaMap,z.alphaMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest)}function x(z,U){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,z.rotation.value=U.rotation,U.map&&(z.map.value=U.map,n(U.map,z.mapTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,n(U.alphaMap,z.alphaMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest)}function T(z,U){z.specular.value.copy(U.specular),z.shininess.value=Math.max(U.shininess,1e-4)}function I(z,U){U.gradientMap&&(z.gradientMap.value=U.gradientMap)}function N(z,U){z.metalness.value=U.metalness,U.metalnessMap&&(z.metalnessMap.value=U.metalnessMap,n(U.metalnessMap,z.metalnessMapTransform)),z.roughness.value=U.roughness,U.roughnessMap&&(z.roughnessMap.value=U.roughnessMap,n(U.roughnessMap,z.roughnessMapTransform)),e.get(U).envMap&&(z.envMapIntensity.value=U.envMapIntensity)}function H(z,U,C){z.ior.value=U.ior,U.sheen>0&&(z.sheenColor.value.copy(U.sheenColor).multiplyScalar(U.sheen),z.sheenRoughness.value=U.sheenRoughness,U.sheenColorMap&&(z.sheenColorMap.value=U.sheenColorMap,n(U.sheenColorMap,z.sheenColorMapTransform)),U.sheenRoughnessMap&&(z.sheenRoughnessMap.value=U.sheenRoughnessMap,n(U.sheenRoughnessMap,z.sheenRoughnessMapTransform))),U.clearcoat>0&&(z.clearcoat.value=U.clearcoat,z.clearcoatRoughness.value=U.clearcoatRoughness,U.clearcoatMap&&(z.clearcoatMap.value=U.clearcoatMap,n(U.clearcoatMap,z.clearcoatMapTransform)),U.clearcoatRoughnessMap&&(z.clearcoatRoughnessMap.value=U.clearcoatRoughnessMap,n(U.clearcoatRoughnessMap,z.clearcoatRoughnessMapTransform)),U.clearcoatNormalMap&&(z.clearcoatNormalMap.value=U.clearcoatNormalMap,n(U.clearcoatNormalMap,z.clearcoatNormalMapTransform),z.clearcoatNormalScale.value.copy(U.clearcoatNormalScale),U.side===ya&&z.clearcoatNormalScale.value.negate())),U.iridescence>0&&(z.iridescence.value=U.iridescence,z.iridescenceIOR.value=U.iridescenceIOR,z.iridescenceThicknessMinimum.value=U.iridescenceThicknessRange[0],z.iridescenceThicknessMaximum.value=U.iridescenceThicknessRange[1],U.iridescenceMap&&(z.iridescenceMap.value=U.iridescenceMap,n(U.iridescenceMap,z.iridescenceMapTransform)),U.iridescenceThicknessMap&&(z.iridescenceThicknessMap.value=U.iridescenceThicknessMap,n(U.iridescenceThicknessMap,z.iridescenceThicknessMapTransform))),U.transmission>0&&(z.transmission.value=U.transmission,z.transmissionSamplerMap.value=C.texture,z.transmissionSamplerSize.value.set(C.width,C.height),U.transmissionMap&&(z.transmissionMap.value=U.transmissionMap,n(U.transmissionMap,z.transmissionMapTransform)),z.thickness.value=U.thickness,U.thicknessMap&&(z.thicknessMap.value=U.thicknessMap,n(U.thicknessMap,z.thicknessMapTransform)),z.attenuationDistance.value=U.attenuationDistance,z.attenuationColor.value.copy(U.attenuationColor)),U.anisotropy>0&&(z.anisotropyVector.value.set(U.anisotropy*Math.cos(U.anisotropyRotation),U.anisotropy*Math.sin(U.anisotropyRotation)),U.anisotropyMap&&(z.anisotropyMap.value=U.anisotropyMap,n(U.anisotropyMap,z.anisotropyMapTransform))),z.specularIntensity.value=U.specularIntensity,z.specularColor.value.copy(U.specularColor),U.specularColorMap&&(z.specularColorMap.value=U.specularColorMap,n(U.specularColorMap,z.specularColorMapTransform)),U.specularIntensityMap&&(z.specularIntensityMap.value=U.specularIntensityMap,n(U.specularIntensityMap,z.specularIntensityMapTransform))}function Z(z,U){U.matcap&&(z.matcap.value=U.matcap)}function j(z,U){const C=e.get(U).light;z.referencePosition.value.setFromMatrixPosition(C.matrixWorld),z.nearDistance.value=C.shadow.camera.near,z.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:o}}function o4e(t,e,n,r){let o={},u={},h=[];const m=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function _(C,K){const te=K.program;r.uniformBlockBinding(C,te)}function x(C,K){let te=o[C.id];te===void 0&&(Z(C),te=T(C),o[C.id]=te,C.addEventListener("dispose",z));const pe=K.program;r.updateUBOMapping(C,pe);const Q=e.render.frame;u[C.id]!==Q&&(N(C),u[C.id]=Q)}function T(C){const K=I();C.__bindingPointIndex=K;const te=t.createBuffer(),pe=C.__size,Q=C.usage;return t.bindBuffer(t.UNIFORM_BUFFER,te),t.bufferData(t.UNIFORM_BUFFER,pe,Q),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,K,te),te}function I(){for(let C=0;C<m;C++)if(h.indexOf(C)===-1)return h.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function N(C){const K=o[C.id],te=C.uniforms,pe=C.__cache;t.bindBuffer(t.UNIFORM_BUFFER,K);for(let Q=0,Se=te.length;Q<Se;Q++){const Pe=te[Q];if(H(Pe,Q,pe)===!0){const G=Pe.__offset,ye=Array.isArray(Pe.value)?Pe.value:[Pe.value];let St=0;for(let kt=0;kt<ye.length;kt++){const it=ye[kt],me=j(it);typeof it=="number"?(Pe.__data[0]=it,t.bufferSubData(t.UNIFORM_BUFFER,G+St,Pe.__data)):it.isMatrix3?(Pe.__data[0]=it.elements[0],Pe.__data[1]=it.elements[1],Pe.__data[2]=it.elements[2],Pe.__data[3]=it.elements[0],Pe.__data[4]=it.elements[3],Pe.__data[5]=it.elements[4],Pe.__data[6]=it.elements[5],Pe.__data[7]=it.elements[0],Pe.__data[8]=it.elements[6],Pe.__data[9]=it.elements[7],Pe.__data[10]=it.elements[8],Pe.__data[11]=it.elements[0]):(it.toArray(Pe.__data,St),St+=me.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,G,Pe.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function H(C,K,te){const pe=C.value;if(te[K]===void 0){if(typeof pe=="number")te[K]=pe;else{const Q=Array.isArray(pe)?pe:[pe],Se=[];for(let Pe=0;Pe<Q.length;Pe++)Se.push(Q[Pe].clone());te[K]=Se}return!0}else if(typeof pe=="number"){if(te[K]!==pe)return te[K]=pe,!0}else{const Q=Array.isArray(te[K])?te[K]:[te[K]],Se=Array.isArray(pe)?pe:[pe];for(let Pe=0;Pe<Q.length;Pe++){const G=Q[Pe];if(G.equals(Se[Pe])===!1)return G.copy(Se[Pe]),!0}}return!1}function Z(C){const K=C.uniforms;let te=0;const pe=16;let Q=0;for(let Se=0,Pe=K.length;Se<Pe;Se++){const G=K[Se],ye={boundary:0,storage:0},St=Array.isArray(G.value)?G.value:[G.value];for(let kt=0,it=St.length;kt<it;kt++){const me=St[kt],lt=j(me);ye.boundary+=lt.boundary,ye.storage+=lt.storage}if(G.__data=new Float32Array(ye.storage/Float32Array.BYTES_PER_ELEMENT),G.__offset=te,Se>0){Q=te%pe;const kt=pe-Q;Q!==0&&kt-ye.boundary<0&&(te+=pe-Q,G.__offset=te)}te+=ye.storage}return Q=te%pe,Q>0&&(te+=pe-Q),C.__size=te,C.__cache={},this}function j(C){const K={boundary:0,storage:0};return typeof C=="number"?(K.boundary=4,K.storage=4):C.isVector2?(K.boundary=8,K.storage=8):C.isVector3||C.isColor?(K.boundary=16,K.storage=12):C.isVector4?(K.boundary=16,K.storage=16):C.isMatrix3?(K.boundary=48,K.storage=48):C.isMatrix4?(K.boundary=64,K.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),K}function z(C){const K=C.target;K.removeEventListener("dispose",z);const te=h.indexOf(K.__bindingPointIndex);h.splice(te,1),t.deleteBuffer(o[K.id]),delete o[K.id],delete u[K.id]}function U(){for(const C in o)t.deleteBuffer(o[C]);h=[],o={},u={}}return{bind:_,update:x,dispose:U}}function s4e(){const t=aP("canvas");return t.style.display="block",t}class nwe{constructor(e={}){const{canvas:n=s4e(),context:r=null,depth:o=!0,stencil:u=!0,alpha:h=!1,antialias:m=!1,premultipliedAlpha:_=!0,preserveDrawingBuffer:x=!1,powerPreference:T="default",failIfMajorPerformanceCaveat:I=!1}=e;this.isWebGLRenderer=!0;let N;r!==null?N=r.getContextAttributes().alpha:N=h;const H=new Uint32Array(4),Z=new Int32Array(4);let j=null,z=null;const U=[],C=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=tr,this._useLegacyLights=!1,this.toneMapping=Wf,this.toneMappingExposure=1;const K=this;let te=!1,pe=0,Q=0,Se=null,Pe=-1,G=null;const ye=new Io,St=new Io;let kt=null;const it=new Pr(0);let me=0,lt=n.width,Fe=n.height,vt=1,Ge=null,mt=null;const Je=new Io(0,0,lt,Fe),Be=new Io(0,0,lt,Fe);let nt=!1;const Wt=new xG;let Ut=!1,Dt=!1,en=null;const on=new uo,wn=new kr,$n=new dt,Yr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function xn(){return Se===null?vt:1}let et=r;function ei(_e,tt){for(let yt=0;yt<_e.length;yt++){const $e=_e[yt],_t=n.getContext($e,tt);if(_t!==null)return _t}return null}try{const _e={alpha:!0,depth:o,stencil:u,antialias:m,premultipliedAlpha:_,preserveDrawingBuffer:x,powerPreference:T,failIfMajorPerformanceCaveat:I};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${vG}`),n.addEventListener("webglcontextlost",Gt,!1),n.addEventListener("webglcontextrestored",ht,!1),n.addEventListener("webglcontextcreationerror",jt,!1),et===null){const tt=["webgl2","webgl","experimental-webgl"];if(K.isWebGL1Renderer===!0&&tt.shift(),et=ei(tt,_e),et===null)throw ei(tt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&et instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),et.getShaderPrecisionFormat===void 0&&(et.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(_e){throw console.error("THREE.WebGLRenderer: "+_e.message),_e}let Pn,Sn,gn,Ir,kn,Nn,cr,li,Dr,Ee,ce,ut,Vt,Ot,Bt,mn,Ht,pt,En,tn,yn,rn,Jt,Bn;function pr(){Pn=new vBe(et),Sn=new cBe(et,Pn,e),Pn.init(Sn),rn=new JUe(et,Pn,Sn),gn=new ZUe(et,Pn,Sn),Ir=new bBe(et),kn=new FUe,Nn=new QUe(et,Pn,gn,kn,Sn,rn,Ir),cr=new hBe(K),li=new mBe(K),Dr=new MNe(et,Sn),Jt=new lBe(et,Pn,Dr,Sn),Ee=new gBe(et,Dr,Ir,Jt),ce=new SBe(et,Ee,Dr,Ir),En=new xBe(et,Sn,Nn),mn=new dBe(kn),ut=new NUe(K,cr,li,Pn,Sn,Jt,mn),Vt=new i4e(K,kn),Ot=new UUe,Bt=new WUe(Pn,Sn),pt=new aBe(K,cr,li,gn,ce,N,_),Ht=new YUe(K,ce,Sn),Bn=new o4e(et,Ir,Sn,gn),tn=new uBe(et,Pn,Ir,Sn),yn=new yBe(et,Pn,Ir,Sn),Ir.programs=ut.programs,K.capabilities=Sn,K.extensions=Pn,K.properties=kn,K.renderLists=Ot,K.shadowMap=Ht,K.state=gn,K.info=Ir}pr();const Le=new r4e(K,et);this.xr=Le,this.getContext=function(){return et},this.getContextAttributes=function(){return et.getContextAttributes()},this.forceContextLoss=function(){const _e=Pn.get("WEBGL_lose_context");_e&&_e.loseContext()},this.forceContextRestore=function(){const _e=Pn.get("WEBGL_lose_context");_e&&_e.restoreContext()},this.getPixelRatio=function(){return vt},this.setPixelRatio=function(_e){_e!==void 0&&(vt=_e,this.setSize(lt,Fe,!1))},this.getSize=function(_e){return _e.set(lt,Fe)},this.setSize=function(_e,tt,yt=!0){if(Le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}lt=_e,Fe=tt,n.width=Math.floor(_e*vt),n.height=Math.floor(tt*vt),yt===!0&&(n.style.width=_e+"px",n.style.height=tt+"px"),this.setViewport(0,0,_e,tt)},this.getDrawingBufferSize=function(_e){return _e.set(lt*vt,Fe*vt).floor()},this.setDrawingBufferSize=function(_e,tt,yt){lt=_e,Fe=tt,vt=yt,n.width=Math.floor(_e*yt),n.height=Math.floor(tt*yt),this.setViewport(0,0,_e,tt)},this.getCurrentViewport=function(_e){return _e.copy(ye)},this.getViewport=function(_e){return _e.copy(Je)},this.setViewport=function(_e,tt,yt,$e){_e.isVector4?Je.set(_e.x,_e.y,_e.z,_e.w):Je.set(_e,tt,yt,$e),gn.viewport(ye.copy(Je).multiplyScalar(vt).floor())},this.getScissor=function(_e){return _e.copy(Be)},this.setScissor=function(_e,tt,yt,$e){_e.isVector4?Be.set(_e.x,_e.y,_e.z,_e.w):Be.set(_e,tt,yt,$e),gn.scissor(St.copy(Be).multiplyScalar(vt).floor())},this.getScissorTest=function(){return nt},this.setScissorTest=function(_e){gn.setScissorTest(nt=_e)},this.setOpaqueSort=function(_e){Ge=_e},this.setTransparentSort=function(_e){mt=_e},this.getClearColor=function(_e){return _e.copy(pt.getClearColor())},this.setClearColor=function(){pt.setClearColor.apply(pt,arguments)},this.getClearAlpha=function(){return pt.getClearAlpha()},this.setClearAlpha=function(){pt.setClearAlpha.apply(pt,arguments)},this.clear=function(_e=!0,tt=!0,yt=!0){let $e=0;if(_e){let _t=!1;if(Se!==null){const Xt=Se.texture.format;_t=Xt===B_e||Xt===F_e||Xt===N_e}if(_t){const Xt=Se.texture.type,pn=Xt===$f||Xt===Rf||Xt===gG||Xt===Pg||Xt===D_e||Xt===L_e,Ln=pt.getClearColor(),Tn=pt.getClearAlpha(),Kn=Ln.r,Mn=Ln.g,jn=Ln.b;pn?(H[0]=Kn,H[1]=Mn,H[2]=jn,H[3]=Tn,et.clearBufferuiv(et.COLOR,0,H)):(Z[0]=Kn,Z[1]=Mn,Z[2]=jn,Z[3]=Tn,et.clearBufferiv(et.COLOR,0,Z))}else $e|=et.COLOR_BUFFER_BIT}tt&&($e|=et.DEPTH_BUFFER_BIT),yt&&($e|=et.STENCIL_BUFFER_BIT),et.clear($e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Gt,!1),n.removeEventListener("webglcontextrestored",ht,!1),n.removeEventListener("webglcontextcreationerror",jt,!1),Ot.dispose(),Bt.dispose(),kn.dispose(),cr.dispose(),li.dispose(),ce.dispose(),Jt.dispose(),Bn.dispose(),ut.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",rr),Le.removeEventListener("sessionend",Gr),en&&(en.dispose(),en=null),Ar.stop()};function Gt(_e){_e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),te=!0}function ht(){console.log("THREE.WebGLRenderer: Context Restored."),te=!1;const _e=Ir.autoReset,tt=Ht.enabled,yt=Ht.autoUpdate,$e=Ht.needsUpdate,_t=Ht.type;pr(),Ir.autoReset=_e,Ht.enabled=tt,Ht.autoUpdate=yt,Ht.needsUpdate=$e,Ht.type=_t}function jt(_e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",_e.statusMessage)}function qt(_e){const tt=_e.target;tt.removeEventListener("dispose",qt),Qn(tt)}function Qn(_e){Lr(_e),kn.remove(_e)}function Lr(_e){const tt=kn.get(_e).programs;tt!==void 0&&(tt.forEach(function(yt){ut.releaseProgram(yt)}),_e.isShaderMaterial&&ut.releaseShaderCache(_e))}this.renderBufferDirect=function(_e,tt,yt,$e,_t,Xt){tt===null&&(tt=Yr);const pn=_t.isMesh&&_t.matrixWorld.determinant()<0,Ln=ed(_e,tt,yt,$e,_t);gn.setMaterial($e,pn);let Tn=yt.index,Kn=1;if($e.wireframe===!0){if(Tn=Ee.getWireframeAttribute(yt),Tn===void 0)return;Kn=2}const Mn=yt.drawRange,jn=yt.attributes.position;let Nr=Mn.start*Kn,lr=(Mn.start+Mn.count)*Kn;Xt!==null&&(Nr=Math.max(Nr,Xt.start*Kn),lr=Math.min(lr,(Xt.start+Xt.count)*Kn)),Tn!==null?(Nr=Math.max(Nr,0),lr=Math.min(lr,Tn.count)):jn!=null&&(Nr=Math.max(Nr,0),lr=Math.min(lr,jn.count));const Zr=lr-Nr;if(Zr<0||Zr===1/0)return;Jt.setup(_t,$e,Ln,yt,Tn);let Ss,Wr=tn;if(Tn!==null&&(Ss=Dr.get(Tn),Wr=yn,Wr.setIndex(Ss)),_t.isMesh)$e.wireframe===!0?(gn.setLineWidth($e.wireframeLinewidth*xn()),Wr.setMode(et.LINES)):Wr.setMode(et.TRIANGLES);else if(_t.isLine){let Yn=$e.linewidth;Yn===void 0&&(Yn=1),gn.setLineWidth(Yn*xn()),_t.isLineSegments?Wr.setMode(et.LINES):_t.isLineLoop?Wr.setMode(et.LINE_LOOP):Wr.setMode(et.LINE_STRIP)}else _t.isPoints?Wr.setMode(et.POINTS):_t.isSprite&&Wr.setMode(et.TRIANGLES);if(_t.isInstancedMesh)Wr.renderInstances(Nr,Zr,_t.count);else if(yt.isInstancedBufferGeometry){const Yn=yt._maxInstanceCount!==void 0?yt._maxInstanceCount:1/0,Xa=Math.min(yt.instanceCount,Yn);Wr.renderInstances(Nr,Zr,Xa)}else Wr.render(Nr,Zr)},this.compile=function(_e,tt){function yt($e,_t,Xt){$e.transparent===!0&&$e.side===fh&&$e.forceSinglePass===!1?($e.side=ya,$e.needsUpdate=!0,Wu($e,_t,Xt),$e.side=Jf,$e.needsUpdate=!0,Wu($e,_t,Xt),$e.side=fh):Wu($e,_t,Xt)}z=Bt.get(_e),z.init(),C.push(z),_e.traverseVisible(function($e){$e.isLight&&$e.layers.test(tt.layers)&&(z.pushLight($e),$e.castShadow&&z.pushShadow($e))}),z.setupLights(K._useLegacyLights),_e.traverse(function($e){const _t=$e.material;if(_t)if(Array.isArray(_t))for(let Xt=0;Xt<_t.length;Xt++){const pn=_t[Xt];yt(pn,_e,$e)}else yt(_t,_e,$e)}),C.pop(),z=null};let Mr=null;function es(_e){Mr&&Mr(_e)}function rr(){Ar.stop()}function Gr(){Ar.start()}const Ar=new Z_e;Ar.setAnimationLoop(es),typeof self<"u"&&Ar.setContext(self),this.setAnimationLoop=function(_e){Mr=_e,Le.setAnimationLoop(_e),_e===null?Ar.stop():Ar.start()},Le.addEventListener("sessionstart",rr),Le.addEventListener("sessionend",Gr),this.render=function(_e,tt){if(tt!==void 0&&tt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(te===!0)return;_e.matrixWorldAutoUpdate===!0&&_e.updateMatrixWorld(),tt.parent===null&&tt.matrixWorldAutoUpdate===!0&&tt.updateMatrixWorld(),Le.enabled===!0&&Le.isPresenting===!0&&(Le.cameraAutoUpdate===!0&&Le.updateCamera(tt),tt=Le.getCamera()),_e.isScene===!0&&_e.onBeforeRender(K,_e,tt,Se),z=Bt.get(_e,C.length),z.init(),C.push(z),on.multiplyMatrices(tt.projectionMatrix,tt.matrixWorldInverse),Wt.setFromProjectionMatrix(on),Dt=this.localClippingEnabled,Ut=mn.init(this.clippingPlanes,Dt),j=Ot.get(_e,U.length),j.init(),U.push(j),Yc(_e,tt,0,K.sortObjects),j.finish(),K.sortObjects===!0&&j.sort(Ge,mt),this.info.render.frame++,Ut===!0&&mn.beginShadows();const yt=z.state.shadowsArray;if(Ht.render(yt,_e,tt),Ut===!0&&mn.endShadows(),this.info.autoReset===!0&&this.info.reset(),pt.render(j,_e),z.setupLights(K._useLegacyLights),tt.isArrayCamera){const $e=tt.cameras;for(let _t=0,Xt=$e.length;_t<Xt;_t++){const pn=$e[_t];Zc(j,_e,pn,pn.viewport)}}else Zc(j,_e,tt);Se!==null&&(Nn.updateMultisampleRenderTarget(Se),Nn.updateRenderTargetMipmap(Se)),_e.isScene===!0&&_e.onAfterRender(K,_e,tt),Jt.resetDefaultState(),Pe=-1,G=null,C.pop(),C.length>0?z=C[C.length-1]:z=null,U.pop(),U.length>0?j=U[U.length-1]:j=null};function Yc(_e,tt,yt,$e){if(_e.visible===!1)return;if(_e.layers.test(tt.layers)){if(_e.isGroup)yt=_e.renderOrder;else if(_e.isLOD)_e.autoUpdate===!0&&_e.update(tt);else if(_e.isLight)z.pushLight(_e),_e.castShadow&&z.pushShadow(_e);else if(_e.isSprite){if(!_e.frustumCulled||Wt.intersectsSprite(_e)){$e&&$n.setFromMatrixPosition(_e.matrixWorld).applyMatrix4(on);const pn=ce.update(_e),Ln=_e.material;Ln.visible&&j.push(_e,pn,Ln,yt,$n.z,null)}}else if((_e.isMesh||_e.isLine||_e.isPoints)&&(!_e.frustumCulled||Wt.intersectsObject(_e))){const pn=ce.update(_e),Ln=_e.material;if($e&&(_e.boundingSphere!==void 0?(_e.boundingSphere===null&&_e.computeBoundingSphere(),$n.copy(_e.boundingSphere.center)):(pn.boundingSphere===null&&pn.computeBoundingSphere(),$n.copy(pn.boundingSphere.center)),$n.applyMatrix4(_e.matrixWorld).applyMatrix4(on)),Array.isArray(Ln)){const Tn=pn.groups;for(let Kn=0,Mn=Tn.length;Kn<Mn;Kn++){const jn=Tn[Kn],Nr=Ln[jn.materialIndex];Nr&&Nr.visible&&j.push(_e,pn,Nr,yt,$n.z,jn)}}else Ln.visible&&j.push(_e,pn,Ln,yt,$n.z,null)}}const Xt=_e.children;for(let pn=0,Ln=Xt.length;pn<Ln;pn++)Yc(Xt[pn],tt,yt,$e)}function Zc(_e,tt,yt,$e){const _t=_e.opaque,Xt=_e.transmissive,pn=_e.transparent;z.setupLightsView(yt),Ut===!0&&mn.setGlobalState(K.clippingPlanes,yt),Xt.length>0&&Qc(_t,Xt,tt,yt),$e&&gn.viewport(ye.copy($e)),_t.length>0&&qa(_t,tt,yt),Xt.length>0&&qa(Xt,tt,yt),pn.length>0&&qa(pn,tt,yt),gn.buffers.depth.setTest(!0),gn.buffers.depth.setMask(!0),gn.buffers.color.setMask(!0),gn.setPolygonOffset(!1)}function Qc(_e,tt,yt,$e){const _t=Sn.isWebGL2;en===null&&(en=new Fg(1,1,{generateMipmaps:!0,type:Pn.has("EXT_color_buffer_half_float")?sP:$f,minFilter:oP,samples:_t?4:0})),K.getDrawingBufferSize(wn),_t?en.setSize(wn.x,wn.y):en.setSize(GH(wn.x),GH(wn.y));const Xt=K.getRenderTarget();K.setRenderTarget(en),K.getClearColor(it),me=K.getClearAlpha(),me<1&&K.setClearColor(16777215,.5),K.clear();const pn=K.toneMapping;K.toneMapping=Wf,qa(_e,yt,$e),Nn.updateMultisampleRenderTarget(en),Nn.updateRenderTargetMipmap(en);let Ln=!1;for(let Tn=0,Kn=tt.length;Tn<Kn;Tn++){const Mn=tt[Tn],jn=Mn.object,Nr=Mn.geometry,lr=Mn.material,Zr=Mn.group;if(lr.side===fh&&jn.layers.test($e.layers)){const Ss=lr.side;lr.side=ya,lr.needsUpdate=!0,Jc(jn,yt,$e,Nr,lr,Zr),lr.side=Ss,lr.needsUpdate=!0,Ln=!0}}Ln===!0&&(Nn.updateMultisampleRenderTarget(en),Nn.updateRenderTargetMipmap(en)),K.setRenderTarget(Xt),K.setClearColor(it,me),K.toneMapping=pn}function qa(_e,tt,yt){const $e=tt.isScene===!0?tt.overrideMaterial:null;for(let _t=0,Xt=_e.length;_t<Xt;_t++){const pn=_e[_t],Ln=pn.object,Tn=pn.geometry,Kn=$e===null?pn.material:$e,Mn=pn.group;Ln.layers.test(yt.layers)&&Jc(Ln,tt,yt,Tn,Kn,Mn)}}function Jc(_e,tt,yt,$e,_t,Xt){_e.onBeforeRender(K,tt,yt,$e,_t,Xt),_e.modelViewMatrix.multiplyMatrices(yt.matrixWorldInverse,_e.matrixWorld),_e.normalMatrix.getNormalMatrix(_e.modelViewMatrix),_t.onBeforeRender(K,tt,yt,$e,_e,Xt),_t.transparent===!0&&_t.side===fh&&_t.forceSinglePass===!1?(_t.side=ya,_t.needsUpdate=!0,K.renderBufferDirect(yt,tt,$e,_t,_e,Xt),_t.side=Jf,_t.needsUpdate=!0,K.renderBufferDirect(yt,tt,$e,_t,_e,Xt),_t.side=fh):K.renderBufferDirect(yt,tt,$e,_t,_e,Xt),_e.onAfterRender(K,tt,yt,$e,_t,Xt)}function Wu(_e,tt,yt){tt.isScene!==!0&&(tt=Yr);const $e=kn.get(_e),_t=z.state.lights,Xt=z.state.shadowsArray,pn=_t.state.version,Ln=ut.getParameters(_e,_t.state,Xt,tt,yt),Tn=ut.getProgramCacheKey(Ln);let Kn=$e.programs;$e.environment=_e.isMeshStandardMaterial?tt.environment:null,$e.fog=tt.fog,$e.envMap=(_e.isMeshStandardMaterial?li:cr).get(_e.envMap||$e.environment),Kn===void 0&&(_e.addEventListener("dispose",qt),Kn=new Map,$e.programs=Kn);let Mn=Kn.get(Tn);if(Mn!==void 0){if($e.currentProgram===Mn&&$e.lightsStateVersion===pn)return _a(_e,Ln),Mn}else Ln.uniforms=ut.getUniforms(_e),_e.onBuild(yt,Ln,K),_e.onBeforeCompile(Ln,K),Mn=ut.acquireProgram(Ln,Tn),Kn.set(Tn,Mn),$e.uniforms=Ln.uniforms;const jn=$e.uniforms;(!_e.isShaderMaterial&&!_e.isRawShaderMaterial||_e.clipping===!0)&&(jn.clippingPlanes=mn.uniform),_a(_e,Ln),$e.needsLights=hm(_e),$e.lightsStateVersion=pn,$e.needsLights&&(jn.ambientLightColor.value=_t.state.ambient,jn.lightProbe.value=_t.state.probe,jn.directionalLights.value=_t.state.directional,jn.directionalLightShadows.value=_t.state.directionalShadow,jn.spotLights.value=_t.state.spot,jn.spotLightShadows.value=_t.state.spotShadow,jn.rectAreaLights.value=_t.state.rectArea,jn.ltc_1.value=_t.state.rectAreaLTC1,jn.ltc_2.value=_t.state.rectAreaLTC2,jn.pointLights.value=_t.state.point,jn.pointLightShadows.value=_t.state.pointShadow,jn.hemisphereLights.value=_t.state.hemi,jn.directionalShadowMap.value=_t.state.directionalShadowMap,jn.directionalShadowMatrix.value=_t.state.directionalShadowMatrix,jn.spotShadowMap.value=_t.state.spotShadowMap,jn.spotLightMatrix.value=_t.state.spotLightMatrix,jn.spotLightMap.value=_t.state.spotLightMap,jn.pointShadowMap.value=_t.state.pointShadowMap,jn.pointShadowMatrix.value=_t.state.pointShadowMatrix);const Nr=Mn.getUniforms(),lr=JD.seqWithValue(Nr.seq,jn);return $e.currentProgram=Mn,$e.uniformsList=lr,Mn}function _a(_e,tt){const yt=kn.get(_e);yt.outputColorSpace=tt.outputColorSpace,yt.instancing=tt.instancing,yt.instancingColor=tt.instancingColor,yt.skinning=tt.skinning,yt.morphTargets=tt.morphTargets,yt.morphNormals=tt.morphNormals,yt.morphColors=tt.morphColors,yt.morphTargetsCount=tt.morphTargetsCount,yt.numClippingPlanes=tt.numClippingPlanes,yt.numIntersection=tt.numClipIntersection,yt.vertexAlphas=tt.vertexAlphas,yt.vertexTangents=tt.vertexTangents,yt.toneMapping=tt.toneMapping}function ed(_e,tt,yt,$e,_t){tt.isScene!==!0&&(tt=Yr),Nn.resetTextureUnits();const Xt=tt.fog,pn=$e.isMeshStandardMaterial?tt.environment:null,Ln=Se===null?K.outputColorSpace:Se.isXRRenderTarget===!0?Se.texture.colorSpace:Wc,Tn=($e.isMeshStandardMaterial?li:cr).get($e.envMap||pn),Kn=$e.vertexColors===!0&&!!yt.attributes.color&&yt.attributes.color.itemSize===4,Mn=!!yt.attributes.tangent&&(!!$e.normalMap||$e.anisotropy>0),jn=!!yt.morphAttributes.position,Nr=!!yt.morphAttributes.normal,lr=!!yt.morphAttributes.color;let Zr=Wf;$e.toneMapped&&(Se===null||Se.isXRRenderTarget===!0)&&(Zr=K.toneMapping);const Ss=yt.morphAttributes.position||yt.morphAttributes.normal||yt.morphAttributes.color,Wr=Ss!==void 0?Ss.length:0,Yn=kn.get($e),Xa=z.state.lights;if(Ut===!0&&(Dt===!0||_e!==G)){const eo=_e===G&&$e.id===Pe;mn.setState($e,_e,eo)}let wr=!1;$e.version===Yn.__version?(Yn.needsLights&&Yn.lightsStateVersion!==Xa.state.version||Yn.outputColorSpace!==Ln||_t.isInstancedMesh&&Yn.instancing===!1||!_t.isInstancedMesh&&Yn.instancing===!0||_t.isSkinnedMesh&&Yn.skinning===!1||!_t.isSkinnedMesh&&Yn.skinning===!0||_t.isInstancedMesh&&Yn.instancingColor===!0&&_t.instanceColor===null||_t.isInstancedMesh&&Yn.instancingColor===!1&&_t.instanceColor!==null||Yn.envMap!==Tn||$e.fog===!0&&Yn.fog!==Xt||Yn.numClippingPlanes!==void 0&&(Yn.numClippingPlanes!==mn.numPlanes||Yn.numIntersection!==mn.numIntersection)||Yn.vertexAlphas!==Kn||Yn.vertexTangents!==Mn||Yn.morphTargets!==jn||Yn.morphNormals!==Nr||Yn.morphColors!==lr||Yn.toneMapping!==Zr||Sn.isWebGL2===!0&&Yn.morphTargetsCount!==Wr)&&(wr=!0):(wr=!0,Yn.__version=$e.version);let Zs=Yn.currentProgram;wr===!0&&(Zs=Wu($e,tt,_t));let Ya=!1,Qs=!1,Za=!1;const Qr=Zs.getUniforms(),ts=Yn.uniforms;if(gn.useProgram(Zs.program)&&(Ya=!0,Qs=!0,Za=!0),$e.id!==Pe&&(Pe=$e.id,Qs=!0),Ya||G!==_e){if(Qr.setValue(et,"projectionMatrix",_e.projectionMatrix),Sn.logarithmicDepthBuffer&&Qr.setValue(et,"logDepthBufFC",2/(Math.log(_e.far+1)/Math.LN2)),G!==_e&&(G=_e,Qs=!0,Za=!0),$e.isShaderMaterial||$e.isMeshPhongMaterial||$e.isMeshToonMaterial||$e.isMeshStandardMaterial||$e.envMap){const eo=Qr.map.cameraPosition;eo!==void 0&&eo.setValue(et,$n.setFromMatrixPosition(_e.matrixWorld))}($e.isMeshPhongMaterial||$e.isMeshToonMaterial||$e.isMeshLambertMaterial||$e.isMeshBasicMaterial||$e.isMeshStandardMaterial||$e.isShaderMaterial)&&Qr.setValue(et,"isOrthographic",_e.isOrthographicCamera===!0),($e.isMeshPhongMaterial||$e.isMeshToonMaterial||$e.isMeshLambertMaterial||$e.isMeshBasicMaterial||$e.isMeshStandardMaterial||$e.isShaderMaterial||$e.isShadowMaterial||_t.isSkinnedMesh)&&Qr.setValue(et,"viewMatrix",_e.matrixWorldInverse)}if(_t.isSkinnedMesh){Qr.setOptional(et,_t,"bindMatrix"),Qr.setOptional(et,_t,"bindMatrixInverse");const eo=_t.skeleton;eo&&(Sn.floatVertexTextures?(eo.boneTexture===null&&eo.computeBoneTexture(),Qr.setValue(et,"boneTexture",eo.boneTexture,Nn),Qr.setValue(et,"boneTextureSize",eo.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Qa=yt.morphAttributes;if((Qa.position!==void 0||Qa.normal!==void 0||Qa.color!==void 0&&Sn.isWebGL2===!0)&&En.update(_t,yt,Zs),(Qs||Yn.receiveShadow!==_t.receiveShadow)&&(Yn.receiveShadow=_t.receiveShadow,Qr.setValue(et,"receiveShadow",_t.receiveShadow)),$e.isMeshGouraudMaterial&&$e.envMap!==null&&(ts.envMap.value=Tn,ts.flipEnvMap.value=Tn.isCubeTexture&&Tn.isRenderTargetTexture===!1?-1:1),Qs&&(Qr.setValue(et,"toneMappingExposure",K.toneMappingExposure),Yn.needsLights&&Dh(ts,Za),Xt&&$e.fog===!0&&Vt.refreshFogUniforms(ts,Xt),Vt.refreshMaterialUniforms(ts,$e,vt,Fe,en),JD.upload(et,Yn.uniformsList,ts,Nn)),$e.isShaderMaterial&&$e.uniformsNeedUpdate===!0&&(JD.upload(et,Yn.uniformsList,ts,Nn),$e.uniformsNeedUpdate=!1),$e.isSpriteMaterial&&Qr.setValue(et,"center",_t.center),Qr.setValue(et,"modelViewMatrix",_t.modelViewMatrix),Qr.setValue(et,"normalMatrix",_t.normalMatrix),Qr.setValue(et,"modelMatrix",_t.matrixWorld),$e.isShaderMaterial||$e.isRawShaderMaterial){const eo=$e.uniformsGroups;for(let $u=0,Lh=eo.length;$u<Lh;$u++)if(Sn.isWebGL2){const td=eo[$u];Bn.update(td,Zs),Bn.bind(td,Zs)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Zs}function Dh(_e,tt){_e.ambientLightColor.needsUpdate=tt,_e.lightProbe.needsUpdate=tt,_e.directionalLights.needsUpdate=tt,_e.directionalLightShadows.needsUpdate=tt,_e.pointLights.needsUpdate=tt,_e.pointLightShadows.needsUpdate=tt,_e.spotLights.needsUpdate=tt,_e.spotLightShadows.needsUpdate=tt,_e.rectAreaLights.needsUpdate=tt,_e.hemisphereLights.needsUpdate=tt}function hm(_e){return _e.isMeshLambertMaterial||_e.isMeshToonMaterial||_e.isMeshPhongMaterial||_e.isMeshStandardMaterial||_e.isShadowMaterial||_e.isShaderMaterial&&_e.lights===!0}this.getActiveCubeFace=function(){return pe},this.getActiveMipmapLevel=function(){return Q},this.getRenderTarget=function(){return Se},this.setRenderTargetTextures=function(_e,tt,yt){kn.get(_e.texture).__webglTexture=tt,kn.get(_e.depthTexture).__webglTexture=yt;const $e=kn.get(_e);$e.__hasExternalTextures=!0,$e.__hasExternalTextures&&($e.__autoAllocateDepthBuffer=yt===void 0,$e.__autoAllocateDepthBuffer||Pn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),$e.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(_e,tt){const yt=kn.get(_e);yt.__webglFramebuffer=tt,yt.__useDefaultFramebuffer=tt===void 0},this.setRenderTarget=function(_e,tt=0,yt=0){Se=_e,pe=tt,Q=yt;let $e=!0,_t=null,Xt=!1,pn=!1;if(_e){const Tn=kn.get(_e);Tn.__useDefaultFramebuffer!==void 0?(gn.bindFramebuffer(et.FRAMEBUFFER,null),$e=!1):Tn.__webglFramebuffer===void 0?Nn.setupRenderTarget(_e):Tn.__hasExternalTextures&&Nn.rebindTextures(_e,kn.get(_e.texture).__webglTexture,kn.get(_e.depthTexture).__webglTexture);const Kn=_e.texture;(Kn.isData3DTexture||Kn.isDataArrayTexture||Kn.isCompressedArrayTexture)&&(pn=!0);const Mn=kn.get(_e).__webglFramebuffer;_e.isWebGLCubeRenderTarget?(Array.isArray(Mn[tt])?_t=Mn[tt][yt]:_t=Mn[tt],Xt=!0):Sn.isWebGL2&&_e.samples>0&&Nn.useMultisampledRTT(_e)===!1?_t=kn.get(_e).__webglMultisampledFramebuffer:Array.isArray(Mn)?_t=Mn[yt]:_t=Mn,ye.copy(_e.viewport),St.copy(_e.scissor),kt=_e.scissorTest}else ye.copy(Je).multiplyScalar(vt).floor(),St.copy(Be).multiplyScalar(vt).floor(),kt=nt;if(gn.bindFramebuffer(et.FRAMEBUFFER,_t)&&Sn.drawBuffers&&$e&&gn.drawBuffers(_e,_t),gn.viewport(ye),gn.scissor(St),gn.setScissorTest(kt),Xt){const Tn=kn.get(_e.texture);et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_CUBE_MAP_POSITIVE_X+tt,Tn.__webglTexture,yt)}else if(pn){const Tn=kn.get(_e.texture),Kn=tt||0;et.framebufferTextureLayer(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,Tn.__webglTexture,yt||0,Kn)}Pe=-1},this.readRenderTargetPixels=function(_e,tt,yt,$e,_t,Xt,pn){if(!(_e&&_e.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ln=kn.get(_e).__webglFramebuffer;if(_e.isWebGLCubeRenderTarget&&pn!==void 0&&(Ln=Ln[pn]),Ln){gn.bindFramebuffer(et.FRAMEBUFFER,Ln);try{const Tn=_e.texture,Kn=Tn.format,Mn=Tn.type;if(Kn!==Fu&&rn.convert(Kn)!==et.getParameter(et.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jn=Mn===sP&&(Pn.has("EXT_color_buffer_half_float")||Sn.isWebGL2&&Pn.has("EXT_color_buffer_float"));if(Mn!==$f&&rn.convert(Mn)!==et.getParameter(et.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Mn===Of&&(Sn.isWebGL2||Pn.has("OES_texture_float")||Pn.has("WEBGL_color_buffer_float")))&&!jn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}tt>=0&&tt<=_e.width-$e&&yt>=0&&yt<=_e.height-_t&&et.readPixels(tt,yt,$e,_t,rn.convert(Kn),rn.convert(Mn),Xt)}finally{const Tn=Se!==null?kn.get(Se).__webglFramebuffer:null;gn.bindFramebuffer(et.FRAMEBUFFER,Tn)}}},this.copyFramebufferToTexture=function(_e,tt,yt=0){const $e=Math.pow(2,-yt),_t=Math.floor(tt.image.width*$e),Xt=Math.floor(tt.image.height*$e);Nn.setTexture2D(tt,0),et.copyTexSubImage2D(et.TEXTURE_2D,yt,0,0,_e.x,_e.y,_t,Xt),gn.unbindTexture()},this.copyTextureToTexture=function(_e,tt,yt,$e=0){const _t=tt.image.width,Xt=tt.image.height,pn=rn.convert(yt.format),Ln=rn.convert(yt.type);Nn.setTexture2D(yt,0),et.pixelStorei(et.UNPACK_FLIP_Y_WEBGL,yt.flipY),et.pixelStorei(et.UNPACK_PREMULTIPLY_ALPHA_WEBGL,yt.premultiplyAlpha),et.pixelStorei(et.UNPACK_ALIGNMENT,yt.unpackAlignment),tt.isDataTexture?et.texSubImage2D(et.TEXTURE_2D,$e,_e.x,_e.y,_t,Xt,pn,Ln,tt.image.data):tt.isCompressedTexture?et.compressedTexSubImage2D(et.TEXTURE_2D,$e,_e.x,_e.y,tt.mipmaps[0].width,tt.mipmaps[0].height,pn,tt.mipmaps[0].data):et.texSubImage2D(et.TEXTURE_2D,$e,_e.x,_e.y,pn,Ln,tt.image),$e===0&&yt.generateMipmaps&&et.generateMipmap(et.TEXTURE_2D),gn.unbindTexture()},this.copyTextureToTexture3D=function(_e,tt,yt,$e,_t=0){if(K.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Xt=_e.max.x-_e.min.x+1,pn=_e.max.y-_e.min.y+1,Ln=_e.max.z-_e.min.z+1,Tn=rn.convert($e.format),Kn=rn.convert($e.type);let Mn;if($e.isData3DTexture)Nn.setTexture3D($e,0),Mn=et.TEXTURE_3D;else if($e.isDataArrayTexture)Nn.setTexture2DArray($e,0),Mn=et.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}et.pixelStorei(et.UNPACK_FLIP_Y_WEBGL,$e.flipY),et.pixelStorei(et.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$e.premultiplyAlpha),et.pixelStorei(et.UNPACK_ALIGNMENT,$e.unpackAlignment);const jn=et.getParameter(et.UNPACK_ROW_LENGTH),Nr=et.getParameter(et.UNPACK_IMAGE_HEIGHT),lr=et.getParameter(et.UNPACK_SKIP_PIXELS),Zr=et.getParameter(et.UNPACK_SKIP_ROWS),Ss=et.getParameter(et.UNPACK_SKIP_IMAGES),Wr=yt.isCompressedTexture?yt.mipmaps[0]:yt.image;et.pixelStorei(et.UNPACK_ROW_LENGTH,Wr.width),et.pixelStorei(et.UNPACK_IMAGE_HEIGHT,Wr.height),et.pixelStorei(et.UNPACK_SKIP_PIXELS,_e.min.x),et.pixelStorei(et.UNPACK_SKIP_ROWS,_e.min.y),et.pixelStorei(et.UNPACK_SKIP_IMAGES,_e.min.z),yt.isDataTexture||yt.isData3DTexture?et.texSubImage3D(Mn,_t,tt.x,tt.y,tt.z,Xt,pn,Ln,Tn,Kn,Wr.data):yt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),et.compressedTexSubImage3D(Mn,_t,tt.x,tt.y,tt.z,Xt,pn,Ln,Tn,Wr.data)):et.texSubImage3D(Mn,_t,tt.x,tt.y,tt.z,Xt,pn,Ln,Tn,Kn,Wr),et.pixelStorei(et.UNPACK_ROW_LENGTH,jn),et.pixelStorei(et.UNPACK_IMAGE_HEIGHT,Nr),et.pixelStorei(et.UNPACK_SKIP_PIXELS,lr),et.pixelStorei(et.UNPACK_SKIP_ROWS,Zr),et.pixelStorei(et.UNPACK_SKIP_IMAGES,Ss),_t===0&&$e.generateMipmaps&&et.generateMipmap(Mn),gn.unbindTexture()},this.initTexture=function(_e){_e.isCubeTexture?Nn.setTextureCube(_e,0):_e.isData3DTexture?Nn.setTexture3D(_e,0):_e.isDataArrayTexture||_e.isCompressedArrayTexture?Nn.setTexture2DArray(_e,0):Nn.setTexture2D(_e,0),gn.unbindTexture()},this.resetState=function(){pe=0,Q=0,Se=null,gn.reset(),Jt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return gh}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===tr?Tg:U_e}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Tg?tr:Wc}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class a4e extends nwe{}a4e.prototype.isWebGL1Renderer=!0;class l4e extends Do{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class PG extends lm{constructor(e=1,n=32,r=16,o=0,u=Math.PI*2,h=0,m=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:o,phiLength:u,thetaStart:h,thetaLength:m},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const _=Math.min(h+m,Math.PI);let x=0;const T=[],I=new dt,N=new dt,H=[],Z=[],j=[],z=[];for(let U=0;U<=r;U++){const C=[],K=U/r;let te=0;U===0&&h===0?te=.5/n:U===r&&_===Math.PI&&(te=-.5/n);for(let pe=0;pe<=n;pe++){const Q=pe/n;I.x=-e*Math.cos(o+Q*u)*Math.sin(h+K*m),I.y=e*Math.cos(h+K*m),I.z=e*Math.sin(o+Q*u)*Math.sin(h+K*m),Z.push(I.x,I.y,I.z),N.copy(I).normalize(),j.push(N.x,N.y,N.z),z.push(Q+te,1-K),C.push(x++)}T.push(C)}for(let U=0;U<r;U++)for(let C=0;C<n;C++){const K=T[U][C+1],te=T[U][C],pe=T[U+1][C],Q=T[U+1][C+1];(U!==0||h>0)&&H.push(K,te,Q),(U!==r-1||_<Math.PI)&&H.push(te,pe,Q)}this.setIndex(H),this.setAttribute("position",new Hc(Z,3)),this.setAttribute("normal",new Hc(j,3)),this.setAttribute("uv",new Hc(z,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new PG(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class u4e extends nw{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Pr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yG,this.normalScale=new kr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class c4e extends u4e{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new kr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return zs(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Pr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Pr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Pr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class d4e extends nw{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yG,this.normalScale=new kr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}const qve={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class h4e{constructor(e,n,r){const o=this;let u=!1,h=0,m=0,_;const x=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(T){m++,u===!1&&o.onStart!==void 0&&o.onStart(T,h,m),u=!0},this.itemEnd=function(T){h++,o.onProgress!==void 0&&o.onProgress(T,h,m),h===m&&(u=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(T){o.onError!==void 0&&o.onError(T)},this.resolveURL=function(T){return _?_(T):T},this.setURLModifier=function(T){return _=T,this},this.addHandler=function(T,I){return x.push(T,I),this},this.removeHandler=function(T){const I=x.indexOf(T);return I!==-1&&x.splice(I,2),this},this.getHandler=function(T){for(let I=0,N=x.length;I<N;I+=2){const H=x[I],Z=x[I+1];if(H.global&&(H.lastIndex=0),H.test(T))return Z}return null}}}const p4e=new h4e;class kG{constructor(e){this.manager=e!==void 0?e:p4e,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(o,u){r.load(e,o,n,u)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}kG.DEFAULT_MATERIAL_NAME="__DEFAULT";class f4e extends kG{constructor(e){super(e)}load(e,n,r,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const u=this,h=qve.get(e);if(h!==void 0)return u.manager.itemStart(e),setTimeout(function(){n&&n(h),u.manager.itemEnd(e)},0),h;const m=aP("img");function _(){T(),qve.add(e,this),n&&n(this),u.manager.itemEnd(e)}function x(I){T(),o&&o(I),u.manager.itemError(e),u.manager.itemEnd(e)}function T(){m.removeEventListener("load",_,!1),m.removeEventListener("error",x,!1)}return m.addEventListener("load",_,!1),m.addEventListener("error",x,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(m.crossOrigin=this.crossOrigin),u.manager.itemStart(e),m.src=e,m}}class m4e extends kG{constructor(e){super(e)}load(e,n,r,o){const u=new _s,h=new f4e(this.manager);return h.setCrossOrigin(this.crossOrigin),h.setPath(this.path),h.load(e,function(m){u.image=m,u.needsUpdate=!0,n!==void 0&&n(u)},r,o),u}}class v4e extends Do{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Pr(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}const c8=new uo,Xve=new dt,Yve=new dt;class g4e{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new kr(512,512),this.map=null,this.mapPass=null,this.matrix=new uo,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new xG,this._frameExtents=new kr(1,1),this._viewportCount=1,this._viewports=[new Io(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;Xve.setFromMatrixPosition(e.matrixWorld),n.position.copy(Xve),Yve.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(Yve),n.updateMatrixWorld(),c8.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(c8),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(c8)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class y4e extends g4e{constructor(){super(new EG(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class b4e extends v4e{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Do.DEFAULT_UP),this.updateMatrix(),this.target=new Do,this.shadow=new y4e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:vG}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=vG);function _4e(t){if(t.name==="cameras")return"camera";if(t.name==="interactive")return"interactive";if(t.name==="lights")return"light";if(t.name==="ui")return"ui";if(t.name==="utils")return"utils";const e=t.type;return e.search("Helper")>-1?"icon_utils":e.search("Camera")>-1?"camera":e.search("Light")>-1?"light":"obj3D"}function rwe(t){const e={name:t.name,type:t.type,uuid:t.uuid,children:[]};return t.children.forEach(n=>{e.children.push(rwe(n))}),e}function w4e(t){const e={};for(const n in t){const r=t[n].value;e[n]={value:r},r===null?e[n].value={src:""}:r.isTexture&&(e[n].value={src:r.image.src})}return e}function Zve(t){const e={};for(const n in t){if(n.substring(0,1)==="_"||n.substring(0,2)==="is")continue;const r=typeof t[n],o=t[n];switch(r){case"boolean":case"number":case"string":e[n]=o;break;case"object":o!==null&&(e[n]=o,o.isTexture?e[n]={src:x4e(o.image)}:n==="uniforms"&&(e[n]=w4e(e[n])));break}}return e}function x4e(t){const e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),e.toDataURL("image/png")}function S4e(t){t.updateMatrix();const e={name:t.name,type:t.type,uuid:t.uuid,visible:t.visible,matrix:t.matrix.elements};if(t instanceof Ua){const n=t;if(Array.isArray(n.material)){const r=[];n.material.forEach(o=>{r.push(Zve(o))}),e.material=r}else e.material=Zve(n.material)}else t instanceof wG&&(t instanceof Fa?e.perspectiveCameraInfo={fov:t.fov,zoom:t.zoom,near:t.near,far:t.far,focus:t.focus,aspect:t.aspect,filmGauge:t.filmGauge,filmOffset:t.filmOffset}:t instanceof EG&&(e.orthographicCameraInfo={zoom:t.zoom,near:t.near,far:t.far,left:t.left,right:t.right,top:t.top,bottom:t.bottom}));return e}class E4e extends fL{getObject(e){this.app.send({event:"getObject",target:"app",data:e})}setObject(e){const n=S4e(e);this.app.send({event:"setObject",target:"editor",data:n})}requestMethod(e,n,r){this.app.send({event:"requestMethod",target:"app",data:{uuid:e,key:n,value:r}})}updateObject(e,n,r){this.app.send({event:"updateObject",target:"app",data:{uuid:e,key:n,value:r}})}createTexture(e,n,r){this.app.send({event:"createTexture",target:"app",data:{uuid:e,key:n,value:r}})}getScene(){this.app.send({event:"getScene",target:"app"})}setScene(e){const n=rwe(e);this.app.send({event:"setScene",target:"editor",data:n})}}/*! Tweakpane 4.0.0 (c) 2016 cocopon, licensed under the MIT license. */function ai(t){return t==null}function TG(t){return t!==null&&typeof t=="object"}function $H(t){return t!==null&&typeof t=="object"}function C4e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Bg(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,o)=>{const u=t[o],h=e[o];return $H(u)&&$H(h)?Object.assign(Object.assign({},r),{[o]:Bg(u,h)}):Object.assign(Object.assign({},r),{[o]:o in e?h:u})},{})}function MG(t){return TG(t)?"target"in t:!1}const P4e={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let bs=class l_{static alreadyDisposed(){return new l_({type:"alreadydisposed"})}static notBindable(){return new l_({type:"notbindable"})}static notCompatible(e,n){return new l_({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new l_({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new l_({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=P4e[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}},Qve=class iwe{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!iwe.isBindable(r))throw bs.notBindable();if(!(e in r))throw bs.propertyNotFound(e);r[e]=n}},co=class{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(o=>o.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(o=>{o.handler(n)})}},k4e=class{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(o,u)=>o===u,this.emitter=new co,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},o=this.constraint_?this.constraint_.constrain(e):e,u=this.rawValue_;this.equals_(u,o)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=o,this.emitter.emit("change",{options:r,previousRawValue:u,rawValue:o,sender:this}))}},T4e=class{constructor(e){this.emitter=new co,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},o=this.value_;o===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:this.value_,sender:this}))}},M4e=class{constructor(e){this.emitter=new co,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}};function Si(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new T4e(t):new k4e(t,e)}function A4e(t){return[new M4e(t),(e,n)=>{t.setRawValue(e,n)}]}let or=class owe{constructor(e){this.emitter=new co,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,o)=>Object.assign(r,{[o]:Si(e[o])}),{})}static fromObject(e){const n=this.createCore(e);return new owe(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}},RP=class{constructor(e){this.values=or.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}},I4e=class{constructor(e){this.values=or.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let o=e;return ai(r)||(o=Math.max(o,r)),ai(n)||(o=Math.min(o,n)),o}},R4e=class{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}},O4e=class{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}};const D4e={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};let L4e=class{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=D4e[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const N4e={"+":t=>t,"-":t=>-t,"~":t=>~t};let F4e=class{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=N4e[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function AG(t){return(e,n)=>{for(let r=0;r<t.length;r++){const o=t[r](e,n);if(o!=="")return o}return""}}function lP(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function B4e(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function uP(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function U4e(t,e){const n=uP(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const o=uP(t,e);return o===""?"":r+o}function IG(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=U4e(t,e);return r===""?"":n+r}function swe(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=B4e(t,e);return e+=r.length,r===""?"":r+uP(t,e)}function V4e(t,e){const n=swe(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const o=uP(t,e);return e+=o.length,n+r+o+IG(t,e)}function j4e(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=uP(t,e);return e+=r.length,r===""?"":n+r+IG(t,e)}function z4e(t,e){const n=swe(t,e);return e+=n.length,n===""?"":n+IG(t,e)}const H4e=AG([V4e,j4e,z4e]);function G4e(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function W4e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=G4e(t,e);return r===""?"":n+r}function $4e(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function K4e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=$4e(t,e);return r===""?"":n+r}function q4e(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function X4e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=q4e(t,e);return r===""?"":n+r}const Y4e=AG([W4e,K4e,X4e]),Z4e=AG([Y4e,H4e]);function Q4e(t,e){const n=Z4e(t,e);return e+=n.length,n===""?null:{evaluable:new O4e(n),cursor:e}}function J4e(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=lwe(t,e);if(!r)return null;e=r.cursor,e+=lP(t,e).length;const o=t.substr(e,1);return e+=o.length,o!==")"?null:{evaluable:r.evaluable,cursor:e}}function eVe(t,e){var n;return(n=Q4e(t,e))!==null&&n!==void 0?n:J4e(t,e)}function awe(t,e){const n=eVe(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const o=awe(t,e);return o?(e=o.cursor,{cursor:e,evaluable:new F4e(r,o.evaluable)}):null}function tVe(t,e,n){n+=lP(e,n).length;const r=t.filter(o=>e.startsWith(o,n))[0];return r?(n+=r.length,n+=lP(e,n).length,{cursor:n,operator:r}):null}function nVe(t,e){return(n,r)=>{const o=t(n,r);if(!o)return null;r=o.cursor;let u=o.evaluable;for(;;){const h=tVe(e,n,r);if(!h)break;r=h.cursor;const m=t(n,r);if(!m)return null;r=m.cursor,u=new L4e(h.operator,u,m.evaluable)}return u?{cursor:r,evaluable:u}:null}}const rVe=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>nVe(t,e),awe);function lwe(t,e){return e+=lP(t,e).length,rVe(t,e)}function iVe(t){const e=lwe(t,0);return!e||e.cursor+lP(t,e.cursor).length!==t.length?null:e.evaluable}function Mh(t){var e;const n=iVe(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function uwe(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=Mh(t);if(!ai(e))return e}return 0}function oVe(t){return String(t)}function ba(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function Rr(t,e,n,r,o){const u=(t-e)/(n-e);return r+u*(o-r)}function Jve(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function go(t,e,n){return Math.min(Math.max(t,e),n)}function cwe(t,e){return(t%e+e)%e}function sVe(t,e){return ai(t.step)?Math.max(Jve(e),2):Jve(t.step)}function dwe(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function hwe(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function pwe(t,e){return ai(t.step)?null:new R4e(t.step,e)}function fwe(t){return!ai(t.max)&&!ai(t.min)?new RP({max:t.max,min:t.min}):!ai(t.max)||!ai(t.min)?new I4e({max:t.max,min:t.min}):null}function mwe(t,e){var n,r,o;return{formatter:(n=t.format)!==null&&n!==void 0?n:ba(sVe(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:dwe(t),pointerScale:(o=t.pointerScale)!==null&&o!==void 0?o:hwe(t,e)}}function vwe(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function RG(t){return{constraint:t.constraint,textProps:or.fromObject(mwe(t.params,t.initialValue))}}let qg=class{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}},gL=class{constructor(e){this.target=e}},OP=class extends gL{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}},aVe=class extends gL{constructor(e,n){super(e),this.expanded=n}},lVe=class extends gL{constructor(e,n){super(e),this.index=n}},cP=class extends qg{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new co,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new OP(this,n.binding.target.read(),e.options.last))}};class uVe{constructor(e,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new co}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function cVe(t){if(!("binding"in t))return!1;const e=t.binding;return MG(e)&&"read"in e&&"write"in e}function dVe(t,e){const r=Object.keys(e).reduce((o,u)=>{if(o===void 0)return;const h=e[u],m=h(t[u]);return m.succeeded?Object.assign(Object.assign({},o),{[u]:m.value}):void 0},{});return r}function hVe(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const o=e(r);if(!(!o.succeeded||o.value===void 0))return[...n,o.value]},[])}function pVe(t){return t===null?!1:typeof t=="object"}function uh(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function ege(t){return{custom:e=>uh(e)(t),boolean:uh(e=>typeof e=="boolean"?e:void 0)(t),number:uh(e=>typeof e=="number"?e:void 0)(t),string:uh(e=>typeof e=="string"?e:void 0)(t),function:uh(e=>typeof e=="function"?e:void 0)(t),constant:e=>uh(n=>n===e?e:void 0)(t),raw:uh(e=>e)(t),object:e=>uh(n=>{if(pVe(n))return dVe(n,e)})(t),array:e=>uh(n=>{if(Array.isArray(n))return hVe(n,e)})(t)}}const KH={optional:ege(!0),required:ege(!1)};function Li(t,e){const n=e(KH),r=KH.required.object(n)(t);return r.succeeded?r.value:void 0}function $a(t,e,n,r){if(e&&!e(t))return!1;const o=Li(t,n);return o?r(o):!1}function Ka(t,e){var n;return Bg((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function Ag(t){return"value"in t}function gwe(t){if(!TG(t)||!("binding"in t))return!1;const e=t.binding;return MG(e)}const Uc="http://www.w3.org/2000/svg";function D3(t){t.offsetHeight}function fVe(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function OG(t){return t.ontouchstart!==void 0}function mVe(){return globalThis}function vVe(){return mVe().document}function gVe(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const yVe={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function yL(t,e){const n=t.createElementNS(Uc,"svg");return n.innerHTML=yVe[e],n}function ywe(t,e,n){t.insertBefore(e,t.children[n])}function DG(t){t.parentElement&&t.parentElement.removeChild(t)}function bwe(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function bVe(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function _we(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function xh(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function $c(t,e,n){xh(t.value(e),n)}const _Ve="tp";function _r(t){return(n,r)=>[_Ve,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const lC=_r("lbl");function wVe(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(o=>t.createTextNode(o)).forEach((o,u)=>{u>0&&n.appendChild(t.createElement("br")),n.appendChild(o)}),n}let wwe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(lC()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(lC("l")),$c(n.props,"label",u=>{ai(u)?this.element.classList.add(lC(void 0,"nol")):(this.element.classList.remove(lC(void 0,"nol")),bVe(r),r.appendChild(wVe(e,u)))}),this.element.appendChild(r),this.labelElement=r;const o=e.createElement("div");o.classList.add(lC("v")),this.element.appendChild(o),this.valueElement=o}},xwe=class{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new wwe(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return $a(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Ka(null,{label:this.props.get("label")})}};function xVe(){return["veryfirst","first","last","verylast"]}const tge=_r(""),nge={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let bL=class{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{xVe().forEach(r=>{n.classList.remove(tge(void 0,nge[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(tge(void 0,nge[r]))})}),this.viewProps.handleDispose(()=>{DG(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return $a(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Ka(null,Object.assign({},this.viewProps.exportState()))}},Ug=class extends bL{constructor(e,n){if(n.value!==n.valueController.value)throw bs.shouldNeverHappen();const r=n.valueController.viewProps,o=new xwe(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new wwe(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=o,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return $a(e,n=>{var r,o,u;return super.importState(n)&&this.labelController.importProps(n)&&((u=(o=(r=this.valueController).importProps)===null||o===void 0?void 0:o.call(r,e))!==null&&u!==void 0?u:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return Ka(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}};function rge(t){const e=Object.assign({},t);return delete e.value,e}class Swe extends Ug{constructor(e,n){super(e,n),this.tag=n.tag}importState(e){return $a(e,n=>super.importState(rge(e)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return Ka(()=>rge(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function SVe(t){return Ag(t)&&gwe(t.value)}class EVe extends Swe{importState(e){return $a(e,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function CVe(t){return Ag(t)&&cVe(t.value)}function Ewe(t,e){for(;t.length<e;)t.push(void 0)}function PVe(t){const e=[];return Ewe(e,t),e}function kVe(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function TVe(t,e){const n=[...kVe(t),e];return n.length>t.length?n.splice(0,n.length-t.length):Ewe(n,t.length),n}class MVe{constructor(e){this.emitter=new co,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=Si(PVe(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=TVe(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function AVe(t){if(!("binding"in t))return!1;const e=t.binding;return MG(e)&&"read"in e&&!("write"in e)}class IVe extends Swe{exportState(){return Ka(()=>super.exportState(),{binding:{readonly:!0}})}}function RVe(t){return Ag(t)&&AVe(t.value)}let OVe=class extends qg{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new gL(this))}),this}};function DVe(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function iw(t,e){return n=>{DVe(t,e,n)}}function LG(t,e){xh(t,n=>{e.textContent=n??""})}const d8=_r("btn");let LVe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(d8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(d8("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const o=e.createElement("div");o.classList.add(d8("t")),LG(n.props.value("title"),o),this.buttonElement.appendChild(o)}},NVe=class{constructor(e,n){this.emitter=new co,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new LVe(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return $a(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Ka(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}},ige=class extends bL{constructor(e,n){const r=new NVe(e,{props:n.buttonProps,viewProps:n.viewProps}),o=new xwe(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:o.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=o}importState(e){return $a(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Ka(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},Cwe=class{constructor(e){const[n,r]=e.split("-"),o=n.split(".");this.major=parseInt(o[0],10),this.minor=parseInt(o[1],10),this.patch=parseInt(o[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}};const ow=new Cwe("2.0.0");function Ys(t){return Object.assign({core:ow},t)}const FVe=Ys({id:"button",type:"blade",accept(t){const e=Li(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new ige(t.document,{blade:t.blade,buttonProps:or.fromObject({title:t.params.title}),labelProps:or.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof ige?new OVe(t.controller):null}});function BVe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function UVe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function VVe(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function jVe(t){return TG(t)?"refresh"in t&&typeof t.refresh=="function":!1}function zVe(t,e){if(!Qve.isBindable(t))throw bs.notBindable();return new Qve(t,e)}let HVe=class{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new co,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const o=r??{},u=this.controller_.element.ownerDocument,h=this.pool_.createBinding(u,zVe(e,n),o),m=this.pool_.createBindingApi(h);return this.add(m,o.index)}addFolder(e){return UVe(this,e)}addButton(e){return BVe(this,e)}addTab(e){return VVe(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),o=this.pool_.createApi(r);return this.add(o,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.children.forEach(e=>{jVe(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),o=gwe(n.value)?n.value.binding:null;this.emitter_.emit("change",new OP(r,o?o.target.read():n.value.rawValue,e.options.last))}},NG=class extends qg{constructor(e,n){super(e),this.rackApi_=new HVe(e.rackController,n)}},FG=class extends bL{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return $a(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,o)=>r.importState(n.children[o])))}exportState(){return Ka(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}};function qH(t){return"rackController"in t}let GVe=class{constructor(e){this.emitter=new co,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw bs.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const o=this.extract_(e);o&&(o.emitter.on("add",this.onSubListAdd_),o.emitter.on("remove",this.onSubListRemove_),o.allItems().forEach(u=>{this.cache_.add(u)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(o=>{this.cache_.delete(o)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}};function WVe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(Ag(r)&&r.value===e)return r}return null}function $Ve(t){return qH(t)?t.rackController.rack.bcSet_:null}let KVe=class{constructor(e){var n,r;this.emitter=new co,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new GVe($Ve),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),Ag(r))r.value.emitter.on("change",this.onChildValueChange_);else if(qH(r)){const o=r.rackController.rack;if(o){const u=o.emitter;u.on("layout",this.onRackLayout_),u.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(Ag(r))r.value.emitter.off("change",this.onChildValueChange_);else if(qH(r)){const o=r.rackController.rack;if(o){const u=o.emitter;u.off("layout",this.onRackLayout_),u.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(o=>!o.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(o=>{const u=[];o===n&&(u.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&u.push("veryfirst")),o===r&&(u.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&u.push("verylast")),o.blade.set("positions",u)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=WVe(this.find(Ag),e.sender);if(!n)throw bs.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},BG=class{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new KVe({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&ywe(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&DG(e.bladeController.view.element)}};function sw(){return new or({positions:Si([],{equals:C4e})})}let UG=class Pwe extends or{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=or.createCore(n);return new Pwe(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!ai(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};$c(this,"expanded",r),$c(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function qVe(t,e){let n=0;return fVe(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),D3(e),n=e.clientHeight,t.set("temporaryExpanded",null),D3(e)}),n}function oge(t,e){e.style.height=t.styleHeight}function VG(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),ai(t.get("expandedHeight"))){const n=qVe(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),D3(e)}),t.emitter.on("change",()=>{oge(t,e)}),oge(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}let kwe=class extends NG{constructor(e,n){super(e,n),this.emitter_=new co,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new aVe(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.rackApi_.refresh()}};const Twe=_r("cnt");let XVe=class{constructor(e,n){var r;this.className_=_r((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Twe()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),$c(this.foldable_,"completed",iw(this.element,this.className_(void 0,"cpl")));const o=e.createElement("button");o.classList.add(this.className_("b")),$c(n.props,"title",x=>{ai(x)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o;const u=e.createElement("div");u.classList.add(this.className_("i")),this.element.appendChild(u);const h=e.createElement("div");h.classList.add(this.className_("t")),LG(n.props.value("title"),h),this.buttonElement.appendChild(h),this.titleElement=h;const m=e.createElement("div");m.classList.add(this.className_("m")),this.buttonElement.appendChild(m);const _=e.createElement("div");_.classList.add(this.className_("c")),this.element.appendChild(_),this.containerElement=_}},XH=class extends FG{constructor(e,n){var r;const o=UG.create((r=n.expanded)!==null&&r!==void 0?r:!0),u=new XVe(e,{foldable:o,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new BG({blade:n.blade,element:u.containerElement,root:n.root,viewProps:n.viewProps}),view:u})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=o,VG(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return $a(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Ka(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};const YVe=Ys({id:"folder",type:"blade",accept(t){const e=Li(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new XH(t.document,{blade:t.blade,expanded:t.params.expanded,props:or.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof XH?new kwe(t.controller,t.pool):null}}),ZVe=_r("");function sge(t,e){return iw(t,ZVe(void 0,e))}let Xg=class Mwe extends or{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=A4e(Si(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,o;const u=e??{};return new Mwe(or.createCore({disabled:(n=u.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=u.hidden)!==null&&r!==void 0?r:!1,parent:(o=u.parent)!==null&&o!==void 0?o:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){xh(this.globalDisabled_,sge(e,"disabled")),$c(this,"hidden",sge(e,"hidden"))}bindDisabled(e){xh(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){xh(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const age=_r("tbp");let QVe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(age()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(age("c")),this.element.appendChild(r),this.containerElement=r}};const uC=_r("tbi");let JVe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(uC()),n.viewProps.bindClassModifiers(this.element),$c(n.props,"selected",u=>{u?this.element.classList.add(uC(void 0,"sel")):this.element.classList.remove(uC(void 0,"sel"))});const r=e.createElement("button");r.classList.add(uC("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const o=e.createElement("div");o.classList.add(uC("t")),LG(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o}},eje=class{constructor(e,n){this.emitter=new co,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new JVe(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},YH=class extends FG{constructor(e,n){const r=new QVe(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new BG({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new eje(e,{props:n.itemProps,viewProps:Xg.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,$c(this.props,"selected",o=>{this.itemController.props.set("selected",o),this.viewProps.set("hidden",!o)})}get itemController(){return this.ic_}importState(e){return $a(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Ka(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},tje=class extends NG{constructor(e,n){super(e,n),this.emitter_=new co,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new YH(n,{blade:sw(),itemProps:or.fromObject({selected:!1,title:e.title}),props:or.fromObject({selected:!1}),viewProps:Xg.create()}),o=this.pool_.createApi(r);return this.rackApi_.add(o,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}onSelect_(e){this.emitter_.emit("select",new lVe(this,e.rawValue))}},nje=class extends NG{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}};const lge=-1;let rje=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=Si(!0),this.selectedIndex=Si(lge),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=lge,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,o)=>{r.rawValue=o===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}};const cC=_r("tab");let ije=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(cC(),Twe()),n.viewProps.bindClassModifiers(this.element),xh(n.empty,iw(this.element,cC(void 0,"nop")));const r=e.createElement("div");r.classList.add(cC("t")),this.element.appendChild(r),this.itemsElement=r;const o=e.createElement("div");o.classList.add(cC("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(cC("c")),this.element.appendChild(u),this.contentsElement=u}},uge=class extends FG{constructor(e,n){const r=new rje,o=new ije(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new BG({blade:n.blade,element:o.contentsElement,viewProps:n.viewProps}),view:o}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const u=this.rackController.rack;u.emitter.on("add",this.onRackAdd_),u.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;ywe(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;DG(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}};const Awe=Ys({id:"tab",type:"blade",accept(t){const e=Li(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new uge(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new YH(t.document,{blade:sw(),itemProps:or.fromObject({selected:!1,title:n.title}),props:or.fromObject({selected:!1}),viewProps:Xg.create()});e.add(r)}),e},api(t){return t.controller instanceof uge?new tje(t.controller,t.pool):t.controller instanceof YH?new nje(t.controller,t.pool):null}});function oje(t,e){const n=t.accept(e.params);if(!n)return null;const r=Li(e.params,o=>({disabled:o.optional.boolean,hidden:o.optional.boolean}));return t.controller({blade:sw(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden}),viewProps:Xg.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})})}let jG=class extends cP{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}},sje=class{constructor(){this.disabled=!1,this.emitter=new co}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}},aje=class{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new co,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}},DP=class{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}};function L3(t,e){if(t instanceof e)return t;if(t instanceof DP){const n=t.constraints.reduce((r,o)=>r||(o instanceof e?o:null),null);if(n)return n}return null}let LP=class{constructor(e){this.values=or.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(o=>o.value===e).length>0?e:n[0].value}};function NP(t){var e;const n=KH;if(Array.isArray(t))return(e=Li({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function zG(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function HG(t){return ai(t)?null:new LP(zG(t))}const h8=_r("lst");let lje=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(h8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(h8("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const o=e.createElement("div");o.classList.add(h8("m")),o.appendChild(yL(e,"dropdown")),this.element.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,$c(this.props_,"options",u=>{bwe(this.selectElement),u.forEach(h=>{const m=e.createElement("option");m.textContent=h.text,this.selectElement.appendChild(m)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},tm=class{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new lje(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return $a(e,null,n=>({options:n.required.custom(NP)}),n=>(this.props.set("options",zG(n.options)),!0))}exportProps(){return Ka(null,{options:this.props.get("options")})}};const cge=_r("pop");let uje=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(cge()),n.viewProps.bindClassModifiers(this.element),xh(n.shows,iw(this.element,cge(void 0,"v")))}},Iwe=class{constructor(e,n){this.shows=Si(!1),this.viewProps=n.viewProps,this.view=new uje(e,{shows:this.shows,viewProps:this.viewProps})}};const dge=_r("txt");let cje=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(dge()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(dge("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}},dP=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new cje(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,o=this.parser_(r);ai(o)||(this.value.rawValue=o),this.view.refresh()}};function dje(t){return String(t)}function Rwe(t){return t==="false"?!1:!!t}function hge(t){return dje(t)}function hje(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const pje=ba(0);function N3(t){return pje(t)+"%"}function Owe(t){return String(t)}function ZH(t){return t}function aw({primary:t,secondary:e,forward:n,backward:r}){let o=!1;function u(h){o||(o=!0,h(),o=!1)}t.emitter.on("change",h=>{u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),h.options)})}),e.emitter.on("change",h=>{u(()=>{t.setRawValue(r(t.rawValue,e.rawValue),h.options)}),u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),h.options)})}),u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function fa(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function hP(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function Ah(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function fje(t){return t==="ArrowUp"||t==="ArrowDown"}function Dwe(t){return fje(t)||t==="ArrowLeft"||t==="ArrowRight"}function p8(t,e){var n,r;const o=e.ownerDocument.defaultView,u=e.getBoundingClientRect();return{x:t.pageX-(((n=o&&o.scrollX)!==null&&n!==void 0?n:0)+u.left),y:t.pageY-(((r=o&&o.scrollY)!==null&&r!==void 0?r:0)+u.top)}}let Yg=class{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new co,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(p8(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(p8(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(p8(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,o=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-o.left,y:r.clientY-o.top}:void 0),sender:this,shiftKey:e.shiftKey})}};const kl=_r("txt");let mje=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(kl(),kl(void 0,"num")),n.arrayPosition&&this.element.classList.add(kl(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(kl("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(kl()),this.inputElement.classList.add(kl("i"));const o=e.createElement("div");o.classList.add(kl("k")),this.element.appendChild(o),this.knobElement=o;const u=e.createElementNS(Uc,"svg");u.classList.add(kl("g")),this.knobElement.appendChild(u);const h=e.createElementNS(Uc,"path");h.classList.add(kl("gb")),u.appendChild(h),this.guideBodyElem_=h;const m=e.createElementNS(Uc,"path");m.classList.add(kl("gh")),u.appendChild(m),this.guideHeadElem_=m;const _=e.createElement("div");_.classList.add(_r("tt")()),this.knobElement.appendChild(_),this.tooltipElem_=_,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(kl(void 0,"drg"));return}this.element.classList.add(kl(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),o=go(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+o},0 L${r},4 L${r+o},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const u=this.props_.get("formatter");this.tooltipElem_.textContent=u(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}},FP=class{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=Si(null),this.view=new mje(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const o=new Yg(this.view.knobElement);o.emitter.on("down",this.onPointerDown_),o.emitter.on("move",this.onPointerMove_),o.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const o=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),u=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let h=e;return o!==void 0&&(h=Math.max(h,o)),u!==void 0&&(h=Math.min(h,u)),h}onInputChange_(e){const r=e.currentTarget.value,o=this.parser_(r);ai(o)||(this.value.rawValue=this.constrainValue_(o)),this.view.refresh()}onInputKeyDown_(e){const n=fa(this.props.get("keyScale"),hP(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){fa(this.props.get("keyScale"),hP(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const f8=_r("sld");let vje=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(f8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(f8("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const o=e.createElement("div");o.classList.add(f8("k")),this.trackElement.appendChild(o),this.knobElement=o,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=go(Rr(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}},gje=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new vje(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Yg(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(Rr(go(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=fa(this.props.get("keyScale"),Ah(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){fa(this.props.get("keyScale"),Ah(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const m8=_r("sldtxt");let yje=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(m8());const r=e.createElement("div");r.classList.add(m8("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(m8("t")),this.textView_=n.textView,o.appendChild(this.textView_.element),this.element.appendChild(o)}},F3=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new gje(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new FP(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new yje(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return $a(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Ka(null,{max:e.get("max"),min:e.get("min")})}};function Lwe(t){return{sliderProps:new or({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new or({formatter:Si(t.formatter),keyScale:t.keyScale,pointerScale:Si(t.pointerScale)})}}const bje={containerUnitSize:"cnt-usz"};function Nwe(t){return`--${bje[t]}`}function pP(t){return vwe(t)}function Df(t){if($H(t))return Li(t,pP)}function yh(t,e){if(!t)return;const n=[],r=pwe(t,e);r&&n.push(r);const o=fwe(t);return o&&n.push(o),new DP(n)}function _je(t){return t?t.major===ow.major:!1}function Fwe(t){if(t==="inline"||t==="popup")return t}function BP(t,e){t.write(e)}const LD=_r("ckb");let wje=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(LD()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(LD("l")),this.element.appendChild(r);const o=e.createElement("input");o.classList.add(LD("i")),o.type="checkbox",r.appendChild(o),this.inputElement=o,n.viewProps.bindDisabled(this.inputElement);const u=e.createElement("div");u.classList.add(LD("w")),r.appendChild(u);const h=yL(e,"check");u.appendChild(h),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},xje=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new wje(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}};function Sje(t){const e=[],n=HG(t.options);return n&&e.push(n),new DP(e)}const Eje=Ys({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Li(e,r=>({options:r.optional.custom(NP),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Rwe,constraint:t=>Sje(t.params),writer:t=>BP},controller:t=>{const e=t.document,n=t.value,r=t.constraint,o=r&&L3(r,LP);return o?new tm(e,{props:new or({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new xje(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof tm?new jG(t.controller):null}}),sg=_r("col");let Cje=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(sg()),n.foldable.bindExpandedClass(this.element,sg(void 0,"expanded")),$c(n.foldable,"completed",iw(this.element,sg(void 0,"cpl")));const r=e.createElement("div");r.classList.add(sg("h")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(sg("s")),r.appendChild(o),this.swatchElement=o;const u=e.createElement("div");if(u.classList.add(sg("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const h=e.createElement("div");h.classList.add(sg("p")),this.element.appendChild(h),this.pickerElement=h}else this.pickerElement=null}};function Pje(t,e,n){const r=go(t/255,0,1),o=go(e/255,0,1),u=go(n/255,0,1),h=Math.max(r,o,u),m=Math.min(r,o,u),_=h-m;let x=0,T=0;const I=(m+h)/2;return _!==0&&(T=_/(1-Math.abs(h+m-1)),r===h?x=(o-u)/_:o===h?x=2+(u-r)/_:x=4+(r-o)/_,x=x/6+(x<0?1:0)),[x*360,T*100,I*100]}function kje(t,e,n){const r=(t%360+360)%360,o=go(e/100,0,1),u=go(n/100,0,1),h=(1-Math.abs(2*u-1))*o,m=h*(1-Math.abs(r/60%2-1)),_=u-h/2;let x,T,I;return r>=0&&r<60?[x,T,I]=[h,m,0]:r>=60&&r<120?[x,T,I]=[m,h,0]:r>=120&&r<180?[x,T,I]=[0,h,m]:r>=180&&r<240?[x,T,I]=[0,m,h]:r>=240&&r<300?[x,T,I]=[m,0,h]:[x,T,I]=[h,0,m],[(x+_)*255,(T+_)*255,(I+_)*255]}function Tje(t,e,n){const r=go(t/255,0,1),o=go(e/255,0,1),u=go(n/255,0,1),h=Math.max(r,o,u),m=Math.min(r,o,u),_=h-m;let x;_===0?x=0:h===r?x=60*(((o-u)/_%6+6)%6):h===o?x=60*((u-r)/_+2):x=60*((r-o)/_+4);const T=h===0?0:_/h,I=h;return[x,T*100,I*100]}function Bwe(t,e,n){const r=cwe(t,360),o=go(e/100,0,1),u=go(n/100,0,1),h=u*o,m=h*(1-Math.abs(r/60%2-1)),_=u-h;let x,T,I;return r>=0&&r<60?[x,T,I]=[h,m,0]:r>=60&&r<120?[x,T,I]=[m,h,0]:r>=120&&r<180?[x,T,I]=[0,h,m]:r>=180&&r<240?[x,T,I]=[0,m,h]:r>=240&&r<300?[x,T,I]=[m,0,h]:[x,T,I]=[h,0,m],[(x+_)*255,(T+_)*255,(I+_)*255]}function Mje(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function Aje(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function Kc(t){return[t[0],t[1],t[2]]}function _L(t,e){return[t[0],t[1],t[2],e]}const Ije={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:Mje,rgb:kje},hsv:{hsl:Aje,hsv:(t,e,n)=>[t,e,n],rgb:Bwe},rgb:{hsl:Pje,hsv:Tje,rgb:(t,e,n)=>[t,e,n]}};function X_(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function Rje(t,e){return t===e?e:cwe(t,e)}function Uwe(t,e,n){var r;const o=X_(e,n);return[e==="rgb"?go(t[0],0,o[0]):Rje(t[0],o[0]),go(t[1],0,o[1]),go(t[2],0,o[2]),go((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function pge(t,e,n,r){const o=X_(e,n),u=X_(e,r);return t.map((h,m)=>h/o[m]*u[m])}function Vwe(t,e,n){const r=pge(t,e.mode,e.type,"int"),o=Ije[e.mode][n.mode](...r);return pge(o,n.mode,"int",n.type)}let Or=class jwe{static black(){return new jwe([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=Uwe(e,n,this.type)}getComponents(e){return _L(Vwe(Kc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const gf=_r("colp");let Oje=class{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(gf()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(gf("hsv"));const o=e.createElement("div");o.classList.add(gf("sv")),this.svPaletteView_=n.svPaletteView,o.appendChild(this.svPaletteView_.element),r.appendChild(o);const u=e.createElement("div");u.classList.add(gf("h")),this.hPaletteView_=n.hPaletteView,u.appendChild(this.hPaletteView_.element),r.appendChild(u),this.element.appendChild(r);const h=e.createElement("div");if(h.classList.add(gf("rgb")),this.textsView_=n.textsView,h.appendChild(this.textsView_.element),this.element.appendChild(h),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const m=e.createElement("div");m.classList.add(gf("a"));const _=e.createElement("div");_.classList.add(gf("ap")),_.appendChild(this.alphaViews_.palette.element),m.appendChild(_);const x=e.createElement("div");x.classList.add(gf("at")),x.appendChild(this.alphaViews_.text.element),m.appendChild(x),this.element.appendChild(m)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}};function Dje(t){return t==="int"?"int":t==="float"?"float":void 0}function GG(t){return Li(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Dje)}),expanded:e.optional.boolean,picker:e.optional.custom(Fwe),readonly:e.optional.constant(!1)}))}function Vg(t){return t?.1:1}function zwe(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}let WG=class{constructor(e,n){this.type="float",this.mode=n,this.comps_=Uwe(e,n,this.type)}getComponents(e){return _L(Vwe(Kc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const Lje={int:(t,e)=>new Or(t,e),float:(t,e)=>new WG(t,e)};function $G(t,e,n){return Lje[n](t,e)}function Nje(t){return t.type==="float"}function Fje(t){return t.type==="int"}function Bje(t){const e=t.getComponents(),n=X_(t.mode,"int");return new Or([Math.round(Rr(e[0],0,1,0,n[0])),Math.round(Rr(e[1],0,1,0,n[1])),Math.round(Rr(e[2],0,1,0,n[2])),e[3]],t.mode)}function Uje(t){const e=t.getComponents(),n=X_(t.mode,"int");return new WG([Rr(e[0],0,n[0],0,1),Rr(e[1],0,n[1],0,1),Rr(e[2],0,n[2],0,1),e[3]],t.mode)}function Ws(t,e){if(t.type===e)return t;if(Fje(t)&&e==="float")return Uje(t);if(Nje(t)&&e==="int")return Bje(t);throw bs.shouldNeverHappen()}function Vje(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function Ll(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const jje={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function Hwe(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return jje[r](n)}function Gwe(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ll(e[1],255),Ll(e[2],255),Ll(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function zje(t){const e=Gwe(t);return e?new Or(e,"rgb"):null}function Wwe(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ll(e[1],255),Ll(e[2],255),Ll(e[3],255),Ll(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Hje(t){const e=Wwe(t);return e?new Or(e,"rgb"):null}function $we(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Hwe(e[1]),Ll(e[2],100),Ll(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Gje(t){const e=$we(t);return e?new Or(e,"hsl"):null}function Kwe(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Hwe(e[1]),Ll(e[2],100),Ll(e[3],100),Ll(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Wje(t){const e=Kwe(t);return e?new Or(e,"hsl"):null}function qwe(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function $je(t){const e=qwe(t);return e?new Or(e,"rgb"):null}function Xwe(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Rr(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Rr(parseInt(n[4],16),0,255,0,1)]:null}function Kje(t){const e=Xwe(t);return e?new Or(e,"rgb"):null}function Ywe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function fge(t){return e=>{const n=Ywe(e);return n?$G(n,"rgb",t):null}}function Zwe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function mge(t){return e=>{const n=Zwe(e);return n?$G(n,"rgb",t):null}}const qje=[{parser:qwe,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:Xwe,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Gwe,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:Wwe,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:$we,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Kwe,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Ywe,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Zwe,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Xje(t){return qje.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function Yje(t,e="int"){const n=Xje(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function UP(t){const e=[$je,Kje,zje,Hje,Gje,Wje];t==="int"&&e.push(fge("int"),mge("int")),t==="float"&&e.push(fge("float"),mge("float"));const n=hje(e);return r=>{const o=n(r);return o?Ws(o,t):null}}function Zje(t){const e=UP("int");if(typeof t!="string")return Or.black();const n=e(t);return n??Or.black()}function Qwe(t){const e=go(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function KG(t,e="#"){const n=Kc(t.getComponents("rgb")).map(Qwe).join("");return`${e}${n}`}function qG(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(Qwe).join("");return`${e}${r}`}function Jwe(t){const e=ba(0),n=Ws(t,"int");return`rgb(${Kc(n.getComponents("rgb")).map(o=>e(o)).join(", ")})`}function e3(t){const e=ba(2),n=ba(0);return`rgba(${Ws(t,"int").getComponents("rgb").map((u,h)=>(h===3?e:n)(u)).join(", ")})`}function Qje(t){const e=[ba(0),N3,N3],n=Ws(t,"int");return`hsl(${Kc(n.getComponents("hsl")).map((o,u)=>e[u](o)).join(", ")})`}function Jje(t){const e=[ba(0),N3,N3,ba(2)];return`hsla(${Ws(t,"int").getComponents("hsl").map((o,u)=>e[u](o)).join(", ")})`}function e1e(t,e){const n=ba(e==="float"?2:0),r=["r","g","b"],o=Ws(t,e);return`{${Kc(o.getComponents("rgb")).map((h,m)=>`${r[m]}: ${n(h)}`).join(", ")}}`}function eze(t){return e=>e1e(e,t)}function t1e(t,e){const n=ba(2),r=ba(e==="float"?2:0),o=["r","g","b","a"];return`{${Ws(t,e).getComponents("rgb").map((m,_)=>{const x=_===3?n:r;return`${o[_]}: ${x(m)}`}).join(", ")}}`}function tze(t){return e=>t1e(e,t)}const nze=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:KG},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:qG},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Jwe},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:e3},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:Qje},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:Jje},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:eze(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:tze(e)}],[])];function n1e(t){return nze.reduce((e,n)=>e||(Vje(n.format,t)?n.stringifier:null),null)}const dC=_r("apl");let rze=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(dC()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(dC("b")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(dC("c")),r.appendChild(o),this.colorElem_=o;const u=e.createElement("div");u.classList.add(dC("m")),this.element.appendChild(u),this.markerElem_=u;const h=e.createElement("div");h.classList.add(dC("p")),this.markerElem_.appendChild(h),this.previewElem_=h,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Or([n[0],n[1],n[2],0],"rgb"),o=new Or([n[0],n[1],n[2],255],"rgb"),u=["to right",e3(r),e3(o)];this.colorElem_.style.background=`linear-gradient(${u.join(",")})`,this.previewElem_.style.backgroundColor=e3(e);const h=Rr(n[3],0,1,0,100);this.markerElem_.style.left=`${h}%`}onValueChange_(){this.update_()}},ize=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new rze(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Yg(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,o=this.value.rawValue,[u,h,m]=o.getComponents("hsv");this.value.setRawValue(new Or([u,h,m,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=fa(Vg(!0),Ah(e));if(n===0)return;const r=this.value.rawValue,[o,u,h,m]=r.getComponents("hsv");this.value.setRawValue(new Or([o,u,h,m+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){fa(Vg(!0),Ah(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const t_=_r("coltxt");function oze(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,o)=>{const u=t.createElement("option");return u.textContent=o.text,u.value=o.value,r.appendChild(u),r},t.createDocumentFragment())),e}let sze=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(t_()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(t_("m")),this.modeElem_=oze(e),this.modeElem_.classList.add(t_("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const o=e.createElement("div");o.classList.add(t_("mm")),o.appendChild(yL(e,"dropdown")),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");u.classList.add(t_("w")),this.element.appendChild(u),this.inputsElem_=u,this.inputViews_=n.inputViews,this.applyInputViews_(),xh(n.mode,h=>{this.modeElem_.value=h})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){bwe(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(t_("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}};function aze(t){return ba(t==="float"?2:0)}function lze(t,e,n){const r=X_(t,e)[n];return new RP({min:0,max:r})}function uze(t,e,n){return new FP(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:or.fromObject({formatter:aze(e.colorType),keyScale:Vg(!1),pointerScale:e.colorType==="float"?.01:1}),value:Si(0,{constraint:lze(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function cze(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:Mh,viewProps:e.viewProps};return[0,1,2].map(r=>{const o=uze(t,n,r);return aw({primary:e.value,secondary:o.value,forward(u){return Ws(u,e.colorType).getComponents(e.colorMode)[r]},backward(u,h){const m=e.colorMode,x=Ws(u,e.colorType).getComponents(m);x[r]=h;const T=$G(_L(Kc(x),x[3]),m,e.colorType);return Ws(T,"int")}}),o})}function dze(t,e){const n=new dP(t,{parser:UP("int"),props:or.fromObject({formatter:KG}),value:Si(Or.black()),viewProps:e.viewProps});return aw({primary:e.value,secondary:n.value,forward:r=>new Or(Kc(r.getComponents()),r.mode),backward:(r,o)=>new Or(_L(Kc(o.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function hze(t){return t!=="hex"}let pze=class{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=Si(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new sze(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return hze(n)?cze(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):dze(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}};const v8=_r("hpl");let fze=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(v8()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(v8("c")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(v8("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=Jwe(new Or([n,100,100],"hsv"));const r=Rr(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}},mze=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new fze(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Yg(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Rr(go(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),o=this.value.rawValue,[,u,h,m]=o.getComponents("hsv");this.value.setRawValue(new Or([r,u,h,m],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=fa(Vg(!1),Ah(e));if(n===0)return;const r=this.value.rawValue,[o,u,h,m]=r.getComponents("hsv");this.value.setRawValue(new Or([o+n,u,h,m],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){fa(Vg(!1),Ah(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const g8=_r("svp"),vge=64;let vze=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(g8()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=vge,r.width=vge,r.classList.add(g8("c")),this.element.appendChild(r),this.canvasElement=r;const o=e.createElement("div");o.classList.add(g8("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}update_(){const e=gVe(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),o=this.canvasElement.width,u=this.canvasElement.height,h=e.getImageData(0,0,o,u),m=h.data;for(let T=0;T<u;T++)for(let I=0;I<o;I++){const N=Rr(I,0,o,0,100),H=Rr(T,0,u,100,0),Z=Bwe(r[0],N,H),j=(T*o+I)*4;m[j]=Z[0],m[j+1]=Z[1],m[j+2]=Z[2],m[j+3]=255}e.putImageData(h,0,0);const _=Rr(r[1],0,100,0,100);this.markerElem_.style.left=`${_}%`;const x=Rr(r[2],0,100,100,0);this.markerElem_.style.top=`${x}%`}onValueChange_(){this.update_()}},gze=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new vze(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Yg(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Rr(e.point.x,0,e.bounds.width,0,100),o=Rr(e.point.y,0,e.bounds.height,100,0),[u,,,h]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Or([u,r,o,h],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){Dwe(e.key)&&e.preventDefault();const[n,r,o,u]=this.value.rawValue.getComponents("hsv"),h=Vg(!1),m=fa(h,Ah(e)),_=fa(h,hP(e));m===0&&_===0||this.value.setRawValue(new Or([n,r+m,o+_,u],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=Vg(!1),r=fa(n,Ah(e)),o=fa(n,hP(e));r===0&&o===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},yze=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new mze(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new gze(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new ize(e,{value:this.value,viewProps:this.viewProps}),text:new FP(e,{parser:Mh,props:or.fromObject({pointerScale:.01,keyScale:.1,formatter:ba(2)}),value:Si(0,{constraint:new RP({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&aw({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,o)=>{const u=r.getComponents();return u[3]=o,new Or(u,r.mode)}}),this.textsC_=new pze(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new Oje(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const y8=_r("colsw");let bze=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(y8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(y8("sw")),this.element.appendChild(r),this.swatchElem_=r;const o=e.createElement("button");o.classList.add(y8("b")),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=qG(e)}onValueChange_(){this.update_()}},_ze=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new bze(e,{value:this.value,viewProps:this.viewProps})}},XG=class{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=UG.create(n.expanded),this.swatchC_=new _ze(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new dP(e,{parser:n.parser,props:or.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Cje(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new Iwe(e,{viewProps:this.viewProps}):null;const o=new yze(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(o.view.element),aw({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,h)=>h})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),VG(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=_we(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!OG(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function wze(t){return Kc(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function xze(t){return t.getComponents("rgb").reduce((e,n,r)=>{const o=Math.floor(r===3?n*255:n)&255;return e<<8|o},0)>>>0}function Sze(t){return new Or([t>>16&255,t>>8&255,t&255],"rgb")}function Eze(t){return new Or([t>>24&255,t>>16&255,t>>8&255,Rr(t&255,0,255,0,1)],"rgb")}function Cze(t){return typeof t!="number"?Or.black():Sze(t)}function Pze(t){return typeof t!="number"?Or.black():Eze(t)}function t3(t,e){return typeof t!="object"||ai(t)?!1:e in t&&typeof t[e]=="number"}function r1e(t){return t3(t,"r")&&t3(t,"g")&&t3(t,"b")}function i1e(t){return r1e(t)&&t3(t,"a")}function o1e(t){return r1e(t)}function YG(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0}function gge(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function kze(t){const e=n1e(t);return e?(n,r)=>{BP(n,e(r))}:null}function Tze(t){const e=t?xze:wze;return(n,r)=>{BP(n,e(r))}}function Mze(t,e,n){const o=Ws(e,n).toRgbaObject();t.writeProperty("r",o.r),t.writeProperty("g",o.g),t.writeProperty("b",o.b),t.writeProperty("a",o.a)}function Aze(t,e,n){const o=Ws(e,n).toRgbaObject();t.writeProperty("r",o.r),t.writeProperty("g",o.g),t.writeProperty("b",o.b)}function Ize(t,e){return(n,r)=>{t?Mze(n,r,e):Aze(n,r,e)}}function Rze(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function Oze(t){return t?e=>qG(e,"0x"):e=>KG(e,"0x")}function Dze(t){return"color"in t||t.view==="color"}const Lze=Ys({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!Dze(e))return null;const n=GG(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:Rze(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?Pze:Cze,equals:YG,writer:t=>Tze(t.params.supportsAlpha)},controller:t=>{var e,n;return new XG(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:Oze(t.params.supportsAlpha),parser:UP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function Nze(t,e){if(!o1e(t))return Ws(Or.black(),e);if(e==="int"){const n=gge(t);return new Or(n,"rgb")}if(e==="float"){const n=gge(t);return new WG(n,"rgb")}return Ws(Or.black(),"int")}function Fze(t){return i1e(t)}function Bze(t){return e=>{const n=Nze(e,t);return Ws(n,"int")}}function Uze(t,e){return n=>t?t1e(n,e):e1e(n,e)}const Vze=Ys({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!o1e(t))return null;const r=GG(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=zwe(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>Bze(t.params.colorType),equals:YG,writer:t=>Ize(Fze(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=i1e(t.initialValue);return new XG(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:Uze(r,t.params.colorType),parser:UP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}}),jze=Ys({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=Yje(t,zwe(e));if(!n)return null;const r=n1e(n);if(!r)return null;const o=GG(e);return o?{initialValue:t,params:Object.assign(Object.assign({},o),{format:n,stringifier:r})}:null},binding:{reader:()=>Zje,equals:YG,writer:t=>{const e=kze(t.params.format);if(!e)throw bs.notBindable();return e}},controller:t=>{var e,n;return new XG(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:UP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});let ZG=class{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,o)=>{var u,h;return(h=(u=this.components[o])===null||u===void 0?void 0:u.constrain(r))!==null&&h!==void 0?h:r});return this.asm_.fromComponents(n)}};const yge=_r("pndtxt");let zze=class{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(yge()),this.textViews.forEach(r=>{const o=e.createElement("div");o.classList.add(yge("a")),o.appendChild(r.element),this.element.appendChild(o)})}};function Hze(t,e,n){return new FP(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:Si(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}let QG=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,o)=>Hze(e,n,o)),this.acs_.forEach((r,o)=>{aw({primary:this.value,secondary:r.value,forward:u=>n.assembly.toComponents(u)[o],backward:(u,h)=>{const m=n.assembly.toComponents(u);return m[o]=h,n.assembly.fromComponents(m)}})}),this.view=new zze(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}},Gze=class extends cP{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}};function Wze(t,e){const n=[],r=pwe(t,e);r&&n.push(r);const o=fwe(t);o&&n.push(o);const u=HG(t.options);return u&&n.push(u),new DP(n)}const $ze=Ys({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=Li(e,r=>Object.assign(Object.assign({},vwe(r)),{options:r.optional.custom(NP),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>uwe,constraint:t=>Wze(t.params,t.initialValue),writer:t=>BP},controller:t=>{const e=t.value,n=t.constraint,r=n&&L3(n,LP);if(r)return new tm(t.document,{props:new or({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const o=mwe(t.params,e.rawValue),u=n&&L3(n,RP);return u?new F3(t.document,Object.assign(Object.assign({},Lwe(Object.assign(Object.assign({},o),{keyScale:Si(o.keyScale),max:u.values.value("max"),min:u.values.value("min")}))),{parser:Mh,value:e,viewProps:t.viewProps})):new FP(t.document,{parser:Mh,props:or.fromObject(o),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof F3?new Gze(t.controller):t.controller.valueController instanceof tm?new jG(t.controller):null}});let Kf=class{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(ai(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}};const s1e={toComponents:t=>t.getComponents(),fromComponents:t=>new Kf(...t)},n_=_r("p2d");let Kze=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(n_()),n.viewProps.bindClassModifiers(this.element),xh(n.expanded,iw(this.element,n_(void 0,"expanded")));const r=e.createElement("div");r.classList.add(n_("h")),this.element.appendChild(r);const o=e.createElement("button");o.classList.add(n_("b")),o.appendChild(yL(e,"p2dpad")),n.viewProps.bindDisabled(o),r.appendChild(o),this.buttonElement=o;const u=e.createElement("div");if(u.classList.add(n_("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const h=e.createElement("div");h.classList.add(n_("p")),this.element.appendChild(h),this.pickerElement=h}else this.pickerElement=null}};const yf=_r("p2dp");let qze=class{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(yf()),n.layout==="popup"&&this.element.classList.add(yf(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(yf("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const o=e.createElementNS(Uc,"svg");o.classList.add(yf("g")),this.padElement.appendChild(o),this.svgElem_=o;const u=e.createElementNS(Uc,"line");u.classList.add(yf("ax")),u.setAttributeNS(null,"x1","0"),u.setAttributeNS(null,"y1","50%"),u.setAttributeNS(null,"x2","100%"),u.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(u);const h=e.createElementNS(Uc,"line");h.classList.add(yf("ax")),h.setAttributeNS(null,"x1","50%"),h.setAttributeNS(null,"y1","0"),h.setAttributeNS(null,"x2","50%"),h.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(h);const m=e.createElementNS(Uc,"line");m.classList.add(yf("l")),m.setAttributeNS(null,"x1","50%"),m.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(m),this.lineElem_=m;const _=e.createElement("div");_.classList.add(yf("m")),this.padElement.appendChild(_),this.markerElem_=_,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),o=Rr(e,-r,+r,0,100),u=Rr(n,-r,+r,0,100),h=this.props_.get("invertsY")?100-u:u;this.lineElem_.setAttributeNS(null,"x2",`${o}%`),this.lineElem_.setAttributeNS(null,"y2",`${h}%`),this.markerElem_.style.left=`${o}%`,this.markerElem_.style.top=`${h}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function bge(t,e,n){return[fa(e[0],Ah(t)),fa(e[1],hP(t))*(n?1:-1)]}let Xze=class{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new qze(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Yg(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),o=Rr(e.point.x,0,e.bounds.width,-r,+r),u=Rr(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new Kf(o,u),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){Dwe(e.key)&&e.preventDefault();const[n,r]=bge(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new Kf(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=bge(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},Yze=class{constructor(e,n){var r,o;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=UG.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new Iwe(e,{viewProps:this.viewProps}):null;const u=new Xze(e,{layout:n.pickerLayout,props:new or({invertsY:Si(n.invertsY),max:Si(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});u.view.allFocusableElements.forEach(h=>{h.addEventListener("blur",this.onPopupChildBlur_),h.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=u,this.textC_=new QG(e,{assembly:s1e,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new Kze(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(o=this.view.buttonElement)===null||o===void 0||o.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),aw({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:h=>h,backward:(h,m)=>m})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),VG(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=_we(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!OG(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}};function Zze(t){return Kf.isObject(t)?new Kf(t.x,t.y):new Kf}function Qze(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function Jze(t,e){return new ZG({assembly:s1e,components:[yh(Object.assign(Object.assign({},t),t.x),e.x),yh(Object.assign(Object.assign({},t),t.y),e.y)]})}function _ge(t,e){var n,r;if(!ai(t.min)||!ai(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const o=dwe(t);return Math.max(Math.abs(o)*10,Math.abs(e)*10)}function e6e(t,e){var n,r;const o=_ge(Bg(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),u=_ge(Bg(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(o,u)}function t6e(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}const n6e=Ys({id:"input-point2d",type:"input",accept:(t,e)=>{if(!Kf.isObject(t))return null;const n=Li(e,r=>Object.assign(Object.assign({},pP(r)),{expanded:r.optional.boolean,picker:r.optional.custom(Fwe),readonly:r.optional.constant(!1),x:r.optional.custom(Df),y:r.optional.object(Object.assign(Object.assign({},pP(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>Zze,constraint:t=>Jze(t.params,t.initialValue),equals:Kf.equals,writer:()=>Qze},controller:t=>{var e,n;const r=t.document,o=t.value,u=t.constraint,h=[t.params.x,t.params.y];return new Yze(r,{axes:o.rawValue.getComponents().map((m,_)=>{var x;return RG({constraint:u.components[_],initialValue:m,params:Bg(t.params,(x=h[_])!==null&&x!==void 0?x:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:t6e(t.params),max:e6e(t.params,o.rawValue),parser:Mh,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:o,viewProps:t.viewProps})}});let D_=class{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(ai(e))return!1;const n=e.x,r=e.y,o=e.z;return!(typeof n!="number"||typeof r!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const a1e={toComponents:t=>t.getComponents(),fromComponents:t=>new D_(...t)};function r6e(t){return D_.isObject(t)?new D_(t.x,t.y,t.z):new D_}function i6e(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function o6e(t,e){return new ZG({assembly:a1e,components:[yh(Object.assign(Object.assign({},t),t.x),e.x),yh(Object.assign(Object.assign({},t),t.y),e.y),yh(Object.assign(Object.assign({},t),t.z),e.z)]})}const s6e=Ys({id:"input-point3d",type:"input",accept:(t,e)=>{if(!D_.isObject(t))return null;const n=Li(e,r=>Object.assign(Object.assign({},pP(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Df),y:r.optional.custom(Df),z:r.optional.custom(Df)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>r6e,constraint:t=>o6e(t.params,t.initialValue),equals:D_.equals,writer:t=>i6e},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new QG(t.document,{assembly:a1e,axes:e.rawValue.getComponents().map((o,u)=>{var h;return RG({constraint:n.components[u],initialValue:o,params:Bg(t.params,(h=r[u])!==null&&h!==void 0?h:{})})}),parser:Mh,value:e,viewProps:t.viewProps})}});let L_=class{constructor(e=0,n=0,r=0,o=0){this.x=e,this.y=n,this.z=r,this.w=o}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(ai(e))return!1;const n=e.x,r=e.y,o=e.z,u=e.w;return!(typeof n!="number"||typeof r!="number"||typeof o!="number"||typeof u!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const l1e={toComponents:t=>t.getComponents(),fromComponents:t=>new L_(...t)};function a6e(t){return L_.isObject(t)?new L_(t.x,t.y,t.z,t.w):new L_}function l6e(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function u6e(t,e){return new ZG({assembly:l1e,components:[yh(Object.assign(Object.assign({},t),t.x),e.x),yh(Object.assign(Object.assign({},t),t.y),e.y),yh(Object.assign(Object.assign({},t),t.z),e.z),yh(Object.assign(Object.assign({},t),t.w),e.w)]})}const c6e=Ys({id:"input-point4d",type:"input",accept:(t,e)=>{if(!L_.isObject(t))return null;const n=Li(e,r=>Object.assign(Object.assign({},pP(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Df),x:r.optional.custom(Df),y:r.optional.custom(Df),z:r.optional.custom(Df)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>a6e,constraint:t=>u6e(t.params,t.initialValue),equals:L_.equals,writer:t=>l6e},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new QG(t.document,{assembly:l1e,axes:e.rawValue.getComponents().map((o,u)=>{var h;return RG({constraint:n.components[u],initialValue:o,params:Bg(t.params,(h=r[u])!==null&&h!==void 0?h:{})})}),parser:Mh,value:e,viewProps:t.viewProps})}});function d6e(t){const e=[],n=HG(t.options);return n&&e.push(n),new DP(e)}const h6e=Ys({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=Li(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(NP)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Owe,constraint:t=>d6e(t.params),writer:t=>BP},controller:t=>{const e=t.document,n=t.value,r=t.constraint,o=r&&L3(r,LP);return o?new tm(e,{props:new or({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new dP(e,{parser:u=>u,props:or.fromObject({formatter:ZH}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof tm?new jG(t.controller):null}}),VP={monitor:{defaultInterval:200,defaultRows:3}},wge=_r("mll");let p6e=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(wge()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(wge("i")),r.style.height=`calc(var(${Nwe("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(o=>{o!==void 0&&r.push(this.formatter_(o))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}},JG=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new p6e(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}};const xge=_r("sgl");let f6e=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(xge()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(xge("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}},eW=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new f6e(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}};const m6e=Ys({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Li(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Rwe},controller:t=>{var e;return t.value.rawValue.length===1?new eW(t.document,{formatter:hge,value:t.value,viewProps:t.viewProps}):new JG(t.document,{formatter:hge,rows:(e=t.params.rows)!==null&&e!==void 0?e:VP.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});let v6e=class extends cP{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}};const bf=_r("grl");let g6e=class{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(bf()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(Uc,"svg");r.classList.add(bf("g")),r.style.height=`calc(var(${Nwe("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const o=e.createElementNS(Uc,"polyline");this.svgElem_.appendChild(o),this.lineElem_=o;const u=e.createElement("div");u.classList.add(bf("t"),_r("tt")()),this.element.appendChild(u),this.tooltipElem_=u,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),o=this.props_.get("max"),u=[];this.value.rawValue.forEach((T,I)=>{if(T===void 0)return;const N=Rr(I,0,n,0,e.width),H=Rr(T,r,o,e.height,0);u.push([N,H].join(","))}),this.lineElem_.setAttributeNS(null,"points",u.join(" "));const h=this.tooltipElem_,m=this.value.rawValue[this.cursor_.rawValue];if(m===void 0){h.classList.remove(bf("t","a"));return}const _=Rr(this.cursor_.rawValue,0,n,0,e.width),x=Rr(m,r,o,e.height,0);h.style.left=`${_}px`,h.style.top=`${x}px`,h.textContent=`${this.formatter_(m)}`,h.classList.contains(bf("t","a"))||(h.classList.add(bf("t","a"),bf("t","in")),D3(h),h.classList.remove(bf("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},u1e=class{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=Si(-1),this.view=new g6e(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!OG(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Yg(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return $a(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Ka(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Rr(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Rr(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function QH(t){return ai(t.format)?ba(2):t.format}function y6e(t){var e;return t.value.rawValue.length===1?new eW(t.document,{formatter:QH(t.params),value:t.value,viewProps:t.viewProps}):new JG(t.document,{formatter:QH(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:VP.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function b6e(t){var e,n,r;return new u1e(t.document,{formatter:QH(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:VP.monitor.defaultRows,props:or.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function Sge(t){return t.view==="graph"}const _6e=Ys({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=Li(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>Sge(t)?64:1,reader:t=>uwe},controller:t=>Sge(t.params)?b6e(t):y6e(t),api:t=>t.controller.valueController instanceof u1e?new v6e(t.controller):null}),w6e=Ys({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=Li(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Owe},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new JG(t.document,{formatter:ZH,rows:(e=t.params.rows)!==null&&e!==void 0?e:VP.monitor.defaultRows,value:n,viewProps:t.viewProps}):new eW(t.document,{formatter:ZH,value:n,viewProps:t.viewProps})}});class x6e{constructor(){this.map_=new Map}get(e){var n;return(n=this.map_.get(e))!==null&&n!==void 0?n:null}has(e){return this.map_.has(e)}add(e,n){return this.map_.set(e,n),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),n}}class S6e{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function E6e(t,e){var n;const r=t.accept(e.target.read(),e.params);if(ai(r))return null;const o={target:e.target,initialValue:r.initialValue,params:r.params},u=Li(e.params,I=>({disabled:I.optional.boolean,hidden:I.optional.boolean,label:I.optional.string,tag:I.optional.string})),h=t.binding.reader(o),m=t.binding.constraint?t.binding.constraint(o):void 0,_=new S6e({reader:h,target:e.target,writer:t.binding.writer(o)}),x=new uVe(Si(h(r.initialValue),{constraint:m,equals:t.binding.equals}),_),T=t.controller({constraint:m,document:e.document,initialValue:r.initialValue,params:r.params,value:x,viewProps:Xg.create({disabled:u==null?void 0:u.disabled,hidden:u==null?void 0:u.hidden})});return new EVe(e.document,{blade:sw(),props:or.fromObject({label:"label"in e.params?(n=u==null?void 0:u.label)!==null&&n!==void 0?n:null:e.target.key}),tag:u==null?void 0:u.tag,value:x,valueController:T})}class C6e{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function P6e(t,e){return e===0?new sje:new aje(t,e??VP.monitor.defaultInterval)}function k6e(t,e){var n,r,o;const u=t.accept(e.target.read(),e.params);if(ai(u))return null;const h={target:e.target,initialValue:u.initialValue,params:u.params},m=Li(e.params,N=>({bufferSize:N.optional.number,disabled:N.optional.boolean,hidden:N.optional.boolean,interval:N.optional.number,label:N.optional.string})),_=t.binding.reader(h),x=(r=(n=m==null?void 0:m.bufferSize)!==null&&n!==void 0?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(u.params))!==null&&r!==void 0?r:1,T=new MVe({binding:new C6e({reader:_,target:e.target}),bufferSize:x,ticker:P6e(e.document,m==null?void 0:m.interval)}),I=t.controller({document:e.document,params:u.params,value:T,viewProps:Xg.create({disabled:m==null?void 0:m.disabled,hidden:m==null?void 0:m.hidden})});return I.viewProps.bindDisabled(T.ticker),I.viewProps.handleDispose(()=>{T.ticker.dispose()}),new IVe(e.document,{blade:sw(),props:or.fromObject({label:"label"in e.params?(o=m==null?void 0:m.label)!==null&&o!==void 0?o:null:e.target.key}),value:T,valueController:I})}class T6e{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,n){if(!_je(n.core))throw bs.notCompatible(e,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(e,n,r){return this.pluginsMap_.inputs.reduce((o,u)=>o??E6e(u,{document:e,target:n,params:r}),null)}createMonitor_(e,n,r){return this.pluginsMap_.monitors.reduce((o,u)=>o??k6e(u,{document:e,params:r,target:n}),null)}createBinding(e,n,r){const o=n.read();if(ai(o))throw new bs({context:{key:n.key},type:"nomatchingcontroller"});const u=this.createInput_(e,n,r);if(u)return u;const h=this.createMonitor_(e,n,r);if(h)return h;throw new bs({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(e,n){const r=this.pluginsMap_.blades.reduce((o,u)=>o??oje(u,{document:e,params:n}),null);if(!r)throw new bs({type:"nomatchingview",context:{params:n}});return r}createInputBindingApi_(e){const n=this.pluginsMap_.inputs.reduce((r,o)=>{var u,h;return r||((h=(u=o.api)===null||u===void 0?void 0:u.call(o,{controller:e}))!==null&&h!==void 0?h:null)},null);return this.apiCache_.add(e,n??new cP(e))}createMonitorBindingApi_(e){const n=this.pluginsMap_.monitors.reduce((r,o)=>{var u,h;return r||((h=(u=o.api)===null||u===void 0?void 0:u.call(o,{controller:e}))!==null&&h!==void 0?h:null)},null);return this.apiCache_.add(e,n??new cP(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(CVe(e))return this.createInputBindingApi_(e);if(RVe(e))return this.createMonitorBindingApi_(e);throw bs.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(SVe(e))return this.createBindingApi(e);const n=this.pluginsMap_.blades.reduce((r,o)=>r??o.api({controller:e,pool:this}),null);if(!n)throw bs.shouldNeverHappen();return this.apiCache_.add(e,n)}}const M6e=new x6e;function A6e(){const t=new T6e(M6e);return[n6e,s6e,c6e,h6e,$ze,jze,Vze,Lze,Eje,m6e,w6e,_6e,FVe,YVe,Awe].forEach(e=>{t.register("core",e)}),t}class I6e extends qg{constructor(e){super(e),this.emitter_=new co,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new OP(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}}class R6e extends qg{}class O6e extends qg{constructor(e){super(e),this.emitter_=new co,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new OP(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}}class D6e extends qg{constructor(e){super(e),this.emitter_=new co,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new OP(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}}const L6e=function(){return{id:"list",type:"blade",core:ow,accept(t){const e=Li(t,n=>({options:n.required.custom(NP),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=new LP(zG(t.params.options)),n=Si(t.params.value,{constraint:e}),r=new tm(t.document,{props:new or({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new Ug(t.document,{blade:t.blade,props:or.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof Ug)||!(t.controller.valueController instanceof tm)?null:new I6e(t.controller)}}}();class N6e extends kwe{constructor(e,n){super(e,n)}get element(){return this.controller.view.element}}class F6e extends XH{constructor(e,n){super(e,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const Ege=_r("spr");class B6e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ege()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("hr");r.classList.add(Ege("r")),this.element.appendChild(r)}}class Cge extends bL{constructor(e,n){super(Object.assign(Object.assign({},n),{view:new B6e(e,{viewProps:n.viewProps})}))}}const U6e={id:"separator",type:"blade",core:ow,accept(t){const e=Li(t,n=>({view:n.required.constant("separator")}));return e?{params:e}:null},controller(t){return new Cge(t.document,{blade:t.blade,viewProps:t.viewProps})},api(t){return t.controller instanceof Cge?new R6e(t.controller):null}},V6e={id:"slider",type:"blade",core:ow,accept(t){const e=Li(t,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return e?{params:e}:null},controller(t){var e,n;const r=(e=t.params.value)!==null&&e!==void 0?e:0,o=new RP({max:t.params.max,min:t.params.min}),u=Si(r,{constraint:o}),h=new F3(t.document,Object.assign(Object.assign({},Lwe({formatter:(n=t.params.format)!==null&&n!==void 0?n:oVe,keyScale:Si(1),max:o.values.value("max"),min:o.values.value("min"),pointerScale:hwe(t.params,r)})),{parser:Mh,value:u,viewProps:t.viewProps}));return new Ug(t.document,{blade:t.blade,props:or.fromObject({label:t.params.label}),value:u,valueController:h})},api(t){return!(t.controller instanceof Ug)||!(t.controller.valueController instanceof F3)?null:new O6e(t.controller)}},j6e=function(){return{id:"text",type:"blade",core:ow,accept(t){const e=Li(t,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return e?{params:e}:null},controller(t){var e;const n=Si(t.params.value),r=new dP(t.document,{parser:t.params.parse,props:or.fromObject({formatter:(e=t.params.format)!==null&&e!==void 0?e:o=>String(o)}),value:n,viewProps:t.viewProps});return new Ug(t.document,{blade:t.blade,props:or.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof Ug)||!(t.controller.valueController instanceof dP)?null:new D6e(t.controller)}}}();function z6e(t){const e=t.createElement("div");return e.classList.add(_r("dfw")()),t.body&&t.body.appendChild(e),e}function H6e(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}class G6e extends N6e{constructor(e){var n,r;const o=e??{},u=(n=o.document)!==null&&n!==void 0?n:vVe(),h=A6e(),m=new F6e(u,{expanded:o.expanded,blade:sw(),props:or.fromObject({title:o.title}),viewProps:Xg.create()});super(m,h),this.pool_=h,this.containerElem_=(r=o.container)!==null&&r!==void 0?r:z6e(u),this.containerElem_.appendChild(this.element),this.doc_=u,this.usesDefaultWrapper_=!o.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw bs.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw bs.alreadyDisposed();if(this.usesDefaultWrapper_){const n=e.parentElement;n&&n.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&H6e(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(r=>{this.pool_.register(e.id,r)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(		2px * 2 + var(--cnt-usz) + var(--cnt-hp)	);position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(		var(--cnt-hp) + (				var(--cnt-usz) + 4px - 6px			) / 2 - 2px	);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(			var(--cnt-vp) + 2px		);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz) * 3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(			var(--bld-hp) - 5px		);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(			2px * 2 + var(--cnt-usz) + var(--cnt-hp)		);text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[L6e,U6e,V6e,Awe,j6e]})}}new Cwe("4.0.0");function wi(t){return t==null}function tW(t){return t!==null&&typeof t=="object"}function JH(t){return t!==null&&typeof t=="object"}function W6e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function jg(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,o)=>{const u=t[o],h=e[o];return JH(u)&&JH(h)?Object.assign(Object.assign({},r),{[o]:jg(u,h)}):Object.assign(Object.assign({},r),{[o]:o in e?h:u})},{})}function $6e(t){return tW(t)?"target"in t:!1}const K6e={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class Hs{static alreadyDisposed(){return new Hs({type:"alreadydisposed"})}static notBindable(){return new Hs({type:"notbindable"})}static notCompatible(e,n){return new Hs({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new Hs({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new Hs({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=K6e[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class B3{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!B3.isBindable(r))throw Hs.notBindable();if(!(e in r))throw Hs.propertyNotFound(e);r[e]=n}}class xs{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(o=>o.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(o=>{o.handler(n)})}}class q6e{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(o,u)=>o===u,this.emitter=new xs,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},o=this.constraint_?this.constraint_.constrain(e):e,u=this.rawValue_;this.equals_(u,o)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=o,this.emitter.emit("change",{options:r,previousRawValue:u,rawValue:o,sender:this}))}}class X6e{constructor(e){this.emitter=new xs,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},o=this.value_;o===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:this.value_,sender:this}))}}class Y6e{constructor(e){this.emitter=new xs,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function ji(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new X6e(t):new q6e(t,e)}function Z6e(t){return[new Y6e(t),(e,n)=>{t.setRawValue(e,n)}]}class Jn{constructor(e){this.emitter=new xs,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,o)=>Object.assign(r,{[o]:ji(e[o])}),{})}static fromObject(e){const n=this.createCore(e);return new Jn(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}}class jP{constructor(e){this.values=Jn.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}}class nW{constructor(e){this.values=Jn.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let o=e;return wi(r)||(o=Math.max(o,r)),wi(n)||(o=Math.min(o,n)),o}}class Q6e{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}}class J6e{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const e8e={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class t8e{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=e8e[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const n8e={"+":t=>t,"-":t=>-t,"~":t=>~t};class r8e{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=n8e[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function rW(t){return(e,n)=>{for(let r=0;r<t.length;r++){const o=t[r](e,n);if(o!=="")return o}return""}}function fP(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function i8e(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function mP(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function o8e(t,e){const n=mP(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const o=mP(t,e);return o===""?"":r+o}function iW(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=o8e(t,e);return r===""?"":n+r}function c1e(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=i8e(t,e);return e+=r.length,r===""?"":r+mP(t,e)}function s8e(t,e){const n=c1e(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const o=mP(t,e);return e+=o.length,n+r+o+iW(t,e)}function a8e(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=mP(t,e);return e+=r.length,r===""?"":n+r+iW(t,e)}function l8e(t,e){const n=c1e(t,e);return e+=n.length,n===""?"":n+iW(t,e)}const u8e=rW([s8e,a8e,l8e]);function c8e(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function d8e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=c8e(t,e);return r===""?"":n+r}function h8e(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function p8e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=h8e(t,e);return r===""?"":n+r}function f8e(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function m8e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=f8e(t,e);return r===""?"":n+r}const v8e=rW([d8e,p8e,m8e]),g8e=rW([v8e,u8e]);function y8e(t,e){const n=g8e(t,e);return e+=n.length,n===""?null:{evaluable:new J6e(n),cursor:e}}function b8e(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=h1e(t,e);if(!r)return null;e=r.cursor,e+=fP(t,e).length;const o=t.substr(e,1);return e+=o.length,o!==")"?null:{evaluable:r.evaluable,cursor:e}}function _8e(t,e){var n;return(n=y8e(t,e))!==null&&n!==void 0?n:b8e(t,e)}function d1e(t,e){const n=_8e(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const o=d1e(t,e);return o?(e=o.cursor,{cursor:e,evaluable:new r8e(r,o.evaluable)}):null}function w8e(t,e,n){n+=fP(e,n).length;const r=t.filter(o=>e.startsWith(o,n))[0];return r?(n+=r.length,n+=fP(e,n).length,{cursor:n,operator:r}):null}function x8e(t,e){return(n,r)=>{const o=t(n,r);if(!o)return null;r=o.cursor;let u=o.evaluable;for(;;){const h=w8e(e,n,r);if(!h)break;r=h.cursor;const m=t(n,r);if(!m)return null;r=m.cursor,u=new t8e(h.operator,u,m.evaluable)}return u?{cursor:r,evaluable:u}:null}}const S8e=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>x8e(t,e),d1e);function h1e(t,e){return e+=fP(t,e).length,S8e(t,e)}function E8e(t){const e=h1e(t,0);return!e||e.cursor+fP(t,e.cursor).length!==t.length?null:e.evaluable}function ju(t){var e;const n=E8e(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function oW(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=ju(t);if(!wi(e))return e}return 0}function Jo(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function Zn(t,e,n,r,o){const u=(t-e)/(n-e);return r+u*(o-r)}function Pge(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Ri(t,e,n){return Math.min(Math.max(t,e),n)}function p1e(t,e){return(t%e+e)%e}function C8e(t,e){return wi(t.step)?Math.max(Pge(e),2):Pge(t.step)}function f1e(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function P8e(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function sW(t,e){return wi(t.step)?null:new Q6e(t.step,e)}function aW(t){return!wi(t.max)&&!wi(t.min)?new jP({max:t.max,min:t.min}):!wi(t.max)||!wi(t.min)?new nW({max:t.max,min:t.min}):null}function lW(t,e){var n,r,o;return{formatter:(n=t.format)!==null&&n!==void 0?n:Jo(C8e(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:f1e(t),pointerScale:(o=t.pointerScale)!==null&&o!==void 0?o:P8e(t,e)}}function uW(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function cW(t){return{constraint:t.constraint,textProps:Jn.fromObject(lW(t.params,t.initialValue))}}class Zg{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class lw{constructor(e){this.target=e}}class wL extends lw{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}}class k8e extends lw{constructor(e,n){super(e),this.expanded=n}}class T8e extends lw{constructor(e,n){super(e),this.index=n}}class dW extends Zg{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new xs,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new wL(this,n.binding.target.read(),e.options.last))}}function M8e(t,e){const r=Object.keys(e).reduce((o,u)=>{if(o===void 0)return;const h=e[u],m=h(t[u]);return m.succeeded?Object.assign(Object.assign({},o),{[u]:m.value}):void 0},{});return r}function A8e(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const o=e(r);if(!(!o.succeeded||o.value===void 0))return[...n,o.value]},[])}function I8e(t){return t===null?!1:typeof t=="object"}function ch(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function kge(t){return{custom:e=>ch(e)(t),boolean:ch(e=>typeof e=="boolean"?e:void 0)(t),number:ch(e=>typeof e=="number"?e:void 0)(t),string:ch(e=>typeof e=="string"?e:void 0)(t),function:ch(e=>typeof e=="function"?e:void 0)(t),constant:e=>ch(n=>n===e?e:void 0)(t),raw:ch(e=>e)(t),object:e=>ch(n=>{if(I8e(n))return M8e(n,e)})(t),array:e=>ch(n=>{if(Array.isArray(n))return A8e(n,e)})(t)}}const e9={optional:kge(!0),required:kge(!1)};function zi(t,e){const n=e(e9),r=e9.required.object(n)(t);return r.succeeded?r.value:void 0}function Hu(t,e,n,r){if(e&&!e(t))return!1;const o=zi(t,n);return o?r(o):!1}function Gu(t,e){var n;return jg((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function n3(t){return"value"in t}function R8e(t){if(!tW(t)||!("binding"in t))return!1;const e=t.binding;return $6e(e)}const Ao="http://www.w3.org/2000/svg";function U3(t){t.offsetHeight}function O8e(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function xL(t){return t.ontouchstart!==void 0}function D8e(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const L8e={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function SL(t,e){const n=t.createElementNS(Ao,"svg");return n.innerHTML=L8e[e],n}function m1e(t,e,n){t.insertBefore(e,t.children[n])}function hW(t){t.parentElement&&t.parentElement.removeChild(t)}function v1e(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function N8e(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function pW(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function Bl(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function jl(t,e,n){Bl(t.value(e),n)}const F8e="tp";function nr(t){return(n,r)=>[F8e,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const hC=nr("lbl");function B8e(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(o=>t.createTextNode(o)).forEach((o,u)=>{u>0&&n.appendChild(t.createElement("br")),n.appendChild(o)}),n}class g1e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(hC()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(hC("l")),jl(n.props,"label",u=>{wi(u)?this.element.classList.add(hC(void 0,"nol")):(this.element.classList.remove(hC(void 0,"nol")),N8e(r),r.appendChild(B8e(e,u)))}),this.element.appendChild(r),this.labelElement=r;const o=e.createElement("div");o.classList.add(hC("v")),this.element.appendChild(o),this.valueElement=o}}class EL{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new g1e(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Hu(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Gu(null,{label:this.props.get("label")})}}function U8e(){return["veryfirst","first","last","verylast"]}const Tge=nr(""),Mge={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class zP{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{U8e().forEach(r=>{n.classList.remove(Tge(void 0,Mge[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(Tge(void 0,Mge[r]))})}),this.viewProps.handleDispose(()=>{hW(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Hu(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Gu(null,Object.assign({},this.viewProps.exportState()))}}class V3 extends zP{constructor(e,n){if(n.value!==n.valueController.value)throw Hs.shouldNeverHappen();const r=n.valueController.viewProps,o=new EL(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new g1e(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=o,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return Hu(e,n=>{var r,o,u;return super.importState(n)&&this.labelController.importProps(n)&&((u=(o=(r=this.valueController).importProps)===null||o===void 0?void 0:o.call(r,e))!==null&&u!==void 0?u:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return Gu(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}}function y1e(t,e){for(;t.length<e;)t.push(void 0)}function V8e(t){const e=[];return y1e(e,t),e}function j8e(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function z8e(t,e){const n=[...j8e(t),e];return n.length>t.length?n.splice(0,n.length-t.length):y1e(n,t.length),n}class H8e extends Zg{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new lw(this))}),this}}function G8e(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function um(t,e){return n=>{G8e(t,e,n)}}function fW(t,e){Bl(t,n=>{e.textContent=n??""})}const b8=nr("btn");class W8e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(b8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(b8("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const o=e.createElement("div");o.classList.add(b8("t")),fW(n.props.value("title"),o),this.buttonElement.appendChild(o)}}class b1e{constructor(e,n){this.emitter=new xs,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new W8e(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Hu(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Gu(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}}class Age extends zP{constructor(e,n){const r=new b1e(e,{props:n.buttonProps,viewProps:n.viewProps}),o=new EL(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:o.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=o}importState(e){return Hu(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Gu(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class $8e{constructor(e){const[n,r]=e.split("-"),o=n.split(".");this.major=parseInt(o[0],10),this.minor=parseInt(o[1],10),this.patch=parseInt(o[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const K8e=new $8e("2.0.0-beta.2");function Ji(t){return Object.assign({core:K8e},t)}Ji({id:"button",type:"blade",accept(t){const e=zi(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new Age(t.document,{blade:t.blade,buttonProps:Jn.fromObject({title:t.params.title}),labelProps:Jn.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof Age?new H8e(t.controller):null}});function q8e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function X8e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function Y8e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function Z8e(t){return tW(t)?"refresh"in t&&typeof t.refresh=="function":!1}function Q8e(t,e){if(!B3.isBindable(t))throw Hs.notBindable();return new B3(t,e)}class J8e{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new xs,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const o=r??{},u=this.controller_.element.ownerDocument,h=this.pool_.createBinding(u,Q8e(e,n),o),m=this.pool_.createBindingApi(h);return this.add(m,o.index)}addFolder(e){return X8e(this,e)}addButton(e){return q8e(this,e)}addTab(e){return Y8e(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),o=this.pool_.createApi(r);return this.add(o,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.children.forEach(e=>{Z8e(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),o=R8e(n.value)?n.value.binding:null;this.emitter_.emit("change",new wL(r,o?o.target.read():n.value.rawValue,e.options.last))}}class mW extends Zg{constructor(e,n){super(e),this.rackApi_=new J8e(e.rackController,n)}}class vW extends zP{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Hu(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,o)=>r.importState(n.children[o])))}exportState(){return Gu(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function t9(t){return"rackController"in t}class eHe{constructor(e){this.emitter=new xs,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw Hs.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const o=this.extract_(e);o&&(o.emitter.on("add",this.onSubListAdd_),o.emitter.on("remove",this.onSubListRemove_),o.allItems().forEach(u=>{this.cache_.add(u)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(o=>{this.cache_.delete(o)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function tHe(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(n3(r)&&r.value===e)return r}return null}function nHe(t){return t9(t)?t.rackController.rack.bcSet_:null}class rHe{constructor(e){var n,r;this.emitter=new xs,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new eHe(nHe),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),n3(r))r.value.emitter.on("change",this.onChildValueChange_);else if(t9(r)){const o=r.rackController.rack;if(o){const u=o.emitter;u.on("layout",this.onRackLayout_),u.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(n3(r))r.value.emitter.off("change",this.onChildValueChange_);else if(t9(r)){const o=r.rackController.rack;if(o){const u=o.emitter;u.off("layout",this.onRackLayout_),u.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(o=>!o.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(o=>{const u=[];o===n&&(u.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&u.push("veryfirst")),o===r&&(u.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&u.push("verylast")),o.blade.set("positions",u)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=tHe(this.find(n3),e.sender);if(!n)throw Hs.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class gW{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new rHe({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&m1e(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&hW(e.bladeController.view.element)}}function _1e(){return new Jn({positions:ji([],{equals:W6e})})}class uw extends Jn{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=Jn.createCore(n);return new uw(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!wi(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};jl(this,"expanded",r),jl(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function iHe(t,e){let n=0;return O8e(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),U3(e),n=e.clientHeight,t.set("temporaryExpanded",null),U3(e)}),n}function Ige(t,e){e.style.height=t.styleHeight}function CL(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),wi(t.get("expandedHeight"))){const n=iHe(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),U3(e)}),t.emitter.on("change",()=>{Ige(t,e)}),Ige(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}class oHe extends mW{constructor(e,n){super(e,n),this.emitter_=new xs,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new k8e(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.rackApi_.refresh()}}const w1e=nr("cnt");class sHe{constructor(e,n){var r;this.className_=nr((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),w1e()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),jl(this.foldable_,"completed",um(this.element,this.className_(void 0,"cpl")));const o=e.createElement("button");o.classList.add(this.className_("b")),jl(n.props,"title",x=>{wi(x)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o;const u=e.createElement("div");u.classList.add(this.className_("i")),this.element.appendChild(u);const h=e.createElement("div");h.classList.add(this.className_("t")),fW(n.props.value("title"),h),this.buttonElement.appendChild(h),this.titleElement=h;const m=e.createElement("div");m.classList.add(this.className_("m")),this.buttonElement.appendChild(m);const _=e.createElement("div");_.classList.add(this.className_("c")),this.element.appendChild(_),this.containerElement=_}}class Rge extends vW{constructor(e,n){var r;const o=uw.create((r=n.expanded)!==null&&r!==void 0?r:!0),u=new sHe(e,{foldable:o,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new gW({blade:n.blade,element:u.containerElement,root:n.root,viewProps:n.viewProps}),view:u})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=o,CL(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Hu(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Gu(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}Ji({id:"folder",type:"blade",accept(t){const e=zi(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new Rge(t.document,{blade:t.blade,expanded:t.params.expanded,props:Jn.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof Rge?new oHe(t.controller,t.pool):null}});const aHe=nr("");function Oge(t,e){return um(t,aHe(void 0,e))}class Ih extends Jn{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=Z6e(ji(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,o;const u=e??{};return new Ih(Jn.createCore({disabled:(n=u.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=u.hidden)!==null&&r!==void 0?r:!1,parent:(o=u.parent)!==null&&o!==void 0?o:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Bl(this.globalDisabled_,Oge(e,"disabled")),jl(this,"hidden",Oge(e,"hidden"))}bindDisabled(e){Bl(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){Bl(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Dge=nr("tbp");class lHe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Dge()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Dge("c")),this.element.appendChild(r),this.containerElement=r}}const pC=nr("tbi");class uHe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(pC()),n.viewProps.bindClassModifiers(this.element),jl(n.props,"selected",u=>{u?this.element.classList.add(pC(void 0,"sel")):this.element.classList.remove(pC(void 0,"sel"))});const r=e.createElement("button");r.classList.add(pC("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const o=e.createElement("div");o.classList.add(pC("t")),fW(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o}}class cHe{constructor(e,n){this.emitter=new xs,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new uHe(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class n9 extends vW{constructor(e,n){const r=new lHe(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new gW({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new cHe(e,{props:n.itemProps,viewProps:Ih.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,jl(this.props,"selected",o=>{this.itemController.props.set("selected",o),this.viewProps.set("hidden",!o)})}get itemController(){return this.ic_}importState(e){return Hu(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Gu(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class dHe extends mW{constructor(e,n){super(e,n),this.emitter_=new xs,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new n9(n,{blade:_1e(),itemProps:Jn.fromObject({selected:!1,title:e.title}),props:Jn.fromObject({selected:!1}),viewProps:Ih.create()}),o=this.pool_.createApi(r);return this.rackApi_.add(o,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}onSelect_(e){this.emitter_.emit("select",new T8e(this,e.rawValue))}}class hHe extends mW{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}}const Lge=-1;class pHe{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=ji(!0),this.selectedIndex=ji(Lge),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Lge,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,o)=>{r.rawValue=o===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const fC=nr("tab");class fHe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(fC(),w1e()),n.viewProps.bindClassModifiers(this.element),Bl(n.empty,um(this.element,fC(void 0,"nop")));const r=e.createElement("div");r.classList.add(fC("t")),this.element.appendChild(r),this.itemsElement=r;const o=e.createElement("div");o.classList.add(fC("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(fC("c")),this.element.appendChild(u),this.contentsElement=u}}class Nge extends vW{constructor(e,n){const r=new pHe,o=new fHe(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new gW({blade:n.blade,element:o.contentsElement,viewProps:n.viewProps}),view:o}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const u=this.rackController.rack;u.emitter.on("add",this.onRackAdd_),u.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;m1e(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;hW(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}Ji({id:"tab",type:"blade",accept(t){const e=zi(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new Nge(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new n9(t.document,{blade:_1e(),itemProps:Jn.fromObject({selected:!1,title:n.title}),props:Jn.fromObject({selected:!1}),viewProps:Ih.create()});e.add(r)}),e},api(t){return t.controller instanceof Nge?new dHe(t.controller,t.pool):t.controller instanceof n9?new hHe(t.controller,t.pool):null}});class yW extends dW{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class mHe{constructor(){this.disabled=!1,this.emitter=new xs}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class vHe{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new xs,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class cw{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}}function vP(t,e){if(t instanceof e)return t;if(t instanceof cw){const n=t.constraints.reduce((r,o)=>r||(o instanceof e?o:null),null);if(n)return n}return null}class PL{constructor(e){this.values=Jn.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(o=>o.value===e).length>0?e:n[0].value}}function kL(t){var e;const n=e9;if(Array.isArray(t))return(e=zi({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function x1e(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function bW(t){return wi(t)?null:new PL(x1e(t))}const _8=nr("lst");class gHe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(_8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(_8("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const o=e.createElement("div");o.classList.add(_8("m")),o.appendChild(SL(e,"dropdown")),this.element.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,jl(this.props_,"options",u=>{v1e(this.selectElement),u.forEach(h=>{const m=e.createElement("option");m.textContent=h.text,this.selectElement.appendChild(m)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class Y_{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new gHe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return Hu(e,null,n=>({options:n.required.custom(kL)}),n=>(this.props.set("options",x1e(n.options)),!0))}exportProps(){return Gu(null,{options:this.props.get("options")})}}const Fge=nr("pop");class yHe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Fge()),n.viewProps.bindClassModifiers(this.element),Bl(n.shows,um(this.element,Fge(void 0,"v")))}}class _W{constructor(e,n){this.shows=ji(!1),this.viewProps=n.viewProps,this.view=new yHe(e,{shows:this.shows,viewProps:this.viewProps})}}const Bge=nr("txt");class bHe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Bge()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(Bge("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class TL{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new bHe(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,o=this.parser_(r);wi(o)||(this.value.rawValue=o),this.view.refresh()}}function _He(t){return String(t)}function wW(t){return t==="false"?!1:!!t}function Uge(t){return _He(t)}function wHe(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const xHe=Jo(0);function j3(t){return xHe(t)+"%"}function xW(t){return String(t)}function r9(t){return t}function Qg({primary:t,secondary:e,forward:n,backward:r}){let o=!1;function u(h){o||(o=!0,h(),o=!1)}t.emitter.on("change",h=>{u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),h.options)})}),e.emitter.on("change",h=>{u(()=>{t.setRawValue(r(t.rawValue,e.rawValue),h.options)}),u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),h.options)})}),u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Ro(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function zg(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function zu(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function SHe(t){return t==="ArrowUp"||t==="ArrowDown"}function z3(t){return SHe(t)||t==="ArrowLeft"||t==="ArrowRight"}function w8(t,e){var n,r;const o=e.ownerDocument.defaultView,u=e.getBoundingClientRect();return{x:t.pageX-(((n=o&&o.scrollX)!==null&&n!==void 0?n:0)+u.left),y:t.pageY-(((r=o&&o.scrollY)!==null&&r!==void 0?r:0)+u.top)}}class Oh{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new xs,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(w8(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(w8(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(w8(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,o=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-o.left,y:r.clientY-o.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const Tl=nr("txt");class EHe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Tl(),Tl(void 0,"num")),n.arrayPosition&&this.element.classList.add(Tl(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(Tl("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Tl()),this.inputElement.classList.add(Tl("i"));const o=e.createElement("div");o.classList.add(Tl("k")),this.element.appendChild(o),this.knobElement=o;const u=e.createElementNS(Ao,"svg");u.classList.add(Tl("g")),this.knobElement.appendChild(u);const h=e.createElementNS(Ao,"path");h.classList.add(Tl("gb")),u.appendChild(h),this.guideBodyElem_=h;const m=e.createElementNS(Ao,"path");m.classList.add(Tl("gh")),u.appendChild(m),this.guideHeadElem_=m;const _=e.createElement("div");_.classList.add(nr("tt")()),this.knobElement.appendChild(_),this.tooltipElem_=_,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Tl(void 0,"drg"));return}this.element.classList.add(Tl(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),o=Ri(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+o},0 L${r},4 L${r+o},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const u=this.props_.get("formatter");this.tooltipElem_.textContent=u(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class HP{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=ji(null),this.view=new EHe(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const o=new Oh(this.view.knobElement);o.emitter.on("down",this.onPointerDown_),o.emitter.on("move",this.onPointerMove_),o.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const o=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),u=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let h=e;return o!==void 0&&(h=Math.max(h,o)),u!==void 0&&(h=Math.min(h,u)),h}onInputChange_(e){const r=e.currentTarget.value,o=this.parser_(r);wi(o)||(this.value.rawValue=this.constrainValue_(o)),this.view.refresh()}onInputKeyDown_(e){const n=Ro(this.props.get("keyScale"),zg(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Ro(this.props.get("keyScale"),zg(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const x8=nr("sld");class CHe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(x8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(x8("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const o=e.createElement("div");o.classList.add(x8("k")),this.trackElement.appendChild(o),this.knobElement=o,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=Ri(Zn(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class PHe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new CHe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Oh(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(Zn(Ri(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ro(this.props.get("keyScale"),zu(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){Ro(this.props.get("keyScale"),zu(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const S8=nr("sldtxt");class kHe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(S8());const r=e.createElement("div");r.classList.add(S8("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(S8("t")),this.textView_=n.textView,o.appendChild(this.textView_.element),this.element.appendChild(o)}}class Vge{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new PHe(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new HP(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new kHe(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Hu(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Gu(null,{max:e.get("max"),min:e.get("min")})}}function THe(t){return{sliderProps:new Jn({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new Jn({formatter:ji(t.formatter),keyScale:t.keyScale,pointerScale:ji(t.pointerScale)})}}const MHe={containerUnitSize:"cnt-usz"};function S1e(t){return`--${MHe[t]}`}class E1e{constructor(e,n){const r=nr(n.viewName);this.element=e.createElement("div"),this.element.classList.add(r()),n.viewProps.bindClassModifiers(this.element)}}function gP(t){return uW(t)}function Lf(t){if(JH(t))return zi(t,gP)}function bh(t,e){if(!t)return;const n=[],r=sW(t,e);r&&n.push(r);const o=aW(t);return o&&n.push(o),new cw(n)}function C1e(t){if(t==="inline"||t==="popup")return t}function cm(t,e){t.write(e)}const ND=nr("ckb");class AHe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(ND()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(ND("l")),this.element.appendChild(r);const o=e.createElement("input");o.classList.add(ND("i")),o.type="checkbox",r.appendChild(o),this.inputElement=o,n.viewProps.bindDisabled(this.inputElement);const u=e.createElement("div");u.classList.add(ND("w")),r.appendChild(u);const h=SL(e,"check");u.appendChild(h),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class IHe{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new AHe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}}function RHe(t){const e=[],n=bW(t.options);return n&&e.push(n),new cw(e)}Ji({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=zi(e,r=>({options:r.optional.custom(kL),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>wW,constraint:t=>RHe(t.params),writer:t=>cm},controller:t=>{const e=t.document,n=t.value,r=t.constraint,o=r&&vP(r,PL);return o?new Y_(e,{props:new Jn({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new IHe(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof Y_?new yW(t.controller):null}});const ag=nr("col");class OHe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(ag()),n.foldable.bindExpandedClass(this.element,ag(void 0,"expanded")),jl(n.foldable,"completed",um(this.element,ag(void 0,"cpl")));const r=e.createElement("div");r.classList.add(ag("h")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(ag("s")),r.appendChild(o),this.swatchElement=o;const u=e.createElement("div");if(u.classList.add(ag("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const h=e.createElement("div");h.classList.add(ag("p")),this.element.appendChild(h),this.pickerElement=h}else this.pickerElement=null}}function DHe(t,e,n){const r=Ri(t/255,0,1),o=Ri(e/255,0,1),u=Ri(n/255,0,1),h=Math.max(r,o,u),m=Math.min(r,o,u),_=h-m;let x=0,T=0;const I=(m+h)/2;return _!==0&&(T=_/(1-Math.abs(h+m-1)),r===h?x=(o-u)/_:o===h?x=2+(u-r)/_:x=4+(r-o)/_,x=x/6+(x<0?1:0)),[x*360,T*100,I*100]}function LHe(t,e,n){const r=(t%360+360)%360,o=Ri(e/100,0,1),u=Ri(n/100,0,1),h=(1-Math.abs(2*u-1))*o,m=h*(1-Math.abs(r/60%2-1)),_=u-h/2;let x,T,I;return r>=0&&r<60?[x,T,I]=[h,m,0]:r>=60&&r<120?[x,T,I]=[m,h,0]:r>=120&&r<180?[x,T,I]=[0,h,m]:r>=180&&r<240?[x,T,I]=[0,m,h]:r>=240&&r<300?[x,T,I]=[m,0,h]:[x,T,I]=[h,0,m],[(x+_)*255,(T+_)*255,(I+_)*255]}function NHe(t,e,n){const r=Ri(t/255,0,1),o=Ri(e/255,0,1),u=Ri(n/255,0,1),h=Math.max(r,o,u),m=Math.min(r,o,u),_=h-m;let x;_===0?x=0:h===r?x=60*(((o-u)/_%6+6)%6):h===o?x=60*((u-r)/_+2):x=60*((r-o)/_+4);const T=h===0?0:_/h,I=h;return[x,T*100,I*100]}function P1e(t,e,n){const r=p1e(t,360),o=Ri(e/100,0,1),u=Ri(n/100,0,1),h=u*o,m=h*(1-Math.abs(r/60%2-1)),_=u-h;let x,T,I;return r>=0&&r<60?[x,T,I]=[h,m,0]:r>=60&&r<120?[x,T,I]=[m,h,0]:r>=120&&r<180?[x,T,I]=[0,h,m]:r>=180&&r<240?[x,T,I]=[0,m,h]:r>=240&&r<300?[x,T,I]=[m,0,h]:[x,T,I]=[h,0,m],[(x+_)*255,(T+_)*255,(I+_)*255]}function FHe(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function BHe(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function qc(t){return[t[0],t[1],t[2]]}function ML(t,e){return[t[0],t[1],t[2],e]}const UHe={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:FHe,rgb:LHe},hsv:{hsl:BHe,hsv:(t,e,n)=>[t,e,n],rgb:P1e},rgb:{hsl:DHe,hsv:NHe,rgb:(t,e,n)=>[t,e,n]}};function Z_(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function VHe(t,e){return t===e?e:p1e(t,e)}function k1e(t,e,n){var r;const o=Z_(e,n);return[e==="rgb"?Ri(t[0],0,o[0]):VHe(t[0],o[0]),Ri(t[1],0,o[1]),Ri(t[2],0,o[2]),Ri((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function jge(t,e,n,r){const o=Z_(e,n),u=Z_(e,r);return t.map((h,m)=>h/o[m]*u[m])}function T1e(t,e,n){const r=jge(t,e.mode,e.type,"int"),o=UHe[e.mode][n.mode](...r);return jge(o,n.mode,"int",n.type)}class Tr{static black(){return new Tr([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=k1e(e,n,this.type)}getComponents(e){return ML(T1e(qc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const _f=nr("colp");class jHe{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(_f()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(_f("hsv"));const o=e.createElement("div");o.classList.add(_f("sv")),this.svPaletteView_=n.svPaletteView,o.appendChild(this.svPaletteView_.element),r.appendChild(o);const u=e.createElement("div");u.classList.add(_f("h")),this.hPaletteView_=n.hPaletteView,u.appendChild(this.hPaletteView_.element),r.appendChild(u),this.element.appendChild(r);const h=e.createElement("div");if(h.classList.add(_f("rgb")),this.textsView_=n.textsView,h.appendChild(this.textsView_.element),this.element.appendChild(h),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const m=e.createElement("div");m.classList.add(_f("a"));const _=e.createElement("div");_.classList.add(_f("ap")),_.appendChild(this.alphaViews_.palette.element),m.appendChild(_);const x=e.createElement("div");x.classList.add(_f("at")),x.appendChild(this.alphaViews_.text.element),m.appendChild(x),this.element.appendChild(m)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function zHe(t){return t==="int"?"int":t==="float"?"float":void 0}function SW(t){return zi(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(zHe)}),expanded:e.optional.boolean,picker:e.optional.custom(C1e),readonly:e.optional.constant(!1)}))}function Hg(t){return t?.1:1}function M1e(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}class EW{constructor(e,n){this.type="float",this.mode=n,this.comps_=k1e(e,n,this.type)}getComponents(e){return ML(T1e(qc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const HHe={int:(t,e)=>new Tr(t,e),float:(t,e)=>new EW(t,e)};function CW(t,e,n){return HHe[n](t,e)}function GHe(t){return t.type==="float"}function WHe(t){return t.type==="int"}function $He(t){const e=t.getComponents(),n=Z_(t.mode,"int");return new Tr([Math.round(Zn(e[0],0,1,0,n[0])),Math.round(Zn(e[1],0,1,0,n[1])),Math.round(Zn(e[2],0,1,0,n[2])),e[3]],t.mode)}function KHe(t){const e=t.getComponents(),n=Z_(t.mode,"int");return new EW([Zn(e[0],0,n[0],0,1),Zn(e[1],0,n[1],0,1),Zn(e[2],0,n[2],0,1),e[3]],t.mode)}function $s(t,e){if(t.type===e)return t;if(WHe(t)&&e==="float")return KHe(t);if(GHe(t)&&e==="int")return $He(t);throw Hs.shouldNeverHappen()}function qHe(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function Nl(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const XHe={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function A1e(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return XHe[r](n)}function I1e(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Nl(e[1],255),Nl(e[2],255),Nl(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function YHe(t){const e=I1e(t);return e?new Tr(e,"rgb"):null}function R1e(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Nl(e[1],255),Nl(e[2],255),Nl(e[3],255),Nl(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function ZHe(t){const e=R1e(t);return e?new Tr(e,"rgb"):null}function O1e(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[A1e(e[1]),Nl(e[2],100),Nl(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function QHe(t){const e=O1e(t);return e?new Tr(e,"hsl"):null}function D1e(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[A1e(e[1]),Nl(e[2],100),Nl(e[3],100),Nl(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function JHe(t){const e=D1e(t);return e?new Tr(e,"hsl"):null}function L1e(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function e9e(t){const e=L1e(t);return e?new Tr(e,"rgb"):null}function N1e(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Zn(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Zn(parseInt(n[4],16),0,255,0,1)]:null}function t9e(t){const e=N1e(t);return e?new Tr(e,"rgb"):null}function F1e(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function zge(t){return e=>{const n=F1e(e);return n?CW(n,"rgb",t):null}}function B1e(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Hge(t){return e=>{const n=B1e(e);return n?CW(n,"rgb",t):null}}const n9e=[{parser:L1e,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:N1e,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:I1e,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:R1e,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:O1e,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:D1e,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:F1e,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:B1e,result:{alpha:!0,mode:"rgb",notation:"object"}}];function r9e(t){return n9e.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function i9e(t,e="int"){const n=r9e(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function GP(t){const e=[e9e,t9e,YHe,ZHe,QHe,JHe];t==="int"&&e.push(zge("int"),Hge("int")),t==="float"&&e.push(zge("float"),Hge("float"));const n=wHe(e);return r=>{const o=n(r);return o?$s(o,t):null}}function o9e(t){const e=GP("int");if(typeof t!="string")return Tr.black();const n=e(t);return n??Tr.black()}function U1e(t){const e=Ri(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function PW(t,e="#"){const n=qc(t.getComponents("rgb")).map(U1e).join("");return`${e}${n}`}function kW(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(U1e).join("");return`${e}${r}`}function V1e(t){const e=Jo(0),n=$s(t,"int");return`rgb(${qc(n.getComponents("rgb")).map(o=>e(o)).join(", ")})`}function r3(t){const e=Jo(2),n=Jo(0);return`rgba(${$s(t,"int").getComponents("rgb").map((u,h)=>(h===3?e:n)(u)).join(", ")})`}function s9e(t){const e=[Jo(0),j3,j3],n=$s(t,"int");return`hsl(${qc(n.getComponents("hsl")).map((o,u)=>e[u](o)).join(", ")})`}function a9e(t){const e=[Jo(0),j3,j3,Jo(2)];return`hsla(${$s(t,"int").getComponents("hsl").map((o,u)=>e[u](o)).join(", ")})`}function j1e(t,e){const n=Jo(e==="float"?2:0),r=["r","g","b"],o=$s(t,e);return`{${qc(o.getComponents("rgb")).map((h,m)=>`${r[m]}: ${n(h)}`).join(", ")}}`}function l9e(t){return e=>j1e(e,t)}function z1e(t,e){const n=Jo(2),r=Jo(e==="float"?2:0),o=["r","g","b","a"];return`{${$s(t,e).getComponents("rgb").map((m,_)=>{const x=_===3?n:r;return`${o[_]}: ${x(m)}`}).join(", ")}}`}function u9e(t){return e=>z1e(e,t)}const c9e=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:PW},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:kW},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:V1e},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:r3},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:s9e},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:a9e},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:l9e(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:u9e(e)}],[])];function H1e(t){return c9e.reduce((e,n)=>e||(qHe(n.format,t)?n.stringifier:null),null)}const mC=nr("apl");class d9e{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(mC()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(mC("b")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(mC("c")),r.appendChild(o),this.colorElem_=o;const u=e.createElement("div");u.classList.add(mC("m")),this.element.appendChild(u),this.markerElem_=u;const h=e.createElement("div");h.classList.add(mC("p")),this.markerElem_.appendChild(h),this.previewElem_=h,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Tr([n[0],n[1],n[2],0],"rgb"),o=new Tr([n[0],n[1],n[2],255],"rgb"),u=["to right",r3(r),r3(o)];this.colorElem_.style.background=`linear-gradient(${u.join(",")})`,this.previewElem_.style.backgroundColor=r3(e);const h=Zn(n[3],0,1,0,100);this.markerElem_.style.left=`${h}%`}onValueChange_(){this.update_()}}class h9e{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new d9e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Oh(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,o=this.value.rawValue,[u,h,m]=o.getComponents("hsv");this.value.setRawValue(new Tr([u,h,m,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ro(Hg(!0),zu(e));if(n===0)return;const r=this.value.rawValue,[o,u,h,m]=r.getComponents("hsv");this.value.setRawValue(new Tr([o,u,h,m+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ro(Hg(!0),zu(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const r_=nr("coltxt");function p9e(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,o)=>{const u=t.createElement("option");return u.textContent=o.text,u.value=o.value,r.appendChild(u),r},t.createDocumentFragment())),e}class f9e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(r_()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(r_("m")),this.modeElem_=p9e(e),this.modeElem_.classList.add(r_("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const o=e.createElement("div");o.classList.add(r_("mm")),o.appendChild(SL(e,"dropdown")),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");u.classList.add(r_("w")),this.element.appendChild(u),this.inputsElem_=u,this.inputViews_=n.inputViews,this.applyInputViews_(),Bl(n.mode,h=>{this.modeElem_.value=h})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){v1e(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(r_("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}}function m9e(t){return Jo(t==="float"?2:0)}function v9e(t,e,n){const r=Z_(t,e)[n];return new jP({min:0,max:r})}function g9e(t,e,n){return new HP(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:Jn.fromObject({formatter:m9e(e.colorType),keyScale:Hg(!1),pointerScale:e.colorType==="float"?.01:1}),value:ji(0,{constraint:v9e(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function y9e(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:ju,viewProps:e.viewProps};return[0,1,2].map(r=>{const o=g9e(t,n,r);return Qg({primary:e.value,secondary:o.value,forward(u){return $s(u,e.colorType).getComponents(e.colorMode)[r]},backward(u,h){const m=e.colorMode,x=$s(u,e.colorType).getComponents(m);x[r]=h;const T=CW(ML(qc(x),x[3]),m,e.colorType);return $s(T,"int")}}),o})}function b9e(t,e){const n=new TL(t,{parser:GP("int"),props:Jn.fromObject({formatter:PW}),value:ji(Tr.black()),viewProps:e.viewProps});return Qg({primary:e.value,secondary:n.value,forward:r=>new Tr(qc(r.getComponents()),r.mode),backward:(r,o)=>new Tr(ML(qc(o.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function _9e(t){return t!=="hex"}class w9e{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=ji(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new f9e(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return _9e(n)?y9e(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):b9e(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}}const E8=nr("hpl");class x9e{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(E8()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(E8("c")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(E8("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=V1e(new Tr([n,100,100],"hsv"));const r=Zn(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class S9e{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new x9e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Oh(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Zn(Ri(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),o=this.value.rawValue,[,u,h,m]=o.getComponents("hsv");this.value.setRawValue(new Tr([r,u,h,m],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ro(Hg(!1),zu(e));if(n===0)return;const r=this.value.rawValue,[o,u,h,m]=r.getComponents("hsv");this.value.setRawValue(new Tr([o+n,u,h,m],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ro(Hg(!1),zu(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const C8=nr("svp"),Gge=64;class E9e{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(C8()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=Gge,r.width=Gge,r.classList.add(C8("c")),this.element.appendChild(r),this.canvasElement=r;const o=e.createElement("div");o.classList.add(C8("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}update_(){const e=D8e(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),o=this.canvasElement.width,u=this.canvasElement.height,h=e.getImageData(0,0,o,u),m=h.data;for(let T=0;T<u;T++)for(let I=0;I<o;I++){const N=Zn(I,0,o,0,100),H=Zn(T,0,u,100,0),Z=P1e(r[0],N,H),j=(T*o+I)*4;m[j]=Z[0],m[j+1]=Z[1],m[j+2]=Z[2],m[j+3]=255}e.putImageData(h,0,0);const _=Zn(r[1],0,100,0,100);this.markerElem_.style.left=`${_}%`;const x=Zn(r[2],0,100,100,0);this.markerElem_.style.top=`${x}%`}onValueChange_(){this.update_()}}class C9e{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new E9e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Oh(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Zn(e.point.x,0,e.bounds.width,0,100),o=Zn(e.point.y,0,e.bounds.height,100,0),[u,,,h]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Tr([u,r,o,h],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){z3(e.key)&&e.preventDefault();const[n,r,o,u]=this.value.rawValue.getComponents("hsv"),h=Hg(!1),m=Ro(h,zu(e)),_=Ro(h,zg(e));m===0&&_===0||this.value.setRawValue(new Tr([n,r+m,o+_,u],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=Hg(!1),r=Ro(n,zu(e)),o=Ro(n,zg(e));r===0&&o===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class P9e{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new S9e(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new C9e(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new h9e(e,{value:this.value,viewProps:this.viewProps}),text:new HP(e,{parser:ju,props:Jn.fromObject({pointerScale:.01,keyScale:.1,formatter:Jo(2)}),value:ji(0,{constraint:new jP({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Qg({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,o)=>{const u=r.getComponents();return u[3]=o,new Tr(u,r.mode)}}),this.textsC_=new w9e(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new jHe(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const P8=nr("colsw");class k9e{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(P8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(P8("sw")),this.element.appendChild(r),this.swatchElem_=r;const o=e.createElement("button");o.classList.add(P8("b")),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=kW(e)}onValueChange_(){this.update_()}}class T9e{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new k9e(e,{value:this.value,viewProps:this.viewProps})}}class TW{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=uw.create(n.expanded),this.swatchC_=new T9e(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new TL(e,{parser:n.parser,props:Jn.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new OHe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new _W(e,{viewProps:this.viewProps}):null;const o=new P9e(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(o.view.element),Qg({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,h)=>h})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),CL(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=pW(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!xL(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function M9e(t){return qc(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function A9e(t){return t.getComponents("rgb").reduce((e,n,r)=>{const o=Math.floor(r===3?n*255:n)&255;return e<<8|o},0)>>>0}function I9e(t){return new Tr([t>>16&255,t>>8&255,t&255],"rgb")}function R9e(t){return new Tr([t>>24&255,t>>16&255,t>>8&255,Zn(t&255,0,255,0,1)],"rgb")}function O9e(t){return typeof t!="number"?Tr.black():I9e(t)}function D9e(t){return typeof t!="number"?Tr.black():R9e(t)}function i3(t,e){return typeof t!="object"||wi(t)?!1:e in t&&typeof t[e]=="number"}function G1e(t){return i3(t,"r")&&i3(t,"g")&&i3(t,"b")}function W1e(t){return G1e(t)&&i3(t,"a")}function $1e(t){return G1e(t)}function MW(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0}function Wge(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function L9e(t){const e=H1e(t);return e?(n,r)=>{cm(n,e(r))}:null}function N9e(t){const e=t?A9e:M9e;return(n,r)=>{cm(n,e(r))}}function F9e(t,e,n){const o=$s(e,n).toRgbaObject();t.writeProperty("r",o.r),t.writeProperty("g",o.g),t.writeProperty("b",o.b),t.writeProperty("a",o.a)}function B9e(t,e,n){const o=$s(e,n).toRgbaObject();t.writeProperty("r",o.r),t.writeProperty("g",o.g),t.writeProperty("b",o.b)}function U9e(t,e){return(n,r)=>{t?F9e(n,r,e):B9e(n,r,e)}}function V9e(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function j9e(t){return t?e=>kW(e,"0x"):e=>PW(e,"0x")}function z9e(t){return"color"in t||t.view==="color"}Ji({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!z9e(e))return null;const n=SW(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:V9e(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?D9e:O9e,equals:MW,writer:t=>N9e(t.params.supportsAlpha)},controller:t=>{var e,n;return new TW(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:j9e(t.params.supportsAlpha),parser:GP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function H9e(t,e){if(!$1e(t))return $s(Tr.black(),e);if(e==="int"){const n=Wge(t);return new Tr(n,"rgb")}if(e==="float"){const n=Wge(t);return new EW(n,"rgb")}return $s(Tr.black(),"int")}function G9e(t){return W1e(t)}function W9e(t){return e=>{const n=H9e(e,t);return $s(n,"int")}}function $9e(t,e){return n=>t?z1e(n,e):j1e(n,e)}Ji({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!$1e(t))return null;const r=SW(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=M1e(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>W9e(t.params.colorType),equals:MW,writer:t=>U9e(G9e(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=W1e(t.initialValue);return new TW(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:$9e(r,t.params.colorType),parser:GP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}});Ji({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=i9e(t,M1e(e));if(!n)return null;const r=H1e(n);if(!r)return null;const o=SW(e);return o?{initialValue:t,params:Object.assign(Object.assign({},o),{format:n,stringifier:r})}:null},binding:{reader:()=>o9e,equals:MW,writer:t=>{const e=L9e(t.params.format);if(!e)throw Hs.notBindable();return e}},controller:t=>{var e,n;return new TW(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:GP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});class AL{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,o)=>{var u,h;return(h=(u=this.components[o])===null||u===void 0?void 0:u.constrain(r))!==null&&h!==void 0?h:r});return this.asm_.fromComponents(n)}}const $ge=nr("pndtxt");class K9e{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add($ge()),this.textViews.forEach(r=>{const o=e.createElement("div");o.classList.add($ge("a")),o.appendChild(r.element),this.element.appendChild(o)})}}function q9e(t,e,n){return new HP(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:ji(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class dw{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,o)=>q9e(e,n,o)),this.acs_.forEach((r,o)=>{Qg({primary:this.value,secondary:r.value,forward:u=>n.assembly.toComponents(u)[o],backward:(u,h)=>{const m=n.assembly.toComponents(u);return m[o]=h,n.assembly.fromComponents(m)}})}),this.view=new K9e(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}}class X9e extends dW{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function Y9e(t,e){const n=[],r=sW(t,e);r&&n.push(r);const o=aW(t);o&&n.push(o);const u=bW(t.options);return u&&n.push(u),new cw(n)}Ji({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=zi(e,r=>Object.assign(Object.assign({},uW(r)),{options:r.optional.custom(kL),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>oW,constraint:t=>Y9e(t.params,t.initialValue),writer:t=>cm},controller:t=>{const e=t.value,n=t.constraint,r=n&&vP(n,PL);if(r)return new Y_(t.document,{props:new Jn({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const o=lW(t.params,e.rawValue),u=n&&vP(n,jP);return u?new Vge(t.document,Object.assign(Object.assign({},THe(Object.assign(Object.assign({},o),{keyScale:ji(o.keyScale),max:u.values.value("max"),min:u.values.value("min")}))),{parser:ju,value:e,viewProps:t.viewProps})):new HP(t.document,{parser:ju,props:Jn.fromObject(o),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof Vge?new X9e(t.controller):t.controller.valueController instanceof Y_?new yW(t.controller):null}});class qf{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(wi(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}}const K1e={toComponents:t=>t.getComponents(),fromComponents:t=>new qf(...t)},i_=nr("p2d");class Z9e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(i_()),n.viewProps.bindClassModifiers(this.element),Bl(n.expanded,um(this.element,i_(void 0,"expanded")));const r=e.createElement("div");r.classList.add(i_("h")),this.element.appendChild(r);const o=e.createElement("button");o.classList.add(i_("b")),o.appendChild(SL(e,"p2dpad")),n.viewProps.bindDisabled(o),r.appendChild(o),this.buttonElement=o;const u=e.createElement("div");if(u.classList.add(i_("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const h=e.createElement("div");h.classList.add(i_("p")),this.element.appendChild(h),this.pickerElement=h}else this.pickerElement=null}}const wf=nr("p2dp");class Q9e{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(wf()),n.layout==="popup"&&this.element.classList.add(wf(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(wf("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const o=e.createElementNS(Ao,"svg");o.classList.add(wf("g")),this.padElement.appendChild(o),this.svgElem_=o;const u=e.createElementNS(Ao,"line");u.classList.add(wf("ax")),u.setAttributeNS(null,"x1","0"),u.setAttributeNS(null,"y1","50%"),u.setAttributeNS(null,"x2","100%"),u.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(u);const h=e.createElementNS(Ao,"line");h.classList.add(wf("ax")),h.setAttributeNS(null,"x1","50%"),h.setAttributeNS(null,"y1","0"),h.setAttributeNS(null,"x2","50%"),h.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(h);const m=e.createElementNS(Ao,"line");m.classList.add(wf("l")),m.setAttributeNS(null,"x1","50%"),m.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(m),this.lineElem_=m;const _=e.createElement("div");_.classList.add(wf("m")),this.padElement.appendChild(_),this.markerElem_=_,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),o=Zn(e,-r,+r,0,100),u=Zn(n,-r,+r,0,100),h=this.props_.get("invertsY")?100-u:u;this.lineElem_.setAttributeNS(null,"x2",`${o}%`),this.lineElem_.setAttributeNS(null,"y2",`${h}%`),this.markerElem_.style.left=`${o}%`,this.markerElem_.style.top=`${h}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function Kge(t,e,n){return[Ro(e[0],zu(t)),Ro(e[1],zg(t))*(n?1:-1)]}class J9e{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Q9e(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Oh(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),o=Zn(e.point.x,0,e.bounds.width,-r,+r),u=Zn(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new qf(o,u),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){z3(e.key)&&e.preventDefault();const[n,r]=Kge(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new qf(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=Kge(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class eGe{constructor(e,n){var r,o;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=uw.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new _W(e,{viewProps:this.viewProps}):null;const u=new J9e(e,{layout:n.pickerLayout,props:new Jn({invertsY:ji(n.invertsY),max:ji(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});u.view.allFocusableElements.forEach(h=>{h.addEventListener("blur",this.onPopupChildBlur_),h.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=u,this.textC_=new dw(e,{assembly:K1e,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new Z9e(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(o=this.view.buttonElement)===null||o===void 0||o.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Qg({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:h=>h,backward:(h,m)=>m})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),CL(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=pW(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!xL(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function tGe(t){return qf.isObject(t)?new qf(t.x,t.y):new qf}function nGe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function rGe(t,e){return new AL({assembly:K1e,components:[bh(Object.assign(Object.assign({},t),t.x),e.x),bh(Object.assign(Object.assign({},t),t.y),e.y)]})}function qge(t,e){var n,r;if(!wi(t.min)||!wi(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const o=f1e(t);return Math.max(Math.abs(o)*10,Math.abs(e)*10)}function iGe(t,e){var n,r;const o=qge(jg(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),u=qge(jg(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(o,u)}function oGe(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}Ji({id:"input-point2d",type:"input",accept:(t,e)=>{if(!qf.isObject(t))return null;const n=zi(e,r=>Object.assign(Object.assign({},gP(r)),{expanded:r.optional.boolean,picker:r.optional.custom(C1e),readonly:r.optional.constant(!1),x:r.optional.custom(Lf),y:r.optional.object(Object.assign(Object.assign({},gP(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>tGe,constraint:t=>rGe(t.params,t.initialValue),equals:qf.equals,writer:()=>nGe},controller:t=>{var e,n;const r=t.document,o=t.value,u=t.constraint,h=[t.params.x,t.params.y];return new eGe(r,{axes:o.rawValue.getComponents().map((m,_)=>{var x;return cW({constraint:u.components[_],initialValue:m,params:jg(t.params,(x=h[_])!==null&&x!==void 0?x:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:oGe(t.params),max:iGe(t.params,o.rawValue),parser:ju,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:o,viewProps:t.viewProps})}});class N_{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(wi(e))return!1;const n=e.x,r=e.y,o=e.z;return!(typeof n!="number"||typeof r!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const q1e={toComponents:t=>t.getComponents(),fromComponents:t=>new N_(...t)};function sGe(t){return N_.isObject(t)?new N_(t.x,t.y,t.z):new N_}function aGe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function lGe(t,e){return new AL({assembly:q1e,components:[bh(Object.assign(Object.assign({},t),t.x),e.x),bh(Object.assign(Object.assign({},t),t.y),e.y),bh(Object.assign(Object.assign({},t),t.z),e.z)]})}Ji({id:"input-point3d",type:"input",accept:(t,e)=>{if(!N_.isObject(t))return null;const n=zi(e,r=>Object.assign(Object.assign({},gP(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Lf),y:r.optional.custom(Lf),z:r.optional.custom(Lf)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>sGe,constraint:t=>lGe(t.params,t.initialValue),equals:N_.equals,writer:t=>aGe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new dw(t.document,{assembly:q1e,axes:e.rawValue.getComponents().map((o,u)=>{var h;return cW({constraint:n.components[u],initialValue:o,params:jg(t.params,(h=r[u])!==null&&h!==void 0?h:{})})}),parser:ju,value:e,viewProps:t.viewProps})}});class F_{constructor(e=0,n=0,r=0,o=0){this.x=e,this.y=n,this.z=r,this.w=o}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(wi(e))return!1;const n=e.x,r=e.y,o=e.z,u=e.w;return!(typeof n!="number"||typeof r!="number"||typeof o!="number"||typeof u!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const X1e={toComponents:t=>t.getComponents(),fromComponents:t=>new F_(...t)};function uGe(t){return F_.isObject(t)?new F_(t.x,t.y,t.z,t.w):new F_}function cGe(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function dGe(t,e){return new AL({assembly:X1e,components:[bh(Object.assign(Object.assign({},t),t.x),e.x),bh(Object.assign(Object.assign({},t),t.y),e.y),bh(Object.assign(Object.assign({},t),t.z),e.z),bh(Object.assign(Object.assign({},t),t.w),e.w)]})}Ji({id:"input-point4d",type:"input",accept:(t,e)=>{if(!F_.isObject(t))return null;const n=zi(e,r=>Object.assign(Object.assign({},gP(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Lf),x:r.optional.custom(Lf),y:r.optional.custom(Lf),z:r.optional.custom(Lf)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>uGe,constraint:t=>dGe(t.params,t.initialValue),equals:F_.equals,writer:t=>cGe},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new dw(t.document,{assembly:X1e,axes:e.rawValue.getComponents().map((o,u)=>{var h;return cW({constraint:n.components[u],initialValue:o,params:jg(t.params,(h=r[u])!==null&&h!==void 0?h:{})})}),parser:ju,value:e,viewProps:t.viewProps})}});function hGe(t){const e=[],n=bW(t.options);return n&&e.push(n),new cw(e)}Ji({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=zi(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(kL)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>xW,constraint:t=>hGe(t.params),writer:t=>cm},controller:t=>{const e=t.document,n=t.value,r=t.constraint,o=r&&vP(r,PL);return o?new Y_(e,{props:new Jn({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new TL(e,{parser:u=>u,props:Jn.fromObject({formatter:r9}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof Y_?new yW(t.controller):null}});const WP={monitor:{defaultInterval:200,defaultRows:3}},Xge=nr("mll");class pGe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Xge()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(Xge("i")),r.style.height=`calc(var(${S1e("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(o=>{o!==void 0&&r.push(this.formatter_(o))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class AW{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new pGe(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const Yge=nr("sgl");class fGe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Yge()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(Yge("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class IW{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new fGe(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}Ji({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=zi(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>wW},controller:t=>{var e;return t.value.rawValue.length===1?new IW(t.document,{formatter:Uge,value:t.value,viewProps:t.viewProps}):new AW(t.document,{formatter:Uge,rows:(e=t.params.rows)!==null&&e!==void 0?e:WP.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});class mGe extends dW{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const xf=nr("grl");class vGe{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(xf()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(Ao,"svg");r.classList.add(xf("g")),r.style.height=`calc(var(${S1e("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const o=e.createElementNS(Ao,"polyline");this.svgElem_.appendChild(o),this.lineElem_=o;const u=e.createElement("div");u.classList.add(xf("t"),nr("tt")()),this.element.appendChild(u),this.tooltipElem_=u,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),o=this.props_.get("max"),u=[];this.value.rawValue.forEach((T,I)=>{if(T===void 0)return;const N=Zn(I,0,n,0,e.width),H=Zn(T,r,o,e.height,0);u.push([N,H].join(","))}),this.lineElem_.setAttributeNS(null,"points",u.join(" "));const h=this.tooltipElem_,m=this.value.rawValue[this.cursor_.rawValue];if(m===void 0){h.classList.remove(xf("t","a"));return}const _=Zn(this.cursor_.rawValue,0,n,0,e.width),x=Zn(m,r,o,e.height,0);h.style.left=`${_}px`,h.style.top=`${x}px`,h.textContent=`${this.formatter_(m)}`,h.classList.contains(xf("t","a"))||(h.classList.add(xf("t","a"),xf("t","in")),U3(h),h.classList.remove(xf("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class RW{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=ji(-1),this.view=new vGe(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!xL(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Oh(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Hu(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Gu(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Zn(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Zn(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function i9(t){return wi(t.format)?Jo(2):t.format}function gGe(t){var e;return t.value.rawValue.length===1?new IW(t.document,{formatter:i9(t.params),value:t.value,viewProps:t.viewProps}):new AW(t.document,{formatter:i9(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:WP.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function yGe(t){var e,n,r;return new RW(t.document,{formatter:i9(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:WP.monitor.defaultRows,props:Jn.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function Zge(t){return t.view==="graph"}Ji({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=zi(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>Zge(t)?64:1,reader:t=>oW},controller:t=>Zge(t.params)?yGe(t):gGe(t),api:t=>t.controller.valueController instanceof RW?new mGe(t.controller):null});Ji({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=zi(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>xW},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new AW(t.document,{formatter:r9,rows:(e=t.params.rows)!==null&&e!==void 0?e:WP.monitor.defaultRows,value:n,viewProps:t.viewProps}):new IW(t.document,{formatter:r9,value:n,viewProps:t.viewProps})}});class Y1e{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller_.emitter.on(e,()=>{r(new lw(this))}),this}}class bGe extends lw{constructor(e,n,r){super(e),this.cell=n,this.index=r}}class Z1e extends Zg{constructor(e){super(e),this.cellToApiMap_=new Map,this.emitter_=new xs;const n=this.controller.valueController;n.cellControllers.forEach((r,o)=>{const u=new Y1e(r);this.cellToApiMap_.set(r,u),r.emitter.on("click",()=>{const h=o%n.size[0],m=Math.floor(o/n.size[0]);this.emitter_.emit("click",{event:new bGe(this,u,[h,m])})})})}cell(e,n){const r=this.controller.valueController,o=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(o)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o.event)}),this}}class Q1e{constructor(e,n){this.size=n.size;const[r,o]=this.size,u=[];for(let h=0;h<o;h++)for(let m=0;m<r;m++){const _=new b1e(e,{props:Jn.fromObject(Object.assign({},n.cellConfig(m,h))),viewProps:Ih.create()});u.push(_)}this.cellCs_=u,this.viewProps=Ih.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(h=>{h.viewProps.set("disposed",!0)})}),this.view=new E1e(e,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(h=>{this.view.element.appendChild(h.view.element)})}get cellControllers(){return this.cellCs_}}class Qge extends zP{constructor(e,n){const r=n.valueController,o=new EL(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:o.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=o}}const _Ge=Ji({id:"buttongrid",type:"blade",accept(t){const e=zi(t,n=>({cells:n.required.function,size:n.required.array(n.required.number),view:n.required.constant("buttongrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new Qge(t.document,{blade:t.blade,labelProps:Jn.fromObject({label:t.params.label}),valueController:new Q1e(t.document,{cellConfig:t.params.cells,size:t.params.size})})},api(t){return t.controller instanceof Qge?new Z1e(t.controller):null}});class J1e extends Zg{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get value(){return this.controller.valueController.value.rawValue}set value(e){this.controller.valueController.value.rawValue=e}on(e,n){const r=n.bind(this);return this.controller.valueController.value.emitter.on(e,o=>{r(new wL(this,o.rawValue,o.options.last))}),this}}function Ml(t,e,n){return t*(1-n)+e*n}const wGe=20,xGe=.001,k8=100;function SGe(t,e){let n=.25,r=.5,o=-1;for(let u=0;u<wGe;u++){const[h,m]=t.curve(r);if(r+=n*(h<e?1:-1),o=m,n*=.5,Math.abs(e-h)<xGe)break}return o}class nm{constructor(e=0,n=0,r=1,o=1){this.cache_=[],this.comps_=[e,n,r,o]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(e){return wi(e)||!Array.isArray(e)?!1:typeof e[0]=="number"&&typeof e[1]=="number"&&typeof e[2]=="number"&&typeof e[3]=="number"}static equals(e,n){return e.x1===n.x1&&e.y1===n.y1&&e.x2===n.x2&&e.y2===n.y2}curve(e){const n=Ml(0,this.x1,e),r=Ml(0,this.y1,e),o=Ml(this.x1,this.x2,e),u=Ml(this.y1,this.y2,e),h=Ml(this.x2,1,e),m=Ml(this.y2,1,e),_=Ml(n,o,e),x=Ml(r,u,e),T=Ml(o,h,e),I=Ml(u,m,e);return[Ml(_,T,e),Ml(x,I,e)]}y(e){if(this.cache_.length===0){const n=[];for(let r=0;r<k8;r++)n.push(SGe(this,Zn(r,0,k8-1,0,1)));this.cache_=n}return this.cache_[Math.round(Zn(Ri(e,0,1),0,1,0,k8-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const OW={toComponents:t=>t.toObject(),fromComponents:t=>new nm(...t)};function EGe(t){const e=Jo(2);return`cubic-bezier(${t.toObject().map(r=>e(r)).join(", ")})`}const Jge=[0,.5,.5,1];function CGe(t){const e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new nm(...Jge);const n=[e[1],e[2],e[3],e[4]].reduce((r,o)=>{if(!r)return null;const u=Number(o);return isNaN(u)?null:[...r,u]},[]);return new nm(...n??Jge)}const lg=nr("cbz");class exe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(lg()),n.viewProps.bindClassModifiers(this.element),n.foldable.bindExpandedClass(this.element,lg(void 0,"expanded")),jl(n.foldable,"completed",um(this.element,lg(void 0,"cpl")));const r=e.createElement("div");r.classList.add(lg("h")),this.element.appendChild(r);const o=e.createElement("button");o.classList.add(lg("b")),n.viewProps.bindDisabled(o);const u=e.createElementNS(Ao,"svg");u.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',o.appendChild(u),r.appendChild(o),this.buttonElement=o;const h=e.createElement("div");if(h.classList.add(lg("t")),r.appendChild(h),this.textElement=h,n.pickerLayout==="inline"){const m=e.createElement("div");m.classList.add(lg("p")),this.element.appendChild(m),this.pickerElement=m}else this.pickerElement=null}}const T8=nr("cbzp");class txe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(T8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(T8("g")),this.element.appendChild(r),this.graphElement=r;const o=e.createElement("div");o.classList.add(T8("t")),this.element.appendChild(o),this.textElement=o}}function nxe(t,e){const n=new MutationObserver(o=>{for(const u of o)u.type==="childList"&&u.addedNodes.forEach(h=>{h.contains(h)&&(e(),n.disconnect())})}),r=t.ownerDocument;n.observe(r.body,{attributes:!0,childList:!0,subtree:!0})}const Sf=nr("cbzg");function PGe(t,e){return n=>e(t(n))}class rxe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Sf()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(Sf("p")),this.element.appendChild(r),this.previewElement=r;const o=e.createElementNS(Ao,"svg");o.classList.add(Sf("g")),this.element.appendChild(o),this.svgElem_=o;const u=e.createElementNS(Ao,"path");u.classList.add(Sf("u")),this.svgElem_.appendChild(u),this.guideElem_=u;const h=e.createElementNS(Ao,"polyline");h.classList.add(Sf("l")),this.svgElem_.appendChild(h),this.lineElem_=h,this.handleElems_=[e.createElement("div"),e.createElement("div")],this.handleElems_.forEach(m=>{m.classList.add(Sf("h")),this.element.appendChild(m)}),this.vectorElems_=[e.createElementNS(Ao,"line"),e.createElementNS(Ao,"line")],this.vectorElems_.forEach(m=>{m.classList.add(Sf("v")),this.svgElem_.appendChild(m)}),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=n.selection,this.handleElems_.forEach((m,_)=>{Bl(this.sel_,PGe(x=>x===_,um(m,Sf("h","sel"))))}),nxe(this.element,()=>{this.refresh()})}getVertMargin_(e){return e*.25}valueToPosition(e,n){const r=this.element.getBoundingClientRect(),o=r.width,u=r.height,h=this.getVertMargin_(u);return{x:Zn(e,0,1,0,o),y:Zn(n,0,1,u-h,h)}}positionToValue(e,n){const r=this.element.getBoundingClientRect(),o=r.width,u=r.height,h=this.getVertMargin_(u);return{x:Ri(Zn(e,0,o,0,1),0,1),y:Zn(n,u-h,h,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(u=>{const h=this.valueToPosition(0,u),m=this.valueToPosition(1,u);return[`M ${h.x},${h.y}`,`L ${m.x},${m.y}`].join(" ")}).join(" "));const e=this.value_.rawValue,n=[];let r=0;for(;;){const u=this.valueToPosition(...e.curve(r));if(n.push([u.x,u.y].join(",")),r>=1)break;r=Math.min(r+.05,1)}this.lineElem_.setAttributeNS(null,"points",n.join(" "));const o=e.toObject();[0,1].forEach(u=>{const h=this.valueToPosition(u,u),m=this.valueToPosition(o[u*2],o[u*2+1]),_=this.vectorElems_[u];_.setAttributeNS(null,"x1",String(h.x)),_.setAttributeNS(null,"y1",String(h.y)),_.setAttributeNS(null,"x2",String(m.x)),_.setAttributeNS(null,"y2",String(m.y));const x=this.handleElems_[u];x.style.left=`${m.x}px`,x.style.top=`${m.y}px`})}onValueChange_(){this.refresh()}}const e0e=24,t0e=400,n0e=1e3,o_=nr("cbzprv");class ixe{constructor(e,n){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(o_()),n.viewProps.bindClassModifiers(this.element);const r=e.createElementNS(Ao,"svg");r.classList.add(o_("g")),this.element.appendChild(r),this.svgElem_=r;const o=e.createElementNS(Ao,"path");o.classList.add(o_("t")),this.svgElem_.appendChild(o),this.ticksElem_=o;const u=e.createElement("div");u.classList.add(o_("m")),this.element.appendChild(u),this.markerElem_=u,this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.viewProps.handleDispose(this.onDispose_),nxe(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(o_("m","a")),this.startTime_=new Date().getTime()+t0e,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(o_("m","a"))}onDispose_(){this.stop()}updateMarker_(e){const n=this.value_.rawValue.y(Ri(e,0,1));this.markerElem_.style.left=`${n*100}%`}refresh(){const e=this.svgElem_.getBoundingClientRect(),n=e.width,r=e.height,o=[],u=this.value_.rawValue;for(let h=0;h<e0e;h++){const m=Zn(h,0,e0e-1,0,1),_=Zn(u.y(m),0,1,0,n);o.push(`M ${_},0 v${r}`)}this.ticksElem_.setAttributeNS(null,"d",o.join(" "))}onTimer_(){if(this.startTime_===null)return;const e=new Date().getTime()-this.startTime_,n=e/n0e;this.updateMarker_(n),e>n0e+t0e&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function o9(t,e,n,r){const o=n-t,u=r-e;return Math.sqrt(o*o+u*u)}function kGe(t,e,n,r){const o=o9(t,e,n,r),u=Math.atan2(r-e,n-t),h=Math.round(u/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(h)*o,y:e+Math.sin(h)*o}}class oxe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.keyScale_=n.keyScale,this.value=n.value,this.sel_=ji(0),this.viewProps=n.viewProps,this.view=new rxe(e,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new ixe(e,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",o=>{o.stopImmediatePropagation(),o.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const r=new Oh(this.view.element);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(e,n,r){const o=this.sel_.rawValue,u=this.value.rawValue.toObject(),h=this.view.positionToValue(e.x,e.y),m=n?kGe(o,o,h.x,h.y):h;u[o*2]=m.x,u[o*2+1]=m.y,this.value.setRawValue(new nm(...u),r)}onPointerDown_(e){const n=e.data;if(!n.point)return;const r=this.value.rawValue,o=this.view.valueToPosition(r.x1,r.y1),u=o9(n.point.x,n.point.y,o.x,o.y),h=this.view.valueToPosition(r.x2,r.y2),m=o9(n.point.x,n.point.y,h.x,h.y);this.sel_.rawValue=u<=m?0:1,this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(e){z3(e.key)&&e.preventDefault();const n=this.sel_.rawValue,r=this.value.rawValue.toObject(),o=this.keyScale_.rawValue;r[n*2]+=Ro(o,zu(e)),r[n*2+1]+=Ro(o,zg(e)),this.value.setRawValue(new nm(...r),{forceEmit:!1,last:!1})}onKeyUp_(e){z3(e.key)&&e.preventDefault();const n=this.keyScale_.rawValue,r=Ro(n,zu(e)),o=Ro(n,zg(e));r===0&&o===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class sxe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new txe(e,{viewProps:this.viewProps}),this.gc_=new oxe(e,{keyScale:n.axis.textProps.value("keyScale"),value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const r=Object.assign(Object.assign({},n.axis),{constraint:new nW({max:1,min:0})}),o=Object.assign(Object.assign({},n.axis),{constraint:void 0});this.tc_=new dw(e,{assembly:OW,axes:[r,o,r,o],parser:ju,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(e=>e.inputElement)]}refresh(){this.gc_.refresh()}}class s9{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=uw.create(n.expanded),this.view=new exe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new TL(e,{parser:CGe,props:Jn.fromObject({formatter:EGe}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=n.pickerLayout==="popup"?new _W(e,{viewProps:this.viewProps}):null;const r=new sxe(e,{axis:n.axis,value:this.value,viewProps:this.viewProps});r.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Bl(this.popC_.shows,o=>{o&&r.refresh()}),Qg({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,u)=>u})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),CL(this.foldable_,this.view.pickerElement))}onButtonBlur_(e){if(!this.popC_)return;const n=e.relatedTarget;(!n||!this.popC_.view.element.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=pW(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!xL(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_&&e.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function TGe(){return new AL({assembly:OW,components:[0,1,2,3].map(t=>t%2===0?new nW({min:0,max:1}):void 0)})}const MGe=Ji({id:"cubicbezier",type:"blade",accept(t){const e=zi(t,n=>({value:n.required.array(n.required.number),view:n.required.constant("cubicbezier"),expanded:n.optional.boolean,label:n.optional.string,picker:n.optional.custom(r=>r==="inline"||r==="popup"?r:void 0)}));return e?{params:e}:null},controller(t){var e,n;const r=new nm(...t.params.value),o=ji(r,{constraint:TGe(),equals:nm.equals}),u=new s9(t.document,{axis:{textProps:Jn.fromObject({keyScale:.1,pointerScale:.01,formatter:Jo(2)})},expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:o,viewProps:t.viewProps});return new V3(t.document,{blade:t.blade,props:Jn.fromObject({label:t.params.label}),value:o,valueController:u})},api(t){return!(t.controller instanceof V3)||!(t.controller.valueController instanceof s9)?null:new J1e(t.controller)}});class axe extends Zg{begin(){this.controller.valueController.begin()}end(){this.controller.valueController.end()}}const r0e=20;class lxe{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(e){this.start_=e.getTime()}calculateFps_(e){if(this.timestamps_.length===0)return null;const n=this.timestamps_[0];return 1e3*(this.frameCount_-n.frameCount)/(e-n.time)}compactTimestamps_(){if(this.timestamps_.length<=r0e)return;const e=this.timestamps_.length-r0e;this.timestamps_.splice(0,e);const n=this.timestamps_[0].frameCount;this.timestamps_.forEach(r=>{r.frameCount-=n}),this.frameCount_-=n}end(e){if(this.start_===null)return;const n=e.getTime();this.duration_=n-this.start_,this.start_=null,this.fps_=this.calculateFps_(n),this.timestamps_.push({frameCount:this.frameCount_,time:n}),++this.frameCount_,this.compactTimestamps_()}}const vC=nr("fps");class uxe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(vC()),n.viewProps.bindClassModifiers(this.element),this.graphElement=e.createElement("div"),this.graphElement.classList.add(vC("g")),this.element.appendChild(this.graphElement);const r=e.createElement("div");r.classList.add(vC("l")),this.element.appendChild(r);const o=e.createElement("span");o.classList.add(vC("v")),o.textContent="--",r.appendChild(o),this.valueElement=o;const u=e.createElement("span");u.classList.add(vC("u")),u.textContent="FPS",r.appendChild(u)}}class cxe{constructor(e,n){this.stopwatch_=new lxe,this.onTick_=this.onTick_.bind(this),this.ticker_=n.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=n.value,this.viewProps=n.viewProps,this.view=new uxe(e,{viewProps:this.viewProps}),this.graphC_=new RW(e,{formatter:Jo(0),props:Jn.fromObject({max:n.maxValue,min:n.minValue}),rows:n.rows,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()})}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const e=this.stopwatch_.fps;if(e!==null){const n=this.value_.rawValue;this.value_.rawValue=z8e(n,e),this.view.valueElement.textContent=e.toFixed(0)}}}class i0e extends zP{constructor(e,n){const r=n.valueController,o=new EL(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:o.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=o}}function AGe(t,e){return e===0?new mHe:new vHe(t,e??WP.monitor.defaultInterval)}const IGe=Ji({id:"fpsgraph",type:"blade",accept(t){const e=zi(t,n=>({view:n.required.constant("fpsgraph"),interval:n.optional.number,label:n.optional.string,rows:n.optional.number,max:n.optional.number,min:n.optional.number}));return e?{params:e}:null},controller(t){var e,n,r,o;const u=(e=t.params.interval)!==null&&e!==void 0?e:500;return new i0e(t.document,{blade:t.blade,labelProps:Jn.fromObject({label:t.params.label}),valueController:new cxe(t.document,{rows:(n=t.params.rows)!==null&&n!==void 0?n:2,maxValue:(r=t.params.max)!==null&&r!==void 0?r:90,minValue:(o=t.params.min)!==null&&o!==void 0?o:0,ticker:AGe(t.document,u),value:ji(V8e(80)),viewProps:t.viewProps})})},api(t){return t.controller instanceof i0e?new axe(t.controller):null}});class ja{constructor(e,n){this.min=e,this.max=n}static isObject(e){if(typeof e!="object"||e===null)return!1;const n=e.min,r=e.max;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.min===n.min&&e.max===n.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const DW={fromComponents:t=>new ja(t[0],t[1]),toComponents:t=>[t.min,t.max]};class LW{constructor(e){this.edge=e}constrain(e){var n,r,o,u,h,m,_,x;if(e.min<=e.max)return new ja((r=(n=this.edge)===null||n===void 0?void 0:n.constrain(e.min))!==null&&r!==void 0?r:e.min,(u=(o=this.edge)===null||o===void 0?void 0:o.constrain(e.max))!==null&&u!==void 0?u:e.max);const T=(e.min+e.max)/2;return new ja((m=(h=this.edge)===null||h===void 0?void 0:h.constrain(T))!==null&&m!==void 0?m:T,(x=(_=this.edge)===null||_===void 0?void 0:_.constrain(T))!==null&&x!==void 0?x:T)}}const M8=nr("rsltxt");class dxe{constructor(e,n){this.sliderView_=n.sliderView,this.textView_=n.textView,this.element=e.createElement("div"),this.element.classList.add(M8());const r=e.createElement("div");r.classList.add(M8("s")),r.appendChild(this.sliderView_.element),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(M8("t")),o.appendChild(this.textView_.element),this.element.appendChild(o)}}const ug=nr("rsl");class hxe{constructor(e,n){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=n.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=e.createElement("div"),this.element.classList.add(ug()),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_);const r=e.createElement("div");r.classList.add(ug("t")),this.element.appendChild(r),this.trackElement=r;const o=e.createElement("div");o.classList.add(ug("b")),r.appendChild(o),this.barElement=o;const u=["min","max"].map(h=>{const m=e.createElement("div");return m.classList.add(ug("k"),ug("k",h)),r.appendChild(m),m});this.knobElements=[u[0],u[1]],this.update_()}valueToX_(e){const n=this.sliderProps_.get("min"),r=this.sliderProps_.get("max");return Ri(Zn(e,n,r,0,1),0,1)*100}update_(){const e=this.value_.rawValue;e.length===0?this.element.classList.add(ug(void 0,"zero")):this.element.classList.remove(ug(void 0,"zero"));const n=[this.valueToX_(e.min),this.valueToX_(e.max)];this.barElement.style.left=`${n[0]}%`,this.barElement.style.right=`${100-n[1]}%`,this.knobElements.forEach((r,o)=>{r.style.left=`${n[o]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class pxe{constructor(e,n){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=n.sliderProps,this.viewProps=n.viewProps,this.value=n.value,this.view=new hxe(e,{sliderProps:this.sliderProps,value:this.value,viewProps:n.viewProps});const r=new Oh(this.view.trackElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(e){if(!e.point)return null;const n=(e.point.x+this.ofs_())/e.bounds.width,r=this.sliderProps.get("min"),o=this.sliderProps.get("max");return Zn(n,0,1,r,o)}onPointerDown_(e){if(!e.data.point)return;const n=e.data.point.x/e.data.bounds.width,r=this.value.rawValue,o=this.sliderProps.get("min"),u=this.sliderProps.get("max"),h=Zn(r.min,o,u,0,1),m=Zn(r.max,o,u,0,1);Math.abs(m-n)<=.025?this.grabbing_="max":Math.abs(h-n)<=.025?this.grabbing_="min":n>=h&&n<=m?(this.grabbing_="length",this.grabOffset_=Zn(n-h,0,1,0,u-o)):n<h?(this.grabbing_="min",this.onPointerMove_(e)):n>m&&(this.grabbing_="max",this.onPointerMove_(e))}applyPointToValue_(e,n){const r=this.valueFromData_(e);if(r===null)return;const o=this.sliderProps.get("min"),u=this.sliderProps.get("max");if(this.grabbing_==="min")this.value.setRawValue(new ja(r,this.value.rawValue.max),n);else if(this.grabbing_==="max")this.value.setRawValue(new ja(this.value.rawValue.min,r),n);else if(this.grabbing_==="length"){const h=this.value.rawValue.length;let m=r-this.grabOffset_,_=m+h;m<o?(m=o,_=o+h):_>u&&(m=u-h,_=u),this.value.setRawValue(new ja(m,_),n)}}onPointerMove_(e){this.applyPointToValue_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.applyPointToValue_(e.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class fxe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sc_=new pxe(e,n);const r={constraint:n.constraint,textProps:n.textProps};this.tc_=new dw(e,{assembly:DW,axes:[r,r],parser:n.parser,value:this.value,viewProps:n.viewProps}),this.view=new dxe(e,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function RGe(t){return ja.isObject(t)?new ja(t.min,t.max):new ja(0,0)}function OGe(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function DGe(t){const e=[],n=aW(t);n&&e.push(n);const r=sW(t);return r&&e.push(r),new LW(new cw(e))}const LGe=Ji({id:"input-interval",type:"input",accept:(t,e)=>{if(!ja.isObject(t))return null;const n=zi(e,r=>Object.assign(Object.assign({},uW(r)),{readonly:r.optional.constant(!1)}));return n?{initialValue:new ja(t.min,t.max),params:n}:null},binding:{reader:t=>RGe,constraint:t=>DGe(t.params),equals:ja.equals,writer:t=>OGe},controller(t){const e=t.value,n=t.constraint;if(!(n instanceof LW))throw Hs.shouldNeverHappen();const r=(e.rawValue.min+e.rawValue.max)/2,o=Jn.fromObject(lW(t.params,r)),u=n.edge&&vP(n.edge,jP);if(u)return new fxe(t.document,{constraint:n.edge,parser:ju,sliderProps:new Jn({keyScale:o.value("keyScale"),max:u.values.value("max"),min:u.values.value("min")}),textProps:o,value:e,viewProps:t.viewProps});const h={constraint:n.edge,textProps:o};return new dw(t.document,{assembly:DW,axes:[h,h],parser:ju,value:e,viewProps:t.viewProps})}});class mxe{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}}class vxe extends wL{constructor(e,n,r,o,u){super(e,o,u),this.cell=n,this.index=r}}class gxe extends Zg{constructor(e){super(e),this.cellToApiMap_=new Map,this.controller.valueController.cellControllers.forEach(r=>{const o=new mxe(r);this.cellToApiMap_.set(r,o)})}get value(){return this.controller.value}cell(e,n){const r=this.controller.valueController,o=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(o)}on(e,n){const r=n.bind(this);this.controller.value.emitter.on(e,o=>{const u=this.controller.valueController,h=u.findCellByValue(o.rawValue);if(!h)return;const m=this.cellToApiMap_.get(h);if(!m)return;const _=u.cellControllers.indexOf(h);r(new vxe(this,m,[_%u.size[0],Math.floor(_/u.size[0])],o.rawValue))})}}const gC=nr("rad");class yxe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(gC()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(gC("l")),this.element.appendChild(r);const o=e.createElement("input");o.classList.add(gC("i")),o.name=n.name,o.type="radio",n.viewProps.bindDisabled(o),r.appendChild(o),this.inputElement=o;const u=e.createElement("div");u.classList.add(gC("b")),r.appendChild(u);const h=e.createElement("div");h.classList.add(gC("t")),u.appendChild(h),jl(n.props,"title",m=>{h.textContent=m})}}class bxe{constructor(e,n){this.props=n.props,this.viewProps=n.viewProps,this.view=new yxe(e,{name:n.name,props:this.props,viewProps:this.viewProps})}}class H3{constructor(e,n){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=n.size;const[r,o]=this.size;for(let u=0;u<o;u++)for(let h=0;h<r;h++){const m=new bxe(e,{name:n.groupName,props:Jn.fromObject(Object.assign({},n.cellConfig(h,u))),viewProps:Ih.create()});this.cellCs_.push(m),this.cellValues_.push(n.cellConfig(h,u).value)}this.value=n.value,Bl(this.value,u=>{const h=this.findCellByValue(u);h&&(h.view.inputElement.checked=!0)}),this.viewProps=Ih.create(),this.view=new E1e(e,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(u=>{u.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(u.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(e){const n=this.cellValues_.findIndex(r=>r===e);return n<0?null:this.cellCs_[n]}onCellInputChange_(e){const n=e.currentTarget,r=this.cellCs_.findIndex(o=>o.view.inputElement===n);r<0||(this.value.rawValue=this.cellValues_[r])}}const NGe=function(){return Ji({id:"radiogrid",type:"blade",accept(t){const e=zi(t,n=>({cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),value:n.required.raw,view:n.required.constant("radiogrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=ji(t.params.value);return new V3(t.document,{blade:t.blade,props:Jn.fromObject({label:t.params.label}),value:e,valueController:new H3(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:e})})},api(t){return!(t.controller instanceof V3)||!(t.controller.valueController instanceof H3)?null:new gxe(t.controller)}})}();function NW(t){return Ji({id:"input-radiogrid",type:"input",accept(e,n){if(!t.isType(e))return null;const r=zi(n,o=>({cells:o.required.function,groupName:o.required.string,size:o.required.array(o.required.number),view:o.required.constant("radiogrid")}));return r?{initialValue:e,params:r}:null},binding:t.binding,controller:e=>new H3(e.document,{cellConfig:e.params.cells,groupName:e.params.groupName,size:e.params.size,value:e.value})})}const FGe=NW({isType:t=>typeof t=="number",binding:{reader:t=>oW,writer:t=>cm}}),BGe=NW({isType:t=>typeof t=="string",binding:{reader:t=>xW,writer:t=>cm}}),UGe=NW({isType:t=>typeof t=="boolean",binding:{reader:t=>wW,writer:t=>cm}}),VGe="essentials",jGe='.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--cnt-usp);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-cbzpv_t{margin-top:var(--cnt-usp)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--cnt-usz) * 5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--cnt-usz));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--cnt-usz) - 8px);margin-top:calc((var(--cnt-usz) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',zGe=[_Ge,MGe,IGe,LGe,NGe,UGe,FGe,BGe],HGe=Object.freeze(Object.defineProperty({__proto__:null,ButtonCellApi:Y1e,ButtonGridApi:Z1e,ButtonGridController:Q1e,CubicBezier:nm,CubicBezierApi:J1e,CubicBezierAssembly:OW,CubicBezierController:s9,CubicBezierGraphController:oxe,CubicBezierGraphView:rxe,CubicBezierPickerController:sxe,CubicBezierPickerView:txe,CubicBezierPreviewView:ixe,CubicBezierView:exe,FpsGraphBladeApi:axe,FpsGraphController:cxe,FpsView:uxe,Fpswatch:lxe,Interval:ja,IntervalAssembly:DW,IntervalConstraint:LW,RadioCellApi:mxe,RadioController:bxe,RadioGridApi:gxe,RadioGridController:H3,RadioView:yxe,RangeSliderController:pxe,RangeSliderTextController:fxe,RangeSliderTextView:dxe,RangeSliderView:hxe,TpRadioGridChangeEvent:vxe,css:jGe,id:VGe,plugins:zGe},Symbol.toStringTag,{value:"Module"}));class GGe extends fL{constructor(n){super(n);Bi(this,"bindCBs");Bi(this,"buttonCBs");Bi(this,"pane");Bi(this,"appCallbacks",0);Bi(this,"editorCallbacks",0);Bi(this,"inspectorFolder");this.bindCBs=new Map,this.buttonCBs=new Map,n.editor&&this.createGUI()}createGUI(){this.pane=new G6e({title:"GUI"}),this.pane.registerPlugin(HGe)}dispose(){var n;this.bindCBs.clear(),this.buttonCBs.clear(),this.appCallbacks=0,this.editorCallbacks=0,this.app.editor&&((n=this.pane)==null||n.dispose(),this.pane=void 0)}addFolder(n,r=void 0,o=void 0){if(this.app.editor)return this.pane===void 0&&this.createGUI(),(o!==void 0?o:this.pane).addFolder({title:n,...r});this.app.send({event:"addFolder",target:"app",data:{name:n,params:r,parent:o}})}get bindID(){return`debug_${Math.max(this.appCallbacks,this.editorCallbacks)}`}bind(n,r,o,u=void 0){const h=this.bindID,m=o.onChange!==void 0?o.onChange:k_e;this.bindCBs.set(h,m),this.app.editor?(this.pane===void 0&&this.createGUI(),(u!==void 0?u:this.pane).addBinding(n,r,o).on("change",x=>{this.app.send({event:"updateBind",target:"app",data:{id:h,value:x.value}})}),this.editorCallbacks++):(this.app.send({event:"bindObject",target:"app",data:{id:h,name:r,params:o,parent:u}}),this.appCallbacks++)}triggerBind(n,r){const o=this.bindCBs.get(n);o!==void 0?o(r):console.warn(`No callback for: ${n}`,r)}button(n,r,o=void 0){const u=this.bindID;this.buttonCBs.set(u,r),this.app.editor?(this.pane===void 0&&this.createGUI(),(o!==void 0?o:this.pane).addButton({title:n}).on("click",()=>{this.app.send({event:"clickButton",target:"app",data:{id:u}})}),this.editorCallbacks++):(this.app.send({event:"addButton",target:"app",data:{id:u,name:n,callback:r,parent:o}}),this.appCallbacks++)}triggerButton(n){const r=this.buttonCBs.get(n);r!==void 0&&r()}createInspector(){this.inspectorFolder=this.addFolder("Inspector",this.pane)}clearInspector(){const n=this.inspectorFolder.children.length-1;for(let r=n;r>-1;--r)this.inspectorFolder.remove(this.inspectorFolder.children[r])}}const WGe=!0;class $Ge extends Y3e{constructor(e,n,r){super(e,n,r),this.addComponent("theatre",new tLe(this,"RemoteApp",{})),this.addComponent("components",new Z3e(this)),this.addComponent("debug",new GGe(this)),this.addComponent("three",new E4e(this))}get debug(){return this.components.get("debug")}get debugComponents(){return this.components.get("components")}get theatre(){return this.components.get("theatre")}get three(){return this.components.get("three")}}const Mi=new $Ge("Hermes",WGe,"editor");const KGe=`varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,qGe=`uniform float time;
uniform float opacity;
uniform sampler2D map;
varying vec2 vUv;

#define MIN_ALPHA 2.0 / 255.0

void main() {
  if (opacity < MIN_ALPHA) discard;
  vec3 gradient = 0.5 + 0.5 * cos(time + vUv.xyx + vec3(0.0, 2.0, 4.0));
  vec3 image = texture2D(map, vUv * 10.0).rgb;
  // vec3 col = mix(image, gradient, 0.15);
  vec3 col = image + gradient;
  gl_FragColor = vec4(col, opacity);
}`,XGe="data:image/png;base64,R0lGODlhCAAIAIAAAP///wAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgOS4xLWMwMDEgNzkuMTQ2Mjg5OTc3NywgMjAyMy8wNi8yNS0yMzo1NzoxNCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDI1LjIgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjVENjQyODM4QTYzMTFFRUJFQTBFOTJFNjA1OTQ5N0YiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjVENjQyODQ4QTYzMTFFRUJFQTBFOTJFNjA1OTQ5N0YiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2NUQ2NDI4MThBNjMxMUVFQkVBMEU5MkU2MDU5NDk3RiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo2NUQ2NDI4MjhBNjMxMUVFQkVBMEU5MkU2MDU5NDk3RiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAAAAAAALAAAAAAIAAgAAAIOjH8AprzRkHyspqSoNAUAOw==";class YGe extends em{constructor(){super({vertexShader:KGe,fragmentShader:qGe,name:"customMaterial",uniforms:{opacity:{value:1},time:{value:0},map:{value:null}}});const e=new Image;e.onload=()=>{const n=new _s(e);n.wrapS=Ng,n.wrapT=Ng,n.needsUpdate=!0,this.uniforms.map.value=n},e.src=XGe}update(e){this.uniforms.opacity.value=this.opacity,this.uniforms.time.value+=e}}class ZGe{constructor(){Bi(this,"scene");Bi(this,"camera");Bi(this,"customMat");Bi(this,"lastUpdate",-1);this.scene=new l4e,this.scene.name="Example Scene";const e=new Do;e.name="cameras",this.scene.add(e),this.camera=new Fa(60,1,1,2e3),this.camera.name="mainCamera",this.camera.position.z=300,e.add(this.camera);const n=new b4e;n.name="sun",n.position.set(0,50,200),this.scene.add(n);const r=new Do;r.name="world",this.scene.add(r);const o=new PG(45),u=new Ua(o,new d4e({name:"normalMaterial"}));u.name="sphere-normal",r.add(u);const h=new Ua(o,new _G({transparent:!0,name:"basicMaterial",wireframe:!0}));h.name="sphere-basic",h.position.x=100,r.add(h);const m=new c4e({transparent:!0,name:"physicalMaterial"});new m4e().load("uv_grid_opengl.jpg",T=>{m.map=T,m.needsUpdate=!0});const _=new Ua(o,m);_.name="sphere-physical",_.position.x=-100,r.add(_),this.customMat=new YGe;const x=new Ua(o,this.customMat);x.name="sphere-shader",x.position.y=-100,r.add(x),this.lastUpdate=Date.now()}resize(e,n){this.camera.aspect=e/n,this.camera.updateProjectionMatrix()}update(){const e=Date.now(),n=(e-this.lastUpdate)/1e3;this.lastUpdate=e,this.customMat.update(n)}}const jr=new Kg,zr={CUSTOM:"ToolEvents::custom",SELECT_DROPDOWN:"ToolEvents::selectDropdown",DRAG_UPDATE:"ToolEvents::dragUpdate",GET_SCENE:"ToolEvents::getScene",SET_SCENE:"ToolEvents::setScene",GET_OBJECT:"ToolEvents::getObject",SET_OBJECT:"ToolEvents::setObject",UPDATE_OBJECT:"ToolEvents::updateObject",CREATE_TEXTURE:"ToolEvents::createTexture",REQUEST_METHOD:"ToolEvents::requestMethod"};function QGe(t){const e=m=>{const _=t.scene.getObjectByProperty("uuid",m.value);_!==void 0&&t.three.setObject(_)},n=(m,_,x)=>{const T=t.scene.getObjectByProperty("uuid",m);if(T!==void 0){const I=_.split(".");switch(I.length){case 1:T[I[0]]=x;break;case 2:T[I[0]][I[1]]=x;break;case 3:T[I[0]][I[1]][I[2]]=x;break;case 4:T[I[0]][I[1]][I[2]][I[3]]=x;break;case 5:T[I[0]][I[1]][I[2]][I[3]][I[4]]=x;break}}},r=m=>{const _=m.value,{key:x,value:T,uuid:I}=_;n(I,x,T)},o=m=>{const _=m.value,x=new Image;x.onload=()=>{const T=new _s(x);T.wrapS=Ng,T.wrapT=Ng,T.needsUpdate=!0,n(_.uuid,_.key,T)},x.src=_.value},u=()=>{t.three.setScene(t.scene)},h=m=>{const{key:_,uuid:x,value:T}=m.value,I=t.scene.getObjectByProperty("uuid",x);if(I!==void 0)try{I[_](T)}catch(N){console.log("Error requesting method:"),console.log(N),console.log(_),console.log(T)}};return Qt.useEffect(()=>(jr.addEventListener(zr.GET_OBJECT,e),jr.addEventListener(zr.GET_SCENE,u),jr.addEventListener(zr.UPDATE_OBJECT,r),jr.addEventListener(zr.CREATE_TEXTURE,o),jr.addEventListener(zr.REQUEST_METHOD,h),()=>{jr.removeEventListener(zr.GET_OBJECT,e),jr.removeEventListener(zr.GET_SCENE,u),jr.removeEventListener(zr.UPDATE_OBJECT,r),jr.removeEventListener(zr.CREATE_TEXTURE,o),jr.removeEventListener(zr.REQUEST_METHOD,h)}),[]),null}let cg;function JGe(){var r;const t=Qt.useRef(null),[e,n]=Qt.useState(!1);return(r=Mi.theatre)==null||r.sheet("App"),Qt.useEffect(()=>{var h;const o=t.current;o.style.visibility=Mi.editor?"hidden":"inherit";const u=(h=Mi.theatre)==null?void 0:h.sheetObject("App","Box",{x:FH.types.number(100,{range:[0,window.innerWidth]}),y:FH.types.number(100,{range:[0,window.innerHeight]})},m=>{o.style.left=`${m.x}px`,o.style.top=`${m.y}px`});return()=>{var m;u!==void 0&&((m=Mi.theatre)==null||m.unsubscribe(u)),Mi.dispose()}},[]),Qt.useEffect(()=>{const o=new nwe({antialias:!0});o.setPixelRatio(devicePixelRatio),t.current.parentElement.appendChild(o.domElement),cg=new ZGe;let u=-1;const h=()=>{const _=window.innerWidth,x=window.innerHeight;o.setSize(_,x),cg.resize(_,x)},m=()=>{cg.update(),o.render(cg.scene,cg.camera),u=requestAnimationFrame(m)};return Mi.editor||(h(),m(),window.addEventListener("resize",h),n(!0)),Mi.three.setScene(cg.scene),()=>{window.removeEventListener("resize",h),o.dispose(),cancelAnimationFrame(u),u=-1}},[]),Qt.useEffect(()=>{const o=t.current;o.style.visibility=Mi.editor?"hidden":"inherit";const u=Mi.debug.addFolder("Test Folder");Mi.debug.button("Test Button",()=>{console.log("Test button works!")},u);const h={opacity:1,rotation:0};Mi.debug.bind(h,"opacity",{min:0,max:1,onChange:x=>{o.style.opacity=x.toFixed(2)}},u),Mi.debug.bind(h,"rotation",{min:0,max:360,onChange:x=>{o.style.transform=`rotate(${x}deg)`}},u);const m=x=>{console.log("Custom:",x.value)},_=x=>{console.log(`Dropdown: ${x.value.dropdown}, value: ${x.value.value}`)};return jr.addEventListener(zr.CUSTOM,m),jr.addEventListener(zr.SELECT_DROPDOWN,_),()=>{jr.removeEventListener(zr.CUSTOM,m),jr.removeEventListener(zr.SELECT_DROPDOWN,_)}},[]),Lt.jsxs(Lt.Fragment,{children:[Lt.jsx("div",{id:"box",ref:t,children:Lt.jsx("button",{onClick:()=>{Mi.send({target:"editor",event:"custom",data:"hello editor!"})},children:"Click"})}),e&&Lt.jsx(QGe,{scene:cg.scene,three:Mi.three})]})}function eWe(t){return Lt.jsxs("div",{className:"editor",ref:t.ref,style:t.style,children:[Lt.jsx("header",{children:t.header}),t.children,Lt.jsx("footer",{children:t.footer})]})}function _xe(t){return t.title.search("<")>-1?Lt.jsx("button",{className:"svg",dangerouslySetInnerHTML:{__html:t.title}}):Lt.jsx("button",{children:t.title})}const FW=Qt.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),IL=Qt.createContext({}),BW=Qt.createContext(null),RL=typeof document<"u",a9=RL?Qt.useLayoutEffect:Qt.useEffect,wxe=Qt.createContext({strict:!1});function tWe(t,e,n,r){const{visualElement:o}=Qt.useContext(IL),u=Qt.useContext(wxe),h=Qt.useContext(BW),m=Qt.useContext(FW).reducedMotion,_=Qt.useRef();r=r||u.renderer,!_.current&&r&&(_.current=r(t,{visualState:e,parent:o,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const x=_.current;return Qt.useInsertionEffect(()=>{x&&x.update(n,h)}),a9(()=>{x&&x.render()}),Qt.useEffect(()=>{x&&x.updateFeatures()}),(window.HandoffAppearAnimations?a9:Qt.useEffect)(()=>{x&&x.animationState&&x.animationState.animateChanges()}),x}function x_(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function nWe(t,e,n){return Qt.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):x_(n)&&(n.current=r))},[e])}function yP(t){return typeof t=="string"||Array.isArray(t)}function OL(t){return typeof t=="object"&&typeof t.start=="function"}const UW=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],VW=["initial",...UW];function DL(t){return OL(t.animate)||VW.some(e=>yP(t[e]))}function xxe(t){return!!(DL(t)||t.variants)}function rWe(t,e){if(DL(t)){const{initial:n,animate:r}=t;return{initial:n===!1||yP(n)?n:void 0,animate:yP(r)?r:void 0}}return t.inherit!==!1?e:{}}function iWe(t){const{initial:e,animate:n}=rWe(t,Qt.useContext(IL));return Qt.useMemo(()=>({initial:e,animate:n}),[o0e(e),o0e(n)])}function o0e(t){return Array.isArray(t)?t.join(" "):t}const s0e={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},bP={};for(const t in s0e)bP[t]={isEnabled:e=>s0e[t].some(n=>!!e[n])};function oWe(t){for(const e in t)bP[e]={...bP[e],...t[e]}}const Sxe=Qt.createContext({}),Exe=Qt.createContext({}),sWe=Symbol.for("motionComponentSymbol");function aWe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:o}){t&&oWe(t);function u(m,_){let x;const T={...Qt.useContext(FW),...m,layoutId:lWe(m)},{isStatic:I}=T,N=iWe(m),H=r(m,I);if(!I&&RL){N.visualElement=tWe(o,H,T,e);const Z=Qt.useContext(Exe),j=Qt.useContext(wxe).strict;N.visualElement&&(x=N.visualElement.loadFeatures(T,j,t,Z))}return Qt.createElement(IL.Provider,{value:N},x&&N.visualElement?Qt.createElement(x,{visualElement:N.visualElement,...T}):null,n(o,m,nWe(H,N.visualElement,_),H,I,N.visualElement))}const h=Qt.forwardRef(u);return h[sWe]=o,h}function lWe({layoutId:t}){const e=Qt.useContext(Sxe).id;return e&&t!==void 0?e+"-"+t:t}function uWe(t){function e(r,o={}){return aWe(t(r,o))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,o)=>(n.has(o)||n.set(o,e(o)),n.get(o))})}const cWe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jW(t){return typeof t!="string"||t.includes("-")?!1:!!(cWe.indexOf(t)>-1||/[A-Z]/.test(t))}const G3={};function dWe(t){Object.assign(G3,t)}const $P=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Jg=new Set($P);function Cxe(t,{layout:e,layoutId:n}){return Jg.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!G3[t]||t==="opacity")}const Ks=t=>!!(t&&t.getVelocity),hWe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},pWe=$P.length;function fWe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,o){let u="";for(let h=0;h<pWe;h++){const m=$P[h];if(t[m]!==void 0){const _=hWe[m]||m;u+=`${_}(${t[m]}) `}}return e&&!t.z&&(u+="translateZ(0)"),u=u.trim(),o?u=o(t,r?"":u):n&&r&&(u="none"),u}const Pxe=t=>e=>typeof e=="string"&&e.startsWith(t),kxe=Pxe("--"),l9=Pxe("var(--"),mWe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,vWe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,rm=(t,e,n)=>Math.min(Math.max(n,t),e),e0={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},FC={...e0,transform:t=>rm(0,1,t)},FD={...e0,default:1},BC=t=>Math.round(t*1e5)/1e5,LL=/(-)?([\d]*\.?[\d])+/g,Txe=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,gWe=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function KP(t){return typeof t=="string"}const qP=t=>({test:e=>KP(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ef=qP("deg"),Gc=qP("%"),Fn=qP("px"),yWe=qP("vh"),bWe=qP("vw"),a0e={...Gc,parse:t=>Gc.parse(t)/100,transform:t=>Gc.transform(t*100)},l0e={...e0,transform:Math.round},Mxe={borderWidth:Fn,borderTopWidth:Fn,borderRightWidth:Fn,borderBottomWidth:Fn,borderLeftWidth:Fn,borderRadius:Fn,radius:Fn,borderTopLeftRadius:Fn,borderTopRightRadius:Fn,borderBottomRightRadius:Fn,borderBottomLeftRadius:Fn,width:Fn,maxWidth:Fn,height:Fn,maxHeight:Fn,size:Fn,top:Fn,right:Fn,bottom:Fn,left:Fn,padding:Fn,paddingTop:Fn,paddingRight:Fn,paddingBottom:Fn,paddingLeft:Fn,margin:Fn,marginTop:Fn,marginRight:Fn,marginBottom:Fn,marginLeft:Fn,rotate:Ef,rotateX:Ef,rotateY:Ef,rotateZ:Ef,scale:FD,scaleX:FD,scaleY:FD,scaleZ:FD,skew:Ef,skewX:Ef,skewY:Ef,distance:Fn,translateX:Fn,translateY:Fn,translateZ:Fn,x:Fn,y:Fn,z:Fn,perspective:Fn,transformPerspective:Fn,opacity:FC,originX:a0e,originY:a0e,originZ:Fn,zIndex:l0e,fillOpacity:FC,strokeOpacity:FC,numOctaves:l0e};function zW(t,e,n,r){const{style:o,vars:u,transform:h,transformOrigin:m}=t;let _=!1,x=!1,T=!0;for(const I in e){const N=e[I];if(kxe(I)){u[I]=N;continue}const H=Mxe[I],Z=vWe(N,H);if(Jg.has(I)){if(_=!0,h[I]=Z,!T)continue;N!==(H.default||0)&&(T=!1)}else I.startsWith("origin")?(x=!0,m[I]=Z):o[I]=Z}if(e.transform||(_||r?o.transform=fWe(t.transform,n,T,r):o.transform&&(o.transform="none")),x){const{originX:I="50%",originY:N="50%",originZ:H=0}=m;o.transformOrigin=`${I} ${N} ${H}`}}const HW=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Axe(t,e,n){for(const r in e)!Ks(e[r])&&!Cxe(r,n)&&(t[r]=e[r])}function _We({transformTemplate:t},e,n){return Qt.useMemo(()=>{const r=HW();return zW(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function wWe(t,e,n){const r=t.style||{},o={};return Axe(o,r,t),Object.assign(o,_We(t,e,n)),t.transformValues?t.transformValues(o):o}function xWe(t,e,n){const r={},o=wWe(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=o,r}const SWe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function W3(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||SWe.has(t)}let Ixe=t=>!W3(t);function EWe(t){t&&(Ixe=e=>e.startsWith("on")?!W3(e):t(e))}try{EWe(require("@emotion/is-prop-valid").default)}catch{}function CWe(t,e,n){const r={};for(const o in t)o==="values"&&typeof t.values=="object"||(Ixe(o)||n===!0&&W3(o)||!e&&!W3(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}function u0e(t,e,n){return typeof t=="string"?t:Fn.transform(e+n*t)}function PWe(t,e,n){const r=u0e(e,t.x,t.width),o=u0e(n,t.y,t.height);return`${r} ${o}`}const kWe={offset:"stroke-dashoffset",array:"stroke-dasharray"},TWe={offset:"strokeDashoffset",array:"strokeDasharray"};function MWe(t,e,n=1,r=0,o=!0){t.pathLength=1;const u=o?kWe:TWe;t[u.offset]=Fn.transform(-r);const h=Fn.transform(e),m=Fn.transform(n);t[u.array]=`${h} ${m}`}function GW(t,{attrX:e,attrY:n,attrScale:r,originX:o,originY:u,pathLength:h,pathSpacing:m=1,pathOffset:_=0,...x},T,I,N){if(zW(t,x,T,N),I){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:H,style:Z,dimensions:j}=t;H.transform&&(j&&(Z.transform=H.transform),delete H.transform),j&&(o!==void 0||u!==void 0||Z.transform)&&(Z.transformOrigin=PWe(j,o!==void 0?o:.5,u!==void 0?u:.5)),e!==void 0&&(H.x=e),n!==void 0&&(H.y=n),r!==void 0&&(H.scale=r),h!==void 0&&MWe(H,h,m,_,!1)}const Rxe=()=>({...HW(),attrs:{}}),WW=t=>typeof t=="string"&&t.toLowerCase()==="svg";function AWe(t,e,n,r){const o=Qt.useMemo(()=>{const u=Rxe();return GW(u,e,{enableHardwareAcceleration:!1},WW(r),t.transformTemplate),{...u.attrs,style:{...u.style}}},[e]);if(t.style){const u={};Axe(u,t.style,t),o.style={...u,...o.style}}return o}function IWe(t=!1){return(n,r,o,{latestValues:u},h)=>{const _=(jW(n)?AWe:xWe)(r,u,h,n),T={...CWe(r,typeof n=="string",t),..._,ref:o},{children:I}=r,N=Qt.useMemo(()=>Ks(I)?I.get():I,[I]);return Qt.createElement(n,{...T,children:N})}}const $W=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function Oxe(t,{style:e,vars:n},r,o){Object.assign(t.style,e,o&&o.getProjectionStyles(r));for(const u in n)t.style.setProperty(u,n[u])}const Dxe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Lxe(t,e,n,r){Oxe(t,e,void 0,r);for(const o in e.attrs)t.setAttribute(Dxe.has(o)?o:$W(o),e.attrs[o])}function KW(t,e){const{style:n}=t,r={};for(const o in n)(Ks(n[o])||e.style&&Ks(e.style[o])||Cxe(o,t))&&(r[o]=n[o]);return r}function Nxe(t,e){const n=KW(t,e);for(const r in t)if(Ks(t[r])||Ks(e[r])){const o=$P.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[o]=t[r]}return n}function qW(t,e,n,r={},o={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,o)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,o)),e}function XP(t){const e=Qt.useRef(null);return e.current===null&&(e.current=t()),e.current}const $3=t=>Array.isArray(t),RWe=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),OWe=t=>$3(t)?t[t.length-1]||0:t;function o3(t){const e=Ks(t)?t.get():t;return RWe(e)?e.toValue():e}function DWe({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,o,u){const h={latestValues:LWe(r,o,u,t),renderState:e()};return n&&(h.mount=m=>n(r,m,h)),h}const Fxe=t=>(e,n)=>{const r=Qt.useContext(IL),o=Qt.useContext(BW),u=()=>DWe(t,e,r,o);return n?u():XP(u)};function LWe(t,e,n,r){const o={},u=r(t,{});for(const N in u)o[N]=o3(u[N]);let{initial:h,animate:m}=t;const _=DL(t),x=xxe(t);e&&x&&!_&&t.inherit!==!1&&(h===void 0&&(h=e.initial),m===void 0&&(m=e.animate));let T=n?n.initial===!1:!1;T=T||h===!1;const I=T?m:h;return I&&typeof I!="boolean"&&!OL(I)&&(Array.isArray(I)?I:[I]).forEach(H=>{const Z=qW(t,H);if(!Z)return;const{transitionEnd:j,transition:z,...U}=Z;for(const C in U){let K=U[C];if(Array.isArray(K)){const te=T?K.length-1:0;K=K[te]}K!==null&&(o[C]=K)}for(const C in j)o[C]=j[C]}),o}const NWe={useVisualState:Fxe({scrapeMotionValuesFromProps:Nxe,createRenderState:Rxe,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}GW(n,r,{enableHardwareAcceleration:!1},WW(e.tagName),t.transformTemplate),Lxe(e,n)}})},FWe={useVisualState:Fxe({scrapeMotionValuesFromProps:KW,createRenderState:HW})};function BWe(t,{forwardMotionProps:e=!1},n,r){return{...jW(t)?NWe:FWe,preloadedFeatures:n,useRender:IWe(e),createVisualElement:r,Component:t}}function _h(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Bxe=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function NL(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const UWe=t=>e=>Bxe(e)&&t(e,NL(e));function Sh(t,e,n,r){return _h(t,e,UWe(n),r)}const VWe=(t,e)=>n=>e(t(n)),Xf=(...t)=>t.reduce(VWe);function Uxe(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const c0e=Uxe("dragHorizontal"),d0e=Uxe("dragVertical");function Vxe(t){let e=!1;if(t==="y")e=d0e();else if(t==="x")e=c0e();else{const n=c0e(),r=d0e();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function jxe(){const t=Vxe(!0);return t?(t(),!1):!0}class dm{constructor(e){this.isMounted=!1,this.node=e}update(){}}const Vi=t=>t;function jWe(t){let e=[],n=[],r=0,o=!1,u=!1;const h=new WeakSet,m={schedule:(_,x=!1,T=!1)=>{const I=T&&o,N=I?e:n;return x&&h.add(_),N.indexOf(_)===-1&&(N.push(_),I&&o&&(r=e.length)),_},cancel:_=>{const x=n.indexOf(_);x!==-1&&n.splice(x,1),h.delete(_)},process:_=>{if(o){u=!0;return}if(o=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let x=0;x<r;x++){const T=e[x];T(_),h.has(T)&&(m.schedule(T),t())}o=!1,u&&(u=!1,m.process(_))}};return m}const BD=["prepare","read","update","preRender","render","postRender"],zWe=40;function HWe(t,e){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},u=BD.reduce((I,N)=>(I[N]=jWe(()=>n=!0),I),{}),h=I=>u[I].process(o),m=()=>{const I=performance.now();n=!1,o.delta=r?1e3/60:Math.max(Math.min(I-o.timestamp,zWe),1),o.timestamp=I,o.isProcessing=!0,BD.forEach(h),o.isProcessing=!1,n&&e&&(r=!1,t(m))},_=()=>{n=!0,r=!0,o.isProcessing||t(m)};return{schedule:BD.reduce((I,N)=>{const H=u[N];return I[N]=(Z,j=!1,z=!1)=>(n||_(),H.schedule(Z,j,z)),I},{}),cancel:I=>BD.forEach(N=>u[N].cancel(I)),state:o,steps:u}}const{schedule:xi,cancel:Xc,state:gs,steps:A8}=HWe(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vi,!0);function h0e(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),o=(u,h)=>{if(u.type==="touch"||jxe())return;const m=t.getProps();t.animationState&&m.whileHover&&t.animationState.setActive("whileHover",e),m[r]&&xi.update(()=>m[r](u,h))};return Sh(t.current,n,o,{passive:!t.getProps()[r]})}class GWe extends dm{mount(){this.unmount=Xf(h0e(this.node,!0),h0e(this.node,!1))}unmount(){}}class WWe extends dm{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xf(_h(this.node.current,"focus",()=>this.onFocus()),_h(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const zxe=(t,e)=>e?t===e?!0:zxe(t,e.parentElement):!1;function I8(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,NL(n))}class $We extends dm{constructor(){super(...arguments),this.removeStartListeners=Vi,this.removeEndListeners=Vi,this.removeAccessibleListeners=Vi,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),u=Sh(window,"pointerup",(m,_)=>{if(!this.checkPressEnd())return;const{onTap:x,onTapCancel:T}=this.node.getProps();xi.update(()=>{zxe(this.node.current,m.target)?x&&x(m,_):T&&T(m,_)})},{passive:!(r.onTap||r.onPointerUp)}),h=Sh(window,"pointercancel",(m,_)=>this.cancelPress(m,_),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Xf(u,h),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=u=>{if(u.key!=="Enter"||this.isPressing)return;const h=m=>{m.key!=="Enter"||!this.checkPressEnd()||I8("up",(_,x)=>{const{onTap:T}=this.node.getProps();T&&xi.update(()=>T(_,x))})};this.removeEndListeners(),this.removeEndListeners=_h(this.node.current,"keyup",h),I8("down",(m,_)=>{this.startPress(m,_)})},n=_h(this.node.current,"keydown",e),r=()=>{this.isPressing&&I8("cancel",(u,h)=>this.cancelPress(u,h))},o=_h(this.node.current,"blur",r);this.removeAccessibleListeners=Xf(n,o)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&xi.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!jxe()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&xi.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Sh(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=_h(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Xf(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const u9=new WeakMap,R8=new WeakMap,KWe=t=>{const e=u9.get(t.target);e&&e(t)},qWe=t=>{t.forEach(KWe)};function XWe({root:t,...e}){const n=t||document;R8.has(n)||R8.set(n,{});const r=R8.get(n),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(qWe,{root:t,...e})),r[o]}function YWe(t,e,n){const r=XWe(e);return u9.set(t,n),r.observe(t),()=>{u9.delete(t),r.unobserve(t)}}const ZWe={some:0,all:1};class QWe extends dm{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:u}=e,h={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:ZWe[o]},m=_=>{const{isIntersecting:x}=_;if(this.isInView===x||(this.isInView=x,u&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:T,onViewportLeave:I}=this.node.getProps(),N=x?T:I;N&&N(_)};return YWe(this.node.current,h,m)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(JWe(e,n))&&this.startObserver()}unmount(){}}function JWe({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const e$e={inView:{Feature:QWe},tap:{Feature:$We},focus:{Feature:WWe},hover:{Feature:GWe}};function Hxe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function t$e(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function n$e(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function FL(t,e,n){const r=t.getProps();return qW(r,e,n!==void 0?n:r.custom,t$e(t),n$e(t))}const r$e="framerAppearId",i$e="data-"+$W(r$e);let o$e=Vi,XW=Vi;const Yf=t=>t*1e3,Eh=t=>t/1e3,s$e={current:!1},Gxe=t=>Array.isArray(t)&&typeof t[0]=="number";function Wxe(t){return!!(!t||typeof t=="string"&&$xe[t]||Gxe(t)||Array.isArray(t)&&t.every(Wxe))}const CC=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,$xe={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:CC([0,.65,.55,1]),circOut:CC([.55,0,1,.45]),backIn:CC([.31,.01,.66,-.59]),backOut:CC([.33,1.53,.69,.99])};function Kxe(t){if(t)return Gxe(t)?CC(t):Array.isArray(t)?t.map(Kxe):$xe[t]}function a$e(t,e,n,{delay:r=0,duration:o,repeat:u=0,repeatType:h="loop",ease:m,times:_}={}){const x={[e]:n};_&&(x.offset=_);const T=Kxe(m);return Array.isArray(T)&&(x.easing=T),t.animate(x,{delay:r,duration:o,easing:Array.isArray(T)?"linear":T,fill:"both",iterations:u+1,direction:h==="reverse"?"alternate":"normal"})}function l$e(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const qxe=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,u$e=1e-7,c$e=12;function d$e(t,e,n,r,o){let u,h,m=0;do h=e+(n-e)/2,u=qxe(h,r,o)-t,u>0?n=h:e=h;while(Math.abs(u)>u$e&&++m<c$e);return h}function YP(t,e,n,r){if(t===e&&n===r)return Vi;const o=u=>d$e(u,0,1,t,n);return u=>u===0||u===1?u:qxe(o(u),e,r)}const h$e=YP(.42,0,1,1),p$e=YP(0,0,.58,1),Xxe=YP(.42,0,.58,1),f$e=t=>Array.isArray(t)&&typeof t[0]!="number",Yxe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Zxe=t=>e=>1-t(1-e),Qxe=t=>1-Math.sin(Math.acos(t)),YW=Zxe(Qxe),m$e=Yxe(YW),Jxe=YP(.33,1.53,.69,.99),ZW=Zxe(Jxe),v$e=Yxe(ZW),g$e=t=>(t*=2)<1?.5*ZW(t):.5*(2-Math.pow(2,-10*(t-1))),y$e={linear:Vi,easeIn:h$e,easeInOut:Xxe,easeOut:p$e,circIn:Qxe,circInOut:m$e,circOut:YW,backIn:ZW,backInOut:v$e,backOut:Jxe,anticipate:g$e},p0e=t=>{if(Array.isArray(t)){XW(t.length===4);const[e,n,r,o]=t;return YP(e,n,r,o)}else if(typeof t=="string")return y$e[t];return t},QW=(t,e)=>n=>!!(KP(n)&&gWe.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),eSe=(t,e,n)=>r=>{if(!KP(r))return r;const[o,u,h,m]=r.match(LL);return{[t]:parseFloat(o),[e]:parseFloat(u),[n]:parseFloat(h),alpha:m!==void 0?parseFloat(m):1}},b$e=t=>rm(0,255,t),O8={...e0,transform:t=>Math.round(b$e(t))},Sg={test:QW("rgb","red"),parse:eSe("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+O8.transform(t)+", "+O8.transform(e)+", "+O8.transform(n)+", "+BC(FC.transform(r))+")"};function _$e(t){let e="",n="",r="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const c9={test:QW("#"),parse:_$e,transform:Sg.transform},S_={test:QW("hsl","hue"),parse:eSe("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Gc.transform(BC(e))+", "+Gc.transform(BC(n))+", "+BC(FC.transform(r))+")"},Us={test:t=>Sg.test(t)||c9.test(t)||S_.test(t),parse:t=>Sg.test(t)?Sg.parse(t):S_.test(t)?S_.parse(t):c9.parse(t),transform:t=>KP(t)?t:t.hasOwnProperty("red")?Sg.transform(t):S_.transform(t)},_i=(t,e,n)=>-n*t+n*e+t;function D8(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function w$e({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let o=0,u=0,h=0;if(!e)o=u=h=n;else{const m=n<.5?n*(1+e):n+e-n*e,_=2*n-m;o=D8(_,m,t+1/3),u=D8(_,m,t),h=D8(_,m,t-1/3)}return{red:Math.round(o*255),green:Math.round(u*255),blue:Math.round(h*255),alpha:r}}const L8=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},x$e=[c9,Sg,S_],S$e=t=>x$e.find(e=>e.test(t));function f0e(t){const e=S$e(t);let n=e.parse(t);return e===S_&&(n=w$e(n)),n}const tSe=(t,e)=>{const n=f0e(t),r=f0e(e),o={...n};return u=>(o.red=L8(n.red,r.red,u),o.green=L8(n.green,r.green,u),o.blue=L8(n.blue,r.blue,u),o.alpha=_i(n.alpha,r.alpha,u),Sg.transform(o))};function E$e(t){var e,n;return isNaN(t)&&KP(t)&&(((e=t.match(LL))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Txe))===null||n===void 0?void 0:n.length)||0)>0}const nSe={regex:mWe,countKey:"Vars",token:"${v}",parse:Vi},rSe={regex:Txe,countKey:"Colors",token:"${c}",parse:Us.parse},iSe={regex:LL,countKey:"Numbers",token:"${n}",parse:e0.parse};function N8(t,{regex:e,countKey:n,token:r,parse:o}){const u=t.tokenised.match(e);u&&(t["num"+n]=u.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...u.map(o)))}function K3(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&N8(n,nSe),N8(n,rSe),N8(n,iSe),n}function oSe(t){return K3(t).values}function sSe(t){const{values:e,numColors:n,numVars:r,tokenised:o}=K3(t),u=e.length;return h=>{let m=o;for(let _=0;_<u;_++)_<r?m=m.replace(nSe.token,h[_]):_<r+n?m=m.replace(rSe.token,Us.transform(h[_])):m=m.replace(iSe.token,BC(h[_]));return m}}const C$e=t=>typeof t=="number"?0:t;function P$e(t){const e=oSe(t);return sSe(t)(e.map(C$e))}const im={test:E$e,parse:oSe,createTransformer:sSe,getAnimatableNone:P$e},aSe=(t,e)=>n=>`${n>0?e:t}`;function lSe(t,e){return typeof t=="number"?n=>_i(t,e,n):Us.test(t)?tSe(t,e):t.startsWith("var(")?aSe(t,e):cSe(t,e)}const uSe=(t,e)=>{const n=[...t],r=n.length,o=t.map((u,h)=>lSe(u,e[h]));return u=>{for(let h=0;h<r;h++)n[h]=o[h](u);return n}},k$e=(t,e)=>{const n={...t,...e},r={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(r[o]=lSe(t[o],e[o]));return o=>{for(const u in r)n[u]=r[u](o);return n}},cSe=(t,e)=>{const n=im.createTransformer(e),r=K3(t),o=K3(e);return r.numVars===o.numVars&&r.numColors===o.numColors&&r.numNumbers>=o.numNumbers?Xf(uSe(r.values,o.values),n):aSe(t,e)},_P=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},m0e=(t,e)=>n=>_i(t,e,n);function T$e(t){return typeof t=="number"?m0e:typeof t=="string"?Us.test(t)?tSe:cSe:Array.isArray(t)?uSe:typeof t=="object"?k$e:m0e}function M$e(t,e,n){const r=[],o=n||T$e(t[0]),u=t.length-1;for(let h=0;h<u;h++){let m=o(t[h],t[h+1]);if(e){const _=Array.isArray(e)?e[h]||Vi:e;m=Xf(_,m)}r.push(m)}return r}function JW(t,e,{clamp:n=!0,ease:r,mixer:o}={}){const u=t.length;if(XW(u===e.length),u===1)return()=>e[0];t[0]>t[u-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=M$e(e,r,o),m=h.length,_=x=>{let T=0;if(m>1)for(;T<t.length-2&&!(x<t[T+1]);T++);const I=_P(t[T],t[T+1],x);return h[T](I)};return n?x=>_(rm(t[0],t[u-1],x)):_}function A$e(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const o=_P(0,e,r);t.push(_i(n,1,o))}}function I$e(t){const e=[0];return A$e(e,t.length-1),e}function R$e(t,e){return t.map(n=>n*e)}function O$e(t,e){return t.map(()=>e||Xxe).splice(0,t.length-1)}function q3({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const o=f$e(r)?r.map(p0e):p0e(r),u={done:!1,value:e[0]},h=R$e(n&&n.length===e.length?n:I$e(e),t),m=JW(h,e,{ease:Array.isArray(o)?o:O$e(e,o)});return{calculatedDuration:t,next:_=>(u.value=m(_),u.done=_>=t,u)}}function dSe(t,e){return e?t*(1e3/e):0}const D$e=5;function hSe(t,e,n){const r=Math.max(e-D$e,0);return dSe(n-t(r),e-r)}const F8=.001,L$e=.01,v0e=10,N$e=.05,F$e=1;function B$e({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let o,u;o$e(t<=Yf(v0e));let h=1-e;h=rm(N$e,F$e,h),t=rm(L$e,v0e,Eh(t)),h<1?(o=x=>{const T=x*h,I=T*t,N=T-n,H=d9(x,h),Z=Math.exp(-I);return F8-N/H*Z},u=x=>{const I=x*h*t,N=I*n+n,H=Math.pow(h,2)*Math.pow(x,2)*t,Z=Math.exp(-I),j=d9(Math.pow(x,2),h);return(-o(x)+F8>0?-1:1)*((N-H)*Z)/j}):(o=x=>{const T=Math.exp(-x*t),I=(x-n)*t+1;return-F8+T*I},u=x=>{const T=Math.exp(-x*t),I=(n-x)*(t*t);return T*I});const m=5/t,_=V$e(o,u,m);if(t=Yf(t),isNaN(_))return{stiffness:100,damping:10,duration:t};{const x=Math.pow(_,2)*r;return{stiffness:x,damping:h*2*Math.sqrt(r*x),duration:t}}}const U$e=12;function V$e(t,e,n){let r=n;for(let o=1;o<U$e;o++)r=r-t(r)/e(r);return r}function d9(t,e){return t*Math.sqrt(1-e*e)}const j$e=["duration","bounce"],z$e=["stiffness","damping","mass"];function g0e(t,e){return e.some(n=>t[n]!==void 0)}function H$e(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!g0e(t,z$e)&&g0e(t,j$e)){const n=B$e(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function pSe({keyframes:t,restDelta:e,restSpeed:n,...r}){const o=t[0],u=t[t.length-1],h={done:!1,value:o},{stiffness:m,damping:_,mass:x,velocity:T,duration:I,isResolvedFromDuration:N}=H$e(r),H=T?-Eh(T):0,Z=_/(2*Math.sqrt(m*x)),j=u-o,z=Eh(Math.sqrt(m/x)),U=Math.abs(j)<5;n||(n=U?.01:2),e||(e=U?.005:.5);let C;if(Z<1){const K=d9(z,Z);C=te=>{const pe=Math.exp(-Z*z*te);return u-pe*((H+Z*z*j)/K*Math.sin(K*te)+j*Math.cos(K*te))}}else if(Z===1)C=K=>u-Math.exp(-z*K)*(j+(H+z*j)*K);else{const K=z*Math.sqrt(Z*Z-1);C=te=>{const pe=Math.exp(-Z*z*te),Q=Math.min(K*te,300);return u-pe*((H+Z*z*j)*Math.sinh(Q)+K*j*Math.cosh(Q))/K}}return{calculatedDuration:N&&I||null,next:K=>{const te=C(K);if(N)h.done=K>=I;else{let pe=H;K!==0&&(Z<1?pe=hSe(C,K,te):pe=0);const Q=Math.abs(pe)<=n,Se=Math.abs(u-te)<=e;h.done=Q&&Se}return h.value=h.done?u:te,h}}}function y0e({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:u=500,modifyTarget:h,min:m,max:_,restDelta:x=.5,restSpeed:T}){const I=t[0],N={done:!1,value:I},H=Pe=>m!==void 0&&Pe<m||_!==void 0&&Pe>_,Z=Pe=>m===void 0?_:_===void 0||Math.abs(m-Pe)<Math.abs(_-Pe)?m:_;let j=n*e;const z=I+j,U=h===void 0?z:h(z);U!==z&&(j=U-I);const C=Pe=>-j*Math.exp(-Pe/r),K=Pe=>U+C(Pe),te=Pe=>{const G=C(Pe),ye=K(Pe);N.done=Math.abs(G)<=x,N.value=N.done?U:ye};let pe,Q;const Se=Pe=>{H(N.value)&&(pe=Pe,Q=pSe({keyframes:[N.value,Z(N.value)],velocity:hSe(K,Pe,N.value),damping:o,stiffness:u,restDelta:x,restSpeed:T}))};return Se(0),{calculatedDuration:null,next:Pe=>{let G=!1;return!Q&&pe===void 0&&(G=!0,te(Pe),Se(Pe)),pe!==void 0&&Pe>pe?Q.next(Pe-pe):(!G&&te(Pe),N)}}}const G$e=t=>{const e=({timestamp:n})=>t(n);return{start:()=>xi.update(e,!0),stop:()=>Xc(e),now:()=>gs.isProcessing?gs.timestamp:performance.now()}},b0e=2e4;function _0e(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<b0e;)e+=n,r=t.next(e);return e>=b0e?1/0:e}const W$e={decay:y0e,inertia:y0e,tween:q3,keyframes:q3,spring:pSe};function X3({autoplay:t=!0,delay:e=0,driver:n=G$e,keyframes:r,type:o="keyframes",repeat:u=0,repeatDelay:h=0,repeatType:m="loop",onPlay:_,onStop:x,onComplete:T,onUpdate:I,...N}){let H=1,Z=!1,j,z;const U=()=>{z=new Promise(Be=>{j=Be})};U();let C;const K=W$e[o]||q3;let te;K!==q3&&typeof r[0]!="number"&&(te=JW([0,100],r,{clamp:!1}),r=[0,100]);const pe=K({...N,keyframes:r});let Q;m==="mirror"&&(Q=K({...N,keyframes:[...r].reverse(),velocity:-(N.velocity||0)}));let Se="idle",Pe=null,G=null,ye=null;pe.calculatedDuration===null&&u&&(pe.calculatedDuration=_0e(pe));const{calculatedDuration:St}=pe;let kt=1/0,it=1/0;St!==null&&(kt=St+h,it=kt*(u+1)-h);let me=0;const lt=Be=>{if(G===null)return;H>0&&(G=Math.min(G,Be)),H<0&&(G=Math.min(Be-it/H,G)),Pe!==null?me=Pe:me=Math.round(Be-G)*H;const nt=me-e*(H>=0?1:-1),Wt=H>=0?nt<0:nt>it;me=Math.max(nt,0),Se==="finished"&&Pe===null&&(me=it);let Ut=me,Dt=pe;if(u){const $n=me/kt;let Yr=Math.floor($n),xn=$n%1;!xn&&$n>=1&&(xn=1),xn===1&&Yr--,Yr=Math.min(Yr,u+1);const et=!!(Yr%2);et&&(m==="reverse"?(xn=1-xn,h&&(xn-=h/kt)):m==="mirror"&&(Dt=Q));let ei=rm(0,1,xn);me>it&&(ei=m==="reverse"&&et?1:0),Ut=ei*kt}const en=Wt?{done:!1,value:r[0]}:Dt.next(Ut);te&&(en.value=te(en.value));let{done:on}=en;!Wt&&St!==null&&(on=H>=0?me>=it:me<=0);const wn=Pe===null&&(Se==="finished"||Se==="running"&&on);return I&&I(en.value),wn&&Ge(),en},Fe=()=>{C&&C.stop(),C=void 0},vt=()=>{Se="idle",Fe(),j(),U(),G=ye=null},Ge=()=>{Se="finished",T&&T(),Fe(),j()},mt=()=>{if(Z)return;C||(C=n(lt));const Be=C.now();_&&_(),Pe!==null?G=Be-Pe:(!G||Se==="finished")&&(G=Be),Se==="finished"&&U(),ye=G,Pe=null,Se="running",C.start()};t&&mt();const Je={then(Be,nt){return z.then(Be,nt)},get time(){return Eh(me)},set time(Be){Be=Yf(Be),me=Be,Pe!==null||!C||H===0?Pe=Be:G=C.now()-Be/H},get duration(){const Be=pe.calculatedDuration===null?_0e(pe):pe.calculatedDuration;return Eh(Be)},get speed(){return H},set speed(Be){Be===H||!C||(H=Be,Je.time=Eh(me))},get state(){return Se},play:mt,pause:()=>{Se="paused",Pe=me},stop:()=>{Z=!0,Se!=="idle"&&(Se="idle",x&&x(),vt())},cancel:()=>{ye!==null&&lt(ye),vt()},complete:()=>{Se="finished"},sample:Be=>(G=0,lt(Be))};return Je}function $$e(t){let e;return()=>(e===void 0&&(e=t()),e)}const K$e=$$e(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),q$e=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),UD=10,X$e=2e4,Y$e=(t,e)=>e.type==="spring"||t==="backgroundColor"||!Wxe(e.ease);function Z$e(t,e,{onUpdate:n,onComplete:r,...o}){if(!(K$e()&&q$e.has(e)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let h=!1,m,_;const x=()=>{_=new Promise(C=>{m=C})};x();let{keyframes:T,duration:I=300,ease:N,times:H}=o;if(Y$e(e,o)){const C=X3({...o,repeat:0,delay:0});let K={done:!1,value:T[0]};const te=[];let pe=0;for(;!K.done&&pe<X$e;)K=C.sample(pe),te.push(K.value),pe+=UD;H=void 0,T=te,I=pe-UD,N="linear"}const Z=a$e(t.owner.current,e,T,{...o,duration:I,ease:N,times:H}),j=()=>Z.cancel(),z=()=>{xi.update(j),m(),x()};return Z.onfinish=()=>{t.set(l$e(T,o)),r&&r(),z()},{then(C,K){return _.then(C,K)},attachTimeline(C){return Z.timeline=C,Z.onfinish=null,Vi},get time(){return Eh(Z.currentTime||0)},set time(C){Z.currentTime=Yf(C)},get speed(){return Z.playbackRate},set speed(C){Z.playbackRate=C},get duration(){return Eh(I)},play:()=>{h||(Z.play(),Xc(j))},pause:()=>Z.pause(),stop:()=>{if(h=!0,Z.playState==="idle")return;const{currentTime:C}=Z;if(C){const K=X3({...o,autoplay:!1});t.setWithVelocity(K.sample(C-UD).value,K.sample(C).value,UD)}z()},complete:()=>Z.finish(),cancel:z}}function Q$e({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const o=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Vi,pause:Vi,stop:Vi,then:u=>(u(),Promise.resolve()),cancel:Vi,complete:Vi});return e?X3({keyframes:[0,1],duration:0,delay:e,onComplete:o}):o()}const J$e={type:"spring",stiffness:500,damping:25,restSpeed:10},e7e=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),t7e={type:"keyframes",duration:.8},n7e={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},r7e=(t,{keyframes:e})=>e.length>2?t7e:Jg.has(t)?t.startsWith("scale")?e7e(e[1]):J$e:n7e,h9=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(im.test(e)||e==="0")&&!e.startsWith("url(")),i7e=new Set(["brightness","contrast","saturate","opacity"]);function o7e(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(LL)||[];if(!r)return t;const o=n.replace(r,"");let u=i7e.has(e)?1:0;return r!==n&&(u*=100),e+"("+u+o+")"}const s7e=/([a-z-]*)\(.*?\)/g,p9={...im,getAnimatableNone:t=>{const e=t.match(s7e);return e?e.map(o7e).join(" "):t}},a7e={...Mxe,color:Us,backgroundColor:Us,outlineColor:Us,fill:Us,stroke:Us,borderColor:Us,borderTopColor:Us,borderRightColor:Us,borderBottomColor:Us,borderLeftColor:Us,filter:p9,WebkitFilter:p9},e$=t=>a7e[t];function fSe(t,e){let n=e$(t);return n!==p9&&(n=im),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const mSe=t=>/^0[^.\s]+$/.test(t);function l7e(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||mSe(t)}function u7e(t,e,n,r){const o=h9(e,n);let u;Array.isArray(n)?u=[...n]:u=[null,n];const h=r.from!==void 0?r.from:t.get();let m;const _=[];for(let x=0;x<u.length;x++)u[x]===null&&(u[x]=x===0?h:u[x-1]),l7e(u[x])&&_.push(x),typeof u[x]=="string"&&u[x]!=="none"&&u[x]!=="0"&&(m=u[x]);if(o&&_.length&&m)for(let x=0;x<_.length;x++){const T=_[x];u[T]=fSe(e,m)}return u}function c7e({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:u,repeatType:h,repeatDelay:m,from:_,elapsed:x,...T}){return!!Object.keys(T).length}function vSe(t,e){return t[e]||t.default||t}const t$=(t,e,n,r={})=>o=>{const u=vSe(r,t)||{},h=u.delay||r.delay||0;let{elapsed:m=0}=r;m=m-Yf(h);const _=u7e(e,t,n,u),x=_[0],T=_[_.length-1],I=h9(t,x),N=h9(t,T);let H={keyframes:_,velocity:e.getVelocity(),ease:"easeOut",...u,delay:-m,onUpdate:Z=>{e.set(Z),u.onUpdate&&u.onUpdate(Z)},onComplete:()=>{o(),u.onComplete&&u.onComplete()}};if(c7e(u)||(H={...H,...r7e(t,H)}),H.duration&&(H.duration=Yf(H.duration)),H.repeatDelay&&(H.repeatDelay=Yf(H.repeatDelay)),!I||!N||s$e.current||u.type===!1)return Q$e(H);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const Z=Z$e(e,t,H);if(Z)return Z}return X3(H)};function Y3(t){return!!(Ks(t)&&t.add)}const gSe=t=>/^\-?\d*\.?\d+$/.test(t);function n$(t,e){t.indexOf(e)===-1&&t.push(e)}function r$(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function d7e([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const o=n<0?t.length+n:n,[u]=t.splice(e,1);t.splice(o,0,u)}return t}class i${constructor(){this.subscriptions=[]}add(e){return n$(this.subscriptions,e),()=>r$(this.subscriptions,e)}notify(e,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,r);else for(let u=0;u<o;u++){const h=this.subscriptions[u];h&&h(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const h7e=t=>!isNaN(parseFloat(t)),UC={current:void 0};class p7e{constructor(e,n={}){this.version="10.16.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,o=!0)=>{this.prev=this.current,this.current=r;const{delta:u,timestamp:h}=gs;this.lastUpdated!==h&&(this.timeDelta=u,this.lastUpdated=h,xi.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>xi.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=h7e(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new i$);const r=this.events[e].add(n);return e==="change"?()=>{r(),xi.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return UC.current&&UC.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?dSe(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gg(t,e){return new p7e(t,e)}const ySe=t=>e=>e.test(t),f7e={test:t=>t==="auto",parse:t=>t},bSe=[e0,Fn,Gc,Ef,bWe,yWe,f7e],yC=t=>bSe.find(ySe(t)),m7e=[...bSe,Us,im],v7e=t=>m7e.find(ySe(t));function g7e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Gg(n))}function y7e(t,e){const n=FL(t,e);let{transitionEnd:r={},transition:o={},...u}=n?t.makeTargetAnimatable(n,!1):{};u={...u,...r};for(const h in u){const m=OWe(u[h]);g7e(t,h,m)}}function b7e(t,e,n){var r,o;const u=Object.keys(e).filter(m=>!t.hasValue(m)),h=u.length;if(h)for(let m=0;m<h;m++){const _=u[m],x=e[_];let T=null;Array.isArray(x)&&(T=x[0]),T===null&&(T=(o=(r=n[_])!==null&&r!==void 0?r:t.readValue(_))!==null&&o!==void 0?o:e[_]),T!=null&&(typeof T=="string"&&(gSe(T)||mSe(T))?T=parseFloat(T):!v7e(T)&&im.test(x)&&(T=fSe(_,x)),t.addValue(_,Gg(T,{owner:t})),n[_]===void 0&&(n[_]=T),T!==null&&t.setBaseTarget(_,T))}}function _7e(t,e){return e?(e[t]||e.default||e).from:void 0}function w7e(t,e,n){const r={};for(const o in t){const u=_7e(o,e);if(u!==void 0)r[o]=u;else{const h=n.getValue(o);h&&(r[o]=h.get())}}return r}function x7e({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function _Se(t,e,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:u=t.getDefaultTransition(),transitionEnd:h,...m}=t.makeTargetAnimatable(e);const _=t.getValue("willChange");r&&(u=r);const x=[],T=o&&t.animationState&&t.animationState.getState()[o];for(const I in m){const N=t.getValue(I),H=m[I];if(!N||H===void 0||T&&x7e(T,I))continue;const Z={delay:n,elapsed:0,...u};if(window.HandoffAppearAnimations&&!N.hasAnimated){const z=t.getProps()[i$e];z&&(Z.elapsed=window.HandoffAppearAnimations(z,I,N,xi))}N.start(t$(I,N,H,t.shouldReduceMotion&&Jg.has(I)?{type:!1}:Z));const j=N.animation;Y3(_)&&(_.add(I),j.then(()=>_.remove(I))),x.push(j)}return h&&Promise.all(x).then(()=>{h&&y7e(t,h)}),x}function f9(t,e,n={}){const r=FL(t,e,n.custom);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const u=r?()=>Promise.all(_Se(t,r,n)):()=>Promise.resolve(),h=t.variantChildren&&t.variantChildren.size?(_=0)=>{const{delayChildren:x=0,staggerChildren:T,staggerDirection:I}=o;return S7e(t,e,x+_,T,I,n)}:()=>Promise.resolve(),{when:m}=o;if(m){const[_,x]=m==="beforeChildren"?[u,h]:[h,u];return _().then(()=>x())}else return Promise.all([u(),h(n.delay)])}function S7e(t,e,n=0,r=0,o=1,u){const h=[],m=(t.variantChildren.size-1)*r,_=o===1?(x=0)=>x*r:(x=0)=>m-x*r;return Array.from(t.variantChildren).sort(E7e).forEach((x,T)=>{x.notify("AnimationStart",e),h.push(f9(x,e,{...u,delay:n+_(T)}).then(()=>x.notify("AnimationComplete",e)))}),Promise.all(h)}function E7e(t,e){return t.sortNodePosition(e)}function C7e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(u=>f9(t,u,n));r=Promise.all(o)}else if(typeof e=="string")r=f9(t,e,n);else{const o=typeof e=="function"?FL(t,e,n.custom):e;r=Promise.all(_Se(t,o,n))}return r.then(()=>t.notify("AnimationComplete",e))}const P7e=[...UW].reverse(),k7e=UW.length;function T7e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>C7e(t,n,r)))}function M7e(t){let e=T7e(t);const n=I7e();let r=!0;const o=(_,x)=>{const T=FL(t,x);if(T){const{transition:I,transitionEnd:N,...H}=T;_={..._,...H,...N}}return _};function u(_){e=_(t)}function h(_,x){const T=t.getProps(),I=t.getVariantContext(!0)||{},N=[],H=new Set;let Z={},j=1/0;for(let U=0;U<k7e;U++){const C=P7e[U],K=n[C],te=T[C]!==void 0?T[C]:I[C],pe=yP(te),Q=C===x?K.isActive:null;Q===!1&&(j=U);let Se=te===I[C]&&te!==T[C]&&pe;if(Se&&r&&t.manuallyAnimateOnMount&&(Se=!1),K.protectedKeys={...Z},!K.isActive&&Q===null||!te&&!K.prevProp||OL(te)||typeof te=="boolean")continue;const Pe=A7e(K.prevProp,te);let G=Pe||C===x&&K.isActive&&!Se&&pe||U>j&&pe;const ye=Array.isArray(te)?te:[te];let St=ye.reduce(o,{});Q===!1&&(St={});const{prevResolvedValues:kt={}}=K,it={...kt,...St},me=lt=>{G=!0,H.delete(lt),K.needsAnimating[lt]=!0};for(const lt in it){const Fe=St[lt],vt=kt[lt];Z.hasOwnProperty(lt)||(Fe!==vt?$3(Fe)&&$3(vt)?!Hxe(Fe,vt)||Pe?me(lt):K.protectedKeys[lt]=!0:Fe!==void 0?me(lt):H.add(lt):Fe!==void 0&&H.has(lt)?me(lt):K.protectedKeys[lt]=!0)}K.prevProp=te,K.prevResolvedValues=St,K.isActive&&(Z={...Z,...St}),r&&t.blockInitialAnimation&&(G=!1),G&&!Se&&N.push(...ye.map(lt=>({animation:lt,options:{type:C,..._}})))}if(H.size){const U={};H.forEach(C=>{const K=t.getBaseTarget(C);K!==void 0&&(U[C]=K)}),N.push({animation:U})}let z=!!N.length;return r&&T.initial===!1&&!t.manuallyAnimateOnMount&&(z=!1),r=!1,z?e(N):Promise.resolve()}function m(_,x,T){var I;if(n[_].isActive===x)return Promise.resolve();(I=t.variantChildren)===null||I===void 0||I.forEach(H=>{var Z;return(Z=H.animationState)===null||Z===void 0?void 0:Z.setActive(_,x)}),n[_].isActive=x;const N=h(T,_);for(const H in n)n[H].protectedKeys={};return N}return{animateChanges:h,setActive:m,setAnimateFunction:u,getState:()=>n}}function A7e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Hxe(e,t):!1}function dg(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function I7e(){return{animate:dg(!0),whileInView:dg(),whileHover:dg(),whileTap:dg(),whileDrag:dg(),whileFocus:dg(),exit:dg()}}class R7e extends dm{constructor(e){super(e),e.animationState||(e.animationState=M7e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),OL(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let O7e=0;class D7e extends dm{constructor(){super(...arguments),this.id=O7e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const u=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&u.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const L7e={animation:{Feature:R7e},exit:{Feature:D7e}},w0e=(t,e)=>Math.abs(t-e);function N7e(t,e){const n=w0e(t.x,e.x),r=w0e(t.y,e.y);return Math.sqrt(n**2+r**2)}class wSe{constructor(e,n,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=U8(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,I=N7e(x.offset,{x:0,y:0})>=3;if(!T&&!I)return;const{point:N}=x,{timestamp:H}=gs;this.history.push({...N,timestamp:H});const{onStart:Z,onMove:j}=this.handlers;T||(Z&&Z(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,x)},this.handlePointerMove=(x,T)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=B8(T,this.transformPagePoint),xi.update(this.updatePoint,!0)},this.handlePointerUp=(x,T)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:I,onSessionEnd:N}=this.handlers,H=U8(x.type==="pointercancel"?this.lastMoveEventInfo:B8(T,this.transformPagePoint),this.history);this.startEvent&&I&&I(x,H),N&&N(x,H)},!Bxe(e))return;this.handlers=n,this.transformPagePoint=r;const o=NL(e),u=B8(o,this.transformPagePoint),{point:h}=u,{timestamp:m}=gs;this.history=[{...h,timestamp:m}];const{onSessionStart:_}=n;_&&_(e,U8(u,this.history)),this.removeListeners=Xf(Sh(window,"pointermove",this.handlePointerMove),Sh(window,"pointerup",this.handlePointerUp),Sh(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Xc(this.updatePoint)}}function B8(t,e){return e?{point:e(t.point)}:t}function x0e(t,e){return{x:t.x-e.x,y:t.y-e.y}}function U8({point:t},e){return{point:t,delta:x0e(t,xSe(e)),offset:x0e(t,F7e(e)),velocity:B7e(e,.1)}}function F7e(t){return t[0]}function xSe(t){return t[t.length-1]}function B7e(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const o=xSe(t);for(;n>=0&&(r=t[n],!(o.timestamp-r.timestamp>Yf(e)));)n--;if(!r)return{x:0,y:0};const u=Eh(o.timestamp-r.timestamp);if(u===0)return{x:0,y:0};const h={x:(o.x-r.x)/u,y:(o.y-r.y)/u};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function Ha(t){return t.max-t.min}function m9(t,e=0,n=.01){return Math.abs(t-e)<=n}function S0e(t,e,n,r=.5){t.origin=r,t.originPoint=_i(e.min,e.max,t.origin),t.scale=Ha(n)/Ha(e),(m9(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=_i(n.min,n.max,t.origin)-t.originPoint,(m9(t.translate)||isNaN(t.translate))&&(t.translate=0)}function VC(t,e,n,r){S0e(t.x,e.x,n.x,r?r.originX:void 0),S0e(t.y,e.y,n.y,r?r.originY:void 0)}function E0e(t,e,n){t.min=n.min+e.min,t.max=t.min+Ha(e)}function U7e(t,e,n){E0e(t.x,e.x,n.x),E0e(t.y,e.y,n.y)}function C0e(t,e,n){t.min=e.min-n.min,t.max=t.min+Ha(e)}function jC(t,e,n){C0e(t.x,e.x,n.x),C0e(t.y,e.y,n.y)}function V7e(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?_i(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?_i(n,t,r.max):Math.min(t,n)),t}function P0e(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function j7e(t,{top:e,left:n,bottom:r,right:o}){return{x:P0e(t.x,n,o),y:P0e(t.y,e,r)}}function k0e(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function z7e(t,e){return{x:k0e(t.x,e.x),y:k0e(t.y,e.y)}}function H7e(t,e){let n=.5;const r=Ha(t),o=Ha(e);return o>r?n=_P(e.min,e.max-r,t.min):r>o&&(n=_P(t.min,t.max-o,e.min)),rm(0,1,n)}function G7e(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const v9=.35;function W7e(t=v9){return t===!1?t=0:t===!0&&(t=v9),{x:T0e(t,"left","right"),y:T0e(t,"top","bottom")}}function T0e(t,e,n){return{min:M0e(t,e),max:M0e(t,n)}}function M0e(t,e){return typeof t=="number"?t:t[e]||0}const A0e=()=>({translate:0,scale:1,origin:0,originPoint:0}),E_=()=>({x:A0e(),y:A0e()}),I0e=()=>({min:0,max:0}),ao=()=>({x:I0e(),y:I0e()});function Nc(t){return[t("x"),t("y")]}function SSe({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function $7e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function K7e(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function V8(t){return t===void 0||t===1}function g9({scale:t,scaleX:e,scaleY:n}){return!V8(t)||!V8(e)||!V8(n)}function gg(t){return g9(t)||ESe(t)||t.z||t.rotate||t.rotateX||t.rotateY}function ESe(t){return R0e(t.x)||R0e(t.y)}function R0e(t){return t&&t!=="0%"}function Z3(t,e,n){const r=t-n,o=e*r;return n+o}function O0e(t,e,n,r,o){return o!==void 0&&(t=Z3(t,o,r)),Z3(t,n,r)+e}function y9(t,e=0,n=1,r,o){t.min=O0e(t.min,e,n,r,o),t.max=O0e(t.max,e,n,r,o)}function CSe(t,{x:e,y:n}){y9(t.x,e.translate,e.scale,e.originPoint),y9(t.y,n.translate,n.scale,n.originPoint)}function q7e(t,e,n,r=!1){const o=n.length;if(!o)return;e.x=e.y=1;let u,h;for(let m=0;m<o;m++){u=n[m],h=u.projectionDelta;const _=u.instance;_&&_.style&&_.style.display==="contents"||(r&&u.options.layoutScroll&&u.scroll&&u!==u.root&&C_(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),h&&(e.x*=h.x.scale,e.y*=h.y.scale,CSe(t,h)),r&&gg(u.latestValues)&&C_(t,u.latestValues))}e.x=D0e(e.x),e.y=D0e(e.y)}function D0e(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function kf(t,e){t.min=t.min+e,t.max=t.max+e}function L0e(t,e,[n,r,o]){const u=e[o]!==void 0?e[o]:.5,h=_i(t.min,t.max,u);y9(t,e[n],e[r],h,e.scale)}const X7e=["x","scaleX","originX"],Y7e=["y","scaleY","originY"];function C_(t,e){L0e(t.x,e,X7e),L0e(t.y,e,Y7e)}function PSe(t,e){return SSe(K7e(t.getBoundingClientRect(),e))}function Z7e(t,e,n){const r=PSe(t,n),{scroll:o}=e;return o&&(kf(r.x,o.offset.x),kf(r.y,o.offset.y)),r}const Q7e=new WeakMap;class J7e{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ao(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=_=>{this.stopAnimation(),n&&this.snapToCursor(NL(_,"page").point)},u=(_,x)=>{const{drag:T,dragPropagation:I,onDragStart:N}=this.getProps();if(T&&!I&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Vxe(T),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Nc(Z=>{let j=this.getAxisMotionValue(Z).get()||0;if(Gc.test(j)){const{projection:z}=this.visualElement;if(z&&z.layout){const U=z.layout.layoutBox[Z];U&&(j=Ha(U)*(parseFloat(j)/100))}}this.originPoint[Z]=j}),N&&xi.update(()=>N(_,x),!1,!0);const{animationState:H}=this.visualElement;H&&H.setActive("whileDrag",!0)},h=(_,x)=>{const{dragPropagation:T,dragDirectionLock:I,onDirectionLock:N,onDrag:H}=this.getProps();if(!T&&!this.openGlobalLock)return;const{offset:Z}=x;if(I&&this.currentDirection===null){this.currentDirection=eKe(Z),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",x.point,Z),this.updateAxis("y",x.point,Z),this.visualElement.render(),H&&H(_,x)},m=(_,x)=>this.stop(_,x);this.panSession=new wSe(e,{onSessionStart:o,onStart:u,onMove:h,onSessionEnd:m},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:u}=this.getProps();u&&xi.update(()=>u(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:o}=this.getProps();if(!r||!VD(e,o,this.currentDirection))return;const u=this.getAxisMotionValue(e);let h=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(h=V7e(h,this.constraints[e],this.elastic[e])),u.set(h)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:r}=this.visualElement.projection||{},o=this.constraints;e&&x_(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=j7e(r.layoutBox,e):this.constraints=!1,this.elastic=W7e(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Nc(u=>{this.getAxisMotionValue(u)&&(this.constraints[u]=G7e(r.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!x_(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const u=Z7e(r,o.root,this.visualElement.getTransformPagePoint());let h=z7e(o.layout.layoutBox,u);if(n){const m=n($7e(h));this.hasMutatedConstraints=!!m,m&&(h=SSe(m))}return h}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:u,dragSnapToOrigin:h,onDragTransitionEnd:m}=this.getProps(),_=this.constraints||{},x=Nc(T=>{if(!VD(T,n,this.currentDirection))return;let I=_&&_[T]||{};h&&(I={min:0,max:0});const N=o?200:1e6,H=o?40:1e7,Z={type:"inertia",velocity:r?e[T]:0,bounceStiffness:N,bounceDamping:H,timeConstant:750,restDelta:1,restSpeed:10,...u,...I};return this.startAxisValueAnimation(T,Z)});return Promise.all(x).then(m)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(t$(e,r,0,n))}stopAnimation(){Nc(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Nc(n=>{const{drag:r}=this.getProps();if(!VD(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,u=this.getAxisMotionValue(n);if(o&&o.layout){const{min:h,max:m}=o.layout.layoutBox[n];u.set(e[n]-_i(h,m,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!x_(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Nc(h=>{const m=this.getAxisMotionValue(h);if(m){const _=m.get();o[h]=H7e({min:_,max:_},this.constraints[h])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Nc(h=>{if(!VD(h,e,null))return;const m=this.getAxisMotionValue(h),{min:_,max:x}=this.constraints[h];m.set(_i(_,x,o[h]))})}addListeners(){if(!this.visualElement.current)return;Q7e.set(this.visualElement,this);const e=this.visualElement.current,n=Sh(e,"pointerdown",_=>{const{drag:x,dragListener:T=!0}=this.getProps();x&&T&&this.start(_)}),r=()=>{const{dragConstraints:_}=this.getProps();x_(_)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,u=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),r();const h=_h(window,"resize",()=>this.scalePositionWithinConstraints()),m=o.addEventListener("didUpdate",({delta:_,hasLayoutChanged:x})=>{this.isDragging&&x&&(Nc(T=>{const I=this.getAxisMotionValue(T);I&&(this.originPoint[T]+=_[T].translate,I.set(I.get()+_[T].translate))}),this.visualElement.render())});return()=>{h(),n(),u(),m&&m()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:u=!1,dragElastic:h=v9,dragMomentum:m=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:u,dragElastic:h,dragMomentum:m}}}function VD(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function eKe(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class tKe extends dm{constructor(e){super(e),this.removeGroupControls=Vi,this.removeListeners=Vi,this.controls=new J7e(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vi}unmount(){this.removeGroupControls(),this.removeListeners()}}const N0e=t=>(e,n)=>{t&&xi.update(()=>t(e,n))};class nKe extends dm{constructor(){super(...arguments),this.removePointerDownListener=Vi}onPointerDown(e){this.session=new wSe(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:N0e(e),onStart:N0e(n),onMove:r,onEnd:(u,h)=>{delete this.session,o&&xi.update(()=>o(u,h))}}}mount(){this.removePointerDownListener=Sh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function rKe(){const t=Qt.useContext(BW);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,o=Qt.useId();return Qt.useEffect(()=>r(o),[]),!e&&n?[!1,()=>n&&n(o)]:[!0]}const s3={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function F0e(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const bC={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Fn.test(t))t=parseFloat(t);else return t;const n=F0e(t,e.target.x),r=F0e(t,e.target.y);return`${n}% ${r}%`}},iKe={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,o=im.parse(t);if(o.length>5)return r;const u=im.createTransformer(t),h=typeof o[0]!="number"?1:0,m=n.x.scale*e.x,_=n.y.scale*e.y;o[0+h]/=m,o[1+h]/=_;const x=_i(m,_,.5);return typeof o[2+h]=="number"&&(o[2+h]/=x),typeof o[3+h]=="number"&&(o[3+h]/=x),u(o)}};class oKe extends xye.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:u}=e;dWe(sKe),u&&(n.group&&n.group.add(u),r&&r.register&&o&&r.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),s3.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:o,isPresent:u}=this.props,h=r.projection;return h&&(h.isPresent=u,o||e.layoutDependency!==n||n===void 0?h.willUpdate():this.safeToRemove(),e.isPresent!==u&&(u?h.promote():h.relegate()||xi.postRender(()=>{const m=h.getStack();(!m||!m.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kSe(t){const[e,n]=rKe(),r=Qt.useContext(Sxe);return xye.createElement(oKe,{...t,layoutGroup:r,switchLayoutGroup:Qt.useContext(Exe),isPresent:e,safeToRemove:n})}const sKe={borderRadius:{...bC,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:bC,borderTopRightRadius:bC,borderBottomLeftRadius:bC,borderBottomRightRadius:bC,boxShadow:iKe},TSe=["TopLeft","TopRight","BottomLeft","BottomRight"],aKe=TSe.length,B0e=t=>typeof t=="string"?parseFloat(t):t,U0e=t=>typeof t=="number"||Fn.test(t);function lKe(t,e,n,r,o,u){o?(t.opacity=_i(0,n.opacity!==void 0?n.opacity:1,uKe(r)),t.opacityExit=_i(e.opacity!==void 0?e.opacity:1,0,cKe(r))):u&&(t.opacity=_i(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let h=0;h<aKe;h++){const m=`border${TSe[h]}Radius`;let _=V0e(e,m),x=V0e(n,m);if(_===void 0&&x===void 0)continue;_||(_=0),x||(x=0),_===0||x===0||U0e(_)===U0e(x)?(t[m]=Math.max(_i(B0e(_),B0e(x),r),0),(Gc.test(x)||Gc.test(_))&&(t[m]+="%")):t[m]=x}(e.rotate||n.rotate)&&(t.rotate=_i(e.rotate||0,n.rotate||0,r))}function V0e(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const uKe=MSe(0,.5,YW),cKe=MSe(.5,.95,Vi);function MSe(t,e,n){return r=>r<t?0:r>e?1:n(_P(t,e,r))}function j0e(t,e){t.min=e.min,t.max=e.max}function Al(t,e){j0e(t.x,e.x),j0e(t.y,e.y)}function z0e(t,e,n,r,o){return t-=e,t=Z3(t,1/n,r),o!==void 0&&(t=Z3(t,1/o,r)),t}function dKe(t,e=0,n=1,r=.5,o,u=t,h=t){if(Gc.test(e)&&(e=parseFloat(e),e=_i(h.min,h.max,e/100)-h.min),typeof e!="number")return;let m=_i(u.min,u.max,r);t===u&&(m-=e),t.min=z0e(t.min,e,n,m,o),t.max=z0e(t.max,e,n,m,o)}function H0e(t,e,[n,r,o],u,h){dKe(t,e[n],e[r],e[o],e.scale,u,h)}const hKe=["x","scaleX","originX"],pKe=["y","scaleY","originY"];function G0e(t,e,n,r){H0e(t.x,e,hKe,n?n.x:void 0,r?r.x:void 0),H0e(t.y,e,pKe,n?n.y:void 0,r?r.y:void 0)}function W0e(t){return t.translate===0&&t.scale===1}function ASe(t){return W0e(t.x)&&W0e(t.y)}function fKe(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function ISe(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function $0e(t){return Ha(t.x)/Ha(t.y)}class mKe{constructor(){this.members=[]}add(e){n$(this.members,e),e.scheduleRender()}remove(e){if(r$(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const u=this.members[o];if(u.isPresent!==!1){r=u;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function K0e(t,e,n){let r="";const o=t.x.translate/e.x,u=t.y.translate/e.y;if((o||u)&&(r=`translate3d(${o}px, ${u}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:_,rotateX:x,rotateY:T}=n;_&&(r+=`rotate(${_}deg) `),x&&(r+=`rotateX(${x}deg) `),T&&(r+=`rotateY(${T}deg) `)}const h=t.x.scale*e.x,m=t.y.scale*e.y;return(h!==1||m!==1)&&(r+=`scale(${h}, ${m})`),r||"none"}const vKe=(t,e)=>t.depth-e.depth;class gKe{constructor(){this.children=[],this.isDirty=!1}add(e){n$(this.children,e),this.isDirty=!0}remove(e){r$(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(vKe),this.isDirty=!1,this.children.forEach(e)}}function yKe(t,e){const n=performance.now(),r=({timestamp:o})=>{const u=o-n;u>=e&&(Xc(r),t(u-e))};return xi.read(r,!0),()=>Xc(r)}function bKe(t){window.MotionDebug&&window.MotionDebug.record(t)}function _Ke(t){return t instanceof SVGElement&&t.tagName!=="svg"}function wKe(t,e,n){const r=Ks(t)?t:Gg(t);return r.start(t$("",r,e,n)),r.animation}const q0e=["","X","Y","Z"],X0e=1e3;let xKe=0;const yg={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function RSe({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(h={},m=e==null?void 0:e()){this.id=xKe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{yg.totalNodes=yg.resolvedTargetDeltas=yg.recalculatedProjection=0,this.nodes.forEach(CKe),this.nodes.forEach(AKe),this.nodes.forEach(IKe),this.nodes.forEach(PKe),bKe(yg)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=m?m.root||m:this,this.path=m?[...m.path,m]:[],this.parent=m,this.depth=m?m.depth+1:0;for(let _=0;_<this.path.length;_++)this.path[_].shouldResetTransform=!0;this.root===this&&(this.nodes=new gKe)}addEventListener(h,m){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new i$),this.eventHandlers.get(h).add(m)}notifyListeners(h,...m){const _=this.eventHandlers.get(h);_&&_.notify(...m)}hasListeners(h){return this.eventHandlers.has(h)}mount(h,m=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=_Ke(h),this.instance=h;const{layoutId:_,layout:x,visualElement:T}=this.options;if(T&&!T.current&&T.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),m&&(x||_)&&(this.isLayoutDirty=!0),t){let I;const N=()=>this.root.updateBlockedByResize=!1;t(h,()=>{this.root.updateBlockedByResize=!0,I&&I(),I=yKe(N,250),s3.hasAnimatedSinceResize&&(s3.hasAnimatedSinceResize=!1,this.nodes.forEach(Z0e))})}_&&this.root.registerSharedNode(_,this),this.options.animate!==!1&&T&&(_||x)&&this.addEventListener("didUpdate",({delta:I,hasLayoutChanged:N,hasRelativeTargetChanged:H,layout:Z})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||T.getDefaultTransition()||NKe,{onLayoutAnimationStart:z,onLayoutAnimationComplete:U}=T.getProps(),C=!this.targetLayout||!ISe(this.targetLayout,Z)||H,K=!N&&H;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||K||N&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(I,K);const te={...vSe(j,"layout"),onPlay:z,onComplete:U};(T.shouldReduceMotion||this.options.layoutRoot)&&(te.delay=0,te.type=!1),this.startAnimation(te)}else N||Z0e(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=Z})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RKe),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let T=0;T<this.path.length;T++){const I=this.path[T];I.shouldResetTransform=!0,I.updateScroll("snapshot"),I.options.layoutRoot&&I.willUpdate(!1)}const{layoutId:m,layout:_}=this.options;if(m===void 0&&!_)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Y0e);return}this.isUpdating||this.nodes.forEach(TKe),this.isUpdating=!1,this.nodes.forEach(MKe),this.nodes.forEach(SKe),this.nodes.forEach(EKe),this.clearAllSnapshots();const m=performance.now();gs.delta=rm(0,1e3/60,m-gs.timestamp),gs.timestamp=m,gs.isProcessing=!0,A8.update.process(gs),A8.preRender.process(gs),A8.render.process(gs),gs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(kKe),this.sharedNodes.forEach(OKe)}scheduleUpdateProjection(){xi.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){xi.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let _=0;_<this.path.length;_++)this.path[_].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ao(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:m}=this.options;m&&m.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let m=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(m=!1),m&&(this.scroll={animationId:this.root.animationId,phase:h,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!o)return;const h=this.isLayoutDirty||this.shouldResetTransform,m=this.projectionDelta&&!ASe(this.projectionDelta),_=this.getTransformTemplate(),x=_?_(this.latestValues,""):void 0,T=x!==this.prevTransformTemplateValue;h&&(m||gg(this.latestValues)||T)&&(o(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const m=this.measurePageBox();let _=this.removeElementScroll(m);return h&&(_=this.removeTransform(_)),FKe(_),{animationId:this.root.animationId,measuredBox:m,layoutBox:_,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:h}=this.options;if(!h)return ao();const m=h.measureViewportBox(),{scroll:_}=this.root;return _&&(kf(m.x,_.offset.x),kf(m.y,_.offset.y)),m}removeElementScroll(h){const m=ao();Al(m,h);for(let _=0;_<this.path.length;_++){const x=this.path[_],{scroll:T,options:I}=x;if(x!==this.root&&T&&I.layoutScroll){if(T.isRoot){Al(m,h);const{scroll:N}=this.root;N&&(kf(m.x,-N.offset.x),kf(m.y,-N.offset.y))}kf(m.x,T.offset.x),kf(m.y,T.offset.y)}}return m}applyTransform(h,m=!1){const _=ao();Al(_,h);for(let x=0;x<this.path.length;x++){const T=this.path[x];!m&&T.options.layoutScroll&&T.scroll&&T!==T.root&&C_(_,{x:-T.scroll.offset.x,y:-T.scroll.offset.y}),gg(T.latestValues)&&C_(_,T.latestValues)}return gg(this.latestValues)&&C_(_,this.latestValues),_}removeTransform(h){const m=ao();Al(m,h);for(let _=0;_<this.path.length;_++){const x=this.path[_];if(!x.instance||!gg(x.latestValues))continue;g9(x.latestValues)&&x.updateSnapshot();const T=ao(),I=x.measurePageBox();Al(T,I),G0e(m,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,T)}return gg(this.latestValues)&&G0e(m,this.latestValues),m}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var m;const _=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=_.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=_.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=_.isSharedProjectionDirty);const x=!!this.resumingFrom||this!==_;if(!(h||x&&this.isSharedProjectionDirty||this.isProjectionDirty||!((m=this.parent)===null||m===void 0)&&m.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:I,layoutId:N}=this.options;if(!(!this.layout||!(I||N))){if(this.resolvedRelativeTargetAt=gs.timestamp,!this.targetDelta&&!this.relativeTarget){const H=this.getClosestProjectingParent();H&&H.layout&&this.animationProgress!==1?(this.relativeParent=H,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ao(),this.relativeTargetOrigin=ao(),jC(this.relativeTargetOrigin,this.layout.layoutBox,H.layout.layoutBox),Al(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ao(),this.targetWithTransforms=ao()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),U7e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Al(this.target,this.layout.layoutBox),CSe(this.target,this.targetDelta)):Al(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const H=this.getClosestProjectingParent();H&&!!H.resumingFrom==!!this.resumingFrom&&!H.options.layoutScroll&&H.target&&this.animationProgress!==1?(this.relativeParent=H,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ao(),this.relativeTargetOrigin=ao(),jC(this.relativeTargetOrigin,this.target,H.target),Al(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}yg.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||g9(this.parent.latestValues)||ESe(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var h;const m=this.getLead(),_=!!this.resumingFrom||this!==m;let x=!0;if((this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty)&&(x=!1),_&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(x=!1),this.resolvedRelativeTargetAt===gs.timestamp&&(x=!1),x)return;const{layout:T,layoutId:I}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(T||I))return;Al(this.layoutCorrected,this.layout.layoutBox);const N=this.treeScale.x,H=this.treeScale.y;q7e(this.layoutCorrected,this.treeScale,this.path,_),m.layout&&!m.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(m.target=m.layout.layoutBox);const{target:Z}=m;if(!Z){this.projectionTransform&&(this.projectionDelta=E_(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=E_(),this.projectionDeltaWithTransform=E_());const j=this.projectionTransform;VC(this.projectionDelta,this.layoutCorrected,Z,this.latestValues),this.projectionTransform=K0e(this.projectionDelta,this.treeScale),(this.projectionTransform!==j||this.treeScale.x!==N||this.treeScale.y!==H)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",Z)),yg.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),h){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(h,m=!1){const _=this.snapshot,x=_?_.latestValues:{},T={...this.latestValues},I=E_();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!m;const N=ao(),H=_?_.source:void 0,Z=this.layout?this.layout.source:void 0,j=H!==Z,z=this.getStack(),U=!z||z.members.length<=1,C=!!(j&&!U&&this.options.crossfade===!0&&!this.path.some(LKe));this.animationProgress=0;let K;this.mixTargetDelta=te=>{const pe=te/1e3;Q0e(I.x,h.x,pe),Q0e(I.y,h.y,pe),this.setTargetDelta(I),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jC(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),DKe(this.relativeTarget,this.relativeTargetOrigin,N,pe),K&&fKe(this.relativeTarget,K)&&(this.isProjectionDirty=!1),K||(K=ao()),Al(K,this.relativeTarget)),j&&(this.animationValues=T,lKe(T,x,this.latestValues,pe,C,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=pe},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=xi.update(()=>{s3.hasAnimatedSinceResize=!0,this.currentAnimation=wKe(0,X0e,{...h,onUpdate:m=>{this.mixTargetDelta(m),h.onUpdate&&h.onUpdate(m)},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(X0e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:m,target:_,layout:x,latestValues:T}=h;if(!(!m||!_||!x)){if(this!==h&&this.layout&&x&&OSe(this.options.animationType,this.layout.layoutBox,x.layoutBox)){_=this.target||ao();const I=Ha(this.layout.layoutBox.x);_.x.min=h.target.x.min,_.x.max=_.x.min+I;const N=Ha(this.layout.layoutBox.y);_.y.min=h.target.y.min,_.y.max=_.y.min+N}Al(m,_),C_(m,T),VC(this.projectionDeltaWithTransform,this.layoutCorrected,m,T)}}registerSharedNode(h,m){this.sharedNodes.has(h)||this.sharedNodes.set(h,new mKe),this.sharedNodes.get(h).add(m);const x=m.options.initialPromotionConfig;m.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(m):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var h;const{layoutId:m}=this.options;return m?((h=this.getStack())===null||h===void 0?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:m}=this.options;return m?(h=this.getStack())===null||h===void 0?void 0:h.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:m,preserveFollowOpacity:_}={}){const x=this.getStack();x&&x.promote(this,_),h&&(this.projectionDelta=void 0,this.needsReset=!0),m&&this.setOptions({transition:m})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetRotation(){const{visualElement:h}=this.options;if(!h)return;let m=!1;const{latestValues:_}=h;if((_.rotate||_.rotateX||_.rotateY||_.rotateZ)&&(m=!0),!m)return;const x={};for(let T=0;T<q0e.length;T++){const I="rotate"+q0e[T];_[I]&&(x[I]=_[I],h.setStaticValue(I,0))}h.render();for(const T in x)h.setStaticValue(T,x[T]);h.scheduleRender()}getProjectionStyles(h={}){var m,_;const x={};if(!this.instance||this.isSVG)return x;if(this.isVisible)x.visibility="";else return{visibility:"hidden"};const T=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,x.opacity="",x.pointerEvents=o3(h.pointerEvents)||"",x.transform=T?T(this.latestValues,""):"none",x;const I=this.getLead();if(!this.projectionDelta||!this.layout||!I.target){const j={};return this.options.layoutId&&(j.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,j.pointerEvents=o3(h.pointerEvents)||""),this.hasProjected&&!gg(this.latestValues)&&(j.transform=T?T({},""):"none",this.hasProjected=!1),j}const N=I.animationValues||I.latestValues;this.applyTransformsToTarget(),x.transform=K0e(this.projectionDeltaWithTransform,this.treeScale,N),T&&(x.transform=T(N,x.transform));const{x:H,y:Z}=this.projectionDelta;x.transformOrigin=`${H.origin*100}% ${Z.origin*100}% 0`,I.animationValues?x.opacity=I===this?(_=(m=N.opacity)!==null&&m!==void 0?m:this.latestValues.opacity)!==null&&_!==void 0?_:1:this.preserveOpacity?this.latestValues.opacity:N.opacityExit:x.opacity=I===this?N.opacity!==void 0?N.opacity:"":N.opacityExit!==void 0?N.opacityExit:0;for(const j in G3){if(N[j]===void 0)continue;const{correct:z,applyTo:U}=G3[j],C=x.transform==="none"?N[j]:z(N[j],I);if(U){const K=U.length;for(let te=0;te<K;te++)x[U[te]]=C}else x[j]=C}return this.options.layoutId&&(x.pointerEvents=I===this?o3(h.pointerEvents)||"":"none"),x}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var m;return(m=h.currentAnimation)===null||m===void 0?void 0:m.stop()}),this.root.nodes.forEach(Y0e),this.root.sharedNodes.clear()}}}function SKe(t){t.updateLayout()}function EKe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=t.layout,{animationType:u}=t.options,h=n.source!==t.layout.source;u==="size"?Nc(I=>{const N=h?n.measuredBox[I]:n.layoutBox[I],H=Ha(N);N.min=r[I].min,N.max=N.min+H}):OSe(u,n.layoutBox,r)&&Nc(I=>{const N=h?n.measuredBox[I]:n.layoutBox[I],H=Ha(r[I]);N.max=N.min+H,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[I].max=t.relativeTarget[I].min+H)});const m=E_();VC(m,r,n.layoutBox);const _=E_();h?VC(_,t.applyTransform(o,!0),n.measuredBox):VC(_,r,n.layoutBox);const x=!ASe(m);let T=!1;if(!t.resumeFrom){const I=t.getClosestProjectingParent();if(I&&!I.resumeFrom){const{snapshot:N,layout:H}=I;if(N&&H){const Z=ao();jC(Z,n.layoutBox,N.layoutBox);const j=ao();jC(j,r,H.layoutBox),ISe(Z,j)||(T=!0),I.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=Z,t.relativeParent=I)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:_,layoutDelta:m,hasLayoutChanged:x,hasRelativeTargetChanged:T})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function CKe(t){yg.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function PKe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function kKe(t){t.clearSnapshot()}function Y0e(t){t.clearMeasurements()}function TKe(t){t.isLayoutDirty=!1}function MKe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Z0e(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function AKe(t){t.resolveTargetDelta()}function IKe(t){t.calcProjection()}function RKe(t){t.resetRotation()}function OKe(t){t.removeLeadSnapshot()}function Q0e(t,e,n){t.translate=_i(e.translate,0,n),t.scale=_i(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function J0e(t,e,n,r){t.min=_i(e.min,n.min,r),t.max=_i(e.max,n.max,r)}function DKe(t,e,n,r){J0e(t.x,e.x,n.x,r),J0e(t.y,e.y,n.y,r)}function LKe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const NKe={duration:.45,ease:[.4,0,.1,1]},eye=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),tye=eye("applewebkit/")&&!eye("chrome/")?Math.round:Vi;function nye(t){t.min=tye(t.min),t.max=tye(t.max)}function FKe(t){nye(t.x),nye(t.y)}function OSe(t,e,n){return t==="position"||t==="preserve-aspect"&&!m9($0e(e),$0e(n),.2)}const BKe=RSe({attachResizeListener:(t,e)=>_h(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),j8={current:void 0},DSe=RSe({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!j8.current){const t=new BKe({});t.mount(window),t.setOptions({layoutScroll:!0}),j8.current=t}return j8.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),UKe={pan:{Feature:nKe},drag:{Feature:tKe,ProjectionNode:DSe,MeasureLayout:kSe}},VKe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function jKe(t){const e=VKe.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function b9(t,e,n=1){const[r,o]=jKe(t);if(!r)return;const u=window.getComputedStyle(e).getPropertyValue(r);if(u){const h=u.trim();return gSe(h)?parseFloat(h):h}else return l9(o)?b9(o,e,n+1):o}function zKe(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(o=>{const u=o.get();if(!l9(u))return;const h=b9(u,r);h&&o.set(h)});for(const o in e){const u=e[o];if(!l9(u))continue;const h=b9(u,r);h&&(e[o]=h,n||(n={}),n[o]===void 0&&(n[o]=u))}return{target:e,transitionEnd:n}}const HKe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),LSe=t=>HKe.has(t),GKe=t=>Object.keys(t).some(LSe),rye=t=>t===e0||t===Fn,iye=(t,e)=>parseFloat(t.split(", ")[e]),oye=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/);if(o)return iye(o[1],e);{const u=r.match(/^matrix\((.+)\)$/);return u?iye(u[1],t):0}},WKe=new Set(["x","y","z"]),$Ke=$P.filter(t=>!WKe.has(t));function KKe(t){const e=[];return $Ke.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Q_={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:oye(4,13),y:oye(5,14)};Q_.translateX=Q_.x;Q_.translateY=Q_.y;const qKe=(t,e,n)=>{const r=e.measureViewportBox(),o=e.current,u=getComputedStyle(o),{display:h}=u,m={};h==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(x=>{m[x]=Q_[x](r,u)}),e.render();const _=e.measureViewportBox();return n.forEach(x=>{const T=e.getValue(x);T&&T.jump(m[x]),t[x]=Q_[x](_,u)}),t},XKe=(t,e,n={},r={})=>{e={...e},r={...r};const o=Object.keys(e).filter(LSe);let u=[],h=!1;const m=[];if(o.forEach(_=>{const x=t.getValue(_);if(!t.hasValue(_))return;let T=n[_],I=yC(T);const N=e[_];let H;if($3(N)){const Z=N.length,j=N[0]===null?1:0;T=N[j],I=yC(T);for(let z=j;z<Z&&N[z]!==null;z++)H?XW(yC(N[z])===H):H=yC(N[z])}else H=yC(N);if(I!==H)if(rye(I)&&rye(H)){const Z=x.get();typeof Z=="string"&&x.set(parseFloat(Z)),typeof N=="string"?e[_]=parseFloat(N):Array.isArray(N)&&H===Fn&&(e[_]=N.map(parseFloat))}else I!=null&&I.transform&&(H!=null&&H.transform)&&(T===0||N===0)?T===0?x.set(H.transform(T)):e[_]=I.transform(N):(h||(u=KKe(t),h=!0),m.push(_),r[_]=r[_]!==void 0?r[_]:e[_],x.jump(N))}),m.length){const _=m.indexOf("height")>=0?window.pageYOffset:null,x=qKe(e,t,m);return u.length&&u.forEach(([T,I])=>{t.getValue(T).set(I)}),t.render(),RL&&_!==null&&window.scrollTo({top:_}),{target:x,transitionEnd:r}}else return{target:e,transitionEnd:r}};function YKe(t,e,n,r){return GKe(e)?XKe(t,e,n,r):{target:e,transitionEnd:r}}const ZKe=(t,e,n,r)=>{const o=zKe(t,e,r);return e=o.target,r=o.transitionEnd,YKe(t,e,n,r)},_9={current:null},NSe={current:!1};function QKe(){if(NSe.current=!0,!!RL)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>_9.current=t.matches;t.addListener(e),e()}else _9.current=!1}function JKe(t,e,n){const{willChange:r}=e;for(const o in e){const u=e[o],h=n[o];if(Ks(u))t.addValue(o,u),Y3(r)&&r.add(o);else if(Ks(h))t.addValue(o,Gg(u,{owner:t})),Y3(r)&&r.remove(o);else if(h!==u)if(t.hasValue(o)){const m=t.getValue(o);!m.hasAnimated&&m.set(u)}else{const m=t.getStaticValue(o);t.addValue(o,Gg(m!==void 0?m:u,{owner:t}))}}for(const o in n)e[o]===void 0&&t.removeValue(o);return e}const sye=new WeakMap,FSe=Object.keys(bP),eqe=FSe.length,aye=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],tqe=VW.length;class nqe{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:o,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>xi.render(this.render,!1,!0);const{latestValues:m,renderState:_}=u;this.latestValues=m,this.baseTarget={...m},this.initialValues=n.initial?{...m}:{},this.renderState=_,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=h,this.isControllingVariants=DL(n),this.isVariantNode=xxe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:x,...T}=this.scrapeMotionValuesFromProps(n,{});for(const I in T){const N=T[I];m[I]!==void 0&&Ks(N)&&(N.set(m[I],!1),Y3(x)&&x.add(I))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,sye.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),NSe.current||QKe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_9.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){sye.delete(this.current),this.projection&&this.projection.unmount(),Xc(this.notifyUpdate),Xc(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Jg.has(e),o=n.on("change",h=>{this.latestValues[e]=h,this.props.onUpdate&&xi.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),u=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{o(),u()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,o,u){let h,m;for(let _=0;_<eqe;_++){const x=FSe[_],{isEnabled:T,Feature:I,ProjectionNode:N,MeasureLayout:H}=bP[x];N&&(h=N),T(n)&&(!this.features[x]&&I&&(this.features[x]=new I(this)),H&&(m=H))}if(!this.projection&&h){this.projection=new h(this.latestValues,this.parent&&this.parent.projection);const{layoutId:_,layout:x,drag:T,dragConstraints:I,layoutScroll:N,layoutRoot:H}=n;this.projection.setOptions({layoutId:_,layout:x,alwaysMeasureLayout:!!T||I&&x_(I),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof x=="string"?x:"both",initialPromotionConfig:u,layoutScroll:N,layoutRoot:H})}return m}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ao()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<aye.length;r++){const o=aye[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const u=e["on"+o];u&&(this.propEventSubscriptions[o]=this.on(o,u))}this.prevMotionValues=JKe(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<tqe;r++){const o=VW[r],u=this.props[o];(yP(u)||u===!1)&&(n[o]=u)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Gg(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,o=typeof r=="string"||typeof r=="object"?(n=qW(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&o!==void 0)return o;const u=this.getBaseTargetFromProps(this.props,e);return u!==void 0&&!Ks(u)?u:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new i$),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class BSe extends nqe{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:o},u){let h=w7e(r,e||{},this);if(o&&(n&&(n=o(n)),r&&(r=o(r)),h&&(h=o(h))),u){b7e(this,r,h);const m=ZKe(this,r,h,n);n=m.transitionEnd,r=m.target}return{transition:e,transitionEnd:n,...r}}}function rqe(t){return window.getComputedStyle(t)}class iqe extends BSe{readValueFromInstance(e,n){if(Jg.has(n)){const r=e$(n);return r&&r.default||0}else{const r=rqe(e),o=(kxe(n)?r.getPropertyValue(n):r[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return PSe(e,n)}build(e,n,r,o){zW(e,n,r,o.transformTemplate)}scrapeMotionValuesFromProps(e,n){return KW(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ks(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,o){Oxe(e,n,r,o)}}class oqe extends BSe{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Jg.has(n)){const r=e$(n);return r&&r.default||0}return n=Dxe.has(n)?n:$W(n),e.getAttribute(n)}measureInstanceViewportBox(){return ao()}scrapeMotionValuesFromProps(e,n){return Nxe(e,n)}build(e,n,r,o){GW(e,n,r,this.isSVGTag,o.transformTemplate)}renderInstance(e,n,r,o){Lxe(e,n,r,o)}mount(e){this.isSVGTag=WW(e.tagName),super.mount(e)}}const sqe=(t,e)=>jW(t)?new oqe(e,{enableHardwareAcceleration:!1}):new iqe(e,{enableHardwareAcceleration:!0}),aqe={layout:{ProjectionNode:DSe,MeasureLayout:kSe}},lqe={...L7e,...e$e,...UKe,...aqe},USe=uWe((t,e)=>BWe(t,e,lqe,sqe)),VSe=Qt.createContext(null);function uqe(t,e,n,r){if(!r)return t;const o=t.findIndex(T=>T.value===e);if(o===-1)return t;const u=r>0?1:-1,h=t[o+u];if(!h)return t;const m=t[o],_=h.layout,x=_i(_.min,_.max,.5);return u===1&&m.layout.max+n>x||u===-1&&m.layout.min+n<x?d7e(t,o,o+u):t}function cqe({children:t,as:e="ul",axis:n="y",onReorder:r,values:o,...u},h){const m=XP(()=>USe(e)),_=[],x=Qt.useRef(!1),T={axis:n,registerItem:(I,N)=>{N&&_.findIndex(H=>I===H.value)===-1&&(_.push({value:I,layout:N[n]}),_.sort(pqe))},updateOrder:(I,N,H)=>{if(x.current)return;const Z=uqe(_,I,N,H);_!==Z&&(x.current=!0,r(Z.map(hqe).filter(j=>o.indexOf(j)!==-1)))}};return Qt.useEffect(()=>{x.current=!1}),Qt.createElement(m,{...u,ref:h,ignoreStrict:!0},Qt.createElement(VSe.Provider,{value:T},t))}const dqe=Qt.forwardRef(cqe);function hqe(t){return t.value}function pqe(t,e){return t.layout.min-e.layout.min}function jSe(t){const e=XP(()=>Gg(t)),{isStatic:n}=Qt.useContext(FW);if(n){const[,r]=Qt.useState(t);Qt.useEffect(()=>e.on("change",r),[])}return e}const fqe=t=>typeof t=="object"&&t.mix,mqe=t=>fqe(t)?t.mix:void 0;function vqe(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],o=t[1+n],u=t[2+n],h=t[3+n],m=JW(o,u,{mixer:mqe(u[0]),...h});return e?m(r):m}function zSe(t,e){const n=jSe(e()),r=()=>n.set(e());return r(),a9(()=>{const o=()=>xi.update(r,!1,!0),u=t.map(h=>h.on("change",o));return()=>{u.forEach(h=>h()),Xc(r)}}),n}function gqe(t){UC.current=[],t();const e=zSe(UC.current,t);return UC.current=void 0,e}function yqe(t,e,n,r){if(typeof t=="function")return gqe(t);const o=typeof e=="function"?e:vqe(e,n,r);return Array.isArray(t)?lye(t,o):lye([t],([u])=>o(u))}function lye(t,e){const n=XP(()=>[]);return zSe(t,()=>{n.length=0;const r=t.length;for(let o=0;o<r;o++)n[o]=t[o].get();return e(n)})}function uye(t,e=0){return Ks(t)?t:jSe(e)}function bqe({children:t,style:e={},value:n,as:r="li",onDrag:o,layout:u=!0,...h},m){const _=XP(()=>USe(r)),x=Qt.useContext(VSe),T={x:uye(e.x),y:uye(e.y)},I=yqe([T.x,T.y],([z,U])=>z||U?1:"unset"),N=Qt.useRef(null),{axis:H,registerItem:Z,updateOrder:j}=x;return Qt.useEffect(()=>{Z(n,N.current)},[x]),Qt.createElement(_,{drag:H,...h,dragSnapToOrigin:!0,style:{...e,x:T.x,y:T.y,zIndex:I},layout:u,onDrag:(z,U)=>{const{velocity:C}=U;C[H]&&j(n,T[H].get(),C[H]),o&&o(z,U)},onLayoutMeasure:z=>{N.current=z},ref:m,ignoreStrict:!0},t)}const _qe=Qt.forwardRef(bqe),HSe={Group:dqe,Item:_qe},wqe=Lt.jsxs("svg",{className:"closeIcon",width:"14",height:"14",fill:"none",stroke:"#666666",strokeMiterlimit:"10",children:[Lt.jsx("circle",{cx:"7",cy:"7",r:"6"}),Lt.jsx("line",{x1:"4",y1:"4",x2:"10",y2:"10"}),Lt.jsx("line",{x1:"4",y1:"10",x2:"10",y2:"4"})]}),xqe=Lt.jsx("svg",{className:"dragIcon",width:"14",height:"14",fill:"#666666",stroke:"none",children:Lt.jsx("path",{d:`M10.43,4H3.57C3.26,4,3,4.22,3,4.5v1C3,5.78,3.26,6,3.57,6h6.86C10.74,6,11,5.78,11,5.5v-1
C11,4.22,10.74,4,10.43,4z M10.43,8H3.57C3.26,8,3,8.22,3,8.5v1C3,9.78,3.26,10,3.57,10h6.86C10.74,10,11,9.78,11,9.5v-1
C11,8.22,10.74,8,10.43,8z`})});function Sqe(t){return Lt.jsx(HSe.Item,{value:t.title,children:Lt.jsxs("div",{children:[xqe,Lt.jsx("span",{children:t.title}),Lt.jsx("button",{className:"closeIcon",onClick:()=>{t.onDelete(t.index)},children:wqe})]})},t.title)}function Eqe(t){const[e,n]=Qt.useState(!1),[r,o]=Qt.useState(t.options),u=x=>{t.onDragComplete(x),o(x)},h=x=>{const T=[...r];T.splice(x,1),u(T)},m=[];r.forEach((x,T)=>{m.push(Lt.jsx(Sqe,{index:T,title:x,onDelete:h},x))});let _="dropdown draggable";return t.subdropdown&&(_+=" subdropdown"),Lt.jsxs("div",{className:_,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[Lt.jsx(_xe,{title:t.title}),Lt.jsx(HSe.Group,{axis:"y",values:r,onReorder:u,style:{visibility:e?"visible":"hidden"},children:m})]})}function Cqe(t){const{option:e}=t,[n,r]=Qt.useState("");let o=null;switch(e.type){case"draggable":o=Lt.jsx(Eqe,{title:e.title,options:e.value,onDragComplete:u=>{e.onDragComplete!==void 0&&e.onDragComplete(u)},subdropdown:!0});break;case"dropdown":o=Lt.jsx(GSe,{title:e.title,options:e.value,onSelect:e.onSelect,subdropdown:!0});break;case"option":o=Lt.jsx("button",{onClick:()=>{e.onSelect!==void 0&&e.onSelect(e.value),e.selectable&&(n!==e.title?r(e.title):r(""))},children:e.title});break}return Lt.jsx("li",{className:n===e.title?"selected":"",children:o},Q3e())}function GSe(t){const[e,n]=Qt.useState(!1),r=[];t.options.map((u,h)=>{t.onSelect!==void 0&&(u.onSelect=t.onSelect),r.push(Lt.jsx(Cqe,{option:u},h))});let o="dropdown";return t.subdropdown&&(o+=" subdropdown"),Lt.jsxs("div",{className:o,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[Lt.jsx(_xe,{title:t.title}),Lt.jsx("ul",{style:{visibility:e?"visible":"hidden"},children:r})]})}function w9(t){const[e,n]=Qt.useState(t.open!==void 0?t.open:!0),r=!e||t.children===void 0;return Lt.jsxs("div",{className:`accordion ${r?"hide":""}`,children:[Lt.jsxs("button",{className:"toggle",onClick:()=>{const o=!e;t.onToggle!==void 0&&t.onToggle(o),n(o)},children:[Lt.jsx("p",{className:`status ${e?"open":""}`,children:"Toggle"}),Lt.jsx("p",{className:"label",children:t.label})]}),t.button,Lt.jsx("div",{className:e?"open":"",children:Lt.jsx("div",{children:t.children})})]})}function WSe(t){const[e,n]=Qt.useState(t.child.children.length>0),r=t.child.children.length>0,o=[];return t.child.children.length>0&&t.child.children.map(u=>{o.push(Lt.jsx(WSe,{child:u},Math.random()))}),Lt.jsxs("div",{className:"childObject",children:[Lt.jsxs("div",{className:"child",children:[r?Lt.jsx("button",{className:"status",style:{backgroundPositionX:e?"-14px":"2px"},onClick:()=>{n(!e)}}):null,Lt.jsx("button",{className:"name",style:{left:r?"20px":"5px"},onClick:()=>{Mi.three.getObject(t.child.uuid)},children:t.child.name.length>0?`${t.child.name} (${t.child.type})`:`${t.child.type}::${t.child.uuid}`}),Lt.jsx("div",{className:`icon ${_4e(t.child)}`})]}),Lt.jsx("div",{className:e?"open":"",children:Lt.jsx("div",{className:"container",children:o})})]},Math.random())}function Pqe(t){const e=[];return t.child.children.map(n=>{e.push(Lt.jsx(WSe,{child:n},Math.random()))}),Lt.jsx("div",{className:`scene ${t.class!==void 0?t.class:""}`,children:e})}const kqe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAABkCAYAAAA8AQ3AAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEoklEQVR4nO3aQc4aMRAFYR+AOQv3Px3ZRYoSoh8YxvX61YJdSdPuD++81lqPZ7/b7fa43++P4zieNnbPu+M40PO1dXqwujc9WIeY0nk5WJ0erO4DD84hpnReDlanB6v70INxiCmdl4PV6cHqTvDYf4gpnZeD1enB6k7yyDgsvfNysDo9WN2JHvzD0jsvB6vTg9Wd6kE/LL3zcrA6PVjd2R6LfFh65+VgdXqwum94LOph6Z2Xg9Xpweq+5bGIh6V3Xg5Wpwer+7IH67D0zsvB6vRgdRd4cA5L77wcrE4PVneRB+Ow9M7Lwer0YHUXeuw/LL3zcrA6PVjdxR4ZSynBsNMjqtvgwV9KEYadHjHdFg/6Uqow7PQI6XZ5+NIdhGGnR0K308OX7iAMOz3o3W6PRVxKK4adHuQO4sFaSjmGnR7IDuTBWYoYdnrwOpgHYyli2OnB64Ae+5cihp0evA7qkbG8EozaTg9WB/bgL68Io7LTg9WhPejLq8Io7PRgdXSPqpfudIy2Tg9Wl+BR89J9F0bCn6BpL3qw9vLqdxdxebuXkv5deqcHqwvzYC0PspTY79I7PVhdoAdneaClRH6X3unB6kI9GMuDLSXuu/ROD1YX7LF/ecClRH2X3unB6sI9MpZcgjGu04PVDfDgL7kIY1SnB6sb4UFfchXGoE4PVjfFY8RL9ykYUzo9WN0kj/iX7pMwJnR6sLppHou45N1LoX6X3unB6oZ6sJYMWQruu/ROD1Y32IOzZNBSUN+ld3qwuuEejCXTOy8Hq9OD1V3osf+w9M7Lwer0YHUXe2QspQTDTo+oboMHfylFGHZ6xHRbPOhLqcKw0yOk2+Ux4qX7FAw7PRK6nR7xL90nYdjpQe92eyziUlox7PQgdxAP1lLKMez0QHYgD85SxLDTg9fBPBhLEcNOD14H9Ni/FDHs9OB1UI+M5ZVg1HZ6sDqwB395RRiVnR6sDu1BX14VRmGnB6uje1S9dKdjtHV6sLoEj5qX7gkYTZ0erC7FY5GHa8No6fRgdWEe6OHaMMZ3erC6QA/0cG0Yozs9WF2oB3q4NoyxnR6sLtgDPVwbxshOD1YX7oEerg1jXKcHqxvggR6uDWNUpwerG+GBHq4NY1CnB6ub4jHipfsUjCmdHqxukkf8S/dJGBM6PVjdNI9FHq4NI73Tg9UN9UAP14YR2+nB6gZ7oIdrw4js9GB1wz3Qw7VhxHV6sLoCD/RwbRhRnR6srsQDPVwbRkynB6sr8kAP14YR0enB6qo80MO1YQR0erC6Ng/0S/c2DHqnB6tr9MC+dG/EIHd6sLpWj0UcrhWD2unB6so9WMOVY+A6PVidHqDhxGB1erA6PdZjUYYTg9Xpwer0+P3bP5wYrE4PVqfHHz8x7PSgdnr89RPDTg9ip8c/fmLY6cHr9HjyE8NOD1anx/Pu8pfuYrA6PVidHv/vlhi9nR6sTo8fdWI0dnqwOj1+3InR1unB6vR4qROjqdOD1enxcidGS6cHq9PjrU6Mhk4PVqfH250Y0zs9WJ0eH3RizO70YHV6fNad+tJdDFanB6vT4/PutJfuYrA6PVidHud0vwA7LKl1AiiR5gAAAABJRU5ErkJggg==";function Tqe(t){return"items"in t}function wP(t){function e(r,o){console.log("onChange:",r,o)}const n=[];return t.items.forEach(r=>{Tqe(r)?n.push(Lt.jsx(wP,{title:r.title,items:r.items},Math.random())):n.push(Lt.jsx(PC,{title:r.title,prop:r.prop,value:r.value,type:r.type,min:r.min,max:r.max,step:r.step,disabled:r.disabled,onChange:(o,u)=>{r.onChange!==void 0?r.onChange(o,u):e(o,u)}},Math.random()))}),Lt.jsx(w9,{label:t.title,open:!1,children:n})}function Mqe(t){return!(t==="alphaHash"||t==="alphaToCoverage"||t==="attenuationDistance"||t==="colorWrite"||t==="combine"||t==="defaultAttributeValues"||t==="depthFunc"||t==="forceSinglePass"||t==="glslVersion"||t==="linewidth"||t==="normalMapType"||t==="precision"||t==="premultipliedAlpha"||t==="shadowSide"||t==="side"||t==="toneMapped"||t==="uniformsGroups"||t==="uniformsNeedUpdate"||t==="userData"||t==="vertexColors"||t==="version"||t==="wireframeLinecap"||t==="wireframeLinejoin"||t==="wireframeLinewidth"||t.slice(0,5)==="blend"||t.slice(0,4)==="clip"||t.slice(0,7)==="polygon"||t.slice(0,7)==="stencil"||t.slice(0,2)==="is")}function hg(t){switch(t){case"anisotropyRotation":return"Anisotropy Rotation";case"aoMap":return"AO Map";case"aoMapIntensity":return"AO Map Intensity";case"attenuationColor":return"Attenuation Color";case"bumpScale":return"Bump Scale";case"clearcoatNormalScale":return"Clearcoat Normal Scale";case"clearcoatRoughness":return"Clearcoat Roughness";case"color":return"Color";case"defines":return"Defines";case"depthTest":return"Depth Test";case"depthWrite":return"Depth Write";case"displacementBias":return"Displacement Bias";case"displacementScale":return"Displacement Scale";case"dithering":return"Dithering";case"emissive":return"Emissive";case"emissiveIntensity":return"Emissive Intensity";case"envMap":return"ENV Map";case"envMapIntensity":return"ENV Map Intensity";case"extensions":return"Extensions";case"flatShading":return"Flat Shading";case"fragmentShader":return"Fragment Shader";case"fog":return"Fog";case"ior":return"IOR";case"iridescenceIOR":return"Iridescence IOR";case"iridescenceThicknessRange":return"Iridescence Thickness Range";case"lights":return"Lights";case"lightMapIntensity":return"Light Map Intensity";case"map":return"Map";case"metalness":return"Metalness";case"name":return"Name";case"normalScale":return"Normal Scale";case"opacity":return"Opacity";case"reflectivity":return"Reflectivity";case"refractionRatio":return"Refraction Ratio";case"roughness":return"Roughness";case"sheenColor":return"Sheen Color";case"sheenRoughness":return"Sheen Roughness";case"specularColor":return"Specular Color";case"specularIntensity":return"Specular Intensity";case"thickness":return"Thickness";case"transparent":return"Transparent";case"type":return"Type";case"uuid":return"UUID";case"uniforms":return"Uniforms";case"vertexShader":return"Vertex Shader";case"visible":return"Visible";case"wireframe":return"Wireframe"}return t}function Aqe(t){return t.toLowerCase().search("intensity")>-1||t==="anisotropyRotation"||t==="bumpScale"||t==="clearcoatRoughness"||t==="displacementBias"||t==="displacementScale"||t==="metalness"||t==="opacity"||t==="reflectivity"||t==="refractionRatio"||t==="roughness"||t==="sheenRoughness"||t==="thickness"}function Iqe(){const t=document.createElement("input");return t.type="file",new Promise((e,n)=>{t.addEventListener("change",function(){if(t.files===null)n();else{const r=t.files[0],o=new FileReader;o.onload=function(u){e(u.target.result)},o.readAsDataURL(r)}}),t.click()})}function cye(t,e,n){const r=[];for(const o in t){if(!Mqe(o))continue;const u=typeof t[o],h=t[o];if(u==="boolean"||u==="number"||u==="string"){const m={title:hg(o),prop:o,type:u,value:h,min:void 0,max:void 0,onChange:(_,x)=>{n.updateObject(e.uuid,`material.${_}`,x),u==="boolean"&&n.updateObject(e.uuid,"material.needsUpdate",!0)}};Aqe(o)&&(m.value=Number(h),m.type="range",m.min=0,m.max=1,m.step=.01),r.push(m)}else if(u==="object")if(h.isColor)r.push({title:hg(o),prop:o,type:"color",value:h,onChange:(m,_)=>{n.updateObject(e.uuid,`material.${m}`,new Pr(_))}});else if(Array.isArray(h)){const m=[];for(const _ in h)m.push({title:`${_}`,type:`${typeof h[_]}`,value:h[_],onChange:(x,T)=>{console.log("change!",x,T)}});r.push({title:hg(o),items:m})}else{const m=[];for(const _ in h){const x=h[_];switch(typeof x){case"boolean":case"number":case"string":_==="src"?r.push({title:hg(o),type:"image",value:x,onChange:(I,N)=>{n.createTexture(e.uuid,`material.${o}`,N)}}):m.push({title:`${hg(_)}`,prop:`material.${o}.${_}`,type:`${typeof t[o][_]}`,value:h[_],onChange:(I,N)=>{console.log("change!",I,N)}});break;case"object":x.value.src!==void 0?m.push({title:hg(_),type:"image",value:x.value.src,onChange:(I,N)=>{n.createTexture(e.uuid,`material.${o}.${_}.value`,N)}}):m.push({title:_,type:`${typeof x.value}`,value:x.value,onChange:(I,N)=>{console.log("change!",I,N)}});break}}m.length>0&&r.push({title:hg(o),items:m})}else h!==void 0&&console.log("other:",o,u,h)}return r.sort((o,u)=>o.title<u.title?-1:o.title>u.title?1:0),r.push({title:"Update Material",type:"button",onChange:()=>{n.updateObject(e.uuid,"material.needsUpdate",!0)}}),r}function Rqe(t,e){const n=t.material;if(Array.isArray(n)){const r=[],o=n.length;for(let u=0;u<o;u++)r.push(Lt.jsx(wP,{title:`Material ${u}`,items:cye(n[u],t,e)}));return Lt.jsx(Lt.Fragment,{children:r})}else return Lt.jsx(wP,{title:"Material",items:cye(n,t,e)})}function PC(t){let e=t.value;e!==void 0&&e.isColor!==void 0&&(e=eLe(t.value));const[n,r]=Qt.useState(e),o=Qt.useRef(null),u=Qt.useRef(null),h=Qt.useRef(null);Qt.useEffect(()=>{var K;let T=!1,I=-1,N=0,H=Number(n);const Z=te=>{T=!0,N=H,I=te.clientX},j=te=>{if(!T)return;const pe=t.step!==void 0?t.step:1,Q=(te.clientX-I)*pe;H=Number((N+Q).toFixed(4)),u.current!==null&&(u.current.value=H.toString()),t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,H)},z=()=>{T=!1},U=()=>{T=!1},C=t.type==="number";return C&&((K=o.current)==null||K.addEventListener("mousedown",Z,!1),document.addEventListener("mouseup",z,!1),document.addEventListener("mousemove",j,!1),document.addEventListener("contextmenu",U,!1)),()=>{var te;C&&((te=o.current)==null||te.removeEventListener("mousedown",Z),document.removeEventListener("mouseup",z),document.removeEventListener("mousemove",j),document.removeEventListener("contextmenu",U))}},[n]);const m=t.type==="string"&&(n.length>100||n.search(`
`)>-1),_=m||t.type==="image",x=T=>{let I=T.target.value;t.type==="boolean"&&(I=T.target.checked),r(I),t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,I)};return Lt.jsxs("div",{className:`field ${_?"block":""}`,children:[t.type!=="button"&&Lt.jsx("label",{ref:o,children:t.title},"fieldLabel"),t.type==="string"&&!m&&Lt.jsx("input",{type:"text",disabled:t.disabled,onChange:x,value:n}),t.type==="string"&&m&&Lt.jsx("textarea",{cols:50,rows:10,disabled:!0,onChange:x,value:n}),t.type==="boolean"&&Lt.jsx("input",{type:"checkbox",disabled:t.disabled,onChange:x,checked:n}),t.type==="number"&&Lt.jsx("input",{ref:u,type:"number",value:n,min:t.min,max:t.max,step:t.step,onChange:x}),t.type==="range"&&Lt.jsxs(Lt.Fragment,{children:[Lt.jsx("input",{type:"text",value:n.toString(),onChange:x,className:"min"}),Lt.jsx("input",{disabled:t.disabled,type:"range",value:n,min:t.min,max:t.max,step:t.step,onChange:x})]}),t.type==="color"&&Lt.jsxs(Lt.Fragment,{children:[Lt.jsx("input",{type:"text",value:n.toString(),onChange:x,className:"color"}),Lt.jsx("input",{type:"color",value:n,onChange:x})]}),t.type==="button"&&Lt.jsx("button",{onClick:()=>{t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,!0)},children:t.title}),t.type==="image"&&Lt.jsx("img",{ref:h,onClick:()=>{Iqe().then(T=>{h.current.src=T,t.onChange!==void 0&&t.onChange(t.prop!==void 0?t.prop:t.title,T)})},src:n!==void 0?n:kqe})]})}function dye(t){switch(t){case"fov":return"FOV";case"zoom":return"Zoom";case"near":return"Near";case"far":return"Far";case"focus":return"Focus";case"aspect":return"Aspect";case"filmGauge":return"Film Gauge";case"filmOffset":return"Film Offset";case"left":return"Left";case"right":return"Right";case"top":return"Top";case"bottom":return"Bottom"}return t}function Oqe(t,e){const n=[];if(t.perspectiveCameraInfo!==void 0)for(const r in t.perspectiveCameraInfo)n.push({title:dye(r),prop:r,type:"number",step:.01,value:t.perspectiveCameraInfo[r],onChange:(o,u)=>{e.updateObject(t.uuid,o,u),e.requestMethod(t.uuid,"updateProjectionMatrix")}});else if(t.orthographicCameraInfo!==void 0)for(const r in t.orthographicCameraInfo)n.push({title:dye(r),prop:r,type:"number",step:.01,value:t.perspectiveCameraInfo[r],onChange:(o,u)=>{e.updateObject(t.uuid,o,u),e.requestMethod(t.uuid,"updateProjectionMatrix")}});return Lt.jsx(wP,{title:"Camera",items:n})}function Dqe(t,e){const n=new uo;n.elements=t.matrix;const r=new dt,o=new AP,u=new dt;t.uuid.length>0&&(r.setFromMatrixPosition(n),o.setFromRotationMatrix(n),u.setFromMatrixScale(n));const h=(_,x)=>{e.updateObject(t.uuid,_,x)},m=[{title:"Position",items:[{title:"X",prop:"position.x",type:"number",value:r.x,onChange:h},{title:"Y",prop:"position.y",type:"number",value:r.y,onChange:h},{title:"Z",prop:"position.z",type:"number",value:r.z,onChange:h}]},{title:"Rotation",items:[{title:"X",prop:"rotation.x",type:"number",value:o.x,min:-Math.PI,max:Math.PI,step:.01,onChange:h},{title:"Y",prop:"rotation.y",type:"number",value:o.y,min:-Math.PI,max:Math.PI,step:.01,onChange:h},{title:"Z",prop:"rotation.z",type:"number",value:o.z,min:-Math.PI,max:Math.PI,step:.01,onChange:h}]},{title:"Scale",items:[{title:"X",prop:"scale.x",type:"number",value:u.x,step:.01,onChange:h},{title:"Y",prop:"scale.y",type:"number",value:u.y,step:.01,onChange:h},{title:"Z",prop:"scale.z",type:"number",value:u.z,step:.01,onChange:h}]}];return Lt.jsx(wP,{title:"Transform",items:m})}function Lqe(t){const[e,n]=Qt.useState(-1),[r,o]=Qt.useState({name:"",uuid:"",type:"",visible:!1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]});Qt.useEffect(()=>{function h(m){const _=m.value;o(_),n(Date.now())}return jr.addEventListener(zr.SET_OBJECT,h),()=>{jr.removeEventListener(zr.SET_OBJECT,h)}},[]);const u=r.type==="OrthographicCamera"||r.type==="PerspectiveCamera";return Lt.jsx("div",{id:"Inspector",className:t.class,children:r.uuid.length>0&&Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(PC,{type:"string",title:"Name",prop:"name",value:r.name,disabled:!0}),Lt.jsx(PC,{type:"string",title:"Type",prop:"type",value:r.type,disabled:!0}),Lt.jsx(PC,{type:"string",title:"UUID",prop:"uuid",value:r.uuid,disabled:!0}),Lt.jsx(PC,{type:"boolean",title:"Visible",prop:"visible",value:r.visible,onChange:(h,m)=>{Mi.three.updateObject(r.uuid,h,m)}}),Dqe(r,Mi.three),r.type.search("Camera")>-1?Oqe(r,Mi.three):null,r.material!==void 0?Rqe(r,Mi.three):null,null]})},e)}class Nqe extends Qt.Component{constructor(n){super(n);Bi(this,"onRefresh",()=>{Mi.three.getScene()});Bi(this,"setScene",n=>{this.setState(()=>({scene:n.value}))});this.state={scene:null},jr.addEventListener(zr.SET_SCENE,this.setScene)}componentDidMount(){this.onRefresh()}componentWillUnmount(){jr.removeEventListener(zr.SET_SCENE,this.setScene)}render(){var o;const n=this.componentState.scene!==null,r="Hierarchy"+(n?`: ${(o=this.componentState.scene)==null?void 0:o.name}`:"");return Lt.jsx("div",{id:"SceneHierarchy",children:Lt.jsxs(Lt.Fragment,{children:[n&&Lt.jsx(w9,{label:r,button:Lt.jsx("button",{className:"icon refresh hideText",onClick:this.onRefresh,children:"Refresh"}),open:!0,children:Lt.jsx(Pqe,{child:this.componentState.scene})}),Lt.jsx(w9,{label:"Inspector",children:Lt.jsx(Lqe,{},"Inspector")})]})},"SceneHierarchy")}get componentState(){return this.state}}function Fqe(){return Lt.jsx(eWe,{header:[Lt.jsx(GSe,{title:"Scenes",options:[{type:"option",title:"Scene 1",value:"scene1"},{type:"option",title:"Scene 2",value:"scene2"}],onSelect:t=>{Mi.send({target:"app",event:"selectComponent",data:{dropdown:"Scenes",value:t}})}},"Scenes")],children:Lt.jsx(Nqe,{},"SceneHierarchy")})}function Bqe(t){let e;const n=t.editor?"editor":"app";function r(m){var x,T,I,N,H,Z,j,z,U;let _;switch(m.event){case"custom":jr.dispatchEvent({type:zr.CUSTOM,value:m.data});break;case"selectComponent":jr.dispatchEvent({type:zr.SELECT_DROPDOWN,value:m.data});break;case"draggableListUpdate":jr.dispatchEvent({type:zr.DRAG_UPDATE,value:m.data});break;case"addFolder":(x=t.components.get("debug"))==null||x.addFolder(m.data.name,m.data.params,m.data.parent);break;case"bindObject":(T=t.components.get("debug"))==null||T.bind(m.data.name,m.data.params,m.data.parent);break;case"updateBind":(I=t.components.get("debug"))==null||I.triggerBind(m.data.id,m.data.value);break;case"addButton":(N=t.components.get("debug"))==null||N.button(m.data.name,m.data.callback,m.data.parent);break;case"clickButton":(H=t.components.get("debug"))==null||H.triggerButton(m.data.id);break;case"setSheet":_=(Z=t.components.get("theatre"))==null?void 0:Z.sheets.get(m.data.sheet),_!==void 0&&(e=_,s_.setSelection([_]));break;case"setSheetObject":_=(j=t.components.get("theatre"))==null?void 0:j.sheetObjects.get(`${m.data.sheet}_${m.data.key}`),_!==void 0&&s_.setSelection([_]);break;case"updateSheetObject":_=(z=t.components.get("theatre"))==null?void 0:z.sheetObjectCBs.get(m.data.sheetObject),_!==void 0&&_(m.data.values);break;case"updateTimeline":e=(U=t.components.get("theatre"))==null?void 0:U.sheets.get(m.data.sheet),e!==void 0&&(e.sequence.position=m.data.position);break;case"getScene":jr.dispatchEvent({type:zr.GET_SCENE});break;case"getObject":jr.dispatchEvent({type:zr.GET_OBJECT,value:m.data});break;case"updateObject":jr.dispatchEvent({type:zr.UPDATE_OBJECT,value:m.data});break;case"createTexture":jr.dispatchEvent({type:zr.CREATE_TEXTURE,value:m.data});break;case"requestMethod":jr.dispatchEvent({type:zr.REQUEST_METHOD,value:m.data});break}}function o(m){switch(m.event){case"custom":jr.dispatchEvent({type:zr.CUSTOM,value:m.data});break;case"setObject":jr.dispatchEvent({type:zr.SET_OBJECT,value:m.data});break;case"setScene":jr.dispatchEvent({type:zr.SET_SCENE,value:m.data});break}}function u(){s_.ui.hide()}function h(){s_.ui.restore(),s_.onSelectionChange(T=>{T.length<1||T.forEach(I=>{var j;let N=I.address.sheetId,H="setSheet",Z={};switch(I.type){case"Theatre_Sheet_PublicAPI":H="setSheet",Z={sheet:I.address.sheetId},e=(j=t.components.get("theatre"))==null?void 0:j.sheets.get(I.address.sheetId);break;case"Theatre_SheetObject_PublicAPI":H="setSheetObject",N+=`_${I.address.objectKey}`,Z={id:N,sheet:I.address.sheetId,key:I.address.objectKey};break}t.send({event:H,target:"app",data:Z})})});let m=0;const _=()=>{if(e!==void 0&&m!==e.sequence.position){m=e.sequence.position;const T=e;t.send({event:"updateTimeline",target:"app",data:{position:m,sheet:T.address.sheetId}})}},x=()=>{_(),requestAnimationFrame(x)};_(),x()}t.listen(m=>{n==="app"?r(m):o(m)}),t.editor?h():u()}s_.initialize(),Bqe(Mi);z8.createRoot(document.getElementById("root")).render(Lt.jsx(Lt.Fragment,{children:Lt.jsxs(Lt.Fragment,{children:[Lt.jsx(JGe,{}),Mi.editor?Lt.jsx(Fqe,{}):null]})}));
