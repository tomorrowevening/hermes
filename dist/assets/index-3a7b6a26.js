var yOe=Object.defineProperty;var bOe=(t,e,n)=>e in t?yOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Fi=(t,e,n)=>(bOe(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var ki=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function aye(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var lye={exports:{}},Z3={},uye={exports:{}},ar={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bP=Symbol.for("react.element"),_Oe=Symbol.for("react.portal"),wOe=Symbol.for("react.fragment"),xOe=Symbol.for("react.strict_mode"),SOe=Symbol.for("react.profiler"),EOe=Symbol.for("react.provider"),COe=Symbol.for("react.context"),POe=Symbol.for("react.forward_ref"),kOe=Symbol.for("react.suspense"),TOe=Symbol.for("react.memo"),MOe=Symbol.for("react.lazy"),bfe=Symbol.iterator;function AOe(t){return t===null||typeof t!="object"?null:(t=bfe&&t[bfe]||t["@@iterator"],typeof t=="function"?t:null)}var cye={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dye=Object.assign,hye={};function Z_(t,e,n){this.props=t,this.context=e,this.refs=hye,this.updater=n||cye}Z_.prototype.isReactComponent={};Z_.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Z_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pye(){}pye.prototype=Z_.prototype;function _9(t,e,n){this.props=t,this.context=e,this.refs=hye,this.updater=n||cye}var w9=_9.prototype=new pye;w9.constructor=_9;dye(w9,Z_.prototype);w9.isPureReactComponent=!0;var _fe=Array.isArray,fye=Object.prototype.hasOwnProperty,x9={current:null},mye={key:!0,ref:!0,__self:!0,__source:!0};function vye(t,e,n){var r,o={},u=null,h=null;if(e!=null)for(r in e.ref!==void 0&&(h=e.ref),e.key!==void 0&&(u=""+e.key),e)fye.call(e,r)&&!mye.hasOwnProperty(r)&&(o[r]=e[r]);var m=arguments.length-2;if(m===1)o.children=n;else if(1<m){for(var _=Array(m),x=0;x<m;x++)_[x]=arguments[x+2];o.children=_}if(t&&t.defaultProps)for(r in m=t.defaultProps,m)o[r]===void 0&&(o[r]=m[r]);return{$$typeof:bP,type:t,key:u,ref:h,props:o,_owner:x9.current}}function IOe(t,e){return{$$typeof:bP,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function S9(t){return typeof t=="object"&&t!==null&&t.$$typeof===bP}function ROe(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wfe=/\/+/g;function a6(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ROe(""+t.key):e.toString(36)}function BD(t,e,n,r,o){var u=typeof t;(u==="undefined"||u==="boolean")&&(t=null);var h=!1;if(t===null)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case bP:case _Oe:h=!0}}if(h)return h=t,o=o(h),t=r===""?"."+a6(h,0):r,_fe(o)?(n="",t!=null&&(n=t.replace(wfe,"$&/")+"/"),BD(o,e,n,"",function(x){return x})):o!=null&&(S9(o)&&(o=IOe(o,n+(!o.key||h&&h.key===o.key?"":(""+o.key).replace(wfe,"$&/")+"/")+t)),e.push(o)),1;if(h=0,r=r===""?".":r+":",_fe(t))for(var m=0;m<t.length;m++){u=t[m];var _=r+a6(u,m);h+=BD(u,e,n,_,o)}else if(_=AOe(t),typeof _=="function")for(t=_.call(t),m=0;!(u=t.next()).done;)u=u.value,_=r+a6(u,m++),h+=BD(u,e,n,_,o);else if(u==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return h}function KO(t,e,n){if(t==null)return t;var r=[],o=0;return BD(t,r,"","",function(u){return e.call(n,u,o++)}),r}function OOe(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ks={current:null},UD={transition:null},DOe={ReactCurrentDispatcher:Ks,ReactCurrentBatchConfig:UD,ReactCurrentOwner:x9};ar.Children={map:KO,forEach:function(t,e,n){KO(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return KO(t,function(){e++}),e},toArray:function(t){return KO(t,function(e){return e})||[]},only:function(t){if(!S9(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ar.Component=Z_;ar.Fragment=wOe;ar.Profiler=SOe;ar.PureComponent=_9;ar.StrictMode=xOe;ar.Suspense=kOe;ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DOe;ar.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=dye({},t.props),o=t.key,u=t.ref,h=t._owner;if(e!=null){if(e.ref!==void 0&&(u=e.ref,h=x9.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var m=t.type.defaultProps;for(_ in e)fye.call(e,_)&&!mye.hasOwnProperty(_)&&(r[_]=e[_]===void 0&&m!==void 0?m[_]:e[_])}var _=arguments.length-2;if(_===1)r.children=n;else if(1<_){m=Array(_);for(var x=0;x<_;x++)m[x]=arguments[x+2];r.children=m}return{$$typeof:bP,type:t.type,key:o,ref:u,props:r,_owner:h}};ar.createContext=function(t){return t={$$typeof:COe,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:EOe,_context:t},t.Consumer=t};ar.createElement=vye;ar.createFactory=function(t){var e=vye.bind(null,t);return e.type=t,e};ar.createRef=function(){return{current:null}};ar.forwardRef=function(t){return{$$typeof:POe,render:t}};ar.isValidElement=S9;ar.lazy=function(t){return{$$typeof:MOe,_payload:{_status:-1,_result:t},_init:OOe}};ar.memo=function(t,e){return{$$typeof:TOe,type:t,compare:e===void 0?null:e}};ar.startTransition=function(t){var e=UD.transition;UD.transition={};try{t()}finally{UD.transition=e}};ar.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ar.useCallback=function(t,e){return Ks.current.useCallback(t,e)};ar.useContext=function(t){return Ks.current.useContext(t)};ar.useDebugValue=function(){};ar.useDeferredValue=function(t){return Ks.current.useDeferredValue(t)};ar.useEffect=function(t,e){return Ks.current.useEffect(t,e)};ar.useId=function(){return Ks.current.useId()};ar.useImperativeHandle=function(t,e,n){return Ks.current.useImperativeHandle(t,e,n)};ar.useInsertionEffect=function(t,e){return Ks.current.useInsertionEffect(t,e)};ar.useLayoutEffect=function(t,e){return Ks.current.useLayoutEffect(t,e)};ar.useMemo=function(t,e){return Ks.current.useMemo(t,e)};ar.useReducer=function(t,e,n){return Ks.current.useReducer(t,e,n)};ar.useRef=function(t){return Ks.current.useRef(t)};ar.useState=function(t){return Ks.current.useState(t)};ar.useSyncExternalStore=function(t,e,n){return Ks.current.useSyncExternalStore(t,e,n)};ar.useTransition=function(){return Ks.current.useTransition()};ar.version="18.2.0";uye.exports=ar;var Qt=uye.exports;const gye=aye(Qt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LOe=Qt,NOe=Symbol.for("react.element"),FOe=Symbol.for("react.fragment"),BOe=Object.prototype.hasOwnProperty,UOe=LOe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,VOe={key:!0,ref:!0,__self:!0,__source:!0};function yye(t,e,n){var r,o={},u=null,h=null;n!==void 0&&(u=""+n),e.key!==void 0&&(u=""+e.key),e.ref!==void 0&&(h=e.ref);for(r in e)BOe.call(e,r)&&!VOe.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:NOe,type:t,key:u,ref:h,props:o,_owner:UOe.current}}Z3.Fragment=FOe;Z3.jsx=yye;Z3.jsxs=yye;lye.exports=Z3;var Nt=lye.exports,V8={},bye={exports:{}},za={},_ye={exports:{}},wye={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Ge,mt){var Je=Ge.length;Ge.push(mt);e:for(;0<Je;){var Be=Je-1>>>1,nt=Ge[Be];if(0<o(nt,mt))Ge[Be]=mt,Ge[Je]=nt,Je=Be;else break e}}function n(Ge){return Ge.length===0?null:Ge[0]}function r(Ge){if(Ge.length===0)return null;var mt=Ge[0],Je=Ge.pop();if(Je!==mt){Ge[0]=Je;e:for(var Be=0,nt=Ge.length,$t=nt>>>1;Be<$t;){var Ut=2*(Be+1)-1,Dt=Ge[Ut],en=Ut+1,on=Ge[en];if(0>o(Dt,Je))en<nt&&0>o(on,Dt)?(Ge[Be]=on,Ge[en]=Je,Be=en):(Ge[Be]=Dt,Ge[Ut]=Je,Be=Ut);else if(en<nt&&0>o(on,Je))Ge[Be]=on,Ge[en]=Je,Be=en;else break e}}return mt}function o(Ge,mt){var Je=Ge.sortIndex-mt.sortIndex;return Je!==0?Je:Ge.id-mt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;t.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();t.unstable_now=function(){return h.now()-m}}var _=[],x=[],M=1,R=null,N=3,H=!1,Q=!1,j=!1,z=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function K(Ge){for(var mt=n(x);mt!==null;){if(mt.callback===null)r(x);else if(mt.startTime<=Ge)r(x),mt.sortIndex=mt.expirationTime,e(_,mt);else break;mt=n(x)}}function te(Ge){if(j=!1,K(Ge),!Q)if(n(_)!==null)Q=!0,Fe(pe);else{var mt=n(x);mt!==null&&vt(te,mt.startTime-Ge)}}function pe(Ge,mt){Q=!1,j&&(j=!1,U(Pe),Pe=-1),H=!0;var Je=N;try{for(K(mt),R=n(_);R!==null&&(!(R.expirationTime>mt)||Ge&&!St());){var Be=R.callback;if(typeof Be=="function"){R.callback=null,N=R.priorityLevel;var nt=Be(R.expirationTime<=mt);mt=t.unstable_now(),typeof nt=="function"?R.callback=nt:R===n(_)&&r(_),K(mt)}else r(_);R=n(_)}if(R!==null)var $t=!0;else{var Ut=n(x);Ut!==null&&vt(te,Ut.startTime-mt),$t=!1}return $t}finally{R=null,N=Je,H=!1}}var Z=!1,be=null,Pe=-1,G=5,ye=-1;function St(){return!(t.unstable_now()-ye<G)}function kt(){if(be!==null){var Ge=t.unstable_now();ye=Ge;var mt=!0;try{mt=be(!0,Ge)}finally{mt?it():(Z=!1,be=null)}}else Z=!1}var it;if(typeof C=="function")it=function(){C(kt)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,lt=me.port2;me.port1.onmessage=kt,it=function(){lt.postMessage(null)}}else it=function(){z(kt,0)};function Fe(Ge){be=Ge,Z||(Z=!0,it())}function vt(Ge,mt){Pe=z(function(){Ge(t.unstable_now())},mt)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Ge){Ge.callback=null},t.unstable_continueExecution=function(){Q||H||(Q=!0,Fe(pe))},t.unstable_forceFrameRate=function(Ge){0>Ge||125<Ge?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<Ge?Math.floor(1e3/Ge):5},t.unstable_getCurrentPriorityLevel=function(){return N},t.unstable_getFirstCallbackNode=function(){return n(_)},t.unstable_next=function(Ge){switch(N){case 1:case 2:case 3:var mt=3;break;default:mt=N}var Je=N;N=mt;try{return Ge()}finally{N=Je}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Ge,mt){switch(Ge){case 1:case 2:case 3:case 4:case 5:break;default:Ge=3}var Je=N;N=Ge;try{return mt()}finally{N=Je}},t.unstable_scheduleCallback=function(Ge,mt,Je){var Be=t.unstable_now();switch(typeof Je=="object"&&Je!==null?(Je=Je.delay,Je=typeof Je=="number"&&0<Je?Be+Je:Be):Je=Be,Ge){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Je+nt,Ge={id:M++,callback:mt,priorityLevel:Ge,startTime:Je,expirationTime:nt,sortIndex:-1},Je>Be?(Ge.sortIndex=Je,e(x,Ge),n(_)===null&&Ge===n(x)&&(j?(U(Pe),Pe=-1):j=!0,vt(te,Je-Be))):(Ge.sortIndex=nt,e(_,Ge),Q||H||(Q=!0,Fe(pe))),Ge},t.unstable_shouldYield=St,t.unstable_wrapCallback=function(Ge){var mt=N;return function(){var Je=N;N=mt;try{return Ge.apply(this,arguments)}finally{N=Je}}}})(wye);_ye.exports=wye;var jOe=_ye.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xye=Qt,Va=jOe;function Ft(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Sye=new Set,jC={};function Gg(t,e){N_(t,e),N_(t+"Capture",e)}function N_(t,e){for(jC[t]=e,t=0;t<e.length;t++)Sye.add(e[t])}var Ch=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),j8=Object.prototype.hasOwnProperty,zOe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xfe={},Sfe={};function HOe(t){return j8.call(Sfe,t)?!0:j8.call(xfe,t)?!1:zOe.test(t)?Sfe[t]=!0:(xfe[t]=!0,!1)}function GOe(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function $Oe(t,e,n,r){if(e===null||typeof e>"u"||GOe(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qs(t,e,n,r,o,u,h){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=u,this.removeEmptyString=h}var Qo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qo[t]=new qs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qo[e]=new qs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qo[t]=new qs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qo[t]=new qs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qo[t]=new qs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qo[t]=new qs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qo[t]=new qs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qo[t]=new qs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qo[t]=new qs(t,5,!1,t.toLowerCase(),null,!1,!1)});var E9=/[\-:]([a-z])/g;function C9(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(E9,C9);Qo[e]=new qs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(E9,C9);Qo[e]=new qs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(E9,C9);Qo[e]=new qs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qo[t]=new qs(t,1,!1,t.toLowerCase(),null,!1,!1)});Qo.xlinkHref=new qs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qo[t]=new qs(t,1,!1,t.toLowerCase(),null,!0,!0)});function P9(t,e,n,r){var o=Qo.hasOwnProperty(e)?Qo[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&($Oe(e,n,o,r)&&(n=null),r||o===null?HOe(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,r=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Oh=xye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,qO=Symbol.for("react.element"),a_=Symbol.for("react.portal"),l_=Symbol.for("react.fragment"),k9=Symbol.for("react.strict_mode"),z8=Symbol.for("react.profiler"),Eye=Symbol.for("react.provider"),Cye=Symbol.for("react.context"),T9=Symbol.for("react.forward_ref"),H8=Symbol.for("react.suspense"),G8=Symbol.for("react.suspense_list"),M9=Symbol.for("react.memo"),Pf=Symbol.for("react.lazy"),Pye=Symbol.for("react.offscreen"),Efe=Symbol.iterator;function KE(t){return t===null||typeof t!="object"?null:(t=Efe&&t[Efe]||t["@@iterator"],typeof t=="function"?t:null)}var Oi=Object.assign,l6;function yC(t){if(l6===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);l6=e&&e[1]||""}return`
`+l6+t}var u6=!1;function c6(t,e){if(!t||u6)return"";u6=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(x){var r=x}Reflect.construct(t,[],e)}else{try{e.call()}catch(x){r=x}t.call(e.prototype)}else{try{throw Error()}catch(x){r=x}t()}}catch(x){if(x&&r&&typeof x.stack=="string"){for(var o=x.stack.split(`
`),u=r.stack.split(`
`),h=o.length-1,m=u.length-1;1<=h&&0<=m&&o[h]!==u[m];)m--;for(;1<=h&&0<=m;h--,m--)if(o[h]!==u[m]){if(h!==1||m!==1)do if(h--,m--,0>m||o[h]!==u[m]){var _=`
`+o[h].replace(" at new "," at ");return t.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",t.displayName)),_}while(1<=h&&0<=m);break}}}finally{u6=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?yC(t):""}function WOe(t){switch(t.tag){case 5:return yC(t.type);case 16:return yC("Lazy");case 13:return yC("Suspense");case 19:return yC("SuspenseList");case 0:case 2:case 15:return t=c6(t.type,!1),t;case 11:return t=c6(t.type.render,!1),t;case 1:return t=c6(t.type,!0),t;default:return""}}function $8(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case l_:return"Fragment";case a_:return"Portal";case z8:return"Profiler";case k9:return"StrictMode";case H8:return"Suspense";case G8:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Cye:return(t.displayName||"Context")+".Consumer";case Eye:return(t._context.displayName||"Context")+".Provider";case T9:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M9:return e=t.displayName||null,e!==null?e:$8(t.type)||"Memo";case Pf:e=t._payload,t=t._init;try{return $8(t(e))}catch{}}return null}function KOe(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $8(e);case 8:return e===k9?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qf(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kye(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qOe(t){var e=kye(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,u=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(h){r=""+h,u.call(this,h)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(h){r=""+h},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function XO(t){t._valueTracker||(t._valueTracker=qOe(t))}function Tye(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=kye(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function i3(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function W8(t,e){var n=e.checked;return Oi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Cfe(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qf(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Mye(t,e){e=e.checked,e!=null&&P9(t,"checked",e,!1)}function K8(t,e){Mye(t,e);var n=Qf(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?q8(t,e.type,n):e.hasOwnProperty("defaultValue")&&q8(t,e.type,Qf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Pfe(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function q8(t,e,n){(e!=="number"||i3(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bC=Array.isArray;function E_(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qf(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function X8(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ft(91));return Oi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kfe(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ft(92));if(bC(n)){if(1<n.length)throw Error(Ft(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qf(n)}}function Aye(t,e){var n=Qf(e.value),r=Qf(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Tfe(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Iye(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Y8(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Iye(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var YO,Rye=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(YO=YO||document.createElement("div"),YO.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=YO.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function zC(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var CC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XOe=["Webkit","ms","Moz","O"];Object.keys(CC).forEach(function(t){XOe.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),CC[e]=CC[t]})});function Oye(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||CC.hasOwnProperty(t)&&CC[t]?(""+e).trim():e+"px"}function Dye(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Oye(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,o):t[n]=o}}var YOe=Oi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Z8(t,e){if(e){if(YOe[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ft(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ft(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ft(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ft(62))}}function Q8(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var J8=null;function A9(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var eH=null,C_=null,P_=null;function Mfe(t){if(t=xP(t)){if(typeof eH!="function")throw Error(Ft(280));var e=t.stateNode;e&&(e=nL(e),eH(t.stateNode,t.type,e))}}function Lye(t){C_?P_?P_.push(t):P_=[t]:C_=t}function Nye(){if(C_){var t=C_,e=P_;if(P_=C_=null,Mfe(t),e)for(t=0;t<e.length;t++)Mfe(e[t])}}function Fye(t,e){return t(e)}function Bye(){}var d6=!1;function Uye(t,e,n){if(d6)return t(e,n);d6=!0;try{return Fye(t,e,n)}finally{d6=!1,(C_!==null||P_!==null)&&(Bye(),Nye())}}function HC(t,e){var n=t.stateNode;if(n===null)return null;var r=nL(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ft(231,e,typeof n));return n}var tH=!1;if(Ch)try{var qE={};Object.defineProperty(qE,"passive",{get:function(){tH=!0}}),window.addEventListener("test",qE,qE),window.removeEventListener("test",qE,qE)}catch{tH=!1}function ZOe(t,e,n,r,o,u,h,m,_){var x=Array.prototype.slice.call(arguments,3);try{e.apply(n,x)}catch(M){this.onError(M)}}var PC=!1,o3=null,s3=!1,nH=null,QOe={onError:function(t){PC=!0,o3=t}};function JOe(t,e,n,r,o,u,h,m,_){PC=!1,o3=null,ZOe.apply(QOe,arguments)}function eDe(t,e,n,r,o,u,h,m,_){if(JOe.apply(this,arguments),PC){if(PC){var x=o3;PC=!1,o3=null}else throw Error(Ft(198));s3||(s3=!0,nH=x)}}function $g(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vye(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Afe(t){if($g(t)!==t)throw Error(Ft(188))}function tDe(t){var e=t.alternate;if(!e){if(e=$g(t),e===null)throw Error(Ft(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var u=o.alternate;if(u===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===u.child){for(u=o.child;u;){if(u===n)return Afe(o),t;if(u===r)return Afe(o),e;u=u.sibling}throw Error(Ft(188))}if(n.return!==r.return)n=o,r=u;else{for(var h=!1,m=o.child;m;){if(m===n){h=!0,n=o,r=u;break}if(m===r){h=!0,r=o,n=u;break}m=m.sibling}if(!h){for(m=u.child;m;){if(m===n){h=!0,n=u,r=o;break}if(m===r){h=!0,r=u,n=o;break}m=m.sibling}if(!h)throw Error(Ft(189))}}if(n.alternate!==r)throw Error(Ft(190))}if(n.tag!==3)throw Error(Ft(188));return n.stateNode.current===n?t:e}function jye(t){return t=tDe(t),t!==null?zye(t):null}function zye(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zye(t);if(e!==null)return e;t=t.sibling}return null}var Hye=Va.unstable_scheduleCallback,Ife=Va.unstable_cancelCallback,nDe=Va.unstable_shouldYield,rDe=Va.unstable_requestPaint,Qi=Va.unstable_now,iDe=Va.unstable_getCurrentPriorityLevel,I9=Va.unstable_ImmediatePriority,Gye=Va.unstable_UserBlockingPriority,a3=Va.unstable_NormalPriority,oDe=Va.unstable_LowPriority,$ye=Va.unstable_IdlePriority,Q3=null,Vc=null;function sDe(t){if(Vc&&typeof Vc.onCommitFiberRoot=="function")try{Vc.onCommitFiberRoot(Q3,t,void 0,(t.current.flags&128)===128)}catch{}}var Bu=Math.clz32?Math.clz32:uDe,aDe=Math.log,lDe=Math.LN2;function uDe(t){return t>>>=0,t===0?32:31-(aDe(t)/lDe|0)|0}var ZO=64,QO=4194304;function _C(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function l3(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,o=t.suspendedLanes,u=t.pingedLanes,h=n&268435455;if(h!==0){var m=h&~o;m!==0?r=_C(m):(u&=h,u!==0&&(r=_C(u)))}else h=n&~o,h!==0?r=_C(h):u!==0&&(r=_C(u));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,u=e&-e,o>=u||o===16&&(u&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Bu(e),o=1<<n,r|=t[n],e&=~o;return r}function cDe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dDe(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,u=t.pendingLanes;0<u;){var h=31-Bu(u),m=1<<h,_=o[h];_===-1?(!(m&n)||m&r)&&(o[h]=cDe(m,e)):_<=e&&(t.expiredLanes|=m),u&=~m}}function rH(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Wye(){var t=ZO;return ZO<<=1,!(ZO&4194240)&&(ZO=64),t}function h6(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _P(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Bu(e),t[e]=n}function hDe(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Bu(n),u=1<<o;e[o]=0,r[o]=-1,t[o]=-1,n&=~u}}function R9(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Bu(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}var jr=0;function Kye(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var qye,O9,Xye,Yye,Zye,iH=!1,JO=[],Ff=null,Bf=null,Uf=null,GC=new Map,$C=new Map,Mf=[],pDe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rfe(t,e){switch(t){case"focusin":case"focusout":Ff=null;break;case"dragenter":case"dragleave":Bf=null;break;case"mouseover":case"mouseout":Uf=null;break;case"pointerover":case"pointerout":GC.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":$C.delete(e.pointerId)}}function XE(t,e,n,r,o,u){return t===null||t.nativeEvent!==u?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:u,targetContainers:[o]},e!==null&&(e=xP(e),e!==null&&O9(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function fDe(t,e,n,r,o){switch(e){case"focusin":return Ff=XE(Ff,t,e,n,r,o),!0;case"dragenter":return Bf=XE(Bf,t,e,n,r,o),!0;case"mouseover":return Uf=XE(Uf,t,e,n,r,o),!0;case"pointerover":var u=o.pointerId;return GC.set(u,XE(GC.get(u)||null,t,e,n,r,o)),!0;case"gotpointercapture":return u=o.pointerId,$C.set(u,XE($C.get(u)||null,t,e,n,r,o)),!0}return!1}function Qye(t){var e=yg(t.target);if(e!==null){var n=$g(e);if(n!==null){if(e=n.tag,e===13){if(e=Vye(n),e!==null){t.blockedOn=e,Zye(t.priority,function(){Xye(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function VD(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=oH(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);J8=r,n.target.dispatchEvent(r),J8=null}else return e=xP(n),e!==null&&O9(e),t.blockedOn=n,!1;e.shift()}return!0}function Ofe(t,e,n){VD(t)&&n.delete(e)}function mDe(){iH=!1,Ff!==null&&VD(Ff)&&(Ff=null),Bf!==null&&VD(Bf)&&(Bf=null),Uf!==null&&VD(Uf)&&(Uf=null),GC.forEach(Ofe),$C.forEach(Ofe)}function YE(t,e){t.blockedOn===e&&(t.blockedOn=null,iH||(iH=!0,Va.unstable_scheduleCallback(Va.unstable_NormalPriority,mDe)))}function WC(t){function e(o){return YE(o,t)}if(0<JO.length){YE(JO[0],t);for(var n=1;n<JO.length;n++){var r=JO[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ff!==null&&YE(Ff,t),Bf!==null&&YE(Bf,t),Uf!==null&&YE(Uf,t),GC.forEach(e),$C.forEach(e),n=0;n<Mf.length;n++)r=Mf[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Mf.length&&(n=Mf[0],n.blockedOn===null);)Qye(n),n.blockedOn===null&&Mf.shift()}var k_=Oh.ReactCurrentBatchConfig,u3=!0;function vDe(t,e,n,r){var o=jr,u=k_.transition;k_.transition=null;try{jr=1,D9(t,e,n,r)}finally{jr=o,k_.transition=u}}function gDe(t,e,n,r){var o=jr,u=k_.transition;k_.transition=null;try{jr=4,D9(t,e,n,r)}finally{jr=o,k_.transition=u}}function D9(t,e,n,r){if(u3){var o=oH(t,e,n,r);if(o===null)x6(t,e,r,c3,n),Rfe(t,r);else if(fDe(o,t,e,n,r))r.stopPropagation();else if(Rfe(t,r),e&4&&-1<pDe.indexOf(t)){for(;o!==null;){var u=xP(o);if(u!==null&&qye(u),u=oH(t,e,n,r),u===null&&x6(t,e,r,c3,n),u===o)break;o=u}o!==null&&r.stopPropagation()}else x6(t,e,r,null,n)}}var c3=null;function oH(t,e,n,r){if(c3=null,t=A9(r),t=yg(t),t!==null)if(e=$g(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vye(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return c3=t,null}function Jye(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iDe()){case I9:return 1;case Gye:return 4;case a3:case oDe:return 16;case $ye:return 536870912;default:return 16}default:return 16}}var If=null,L9=null,jD=null;function ebe(){if(jD)return jD;var t,e=L9,n=e.length,r,o="value"in If?If.value:If.textContent,u=o.length;for(t=0;t<n&&e[t]===o[t];t++);var h=n-t;for(r=1;r<=h&&e[n-r]===o[u-r];r++);return jD=o.slice(t,1<r?1-r:void 0)}function zD(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function eD(){return!0}function Dfe(){return!1}function Ha(t){function e(n,r,o,u,h){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var m in t)t.hasOwnProperty(m)&&(n=t[m],this[m]=n?n(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?eD:Dfe,this.isPropagationStopped=Dfe,this}return Oi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=eD)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=eD)},persist:function(){},isPersistent:eD}),e}var Q_={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N9=Ha(Q_),wP=Oi({},Q_,{view:0,detail:0}),yDe=Ha(wP),p6,f6,ZE,J3=Oi({},wP,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F9,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ZE&&(ZE&&t.type==="mousemove"?(p6=t.screenX-ZE.screenX,f6=t.screenY-ZE.screenY):f6=p6=0,ZE=t),p6)},movementY:function(t){return"movementY"in t?t.movementY:f6}}),Lfe=Ha(J3),bDe=Oi({},J3,{dataTransfer:0}),_De=Ha(bDe),wDe=Oi({},wP,{relatedTarget:0}),m6=Ha(wDe),xDe=Oi({},Q_,{animationName:0,elapsedTime:0,pseudoElement:0}),SDe=Ha(xDe),EDe=Oi({},Q_,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),CDe=Ha(EDe),PDe=Oi({},Q_,{data:0}),Nfe=Ha(PDe),kDe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TDe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},MDe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ADe(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=MDe[t])?!!e[t]:!1}function F9(){return ADe}var IDe=Oi({},wP,{key:function(t){if(t.key){var e=kDe[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=zD(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TDe[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F9,charCode:function(t){return t.type==="keypress"?zD(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?zD(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RDe=Ha(IDe),ODe=Oi({},J3,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ffe=Ha(ODe),DDe=Oi({},wP,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F9}),LDe=Ha(DDe),NDe=Oi({},Q_,{propertyName:0,elapsedTime:0,pseudoElement:0}),FDe=Ha(NDe),BDe=Oi({},J3,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),UDe=Ha(BDe),VDe=[9,13,27,32],B9=Ch&&"CompositionEvent"in window,kC=null;Ch&&"documentMode"in document&&(kC=document.documentMode);var jDe=Ch&&"TextEvent"in window&&!kC,tbe=Ch&&(!B9||kC&&8<kC&&11>=kC),Bfe=String.fromCharCode(32),Ufe=!1;function nbe(t,e){switch(t){case"keyup":return VDe.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rbe(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var u_=!1;function zDe(t,e){switch(t){case"compositionend":return rbe(e);case"keypress":return e.which!==32?null:(Ufe=!0,Bfe);case"textInput":return t=e.data,t===Bfe&&Ufe?null:t;default:return null}}function HDe(t,e){if(u_)return t==="compositionend"||!B9&&nbe(t,e)?(t=ebe(),jD=L9=If=null,u_=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tbe&&e.locale!=="ko"?null:e.data;default:return null}}var GDe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vfe(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!GDe[t.type]:e==="textarea"}function ibe(t,e,n,r){Lye(r),e=d3(e,"onChange"),0<e.length&&(n=new N9("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var TC=null,KC=null;function $De(t){mbe(t,0)}function eL(t){var e=h_(t);if(Tye(e))return t}function WDe(t,e){if(t==="change")return e}var obe=!1;if(Ch){var v6;if(Ch){var g6="oninput"in document;if(!g6){var jfe=document.createElement("div");jfe.setAttribute("oninput","return;"),g6=typeof jfe.oninput=="function"}v6=g6}else v6=!1;obe=v6&&(!document.documentMode||9<document.documentMode)}function zfe(){TC&&(TC.detachEvent("onpropertychange",sbe),KC=TC=null)}function sbe(t){if(t.propertyName==="value"&&eL(KC)){var e=[];ibe(e,KC,t,A9(t)),Uye($De,e)}}function KDe(t,e,n){t==="focusin"?(zfe(),TC=e,KC=n,TC.attachEvent("onpropertychange",sbe)):t==="focusout"&&zfe()}function qDe(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eL(KC)}function XDe(t,e){if(t==="click")return eL(e)}function YDe(t,e){if(t==="input"||t==="change")return eL(e)}function ZDe(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vu=typeof Object.is=="function"?Object.is:ZDe;function qC(t,e){if(Vu(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!j8.call(e,o)||!Vu(t[o],e[o]))return!1}return!0}function Hfe(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gfe(t,e){var n=Hfe(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hfe(n)}}function abe(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?abe(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function lbe(){for(var t=window,e=i3();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=i3(t.document)}return e}function U9(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function QDe(t){var e=lbe(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&abe(n.ownerDocument.documentElement,n)){if(r!==null&&U9(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,u=Math.min(r.start,o);r=r.end===void 0?u:Math.min(r.end,o),!t.extend&&u>r&&(o=r,r=u,u=o),o=Gfe(n,u);var h=Gfe(n,r);o&&h&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),u>r?(t.addRange(e),t.extend(h.node,h.offset)):(e.setEnd(h.node,h.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JDe=Ch&&"documentMode"in document&&11>=document.documentMode,c_=null,sH=null,MC=null,aH=!1;function $fe(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;aH||c_==null||c_!==i3(r)||(r=c_,"selectionStart"in r&&U9(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),MC&&qC(MC,r)||(MC=r,r=d3(sH,"onSelect"),0<r.length&&(e=new N9("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=c_)))}function tD(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var d_={animationend:tD("Animation","AnimationEnd"),animationiteration:tD("Animation","AnimationIteration"),animationstart:tD("Animation","AnimationStart"),transitionend:tD("Transition","TransitionEnd")},y6={},ube={};Ch&&(ube=document.createElement("div").style,"AnimationEvent"in window||(delete d_.animationend.animation,delete d_.animationiteration.animation,delete d_.animationstart.animation),"TransitionEvent"in window||delete d_.transitionend.transition);function tL(t){if(y6[t])return y6[t];if(!d_[t])return t;var e=d_[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ube)return y6[t]=e[n];return t}var cbe=tL("animationend"),dbe=tL("animationiteration"),hbe=tL("animationstart"),pbe=tL("transitionend"),fbe=new Map,Wfe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function im(t,e){fbe.set(t,e),Gg(e,[t])}for(var b6=0;b6<Wfe.length;b6++){var _6=Wfe[b6],e3e=_6.toLowerCase(),t3e=_6[0].toUpperCase()+_6.slice(1);im(e3e,"on"+t3e)}im(cbe,"onAnimationEnd");im(dbe,"onAnimationIteration");im(hbe,"onAnimationStart");im("dblclick","onDoubleClick");im("focusin","onFocus");im("focusout","onBlur");im(pbe,"onTransitionEnd");N_("onMouseEnter",["mouseout","mouseover"]);N_("onMouseLeave",["mouseout","mouseover"]);N_("onPointerEnter",["pointerout","pointerover"]);N_("onPointerLeave",["pointerout","pointerover"]);Gg("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Gg("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Gg("onBeforeInput",["compositionend","keypress","textInput","paste"]);Gg("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Gg("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Gg("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n3e=new Set("cancel close invalid load scroll toggle".split(" ").concat(wC));function Kfe(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,eDe(r,e,void 0,t),t.currentTarget=null}function mbe(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var u=void 0;if(e)for(var h=r.length-1;0<=h;h--){var m=r[h],_=m.instance,x=m.currentTarget;if(m=m.listener,_!==u&&o.isPropagationStopped())break e;Kfe(o,m,x),u=_}else for(h=0;h<r.length;h++){if(m=r[h],_=m.instance,x=m.currentTarget,m=m.listener,_!==u&&o.isPropagationStopped())break e;Kfe(o,m,x),u=_}}}if(s3)throw t=nH,s3=!1,nH=null,t}function fi(t,e){var n=e[hH];n===void 0&&(n=e[hH]=new Set);var r=t+"__bubble";n.has(r)||(vbe(e,t,2,!1),n.add(r))}function w6(t,e,n){var r=0;e&&(r|=4),vbe(n,t,r,e)}var nD="_reactListening"+Math.random().toString(36).slice(2);function XC(t){if(!t[nD]){t[nD]=!0,Sye.forEach(function(n){n!=="selectionchange"&&(n3e.has(n)||w6(n,!1,t),w6(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[nD]||(e[nD]=!0,w6("selectionchange",!1,e))}}function vbe(t,e,n,r){switch(Jye(e)){case 1:var o=vDe;break;case 4:o=gDe;break;default:o=D9}n=o.bind(null,e,n,t),o=void 0,!tH||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function x6(t,e,n,r,o){var u=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var m=r.stateNode.containerInfo;if(m===o||m.nodeType===8&&m.parentNode===o)break;if(h===4)for(h=r.return;h!==null;){var _=h.tag;if((_===3||_===4)&&(_=h.stateNode.containerInfo,_===o||_.nodeType===8&&_.parentNode===o))return;h=h.return}for(;m!==null;){if(h=yg(m),h===null)return;if(_=h.tag,_===5||_===6){r=u=h;continue e}m=m.parentNode}}r=r.return}Uye(function(){var x=u,M=A9(n),R=[];e:{var N=fbe.get(t);if(N!==void 0){var H=N9,Q=t;switch(t){case"keypress":if(zD(n)===0)break e;case"keydown":case"keyup":H=RDe;break;case"focusin":Q="focus",H=m6;break;case"focusout":Q="blur",H=m6;break;case"beforeblur":case"afterblur":H=m6;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=Lfe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=_De;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=LDe;break;case cbe:case dbe:case hbe:H=SDe;break;case pbe:H=FDe;break;case"scroll":H=yDe;break;case"wheel":H=UDe;break;case"copy":case"cut":case"paste":H=CDe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=Ffe}var j=(e&4)!==0,z=!j&&t==="scroll",U=j?N!==null?N+"Capture":null:N;j=[];for(var C=x,K;C!==null;){K=C;var te=K.stateNode;if(K.tag===5&&te!==null&&(K=te,U!==null&&(te=HC(C,U),te!=null&&j.push(YC(C,te,K)))),z)break;C=C.return}0<j.length&&(N=new H(N,Q,null,n,M),R.push({event:N,listeners:j}))}}if(!(e&7)){e:{if(N=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",N&&n!==J8&&(Q=n.relatedTarget||n.fromElement)&&(yg(Q)||Q[Ph]))break e;if((H||N)&&(N=M.window===M?M:(N=M.ownerDocument)?N.defaultView||N.parentWindow:window,H?(Q=n.relatedTarget||n.toElement,H=x,Q=Q?yg(Q):null,Q!==null&&(z=$g(Q),Q!==z||Q.tag!==5&&Q.tag!==6)&&(Q=null)):(H=null,Q=x),H!==Q)){if(j=Lfe,te="onMouseLeave",U="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(j=Ffe,te="onPointerLeave",U="onPointerEnter",C="pointer"),z=H==null?N:h_(H),K=Q==null?N:h_(Q),N=new j(te,C+"leave",H,n,M),N.target=z,N.relatedTarget=K,te=null,yg(M)===x&&(j=new j(U,C+"enter",Q,n,M),j.target=K,j.relatedTarget=z,te=j),z=te,H&&Q)t:{for(j=H,U=Q,C=0,K=j;K;K=Fb(K))C++;for(K=0,te=U;te;te=Fb(te))K++;for(;0<C-K;)j=Fb(j),C--;for(;0<K-C;)U=Fb(U),K--;for(;C--;){if(j===U||U!==null&&j===U.alternate)break t;j=Fb(j),U=Fb(U)}j=null}else j=null;H!==null&&qfe(R,N,H,j,!1),Q!==null&&z!==null&&qfe(R,z,Q,j,!0)}}e:{if(N=x?h_(x):window,H=N.nodeName&&N.nodeName.toLowerCase(),H==="select"||H==="input"&&N.type==="file")var pe=WDe;else if(Vfe(N))if(obe)pe=YDe;else{pe=qDe;var Z=KDe}else(H=N.nodeName)&&H.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(pe=XDe);if(pe&&(pe=pe(t,x))){ibe(R,pe,n,M);break e}Z&&Z(t,N,x),t==="focusout"&&(Z=N._wrapperState)&&Z.controlled&&N.type==="number"&&q8(N,"number",N.value)}switch(Z=x?h_(x):window,t){case"focusin":(Vfe(Z)||Z.contentEditable==="true")&&(c_=Z,sH=x,MC=null);break;case"focusout":MC=sH=c_=null;break;case"mousedown":aH=!0;break;case"contextmenu":case"mouseup":case"dragend":aH=!1,$fe(R,n,M);break;case"selectionchange":if(JDe)break;case"keydown":case"keyup":$fe(R,n,M)}var be;if(B9)e:{switch(t){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else u_?nbe(t,n)&&(Pe="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(Pe="onCompositionStart");Pe&&(tbe&&n.locale!=="ko"&&(u_||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&u_&&(be=ebe()):(If=M,L9="value"in If?If.value:If.textContent,u_=!0)),Z=d3(x,Pe),0<Z.length&&(Pe=new Nfe(Pe,t,null,n,M),R.push({event:Pe,listeners:Z}),be?Pe.data=be:(be=rbe(n),be!==null&&(Pe.data=be)))),(be=jDe?zDe(t,n):HDe(t,n))&&(x=d3(x,"onBeforeInput"),0<x.length&&(M=new Nfe("onBeforeInput","beforeinput",null,n,M),R.push({event:M,listeners:x}),M.data=be))}mbe(R,e)})}function YC(t,e,n){return{instance:t,listener:e,currentTarget:n}}function d3(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,u=o.stateNode;o.tag===5&&u!==null&&(o=u,u=HC(t,n),u!=null&&r.unshift(YC(t,u,o)),u=HC(t,e),u!=null&&r.push(YC(t,u,o))),t=t.return}return r}function Fb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qfe(t,e,n,r,o){for(var u=e._reactName,h=[];n!==null&&n!==r;){var m=n,_=m.alternate,x=m.stateNode;if(_!==null&&_===r)break;m.tag===5&&x!==null&&(m=x,o?(_=HC(n,u),_!=null&&h.unshift(YC(n,_,m))):o||(_=HC(n,u),_!=null&&h.push(YC(n,_,m)))),n=n.return}h.length!==0&&t.push({event:e,listeners:h})}var r3e=/\r\n?/g,i3e=/\u0000|\uFFFD/g;function Xfe(t){return(typeof t=="string"?t:""+t).replace(r3e,`
`).replace(i3e,"")}function rD(t,e,n){if(e=Xfe(e),Xfe(t)!==e&&n)throw Error(Ft(425))}function h3(){}var lH=null,uH=null;function cH(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var dH=typeof setTimeout=="function"?setTimeout:void 0,o3e=typeof clearTimeout=="function"?clearTimeout:void 0,Yfe=typeof Promise=="function"?Promise:void 0,s3e=typeof queueMicrotask=="function"?queueMicrotask:typeof Yfe<"u"?function(t){return Yfe.resolve(null).then(t).catch(a3e)}:dH;function a3e(t){setTimeout(function(){throw t})}function S6(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){t.removeChild(o),WC(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);WC(e)}function Vf(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Zfe(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var J_=Math.random().toString(36).slice(2),Bc="__reactFiber$"+J_,ZC="__reactProps$"+J_,Ph="__reactContainer$"+J_,hH="__reactEvents$"+J_,l3e="__reactListeners$"+J_,u3e="__reactHandles$"+J_;function yg(t){var e=t[Bc];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ph]||n[Bc]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Zfe(t);t!==null;){if(n=t[Bc])return n;t=Zfe(t)}return e}t=n,n=t.parentNode}return null}function xP(t){return t=t[Bc]||t[Ph],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function h_(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ft(33))}function nL(t){return t[ZC]||null}var pH=[],p_=-1;function om(t){return{current:t}}function mi(t){0>p_||(t.current=pH[p_],pH[p_]=null,p_--)}function ii(t,e){p_++,pH[p_]=t.current,t.current=e}var Jf={},_s=om(Jf),fa=om(!1),Ag=Jf;function F_(t,e){var n=t.type.contextTypes;if(!n)return Jf;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},u;for(u in n)o[u]=e[u];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function ma(t){return t=t.childContextTypes,t!=null}function p3(){mi(fa),mi(_s)}function Qfe(t,e,n){if(_s.current!==Jf)throw Error(Ft(168));ii(_s,e),ii(fa,n)}function gbe(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(Ft(108,KOe(t)||"Unknown",o));return Oi({},n,r)}function f3(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Jf,Ag=_s.current,ii(_s,t),ii(fa,fa.current),!0}function Jfe(t,e,n){var r=t.stateNode;if(!r)throw Error(Ft(169));n?(t=gbe(t,e,Ag),r.__reactInternalMemoizedMergedChildContext=t,mi(fa),mi(_s),ii(_s,t)):mi(fa),ii(fa,n)}var ph=null,rL=!1,E6=!1;function ybe(t){ph===null?ph=[t]:ph.push(t)}function c3e(t){rL=!0,ybe(t)}function sm(){if(!E6&&ph!==null){E6=!0;var t=0,e=jr;try{var n=ph;for(jr=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ph=null,rL=!1}catch(o){throw ph!==null&&(ph=ph.slice(t+1)),Hye(I9,sm),o}finally{jr=e,E6=!1}}return null}var f_=[],m_=0,m3=null,v3=0,Ml=[],Al=0,Ig=null,mh=1,vh="";function cg(t,e){f_[m_++]=v3,f_[m_++]=m3,m3=t,v3=e}function bbe(t,e,n){Ml[Al++]=mh,Ml[Al++]=vh,Ml[Al++]=Ig,Ig=t;var r=mh;t=vh;var o=32-Bu(r)-1;r&=~(1<<o),n+=1;var u=32-Bu(e)+o;if(30<u){var h=o-o%5;u=(r&(1<<h)-1).toString(32),r>>=h,o-=h,mh=1<<32-Bu(e)+o|n<<o|r,vh=u+t}else mh=1<<u|n<<o|r,vh=t}function V9(t){t.return!==null&&(cg(t,1),bbe(t,1,0))}function j9(t){for(;t===m3;)m3=f_[--m_],f_[m_]=null,v3=f_[--m_],f_[m_]=null;for(;t===Ig;)Ig=Ml[--Al],Ml[Al]=null,vh=Ml[--Al],Ml[Al]=null,mh=Ml[--Al],Ml[Al]=null}var Fa=null,Na=null,gi=!1,Du=null;function _be(t,e){var n=Ol(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function eme(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Fa=t,Na=Vf(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Fa=t,Na=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ig!==null?{id:mh,overflow:vh}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ol(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Fa=t,Na=null,!0):!1;default:return!1}}function fH(t){return(t.mode&1)!==0&&(t.flags&128)===0}function mH(t){if(gi){var e=Na;if(e){var n=e;if(!eme(t,e)){if(fH(t))throw Error(Ft(418));e=Vf(n.nextSibling);var r=Fa;e&&eme(t,e)?_be(r,n):(t.flags=t.flags&-4097|2,gi=!1,Fa=t)}}else{if(fH(t))throw Error(Ft(418));t.flags=t.flags&-4097|2,gi=!1,Fa=t}}}function tme(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Fa=t}function iD(t){if(t!==Fa)return!1;if(!gi)return tme(t),gi=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cH(t.type,t.memoizedProps)),e&&(e=Na)){if(fH(t))throw wbe(),Error(Ft(418));for(;e;)_be(t,e),e=Vf(e.nextSibling)}if(tme(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ft(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Na=Vf(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Na=null}}else Na=Fa?Vf(t.stateNode.nextSibling):null;return!0}function wbe(){for(var t=Na;t;)t=Vf(t.nextSibling)}function B_(){Na=Fa=null,gi=!1}function z9(t){Du===null?Du=[t]:Du.push(t)}var d3e=Oh.ReactCurrentBatchConfig;function Ru(t,e){if(t&&t.defaultProps){e=Oi({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var g3=om(null),y3=null,v_=null,H9=null;function G9(){H9=v_=y3=null}function $9(t){var e=g3.current;mi(g3),t._currentValue=e}function vH(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function T_(t,e){y3=t,H9=v_=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ha=!0),t.firstContext=null)}function Ul(t){var e=t._currentValue;if(H9!==t)if(t={context:t,memoizedValue:e,next:null},v_===null){if(y3===null)throw Error(Ft(308));v_=t,y3.dependencies={lanes:0,firstContext:t}}else v_=v_.next=t;return e}var bg=null;function W9(t){bg===null?bg=[t]:bg.push(t)}function xbe(t,e,n,r){var o=e.interleaved;return o===null?(n.next=n,W9(e)):(n.next=o.next,o.next=n),e.interleaved=n,kh(t,r)}function kh(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kf=!1;function K9(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sbe(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jf(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,br&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,kh(t,n)}return o=r.interleaved,o===null?(e.next=e,W9(r)):(e.next=o.next,o.next=e),r.interleaved=e,kh(t,n)}function HD(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,R9(t,n)}}function nme(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,u=null;if(n=n.firstBaseUpdate,n!==null){do{var h={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};u===null?o=u=h:u=u.next=h,n=n.next}while(n!==null);u===null?o=u=e:u=u.next=e}else o=u=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:u,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function b3(t,e,n,r){var o=t.updateQueue;kf=!1;var u=o.firstBaseUpdate,h=o.lastBaseUpdate,m=o.shared.pending;if(m!==null){o.shared.pending=null;var _=m,x=_.next;_.next=null,h===null?u=x:h.next=x,h=_;var M=t.alternate;M!==null&&(M=M.updateQueue,m=M.lastBaseUpdate,m!==h&&(m===null?M.firstBaseUpdate=x:m.next=x,M.lastBaseUpdate=_))}if(u!==null){var R=o.baseState;h=0,M=x=_=null,m=u;do{var N=m.lane,H=m.eventTime;if((r&N)===N){M!==null&&(M=M.next={eventTime:H,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var Q=t,j=m;switch(N=e,H=n,j.tag){case 1:if(Q=j.payload,typeof Q=="function"){R=Q.call(H,R,N);break e}R=Q;break e;case 3:Q.flags=Q.flags&-65537|128;case 0:if(Q=j.payload,N=typeof Q=="function"?Q.call(H,R,N):Q,N==null)break e;R=Oi({},R,N);break e;case 2:kf=!0}}m.callback!==null&&m.lane!==0&&(t.flags|=64,N=o.effects,N===null?o.effects=[m]:N.push(m))}else H={eventTime:H,lane:N,tag:m.tag,payload:m.payload,callback:m.callback,next:null},M===null?(x=M=H,_=R):M=M.next=H,h|=N;if(m=m.next,m===null){if(m=o.shared.pending,m===null)break;N=m,m=N.next,N.next=null,o.lastBaseUpdate=N,o.shared.pending=null}}while(1);if(M===null&&(_=R),o.baseState=_,o.firstBaseUpdate=x,o.lastBaseUpdate=M,e=o.shared.interleaved,e!==null){o=e;do h|=o.lane,o=o.next;while(o!==e)}else u===null&&(o.shared.lanes=0);Og|=h,t.lanes=h,t.memoizedState=R}}function rme(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(Ft(191,o));o.call(r)}}}var Ebe=new xye.Component().refs;function gH(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oi({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var iL={isMounted:function(t){return(t=t._reactInternals)?$g(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Hs(),o=Hf(t),u=wh(r,o);u.payload=e,n!=null&&(u.callback=n),e=jf(t,u,o),e!==null&&(Uu(e,t,o,r),HD(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Hs(),o=Hf(t),u=wh(r,o);u.tag=1,u.payload=e,n!=null&&(u.callback=n),e=jf(t,u,o),e!==null&&(Uu(e,t,o,r),HD(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Hs(),r=Hf(t),o=wh(n,r);o.tag=2,e!=null&&(o.callback=e),e=jf(t,o,r),e!==null&&(Uu(e,t,r,n),HD(e,t,r))}};function ime(t,e,n,r,o,u,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,u,h):e.prototype&&e.prototype.isPureReactComponent?!qC(n,r)||!qC(o,u):!0}function Cbe(t,e,n){var r=!1,o=Jf,u=e.contextType;return typeof u=="object"&&u!==null?u=Ul(u):(o=ma(e)?Ag:_s.current,r=e.contextTypes,u=(r=r!=null)?F_(t,o):Jf),e=new e(n,u),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=iL,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=u),e}function ome(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&iL.enqueueReplaceState(e,e.state,null)}function yH(t,e,n,r){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs=Ebe,K9(t);var u=e.contextType;typeof u=="object"&&u!==null?o.context=Ul(u):(u=ma(e)?Ag:_s.current,o.context=F_(t,u)),o.state=t.memoizedState,u=e.getDerivedStateFromProps,typeof u=="function"&&(gH(t,e,u,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&iL.enqueueReplaceState(o,o.state,null),b3(t,n,o,r),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function QE(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ft(309));var r=n.stateNode}if(!r)throw Error(Ft(147,t));var o=r,u=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===u?e.ref:(e=function(h){var m=o.refs;m===Ebe&&(m=o.refs={}),h===null?delete m[u]:m[u]=h},e._stringRef=u,e)}if(typeof t!="string")throw Error(Ft(284));if(!n._owner)throw Error(Ft(290,t))}return t}function oD(t,e){throw t=Object.prototype.toString.call(e),Error(Ft(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sme(t){var e=t._init;return e(t._payload)}function Pbe(t){function e(U,C){if(t){var K=U.deletions;K===null?(U.deletions=[C],U.flags|=16):K.push(C)}}function n(U,C){if(!t)return null;for(;C!==null;)e(U,C),C=C.sibling;return null}function r(U,C){for(U=new Map;C!==null;)C.key!==null?U.set(C.key,C):U.set(C.index,C),C=C.sibling;return U}function o(U,C){return U=Gf(U,C),U.index=0,U.sibling=null,U}function u(U,C,K){return U.index=K,t?(K=U.alternate,K!==null?(K=K.index,K<C?(U.flags|=2,C):K):(U.flags|=2,C)):(U.flags|=1048576,C)}function h(U){return t&&U.alternate===null&&(U.flags|=2),U}function m(U,C,K,te){return C===null||C.tag!==6?(C=I6(K,U.mode,te),C.return=U,C):(C=o(C,K),C.return=U,C)}function _(U,C,K,te){var pe=K.type;return pe===l_?M(U,C,K.props.children,te,K.key):C!==null&&(C.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Pf&&sme(pe)===C.type)?(te=o(C,K.props),te.ref=QE(U,C,K),te.return=U,te):(te=XD(K.type,K.key,K.props,null,U.mode,te),te.ref=QE(U,C,K),te.return=U,te)}function x(U,C,K,te){return C===null||C.tag!==4||C.stateNode.containerInfo!==K.containerInfo||C.stateNode.implementation!==K.implementation?(C=R6(K,U.mode,te),C.return=U,C):(C=o(C,K.children||[]),C.return=U,C)}function M(U,C,K,te,pe){return C===null||C.tag!==7?(C=Sg(K,U.mode,te,pe),C.return=U,C):(C=o(C,K),C.return=U,C)}function R(U,C,K){if(typeof C=="string"&&C!==""||typeof C=="number")return C=I6(""+C,U.mode,K),C.return=U,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case qO:return K=XD(C.type,C.key,C.props,null,U.mode,K),K.ref=QE(U,null,C),K.return=U,K;case a_:return C=R6(C,U.mode,K),C.return=U,C;case Pf:var te=C._init;return R(U,te(C._payload),K)}if(bC(C)||KE(C))return C=Sg(C,U.mode,K,null),C.return=U,C;oD(U,C)}return null}function N(U,C,K,te){var pe=C!==null?C.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return pe!==null?null:m(U,C,""+K,te);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case qO:return K.key===pe?_(U,C,K,te):null;case a_:return K.key===pe?x(U,C,K,te):null;case Pf:return pe=K._init,N(U,C,pe(K._payload),te)}if(bC(K)||KE(K))return pe!==null?null:M(U,C,K,te,null);oD(U,K)}return null}function H(U,C,K,te,pe){if(typeof te=="string"&&te!==""||typeof te=="number")return U=U.get(K)||null,m(C,U,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case qO:return U=U.get(te.key===null?K:te.key)||null,_(C,U,te,pe);case a_:return U=U.get(te.key===null?K:te.key)||null,x(C,U,te,pe);case Pf:var Z=te._init;return H(U,C,K,Z(te._payload),pe)}if(bC(te)||KE(te))return U=U.get(K)||null,M(C,U,te,pe,null);oD(C,te)}return null}function Q(U,C,K,te){for(var pe=null,Z=null,be=C,Pe=C=0,G=null;be!==null&&Pe<K.length;Pe++){be.index>Pe?(G=be,be=null):G=be.sibling;var ye=N(U,be,K[Pe],te);if(ye===null){be===null&&(be=G);break}t&&be&&ye.alternate===null&&e(U,be),C=u(ye,C,Pe),Z===null?pe=ye:Z.sibling=ye,Z=ye,be=G}if(Pe===K.length)return n(U,be),gi&&cg(U,Pe),pe;if(be===null){for(;Pe<K.length;Pe++)be=R(U,K[Pe],te),be!==null&&(C=u(be,C,Pe),Z===null?pe=be:Z.sibling=be,Z=be);return gi&&cg(U,Pe),pe}for(be=r(U,be);Pe<K.length;Pe++)G=H(be,U,Pe,K[Pe],te),G!==null&&(t&&G.alternate!==null&&be.delete(G.key===null?Pe:G.key),C=u(G,C,Pe),Z===null?pe=G:Z.sibling=G,Z=G);return t&&be.forEach(function(St){return e(U,St)}),gi&&cg(U,Pe),pe}function j(U,C,K,te){var pe=KE(K);if(typeof pe!="function")throw Error(Ft(150));if(K=pe.call(K),K==null)throw Error(Ft(151));for(var Z=pe=null,be=C,Pe=C=0,G=null,ye=K.next();be!==null&&!ye.done;Pe++,ye=K.next()){be.index>Pe?(G=be,be=null):G=be.sibling;var St=N(U,be,ye.value,te);if(St===null){be===null&&(be=G);break}t&&be&&St.alternate===null&&e(U,be),C=u(St,C,Pe),Z===null?pe=St:Z.sibling=St,Z=St,be=G}if(ye.done)return n(U,be),gi&&cg(U,Pe),pe;if(be===null){for(;!ye.done;Pe++,ye=K.next())ye=R(U,ye.value,te),ye!==null&&(C=u(ye,C,Pe),Z===null?pe=ye:Z.sibling=ye,Z=ye);return gi&&cg(U,Pe),pe}for(be=r(U,be);!ye.done;Pe++,ye=K.next())ye=H(be,U,Pe,ye.value,te),ye!==null&&(t&&ye.alternate!==null&&be.delete(ye.key===null?Pe:ye.key),C=u(ye,C,Pe),Z===null?pe=ye:Z.sibling=ye,Z=ye);return t&&be.forEach(function(kt){return e(U,kt)}),gi&&cg(U,Pe),pe}function z(U,C,K,te){if(typeof K=="object"&&K!==null&&K.type===l_&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case qO:e:{for(var pe=K.key,Z=C;Z!==null;){if(Z.key===pe){if(pe=K.type,pe===l_){if(Z.tag===7){n(U,Z.sibling),C=o(Z,K.props.children),C.return=U,U=C;break e}}else if(Z.elementType===pe||typeof pe=="object"&&pe!==null&&pe.$$typeof===Pf&&sme(pe)===Z.type){n(U,Z.sibling),C=o(Z,K.props),C.ref=QE(U,Z,K),C.return=U,U=C;break e}n(U,Z);break}else e(U,Z);Z=Z.sibling}K.type===l_?(C=Sg(K.props.children,U.mode,te,K.key),C.return=U,U=C):(te=XD(K.type,K.key,K.props,null,U.mode,te),te.ref=QE(U,C,K),te.return=U,U=te)}return h(U);case a_:e:{for(Z=K.key;C!==null;){if(C.key===Z)if(C.tag===4&&C.stateNode.containerInfo===K.containerInfo&&C.stateNode.implementation===K.implementation){n(U,C.sibling),C=o(C,K.children||[]),C.return=U,U=C;break e}else{n(U,C);break}else e(U,C);C=C.sibling}C=R6(K,U.mode,te),C.return=U,U=C}return h(U);case Pf:return Z=K._init,z(U,C,Z(K._payload),te)}if(bC(K))return Q(U,C,K,te);if(KE(K))return j(U,C,K,te);oD(U,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,C!==null&&C.tag===6?(n(U,C.sibling),C=o(C,K),C.return=U,U=C):(n(U,C),C=I6(K,U.mode,te),C.return=U,U=C),h(U)):n(U,C)}return z}var U_=Pbe(!0),kbe=Pbe(!1),SP={},jc=om(SP),QC=om(SP),JC=om(SP);function _g(t){if(t===SP)throw Error(Ft(174));return t}function q9(t,e){switch(ii(JC,e),ii(QC,t),ii(jc,SP),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Y8(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Y8(e,t)}mi(jc),ii(jc,e)}function V_(){mi(jc),mi(QC),mi(JC)}function Tbe(t){_g(JC.current);var e=_g(jc.current),n=Y8(e,t.type);e!==n&&(ii(QC,t),ii(jc,n))}function X9(t){QC.current===t&&(mi(jc),mi(QC))}var Ai=om(0);function _3(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var C6=[];function Y9(){for(var t=0;t<C6.length;t++)C6[t]._workInProgressVersionPrimary=null;C6.length=0}var GD=Oh.ReactCurrentDispatcher,P6=Oh.ReactCurrentBatchConfig,Rg=0,Ri=null,mo=null,Mo=null,w3=!1,AC=!1,eP=0,h3e=0;function ps(){throw Error(Ft(321))}function Z9(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vu(t[n],e[n]))return!1;return!0}function Q9(t,e,n,r,o,u){if(Rg=u,Ri=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,GD.current=t===null||t.memoizedState===null?v3e:g3e,t=n(r,o),AC){u=0;do{if(AC=!1,eP=0,25<=u)throw Error(Ft(301));u+=1,Mo=mo=null,e.updateQueue=null,GD.current=y3e,t=n(r,o)}while(AC)}if(GD.current=x3,e=mo!==null&&mo.next!==null,Rg=0,Mo=mo=Ri=null,w3=!1,e)throw Error(Ft(300));return t}function J9(){var t=eP!==0;return eP=0,t}function Lc(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mo===null?Ri.memoizedState=Mo=t:Mo=Mo.next=t,Mo}function Vl(){if(mo===null){var t=Ri.alternate;t=t!==null?t.memoizedState:null}else t=mo.next;var e=Mo===null?Ri.memoizedState:Mo.next;if(e!==null)Mo=e,mo=t;else{if(t===null)throw Error(Ft(310));mo=t,t={memoizedState:mo.memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},Mo===null?Ri.memoizedState=Mo=t:Mo=Mo.next=t}return Mo}function tP(t,e){return typeof e=="function"?e(t):e}function k6(t){var e=Vl(),n=e.queue;if(n===null)throw Error(Ft(311));n.lastRenderedReducer=t;var r=mo,o=r.baseQueue,u=n.pending;if(u!==null){if(o!==null){var h=o.next;o.next=u.next,u.next=h}r.baseQueue=o=u,n.pending=null}if(o!==null){u=o.next,r=r.baseState;var m=h=null,_=null,x=u;do{var M=x.lane;if((Rg&M)===M)_!==null&&(_=_.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),r=x.hasEagerState?x.eagerState:t(r,x.action);else{var R={lane:M,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};_===null?(m=_=R,h=r):_=_.next=R,Ri.lanes|=M,Og|=M}x=x.next}while(x!==null&&x!==u);_===null?h=r:_.next=m,Vu(r,e.memoizedState)||(ha=!0),e.memoizedState=r,e.baseState=h,e.baseQueue=_,n.lastRenderedState=r}if(t=n.interleaved,t!==null){o=t;do u=o.lane,Ri.lanes|=u,Og|=u,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function T6(t){var e=Vl(),n=e.queue;if(n===null)throw Error(Ft(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,u=e.memoizedState;if(o!==null){n.pending=null;var h=o=o.next;do u=t(u,h.action),h=h.next;while(h!==o);Vu(u,e.memoizedState)||(ha=!0),e.memoizedState=u,e.baseQueue===null&&(e.baseState=u),n.lastRenderedState=u}return[u,r]}function Mbe(){}function Abe(t,e){var n=Ri,r=Vl(),o=e(),u=!Vu(r.memoizedState,o);if(u&&(r.memoizedState=o,ha=!0),r=r.queue,eG(Obe.bind(null,n,r,t),[t]),r.getSnapshot!==e||u||Mo!==null&&Mo.memoizedState.tag&1){if(n.flags|=2048,nP(9,Rbe.bind(null,n,r,o,e),void 0,null),Oo===null)throw Error(Ft(349));Rg&30||Ibe(n,e,o)}return o}function Ibe(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ri.updateQueue,e===null?(e={lastEffect:null,stores:null},Ri.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Rbe(t,e,n,r){e.value=n,e.getSnapshot=r,Dbe(e)&&Lbe(t)}function Obe(t,e,n){return n(function(){Dbe(e)&&Lbe(t)})}function Dbe(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vu(t,n)}catch{return!0}}function Lbe(t){var e=kh(t,1);e!==null&&Uu(e,t,1,-1)}function ame(t){var e=Lc();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tP,lastRenderedState:t},e.queue=t,t=t.dispatch=m3e.bind(null,Ri,t),[e.memoizedState,t]}function nP(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ri.updateQueue,e===null?(e={lastEffect:null,stores:null},Ri.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Nbe(){return Vl().memoizedState}function $D(t,e,n,r){var o=Lc();Ri.flags|=t,o.memoizedState=nP(1|e,n,void 0,r===void 0?null:r)}function oL(t,e,n,r){var o=Vl();r=r===void 0?null:r;var u=void 0;if(mo!==null){var h=mo.memoizedState;if(u=h.destroy,r!==null&&Z9(r,h.deps)){o.memoizedState=nP(e,n,u,r);return}}Ri.flags|=t,o.memoizedState=nP(1|e,n,u,r)}function lme(t,e){return $D(8390656,8,t,e)}function eG(t,e){return oL(2048,8,t,e)}function Fbe(t,e){return oL(4,2,t,e)}function Bbe(t,e){return oL(4,4,t,e)}function Ube(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vbe(t,e,n){return n=n!=null?n.concat([t]):null,oL(4,4,Ube.bind(null,e,t),n)}function tG(){}function jbe(t,e){var n=Vl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Z9(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function zbe(t,e){var n=Vl();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Z9(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Hbe(t,e,n){return Rg&21?(Vu(n,e)||(n=Wye(),Ri.lanes|=n,Og|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ha=!0),t.memoizedState=n)}function p3e(t,e){var n=jr;jr=n!==0&&4>n?n:4,t(!0);var r=P6.transition;P6.transition={};try{t(!1),e()}finally{jr=n,P6.transition=r}}function Gbe(){return Vl().memoizedState}function f3e(t,e,n){var r=Hf(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$be(t))Wbe(e,n);else if(n=xbe(t,e,n,r),n!==null){var o=Hs();Uu(n,t,r,o),Kbe(n,e,r)}}function m3e(t,e,n){var r=Hf(t),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($be(t))Wbe(e,o);else{var u=t.alternate;if(t.lanes===0&&(u===null||u.lanes===0)&&(u=e.lastRenderedReducer,u!==null))try{var h=e.lastRenderedState,m=u(h,n);if(o.hasEagerState=!0,o.eagerState=m,Vu(m,h)){var _=e.interleaved;_===null?(o.next=o,W9(e)):(o.next=_.next,_.next=o),e.interleaved=o;return}}catch{}finally{}n=xbe(t,e,o,r),n!==null&&(o=Hs(),Uu(n,t,r,o),Kbe(n,e,r))}}function $be(t){var e=t.alternate;return t===Ri||e!==null&&e===Ri}function Wbe(t,e){AC=w3=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Kbe(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,R9(t,n)}}var x3={readContext:Ul,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},v3e={readContext:Ul,useCallback:function(t,e){return Lc().memoizedState=[t,e===void 0?null:e],t},useContext:Ul,useEffect:lme,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$D(4194308,4,Ube.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $D(4194308,4,t,e)},useInsertionEffect:function(t,e){return $D(4,2,t,e)},useMemo:function(t,e){var n=Lc();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Lc();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=f3e.bind(null,Ri,t),[r.memoizedState,t]},useRef:function(t){var e=Lc();return t={current:t},e.memoizedState=t},useState:ame,useDebugValue:tG,useDeferredValue:function(t){return Lc().memoizedState=t},useTransition:function(){var t=ame(!1),e=t[0];return t=p3e.bind(null,t[1]),Lc().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ri,o=Lc();if(gi){if(n===void 0)throw Error(Ft(407));n=n()}else{if(n=e(),Oo===null)throw Error(Ft(349));Rg&30||Ibe(r,e,n)}o.memoizedState=n;var u={value:n,getSnapshot:e};return o.queue=u,lme(Obe.bind(null,r,u,t),[t]),r.flags|=2048,nP(9,Rbe.bind(null,r,u,n,e),void 0,null),n},useId:function(){var t=Lc(),e=Oo.identifierPrefix;if(gi){var n=vh,r=mh;n=(r&~(1<<32-Bu(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=eP++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=h3e++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},g3e={readContext:Ul,useCallback:jbe,useContext:Ul,useEffect:eG,useImperativeHandle:Vbe,useInsertionEffect:Fbe,useLayoutEffect:Bbe,useMemo:zbe,useReducer:k6,useRef:Nbe,useState:function(){return k6(tP)},useDebugValue:tG,useDeferredValue:function(t){var e=Vl();return Hbe(e,mo.memoizedState,t)},useTransition:function(){var t=k6(tP)[0],e=Vl().memoizedState;return[t,e]},useMutableSource:Mbe,useSyncExternalStore:Abe,useId:Gbe,unstable_isNewReconciler:!1},y3e={readContext:Ul,useCallback:jbe,useContext:Ul,useEffect:eG,useImperativeHandle:Vbe,useInsertionEffect:Fbe,useLayoutEffect:Bbe,useMemo:zbe,useReducer:T6,useRef:Nbe,useState:function(){return T6(tP)},useDebugValue:tG,useDeferredValue:function(t){var e=Vl();return mo===null?e.memoizedState=t:Hbe(e,mo.memoizedState,t)},useTransition:function(){var t=T6(tP)[0],e=Vl().memoizedState;return[t,e]},useMutableSource:Mbe,useSyncExternalStore:Abe,useId:Gbe,unstable_isNewReconciler:!1};function j_(t,e){try{var n="",r=e;do n+=WOe(r),r=r.return;while(r);var o=n}catch(u){o=`
Error generating stack: `+u.message+`
`+u.stack}return{value:t,source:e,stack:o,digest:null}}function M6(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function bH(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var b3e=typeof WeakMap=="function"?WeakMap:Map;function qbe(t,e,n){n=wh(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){E3||(E3=!0,MH=r),bH(t,e)},n}function Xbe(t,e,n){n=wh(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;n.payload=function(){return r(o)},n.callback=function(){bH(t,e)}}var u=t.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(n.callback=function(){bH(t,e),typeof r!="function"&&(zf===null?zf=new Set([this]):zf.add(this));var h=e.stack;this.componentDidCatch(e.value,{componentStack:h!==null?h:""})}),n}function ume(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new b3e;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(o.add(n),t=O3e.bind(null,t,e,n),e.then(t,t))}function cme(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dme(t,e,n,r,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=wh(-1,1),e.tag=2,jf(n,e,1))),n.lanes|=1),t)}var _3e=Oh.ReactCurrentOwner,ha=!1;function Us(t,e,n,r){e.child=t===null?kbe(e,null,n,r):U_(e,t.child,n,r)}function hme(t,e,n,r,o){n=n.render;var u=e.ref;return T_(e,o),r=Q9(t,e,n,r,u,o),n=J9(),t!==null&&!ha?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Th(t,e,o)):(gi&&n&&V9(e),e.flags|=1,Us(t,e,r,o),e.child)}function pme(t,e,n,r,o){if(t===null){var u=n.type;return typeof u=="function"&&!uG(u)&&u.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=u,Ybe(t,e,u,r,o)):(t=XD(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(u=t.child,!(t.lanes&o)){var h=u.memoizedProps;if(n=n.compare,n=n!==null?n:qC,n(h,r)&&t.ref===e.ref)return Th(t,e,o)}return e.flags|=1,t=Gf(u,r),t.ref=e.ref,t.return=e,e.child=t}function Ybe(t,e,n,r,o){if(t!==null){var u=t.memoizedProps;if(qC(u,r)&&t.ref===e.ref)if(ha=!1,e.pendingProps=r=u,(t.lanes&o)!==0)t.flags&131072&&(ha=!0);else return e.lanes=t.lanes,Th(t,e,o)}return _H(t,e,n,r,o)}function Zbe(t,e,n){var r=e.pendingProps,o=r.children,u=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ii(y_,La),La|=n;else{if(!(n&1073741824))return t=u!==null?u.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ii(y_,La),La|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=u!==null?u.baseLanes:n,ii(y_,La),La|=r}else u!==null?(r=u.baseLanes|n,e.memoizedState=null):r=n,ii(y_,La),La|=r;return Us(t,e,o,n),e.child}function Qbe(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _H(t,e,n,r,o){var u=ma(n)?Ag:_s.current;return u=F_(e,u),T_(e,o),n=Q9(t,e,n,r,u,o),r=J9(),t!==null&&!ha?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Th(t,e,o)):(gi&&r&&V9(e),e.flags|=1,Us(t,e,n,o),e.child)}function fme(t,e,n,r,o){if(ma(n)){var u=!0;f3(e)}else u=!1;if(T_(e,o),e.stateNode===null)WD(t,e),Cbe(e,n,r),yH(e,n,r,o),r=!0;else if(t===null){var h=e.stateNode,m=e.memoizedProps;h.props=m;var _=h.context,x=n.contextType;typeof x=="object"&&x!==null?x=Ul(x):(x=ma(n)?Ag:_s.current,x=F_(e,x));var M=n.getDerivedStateFromProps,R=typeof M=="function"||typeof h.getSnapshotBeforeUpdate=="function";R||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(m!==r||_!==x)&&ome(e,h,r,x),kf=!1;var N=e.memoizedState;h.state=N,b3(e,r,h,o),_=e.memoizedState,m!==r||N!==_||fa.current||kf?(typeof M=="function"&&(gH(e,n,M,r),_=e.memoizedState),(m=kf||ime(e,n,m,r,N,_,x))?(R||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(e.flags|=4194308)):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=_),h.props=r,h.state=_,h.context=x,r=m):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{h=e.stateNode,Sbe(t,e),m=e.memoizedProps,x=e.type===e.elementType?m:Ru(e.type,m),h.props=x,R=e.pendingProps,N=h.context,_=n.contextType,typeof _=="object"&&_!==null?_=Ul(_):(_=ma(n)?Ag:_s.current,_=F_(e,_));var H=n.getDerivedStateFromProps;(M=typeof H=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(m!==R||N!==_)&&ome(e,h,r,_),kf=!1,N=e.memoizedState,h.state=N,b3(e,r,h,o);var Q=e.memoizedState;m!==R||N!==Q||fa.current||kf?(typeof H=="function"&&(gH(e,n,H,r),Q=e.memoizedState),(x=kf||ime(e,n,x,r,N,Q,_)||!1)?(M||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,Q,_),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,Q,_)),typeof h.componentDidUpdate=="function"&&(e.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof h.componentDidUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=Q),h.props=r,h.state=Q,h.context=_,r=x):(typeof h.componentDidUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&N===t.memoizedState||(e.flags|=1024),r=!1)}return wH(t,e,n,r,u,o)}function wH(t,e,n,r,o,u){Qbe(t,e);var h=(e.flags&128)!==0;if(!r&&!h)return o&&Jfe(e,n,!1),Th(t,e,u);r=e.stateNode,_3e.current=e;var m=h&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&h?(e.child=U_(e,t.child,null,u),e.child=U_(e,null,m,u)):Us(t,e,m,u),e.memoizedState=r.state,o&&Jfe(e,n,!0),e.child}function Jbe(t){var e=t.stateNode;e.pendingContext?Qfe(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qfe(t,e.context,!1),q9(t,e.containerInfo)}function mme(t,e,n,r,o){return B_(),z9(o),e.flags|=256,Us(t,e,n,r),e.child}var xH={dehydrated:null,treeContext:null,retryLane:0};function SH(t){return{baseLanes:t,cachePool:null,transitions:null}}function e_e(t,e,n){var r=e.pendingProps,o=Ai.current,u=!1,h=(e.flags&128)!==0,m;if((m=h)||(m=t!==null&&t.memoizedState===null?!1:(o&2)!==0),m?(u=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),ii(Ai,o&1),t===null)return mH(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(h=r.children,t=r.fallback,u?(r=e.mode,u=e.child,h={mode:"hidden",children:h},!(r&1)&&u!==null?(u.childLanes=0,u.pendingProps=h):u=lL(h,r,0,null),t=Sg(t,r,n,null),u.return=e,t.return=e,u.sibling=t,e.child=u,e.child.memoizedState=SH(n),e.memoizedState=xH,t):nG(e,h));if(o=t.memoizedState,o!==null&&(m=o.dehydrated,m!==null))return w3e(t,e,h,r,m,o,n);if(u){u=r.fallback,h=e.mode,o=t.child,m=o.sibling;var _={mode:"hidden",children:r.children};return!(h&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=_,e.deletions=null):(r=Gf(o,_),r.subtreeFlags=o.subtreeFlags&14680064),m!==null?u=Gf(m,u):(u=Sg(u,h,n,null),u.flags|=2),u.return=e,r.return=e,r.sibling=u,e.child=r,r=u,u=e.child,h=t.child.memoizedState,h=h===null?SH(n):{baseLanes:h.baseLanes|n,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=t.childLanes&~n,e.memoizedState=xH,r}return u=t.child,t=u.sibling,r=Gf(u,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nG(t,e){return e=lL({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function sD(t,e,n,r){return r!==null&&z9(r),U_(e,t.child,null,n),t=nG(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function w3e(t,e,n,r,o,u,h){if(n)return e.flags&256?(e.flags&=-257,r=M6(Error(Ft(422))),sD(t,e,h,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(u=r.fallback,o=e.mode,r=lL({mode:"visible",children:r.children},o,0,null),u=Sg(u,o,h,null),u.flags|=2,r.return=e,u.return=e,r.sibling=u,e.child=r,e.mode&1&&U_(e,t.child,null,h),e.child.memoizedState=SH(h),e.memoizedState=xH,u);if(!(e.mode&1))return sD(t,e,h,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var m=r.dgst;return r=m,u=Error(Ft(419)),r=M6(u,r,void 0),sD(t,e,h,r)}if(m=(h&t.childLanes)!==0,ha||m){if(r=Oo,r!==null){switch(h&-h){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|h)?0:o,o!==0&&o!==u.retryLane&&(u.retryLane=o,kh(t,o),Uu(r,t,o,-1))}return lG(),r=M6(Error(Ft(421))),sD(t,e,h,r)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=D3e.bind(null,t),o._reactRetry=e,null):(t=u.treeContext,Na=Vf(o.nextSibling),Fa=e,gi=!0,Du=null,t!==null&&(Ml[Al++]=mh,Ml[Al++]=vh,Ml[Al++]=Ig,mh=t.id,vh=t.overflow,Ig=e),e=nG(e,r.children),e.flags|=4096,e)}function vme(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vH(t.return,e,n)}function A6(t,e,n,r,o){var u=t.memoizedState;u===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(u.isBackwards=e,u.rendering=null,u.renderingStartTime=0,u.last=r,u.tail=n,u.tailMode=o)}function t_e(t,e,n){var r=e.pendingProps,o=r.revealOrder,u=r.tail;if(Us(t,e,r.children,n),r=Ai.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vme(t,n,e);else if(t.tag===19)vme(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ii(Ai,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&_3(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),A6(e,!1,o,n,u);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&_3(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}A6(e,!0,n,null,u);break;case"together":A6(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function WD(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Th(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Og|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ft(153));if(e.child!==null){for(t=e.child,n=Gf(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Gf(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function x3e(t,e,n){switch(e.tag){case 3:Jbe(e),B_();break;case 5:Tbe(e);break;case 1:ma(e.type)&&f3(e);break;case 4:q9(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;ii(g3,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ii(Ai,Ai.current&1),e.flags|=128,null):n&e.child.childLanes?e_e(t,e,n):(ii(Ai,Ai.current&1),t=Th(t,e,n),t!==null?t.sibling:null);ii(Ai,Ai.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return t_e(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ii(Ai,Ai.current),r)break;return null;case 22:case 23:return e.lanes=0,Zbe(t,e,n)}return Th(t,e,n)}var n_e,EH,r_e,i_e;n_e=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};EH=function(){};r_e=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,_g(jc.current);var u=null;switch(n){case"input":o=W8(t,o),r=W8(t,r),u=[];break;case"select":o=Oi({},o,{value:void 0}),r=Oi({},r,{value:void 0}),u=[];break;case"textarea":o=X8(t,o),r=X8(t,r),u=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=h3)}Z8(n,r);var h;n=null;for(x in o)if(!r.hasOwnProperty(x)&&o.hasOwnProperty(x)&&o[x]!=null)if(x==="style"){var m=o[x];for(h in m)m.hasOwnProperty(h)&&(n||(n={}),n[h]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(jC.hasOwnProperty(x)?u||(u=[]):(u=u||[]).push(x,null));for(x in r){var _=r[x];if(m=o!=null?o[x]:void 0,r.hasOwnProperty(x)&&_!==m&&(_!=null||m!=null))if(x==="style")if(m){for(h in m)!m.hasOwnProperty(h)||_&&_.hasOwnProperty(h)||(n||(n={}),n[h]="");for(h in _)_.hasOwnProperty(h)&&m[h]!==_[h]&&(n||(n={}),n[h]=_[h])}else n||(u||(u=[]),u.push(x,n)),n=_;else x==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,m=m?m.__html:void 0,_!=null&&m!==_&&(u=u||[]).push(x,_)):x==="children"?typeof _!="string"&&typeof _!="number"||(u=u||[]).push(x,""+_):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(jC.hasOwnProperty(x)?(_!=null&&x==="onScroll"&&fi("scroll",t),u||m===_||(u=[])):(u=u||[]).push(x,_))}n&&(u=u||[]).push("style",n);var x=u;(e.updateQueue=x)&&(e.flags|=4)}};i_e=function(t,e,n,r){n!==r&&(e.flags|=4)};function JE(t,e){if(!gi)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function fs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function S3e(t,e,n){var r=e.pendingProps;switch(j9(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return fs(e),null;case 1:return ma(e.type)&&p3(),fs(e),null;case 3:return r=e.stateNode,V_(),mi(fa),mi(_s),Y9(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(iD(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Du!==null&&(RH(Du),Du=null))),EH(t,e),fs(e),null;case 5:X9(e);var o=_g(JC.current);if(n=e.type,t!==null&&e.stateNode!=null)r_e(t,e,n,r,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ft(166));return fs(e),null}if(t=_g(jc.current),iD(e)){r=e.stateNode,n=e.type;var u=e.memoizedProps;switch(r[Bc]=e,r[ZC]=u,t=(e.mode&1)!==0,n){case"dialog":fi("cancel",r),fi("close",r);break;case"iframe":case"object":case"embed":fi("load",r);break;case"video":case"audio":for(o=0;o<wC.length;o++)fi(wC[o],r);break;case"source":fi("error",r);break;case"img":case"image":case"link":fi("error",r),fi("load",r);break;case"details":fi("toggle",r);break;case"input":Cfe(r,u),fi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!u.multiple},fi("invalid",r);break;case"textarea":kfe(r,u),fi("invalid",r)}Z8(n,u),o=null;for(var h in u)if(u.hasOwnProperty(h)){var m=u[h];h==="children"?typeof m=="string"?r.textContent!==m&&(u.suppressHydrationWarning!==!0&&rD(r.textContent,m,t),o=["children",m]):typeof m=="number"&&r.textContent!==""+m&&(u.suppressHydrationWarning!==!0&&rD(r.textContent,m,t),o=["children",""+m]):jC.hasOwnProperty(h)&&m!=null&&h==="onScroll"&&fi("scroll",r)}switch(n){case"input":XO(r),Pfe(r,u,!0);break;case"textarea":XO(r),Tfe(r);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(r.onclick=h3)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{h=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Iye(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=h.createElement(n,{is:r.is}):(t=h.createElement(n),n==="select"&&(h=t,r.multiple?h.multiple=!0:r.size&&(h.size=r.size))):t=h.createElementNS(t,n),t[Bc]=e,t[ZC]=r,n_e(t,e,!1,!1),e.stateNode=t;e:{switch(h=Q8(n,r),n){case"dialog":fi("cancel",t),fi("close",t),o=r;break;case"iframe":case"object":case"embed":fi("load",t),o=r;break;case"video":case"audio":for(o=0;o<wC.length;o++)fi(wC[o],t);o=r;break;case"source":fi("error",t),o=r;break;case"img":case"image":case"link":fi("error",t),fi("load",t),o=r;break;case"details":fi("toggle",t),o=r;break;case"input":Cfe(t,r),o=W8(t,r),fi("invalid",t);break;case"option":o=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=Oi({},r,{value:void 0}),fi("invalid",t);break;case"textarea":kfe(t,r),o=X8(t,r),fi("invalid",t);break;default:o=r}Z8(n,o),m=o;for(u in m)if(m.hasOwnProperty(u)){var _=m[u];u==="style"?Dye(t,_):u==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&Rye(t,_)):u==="children"?typeof _=="string"?(n!=="textarea"||_!=="")&&zC(t,_):typeof _=="number"&&zC(t,""+_):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(jC.hasOwnProperty(u)?_!=null&&u==="onScroll"&&fi("scroll",t):_!=null&&P9(t,u,_,h))}switch(n){case"input":XO(t),Pfe(t,r,!1);break;case"textarea":XO(t),Tfe(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qf(r.value));break;case"select":t.multiple=!!r.multiple,u=r.value,u!=null?E_(t,!!r.multiple,u,!1):r.defaultValue!=null&&E_(t,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=h3)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return fs(e),null;case 6:if(t&&e.stateNode!=null)i_e(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ft(166));if(n=_g(JC.current),_g(jc.current),iD(e)){if(r=e.stateNode,n=e.memoizedProps,r[Bc]=e,(u=r.nodeValue!==n)&&(t=Fa,t!==null))switch(t.tag){case 3:rD(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&rD(r.nodeValue,n,(t.mode&1)!==0)}u&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bc]=e,e.stateNode=r}return fs(e),null;case 13:if(mi(Ai),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(gi&&Na!==null&&e.mode&1&&!(e.flags&128))wbe(),B_(),e.flags|=98560,u=!1;else if(u=iD(e),r!==null&&r.dehydrated!==null){if(t===null){if(!u)throw Error(Ft(318));if(u=e.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(Ft(317));u[Bc]=e}else B_(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;fs(e),u=!1}else Du!==null&&(RH(Du),Du=null),u=!0;if(!u)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ai.current&1?vo===0&&(vo=3):lG())),e.updateQueue!==null&&(e.flags|=4),fs(e),null);case 4:return V_(),EH(t,e),t===null&&XC(e.stateNode.containerInfo),fs(e),null;case 10:return $9(e.type._context),fs(e),null;case 17:return ma(e.type)&&p3(),fs(e),null;case 19:if(mi(Ai),u=e.memoizedState,u===null)return fs(e),null;if(r=(e.flags&128)!==0,h=u.rendering,h===null)if(r)JE(u,!1);else{if(vo!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(h=_3(t),h!==null){for(e.flags|=128,JE(u,!1),r=h.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)u=n,t=r,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=t,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,t=h.dependencies,u.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ii(Ai,Ai.current&1|2),e.child}t=t.sibling}u.tail!==null&&Qi()>z_&&(e.flags|=128,r=!0,JE(u,!1),e.lanes=4194304)}else{if(!r)if(t=_3(h),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),JE(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!gi)return fs(e),null}else 2*Qi()-u.renderingStartTime>z_&&n!==1073741824&&(e.flags|=128,r=!0,JE(u,!1),e.lanes=4194304);u.isBackwards?(h.sibling=e.child,e.child=h):(n=u.last,n!==null?n.sibling=h:e.child=h,u.last=h)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=Qi(),e.sibling=null,n=Ai.current,ii(Ai,r?n&1|2:n&1),e):(fs(e),null);case 22:case 23:return aG(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?La&1073741824&&(fs(e),e.subtreeFlags&6&&(e.flags|=8192)):fs(e),null;case 24:return null;case 25:return null}throw Error(Ft(156,e.tag))}function E3e(t,e){switch(j9(e),e.tag){case 1:return ma(e.type)&&p3(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return V_(),mi(fa),mi(_s),Y9(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return X9(e),null;case 13:if(mi(Ai),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ft(340));B_()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return mi(Ai),null;case 4:return V_(),null;case 10:return $9(e.type._context),null;case 22:case 23:return aG(),null;case 24:return null;default:return null}}var aD=!1,ys=!1,C3e=typeof WeakSet=="function"?WeakSet:Set,ln=null;function g_(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ui(t,e,r)}else n.current=null}function CH(t,e,n){try{n()}catch(r){Ui(t,e,r)}}var gme=!1;function P3e(t,e){if(lH=u3,t=lbe(),U9(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,u=r.focusNode;r=r.focusOffset;try{n.nodeType,u.nodeType}catch{n=null;break e}var h=0,m=-1,_=-1,x=0,M=0,R=t,N=null;t:for(;;){for(var H;R!==n||o!==0&&R.nodeType!==3||(m=h+o),R!==u||r!==0&&R.nodeType!==3||(_=h+r),R.nodeType===3&&(h+=R.nodeValue.length),(H=R.firstChild)!==null;)N=R,R=H;for(;;){if(R===t)break t;if(N===n&&++x===o&&(m=h),N===u&&++M===r&&(_=h),(H=R.nextSibling)!==null)break;R=N,N=R.parentNode}R=H}n=m===-1||_===-1?null:{start:m,end:_}}else n=null}n=n||{start:0,end:0}}else n=null;for(uH={focusedElem:t,selectionRange:n},u3=!1,ln=e;ln!==null;)if(e=ln,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ln=t;else for(;ln!==null;){e=ln;try{var Q=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(Q!==null){var j=Q.memoizedProps,z=Q.memoizedState,U=e.stateNode,C=U.getSnapshotBeforeUpdate(e.elementType===e.type?j:Ru(e.type,j),z);U.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var K=e.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ft(163))}}catch(te){Ui(e,e.return,te)}if(t=e.sibling,t!==null){t.return=e.return,ln=t;break}ln=e.return}return Q=gme,gme=!1,Q}function IC(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.destroy;o.destroy=void 0,u!==void 0&&CH(e,n,u)}o=o.next}while(o!==r)}}function sL(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function PH(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function o_e(t){var e=t.alternate;e!==null&&(t.alternate=null,o_e(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Bc],delete e[ZC],delete e[hH],delete e[l3e],delete e[u3e])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function s_e(t){return t.tag===5||t.tag===3||t.tag===4}function yme(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||s_e(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kH(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=h3));else if(r!==4&&(t=t.child,t!==null))for(kH(t,e,n),t=t.sibling;t!==null;)kH(t,e,n),t=t.sibling}function TH(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(TH(t,e,n),t=t.sibling;t!==null;)TH(t,e,n),t=t.sibling}var Yo=null,Ou=!1;function pf(t,e,n){for(n=n.child;n!==null;)a_e(t,e,n),n=n.sibling}function a_e(t,e,n){if(Vc&&typeof Vc.onCommitFiberUnmount=="function")try{Vc.onCommitFiberUnmount(Q3,n)}catch{}switch(n.tag){case 5:ys||g_(n,e);case 6:var r=Yo,o=Ou;Yo=null,pf(t,e,n),Yo=r,Ou=o,Yo!==null&&(Ou?(t=Yo,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Yo.removeChild(n.stateNode));break;case 18:Yo!==null&&(Ou?(t=Yo,n=n.stateNode,t.nodeType===8?S6(t.parentNode,n):t.nodeType===1&&S6(t,n),WC(t)):S6(Yo,n.stateNode));break;case 4:r=Yo,o=Ou,Yo=n.stateNode.containerInfo,Ou=!0,pf(t,e,n),Yo=r,Ou=o;break;case 0:case 11:case 14:case 15:if(!ys&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var u=o,h=u.destroy;u=u.tag,h!==void 0&&(u&2||u&4)&&CH(n,e,h),o=o.next}while(o!==r)}pf(t,e,n);break;case 1:if(!ys&&(g_(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(m){Ui(n,e,m)}pf(t,e,n);break;case 21:pf(t,e,n);break;case 22:n.mode&1?(ys=(r=ys)||n.memoizedState!==null,pf(t,e,n),ys=r):pf(t,e,n);break;default:pf(t,e,n)}}function bme(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new C3e),e.forEach(function(r){var o=L3e.bind(null,t,r);n.has(r)||(n.add(r),r.then(o,o))})}}function ku(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var u=t,h=e,m=h;e:for(;m!==null;){switch(m.tag){case 5:Yo=m.stateNode,Ou=!1;break e;case 3:Yo=m.stateNode.containerInfo,Ou=!0;break e;case 4:Yo=m.stateNode.containerInfo,Ou=!0;break e}m=m.return}if(Yo===null)throw Error(Ft(160));a_e(u,h,o),Yo=null,Ou=!1;var _=o.alternate;_!==null&&(_.return=null),o.return=null}catch(x){Ui(o,e,x)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)l_e(e,t),e=e.sibling}function l_e(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ku(e,t),Dc(t),r&4){try{IC(3,t,t.return),sL(3,t)}catch(j){Ui(t,t.return,j)}try{IC(5,t,t.return)}catch(j){Ui(t,t.return,j)}}break;case 1:ku(e,t),Dc(t),r&512&&n!==null&&g_(n,n.return);break;case 5:if(ku(e,t),Dc(t),r&512&&n!==null&&g_(n,n.return),t.flags&32){var o=t.stateNode;try{zC(o,"")}catch(j){Ui(t,t.return,j)}}if(r&4&&(o=t.stateNode,o!=null)){var u=t.memoizedProps,h=n!==null?n.memoizedProps:u,m=t.type,_=t.updateQueue;if(t.updateQueue=null,_!==null)try{m==="input"&&u.type==="radio"&&u.name!=null&&Mye(o,u),Q8(m,h);var x=Q8(m,u);for(h=0;h<_.length;h+=2){var M=_[h],R=_[h+1];M==="style"?Dye(o,R):M==="dangerouslySetInnerHTML"?Rye(o,R):M==="children"?zC(o,R):P9(o,M,R,x)}switch(m){case"input":K8(o,u);break;case"textarea":Aye(o,u);break;case"select":var N=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!u.multiple;var H=u.value;H!=null?E_(o,!!u.multiple,H,!1):N!==!!u.multiple&&(u.defaultValue!=null?E_(o,!!u.multiple,u.defaultValue,!0):E_(o,!!u.multiple,u.multiple?[]:"",!1))}o[ZC]=u}catch(j){Ui(t,t.return,j)}}break;case 6:if(ku(e,t),Dc(t),r&4){if(t.stateNode===null)throw Error(Ft(162));o=t.stateNode,u=t.memoizedProps;try{o.nodeValue=u}catch(j){Ui(t,t.return,j)}}break;case 3:if(ku(e,t),Dc(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{WC(e.containerInfo)}catch(j){Ui(t,t.return,j)}break;case 4:ku(e,t),Dc(t);break;case 13:ku(e,t),Dc(t),o=t.child,o.flags&8192&&(u=o.memoizedState!==null,o.stateNode.isHidden=u,!u||o.alternate!==null&&o.alternate.memoizedState!==null||(oG=Qi())),r&4&&bme(t);break;case 22:if(M=n!==null&&n.memoizedState!==null,t.mode&1?(ys=(x=ys)||M,ku(e,t),ys=x):ku(e,t),Dc(t),r&8192){if(x=t.memoizedState!==null,(t.stateNode.isHidden=x)&&!M&&t.mode&1)for(ln=t,M=t.child;M!==null;){for(R=ln=M;ln!==null;){switch(N=ln,H=N.child,N.tag){case 0:case 11:case 14:case 15:IC(4,N,N.return);break;case 1:g_(N,N.return);var Q=N.stateNode;if(typeof Q.componentWillUnmount=="function"){r=N,n=N.return;try{e=r,Q.props=e.memoizedProps,Q.state=e.memoizedState,Q.componentWillUnmount()}catch(j){Ui(r,n,j)}}break;case 5:g_(N,N.return);break;case 22:if(N.memoizedState!==null){wme(R);continue}}H!==null?(H.return=N,ln=H):wme(R)}M=M.sibling}e:for(M=null,R=t;;){if(R.tag===5){if(M===null){M=R;try{o=R.stateNode,x?(u=o.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(m=R.stateNode,_=R.memoizedProps.style,h=_!=null&&_.hasOwnProperty("display")?_.display:null,m.style.display=Oye("display",h))}catch(j){Ui(t,t.return,j)}}}else if(R.tag===6){if(M===null)try{R.stateNode.nodeValue=x?"":R.memoizedProps}catch(j){Ui(t,t.return,j)}}else if((R.tag!==22&&R.tag!==23||R.memoizedState===null||R===t)&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===t)break e;for(;R.sibling===null;){if(R.return===null||R.return===t)break e;M===R&&(M=null),R=R.return}M===R&&(M=null),R.sibling.return=R.return,R=R.sibling}}break;case 19:ku(e,t),Dc(t),r&4&&bme(t);break;case 21:break;default:ku(e,t),Dc(t)}}function Dc(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(s_e(n)){var r=n;break e}n=n.return}throw Error(Ft(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(zC(o,""),r.flags&=-33);var u=yme(t);TH(t,u,o);break;case 3:case 4:var h=r.stateNode.containerInfo,m=yme(t);kH(t,m,h);break;default:throw Error(Ft(161))}}catch(_){Ui(t,t.return,_)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function k3e(t,e,n){ln=t,u_e(t)}function u_e(t,e,n){for(var r=(t.mode&1)!==0;ln!==null;){var o=ln,u=o.child;if(o.tag===22&&r){var h=o.memoizedState!==null||aD;if(!h){var m=o.alternate,_=m!==null&&m.memoizedState!==null||ys;m=aD;var x=ys;if(aD=h,(ys=_)&&!x)for(ln=o;ln!==null;)h=ln,_=h.child,h.tag===22&&h.memoizedState!==null?xme(o):_!==null?(_.return=h,ln=_):xme(o);for(;u!==null;)ln=u,u_e(u),u=u.sibling;ln=o,aD=m,ys=x}_me(t)}else o.subtreeFlags&8772&&u!==null?(u.return=o,ln=u):_me(t)}}function _me(t){for(;ln!==null;){var e=ln;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ys||sL(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ys)if(n===null)r.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Ru(e.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var u=e.updateQueue;u!==null&&rme(e,u,r);break;case 3:var h=e.updateQueue;if(h!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rme(e,h,n)}break;case 5:var m=e.stateNode;if(n===null&&e.flags&4){n=m;var _=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&n.focus();break;case"img":_.src&&(n.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var x=e.alternate;if(x!==null){var M=x.memoizedState;if(M!==null){var R=M.dehydrated;R!==null&&WC(R)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ft(163))}ys||e.flags&512&&PH(e)}catch(N){Ui(e,e.return,N)}}if(e===t){ln=null;break}if(n=e.sibling,n!==null){n.return=e.return,ln=n;break}ln=e.return}}function wme(t){for(;ln!==null;){var e=ln;if(e===t){ln=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ln=n;break}ln=e.return}}function xme(t){for(;ln!==null;){var e=ln;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{sL(4,e)}catch(_){Ui(e,n,_)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(_){Ui(e,o,_)}}var u=e.return;try{PH(e)}catch(_){Ui(e,u,_)}break;case 5:var h=e.return;try{PH(e)}catch(_){Ui(e,h,_)}}}catch(_){Ui(e,e.return,_)}if(e===t){ln=null;break}var m=e.sibling;if(m!==null){m.return=e.return,ln=m;break}ln=e.return}}var T3e=Math.ceil,S3=Oh.ReactCurrentDispatcher,rG=Oh.ReactCurrentOwner,Fl=Oh.ReactCurrentBatchConfig,br=0,Oo=null,lo=null,Zo=0,La=0,y_=om(0),vo=0,rP=null,Og=0,aL=0,iG=0,RC=null,da=null,oG=0,z_=1/0,hh=null,E3=!1,MH=null,zf=null,lD=!1,Rf=null,C3=0,OC=0,AH=null,KD=-1,qD=0;function Hs(){return br&6?Qi():KD!==-1?KD:KD=Qi()}function Hf(t){return t.mode&1?br&2&&Zo!==0?Zo&-Zo:d3e.transition!==null?(qD===0&&(qD=Wye()),qD):(t=jr,t!==0||(t=window.event,t=t===void 0?16:Jye(t.type)),t):1}function Uu(t,e,n,r){if(50<OC)throw OC=0,AH=null,Error(Ft(185));_P(t,n,r),(!(br&2)||t!==Oo)&&(t===Oo&&(!(br&2)&&(aL|=n),vo===4&&Af(t,Zo)),va(t,r),n===1&&br===0&&!(e.mode&1)&&(z_=Qi()+500,rL&&sm()))}function va(t,e){var n=t.callbackNode;dDe(t,e);var r=l3(t,t===Oo?Zo:0);if(r===0)n!==null&&Ife(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ife(n),e===1)t.tag===0?c3e(Sme.bind(null,t)):ybe(Sme.bind(null,t)),s3e(function(){!(br&6)&&sm()}),n=null;else{switch(Kye(r)){case 1:n=I9;break;case 4:n=Gye;break;case 16:n=a3;break;case 536870912:n=$ye;break;default:n=a3}n=g_e(n,c_e.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function c_e(t,e){if(KD=-1,qD=0,br&6)throw Error(Ft(327));var n=t.callbackNode;if(M_()&&t.callbackNode!==n)return null;var r=l3(t,t===Oo?Zo:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=P3(t,r);else{e=r;var o=br;br|=2;var u=h_e();(Oo!==t||Zo!==e)&&(hh=null,z_=Qi()+500,xg(t,e));do try{I3e();break}catch(m){d_e(t,m)}while(1);G9(),S3.current=u,br=o,lo!==null?e=0:(Oo=null,Zo=0,e=vo)}if(e!==0){if(e===2&&(o=rH(t),o!==0&&(r=o,e=IH(t,o))),e===1)throw n=rP,xg(t,0),Af(t,r),va(t,Qi()),n;if(e===6)Af(t,r);else{if(o=t.current.alternate,!(r&30)&&!M3e(o)&&(e=P3(t,r),e===2&&(u=rH(t),u!==0&&(r=u,e=IH(t,u))),e===1))throw n=rP,xg(t,0),Af(t,r),va(t,Qi()),n;switch(t.finishedWork=o,t.finishedLanes=r,e){case 0:case 1:throw Error(Ft(345));case 2:dg(t,da,hh);break;case 3:if(Af(t,r),(r&130023424)===r&&(e=oG+500-Qi(),10<e)){if(l3(t,0)!==0)break;if(o=t.suspendedLanes,(o&r)!==r){Hs(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=dH(dg.bind(null,t,da,hh),e);break}dg(t,da,hh);break;case 4:if(Af(t,r),(r&4194240)===r)break;for(e=t.eventTimes,o=-1;0<r;){var h=31-Bu(r);u=1<<h,h=e[h],h>o&&(o=h),r&=~u}if(r=o,r=Qi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*T3e(r/1960))-r,10<r){t.timeoutHandle=dH(dg.bind(null,t,da,hh),r);break}dg(t,da,hh);break;case 5:dg(t,da,hh);break;default:throw Error(Ft(329))}}}return va(t,Qi()),t.callbackNode===n?c_e.bind(null,t):null}function IH(t,e){var n=RC;return t.current.memoizedState.isDehydrated&&(xg(t,e).flags|=256),t=P3(t,e),t!==2&&(e=da,da=n,e!==null&&RH(e)),t}function RH(t){da===null?da=t:da.push.apply(da,t)}function M3e(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],u=o.getSnapshot;o=o.value;try{if(!Vu(u(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Af(t,e){for(e&=~iG,e&=~aL,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Bu(e),r=1<<n;t[n]=-1,e&=~r}}function Sme(t){if(br&6)throw Error(Ft(327));M_();var e=l3(t,0);if(!(e&1))return va(t,Qi()),null;var n=P3(t,e);if(t.tag!==0&&n===2){var r=rH(t);r!==0&&(e=r,n=IH(t,r))}if(n===1)throw n=rP,xg(t,0),Af(t,e),va(t,Qi()),n;if(n===6)throw Error(Ft(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,dg(t,da,hh),va(t,Qi()),null}function sG(t,e){var n=br;br|=1;try{return t(e)}finally{br=n,br===0&&(z_=Qi()+500,rL&&sm())}}function Dg(t){Rf!==null&&Rf.tag===0&&!(br&6)&&M_();var e=br;br|=1;var n=Fl.transition,r=jr;try{if(Fl.transition=null,jr=1,t)return t()}finally{jr=r,Fl.transition=n,br=e,!(br&6)&&sm()}}function aG(){La=y_.current,mi(y_)}function xg(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,o3e(n)),lo!==null)for(n=lo.return;n!==null;){var r=n;switch(j9(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&p3();break;case 3:V_(),mi(fa),mi(_s),Y9();break;case 5:X9(r);break;case 4:V_();break;case 13:mi(Ai);break;case 19:mi(Ai);break;case 10:$9(r.type._context);break;case 22:case 23:aG()}n=n.return}if(Oo=t,lo=t=Gf(t.current,null),Zo=La=e,vo=0,rP=null,iG=aL=Og=0,da=RC=null,bg!==null){for(e=0;e<bg.length;e++)if(n=bg[e],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,u=n.pending;if(u!==null){var h=u.next;u.next=o,r.next=h}n.pending=r}bg=null}return t}function d_e(t,e){do{var n=lo;try{if(G9(),GD.current=x3,w3){for(var r=Ri.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}w3=!1}if(Rg=0,Mo=mo=Ri=null,AC=!1,eP=0,rG.current=null,n===null||n.return===null){vo=1,rP=e,lo=null;break}e:{var u=t,h=n.return,m=n,_=e;if(e=Zo,m.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var x=_,M=m,R=M.tag;if(!(M.mode&1)&&(R===0||R===11||R===15)){var N=M.alternate;N?(M.updateQueue=N.updateQueue,M.memoizedState=N.memoizedState,M.lanes=N.lanes):(M.updateQueue=null,M.memoizedState=null)}var H=cme(h);if(H!==null){H.flags&=-257,dme(H,h,m,u,e),H.mode&1&&ume(u,x,e),e=H,_=x;var Q=e.updateQueue;if(Q===null){var j=new Set;j.add(_),e.updateQueue=j}else Q.add(_);break e}else{if(!(e&1)){ume(u,x,e),lG();break e}_=Error(Ft(426))}}else if(gi&&m.mode&1){var z=cme(h);if(z!==null){!(z.flags&65536)&&(z.flags|=256),dme(z,h,m,u,e),z9(j_(_,m));break e}}u=_=j_(_,m),vo!==4&&(vo=2),RC===null?RC=[u]:RC.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,e&=-e,u.lanes|=e;var U=qbe(u,_,e);nme(u,U);break e;case 1:m=_;var C=u.type,K=u.stateNode;if(!(u.flags&128)&&(typeof C.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(zf===null||!zf.has(K)))){u.flags|=65536,e&=-e,u.lanes|=e;var te=Xbe(u,m,e);nme(u,te);break e}}u=u.return}while(u!==null)}f_e(n)}catch(pe){e=pe,lo===n&&n!==null&&(lo=n=n.return);continue}break}while(1)}function h_e(){var t=S3.current;return S3.current=x3,t===null?x3:t}function lG(){(vo===0||vo===3||vo===2)&&(vo=4),Oo===null||!(Og&268435455)&&!(aL&268435455)||Af(Oo,Zo)}function P3(t,e){var n=br;br|=2;var r=h_e();(Oo!==t||Zo!==e)&&(hh=null,xg(t,e));do try{A3e();break}catch(o){d_e(t,o)}while(1);if(G9(),br=n,S3.current=r,lo!==null)throw Error(Ft(261));return Oo=null,Zo=0,vo}function A3e(){for(;lo!==null;)p_e(lo)}function I3e(){for(;lo!==null&&!nDe();)p_e(lo)}function p_e(t){var e=v_e(t.alternate,t,La);t.memoizedProps=t.pendingProps,e===null?f_e(t):lo=e,rG.current=null}function f_e(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=E3e(n,e),n!==null){n.flags&=32767,lo=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vo=6,lo=null;return}}else if(n=S3e(n,e,La),n!==null){lo=n;return}if(e=e.sibling,e!==null){lo=e;return}lo=e=t}while(e!==null);vo===0&&(vo=5)}function dg(t,e,n){var r=jr,o=Fl.transition;try{Fl.transition=null,jr=1,R3e(t,e,n,r)}finally{Fl.transition=o,jr=r}return null}function R3e(t,e,n,r){do M_();while(Rf!==null);if(br&6)throw Error(Ft(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ft(177));t.callbackNode=null,t.callbackPriority=0;var u=n.lanes|n.childLanes;if(hDe(t,u),t===Oo&&(lo=Oo=null,Zo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||lD||(lD=!0,g_e(a3,function(){return M_(),null})),u=(n.flags&15990)!==0,n.subtreeFlags&15990||u){u=Fl.transition,Fl.transition=null;var h=jr;jr=1;var m=br;br|=4,rG.current=null,P3e(t,n),l_e(n,t),QDe(uH),u3=!!lH,uH=lH=null,t.current=n,k3e(n),rDe(),br=m,jr=h,Fl.transition=u}else t.current=n;if(lD&&(lD=!1,Rf=t,C3=o),u=t.pendingLanes,u===0&&(zf=null),sDe(n.stateNode),va(t,Qi()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(E3)throw E3=!1,t=MH,MH=null,t;return C3&1&&t.tag!==0&&M_(),u=t.pendingLanes,u&1?t===AH?OC++:(OC=0,AH=t):OC=0,sm(),null}function M_(){if(Rf!==null){var t=Kye(C3),e=Fl.transition,n=jr;try{if(Fl.transition=null,jr=16>t?16:t,Rf===null)var r=!1;else{if(t=Rf,Rf=null,C3=0,br&6)throw Error(Ft(331));var o=br;for(br|=4,ln=t.current;ln!==null;){var u=ln,h=u.child;if(ln.flags&16){var m=u.deletions;if(m!==null){for(var _=0;_<m.length;_++){var x=m[_];for(ln=x;ln!==null;){var M=ln;switch(M.tag){case 0:case 11:case 15:IC(8,M,u)}var R=M.child;if(R!==null)R.return=M,ln=R;else for(;ln!==null;){M=ln;var N=M.sibling,H=M.return;if(o_e(M),M===x){ln=null;break}if(N!==null){N.return=H,ln=N;break}ln=H}}}var Q=u.alternate;if(Q!==null){var j=Q.child;if(j!==null){Q.child=null;do{var z=j.sibling;j.sibling=null,j=z}while(j!==null)}}ln=u}}if(u.subtreeFlags&2064&&h!==null)h.return=u,ln=h;else e:for(;ln!==null;){if(u=ln,u.flags&2048)switch(u.tag){case 0:case 11:case 15:IC(9,u,u.return)}var U=u.sibling;if(U!==null){U.return=u.return,ln=U;break e}ln=u.return}}var C=t.current;for(ln=C;ln!==null;){h=ln;var K=h.child;if(h.subtreeFlags&2064&&K!==null)K.return=h,ln=K;else e:for(h=C;ln!==null;){if(m=ln,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:sL(9,m)}}catch(pe){Ui(m,m.return,pe)}if(m===h){ln=null;break e}var te=m.sibling;if(te!==null){te.return=m.return,ln=te;break e}ln=m.return}}if(br=o,sm(),Vc&&typeof Vc.onPostCommitFiberRoot=="function")try{Vc.onPostCommitFiberRoot(Q3,t)}catch{}r=!0}return r}finally{jr=n,Fl.transition=e}}return!1}function Eme(t,e,n){e=j_(n,e),e=qbe(t,e,1),t=jf(t,e,1),e=Hs(),t!==null&&(_P(t,1,e),va(t,e))}function Ui(t,e,n){if(t.tag===3)Eme(t,t,n);else for(;e!==null;){if(e.tag===3){Eme(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(zf===null||!zf.has(r))){t=j_(n,t),t=Xbe(e,t,1),e=jf(e,t,1),t=Hs(),e!==null&&(_P(e,1,t),va(e,t));break}}e=e.return}}function O3e(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Hs(),t.pingedLanes|=t.suspendedLanes&n,Oo===t&&(Zo&n)===n&&(vo===4||vo===3&&(Zo&130023424)===Zo&&500>Qi()-oG?xg(t,0):iG|=n),va(t,e)}function m_e(t,e){e===0&&(t.mode&1?(e=QO,QO<<=1,!(QO&130023424)&&(QO=4194304)):e=1);var n=Hs();t=kh(t,e),t!==null&&(_P(t,e,n),va(t,n))}function D3e(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),m_e(t,n)}function L3e(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ft(314))}r!==null&&r.delete(e),m_e(t,n)}var v_e;v_e=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||fa.current)ha=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ha=!1,x3e(t,e,n);ha=!!(t.flags&131072)}else ha=!1,gi&&e.flags&1048576&&bbe(e,v3,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;WD(t,e),t=e.pendingProps;var o=F_(e,_s.current);T_(e,n),o=Q9(null,e,r,t,o,n);var u=J9();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ma(r)?(u=!0,f3(e)):u=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,K9(e),o.updater=iL,e.stateNode=o,o._reactInternals=e,yH(e,r,t,n),e=wH(null,e,r,!0,u,n)):(e.tag=0,gi&&u&&V9(e),Us(null,e,o,n),e=e.child),e;case 16:r=e.elementType;e:{switch(WD(t,e),t=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=F3e(r),t=Ru(r,t),o){case 0:e=_H(null,e,r,t,n);break e;case 1:e=fme(null,e,r,t,n);break e;case 11:e=hme(null,e,r,t,n);break e;case 14:e=pme(null,e,r,Ru(r.type,t),n);break e}throw Error(Ft(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ru(r,o),_H(t,e,r,o,n);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ru(r,o),fme(t,e,r,o,n);case 3:e:{if(Jbe(e),t===null)throw Error(Ft(387));r=e.pendingProps,u=e.memoizedState,o=u.element,Sbe(t,e),b3(e,r,null,n);var h=e.memoizedState;if(r=h.element,u.isDehydrated)if(u={element:r,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},e.updateQueue.baseState=u,e.memoizedState=u,e.flags&256){o=j_(Error(Ft(423)),e),e=mme(t,e,r,n,o);break e}else if(r!==o){o=j_(Error(Ft(424)),e),e=mme(t,e,r,n,o);break e}else for(Na=Vf(e.stateNode.containerInfo.firstChild),Fa=e,gi=!0,Du=null,n=kbe(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(B_(),r===o){e=Th(t,e,n);break e}Us(t,e,r,n)}e=e.child}return e;case 5:return Tbe(e),t===null&&mH(e),r=e.type,o=e.pendingProps,u=t!==null?t.memoizedProps:null,h=o.children,cH(r,o)?h=null:u!==null&&cH(r,u)&&(e.flags|=32),Qbe(t,e),Us(t,e,h,n),e.child;case 6:return t===null&&mH(e),null;case 13:return e_e(t,e,n);case 4:return q9(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=U_(e,null,r,n):Us(t,e,r,n),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ru(r,o),hme(t,e,r,o,n);case 7:return Us(t,e,e.pendingProps,n),e.child;case 8:return Us(t,e,e.pendingProps.children,n),e.child;case 12:return Us(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,u=e.memoizedProps,h=o.value,ii(g3,r._currentValue),r._currentValue=h,u!==null)if(Vu(u.value,h)){if(u.children===o.children&&!fa.current){e=Th(t,e,n);break e}}else for(u=e.child,u!==null&&(u.return=e);u!==null;){var m=u.dependencies;if(m!==null){h=u.child;for(var _=m.firstContext;_!==null;){if(_.context===r){if(u.tag===1){_=wh(-1,n&-n),_.tag=2;var x=u.updateQueue;if(x!==null){x=x.shared;var M=x.pending;M===null?_.next=_:(_.next=M.next,M.next=_),x.pending=_}}u.lanes|=n,_=u.alternate,_!==null&&(_.lanes|=n),vH(u.return,n,e),m.lanes|=n;break}_=_.next}}else if(u.tag===10)h=u.type===e.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(Ft(341));h.lanes|=n,m=h.alternate,m!==null&&(m.lanes|=n),vH(h,n,e),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===e){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}Us(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,T_(e,n),o=Ul(o),r=r(o),e.flags|=1,Us(t,e,r,n),e.child;case 14:return r=e.type,o=Ru(r,e.pendingProps),o=Ru(r.type,o),pme(t,e,r,o,n);case 15:return Ybe(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ru(r,o),WD(t,e),e.tag=1,ma(r)?(t=!0,f3(e)):t=!1,T_(e,n),Cbe(e,r,o),yH(e,r,o,n),wH(null,e,r,!0,t,n);case 19:return t_e(t,e,n);case 22:return Zbe(t,e,n)}throw Error(Ft(156,e.tag))};function g_e(t,e){return Hye(t,e)}function N3e(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(t,e,n,r){return new N3e(t,e,n,r)}function uG(t){return t=t.prototype,!(!t||!t.isReactComponent)}function F3e(t){if(typeof t=="function")return uG(t)?1:0;if(t!=null){if(t=t.$$typeof,t===T9)return 11;if(t===M9)return 14}return 2}function Gf(t,e){var n=t.alternate;return n===null?(n=Ol(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function XD(t,e,n,r,o,u){var h=2;if(r=t,typeof t=="function")uG(t)&&(h=1);else if(typeof t=="string")h=5;else e:switch(t){case l_:return Sg(n.children,o,u,e);case k9:h=8,o|=8;break;case z8:return t=Ol(12,n,e,o|2),t.elementType=z8,t.lanes=u,t;case H8:return t=Ol(13,n,e,o),t.elementType=H8,t.lanes=u,t;case G8:return t=Ol(19,n,e,o),t.elementType=G8,t.lanes=u,t;case Pye:return lL(n,o,u,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Eye:h=10;break e;case Cye:h=9;break e;case T9:h=11;break e;case M9:h=14;break e;case Pf:h=16,r=null;break e}throw Error(Ft(130,t==null?t:typeof t,""))}return e=Ol(h,n,e,o),e.elementType=t,e.type=r,e.lanes=u,e}function Sg(t,e,n,r){return t=Ol(7,t,r,e),t.lanes=n,t}function lL(t,e,n,r){return t=Ol(22,t,r,e),t.elementType=Pye,t.lanes=n,t.stateNode={isHidden:!1},t}function I6(t,e,n){return t=Ol(6,t,null,e),t.lanes=n,t}function R6(t,e,n){return e=Ol(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function B3e(t,e,n,r,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=h6(0),this.expirationTimes=h6(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h6(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function cG(t,e,n,r,o,u,h,m,_){return t=new B3e(t,e,n,m,_),e===1?(e=1,u===!0&&(e|=8)):e=0,u=Ol(3,null,null,e),t.current=u,u.stateNode=t,u.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},K9(u),t}function U3e(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a_,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function y_e(t){if(!t)return Jf;t=t._reactInternals;e:{if($g(t)!==t||t.tag!==1)throw Error(Ft(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ma(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ft(171))}if(t.tag===1){var n=t.type;if(ma(n))return gbe(t,n,e)}return e}function b_e(t,e,n,r,o,u,h,m,_){return t=cG(n,r,!0,t,o,u,h,m,_),t.context=y_e(null),n=t.current,r=Hs(),o=Hf(n),u=wh(r,o),u.callback=e??null,jf(n,u,o),t.current.lanes=o,_P(t,o,r),va(t,r),t}function uL(t,e,n,r){var o=e.current,u=Hs(),h=Hf(o);return n=y_e(n),e.context===null?e.context=n:e.pendingContext=n,e=wh(u,h),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jf(o,e,h),t!==null&&(Uu(t,o,h,u),HD(t,o,h)),h}function k3(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Cme(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dG(t,e){Cme(t,e),(t=t.alternate)&&Cme(t,e)}function V3e(){return null}var __e=typeof reportError=="function"?reportError:function(t){console.error(t)};function hG(t){this._internalRoot=t}cL.prototype.render=hG.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ft(409));uL(t,e,null,null)};cL.prototype.unmount=hG.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Dg(function(){uL(null,t,null,null)}),e[Ph]=null}};function cL(t){this._internalRoot=t}cL.prototype.unstable_scheduleHydration=function(t){if(t){var e=Yye();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mf.length&&e!==0&&e<Mf[n].priority;n++);Mf.splice(n,0,t),n===0&&Qye(t)}};function pG(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dL(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pme(){}function j3e(t,e,n,r,o){if(o){if(typeof r=="function"){var u=r;r=function(){var x=k3(h);u.call(x)}}var h=b_e(e,r,t,0,null,!1,!1,"",Pme);return t._reactRootContainer=h,t[Ph]=h.current,XC(t.nodeType===8?t.parentNode:t),Dg(),h}for(;o=t.lastChild;)t.removeChild(o);if(typeof r=="function"){var m=r;r=function(){var x=k3(_);m.call(x)}}var _=cG(t,0,!1,null,null,!1,!1,"",Pme);return t._reactRootContainer=_,t[Ph]=_.current,XC(t.nodeType===8?t.parentNode:t),Dg(function(){uL(e,_,n,r)}),_}function hL(t,e,n,r,o){var u=n._reactRootContainer;if(u){var h=u;if(typeof o=="function"){var m=o;o=function(){var _=k3(h);m.call(_)}}uL(e,h,t,o)}else h=j3e(n,e,t,o,r);return k3(h)}qye=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=_C(e.pendingLanes);n!==0&&(R9(e,n|1),va(e,Qi()),!(br&6)&&(z_=Qi()+500,sm()))}break;case 13:Dg(function(){var r=kh(t,1);if(r!==null){var o=Hs();Uu(r,t,1,o)}}),dG(t,1)}};O9=function(t){if(t.tag===13){var e=kh(t,134217728);if(e!==null){var n=Hs();Uu(e,t,134217728,n)}dG(t,134217728)}};Xye=function(t){if(t.tag===13){var e=Hf(t),n=kh(t,e);if(n!==null){var r=Hs();Uu(n,t,e,r)}dG(t,e)}};Yye=function(){return jr};Zye=function(t,e){var n=jr;try{return jr=t,e()}finally{jr=n}};eH=function(t,e,n){switch(e){case"input":if(K8(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=nL(r);if(!o)throw Error(Ft(90));Tye(r),K8(r,o)}}}break;case"textarea":Aye(t,n);break;case"select":e=n.value,e!=null&&E_(t,!!n.multiple,e,!1)}};Fye=sG;Bye=Dg;var z3e={usingClientEntryPoint:!1,Events:[xP,h_,nL,Lye,Nye,sG]},eC={findFiberByHostInstance:yg,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},H3e={bundleType:eC.bundleType,version:eC.version,rendererPackageName:eC.rendererPackageName,rendererConfig:eC.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Oh.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jye(t),t===null?null:t.stateNode},findFiberByHostInstance:eC.findFiberByHostInstance||V3e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uD=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uD.isDisabled&&uD.supportsFiber)try{Q3=uD.inject(H3e),Vc=uD}catch{}}za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z3e;za.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!pG(e))throw Error(Ft(200));return U3e(t,e,null,n)};za.createRoot=function(t,e){if(!pG(t))throw Error(Ft(299));var n=!1,r="",o=__e;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=cG(t,1,!1,null,null,n,!1,r,o),t[Ph]=e.current,XC(t.nodeType===8?t.parentNode:t),new hG(e)};za.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ft(188)):(t=Object.keys(t).join(","),Error(Ft(268,t)));return t=jye(e),t=t===null?null:t.stateNode,t};za.flushSync=function(t){return Dg(t)};za.hydrate=function(t,e,n){if(!dL(e))throw Error(Ft(200));return hL(null,t,e,!0,n)};za.hydrateRoot=function(t,e,n){if(!pG(t))throw Error(Ft(405));var r=n!=null&&n.hydratedSources||null,o=!1,u="",h=__e;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),e=b_e(e,null,t,1,n??null,o,!1,u,h),t[Ph]=e.current,XC(t),r)for(t=0;t<r.length;t++)n=r[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new cL(e)};za.render=function(t,e,n){if(!dL(e))throw Error(Ft(200));return hL(null,t,e,!1,n)};za.unmountComponentAtNode=function(t){if(!dL(t))throw Error(Ft(40));return t._reactRootContainer?(Dg(function(){hL(null,null,t,!1,function(){t._reactRootContainer=null,t[Ph]=null})}),!0):!1};za.unstable_batchedUpdates=sG;za.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!dL(n))throw Error(Ft(200));if(t==null||t._reactInternals===void 0)throw Error(Ft(38));return hL(t,e,n,!1,r)};za.version="18.2.0-next-9e3b772b8-20220608";function w_e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w_e)}catch(t){console.error(t)}}w_e(),bye.exports=za;var G3e=bye.exports,kme=G3e;V8.createRoot=kme.createRoot,V8.hydrateRoot=kme.hydrateRoot;function cD(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var T3={exports:{}},Mt={};(function(t){var e=Object.defineProperty,n=Object.defineProperties,r=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,m=(ee,ve,De)=>ve in ee?e(ee,ve,{enumerable:!0,configurable:!0,writable:!0,value:De}):ee[ve]=De,_=(ee,ve)=>{for(var De in ve||(ve={}))u.call(ve,De)&&m(ee,De,ve[De]);if(o)for(var De of o(ve))h.call(ve,De)&&m(ee,De,ve[De]);return ee},x=(ee,ve)=>n(ee,r(ve)),M=ee=>e(ee,"__esModule",{value:!0}),R=(ee,ve)=>{M(ee);for(var De in ve)e(ee,De,{get:ve[De],enumerable:!0})};R(t,{Atom:()=>Am,PointerProxy:()=>Aw,Ticker:()=>cd,getPointerParts:()=>sd,isPointer:()=>el,isPrism:()=>ld,iterateAndCountTicks:()=>Mw,iterateOver:()=>Im,pointer:()=>Gl,pointerToPrism:()=>Yu,prism:()=>Xu,val:()=>qh});var N=Array.isArray,H=N,Q=typeof ki=="object"&&ki&&ki.Object===Object&&ki,j=Q,z=typeof self=="object"&&self&&self.Object===Object&&self,U=j||z||Function("return this")(),C=U,K=C.Symbol,te=K,pe=Object.prototype,Z=pe.hasOwnProperty,be=pe.toString,Pe=te?te.toStringTag:void 0;function G(ee){var ve=Z.call(ee,Pe),De=ee[Pe];try{ee[Pe]=void 0;var ft=!0}catch{}var Rn=be.call(ee);return ft&&(ve?ee[Pe]=De:delete ee[Pe]),Rn}var ye=G,St=Object.prototype,kt=St.toString;function it(ee){return kt.call(ee)}var me=it,lt="[object Null]",Fe="[object Undefined]",vt=te?te.toStringTag:void 0;function Ge(ee){return ee==null?ee===void 0?Fe:lt:vt&&vt in Object(ee)?ye(ee):me(ee)}var mt=Ge;function Je(ee){return ee!=null&&typeof ee=="object"}var Be=Je,nt="[object Symbol]";function $t(ee){return typeof ee=="symbol"||Be(ee)&&mt(ee)==nt}var Ut=$t,Dt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,en=/^\w*$/;function on(ee,ve){if(H(ee))return!1;var De=typeof ee;return De=="number"||De=="symbol"||De=="boolean"||ee==null||Ut(ee)?!0:en.test(ee)||!Dt.test(ee)||ve!=null&&ee in Object(ve)}var wn=on;function Wn(ee){var ve=typeof ee;return ee!=null&&(ve=="object"||ve=="function")}var qr=Wn,xn="[object AsyncFunction]",et="[object Function]",Qr="[object GeneratorFunction]",Pn="[object Proxy]";function Sn(ee){if(!qr(ee))return!1;var ve=mt(ee);return ve==et||ve==Qr||ve==xn||ve==Pn}var gn=Sn,Ir=C["__core-js_shared__"],kn=Ir,Nn=function(){var ee=/[^.]+$/.exec(kn&&kn.keys&&kn.keys.IE_PROTO||"");return ee?"Symbol(src)_1."+ee:""}();function cr(ee){return!!Nn&&Nn in ee}var si=cr,Dr=Function.prototype,Ee=Dr.toString;function ce(ee){if(ee!=null){try{return Ee.call(ee)}catch{}try{return ee+""}catch{}}return""}var ut=ce,Vt=/[\\^$.*+?()[\]{}|]/g,Ot=/^\[object .+?Constructor\]$/,Bt=Function.prototype,mn=Object.prototype,Ht=Bt.toString,pt=mn.hasOwnProperty,En=RegExp("^"+Ht.call(pt).replace(Vt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function tn(ee){if(!qr(ee)||si(ee))return!1;var ve=gn(ee)?En:Ot;return ve.test(ut(ee))}var yn=tn;function rn(ee,ve){return ee==null?void 0:ee[ve]}var Jt=rn;function Bn(ee,ve){var De=Jt(ee,ve);return yn(De)?De:void 0}var pr=Bn,Le=pr(Object,"create"),Gt=Le;function ht(){this.__data__=Gt?Gt(null):{},this.size=0}var jt=ht;function qt(ee){var ve=this.has(ee)&&delete this.__data__[ee];return this.size-=ve?1:0,ve}var Qn=qt,Lr="__lodash_hash_undefined__",Mr=Object.prototype,es=Mr.hasOwnProperty;function rr(ee){var ve=this.__data__;if(Gt){var De=ve[ee];return De===Lr?void 0:De}return es.call(ve,ee)?ve[ee]:void 0}var zr=rr,Ar=Object.prototype,Yc=Ar.hasOwnProperty;function Zc(ee){var ve=this.__data__;return Gt?ve[ee]!==void 0:Yc.call(ve,ee)}var Qc=Zc,Wa="__lodash_hash_undefined__";function Jc(ee,ve){var De=this.__data__;return this.size+=this.has(ee)?0:1,De[ee]=Gt&&ve===void 0?Wa:ve,this}var $u=Jc;function ba(ee){var ve=-1,De=ee==null?0:ee.length;for(this.clear();++ve<De;){var ft=ee[ve];this.set(ft[0],ft[1])}}ba.prototype.clear=jt,ba.prototype.delete=Qn,ba.prototype.get=zr,ba.prototype.has=Qc,ba.prototype.set=$u;var ed=ba;function Lh(){this.__data__=[],this.size=0}var dm=Lh;function we(ee,ve){return ee===ve||ee!==ee&&ve!==ve}var tt=we;function yt(ee,ve){for(var De=ee.length;De--;)if(tt(ee[De][0],ve))return De;return-1}var We=yt,_t=Array.prototype,Xt=_t.splice;function pn(ee){var ve=this.__data__,De=We(ve,ee);if(De<0)return!1;var ft=ve.length-1;return De==ft?ve.pop():Xt.call(ve,De,1),--this.size,!0}var Ln=pn;function Tn(ee){var ve=this.__data__,De=We(ve,ee);return De<0?void 0:ve[De][1]}var Kn=Tn;function Mn(ee){return We(this.__data__,ee)>-1}var jn=Mn;function Nr(ee,ve){var De=this.__data__,ft=We(De,ee);return ft<0?(++this.size,De.push([ee,ve])):De[ft][1]=ve,this}var lr=Nr;function Xr(ee){var ve=-1,De=ee==null?0:ee.length;for(this.clear();++ve<De;){var ft=ee[ve];this.set(ft[0],ft[1])}}Xr.prototype.clear=dm,Xr.prototype.delete=Ln,Xr.prototype.get=Kn,Xr.prototype.has=jn,Xr.prototype.set=lr;var xs=Xr,Hr=pr(C,"Map"),Yn=Hr;function Ka(){this.size=0,this.__data__={hash:new ed,map:new(Yn||xs),string:new ed}}var wr=Ka;function Ys(ee){var ve=typeof ee;return ve=="string"||ve=="number"||ve=="symbol"||ve=="boolean"?ee!=="__proto__":ee===null}var qa=Ys;function Zs(ee,ve){var De=ee.__data__;return qa(ve)?De[typeof ve=="string"?"string":"hash"]:De.map}var Xa=Zs;function Yr(ee){var ve=Xa(this,ee).delete(ee);return this.size-=ve?1:0,ve}var ts=Yr;function Ya(ee){return Xa(this,ee).get(ee)}var eo=Ya;function Wu(ee){return Xa(this,ee).has(ee)}var Nh=Wu;function td(ee,ve){var De=Xa(this,ee),ft=De.size;return De.set(ee,ve),this.size+=De.size==ft?0:1,this}var hm=td;function zl(ee){var ve=-1,De=ee==null?0:ee.length;for(this.clear();++ve<De;){var ft=ee[ve];this.set(ft[0],ft[1])}}zl.prototype.clear=wr,zl.prototype.delete=ts,zl.prototype.get=eo,zl.prototype.has=Nh,zl.prototype.set=hm;var pm=zl,Fh="Expected a function";function fm(ee,ve){if(typeof ee!="function"||ve!=null&&typeof ve!="function")throw new TypeError(Fh);var De=function(){var ft=arguments,Rn=ve?ve.apply(this,ft):ft[0],dr=De.cache;if(dr.has(Rn))return dr.get(Rn);var to=ee.apply(this,ft);return De.cache=dr.set(Rn,to)||dr,to};return De.cache=new(fm.Cache||pm),De}fm.Cache=pm;var cw=fm,Za=500;function nd(ee){var ve=cw(ee,function(ft){return De.size===Za&&De.clear(),ft}),De=ve.cache;return ve}var dw=nd,rd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,e0=/\\(\\)?/g,t0=dw(function(ee){var ve=[];return ee.charCodeAt(0)===46&&ve.push(""),ee.replace(rd,function(De,ft,Rn,dr){ve.push(Rn?dr.replace(e0,"$1"):ft||De)}),ve}),Qa=t0;function n0(ee,ve){for(var De=-1,ft=ee==null?0:ee.length,Rn=Array(ft);++De<ft;)Rn[De]=ve(ee[De],De,ee);return Rn}var hw=n0,id=1/0,mm=te?te.prototype:void 0,vm=mm?mm.toString:void 0;function gm(ee){if(typeof ee=="string")return ee;if(H(ee))return hw(ee,gm)+"";if(Ut(ee))return vm?vm.call(ee):"";var ve=ee+"";return ve=="0"&&1/ee==-id?"-0":ve}var r0=gm;function i0(ee){return ee==null?"":r0(ee)}var o0=i0;function s0(ee,ve){return H(ee)?ee:wn(ee,ve)?[ee]:Qa(o0(ee))}var pw=s0,Ku=1/0;function od(ee){if(typeof ee=="string"||Ut(ee))return ee;var ve=ee+"";return ve=="0"&&1/ee==-Ku?"-0":ve}var fw=od;function ym(ee,ve){ve=pw(ve,ee);for(var De=0,ft=ve.length;ee!=null&&De<ft;)ee=ee[fw(ve[De++])];return De&&De==ft?ee:void 0}var Ja=ym;function Hl(ee,ve,De){var ft=ee==null?void 0:Ja(ee,ve);return ft===void 0?De:ft}var a0=Hl;function Bh(ee,ve){return function(De){return ee(ve(De))}}var mw=Bh,vw=mw(Object.getPrototypeOf,Object),l0=vw,gw="[object Object]",yw=Function.prototype,u0=Object.prototype,c0=yw.toString,d0=u0.hasOwnProperty,bm=c0.call(Object);function h0(ee){if(!Be(ee)||mt(ee)!=gw)return!1;var ve=l0(ee);if(ve===null)return!0;var De=d0.call(ve,"constructor")&&ve.constructor;return typeof De=="function"&&De instanceof De&&c0.call(De)==bm}var p0=h0;function f0(ee){var ve=ee==null?0:ee.length;return ve?ee[ve-1]:void 0}var _m=f0,Uh=new WeakMap,qu=new WeakMap,m0=Symbol("pointerMeta"),bw={get(ee,ve){if(ve===m0)return Uh.get(ee);let De=qu.get(ee);De||(De=new Map,qu.set(ee,De));const ft=De.get(ve);if(ft!==void 0)return ft;const Rn=Uh.get(ee),dr=ad({root:Rn.root,path:[...Rn.path,ve]});return De.set(ve,dr),dr}},Qs=ee=>ee[m0],sd=ee=>{const{root:ve,path:De}=Qs(ee);return{root:ve,path:De}};function ad(ee){var ve;const De={root:ee.root,path:(ve=ee.path)!=null?ve:[]},ft={};return Uh.set(ft,De),new Proxy(ft,bw)}var Gl=ad,el=ee=>ee&&!!Qs(ee);function wm(ee,ve,De){return ve.length===0?De(ee):$l(ee,ve,De)}var $l=(ee,ve,De)=>{if(ve.length===0)return De(ee);if(Array.isArray(ee)){let[ft,...Rn]=ve;ft=parseInt(String(ft),10),isNaN(ft)&&(ft=0);const dr=ee[ft],to=$l(dr,Rn,De);if(dr===to)return ee;const Ss=[...ee];return Ss.splice(ft,1,to),Ss}else if(typeof ee=="object"&&ee!==null){const[ft,...Rn]=ve,dr=ee[ft],to=$l(dr,Rn,De);return dr===to?ee:x(_({},ee),{[ft]:to})}else{const[ft,...Rn]=ve;return{[ft]:$l(void 0,Rn,De)}}},Hi=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const ee=this._head;if(ee)return this._head=ee.next,ee.data}push(ee){const ve={next:this._head,data:ee};this._head=ve}};function ld(ee){return!!(ee&&ee.isPrism&&ee.isPrism===!0)}function Vh(){const ee=()=>{},ve=new Hi,De=ee;return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{ve.push(De)},stopIgnoringDependencies:()=>{ve.peek()!==De||ve.pop()},reportResolutionStart:Zu=>{const Qu=ve.peek();Qu&&Qu(Zu),ve.push(De)},reportResolutionEnd:Zu=>{ve.pop()},pushCollector:Zu=>{ve.push(Zu)},popCollector:Zu=>{if(ve.peek()!==Zu)throw new Error("Popped collector is not on top of the stack");ve.pop()}}}function _w(){const ee="__dataverse_discoveryMechanism_sharedStack",ve=typeof window<"u"?window:typeof ki<"u"?ki:{};if(ve){const De=ve[ee];if(De&&typeof De=="object"&&De.type==="Dataverse_discoveryMechanism")return De;{const ft=Vh();return ve[ee]=ft,ft}}else return Vh()}var{startIgnoringDependencies:Wl,stopIgnoringDependencies:tl,reportResolutionEnd:xm,reportResolutionStart:ww,pushCollector:jh,popCollector:xw}=_w(),v0=()=>{},g0=class{constructor(ee,ve){this._fn=ee,this._prismInstance=ve,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new zh(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=De=>{this._possiblyStaleDeps.add(De),this._markAsStale()};for(const De of this._dependencies)De._addDependent(this._reactToDependencyGoingStale);Wl(),this.getValue(),tl()}get hasDependents(){return this._dependents.size>0}removeDependent(ee){this._dependents.delete(ee)}addDependent(ee){this._dependents.add(ee)}destroy(){for(const ee of this._dependencies)ee._removeDependent(this._reactToDependencyGoingStale);Em(this._scope)}getValue(){if(!this._isFresh){const ee=this._recalculate();this._lastValue=ee,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let ee;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let ft=!1;Wl();for(const Rn of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(Rn)!==Rn.getValue()){ft=!0;break}if(tl(),this._possiblyStaleDeps.clear(),!ft)return this._lastValue}const ve=new Set;this._cacheOfDendencyValues.clear();const De=ft=>{ve.add(ft),this._addDependency(ft)};jh(De),Gi.push(this._scope);try{ee=this._fn()}catch(ft){console.error(ft)}finally{Gi.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}xw(De);for(const ft of this._dependencies)ve.has(ft)||this._removeDependency(ft);this._dependencies=ve,Wl();for(const ft of ve)this._cacheOfDendencyValues.set(ft,ft.getValue());return tl(),ee}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const ee of this._dependents)ee(this._prismInstance)}}_addDependency(ee){this._dependencies.has(ee)||(this._dependencies.add(ee),ee._addDependent(this._reactToDependencyGoingStale))}_removeDependency(ee){this._dependencies.has(ee)&&(this._dependencies.delete(ee),ee._removeDependent(this._reactToDependencyGoingStale))}},Sm={},Sw=class{constructor(ee){this._fn=ee,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(ee,ve,De=!1){const ft=()=>{ee.onThisOrNextTick(dr)};let Rn=Sm;const dr=()=>{const Ss=this.getValue();Ss!==Rn&&(Rn=Ss,ve(Ss))};return this._addDependent(ft),De&&(Rn=this.getValue(),ve(Rn)),()=>{this._removeDependent(ft),ee.offThisOrNextTick(dr),ee.offNextTick(dr)}}onStale(ee){const ve=()=>{this._removeDependent(De)},De=()=>ee();return this._addDependent(De),ve}keepHot(){return this.onStale(()=>{})}_addDependent(ee){this._state.hot||this._goHot(),this._state.handle.addDependent(ee)}_goHot(){const ee=new g0(this._fn,this);this._state={hot:!0,handle:ee}}_removeDependent(ee){const ve=this._state;if(!ve.hot)return;const De=ve.handle;De.removeDependent(ee),De.hasDependents||(this._state={hot:!1,handle:void 0},De.destroy())}getValue(){ww(this);const ee=this._state;let ve;return ee.hot?ve=ee.handle.getValue():ve=ud(this._fn),xm(this),ve}},zh=class{constructor(ee){this._hotHandle=ee,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(ee,ve){let De=this._refs.get(ee);if(De!==void 0)return De;{const ft={current:ve};return this._refs.set(ee,ft),ft}}effect(ee,ve,De){let ft=this.effects.get(ee);ft===void 0&&(ft={cleanup:v0,deps:void 0},this.effects.set(ee,ft)),Pm(ft.deps,De)&&(ft.cleanup(),Wl(),ft.cleanup=Hh(ve,v0).value,tl(),ft.deps=De)}memo(ee,ve,De){let ft=this.memos.get(ee);return ft===void 0&&(ft={cachedValue:null,deps:void 0},this.memos.set(ee,ft)),Pm(ft.deps,De)&&(Wl(),ft.cachedValue=Hh(ve,void 0).value,tl(),ft.deps=De),ft.cachedValue}state(ee,ve){const{value:De,setValue:ft}=this.memo("state/"+ee,()=>{const Rn={current:ve};return{value:Rn,setValue:to=>{Rn.current=to,this._hotHandle.forceStale()}}},[]);return[De.current,ft]}sub(ee){return this.subs[ee]||(this.subs[ee]=new zh(this._hotHandle)),this.subs[ee]}cleanupEffects(){for(const ee of this.effects.values())Hh(ee.cleanup,void 0);this.effects.clear()}source(ee,ve){const De="$$source/blah";return this.effect(De,()=>ee(()=>{this._hotHandle.forceStale()}),[ee]),ve()}};function Em(ee){for(const ve of Object.values(ee.subs))Em(ve);ee.cleanupEffects()}function Hh(ee,ve){try{return{value:ee(),ok:!0}}catch(De){return setTimeout(function(){throw De}),{value:ve,ok:!1}}}var Gi=new Hi;function Ew(ee,ve){const De=Gi.peek();if(!De)throw new Error("prism.ref() is called outside of a prism() call.");return De.ref(ee,ve)}function Cm(ee,ve,De){const ft=Gi.peek();if(!ft)throw new Error("prism.effect() is called outside of a prism() call.");return ft.effect(ee,ve,De)}function Pm(ee,ve){if(ee===void 0||ve===void 0)return!0;const De=ee.length;if(De!==ve.length)return!0;for(let ft=0;ft<De;ft++)if(ee[ft]!==ve[ft])return!0;return!1}function km(ee,ve,De){const ft=Gi.peek();if(!ft)throw new Error("prism.memo() is called outside of a prism() call.");return ft.memo(ee,ve,De)}function $i(ee,ve){const De=Gi.peek();if(!De)throw new Error("prism.state() is called outside of a prism() call.");return De.state(ee,ve)}function Gh(){if(!Gi.peek())throw new Error("The parent function is called outside of a prism() call.")}function Cw(ee,ve){const De=Gi.peek();if(!De)throw new Error("prism.scope() is called outside of a prism() call.");const ft=De.sub(ee);Gi.push(ft);const Rn=Hh(ve,void 0).value;return Gi.pop(),Rn}function $h(ee,ve,De){return km(ee,()=>ai(ve),De).getValue()}function Wh(){return!!Gi.peek()}function Pw(ee,ve){const De=Gi.peek();if(!De)throw new Error("prism.source() is called outside of a prism() call.");return De.source(ee,ve)}var ai=ee=>new Sw(ee),nl=class{effect(ee,ve,De){console.warn("prism.effect() does not run in cold prisms")}memo(ee,ve,De){return ve()}state(ee,ve){return[ve,()=>{}]}ref(ee,ve){return{current:ve}}sub(ee){return new nl}source(ee,ve){return ve()}};function ud(ee){const ve=new nl;Gi.push(ve);let De;try{De=ee()}catch(ft){console.error(ft)}finally{Gi.pop()!==ve&&console.warn("The Prism hook stack has slipped. This is a bug.")}return De}ai.ref=Ew,ai.effect=Cm,ai.memo=km,ai.ensurePrism=Gh,ai.state=$i,ai.scope=Cw,ai.sub=$h,ai.inPrism=Wh,ai.source=Pw;var Xu=ai,Tm;(function(ee){ee[ee.Dict=0]="Dict",ee[ee.Array=1]="Array",ee[ee.Other=2]="Other"})(Tm||(Tm={}));var xr=ee=>Array.isArray(ee)?1:p0(ee)?0:2,Mm=(ee,ve,De=xr(ee))=>De===0&&typeof ve=="string"||De===1&&kw(ve)?ee[ve]:void 0,kw=ee=>{const ve=typeof ee=="number"?ee:parseInt(ee,10);return!isNaN(ve)&&ve>=0&&ve<1/0&&(ve|0)===ve},Kh=class{constructor(ee,ve){this._parent=ee,this._path=ve,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(ee){this.identityChangeListeners.add(ee)}removeIdentityChangeListener(ee){this.identityChangeListeners.delete(ee),this._checkForGC()}removeChild(ee){this.children.delete(ee),this._checkForGC()}getChild(ee){return this.children.get(ee)}getOrCreateChild(ee){let ve=this.children.get(ee);return ve||(ve=ve=new Kh(this,this._path.concat([ee])),this.children.set(ee,ve)),ve}_checkForGC(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(_m(this._path))}},Am=class{constructor(ee){this.$$isPointerToPrismProvider=!0,this.pointer=Gl({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(ve,De)=>{const{path:ft}=sd(ve),Rn=this._getOrCreateScopeForPath(ft);return Rn.identityChangeListeners.add(De),()=>{Rn.identityChangeListeners.delete(De)}},this._currentState=ee,this._rootScope=new Kh(void 0,[])}set(ee){const ve=this._currentState;this._currentState=ee,this._checkUpdates(this._rootScope,ve,ee)}get(){return this._currentState}getByPointer(ee){const ve=el(ee)?ee:ee(this.pointer),De=sd(ve).path;return this._getIn(De)}_getIn(ee){return ee.length===0?this.get():a0(this.get(),ee)}reduce(ee){this.set(ee(this.get()))}reduceByPointer(ee,ve){const De=el(ee)?ee:ee(this.pointer),ft=sd(De).path,Rn=wm(this.get(),ft,ve);this.set(Rn)}setByPointer(ee,ve){this.reduceByPointer(ee,()=>ve)}_checkUpdates(ee,ve,De){if(ve===De)return;for(const dr of ee.identityChangeListeners)dr(De);if(ee.children.size===0)return;const ft=xr(ve),Rn=xr(De);if(!(ft===2&&ft===Rn))for(const[dr,to]of ee.children){const Ss=Mm(ve,dr,ft),_0=Mm(De,dr,Rn);this._checkUpdates(to,Ss,_0)}}_getOrCreateScopeForPath(ee){let ve=this._rootScope;for(const De of ee)ve=ve.getOrCreateChild(De);return ve}pointerToPrism(ee){const{path:ve}=sd(ee),De=Rn=>this._onPointerValueChange(ee,Rn),ft=()=>this._getIn(ve);return Xu(()=>Xu.source(De,ft))}},y0=new WeakMap;function Tw(ee){return typeof ee=="object"&&ee!==null&&ee.$$isPointerToPrismProvider===!0}var Yu=ee=>{const ve=Qs(ee);let De=y0.get(ve);if(!De){const ft=ve.root;if(!Tw(ft))throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");De=ft.pointerToPrism(ee),y0.set(ve,De)}return De},qh=ee=>el(ee)?Yu(ee).getValue():ld(ee)?ee.getValue():ee;function*Mw(ee){let ve;if(el(ee))ve=Yu(ee);else if(ld(ee))ve=ee;else throw new Error("Only pointers and prisms are supported");let De=0;const ft=ve.onStale(()=>{De++});try{for(;;){const Rn=De;De=0,yield{value:ve.getValue(),ticks:Rn}}}finally{ft()}}var b0=60*3,cd=class{constructor(ee){this._conf=ee,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(ee){this._scheduledForThisOrNextTick.add(ee),this._dormant&&this._goActive()}onNextTick(ee){this._scheduledForNextTick.add(ee),this._dormant&&this._goActive()}offThisOrNextTick(ee){this._scheduledForThisOrNextTick.delete(ee)}offNextTick(ee){this._scheduledForNextTick.delete(ee)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var ee,ve;this._dormant&&(this._dormant=!1,(ve=(ee=this._conf)==null?void 0:ee.onActive)==null||ve.call(ee))}_goDormant(){var ee,ve;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,(ve=(ee=this._conf)==null?void 0:ee.onDormant)==null||ve.call(ee))}tick(ee=performance.now()){if(this.__ticks++,!this._dormant&&this._scheduledForNextTick.size===0&&this._scheduledForThisOrNextTick.size===0&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=b0)){this._goDormant();return}this._ticking=!0,this._timeAtCurrentTick=ee;for(const ve of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(ve);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(ee){const ve=this.time;if(ee>10&&console.warn("_tick() recursing for 10 times"),ee>100)throw new Error("Maximum recursion limit for _tick()");const De=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const ft of De)ft(ve);if(this._scheduledForThisOrNextTick.size>0)return this._tick(ee+1)}};function*Im(ee){let ve;if(el(ee))ve=Yu(ee);else if(ld(ee))ve=ee;else throw new Error("Only pointers and prisms are supported");const De=new cd,ft=ve.onChange(De,Rn=>{});try{for(;;)De.tick(),yield ve.getValue()}finally{ft()}}var Aw=class{constructor(ee){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new Am(ee),this.pointer=Gl({root:this,path:[]})}setPointer(ee){this._currentPointerBox.set(ee)}pointerToPrism(ee){const{path:ve}=Qs(ee);return Xu(()=>{const De=this._currentPointerBox.prism.getValue(),ft=ve.reduce((Rn,dr)=>Rn[dr],De);return qh(ft)})}}})(Mt);T3.exports;(function(t,e){var n=Object.create,r=Object.freeze,o=Object.defineProperty,u=Object.defineProperties,h=Object.getOwnPropertyDescriptor,m=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertyNames,x=Object.getOwnPropertySymbols,M=Object.getPrototypeOf,R=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,H=(i,s)=>{if(s=Symbol[i])return s;throw Error("Symbol."+i+" is not defined")},Q=(i,s,a)=>s in i?o(i,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[s]=a,j=(i,s)=>{for(var a in s||(s={}))R.call(s,a)&&Q(i,a,s[a]);if(x)for(var a of x(s))N.call(s,a)&&Q(i,a,s[a]);return i},z=(i,s)=>u(i,m(s)),U=(i,s)=>{var a={};for(var c in i)R.call(i,c)&&s.indexOf(c)<0&&(a[c]=i[c]);if(i!=null&&x)for(var c of x(i))s.indexOf(c)<0&&N.call(i,c)&&(a[c]=i[c]);return a},C=(i,s)=>()=>(i&&(s=i(i=0)),s),K=(i,s)=>()=>(s||i((s={exports:{}}).exports,s),s.exports),te=(i,s)=>{for(var a in s)o(i,a,{get:s[a],enumerable:!0})},pe=(i,s,a,c)=>{if(s&&typeof s=="object"||typeof s=="function")for(let p of _(s))!R.call(i,p)&&p!==a&&o(i,p,{get:()=>s[p],enumerable:!(c=h(s,p))||c.enumerable});return i},Z=(i,s,a)=>(a=i!=null?n(M(i)):{},pe(s||!i||!i.__esModule?o(a,"default",{value:i,enumerable:!0}):a,i)),be=i=>pe(o({},"__esModule",{value:!0}),i),Pe=(i,s,a)=>(Q(i,typeof s!="symbol"?s+"":s,a),a),G=(i,s)=>r(o(i,"raw",{value:r(s||i.slice())})),ye=(i,s,a)=>new Promise((c,p)=>{var f=w=>{try{y(a.next(w))}catch(S){p(S)}},g=w=>{try{y(a.throw(w))}catch(S){p(S)}},y=w=>w.done?c(w.value):Promise.resolve(w.value).then(f,g);y((a=a.apply(i,s)).next())}),St=function(i,s){this[0]=i,this[1]=s},kt=i=>{var s=i[H("asyncIterator")],a=!1,c,p={};return s==null?(s=i[H("iterator")](),c=f=>p[f]=g=>s[f](g)):(s=s.call(i),c=f=>p[f]=g=>{if(a){if(a=!1,f==="throw")throw g;return g}return a=!0,{done:!1,value:new St(new Promise(y=>{var w=s[f](g);if(!(w instanceof Object))throw TypeError("Object expected");y(w)}),1)}}),p[H("iterator")]=()=>p,c("next"),"throw"in s?c("throw"):p.throw=f=>{throw f},"return"in s&&c("return"),p};function it(i){lt=i}function me(){return lt}var lt,Fe=C(()=>{});function vt(i,s,a=[]){if(typeof i=="object"&&i){if(Ge(i)||mt(i)){s(i,a);return}for(let[c,p]of Object.entries(i))vt(p,s,[...a,c])}else{if(i==null)return;s(i,a)}}var Ge,mt,Je=C(()=>{Ge=i=>typeof i=="object"&&i!==null&&Object.hasOwnProperty.call(i,"type")&&i.type==="image"&&Object.hasOwnProperty.call(i,"id")&&typeof i.id=="string"&&i.id!=="",mt=i=>typeof i=="object"&&i!==null&&Object.hasOwnProperty.call(i,"r")&&Object.hasOwnProperty.call(i,"g")&&Object.hasOwnProperty.call(i,"b")&&Object.hasOwnProperty.call(i,"a")&&typeof i.r=="number"&&typeof i.g=="number"&&typeof i.b=="number"&&typeof i.a=="number"});function Be(i){return s=>typeof s=="object"&&!!s&&s.type===i}var nt,$t,Ut,Dt,en,on,wn,Wn=C(()=>{nt=Be("Theatre_Project"),$t=Be("Theatre_Sheet"),Ut=Be("Theatre_SheetTemplate"),Dt=Be("Theatre_SheetObject"),en=Be("Theatre_SheetObjectTemplate"),on=Be("Theatre_Sheet_PublicAPI"),wn=Be("Theatre_SheetObject_PublicAPI")}),qr,xn,et=C(()=>{qr=typeof ki=="object"&&ki&&ki.Object===Object&&ki,xn=qr}),Qr,Pn,Sn,gn=C(()=>{et(),Qr=typeof self=="object"&&self&&self.Object===Object&&self,Pn=xn||Qr||Function("return this")(),Sn=Pn}),Ir,kn,Nn=C(()=>{gn(),Ir=Sn.Symbol,kn=Ir});function cr(i){var s=Dr.call(i,ce),a=i[ce];try{i[ce]=void 0;var c=!0}catch{}var p=Ee.call(i);return c&&(s?i[ce]=a:delete i[ce]),p}var si,Dr,Ee,ce,ut,Vt=C(()=>{Nn(),si=Object.prototype,Dr=si.hasOwnProperty,Ee=si.toString,ce=kn?kn.toStringTag:void 0,ut=cr});function Ot(i){return mn.call(i)}var Bt,mn,Ht,pt=C(()=>{Bt=Object.prototype,mn=Bt.toString,Ht=Ot});function En(i){return i==null?i===void 0?yn:tn:rn&&rn in Object(i)?ut(i):Ht(i)}var tn,yn,rn,Jt,Bn=C(()=>{Nn(),Vt(),pt(),tn="[object Null]",yn="[object Undefined]",rn=kn?kn.toStringTag:void 0,Jt=En});function pr(i){return i!=null&&typeof i=="object"}var Le,Gt=C(()=>{Le=pr});function ht(i){return typeof i=="symbol"||Le(i)&&Jt(i)==jt}var jt,qt,Qn=C(()=>{Bn(),Gt(),jt="[object Symbol]",qt=ht});function Lr(i,s){for(var a=-1,c=i==null?0:i.length,p=Array(c);++a<c;)p[a]=s(i[a],a,i);return p}var Mr,es=C(()=>{Mr=Lr}),rr,zr,Ar=C(()=>{rr=Array.isArray,zr=rr});function Yc(i){if(typeof i=="string")return i;if(zr(i))return Mr(i,Yc)+"";if(qt(i))return Wa?Wa.call(i):"";var s=i+"";return s=="0"&&1/i==-Zc?"-0":s}var Zc,Qc,Wa,Jc,$u=C(()=>{Nn(),es(),Ar(),Qn(),Zc=1/0,Qc=kn?kn.prototype:void 0,Wa=Qc?Qc.toString:void 0,Jc=Yc});function ba(i){for(var s=i.length;s--&&ed.test(i.charAt(s)););return s}var ed,Lh,dm=C(()=>{ed=/\s/,Lh=ba});function we(i){return i&&i.slice(0,Lh(i)+1).replace(tt,"")}var tt,yt,We=C(()=>{dm(),tt=/^\s+/,yt=we});function _t(i){var s=typeof i;return i!=null&&(s=="object"||s=="function")}var Xt,pn=C(()=>{Xt=_t});function Ln(i){if(typeof i=="number")return i;if(qt(i))return Tn;if(Xt(i)){var s=typeof i.valueOf=="function"?i.valueOf():i;i=Xt(s)?s+"":s}if(typeof i!="string")return i===0?i:+i;i=yt(i);var a=Mn.test(i);return a||jn.test(i)?Nr(i.slice(2),a?2:8):Kn.test(i)?Tn:+i}var Tn,Kn,Mn,jn,Nr,lr,Xr=C(()=>{We(),pn(),Qn(),Tn=0/0,Kn=/^[-+]0x[0-9a-f]+$/i,Mn=/^0b[01]+$/i,jn=/^0o[0-7]+$/i,Nr=parseInt,lr=Ln});function xs(i){if(!i)return i===0?i:0;if(i=lr(i),i===Hr||i===-Hr){var s=i<0?-1:1;return s*Yn}return i===i?i:0}var Hr,Yn,Ka,wr=C(()=>{Xr(),Hr=1/0,Yn=17976931348623157e292,Ka=xs});function Ys(i){var s=Ka(i),a=s%1;return s===s?a?s-a:s:0}var qa,Zs=C(()=>{wr(),qa=Ys});function Xa(i){return i}var Yr,ts=C(()=>{Yr=Xa});function Ya(i){if(!Xt(i))return!1;var s=Jt(i);return s==Wu||s==Nh||s==eo||s==td}var eo,Wu,Nh,td,hm,zl=C(()=>{Bn(),pn(),eo="[object AsyncFunction]",Wu="[object Function]",Nh="[object GeneratorFunction]",td="[object Proxy]",hm=Ya}),pm,Fh,fm=C(()=>{gn(),pm=Sn["__core-js_shared__"],Fh=pm});function cw(i){return!!Za&&Za in i}var Za,nd,dw=C(()=>{fm(),Za=function(){var i=/[^.]+$/.exec(Fh&&Fh.keys&&Fh.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}(),nd=cw});function rd(i){if(i!=null){try{return t0.call(i)}catch{}try{return i+""}catch{}}return""}var e0,t0,Qa,n0=C(()=>{e0=Function.prototype,t0=e0.toString,Qa=rd});function hw(i){if(!Xt(i)||nd(i))return!1;var s=hm(i)?o0:mm;return s.test(Qa(i))}var id,mm,vm,gm,r0,i0,o0,s0,pw=C(()=>{zl(),dw(),pn(),n0(),id=/[\\^$.*+?()[\]{}|]/g,mm=/^\[object .+?Constructor\]$/,vm=Function.prototype,gm=Object.prototype,r0=vm.toString,i0=gm.hasOwnProperty,o0=RegExp("^"+r0.call(i0).replace(id,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),s0=hw});function Ku(i,s){return i==null?void 0:i[s]}var od,fw=C(()=>{od=Ku});function ym(i,s){var a=od(i,s);return s0(a)?a:void 0}var Ja,Hl=C(()=>{pw(),fw(),Ja=ym}),a0,Bh,mw=C(()=>{Hl(),gn(),a0=Ja(Sn,"WeakMap"),Bh=a0});function vw(i,s,a){switch(a.length){case 0:return i.call(s);case 1:return i.call(s,a[0]);case 2:return i.call(s,a[0],a[1]);case 3:return i.call(s,a[0],a[1],a[2])}return i.apply(s,a)}var l0,gw=C(()=>{l0=vw});function yw(){}var u0,c0=C(()=>{u0=yw});function d0(i,s){var a=-1,c=i.length;for(s||(s=Array(c));++a<c;)s[a]=i[a];return s}var bm,h0=C(()=>{bm=d0});function p0(i){var s=0,a=0;return function(){var c=Uh(),p=_m-(c-a);if(a=c,p>0){if(++s>=f0)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}var f0,_m,Uh,qu,m0=C(()=>{f0=800,_m=16,Uh=Date.now,qu=p0});function bw(i){return function(){return i}}var Qs,sd=C(()=>{Qs=bw}),ad,Gl,el=C(()=>{Hl(),ad=function(){try{var i=Ja(Object,"defineProperty");return i({},"",{}),i}catch{}}(),Gl=ad}),wm,$l,Hi=C(()=>{sd(),el(),ts(),wm=Gl?function(i,s){return Gl(i,"toString",{configurable:!0,enumerable:!1,value:Qs(s),writable:!0})}:Yr,$l=wm}),ld,Vh,_w=C(()=>{Hi(),m0(),ld=qu($l),Vh=ld});function Wl(i,s,a,c){for(var p=i.length,f=a+(c?1:-1);c?f--:++f<p;)if(s(i[f],f,i))return f;return-1}var tl,xm=C(()=>{tl=Wl});function ww(i){return i!==i}var jh,xw=C(()=>{jh=ww});function v0(i,s,a){for(var c=a-1,p=i.length;++c<p;)if(i[c]===s)return c;return-1}var g0,Sm=C(()=>{g0=v0});function Sw(i,s,a){return s===s?g0(i,s,a):tl(i,jh,a)}var zh,Em=C(()=>{xm(),xw(),Sm(),zh=Sw});function Hh(i,s){var a=i==null?0:i.length;return!!a&&zh(i,s,0)>-1}var Gi,Ew=C(()=>{Em(),Gi=Hh});function Cm(i,s){var a=typeof i;return s=s??Pm,!!s&&(a=="number"||a!="symbol"&&km.test(i))&&i>-1&&i%1==0&&i<s}var Pm,km,$i,Gh=C(()=>{Pm=9007199254740991,km=/^(?:0|[1-9]\d*)$/,$i=Cm});function Cw(i,s,a){s=="__proto__"&&Gl?Gl(i,s,{configurable:!0,enumerable:!0,value:a,writable:!0}):i[s]=a}var $h,Wh=C(()=>{el(),$h=Cw});function Pw(i,s){return i===s||i!==i&&s!==s}var ai,nl=C(()=>{ai=Pw});function ud(i,s,a){var c=i[s];(!(Tm.call(i,s)&&ai(c,a))||a===void 0&&!(s in i))&&$h(i,s,a)}var Xu,Tm,xr,Mm=C(()=>{Wh(),nl(),Xu=Object.prototype,Tm=Xu.hasOwnProperty,xr=ud});function kw(i,s,a){return s=Kh(s===void 0?i.length-1:s,0),function(){for(var c=arguments,p=-1,f=Kh(c.length-s,0),g=Array(f);++p<f;)g[p]=c[s+p];p=-1;for(var y=Array(s+1);++p<s;)y[p]=c[p];return y[s]=a(g),l0(i,this,y)}}var Kh,Am,y0=C(()=>{gw(),Kh=Math.max,Am=kw});function Tw(i,s){return Vh(Am(i,s,Yr),i+"")}var Yu,qh=C(()=>{ts(),y0(),_w(),Yu=Tw});function Mw(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=b0}var b0,cd,Im=C(()=>{b0=9007199254740991,cd=Mw});function Aw(i){return i!=null&&cd(i.length)&&!hm(i)}var ee,ve=C(()=>{zl(),Im(),ee=Aw});function De(i,s,a){if(!Xt(a))return!1;var c=typeof s;return(c=="number"?ee(a)&&$i(s,a.length):c=="string"&&s in a)?ai(a[s],i):!1}var ft,Rn=C(()=>{nl(),ve(),Gh(),pn(),ft=De});function dr(i){var s=i&&i.constructor,a=typeof s=="function"&&s.prototype||to;return i===a}var to,Ss,_0=C(()=>{to=Object.prototype,Ss=dr});function Zu(i,s){for(var a=-1,c=Array(i);++a<i;)c[a]=s(a);return c}var Qu,qP=C(()=>{Qu=Zu});function FL(i){return Le(i)&&Jt(i)==XP}var XP,Iw,BL=C(()=>{Bn(),Gt(),XP="[object Arguments]",Iw=FL}),Rw,YP,ZP,Rm,w0,Ow=C(()=>{BL(),Gt(),Rw=Object.prototype,YP=Rw.hasOwnProperty,ZP=Rw.propertyIsEnumerable,Rm=Iw(function(){return arguments}())?Iw:function(i){return Le(i)&&YP.call(i,"callee")&&!ZP.call(i,"callee")},w0=Rm});function Dw(){return!1}var QP,JP=C(()=>{QP=Dw}),Lw,Nw,x0,Fw,ek,tk,S0,Bw=C(()=>{gn(),JP(),Lw=e&&!e.nodeType&&e,Nw=Lw&&!0&&t&&!t.nodeType&&t,x0=Nw&&Nw.exports===Lw,Fw=x0?Sn.Buffer:void 0,ek=Fw?Fw.isBuffer:void 0,tk=ek||QP,S0=tk});function nk(i){return Le(i)&&cd(i.length)&&!!Gr[Jt(i)]}var rk,ik,ok,Uw,sk,ak,Vw,jw,lk,zw,uk,ck,Om,dk,hk,pk,fk,mk,vk,gk,yk,bk,_k,wk,Gr,xk,UL=C(()=>{Bn(),Im(),Gt(),rk="[object Arguments]",ik="[object Array]",ok="[object Boolean]",Uw="[object Date]",sk="[object Error]",ak="[object Function]",Vw="[object Map]",jw="[object Number]",lk="[object Object]",zw="[object RegExp]",uk="[object Set]",ck="[object String]",Om="[object WeakMap]",dk="[object ArrayBuffer]",hk="[object DataView]",pk="[object Float32Array]",fk="[object Float64Array]",mk="[object Int8Array]",vk="[object Int16Array]",gk="[object Int32Array]",yk="[object Uint8Array]",bk="[object Uint8ClampedArray]",_k="[object Uint16Array]",wk="[object Uint32Array]",Gr={},Gr[pk]=Gr[fk]=Gr[mk]=Gr[vk]=Gr[gk]=Gr[yk]=Gr[bk]=Gr[_k]=Gr[wk]=!0,Gr[rk]=Gr[ik]=Gr[dk]=Gr[ok]=Gr[hk]=Gr[Uw]=Gr[sk]=Gr[ak]=Gr[Vw]=Gr[jw]=Gr[lk]=Gr[zw]=Gr[uk]=Gr[ck]=Gr[Om]=!1,xk=nk});function VL(i){return function(s){return i(s)}}var E0,Hw=C(()=>{E0=VL}),Gw,Xh,Sk,C0,Ek,$w,jL=C(()=>{et(),Gw=e&&!e.nodeType&&e,Xh=Gw&&!0&&t&&!t.nodeType&&t,Sk=Xh&&Xh.exports===Gw,C0=Sk&&xn.process,Ek=function(){try{var i=Xh&&Xh.require&&Xh.require("util").types;return i||C0&&C0.binding&&C0.binding("util")}catch{}}(),$w=Ek}),Fr,Ck,Ww,Pk=C(()=>{UL(),Hw(),jL(),Fr=$w&&$w.isTypedArray,Ck=Fr?E0(Fr):xk,Ww=Ck});function Kw(i,s){var a=zr(i),c=!a&&w0(i),p=!a&&!c&&S0(i),f=!a&&!c&&!p&&Ww(i),g=a||c||p||f,y=g?Qu(i.length,String):[],w=y.length;for(var S in i)(s||Yh.call(i,S))&&!(g&&(S=="length"||p&&(S=="offset"||S=="parent")||f&&(S=="buffer"||S=="byteLength"||S=="byteOffset")||$i(S,w)))&&y.push(S);return y}var qw,Yh,kk,Xw=C(()=>{qP(),Ow(),Ar(),Bw(),Gh(),Pk(),qw=Object.prototype,Yh=qw.hasOwnProperty,kk=Kw});function zL(i,s){return function(a){return i(s(a))}}var Ju,Yw=C(()=>{Ju=zL}),Tk,Zw,HL=C(()=>{Yw(),Tk=Ju(Object.keys,Object),Zw=Tk});function GL(i){if(!Ss(i))return Zw(i);var s=[];for(var a in Object(i))Qw.call(i,a)&&a!="constructor"&&s.push(a);return s}var Mk,Qw,Ak,Ik=C(()=>{_0(),HL(),Mk=Object.prototype,Qw=Mk.hasOwnProperty,Ak=GL});function $L(i){return ee(i)?kk(i):Ak(i)}var P0,Jw=C(()=>{Xw(),Ik(),ve(),P0=$L});function WL(i,s){if(zr(i))return!1;var a=typeof i;return a=="number"||a=="symbol"||a=="boolean"||i==null||qt(i)?!0:Ok.test(i)||!Rk.test(i)||s!=null&&i in Object(s)}var Rk,Ok,k0,dd=C(()=>{Ar(),Qn(),Rk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ok=/^\w*$/,k0=WL}),Dk,Zh,T0=C(()=>{Hl(),Dk=Ja(Object,"create"),Zh=Dk});function KL(){this.__data__=Zh?Zh(null):{},this.size=0}var Lk,qL=C(()=>{T0(),Lk=KL});function XL(i){var s=this.has(i)&&delete this.__data__[i];return this.size-=s?1:0,s}var M0,YL=C(()=>{M0=XL});function Nk(i){var s=this.__data__;if(Zh){var a=s[i];return a===Fk?void 0:a}return Bk.call(s,i)?s[i]:void 0}var Fk,A0,Bk,Uk,ZL=C(()=>{T0(),Fk="__lodash_hash_undefined__",A0=Object.prototype,Bk=A0.hasOwnProperty,Uk=Nk});function Vk(i){var s=this.__data__;return Zh?s[i]!==void 0:zk.call(s,i)}var jk,zk,Hk,QL=C(()=>{T0(),jk=Object.prototype,zk=jk.hasOwnProperty,Hk=Vk});function JL(i,s){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=Zh&&s===void 0?e1:s,this}var e1,Gk,eN=C(()=>{T0(),e1="__lodash_hash_undefined__",Gk=JL});function Qh(i){var s=-1,a=i==null?0:i.length;for(this.clear();++s<a;){var c=i[s];this.set(c[0],c[1])}}var t1,tN=C(()=>{qL(),YL(),ZL(),QL(),eN(),Qh.prototype.clear=Lk,Qh.prototype.delete=M0,Qh.prototype.get=Uk,Qh.prototype.has=Hk,Qh.prototype.set=Gk,t1=Qh});function nN(){this.__data__=[],this.size=0}var $k,rN=C(()=>{$k=nN});function iN(i,s){for(var a=i.length;a--;)if(ai(i[a][0],s))return a;return-1}var Dm,I0=C(()=>{nl(),Dm=iN});function n1(i){var s=this.__data__,a=Dm(s,i);if(a<0)return!1;var c=s.length-1;return a==c?s.pop():Kk.call(s,a,1),--this.size,!0}var Wk,Kk,r1,oN=C(()=>{I0(),Wk=Array.prototype,Kk=Wk.splice,r1=n1});function sN(i){var s=this.__data__,a=Dm(s,i);return a<0?void 0:s[a][1]}var qk,aN=C(()=>{I0(),qk=sN});function lN(i){return Dm(this.__data__,i)>-1}var Xk,i1=C(()=>{I0(),Xk=lN});function o1(i,s){var a=this.__data__,c=Dm(a,i);return c<0?(++this.size,a.push([i,s])):a[c][1]=s,this}var Yk,Zk=C(()=>{I0(),Yk=o1});function hd(i){var s=-1,a=i==null?0:i.length;for(this.clear();++s<a;){var c=i[s];this.set(c[0],c[1])}}var Jh,R0=C(()=>{rN(),oN(),aN(),i1(),Zk(),hd.prototype.clear=$k,hd.prototype.delete=r1,hd.prototype.get=qk,hd.prototype.has=Xk,hd.prototype.set=Yk,Jh=hd}),s1,pd,a1=C(()=>{Hl(),gn(),s1=Ja(Sn,"Map"),pd=s1});function uN(){this.size=0,this.__data__={hash:new t1,map:new(pd||Jh),string:new t1}}var Qk,cN=C(()=>{tN(),R0(),a1(),Qk=uN});function dN(i){var s=typeof i;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?i!=="__proto__":i===null}var Jk,hN=C(()=>{Jk=dN});function pN(i,s){var a=i.__data__;return Jk(s)?a[typeof s=="string"?"string":"hash"]:a.map}var Lm,O0=C(()=>{hN(),Lm=pN});function fN(i){var s=Lm(this,i).delete(i);return this.size-=s?1:0,s}var l1,mN=C(()=>{O0(),l1=fN});function vN(i){return Lm(this,i).get(i)}var eT,gN=C(()=>{O0(),eT=vN});function yN(i){return Lm(this,i).has(i)}var tT,bN=C(()=>{O0(),tT=yN});function _N(i,s){var a=Lm(this,i),c=a.size;return a.set(i,s),this.size+=a.size==c?0:1,this}var nT,wN=C(()=>{O0(),nT=_N});function ep(i){var s=-1,a=i==null?0:i.length;for(this.clear();++s<a;){var c=i[s];this.set(c[0],c[1])}}var rl,fd=C(()=>{cN(),mN(),gN(),bN(),wN(),ep.prototype.clear=Qk,ep.prototype.delete=l1,ep.prototype.get=eT,ep.prototype.has=tT,ep.prototype.set=nT,rl=ep});function u1(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new TypeError(rT);var a=function(){var c=arguments,p=s?s.apply(this,c):c[0],f=a.cache;if(f.has(p))return f.get(p);var g=i.apply(this,c);return a.cache=f.set(p,g)||f,g};return a.cache=new(u1.Cache||rl),a}var rT,c1,iT=C(()=>{fd(),rT="Expected a function",u1.Cache=rl,c1=u1});function oT(i){var s=c1(i,function(c){return a.size===d1&&a.clear(),c}),a=s.cache;return s}var d1,sT,aT=C(()=>{iT(),d1=500,sT=oT}),h1,lT,uT,cT,xN=C(()=>{aT(),h1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lT=/\\(\\)?/g,uT=sT(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(h1,function(a,c,p,f){s.push(p?f.replace(lT,"$1"):c||a)}),s}),cT=uT});function SN(i){return i==null?"":Jc(i)}var Nm,dT=C(()=>{$u(),Nm=SN});function EN(i,s){return zr(i)?i:k0(i,s)?[i]:cT(Nm(i))}var Fm,p1=C(()=>{Ar(),dd(),xN(),dT(),Fm=EN});function f1(i){if(typeof i=="string"||qt(i))return i;var s=i+"";return s=="0"&&1/i==-hT?"-0":s}var hT,tp,Bm=C(()=>{Qn(),hT=1/0,tp=f1});function CN(i,s){s=Fm(s,i);for(var a=0,c=s.length;i!=null&&a<c;)i=i[tp(s[a++])];return a&&a==c?i:void 0}var Um,m1=C(()=>{p1(),Bm(),Um=CN});function PN(i,s,a){var c=i==null?void 0:Um(i,s);return c===void 0?a:c}var md,np=C(()=>{m1(),md=PN});function kN(i,s){for(var a=-1,c=s.length,p=i.length;++a<c;)i[p+a]=s[a];return i}var Vm,pT=C(()=>{Vm=kN});function TN(i){return zr(i)||w0(i)||!!(v1&&i&&i[v1])}var v1,D0,MN=C(()=>{Nn(),Ow(),Ar(),v1=kn?kn.isConcatSpreadable:void 0,D0=TN});function L0(i,s,a,c,p){var f=-1,g=i.length;for(a||(a=D0),p||(p=[]);++f<g;){var y=i[f];s>0&&a(y)?s>1?L0(y,s-1,a,c,p):Vm(p,y):c||(p[p.length]=y)}return p}var fT,g1=C(()=>{pT(),MN(),fT=L0}),y1,mT,vT=C(()=>{Yw(),y1=Ju(Object.getPrototypeOf,Object),mT=y1});function gT(i){if(!Le(i)||Jt(i)!=b1)return!1;var s=mT(i);if(s===null)return!0;var a=bT.call(s,"constructor")&&s.constructor;return typeof a=="function"&&a instanceof a&&w1.call(a)==_T}var b1,_1,yT,w1,bT,_T,N0,ec=C(()=>{Bn(),vT(),Gt(),b1="[object Object]",_1=Function.prototype,yT=Object.prototype,w1=_1.toString,bT=yT.hasOwnProperty,_T=w1.call(Object),N0=gT});function jm(i){var s=Math[i];return function(a,c){if(a=lr(a),c=c==null?0:xT(qa(c),292),c&&wT(a)){var p=(Nm(a)+"e").split("e"),f=s(p[0]+"e"+(+p[1]+c));return p=(Nm(f)+"e").split("e"),+(p[0]+"e"+(+p[1]-c))}return s(a)}}var wT,xT,ST,AN=C(()=>{gn(),Zs(),Xr(),dT(),wT=Sn.isFinite,xT=Math.min,ST=jm});function IN(i,s,a){return i===i&&(a!==void 0&&(i=i<=a?i:a),s!==void 0&&(i=i>=s?i:s)),i}var zm,RN=C(()=>{zm=IN});function x1(i,s,a){return a===void 0&&(a=s,s=void 0),a!==void 0&&(a=lr(a),a=a===a?a:0),s!==void 0&&(s=lr(s),s=s===s?s:0),zm(lr(i),s,a)}var li,F0=C(()=>{RN(),Xr(),li=x1});function ON(){this.__data__=new Jh,this.size=0}var ET,DN=C(()=>{R0(),ET=ON});function CT(i){var s=this.__data__,a=s.delete(i);return this.size=s.size,a}var S1,LN=C(()=>{S1=CT});function NN(i){return this.__data__.get(i)}var PT,FN=C(()=>{PT=NN});function BN(i){return this.__data__.has(i)}var kT,UN=C(()=>{kT=BN});function VN(i,s){var a=this.__data__;if(a instanceof Jh){var c=a.__data__;if(!pd||c.length<TT-1)return c.push([i,s]),this.size=++a.size,this;a=this.__data__=new rl(c)}return a.set(i,s),this.size=a.size,this}var TT,MT,jN=C(()=>{R0(),a1(),fd(),TT=200,MT=VN});function rp(i){var s=this.__data__=new Jh(i);this.size=s.size}var Hm,AT=C(()=>{R0(),DN(),LN(),FN(),UN(),jN(),rp.prototype.clear=ET,rp.prototype.delete=S1,rp.prototype.get=PT,rp.prototype.has=kT,rp.prototype.set=MT,Hm=rp});function zN(i,s){for(var a=-1,c=i==null?0:i.length,p=0,f=[];++a<c;){var g=i[a];s(g,a,i)&&(f[p++]=g)}return f}var IT,HN=C(()=>{IT=zN});function GN(){return[]}var RT,$N=C(()=>{RT=GN}),OT,DT,E1,LT,NT,WN=C(()=>{HN(),$N(),OT=Object.prototype,DT=OT.propertyIsEnumerable,E1=Object.getOwnPropertySymbols,LT=E1?function(i){return i==null?[]:(i=Object(i),IT(E1(i),function(s){return DT.call(i,s)}))}:RT,NT=LT});function KN(i,s,a){var c=s(i);return zr(i)?c:Vm(c,a(i))}var FT,qN=C(()=>{pT(),Ar(),FT=KN});function XN(i){return FT(i,P0,NT)}var B0,YN=C(()=>{qN(),WN(),Jw(),B0=XN}),BT,U0,ZN=C(()=>{Hl(),gn(),BT=Ja(Sn,"DataView"),U0=BT}),UT,Gm,QN=C(()=>{Hl(),gn(),UT=Ja(Sn,"Promise"),Gm=UT}),VT,vd,jT=C(()=>{Hl(),gn(),VT=Ja(Sn,"Set"),vd=VT}),C1,P1,k1,T1,M1,A1,I1,zT,HT,GT,R1,tc,O1,JN=C(()=>{ZN(),a1(),QN(),jT(),mw(),Bn(),n0(),C1="[object Map]",P1="[object Object]",k1="[object Promise]",T1="[object Set]",M1="[object WeakMap]",A1="[object DataView]",I1=Qa(U0),zT=Qa(pd),HT=Qa(Gm),GT=Qa(vd),R1=Qa(Bh),tc=Jt,(U0&&tc(new U0(new ArrayBuffer(1)))!=A1||pd&&tc(new pd)!=C1||Gm&&tc(Gm.resolve())!=k1||vd&&tc(new vd)!=T1||Bh&&tc(new Bh)!=M1)&&(tc=function(i){var s=Jt(i),a=s==P1?i.constructor:void 0,c=a?Qa(a):"";if(c)switch(c){case I1:return A1;case zT:return C1;case HT:return k1;case GT:return T1;case R1:return M1}return s}),O1=tc}),$T,D1,e5=C(()=>{gn(),$T=Sn.Uint8Array,D1=$T});function t5(i){return this.__data__.set(i,WT),this}var WT,KT,n5=C(()=>{WT="__lodash_hash_undefined__",KT=t5});function r5(i){return this.__data__.has(i)}var qT,i5=C(()=>{qT=r5});function V0(i){var s=-1,a=i==null?0:i.length;for(this.__data__=new rl;++s<a;)this.add(i[s])}var L1,XT=C(()=>{fd(),n5(),i5(),V0.prototype.add=V0.prototype.push=KT,V0.prototype.has=qT,L1=V0});function $r(i,s){for(var a=-1,c=i==null?0:i.length;++a<c;)if(s(i[a],a,i))return!0;return!1}var $m,o5=C(()=>{$m=$r});function s5(i,s){return i.has(s)}var N1,YT=C(()=>{N1=s5});function a5(i,s,a,c,p,f){var g=a&ZT,y=i.length,w=s.length;if(y!=w&&!(g&&w>y))return!1;var S=f.get(i),T=f.get(s);if(S&&T)return S==s&&T==i;var I=-1,A=!0,k=a&QT?new L1:void 0;for(f.set(i,s),f.set(s,i);++I<y;){var D=i[I],O=s[I];if(c)var F=g?c(O,D,I,s,i,f):c(D,O,I,i,s,f);if(F!==void 0){if(F)continue;A=!1;break}if(k){if(!$m(s,function(V,$){if(!N1(k,$)&&(D===V||p(D,V,a,c,f)))return k.push($)})){A=!1;break}}else if(!(D===O||p(D,O,a,c,f))){A=!1;break}}return f.delete(i),f.delete(s),A}var ZT,QT,F1,JT=C(()=>{XT(),o5(),YT(),ZT=1,QT=2,F1=a5});function l5(i){var s=-1,a=Array(i.size);return i.forEach(function(c,p){a[++s]=[p,c]}),a}var Wm,u5=C(()=>{Wm=l5});function c5(i){var s=-1,a=Array(i.size);return i.forEach(function(c){a[++s]=c}),a}var j0,B1=C(()=>{j0=c5});function d5(i,s,a,c,p,f,g){switch(a){case dM:if(i.byteLength!=s.byteLength||i.byteOffset!=s.byteOffset)return!1;i=i.buffer,s=s.buffer;case cM:return!(i.byteLength!=s.byteLength||!f(new D1(i),new D1(s)));case nM:case U1:case oM:return ai(+i,+s);case rM:return i.name==s.name&&i.message==s.message;case sM:case lM:return i==s+"";case iM:var y=Wm;case aM:var w=c&eM;if(y||(y=j0),i.size!=s.size&&!w)return!1;var S=g.get(i);if(S)return S==s;c|=tM,g.set(i,s);var T=F1(y(i),y(s),c,p,f,g);return g.delete(i),T;case uM:if(z0)return z0.call(i)==z0.call(s)}return!1}var eM,tM,nM,U1,rM,iM,oM,sM,aM,lM,uM,cM,dM,V1,z0,hM,h5=C(()=>{Nn(),e5(),nl(),JT(),u5(),B1(),eM=1,tM=2,nM="[object Boolean]",U1="[object Date]",rM="[object Error]",iM="[object Map]",oM="[object Number]",sM="[object RegExp]",aM="[object Set]",lM="[object String]",uM="[object Symbol]",cM="[object ArrayBuffer]",dM="[object DataView]",V1=kn?kn.prototype:void 0,z0=V1?V1.valueOf:void 0,hM=d5});function p5(i,s,a,c,p,f){var g=a&pM,y=B0(i),w=y.length,S=B0(s),T=S.length;if(w!=T&&!g)return!1;for(var I=w;I--;){var A=y[I];if(!(g?A in s:mM.call(s,A)))return!1}var k=f.get(i),D=f.get(s);if(k&&D)return k==s&&D==i;var O=!0;f.set(i,s),f.set(s,i);for(var F=g;++I<w;){A=y[I];var V=i[A],$=s[A];if(c)var X=g?c($,V,A,s,i,f):c(V,$,A,i,s,f);if(!(X===void 0?V===$||p(V,$,a,c,f):X)){O=!1;break}F||(F=A=="constructor")}if(O&&!F){var re=i.constructor,ne=s.constructor;re!=ne&&"constructor"in i&&"constructor"in s&&!(typeof re=="function"&&re instanceof re&&typeof ne=="function"&&ne instanceof ne)&&(O=!1)}return f.delete(i),f.delete(s),O}var pM,fM,mM,j1,z1=C(()=>{YN(),pM=1,fM=Object.prototype,mM=fM.hasOwnProperty,j1=p5});function f5(i,s,a,c,p,f){var g=zr(i),y=zr(s),w=g?G1:O1(i),S=y?G1:O1(s);w=w==H1?Km:w,S=S==H1?Km:S;var T=w==Km,I=S==Km,A=w==S;if(A&&S0(i)){if(!S0(s))return!1;g=!0,T=!1}if(A&&!T)return f||(f=new Hm),g||Ww(i)?F1(i,s,a,c,p,f):hM(i,s,w,a,c,p,f);if(!(a&vM)){var k=T&&$1.call(i,"__wrapped__"),D=I&&$1.call(s,"__wrapped__");if(k||D){var O=k?i.value():i,F=D?s.value():s;return f||(f=new Hm),p(O,F,a,c,f)}}return A?(f||(f=new Hm),j1(i,s,a,c,p,f)):!1}var vM,H1,G1,Km,gM,$1,yM,bM=C(()=>{AT(),JT(),h5(),z1(),JN(),Ar(),Bw(),Pk(),vM=1,H1="[object Arguments]",G1="[object Array]",Km="[object Object]",gM=Object.prototype,$1=gM.hasOwnProperty,yM=f5});function W1(i,s,a,c,p){return i===s?!0:i==null||s==null||!Le(i)&&!Le(s)?i!==i&&s!==s:yM(i,s,a,c,W1,p)}var ip,_M=C(()=>{bM(),Gt(),ip=W1});function wM(i,s,a,c){var p=a.length,f=p,g=!c;if(i==null)return!f;for(i=Object(i);p--;){var y=a[p];if(g&&y[2]?y[1]!==i[y[0]]:!(y[0]in i))return!1}for(;++p<f;){y=a[p];var w=y[0],S=i[w],T=y[1];if(g&&y[2]){if(S===void 0&&!(w in i))return!1}else{var I=new Hm;if(c)var A=c(S,T,w,i,s,I);if(!(A===void 0?ip(T,S,xM|SM,c,I):A))return!1}}return!0}var xM,SM,K1,EM=C(()=>{AT(),_M(),xM=1,SM=2,K1=wM});function m5(i){return i===i&&!Xt(i)}var q1,CM=C(()=>{pn(),q1=m5});function v5(i){for(var s=P0(i),a=s.length;a--;){var c=s[a],p=i[c];s[a]=[c,p,q1(p)]}return s}var PM,kM=C(()=>{CM(),Jw(),PM=v5});function g5(i,s){return function(a){return a==null?!1:a[i]===s&&(s!==void 0||i in Object(a))}}var X1,TM=C(()=>{X1=g5});function MM(i){var s=PM(i);return s.length==1&&s[0][2]?X1(s[0][0],s[0][1]):function(a){return a===i||K1(a,i,s)}}var AM,y5=C(()=>{EM(),kM(),TM(),AM=MM});function b5(i,s){return i!=null&&s in Object(i)}var IM,_5=C(()=>{IM=b5});function w5(i,s,a){s=Fm(s,i);for(var c=-1,p=s.length,f=!1;++c<p;){var g=tp(s[c]);if(!(f=i!=null&&a(i,g)))break;i=i[g]}return f||++c!=p?f:(p=i==null?0:i.length,!!p&&cd(p)&&$i(g,p)&&(zr(i)||w0(i)))}var RM,x5=C(()=>{p1(),Ow(),Ar(),Gh(),Im(),Bm(),RM=w5});function S5(i,s){return i!=null&&RM(i,s,IM)}var OM,E5=C(()=>{_5(),x5(),OM=S5});function C5(i,s){return k0(i)&&q1(s)?X1(tp(i),s):function(a){var c=md(a,i);return c===void 0&&c===s?OM(a,i):ip(s,c,DM|Y1)}}var DM,Y1,LM,P5=C(()=>{_M(),np(),E5(),dd(),CM(),TM(),Bm(),DM=1,Y1=2,LM=C5});function k5(i){return function(s){return s==null?void 0:s[i]}}var NM,T5=C(()=>{NM=k5});function M5(i){return function(s){return Um(s,i)}}var FM,A5=C(()=>{m1(),FM=M5});function I5(i){return k0(i)?NM(tp(i)):FM(i)}var BM,R5=C(()=>{T5(),A5(),dd(),Bm(),BM=I5});function O5(i){return typeof i=="function"?i:i==null?Yr:typeof i=="object"?zr(i)?LM(i[0],i[1]):AM(i):BM(i)}var op,gd=C(()=>{y5(),P5(),ts(),Ar(),R5(),op=O5});function D5(i,s,a,c){for(var p=-1,f=i==null?0:i.length;++p<f;){var g=i[p];s(c,g,a(g),i)}return c}var UM,L5=C(()=>{UM=D5});function N5(i){return function(s,a,c){for(var p=-1,f=Object(s),g=c(s),y=g.length;y--;){var w=g[i?y:++p];if(a(f[w],w,f)===!1)break}return s}}var VM,F5=C(()=>{VM=N5}),jM,zM,B5=C(()=>{F5(),jM=VM(),zM=jM});function U5(i,s){return i&&zM(i,s,P0)}var Z1,HM=C(()=>{B5(),Jw(),Z1=U5});function V5(i,s){return function(a,c){if(a==null)return a;if(!ee(a))return i(a,c);for(var p=a.length,f=s?p:-1,g=Object(a);(s?f--:++f<p)&&c(g[f],f,g)!==!1;);return a}}var GM,j5=C(()=>{ve(),GM=V5}),$M,Q1,WM=C(()=>{HM(),j5(),$M=GM(Z1),Q1=$M});function KM(i,s,a,c){return Q1(i,function(p,f,g){s(c,p,a(p),g)}),c}var qM,z5=C(()=>{WM(),qM=KM});function XM(i,s){return function(a,c){var p=zr(a)?UM:qM,f=s?s():{};return p(a,i,op(c,2),f)}}var YM,H5=C(()=>{L5(),z5(),gd(),Ar(),YM=XM}),ZM,H0,G5=C(()=>{gn(),ZM=function(){return Sn.Date.now()},H0=ZM});function $5(i,s,a){var c,p,f,g,y,w,S=0,T=!1,I=!1,A=!0;if(typeof i!="function")throw new TypeError(G0);s=lr(s)||0,Xt(a)&&(T=!!a.leading,I="maxWait"in a,f=I?$0(lr(a.maxWait)||0,s):f,A="trailing"in a?!!a.trailing:A);function k(ae){var Se=c,fe=p;return c=p=void 0,S=ae,g=i.apply(fe,Se),g}function D(ae){return S=ae,y=setTimeout(V,s),T?k(ae):g}function O(ae){var Se=ae-w,fe=ae-S,ge=s-Se;return I?QM(ge,f-fe):ge}function F(ae){var Se=ae-w,fe=ae-S;return w===void 0||Se>=s||Se<0||I&&fe>=f}function V(){var ae=H0();if(F(ae))return $(ae);y=setTimeout(V,O(ae))}function $(ae){return y=void 0,A&&c?k(ae):(c=p=void 0,g)}function X(){y!==void 0&&clearTimeout(y),S=0,c=w=p=y=void 0}function re(){return y===void 0?g:$(H0())}function ne(){var ae=H0(),Se=F(ae);if(c=arguments,p=this,w=ae,Se){if(y===void 0)return D(w);if(I)return clearTimeout(y),y=setTimeout(V,s),k(w)}return y===void 0&&(y=setTimeout(V,s)),g}return ne.cancel=X,ne.flush=re,ne}var G0,$0,QM,W0,J1=C(()=>{pn(),G5(),Xr(),G0="Expected a function",$0=Math.max,QM=Math.min,W0=$5});function JM(i,s,a){for(var c=-1,p=i==null?0:i.length;++c<p;)if(a(s,i[c]))return!0;return!1}var e2,t2=C(()=>{e2=JM});function n2(i){var s=i==null?0:i.length;return s?i[s-1]:void 0}var yd,K0=C(()=>{yd=n2});function W5(i,s,a){var c=i==null?0:i.length;if(!c)return-1;var p=a==null?0:qa(a);return p<0&&(p=ex(c+p,0)),tl(i,op(s,3),p)}var ex,tx,K5=C(()=>{xm(),gd(),Zs(),ex=Math.max,tx=W5});function q5(i,s,a){var c=i==null?0:i.length;if(!c)return-1;var p=c-1;return a!==void 0&&(p=qa(a),p=a<0?nx(c+p,0):r2(p,c-1)),tl(i,op(s,3),p,!0)}var nx,r2,i2,X5=C(()=>{xm(),gd(),Zs(),nx=Math.max,r2=Math.min,i2=q5});function Y5(i,s){var a=-1,c=ee(i)?Array(i.length):[];return Q1(i,function(p,f,g){c[++a]=s(p,f,g)}),c}var sp,Z5=C(()=>{WM(),ve(),sp=Y5});function o2(i,s,a){return i>=a2(s,a)&&i<s2(s,a)}var s2,a2,l2,q0=C(()=>{s2=Math.max,a2=Math.min,l2=o2});function rx(i,s,a){return s=Ka(s),a===void 0?(a=s,s=0):a=Ka(a),i=lr(i),l2(i,s,a)}var ix,Q5=C(()=>{q0(),wr(),Xr(),ix=rx});function Wr(i){return typeof i=="number"&&i==qa(i)}var ns,Es=C(()=>{Zs(),ns=Wr}),nc,Sr,Kl=C(()=>{Wh(),H5(),nc=YM(function(i,s,a){$h(i,a,s)}),Sr=nc});function u2(i,s){var a={};return s=op(s,3),Z1(i,function(c,p,f){$h(a,p,s(c,p,f))}),a}var bd,c2=C(()=>{Wh(),HM(),gd(),bd=u2});function J5(i,s,a,c){if(!Xt(i))return i;s=Fm(s,i);for(var p=-1,f=s.length,g=f-1,y=i;y!=null&&++p<f;){var w=tp(s[p]),S=a;if(w==="__proto__"||w==="constructor"||w==="prototype")return i;if(p!=g){var T=y[w];S=c?c(T,w,y):void 0,S===void 0&&(S=Xt(T)?T:$i(s[p+1])?[]:{})}xr(y,w,S),y=y[w]}return i}var d2,eF=C(()=>{Mm(),p1(),Gh(),pn(),Bm(),d2=J5});function h2(i,s){var a=i.length;for(i.sort(s);a--;)i[a]=i[a].value;return i}var ox,X0=C(()=>{ox=h2});function p2(i,s){if(i!==s){var a=i!==void 0,c=i===null,p=i===i,f=qt(i),g=s!==void 0,y=s===null,w=s===s,S=qt(s);if(!y&&!S&&!f&&i>s||f&&g&&w&&!y&&!S||c&&g&&w||!a&&w||!p)return 1;if(!c&&!f&&!S&&i<s||S&&a&&p&&!c&&!f||y&&a&&p||!g&&p||!w)return-1}return 0}var f2,m2=C(()=>{Qn(),f2=p2});function v2(i,s,a){for(var c=-1,p=i.criteria,f=s.criteria,g=p.length,y=a.length;++c<g;){var w=f2(p[c],f[c]);if(w){if(c>=y)return w;var S=a[c];return w*(S=="desc"?-1:1)}}return i.index-s.index}var sx,tF=C(()=>{m2(),sx=v2});function nF(i,s,a){s.length?s=Mr(s,function(f){return zr(f)?function(g){return Um(g,f.length===1?f[0]:f)}:f}):s=[Yr];var c=-1;s=Mr(s,E0(op));var p=sp(i,function(f,g,y){var w=Mr(s,function(S){return S(f)});return{criteria:w,index:++c,value:f}});return ox(p,function(f,g){return sx(f,g,a)})}var ax,rF=C(()=>{es(),m1(),gd(),Z5(),X0(),Hw(),tF(),ts(),Ar(),ax=nF});function iF(i,s,a,c){for(var p=a-1,f=i.length;++p<f;)if(c(i[p],s))return p;return-1}var ap,g2=C(()=>{ap=iF});function oF(i,s,a,c){var p=c?ap:zh,f=-1,g=s.length,y=i;for(i===s&&(s=bm(s)),a&&(y=Mr(i,E0(a)));++f<g;)for(var w=0,S=s[f],T=a?a(S):S;(w=p(y,T,w,c))>-1;)y!==i&&Wi.call(y,w,1),Wi.call(i,w,1);return i}var y2,Wi,ql,sF=C(()=>{es(),Em(),g2(),Hw(),h0(),y2=Array.prototype,Wi=y2.splice,ql=oF});function Y0(i,s){return i&&i.length&&s&&s.length?ql(i,s):i}var b2,aF=C(()=>{sF(),b2=Y0}),_2,w2,lx=C(()=>{qh(),aF(),_2=Yu(b2),w2=_2}),x2,qm,lp=C(()=>{AN(),x2=ST("round"),qm=x2});function lF(i,s,a){return i==null?i:d2(i,s,a)}var up,Z0=C(()=>{eF(),up=lF}),Q0,S2,J0=C(()=>{g1(),rF(),qh(),Rn(),Q0=Yu(function(i,s){if(i==null)return[];var a=s.length;return a>1&&ft(i,s[0],s[1])?s=[]:a>2&&ft(s[0],s[1],s[2])&&(s=[s[0]]),ax(i,fT(s,1),[])}),S2=Q0}),ux,cx,E2,uF=C(()=>{jT(),c0(),B1(),ux=1/0,cx=vd&&1/j0(new vd([,-0]))[1]==ux?function(i){return new vd(i)}:u0,E2=cx});function cF(i,s,a){var c=-1,p=Gi,f=i.length,g=!0,y=[],w=y;if(a)g=!1,p=e2;else if(f>=C2){var S=s?null:E2(i);if(S)return j0(S);g=!1,p=N1,w=new L1}else w=s?[]:y;e:for(;++c<f;){var T=i[c],I=s?s(T):T;if(T=a||T!==0?T:0,g&&I===I){for(var A=w.length;A--;)if(w[A]===I)continue e;s&&w.push(I),y.push(T)}else p(w,I,a)||(w!==y&&w.push(I),y.push(T))}return y}var C2,P2,dF=C(()=>{XT(),Ew(),t2(),YT(),uF(),B1(),C2=200,P2=cF});function hF(i){return i&&i.length?P2(i):[]}var rs,_d=C(()=>{dF(),rs=hF}),Jr=C(()=>{F0(),J1(),K5(),Q5(),Es(),ec(),K0(),c2(),iT(),lp(),_d()}),dx=K((i,s)=>{var a;s.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:ki):c=>(a||(a=Promise.resolve())).then(c).catch(p=>setTimeout(()=>{throw p},0))}),k2=K(i=>{var s=Symbol.for("react.element"),a=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),y=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),A=Symbol.iterator;function k(ue){return ue===null||typeof ue!="object"?null:(ue=A&&ue[A]||ue["@@iterator"],typeof ue=="function"?ue:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,F={};function V(ue,he,qe){this.props=ue,this.context=he,this.refs=F,this.updater=qe||D}V.prototype.isReactComponent={},V.prototype.setState=function(ue,he){if(typeof ue!="object"&&typeof ue!="function"&&ue!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ue,he,"setState")},V.prototype.forceUpdate=function(ue){this.updater.enqueueForceUpdate(this,ue,"forceUpdate")};function $(){}$.prototype=V.prototype;function X(ue,he,qe){this.props=ue,this.context=he,this.refs=F,this.updater=qe||D}var re=X.prototype=new $;re.constructor=X,O(re,V.prototype),re.isPureReactComponent=!0;var ne=Array.isArray,ae=Object.prototype.hasOwnProperty,Se={current:null},fe={key:!0,ref:!0,__self:!0,__source:!0};function ge(ue,he,qe){var Ze,ot={},ze=null,Zt=null;if(he!=null)for(Ze in he.ref!==void 0&&(Zt=he.ref),he.key!==void 0&&(ze=""+he.key),he)ae.call(he,Ze)&&!fe.hasOwnProperty(Ze)&&(ot[Ze]=he[Ze]);var bt=arguments.length-2;if(bt===1)ot.children=qe;else if(1<bt){for(var Kt=Array(bt),cn=0;cn<bt;cn++)Kt[cn]=arguments[cn+2];ot.children=Kt}if(ue&&ue.defaultProps)for(Ze in bt=ue.defaultProps,bt)ot[Ze]===void 0&&(ot[Ze]=bt[Ze]);return{$$typeof:s,type:ue,key:ze,ref:Zt,props:ot,_owner:Se.current}}function Ie(ue,he){return{$$typeof:s,type:ue.type,key:he,ref:ue.ref,props:ue.props,_owner:ue._owner}}function Qe(ue){return typeof ue=="object"&&ue!==null&&ue.$$typeof===s}function le(ue){var he={"=":"=0",":":"=2"};return"$"+ue.replace(/[=:]/g,function(qe){return he[qe]})}var Ae=/\/+/g;function Y(ue,he){return typeof ue=="object"&&ue!==null&&ue.key!=null?le(""+ue.key):he.toString(36)}function Ue(ue,he,qe,Ze,ot){var ze=typeof ue;(ze==="undefined"||ze==="boolean")&&(ue=null);var Zt=!1;if(ue===null)Zt=!0;else switch(ze){case"string":case"number":Zt=!0;break;case"object":switch(ue.$$typeof){case s:case a:Zt=!0}}if(Zt)return Zt=ue,ot=ot(Zt),ue=Ze===""?"."+Y(Zt,0):Ze,ne(ot)?(qe="",ue!=null&&(qe=ue.replace(Ae,"$&/")+"/"),Ue(ot,he,qe,"",function(cn){return cn})):ot!=null&&(Qe(ot)&&(ot=Ie(ot,qe+(!ot.key||Zt&&Zt.key===ot.key?"":(""+ot.key).replace(Ae,"$&/")+"/")+ue)),he.push(ot)),1;if(Zt=0,Ze=Ze===""?".":Ze+":",ne(ue))for(var bt=0;bt<ue.length;bt++){ze=ue[bt];var Kt=Ze+Y(ze,bt);Zt+=Ue(ze,he,qe,Kt,ot)}else if(Kt=k(ue),typeof Kt=="function")for(ue=Kt.call(ue),bt=0;!(ze=ue.next()).done;)ze=ze.value,Kt=Ze+Y(ze,bt++),Zt+=Ue(ze,he,qe,Kt,ot);else if(ze==="object")throw he=String(ue),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys(ue).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.");return Zt}function Tt(ue,he,qe){if(ue==null)return ue;var Ze=[],ot=0;return Ue(ue,Ze,"","",function(ze){return he.call(qe,ze,ot++)}),Ze}function ke(ue){if(ue._status===-1){var he=ue._result;he=he(),he.then(function(qe){(ue._status===0||ue._status===-1)&&(ue._status=1,ue._result=qe)},function(qe){(ue._status===0||ue._status===-1)&&(ue._status=2,ue._result=qe)}),ue._status===-1&&(ue._status=0,ue._result=he)}if(ue._status===1)return ue._result.default;throw ue._result}var Te={current:null},je={transition:null},wt={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:je,ReactCurrentOwner:Se};i.Children={map:Tt,forEach:function(ue,he,qe){Tt(ue,function(){he.apply(this,arguments)},qe)},count:function(ue){var he=0;return Tt(ue,function(){he++}),he},toArray:function(ue){return Tt(ue,function(he){return he})||[]},only:function(ue){if(!Qe(ue))throw Error("React.Children.only expected to receive a single React element child.");return ue}},i.Component=V,i.Fragment=c,i.Profiler=f,i.PureComponent=X,i.StrictMode=p,i.Suspense=S,i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wt,i.cloneElement=function(ue,he,qe){if(ue==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ue+".");var Ze=O({},ue.props),ot=ue.key,ze=ue.ref,Zt=ue._owner;if(he!=null){if(he.ref!==void 0&&(ze=he.ref,Zt=Se.current),he.key!==void 0&&(ot=""+he.key),ue.type&&ue.type.defaultProps)var bt=ue.type.defaultProps;for(Kt in he)ae.call(he,Kt)&&!fe.hasOwnProperty(Kt)&&(Ze[Kt]=he[Kt]===void 0&&bt!==void 0?bt[Kt]:he[Kt])}var Kt=arguments.length-2;if(Kt===1)Ze.children=qe;else if(1<Kt){bt=Array(Kt);for(var cn=0;cn<Kt;cn++)bt[cn]=arguments[cn+2];Ze.children=bt}return{$$typeof:s,type:ue.type,key:ot,ref:ze,props:Ze,_owner:Zt}},i.createContext=function(ue){return ue={$$typeof:y,_currentValue:ue,_currentValue2:ue,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ue.Provider={$$typeof:g,_context:ue},ue.Consumer=ue},i.createElement=ge,i.createFactory=function(ue){var he=ge.bind(null,ue);return he.type=ue,he},i.createRef=function(){return{current:null}},i.forwardRef=function(ue){return{$$typeof:w,render:ue}},i.isValidElement=Qe,i.lazy=function(ue){return{$$typeof:I,_payload:{_status:-1,_result:ue},_init:ke}},i.memo=function(ue,he){return{$$typeof:T,type:ue,compare:he===void 0?null:he}},i.startTransition=function(ue){var he=je.transition;je.transition={};try{ue()}finally{je.transition=he}},i.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},i.useCallback=function(ue,he){return Te.current.useCallback(ue,he)},i.useContext=function(ue){return Te.current.useContext(ue)},i.useDebugValue=function(){},i.useDeferredValue=function(ue){return Te.current.useDeferredValue(ue)},i.useEffect=function(ue,he){return Te.current.useEffect(ue,he)},i.useId=function(){return Te.current.useId()},i.useImperativeHandle=function(ue,he,qe){return Te.current.useImperativeHandle(ue,he,qe)},i.useInsertionEffect=function(ue,he){return Te.current.useInsertionEffect(ue,he)},i.useLayoutEffect=function(ue,he){return Te.current.useLayoutEffect(ue,he)},i.useMemo=function(ue,he){return Te.current.useMemo(ue,he)},i.useReducer=function(ue,he,qe){return Te.current.useReducer(ue,he,qe)},i.useRef=function(ue){return Te.current.useRef(ue)},i.useState=function(ue){return Te.current.useState(ue)},i.useSyncExternalStore=function(ue,he,qe){return Te.current.useSyncExternalStore(ue,he,qe)},i.useTransition=function(){return Te.current.useTransition()},i.version="18.2.0"}),Re=K((i,s)=>{s.exports=k2()}),T2=K(i=>{function s(Te,je){var wt=Te.length;Te.push(je);e:for(;0<wt;){var ue=wt-1>>>1,he=Te[ue];if(0<p(he,je))Te[ue]=je,Te[wt]=he,wt=ue;else break e}}function a(Te){return Te.length===0?null:Te[0]}function c(Te){if(Te.length===0)return null;var je=Te[0],wt=Te.pop();if(wt!==je){Te[0]=wt;e:for(var ue=0,he=Te.length,qe=he>>>1;ue<qe;){var Ze=2*(ue+1)-1,ot=Te[Ze],ze=Ze+1,Zt=Te[ze];if(0>p(ot,wt))ze<he&&0>p(Zt,ot)?(Te[ue]=Zt,Te[ze]=wt,ue=ze):(Te[ue]=ot,Te[Ze]=wt,ue=Ze);else if(ze<he&&0>p(Zt,wt))Te[ue]=Zt,Te[ze]=wt,ue=ze;else break e}}return je}function p(Te,je){var wt=Te.sortIndex-je.sortIndex;return wt!==0?wt:Te.id-je.id}typeof performance=="object"&&typeof performance.now=="function"?(f=performance,i.unstable_now=function(){return f.now()}):(g=Date,y=g.now(),i.unstable_now=function(){return g.now()-y});var f,g,y,w=[],S=[],T=1,I=null,A=3,k=!1,D=!1,O=!1,F=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function X(Te){for(var je=a(S);je!==null;){if(je.callback===null)c(S);else if(je.startTime<=Te)c(S),je.sortIndex=je.expirationTime,s(w,je);else break;je=a(S)}}function re(Te){if(O=!1,X(Te),!D)if(a(w)!==null)D=!0,Tt(ne);else{var je=a(S);je!==null&&ke(re,je.startTime-Te)}}function ne(Te,je){D=!1,O&&(O=!1,V(fe),fe=-1),k=!0;var wt=A;try{for(X(je),I=a(w);I!==null&&(!(I.expirationTime>je)||Te&&!Qe());){var ue=I.callback;if(typeof ue=="function"){I.callback=null,A=I.priorityLevel;var he=ue(I.expirationTime<=je);je=i.unstable_now(),typeof he=="function"?I.callback=he:I===a(w)&&c(w),X(je)}else c(w);I=a(w)}if(I!==null)var qe=!0;else{var Ze=a(S);Ze!==null&&ke(re,Ze.startTime-je),qe=!1}return qe}finally{I=null,A=wt,k=!1}}var ae=!1,Se=null,fe=-1,ge=5,Ie=-1;function Qe(){return!(i.unstable_now()-Ie<ge)}function le(){if(Se!==null){var Te=i.unstable_now();Ie=Te;var je=!0;try{je=Se(!0,Te)}finally{je?Ae():(ae=!1,Se=null)}}else ae=!1}var Ae;typeof $=="function"?Ae=function(){$(le)}:typeof MessageChannel<"u"?(Y=new MessageChannel,Ue=Y.port2,Y.port1.onmessage=le,Ae=function(){Ue.postMessage(null)}):Ae=function(){F(le,0)};var Y,Ue;function Tt(Te){Se=Te,ae||(ae=!0,Ae())}function ke(Te,je){fe=F(function(){Te(i.unstable_now())},je)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Te){Te.callback=null},i.unstable_continueExecution=function(){D||k||(D=!0,Tt(ne))},i.unstable_forceFrameRate=function(Te){0>Te||125<Te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ge=0<Te?Math.floor(1e3/Te):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_getFirstCallbackNode=function(){return a(w)},i.unstable_next=function(Te){switch(A){case 1:case 2:case 3:var je=3;break;default:je=A}var wt=A;A=je;try{return Te()}finally{A=wt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Te,je){switch(Te){case 1:case 2:case 3:case 4:case 5:break;default:Te=3}var wt=A;A=Te;try{return je()}finally{A=wt}},i.unstable_scheduleCallback=function(Te,je,wt){var ue=i.unstable_now();switch(typeof wt=="object"&&wt!==null?(wt=wt.delay,wt=typeof wt=="number"&&0<wt?ue+wt:ue):wt=ue,Te){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=wt+he,Te={id:T++,callback:je,priorityLevel:Te,startTime:wt,expirationTime:he,sortIndex:-1},wt>ue?(Te.sortIndex=wt,s(S,Te),a(w)===null&&Te===a(S)&&(O?(V(fe),fe=-1):O=!0,ke(re,wt-ue))):(Te.sortIndex=he,s(w,Te),D||k||(D=!0,Tt(ne))),Te},i.unstable_shouldYield=Qe,i.unstable_wrapCallback=function(Te){var je=A;return function(){var wt=A;A=je;try{return Te.apply(this,arguments)}finally{A=wt}}}}),pF=K((i,s)=>{s.exports=T2()}),hx=K(i=>{var s=Re(),a=pF();function c(l){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+l,b=1;b<arguments.length;b++)d+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+l+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p=new Set,f={};function g(l,d){y(l,d),y(l+"Capture",d)}function y(l,d){for(f[l]=d,l=0;l<d.length;l++)p.add(d[l])}var w=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S=Object.prototype.hasOwnProperty,T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},A={};function k(l){return S.call(A,l)?!0:S.call(I,l)?!1:T.test(l)?A[l]=!0:(I[l]=!0,!1)}function D(l,d,b,P){if(b!==null&&b.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return P?!1:b!==null?!b.acceptsBooleans:(l=l.toLowerCase().slice(0,5),l!=="data-"&&l!=="aria-");default:return!1}}function O(l,d,b,P){if(d===null||typeof d>"u"||D(l,d,b,P))return!0;if(P)return!1;if(b!==null)switch(b.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function F(l,d,b,P,B,W,oe){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=P,this.attributeNamespace=B,this.mustUseProperty=b,this.propertyName=l,this.type=d,this.sanitizeURL=W,this.removeEmptyString=oe}var V={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(l){V[l]=new F(l,0,!1,l,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(l){var d=l[0];V[d]=new F(d,1,!1,l[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(l){V[l]=new F(l,2,!1,l.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(l){V[l]=new F(l,2,!1,l,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(l){V[l]=new F(l,3,!1,l.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(l){V[l]=new F(l,3,!0,l,null,!1,!1)}),["capture","download"].forEach(function(l){V[l]=new F(l,4,!1,l,null,!1,!1)}),["cols","rows","size","span"].forEach(function(l){V[l]=new F(l,6,!1,l,null,!1,!1)}),["rowSpan","start"].forEach(function(l){V[l]=new F(l,5,!1,l.toLowerCase(),null,!1,!1)});var $=/[\-:]([a-z])/g;function X(l){return l[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(l){var d=l.replace($,X);V[d]=new F(d,1,!1,l,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(l){var d=l.replace($,X);V[d]=new F(d,1,!1,l,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(l){var d=l.replace($,X);V[d]=new F(d,1,!1,l,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(l){V[l]=new F(l,1,!1,l.toLowerCase(),null,!1,!1)}),V.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(l){V[l]=new F(l,1,!1,l.toLowerCase(),null,!0,!0)});function re(l,d,b,P){var B=V.hasOwnProperty(d)?V[d]:null;(B!==null?B.type!==0:P||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(O(d,b,B,P)&&(b=null),P||B===null?k(d)&&(b===null?l.removeAttribute(d):l.setAttribute(d,""+b)):B.mustUseProperty?l[B.propertyName]=b===null?B.type===3?!1:"":b:(d=B.attributeName,P=B.attributeNamespace,b===null?l.removeAttribute(d):(B=B.type,b=B===3||B===4&&b===!0?"":""+b,P?l.setAttributeNS(P,d,b):l.setAttribute(d,b))))}var ne=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=Symbol.for("react.element"),Se=Symbol.for("react.portal"),fe=Symbol.for("react.fragment"),ge=Symbol.for("react.strict_mode"),Ie=Symbol.for("react.profiler"),Qe=Symbol.for("react.provider"),le=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),Ue=Symbol.for("react.suspense_list"),Tt=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),je=Symbol.iterator;function wt(l){return l===null||typeof l!="object"?null:(l=je&&l[je]||l["@@iterator"],typeof l=="function"?l:null)}var ue=Object.assign,he;function qe(l){if(he===void 0)try{throw Error()}catch(b){var d=b.stack.trim().match(/\n( *(at )?)/);he=d&&d[1]||""}return`
`+he+l}var Ze=!1;function ot(l,d){if(!l||Ze)return"";Ze=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(ct){var P=ct}Reflect.construct(l,[],d)}else{try{d.call()}catch(ct){P=ct}l.call(d.prototype)}else{try{throw Error()}catch(ct){P=ct}l()}}catch(ct){if(ct&&P&&typeof ct.stack=="string"){for(var B=ct.stack.split(`
`),W=P.stack.split(`
`),oe=B.length-1,Ce=W.length-1;1<=oe&&0<=Ce&&B[oe]!==W[Ce];)Ce--;for(;1<=oe&&0<=Ce;oe--,Ce--)if(B[oe]!==W[Ce]){if(oe!==1||Ce!==1)do if(oe--,Ce--,0>Ce||B[oe]!==W[Ce]){var Oe=`
`+B[oe].replace(" at new "," at ");return l.displayName&&Oe.includes("<anonymous>")&&(Oe=Oe.replace("<anonymous>",l.displayName)),Oe}while(1<=oe&&0<=Ce);break}}}finally{Ze=!1,Error.prepareStackTrace=b}return(l=l?l.displayName||l.name:"")?qe(l):""}function ze(l){switch(l.tag){case 5:return qe(l.type);case 16:return qe("Lazy");case 13:return qe("Suspense");case 19:return qe("SuspenseList");case 0:case 2:case 15:return l=ot(l.type,!1),l;case 11:return l=ot(l.type.render,!1),l;case 1:return l=ot(l.type,!0),l;default:return""}}function Zt(l){if(l==null)return null;if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case fe:return"Fragment";case Se:return"Portal";case Ie:return"Profiler";case ge:return"StrictMode";case Y:return"Suspense";case Ue:return"SuspenseList"}if(typeof l=="object")switch(l.$$typeof){case le:return(l.displayName||"Context")+".Consumer";case Qe:return(l._context.displayName||"Context")+".Provider";case Ae:var d=l.render;return l=l.displayName,l||(l=d.displayName||d.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case Tt:return d=l.displayName||null,d!==null?d:Zt(l.type)||"Memo";case ke:d=l._payload,l=l._init;try{return Zt(l(d))}catch{}}return null}function bt(l){var d=l.type;switch(l.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return l=d.render,l=l.displayName||l.name||"",d.displayName||(l!==""?"ForwardRef("+l+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zt(d);case 8:return d===ge?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function Kt(l){switch(typeof l){case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function cn(l){var d=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function In(l){var d=cn(l)?"checked":"value",b=Object.getOwnPropertyDescriptor(l.constructor.prototype,d),P=""+l[d];if(!l.hasOwnProperty(d)&&typeof b<"u"&&typeof b.get=="function"&&typeof b.set=="function"){var B=b.get,W=b.set;return Object.defineProperty(l,d,{configurable:!0,get:function(){return B.call(this)},set:function(oe){P=""+oe,W.call(this,oe)}}),Object.defineProperty(l,d,{enumerable:b.enumerable}),{getValue:function(){return P},setValue:function(oe){P=""+oe},stopTracking:function(){l._valueTracker=null,delete l[d]}}}}function Cn(l){l._valueTracker||(l._valueTracker=In(l))}function Er(l){if(!l)return!1;var d=l._valueTracker;if(!d)return!0;var b=d.getValue(),P="";return l&&(P=cn(l)?l.checked?"true":"false":l.value),l=P,l!==b?(d.setValue(l),!0):!1}function J(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}function at(l,d){var b=d.checked;return ue({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:b??l._wrapperState.initialChecked})}function st(l,d){var b=d.defaultValue==null?"":d.defaultValue,P=d.checked!=null?d.checked:d.defaultChecked;b=Kt(d.value!=null?d.value:b),l._wrapperState={initialChecked:P,initialValue:b,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function xe(l,d){d=d.checked,d!=null&&re(l,"checked",d,!1)}function _e(l,d){xe(l,d);var b=Kt(d.value),P=d.type;if(b!=null)P==="number"?(b===0&&l.value===""||l.value!=b)&&(l.value=""+b):l.value!==""+b&&(l.value=""+b);else if(P==="submit"||P==="reset"){l.removeAttribute("value");return}d.hasOwnProperty("value")?xt(l,d.type,b):d.hasOwnProperty("defaultValue")&&xt(l,d.type,Kt(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(l.defaultChecked=!!d.defaultChecked)}function He(l,d,b){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var P=d.type;if(!(P!=="submit"&&P!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+l._wrapperState.initialValue,b||d===l.value||(l.value=d),l.defaultValue=d}b=l.name,b!==""&&(l.name=""),l.defaultChecked=!!l._wrapperState.initialChecked,b!==""&&(l.name=b)}function xt(l,d,b){(d!=="number"||J(l.ownerDocument)!==l)&&(b==null?l.defaultValue=""+l._wrapperState.initialValue:l.defaultValue!==""+b&&(l.defaultValue=""+b))}var Ct=Array.isArray;function Xe(l,d,b,P){if(l=l.options,d){d={};for(var B=0;B<b.length;B++)d["$"+b[B]]=!0;for(b=0;b<l.length;b++)B=d.hasOwnProperty("$"+l[b].value),l[b].selected!==B&&(l[b].selected=B),B&&P&&(l[b].defaultSelected=!0)}else{for(b=""+Kt(b),d=null,B=0;B<l.length;B++){if(l[B].value===b){l[B].selected=!0,P&&(l[B].defaultSelected=!0);return}d!==null||l[B].disabled||(d=l[B])}d!==null&&(d.selected=!0)}}function At(l,d){if(d.dangerouslySetInnerHTML!=null)throw Error(c(91));return ue({},d,{value:void 0,defaultValue:void 0,children:""+l._wrapperState.initialValue})}function Et(l,d){var b=d.value;if(b==null){if(b=d.children,d=d.defaultValue,b!=null){if(d!=null)throw Error(c(92));if(Ct(b)){if(1<b.length)throw Error(c(93));b=b[0]}d=b}d==null&&(d=""),b=d}l._wrapperState={initialValue:Kt(b)}}function Pt(l,d){var b=Kt(d.value),P=Kt(d.defaultValue);b!=null&&(b=""+b,b!==l.value&&(l.value=b),d.defaultValue==null&&l.defaultValue!==b&&(l.defaultValue=b)),P!=null&&(l.defaultValue=""+P)}function _n(l){var d=l.textContent;d===l._wrapperState.initialValue&&d!==""&&d!==null&&(l.value=d)}function gr(l){switch(l){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hn(l,d){return l==null||l==="http://www.w3.org/1999/xhtml"?gr(d):l==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":l}var Ko,Wp=function(l){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,b,P,B){MSApp.execUnsafeLocalFunction(function(){return l(d,b,P,B)})}:l}(function(l,d){if(l.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in l)l.innerHTML=d;else{for(Ko=Ko||document.createElement("div"),Ko.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=Ko.firstChild;l.firstChild;)l.removeChild(l.firstChild);for(;d.firstChild;)l.appendChild(d.firstChild)}});function ls(l,d){if(d){var b=l.firstChild;if(b&&b===l.lastChild&&b.nodeType===3){b.nodeValue=d;return}}l.textContent=d}var gu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ei=["Webkit","ms","Moz","O"];Object.keys(gu).forEach(function(l){Ei.forEach(function(d){d=d+l.charAt(0).toUpperCase()+l.substring(1),gu[d]=gu[l]})});function jv(l,d,b){return d==null||typeof d=="boolean"||d===""?"":b||typeof d!="number"||d===0||gu.hasOwnProperty(l)&&gu[l]?(""+d).trim():d+"px"}function db(l,d){l=l.style;for(var b in d)if(d.hasOwnProperty(b)){var P=b.indexOf("--")===0,B=jv(b,d[b],P);b==="float"&&(b="cssFloat"),P?l.setProperty(b,B):l[b]=B}}var yu=ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hb(l,d){if(d){if(yu[l]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(c(137,l));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(c(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(c(61))}if(d.style!=null&&typeof d.style!="object")throw Error(c(62))}}function lE(l,d){if(l.indexOf("-")===-1)return typeof d.is=="string";switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uE=null;function cE(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var pb=null,gl=null,bu=null;function Ode(l){if(l=IE(l)){if(typeof pb!="function")throw Error(c(280));var d=l.stateNode;d&&(d=uO(d),pb(l.stateNode,l.type,d))}}function Dde(l){gl?bu?bu.push(l):bu=[l]:gl=l}function Lde(){if(gl){var l=gl,d=bu;if(bu=gl=null,Ode(l),d)for(l=0;l<d.length;l++)Ode(d[l])}}function Nde(l,d){return l(d)}function Fde(){}var kj=!1;function Bde(l,d,b){if(kj)return l(d,b);kj=!0;try{return Nde(l,d,b)}finally{kj=!1,(gl!==null||bu!==null)&&(Fde(),Lde())}}function dE(l,d){var b=l.stateNode;if(b===null)return null;var P=uO(b);if(P===null)return null;b=P[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(P=!P.disabled)||(l=l.type,P=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!P;break e;default:l=!1}if(l)return null;if(b&&typeof b!="function")throw Error(c(231,d,typeof b));return b}var Tj=!1;if(w)try{fb={},Object.defineProperty(fb,"passive",{get:function(){Tj=!0}}),window.addEventListener("test",fb,fb),window.removeEventListener("test",fb,fb)}catch{Tj=!1}var fb;function PIe(l,d,b,P,B,W,oe,Ce,Oe){var ct=Array.prototype.slice.call(arguments,3);try{d.apply(b,ct)}catch(Rt){this.onError(Rt)}}var hE=!1,BR=null,UR=!1,Mj=null,kIe={onError:function(l){hE=!0,BR=l}};function TIe(l,d,b,P,B,W,oe,Ce,Oe){hE=!1,BR=null,PIe.apply(kIe,arguments)}function MIe(l,d,b,P,B,W,oe,Ce,Oe){if(TIe.apply(this,arguments),hE){if(hE){var ct=BR;hE=!1,BR=null}else throw Error(c(198));UR||(UR=!0,Mj=ct)}}function zv(l){var d=l,b=l;if(l.alternate)for(;d.return;)d=d.return;else{l=d;do d=l,d.flags&4098&&(b=d.return),l=d.return;while(l)}return d.tag===3?b:null}function Ude(l){if(l.tag===13){var d=l.memoizedState;if(d===null&&(l=l.alternate,l!==null&&(d=l.memoizedState)),d!==null)return d.dehydrated}return null}function Vde(l){if(zv(l)!==l)throw Error(c(188))}function AIe(l){var d=l.alternate;if(!d){if(d=zv(l),d===null)throw Error(c(188));return d!==l?null:l}for(var b=l,P=d;;){var B=b.return;if(B===null)break;var W=B.alternate;if(W===null){if(P=B.return,P!==null){b=P;continue}break}if(B.child===W.child){for(W=B.child;W;){if(W===b)return Vde(B),l;if(W===P)return Vde(B),d;W=W.sibling}throw Error(c(188))}if(b.return!==P.return)b=B,P=W;else{for(var oe=!1,Ce=B.child;Ce;){if(Ce===b){oe=!0,b=B,P=W;break}if(Ce===P){oe=!0,P=B,b=W;break}Ce=Ce.sibling}if(!oe){for(Ce=W.child;Ce;){if(Ce===b){oe=!0,b=W,P=B;break}if(Ce===P){oe=!0,P=W,b=B;break}Ce=Ce.sibling}if(!oe)throw Error(c(189))}}if(b.alternate!==P)throw Error(c(190))}if(b.tag!==3)throw Error(c(188));return b.stateNode.current===b?l:d}function jde(l){return l=AIe(l),l!==null?zde(l):null}function zde(l){if(l.tag===5||l.tag===6)return l;for(l=l.child;l!==null;){var d=zde(l);if(d!==null)return d;l=l.sibling}return null}var Hde=a.unstable_scheduleCallback,Gde=a.unstable_cancelCallback,IIe=a.unstable_shouldYield,RIe=a.unstable_requestPaint,Yi=a.unstable_now,OIe=a.unstable_getCurrentPriorityLevel,Aj=a.unstable_ImmediatePriority,$de=a.unstable_UserBlockingPriority,VR=a.unstable_NormalPriority,DIe=a.unstable_LowPriority,Wde=a.unstable_IdlePriority,jR=null,Mc=null;function LIe(l){if(Mc&&typeof Mc.onCommitFiberRoot=="function")try{Mc.onCommitFiberRoot(jR,l,void 0,(l.current.flags&128)===128)}catch{}}var _u=Math.clz32?Math.clz32:BIe,NIe=Math.log,FIe=Math.LN2;function BIe(l){return l>>>=0,l===0?32:31-(NIe(l)/FIe|0)|0}var zR=64,HR=4194304;function pE(l){switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return l&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return l}}function GR(l,d){var b=l.pendingLanes;if(b===0)return 0;var P=0,B=l.suspendedLanes,W=l.pingedLanes,oe=b&268435455;if(oe!==0){var Ce=oe&~B;Ce!==0?P=pE(Ce):(W&=oe,W!==0&&(P=pE(W)))}else oe=b&~B,oe!==0?P=pE(oe):W!==0&&(P=pE(W));if(P===0)return 0;if(d!==0&&d!==P&&!(d&B)&&(B=P&-P,W=d&-d,B>=W||B===16&&(W&4194240)!==0))return d;if(P&4&&(P|=b&16),d=l.entangledLanes,d!==0)for(l=l.entanglements,d&=P;0<d;)b=31-_u(d),B=1<<b,P|=l[b],d&=~B;return P}function UIe(l,d){switch(l){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VIe(l,d){for(var b=l.suspendedLanes,P=l.pingedLanes,B=l.expirationTimes,W=l.pendingLanes;0<W;){var oe=31-_u(W),Ce=1<<oe,Oe=B[oe];Oe===-1?(!(Ce&b)||Ce&P)&&(B[oe]=UIe(Ce,d)):Oe<=d&&(l.expiredLanes|=Ce),W&=~Ce}}function Ij(l){return l=l.pendingLanes&-1073741825,l!==0?l:l&1073741824?1073741824:0}function Kde(){var l=zR;return zR<<=1,!(zR&4194240)&&(zR=64),l}function Rj(l){for(var d=[],b=0;31>b;b++)d.push(l);return d}function fE(l,d,b){l.pendingLanes|=d,d!==536870912&&(l.suspendedLanes=0,l.pingedLanes=0),l=l.eventTimes,d=31-_u(d),l[d]=b}function jIe(l,d){var b=l.pendingLanes&~d;l.pendingLanes=d,l.suspendedLanes=0,l.pingedLanes=0,l.expiredLanes&=d,l.mutableReadLanes&=d,l.entangledLanes&=d,d=l.entanglements;var P=l.eventTimes;for(l=l.expirationTimes;0<b;){var B=31-_u(b),W=1<<B;d[B]=0,P[B]=-1,l[B]=-1,b&=~W}}function Oj(l,d){var b=l.entangledLanes|=d;for(l=l.entanglements;b;){var P=31-_u(b),B=1<<P;B&d|l[P]&d&&(l[P]|=d),b&=~B}}var Vr=0;function qde(l){return l&=-l,1<l?4<l?l&268435455?16:536870912:4:1}var Xde,Dj,Yde,Zde,Qde,Lj=!1,$R=[],Kp=null,qp=null,Xp=null,mE=new Map,vE=new Map,Yp=[],zIe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jde(l,d){switch(l){case"focusin":case"focusout":Kp=null;break;case"dragenter":case"dragleave":qp=null;break;case"mouseover":case"mouseout":Xp=null;break;case"pointerover":case"pointerout":mE.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":vE.delete(d.pointerId)}}function gE(l,d,b,P,B,W){return l===null||l.nativeEvent!==W?(l={blockedOn:d,domEventName:b,eventSystemFlags:P,nativeEvent:W,targetContainers:[B]},d!==null&&(d=IE(d),d!==null&&Dj(d)),l):(l.eventSystemFlags|=P,d=l.targetContainers,B!==null&&d.indexOf(B)===-1&&d.push(B),l)}function HIe(l,d,b,P,B){switch(d){case"focusin":return Kp=gE(Kp,l,d,b,P,B),!0;case"dragenter":return qp=gE(qp,l,d,b,P,B),!0;case"mouseover":return Xp=gE(Xp,l,d,b,P,B),!0;case"pointerover":var W=B.pointerId;return mE.set(W,gE(mE.get(W)||null,l,d,b,P,B)),!0;case"gotpointercapture":return W=B.pointerId,vE.set(W,gE(vE.get(W)||null,l,d,b,P,B)),!0}return!1}function ehe(l){var d=Hv(l.target);if(d!==null){var b=zv(d);if(b!==null){if(d=b.tag,d===13){if(d=Ude(b),d!==null){l.blockedOn=d,Qde(l.priority,function(){Yde(b)});return}}else if(d===3&&b.stateNode.current.memoizedState.isDehydrated){l.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}l.blockedOn=null}function WR(l){if(l.blockedOn!==null)return!1;for(var d=l.targetContainers;0<d.length;){var b=Fj(l.domEventName,l.eventSystemFlags,d[0],l.nativeEvent);if(b===null){b=l.nativeEvent;var P=new b.constructor(b.type,b);uE=P,b.target.dispatchEvent(P),uE=null}else return d=IE(b),d!==null&&Dj(d),l.blockedOn=b,!1;d.shift()}return!0}function the(l,d,b){WR(l)&&b.delete(d)}function GIe(){Lj=!1,Kp!==null&&WR(Kp)&&(Kp=null),qp!==null&&WR(qp)&&(qp=null),Xp!==null&&WR(Xp)&&(Xp=null),mE.forEach(the),vE.forEach(the)}function yE(l,d){l.blockedOn===d&&(l.blockedOn=null,Lj||(Lj=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,GIe)))}function bE(l){function d(B){return yE(B,l)}if(0<$R.length){yE($R[0],l);for(var b=1;b<$R.length;b++){var P=$R[b];P.blockedOn===l&&(P.blockedOn=null)}}for(Kp!==null&&yE(Kp,l),qp!==null&&yE(qp,l),Xp!==null&&yE(Xp,l),mE.forEach(d),vE.forEach(d),b=0;b<Yp.length;b++)P=Yp[b],P.blockedOn===l&&(P.blockedOn=null);for(;0<Yp.length&&(b=Yp[0],b.blockedOn===null);)ehe(b),b.blockedOn===null&&Yp.shift()}var mb=ne.ReactCurrentBatchConfig,KR=!0;function $Ie(l,d,b,P){var B=Vr,W=mb.transition;mb.transition=null;try{Vr=1,Nj(l,d,b,P)}finally{Vr=B,mb.transition=W}}function WIe(l,d,b,P){var B=Vr,W=mb.transition;mb.transition=null;try{Vr=4,Nj(l,d,b,P)}finally{Vr=B,mb.transition=W}}function Nj(l,d,b,P){if(KR){var B=Fj(l,d,b,P);if(B===null)Qj(l,d,P,qR,b),Jde(l,P);else if(HIe(B,l,d,b,P))P.stopPropagation();else if(Jde(l,P),d&4&&-1<zIe.indexOf(l)){for(;B!==null;){var W=IE(B);if(W!==null&&Xde(W),W=Fj(l,d,b,P),W===null&&Qj(l,d,P,qR,b),W===B)break;B=W}B!==null&&P.stopPropagation()}else Qj(l,d,P,null,b)}}var qR=null;function Fj(l,d,b,P){if(qR=null,l=cE(P),l=Hv(l),l!==null)if(d=zv(l),d===null)l=null;else if(b=d.tag,b===13){if(l=Ude(d),l!==null)return l;l=null}else if(b===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;l=null}else d!==l&&(l=null);return qR=l,null}function nhe(l){switch(l){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(OIe()){case Aj:return 1;case $de:return 4;case VR:case DIe:return 16;case Wde:return 536870912;default:return 16}default:return 16}}var Zp=null,Bj=null,XR=null;function rhe(){if(XR)return XR;var l,d=Bj,b=d.length,P,B="value"in Zp?Zp.value:Zp.textContent,W=B.length;for(l=0;l<b&&d[l]===B[l];l++);var oe=b-l;for(P=1;P<=oe&&d[b-P]===B[W-P];P++);return XR=B.slice(l,1<P?1-P:void 0)}function YR(l){var d=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&d===13&&(l=13)):l=d,l===10&&(l=13),32<=l||l===13?l:0}function ZR(){return!0}function ihe(){return!1}function Ma(l){function d(b,P,B,W,oe){this._reactName=b,this._targetInst=B,this.type=P,this.nativeEvent=W,this.target=oe,this.currentTarget=null;for(var Ce in l)l.hasOwnProperty(Ce)&&(b=l[Ce],this[Ce]=b?b(W):W[Ce]);return this.isDefaultPrevented=(W.defaultPrevented!=null?W.defaultPrevented:W.returnValue===!1)?ZR:ihe,this.isPropagationStopped=ihe,this}return ue(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=ZR)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=ZR)},persist:function(){},isPersistent:ZR}),d}var vb={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uj=Ma(vb),_E=ue({},vb,{view:0,detail:0}),KIe=Ma(_E),Vj,jj,wE,QR=ue({},_E,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hj,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==wE&&(wE&&l.type==="mousemove"?(Vj=l.screenX-wE.screenX,jj=l.screenY-wE.screenY):jj=Vj=0,wE=l),Vj)},movementY:function(l){return"movementY"in l?l.movementY:jj}}),ohe=Ma(QR),qIe=ue({},QR,{dataTransfer:0}),XIe=Ma(qIe),YIe=ue({},_E,{relatedTarget:0}),zj=Ma(YIe),ZIe=ue({},vb,{animationName:0,elapsedTime:0,pseudoElement:0}),QIe=Ma(ZIe),JIe=ue({},vb,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),eRe=Ma(JIe),tRe=ue({},vb,{data:0}),she=Ma(tRe),nRe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rRe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},iRe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oRe(l){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(l):(l=iRe[l])?!!d[l]:!1}function Hj(){return oRe}var sRe=ue({},_E,{key:function(l){if(l.key){var d=nRe[l.key]||l.key;if(d!=="Unidentified")return d}return l.type==="keypress"?(l=YR(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?rRe[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hj,charCode:function(l){return l.type==="keypress"?YR(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?YR(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),aRe=Ma(sRe),lRe=ue({},QR,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ahe=Ma(lRe),uRe=ue({},_E,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hj}),cRe=Ma(uRe),dRe=ue({},vb,{propertyName:0,elapsedTime:0,pseudoElement:0}),hRe=Ma(dRe),pRe=ue({},QR,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),fRe=Ma(pRe),mRe=[9,13,27,32],Gj=w&&"CompositionEvent"in window,xE=null;w&&"documentMode"in document&&(xE=document.documentMode);var vRe=w&&"TextEvent"in window&&!xE,lhe=w&&(!Gj||xE&&8<xE&&11>=xE),uhe=String.fromCharCode(32),che=!1;function dhe(l,d){switch(l){case"keyup":return mRe.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hhe(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var gb=!1;function gRe(l,d){switch(l){case"compositionend":return hhe(d);case"keypress":return d.which!==32?null:(che=!0,uhe);case"textInput":return l=d.data,l===uhe&&che?null:l;default:return null}}function yRe(l,d){if(gb)return l==="compositionend"||!Gj&&dhe(l,d)?(l=rhe(),XR=Bj=Zp=null,gb=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return lhe&&d.locale!=="ko"?null:d.data;default:return null}}var bRe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function phe(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d==="input"?!!bRe[l.type]:d==="textarea"}function fhe(l,d,b,P){Dde(P),d=sO(d,"onChange"),0<d.length&&(b=new Uj("onChange","change",null,b,P),l.push({event:b,listeners:d}))}var SE=null,EE=null;function _Re(l){Ohe(l,0)}function JR(l){var d=xb(l);if(Er(d))return l}function wRe(l,d){if(l==="change")return d}var mhe=!1;w&&(w?(eO="oninput"in document,eO||(Wj=document.createElement("div"),Wj.setAttribute("oninput","return;"),eO=typeof Wj.oninput=="function"),$j=eO):$j=!1,mhe=$j&&(!document.documentMode||9<document.documentMode));var $j,eO,Wj;function vhe(){SE&&(SE.detachEvent("onpropertychange",ghe),EE=SE=null)}function ghe(l){if(l.propertyName==="value"&&JR(EE)){var d=[];fhe(d,EE,l,cE(l)),Bde(_Re,d)}}function xRe(l,d,b){l==="focusin"?(vhe(),SE=d,EE=b,SE.attachEvent("onpropertychange",ghe)):l==="focusout"&&vhe()}function SRe(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return JR(EE)}function ERe(l,d){if(l==="click")return JR(d)}function CRe(l,d){if(l==="input"||l==="change")return JR(d)}function PRe(l,d){return l===d&&(l!==0||1/l===1/d)||l!==l&&d!==d}var wu=typeof Object.is=="function"?Object.is:PRe;function CE(l,d){if(wu(l,d))return!0;if(typeof l!="object"||l===null||typeof d!="object"||d===null)return!1;var b=Object.keys(l),P=Object.keys(d);if(b.length!==P.length)return!1;for(P=0;P<b.length;P++){var B=b[P];if(!S.call(d,B)||!wu(l[B],d[B]))return!1}return!0}function yhe(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function bhe(l,d){var b=yhe(l);l=0;for(var P;b;){if(b.nodeType===3){if(P=l+b.textContent.length,l<=d&&P>=d)return{node:b,offset:d-l};l=P}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=yhe(b)}}function _he(l,d){return l&&d?l===d?!0:l&&l.nodeType===3?!1:d&&d.nodeType===3?_he(l,d.parentNode):"contains"in l?l.contains(d):l.compareDocumentPosition?!!(l.compareDocumentPosition(d)&16):!1:!1}function whe(){for(var l=window,d=J();d instanceof l.HTMLIFrameElement;){try{var b=typeof d.contentWindow.location.href=="string"}catch{b=!1}if(b)l=d.contentWindow;else break;d=J(l.document)}return d}function Kj(l){var d=l&&l.nodeName&&l.nodeName.toLowerCase();return d&&(d==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||d==="textarea"||l.contentEditable==="true")}function kRe(l){var d=whe(),b=l.focusedElem,P=l.selectionRange;if(d!==b&&b&&b.ownerDocument&&_he(b.ownerDocument.documentElement,b)){if(P!==null&&Kj(b)){if(d=P.start,l=P.end,l===void 0&&(l=d),"selectionStart"in b)b.selectionStart=d,b.selectionEnd=Math.min(l,b.value.length);else if(l=(d=b.ownerDocument||document)&&d.defaultView||window,l.getSelection){l=l.getSelection();var B=b.textContent.length,W=Math.min(P.start,B);P=P.end===void 0?W:Math.min(P.end,B),!l.extend&&W>P&&(B=P,P=W,W=B),B=bhe(b,W);var oe=bhe(b,P);B&&oe&&(l.rangeCount!==1||l.anchorNode!==B.node||l.anchorOffset!==B.offset||l.focusNode!==oe.node||l.focusOffset!==oe.offset)&&(d=d.createRange(),d.setStart(B.node,B.offset),l.removeAllRanges(),W>P?(l.addRange(d),l.extend(oe.node,oe.offset)):(d.setEnd(oe.node,oe.offset),l.addRange(d)))}}for(d=[],l=b;l=l.parentNode;)l.nodeType===1&&d.push({element:l,left:l.scrollLeft,top:l.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<d.length;b++)l=d[b],l.element.scrollLeft=l.left,l.element.scrollTop=l.top}}var TRe=w&&"documentMode"in document&&11>=document.documentMode,yb=null,qj=null,PE=null,Xj=!1;function xhe(l,d,b){var P=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;Xj||yb==null||yb!==J(P)||(P=yb,"selectionStart"in P&&Kj(P)?P={start:P.selectionStart,end:P.selectionEnd}:(P=(P.ownerDocument&&P.ownerDocument.defaultView||window).getSelection(),P={anchorNode:P.anchorNode,anchorOffset:P.anchorOffset,focusNode:P.focusNode,focusOffset:P.focusOffset}),PE&&CE(PE,P)||(PE=P,P=sO(qj,"onSelect"),0<P.length&&(d=new Uj("onSelect","select",null,d,b),l.push({event:d,listeners:P}),d.target=yb)))}function tO(l,d){var b={};return b[l.toLowerCase()]=d.toLowerCase(),b["Webkit"+l]="webkit"+d,b["Moz"+l]="moz"+d,b}var bb={animationend:tO("Animation","AnimationEnd"),animationiteration:tO("Animation","AnimationIteration"),animationstart:tO("Animation","AnimationStart"),transitionend:tO("Transition","TransitionEnd")},Yj={},She={};w&&(She=document.createElement("div").style,"AnimationEvent"in window||(delete bb.animationend.animation,delete bb.animationiteration.animation,delete bb.animationstart.animation),"TransitionEvent"in window||delete bb.transitionend.transition);function nO(l){if(Yj[l])return Yj[l];if(!bb[l])return l;var d=bb[l],b;for(b in d)if(d.hasOwnProperty(b)&&b in She)return Yj[l]=d[b];return l}var Ehe=nO("animationend"),Che=nO("animationiteration"),Phe=nO("animationstart"),khe=nO("transitionend"),The=new Map,Mhe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qp(l,d){The.set(l,d),g(d,[l])}for(iO=0;iO<Mhe.length;iO++)rO=Mhe[iO],Ahe=rO.toLowerCase(),Ihe=rO[0].toUpperCase()+rO.slice(1),Qp(Ahe,"on"+Ihe);var rO,Ahe,Ihe,iO;Qp(Ehe,"onAnimationEnd"),Qp(Che,"onAnimationIteration"),Qp(Phe,"onAnimationStart"),Qp("dblclick","onDoubleClick"),Qp("focusin","onFocus"),Qp("focusout","onBlur"),Qp(khe,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kE="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MRe=new Set("cancel close invalid load scroll toggle".split(" ").concat(kE));function Rhe(l,d,b){var P=l.type||"unknown-event";l.currentTarget=b,MIe(P,d,void 0,l),l.currentTarget=null}function Ohe(l,d){d=(d&4)!==0;for(var b=0;b<l.length;b++){var P=l[b],B=P.event;P=P.listeners;e:{var W=void 0;if(d)for(var oe=P.length-1;0<=oe;oe--){var Ce=P[oe],Oe=Ce.instance,ct=Ce.currentTarget;if(Ce=Ce.listener,Oe!==W&&B.isPropagationStopped())break e;Rhe(B,Ce,ct),W=Oe}else for(oe=0;oe<P.length;oe++){if(Ce=P[oe],Oe=Ce.instance,ct=Ce.currentTarget,Ce=Ce.listener,Oe!==W&&B.isPropagationStopped())break e;Rhe(B,Ce,ct),W=Oe}}}if(UR)throw l=Mj,UR=!1,Mj=null,l}function hi(l,d){var b=d[iz];b===void 0&&(b=d[iz]=new Set);var P=l+"__bubble";b.has(P)||(Dhe(d,l,2,!1),b.add(P))}function Zj(l,d,b){var P=0;d&&(P|=4),Dhe(b,l,P,d)}var oO="_reactListening"+Math.random().toString(36).slice(2);function TE(l){if(!l[oO]){l[oO]=!0,p.forEach(function(b){b!=="selectionchange"&&(MRe.has(b)||Zj(b,!1,l),Zj(b,!0,l))});var d=l.nodeType===9?l:l.ownerDocument;d===null||d[oO]||(d[oO]=!0,Zj("selectionchange",!1,d))}}function Dhe(l,d,b,P){switch(nhe(d)){case 1:var B=$Ie;break;case 4:B=WIe;break;default:B=Nj}b=B.bind(null,d,b,l),B=void 0,!Tj||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(B=!0),P?B!==void 0?l.addEventListener(d,b,{capture:!0,passive:B}):l.addEventListener(d,b,!0):B!==void 0?l.addEventListener(d,b,{passive:B}):l.addEventListener(d,b,!1)}function Qj(l,d,b,P,B){var W=P;if(!(d&1)&&!(d&2)&&P!==null)e:for(;;){if(P===null)return;var oe=P.tag;if(oe===3||oe===4){var Ce=P.stateNode.containerInfo;if(Ce===B||Ce.nodeType===8&&Ce.parentNode===B)break;if(oe===4)for(oe=P.return;oe!==null;){var Oe=oe.tag;if((Oe===3||Oe===4)&&(Oe=oe.stateNode.containerInfo,Oe===B||Oe.nodeType===8&&Oe.parentNode===B))return;oe=oe.return}for(;Ce!==null;){if(oe=Hv(Ce),oe===null)return;if(Oe=oe.tag,Oe===5||Oe===6){P=W=oe;continue e}Ce=Ce.parentNode}}P=P.return}Bde(function(){var ct=W,Rt=cE(b),Lt=[];e:{var It=The.get(l);if(It!==void 0){var nn=Uj,dn=l;switch(l){case"keypress":if(YR(b)===0)break e;case"keydown":case"keyup":nn=aRe;break;case"focusin":dn="focus",nn=zj;break;case"focusout":dn="blur",nn=zj;break;case"beforeblur":case"afterblur":nn=zj;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":nn=ohe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":nn=XIe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":nn=cRe;break;case Ehe:case Che:case Phe:nn=QIe;break;case khe:nn=hRe;break;case"scroll":nn=KIe;break;case"wheel":nn=fRe;break;case"copy":case"cut":case"paste":nn=eRe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":nn=ahe}var fn=(d&4)!==0,Zi=!fn&&l==="scroll",Ye=fn?It!==null?It+"Capture":null:It;fn=[];for(var Ve=ct,rt;Ve!==null;){rt=Ve;var zt=rt.stateNode;if(rt.tag===5&&zt!==null&&(rt=zt,Ye!==null&&(zt=dE(Ve,Ye),zt!=null&&fn.push(ME(Ve,zt,rt)))),Zi)break;Ve=Ve.return}0<fn.length&&(It=new nn(It,dn,null,b,Rt),Lt.push({event:It,listeners:fn}))}}if(!(d&7)){e:{if(It=l==="mouseover"||l==="pointerover",nn=l==="mouseout"||l==="pointerout",It&&b!==uE&&(dn=b.relatedTarget||b.fromElement)&&(Hv(dn)||dn[Xd]))break e;if((nn||It)&&(It=Rt.window===Rt?Rt:(It=Rt.ownerDocument)?It.defaultView||It.parentWindow:window,nn?(dn=b.relatedTarget||b.toElement,nn=ct,dn=dn?Hv(dn):null,dn!==null&&(Zi=zv(dn),dn!==Zi||dn.tag!==5&&dn.tag!==6)&&(dn=null)):(nn=null,dn=ct),nn!==dn)){if(fn=ohe,zt="onMouseLeave",Ye="onMouseEnter",Ve="mouse",(l==="pointerout"||l==="pointerover")&&(fn=ahe,zt="onPointerLeave",Ye="onPointerEnter",Ve="pointer"),Zi=nn==null?It:xb(nn),rt=dn==null?It:xb(dn),It=new fn(zt,Ve+"leave",nn,b,Rt),It.target=Zi,It.relatedTarget=rt,zt=null,Hv(Rt)===ct&&(fn=new fn(Ye,Ve+"enter",dn,b,Rt),fn.target=rt,fn.relatedTarget=Zi,zt=fn),Zi=zt,nn&&dn)t:{for(fn=nn,Ye=dn,Ve=0,rt=fn;rt;rt=_b(rt))Ve++;for(rt=0,zt=Ye;zt;zt=_b(zt))rt++;for(;0<Ve-rt;)fn=_b(fn),Ve--;for(;0<rt-Ve;)Ye=_b(Ye),rt--;for(;Ve--;){if(fn===Ye||Ye!==null&&fn===Ye.alternate)break t;fn=_b(fn),Ye=_b(Ye)}fn=null}else fn=null;nn!==null&&Lhe(Lt,It,nn,fn,!1),dn!==null&&Zi!==null&&Lhe(Lt,Zi,dn,fn,!0)}}e:{if(It=ct?xb(ct):window,nn=It.nodeName&&It.nodeName.toLowerCase(),nn==="select"||nn==="input"&&It.type==="file")var vn=wRe;else if(phe(It))if(mhe)vn=CRe;else{vn=SRe;var On=xRe}else(nn=It.nodeName)&&nn.toLowerCase()==="input"&&(It.type==="checkbox"||It.type==="radio")&&(vn=ERe);if(vn&&(vn=vn(l,ct))){fhe(Lt,vn,b,Rt);break e}On&&On(l,It,ct),l==="focusout"&&(On=It._wrapperState)&&On.controlled&&It.type==="number"&&xt(It,"number",It.value)}switch(On=ct?xb(ct):window,l){case"focusin":(phe(On)||On.contentEditable==="true")&&(yb=On,qj=ct,PE=null);break;case"focusout":PE=qj=yb=null;break;case"mousedown":Xj=!0;break;case"contextmenu":case"mouseup":case"dragend":Xj=!1,xhe(Lt,b,Rt);break;case"selectionchange":if(TRe)break;case"keydown":case"keyup":xhe(Lt,b,Rt)}var Dn;if(Gj)e:{switch(l){case"compositionstart":var Gn="onCompositionStart";break e;case"compositionend":Gn="onCompositionEnd";break e;case"compositionupdate":Gn="onCompositionUpdate";break e}Gn=void 0}else gb?dhe(l,b)&&(Gn="onCompositionEnd"):l==="keydown"&&b.keyCode===229&&(Gn="onCompositionStart");Gn&&(lhe&&b.locale!=="ko"&&(gb||Gn!=="onCompositionStart"?Gn==="onCompositionEnd"&&gb&&(Dn=rhe()):(Zp=Rt,Bj="value"in Zp?Zp.value:Zp.textContent,gb=!0)),On=sO(ct,Gn),0<On.length&&(Gn=new she(Gn,l,null,b,Rt),Lt.push({event:Gn,listeners:On}),Dn?Gn.data=Dn:(Dn=hhe(b),Dn!==null&&(Gn.data=Dn)))),(Dn=vRe?gRe(l,b):yRe(l,b))&&(ct=sO(ct,"onBeforeInput"),0<ct.length&&(Rt=new she("onBeforeInput","beforeinput",null,b,Rt),Lt.push({event:Rt,listeners:ct}),Rt.data=Dn))}Ohe(Lt,d)})}function ME(l,d,b){return{instance:l,listener:d,currentTarget:b}}function sO(l,d){for(var b=d+"Capture",P=[];l!==null;){var B=l,W=B.stateNode;B.tag===5&&W!==null&&(B=W,W=dE(l,b),W!=null&&P.unshift(ME(l,W,B)),W=dE(l,d),W!=null&&P.push(ME(l,W,B))),l=l.return}return P}function _b(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5);return l||null}function Lhe(l,d,b,P,B){for(var W=d._reactName,oe=[];b!==null&&b!==P;){var Ce=b,Oe=Ce.alternate,ct=Ce.stateNode;if(Oe!==null&&Oe===P)break;Ce.tag===5&&ct!==null&&(Ce=ct,B?(Oe=dE(b,W),Oe!=null&&oe.unshift(ME(b,Oe,Ce))):B||(Oe=dE(b,W),Oe!=null&&oe.push(ME(b,Oe,Ce)))),b=b.return}oe.length!==0&&l.push({event:d,listeners:oe})}var ARe=/\r\n?/g,IRe=/\u0000|\uFFFD/g;function Nhe(l){return(typeof l=="string"?l:""+l).replace(ARe,`
`).replace(IRe,"")}function aO(l,d,b){if(d=Nhe(d),Nhe(l)!==d&&b)throw Error(c(425))}function lO(){}var Jj=null,ez=null;function tz(l,d){return l==="textarea"||l==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var nz=typeof setTimeout=="function"?setTimeout:void 0,RRe=typeof clearTimeout=="function"?clearTimeout:void 0,Fhe=typeof Promise=="function"?Promise:void 0,ORe=typeof queueMicrotask=="function"?queueMicrotask:typeof Fhe<"u"?function(l){return Fhe.resolve(null).then(l).catch(DRe)}:nz;function DRe(l){setTimeout(function(){throw l})}function rz(l,d){var b=d,P=0;do{var B=b.nextSibling;if(l.removeChild(b),B&&B.nodeType===8)if(b=B.data,b==="/$"){if(P===0){l.removeChild(B),bE(d);return}P--}else b!=="$"&&b!=="$?"&&b!=="$!"||P++;b=B}while(b);bE(d)}function Jp(l){for(;l!=null;l=l.nextSibling){var d=l.nodeType;if(d===1||d===3)break;if(d===8){if(d=l.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return l}function Bhe(l){l=l.previousSibling;for(var d=0;l;){if(l.nodeType===8){var b=l.data;if(b==="$"||b==="$!"||b==="$?"){if(d===0)return l;d--}else b==="/$"&&d++}l=l.previousSibling}return null}var wb=Math.random().toString(36).slice(2),Ac="__reactFiber$"+wb,AE="__reactProps$"+wb,Xd="__reactContainer$"+wb,iz="__reactEvents$"+wb,LRe="__reactListeners$"+wb,NRe="__reactHandles$"+wb;function Hv(l){var d=l[Ac];if(d)return d;for(var b=l.parentNode;b;){if(d=b[Xd]||b[Ac]){if(b=d.alternate,d.child!==null||b!==null&&b.child!==null)for(l=Bhe(l);l!==null;){if(b=l[Ac])return b;l=Bhe(l)}return d}l=b,b=l.parentNode}return null}function IE(l){return l=l[Ac]||l[Xd],!l||l.tag!==5&&l.tag!==6&&l.tag!==13&&l.tag!==3?null:l}function xb(l){if(l.tag===5||l.tag===6)return l.stateNode;throw Error(c(33))}function uO(l){return l[AE]||null}var oz=[],Sb=-1;function ef(l){return{current:l}}function pi(l){0>Sb||(l.current=oz[Sb],oz[Sb]=null,Sb--)}function ri(l,d){Sb++,oz[Sb]=l.current,l.current=d}var tf={},us=ef(tf),oa=ef(!1),Gv=tf;function Eb(l,d){var b=l.type.contextTypes;if(!b)return tf;var P=l.stateNode;if(P&&P.__reactInternalMemoizedUnmaskedChildContext===d)return P.__reactInternalMemoizedMaskedChildContext;var B={},W;for(W in b)B[W]=d[W];return P&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=d,l.__reactInternalMemoizedMaskedChildContext=B),B}function sa(l){return l=l.childContextTypes,l!=null}function cO(){pi(oa),pi(us)}function Uhe(l,d,b){if(us.current!==tf)throw Error(c(168));ri(us,d),ri(oa,b)}function Vhe(l,d,b){var P=l.stateNode;if(d=d.childContextTypes,typeof P.getChildContext!="function")return b;P=P.getChildContext();for(var B in P)if(!(B in d))throw Error(c(108,bt(l)||"Unknown",B));return ue({},b,P)}function dO(l){return l=(l=l.stateNode)&&l.__reactInternalMemoizedMergedChildContext||tf,Gv=us.current,ri(us,l),ri(oa,oa.current),!0}function jhe(l,d,b){var P=l.stateNode;if(!P)throw Error(c(169));b?(l=Vhe(l,d,Gv),P.__reactInternalMemoizedMergedChildContext=l,pi(oa),pi(us),ri(us,l)):pi(oa),ri(oa,b)}var Yd=null,hO=!1,sz=!1;function zhe(l){Yd===null?Yd=[l]:Yd.push(l)}function FRe(l){hO=!0,zhe(l)}function nf(){if(!sz&&Yd!==null){sz=!0;var l=0,d=Vr;try{var b=Yd;for(Vr=1;l<b.length;l++){var P=b[l];do P=P(!0);while(P!==null)}Yd=null,hO=!1}catch(B){throw Yd!==null&&(Yd=Yd.slice(l+1)),Hde(Aj,nf),B}finally{Vr=d,sz=!1}}return null}var Cb=[],Pb=0,pO=null,fO=0,yl=[],bl=0,$v=null,Zd=1,Qd="";function Wv(l,d){Cb[Pb++]=fO,Cb[Pb++]=pO,pO=l,fO=d}function Hhe(l,d,b){yl[bl++]=Zd,yl[bl++]=Qd,yl[bl++]=$v,$v=l;var P=Zd;l=Qd;var B=32-_u(P)-1;P&=~(1<<B),b+=1;var W=32-_u(d)+B;if(30<W){var oe=B-B%5;W=(P&(1<<oe)-1).toString(32),P>>=oe,B-=oe,Zd=1<<32-_u(d)+B|b<<B|P,Qd=W+l}else Zd=1<<W|b<<B|P,Qd=l}function az(l){l.return!==null&&(Wv(l,1),Hhe(l,1,0))}function lz(l){for(;l===pO;)pO=Cb[--Pb],Cb[Pb]=null,fO=Cb[--Pb],Cb[Pb]=null;for(;l===$v;)$v=yl[--bl],yl[bl]=null,Qd=yl[--bl],yl[bl]=null,Zd=yl[--bl],yl[bl]=null}var Aa=null,Ia=null,vi=!1,xu=null;function Ghe(l,d){var b=Sl(5,null,null,0);b.elementType="DELETED",b.stateNode=d,b.return=l,d=l.deletions,d===null?(l.deletions=[b],l.flags|=16):d.push(b)}function $he(l,d){switch(l.tag){case 5:var b=l.type;return d=d.nodeType!==1||b.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(l.stateNode=d,Aa=l,Ia=Jp(d.firstChild),!0):!1;case 6:return d=l.pendingProps===""||d.nodeType!==3?null:d,d!==null?(l.stateNode=d,Aa=l,Ia=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(b=$v!==null?{id:Zd,overflow:Qd}:null,l.memoizedState={dehydrated:d,treeContext:b,retryLane:1073741824},b=Sl(18,null,null,0),b.stateNode=d,b.return=l,l.child=b,Aa=l,Ia=null,!0):!1;default:return!1}}function uz(l){return(l.mode&1)!==0&&(l.flags&128)===0}function cz(l){if(vi){var d=Ia;if(d){var b=d;if(!$he(l,d)){if(uz(l))throw Error(c(418));d=Jp(b.nextSibling);var P=Aa;d&&$he(l,d)?Ghe(P,b):(l.flags=l.flags&-4097|2,vi=!1,Aa=l)}}else{if(uz(l))throw Error(c(418));l.flags=l.flags&-4097|2,vi=!1,Aa=l}}}function Whe(l){for(l=l.return;l!==null&&l.tag!==5&&l.tag!==3&&l.tag!==13;)l=l.return;Aa=l}function mO(l){if(l!==Aa)return!1;if(!vi)return Whe(l),vi=!0,!1;var d;if((d=l.tag!==3)&&!(d=l.tag!==5)&&(d=l.type,d=d!=="head"&&d!=="body"&&!tz(l.type,l.memoizedProps)),d&&(d=Ia)){if(uz(l))throw Khe(),Error(c(418));for(;d;)Ghe(l,d),d=Jp(d.nextSibling)}if(Whe(l),l.tag===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(c(317));e:{for(l=l.nextSibling,d=0;l;){if(l.nodeType===8){var b=l.data;if(b==="/$"){if(d===0){Ia=Jp(l.nextSibling);break e}d--}else b!=="$"&&b!=="$!"&&b!=="$?"||d++}l=l.nextSibling}Ia=null}}else Ia=Aa?Jp(l.stateNode.nextSibling):null;return!0}function Khe(){for(var l=Ia;l;)l=Jp(l.nextSibling)}function kb(){Ia=Aa=null,vi=!1}function dz(l){xu===null?xu=[l]:xu.push(l)}var BRe=ne.ReactCurrentBatchConfig;function Su(l,d){if(l&&l.defaultProps){d=ue({},d),l=l.defaultProps;for(var b in l)d[b]===void 0&&(d[b]=l[b]);return d}return d}var vO=ef(null),gO=null,Tb=null,hz=null;function pz(){hz=Tb=gO=null}function fz(l){var d=vO.current;pi(vO),l._currentValue=d}function mz(l,d,b){for(;l!==null;){var P=l.alternate;if((l.childLanes&d)!==d?(l.childLanes|=d,P!==null&&(P.childLanes|=d)):P!==null&&(P.childLanes&d)!==d&&(P.childLanes|=d),l===b)break;l=l.return}}function Mb(l,d){gO=l,hz=Tb=null,l=l.dependencies,l!==null&&l.firstContext!==null&&(l.lanes&d&&(aa=!0),l.firstContext=null)}function _l(l){var d=l._currentValue;if(hz!==l)if(l={context:l,memoizedValue:d,next:null},Tb===null){if(gO===null)throw Error(c(308));Tb=l,gO.dependencies={lanes:0,firstContext:l}}else Tb=Tb.next=l;return d}var Kv=null;function vz(l){Kv===null?Kv=[l]:Kv.push(l)}function qhe(l,d,b,P){var B=d.interleaved;return B===null?(b.next=b,vz(d)):(b.next=B.next,B.next=b),d.interleaved=b,Jd(l,P)}function Jd(l,d){l.lanes|=d;var b=l.alternate;for(b!==null&&(b.lanes|=d),b=l,l=l.return;l!==null;)l.childLanes|=d,b=l.alternate,b!==null&&(b.childLanes|=d),b=l,l=l.return;return b.tag===3?b.stateNode:null}var rf=!1;function gz(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xhe(l,d){l=l.updateQueue,d.updateQueue===l&&(d.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,effects:l.effects})}function eh(l,d){return{eventTime:l,lane:d,tag:0,payload:null,callback:null,next:null}}function of(l,d,b){var P=l.updateQueue;if(P===null)return null;if(P=P.shared,yr&2){var B=P.pending;return B===null?d.next=d:(d.next=B.next,B.next=d),P.pending=d,Jd(l,b)}return B=P.interleaved,B===null?(d.next=d,vz(P)):(d.next=B.next,B.next=d),P.interleaved=d,Jd(l,b)}function yO(l,d,b){if(d=d.updateQueue,d!==null&&(d=d.shared,(b&4194240)!==0)){var P=d.lanes;P&=l.pendingLanes,b|=P,d.lanes=b,Oj(l,b)}}function Yhe(l,d){var b=l.updateQueue,P=l.alternate;if(P!==null&&(P=P.updateQueue,b===P)){var B=null,W=null;if(b=b.firstBaseUpdate,b!==null){do{var oe={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};W===null?B=W=oe:W=W.next=oe,b=b.next}while(b!==null);W===null?B=W=d:W=W.next=d}else B=W=d;b={baseState:P.baseState,firstBaseUpdate:B,lastBaseUpdate:W,shared:P.shared,effects:P.effects},l.updateQueue=b;return}l=b.lastBaseUpdate,l===null?b.firstBaseUpdate=d:l.next=d,b.lastBaseUpdate=d}function bO(l,d,b,P){var B=l.updateQueue;rf=!1;var W=B.firstBaseUpdate,oe=B.lastBaseUpdate,Ce=B.shared.pending;if(Ce!==null){B.shared.pending=null;var Oe=Ce,ct=Oe.next;Oe.next=null,oe===null?W=ct:oe.next=ct,oe=Oe;var Rt=l.alternate;Rt!==null&&(Rt=Rt.updateQueue,Ce=Rt.lastBaseUpdate,Ce!==oe&&(Ce===null?Rt.firstBaseUpdate=ct:Ce.next=ct,Rt.lastBaseUpdate=Oe))}if(W!==null){var Lt=B.baseState;oe=0,Rt=ct=Oe=null,Ce=W;do{var It=Ce.lane,nn=Ce.eventTime;if((P&It)===It){Rt!==null&&(Rt=Rt.next={eventTime:nn,lane:0,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null});e:{var dn=l,fn=Ce;switch(It=d,nn=b,fn.tag){case 1:if(dn=fn.payload,typeof dn=="function"){Lt=dn.call(nn,Lt,It);break e}Lt=dn;break e;case 3:dn.flags=dn.flags&-65537|128;case 0:if(dn=fn.payload,It=typeof dn=="function"?dn.call(nn,Lt,It):dn,It==null)break e;Lt=ue({},Lt,It);break e;case 2:rf=!0}}Ce.callback!==null&&Ce.lane!==0&&(l.flags|=64,It=B.effects,It===null?B.effects=[Ce]:It.push(Ce))}else nn={eventTime:nn,lane:It,tag:Ce.tag,payload:Ce.payload,callback:Ce.callback,next:null},Rt===null?(ct=Rt=nn,Oe=Lt):Rt=Rt.next=nn,oe|=It;if(Ce=Ce.next,Ce===null){if(Ce=B.shared.pending,Ce===null)break;It=Ce,Ce=It.next,It.next=null,B.lastBaseUpdate=It,B.shared.pending=null}}while(1);if(Rt===null&&(Oe=Lt),B.baseState=Oe,B.firstBaseUpdate=ct,B.lastBaseUpdate=Rt,d=B.shared.interleaved,d!==null){B=d;do oe|=B.lane,B=B.next;while(B!==d)}else W===null&&(B.shared.lanes=0);Yv|=oe,l.lanes=oe,l.memoizedState=Lt}}function Zhe(l,d,b){if(l=d.effects,d.effects=null,l!==null)for(d=0;d<l.length;d++){var P=l[d],B=P.callback;if(B!==null){if(P.callback=null,P=b,typeof B!="function")throw Error(c(191,B));B.call(P)}}}var Qhe=new s.Component().refs;function yz(l,d,b,P){d=l.memoizedState,b=b(P,d),b=b==null?d:ue({},d,b),l.memoizedState=b,l.lanes===0&&(l.updateQueue.baseState=b)}var _O={isMounted:function(l){return(l=l._reactInternals)?zv(l)===l:!1},enqueueSetState:function(l,d,b){l=l._reactInternals;var P=Ns(),B=uf(l),W=eh(P,B);W.payload=d,b!=null&&(W.callback=b),d=of(l,W,B),d!==null&&(Pu(d,l,B,P),yO(d,l,B))},enqueueReplaceState:function(l,d,b){l=l._reactInternals;var P=Ns(),B=uf(l),W=eh(P,B);W.tag=1,W.payload=d,b!=null&&(W.callback=b),d=of(l,W,B),d!==null&&(Pu(d,l,B,P),yO(d,l,B))},enqueueForceUpdate:function(l,d){l=l._reactInternals;var b=Ns(),P=uf(l),B=eh(b,P);B.tag=2,d!=null&&(B.callback=d),d=of(l,B,P),d!==null&&(Pu(d,l,P,b),yO(d,l,P))}};function Jhe(l,d,b,P,B,W,oe){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(P,W,oe):d.prototype&&d.prototype.isPureReactComponent?!CE(b,P)||!CE(B,W):!0}function epe(l,d,b){var P=!1,B=tf,W=d.contextType;return typeof W=="object"&&W!==null?W=_l(W):(B=sa(d)?Gv:us.current,P=d.contextTypes,W=(P=P!=null)?Eb(l,B):tf),d=new d(b,W),l.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=_O,l.stateNode=d,d._reactInternals=l,P&&(l=l.stateNode,l.__reactInternalMemoizedUnmaskedChildContext=B,l.__reactInternalMemoizedMaskedChildContext=W),d}function tpe(l,d,b,P){l=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(b,P),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(b,P),d.state!==l&&_O.enqueueReplaceState(d,d.state,null)}function bz(l,d,b,P){var B=l.stateNode;B.props=b,B.state=l.memoizedState,B.refs=Qhe,gz(l);var W=d.contextType;typeof W=="object"&&W!==null?B.context=_l(W):(W=sa(d)?Gv:us.current,B.context=Eb(l,W)),B.state=l.memoizedState,W=d.getDerivedStateFromProps,typeof W=="function"&&(yz(l,d,W,b),B.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(d=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),d!==B.state&&_O.enqueueReplaceState(B,B.state,null),bO(l,b,B,P),B.state=l.memoizedState),typeof B.componentDidMount=="function"&&(l.flags|=4194308)}function RE(l,d,b){if(l=b.ref,l!==null&&typeof l!="function"&&typeof l!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(c(309));var P=b.stateNode}if(!P)throw Error(c(147,l));var B=P,W=""+l;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===W?d.ref:(d=function(oe){var Ce=B.refs;Ce===Qhe&&(Ce=B.refs={}),oe===null?delete Ce[W]:Ce[W]=oe},d._stringRef=W,d)}if(typeof l!="string")throw Error(c(284));if(!b._owner)throw Error(c(290,l))}return l}function wO(l,d){throw l=Object.prototype.toString.call(d),Error(c(31,l==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":l))}function npe(l){var d=l._init;return d(l._payload)}function rpe(l){function d(Ye,Ve){if(l){var rt=Ye.deletions;rt===null?(Ye.deletions=[Ve],Ye.flags|=16):rt.push(Ve)}}function b(Ye,Ve){if(!l)return null;for(;Ve!==null;)d(Ye,Ve),Ve=Ve.sibling;return null}function P(Ye,Ve){for(Ye=new Map;Ve!==null;)Ve.key!==null?Ye.set(Ve.key,Ve):Ye.set(Ve.index,Ve),Ve=Ve.sibling;return Ye}function B(Ye,Ve){return Ye=df(Ye,Ve),Ye.index=0,Ye.sibling=null,Ye}function W(Ye,Ve,rt){return Ye.index=rt,l?(rt=Ye.alternate,rt!==null?(rt=rt.index,rt<Ve?(Ye.flags|=2,Ve):rt):(Ye.flags|=2,Ve)):(Ye.flags|=1048576,Ve)}function oe(Ye){return l&&Ye.alternate===null&&(Ye.flags|=2),Ye}function Ce(Ye,Ve,rt,zt){return Ve===null||Ve.tag!==6?(Ve=t6(rt,Ye.mode,zt),Ve.return=Ye,Ve):(Ve=B(Ve,rt),Ve.return=Ye,Ve)}function Oe(Ye,Ve,rt,zt){var vn=rt.type;return vn===fe?Rt(Ye,Ve,rt.props.children,zt,rt.key):Ve!==null&&(Ve.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===ke&&npe(vn)===Ve.type)?(zt=B(Ve,rt.props),zt.ref=RE(Ye,Ve,rt),zt.return=Ye,zt):(zt=VO(rt.type,rt.key,rt.props,null,Ye.mode,zt),zt.ref=RE(Ye,Ve,rt),zt.return=Ye,zt)}function ct(Ye,Ve,rt,zt){return Ve===null||Ve.tag!==4||Ve.stateNode.containerInfo!==rt.containerInfo||Ve.stateNode.implementation!==rt.implementation?(Ve=n6(rt,Ye.mode,zt),Ve.return=Ye,Ve):(Ve=B(Ve,rt.children||[]),Ve.return=Ye,Ve)}function Rt(Ye,Ve,rt,zt,vn){return Ve===null||Ve.tag!==7?(Ve=eg(rt,Ye.mode,zt,vn),Ve.return=Ye,Ve):(Ve=B(Ve,rt),Ve.return=Ye,Ve)}function Lt(Ye,Ve,rt){if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number")return Ve=t6(""+Ve,Ye.mode,rt),Ve.return=Ye,Ve;if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case ae:return rt=VO(Ve.type,Ve.key,Ve.props,null,Ye.mode,rt),rt.ref=RE(Ye,null,Ve),rt.return=Ye,rt;case Se:return Ve=n6(Ve,Ye.mode,rt),Ve.return=Ye,Ve;case ke:var zt=Ve._init;return Lt(Ye,zt(Ve._payload),rt)}if(Ct(Ve)||wt(Ve))return Ve=eg(Ve,Ye.mode,rt,null),Ve.return=Ye,Ve;wO(Ye,Ve)}return null}function It(Ye,Ve,rt,zt){var vn=Ve!==null?Ve.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number")return vn!==null?null:Ce(Ye,Ve,""+rt,zt);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case ae:return rt.key===vn?Oe(Ye,Ve,rt,zt):null;case Se:return rt.key===vn?ct(Ye,Ve,rt,zt):null;case ke:return vn=rt._init,It(Ye,Ve,vn(rt._payload),zt)}if(Ct(rt)||wt(rt))return vn!==null?null:Rt(Ye,Ve,rt,zt,null);wO(Ye,rt)}return null}function nn(Ye,Ve,rt,zt,vn){if(typeof zt=="string"&&zt!==""||typeof zt=="number")return Ye=Ye.get(rt)||null,Ce(Ve,Ye,""+zt,vn);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case ae:return Ye=Ye.get(zt.key===null?rt:zt.key)||null,Oe(Ve,Ye,zt,vn);case Se:return Ye=Ye.get(zt.key===null?rt:zt.key)||null,ct(Ve,Ye,zt,vn);case ke:var On=zt._init;return nn(Ye,Ve,rt,On(zt._payload),vn)}if(Ct(zt)||wt(zt))return Ye=Ye.get(rt)||null,Rt(Ve,Ye,zt,vn,null);wO(Ve,zt)}return null}function dn(Ye,Ve,rt,zt){for(var vn=null,On=null,Dn=Ve,Gn=Ve=0,ko=null;Dn!==null&&Gn<rt.length;Gn++){Dn.index>Gn?(ko=Dn,Dn=null):ko=Dn.sibling;var Cr=It(Ye,Dn,rt[Gn],zt);if(Cr===null){Dn===null&&(Dn=ko);break}l&&Dn&&Cr.alternate===null&&d(Ye,Dn),Ve=W(Cr,Ve,Gn),On===null?vn=Cr:On.sibling=Cr,On=Cr,Dn=ko}if(Gn===rt.length)return b(Ye,Dn),vi&&Wv(Ye,Gn),vn;if(Dn===null){for(;Gn<rt.length;Gn++)Dn=Lt(Ye,rt[Gn],zt),Dn!==null&&(Ve=W(Dn,Ve,Gn),On===null?vn=Dn:On.sibling=Dn,On=Dn);return vi&&Wv(Ye,Gn),vn}for(Dn=P(Ye,Dn);Gn<rt.length;Gn++)ko=nn(Dn,Ye,Gn,rt[Gn],zt),ko!==null&&(l&&ko.alternate!==null&&Dn.delete(ko.key===null?Gn:ko.key),Ve=W(ko,Ve,Gn),On===null?vn=ko:On.sibling=ko,On=ko);return l&&Dn.forEach(function(hf){return d(Ye,hf)}),vi&&Wv(Ye,Gn),vn}function fn(Ye,Ve,rt,zt){var vn=wt(rt);if(typeof vn!="function")throw Error(c(150));if(rt=vn.call(rt),rt==null)throw Error(c(151));for(var On=vn=null,Dn=Ve,Gn=Ve=0,ko=null,Cr=rt.next();Dn!==null&&!Cr.done;Gn++,Cr=rt.next()){Dn.index>Gn?(ko=Dn,Dn=null):ko=Dn.sibling;var hf=It(Ye,Dn,Cr.value,zt);if(hf===null){Dn===null&&(Dn=ko);break}l&&Dn&&hf.alternate===null&&d(Ye,Dn),Ve=W(hf,Ve,Gn),On===null?vn=hf:On.sibling=hf,On=hf,Dn=ko}if(Cr.done)return b(Ye,Dn),vi&&Wv(Ye,Gn),vn;if(Dn===null){for(;!Cr.done;Gn++,Cr=rt.next())Cr=Lt(Ye,Cr.value,zt),Cr!==null&&(Ve=W(Cr,Ve,Gn),On===null?vn=Cr:On.sibling=Cr,On=Cr);return vi&&Wv(Ye,Gn),vn}for(Dn=P(Ye,Dn);!Cr.done;Gn++,Cr=rt.next())Cr=nn(Dn,Ye,Gn,Cr.value,zt),Cr!==null&&(l&&Cr.alternate!==null&&Dn.delete(Cr.key===null?Gn:Cr.key),Ve=W(Cr,Ve,Gn),On===null?vn=Cr:On.sibling=Cr,On=Cr);return l&&Dn.forEach(function(gOe){return d(Ye,gOe)}),vi&&Wv(Ye,Gn),vn}function Zi(Ye,Ve,rt,zt){if(typeof rt=="object"&&rt!==null&&rt.type===fe&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case ae:e:{for(var vn=rt.key,On=Ve;On!==null;){if(On.key===vn){if(vn=rt.type,vn===fe){if(On.tag===7){b(Ye,On.sibling),Ve=B(On,rt.props.children),Ve.return=Ye,Ye=Ve;break e}}else if(On.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===ke&&npe(vn)===On.type){b(Ye,On.sibling),Ve=B(On,rt.props),Ve.ref=RE(Ye,On,rt),Ve.return=Ye,Ye=Ve;break e}b(Ye,On);break}else d(Ye,On);On=On.sibling}rt.type===fe?(Ve=eg(rt.props.children,Ye.mode,zt,rt.key),Ve.return=Ye,Ye=Ve):(zt=VO(rt.type,rt.key,rt.props,null,Ye.mode,zt),zt.ref=RE(Ye,Ve,rt),zt.return=Ye,Ye=zt)}return oe(Ye);case Se:e:{for(On=rt.key;Ve!==null;){if(Ve.key===On)if(Ve.tag===4&&Ve.stateNode.containerInfo===rt.containerInfo&&Ve.stateNode.implementation===rt.implementation){b(Ye,Ve.sibling),Ve=B(Ve,rt.children||[]),Ve.return=Ye,Ye=Ve;break e}else{b(Ye,Ve);break}else d(Ye,Ve);Ve=Ve.sibling}Ve=n6(rt,Ye.mode,zt),Ve.return=Ye,Ye=Ve}return oe(Ye);case ke:return On=rt._init,Zi(Ye,Ve,On(rt._payload),zt)}if(Ct(rt))return dn(Ye,Ve,rt,zt);if(wt(rt))return fn(Ye,Ve,rt,zt);wO(Ye,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"?(rt=""+rt,Ve!==null&&Ve.tag===6?(b(Ye,Ve.sibling),Ve=B(Ve,rt),Ve.return=Ye,Ye=Ve):(b(Ye,Ve),Ve=t6(rt,Ye.mode,zt),Ve.return=Ye,Ye=Ve),oe(Ye)):b(Ye,Ve)}return Zi}var Ab=rpe(!0),ipe=rpe(!1),OE={},Ic=ef(OE),DE=ef(OE),LE=ef(OE);function qv(l){if(l===OE)throw Error(c(174));return l}function _z(l,d){switch(ri(LE,d),ri(DE,l),ri(Ic,OE),l=d.nodeType,l){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:Hn(null,"");break;default:l=l===8?d.parentNode:d,d=l.namespaceURI||null,l=l.tagName,d=Hn(d,l)}pi(Ic),ri(Ic,d)}function Ib(){pi(Ic),pi(DE),pi(LE)}function ope(l){qv(LE.current);var d=qv(Ic.current),b=Hn(d,l.type);d!==b&&(ri(DE,l),ri(Ic,b))}function wz(l){DE.current===l&&(pi(Ic),pi(DE))}var Ci=ef(0);function xO(l){for(var d=l;d!==null;){if(d.tag===13){var b=d.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||b.data==="$?"||b.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var xz=[];function Sz(){for(var l=0;l<xz.length;l++)xz[l]._workInProgressVersionPrimary=null;xz.length=0}var SO=ne.ReactCurrentDispatcher,Ez=ne.ReactCurrentBatchConfig,Xv=0,Pi=null,po=null,Co=null,EO=!1,NE=!1,FE=0,URe=0;function cs(){throw Error(c(321))}function Cz(l,d){if(d===null)return!1;for(var b=0;b<d.length&&b<l.length;b++)if(!wu(l[b],d[b]))return!1;return!0}function Pz(l,d,b,P,B,W){if(Xv=W,Pi=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,SO.current=l===null||l.memoizedState===null?HRe:GRe,l=b(P,B),NE){W=0;do{if(NE=!1,FE=0,25<=W)throw Error(c(301));W+=1,Co=po=null,d.updateQueue=null,SO.current=$Re,l=b(P,B)}while(NE)}if(SO.current=kO,d=po!==null&&po.next!==null,Xv=0,Co=po=Pi=null,EO=!1,d)throw Error(c(300));return l}function kz(){var l=FE!==0;return FE=0,l}function Rc(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Co===null?Pi.memoizedState=Co=l:Co=Co.next=l,Co}function wl(){if(po===null){var l=Pi.alternate;l=l!==null?l.memoizedState:null}else l=po.next;var d=Co===null?Pi.memoizedState:Co.next;if(d!==null)Co=d,po=l;else{if(l===null)throw Error(c(310));po=l,l={memoizedState:po.memoizedState,baseState:po.baseState,baseQueue:po.baseQueue,queue:po.queue,next:null},Co===null?Pi.memoizedState=Co=l:Co=Co.next=l}return Co}function BE(l,d){return typeof d=="function"?d(l):d}function Tz(l){var d=wl(),b=d.queue;if(b===null)throw Error(c(311));b.lastRenderedReducer=l;var P=po,B=P.baseQueue,W=b.pending;if(W!==null){if(B!==null){var oe=B.next;B.next=W.next,W.next=oe}P.baseQueue=B=W,b.pending=null}if(B!==null){W=B.next,P=P.baseState;var Ce=oe=null,Oe=null,ct=W;do{var Rt=ct.lane;if((Xv&Rt)===Rt)Oe!==null&&(Oe=Oe.next={lane:0,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null}),P=ct.hasEagerState?ct.eagerState:l(P,ct.action);else{var Lt={lane:Rt,action:ct.action,hasEagerState:ct.hasEagerState,eagerState:ct.eagerState,next:null};Oe===null?(Ce=Oe=Lt,oe=P):Oe=Oe.next=Lt,Pi.lanes|=Rt,Yv|=Rt}ct=ct.next}while(ct!==null&&ct!==W);Oe===null?oe=P:Oe.next=Ce,wu(P,d.memoizedState)||(aa=!0),d.memoizedState=P,d.baseState=oe,d.baseQueue=Oe,b.lastRenderedState=P}if(l=b.interleaved,l!==null){B=l;do W=B.lane,Pi.lanes|=W,Yv|=W,B=B.next;while(B!==l)}else B===null&&(b.lanes=0);return[d.memoizedState,b.dispatch]}function Mz(l){var d=wl(),b=d.queue;if(b===null)throw Error(c(311));b.lastRenderedReducer=l;var P=b.dispatch,B=b.pending,W=d.memoizedState;if(B!==null){b.pending=null;var oe=B=B.next;do W=l(W,oe.action),oe=oe.next;while(oe!==B);wu(W,d.memoizedState)||(aa=!0),d.memoizedState=W,d.baseQueue===null&&(d.baseState=W),b.lastRenderedState=W}return[W,P]}function spe(){}function ape(l,d){var b=Pi,P=wl(),B=d(),W=!wu(P.memoizedState,B);if(W&&(P.memoizedState=B,aa=!0),P=P.queue,Az(cpe.bind(null,b,P,l),[l]),P.getSnapshot!==d||W||Co!==null&&Co.memoizedState.tag&1){if(b.flags|=2048,UE(9,upe.bind(null,b,P,B,d),void 0,null),Po===null)throw Error(c(349));Xv&30||lpe(b,d,B)}return B}function lpe(l,d,b){l.flags|=16384,l={getSnapshot:d,value:b},d=Pi.updateQueue,d===null?(d={lastEffect:null,stores:null},Pi.updateQueue=d,d.stores=[l]):(b=d.stores,b===null?d.stores=[l]:b.push(l))}function upe(l,d,b,P){d.value=b,d.getSnapshot=P,dpe(d)&&hpe(l)}function cpe(l,d,b){return b(function(){dpe(d)&&hpe(l)})}function dpe(l){var d=l.getSnapshot;l=l.value;try{var b=d();return!wu(l,b)}catch{return!0}}function hpe(l){var d=Jd(l,1);d!==null&&Pu(d,l,1,-1)}function ppe(l){var d=Rc();return typeof l=="function"&&(l=l()),d.memoizedState=d.baseState=l,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:BE,lastRenderedState:l},d.queue=l,l=l.dispatch=zRe.bind(null,Pi,l),[d.memoizedState,l]}function UE(l,d,b,P){return l={tag:l,create:d,destroy:b,deps:P,next:null},d=Pi.updateQueue,d===null?(d={lastEffect:null,stores:null},Pi.updateQueue=d,d.lastEffect=l.next=l):(b=d.lastEffect,b===null?d.lastEffect=l.next=l:(P=b.next,b.next=l,l.next=P,d.lastEffect=l)),l}function fpe(){return wl().memoizedState}function CO(l,d,b,P){var B=Rc();Pi.flags|=l,B.memoizedState=UE(1|d,b,void 0,P===void 0?null:P)}function PO(l,d,b,P){var B=wl();P=P===void 0?null:P;var W=void 0;if(po!==null){var oe=po.memoizedState;if(W=oe.destroy,P!==null&&Cz(P,oe.deps)){B.memoizedState=UE(d,b,W,P);return}}Pi.flags|=l,B.memoizedState=UE(1|d,b,W,P)}function mpe(l,d){return CO(8390656,8,l,d)}function Az(l,d){return PO(2048,8,l,d)}function vpe(l,d){return PO(4,2,l,d)}function gpe(l,d){return PO(4,4,l,d)}function ype(l,d){if(typeof d=="function")return l=l(),d(l),function(){d(null)};if(d!=null)return l=l(),d.current=l,function(){d.current=null}}function bpe(l,d,b){return b=b!=null?b.concat([l]):null,PO(4,4,ype.bind(null,d,l),b)}function Iz(){}function _pe(l,d){var b=wl();d=d===void 0?null:d;var P=b.memoizedState;return P!==null&&d!==null&&Cz(d,P[1])?P[0]:(b.memoizedState=[l,d],l)}function wpe(l,d){var b=wl();d=d===void 0?null:d;var P=b.memoizedState;return P!==null&&d!==null&&Cz(d,P[1])?P[0]:(l=l(),b.memoizedState=[l,d],l)}function xpe(l,d,b){return Xv&21?(wu(b,d)||(b=Kde(),Pi.lanes|=b,Yv|=b,l.baseState=!0),d):(l.baseState&&(l.baseState=!1,aa=!0),l.memoizedState=b)}function VRe(l,d){var b=Vr;Vr=b!==0&&4>b?b:4,l(!0);var P=Ez.transition;Ez.transition={};try{l(!1),d()}finally{Vr=b,Ez.transition=P}}function Spe(){return wl().memoizedState}function jRe(l,d,b){var P=uf(l);if(b={lane:P,action:b,hasEagerState:!1,eagerState:null,next:null},Epe(l))Cpe(d,b);else if(b=qhe(l,d,b,P),b!==null){var B=Ns();Pu(b,l,P,B),Ppe(b,d,P)}}function zRe(l,d,b){var P=uf(l),B={lane:P,action:b,hasEagerState:!1,eagerState:null,next:null};if(Epe(l))Cpe(d,B);else{var W=l.alternate;if(l.lanes===0&&(W===null||W.lanes===0)&&(W=d.lastRenderedReducer,W!==null))try{var oe=d.lastRenderedState,Ce=W(oe,b);if(B.hasEagerState=!0,B.eagerState=Ce,wu(Ce,oe)){var Oe=d.interleaved;Oe===null?(B.next=B,vz(d)):(B.next=Oe.next,Oe.next=B),d.interleaved=B;return}}catch{}finally{}b=qhe(l,d,B,P),b!==null&&(B=Ns(),Pu(b,l,P,B),Ppe(b,d,P))}}function Epe(l){var d=l.alternate;return l===Pi||d!==null&&d===Pi}function Cpe(l,d){NE=EO=!0;var b=l.pending;b===null?d.next=d:(d.next=b.next,b.next=d),l.pending=d}function Ppe(l,d,b){if(b&4194240){var P=d.lanes;P&=l.pendingLanes,b|=P,d.lanes=b,Oj(l,b)}}var kO={readContext:_l,useCallback:cs,useContext:cs,useEffect:cs,useImperativeHandle:cs,useInsertionEffect:cs,useLayoutEffect:cs,useMemo:cs,useReducer:cs,useRef:cs,useState:cs,useDebugValue:cs,useDeferredValue:cs,useTransition:cs,useMutableSource:cs,useSyncExternalStore:cs,useId:cs,unstable_isNewReconciler:!1},HRe={readContext:_l,useCallback:function(l,d){return Rc().memoizedState=[l,d===void 0?null:d],l},useContext:_l,useEffect:mpe,useImperativeHandle:function(l,d,b){return b=b!=null?b.concat([l]):null,CO(4194308,4,ype.bind(null,d,l),b)},useLayoutEffect:function(l,d){return CO(4194308,4,l,d)},useInsertionEffect:function(l,d){return CO(4,2,l,d)},useMemo:function(l,d){var b=Rc();return d=d===void 0?null:d,l=l(),b.memoizedState=[l,d],l},useReducer:function(l,d,b){var P=Rc();return d=b!==void 0?b(d):d,P.memoizedState=P.baseState=d,l={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:d},P.queue=l,l=l.dispatch=jRe.bind(null,Pi,l),[P.memoizedState,l]},useRef:function(l){var d=Rc();return l={current:l},d.memoizedState=l},useState:ppe,useDebugValue:Iz,useDeferredValue:function(l){return Rc().memoizedState=l},useTransition:function(){var l=ppe(!1),d=l[0];return l=VRe.bind(null,l[1]),Rc().memoizedState=l,[d,l]},useMutableSource:function(){},useSyncExternalStore:function(l,d,b){var P=Pi,B=Rc();if(vi){if(b===void 0)throw Error(c(407));b=b()}else{if(b=d(),Po===null)throw Error(c(349));Xv&30||lpe(P,d,b)}B.memoizedState=b;var W={value:b,getSnapshot:d};return B.queue=W,mpe(cpe.bind(null,P,W,l),[l]),P.flags|=2048,UE(9,upe.bind(null,P,W,b,d),void 0,null),b},useId:function(){var l=Rc(),d=Po.identifierPrefix;if(vi){var b=Qd,P=Zd;b=(P&~(1<<32-_u(P)-1)).toString(32)+b,d=":"+d+"R"+b,b=FE++,0<b&&(d+="H"+b.toString(32)),d+=":"}else b=URe++,d=":"+d+"r"+b.toString(32)+":";return l.memoizedState=d},unstable_isNewReconciler:!1},GRe={readContext:_l,useCallback:_pe,useContext:_l,useEffect:Az,useImperativeHandle:bpe,useInsertionEffect:vpe,useLayoutEffect:gpe,useMemo:wpe,useReducer:Tz,useRef:fpe,useState:function(){return Tz(BE)},useDebugValue:Iz,useDeferredValue:function(l){var d=wl();return xpe(d,po.memoizedState,l)},useTransition:function(){var l=Tz(BE)[0],d=wl().memoizedState;return[l,d]},useMutableSource:spe,useSyncExternalStore:ape,useId:Spe,unstable_isNewReconciler:!1},$Re={readContext:_l,useCallback:_pe,useContext:_l,useEffect:Az,useImperativeHandle:bpe,useInsertionEffect:vpe,useLayoutEffect:gpe,useMemo:wpe,useReducer:Mz,useRef:fpe,useState:function(){return Mz(BE)},useDebugValue:Iz,useDeferredValue:function(l){var d=wl();return po===null?d.memoizedState=l:xpe(d,po.memoizedState,l)},useTransition:function(){var l=Mz(BE)[0],d=wl().memoizedState;return[l,d]},useMutableSource:spe,useSyncExternalStore:ape,useId:Spe,unstable_isNewReconciler:!1};function Rb(l,d){try{var b="",P=d;do b+=ze(P),P=P.return;while(P);var B=b}catch(W){B=`
Error generating stack: `+W.message+`
`+W.stack}return{value:l,source:d,stack:B,digest:null}}function Rz(l,d,b){return{value:l,source:null,stack:b??null,digest:d??null}}function Oz(l,d){try{console.error(d.value)}catch(b){setTimeout(function(){throw b})}}var WRe=typeof WeakMap=="function"?WeakMap:Map;function kpe(l,d,b){b=eh(-1,b),b.tag=3,b.payload={element:null};var P=d.value;return b.callback=function(){DO||(DO=!0,Kz=P),Oz(l,d)},b}function Tpe(l,d,b){b=eh(-1,b),b.tag=3;var P=l.type.getDerivedStateFromError;if(typeof P=="function"){var B=d.value;b.payload=function(){return P(B)},b.callback=function(){Oz(l,d)}}var W=l.stateNode;return W!==null&&typeof W.componentDidCatch=="function"&&(b.callback=function(){Oz(l,d),typeof P!="function"&&(af===null?af=new Set([this]):af.add(this));var oe=d.stack;this.componentDidCatch(d.value,{componentStack:oe!==null?oe:""})}),b}function Mpe(l,d,b){var P=l.pingCache;if(P===null){P=l.pingCache=new WRe;var B=new Set;P.set(d,B)}else B=P.get(d),B===void 0&&(B=new Set,P.set(d,B));B.has(b)||(B.add(b),l=sOe.bind(null,l,d,b),d.then(l,l))}function Ape(l){do{var d;if((d=l.tag===13)&&(d=l.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return l;l=l.return}while(l!==null);return null}function Ipe(l,d,b,P,B){return l.mode&1?(l.flags|=65536,l.lanes=B,l):(l===d?l.flags|=65536:(l.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(d=eh(-1,1),d.tag=2,of(b,d,1))),b.lanes|=1),l)}var KRe=ne.ReactCurrentOwner,aa=!1;function Ls(l,d,b,P){d.child=l===null?ipe(d,null,b,P):Ab(d,l.child,b,P)}function Rpe(l,d,b,P,B){b=b.render;var W=d.ref;return Mb(d,B),P=Pz(l,d,b,P,W,B),b=kz(),l!==null&&!aa?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~B,th(l,d,B)):(vi&&b&&az(d),d.flags|=1,Ls(l,d,P,B),d.child)}function Ope(l,d,b,P,B){if(l===null){var W=b.type;return typeof W=="function"&&!e6(W)&&W.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(d.tag=15,d.type=W,Dpe(l,d,W,P,B)):(l=VO(b.type,null,P,d,d.mode,B),l.ref=d.ref,l.return=d,d.child=l)}if(W=l.child,!(l.lanes&B)){var oe=W.memoizedProps;if(b=b.compare,b=b!==null?b:CE,b(oe,P)&&l.ref===d.ref)return th(l,d,B)}return d.flags|=1,l=df(W,P),l.ref=d.ref,l.return=d,d.child=l}function Dpe(l,d,b,P,B){if(l!==null){var W=l.memoizedProps;if(CE(W,P)&&l.ref===d.ref)if(aa=!1,d.pendingProps=P=W,(l.lanes&B)!==0)l.flags&131072&&(aa=!0);else return d.lanes=l.lanes,th(l,d,B)}return Dz(l,d,b,P,B)}function Lpe(l,d,b){var P=d.pendingProps,B=P.children,W=l!==null?l.memoizedState:null;if(P.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},ri(Db,Ra),Ra|=b;else{if(!(b&1073741824))return l=W!==null?W.baseLanes|b:b,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:l,cachePool:null,transitions:null},d.updateQueue=null,ri(Db,Ra),Ra|=l,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},P=W!==null?W.baseLanes:b,ri(Db,Ra),Ra|=P}else W!==null?(P=W.baseLanes|b,d.memoizedState=null):P=b,ri(Db,Ra),Ra|=P;return Ls(l,d,B,b),d.child}function Npe(l,d){var b=d.ref;(l===null&&b!==null||l!==null&&l.ref!==b)&&(d.flags|=512,d.flags|=2097152)}function Dz(l,d,b,P,B){var W=sa(b)?Gv:us.current;return W=Eb(d,W),Mb(d,B),b=Pz(l,d,b,P,W,B),P=kz(),l!==null&&!aa?(d.updateQueue=l.updateQueue,d.flags&=-2053,l.lanes&=~B,th(l,d,B)):(vi&&P&&az(d),d.flags|=1,Ls(l,d,b,B),d.child)}function Fpe(l,d,b,P,B){if(sa(b)){var W=!0;dO(d)}else W=!1;if(Mb(d,B),d.stateNode===null)MO(l,d),epe(d,b,P),bz(d,b,P,B),P=!0;else if(l===null){var oe=d.stateNode,Ce=d.memoizedProps;oe.props=Ce;var Oe=oe.context,ct=b.contextType;typeof ct=="object"&&ct!==null?ct=_l(ct):(ct=sa(b)?Gv:us.current,ct=Eb(d,ct));var Rt=b.getDerivedStateFromProps,Lt=typeof Rt=="function"||typeof oe.getSnapshotBeforeUpdate=="function";Lt||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Ce!==P||Oe!==ct)&&tpe(d,oe,P,ct),rf=!1;var It=d.memoizedState;oe.state=It,bO(d,P,oe,B),Oe=d.memoizedState,Ce!==P||It!==Oe||oa.current||rf?(typeof Rt=="function"&&(yz(d,b,Rt,P),Oe=d.memoizedState),(Ce=rf||Jhe(d,b,Ce,P,It,Oe,ct))?(Lt||typeof oe.UNSAFE_componentWillMount!="function"&&typeof oe.componentWillMount!="function"||(typeof oe.componentWillMount=="function"&&oe.componentWillMount(),typeof oe.UNSAFE_componentWillMount=="function"&&oe.UNSAFE_componentWillMount()),typeof oe.componentDidMount=="function"&&(d.flags|=4194308)):(typeof oe.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=P,d.memoizedState=Oe),oe.props=P,oe.state=Oe,oe.context=ct,P=Ce):(typeof oe.componentDidMount=="function"&&(d.flags|=4194308),P=!1)}else{oe=d.stateNode,Xhe(l,d),Ce=d.memoizedProps,ct=d.type===d.elementType?Ce:Su(d.type,Ce),oe.props=ct,Lt=d.pendingProps,It=oe.context,Oe=b.contextType,typeof Oe=="object"&&Oe!==null?Oe=_l(Oe):(Oe=sa(b)?Gv:us.current,Oe=Eb(d,Oe));var nn=b.getDerivedStateFromProps;(Rt=typeof nn=="function"||typeof oe.getSnapshotBeforeUpdate=="function")||typeof oe.UNSAFE_componentWillReceiveProps!="function"&&typeof oe.componentWillReceiveProps!="function"||(Ce!==Lt||It!==Oe)&&tpe(d,oe,P,Oe),rf=!1,It=d.memoizedState,oe.state=It,bO(d,P,oe,B);var dn=d.memoizedState;Ce!==Lt||It!==dn||oa.current||rf?(typeof nn=="function"&&(yz(d,b,nn,P),dn=d.memoizedState),(ct=rf||Jhe(d,b,ct,P,It,dn,Oe)||!1)?(Rt||typeof oe.UNSAFE_componentWillUpdate!="function"&&typeof oe.componentWillUpdate!="function"||(typeof oe.componentWillUpdate=="function"&&oe.componentWillUpdate(P,dn,Oe),typeof oe.UNSAFE_componentWillUpdate=="function"&&oe.UNSAFE_componentWillUpdate(P,dn,Oe)),typeof oe.componentDidUpdate=="function"&&(d.flags|=4),typeof oe.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof oe.componentDidUpdate!="function"||Ce===l.memoizedProps&&It===l.memoizedState||(d.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Ce===l.memoizedProps&&It===l.memoizedState||(d.flags|=1024),d.memoizedProps=P,d.memoizedState=dn),oe.props=P,oe.state=dn,oe.context=Oe,P=ct):(typeof oe.componentDidUpdate!="function"||Ce===l.memoizedProps&&It===l.memoizedState||(d.flags|=4),typeof oe.getSnapshotBeforeUpdate!="function"||Ce===l.memoizedProps&&It===l.memoizedState||(d.flags|=1024),P=!1)}return Lz(l,d,b,P,W,B)}function Lz(l,d,b,P,B,W){Npe(l,d);var oe=(d.flags&128)!==0;if(!P&&!oe)return B&&jhe(d,b,!1),th(l,d,W);P=d.stateNode,KRe.current=d;var Ce=oe&&typeof b.getDerivedStateFromError!="function"?null:P.render();return d.flags|=1,l!==null&&oe?(d.child=Ab(d,l.child,null,W),d.child=Ab(d,null,Ce,W)):Ls(l,d,Ce,W),d.memoizedState=P.state,B&&jhe(d,b,!0),d.child}function Bpe(l){var d=l.stateNode;d.pendingContext?Uhe(l,d.pendingContext,d.pendingContext!==d.context):d.context&&Uhe(l,d.context,!1),_z(l,d.containerInfo)}function Upe(l,d,b,P,B){return kb(),dz(B),d.flags|=256,Ls(l,d,b,P),d.child}var Nz={dehydrated:null,treeContext:null,retryLane:0};function Fz(l){return{baseLanes:l,cachePool:null,transitions:null}}function Vpe(l,d,b){var P=d.pendingProps,B=Ci.current,W=!1,oe=(d.flags&128)!==0,Ce;if((Ce=oe)||(Ce=l!==null&&l.memoizedState===null?!1:(B&2)!==0),Ce?(W=!0,d.flags&=-129):(l===null||l.memoizedState!==null)&&(B|=1),ri(Ci,B&1),l===null)return cz(d),l=d.memoizedState,l!==null&&(l=l.dehydrated,l!==null)?(d.mode&1?l.data==="$!"?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(oe=P.children,l=P.fallback,W?(P=d.mode,W=d.child,oe={mode:"hidden",children:oe},!(P&1)&&W!==null?(W.childLanes=0,W.pendingProps=oe):W=jO(oe,P,0,null),l=eg(l,P,b,null),W.return=d,l.return=d,W.sibling=l,d.child=W,d.child.memoizedState=Fz(b),d.memoizedState=Nz,l):Bz(d,oe));if(B=l.memoizedState,B!==null&&(Ce=B.dehydrated,Ce!==null))return qRe(l,d,oe,P,Ce,B,b);if(W){W=P.fallback,oe=d.mode,B=l.child,Ce=B.sibling;var Oe={mode:"hidden",children:P.children};return!(oe&1)&&d.child!==B?(P=d.child,P.childLanes=0,P.pendingProps=Oe,d.deletions=null):(P=df(B,Oe),P.subtreeFlags=B.subtreeFlags&14680064),Ce!==null?W=df(Ce,W):(W=eg(W,oe,b,null),W.flags|=2),W.return=d,P.return=d,P.sibling=W,d.child=P,P=W,W=d.child,oe=l.child.memoizedState,oe=oe===null?Fz(b):{baseLanes:oe.baseLanes|b,cachePool:null,transitions:oe.transitions},W.memoizedState=oe,W.childLanes=l.childLanes&~b,d.memoizedState=Nz,P}return W=l.child,l=W.sibling,P=df(W,{mode:"visible",children:P.children}),!(d.mode&1)&&(P.lanes=b),P.return=d,P.sibling=null,l!==null&&(b=d.deletions,b===null?(d.deletions=[l],d.flags|=16):b.push(l)),d.child=P,d.memoizedState=null,P}function Bz(l,d){return d=jO({mode:"visible",children:d},l.mode,0,null),d.return=l,l.child=d}function TO(l,d,b,P){return P!==null&&dz(P),Ab(d,l.child,null,b),l=Bz(d,d.pendingProps.children),l.flags|=2,d.memoizedState=null,l}function qRe(l,d,b,P,B,W,oe){if(b)return d.flags&256?(d.flags&=-257,P=Rz(Error(c(422))),TO(l,d,oe,P)):d.memoizedState!==null?(d.child=l.child,d.flags|=128,null):(W=P.fallback,B=d.mode,P=jO({mode:"visible",children:P.children},B,0,null),W=eg(W,B,oe,null),W.flags|=2,P.return=d,W.return=d,P.sibling=W,d.child=P,d.mode&1&&Ab(d,l.child,null,oe),d.child.memoizedState=Fz(oe),d.memoizedState=Nz,W);if(!(d.mode&1))return TO(l,d,oe,null);if(B.data==="$!"){if(P=B.nextSibling&&B.nextSibling.dataset,P)var Ce=P.dgst;return P=Ce,W=Error(c(419)),P=Rz(W,P,void 0),TO(l,d,oe,P)}if(Ce=(oe&l.childLanes)!==0,aa||Ce){if(P=Po,P!==null){switch(oe&-oe){case 4:B=2;break;case 16:B=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:B=32;break;case 536870912:B=268435456;break;default:B=0}B=B&(P.suspendedLanes|oe)?0:B,B!==0&&B!==W.retryLane&&(W.retryLane=B,Jd(l,B),Pu(P,l,B,-1))}return Jz(),P=Rz(Error(c(421))),TO(l,d,oe,P)}return B.data==="$?"?(d.flags|=128,d.child=l.child,d=aOe.bind(null,l),B._reactRetry=d,null):(l=W.treeContext,Ia=Jp(B.nextSibling),Aa=d,vi=!0,xu=null,l!==null&&(yl[bl++]=Zd,yl[bl++]=Qd,yl[bl++]=$v,Zd=l.id,Qd=l.overflow,$v=d),d=Bz(d,P.children),d.flags|=4096,d)}function jpe(l,d,b){l.lanes|=d;var P=l.alternate;P!==null&&(P.lanes|=d),mz(l.return,d,b)}function Uz(l,d,b,P,B){var W=l.memoizedState;W===null?l.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:P,tail:b,tailMode:B}:(W.isBackwards=d,W.rendering=null,W.renderingStartTime=0,W.last=P,W.tail=b,W.tailMode=B)}function zpe(l,d,b){var P=d.pendingProps,B=P.revealOrder,W=P.tail;if(Ls(l,d,P.children,b),P=Ci.current,P&2)P=P&1|2,d.flags|=128;else{if(l!==null&&l.flags&128)e:for(l=d.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&jpe(l,b,d);else if(l.tag===19)jpe(l,b,d);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===d)break e;for(;l.sibling===null;){if(l.return===null||l.return===d)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}P&=1}if(ri(Ci,P),!(d.mode&1))d.memoizedState=null;else switch(B){case"forwards":for(b=d.child,B=null;b!==null;)l=b.alternate,l!==null&&xO(l)===null&&(B=b),b=b.sibling;b=B,b===null?(B=d.child,d.child=null):(B=b.sibling,b.sibling=null),Uz(d,!1,B,b,W);break;case"backwards":for(b=null,B=d.child,d.child=null;B!==null;){if(l=B.alternate,l!==null&&xO(l)===null){d.child=B;break}l=B.sibling,B.sibling=b,b=B,B=l}Uz(d,!0,b,null,W);break;case"together":Uz(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function MO(l,d){!(d.mode&1)&&l!==null&&(l.alternate=null,d.alternate=null,d.flags|=2)}function th(l,d,b){if(l!==null&&(d.dependencies=l.dependencies),Yv|=d.lanes,!(b&d.childLanes))return null;if(l!==null&&d.child!==l.child)throw Error(c(153));if(d.child!==null){for(l=d.child,b=df(l,l.pendingProps),d.child=b,b.return=d;l.sibling!==null;)l=l.sibling,b=b.sibling=df(l,l.pendingProps),b.return=d;b.sibling=null}return d.child}function XRe(l,d,b){switch(d.tag){case 3:Bpe(d),kb();break;case 5:ope(d);break;case 1:sa(d.type)&&dO(d);break;case 4:_z(d,d.stateNode.containerInfo);break;case 10:var P=d.type._context,B=d.memoizedProps.value;ri(vO,P._currentValue),P._currentValue=B;break;case 13:if(P=d.memoizedState,P!==null)return P.dehydrated!==null?(ri(Ci,Ci.current&1),d.flags|=128,null):b&d.child.childLanes?Vpe(l,d,b):(ri(Ci,Ci.current&1),l=th(l,d,b),l!==null?l.sibling:null);ri(Ci,Ci.current&1);break;case 19:if(P=(b&d.childLanes)!==0,l.flags&128){if(P)return zpe(l,d,b);d.flags|=128}if(B=d.memoizedState,B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),ri(Ci,Ci.current),P)break;return null;case 22:case 23:return d.lanes=0,Lpe(l,d,b)}return th(l,d,b)}var Hpe,Vz,Gpe,$pe;Hpe=function(l,d){for(var b=d.child;b!==null;){if(b.tag===5||b.tag===6)l.appendChild(b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===d)break;for(;b.sibling===null;){if(b.return===null||b.return===d)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},Vz=function(){},Gpe=function(l,d,b,P){var B=l.memoizedProps;if(B!==P){l=d.stateNode,qv(Ic.current);var W=null;switch(b){case"input":B=at(l,B),P=at(l,P),W=[];break;case"select":B=ue({},B,{value:void 0}),P=ue({},P,{value:void 0}),W=[];break;case"textarea":B=At(l,B),P=At(l,P),W=[];break;default:typeof B.onClick!="function"&&typeof P.onClick=="function"&&(l.onclick=lO)}hb(b,P);var oe;b=null;for(ct in B)if(!P.hasOwnProperty(ct)&&B.hasOwnProperty(ct)&&B[ct]!=null)if(ct==="style"){var Ce=B[ct];for(oe in Ce)Ce.hasOwnProperty(oe)&&(b||(b={}),b[oe]="")}else ct!=="dangerouslySetInnerHTML"&&ct!=="children"&&ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&ct!=="autoFocus"&&(f.hasOwnProperty(ct)?W||(W=[]):(W=W||[]).push(ct,null));for(ct in P){var Oe=P[ct];if(Ce=B!=null?B[ct]:void 0,P.hasOwnProperty(ct)&&Oe!==Ce&&(Oe!=null||Ce!=null))if(ct==="style")if(Ce){for(oe in Ce)!Ce.hasOwnProperty(oe)||Oe&&Oe.hasOwnProperty(oe)||(b||(b={}),b[oe]="");for(oe in Oe)Oe.hasOwnProperty(oe)&&Ce[oe]!==Oe[oe]&&(b||(b={}),b[oe]=Oe[oe])}else b||(W||(W=[]),W.push(ct,b)),b=Oe;else ct==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Ce=Ce?Ce.__html:void 0,Oe!=null&&Ce!==Oe&&(W=W||[]).push(ct,Oe)):ct==="children"?typeof Oe!="string"&&typeof Oe!="number"||(W=W||[]).push(ct,""+Oe):ct!=="suppressContentEditableWarning"&&ct!=="suppressHydrationWarning"&&(f.hasOwnProperty(ct)?(Oe!=null&&ct==="onScroll"&&hi("scroll",l),W||Ce===Oe||(W=[])):(W=W||[]).push(ct,Oe))}b&&(W=W||[]).push("style",b);var ct=W;(d.updateQueue=ct)&&(d.flags|=4)}},$pe=function(l,d,b,P){b!==P&&(d.flags|=4)};function VE(l,d){if(!vi)switch(l.tailMode){case"hidden":d=l.tail;for(var b=null;d!==null;)d.alternate!==null&&(b=d),d=d.sibling;b===null?l.tail=null:b.sibling=null;break;case"collapsed":b=l.tail;for(var P=null;b!==null;)b.alternate!==null&&(P=b),b=b.sibling;P===null?d||l.tail===null?l.tail=null:l.tail.sibling=null:P.sibling=null}}function ds(l){var d=l.alternate!==null&&l.alternate.child===l.child,b=0,P=0;if(d)for(var B=l.child;B!==null;)b|=B.lanes|B.childLanes,P|=B.subtreeFlags&14680064,P|=B.flags&14680064,B.return=l,B=B.sibling;else for(B=l.child;B!==null;)b|=B.lanes|B.childLanes,P|=B.subtreeFlags,P|=B.flags,B.return=l,B=B.sibling;return l.subtreeFlags|=P,l.childLanes=b,d}function YRe(l,d,b){var P=d.pendingProps;switch(lz(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ds(d),null;case 1:return sa(d.type)&&cO(),ds(d),null;case 3:return P=d.stateNode,Ib(),pi(oa),pi(us),Sz(),P.pendingContext&&(P.context=P.pendingContext,P.pendingContext=null),(l===null||l.child===null)&&(mO(d)?d.flags|=4:l===null||l.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,xu!==null&&(Yz(xu),xu=null))),Vz(l,d),ds(d),null;case 5:wz(d);var B=qv(LE.current);if(b=d.type,l!==null&&d.stateNode!=null)Gpe(l,d,b,P,B),l.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!P){if(d.stateNode===null)throw Error(c(166));return ds(d),null}if(l=qv(Ic.current),mO(d)){P=d.stateNode,b=d.type;var W=d.memoizedProps;switch(P[Ac]=d,P[AE]=W,l=(d.mode&1)!==0,b){case"dialog":hi("cancel",P),hi("close",P);break;case"iframe":case"object":case"embed":hi("load",P);break;case"video":case"audio":for(B=0;B<kE.length;B++)hi(kE[B],P);break;case"source":hi("error",P);break;case"img":case"image":case"link":hi("error",P),hi("load",P);break;case"details":hi("toggle",P);break;case"input":st(P,W),hi("invalid",P);break;case"select":P._wrapperState={wasMultiple:!!W.multiple},hi("invalid",P);break;case"textarea":Et(P,W),hi("invalid",P)}hb(b,W),B=null;for(var oe in W)if(W.hasOwnProperty(oe)){var Ce=W[oe];oe==="children"?typeof Ce=="string"?P.textContent!==Ce&&(W.suppressHydrationWarning!==!0&&aO(P.textContent,Ce,l),B=["children",Ce]):typeof Ce=="number"&&P.textContent!==""+Ce&&(W.suppressHydrationWarning!==!0&&aO(P.textContent,Ce,l),B=["children",""+Ce]):f.hasOwnProperty(oe)&&Ce!=null&&oe==="onScroll"&&hi("scroll",P)}switch(b){case"input":Cn(P),He(P,W,!0);break;case"textarea":Cn(P),_n(P);break;case"select":case"option":break;default:typeof W.onClick=="function"&&(P.onclick=lO)}P=B,d.updateQueue=P,P!==null&&(d.flags|=4)}else{oe=B.nodeType===9?B:B.ownerDocument,l==="http://www.w3.org/1999/xhtml"&&(l=gr(b)),l==="http://www.w3.org/1999/xhtml"?b==="script"?(l=oe.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild)):typeof P.is=="string"?l=oe.createElement(b,{is:P.is}):(l=oe.createElement(b),b==="select"&&(oe=l,P.multiple?oe.multiple=!0:P.size&&(oe.size=P.size))):l=oe.createElementNS(l,b),l[Ac]=d,l[AE]=P,Hpe(l,d,!1,!1),d.stateNode=l;e:{switch(oe=lE(b,P),b){case"dialog":hi("cancel",l),hi("close",l),B=P;break;case"iframe":case"object":case"embed":hi("load",l),B=P;break;case"video":case"audio":for(B=0;B<kE.length;B++)hi(kE[B],l);B=P;break;case"source":hi("error",l),B=P;break;case"img":case"image":case"link":hi("error",l),hi("load",l),B=P;break;case"details":hi("toggle",l),B=P;break;case"input":st(l,P),B=at(l,P),hi("invalid",l);break;case"option":B=P;break;case"select":l._wrapperState={wasMultiple:!!P.multiple},B=ue({},P,{value:void 0}),hi("invalid",l);break;case"textarea":Et(l,P),B=At(l,P),hi("invalid",l);break;default:B=P}hb(b,B),Ce=B;for(W in Ce)if(Ce.hasOwnProperty(W)){var Oe=Ce[W];W==="style"?db(l,Oe):W==="dangerouslySetInnerHTML"?(Oe=Oe?Oe.__html:void 0,Oe!=null&&Wp(l,Oe)):W==="children"?typeof Oe=="string"?(b!=="textarea"||Oe!=="")&&ls(l,Oe):typeof Oe=="number"&&ls(l,""+Oe):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(f.hasOwnProperty(W)?Oe!=null&&W==="onScroll"&&hi("scroll",l):Oe!=null&&re(l,W,Oe,oe))}switch(b){case"input":Cn(l),He(l,P,!1);break;case"textarea":Cn(l),_n(l);break;case"option":P.value!=null&&l.setAttribute("value",""+Kt(P.value));break;case"select":l.multiple=!!P.multiple,W=P.value,W!=null?Xe(l,!!P.multiple,W,!1):P.defaultValue!=null&&Xe(l,!!P.multiple,P.defaultValue,!0);break;default:typeof B.onClick=="function"&&(l.onclick=lO)}switch(b){case"button":case"input":case"select":case"textarea":P=!!P.autoFocus;break e;case"img":P=!0;break e;default:P=!1}}P&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return ds(d),null;case 6:if(l&&d.stateNode!=null)$pe(l,d,l.memoizedProps,P);else{if(typeof P!="string"&&d.stateNode===null)throw Error(c(166));if(b=qv(LE.current),qv(Ic.current),mO(d)){if(P=d.stateNode,b=d.memoizedProps,P[Ac]=d,(W=P.nodeValue!==b)&&(l=Aa,l!==null))switch(l.tag){case 3:aO(P.nodeValue,b,(l.mode&1)!==0);break;case 5:l.memoizedProps.suppressHydrationWarning!==!0&&aO(P.nodeValue,b,(l.mode&1)!==0)}W&&(d.flags|=4)}else P=(b.nodeType===9?b:b.ownerDocument).createTextNode(P),P[Ac]=d,d.stateNode=P}return ds(d),null;case 13:if(pi(Ci),P=d.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(vi&&Ia!==null&&d.mode&1&&!(d.flags&128))Khe(),kb(),d.flags|=98560,W=!1;else if(W=mO(d),P!==null&&P.dehydrated!==null){if(l===null){if(!W)throw Error(c(318));if(W=d.memoizedState,W=W!==null?W.dehydrated:null,!W)throw Error(c(317));W[Ac]=d}else kb(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;ds(d),W=!1}else xu!==null&&(Yz(xu),xu=null),W=!0;if(!W)return d.flags&65536?d:null}return d.flags&128?(d.lanes=b,d):(P=P!==null,P!==(l!==null&&l.memoizedState!==null)&&P&&(d.child.flags|=8192,d.mode&1&&(l===null||Ci.current&1?fo===0&&(fo=3):Jz())),d.updateQueue!==null&&(d.flags|=4),ds(d),null);case 4:return Ib(),Vz(l,d),l===null&&TE(d.stateNode.containerInfo),ds(d),null;case 10:return fz(d.type._context),ds(d),null;case 17:return sa(d.type)&&cO(),ds(d),null;case 19:if(pi(Ci),W=d.memoizedState,W===null)return ds(d),null;if(P=(d.flags&128)!==0,oe=W.rendering,oe===null)if(P)VE(W,!1);else{if(fo!==0||l!==null&&l.flags&128)for(l=d.child;l!==null;){if(oe=xO(l),oe!==null){for(d.flags|=128,VE(W,!1),P=oe.updateQueue,P!==null&&(d.updateQueue=P,d.flags|=4),d.subtreeFlags=0,P=b,b=d.child;b!==null;)W=b,l=P,W.flags&=14680066,oe=W.alternate,oe===null?(W.childLanes=0,W.lanes=l,W.child=null,W.subtreeFlags=0,W.memoizedProps=null,W.memoizedState=null,W.updateQueue=null,W.dependencies=null,W.stateNode=null):(W.childLanes=oe.childLanes,W.lanes=oe.lanes,W.child=oe.child,W.subtreeFlags=0,W.deletions=null,W.memoizedProps=oe.memoizedProps,W.memoizedState=oe.memoizedState,W.updateQueue=oe.updateQueue,W.type=oe.type,l=oe.dependencies,W.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),b=b.sibling;return ri(Ci,Ci.current&1|2),d.child}l=l.sibling}W.tail!==null&&Yi()>Lb&&(d.flags|=128,P=!0,VE(W,!1),d.lanes=4194304)}else{if(!P)if(l=xO(oe),l!==null){if(d.flags|=128,P=!0,b=l.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),VE(W,!0),W.tail===null&&W.tailMode==="hidden"&&!oe.alternate&&!vi)return ds(d),null}else 2*Yi()-W.renderingStartTime>Lb&&b!==1073741824&&(d.flags|=128,P=!0,VE(W,!1),d.lanes=4194304);W.isBackwards?(oe.sibling=d.child,d.child=oe):(b=W.last,b!==null?b.sibling=oe:d.child=oe,W.last=oe)}return W.tail!==null?(d=W.tail,W.rendering=d,W.tail=d.sibling,W.renderingStartTime=Yi(),d.sibling=null,b=Ci.current,ri(Ci,P?b&1|2:b&1),d):(ds(d),null);case 22:case 23:return Qz(),P=d.memoizedState!==null,l!==null&&l.memoizedState!==null!==P&&(d.flags|=8192),P&&d.mode&1?Ra&1073741824&&(ds(d),d.subtreeFlags&6&&(d.flags|=8192)):ds(d),null;case 24:return null;case 25:return null}throw Error(c(156,d.tag))}function ZRe(l,d){switch(lz(d),d.tag){case 1:return sa(d.type)&&cO(),l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 3:return Ib(),pi(oa),pi(us),Sz(),l=d.flags,l&65536&&!(l&128)?(d.flags=l&-65537|128,d):null;case 5:return wz(d),null;case 13:if(pi(Ci),l=d.memoizedState,l!==null&&l.dehydrated!==null){if(d.alternate===null)throw Error(c(340));kb()}return l=d.flags,l&65536?(d.flags=l&-65537|128,d):null;case 19:return pi(Ci),null;case 4:return Ib(),null;case 10:return fz(d.type._context),null;case 22:case 23:return Qz(),null;case 24:return null;default:return null}}var AO=!1,hs=!1,QRe=typeof WeakSet=="function"?WeakSet:Set,an=null;function Ob(l,d){var b=l.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(P){Ni(l,d,P)}else b.current=null}function Wpe(l,d,b){try{b()}catch(P){Ni(l,d,P)}}var Kpe=!1;function JRe(l,d){if(Jj=KR,l=whe(),Kj(l)){if("selectionStart"in l)var b={start:l.selectionStart,end:l.selectionEnd};else e:{b=(b=l.ownerDocument)&&b.defaultView||window;var P=b.getSelection&&b.getSelection();if(P&&P.rangeCount!==0){b=P.anchorNode;var B=P.anchorOffset,W=P.focusNode;P=P.focusOffset;try{b.nodeType,W.nodeType}catch{b=null;break e}var oe=0,Ce=-1,Oe=-1,ct=0,Rt=0,Lt=l,It=null;t:for(;;){for(var nn;Lt!==b||B!==0&&Lt.nodeType!==3||(Ce=oe+B),Lt!==W||P!==0&&Lt.nodeType!==3||(Oe=oe+P),Lt.nodeType===3&&(oe+=Lt.nodeValue.length),(nn=Lt.firstChild)!==null;)It=Lt,Lt=nn;for(;;){if(Lt===l)break t;if(It===b&&++ct===B&&(Ce=oe),It===W&&++Rt===P&&(Oe=oe),(nn=Lt.nextSibling)!==null)break;Lt=It,It=Lt.parentNode}Lt=nn}b=Ce===-1||Oe===-1?null:{start:Ce,end:Oe}}else b=null}b=b||{start:0,end:0}}else b=null;for(ez={focusedElem:l,selectionRange:b},KR=!1,an=d;an!==null;)if(d=an,l=d.child,(d.subtreeFlags&1028)!==0&&l!==null)l.return=d,an=l;else for(;an!==null;){d=an;try{var dn=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(dn!==null){var fn=dn.memoizedProps,Zi=dn.memoizedState,Ye=d.stateNode,Ve=Ye.getSnapshotBeforeUpdate(d.elementType===d.type?fn:Su(d.type,fn),Zi);Ye.__reactInternalSnapshotBeforeUpdate=Ve}break;case 3:var rt=d.stateNode.containerInfo;rt.nodeType===1?rt.textContent="":rt.nodeType===9&&rt.documentElement&&rt.removeChild(rt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(zt){Ni(d,d.return,zt)}if(l=d.sibling,l!==null){l.return=d.return,an=l;break}an=d.return}return dn=Kpe,Kpe=!1,dn}function jE(l,d,b){var P=d.updateQueue;if(P=P!==null?P.lastEffect:null,P!==null){var B=P=P.next;do{if((B.tag&l)===l){var W=B.destroy;B.destroy=void 0,W!==void 0&&Wpe(d,b,W)}B=B.next}while(B!==P)}}function IO(l,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var b=d=d.next;do{if((b.tag&l)===l){var P=b.create;b.destroy=P()}b=b.next}while(b!==d)}}function jz(l){var d=l.ref;if(d!==null){var b=l.stateNode;switch(l.tag){case 5:l=b;break;default:l=b}typeof d=="function"?d(l):d.current=l}}function qpe(l){var d=l.alternate;d!==null&&(l.alternate=null,qpe(d)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(d=l.stateNode,d!==null&&(delete d[Ac],delete d[AE],delete d[iz],delete d[LRe],delete d[NRe])),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}function Xpe(l){return l.tag===5||l.tag===3||l.tag===4}function Ype(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Xpe(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function zz(l,d,b){var P=l.tag;if(P===5||P===6)l=l.stateNode,d?b.nodeType===8?b.parentNode.insertBefore(l,d):b.insertBefore(l,d):(b.nodeType===8?(d=b.parentNode,d.insertBefore(l,b)):(d=b,d.appendChild(l)),b=b._reactRootContainer,b!=null||d.onclick!==null||(d.onclick=lO));else if(P!==4&&(l=l.child,l!==null))for(zz(l,d,b),l=l.sibling;l!==null;)zz(l,d,b),l=l.sibling}function Hz(l,d,b){var P=l.tag;if(P===5||P===6)l=l.stateNode,d?b.insertBefore(l,d):b.appendChild(l);else if(P!==4&&(l=l.child,l!==null))for(Hz(l,d,b),l=l.sibling;l!==null;)Hz(l,d,b),l=l.sibling}var qo=null,Eu=!1;function sf(l,d,b){for(b=b.child;b!==null;)Zpe(l,d,b),b=b.sibling}function Zpe(l,d,b){if(Mc&&typeof Mc.onCommitFiberUnmount=="function")try{Mc.onCommitFiberUnmount(jR,b)}catch{}switch(b.tag){case 5:hs||Ob(b,d);case 6:var P=qo,B=Eu;qo=null,sf(l,d,b),qo=P,Eu=B,qo!==null&&(Eu?(l=qo,b=b.stateNode,l.nodeType===8?l.parentNode.removeChild(b):l.removeChild(b)):qo.removeChild(b.stateNode));break;case 18:qo!==null&&(Eu?(l=qo,b=b.stateNode,l.nodeType===8?rz(l.parentNode,b):l.nodeType===1&&rz(l,b),bE(l)):rz(qo,b.stateNode));break;case 4:P=qo,B=Eu,qo=b.stateNode.containerInfo,Eu=!0,sf(l,d,b),qo=P,Eu=B;break;case 0:case 11:case 14:case 15:if(!hs&&(P=b.updateQueue,P!==null&&(P=P.lastEffect,P!==null))){B=P=P.next;do{var W=B,oe=W.destroy;W=W.tag,oe!==void 0&&(W&2||W&4)&&Wpe(b,d,oe),B=B.next}while(B!==P)}sf(l,d,b);break;case 1:if(!hs&&(Ob(b,d),P=b.stateNode,typeof P.componentWillUnmount=="function"))try{P.props=b.memoizedProps,P.state=b.memoizedState,P.componentWillUnmount()}catch(Ce){Ni(b,d,Ce)}sf(l,d,b);break;case 21:sf(l,d,b);break;case 22:b.mode&1?(hs=(P=hs)||b.memoizedState!==null,sf(l,d,b),hs=P):sf(l,d,b);break;default:sf(l,d,b)}}function Qpe(l){var d=l.updateQueue;if(d!==null){l.updateQueue=null;var b=l.stateNode;b===null&&(b=l.stateNode=new QRe),d.forEach(function(P){var B=lOe.bind(null,l,P);b.has(P)||(b.add(P),P.then(B,B))})}}function Cu(l,d){var b=d.deletions;if(b!==null)for(var P=0;P<b.length;P++){var B=b[P];try{var W=l,oe=d,Ce=oe;e:for(;Ce!==null;){switch(Ce.tag){case 5:qo=Ce.stateNode,Eu=!1;break e;case 3:qo=Ce.stateNode.containerInfo,Eu=!0;break e;case 4:qo=Ce.stateNode.containerInfo,Eu=!0;break e}Ce=Ce.return}if(qo===null)throw Error(c(160));Zpe(W,oe,B),qo=null,Eu=!1;var Oe=B.alternate;Oe!==null&&(Oe.return=null),B.return=null}catch(ct){Ni(B,d,ct)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)Jpe(d,l),d=d.sibling}function Jpe(l,d){var b=l.alternate,P=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:if(Cu(d,l),Oc(l),P&4){try{jE(3,l,l.return),IO(3,l)}catch(fn){Ni(l,l.return,fn)}try{jE(5,l,l.return)}catch(fn){Ni(l,l.return,fn)}}break;case 1:Cu(d,l),Oc(l),P&512&&b!==null&&Ob(b,b.return);break;case 5:if(Cu(d,l),Oc(l),P&512&&b!==null&&Ob(b,b.return),l.flags&32){var B=l.stateNode;try{ls(B,"")}catch(fn){Ni(l,l.return,fn)}}if(P&4&&(B=l.stateNode,B!=null)){var W=l.memoizedProps,oe=b!==null?b.memoizedProps:W,Ce=l.type,Oe=l.updateQueue;if(l.updateQueue=null,Oe!==null)try{Ce==="input"&&W.type==="radio"&&W.name!=null&&xe(B,W),lE(Ce,oe);var ct=lE(Ce,W);for(oe=0;oe<Oe.length;oe+=2){var Rt=Oe[oe],Lt=Oe[oe+1];Rt==="style"?db(B,Lt):Rt==="dangerouslySetInnerHTML"?Wp(B,Lt):Rt==="children"?ls(B,Lt):re(B,Rt,Lt,ct)}switch(Ce){case"input":_e(B,W);break;case"textarea":Pt(B,W);break;case"select":var It=B._wrapperState.wasMultiple;B._wrapperState.wasMultiple=!!W.multiple;var nn=W.value;nn!=null?Xe(B,!!W.multiple,nn,!1):It!==!!W.multiple&&(W.defaultValue!=null?Xe(B,!!W.multiple,W.defaultValue,!0):Xe(B,!!W.multiple,W.multiple?[]:"",!1))}B[AE]=W}catch(fn){Ni(l,l.return,fn)}}break;case 6:if(Cu(d,l),Oc(l),P&4){if(l.stateNode===null)throw Error(c(162));B=l.stateNode,W=l.memoizedProps;try{B.nodeValue=W}catch(fn){Ni(l,l.return,fn)}}break;case 3:if(Cu(d,l),Oc(l),P&4&&b!==null&&b.memoizedState.isDehydrated)try{bE(d.containerInfo)}catch(fn){Ni(l,l.return,fn)}break;case 4:Cu(d,l),Oc(l);break;case 13:Cu(d,l),Oc(l),B=l.child,B.flags&8192&&(W=B.memoizedState!==null,B.stateNode.isHidden=W,!W||B.alternate!==null&&B.alternate.memoizedState!==null||(Wz=Yi())),P&4&&Qpe(l);break;case 22:if(Rt=b!==null&&b.memoizedState!==null,l.mode&1?(hs=(ct=hs)||Rt,Cu(d,l),hs=ct):Cu(d,l),Oc(l),P&8192){if(ct=l.memoizedState!==null,(l.stateNode.isHidden=ct)&&!Rt&&l.mode&1)for(an=l,Rt=l.child;Rt!==null;){for(Lt=an=Rt;an!==null;){switch(It=an,nn=It.child,It.tag){case 0:case 11:case 14:case 15:jE(4,It,It.return);break;case 1:Ob(It,It.return);var dn=It.stateNode;if(typeof dn.componentWillUnmount=="function"){P=It,b=It.return;try{d=P,dn.props=d.memoizedProps,dn.state=d.memoizedState,dn.componentWillUnmount()}catch(fn){Ni(P,b,fn)}}break;case 5:Ob(It,It.return);break;case 22:if(It.memoizedState!==null){nfe(Lt);continue}}nn!==null?(nn.return=It,an=nn):nfe(Lt)}Rt=Rt.sibling}e:for(Rt=null,Lt=l;;){if(Lt.tag===5){if(Rt===null){Rt=Lt;try{B=Lt.stateNode,ct?(W=B.style,typeof W.setProperty=="function"?W.setProperty("display","none","important"):W.display="none"):(Ce=Lt.stateNode,Oe=Lt.memoizedProps.style,oe=Oe!=null&&Oe.hasOwnProperty("display")?Oe.display:null,Ce.style.display=jv("display",oe))}catch(fn){Ni(l,l.return,fn)}}}else if(Lt.tag===6){if(Rt===null)try{Lt.stateNode.nodeValue=ct?"":Lt.memoizedProps}catch(fn){Ni(l,l.return,fn)}}else if((Lt.tag!==22&&Lt.tag!==23||Lt.memoizedState===null||Lt===l)&&Lt.child!==null){Lt.child.return=Lt,Lt=Lt.child;continue}if(Lt===l)break e;for(;Lt.sibling===null;){if(Lt.return===null||Lt.return===l)break e;Rt===Lt&&(Rt=null),Lt=Lt.return}Rt===Lt&&(Rt=null),Lt.sibling.return=Lt.return,Lt=Lt.sibling}}break;case 19:Cu(d,l),Oc(l),P&4&&Qpe(l);break;case 21:break;default:Cu(d,l),Oc(l)}}function Oc(l){var d=l.flags;if(d&2){try{e:{for(var b=l.return;b!==null;){if(Xpe(b)){var P=b;break e}b=b.return}throw Error(c(160))}switch(P.tag){case 5:var B=P.stateNode;P.flags&32&&(ls(B,""),P.flags&=-33);var W=Ype(l);Hz(l,W,B);break;case 3:case 4:var oe=P.stateNode.containerInfo,Ce=Ype(l);zz(l,Ce,oe);break;default:throw Error(c(161))}}catch(Oe){Ni(l,l.return,Oe)}l.flags&=-3}d&4096&&(l.flags&=-4097)}function eOe(l,d,b){an=l,efe(l)}function efe(l,d,b){for(var P=(l.mode&1)!==0;an!==null;){var B=an,W=B.child;if(B.tag===22&&P){var oe=B.memoizedState!==null||AO;if(!oe){var Ce=B.alternate,Oe=Ce!==null&&Ce.memoizedState!==null||hs;Ce=AO;var ct=hs;if(AO=oe,(hs=Oe)&&!ct)for(an=B;an!==null;)oe=an,Oe=oe.child,oe.tag===22&&oe.memoizedState!==null?rfe(B):Oe!==null?(Oe.return=oe,an=Oe):rfe(B);for(;W!==null;)an=W,efe(W),W=W.sibling;an=B,AO=Ce,hs=ct}tfe(l)}else B.subtreeFlags&8772&&W!==null?(W.return=B,an=W):tfe(l)}}function tfe(l){for(;an!==null;){var d=an;if(d.flags&8772){var b=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:hs||IO(5,d);break;case 1:var P=d.stateNode;if(d.flags&4&&!hs)if(b===null)P.componentDidMount();else{var B=d.elementType===d.type?b.memoizedProps:Su(d.type,b.memoizedProps);P.componentDidUpdate(B,b.memoizedState,P.__reactInternalSnapshotBeforeUpdate)}var W=d.updateQueue;W!==null&&Zhe(d,W,P);break;case 3:var oe=d.updateQueue;if(oe!==null){if(b=null,d.child!==null)switch(d.child.tag){case 5:b=d.child.stateNode;break;case 1:b=d.child.stateNode}Zhe(d,oe,b)}break;case 5:var Ce=d.stateNode;if(b===null&&d.flags&4){b=Ce;var Oe=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":Oe.autoFocus&&b.focus();break;case"img":Oe.src&&(b.src=Oe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var ct=d.alternate;if(ct!==null){var Rt=ct.memoizedState;if(Rt!==null){var Lt=Rt.dehydrated;Lt!==null&&bE(Lt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}hs||d.flags&512&&jz(d)}catch(It){Ni(d,d.return,It)}}if(d===l){an=null;break}if(b=d.sibling,b!==null){b.return=d.return,an=b;break}an=d.return}}function nfe(l){for(;an!==null;){var d=an;if(d===l){an=null;break}var b=d.sibling;if(b!==null){b.return=d.return,an=b;break}an=d.return}}function rfe(l){for(;an!==null;){var d=an;try{switch(d.tag){case 0:case 11:case 15:var b=d.return;try{IO(4,d)}catch(Oe){Ni(d,b,Oe)}break;case 1:var P=d.stateNode;if(typeof P.componentDidMount=="function"){var B=d.return;try{P.componentDidMount()}catch(Oe){Ni(d,B,Oe)}}var W=d.return;try{jz(d)}catch(Oe){Ni(d,W,Oe)}break;case 5:var oe=d.return;try{jz(d)}catch(Oe){Ni(d,oe,Oe)}}}catch(Oe){Ni(d,d.return,Oe)}if(d===l){an=null;break}var Ce=d.sibling;if(Ce!==null){Ce.return=d.return,an=Ce;break}an=d.return}}var tOe=Math.ceil,RO=ne.ReactCurrentDispatcher,Gz=ne.ReactCurrentOwner,xl=ne.ReactCurrentBatchConfig,yr=0,Po=null,oo=null,Xo=0,Ra=0,Db=ef(0),fo=0,zE=null,Yv=0,OO=0,$z=0,HE=null,la=null,Wz=0,Lb=1/0,nh=null,DO=!1,Kz=null,af=null,LO=!1,lf=null,NO=0,GE=0,qz=null,FO=-1,BO=0;function Ns(){return yr&6?Yi():FO!==-1?FO:FO=Yi()}function uf(l){return l.mode&1?yr&2&&Xo!==0?Xo&-Xo:BRe.transition!==null?(BO===0&&(BO=Kde()),BO):(l=Vr,l!==0||(l=window.event,l=l===void 0?16:nhe(l.type)),l):1}function Pu(l,d,b,P){if(50<GE)throw GE=0,qz=null,Error(c(185));fE(l,b,P),(!(yr&2)||l!==Po)&&(l===Po&&(!(yr&2)&&(OO|=b),fo===4&&cf(l,Xo)),ua(l,P),b===1&&yr===0&&!(d.mode&1)&&(Lb=Yi()+500,hO&&nf()))}function ua(l,d){var b=l.callbackNode;VIe(l,d);var P=GR(l,l===Po?Xo:0);if(P===0)b!==null&&Gde(b),l.callbackNode=null,l.callbackPriority=0;else if(d=P&-P,l.callbackPriority!==d){if(b!=null&&Gde(b),d===1)l.tag===0?FRe(ofe.bind(null,l)):zhe(ofe.bind(null,l)),ORe(function(){!(yr&6)&&nf()}),b=null;else{switch(qde(P)){case 1:b=Aj;break;case 4:b=$de;break;case 16:b=VR;break;case 536870912:b=Wde;break;default:b=VR}b=pfe(b,ife.bind(null,l))}l.callbackPriority=d,l.callbackNode=b}}function ife(l,d){if(FO=-1,BO=0,yr&6)throw Error(c(327));var b=l.callbackNode;if(Nb()&&l.callbackNode!==b)return null;var P=GR(l,l===Po?Xo:0);if(P===0)return null;if(P&30||P&l.expiredLanes||d)d=UO(l,P);else{d=P;var B=yr;yr|=2;var W=afe();(Po!==l||Xo!==d)&&(nh=null,Lb=Yi()+500,Qv(l,d));do try{iOe();break}catch(Ce){sfe(l,Ce)}while(1);pz(),RO.current=W,yr=B,oo!==null?d=0:(Po=null,Xo=0,d=fo)}if(d!==0){if(d===2&&(B=Ij(l),B!==0&&(P=B,d=Xz(l,B))),d===1)throw b=zE,Qv(l,0),cf(l,P),ua(l,Yi()),b;if(d===6)cf(l,P);else{if(B=l.current.alternate,!(P&30)&&!nOe(B)&&(d=UO(l,P),d===2&&(W=Ij(l),W!==0&&(P=W,d=Xz(l,W))),d===1))throw b=zE,Qv(l,0),cf(l,P),ua(l,Yi()),b;switch(l.finishedWork=B,l.finishedLanes=P,d){case 0:case 1:throw Error(c(345));case 2:Jv(l,la,nh);break;case 3:if(cf(l,P),(P&130023424)===P&&(d=Wz+500-Yi(),10<d)){if(GR(l,0)!==0)break;if(B=l.suspendedLanes,(B&P)!==P){Ns(),l.pingedLanes|=l.suspendedLanes&B;break}l.timeoutHandle=nz(Jv.bind(null,l,la,nh),d);break}Jv(l,la,nh);break;case 4:if(cf(l,P),(P&4194240)===P)break;for(d=l.eventTimes,B=-1;0<P;){var oe=31-_u(P);W=1<<oe,oe=d[oe],oe>B&&(B=oe),P&=~W}if(P=B,P=Yi()-P,P=(120>P?120:480>P?480:1080>P?1080:1920>P?1920:3e3>P?3e3:4320>P?4320:1960*tOe(P/1960))-P,10<P){l.timeoutHandle=nz(Jv.bind(null,l,la,nh),P);break}Jv(l,la,nh);break;case 5:Jv(l,la,nh);break;default:throw Error(c(329))}}}return ua(l,Yi()),l.callbackNode===b?ife.bind(null,l):null}function Xz(l,d){var b=HE;return l.current.memoizedState.isDehydrated&&(Qv(l,d).flags|=256),l=UO(l,d),l!==2&&(d=la,la=b,d!==null&&Yz(d)),l}function Yz(l){la===null?la=l:la.push.apply(la,l)}function nOe(l){for(var d=l;;){if(d.flags&16384){var b=d.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var P=0;P<b.length;P++){var B=b[P],W=B.getSnapshot;B=B.value;try{if(!wu(W(),B))return!1}catch{return!1}}}if(b=d.child,d.subtreeFlags&16384&&b!==null)b.return=d,d=b;else{if(d===l)break;for(;d.sibling===null;){if(d.return===null||d.return===l)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function cf(l,d){for(d&=~$z,d&=~OO,l.suspendedLanes|=d,l.pingedLanes&=~d,l=l.expirationTimes;0<d;){var b=31-_u(d),P=1<<b;l[b]=-1,d&=~P}}function ofe(l){if(yr&6)throw Error(c(327));Nb();var d=GR(l,0);if(!(d&1))return ua(l,Yi()),null;var b=UO(l,d);if(l.tag!==0&&b===2){var P=Ij(l);P!==0&&(d=P,b=Xz(l,P))}if(b===1)throw b=zE,Qv(l,0),cf(l,d),ua(l,Yi()),b;if(b===6)throw Error(c(345));return l.finishedWork=l.current.alternate,l.finishedLanes=d,Jv(l,la,nh),ua(l,Yi()),null}function Zz(l,d){var b=yr;yr|=1;try{return l(d)}finally{yr=b,yr===0&&(Lb=Yi()+500,hO&&nf())}}function Zv(l){lf!==null&&lf.tag===0&&!(yr&6)&&Nb();var d=yr;yr|=1;var b=xl.transition,P=Vr;try{if(xl.transition=null,Vr=1,l)return l()}finally{Vr=P,xl.transition=b,yr=d,!(yr&6)&&nf()}}function Qz(){Ra=Db.current,pi(Db)}function Qv(l,d){l.finishedWork=null,l.finishedLanes=0;var b=l.timeoutHandle;if(b!==-1&&(l.timeoutHandle=-1,RRe(b)),oo!==null)for(b=oo.return;b!==null;){var P=b;switch(lz(P),P.tag){case 1:P=P.type.childContextTypes,P!=null&&cO();break;case 3:Ib(),pi(oa),pi(us),Sz();break;case 5:wz(P);break;case 4:Ib();break;case 13:pi(Ci);break;case 19:pi(Ci);break;case 10:fz(P.type._context);break;case 22:case 23:Qz()}b=b.return}if(Po=l,oo=l=df(l.current,null),Xo=Ra=d,fo=0,zE=null,$z=OO=Yv=0,la=HE=null,Kv!==null){for(d=0;d<Kv.length;d++)if(b=Kv[d],P=b.interleaved,P!==null){b.interleaved=null;var B=P.next,W=b.pending;if(W!==null){var oe=W.next;W.next=B,P.next=oe}b.pending=P}Kv=null}return l}function sfe(l,d){do{var b=oo;try{if(pz(),SO.current=kO,EO){for(var P=Pi.memoizedState;P!==null;){var B=P.queue;B!==null&&(B.pending=null),P=P.next}EO=!1}if(Xv=0,Co=po=Pi=null,NE=!1,FE=0,Gz.current=null,b===null||b.return===null){fo=1,zE=d,oo=null;break}e:{var W=l,oe=b.return,Ce=b,Oe=d;if(d=Xo,Ce.flags|=32768,Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var ct=Oe,Rt=Ce,Lt=Rt.tag;if(!(Rt.mode&1)&&(Lt===0||Lt===11||Lt===15)){var It=Rt.alternate;It?(Rt.updateQueue=It.updateQueue,Rt.memoizedState=It.memoizedState,Rt.lanes=It.lanes):(Rt.updateQueue=null,Rt.memoizedState=null)}var nn=Ape(oe);if(nn!==null){nn.flags&=-257,Ipe(nn,oe,Ce,W,d),nn.mode&1&&Mpe(W,ct,d),d=nn,Oe=ct;var dn=d.updateQueue;if(dn===null){var fn=new Set;fn.add(Oe),d.updateQueue=fn}else dn.add(Oe);break e}else{if(!(d&1)){Mpe(W,ct,d),Jz();break e}Oe=Error(c(426))}}else if(vi&&Ce.mode&1){var Zi=Ape(oe);if(Zi!==null){!(Zi.flags&65536)&&(Zi.flags|=256),Ipe(Zi,oe,Ce,W,d),dz(Rb(Oe,Ce));break e}}W=Oe=Rb(Oe,Ce),fo!==4&&(fo=2),HE===null?HE=[W]:HE.push(W),W=oe;do{switch(W.tag){case 3:W.flags|=65536,d&=-d,W.lanes|=d;var Ye=kpe(W,Oe,d);Yhe(W,Ye);break e;case 1:Ce=Oe;var Ve=W.type,rt=W.stateNode;if(!(W.flags&128)&&(typeof Ve.getDerivedStateFromError=="function"||rt!==null&&typeof rt.componentDidCatch=="function"&&(af===null||!af.has(rt)))){W.flags|=65536,d&=-d,W.lanes|=d;var zt=Tpe(W,Ce,d);Yhe(W,zt);break e}}W=W.return}while(W!==null)}ufe(b)}catch(vn){d=vn,oo===b&&b!==null&&(oo=b=b.return);continue}break}while(1)}function afe(){var l=RO.current;return RO.current=kO,l===null?kO:l}function Jz(){(fo===0||fo===3||fo===2)&&(fo=4),Po===null||!(Yv&268435455)&&!(OO&268435455)||cf(Po,Xo)}function UO(l,d){var b=yr;yr|=2;var P=afe();(Po!==l||Xo!==d)&&(nh=null,Qv(l,d));do try{rOe();break}catch(B){sfe(l,B)}while(1);if(pz(),yr=b,RO.current=P,oo!==null)throw Error(c(261));return Po=null,Xo=0,fo}function rOe(){for(;oo!==null;)lfe(oo)}function iOe(){for(;oo!==null&&!IIe();)lfe(oo)}function lfe(l){var d=hfe(l.alternate,l,Ra);l.memoizedProps=l.pendingProps,d===null?ufe(l):oo=d,Gz.current=null}function ufe(l){var d=l;do{var b=d.alternate;if(l=d.return,d.flags&32768){if(b=ZRe(b,d),b!==null){b.flags&=32767,oo=b;return}if(l!==null)l.flags|=32768,l.subtreeFlags=0,l.deletions=null;else{fo=6,oo=null;return}}else if(b=YRe(b,d,Ra),b!==null){oo=b;return}if(d=d.sibling,d!==null){oo=d;return}oo=d=l}while(d!==null);fo===0&&(fo=5)}function Jv(l,d,b){var P=Vr,B=xl.transition;try{xl.transition=null,Vr=1,oOe(l,d,b,P)}finally{xl.transition=B,Vr=P}return null}function oOe(l,d,b,P){do Nb();while(lf!==null);if(yr&6)throw Error(c(327));b=l.finishedWork;var B=l.finishedLanes;if(b===null)return null;if(l.finishedWork=null,l.finishedLanes=0,b===l.current)throw Error(c(177));l.callbackNode=null,l.callbackPriority=0;var W=b.lanes|b.childLanes;if(jIe(l,W),l===Po&&(oo=Po=null,Xo=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||LO||(LO=!0,pfe(VR,function(){return Nb(),null})),W=(b.flags&15990)!==0,b.subtreeFlags&15990||W){W=xl.transition,xl.transition=null;var oe=Vr;Vr=1;var Ce=yr;yr|=4,Gz.current=null,JRe(l,b),Jpe(b,l),kRe(ez),KR=!!Jj,ez=Jj=null,l.current=b,eOe(b),RIe(),yr=Ce,Vr=oe,xl.transition=W}else l.current=b;if(LO&&(LO=!1,lf=l,NO=B),W=l.pendingLanes,W===0&&(af=null),LIe(b.stateNode),ua(l,Yi()),d!==null)for(P=l.onRecoverableError,b=0;b<d.length;b++)B=d[b],P(B.value,{componentStack:B.stack,digest:B.digest});if(DO)throw DO=!1,l=Kz,Kz=null,l;return NO&1&&l.tag!==0&&Nb(),W=l.pendingLanes,W&1?l===qz?GE++:(GE=0,qz=l):GE=0,nf(),null}function Nb(){if(lf!==null){var l=qde(NO),d=xl.transition,b=Vr;try{if(xl.transition=null,Vr=16>l?16:l,lf===null)var P=!1;else{if(l=lf,lf=null,NO=0,yr&6)throw Error(c(331));var B=yr;for(yr|=4,an=l.current;an!==null;){var W=an,oe=W.child;if(an.flags&16){var Ce=W.deletions;if(Ce!==null){for(var Oe=0;Oe<Ce.length;Oe++){var ct=Ce[Oe];for(an=ct;an!==null;){var Rt=an;switch(Rt.tag){case 0:case 11:case 15:jE(8,Rt,W)}var Lt=Rt.child;if(Lt!==null)Lt.return=Rt,an=Lt;else for(;an!==null;){Rt=an;var It=Rt.sibling,nn=Rt.return;if(qpe(Rt),Rt===ct){an=null;break}if(It!==null){It.return=nn,an=It;break}an=nn}}}var dn=W.alternate;if(dn!==null){var fn=dn.child;if(fn!==null){dn.child=null;do{var Zi=fn.sibling;fn.sibling=null,fn=Zi}while(fn!==null)}}an=W}}if(W.subtreeFlags&2064&&oe!==null)oe.return=W,an=oe;else e:for(;an!==null;){if(W=an,W.flags&2048)switch(W.tag){case 0:case 11:case 15:jE(9,W,W.return)}var Ye=W.sibling;if(Ye!==null){Ye.return=W.return,an=Ye;break e}an=W.return}}var Ve=l.current;for(an=Ve;an!==null;){oe=an;var rt=oe.child;if(oe.subtreeFlags&2064&&rt!==null)rt.return=oe,an=rt;else e:for(oe=Ve;an!==null;){if(Ce=an,Ce.flags&2048)try{switch(Ce.tag){case 0:case 11:case 15:IO(9,Ce)}}catch(vn){Ni(Ce,Ce.return,vn)}if(Ce===oe){an=null;break e}var zt=Ce.sibling;if(zt!==null){zt.return=Ce.return,an=zt;break e}an=Ce.return}}if(yr=B,nf(),Mc&&typeof Mc.onPostCommitFiberRoot=="function")try{Mc.onPostCommitFiberRoot(jR,l)}catch{}P=!0}return P}finally{Vr=b,xl.transition=d}}return!1}function cfe(l,d,b){d=Rb(b,d),d=kpe(l,d,1),l=of(l,d,1),d=Ns(),l!==null&&(fE(l,1,d),ua(l,d))}function Ni(l,d,b){if(l.tag===3)cfe(l,l,b);else for(;d!==null;){if(d.tag===3){cfe(d,l,b);break}else if(d.tag===1){var P=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof P.componentDidCatch=="function"&&(af===null||!af.has(P))){l=Rb(b,l),l=Tpe(d,l,1),d=of(d,l,1),l=Ns(),d!==null&&(fE(d,1,l),ua(d,l));break}}d=d.return}}function sOe(l,d,b){var P=l.pingCache;P!==null&&P.delete(d),d=Ns(),l.pingedLanes|=l.suspendedLanes&b,Po===l&&(Xo&b)===b&&(fo===4||fo===3&&(Xo&130023424)===Xo&&500>Yi()-Wz?Qv(l,0):$z|=b),ua(l,d)}function dfe(l,d){d===0&&(l.mode&1?(d=HR,HR<<=1,!(HR&130023424)&&(HR=4194304)):d=1);var b=Ns();l=Jd(l,d),l!==null&&(fE(l,d,b),ua(l,b))}function aOe(l){var d=l.memoizedState,b=0;d!==null&&(b=d.retryLane),dfe(l,b)}function lOe(l,d){var b=0;switch(l.tag){case 13:var P=l.stateNode,B=l.memoizedState;B!==null&&(b=B.retryLane);break;case 19:P=l.stateNode;break;default:throw Error(c(314))}P!==null&&P.delete(d),dfe(l,b)}var hfe;hfe=function(l,d,b){if(l!==null)if(l.memoizedProps!==d.pendingProps||oa.current)aa=!0;else{if(!(l.lanes&b)&&!(d.flags&128))return aa=!1,XRe(l,d,b);aa=!!(l.flags&131072)}else aa=!1,vi&&d.flags&1048576&&Hhe(d,fO,d.index);switch(d.lanes=0,d.tag){case 2:var P=d.type;MO(l,d),l=d.pendingProps;var B=Eb(d,us.current);Mb(d,b),B=Pz(null,d,P,l,B,b);var W=kz();return d.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,sa(P)?(W=!0,dO(d)):W=!1,d.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,gz(d),B.updater=_O,d.stateNode=B,B._reactInternals=d,bz(d,P,l,b),d=Lz(null,d,P,!0,W,b)):(d.tag=0,vi&&W&&az(d),Ls(null,d,B,b),d=d.child),d;case 16:P=d.elementType;e:{switch(MO(l,d),l=d.pendingProps,B=P._init,P=B(P._payload),d.type=P,B=d.tag=cOe(P),l=Su(P,l),B){case 0:d=Dz(null,d,P,l,b);break e;case 1:d=Fpe(null,d,P,l,b);break e;case 11:d=Rpe(null,d,P,l,b);break e;case 14:d=Ope(null,d,P,Su(P.type,l),b);break e}throw Error(c(306,P,""))}return d;case 0:return P=d.type,B=d.pendingProps,B=d.elementType===P?B:Su(P,B),Dz(l,d,P,B,b);case 1:return P=d.type,B=d.pendingProps,B=d.elementType===P?B:Su(P,B),Fpe(l,d,P,B,b);case 3:e:{if(Bpe(d),l===null)throw Error(c(387));P=d.pendingProps,W=d.memoizedState,B=W.element,Xhe(l,d),bO(d,P,null,b);var oe=d.memoizedState;if(P=oe.element,W.isDehydrated)if(W={element:P,isDehydrated:!1,cache:oe.cache,pendingSuspenseBoundaries:oe.pendingSuspenseBoundaries,transitions:oe.transitions},d.updateQueue.baseState=W,d.memoizedState=W,d.flags&256){B=Rb(Error(c(423)),d),d=Upe(l,d,P,b,B);break e}else if(P!==B){B=Rb(Error(c(424)),d),d=Upe(l,d,P,b,B);break e}else for(Ia=Jp(d.stateNode.containerInfo.firstChild),Aa=d,vi=!0,xu=null,b=ipe(d,null,P,b),d.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(kb(),P===B){d=th(l,d,b);break e}Ls(l,d,P,b)}d=d.child}return d;case 5:return ope(d),l===null&&cz(d),P=d.type,B=d.pendingProps,W=l!==null?l.memoizedProps:null,oe=B.children,tz(P,B)?oe=null:W!==null&&tz(P,W)&&(d.flags|=32),Npe(l,d),Ls(l,d,oe,b),d.child;case 6:return l===null&&cz(d),null;case 13:return Vpe(l,d,b);case 4:return _z(d,d.stateNode.containerInfo),P=d.pendingProps,l===null?d.child=Ab(d,null,P,b):Ls(l,d,P,b),d.child;case 11:return P=d.type,B=d.pendingProps,B=d.elementType===P?B:Su(P,B),Rpe(l,d,P,B,b);case 7:return Ls(l,d,d.pendingProps,b),d.child;case 8:return Ls(l,d,d.pendingProps.children,b),d.child;case 12:return Ls(l,d,d.pendingProps.children,b),d.child;case 10:e:{if(P=d.type._context,B=d.pendingProps,W=d.memoizedProps,oe=B.value,ri(vO,P._currentValue),P._currentValue=oe,W!==null)if(wu(W.value,oe)){if(W.children===B.children&&!oa.current){d=th(l,d,b);break e}}else for(W=d.child,W!==null&&(W.return=d);W!==null;){var Ce=W.dependencies;if(Ce!==null){oe=W.child;for(var Oe=Ce.firstContext;Oe!==null;){if(Oe.context===P){if(W.tag===1){Oe=eh(-1,b&-b),Oe.tag=2;var ct=W.updateQueue;if(ct!==null){ct=ct.shared;var Rt=ct.pending;Rt===null?Oe.next=Oe:(Oe.next=Rt.next,Rt.next=Oe),ct.pending=Oe}}W.lanes|=b,Oe=W.alternate,Oe!==null&&(Oe.lanes|=b),mz(W.return,b,d),Ce.lanes|=b;break}Oe=Oe.next}}else if(W.tag===10)oe=W.type===d.type?null:W.child;else if(W.tag===18){if(oe=W.return,oe===null)throw Error(c(341));oe.lanes|=b,Ce=oe.alternate,Ce!==null&&(Ce.lanes|=b),mz(oe,b,d),oe=W.sibling}else oe=W.child;if(oe!==null)oe.return=W;else for(oe=W;oe!==null;){if(oe===d){oe=null;break}if(W=oe.sibling,W!==null){W.return=oe.return,oe=W;break}oe=oe.return}W=oe}Ls(l,d,B.children,b),d=d.child}return d;case 9:return B=d.type,P=d.pendingProps.children,Mb(d,b),B=_l(B),P=P(B),d.flags|=1,Ls(l,d,P,b),d.child;case 14:return P=d.type,B=Su(P,d.pendingProps),B=Su(P.type,B),Ope(l,d,P,B,b);case 15:return Dpe(l,d,d.type,d.pendingProps,b);case 17:return P=d.type,B=d.pendingProps,B=d.elementType===P?B:Su(P,B),MO(l,d),d.tag=1,sa(P)?(l=!0,dO(d)):l=!1,Mb(d,b),epe(d,P,B),bz(d,P,B,b),Lz(null,d,P,!0,l,b);case 19:return zpe(l,d,b);case 22:return Lpe(l,d,b)}throw Error(c(156,d.tag))};function pfe(l,d){return Hde(l,d)}function uOe(l,d,b,P){this.tag=l,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=P,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sl(l,d,b,P){return new uOe(l,d,b,P)}function e6(l){return l=l.prototype,!(!l||!l.isReactComponent)}function cOe(l){if(typeof l=="function")return e6(l)?1:0;if(l!=null){if(l=l.$$typeof,l===Ae)return 11;if(l===Tt)return 14}return 2}function df(l,d){var b=l.alternate;return b===null?(b=Sl(l.tag,d,l.key,l.mode),b.elementType=l.elementType,b.type=l.type,b.stateNode=l.stateNode,b.alternate=l,l.alternate=b):(b.pendingProps=d,b.type=l.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=l.flags&14680064,b.childLanes=l.childLanes,b.lanes=l.lanes,b.child=l.child,b.memoizedProps=l.memoizedProps,b.memoizedState=l.memoizedState,b.updateQueue=l.updateQueue,d=l.dependencies,b.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},b.sibling=l.sibling,b.index=l.index,b.ref=l.ref,b}function VO(l,d,b,P,B,W){var oe=2;if(P=l,typeof l=="function")e6(l)&&(oe=1);else if(typeof l=="string")oe=5;else e:switch(l){case fe:return eg(b.children,B,W,d);case ge:oe=8,B|=8;break;case Ie:return l=Sl(12,b,d,B|2),l.elementType=Ie,l.lanes=W,l;case Y:return l=Sl(13,b,d,B),l.elementType=Y,l.lanes=W,l;case Ue:return l=Sl(19,b,d,B),l.elementType=Ue,l.lanes=W,l;case Te:return jO(b,B,W,d);default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case Qe:oe=10;break e;case le:oe=9;break e;case Ae:oe=11;break e;case Tt:oe=14;break e;case ke:oe=16,P=null;break e}throw Error(c(130,l==null?l:typeof l,""))}return d=Sl(oe,b,d,B),d.elementType=l,d.type=P,d.lanes=W,d}function eg(l,d,b,P){return l=Sl(7,l,P,d),l.lanes=b,l}function jO(l,d,b,P){return l=Sl(22,l,P,d),l.elementType=Te,l.lanes=b,l.stateNode={isHidden:!1},l}function t6(l,d,b){return l=Sl(6,l,null,d),l.lanes=b,l}function n6(l,d,b){return d=Sl(4,l.children!==null?l.children:[],l.key,d),d.lanes=b,d.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},d}function dOe(l,d,b,P,B){this.tag=d,this.containerInfo=l,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rj(0),this.expirationTimes=Rj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rj(0),this.identifierPrefix=P,this.onRecoverableError=B,this.mutableSourceEagerHydrationData=null}function r6(l,d,b,P,B,W,oe,Ce,Oe){return l=new dOe(l,d,b,Ce,Oe),d===1?(d=1,W===!0&&(d|=8)):d=0,W=Sl(3,null,null,d),l.current=W,W.stateNode=l,W.memoizedState={element:P,isDehydrated:b,cache:null,transitions:null,pendingSuspenseBoundaries:null},gz(W),l}function hOe(l,d,b){var P=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Se,key:P==null?null:""+P,children:l,containerInfo:d,implementation:b}}function ffe(l){if(!l)return tf;l=l._reactInternals;e:{if(zv(l)!==l||l.tag!==1)throw Error(c(170));var d=l;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(sa(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(c(171))}if(l.tag===1){var b=l.type;if(sa(b))return Vhe(l,b,d)}return d}function mfe(l,d,b,P,B,W,oe,Ce,Oe){return l=r6(b,P,!0,l,B,W,oe,Ce,Oe),l.context=ffe(null),b=l.current,P=Ns(),B=uf(b),W=eh(P,B),W.callback=d??null,of(b,W,B),l.current.lanes=B,fE(l,B,P),ua(l,P),l}function zO(l,d,b,P){var B=d.current,W=Ns(),oe=uf(B);return b=ffe(b),d.context===null?d.context=b:d.pendingContext=b,d=eh(W,oe),d.payload={element:l},P=P===void 0?null:P,P!==null&&(d.callback=P),l=of(B,d,oe),l!==null&&(Pu(l,B,oe,W),yO(l,B,oe)),oe}function HO(l){if(l=l.current,!l.child)return null;switch(l.child.tag){case 5:return l.child.stateNode;default:return l.child.stateNode}}function vfe(l,d){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var b=l.retryLane;l.retryLane=b!==0&&b<d?b:d}}function i6(l,d){vfe(l,d),(l=l.alternate)&&vfe(l,d)}function pOe(){return null}var gfe=typeof reportError=="function"?reportError:function(l){console.error(l)};function o6(l){this._internalRoot=l}GO.prototype.render=o6.prototype.render=function(l){var d=this._internalRoot;if(d===null)throw Error(c(409));zO(l,d,null,null)},GO.prototype.unmount=o6.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var d=l.containerInfo;Zv(function(){zO(null,l,null,null)}),d[Xd]=null}};function GO(l){this._internalRoot=l}GO.prototype.unstable_scheduleHydration=function(l){if(l){var d=Zde();l={blockedOn:null,target:l,priority:d};for(var b=0;b<Yp.length&&d!==0&&d<Yp[b].priority;b++);Yp.splice(b,0,l),b===0&&ehe(l)}};function s6(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function $O(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11&&(l.nodeType!==8||l.nodeValue!==" react-mount-point-unstable "))}function yfe(){}function fOe(l,d,b,P,B){if(B){if(typeof P=="function"){var W=P;P=function(){var ct=HO(oe);W.call(ct)}}var oe=mfe(d,P,l,0,null,!1,!1,"",yfe);return l._reactRootContainer=oe,l[Xd]=oe.current,TE(l.nodeType===8?l.parentNode:l),Zv(),oe}for(;B=l.lastChild;)l.removeChild(B);if(typeof P=="function"){var Ce=P;P=function(){var ct=HO(Oe);Ce.call(ct)}}var Oe=r6(l,0,!1,null,null,!1,!1,"",yfe);return l._reactRootContainer=Oe,l[Xd]=Oe.current,TE(l.nodeType===8?l.parentNode:l),Zv(function(){zO(d,Oe,b,P)}),Oe}function WO(l,d,b,P,B){var W=b._reactRootContainer;if(W){var oe=W;if(typeof B=="function"){var Ce=B;B=function(){var Oe=HO(oe);Ce.call(Oe)}}zO(d,oe,l,B)}else oe=fOe(b,d,l,B,P);return HO(oe)}Xde=function(l){switch(l.tag){case 3:var d=l.stateNode;if(d.current.memoizedState.isDehydrated){var b=pE(d.pendingLanes);b!==0&&(Oj(d,b|1),ua(d,Yi()),!(yr&6)&&(Lb=Yi()+500,nf()))}break;case 13:Zv(function(){var P=Jd(l,1);if(P!==null){var B=Ns();Pu(P,l,1,B)}}),i6(l,1)}},Dj=function(l){if(l.tag===13){var d=Jd(l,134217728);if(d!==null){var b=Ns();Pu(d,l,134217728,b)}i6(l,134217728)}},Yde=function(l){if(l.tag===13){var d=uf(l),b=Jd(l,d);if(b!==null){var P=Ns();Pu(b,l,d,P)}i6(l,d)}},Zde=function(){return Vr},Qde=function(l,d){var b=Vr;try{return Vr=l,d()}finally{Vr=b}},pb=function(l,d,b){switch(d){case"input":if(_e(l,b),d=b.name,b.type==="radio"&&d!=null){for(b=l;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<b.length;d++){var P=b[d];if(P!==l&&P.form===l.form){var B=uO(P);if(!B)throw Error(c(90));Er(P),_e(P,B)}}}break;case"textarea":Pt(l,b);break;case"select":d=b.value,d!=null&&Xe(l,!!b.multiple,d,!1)}},Nde=Zz,Fde=Zv;var mOe={usingClientEntryPoint:!1,Events:[IE,xb,uO,Dde,Lde,Zz]},$E={findFiberByHostInstance:Hv,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vOe={bundleType:$E.bundleType,version:$E.version,rendererPackageName:$E.rendererPackageName,rendererConfig:$E.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(l){return l=jde(l),l===null?null:l.stateNode},findFiberByHostInstance:$E.findFiberByHostInstance||pOe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(WE=__REACT_DEVTOOLS_GLOBAL_HOOK__,!WE.isDisabled&&WE.supportsFiber))try{jR=WE.inject(vOe),Mc=WE}catch{}var WE;i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mOe,i.createPortal=function(l,d){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s6(d))throw Error(c(200));return hOe(l,d,null,b)},i.createRoot=function(l,d){if(!s6(l))throw Error(c(299));var b=!1,P="",B=gfe;return d!=null&&(d.unstable_strictMode===!0&&(b=!0),d.identifierPrefix!==void 0&&(P=d.identifierPrefix),d.onRecoverableError!==void 0&&(B=d.onRecoverableError)),d=r6(l,1,!1,null,null,b,!1,P,B),l[Xd]=d.current,TE(l.nodeType===8?l.parentNode:l),new o6(d)},i.findDOMNode=function(l){if(l==null)return null;if(l.nodeType===1)return l;var d=l._reactInternals;if(d===void 0)throw typeof l.render=="function"?Error(c(188)):(l=Object.keys(l).join(","),Error(c(268,l)));return l=jde(d),l=l===null?null:l.stateNode,l},i.flushSync=function(l){return Zv(l)},i.hydrate=function(l,d,b){if(!$O(d))throw Error(c(200));return WO(null,l,d,!0,b)},i.hydrateRoot=function(l,d,b){if(!s6(l))throw Error(c(405));var P=b!=null&&b.hydratedSources||null,B=!1,W="",oe=gfe;if(b!=null&&(b.unstable_strictMode===!0&&(B=!0),b.identifierPrefix!==void 0&&(W=b.identifierPrefix),b.onRecoverableError!==void 0&&(oe=b.onRecoverableError)),d=mfe(d,null,l,1,b??null,B,!1,W,oe),l[Xd]=d.current,TE(l),P)for(l=0;l<P.length;l++)b=P[l],B=b._getVersion,B=B(b._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[b,B]:d.mutableSourceEagerHydrationData.push(b,B);return new GO(d)},i.render=function(l,d,b){if(!$O(d))throw Error(c(200));return WO(null,l,d,!1,b)},i.unmountComponentAtNode=function(l){if(!$O(l))throw Error(c(40));return l._reactRootContainer?(Zv(function(){WO(null,null,l,!1,function(){l._reactRootContainer=null,l[Xd]=null})}),!0):!1},i.unstable_batchedUpdates=Zz,i.unstable_renderSubtreeIntoContainer=function(l,d,b,P){if(!$O(b))throw Error(c(200));if(l==null||l._reactInternals===void 0)throw Error(c(38));return WO(l,d,b,!1,P)},i.version="18.2.0-next-9e3b772b8-20220608"}),Xl=K((i,s)=>{function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(c){console.error(c)}}a(),s.exports=hx()});function fF(i){let[,s]=(0,rc.useState)(0);return(0,rc.useCallback)(()=>{s(a=>a+1)},[])}function Un(i,s,a){let c=(0,rc.useCallback)(i,s),p=(0,rc.useRef)(null);p.current?p.current.set(c):p.current=new Js.Atom(c);let f=(0,rc.useRef)(null);return f.current||(f.current=(0,Js.prism)(()=>p.current.prism.getValue()())),ey(f.current,a)}function M2(){Xm||(Xm=!0,(0,px.default)(()=>{(0,A2.unstable_batchedUpdates)(function(){for(var i,s;_a.length>0;){let a=_a.shift();cp.delete(a);let c;Yl&&((i=a.debug)==null||i.history.push("queue reached"));try{c=a.der.getValue()}catch(p){Yl&&((s=a.debug)==null||s.history.push("queue: der.getValue() errored")),console.error("A `der.getValue()` in `usePrismInstance(der)` threw an error. This may be a zombie child issue, so we're gonna try to get its value again in a normal react render phase.If you see the same error again, then you either have an error in your prism code, or the deps array in `usePrism(fn, deps)` is missing a dependency and causing the prism to read stale values."),console.error(p),a.runUpdate();continue}c!==a.lastValue&&(a.lastValue=c,a.runUpdate())}Xm=!1},1)}))}function ey(i,s){var a;let c=fF(),p=(0,rc.useRef)(void 0);p.current||(fx++,p.current={order:fx,runUpdate:()=>{p.current.unmounted||c()},der:i,lastValue:void 0,unmounted:!1,queueUpdate:()=>{var g;Yl&&((g=p.current.debug)==null||g.history.push("queueUpdate()")),I2(p.current)},untap:i.onStale(()=>{Yl&&p.current.debug.history.push("onStale(cb)"),p.current.queueUpdate()})},Yl&&(p.current.debug={label:s,traceOfFirstTimeRender:new Error,history:[]})),(0,rc.useLayoutEffect)(()=>function(){p.current.unmounted=!0,p.current.untap(),mx(p.current)},[]),mx(p.current);let f=p.current.der.getValue();return p.current.lastValue=f,Yl&&((a=p.current.debug)==null||a.history.push("rendered")),f}var Js,px,rc,A2,Yl,$n,fx,_a,cp,Xm,I2,R2,mx,hn=C(()=>{Js=Mt,Jr(),px=Z(dx()),rc=Z(Re()),A2=Z(Xl()),Yl=!1,$n=(i,s)=>Un(()=>(0,Js.val)(i),[i],s),fx=0,_a=[],cp=new Set,Xm=!1,I2=i=>{R2(i),M2()},R2=i=>{if(!cp.has(i))if(cp.add(i),_a.length===0)_a.push(i);else{let s=tx(_a,a=>a.order>=i.order);s===-1?_a.push(i):_a[s].order>i.order&&_a.splice(s,0,i)}},mx=i=>{if(!cp.has(i))return;cp.delete(i);let s=tx(_a,a=>a===i);_a.splice(s,1)}}),mF=K(i=>{var s=60103,a=60106,c=60107,p=60108,f=60114,g=60109,y=60110,w=60112,S=60113,T=60120,I=60115,A=60116,k=60121,D=60122,O=60117,F=60129,V=60131;typeof Symbol=="function"&&Symbol.for&&($=Symbol.for,s=$("react.element"),a=$("react.portal"),c=$("react.fragment"),p=$("react.strict_mode"),f=$("react.profiler"),g=$("react.provider"),y=$("react.context"),w=$("react.forward_ref"),S=$("react.suspense"),T=$("react.suspense_list"),I=$("react.memo"),A=$("react.lazy"),k=$("react.block"),D=$("react.server.block"),O=$("react.fundamental"),F=$("react.debug_trace_mode"),V=$("react.legacy_hidden"));var $;function X(Y){if(typeof Y=="object"&&Y!==null){var Ue=Y.$$typeof;switch(Ue){case s:switch(Y=Y.type,Y){case c:case f:case p:case S:case T:return Y;default:switch(Y=Y&&Y.$$typeof,Y){case y:case w:case A:case I:case g:return Y;default:return Ue}}case a:return Ue}}}var re=g,ne=s,ae=w,Se=c,fe=A,ge=I,Ie=a,Qe=f,le=p,Ae=S;i.ContextConsumer=y,i.ContextProvider=re,i.Element=ne,i.ForwardRef=ae,i.Fragment=Se,i.Lazy=fe,i.Memo=ge,i.Portal=Ie,i.Profiler=Qe,i.StrictMode=le,i.Suspense=Ae,i.isAsyncMode=function(){return!1},i.isConcurrentMode=function(){return!1},i.isContextConsumer=function(Y){return X(Y)===y},i.isContextProvider=function(Y){return X(Y)===g},i.isElement=function(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===s},i.isForwardRef=function(Y){return X(Y)===w},i.isFragment=function(Y){return X(Y)===c},i.isLazy=function(Y){return X(Y)===A},i.isMemo=function(Y){return X(Y)===I},i.isPortal=function(Y){return X(Y)===a},i.isProfiler=function(Y){return X(Y)===f},i.isStrictMode=function(Y){return X(Y)===p},i.isSuspense=function(Y){return X(Y)===S},i.isValidElementType=function(Y){return typeof Y=="string"||typeof Y=="function"||Y===c||Y===f||Y===F||Y===p||Y===S||Y===T||Y===V||typeof Y=="object"&&Y!==null&&(Y.$$typeof===A||Y.$$typeof===I||Y.$$typeof===g||Y.$$typeof===y||Y.$$typeof===w||Y.$$typeof===O||Y.$$typeof===k||Y[0]===D)},i.typeOf=X}),vF=K((i,s)=>{s.exports=mF()}),vx=K((i,s)=>{s.exports=function(a,c,p,f){var g=p?p.call(f,a,c):void 0;if(g!==void 0)return!!g;if(a===c)return!0;if(typeof a!="object"||!a||typeof c!="object"||!c)return!1;var y=Object.keys(a),w=Object.keys(c);if(y.length!==w.length)return!1;for(var S=Object.prototype.hasOwnProperty.bind(c),T=0;T<y.length;T++){var I=y[T];if(!S(I))return!1;var A=a[I],k=c[I];if(g=p?p.call(f,A,k,I):void 0,g===!1||g===void 0&&A!==k)return!1}return!0}});function gF(i){function s(he,qe,Ze,ot,ze){for(var Zt=0,bt=0,Kt=0,cn=0,In,Cn,Er=0,J=0,at,st=at=In=0,xe=0,_e=0,He=0,xt=0,Ct=Ze.length,Xe=Ct-1,At,Et="",Pt="",_n="",gr="",Hn;xe<Ct;){if(Cn=Ze.charCodeAt(xe),xe===Xe&&bt+cn+Kt+Zt!==0&&(bt!==0&&(Cn=bt===47?10:47),cn=Kt=Zt=0,Ct++,Xe++),bt+cn+Kt+Zt===0){if(xe===Xe&&(0<_e&&(Et=Et.replace(A,"")),0<Et.trim().length)){switch(Cn){case 32:case 9:case 59:case 13:case 10:break;default:Et+=Ze.charAt(xe)}Cn=59}switch(Cn){case 123:for(Et=Et.trim(),In=Et.charCodeAt(0),at=1,xt=++xe;xe<Ct;){switch(Cn=Ze.charCodeAt(xe)){case 123:at++;break;case 125:at--;break;case 47:switch(Cn=Ze.charCodeAt(xe+1)){case 42:case 47:e:{for(st=xe+1;st<Xe;++st)switch(Ze.charCodeAt(st)){case 47:if(Cn===42&&Ze.charCodeAt(st-1)===42&&xe+2!==st){xe=st+1;break e}break;case 10:if(Cn===47){xe=st+1;break e}}xe=st}}break;case 91:Cn++;case 40:Cn++;case 34:case 39:for(;xe++<Xe&&Ze.charCodeAt(xe)!==Cn;);}if(at===0)break;xe++}switch(at=Ze.substring(xt,xe),In===0&&(In=(Et=Et.replace(I,"").trim()).charCodeAt(0)),In){case 64:switch(0<_e&&(Et=Et.replace(A,"")),Cn=Et.charCodeAt(1),Cn){case 100:case 109:case 115:case 45:_e=qe;break;default:_e=Tt}if(at=s(qe,_e,at,Cn,ze+1),xt=at.length,0<Te&&(_e=a(Tt,Et,He),Hn=y(3,at,_e,qe,Ae,le,xt,Cn,ze,ot),Et=_e.join(""),Hn!==void 0&&(xt=(at=Hn.trim()).length)===0&&(Cn=0,at="")),0<xt)switch(Cn){case 115:Et=Et.replace(ae,g);case 100:case 109:case 45:at=Et+"{"+at+"}";break;case 107:Et=Et.replace($,"$1 $2"),at=Et+"{"+at+"}",at=Ue===1||Ue===2&&f("@"+at,3)?"@-webkit-"+at+"@"+at:"@"+at;break;default:at=Et+at,ot===112&&(at=(Pt+=at,""))}else at="";break;default:at=s(qe,a(qe,Et,He),at,ot,ze+1)}_n+=at,at=He=_e=st=In=0,Et="",Cn=Ze.charCodeAt(++xe);break;case 125:case 59:if(Et=(0<_e?Et.replace(A,""):Et).trim(),1<(xt=Et.length))switch(st===0&&(In=Et.charCodeAt(0),In===45||96<In&&123>In)&&(xt=(Et=Et.replace(" ",":")).length),0<Te&&(Hn=y(1,Et,qe,he,Ae,le,Pt.length,ot,ze,ot))!==void 0&&(xt=(Et=Hn.trim()).length)===0&&(Et="\0\0"),In=Et.charCodeAt(0),Cn=Et.charCodeAt(1),In){case 0:break;case 64:if(Cn===105||Cn===99){gr+=Et+Ze.charAt(xe);break}default:Et.charCodeAt(xt-1)!==58&&(Pt+=p(Et,In,Cn,Et.charCodeAt(2)))}He=_e=st=In=0,Et="",Cn=Ze.charCodeAt(++xe)}}switch(Cn){case 13:case 10:bt===47?bt=0:1+In===0&&ot!==107&&0<Et.length&&(_e=1,Et+="\0"),0<Te*wt&&y(0,Et,qe,he,Ae,le,Pt.length,ot,ze,ot),le=1,Ae++;break;case 59:case 125:if(bt+cn+Kt+Zt===0){le++;break}default:switch(le++,At=Ze.charAt(xe),Cn){case 9:case 32:if(cn+Zt+bt===0)switch(Er){case 44:case 58:case 9:case 32:At="";break;default:Cn!==32&&(At=" ")}break;case 0:At="\\0";break;case 12:At="\\f";break;case 11:At="\\v";break;case 38:cn+bt+Zt===0&&(_e=He=1,At="\f"+At);break;case 108:if(cn+bt+Zt+Y===0&&0<st)switch(xe-st){case 2:Er===112&&Ze.charCodeAt(xe-3)===58&&(Y=Er);case 8:J===111&&(Y=J)}break;case 58:cn+bt+Zt===0&&(st=xe);break;case 44:bt+Kt+cn+Zt===0&&(_e=1,At+="\r");break;case 34:case 39:bt===0&&(cn=cn===Cn?0:cn===0?Cn:cn);break;case 91:cn+bt+Kt===0&&Zt++;break;case 93:cn+bt+Kt===0&&Zt--;break;case 41:cn+bt+Zt===0&&Kt--;break;case 40:if(cn+bt+Zt===0){if(In===0)switch(2*Er+3*J){case 533:break;default:In=1}Kt++}break;case 64:bt+Kt+cn+Zt+st+at===0&&(at=1);break;case 42:case 47:if(!(0<cn+Zt+Kt))switch(bt){case 0:switch(2*Cn+3*Ze.charCodeAt(xe+1)){case 235:bt=47;break;case 220:xt=xe,bt=42}break;case 42:Cn===47&&Er===42&&xt+2!==xe&&(Ze.charCodeAt(xt+2)===33&&(Pt+=Ze.substring(xt,xe+1)),At="",bt=0)}}bt===0&&(Et+=At)}J=Er,Er=Cn,xe++}if(xt=Pt.length,0<xt){if(_e=qe,0<Te&&(Hn=y(2,Pt,_e,he,Ae,le,xt,ot,ze,ot),Hn!==void 0&&(Pt=Hn).length===0))return gr+Pt+_n;if(Pt=_e.join(",")+"{"+Pt+"}",Ue*Y!==0){switch(Ue!==2||f(Pt,2)||(Y=0),Y){case 111:Pt=Pt.replace(re,":-moz-$1")+Pt;break;case 112:Pt=Pt.replace(X,"::-webkit-input-$1")+Pt.replace(X,"::-moz-$1")+Pt.replace(X,":-ms-input-$1")+Pt}Y=0}}return gr+Pt+_n}function a(he,qe,Ze){var ot=qe.trim().split(F);qe=ot;var ze=ot.length,Zt=he.length;switch(Zt){case 0:case 1:var bt=0;for(he=Zt===0?"":he[0]+" ";bt<ze;++bt)qe[bt]=c(he,qe[bt],Ze).trim();break;default:var Kt=bt=0;for(qe=[];bt<ze;++bt)for(var cn=0;cn<Zt;++cn)qe[Kt++]=c(he[cn]+" ",ot[bt],Ze).trim()}return qe}function c(he,qe,Ze){var ot=qe.charCodeAt(0);switch(33>ot&&(ot=(qe=qe.trim()).charCodeAt(0)),ot){case 38:return qe.replace(V,"$1"+he.trim());case 58:return he.trim()+qe.replace(V,"$1"+he.trim());default:if(0<1*Ze&&0<qe.indexOf("\f"))return qe.replace(V,(he.charCodeAt(0)===58?"":"$1")+he.trim())}return he+qe}function p(he,qe,Ze,ot){var ze=he+";",Zt=2*qe+3*Ze+4*ot;if(Zt===944){he=ze.indexOf(":",9)+1;var bt=ze.substring(he,ze.length-1).trim();return bt=ze.substring(0,he).trim()+bt+";",Ue===1||Ue===2&&f(bt,1)?"-webkit-"+bt+bt:bt}if(Ue===0||Ue===2&&!f(ze,1))return ze;switch(Zt){case 1015:return ze.charCodeAt(10)===97?"-webkit-"+ze+ze:ze;case 951:return ze.charCodeAt(3)===116?"-webkit-"+ze+ze:ze;case 963:return ze.charCodeAt(5)===110?"-webkit-"+ze+ze:ze;case 1009:if(ze.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+ze+ze;case 978:return"-webkit-"+ze+"-moz-"+ze+ze;case 1019:case 983:return"-webkit-"+ze+"-moz-"+ze+"-ms-"+ze+ze;case 883:if(ze.charCodeAt(8)===45)return"-webkit-"+ze+ze;if(0<ze.indexOf("image-set(",11))return ze.replace(Qe,"$1-webkit-$2")+ze;break;case 932:if(ze.charCodeAt(4)===45)switch(ze.charCodeAt(5)){case 103:return"-webkit-box-"+ze.replace("-grow","")+"-webkit-"+ze+"-ms-"+ze.replace("grow","positive")+ze;case 115:return"-webkit-"+ze+"-ms-"+ze.replace("shrink","negative")+ze;case 98:return"-webkit-"+ze+"-ms-"+ze.replace("basis","preferred-size")+ze}return"-webkit-"+ze+"-ms-"+ze+ze;case 964:return"-webkit-"+ze+"-ms-flex-"+ze+ze;case 1023:if(ze.charCodeAt(8)!==99)break;return bt=ze.substring(ze.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+bt+"-webkit-"+ze+"-ms-flex-pack"+bt+ze;case 1005:return D.test(ze)?ze.replace(k,":-webkit-")+ze.replace(k,":-moz-")+ze:ze;case 1e3:switch(bt=ze.substring(13).trim(),qe=bt.indexOf("-")+1,bt.charCodeAt(0)+bt.charCodeAt(qe)){case 226:bt=ze.replace(ne,"tb");break;case 232:bt=ze.replace(ne,"tb-rl");break;case 220:bt=ze.replace(ne,"lr");break;default:return ze}return"-webkit-"+ze+"-ms-"+bt+ze;case 1017:if(ze.indexOf("sticky",9)===-1)break;case 975:switch(qe=(ze=he).length-10,bt=(ze.charCodeAt(qe)===33?ze.substring(0,qe):ze).substring(he.indexOf(":",7)+1).trim(),Zt=bt.charCodeAt(0)+(bt.charCodeAt(7)|0)){case 203:if(111>bt.charCodeAt(8))break;case 115:ze=ze.replace(bt,"-webkit-"+bt)+";"+ze;break;case 207:case 102:ze=ze.replace(bt,"-webkit-"+(102<Zt?"inline-":"")+"box")+";"+ze.replace(bt,"-webkit-"+bt)+";"+ze.replace(bt,"-ms-"+bt+"box")+";"+ze}return ze+";";case 938:if(ze.charCodeAt(5)===45)switch(ze.charCodeAt(6)){case 105:return bt=ze.replace("-items",""),"-webkit-"+ze+"-webkit-box-"+bt+"-ms-flex-"+bt+ze;case 115:return"-webkit-"+ze+"-ms-flex-item-"+ze.replace(fe,"")+ze;default:return"-webkit-"+ze+"-ms-flex-line-pack"+ze.replace("align-content","").replace(fe,"")+ze}break;case 973:case 989:if(ze.charCodeAt(3)!==45||ze.charCodeAt(4)===122)break;case 931:case 953:if(Ie.test(he)===!0)return(bt=he.substring(he.indexOf(":")+1)).charCodeAt(0)===115?p(he.replace("stretch","fill-available"),qe,Ze,ot).replace(":fill-available",":stretch"):ze.replace(bt,"-webkit-"+bt)+ze.replace(bt,"-moz-"+bt.replace("fill-",""))+ze;break;case 962:if(ze="-webkit-"+ze+(ze.charCodeAt(5)===102?"-ms-"+ze:"")+ze,Ze+ot===211&&ze.charCodeAt(13)===105&&0<ze.indexOf("transform",10))return ze.substring(0,ze.indexOf(";",27)+1).replace(O,"$1-webkit-$2")+ze}return ze}function f(he,qe){var Ze=he.indexOf(qe===1?":":"{"),ot=he.substring(0,qe!==3?Ze:10);return Ze=he.substring(Ze+1,he.length-1),je(qe!==2?ot:ot.replace(ge,"$1"),Ze,qe)}function g(he,qe){var Ze=p(qe,qe.charCodeAt(0),qe.charCodeAt(1),qe.charCodeAt(2));return Ze!==qe+";"?Ze.replace(Se," or ($1)").substring(4):"("+qe+")"}function y(he,qe,Ze,ot,ze,Zt,bt,Kt,cn,In){for(var Cn=0,Er=qe,J;Cn<Te;++Cn)switch(J=ke[Cn].call(T,he,Er,Ze,ot,ze,Zt,bt,Kt,cn,In)){case void 0:case!1:case!0:case null:break;default:Er=J}if(Er!==qe)return Er}function w(he){switch(he){case void 0:case null:Te=ke.length=0;break;default:if(typeof he=="function")ke[Te++]=he;else if(typeof he=="object")for(var qe=0,Ze=he.length;qe<Ze;++qe)w(he[qe]);else wt=!!he|0}return w}function S(he){return he=he.prefix,he!==void 0&&(je=null,he?typeof he!="function"?Ue=1:(Ue=2,je=he):Ue=0),S}function T(he,qe){var Ze=he;if(33>Ze.charCodeAt(0)&&(Ze=Ze.trim()),ue=Ze,Ze=[ue],0<Te){var ot=y(-1,qe,Ze,Ze,Ae,le,0,0,0,0);ot!==void 0&&typeof ot=="string"&&(qe=ot)}var ze=s(Tt,Ze,qe,0,0);return 0<Te&&(ot=y(-2,ze,Ze,Ze,Ae,le,ze.length,0,0,0),ot!==void 0&&(ze=ot)),ue="",Y=0,le=Ae=1,ze}var I=/^\0+/g,A=/[\0\r\f]/g,k=/: */g,D=/zoo|gra/,O=/([,: ])(transform)/g,F=/,\r+?/g,V=/([\t\r\n ])*\f?&/g,$=/@(k\w+)\s*(\S*)\s*/,X=/::(place)/g,re=/:(read-only)/g,ne=/[svh]\w+-[tblr]{2}/,ae=/\(\s*(.*)\s*\)/g,Se=/([\s\S]*?);/g,fe=/-self|flex-/g,ge=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Ie=/stretch|:\s*\w+\-(?:conte|avail)/,Qe=/([^-])(image-set\()/,le=1,Ae=1,Y=0,Ue=1,Tt=[],ke=[],Te=0,je=null,wt=0,ue="";return T.use=w,T.set=S,i!==void 0&&S(i),T}var dp,O2=C(()=>{dp=gF}),D2,L2,yF=C(()=>{D2={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},L2=D2});function bF(i){var s=Object.create(null);return function(a){return s[a]===void 0&&(s[a]=i(a)),s[a]}}var ty,_F=C(()=>{ty=bF}),hp,N2,gx,wF=C(()=>{_F(),hp=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,N2=ty(function(i){return hp.test(i)||i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)<91}),gx=N2}),xF=K(i=>{var s=typeof Symbol=="function"&&Symbol.for,a=s?Symbol.for("react.element"):60103,c=s?Symbol.for("react.portal"):60106,p=s?Symbol.for("react.fragment"):60107,f=s?Symbol.for("react.strict_mode"):60108,g=s?Symbol.for("react.profiler"):60114,y=s?Symbol.for("react.provider"):60109,w=s?Symbol.for("react.context"):60110,S=s?Symbol.for("react.async_mode"):60111,T=s?Symbol.for("react.concurrent_mode"):60111,I=s?Symbol.for("react.forward_ref"):60112,A=s?Symbol.for("react.suspense"):60113,k=s?Symbol.for("react.suspense_list"):60120,D=s?Symbol.for("react.memo"):60115,O=s?Symbol.for("react.lazy"):60116,F=s?Symbol.for("react.block"):60121,V=s?Symbol.for("react.fundamental"):60117,$=s?Symbol.for("react.responder"):60118,X=s?Symbol.for("react.scope"):60119;function re(ae){if(typeof ae=="object"&&ae!==null){var Se=ae.$$typeof;switch(Se){case a:switch(ae=ae.type,ae){case S:case T:case p:case g:case f:case A:return ae;default:switch(ae=ae&&ae.$$typeof,ae){case w:case I:case O:case D:case y:return ae;default:return Se}}case c:return Se}}}function ne(ae){return re(ae)===T}i.AsyncMode=S,i.ConcurrentMode=T,i.ContextConsumer=w,i.ContextProvider=y,i.Element=a,i.ForwardRef=I,i.Fragment=p,i.Lazy=O,i.Memo=D,i.Portal=c,i.Profiler=g,i.StrictMode=f,i.Suspense=A,i.isAsyncMode=function(ae){return ne(ae)||re(ae)===S},i.isConcurrentMode=ne,i.isContextConsumer=function(ae){return re(ae)===w},i.isContextProvider=function(ae){return re(ae)===y},i.isElement=function(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===a},i.isForwardRef=function(ae){return re(ae)===I},i.isFragment=function(ae){return re(ae)===p},i.isLazy=function(ae){return re(ae)===O},i.isMemo=function(ae){return re(ae)===D},i.isPortal=function(ae){return re(ae)===c},i.isProfiler=function(ae){return re(ae)===g},i.isStrictMode=function(ae){return re(ae)===f},i.isSuspense=function(ae){return re(ae)===A},i.isValidElementType=function(ae){return typeof ae=="string"||typeof ae=="function"||ae===p||ae===T||ae===g||ae===f||ae===A||ae===k||typeof ae=="object"&&ae!==null&&(ae.$$typeof===O||ae.$$typeof===D||ae.$$typeof===y||ae.$$typeof===w||ae.$$typeof===I||ae.$$typeof===V||ae.$$typeof===$||ae.$$typeof===X||ae.$$typeof===F)},i.typeOf=re}),yx=K((i,s)=>{s.exports=xF()}),F2=K((i,s)=>{var a=yx(),c={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},p={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},f={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},g={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},y={};y[a.ForwardRef]=f,y[a.Memo]=g;function w(F){return a.isMemo(F)?g:y[F.$$typeof]||c}var S=Object.defineProperty,T=Object.getOwnPropertyNames,I=Object.getOwnPropertySymbols,A=Object.getOwnPropertyDescriptor,k=Object.getPrototypeOf,D=Object.prototype;function O(F,V,$){if(typeof V!="string"){if(D){var X=k(V);X&&X!==D&&O(F,X,$)}var re=T(V);I&&(re=re.concat(I(V)));for(var ne=w(F),ae=w(V),Se=0;Se<re.length;++Se){var fe=re[Se];if(!p[fe]&&!($&&$[fe])&&!(ae&&ae[fe])&&!(ne&&ne[fe])){var ge=A(V,fe);try{S(F,fe,ge)}catch{}}}}return F}s.exports=O});function wa(){return(wa=Object.assign||function(i){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])}return i}).apply(this,arguments)}function Ym(i){return typeof i=="function"}function Cs(i){return i.displayName||i.name||"Component"}function Zl(i){return i&&typeof i.styledComponentId=="string"}function Lo(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];throw new Error("An error occurred. See https://git.io/JUIaE#"+i+" for more information."+(a.length>0?" Args: "+a.join(", "):""))}function bx(i){var s,a="";for(s=Math.abs(i);s>52;s=s/52|0)a=Px(s%52)+a;return(Px(s%52)+a).replace(ev,"$1-$2")}function pp(i){for(var s=0;s<i.length;s+=1){var a=i[s];if(Ym(a)&&!Zl(a))return!1}return!0}function wd(i){var s,a,c,p,f=i===void 0?ea:i,g=f.options,y=g===void 0?ea:g,w=f.plugins,S=w===void 0?xd:w,T=new dp(y),I=[],A=function(O){function F(V){if(V)try{O(V+"}")}catch{}}return function(V,$,X,re,ne,ae,Se,fe,ge,Ie){switch(V){case 1:if(ge===0&&$.charCodeAt(0)===64)return O($+";"),"";break;case 2:if(fe===0)return $+"/*|*/";break;case 3:switch(fe){case 102:case 112:return O(X[0]+$),"";default:return $+(Ie===0?"/*|*/":"")}case-2:$.split("/*|*/}").forEach(F)}}}(function(O){I.push(O)}),k=function(O,F,V){return F===0&&Mx.indexOf(V[a.length])!==-1||V.match(p)?O:"."+s};function D(O,F,V,$){$===void 0&&($="&");var X=O.replace(Tx,""),re=F&&V?V+" "+F+" { "+X+" }":X;return s=$,a=F,c=new RegExp("\\"+a+"\\b","g"),p=new RegExp("(\\"+a+"\\b){2,}"),T(V||!F?"":F,re)}return T.use([].concat(S,[function(O,F,V){O===2&&V.length&&V[0].lastIndexOf(a)>0&&(V[0]=V[0].replace(c,k))},A,function(O){if(O===-2){var F=I;return I=[],F}}])),D.hash=S.length?S.reduce(function(O,F){return F.name||Lo(15),Ki(O,F.name)},5381).toString():"",D}function Zm(){return(0,ui.useContext)(py)||Ax}function B2(){return(0,ui.useContext)(fy)||yp}function _x(i){var s=(0,ui.useState)(i.stylisPlugins),a=s[0],c=s[1],p=Zm(),f=(0,ui.useMemo)(function(){var y=p;return i.sheet?y=i.sheet:i.target&&(y=y.reconstructWithOptions({target:i.target},!1)),i.disableCSSOMInjection&&(y=y.reconstructWithOptions({useCSSOMInjection:!1})),y},[i.disableCSSOMInjection,i.sheet,i.target]),g=(0,ui.useMemo)(function(){return wd({options:{prefix:!i.disableVendorPrefixes},plugins:a})},[i.disableVendorPrefixes,a]);return(0,ui.useEffect)(function(){(0,Qm.default)(a,i.stylisPlugins)||c(i.stylisPlugins)},[i.stylisPlugins]),ui.default.createElement(py.Provider,{value:f},ui.default.createElement(fy.Provider,{value:g},i.children))}function U2(i){return W2.test(i)?i.replace(K2,Rx).replace(my,"-ms-"):i}function Ql(i,s,a,c){if(Array.isArray(i)){for(var p,f=[],g=0,y=i.length;g<y;g+=1)(p=Ql(i[g],s,a,c))!==""&&(Array.isArray(p)?f.push.apply(f,p):f.push(p));return f}if(Ox(i))return"";if(Zl(i))return"."+i.styledComponentId;if(Ym(i)){if(typeof(S=i)!="function"||S.prototype&&S.prototype.isReactComponent||!s)return i;var w=i(s);return Ql(w,s,a,c)}var S;return i instanceof Ix?a?(i.inject(a,c),i.getName(c)):i:sy(i)?function T(I,A){var k,D,O=[];for(var F in I)I.hasOwnProperty(F)&&!Ox(I[F])&&(Array.isArray(I[F])&&I[F].isCss||Ym(I[F])?O.push(U2(F)+":",I[F],";"):sy(I[F])?O.push.apply(O,T(I[F],F)):O.push(U2(F)+": "+(k=F,(D=I[F])==null||typeof D=="boolean"||D===""?"":typeof D!="number"||D===0||k in L2||k.startsWith("--")?String(D).trim():D+"px")+";"));return A?[A+" {"].concat(O,["}"]):O}(i):i.toString()}function No(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return Ym(i)||sy(i)?Dx(Ql(oy(xd,[i].concat(a)))):a.length===0&&i.length===1&&typeof i[0]=="string"?i:Dx(Ql(oy(i,a)))}function Jl(i){return i.replace(E,"-").replace(L,"")}function fp(i){return typeof i=="string"&&!0}function wx(i,s,a){var c=i[a];ie(s)&&ie(c)?V2(c,s):i[a]=s}function V2(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];for(var p=0,f=a;p<f.length;p++){var g=f[p];if(ie(g))for(var y in g)de(y)&&wx(i,g[y],y)}return i}function ny(i,s,a){var c=Zl(i),p=!fp(i),f=s.attrs,g=f===void 0?xd:f,y=s.componentId,w=y===void 0?function($,X){var re=typeof $!="string"?"sc":Jl($);$e[re]=($e[re]||0)+1;var ne=re+"-"+q("5.3.11"+re+$e[re]);return X?X+"-"+ne:ne}(s.displayName,s.parentComponentId):y,S=s.displayName,T=S===void 0?function($){return fp($)?"styled."+$:"Styled("+Cs($)+")"}(i):S,I=s.displayName&&s.componentId?Jl(s.displayName)+"-"+s.componentId:s.componentId||w,A=c&&i.attrs?Array.prototype.concat(i.attrs,g).filter(Boolean):g,k=s.shouldForwardProp;c&&i.shouldForwardProp&&(k=s.shouldForwardProp?function($,X,re){return i.shouldForwardProp($,X,re)&&s.shouldForwardProp($,X,re)}:i.shouldForwardProp);var D,O=new $2(a,I,c?i.componentStyle:void 0),F=O.isStatic&&g.length===0,V=function($,X){return function(re,ne,ae,Se){var fe=re.attrs,ge=re.componentStyle,Ie=re.defaultProps,Qe=re.foldedComponentIds,le=re.shouldForwardProp,Ae=re.styledComponentId,Y=re.target,Ue=function(ot,ze,Zt){ot===void 0&&(ot=ea);var bt=wa({},ze,{theme:ot}),Kt={};return Zt.forEach(function(cn){var In,Cn,Er,J=cn;for(In in Ym(J)&&(J=J(bt)),J)bt[In]=Kt[In]=In==="className"?(Cn=Kt[In],Er=J[In],Cn&&Er?Cn+" "+Er:Cn||Er):J[In]}),[bt,Kt]}(v(ne,(0,ui.useContext)(Me),Ie)||ea,ne,fe),Tt=Ue[0],ke=Ue[1],Te=function(ot,ze,Zt,bt){var Kt=Zm(),cn=B2(),In=ze?ot.generateAndInjectStyles(ea,Kt,cn):ot.generateAndInjectStyles(Zt,Kt,cn);return In}(ge,Se,Tt),je=ae,wt=ke.$as||ne.$as||ke.as||ne.as||Y,ue=fp(wt),he=ke!==ne?wa({},ne,{},ke):ne,qe={};for(var Ze in he)Ze[0]!=="$"&&Ze!=="as"&&(Ze==="forwardedAs"?qe.as=he[Ze]:(le?le(Ze,gx,wt):!ue||gx(Ze))&&(qe[Ze]=he[Ze]));return ne.style&&ke.style!==ne.style&&(qe.style=wa({},ne.style,{},ke.style)),qe.className=Array.prototype.concat(Qe,Ae,Te!==Ae?Te:null,ne.className,ke.className).filter(Boolean).join(" "),qe.ref=je,(0,ui.createElement)(wt,qe)}(D,$,X,F)};return V.displayName=T,(D=ui.default.forwardRef(V)).attrs=A,D.componentStyle=O,D.displayName=T,D.shouldForwardProp=k,D.foldedComponentIds=c?Array.prototype.concat(i.foldedComponentIds,i.styledComponentId):xd,D.styledComponentId=I,D.target=c?i.target:i,D.withComponent=function($){var X=s.componentId,re=function(ae,Se){if(ae==null)return{};var fe,ge,Ie={},Qe=Object.keys(ae);for(ge=0;ge<Qe.length;ge++)fe=Qe[ge],Se.indexOf(fe)>=0||(Ie[fe]=ae[fe]);return Ie}(s,["componentId"]),ne=X&&X+"-"+(fp($)?$:Jl(Cs($)));return ny($,wa({},re,{attrs:A,componentId:ne}),a)},Object.defineProperty(D,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function($){this._foldedDefaultProps=c?V2({},i.defaultProps,$):$}}),Object.defineProperty(D,"toString",{value:function(){return"."+D.styledComponentId}}),p&&(0,iy.default)(D,i,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),D}function il(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];var p=No.apply(void 0,[i].concat(a)),f="sc-global-"+q(JSON.stringify(p)),g=new gt(p,f);function y(S){var T=Zm(),I=B2(),A=(0,ui.useContext)(Me),k=(0,ui.useRef)(T.allocateGSInstance(f)).current;return T.server&&w(k,S,T,A,I),(0,ui.useLayoutEffect)(function(){if(!T.server)return w(k,S,T,A,I),function(){return g.removeStyles(k,T)}},[k,S,T,A,I]),null}function w(S,T,I,A,k){if(g.isStatic)g.renderStyles(S,xx,I,k);else{var D=wa({},T,{theme:v(T,A,y.defaultProps)});g.renderStyles(S,D,I,k)}}return ui.default.memo(y)}var ry,ui,Qm,iy,oy,sy,xd,ea,ol,Sd,ay,xx,ly,Ed,Cd,mp,vp,Sx,gp,uy,j2,z2,Ex,Jm,cy,Fo,H2,dy,Cx,G2,eu,ev,Px,Ki,kx,hy,$2,Tx,Mx,py,fy,Ax,yp,Ix,W2,K2,my,Rx,Ox,Dx,v,E,L,q,ie,de,Me,$e,Ke,gt,se,Ne=C(()=>{ry=Z(vF()),ui=Z(Re()),Qm=Z(vx()),O2(),yF(),wF(),iy=Z(F2()),oy=function(i,s){for(var a=[i[0]],c=0,p=s.length;c<p;c+=1)a.push(s[c],i[c+1]);return a},sy=function(i){return i!==null&&typeof i=="object"&&(i.toString?i.toString():Object.prototype.toString.call(i))==="[object Object]"&&!(0,ry.typeOf)(i)},xd=Object.freeze([]),ea=Object.freeze({}),ol=typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Sd=typeof window<"u"&&"HTMLElement"in window,ay=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY)),xx={},ly=function(){function i(a){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=a}var s=i.prototype;return s.indexOfGroup=function(a){for(var c=0,p=0;p<a;p++)c+=this.groupSizes[p];return c},s.insertRules=function(a,c){if(a>=this.groupSizes.length){for(var p=this.groupSizes,f=p.length,g=f;a>=g;)(g<<=1)<0&&Lo(16,""+a);this.groupSizes=new Uint32Array(g),this.groupSizes.set(p),this.length=g;for(var y=f;y<g;y++)this.groupSizes[y]=0}for(var w=this.indexOfGroup(a+1),S=0,T=c.length;S<T;S++)this.tag.insertRule(w,c[S])&&(this.groupSizes[a]++,w++)},s.clearGroup=function(a){if(a<this.length){var c=this.groupSizes[a],p=this.indexOfGroup(a),f=p+c;this.groupSizes[a]=0;for(var g=p;g<f;g++)this.tag.deleteRule(p)}},s.getGroup=function(a){var c="";if(a>=this.length||this.groupSizes[a]===0)return c;for(var p=this.groupSizes[a],f=this.indexOfGroup(a),g=f+p,y=f;y<g;y++)c+=this.tag.getRule(y)+`/*!sc*/
`;return c},i}(),Ed=new Map,Cd=new Map,mp=1,vp=function(i){if(Ed.has(i))return Ed.get(i);for(;Cd.has(mp);)mp++;var s=mp++;return Ed.set(i,s),Cd.set(s,i),s},Sx=function(i){return Cd.get(i)},gp=function(i,s){s>=mp&&(mp=s+1),Ed.set(i,s),Cd.set(s,i)},uy="style["+ol+'][data-styled-version="5.3.11"]',j2=new RegExp("^"+ol+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),z2=function(i,s,a){for(var c,p=a.split(","),f=0,g=p.length;f<g;f++)(c=p[f])&&i.registerName(s,c)},Ex=function(i,s){for(var a=(s.textContent||"").split(`/*!sc*/
`),c=[],p=0,f=a.length;p<f;p++){var g=a[p].trim();if(g){var y=g.match(j2);if(y){var w=0|parseInt(y[1],10),S=y[2];w!==0&&(gp(S,w),z2(i,S,y[3]),i.getTag().insertRules(w,c)),c.length=0}else c.push(g)}}},Jm=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null},cy=function(i){var s=document.head,a=i||s,c=document.createElement("style"),p=function(y){for(var w=y.childNodes,S=w.length;S>=0;S--){var T=w[S];if(T&&T.nodeType===1&&T.hasAttribute(ol))return T}}(a),f=p!==void 0?p.nextSibling:null;c.setAttribute(ol,"active"),c.setAttribute("data-styled-version","5.3.11");var g=Jm();return g&&c.setAttribute("nonce",g),a.insertBefore(c,f),c},Fo=function(){function i(a){var c=this.element=cy(a);c.appendChild(document.createTextNode("")),this.sheet=function(p){if(p.sheet)return p.sheet;for(var f=document.styleSheets,g=0,y=f.length;g<y;g++){var w=f[g];if(w.ownerNode===p)return w}Lo(17)}(c),this.length=0}var s=i.prototype;return s.insertRule=function(a,c){try{return this.sheet.insertRule(c,a),this.length++,!0}catch{return!1}},s.deleteRule=function(a){this.sheet.deleteRule(a),this.length--},s.getRule=function(a){var c=this.sheet.cssRules[a];return c!==void 0&&typeof c.cssText=="string"?c.cssText:""},i}(),H2=function(){function i(a){var c=this.element=cy(a);this.nodes=c.childNodes,this.length=0}var s=i.prototype;return s.insertRule=function(a,c){if(a<=this.length&&a>=0){var p=document.createTextNode(c),f=this.nodes[a];return this.element.insertBefore(p,f||null),this.length++,!0}return!1},s.deleteRule=function(a){this.element.removeChild(this.nodes[a]),this.length--},s.getRule=function(a){return a<this.length?this.nodes[a].textContent:""},i}(),dy=function(){function i(a){this.rules=[],this.length=0}var s=i.prototype;return s.insertRule=function(a,c){return a<=this.length&&(this.rules.splice(a,0,c),this.length++,!0)},s.deleteRule=function(a){this.rules.splice(a,1),this.length--},s.getRule=function(a){return a<this.length?this.rules[a]:""},i}(),Cx=Sd,G2={isServer:!Sd,useCSSOMInjection:!ay},eu=function(){function i(a,c,p){a===void 0&&(a=ea),c===void 0&&(c={}),this.options=wa({},G2,{},a),this.gs=c,this.names=new Map(p),this.server=!!a.isServer,!this.server&&Sd&&Cx&&(Cx=!1,function(f){for(var g=document.querySelectorAll(uy),y=0,w=g.length;y<w;y++){var S=g[y];S&&S.getAttribute(ol)!=="active"&&(Ex(f,S),S.parentNode&&S.parentNode.removeChild(S))}}(this))}i.registerId=function(a){return vp(a)};var s=i.prototype;return s.reconstructWithOptions=function(a,c){return c===void 0&&(c=!0),new i(wa({},this.options,{},a),this.gs,c&&this.names||void 0)},s.allocateGSInstance=function(a){return this.gs[a]=(this.gs[a]||0)+1},s.getTag=function(){return this.tag||(this.tag=(p=(c=this.options).isServer,f=c.useCSSOMInjection,g=c.target,a=p?new dy(g):f?new Fo(g):new H2(g),new ly(a)));var a,c,p,f,g},s.hasNameForId=function(a,c){return this.names.has(a)&&this.names.get(a).has(c)},s.registerName=function(a,c){if(vp(a),this.names.has(a))this.names.get(a).add(c);else{var p=new Set;p.add(c),this.names.set(a,p)}},s.insertRules=function(a,c,p){this.registerName(a,c),this.getTag().insertRules(vp(a),p)},s.clearNames=function(a){this.names.has(a)&&this.names.get(a).clear()},s.clearRules=function(a){this.getTag().clearGroup(vp(a)),this.clearNames(a)},s.clearTag=function(){this.tag=void 0},s.toString=function(){return function(a){for(var c=a.getTag(),p=c.length,f="",g=0;g<p;g++){var y=Sx(g);if(y!==void 0){var w=a.names.get(y),S=c.getGroup(g);if(w&&S&&w.size){var T=ol+".g"+g+'[id="'+y+'"]',I="";w!==void 0&&w.forEach(function(A){A.length>0&&(I+=A+",")}),f+=""+S+T+'{content:"'+I+`"}/*!sc*/
`}}}return f}(this)},i}(),ev=/(a)(d)/gi,Px=function(i){return String.fromCharCode(i+(i>25?39:97))},Ki=function(i,s){for(var a=s.length;a;)i=33*i^s.charCodeAt(--a);return i},kx=function(i){return Ki(5381,i)},hy=kx("5.3.11"),$2=function(){function i(s,a,c){this.rules=s,this.staticRulesId="",this.isStatic=(c===void 0||c.isStatic)&&pp(s),this.componentId=a,this.baseHash=Ki(hy,a),this.baseStyle=c,eu.registerId(a)}return i.prototype.generateAndInjectStyles=function(s,a,c){var p=this.componentId,f=[];if(this.baseStyle&&f.push(this.baseStyle.generateAndInjectStyles(s,a,c)),this.isStatic&&!c.hash)if(this.staticRulesId&&a.hasNameForId(p,this.staticRulesId))f.push(this.staticRulesId);else{var g=Ql(this.rules,s,a,c).join(""),y=bx(Ki(this.baseHash,g)>>>0);if(!a.hasNameForId(p,y)){var w=c(g,"."+y,void 0,p);a.insertRules(p,y,w)}f.push(y),this.staticRulesId=y}else{for(var S=this.rules.length,T=Ki(this.baseHash,c.hash),I="",A=0;A<S;A++){var k=this.rules[A];if(typeof k=="string")I+=k;else if(k){var D=Ql(k,s,a,c),O=Array.isArray(D)?D.join(""):D;T=Ki(T,O+A),I+=O}}if(I){var F=bx(T>>>0);if(!a.hasNameForId(p,F)){var V=c(I,"."+F,void 0,p);a.insertRules(p,F,V)}f.push(F)}}return f.join(" ")},i}(),Tx=/^\s*\/\/.*$/gm,Mx=[":","[",".","#"],py=ui.default.createContext(),py.Consumer,fy=ui.default.createContext(),Ax=(fy.Consumer,new eu),yp=wd(),Ix=function(){function i(s,a){var c=this;this.inject=function(p,f){f===void 0&&(f=yp);var g=c.name+f.hash;p.hasNameForId(c.id,g)||p.insertRules(c.id,g,f(c.rules,g,"@keyframes"))},this.toString=function(){return Lo(12,String(c.name))},this.name=s,this.id="sc-keyframes-"+s,this.rules=a}return i.prototype.getName=function(s){return s===void 0&&(s=yp),this.name+s.hash},i}(),W2=/([A-Z])/,K2=/([A-Z])/g,my=/^ms-/,Rx=function(i){return"-"+i.toLowerCase()},Ox=function(i){return i==null||i===!1||i===""},Dx=function(i){return Array.isArray(i)&&(i.isCss=!0),i},v=function(i,s,a){return a===void 0&&(a=ea),i.theme!==a.theme&&i.theme||s||a.theme},E=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,L=/(^-|-$)/g,q=function(i){return bx(kx(i)>>>0)},ie=function(i){return typeof i=="function"||typeof i=="object"&&i!==null&&!Array.isArray(i)},de=function(i){return i!=="__proto__"&&i!=="constructor"&&i!=="prototype"},Me=ui.default.createContext(),Me.Consumer,$e={},Ke=function(i){return function s(a,c,p){if(p===void 0&&(p=ea),!(0,ry.isValidElementType)(c))return Lo(1,String(c));var f=function(){return a(c,p,No.apply(void 0,arguments))};return f.withConfig=function(g){return s(a,c,wa({},p,{},g))},f.attrs=function(g){return s(a,c,wa({},p,{attrs:Array.prototype.concat(p.attrs,g).filter(Boolean)}))},f}(ny,i)},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(i){Ke[i]=Ke(i)}),gt=function(){function i(a,c){this.rules=a,this.componentId=c,this.isStatic=pp(a),eu.registerId(this.componentId+1)}var s=i.prototype;return s.createStyles=function(a,c,p,f){var g=f(Ql(this.rules,c,p,f).join(""),""),y=this.componentId+a;p.insertRules(y,y,g)},s.removeStyles=function(a,c){c.clearRules(this.componentId+a)},s.renderStyles=function(a,c,p,f){a>2&&eu.registerId(this.componentId+a),this.removeStyles(a,p),this.createStyles(a,c,p,f)},i}(),function(){function i(){var a=this;this._emitSheetCSS=function(){var c=a.instance.toString();if(!c)return"";var p=Jm();return"<style "+[p&&'nonce="'+p+'"',ol+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+c+"</style>"},this.getStyleTags=function(){return a.sealed?Lo(2):a._emitSheetCSS()},this.getStyleElement=function(){var c;if(a.sealed)return Lo(2);var p=((c={})[ol]="",c["data-styled-version"]="5.3.11",c.dangerouslySetInnerHTML={__html:a.instance.toString()},c),f=Jm();return f&&(p.nonce=f),[ui.default.createElement("style",wa({},p,{key:"sc-0-0"}))]},this.seal=function(){a.sealed=!0},this.instance=new eu({isServer:!0}),this.sealed=!1}var s=i.prototype;return s.collectStyles=function(a){return this.sealed?Lo(2):ui.default.createElement(_x,{sheet:this.instance},a)},s.interleaveWithNodeStream=function(a){return Lo(3)},i}(),se=Ke});function Wt(){return Wt=Object.assign||function(i){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])}return i},Wt.apply(this,arguments)}var bn=C(()=>{});function un(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}var qn=C(()=>{});function Xn(i,s){return Xn=Object.setPrototypeOf||function(a,c){return a.__proto__=c,a},Xn(i,s)}var zn=C(()=>{});function fr(i,s){i.prototype=Object.create(s.prototype),i.prototype.constructor=i,Xn(i,s)}var _o=C(()=>{zn()});function wo(i){return wo=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},wo(i)}var xo=C(()=>{});function Br(i){return Function.toString.call(i).indexOf("[native code]")!==-1}var So=C(()=>{});function Ps(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var sl=C(()=>{});function al(i,s,a){return Ps()?al=Reflect.construct:al=function(c,p,f){var g=[null];g.push.apply(g,p);var y=Function.bind.apply(c,g),w=new y;return f&&Xn(w,f.prototype),w},al.apply(null,arguments)}var Pd=C(()=>{zn(),sl()});function tu(i){var s=typeof Map=="function"?new Map:void 0;return tu=function(a){if(a===null||!Br(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(typeof s<"u"){if(s.has(a))return s.get(a);s.set(a,c)}function c(){return al(a,arguments,wo(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),Xn(c,a)},tu(i)}var kd=C(()=>{xo(),zn(),So(),Pd()}),Td=C(()=>{});function Li(i){return i.charAt(0).toUpperCase()+i.slice(1)}function ks(i,s){if(!i)return s.toLowerCase();var a=i.split("-");if(a.length>1)return a.splice(1,0,s),a.reduce(function(p,f){return""+p+Li(f)});var c=i.replace(/([a-z])([A-Z])/g,"$1"+s+"$2");return i===c?""+i+s:c}function Kr(i,s){for(var a={},c=0;c<s.length;c+=1)(s[c]||s[c]===0)&&(a[ks(i,rW[c])]=s[c]);return a}function ll(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];var p=a[0],f=a[1],g=f===void 0?p:f,y=a[2],w=y===void 0?p:y,S=a[3],T=S===void 0?g:S,I=[p,g,w,T];return Kr(i,I)}function xa(i){return Math.round(i*255)}function zSe(i,s,a){return xa(i)+","+xa(s)+","+xa(a)}function Lx(i,s,a,c){if(c===void 0&&(c=zSe),s===0)return c(a,a,a);var p=(i%360+360)%360/60,f=(1-Math.abs(2*a-1))*s,g=f*(1-Math.abs(p%2-1)),y=0,w=0,S=0;p>=0&&p<1?(y=f,w=g):p>=1&&p<2?(y=g,w=f):p>=2&&p<3?(w=f,S=g):p>=3&&p<4?(w=g,S=f):p>=4&&p<5?(y=g,S=f):p>=5&&p<6&&(y=f,S=g);var T=a-f/2,I=y+T,A=w+T,k=S+T;return c(I,A,k)}function HSe(i){if(typeof i!="string")return i;var s=i.toLowerCase();return MF[s]?"#"+MF[s]:i}function SF(i){if(typeof i!="string")throw new nu(3);var s=HSe(i);if(s.match(iW))return{red:parseInt(""+s[1]+s[2],16),green:parseInt(""+s[3]+s[4],16),blue:parseInt(""+s[5]+s[6],16)};if(s.match(oW)){var a=parseFloat((parseInt(""+s[7]+s[8],16)/255).toFixed(2));return{red:parseInt(""+s[1]+s[2],16),green:parseInt(""+s[3]+s[4],16),blue:parseInt(""+s[5]+s[6],16),alpha:a}}if(s.match(sW))return{red:parseInt(""+s[1]+s[1],16),green:parseInt(""+s[2]+s[2],16),blue:parseInt(""+s[3]+s[3],16)};if(s.match(aW)){var c=parseFloat((parseInt(""+s[4]+s[4],16)/255).toFixed(2));return{red:parseInt(""+s[1]+s[1],16),green:parseInt(""+s[2]+s[2],16),blue:parseInt(""+s[3]+s[3],16),alpha:c}}var p=Z2.exec(s);if(p)return{red:parseInt(""+p[1],10),green:parseInt(""+p[2],10),blue:parseInt(""+p[3],10)};var f=lW.exec(s.substring(0,50));if(f)return{red:parseInt(""+f[1],10),green:parseInt(""+f[2],10),blue:parseInt(""+f[3],10),alpha:parseFloat(""+f[4])};var g=uW.exec(s);if(g){var y=parseInt(""+g[1],10),w=parseInt(""+g[2],10)/100,S=parseInt(""+g[3],10)/100,T="rgb("+Lx(y,w,S)+")",I=Z2.exec(T);if(!I)throw new nu(4,s,T);return{red:parseInt(""+I[1],10),green:parseInt(""+I[2],10),blue:parseInt(""+I[3],10)}}var A=cW.exec(s.substring(0,50));if(A){var k=parseInt(""+A[1],10),D=parseInt(""+A[2],10)/100,O=parseInt(""+A[3],10)/100,F="rgb("+Lx(k,D,O)+")",V=Z2.exec(F);if(!V)throw new nu(4,s,F);return{red:parseInt(""+V[1],10),green:parseInt(""+V[2],10),blue:parseInt(""+V[3],10),alpha:parseFloat(""+A[4])}}throw new nu(5)}function GSe(i){var s=i.red/255,a=i.green/255,c=i.blue/255,p=Math.max(s,a,c),f=Math.min(s,a,c),g=(p+f)/2;if(p===f)return i.alpha!==void 0?{hue:0,saturation:0,lightness:g,alpha:i.alpha}:{hue:0,saturation:0,lightness:g};var y,w=p-f,S=g>.5?w/(2-p-f):w/(p+f);switch(p){case s:y=(a-c)/w+(a<c?6:0);break;case a:y=(c-s)/w+2;break;default:y=(s-a)/w+4;break}return y*=60,i.alpha!==void 0?{hue:y,saturation:S,lightness:g,alpha:i.alpha}:{hue:y,saturation:S,lightness:g}}function EF(i){return GSe(SF(i))}function tv(i){var s=i.toString(16);return s.length===1?"0"+s:s}function CF(i){return tv(Math.round(i*255))}function $Se(i,s,a){return Q2("#"+CF(i)+CF(s)+CF(a))}function q2(i,s,a){return Lx(i,s,a,$Se)}function WSe(i,s,a){if(typeof i=="number"&&typeof s=="number"&&typeof a=="number")return q2(i,s,a);if(typeof i=="object"&&s===void 0&&a===void 0)return q2(i.hue,i.saturation,i.lightness);throw new nu(1)}function KSe(i,s,a,c){if(typeof i=="number"&&typeof s=="number"&&typeof a=="number"&&typeof c=="number")return c>=1?q2(i,s,a):"rgba("+Lx(i,s,a)+","+c+")";if(typeof i=="object"&&s===void 0&&a===void 0&&c===void 0)return i.alpha>=1?q2(i.hue,i.saturation,i.lightness):"rgba("+Lx(i.hue,i.saturation,i.lightness)+","+i.alpha+")";throw new nu(2)}function PF(i,s,a){if(typeof i=="number"&&typeof s=="number"&&typeof a=="number")return Q2("#"+tv(i)+tv(s)+tv(a));if(typeof i=="object"&&s===void 0&&a===void 0)return Q2("#"+tv(i.red)+tv(i.green)+tv(i.blue));throw new nu(6)}function tW(i,s,a,c){if(typeof i=="string"&&typeof s=="number"){var p=SF(i);return"rgba("+p.red+","+p.green+","+p.blue+","+s+")"}else{if(typeof i=="number"&&typeof s=="number"&&typeof a=="number"&&typeof c=="number")return c>=1?PF(i,s,a):"rgba("+i+","+s+","+a+","+c+")";if(typeof i=="object"&&s===void 0&&a===void 0&&c===void 0)return i.alpha>=1?PF(i.red,i.green,i.blue):"rgba("+i.red+","+i.green+","+i.blue+","+i.alpha+")"}throw new nu(7)}function kF(i){if(typeof i!="object")throw new nu(8);if(hW(i))return tW(i);if(dW(i))return PF(i);if(fW(i))return KSe(i);if(pW(i))return WSe(i);throw new nu(8)}function nW(i,s,a){return function(){var c=a.concat(Array.prototype.slice.call(arguments));return c.length>=s?i.apply(this,c):nW(i,s,c)}}function X2(i){return nW(i,i.length,[])}function Y2(i,s,a){return Math.max(i,Math.min(s,a))}function qSe(i,s){if(s==="transparent")return s;var a=EF(s);return kF(Wt({},a,{lightness:Y2(0,1,a.lightness-parseFloat(i))}))}function XSe(i,s){if(s==="transparent")return s;var a=EF(s);return kF(Wt({},a,{lightness:Y2(0,1,a.lightness+parseFloat(i))}))}function YSe(i,s){if(s==="transparent")return s;var a=EF(s);return kF(Wt({},a,{saturation:Y2(0,1,a.saturation+parseFloat(i))}))}function ZSe(i,s){if(s==="transparent")return s;var a=SF(s),c=typeof a.alpha=="number"?a.alpha:1,p=Wt({},a,{alpha:Y2(0,1,+(c*100-parseFloat(i)*100).toFixed(2)/100)});return tW(p)}function TF(i){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return mW.indexOf(i)>=0&&i?Wt({},ll.apply(void 0,[""].concat(a)),{position:i}):ll.apply(void 0,["",i].concat(a))}var nu,rW,MF,iW,oW,sW,aW,Z2,lW,uW,cW,Q2,dW,hW,pW,fW,Nx,vy,J2,ru,mW,Sa=C(()=>{bn(),qn(),_o(),kd(),Td(),nu=function(i){fr(s,i);function s(a){var c;return c=i.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+a+" for more information.")||this,un(c)}return s}(tu(Error)),rW=["Top","Right","Bottom","Left"],MF={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},iW=/^#[a-fA-F0-9]{6}$/,oW=/^#[a-fA-F0-9]{8}$/,sW=/^#[a-fA-F0-9]{3}$/,aW=/^#[a-fA-F0-9]{4}$/,Z2=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,lW=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,uW=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,cW=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,Q2=function(i){return i.length===7&&i[1]===i[2]&&i[3]===i[4]&&i[5]===i[6]?"#"+i[1]+i[3]+i[5]:i},dW=function(i){return typeof i.red=="number"&&typeof i.green=="number"&&typeof i.blue=="number"&&(typeof i.alpha!="number"||typeof i.alpha>"u")},hW=function(i){return typeof i.red=="number"&&typeof i.green=="number"&&typeof i.blue=="number"&&typeof i.alpha=="number"},pW=function(i){return typeof i.hue=="number"&&typeof i.saturation=="number"&&typeof i.lightness=="number"&&(typeof i.alpha!="number"||typeof i.alpha>"u")},fW=function(i){return typeof i.hue=="number"&&typeof i.saturation=="number"&&typeof i.lightness=="number"&&typeof i.alpha=="number"},Nx=X2(qSe),vy=X2(XSe),J2=X2(YSe),ru=X2(ZSe),mW=["absolute","fixed","relative","static","sticky"]});function QSe(i,s,a){return s in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i}function vW(i,s){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);s&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),a.push.apply(a,c)}return a}function nv(i){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?vW(Object(a),!0).forEach(function(c){QSe(i,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):vW(Object(a)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(a,c))})}return i}function gy(i,s){if(i==null)return{};var a={},c=Object.keys(i),p,f;for(f=0;f<c.length;f++)p=c[f],!(s.indexOf(p)>=0)&&(a[p]=i[p]);return a}var Fx=C(()=>{}),gW,AF,yW=C(()=>{gW=Z(Re()),AF=(0,gW.createContext)({})});function JSe(i,s,a){return s in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i}function bW(i,s){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);s&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),a.push.apply(a,c)}return a}function yy(i){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?bW(Object(a),!0).forEach(function(c){JSe(i,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):bW(Object(a)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(a,c))})}return i}function IF(i,s){if(i==null)return{};var a={},c=Object.keys(i),p,f;for(f=0;f<c.length;f++)p=c[f],!(s.indexOf(p)>=0)&&(a[p]=i[p]);return a}function eEe(i,s){if(i){if(typeof i=="string")return _W(i,s);var a=Object.prototype.toString.call(i).slice(8,-1);if(a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set")return Array.from(i);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _W(i,s)}}function _W(i,s){(s==null||s>i.length)&&(s=i.length);for(var a=0,c=new Array(s);a<s;a++)c[a]=i[a];return c}function wW(i,s){var a;if(typeof Symbol>"u"||i[Symbol.iterator]==null){if(Array.isArray(i)||(a=eEe(i))||s&&i&&typeof i.length=="number"){a&&(i=a);var c=0;return function(){return c>=i.length?{done:!0}:{done:!1,value:i[c++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return a=i[Symbol.iterator](),a.next.bind(a)}var eA=C(()=>{});function tEe(i){return typeof i=="function"}var RF,xW,nEe=C(()=>{RF=Z(Re()),yW(),eA(),xW=function(i,s,a){a===void 0&&(a=s.children);var c=(0,RF.useContext)(AF);if(c.useCreateElement)return c.useCreateElement(i,s,a);if(typeof i=="string"&&tEe(a)){s.children;var p=IF(s,["children"]);return a(p)}return(0,RF.createElement)(i,s,a)}});function rEe(i,s,a){return s in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a,i}function SW(i,s){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);s&&(c=c.filter(function(p){return Object.getOwnPropertyDescriptor(i,p).enumerable})),a.push.apply(a,c)}return a}function by(i){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?SW(Object(a),!0).forEach(function(c){rEe(i,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):SW(Object(a)).forEach(function(c){Object.defineProperty(i,c,Object.getOwnPropertyDescriptor(a,c))})}return i}function iEe(i,s){if(i==null)return{};var a={},c=Object.keys(i),p,f;for(f=0;f<c.length;f++)p=c[f],!(s.indexOf(p)>=0)&&(a[p]=i[p]);return a}var EW=C(()=>{});function oEe(i){return typeof i=="object"&&i!=null}var sEe=C(()=>{});function OF(i){var s;if(!oEe(i))return!1;var a=Object.getPrototypeOf(i);return a==null?!0:((s=a.constructor)===null||s===void 0?void 0:s.toString())===Object.toString()}var CW=C(()=>{sEe()});function PW(i,s){for(var a=Object.keys(i),c={},p={},f=0,g=a;f<g.length;f++){var y=g[f];s.indexOf(y)>=0?c[y]=i[y]:p[y]=i[y]}return[c,p]}function kW(i,s){if(s===void 0&&(s=[]),!OF(i.state))return PW(i,s);var a=PW(i,[].concat(s,["state"])),c=a[0],p=a[1],f=c.state,g=iEe(c,["state"]);return[by(by({},f),g),p]}var aEe=C(()=>{EW(),CW()});function tA(i,s){if(i===s)return!0;if(!i||!s||typeof i!="object"||typeof s!="object")return!1;var a=Object.keys(i),c=Object.keys(s),p=a.length;if(c.length!==p)return!1;for(var f=0,g=a;f<g.length;f++){var y=g[f];if(i[y]!==s[y])return!1}return!0}var DF=C(()=>{});function TW(i){return i.name==="normalizePropsAreEqualInner"?i:function(s,a){return!OF(s.state)||!OF(a.state)?i(s,a):i(by(by({},s.state),s),by(by({},a.state),a))}}var lEe=C(()=>{EW(),CW()});function uEe(i){return(0,LF.forwardRef)(i)}function cEe(i,s){return(0,LF.memo)(i,s)}function Bx(i){var s=i.as,a=i.useHook,c=i.memo,p=i.propsAreEqual,f=p===void 0?a==null?void 0:a.unstable_propsAreEqual:p,g=i.keys,y=g===void 0?(a==null?void 0:a.__keys)||[]:g,w=i.useCreateElement,S=w===void 0?xW:w,T=function(I,A){var k=I.as,D=k===void 0?s:k,O=IF(I,["as"]);if(a){var F,V=kW(O,y),$=V[0],X=V[1],re=a($,yy({ref:A},X)),ne=re.wrapElement,ae=IF(re,["wrapElement"]),Se=((F=D.render)===null||F===void 0?void 0:F.__keys)||D.__keys,fe=Se&&kW(O,Se)[0],ge=fe?yy(yy({},ae),fe):ae,Ie=S(D,ge);return ne?ne(Ie):Ie}return S(D,yy({ref:A},O))};return T=uEe(T),c&&(T=cEe(T,f&&TW(f))),T.__keys=y,T.unstable_propsAreEqual=TW(f||tA),T}var LF,Ux=C(()=>{LF=Z(Re()),eA(),nEe(),aEe(),DF(),lEe()});function MW(i,s){(0,NF.useDebugValue)(i);var a=(0,NF.useContext)(AF);return a[i]!=null?a[i]:s}var NF,AW=C(()=>{NF=Z(Re()),yW()});function dEe(i,s,a){s===void 0&&(s={}),a===void 0&&(a={});var c="use"+i+"Props";(0,IW.useDebugValue)(c);var p=MW(c);return p?p(s,a):a}var IW,hEe=C(()=>{IW=Z(Re()),AW()});function pEe(i,s,a){s===void 0&&(s={}),a===void 0&&(a={});var c="use"+i+"Options";(0,RW.useDebugValue)(c);var p=MW(c);return p?yy(yy({},s),p(s,a)):s}var RW,fEe=C(()=>{RW=Z(Re()),AW(),eA()});function mEe(i){return Array.isArray(i)?i:typeof i<"u"?[i]:[]}var vEe=C(()=>{});function Vx(i){var s,a,c=mEe(i.compose),p=function(y,w){if(i.useOptions&&(y=i.useOptions(y,w)),i.name&&(y=pEe(i.name,y,w)),i.compose)for(var S=wW(c),T;!(T=S()).done;){var I=T.value;y=I.__useOptions(y,w)}return y},f=function(y,w,S){if(y===void 0&&(y={}),w===void 0&&(w={}),S===void 0&&(S=!1),S||(y=p(y,w)),i.useProps&&(w=i.useProps(y,w)),i.name&&(w=dEe(i.name,y,w)),i.compose)if(i.useComposeOptions&&(y=i.useComposeOptions(y,w)),i.useComposeProps)w=i.useComposeProps(y,w);else for(var T=wW(c),I;!(I=T()).done;){var A=I.value;w=A(y,w,!0)}var k={},D=w||{};for(var O in D)D[O]!==void 0&&(k[O]=D[O]);return k};f.__useOptions=p;var g=c.reduce(function(y,w){return y.push.apply(y,w.__keys||[]),y},[]);return f.__keys=[].concat(g,((s=i.useState)===null||s===void 0?void 0:s.__keys)||[],i.keys||[]),f.unstable_propsAreEqual=i.propsAreEqual||((a=c[0])===null||a===void 0?void 0:a.unstable_propsAreEqual)||tA,f}var jx=C(()=>{Z(Re()),hEe(),eA(),fEe(),DF(),vEe()});function OW(i,s){s===void 0&&(s=null),i&&(typeof i=="function"?i(s):i.current=s)}function DW(i,s){return(0,LW.useMemo)(function(){return i==null&&s==null?null:function(a){OW(i,a),OW(s,a)}},[i,s])}var LW,NW=C(()=>{LW=Z(Re())});function FF(i){if(i.tagName==="BUTTON")return!0;if(i.tagName==="INPUT"){var s=i;return FW.indexOf(s.type)!==-1}return!1}var FW,BF=C(()=>{FW=["button","color","file","image","reset","submit"]}),UF=C(()=>{}),gEe=C(()=>{UF(),Z(Re())}),nA=C(()=>{UF(),Z(Re()),gEe()});function BW(i){return i?i.ownerDocument||i:document}var UW=C(()=>{});function yEe(i){return i&&BW(i).defaultView||VW}var VW,bEe=C(()=>{UW();try{VW=window}catch{}});function _Ee(){var i=yEe();return!!(typeof i<"u"&&i.document&&i.document.createElement)}var rA,VF=C(()=>{bEe(),rA=_Ee()}),jF,zF,HF=C(()=>{jF=Z(Re()),VF(),zF=rA?jF.useLayoutEffect:jF.useEffect});function _y(i){var s=(0,jW.useRef)(i);return zF(function(){s.current=i}),s}var jW,zW=C(()=>{jW=Z(Re()),HF()});function wEe(i){return i.target===i.currentTarget}var xEe=C(()=>{});function SEe(i){var s=BW(i),a=s.activeElement;return a!=null&&a.nodeName?a:null}var EEe=C(()=>{UW()});function HW(i,s){return i===s||i.contains(s)}var GW=C(()=>{});function CEe(i){var s=SEe(i);if(!s)return!1;if(HW(i,s))return!0;var a=s.getAttribute("aria-activedescendant");return a?a===i.id?!0:!!i.querySelector("#"+a):!1}var PEe=C(()=>{EEe(),GW()});function kEe(i){return!HW(i.currentTarget,i.target)}var TEe=C(()=>{GW()});function iA(i){return rA?window.navigator.userAgent.indexOf(i)!==-1:!1}var MEe=C(()=>{VF()});function AEe(i,s){return"matches"in i?i.matches(s):"msMatchesSelector"in i?i.msMatchesSelector(s):i.webkitMatchesSelector(s)}var IEe=C(()=>{});function REe(i){var s=i;return s.offsetWidth>0||s.offsetHeight>0||i.getClientRects().length>0}function OEe(i){return AEe(i,$W)&&REe(i)}var $W,DEe=C(()=>{IEe(),$W="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])"}),WW,oA,KW=C(()=>{Fx(),Ux(),jx(),DF(),WW=["unstable_system"],oA=Vx({name:"Role",keys:WW,propsAreEqual:function(i,s){var a=i.unstable_system,c=gy(i,["unstable_system"]),p=s.unstable_system,f=gy(s,["unstable_system"]);return a!==p&&!tA(a,p)?!1:tA(c,f)}}),Bx({as:"div",useHook:oA})});function qW(i){!CEe(i)&&OEe(i)&&i.focus()}function LEe(i){return i.tagName==="BUTTON"||i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.tagName==="A"}function NEe(i){return i.tagName==="BUTTON"||i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"}function FEe(i,s,a,c){return i?s&&!a?-1:void 0:s?c:c||0}function GF(i,s){return(0,wy.useCallback)(function(a){var c;(c=i.current)===null||c===void 0||c.call(i,a),!a.defaultPrevented&&s&&(a.stopPropagation(),a.preventDefault())},[i,s])}var wy,XW,YW,$F,BEe=C(()=>{Fx(),Ux(),jx(),wy=Z(Re()),NW(),BF(),nA(),zW(),HF(),PEe(),TEe(),MEe(),DEe(),KW(),XW=["disabled","focusable"],YW=iA("Mac")&&!iA("Chrome")&&(iA("Safari")||iA("Firefox")),$F=Vx({name:"Tabbable",compose:oA,keys:XW,useOptions:function(i,s){var a=s.disabled;return nv({disabled:a},i)},useProps:function(i,s){var a=s.ref,c=s.tabIndex,p=s.onClickCapture,f=s.onMouseDownCapture,g=s.onMouseDown,y=s.onKeyPressCapture,w=s.style,S=gy(s,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),T=(0,wy.useRef)(null),I=_y(p),A=_y(f),k=_y(g),D=_y(y),O=!!i.disabled&&!i.focusable,F=(0,wy.useState)(!0),V=F[0],$=F[1],X=(0,wy.useState)(!0),re=X[0],ne=X[1],ae=i.disabled?nv({pointerEvents:"none"},w):w;zF(function(){var Qe=T.current;Qe&&(LEe(Qe)||$(!1),NEe(Qe)||ne(!1))},[]);var Se=GF(I,i.disabled),fe=GF(A,i.disabled),ge=GF(D,i.disabled),Ie=(0,wy.useCallback)(function(Qe){var le;(le=k.current)===null||le===void 0||le.call(k,Qe);var Ae=Qe.currentTarget;if(!Qe.defaultPrevented&&YW&&!kEe(Qe)&&FF(Ae)){var Y=requestAnimationFrame(function(){Ae.removeEventListener("mouseup",Ue,!0),qW(Ae)}),Ue=function(){cancelAnimationFrame(Y),qW(Ae)};Ae.addEventListener("mouseup",Ue,{once:!0,capture:!0})}},[]);return nv({ref:DW(T,a),style:ae,tabIndex:FEe(O,V,re,c),disabled:O&&re?!0:void 0,"aria-disabled":i.disabled?!0:void 0,onClickCapture:Se,onMouseDownCapture:fe,onMouseDown:Ie,onKeyPressCapture:ge},S)}}),Bx({as:"div",useHook:$F})});function UEe(i){var s=i.currentTarget;return i.isTrusted?FF(s)||s.tagName==="INPUT"||s.tagName==="TEXTAREA"||s.tagName==="A"||s.tagName==="SELECT":!1}var sA,ZW,WF,VEe=C(()=>{Fx(),Ux(),jx(),sA=Z(Re()),BF(),nA(),zW(),xEe(),BEe(),ZW=["unstable_clickOnEnter","unstable_clickOnSpace"],WF=Vx({name:"Clickable",compose:$F,keys:ZW,useOptions:function(i){var s=i.unstable_clickOnEnter,a=s===void 0?!0:s,c=i.unstable_clickOnSpace,p=c===void 0?!0:c,f=gy(i,["unstable_clickOnEnter","unstable_clickOnSpace"]);return nv({unstable_clickOnEnter:a,unstable_clickOnSpace:p},f)},useProps:function(i,s){var a=s.onKeyDown,c=s.onKeyUp,p=gy(s,["onKeyDown","onKeyUp"]),f=(0,sA.useState)(!1),g=f[0],y=f[1],w=_y(a),S=_y(c),T=(0,sA.useCallback)(function(A){var k;if((k=w.current)===null||k===void 0||k.call(w,A),!A.defaultPrevented&&!i.disabled&&!A.metaKey&&wEe(A)){var D=i.unstable_clickOnEnter&&A.key==="Enter",O=i.unstable_clickOnSpace&&A.key===" ";if(D||O){if(UEe(A))return;A.preventDefault(),D?A.currentTarget.click():O&&y(!0)}}},[i.disabled,i.unstable_clickOnEnter,i.unstable_clickOnSpace]),I=(0,sA.useCallback)(function(A){var k;if((k=S.current)===null||k===void 0||k.call(S,A),!A.defaultPrevented&&!i.disabled&&!A.metaKey){var D=i.unstable_clickOnSpace&&A.key===" ";g&&D&&(y(!1),A.currentTarget.click())}},[i.disabled,i.unstable_clickOnSpace,g]);return nv({"data-active":g||void 0,onKeyDown:T,onKeyUp:I},p)}}),Bx({as:"button",memo:!0,useHook:WF})}),zx,QW,JW,e7,jEe=C(()=>{Fx(),Ux(),jx(),zx=Z(Re()),NW(),BF(),nA(),VEe(),QW=[],JW=Vx({name:"Button",compose:WF,keys:QW,useProps:function(i,s){var a=s.ref,c=gy(s,["ref"]),p=(0,zx.useRef)(null),f=(0,zx.useState)(void 0),g=f[0],y=f[1],w=(0,zx.useState)("button"),S=w[0],T=w[1];return(0,zx.useEffect)(function(){var I=p.current;I&&(FF(I)||(I.tagName!=="A"&&y("button"),T(void 0)))},[]),nv({ref:DW(p,a),role:g,type:S},c)}}),e7=Bx({as:"button",memo:!0,useHook:JW})}),t7,n7,r7,zEe=C(()=>{Fx(),Ux(),jx(),KW(),t7=[],n7=Vx({name:"Group",compose:oA,keys:t7,useProps:function(i,s){return nv({role:"group"},s)}}),r7=Bx({as:"div",useHook:n7})});function HEe(){return rA?document.body:null}var i7,xy,GEe=C(()=>{i7=Z(Re()),HF(),VF(),Z(Xl()),xy=(0,i7.createContext)(HEe())}),KF,$Ee=C(()=>{typeof window<"u"&&(KF={get passive(){}},window.addEventListener("testPassive",null,KF),window.removeEventListener("testPassive",null,KF))}),rv=C(()=>{Z(Re()),nA(),jEe(),zEe(),Z(Xl()),GEe(),$Ee(),UF()});function sr(i){let s=(0,qF.useMemo)(()=>{let p=i;return{get current(){return p},set current(f){p=f,c(f)}}},[]),[a,c]=(0,qF.useState)(()=>i);return[s,a]}var qF,mr=C(()=>{qF=Z(Re())});function WEe(i){return s=>is.default.createElement(c7,null,is.default.createElement(i,j({},s)))}var is,o7,s7,hr,Sy,a7,l7,u7,XF,YF,c7,vr=C(()=>{Sa(),Ne(),Ne(),is=Z(Re()),o7=Z(Xl()),rv(),mr(),hr=No(s7||(s7=G([`
  #pointer-root & {
    pointer-events: none;
  }
  #pointer-root.normal & {
    pointer-events: auto;
  }
`]))),Sy={panel:{bg:"#282b2f",head:{title:{color:"#bbb"},punctuation:{color:"#808080"}},body:{compoudThing:{label:{get color(){return vy(.6,Sy.panel.bg)}}}}}},l7=typeof window<"u"?il(a7||(a7=G([`
  :host {
    all: initial;
    color: white;
    font: 11px -apple-system, BlinkMacSystemFont, Segoe WPC, Segoe Editor,
      HelveticaNeue-Light, Ubuntu, Droid Sans, sans-serif;
  }

  * {
    padding: 0;
    margin: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    list-style: none;
  }
`]))):{},XF=se.div(u7||(u7=G([`
  z-index: 51;
  position: fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  pointer-events: none;
`]))),YF=i=>is.default.createElement(_x,{disableVendorPrefixes:!0,target:i.target},is.default.createElement(is.default.Fragment,null,is.default.createElement(l7,null),i.children)),c7=i=>{let[s,a]=(0,is.useState)(null),[c,p]=(0,is.useState)(null);(0,is.useLayoutEffect)(()=>{if(!s)return;let{parentNode:y}=s;if(!y)return;let w=y.shadowRoot?parent.shadowRoot:y.attachShadow({mode:"open"});p(w)},[s]);let[f,g]=sr(void 0);return c?o7.default.createPortal(is.default.createElement(YF,{target:c},is.default.createElement(is.default.Fragment,null,is.default.createElement(XF,{ref:f}),is.default.createElement(xy.Provider,{value:g},i.children))),c):is.default.createElement("template",{ref:a,"shadow-root":"open"},i.children)}}),Ey,d7,h7,bp,p7,Hx,f7,m7,aA,v7,ZF,ic,Md=C(()=>{vr(),Ne(),Ey={get outlinePanel(){return 1},get propsPanel(){return Ey.outlinePanel},get sequenceEditorPanel(){return this.outlinePanel-1},get toolbar(){return this.outlinePanel+1},get pluginPanes(){return this.sequenceEditorPanel-1}},d7=Sy.panel.bg,bp=se.span(h7||(h7=G([`
  white-space: nowrap;
`]))),Hx=se.span(p7||(p7=G([`
  white-space: nowrap;
  color: `,`;
`])),Sy.panel.head.punctuation.color),m7=se.div(f7||(f7=G([`
  background: `,`;
  flex-grow: 1;
  overflow-y: scroll;
  padding: 0;
`])),d7),aA=18,ZF=se.div(v7||(v7=G([`
  height: `,`px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  padding: 0 10px;
  position: relative;
  color: #adadadb3;
  border-bottom: 1px solid rgb(0 0 0 / 13%);
  background-color: #25272b;
  font-size: 10px;
  font-weight: 500;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`])),aA),ic=100}),g7,iu,Cy=C(()=>{g7=()=>{},iu=g7});function KEe(i){return QF.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),QF.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.775 2.781a.5.5 0 01.5.5v1.7H4.67c.108-.957.92-1.7 1.905-1.7h6.608a1.917 1.917 0 110 3.834H6.574c-.78 0-1.452-.466-1.751-1.135H2.275v5.03h2.39a2.032 2.032 0 012.023-1.854h6.38a2.031 2.031 0 110 4.063h-6.38c-.83 0-1.543-.497-1.858-1.21H1.775a.5.5 0 01-.5-.5V3.281a.5.5 0 01.5-.5zm4.799 1.5h6.608a.917.917 0 110 1.834H6.574a.917.917 0 110-1.834zm.114 5.875h6.38a1.031 1.031 0 110 2.063h-6.38a1.032 1.032 0 110-2.063z",fill:"currentColor"}))}var QF,JF,qEe=C(()=>{QF=Z(Re()),JF=KEe});function XEe(i){return eB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),eB.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.5L4 6.654 5.2 5.5 8 8.385 10.8 5.5 12 6.654 8 10.5z",fill:"currentColor"}))}var eB,y7,YEe=C(()=>{eB=Z(Re()),y7=XEe});function ZEe(i){return tB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),tB.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 3c-1.072 0-1.969.904-1.969 1.969 0 1 .929 1.968 1.969 1.968h9A1.969 1.969 0 1012.5 3h-9zm9 1H5.531v1.938H12.5A.969.969 0 0012.5 4zM3.5 9.14a1.969 1.969 0 000 3.938h9a1.969 1.969 0 100-3.937h-9zm9 1H8.406v1.938H12.5a.969.969 0 100-1.937z",fill:"currentColor"}))}var tB,b7,QEe=C(()=>{tB=Z(Re()),b7=ZEe});function JEe(i){return nB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),nB.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.166 7.994a2.26 2.26 0 114.518 0 2.26 2.26 0 01-4.518 0zM2.425 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM5.74 7.994a2.26 2.26 0 114.519 0 2.26 2.26 0 01-4.519 0zM8 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM13.575 5.735a2.26 2.26 0 100 4.519 2.26 2.26 0 000-4.52zm-1.086 2.26a1.085 1.085 0 112.171 0 1.085 1.085 0 01-2.17 0z",fill:"currentColor"}))}var nB,_7,eCe=C(()=>{nB=Z(Re()),_7=JEe});function tCe(i){return rB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),rB.createElement("path",{d:"M8.339 4.5l-2.055.644 4.451 1.393v2.748l-2.966.928-2.504-.783V6.738l2.42.758 2.055-.644-4.458-1.395L4 5.858v4.463L7.768 11.5 12 10.175V5.646L8.339 4.5z",fill:"currentColor"}))}var rB,iB,nCe=C(()=>{rB=Z(Re()),iB=tCe});function rCe(i){return oB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),oB.createElement("path",{d:"M8 1.57c-.416 0-.752.36-.752.804v.482c-1.715.372-3.006 1.994-3.006 3.938v.473c0 1.18-.407 2.32-1.14 3.205l-.173.208a.85.85 0 00-.125.864.75.75 0 00.686.475h9.019a.752.752 0 00.686-.475.845.845 0 00-.125-.864l-.174-.208a5.026 5.026 0 01-1.139-3.205v-.473c0-1.944-1.291-3.566-3.006-3.938v-.482c0-.445-.336-.804-.752-.804zm1.063 12.39c.282-.301.44-.71.44-1.138H6.496c0 .428.158.837.44 1.138.281.302.664.47 1.063.47.4 0 .783-.168 1.064-.47z",fill:"currentColor"}))}var oB,lA,iCe=C(()=>{oB=Z(Re()),lA=rCe});function oCe(i){return sB.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),sB.createElement("path",{d:"M6.8 11.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6zm6-7.2h-2.4v-.6A1.8 1.8 0 008.6 2H7.4a1.8 1.8 0 00-1.8 1.8v.6H3.2a.6.6 0 100 1.2h.6v6.6A1.8 1.8 0 005.6 14h4.8a1.8 1.8 0 001.8-1.8V5.6h.6a.6.6 0 100-1.2zm-6-.6a.6.6 0 01.6-.6h1.2a.6.6 0 01.6.6v.6H6.8v-.6zm4.2 8.4a.6.6 0 01-.6.6H5.6a.6.6 0 01-.6-.6V5.6h6v6.6zm-1.8-.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6z",fill:"currentColor"}))}var sB,aB,sCe=C(()=>{sB=Z(Re()),aB=oCe}),Gx=C(()=>{qEe(),YEe(),QEe(),eCe(),nCe(),iCe(),sCe()}),oc,w7,uA,x7,S7,E7,C7,P7,k7,T7,M7,A7,I7,R7,O7,D7,L7,N7,$x,cA=C(()=>{oc=Z(Re()),Ne(),Cy(),vr(),Gx(),uA=se.li(w7||(w7=G([`
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  justify-content: flex-start;
  flex-direction: column;
  align-items: flex-start;
`]))),S7=se.div(x7||(x7=G([""]))),C7=se(S7)(E7||(E7=G([`
  position: relative;
  margin-top: 2px;
  margin-bottom: 2px;
  margin-left: calc(4px + var(--depth) * 16px);
  padding-left: 4px;
  padding-right: 8px;
  gap: 4px;
  height: 21px;
  line-height: 0;
  box-sizing: border-box;
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  pointer-events: none;
  white-space: nowrap;

  border-radius: 2px;
  box-shadow: 0 3px 4px -1px rgba(0, 0, 0, 0.48);

  color: rgba(255, 255, 255, 0.9);
  background: rgba(40, 43, 47, 0.65);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);

  &.descendant-is-selected {
    background: rgba(29, 53, 59, 0.7);
  }

  `,`;
  &:not(.not-selectable):not(.selected):hover {
    background: rgba(59, 63, 69, 0.9);

    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &:not(.not-selectable):not(.selected):active {
    background: rgba(82, 88, 96, 0.9);
    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &.selected {
    background: rgba(30, 88, 102, 0.7);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr),k7=No(P7||(P7=G([`
  font-weight: 500;
  font-size: 11px;
  & {
  }
`]))),M7=se.span(T7||(T7=G([`
  `,`;

  `,`;
  position: relative;
  // Compensate for border bottom
  top: 0.5px;
  display: flex;
  height: 20px;
  align-items: center;
  box-sizing: border-box;
`])),k7,hr),I7=se.div(A7||(A7=G([`
  font-weight: 500;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  opacity: 0.99;
`]))),O7=se.span(R7||(R7=G([`
  font-size: 9px;
  position: relative;
  display: block;
  transition: transform 0.1s ease-out;

  &:hover {
    transform: rotate(-20deg);
  }

  `,`.collapsed & {
    transform: rotate(-90deg);

    &:hover {
      transform: rotate(-70deg);
    }
  }
`])),uA),L7=se.ul(D7||(D7=G([`
  margin: 0;
  padding: 0;
  list-style: none;

  `,`.collapsed & {
    display: none;
  }
`])),uA),N7=({label:i,children:s,depth:a,select:c,selectionStatus:p,labelDecoration:f,collapsed:g=!1,setIsCollapsed:y})=>{let w=s!==void 0;return oc.default.createElement(uA,{style:{"--depth":a},className:g?"collapsed":""},oc.default.createElement(C7,{className:p,onClick:c??iu,"data-header":!0},oc.default.createElement(I7,null,w?oc.default.createElement(O7,{onClick:S=>{S.stopPropagation(),S.preventDefault(),y==null||y(!g)}},oc.default.createElement(y7,null)):oc.default.createElement(iB,null)),oc.default.createElement(M7,null,oc.default.createElement("span",null,i)),f),w&&oc.default.createElement(L7,null,s))},$x=N7});function aCe(i){return Object.keys(i)}function lCe(i){return Object.keys((0,sc.val)(i.sheetTemplatesP))}function uCe(){let i=rs(_p().filter(s=>$t(s)||Dt(s)).map(s=>Dt(s)?s.sheet:s))[0];if(i)return i.getSequence()}var sc,_p,F7,wp=C(()=>{sc=Mt,Wn(),Jr(),Fe(),_p=()=>{var i;let s=(0,sc.val)(me().projectsP),a=((i=(0,sc.val)(me().atomP.historic.panels.outlinePanel.selection))!=null?i:[]).map(c=>{let p=s[c.projectId];if(!p)return;if(c.type==="Project")return p;if(!(0,sc.val)(p.sheetTemplatesP[c.sheetId]))return;let f=F7(p,c.sheetId);if(!f)return;if(c.type==="Sheet")return f;let g=(0,sc.val)(f.objectsP[c.objectKey]);if(g)return g});return rs(a.filter(c=>typeof c<"u"))},F7=(i,s)=>{let a=me().atomP.historic.projects.stateByProjectId[i.address.projectId],c=(0,sc.val)(a.stateBySheetId[s].selectedInstanceId),p=(0,sc.val)(i.sheetTemplatesP[s]);if(p){if(c)return(0,sc.val)(p.instancesP[c]);{let f=(0,sc.val)(p.instancesP);return f[aCe(f)[0]]}}}}),B7,U7,cCe=C(()=>{Fe(),B7=Z(Re()),cA(),hn(),wp(),U7=({sheetObject:i,depth:s,overrideLabel:a})=>{let c=()=>{me().transaction(({stateEditors:f})=>{f.studio.historic.panels.outline.selection.set([i])})},p=Un(()=>_p(),[]);return B7.default.createElement($x,{select:c,label:a??i.address.objectKey,depth:s,selectionStatus:p.includes(i)?"selected":"not-selected"})}});function lB(i){var s;let a=i.type==="namespace"?"namespace:".concat(i.sheet.address.sheetId,":").concat(i.path.join("/")):i.type==="Theatre_Project"?"project":i.type==="Theatre_Sheet"?"sheetInstance:".concat(i.address.sheetId,":").concat(i.address.sheetInstanceId):"unknown",c=i.type==="namespace"?i.sheet.address.projectId:i.address.projectId,p=(s=$n(me().atomP.ahistoric.projects.stateByProjectId[c].collapsedItemsInOutline[a]))!=null?s:!1,f=(0,V7.useCallback)(g=>{me().transaction(({stateEditors:y})=>{y.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline.set({projectId:c,isCollapsed:g,itemKey:a})})},[a]);return{collapsed:p,setCollapsed:f}}var V7,uB=C(()=>{V7=Z(Re()),Fe(),hn()});function j7(i){return ac.default.createElement(ac.default.Fragment,null,[...i.namespace.entries()].map(([s,{object:a,nested:c}])=>ac.default.createElement(dCe,{key:s,label:s,object:a,nested:c,visualIndentation:i.visualIndentation,path:i.path,sheet:i.sheet})))}function dCe(i){let{nested:s,label:a,object:c,sheet:p}=i,{collapsed:f,setCollapsed:g}=lB({type:"namespace",sheet:p,path:[...i.path,a]}),y=s&&ac.default.createElement(j7,{namespace:s,path:[...i.path,a],key:"namespaceTree("+a+")",visualIndentation:i.visualIndentation+1,sheet:p}),w=c&&ac.default.createElement(U7,{depth:i.visualIndentation,key:"objectPath("+c.address.objectKey+")",sheetObject:c,overrideLabel:a});return ac.default.createElement(ac.default.Fragment,{key:"".concat(a," - ").concat(i.visualIndentation)},w,y&&ac.default.createElement($x,{selectionStatus:"not-selectable",label:a,key:"baseItem(".concat(a,")"),depth:i.visualIndentation,children:y,collapsed:f,setIsCollapsed:g}))}function z7(i,s,a=hCe(s)){let[c,...p]=a,f=i.get(c);f||(f={nested:void 0,object:void 0,path:[...a]},i.set(c,f)),p.length===0?(console.assert(!f.object,"expect not to have existing object with same name",{existing:f,object:s}),f.object=s):(f.nested||(f.nested=new Map),z7(f.nested,s,p))}function hCe(i){let s=cB.get(i);return s||(s=i.address.objectKey.split(K7),console.assert(s.length>0,"expected not empty"),cB.set(i,s)),s}var H7,ac,G7,$7,W7,K7,cB,pCe=C(()=>{hn(),H7=Mt,ac=Z(Re()),Ne(),cCe(),cA(),uB(),se.li(G7||(G7=G([`
  color: `,`;
`])),i=>i.isSelected?"white":"hsl(1, 1%, 80%)"),$7=({sheet:i,depth:s})=>Un(()=>{let a=(0,H7.val)(i.objectsP),c=Object.values(a).filter(f=>f!=null),p=new Map;return c.forEach(f=>{z7(p,f)}),ac.default.createElement(j7,{namespace:p,visualIndentation:s,path:[],sheet:i})},[i,s]),W7=$7,K7=/\s*\/\s*/g,cB=new WeakMap}),Py,q7,X7,Y7,Z7,Q7,J7,fCe=C(()=>{Fe(),wp(),hn(),Py=Z(Re()),Ne(),pCe(),cA(),uB(),X7=se.div(q7||(q7=G([`
  display: flex;
`]))),se.li(Y7||(Y7=G([`
  color: `,`;
`])),i=>i.isSelected?"white":"hsl(1, 1%, 80%)"),Q7=se.div(Z7||(Z7=G([""]))),J7=({sheet:i,depth:s})=>{let{collapsed:a,setCollapsed:c}=lB(i),p=(0,Py.useCallback)(()=>{me().transaction(({stateEditors:f})=>{f.studio.historic.panels.outline.selection.set([i])})},[i]);return Un(()=>{let f=_p();return Py.default.createElement($x,{depth:s,select:p,setIsCollapsed:c,collapsed:a,selectionStatus:f.some(g=>g===i)?"selected":f.some(g=>g.type==="Theatre_SheetObject"&&g.sheet===i)?"descendant-is-selected":"not-selected",label:Py.default.createElement(X7,null,i.address.sheetId,": ",i.address.sheetInstanceId)},Py.default.createElement(Q7,null,Py.default.createElement(W7,{depth:s+1,sheet:i,key:"objectList"+i.address.sheetInstanceId})))},[s,a])}}),dB,ky,eK,tK,nK,rK,mCe=C(()=>{hn(),dB=Mt,ky=Z(Re()),Ne(),fCe(),se.div(eK||(eK=G([`
  display: flex;
`]))),se.li(tK||(tK=G([`
  color: `,`;
`])),i=>i.isSelected?"white":"hsl(1, 1%, 80%)"),se.div(nK||(nK=G([""]))),rK=({sheetId:i,depth:s,project:a})=>Un(()=>{let c=(0,dB.val)(a.sheetTemplatesP[i]);if(!c)return ky.default.createElement(ky.default.Fragment,null);let p=(0,dB.val)(c.instancesP);return ky.default.createElement(ky.default.Fragment,null,Object.entries(p).map(([f,g])=>ky.default.createElement(J7,{key:g.address.sheetInstanceId,sheet:g,depth:s})))},[s,i,a])}),dA,iK,oK,vCe=C(()=>{wp(),hn(),dA=Z(Re()),mCe(),iK=({project:i,depth:s})=>Un(()=>{if(!i)return null;let a=lCe(i);return dA.default.createElement(dA.default.Fragment,null,a.map(c=>dA.default.createElement(rK,{depth:s,sheetId:c,key:"sheet-".concat(c),project:i})))},[i,s]),oK=iK}),Wx,sK,aK,lK,uK,cK,gCe=C(()=>{Wx=Z(Re()),cA(),vCe(),Fe(),hn(),wp(),sK=Mt,Ne(),uB(),lK=se.div(aK||(aK=G([`
  color: #ff6363;
  margin-left: 11px;
  background: #4c282d;
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 10px;
  box-shadow: 0 2px 8px -4px black;
`]))),uK=({depth:i,project:s})=>{let a=Un(()=>_p(),[]),c=Un(()=>{let y=s.address.projectId,w=(0,sK.val)(me().atomP.ephemeral.coreByProject[y].loadingState);return(w==null?void 0:w.type)==="browserStateIsNotBasedOnDiskState"},[s]),p=(0,Wx.useCallback)(()=>{me().transaction(({stateEditors:y})=>{y.studio.historic.panels.outline.selection.set([s])})},[s]),{collapsed:f,setCollapsed:g}=lB(s);return Wx.default.createElement($x,{depth:i,label:s.address.projectId,setIsCollapsed:g,collapsed:f,labelDecoration:c?Wx.default.createElement(lK,null,"Has Conflicts"):null,children:Wx.default.createElement(oK,{project:s,depth:i+1}),selectionStatus:a.includes(s)?"selected":a.some(y=>y.address.projectId===s.address.projectId)?"descendant-is-selected":"not-selected",select:p})},cK=uK}),dK,hB,hK,pK,fK,mK,yCe=C(()=>{dK=Mt,hn(),Fe(),hB=Z(Re()),Ne(),gCe(),pK=se.ul(hK||(hK=G([`
  list-style: none;
  margin: 0;
  padding: 0;
  padding-right: 4px;
`]))),fK=i=>Un(()=>{let s=(0,dK.val)(me().projectsP);return hB.default.createElement(pK,null,Object.keys(s).map(a=>{let c=s[a];return hB.default.createElement(cK,{depth:0,project:c,key:"projectListItem-".concat(a)})}))},[]),mK=fK});function vK(i){let[s,a]=(0,pB.useState)(!1);return(0,pB.useEffect)(()=>{let c=f=>{let g=s?200:50,y=56,w=i==="left"?f.x<g:f.x>window.innerWidth-g;w&&(w=f.y>y),a(!!w)};document.addEventListener("mousemove",c);let p=()=>{a(!1)};return document.addEventListener("mouseleave",p),()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseleave",p)}},[s]),s}var pB,gK=C(()=>{pB=Z(Re())}),Kx,Ty,fB,yK,bK,_K,wK,hA,qx,xK,bCe=C(()=>{Kx=Z(Re()),Ne(),Md(),yCe(),hn(),Fe(),gK(),Ty=Mt,vr(),fB="44px",bK=se.div(yK||(yK=G([`
  `,`;
  background-color: transparent;
  position: absolute;
  left: 8px;
  z-index: `,`;

  top: calc(`,` + 8px);
  height: fit-content;
  max-height: calc(100% - `,`);
  overflow-y: scroll;
  overflow-x: hidden;
  padding: 0;
  user-select: none;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;

  display: `,`;

  &:hover {
    display: block;
  }

  // Create a small buffer on the bottom to aid selecting the bottom item in a long, scrolling list
  &::after {
    content: '';
    display: block;
    height: 20px;
  }
`])),hr,Ey.outlinePanel,fB,fB,({pin:i})=>i?"block":"none"),_K=()=>{var i;let s=(i=$n(me().atomP.ahistoric.pinOutline))!=null?i:!0,a=$n(xK),c=vK("left");return(0,Kx.useLayoutEffect)(()=>{hA.set(c)},[c]),(0,Kx.useEffect)(()=>()=>{qx.set(!1),hA.set(!1)},[]),Kx.default.createElement(bK,{pin:s||a,onMouseEnter:()=>{qx.set(!0)},onMouseLeave:()=>{qx.set(!1)}},Kx.default.createElement(mK,null))},wK=_K,hA=new Ty.Atom(!1),qx=new Ty.Atom(!1),xK=(0,Ty.prism)(()=>{let i=(0,Ty.val)(qx.prism),s=(0,Ty.val)(hA.prism);return i||s})}),SK,EK,CK,_Ce=C(()=>{Ne(),EK=se.input.attrs({type:"checkbox"})(SK||(SK=G([`
  outline: none;
`]))),CK=EK});function wCe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let p=(0,mB.useCallback)(f=>{s.permanentlySetValue(!!f.target.checked)},[i,s]);return mB.default.createElement(kK,{checked:a,onChange:p,autoFocus:c})}var mB,PK,kK,TK,xCe=C(()=>{mB=Z(Re()),Ne(),_Ce(),kK=se(CK)(PK||(PK=G([`
  margin-left: 6px;

  :focus {
    outline: 1px solid #555;
  }
`]))),TK=wCe});function pA(i){return s=>{i.forEach(a=>{typeof a=="function"?a(s):a!=null&&(a.current=s)})}}var fA=C(()=>{});function vB(i,s,a){(0,MK.useEffect)(()=>{if(!i||a===!1)return;let c=Array.isArray(i)?i.filter(f=>f):[i],p=f=>{c.every(g=>!f.composedPath().includes(g))&&s(f)};return window.addEventListener("mousedown",p,{capture:!0,passive:!1}),()=>{window.removeEventListener("mousedown",p,{capture:!0,passive:!1})}},[i,a])}var MK,gB=C(()=>{MK=Z(Re())}),Ad,AK,Id,IK,RK,OK,DK,yB,LK,ul,NK,Ea=C(()=>{Ad=Z(Re()),Ne(),AK="pointer-root",Id="--lockedCursor",RK=se.div(IK||(IK=G([`
  pointer-events: auto;
  &.normal {
    pointer-events: none;
  }
`]))),DK=se.div(OK||(OK=G([`
  position: absolute;
  inset: 0;
  pointer-events: none;

  #pointer-root:not(.normal) > & {
    pointer-events: auto;
  }
`]))),yB=(0,Ad.createContext)({}),LK=i=>{var s,a,c,p;let[f,g]=(0,Ad.useState)([]),y=(0,Ad.useMemo)(()=>({getLock:(S,T)=>{let I={className:S,cursor:T};return g(A=>[...A,I]),()=>{g(A=>A.filter(k=>k!==I))}}}),[]),w=(a=(s=f[0])==null?void 0:s.cursor)!=null?a:"";return Ad.default.createElement(yB.Provider,{value:y},Ad.default.createElement(RK,{id:AK,className:((p=(c=f[0])==null?void 0:c.className)!=null?p:"normal")+" "+i.className},Ad.default.createElement(DK,{style:{cursor:w,[Id]:w}},i.children)))},ul=(i,s,a)=>{let c=(0,Ad.useContext)(yB);(0,Ad.useLayoutEffect)(()=>{if(i)return c.getLock(s,a)},[i,s,a])},NK=LK});function FK(i){return Xx.default.createElement(bB.Provider,{value:i.logger},i.children)}function xp(i,s){let a=(0,Xx.useContext)(bB);return(0,Xx.useMemo)(()=>i?a.named(i,s):a,[a,i,s])}var Xx,bB,Sp=C(()=>{Xx=Z(Re()),bB=Xx.default.createContext(null)});function SCe(){let i=xp("PointerCapturing"),s=ou.default.useRef(null),a=()=>s.current!=null;return c=>{let p,f=g=>(p=g,s.current=g,g);return{capturing:{capturePointer(g){if(i._debug("Capturing pointer",{forDebugName:c,reason:g}),s.current!=null)throw new Error('"'.concat(c,'" attempted capturing pointer for "').concat(g,'" while already captured by "').concat(s.current.debugOwnerName,'" for "').concat(s.current.debugReason,'"'));let y=f({debugOwnerName:c,debugReason:g});return{isCapturing(){return y===s.current},release(){return y===s.current?(i._debug("Releasing pointer",{forDebugName:c,reason:g}),f(null),!0):!1}}},isPointerBeingCaptured:a},forceRelease(){p&&s.current===p&&(i._debug("Force releasing pointer",{localCapture:p}),f(null))}}}}function ECe(i){let s=SCe();return ou.default.createElement(_B.Provider,{value:s},ou.default.createElement(UK,{children:i.children}))}function BK(i){let s=(0,ou.useContext)(_B),a=(0,ou.useMemo)(()=>s(i),[i,s]);return(0,ou.useEffect)(()=>()=>{a.forceRelease()},[a]),a.capturing}var ou,_B,UK,wB=C(()=>{ou=Z(Re()),Sp(),_B=ou.default.createContext(null),UK=ou.default.memo(({children:i})=>ou.default.createElement(ou.default.Fragment,null,i))}),xB,CCe=C(()=>{xB=typeof window<"u"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)});function xi(i,s){let a=(0,My.useRef)(s);a.current=s;let c=s.shouldPointerLock&&!xB,p=(0,My.useRef)({domDragStarted:!1}),{capturePointer:f}=BK("useDrag for ".concat(s.debugName)),g=(0,My.useRef)({onDrag:iu,onDragEnd:iu,onClick:iu}),y=(0,My.useRef)(),[w,S]=sr(!1);return(0,My.useLayoutEffect)(()=>{if(!i)return;let T=()=>{let $=p.current.domDragStarted&&p.current.detection.detected;w.current!==$&&(w.current=$)},I=$=>{if(!p.current.domDragStarted)return;let X=p.current;if(!PCe($,X)&&(X.detection.detected||(X.detection.totalDistanceMoved+=Math.abs($.movementY)+Math.abs($.movementX),X.detection.totalDistanceMoved>VK&&(c&&i.requestPointerLock(),X.detection={detected:!0,dragMovement:{x:0,y:0},dragEventCount:0},T())),X.detection.detected)){X.detection.dragEventCount+=1;let{dragMovement:re}=X.detection;if(c)re.x+=$.movementX,re.y+=$.movementY;else{let{startPos:ne}=X;re.x=$.screenX-ne.x,re.y=$.screenY-ne.y}g.current.onDrag(re.x,re.y,$,$.movementX,$.movementY)}},A=$=>{if(D(),!p.current.domDragStarted)return;let X=p.current.detection.detected;p.current={domDragStarted:!1},s.shouldPointerLock&&!xB&&document.exitPointerLock(),g.current.onDragEnd(X),window.focus(),X||g.current.onClick($),T()},k=()=>{document.addEventListener("mousemove",I),document.addEventListener("mouseup",A)},D=()=>{var $;($=y.current)==null||$.release(),document.removeEventListener("mousemove",I),document.removeEventListener("mouseup",A)},O=$=>{a.current.disabled||p.current.domDragStarted&&p.current.detection.detected&&(a.current.dontBlockMouseDown||($.stopPropagation(),$.preventDefault()),p.current.detection={detected:!1,totalDistanceMoved:0},T())},F=$=>{var X,re,ne,ae;(X=y.current)==null||X.release();let Se=a.current;if(Se.disabled===!0||!((re=Se.buttons)!=null?re:[0]).includes($.button))return;let fe=Se.onDragStart($);fe!==!1&&(g.current.onDrag=fe.onDrag,g.current.onDragEnd=(ne=fe.onDragEnd)!=null?ne:iu,g.current.onClick=(ae=fe.onClick)!=null?ae:iu,y.current=f("Drag start"),Se.dontBlockMouseDown||($.stopPropagation(),$.preventDefault()),p.current={domDragStarted:!0,startPos:{x:$.screenX,y:$.screenY},detection:{detected:!1,totalDistanceMoved:0}},T(),k())},V=$=>{F($)};return i.addEventListener("mousedown",V),i.addEventListener("click",O),()=>{var $,X;D(),i.removeEventListener("mousedown",V),i.removeEventListener("click",O),p.current.domDragStarted&&((X=($=g.current).onDragEnd)==null||X.call($,p.current.detection.detected)),p.current={domDragStarted:!1},T()}},[i]),ul(S&&!!s.lockCSSCursorTo,"dragging",s.lockCSSCursorTo),[S]}function PCe(i,s){return(!s.detection.detected||s.detection.detected&&s.detection.dragEventCount<3)&&(Math.abs(i.movementX)>SB||Math.abs(i.movementY)>SB)}var My,VK,SB,no=C(()=>{My=Z(Re()),Ea(),wB(),Cy(),CCe(),mr(),VK=3,SB=100});function kCe(i){return isNaN(i)?"NaN":ns(i)?i.toFixed(0):qm(i,3).toString()}var jK,zK,Rd,HK,mA,GK,$K,WK,KK,qK,XK,YK,ZK,vA,EB=C(()=>{Jr(),jK=Z(Re()),zK=Z(Re()),Rd=Z(Re()),Ne(),fA(),mr(),gB(),no(),mA=se.div(HK||(HK=G([`
  height: 100%;
  width: 100%;
  position: relative;
  z-index: 0;
  box-sizing: border-box;
  display: flex;
  align-items: center;

  &:after {
    position: absolute;
    inset: 1px 0 2px;
    display: block;
    content: ' ';
    background-color: transparent;
    border: 1px solid transparent;
    z-index: -2;
    box-sizing: border-box;
    border-radius: 1px;
  }

  &:hover,
  &.dragging,
  &.editingViaKeyboard {
    &:after {
      background-color: #10101042;
      border-color: #00000059;
    }
  }
`]))),$K=se.input(GK||(GK=G([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: ew-resize;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;

  &:focus {
    cursor: text;
  }
`]))),KK=se.div(WK||(WK=G([`
  position: absolute;
  inset: 3px 2px 4px;
  transform: scale(var(--percentage), 1);
  transform-origin: top left;
  background-color: #2d5561;
  z-index: -1;
  border-radius: 2px;
  pointer-events: none;

  `,".dragging &, ",`.noFocus:hover & {
    background-color: #338198;
  }
`])),mA,mA),XK=se.div(qK||(qK=G([`
  display: contents;
`]))),YK=i=>!0,ZK=i=>{var s;let[a]=sr({mode:"noFocus"}),c=(s=i.isValid)!=null?s:YK,p=(0,Rd.useRef)(i);p.current=i;let f=(0,Rd.useRef)(null);vB(f.current,()=>{f.current.blur()},a.current.mode==="editingViaKeyboard");let g=(0,Rd.useRef)(null),y=(0,Rd.useMemo)(()=>{let F=fe=>{let ge=fe.target,{value:Ie}=ge,Qe=a.current;a.current=z(j({},Qe),{currentEditedValueInString:Ie});let le=parseFloat(Ie);!isFinite(le)||!c(le)||p.current.temporarilySetValue(le)},V=()=>{a.current.mode==="editingViaKeyboard"&&($(),a.current={mode:"noFocus"}),i.onBlur&&i.onBlur()},$=()=>{let fe=a.current,ge=parseFloat(fe.currentEditedValueInString);!isFinite(ge)||!c(ge)||fe.valueBeforeEditing===ge?p.current.discardTemporaryValue():p.current.permanentlySetValue(ge)},X=fe=>{fe.key==="Escape"?(p.current.discardTemporaryValue(),a.current={mode:"noFocus"},f.current.blur()):(fe.key==="Enter"||fe.key==="Tab")&&($(),f.current.blur())},re=fe=>{a.current.mode==="noFocus"&&(f.current.focus(),fe.preventDefault()),fe.stopPropagation()},ne=()=>{a.current.mode==="noFocus"?ae():a.current.mode},ae=()=>{let fe=p.current.value;a.current={mode:"editingViaKeyboard",currentEditedValueInString:String(fe),valueBeforeEditing:fe},setTimeout(()=>{f.current.focus(),f.current.setSelectionRange(0,100)})},Se;return{inputChange:F,onBlur:V,transitionToDraggingMode:()=>{var fe;let ge=p.current.value;Se=(fe=f.current)==null?void 0:fe.getBoundingClientRect().width,a.current={mode:"dragging"};let Ie=ge,Qe=ge;return g.current=document.body.style.cursor,{onDrag(le,Ae,Y,Ue){let Tt=Y.altKey?Ue/10:Ue,ke=Qe+i.nudge({deltaX:Tt,deltaFraction:Tt/Se,magnitude:1});Qe=i.range?li(ke,i.range[0],i.range[1]):ke,p.current.temporarilySetValue(Qe)},onDragEnd(le){le?(Ie===Qe?p.current.discardTemporaryValue():p.current.permanentlySetValue(Qe),a.current={mode:"noFocus"}):(p.current.discardTemporaryValue(),a.current={mode:"noFocus"})},onClick(){f.current.focus(),f.current.setSelectionRange(0,100)}}},onInputKeyDown:X,onClick:re,onFocus:ne}},[]);(0,jK.useEffect)(()=>()=>{y.onBlur()},[]);let w=a.current.mode!=="editingViaKeyboard"?kCe(i.value):a.current.currentEditedValueInString;typeof w=="number"&&isNaN(w)&&(w="NaN");let S=[f];i.inputRef&&S.push(i.inputRef);let T=Rd.default.createElement($K,{key:"input",type:"text",onChange:y.inputChange,value:w,onBlur:y.onBlur,onKeyDown:y.onInputKeyDown,onClick:y.onClick,onFocus:y.onFocus,ref:pA(S),onMouseDown:F=>{F.stopPropagation()},onDoubleClick:F=>{F.preventDefault(),F.stopPropagation()},autoFocus:i.autoFocus}),{range:I}=i,A=parseFloat(w),k=I?Rd.default.createElement(KK,{style:{"--percentage":li((A-I[0])/(I[1]-I[0]),0,1)}}):null,[D,O]=(0,zK.useState)(null);return xi(D,{debugName:"form/BasicNumberInput",onDragStart:y.transitionToDraggingMode,lockCSSCursorTo:"ew-resize",shouldPointerLock:!0,disabled:a.current.mode==="editingViaKeyboard"}),Rd.default.createElement(mA,{className:i.className+" "+a.current.mode},Rd.default.createElement(XK,{ref:O},T),k)},vA=ZK});function TCe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let p=(0,CB.useCallback)(f=>i.nudgeFn(z(j({},f),{config:i})),[i]);return CB.default.createElement(vA,{value:a,temporarilySetValue:s.temporarilySetValue,discardTemporaryValue:s.discardTemporaryValue,permanentlySetValue:s.permanentlySetValue,range:i.range,nudge:p,autoFocus:c})}var CB,PB,QK=C(()=>{EB(),CB=Z(Re()),PB=TCe});function MCe({value:i,onChange:s,options:a,autoFocus:c}){let p=(0,Yx.useCallback)(f=>{s(String(f.target.value))},[s]);return Yx.default.createElement(kB,{role:"radiogroup"},Object.keys(a).map((f,g)=>Yx.default.createElement(tq,{key:"label-"+g,"data-checked":i===f},a[f],Yx.default.createElement(rq,{type:"radio",checked:i===f,value:f,onChange:p,name:"switchbox",autoFocus:c}))))}var Yx,JK,kB,eq,tq,nq,rq,iq,ACe=C(()=>{Sa(),Yx=Z(Re()),Ne(),kB=se.form(JK||(JK=G([`
  display: flex;
  flex-direction: row;
  align-items: stretch;
  vertical-align: middle;
  justify-content: stretch;
  height: 24px;
  width: 100%;
`]))),tq=se.label(eq||(eq=G([`
  padding: 0 0.5em;
  background: transparent;
  /* background: #373748; */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  color: #a7a7a7;
  border: 1px solid transparent;
  box-sizing: border-box;
  border-right-width: 0px;

  & + &:last-child {
    border-right-width: 1px;
  }

  `,`:hover > & {
    border-color: #1c2123;
    /* background-color: #373748; */
    /* color: `,`; */
  }

  &&:hover {
    background-color: #464654;
  }

  &&[data-checked='true'] {
    color: white;
    background: #3f3f4c;
  }
`])),kB,Nx(.1,"white")),rq=se.input(nq||(nq=G([`
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
`]))),iq=MCe}),ICe=C(()=>{}),TB,MB,AB,oq=C(()=>{TB=Z(Re()),MB={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},AB=TB.default.createContext&&TB.default.createContext(MB)});function sq(i){return i&&i.map(function(s,a){return Iy.default.createElement(s.tag,Od({key:a},s.attr),sq(s.child))})}function Ay(i){return function(s){return Iy.default.createElement(RCe,Od({attr:Od({},i.attr)},s),sq(i.child))}}function RCe(i){var s=function(a){var c=i.attr,p=i.size,f=i.title,g=aq(i,["attr","size","title"]),y=p||a.size||"1em",w;return a.className&&(w=a.className),i.className&&(w=(w?w+" ":"")+i.className),Iy.default.createElement("svg",Od({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,c,g,{className:w,style:Od(Od({color:i.color||a.color},a.style),i.style),height:y,width:y,xmlns:"http://www.w3.org/2000/svg"}),f&&Iy.default.createElement("title",null,f),i.children)};return AB!==void 0?Iy.default.createElement(AB.Consumer,null,function(a){return s(a)}):s(MB)}var Iy,Od,aq,OCe=C(()=>{Iy=Z(Re()),oq(),Od=function(){return Od=Object.assign||function(i){for(var s,a=1,c=arguments.length;a<c;a++){s=arguments[a];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(i[p]=s[p])}return i},Od.apply(this,arguments)},aq=function(i,s){var a={};for(var c in i)Object.prototype.hasOwnProperty.call(i,c)&&s.indexOf(c)<0&&(a[c]=i[c]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,c=Object.getOwnPropertySymbols(i);p<c.length;p++)s.indexOf(c[p])<0&&Object.prototype.propertyIsEnumerable.call(i,c[p])&&(a[c[p]]=i[c[p]]);return a}}),qi=C(()=>{ICe(),OCe(),oq()}),DCe=C(()=>{qi()}),LCe=C(()=>{qi()});function NCe(i){return Ay({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}}]})(i)}var FCe=C(()=>{qi()}),BCe=C(()=>{qi()}),UCe=C(()=>{qi()});function VCe(i){return Ay({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.5 3L7 4.5 3.25 8 7 11.5 5.5 13l-5-5 5-5z"}}]})(i)}function jCe(i){return Ay({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3l5 5z"}}]})(i)}var zCe=C(()=>{qi()}),HCe=C(()=>{qi()}),GCe=C(()=>{qi()}),$Ce=C(()=>{qi()}),WCe=C(()=>{qi()}),KCe=C(()=>{qi()}),qCe=C(()=>{qi()}),XCe=C(()=>{qi()}),YCe=C(()=>{qi()}),ZCe=C(()=>{qi()});function lq(i){return Ay({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(i)}var QCe=C(()=>{qi()}),JCe=C(()=>{qi()}),ePe=C(()=>{qi()}),tPe=C(()=>{qi()});function nPe(i){return Ay({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M6 9.65685L7.41421 11.0711L11.6569 6.82843L15.8995 11.0711L17.3137 9.65685L11.6569 4L6 9.65685Z",fill:"currentColor"}},{tag:"path",attr:{d:"M6 14.4433L7.41421 13.0291L11.6569 17.2717L15.8995 13.0291L17.3137 14.4433L11.6569 20.1001L6 14.4433Z",fill:"currentColor"}}]})(i)}var rPe=C(()=>{qi()});function iPe(i){return Ay({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 10.44l-.413.56H2.393L2 10.46 7.627 5h.827L14 10.44z"}}]})(i)}var oPe=C(()=>{qi()}),Ry=C(()=>{DCe(),LCe(),FCe(),BCe(),UCe(),zCe(),HCe(),GCe(),$Ce(),WCe(),KCe(),qCe(),XCe(),YCe(),ZCe(),QCe(),JCe(),ePe(),tPe(),rPe(),oPe()});function sPe({value:i,onChange:s,options:a,className:c,autoFocus:p}){let f=(0,iv.useCallback)(g=>{s(String(g.target.value))},[s]);return iv.default.createElement(cq,null,iv.default.createElement(fq,{className:c,value:i,onChange:f,autoFocus:p},Object.keys(a).map((g,y)=>iv.default.createElement("option",{key:"option-"+y,value:g},a[g]))),iv.default.createElement(hq,null,iv.default.createElement(nPe,null)))}var iv,uq,cq,dq,hq,pq,fq,mq,aPe=C(()=>{iv=Z(Re()),Ne(),Ry(),cq=se.div(uq||(uq=G([`
  width: 100%;
  position: relative;
`]))),hq=se.div(dq||(dq=G([`
  position: absolute;
  right: 0px;
  top: 0;
  bottom: 0;
  width: 1.5em;
  font-size: 14px;
  display: flex;
  align-items: center;
  color: #6b7280;
  pointer-events: none;
`]))),fq=se.select(pq||(pq=G([`
  appearance: none;
  background-color: transparent;
  box-sizing: border-box;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.85);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  text-align: left;
  width: 100%;
  border-radius: 2px;
  /*
  looks like putting percentages in the height of a select box doesn't work in Firefox. Not sure why.
  So we're hard-coding the height to 26px, unlike all other inputs that use a relative height.
  */
  height: 26px /* calc(100% - 4px); */;

  @supports (-moz-appearance: none) {
    /* Ugly hack to remove the extra left padding that shows up only in Firefox */
    text-indent: -2px;
  }

  &:hover,
  &:focus {
    background-color: #10101042;
    border-color: #00000059;
  }
`]))),mq=sPe});function lPe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let p=(0,gA.useCallback)(f=>{s.permanentlySetValue(f)},[i,s]);return i.as==="menu"?gA.default.createElement(mq,{value:a,onChange:p,options:i.valuesAndLabels,autoFocus:c}):gA.default.createElement(iq,{value:a,onChange:p,options:i.valuesAndLabels,autoFocus:c})}var gA,vq,uPe=C(()=>{gA=Z(Re()),ACe(),aPe(),vq=lPe}),gq,Zx,yq,bq,_q,wq,yA,IB=C(()=>{Ne(),gq=Z(Re()),Zx=Z(Re()),fA(),mr(),gB(),bq=se.input.attrs({type:"text"})(yq||(yq=G([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;
  border: 1px solid transparent;
  box-sizing: border-box;

  &:hover {
    background-color: #10101042;
    border-color: #00000059;
  }

  &:hover,
  &:focus {
    cursor: text;
    background-color: #10101042;
    border-color: #00000059;
  }

  &.invalid {
    border-color: red;
  }
`]))),_q=i=>!0,wq=i=>{var s,a;let[c]=sr({mode:"noFocus"}),p=(s=i.isValid)!=null?s:_q,f=(0,Zx.useRef)(i);f.current=i;let g=(0,Zx.useRef)(null);vB(g.current,()=>{g.current.blur()},c.current.mode==="editingViaKeyboard");let y=(0,Zx.useMemo)(()=>{let T=V=>{let $=V.target,{value:X}=$,re=c.current;c.current=z(j({},re),{currentEditedValueInString:X}),p(X)&&f.current.temporarilySetValue(X)},I=()=>{var V,$;c.current.mode==="editingViaKeyboard"&&(A(),c.current={mode:"noFocus"}),($=(V=f.current).onBlur)==null||$.call(V)},A=()=>{let V=c.current,$=V.currentEditedValueInString;p($)?V.valueBeforeEditing===$?f.current.discardTemporaryValue():f.current.permanentlySetValue($):f.current.discardTemporaryValue()},k=V=>{V.key==="Escape"?(f.current.discardTemporaryValue(),c.current={mode:"noFocus"},g.current.blur()):(V.key==="Enter"||V.key==="Tab")&&(A(),g.current.blur())},D=V=>{c.current.mode==="noFocus"&&(g.current.focus(),V.preventDefault()),V.stopPropagation()},O=()=>{c.current.mode==="noFocus"?F():c.current.mode},F=()=>{let V=f.current.value;c.current={mode:"editingViaKeyboard",currentEditedValueInString:String(V),valueBeforeEditing:V},setTimeout(()=>{g.current.focus()})};return{inputChange:T,onBlur:I,onInputKeyDown:k,onClick:D,onFocus:O}},[]);(0,gq.useEffect)(()=>()=>{y.onBlur()},[]);let w=c.current.mode!=="editingViaKeyboard"?i.value:c.current.currentEditedValueInString,S=[g];return i.inputRef&&S.push(i.inputRef),Zx.default.createElement(bq,{key:"input",type:"text",className:"".concat((a=i.className)!=null?a:""," ").concat(p(w)?"":"invalid"),onChange:y.inputChange,value:w,onBlur:y.onBlur,onKeyDown:y.onInputKeyDown,onClick:y.onClick,onFocus:y.onFocus,ref:pA(S),onMouseDown:T=>{T.stopPropagation()},onDoubleClick:T=>{T.preventDefault(),T.stopPropagation()},autoFocus:i.autoFocus})},yA=wq});function cPe({editingTools:i,value:s,autoFocus:a}){return xq.default.createElement(yA,{value:s,temporarilySetValue:i.temporarilySetValue,discardTemporaryValue:i.discardTemporaryValue,permanentlySetValue:i.permanentlySetValue,autoFocus:a})}var xq,Sq,dPe=C(()=>{xq=Z(Re()),IB(),Sq=cPe});function hPe(i){i=i.trim().toLowerCase();let s=i.match(DB);if(!s)return{r:0,g:0,b:0,a:1};let a=pPe(s[1]);return{r:parseInt(a.substr(0,2),16)/255,g:parseInt(a.substr(2,2),16)/255,b:parseInt(a.substr(4,2),16)/255,a:parseInt(a.substr(6,2),16)/255}}function RB(i,{removeAlphaIfOpaque:s=!1}={}){let a=(i.a*255|256).toString(16).slice(1),c=(i.r*255|256).toString(16).slice(1)+(i.g*255|256).toString(16).slice(1)+(i.b*255|256).toString(16).slice(1)+(s&&a==="ff"?"":a);return"#".concat(c)}function OB(i){return z(j({},i),{toString(){return RB(this,{removeAlphaIfOpaque:!0})}})}function pPe(i){switch(i.length){case 3:return"".concat(i.repeat(2),"ff");case 4:let s=i.substr(0,3),a=i[3];return"".concat(s.repeat(2)).concat(a.repeat(2));case 6:return"".concat(i,"ff")}return i}var DB,Eq=C(()=>{DB=/^#*([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i});function bA(i){let s=(0,LB.useRef)(i),a=(0,LB.useRef)(c=>{s.current&&s.current(c)});return s.current=i,a.current}var LB,Cq=C(()=>{LB=Z(Re())}),ov,_A=C(()=>{ov=(i,s=0,a=1)=>i>a?a:i<s?s:i}),Qx,NB,Pq,FB,BB=C(()=>{Qx=Z(Re()),NB=(0,Qx.createContext)(void 0),Pq=({children:i})=>{let[s,a]=(0,Qx.useState)(!1);return Qx.default.createElement(NB.Provider,{value:{editing:s,setEditing:a}},i)},FB=()=>(0,Qx.useContext)(NB)}),Ep,Oy,kq,wA,UB,VB,Tq,Mq,Aq,Iq,Jx,xA=C(()=>{Ep=Z(Re()),Cq(),_A(),Ne(),BB(),Oy=i=>"touches"in i,kq=(i,s)=>{for(let a=0;a<i.length;a++)if(i[a].identifier===s)return i[a];return i[0]},wA=i=>i&&i.ownerDocument.defaultView||self,UB=(i,s,a)=>{let c=i.getBoundingClientRect(),p=Oy(s)?kq(s.touches,a):s;return{left:ov((p.pageX-(c.left+wA(i).pageXOffset))/c.width),top:ov((p.pageY-(c.top+wA(i).pageYOffset))/c.height)}},VB=i=>{!Oy(i)&&i.preventDefault()},Tq=(i,s)=>s&&!Oy(i),Aq=se.div(Mq||(Mq=G([`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  outline: none;
  /* Don't trigger the default scrolling behavior when the event is originating from this element */
  touch-action: none;
`]))),Iq=i=>{var s=i,{onMove:a,onKey:c}=s,p=U(s,["onMove","onKey"]);let f=(0,Ep.useRef)(null),g=bA(a),y=bA(c),w=(0,Ep.useRef)(null),S=(0,Ep.useRef)(!1),{setEditing:T}=FB(),[I,A,k]=(0,Ep.useMemo)(()=>{let D=({nativeEvent:X})=>{let re=f.current;if(re&&(VB(X),!(Tq(X,S.current)||!re))){if(Oy(X)){S.current=!0;let ne=X.changedTouches||[];ne.length&&(w.current=ne[0].identifier)}re.focus(),T(!0),g(UB(re,X,w.current)),$(!0)}},O=X=>{VB(X),(Oy(X)?X.touches.length>0:X.buttons>0)&&f.current?g(UB(f.current,X,w.current)):(T(!1),$(!1))},F=X=>{T(!1),$(!1)},V=X=>{let re=X.which||X.keyCode;re<37||re>40||(X.preventDefault(),y({left:re===39?.05:re===37?-.05:0,top:re===40?.05:re===38?-.05:0}))};function $(X){let re=S.current,ne=f.current,ae=wA(ne),Se=X?ae.addEventListener:ae.removeEventListener;Se(re?"touchmove":"mousemove",O),Se(re?"touchend":"mouseup",F)}return[D,V,$]},[y,g]);return(0,Ep.useEffect)(()=>k,[k]),Ep.default.createElement(Aq,z(j({},p),{onTouchStart:I,onMouseDown:I,ref:f,onKeyDown:A,tabIndex:0,role:"slider"}))},Jx=Ep.default.memo(Iq)}),jB,Rq,Oq,Dq,Lq,Nq,Fq,SA,zB=C(()=>{jB=Z(Re()),Ne(),xA(),Oq=se(Jx)(Rq||(Rq=G([""]))),Lq=se.div(Dq||(Dq=G([`
  position: absolute;
  z-index: 1;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  transform: translate(-50%, -50%);
  background-color: #fff;
  border: 1px solid #ffffff00;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

  `,`:focus & {
    transform: translate(-50%, -50%) scale(1.1);
  }
`])),Oq),Fq=se.div(Nq||(Nq=G([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;
`]))),SA=({className:i,color:s,left:a,top:c=.5})=>{let p={top:"".concat(c*100,"%"),left:"".concat(a*100,"%")};return jB.default.createElement(Lq,{style:p,className:i},jB.default.createElement(Fq,{style:{backgroundColor:s}}))}}),os,EA=C(()=>{os=(i,s=0,a=Math.pow(10,s))=>Math.round(a*i)/a}),HB,CA,PA,Bq,Uq,kA=C(()=>{EA(),HB=({h:i,s,v:a,a:c})=>{let p=(200-s)*a/100;return{h:os(i),s:os(p>0&&p<200?s*a/100/(p<=100?p:200-p)*100:0),l:os(p/2),a:os(c,2)}},CA=i=>{let{h:s,s:a,l:c}=HB(i);return"hsl(".concat(s,", ").concat(a,"%, ").concat(c,"%)")},PA=i=>{let{h:s,s:a,l:c,a:p}=HB(i);return"hsla(".concat(s,", ").concat(a,"%, ").concat(c,"%, ").concat(p,")")},Bq=({h:i,s,v:a,a:c})=>{i=i/360*6,s=s/100,a=a/100;let p=Math.floor(i),f=a*(1-s),g=a*(1-(i-p)*s),y=a*(1-(1-i+p)*s),w=p%6;return{r:os([a,g,f,f,y,a][w]*255),g:os([y,a,a,g,f,f][w]*255),b:os([f,f,y,a,a,g][w]*255),a:os(c,2)}},Uq=({r:i,g:s,b:a,a:c})=>{let p=Math.max(i,s,a),f=p-Math.min(i,s,a),g=f?p===i?(s-a)/f:p===s?2+(a-i)/f:4+(i-s)/f:0;return{h:os(60*(g<0?g+6:g)),s:os(p?f/p*100:0),v:os(p/255*100),a:c}}}),eS,Vq,jq,zq,Hq,Gq,$q,fPe=C(()=>{eS=Z(Re()),xA(),zB(),kA(),_A(),EA(),Ne(),jq=se.div(Vq||(Vq=G([`
  position: relative;
  height: 16px;
  border-radius: 2px;

  background: linear-gradient(
    to right,
    #f00 0%,
    #ff0 17%,
    #0f0 33%,
    #0ff 50%,
    #00f 67%,
    #f0f 83%,
    #f00 100%
  );
`]))),Hq=se(SA)(zq||(zq=G([`
  z-index: 2;
`]))),Gq=({className:i,hue:s,onChange:a})=>eS.default.createElement(jq,{className:i},eS.default.createElement(Jx,{onMove:c=>{a({h:360*c.left})},onKey:c=>{a({h:ov(s+c.left*360,0,360)})},"aria-label":"Hue","aria-valuetext":os(s)},eS.default.createElement(Hq,{left:s/360,color:CA({h:s,s:100,v:100,a:1})}))),$q=eS.default.memo(Gq)}),tS,Wq,Kq,qq,Xq,Yq,Zq,mPe=C(()=>{tS=Z(Re()),xA(),zB(),kA(),_A(),EA(),Ne(),Kq=se.div(Wq||(Wq=G([`
  position: relative;
  flex-grow: 1;
  border-color: transparent; /* Fixes https://github.com/omgovich/react-colorful/issues/139 */
  border-bottom: 12px solid #000;
  border-radius: 2px;
  background-image: linear-gradient(to top, #000, rgba(0, 0, 0, 0)),
    linear-gradient(to right, #fff, rgba(255, 255, 255, 0));

  // Improve elements rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),Xq=se(SA)(qq||(qq=G([`
  z-index: 3;
`]))),Yq=({hsva:i,onChange:s})=>{let a=f=>{s({s:f.left*100,v:100-f.top*100})},c=f=>{s({s:ov(i.s+f.left*100,0,100),v:ov(i.v-f.top*100,0,100)})},p={backgroundColor:CA({h:i.h,s:100,v:100,a:1})};return tS.default.createElement(Kq,{style:p},tS.default.createElement(Jx,{onMove:a,onKey:c,"aria-label":"Color","aria-valuetext":"Saturation ".concat(os(i.s),"%, Brightness ").concat(os(i.v),"%")},tS.default.createElement(Xq,{top:1-i.v/100,left:i.s/100,color:CA(i)})))},Zq=tS.default.memo(Yq)}),nS,Qq,Jq,eX,tX,nX,rX,iX,vPe=C(()=>{nS=Z(Re()),xA(),zB(),kA(),_A(),EA(),Ne(),Jq=se.div(Qq||(Qq=G([`
  position: relative;
  height: 16px;
  border-radius: 2px;
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),tX=se.div.attrs(({colorFrom:i,colorTo:s})=>({style:{backgroundImage:"linear-gradient(90deg, ".concat(i,", ").concat(s,")")}}))(eX||(eX=G([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;

  // Improve rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),rX=se(SA)(nX||(nX=G([`
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),iX=({className:i,hsva:s,onChange:a})=>{let c=y=>{a({a:y.left})},p=y=>{a({a:ov(s.a+y.left)})},f=PA(Object.assign({},s,{a:0})),g=PA(Object.assign({},s,{a:1}));return nS.default.createElement(Jq,{className:i},nS.default.createElement(tX,{colorFrom:f,colorTo:g}),nS.default.createElement(Jx,{onMove:c,onKey:p,"aria-label":"Alpha","aria-valuetext":"".concat(os(s.a*100),"%")},nS.default.createElement(rX,{left:s.a,color:PA(s)})))}}),TA,oX=C(()=>{TA=(i,s)=>{if(i===s)return!0;for(let a in i)if(i[a]!==s[a])return!1;return!0}});function gPe(i,s,a,c){let{editing:p}=FB(),[f,g]=(0,Dd.useState)(s),y=bA(a),w=bA(c),S=p?f:s,[T,I]=(0,Dd.useState)(()=>i.toHsva(S)),A=(0,Dd.useRef)({color:S,hsva:T}),k=(0,Dd.useRef)({color:S,hsva:T});(0,Dd.useEffect)(()=>{p&&g(A.current.color)},[p]),(0,Dd.useEffect)(()=>{let O=i.fromHsva(T);p?!TA(T,A.current.hsva)&&!i.equal(O,A.current.color)&&(A.current={hsva:T,color:O},g(O),y(O)):!TA(T,k.current.hsva)&&!i.equal(O,k.current.color)&&(k.current={hsva:T,color:O},A.current={hsva:T,color:O},w(O))},[p,T,i,y,w]),(0,Dd.useEffect)(()=>{if(!p&&!i.equal(S,k.current.color)){let O=i.toHsva(S);k.current={hsva:O,color:S},I(O)}},[p,S,i]);let D=(0,Dd.useCallback)(O=>{I(F=>Object.assign({},F,O))},[]);return[T,D]}var Dd,yPe=C(()=>{Dd=Z(Re()),oX(),Cq(),BB()}),Dy,sX,aX,lX,bPe=C(()=>{Dy=Z(Re()),fPe(),mPe(),vPe(),yPe(),Ne(),aX=se.div(sX||(sX=G([`
  position: relative;
  display: flex;
  gap: 4px;
  flex-direction: column;
  width: 200px;
  height: 200px;
  user-select: none;
  cursor: default;
`]))),lX=i=>{var s=i,{className:a,colorModel:c,color:p=c.defaultColor,temporarilySetValue:f,permanentlySetValue:g,discardTemporaryValue:y}=s,w=U(s,["className","colorModel","color","temporarilySetValue","permanentlySetValue","discardTemporaryValue"]);let[S,T]=gPe(c,p,f,g);return(0,Dy.useEffect)(()=>()=>{y()},[]),Dy.default.createElement(aX,j({},w),Dy.default.createElement(Zq,{hsva:S,onChange:T}),Dy.default.createElement($q,{hue:S.h,onChange:T}),Dy.default.createElement(iX,{hsva:S,onChange:T}))}}),GB,uX,cX,dX,hX,_Pe=C(()=>{GB=Z(Re()),bPe(),oX(),kA(),BB(),uX=i=>({r:i.r/255,g:i.g/255,b:i.b/255,a:i.a}),cX=i=>({r:i.r*255,g:i.g*255,b:i.b*255,a:i.a}),dX={defaultColor:{r:0,g:0,b:0,a:1},toHsva:i=>Uq(cX(i)),fromHsva:i=>uX(Bq(i)),equal:TA},hX=i=>GB.default.createElement(Pq,null,GB.default.createElement(lX,z(j({},i),{permanentlySetValue:s=>{i.permanentlySetValue(s)},colorModel:dX})))}),wPe=C(()=>{_Pe()}),pX,fX,mX,xPe=C(()=>{pX=Z(Re()),fX=function(i){(0,pX.useEffect)(i,[])},mX=fX}),vX,gX,yX,SPe=C(()=>{vX=Z(Re()),xPe(),gX=function(i){var s=(0,vX.useRef)(i);s.current=i,mX(function(){return function(){return s.current()}})},yX=gX}),MA,bX,_X,EPe=C(()=>{MA=Z(Re()),SPe(),bX=function(i){var s=(0,MA.useRef)(0),a=(0,MA.useState)(i),c=a[0],p=a[1],f=(0,MA.useCallback)(function(g){cancelAnimationFrame(s.current),s.current=requestAnimationFrame(function(){p(g)})},[]);return yX(function(){cancelAnimationFrame(s.current)}),[c,f]},_X=bX});function CPe(i){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];i&&i.addEventListener&&i.addEventListener.apply(i,s)}function PPe(i){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];i&&i.removeEventListener&&i.removeEventListener.apply(i,s)}var AA,kPe=C(()=>{AA=typeof window<"u"}),wX,xX,IA,$B=C(()=>{wX=Z(Re()),EPe(),kPe(),xX=function(i,s){i===void 0&&(i=1/0),s===void 0&&(s=1/0);var a=_X({width:AA?window.innerWidth:i,height:AA?window.innerHeight:s}),c=a[0],p=a[1];return(0,wX.useEffect)(function(){if(AA){var f=function(){p({width:window.innerWidth,height:window.innerHeight})};return CPe(window,"resize",f),function(){PPe(window,"resize",f)}}},[]),c},IA=xX});function WB(i){let[s,a]=(0,KB.useState)(null);return(0,KB.useLayoutEffect)(()=>(i&&a(i.getBoundingClientRect()),()=>{a(null)}),[i]),s}var KB,SX=C(()=>{KB=Z(Re())}),EX,CX,qB,PX=C(()=>{EX=Z(Re()),CX=(0,EX.createContext)({}),qB=CX});function TPe(i,s,a){let c=i.getBoundingClientRect(),p=f=>{(f.clientX<c.left-s||f.clientX>c.left+c.width+s||f.clientY<c.top-s||f.clientY>c.top+c.height+s)&&a(f)};return window.addEventListener("mousemove",p),()=>{window.removeEventListener("mousemove",p)}}var MPe=C(()=>{}),kX,RA,XB,TX,YB,MX=C(()=>{kX=Z(Re()),RA=Z(Re()),$B(),SX(),PX(),mr(),gB(),MPe(),Cy(),Jr(),XB=8,TX=i=>{var s,a;let c=i.children(),[p,f]=sr(null),g=c.props.style?j({},c.props.style):{};g.position="absolute";let y=WB(f),w=WB(i.target),S=IA(),[T,I]=(0,RA.useState)({});return(0,RA.useLayoutEffect)(()=>{var A,k,D;if(!y||!f||!w)return;let O=(A=i.verticalGap)!=null?A:8,F={},V=(k=i.verticalPlacement)!=null?k:"bottom",$=0,X=0;V==="bottom"?w.bottom+y.height+O<S.height?(V="bottom",$=w.bottom+O,F.top="0px"):w.top>y.height+O?(V="top",$=w.top-(y.height+O),F.bottom="0px",F.transform="rotateZ(180deg)"):V="overlay":V==="top"&&(w.top>y.height+O?(V="top",$=w.top-(y.height+O),F.bottom="0px",F.transform="rotateZ(180deg)"):w.bottom+y.height+O<S.height?(V="bottom",$=w.bottom+O,F.top="0px"):V="overlay");let re=0;if(V!=="overlay"){let Ie=w.left+w.width/2;Ie<y.width/2?(X=O,re=Math.max(Ie-O,XB)):Ie+y.width/2>S.width?(X=S.width-(O+y.width),re=Math.min(Ie-X,y.width-XB)):(X=Ie-y.width/2,re=y.width/2),F.left=re+"px"}let{minX:ne=-1/0,maxX:ae=1/0,minY:Se=-1/0,maxY:fe=1/0}=(D=i.constraints)!=null?D:{},ge={left:li(X,ne,ae-y.width),top:li($,Se,fe+y.height)};if(f.style.left=ge.left+"px",f.style.top=ge.top+"px",I(F),i.onPointerOutside)return TPe(f,i.onPointerOutside.threshold,i.onPointerOutside.callback)},[y,f,i.target,w,S,i.onPointerOutside]),vB([f,(s=i.target)!=null?s:null],(a=i.onClickOutside)!=null?a:iu),kX.default.createElement(qB.Provider,{value:T},(0,RA.cloneElement)(c,{ref:p,style:g}))},YB=TX});function lc(i,s){let a=(...k)=>{},{isPointerBeingCaptured:c}=BK("usePopover"),[p,f]=sr({isOpen:!1}),g=(0,ss.useRef)(i),y=(0,ss.useCallback)(k=>{p.current={isOpen:!1}},[]),w=(0,ss.useCallback)((k,D)=>{var O;let F=typeof g.current=="function"?g.current():g.current;function V(){T.childHasFocusRef.current||F.closeOnClickOutside!==!1&&y("clicked outside popover")}p.current={isOpen:!0,clickPoint:{clientX:k.clientX,clientY:k.clientY},target:D,opts:F,onClickOutside:V,onPointerOutside:F.closeWhenPointerIsDistant===!1?void 0:{threshold:(O=F.pointerDistanceThreshold)!=null?O:100,callback:()=>{T.childHasFocusRef.current||c()||y("pointer outside")}}}},[]),S=(0,ss.useCallback)((...k)=>{p.current.isOpen?y("toggled"):w(...k)},[]),T=APe({_debug:a,state:f}),[,I]=(0,ss.useContext)(AS);(0,ss.useEffect)(()=>{let k;return f.isOpen&&(k=I()),()=>k==null?void 0:k()},[f.isOpen]);let A=(0,ss.useContext)(xy);return{node:f.isOpen?(0,AX.createPortal)(ss.default.createElement(ZB.Provider,{value:T.childPopoverLock},ss.default.createElement(YB,{children:s,target:f.target,onClickOutside:f.onClickOutside,onPointerOutside:f.onPointerOutside,constraints:f.opts.constraints,verticalGap:f.opts.verticalGap})),A):ss.default.createElement(ss.default.Fragment,null),open:w,close:y,toggle:S,isOpen:f.isOpen}}function APe(i){let s=(0,ss.useContext)(ZB);(0,ss.useEffect)(()=>{if(i.state.isOpen){let c=s.takeFocus();return i._debug("take focus"),()=>{i._debug("release focus"),c.releaseFocus()}}},[i.state.isOpen]);let a=(0,ss.useRef)(!1);return{childHasFocusRef:a,childPopoverLock:{takeFocus(){return a.current=!0,{releaseFocus(){a.current=!1}}}}}}var ss,AX,ZB,uc=C(()=>{wB(),mr(),ss=Z(Re()),AX=Z(Xl()),rv(),MX(),VU(),ZB=ss.default.createContext({takeFocus(){return{releaseFocus(){}}}})}),Ld,IX,RX,OX,DX,LX,NX,FX,BX,UX,VX,jX,zX,IPe=C(()=>{Ld=Z(Re()),Ne(),PX(),RX=se.div(IX||(IX=G([`
  position: absolute;
  width: 0;
  height: 0;
  color: var(--popover-arrow-color);
  pointer-events: none;
`]))),DX=se.div(OX||(OX=G([`
  width: 12px;
  height: 8px;
  position: absolute;
  left: -7px;
  top: -8px;
  text-align: center;
  line-height: 0;
`]))),NX=se.path(LX||(LX=G([`
  fill: var(--popover-bg);
`]))),BX=se.path(FX||(FX=G([`
  fill: var(--popover-inner-stroke);
`]))),VX=se.path(UX||(UX=G([`
  fill: var(--popover-outer-stroke);
`]))),jX=(0,Ld.forwardRef)(({className:i},s)=>{let a=(0,Ld.useContext)(qB);return Ld.default.createElement(RX,{className:i,ref:s,style:j({},a)},Ld.default.createElement(DX,null,Ld.default.createElement("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ld.default.createElement(VX,{d:"M6 0L0 6H12L6 0Z"}),Ld.default.createElement(BX,{d:"M6 1.5L0 7.5H12L6 1.5Z"}),Ld.default.createElement(NX,{d:"M6 3L0 9H12L6 3Z"}))))}),zX=jX}),OA,QB,HX,GX,$X,cc,dc=C(()=>{vr(),Sa(),OA=Z(Re()),Ne(),IPe(),QB=ru(.05,"#2a2a31"),GX=se.div(HX||(HX=G([`
  position: absolute;
  --popover-bg: `,`;
  --popover-inner-stroke: #505159;
  --popover-outer-stroke: #111;

  background: var(--popover-bg);

  color: white;
  padding: 0;
  margin: 0;
  cursor: default;
  `,`;
  border-radius: 3px;
  z-index: 10000;
  border: 1px solid var(--popover-inner-stroke);
  box-shadow: 0 0 0 1px var(--popover-outer-stroke), 0 6px 8px -4px black;
  backdrop-filter: blur(8px);

  & a {
    color: inherit;
  }
`])),QB,hr),$X=OA.default.forwardRef(({children:i,className:s,showPopoverEdgeTriangle:a=!0},c)=>OA.default.createElement(GX,{className:s,ref:c},a?OA.default.createElement(zX,null):void 0,i)),cc=$X});function RPe({editingTools:i,value:s,autoFocus:a}){let c=(0,hc.useRef)(null),p=(0,hc.useCallback)(g=>{let y=OB(hPe(g));i.permanentlySetValue(y)},[i]),f=lc({debugName:"RgbaPropEditor"},()=>hc.default.createElement(JX,null,hc.default.createElement(hX,{color:{r:s.r,g:s.g,b:s.b,a:s.a},temporarilySetValue:g=>{let y=OB(g);i.temporarilySetValue(y)},permanentlySetValue:g=>{let y=OB(g);i.permanentlySetValue(y)},discardTemporaryValue:i.discardTemporaryValue})));return hc.default.createElement(hc.default.Fragment,null,hc.default.createElement(KX,null,hc.default.createElement(XX,{rgbaColor:s,ref:c,onClick:g=>{f.toggle(g,c.current)}}),hc.default.createElement(ZX,{value:RB(s,{removeAlphaIfOpaque:!0}),temporarilySetValue:JB,discardTemporaryValue:JB,permanentlySetValue:p,isValid:g=>!!g.match(DB),autoFocus:a})),f.node)}var hc,WX,KX,qX,XX,YX,ZX,JB,QX,JX,eY,OPe=C(()=>{Eq(),Eq(),hc=Z(Re()),wPe(),Ne(),uc(),IB(),dc(),KX=se.div(WX||(WX=G([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),XX=se.div.attrs(i=>({style:{background:RB(i.rgbaColor)}}))(qX||(qX=G([`
  height: 18px;
  aspect-ratio: 1;
  border-radius: 99999px;
`]))),ZX=se(yA)(YX||(YX=G([`
  flex: 1;
`]))),JB=()=>{},JX=se.div(QX||(QX=G([`
  position: absolute;
  background-color: `,`;
  color: white;
  margin: 0;
  cursor: default;
  border-radius: 3px;
  z-index: 10000;
  backdrop-filter: blur(8px);

  padding: 4px;
  pointer-events: all;

  border: none;
  box-shadow: none;
`])),QB),eY=RPe});function DPe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let[p,f]=su.default.useState();(0,su.useEffect)(()=>{f(a?s.getAssetUrl(a):void 0)},[a]);let g=(0,su.useCallback)(w=>ye(this,null,function*(){let S=w.target.files[0];s.permanentlySetValue({type:"image",id:void 0});let T=yield s.createAsset(S);T?s.permanentlySetValue({type:"image",id:T}):s.permanentlySetValue(a),w.target.value=null}),[s,a]),y=!(a!=null&&a.id);return su.default.createElement(eU,{empty:y},su.default.createElement(aY,{empty:y,title:y?"Upload image":'"'.concat(a.id,'" (Click to upload new image)')},su.default.createElement(uY,{type:"file",onChange:g,accept:"image/*,.hdr",autoFocus:c}),p?su.default.createElement(dY,{src:p}):su.default.createElement(rY,null)),!y&&su.default.createElement(pY,{title:"Delete image",onClick:()=>{s.permanentlySetValue({type:"image",id:void 0})}},su.default.createElement(aB,null)))}var su,tY,eU,nY,rY,iY,oY,sY,aY,lY,uY,cY,dY,hY,pY,fY,LPe=C(()=>{Gx(),su=Z(Re()),Ne(),eU=se.div(tY||(tY=G([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),rY=se.div(nY||(nY=G([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),aY=se.label(sY||(sY=G([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),i=>i.empty?No(iY||(iY=G([""]))):No(oY||(oY=G([""])))),uY=se.input.attrs({type:"file"})(lY||(lY=G([`
  display: none;
`]))),dY=se.img(cY||(cY=G([`
  position: absolute;
  inset: 0;
  height: 100%;
  aspect-ratio: 1;

  object-fit: cover;
`]))),pY=se.button(hY||(hY=G([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),eU),fY=DPe});function NPe({propConfig:i,editingTools:s,value:a,autoFocus:c}){let[p,f]=au.default.useState();(0,au.useEffect)(()=>{f(a?s.getAssetUrl(a):void 0)},[a]);let g=(0,au.useCallback)(w=>ye(this,null,function*(){let S=w.target.files[0];s.permanentlySetValue({type:"file",id:void 0});let T=yield s.createAsset(S);T?s.permanentlySetValue({type:"file",id:T}):s.permanentlySetValue(a),w.target.value=null}),[s,a]),y=!(a!=null&&a.id);return au.default.createElement(tU,{empty:y},au.default.createElement(wY,{empty:y,title:y?"Upload file":'"'.concat(a.id,'" (Click to upload new file)')},au.default.createElement(SY,{type:"file",onChange:g,autoFocus:c}),p?au.default.createElement(iB,null):au.default.createElement(gY,null)),!y&&au.default.createElement(CY,{title:"Delete file",onClick:()=>{s.permanentlySetValue({type:"file",id:void 0})}},au.default.createElement(aB,null)))}var au,mY,tU,vY,gY,yY,bY,_Y,wY,xY,SY,EY,CY,PY,FPe=C(()=>{Gx(),au=Z(Re()),Ne(),tU=se.div(mY||(mY=G([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),gY=se.div(vY||(vY=G([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),wY=se.label(_Y||(_Y=G([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),i=>i.empty?No(yY||(yY=G([""]))):No(bY||(bY=G([""])))),SY=se.input.attrs({type:"file"})(xY||(xY=G([`
  display: none;
`]))),CY=se.button(EY||(EY=G([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),tU),PY=NPe}),nU,kY=C(()=>{xCe(),QK(),uPe(),dPe(),OPe(),LPe(),FPe(),nU={number:PB,string:Sq,boolean:TK,stringLiteral:vq,rgba:eY,image:fY,file:PY}});function rS(i){let s=new WeakMap;return a=>(s.has(a)||s.set(a,i(a)),s.get(a))}var DA=C(()=>{});function pc(i){return i.type==="compound"||i.type==="enum"}function LA(i,s){if(!i)return;let[a,...c]=s;if(a===void 0)return i;if(!pc(i))return;let p=i.type==="enum"?i.cases[a]:i.props[a];return LA(p,c)}function NA(i,s){let a=s.deserializeAndSanitize(i);return a===void 0?s.default:a}function BPe(i){return!pc(i)}function*iS(i,s){if(i.type==="compound")for(let a in i.props)yield*kt(iS(i.props[a],[...s,a]));else{if(i.type==="enum")throw new Error("Not implemented yet");return yield{path:s,conf:i}}}var rU,Cp=C(()=>{DA(),rU=rS(i=>{if(i.type==="enum")throw new Error("Not implemented yet for enums");for(let s in i.props){let a=i.props[s];if(pc(a)){if(rU(a))return!0}else return!0}return!1})}),iU,TY=C(()=>{iU="calc(var(--left-pad) + var(--depth) * var(--step))"}),MY,Pp,sv=C(()=>{Ne(),Pp=No(MY||(MY=G([`
  font-weight: 300;
  font-size: 11px;
  color: `,`;
  text-shadow: 0.5px 0.5px 2px rgba(0, 0, 0, 0.3);
`])),i=>i.isHighlighted==="self"?"#CCC":"#919191")}),oS,FA,AY,IY,RY,OY,DY,LY,NY=C(()=>{Cy(),oS=Z(Re()),Ne(),FA=26,IY=se.li(AY||(AY=G([`
  height: `,`px;
  padding: 0 12px;
  margin: 0;
  display: flex;
  align-items: center;
  font-size: 11px;
  font-weight: 400;
  position: relative;
  color: `,`;
  cursor: `,`;

  &:after {
    position: absolute;
    inset: 2px 1px;
    display: block;
    content: ' ';
    pointer-events: none;
    z-index: -1;
    border-radius: 3px;
  }

  &:hover:after {
    background-color: `,`;
  }
`])),FA,i=>i.enabled?"white":"#8f8f8f",i=>i.enabled?"normal":"not-allowed",i=>i.enabled?"rgba(63, 174, 191, 0.75)":"initial"),OY=se.span(RY||(RY=G([""]))),DY=i=>oS.default.createElement(IY,{onClick:i.enabled?i.onClick:iu,enabled:i.enabled,title:i.enabled?void 0:"Disabled"},oS.default.createElement(OY,null,oS.default.createElement(oS.default.Fragment,null,i.label))),LY=DY});function UPe(i){let s=(0,oU.useRef)(i);s.current=i,(0,oU.useEffect)(()=>{let a=c=>s.current(c);return window.addEventListener("keydown",a),()=>{window.removeEventListener("keydown",a)}},[])}var oU,VPe=C(()=>{oU=Z(Re())}),sS,FY,BY,UY,VY,jY,zY,HY,sU,GY=C(()=>{sS=Z(Re()),NY(),Ne(),Sa(),vr(),FY=190,BY=!0,VY=se.ul(UY||(UY=G([`
  position: absolute;
  min-width: `,`px;
  z-index: 10000;
  background: `,`;
  backdrop-filter: blur(2px);
  color: white;
  list-style-type: none;
  padding: 2px 0;
  margin: 0;
  border-radius: 1px;
  cursor: default;
  `,`;
  border-radius: 3px;
`])),FY,ru(.2,"#111"),hr),zY=se.div(jY||(jY=G([`
  padding: 4px 10px;
  border-bottom: 1px solid #6262626d;
  color: #adadadb3;
  font-size: 11px;
  font-weight: 500;
`]))),HY=sS.default.forwardRef((i,s)=>sS.default.createElement(VY,{ref:s},BY&&i.displayName?sS.default.createElement(zY,null,i.displayName):null,i.items.map((a,c)=>sS.default.createElement(LY,{key:"item-".concat(c),label:a.label,enabled:a.enabled!==!1,onClick:p=>{a.callback&&a.callback(p),i.onRequestClose()}})))),sU=HY}),$Y,WY,BA,KY,aS,qY,XY,jPe=C(()=>{SX(),$Y=Z(Re()),WY=Z(Re()),BA=Z(Re()),KY=Z(Xl()),$B(),NY(),rv(),VPe(),GY(),aS=20,qY=i=>{let[s,a]=(0,BA.useState)(null),c=WB(s),p=IA();(0,BA.useLayoutEffect)(()=>{if(!c||!s)return;let y={left:c.width/2,top:FA/2+(i.displayName?FA:0)},w={left:i.clickPoint.clientX-y.left,top:i.clickPoint.clientY-y.top};w.left<0?w.left=0:w.left+c.width>p.width&&(w.left=p.width-c.width),w.top<0?w.top=0:w.top+c.height>p.height&&(w.top=p.height-c.height),s.style.left=w.left+"px",s.style.top=w.top+"px";let S=T=>{(T.clientX<w.left-aS||T.clientX>w.left+c.width+aS||T.clientY<w.top-aS||T.clientY>w.top+c.height+aS)&&i.onRequestClose()};return window.addEventListener("mousemove",S),()=>{window.removeEventListener("mousemove",S)}},[c,s,i.clickPoint,p,i.onRequestClose]);let f=(0,WY.useContext)(xy);UPe(y=>{y.key==="Escape"&&i.onRequestClose()});let g=(0,$Y.useMemo)(()=>{let y=Array.isArray(i.items)?i.items:i.items();return y.length>0?y:[{label:i.displayName?"No actions for ".concat(i.displayName):"No actions found",enabled:!1}]},[i.items]);return(0,KY.createPortal)(BA.default.createElement(sU,{items:g,onRequestClose:i.onRequestClose,displayName:i.displayName,ref:a}),f)},XY=qY}),UA,YY,ZY,zPe=C(()=>{UA=Z(Re()),YY=(i,s)=>{let[a,c]=(0,UA.useState)({isOpen:!1}),p=(0,UA.useCallback)(()=>c({isOpen:!1}),[]);return(0,UA.useEffect)(()=>{if(!i||s.disabled===!0){c({isOpen:!1});return}let f=g=>{c({isOpen:!0,event:g}),g.preventDefault(),g.stopPropagation()};return i.addEventListener("contextmenu",f),()=>{i.removeEventListener("contextmenu",f)}},[i,s.disabled]),[a,p]},ZY=YY});function Ts(i,s){let[a,c]=ZY(i,s),[,p]=(0,Ly.useContext)(AS);return(0,Ly.useEffect)(()=>{var f;let g;return a.isOpen&&((f=s.onOpen)==null||f.call(s),g=p()),()=>g==null?void 0:g()},[a.isOpen,s.onOpen]),[a.isOpen?Ly.default.createElement(XY,{items:s.menuItems,displayName:s.displayName,clickPoint:a.event,onRequestClose:c}):QY,c,a.isOpen]}var Ly,QY,Ms=C(()=>{Ly=Z(Re()),jPe(),zPe(),VU(),QY=Ly.default.createElement(Ly.default.Fragment,null)});function kp(i,s){return s.length===0?i:md(i,s)}var VA=C(()=>{np()});function JY(i,s){return i==null?null:i instanceof Element&&i.matches(s)?i:JY(i.parentElement,s)}var HPe=C(()=>{});function lS(i,s){let a=i;for(let c of s)a=a[c];return a}var jA=C(()=>{});function GPe(i){let s=new zA.Atom(void 0),a=new zA.Atom({}),c=new zA.Atom({}),p=0;return{addRelatedFlags(f,g){let y=String(++p),w=g.map(S=>{let T={flag:S.flag},I=[S.affects,f,y];return c.setByPointer(A=>lS(A,I),T),I});return()=>{for(let S of w)c.setByPointer(T=>lS(T,S),void 0)}},usePresenceFlag(f){if(!i.enabled)return;let g=(0,uS.useMemo)(()=>{if(!f)return lU;let y=s.prism,w=(0,cS.pointerToPrism)(a.pointer[f]),S=(0,cS.pointerToPrism)(c.pointer[f]);return(0,cS.prism)(()=>{if(w.getValue())return 2;{let T=S.getValue(),I=y.getValue(),A=T&&I&&T[I];if(A){let k;for(let D of Object.values(A))D&&(k&&k>=D.flag||(k=D.flag));return k}return}})},[f]);return ey(g)},setUserHover(f){let g=s.get();g!==f&&(g&&a.setByPointer(y=>y[g],!1),s.set(f),f&&a.setByPointer(y=>y[f],!0))}}}function av(i){let s=uS.default.useContext(uU),a=s.usePresenceFlag(i);return{attrs:{[HA]:i},flag:a,useRelations(c,p){(0,aU.useEffect)(()=>i&&s.addRelatedFlags(i,c()),[i,...p])}}}function eZ(i){let s=uS.default.useContext(uU),a=xp("PresenceListeners");(0,aU.useEffect)(()=>{let c;if(!i)return;let p=f=>{if(f.target instanceof Node){let g=JY(f.target,"[".concat(HA,"]"));if(g){let y=g.getAttribute(HA);c!==y&&(c=y,s.setUserHover(y||void 0),a._debug("Updated current hover",{itemKey:y}));return}c!=null&&(c=null,s.setUserHover(void 0),a._debug("Cleared current hover"))}};return i.addEventListener("mouseover",p),()=>{i.removeEventListener("mouseover",p),c!=null&&(c=null,a._debug("Cleared current hover as part of cleanup"))}},[i,s])}var uS,aU,cS,zA,lU,uU,HA,lv=C(()=>{uS=Z(Re()),aU=Z(Re()),Sp(),cS=Mt,zA=Mt,hn(),HPe(),jA(),lU=(0,cS.prism)(()=>{}),lU.keepHot(),uU=uS.default.createContext(GPe({enabled:!1})),HA="data-pi-key"}),Bo,tZ,dS,nZ,cU,Tp,rZ,dU,iZ,oZ,sZ,GA,aZ,lZ,uZ,cZ,dZ,hZ,hS,pZ,hU,$A=C(()=>{vr(),Sa(),Bo=Z(Re()),Ne(),lv(),dS=se.div(tZ||(tZ=G([`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 16px;
  margin: 0 0px 0 2px;
  position: relative;
  z-index: 0;
  opacity: 0.7;

  &:after {
    position: absolute;
    left: -14px;
    right: -14px;
    top: -2px;
    bottom: -2px;
    content: ' ';
    display: none;
    z-index: -1;
    background: `,`;
  }

  &:hover {
    opacity: 1;
    &:after {
      display: block;
    }
  }
`])),ru(.2,"black")),cU=se.div(nZ||(nZ=G([`
  background: none;
  position: relative;
  border: 0;
  transition: transform 0.1s ease-out;
  z-index: 0;
  outline: none;
  cursor: pointer;

  &:after {
    display: none;
    `,`:hover & {
      display: block;
    }
    position: absolute;
    left: -4px;
    right: -4px;
    top: -4px;
    bottom: -4px;
    content: ' ';
    z-index: -1;
  }
`])),dS),Tp={offColor:"#555",onColor:"#e0c917"},dU=se(cU)(rZ||(rZ=G([`
  &:hover {
    color: #e0c917;
  }

  color: `,`;
`])),i=>i.presence===2?"white":i.isOn?Tp.onColor:Tp.offColor),oZ=No(iZ||(iZ=G([`
  pointer-events: none !important;
`]))),GA=se(cU)(sZ||(sZ=G([`
  color: `,`;

  `,`;
`])),i=>i.flag===2?"white":i.available?Tp.onColor:Tp.offColor,i=>i.available?hr:oZ),lZ=se(GA)(aZ||(aZ=G([`
  transform: translateX(2px);
  `,`:hover & {
    transform: translateX(-7px);
  }
`])),dS),cZ=se(GA)(uZ||(uZ=G([`
  transform: translateX(-2px);
  `,`:hover & {
    transform: translateX(7px);
  }
`])),dS),(i=>{let s=se.g(dZ||(dZ=G([`
    stroke-width: 1;
    `,`:hover & path {
      stroke-width: 3;
    }
  `])),GA);i.Prev=()=>Bo.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Bo.default.createElement(s,{transform:"translate(6 3)"},Bo.default.createElement("path",{d:"M4 1L1 4L4 7",stroke:"currentColor"}))),i.Next=()=>Bo.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Bo.default.createElement(s,{transform:"translate(1 3)"},Bo.default.createElement("path",{d:"M1 1L4 4L1 7",stroke:"currentColor"})));let a=se.g(hZ||(hZ=G([`
    stroke-width: 0;
    `,`:hover & path {
      stroke: currentColor;
      stroke-width: 2;
    }
  `])),dU);i.Cur=()=>Bo.default.createElement("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Bo.default.createElement(a,{transform:"translate(1 4)"},Bo.default.createElement("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"currentColor"})))})(hS||(hS={})),pZ=i=>{var s,a,c,p,f;let g=av((s=i.prev)==null?void 0:s.itemKey),y=av(((a=i.cur)==null?void 0:a.type)==="on"?i.cur.itemKey:void 0),w=av((c=i.next)==null?void 0:c.itemKey);return Bo.default.createElement(dS,null,Bo.default.createElement(lZ,j({available:!!i.prev,onClick:(p=i.prev)==null?void 0:p.jump,flag:g.flag},g.attrs),Bo.default.createElement(hS.Prev,null)),Bo.default.createElement(dU,j({isOn:i.cur.type==="on",onClick:i.cur.toggle,presence:y.flag},y.attrs),Bo.default.createElement(hS.Cur,null)),Bo.default.createElement(cZ,j({available:!!i.next,onClick:(f=i.next)==null?void 0:f.jump,flag:w.flag},w.attrs),Bo.default.createElement(hS.Next,null)))},hU=pZ}),WA,pS,fZ,mZ,vZ,gZ,yZ,bZ,_Z,fS,wZ=C(()=>{Sa(),WA=Z(Re()),Ne(),Fe(),$A(),Cp(),pS={defaultState:{color:ru(.95,"#C4C4C4"),hoverColor:ru(.15,Tp.onColor)},withStaticOverride:{color:ru(.85,"#C4C4C4"),hoverColor:ru(.15,Tp.onColor)}},mZ=se.div(fZ||(fZ=G([`
  width: 16px;
  margin: 0 0px 0 2px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  color: `,`;

  &:hover {
    color: `,`;
  }
`])),i=>i.hasStaticOverride?pS.withStaticOverride.color:pS.defaultState.color,i=>i.hasStaticOverride?pS.withStaticOverride.hoverColor:pS.defaultState.hoverColor),gZ=se.div(vZ||(vZ=G([`
  width: 5px;
  height: 5px;
  border-radius: 1px;
  transform: rotate(45deg);
  /* border: 1px solid currentColor; */
  background-color: currentColor;
`]))),bZ=se.div(yZ||(yZ=G([`
  width: 5px;
  height: 5px;
  background-color: currentColor;
  border-radius: 1px;
  transform: rotate(45deg);
`]))),_Z=i=>{let{hasStaticOverride:s,obj:a,propConfig:c,pathToProp:p}=i;return WA.default.createElement(mZ,{hasStaticOverride:s,onClick:()=>{me().transaction(({stateEditors:f})=>{for(let{path:g,conf:y}of iS(c,p)){if(pc(y))continue;let w=z(j({},a.address),{pathToProp:g});f.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(w,c)}})},title:"Sequence this prop"},s?WA.default.createElement(bZ,{title:"The default value is overridden"}):WA.default.createElement(gZ,{title:"This is the default value for this prop"}))},fS=_Z});function mS(i){return JSON.stringify(pU(i))}function pU(i){return N0(i)?Object.keys(i).sort().reduce((s,a)=>(s[a]=pU(i[a]),s),{}):Array.isArray(i)?i.map(pU):i}var $Pe=C(()=>{Jr()}),xZ,vS,SZ=C(()=>{xZ="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",vS=(i=21)=>{let s="",a=i;for(;a--;)s+=xZ[Math.random()*64|0];return s}});function EZ(){return vS(10)}function WPe(){return vS(10)}function KPe(){return vS(10)}var ho,Nd=C(()=>{$Pe(),SZ(),ho={forSheet(){return"sheet"},forSheetObject(i){return mS({o:i.address.objectKey})},forSheetObjectProp(i,s){return mS({o:i.address.objectKey,p:s})},forTrackKeyframe(i,s,a){return mS({o:i.address.objectKey,t:s,k:a})},forSheetObjectAggregateKeyframe(i,s){return ho.forCompoundPropAggregateKeyframe(i,[],s)},forSheetAggregateKeyframe(i,s){return mS({o:i.address.sheetId,pos:s})},forCompoundPropAggregateKeyframe(i,s,a){return mS({o:i.address.objectKey,p:s,pos:a})}}});function CZ(i,s,a){if(!s||s.data.keyframes.length===0)return PZ;let c=fU.get(s.data);if(c&&c[0]===a)return c[1];function p(g){if(!s)return;let y=s.data.keyframes[g];return y&&{kf:y,track:s,itemKey:ho.forTrackKeyframe(i,s.id,y.id)}}let f=(()=>{let g=s.data.keyframes.findIndex(w=>w.position>=a);if(g===-1)return{prev:p(s.data.keyframes.length-1)};let y=p(g);return y.kf.position===a?{prev:p(g-1),cur:y,next:p(g+1)}:{next:y,prev:p(g-1)}})();return fU.set(s.data,[a,f]),f}var fU,PZ,kZ=C(()=>{Nd(),fU=new WeakMap,PZ={}}),mU,TZ=C(()=>{mU={}});function qPe(i,s,a){let c=(0,cl.getPointerParts)(i).path;return Un(()=>{if(!rU(a))return{type:"AllStatic",beingScrubbed:!1,contextMenuItems:[],controlIndicators:uv.default.createElement(fS,{hasStaticOverride:!1,obj:s,pathToProp:c,propConfig:a})};let p=!!(0,cl.val)(md(me().atomP.ephemeral.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId].stateByObjectKey[s.address.objectKey].valuesBeingScrubbed,(0,cl.getPointerParts)(i).path)),f=[],g={beingScrubbed:p,contextMenuItems:f,controlIndicators:uv.default.createElement(uv.default.Fragment,null)},y=(0,cl.val)(s.template.getMapOfValidSequenceTracks_forStudio()),w=kp(y,c),S=w!==void 0&&Object.keys(w).length!==0,T=[],I=(0,cl.val)(s.template.getStaticButNotSequencedOverrides()),A=kp(I??mU,c)!==void 0;if(S)for(let k of iS(a,[])){if(pc(k.conf))continue;let D=kp(w,k.path);typeof D!="string"?A=!0:T.push(D)}if((A||S)&&f.push({label:"Reset all to default",callback:()=>{me().transaction(({unset:k})=>{k(i)})}}),S&&f.push({label:"Make all static",callback:()=>{me().transaction(({stateEditors:k})=>{for(let{path:D,conf:O}of iS(a,[])){if(pc(O))continue;let F=z(j({},s.address),{pathToProp:[...c,...D]}),V=lS(i,D);k.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(z(j({},F),{value:s.getValueByPointer(V)}))}})}}),(!S||S&&A)&&f.push({label:"Sequence all",callback:()=>{me().transaction(({stateEditors:k})=>{for(let{path:D,conf:O}of iS(a,c)){if(pc(O))continue;let F=z(j({},s.address),{pathToProp:D});k.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(F,a)}})}}),S){let k=cl.prism.memo("controlIndicators",()=>uv.default.createElement(XPe,{pointerToProp:i,obj:s,possibleSequenceTrackIds:w,listOfDescendantTrackIds:T}),[w,T]);return z(j({},g),{type:"HasSequences",controlIndicators:k})}else return z(j({},g),{type:"AllStatic",controlIndicators:uv.default.createElement(fS,{hasStaticOverride:A,obj:s,pathToProp:c,propConfig:a})})},[])}function XPe({pointerToProp:i,obj:s,possibleSequenceTrackIds:a,listOfDescendantTrackIds:c}){return Un(()=>{let p=(0,cl.getPointerParts)(i).path,f=(0,cl.val)(s.sheet.getSequence().positionPrism),g=c.map(k=>({trackId:k,track:(0,cl.val)(s.template.project.pointers.historic.sheetsById[s.address.sheetId].sequence.tracksByObject[s.address.objectKey].trackData[k])})).filter(({track:k})=>!!k).map(k=>z(j({},k),{nearbies:CZ(s,{id:k.trackId,data:k.track,sheetObject:s},f)})),y=g.find(({nearbies:k})=>!!k.cur),w=g.every(({nearbies:k})=>!!k.cur),S=g.reduce((k,D)=>D.nearbies.prev&&(k===void 0||D.nearbies.prev.kf.position>k.kf.position)?D.nearbies.prev:k,void 0),T=g.reduce((k,D)=>D.nearbies.next&&(k===void 0||D.nearbies.next.kf.position<k.kf.position)?D.nearbies.next:k,void 0),I=()=>{w?me().transaction(k=>{k.unset(i)}):y?me().transaction(k=>{k.set(i,(0,cl.val)(i))}):me().transaction(k=>{k.set(i,(0,cl.val)(i))})},A={cur:y?{type:"on",itemKey:ho.forCompoundPropAggregateKeyframe(s,p,f),toggle:I}:{toggle:I,type:"off"},prev:S!==void 0?{position:S.kf.position,itemKey:ho.forCompoundPropAggregateKeyframe(s,p,S.kf.position),jump:()=>{s.sheet.getSequence().position=S.kf.position}}:void 0,next:T!==void 0?{position:T.kf.position,itemKey:ho.forCompoundPropAggregateKeyframe(s,p,T.kf.position),jump:()=>{s.sheet.getSequence().position=T.kf.position}}:void 0};return uv.default.createElement(hU,j({},A))},[i,s,a,c])}var cl,uv,YPe=C(()=>{Fe(),VA(),hn(),cl=Mt,np(),uv=Z(Re()),wZ(),Cp(),Nd(),jA(),$A(),kZ(),TZ()});function ZPe(){let i=0,s=new IZ.Atom({hasLock:!1});return{replaceLock(a,c){let p=i++,f=s.get();return f.hasLock&&f.cleanup(),s.set({hasLock:!0,lockId:p,cleanup:c,deepPath:QPe(MZ(a))}),function(){let g=s.get();g.hasLock&&g.lockId===p&&(g.cleanup(),s.set({hasLock:!1}))}},getIsPropHighlightedD(a){let c=lS(s.pointer.deepPath,MZ(a));return(0,RZ.prism)(()=>{let p=(0,AZ.val)(c);return p===!0?"self":p?"descendent":null})}}}function MZ(i){return[i.projectId,i.sheetId,i.objectKey,...i.pathToProp]}function QPe(i){let s={};return up(s,i,!0),s}var AZ,IZ,RZ,KA,vU=C(()=>{AZ=Mt,IZ=Mt,RZ=Mt,jA(),Z0(),KA=ZPe()});function JPe(i,s){return JSON.stringify(i,s,2).replace(/^([\{\[])\n (\s+)/,"$1$2").replace(/(\n[ ]+[\{\[])\n\s+/g,"$1 ").replace(/\n\s*([\]\}])/g," $1")}var eke=C(()=>{});function OZ(i,s=!0){try{return typeof i=="string"?i:typeof i=="function"||i instanceof Error?i.toString():s?JPe(i):JSON.stringify(i)}catch{return(i==null?void 0:i.name)||String(i)}}var tke=C(()=>{eke()});function nke(i,s,a){i||(arguments.length>2?DZ(s,a):DZ(s))}function DZ(i,s){let a=arguments.length>1,c=OZ(typeof i=="function"?i():i),p=a?`
Instead found: `.concat(OZ(s)):"";throw new UZ("Invariant: ".concat(c).concat(p),s)}var LZ,NZ,FZ,BZ,UZ,rke=C(()=>{tke(),LZ=/^\s*at.+node:internal.+/gm,NZ=/^\s*(at|[^@]+@) (?:Object\.)?invariant.+/gm,FZ=/^\s*(at|[^@]+@).+test\-helpers.+/gm,BZ=/^\s*(at|[^@]+@).+(debounce|invariant|iif)\.[tj]s.*/gm,UZ=class extends Error{constructor(i,s){var a;super(i),Pe(this,"found"),s!==void 0&&(this.found=s),this.stack=(a=this.stack)==null?void 0:a.replace(NZ,"").replace(BZ,"").replace(FZ,"").replace(LZ,"")}}});function ike(i){return(0,qA.prism)(()=>{if(Array.isArray(i)){let s=new Array(i.length);for(let a=0;a<i.length;a++)s[a]=i[a].getValue();return s}else{let s={};for(let a in i)s[a]=(0,qA.val)(i[a]);return s}})}function gU(i){let s=Ny.default.memo(Ny.default.forwardRef(function(a,c){let p=[],f={},g={ref:c};for(let T in a){let I=a[T];(0,qA.isPrism)(I)?(p.push(I),f[T]=I):g[T]=I}let y=(0,Ny.useRef)(p.length);nke(y.current===p.length,"expect same number of observable props on every invocation of deriver wrapped component.",{initial:y.current,count:p.length});let w=(0,Ny.useMemo)(()=>ike(f),p),S=ey(w);return S&&Ny.default.createElement(i,j(j({},g),S))}));return s.displayName="deriver(".concat(i.displayName,")"),s}var qA,Ny,VZ=C(()=>{qA=Mt,hn(),Ny=Z(Re()),rke()});function oke(i,s,a){return(0,lu.prism)(()=>{var c;let p=(0,lu.getPointerParts)(i).path,f=s.getValueByPointer(i),g=lu.prism.memo("editPropValue",()=>{let D=null;return{temporarilySetValue(O){D||(D=me().scrub()),D.capture(F=>{F.set(i,O)})},discardTemporaryValue(){D&&(D.discard(),D=null)},permanentlySetValue(O){D?(D.capture(F=>{F.set(i,O)}),D.commit(),D=null):me().transaction(F=>{F.set(i,O)})}}},[]),y={createAsset:D=>s.sheet.project.assetStorage.createAsset(D),getAssetUrl:D=>D.id?s.sheet.project.assetStorage.getAssetUrl(D.id):void 0},w=(0,lu.val)(md(me().atomP.ephemeral.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId].stateByObjectKey[s.address.objectKey].valuesBeingScrubbed,(0,lu.getPointerParts)(i).path))===!0,S=[],T=z(j(j({},g),y),{value:f,beingScrubbed:w,contextMenuItems:S,controlIndicators:Fy.default.createElement(Fy.default.Fragment,null)}),I=BPe(a);if(I){let D=(0,lu.val)(s.template.getMapOfValidSequenceTracks_forStudio()),O=kp(D,p);if(typeof O=="string"){S.push({label:"Make static",callback:()=>{me().transaction(({stateEditors:ae})=>{let Se=z(j({},s.address),{pathToProp:p});ae.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(z(j({},Se),{value:s.getValueByPointer(i)}))})}});let F=O,V=lu.prism.sub("lcr",()=>{let ae=(0,lu.val)(s.template.project.pointers.historic.sheetsById[s.address.sheetId].sequence.tracksByObject[s.address.objectKey].trackData[F]),Se=(0,lu.val)(s.sheet.getSequence().positionPrism);return CZ(s,ae&&{data:ae,id:F,sheetObject:s},Se)},[F]),$;T.beingScrubbed?$="Sequenced_OnKeyframe_BeingScrubbed":V.cur?$="Sequenced_OnKeyframe":((c=V.prev)==null?void 0:c.kf.connectedRight)===!0?$="Sequenced_BeingInterpolated":$="Sequened_NotBeingInterpolated";let X=()=>{V.cur?me().transaction(ae=>{ae.unset(i)}):me().transaction(ae=>{ae.set(i,T.value)})},re={cur:V.cur?{type:"on",itemKey:V.cur.itemKey,toggle:X}:{type:"off",toggle:X},prev:V.prev!==void 0?{itemKey:V.prev.itemKey,position:V.prev.kf.position,jump:()=>{s.sheet.getSequence().position=V.prev.kf.position}}:void 0,next:V.next!==void 0?{itemKey:V.next.itemKey,position:V.next.kf.position,jump:()=>{s.sheet.getSequence().position=V.next.kf.position}}:void 0},ne=Fy.default.createElement(hU,j({},re));return z(j({},T),{type:"Sequenced",shade:$,nearbyKeyframes:V,controlIndicators:ne})}}let A=(0,lu.val)(s.template.getStaticValues()),k=kp(A,p);return typeof k<"u"&&S.push({label:"Reset to default",callback:()=>{me().transaction(({unset:D})=>{D(i)})}}),I&&S.push({label:"Sequence",callback:()=>{me().transaction(({stateEditors:D})=>{let O=z(j({},s.address),{pathToProp:p});D.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(O,a)})}}),typeof k<"u"?z(j({},T),{type:"Static",shade:T.beingScrubbed?"Static_BeingScrubbed":"Static",controlIndicators:Fy.default.createElement(fS,{hasStaticOverride:!0,obj:s,pathToProp:p,propConfig:a})}):z(j({},T),{type:"Default",shade:"Default",controlIndicators:Fy.default.createElement(fS,{hasStaticOverride:!0,obj:s,pathToProp:p,propConfig:a})})})}function ske(i,s,a){if(XA.has(i))return XA.get(i);{let c=oke(i,s,a);return XA.set(i,c),c}}function yU(i,s,a){let c=ske(i,s,a);return ey(c)}var Fy,lu,XA,bU=C(()=>{np(),Fy=Z(Re()),lu=Mt,Fe(),VA(),hn(),Cp(),wZ(),kZ(),$A(),XA=new WeakMap});function ake({propConfig:i,pointerToProp:s,obj:a,SimpleEditorComponent:c}){let p=yU(s,a,i);return Uo.default.createElement(PB,{editingTools:p,propConfig:i,value:p.value})}function lke({pointerToProp:i,obj:s,propConfig:a,visualIndentation:c}){var p;let f=(p=a.label)!=null?p:yd((0,gS.getPointerParts)(i).path),g=Object.entries(a.props),y=g.filter(([X,re])=>pc(re)),w=g.filter(([X,re])=>!pc(re)),[S,T]=sr(null),I=qPe(i,s,a),[A]=Ts(T,{menuItems:I.contextMenuItems}),k=y.length>0,D=(0,Uo.useMemo)(()=>KA.getIsPropHighlightedD(z(j({},s.address),{pathToProp:(0,gS.getPointerParts)(i).path})),[i]),O="".concat(s.address.projectId,",").concat(s.address.sheetId,",").concat(s.address.sheetInstanceId,",").concat(s.address.objectKey,",").concat((0,gS.getPointerParts)(i).path.join()),F=nQ(a);(0,Uo.useLayoutEffect)(()=>{YA.has(O)||YA.set(O,new gS.Atom(F))},[O,a]);let V=YA.get(O),$=Un(()=>V?(0,jZ.val)(V.pointer):F,[V]);return Uo.default.createElement(HZ,null,A,Uo.default.createElement(_U,{style:{"--depth":c-1}},Uo.default.createElement(WZ,{isVectorProp:F},Uo.default.createElement(qZ,null,I.controlIndicators),Uo.default.createElement(YZ,{isHighlighted:D,ref:S},Uo.default.createElement("span",null,f||"Props")),Uo.default.createElement(QZ,{isCollapsed:$,isVector:F,onClick:()=>{V==null||V.set(!V.get())}},Uo.default.createElement(lq,null))),F&&$&&Uo.default.createElement(iQ,null,[...g].map(([X,re])=>Uo.default.createElement(ake,{key:"prop-"+X,propConfig:re,pointerToProp:i[X],obj:s})))),!$&&Uo.default.createElement(tQ,{style:{"--depth":c},depth:c,lastSubIsComposite:k},[...w,...y].map(([X,re])=>Uo.default.createElement(xU,{key:"prop-"+X,propConfig:re,pointerToProp:i[X],obj:s,visualIndentation:c+1}))))}var gS,Uo,jZ,zZ,HZ,GZ,_U,$Z,WZ,KZ,qZ,XZ,YZ,ZZ,QZ,JZ,eQ,tQ,nQ,rQ,iQ,oQ,YA,uke=C(()=>{Cp(),gS=Mt,K0(),Sa(),Uo=Z(Re()),Ne(),TY(),sv(),vr(),mr(),bQ(),Ms(),YPe(),vU(),VZ(),QK(),bU(),hn(),jZ=Mt,Ry(),DA(),HZ=se.div(zZ||(zZ=G([`
  --step: 15px;
  --left-pad: 15px;
  `,`;
  --right-width: 60%;
`])),hr),_U=se.div(GZ||(GZ=G([`
  height: 30px;
  display: flex;
  align-items: stretch;
  position: relative;
`]))),WZ=se.div($Z||($Z=G([`
  padding-left: `,`;
  display: flex;
  align-items: center;
  overflow: hidden;
  `,`;
`])),iU,({isVectorProp:i})=>i?"width: calc(100% - var(--right-width))":""),qZ=se.div(KZ||(KZ=G([`
  flexshrink: 0;
`]))),YZ=gU(se.div(XZ||(XZ=G([`
  margin-left: 4px;
  cursor: default;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 4px;
  user-select: none;
  &:hover {
    color: white;
  }
  overflow: hidden;

  `,`;
`])),()=>Pp)),QZ=se.span(ZZ||(ZZ=G([`
  width: 28px;
  height: 28px;
  font-size: 9px;
  display: flex;
  align-items: center;
  justify-content: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  visibility: `,`;

  `,`:hover & {
    visibility: visible;
  }

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),i=>i.isCollapsed?0:90,i=>!i.isVector&&i.isCollapsed||i.isVector&&!i.isCollapsed?"visible":"hidden",_U,i=>i.isCollapsed?15:75),JZ=ru(.05,"#282b2f"),tQ=se.div(eQ||(eQ=G([`
  /* background: `,`; */
  /* padding: `,` 0; */
`])),({depth:i})=>Nx(i*.03,JZ),i=>i.lastSubIsComposite?0:"4px"),nQ=rS(i=>{let s=Object.entries(i.props);return s.length<=3&&s.every(([a,c])=>c.type==="number"&&["x","y","z"].includes(a))}),iQ=se.div(rQ||(rQ=G([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`]))),oQ=Uo.default.memo(lke),YA=new Map});function cke({isHighlighted:i}){return i==="self"?"#1857a4":i==="descendent"?"#0a2f5c":"initial"}var dke=C(()=>{});function hke({propConfig:i,pointerToProp:s,editingTools:a,children:c,isPropHighlightedD:p}){var f;let g=(f=i.label)!=null?f:yd((0,wU.getPointerParts)(s).path),[y,w]=sr(null),[S]=Ts(w,{menuItems:a.contextMenuItems});return By.default.createElement(aQ,{isHighlighted:p},S,By.default.createElement(uQ,null,By.default.createElement(pQ,null,a.controlIndicators),By.default.createElement(dQ,{isHighlighted:p,ref:y,title:["obj","props",...(0,wU.getPointerParts)(s).path].join(".")},g)),By.default.createElement(mQ,null,c))}var wU,By,sQ,aQ,lQ,uQ,cQ,dQ,hQ,pQ,fQ,mQ,pke=C(()=>{wU=Mt,Ms(),mr(),Jr(),By=Z(Re()),Ne(),vr(),sv(),VZ(),TY(),dke(),aQ=gU(se.div(sQ||(sQ=G([`
  display: flex;
  height: 30px;
  justify-content: flex-start;
  align-items: stretch;
  // We cannot calculate both the container (details panel) width and the descendant
  // (this) width dynamically. This leads to the container width being calculated
  // without this percentage being taken into consideration leads to horizontal
  // clipping/scrolling--the same way as if we explicitly fixed either the container
  // width, or the descendant width.
  // The correct solution for tabulated UIs with dynamic container widths is to use
  // CSS grid. For now I fixed this issue by just giving a great enough width
  // to the details panel so most things don't break.
  --right-width: 60%;
  position: relative;
  `,`;

  /* background-color: `,`; */
`])),hr,cke)),uQ=se.div(lQ||(lQ=G([`
  box-sizing: border-box;
  padding-left: `,`;
  padding-right: 4px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: stretch;
  gap: 4px;
  flex-grow: 0;
  flex-shrink: 0;
  width: calc(100% - var(--right-width));
`])),iU),dQ=gU(se.div(cQ||(cQ=G([`
  text-align: left;
  flex: 1 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  user-select: none;
  cursor: default;

  `,`;
  &:hover {
    color: white;
  }
`])),Pp)),pQ=se.div(hQ||(hQ=G([`
  flex-basis: 8px;
  flex: 0 0;
  display: flex;
  align-items: center;
`]))),mQ=se.div(fQ||(fQ=G([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`])))});function fke({propConfig:i,pointerToProp:s,obj:a,SimpleEditorComponent:c}){let p=yU(s,a,i),f=(0,yS.useMemo)(()=>KA.getIsPropHighlightedD(z(j({},a.address),{pathToProp:(0,vQ.getPointerParts)(s).path})),[s]);return yS.default.createElement(hke,{editingTools:p,propConfig:i,pointerToProp:s,isPropHighlightedD:f},yS.default.createElement(c,{editingTools:p,propConfig:i,value:p.value}))}var yS,vQ,gQ,mke=C(()=>{yS=Z(Re()),bU(),pke(),vQ=Mt,vU(),gQ=yS.default.memo(fke)}),bS,yQ,xU,bQ=C(()=>{bS=Z(Re()),kY(),uke(),mke(),yQ=({propConfig:i,visualIndentation:s,pointerToProp:a,obj:c})=>{if(i.type==="compound")return bS.default.createElement(oQ,{obj:c,visualIndentation:s,pointerToProp:a,propConfig:i});if(i.type==="enum")return bS.default.createElement(bS.default.Fragment,null);{let p=nU[i.type];return bS.default.createElement(gQ,{SimpleEditorComponent:p,obj:c,visualIndentation:s,pointerToProp:a,propConfig:i})}},xU=yQ});function _Q(i){return ZA.has(i)||ZA.set(i,(wQ++).toString()),ZA.get(i)}var ZA,wQ,xQ=C(()=>{ZA=new WeakMap,wQ=0}),Uy,SQ,EQ,CQ,PQ,kQ,TQ,vke=C(()=>{Uy=Z(Re()),bQ(),hn(),xQ(),Ne(),EQ=se.div(SQ||(SQ=G([`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
`]))),PQ=se.button(CQ||(CQ=G([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  border-radius: 2px;

  color: #a8a8a9;
  background: rgba(255, 255, 255, 0.1);

  border: none;
  height: 28px;

  &:hover {
    background: rgba(255, 255, 255, 0.15);
  }

  &:active {
    background: rgba(255, 255, 255, 0.2);
  }
`]))),kQ=({objects:i})=>{let s=i[0],a=$n(s.template.configPointer),c=$n(s.template._temp_actionsPointer);return Uy.default.createElement(Uy.default.Fragment,null,Uy.default.createElement(xU,{key:_Q(s),obj:s,pointerToProp:s.propsP,propConfig:a,visualIndentation:1}),Uy.default.createElement(EQ,null,c&&Object.entries(c).map(([p,f])=>Uy.default.createElement(PQ,{key:p,onClick:()=>{f(s.publicApi)}},p))))},TQ=kQ}),MQ,AQ,QA,IQ=C(()=>{Ne(),AQ=se.button(MQ||(MQ=G([`
  text-align: center;
  padding: 8px;
  border-radius: 2px;
  border: 1px solid #627b7b87;
  background-color: #4b787d3d;
  color: #eaeaea;
  font-weight: 400;
  display: block;
  appearance: none;
  flex-grow: 1;
  cursor: `,`;
  opacity: `,`;

  &:hover {
    background-color: #7dc1c878;
    border-color: #9ebcbf;
  }
`])),i=>i.disabled?"none":"pointer",i=>i.disabled?.4:1),QA=AQ}),gke=C(()=>{}),RQ,yke=C(()=>{gke(),RQ=(i=21)=>{let s="",a=crypto.getRandomValues(new Uint8Array(i));for(;i--;){let c=a[i]&63;c<36?s+=c.toString(36):c<62?s+=(c-26).toString(36).toUpperCase():c<63?s+="_":s+="-"}return s}});function OQ(){return RQ(16)}var DQ=C(()=>{yke()}),LQ,Fd,SU,NQ,FQ,BQ,UQ,VQ=C(()=>{LQ=Mt,mr(),Fd=Z(Re()),SU=(0,Fd.createContext)(null),NQ=0,FQ=()=>{let i=(0,Fd.useMemo)(()=>NQ++,[]),{cur:s,set:a}=(0,Fd.useContext)(SU),[c,p]=sr(!1),f=(0,Fd.useCallback)((g,y)=>{a(g?i:-1,y)},[]);return(0,Fd.useEffect)(()=>s.onStale(()=>{let g=s.getValue()===i;c.current!==g&&(c.current=g)}),[s,i]),[p,f]},BQ=({children:i})=>{let s=(0,Fd.useMemo)(()=>new LQ.Atom(-1),[]),a=s.prism,c=(0,Fd.useMemo)(()=>{let p;return(f,g)=>{let y=p!==void 0;p!==void 0&&(clearTimeout(p),p=void 0),g===0||y?s.set(f):p=setTimeout(()=>{s.set(f),p=void 0},g)}},[]);return Fd.default.createElement(SU.Provider,{value:{cur:a,set:c}},i)},UQ=BQ});function Vy(i,s){let a=i.enabled!==!1,[c,p]=FQ(),[f,g]=sr(null);(0,zQ.useEffect)(()=>{if(!a)return;let w=f.current;if(!w)return;let S=()=>{var I;return p(!0,(I=i.enterDelay)!=null?I:400)},T=()=>{var I;return p(!1,(I=i.exitDelay)!=null?I:200)};return w.addEventListener("mouseenter",S),w.addEventListener("mouseleave",T),()=>{w.removeEventListener("mouseenter",S),w.removeEventListener("mouseleave",T)}},[f,a,i.enterDelay,i.exitDelay]);let y=(0,jQ.useContext)(xy);return[a&&c&&g?(0,HQ.createPortal)(JA.default.createElement(YB,{children:s,target:g,onClickOutside:iu,verticalPlacement:i.verticalPlacement,verticalGap:i.verticalGap}),y):JA.default.createElement(JA.default.Fragment,null),f,c]}var jQ,zQ,JA,HQ,_S=C(()=>{mr(),jQ=Z(Re()),zQ=Z(Re()),JA=Z(Re()),MX(),HQ=Z(Xl()),VQ(),rv(),Cy()}),GQ,$Q,jy,eI=C(()=>{Ne(),dc(),$Q=se(cc)(GQ||(GQ=G([`
  padding: 1em;
  max-width: 240px;
  pointer-events: none !important;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: #45464d;
`]))),jy=$Q}),fc,WQ,KQ,qQ,XQ,YQ,ZQ,QQ,JQ,eJ,bke=C(()=>{hn(),Fe(),fc=Z(Re()),Ne(),DQ(),_S(),eI(),IQ(),KQ=se.div(WQ||(WQ=G([`
  padding: 8px 10px;
  position: relative;
  background-color: #6d232352;
  &:before {
    position: absolute;
    content: ' ';
    display: block;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #ff000070;
  }
`]))),XQ=se.div(qQ||(qQ=G([`
  margin-bottom: 1em;
  & a {
    color: inherit;
  }
`]))),ZQ=se.div(YQ||(YQ=G([`
  display: flex;
  gap: 8px;
`]))),QQ=({projectId:i})=>{let s=$n(me().atomP.ephemeral.coreByProject[i].loadingState);return s&&s.type==="browserStateIsNotBasedOnDiskState"?fc.default.createElement(JQ,{loadingState:s,projectId:i}):null},JQ=({projectId:i,loadingState:s})=>{let a=()=>{me().transaction(({drafts:w,stateEditors:S})=>{S.coreByProject.historic.revisionHistory.add({projectId:i,revision:s.onDiskState.revisionHistory[0]}),S.coreByProject.historic.revisionHistory.add({projectId:i,revision:OQ()}),w.ephemeral.coreByProject[i].loadingState={type:"loaded"}})},c=()=>{me().transaction(({drafts:w})=>{w.historic.coreByProject[i]=s.onDiskState,w.ephemeral.coreByProject[i].loadingState={type:"loaded"}})},[p,f]=Vy({},()=>fc.default.createElement(jy,null,"The browser's state will override the disk state.")),[g,y]=Vy({},()=>fc.default.createElement(jy,null,"The disk's state will override the browser's state."));return fc.default.createElement(KQ,null,fc.default.createElement(XQ,null,"Browser state is not based on disk state."," ",fc.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Learn more.")),fc.default.createElement(ZQ,null,p,fc.default.createElement(QA,{onClick:a,ref:f},"Use browser's state"),g,fc.default.createElement(QA,{onClick:c,ref:y},"Use disk state")))},eJ=QQ}),_ke=K((i,s)=>{(function(a){typeof i=="object"&&typeof s<"u"?s.exports=a():(typeof window<"u"?window:typeof ki<"u"?ki:typeof self<"u"?self:this).JSZip=a()})(function(){return function a(c,p,f){function g(S,T){if(!p[S]){if(!c[S]){var I=typeof cD=="function"&&cD;if(!T&&I)return I(S,!0);if(y)return y(S,!0);var A=new Error("Cannot find module '"+S+"'");throw A.code="MODULE_NOT_FOUND",A}var k=p[S]={exports:{}};c[S][0].call(k.exports,function(D){var O=c[S][1][D];return g(O||D)},k,k.exports,a,c,p,f)}return p[S].exports}for(var y=typeof cD=="function"&&cD,w=0;w<f.length;w++)g(f[w]);return g}({1:[function(a,c,p){var f=a("./utils"),g=a("./support"),y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";p.encode=function(w){for(var S,T,I,A,k,D,O,F=[],V=0,$=w.length,X=$,re=f.getTypeOf(w)!=="string";V<w.length;)X=$-V,I=re?(S=w[V++],T=V<$?w[V++]:0,V<$?w[V++]:0):(S=w.charCodeAt(V++),T=V<$?w.charCodeAt(V++):0,V<$?w.charCodeAt(V++):0),A=S>>2,k=(3&S)<<4|T>>4,D=1<X?(15&T)<<2|I>>6:64,O=2<X?63&I:64,F.push(y.charAt(A)+y.charAt(k)+y.charAt(D)+y.charAt(O));return F.join("")},p.decode=function(w){var S,T,I,A,k,D,O=0,F=0,V="data:";if(w.substr(0,V.length)===V)throw new Error("Invalid base64 input, it looks like a data url.");var $,X=3*(w=w.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(w.charAt(w.length-1)===y.charAt(64)&&X--,w.charAt(w.length-2)===y.charAt(64)&&X--,X%1!=0)throw new Error("Invalid base64 input, bad content length.");for($=g.uint8array?new Uint8Array(0|X):new Array(0|X);O<w.length;)S=y.indexOf(w.charAt(O++))<<2|(A=y.indexOf(w.charAt(O++)))>>4,T=(15&A)<<4|(k=y.indexOf(w.charAt(O++)))>>2,I=(3&k)<<6|(D=y.indexOf(w.charAt(O++))),$[F++]=S,k!==64&&($[F++]=T),D!==64&&($[F++]=I);return $}},{"./support":30,"./utils":32}],2:[function(a,c,p){var f=a("./external"),g=a("./stream/DataWorker"),y=a("./stream/Crc32Probe"),w=a("./stream/DataLengthProbe");function S(T,I,A,k,D){this.compressedSize=T,this.uncompressedSize=I,this.crc32=A,this.compression=k,this.compressedContent=D}S.prototype={getContentWorker:function(){var T=new g(f.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new w("data_length")),I=this;return T.on("end",function(){if(this.streamInfo.data_length!==I.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),T},getCompressedWorker:function(){return new g(f.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},S.createWorkerFrom=function(T,I,A){return T.pipe(new y).pipe(new w("uncompressedSize")).pipe(I.compressWorker(A)).pipe(new w("compressedSize")).withStreamInfo("compression",I)},c.exports=S},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,c,p){var f=a("./stream/GenericWorker");p.STORE={magic:"\0\0",compressWorker:function(){return new f("STORE compression")},uncompressWorker:function(){return new f("STORE decompression")}},p.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,c,p){var f=a("./utils"),g=function(){for(var y,w=[],S=0;S<256;S++){y=S;for(var T=0;T<8;T++)y=1&y?3988292384^y>>>1:y>>>1;w[S]=y}return w}();c.exports=function(y,w){return y!==void 0&&y.length?f.getTypeOf(y)!=="string"?function(S,T,I,A){var k=g,D=A+I;S^=-1;for(var O=A;O<D;O++)S=S>>>8^k[255&(S^T[O])];return-1^S}(0|w,y,y.length,0):function(S,T,I,A){var k=g,D=A+I;S^=-1;for(var O=A;O<D;O++)S=S>>>8^k[255&(S^T.charCodeAt(O))];return-1^S}(0|w,y,y.length,0):0}},{"./utils":32}],5:[function(a,c,p){p.base64=!1,p.binary=!1,p.dir=!1,p.createFolders=!0,p.date=null,p.compression=null,p.compressionOptions=null,p.comment=null,p.unixPermissions=null,p.dosPermissions=null},{}],6:[function(a,c,p){var f=null;f=typeof Promise<"u"?Promise:a("lie"),c.exports={Promise:f}},{lie:37}],7:[function(a,c,p){var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",g=a("pako"),y=a("./utils"),w=a("./stream/GenericWorker"),S=f?"uint8array":"array";function T(I,A){w.call(this,"FlateWorker/"+I),this._pako=null,this._pakoAction=I,this._pakoOptions=A,this.meta={}}p.magic="\b\0",y.inherits(T,w),T.prototype.processChunk=function(I){this.meta=I.meta,this._pako===null&&this._createPako(),this._pako.push(y.transformTo(S,I.data),!1)},T.prototype.flush=function(){w.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},T.prototype.cleanUp=function(){w.prototype.cleanUp.call(this),this._pako=null},T.prototype._createPako=function(){this._pako=new g[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var I=this;this._pako.onData=function(A){I.push({data:A,meta:I.meta})}},p.compressWorker=function(I){return new T("Deflate",I)},p.uncompressWorker=function(){return new T("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,c,p){function f(k,D){var O,F="";for(O=0;O<D;O++)F+=String.fromCharCode(255&k),k>>>=8;return F}function g(k,D,O,F,V,$){var X,re,ne=k.file,ae=k.compression,Se=$!==S.utf8encode,fe=y.transformTo("string",$(ne.name)),ge=y.transformTo("string",S.utf8encode(ne.name)),Ie=ne.comment,Qe=y.transformTo("string",$(Ie)),le=y.transformTo("string",S.utf8encode(Ie)),Ae=ge.length!==ne.name.length,Y=le.length!==Ie.length,Ue="",Tt="",ke="",Te=ne.dir,je=ne.date,wt={crc32:0,compressedSize:0,uncompressedSize:0};D&&!O||(wt.crc32=k.crc32,wt.compressedSize=k.compressedSize,wt.uncompressedSize=k.uncompressedSize);var ue=0;D&&(ue|=8),Se||!Ae&&!Y||(ue|=2048);var he=0,qe=0;Te&&(he|=16),V==="UNIX"?(qe=798,he|=function(ot,ze){var Zt=ot;return ot||(Zt=ze?16893:33204),(65535&Zt)<<16}(ne.unixPermissions,Te)):(qe=20,he|=function(ot){return 63&(ot||0)}(ne.dosPermissions)),X=je.getUTCHours(),X<<=6,X|=je.getUTCMinutes(),X<<=5,X|=je.getUTCSeconds()/2,re=je.getUTCFullYear()-1980,re<<=4,re|=je.getUTCMonth()+1,re<<=5,re|=je.getUTCDate(),Ae&&(Tt=f(1,1)+f(T(fe),4)+ge,Ue+="up"+f(Tt.length,2)+Tt),Y&&(ke=f(1,1)+f(T(Qe),4)+le,Ue+="uc"+f(ke.length,2)+ke);var Ze="";return Ze+=`
\0`,Ze+=f(ue,2),Ze+=ae.magic,Ze+=f(X,2),Ze+=f(re,2),Ze+=f(wt.crc32,4),Ze+=f(wt.compressedSize,4),Ze+=f(wt.uncompressedSize,4),Ze+=f(fe.length,2),Ze+=f(Ue.length,2),{fileRecord:I.LOCAL_FILE_HEADER+Ze+fe+Ue,dirRecord:I.CENTRAL_FILE_HEADER+f(qe,2)+Ze+f(Qe.length,2)+"\0\0\0\0"+f(he,4)+f(F,4)+fe+Ue+Qe}}var y=a("../utils"),w=a("../stream/GenericWorker"),S=a("../utf8"),T=a("../crc32"),I=a("../signature");function A(k,D,O,F){w.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=D,this.zipPlatform=O,this.encodeFileName=F,this.streamFiles=k,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}y.inherits(A,w),A.prototype.push=function(k){var D=k.meta.percent||0,O=this.entriesCount,F=this._sources.length;this.accumulate?this.contentBuffer.push(k):(this.bytesWritten+=k.data.length,w.prototype.push.call(this,{data:k.data,meta:{currentFile:this.currentFile,percent:O?(D+100*(O-F-1))/O:100}}))},A.prototype.openedSource=function(k){this.currentSourceOffset=this.bytesWritten,this.currentFile=k.file.name;var D=this.streamFiles&&!k.file.dir;if(D){var O=g(k,D,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:O.fileRecord,meta:{percent:0}})}else this.accumulate=!0},A.prototype.closedSource=function(k){this.accumulate=!1;var D=this.streamFiles&&!k.file.dir,O=g(k,D,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(O.dirRecord),D)this.push({data:function(F){return I.DATA_DESCRIPTOR+f(F.crc32,4)+f(F.compressedSize,4)+f(F.uncompressedSize,4)}(k),meta:{percent:100}});else for(this.push({data:O.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},A.prototype.flush=function(){for(var k=this.bytesWritten,D=0;D<this.dirRecords.length;D++)this.push({data:this.dirRecords[D],meta:{percent:100}});var O=this.bytesWritten-k,F=function(V,$,X,re,ne){var ae=y.transformTo("string",ne(re));return I.CENTRAL_DIRECTORY_END+"\0\0\0\0"+f(V,2)+f(V,2)+f($,4)+f(X,4)+f(ae.length,2)+ae}(this.dirRecords.length,O,k,this.zipComment,this.encodeFileName);this.push({data:F,meta:{percent:100}})},A.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},A.prototype.registerPrevious=function(k){this._sources.push(k);var D=this;return k.on("data",function(O){D.processChunk(O)}),k.on("end",function(){D.closedSource(D.previous.streamInfo),D._sources.length?D.prepareNextSource():D.end()}),k.on("error",function(O){D.error(O)}),this},A.prototype.resume=function(){return!!w.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},A.prototype.error=function(k){var D=this._sources;if(!w.prototype.error.call(this,k))return!1;for(var O=0;O<D.length;O++)try{D[O].error(k)}catch{}return!0},A.prototype.lock=function(){w.prototype.lock.call(this);for(var k=this._sources,D=0;D<k.length;D++)k[D].lock()},c.exports=A},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,c,p){var f=a("../compressions"),g=a("./ZipFileWorker");p.generateWorker=function(y,w,S){var T=new g(w.streamFiles,S,w.platform,w.encodeFileName),I=0;try{y.forEach(function(A,k){I++;var D=function($,X){var re=$||X,ne=f[re];if(!ne)throw new Error(re+" is not a valid compression method !");return ne}(k.options.compression,w.compression),O=k.options.compressionOptions||w.compressionOptions||{},F=k.dir,V=k.date;k._compressWorker(D,O).withStreamInfo("file",{name:A,dir:F,date:V,comment:k.comment||"",unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions}).pipe(T)}),T.entriesCount=I}catch(A){T.error(A)}return T}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,c,p){function f(){if(!(this instanceof f))return new f;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var g=new f;for(var y in this)typeof this[y]!="function"&&(g[y]=this[y]);return g}}(f.prototype=a("./object")).loadAsync=a("./load"),f.support=a("./support"),f.defaults=a("./defaults"),f.version="3.10.1",f.loadAsync=function(g,y){return new f().loadAsync(g,y)},f.external=a("./external"),c.exports=f},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,c,p){var f=a("./utils"),g=a("./external"),y=a("./utf8"),w=a("./zipEntries"),S=a("./stream/Crc32Probe"),T=a("./nodejsUtils");function I(A){return new g.Promise(function(k,D){var O=A.decompressed.getContentWorker().pipe(new S);O.on("error",function(F){D(F)}).on("end",function(){O.streamInfo.crc32!==A.decompressed.crc32?D(new Error("Corrupted zip : CRC32 mismatch")):k()}).resume()})}c.exports=function(A,k){var D=this;return k=f.extend(k||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:y.utf8decode}),T.isNode&&T.isStream(A)?g.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):f.prepareContent("the loaded zip file",A,!0,k.optimizedBinaryString,k.base64).then(function(O){var F=new w(k);return F.load(O),F}).then(function(O){var F=[g.Promise.resolve(O)],V=O.files;if(k.checkCRC32)for(var $=0;$<V.length;$++)F.push(I(V[$]));return g.Promise.all(F)}).then(function(O){for(var F=O.shift(),V=F.files,$=0;$<V.length;$++){var X=V[$],re=X.fileNameStr,ne=f.resolve(X.fileNameStr);D.file(ne,X.decompressed,{binary:!0,optimizedBinaryString:!0,date:X.date,dir:X.dir,comment:X.fileCommentStr.length?X.fileCommentStr:null,unixPermissions:X.unixPermissions,dosPermissions:X.dosPermissions,createFolders:k.createFolders}),X.dir||(D.file(ne).unsafeOriginalName=re)}return F.zipComment.length&&(D.comment=F.zipComment),D})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,c,p){var f=a("../utils"),g=a("../stream/GenericWorker");function y(w,S){g.call(this,"Nodejs stream input adapter for "+w),this._upstreamEnded=!1,this._bindStream(S)}f.inherits(y,g),y.prototype._bindStream=function(w){var S=this;(this._stream=w).pause(),w.on("data",function(T){S.push({data:T,meta:{percent:0}})}).on("error",function(T){S.isPaused?this.generatedError=T:S.error(T)}).on("end",function(){S.isPaused?S._upstreamEnded=!0:S.end()})},y.prototype.pause=function(){return!!g.prototype.pause.call(this)&&(this._stream.pause(),!0)},y.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},c.exports=y},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,c,p){var f=a("readable-stream").Readable;function g(y,w,S){f.call(this,w),this._helper=y;var T=this;y.on("data",function(I,A){T.push(I)||T._helper.pause(),S&&S(A)}).on("error",function(I){T.emit("error",I)}).on("end",function(){T.push(null)})}a("../utils").inherits(g,f),g.prototype._read=function(){this._helper.resume()},c.exports=g},{"../utils":32,"readable-stream":16}],14:[function(a,c,p){c.exports={isNode:typeof Buffer<"u",newBufferFrom:function(f,g){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(f,g);if(typeof f=="number")throw new Error('The "data" argument must not be a number');return new Buffer(f,g)},allocBuffer:function(f){if(Buffer.alloc)return Buffer.alloc(f);var g=new Buffer(f);return g.fill(0),g},isBuffer:function(f){return Buffer.isBuffer(f)},isStream:function(f){return f&&typeof f.on=="function"&&typeof f.pause=="function"&&typeof f.resume=="function"}}},{}],15:[function(a,c,p){function f(ne,ae,Se){var fe,ge=y.getTypeOf(ae),Ie=y.extend(Se||{},T);Ie.date=Ie.date||new Date,Ie.compression!==null&&(Ie.compression=Ie.compression.toUpperCase()),typeof Ie.unixPermissions=="string"&&(Ie.unixPermissions=parseInt(Ie.unixPermissions,8)),Ie.unixPermissions&&16384&Ie.unixPermissions&&(Ie.dir=!0),Ie.dosPermissions&&16&Ie.dosPermissions&&(Ie.dir=!0),Ie.dir&&(ne=V(ne)),Ie.createFolders&&(fe=F(ne))&&$.call(this,fe,!0);var Qe=ge==="string"&&Ie.binary===!1&&Ie.base64===!1;Se&&Se.binary!==void 0||(Ie.binary=!Qe),(ae instanceof I&&ae.uncompressedSize===0||Ie.dir||!ae||ae.length===0)&&(Ie.base64=!1,Ie.binary=!0,ae="",Ie.compression="STORE",ge="string");var le=null;le=ae instanceof I||ae instanceof w?ae:D.isNode&&D.isStream(ae)?new O(ne,ae):y.prepareContent(ne,ae,Ie.binary,Ie.optimizedBinaryString,Ie.base64);var Ae=new A(ne,le,Ie);this.files[ne]=Ae}var g=a("./utf8"),y=a("./utils"),w=a("./stream/GenericWorker"),S=a("./stream/StreamHelper"),T=a("./defaults"),I=a("./compressedObject"),A=a("./zipObject"),k=a("./generate"),D=a("./nodejsUtils"),O=a("./nodejs/NodejsStreamInputAdapter"),F=function(ne){ne.slice(-1)==="/"&&(ne=ne.substring(0,ne.length-1));var ae=ne.lastIndexOf("/");return 0<ae?ne.substring(0,ae):""},V=function(ne){return ne.slice(-1)!=="/"&&(ne+="/"),ne},$=function(ne,ae){return ae=ae!==void 0?ae:T.createFolders,ne=V(ne),this.files[ne]||f.call(this,ne,null,{dir:!0,createFolders:ae}),this.files[ne]};function X(ne){return Object.prototype.toString.call(ne)==="[object RegExp]"}var re={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(ne){var ae,Se,fe;for(ae in this.files)fe=this.files[ae],(Se=ae.slice(this.root.length,ae.length))&&ae.slice(0,this.root.length)===this.root&&ne(Se,fe)},filter:function(ne){var ae=[];return this.forEach(function(Se,fe){ne(Se,fe)&&ae.push(fe)}),ae},file:function(ne,ae,Se){if(arguments.length!==1)return ne=this.root+ne,f.call(this,ne,ae,Se),this;if(X(ne)){var fe=ne;return this.filter(function(Ie,Qe){return!Qe.dir&&fe.test(Ie)})}var ge=this.files[this.root+ne];return ge&&!ge.dir?ge:null},folder:function(ne){if(!ne)return this;if(X(ne))return this.filter(function(ge,Ie){return Ie.dir&&ne.test(ge)});var ae=this.root+ne,Se=$.call(this,ae),fe=this.clone();return fe.root=Se.name,fe},remove:function(ne){ne=this.root+ne;var ae=this.files[ne];if(ae||(ne.slice(-1)!=="/"&&(ne+="/"),ae=this.files[ne]),ae&&!ae.dir)delete this.files[ne];else for(var Se=this.filter(function(ge,Ie){return Ie.name.slice(0,ne.length)===ne}),fe=0;fe<Se.length;fe++)delete this.files[Se[fe].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(ne){var ae,Se={};try{if((Se=y.extend(ne||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:g.utf8encode})).type=Se.type.toLowerCase(),Se.compression=Se.compression.toUpperCase(),Se.type==="binarystring"&&(Se.type="string"),!Se.type)throw new Error("No output type specified.");y.checkSupport(Se.type),Se.platform!=="darwin"&&Se.platform!=="freebsd"&&Se.platform!=="linux"&&Se.platform!=="sunos"||(Se.platform="UNIX"),Se.platform==="win32"&&(Se.platform="DOS");var fe=Se.comment||this.comment||"";ae=k.generateWorker(this,Se,fe)}catch(ge){(ae=new w("error")).error(ge)}return new S(ae,Se.type||"string",Se.mimeType)},generateAsync:function(ne,ae){return this.generateInternalStream(ne).accumulate(ae)},generateNodeStream:function(ne,ae){return(ne=ne||{}).type||(ne.type="nodebuffer"),this.generateInternalStream(ne).toNodejsStream(ae)}};c.exports=re},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,c,p){c.exports=a("stream")},{stream:void 0}],17:[function(a,c,p){var f=a("./DataReader");function g(y){f.call(this,y);for(var w=0;w<this.data.length;w++)y[w]=255&y[w]}a("../utils").inherits(g,f),g.prototype.byteAt=function(y){return this.data[this.zero+y]},g.prototype.lastIndexOfSignature=function(y){for(var w=y.charCodeAt(0),S=y.charCodeAt(1),T=y.charCodeAt(2),I=y.charCodeAt(3),A=this.length-4;0<=A;--A)if(this.data[A]===w&&this.data[A+1]===S&&this.data[A+2]===T&&this.data[A+3]===I)return A-this.zero;return-1},g.prototype.readAndCheckSignature=function(y){var w=y.charCodeAt(0),S=y.charCodeAt(1),T=y.charCodeAt(2),I=y.charCodeAt(3),A=this.readData(4);return w===A[0]&&S===A[1]&&T===A[2]&&I===A[3]},g.prototype.readData=function(y){if(this.checkOffset(y),y===0)return[];var w=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,w},c.exports=g},{"../utils":32,"./DataReader":18}],18:[function(a,c,p){var f=a("../utils");function g(y){this.data=y,this.length=y.length,this.index=0,this.zero=0}g.prototype={checkOffset:function(y){this.checkIndex(this.index+y)},checkIndex:function(y){if(this.length<this.zero+y||y<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+y+"). Corrupted zip ?")},setIndex:function(y){this.checkIndex(y),this.index=y},skip:function(y){this.setIndex(this.index+y)},byteAt:function(){},readInt:function(y){var w,S=0;for(this.checkOffset(y),w=this.index+y-1;w>=this.index;w--)S=(S<<8)+this.byteAt(w);return this.index+=y,S},readString:function(y){return f.transformTo("string",this.readData(y))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var y=this.readInt(4);return new Date(Date.UTC(1980+(y>>25&127),(y>>21&15)-1,y>>16&31,y>>11&31,y>>5&63,(31&y)<<1))}},c.exports=g},{"../utils":32}],19:[function(a,c,p){var f=a("./Uint8ArrayReader");function g(y){f.call(this,y)}a("../utils").inherits(g,f),g.prototype.readData=function(y){this.checkOffset(y);var w=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,w},c.exports=g},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,c,p){var f=a("./DataReader");function g(y){f.call(this,y)}a("../utils").inherits(g,f),g.prototype.byteAt=function(y){return this.data.charCodeAt(this.zero+y)},g.prototype.lastIndexOfSignature=function(y){return this.data.lastIndexOf(y)-this.zero},g.prototype.readAndCheckSignature=function(y){return y===this.readData(4)},g.prototype.readData=function(y){this.checkOffset(y);var w=this.data.slice(this.zero+this.index,this.zero+this.index+y);return this.index+=y,w},c.exports=g},{"../utils":32,"./DataReader":18}],21:[function(a,c,p){var f=a("./ArrayReader");function g(y){f.call(this,y)}a("../utils").inherits(g,f),g.prototype.readData=function(y){if(this.checkOffset(y),y===0)return new Uint8Array(0);var w=this.data.subarray(this.zero+this.index,this.zero+this.index+y);return this.index+=y,w},c.exports=g},{"../utils":32,"./ArrayReader":17}],22:[function(a,c,p){var f=a("../utils"),g=a("../support"),y=a("./ArrayReader"),w=a("./StringReader"),S=a("./NodeBufferReader"),T=a("./Uint8ArrayReader");c.exports=function(I){var A=f.getTypeOf(I);return f.checkSupport(A),A!=="string"||g.uint8array?A==="nodebuffer"?new S(I):g.uint8array?new T(f.transformTo("uint8array",I)):new y(f.transformTo("array",I)):new w(I)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,c,p){p.LOCAL_FILE_HEADER="PK",p.CENTRAL_FILE_HEADER="PK",p.CENTRAL_DIRECTORY_END="PK",p.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",p.ZIP64_CENTRAL_DIRECTORY_END="PK",p.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,c,p){var f=a("./GenericWorker"),g=a("../utils");function y(w){f.call(this,"ConvertWorker to "+w),this.destType=w}g.inherits(y,f),y.prototype.processChunk=function(w){this.push({data:g.transformTo(this.destType,w.data),meta:w.meta})},c.exports=y},{"../utils":32,"./GenericWorker":28}],25:[function(a,c,p){var f=a("./GenericWorker"),g=a("../crc32");function y(){f.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(y,f),y.prototype.processChunk=function(w){this.streamInfo.crc32=g(w.data,this.streamInfo.crc32||0),this.push(w)},c.exports=y},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,c,p){var f=a("../utils"),g=a("./GenericWorker");function y(w){g.call(this,"DataLengthProbe for "+w),this.propName=w,this.withStreamInfo(w,0)}f.inherits(y,g),y.prototype.processChunk=function(w){if(w){var S=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=S+w.data.length}g.prototype.processChunk.call(this,w)},c.exports=y},{"../utils":32,"./GenericWorker":28}],27:[function(a,c,p){var f=a("../utils"),g=a("./GenericWorker");function y(w){g.call(this,"DataWorker");var S=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,w.then(function(T){S.dataIsReady=!0,S.data=T,S.max=T&&T.length||0,S.type=f.getTypeOf(T),S.isPaused||S._tickAndRepeat()},function(T){S.error(T)})}f.inherits(y,g),y.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this.data=null},y.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,f.delay(this._tickAndRepeat,[],this)),!0)},y.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(f.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},y.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var w=null,S=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":w=this.data.substring(this.index,S);break;case"uint8array":w=this.data.subarray(this.index,S);break;case"array":case"nodebuffer":w=this.data.slice(this.index,S)}return this.index=S,this.push({data:w,meta:{percent:this.max?this.index/this.max*100:0}})},c.exports=y},{"../utils":32,"./GenericWorker":28}],28:[function(a,c,p){function f(g){this.name=g||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}f.prototype={push:function(g){this.emit("data",g)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(g){this.emit("error",g)}return!0},error:function(g){return!this.isFinished&&(this.isPaused?this.generatedError=g:(this.isFinished=!0,this.emit("error",g),this.previous&&this.previous.error(g),this.cleanUp()),!0)},on:function(g,y){return this._listeners[g].push(y),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(g,y){if(this._listeners[g])for(var w=0;w<this._listeners[g].length;w++)this._listeners[g][w].call(this,y)},pipe:function(g){return g.registerPrevious(this)},registerPrevious:function(g){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=g.streamInfo,this.mergeStreamInfo(),this.previous=g;var y=this;return g.on("data",function(w){y.processChunk(w)}),g.on("end",function(){y.end()}),g.on("error",function(w){y.error(w)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var g=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),g=!0),this.previous&&this.previous.resume(),!g},flush:function(){},processChunk:function(g){this.push(g)},withStreamInfo:function(g,y){return this.extraStreamInfo[g]=y,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var g in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,g)&&(this.streamInfo[g]=this.extraStreamInfo[g])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var g="Worker "+this.name;return this.previous?this.previous+" -> "+g:g}},c.exports=f},{}],29:[function(a,c,p){var f=a("../utils"),g=a("./ConvertWorker"),y=a("./GenericWorker"),w=a("../base64"),S=a("../support"),T=a("../external"),I=null;if(S.nodestream)try{I=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function A(D,O){return new T.Promise(function(F,V){var $=[],X=D._internalType,re=D._outputType,ne=D._mimeType;D.on("data",function(ae,Se){$.push(ae),O&&O(Se)}).on("error",function(ae){$=[],V(ae)}).on("end",function(){try{var ae=function(Se,fe,ge){switch(Se){case"blob":return f.newBlob(f.transformTo("arraybuffer",fe),ge);case"base64":return w.encode(fe);default:return f.transformTo(Se,fe)}}(re,function(Se,fe){var ge,Ie=0,Qe=null,le=0;for(ge=0;ge<fe.length;ge++)le+=fe[ge].length;switch(Se){case"string":return fe.join("");case"array":return Array.prototype.concat.apply([],fe);case"uint8array":for(Qe=new Uint8Array(le),ge=0;ge<fe.length;ge++)Qe.set(fe[ge],Ie),Ie+=fe[ge].length;return Qe;case"nodebuffer":return Buffer.concat(fe);default:throw new Error("concat : unsupported type '"+Se+"'")}}(X,$),ne);F(ae)}catch(Se){V(Se)}$=[]}).resume()})}function k(D,O,F){var V=O;switch(O){case"blob":case"arraybuffer":V="uint8array";break;case"base64":V="string"}try{this._internalType=V,this._outputType=O,this._mimeType=F,f.checkSupport(V),this._worker=D.pipe(new g(V)),D.lock()}catch($){this._worker=new y("error"),this._worker.error($)}}k.prototype={accumulate:function(D){return A(this,D)},on:function(D,O){var F=this;return D==="data"?this._worker.on(D,function(V){O.call(F,V.data,V.meta)}):this._worker.on(D,function(){f.delay(O,arguments,F)}),this},resume:function(){return f.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(D){if(f.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new I(this,{objectMode:this._outputType!=="nodebuffer"},D)}},c.exports=k},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,c,p){if(p.base64=!0,p.array=!0,p.string=!0,p.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",p.nodebuffer=typeof Buffer<"u",p.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")p.blob=!1;else{var f=new ArrayBuffer(0);try{p.blob=new Blob([f],{type:"application/zip"}).size===0}catch{try{var g=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);g.append(f),p.blob=g.getBlob("application/zip").size===0}catch{p.blob=!1}}}try{p.nodestream=!!a("readable-stream").Readable}catch{p.nodestream=!1}},{"readable-stream":16}],31:[function(a,c,p){for(var f=a("./utils"),g=a("./support"),y=a("./nodejsUtils"),w=a("./stream/GenericWorker"),S=new Array(256),T=0;T<256;T++)S[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;S[254]=S[254]=1;function I(){w.call(this,"utf-8 decode"),this.leftOver=null}function A(){w.call(this,"utf-8 encode")}p.utf8encode=function(k){return g.nodebuffer?y.newBufferFrom(k,"utf-8"):function(D){var O,F,V,$,X,re=D.length,ne=0;for($=0;$<re;$++)(64512&(F=D.charCodeAt($)))==55296&&$+1<re&&(64512&(V=D.charCodeAt($+1)))==56320&&(F=65536+(F-55296<<10)+(V-56320),$++),ne+=F<128?1:F<2048?2:F<65536?3:4;for(O=g.uint8array?new Uint8Array(ne):new Array(ne),$=X=0;X<ne;$++)(64512&(F=D.charCodeAt($)))==55296&&$+1<re&&(64512&(V=D.charCodeAt($+1)))==56320&&(F=65536+(F-55296<<10)+(V-56320),$++),F<128?O[X++]=F:(F<2048?O[X++]=192|F>>>6:(F<65536?O[X++]=224|F>>>12:(O[X++]=240|F>>>18,O[X++]=128|F>>>12&63),O[X++]=128|F>>>6&63),O[X++]=128|63&F);return O}(k)},p.utf8decode=function(k){return g.nodebuffer?f.transformTo("nodebuffer",k).toString("utf-8"):function(D){var O,F,V,$,X=D.length,re=new Array(2*X);for(O=F=0;O<X;)if((V=D[O++])<128)re[F++]=V;else if(4<($=S[V]))re[F++]=65533,O+=$-1;else{for(V&=$===2?31:$===3?15:7;1<$&&O<X;)V=V<<6|63&D[O++],$--;1<$?re[F++]=65533:V<65536?re[F++]=V:(V-=65536,re[F++]=55296|V>>10&1023,re[F++]=56320|1023&V)}return re.length!==F&&(re.subarray?re=re.subarray(0,F):re.length=F),f.applyFromCharCode(re)}(k=f.transformTo(g.uint8array?"uint8array":"array",k))},f.inherits(I,w),I.prototype.processChunk=function(k){var D=f.transformTo(g.uint8array?"uint8array":"array",k.data);if(this.leftOver&&this.leftOver.length){if(g.uint8array){var O=D;(D=new Uint8Array(O.length+this.leftOver.length)).set(this.leftOver,0),D.set(O,this.leftOver.length)}else D=this.leftOver.concat(D);this.leftOver=null}var F=function($,X){var re;for((X=X||$.length)>$.length&&(X=$.length),re=X-1;0<=re&&(192&$[re])==128;)re--;return re<0||re===0?X:re+S[$[re]]>X?re:X}(D),V=D;F!==D.length&&(g.uint8array?(V=D.subarray(0,F),this.leftOver=D.subarray(F,D.length)):(V=D.slice(0,F),this.leftOver=D.slice(F,D.length))),this.push({data:p.utf8decode(V),meta:k.meta})},I.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:p.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},p.Utf8DecodeWorker=I,f.inherits(A,w),A.prototype.processChunk=function(k){this.push({data:p.utf8encode(k.data),meta:k.meta})},p.Utf8EncodeWorker=A},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,c,p){var f=a("./support"),g=a("./base64"),y=a("./nodejsUtils"),w=a("./external");function S(O){return O}function T(O,F){for(var V=0;V<O.length;++V)F[V]=255&O.charCodeAt(V);return F}a("setimmediate"),p.newBlob=function(O,F){p.checkSupport("blob");try{return new Blob([O],{type:F})}catch{try{var V=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return V.append(O),V.getBlob(F)}catch{throw new Error("Bug : can't construct the Blob.")}}};var I={stringifyByChunk:function(O,F,V){var $=[],X=0,re=O.length;if(re<=V)return String.fromCharCode.apply(null,O);for(;X<re;)F==="array"||F==="nodebuffer"?$.push(String.fromCharCode.apply(null,O.slice(X,Math.min(X+V,re)))):$.push(String.fromCharCode.apply(null,O.subarray(X,Math.min(X+V,re)))),X+=V;return $.join("")},stringifyByChar:function(O){for(var F="",V=0;V<O.length;V++)F+=String.fromCharCode(O[V]);return F},applyCanBeUsed:{uint8array:function(){try{return f.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return f.nodebuffer&&String.fromCharCode.apply(null,y.allocBuffer(1)).length===1}catch{return!1}}()}};function A(O){var F=65536,V=p.getTypeOf(O),$=!0;if(V==="uint8array"?$=I.applyCanBeUsed.uint8array:V==="nodebuffer"&&($=I.applyCanBeUsed.nodebuffer),$)for(;1<F;)try{return I.stringifyByChunk(O,V,F)}catch{F=Math.floor(F/2)}return I.stringifyByChar(O)}function k(O,F){for(var V=0;V<O.length;V++)F[V]=O[V];return F}p.applyFromCharCode=A;var D={};D.string={string:S,array:function(O){return T(O,new Array(O.length))},arraybuffer:function(O){return D.string.uint8array(O).buffer},uint8array:function(O){return T(O,new Uint8Array(O.length))},nodebuffer:function(O){return T(O,y.allocBuffer(O.length))}},D.array={string:A,array:S,arraybuffer:function(O){return new Uint8Array(O).buffer},uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return y.newBufferFrom(O)}},D.arraybuffer={string:function(O){return A(new Uint8Array(O))},array:function(O){return k(new Uint8Array(O),new Array(O.byteLength))},arraybuffer:S,uint8array:function(O){return new Uint8Array(O)},nodebuffer:function(O){return y.newBufferFrom(new Uint8Array(O))}},D.uint8array={string:A,array:function(O){return k(O,new Array(O.length))},arraybuffer:function(O){return O.buffer},uint8array:S,nodebuffer:function(O){return y.newBufferFrom(O)}},D.nodebuffer={string:A,array:function(O){return k(O,new Array(O.length))},arraybuffer:function(O){return D.nodebuffer.uint8array(O).buffer},uint8array:function(O){return k(O,new Uint8Array(O.length))},nodebuffer:S},p.transformTo=function(O,F){if(F=F||"",!O)return F;p.checkSupport(O);var V=p.getTypeOf(F);return D[V][O](F)},p.resolve=function(O){for(var F=O.split("/"),V=[],$=0;$<F.length;$++){var X=F[$];X==="."||X===""&&$!==0&&$!==F.length-1||(X===".."?V.pop():V.push(X))}return V.join("/")},p.getTypeOf=function(O){return typeof O=="string"?"string":Object.prototype.toString.call(O)==="[object Array]"?"array":f.nodebuffer&&y.isBuffer(O)?"nodebuffer":f.uint8array&&O instanceof Uint8Array?"uint8array":f.arraybuffer&&O instanceof ArrayBuffer?"arraybuffer":void 0},p.checkSupport=function(O){if(!f[O.toLowerCase()])throw new Error(O+" is not supported by this platform")},p.MAX_VALUE_16BITS=65535,p.MAX_VALUE_32BITS=-1,p.pretty=function(O){var F,V,$="";for(V=0;V<(O||"").length;V++)$+="\\x"+((F=O.charCodeAt(V))<16?"0":"")+F.toString(16).toUpperCase();return $},p.delay=function(O,F,V){setImmediate(function(){O.apply(V||null,F||[])})},p.inherits=function(O,F){function V(){}V.prototype=F.prototype,O.prototype=new V},p.extend=function(){var O,F,V={};for(O=0;O<arguments.length;O++)for(F in arguments[O])Object.prototype.hasOwnProperty.call(arguments[O],F)&&V[F]===void 0&&(V[F]=arguments[O][F]);return V},p.prepareContent=function(O,F,V,$,X){return w.Promise.resolve(F).then(function(re){return f.blob&&(re instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(re))!==-1)&&typeof FileReader<"u"?new w.Promise(function(ne,ae){var Se=new FileReader;Se.onload=function(fe){ne(fe.target.result)},Se.onerror=function(fe){ae(fe.target.error)},Se.readAsArrayBuffer(re)}):re}).then(function(re){var ne=p.getTypeOf(re);return ne?(ne==="arraybuffer"?re=p.transformTo("uint8array",re):ne==="string"&&(X?re=g.decode(re):V&&$!==!0&&(re=function(ae){return T(ae,f.uint8array?new Uint8Array(ae.length):new Array(ae.length))}(re))),re):w.Promise.reject(new Error("Can't read the data of '"+O+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,c,p){var f=a("./reader/readerFor"),g=a("./utils"),y=a("./signature"),w=a("./zipEntry"),S=a("./support");function T(I){this.files=[],this.loadOptions=I}T.prototype={checkSignature:function(I){if(!this.reader.readAndCheckSignature(I)){this.reader.index-=4;var A=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+g.pretty(A)+", expected "+g.pretty(I)+")")}},isSignature:function(I,A){var k=this.reader.index;this.reader.setIndex(I);var D=this.reader.readString(4)===A;return this.reader.setIndex(k),D},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var I=this.reader.readData(this.zipCommentLength),A=S.uint8array?"uint8array":"array",k=g.transformTo(A,I);this.zipComment=this.loadOptions.decodeFileName(k)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var I,A,k,D=this.zip64EndOfCentralSize-44;0<D;)I=this.reader.readInt(2),A=this.reader.readInt(4),k=this.reader.readData(A),this.zip64ExtensibleData[I]={id:I,length:A,value:k}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var I,A;for(I=0;I<this.files.length;I++)A=this.files[I],this.reader.setIndex(A.localHeaderOffset),this.checkSignature(y.LOCAL_FILE_HEADER),A.readLocalPart(this.reader),A.handleUTF8(),A.processAttributes()},readCentralDir:function(){var I;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(y.CENTRAL_FILE_HEADER);)(I=new w({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(I);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var I=this.reader.lastIndexOfSignature(y.CENTRAL_DIRECTORY_END);if(I<0)throw this.isSignature(0,y.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(I);var A=I;if(this.checkSignature(y.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===g.MAX_VALUE_16BITS||this.diskWithCentralDirStart===g.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===g.MAX_VALUE_16BITS||this.centralDirRecords===g.MAX_VALUE_16BITS||this.centralDirSize===g.MAX_VALUE_32BITS||this.centralDirOffset===g.MAX_VALUE_32BITS){if(this.zip64=!0,(I=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(I),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,y.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(y.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var k=this.centralDirOffset+this.centralDirSize;this.zip64&&(k+=20,k+=12+this.zip64EndOfCentralSize);var D=A-k;if(0<D)this.isSignature(A,y.CENTRAL_FILE_HEADER)||(this.reader.zero=D);else if(D<0)throw new Error("Corrupted zip: missing "+Math.abs(D)+" bytes.")},prepareReader:function(I){this.reader=f(I)},load:function(I){this.prepareReader(I),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},c.exports=T},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,c,p){var f=a("./reader/readerFor"),g=a("./utils"),y=a("./compressedObject"),w=a("./crc32"),S=a("./utf8"),T=a("./compressions"),I=a("./support");function A(k,D){this.options=k,this.loadOptions=D}A.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(k){var D,O;if(k.skip(22),this.fileNameLength=k.readInt(2),O=k.readInt(2),this.fileName=k.readData(this.fileNameLength),k.skip(O),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((D=function(F){for(var V in T)if(Object.prototype.hasOwnProperty.call(T,V)&&T[V].magic===F)return T[V];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+g.pretty(this.compressionMethod)+" unknown (inner file : "+g.transformTo("string",this.fileName)+")");this.decompressed=new y(this.compressedSize,this.uncompressedSize,this.crc32,D,k.readData(this.compressedSize))},readCentralPart:function(k){this.versionMadeBy=k.readInt(2),k.skip(2),this.bitFlag=k.readInt(2),this.compressionMethod=k.readString(2),this.date=k.readDate(),this.crc32=k.readInt(4),this.compressedSize=k.readInt(4),this.uncompressedSize=k.readInt(4);var D=k.readInt(2);if(this.extraFieldsLength=k.readInt(2),this.fileCommentLength=k.readInt(2),this.diskNumberStart=k.readInt(2),this.internalFileAttributes=k.readInt(2),this.externalFileAttributes=k.readInt(4),this.localHeaderOffset=k.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");k.skip(D),this.readExtraFields(k),this.parseZIP64ExtraField(k),this.fileComment=k.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var k=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),k==0&&(this.dosPermissions=63&this.externalFileAttributes),k==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var k=f(this.extraFields[1].value);this.uncompressedSize===g.MAX_VALUE_32BITS&&(this.uncompressedSize=k.readInt(8)),this.compressedSize===g.MAX_VALUE_32BITS&&(this.compressedSize=k.readInt(8)),this.localHeaderOffset===g.MAX_VALUE_32BITS&&(this.localHeaderOffset=k.readInt(8)),this.diskNumberStart===g.MAX_VALUE_32BITS&&(this.diskNumberStart=k.readInt(4))}},readExtraFields:function(k){var D,O,F,V=k.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});k.index+4<V;)D=k.readInt(2),O=k.readInt(2),F=k.readData(O),this.extraFields[D]={id:D,length:O,value:F};k.setIndex(V)},handleUTF8:function(){var k=I.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=S.utf8decode(this.fileName),this.fileCommentStr=S.utf8decode(this.fileComment);else{var D=this.findExtraFieldUnicodePath();if(D!==null)this.fileNameStr=D;else{var O=g.transformTo(k,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(O)}var F=this.findExtraFieldUnicodeComment();if(F!==null)this.fileCommentStr=F;else{var V=g.transformTo(k,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(V)}}},findExtraFieldUnicodePath:function(){var k=this.extraFields[28789];if(k){var D=f(k.value);return D.readInt(1)!==1||w(this.fileName)!==D.readInt(4)?null:S.utf8decode(D.readData(k.length-5))}return null},findExtraFieldUnicodeComment:function(){var k=this.extraFields[25461];if(k){var D=f(k.value);return D.readInt(1)!==1||w(this.fileComment)!==D.readInt(4)?null:S.utf8decode(D.readData(k.length-5))}return null}},c.exports=A},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,c,p){function f(D,O,F){this.name=D,this.dir=F.dir,this.date=F.date,this.comment=F.comment,this.unixPermissions=F.unixPermissions,this.dosPermissions=F.dosPermissions,this._data=O,this._dataBinary=F.binary,this.options={compression:F.compression,compressionOptions:F.compressionOptions}}var g=a("./stream/StreamHelper"),y=a("./stream/DataWorker"),w=a("./utf8"),S=a("./compressedObject"),T=a("./stream/GenericWorker");f.prototype={internalStream:function(D){var O=null,F="string";try{if(!D)throw new Error("No output type specified.");var V=(F=D.toLowerCase())==="string"||F==="text";F!=="binarystring"&&F!=="text"||(F="string"),O=this._decompressWorker();var $=!this._dataBinary;$&&!V&&(O=O.pipe(new w.Utf8EncodeWorker)),!$&&V&&(O=O.pipe(new w.Utf8DecodeWorker))}catch(X){(O=new T("error")).error(X)}return new g(O,F,"")},async:function(D,O){return this.internalStream(D).accumulate(O)},nodeStream:function(D,O){return this.internalStream(D||"nodebuffer").toNodejsStream(O)},_compressWorker:function(D,O){if(this._data instanceof S&&this._data.compression.magic===D.magic)return this._data.getCompressedWorker();var F=this._decompressWorker();return this._dataBinary||(F=F.pipe(new w.Utf8EncodeWorker)),S.createWorkerFrom(F,D,O)},_decompressWorker:function(){return this._data instanceof S?this._data.getContentWorker():this._data instanceof T?this._data:new y(this._data)}};for(var I=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],A=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},k=0;k<I.length;k++)f.prototype[I[k]]=A;c.exports=f},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,c,p){(function(f){var g,y,w=f.MutationObserver||f.WebKitMutationObserver;if(w){var S=0,T=new w(D),I=f.document.createTextNode("");T.observe(I,{characterData:!0}),g=function(){I.data=S=++S%2}}else if(f.setImmediate||f.MessageChannel===void 0)g="document"in f&&"onreadystatechange"in f.document.createElement("script")?function(){var O=f.document.createElement("script");O.onreadystatechange=function(){D(),O.onreadystatechange=null,O.parentNode.removeChild(O),O=null},f.document.documentElement.appendChild(O)}:function(){setTimeout(D,0)};else{var A=new f.MessageChannel;A.port1.onmessage=D,g=function(){A.port2.postMessage(0)}}var k=[];function D(){var O,F;y=!0;for(var V=k.length;V;){for(F=k,k=[],O=-1;++O<V;)F[O]();V=k.length}y=!1}c.exports=function(O){k.push(O)!==1||y||g()}}).call(this,typeof ki<"u"?ki:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,c,p){var f=a("immediate");function g(){}var y={},w=["REJECTED"],S=["FULFILLED"],T=["PENDING"];function I(V){if(typeof V!="function")throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,V!==g&&O(this,V)}function A(V,$,X){this.promise=V,typeof $=="function"&&(this.onFulfilled=$,this.callFulfilled=this.otherCallFulfilled),typeof X=="function"&&(this.onRejected=X,this.callRejected=this.otherCallRejected)}function k(V,$,X){f(function(){var re;try{re=$(X)}catch(ne){return y.reject(V,ne)}re===V?y.reject(V,new TypeError("Cannot resolve promise with itself")):y.resolve(V,re)})}function D(V){var $=V&&V.then;if(V&&(typeof V=="object"||typeof V=="function")&&typeof $=="function")return function(){$.apply(V,arguments)}}function O(V,$){var X=!1;function re(Se){X||(X=!0,y.reject(V,Se))}function ne(Se){X||(X=!0,y.resolve(V,Se))}var ae=F(function(){$(ne,re)});ae.status==="error"&&re(ae.value)}function F(V,$){var X={};try{X.value=V($),X.status="success"}catch(re){X.status="error",X.value=re}return X}(c.exports=I).prototype.finally=function(V){if(typeof V!="function")return this;var $=this.constructor;return this.then(function(X){return $.resolve(V()).then(function(){return X})},function(X){return $.resolve(V()).then(function(){throw X})})},I.prototype.catch=function(V){return this.then(null,V)},I.prototype.then=function(V,$){if(typeof V!="function"&&this.state===S||typeof $!="function"&&this.state===w)return this;var X=new this.constructor(g);return this.state!==T?k(X,this.state===S?V:$,this.outcome):this.queue.push(new A(X,V,$)),X},A.prototype.callFulfilled=function(V){y.resolve(this.promise,V)},A.prototype.otherCallFulfilled=function(V){k(this.promise,this.onFulfilled,V)},A.prototype.callRejected=function(V){y.reject(this.promise,V)},A.prototype.otherCallRejected=function(V){k(this.promise,this.onRejected,V)},y.resolve=function(V,$){var X=F(D,$);if(X.status==="error")return y.reject(V,X.value);var re=X.value;if(re)O(V,re);else{V.state=S,V.outcome=$;for(var ne=-1,ae=V.queue.length;++ne<ae;)V.queue[ne].callFulfilled($)}return V},y.reject=function(V,$){V.state=w,V.outcome=$;for(var X=-1,re=V.queue.length;++X<re;)V.queue[X].callRejected($);return V},I.resolve=function(V){return V instanceof this?V:y.resolve(new this(g),V)},I.reject=function(V){var $=new this(g);return y.reject($,V)},I.all=function(V){var $=this;if(Object.prototype.toString.call(V)!=="[object Array]")return this.reject(new TypeError("must be an array"));var X=V.length,re=!1;if(!X)return this.resolve([]);for(var ne=new Array(X),ae=0,Se=-1,fe=new this(g);++Se<X;)ge(V[Se],Se);return fe;function ge(Ie,Qe){$.resolve(Ie).then(function(le){ne[Qe]=le,++ae!==X||re||(re=!0,y.resolve(fe,ne))},function(le){re||(re=!0,y.reject(fe,le))})}},I.race=function(V){var $=this;if(Object.prototype.toString.call(V)!=="[object Array]")return this.reject(new TypeError("must be an array"));var X=V.length,re=!1;if(!X)return this.resolve([]);for(var ne=-1,ae=new this(g);++ne<X;)Se=V[ne],$.resolve(Se).then(function(fe){re||(re=!0,y.resolve(ae,fe))},function(fe){re||(re=!0,y.reject(ae,fe))});var Se;return ae}},{immediate:36}],38:[function(a,c,p){var f={};(0,a("./lib/utils/common").assign)(f,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),c.exports=f},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,c,p){var f=a("./zlib/deflate"),g=a("./utils/common"),y=a("./utils/strings"),w=a("./zlib/messages"),S=a("./zlib/zstream"),T=Object.prototype.toString,I=0,A=-1,k=0,D=8;function O(V){if(!(this instanceof O))return new O(V);this.options=g.assign({level:A,method:D,chunkSize:16384,windowBits:15,memLevel:8,strategy:k,to:""},V||{});var $=this.options;$.raw&&0<$.windowBits?$.windowBits=-$.windowBits:$.gzip&&0<$.windowBits&&$.windowBits<16&&($.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new S,this.strm.avail_out=0;var X=f.deflateInit2(this.strm,$.level,$.method,$.windowBits,$.memLevel,$.strategy);if(X!==I)throw new Error(w[X]);if($.header&&f.deflateSetHeader(this.strm,$.header),$.dictionary){var re;if(re=typeof $.dictionary=="string"?y.string2buf($.dictionary):T.call($.dictionary)==="[object ArrayBuffer]"?new Uint8Array($.dictionary):$.dictionary,(X=f.deflateSetDictionary(this.strm,re))!==I)throw new Error(w[X]);this._dict_set=!0}}function F(V,$){var X=new O($);if(X.push(V,!0),X.err)throw X.msg||w[X.err];return X.result}O.prototype.push=function(V,$){var X,re,ne=this.strm,ae=this.options.chunkSize;if(this.ended)return!1;re=$===~~$?$:$===!0?4:0,typeof V=="string"?ne.input=y.string2buf(V):T.call(V)==="[object ArrayBuffer]"?ne.input=new Uint8Array(V):ne.input=V,ne.next_in=0,ne.avail_in=ne.input.length;do{if(ne.avail_out===0&&(ne.output=new g.Buf8(ae),ne.next_out=0,ne.avail_out=ae),(X=f.deflate(ne,re))!==1&&X!==I)return this.onEnd(X),!(this.ended=!0);ne.avail_out!==0&&(ne.avail_in!==0||re!==4&&re!==2)||(this.options.to==="string"?this.onData(y.buf2binstring(g.shrinkBuf(ne.output,ne.next_out))):this.onData(g.shrinkBuf(ne.output,ne.next_out)))}while((0<ne.avail_in||ne.avail_out===0)&&X!==1);return re===4?(X=f.deflateEnd(this.strm),this.onEnd(X),this.ended=!0,X===I):re!==2||(this.onEnd(I),!(ne.avail_out=0))},O.prototype.onData=function(V){this.chunks.push(V)},O.prototype.onEnd=function(V){V===I&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=V,this.msg=this.strm.msg},p.Deflate=O,p.deflate=F,p.deflateRaw=function(V,$){return($=$||{}).raw=!0,F(V,$)},p.gzip=function(V,$){return($=$||{}).gzip=!0,F(V,$)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,c,p){var f=a("./zlib/inflate"),g=a("./utils/common"),y=a("./utils/strings"),w=a("./zlib/constants"),S=a("./zlib/messages"),T=a("./zlib/zstream"),I=a("./zlib/gzheader"),A=Object.prototype.toString;function k(O){if(!(this instanceof k))return new k(O);this.options=g.assign({chunkSize:16384,windowBits:0,to:""},O||{});var F=this.options;F.raw&&0<=F.windowBits&&F.windowBits<16&&(F.windowBits=-F.windowBits,F.windowBits===0&&(F.windowBits=-15)),!(0<=F.windowBits&&F.windowBits<16)||O&&O.windowBits||(F.windowBits+=32),15<F.windowBits&&F.windowBits<48&&!(15&F.windowBits)&&(F.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new T,this.strm.avail_out=0;var V=f.inflateInit2(this.strm,F.windowBits);if(V!==w.Z_OK)throw new Error(S[V]);this.header=new I,f.inflateGetHeader(this.strm,this.header)}function D(O,F){var V=new k(F);if(V.push(O,!0),V.err)throw V.msg||S[V.err];return V.result}k.prototype.push=function(O,F){var V,$,X,re,ne,ae,Se=this.strm,fe=this.options.chunkSize,ge=this.options.dictionary,Ie=!1;if(this.ended)return!1;$=F===~~F?F:F===!0?w.Z_FINISH:w.Z_NO_FLUSH,typeof O=="string"?Se.input=y.binstring2buf(O):A.call(O)==="[object ArrayBuffer]"?Se.input=new Uint8Array(O):Se.input=O,Se.next_in=0,Se.avail_in=Se.input.length;do{if(Se.avail_out===0&&(Se.output=new g.Buf8(fe),Se.next_out=0,Se.avail_out=fe),(V=f.inflate(Se,w.Z_NO_FLUSH))===w.Z_NEED_DICT&&ge&&(ae=typeof ge=="string"?y.string2buf(ge):A.call(ge)==="[object ArrayBuffer]"?new Uint8Array(ge):ge,V=f.inflateSetDictionary(this.strm,ae)),V===w.Z_BUF_ERROR&&Ie===!0&&(V=w.Z_OK,Ie=!1),V!==w.Z_STREAM_END&&V!==w.Z_OK)return this.onEnd(V),!(this.ended=!0);Se.next_out&&(Se.avail_out!==0&&V!==w.Z_STREAM_END&&(Se.avail_in!==0||$!==w.Z_FINISH&&$!==w.Z_SYNC_FLUSH)||(this.options.to==="string"?(X=y.utf8border(Se.output,Se.next_out),re=Se.next_out-X,ne=y.buf2string(Se.output,X),Se.next_out=re,Se.avail_out=fe-re,re&&g.arraySet(Se.output,Se.output,X,re,0),this.onData(ne)):this.onData(g.shrinkBuf(Se.output,Se.next_out)))),Se.avail_in===0&&Se.avail_out===0&&(Ie=!0)}while((0<Se.avail_in||Se.avail_out===0)&&V!==w.Z_STREAM_END);return V===w.Z_STREAM_END&&($=w.Z_FINISH),$===w.Z_FINISH?(V=f.inflateEnd(this.strm),this.onEnd(V),this.ended=!0,V===w.Z_OK):$!==w.Z_SYNC_FLUSH||(this.onEnd(w.Z_OK),!(Se.avail_out=0))},k.prototype.onData=function(O){this.chunks.push(O)},k.prototype.onEnd=function(O){O===w.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=g.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},p.Inflate=k,p.inflate=D,p.inflateRaw=function(O,F){return(F=F||{}).raw=!0,D(O,F)},p.ungzip=D},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,c,p){var f=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";p.assign=function(w){for(var S=Array.prototype.slice.call(arguments,1);S.length;){var T=S.shift();if(T){if(typeof T!="object")throw new TypeError(T+"must be non-object");for(var I in T)T.hasOwnProperty(I)&&(w[I]=T[I])}}return w},p.shrinkBuf=function(w,S){return w.length===S?w:w.subarray?w.subarray(0,S):(w.length=S,w)};var g={arraySet:function(w,S,T,I,A){if(S.subarray&&w.subarray)w.set(S.subarray(T,T+I),A);else for(var k=0;k<I;k++)w[A+k]=S[T+k]},flattenChunks:function(w){var S,T,I,A,k,D;for(S=I=0,T=w.length;S<T;S++)I+=w[S].length;for(D=new Uint8Array(I),S=A=0,T=w.length;S<T;S++)k=w[S],D.set(k,A),A+=k.length;return D}},y={arraySet:function(w,S,T,I,A){for(var k=0;k<I;k++)w[A+k]=S[T+k]},flattenChunks:function(w){return[].concat.apply([],w)}};p.setTyped=function(w){w?(p.Buf8=Uint8Array,p.Buf16=Uint16Array,p.Buf32=Int32Array,p.assign(p,g)):(p.Buf8=Array,p.Buf16=Array,p.Buf32=Array,p.assign(p,y))},p.setTyped(f)},{}],42:[function(a,c,p){var f=a("./common"),g=!0,y=!0;try{String.fromCharCode.apply(null,[0])}catch{g=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{y=!1}for(var w=new f.Buf8(256),S=0;S<256;S++)w[S]=252<=S?6:248<=S?5:240<=S?4:224<=S?3:192<=S?2:1;function T(I,A){if(A<65537&&(I.subarray&&y||!I.subarray&&g))return String.fromCharCode.apply(null,f.shrinkBuf(I,A));for(var k="",D=0;D<A;D++)k+=String.fromCharCode(I[D]);return k}w[254]=w[254]=1,p.string2buf=function(I){var A,k,D,O,F,V=I.length,$=0;for(O=0;O<V;O++)(64512&(k=I.charCodeAt(O)))==55296&&O+1<V&&(64512&(D=I.charCodeAt(O+1)))==56320&&(k=65536+(k-55296<<10)+(D-56320),O++),$+=k<128?1:k<2048?2:k<65536?3:4;for(A=new f.Buf8($),O=F=0;F<$;O++)(64512&(k=I.charCodeAt(O)))==55296&&O+1<V&&(64512&(D=I.charCodeAt(O+1)))==56320&&(k=65536+(k-55296<<10)+(D-56320),O++),k<128?A[F++]=k:(k<2048?A[F++]=192|k>>>6:(k<65536?A[F++]=224|k>>>12:(A[F++]=240|k>>>18,A[F++]=128|k>>>12&63),A[F++]=128|k>>>6&63),A[F++]=128|63&k);return A},p.buf2binstring=function(I){return T(I,I.length)},p.binstring2buf=function(I){for(var A=new f.Buf8(I.length),k=0,D=A.length;k<D;k++)A[k]=I.charCodeAt(k);return A},p.buf2string=function(I,A){var k,D,O,F,V=A||I.length,$=new Array(2*V);for(k=D=0;k<V;)if((O=I[k++])<128)$[D++]=O;else if(4<(F=w[O]))$[D++]=65533,k+=F-1;else{for(O&=F===2?31:F===3?15:7;1<F&&k<V;)O=O<<6|63&I[k++],F--;1<F?$[D++]=65533:O<65536?$[D++]=O:(O-=65536,$[D++]=55296|O>>10&1023,$[D++]=56320|1023&O)}return T($,D)},p.utf8border=function(I,A){var k;for((A=A||I.length)>I.length&&(A=I.length),k=A-1;0<=k&&(192&I[k])==128;)k--;return k<0||k===0?A:k+w[I[k]]>A?k:A}},{"./common":41}],43:[function(a,c,p){c.exports=function(f,g,y,w){for(var S=65535&f|0,T=f>>>16&65535|0,I=0;y!==0;){for(y-=I=2e3<y?2e3:y;T=T+(S=S+g[w++]|0)|0,--I;);S%=65521,T%=65521}return S|T<<16|0}},{}],44:[function(a,c,p){c.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,c,p){var f=function(){for(var g,y=[],w=0;w<256;w++){g=w;for(var S=0;S<8;S++)g=1&g?3988292384^g>>>1:g>>>1;y[w]=g}return y}();c.exports=function(g,y,w,S){var T=f,I=S+w;g^=-1;for(var A=S;A<I;A++)g=g>>>8^T[255&(g^y[A])];return-1^g}},{}],46:[function(a,c,p){var f,g=a("../utils/common"),y=a("./trees"),w=a("./adler32"),S=a("./crc32"),T=a("./messages"),I=0,A=4,k=0,D=-2,O=-1,F=4,V=2,$=8,X=9,re=286,ne=30,ae=19,Se=2*re+1,fe=15,ge=3,Ie=258,Qe=Ie+ge+1,le=42,Ae=113,Y=1,Ue=2,Tt=3,ke=4;function Te(J,at){return J.msg=T[at],at}function je(J){return(J<<1)-(4<J?9:0)}function wt(J){for(var at=J.length;0<=--at;)J[at]=0}function ue(J){var at=J.state,st=at.pending;st>J.avail_out&&(st=J.avail_out),st!==0&&(g.arraySet(J.output,at.pending_buf,at.pending_out,st,J.next_out),J.next_out+=st,at.pending_out+=st,J.total_out+=st,J.avail_out-=st,at.pending-=st,at.pending===0&&(at.pending_out=0))}function he(J,at){y._tr_flush_block(J,0<=J.block_start?J.block_start:-1,J.strstart-J.block_start,at),J.block_start=J.strstart,ue(J.strm)}function qe(J,at){J.pending_buf[J.pending++]=at}function Ze(J,at){J.pending_buf[J.pending++]=at>>>8&255,J.pending_buf[J.pending++]=255&at}function ot(J,at){var st,xe,_e=J.max_chain_length,He=J.strstart,xt=J.prev_length,Ct=J.nice_match,Xe=J.strstart>J.w_size-Qe?J.strstart-(J.w_size-Qe):0,At=J.window,Et=J.w_mask,Pt=J.prev,_n=J.strstart+Ie,gr=At[He+xt-1],Hn=At[He+xt];J.prev_length>=J.good_match&&(_e>>=2),Ct>J.lookahead&&(Ct=J.lookahead);do if(At[(st=at)+xt]===Hn&&At[st+xt-1]===gr&&At[st]===At[He]&&At[++st]===At[He+1]){He+=2,st++;do;while(At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&At[++He]===At[++st]&&He<_n);if(xe=Ie-(_n-He),He=_n-Ie,xt<xe){if(J.match_start=at,Ct<=(xt=xe))break;gr=At[He+xt-1],Hn=At[He+xt]}}while((at=Pt[at&Et])>Xe&&--_e!=0);return xt<=J.lookahead?xt:J.lookahead}function ze(J){var at,st,xe,_e,He,xt,Ct,Xe,At,Et,Pt=J.w_size;do{if(_e=J.window_size-J.lookahead-J.strstart,J.strstart>=Pt+(Pt-Qe)){for(g.arraySet(J.window,J.window,Pt,Pt,0),J.match_start-=Pt,J.strstart-=Pt,J.block_start-=Pt,at=st=J.hash_size;xe=J.head[--at],J.head[at]=Pt<=xe?xe-Pt:0,--st;);for(at=st=Pt;xe=J.prev[--at],J.prev[at]=Pt<=xe?xe-Pt:0,--st;);_e+=Pt}if(J.strm.avail_in===0)break;if(xt=J.strm,Ct=J.window,Xe=J.strstart+J.lookahead,At=_e,Et=void 0,Et=xt.avail_in,At<Et&&(Et=At),st=Et===0?0:(xt.avail_in-=Et,g.arraySet(Ct,xt.input,xt.next_in,Et,Xe),xt.state.wrap===1?xt.adler=w(xt.adler,Ct,Et,Xe):xt.state.wrap===2&&(xt.adler=S(xt.adler,Ct,Et,Xe)),xt.next_in+=Et,xt.total_in+=Et,Et),J.lookahead+=st,J.lookahead+J.insert>=ge)for(He=J.strstart-J.insert,J.ins_h=J.window[He],J.ins_h=(J.ins_h<<J.hash_shift^J.window[He+1])&J.hash_mask;J.insert&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[He+ge-1])&J.hash_mask,J.prev[He&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=He,He++,J.insert--,!(J.lookahead+J.insert<ge)););}while(J.lookahead<Qe&&J.strm.avail_in!==0)}function Zt(J,at){for(var st,xe;;){if(J.lookahead<Qe){if(ze(J),J.lookahead<Qe&&at===I)return Y;if(J.lookahead===0)break}if(st=0,J.lookahead>=ge&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+ge-1])&J.hash_mask,st=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),st!==0&&J.strstart-st<=J.w_size-Qe&&(J.match_length=ot(J,st)),J.match_length>=ge)if(xe=y._tr_tally(J,J.strstart-J.match_start,J.match_length-ge),J.lookahead-=J.match_length,J.match_length<=J.max_lazy_match&&J.lookahead>=ge){for(J.match_length--;J.strstart++,J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+ge-1])&J.hash_mask,st=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart,--J.match_length!=0;);J.strstart++}else J.strstart+=J.match_length,J.match_length=0,J.ins_h=J.window[J.strstart],J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+1])&J.hash_mask;else xe=y._tr_tally(J,0,J.window[J.strstart]),J.lookahead--,J.strstart++;if(xe&&(he(J,!1),J.strm.avail_out===0))return Y}return J.insert=J.strstart<ge-1?J.strstart:ge-1,at===A?(he(J,!0),J.strm.avail_out===0?Tt:ke):J.last_lit&&(he(J,!1),J.strm.avail_out===0)?Y:Ue}function bt(J,at){for(var st,xe,_e;;){if(J.lookahead<Qe){if(ze(J),J.lookahead<Qe&&at===I)return Y;if(J.lookahead===0)break}if(st=0,J.lookahead>=ge&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+ge-1])&J.hash_mask,st=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),J.prev_length=J.match_length,J.prev_match=J.match_start,J.match_length=ge-1,st!==0&&J.prev_length<J.max_lazy_match&&J.strstart-st<=J.w_size-Qe&&(J.match_length=ot(J,st),J.match_length<=5&&(J.strategy===1||J.match_length===ge&&4096<J.strstart-J.match_start)&&(J.match_length=ge-1)),J.prev_length>=ge&&J.match_length<=J.prev_length){for(_e=J.strstart+J.lookahead-ge,xe=y._tr_tally(J,J.strstart-1-J.prev_match,J.prev_length-ge),J.lookahead-=J.prev_length-1,J.prev_length-=2;++J.strstart<=_e&&(J.ins_h=(J.ins_h<<J.hash_shift^J.window[J.strstart+ge-1])&J.hash_mask,st=J.prev[J.strstart&J.w_mask]=J.head[J.ins_h],J.head[J.ins_h]=J.strstart),--J.prev_length!=0;);if(J.match_available=0,J.match_length=ge-1,J.strstart++,xe&&(he(J,!1),J.strm.avail_out===0))return Y}else if(J.match_available){if((xe=y._tr_tally(J,0,J.window[J.strstart-1]))&&he(J,!1),J.strstart++,J.lookahead--,J.strm.avail_out===0)return Y}else J.match_available=1,J.strstart++,J.lookahead--}return J.match_available&&(xe=y._tr_tally(J,0,J.window[J.strstart-1]),J.match_available=0),J.insert=J.strstart<ge-1?J.strstart:ge-1,at===A?(he(J,!0),J.strm.avail_out===0?Tt:ke):J.last_lit&&(he(J,!1),J.strm.avail_out===0)?Y:Ue}function Kt(J,at,st,xe,_e){this.good_length=J,this.max_lazy=at,this.nice_length=st,this.max_chain=xe,this.func=_e}function cn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=$,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new g.Buf16(2*Se),this.dyn_dtree=new g.Buf16(2*(2*ne+1)),this.bl_tree=new g.Buf16(2*(2*ae+1)),wt(this.dyn_ltree),wt(this.dyn_dtree),wt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new g.Buf16(fe+1),this.heap=new g.Buf16(2*re+1),wt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new g.Buf16(2*re+1),wt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function In(J){var at;return J&&J.state?(J.total_in=J.total_out=0,J.data_type=V,(at=J.state).pending=0,at.pending_out=0,at.wrap<0&&(at.wrap=-at.wrap),at.status=at.wrap?le:Ae,J.adler=at.wrap===2?0:1,at.last_flush=I,y._tr_init(at),k):Te(J,D)}function Cn(J){var at=In(J);return at===k&&function(st){st.window_size=2*st.w_size,wt(st.head),st.max_lazy_match=f[st.level].max_lazy,st.good_match=f[st.level].good_length,st.nice_match=f[st.level].nice_length,st.max_chain_length=f[st.level].max_chain,st.strstart=0,st.block_start=0,st.lookahead=0,st.insert=0,st.match_length=st.prev_length=ge-1,st.match_available=0,st.ins_h=0}(J.state),at}function Er(J,at,st,xe,_e,He){if(!J)return D;var xt=1;if(at===O&&(at=6),xe<0?(xt=0,xe=-xe):15<xe&&(xt=2,xe-=16),_e<1||X<_e||st!==$||xe<8||15<xe||at<0||9<at||He<0||F<He)return Te(J,D);xe===8&&(xe=9);var Ct=new cn;return(J.state=Ct).strm=J,Ct.wrap=xt,Ct.gzhead=null,Ct.w_bits=xe,Ct.w_size=1<<Ct.w_bits,Ct.w_mask=Ct.w_size-1,Ct.hash_bits=_e+7,Ct.hash_size=1<<Ct.hash_bits,Ct.hash_mask=Ct.hash_size-1,Ct.hash_shift=~~((Ct.hash_bits+ge-1)/ge),Ct.window=new g.Buf8(2*Ct.w_size),Ct.head=new g.Buf16(Ct.hash_size),Ct.prev=new g.Buf16(Ct.w_size),Ct.lit_bufsize=1<<_e+6,Ct.pending_buf_size=4*Ct.lit_bufsize,Ct.pending_buf=new g.Buf8(Ct.pending_buf_size),Ct.d_buf=1*Ct.lit_bufsize,Ct.l_buf=3*Ct.lit_bufsize,Ct.level=at,Ct.strategy=He,Ct.method=st,Cn(J)}f=[new Kt(0,0,0,0,function(J,at){var st=65535;for(st>J.pending_buf_size-5&&(st=J.pending_buf_size-5);;){if(J.lookahead<=1){if(ze(J),J.lookahead===0&&at===I)return Y;if(J.lookahead===0)break}J.strstart+=J.lookahead,J.lookahead=0;var xe=J.block_start+st;if((J.strstart===0||J.strstart>=xe)&&(J.lookahead=J.strstart-xe,J.strstart=xe,he(J,!1),J.strm.avail_out===0)||J.strstart-J.block_start>=J.w_size-Qe&&(he(J,!1),J.strm.avail_out===0))return Y}return J.insert=0,at===A?(he(J,!0),J.strm.avail_out===0?Tt:ke):(J.strstart>J.block_start&&(he(J,!1),J.strm.avail_out),Y)}),new Kt(4,4,8,4,Zt),new Kt(4,5,16,8,Zt),new Kt(4,6,32,32,Zt),new Kt(4,4,16,16,bt),new Kt(8,16,32,32,bt),new Kt(8,16,128,128,bt),new Kt(8,32,128,256,bt),new Kt(32,128,258,1024,bt),new Kt(32,258,258,4096,bt)],p.deflateInit=function(J,at){return Er(J,at,$,15,8,0)},p.deflateInit2=Er,p.deflateReset=Cn,p.deflateResetKeep=In,p.deflateSetHeader=function(J,at){return J&&J.state?J.state.wrap!==2?D:(J.state.gzhead=at,k):D},p.deflate=function(J,at){var st,xe,_e,He;if(!J||!J.state||5<at||at<0)return J?Te(J,D):D;if(xe=J.state,!J.output||!J.input&&J.avail_in!==0||xe.status===666&&at!==A)return Te(J,J.avail_out===0?-5:D);if(xe.strm=J,st=xe.last_flush,xe.last_flush=at,xe.status===le)if(xe.wrap===2)J.adler=0,qe(xe,31),qe(xe,139),qe(xe,8),xe.gzhead?(qe(xe,(xe.gzhead.text?1:0)+(xe.gzhead.hcrc?2:0)+(xe.gzhead.extra?4:0)+(xe.gzhead.name?8:0)+(xe.gzhead.comment?16:0)),qe(xe,255&xe.gzhead.time),qe(xe,xe.gzhead.time>>8&255),qe(xe,xe.gzhead.time>>16&255),qe(xe,xe.gzhead.time>>24&255),qe(xe,xe.level===9?2:2<=xe.strategy||xe.level<2?4:0),qe(xe,255&xe.gzhead.os),xe.gzhead.extra&&xe.gzhead.extra.length&&(qe(xe,255&xe.gzhead.extra.length),qe(xe,xe.gzhead.extra.length>>8&255)),xe.gzhead.hcrc&&(J.adler=S(J.adler,xe.pending_buf,xe.pending,0)),xe.gzindex=0,xe.status=69):(qe(xe,0),qe(xe,0),qe(xe,0),qe(xe,0),qe(xe,0),qe(xe,xe.level===9?2:2<=xe.strategy||xe.level<2?4:0),qe(xe,3),xe.status=Ae);else{var xt=$+(xe.w_bits-8<<4)<<8;xt|=(2<=xe.strategy||xe.level<2?0:xe.level<6?1:xe.level===6?2:3)<<6,xe.strstart!==0&&(xt|=32),xt+=31-xt%31,xe.status=Ae,Ze(xe,xt),xe.strstart!==0&&(Ze(xe,J.adler>>>16),Ze(xe,65535&J.adler)),J.adler=1}if(xe.status===69)if(xe.gzhead.extra){for(_e=xe.pending;xe.gzindex<(65535&xe.gzhead.extra.length)&&(xe.pending!==xe.pending_buf_size||(xe.gzhead.hcrc&&xe.pending>_e&&(J.adler=S(J.adler,xe.pending_buf,xe.pending-_e,_e)),ue(J),_e=xe.pending,xe.pending!==xe.pending_buf_size));)qe(xe,255&xe.gzhead.extra[xe.gzindex]),xe.gzindex++;xe.gzhead.hcrc&&xe.pending>_e&&(J.adler=S(J.adler,xe.pending_buf,xe.pending-_e,_e)),xe.gzindex===xe.gzhead.extra.length&&(xe.gzindex=0,xe.status=73)}else xe.status=73;if(xe.status===73)if(xe.gzhead.name){_e=xe.pending;do{if(xe.pending===xe.pending_buf_size&&(xe.gzhead.hcrc&&xe.pending>_e&&(J.adler=S(J.adler,xe.pending_buf,xe.pending-_e,_e)),ue(J),_e=xe.pending,xe.pending===xe.pending_buf_size)){He=1;break}He=xe.gzindex<xe.gzhead.name.length?255&xe.gzhead.name.charCodeAt(xe.gzindex++):0,qe(xe,He)}while(He!==0);xe.gzhead.hcrc&&xe.pending>_e&&(J.adler=S(J.adler,xe.pending_buf,xe.pending-_e,_e)),He===0&&(xe.gzindex=0,xe.status=91)}else xe.status=91;if(xe.status===91)if(xe.gzhead.comment){_e=xe.pending;do{if(xe.pending===xe.pending_buf_size&&(xe.gzhead.hcrc&&xe.pending>_e&&(J.adler=S(J.adler,xe.pending_buf,xe.pending-_e,_e)),ue(J),_e=xe.pending,xe.pending===xe.pending_buf_size)){He=1;break}He=xe.gzindex<xe.gzhead.comment.length?255&xe.gzhead.comment.charCodeAt(xe.gzindex++):0,qe(xe,He)}while(He!==0);xe.gzhead.hcrc&&xe.pending>_e&&(J.adler=S(J.adler,xe.pending_buf,xe.pending-_e,_e)),He===0&&(xe.status=103)}else xe.status=103;if(xe.status===103&&(xe.gzhead.hcrc?(xe.pending+2>xe.pending_buf_size&&ue(J),xe.pending+2<=xe.pending_buf_size&&(qe(xe,255&J.adler),qe(xe,J.adler>>8&255),J.adler=0,xe.status=Ae)):xe.status=Ae),xe.pending!==0){if(ue(J),J.avail_out===0)return xe.last_flush=-1,k}else if(J.avail_in===0&&je(at)<=je(st)&&at!==A)return Te(J,-5);if(xe.status===666&&J.avail_in!==0)return Te(J,-5);if(J.avail_in!==0||xe.lookahead!==0||at!==I&&xe.status!==666){var Ct=xe.strategy===2?function(Xe,At){for(var Et;;){if(Xe.lookahead===0&&(ze(Xe),Xe.lookahead===0)){if(At===I)return Y;break}if(Xe.match_length=0,Et=y._tr_tally(Xe,0,Xe.window[Xe.strstart]),Xe.lookahead--,Xe.strstart++,Et&&(he(Xe,!1),Xe.strm.avail_out===0))return Y}return Xe.insert=0,At===A?(he(Xe,!0),Xe.strm.avail_out===0?Tt:ke):Xe.last_lit&&(he(Xe,!1),Xe.strm.avail_out===0)?Y:Ue}(xe,at):xe.strategy===3?function(Xe,At){for(var Et,Pt,_n,gr,Hn=Xe.window;;){if(Xe.lookahead<=Ie){if(ze(Xe),Xe.lookahead<=Ie&&At===I)return Y;if(Xe.lookahead===0)break}if(Xe.match_length=0,Xe.lookahead>=ge&&0<Xe.strstart&&(Pt=Hn[_n=Xe.strstart-1])===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]){gr=Xe.strstart+Ie;do;while(Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&Pt===Hn[++_n]&&_n<gr);Xe.match_length=Ie-(gr-_n),Xe.match_length>Xe.lookahead&&(Xe.match_length=Xe.lookahead)}if(Xe.match_length>=ge?(Et=y._tr_tally(Xe,1,Xe.match_length-ge),Xe.lookahead-=Xe.match_length,Xe.strstart+=Xe.match_length,Xe.match_length=0):(Et=y._tr_tally(Xe,0,Xe.window[Xe.strstart]),Xe.lookahead--,Xe.strstart++),Et&&(he(Xe,!1),Xe.strm.avail_out===0))return Y}return Xe.insert=0,At===A?(he(Xe,!0),Xe.strm.avail_out===0?Tt:ke):Xe.last_lit&&(he(Xe,!1),Xe.strm.avail_out===0)?Y:Ue}(xe,at):f[xe.level].func(xe,at);if(Ct!==Tt&&Ct!==ke||(xe.status=666),Ct===Y||Ct===Tt)return J.avail_out===0&&(xe.last_flush=-1),k;if(Ct===Ue&&(at===1?y._tr_align(xe):at!==5&&(y._tr_stored_block(xe,0,0,!1),at===3&&(wt(xe.head),xe.lookahead===0&&(xe.strstart=0,xe.block_start=0,xe.insert=0))),ue(J),J.avail_out===0))return xe.last_flush=-1,k}return at!==A?k:xe.wrap<=0?1:(xe.wrap===2?(qe(xe,255&J.adler),qe(xe,J.adler>>8&255),qe(xe,J.adler>>16&255),qe(xe,J.adler>>24&255),qe(xe,255&J.total_in),qe(xe,J.total_in>>8&255),qe(xe,J.total_in>>16&255),qe(xe,J.total_in>>24&255)):(Ze(xe,J.adler>>>16),Ze(xe,65535&J.adler)),ue(J),0<xe.wrap&&(xe.wrap=-xe.wrap),xe.pending!==0?k:1)},p.deflateEnd=function(J){var at;return J&&J.state?(at=J.state.status)!==le&&at!==69&&at!==73&&at!==91&&at!==103&&at!==Ae&&at!==666?Te(J,D):(J.state=null,at===Ae?Te(J,-3):k):D},p.deflateSetDictionary=function(J,at){var st,xe,_e,He,xt,Ct,Xe,At,Et=at.length;if(!J||!J.state||(He=(st=J.state).wrap)===2||He===1&&st.status!==le||st.lookahead)return D;for(He===1&&(J.adler=w(J.adler,at,Et,0)),st.wrap=0,Et>=st.w_size&&(He===0&&(wt(st.head),st.strstart=0,st.block_start=0,st.insert=0),At=new g.Buf8(st.w_size),g.arraySet(At,at,Et-st.w_size,st.w_size,0),at=At,Et=st.w_size),xt=J.avail_in,Ct=J.next_in,Xe=J.input,J.avail_in=Et,J.next_in=0,J.input=at,ze(st);st.lookahead>=ge;){for(xe=st.strstart,_e=st.lookahead-(ge-1);st.ins_h=(st.ins_h<<st.hash_shift^st.window[xe+ge-1])&st.hash_mask,st.prev[xe&st.w_mask]=st.head[st.ins_h],st.head[st.ins_h]=xe,xe++,--_e;);st.strstart=xe,st.lookahead=ge-1,ze(st)}return st.strstart+=st.lookahead,st.block_start=st.strstart,st.insert=st.lookahead,st.lookahead=0,st.match_length=st.prev_length=ge-1,st.match_available=0,J.next_in=Ct,J.input=Xe,J.avail_in=xt,st.wrap=He,k},p.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,c,p){c.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,c,p){c.exports=function(f,g){var y,w,S,T,I,A,k,D,O,F,V,$,X,re,ne,ae,Se,fe,ge,Ie,Qe,le,Ae,Y,Ue;y=f.state,w=f.next_in,Y=f.input,S=w+(f.avail_in-5),T=f.next_out,Ue=f.output,I=T-(g-f.avail_out),A=T+(f.avail_out-257),k=y.dmax,D=y.wsize,O=y.whave,F=y.wnext,V=y.window,$=y.hold,X=y.bits,re=y.lencode,ne=y.distcode,ae=(1<<y.lenbits)-1,Se=(1<<y.distbits)-1;e:do{X<15&&($+=Y[w++]<<X,X+=8,$+=Y[w++]<<X,X+=8),fe=re[$&ae];t:for(;;){if($>>>=ge=fe>>>24,X-=ge,(ge=fe>>>16&255)===0)Ue[T++]=65535&fe;else{if(!(16&ge)){if(!(64&ge)){fe=re[(65535&fe)+($&(1<<ge)-1)];continue t}if(32&ge){y.mode=12;break e}f.msg="invalid literal/length code",y.mode=30;break e}Ie=65535&fe,(ge&=15)&&(X<ge&&($+=Y[w++]<<X,X+=8),Ie+=$&(1<<ge)-1,$>>>=ge,X-=ge),X<15&&($+=Y[w++]<<X,X+=8,$+=Y[w++]<<X,X+=8),fe=ne[$&Se];n:for(;;){if($>>>=ge=fe>>>24,X-=ge,!(16&(ge=fe>>>16&255))){if(!(64&ge)){fe=ne[(65535&fe)+($&(1<<ge)-1)];continue n}f.msg="invalid distance code",y.mode=30;break e}if(Qe=65535&fe,X<(ge&=15)&&($+=Y[w++]<<X,(X+=8)<ge&&($+=Y[w++]<<X,X+=8)),k<(Qe+=$&(1<<ge)-1)){f.msg="invalid distance too far back",y.mode=30;break e}if($>>>=ge,X-=ge,(ge=T-I)<Qe){if(O<(ge=Qe-ge)&&y.sane){f.msg="invalid distance too far back",y.mode=30;break e}if(Ae=V,(le=0)===F){if(le+=D-ge,ge<Ie){for(Ie-=ge;Ue[T++]=V[le++],--ge;);le=T-Qe,Ae=Ue}}else if(F<ge){if(le+=D+F-ge,(ge-=F)<Ie){for(Ie-=ge;Ue[T++]=V[le++],--ge;);if(le=0,F<Ie){for(Ie-=ge=F;Ue[T++]=V[le++],--ge;);le=T-Qe,Ae=Ue}}}else if(le+=F-ge,ge<Ie){for(Ie-=ge;Ue[T++]=V[le++],--ge;);le=T-Qe,Ae=Ue}for(;2<Ie;)Ue[T++]=Ae[le++],Ue[T++]=Ae[le++],Ue[T++]=Ae[le++],Ie-=3;Ie&&(Ue[T++]=Ae[le++],1<Ie&&(Ue[T++]=Ae[le++]))}else{for(le=T-Qe;Ue[T++]=Ue[le++],Ue[T++]=Ue[le++],Ue[T++]=Ue[le++],2<(Ie-=3););Ie&&(Ue[T++]=Ue[le++],1<Ie&&(Ue[T++]=Ue[le++]))}break}}break}}while(w<S&&T<A);w-=Ie=X>>3,$&=(1<<(X-=Ie<<3))-1,f.next_in=w,f.next_out=T,f.avail_in=w<S?S-w+5:5-(w-S),f.avail_out=T<A?A-T+257:257-(T-A),y.hold=$,y.bits=X}},{}],49:[function(a,c,p){var f=a("../utils/common"),g=a("./adler32"),y=a("./crc32"),w=a("./inffast"),S=a("./inftrees"),T=1,I=2,A=0,k=-2,D=1,O=852,F=592;function V(le){return(le>>>24&255)+(le>>>8&65280)+((65280&le)<<8)+((255&le)<<24)}function $(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new f.Buf16(320),this.work=new f.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function X(le){var Ae;return le&&le.state?(Ae=le.state,le.total_in=le.total_out=Ae.total=0,le.msg="",Ae.wrap&&(le.adler=1&Ae.wrap),Ae.mode=D,Ae.last=0,Ae.havedict=0,Ae.dmax=32768,Ae.head=null,Ae.hold=0,Ae.bits=0,Ae.lencode=Ae.lendyn=new f.Buf32(O),Ae.distcode=Ae.distdyn=new f.Buf32(F),Ae.sane=1,Ae.back=-1,A):k}function re(le){var Ae;return le&&le.state?((Ae=le.state).wsize=0,Ae.whave=0,Ae.wnext=0,X(le)):k}function ne(le,Ae){var Y,Ue;return le&&le.state?(Ue=le.state,Ae<0?(Y=0,Ae=-Ae):(Y=1+(Ae>>4),Ae<48&&(Ae&=15)),Ae&&(Ae<8||15<Ae)?k:(Ue.window!==null&&Ue.wbits!==Ae&&(Ue.window=null),Ue.wrap=Y,Ue.wbits=Ae,re(le))):k}function ae(le,Ae){var Y,Ue;return le?(Ue=new $,(le.state=Ue).window=null,(Y=ne(le,Ae))!==A&&(le.state=null),Y):k}var Se,fe,ge=!0;function Ie(le){if(ge){var Ae;for(Se=new f.Buf32(512),fe=new f.Buf32(32),Ae=0;Ae<144;)le.lens[Ae++]=8;for(;Ae<256;)le.lens[Ae++]=9;for(;Ae<280;)le.lens[Ae++]=7;for(;Ae<288;)le.lens[Ae++]=8;for(S(T,le.lens,0,288,Se,0,le.work,{bits:9}),Ae=0;Ae<32;)le.lens[Ae++]=5;S(I,le.lens,0,32,fe,0,le.work,{bits:5}),ge=!1}le.lencode=Se,le.lenbits=9,le.distcode=fe,le.distbits=5}function Qe(le,Ae,Y,Ue){var Tt,ke=le.state;return ke.window===null&&(ke.wsize=1<<ke.wbits,ke.wnext=0,ke.whave=0,ke.window=new f.Buf8(ke.wsize)),Ue>=ke.wsize?(f.arraySet(ke.window,Ae,Y-ke.wsize,ke.wsize,0),ke.wnext=0,ke.whave=ke.wsize):(Ue<(Tt=ke.wsize-ke.wnext)&&(Tt=Ue),f.arraySet(ke.window,Ae,Y-Ue,Tt,ke.wnext),(Ue-=Tt)?(f.arraySet(ke.window,Ae,Y-Ue,Ue,0),ke.wnext=Ue,ke.whave=ke.wsize):(ke.wnext+=Tt,ke.wnext===ke.wsize&&(ke.wnext=0),ke.whave<ke.wsize&&(ke.whave+=Tt))),0}p.inflateReset=re,p.inflateReset2=ne,p.inflateResetKeep=X,p.inflateInit=function(le){return ae(le,15)},p.inflateInit2=ae,p.inflate=function(le,Ae){var Y,Ue,Tt,ke,Te,je,wt,ue,he,qe,Ze,ot,ze,Zt,bt,Kt,cn,In,Cn,Er,J,at,st,xe,_e=0,He=new f.Buf8(4),xt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!le||!le.state||!le.output||!le.input&&le.avail_in!==0)return k;(Y=le.state).mode===12&&(Y.mode=13),Te=le.next_out,Tt=le.output,wt=le.avail_out,ke=le.next_in,Ue=le.input,je=le.avail_in,ue=Y.hold,he=Y.bits,qe=je,Ze=wt,at=A;e:for(;;)switch(Y.mode){case D:if(Y.wrap===0){Y.mode=13;break}for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(2&Y.wrap&&ue===35615){He[Y.check=0]=255&ue,He[1]=ue>>>8&255,Y.check=y(Y.check,He,2,0),he=ue=0,Y.mode=2;break}if(Y.flags=0,Y.head&&(Y.head.done=!1),!(1&Y.wrap)||(((255&ue)<<8)+(ue>>8))%31){le.msg="incorrect header check",Y.mode=30;break}if((15&ue)!=8){le.msg="unknown compression method",Y.mode=30;break}if(he-=4,J=8+(15&(ue>>>=4)),Y.wbits===0)Y.wbits=J;else if(J>Y.wbits){le.msg="invalid window size",Y.mode=30;break}Y.dmax=1<<J,le.adler=Y.check=1,Y.mode=512&ue?10:12,he=ue=0;break;case 2:for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(Y.flags=ue,(255&Y.flags)!=8){le.msg="unknown compression method",Y.mode=30;break}if(57344&Y.flags){le.msg="unknown header flags set",Y.mode=30;break}Y.head&&(Y.head.text=ue>>8&1),512&Y.flags&&(He[0]=255&ue,He[1]=ue>>>8&255,Y.check=y(Y.check,He,2,0)),he=ue=0,Y.mode=3;case 3:for(;he<32;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.head&&(Y.head.time=ue),512&Y.flags&&(He[0]=255&ue,He[1]=ue>>>8&255,He[2]=ue>>>16&255,He[3]=ue>>>24&255,Y.check=y(Y.check,He,4,0)),he=ue=0,Y.mode=4;case 4:for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.head&&(Y.head.xflags=255&ue,Y.head.os=ue>>8),512&Y.flags&&(He[0]=255&ue,He[1]=ue>>>8&255,Y.check=y(Y.check,He,2,0)),he=ue=0,Y.mode=5;case 5:if(1024&Y.flags){for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.length=ue,Y.head&&(Y.head.extra_len=ue),512&Y.flags&&(He[0]=255&ue,He[1]=ue>>>8&255,Y.check=y(Y.check,He,2,0)),he=ue=0}else Y.head&&(Y.head.extra=null);Y.mode=6;case 6:if(1024&Y.flags&&(je<(ot=Y.length)&&(ot=je),ot&&(Y.head&&(J=Y.head.extra_len-Y.length,Y.head.extra||(Y.head.extra=new Array(Y.head.extra_len)),f.arraySet(Y.head.extra,Ue,ke,ot,J)),512&Y.flags&&(Y.check=y(Y.check,Ue,ot,ke)),je-=ot,ke+=ot,Y.length-=ot),Y.length))break e;Y.length=0,Y.mode=7;case 7:if(2048&Y.flags){if(je===0)break e;for(ot=0;J=Ue[ke+ot++],Y.head&&J&&Y.length<65536&&(Y.head.name+=String.fromCharCode(J)),J&&ot<je;);if(512&Y.flags&&(Y.check=y(Y.check,Ue,ot,ke)),je-=ot,ke+=ot,J)break e}else Y.head&&(Y.head.name=null);Y.length=0,Y.mode=8;case 8:if(4096&Y.flags){if(je===0)break e;for(ot=0;J=Ue[ke+ot++],Y.head&&J&&Y.length<65536&&(Y.head.comment+=String.fromCharCode(J)),J&&ot<je;);if(512&Y.flags&&(Y.check=y(Y.check,Ue,ot,ke)),je-=ot,ke+=ot,J)break e}else Y.head&&(Y.head.comment=null);Y.mode=9;case 9:if(512&Y.flags){for(;he<16;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(ue!==(65535&Y.check)){le.msg="header crc mismatch",Y.mode=30;break}he=ue=0}Y.head&&(Y.head.hcrc=Y.flags>>9&1,Y.head.done=!0),le.adler=Y.check=0,Y.mode=12;break;case 10:for(;he<32;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}le.adler=Y.check=V(ue),he=ue=0,Y.mode=11;case 11:if(Y.havedict===0)return le.next_out=Te,le.avail_out=wt,le.next_in=ke,le.avail_in=je,Y.hold=ue,Y.bits=he,2;le.adler=Y.check=1,Y.mode=12;case 12:if(Ae===5||Ae===6)break e;case 13:if(Y.last){ue>>>=7&he,he-=7&he,Y.mode=27;break}for(;he<3;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}switch(Y.last=1&ue,he-=1,3&(ue>>>=1)){case 0:Y.mode=14;break;case 1:if(Ie(Y),Y.mode=20,Ae!==6)break;ue>>>=2,he-=2;break e;case 2:Y.mode=17;break;case 3:le.msg="invalid block type",Y.mode=30}ue>>>=2,he-=2;break;case 14:for(ue>>>=7&he,he-=7&he;he<32;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if((65535&ue)!=(ue>>>16^65535)){le.msg="invalid stored block lengths",Y.mode=30;break}if(Y.length=65535&ue,he=ue=0,Y.mode=15,Ae===6)break e;case 15:Y.mode=16;case 16:if(ot=Y.length){if(je<ot&&(ot=je),wt<ot&&(ot=wt),ot===0)break e;f.arraySet(Tt,Ue,ke,ot,Te),je-=ot,ke+=ot,wt-=ot,Te+=ot,Y.length-=ot;break}Y.mode=12;break;case 17:for(;he<14;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(Y.nlen=257+(31&ue),ue>>>=5,he-=5,Y.ndist=1+(31&ue),ue>>>=5,he-=5,Y.ncode=4+(15&ue),ue>>>=4,he-=4,286<Y.nlen||30<Y.ndist){le.msg="too many length or distance symbols",Y.mode=30;break}Y.have=0,Y.mode=18;case 18:for(;Y.have<Y.ncode;){for(;he<3;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.lens[xt[Y.have++]]=7&ue,ue>>>=3,he-=3}for(;Y.have<19;)Y.lens[xt[Y.have++]]=0;if(Y.lencode=Y.lendyn,Y.lenbits=7,st={bits:Y.lenbits},at=S(0,Y.lens,0,19,Y.lencode,0,Y.work,st),Y.lenbits=st.bits,at){le.msg="invalid code lengths set",Y.mode=30;break}Y.have=0,Y.mode=19;case 19:for(;Y.have<Y.nlen+Y.ndist;){for(;Kt=(_e=Y.lencode[ue&(1<<Y.lenbits)-1])>>>16&255,cn=65535&_e,!((bt=_e>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(cn<16)ue>>>=bt,he-=bt,Y.lens[Y.have++]=cn;else{if(cn===16){for(xe=bt+2;he<xe;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(ue>>>=bt,he-=bt,Y.have===0){le.msg="invalid bit length repeat",Y.mode=30;break}J=Y.lens[Y.have-1],ot=3+(3&ue),ue>>>=2,he-=2}else if(cn===17){for(xe=bt+3;he<xe;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}he-=bt,J=0,ot=3+(7&(ue>>>=bt)),ue>>>=3,he-=3}else{for(xe=bt+7;he<xe;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}he-=bt,J=0,ot=11+(127&(ue>>>=bt)),ue>>>=7,he-=7}if(Y.have+ot>Y.nlen+Y.ndist){le.msg="invalid bit length repeat",Y.mode=30;break}for(;ot--;)Y.lens[Y.have++]=J}}if(Y.mode===30)break;if(Y.lens[256]===0){le.msg="invalid code -- missing end-of-block",Y.mode=30;break}if(Y.lenbits=9,st={bits:Y.lenbits},at=S(T,Y.lens,0,Y.nlen,Y.lencode,0,Y.work,st),Y.lenbits=st.bits,at){le.msg="invalid literal/lengths set",Y.mode=30;break}if(Y.distbits=6,Y.distcode=Y.distdyn,st={bits:Y.distbits},at=S(I,Y.lens,Y.nlen,Y.ndist,Y.distcode,0,Y.work,st),Y.distbits=st.bits,at){le.msg="invalid distances set",Y.mode=30;break}if(Y.mode=20,Ae===6)break e;case 20:Y.mode=21;case 21:if(6<=je&&258<=wt){le.next_out=Te,le.avail_out=wt,le.next_in=ke,le.avail_in=je,Y.hold=ue,Y.bits=he,w(le,Ze),Te=le.next_out,Tt=le.output,wt=le.avail_out,ke=le.next_in,Ue=le.input,je=le.avail_in,ue=Y.hold,he=Y.bits,Y.mode===12&&(Y.back=-1);break}for(Y.back=0;Kt=(_e=Y.lencode[ue&(1<<Y.lenbits)-1])>>>16&255,cn=65535&_e,!((bt=_e>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(Kt&&!(240&Kt)){for(In=bt,Cn=Kt,Er=cn;Kt=(_e=Y.lencode[Er+((ue&(1<<In+Cn)-1)>>In)])>>>16&255,cn=65535&_e,!(In+(bt=_e>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}ue>>>=In,he-=In,Y.back+=In}if(ue>>>=bt,he-=bt,Y.back+=bt,Y.length=cn,Kt===0){Y.mode=26;break}if(32&Kt){Y.back=-1,Y.mode=12;break}if(64&Kt){le.msg="invalid literal/length code",Y.mode=30;break}Y.extra=15&Kt,Y.mode=22;case 22:if(Y.extra){for(xe=Y.extra;he<xe;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.length+=ue&(1<<Y.extra)-1,ue>>>=Y.extra,he-=Y.extra,Y.back+=Y.extra}Y.was=Y.length,Y.mode=23;case 23:for(;Kt=(_e=Y.distcode[ue&(1<<Y.distbits)-1])>>>16&255,cn=65535&_e,!((bt=_e>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(!(240&Kt)){for(In=bt,Cn=Kt,Er=cn;Kt=(_e=Y.distcode[Er+((ue&(1<<In+Cn)-1)>>In)])>>>16&255,cn=65535&_e,!(In+(bt=_e>>>24)<=he);){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}ue>>>=In,he-=In,Y.back+=In}if(ue>>>=bt,he-=bt,Y.back+=bt,64&Kt){le.msg="invalid distance code",Y.mode=30;break}Y.offset=cn,Y.extra=15&Kt,Y.mode=24;case 24:if(Y.extra){for(xe=Y.extra;he<xe;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}Y.offset+=ue&(1<<Y.extra)-1,ue>>>=Y.extra,he-=Y.extra,Y.back+=Y.extra}if(Y.offset>Y.dmax){le.msg="invalid distance too far back",Y.mode=30;break}Y.mode=25;case 25:if(wt===0)break e;if(ot=Ze-wt,Y.offset>ot){if((ot=Y.offset-ot)>Y.whave&&Y.sane){le.msg="invalid distance too far back",Y.mode=30;break}ze=ot>Y.wnext?(ot-=Y.wnext,Y.wsize-ot):Y.wnext-ot,ot>Y.length&&(ot=Y.length),Zt=Y.window}else Zt=Tt,ze=Te-Y.offset,ot=Y.length;for(wt<ot&&(ot=wt),wt-=ot,Y.length-=ot;Tt[Te++]=Zt[ze++],--ot;);Y.length===0&&(Y.mode=21);break;case 26:if(wt===0)break e;Tt[Te++]=Y.length,wt--,Y.mode=21;break;case 27:if(Y.wrap){for(;he<32;){if(je===0)break e;je--,ue|=Ue[ke++]<<he,he+=8}if(Ze-=wt,le.total_out+=Ze,Y.total+=Ze,Ze&&(le.adler=Y.check=Y.flags?y(Y.check,Tt,Ze,Te-Ze):g(Y.check,Tt,Ze,Te-Ze)),Ze=wt,(Y.flags?ue:V(ue))!==Y.check){le.msg="incorrect data check",Y.mode=30;break}he=ue=0}Y.mode=28;case 28:if(Y.wrap&&Y.flags){for(;he<32;){if(je===0)break e;je--,ue+=Ue[ke++]<<he,he+=8}if(ue!==(4294967295&Y.total)){le.msg="incorrect length check",Y.mode=30;break}he=ue=0}Y.mode=29;case 29:at=1;break e;case 30:at=-3;break e;case 31:return-4;case 32:default:return k}return le.next_out=Te,le.avail_out=wt,le.next_in=ke,le.avail_in=je,Y.hold=ue,Y.bits=he,(Y.wsize||Ze!==le.avail_out&&Y.mode<30&&(Y.mode<27||Ae!==4))&&Qe(le,le.output,le.next_out,Ze-le.avail_out)?(Y.mode=31,-4):(qe-=le.avail_in,Ze-=le.avail_out,le.total_in+=qe,le.total_out+=Ze,Y.total+=Ze,Y.wrap&&Ze&&(le.adler=Y.check=Y.flags?y(Y.check,Tt,Ze,le.next_out-Ze):g(Y.check,Tt,Ze,le.next_out-Ze)),le.data_type=Y.bits+(Y.last?64:0)+(Y.mode===12?128:0)+(Y.mode===20||Y.mode===15?256:0),(qe==0&&Ze===0||Ae===4)&&at===A&&(at=-5),at)},p.inflateEnd=function(le){if(!le||!le.state)return k;var Ae=le.state;return Ae.window&&(Ae.window=null),le.state=null,A},p.inflateGetHeader=function(le,Ae){var Y;return le&&le.state&&2&(Y=le.state).wrap?((Y.head=Ae).done=!1,A):k},p.inflateSetDictionary=function(le,Ae){var Y,Ue=Ae.length;return le&&le.state?(Y=le.state).wrap!==0&&Y.mode!==11?k:Y.mode===11&&g(1,Ae,Ue,0)!==Y.check?-3:Qe(le,Ae,Ue,Ue)?(Y.mode=31,-4):(Y.havedict=1,A):k},p.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,c,p){var f=a("../utils/common"),g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],y=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],S=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];c.exports=function(T,I,A,k,D,O,F,V){var $,X,re,ne,ae,Se,fe,ge,Ie,Qe=V.bits,le=0,Ae=0,Y=0,Ue=0,Tt=0,ke=0,Te=0,je=0,wt=0,ue=0,he=null,qe=0,Ze=new f.Buf16(16),ot=new f.Buf16(16),ze=null,Zt=0;for(le=0;le<=15;le++)Ze[le]=0;for(Ae=0;Ae<k;Ae++)Ze[I[A+Ae]]++;for(Tt=Qe,Ue=15;1<=Ue&&Ze[Ue]===0;Ue--);if(Ue<Tt&&(Tt=Ue),Ue===0)return D[O++]=20971520,D[O++]=20971520,V.bits=1,0;for(Y=1;Y<Ue&&Ze[Y]===0;Y++);for(Tt<Y&&(Tt=Y),le=je=1;le<=15;le++)if(je<<=1,(je-=Ze[le])<0)return-1;if(0<je&&(T===0||Ue!==1))return-1;for(ot[1]=0,le=1;le<15;le++)ot[le+1]=ot[le]+Ze[le];for(Ae=0;Ae<k;Ae++)I[A+Ae]!==0&&(F[ot[I[A+Ae]]++]=Ae);if(Se=T===0?(he=ze=F,19):T===1?(he=g,qe-=257,ze=y,Zt-=257,256):(he=w,ze=S,-1),le=Y,ae=O,Te=Ae=ue=0,re=-1,ne=(wt=1<<(ke=Tt))-1,T===1&&852<wt||T===2&&592<wt)return 1;for(;;){for(fe=le-Te,Ie=F[Ae]<Se?(ge=0,F[Ae]):F[Ae]>Se?(ge=ze[Zt+F[Ae]],he[qe+F[Ae]]):(ge=96,0),$=1<<le-Te,Y=X=1<<ke;D[ae+(ue>>Te)+(X-=$)]=fe<<24|ge<<16|Ie|0,X!==0;);for($=1<<le-1;ue&$;)$>>=1;if($!==0?(ue&=$-1,ue+=$):ue=0,Ae++,--Ze[le]==0){if(le===Ue)break;le=I[A+F[Ae]]}if(Tt<le&&(ue&ne)!==re){for(Te===0&&(Te=Tt),ae+=Y,je=1<<(ke=le-Te);ke+Te<Ue&&!((je-=Ze[ke+Te])<=0);)ke++,je<<=1;if(wt+=1<<ke,T===1&&852<wt||T===2&&592<wt)return 1;D[re=ue&ne]=Tt<<24|ke<<16|ae-O|0}}return ue!==0&&(D[ae+ue]=le-Te<<24|64<<16|0),V.bits=Tt,0}},{"../utils/common":41}],51:[function(a,c,p){c.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,c,p){var f=a("../utils/common"),g=0,y=1;function w(_e){for(var He=_e.length;0<=--He;)_e[He]=0}var S=0,T=29,I=256,A=I+1+T,k=30,D=19,O=2*A+1,F=15,V=16,$=7,X=256,re=16,ne=17,ae=18,Se=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],fe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Qe=new Array(2*(A+2));w(Qe);var le=new Array(2*k);w(le);var Ae=new Array(512);w(Ae);var Y=new Array(256);w(Y);var Ue=new Array(T);w(Ue);var Tt,ke,Te,je=new Array(k);function wt(_e,He,xt,Ct,Xe){this.static_tree=_e,this.extra_bits=He,this.extra_base=xt,this.elems=Ct,this.max_length=Xe,this.has_stree=_e&&_e.length}function ue(_e,He){this.dyn_tree=_e,this.max_code=0,this.stat_desc=He}function he(_e){return _e<256?Ae[_e]:Ae[256+(_e>>>7)]}function qe(_e,He){_e.pending_buf[_e.pending++]=255&He,_e.pending_buf[_e.pending++]=He>>>8&255}function Ze(_e,He,xt){_e.bi_valid>V-xt?(_e.bi_buf|=He<<_e.bi_valid&65535,qe(_e,_e.bi_buf),_e.bi_buf=He>>V-_e.bi_valid,_e.bi_valid+=xt-V):(_e.bi_buf|=He<<_e.bi_valid&65535,_e.bi_valid+=xt)}function ot(_e,He,xt){Ze(_e,xt[2*He],xt[2*He+1])}function ze(_e,He){for(var xt=0;xt|=1&_e,_e>>>=1,xt<<=1,0<--He;);return xt>>>1}function Zt(_e,He,xt){var Ct,Xe,At=new Array(F+1),Et=0;for(Ct=1;Ct<=F;Ct++)At[Ct]=Et=Et+xt[Ct-1]<<1;for(Xe=0;Xe<=He;Xe++){var Pt=_e[2*Xe+1];Pt!==0&&(_e[2*Xe]=ze(At[Pt]++,Pt))}}function bt(_e){var He;for(He=0;He<A;He++)_e.dyn_ltree[2*He]=0;for(He=0;He<k;He++)_e.dyn_dtree[2*He]=0;for(He=0;He<D;He++)_e.bl_tree[2*He]=0;_e.dyn_ltree[2*X]=1,_e.opt_len=_e.static_len=0,_e.last_lit=_e.matches=0}function Kt(_e){8<_e.bi_valid?qe(_e,_e.bi_buf):0<_e.bi_valid&&(_e.pending_buf[_e.pending++]=_e.bi_buf),_e.bi_buf=0,_e.bi_valid=0}function cn(_e,He,xt,Ct){var Xe=2*He,At=2*xt;return _e[Xe]<_e[At]||_e[Xe]===_e[At]&&Ct[He]<=Ct[xt]}function In(_e,He,xt){for(var Ct=_e.heap[xt],Xe=xt<<1;Xe<=_e.heap_len&&(Xe<_e.heap_len&&cn(He,_e.heap[Xe+1],_e.heap[Xe],_e.depth)&&Xe++,!cn(He,Ct,_e.heap[Xe],_e.depth));)_e.heap[xt]=_e.heap[Xe],xt=Xe,Xe<<=1;_e.heap[xt]=Ct}function Cn(_e,He,xt){var Ct,Xe,At,Et,Pt=0;if(_e.last_lit!==0)for(;Ct=_e.pending_buf[_e.d_buf+2*Pt]<<8|_e.pending_buf[_e.d_buf+2*Pt+1],Xe=_e.pending_buf[_e.l_buf+Pt],Pt++,Ct===0?ot(_e,Xe,He):(ot(_e,(At=Y[Xe])+I+1,He),(Et=Se[At])!==0&&Ze(_e,Xe-=Ue[At],Et),ot(_e,At=he(--Ct),xt),(Et=fe[At])!==0&&Ze(_e,Ct-=je[At],Et)),Pt<_e.last_lit;);ot(_e,X,He)}function Er(_e,He){var xt,Ct,Xe,At=He.dyn_tree,Et=He.stat_desc.static_tree,Pt=He.stat_desc.has_stree,_n=He.stat_desc.elems,gr=-1;for(_e.heap_len=0,_e.heap_max=O,xt=0;xt<_n;xt++)At[2*xt]!==0?(_e.heap[++_e.heap_len]=gr=xt,_e.depth[xt]=0):At[2*xt+1]=0;for(;_e.heap_len<2;)At[2*(Xe=_e.heap[++_e.heap_len]=gr<2?++gr:0)]=1,_e.depth[Xe]=0,_e.opt_len--,Pt&&(_e.static_len-=Et[2*Xe+1]);for(He.max_code=gr,xt=_e.heap_len>>1;1<=xt;xt--)In(_e,At,xt);for(Xe=_n;xt=_e.heap[1],_e.heap[1]=_e.heap[_e.heap_len--],In(_e,At,1),Ct=_e.heap[1],_e.heap[--_e.heap_max]=xt,_e.heap[--_e.heap_max]=Ct,At[2*Xe]=At[2*xt]+At[2*Ct],_e.depth[Xe]=(_e.depth[xt]>=_e.depth[Ct]?_e.depth[xt]:_e.depth[Ct])+1,At[2*xt+1]=At[2*Ct+1]=Xe,_e.heap[1]=Xe++,In(_e,At,1),2<=_e.heap_len;);_e.heap[--_e.heap_max]=_e.heap[1],function(Hn,Ko){var Wp,ls,gu,Ei,jv,db,yu=Ko.dyn_tree,hb=Ko.max_code,lE=Ko.stat_desc.static_tree,uE=Ko.stat_desc.has_stree,cE=Ko.stat_desc.extra_bits,pb=Ko.stat_desc.extra_base,gl=Ko.stat_desc.max_length,bu=0;for(Ei=0;Ei<=F;Ei++)Hn.bl_count[Ei]=0;for(yu[2*Hn.heap[Hn.heap_max]+1]=0,Wp=Hn.heap_max+1;Wp<O;Wp++)gl<(Ei=yu[2*yu[2*(ls=Hn.heap[Wp])+1]+1]+1)&&(Ei=gl,bu++),yu[2*ls+1]=Ei,hb<ls||(Hn.bl_count[Ei]++,jv=0,pb<=ls&&(jv=cE[ls-pb]),db=yu[2*ls],Hn.opt_len+=db*(Ei+jv),uE&&(Hn.static_len+=db*(lE[2*ls+1]+jv)));if(bu!==0){do{for(Ei=gl-1;Hn.bl_count[Ei]===0;)Ei--;Hn.bl_count[Ei]--,Hn.bl_count[Ei+1]+=2,Hn.bl_count[gl]--,bu-=2}while(0<bu);for(Ei=gl;Ei!==0;Ei--)for(ls=Hn.bl_count[Ei];ls!==0;)hb<(gu=Hn.heap[--Wp])||(yu[2*gu+1]!==Ei&&(Hn.opt_len+=(Ei-yu[2*gu+1])*yu[2*gu],yu[2*gu+1]=Ei),ls--)}}(_e,He),Zt(At,gr,_e.bl_count)}function J(_e,He,xt){var Ct,Xe,At=-1,Et=He[1],Pt=0,_n=7,gr=4;for(Et===0&&(_n=138,gr=3),He[2*(xt+1)+1]=65535,Ct=0;Ct<=xt;Ct++)Xe=Et,Et=He[2*(Ct+1)+1],++Pt<_n&&Xe===Et||(Pt<gr?_e.bl_tree[2*Xe]+=Pt:Xe!==0?(Xe!==At&&_e.bl_tree[2*Xe]++,_e.bl_tree[2*re]++):Pt<=10?_e.bl_tree[2*ne]++:_e.bl_tree[2*ae]++,At=Xe,gr=(Pt=0)===Et?(_n=138,3):Xe===Et?(_n=6,3):(_n=7,4))}function at(_e,He,xt){var Ct,Xe,At=-1,Et=He[1],Pt=0,_n=7,gr=4;for(Et===0&&(_n=138,gr=3),Ct=0;Ct<=xt;Ct++)if(Xe=Et,Et=He[2*(Ct+1)+1],!(++Pt<_n&&Xe===Et)){if(Pt<gr)for(;ot(_e,Xe,_e.bl_tree),--Pt!=0;);else Xe!==0?(Xe!==At&&(ot(_e,Xe,_e.bl_tree),Pt--),ot(_e,re,_e.bl_tree),Ze(_e,Pt-3,2)):Pt<=10?(ot(_e,ne,_e.bl_tree),Ze(_e,Pt-3,3)):(ot(_e,ae,_e.bl_tree),Ze(_e,Pt-11,7));At=Xe,gr=(Pt=0)===Et?(_n=138,3):Xe===Et?(_n=6,3):(_n=7,4)}}w(je);var st=!1;function xe(_e,He,xt,Ct){Ze(_e,(S<<1)+(Ct?1:0),3),function(Xe,At,Et,Pt){Kt(Xe),Pt&&(qe(Xe,Et),qe(Xe,~Et)),f.arraySet(Xe.pending_buf,Xe.window,At,Et,Xe.pending),Xe.pending+=Et}(_e,He,xt,!0)}p._tr_init=function(_e){st||(function(){var He,xt,Ct,Xe,At,Et=new Array(F+1);for(Xe=Ct=0;Xe<T-1;Xe++)for(Ue[Xe]=Ct,He=0;He<1<<Se[Xe];He++)Y[Ct++]=Xe;for(Y[Ct-1]=Xe,Xe=At=0;Xe<16;Xe++)for(je[Xe]=At,He=0;He<1<<fe[Xe];He++)Ae[At++]=Xe;for(At>>=7;Xe<k;Xe++)for(je[Xe]=At<<7,He=0;He<1<<fe[Xe]-7;He++)Ae[256+At++]=Xe;for(xt=0;xt<=F;xt++)Et[xt]=0;for(He=0;He<=143;)Qe[2*He+1]=8,He++,Et[8]++;for(;He<=255;)Qe[2*He+1]=9,He++,Et[9]++;for(;He<=279;)Qe[2*He+1]=7,He++,Et[7]++;for(;He<=287;)Qe[2*He+1]=8,He++,Et[8]++;for(Zt(Qe,A+1,Et),He=0;He<k;He++)le[2*He+1]=5,le[2*He]=ze(He,5);Tt=new wt(Qe,Se,I+1,A,F),ke=new wt(le,fe,0,k,F),Te=new wt(new Array(0),ge,0,D,$)}(),st=!0),_e.l_desc=new ue(_e.dyn_ltree,Tt),_e.d_desc=new ue(_e.dyn_dtree,ke),_e.bl_desc=new ue(_e.bl_tree,Te),_e.bi_buf=0,_e.bi_valid=0,bt(_e)},p._tr_stored_block=xe,p._tr_flush_block=function(_e,He,xt,Ct){var Xe,At,Et=0;0<_e.level?(_e.strm.data_type===2&&(_e.strm.data_type=function(Pt){var _n,gr=4093624447;for(_n=0;_n<=31;_n++,gr>>>=1)if(1&gr&&Pt.dyn_ltree[2*_n]!==0)return g;if(Pt.dyn_ltree[18]!==0||Pt.dyn_ltree[20]!==0||Pt.dyn_ltree[26]!==0)return y;for(_n=32;_n<I;_n++)if(Pt.dyn_ltree[2*_n]!==0)return y;return g}(_e)),Er(_e,_e.l_desc),Er(_e,_e.d_desc),Et=function(Pt){var _n;for(J(Pt,Pt.dyn_ltree,Pt.l_desc.max_code),J(Pt,Pt.dyn_dtree,Pt.d_desc.max_code),Er(Pt,Pt.bl_desc),_n=D-1;3<=_n&&Pt.bl_tree[2*Ie[_n]+1]===0;_n--);return Pt.opt_len+=3*(_n+1)+5+5+4,_n}(_e),Xe=_e.opt_len+3+7>>>3,(At=_e.static_len+3+7>>>3)<=Xe&&(Xe=At)):Xe=At=xt+5,xt+4<=Xe&&He!==-1?xe(_e,He,xt,Ct):_e.strategy===4||At===Xe?(Ze(_e,2+(Ct?1:0),3),Cn(_e,Qe,le)):(Ze(_e,4+(Ct?1:0),3),function(Pt,_n,gr,Hn){var Ko;for(Ze(Pt,_n-257,5),Ze(Pt,gr-1,5),Ze(Pt,Hn-4,4),Ko=0;Ko<Hn;Ko++)Ze(Pt,Pt.bl_tree[2*Ie[Ko]+1],3);at(Pt,Pt.dyn_ltree,_n-1),at(Pt,Pt.dyn_dtree,gr-1)}(_e,_e.l_desc.max_code+1,_e.d_desc.max_code+1,Et+1),Cn(_e,_e.dyn_ltree,_e.dyn_dtree)),bt(_e),Ct&&Kt(_e)},p._tr_tally=function(_e,He,xt){return _e.pending_buf[_e.d_buf+2*_e.last_lit]=He>>>8&255,_e.pending_buf[_e.d_buf+2*_e.last_lit+1]=255&He,_e.pending_buf[_e.l_buf+_e.last_lit]=255&xt,_e.last_lit++,He===0?_e.dyn_ltree[2*xt]++:(_e.matches++,He--,_e.dyn_ltree[2*(Y[xt]+I+1)]++,_e.dyn_dtree[2*he(He)]++),_e.last_lit===_e.lit_bufsize-1},p._tr_align=function(_e){Ze(_e,2,3),ot(_e,X,Qe),function(He){He.bi_valid===16?(qe(He,He.bi_buf),He.bi_buf=0,He.bi_valid=0):8<=He.bi_valid&&(He.pending_buf[He.pending++]=255&He.bi_buf,He.bi_buf>>=8,He.bi_valid-=8)}(_e)}},{"../utils/common":41}],53:[function(a,c,p){c.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,c,p){(function(f){(function(g,y){if(!g.setImmediate){var w,S,T,I,A=1,k={},D=!1,O=g.document,F=Object.getPrototypeOf&&Object.getPrototypeOf(g);F=F&&F.setTimeout?F:g,w={}.toString.call(g.process)==="[object process]"?function(re){process.nextTick(function(){$(re)})}:function(){if(g.postMessage&&!g.importScripts){var re=!0,ne=g.onmessage;return g.onmessage=function(){re=!1},g.postMessage("","*"),g.onmessage=ne,re}}()?(I="setImmediate$"+Math.random()+"$",g.addEventListener?g.addEventListener("message",X,!1):g.attachEvent("onmessage",X),function(re){g.postMessage(I+re,"*")}):g.MessageChannel?((T=new MessageChannel).port1.onmessage=function(re){$(re.data)},function(re){T.port2.postMessage(re)}):O&&"onreadystatechange"in O.createElement("script")?(S=O.documentElement,function(re){var ne=O.createElement("script");ne.onreadystatechange=function(){$(re),ne.onreadystatechange=null,S.removeChild(ne),ne=null},S.appendChild(ne)}):function(re){setTimeout($,0,re)},F.setImmediate=function(re){typeof re!="function"&&(re=new Function(""+re));for(var ne=new Array(arguments.length-1),ae=0;ae<ne.length;ae++)ne[ae]=arguments[ae+1];var Se={callback:re,args:ne};return k[A]=Se,w(A),A++},F.clearImmediate=V}function V(re){delete k[re]}function $(re){if(D)setTimeout($,0,re);else{var ne=k[re];if(ne){D=!0;try{(function(ae){var Se=ae.callback,fe=ae.args;switch(fe.length){case 0:Se();break;case 1:Se(fe[0]);break;case 2:Se(fe[0],fe[1]);break;case 3:Se(fe[0],fe[1],fe[2]);break;default:Se.apply(y,fe)}})(ne)}finally{V(re),D=!1}}}}function X(re){re.source===g&&typeof re.data=="string"&&re.data.indexOf(I)===0&&$(+re.data.slice(I.length))}})(typeof self>"u"?f===void 0?this:f:self)}).call(this,typeof ki<"u"?ki:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}),EU,tI,tJ,CU,nJ,rJ,wS,iJ,PU,oJ,nI,xS,SS,Mp,sJ,aJ,lJ,zy,ta,uJ,cJ,kU,rI,wke=C(()=>{EU=Z(Re(),1),tI=Z(Re(),1),tJ=i=>typeof i=="function",CU=(i,s)=>tJ(i)?i(s):i,nJ=(()=>{let i=0;return()=>(++i).toString()})(),rJ=20,wS=new Map,iJ=1e3,PU=i=>{if(wS.has(i))return;let s=setTimeout(()=>{wS.delete(i),Mp({type:4,toastId:i})},iJ);wS.set(i,s)},oJ=i=>{let s=wS.get(i);s&&clearTimeout(s)},nI=(i,s)=>{switch(s.type){case 0:return z(j({},i),{toasts:[s.toast,...i.toasts].slice(0,rJ)});case 1:return s.toast.id&&oJ(s.toast.id),z(j({},i),{toasts:i.toasts.map(f=>f.id===s.toast.id?j(j({},f),s.toast):f)});case 2:let{toast:a}=s;return i.toasts.find(f=>f.id===a.id)?nI(i,{type:1,toast:a}):nI(i,{type:0,toast:a});case 3:let{toastId:c}=s;return c?PU(c):i.toasts.forEach(f=>{PU(f.id)}),z(j({},i),{toasts:i.toasts.map(f=>f.id===c||c===void 0?z(j({},f),{visible:!1}):f)});case 4:return s.toastId===void 0?z(j({},i),{toasts:[]}):z(j({},i),{toasts:i.toasts.filter(f=>f.id!==s.toastId)});case 5:return z(j({},i),{pausedAt:s.time});case 6:let p=s.time-(i.pausedAt||0);return z(j({},i),{pausedAt:void 0,toasts:i.toasts.map(f=>z(j({},f),{pauseDuration:f.pauseDuration+p}))})}},xS=[],SS={toasts:[],pausedAt:void 0},Mp=i=>{SS=nI(SS,i),xS.forEach(s=>{s(SS)})},sJ={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},aJ=(i={})=>{let[s,a]=(0,EU.useState)(SS);(0,EU.useEffect)(()=>(xS.push(a),()=>{let p=xS.indexOf(a);p>-1&&xS.splice(p,1)}),[s]);let c=s.toasts.map(p=>{var f,g;return z(j(j(j({},i),i[p.type]),p),{duration:p.duration||((f=i[p.type])==null?void 0:f.duration)||(i==null?void 0:i.duration)||sJ[p.type],style:j(j(j({},i.style),(g=i[p.type])==null?void 0:g.style),p.style)})});return z(j({},s),{toasts:c})},lJ=(i,s="blank",a)=>z(j({createdAt:Date.now(),visible:!0,type:s,ariaProps:{role:"status","aria-live":"polite"},message:i,pauseDuration:0},a),{id:(a==null?void 0:a.id)||nJ()}),zy=i=>(s,a)=>{let c=lJ(s,i,a);return Mp({type:2,toast:c}),c.id},ta=(i,s)=>zy("blank")(i,s),ta.error=zy("error"),ta.success=zy("success"),ta.loading=zy("loading"),ta.custom=zy("custom"),ta.dismiss=i=>{Mp({type:3,toastId:i})},ta.remove=i=>Mp({type:4,toastId:i}),ta.promise=(i,s,a)=>{let c=ta.loading(s.loading,j(j({},a),a==null?void 0:a.loading));return i.then(p=>(ta.success(CU(s.success,p),j(j({id:c},a),a==null?void 0:a.success)),p)).catch(p=>{ta.error(CU(s.error,p),j(j({id:c},a),a==null?void 0:a.error))}),i},uJ=(i,s)=>{Mp({type:1,toast:{id:i,height:s}})},cJ=()=>{Mp({type:5,time:Date.now()})},kU=i=>{let{toasts:s,pausedAt:a}=aJ(i);(0,tI.useEffect)(()=>{if(a)return;let f=Date.now(),g=s.map(y=>{if(y.duration===1/0)return;let w=(y.duration||0)+y.pauseDuration-(f-y.createdAt);if(w<0){y.visible&&ta.dismiss(y.id);return}return setTimeout(()=>ta.dismiss(y.id),w)});return()=>{g.forEach(y=>y&&clearTimeout(y))}},[s,a]);let c=(0,tI.useCallback)(()=>{a&&Mp({type:6,time:Date.now()})},[a]),p=(0,tI.useCallback)((f,g)=>{let{reverseOrder:y=!1,gutter:w=8,defaultPosition:S}=g||{},T=s.filter(k=>(k.position||S)===(f.position||S)&&k.height),I=T.findIndex(k=>k.id===f.id),A=T.filter((k,D)=>D<I&&k.visible).length;return T.filter(k=>k.visible).slice(...y?[A+1]:[0,A]).reduce((k,D)=>k+(D.height||0)+w,0)},[s]);return{toasts:s,handlers:{updateHeight:uJ,startPause:cJ,endPause:c,calculateOffset:p}}},rI=ta});function dJ(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function xke(i){cv=i}function Eo(i,s){if(s){if(bJ.test(i))return i.replace(_J,TU)}else if(wJ.test(i))return i.replace(xJ,TU);return i}function hJ(i){return i.replace(EJ,(s,a)=>(a=a.toLowerCase(),a==="colon"?":":a.charAt(0)==="#"?a.charAt(1)==="x"?String.fromCharCode(parseInt(a.substring(2),16)):String.fromCharCode(+a.substring(1)):""))}function Zr(i,s){i=typeof i=="string"?i:i.source,s=s||"";let a={replace:(c,p)=>(p=p.source||p,p=p.replace(CJ,"$1"),i=i.replace(c,p),a),getRegex:()=>new RegExp(i,s)};return a}function pJ(i,s,a){if(i){let c;try{c=decodeURIComponent(hJ(a)).replace(PJ,"").toLowerCase()}catch{return null}if(c.indexOf("javascript:")===0||c.indexOf("vbscript:")===0||c.indexOf("data:")===0)return null}s&&!kJ.test(a)&&(a=Ske(s,a));try{a=encodeURI(a).replace(/%25/g,"%")}catch{return null}return a}function Ske(i,s){ES[" "+i]||(TJ.test(i)?ES[" "+i]=i+"/":ES[" "+i]=iI(i,"/",!0)),i=ES[" "+i];let a=i.indexOf(":")===-1;return s.substring(0,2)==="//"?a?s:i.replace(MJ,"$1")+s:s.charAt(0)==="/"?a?s:i.replace(AJ,"$1")+s:i+s}function uu(i){let s=1,a,c;for(;s<arguments.length;s++){a=arguments[s];for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&(i[c]=a[c])}return i}function fJ(i,s){let a=i.replace(/\|/g,(f,g,y)=>{let w=!1,S=g;for(;--S>=0&&y[S]==="\\";)w=!w;return w?"|":" |"}),c=a.split(/ \|/),p=0;if(c[0].trim()||c.shift(),c.length>0&&!c[c.length-1].trim()&&c.pop(),c.length>s)c.splice(s);else for(;c.length<s;)c.push("");for(;p<c.length;p++)c[p]=c[p].trim().replace(/\\\|/g,"|");return c}function iI(i,s,a){let c=i.length;if(c===0)return"";let p=0;for(;p<c;){let f=i.charAt(c-p-1);if(f===s&&!a)p++;else if(f!==s&&a)p++;else break}return i.slice(0,c-p)}function Eke(i,s){if(i.indexOf(s[1])===-1)return-1;let a=i.length,c=0,p=0;for(;p<a;p++)if(i[p]==="\\")p++;else if(i[p]===s[0])c++;else if(i[p]===s[1]&&(c--,c<0))return p;return-1}function mJ(i){i&&i.sanitize&&!i.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function vJ(i,s){if(s<1)return"";let a="";for(;s>1;)s&1&&(a+=i),s>>=1,i+=i;return a+i}function gJ(i,s,a,c){let p=s.href,f=s.title?Eo(s.title):null,g=i[1].replace(/\\([\[\]])/g,"$1");if(i[0].charAt(0)!=="!"){c.state.inLink=!0;let y={type:"link",raw:a,href:p,title:f,text:g,tokens:c.inlineTokens(g)};return c.state.inLink=!1,y}return{type:"image",raw:a,href:p,title:f,text:Eo(g)}}function Cke(i,s){let a=i.match(/^(\s+)(?:```)/);if(a===null)return s;let c=a[1];return s.split(`
`).map(p=>{let f=p.match(/^\s+/);if(f===null)return p;let[g]=f;return g.length>=c.length?p.slice(c.length):p}).join(`
`)}function Pke(i){return i.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function yJ(i){let s="",a,c,p=i.length;for(a=0;a<p;a++)c=i.charCodeAt(a),Math.random()>.5&&(c="x"+c.toString(16)),s+="&#"+c+";";return s}function Vn(i,s,a){if(typeof i>"u"||i===null)throw new Error("marked(): input parameter is undefined or null");if(typeof i!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected");if(typeof s=="function"&&(a=s,s=null),s=uu({},Vn.defaults,s||{}),mJ(s),a){let p=s.highlight,f;try{f=dv.lex(i,s)}catch(w){return a(w)}let g=function(w){let S;if(!w)try{s.walkTokens&&Vn.walkTokens(f,s.walkTokens),S=Ap.parse(f,s)}catch(T){w=T}return s.highlight=p,w?a(w):a(null,S)};if(!p||p.length<3||(delete s.highlight,!f.length))return g();let y=0;Vn.walkTokens(f,function(w){w.type==="code"&&(y++,setTimeout(()=>{p(w.text,w.lang,function(S,T){if(S)return g(S);T!=null&&T!==w.text&&(w.text=T,w.escaped=!0),y--,y===0&&g()})},0))}),y===0&&g();return}function c(p){if(p.message+=`
Please report this to https://github.com/markedjs/marked.`,s.silent)return"<p>An error occurred:</p><pre>"+Eo(p.message+"",!0)+"</pre>";throw p}try{let p=dv.lex(i,s);if(s.walkTokens){if(s.async)return Promise.all(Vn.walkTokens(p,s.walkTokens)).then(()=>Ap.parse(p,s)).catch(c);Vn.walkTokens(p,s.walkTokens)}return Ap.parse(p,s)}catch(p){c(p)}}var cv,bJ,_J,wJ,xJ,SJ,TU,EJ,CJ,PJ,kJ,ES,TJ,MJ,AJ,CS,oI,An,sn,dv,sI,MU,AU,Ap,kke=C(()=>{cv=dJ(),bJ=/[&<>"']/,_J=/[&<>"']/g,wJ=/[<>"']|&(?!#?\w+;)/,xJ=/[<>"']|&(?!#?\w+;)/g,SJ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},TU=i=>SJ[i],EJ=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,CJ=/(^|[^\[])\^/g,PJ=/[^\w:]/g,kJ=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,ES={},TJ=/^[^:]+:\/*[^/]*$/,MJ=/^([^:]+:)[\s\S]*$/,AJ=/^([^:]+:\/*[^/]*)[\s\S]*$/,CS={exec:function(){}},oI=class{constructor(i){this.options=i||cv}space(i){let s=this.rules.block.newline.exec(i);if(s&&s[0].length>0)return{type:"space",raw:s[0]}}code(i){let s=this.rules.block.code.exec(i);if(s){let a=s[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:s[0],codeBlockStyle:"indented",text:this.options.pedantic?a:iI(a,`
`)}}}fences(i){let s=this.rules.block.fences.exec(i);if(s){let a=s[0],c=Cke(a,s[3]||"");return{type:"code",raw:a,lang:s[2]?s[2].trim():s[2],text:c}}}heading(i){let s=this.rules.block.heading.exec(i);if(s){let a=s[2].trim();if(/#$/.test(a)){let c=iI(a,"#");(this.options.pedantic||!c||/ $/.test(c))&&(a=c.trim())}return{type:"heading",raw:s[0],depth:s[1].length,text:a,tokens:this.lexer.inline(a)}}}hr(i){let s=this.rules.block.hr.exec(i);if(s)return{type:"hr",raw:s[0]}}blockquote(i){let s=this.rules.block.blockquote.exec(i);if(s){let a=s[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:s[0],tokens:this.lexer.blockTokens(a,[]),text:a}}}list(i){let s=this.rules.block.list.exec(i);if(s){let a,c,p,f,g,y,w,S,T,I,A,k,D=s[1].trim(),O=D.length>1,F={type:"list",raw:"",ordered:O,start:O?+D.slice(0,-1):"",loose:!1,items:[]};D=O?"\\d{1,9}\\".concat(D.slice(-1)):"\\".concat(D),this.options.pedantic&&(D=O?D:"[*+-]");let V=new RegExp("^( {0,3}".concat(D,")((?:[	 ][^\\n]*)?(?:\\n|$))"));for(;i&&(k=!1,!(!(s=V.exec(i))||this.rules.block.hr.test(i)));){if(a=s[0],i=i.substring(a.length),S=s[2].split(`
`,1)[0],T=i.split(`
`,1)[0],this.options.pedantic?(f=2,A=S.trimLeft()):(f=s[2].search(/[^ ]/),f=f>4?1:f,A=S.slice(f),f+=s[1].length),y=!1,!S&&/^ *$/.test(T)&&(a+=T+`
`,i=i.substring(T.length+1),k=!0),!k){let X=new RegExp("^ {0,".concat(Math.min(3,f-1),"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))")),re=new RegExp("^ {0,".concat(Math.min(3,f-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),ne=new RegExp("^ {0,".concat(Math.min(3,f-1),"}(?:```|~~~)")),ae=new RegExp("^ {0,".concat(Math.min(3,f-1),"}#"));for(;i&&(I=i.split(`
`,1)[0],S=I,this.options.pedantic&&(S=S.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(ne.test(S)||ae.test(S)||X.test(S)||re.test(i)));){if(S.search(/[^ ]/)>=f||!S.trim())A+=`
`+S.slice(f);else if(!y)A+=`
`+S;else break;!y&&!S.trim()&&(y=!0),a+=I+`
`,i=i.substring(I.length+1)}}F.loose||(w?F.loose=!0:/\n *\n *$/.test(a)&&(w=!0)),this.options.gfm&&(c=/^\[[ xX]\] /.exec(A),c&&(p=c[0]!=="[ ] ",A=A.replace(/^\[[ xX]\] +/,""))),F.items.push({type:"list_item",raw:a,task:!!c,checked:p,loose:!1,text:A}),F.raw+=a}F.items[F.items.length-1].raw=a.trimRight(),F.items[F.items.length-1].text=A.trimRight(),F.raw=F.raw.trimRight();let $=F.items.length;for(g=0;g<$;g++){this.lexer.state.top=!1,F.items[g].tokens=this.lexer.blockTokens(F.items[g].text,[]);let X=F.items[g].tokens.filter(ne=>ne.type==="space"),re=X.every(ne=>{let ae=ne.raw.split(""),Se=0;for(let fe of ae)if(fe===`
`&&(Se+=1),Se>1)return!0;return!1});!F.loose&&X.length&&re&&(F.loose=!0,F.items[g].loose=!0)}return F}}html(i){let s=this.rules.block.html.exec(i);if(s){let a={type:"html",raw:s[0],pre:!this.options.sanitizer&&(s[1]==="pre"||s[1]==="script"||s[1]==="style"),text:s[0]};if(this.options.sanitize){let c=this.options.sanitizer?this.options.sanitizer(s[0]):Eo(s[0]);a.type="paragraph",a.text=c,a.tokens=this.lexer.inline(c)}return a}}def(i){let s=this.rules.block.def.exec(i);if(s)return s[3]&&(s[3]=s[3].substring(1,s[3].length-1)),{type:"def",tag:s[1].toLowerCase().replace(/\s+/g," "),raw:s[0],href:s[2],title:s[3]}}table(i){let s=this.rules.block.table.exec(i);if(s){let a={type:"table",header:fJ(s[1]).map(c=>({text:c})),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:s[3]&&s[3].trim()?s[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(a.header.length===a.align.length){a.raw=s[0];let c=a.align.length,p,f,g,y;for(p=0;p<c;p++)/^ *-+: *$/.test(a.align[p])?a.align[p]="right":/^ *:-+: *$/.test(a.align[p])?a.align[p]="center":/^ *:-+ *$/.test(a.align[p])?a.align[p]="left":a.align[p]=null;for(c=a.rows.length,p=0;p<c;p++)a.rows[p]=fJ(a.rows[p],a.header.length).map(w=>({text:w}));for(c=a.header.length,f=0;f<c;f++)a.header[f].tokens=this.lexer.inline(a.header[f].text);for(c=a.rows.length,f=0;f<c;f++)for(y=a.rows[f],g=0;g<y.length;g++)y[g].tokens=this.lexer.inline(y[g].text);return a}}}lheading(i){let s=this.rules.block.lheading.exec(i);if(s)return{type:"heading",raw:s[0],depth:s[2].charAt(0)==="="?1:2,text:s[1],tokens:this.lexer.inline(s[1])}}paragraph(i){let s=this.rules.block.paragraph.exec(i);if(s){let a=s[1].charAt(s[1].length-1)===`
`?s[1].slice(0,-1):s[1];return{type:"paragraph",raw:s[0],text:a,tokens:this.lexer.inline(a)}}}text(i){let s=this.rules.block.text.exec(i);if(s)return{type:"text",raw:s[0],text:s[0],tokens:this.lexer.inline(s[0])}}escape(i){let s=this.rules.inline.escape.exec(i);if(s)return{type:"escape",raw:s[0],text:Eo(s[1])}}tag(i){let s=this.rules.inline.tag.exec(i);if(s)return!this.lexer.state.inLink&&/^<a /i.test(s[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(s[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(s[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(s[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:s[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(s[0]):Eo(s[0]):s[0]}}link(i){let s=this.rules.inline.link.exec(i);if(s){let a=s[2].trim();if(!this.options.pedantic&&/^</.test(a)){if(!/>$/.test(a))return;let f=iI(a.slice(0,-1),"\\");if((a.length-f.length)%2===0)return}else{let f=Eke(s[2],"()");if(f>-1){let g=(s[0].indexOf("!")===0?5:4)+s[1].length+f;s[2]=s[2].substring(0,f),s[0]=s[0].substring(0,g).trim(),s[3]=""}}let c=s[2],p="";if(this.options.pedantic){let f=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(c);f&&(c=f[1],p=f[3])}else p=s[3]?s[3].slice(1,-1):"";return c=c.trim(),/^</.test(c)&&(this.options.pedantic&&!/>$/.test(a)?c=c.slice(1):c=c.slice(1,-1)),gJ(s,{href:c&&c.replace(this.rules.inline._escapes,"$1"),title:p&&p.replace(this.rules.inline._escapes,"$1")},s[0],this.lexer)}}reflink(i,s){let a;if((a=this.rules.inline.reflink.exec(i))||(a=this.rules.inline.nolink.exec(i))){let c=(a[2]||a[1]).replace(/\s+/g," ");if(c=s[c.toLowerCase()],!c||!c.href){let p=a[0].charAt(0);return{type:"text",raw:p,text:p}}return gJ(a,c,a[0],this.lexer)}}emStrong(i,s,a=""){let c=this.rules.inline.emStrong.lDelim.exec(i);if(!c||c[3]&&a.match(/[\p{L}\p{N}]/u))return;let p=c[1]||c[2]||"";if(!p||p&&(a===""||this.rules.inline.punctuation.exec(a))){let f=c[0].length-1,g,y,w=f,S=0,T=c[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(T.lastIndex=0,s=s.slice(-1*i.length+f);(c=T.exec(s))!=null;){if(g=c[1]||c[2]||c[3]||c[4]||c[5]||c[6],!g)continue;if(y=g.length,c[3]||c[4]){w+=y;continue}else if((c[5]||c[6])&&f%3&&!((f+y)%3)){S+=y;continue}if(w-=y,w>0)continue;if(y=Math.min(y,y+w+S),Math.min(f,y)%2){let A=i.slice(1,f+c.index+y);return{type:"em",raw:i.slice(0,f+c.index+y+1),text:A,tokens:this.lexer.inlineTokens(A)}}let I=i.slice(2,f+c.index+y-1);return{type:"strong",raw:i.slice(0,f+c.index+y+1),text:I,tokens:this.lexer.inlineTokens(I)}}}}codespan(i){let s=this.rules.inline.code.exec(i);if(s){let a=s[2].replace(/\n/g," "),c=/[^ ]/.test(a),p=/^ /.test(a)&&/ $/.test(a);return c&&p&&(a=a.substring(1,a.length-1)),a=Eo(a,!0),{type:"codespan",raw:s[0],text:a}}}br(i){let s=this.rules.inline.br.exec(i);if(s)return{type:"br",raw:s[0]}}del(i){let s=this.rules.inline.del.exec(i);if(s)return{type:"del",raw:s[0],text:s[2],tokens:this.lexer.inlineTokens(s[2])}}autolink(i,s){let a=this.rules.inline.autolink.exec(i);if(a){let c,p;return a[2]==="@"?(c=Eo(this.options.mangle?s(a[1]):a[1]),p="mailto:"+c):(c=Eo(a[1]),p=c),{type:"link",raw:a[0],text:c,href:p,tokens:[{type:"text",raw:c,text:c}]}}}url(i,s){let a;if(a=this.rules.inline.url.exec(i)){let c,p;if(a[2]==="@")c=Eo(this.options.mangle?s(a[0]):a[0]),p="mailto:"+c;else{let f;do f=a[0],a[0]=this.rules.inline._backpedal.exec(a[0])[0];while(f!==a[0]);c=Eo(a[0]),a[1]==="www."?p="http://"+c:p=c}return{type:"link",raw:a[0],text:c,href:p,tokens:[{type:"text",raw:c,text:c}]}}}inlineText(i,s){let a=this.rules.inline.text.exec(i);if(a){let c;return this.lexer.state.inRawBlock?c=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(a[0]):Eo(a[0]):a[0]:c=Eo(this.options.smartypants?s(a[0]):a[0]),{type:"text",raw:a[0],text:c}}}},An={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:CS,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/},An._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,An._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,An.def=Zr(An.def).replace("label",An._label).replace("title",An._title).getRegex(),An.bullet=/(?:[*+-]|\d{1,9}[.)])/,An.listItemStart=Zr(/^( *)(bull) */).replace("bull",An.bullet).getRegex(),An.list=Zr(An.list).replace(/bull/g,An.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+An.def.source+")").getRegex(),An._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",An._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,An.html=Zr(An.html,"i").replace("comment",An._comment).replace("tag",An._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),An.paragraph=Zr(An._paragraph).replace("hr",An.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An._tag).getRegex(),An.blockquote=Zr(An.blockquote).replace("paragraph",An.paragraph).getRegex(),An.normal=uu({},An),An.gfm=uu({},An.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),An.gfm.table=Zr(An.gfm.table).replace("hr",An.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An._tag).getRegex(),An.gfm.paragraph=Zr(An._paragraph).replace("hr",An.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",An.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",An._tag).getRegex(),An.pedantic=uu({},An.normal,{html:Zr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",An._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:CS,paragraph:Zr(An.normal._paragraph).replace("hr",An.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",An.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),sn={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:CS,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:CS,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/},sn._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",sn.punctuation=Zr(sn.punctuation).replace(/punctuation/g,sn._punctuation).getRegex(),sn.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,sn.escapedEmSt=/\\\*|\\_/g,sn._comment=Zr(An._comment).replace("(?:-->|$)","-->").getRegex(),sn.emStrong.lDelim=Zr(sn.emStrong.lDelim).replace(/punct/g,sn._punctuation).getRegex(),sn.emStrong.rDelimAst=Zr(sn.emStrong.rDelimAst,"g").replace(/punct/g,sn._punctuation).getRegex(),sn.emStrong.rDelimUnd=Zr(sn.emStrong.rDelimUnd,"g").replace(/punct/g,sn._punctuation).getRegex(),sn._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,sn._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,sn._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,sn.autolink=Zr(sn.autolink).replace("scheme",sn._scheme).replace("email",sn._email).getRegex(),sn._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,sn.tag=Zr(sn.tag).replace("comment",sn._comment).replace("attribute",sn._attribute).getRegex(),sn._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,sn._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,sn._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,sn.link=Zr(sn.link).replace("label",sn._label).replace("href",sn._href).replace("title",sn._title).getRegex(),sn.reflink=Zr(sn.reflink).replace("label",sn._label).replace("ref",An._label).getRegex(),sn.nolink=Zr(sn.nolink).replace("ref",An._label).getRegex(),sn.reflinkSearch=Zr(sn.reflinkSearch,"g").replace("reflink",sn.reflink).replace("nolink",sn.nolink).getRegex(),sn.normal=uu({},sn),sn.pedantic=uu({},sn.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Zr(/^!?\[(label)\]\((.*?)\)/).replace("label",sn._label).getRegex(),reflink:Zr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",sn._label).getRegex()}),sn.gfm=uu({},sn.normal,{escape:Zr(sn.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),sn.gfm.url=Zr(sn.gfm.url,"i").replace("email",sn.gfm._extended_email).getRegex(),sn.breaks=uu({},sn.gfm,{br:Zr(sn.br).replace("{2,}","*").getRegex(),text:Zr(sn.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),dv=class OH{constructor(s){this.tokens=[],this.tokens.links=Object.create(null),this.options=s||cv,this.options.tokenizer=this.options.tokenizer||new oI,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let a={block:An.normal,inline:sn.normal};this.options.pedantic?(a.block=An.pedantic,a.inline=sn.pedantic):this.options.gfm&&(a.block=An.gfm,this.options.breaks?a.inline=sn.breaks:a.inline=sn.gfm),this.tokenizer.rules=a}static get rules(){return{block:An,inline:sn}}static lex(s,a){return new OH(a).lex(s)}static lexInline(s,a){return new OH(a).inlineTokens(s)}lex(s){s=s.replace(/\r\n|\r/g,`
`),this.blockTokens(s,this.tokens);let a;for(;a=this.inlineQueue.shift();)this.inlineTokens(a.src,a.tokens);return this.tokens}blockTokens(s,a=[]){this.options.pedantic?s=s.replace(/\t/g,"    ").replace(/^ +$/gm,""):s=s.replace(/^( *)(\t+)/gm,(y,w,S)=>w+"    ".repeat(S.length));let c,p,f,g;for(;s;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(y=>(c=y.call({lexer:this},s,a))?(s=s.substring(c.raw.length),a.push(c),!0):!1))){if(c=this.tokenizer.space(s)){s=s.substring(c.raw.length),c.raw.length===1&&a.length>0?a[a.length-1].raw+=`
`:a.push(c);continue}if(c=this.tokenizer.code(s)){s=s.substring(c.raw.length),p=a[a.length-1],p&&(p.type==="paragraph"||p.type==="text")?(p.raw+=`
`+c.raw,p.text+=`
`+c.text,this.inlineQueue[this.inlineQueue.length-1].src=p.text):a.push(c);continue}if(c=this.tokenizer.fences(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.heading(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.hr(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.blockquote(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.list(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.html(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.def(s)){s=s.substring(c.raw.length),p=a[a.length-1],p&&(p.type==="paragraph"||p.type==="text")?(p.raw+=`
`+c.raw,p.text+=`
`+c.raw,this.inlineQueue[this.inlineQueue.length-1].src=p.text):this.tokens.links[c.tag]||(this.tokens.links[c.tag]={href:c.href,title:c.title});continue}if(c=this.tokenizer.table(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.lheading(s)){s=s.substring(c.raw.length),a.push(c);continue}if(f=s,this.options.extensions&&this.options.extensions.startBlock){let y=1/0,w=s.slice(1),S;this.options.extensions.startBlock.forEach(function(T){S=T.call({lexer:this},w),typeof S=="number"&&S>=0&&(y=Math.min(y,S))}),y<1/0&&y>=0&&(f=s.substring(0,y+1))}if(this.state.top&&(c=this.tokenizer.paragraph(f))){p=a[a.length-1],g&&p.type==="paragraph"?(p.raw+=`
`+c.raw,p.text+=`
`+c.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=p.text):a.push(c),g=f.length!==s.length,s=s.substring(c.raw.length);continue}if(c=this.tokenizer.text(s)){s=s.substring(c.raw.length),p=a[a.length-1],p&&p.type==="text"?(p.raw+=`
`+c.raw,p.text+=`
`+c.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=p.text):a.push(c);continue}if(s){let y="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(y);break}else throw new Error(y)}}return this.state.top=!0,a}inline(s,a=[]){return this.inlineQueue.push({src:s,tokens:a}),a}inlineTokens(s,a=[]){let c,p,f,g=s,y,w,S;if(this.tokens.links){let T=Object.keys(this.tokens.links);if(T.length>0)for(;(y=this.tokenizer.rules.inline.reflinkSearch.exec(g))!=null;)T.includes(y[0].slice(y[0].lastIndexOf("[")+1,-1))&&(g=g.slice(0,y.index)+"["+vJ("a",y[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(y=this.tokenizer.rules.inline.blockSkip.exec(g))!=null;)g=g.slice(0,y.index)+"["+vJ("a",y[0].length-2)+"]"+g.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(y=this.tokenizer.rules.inline.escapedEmSt.exec(g))!=null;)g=g.slice(0,y.index)+"++"+g.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;s;)if(w||(S=""),w=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(T=>(c=T.call({lexer:this},s,a))?(s=s.substring(c.raw.length),a.push(c),!0):!1))){if(c=this.tokenizer.escape(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.tag(s)){s=s.substring(c.raw.length),p=a[a.length-1],p&&c.type==="text"&&p.type==="text"?(p.raw+=c.raw,p.text+=c.text):a.push(c);continue}if(c=this.tokenizer.link(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.reflink(s,this.tokens.links)){s=s.substring(c.raw.length),p=a[a.length-1],p&&c.type==="text"&&p.type==="text"?(p.raw+=c.raw,p.text+=c.text):a.push(c);continue}if(c=this.tokenizer.emStrong(s,g,S)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.codespan(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.br(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.del(s)){s=s.substring(c.raw.length),a.push(c);continue}if(c=this.tokenizer.autolink(s,yJ)){s=s.substring(c.raw.length),a.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(s,yJ))){s=s.substring(c.raw.length),a.push(c);continue}if(f=s,this.options.extensions&&this.options.extensions.startInline){let T=1/0,I=s.slice(1),A;this.options.extensions.startInline.forEach(function(k){A=k.call({lexer:this},I),typeof A=="number"&&A>=0&&(T=Math.min(T,A))}),T<1/0&&T>=0&&(f=s.substring(0,T+1))}if(c=this.tokenizer.inlineText(f,Pke)){s=s.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(S=c.raw.slice(-1)),w=!0,p=a[a.length-1],p&&p.type==="text"?(p.raw+=c.raw,p.text+=c.text):a.push(c);continue}if(s){let T="Infinite loop on byte: "+s.charCodeAt(0);if(this.options.silent){console.error(T);break}else throw new Error(T)}}return a}},sI=class{constructor(i){this.options=i||cv}code(i,s,a){let c=(s||"").match(/\S*/)[0];if(this.options.highlight){let p=this.options.highlight(i,c);p!=null&&p!==i&&(a=!0,i=p)}return i=i.replace(/\n$/,"")+`
`,c?'<pre><code class="'+this.options.langPrefix+Eo(c,!0)+'">'+(a?i:Eo(i,!0))+`</code></pre>
`:"<pre><code>"+(a?i:Eo(i,!0))+`</code></pre>
`}blockquote(i){return`<blockquote>
`.concat(i,`</blockquote>
`)}html(i){return i}heading(i,s,a,c){if(this.options.headerIds){let p=this.options.headerPrefix+c.slug(a);return"<h".concat(s,' id="').concat(p,'">').concat(i,"</h").concat(s,`>
`)}return"<h".concat(s,">").concat(i,"</h").concat(s,`>
`)}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(i,s,a){let c=s?"ol":"ul",p=s&&a!==1?' start="'+a+'"':"";return"<"+c+p+`>
`+i+"</"+c+`>
`}listitem(i){return"<li>".concat(i,`</li>
`)}checkbox(i){return"<input "+(i?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(i){return"<p>".concat(i,`</p>
`)}table(i,s){return s&&(s="<tbody>".concat(s,"</tbody>")),`<table>
<thead>
`+i+`</thead>
`+s+`</table>
`}tablerow(i){return`<tr>
`.concat(i,`</tr>
`)}tablecell(i,s){let a=s.header?"th":"td";return(s.align?"<".concat(a,' align="').concat(s.align,'">'):"<".concat(a,">"))+i+"</".concat(a,`>
`)}strong(i){return"<strong>".concat(i,"</strong>")}em(i){return"<em>".concat(i,"</em>")}codespan(i){return"<code>".concat(i,"</code>")}br(){return this.options.xhtml?"<br/>":"<br>"}del(i){return"<del>".concat(i,"</del>")}link(i,s,a){if(i=pJ(this.options.sanitize,this.options.baseUrl,i),i===null)return a;let c='<a href="'+Eo(i)+'"';return s&&(c+=' title="'+s+'"'),c+=">"+a+"</a>",c}image(i,s,a){if(i=pJ(this.options.sanitize,this.options.baseUrl,i),i===null)return a;let c='<img src="'.concat(i,'" alt="').concat(a,'"');return s&&(c+=' title="'.concat(s,'"')),c+=this.options.xhtml?"/>":">",c}text(i){return i}},MU=class{strong(i){return i}em(i){return i}codespan(i){return i}del(i){return i}html(i){return i}text(i){return i}link(i,s,a){return""+a}image(i,s,a){return""+a}br(){return""}},AU=class{constructor(){this.seen={}}serialize(i){return i.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(i,s){let a=i,c=0;if(this.seen.hasOwnProperty(a)){c=this.seen[i];do c++,a=i+"-"+c;while(this.seen.hasOwnProperty(a))}return s||(this.seen[i]=c,this.seen[a]=0),a}slug(i,s={}){let a=this.serialize(i);return this.getNextSafeSlug(a,s.dryrun)}},Ap=class DH{constructor(s){this.options=s||cv,this.options.renderer=this.options.renderer||new sI,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new MU,this.slugger=new AU}static parse(s,a){return new DH(a).parse(s)}static parseInline(s,a){return new DH(a).parseInline(s)}parse(s,a=!0){let c="",p,f,g,y,w,S,T,I,A,k,D,O,F,V,$,X,re,ne,ae,Se=s.length;for(p=0;p<Se;p++){if(k=s[p],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[k.type]&&(ae=this.options.extensions.renderers[k.type].call({parser:this},k),ae!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(k.type))){c+=ae||"";continue}switch(k.type){case"space":continue;case"hr":{c+=this.renderer.hr();continue}case"heading":{c+=this.renderer.heading(this.parseInline(k.tokens),k.depth,hJ(this.parseInline(k.tokens,this.textRenderer)),this.slugger);continue}case"code":{c+=this.renderer.code(k.text,k.lang,k.escaped);continue}case"table":{for(I="",T="",y=k.header.length,f=0;f<y;f++)T+=this.renderer.tablecell(this.parseInline(k.header[f].tokens),{header:!0,align:k.align[f]});for(I+=this.renderer.tablerow(T),A="",y=k.rows.length,f=0;f<y;f++){for(S=k.rows[f],T="",w=S.length,g=0;g<w;g++)T+=this.renderer.tablecell(this.parseInline(S[g].tokens),{header:!1,align:k.align[g]});A+=this.renderer.tablerow(T)}c+=this.renderer.table(I,A);continue}case"blockquote":{A=this.parse(k.tokens),c+=this.renderer.blockquote(A);continue}case"list":{for(D=k.ordered,O=k.start,F=k.loose,y=k.items.length,A="",f=0;f<y;f++)$=k.items[f],X=$.checked,re=$.task,V="",$.task&&(ne=this.renderer.checkbox(X),F?$.tokens.length>0&&$.tokens[0].type==="paragraph"?($.tokens[0].text=ne+" "+$.tokens[0].text,$.tokens[0].tokens&&$.tokens[0].tokens.length>0&&$.tokens[0].tokens[0].type==="text"&&($.tokens[0].tokens[0].text=ne+" "+$.tokens[0].tokens[0].text)):$.tokens.unshift({type:"text",text:ne}):V+=ne),V+=this.parse($.tokens,F),A+=this.renderer.listitem(V,re,X);c+=this.renderer.list(A,D,O);continue}case"html":{c+=this.renderer.html(k.text);continue}case"paragraph":{c+=this.renderer.paragraph(this.parseInline(k.tokens));continue}case"text":{for(A=k.tokens?this.parseInline(k.tokens):k.text;p+1<Se&&s[p+1].type==="text";)k=s[++p],A+=`
`+(k.tokens?this.parseInline(k.tokens):k.text);c+=a?this.renderer.paragraph(A):A;continue}default:{let fe='Token with "'+k.type+'" type was not found.';if(this.options.silent){console.error(fe);return}else throw new Error(fe)}}}return c}parseInline(s,a){a=a||this.renderer;let c="",p,f,g,y=s.length;for(p=0;p<y;p++){if(f=s[p],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[f.type]&&(g=this.options.extensions.renderers[f.type].call({parser:this},f),g!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(f.type))){c+=g||"";continue}switch(f.type){case"escape":{c+=a.text(f.text);break}case"html":{c+=a.html(f.text);break}case"link":{c+=a.link(f.href,f.title,this.parseInline(f.tokens,a));break}case"image":{c+=a.image(f.href,f.title,f.text);break}case"strong":{c+=a.strong(this.parseInline(f.tokens,a));break}case"em":{c+=a.em(this.parseInline(f.tokens,a));break}case"codespan":{c+=a.codespan(f.text);break}case"br":{c+=a.br();break}case"del":{c+=a.del(this.parseInline(f.tokens,a));break}case"text":{c+=a.text(f.text);break}default:{let w='Token with "'+f.type+'" type was not found.';if(this.options.silent){console.error(w);return}else throw new Error(w)}}}return c}},Vn.options=Vn.setOptions=function(i){return uu(Vn.defaults,i),xke(Vn.defaults),Vn},Vn.getDefaults=dJ,Vn.defaults=cv,Vn.use=function(...i){let s=uu({},...i),a=Vn.defaults.extensions||{renderers:{},childTokens:{}},c;i.forEach(p=>{if(p.extensions&&(c=!0,p.extensions.forEach(f=>{if(!f.name)throw new Error("extension name required");if(f.renderer){let g=a.renderers?a.renderers[f.name]:null;g?a.renderers[f.name]=function(...y){let w=f.renderer.apply(this,y);return w===!1&&(w=g.apply(this,y)),w}:a.renderers[f.name]=f.renderer}if(f.tokenizer){if(!f.level||f.level!=="block"&&f.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");a[f.level]?a[f.level].unshift(f.tokenizer):a[f.level]=[f.tokenizer],f.start&&(f.level==="block"?a.startBlock?a.startBlock.push(f.start):a.startBlock=[f.start]:f.level==="inline"&&(a.startInline?a.startInline.push(f.start):a.startInline=[f.start]))}f.childTokens&&(a.childTokens[f.name]=f.childTokens)})),p.renderer){let f=Vn.defaults.renderer||new sI;for(let g in p.renderer){let y=f[g];f[g]=(...w)=>{let S=p.renderer[g].apply(f,w);return S===!1&&(S=y.apply(f,w)),S}}s.renderer=f}if(p.tokenizer){let f=Vn.defaults.tokenizer||new oI;for(let g in p.tokenizer){let y=f[g];f[g]=(...w)=>{let S=p.tokenizer[g].apply(f,w);return S===!1&&(S=y.apply(f,w)),S}}s.tokenizer=f}if(p.walkTokens){let f=Vn.defaults.walkTokens;s.walkTokens=function(g){let y=[];return y.push(p.walkTokens.call(this,g)),f&&(y=y.concat(f.call(this,g))),y}}c&&(s.extensions=a),Vn.setOptions(s)})},Vn.walkTokens=function(i,s){let a=[];for(let c of i)switch(a=a.concat(s.call(Vn,c)),c.type){case"table":{for(let p of c.header)a=a.concat(Vn.walkTokens(p.tokens,s));for(let p of c.rows)for(let f of p)a=a.concat(Vn.walkTokens(f.tokens,s));break}case"list":{a=a.concat(Vn.walkTokens(c.items,s));break}default:Vn.defaults.extensions&&Vn.defaults.extensions.childTokens&&Vn.defaults.extensions.childTokens[c.type]?Vn.defaults.extensions.childTokens[c.type].forEach(function(p){a=a.concat(Vn.walkTokens(c[p],s))}):c.tokens&&(a=a.concat(Vn.walkTokens(c.tokens,s)))}return a},Vn.parseInline=function(i,s){if(typeof i>"u"||i===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof i!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected");s=uu({},Vn.defaults,s||{}),mJ(s);try{let a=dv.lexInline(i,s);return s.walkTokens&&Vn.walkTokens(a,s.walkTokens),Ap.parseInline(a,s)}catch(a){if(a.message+=`
Please report this to https://github.com/markedjs/marked.`,s.silent)return"<p>An error occurred:</p><pre>"+Eo(a.message+"",!0)+"</pre>";throw a}},Vn.Parser=Ap,Vn.parser=Ap.parse,Vn.Renderer=sI,Vn.TextRenderer=MU,Vn.Lexer=dv,Vn.lexer=dv.lex,Vn.Tokenizer=oI,Vn.Slugger=AU,Vn.parse=Vn,Vn.options,Vn.setOptions,Vn.use,Vn.walkTokens,Vn.parseInline,Ap.parse,dv.lex}),IJ,RJ,IU,OJ=C(()=>{Ne(),eI(),RJ=se(jy)(IJ||(IJ=G([`
  padding: 6px;
`]))),IU=RJ}),Xi,aI,PS,lI,DJ,LJ,NJ,RU,FJ,BJ,UJ,OU,VJ,jJ,zJ,HJ,GJ,kS,TS,$J,WJ,KJ,qJ,XJ,YJ,ZJ,QJ,JJ,eee,tee,nee,DU,MS=C(()=>{Xi=Z(Re()),wke(),Ne(),vr(),hn(),Fe(),kke(),_S(),OJ(),aI=({title:i,message:s})=>"".concat(i," ").concat(s),PS=(()=>{let i=new Map;return{add:s=>{let a=aI(s);i.has(a)?i.set(a,i.get(a)+1):i.set(a,1)},delete:s=>{let a=aI(s);i.has(a)&&i.get(a)>1?i.set(a,i.get(a)-1):i.delete(a)},clear:()=>{i.clear()},check:s=>i.has(aI(s))}})(),lI=(()=>{let i=new Map;return{add:s=>{i.has(s)?i.set(s,i.get(s)+1):i.set(s,1)},delete:s=>{i.has(s)&&i.get(s)>1?i.set(s,i.get(s)-1):i.delete(s)},clear:()=>{i.clear()},check:s=>i.has(s),get types(){return Array.of(...i.keys())}}})(),LJ=se.div(DJ||(DJ=G([`
  width: 100%;
  border-radius: 4px;
  display: flex;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr),RU=se.div(NJ||(NJ=G([`
  font-size: 14px;
  font-weight: bold;
  color: #fff;
`]))),BJ=se.div(FJ||(FJ=G([`
  flex: 1;
  flex-direction: column;
  width: 0;
  display: flex;
  padding: 16px 0;
  gap: 12px;
`]))),OU=se.div(UJ||(UJ=G([`
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;

  a {
    color: rgba(255, 255, 255, 0.9);
  }

  em {
    font-style: italic;
  }

  strong {
    font-weight: bold;
    color: #d5d5d5;
  }

  p {
    margin-bottom: 8px;
  }

  code {
    font-family: monospace;
    background: rgba(0, 0, 0, 0.3);
    padding: 1px 1px 2px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    white-space: pre-wrap;
  }

  pre > code {
    white-space: pre;
    display: block;
    overflow: auto;
    padding: 4px;
  }

  pre {
    white-space: pre-wrap;
    margin-bottom: 8px;
  }
`]))),jJ=se.button(VJ||(VJ=G([`
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding-left: 12px;
  padding-right: 12px;
  border-left: 1px solid rgba(255, 255, 255, 0.05);

  &:hover {
    background: rgba(255, 255, 255, 0.05);
  }
`]))),zJ={info:"#3b82f6",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},GJ=se.div(HJ||(HJ=G([`
  display: flex;
  justify-content: center;
  margin-left: 12px;
  padding-top: 21px;

  ::before {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 999999px;
    background-color: `,`;
  }
`])),({type:i})=>zJ[i]),kS=i=>(s,a,c=[],p=!1)=>{(p||!PS.check({title:s,message:a}))&&(PS.add({title:s,message:a}),lI.add(i),rI.custom(f=>Xi.default.createElement(LJ,null,Xi.default.createElement(GJ,{type:i}),Xi.default.createElement(BJ,null,Xi.default.createElement(RU,null,s),Xi.default.createElement(OU,{dangerouslySetInnerHTML:{__html:Vn.parse(a)}}),c.length>0&&Xi.default.createElement(OU,null,Xi.default.createElement("span",null,"Docs:"," ",c.map((g,y)=>Xi.default.createElement(Xi.Fragment,{key:y},y>0&&", ",Xi.default.createElement("a",{target:"_blank",href:g.url},g.title)))))),Xi.default.createElement(jJ,{onClick:()=>{rI.remove(f.id),PS.delete({title:s,message:a}),lI.delete(i)}},"Close")),{duration:1/0}))},TS={warning:kS("warning"),success:kS("success"),info:kS("info"),error:kS("error")},WJ=se.div($J||($J=G([`
  display: flex;
  justify-content: `,`;
  gap: 12px;
`])),({align:i})=>i==="center"?"center":"flex-end"),qJ=se.button(KJ||(KJ=G([`
  position: relative;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border: none;
  padding: 12px;
  color: #fff;
  overflow: hidden;

  ::before {
    content: '';
    position: absolute;
    inset: 0;
  }

  :hover::before {
    background: `,`;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr,({danger:i})=>i?"rgba(255, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"),YJ=se.div(XJ||(XJ=G([`
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: fixed;
  right: 92px;
  top: 50px;
  width: 500px;
  height: 85vh;
  min-height: 400px;
`]))),QJ=se.div(ZJ||(ZJ=G([`
  overflow: hidden;
  pointer-events: auto;
  border-radius: 4px;

  & > div {
    display: flex;
    flex-direction: column-reverse;
    gap: 8px;
    overflow: scroll;
    height: 100%;
  }
`]))),eee=se.div(JJ||(JJ=G([`
  width: fit-content;
  padding: 8px;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;
`]))),tee=()=>{let{hasNotifications:i}=DU();return Vy({enabled:!i},()=>Xi.default.createElement(IU,null,Xi.default.createElement(eee,null,Xi.default.createElement(RU,null,"No notifications"),"Notifications will appear here when you get them.")))},nee=()=>{var i;let{toasts:s,handlers:a}=kU(),{startPause:c,endPause:p}=a,f=(i=$n(me().atomP.ahistoric.pinNotifications))!=null?i:!1;return Xi.default.createElement(YJ,null,f?s.length>0&&Xi.default.createElement(QJ,{onMouseEnter:c,onMouseLeave:p},Xi.default.createElement("div",null,s.map(g=>Xi.default.createElement("div",{key:g.id},g.message(g))))):null,Xi.default.createElement(WJ,{align:"side"},f&&s.length>0&&Xi.default.createElement(qJ,{onClick:()=>{lI.clear(),PS.clear(),rI.remove()},danger:!0},"Clear")))},DU=()=>{let{toasts:i}=kU();return{hasNotifications:i.length>0}}});function LU(i,s){var a;let c=Object.values((a=(0,ree.val)(i.pointers.historic.sheetsById))!=null?a:{}),p=c.flatMap(g=>{var y;return Object.values((y=g==null?void 0:g.staticOverrides.byObject)!=null?y:{})}).flatMap(g=>Object.values(g??{})),f=[...c.flatMap(g=>{var y,w;return Object.values((w=(y=g==null?void 0:g.sequence)==null?void 0:y.tracksByObject)!=null?w:{})}).flatMap(g=>{var y;return Object.values((y=g==null?void 0:g.trackData)!=null?y:{})}).flatMap(g=>g==null?void 0:g.keyframes).map(g=>g==null?void 0:g.value)];return p.forEach(g=>{vt(g,y=>{f.push(y)},[])}),f.filter(g=>(g==null?void 0:g.type)&&(s?(g==null?void 0:g.type)==s:typeof(g==null?void 0:g.type)=="string")).map(g=>g.id).filter((g,y,w)=>g!==null&&g!==""&&w.indexOf(g)===y)}var ree,iee=C(()=>{ree=Mt,Je()});function oee(i,s){let a=new File([i],s),c=URL.createObjectURL(a),p=Object.assign(document.createElement("a"),{href:c,target:"_blank",rel:"noopener"});p.setAttribute("download",s),p.click(),setTimeout(()=>{URL.revokeObjectURL(c)},4e4)}var Ca,see,aee,lee,uee,cee,dee,hee,pee,fee,Tke=C(()=>{Fe(),dc(),uc(),Ca=Z(Re()),Ne(),IQ(),bke(),see=Z(_ke()),MS(),iee(),lee=se.div(aee||(aee=G([""]))),cee=se.div(uee||(uee=G([`
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
`]))),hee=se(cc)(dee||(dee=G([`
  display flex;
  flex-direction: column;
  gap: 1em;
  width: 280px;
  padding: 1em;
`]))),pee=({projects:i})=>{let s=i[0],a=s.address.projectId,c=a.replace(/[^\w\d'_\-]+/g," ").trim(),p="".concat(c,".theatre-project-state.json"),[f,g]=(0,Ca.useState)(!1),y=(0,Ca.useCallback)(()=>ye(void 0,null,function*(){var S,T;let I=LU(s),A=new Map;try{yield Promise.all(I.map(D=>ye(void 0,null,function*(){let O=s.assetStorage.getAssetUrl(D),F=yield fetch(O);F.ok&&A.set(D,yield F.blob())})))}catch{TS.error("Failed to access assets","Export aborted. Failed to access assets at ".concat((T=(S=s.config.assets)==null?void 0:S.baseUrl)!=null?T:"/",". This is likely due to a CORS issue."));return}if(A.size>0){let D=new see.default;for(let[F,V]of A)D.file(F,V);let O=yield D.generateAsync({type:"blob"});oee(O,"".concat(c,".assets.zip"))}let k=JSON.stringify(me().createContentOfSaveFile(s.address.projectId),null,2);oee(k,p),g(!0),setTimeout(()=>{g(!1)},2e3)}),[s,p]),w=lc({debugName:"ProjectDetails",pointerDistanceThreshold:50},()=>Ca.default.createElement(hee,null,Ca.default.createElement("p",null,"This will create a JSON file with the state of your project. You can commit this file to your git repo and include it in your production bundle."),Ca.default.createElement("p",null,"If your project uses assets, this will also create a zip file with all the assets that you can unpack in your public folder."),Ca.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Here is a quick guide on how to export to production.")));return Ca.default.createElement(Ca.default.Fragment,null,w.node,Ca.default.createElement(lee,null,Ca.default.createElement(eJ,{projectId:a}),Ca.default.createElement(cee,null,Ca.default.createElement(QA,{onMouseEnter:S=>w.open(S,S.target),onClick:f?void 0:y,disabled:f},f?"(Exported)":"Export ".concat(a," to JSON")))))},fee=pee}),Ip,mee,vee,gee,yee,bee,_ee,wee,xee,See,Eee,Mke=C(()=>{Ip=Z(Re()),Ne(),Gx(),vee=se.div(mee||(mee=G([`
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 24px;
`]))),yee=se.div(gee||(gee=G([`
  display: flex;
  flex-direction: column;
  gap: 11px;
  color: rgba(255, 255, 255, 0.9);
`]))),_ee=se.div(bee||(bee=G([`
  color: rgba(145, 145, 145, 0.8);
`]))),xee=se.a(wee||(wee=G([`
  color: #919191;
  font-size: 10px;
  text-decoration-color: #40434a;
  text-underline-offset: 3px;
`]))),See=()=>Ip.default.createElement(vee,null,Ip.default.createElement(yee,null,Ip.default.createElement(_ee,null,Ip.default.createElement(JF,null)),Ip.default.createElement("div",null,"Please select an object from the ",Ip.default.createElement("u",null,"Outline Menu")," to see its properties.")),Ip.default.createElement(xee,{href:"https://www.theatrejs.com/docs/latest/manual/objects",target:"_blank"},"Learn more about Objects")),Eee=See});function Cee(){let[i,s]=(0,NU.useState)(!1),a=(0,NU.useMemo)(()=>{let c=new Set;return()=>{let p=()=>{c.delete(p),s(c.size>0)};return c.add(p),s(!0),p}},[]);return[i,a]}var NU,Pee=C(()=>{NU=Z(Re())}),ei,Hy,kee,Tee,uI,Mee,FU,Aee,BU,Iee,UU,AS,Ree,Oee,cI,hv,VU=C(()=>{wp(),hn(),ei=Z(Re()),Ne(),Wn(),Md(),vr(),vke(),Tke(),Fe(),gK(),Hy=Mt,Mke(),Pee(),lv(),kee="32px",uI=se.div(Tee||(Tee=G([`
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  position: fixed;
  right: 8px;
  top: 50px;
  // Temporary, see comment about CSS grid in SingleRowPropEditor.
  width: 280px;
  height: fit-content;
  z-index: `,`;

  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border-radius: 2px;

  display: `,`;

  &:hover {
    display: block;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr,Ey.propsPanel,({pin:i})=>i?"block":"none"),FU=se.div(Mee||(Mee=G([`
  margin: 0 10px;
  color: #919191;
  font-weight: 500;
  font-size: 10px;
  user-select: none;
  `,`;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`])),hr),BU=se.div(Aee||(Aee=G([`
  height: `,`;
  display: flex;
  align-items: center;
`])),kee),UU=se.div(Iee||(Iee=G([`
  `,`;
  max-height: calc(100vh - 100px);
  overflow-y: scroll;
  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
  padding: 0;
  user-select: none;

  /* Set the font-size for input values in the detail panel */
  font-size: 12px;
`])),hr),AS=(0,ei.createContext)([!1,()=>()=>{}]),Ree=i=>{let s=$n(me().atomP.ahistoric.pinDetails)!==!1,a=vK("right");(0,ei.useLayoutEffect)(()=>{cI.set(a)},[a]),(0,ei.useEffect)(()=>()=>{hv.set(!1),cI.set(!1)},[]);let[c]=(0,ei.useContext)(AS),p=s||a||c,[f,g]=(0,ei.useState)(null);return eZ(f),Un(()=>{let y=_p(),w=y.find(Dt);if(w)return ei.default.createElement(uI,{"data-testid":"DetailPanel-Object",pin:p,ref:g,onMouseEnter:()=>{hv.set(!0)},onMouseLeave:()=>{hv.set(!1)}},ei.default.createElement(BU,null,ei.default.createElement(FU,{title:"".concat(w.sheet.address.sheetId,": ").concat(w.sheet.address.sheetInstanceId," > ").concat(w.address.objectKey)},ei.default.createElement(bp,null,w.sheet.address.sheetId," "),ei.default.createElement(Hx,null,":",""),ei.default.createElement(bp,null,w.sheet.address.sheetInstanceId," "),ei.default.createElement(Hx,null,""),ei.default.createElement(bp,null,w.address.objectKey))),ei.default.createElement(UU,null,ei.default.createElement(TQ,{objects:[w]})));let S=y.find(nt);return S?ei.default.createElement(uI,{pin:p},ei.default.createElement(BU,null,ei.default.createElement(FU,{title:"".concat(S.address.projectId)},ei.default.createElement(bp,null,S.address.projectId," "))),ei.default.createElement(UU,null,ei.default.createElement(fee,{projects:[S]}))):ei.default.createElement(uI,{pin:p,onMouseEnter:()=>{hv.set(!0)},onMouseLeave:()=>{hv.set(!1)}},ei.default.createElement(Eee,null))},[p])},Oee=()=>{let i=Cee();return ei.default.createElement(AS.Provider,{value:i},ei.default.createElement(Ree,null))},cI=new Hy.Atom(!1),hv=new Hy.Atom(!1),(0,Hy.prism)(()=>{let i=(0,Hy.val)(hv.prism),s=(0,Hy.val)(cI.prism);return i||s})}),jU,dI,hI,zU,Gy,Dee,HU,$y=C(()=>{jU=Mt,hn(),Fe(),Pee(),dI=Z(Re()),$B(),hI=(i,s)=>{let a=i.left/s.width,c=(i.left+i.width)/s.width,p=i.top/s.height,f=(i.height+i.top)/s.height;return{edges:{left:a<=.5?{from:"screenLeft",distance:a}:{from:"screenRight",distance:1-a},right:c<=.5?{from:"screenLeft",distance:c}:{from:"screenRight",distance:1-c},top:p<=.5?{from:"screenTop",distance:p}:{from:"screenBottom",distance:1-p},bottom:f<=.5?{from:"screenTop",distance:f}:{from:"screenBottom",distance:1-f}}}},zU=dI.default.createContext(null),Gy=()=>(0,dI.useContext)(zU),Dee=({panelId:i,children:s,defaultPosition:a,minDims:c})=>{let p=IA(800,200),[f,g]=Cee(),{stuff:y}=Un(()=>{var w;let{edges:S}=(w=(0,jU.val)(me().atomP.historic.panelPositions[i]))!=null?w:a,T=Math.floor(p.width*(S.left.from==="screenLeft"?S.left.distance:1-S.left.distance)),I=Math.floor(p.width*(S.right.from==="screenLeft"?S.right.distance:1-S.right.distance)),A=Math.floor(p.height*(S.top.from==="screenTop"?S.top.distance:1-S.top.distance)),k=Math.floor(p.height*(S.bottom.from==="screenTop"?S.bottom.distance:1-S.bottom.distance)),D=Math.max(I-T,c.width),O=Math.max(k-A,c.height);return{stuff:{dims:jU.prism.memo("dims",()=>({width:D,left:T,top:A,height:O}),[D,T,A,O]),panelId:i,minDims:c,boundsHighlighted:f,addBoundsHighlightLock:g}}},[i,p,f,g]);return dI.default.createElement(zU.Provider,{value:y},s)},HU=Dee}),IS,Lee,Nee,Fee,GU,Bee=C(()=>{mr(),Fe(),no(),IS=Z(Re()),Ne(),$y(),Ea(),Jr(),Md(),Nee=se.div(Lee||(Lee=G([`
  cursor: move;
`]))),Fee=i=>{let s=Gy(),a=(0,IS.useRef)(s);a.current=s;let[c,p]=sr(null),f=(0,IS.useMemo)(()=>({debugName:"PanelDragZone",lockCursorTo:"move",onDragStart(){let S=a.current,T,I=s.addBoundsHighlightLock();return{onDrag(A,k){let D=z(j({},S.dims),{top:li(S.dims.top+k,0,window.innerHeight-ic),left:li(S.dims.left+A,-S.dims.width+ic,window.innerWidth-ic)}),O=hI(D,{width:window.innerWidth,height:window.innerHeight});T==null||T.discard(),T=me().tempTransaction(({stateEditors:F})=>{F.studio.historic.panelPositions.setPanelPosition({position:O,panelId:S.panelId})})},onDragEnd(A){I(),A?T==null||T.commit():T==null||T.discard()}}}}),[]),[g]=xi(p,f);ul(g,"dragging","move");let[y,w]=(0,IS.useMemo)(()=>{let S;return[function(){if(S){let T=S;S=void 0,T()}S=s.addBoundsHighlightLock()},function(){if(S){let T=S;S=void 0,T()}}]},[]);return IS.default.createElement(Nee,z(j({},i),{ref:c,onMouseEnter:y,onMouseLeave:w}))},GU=Fee}),pI,Uee,$U,Vee,WU,jee,KU,zee,Hee,Gee,$ee,Wee,qU,Kee,qee,Xee,Yee,Zee,RS,Qee,Jee,ete,tte,nte,rte,ite,ote,ste,XU,ate,Bd,Ake=C(()=>{mr(),Fe(),no(),Sa(),pI=Z(Re()),Ne(),$y(),vr(),Jr(),Md(),$U=se.div(Uee||(Uee=G([`
  position: absolute;
  `,`;
  &:after {
    position: absolute;
    inset: -5px;
    display: block;
    content: ' ';
  }

  opacity: 0;
  background-color: #478698;

  &.isHighlighted {
    opacity: 0.7;
  }

  &.isDragging {
    opacity: 1;
    /* background-color: `,`; */
  }

  &:hover {
    opacity: 1;
  }
`])),hr,vy(.2,"#478698")),WU=se($U)(Vee||(Vee=G([`
  /**
  The horizintal/vertical resize handles have z-index:-1 and are offset 1px outside of the panel
  to make sure they don't occlude any element that pops out of the panel (like the Playhead in SequenceEditorPanel).

  This means that panels will always need an extra 1px margin for their resize handles to be visible, but that's not a problem
  that we have to deal with right now (if it is at all a problem).
  
   */
  z-index: -1;
`]))),KU=se(WU)(jee||(jee=G([`
  left: 0px;
  right: 0px;
  height: 1px;
`]))),Hee=se(KU)(zee||(zee=G([`
  top: -1px;
`]))),$ee=se(KU)(Gee||(Gee=G([`
  bottom: -1px;
`]))),qU=se(WU)(Wee||(Wee=G([`
  z-index: -1;
  top: -1px;
  bottom: -1px;
  width: 1px;
`]))),qee=se(qU)(Kee||(Kee=G([`
  left: -1px;
`]))),Yee=se(qU)(Xee||(Xee=G([`
  right: -1px;
`]))),RS=se($U)(Zee||(Zee=G([`
  // The angles have z-index: 10 to make sure they _do_ occlude other elements in the panel.
  z-index: 10;
  width: 8px;
  height: 8px;
`]))),Jee=se(RS)(Qee||(Qee=G([`
  top: 0;
  left: 0;
`]))),tte=se(RS)(ete||(ete=G([`
  top: 0;
  right: 0;
`]))),rte=se(RS)(nte||(nte=G([`
  bottom: 0;
  left: 0;
`]))),ote=se(RS)(ite||(ite=G([`
  bottom: 0;
  right: 0;
`]))),ste={Top:Hee,TopLeft:Jee,TopRight:tte,Bottom:$ee,BottomLeft:rte,BottomRight:ote,Left:qee,Right:Yee},XU={Top:"ns-resize",Bottom:"ns-resize",Left:"ew-resize",Right:"ew-resize",TopLeft:"nw-resize",TopRight:"ne-resize",BottomLeft:"sw-resize",BottomRight:"se-resize"},ate=({which:i})=>{let s=Gy(),a=(0,pI.useRef)(s);a.current=s;let[c,p]=sr(null),f=(0,pI.useMemo)(()=>({debugName:"PanelResizeHandle",lockCursorTo:XU[i],onDragStart(){let S,T=a.current,I=s.addBoundsHighlightLock();return{onDrag(A,k){let D=j({},T.dims);if(i.startsWith("Bottom"))D.height=Math.max(D.height+k,T.minDims.height);else if(i.startsWith("Top")){let F=D.top+D.height,V=li(D.top+k,0,Math.min(F-T.minDims.height,window.innerHeight-ic)),$=F-V;D.height=$,D.top=V}if(i.endsWith("Left")){let F=D.left+D.width,V=Math.min(D.left+A,Math.min(F-T.minDims.width,window.innerWidth-ic)),$=F-V;D.width=$,D.left=V}else i.endsWith("Right")&&(D.width=Math.max(D.width+A,Math.max(T.minDims.width,ic-T.dims.left)));let O=hI(D,{width:window.innerWidth,height:window.innerHeight});S==null||S.discard(),S=me().tempTransaction(({stateEditors:F})=>{F.studio.historic.panelPositions.setPanelPosition({position:O,panelId:T.panelId})})},onDragEnd(A){I(),A?S==null||S.commit():S==null||S.discard()}}}}),[i]),[g]=xi(p,f),y=ste[i],w=i.length<=6;return pI.default.createElement(y,{ref:c,className:[g?"isDragging":"",s.boundsHighlighted&&w?"isHighlighted":""].join(" "),style:{cursor:XU[i]}})},Bd=ate}),cu,lte,ute,Ike=C(()=>{cu=Z(Re()),Ake(),lte=i=>cu.default.createElement(cu.default.Fragment,null,cu.default.createElement(Bd,{which:"Bottom"}),cu.default.createElement(Bd,{which:"Top"}),cu.default.createElement(Bd,{which:"Left"}),cu.default.createElement(Bd,{which:"Right"}),cu.default.createElement(Bd,{which:"TopLeft"}),cu.default.createElement(Bd,{which:"TopRight"}),cu.default.createElement(Bd,{which:"BottomLeft"}),cu.default.createElement(Bd,{which:"BottomRight"})),ute=lte}),fI,cte,dte,hte,YU,pte=C(()=>{vr(),fI=Z(Re()),Ne(),$y(),Ike(),dte=se.div(cte||(cte=G([`
  position: absolute;
  user-select: none;
  box-sizing: border-box;
  `,`;
  /* box-shadow: 1px 2px 10px -5px black; */

  z-index: 1000;
`])),hr),hte=fI.default.forwardRef((i,s)=>{let a=Gy(),c=i,{style:p,children:f}=c,g=U(c,["style","children"]);return fI.default.createElement(dte,z(j({ref:s},g),{style:j({width:a.dims.width+"px",height:a.dims.height+"px",top:a.dims.top+"px",left:a.dims.left+"px"},p??{})}),fI.default.createElement(ute,null),f)}),YU=hte}),Rke=K((i,s)=>{(function(a,c){typeof i=="object"&&typeof s<"u"?c(i,Re()):(a=typeof globalThis<"u"?globalThis:a||self,c(a.ReactErrorBoundary={},a.React))})(i,function(a,c){function p(k){if(k&&k.__esModule)return k;var D=Object.create(null);return k&&Object.keys(k).forEach(function(O){if(O!=="default"){var F=Object.getOwnPropertyDescriptor(k,O);Object.defineProperty(D,O,F.get?F:{enumerable:!0,get:function(){return k[O]}})}}),D.default=k,Object.freeze(D)}var f=p(c);function g(k,D){return g=Object.setPrototypeOf||function(O,F){return O.__proto__=F,O},g(k,D)}function y(k,D){k.prototype=Object.create(D.prototype),k.prototype.constructor=k,g(k,D)}var w=function(k,D){return k===void 0&&(k=[]),D===void 0&&(D=[]),k.length!==D.length||k.some(function(O,F){return!Object.is(O,D[F])})},S={error:null},T=function(k){y(D,k);function D(){for(var F,V=arguments.length,$=new Array(V),X=0;X<V;X++)$[X]=arguments[X];return F=k.call.apply(k,[this].concat($))||this,F.state=S,F.updatedWithError=!1,F.resetErrorBoundary=function(){for(var re,ne=arguments.length,ae=new Array(ne),Se=0;Se<ne;Se++)ae[Se]=arguments[Se];F.props.onReset==null||(re=F.props).onReset.apply(re,ae),F.reset()},F}D.getDerivedStateFromError=function(F){return{error:F}};var O=D.prototype;return O.reset=function(){this.updatedWithError=!1,this.setState(S)},O.componentDidCatch=function(F,V){var $,X;($=(X=this.props).onError)==null||$.call(X,F,V)},O.componentDidMount=function(){var F=this.state.error;F!==null&&(this.updatedWithError=!0)},O.componentDidUpdate=function(F){var V=this.state.error,$=this.props.resetKeys;if(V!==null&&!this.updatedWithError){this.updatedWithError=!0;return}if(V!==null&&w(F.resetKeys,$)){var X,re;(X=(re=this.props).onResetKeysChange)==null||X.call(re,F.resetKeys,$),this.reset()}},O.render=function(){var F=this.state.error,V=this.props,$=V.fallbackRender,X=V.FallbackComponent,re=V.fallback;if(F!==null){var ne={error:F,resetErrorBoundary:this.resetErrorBoundary};if(f.isValidElement(re))return re;if(typeof $=="function")return $(ne);if(X)return f.createElement(X,ne);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},D}(f.Component);function I(k,D){var O=function(V){return f.createElement(T,D,f.createElement(k,V))},F=k.displayName||k.name||"Unknown";return O.displayName="withErrorBoundary("+F+")",O}function A(k){var D=f.useState(null),O=D[0],F=D[1];if(k!=null)throw k;if(O!=null)throw O;return F}a.ErrorBoundary=T,a.useErrorHandler=A,a.withErrorBoundary=I,Object.defineProperty(a,"__esModule",{value:!0})})}),Vo,fte,mte,vte,gte,yte,bte,_te,wte,xte,Ste,Ete,Cte,Pte,kte,Tte,Mte,Ate,Ite,Rte,Oke=C(()=>{Vo=Z(Re()),Ne(),Md(),$y(),Bee(),pte(),fte=Z(Rke()),Ry(),Fe(),Md(),mte={edges:{left:{from:"screenLeft",distance:.3},right:{from:"screenRight",distance:.3},top:{from:"screenTop",distance:.3},bottom:{from:"screenBottom",distance:.3}}},vte={width:300,height:300},gte=({paneInstance:i})=>Vo.default.createElement(HU,{panelId:"pane-".concat(i.instanceId),defaultPosition:mte,minDims:vte},Vo.default.createElement(Ite,{paneInstance:i})),bte=se(YU)(yte||(yte=G([`
  display: flex;
  flex-direction: column;

  box-shadow: 0px 5px 12px -4px rgb(0 0 0 / 22%);
  z-index: `,`;
`])),Ey.pluginPanes),wte=se.div(_te||(_te=G([`
  width: 100%;
`]))),Ste=se.div(xte||(xte=G([`
  display: flex;
  align-items: center;
  opacity: 1;
  position: absolute;
  right: 4px;
  top: 0;
  bottom: 0;
`]))),Cte=se.button(Ete||(Ete=G([`
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 2px;
  font-size: 11px;
  height: 10px;
  width: 18px;
  color: #adadadb3;
  background: transparent;
  border: none;
  cursor: pointer;
  &:hover {
    color: white;
  }
`]))),kte=se(m7)(Pte||(Pte=G([`
  position: relative;
  overflow: hidden;

  &:after {
    z-index: 10;
    position: absolute;
    inset: 0;
    display: block;
    content: ' ';
    pointer-events: none;

    #pointer-root:not(.normal) & {
      pointer-events: auto;
    }
  }
`]))),Mte=se.div(Tte||(Tte=G([`
  padding: 12px;

  & > pre {
    border: 1px solid #ff62624f;
    background-color: rgb(255 0 0 / 5%);
    margin: 8px 0;
    padding: 8px;
    font-family: monospace;
    overflow: scroll;
    color: #ff9896;
  }
`]))),Ate=i=>Vo.default.createElement(Mte,null,"An Error occurred rendering this pane. Open the console for more info.",Vo.default.createElement("pre",null,JSON.stringify({message:i.error.message,stack:i.error.stack},null,2))),Ite=({paneInstance:i})=>{let[s,a]=(0,Vo.useState)(null),c=i.definition.mount;(0,Vo.useLayoutEffect)(()=>{if(!s)return;let f=c({paneId:i.instanceId,node:s});if(typeof f=="function")return f},[s,c,i.instanceId]);let p=(0,Vo.useCallback)(()=>{me().paneManager.destroyPane(i.instanceId)},[i]);return Vo.default.createElement(bte,{"data-testid":"theatre-pane-wrapper-".concat(i.instanceId)},Vo.default.createElement(GU,null,Vo.default.createElement(ZF,null,Vo.default.createElement(Ste,null,Vo.default.createElement(Cte,{onClick:p,title:"Close Pane"},Vo.default.createElement(NCe,null))),Vo.default.createElement(wte,null,i.instanceId))),Vo.default.createElement(fte.ErrorBoundary,{FallbackComponent:Ate},Vo.default.createElement(kte,{"data-testid":"theatre-pane-content-".concat(i.instanceId),ref:a})))},Rte=gte}),ZU,QU,Ote=C(()=>{ZU=Mt,QU=(i,s)=>{let a=ZU.prism.memo(i,()=>new ZU.Atom(s),[]);return a.set(s),a}});function Dte(i,s){(0,Lte.useLayoutEffect)(()=>{if(!i||s.type!=="propWithChildren"&&s.type!=="primitiveProp"&&s.type!=="sheetObject")return;let a=null,c=z(j({},s.sheetObject.address),{pathToProp:s.type==="sheetObject"?[]:s.pathToProp});function p(){a=KA.replaceLock(c,()=>{})}function f(){a==null||a()}return i.addEventListener("mouseenter",p),i.addEventListener("mouseleave",f),()=>{a==null||a(),i.removeEventListener("mouseenter",p),i.removeEventListener("mouseleave",f)}},[i])}var Lte,Nte=C(()=>{Lte=Z(Re()),vU()}),Rp,Fte,JU,Bte,eV,Ute,tV,Vte,jte,zte,Hte,Gte,$te,Wte,mI,vI=C(()=>{vr(),Rp=Z(Re()),Ry(),Ne(),sv(),Nte(),JU=se.li(Fte||(Fte=G([`
  --depth: `,`;
  margin: 0;
  padding: 0;
  list-style: none;
`])),i=>i.depth),eV=se.div(Bte||(Bte=G([`
  border-bottom: 1px solid #7695b705;
`]))),tV=se(eV)(Ute||(Ute=G([`
  padding-left: calc(8px + var(--depth) * 20px);

  display: flex;
  align-items: stretch;
  color: `,`;

  box-sizing: border-box;

  `,`;
`])),Sy.panel.body.compoudThing.label.color,i=>i.isSelected&&"background: blue"),jte=se.span(Vte||(Vte=G([`
  `,`;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding-right: 4px;
  line-height: 26px;
  flex-wrap: nowrap;

  `,`:hover & {
    color: #ccc;
  }
`])),Pp,tV),Hte=se.span(zte||(zte=G([`
  width: 12px;
  padding: 8px;
  font-size: 9px;
  display: flex;
  align-items: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),i=>i.isCollapsed?0:90,i=>i.isCollapsed?15:75),$te=se.ul(Gte||(Gte=G([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),Wte=({leaf:i,label:s,children:a,isSelectable:c,isSelected:p,toggleSelect:f,toggleCollapsed:g,isCollapsed:y})=>{let w=Array.isArray(a)&&a.length>0,S=(0,Rp.useRef)(null);return Dte(S.current,i),i.shouldRender?Rp.default.createElement(JU,{depth:i.depth},Rp.default.createElement(tV,{ref:S,style:{height:i.nodeHeight+"px"},isSelectable:c===!0,isSelected:p===!0,onClick:f,isEven:i.n%2===0},Rp.default.createElement(Hte,{isCollapsed:y,onClick:g},Rp.default.createElement(lq,null)),Rp.default.createElement(jte,null,s)),w&&Rp.default.createElement($te,null,a)):null},mI=Wte});function Dke(i,s){return s.every((a,c)=>a===i[c])}function Lke(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;a++)if(i[a]!==s[a])return!1;return!0}function gI(i){var s;let a=[];for(;;){let c=a.length,p=(s=i[0])==null?void 0:s[c];if(p===void 0)return a;for(let f of i)if(p!==f[c])return a;a.push(p)}}var mc,yI,vc=C(()=>{DA(),mc=rS(i=>JSON.stringify(i)),yI=i=>JSON.parse(i)});function Nke(i,s){let a=(0,nV.useRef)({combo:i,listener:s});a.current={combo:i,listener:s},(0,nV.useEffect)(()=>{function c(g){g.key===a.current.combo&&a.current.listener({down:!0,event:g})}function p(g){g.key===a.current.combo&&a.current.listener({down:!1,event:g})}function f(g){a.current.listener({down:!1,event:void 0})}return document.addEventListener("keydown",c),document.addEventListener("keyup",p),window.addEventListener("blur",f),()=>{document.removeEventListener("keydown",c),document.removeEventListener("keyup",p),window.removeEventListener("blur",f)}},[])}var nV,Fke=C(()=>{nV=Z(Re())});function Kte(i){let[s,a]=(0,qte.useState)(!1);return Nke(i,({down:c})=>{a(c)}),s}var qte,Xte=C(()=>{qte=Z(Re()),Fke()});function Bke(i){let s=(0,rV.useMemo)(()=>new Yte.Atom(i),[]);return(0,rV.useLayoutEffect)(()=>{s.set(i)},[i]),s}var Yte,rV,Uke=C(()=>{Yte=Mt,rV=Z(Re())});function Zte(i,s,a){let c=(0,iV.pointer)({root:{},path:[]}),p=s(c);up(i,(0,iV.getPointerParts)(p).path,a)}var iV,Vke=C(()=>{iV=Mt,Z0()}),bI,Qte,As,du=C(()=>{bI="data-pos",Qte={checkIfMouseEventSnapToPos(i,s){let a=i.composedPath().find(c=>c instanceof Element&&c!==(s==null?void 0:s.ignore)&&c.hasAttribute(bI));if(a){let c=parseFloat(a.getAttribute(bI));if(isFinite(c))return c}return null},includePositionSnapAttrs(i){return{[bI]:i}}},As=Qte});function _I(i){let s=i.type==="sheet"?zke(i):oV(i);return{byPosition:jke(s),tracks:s}}function jke(i){let s=new Map;for(let a of i)for(let c of a.data.keyframes){let p=s.get(c.position);p||(p=[],s.set(c.position,p)),p.push({kf:c,track:a,itemKey:ho.forTrackKeyframe(a.sheetObject,a.id,c.id)})}return s}function zke(i){return i.children.flatMap(oV)}function oV(i){return i.children.flatMap(s=>s.type==="propWithChildren"?oV(s):Hke(s))}function Hke(i){let s=i.sheetObject,a=s.address.projectId,c=me().atomP.historic.coreByProject[a].sheetsById[s.address.sheetId].sequence.tracksByObject[s.address.objectKey],p=(0,wI.val)(c.trackIdByPropPath[mc(i.pathToProp)]);if(!p)return[];let f=(0,wI.val)(c.trackData[p]);return f?[{id:p,data:f,sheetObject:s}]:[]}function Gke(i,s){return rs(i.children.flatMap(a=>sV(a,s)))}function sV(i,s){return rs(i.children.flatMap(a=>a.type==="propWithChildren"?sV(a,s):$ke(a,s)))}function $ke(i,s){var a,c;let p=i.sheetObject,f=p.address.projectId,g=me().atomP.historic.coreByProject[f].sheetsById[p.address.sheetId].sequence.tracksByObject[p.address.objectKey],y=(0,wI.val)(g.trackIdByPropPath[mc(i.pathToProp)]);return y?(c=(a=s[p.address.objectKey])==null?void 0:a[y])!=null?c:[]:[]}var wI,Wy=C(()=>{Fe(),wI=Mt,Nd(),vc(),Jr()});function Wke(i,s){let[a,c]=sr(null),p=xp("useCaptureSelection");return xi(s,(0,Ky.useMemo)(()=>({debugName:"DopeSheetSelectionView/useCaptureSelection",dontBlockMouseDown:!0,lockCSSCursorTo:"cell",onDragStart(f){if(!f.shiftKey||f.target instanceof HTMLInputElement)return!1;let g=s.getBoundingClientRect(),y=f.clientX-g.left-(0,dl.val)(i.scaledSpace.leftPadding),w=(0,dl.val)(i.scaledSpace.toUnitSpace)(y);return a.current={h:[w,w],v:[f.clientY-g.top,f.clientY-g.top]},(0,dl.val)(i.selectionAtom).set({current:void 0}),{onDrag(S,T,I){let A=s.getBoundingClientRect(),k=I.clientX-A.left-(0,dl.val)(i.scaledSpace.leftPadding),D=(0,dl.val)(i.scaledSpace.toUnitSpace)(k);a.current={h:[a.current.h[0],D],v:[a.current.v[0],I.clientY-A.top]};let O=aV.boundsToSelection(p,(0,dl.val)(i),a.current);(0,dl.val)(i.selectionAtom).set({current:O})},onDragEnd(S){a.current=null}}}}),[i,s,a])),c}var dl,Ky,Op,Jte,ene,tne,aV,nne,rne,lV,ine,one,Kke=C(()=>{Fe(),no(),Xte(),Uke(),Vke(),mr(),hn(),dl=Mt,Ky=Z(Re()),Ne(),du(),Wy(),Sp(),Op=5,ene=se.div(Jte||(Jte=G([`
  cursor: `,`;
`])),i=>i.isShiftDown?"cell":"default"),tne=({layoutP:i,children:s,height:a})=>{let[c,p]=sr(null),f=Kte("Shift"),g=Wke(i,p),y=(0,Ky.useRef)(g);return y.current=g,Ky.default.createElement(ene,{style:{height:a+"px"},ref:c,isShiftDown:f,className:"selectionview"},g&&Ky.default.createElement(ine,{state:g,layoutP:i}),s)},(i=>{let s=(g,y,w,S,T)=>{let I=_I(w);if(w.top+w.nodeHeight/2+Op>S.v[0]&&w.top+w.nodeHeight/2-Op<S.v[1])for(let[A,k]of I.byPosition){let D=y.scaledSpace.toUnitSpace(Op);if(!(A+D<=S.h[0]||A-D>=S.h[1]))for(let O of k)Zte(T,F=>F[O.track.sheetObject.address.objectKey].byTrackId[O.track.id].byKeyframeId[O.kf.id],!0)}c(g,y,w,S,T)},a={sheet(g,y,w,S,T){s(g,y,w,S,T)},propWithChildren(g,y,w,S,T){s(g,y,w,S,T)},sheetObject(g,y,w,S,T){s(g,y,w,S,T)},primitiveProp(g,y,w,S,T){let{sheetObject:I,trackId:A}=w,k=(0,dl.val)(me().atomP.historic.coreByProject[I.address.projectId].sheetsById[I.address.sheetId].sequence.tracksByObject[I.address.objectKey].trackData[A]);if(!(S.v[0]>w.top+w.heightIncludingChildren/2+Op||w.top+w.heightIncludingChildren/2-Op>S.v[1])){for(let D of k.keyframes)if(!(D.position+y.scaledSpace.toUnitSpace(Op)<=S.h[0])){if(D.position-y.scaledSpace.toUnitSpace(Op)>=S.h[1])break;Zte(T,O=>O[I.address.objectKey].byTrackId[A].byKeyframeId[D.id],!0)}}}},c=(g,y,w,S,T)=>{if("children"in w)for(let I of w.children)p(g,y,I,S,T)};function p(g,y,w,S,T){if(!w.shouldRender||S.v[0]>w.top+w.heightIncludingChildren||w.top>S.v[1])return;let I=a[w.type];I?I(g,y,w,S,T):c(g,y,w,S,T)}function f(g,y,w){let S={};w=lV(w);let T=y.tree;p(g.utilFor.internal(),y,T,w,S);let I=y.tree.sheet;return{type:"DopeSheetSelection",byObjectKey:S,getDragHandlers(A){return{debugName:"DopeSheetSelectionView/boundsToSelection",onDragStart(){let k,D=y.scaledSpace.toUnitSpace;return{onDrag(O,F,V){k&&(k.discard(),k=void 0);let $=As.checkIfMouseEventSnapToPos(V,{ignore:A.domNode}),X=$!=null?$-A.positionAtStartOfDrag:D(O);k=me().tempTransaction(({stateEditors:re})=>{let ne=re.coreByProject.historic.sheetsById.sequence.transformKeyframes;for(let ae of Object.keys(S)){let{byTrackId:Se}=S[ae];for(let fe of Object.keys(Se)){let{byKeyframeId:ge}=Se[fe];ne({trackId:fe,keyframeIds:Object.keys(ge),translate:X,scale:1,origin:0,snappingFunction:I.getSequence().closestGridPosition,objectKey:ae,projectId:A.projectId,sheetId:A.sheetId})}}})},onDragEnd(O){O?k==null||k.commit():k==null||k.discard()}}}}},delete(){me().transaction(({stateEditors:A})=>{let k=A.coreByProject.historic.sheetsById.sequence.deleteKeyframes;for(let D of Object.keys(S)){let{byTrackId:O}=S[D];for(let F of Object.keys(O)){let{byKeyframeId:V}=O[F];k(z(j({},I.address),{objectKey:D,trackId:F,keyframeIds:Object.keys(V)}))}}})}}}i.boundsToSelection=f})(aV||(aV={})),rne=se.div(nne||(nne=G([`
  position: absolute;
  background: rgba(255, 255, 255, 0.1);
  border: 1px dashed rgba(255, 255, 255, 0.4);
  box-sizing: border-box;
`]))),lV=i=>({h:[...i.h].sort((s,a)=>s-a),v:[...i.v].sort((s,a)=>s-a)}),ine=({state:i,layoutP:s})=>{let a=Bke(i);return Un(()=>{let c=(0,dl.val)(a.pointer),p=lV(c),f=(0,dl.val)(s.scaledSpace.fromUnitSpace),g=(0,dl.val)(s.scaledSpace.leftPadding),y=p.h.map(f).map(A=>A+g),w=p.v[0],S=p.v[1]-p.v[0],T=y[0],I=y[1]-y[0];return Ky.default.createElement(rne,{style:{top:w+"px",height:S+"px",left:T+"px",width:I+"px"}})},[s,a])},one=tne}),pv,sne,ane,uV,lne,une,cne,dne=C(()=>{Cy(),pv=Z(Re()),Ne(),Wd(),ane=se.div(sne||(sne=G([`
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  overflow-x: hidden;
  overflow-y: scroll;
  z-index: `,`;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
`])),()=>Pc.scrollableArea),uV=(0,pv.createContext)(iu),lne=()=>(0,pv.useContext)(uV),une=i=>{let s=(0,pv.useRef)(null),a=(0,pv.useCallback)(c=>{s.current.scrollBy(0,c.deltaY)},[]);return pv.default.createElement(uV.Provider,{value:a},pv.default.createElement(ane,{ref:s},i.children))},cne=une}),hne,qke=C(()=>{hne='data:image/svg+xml,<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">%0A  <path d="M1 7V1H7" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M7 33H1L1 27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M33 27V33H27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M27 1L33 1V7" stroke="%2374FFDE" stroke-width="0.25" />%0A</svg>'}),hl,xI=C(()=>{hl=(i,s=i)=>`
  left: `.concat(i*-.5,`px;
  top: `).concat(s*-.5,`px;
  width: `).concat(i,`px;
  height: `).concat(s,`px;
`)}),SI,pne,fne,Xke=C(()=>{SI=Mt,pne=(0,SI.prism)(()=>{let[i,s]=SI.prism.state("pos",null);return SI.prism.effect("setupListeners",()=>{let a=c=>{s(c)};return document.addEventListener("mousemove",a),()=>{document.removeEventListener("mousemove",a)}},[]),i}),fne=pne}),Ud,Is,OS,mne,vne,gne,yne,Vd,gc,EI,bne,_ne,jo=C(()=>{Ud=Mt,Xke(),Jr(),Is=Z(Re()),OS=(0,Is.createContext)(null),mne=0,vne=({children:i,layoutP:s})=>{let a=(0,Is.useMemo)(()=>new Ud.Atom([]),[]),c=(0,Is.useMemo)(()=>(0,Ud.prism)(()=>{let g=Ud.prism.memo("p",()=>bne(s),[s]).getValue(),y=(0,Ud.val)(a.pointer);return y.length>0?yd(y).position:g}),[s]),p=(0,Is.useCallback)(()=>{let g=mne++;return a.reduce(y=>[...y,{id:g,position:[-1,0]}]),{set:y=>{a.reduce(w=>{let S=w.findIndex(I=>I.id===g);if(S===-1)return console.warn("Lock is already freed. This is a bug."),w;let T=[...w];return T.splice(S,1,{id:g,position:[y,y===-1?0:1]}),T})},unlock:()=>{a.reduce(y=>y.filter(w=>w.id!==g))}}},[]),f={currentD:c,getLock:p};return Is.default.createElement(OS.Provider,{value:f},i)},gne=()=>(0,Is.useContext)(OS).currentD,yne=()=>{let{getLock:i}=(0,Is.useContext)(OS),s=(0,Is.useRef)();return(0,Is.useLayoutEffect)(()=>()=>{var a;(a=s.current)==null||a.unlock()},[]),(0,Is.useMemo)(()=>{let a;return(c,p)=>{var f,g;(a==null?void 0:a.shouldLock)!==c&&(c?s.current=i():(f=s.current)==null||f.unlock()),(a==null?void 0:a.pos)!==p&&c&&((g=s.current)==null||g.set(p)),a={shouldLock:c,pos:p}}},[i])},Vd=(i,s)=>{let{getLock:a}=(0,Is.useContext)(OS),c=(0,Is.useRef)();(0,Is.useLayoutEffect)(()=>{if(i)return c.current=a(),()=>{c.current.unlock()}},[i,a]),(0,Is.useLayoutEffect)(()=>{i&&c.current.set(s)},[s,i])},gc=i=>({[EI]:i==="hide"?i:i.toFixed(3)}),EI="data-theatre-lock-framestamp-to",bne=i=>(0,Ud.prism)(()=>{let s=(0,Ud.val)(i.rightDims),a=(0,Ud.val)(i.clippedSpace.toUnitSpace),c=(0,Ud.val)(fne);if(!c)return[-1,0];for(let T of c.composedPath()){if(!(T instanceof HTMLElement||T instanceof SVGElement))break;if(T.hasAttribute(EI)){let I=T.getAttribute(EI);if(typeof I!="string")continue;if(I==="hide")return[-1,0];let A=parseFloat(I);if(isFinite(A)&&A>=0)return[A,2]}}let{clientX:p,clientY:f}=c,{screenX:g,screenY:y,width:w,height:S}=s;if(ix(p,g,g+w)&&ix(f,y+16,y+S)){let T=p-g;return[a(T),3]}else return[-1,0]}),_ne=vne}),wne,DS,cV,xne,Sne,yc,Ene=C(()=>{vr(),Ea(),Ne(),qke(),xI(),du(),jo(),wne=12,DS=34,cV="beingDragged",yc={BEING_DRAGGED_CLASS:cV,CSS:No(xne||(xne=G([`
    position: absolute;
    `,`;
    `,`;

    &.`,` {
      pointer-events: none !important;
    }
  `])),hl(wne),hr,cV),CSS_WHEN_SOMETHING_DRAGGING:No(Sne||(Sne=G([`
    pointer-events: auto;
    cursor: var(`,`);

    //  thing
    // This box extends the hitzone so the user does not
    // accidentally leave the hitzone
    &:hover:after {
      position: absolute;
      top: calc(50% - `,`px);
      left: calc(50% - `,`px);
      width: `,`px;
      height: `,`px;
      display: block;
      content: ' ';
      background: url(`,`) no-repeat 100% 100%;
      // This icon might also fit: GiConvergenceTarget
    }
  `])),Id,DS/2,DS/2,DS,DS,hne),reactProps(i){return z(j(j({},gc(i.position)),As.includePositionSnapAttrs(i.position)),{className:i.isDragging?yc.BEING_DRAGGED_CLASS:""})}}});function dV(){NS.set({mode:"snapToAll"})}function fv(){NS.set({mode:"snapToNone"})}function Cne(i){NS.set({mode:"snapToSome",positions:i})}function Pne(i,s){return Object.fromEntries(Object.entries(i).map(([a,c])=>[a,Object.fromEntries(Object.entries(c.trackData).map(([p,f])=>[p,f.keyframes.filter(g=>s(g,{trackId:p,trackData:f,objectKey:a})).map(g=>g.position)]))]))}var kne,Tne,hV,Mne,Ane,Ine,Rne,One,LS,NS,pV,mv=C(()=>{kne=Mt,Tne=Mt,hV=Z(Re()),Ne(),Ene(),Ane=se.div(Mne||(Mne=G([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  #pointer-root.draggingPositionInSequenceEditor & {
    `,`
  }
`])),yc.CSS,yc.CSS_WHEN_SOMETHING_DRAGGING),Rne=se.div(Ine||(Ine=G([`
  position: absolute;
`]))),One=i=>hV.default.createElement(Rne,{style:{top:"".concat(i.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,Tne.val)(i.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(i.position,"px))")}},hV.default.createElement(Ane,j({},yc.reactProps({isDragging:!1,position:i.position})))),LS=One,NS=new kne.Atom({mode:"snapToNone"}),pV=NS.prism});function Yke(i,s){let a=(0,vv.useMemo)(()=>({debugName:"HorizontallyScrollableArea",onDragStart(p){if(p.target instanceof HTMLInputElement||p.shiftKey||p.altKey||p.ctrlKey||p.metaKey||p.composedPath().some(I=>I instanceof HTMLElement&&I.draggable===!0))return!1;let f=p.clientX-s.getBoundingClientRect().left,g=li((0,Si.val)(i.clippedSpace.toUnitSpace)(f),0,1/0),y=(0,Si.val)(i.seeker.setIsSeeking),w=(0,Si.val)(i.sheet).getSequence();w.position=g;let S=g,T=(0,Si.val)(i.scaledSpace.toUnitSpace);return y(!0),dV(),{onDrag(I,A,k){let D=T(I),O=li(S+D,0,w.length),F=As.checkIfMouseEventSnapToPos(k,{});F!=null&&(O=F),w.position=O},onDragEnd(){y(!1),fv()}}}}),[i,s]),[c]=xi(s,a);ul(c,"draggingPositionInSequenceEditor","ew-resize")}function Zke(i,s){let a=lne();(0,vv.useLayoutEffect)(()=>{if(!s)return;let c=f=>{if(f.ctrlKey){f.preventDefault(),f.stopPropagation();let g=f.clientX-s.getBoundingClientRect().left,y=(0,Si.val)(i.clippedSpace.toUnitSpace)(g),w=(0,Si.val)(i.clippedSpace.range),S=1+fV(f.deltaY,[-50,50])*.03,T=bd(w,k=>(k-y)*S+y),I=(0,Si.val)(i.sheet).getSequence().length,A=I+I*.25;(0,Si.val)(i.clippedSpace.setRange)(Qke(T,[0,A]));return}else if(f.shiftKey){f.preventDefault(),f.stopPropagation();let g=(0,Si.val)(i.sheet).getSequence().length,y=(0,Si.val)(i.clippedSpace.range),w=(y.end-y.start)/g,S=fV(f.deltaY||f.deltaX,[-50,50])*.05*w,T=bd(y,I=>I+S);(0,Si.val)(i.clippedSpace.setRange)(T);return}else{a(f),f.preventDefault(),f.stopPropagation();let g=(0,Si.val)(i.scaledSpace.toUnitSpace)(f.deltaX*1),y=(0,Si.val)(i.clippedSpace.range),w=bd(y,S=>S+g);(0,Si.val)(i.clippedSpace.setRange)(w);return}},p={capture:!0,passive:!1};return s.addEventListener("wheel",c,p),()=>{s.removeEventListener("wheel",c,p)}},[s,i]),xi(s,(0,vv.useMemo)(()=>({onDragStart(c){let p=(0,Si.val)(i.clippedSpace.range),f=(0,Si.val)(i.clippedSpace.setRange),g=(0,Si.val)(i.scaledSpace.toUnitSpace);return c.preventDefault(),c.stopPropagation(),{onDrag(y,w,S,T,I){a({deltaY:-I});let A=-g(y),k=bd(p,D=>D+A);f(k)}}},debugName:"HorizontallyScrollableArea Middle Button Drag",buttons:[1],lockCSSCursorTo:"grabbing"}),[i]))}function fV(i,[s,a]){return Math.max(Math.min(i,a),s)}function Qke(i,s){return bd(i,a=>fV(a,s))}function Jke(i,s){(0,vv.useLayoutEffect)(()=>{if(!s)return;let a=(0,Si.prism)(()=>{let g=(0,Si.val)(i.clippedSpace.range);return(0,Si.val)(i.scaledSpace.fromUnitSpace)(g.start)}),c=()=>{let g=a.getValue();s.scrollLeft=g},p=a.onStale(c);c();let f=setTimeout(c,100);return()=>{clearTimeout(f),p()}},[i,s])}var Si,vv,Dne,Lne,Nne,mV,Fne=C(()=>{no(),mr(),hn(),Si=Mt,Jr(),vv=Z(Re()),Ne(),dne(),vr(),Ea(),du(),mv(),Lne=se.div(Dne||(Dne=G([`
  position: absolute;

  right: 0;
  overflow-x: scroll;
  overflow-y: hidden;
  `,`;

  // hide the scrollbar on Gecko
  scrollbar-width: none;

  // hide the scrollbar on Webkit/Blink
  &::-webkit-scrollbar {
    display: none;
  }
`])),hr),Nne=vv.default.memo(({layoutP:i,children:s,height:a})=>{let{width:c,unitSpaceToScaledSpaceMultiplier:p}=Un(()=>({width:(0,Si.val)(i.rightDims.width),unitSpaceToScaledSpaceMultiplier:(0,Si.val)(i.scaledSpace.fromUnitSpace)(1)}),[i]),[f,g]=sr(null);return Zke(i,g),Yke(i,g),Jke(i,g),vv.default.createElement(Lne,{ref:f,style:{width:c+"px",height:a+"px","--unitSpaceToScaledSpaceMultiplier":p}},s)}),mV=Nne}),CI,Bne,Une,Vne,jne,zne,Hne,Gne,qy,PI=C(()=>{CI=Z(Re()),Ne(),Une=se.li(Bne||(Bne=G([`
  margin: 0;
  padding: 0;
  list-style: none;
  box-sizing: border-box;
  position: relative;
`]))),jne=se.div(Vne||(Vne=G([`
  box-sizing: border-box;
  width: 100%;
  position: relative;

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -40px;
    top: 0;
    bottom: 0;
    right: 0;
    box-sizing: border-box;
    border-bottom: 1px solid #252b3869;
    background: `,`;
  }
`])),i=>i.isEven?"transparent":"#6b8fb505"),Hne=se.ul(zne||(zne=G([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),Gne=({leaf:i,children:s,node:a,isCollapsed:c})=>{let p=Array.isArray(s)&&s.length>0;return i.shouldRender?CI.default.createElement(Une,null,CI.default.createElement(jne,{style:{height:i.nodeHeight+"px"},isEven:i.n%2===0},a),p&&CI.default.createElement(Hne,null,s)):null},qy=Gne}),eTe=K((i,s)=>{(function(){var a=this,c={};typeof i<"u"?s.exports=c:a.fuzzy=c,c.simpleFilter=function(p,f){return f.filter(function(g){return c.test(p,g)})},c.test=function(p,f){return c.match(p,f)!==null},c.match=function(p,f,g){g=g||{};var y=0,w=[],S=f.length,T=0,I=0,A=g.pre||"",k=g.post||"",D=g.caseSensitive&&f||f.toLowerCase(),O;p=g.caseSensitive&&p||p.toLowerCase();for(var F=0;F<S;F++)O=f[F],D[F]===p[y]?(O=A+O+k,y+=1,I+=1+I):I=0,T+=I,w[w.length]=O;return y===p.length?(T=D===p?1/0:T,{rendered:w.join(""),score:T}):null},c.filter=function(p,f,g){return!f||f.length===0?[]:typeof p!="string"?f:(g=g||{},f.reduce(function(y,w,S,T){var I=w;g.extract&&(I=g.extract(w));var A=c.match(p,I,g);return A!=null&&(y[y.length]={string:A.rendered,score:A.score,index:S,original:w}),y},[]).sort(function(y,w){var S=w.score-y.score;return S||y.index-w.index}))}})()});function tTe(i,s){let[a,c]=(0,kI.useState)(!1),p=(0,kI.useRef)(s);return a||(p.current=s),(0,kI.useMemo)(()=>i(c),p.current)}var kI,nTe=C(()=>{kI=Z(Re())}),vV,Dp,TI=C(()=>{vV="rgba(26, 28, 30, 0.97);",Dp="#272B2F"});function $ne(i,s,a,c){let p=tTe(f=>({debugName:"CurveSegmentEditor/useKeyframeDrag",lockCSSCursorTo:"move",onDragStart(){return f(!0),{onDrag(g,y){i&&a.onCurveChange(c(g,y))},onDragEnd(g){f(!1),a.onCancelCurveChange()}}}}),[i,a.onCurveChange,a.onCancelCurveChange]);xi(s,p)}var ur,MI,FS,Xy,Wne,BS,Kne,AI,qne,Xne,Yne,Yy,Zne,gv,Qne,Jne,gV,ere,II,tre,yV,nre,rre,rTe=C(()=>{ur=Z(Re()),no(),mr(),F0(),Ne(),vr(),nTe(),TI(),MI=.12,FS=1+MI*2,Xy=.01,Wne=8,BS=(1-Xy)/(Wne-1),Kne="#3EAAA4",AI="#3EAAA4",qne="#3EAAA4",Xne="#3EAAA4",Yne="#3EAAA4",Yy="#3EAAA4",Zne="#3EAAA4",gv="#B3B3B3",Qne="#3eaaa4",Jne="#67dfd8",gV=["goldenrod","cornflowerblue","dodgerblue","lawngreen"],II=se.circle(ere||(ere=G([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.04px;
  pointer-events: none;
  transition: r 0.15s;
  fill: `,`;
`])),Qne),yV=se.circle(tre||(tre=G([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.09px;
  cursor: move;
  `,`;
  &:hover {
    opacity: 0.4;
  }
  &:hover + `,` {
    fill: `,`;
  }
`])),hr,II,Jne),nre=i=>{let{curveConnection:{left:s,right:a},backgroundConnections:c}=i,p=Math.min(0,1-a.handles[1],1-s.handles[3]),f=Math.max(1,1-a.handles[1],1-s.handles[3]),g=Math.max(1,f-p),y=V=>(V-p)/g,[w,S]=sr(null),T=FS/((S==null?void 0:S.clientWidth)||1),I=FS/((S==null?void 0:S.clientHeight)||1),[A,k]=sr(null);$ne(S,k,i,(V,$)=>{let X=li(s.handles[2]+V*T,0,1),re=s.handles[3]-$*I;return[X,re,a.handles[0],a.handles[1]]});let[D,O]=sr(null);$ne(S,O,i,(V,$)=>{let X=li(a.handles[0]+V*T,0,1),re=a.handles[1]-$*I;return[s.handles[2],s.handles[3],X,re]});let F=V=>"M0 ".concat(y(1)," C").concat(V.left.handles[2]," ").concat(y(1-V.left.handles[3])," ").concat(V.right.handles[0]," ").concat(y(1-V.right.handles[1])," 1 ").concat(y(0));return ur.default.createElement("svg",{height:"100%",width:"100%",ref:w,viewBox:"".concat(-MI," ").concat(-MI," ").concat(FS," ").concat(FS),xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none"},ur.default.createElement("linearGradient",{id:"myGradient",gradientTransform:"rotate(90)"},ur.default.createElement("stop",{offset:y(-1),stopColor:Zne}),ur.default.createElement("stop",{offset:y(0),stopColor:Yy}),ur.default.createElement("stop",{offset:y(.3),stopColor:Yne}),ur.default.createElement("stop",{offset:y(.5),stopColor:Xne}),ur.default.createElement("stop",{offset:y(.7),stopColor:qne}),ur.default.createElement("stop",{offset:y(1),stopColor:AI}),ur.default.createElement("stop",{offset:y(2),stopColor:Kne})),ur.default.createElement("pattern",{id:"dot-background-pattern-1",width:BS,height:BS/g,y:-p/g},ur.default.createElement("rect",{width:Xy,height:Xy,fill:gv,opacity:.3})),ur.default.createElement("rect",{x:0,y:0,width:"1",height:1,fill:"url(#dot-background-pattern-1)"}),ur.default.createElement("pattern",{id:"dot-background-pattern-2",width:BS,height:BS},ur.default.createElement("rect",{width:Xy,height:Xy,fill:gv})),ur.default.createElement("rect",{x:0,y:y(0),width:"1",height:y(1)-y(0),fill:"url(#dot-background-pattern-2)"}),!s.type||s.type==="bezier"?ur.default.createElement(ur.default.Fragment,null,ur.default.createElement("line",{x1:0,y1:y(1),x2:s.handles[2],y2:y(1-s.handles[3]),stroke:gv,strokeWidth:"0.01"}),ur.default.createElement("line",{x1:1,y1:y(0),x2:a.handles[0],y2:y(1-a.handles[1]),stroke:gv,strokeWidth:"0.01"}),ur.default.createElement("path",{d:F(i.curveConnection),stroke:"none",fill:"url('#myGradient')",opacity:"0.1"}),c.map((V,$)=>ur.default.createElement("path",{key:V.objectKey+"/"+V.left.id,d:F(V),stroke:gV[$%gV.length],opacity:.6,strokeWidth:"0.01"})),ur.default.createElement("path",{d:F(i.curveConnection),stroke:"url('#myGradient')",strokeWidth:"0.02"}),ur.default.createElement("circle",{cx:0,cy:y(1),r:"0.025",stroke:AI,strokeWidth:"0.02",fill:Dp}),ur.default.createElement("circle",{cx:1,cy:y(0),r:"0.025",stroke:Yy,strokeWidth:"0.02",fill:Dp}),ur.default.createElement(yV,{ref:A,cx:s.handles[2],cy:y(1-s.handles[3]),fill:AI,opacity:.2}),ur.default.createElement(II,{cx:s.handles[2],cy:y(1-s.handles[3])}),ur.default.createElement(yV,{ref:D,cx:a.handles[0],cy:y(1-a.handles[1]),fill:Yy,opacity:.2}),ur.default.createElement(II,{cx:a.handles[0],cy:y(1-a.handles[1])})):ur.default.createElement(ur.default.Fragment,null,ur.default.createElement("line",{x1:0,y1:y(1),x2:1,y2:y(1),stroke:gv,strokeWidth:"0.01"}),ur.default.createElement("line",{x1:1,y1:y(1),x2:1,y2:0,stroke:gv,strokeWidth:"0.01"}),ur.default.createElement("circle",{cx:0,cy:1,r:"0.025",stroke:Yy,strokeWidth:"0.02",fill:Dp}),ur.default.createElement("circle",{cx:1,cy:0,r:"0.025",stroke:Yy,strokeWidth:"0.02",fill:Dp})))},rre=nre});function RI(i){return i.map(s=>s.toFixed(3)).join(", ")}function OI(i){if(!i||(i==null?void 0:i.length)>ire)return null;let s=i.split(",");if(s.length!==4)return null;let a=s.map(c=>Number(c.trim()));return!a.every(c=>isFinite(c))||a[0]<0||a[0]>1||a[2]<0||a[2]>1?null:a}function iTe(i,s,a={threshold:.02}){if(!i||!s)return!1;let c=0;for(let p=0;p<4;p++)c+=Math.abs(i[p]-s[p]);return c<a.threshold}var ire,DI,ore=C(()=>{ire=128,DI=[{label:"Quad Out",value:"0.250, 0.460, 0.450, 0.940"},{label:"Quad In Out",value:"0.455, 0.030, 0.515, 0.955"},{label:"Quad In",value:"0.550, 0.085, 0.680, 0.530"},{label:"Cubic Out",value:"0.215, 0.610, 0.355, 1.000"},{label:"Cubic In Out",value:"0.645, 0.045, 0.355, 1.000"},{label:"Cubic In",value:"0.550, 0.055, 0.675, 0.190"},{label:"Quart Out",value:"0.165, 0.840, 0.440, 1.000"},{label:"Quart In Out",value:"0.770, 0.000, 0.175, 1.000"},{label:"Quart In",value:"0.895, 0.030, 0.685, 0.220"},{label:"Quint Out",value:"0.230, 1.000, 0.320, 1.000"},{label:"Quint In Out",value:"0.860, 0.000, 0.070, 1.000"},{label:"Quint In",value:"0.755, 0.050, 0.855, 0.060"},{label:"Sine Out",value:"0.390, 0.575, 0.565, 1.000"},{label:"Sine In Out",value:"0.445, 0.050, 0.550, 0.950"},{label:"Sine In",value:"0.470, 0.000, 0.745, 0.715"},{label:"Expo Out",value:"0.190, 1.000, 0.220, 1.000"},{label:"Expo In Out",value:"1.000, 0.000, 0.000, 1.000"},{label:"Expo In",value:"0.780, 0.000, 0.810, 0.00"},{label:"Circ Out",value:"0.075, 0.820, 0.165, 1.000"},{label:"Circ In Out",value:"0.785, 0.135, 0.150, 0.860"},{label:"Circ In",value:"0.600, 0.040, 0.980, 0.335"},{label:"Back Out",value:"0.175, 0.885, 0.320, 1.275"},{label:"Back In Out",value:"0.680, -0.550, 0.265, 1.550"},{label:"Back In",value:"0.600, -0.280, 0.735, 0.045"},{label:"linear",value:"0.5, 0.5, 0.5, 0.5"},{label:"In Out",value:"0.42,0,0.58,1"},{label:"Hold",value:"0, 0, Infinity, Infinity"}]}),as,LI,yv,bV,sre,are,US,_V,wV,lre,ure,oTe=C(()=>{as=Z(Re()),LI=.75,yv=.1,bV=1+LI*2,sre="#F5F5F5",are="#888888",US="#4f4f4f",_V="rgba(255, 255, 255, 0.1)",wV=i=>1-i,lre=i=>{let{easing:s,isSelected:a}=i,c=a?sre:are,p="".concat(-LI," ").concat(-LI," ").concat(bV," ").concat(bV);if(s){let f=[s[0],wV(s[1])],g=[s[2],wV(s[3])];return as.default.createElement("svg",{height:"100%",width:"100%",viewBox:p,fill:"none",xmlns:"http://www.w3.org/2000/svg"},as.default.createElement("line",{x1:"0",y1:"1",x2:f[0],y2:f[1],stroke:US,strokeWidth:"0.1"}),as.default.createElement("line",{x1:"1",y1:"0",x2:g[0],y2:g[1],stroke:US,strokeWidth:"0.1"}),as.default.createElement("circle",{cx:f[0],cy:f[1],r:.1,fill:_V}),as.default.createElement("circle",{cx:g[0],cy:g[1],r:.1,fill:_V}),as.default.createElement("circle",{cx:f[0],cy:f[1],r:yv,fill:US}),as.default.createElement("circle",{cx:g[0],cy:g[1],r:yv,fill:US}),as.default.createElement("path",{d:"M0 1 C".concat(f[0]," ").concat(f[1]," ").concat(g[0],` 
        `).concat(g[1]," 1 0"),stroke:c,strokeWidth:"0.08"}),as.default.createElement("circle",{cx:0,cy:1,r:yv,fill:c}),as.default.createElement("circle",{cx:1,cy:0,r:yv,fill:c}))}return as.default.createElement("svg",{height:"100%",width:"100%",viewBox:p,fill:"none",xmlns:"http://www.w3.org/2000/svg"},as.default.createElement("line",{x1:"0",y1:"1",x2:1,y2:1,stroke:c,strokeWidth:"0.08"}),as.default.createElement("line",{x1:"1",y1:"0",x2:1,y2:1,stroke:c,strokeWidth:"0.08"}),as.default.createElement("circle",{cx:0,cy:1,r:yv,fill:c}),as.default.createElement("circle",{cx:1,cy:0,r:yv,fill:c}))},ure=lre}),VS,cre,dre,hre,pre,fre,mre,vre,sTe=C(()=>{_S(),VS=Z(Re()),Ne(),ore(),oTe(),fA(),TI(),dc(),hre=se.div(dre||(dre=G([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  aspect-ratio: 1;

  transition: background-color 0.15s;
  background-color: `,`;
  border-radius: 2px;
  cursor: pointer;
  outline: none;

  `,`

  &:hover {
    background-color: #31353a;
  }

  &:focus {
    background-color: #383d42;
  }
`])),Dp,({isSelected:i})=>i&&No(cre||(cre=G([`
      background-color: #383d42;
    `])))),fre=se(cc)(pre||(pre=G([`
  padding: 0.5em;
  color: white;
  max-width: 240px;
  pointer-events: none !important;
  --popover-bg: black;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: transparent;
  box-shadow: none;
`]))),mre=VS.default.forwardRef((i,s)=>{let[a,c]=Vy({enabled:!0,verticalPlacement:i.tooltipPlacement,verticalGap:0},()=>VS.default.createElement(fre,{showPopoverEdgeTriangle:!1},i.easing.label));return VS.default.createElement(hre,j({ref:pA([c,s])},i),a,VS.default.createElement(ure,{easing:OI(i.easing.value),isSelected:i.isSelected}))}),vre=mre});function aTe(i){var s;let[a,c]=(0,gre.useState)(null),p=g=>{if(a===null){i.items.length>0&&c(0);return}let y=a+g*i.uiColumns,w=y<0,S=y>i.items.length-1;if(w||S){if(i.canVerticleExit&&i.canVerticleExit(w?"top":"bottom")){c(null);return}return}c(y)},f=g=>{a===null?c(dTe(g,i.items.length)):a+g<0?c(null):c(Math.min(a+g,i.items.length-1))};return{focusFirstItem(){c(0)},onParentEltKeyDown:g=>{if(g.key==="ArrowRight")f(1);else if(g.key==="ArrowLeft")f(-1);else if(g.key==="ArrowUp")p(-1);else if(g.key==="ArrowDown")p(1);else return 0;return 1},gridItems:i.items.map((g,y)=>i.renderItem({isSelected:y===a,item:g,select(w){c(y),i.onSelectItem(g)===1&&(w==null||w.preventDefault(),w==null||w.stopPropagation())}})),currentSelection:(s=i.items[a??-1])!=null?s:null}}var gre,lTe=C(()=>{gre=Z(Re()),FI()});function yre(i,s,a){var c;(c=i.current)==null||c.discard(),i.current=null;let p=OI(a);p===null?i.current=cTe(s):i.current=uTe(s,p)}function bre(i){var s;(s=i.current)==null||s.discard(),i.current=null}function uTe(i,s){return me().tempTransaction(({stateEditors:a})=>{let{setHandlesForKeyframe:c,setKeyframeType:p}=a.coreByProject.historic.sheetsById.sequence;for(let{projectId:f,sheetId:g,objectKey:y,trackId:w,left:S,right:T}of i)c({projectId:f,sheetId:g,objectKey:y,trackId:w,keyframeId:S.id,start:[s[0],s[1]]}),c({projectId:f,sheetId:g,objectKey:y,trackId:w,keyframeId:T.id,end:[s[2],s[3]]}),p({projectId:f,sheetId:g,objectKey:y,trackId:w,keyframeId:S.id,keyframeType:"bezier"})})}function cTe(i){return me().tempTransaction(({stateEditors:s})=>{let{setKeyframeType:a}=s.coreByProject.historic.sheetsById.sequence;for(let{projectId:c,sheetId:p,objectKey:f,trackId:g,left:y}of i)a({projectId:c,sheetId:p,objectKey:f,trackId:g,keyframeId:y.id,keyframeType:"hold"})})}function dTe(i,s){return(i%s+s)%s}function hTe(i,s){return()=>setTimeout(i,s)}function pTe({left:i,right:s}){return({left:a,right:c})=>i.handles[2]!==a.handles[2]||i.handles[3]!==a.handles[3]||s.handles[0]!==c.handles[0]||s.handles[1]!==c.handles[1]}var NI,ci,_re,xV,SV,wre,xre,Sre,Ere,Cre,Pre,kre,Tre,Mre,Are,Ire,Rre,EV,fTe,CV,Ore,FI=C(()=>{NI=Mt,ci=Z(Re()),Ne(),_re=Z(eTe()),Fe(),rTe(),sTe(),ore(),TI(),mr(),lTe(),xV=3,SV=53,wre=25,Sre=se.div(xre||(xre=G([`
  background: `,`;
  display: grid;
  grid-template-areas:
    'search  tween'
    'presets tween';
  grid-template-rows: 32px 1fr;
  grid-template-columns: `,`px 120px;
  gap: 1px;
  height: 120px;
`])),vV,xV*SV),Cre=se.div(Ere||(Ere=G([`
  overflow: auto;
  grid-area: presets;

  display: grid;
  grid-template-columns: repeat(`,`, 1fr);
  grid-auto-rows: min-content;
  gap: 1px;

  overflow-y: scroll;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
  &::-webkit-scrollbar {
    /* WebKit */
    width: 0;
    height: 0;
  }
`])),xV),kre=se.input.attrs({type:"text"})(Pre||(Pre=G([`
  background-color: `,`;
  border: none;
  border-radius: 2px;
  color: rgba(255, 255, 255, 0.8);
  padding: 6px;
  font-size: 12px;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: 100%;
  box-sizing: border-box;

  grid-area: search;

  &:hover {
    background-color: #212121;
  }

  &:focus {
    background-color: rgba(16, 16, 16, 0.26);
    outline: 1px solid rgba(0, 0, 0, 0.35);
  }
`])),Dp),Mre=se.div(Tre||(Tre=G([`
  grid-area: tween;
  background: `,`;
`])),Dp),Ire=se.div(Are||(Are=G([`
  grid-column: 1 / 4;
  padding: 6px;
  color: #888888;
`]))),Rre=i=>{let s=(0,ci.useMemo)(()=>[i.curveConnection,...i.additionalConnections],[i.curveConnection,...i.additionalConnections]),a=(0,ci.useRef)(null);(0,ci.useEffect)(()=>{let le=Ore(s);return()=>{var Ae;le(),(Ae=a.current)==null||Ae.commit()}},[a]);let c=[i.curveConnection.left.handles[2],i.curveConnection.left.handles[3],i.curveConnection.right.handles[0],i.curveConnection.right.handles[1]],p=(0,ci.useRef)(null);(0,ci.useLayoutEffect)(()=>{var le,Ae;(le=p.current)==null||le.select(),(Ae=p.current)==null||Ae.focus()},[p.current]);let[f,g]=(0,ci.useState)(RI(c)),y=le=>{le!==void 0&&(T(1),g(le.target.value),OI(le.target.value)&&A(le.target.value))},w=le=>{var Ae,Y;T(1),(le.key==="ArrowDown"||le.key==="ArrowUp")&&le.preventDefault(),le.key==="ArrowDown"?(Qe.focusFirstItem(),(Y=(Ae=ae.current[V[0].label])==null?void 0:Ae.current)==null||Y.focus()):le.key==="Escape"?(bre(a),i.onRequestClose("key Escape")):le.key==="Enter"&&i.onRequestClose("key Enter")},[S,T]=(0,ci.useState)(0);(0,ci.useEffect)(()=>{S===2?g(RI(c)):S===3&&f!==""&&g("")},s);let[I,A]=(0,ci.useState)(RI(c)),[k,D]=(0,ci.useState)(null);(0,ci.useEffect)(()=>{var le;S!==0&&S!==3&&yre(a,s,(le=k??I)!=null?le:"")},[k,I,S]),s.some(pTe(i.curveConnection))&&S===0&&T(3);let O=le=>{var Ae,Y;T(2);let Ue=RI(le);g(Ue),A(Ue),(Ae=p.current)==null||Ae.select(),(Y=p.current)==null||Y.focus()},F=()=>{},V=(0,ci.useMemo)(()=>/^[A-Za-z]/.test(f)?_re.default.filter(f,DI,{extract:le=>le.label}).map(le=>le.original):DI,[f]);(0,ci.useEffect)(()=>{S===1&&V[0]&&A(V[0].value)},[V]);let $=le=>{le.key==="Escape"?(bre(a),i.onRequestClose("key Escape"),le.stopPropagation()):le.key==="Enter"&&(i.onRequestClose("key Enter"),le.stopPropagation())},X=le=>{S===0&&T(2),D(le.value)},re=()=>D(null),ne=le=>(yre(a,s,le.value),i.onRequestClose("selected easing option"),1),ae=(0,ci.useRef)(DI.reduce((le,Ae)=>(le[Ae.label]={current:null},le),{})),[Se,fe]=sr(null),[ge,Ie]=(0,ci.useState)(0);(0,ci.useEffect)(()=>{let le=()=>{var Ae;Ie((Ae=fe==null?void 0:fe.scrollTop)!=null?Ae:0)};return fe==null||fe.addEventListener("scroll",le),()=>fe==null?void 0:fe.removeEventListener("scroll",le)},[fe]);let Qe=aTe({items:V,uiColumns:3,onSelectItem:ne,canVerticleExit(le){var Ae,Y;return le==="top"?((Ae=p.current)==null||Ae.select(),(Y=p.current)==null||Y.focus(),1):0},renderItem:({item:le,select:Ae})=>{var Y,Ue;return ci.default.createElement(vre,{key:le.label,easing:le,tabIndex:0,onKeyDown:$,ref:ae.current[le.label],onMouseOver:()=>X(le),onMouseOut:re,onClick:Ae,tooltipPlacement:((Ue=(Y=ae.current[le.label].current)==null?void 0:Y.offsetTop)!=null?Ue:0)-(ge??0)<SV+wre?"bottom":"top",isSelected:iTe(c,OI(le.value))})}});return(0,ci.useLayoutEffect)(()=>{var le,Ae;if(Qe.currentSelection!==null&&document.activeElement!==p.current){let Y=(Ae=(le=ae.current)==null?void 0:le[Qe.currentSelection.label])==null?void 0:Ae.current;Y==null||Y.focus(),A(Qe.currentSelection.value),/^[A-Za-z]/.test(f)||g(Qe.currentSelection.value)}},[Qe.currentSelection]),ci.default.createElement(Sre,null,ci.default.createElement(kre,{value:f,placeholder:S===3?"Multiple easings selected":"Search presets...",onPaste:hTe(y),onChange:y,ref:p,onKeyDown:w}),ci.default.createElement(Cre,{ref:Se,onKeyDown:le=>Qe.onParentEltKeyDown(le)},Qe.gridItems,Qe.gridItems.length===0?ci.default.createElement(Ire,null,"No results found"):void 0),ci.default.createElement(Mre,{onClick:()=>{var le;return(le=p.current)==null?void 0:le.focus()}},ci.default.createElement(rre,{curveConnection:i.curveConnection,backgroundConnections:i.additionalConnections,onCurveChange:O,onCancelCurveChange:F})))},EV=Rre,{isCurveEditorOpenD:fTe,isConnectionEditingInCurvePopover:CV,getLock:Ore}=(()=>{let i=new NI.Atom([]);return{getLock(s){return i.set(s),function(){i.set([])}},isCurveEditorOpenD:(0,NI.prism)(()=>i.prism.getValue().length>0),isConnectionEditingInCurvePopover(s){return NI.prism.ensurePrism(),i.prism.getValue().some(({left:a,right:c})=>s.left.id===a.id&&s.right.id===c.id)}}})()});function mTe(i,s){for(let{keyframeId:a}of yTe(s))if(i.left.id===a)return!0;return!1}function Dre(i,s,a){return(0,UI.prism)(()=>{if(a===void 0)return[];let c=[];for(let{objectKey:p,trackId:f}of Lre(a)){let g=(0,UI.val)(me().atomP.historic.coreByProject[i].sheetsById[s].sequence.tracksByObject[p].trackData[f]);g&&(c=c.concat(gTe(g.keyframes).filter(y=>mTe(y,a)).map(({left:y,right:w})=>({left:y,right:w,trackId:f,objectKey:p,sheetId:s,projectId:i}))))}return c})}function BI(i,s,a){var c;if(a===void 0)return[];let p=[];for(let{objectKey:g,trackId:y,keyframeIds:w}of Lre(a))p=p.concat((c=PV({projectId:i,sheetId:s,objectKey:g,trackId:y,keyframeIds:w}))!=null?c:[]);let f=gI(p.map(g=>g.pathToProp));return p.map(({keyframe:g,pathToProp:y})=>({keyframe:g,pathToProp:y.slice(f.length)}))}function PV({projectId:i,sheetId:s,objectKey:a,trackId:c,keyframeIds:p}){let f=(0,UI.val)(me().atomP.historic.coreByProject[i].sheetsById[s].sequence.tracksByObject[a]),g=f==null?void 0:f.trackData[c];if(!g)return null;let y=vTe((f==null?void 0:f.trackIdByPropPath)||{})[c];if(!y)return null;let w=[a,...yI(y)];return p.map(S=>({keyframe:g.keyframes.find(T=>T.id===S),pathToProp:w})).filter(({keyframe:S})=>S!==void 0)}function vTe(i){let s={};for(let[a,c]of Object.entries(i))s[c]=a;return s}function gTe(i){return i.map((s,a)=>({left:s,right:i[a+1]})).slice(0,-1)}function yTe(i){var s,a,c;let p=[];for(let[f,g]of Object.entries((s=i==null?void 0:i.byObjectKey)!=null?s:{}))for(let[y,w]of Object.entries((a=g==null?void 0:g.byTrackId)!=null?a:{}))for(let S of Object.keys((c=w==null?void 0:w.byKeyframeId)!=null?c:{}))p.push({objectKey:f,trackId:y,keyframeId:S});return p}function Lre(i){var s,a,c;let p=[];for(let[f,g]of Object.entries((s=i==null?void 0:i.byObjectKey)!=null?s:{}))for(let[y,w]of Object.entries((a=g==null?void 0:g.byTrackId)!=null?a:{}))p.push({objectKey:f,trackId:y,keyframeIds:Object.keys((c=w==null?void 0:w.byKeyframeId)!=null?c:{})});return p}var UI,Zy=C(()=>{UI=Mt,Fe(),vc()});function bTe(i,s){return(0,Nre.useMemo)(()=>_Te(i,s),[])}function _Te(i,s){let a=null,c=g=>me().tempTransaction(y=>i(y,g));function p(){a==null||a.discard(),a=null}let f={createAsset:s.sheet.project.assetStorage.createAsset,getAssetUrl:g=>g.id?s.sheet.project.assetStorage.getAssetUrl(g.id):void 0};return j({temporarilySetValue(g){p(),a=c(g)},discardTemporaryValue:p,permanentlySetValue(g){p(),c(g).commit()}},f)}var Nre,wTe=C(()=>{Fe(),Nre=Z(Re())});function kV(i){var s;if(i.type==="sheetObject")return zo.default.createElement(zo.default.Fragment,null,zo.default.createElement(VI,{style:{paddingLeft:"".concat(i.indent*jI,"px")}},i.sheetObject.address.objectKey),i.children.map((a,c)=>zo.default.createElement(kV,z(j({key:c},a),{autoFocusInput:i.autoFocusInput&&c===0,indent:i.indent+1}))));if(i.type==="propWithChildren"){let a=(s=i.propConfig.label)!=null?s:yd(i.pathToProp);return zo.default.createElement(zo.default.Fragment,null,zo.default.createElement(VI,{style:{paddingLeft:"".concat(i.indent*jI,"px")}},a),i.children.map((c,p)=>zo.default.createElement(kV,z(j({key:p},c),{autoFocusInput:i.autoFocusInput&&p===0,indent:i.indent+1}))))}else return zo.default.createElement(xTe,z(j({},i),{autoFocusInput:i.autoFocusInput,indent:i.indent}))}function xTe(i){var s;let a=(s=i.propConfig.label)!=null?s:yd(i.pathToProp),c=STe(i);if(i.propConfig.type==="enum")return zo.default.createElement(zo.default.Fragment,null);{let p=nU[i.propConfig.type];return zo.default.createElement(Bre,null,zo.default.createElement(VI,null,zo.default.createElement("span",{style:{paddingLeft:"".concat(i.indent*jI,"px")}},a)),zo.default.createElement(jre,null,zo.default.createElement(p,{editingTools:c,propConfig:i.propConfig,value:NA(i.keyframe.value,i.propConfig),autoFocus:i.autoFocusInput})))}}function STe(i){let s=i.sheetObject;return bTe(({stateEditors:a},c)=>{let p=z(j({},i.keyframe),{value:c});a.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},s.address),{trackId:i.trackId,keyframes:[p],snappingFunction:s.sheet.getSequence().closestGridPosition}))},s)}var zo,Fre,Bre,Ure,VI,jI,Vre,jre,ETe=C(()=>{zo=Z(Re()),Ne(),kY(),K0(),wTe(),Cp(),Bre=se.div(Fre||(Fre=G([`
  display: flex;
  align-items: stretch;
  min-width: 200px;

  select {
    min-width: 100px;
  }
`]))),VI=se.div(Ure||(Ure=G([`
  font-style: normal;
  font-weight: 400;
  font-size: 11px;
  line-height: 13px;
  letter-spacing: 0.01em;
  padding: 6px 6px 6px 0;

  width: 40%;

  color: #919191;

  overflow: hidden;
`]))),jI=10,jre=se.div(Vre||(Vre=G([`
  display: flex;
  align-items: center;
  width: 60%;
`])))});function zI(i){return lc({debugName:"useKeyframeInlineEditorPopover"},()=>HI.default.createElement(cc,{showPopoverEdgeTriangle:!0},HI.default.createElement("div",{style:{margin:"1px 2px 1px 10px"}},Array.isArray(i)?i.map((s,a)=>HI.default.createElement(kV,z(j({key:a},s),{autoFocusInput:a===0,indent:0}))):void 0)))}var HI,GI=C(()=>{HI=Z(Re()),uc(),dc(),ETe()});function CTe(i,s,a){return Ts(i,{displayName:"Keyframe",menuItems:()=>{let c=BI(a.leaf.sheetObject.address.projectId,a.leaf.sheetObject.address.sheetId,a.selection);return[{label:c.length>0?"Copy (selection)":"Copy",callback:()=>{c.length>0?me().transaction(p=>{p.stateEditors.studio.ahistoric.setClipboardKeyframes(c)}):me().transaction(p=>{p.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:a.keyframe,pathToProp:a.leaf.pathToProp}])})}},{label:a.selection!==void 0?"Delete (selection)":"Delete",callback:()=>{a.selection?a.selection.delete():me().transaction(({stateEditors:p})=>{p.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},a.leaf.sheetObject.address),{keyframeIds:[a.keyframe.id],trackId:a.leaf.trackId}))})}}]},onOpen(){s._debug("Show keyframe",a)}})}function PTe(i,s,a){let c=(0,Lp.useRef)(s);c.current=s;let{onClickFromDrag:p}=a,f=(0,Lp.useMemo)(()=>({debugName:"KeyframeDot/useDragKeyframe",onDragStart(y){let w=c.current,S=(0,$I.val)(me().atomP.historic.coreByProject[w.leaf.sheetObject.address.projectId].sheetsById[w.leaf.sheetObject.address.sheetId].sequence.tracksByObject),T=Pne(S,function(D,{trackId:O,objectKey:F}){var V,$;return D.id!==w.keyframe.id&&!(w.selection&&($=(V=w.selection.byObjectKey[F])==null?void 0:V.byTrackId[O])!=null&&$.byKeyframeId[D.id])});if(Cne(T),w.selection){let{selection:D,leaf:O}=w,{sheetObject:F}=O,V=D.getDragHandlers(z(j({},F.address),{domNode:i,positionAtStartOfDrag:w.track.data.keyframes[w.index].position})).onDragStart(y);return V&&z(j({},V),{onClick:p,onDragEnd:(...$)=>{var X;(X=V.onDragEnd)==null||X.call(V,...$),fv()}})}let I=w,A=(0,$I.val)(I.layoutP.scaledSpace.toUnitSpace),k;return{onDrag(D,O,F){var V;let $=I.track.data.keyframes[I.index],X=Math.max((V=As.checkIfMouseEventSnapToPos(F,{ignore:i}))!=null?V:$.position+A(D),0);k==null||k.discard(),k=void 0,k=me().tempTransaction(({stateEditors:re})=>{re.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},I.leaf.sheetObject.address),{trackId:I.leaf.trackId,keyframes:[z(j({},$),{position:X})],snappingFunction:(0,$I.val)(I.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(D){D?k==null||k.commit():k==null||k.discard(),fv()},onClick(D){p(D)}}}}),[p]),[g]=xi(i,f);return Vd(g,s.keyframe.position),ul(g,"draggingPositionInSequenceEditor","ew-resize"),[g]}var Lp,$I,jS,TV,zS,MV,zre,WI,Hre,Gre,$re,Wre,Kre,qre,Xre=C(()=>{Lp=Z(Re()),Ne(),Fe(),Ms(),no(),mr(),$I=Mt,jo(),Ea(),du(),xI(),Sp(),Zy(),vr(),mv(),GI(),lv(),jS=6,TV=jS+2,zS={normalColor:"#40AAA4",selectedColor:"#F2C95C",inlineEditorOpenColor:"#FCF3DC",selectedAndInlineEditorOpenColor:"#CBEBEA"},MV=({isSelected:i,isInlineEditorPopoverOpen:s})=>i&&s?zS.inlineEditorOpenColor:i?zS.selectedColor:s?zS.selectedAndInlineEditorOpenColor:zS.normalColor,WI=se.div(zre||(zre=G([`
  position: absolute;
  `,`

  background: `,`;
  transform: rotateZ(45deg);

  `,`;

  z-index: 1;
  pointer-events: none;
`])),hl(jS),i=>MV(i),i=>i.flag===2?"outline: 2px solid white;":""),Gre=se.div(Hre||(Hre=G([`
  position: absolute;
  `,`

  background: `,`;

  `,`;

  z-index: 1;
  pointer-events: none;
`])),hl(jS*1.5),i=>MV(i),i=>i.flag===2?"outline: 2px solid white;":""),Wre=se.div($re||($re=G([`
  z-index: 1;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  & + `,` {
    `,`
  }

  &:hover + `,` {
    `,`
  }
`])),hl(12),hr,WI,i=>i.isInlineEditorPopoverOpen?hl(TV):"",WI,hl(TV)),Kre=i=>{let s=xp("SingleKeyframeDot",i.keyframe.id),a=av(i.itemKey),[c,p]=sr(null),[f]=CTe(p,s,i),{node:g,toggle:y,isOpen:w}=zI([{type:"primitiveProp",keyframe:i.keyframe,pathToProp:i.leaf.pathToProp,propConfig:i.leaf.propConf,sheetObject:i.leaf.sheetObject,trackId:i.leaf.trackId}]);PTe(p,i,{onClickFromDrag(T){y(T,c.current)}});let S=!i.keyframe.type||i.keyframe.type==="bezier";return Lp.default.createElement(Lp.default.Fragment,null,Lp.default.createElement(Wre,j({ref:c,isInlineEditorPopoverOpen:w},a.attrs)),S?Lp.default.createElement(WI,{isSelected:!!i.selection,isInlineEditorPopoverOpen:w,flag:a.flag}):Lp.default.createElement(Gre,{isSelected:!!i.selection,isInlineEditorPopoverOpen:w,flag:a.flag}),g,f)},qre=Kre}),AV,IV,RV,bv,Yre,Zre,OV,Qre=C(()=>{Sa(),AV=Z(Re()),Ne(),Xre(),IV=jS/2+1,RV=1e3,bv={normalColor:"#365b59",selectedColor:"#8A7842",barColor:i=>{let s=i.isSelected?bv.selectedColor:bv.normalColor;return i.isPopoverOpen?J2(.2,vy(.2,s)):s},hoverColor:i=>{let s=i.isSelected?bv.selectedColor:bv.normalColor;return i.isPopoverOpen?J2(.2,vy(.2,s)):J2(.1,vy(.1,s))}},Zre=se.div(Yre||(Yre=G([`
  position: absolute;
  background: `,`;
  height: `,`px;
  width: `,`px;

  left: 0;
  top: -`,`px;
  transform-origin: top left;
  z-index: 0;
  cursor: ew-resize;

  &:after {
    display: block;
    position: absolute;
    content: ' ';
    top: -4px;
    bottom: -4px;
    left: 0;
    right: 0;
  }

  &:hover {
    background: `,`;
  }
`])),bv.barColor,IV,RV,IV/2,bv.hoverColor),OV=AV.default.forwardRef((i,s)=>{let a={isPopoverOpen:i.isPopoverOpen,isSelected:i.isSelected};return AV.default.createElement(Zre,z(j({},a),{ref:s,style:{transform:"scaleX(calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(i.connectorLengthInUnitSpace/RV,"))")},onClick:c=>{var p;(p=i.openPopover)==null||p.call(i,c)}}),i.children)})});function kTe(i,s){let a=(0,DV.useRef)(s);a.current=s;let c=(0,DV.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(p){let f=a.current,g;if(f.selection){let{selection:T,leaf:I}=f,{sheetObject:A}=I;return T.getDragHandlers(z(j({},A.address),{domNode:i,positionAtStartOfDrag:f.track.data.keyframes[f.index].position})).onDragStart(p)}let y=f,w=(0,KI.val)(y.layoutP.sheet).getSequence(),S=(0,KI.val)(y.layoutP.scaledSpace.toUnitSpace);return{onDrag(T,I,A){let k=S(T);g&&(g.discard(),g=void 0),g=me().tempTransaction(({stateEditors:D})=>{D.coreByProject.historic.sheetsById.sequence.transformKeyframes(z(j({},y.leaf.sheetObject.address),{trackId:y.leaf.trackId,keyframeIds:[y.keyframe.id,y.track.data.keyframes[y.index+1].id],translate:k,scale:1,origin:0,snappingFunction:w.closestGridPosition}))})},onDragEnd(T){T?g&&g.commit():g&&g.discard()}}}}),[]);xi(i,c)}function TTe(i,s,a,c){return Ts(s,{displayName:"Tween",menuItems:()=>{let p=BI(i.leaf.sheetObject.address.projectId,i.leaf.sheetObject.address.sheetId,i.selection);return[{label:p.length>0?"Copy (selection)":"Copy",callback:()=>{p.length>0?me().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes(p)}):me().transaction(f=>{f.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:a,pathToProp:i.leaf.pathToProp},{keyframe:c,pathToProp:i.leaf.pathToProp}])})}},{label:i.selection?"Delete (selection)":"Delete",callback:()=>{i.selection?i.selection.delete():me().transaction(({stateEditors:f})=>{f.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},i.leaf.sheetObject.address),{keyframeIds:[a.id,c.id],trackId:i.leaf.trackId}))})}}]}})}var KI,Np,DV,LV,Jre,eie,tie,nie,rie,MTe=C(()=>{Fe(),Ms(),no(),mr(),KI=Mt,Np=Z(Re()),DV=Z(Re()),uc(),dc(),FI(),Qre(),TI(),hn(),Zy(),Zy(),Ne(),LV=5,eie=se(cc)(Jre||(Jre=G([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: `,`;
`])),vV),tie=i=>{let{index:s,track:a}=i,c=a.data.keyframes[s],p=a.data.keyframes[s+1],[f,g]=sr(null),{node:y,toggle:w,close:S}=lc(()=>{let k=(0,KI.val)(i.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:k.screenX+LV,maxX:k.screenX+k.width-LV}}},()=>Np.default.createElement(rie,z(j({},i),{closePopover:S}))),[T]=TTe(i,g,c,p);kTe(g,i);let I=p.position-c.position,A={isPopoverOpen:Un(()=>CV(z(j({},i.leaf.sheetObject.address),{trackId:i.leaf.trackId,left:c,right:p})),[i.leaf.sheetObject.address,i.leaf.trackId,c,p]),isSelected:i.selection!==void 0};return Np.default.createElement(Np.default.Fragment,null,Np.default.createElement(OV,z(j({ref:f,connectorLengthInUnitSpace:I},A),{openPopover:k=>{g&&w(k,g)}}),y),T)},nie=tie,rie=Np.default.forwardRef((i,s)=>{let{index:a,track:{data:c},selection:p}=i,f=c.keyframes[a],g=c.keyframes[a+1],y=i.leaf.trackId,w=i.leaf.sheetObject.address,S=Un(()=>Dre(w.projectId,w.sheetId,p).getValue(),[w,p]),T=j({left:f,right:g,trackId:y},w);return Np.default.createElement(eie,{showPopoverEdgeTriangle:!1,ref:s},Np.default.createElement(EV,{curveConnection:T,additionalConnections:S,onRequestClose:i.closePopover}))})}),iie,_v,oie,sie,aie,lie,uie,ATe=C(()=>{iie=Mt,_v=Z(Re()),Ne(),MTe(),Xre(),sie=se.div(oie||(oie=G([`
  position: absolute;
`]))),aie=_v.default.createElement(_v.default.Fragment,null),lie=_v.default.memo(i=>{let{index:s,track:{data:a}}=i,c=a.keyframes[s],p=a.keyframes[s+1],f=c.connectedRight&&!!p;return _v.default.createElement(sie,{style:{top:"".concat(i.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,iie.val)(i.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(c.position,"px))")}},_v.default.createElement(qre,z(j({},i),{itemKey:i.itemKey})),f?_v.default.createElement(nie,j({},i)):aie)}),uie=lie});function ITe(i,s){return Ts(i,{displayName:"Keyframe Track",menuItems:()=>{var a;let c=(a=(0,Qy.val)(me().atomP.ahistoric.clipboard.keyframesWithRelativePaths))!=null?a:[];return[RTe(s,c)]}})}function RTe(i,s){return{label:"Paste Keyframes",enabled:s.length>0,callback:()=>{var a;let c=(0,Qy.val)(i.layoutP.sheet).getSequence(),p=(a=s[0])==null?void 0:a.pathToProp,f=s.filter(({keyframe:g,pathToProp:y})=>Lke(p,y)).map(({keyframe:g,pathToProp:y})=>g);me().transaction(({stateEditors:g})=>{var y;c.position=c.closestGridPosition(c.position);let w=(y=OTe(f))==null?void 0:y.position;for(let S of f)g.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(j({},i.leaf.sheetObject.address),{trackId:i.leaf.trackId,position:c.position+S.position-w,handles:S.handles,value:S.value,snappingFunction:c.closestGridPosition,type:S.type}))})}}}function OTe(i){let s=null;for(let a of i)(s===null||a.position<s.position)&&(s=a);return s}var Qy,jd,cie,die,NV,hie,DTe=C(()=>{hn(),Qy=Mt,jd=Z(Re()),Ne(),ATe(),Ms(),mr(),Fe(),vc(),mv(),Nd(),die=se.div(cie||(cie=G([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),NV=jd.default.memo(i=>{var s;let{layoutP:a,trackData:c,leaf:p}=i,[f,g]=sr(null),{selectedKeyframeIds:y,selection:w}=Un(()=>{let X=(0,Qy.val)(a.selectionAtom),re=(0,Qy.val)(X.pointer.current.byObjectKey[p.sheetObject.address.objectKey].byTrackId[p.trackId].byKeyframeId);return re?{selectedKeyframeIds:re,selection:(0,Qy.val)(X.pointer.current)}:{selectedKeyframeIds:{},selection:void 0}},[a,p.trackId]),[S,T,I]=ITe(g,i),A=$n(pV),k=A.mode==="snapToSome"?(s=A.positions[p.sheetObject.address.objectKey])==null?void 0:s[p.trackId]:[],D=A.mode==="snapToAll",O=(0,jd.useMemo)(()=>({data:c,id:p.trackId,sheetObject:i.leaf.sheetObject}),[c,p.trackId]),F=c.keyframes.map((X,re)=>jd.default.createElement(uie,{key:"keyframe-"+X.id,itemKey:ho.forTrackKeyframe(p.sheetObject,p.trackId,X.id),keyframe:X,index:re,track:O,layoutP:a,leaf:p,selection:y[X.id]===!0?w:void 0})),V=k.map(X=>jd.default.createElement(LS,{key:"snap-target-"+X,layoutP:a,leaf:p,position:X})),$=D?c.keyframes.map(X=>jd.default.createElement(LS,{key:"additionalSnapTarget-".concat(X.id),layoutP:a,leaf:p,position:X.position})):null;return jd.default.createElement(die,{ref:f,style:{background:I?"#444850 ":"unset"}},F,V,jd.default.createElement(jd.default.Fragment,null,$),S)}),NV.displayName="BasicKeyframedTrack",hie=NV}),pie,HS,fie,mie,LTe=C(()=>{Fe(),hn(),pie=Mt,HS=Z(Re()),PI(),DTe(),Sp(),fie=({leaf:i,layoutP:s})=>{let a=xp("PrimitivePropRow",i.pathToProp.join());return Un(()=>{let{sheetObject:c}=i,{trackId:p}=i,f=(0,pie.val)(me().atomP.historic.coreByProject[c.address.projectId].sheetsById[c.address.sheetId].sequence.tracksByObject[c.address.objectKey].trackData[p]);return(f==null?void 0:f.type)!=="BasicKeyframedTrack"?(a.errorDev("trackData type ".concat(f==null?void 0:f.type," is not yet supported on the sequence editor")),HS.default.createElement(qy,{leaf:i,isCollapsed:!1,node:HS.default.createElement("div",null)})):HS.default.createElement(qy,{leaf:i,isCollapsed:!1,node:HS.default.createElement(hie,{layoutP:s,trackData:f,leaf:i})})},[i,s])},mie=fie});function NTe(i){return i()}var FTe=C(()=>{});function vie(i){let{index:s,aggregateKeyframes:a,selection:c}=i;return Un(gie(i),[s,a,c,i.viewModel])}function gie(i){let{index:s,aggregateKeyframes:a,selection:c}=i,{projectId:p,sheetId:f}=i.viewModel.type==="sheet"?i.viewModel.sheet.address:i.viewModel.sheetObject.address;return()=>{let g=a[s],y=a[s+1],w=y&&g.keyframes.length===y.keyframes.length&&g.keyframes.every(({track:A},k)=>y.keyframes[k].track===A)?{length:y.position-g.position,selected:g.selected===0&&y.selected===0}:null,S=w?g.keyframes.map(({kf:A,track:k},D)=>z(j({},k.sheetObject.address),{trackId:k.id,left:A,right:y.keyframes[D].kf})):[],T=NTe(()=>{let A=FV.prism.memo("selectedConnections",()=>Dre(p,f,c),[p,f,c]).getValue();return[...S,...A]}),I=S.every(A=>CV(A));return{itemKey:FV.prism.memo("itemKey",()=>i.viewModel.type==="sheet"?ho.forSheetAggregateKeyframe(i.viewModel.sheet,g.position):i.viewModel.type==="sheetObject"?ho.forSheetObjectAggregateKeyframe(i.viewModel.sheetObject,g.position):ho.forCompoundPropAggregateKeyframe(i.viewModel.sheetObject,i.viewModel.pathToProp,g.position),[i.viewModel,g.position]),cur:g,connected:w,isAggregateEditingInCurvePopover:I,allConnections:T}}}var FV,BV=C(()=>{FV=Mt,Nd(),FI(),hn(),Zy(),FTe()});function BTe(i,s){let a=(0,pl.useRef)(s);a.current=s;let c=(0,pl.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(p){let f=a.current,g,y=f.aggregateKeyframes[f.index].keyframes,{selection:w,viewModel:S}=f,T=S.type==="sheet"?S.sheet.address:S.sheetObject.address;if(w&&f.aggregateKeyframes[f.index].selected===0)return w.getDragHandlers(z(j({},T),{domNode:i,positionAtStartOfDrag:f.aggregateKeyframes[f.index].position})).onDragStart(p);let I=f,A=(0,qI.val)(I.layoutP.sheet).getSequence(),k=(0,qI.val)(I.layoutP.scaledSpace.toUnitSpace);return{onDrag(D,O,F){let V=k(D);g&&(g.discard(),g=void 0),g=me().tempTransaction(({stateEditors:$})=>{for(let X of y)$.coreByProject.historic.sheetsById.sequence.transformKeyframes(z(j({},X.track.sheetObject.address),{trackId:X.track.id,keyframeIds:[X.kf.id,X.track.data.keyframes[X.track.data.keyframes.indexOf(X.kf)+1].id],translate:V,scale:1,origin:0,snappingFunction:A.closestGridPosition}))})},onDragEnd(D){D?g&&g.commit():g&&g.discard()}}}}),[]);return xi(i,c)}function UTe(i,s){return Ts(s,{displayName:"Aggregate Tween",menuItems:()=>{let a=i.utils.allConnections.reduce((y,w)=>{var S;return y.concat((S=PV(z(j({},w),{keyframeIds:[w.left.id,w.right.id]})))!=null?S:[])},[]),c=gI(a.map(y=>y.pathToProp)),p=a.map(({keyframe:y,pathToProp:w})=>({keyframe:y,pathToProp:w.slice(c.length)})),f=i.editorProps.viewModel,g=f.type==="sheet"?f.sheet.address:f.sheetObject.address;return[{label:"Copy",callback:()=>{if(i.editorProps.selection){let y=BI(g.projectId,g.sheetId,i.editorProps.selection);me().transaction(w=>{w.stateEditors.studio.ahistoric.setClipboardKeyframes(y)})}else me().transaction(y=>{y.stateEditors.studio.ahistoric.setClipboardKeyframes(p)})}},{label:"Delete",callback:()=>{i.editorProps.selection?i.editorProps.selection.delete():me().transaction(({stateEditors:y})=>{for(let w of i.utils.allConnections)y.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},g),{objectKey:w.objectKey,keyframeIds:[w.left.id,w.right.id],trackId:w.trackId}))})}}]}})}var qI,pl,UV,yie,bie,_ie,wie,VTe=C(()=>{qI=Mt,pl=Z(Re()),Qre(),uc(),mr(),Fe(),no(),FI(),BV(),Ne(),dc(),Zy(),Ms(),vc(),UV=5,bie=se(cc)(yie||(yie=G([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: rgba(26, 28, 30, 0.97);
`]))),_ie=pl.default.forwardRef((i,s)=>{let{allConnections:a}=vie(i);return pl.default.createElement(bie,{showPopoverEdgeTriangle:!1,ref:s},pl.default.createElement(EV,{curveConnection:a[0],additionalConnections:a,onRequestClose:i.closePopover}))}),wie=i=>{let[s,a]=sr(null),{editorProps:c}=i,[p]=UTe(i,a),[f]=BTe(a,i.editorProps),{node:g,toggle:y,close:w}=lc(()=>{let I=(0,qI.val)(c.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:I.screenX+UV,maxX:I.screenX+I.width-UV}}},()=>pl.default.createElement(_ie,z(j({},c),{closePopover:w}))),{connected:S,isAggregateEditingInCurvePopover:T}=i.utils;return S||f?pl.default.createElement(pl.default.Fragment,null,pl.default.createElement(OV,{ref:s,connectorLengthInUnitSpace:S?S.length:0,isSelected:S?S.selected:!1,isPopoverOpen:T,openPopover:I=>{a&&y(I,a)}}),g,p):pl.default.createElement(pl.default.Fragment,null)}});function jTe(i){let s={isSelected:i.isSelected,flag:i.flag};return zd.default.createElement(XI,null,i.isAllHere?zd.default.createElement(kie,j({},s)):zd.default.createElement(Tie,j({},s)))}var zd,VV,xie,Sie,XI,Eie,Cie,jV,zV,HV,GV,Pie,kie,Tie,zTe=C(()=>{zd=Z(Re()),Ne(),xI(),vr(),VV=16,xie=VV+2,XI=se.div(Sie||(Sie=G([`
  position: absolute;
  `,`
  z-index: 1;
`])),hl(VV)),Cie=se.div(Eie||(Eie=G([`
  z-index: 2;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  &:hover
    + `,`,
    #pointer-root.draggingPositionInSequenceEditor
    &:hover
    + `,` {
    `,`
  }
`])),hl(12),hr,XI,XI,hl(xie)),jV="#F2C95C",zV="#40AAA4",HV="#45747C",GV=i=>i.isSelected===0?jV:i.isSelected===1?zV:HV,Pie=i=>i.isSelected===0?jV:i.isSelected===1?zV:HV,kie=i=>zd.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},zd.default.createElement("rect",{x:"4.46443",y:"10.0078",width:"5",height:"5",transform:"rotate(-45 4.46443 10.0078)",fill:"#212327",stroke:Pie(i)}),zd.default.createElement("rect",{x:"3.75732",y:"6.01953",width:"6",height:"6",transform:"rotate(-45 3.75732 6.01953)",fill:GV(i),stroke:i.flag===2?"white":void 0,strokeWidth:i.flag===2?"2px":void 0})),Tie=i=>zd.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},zd.default.createElement("rect",{x:"4.46443",y:"8",width:"5",height:"5",transform:"rotate(-45 4.46443 8)",fill:"#23262B",stroke:i.flag===2?"white":GV(i),strokeWidth:i.flag===2?"2px":void 0}))});function HTe(i,s){let a=i.children.map(c=>c.type==="propWithChildren"?$V(c,s):Mie(c,s)).filter(WV);return a.length===0?null:{type:"sheetObject",sheetObject:i.sheetObject,children:a}}function $V(i,s){let a=i.children.map(c=>c.type==="propWithChildren"?$V(c,s):Mie(c,s)).filter(WV);return a.length===0?null:{type:"propWithChildren",pathToProp:i.pathToProp,propConfig:i.propConf,children:a}}function Mie(i,s){let a=s.find(c=>c.track.id===i.trackId);return a?{type:"primitiveProp",keyframe:a.kf,pathToProp:i.pathToProp,propConfig:i.propConf,sheetObject:i.sheetObject,trackId:i.trackId}:null}function GTe(i){var s,a,c,p;let{cur:f}=i.utils,g=zI(i.editorProps.viewModel.type==="sheet"?null:i.editorProps.viewModel.type==="sheetObject"?(a=(s=HTe(i.editorProps.viewModel,f.keyframes))==null?void 0:s.children)!=null?a:null:(p=(c=$V(i.editorProps.viewModel,f.keyframes))==null?void 0:c.children)!=null?p:null),y=av(i.utils.itemKey);y.useRelations(()=>f.keyframes.map(I=>({affects:I.itemKey,flag:2})),[f.keyframes.map(I=>I.track.id).join("-")]);let[w,S]=sr(null),[T]=$Te(i,S);return GS.default.createElement(GS.default.Fragment,null,GS.default.createElement(Cie,z(j(j({ref:w},y.attrs),As.includePositionSnapAttrs(f.position)),{onClick:I=>i.editorProps.viewModel.type!=="sheet"?g.open(I,w.current):null})),GS.default.createElement(jTe,{flag:y.flag,isAllHere:f.allHere,isSelected:f.selected}),T,g.node)}function $Te(i,s){return Ts(s,{displayName:"Aggregate Keyframe",menuItems:()=>{let a=i.editorProps.viewModel,c=i.editorProps.selection;return[{label:c?"Copy (selection)":"Copy",callback:()=>{if(c){let{projectId:p,sheetId:f}=a.type==="sheet"?a.sheet.address:a.sheetObject.address,g=BI(p,f,c);me().transaction(y=>{y.stateEditors.studio.ahistoric.setClipboardKeyframes(g)})}else{let p=i.utils.cur.keyframes.flatMap(w=>{var S;return(S=PV(z(j({},w.track.sheetObject.address),{trackId:w.track.id,keyframeIds:[w.kf.id]})))!=null?S:[]}),f=a.type==="sheet"?[]:a.type==="sheetObject"?[a.sheetObject.address.objectKey]:a.type==="propWithChildren"?[a.sheetObject.address.objectKey,...a.pathToProp]:[],g=gI([f,...p.map(w=>w.pathToProp)]),y=p.map(({keyframe:w,pathToProp:S})=>({keyframe:w,pathToProp:S.slice(g.length)}));me().transaction(w=>{w.stateEditors.studio.ahistoric.setClipboardKeyframes(y)})}}},{label:c?"Delete (selection)":"Delete",callback:()=>{c?c.delete():me().transaction(({stateEditors:p})=>{for(let f of i.utils.cur.keyframes)p.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},f.track.sheetObject.address),{keyframeIds:[f.kf.id],trackId:f.track.id}))})}}]}})}var GS,WV,WTe=C(()=>{GS=Z(Re()),mr(),lv(),Ms(),zTe(),Fe(),Zy(),vc(),du(),GI(),WV=i=>i!==null}),Aie,$S,Iie,Rie,Oie,Die,KTe=C(()=>{Aie=Mt,$S=Z(Re()),Ne(),VTe(),BV(),WTe(),Rie=se.div(Iie||(Iie=G([`
  position: absolute;
`]))),Oie=$S.default.memo(i=>{let s=vie(i);return $S.default.createElement(Rie,{style:{top:"".concat(i.viewModel.nodeHeight/2,"px"),left:"calc(".concat((0,Aie.val)(i.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(s.cur.position,"px))")}},$S.default.createElement(GTe,{editorProps:i,utils:s}),$S.default.createElement(wie,{editorProps:i,utils:s}))}),Die=Oie});function qTe(i){let{layoutP:s,aggregatedKeyframes:a,viewModel:c}=i,p=xp("AggregatedKeyframeTrack"),[f,g]=sr(null),{selectedPositions:y,selection:w}=XTe(s,a),[S,T,I]=QTe(g,i,()=>p._debug("see aggregatedKeyframes",i.aggregatedKeyframes)),A=(0,fl.useMemo)(()=>[...a.byPosition.entries()].sort((X,re)=>X[0]-re[0]).map(([X,re])=>({position:X,keyframes:re,selected:y.get(X),allHere:re.length===a.tracks.length})),[a,y]),k=$n(pV),D=k.mode==="snapToAll",O=k.mode==="snapToSome"?k.positions:mU,F=(0,fl.useMemo)(()=>c.type==="sheet"?Gke(c,O):sV(c,O),[O]).map(X=>fl.default.createElement(LS,{key:"snap-target-"+X,layoutP:s,leaf:c,position:X})),V=(0,fl.useMemo)(()=>A.map(({position:X,keyframes:re},ne)=>({position:X,editorProps:{index:ne,layoutP:s,viewModel:c,aggregateKeyframes:A,selection:y.has(X)?w:void 0}})),[A,c,y]);nMe(g,X=>{var re;return(re=V.find(ne=>ne.position===X))==null?void 0:re.editorProps},{onClickFromDrag(X){}});let $=V.map((X,re)=>fl.default.createElement(fl.Fragment,{key:"agg-"+A[re].keyframes[0].kf.id},D&&fl.default.createElement(LS,{layoutP:s,leaf:c,position:X.position}),fl.default.createElement(Die,j({},X.editorProps))));return fl.default.createElement(Bie,{ref:f,style:{background:I?"#444850 ":"unset"}},$,F,S)}function XTe(i,s){return Un(()=>(0,Rs.val)(YTe(i,s)),[i,s])}function YTe(i,s){return(0,Rs.prism)(()=>{let a=(0,Rs.val)(i.selectionAtom),c=(0,Rs.val)(a.pointer.current);if(!c)return Uie;let p=new Map;for(let[f,g]of s.byPosition){let y=ZTe(g,c);y!==void 0&&y!==ZI&&p.set(f,y)}return{selectedPositions:p,selection:(0,Rs.val)(a.pointer.current)}})}function ZTe(i,s){var a,c,p;let f;for(let{track:g,kf:y}of i){let w=((p=(c=(a=s.byObjectKey[g.sheetObject.address.objectKey])==null?void 0:a.byTrackId[g.id])==null?void 0:c.byKeyframeId)==null?void 0:p[y.id])===!0;f===void 0?w?f=XV:f=ZI:w?f===ZI&&(f=YV):f===XV&&(f=YV)}return f}function QTe(i,s,a){return Ts(i,{onOpen:a,displayName:"Aggregate Keyframe Track",menuItems:()=>{var c;let p=(c=(0,Rs.pointerToPrism)(me().atomP.ahistoric.clipboard.keyframesWithRelativePaths).getValue())!=null?c:[];return[JTe(s,p)]}})}function JTe(i,s){return{label:"Paste Keyframes",enabled:s.length>0,callback:()=>{let a=(0,Rs.val)(i.layoutP.sheet).getSequence();i.viewModel.type==="sheet"?eMe(i.viewModel,s,a):tMe(i.viewModel,s,a)}}}function eMe(i,s,a){var c;let{projectId:p,sheetId:f,sheetInstanceId:g}=i.sheet.address;if(s.every(({pathToProp:y})=>y.length===0))for(let y of i.children.map(w=>w.sheetObject)){let w=(0,Rs.pointerToPrism)(me().atomP.historic.coreByProject[p].sheetsById[f].sequence.tracksByObject[y.address.objectKey]).getValue(),S=Object.keys((c=w==null?void 0:w.trackData)!=null?c:{});KV(y.address,S,s,a)}else{let y=(0,Rs.pointerToPrism)(me().atomP.historic.coreByProject[p].sheetsById[f].sequence.tracksByObject).getValue(),w=s.map(({keyframe:S,pathToProp:T})=>{var I,A;let k=T[0],D=T.slice(1),O=mc([...D]),F=((A=(I=y==null?void 0:y[k])==null?void 0:I.trackIdByPropPath)!=null?A:{})[O];return F?{keyframe:S,trackId:F,address:{objectKey:k,projectId:p,sheetId:f,sheetInstanceId:g}}:null}).filter(S=>S!==null);Lie(w,a)}}function tMe(i,s,a){var c;let{projectId:p,sheetId:f,objectKey:g}=i.sheetObject.address,y=(0,Rs.pointerToPrism)(me().atomP.historic.coreByProject[p].sheetsById[f].sequence.tracksByObject[g]).getValue();if(s.every(({pathToProp:w})=>w.length===0)){let w=Object.keys((c=y==null?void 0:y.trackData)!=null?c:{});if(i.type==="sheetObject")KV(i.sheetObject.address,w,s,a);else{let S=(y==null?void 0:y.trackIdByPropPath)||{},T=Object.entries(S).filter(([I,A])=>A!==void 0&&Dke(yI(I),i.pathToProp)).map(([I,A])=>A);KV(i.sheetObject.address,T,s,a)}}else{let w=(y==null?void 0:y.trackIdByPropPath)||{},S=i.type==="propWithChildren"?i.pathToProp:[],T=s.map(({keyframe:I,pathToProp:A})=>{let k=mc([...S,...A]),D=w[k];return D?{keyframe:I,trackId:D,address:i.sheetObject.address}:null}).filter(I=>I!==null);Lie(T,a)}}function KV(i,s,a,c){var p;c.position=c.closestGridPosition(c.position);let f=(p=Nie(a.map(({keyframe:g})=>g)))==null?void 0:p.position;me().transaction(({stateEditors:g})=>{for(let y of s)for(let{keyframe:w}of a)g.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(j({},i),{trackId:y,position:c.position+w.position-f,handles:w.handles,value:w.value,snappingFunction:c.closestGridPosition,type:w.type}))})}function Lie(i,s){var a;s.position=s.closestGridPosition(s.position);let c=(a=Nie(i.map(({keyframe:p})=>p)))==null?void 0:a.position;me().transaction(({stateEditors:p})=>{for(let{keyframe:f,trackId:g,address:y}of i)p.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(j({},y),{trackId:g,position:s.position+f.position-c,handles:f.handles,value:f.value,snappingFunction:s.closestGridPosition,type:f.type}))})}function Nie(i){let s=null;for(let a of i)(s===null||a.position<s.position)&&(s=a);return s}function nMe(i,s,a){let c=xp("useDragForAggregateKeyframeDot"),p=yne(),f=(0,fl.useMemo)(()=>({debugName:"AggregateKeyframeDot/useDragKeyframe",onDragStart(y){c._debug("onDragStart",{target:y.target});let w=Number(y.target.dataset.pos),S=s(w);if(!S)return c._debug("no props found for ",{positionToFind:w}),!1;p(!0,w);let T=(0,Rs.prism)(gie(S)).getValue().cur.keyframes,I=S.viewModel.type==="sheet"?S.viewModel.sheet.address:S.viewModel.sheetObject.address,A=(0,Rs.val)(me().atomP.historic.coreByProject[I.projectId].sheetsById[I.sheetId].sequence.tracksByObject),k=Pne(A,function(V,{trackId:$,objectKey:X}){var re,ne;return T.every(ae=>V.id!==ae.kf.id)&&!(S.selection&&(ne=(re=S.selection.byObjectKey[X])==null?void 0:re.byTrackId[$])!=null&&ne.byKeyframeId[V.id])});if(Cne(k),S.selection&&S.aggregateKeyframes[S.index].selected===0){let{selection:V,viewModel:$}=S,X=V.getDragHandlers(z(j({},I),{domNode:i,positionAtStartOfDrag:T[0].kf.position})).onDragStart(y);return X&&z(j({},X),{onClick:a.onClickFromDrag,onDragEnd:(...re)=>{var ne;(ne=X.onDragEnd)==null||ne.call(X,...re),fv()}})}let D=S,O=(0,Rs.val)(D.layoutP.scaledSpace.toUnitSpace),F;return{onDrag(V,$,X){var re;let ne=Math.max((re=As.checkIfMouseEventSnapToPos(X,{}))!=null?re:T[0].kf.position+O(V),0);p(!0,ne),F==null||F.discard(),F=void 0,F=me().tempTransaction(({stateEditors:ae})=>{for(let Se of T){let fe=Se.kf;ae.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},Se.track.sheetObject.address),{trackId:Se.track.id,keyframes:[z(j({},fe),{position:ne})],snappingFunction:(0,Rs.val)(D.layoutP.sheet).getSequence().closestGridPosition}))}})},onDragEnd(V){p(!1,-1),V?F==null||F.commit():(F==null||F.discard(),a.onClickFromDrag(y)),fv()},onClick(V){a.onClickFromDrag(V)}}}}),[s,a.onClickFromDrag]),[g]=xi(i,f);return ul(g,"draggingPositionInSequenceEditor","ew-resize"),[g]}var Rs,fl,Fie,Bie,Uie,Vie,YI,qV,XV,YV,ZI,ZV=C(()=>{hn(),Rs=Mt,fl=Z(Re()),Ne(),Ms(),mr(),KTe(),Wy(),Sp(),BV(),du(),no(),jo(),Ea(),Fe(),vc(),mv(),TZ(),mv(),Wy(),Bie=se.div(Fie||(Fie=G([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),Uie=Object.freeze({selectedPositions:new Map,selection:void 0}),Vie=fl.default.memo(qTe),YI=Vie,qV=(i=>(i[i.AllSelected=0]="AllSelected",i[i.AtLeastOneUnselected=1]="AtLeastOneUnselected",i[i.NoneSelected=2]="NoneSelected",i))(qV||{}),{AllSelected:XV,AtLeastOneUnselected:YV,NoneSelected:ZI}=qV}),Jy,QV,jie,rMe=C(()=>{hn(),Jy=Z(Re()),LTe(),PI(),ZV(),Wy(),Sp(),QV=(i,s)=>i.type==="propWithChildren"?Jy.default.createElement(jie,{layoutP:s,viewModel:i,key:"prop"+i.pathToProp[i.pathToProp.length-1]}):Jy.default.createElement(mie,{layoutP:s,leaf:i,key:"prop"+i.pathToProp[i.pathToProp.length-1]}),jie=({viewModel:i,layoutP:s})=>{let a=xp("RightPropWithChildrenRow",i.pathToProp.join());return Un(()=>{let c=_I(i);return Jy.default.createElement(FK,{logger:a},Jy.default.createElement(qy,{leaf:i,node:Jy.default.createElement(YI,{layoutP:s,aggregatedKeyframes:c,viewModel:i}),isCollapsed:i.isCollapsed},i.children.map(p=>QV(p,s))))},[i,s])}}),JV,zie,Hie,iMe=C(()=>{hn(),JV=Z(Re()),rMe(),PI(),Wy(),ZV(),zie=({leaf:i,layoutP:s})=>Un(()=>{let a=_I(i);return JV.default.createElement(qy,{leaf:i,node:JV.default.createElement(YI,{layoutP:s,aggregatedKeyframes:a,viewModel:i}),isCollapsed:i.isCollapsed},i.children.map(c=>QV(c,s)))},[i,s]),Hie=zie}),QI,Gie,$ie,oMe=C(()=>{hn(),QI=Z(Re()),iMe(),PI(),Wy(),ZV(),Gie=({leaf:i,layoutP:s})=>Un(()=>{let a=_I(i);return QI.default.createElement(qy,{leaf:i,node:QI.default.createElement(YI,{layoutP:s,aggregatedKeyframes:a,viewModel:i}),isCollapsed:i.isCollapsed},i.children.map(c=>QI.default.createElement(Hie,{layoutP:s,key:"sheetObject-"+c.sheetObject.address.objectKey,leaf:c})))},[i,s]),$ie=Gie}),WS,wv,JI,Wie,Kie,qie,Xie,Yie=C(()=>{hn(),WS=Mt,wv=Z(Re()),Ne(),Kke(),Fne(),oMe(),JI=1e6,Kie=se.ul(Wie||(Wie=G([`
  margin: 0;
  padding: 0;
  list-style: none;
  position: absolute;
  left: 0;
  width: `,`px;
`])),JI),qie=({layoutP:i})=>Un(()=>{let s=(0,WS.val)(i.tree),a=(0,WS.val)(i.tree.top)+Math.max((0,WS.val)(i.tree.heightIncludingChildren),(0,WS.val)(i.dopeSheetDims.height));return wv.default.createElement(wv.default.Fragment,null,wv.default.createElement(mV,{layoutP:i,height:a},wv.default.createElement(one,{layoutP:i,height:a},wv.default.createElement(Kie,{style:{top:s.top+"px"}},wv.default.createElement($ie,{leaf:s,layoutP:i})))))},[i]),Xie=qie});function e4(i,s,a,c){let p="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(i,"px)"),f="calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(s,") * 1px)");a===0&&(a=1e-4);let g="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(a,")");c===0&&(c=.001);let y="calc(var(--graphEditorVerticalSpace) * ".concat(c*-1,")");return"translate(".concat(p,", ").concat(f,") scale(").concat(g,", ").concat(y,")")}function sMe(i,s){let{index:a,trackData:c}=s,p=c.keyframes[a],f=c.keyframes[a+1];return Ts(i,{menuItems:()=>[{label:"Delete",callback:()=>{me().transaction(({stateEditors:g})=>{let{deleteKeyframes:y}=g.coreByProject.historic.sheetsById.sequence;y(z(j({},s.sheetObject.address),{trackId:s.trackId,keyframeIds:[p.id,f.id]}))})}}]})}var eR,Zie,Qie,Jie,eoe,toe,t4=C(()=>{Cp(),Fe(),Ms(),mr(),eR=Z(Re()),Ne(),Qie=se.path(Zie||(Zie=G([`
  stroke-width: 2;
  stroke: var(--main-color);
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),Jie="M 0 0 L 1 0 L 1 1",eoe=i=>{let{index:s,trackData:a}=i,c=a.keyframes[s],p=a.keyframes[s+1],f=p.position-c.position,[g,y]=sr(null),[w]=sMe(y,i),S=i.isScalar?NA(c.value,i.propConfig):0,T=i.isScalar?NA(p.value,i.propConfig):1,I=i.extremumSpace.fromValueSpace(S),A=i.extremumSpace.fromValueSpace(T)-I,k=e4(c.position,I,f,A),D=c.handles[2],O=c.handles[3],F=p.handles[0],V=p.handles[1],$="M 0 0 C ".concat(D," ").concat(O," ").concat(F," ").concat(V," 1 1");return eR.default.createElement(eR.default.Fragment,null,eR.default.createElement(Qie,{ref:g,d:!c.type||c.type==="bezier"?$:Jie,style:{transform:k}}),w)},toe=eoe});function aMe(i,s){let a=(0,xv.useRef)(s);a.current=s;let c=(0,xv.useMemo)(()=>({debugName:"CurveHandler/useOurDrags",lockCSSCursorTo:"move",onDragStart(){let p,f=a.current,g=(0,KS.val)(f.layoutP.scaledSpace.toUnitSpace),y=(0,KS.val)(f.layoutP.graphEditorVerticalSpace.toExtremumSpace),w=f.extremumSpace.lock();return{onDrag(S,T){p&&(p.discard(),p=void 0);let{index:I,trackData:A}=f,k=A.keyframes[I],D=A.keyframes[I+1],O=g(S)/(D.position-k.position),F=-T,V=y(F),$=f.extremumSpace.deltaToValueSpace(V),X=s.isScalar?k.value:0,re=s.isScalar?D.value:1,ne=$/(re-X);if(f.which==="left"){let ae=li(k.handles[2]+O,0,1),Se=k.handles[3]+ne;p=me().tempTransaction(({stateEditors:fe})=>{fe.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},f.sheetObject.address),{snappingFunction:(0,KS.val)(f.layoutP.sheet).getSequence().closestGridPosition,trackId:f.trackId,keyframes:[z(j({},k),{handles:[k.handles[0],k.handles[1],ae,Se]})]}))})}else{let ae=li(D.handles[0]+O,0,1),Se=D.handles[1]+ne;p=me().tempTransaction(({stateEditors:fe})=>{fe.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},f.sheetObject.address),{trackId:f.trackId,snappingFunction:(0,KS.val)(f.layoutP.sheet).getSequence().closestGridPosition,keyframes:[z(j({},D),{handles:[ae,Se,D.handles[2],D.handles[3]]})]}))})}},onDragEnd(S){w(),S?p&&p.commit():p&&p.discard()}}}}),[]);xi(i,c)}function lMe(i,s){return Ts(i,{menuItems:()=>[{label:"Delete",callback:()=>{me().transaction(({stateEditors:a})=>{a.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},s.sheetObject.address),{keyframeIds:[s.keyframe.id],trackId:s.trackId}))})}}]})}var KS,xv,noe,n4,roe,ioe,ooe,soe,aoe,r4,uMe=C(()=>{Fe(),Ms(),no(),mr(),KS=Mt,Jr(),xv=Z(Re()),Ne(),t4(),vr(),n4=se.circle(noe||(noe=G([`
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  fill: var(--main-color);
  r: 2px;
  pointer-events: none;
`]))),ioe=se.circle(roe||(roe=G([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  cursor: move;
  `,`;
  &:hover {
  }
  &:hover + `,` {
    r: 6px;
  }
`])),hr,n4),soe=se.path(ooe||(ooe=G([`
  stroke-width: 1;
  stroke: var(--main-color);
  /* stroke: gray; */
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),aoe=i=>{let[s,a]=sr(null),{index:c,trackData:p}=i,f=p.keyframes[c],g=p.keyframes[c+1],[y]=lMe(a,i);aMe(a,i);let w=i.which==="left"?f.handles[2]:g.handles[0],S=f.position+(g.position-f.position)*w,T=i.which==="left"?f.handles[3]:g.handles[1],I=i.isScalar?f.value:0,A=i.isScalar?g.value:1,k=I+(A-I)*T,D=i.extremumSpace.fromValueSpace(k),O=D-i.extremumSpace.fromValueSpace(i.which==="left"?I:A),F=e4(i.which==="left"?f.position:g.position,i.extremumSpace.fromValueSpace(i.which==="left"?I:A),S-(i.which==="left"?f.position:g.position),O);return xv.default.createElement("g",null,xv.default.createElement(ioe,{ref:s,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(S," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(D,") * 1px)")}}),xv.default.createElement(n4,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(S," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(D,") * 1px)")}}),xv.default.createElement(soe,{d:"M 0 0 L 1 1",style:{transform:F}}),y)},r4=aoe});function cMe(i){let[s,a]=(0,Fp.useState)(!1);Vd(s,i.props.keyframe.position);let c=(0,Fp.useRef)(i.props);c.current=i.props;let p=(0,Fp.useMemo)(()=>({debugName:"GraphEditorDotScalar/useDragKeyframe",lockCSSCursorTo:"move",onDragStart(f){a(!0);let g=!!f.altKey,y=c.current,w=(0,tR.val)(y.layoutP.scaledSpace.toUnitSpace),S=(0,tR.val)(y.layoutP.graphEditorVerticalSpace.toExtremumSpace),T=y.extremumSpace.lock(),I;return{onDrag(A,k){let D=y.trackData.keyframes[y.index],O=w(A),F=-k,V=S(F),$=y.extremumSpace.deltaToValueSpace(V),X=[],re=z(j({},D),{position:D.position+O,value:D.value+$,handles:[...D.handles]});if(X.push(re),g){let ne=y.trackData.keyframes[y.index-1];if(ne&&Math.abs(D.value-ne.value)>0){let Se=z(j({},ne),{handles:[...ne.handles]});X.push(Se),Se.handles[3]=hMe(ne.handles[3],ne.value,ne.value,D.value,re.value)}let ae=y.trackData.keyframes[y.index+1];if(ae&&Math.abs(D.value-ae.value)>0){let Se=z(j({},ae),{handles:[...ae.handles]});X.push(Se),Se.handles[1]=pMe(Se.handles[1],Se.value,Se.value,D.value,re.value)}}I==null||I.discard(),I=me().tempTransaction(({stateEditors:ne})=>{ne.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},y.sheetObject.address),{trackId:y.trackId,keyframes:X,snappingFunction:(0,tR.val)(y.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(A){a(!1),T(),A?I==null||I.commit():(I==null||I.discard(),i.onDetectedClick(f))}}}}),[]);return xi(i.node,p),ul(s,"draggingPositionInSequenceEditor","move"),s}function dMe(i,s){return Ts(i,{menuItems:()=>[{label:"Delete",callback:()=>{me().transaction(({stateEditors:a})=>{a.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},s.sheetObject.address),{keyframeIds:[s.keyframe.id],trackId:s.trackId}))})}}]})}function hMe(i,s,a,c,p){return(c-s)*i/(p-a)}function pMe(i,s,a,c,p){return((s-c)*i+c-s+a-p)/(a-p)}var tR,Fp,loe,i4,uoe,coe,doe,hoe,fMe=C(()=>{Fe(),Ms(),no(),mr(),tR=Mt,Fp=Z(Re()),Ne(),jo(),jo(),vr(),Ea(),du(),GI(),lv(),i4=se.circle(loe||(loe=G([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),coe=se.circle(uoe||(uoe=G([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: move;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),hr,i4,Id),doe=i=>{let[s,a]=sr(null),{index:c,trackData:p}=i,f=p.keyframes[c],[g]=dMe(a,i),y=av(i.itemKey),w=f.value,S=i.extremumSpace.fromValueSpace(w),T=zI([{type:"primitiveProp",keyframe:i.keyframe,pathToProp:i.pathToProp,propConfig:i.propConfig,sheetObject:i.sheetObject,trackId:i.trackId}]),I=cMe({node:a,props:i,onDetectedClick:A=>T.toggle(A,A.target instanceof Element?A.target:a)});return Fp.default.createElement(Fp.default.Fragment,null,Fp.default.createElement(coe,z(j(j(j({ref:s,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(f.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(S,") * 1px)")}},gc(f.position)),As.includePositionSnapAttrs(f.position)),y.attrs),{className:I?"beingDragged":""})),Fp.default.createElement(i4,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(f.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(S,") * 1px)"),fill:y.flag===2?"white":void 0}}),T.node,g)},hoe=doe});function mMe(i){let[s,a]=(0,Bp.useState)(!1);Vd(s,i.props.keyframe.position);let c=(0,Bp.useRef)(i.props);c.current=i.props;let p=(0,Bp.useMemo)(()=>({debugName:"GraphEditorDotNonScalar/useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(f){a(!0);let g=c.current,y=(0,o4.val)(g.layoutP.scaledSpace.toUnitSpace),w=g.extremumSpace.lock(),S;return{onDrag(T,I){let A=g.trackData.keyframes[g.index],k=y(T),D=[],O=z(j({},A),{position:A.position+k,value:A.value,handles:[...A.handles]});D.push(O),S==null||S.discard(),S=me().tempTransaction(({stateEditors:F})=>{F.coreByProject.historic.sheetsById.sequence.replaceKeyframes(z(j({},g.sheetObject.address),{trackId:g.trackId,keyframes:D,snappingFunction:(0,o4.val)(g.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(T){a(!1),w(),T?S==null||S.commit():(S==null||S.discard(),i.onDetectedClick(f))}}}}),[]);return xi(i.node,p),ul(s,"draggingPositionInSequenceEditor","ew-resize"),s}function vMe(i,s){return Ts(i,{menuItems:()=>[{label:"Delete",callback:()=>{me().transaction(({stateEditors:a})=>{a.coreByProject.historic.sheetsById.sequence.deleteKeyframes(z(j({},s.sheetObject.address),{keyframeIds:[s.keyframe.id],trackId:s.trackId}))})}}]})}var o4,Bp,poe,s4,foe,moe,voe,a4,gMe=C(()=>{Fe(),Ms(),no(),mr(),o4=Mt,Bp=Z(Re()),Ne(),jo(),jo(),vr(),Ea(),du(),GI(),lv(),s4=se.circle(poe||(poe=G([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),moe=se.circle(foe||(foe=G([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: ew-resize;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),hr,s4,Id),voe=i=>{let[s,a]=sr(null),{index:c,trackData:p,itemKey:f}=i,g=p.keyframes[c],[y]=vMe(a,i),w=av(f),S=i.which==="left"?0:1,T=zI([{type:"primitiveProp",keyframe:i.keyframe,pathToProp:i.pathToProp,propConfig:i.propConfig,sheetObject:i.sheetObject,trackId:i.trackId}]),I=mMe({node:a,props:i,onDetectedClick:k=>T.toggle(k,k.target instanceof Element?k.target:a)}),A=i.extremumSpace.fromValueSpace(S);return Bp.default.createElement(Bp.default.Fragment,null,Bp.default.createElement(moe,z(j(j(j({ref:s,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(A,") * 1px)")}},w.attrs),gc(g.position)),As.includePositionSnapAttrs(g.position)),{className:I?"beingDragged":""})),Bp.default.createElement(s4,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(g.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(A,") * 1px)"),fill:w.flag===2?"white":void 0}}),T.node,y)},a4=voe}),nR,goe,yoe,boe,_oe,yMe=C(()=>{nR=Z(Re()),Ne(),t4(),yoe=se.path(goe||(goe=G([`
  stroke-width: 2;
  stroke: var(--main-color);
  stroke-dasharray: 3 2;
  fill: none;
  vector-effect: non-scaling-stroke;
  opacity: 0.3;
`]))),boe=i=>{let{index:s,trackData:a}=i,c="M 0 0 L 1 1",p=e4(a.keyframes[s].position,i.extremumSpace.fromValueSpace(0),0,i.extremumSpace.fromValueSpace(1)-i.extremumSpace.fromValueSpace(0));return nR.default.createElement(nR.default.Fragment,null,nR.default.createElement(yoe,{d:c,style:{transform:p}}))},_oe=boe}),Ho,woe,xoe,Soe,Eoe,Coe,bMe=C(()=>{Ho=Z(Re()),Ne(),t4(),uMe(),fMe(),gMe(),yMe(),xoe=se.g(woe||(woe=G([`
  /* position: absolute; */
`]))),Soe=Ho.default.createElement(Ho.default.Fragment,null),Eoe=i=>{let{index:s,trackData:a,isScalar:c}=i,p=a.keyframes[s],f=a.keyframes[s+1],g=p.connectedRight&&!!f&&f.value!==p.value;return Ho.default.createElement(xoe,null,g?Ho.default.createElement(Ho.default.Fragment,null,Ho.default.createElement(toe,j({},i)),!p.type||p.type==="bezier"&&Ho.default.createElement(Ho.default.Fragment,null,Ho.default.createElement(r4,z(j({},i),{which:"left"})),Ho.default.createElement(r4,z(j({},i),{which:"right"})))):Soe,c?Ho.default.createElement(hoe,j({},i)):Ho.default.createElement(Ho.default.Fragment,null,Ho.default.createElement(a4,z(j({},i),{which:"left"})),Ho.default.createElement(a4,z(j({},i),{which:"right"})),Ho.default.createElement(_oe,j({},i))))},Coe=Eoe});function _Me(i,s){let a=1/0,c=-1/0;function p(f){a=Math.min(f,a),c=Math.max(f,c)}return i.forEach((f,g)=>{let y=NA(f.value,s);if(p(y),!f.connectedRight)return;let w=i[g+1];if(!w)return;let S=(typeof w.value=="number"?w.value:1)-y;p(y+f.handles[3]*S),p(y+w.handles[1]*S)}),[a,c]}function wMe(i){let s=0,a=1;function c(p){s=Math.min(p,s),a=Math.max(p,a)}return i.forEach((p,f)=>{if(!p.connectedRight)return;let g=i[f+1];g&&(c(p.handles[3]),c(g.handles[1]))}),[s,a]}var bc,Poe,koe,xMe=C(()=>{Nd(),bc=Z(Re()),iR(),bMe(),Cp(),hn(),Poe=bc.default.memo(({layoutP:i,trackData:s,sheetObject:a,trackId:c,color:p,pathToProp:f})=>{let g=LA($n(a.template.configPointer),f);if(pc(g))return console.error("Composite prop types cannot be keyframed"),bc.default.createElement(bc.default.Fragment,null);let[y,w]=(0,bc.useState)(!1),S=(0,bc.useMemo)(()=>{let k=new Set;return function(){let D=k.size===0;k.add(O),D&&w(!0);function O(){let F=k.size>0;k.delete(O),F&&k.size===0&&w(!1)}return O}},[]),T=(0,bc.useMemo)(()=>{let k=g.type==="number"?_Me(s.keyframes,g):wMe(s.keyframes),D=V=>(V-k[0])/(k[1]-k[0]),O=V=>k[0]+F(V),F=V=>V*(k[1]-k[0]);return{fromValueSpace:D,toValueSpace:O,deltaToValueSpace:F,lock:S}},[s.keyframes]),I=(0,bc.useRef)(void 0);y||(I.current=T);let A=s.keyframes.map((k,D)=>bc.default.createElement(Coe,{pathToProp:f,propConfig:g,itemKey:ho.forTrackKeyframe(a,c,k.id),keyframe:k,index:D,trackData:s,layoutP:i,sheetObject:a,trackId:c,isScalar:g.type==="number",key:k.id,extremumSpace:I.current,color:p}));return bc.default.createElement("g",{style:{"--main-color":qS[p].iconColor}},A)}),koe=Poe}),Toe,rR,Moe,Aoe,SMe=C(()=>{Fe(),hn(),Toe=Mt,rR=Z(Re()),xMe(),Moe=i=>Un(()=>{let{sheetObject:s,trackId:a}=i,c=(0,Toe.val)(me().atomP.historic.coreByProject[s.address.projectId].sheetsById[s.address.sheetId].sequence.tracksByObject[s.address.objectKey].trackData[a]);return(c==null?void 0:c.type)!=="BasicKeyframedTrack"?(console.error("trackData type ".concat(c==null?void 0:c.type," is not yet supported on the graph editor")),rR.default.createElement(rR.default.Fragment,null)):rR.default.createElement(koe,z(j({},i),{trackData:c}))},[i.trackId,i.layoutP]),Aoe=Moe});function Ioe({clippedSpaceRange:i,clippedSpaceWidth:s,fps:a,gapWidth:c=120},p){let f=1/a,g=i.end-i.start,y=s/(a*g),w=Math.floor(c/y),S=(w<a?Roe(a).find(A=>A>=w):a*Math.floor(w/a))*f,T=Math.floor(i.start/S),I=Math.ceil(i.end/S);for(let A=T;A<=I;A++){let k=A*S,D=k%1===0;p(k,D)}}var Roe,Ooe=C(()=>{Jr(),Roe=c1(i=>{let s=[];for(let a=1;a<=i;a++)i%a===0&&s.push(a);return s})});function EMe(i){let{clippedSpaceWidth:s,height:a,ctx:c,unitSpaceToClippedSpace:p,snapToGrid:f}=i;c.clearRect(0,0,s,a),Ioe(i,(g,y)=>{let w=f(g),S=Math.floor(p(w));c.strokeStyle=y?"rgba(225, 225, 225, 0.04)":"rgba(255, 255, 255, 0.01)",c.beginPath(),c.moveTo(S,0),c.lineTo(S,a),c.stroke(),c.closePath()})}var Sv,Ev,Doe,Loe,Noe,Foe,Boe,Uoe,Voe,joe,l4,zoe=C(()=>{Sv=Mt,Ev=Z(Re()),Ne(),Ooe(),Fe(),Loe=se.div(Doe||(Doe=G([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),Foe=se.canvas(Noe||(Noe=G([`
  position: relative;
  left: 0;
`]))),Boe=i=>{let s=i;return s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1},Uoe=()=>window.devicePixelRatio||1,Voe=i=>Uoe()/Boe(i),joe=({layoutP:i,width:s,height:a})=>{let c=(0,Ev.useRef)(null),[p,f]=(0,Ev.useState)(null),{ctx:g,ratio:y}=(0,Ev.useMemo)(()=>{if(!p)return{};let w=p.getContext("2d"),S=Voe(w);return{ctx:w,ratio:S}},[p]);return(0,Ev.useLayoutEffect)(()=>{if(!g)return;p.width=s*y,p.height=a*y;let w=(0,Sv.prism)(()=>{let S=(0,Sv.val)(i.sheet).getSequence();return{ctx:g,clippedSpaceRange:(0,Sv.val)(i.clippedSpace.range),clippedSpaceWidth:(0,Sv.val)(i.clippedSpace.width),unitSpaceToClippedSpace:(0,Sv.val)(i.clippedSpace.fromUnitSpace),height:a,leftPadding:(0,Sv.val)(i.scaledSpace.leftPadding),fps:S.subUnitsPerUnit,snapToGrid:T=>S.closestGridPosition(T)}}).onChange(me().ticker,S=>{g.save(),g.scale(y,y),EMe(S),g.restore()},!0);return()=>{w()}},[g,s,a,i]),Ev.default.createElement(Loe,{ref:c,style:{width:s+"px"}},Ev.default.createElement(Foe,{ref:f,style:{width:s+"px",height:a+"px"}}))},l4=joe}),_c,Cv,qS,Hoe,Goe,$oe,Woe,Koe,qoe,iR=C(()=>{Fe(),vc(),VA(),hn(),_c=Mt,Cv=Z(Re()),Ne(),Yie(),Fne(),SMe(),zoe(),Sa(),qS={1:{iconColor:"#b98b08"},2:{iconColor:"#70a904"},3:{iconColor:"#2e928a"},4:{iconColor:"#a943bb"},5:{iconColor:"#b90808"},6:{iconColor:"#b4bf0e"}},Goe=se.div(Hoe||(Hoe=G([`
  position: absolute;
  right: 0;
  bottom: 0;
  background: `,`;
`])),ru(.03,"#1a1c1e")),Woe=se.svg($oe||($oe=G([`
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  pointer-events: none;
`]))),Koe=({layoutP:i})=>Un(()=>{let s=(0,_c.val)(i.sheet),a=(0,_c.val)(me().atomP.historic.projects.stateByProjectId[s.address.projectId].stateBySheetId[s.address.sheetId].sequenceEditor.selectedPropsByObject),c=(0,_c.val)(i.graphEditorDims.height),p=(0,_c.val)(i.scaledSpace.fromUnitSpace)(1),f=[];if(a)for(let[y,w]of Object.entries(a)){let S=s.getObject(y);if(!S)continue;let T=(0,_c.val)(S.template.getMapOfValidSequenceTracks_forStudio());for(let[I,A]of Object.entries(w)){let k=yI(I),D=kp(T,k);D&&f.push(Cv.default.createElement(Aoe,{key:"graph-".concat(y,"-").concat(I),sheetObject:S,pathToProp:k,layoutP:i,trackId:D,color:A}))}}let g=(0,_c.val)(i.rightDims.width);return Cv.default.createElement(Goe,{style:{width:g+"px",height:c+"px","--unitSpaceToScaledSpaceMultiplier":p,"--graphEditorVerticalSpace":"".concat((0,_c.val)(i.graphEditorVerticalSpace.space))}},Cv.default.createElement(l4,{layoutP:i,width:g,height:c}),Cv.default.createElement(mV,{layoutP:i,height:c},Cv.default.createElement(Woe,{width:JI,height:c,viewBox:"0 0 ".concat(JI," ").concat(c)},Cv.default.createElement("g",{style:{transform:"translate(".concat((0,_c.val)(i.scaledSpace.leftPadding),"px, ").concat((0,_c.val)(i.graphEditorDims.padding.top),"px)")}},f))))},[i]),qoe=Koe}),Xoe,ml,Yoe,Zoe,Qoe,Joe,u4,ese,tse,nse,rse,ise,ose,sse,CMe=C(()=>{Fe(),vc(),jA(),hn(),Xoe=Mt,ml=Z(Re()),Ne(),bU(),$A(),iR(),vI(),sv(),Nte(),Yoe={label:{color:"#9a9a9a"}},Qoe=se(JU)(Zoe||(Zoe=G([""]))),u4=se(eV)(Joe||(Joe=G([`
  display: flex;
  color: `,`;
  padding-right: 12px;
  align-items: center;
  justify-content: flex-end;
  box-sizing: border-box;
`])),Yoe.label.color),tse=se.button(ese||(ese=G([`
  background: none;
  border: none;
  outline: none;
  display: flex;
  box-sizing: border-box;
  font-size: 14px;
  align-items: center;
  height: 100%;
  margin-left: 12px;
  color: `,`;

  &:not([disabled]):hover {
    color: white;
  }
`])),i=>i.isSelected?qS[i.graphEditorColor].iconColor:Tp.offColor),nse=()=>ml.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 640 512"},ml.default.createElement("g",{transform:"translate(0 100)"},ml.default.createElement("path",{fill:"currentColor",d:"M368 32h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM208 88h-84.75C113.75 64.56 90.84 48 64 48 28.66 48 0 76.65 0 112s28.66 64 64 64c26.84 0 49.75-16.56 59.25-40h79.73c-55.37 32.52-95.86 87.32-109.54 152h49.4c11.3-41.61 36.77-77.21 71.04-101.56-3.7-8.08-5.88-16.99-5.88-26.44V88zm-48 232H64c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zM576 48c-26.84 0-49.75 16.56-59.25 40H432v72c0 9.45-2.19 18.36-5.88 26.44 34.27 24.35 59.74 59.95 71.04 101.56h49.4c-13.68-64.68-54.17-119.48-109.54-152h79.73c9.5 23.44 32.41 40 59.25 40 35.34 0 64-28.65 64-64s-28.66-64-64-64zm0 272h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"}))),ise=se.span(rse||(rse=G([`
  margin-right: 4px;
  `,`;

  `,`:hover & {
    color: #ccc;
  }
`])),Pp,u4),ose=({leaf:i})=>{var s;let a=lS(i.sheetObject.propsP,i.pathToProp),c=i.sheetObject,{controlIndicators:p}=yU(a,c,i.propConf),f=Un(()=>{let A=i.sheetObject.address,k=mc(i.pathToProp);return(0,Xoe.val)(me().atomP.historic.projects.stateByProjectId[A.projectId].stateBySheetId[A.sheetId].sequenceEditor.selectedPropsByObject[A.objectKey][k])},[i]),g=(0,ml.useRef)(!1),y=typeof f=="string";g.current=y;let w=(0,ml.useCallback)(()=>{let A=i.sheetObject.address;me().transaction(({stateEditors:k})=>{g.current?k.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removePropFromGraphEditor(z(j({},A),{pathToProp:i.pathToProp})):(k.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.addPropToGraphEditor(z(j({},A),{pathToProp:i.pathToProp})),k.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!0}))})},[i]),S=(s=i.propConf.label)!=null?s:i.pathToProp[i.pathToProp.length-1],T=!0,I=(0,ml.useRef)(null);return Dte(I.current,i),ml.default.createElement(Qoe,{depth:i.depth},ml.default.createElement(u4,{ref:I,isEven:i.n%2===0,style:{height:i.nodeHeight+"px"},isSelected:y===!0},ml.default.createElement(ise,null,S),p,ml.default.createElement(tse,{onClick:w,isSelected:y===!0,graphEditorColor:f??"1",style:{opacity:1},disabled:!T},ml.default.createElement(nse,null))))},sse=ose});function c4(i,s){me().transaction(({stateEditors:a})=>{a.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.sequenceEditorCollapsableItems.set(z(j({},s.sheetAddress),{studioSheetItemKey:s.sheetItemKey,isCollapsed:i}))})}var d4=C(()=>{Fe()}),eb,h4,ase,PMe=C(()=>{eb=Z(Re()),vI(),CMe(),d4(),h4=i=>{let s="prop"+i.pathToProp[i.pathToProp.length-1];return i.shouldRender?i.type==="propWithChildren"?eb.default.createElement(ase,{leaf:i,key:s}):eb.default.createElement(sse,{leaf:i,key:s}):eb.default.createElement(eb.default.Fragment,{key:s})},ase=({leaf:i})=>eb.default.createElement(mI,{leaf:i,label:i.pathToProp[i.pathToProp.length-1],isCollapsed:i.isCollapsed,toggleCollapsed:()=>c4(!i.isCollapsed,{sheetAddress:i.sheetObject.address,sheetItemKey:i.sheetItemKey})},i.children.map(s=>h4(s)))}),lse,use,cse,kMe=C(()=>{lse=Z(Re()),vI(),PMe(),d4(),Fe(),use=({leaf:i})=>lse.default.createElement(mI,{leaf:i,label:i.sheetObject.address.objectKey,isCollapsed:i.isCollapsed,toggleSelect:()=>{me().transaction(({stateEditors:s})=>{s.studio.historic.panels.outline.selection.set([i.sheetObject])})},toggleCollapsed:()=>c4(!i.isCollapsed,{sheetAddress:i.sheetObject.address,sheetItemKey:i.sheetItemKey})},i.children.map(s=>h4(s))),cse=use}),p4,dse,hse,TMe=C(()=>{hn(),p4=Z(Re()),kMe(),vI(),d4(),xQ(),dse=({leaf:i})=>Un(()=>p4.default.createElement(mI,{leaf:i,label:i.sheet.address.sheetId,isCollapsed:i.isCollapsed,toggleCollapsed:()=>{c4(!i.isCollapsed,{sheetAddress:i.sheet.address,sheetItemKey:i.sheetItemKey})}},i.children.map(s=>p4.default.createElement(cse,{key:"sheetObject-"+_Q(s.sheetObject),leaf:s}))),[i]),hse=dse}),f4,oR,pse,fse,mse,vse,gse,yse,MMe=C(()=>{hn(),f4=Mt,oR=Z(Re()),Ne(),TMe(),fse=se.div(pse||(pse=G([`
  position: absolute;
  left: 0;
  overflow-x: visible;
`]))),vse=se.ul(mse||(mse=G([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),gse=({layoutP:i})=>Un(()=>{let s=(0,f4.val)(i.tree),a=(0,f4.val)(i.leftDims.width);return oR.default.createElement(fse,{style:{width:a+"px",top:s.top+"px"}},oR.default.createElement(vse,null,oR.default.createElement(hse,{leaf:s})))},[i]),yse=gse}),m4,bse,_se,wse,xse,AMe=C(()=>{vr(),Wd(),hn(),Sa(),m4=Z(Re()),Ne(),zoe(),_se=se.div(bse||(bse=G([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: hidden;
  background: `,`;
  pointer-events: none;
`])),()=>Pc.rightBackground,ru(.01,Nx(1*.03,Sy.panel.bg))),wse=({layoutP:i})=>{let s=$n(i.rightDims.width),a=$n(i.panelDims.height);return m4.default.createElement(_se,{style:{width:s+"px"}},m4.default.createElement(l4,{width:s,height:a,layoutP:i}))},xse=wse}),tb,Sse,Ese,Cse,Pse,IMe=C(()=>{hn(),tb=Z(Re()),Ne(),MMe(),AMe(),Yie(),dne(),Ese=se.div(Sse||(Sse=G([`
  position: absolute;
  left: 0;
  right: 0;
`]))),Cse=({layoutP:i})=>{let s=$n(i.dopeSheetDims.height);return tb.default.createElement(Ese,{style:{height:s+"px"}},tb.default.createElement(xse,{layoutP:i}),tb.default.createElement(cne,null,tb.default.createElement(yse,{layoutP:i}),tb.default.createElement(Xie,{layoutP:i})))},Pse=Cse});function RMe(i,s,a){return v4.prism.memo(i,()=>(0,v4.prism)(s),a).getValue()}var v4,OMe=C(()=>{v4=Mt});function ti(i){return function(s,a){return i(s,a())}}function Pa(i){return Object.freeze({audience:Pv(i,8)?"internal":Pv(i,16)?"dev":"public",category:Pv(i,4)?"troubleshooting":Pv(i,2)?"todo":"general",level:Pv(i,512)?512:Pv(i,256)?256:Pv(i,128)?128:64})}function Pv(i,s){return(i&s)===s}function ni(i,s){return((s&32)===32?!0:(s&16)===16?i.dev:(s&8)===8?i.internal:!1)&&i.min<=s}function kse(i=console,s={}){let a=z(j({},wc),{includes:j({},wc.includes)}),c={styled:NMe.bind(a,i),noStyle:BMe.bind(a,i)},p=LMe.bind(a);function f(){return a.loggingConsoleStyle&&a.loggerConsoleStyle?c.styled:c.noStyle}return a.create=f(),{configureLogger(g){var y;g==="console"?(a.loggerConsoleStyle=wc.loggerConsoleStyle,a.create=f()):g.type==="console"?(a.loggerConsoleStyle=(y=g.style)!=null?y:wc.loggerConsoleStyle,a.create=f()):g.type==="keyed"?(a.creatExt=w=>g.keyed(w.names),a.create=p):g.type==="named"&&(a.creatExt=DMe.bind(null,g.named),a.create=p)},configureLogging(g){var y,w,S,T,I;a.includes.dev=(y=g.dev)!=null?y:wc.includes.dev,a.includes.internal=(w=g.internal)!=null?w:wc.includes.internal,a.includes.min=(S=g.min)!=null?S:wc.includes.min,a.include=(T=g.include)!=null?T:wc.include,a.loggingConsoleStyle=(I=g.consoleStyle)!=null?I:wc.loggingConsoleStyle,a.create=f()},getLogger(){return a.create({names:[]})}}}function DMe(i,s){let a=[];for(let{name:c,key:p}of s.names)a.push(p==null?c:"".concat(c," (").concat(p,")"));return i(a)}function LMe(i){let s=j(j({},this.includes),this.include(i)),a=this.filtered,c=this.named.bind(this,i),p=this.creatExt(i),f=ni(s,524),g=ni(s,522),y=ni(s,521),w=ni(s,529),S=ni(s,545),T=ni(s,265),I=ni(s,268),A=ni(s,273),k=ni(s,289),D=ni(s,137),O=ni(s,145),F=ni(s,73),V=ni(s,81),$=f?p.error.bind(p,na._hmm):a.bind(i,524),X=g?p.error.bind(p,na._todo):a.bind(i,522),re=y?p.error.bind(p,na._error):a.bind(i,521),ne=w?p.error.bind(p,na.errorDev):a.bind(i,529),ae=S?p.error.bind(p,na.errorPublic):a.bind(i,545),Se=I?p.warn.bind(p,na._kapow):a.bind(i,268),fe=T?p.warn.bind(p,na._warn):a.bind(i,265),ge=A?p.warn.bind(p,na.warnDev):a.bind(i,273),Ie=k?p.warn.bind(p,na.warnPublic):a.bind(i,273),Qe=D?p.debug.bind(p,na._debug):a.bind(i,137),le=O?p.debug.bind(p,na.debugDev):a.bind(i,145),Ae=F?p.trace.bind(p,na._trace):a.bind(i,73),Y=V?p.trace.bind(p,na.traceDev):a.bind(i,81),Ue={_hmm:$,_todo:X,_error:re,errorDev:ne,errorPublic:ae,_kapow:Se,_warn:fe,warnDev:ge,warnPublic:Ie,_debug:Qe,debugDev:le,_trace:Ae,traceDev:Y,lazy:{_hmm:f?ti($):$,_todo:g?ti(X):X,_error:y?ti(re):re,errorDev:w?ti(ne):ne,errorPublic:S?ti(ae):ae,_kapow:I?ti(Se):Se,_warn:T?ti(fe):fe,warnDev:A?ti(ge):ge,warnPublic:k?ti(Ie):Ie,_debug:D?ti(Qe):Qe,debugDev:O?ti(le):le,_trace:F?ti(Ae):Ae,traceDev:V?ti(Y):Y},named:c,utilFor:{internal(){return{debug:Ue._debug,error:Ue._error,warn:Ue._warn,trace:Ue._trace,named(Tt,ke){return Ue.named(Tt,ke).utilFor.internal()}}},dev(){return{debug:Ue.debugDev,error:Ue.errorDev,warn:Ue.warnDev,trace:Ue.traceDev,named(Tt,ke){return Ue.named(Tt,ke).utilFor.dev()}}},public(){return{error:Ue.errorPublic,warn:Ue.warnPublic,debug(Tt,ke){Ue._warn('(public "debug" filtered out) '.concat(Tt),ke)},trace(Tt,ke){Ue._warn('(public "trace" filtered out) '.concat(Tt),ke)},named(Tt,ke){return Ue.named(Tt,ke).utilFor.public()}}}}};return Ue}function NMe(i,s){let a=j(j({},this.includes),this.include(s)),c=[],p="";for(let w=0;w<s.names.length;w++){let{name:S,key:T}=s.names[w];if(p+=" %c".concat(S),c.push(this.style.css(S)),T!=null){let I="%c#".concat(T);p+=I,c.push(this.style.css(I))}}let f=this.filtered,g=this.named.bind(this,s),y=[p,...c];return Tse(f,s,a,i,y,FMe(y),g)}function FMe(i){let s=i.slice(0);for(let a=1;a<s.length;a++)s[a]+=";background-color:#e0005a;padding:2px;color:white";return s}function BMe(i,s){let a=j(j({},this.includes),this.include(s)),c="";for(let y=0;y<s.names.length;y++){let{name:w,key:S}=s.names[y];c+=" ".concat(w),S!=null&&(c+="#".concat(S))}let p=this.filtered,f=this.named.bind(this,s),g=[c];return Tse(p,s,a,i,g,g,f)}function Tse(i,s,a,c,p,f,g){let y=ni(a,524),w=ni(a,522),S=ni(a,521),T=ni(a,529),I=ni(a,545),A=ni(a,265),k=ni(a,268),D=ni(a,273),O=ni(a,289),F=ni(a,137),V=ni(a,145),$=ni(a,73),X=ni(a,81),re=y?c.error.bind(c,...p):i.bind(s,524),ne=w?c.error.bind(c,...p):i.bind(s,522),ae=S?c.error.bind(c,...p):i.bind(s,521),Se=T?c.error.bind(c,...p):i.bind(s,529),fe=I?c.error.bind(c,...p):i.bind(s,545),ge=k?c.warn.bind(c,...f):i.bind(s,268),Ie=A?c.warn.bind(c,...p):i.bind(s,265),Qe=D?c.warn.bind(c,...p):i.bind(s,273),le=O?c.warn.bind(c,...p):i.bind(s,273),Ae=F?c.info.bind(c,...p):i.bind(s,137),Y=V?c.info.bind(c,...p):i.bind(s,145),Ue=$?c.debug.bind(c,...p):i.bind(s,73),Tt=X?c.debug.bind(c,...p):i.bind(s,81),ke={_hmm:re,_todo:ne,_error:ae,errorDev:Se,errorPublic:fe,_kapow:ge,_warn:Ie,warnDev:Qe,warnPublic:le,_debug:Ae,debugDev:Y,_trace:Ue,traceDev:Tt,lazy:{_hmm:y?ti(re):re,_todo:w?ti(ne):ne,_error:S?ti(ae):ae,errorDev:T?ti(Se):Se,errorPublic:I?ti(fe):fe,_kapow:k?ti(ge):ge,_warn:A?ti(Ie):Ie,warnDev:D?ti(Qe):Qe,warnPublic:O?ti(le):le,_debug:F?ti(Ae):Ae,debugDev:V?ti(Y):Y,_trace:$?ti(Ue):Ue,traceDev:X?ti(Tt):Tt},named:g,utilFor:{internal(){return{debug:ke._debug,error:ke._error,warn:ke._warn,trace:ke._trace,named(Te,je){return ke.named(Te,je).utilFor.internal()}}},dev(){return{debug:ke.debugDev,error:ke.errorDev,warn:ke.warnDev,trace:ke.traceDev,named(Te,je){return ke.named(Te,je).utilFor.dev()}}},public(){return{error:ke.errorPublic,warn:ke.warnPublic,debug(Te,je){ke._warn('(public "debug" filtered out) '.concat(Te),je)},trace(Te,je){ke._warn('(public "trace" filtered out) '.concat(Te),je)},named(Te,je){return ke.named(Te,je).utilFor.public()}}}}};return ke}var na,wc,Mse=C(()=>{na={_hmm:Pa(524),_todo:Pa(522),_error:Pa(521),errorDev:Pa(529),errorPublic:Pa(545),_kapow:Pa(268),_warn:Pa(265),warnDev:Pa(273),warnPublic:Pa(289),_debug:Pa(137),debugDev:Pa(145),_trace:Pa(73),traceDev:Pa(81)},wc={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(i,s,a){return this.create({names:[...i.names,{name:s,key:a}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(i){if(i.length<5)return i;let s=i.replace(this.collapseOnRE,"");return this.cssMemo.has(s)||this.cssMemo.set(s,this.css(i)),s},css(i){var s,a,c,p;let f=this.cssMemo.get(i);if(f)return f;let g="color:".concat((a=(s=this.color)==null?void 0:s.call(this,i))!=null?a:"hsl(".concat((i.charCodeAt(0)+i.charCodeAt(i.length-1))%360,", 100%, 60%)"));return(c=this.bold)!=null&&c.test(i)&&(g+=";font-weight:600"),(p=this.italic)!=null&&p.test(i)&&(g+=";font-style:italic"),this.cssMemo.set(i,g),g}}}}),g4,sR,aR=C(()=>{Mse(),Mse(),g4=kse(console,{_debug:function(){},_error:function(){}}),g4.configureLogging({dev:!0,min:64}),sR=g4.getLogger().named("Theatre.js (default logger)").utilFor.dev()}),Up,kv,Ase,UMe=C(()=>{Nd(),Up=Mt,aR(),Md(),kv=28,Ase=(i,s)=>{var a;Up.prism.ensurePrism();let c=!0,p=aA+kv,f=0,g=s.atomP.ahistoric.projects.stateByProjectId[i.address.projectId].stateBySheetId[i.address.sheetId].sequence.collapsableItems,y=g.byId[ho.forSheet()].isCollapsed,w=(a=(0,Up.pointerToPrism)(y).getValue())!=null?a:!1,S={type:"sheet",isCollapsed:w,sheet:i,children:[],sheetItemKey:ho.forSheet(),shouldRender:c,top:aA,depth:0,n:f,nodeHeight:c?kv:0,heightIncludingChildren:-1};f+=1;for(let O of Object.values((0,Up.val)(i.objectsP)))O&&T(O,S.children,S.depth+1,!w);S.heightIncludingChildren=p-S.top;function T(O,F,V,$){var X;let re=(0,Up.val)(O.template.getMapOfValidSequenceTracks_forStudio()),ne=(0,Up.val)(O.template.configPointer);if(Object.keys(re).length===0)return;let ae=g.byId[ho.forSheetObject(O)].isCollapsed,Se=(X=(0,Up.pointerToPrism)(ae).getValue())!=null?X:!1,fe={type:"sheetObject",isCollapsed:Se,sheetItemKey:ho.forSheetObject(O),shouldRender:$,top:p,children:[],depth:V,n:f,sheetObject:O,nodeHeight:$?kv:0,heightIncludingChildren:-1};F.push(fe),$&&(f+=1,p+=fe.nodeHeight),I(O,re,[],ne,fe.children,V+1,$&&!Se),fe.heightIncludingChildren=p-fe.top}function I(O,F,V,$,X,re,ne){for(let[ae,Se]of Object.entries(F)){let fe=$.props[ae];A(O,Se,[...V,ae],fe,X,re,ne)}}function A(O,F,V,$,X,re,ne){$.type==="compound"?k(O,F,$,V,$,X,re,ne):$.type==="enum"?sR.warn("Prop type enum is not yet supported in the sequence editor"):D(O,F,V,$,X,re,ne)}function k(O,F,V,$,X,re,ne,ae){var Se;let fe=g.byId[ho.forSheetObjectProp(O,$)].isCollapsed,ge=(Se=(0,Up.pointerToPrism)(fe).getValue())!=null?Se:!1,Ie={type:"propWithChildren",isCollapsed:ge,propConf:V,pathToProp:$,sheetItemKey:ho.forSheetObjectProp(O,$),sheetObject:O,shouldRender:ae,top:p,children:[],nodeHeight:ae?kv:0,heightIncludingChildren:-1,depth:ne,trackMapping:F,n:f};re.push(Ie),ae&&(p+=Ie.nodeHeight,f+=1),I(O,F,$,X,Ie.children,ne+1,ae&&!ge),Ie.heightIncludingChildren=p-Ie.top}function D(O,F,V,$,X,re,ne){let ae={type:"primitiveProp",propConf:$,depth:re,sheetItemKey:ho.forSheetObjectProp(O,V),sheetObject:O,pathToProp:V,shouldRender:ne,top:p,nodeHeight:ne?kv:0,heightIncludingChildren:ne?kv:0,trackId:F,n:f};X.push(ae),f+=1,p+=ae.nodeHeight}return S}});function VMe(i,s){let a=me(),c=a.atomP.ahistoric.projects.stateByProjectId[i.address.projectId].stateBySheetId[i.address.sheetId],p=a.atomP.historic.projects.stateByProjectId[i.address.projectId].stateBySheetId[i.address.sheetId];return(0,ra.prism)(()=>{var f;let g=RMe("tree",()=>Ase(i,a),[]),y=(0,ra.val)(s),w=(0,ra.val)(a.atomP.historic.panels.sequenceEditor.graphEditor),S=(0,ra.val)(p.sequenceEditor.selectedPropsByObject),T=!!S&&Object.keys(S).length>0,{leftDims:I,rightDims:A,graphEditorDims:k,dopeSheetDims:D,horizontalScrollbarDims:O}=ra.prism.memo("leftDims",()=>{var Ie;let Qe={width:Math.floor(y.width*Ise),height:y.height,screenX:y.screenX,screenY:y.screenY},le={width:y.width-Qe.width,height:y.height,screenX:y.screenX+Qe.width,screenY:y.screenY},Ae=T&&(w==null?void 0:w.isOpen)===!0,Y=Math.floor((Ae?li((Ie=w==null?void 0:w.height)!=null?Ie:.5,.1,.7):0)*y.heightWithoutBorder),Ue=0+Y,Tt=y.height-Ue,ke={width:y.width,height:Tt,screenX:y.screenX,screenY:y.screenY},Te={isAvailable:T,isOpen:Ae,width:le.width,height:Y,screenX:y.screenX,screenY:y.screenY+Tt,padding:{top:20,bottom:20}};return{leftDims:Qe,rightDims:le,graphEditorDims:Te,dopeSheetDims:ke,horizontalScrollbarDims:{bottom:0}}},[y,w,T]),F=ra.prism.memo("graphEditorVerticalSpace",()=>{let Ie=k.height-k.padding.top-k.padding.bottom;return{space:Ie,fromExtremumSpace(Qe){return Qe*Ie},toExtremumSpace(Qe){return Qe/Ie}}},[k]),[V,$]=ra.prism.state("isSeeking",!1),X={isSeeking:V,setIsSeeking:$},re={},ne=(f=(0,ra.val)(c.sequence.clippedSpaceRange))!=null?f:Rse,ae=ra.prism.memo("scaledSpace",()=>{let Ie=ne.end-ne.start,Qe=A.width,le=Ie/Qe,Ae=Qe/Ie;return{fromUnitSpace(Y){return Y*Ae},toUnitSpace(Y){return Y*le},leftPadding:10}},[ne,A.width]),Se=ra.prism.memo("setClippedSpaceRange",()=>function(Ie){a.transaction(({stateEditors:Qe})=>{let le=j({},Ie);if(le.end<=le.start&&(le.end=le.start+1),le.start<0){let Ae=le.end-le.start;le.start=0,le.end=Ae}Qe.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.clippedSpaceRange.set(z(j({},i.address),{range:le}))})},[]),fe=ra.prism.memo("clippedSpace",()=>({range:ne,width:A.width,fromUnitSpace(Ie){return ae.fromUnitSpace(Ie-ne.start)+ae.leftPadding},toUnitSpace(Ie){return ae.toUnitSpace(Ie-ae.leftPadding)+ne.start},setRange:Se}),[ne,A.width,ae,Se]),ge=ra.prism.memo("selection.current",()=>new ra.Atom({}),[]);return QU("finalAtom",{sheet:i,tree:g,panelDims:y,leftDims:I,rightDims:A,dopeSheetDims:D,horizontalScrollbarDims:O,seeker:X,unitSpace:re,scaledSpace:ae,clippedSpace:fe,graphEditorDims:k,graphEditorVerticalSpace:F,selectionAtom:ge}).pointer})}var ra,Ise,Rse,jMe=C(()=>{Fe(),OMe(),Ote(),ra=Mt,UMe(),Jr(),Ise=.2,Rse={start:0,end:10}});function zMe(i){let{fullSecondStampsContainer:s,sequencePositionFormatter:a,snapToGrid:c,unitSpaceToClippedSpace:p}=i,f="";Ioe(i,(g,y)=>{let w=c(g),S=p(w);y?f+=Ose(a.formatFullUnitForGrid(w),S,"full-unit"):f+=Ose(a.formatSubUnitForGrid(w),S,"sub-unit")}),s.innerHTML=f}function Ose(i,s,a){return'<span class="'.concat(a,'" style="transform: translate3d(').concat(s.toFixed(1),'px, -50%, 0);">').concat(i,"</span>")}var Tv,Mv,Dse,Lse,Vp,Nse,Fse,Bse,Use,Vse,jse,zse=C(()=>{Tv=Mt,Sa(),Mv=Z(Re()),Ne(),Ooe(),Fe(),Lse=se.div(Dse||(Dse=G([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),Vp={fullUnitStampColor:"#6a6a6a",stampFontSize:"10px",get subUnitStampColor(){return Nx(.2,Vp.fullUnitStampColor)}},Fse=se.div(Nse||(Nse=G([`
  position: absolute;
  top: 0;
  height: 100%;
  left: 0;
  overflow: hidden;
  z-index: 2;
  will-change: transform;
  pointer-events: none;
`]))),Use=se.div(Bse||(Bse=G([`
  position: absolute;
  top: 0;
  left: 0;

  & > span {
    position: absolute;
    display: block;
    top: 9px;
    left: -10px;
    color: `,`;
    text-align: center;
    font-size: `,`;
    width: 20px;

    &.full-unit {
      color: `,`;
    }

    &.sub-unit {
      color: `,`;
    }
  }

  pointer-events: none;
`])),Vp.fullUnitStampColor,Vp.stampFontSize,Vp.fullUnitStampColor,Vp.subUnitStampColor),Vse=({layoutP:i,width:s})=>{let a=(0,Mv.useRef)(null),[c,p]=(0,Mv.useState)(null);return(0,Mv.useLayoutEffect)(()=>{if(c)return(0,Tv.prism)(()=>{let f=(0,Tv.val)(i.sheet).getSequence();return{fullSecondStampsContainer:c,clippedSpaceRange:(0,Tv.val)(i.clippedSpace.range),clippedSpaceWidth:(0,Tv.val)(i.clippedSpace.width),unitSpaceToClippedSpace:(0,Tv.val)(i.clippedSpace.fromUnitSpace),leftPadding:(0,Tv.val)(i.scaledSpace.leftPadding),fps:f.subUnitsPerUnit,sequencePositionFormatter:f.positionFormatter,snapToGrid:g=>f.closestGridPosition(g)}}).onChange(me().ticker,zMe,!0)},[c,s,i]),Mv.default.createElement(Lse,{ref:a,style:{width:s+"px"}},Mv.default.createElement(Fse,{style:{width:s+"px"}},Mv.default.createElement(Use,{ref:p})))},jse=Vse});function HMe(i){let[s,a]=(0,y4.useState)(!1);return(0,y4.useEffect)(()=>{if(a(!1),!i)return;let c=f=>{f.target===i?a(!0):a(!1)},p=()=>{a(!1)};return i.addEventListener("mouseenter",c),i.addEventListener("mousemove",c),i.addEventListener("mouseleave",p),()=>{a(!1),i.removeEventListener("mouseenter",c),i.removeEventListener("mousemove",c),i.removeEventListener("mouseleave",p)}},[i]),s}var y4,GMe=C(()=>{y4=Z(Re())});function $Me(i,s){let a=0,[c,p]=i,[f,g]=s;return p-c>g-f?[f,g]:(c<f&&(a=0-c),p>g&&(a=g-p),[c+a,p+a])}var xc,jp,ro,b4,Hse,lR,Gse,$se,Wse=C(()=>{xc=Mt,hn(),vr(),Fe(),Iv(),Ms(),no(),mr(),jp=Z(Re()),Ne(),jo(),ro={enabled:{backgroundColor:"#2C2F34",stroke:"#646568"},disabled:{backgroundColor:"#282a2cc5",stroke:"#595a5d"},hover:{backgroundColor:"#34373D",stroke:"#C8CAC0"},dragging:{backgroundColor:"#3F444A",stroke:"#C8CAC0"},thumbWidth:9,hitZoneWidth:26,rangeStripMinWidth:30},b4=1e3,lR=se.div(Hse||(Hse=G([`
  position: absolute;
  height: `,`px;
  background-color: `,`;
  cursor: grab;
  top: 0;
  left: 0;
  width: `,`px;
  transform-origin: left top;
  &:hover {
    background-color: `,`;
  }
  &.dragging {
    background-color: `,`;
    cursor: grabbing !important;
  }
  `,`;

  /* covers the one pixel space between the focus range strip and the top strip
  of the sequence editor panel, which would have caused that one pixel to act
  like a panel drag zone */
  &:after {
    display: block;
    content: ' ';
    position: absolute;
    bottom: -1px;
    height: 1px;
    left: 0;
    right: 0;
    background: transparent;
    pointer-events: normal;
    z-index: -1;
  }
`])),()=>Ec-1,i=>i.enabled?ro.enabled.backgroundColor:ro.disabled.backgroundColor,b4,ro.hover.backgroundColor,ro.dragging.backgroundColor,hr),Gse=({layoutP:i})=>{let s=(0,jp.useMemo)(()=>(0,xc.prism)(()=>{let{projectId:S,sheetId:T}=(0,xc.val)(i.sheet).address;return(0,xc.val)(me().atomP.ahistoric.projects.stateByProjectId[S].stateBySheetId[T].sequence.focusRange)}),[i]),[a,c]=sr(null),[p]=Ts(c,{menuItems:()=>{let S=(0,xc.val)(i.sheet),T=s.getValue();return[{label:"Delete focus range",callback:()=>{me().tempTransaction(({stateEditors:I})=>{I.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.unset(j({},S.address))}).commit()}},{label:T!=null&&T.enabled?"Disable focus range":"Enable focus range",callback:()=>{T!==void 0&&me().tempTransaction(({stateEditors:I})=>{I.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(j({},S.address),{range:T.range,enabled:!T.enabled}))}).commit()}}]}}),f=$n(i.scaledSpace.toUnitSpace),g=$n(i.sheet),y=(0,jp.useMemo)(()=>{let S,T;return{debugName:"FocusRangeStrip",onDragStart(I){let A,k=s.getValue();if(!k)return!1;let D=k.range.start,O=k.range.end,F=!1,V=(0,xc.val)(i.sheet).getSequence();return{onDrag($){if(k=s.getValue(),k){F=!0;let X=f($),re=D+X,ne=O+X;ne<re&&(ne=re),[S,T]=$Me([re,ne],[0,V.length]).map(ae=>V.closestGridPosition(ae)),A&&A.discard(),A=me().tempTransaction(({stateEditors:ae})=>{var Se;ae.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(j({},g.address),{range:{start:S,end:T},enabled:(Se=k==null?void 0:k.enabled)!=null?Se:!0}))})}},onDragEnd(){k&&(F&&A!==void 0?A.commit():A&&A.discard())}}},lockCSSCursorTo:"grabbing"}},[g,f]),[w]=xi(c,y);return Vd(w,-1),Un(()=>{let S=s.getValue(),T=(S==null?void 0:S.range)||{start:0,end:0},I=(0,xc.val)(i.clippedSpace.fromUnitSpace)(T.start),A=(0,xc.val)(i.clippedSpace.fromUnitSpace)(T.end),k,D;return I<0&&(I=0),A>(0,xc.val)(i.clippedSpace.width)&&(A=(0,xc.val)(i.clippedSpace.width)),I>A?(D=0,k=0):(D=I,k=(A-I)/b4),S?jp.default.createElement(jp.default.Fragment,null,p,jp.default.createElement(lR,{id:"range-strip",enabled:S.enabled,className:"".concat(w?"dragging":""," ").concat(S.enabled?"enabled":""),ref:a,style:{transform:"translateX(".concat(D,"px) scale(").concat(k,", 1)")}})):jp.default.createElement(jp.default.Fragment,null)},[i,a,s,p,w])},$se=Gse}),zp,Hd,Kse,qse,Xse,Yse,Zse,Qse,Jse,_4,WMe=C(()=>{zp=Mt,hn(),Fe(),Iv(),Ea(),no(),mr(),Hd=Z(Re()),Ne(),jo(),Wse(),du(),qse=se.div(Kse||(Kse=G([`
  position: absolute;
  top: 0;
  // the right handle has to be pulled back by its width since its right side indicates its position, not its left side
  left: `,`px;
  transform-origin: left top;
  width: `,`px;
  height: `,`px;
  z-index: 3;

  --bg: `,`;

  stroke: `,`;
  user-select: none;

  cursor: `,`;

  // no pointer events unless pointer-root is in normal mode _and_ the
  // focus range is enabled
  #pointer-root & {
    pointer-events: none;
  }

  #pointer-root.normal & {
    pointer-events: auto;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.dragging {
    pointer-events: none !important;
  }

  // highlight the handle if it's hovered, or the whole strip is hovverd
  `,`:hover ~ &, &:hover {
    --bg: `,`;
    stroke: `,`;
  }

  // highlight the handle when it's being dragged or the whole strip is being dragged.
  // using dragging.dragging to give this selector priority, as it seems to be overridden
  // by the hover selector above
  &.dragging,
  `,`.dragging.dragging ~ & {
    --bg: `,`;
    stroke: `,`;
  }

  #pointer-root.draggingPositionInSequenceEditor &:hover {
    --bg: `,`;
    stroke: #40aaa4;
  }

  background-color: var(--bg);

  // a larger hit zone
  &:before {
    display: block;
    content: ' ';
    position: absolute;
    inset: -8px;
  }
`])),i=>i.type==="start"?0:-ro.thumbWidth,ro.thumbWidth,()=>Ec-1,({enabled:i})=>i?ro.enabled.backgroundColor:ro.disabled.backgroundColor,ro.enabled.stroke,i=>i.type==="start"?"w-resize":"e-resize",Id,()=>lR,ro.hover.backgroundColor,ro.hover.stroke,()=>lR,ro.dragging.backgroundColor,ro.dragging.stroke,ro.dragging.backgroundColor),Yse=se.div(Xse||(Xse=G([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    var(--bg) 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),i=>i.type==="start"?90:-90,i=>i.type==="start"?ro.thumbWidth:-ro.thumbWidth+1),Qse=se.div(Zse||(Zse=G([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    `,` 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),i=>i.type==="start"?-90:90,()=>XS.backgroundColor,i=>i.type==="start"?-12:ro.thumbWidth),Jse=({layoutP:i,thumbType:s})=>{var a;let[c,p]=sr(null),f=(0,Hd.useMemo)(()=>(0,zp.prism)(()=>{let{projectId:S,sheetId:T}=(0,zp.val)(i.sheet).address;return(0,zp.val)(me().atomP.ahistoric.projects.stateByProjectId[S].stateBySheetId[T].sequence.focusRange)}),[i]),g=(0,Hd.useMemo)(()=>({debugName:"FocusRangeThumb",onDragStart(){let S,T,I=(0,zp.val)(i.sheet),A={start:0,end:I.getSequence().length},k=f.getValue()||{range:A,enabled:!1},D=k.enabled,O=k.range[s],F=(0,zp.val)(i.scaledSpace.toUnitSpace),V=F(ro.rangeStripMinWidth);return{onDrag($,X,re){var ne;let ae,Se=As.checkIfMouseEventSnapToPos(re,{ignore:p});if(Se==null){let ge=F($);ae=O+ge}else ae=Se;T=((ne=f.getValue())==null?void 0:ne.range)||A,s==="start"?ae=Math.max(Math.min(ae,T.end-V),0):ae=Math.min(Math.max(ae,T.start+V),I.getSequence().length);let fe=I.getSequence().closestGridPosition(ae);S!==void 0&&S.discard(),S=me().tempTransaction(({stateEditors:ge})=>{ge.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(j({},I.address),{range:z(j({},T),{[s]:fe}),enabled:D}))})},onDragEnd($){$?S==null||S.commit():S==null||S.discard()}}}}),[i]),[y]=xi(p,g);ul(y,"draggingPositionInSequenceEditor",s==="start"?"w-resize":"e-resize");let w=$n(f);return Vd(y,(a=w==null?void 0:w.range[s])!=null?a:0),Un(()=>{let S=f.getValue();if(!S)return null;let{enabled:T}=S,I=S.range[s],A=(0,zp.val)(i.clippedSpace.fromUnitSpace)(I);return(A<0||(0,zp.val)(i.clippedSpace.width)<A)&&(A=-1e4),Hd.default.createElement(qse,z(j(j({ref:c},As.includePositionSnapAttrs(I)),gc(I)),{className:"".concat(y&&"dragging"," ").concat(T&&"enabled"),enabled:T,type:s,style:{transform:"translate3d(".concat(A,"px, 0, 0)")}}),Hd.default.createElement(Yse,{type:s,enabled:T}),Hd.default.createElement(Qse,{type:s}),Hd.default.createElement("svg",{viewBox:"0 0 9 18",xmlns:"http://www.w3.org/2000/svg"},Hd.default.createElement("line",{x1:"4",y1:"6",x2:"4",y2:"12"}),Hd.default.createElement("line",{x1:"6",y1:"6",x2:"6",y2:"12"})))},[i,c,f,y])},_4=Jse});function KMe(i,s){let[a,c]=(0,Sc.useState)("none");return ul(a!=="none","dragging",a==="creating"?"ew-resize":"move"),(0,Sc.useMemo)(()=>{let p=()=>({debugName:"FocusRangeZone/focusRangeCreationGestureHandlers",onDragStart(g){let y,w=(0,Av.val)(i.clippedSpace.toUnitSpace),S=(0,Av.val)(i.scaledSpace.toUnitSpace),T=(0,Av.val)(i.sheet),I=T.getSequence(),A=g.target.getBoundingClientRect(),k=w(g.clientX-A.left),D=S(ro.rangeStripMinWidth);return{onDrag(O){let F=S(O),V=k,$=k+F;[V,$]=[li(V,0,I.length),li($,0,I.length)].map(X=>I.closestGridPosition(X)),$<V?[V,$]=[Math.max(Math.min($,V-D),0),V]:O>0&&($=Math.min(Math.max($,V+D),I.length)),y&&y.discard(),y=me().tempTransaction(({stateEditors:X})=>{X.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(z(j({},T.address),{range:{start:V,end:$},enabled:!0}))})},onDragEnd(O){O&&y!==void 0?y.commit():y&&y.discard()}}},lockCSSCursorTo:"ew-resize"}),f=()=>({debugName:"FocusRangeZone/panelMoveGestureHandlers",onDragStart(){let g,y=s.current,w=s.current.addBoundsHighlightLock();return{onDrag(S,T){let I=z(j({},y.dims),{top:li(y.dims.top+T,0,window.innerHeight-ic),left:li(y.dims.left+S,-y.dims.width+ic,window.innerWidth-ic)}),A=hI(I,{width:window.innerWidth,height:window.innerHeight});g==null||g.discard(),g=me().tempTransaction(({stateEditors:k})=>{k.studio.historic.panelPositions.setPanelPosition({position:A,panelId:y.panelId})})},onDragEnd(S){w(),S?g==null||g.commit():g==null||g.discard()}}},lockCSSCursorTo:"move"});return{debugName:"FocusRangeZone",onDragStart(g){let[y,w]=g.shiftKey?["creating",p().onDragStart(g)]:["moving-panel",f().onDragStart(g)];return c(y),w===!1?!1:{onDrag(S,T,I,A,k){w.onDrag(S,T,I,A,k)},onDragEnd(S){var T;c("none"),(T=w.onDragEnd)==null||T.call(w,S)}}}}},[i,s])}var Av,Sc,eae,tae,nae,rae,qMe=C(()=>{Av=Mt,hn(),Fe(),$y(),Iv(),Ea(),no(),GMe(),Xte(),mr(),Jr(),Sc=Z(Re()),Ne(),Wse(),WMe(),Md(),tae=se.div(eae||(eae=G([`
  position: absolute;
  height: `,`px;
  left: 0;
  right: 0;
  box-sizing: border-box;
  /* Use the "grab" cursor if the shift key is up, which is the one used on the top strip of the sequence editor */
  cursor: `,`;
`])),()=>Ec,i=>i.isShiftDown?"ew-resize":"move"),nae=({layoutP:i})=>{let[s,a]=sr(null),c=Gy(),p=(0,Sc.useRef)(c);p.current=c;let f=(0,Sc.useMemo)(()=>(0,Av.prism)(()=>{let{projectId:w,sheetId:S}=(0,Av.val)(i.sheet).address;return(0,Av.val)(me().atomP.ahistoric.projects.stateByProjectId[w].stateBySheetId[S].sequence.focusRange)}),[i]);xi(a,KMe(i,p));let g=Kte("Shift"),y=HMe(a);return(0,Sc.useEffect)(()=>{if(!g&&y)return p.current.addBoundsHighlightLock()},[!g&&y]),Un(()=>Sc.default.createElement(tae,{ref:s,isShiftDown:g},Sc.default.createElement($se,{layoutP:i}),Sc.default.createElement(_4,{thumbType:"start",layoutP:i}),Sc.default.createElement(_4,{thumbType:"end",layoutP:i})),[i,f,g])},rae=nae}),nb,Ec,XS,iae,oae,sae,aae,Iv=C(()=>{hn(),nb=Z(Re()),Ne(),zse(),jo(),vr(),qMe(),Ec=18,XS={backgroundColor:"#1f2120eb",borderColor:"#1c1e21"},oae=se.div(iae||(iae=G([`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border-bottom: 1px solid `,`;
  `,`;
`])),Ec,XS.backgroundColor,XS.borderColor,hr),sae=({layoutP:i})=>{let s=$n(i.rightDims.width);return nb.default.createElement(nb.default.Fragment,null,nb.default.createElement(oae,j({},gc("hide")),nb.default.createElement(jse,{layoutP:i,width:s,height:Ec}),nb.default.createElement(rae,{layoutP:i})))},aae=sae}),Rv,lae,uae,cae,dae,hae,pae,fae,mae,XMe=C(()=>{Rv=Z(Re()),Ne(),hn(),Fe(),EB(),sv(),lae=i=>isFinite(i)&&i>0,cae=se.div(uae||(uae=G([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),hae=se.div(dae||(dae=G([`
  `,`;
  white-space: nowrap;
`])),Pp),pae=({deltaX:i})=>i*.25,fae=({layoutP:i})=>{let s=$n(i.sheet),a=(0,Rv.useMemo)(()=>{let p;return{temporarilySetValue(f){p&&(p.discard(),p=void 0),p=me().tempTransaction(({stateEditors:g})=>{g.coreByProject.historic.sheetsById.sequence.setLength(z(j({},s.address),{length:f}))})},discardTemporaryValue(){p&&(p.discard(),p=void 0)},permanentlySetValue(f){p&&(p.discard(),p=void 0),me().transaction(({stateEditors:g})=>{g.coreByProject.historic.sheetsById.sequence.setLength(z(j({},s.address),{length:f}))})}}},[i,s]),c=(0,Rv.useRef)(null);return(0,Rv.useLayoutEffect)(()=>{c.current.focus()},[]),Un(()=>{let p=s.getSequence().length;return Rv.default.createElement(cae,null,Rv.default.createElement(hae,null,"Sequence length"),Rv.default.createElement(vA,z(j({value:p},a),{isValid:lae,inputRef:c,nudge:pae})))},[s,a,c])},mae=fae});function YMe(i,s){let a=(0,ia.useRef)(s);a.current=s;let c=(0,ia.useMemo)(()=>({debugName:"LengthIndicator/useDragBulge",lockCSSCursorTo:"ew-resize",onDragStart(f){let g,y=a.current,w=(0,Ov.val)(a.current.layoutP.sheet),S=w.getSequence().length,T=(0,Ov.val)(y.layoutP.scaledSpace.toUnitSpace);return{onDrag(I,A,k){let D=T(I);g&&(g.discard(),g=void 0),g=me().tempTransaction(({stateEditors:O})=>{O.coreByProject.historic.sheetsById.sequence.setLength(z(j({},w.address),{length:S+D}))})},onDragEnd(I){I?g&&g.commit():g&&g.discard()}}}}),[]),[p]=xi(i,c);return Vd(p,-1),[p]}var Ov,ia,w4,YS,vae,Hp,gae,yae,bae,_ae,wae,xae,Sae,Eae,Cae,Pae,kae,ZMe=C(()=>{hn(),Ov=Mt,ia=Z(Re()),Ne(),Wd(),Iv(),mr(),no(),Fe(),uc(),jo(),Ry(),XMe(),vr(),dc(),w4=1e3,YS={stripNormal:"#0000006c",stripActive:"#000000"},Hp=se.div(vae||(vae=G([`
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  z-index: `,`;
  pointer-events: none;

  &:after {
    display: block;
    content: ' ';
    position: absolute;
    /* top: `,`px; */
    top: 0;
    bottom: 0;
    left: -1px;
    width: 1px;
    background-color: `,`;
  }

  &:hover:after,
  &.dragging:after {
    background-color: `,`;
  }
`])),()=>Pc.lengthIndicatorStrip,Ec,YS.stripNormal,YS.stripActive),yae=se.div(gae||(gae=G([`
  position: absolute;
  top: `,`px;
  width: 100px;
  left: -50px;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
`])),Ec-15),_ae=se.div(bae||(bae=G([`
  margin-top: 8px;
  font-size: 10px;
  white-space: nowrap;
  padding: 2px 8px;
  border-radius: 2px;
  `,`;
  cursor: ew-resize;
  color: #464646;
  background-color: #0000004d;
  display: none;

  `,":hover &, ",`.dragging & {
    display: block;
    color: white;
    background-color: `,`;
  }
`])),hr,Hp,Hp,YS.stripActive),xae=se.div(wae||(wae=G([`
  font-size: 10px;
  white-space: nowrap;
  padding: 1px 2px;
  border-radius: 2px;
  `,`;
  justify-content: center;
  align-items: center;
  cursor: ew-resize;
  color: #5d5d5d;
  background-color: #191919;

  `,":hover &, ",`.dragging & {
    color: white;
    background-color: `,`;

    & > svg:first-child {
      margin-right: -1px;
    }
  }

  & > svg:first-child {
    margin-right: -4px;
  }
`])),hr,Hp,Hp,YS.stripActive),Eae=se.div(Sae||(Sae=G([`
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgb(23 23 23 / 43%);
  width: `,`px;
  z-index: `,`;
  transform-origin: left top;

  `,".dragging ~ &, ",`:hover ~ & {
    background-color: rgb(23 23 23 / 60%);
  }
`])),w4,()=>Pc.lengthIndicatorCover,Hp,Hp),Cae=-1e4,Pae=({layoutP:i})=>{let[s,a]=sr(null),[c]=YMe(a,{layoutP:i}),{node:p,toggle:f,close:g}=lc({debugName:"LengthIndicator"},()=>ia.default.createElement(cc,null,ia.default.createElement(mae,{layoutP:i,onRequestClose:g})));return Un(()=>{let y=(0,Ov.val)(i.sheet),w=(0,Ov.val)(i.rightDims.height),S=y.getSequence(),T=S.length,I=T,A=(0,Ov.val)(i.clippedSpace.fromUnitSpace)(I),k=(0,Ov.val)(i.clippedSpace.width),D,O;return A>k?(O=0,D=0):(A<0&&(A=0),O=A,D=(k-A)/w4),ia.default.createElement(ia.default.Fragment,null,p,ia.default.createElement(Hp,{style:{height:w+"px",transform:"translateX(".concat(O===0?Cae:O,"px)")},className:c?"dragging":""},ia.default.createElement(yae,null,ia.default.createElement(xae,j({ref:s,onClick:F=>{f(F,a)}},gc("hide")),ia.default.createElement(VCe,null),ia.default.createElement(jCe,null)),ia.default.createElement(_ae,null,"Sequence length:"," ",S.positionFormatter.formatBasic(T)))),ia.default.createElement(Eae,{title:"Length",style:{height:w+"px",transform:"translateX(".concat(O,"px) scale(").concat(D,", 1)")}}))},[i,s,c,p])},kae=Pae}),x4,Gd,Tae,Mae,Aae,Iae,Rae,Oae,Dae,Lae,QMe=C(()=>{hn(),x4=Mt,Gd=Z(Re()),Ne(),zse(),Wd(),Iv(),jo(),Mae=se.div(Tae||(Tae=G([`
  position: absolute;
  top: 0;
  left: 0;
  margin-top: 0px;
`]))),Iae=se.div(Aae||(Aae=G([`
  position: absolute;
  top: 16px;
  font-size: `,`;
  color: `,`;
  text-align: center;
  transform: translateX(-50%);
  background: `,`;
  padding: 1px 8px;
  font-variant-numeric: tabular-nums;
  pointer-events: none;
  z-index: `,`;
`])),Vp.stampFontSize,Vp.fullUnitStampColor,XS.backgroundColor,()=>Pc.currentFrameStamp),Oae=se.div(Rae||(Rae=G([`
  position: absolute;
  top: 5px;
  left: -0px;
  bottom: 0;
  width: 0.5px;
  background: rgba(100, 100, 100, 0.2);
  pointer-events: none;
`]))),Dae=Gd.default.memo(({layoutP:i})=>{let[s,a]=$n(gne()),c=$n(i.clippedSpace.fromUnitSpace),{sequence:p,formatter:f,clippedSpaceWidth:g}=Un(()=>{let T=(0,x4.val)(i.sheet).getSequence(),I=(0,x4.val)(i.clippedSpace.width);return{sequence:T,formatter:T.positionFormatter,clippedSpaceWidth:I}},[i]);if(s==-1)return Gd.default.createElement(Gd.default.Fragment,null);let y=a===3?p.closestGridPosition(s):s,w=c(y),S=w>=0&&w<=g;return Gd.default.createElement(Gd.default.Fragment,null,Gd.default.createElement(Mae,null,Gd.default.createElement(Iae,{style:{opacity:S?1:0,transform:"translate3d(calc(".concat(w,"px - 50%), 0, 0)")}},f.formatForPlayhead(y)),Gd.default.createElement(Oae,{posType:a,style:{opacity:S?1:0,transform:"translate3d(".concat(w,"px, 0, 0)")}}))," ")}),Lae=Dae}),hu,Os,Nae,Fae,Bae,Uae,Vae,uR,jae,S4,zae,cR,Hae,dR,Gae,E4,$ae,Wae,JMe=C(()=>{hn(),hu=Mt,c2(),Sa(),Os=Z(Re()),Ne(),Wd(),jo(),vr(),no(),Fae=se.div(Nae||(Nae=G([`
  --threadHeight: 6px;
  --bg-inactive: #32353b;
  --bg-active: #5b5c5d;
  position: absolute;
  height: 0;
  width: 100%;
  left: 12px;
  /* bottom: 8px; */
  z-index: `,`;
  `,`
`])),()=>Pc.horizontalScrollbar,hr),Uae=se.div(Bae||(Bae=G([`
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--threadHeight);
`]))),uR=se.div(Vae||(Vae=G([`
  position: absolute;
  height: 5px;
  background: var(--bg-inactive);
  cursor: ew-resize;
  z-index: 2;

  &:hover,
  &:active {
    background: var(--bg-active);
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),TF("absolute","-4px")),S4=se.div(jae||(jae=G([`
  position: absolute;
  height: 5px;
  width: 7px;
  left: 0;
  z-index: 2;
  top: 0;
  bottom: 0;
  display: block;

  &:hover:before {
    background: var(--bg-active);
  }

  &:before {
    `,`;
    display: block;
    content: ' ';
    background: var(--bg-inactive);
    border-radius: 0 2px 2px 0;
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),TF("absolute","0"),TF("absolute","-4px")),cR=se(S4)(zae||(zae=G([`
  left: calc(-1 * 7px);
  cursor: w-resize;
  &:before {
    transform: scaleX(-1);
  }
`]))),dR=se(S4)(Hae||(Hae=G([`
  cursor: e-resize;
  left: 0px;
`]))),E4=se.div(Gae||(Gae=G([`
  display: `,`;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 4px;
  transform: translateX(-50%);
  background: #131d1f;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;

  `,`:hover &,
  `,`:hover &,
  `,":hover ~ ",` &,
  `,":hover ~ ",` & {
    display: block;
  }
`])),i=>i.active?"block":"none",cR,dR,uR,cR,uR,dR),$ae=({layoutP:i})=>{let s=(0,Os.useCallback)(F=>F.toFixed(2),[]),a=(0,Os.useMemo)(()=>(0,hu.prism)(()=>{let F=(0,hu.val)(i.rightDims.width)-25,V=(0,hu.val)(i.clippedSpace.range),$=(0,hu.val)(i.sheet).getSequence().length,X=Math.max(V.end,$),re=V.start/X*F,ne=V.end/X*F;return{rightWidth:F,clippedSpaceRange:V,sequenceLength:$,assumedLengthOfSequence:X,rangeStartX:re,rangeEndX:ne,bottom:(0,hu.val)(i.horizontalScrollbarDims.bottom)}}),[i]),{rangeStartX:c,rangeEndX:p,clippedSpaceRange:f,bottom:g}=$n(a),[y,w]=(0,Os.useState)("nothing"),S=(0,Os.useMemo)(()=>{let F=(0,hu.val)(a),V=()=>{F=(0,hu.val)(a)},$=X=>X/F.rightWidth*F.assumedLengthOfSequence;return{onRangeDragStart(){return V(),{onDrag(X){w("both");let re=$(X),ne=bd(F.clippedSpaceRange,ae=>ae+re);(0,hu.val)(i.clippedSpace.setRange)(ne)},onDragEnd(){w("nothing")}}},onRangeStartDragStart(){return V(),{onDrag(X){w("start");let re=$(X),ne={start:F.clippedSpaceRange.start+re,end:F.clippedSpaceRange.end};ne.start>ne.end-1&&(ne.start=ne.end-1),ne.start<=0&&(ne.start=0),(0,hu.val)(i.clippedSpace.setRange)(ne)},onDragEnd(){w("nothing")}}},onRangeEndDragStart(){return V(),{onDrag(X){w("end");let re=$(X),ne={start:F.clippedSpaceRange.start,end:F.clippedSpaceRange.end+re};ne.end<ne.start+1&&(ne.end=ne.start+1),ne.end>=F.assumedLengthOfSequence&&(ne.end=F.assumedLengthOfSequence),(0,hu.val)(i.clippedSpace.setRange)(ne)},onDragEnd(){w("nothing")}}}}},[i,a]),[T,I]=(0,Os.useState)(null);xi(T,{debugName:"HorizontalScrollbar/onRangeDrag",onDragStart:S.onRangeDragStart,lockCSSCursorTo:"ew-resize"});let[A,k]=(0,Os.useState)(null);xi(A,{debugName:"HorizontalScrollbar/onRangeStartDrag",onDragStart:S.onRangeStartDragStart,lockCSSCursorTo:"w-resize"});let[D,O]=(0,Os.useState)(null);return xi(D,{debugName:"HorizontalScrollbar/onRangeEndDrag",onDragStart:S.onRangeEndDragStart,lockCSSCursorTo:"e-resize"}),Os.default.createElement(Fae,j({style:{bottom:g+8+"px"}},gc("hide")),Os.default.createElement(Uae,null,Os.default.createElement(uR,{ref:I,style:{width:"".concat(p-c,"px"),transform:"translate3d(".concat(c,"px, 0, 0)")}}),Os.default.createElement(cR,{ref:k,style:{transform:"translate3d(".concat(c,"px, 0, 0)")}},Os.default.createElement(E4,{active:y==="both"||y==="start"},s(f.start))),Os.default.createElement(dR,{ref:O,style:{transform:"translate3d(".concat(p,"px, 0, 0)")}},Os.default.createElement(E4,{active:y==="both"||y==="end"},s(f.end)))))},Wae=$ae}),Kae,qae,Xae,Yae,Zae,e2e=C(()=>{Kae=Z(Re()),Ne(),Xae=se.div(qae||(qae=G([`
  position: absolute;
  inset: `,`px;
`])),i=>i.room*-1),Yae=i=>Kae.default.createElement(Xae,{room:i.room}),Zae=Yae}),hR,pR,C4,Qae,Jae,ele,tle,nle,rle,ile,ole,t2e=C(()=>{Ne(),hn(),EB(),sv(),hR=Z(Re()),pR=Z(Re()),C4=Mt,F0(),Qae=i=>isFinite(i)&&i>=0,ele=se.div(Jae||(Jae=G([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),nle=se.div(tle||(tle=G([`
  `,`;
  white-space: nowrap;
`])),Pp),rle=({deltaX:i})=>i*.25,ile=({layoutP:i,onRequestClose:s})=>{let a=(0,C4.val)(i.sheet),c=a.getSequence(),p=(0,hR.useMemo)(()=>{let g,y=c.position;return{temporarilySetValue(w){g&&(g=void 0),g=li(w,0,c.length),c.position=g},discardTemporaryValue(){g&&(g=void 0,c.position=y,s("discardTemporaryValue"))},permanentlySetValue(w){g&&(g=void 0),c.position=li(w,0,c.length),s("permanentlySetValue")}}},[i,c]),f=(0,hR.useRef)(null);return(0,hR.useLayoutEffect)(()=>{f.current.focus()},[]),Un(()=>{let g=a.getSequence(),y=Number((0,C4.val)(g.pointer.position).toFixed(3));return pR.default.createElement(ele,null,pR.default.createElement(nle,null,"Sequence position"),pR.default.createElement(vA,z(j({value:y},p),{isValid:Qae,inputRef:f,nudge:rle})))},[a,p,f])},ole=ile}),sle,n2e=C(()=>{sle=typeof navigator<"u"&&navigator.platform.toUpperCase().indexOf("MAC")>=0}),ale,r2e=C(()=>{n2e(),ale=i=>sle?i.metaKey===!0:i.ctrlKey===!0});function i2e(){fR=!1}function o2e(){fR=!0}function s2e(){let i=me();(0,lle.useEffect)(()=>{let s=a=>{let c=a.composedPath()[0];if(!(c&&(c.tagName==="INPUT"||c.tagName==="TEXTAREA"))){if(a.key==="z"||a.key==="Z"||a.code==="KeyZ")if(ale(a))a.shiftKey===!0?i.redo():i.undo();else return;else if(a.code==="Space"&&!a.shiftKey&&!a.metaKey&&!a.altKey&&!a.ctrlKey){if(!fR)return;let p=uCe();if(p)if(p.playing)p.pause();else{let{projectId:f,sheetId:g}=p.address,y=(0,pu.prism)(()=>{let T=(0,pu.val)(me().atomP.ahistoric.projects.stateByProjectId[f].stateBySheetId[g].sequence.focusRange);return pu.prism.memo("shouldFollowFocusRange",()=>{let I=p.position;if(T){let A=I>=T.range.start&&I<=T.range.end;return T.enabled?!!A:!0}else return!0},[])&&T&&T.enabled?{range:[T.range.start,T.range.end],isFollowingARange:!0}:{range:[0,(0,pu.val)(p.pointer.length)],isFollowingARange:!1}}),w=p.playDynamicRange((0,pu.prism)(()=>(0,pu.val)(y).range),me().ticker),S=P4(p);w.finally(()=>{S.set(void 0)}),S.set(y)}else return}else if(a.altKey&&(a.key==="\\"||a.code==="Backslash"||a.code==="IntlBackslash"))i.transaction(({stateEditors:p,drafts:f})=>{p.studio.ahistoric.setVisibilityState(f.ahistoric.visibilityState==="everythingIsHidden"?"everythingIsVisible":"everythingIsHidden")});else return;a.preventDefault(),a.stopPropagation()}};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[])}var lle,pu,fR,P4,ule,k4=C(()=>{lle=Z(Re()),Fe(),r2e(),wp(),pu=Mt,DA(),fR=!0,P4=rS(i=>new pu.Atom(void 0)),ule=rS(i=>(0,pu.prism)(()=>{let s=P4(i).prism.getValue();if(s)return s.getValue().isFollowingARange;{let{projectId:a,sheetId:c}=i.address,p=(0,pu.val)(me().atomP.ahistoric.projects.stateByProjectId[a].stateBySheetId[c].sequence.focusRange);if(!p||!p.enabled)return!1;let f=(0,pu.val)(i.pointer.position);return f>=p.range.start&&f<=p.range.end}}))});function a2e(i,s){return Ts(i,{menuItems(){return[{label:"Place marker",callback:()=>{me().transaction(({stateEditors:a})=>{let c=(0,Cc.val)(s.layoutP.sheet),p=c.getSequence();a.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:c.address,markers:[{id:KPe(),position:p.position}],snappingFunction:p.closestGridPosition})})}}]}})}var Cc,vl,cle,Dv,dle,hle,ple,T4,fle,mle,vle,gle,yle,ble,l2e=C(()=>{e2e(),no(),mr(),hn(),Cc=Mt,F0(),vl=Z(Re()),Ne(),Wd(),jo(),vr(),uc(),dc(),t2e(),k4(),Ea(),Ms(),Fe(),Nd(),du(),mv(),Dv=se.div(cle||(cle=G([`
  --thumbColor: #00e0ff;
  position: absolute;
  top: 0;
  left: 0;
  width: 5px;
  height: 100%;
  z-index: `,`;
  pointer-events: none;

  display: `,`;
`])),()=>Pc.playhead,i=>i.isVisible?"block":"none"),hle=se.div(dle||(dle=G([`
  position: absolute;
  top: 8px;
  width: 0;
  height: calc(100% - 8px);
  border-left: 1px solid #27e0fd;
  z-index: 10;
  pointer-events: none;

  #pointer-root.draggingPositionInSequenceEditor &:not(.seeking) {
    /* pointer-events: auto; */
    /* cursor: var(`,`); */

    &:after {
      position: absolute;
      inset: -8px;
      display: block;
      content: ' ';
    }
  }
`])),Id),T4=se.div(ple||(ple=G([`
  background-color: var(--thumbColor);
  position: absolute;
  width: 5px;
  height: 13px;
  top: -4px;
  left: -2px;
  z-index: 11;
  cursor: ew-resize;
  --sunblock-color: #1f2b2b;

  `,`;

  `,`.seeking > & {
    pointer-events: none !important;
  }

  #pointer-root.draggingPositionInSequenceEditor
    `,`:not(.seeking)
    > & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  `,`.playheadattachedtofocusrange > & {
    top: -8px;
    --sunblock-color: #005662;
    &:before,
    &:after {
      border-bottom-width: 8px;
    }
  }

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-left: 2px solid transparent;
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    right: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-right: 2px solid transparent;
  }
`])),hr,Dv,Dv,Id,Dv),mle=se.div(fle||(fle=G([`
  position: absolute;
  left: 1px;
  right: 1px;
  top: 13px;
  border-top: 3px solid var(--thumbColor);
  border-right: 1px solid transparent;
  border-left: 1px solid transparent;
  pointer-events: none;

  /* `,`.playheadattachedtofocusrange & {
    top: 10px;
    &:before,
    &:after {
      height: 15px;
    }
  } */

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    left: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 0 100% 0 0;
    border-top: 1px solid var(--thumbColor);
    border-right: 1px solid var(--thumbColor);
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    right: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 100% 0 0 0;
    border-top: 1px solid var(--thumbColor);
    border-left: 1px solid var(--thumbColor);
  }
`])),Dv),gle=se.div(vle||(vle=G([`
  display: none;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 2px;
  transform: translateX(-50%);
  background: #1a1a1a;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;
  `,":hover &, ",`.seeking & {
    display: block;
  }
`])),T4,Dv),yle=({layoutP:i})=>{let[s,a]=sr(null),{node:c,toggle:p,close:f}=lc({debugName:"Playhead"},()=>vl.default.createElement(cc,null,vl.default.createElement(ole,{layoutP:i,onRequestClose:f}))),g=(0,vl.useMemo)(()=>({debugName:"RightOverlay/Playhead",onDragStart(){let S=(0,Cc.val)(i.sheet).getSequence(),T=S.position,I=(0,Cc.val)(i.scaledSpace.toUnitSpace),A=(0,Cc.val)(i.seeker.setIsSeeking);return A(!0),dV(),{onDrag(k,D,O){var F;let V=I(k);S.position=(F=As.checkIfMouseEventSnapToPos(O,{ignore:a}))!=null?F:li(T+V,0,S.length)},onDragEnd(k){A(!1),fv()},onClick(k){p(k,s.current)}}}}),[i,a]),[y]=xi(a,g);ul(y,"draggingPositionInSequenceEditor","ew-resize"),Vd($n(i.seeker.isSeeking)||y,-1);let[w]=a2e(a,{layoutP:i});return Un(()=>{let S=(0,Cc.val)(i.seeker.isSeeking),T=(0,Cc.val)(i.sheet).getSequence(),I=(0,Cc.val)(ule(T)),A=T.positionPrism.getValue(),k=(0,Cc.val)(i.clippedSpace.fromUnitSpace)(A),D=k>=0&&k<=(0,Cc.val)(i.clippedSpace.width);return vl.default.createElement(vl.default.Fragment,null,w,c,vl.default.createElement(Dv,j({isVisible:D,style:{transform:"translate3d(".concat(k,"px, 0, 0)")},className:"".concat(S&&"seeking"," ").concat(I&&"playheadattachedtofocusrange")},gc("hide")),vl.default.createElement(T4,j({ref:s},As.includePositionSnapAttrs(A)),vl.default.createElement(Zae,{room:8}),vl.default.createElement(mle,null),vl.default.createElement(gle,null,T.positionFormatter.formatForPlayhead(T.closestGridPosition(A)))),vl.default.createElement(hle,z(j({},As.includePositionSnapAttrs(A)),{className:S?"seeking":""}))))},[i,s,c])},ble=yle}),Lv,ZS,mR,_le,wle,xle,Sle,u2e=C(()=>{Lv=Mt,hn(),Fe(),Iv(),ZS=Z(Re()),Ne(),mR=1e3,wle=se.div(_le||(_le=G([`
  position: absolute;
  top: `,`px;
  left: 0;
  opacity: 0.15;
  width: `,`px;
  transform-origin: top left;
  pointer-events: none;
  background-color: `,`;
`])),Ec,mR,i=>i.enabled?"#000000":"transparent"),xle=({layoutP:i})=>{let s=(0,ZS.useMemo)(()=>(0,Lv.prism)(()=>{let{projectId:a,sheetId:c}=(0,Lv.val)(i.sheet).address;return(0,Lv.val)(me().atomP.ahistoric.projects.stateByProjectId[a].stateBySheetId[c].sequence.focusRange)}),[i]);return Un(()=>{let a=s.getValue();if(!a||!a.enabled)return null;let c=(0,Lv.val)(i.rightDims.height)-Ec,p=(0,Lv.val)(i.clippedSpace.fromUnitSpace),f=(0,Lv.val)(i.clippedSpace.width),g=[];{let y=0,w=p(a.range.start),S,T;y>w?(T=0,S=0):(w>f&&(w=f),T=y,S=(w-y)/mR),g.push({translateX:T,scaleX:S})}{let y=p(a.range.end),w=f,S,T;y>w?(T=0,S=0):(y<0&&(y=0),T=y,S=(w-y)/mR),g.push({translateX:T,scaleX:S})}return ZS.default.createElement(ZS.default.Fragment,null,g.map(({translateX:y,scaleX:w},S)=>ZS.default.createElement(wle,{key:"curtain-".concat(S),enabled:!0,style:{height:"".concat(c,"px"),transform:"translateX(".concat(y,"px) scaleX(").concat(w,")")}})))},[i,s])},Sle=xle}),rb,Ele,Cle,Ple,kle,Tle,c2e=C(()=>{rb=Z(Re()),Ne(),hn(),Fe(),sv(),IB(),Cle=se.div(Ele||(Ele=G([`
  display: flex;
  gap: 8px;
  /* padding: 4px 8px; */
  height: 28px;
  align-items: center;
`]))),se.div(Ple||(Ple=G([`
  `,`;
  white-space: nowrap;
`])),Pp),kle=({layoutP:i,marker:s})=>{var a;let c=$n(i.sheet),p=(0,rb.useMemo)(()=>{let g;return{temporarilySetValue(y){g&&(g.discard(),g=void 0),g=me().tempTransaction(({stateEditors:w})=>{w.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:c.address,markerId:s.id,label:y})})},discardTemporaryValue(){g&&(g.discard(),g=void 0)},permanentlySetValue(y){g&&(g.discard(),g=void 0),me().transaction(({stateEditors:w})=>{w.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:c.address,markerId:s.id,label:y})})}}},[i,c]),f=(0,rb.useRef)(null);return(0,rb.useLayoutEffect)(()=>{f.current.focus()},[]),rb.default.createElement(Cle,null,rb.default.createElement(yA,z(j({value:(a=s.label)!=null?a:""},p),{isValid:()=>!0,inputRef:f})))},Tle=kle});function d2e(i,s){return Ts(i,{menuItems(){return[{label:"Remove marker",callback:()=>{me().transaction(({stateEditors:a})=>{a.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removeMarker({sheetAddress:s.sheetAddress,markerId:s.markerId})})}}]}})}function h2e(i,s){let a=(0,Ds.useRef)(s);a.current=s;let c=(0,Ds.useMemo)(()=>({debugName:"MarkerDot/useDragMarker (".concat(s.marker.id,")"),onDragStart(f){let g=a.current.marker,y=(0,vR.val)(s.layoutP.scaledSpace.toUnitSpace),w;return dV(),{onDrag(S,T,I){var A;let k=g,D=Math.max((A=As.checkIfMouseEventSnapToPos(I,{ignore:i}))!=null?A:k.position+y(S),0);w==null||w.discard(),w=me().tempTransaction(({stateEditors:O})=>{O.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:(0,vR.val)(s.layoutP.sheet.address),markers:[z(j({},k),{position:D})],snappingFunction:(0,vR.val)(s.layoutP.sheet).getSequence().closestGridPosition})})},onDragEnd(S){S?w==null||w.commit():w==null||w.discard(),fv()}}}}),[]),[p]=xi(i,c);return Vd(p,s.marker.position),ul(p,"draggingPositionInSequenceEditor draggingMarker","ew-resize"),[p]}var vR,Ds,M4,A4,Mle,Ale,Ile,Rle,Ole,gR,Dle,Lle,Nle,Fle,Ble,Ule,p2e=C(()=>{vR=Mt,hn(),Fe(),Ea(),Ms(),mr(),Ds=Z(Re()),Ne(),jo(),no(),Wd(),du(),xI(),Ene(),mv(),uc(),dc(),c2e(),M4=12,A4=12,Mle=M4*2,Ale=A4*2,Rle=se.div(Ile||(Ile=G([`
  position: absolute;
  // below the sequence ruler "top bar"
  top: 18px;
  z-index: `,`;
`])),()=>Pc.marker),gR=se.div(Ole||(Ole=G([`
  position: absolute;
  `,`
  pointer-events: none;
`])),hl(M4,A4)),Dle=Ds.default.memo(()=>Ds.default.createElement(gR,{children:Ds.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ds.default.createElement("path",{d:"M12 5H0V7H2.71973L5.96237 10.2426L9.20501 7H12V5Z",fill:"#40AAA4"}))})),Nle=se.div(Lle||(Lle=G([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  // :not dragging marker to ensure that markers don't snap to other markers
  // this works because only one marker track (so this technique is not used by keyframes...)
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) & {
    `,`
  }

  // "All instances of this component <Mark/> inside #pointer-root when it has the .draggingPositionInSequenceEditor class"
  // ref: https://styled-components.com/docs/basics#pseudoelements-pseudoselectors-and-nesting
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) &,
  #pointer-root.draggingPositionInSequenceEditor
    &.`,` {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &:hover
    + `,`,
    // notice , "or" in CSS
    &.`,`
    + `,` {
    `,`
  }
`])),yc.CSS,yc.CSS_WHEN_SOMETHING_DRAGGING,yc.BEING_DRAGGED_CLASS,Id,gR,yc.BEING_DRAGGED_CLASS,gR,hl(Mle,Ale)),Fle=({layoutP:i,markerId:s})=>{let a=$n(i.sheet.address),c=$n(me().atomP.historic.projects.stateByProjectId[a.projectId].stateBySheetId[a.sheetId].sequenceEditor.markerSet.byId[s]);if(!c)return null;let p=$n(i.clippedSpace.width),f=$n(i.clippedSpace.fromUnitSpace)(c.position),g=f<=0||f>p,y=g?-1e4:f,w=g?0:1;return Ds.default.createElement(Rle,{style:{transform:"translateX(".concat(y,"px) scale(").concat(w,")")}},Ds.default.createElement(Ule,{marker:c,layoutP:i}))},Ble=Fle,Ule=({layoutP:i,marker:s})=>{let a=$n(i.sheet.address),[c,p]=sr(null),[f]=d2e(p,{sheetAddress:a,markerId:s.id}),[g]=h2e(p,{layoutP:i,marker:s}),{node:y,toggle:w,close:S}=lc({debugName:"MarkerPopover"},()=>Ds.default.createElement(cc,null,Ds.default.createElement(Tle,{marker:s,layoutP:i,onRequestClose:S})));return Ds.default.createElement(Ds.default.Fragment,null,f,y,Ds.default.createElement(Nle,j({title:s.label?"Marker: ".concat(s.label):"Marker",ref:c,onClick:T=>{w(T,c.current)}},yc.reactProps({isDragging:g,position:s.position}))),Ds.default.createElement(Dle,null))}}),yR,Vle,jle,f2e=C(()=>{hn(),Fe(),yR=Z(Re()),p2e(),Vle=({layoutP:i})=>{let s=$n(i.sheet.address),a=me().atomP.historic.projects.stateByProjectId[s.projectId].stateBySheetId[s.sheetId].sequenceEditor.markerSet,c=$n(a.allIds);return yR.default.createElement(yR.default.Fragment,null,c&&Object.keys(c).map(p=>yR.default.createElement(Ble,{key:p,layoutP:i,markerId:p})))},jle=Vle}),zle,$d,Hle,Gle,$le,Wle,m2e=C(()=>{Wd(),hn(),zle=Mt,$d=Z(Re()),Ne(),ZMe(),QMe(),JMe(),l2e(),Iv(),u2e(),f2e(),Gle=se.div(Hle||(Hle=G([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: visible;
  pointer-events: none;
`])),()=>Pc.rightOverlay),$le=({layoutP:i})=>Un(()=>{let s=(0,zle.val)(i.rightDims.width);return $d.default.createElement(Gle,{style:{width:s+"px"}},$d.default.createElement(ble,{layoutP:i}),$d.default.createElement(Wae,{layoutP:i}),$d.default.createElement(Lae,{layoutP:i}),$d.default.createElement(aae,{layoutP:i}),$d.default.createElement(jle,{layoutP:i}),$d.default.createElement(kae,{layoutP:i}),$d.default.createElement(Sle,{layoutP:i}))},[i]),Wle=$le}),Kle,bR,qle,Xle,Yle,Zle,v2e=C(()=>{Kle=Mt,hn(),Fe(),bR=Z(Re()),Ne(),Ry(),jo(),Xle=se.button(qle||(qle=G([`
  outline: none;
  background-color: #1c1d21;
  border: 1px solid #191919;
  border-radius: 2px;
  display: flex;
  bottom: 14px;
  right: 8px;
  z-index: 1;
  position: absolute;

  padding: 4px 8px;
  display: flex;
  color: #656d77;
  line-height: 20px;
  font-size: 10px;

  &:hover {
    color: white;
  }

  & > svg {
    transition: transform 0.3s;
    transform: rotateZ(0deg);
  }

  &:hover > svg {
    transform: rotateZ(-20deg);
  }

  &.open > svg {
    transform: rotateZ(-180deg);
  }

  &.open:hover > svg {
    transform: rotateZ(-160deg);
  }
`]))),Yle=({layoutP:i})=>{let s=$n(i.graphEditorDims.isOpen),a=(0,bR.useCallback)(()=>{let c=(0,Kle.val)(i.graphEditorDims.isOpen);me().transaction(({stateEditors:p})=>{p.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!c})})},[i]);return bR.default.createElement(Xle,j({onClick:a,title:"Toggle graph editor",className:s?"open":""},gc("hide")),bR.default.createElement(iPe,null))},Zle=Yle}),fu,di,Qle,Jle,eue,tue,Pc,nue,rue,iue,oue,sue,aue,lue,uue,cue,Wd=C(()=>{wp(),hn(),Ote(),fu=Mt,di=Z(Re()),Ne(),IMe(),iR(),jMe(),m2e(),$y(),Bee(),pte(),jo(),Wn(),Jr(),v2e(),Md(),lv(),Jle=se(YU)(Qle||(Qle=G([`
  z-index: `,`;
  box-shadow: 2px 2px 0 rgb(0 0 0 / 11%);
`])),Ey.sequenceEditorPanel),tue=se.div(eue||(eue=G([`
  background-color: rgba(40, 43, 47, 0.99);
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
  pointer-events: none;
`]))),Pc=(()=>{let i={rightBackground:0,scrollableArea:0,rightOverlay:0,lengthIndicatorCover:0,lengthIndicatorStrip:0,playhead:0,currentFrameStamp:0,marker:0,horizontalScrollbar:0},s=-1;for(let a of Object.keys(i))i[a]=s,s++;return i})(),rue=se(GU)(nue||(nue=G([`
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1;
`]))),iue={edges:{left:{from:"screenLeft",distance:.1},right:{from:"screenRight",distance:.2},top:{from:"screenBottom",distance:.4},bottom:{from:"screenBottom",distance:.01}}},oue={width:800,height:200},sue=i=>di.default.createElement(HU,{panelId:"sequenceEditor",defaultPosition:iue,minDims:oue},di.default.createElement(aue,null)),aue=()=>{let{dims:i}=Gy(),[s,a]=(0,di.useState)(null);return eZ(s),Un(()=>{let c=fu.prism.memo("panelSize",()=>{let A=i.width,k=i.height;return{width:A,height:k,widthWithoutBorder:A-2,heightWithoutBorder:k-4,screenX:i.left,screenY:i.top}},[i]),p=rs(_p().filter(A=>$t(A)||Dt(A)).map(A=>Dt(A)?A.sheet:A));if(rs(p.map(A=>A.template)).length!==1)return di.default.createElement(di.default.Fragment,null);let f=p[0];if(!f)return di.default.createElement(di.default.Fragment,null);let g=QU("panelSizeP",c).pointer,y=fu.prism.memo("key",()=>JSON.stringify(f.address),[f]),w=fu.prism.memo("layout",()=>VMe(f,g),[f,g]).getValue();if((0,fu.val)(w.tree.children).length===0)return di.default.createElement(di.default.Fragment,null);let S=fu.prism.memo("containerRef",cue,[]),T=(0,fu.val)(w.graphEditorDims.isAvailable),I=(0,fu.val)(w.graphEditorDims.isOpen);return di.default.createElement(Jle,{ref:A=>{S(A),A!==s&&a(A)}},di.default.createElement(tue,{style:{width:"".concat((0,fu.val)(w.leftDims.width),"px")}}),di.default.createElement(_ne,{layoutP:w},di.default.createElement(lue,{layoutP:w}),di.default.createElement(Pse,{key:y+"-dopeSheet",layoutP:w}),I&&di.default.createElement(qoe,{key:y+"-graphEditor",layoutP:w}),T&&di.default.createElement(Zle,{layoutP:w}),di.default.createElement(Wle,{layoutP:w})))},[i,s])},lue=({layoutP:i})=>Un(()=>{let s=(0,fu.val)(i.sheet);return di.default.createElement(rue,{style:{width:(0,fu.val)(i.leftDims.width)}},di.default.createElement(ZF,null,di.default.createElement(bp,null,s.address.sheetId," "),di.default.createElement(Hx,null,":",""),di.default.createElement(bp,null,s.address.sheetInstanceId," "),di.default.createElement(Hx,null,"",">",""),di.default.createElement(bp,null,"Sequence")))},[i]),uue=sue,cue=()=>{let i=null,s={passive:!1,capture:!1},a=c=>{Math.abs(c.deltaY)<Math.abs(c.deltaX)&&(c.preventDefault(),c.stopPropagation())};return c=>{i!==c&&i&&i.removeEventListener("wheel",a,s),i=c,c&&c.addEventListener("wheel",a,s)}}}),Nv,due,hue,g2e=C(()=>{bCe(),VU(),Nv=Z(Re()),Fe(),hn(),Oke(),Wd(),due=()=>{let i=$n(me().paneManager.allPanesD),s=Object.entries(i).map(([a,c])=>Nv.default.createElement(Rte,{key:"pane-".concat(a),paneInstance:c}));return Nv.default.createElement(Nv.default.Fragment,null,s,Nv.default.createElement(wK,null),Nv.default.createElement(Oee,null),Nv.default.createElement(uue,null))},hue=due}),pue,fue,mue,y2e=C(()=>{Ne(),eI(),fue=se(jy)(pue||(pue=G([`
  --popover-outer-stroke: #e11c1c;
  --popover-inner-stroke: #2c1c1c;
  --popover-bg: #2c1c1c;
  pointer-events: none !important;
`]))),mue=fue}),b2e=K((i,s)=>{var a,c;a=[],c=[];function p(f,g,y){var w,S,T,I,A,k,D,O;if(f===g)return 0;if(w=f.length,S=g.length,w===0)return S;if(S===0)return w;for(y&&(f=f.toLowerCase(),g=g.toLowerCase()),D=0;D<w;)c[D]=f.charCodeAt(D),a[D]=++D;for(O=0;O<S;)for(T=g.charCodeAt(O),I=A=O++,D=-1;++D<w;)k=T===c[D]?A:A+1,A=a[D],a[D]=I=A>I?k>I?I+1:k:k>A?A+1:k;return I}s.exports=p}),_2e=K((i,s)=>{var a=b2e();function c(){var p,f,g,y,w,S=0,T=arguments[0],I=arguments[1],A=I.length,k=arguments[2];k&&(y=k.threshold,w=k.ignoreCase),y===void 0&&(y=0);for(var D=0;D<A;++D)w?f=a(T,I[D],!0):f=a(T,I[D]),f>T.length?p=1-f/I[D].length:p=1-f/T.length,p>S&&(S=p,g=I[D]);return S>=y?g:null}s.exports=c});function w2e(i,s,a="Did you mean ",c="?"){let p=(0,vue.default)(i,s,{threshold:.7});return p?a+JSON.stringify(p)+c:""}var vue,x2e=C(()=>{vue=Z(_2e())});function gue(i,s){return i.length<=s?i:i.substr(0,s-3)+"..."}var S2e=C(()=>{}),yue,I4,bue=C(()=>{S2e(),yue=i=>typeof i=="string"?'string("'.concat(gue(i,10),'")'):typeof i=="number"?"number(".concat(gue(String(i),10),")"):i===null?"null":i===void 0?"undefined":typeof i=="boolean"?String(i):Array.isArray(i)?"array":typeof i=="object"?"object":"unknown",I4=yue}),_ue,wue,R4,xue=C(()=>{Ne(),rv(),wue=se(r7)(_ue||(_ue=G([`
  display: flex;
  height: fit-content;
  backdrop-filter: blur(14px);
  border-radius: 2px;
`]))),R4=wue}),ib,Sue,Eue,Cue,ob,QS=C(()=>{Ne(),vr(),ib=Z(Re()),_S(),fA(),OJ(),xue(),Eue=se.button(Sue||(Sue=G([`
  `,`;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  width: 32px;
  height: 32px;
  outline: none;

  color: #a8a8a9;

  background: rgba(40, 43, 47, 0.8);
  backdrop-filter: blur(14px);
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 2px;

  svg {
    display: block;
  }

  &:hover {
    background: rgba(59, 63, 69, 0.8);
  }

  &:active {
    background: rgba(82, 88, 96, 0.8);
  }

  &.selected {
    color: rgba(255, 255, 255, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.7);
  }

  // Don't blur if in a button group, because it already blurs. We need to blur
  // on the group-level, otherwise we get seams.
  `,` > & {
    backdrop-filter: none;
    filter: none;
    border-radius: 0;

    &:first-child {
      border-top-left-radius: 2px;
      border-bottom-left-radius: 2px;
    }

    &:last-child {
      border-bottom-right-radius: 2px;
      border-top-right-radius: 2px;
    }
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),hr,R4),Cue=ib.default.forwardRef((i,s)=>{var a=i,{title:c}=a,p=U(a,["title"]);let[f,g]=Vy({enabled:typeof c=="string"},()=>ib.default.createElement(IU,null,c));return ib.default.createElement(ib.default.Fragment,null,f,ib.default.createElement(Eue,j({ref:pA([g,s])},p))," ")}),ob=Cue}),Pue,kue,Tue,Mue,Aue,E2e=C(()=>{Pue=Z(Re()),QS(),Ne(),vr(),Tue=se(ob)(kue||(kue=G([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),hr),Mue=({config:i,testId:s})=>{var a;return Pue.default.createElement(Tue,{onClick:i.onClick,"data-testid":s,title:i.title,dangerouslySetInnerHTML:{__html:(a=i.svgSource)!=null?a:""}})},Aue=Mue});function C2e({value:i,label:s,icon:a,onClick:c,isSelected:p}){return sb.default.createElement(sb.default.Fragment,null,sb.default.createElement(ob,{forwardedAs:e7,className:p?"selected":void 0,"aria-label":s,onClick:c,title:s},a))}var sb,Iue,Rue,P2e=C(()=>{sb=Z(Re()),rv(),QS(),xue(),Iue=({value:i,onChange:s,options:a})=>sb.default.createElement(R4,null,a.map(({label:c,icon:p,value:f})=>sb.default.createElement(C2e,{key:f,value:f,isSelected:i===f,label:c,icon:p,onClick:()=>s(f)}))),Rue=Iue}),O4,Oue,Due,Lue,Nue,k2e=C(()=>{O4=Z(Re()),Ne(),vr(),P2e(),Due=se.div(Oue||(Oue=G([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),hr),Lue=({config:i})=>O4.default.createElement(Rue,{onChange:i.onChange,options:i.options.map(({label:s,value:a,svgSource:c})=>({label:s,value:a,icon:O4.default.createElement(Due,{dangerouslySetInnerHTML:{__html:c}})})),value:i.value}),Nue=Lue}),JS,Fue,Bue,Uue,Vue,T2e=C(()=>{JS=Z(Re()),Ne(),vr(),QS(),GY(),uc(),Bue=se.div(Fue||(Fue=G([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),hr),Uue=({config:i})=>{let s=(0,JS.useRef)(null),a=lc(()=>{let c=s.current.getBoundingClientRect();return{debugName:"ExtensionFlyoutMenu:"+i.label,constraints:{maxX:c.right,maxY:8,minX:c.left,minY:8},verticalGap:2}},()=>JS.default.createElement(sU,{items:i.items.map((c,p)=>({label:c.label,callback:()=>{var f;try{(f=c.onClick)==null||f.call(c)}catch(g){console.error(g)}}})),onRequestClose:()=>{a.close("clicked")}}));return JS.default.createElement(Bue,null,a.node,JS.default.createElement(ob,{ref:s,onClick:c=>{a.open(c,s.current)}},i.label))},Vue=Uue});function M2e(i){return D4[i]}var eE,jue,D4,zue,Hue,A2e=C(()=>{x2e(),bue(),eE=Z(Re()),E2e(),k2e(),T2e(),jue=i=>eE.default.createElement(eE.default.Fragment,null,i.config.map((s,a)=>eE.default.createElement(zue,{config:s,key:a}))),D4={Icon:Aue,Switch:Nue,Flyout:Vue},zue=({config:i})=>{let s=M2e(i.type);if(!s)throw new Error("No tool with tool.type ".concat(I4(i.type)," exists. Did you mean ").concat(w2e(i.type,Object.keys(D4))));return eE.default.createElement(s,{config:i})},Hue=jue}),Gue,kc,$ue,Wue,Kue,L4,que,Xue,N4,Yue=C(()=>{Gue=Mt,hn(),Fe(),kc=Z(Re()),Ne(),A2e(),Wue=se.div($ue||($ue=G([`
  height: 36px;
  /* pointer-events: none; */

  display: flex;
  gap: 0.5rem;
  justify-content: center;
`]))),L4=se.div(Kue||(Kue=G([`
  position: abolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),que=({extension:i,toolbarId:s})=>{var a;let c=(0,kc.useMemo)(()=>new Gue.Atom([]),[]),p=(a=i.toolbars)==null?void 0:a[s];(0,kc.useLayoutEffect)(()=>{let g=p==null?void 0:p(c.set.bind(c),me().publicApi);if(typeof g=="function")return g},[i,s,p]);let f=$n(c.prism);return kc.default.createElement(Hue,{config:f})},Xue=({toolbarId:i,showLeftDivider:s})=>{var a;let c=[],p=$n(me().atomP.ephemeral.extensions.byId),f=!1;for(let[,g]of Object.entries(p))!g||!((a=g.toolbars)!=null&&a[i])||(c.push(kc.default.createElement(kc.default.Fragment,{key:"extensionToolbar-"+g.id},f?kc.default.createElement(L4,null):void 0,kc.default.createElement(que,{extension:g,toolbarId:i}))),f=!0);return c.length===0?null:kc.default.createElement(Wue,{"data-testid":"theatre-extensionToolbar-".concat(i)},s?kc.default.createElement(L4,null):void 0,c)},N4=Xue}),tE,Zue,Que,Jue,_R,I2e=C(()=>{Ne(),tE=Z(Re()),QS(),Que=se(ob)(Zue||(Zue=G([`
  color: `,`;

  border-bottom: 1px solid
    `,`;
`])),({pinned:i})=>i?"rgba(255, 255, 255, 0.8)":"#A8A8A9",({pinned:i})=>i?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.08)"),Jue=(0,tE.forwardRef)((i,s)=>{var a=i,{children:c,hint:p,pinned:f,icon:g,pinHintIcon:y,unpinHintIcon:w}=a,S=U(a,["children","hint","pinned","icon","pinHintIcon","unpinHintIcon"]);let[T,I]=(0,tE.useState)(!1),A=T||p;return tE.default.createElement(Que,z(j({},S),{pinned:f,ref:s,onMouseOver:()=>I(!0),onMouseOut:()=>I(!1)}),tE.default.createElement("div",{style:{pointerEvents:"none",width:"fit-content",height:"fit-content",inset:0}},A&&!f?y:A&&f?w:g),c)}),_R=Jue});function R2e(i){return F4.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),F4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.732 4.048l-.792-.792L7.2 8l4.74 4.744.792-.792L8.781 8l3.951-3.952zm-3.932 0l-.792-.792L3.268 8l4.74 4.744.792-.792L4.848 8 8.8 4.048z",fill:"currentColor"}))}var F4,B4,O2e=C(()=>{F4=Z(Re()),B4=R2e});function D2e(i){return U4.createElement("svg",j({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),U4.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.694 3.765l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.951-3.951-3.951-3.952zm3.932 0l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.952-3.951-3.952-3.952z",fill:"currentColor"}))}var U4,V4,L2e=C(()=>{U4=Z(Re()),V4=D2e}),io,ece,tce,nce,j4,rce,Gp,ice,oce,sce,ace,lce,uce,cce,dce,hce,wR,pce,fce,z4,H4,mce,vce,N2e=C(()=>{hn(),Fe(),io=Z(Re()),Ne(),tce=se.div(ece||(ece=G([`
  width: 138px;
  border-radius: 2px;
  background-color: rgba(42, 45, 50, 0.9);
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.25), 0px 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  pointer-events: auto;
  // makes the edges of the item highlights match the rounded corners
  overflow: hidden;

  @supports not (backdrop-filter: blur()) {
    background-color: rgba(42, 45, 50, 0.98);
  }

  color: rgba(255, 255, 255, 0.9);

  & a {
    // Fix colors of links to not be default
    color: inherit;
  }
`]))),j4=se.div(nce||(nce=G([`
  position: relative;
  padding: 0px 12px;
  font-weight: 400;
  font-size: 11px;
  height: 32px;
  text-decoration: none;
  user-select: none;
  display: flex;
  flex-direction: row;
  align-items: center;
  cursor: default;
`]))),Gp=se(j4)(rce||(rce=G([`
  &:before {
    position: absolute;
    display: block;
    content: ' ';
    inset: 3px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.1);
    opacity: 0;
  }

  &.secondary {
    color: rgba(255, 255, 255, 0.5);
  }

  &:hover {
    /* background-color: #398995; */
    color: white !important;
    &:before {
      opacity: 1;
    }
  }
`]))),oce=se(j4)(ice||(ice=G([`
  height: auto;
  min-height: 32px;
  padding-top: 12px;
  padding-bottom: 10px;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  gap: 8px;
  color: rgba(255, 255, 255, 0.5);
`]))),ace=se.div(sce||(sce=G([`
  font-weight: 600;
`]))),uce=se.div(lce||(lce=G([`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`]))),dce=se.div(cce||(cce=G([`
  margin-left: 2px;
`]))),wR=se.div(hce||(hce=G([`
  height: 1px;
  margin: 0 2px;
  background: rgba(255, 255, 255, 0.02);
`]))),fce=se.div(pce||(pce=G([`
  position: absolute;
  width: 8px;
  height: 8px;
  background: #40aaa4;
  right: 14px;
  top: 12px;
  border-radius: 50%;
`]))),z4="0.7.0",H4=z4.match(/^[^\-]+/)[0],mce=io.default.forwardRef((i,s)=>{let a=$n(me().atomP.ahistoric.updateChecker.result.hasUpdates);return io.default.createElement(tce,{ref:s},io.default.createElement(Gp,{as:"a",href:"https://www.theatrejs.com/docs/latest",className:"",target:"_blank"},"Docs"),io.default.createElement(Gp,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases",className:"",target:"_blank"},"Changelog"),io.default.createElement(wR,null),io.default.createElement(Gp,{as:"a",href:"https://github.com/theatre-js/theatre",className:"",target:"_blank"},"Github"),io.default.createElement(Gp,{as:"a",href:"https://twitter.com/theatre_js",className:"",target:"_blank"},"Twitter"),io.default.createElement(Gp,{className:"",as:"a",href:"https://discord.gg/bm9f8F9Y9N",target:"_blank"},"Discord"),io.default.createElement(wR,null),io.default.createElement(oce,null,io.default.createElement(ace,null,"Version"),io.default.createElement(uce,null,io.default.createElement(dce,null,z4," ",a===!0?"(outdated)":a===!1?"(latest)":""))),a===!0&&io.default.createElement(io.default.Fragment,null,io.default.createElement(wR,null),io.default.createElement(Gp,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases".concat(encodeURIComponent(H4)),className:"",target:"_blank"},"Update",io.default.createElement(fce,null)),io.default.createElement(Gp,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases#".concat(encodeURIComponent(H4)),className:"",target:"_blank"},"What's new?")))}),vce=mce}),Ur,gce,yce,bce,_ce,wce,xce,G4,Sce,$4,Ece,W4,Cce,Pce,F2e=C(()=>{hn(),Fe(),Ur=Z(Re()),Ne(),_S(),y2e(),eI(),gce=Mt,Yue(),I2e(),Gx(),O2e(),L2e(),QS(),uc(),N2e(),MS(),bce=se.div(yce||(yce=G([`
  height: 36px;
  pointer-events: none;

  display: flex;
  justify-content: space-between;
  padding: 12px;
`]))),wce=se.div(_ce||(_ce=G([`
  color: white;
  width: 14px;
  height: 14px;
  background: #d00;
  border-radius: 4px;
  text-align: center;
  line-height: 14px;
  font-weight: 600;
  font-size: 8px;
  position: relative;
  left: -6px;
  top: -11px;
  margin-right: -14px;
  box-shadow: 0 4px 6px -4px #00000059;
`]))),G4=se.div(xce||(xce=G([`
  display: flex;
  gap: 8px;
`]))),$4=se.div(Sce||(Sce=G([`
  position: absolute;
  background: `,`;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  right: -2px;
  top: -2px;
`])),({type:i})=>i==="info"?"#40aaa4":"#f59e0b"),se.div(Ece||(Ece=G([`
  position: absolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),W4=!1,Cce=()=>{var i,s,a;let c=Un(()=>{let O=(0,gce.val)(me().atomP.ephemeral.coreByProject);return Object.entries(O).map(([F,V])=>({projectId:F,state:V})).filter(({state:F})=>F.loadingState.type==="browserStateIsNotBasedOnDiskState")},[]),[p,f]=Vy({enabled:c.length>0,enterDelay:c.length>0?0:200},()=>c.length>0?Ur.default.createElement(mue,null,c.length===1?'There is a state conflict in project "'.concat(c[0].projectId,'". Select the project in the outline below in order to fix it.'):"There are ".concat(c.length," projects that have state conflicts. They are highlighted in the outline below. ")):Ur.default.createElement(jy,null,Ur.default.createElement(Ur.default.Fragment,null,"Outline"))),g=(i=$n(me().atomP.ahistoric.pinOutline))!=null?i:!0,y=(s=$n(me().atomP.ahistoric.pinDetails))!=null?s:!0,w=$n(me().atomP.ahistoric.updateChecker.result.hasUpdates)===!0,S=lc(()=>{let O=T.current.getBoundingClientRect();return{debugName:"More Menu",constraints:{maxX:O.right,maxY:8,minX:O.left-140,minY:8},verticalGap:2}},()=>Ur.default.createElement(vce,null)),T=(0,Ur.useRef)(null),I=(0,Ur.useMemo)(()=>(window.__IS_VISUAL_REGRESSION_TESTING&&(W4||(W4=!0,console.warn("Visual regression testing enabled, so we're showing the updates badge unconditionally"))),w||window.__IS_VISUAL_REGRESSION_TESTING?!0:w),[w]),{hasNotifications:A}=DU(),[k,D]=tee();return Ur.default.createElement(bce,null,Ur.default.createElement(G4,null,p,Ur.default.createElement(_R,{ref:f,"data-testid":"OutlinePanel-TriggerButton",onClick:()=>{me().transaction(({stateEditors:O,drafts:F})=>{var V;O.studio.ahistoric.setPinOutline(!((V=F.ahistoric.pinOutline)==null||V))})},icon:Ur.default.createElement(JF,null),pinHintIcon:Ur.default.createElement(V4,null),unpinHintIcon:Ur.default.createElement(B4,null),pinned:g}),c.length>0?Ur.default.createElement(wce,null,c.length):null,Ur.default.createElement(N4,{showLeftDivider:!0,toolbarId:"global"})),Ur.default.createElement(G4,null,k,Ur.default.createElement(_R,{ref:D,onClick:()=>{me().transaction(({stateEditors:O,drafts:F})=>{var V;O.studio.ahistoric.setPinNotifications(!((V=F.ahistoric.pinNotifications)!=null&&V))})},icon:Ur.default.createElement(lA,null),pinHintIcon:Ur.default.createElement(lA,null),unpinHintIcon:Ur.default.createElement(lA,null),pinned:(a=$n(me().atomP.ahistoric.pinNotifications))!=null?a:!1},A&&Ur.default.createElement($4,{type:"warning"})),S.node,Ur.default.createElement(ob,{ref:T,onClick:O=>{S.toggle(O,T.current)}},Ur.default.createElement(_7,null),I&&Ur.default.createElement($4,{type:"info"})),Ur.default.createElement(_R,{ref:f,onClick:()=>{me().transaction(({stateEditors:O,drafts:F})=>{var V;O.studio.ahistoric.setPinDetails(!((V=F.ahistoric.pinDetails)==null||V))})},icon:Ur.default.createElement(b7,null),pinHintIcon:Ur.default.createElement(B4,null),unpinHintIcon:Ur.default.createElement(V4,null),pinned:y})))},Pce=Cce}),kce,nE,Tce,rE,Mce,Ace,Ice,Rce,Oce=C(()=>{kce=Mt,hn(),nE=Z(Re()),Tce=Z(Xl()),rE=new kce.Atom({set:{},byId:{}}),Mce=1,Ace=()=>{let i=Mce++;function s(c,p,f){rE.reduce(g=>({byId:z(j({},g.byId),{[i]:{comp:c,props:p,portalNode:f}}),set:z(j({},g.set),{[i]:!0})}))}function a(){rE.reduce(c=>{let p=j({},c.set),f=j({},c.byId);return delete p[i],{byId:f,set:p}})}return{mountOrRender:s,unmount:a}},Ice=()=>{let i=Object.keys($n(rE.pointer.set));return nE.default.createElement(nE.default.Fragment,null,i.map(s=>nE.default.createElement(Rce,{key:"id-"+s,id:s})))},Rce=({id:i})=>{let{comp:s,portalNode:a,props:c}=$n(rE.pointer.byId[i]);return(0,Tce.createPortal)(nE.default.createElement(s,j({},c)),a)}});function B2e(i){let s=me(),[a,c]=sr(void 0),p=kse();p.configureLogging({min:128,dev:q4,internal:q4});let f=p.getLogger().named("Theatre.js UIRoot");s2e();let g=$n(s.atomP.ahistoric.visibilityState);return(0,Go.useEffect)(()=>(g==="everythingIsHidden"&&console.warn("Theatre.js Studio is hidden. Use the keyboard shortcut 'alt + \\' to restore the studio, or call studio.ui.restore()."),()=>{}),[g]),Un(()=>{let y=(0,K4.val)(s.atomP.ahistoric.visibilityState);return(0,K4.val)(s.atomP.ephemeral.initialised)?Go.default.createElement(FK,{logger:f},Go.default.createElement(UQ,null,Go.default.createElement(ECe,null,Go.default.createElement(Uce,null),Go.default.createElement(xy.Provider,{value:c},Go.default.createElement(YF,{target:window.__IS_VISUAL_REGRESSION_TESTING===!0?void 0:i.containerShadow},Go.default.createElement(Go.default.Fragment,null,Go.default.createElement(Lce,null),Go.default.createElement(Fce,{className:y==="everythingIsHidden"?"invisible":""},Go.default.createElement(XF,{ref:a}),Go.default.createElement(Pce,null),Go.default.createElement(hue,null),Go.default.createElement(nee,null)))))))):null},[s,a,c])}var K4,Go,Dce,Lce,Nce,Fce,Bce,q4,Uce,U2e=C(()=>{Fe(),hn(),K4=Mt,Go=Z(Re()),Ne(),g2e(),F2e(),mr(),rv(),k4(),Ea(),VQ(),wB(),Oce(),vr(),aR(),Sp(),MS(),Lce=typeof window<"u"?il(Dce||(Dce=G([`
  :host {
    contain: strict;
  }
`]))):{},Fce=se(NK)(Nce||(Nce=G([`
  z-index: 50;
  position: fixed;
  inset: 0;

  &.invisible {
    pointer-events: none !important;
    opacity: 0;
    transform: translateX(1000000px);
  }
`]))),q4=/Playground.+Theatre\.js/.test((Bce=typeof document<"u"?document==null?void 0:document.title:null)!=null?Bce:""),Uce=()=>Go.default.createElement(Ice,null)}),V2e=K(i=>{var s=Xl();i.createRoot=s.createRoot,i.hydrateRoot=s.hydrateRoot}),Vce={};te(Vce,{default:()=>Hce});var jce,zce,Hce,j2e=C(()=>{U2e(),jce=Z(Re()),zce=Z(V2e()),Oce(),vr(),Yue(),Hce=class{constructor(){Pe(this,"containerEl",document.createElement("div")),Pe(this,"_renderTimeout"),Pe(this,"_documentBodyUIIsRenderedIn"),Pe(this,"containerShadow"),this.containerEl.id="theatrejs-studio-root",this.containerEl.style.cssText=`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      z-index: 100;
    `;let i=()=>{if(window.__IS_VISUAL_REGRESSION_TESTING===!0){let s=document.createElement("div");return s.id="theatrejs-faux-shadow-root",document.body.appendChild(s),s}else return this.containerEl.attachShadow({mode:"open"})};this.containerShadow=i()}render(){let i=()=>{if(!document.body){this._renderTimeout=setTimeout(i,5);return}this._renderTimeout=void 0,this._documentBodyUIIsRenderedIn=document.body,this._documentBodyUIIsRenderedIn.appendChild(this.containerEl),zce.default.createRoot(this.containerShadow).render(jce.default.createElement(B2e,{containerShadow:this.containerShadow}))};this._renderTimeout=setTimeout(i,10)}renderToolset(i,s){let a=Ace();return a.mountOrRender(WEe(N4),{toolbarId:i},s),a.unmount}}}),z2e=K(i=>{i.compare=p,i.reduce=f;var s,a,c;i.REMOVE=s=-1,i.ADD=a=1,i.EQUAL=c=0;function p(T,I){var A=T.length,k=I.length,D=g(T,I),O=D<A&&D<k?y(T,I):0,F=O+D-1;A-=F,k-=F;for(var V=S(A,k),$=A-1;$>=0;--$)for(var X=k-1;X>=0;--X)V[X][$]=w(V,T,I,D,$,X);return{prefix:D,matrix:V,suffix:O}}function f(T,I,A){var k,D,O,F,V=A.matrix,$=A.prefix;for(k=0;k<$;++k)I=T(I,c,k,k);for(O=k,$=V.length,k=0,D=0;k<$;)switch(F=V[k][D].type,I=T(I,F,k+O,D+O),F){case c:++k,++D;break;case s:++D;break;case a:++k;break}for(k+=O,D+=O,$=A.suffix,O=0;O<$;++O)I=T(I,c,k+O,D+O);return I}function g(T,I){for(var A=0,k=Math.min(T.length,I.length);A<k&&T[A]===I[A];)++A;return A}function y(T,I){for(var A=T.length-1,k=I.length-1,D=Math.min(A,k),O=0;O<D&&T[A-O]===I[k-O];)++O;return O}function w(T,I,A,k,D,O){return I[D+k]===A[O+k]?{value:T[O+1][D+1].value,type:c}:T[O][D+1].value<T[O+1][D].value?{value:T[O][D+1].value+1,type:s}:{value:T[O+1][D].value+1,type:a}}function S(T,I){var A=[],k,D,O;for(O=A[I]=[],D=0;D<T;++D)O[D]={value:T-D,type:s};for(k=0;k<I;++k)A[k]=[],A[k][T]={value:I-k,type:a};return A[I][T]={value:0,type:c},A}}),Gce=K(i=>{i.cons=s,i.tail=a,i.map=c;function s(p,f){var g=f.length,y=new Array(g+1);y[0]=p;for(var w=0;w<g;++w)y[w+1]=f[w];return y}function a(p){for(var f=p.length-1,g=new Array(f),y=0;y<f;++y)g[y]=p[y+1];return g}function c(p,f){for(var g=new Array(f.length),y=0;y<f.length;++y)g[y]=p(f[y]);return g}}),H2e=K((i,s)=>{s.exports=g;var a=/\/|~1|~0/g,c="/",p="~",f="~1";function g(y,w){var S,T,I,A;for(S=y.charAt(0)===c?1:0,T="",a.lastIndex=S;I=a.exec(y);)if(A=I[0],T+=y.slice(S,a.lastIndex-A.length),S=a.lastIndex,A===c){if(w(T)===!1)return y;T=""}else T+=A===f?c:p;return T+=y.slice(S),w(T),y}}),X4=K(i=>{var s=H2e();i.find=T,i.join=A,i.absolute=I,i.parse=k,i.contains=D,i.encodeSegment=F,i.decodeSegment=O,i.parseArrayIndex=X,i.isValidArrayIndex=$;var a="/",c=/\//g,p="~1",f=/~1/g,g="~",y=/~/g,w="~0",S=/~0/g;function T(ne,ae,Se,fe){if(typeof ae=="string"){if(ae==="")return{target:ne,key:void 0};if(ae===a)return{target:ne,key:""};var ge=ne,Ie,Qe=fe!==void 0;return s(ae,function(le){if(ne==null)return ge=null,!1;Array.isArray(ne)?Ie=Qe?re(Se,X(le),ne,fe):le==="-"?le:X(le):Ie=le,ge=ne,ne=ne[Ie]}),ge===null?void 0:{target:ge,key:Ie}}}function I(ne){return ne[0]===a?ne:a+ne}function A(ne){return ne.join(a)}function k(ne){var ae=[];return s(ne,ae.push.bind(ae)),ae}function D(ne,ae){return ae.indexOf(ne)===0&&ae[ne.length]===a}function O(ne){return ne.replace(f,a).replace(S,g)}function F(ne){return ne.replace(y,w).replace(c,p)}var V=/^(0|[1-9]\d*)$/;function $(ne){return V.test(ne)}function X(ne){if($(ne))return+ne;throw new SyntaxError("invalid array index "+ne)}function re(ne,ae,Se,fe){var ge=ae;if(ge<0)throw new Error("array index out of bounds "+ge);if(fe!==void 0&&typeof ne=="function"&&(ge=ne(ae,Se,fe),ge<0))throw new Error("could not find patch context "+fe);return ge}}),$ce=K((i,s)=>{s.exports=a;function a(f){return f==null||typeof f!="object"?f:Array.isArray(f)?c(f):p(f)}function c(f){for(var g=f.length,y=new Array(g),w=0;w<g;++w)y[w]=a(f[w]);return y}function p(f){for(var g=Object.keys(f),y={},w,S=0,T=g.length;S<T;++S)w=g[S],y[w]=a(f[w]);return y}}),G2e=K((i,s)=>{s.exports=a;function a(f,g){return f===g?!0:Array.isArray(f)&&Array.isArray(g)?c(f,g):typeof f=="object"&&typeof g=="object"?p(f,g):!1}function c(f,g){if(f.length!==g.length)return!1;for(var y=0;y<f.length;++y)if(!a(f[y],g[y]))return!1;return!0}function p(f,g){if(f===null&&g!==null||f!==null&&g===null)return!1;var y=Object.keys(f),w=Object.keys(g);if(y.length!==w.length)return!1;for(var S=0,T;S<y.length;++S)if(T=y[S],!(T in g&&a(f[T],g[T])))return!1;return!0}}),$2e=K((i,s)=>{var a=X4();s.exports=function(T,I){var A=a.parse(T.path),k=a.parse(I.path),D=w(A,k),O=f(A,k,D.length),F=S(T),V=S(I);return D.length===0&&!O?[V,F]:O?p(F,A,V,k):c(F,A,V)};function c(T,I,A,k){if(T.path===A.path)throw new TypeError("cannot commute "+T.op+","+A.op+" with identical object paths");return[A,T]}function p(T,I,A,k){return I.length===k.length?g(T,I,A,k):(I.length>k.length?(I=y(A,k,T,I,-1),T.path=a.absolute(a.join(I))):(k=y(T,I,A,k,1),A.path=a.absolute(a.join(k))),[A,T])}function f(T,I,A){return a.isValidArrayIndex(T[A])&&a.isValidArrayIndex(I[A])}function g(T,I,A,k){var D=I.length-1,O=+I[D],F=+k[D],V;return O<F?T.op==="add"||T.op==="copy"?(V=k.slice(),V[D]=Math.max(0,F-1),A.path=a.absolute(a.join(V))):T.op==="remove"&&(V=k.slice(),V[D]=F+1,A.path=a.absolute(a.join(V))):A.op==="add"||A.op==="copy"?(V=I.slice(),V[D]=O+1,T.path=a.absolute(a.join(V))):O>F&&A.op==="remove"&&(V=I.slice(),V[D]=Math.max(0,O-1),T.path=a.absolute(a.join(V))),[A,T]}function y(T,I,A,k,D){var O=I.length-1,F=+I[O],V=+k[O],$=k.slice();return F>V||(T.op==="add"||T.op==="copy"?$[O]=Math.max(0,V-D):T.op==="remove"&&($[O]=Math.max(0,V+D))),$}function w(T,I){var A=T.length,k=I.length;if(A===0||k===0||A<2&&k<2)return[];for(var D=A===k?A-1:Math.min(A,k),O=0;O<D&&T[O]===I[O];)++O;return T.slice(0,O)}function S(T){return T.op==="remove"?{op:T.op,path:T.path}:T.op==="copy"||T.op==="move"?{op:T.op,path:T.path,from:T.from}:{op:T.op,path:T.path,value:T.value}}}),Wce=K((i,s)=>{s.exports=a;function a(c){Error.call(this),this.name=this.constructor.name,this.message=c,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a}),Y4=K((i,s)=>{s.exports=a;function a(c){Error.call(this),this.name=this.constructor.name,this.message=c,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a}),Kce=K((i,s)=>{s.exports=a;function a(c){Error.call(this),this.name=this.constructor.name,this.message=c,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}a.prototype=Object.create(Error.prototype),a.prototype.constructor=a}),qce=K(i=>{var s=X4(),a=$ce(),c=G2e(),p=$2e(),f=Gce(),g=Wce(),y=Y4(),w=Kce(),S=s.find,T=s.parseArrayIndex;i.test={apply:I,inverse:A,commute:k},i.add={apply:D,inverse:F,commute:V},i.remove={apply:ne,inverse:Se,commute:fe},i.replace={apply:$,inverse:X,commute:re},i.move={apply:ge,inverse:Ie,commute:Qe},i.copy={apply:le,inverse:Ae,commute:V};function I(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context),ue=wt.target,he,qe;if(Array.isArray(ue)?(he=T(wt.key),qe=ue[he]):qe=wt.key===void 0?wt.target:wt.target[wt.key],!c(qe,Te.value))throw new g("test failed "+JSON.stringify(Te));return ke}function A(ke,Te){return ke.push(Te),1}function k(ke,Te){if(ke.path===Te.path&&Te.op==="remove")throw new TypeError("Can't commute test,remove -> remove,test for same path");return Te.op==="test"||Te.op==="replace"?[Te,ke]:p(ke,Te)}function D(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context);if(Y(wt))throw new y("path does not exist "+Te.path);if(Te.value===void 0)throw new y("missing value");var ue=a(Te.value);return wt.key===void 0?ue:(O(wt,ue),ke)}function O(ke,Te){var je=ke.target;if(Array.isArray(je))if(ke.key==="-")je.push(Te);else{if(ke.key>je.length)throw new y("target of add outside of array bounds");je.splice(ke.key,0,Te)}else if(Tt(je))je[ke.key]=Te;else throw new y("target of add must be an object or array "+ke.key)}function F(ke,Te){var je=Te.context;return je!==void 0&&(je={before:je.before,after:f.cons(Te.value,je.after)}),ke.push({op:"test",path:Te.path,value:Te.value,context:je}),ke.push({op:"remove",path:Te.path,context:je}),1}function V(ke,Te){if(ke.path===Te.path&&Te.op==="remove")throw new TypeError("Can't commute add,remove -> remove,add for same path");return p(ke,Te)}function $(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context);if(Y(wt)||Ue(wt))throw new y("path does not exist "+Te.path);if(Te.value===void 0)throw new y("missing value");var ue=a(Te.value);if(wt.key===void 0)return ue;var he=wt.target;return Array.isArray(he)?he[T(wt.key)]=ue:he[wt.key]=ue,ke}function X(ke,Te,je,wt){var ue=wt[je-1];if(ue===void 0||ue.op!=="test"||ue.path!==Te.path)throw new w("cannot invert replace w/o test");var he=ue.context;return he!==void 0&&(he={before:he.before,after:f.cons(ue.value,f.tail(he.after))}),ke.push({op:"test",path:ue.path,value:Te.value}),ke.push({op:"replace",path:ue.path,value:ue.value}),2}function re(ke,Te){if(ke.path===Te.path&&Te.op==="remove")throw new TypeError("Can't commute replace,remove -> remove,replace for same path");return Te.op==="test"||Te.op==="replace"?[Te,ke]:p(ke,Te)}function ne(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context);if(Y(wt)||wt.target[wt.key]===void 0)throw new y("path does not exist "+Te.path);return ae(wt),ke}function ae(ke){var Te=ke.target,je;if(Array.isArray(Te))return je=Te.splice(T(ke.key),1),je[0];if(Tt(Te))return je=Te[ke.key],delete Te[ke.key],je;throw new y("target of remove must be an object or array")}function Se(ke,Te,je,wt){var ue=wt[je-1];if(ue===void 0||ue.op!=="test"||ue.path!==Te.path)throw new w("cannot invert remove w/o test");var he=ue.context;return he!==void 0&&(he={before:he.before,after:f.tail(he.after)}),ke.push({op:"add",path:ue.path,value:ue.value,context:he}),2}function fe(ke,Te){return ke.path===Te.path&&Te.op==="remove"?[Te,ke]:p(ke,Te)}function ge(ke,Te,je){if(s.contains(Te.path,Te.from))throw new y("move.from cannot be ancestor of move.path");var wt=S(ke,Te.path,je.findContext,Te.context),ue=S(ke,Te.from,je.findContext,Te.fromContext);return O(wt,ae(ue)),ke}function Ie(ke,Te){return ke.push({op:"move",path:Te.from,context:Te.fromContext,from:Te.path,fromContext:Te.context}),1}function Qe(ke,Te){if(ke.path===Te.path&&Te.op==="remove")throw new TypeError("Can't commute move,remove -> move,replace for same path");return p(ke,Te)}function le(ke,Te,je){var wt=S(ke,Te.path,je.findContext,Te.context),ue=S(ke,Te.from,je.findContext,Te.fromContext);if(Y(ue)||Ue(ue))throw new y("copy.from must exist");var he=ue.target,qe;return Array.isArray(he)?qe=he[T(ue.key)]:qe=he[ue.key],O(wt,a(qe)),ke}function Ae(ke,Te){throw new w("cannot invert "+Te.op)}function Y(ke){return ke===void 0||ke.target==null&&ke.key!==void 0}function Ue(ke){return ke.key!==void 0&&ke.target[ke.key]===void 0}function Tt(ke){return ke!==null&&typeof ke=="object"}}),W2e=K(i=>{var s=qce(),a=$ce(),c=Y4();i.apply=f,i.applyInPlace=g,i.clone=a,i.isValidObject=w,i.defaultHash=y;var p={};function f(T,I,A){return g(T,a(I),A)}function g(T,I,A){if(A||(A=p),!Array.isArray(T))return I;for(var k,D,O=0;O<T.length;++O){if(D=T[O],k=s[D.op],k===void 0)throw new c("invalid op "+JSON.stringify(D));I=k.apply(I,D,A)}return I}function y(T){return w(T)||S(T)?JSON.stringify(T):T}function w(T){return T!==null&&Object.prototype.toString.call(T)==="[object Object]"}function S(T){return Object.prototype.toString.call(T)==="[object Array]"}}),K2e=K((i,s)=>{var a=qce();s.exports=function(p){var f=[],g,y;for(g=p.length-1;g>=0;g-=y)y=c(f,p[g],g,p);return f};function c(p,f,g,y){var w=a[f.op];return w!==void 0&&typeof w.inverse=="function"?w.inverse(p,f,g,y):1}}),q2e=K(i=>{var s=z2e(),a=Gce(),c=W2e(),p=K2e(),f=X4(),g=f.encodeSegment;i.diff=S,i.patch=c.apply,i.patchInPlace=c.applyInPlace,i.inverse=p,i.clone=c.clone,i.InvalidPatchOperationError=Y4(),i.TestFailedError=Wce(),i.PatchNotInvertibleError=Kce();var y=c.isValidObject,w=c.defaultHash;function S(X,re,ne){return I(X,re,"",T(ne,[])).patch}function T(X,re){return typeof X=="object"?{patch:re,hash:F($,X.hash,w),makeContext:F($,X.makeContext,V),invertible:X.invertible!==!1}:{patch:re,hash:F($,X,w),makeContext:V,invertible:!0}}function I(X,re,ne,ae){return Array.isArray(X)&&Array.isArray(re)?k(X,re,ne,ae):y(X)&&y(re)?A(X,re,ne,ae):O(X,re,ne,ae)}function A(X,re,ne,ae){var Se=Object.keys(re),fe=ae.patch,ge,Ie;for(ge=Se.length-1;ge>=0;--ge){Ie=Se[ge];var Qe=ne+"/"+g(Ie);X[Ie]!==void 0?I(X[Ie],re[Ie],Qe,ae):fe.push({op:"add",path:Qe,value:re[Ie]})}for(Se=Object.keys(X),ge=Se.length-1;ge>=0;--ge)if(Ie=Se[ge],re[Ie]===void 0){var le=ne+"/"+g(Ie);ae.invertible&&fe.push({op:"test",path:le,value:X[Ie]}),fe.push({op:"remove",path:le})}return ae}function k(X,re,ne,ae){var Se=a.map(ae.hash,X),fe=a.map(ae.hash,re),ge=s.compare(Se,fe);return D(X,re,ne,ae,ge)}function D(X,re,ne,ae,Se){var fe=0;return s.reduce(function(ge,Ie,Qe,le){var Ae,Y,Ue=ge.patch,Tt=ne+"/"+(le+fe);return Ie===s.REMOVE?(Ae=Ue[Ue.length-1],Y=ge.makeContext(le,X),ge.invertible&&Ue.push({op:"test",path:Tt,value:X[le],context:Y}),Ae!==void 0&&Ae.op==="add"&&Ae.path===Tt?(Ae.op="replace",Ae.context=Y):Ue.push({op:"remove",path:Tt,context:Y}),fe-=1):Ie===s.ADD?(Ue.push({op:"add",path:Tt,value:re[Qe],context:ge.makeContext(le,X)}),fe+=1):I(X[le],re[Qe],Tt,ge),ge},ae,Se)}function O(X,re,ne,ae){return X!==re&&(ae.invertible&&ae.patch.push({op:"test",path:ne,value:X}),ae.patch.push({op:"replace",path:ne,value:re})),ae}function F(X,re,ne){return X(re)?re:ne}function V(){}function $(X){return typeof X=="function"}}),Fv=K((i,s)=>{function a(c,p){for(var f=0,g=p.length-1;f<g;f++){if(!c[p[f]])return null;c=c[p[f]]}return c}s.exports=a}),$p=K((i,s)=>{function a(p){return p==="~0"?"~":"/"}function c(p){var f=p.split("/");if(p.indexOf("~")===-1)return f;for(var g=0,y=f.length;g<y;g++)f[g].indexOf("~")!==-1&&(f[g]=f[g].replace(/~[01]/g,a));return f}s.exports=c}),X2e=K((i,s)=>{var a=Fv(),c=$p();function p(f,g){var y=c(g),w=y[y.length-1],S=a(f,y);return S?S[w]:void 0}s.exports=p}),xR=K((i,s)=>{function a(c,p){if(c===p)return!0;if(!(c&&p)||typeof c!="object"||typeof p!="object"||c.length!==p.length)return!1;if(Array.isArray(c)){if(!Array.isArray(p))return!1;for(var f=0,g=c.length;f<g;f++)if(!a(c[f],p[f]))return!1;return!0}var y=Object.keys(c);if(y.length!==Object.keys(p).length)return!1;for(var w=0,S=y.length;w<S;w++){var T=y[w];if(!a(c[T],p[T]))return!1}return!0}s.exports=a}),SR=K((i,s)=>{function a(c,p){if(p==="-")return c.length;for(var f=0,g=p.length;f<g;f++){var y=p.charCodeAt(f);if(57<y||y<48)return 1/0}return+p}s.exports=a}),ER=K((i,s)=>{var a=xR(),c=Fv(),p=SR(),f=$p();function g(y,w,S,T){if(typeof S>"u")return"[op:add] require value, but got undefined";var I=f(w),A=I[I.length-1],k=c(y,I);if(k===null)return"[op:add] path not found: "+w;if(Array.isArray(k)){var D=p(k,A);if(k.length<D)return"[op:add] invalid array index: "+w;T(y,I).splice(D,0,S)}else a(k[A],S)||(T(y,I)[A]=S)}s.exports=g}),Xce=K((i,s)=>{var a=Fv(),c=SR(),p=$p();function f(g,y,w){var S=p(y),T=S[S.length-1],I=a(g,S);if(I===null)return"[op:remove] path not found: "+y;if(Array.isArray(I)){var A=c(I,T);if(I.length<=A)return"[op:remove] invalid array index: "+y;w(g,S).splice(A,1)}else delete w(g,S)[T]}s.exports=f}),Yce=K((i,s)=>{var a=xR(),c=Fv(),p=SR(),f=$p();function g(y,w,S,T){if(typeof S>"u")return"[op:replace] require value, but got undefined";var I=f(w),A=I[I.length-1],k=c(y,I);if(k===null)return"[op:replace] path not found: "+w;if(Array.isArray(k)){var D=p(k,A);if(k.length<=D)return"[op:replace] invalid array index: "+w;a(k[D],S)||T(y,I).splice(D,1,S)}else a(k[A],S)||(T(y,I)[A]=S)}s.exports=g}),Zce=K((i,s)=>{var a=ER(),c=Fv(),p=SR(),f=$p();function g(y,w,S,T){if(S!==w){var I=f(w),A=I[I.length-1],k=c(y,I);if(k===null)return"[op:move] path not found: "+w;var D=void 0;if(Array.isArray(k)){var O=p(k,A);if(k.length<=O)return"[op:move] invalid array index: "+S;D=k[O],T(y,I).splice(O,1)}else D=k[A],delete T(y,I)[A];return a(y,S,D,T)}}s.exports=g}),Qce=K((i,s)=>{var a=Fv(),c=$p(),p=ER();function f(g,y,w,S){var T=c(y),I=T[T.length-1],A=a(g,T);return A===null?"[op:copy] path not found: "+y:p(g,w,A[I],S)}s.exports=f}),Jce=K((i,s)=>{var a=xR(),c=Fv(),p=$p();function f(g,y,w){var S=p(y),T=S[S.length-1],I=c(g,S);if(I===null)return"[op:test] path not found: "+y;if(!a(I[T],w)){var A=JSON.stringify(I[T]),k=JSON.stringify(w);return"[op:test] not matched: "+A+" "+k}}s.exports=f}),Z4=K((i,s)=>{function a(c){if(!c||typeof c!="object")return c;if(Array.isArray(c)){for(var p=c.length,f=new Array(p),g=0;g<p;g++)f[g]=c[g];return f}for(var y=Object.keys(c),w={},S=0,T=y.length;S<T;S++){var I=y[S];w[I]=c[I]}return w}s.exports=a}),Y2e=K((i,s)=>{var a=X2e(),c=ER(),p=Xce(),f=Yce(),g=Zce(),y=Qce(),w=Jce(),S=xR(),T=Z4(),I=$p();function A(k,D){return{get:function(O){return a(k,O)},add:function(O,F){return c(k,O,F,D)},remove:function(O){return p(k,O,D)},replace:function(O,F){return f(k,O,F,D)},move:function(O,F){return g(k,O,F,D)},copy:function(O,F){return y(k,O,F,D)},test:function(O,F){return w(k,O,F)},deepEqual:S,shallowCopy:T,toKeys:I}}s.exports=A}),Z2e=K((i,s)=>{function a(c,p,f,g){return g.error=f,g.partial?p[""]:c}s.exports=a}),Q2e=K((i,s)=>{function a(c){return!!c}s.exports=a}),J2e=K((i,s)=>{function a(c){if(c)throw new TypeError(c)}s.exports=a}),eAe=K((i,s)=>{var a=Z4();function c(p,f){for(var g=0,y=f.length-1;g<y;g++)p=p[f[g]]=a(p[f[g]]);return p}s.exports=c}),tAe=K((i,s)=>{var a=Z4();function c(f,g,y){var w=f[g];return y.has(w)||(w=a(w),y.add(w)),w}function p(f,g,y){for(var w=0,S=g.length-1;w<S;w++)f=f[g[w]]=c(f,g[w],y);return f}s.exports=p}),nAe=K((i,s)=>{var a=Y2e(),c=Z2e(),p=Q2e(),f=J2e(),g=eAe(),y=tAe(),w=ER(),S=Xce(),T=Yce(),I=Zce(),A=Qce(),k=Jce(),D=Set||function(){var F=[];return F.has=function(V){return this.indexOf(V)!==-1},F.add=function(V){this.push(V)},F};function O(F,V,$){if(V.length===0)return F;$=$||{};for(var X=$.strict?f:p,re=V.length===1?g:function(Ie){return function(Qe,le){return y(Qe,le,Ie)}}(new D),ne={"":F},ae,Se=0,fe=V.length;Se<fe;Se++){var ge=V[Se];switch(ge.op){case"add":if(X(w(ne,""+ge.path,ge.value,re)))return c(F,ne,ge,$);break;case"remove":if(X(S(ne,""+ge.path,re)))return c(F,ne,ge,$);break;case"replace":if(X(T(ne,""+ge.path,ge.value,re)))return c(F,ne,ge,$);break;case"move":if(X(I(ne,""+ge.from,""+ge.path,re)))return c(F,ne,ge,$);break;case"copy":if(X(A(ne,""+ge.from,""+ge.path,re)))return c(F,ne,ge,$);break;case"test":if(X(k(ne,""+ge.path,ge.value)))return c(F,ne,ge,$);break;default:if($.custom&&$.custom[ge.op]){if(ae=ae||a(ne,re),X($.custom[ge.op](ae,ge,Se,V)))return c(F,ne,ge,$)}else return X("[op:"+ge.op+"] unknown"),c(F,ne,ge,$);break}}return ne[""]}s.exports=O}),rAe=K((i,s)=>{s.exports=nAe()}),iAe=K((i,s)=>{(function(a,c){typeof i=="object"&&typeof s=="object"?s.exports=c():typeof i=="object"?i.blobCompare=c():a.blobCompare=c()})(window,function(){return function(a){var c={};function p(f){if(c[f])return c[f].exports;var g=c[f]={i:f,l:!1,exports:{}};return a[f].call(g.exports,g,g.exports,p),g.l=!0,g.exports}return p.m=a,p.c=c,p.d=function(f,g,y){p.o(f,g)||Object.defineProperty(f,g,{enumerable:!0,get:y})},p.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})},p.t=function(f,g){if(1&g&&(f=p(f)),8&g||4&g&&typeof f=="object"&&f&&f.__esModule)return f;var y=Object.create(null);if(p.r(y),Object.defineProperty(y,"default",{enumerable:!0,value:f}),2&g&&typeof f!="string")for(var w in f)p.d(y,w,(function(S){return f[S]}).bind(null,w));return y},p.n=function(f){var g=f&&f.__esModule?function(){return f.default}:function(){return f};return p.d(g,"a",g),g},p.o=function(f,g){return Object.prototype.hasOwnProperty.call(f,g)},p.p="",p(p.s=4)}([function(a,c,p){var f=function(T,I){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return function(A,k){var D=[],O=!0,F=!1,V=void 0;try{for(var $,X=A[Symbol.iterator]();!(O=($=X.next()).done)&&(D.push($.value),!k||D.length!==k);O=!0);}catch(re){F=!0,V=re}finally{try{!O&&X.return&&X.return()}finally{if(F)throw V}}return D}(T,I);throw new TypeError("Invalid attempt to destructure non-iterable instance")},g=function(){function T(I,A){for(var k=0;k<A.length;k++){var D=A[k];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(I,D.key,D)}}return function(I,A,k){return A&&T(I.prototype,A),k&&T(I,k),I}}();function y(T){if(Array.isArray(T)){for(var I=0,A=Array(T.length);I<T.length;I++)A[I]=T[I];return A}return Array.from(T)}var w=p(2),S=function(T){function I(A){(function(D,O){if(!(D instanceof O))throw new TypeError("Cannot call a class as a function")})(this,I);var k=function(D,O){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!O||typeof O!="object"&&typeof O!="function"?D:O}(this,(I.__proto__||Object.getPrototypeOf(I)).call(this));return k._messageId=1,k._messages=new Map,k._worker=A,k._worker.onmessage=k._onMessage.bind(k),k._id=Math.ceil(1e7*Math.random()),k}return function(A,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);A.prototype=Object.create(k&&k.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(A,k):A.__proto__=k)}(I,T),g(I,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return this._messages.size===0}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(A){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,D=this,O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],F=arguments[3];return new Promise(function(V,$){var X=D._messageId++;D._messages.set(X,[V,$,F]),D._worker.postMessage([X,k,A],O||[])})}},{key:"postMessage",value:function(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,k=this,D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],O=arguments[2];return new Promise(function(F,V){var $=k._messageId++;k._messages.set($,[F,V,O]),k._worker.postMessage([$,A],D||[])})}},{key:"emit",value:function(A){for(var k=arguments.length,D=Array(k>1?k-1:0),O=1;O<k;O++)D[O-1]=arguments[O];this._worker.postMessage({eventName:A,args:D})}},{key:"_onMessage",value:function(A){var k;if(!Array.isArray(A.data)&&A.data.eventName)return(k=function $(X,re,ne){X===null&&(X=Function.prototype);var ae=Object.getOwnPropertyDescriptor(X,re);if(ae===void 0){var Se=Object.getPrototypeOf(X);return Se===null?void 0:$(Se,re,ne)}if("value"in ae)return ae.value;var fe=ae.get;return fe!==void 0?fe.call(ne):void 0}(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"emit",this)).call.apply(k,[this,A.data.eventName].concat(y(A.data.args)));var D,O=(D=A.data,Array.isArray(D)?D:Array.from(D)),F=O[0],V=O.slice(1);if(F===1)this._onEvent.apply(this,y(V));else{if(F!==0)throw new Error("Wrong message type '"+F+"'");this._onResult.apply(this,y(V))}}},{key:"_onResult",value:function(A,k,D){var O=this._messages.get(A),F=f(O,2),V=F[0],$=F[1];return this._messages.delete(A),k===1?V(D):$(D)}},{key:"_onEvent",value:function(A,k,D){var O=this._messages.get(A),F=f(O,3)[2];F&&F(k,D)}}]),I}(w);a.exports=S},function(a,c,p){a.exports=function(){return p(3)(`!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=r(1),c=0,l=1,s=0,y=1,p="main",b=function(e){return"object"===(void 0===e?"undefined":i(e))&&"function"==typeof e.then&&"function"==typeof e.catch};var v=function e(t,r){u(this,e),this.payload=t,this.transferable=r};e.exports=function(e){var t,r,i,h=(i=e,(r=p)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t),d=self.postMessage.bind(self),m=new(function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var r,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(r,[this,e].concat(i))}},{key:"operation",value:function(e,t){return h[e]=t,this}}]),t}(f)),g=function(e,t,r){var n=function(t){t&&t instanceof v?w(e,y,t.payload,t.transferable):w(e,y,t)},o=function(t){w(e,s,{message:t.message,stack:t.stack})};try{var i=_(e,t,r);b(i)?i.then(n).catch(o):n(i)}catch(e){o(e)}},_=function(e,t,r){var n=h[r||p];if(!n)throw new Error("Not found handler for this request");return n(t,O.bind(null,e))},w=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];d([c,e,t,r],n)},O=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");d([l,e,t,r])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?g.apply(void 0,a(t)):t&&t.eventName&&m.emitLocally.apply(m,[t.eventName].concat(a(t.args)))})),m},e.exports.TransferableResponse=v},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return n(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,a=void 0;try{for(var u,f=this.__listeners[e][Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var c=u.value;c.apply(void 0,r)}}catch(e){i=!0,a=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(e,t){var r=this,n=function n(){r.off(e,n),t.apply(void 0,arguments)};return this.on(e,n)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}();e.exports=o},function(e,t,r){"use strict";r.r(t);var n=r(0);r.n(n)()().operation("binary",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsBinaryString(a)})}(e,t)).operation("buffer",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsArrayBuffer(a)})}(e,t)).operation("compare",({buf1:e,buf2:t})=>(function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),n=new DataView(t);for(var o=e.byteLength;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0})(e,t))}]);`,null)}},function(a,c,p){var f=function(){function y(w,S){for(var T=0;T<S.length;T++){var I=S[T];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(w,I.key,I)}}return function(w,S,T){return S&&y(w.prototype,S),T&&y(w,T),w}}(),g=function(){function y(){(function(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")})(this,y),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return f(y,[{key:"emit",value:function(w){if(!this.__listeners[w])return this;for(var S=arguments.length,T=Array(S>1?S-1:0),I=1;I<S;I++)T[I-1]=arguments[I];var A=!0,k=!1,D=void 0;try{for(var O,F=this.__listeners[w][Symbol.iterator]();!(A=(O=F.next()).done);A=!0){var V=O.value;V.apply(void 0,T)}}catch($){k=!0,D=$}finally{try{!A&&F.return&&F.return()}finally{if(k)throw D}}return this}},{key:"once",value:function(w,S){var T=this,I=function A(){T.off(w,A),S.apply(void 0,arguments)};return this.on(w,I)}},{key:"on",value:function(w,S){return this.__listeners[w]||(this.__listeners[w]=[]),this.__listeners[w].push(S),this}},{key:"off",value:function(w,S){return this.__listeners[w]=S?this.__listeners[w].filter(function(T){return T!==S}):[],this}}]),y}();a.exports=g},function(a,c,p){var f=window.URL||window.webkitURL;a.exports=function(g,y){try{try{var w;try{(w=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(g),w=w.getBlob()}catch{w=new Blob([g])}return new Worker(f.createObjectURL(w))}catch{return new Worker("data:application/javascript,"+encodeURIComponent(g))}}catch{if(!y)throw Error("Inline worker is not supported");return new Worker(y)}}},function(a,c,p){p.r(c);var f=p(0),g=p.n(f),y=p(1),w=p.n(y);p.d(c,"workersEnabled",function(){return S}),p.d(c,"default",function(){return T});let S=!!window.Worker;class T{static toBinaryStringWithWorker(A,k){return ye(this,null,function*(){let D=new g.a(new w.a),O=yield D.exec("binary",{blob:A,chunk:k});return D.terminate(),O})}static toBinaryStringWithoutWorker(A,k){return function(D,O){return new Promise((F,V)=>{let $=new FileReader,X=O?Math.min(O,D.size):D.size,re=D.slice(0,X);$.onload=()=>F($.result),$.onerror=V,$.readAsBinaryString(re)})}(A,k)}static toBinaryString(A,k,D=!0){return D&&S?this.toBinaryStringWithWorker(A,k):this.toBinaryStringWithoutWorker(A,k)}static toArrayBufferWithWorker(A,k){return ye(this,null,function*(){let D=new g.a(new w.a),O=yield D.exec("buffer",{blob:A,chunk:k});return D.terminate(),O})}static toArrayBufferWithoutWorker(A,k){return function(D,O){return new Promise((F,V)=>{let $=new FileReader,X=O?Math.min(O,D.size):D.size,re=D.slice(0,X);$.onload=()=>F($.result),$.onerror=V,$.readAsArrayBuffer(re)})}(A,k)}static toArrayBuffer(A,k,D=!0){return D&&S?this.toArrayBufferWithWorker(A,k):this.toArrayBufferWithoutWorker(A,k)}static compareBuffersWithWorker(A,k){return ye(this,null,function*(){if(A===k)return!0;let D=new g.a(new w.a),O=yield D.exec("compare",{buf1:A,buf2:k},[A,k]);return D.terminate(),O})}static compareBuffersWithoutWorker(A,k){return function(D,O){if(D===O)return!0;if(D.byteLength!==O.byteLength)return!1;let F=new DataView(D),V=new DataView(O);for(var $=D.byteLength;$--;)if(F.getUint8($)!==V.getUint8($))return!1;return!0}(A,k)}static compareBuffers(A,k,D=!0){return D&&S?this.compareBuffersWithWorker(A,k):this.compareBuffersWithoutWorker(A,k)}static sizeEqual(A,k){return A.size===k.size}static typeEqual(A,k){return A.type===k.type}static magicNumbersEqual(A,k,D=!0){return ye(this,null,function*(){if(A===k)return!0;let O=[24,16,14,12,8,6,4],[F,V]=yield Promise.all([this.toBinaryString(A,24,D),this.toBinaryString(k,24,D)]);for(let $ of O)if(F.substring(0,$)===V.substring(0,$))return!0;return!1})}static bytesEqualWithBinaryString(A,k,D,O=!0){return ye(this,null,function*(){if(A===k)return!0;let[F,V]=yield Promise.all([this.toBinaryString(A,D,O),this.toBinaryString(k,D,O)]);return F===V})}static bytesEqualWithArrayBuffer(A,k,D,O=!0){return ye(this,null,function*(){if(A===k)return!0;let[F,V]=yield Promise.all([this.toArrayBuffer(A,D,O),this.toArrayBuffer(k,D,O)]);return this.compareBuffers(F,V,O)})}static isEqual(A,k){return ye(this,arguments,function*(D,O,{methods:F=["size","type","magic","byte"],byte:V="buffer",partial:$=!1,chunks:X=null,worker:re=!0}={}){let ne=null;for(let ae of F){if(ne===!1||$&&ne===!0)break;switch(ae){case"byte":case"bytes":case"content":X=X instanceof Array?X:[D.size],ne=!0;for(let Se of X){let fe=!1;fe=V==="buffer"?yield this.bytesEqualWithArrayBuffer(D,O,Se,re):yield this.bytesEqualWithBinaryString(D,O,Se,re),fe||(ne=!1)}break;case"magic":case"headers":case"numbers":case"mime":ne=yield this.magicNumbersEqual(D,O,re);break;case"size":case"sizes":ne=this.sizeEqual(D,O);break;case"type":case"types":ne=this.typeEqual(D,O);break;default:throw new Error("Blob-compare : Unknown comparison method")}}return ne})}}}])})}),ede={};te(ede,{ToolbarDropdownSelect:()=>xIe,default:()=>EIe}),t.exports=be(ede),Fe(),Je();var tde=Mt;Wn();var oAe=0,sAe=class{constructor(i){this._studio=i,Pe(this,"_id"),Pe(this,"_state",{type:"Ready"}),this._id=String(oAe++)}get status(){return this._state.type}reset(){let{_state:i}=this;if(i.type!=="Ready")if(i.type==="Captured")this._state={type:"Ready"},i.transaction.discard(),i.flagsTransaction.discard();else throw i.type==="Committed"?new Error("This scrub is already committed and can't be reset."):new Error("This scrub is already discarded and can't be reset.")}commit(){let{_state:i}=this;if(i.type==="Captured")i.transaction.commit(),i.flagsTransaction.discard(),this._state={type:"Committed"};else if(i.type==="Ready"){console.warn("Scrub is empty. Nothing to commit.");return}else throw i.type==="Committed"?new Error("This scrub is already committed."):new Error("This scrub is already discarded and can't be comitted.")}capture(i){if(this._state.type==="Captured"&&this.reset(),this._state.type==="Ready"){let s=!0;try{this._state=j({type:"Captured"},this._capture(i)),s=!1}finally{s&&(console.error("This scrub's callback threw an error. We're undo-ing all of the changes made by this scrub, and marking it as discarded."),this._state={type:"Discarded"})}}else throw this._state.type==="Committed"?new Error("This scrub is already committed and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.commit()"):new Error("This scrub is already discarded and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.discard()")}_capture(i){let s=[],a=this._studio.tempTransaction(p=>{let f=!0,g={set:(y,w)=>{if(!f)throw new Error("You seem to have called the scrub api after scrub.capture()");let{root:S,path:T}=(0,tde.getPointerParts)(y);if(!Dt(S))throw new Error("We can only scrub props of Sheet Objects for now");p.set(y,w),s.push(y)}};try{i(g)}finally{f=!1}}),c=this._studio.tempTransaction(({stateEditors:p})=>{s.forEach(f=>{let{root:g,path:y}=(0,tde.getPointerParts)(f);if(!Dt(g))return;let w=g.template.getDefaultsAtPointer(f);vt(w,(S,T)=>{p.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey.propsBeingScrubbed.flag(z(j({},g.address),{pathToProp:T}))},y)})});return{transaction:a,flagsTransaction:c}}discard(){let{_state:i}=this;if(i.type==="Captured"||i.type==="Ready")i.type==="Captured"&&(i.transaction.discard(),i.flagsTransaction.discard()),this._state={type:"Discarded"};else throw i.type==="Committed"?new Error("This scrub is already committed and can't be discarded."):new Error("This scrub is already discarded")}},aAe=Mt,nde=typeof window<"u"?Promise.resolve().then(()=>(j2e(),Vce)).then(i=>i.default):null,lAe=class{constructor(i){this.studio=i,Pe(this,"_rendered",!1),Pe(this,"_nonSSRBits",nde?nde.then(s=>new s):Promise.reject()),Pe(this,"ready",this._nonSSRBits.then(()=>{},()=>{}))}render(){this._rendered||(this._rendered=!0,this._nonSSRBits.then(i=>{i.render()}).catch(i=>{throw console.error(i),i}))}hide(){this.studio.transaction(({drafts:i})=>{i.ahistoric.visibilityState="everythingIsHidden"})}restore(){this.render(),this.studio.transaction(({drafts:i})=>{i.ahistoric.visibilityState="everythingIsVisible"})}get isHidden(){return(0,aAe.val)(this.studio.atomP.ahistoric.visibilityState)==="everythingIsHidden"}renderToolset(i,s){let a=!1,c=null;return this._nonSSRBits.then(p=>{a||(c=p.renderToolset(i,s))}).catch(p=>{console.error(p)}),()=>{if(c){c();return}a||(a=!0)}}},CR=Mt;function uAe(i){return i}var cAe=(i,s=uAe)=>{let a=c=>({type:i,payload:s(c)});return a.type=i,a.is=c=>c&&c.type&&c.type===i,a},Tc=cAe,rde=Z(q2e()),ide=Z(rAe());K0();var PR,dAe=new Uint8Array(16);function hAe(){if(!PR&&(PR=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!PR))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return PR(dAe)}var pAe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function fAe(i){return typeof i=="string"&&pAe.test(i)}var mAe=fAe,$o=[];for(kR=0;kR<256;++kR)$o.push((kR+256).toString(16).substr(1));var kR;function vAe(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=($o[i[s+0]]+$o[i[s+1]]+$o[i[s+2]]+$o[i[s+3]]+"-"+$o[i[s+4]]+$o[i[s+5]]+"-"+$o[i[s+6]]+$o[i[s+7]]+"-"+$o[i[s+8]]+$o[i[s+9]]+"-"+$o[i[s+10]]+$o[i[s+11]]+$o[i[s+12]]+$o[i[s+13]]+$o[i[s+14]]+$o[i[s+15]]).toLowerCase();if(!mAe(a))throw TypeError("Stringified UUID is invalid");return a}var gAe=vAe;function yAe(i,s,a){i=i||{};var c=i.random||(i.rng||hAe)();if(c[6]=c[6]&15|64,c[8]=c[8]&63|128,s){a=a||0;for(var p=0;p<16;++p)s[a+p]=c[p];return s}return gAe(c)}var bAe=yAe,iE={replaceHistory:Tc("@history/replaceHistory"),startHistoryFromScratch:Tc("@history/startHistoryFromScratch"),undo:Tc("@history/undo"),redo:Tc("@history/redo")},_Ae={type:"@history/unknownAction",payload:""},wAe={maxNumberOfCommits:100},xAe=(i,s=wAe)=>{let a=Q4(i(void 0,_Ae));return function(c,p){return iE.startHistoryFromScratch.is(p)?Q4(i(void 0,p.payload)):iE.replaceHistory.is(p)?p.payload:iE.undo.is(p)?c?CAe(c):a:iE.redo.is(p)?c?PAe(c):a:c?SAe(c,i(c.innerState,p),s):Q4(i(void 0,p))}};function Q4(i){return{currentCommitHash:void 0,commitsByHash:{},listOfCommitHashes:[],innerState:i}}function SAe(i,s,a){if(s===i.innerState)return i;let c=EAe(i.innerState,s);if(c.forwardDiff.length===0)return i;let p=yd(i.listOfCommitHashes),f={currentCommitHash:c.hash,commitsByHash:j({},i.commitsByHash),listOfCommitHashes:[...i.listOfCommitHashes],innerState:s};if(i.currentCommitHash!==p){let g=i.listOfCommitHashes.findIndex(y=>y===i.currentCommitHash);i.listOfCommitHashes.slice(g+1).forEach(y=>{delete f.commitsByHash[y]}),f.listOfCommitHashes.splice(g+1,f.listOfCommitHashes.length)}if(f.listOfCommitHashes.push(c.hash),f.commitsByHash[c.hash]=c,f.listOfCommitHashes.length>a.maxNumberOfCommits){let g=f.listOfCommitHashes.length-a.maxNumberOfCommits;f.listOfCommitHashes.slice(0,g).forEach(y=>{delete f.commitsByHash[y]}),f.listOfCommitHashes.splice(0,g)}return f}function EAe(i,s){let a=rde.default.diff(i,s,{invertible:!1}),c=rde.default.diff(s,i,{invertible:!1}),p=Date.now(),f=bAe();return{forwardDiff:a,backwardDiff:c,timestamp:p,hash:f}}function CAe(i){if(i.currentCommitHash===void 0)return i;let s=i.listOfCommitHashes.findIndex(g=>g===i.currentCommitHash);if(s===-1)throw new Error("This should never happen");let a=i.commitsByHash[i.currentCommitHash],c=(0,ide.default)(i.innerState,a.backwardDiff),p=s-1,f=p===-1?void 0:i.listOfCommitHashes[p];return z(j({},i),{currentCommitHash:f,innerState:c})}function PAe(i){if(i.listOfCommitHashes.length===0)return i;let s=i.listOfCommitHashes.findIndex(g=>g===i.currentCommitHash);if(s===i.listOfCommitHashes.length-1)return i;let a=s+1,c=i.listOfCommitHashes[a],p=i.commitsByHash[c],f=(0,ide.default)(i.innerState,p.forwardDiff);return z(j({},i),{currentCommitHash:c,innerState:f})}aR();var TR={ahistoric:{visibilityState:"everythingIsVisible",theTrigger:{position:{closestCorner:"bottomLeft",distanceFromHorizontalEdge:.02,distanceFromVerticalEdge:.02}},coreByProject:{},projects:{stateByProjectId:{}}},historic:{projects:{stateByProjectId:{}},autoKey:!0,coreByProject:{},panelInstanceDesceriptors:{}},ephemeral:{initialised:!1,coreByProject:{},projects:{stateByProjectId:{}},extensions:{byId:{},paneClasses:{}},showOutline:!1}},ode=Tc("@storeBundle/replacePersistentState",i=>i),sde=Tc("@storeBundle/reduceParts",i=>i),ab={historic:iE,replacePersistentState:ode,reduceParts:sde},ade=Tc("@storeBundle/setInnerHistoricState",i=>i),kAe=(i=TR.historic,s)=>ade.is(s)?s.payload:i,J4=xAe(kAe),lde=(i,s)=>{if(ode.is(s)){let{historic:a,ahistoric:c}=s.payload,p=(i==null?void 0:i.ephemeral)||TR.ephemeral;return{$persistent:{historic:a,ahistoric:c},ephemeral:p}}else if(i){let{historic:a,ahistoric:c}=i.$persistent,{ephemeral:p}=i;if(sde.is(s)){let f={historic:i.$persistent.historic.innerState,ahistoric:i.$persistent.ahistoric,ephemeral:i.ephemeral},g=s.payload(f);if(g===f)return i;a.innerState!==g.historic&&(a=J4(a,ade(g.historic))),c=g.ahistoric,p=g.ephemeral}else{let f=J4(a,s);if(f===a)return i;a=f}return{$persistent:a===i.$persistent.historic&&c===i.$persistent.ahistoric?i.$persistent:{historic:a,ahistoric:c},ephemeral:p}}else{let a=J4(void 0,{}),c=TR.ahistoric,p=TR.ephemeral;return{$persistent:{historic:a,ahistoric:c},ephemeral:p}}},ude=Tc("@history/pushTempAction",i=>i),cde=Tc("@history/discardTempAction",i=>i),dde=Tc("@history/commitTempAction",i=>i),TAe=0,MAe=()=>{let i=TAe++;return{push:s=>ude({id:i,originalAction:s}),discard:()=>cde(i),commit:()=>dde(i)}},AAe=(i,s)=>{if(i){let{tempActions:a,permanent:c}=i.$temps,p;if(ude.is(s))a=[...a,s];else if(dde.is(s)){let g=a.find(y=>y.payload.id===s.payload);g?(p=g.payload.originalAction,a=a.filter(y=>y.payload.id!==s.payload)):sR.error("Comitting temp action group ".concat(s.payload," isn't possible as this group doesn't exist"))}else cde.is(s)?a=a.filter(g=>g.payload.id!==s.payload):p=s;p&&(c=lde(i.$temps.permanent,p));let f={historic:c.$persistent.historic.innerState,ahistoric:c.$persistent.ahistoric,ephemeral:c.ephemeral};for(let g of a)f=g.payload.originalAction.payload(f);return j({$temps:{tempActions:a,permanent:c},$persistent:c.$persistent},f)}else{let a=lde(void 0,s);return{$temps:{permanent:a,tempActions:[]},$persistent:a.$persistent,historic:a.$persistent.historic.innerState,ahistoric:a.$persistent.ahistoric,ephemeral:a.ephemeral}}};vc(),vc(),Nd();function hde(i,s){if(typeof i!="object"||i===null)return;if(s.length===0){for(let g of Object.keys(i))delete i[g];return}let a=s.slice(0,s.length-1),c=i,p=new WeakMap;for(let g of a){let y=c,w=y[g];if(typeof w!="object"||w===null)return;p.set(w,y),c=w}let f=s.slice().reverse();for(let g of f){if(delete c[g],Object.keys(c).length>0)return;c=p.get(c)}}function IAe(i,{scale:s,origin:a,translate:c}){let p=a+(i-a)*s;return c+p}function mu(i){for(var s=arguments.length,a=Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];throw Error("[Immer] minified error nr: "+i+(a.length?" "+a.map(function(p){return"'"+p+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function lb(i){return!!i&&!!i[ka]}function Bv(i){return!!i&&(function(s){if(!s||typeof s!="object")return!1;var a=Object.getPrototypeOf(s);if(a===null)return!0;var c=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return c===Object||typeof c=="function"&&Function.toString.call(c)===BAe}(i)||Array.isArray(i)||!!i[xde]||!!i.constructor[xde]||tj(i)||nj(i))}function oE(i,s,a){a===void 0&&(a=!1),ub(i)===0?(a?Object.keys:fj)(i).forEach(function(c){a&&typeof c=="symbol"||s(c,i[c],i)}):i.forEach(function(c,p){return s(p,c,i)})}function ub(i){var s=i[ka];return s?s.i>3?s.i-4:s.i:Array.isArray(i)?1:tj(i)?2:nj(i)?3:0}function ej(i,s){return ub(i)===2?i.has(s):Object.prototype.hasOwnProperty.call(i,s)}function RAe(i,s){return ub(i)===2?i.get(s):i[s]}function pde(i,s,a){var c=ub(i);c===2?i.set(s,a):c===3?(i.delete(s),i.add(a)):i[s]=a}function OAe(i,s){return i===s?i!==0||1/i==1/s:i!=i&&s!=s}function tj(i){return NAe&&i instanceof Map}function nj(i){return FAe&&i instanceof Set}function Uv(i){return i.o||i.t}function rj(i){if(Array.isArray(i))return Array.prototype.slice.call(i);var s=UAe(i);delete s[ka];for(var a=fj(s),c=0;c<a.length;c++){var p=a[c],f=s[p];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(s[p]={configurable:!0,writable:!0,enumerable:f.enumerable,value:i[p]})}return Object.create(Object.getPrototypeOf(i),s)}function ij(i,s){return s===void 0&&(s=!1),oj(i)||lb(i)||!Bv(i)||(ub(i)>1&&(i.set=i.add=i.clear=i.delete=DAe),Object.freeze(i),s&&oE(i,function(a,c){return ij(c,!0)},!0)),i}function DAe(){mu(2)}function oj(i){return i==null||typeof i!="object"||Object.isFrozen(i)}function Kd(i){var s=VAe[i];return s||mu(18,i),s}function fde(){return sE}function sj(i,s){s&&(Kd("Patches"),i.u=[],i.s=[],i.v=s)}function MR(i){aj(i),i.p.forEach(LAe),i.p=null}function aj(i){i===sE&&(sE=i.l)}function mde(i){return sE={p:[],l:sE,h:i,m:!0,_:0}}function LAe(i){var s=i[ka];s.i===0||s.i===1?s.j():s.O=!0}function lj(i,s){s._=s.p.length;var a=s.p[0],c=i!==void 0&&i!==a;return s.h.g||Kd("ES5").S(s,i,c),c?(a[ka].P&&(MR(s),mu(4)),Bv(i)&&(i=AR(s,i),s.l||IR(s,i)),s.u&&Kd("Patches").M(a[ka],i,s.u,s.s)):i=AR(s,a,[]),MR(s),s.u&&s.v(s.u,s.s),i!==wde?i:void 0}function AR(i,s,a){if(oj(s))return s;var c=s[ka];if(!c)return oE(s,function(f,g){return vde(i,c,s,f,g,a)},!0),s;if(c.A!==i)return s;if(!c.P)return IR(i,c.t,!0),c.t;if(!c.I){c.I=!0,c.A._--;var p=c.i===4||c.i===5?c.o=rj(c.k):c.o;oE(c.i===3?new Set(p):p,function(f,g){return vde(i,c,p,f,g,a)}),IR(i,p,!1),a&&i.u&&Kd("Patches").R(c,a,i.u,i.s)}return c.o}function vde(i,s,a,c,p,f){if(lb(p)){var g=AR(i,p,f&&s&&s.i!==3&&!ej(s.D,c)?f.concat(c):void 0);if(pde(a,c,g),!lb(g))return;i.m=!1}if(Bv(p)&&!oj(p)){if(!i.h.F&&i._<1)return;AR(i,p),s&&s.A.l||IR(i,p)}}function IR(i,s,a){a===void 0&&(a=!1),i.h.F&&i.m&&ij(s,a)}function uj(i,s){var a=i[ka];return(a?Uv(a):i)[s]}function gde(i,s){if(s in i)for(var a=Object.getPrototypeOf(i);a;){var c=Object.getOwnPropertyDescriptor(a,s);if(c)return c;a=Object.getPrototypeOf(a)}}function cj(i){i.P||(i.P=!0,i.l&&cj(i.l))}function dj(i){i.o||(i.o=rj(i.t))}function hj(i,s,a){var c=tj(s)?Kd("MapSet").N(s,a):nj(s)?Kd("MapSet").T(s,a):i.g?function(p,f){var g=Array.isArray(p),y={i:g?1:0,A:f?f.A:fde(),P:!1,I:!1,D:{},l:f,t:p,k:null,o:null,j:null,C:!1},w=y,S=OR;g&&(w=[y],S=DR);var T=Proxy.revocable(w,S),I=T.revoke,A=T.proxy;return y.k=A,y.j=I,A}(s,a):Kd("ES5").J(s,a);return(a?a.A:fde()).p.push(c),c}function RR(i){return lb(i)||mu(22,i),function s(a){if(!Bv(a))return a;var c,p=a[ka],f=ub(a);if(p){if(!p.P&&(p.i<4||!Kd("ES5").K(p)))return p.t;p.I=!0,c=yde(a,f),p.I=!1}else c=yde(a,f);return oE(c,function(g,y){p&&RAe(p.t,g)===y||pde(c,g,s(y))}),f===3?new Set(c):c}(i)}function yde(i,s){switch(s){case 2:return new Map(i);case 3:return Array.from(i)}return rj(i)}var bde,sE,pj=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",NAe=typeof Map<"u",FAe=typeof Set<"u",_de=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",wde=pj?Symbol.for("immer-nothing"):((bde={})["immer-nothing"]=!0,bde),xde=pj?Symbol.for("immer-draftable"):"__$immer_draftable",ka=pj?Symbol.for("immer-state"):"__$immer_state",BAe=""+Object.prototype.constructor,fj=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(i){return Object.getOwnPropertyNames(i).concat(Object.getOwnPropertySymbols(i))}:Object.getOwnPropertyNames,UAe=Object.getOwnPropertyDescriptors||function(i){var s={};return fj(i).forEach(function(a){s[a]=Object.getOwnPropertyDescriptor(i,a)}),s},VAe={},OR={get:function(i,s){if(s===ka)return i;var a=Uv(i);if(!ej(a,s))return function(p,f,g){var y,w=gde(f,g);return w?"value"in w?w.value:(y=w.get)===null||y===void 0?void 0:y.call(p.k):void 0}(i,a,s);var c=a[s];return i.I||!Bv(c)?c:c===uj(i.t,s)?(dj(i),i.o[s]=hj(i.A.h,c,i)):c},has:function(i,s){return s in Uv(i)},ownKeys:function(i){return Reflect.ownKeys(Uv(i))},set:function(i,s,a){var c=gde(Uv(i),s);if(c!=null&&c.set)return c.set.call(i.k,a),!0;if(!i.P){var p=uj(Uv(i),s),f=p==null?void 0:p[ka];if(f&&f.t===a)return i.o[s]=a,i.D[s]=!1,!0;if(OAe(a,p)&&(a!==void 0||ej(i.t,s)))return!0;dj(i),cj(i)}return i.o[s]===a&&typeof a!="number"&&(a!==void 0||s in i.o)||(i.o[s]=a,i.D[s]=!0,!0)},deleteProperty:function(i,s){return uj(i.t,s)!==void 0||s in i.t?(i.D[s]=!1,dj(i),cj(i)):delete i.D[s],i.o&&delete i.o[s],!0},getOwnPropertyDescriptor:function(i,s){var a=Uv(i),c=Reflect.getOwnPropertyDescriptor(a,s);return c&&{writable:!0,configurable:i.i!==1||s!=="length",enumerable:c.enumerable,value:a[s]}},defineProperty:function(){mu(11)},getPrototypeOf:function(i){return Object.getPrototypeOf(i.t)},setPrototypeOf:function(){mu(12)}},DR={};oE(OR,function(i,s){DR[i]=function(){return arguments[0]=arguments[0][0],s.apply(this,arguments)}}),DR.deleteProperty=function(i,s){return OR.deleteProperty.call(this,i[0],s)},DR.set=function(i,s,a){return OR.set.call(this,i[0],s,a,i[0])};var jAe=function(){function i(a){var c=this;this.g=_de,this.F=!0,this.produce=function(p,f,g){if(typeof p=="function"&&typeof f!="function"){var y=f;f=p;var w=c;return function(k){var D=this;k===void 0&&(k=y);for(var O=arguments.length,F=Array(O>1?O-1:0),V=1;V<O;V++)F[V-1]=arguments[V];return w.produce(k,function($){var X;return(X=f).call.apply(X,[D,$].concat(F))})}}var S;if(typeof f!="function"&&mu(6),g!==void 0&&typeof g!="function"&&mu(7),Bv(p)){var T=mde(c),I=hj(c,p,void 0),A=!0;try{S=f(I),A=!1}finally{A?MR(T):aj(T)}return typeof Promise<"u"&&S instanceof Promise?S.then(function(k){return sj(T,g),lj(k,T)},function(k){throw MR(T),k}):(sj(T,g),lj(S,T))}if(!p||typeof p!="object")return(S=f(p))===wde?void 0:(S===void 0&&(S=p),c.F&&ij(S,!0),S);mu(21,p)},this.produceWithPatches=function(p,f){return typeof p=="function"?function(w){for(var S=arguments.length,T=Array(S>1?S-1:0),I=1;I<S;I++)T[I-1]=arguments[I];return c.produceWithPatches(w,function(A){return p.apply(void 0,[A].concat(T))})}:[c.produce(p,f,function(w,S){g=w,y=S}),g,y];var g,y},typeof(a==null?void 0:a.useProxies)=="boolean"&&this.setUseProxies(a.useProxies),typeof(a==null?void 0:a.autoFreeze)=="boolean"&&this.setAutoFreeze(a.autoFreeze)}var s=i.prototype;return s.createDraft=function(a){Bv(a)||mu(8),lb(a)&&(a=RR(a));var c=mde(this),p=hj(this,a,void 0);return p[ka].C=!0,aj(c),p},s.finishDraft=function(a,c){var p=a&&a[ka],f=p.A;return sj(f,c),lj(void 0,f)},s.setAutoFreeze=function(a){this.F=a},s.setUseProxies=function(a){a&&!_de&&mu(20),this.g=a},s.applyPatches=function(a,c){var p;for(p=c.length-1;p>=0;p--){var f=c[p];if(f.path.length===0&&f.op==="replace"){a=f.value;break}}var g=Kd("Patches").$;return lb(a)?g(a,c):this.produce(a,function(y){return g(y,c.slice(p+1))})},i}(),Ta=new jAe;Ta.produce,Ta.produceWithPatches.bind(Ta),Ta.setAutoFreeze.bind(Ta),Ta.setUseProxies.bind(Ta),Ta.applyPatches.bind(Ta);var mj=Ta.createDraft.bind(Ta),vj=Ta.finishDraft.bind(Ta);X5(),Kl(),lx(),Z0(),J0(),iR(),Jr(),Wn();var vu={create(i){let s={byId:{},allIds:{}};if(i)for(let[a,c]of i)s.byId[a]=c,s.allIds[a]=!0;return s},shallowCopy(i){return{byId:j({},i==null?void 0:i.byId),allIds:j({},i==null?void 0:i.allIds)}},add(i,s,a){return{byId:z(j({},i==null?void 0:i.byId),{[s]:a}),allIds:z(j({},i==null?void 0:i.allIds),{[s]:!0})}},merge(i){let s=vu.create();for(let a=0;a<i.length;a++)s.byId=j(j({},s.byId),i[a].byId),s.allIds=j(j({},s.allIds),i[a].allIds);return s},remove(i,s){let a=vu.shallowCopy(i);return delete a.allIds[s],delete a.byId[s],a},filter(i,s){let a=vu.shallowCopy(i);for(let[c,p]of Object.entries(a.byId))s(p)||(delete a.allIds[c],delete a.byId[c]);return a}},Sde=i=>(gj=i,yj),gj,Wo=()=>{if(gj===void 0)throw new Error("Calling stateEditors outside of a transaction is not allowed.");return gj},yj;(i=>{(s=>{(a=>{(c=>{function p(f){let g=Wo().historic;g.panelPositions!=null||(g.panelPositions={}),g.panelPositions[f.panelId]=f.position}c.setPanelPosition=p})(a.panelPositions||(a.panelPositions={})),(c=>{function p(){var f;return(f=Wo().historic).panels!=null||(f.panels={}),Wo().historic.panels}c._ensure=p,(f=>{function g(){let y=i.studio.historic.panels._ensure();return y.outlinePanel!=null||(y.outlinePanel={}),y.outlinePanel}f._ensure=g,(y=>{function w(T){let I=[];for(let A of rs(T))nt(A)?I.push(j({type:"Project"},A.address)):$t(A)?(I.push(j({type:"Sheet"},A.template.address)),i.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(A.address)):Ut(A)?I.push(j({type:"Sheet"},A.address)):Dt(A)?(I.push(j({type:"SheetObject"},A.template.address)),i.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(A.sheet.address)):en(A)&&I.push(j({type:"SheetObject"},A.address));f._ensure().selection=I}y.set=w;function S(){f._ensure().selection=[]}y.unset=S})(f.selection||(f.selection={}))})(c.outline||(c.outline={})),(f=>{function g(){let y=i.studio.historic.panels._ensure();return y.sequenceEditor!=null||(y.sequenceEditor={}),y.sequenceEditor}f._ensure=g,(y=>{function w(){let T=f._ensure();return T.graphEditor!=null||(T.graphEditor={height:.5,isOpen:!1}),T.graphEditor}function S(T){w().isOpen=T.isOpen}y.setIsOpen=S})(f.graphEditor||(f.graphEditor={}))})(c.sequenceEditor||(c.sequenceEditor={}))})(a.panels||(a.panels={})),(c=>{(p=>{function f(g){let y=Wo().historic;return y.projects.stateByProjectId[g.projectId]||(y.projects.stateByProjectId[g.projectId]={stateBySheetId:{}}),y.projects.stateByProjectId[g.projectId]}p._ensure=f,(g=>{function y(S){let T=i.studio.historic.projects.stateByProjectId._ensure(S);return T.stateBySheetId[S.sheetId]||(T.stateBySheetId[S.sheetId]={selectedInstanceId:void 0,sequenceEditor:{selectedPropsByObject:{}}}),T.stateBySheetId[S.sheetId]}g._ensure=y;function w(S){i.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(S).selectedInstanceId=S.sheetInstanceId}g.setSelectedInstanceId=w,(S=>{function T(F){let{selectedPropsByObject:V}=g._ensure(F).sequenceEditor;V[F.objectKey]||(V[F.objectKey]={});let $=V[F.objectKey],X=mc(F.pathToProp),re=new Set(Object.keys(qS));for(let[ae,Se]of Object.entries(RR(V)))for(let[fe,ge]of Object.entries(Se))re.delete(ge);let ne=re.size>0?re.values().next().value:Object.keys(qS)[0];$[X]=ne}S.addPropToGraphEditor=T;function I(F){let{selectedPropsByObject:V}=g._ensure(F).sequenceEditor;if(!V[F.objectKey])return;let $=V[F.objectKey],X=mc(F.pathToProp);$[X]&&hde(V,[F.objectKey,X])}S.removePropFromGraphEditor=I;function A(F){let V=i.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(F).sequenceEditor;return V.markerSet||(V.markerSet=vu.create()),V.markerSet}function k(F){let V=A(F.sheetAddress),$=F.markers.filter(ae=>!!isFinite(ae.position)).map(ae=>z(j({},ae),{position:F.snappingFunction(ae.position)})),X=Sr($,"id"),re=vu.filter(V,ae=>ae&&!X[ae.id]),ne=Sr(Object.values(re.byId),"position");$.forEach(({position:ae})=>{let Se=ne[ae];Se&&(re=vu.remove(re,Se.id))}),Object.assign(V,vu.merge([re,vu.create($.map(ae=>[ae.id,ae]))]))}S.replaceMarkers=k;function D(F){let V=A(F.sheetAddress);Object.assign(V,vu.remove(V,F.markerId))}S.removeMarker=D;function O(F){let V=A(F.sheetAddress).byId[F.markerId];V!==void 0&&(V.label=F.label)}S.updateMarker=O})(g.sequenceEditor||(g.sequenceEditor={}))})(p.stateBySheetId||(p.stateBySheetId={}))})(c.stateByProjectId||(c.stateByProjectId={}))})(a.projects||(a.projects={}))})(s.historic||(s.historic={})),(a=>{function c(p){Wo().ephemeral.showOutline=p}a.setShowOutline=c,(p=>{(f=>{function g(y){let w=Wo().ephemeral;return w.projects.stateByProjectId[y.projectId]||(w.projects.stateByProjectId[y.projectId]={stateBySheetId:{}}),w.projects.stateByProjectId[y.projectId]}f._ensure=g,(y=>{function w(S){let T=i.studio.ephemeral.projects.stateByProjectId._ensure(S);return T.stateBySheetId[S.sheetId]||(T.stateBySheetId[S.sheetId]={stateByObjectKey:{}}),T.stateBySheetId[S.sheetId]}y._ensure=w,(S=>{function T(I){var A;let k=i.studio.ephemeral.projects.stateByProjectId.stateBySheetId._ensure(I).stateByObjectKey;return k[A=I.objectKey]!=null||(k[A]={}),k[I.objectKey]}S._ensure=T,(I=>{function A(D){let O=i.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey._ensure(D);return O.valuesBeingScrubbed!=null||(O.valuesBeingScrubbed={}),O.valuesBeingScrubbed}I._ensure=A;function k(D){up(A(D),D.pathToProp,!0)}I.flag=k})(S.propsBeingScrubbed||(S.propsBeingScrubbed={}))})(y.stateByObjectKey||(y.stateByObjectKey={}))})(f.stateBySheetId||(f.stateBySheetId={}))})(p.stateByProjectId||(p.stateByProjectId={}))})(a.projects||(a.projects={}))})(s.ephemeral||(s.ephemeral={})),(a=>{function c(w){Wo().ahistoric.pinOutline=w}a.setPinOutline=c;function p(w){Wo().ahistoric.pinDetails=w}a.setPinDetails=p;function f(w){Wo().ahistoric.pinNotifications=w}a.setPinNotifications=f;function g(w){Wo().ahistoric.visibilityState=w}a.setVisibilityState=g;function y(w){let S=gI(w.map(A=>A.pathToProp)),T=w.map(({keyframe:A,pathToProp:k})=>({keyframe:A,pathToProp:k.slice(S.length)})),I=Wo();I.ahistoric.clipboard?I.ahistoric.clipboard.keyframesWithRelativePaths=T:I.ahistoric.clipboard={keyframesWithRelativePaths:T}}a.setClipboardKeyframes=y,(w=>{(S=>{function T(I){let A=Wo().ahistoric;return A.projects.stateByProjectId[I.projectId]||(A.projects.stateByProjectId[I.projectId]={stateBySheetId:{}}),A.projects.stateByProjectId[I.projectId]}S._ensure=T,(I=>{function A(D){let O=i.studio.ahistoric.projects.stateByProjectId._ensure(D);return O.collapsedItemsInOutline||(O.collapsedItemsInOutline={}),O.collapsedItemsInOutline}I._ensure=A;function k(D){let O=i.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline._ensure(D);D.isCollapsed?O[D.itemKey]=!0:delete O[D.itemKey]}I.set=k})(S.collapsedItemsInOutline||(S.collapsedItemsInOutline={})),(I=>{function A(k){let D=i.studio.ahistoric.projects.stateByProjectId._ensure(k);return D.stateBySheetId[k.sheetId]||(D.stateBySheetId[k.sheetId]={}),D.stateBySheetId[k.sheetId]}I._ensure=A,(k=>{function D(O){let F=i.studio.ahistoric.projects.stateByProjectId.stateBySheetId._ensure(O);return F.sequence||(F.sequence={}),F.sequence}k._ensure=D,(O=>{function F($){i.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($).focusRange={range:$.range,enabled:$.enabled}}O.set=F;function V($){i.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($).focusRange=void 0}O.unset=V})(k.focusRange||(k.focusRange={})),(O=>{function F(V){i.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(V).clippedSpaceRange=j({},V.range)}O.set=F})(k.clippedSpaceRange||(k.clippedSpaceRange={})),(O=>{function F($){let X=i.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure($),re=X.collapsableItems;return re||(re=X.collapsableItems=vu.create()),re}function V($){let X=F($);Object.assign(X,vu.add(X,$.studioSheetItemKey,{isCollapsed:$.isCollapsed}))}O.set=V})(k.sequenceEditorCollapsableItems||(k.sequenceEditorCollapsableItems={}))})(I.sequence||(I.sequence={}))})(S.stateBySheetId||(S.stateBySheetId={}))})(w.stateByProjectId||(w.stateByProjectId={}))})(a.projects||(a.projects={}))})(s.ahistoric||(s.ahistoric={}))})(i.studio||(i.studio={})),(s=>{(a=>{(c=>{function p(f){let g=Wo().historic.coreByProject[f.projectId].revisionHistory,y=50;g.unshift(f.revision),g.length>y&&(g.length=y)}c.add=p})(a.revisionHistory||(a.revisionHistory={})),(c=>{function p(y){let w=Wo().historic.coreByProject[y.projectId].sheetsById;return w[y.sheetId]||(w[y.sheetId]={staticOverrides:{byObject:{}}}),w[y.sheetId]}c._ensure=p;function f(y){let w=Wo().historic.coreByProject[y.projectId].sheetsById[y.sheetId];if(!w)return;delete w.staticOverrides.byObject[y.objectKey];let S=w.sequence;S&&delete S.tracksByObject[y.objectKey]}c.forgetObject=f;function g(y){Wo().historic.coreByProject[y.projectId].sheetsById[y.sheetId]&&delete Wo().historic.coreByProject[y.projectId].sheetsById[y.sheetId]}c.forgetSheet=g,(y=>{function w(fe){let ge=i.coreByProject.historic.sheetsById._ensure(fe);return ge.sequence!=null||(ge.sequence={subUnitsPerUnit:30,length:10,type:"PositionalSequence",tracksByObject:{}}),ge.sequence}y._ensure=w;function S(fe){w(fe).length=li(parseFloat(fe.length.toFixed(2)),.01,1/0)}y.setLength=S;function T(fe){var ge;let Ie=i.coreByProject.historic.sheetsById.sequence._ensure(fe).tracksByObject;return Ie[ge=fe.objectKey]!=null||(Ie[ge]={trackData:{},trackIdByPropPath:{}}),Ie[fe.objectKey]}function I(fe,ge){let Ie=T(fe),Qe=mc(fe.pathToProp);if(typeof Ie.trackIdByPropPath[Qe]=="string")return;let le=WPe(),Ae={type:"BasicKeyframedTrack",__debugName:"".concat(fe.objectKey,":").concat(Qe),keyframes:[]};Ie.trackData[le]=Ae,Ie.trackIdByPropPath[Qe]=le}y.setPrimitivePropAsSequenced=I;function A(fe){let ge=T(fe),Ie=mc(fe.pathToProp),Qe=ge.trackIdByPropPath[Ie];typeof Qe=="string"&&(delete ge.trackIdByPropPath[Ie],delete ge.trackData[Qe],i.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(fe))}y.setPrimitivePropAsStatic=A;function k(fe){let ge=T(fe);for(let Ie of Object.keys(ge.trackIdByPropPath)){let Qe=JSON.parse(Ie);if(fe.pathToProp.every((le,Ae)=>Qe[Ae]===le)){let le=ge.trackIdByPropPath[Ie];if(typeof le!="string")continue;delete ge.trackIdByPropPath[Ie],delete ge.trackData[le]}}i.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfCompoundProp(fe)}y.setCompoundPropAsStatic=k;function D(fe){return T(fe).trackData[fe.trackId]}function O(fe){let ge=D(fe);if(ge)return ge.keyframes.find(Ie=>Ie.id===fe.keyframeId)}function F(fe){let ge=fe.snappingFunction(fe.position),Ie=D(fe);if(!Ie)return;let{keyframes:Qe}=Ie,le=Qe.findIndex(Ue=>Ue.position===ge);if(le!==-1){let Ue=Qe[le];Ue.value=fe.value;return}let Ae=i2(Qe,Ue=>Ue.position<ge);if(Ae===-1){Qe.unshift({id:EZ(),position:ge,connectedRight:!0,handles:fe.handles||[.5,1,.5,0],type:fe.type||"bezier",value:fe.value});return}let Y=Qe[Ae];Qe.splice(Ae+1,0,{id:EZ(),position:ge,connectedRight:Y.connectedRight,handles:fe.handles||[.5,1,.5,0],type:fe.type||"bezier",value:fe.value})}y.setKeyframeAtPosition=F;function V(fe){let ge=D(fe);if(!ge)return;let{keyframes:Ie}=ge,Qe=Ie.findIndex(le=>le.position===fe.position);Qe!==-1&&Ie.splice(Qe,1)}y.unsetKeyframeAtPosition=V;function $(fe){let ge=D(fe);if(!ge)return;let Ie=RR(ge.keyframes).filter(Qe=>fe.keyframeIds.includes(Qe.id)).map(Qe=>{let le=Qe.position,Ae=fe.snappingFunction(IAe(le,fe));return z(j({},Qe),{position:Ae})});Se(z(j({},fe),{keyframes:Ie}))}y.transformKeyframes=$;function X(fe){let ge=D(fe);ge&&(ge.keyframes=ge.keyframes.map((Ie,Qe)=>{let le=ge.keyframes[Qe-1],Ae=fe.keyframeIds.includes(Ie.id),Y=fe.keyframeIds.includes(le==null?void 0:le.id);return Ae&&!Y?z(j({},Ie),{handles:[Ie.handles[0],Ie.handles[1],fe.handles[0],fe.handles[1]]}):Ae&&Y?z(j({},Ie),{handles:[fe.handles[2],fe.handles[3],fe.handles[0],fe.handles[1]]}):Y?z(j({},Ie),{handles:[fe.handles[2],fe.handles[3],Ie.handles[2],Ie.handles[3]]}):Ie}))}y.setTweenBetweenKeyframes=X;function re(fe){var ge,Ie,Qe,le,Ae,Y,Ue,Tt;let ke=O(fe);ke&&(ke.handles=[(Ie=(ge=fe.end)==null?void 0:ge[0])!=null?Ie:ke.handles[0],(le=(Qe=fe.end)==null?void 0:Qe[1])!=null?le:ke.handles[1],(Y=(Ae=fe.start)==null?void 0:Ae[0])!=null?Y:ke.handles[2],(Tt=(Ue=fe.start)==null?void 0:Ue[1])!=null?Tt:ke.handles[3]])}y.setHandlesForKeyframe=re;function ne(fe){let ge=D(fe);ge&&(ge.keyframes=ge.keyframes.filter(Ie=>fe.keyframeIds.indexOf(Ie.id)===-1))}y.deleteKeyframes=ne;function ae(fe){let ge=O(fe);ge&&(ge.type=fe.keyframeType)}y.setKeyframeType=ae;function Se(fe){let ge=D(fe);if(!ge)return;let Ie=RR(ge.keyframes),Qe=fe.keyframes.filter(Tt=>!(typeof Tt.value=="number"&&!isFinite(Tt.value)||!Tt.handles.every(ke=>isFinite(ke)))).map(Tt=>z(j({},Tt),{position:fe.snappingFunction(Tt.position)})),le=Sr(Qe,"id"),Ae=Ie.filter(Tt=>!le[Tt.id]),Y=Sr(Ae,"position");Qe.forEach(({position:Tt})=>{let ke=Y[Tt];ke&&w2(Ae,ke)});let Ue=S2([...Ae,...Qe],"position");ge.keyframes=Ue}y.replaceKeyframes=Se})(c.sequence||(c.sequence={})),(y=>{(w=>{function S(k){var D;let O=i.coreByProject.historic.sheetsById._ensure(k).staticOverrides.byObject;return O[D=k.objectKey]!=null||(O[D]={}),O[k.objectKey]}function T(k){let D=S(k);up(D,k.pathToProp,k.value)}w.setValueOfCompoundProp=T;function I(k){let D=S(k);up(D,k.pathToProp,k.value)}w.setValueOfPrimitiveProp=I;function A(k){let D=i.coreByProject.historic.sheetsById._ensure(k).staticOverrides.byObject[k.objectKey];D&&hde(D,k.pathToProp)}w.unsetValueOfPrimitiveProp=A})(y.byObject||(y.byObject={}))})(c.staticOverrides||(c.staticOverrides={}))})(a.sheetsById||(a.sheetsById={}))})(s.historic||(s.historic={}))})(i.coreByProject||(i.coreByProject={}))})(yj||(yj={}));function bj(){let i,s,a=new Promise((p,f)=>{i=g=>{p(g),c.status="resolved"},s=g=>{f(g),c.status="rejected"}}),c={resolve:i,reject:s,promise:a,status:"pending"};return c}var zAe=Mt;function HAe(i){let s=i.getState(),a=new zAe.Atom(s);return i.subscribe(()=>{let c=i.getState();a.set(c),s=c}),a}ec();function GAe(i){var s,a=i.Symbol;return typeof a=="function"?a.observable?s=a.observable:(s=a("observable"),a.observable=s):s="@@observable",s}var aE;typeof self<"u"?aE=self:typeof window<"u"?aE=window:typeof ki<"u"?aE=ki:aE=t;var $Ae=GAe(aE),Ede=$Ae,Cde={INIT:"@@redux/INIT"};function Pde(i,s,a){var c;if(typeof s=="function"&&typeof a>"u"&&(a=s,s=void 0),typeof a<"u"){if(typeof a!="function")throw new Error("Expected the enhancer to be a function.");return a(Pde)(i,s)}if(typeof i!="function")throw new Error("Expected the reducer to be a function.");var p=i,f=s,g=[],y=g,w=!1;function S(){y===g&&(y=g.slice())}function T(){return f}function I(O){if(typeof O!="function")throw new Error("Expected listener to be a function.");var F=!0;return S(),y.push(O),function(){if(F){F=!1,S();var V=y.indexOf(O);y.splice(V,1)}}}function A(O){if(!N0(O))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof O.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(w)throw new Error("Reducers may not dispatch actions.");try{w=!0,f=p(f,O)}finally{w=!1}for(var F=g=y,V=0;V<F.length;V++){var $=F[V];$()}return O}function k(O){if(typeof O!="function")throw new Error("Expected the nextReducer to be a function.");p=O,A({type:Cde.INIT})}function D(){var O,F=I;return O={subscribe:function(V){if(typeof V!="object")throw new TypeError("Expected the observer to be an object.");function $(){V.next&&V.next(T())}$();var X=F($);return{unsubscribe:X}}},O[Ede]=function(){return this},O}return A({type:Cde.INIT}),c={dispatch:A,subscribe:I,getState:T,replaceReducer:k},c[Ede]=D,c}function WAe(){for(var i=arguments.length,s=Array(i),a=0;a<i;a++)s[a]=arguments[a];return s.length===0?function(c){return c}:s.length===1?s[0]:s.reduce(function(c,p){return function(){return c(p.apply(void 0,arguments))}})}function KAe(i){let s=WAe();return Pde(i.rootReducer,void 0,s)}aR(),J1();var _j=new WeakMap,qAe=(i,s,a)=>{let c=w=>{i.dispatch(ab.replacePersistentState(w))},p=kde(a),f=()=>i.getState().$persistent;y();let g=()=>{let w=f(),S=_j.get(i);w!==S&&(_j.set(i,w),localStorage.setItem(p,JSON.stringify(w)))};i.subscribe(W0(g,1e3)),window&&window.addEventListener("beforeunload",g);function y(){let w=localStorage.getItem(p);if(w){let S,T=!0;try{S=JSON.parse(w),T=!1}catch{sR.warn("Could not parse Theatre's persisted state. This must be a bug. Please report it.")}finally{T||c(S),s()}}else s()}},XAe=(i,s)=>{let a=kde(s),c=i.getState().$persistent;localStorage.removeItem(a),_j.set(i,c)};function kde(i){return i+".persistent"}DQ(),Wn(),np(),Je(),VA();var LR=Mt;Cp(),Jr(),bue();function wj(i){if(typeof i=="boolean"||typeof i=="string"||typeof i=="number")return i;if(N0(i)){let s={},a=!1;for(let[c,p]of Object.entries(i))wj(p)!==void 0&&(s[c]=p,a=!0);if(a)return s}else return}function Tde(i,s,a){for(let[c,p]of Object.entries(i.props))if(p.type==="compound")Tde(p,[...s,c],a);else{if(p.type==="enum")throw new Error("Not yet implemented");a(p,[...s,c])}}function YAe(i,s,a){return{set:(c,p)=>{i();let f=wj(p);if(typeof f>"u")return;let{root:g,path:y}=(0,LR.getPointerParts)(c);if(Dt(g)){let w=g.template.getMapOfValidSequenceTracks_forStudio().getValue(),S=LA(g.template.staticConfig,y);if(!S)throw new Error("Object ".concat(g.address.objectKey," does not have a prop at ").concat(JSON.stringify(y)));let T=(I,A,k)=>{if(I==null)return;if(wj(A.deserializeAndSanitize(I))===void 0)throw new Error("Invalid value ".concat(I4(I)," for object.props").concat(k.map(F=>"[".concat(JSON.stringify(F),"]")).join("")," is invalid"));let D=z(j({},g.address),{pathToProp:k}),O=md(w,k);if(typeof O=="string"){let F=g.sheet.getSequence();F.position=F.closestGridPosition(F.position),s.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(z(j({},D),{trackId:O,position:F.position,value:I,snappingFunction:F.closestGridPosition,type:"bezier"}))}else s.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(z(j({},D),{value:I}))};if(S.type==="compound"){let I=(0,LR.getPointerParts)(c).path,A=I.length;Tde(S,I,(k,D)=>{let O=D.slice(A),F=kp(f,O);if(typeof F<"u")T(F,k,D);else throw new Error("Property object.props".concat(D.map(V=>"[".concat(JSON.stringify(V),"]")).join("")," is required but not provided"))})}else{if(S.type==="enum")throw new Error("Enums aren't implemented yet");T(f,S,y)}}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},unset:c=>{i();let{root:p,path:f}=(0,LR.getPointerParts)(c);if(Dt(p)){let g=p.template.getMapOfValidSequenceTracks_forStudio().getValue(),y=kp(p.template.getDefaultValues().getValue(),f),w=LA(p.template.staticConfig,f),S=(T,I)=>{let A=z(j({},p.address),{pathToProp:I}),k=md(g,I);typeof k=="string"?s.coreByProject.historic.sheetsById.sequence.unsetKeyframeAtPosition(z(j({},A),{trackId:k,position:p.sheet.getSequence().positionSnappedToGrid})):w!==void 0&&s.coreByProject.historic.sheetsById.staticOverrides.byObject.unsetValueOfPrimitiveProp(A)};w.type==="compound"?vt(y,(T,I)=>{S(T,I)},(0,LR.getPointerParts)(c).path):S(y,f)}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},get drafts(){return i(),a},get stateEditors(){return s}}}var ZAe=class{constructor(){Pe(this,"_reduxStore"),Pe(this,"_atom"),Pe(this,"atomP"),this._reduxStore=KAe({rootReducer:AAe,devtoolsOptions:{name:"Theatre.js Studio"}}),this._atom=HAe(this._reduxStore),this.atomP=this._atom.pointer}initialize(i){let s=bj();return i.usePersistentStorage===!0?qAe(this._reduxStore,()=>{this.tempTransaction(({drafts:a})=>{a.ephemeral.initialised=!0}).commit(),s.resolve()},i.persistenceKey):(this.tempTransaction(({drafts:a})=>{a.ephemeral.initialised=!0}).commit(),s.resolve()),s.promise}getState(){return this._reduxStore.getState()}__experimental_clearPersistentStorage(i){return XAe(this._reduxStore,i),this.getState()}__dev_startHistoryFromScratch(i){this._reduxStore.dispatch(ab.historic.startHistoryFromScratch(ab.reduceParts(s=>z(j({},s),{historic:i}))))}tempTransaction(i){let s=MAe(),a,c=s.push(ab.reduceParts(p=>{let f={historic:mj(p.historic),ahistoric:mj(p.ahistoric),ephemeral:mj(p.ephemeral)},g=!0,y=()=>{if(!g)throw new Error("You seem to have called the transaction api after studio.transaction() has finished running")},w=Sde(f),S=YAe(y,w,f);try{return i(S),g=!1,{historic:vj(f.historic),ahistoric:vj(f.ahistoric),ephemeral:vj(f.ephemeral)}}catch(T){return a=T,p}finally{Sde(void 0)}}));if(this._reduxStore.dispatch(c),a)throw this._reduxStore.dispatch(s.discard()),a;return{commit:()=>{this._reduxStore.dispatch(s.commit())},discard:()=>{this._reduxStore.dispatch(s.discard())}}}undo(){this._reduxStore.dispatch(ab.historic.undo())}redo(){this._reduxStore.dispatch(ab.historic.redo())}createContentOfSaveFile(i){if(!this._reduxStore.getState().$persistent.historic.innerState.coreByProject[i])throw new Error("Project ".concat(i," has not been initialized."));let s=OQ();this.tempTransaction(({stateEditors:c})=>{c.coreByProject.historic.revisionHistory.add({projectId:i,revision:s})}).commit();let a=this._reduxStore.getState().$persistent.historic.innerState.coreByProject[i];return j({},a)}},QAe=Mt,xj=class{constructor(){Pe(this,"_values",{})}get(i,s){if(this.has(i))return this._values[i];{let a=s();return this._values[i]=a,a}}has(i){return this._values.hasOwnProperty(i)}};Wn(),wp(),Fe(),Jr(),k4();var JAe=class{constructor(i){Pe(this,"ui",{hide(){me().ui.hide()},get isHidden(){return me().ui.isHidden},restore(){me().ui.restore()},renderToolset(s,a){return me().ui.renderToolset(s,a)}}),Pe(this,"_cache",new xj),Pe(this,"__experimental",{__experimental_disblePlayPauseKeyboardShortcut(){i2e()},__experimental_enablePlayPauseKeyboardShortcut(){o2e()},__experimental_clearPersistentStorage(s){return me().clearPersistentStorage(s)},__experimental_createContentOfSaveFileTyped(s){return me().createContentOfSaveFile(s)}})}initialize(i){return me().initialize(i)}extend(i,s){me().extend(i,s)}transaction(i){return me().transaction(({set:s,unset:a,stateEditors:c})=>i({set:s,unset:a,__experimental_forgetObject:p=>{if(!wn(p))throw new Error("object in transactionApi.__experimental_forgetObject(object) must be the return type of sheet.object(...)");c.coreByProject.historic.sheetsById.forgetObject(p.address)},__experimental_forgetSheet:p=>{if(!on(p))throw new Error("sheet in transactionApi.__experimental_forgetSheet(sheet) must be the return type of project.sheet()");c.coreByProject.historic.sheetsById.forgetSheet(p.address)}}))}_getSelectionPrism(){return this._cache.get("_getSelectionPrism()",()=>(0,QAe.prism)(()=>_p().filter(i=>i.type==="Theatre_SheetObject"||i.type==="Theatre_Sheet").map(i=>i.publicApi)))}_getSelection(){return this._getSelectionPrism().getValue()}setSelection(i){let s=[...i].filter(a=>wn(a)||on(a)).map(a=>me().corePrivateAPI(a));me().transaction(({stateEditors:a})=>{a.studio.historic.panels.outline.selection.set(s)})}onSelectionChange(i){let s=me();return this._getSelectionPrism().onChange(s.ticker,i,!0)}get selection(){return this._getSelection()}scrub(){return me().scrub()}getStudioProject(){let i=me().core;if(!i)throw new Error("You're calling studio.getStudioProject() before `@theatre/core` is loaded. To fix this:\n1. Check if `@theatre/core` is import/required in your bundle.\n2. Check the stack trace of this error and make sure the funciton that calls getStudioProject() is run after `@theatre/core` is loaded.");return me().getStudioProject(i)}debouncedScrub(i=1e3){let s,a=W0(()=>{let c=s;c&&(s=void 0,c.commit())},i);return{capture:c=>{s||(s=this.scrub());let p=!0;try{s.capture(c),p=!1}finally{if(p){let f=s;s=void 0,f.discard()}else a()}}}}createPane(i){return me().paneManager.createPane(i)}destroyPane(i){return me().paneManager.destroyPane(i)}createContentOfSaveFile(i){return me().createContentOfSaveFile(i)}};SZ();var Vv=Mt,eIe=class{constructor(i){this._studio=i,Pe(this,"_cache",new xj),this._instantiatePanesAsTheyComeIn()}_instantiatePanesAsTheyComeIn(){let i=this._getAllPanes();i.onStale(()=>{i.getValue()})}_getAllPanes(){return this._cache.get("_getAllPanels()",()=>(0,Vv.prism)(()=>{if(!(0,Vv.val)(this._studio.coreP))return{};let i=(0,Vv.val)(this._studio.atomP.historic.panelInstanceDesceriptors),s=(0,Vv.val)(this._studio.atomP.ephemeral.extensions.paneClasses),a={};for(let c of Object.values(i)){if(!c)continue;let p=s[c.paneClass];if(!p)continue;let{instanceId:f}=c,{extensionId:g,classDefinition:y}=p,w=Vv.prism.memo("instance-".concat(c.instanceId),()=>({extensionId:g,instanceId:f,definition:y}),[y]);a[f]=w}return a}))}get allPanesD(){return this._getAllPanes()}createPane(i){if(!this._studio.core)throw new Error("Can't create a pane because @theatre/core is not yet loaded");let s=(0,Vv.val)(this._studio.atomP.ephemeral.extensions.paneClasses[i].extensionId),a=(0,Vv.val)(this._studio.atomP.historic.panelInstanceDesceriptors),c;for(let p=1;p<1e3&&(c="".concat(i," #").concat(p),!!a[c]);p++);if(!s)throw new Error('Pane class "'.concat(i,'" is not registered.'));return this._studio.transaction(({drafts:p})=>{p.historic.panelInstanceDesceriptors[c]={instanceId:c,paneClass:i}}),this._getAllPanes().getValue()[c]}destroyPane(i){if(!this._studio.core)throw new Error("Can't do this yet because @theatre/core is not yet loaded");this._studio.transaction(({drafts:s})=>{delete s.historic.panelInstanceDesceriptors[i]})}},NR=Mt;Fe();var Mde=30*60*1e3,tIe=1e3*60*60;function nIe(){return ye(this,null,function*(){let i=me().atomP.ahistoric.visibilityState;if((0,NR.val)(i)==="everythingIsVisible")return;let s=bj(),a=(0,NR.pointerToPrism)(i).onStale(()=>{(0,NR.val)(i)==="everythingIsVisible"&&(a(),s.resolve(void 0))});return s.promise})}function rIe(){return ye(this,null,function*(){if(!"0.7.0".match(/COMPAT/))for(yield FR(500),yield nIe();;){let i=(0,NR.val)(me().atomP.ahistoric.updateChecker);if(i&&i.result!=="error"){let s=i.lastChecked,a=Date.now(),c=Math.abs(a-s);c<Mde&&(yield FR(Mde-c))}try{let s=yield fetch(new Request("https://updates.theatrejs.com/updates/0.7.0"));if(s.ok){let a=yield s.json();if(!iIe(a))throw new Error("Bad response");me().transaction(({drafts:c})=>{c.ahistoric.updateChecker={lastChecked:Date.now(),result:j({},a)}}),yield FR(1e3)}else throw new Error("HTTP Error ".concat(s.statusText))}catch{yield FR(tIe)}}})}var FR=i=>new Promise(s=>setTimeout(s,i));function iIe(i){if(typeof i!="object")return!1;let s=i;return typeof s.hasUpdates!="boolean"?!1:s.hasUpdates===!0&&typeof s.newVersion=="string"&&typeof s.releasePage=="string"||s.hasUpdates===!1}var oIe=Z(vx());function qd(i){return new Promise((s,a)=>{i.oncomplete=i.onsuccess=()=>s(i.result),i.onabort=i.onerror=()=>a(i.error)})}function Ade(i,s){let a=indexedDB.open(i);a.onupgradeneeded=()=>a.result.createObjectStore(s);let c=qd(a);return(p,f)=>c.then(g=>f(g.transaction(s,p).objectStore(s)))}var Sj;function cb(){return Sj||(Sj=Ade("keyval-store","keyval")),Sj}function sIe(i,s=cb()){return s("readonly",a=>qd(a.get(i)))}function aIe(i,s,a=cb()){return a("readwrite",c=>(c.put(s,i),qd(c.transaction)))}function lIe(i,s=cb()){return s("readwrite",a=>(a.delete(i),qd(a.transaction)))}function Ej(i,s){return i.openCursor().onsuccess=function(){this.result&&(s(this.result),this.result.continue())},qd(i.transaction)}function uIe(i=cb()){return i("readonly",s=>{if(s.getAllKeys)return qd(s.getAllKeys());let a=[];return Ej(s,c=>a.push(c.key)).then(()=>a)})}function cIe(i=cb()){return i("readonly",s=>{if(s.getAll)return qd(s.getAll());let a=[];return Ej(s,c=>a.push(c.value)).then(()=>a)})}function dIe(i=cb()){return i("readonly",s=>{if(s.getAll&&s.getAllKeys)return Promise.all([qd(s.getAllKeys()),qd(s.getAll())]).then(([c,p])=>c.map((f,g)=>[f,p[g]]));let a=[];return i("readonly",c=>Ej(c,p=>a.push([p.key,p.value])).then(()=>a))})}var hIe=i=>{let s=Ade("theatrejs-".concat(i),"default-store");return{set:(a,c)=>aIe(a,c,s),get:a=>sIe(a,s),del:a=>lIe(a,s),keys:()=>uIe(s),entries:()=>dIe(s),values:()=>cIe(s)}};iee(),MS();var Ide="theatre-0.4",pIe=`You seem to have imported '@theatre/studio' but haven't initialized it. You can initialize the studio by:
\`\`\`
import studio from '@theatre/studio'
studio.initialize()
\`\`\`

* If you didn't mean to import '@theatre/studio', this means that your bundler is not tree-shaking it. This is most likely a bundler misconfiguration.

* If you meant to import '@theatre/studio' without showing its UI, you can do that by running:

\`\`\`
import studio from '@theatre/studio'
studio.initialize()
studio.ui.hide()
\`\`\`
`,fIe="You seem to have imported '@theatre/studio' but called `studio.initialize()` after some delay.\nTheatre.js projects remain in pending mode (won't play their sequences) until the studio is initialized, so you should place the `studio.initialize()` line right after the import line:\n\n```\nimport studio from '@theatre/studio'\n// ... and other imports\n\nstudio.initialize()\n```\n",mIe=class{constructor(){Pe(this,"ui"),Pe(this,"publicApi"),Pe(this,"address"),Pe(this,"_projectsProxy",new CR.PointerProxy(new CR.Atom({}).pointer)),Pe(this,"projectsP",this._projectsProxy.pointer),Pe(this,"_store",new ZAe),Pe(this,"_corePrivateApi"),Pe(this,"_cache",new xj),Pe(this,"paneManager"),Pe(this,"_coreAtom",new CR.Atom({})),Pe(this,"_initializedDeferred",bj()),Pe(this,"_initializeFnCalled",!1),Pe(this,"_didWarnAboutNotInitializing",!1),Pe(this,"_coreBits"),Pe(this,"_rafDriver"),this.address={studioId:vS(10)},this.publicApi=new JAe(this),this.ui=new lAe(this),this._attachToIncomingProjects(),this.paneManager=new eIe(this),typeof window<"u"&&setTimeout(()=>{this._initializeFnCalled||(console.error(pIe),this._didWarnAboutNotInitializing=!0)},100)}get ticker(){if(!this._rafDriver)throw new Error("`studio.ticker` was read before studio.initialize() was called.");return this._rafDriver.ticker}get atomP(){return this._store.atomP}initialize(i){return ye(this,null,function*(){if(!this._coreBits)throw new Error("You seem to have imported `@theatre/studio` without importing `@theatre/core`. Make sure to include an import of `@theatre/core` before calling `studio.initializer()`.");if(this._initializeFnCalled)return this._initializedDeferred.promise;this._initializeFnCalled=!0,this._didWarnAboutNotInitializing&&console.warn(fIe);let s={persistenceKey:Ide,usePersistentStorage:!0};if(typeof(i==null?void 0:i.persistenceKey)=="string"&&(s.persistenceKey=i.persistenceKey),((i==null?void 0:i.usePersistentStorage)===!1||typeof window>"u")&&(s.usePersistentStorage=!1),i!=null&&i.__experimental_rafDriver){if(i.__experimental_rafDriver.type!=="Theatre_RafDriver_PublicAPI")throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` must be either be undefined, or the return type of core.createRafDriver()");let a=this._coreBits.privateAPI(i.__experimental_rafDriver);if(!a)throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` seems to come from a different version of `@theatre/core` than the version that is attached to `@theatre/studio`");this._rafDriver=a}else this._rafDriver=this._coreBits.getCoreRafDriver();try{yield this._store.initialize(s)}catch(a){this._initializedDeferred.reject(a);return}typeof window<"u"&&(yield this.ui.ready),this._initializedDeferred.resolve(),this.ui.render(),rIe().catch(a=>{console.error(a)})})}get initialized(){return this._initializedDeferred.promise}_attachToIncomingProjects(){let i=(0,CR.pointerToPrism)(this.projectsP),s=a=>{for(let c of Object.values(a))c.isAttachedToStudio||c.attachToStudio(this)};i.onStale(()=>{s(i.getValue())}),s(i.getValue())}setCoreBits(i){this._coreBits=i,this._corePrivateApi=i.privateAPI,this._coreAtom.setByPointer(s=>s.core,i.coreExports),this._setProjectsP(i.projectsP)}_setProjectsP(i){this._projectsProxy.setPointer(i)}scrub(){return new sAe(this)}tempTransaction(i){return this._store.tempTransaction(i)}transaction(i){return this.tempTransaction(i).commit()}__dev_startHistoryFromScratch(i){return this._store.__dev_startHistoryFromScratch(i)}get corePrivateAPI(){return this._corePrivateApi}get core(){return this._coreAtom.get().core}get coreP(){return this._coreAtom.pointer.core}extend(i,s){if(!i||typeof i!="object")throw new Error("Extensions must be JS objects");if(typeof i.id!="string")throw new Error("extension.id must be a string");let a=(s==null?void 0:s.__experimental_reconfigure)===!0,c=i.id,p=this._store.getState().ephemeral.extensions.byId[c];if(p&&!a){if(i===p||(0,oIe.default)(i,p))return;throw new Error('Extension id "'.concat(i.id,'" is already defined. If you mean to re-configure the extension, do it like this: studio.extend(extension, {__experimental_reconfigure: true})})'))}this.transaction(({drafts:f})=>{var g,y;f.ephemeral.extensions.byId[i.id]=i;let w=f.ephemeral.extensions.paneClasses;a&&p&&((g=p.panes)==null||g.forEach(S=>{delete w[S.class]})),(y=i.panes)==null||y.forEach(S=>{if(typeof S.class!="string")throw new Error("pane.class must be a string");if(S.class.length<3)throw new Error("pane.class should be a string with 3 or more characters");let T=w[S.class];if(T)if(a&&T.extensionId===i.id)console.warn('Pane class "'.concat(S.class,'" already exists. This is a bug in Theatre.js. Please report it at https://github.com/theatre-js/theatre/issues/new'));else throw new Error('Pane class "'.concat(S.class,'" already exists and is supplied by extension ').concat(T));w[S.class]={extensionId:i.id,classDefinition:S}})})}getStudioProject(i){return this._cache.get("getStudioProject",()=>i.getProject("Studio"))}getExtensionSheet(i,s){return this._cache.get("extensionSheet-"+i,()=>this.getStudioProject(s).sheet("Extension "+i))}undo(){this._store.undo()}redo(){this._store.redo()}createContentOfSaveFile(i){return this._store.createContentOfSaveFile(i)}createAssetStorage(i,s){return ye(this,null,function*(){if(typeof window>"u")return{getAssetUrl:()=>"",createAsset:()=>Promise.resolve(null)};if(!("indexedDB"in window))return console.log("This browser doesn't support IndexedDB."),{getAssetUrl:S=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")},createAsset:S=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")}};let a=hIe("".concat(i.address.projectId,"-assets")),c=LU(i),p=yield a.keys();yield Promise.all(p.map(S=>ye(this,null,function*(){c.includes(S)||(yield a.del(S))}))),yield Promise.all(p.map(S=>ye(this,null,function*(){var T,I;let A="".concat(s,"/").concat(S);try{(yield fetch(A,{method:"HEAD"})).ok&&(yield a.del(S))}catch{TS.error("Failed to access assets","Failed to access assets at ".concat((I=(T=i.config.assets)==null?void 0:T.baseUrl)!=null?I:"/",". This is likely due to a CORS issue."))}})));let f=new Map(yield a.entries()),g=new Map,y=S=>{if(g.has(S))return g.get(S);{let T=URL.createObjectURL(S);return g.set(S,T),T}},w=S=>{let T=f.get(S);if(!T)throw new Error("Asset with id ".concat(S," not found"));return y(T)};return{getAssetUrl:S=>f.has(S)?w(S):"".concat(s,"/").concat(S),createAsset:S=>ye(this,null,function*(){var T,I,A;let k=LU(i),D=!1;if(k.includes(S.name)){let O;try{O=(T=f.get(S.name))!=null?T:yield fetch("".concat(s,"/").concat(S.name)).then(F=>F.ok?F.blob():void 0)}catch{return TS.error("Failed to access assets","Failed to access assets at ".concat((A=(I=i.config.assets)==null?void 0:I.baseUrl)!=null?A:"/",". This is likely due to a CORS issue.")),Promise.resolve(null)}if(O){if(D=yield(yield Promise.resolve().then(()=>Z(iAe()))).default.isEqual(S,O),D)return S.name;{let F=V=>{let $=prompt(V,S.name);return $===null?!1:$===""?F("Asset name cannot be empty. Please choose a different file name for this asset."):k.includes($)?(console.log(k),F("An asset with this name already exists. Please choose a different file name for this asset.")):(S=new File([S],$,{type:S.type}),!0)};if(!F("An asset with this name already exists. Please choose a different file name for this asset."))return null}}}return f.set(S.name,S),yield a.set(S.name,S),S.name})}})}clearPersistentStorage(i=Ide){this._store.__experimental_clearPersistentStorage(i)}},Cj="__TheatreJS_StudioBundle",vIe="__TheatreJS_CoreBundle",gIe="__TheatreJS_Notifications",yIe=class{constructor(i){this._studio=i,Pe(this,"_coreBundle")}get type(){return"Theatre_StudioBundle"}registerCoreBundle(i){if(this._coreBundle)throw new Error("StudioBundle.coreBundle is already registered. This is a bug.");this._coreBundle=i;let s;i.getBitsForStudio(this._studio,a=>{s=a}),this._studio.setCoreBits(s)}},bIe=Z(Re());Ne();var Rde,_Ie=se.div(Rde||(Rde=G([""]))),wIe=i=>bIe.default.createElement(_Ie,null),xIe=wIe;MS();var Pj=new mIe;it(Pj);var SIe=Pj.publicApi,EIe=SIe;CIe();function CIe(){if(typeof window>"u")return;let i=window[Cj];if(typeof i<"u")throw typeof i=="object"&&i&&typeof i.version=="string"?new Error(`It seems that the module '@theatre/studio' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/studio' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(Cj," seems to be already set by a module other than @theatre/core."));let s=new yIe(Pj);window[Cj]=s;let a=window[vIe];a&&a!==null&&a.type==="Theatre_CoreBundle"&&s.registerCoreBundle(a)}typeof window<"u"&&(window[gIe]={notify:TS});/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)

	queue-microtask/index.js:
	  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

	react/cjs/react.production.min.js:
	  (**
	   * @license React
	   * react.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	scheduler/cjs/scheduler.production.min.js:
	  (**
	   * @license React
	   * scheduler.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-dom/cjs/react-dom.production.min.js:
	  (**
	   * @license React
	   * react-dom.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v17.0.2
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	react-is/cjs/react-is.production.min.js:
	  (** @license React v16.13.1
	   * react-is.production.min.js
	   *
	   * Copyright (c) Facebook, Inc. and its affiliates.
	   *
	   * This source code is licensed under the MIT license found in the
	   * LICENSE file in the root directory of this source tree.
	   *)

	jszip/dist/jszip.min.js:
	  (*!
	  
	  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
	  <http://stuartk.com/jszip>
	  
	  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
	  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
	  
	  JSZip uses the library pako released under the MIT license :
	  https://github.com/nodeca/pako/blob/main/LICENSE
	  *)

	jiff/lib/lcs.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/array.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointerParse.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPointer.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/clone.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/lib/jsonPatch.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

	jiff/jiff.js:
	  (** @license MIT License (c) copyright 2010-2014 original author or authors *)
	*/})(T3,T3.exports);var $3e=T3.exports;const o_=aye($3e);class W3e{constructor(e,n,r){Fi(this,"channel");Fi(this,"components",new Map);Fi(this,"_mode","app");this.editor=n&&document.location.hash.search(r)>-1,n&&(this.channel=new BroadcastChannel(e))}addComponent(e,n){this.components.set(e,n)}dispose(){this.components.forEach(e=>{e.dispose()}),this.components.clear()}send(e){this.channel!==void 0&&this._mode!==e.target&&this.channel.postMessage(e)}listen(e){this.channel!==void 0&&(this.channel.onmessage=n=>{e(n.data)})}get mode(){return this._mode}get editor(){return this._mode==="editor"}set editor(e){e&&(this._mode="editor",document.title+=" - Editor")}}class pL{constructor(e){Fi(this,"app");this.app=e}dispose(){}}class K3e extends pL{selectDropdown(e,n){this.app.send({event:"selectComponent",target:"app",data:{dropdown:e,value:n}})}updateDropdown(e,n){this.app.send({event:"draggableListUpdate",target:"app",data:{dropdown:e,value:n}})}}var M3={exports:{}};M3.exports;(function(t,e){var n=Object.create,r=Object.defineProperty,o=Object.defineProperties,u=Object.getOwnPropertyDescriptor,h=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertyNames,_=Object.getOwnPropertySymbols,x=Object.getPrototypeOf,M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,N=(v,E,L)=>E in v?r(v,E,{enumerable:!0,configurable:!0,writable:!0,value:L}):v[E]=L,H=(v,E)=>{for(var L in E||(E={}))M.call(E,L)&&N(v,L,E[L]);if(_)for(var L of _(E))R.call(E,L)&&N(v,L,E[L]);return v},Q=(v,E)=>o(v,h(E)),j=(v,E)=>function(){return E||(0,v[m(v)[0]])((E={exports:{}}).exports,E),E.exports},z=(v,E)=>{for(var L in E)r(v,L,{get:E[L],enumerable:!0})},U=(v,E,L,q)=>{if(E&&typeof E=="object"||typeof E=="function")for(let ie of m(E))!M.call(v,ie)&&ie!==L&&r(v,ie,{get:()=>E[ie],enumerable:!(q=u(E,ie))||q.enumerable});return v},C=(v,E,L)=>(L=v!=null?n(x(v)):{},U(E||!v||!v.__esModule?r(L,"default",{value:v,enumerable:!0}):L,v)),K=v=>U(r({},"__esModule",{value:!0}),v),te=(v,E,L)=>(N(v,typeof E!="symbol"?E+"":E,L),L),pe=j({"../node_modules/timing-function/lib/UnitBezier.js"(v,E){E.exports=function(){function L(q,ie,de,Me){this.set(q,ie,de,Me)}return L.prototype.set=function(q,ie,de,Me){this._cx=3*q,this._bx=3*(de-q)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*ie,this._by=3*(Me-ie)-this._cy,this._ay=1-this._cy-this._by},L.epsilon=1e-6,L.prototype._sampleCurveX=function(q){return((this._ax*q+this._bx)*q+this._cx)*q},L.prototype._sampleCurveY=function(q){return((this._ay*q+this._by)*q+this._cy)*q},L.prototype._sampleCurveDerivativeX=function(q){return(3*this._ax*q+2*this._bx)*q+this._cx},L.prototype._solveCurveX=function(q,ie){var de,Me,$e,Ke,gt,se;for($e=void 0,Ke=void 0,gt=void 0,se=void 0,de=void 0,Me=void 0,gt=q,Me=0;Me<8;){if(se=this._sampleCurveX(gt)-q,Math.abs(se)<ie)return gt;if(de=this._sampleCurveDerivativeX(gt),Math.abs(de)<ie)break;gt=gt-se/de,Me++}if($e=0,Ke=1,gt=q,gt<$e)return $e;if(gt>Ke)return Ke;for(;$e<Ke;){if(se=this._sampleCurveX(gt),Math.abs(se-q)<ie)return gt;q>se?$e=gt:Ke=gt,gt=(Ke-$e)*.5+$e}return gt},L.prototype.solve=function(q,ie){return this._sampleCurveY(this._solveCurveX(q,ie))},L.prototype.solveSimple=function(q){return this._sampleCurveY(this._solveCurveX(q,1e-6))},L}()}}),Z=j({"../node_modules/levenshtein-edit-distance/index.js"(v,E){var L,q;L=[],q=[];function ie(de,Me,$e){var Ke,gt,se,Ne,Wt,bn,un,qn;if(de===Me)return 0;if(Ke=de.length,gt=Me.length,Ke===0)return gt;if(gt===0)return Ke;for($e&&(de=de.toLowerCase(),Me=Me.toLowerCase()),un=0;un<Ke;)q[un]=de.charCodeAt(un),L[un]=++un;for(qn=0;qn<gt;)for(se=Me.charCodeAt(qn),Ne=Wt=qn++,un=-1;++un<Ke;)bn=se===q[un]?Wt:Wt+1,Wt=L[un],L[un]=Ne=Wt>Ne?bn>Ne?Ne+1:bn:bn>Wt?Wt+1:bn;return Ne}E.exports=ie}}),be=j({"../node_modules/propose/propose.js"(v,E){var L=Z();function q(){var ie,de,Me,$e,Ke,gt=0,se=arguments[0],Ne=arguments[1],Wt=Ne.length,bn=arguments[2];bn&&($e=bn.threshold,Ke=bn.ignoreCase),$e===void 0&&($e=0);for(var un=0;un<Wt;++un)Ke?de=L(se,Ne[un],!0):de=L(se,Ne[un]),de>se.length?ie=1-de/Ne[un].length:ie=1-de/se.length,ie>gt&&(gt=ie,Me=Ne[un]);return gt>=$e?Me:null}E.exports=q}}),Pe=j({"../node_modules/fast-deep-equal/index.js"(v,E){E.exports=function L(q,ie){if(q===ie)return!0;if(q&&ie&&typeof q=="object"&&typeof ie=="object"){if(q.constructor!==ie.constructor)return!1;var de,Me,$e;if(Array.isArray(q)){if(de=q.length,de!=ie.length)return!1;for(Me=de;Me--!==0;)if(!L(q[Me],ie[Me]))return!1;return!0}if(q.constructor===RegExp)return q.source===ie.source&&q.flags===ie.flags;if(q.valueOf!==Object.prototype.valueOf)return q.valueOf()===ie.valueOf();if(q.toString!==Object.prototype.toString)return q.toString()===ie.toString();if($e=Object.keys(q),de=$e.length,de!==Object.keys(ie).length)return!1;for(Me=de;Me--!==0;)if(!Object.prototype.hasOwnProperty.call(ie,$e[Me]))return!1;for(Me=de;Me--!==0;){var Ke=$e[Me];if(!L(q[Ke],ie[Ke]))return!1}return!0}return q!==q&&ie!==ie}}}),G={};z(G,{createRafDriver:()=>Q0,getProject:()=>Ix,notify:()=>lp,onChange:()=>my,types:()=>dx,val:()=>Rx}),t.exports=K(G);var ye={};z(ye,{createRafDriver:()=>Q0,getProject:()=>Ix,notify:()=>lp,onChange:()=>my,types:()=>dx,val:()=>Rx});var St=Mt,kt=class{constructor(){te(this,"atom",new St.Atom({projects:{}}))}add(v,E){this.atom.setByPointer(L=>L.projects[v],E)}get(v){return this.atom.get().projects[v]}has(v){return!!this.get(v)}},it=new kt,me=it,lt=new WeakMap;function Fe(v){return lt.get(v)}function vt(v,E){lt.set(v,E)}var Ge=[],mt=Array.isArray,Je=mt,Be=typeof ki=="object"&&ki&&ki.Object===Object&&ki,nt=Be,$t=typeof self=="object"&&self&&self.Object===Object&&self,Ut=nt||$t||Function("return this")(),Dt=Ut,en=Dt.Symbol,on=en,wn=Object.prototype,Wn=wn.hasOwnProperty,qr=wn.toString,xn=on?on.toStringTag:void 0;function et(v){var E=Wn.call(v,xn),L=v[xn];try{v[xn]=void 0;var q=!0}catch{}var ie=qr.call(v);return q&&(E?v[xn]=L:delete v[xn]),ie}var Qr=et,Pn=Object.prototype,Sn=Pn.toString;function gn(v){return Sn.call(v)}var Ir=gn,kn="[object Null]",Nn="[object Undefined]",cr=on?on.toStringTag:void 0;function si(v){return v==null?v===void 0?Nn:kn:cr&&cr in Object(v)?Qr(v):Ir(v)}var Dr=si;function Ee(v){return v!=null&&typeof v=="object"}var ce=Ee,ut="[object Symbol]";function Vt(v){return typeof v=="symbol"||ce(v)&&Dr(v)==ut}var Ot=Vt,Bt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mn=/^\w*$/;function Ht(v,E){if(Je(v))return!1;var L=typeof v;return L=="number"||L=="symbol"||L=="boolean"||v==null||Ot(v)?!0:mn.test(v)||!Bt.test(v)||E!=null&&v in Object(E)}var pt=Ht;function En(v){var E=typeof v;return v!=null&&(E=="object"||E=="function")}var tn=En,yn="[object AsyncFunction]",rn="[object Function]",Jt="[object GeneratorFunction]",Bn="[object Proxy]";function pr(v){if(!tn(v))return!1;var E=Dr(v);return E==rn||E==Jt||E==yn||E==Bn}var Le=pr,Gt=Dt["__core-js_shared__"],ht=Gt,jt=function(){var v=/[^.]+$/.exec(ht&&ht.keys&&ht.keys.IE_PROTO||"");return v?"Symbol(src)_1."+v:""}();function qt(v){return!!jt&&jt in v}var Qn=qt,Lr=Function.prototype,Mr=Lr.toString;function es(v){if(v!=null){try{return Mr.call(v)}catch{}try{return v+""}catch{}}return""}var rr=es,zr=/[\\^$.*+?()[\]{}|]/g,Ar=/^\[object .+?Constructor\]$/,Yc=Function.prototype,Zc=Object.prototype,Qc=Yc.toString,Wa=Zc.hasOwnProperty,Jc=RegExp("^"+Qc.call(Wa).replace(zr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $u(v){if(!tn(v)||Qn(v))return!1;var E=Le(v)?Jc:Ar;return E.test(rr(v))}var ba=$u;function ed(v,E){return v==null?void 0:v[E]}var Lh=ed;function dm(v,E){var L=Lh(v,E);return ba(L)?L:void 0}var we=dm,tt=we(Object,"create"),yt=tt;function We(){this.__data__=yt?yt(null):{},this.size=0}var _t=We;function Xt(v){var E=this.has(v)&&delete this.__data__[v];return this.size-=E?1:0,E}var pn=Xt,Ln="__lodash_hash_undefined__",Tn=Object.prototype,Kn=Tn.hasOwnProperty;function Mn(v){var E=this.__data__;if(yt){var L=E[v];return L===Ln?void 0:L}return Kn.call(E,v)?E[v]:void 0}var jn=Mn,Nr=Object.prototype,lr=Nr.hasOwnProperty;function Xr(v){var E=this.__data__;return yt?E[v]!==void 0:lr.call(E,v)}var xs=Xr,Hr="__lodash_hash_undefined__";function Yn(v,E){var L=this.__data__;return this.size+=this.has(v)?0:1,L[v]=yt&&E===void 0?Hr:E,this}var Ka=Yn;function wr(v){var E=-1,L=v==null?0:v.length;for(this.clear();++E<L;){var q=v[E];this.set(q[0],q[1])}}wr.prototype.clear=_t,wr.prototype.delete=pn,wr.prototype.get=jn,wr.prototype.has=xs,wr.prototype.set=Ka;var Ys=wr;function qa(){this.__data__=[],this.size=0}var Zs=qa;function Xa(v,E){return v===E||v!==v&&E!==E}var Yr=Xa;function ts(v,E){for(var L=v.length;L--;)if(Yr(v[L][0],E))return L;return-1}var Ya=ts,eo=Array.prototype,Wu=eo.splice;function Nh(v){var E=this.__data__,L=Ya(E,v);if(L<0)return!1;var q=E.length-1;return L==q?E.pop():Wu.call(E,L,1),--this.size,!0}var td=Nh;function hm(v){var E=this.__data__,L=Ya(E,v);return L<0?void 0:E[L][1]}var zl=hm;function pm(v){return Ya(this.__data__,v)>-1}var Fh=pm;function fm(v,E){var L=this.__data__,q=Ya(L,v);return q<0?(++this.size,L.push([v,E])):L[q][1]=E,this}var cw=fm;function Za(v){var E=-1,L=v==null?0:v.length;for(this.clear();++E<L;){var q=v[E];this.set(q[0],q[1])}}Za.prototype.clear=Zs,Za.prototype.delete=td,Za.prototype.get=zl,Za.prototype.has=Fh,Za.prototype.set=cw;var nd=Za,dw=we(Dt,"Map"),rd=dw;function e0(){this.size=0,this.__data__={hash:new Ys,map:new(rd||nd),string:new Ys}}var t0=e0;function Qa(v){var E=typeof v;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?v!=="__proto__":v===null}var n0=Qa;function hw(v,E){var L=v.__data__;return n0(E)?L[typeof E=="string"?"string":"hash"]:L.map}var id=hw;function mm(v){var E=id(this,v).delete(v);return this.size-=E?1:0,E}var vm=mm;function gm(v){return id(this,v).get(v)}var r0=gm;function i0(v){return id(this,v).has(v)}var o0=i0;function s0(v,E){var L=id(this,v),q=L.size;return L.set(v,E),this.size+=L.size==q?0:1,this}var pw=s0;function Ku(v){var E=-1,L=v==null?0:v.length;for(this.clear();++E<L;){var q=v[E];this.set(q[0],q[1])}}Ku.prototype.clear=t0,Ku.prototype.delete=vm,Ku.prototype.get=r0,Ku.prototype.has=o0,Ku.prototype.set=pw;var od=Ku,fw="Expected a function";function ym(v,E){if(typeof v!="function"||E!=null&&typeof E!="function")throw new TypeError(fw);var L=function(){var q=arguments,ie=E?E.apply(this,q):q[0],de=L.cache;if(de.has(ie))return de.get(ie);var Me=v.apply(this,q);return L.cache=de.set(ie,Me)||de,Me};return L.cache=new(ym.Cache||od),L}ym.Cache=od;var Ja=ym,Hl=500;function a0(v){var E=Ja(v,function(q){return L.size===Hl&&L.clear(),q}),L=E.cache;return E}var Bh=a0,mw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,vw=/\\(\\)?/g,l0=Bh(function(v){var E=[];return v.charCodeAt(0)===46&&E.push(""),v.replace(mw,function(L,q,ie,de){E.push(ie?de.replace(vw,"$1"):q||L)}),E}),gw=l0;function yw(v,E){for(var L=-1,q=v==null?0:v.length,ie=Array(q);++L<q;)ie[L]=E(v[L],L,v);return ie}var u0=yw,c0=1/0,d0=on?on.prototype:void 0,bm=d0?d0.toString:void 0;function h0(v){if(typeof v=="string")return v;if(Je(v))return u0(v,h0)+"";if(Ot(v))return bm?bm.call(v):"";var E=v+"";return E=="0"&&1/v==-c0?"-0":E}var p0=h0;function f0(v){return v==null?"":p0(v)}var _m=f0;function Uh(v,E){return Je(v)?v:pt(v,E)?[v]:gw(_m(v))}var qu=Uh,m0=1/0;function bw(v){if(typeof v=="string"||Ot(v))return v;var E=v+"";return E=="0"&&1/v==-m0?"-0":E}var Qs=bw;function sd(v,E){E=qu(E,v);for(var L=0,q=E.length;v!=null&&L<q;)v=v[Qs(E[L++])];return L&&L==q?v:void 0}var ad=sd;function Gl(v,E,L){var q=v==null?void 0:ad(v,E);return q===void 0?L:q}var el=Gl;function wm(v,E){return E.length===0?v:el(v,E)}var $l=class{constructor(){te(this,"_values",{})}get(v,E){if(this.has(v))return this._values[v];{const L=E();return this._values[v]=L,L}}has(v){return this._values.hasOwnProperty(v)}},Hi=Mt,ld=function(){try{var v=we(Object,"defineProperty");return v({},"",{}),v}catch{}}(),Vh=ld;function _w(v,E,L){E=="__proto__"&&Vh?Vh(v,E,{configurable:!0,enumerable:!0,value:L,writable:!0}):v[E]=L}var Wl=_w,tl=Object.prototype,xm=tl.hasOwnProperty;function ww(v,E,L){var q=v[E];(!(xm.call(v,E)&&Yr(q,L))||L===void 0&&!(E in v))&&Wl(v,E,L)}var jh=ww,xw=9007199254740991,v0=/^(?:0|[1-9]\d*)$/;function g0(v,E){var L=typeof v;return E=E??xw,!!E&&(L=="number"||L!="symbol"&&v0.test(v))&&v>-1&&v%1==0&&v<E}var Sm=g0;function Sw(v,E,L,q){if(!tn(v))return v;E=qu(E,v);for(var ie=-1,de=E.length,Me=de-1,$e=v;$e!=null&&++ie<de;){var Ke=Qs(E[ie]),gt=L;if(Ke==="__proto__"||Ke==="constructor"||Ke==="prototype")return v;if(ie!=Me){var se=$e[Ke];gt=q?q(se,Ke,$e):void 0,gt===void 0&&(gt=tn(se)?se:Sm(E[ie+1])?[]:{})}jh($e,Ke,gt),$e=$e[Ke]}return v}var zh=Sw;function Em(v,E,L){return v==null?v:zh(v,E,L)}var Hh=Em,Gi=new WeakMap;function Ew(v){return Cm(v)}function Cm(v){if(Gi.has(v))return Gi.get(v);const E=v.type==="compound"?km(v):v.type==="enum"?Pm(v):v.default;return Gi.set(v,E),E}function Pm(v){const E={$case:v.defaultCase};for(const[L,q]of Object.entries(v.cases))E[L]=Cm(q);return E}function km(v){const E={};for(const[L,q]of Object.entries(v.props))E[L]=Cm(q);return E}var $i=Mt,Gh=C(pe());function Cw(v,E,L){return(0,$i.prism)(()=>{const q=(0,$i.val)(E);return $i.prism.memo("driver",()=>q?q.type==="BasicKeyframedTrack"?$h(v,q,L):(v.logger.error("Track type not yet supported."),(0,$i.prism)(()=>{})):(0,$i.prism)(()=>{}),[q]).getValue()})}function $h(v,E,L){return(0,$i.prism)(()=>{let q=$i.prism.ref("state",{started:!1}),ie=q.current;const de=L.getValue();return(!ie.started||de<ie.validFrom||ie.validTo<=de)&&(q.current=ie=Pw(v,L,E)),ie.der.getValue()})}var Wh=(0,$i.prism)(()=>{});function Pw(v,E,L){const q=E.getValue();if(L.keyframes.length===0)return{started:!0,validFrom:-1/0,validTo:1/0,der:Wh};let ie=0;for(;;){const de=L.keyframes[ie];if(!de)return ai.error;const Me=ie===L.keyframes.length-1;if(q<de.position)return ie===0?ai.beforeFirstKeyframe(de):ai.error;if(de.position===q)return Me?ai.lastKeyframe(de):ai.between(de,L.keyframes[ie+1],E);if(ie===L.keyframes.length-1)return ai.lastKeyframe(de);{const $e=ie+1;if(L.keyframes[$e].position<=q){ie=$e;continue}else return ai.between(de,L.keyframes[ie+1],E)}}}var ai={beforeFirstKeyframe(v){return{started:!0,validFrom:-1/0,validTo:v.position,der:(0,$i.prism)(()=>({left:v.value,progression:0}))}},lastKeyframe(v){return{started:!0,validFrom:v.position,validTo:1/0,der:(0,$i.prism)(()=>({left:v.value,progression:0}))}},between(v,E,L){if(!v.connectedRight)return{started:!0,validFrom:v.position,validTo:E.position,der:(0,$i.prism)(()=>({left:v.value,progression:0}))};const q=de=>(de-v.position)/(E.position-v.position);if(!v.type||v.type==="bezier"){const de=new Gh.default(v.handles[2],v.handles[3],E.handles[0],E.handles[1]),Me=(0,$i.prism)(()=>{const $e=q(L.getValue()),Ke=de.solveSimple($e);return{left:v.value,right:E.value,progression:Ke}});return{started:!0,validFrom:v.position,validTo:E.position,der:Me}}const ie=(0,$i.prism)(()=>{const de=q(L.getValue()),Me=Math.floor(de);return{left:v.value,right:E.value,progression:Me}});return{started:!0,validFrom:v.position,validTo:E.position,der:ie}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:Wh}};function nl(v,E,L){const ie=L.get(v);if(ie&&ie.override===E)return ie.merged;const de=H({},v);for(const Me of Object.keys(E)){const $e=E[Me],Ke=v[Me];de[Me]=typeof $e=="object"&&typeof Ke=="object"?nl(Ke,$e,L):$e===void 0?Ke:$e}return L.set(v,{override:E,merged:de}),de}function ud(v,E){let L=v;for(const q of E)L=L[q];return L}var Xu=Mt,Tm=(v,E)=>{const L=Xu.prism.memo(v,()=>new Xu.Atom(E),[]);return L.set(E),L},xr=Mt,Mm=Mt,kw=/\s/;function Kh(v){for(var E=v.length;E--&&kw.test(v.charAt(E)););return E}var Am=Kh,y0=/^\s+/;function Tw(v){return v&&v.slice(0,Am(v)+1).replace(y0,"")}var Yu=Tw,qh=0/0,Mw=/^[-+]0x[0-9a-f]+$/i,b0=/^0b[01]+$/i,cd=/^0o[0-7]+$/i,Im=parseInt;function Aw(v){if(typeof v=="number")return v;if(Ot(v))return qh;if(tn(v)){var E=typeof v.valueOf=="function"?v.valueOf():v;v=tn(E)?E+"":E}if(typeof v!="string")return v===0?v:+v;v=Yu(v);var L=b0.test(v);return L||cd.test(v)?Im(v.slice(2),L?2:8):Mw.test(v)?qh:+v}var ee=Aw,ve=1/0,De=17976931348623157e292;function ft(v){if(!v)return v===0?v:0;if(v=ee(v),v===ve||v===-ve){var E=v<0?-1:1;return E*De}return v===v?v:0}var Rn=ft;function dr(v){var E=Rn(v),L=E%1;return E===E?L?E-L:E:0}var to=dr;function Ss(v){return v}var _0=Ss,Zu=we(Dt,"WeakMap"),Qu=Zu,qP=Object.create,FL=function(){function v(){}return function(E){if(!tn(E))return{};if(qP)return qP(E);v.prototype=E;var L=new v;return v.prototype=void 0,L}}(),XP=FL;function Iw(v,E){var L=-1,q=v.length;for(E||(E=Array(q));++L<q;)E[L]=v[L];return E}var BL=Iw;function Rw(v,E){for(var L=-1,q=v==null?0:v.length;++L<q&&E(v[L],L,v)!==!1;);return v}var YP=Rw;function ZP(v,E,L,q){var ie=!L;L||(L={});for(var de=-1,Me=E.length;++de<Me;){var $e=E[de],Ke=q?q(L[$e],v[$e],$e,L,v):void 0;Ke===void 0&&(Ke=v[$e]),ie?Wl(L,$e,Ke):jh(L,$e,Ke)}return L}var Rm=ZP,w0=9007199254740991;function Ow(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=w0}var Dw=Ow;function QP(v){return v!=null&&Dw(v.length)&&!Le(v)}var JP=QP,Lw=Object.prototype;function Nw(v){var E=v&&v.constructor,L=typeof E=="function"&&E.prototype||Lw;return v===L}var x0=Nw;function Fw(v,E){for(var L=-1,q=Array(v);++L<v;)q[L]=E(L);return q}var ek=Fw,tk="[object Arguments]";function S0(v){return ce(v)&&Dr(v)==tk}var Bw=S0,nk=Object.prototype,rk=nk.hasOwnProperty,ik=nk.propertyIsEnumerable,ok=Bw(function(){return arguments}())?Bw:function(v){return ce(v)&&rk.call(v,"callee")&&!ik.call(v,"callee")},Uw=ok;function sk(){return!1}var ak=sk,Vw=e&&!e.nodeType&&e,jw=Vw&&!0&&t&&!t.nodeType&&t,lk=jw&&jw.exports===Vw,zw=lk?Dt.Buffer:void 0,uk=zw?zw.isBuffer:void 0,ck=uk||ak,Om=ck,dk="[object Arguments]",hk="[object Array]",pk="[object Boolean]",fk="[object Date]",mk="[object Error]",vk="[object Function]",gk="[object Map]",yk="[object Number]",bk="[object Object]",_k="[object RegExp]",wk="[object Set]",Gr="[object String]",xk="[object WeakMap]",UL="[object ArrayBuffer]",VL="[object DataView]",E0="[object Float32Array]",Hw="[object Float64Array]",Gw="[object Int8Array]",Xh="[object Int16Array]",Sk="[object Int32Array]",C0="[object Uint8Array]",Ek="[object Uint8ClampedArray]",$w="[object Uint16Array]",jL="[object Uint32Array]",Fr={};Fr[E0]=Fr[Hw]=Fr[Gw]=Fr[Xh]=Fr[Sk]=Fr[C0]=Fr[Ek]=Fr[$w]=Fr[jL]=!0,Fr[dk]=Fr[hk]=Fr[UL]=Fr[pk]=Fr[VL]=Fr[fk]=Fr[mk]=Fr[vk]=Fr[gk]=Fr[yk]=Fr[bk]=Fr[_k]=Fr[wk]=Fr[Gr]=Fr[xk]=!1;function Ck(v){return ce(v)&&Dw(v.length)&&!!Fr[Dr(v)]}var Ww=Ck;function Pk(v){return function(E){return v(E)}}var Kw=Pk,qw=e&&!e.nodeType&&e,Yh=qw&&!0&&t&&!t.nodeType&&t,kk=Yh&&Yh.exports===qw,Xw=kk&&nt.process,zL=function(){try{var v=Yh&&Yh.require&&Yh.require("util").types;return v||Xw&&Xw.binding&&Xw.binding("util")}catch{}}(),Ju=zL,Yw=Ju&&Ju.isTypedArray,Tk=Yw?Kw(Yw):Ww,Zw=Tk,HL=Object.prototype,GL=HL.hasOwnProperty;function Mk(v,E){var L=Je(v),q=!L&&Uw(v),ie=!L&&!q&&Om(v),de=!L&&!q&&!ie&&Zw(v),Me=L||q||ie||de,$e=Me?ek(v.length,String):[],Ke=$e.length;for(var gt in v)(E||GL.call(v,gt))&&!(Me&&(gt=="length"||ie&&(gt=="offset"||gt=="parent")||de&&(gt=="buffer"||gt=="byteLength"||gt=="byteOffset")||Sm(gt,Ke)))&&$e.push(gt);return $e}var Qw=Mk;function Ak(v,E){return function(L){return v(E(L))}}var Ik=Ak,$L=Ik(Object.keys,Object),P0=$L,Jw=Object.prototype,WL=Jw.hasOwnProperty;function Rk(v){if(!x0(v))return P0(v);var E=[];for(var L in Object(v))WL.call(v,L)&&L!="constructor"&&E.push(L);return E}var Ok=Rk;function k0(v){return JP(v)?Qw(v):Ok(v)}var dd=k0;function Dk(v){var E=[];if(v!=null)for(var L in Object(v))E.push(L);return E}var Zh=Dk,T0=Object.prototype,KL=T0.hasOwnProperty;function Lk(v){if(!tn(v))return Zh(v);var E=x0(v),L=[];for(var q in v)q=="constructor"&&(E||!KL.call(v,q))||L.push(q);return L}var qL=Lk;function XL(v){return JP(v)?Qw(v,!0):qL(v)}var M0=XL;function YL(v,E){for(var L=-1,q=E.length,ie=v.length;++L<q;)v[ie+L]=E[L];return v}var Nk=YL,Fk=Ik(Object.getPrototypeOf,Object),A0=Fk,Bk="[object Object]",Uk=Function.prototype,ZL=Object.prototype,Vk=Uk.toString,jk=ZL.hasOwnProperty,zk=Vk.call(Object);function Hk(v){if(!ce(v)||Dr(v)!=Bk)return!1;var E=A0(v);if(E===null)return!0;var L=jk.call(E,"constructor")&&E.constructor;return typeof L=="function"&&L instanceof L&&Vk.call(L)==zk}var QL=Hk;function JL(v,E,L){var q=-1,ie=v.length;E<0&&(E=-E>ie?0:ie+E),L=L>ie?ie:L,L<0&&(L+=ie),ie=E>L?0:L-E>>>0,E>>>=0;for(var de=Array(ie);++q<ie;)de[q]=v[q+E];return de}var e1=JL;function Gk(v,E,L){var q=v.length;return L=L===void 0?q:L,!E&&L>=q?v:e1(v,E,L)}var eN=Gk,Qh="\\ud800-\\udfff",t1="\\u0300-\\u036f",tN="\\ufe20-\\ufe2f",nN="\\u20d0-\\u20ff",$k=t1+tN+nN,rN="\\ufe0e\\ufe0f",iN="\\u200d",Dm=RegExp("["+iN+Qh+$k+rN+"]");function I0(v){return Dm.test(v)}var n1=I0;function Wk(v){return v.split("")}var Kk=Wk,r1="\\ud800-\\udfff",oN="\\u0300-\\u036f",sN="\\ufe20-\\ufe2f",qk="\\u20d0-\\u20ff",aN=oN+sN+qk,lN="\\ufe0e\\ufe0f",Xk="["+r1+"]",i1="["+aN+"]",o1="\\ud83c[\\udffb-\\udfff]",Yk="(?:"+i1+"|"+o1+")",Zk="[^"+r1+"]",hd="(?:\\ud83c[\\udde6-\\uddff]){2}",Jh="[\\ud800-\\udbff][\\udc00-\\udfff]",R0="\\u200d",s1=Yk+"?",pd="["+lN+"]?",a1="(?:"+R0+"(?:"+[Zk,hd,Jh].join("|")+")"+pd+s1+")*",uN=pd+s1+a1,Qk="(?:"+[Zk+i1+"?",i1,hd,Jh,Xk].join("|")+")",cN=RegExp(o1+"(?="+o1+")|"+Qk+uN,"g");function dN(v){return v.match(cN)||[]}var Jk=dN;function hN(v){return n1(v)?Jk(v):Kk(v)}var pN=hN;function Lm(v,E,L){return v===v&&(L!==void 0&&(v=v<=L?v:L),E!==void 0&&(v=v>=E?v:E)),v}var O0=Lm;function fN(v,E,L){return L===void 0&&(L=E,E=void 0),L!==void 0&&(L=ee(L),L=L===L?L:0),E!==void 0&&(E=ee(E),E=E===E?E:0),O0(ee(v),E,L)}var l1=fN;function mN(){this.__data__=new nd,this.size=0}var vN=mN;function eT(v){var E=this.__data__,L=E.delete(v);return this.size=E.size,L}var gN=eT;function yN(v){return this.__data__.get(v)}var tT=yN;function bN(v){return this.__data__.has(v)}var _N=bN,nT=200;function wN(v,E){var L=this.__data__;if(L instanceof nd){var q=L.__data__;if(!rd||q.length<nT-1)return q.push([v,E]),this.size=++L.size,this;L=this.__data__=new od(q)}return L.set(v,E),this.size=L.size,this}var ep=wN;function rl(v){var E=this.__data__=new nd(v);this.size=E.size}rl.prototype.clear=vN,rl.prototype.delete=gN,rl.prototype.get=tT,rl.prototype.has=_N,rl.prototype.set=ep;var fd=rl;function u1(v,E){return v&&Rm(E,dd(E),v)}var rT=u1;function c1(v,E){return v&&Rm(E,M0(E),v)}var iT=c1,oT=e&&!e.nodeType&&e,d1=oT&&!0&&t&&!t.nodeType&&t,sT=d1&&d1.exports===oT,aT=sT?Dt.Buffer:void 0,h1=aT?aT.allocUnsafe:void 0;function lT(v,E){if(E)return v.slice();var L=v.length,q=h1?h1(L):new v.constructor(L);return v.copy(q),q}var uT=lT;function cT(v,E){for(var L=-1,q=v==null?0:v.length,ie=0,de=[];++L<q;){var Me=v[L];E(Me,L,v)&&(de[ie++]=Me)}return de}var xN=cT;function SN(){return[]}var Nm=SN,dT=Object.prototype,EN=dT.propertyIsEnumerable,Fm=Object.getOwnPropertySymbols,p1=Fm?function(v){return v==null?[]:(v=Object(v),xN(Fm(v),function(E){return EN.call(v,E)}))}:Nm,f1=p1;function hT(v,E){return Rm(v,f1(v),E)}var tp=hT,Bm=Object.getOwnPropertySymbols,CN=Bm?function(v){for(var E=[];v;)Nk(E,f1(v)),v=A0(v);return E}:Nm,Um=CN;function m1(v,E){return Rm(v,Um(v),E)}var PN=m1;function md(v,E,L){var q=E(v);return Je(v)?q:Nk(q,L(v))}var np=md;function kN(v){return np(v,dd,f1)}var Vm=kN;function pT(v){return np(v,M0,Um)}var TN=pT,v1=we(Dt,"DataView"),D0=v1,MN=we(Dt,"Promise"),L0=MN,fT=we(Dt,"Set"),g1=fT,y1="[object Map]",mT="[object Object]",vT="[object Promise]",gT="[object Set]",b1="[object WeakMap]",_1="[object DataView]",yT=rr(D0),w1=rr(rd),bT=rr(L0),_T=rr(g1),N0=rr(Qu),ec=Dr;(D0&&ec(new D0(new ArrayBuffer(1)))!=_1||rd&&ec(new rd)!=y1||L0&&ec(L0.resolve())!=vT||g1&&ec(new g1)!=gT||Qu&&ec(new Qu)!=b1)&&(ec=function(v){var E=Dr(v),L=E==mT?v.constructor:void 0,q=L?rr(L):"";if(q)switch(q){case yT:return _1;case w1:return y1;case bT:return vT;case _T:return gT;case N0:return b1}return E});var jm=ec,wT=Object.prototype,xT=wT.hasOwnProperty;function ST(v){var E=v.length,L=new v.constructor(E);return E&&typeof v[0]=="string"&&xT.call(v,"index")&&(L.index=v.index,L.input=v.input),L}var AN=ST,IN=Dt.Uint8Array,zm=IN;function RN(v){var E=new v.constructor(v.byteLength);return new zm(E).set(new zm(v)),E}var x1=RN;function li(v,E){var L=E?x1(v.buffer):v.buffer;return new v.constructor(L,v.byteOffset,v.byteLength)}var F0=li,ON=/\w*$/;function ET(v){var E=new v.constructor(v.source,ON.exec(v));return E.lastIndex=v.lastIndex,E}var DN=ET,CT=on?on.prototype:void 0,S1=CT?CT.valueOf:void 0;function LN(v){return S1?Object(S1.call(v)):{}}var NN=LN;function PT(v,E){var L=E?x1(v.buffer):v.buffer;return new v.constructor(L,v.byteOffset,v.length)}var FN=PT,BN="[object Boolean]",kT="[object Date]",UN="[object Map]",VN="[object Number]",TT="[object RegExp]",MT="[object Set]",jN="[object String]",rp="[object Symbol]",Hm="[object ArrayBuffer]",AT="[object DataView]",zN="[object Float32Array]",IT="[object Float64Array]",HN="[object Int8Array]",GN="[object Int16Array]",RT="[object Int32Array]",$N="[object Uint8Array]",OT="[object Uint8ClampedArray]",DT="[object Uint16Array]",E1="[object Uint32Array]";function LT(v,E,L){var q=v.constructor;switch(E){case Hm:return x1(v);case BN:case kT:return new q(+v);case AT:return F0(v,L);case zN:case IT:case HN:case GN:case RT:case $N:case OT:case DT:case E1:return FN(v,L);case UN:return new q;case VN:case jN:return new q(v);case TT:return DN(v);case MT:return new q;case rp:return NN(v)}}var NT=LT;function WN(v){return typeof v.constructor=="function"&&!x0(v)?XP(A0(v)):{}}var KN=WN,FT="[object Map]";function qN(v){return ce(v)&&jm(v)==FT}var XN=qN,B0=Ju&&Ju.isMap,YN=B0?Kw(B0):XN,BT=YN,U0="[object Set]";function ZN(v){return ce(v)&&jm(v)==U0}var UT=ZN,Gm=Ju&&Ju.isSet,QN=Gm?Kw(Gm):UT,VT=QN,vd=1,jT=2,C1=4,P1="[object Arguments]",k1="[object Array]",T1="[object Boolean]",M1="[object Date]",A1="[object Error]",I1="[object Function]",zT="[object GeneratorFunction]",HT="[object Map]",GT="[object Number]",R1="[object Object]",tc="[object RegExp]",O1="[object Set]",JN="[object String]",$T="[object Symbol]",D1="[object WeakMap]",e5="[object ArrayBuffer]",t5="[object DataView]",WT="[object Float32Array]",KT="[object Float64Array]",n5="[object Int8Array]",r5="[object Int16Array]",qT="[object Int32Array]",i5="[object Uint8Array]",V0="[object Uint8ClampedArray]",L1="[object Uint16Array]",XT="[object Uint32Array]",$r={};$r[P1]=$r[k1]=$r[e5]=$r[t5]=$r[T1]=$r[M1]=$r[WT]=$r[KT]=$r[n5]=$r[r5]=$r[qT]=$r[HT]=$r[GT]=$r[R1]=$r[tc]=$r[O1]=$r[JN]=$r[$T]=$r[i5]=$r[V0]=$r[L1]=$r[XT]=!0,$r[A1]=$r[I1]=$r[D1]=!1;function $m(v,E,L,q,ie,de){var Me,$e=E&vd,Ke=E&jT,gt=E&C1;if(L&&(Me=ie?L(v,q,ie,de):L(v)),Me!==void 0)return Me;if(!tn(v))return v;var se=Je(v);if(se){if(Me=AN(v),!$e)return BL(v,Me)}else{var Ne=jm(v),Wt=Ne==I1||Ne==zT;if(Om(v))return uT(v,$e);if(Ne==R1||Ne==P1||Wt&&!ie){if(Me=Ke||Wt?{}:KN(v),!$e)return Ke?PN(v,iT(Me,v)):tp(v,rT(Me,v))}else{if(!$r[Ne])return ie?v:{};Me=NT(v,Ne,$e)}}de||(de=new fd);var bn=de.get(v);if(bn)return bn;de.set(v,Me),VT(v)?v.forEach(function(Xn){Me.add($m(Xn,E,L,Xn,v,de))}):BT(v)&&v.forEach(function(Xn,zn){Me.set(zn,$m(Xn,E,L,zn,v,de))});var un=gt?Ke?TN:Vm:Ke?M0:dd,qn=se?void 0:un(v);return YP(qn||v,function(Xn,zn){qn&&(zn=Xn,Xn=v[zn]),jh(Me,zn,$m(Xn,E,L,zn,v,de))}),Me}var o5=$m,s5=1,N1=4;function YT(v){return o5(v,s5|N1)}var a5=YT,ZT="__lodash_hash_undefined__";function QT(v){return this.__data__.set(v,ZT),this}var F1=QT;function JT(v){return this.__data__.has(v)}var l5=JT;function Wm(v){var E=-1,L=v==null?0:v.length;for(this.__data__=new od;++E<L;)this.add(v[E])}Wm.prototype.add=Wm.prototype.push=F1,Wm.prototype.has=l5;var u5=Wm;function c5(v,E){for(var L=-1,q=v==null?0:v.length;++L<q;)if(E(v[L],L,v))return!0;return!1}var j0=c5;function B1(v,E){return v.has(E)}var d5=B1,eM=1,tM=2;function nM(v,E,L,q,ie,de){var Me=L&eM,$e=v.length,Ke=E.length;if($e!=Ke&&!(Me&&Ke>$e))return!1;var gt=de.get(v),se=de.get(E);if(gt&&se)return gt==E&&se==v;var Ne=-1,Wt=!0,bn=L&tM?new u5:void 0;for(de.set(v,E),de.set(E,v);++Ne<$e;){var un=v[Ne],qn=E[Ne];if(q)var Xn=Me?q(qn,un,Ne,E,v,de):q(un,qn,Ne,v,E,de);if(Xn!==void 0){if(Xn)continue;Wt=!1;break}if(bn){if(!j0(E,function(zn,fr){if(!d5(bn,fr)&&(un===zn||ie(un,zn,L,q,de)))return bn.push(fr)})){Wt=!1;break}}else if(!(un===qn||ie(un,qn,L,q,de))){Wt=!1;break}}return de.delete(v),de.delete(E),Wt}var U1=nM;function rM(v){var E=-1,L=Array(v.size);return v.forEach(function(q,ie){L[++E]=[ie,q]}),L}var iM=rM;function oM(v){var E=-1,L=Array(v.size);return v.forEach(function(q){L[++E]=q}),L}var sM=oM,aM=1,lM=2,uM="[object Boolean]",cM="[object Date]",dM="[object Error]",V1="[object Map]",z0="[object Number]",hM="[object RegExp]",h5="[object Set]",p5="[object String]",pM="[object Symbol]",fM="[object ArrayBuffer]",mM="[object DataView]",j1=on?on.prototype:void 0,z1=j1?j1.valueOf:void 0;function f5(v,E,L,q,ie,de,Me){switch(L){case mM:if(v.byteLength!=E.byteLength||v.byteOffset!=E.byteOffset)return!1;v=v.buffer,E=E.buffer;case fM:return!(v.byteLength!=E.byteLength||!de(new zm(v),new zm(E)));case uM:case cM:case z0:return Yr(+v,+E);case dM:return v.name==E.name&&v.message==E.message;case hM:case p5:return v==E+"";case V1:var $e=iM;case h5:var Ke=q&aM;if($e||($e=sM),v.size!=E.size&&!Ke)return!1;var gt=Me.get(v);if(gt)return gt==E;q|=lM,Me.set(v,E);var se=U1($e(v),$e(E),q,ie,de,Me);return Me.delete(v),se;case pM:if(z1)return z1.call(v)==z1.call(E)}return!1}var vM=f5,H1=1,G1=Object.prototype,Km=G1.hasOwnProperty;function gM(v,E,L,q,ie,de){var Me=L&H1,$e=Vm(v),Ke=$e.length,gt=Vm(E),se=gt.length;if(Ke!=se&&!Me)return!1;for(var Ne=Ke;Ne--;){var Wt=$e[Ne];if(!(Me?Wt in E:Km.call(E,Wt)))return!1}var bn=de.get(v),un=de.get(E);if(bn&&un)return bn==E&&un==v;var qn=!0;de.set(v,E),de.set(E,v);for(var Xn=Me;++Ne<Ke;){Wt=$e[Ne];var zn=v[Wt],fr=E[Wt];if(q)var _o=Me?q(fr,zn,Wt,E,v,de):q(zn,fr,Wt,v,E,de);if(!(_o===void 0?zn===fr||ie(zn,fr,L,q,de):_o)){qn=!1;break}Xn||(Xn=Wt=="constructor")}if(qn&&!Xn){var wo=v.constructor,xo=E.constructor;wo!=xo&&"constructor"in v&&"constructor"in E&&!(typeof wo=="function"&&wo instanceof wo&&typeof xo=="function"&&xo instanceof xo)&&(qn=!1)}return de.delete(v),de.delete(E),qn}var $1=gM,yM=1,bM="[object Arguments]",W1="[object Array]",ip="[object Object]",_M=Object.prototype,wM=_M.hasOwnProperty;function xM(v,E,L,q,ie,de){var Me=Je(v),$e=Je(E),Ke=Me?W1:jm(v),gt=$e?W1:jm(E);Ke=Ke==bM?ip:Ke,gt=gt==bM?ip:gt;var se=Ke==ip,Ne=gt==ip,Wt=Ke==gt;if(Wt&&Om(v)){if(!Om(E))return!1;Me=!0,se=!1}if(Wt&&!se)return de||(de=new fd),Me||Zw(v)?U1(v,E,L,q,ie,de):vM(v,E,Ke,L,q,ie,de);if(!(L&yM)){var bn=se&&wM.call(v,"__wrapped__"),un=Ne&&wM.call(E,"__wrapped__");if(bn||un){var qn=bn?v.value():v,Xn=un?E.value():E;return de||(de=new fd),ie(qn,Xn,L,q,de)}}return Wt?(de||(de=new fd),$1(v,E,L,q,ie,de)):!1}var SM=xM;function K1(v,E,L,q,ie){return v===E?!0:v==null||E==null||!ce(v)&&!ce(E)?v!==v&&E!==E:SM(v,E,L,q,K1,ie)}var EM=K1,m5=1,q1=2;function CM(v,E,L,q){var ie=L.length,de=ie,Me=!q;if(v==null)return!de;for(v=Object(v);ie--;){var $e=L[ie];if(Me&&$e[2]?$e[1]!==v[$e[0]]:!($e[0]in v))return!1}for(;++ie<de;){$e=L[ie];var Ke=$e[0],gt=v[Ke],se=$e[1];if(Me&&$e[2]){if(gt===void 0&&!(Ke in v))return!1}else{var Ne=new fd;if(q)var Wt=q(gt,se,Ke,v,E,Ne);if(!(Wt===void 0?EM(se,gt,m5|q1,q,Ne):Wt))return!1}}return!0}var v5=CM;function PM(v){return v===v&&!tn(v)}var kM=PM;function g5(v){for(var E=dd(v),L=E.length;L--;){var q=E[L],ie=v[q];E[L]=[q,ie,kM(ie)]}return E}var X1=g5;function TM(v,E){return function(L){return L==null?!1:L[v]===E&&(E!==void 0||v in Object(L))}}var MM=TM;function AM(v){var E=X1(v);return E.length==1&&E[0][2]?MM(E[0][0],E[0][1]):function(L){return L===v||v5(L,v,E)}}var y5=AM;function b5(v,E){return v!=null&&E in Object(v)}var IM=b5;function _5(v,E,L){E=qu(E,v);for(var q=-1,ie=E.length,de=!1;++q<ie;){var Me=Qs(E[q]);if(!(de=v!=null&&L(v,Me)))break;v=v[Me]}return de||++q!=ie?de:(ie=v==null?0:v.length,!!ie&&Dw(ie)&&Sm(Me,ie)&&(Je(v)||Uw(v)))}var w5=_5;function RM(v,E){return v!=null&&w5(v,E,IM)}var x5=RM,S5=1,OM=2;function E5(v,E){return pt(v)&&kM(E)?MM(Qs(v),E):function(L){var q=el(L,v);return q===void 0&&q===E?x5(L,v):EM(E,q,S5|OM)}}var C5=E5;function DM(v){return function(E){return E==null?void 0:E[v]}}var Y1=DM;function LM(v){return function(E){return ad(E,v)}}var P5=LM;function k5(v){return pt(v)?Y1(Qs(v)):P5(v)}var NM=k5;function T5(v){return typeof v=="function"?v:v==null?_0:typeof v=="object"?Je(v)?C5(v[0],v[1]):y5(v):NM(v)}var M5=T5;function FM(v){return function(E,L,q){for(var ie=-1,de=Object(E),Me=q(E),$e=Me.length;$e--;){var Ke=Me[v?$e:++ie];if(L(de[Ke],Ke,de)===!1)break}return E}}var A5=FM,I5=A5(),BM=I5;function R5(v,E){return v&&BM(v,E,dd)}var O5=R5,op=function(){return Dt.Date.now()},gd=op,D5="Expected a function",UM=Math.max,L5=Math.min;function N5(v,E,L){var q,ie,de,Me,$e,Ke,gt=0,se=!1,Ne=!1,Wt=!0;if(typeof v!="function")throw new TypeError(D5);E=ee(E)||0,tn(L)&&(se=!!L.leading,Ne="maxWait"in L,de=Ne?UM(ee(L.maxWait)||0,E):de,Wt="trailing"in L?!!L.trailing:Wt);function bn(Br){var So=q,Ps=ie;return q=ie=void 0,gt=Br,Me=v.apply(Ps,So),Me}function un(Br){return gt=Br,$e=setTimeout(zn,E),se?bn(Br):Me}function qn(Br){var So=Br-Ke,Ps=Br-gt,sl=E-So;return Ne?L5(sl,de-Ps):sl}function Xn(Br){var So=Br-Ke,Ps=Br-gt;return Ke===void 0||So>=E||So<0||Ne&&Ps>=de}function zn(){var Br=gd();if(Xn(Br))return fr(Br);$e=setTimeout(zn,qn(Br))}function fr(Br){return $e=void 0,Wt&&q?bn(Br):(q=ie=void 0,Me)}function _o(){$e!==void 0&&clearTimeout($e),gt=0,q=Ke=ie=$e=void 0}function wo(){return $e===void 0?Me:fr(gd())}function xo(){var Br=gd(),So=Xn(Br);if(q=arguments,ie=this,Ke=Br,So){if($e===void 0)return un(Ke);if(Ne)return clearTimeout($e),$e=setTimeout(zn,E),bn(Ke)}return $e===void 0&&($e=setTimeout(zn,E)),Me}return xo.cancel=_o,xo.flush=wo,xo}var VM=N5;function F5(v){var E=v==null?0:v.length;return E?v[E-1]:void 0}var jM=F5;function zM(v,E){return E.length<2?v:ad(v,e1(E,0,-1))}var B5=zM;function U5(v){return typeof v=="number"&&v==to(v)}var Z1=U5;function HM(v,E){var L={};return E=M5(E),O5(v,function(q,ie,de){Wl(L,ie,E(q,ie,de))}),L}var V5=HM;function GM(v,E){return E=qu(E,v),v=B5(v,E),v==null||delete v[Qs(jM(E))]}var j5=GM,$M=9007199254740991,Q1=Math.floor;function WM(v,E){var L="";if(!v||E<1||E>$M)return L;do E%2&&(L+=v),E=Q1(E/2),E&&(v+=v);while(E);return L}var KM=WM,qM=Y1("length"),z5=qM,XM="\\ud800-\\udfff",YM="\\u0300-\\u036f",H5="\\ufe20-\\ufe2f",ZM="\\u20d0-\\u20ff",H0=YM+H5+ZM,G5="\\ufe0e\\ufe0f",$5="["+XM+"]",G0="["+H0+"]",$0="\\ud83c[\\udffb-\\udfff]",QM="(?:"+G0+"|"+$0+")",W0="[^"+XM+"]",J1="(?:\\ud83c[\\udde6-\\uddff]){2}",JM="[\\ud800-\\udbff][\\udc00-\\udfff]",e2="\\u200d",t2=QM+"?",n2="["+G5+"]?",yd="(?:"+e2+"(?:"+[W0,J1,JM].join("|")+")"+n2+t2+")*",K0=n2+t2+yd,W5="(?:"+[W0+G0+"?",G0,J1,JM,$5].join("|")+")",ex=RegExp($0+"(?="+$0+")|"+W5+K0,"g");function tx(v){for(var E=ex.lastIndex=0;ex.test(v);)++E;return E}var K5=tx;function q5(v){return n1(v)?K5(v):z5(v)}var nx=q5,r2=Math.ceil;function i2(v,E){E=E===void 0?" ":p0(E);var L=E.length;if(L<2)return L?KM(E,v):E;var q=KM(E,r2(v/nx(E)));return n1(E)?eN(pN(q),0,v).join(""):q.slice(0,v)}var X5=i2;function Y5(v,E,L){v=_m(v),E=to(E);var q=E?nx(v):0;return E&&q<E?X5(E-q,L)+v:v}var sp=Y5;function Z5(v,E){return v==null?!0:j5(v,E)}var o2=Z5,s2=5*1e3,a2=class{constructor(v){te(this,"_cache",new $l),te(this,"_keepHotUntapDebounce"),vt(this,v)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return Fe(this).propsP}get sheet(){return Fe(this).sheet.publicApi}get project(){return Fe(this).sheet.project.publicApi}get address(){return H({},Fe(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",()=>{const v=Fe(this);return(0,Mm.prism)(()=>(0,Mm.val)(v.getValues().getValue()))})}onValuesChange(v,E){return my(this._valuesPrism(),v,E)}get value(){const v=this._valuesPrism();{if(!v.isHot){this._keepHotUntapDebounce!=null&&this._keepHotUntapDebounce.flush();const E=v.keepHot();this._keepHotUntapDebounce=VM(()=>{E(),this._keepHotUntapDebounce=void 0},s2)}this._keepHotUntapDebounce&&this._keepHotUntapDebounce()}return v.getValue()}set initialValue(v){Fe(this).setInitialValue(v)}};function l2(v){const E=new WeakMap;return L=>(E.has(L)||E.set(L,v(L)),E.get(L))}function q0(v){return v.type==="compound"||v.type==="enum"}function rx(v,E){if(!v)return;const[L,...q]=E;if(L===void 0)return v;if(!q0(v))return;const ie=v.type==="enum"?v.cases[L]:v.props[L];return rx(ie,q)}function ix(v){return!q0(v)}var Q5=class{constructor(v,E,L){this.sheet=v,this.template=E,this.nativeObject=L,te(this,"$$isPointerToPrismProvider",!0),te(this,"address"),te(this,"publicApi"),te(this,"_initialValue",new xr.Atom({})),te(this,"_cache",new $l),te(this,"_logger"),te(this,"_internalUtilCtx"),this._logger=v._logger.named("SheetObject",E.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=Q(H({},E.address),{sheetInstanceId:v.address.sheetInstanceId}),this.publicApi=new a2(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",()=>(0,xr.prism)(()=>{const v=(0,xr.val)(this.template.getDefaultValues()),E=(0,xr.val)(this._initialValue.pointer),L=xr.prism.memo("withInitialCache",()=>new WeakMap,[]),q=nl(v,E,L),ie=(0,xr.val)(this.template.getStaticValues()),de=xr.prism.memo("withStatics",()=>new WeakMap,[]);let $e=nl(q,ie,de),Ke;{const se=xr.prism.memo("seq",()=>this.getSequencedValues(),[]),Ne=xr.prism.memo("withSeqsCache",()=>new WeakMap,[]);Ke=(0,xr.val)((0,xr.val)(se)),$e=nl($e,Ke,Ne)}return Tm("finalAtom",$e).pointer}))}getValueByPointer(v){const E=(0,xr.val)(this.getValues()),{path:L}=(0,xr.getPointerParts)(v);return(0,xr.val)(ud(E,L))}pointerToPrism(v){const{path:E}=(0,xr.getPointerParts)(v);return(0,xr.prism)(()=>{const L=(0,xr.val)(this.getValues());return(0,xr.val)(ud(L,E))})}getSequencedValues(){return(0,xr.prism)(()=>{const v=xr.prism.memo("tracksToProcess",()=>this.template.getArrayOfValidSequenceTracks(),[]),E=(0,xr.val)(v),L=new xr.Atom({}),q=(0,xr.val)(this.template.configPointer);return xr.prism.effect("processTracks",()=>{const ie=[];for(const{trackId:de,pathToProp:Me}of E){const $e=this._trackIdToPrism(de),Ke=rx(q,Me),gt=Ke.deserializeAndSanitize,se=Ke.interpolate,Ne=()=>{const bn=$e.getValue();if(!bn)return L.setByPointer(fr=>ud(fr,Me),void 0);const un=gt(bn.left),qn=un===void 0?Ke.default:un;if(bn.right===void 0)return L.setByPointer(fr=>ud(fr,Me),qn);const Xn=gt(bn.right),zn=Xn===void 0?Ke.default:Xn;return L.setByPointer(fr=>ud(fr,Me),se(qn,zn,bn.progression))},Wt=$e.onStale(Ne);Ne(),ie.push(Wt)}return()=>{for(const de of ie)de()}},[q,...E]),L.pointer})}_trackIdToPrism(v){const E=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[v],L=this.sheet.getSequence().positionPrism;return Cw(this._internalUtilCtx,E,L)}get propsP(){return this._cache.get("propsP",()=>(0,xr.pointer)({root:this,path:[]}))}validateValue(v,E){}setInitialValue(v){this.validateValue(this.propsP,v),this._initialValue.set(v)}};function Wr(v){return function(L,q){return v(L,q())}}var ns={_hmm:Es(524),_todo:Es(522),_error:Es(521),errorDev:Es(529),errorPublic:Es(545),_kapow:Es(268),_warn:Es(265),warnDev:Es(273),warnPublic:Es(289),_debug:Es(137),debugDev:Es(145),_trace:Es(73),traceDev:Es(81)};function Es(v){return Object.freeze({audience:nc(v,8)?"internal":nc(v,16)?"dev":"public",category:nc(v,4)?"troubleshooting":nc(v,2)?"todo":"general",level:nc(v,512)?512:nc(v,256)?256:nc(v,128)?128:64})}function nc(v,E){return(v&E)===E}function Sr(v,E){return((E&32)===32?!0:(E&16)===16?v.dev:(E&8)===8?v.internal:!1)&&v.min<=E}var Kl={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(v,E,L){return this.create({names:[...v.names,{name:E,key:L}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(v){if(v.length<5)return v;const E=v.replace(this.collapseOnRE,"");return this.cssMemo.has(E)||this.cssMemo.set(E,this.css(v)),E},css(v){var E,L,q,ie;const de=this.cssMemo.get(v);if(de)return de;let Me="color:".concat((L=(E=this.color)==null?void 0:E.call(this,v))!=null?L:"hsl(".concat((v.charCodeAt(0)+v.charCodeAt(v.length-1))%360,", 100%, 60%)"));return(q=this.bold)!=null&&q.test(v)&&(Me+=";font-weight:600"),(ie=this.italic)!=null&&ie.test(v)&&(Me+=";font-style:italic"),this.cssMemo.set(v,Me),Me}}};function u2(v=console,E={}){const L=Q(H({},Kl),{includes:H({},Kl.includes)}),q={styled:J5.bind(L,v),noStyle:eF.bind(L,v)},ie=c2.bind(L);function de(){return L.loggingConsoleStyle&&L.loggerConsoleStyle?q.styled:q.noStyle}return L.create=de(),{configureLogger(Me){var $e;Me==="console"?(L.loggerConsoleStyle=Kl.loggerConsoleStyle,L.create=de()):Me.type==="console"?(L.loggerConsoleStyle=($e=Me.style)!=null?$e:Kl.loggerConsoleStyle,L.create=de()):Me.type==="keyed"?(L.creatExt=Ke=>Me.keyed(Ke.names),L.create=ie):Me.type==="named"&&(L.creatExt=bd.bind(null,Me.named),L.create=ie)},configureLogging(Me){var $e,Ke,gt,se,Ne;L.includes.dev=($e=Me.dev)!=null?$e:Kl.includes.dev,L.includes.internal=(Ke=Me.internal)!=null?Ke:Kl.includes.internal,L.includes.min=(gt=Me.min)!=null?gt:Kl.includes.min,L.include=(se=Me.include)!=null?se:Kl.include,L.loggingConsoleStyle=(Ne=Me.consoleStyle)!=null?Ne:Kl.loggingConsoleStyle,L.create=de()},getLogger(){return L.create({names:[]})}}}function bd(v,E){const L=[];for(let{name:q,key:ie}of E.names)L.push(ie==null?q:"".concat(q," (").concat(ie,")"));return v(L)}function c2(v){const E=H(H({},this.includes),this.include(v)),L=this.filtered,q=this.named.bind(this,v),ie=this.creatExt(v),de=Sr(E,524),Me=Sr(E,522),$e=Sr(E,521),Ke=Sr(E,529),gt=Sr(E,545),se=Sr(E,265),Ne=Sr(E,268),Wt=Sr(E,273),bn=Sr(E,289),un=Sr(E,137),qn=Sr(E,145),Xn=Sr(E,73),zn=Sr(E,81),fr=de?ie.error.bind(ie,ns._hmm):L.bind(v,524),_o=Me?ie.error.bind(ie,ns._todo):L.bind(v,522),wo=$e?ie.error.bind(ie,ns._error):L.bind(v,521),xo=Ke?ie.error.bind(ie,ns.errorDev):L.bind(v,529),Br=gt?ie.error.bind(ie,ns.errorPublic):L.bind(v,545),So=Ne?ie.warn.bind(ie,ns._kapow):L.bind(v,268),Ps=se?ie.warn.bind(ie,ns._warn):L.bind(v,265),sl=Wt?ie.warn.bind(ie,ns.warnDev):L.bind(v,273),al=bn?ie.warn.bind(ie,ns.warnPublic):L.bind(v,273),Pd=un?ie.debug.bind(ie,ns._debug):L.bind(v,137),tu=qn?ie.debug.bind(ie,ns.debugDev):L.bind(v,145),kd=Xn?ie.trace.bind(ie,ns._trace):L.bind(v,73),Td=zn?ie.trace.bind(ie,ns.traceDev):L.bind(v,81),Li={_hmm:fr,_todo:_o,_error:wo,errorDev:xo,errorPublic:Br,_kapow:So,_warn:Ps,warnDev:sl,warnPublic:al,_debug:Pd,debugDev:tu,_trace:kd,traceDev:Td,lazy:{_hmm:de?Wr(fr):fr,_todo:Me?Wr(_o):_o,_error:$e?Wr(wo):wo,errorDev:Ke?Wr(xo):xo,errorPublic:gt?Wr(Br):Br,_kapow:Ne?Wr(So):So,_warn:se?Wr(Ps):Ps,warnDev:Wt?Wr(sl):sl,warnPublic:bn?Wr(al):al,_debug:un?Wr(Pd):Pd,debugDev:qn?Wr(tu):tu,_trace:Xn?Wr(kd):kd,traceDev:zn?Wr(Td):Td},named:q,utilFor:{internal(){return{debug:Li._debug,error:Li._error,warn:Li._warn,trace:Li._trace,named(ks,Kr){return Li.named(ks,Kr).utilFor.internal()}}},dev(){return{debug:Li.debugDev,error:Li.errorDev,warn:Li.warnDev,trace:Li.traceDev,named(ks,Kr){return Li.named(ks,Kr).utilFor.dev()}}},public(){return{error:Li.errorPublic,warn:Li.warnPublic,debug(ks,Kr){Li._warn('(public "debug" filtered out) '.concat(ks),Kr)},trace(ks,Kr){Li._warn('(public "trace" filtered out) '.concat(ks),Kr)},named(ks,Kr){return Li.named(ks,Kr).utilFor.public()}}}}};return Li}function J5(v,E){const L=H(H({},this.includes),this.include(E)),q=[];let ie="";for(let Ke=0;Ke<E.names.length;Ke++){const{name:gt,key:se}=E.names[Ke];if(ie+=" %c".concat(gt),q.push(this.style.css(gt)),se!=null){const Ne="%c#".concat(se);ie+=Ne,q.push(this.style.css(Ne))}}const de=this.filtered,Me=this.named.bind(this,E),$e=[ie,...q];return h2(de,E,L,v,$e,d2($e),Me)}function d2(v){const E=v.slice(0);for(let L=1;L<E.length;L++)E[L]+=";background-color:#e0005a;padding:2px;color:white";return E}function eF(v,E){const L=H(H({},this.includes),this.include(E));let q="";for(let $e=0;$e<E.names.length;$e++){const{name:Ke,key:gt}=E.names[$e];q+=" ".concat(Ke),gt!=null&&(q+="#".concat(gt))}const ie=this.filtered,de=this.named.bind(this,E),Me=[q];return h2(ie,E,L,v,Me,Me,de)}function h2(v,E,L,q,ie,de,Me){const $e=Sr(L,524),Ke=Sr(L,522),gt=Sr(L,521),se=Sr(L,529),Ne=Sr(L,545),Wt=Sr(L,265),bn=Sr(L,268),un=Sr(L,273),qn=Sr(L,289),Xn=Sr(L,137),zn=Sr(L,145),fr=Sr(L,73),_o=Sr(L,81),wo=$e?q.error.bind(q,...ie):v.bind(E,524),xo=Ke?q.error.bind(q,...ie):v.bind(E,522),Br=gt?q.error.bind(q,...ie):v.bind(E,521),So=se?q.error.bind(q,...ie):v.bind(E,529),Ps=Ne?q.error.bind(q,...ie):v.bind(E,545),sl=bn?q.warn.bind(q,...de):v.bind(E,268),al=Wt?q.warn.bind(q,...ie):v.bind(E,265),Pd=un?q.warn.bind(q,...ie):v.bind(E,273),tu=qn?q.warn.bind(q,...ie):v.bind(E,273),kd=Xn?q.info.bind(q,...ie):v.bind(E,137),Td=zn?q.info.bind(q,...ie):v.bind(E,145),Li=fr?q.debug.bind(q,...ie):v.bind(E,73),ks=_o?q.debug.bind(q,...ie):v.bind(E,81),Kr={_hmm:wo,_todo:xo,_error:Br,errorDev:So,errorPublic:Ps,_kapow:sl,_warn:al,warnDev:Pd,warnPublic:tu,_debug:kd,debugDev:Td,_trace:Li,traceDev:ks,lazy:{_hmm:$e?Wr(wo):wo,_todo:Ke?Wr(xo):xo,_error:gt?Wr(Br):Br,errorDev:se?Wr(So):So,errorPublic:Ne?Wr(Ps):Ps,_kapow:bn?Wr(sl):sl,_warn:Wt?Wr(al):al,warnDev:un?Wr(Pd):Pd,warnPublic:qn?Wr(tu):tu,_debug:Xn?Wr(kd):kd,debugDev:zn?Wr(Td):Td,_trace:fr?Wr(Li):Li,traceDev:_o?Wr(ks):ks},named:Me,utilFor:{internal(){return{debug:Kr._debug,error:Kr._error,warn:Kr._warn,trace:Kr._trace,named(ll,xa){return Kr.named(ll,xa).utilFor.internal()}}},dev(){return{debug:Kr.debugDev,error:Kr.errorDev,warn:Kr.warnDev,trace:Kr.traceDev,named(ll,xa){return Kr.named(ll,xa).utilFor.dev()}}},public(){return{error:Kr.errorPublic,warn:Kr.warnPublic,debug(ll,xa){Kr._warn('(public "debug" filtered out) '.concat(ll),xa)},trace(ll,xa){Kr._warn('(public "trace" filtered out) '.concat(ll),xa)},named(ll,xa){return Kr.named(ll,xa).utilFor.public()}}}}};return Kr}var ox=u2(console,{_debug:function(){},_error:function(){}});ox.configureLogging({dev:!0,min:64});var X0=ox.getLogger().named("Theatre.js (default logger)").utilFor.dev(),p2=new WeakMap;function f2(v){const E=p2.get(v);if(E)return E;const L=new Map;return p2.set(v,L),m2([],v,L),L}function m2(v,E,L){for(const[q,ie]of Object.entries(E.props))if(!q0(ie)){const de=[...v,q];L.set(JSON.stringify(de),L.size),v2(de,ie,L)}for(const[q,ie]of Object.entries(E.props))if(q0(ie)){const de=[...v,q];L.set(JSON.stringify(de),L.size),v2(de,ie,L)}}function v2(v,E,L){if(E.type==="compound")m2(v,E,L);else{if(E.type==="enum")throw new Error("Enums aren't supported yet");L.set(JSON.stringify(v),L.size)}}function sx(v){return typeof v=="object"&&v!==null&&Object.keys(v).length===0}var tF=class{constructor(v,E,L,q,ie){this.sheetTemplate=v,te(this,"address"),te(this,"type","Theatre_SheetObjectTemplate"),te(this,"_config"),te(this,"_temp_actions_atom"),te(this,"_cache",new $l),te(this,"project"),te(this,"pointerToSheetState"),te(this,"pointerToStaticOverrides"),this.address=Q(H({},v.address),{objectKey:E}),this._config=new Hi.Atom(q),this._temp_actions_atom=new Hi.Atom(ie),this.project=v.project,this.pointerToSheetState=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],this.pointerToStaticOverrides=this.pointerToSheetState.staticOverrides.byObject[this.address.objectKey]}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(v,E,L){return this._config.set(L),new Q5(v,this,E)}reconfigure(v){this._config.set(v)}_temp_setActions(v){this._temp_actions_atom.set(v)}getDefaultValues(){return this._cache.get("getDefaultValues()",()=>(0,Hi.prism)(()=>{const v=(0,Hi.val)(this.configPointer);return Ew(v)}))}getStaticValues(){return this._cache.get("getStaticValues",()=>(0,Hi.prism)(()=>{var v;const E=(v=(0,Hi.val)(this.pointerToStaticOverrides))!=null?v:{};return(0,Hi.val)(this.configPointer).deserializeAndSanitize(E)||{}}))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",()=>(0,Hi.prism)(()=>{const v=this.project.pointers.historic.sheetsById[this.address.sheetId],E=(0,Hi.val)(v.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!E)return Ge;const L=[];if(!E)return Ge;const q=(0,Hi.val)(this.configPointer),ie=Object.entries(E);for(const[Me,$e]of ie){const Ke=nF(Me);if(!Ke)continue;const gt=rx(q,Ke);gt&&ix(gt)&&L.push({pathToProp:Ke,trackId:$e})}const de=f2(q);return L.sort((Me,$e)=>{const Ke=Me.pathToProp,gt=$e.pathToProp,se=de.get(JSON.stringify(Ke)),Ne=de.get(JSON.stringify(gt));return se>Ne?1:-1}),L.length===0?Ge:L}))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",()=>(0,Hi.prism)(()=>{const v=(0,Hi.val)(this.getArrayOfValidSequenceTracks());let E={};for(const{pathToProp:L,trackId:q}of v)Hh(E,L,q);return E}))}getStaticButNotSequencedOverrides(){return this._cache.get("getStaticButNotSequencedOverrides",()=>(0,Hi.prism)(()=>{const v=(0,Hi.val)(this.getStaticValues()),E=(0,Hi.val)(this.getArrayOfValidSequenceTracks()),L=a5(v);for(const{pathToProp:q}of E){o2(L,q);let ie=q.slice(0,-1);for(;ie.length>0;){const de=wm(L,ie);if(!sx(de))break;o2(L,ie),ie=ie.slice(0,-1)}}if(!sx(L))return L}))}getDefaultsAtPointer(v){const{path:E}=(0,Hi.getPointerParts)(v),L=this.getDefaultValues().getValue();return wm(L,E)}};function nF(v){try{return JSON.parse(v)}catch{X0.warn("property ".concat(JSON.stringify(v)," cannot be parsed. Skipping."));return}}var ax=Mt,rF=l2(v=>JSON.stringify(v));C(be());var iF=class extends Error{},ap=class extends iF{},g2=Mt,oF=Mt,y2=Mt,Wi=Mt;function ql(){let v,E;const L=new Promise((ie,de)=>{v=Me=>{ie(Me),q.status="resolved"},E=Me=>{de(Me),q.status="rejected"}}),q={resolve:v,reject:E,promise:L,status:"pending"};return q}var sF=()=>{},Y0=sF,b2=Mt,aF=class{constructor(){te(this,"_stopPlayCallback",Y0),te(this,"_state",new b2.Atom({position:0,playing:!1})),te(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=Y0}gotoPosition(v){this._updatePositionInState(v)}_updatePositionInState(v){this._state.setByPointer(E=>E.position,v)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(v){this._state.setByPointer(E=>E.playing,v)}play(v,E,L,q,ie){this.playing&&this.pause(),this.playing=!0;const de=E[1]-E[0];{const Wt=this.getCurrentPosition();Wt<E[0]||Wt>E[1]?q==="normal"||q==="alternate"?this._updatePositionInState(E[0]):(q==="reverse"||q==="alternateReverse")&&this._updatePositionInState(E[1]):q==="normal"||q==="alternate"?Wt===E[1]&&this._updatePositionInState(E[0]):Wt===E[0]&&this._updatePositionInState(E[1])}const Me=ql(),$e=ie.time,Ke=de*v;let gt=this.getCurrentPosition()-E[0];(q==="reverse"||q==="alternateReverse")&&(gt=E[1]-this.getCurrentPosition());const se=Wt=>{const un=Math.max(Wt-$e,0)/1e3,qn=Math.min(un*L+gt,Ke);if(qn!==Ke){const Xn=Math.floor(qn/de);let zn=qn/de%1*de;if(q!=="normal")if(q==="reverse")zn=de-zn;else{const fr=Xn%2===0;q==="alternate"?fr||(zn=de-zn):fr&&(zn=de-zn)}this._updatePositionInState(zn+E[0]),Ne()}else{if(q==="normal")this._updatePositionInState(E[1]);else if(q==="reverse")this._updatePositionInState(E[0]);else{const Xn=(v-1)%2===0;q==="alternate"?Xn?this._updatePositionInState(E[1]):this._updatePositionInState(E[0]):Xn?this._updatePositionInState(E[0]):this._updatePositionInState(E[1])}this.playing=!1,Me.resolve(!0)}};this._stopPlayCallback=()=>{ie.offThisOrNextTick(se),ie.offNextTick(se),this.playing&&Me.resolve(!1)};const Ne=()=>ie.onNextTick(se);return ie.onThisOrNextTick(se),Me.promise}playDynamicRange(v,E){this.playing&&this.pause(),this.playing=!0;const L=ql(),q=v.keepHot();L.promise.then(q,q);let ie=E.time;const de=$e=>{const Ke=Math.max($e-ie,0);ie=$e;const gt=Ke/1e3,se=this.getCurrentPosition(),Ne=v.getValue();if(se<Ne[0]||se>Ne[1])this.gotoPosition(Ne[0]);else{let Wt=se+gt;Wt>Ne[1]&&(Wt=Ne[0]+(Wt-Ne[1])),this.gotoPosition(Wt)}Me()};this._stopPlayCallback=()=>{E.offThisOrNextTick(de),E.offNextTick(de),L.resolve(!1)};const Me=()=>E.onNextTick(de);return E.onThisOrNextTick(de),L.promise}},_2=Mt,w2="__TheatreJS_StudioBundle",lx="__TheatreJS_CoreBundle",x2="__TheatreJS_Notifications",qm=v=>(...E)=>{var L;switch(v){case"success":{X0.debug(E.slice(0,2).join(`
`));break}case"info":{X0.debug(E.slice(0,2).join(`
`));break}case"warning":{X0.warn(E.slice(0,2).join(`
`));break}}return typeof window<"u"?(L=window[x2])==null?void 0:L.notify[v](...E):void 0},lp={warning:qm("warning"),success:qm("success"),info:qm("info"),error:qm("error")};typeof window<"u"&&(window.addEventListener("error",v=>{lp.error("An error occurred","<pre>".concat(v.message,`</pre>

See **console** for details.`))}),window.addEventListener("unhandledrejection",v=>{lp.error("An error occurred","<pre>".concat(v.reason,`</pre>

See **console** for details.`))}));var lF=class{constructor(v,E,L){this._decodedBuffer=v,this._audioContext=E,this._nodeDestination=L,te(this,"_mainGain"),te(this,"_state",new _2.Atom({position:0,playing:!1})),te(this,"statePointer"),te(this,"_stopPlayCallback",Y0),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(v,E){const L=ql();this._playing&&this.pause(),this._playing=!0;let q;const ie=()=>{q==null||q(),q=this._loopInRange(v.getValue(),E).stop},de=v.onStale(ie);return ie(),this._stopPlayCallback=()=>{q==null||q(),de(),L.resolve(!1)},L.promise}_loopInRange(v,E){let q=this.getCurrentPosition();const ie=v[1]-v[0];q<v[0]||q>v[1]?this._updatePositionInState(v[0]):q===v[1]&&this._updatePositionInState(v[0]),q=this.getCurrentPosition();const de=this._audioContext.createBufferSource();de.buffer=this._decodedBuffer,de.connect(this._mainGain),de.playbackRate.value=1,de.loop=!0,de.loopStart=v[0],de.loopEnd=v[1];const Me=E.time;let $e=q-v[0];de.start(0,q);const Ke=Ne=>{let qn=(Math.max(Ne-Me,0)/1e3*1+$e)/ie%1*ie;this._updatePositionInState(qn+v[0]),gt()},gt=()=>E.onNextTick(Ke);return E.onThisOrNextTick(Ke),{stop:()=>{de.stop(),de.disconnect(),E.offThisOrNextTick(Ke),E.offNextTick(Ke)}}}get _playing(){return this._state.get().playing}set _playing(v){this._state.setByPointer(E=>E.playing,v)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=Y0}gotoPosition(v){this._updatePositionInState(v)}_updatePositionInState(v){this._state.reduce(E=>Q(H({},E),{position:v}))}getCurrentPosition(){return this._state.get().position}play(v,E,L,q,ie){this._playing&&this.pause(),this._playing=!0;let de=this.getCurrentPosition();const Me=E[1]-E[0];if(q!=="normal")throw new ap('Audio-controlled sequences can only be played in the "normal" direction. '+"'".concat(q,"' given."));de<E[0]||de>E[1]?this._updatePositionInState(E[0]):de===E[1]&&this._updatePositionInState(E[0]),de=this.getCurrentPosition();const $e=ql(),Ke=this._audioContext.createBufferSource();Ke.buffer=this._decodedBuffer,Ke.connect(this._mainGain),Ke.playbackRate.value=L,v>1e3&&(lp.warning("Can't play sequences with audio more than 1000 times","The sequence will still play, but only 1000 times. The `iterationCount: ".concat(v,"` provided to `sequence.play()`\nis too high for a sequence with audio.\n\nTo fix this, either set `iterationCount` to a lower value, or remove the audio from the sequence."),[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),v=1e3),v>1&&(Ke.loop=!0,Ke.loopStart=E[0],Ke.loopEnd=E[1]);const gt=ie.time;let se=de-E[0];const Ne=Me*v;Ke.start(0,de,Ne-se);const Wt=qn=>{const zn=Math.max(qn-gt,0)/1e3,fr=Math.min(zn*L+se,Ne);if(fr!==Ne){let _o=fr/Me%1*Me;this._updatePositionInState(_o+E[0]),un()}else this._updatePositionInState(E[1]),this._playing=!1,bn(),$e.resolve(!0)},bn=()=>{Ke.stop(),Ke.disconnect()};this._stopPlayCallback=()=>{bn(),ie.offThisOrNextTick(Wt),ie.offNextTick(Wt),this._playing&&$e.resolve(!1)};const un=()=>ie.onNextTick(Wt);return ie.onThisOrNextTick(Wt),$e.promise}},up=Mt,Z0=0;function Q0(v){var E;const L=Me=>{q.tick(Me)},q=new up.Ticker({onActive(){var Me;(Me=v==null?void 0:v.start)==null||Me.call(v)},onDormant(){var Me;(Me=v==null?void 0:v.stop)==null||Me.call(v)}}),ie={tick:L,id:Z0++,name:(E=v==null?void 0:v.name)!=null?E:"CustomRafDriver-".concat(Z0),type:"Theatre_RafDriver_PublicAPI"},de={type:"Theatre_RafDriver_PrivateAPI",publicApi:ie,ticker:q,start:v==null?void 0:v.start,stop:v==null?void 0:v.stop};return vt(ie,de),ie}function S2(){let v=null;const q=Q0({name:"DefaultCoreRafDriver",start:()=>{if(typeof window<"u"){const ie=de=>{q.tick(de),v=window.requestAnimationFrame(ie)};v=window.requestAnimationFrame(ie)}else q.tick(0),setTimeout(()=>q.tick(1),0)},stop:()=>{typeof window<"u"&&v!==null&&window.cancelAnimationFrame(v)}});return q}var J0;function ux(){return J0||E2(S2()),J0}function cx(){return ux().ticker}function E2(v){if(J0)throw new Error("`setCoreRafDriver()` is already called.");J0=Fe(v)}var uF=class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(v){vt(this,v)}play(v){const E=Fe(this);if(E._project.isReady()){const L=v!=null&&v.rafDriver?Fe(v.rafDriver).ticker:cx();return E.play(v??{},L)}else{const L=ql();return L.resolve(!0),L.promise}}pause(){Fe(this).pause()}get position(){return Fe(this).position}set position(v){Fe(this).position=v}__experimental_getKeyframes(v){return Fe(this).getKeyframesOfSimpleProp(v)}async attachAudio(v){const{audioContext:E,destinationNode:L,decodedBuffer:q,gainNode:ie}=await cF(v),de=new lF(q,E,ie);return Fe(this).replacePlaybackController(de),{audioContext:E,destinationNode:L,decodedBuffer:q,gainNode:ie}}get pointer(){return Fe(this).pointer}};async function cF(v){function E(){if(v.audioContext)return Promise.resolve(v.audioContext);const gt=new AudioContext;return gt.state==="running"||typeof window>"u"?Promise.resolve(gt):new Promise(se=>{const Ne=()=>{gt.resume().catch(un=>{console.error(un)})},Wt=["mousedown","keydown","touchstart"],bn={capture:!0,passive:!1};Wt.forEach(un=>{window.addEventListener(un,Ne,bn)}),gt.addEventListener("statechange",()=>{gt.state==="running"&&(Wt.forEach(un=>{window.removeEventListener(un,Ne,bn)}),se(gt))})})}async function L(){if(v.source instanceof AudioBuffer)return v.source;const gt=ql();if(typeof v.source!="string")throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let se;try{se=await fetch(v.source)}catch(un){throw console.error(un),new Error("Could not fetch '".concat(v.source,"'. Network error logged above."))}let Ne;try{Ne=await se.arrayBuffer()}catch(un){throw console.error(un),new Error("Could not read '".concat(v.source,"' as an arrayBuffer."))}(await q).decodeAudioData(Ne,gt.resolve,gt.reject);let bn;try{bn=await gt.promise}catch(un){throw console.error(un),new Error("Could not decode ".concat(v.source," as an audio file."))}return bn}const q=E(),ie=L(),[de,Me]=await Promise.all([q,ie]),$e=v.destinationNode||de.destination,Ke=de.createGain();return Ke.connect($e),{audioContext:de,decodedBuffer:Me,gainNode:Ke,destinationNode:$e}}var C2=P2("Theatre_SheetObject");function P2(v){return E=>typeof E=="object"&&!!E&&E.type===v}var dF=class{constructor(v,E,L,q,ie){this._project=v,this._sheet=E,this._lengthD=L,this._subUnitsPerUnitD=q,te(this,"address"),te(this,"publicApi"),te(this,"_playbackControllerBox"),te(this,"_prismOfStatePointer"),te(this,"_positionD"),te(this,"_positionFormatterD"),te(this,"_playableRangeD"),te(this,"pointer",(0,y2.pointer)({root:this,path:[]})),te(this,"$$isPointerToPrismProvider",!0),te(this,"_logger"),te(this,"closestGridPosition",de=>{const $e=1/this.subUnitsPerUnit;return parseFloat((Math.round(de/$e)*$e).toFixed(3))}),this._logger=v._logger.named("Sheet",E.address.sheetId).named("Instance",E.address.sheetInstanceId),this.address=Q(H({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new uF(this),this._playbackControllerBox=new oF.Atom(ie??new aF),this._prismOfStatePointer=(0,Wi.prism)(()=>this._playbackControllerBox.prism.getValue().statePointer),this._positionD=(0,Wi.prism)(()=>{const de=this._prismOfStatePointer.getValue();return(0,Wi.val)(de.position)}),this._positionFormatterD=(0,Wi.prism)(()=>{const de=(0,Wi.val)(this._subUnitsPerUnitD);return new hF(de)})}pointerToPrism(v){const{path:E}=(0,g2.getPointerParts)(v);if(E.length===0)return(0,Wi.prism)(()=>({length:(0,Wi.val)(this.pointer.length),playing:(0,Wi.val)(this.pointer.playing),position:(0,Wi.val)(this.pointer.position)}));if(E.length>1)return(0,Wi.prism)(()=>{});const[L]=E;return L==="length"?this._lengthD:L==="position"?this._positionD:L==="playing"?(0,Wi.prism)(()=>(0,Wi.val)(this._prismOfStatePointer.getValue().playing)):(0,Wi.prism)(()=>{})}getKeyframesOfSimpleProp(v){const{path:E,root:L}=(0,g2.getPointerParts)(v);if(!C2(L))throw new ap("Argument prop must be a pointer to a SheetObject property");const q=(0,Wi.val)(this._project.pointers.historic.sheetsById[this._sheet.address.sheetId].sequence.tracksByObject[L.address.objectKey]);if(!q)return[];const{trackData:ie,trackIdByPropPath:de}=q,Me=rF(E),$e=de[Me];if(!$e)return[];const Ke=ie[$e];return Ke?Ke.keyframes:[]}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(v){let E=v;this.pause(),E>this.length&&(E=this.length);const L=this.length;this._playbackControllerBox.get().gotoPosition(E>L?L:E)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,Wi.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,Wi.prism)(()=>[0,(0,Wi.val)(this._lengthD)])}playDynamicRange(v,E){return this._playbackControllerBox.get().playDynamicRange(v,E)}async play(v,E){const L=this.length,q=v&&v.range?v.range:[0,L],ie=v&&typeof v.iterationCount=="number"?v.iterationCount:1,de=v&&typeof v.rate<"u"?v.rate:1,Me=v&&v.direction?v.direction:"normal";return await this._play(ie,[q[0],q[1]],de,Me,E)}_play(v,E,L,q,ie){return this._playbackControllerBox.get().play(v,E,L,q,ie)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(v){this.pause();const E=this._playbackControllerBox.get();this._playbackControllerBox.set(v);const L=E.getCurrentPosition();E.destroy(),v.gotoPosition(L)}},hF=class{constructor(v){this._fps=v}formatSubUnitForGrid(v){const E=v%1,L=1/this._fps;return Math.round(E/L)+"f"}formatFullUnitForGrid(v){let E=v,L="";if(E>=Jr){const ie=Math.floor(E/Jr);L+=ie+"h",E=E%Jr}if(E>=_d){const ie=Math.floor(E/_d);L+=ie+"m",E=E%_d}if(E>=rs){const ie=Math.floor(E/rs);L+=ie+"s",E=E%rs}const q=1/this._fps;if(E>=q){const ie=Math.floor(E/q);L+=ie+"f",E=E%q}return L.length===0?"0s":L}formatForPlayhead(v){let E=v,L="";if(E>=Jr){const ie=Math.floor(E/Jr);L+=sp(ie.toString(),2,"0")+"h",E=E%Jr}if(E>=_d){const ie=Math.floor(E/_d);L+=sp(ie.toString(),2,"0")+"m",E=E%_d}else L.length>0&&(L+="00m");if(E>=rs){const ie=Math.floor(E/rs);L+=sp(ie.toString(),2,"0")+"s",E=E%rs}else L+="00s";const q=1/this._fps;if(E>=q){const ie=Math.round(E/q);L+=sp(ie.toString(),2,"0")+"f",E=E%q}else E/q>.98?(L+=sp(1 .toString(),2,"0")+"f",E=E%q):L+="00f";return L.length===0?"00s00f":L}formatBasic(v){return v.toFixed(2)+"s"}},rs=1,_d=rs*60,Jr=_d*60,dx={};z(dx,{boolean:()=>vx,compound:()=>Yl,file:()=>$n,image:()=>_a,number:()=>Xm,rgba:()=>hn,string:()=>O2,stringLiteral:()=>L2});function k2(v,E){return v.length<=E?v:v.substr(0,E-3)+"..."}var Re=v=>typeof v=="string"?'string("'.concat(k2(v,10),'")'):typeof v=="number"?"number(".concat(k2(String(v),10),")"):v===null?"null":v===void 0?"undefined":typeof v=="boolean"?String(v):Array.isArray(v)?"array":typeof v=="object"?"object":"unknown",T2=Re;function pF(v,{removeAlphaIfOpaque:E=!1}={}){const L=(v.a*255|256).toString(16).slice(1),q=(v.r*255|256).toString(16).slice(1)+(v.g*255|256).toString(16).slice(1)+(v.b*255|256).toString(16).slice(1)+(E&&L==="ff"?"":L);return"#".concat(q)}function hx(v){return Q(H({},v),{toString(){return pF(this,{removeAlphaIfOpaque:!0})}})}function Xl(v){return Object.fromEntries(Object.entries(v).map(([E,L])=>[E,l1(L,0,1)]))}function fF(v){function E(L){return L>=.0031308?1.055*L**(1/2.4)-.055:12.92*L}return Xl({r:E(v.r),g:E(v.g),b:E(v.b),a:v.a})}function Un(v){function E(L){return L>=.04045?((L+.055)/(1+.055))**2.4:L/12.92}return{r:E(v.r),g:E(v.g),b:E(v.b),a:v.a}}function M2(v){let E=.4122214708*v.r+.5363325363*v.g+.0514459929*v.b,L=.2119034982*v.r+.6806995451*v.g+.1073969566*v.b,q=.0883024619*v.r+.2817188376*v.g+.6299787005*v.b,ie=Math.cbrt(E),de=Math.cbrt(L),Me=Math.cbrt(q);return{L:.2104542553*ie+.793617785*de-.0040720468*Me,a:1.9779984951*ie-2.428592205*de+.4505937099*Me,b:.0259040371*ie+.7827717662*de-.808675766*Me,alpha:v.a}}function ey(v){let E=v.L+.3963377774*v.a+.2158037573*v.b,L=v.L-.1055613458*v.a-.0638541728*v.b,q=v.L-.0894841775*v.a-1.291485548*v.b,ie=E*E*E,de=L*L*L,Me=q*q*q;return{r:4.0767416621*ie-3.3077115913*de+.2309699292*Me,g:-1.2684380046*ie+2.6097574011*de-.3413193965*Me,b:-.0041960863*ie-.7034186147*de+1.707614701*Me,a:v.alpha}}var Js=Symbol("TheatrePropType_Basic");function px(v){return typeof v=="object"&&!!v&&v[Js]==="TheatrePropType"}function rc(v){if(typeof v=="number")return Xm(v);if(typeof v=="boolean")return vx(v);if(typeof v=="string")return O2(v);if(typeof v=="object"&&v){if(px(v))return v;if(QL(v))return Yl(v);throw new ap("This value is not a valid prop type: ".concat(T2(v)))}else throw new ap("This value is not a valid prop type: ".concat(T2(v)))}function A2(v){const E={};for(const L of Object.keys(v)){const q=v[L];px(q)?E[L]=q:E[L]=rc(q)}return E}var Yl=(v,E={})=>{const L=A2(v),q=new WeakMap;return{type:"compound",props:L,valueType:null,[Js]:"TheatrePropType",label:E.label,default:V5(L,de=>de.default),deserializeAndSanitize:de=>{if(typeof de!="object"||!de)return;if(q.has(de))return q.get(de);const Me={};let $e=!1;for(const[Ke,gt]of Object.entries(L))if(Object.prototype.hasOwnProperty.call(de,Ke)){const se=gt.deserializeAndSanitize(de[Ke]);se!=null&&($e=!0,Me[Ke]=se)}if(q.set(de,Me),$e)return Me}}},$n=(v,E={})=>{const L=(q,ie,de)=>{var Me;return{type:"file",id:((Me=E.interpolate)!=null?Me:dp)(q.id,ie.id,de)}};return{type:"file",default:{type:"file",id:v},valueType:null,[Js]:"TheatrePropType",label:E.label,interpolate:L,deserializeAndSanitize:fx}},fx=v=>{if(!v)return;let E=!0;if(typeof v.id!="string"&&![null,void 0].includes(v.id)&&(E=!1),v.type!=="file"&&(E=!1),!!E)return v},_a=(v,E={})=>{const L=(q,ie,de)=>{var Me;return{type:"image",id:((Me=E.interpolate)!=null?Me:dp)(q.id,ie.id,de)}};return{type:"image",default:{type:"image",id:v},valueType:null,[Js]:"TheatrePropType",label:E.label,interpolate:L,deserializeAndSanitize:cp}},cp=v=>{if(!v)return;let E=!0;if(typeof v.id!="string"&&![null,void 0].includes(v.id)&&(E=!1),v.type!=="image"&&(E=!1),!!E)return v},Xm=(v,E={})=>{var L;return Q(H({type:"number",valueType:0,default:v,[Js]:"TheatrePropType"},E||{}),{label:E.label,nudgeFn:(L=E.nudgeFn)!=null?L:yF,nudgeMultiplier:typeof E.nudgeMultiplier=="number"?E.nudgeMultiplier:void 0,interpolate:mx,deserializeAndSanitize:I2(E.range)})},I2=v=>v?E=>{if(typeof E=="number"&&isFinite(E))return l1(E,v[0],v[1])}:R2,R2=v=>typeof v=="number"&&isFinite(v)?v:void 0,mx=(v,E,L)=>v+L*(E-v),hn=(v={r:0,g:0,b:0,a:1},E={})=>{const L={};for(const q of["r","g","b","a"])L[q]=Math.min(Math.max(v[q],0),1);return{type:"rgba",valueType:null,default:hx(L),[Js]:"TheatrePropType",label:E.label,interpolate:vF,deserializeAndSanitize:mF}},mF=v=>{if(!v)return;let E=!0;for(const q of["r","g","b","a"])(!Object.prototype.hasOwnProperty.call(v,q)||typeof v[q]!="number")&&(E=!1);if(!E)return;const L={};for(const q of["r","g","b","a"])L[q]=Math.min(Math.max(v[q],0),1);return hx(L)},vF=(v,E,L)=>{const q=M2(Un(v)),ie=M2(Un(E)),de={L:(1-L)*q.L+L*ie.L,a:(1-L)*q.a+L*ie.a,b:(1-L)*q.b+L*ie.b,alpha:(1-L)*q.alpha+L*ie.alpha},Me=fF(ey(de));return hx(Me)},vx=(v,E={})=>{var L;return{type:"boolean",default:v,valueType:null,[Js]:"TheatrePropType",label:E.label,interpolate:(L=E.interpolate)!=null?L:dp,deserializeAndSanitize:gF}},gF=v=>typeof v=="boolean"?v:void 0;function dp(v){return v}var O2=(v,E={})=>{var L;return{type:"string",default:v,valueType:null,[Js]:"TheatrePropType",label:E.label,interpolate:(L=E.interpolate)!=null?L:dp,deserializeAndSanitize:D2}};function D2(v){return typeof v=="string"?v:void 0}function L2(v,E,L={}){var q,ie;return{type:"stringLiteral",default:v,valuesAndLabels:H({},E),[Js]:"TheatrePropType",valueType:null,as:(q=L.as)!=null?q:"menu",label:L.label,interpolate:(ie=L.interpolate)!=null?ie:dp,deserializeAndSanitize(de){if(typeof de=="string"&&Object.prototype.hasOwnProperty.call(E,de))return de}}}var yF=({config:v,deltaX:E,deltaFraction:L,magnitude:q})=>{var ie;const{range:de}=v;return!v.nudgeMultiplier&&de&&!de.includes(1/0)&&!de.includes(-1/0)?L*(de[1]-de[0])*q:E*q*((ie=v.nudgeMultiplier)!=null?ie:1)},bF=v=>v.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");function ty(v,E){return bF(v)}C(Pe());var _F=class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(v){vt(this,v)}object(v,E,L){const q=Fe(this),ie=ty(v),de=q.getObject(ie),Me=null,$e=L==null?void 0:L.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(de)return $e&&de.template._temp_setActions($e),de.publicApi;{const Ke=Yl(E);return q.createObject(ie,Me,Ke,$e).publicApi}}get sequence(){return Fe(this).getSequence().publicApi}get project(){return Fe(this).project.publicApi}get address(){return H({},Fe(this).address)}detachObject(v){const E=Fe(this),L=ty(v);if(!E.getObject(L)){lp.warning(`Couldn't delete object "`.concat(L,'"'),'There is no object with key "'.concat(L,`".

To fix this, make sure you are calling \`sheet.deleteObject("`).concat(L,'")` with the correct key.')),console.warn('Object key "'.concat(L,'" does not exist.'));return}E.deleteObject(L)}},hp=Mt,N2=class{constructor(v,E){this.template=v,this.instanceId=E,te(this,"_objects",new hp.Atom({})),te(this,"_sequence"),te(this,"address"),te(this,"publicApi"),te(this,"project"),te(this,"objectsP",this._objects.pointer),te(this,"type","Theatre_Sheet"),te(this,"_logger"),this._logger=v.project._logger.named("Sheet",E),this._logger._trace("creating sheet"),this.project=v.project,this.address=Q(H({},v.address),{sheetInstanceId:this.instanceId}),this.publicApi=new _F(this)}createObject(v,E,L,q={}){const de=this.template.getObjectTemplate(v,E,L,q).createInstance(this,E,L);return this._objects.setByPointer(Me=>Me[v],de),de}getObject(v){return this._objects.get()[v]}deleteObject(v){this._objects.reduce(E=>{const L=H({},E);return delete L[v],L})}getSequence(){if(!this._sequence){const v=(0,hp.prism)(()=>{const L=(0,hp.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length);return gx(L)}),E=(0,hp.prism)(()=>{const L=(0,hp.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit);return wF(L)});this._sequence=new dF(this.template.project,this,v,E)}return this._sequence}},gx=v=>typeof v=="number"&&isFinite(v)&&v>0?v:10,wF=v=>typeof v=="number"&&Z1(v)&&v>=1&&v<=1e3?v:30,xF=class{constructor(v,E){this.project=v,te(this,"type","Theatre_SheetTemplate"),te(this,"address"),te(this,"_instances",new ax.Atom({})),te(this,"instancesP",this._instances.pointer),te(this,"_objectTemplates",new ax.Atom({})),te(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=Q(H({},v.address),{sheetId:E})}getInstance(v){let E=this._instances.get()[v];return E||(E=new N2(this,v),this._instances.setByPointer(L=>L[v],E)),E}getObjectTemplate(v,E,L,q){let ie=this._objectTemplates.get()[v];return ie||(ie=new tF(this,v,E,L,q),this._objectTemplates.setByPointer(de=>de[v],ie)),ie}},yx=Mt,F2=Mt,wa=v=>new Promise(E=>setTimeout(E,v)),Ym=wa;function Cs(v){for(var E=arguments.length,L=Array(E>1?E-1:0),q=1;q<E;q++)L[q-1]=arguments[q];throw Error("[Immer] minified error nr: "+v+(L.length?" "+L.map(function(ie){return"'"+ie+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Zl(v){return!!v&&!!v[Fo]}function Lo(v){return!!v&&(function(E){if(!E||typeof E!="object")return!1;var L=Object.getPrototypeOf(E);if(L===null)return!0;var q=Object.hasOwnProperty.call(L,"constructor")&&L.constructor;return q===Object||typeof q=="function"&&Function.toString.call(q)===H2}(v)||Array.isArray(v)||!!v[cy]||!!v.constructor[cy]||Ql(v)||No(v))}function bx(v){return Zl(v)||Cs(23,v),v[Fo].t}function pp(v,E,L){L===void 0&&(L=!1),wd(v)===0?(L?Object.keys:dy)(v).forEach(function(q){L&&typeof q=="symbol"||E(q,v[q],v)}):v.forEach(function(q,ie){return E(ie,q,v)})}function wd(v){var E=v[Fo];return E?E.i>3?E.i-4:E.i:Array.isArray(v)?1:Ql(v)?2:No(v)?3:0}function Zm(v,E){return wd(v)===2?v.has(E):Object.prototype.hasOwnProperty.call(v,E)}function B2(v,E){return wd(v)===2?v.get(E):v[E]}function _x(v,E,L){var q=wd(v);q===2?v.set(E,L):q===3?(v.delete(E),v.add(L)):v[E]=L}function U2(v,E){return v===E?v!==0||1/v==1/E:v!=v&&E!=E}function Ql(v){return j2&&v instanceof Map}function No(v){return z2&&v instanceof Set}function Jl(v){return v.o||v.t}function fp(v){if(Array.isArray(v))return Array.prototype.slice.call(v);var E=Cx(v);delete E[Fo];for(var L=dy(E),q=0;q<L.length;q++){var ie=L[q],de=E[ie];de.writable===!1&&(de.writable=!0,de.configurable=!0),(de.get||de.set)&&(E[ie]={configurable:!0,writable:!0,enumerable:de.enumerable,value:v[ie]})}return Object.create(Object.getPrototypeOf(v),E)}function wx(v,E){return E===void 0&&(E=!1),ny(v)||Zl(v)||!Lo(v)||(wd(v)>1&&(v.set=v.add=v.clear=v.delete=V2),Object.freeze(v),E&&pp(v,function(L,q){return wx(q,!0)},!0)),v}function V2(){Cs(2)}function ny(v){return v==null||typeof v!="object"||Object.isFrozen(v)}function il(v){var E=G2[v];return E||Cs(18,v),E}function ry(){return gp}function ui(v,E){E&&(il("Patches"),v.u=[],v.s=[],v.v=E)}function Qm(v){iy(v),v.p.forEach(sy),v.p=null}function iy(v){v===gp&&(gp=v.l)}function oy(v){return gp={p:[],l:gp,h:v,m:!0,_:0}}function sy(v){var E=v[Fo];E.i===0||E.i===1?E.j():E.O=!0}function xd(v,E){E._=E.p.length;var L=E.p[0],q=v!==void 0&&v!==L;return E.h.g||il("ES5").S(E,v,q),q?(L[Fo].P&&(Qm(E),Cs(4)),Lo(v)&&(v=ea(E,v),E.l||Sd(E,v)),E.u&&il("Patches").M(L[Fo],v,E.u,E.s)):v=ea(E,L,[]),Qm(E),E.u&&E.v(E.u,E.s),v!==Jm?v:void 0}function ea(v,E,L){if(ny(E))return E;var q=E[Fo];if(!q)return pp(E,function(de,Me){return ol(v,q,E,de,Me,L)},!0),E;if(q.A!==v)return E;if(!q.P)return Sd(v,q.t,!0),q.t;if(!q.I){q.I=!0,q.A._--;var ie=q.i===4||q.i===5?q.o=fp(q.k):q.o;pp(q.i===3?new Set(ie):ie,function(de,Me){return ol(v,q,ie,de,Me,L)}),Sd(v,ie,!1),L&&v.u&&il("Patches").R(q,L,v.u,v.s)}return q.o}function ol(v,E,L,q,ie,de){if(Zl(ie)){var Me=ea(v,ie,de&&E&&E.i!==3&&!Zm(E.D,q)?de.concat(q):void 0);if(_x(L,q,Me),!Zl(Me))return;v.m=!1}if(Lo(ie)&&!ny(ie)){if(!v.h.F&&v._<1)return;ea(v,ie),E&&E.A.l||Sd(v,ie)}}function Sd(v,E,L){L===void 0&&(L=!1),v.h.F&&v.m&&wx(E,L)}function ay(v,E){var L=v[Fo];return(L?Jl(L):v)[E]}function xx(v,E){if(E in v)for(var L=Object.getPrototypeOf(v);L;){var q=Object.getOwnPropertyDescriptor(L,E);if(q)return q;L=Object.getPrototypeOf(L)}}function ly(v){v.P||(v.P=!0,v.l&&ly(v.l))}function Ed(v){v.o||(v.o=fp(v.t))}function Cd(v,E,L){var q=Ql(E)?il("MapSet").N(E,L):No(E)?il("MapSet").T(E,L):v.g?function(ie,de){var Me=Array.isArray(ie),$e={i:Me?1:0,A:de?de.A:ry(),P:!1,I:!1,D:{},l:de,t:ie,k:null,o:null,j:null,C:!1},Ke=$e,gt=eu;Me&&(Ke=[$e],gt=ev);var se=Proxy.revocable(Ke,gt),Ne=se.revoke,Wt=se.proxy;return $e.k=Wt,$e.j=Ne,Wt}(E,L):il("ES5").J(E,L);return(L?L.A:ry()).p.push(q),q}function mp(v){return Zl(v)||Cs(22,v),function E(L){if(!Lo(L))return L;var q,ie=L[Fo],de=wd(L);if(ie){if(!ie.P&&(ie.i<4||!il("ES5").K(ie)))return ie.t;ie.I=!0,q=vp(L,de),ie.I=!1}else q=vp(L,de);return pp(q,function(Me,$e){ie&&B2(ie.t,Me)===$e||_x(q,Me,E($e))}),de===3?new Set(q):q}(v)}function vp(v,E){switch(E){case 2:return new Map(v);case 3:return Array.from(v)}return fp(v)}var Sx,gp,uy=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",j2=typeof Map<"u",z2=typeof Set<"u",Ex=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Jm=uy?Symbol.for("immer-nothing"):((Sx={})["immer-nothing"]=!0,Sx),cy=uy?Symbol.for("immer-draftable"):"__$immer_draftable",Fo=uy?Symbol.for("immer-state"):"__$immer_state",H2=""+Object.prototype.constructor,dy=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:Object.getOwnPropertyNames,Cx=Object.getOwnPropertyDescriptors||function(v){var E={};return dy(v).forEach(function(L){E[L]=Object.getOwnPropertyDescriptor(v,L)}),E},G2={},eu={get:function(v,E){if(E===Fo)return v;var L=Jl(v);if(!Zm(L,E))return function(ie,de,Me){var $e,Ke=xx(de,Me);return Ke?"value"in Ke?Ke.value:($e=Ke.get)===null||$e===void 0?void 0:$e.call(ie.k):void 0}(v,L,E);var q=L[E];return v.I||!Lo(q)?q:q===ay(v.t,E)?(Ed(v),v.o[E]=Cd(v.A.h,q,v)):q},has:function(v,E){return E in Jl(v)},ownKeys:function(v){return Reflect.ownKeys(Jl(v))},set:function(v,E,L){var q=xx(Jl(v),E);if(q!=null&&q.set)return q.set.call(v.k,L),!0;if(!v.P){var ie=ay(Jl(v),E),de=ie==null?void 0:ie[Fo];if(de&&de.t===L)return v.o[E]=L,v.D[E]=!1,!0;if(U2(L,ie)&&(L!==void 0||Zm(v.t,E)))return!0;Ed(v),ly(v)}return v.o[E]===L&&typeof L!="number"&&(L!==void 0||E in v.o)||(v.o[E]=L,v.D[E]=!0,!0)},deleteProperty:function(v,E){return ay(v.t,E)!==void 0||E in v.t?(v.D[E]=!1,Ed(v),ly(v)):delete v.D[E],v.o&&delete v.o[E],!0},getOwnPropertyDescriptor:function(v,E){var L=Jl(v),q=Reflect.getOwnPropertyDescriptor(L,E);return q&&{writable:!0,configurable:v.i!==1||E!=="length",enumerable:q.enumerable,value:L[E]}},defineProperty:function(){Cs(11)},getPrototypeOf:function(v){return Object.getPrototypeOf(v.t)},setPrototypeOf:function(){Cs(12)}},ev={};pp(eu,function(v,E){ev[v]=function(){return arguments[0]=arguments[0][0],E.apply(this,arguments)}}),ev.deleteProperty=function(v,E){return eu.deleteProperty.call(this,v[0],E)},ev.set=function(v,E,L){return eu.set.call(this,v[0],E,L,v[0])};var Px=function(){function v(L){var q=this;this.g=Ex,this.F=!0,this.produce=function(ie,de,Me){if(typeof ie=="function"&&typeof de!="function"){var $e=de;de=ie;var Ke=q;return function(bn){var un=this;bn===void 0&&(bn=$e);for(var qn=arguments.length,Xn=Array(qn>1?qn-1:0),zn=1;zn<qn;zn++)Xn[zn-1]=arguments[zn];return Ke.produce(bn,function(fr){var _o;return(_o=de).call.apply(_o,[un,fr].concat(Xn))})}}var gt;if(typeof de!="function"&&Cs(6),Me!==void 0&&typeof Me!="function"&&Cs(7),Lo(ie)){var se=oy(q),Ne=Cd(q,ie,void 0),Wt=!0;try{gt=de(Ne),Wt=!1}finally{Wt?Qm(se):iy(se)}return typeof Promise<"u"&&gt instanceof Promise?gt.then(function(bn){return ui(se,Me),xd(bn,se)},function(bn){throw Qm(se),bn}):(ui(se,Me),xd(gt,se))}if(!ie||typeof ie!="object")return(gt=de(ie))===Jm?void 0:(gt===void 0&&(gt=ie),q.F&&wx(gt,!0),gt);Cs(21,ie)},this.produceWithPatches=function(ie,de){return typeof ie=="function"?function(Ke){for(var gt=arguments.length,se=Array(gt>1?gt-1:0),Ne=1;Ne<gt;Ne++)se[Ne-1]=arguments[Ne];return q.produceWithPatches(Ke,function(Wt){return ie.apply(void 0,[Wt].concat(se))})}:[q.produce(ie,de,function(Ke,gt){Me=Ke,$e=gt}),Me,$e];var Me,$e},typeof(L==null?void 0:L.useProxies)=="boolean"&&this.setUseProxies(L.useProxies),typeof(L==null?void 0:L.autoFreeze)=="boolean"&&this.setAutoFreeze(L.autoFreeze)}var E=v.prototype;return E.createDraft=function(L){Lo(L)||Cs(8),Zl(L)&&(L=mp(L));var q=oy(this),ie=Cd(this,L,void 0);return ie[Fo].C=!0,iy(q),ie},E.finishDraft=function(L,q){var ie=L&&L[Fo],de=ie.A;return ui(de,q),xd(void 0,de)},E.setAutoFreeze=function(L){this.F=L},E.setUseProxies=function(L){L&&!Ex&&Cs(20),this.g=L},E.applyPatches=function(L,q){var ie;for(ie=q.length-1;ie>=0;ie--){var de=q[ie];if(de.path.length===0&&de.op==="replace"){L=de.value;break}}var Me=il("Patches").$;return Zl(L)?Me(L,q):this.produce(L,function($e){return Me($e,q.slice(ie+1))})},v}(),Ki=new Px;Ki.produce,Ki.produceWithPatches.bind(Ki),Ki.setAutoFreeze.bind(Ki),Ki.setUseProxies.bind(Ki),Ki.applyPatches.bind(Ki),Ki.createDraft.bind(Ki),Ki.finishDraft.bind(Ki);var kx={currentProjectStateDefinitionVersion:"0.4.0"},hy=kx;async function $2(v,E,L){await Ym(0),v.transaction(({drafts:q})=>{var ie;const de=E.address.projectId;q.ephemeral.coreByProject[de]={lastExportedObject:null,loadingState:{type:"loading"}},q.ahistoric.coreByProject[de]={ahistoricStuff:""};function Me(){q.ephemeral.coreByProject[de].loadingState={type:"loaded"},q.historic.coreByProject[de]={sheetsById:{},definitionVersion:hy.currentProjectStateDefinitionVersion,revisionHistory:[]}}function $e(Ne){q.ephemeral.coreByProject[de].loadingState={type:"loaded"},q.historic.coreByProject[de]=Ne}function Ke(){q.ephemeral.coreByProject[de].loadingState={type:"loaded"}}function gt(Ne){q.ephemeral.coreByProject[de].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:Ne}}const se=(ie=bx(q.historic))==null?void 0:ie.coreByProject[E.address.projectId];se?L&&se.revisionHistory.indexOf(L.revisionHistory[0])==-1?gt(L):Ke():L?$e(L):Me()})}function Tx(){}function Mx(v){var E,L;const q=(E=v==null?void 0:v.logging)!=null&&E.internal?(L=v.logging.min)!=null?L:256:1/0,ie=q<=128,de=q<=512,Me=u2(void 0,{_debug:ie?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):Tx,_error:de?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):Tx});if(v){const{logger:$e,logging:Ke}=v;$e&&Me.configureLogger($e),Ke?Me.configureLogging(Ke):Me.configureLogging({dev:!1})}return Me.getLogger().named("Theatre")}var py=class{constructor(v,E={},L){this.config=E,this.publicApi=L,te(this,"pointers"),te(this,"_pointerProxies"),te(this,"address"),te(this,"_studioReadyDeferred"),te(this,"_assetStorageReadyDeferred"),te(this,"_readyPromise"),te(this,"_sheetTemplates",new F2.Atom({})),te(this,"sheetTemplatesP",this._sheetTemplates.pointer),te(this,"_studio"),te(this,"assetStorage"),te(this,"type","Theatre_Project"),te(this,"_logger");var q;this._logger=Mx({logging:{dev:!0}}).named("Project",v),this._logger.traceDev("creating project"),this.address={projectId:v};const ie=new F2.Atom({ahistoric:{ahistoricStuff:""},historic:(q=E.state)!=null?q:{sheetsById:{},definitionVersion:hy.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=ql(),this.assetStorage={getAssetUrl:de=>{var Me;return"".concat((Me=E.assets)==null?void 0:Me.baseUrl,"/").concat(de)},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new yx.PointerProxy(ie.pointer.historic),ahistoric:new yx.PointerProxy(ie.pointer.ahistoric),ephemeral:new yx.PointerProxy(ie.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},me.add(v,this),this._studioReadyDeferred=ql(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then(()=>{}),E.state?setTimeout(()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))},0):typeof window>"u"?console.error('Argument config.state in Theatre.getProject("'.concat(v,'", config) is empty. ')+"You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state"):setTimeout(()=>{if(!this._studio)throw new Error('Argument config.state in Theatre.getProject("'.concat(v,'", config) is empty. This is fine ')+"while you are using @theatre/core along with @theatre/studio. But since @theatre/studio "+'is not loaded, the state of project "'.concat(v,`" will be empty.

`)+`To fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state
`)},1e3)}attachToStudio(v){if(this._studio){if(this._studio!==v)throw new Error("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));console.warn("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));return}this._studio=v,v.initialized.then(async()=>{var E;await $2(v,this,this.config.state),this._pointerProxies.historic.setPointer(v.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(v.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(v.atomP.ephemeral.coreByProject[this.address.projectId]),await v.createAssetStorage(this,(E=this.config.assets)==null?void 0:E.baseUrl).then(L=>{this.assetStorage=L,this._assetStorageReadyDeferred.resolve(void 0)}),this._studioReadyDeferred.resolve(void 0)}).catch(E=>{throw console.error(E),E})}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return this._studioReadyDeferred.status==="resolved"&&this._assetStorageReadyDeferred.status==="resolved"}getOrCreateSheet(v,E="default"){let L=this._sheetTemplates.get()[v];return L||(L=new xF(this,v),this._sheetTemplates.reduce(q=>Q(H({},q),{[v]:L}))),L.getInstance(E)}},fy=class{get type(){return"Theatre_Project_PublicAPI"}constructor(v,E={}){vt(this,new py(v,E,this))}get ready(){return Fe(this).ready}get isReady(){return Fe(this).isReady()}get address(){return H({},Fe(this).address)}getAssetUrl(v){if(!this.isReady){console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.");return}return v.id?Fe(this).assetStorage.getAssetUrl(v.id):void 0}sheet(v,E="default"){const L=ty(v);return Fe(this).getOrCreateSheet(L,E).publicApi}};C(Pe());var Ax=Mt,yp=Mt;function Ix(v,E={}){const L=me.get(v);if(L)return L.publicApi;const ie=Mx().named("Project",v);return E.state?(K2(v,E.state),ie._debug("deep validated config.state on disk")):ie._debug("no config.state"),new fy(v,E)}var W2=(v,E)=>{if(Array.isArray(E)||E==null||E.definitionVersion!==hy.currentProjectStateDefinitionVersion)throw new ap("Error validating conf.state in Theatre.getProject(".concat(JSON.stringify(v),", conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state"))},K2=(v,E)=>{W2(v,E)};function my(v,E,L){const q=L?Fe(L).ticker:cx();if((0,Ax.isPointer)(v))return(0,yp.pointerToPrism)(v).onChange(q,E,!0);if((0,yp.isPrism)(v))return v.onChange(q,E,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function Rx(v){if((0,Ax.isPointer)(v))return(0,yp.pointerToPrism)(v).getValue();throw new Error("Called val(p) where p is not a pointer.")}var Ox=class{constructor(){te(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.7.0"}getBitsForStudio(v,E){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=v;const L={projectsP:me.atom.pointer.projects,privateAPI:Fe,coreExports:ye,getCoreRafDriver:ux};E(L)}};Dx();function Dx(){if(typeof window>"u")return;const v=window[lx];if(typeof v<"u")throw typeof v=="object"&&v&&typeof v.version=="string"?new Error(`It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(lx," seems to be already set by a module other than @theatre/core."));const E=new Ox;window[lx]=E;const L=window[w2];L&&L!==null&&L.type==="Theatre_StudioBundle"&&L.registerCoreBundle(E)}/*! Bundled license information:

	lodash-es/lodash.js:
	  (**
	   * @license
	   * Lodash (Custom Build) <https://lodash.com/>
	   * Build: `lodash modularize exports="es" -o ./`
	   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
	   * Released under MIT license <https://lodash.com/license>
	   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
	   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
	   *)
	*/})(M3,M3.exports);var LH=M3.exports;function q3e(){return Math.round(Math.random()*1e6).toString()}function X3e(t){return t.r!==void 0&&t.g!==void 0&&t.b!==void 0}function Y3e(t){const e=Math.round(t.r*255),n=Math.round(t.g*255),r=Math.round(t.b*255),o=_=>{const x=_.toString(16);return x.length===1?"0"+x:x},u=o(e),h=o(n),m=o(r);return"#"+u+h+m}const x_e=()=>{};class Z3e extends pL{constructor(n,r,o){super(n);Fi(this,"project");Fi(this,"sheets");Fi(this,"sheetObjects");Fi(this,"sheetObjectCBs");Fi(this,"sheetObjectUnsubscribe");this.project=LH.getProject(r,o),this.sheets=new Map,this.sheetObjects=new Map,this.sheetObjectCBs=new Map,this.sheetObjectUnsubscribe=new Map}dispose(){this.project=void 0,this.sheets=new Map,this.sheetObjects=new Map,this.sheetObjectCBs=new Map,this.sheetObjectUnsubscribe=new Map}sheet(n){var o;if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}let r=this.sheets.get(n);return r!==void 0||(r=(o=this.project)==null?void 0:o.sheet(n),this.sheets.set(n,r)),r}sheetObject(n,r,o,u){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const h=this.sheets.get(n);if(h===void 0)return;const m=`${n}_${r}`;let _=this.sheetObjects.get(m);if(_!==void 0)return _=h.object(r,{...o,..._.value},{reconfigure:!0}),_;_=h.object(r,o),this.sheetObjects.set(m,_),this.sheetObjectCBs.set(m,u!==void 0?u:x_e);const x=_.onValuesChange(M=>{if(this.app.editor){for(const R in M){const N=M[R];typeof N=="object"&&X3e(N)&&(M[R]={r:N.r,g:N.g,b:N.b,a:N.a})}this.app.send({event:"updateSheetObject",target:"app",data:{sheetObject:m,values:M}})}else{const R=this.sheetObjectCBs.get(m);R!==void 0&&R(M)}});return this.sheetObjectUnsubscribe.set(m,x),_}unsubscribe(n){if(this.project===void 0){console.error("Theatre Project hasn't been created yet.");return}const r=`${n.address.sheetId}_${n.address.objectKey}`,o=this.sheetObjectUnsubscribe.get(r);o!==void 0&&o()}}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const fG="155",Q3e=0,Tme=1,J3e=2,S_e=1,eLe=2,dh=3,Mh=0,ga=1,fh=2,$f=0,Eg=1,Mme=2,Ame=3,Ime=4,tLe=5,vg=100,nLe=101,rLe=102,Rme=103,Ome=104,iLe=200,oLe=201,sLe=202,aLe=203,mG=204,vG=205,lLe=206,uLe=207,cLe=208,dLe=209,hLe=210,pLe=0,fLe=1,mLe=2,A3=3,vLe=4,gLe=5,yLe=6,bLe=7,E_e=0,_Le=1,wLe=2,Wf=0,xLe=1,SLe=2,ELe=3,CLe=4,PLe=5,C_e=300,H_=301,G_=302,NH=303,FH=304,fL=306,BH=1e3,Nu=1001,UH=1002,Vs=1003,Dme=1004,O6=1005,Il=1006,kLe=1007,iP=1008,Kf=1009,TLe=1010,MLe=1011,gG=1012,P_e=1013,Of=1014,Df=1015,oP=1016,k_e=1017,T_e=1018,Cg=1020,ALe=1021,Fu=1023,ILe=1024,RLe=1025,Pg=1026,$_=1027,OLe=1028,M_e=1029,DLe=1030,A_e=1031,I_e=1033,D6=33776,L6=33777,N6=33778,F6=33779,Lme=35840,Nme=35841,Fme=35842,Bme=35843,LLe=36196,Ume=37492,Vme=37496,jme=37808,zme=37809,Hme=37810,Gme=37811,$me=37812,Wme=37813,Kme=37814,qme=37815,Xme=37816,Yme=37817,Zme=37818,Qme=37819,Jme=37820,eve=37821,B6=36492,NLe=36283,tve=36284,nve=36285,rve=36286,R_e=3e3,kg=3001,FLe=3200,BLe=3201,yG=0,ULe=1,Tg="",tr="srgb",$c="srgb-linear",O_e="display-p3",A_=7680,D_e=519,VLe=512,jLe=513,zLe=514,HLe=515,GLe=516,$Le=517,WLe=518,KLe=519,ive=35044,ove="300 es",VH=1035,gh=2e3,I3=2001;class Wg{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const o=this._listeners[e];if(o!==void 0){const u=o.indexOf(n);u!==-1&&o.splice(u,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const o=r.slice(0);for(let u=0,h=o.length;u<h;u++)o[u].call(this,e);e.target=null}}}const ms=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],U6=Math.PI/180,jH=180/Math.PI;function EP(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(ms[t&255]+ms[t>>8&255]+ms[t>>16&255]+ms[t>>24&255]+"-"+ms[e&255]+ms[e>>8&255]+"-"+ms[e>>16&15|64]+ms[e>>24&255]+"-"+ms[n&63|128]+ms[n>>8&255]+"-"+ms[n>>16&255]+ms[n>>24&255]+ms[r&255]+ms[r>>8&255]+ms[r>>16&255]+ms[r>>24&255]).toLowerCase()}function js(t,e,n){return Math.max(e,Math.min(n,t))}function qLe(t,e){return(t%e+e)%e}function V6(t,e,n){return(1-n)*t+n*e}function sve(t){return(t&t-1)===0&&t!==0}function zH(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function tC(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function ca(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}class kr{constructor(e=0,n=0){kr.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,o=e.elements;return this.x=o[0]*n+o[3]*r+o[6],this.y=o[1]*n+o[4]*r+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(js(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),o=Math.sin(n),u=this.x-e.x,h=this.y-e.y;return this.x=u*r-h*o+e.x,this.y=u*o+h*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ir{constructor(e,n,r,o,u,h,m,_,x){ir.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,o,u,h,m,_,x)}set(e,n,r,o,u,h,m,_,x){const M=this.elements;return M[0]=e,M[1]=o,M[2]=m,M[3]=n,M[4]=u,M[5]=_,M[6]=r,M[7]=h,M[8]=x,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,o=n.elements,u=this.elements,h=r[0],m=r[3],_=r[6],x=r[1],M=r[4],R=r[7],N=r[2],H=r[5],Q=r[8],j=o[0],z=o[3],U=o[6],C=o[1],K=o[4],te=o[7],pe=o[2],Z=o[5],be=o[8];return u[0]=h*j+m*C+_*pe,u[3]=h*z+m*K+_*Z,u[6]=h*U+m*te+_*be,u[1]=x*j+M*C+R*pe,u[4]=x*z+M*K+R*Z,u[7]=x*U+M*te+R*be,u[2]=N*j+H*C+Q*pe,u[5]=N*z+H*K+Q*Z,u[8]=N*U+H*te+Q*be,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],o=e[2],u=e[3],h=e[4],m=e[5],_=e[6],x=e[7],M=e[8];return n*h*M-n*m*x-r*u*M+r*m*_+o*u*x-o*h*_}invert(){const e=this.elements,n=e[0],r=e[1],o=e[2],u=e[3],h=e[4],m=e[5],_=e[6],x=e[7],M=e[8],R=M*h-m*x,N=m*_-M*u,H=x*u-h*_,Q=n*R+r*N+o*H;if(Q===0)return this.set(0,0,0,0,0,0,0,0,0);const j=1/Q;return e[0]=R*j,e[1]=(o*x-M*r)*j,e[2]=(m*r-o*h)*j,e[3]=N*j,e[4]=(M*n-o*_)*j,e[5]=(o*u-m*n)*j,e[6]=H*j,e[7]=(r*_-x*n)*j,e[8]=(h*n-r*u)*j,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,o,u,h,m){const _=Math.cos(u),x=Math.sin(u);return this.set(r*_,r*x,-r*(_*h+x*m)+h+e,-o*x,o*_,-o*(-x*h+_*m)+m+n,0,0,1),this}scale(e,n){return this.premultiply(j6.makeScale(e,n)),this}rotate(e){return this.premultiply(j6.makeRotation(-e)),this}translate(e,n){return this.premultiply(j6.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let o=0;o<9;o++)if(n[o]!==r[o])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const j6=new ir;function L_e(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function R3(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const ave={};function DC(t){t in ave||(ave[t]=!0,console.warn(t))}function I_(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function z6(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const XLe=new ir().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),YLe=new ir().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function ZLe(t){return t.convertSRGBToLinear().applyMatrix3(YLe)}function QLe(t){return t.applyMatrix3(XLe).convertLinearToSRGB()}const JLe={[$c]:t=>t,[tr]:t=>t.convertSRGBToLinear(),[O_e]:ZLe},eNe={[$c]:t=>t,[tr]:t=>t.convertLinearToSRGB(),[O_e]:QLe},Tu={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return $c},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=JLe[e],o=eNe[n];if(r===void 0||o===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return o(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let Bb;class N_e{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Bb===void 0&&(Bb=R3("canvas")),Bb.width=e.width,Bb.height=e.height;const r=Bb.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Bb}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=R3("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const o=r.getImageData(0,0,e.width,e.height),u=o.data;for(let h=0;h<u.length;h++)u[h]=I_(u[h]/255)*255;return r.putImageData(o,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(I_(n[r]/255)*255):n[r]=I_(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let tNe=0;class F_e{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:tNe++}),this.uuid=EP(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},o=this.data;if(o!==null){let u;if(Array.isArray(o)){u=[];for(let h=0,m=o.length;h<m;h++)o[h].isDataTexture?u.push(H6(o[h].image)):u.push(H6(o[h]))}else u=H6(o);r.url=u}return n||(e.images[this.uuid]=r),r}}function H6(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?N_e.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let nNe=0;class Ba extends Wg{constructor(e=Ba.DEFAULT_IMAGE,n=Ba.DEFAULT_MAPPING,r=Nu,o=Nu,u=Il,h=iP,m=Fu,_=Kf,x=Ba.DEFAULT_ANISOTROPY,M=Tg){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:nNe++}),this.uuid=EP(),this.name="",this.source=new F_e(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=u,this.minFilter=h,this.anisotropy=x,this.format=m,this.internalFormat=null,this.type=_,this.offset=new kr(0,0),this.repeat=new kr(1,1),this.center=new kr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ir,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof M=="string"?this.colorSpace=M:(DC("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=M===kg?tr:Tg),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==C_e)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case BH:e.x=e.x-Math.floor(e.x);break;case Nu:e.x=e.x<0?0:1;break;case UH:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case BH:e.y=e.y-Math.floor(e.y);break;case Nu:e.y=e.y<0?0:1;break;case UH:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return DC("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===tr?kg:R_e}set encoding(e){DC("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===kg?tr:Tg}}Ba.DEFAULT_IMAGE=null;Ba.DEFAULT_MAPPING=C_e;Ba.DEFAULT_ANISOTROPY=1;class Io{constructor(e=0,n=0,r=0,o=1){Io.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,o){return this.x=e,this.y=n,this.z=r,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,o=this.z,u=this.w,h=e.elements;return this.x=h[0]*n+h[4]*r+h[8]*o+h[12]*u,this.y=h[1]*n+h[5]*r+h[9]*o+h[13]*u,this.z=h[2]*n+h[6]*r+h[10]*o+h[14]*u,this.w=h[3]*n+h[7]*r+h[11]*o+h[15]*u,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,o,u;const _=e.elements,x=_[0],M=_[4],R=_[8],N=_[1],H=_[5],Q=_[9],j=_[2],z=_[6],U=_[10];if(Math.abs(M-N)<.01&&Math.abs(R-j)<.01&&Math.abs(Q-z)<.01){if(Math.abs(M+N)<.1&&Math.abs(R+j)<.1&&Math.abs(Q+z)<.1&&Math.abs(x+H+U-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const K=(x+1)/2,te=(H+1)/2,pe=(U+1)/2,Z=(M+N)/4,be=(R+j)/4,Pe=(Q+z)/4;return K>te&&K>pe?K<.01?(r=0,o=.707106781,u=.707106781):(r=Math.sqrt(K),o=Z/r,u=be/r):te>pe?te<.01?(r=.707106781,o=0,u=.707106781):(o=Math.sqrt(te),r=Z/o,u=Pe/o):pe<.01?(r=.707106781,o=.707106781,u=0):(u=Math.sqrt(pe),r=be/u,o=Pe/u),this.set(r,o,u,n),this}let C=Math.sqrt((z-Q)*(z-Q)+(R-j)*(R-j)+(N-M)*(N-M));return Math.abs(C)<.001&&(C=1),this.x=(z-Q)/C,this.y=(R-j)/C,this.z=(N-M)/C,this.w=Math.acos((x+H+U-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class rNe extends Wg{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Io(0,0,e,n),this.scissorTest=!1,this.viewport=new Io(0,0,e,n);const o={width:e,height:n,depth:1};r.encoding!==void 0&&(DC("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===kg?tr:Tg),this.texture=new Ba(o,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Il,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new F_e(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Lg extends rNe{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class B_e extends Ba{constructor(e=null,n=1,r=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:o},this.magFilter=Vs,this.minFilter=Vs,this.wrapR=Nu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class iNe extends Ba{constructor(e=null,n=1,r=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:o},this.magFilter=Vs,this.minFilter=Vs,this.wrapR=Nu,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class CP{constructor(e=0,n=0,r=0,o=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=o}static slerpFlat(e,n,r,o,u,h,m){let _=r[o+0],x=r[o+1],M=r[o+2],R=r[o+3];const N=u[h+0],H=u[h+1],Q=u[h+2],j=u[h+3];if(m===0){e[n+0]=_,e[n+1]=x,e[n+2]=M,e[n+3]=R;return}if(m===1){e[n+0]=N,e[n+1]=H,e[n+2]=Q,e[n+3]=j;return}if(R!==j||_!==N||x!==H||M!==Q){let z=1-m;const U=_*N+x*H+M*Q+R*j,C=U>=0?1:-1,K=1-U*U;if(K>Number.EPSILON){const pe=Math.sqrt(K),Z=Math.atan2(pe,U*C);z=Math.sin(z*Z)/pe,m=Math.sin(m*Z)/pe}const te=m*C;if(_=_*z+N*te,x=x*z+H*te,M=M*z+Q*te,R=R*z+j*te,z===1-m){const pe=1/Math.sqrt(_*_+x*x+M*M+R*R);_*=pe,x*=pe,M*=pe,R*=pe}}e[n]=_,e[n+1]=x,e[n+2]=M,e[n+3]=R}static multiplyQuaternionsFlat(e,n,r,o,u,h){const m=r[o],_=r[o+1],x=r[o+2],M=r[o+3],R=u[h],N=u[h+1],H=u[h+2],Q=u[h+3];return e[n]=m*Q+M*R+_*H-x*N,e[n+1]=_*Q+M*N+x*R-m*H,e[n+2]=x*Q+M*H+m*N-_*R,e[n+3]=M*Q-m*R-_*N-x*H,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,o){return this._x=e,this._y=n,this._z=r,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,o=e._y,u=e._z,h=e._order,m=Math.cos,_=Math.sin,x=m(r/2),M=m(o/2),R=m(u/2),N=_(r/2),H=_(o/2),Q=_(u/2);switch(h){case"XYZ":this._x=N*M*R+x*H*Q,this._y=x*H*R-N*M*Q,this._z=x*M*Q+N*H*R,this._w=x*M*R-N*H*Q;break;case"YXZ":this._x=N*M*R+x*H*Q,this._y=x*H*R-N*M*Q,this._z=x*M*Q-N*H*R,this._w=x*M*R+N*H*Q;break;case"ZXY":this._x=N*M*R-x*H*Q,this._y=x*H*R+N*M*Q,this._z=x*M*Q+N*H*R,this._w=x*M*R-N*H*Q;break;case"ZYX":this._x=N*M*R-x*H*Q,this._y=x*H*R+N*M*Q,this._z=x*M*Q-N*H*R,this._w=x*M*R+N*H*Q;break;case"YZX":this._x=N*M*R+x*H*Q,this._y=x*H*R+N*M*Q,this._z=x*M*Q-N*H*R,this._w=x*M*R-N*H*Q;break;case"XZY":this._x=N*M*R-x*H*Q,this._y=x*H*R-N*M*Q,this._z=x*M*Q+N*H*R,this._w=x*M*R+N*H*Q;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+h)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,o=Math.sin(r);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],o=n[4],u=n[8],h=n[1],m=n[5],_=n[9],x=n[2],M=n[6],R=n[10],N=r+m+R;if(N>0){const H=.5/Math.sqrt(N+1);this._w=.25/H,this._x=(M-_)*H,this._y=(u-x)*H,this._z=(h-o)*H}else if(r>m&&r>R){const H=2*Math.sqrt(1+r-m-R);this._w=(M-_)/H,this._x=.25*H,this._y=(o+h)/H,this._z=(u+x)/H}else if(m>R){const H=2*Math.sqrt(1+m-r-R);this._w=(u-x)/H,this._x=(o+h)/H,this._y=.25*H,this._z=(_+M)/H}else{const H=2*Math.sqrt(1+R-r-m);this._w=(h-o)/H,this._x=(u+x)/H,this._y=(_+M)/H,this._z=.25*H}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(js(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const o=Math.min(1,n/r);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,o=e._y,u=e._z,h=e._w,m=n._x,_=n._y,x=n._z,M=n._w;return this._x=r*M+h*m+o*x-u*_,this._y=o*M+h*_+u*m-r*x,this._z=u*M+h*x+r*_-o*m,this._w=h*M-r*m-o*_-u*x,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,o=this._y,u=this._z,h=this._w;let m=h*e._w+r*e._x+o*e._y+u*e._z;if(m<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,m=-m):this.copy(e),m>=1)return this._w=h,this._x=r,this._y=o,this._z=u,this;const _=1-m*m;if(_<=Number.EPSILON){const H=1-n;return this._w=H*h+n*this._w,this._x=H*r+n*this._x,this._y=H*o+n*this._y,this._z=H*u+n*this._z,this.normalize(),this._onChangeCallback(),this}const x=Math.sqrt(_),M=Math.atan2(x,m),R=Math.sin((1-n)*M)/x,N=Math.sin(n*M)/x;return this._w=h*R+this._w*N,this._x=r*R+this._x*N,this._y=o*R+this._y*N,this._z=u*R+this._z*N,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),o=2*Math.PI*Math.random(),u=2*Math.PI*Math.random();return this.set(n*Math.cos(o),r*Math.sin(u),r*Math.cos(u),n*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class dt{constructor(e=0,n=0,r=0){dt.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(lve.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(lve.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,o=this.z,u=e.elements;return this.x=u[0]*n+u[3]*r+u[6]*o,this.y=u[1]*n+u[4]*r+u[7]*o,this.z=u[2]*n+u[5]*r+u[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,o=this.z,u=e.elements,h=1/(u[3]*n+u[7]*r+u[11]*o+u[15]);return this.x=(u[0]*n+u[4]*r+u[8]*o+u[12])*h,this.y=(u[1]*n+u[5]*r+u[9]*o+u[13])*h,this.z=(u[2]*n+u[6]*r+u[10]*o+u[14])*h,this}applyQuaternion(e){const n=this.x,r=this.y,o=this.z,u=e.x,h=e.y,m=e.z,_=e.w,x=_*n+h*o-m*r,M=_*r+m*n-u*o,R=_*o+u*r-h*n,N=-u*n-h*r-m*o;return this.x=x*_+N*-u+M*-m-R*-h,this.y=M*_+N*-h+R*-u-x*-m,this.z=R*_+N*-m+x*-h-M*-u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,o=this.z,u=e.elements;return this.x=u[0]*n+u[4]*r+u[8]*o,this.y=u[1]*n+u[5]*r+u[9]*o,this.z=u[2]*n+u[6]*r+u[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,o=e.y,u=e.z,h=n.x,m=n.y,_=n.z;return this.x=o*_-u*m,this.y=u*h-r*_,this.z=r*m-o*h,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return G6.copy(this).projectOnVector(e),this.sub(G6)}reflect(e){return this.sub(G6.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(js(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,o=this.z-e.z;return n*n+r*r+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const o=Math.sin(n)*e;return this.x=o*Math.sin(r),this.y=Math.cos(n)*e,this.z=o*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=o,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const G6=new dt,lve=new CP;class PP{constructor(e=new dt(1/0,1/0,1/0),n=new dt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(ih.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(ih.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=ih.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Ub.copy(e.boundingBox),Ub.applyMatrix4(e.matrixWorld),this.union(Ub);else{const o=e.geometry;if(o!==void 0)if(n&&o.attributes!==void 0&&o.attributes.position!==void 0){const u=o.attributes.position;for(let h=0,m=u.count;h<m;h++)ih.fromBufferAttribute(u,h).applyMatrix4(e.matrixWorld),this.expandByPoint(ih)}else o.boundingBox===null&&o.computeBoundingBox(),Ub.copy(o.boundingBox),Ub.applyMatrix4(e.matrixWorld),this.union(Ub)}const r=e.children;for(let o=0,u=r.length;o<u;o++)this.expandByObject(r[o],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ih),ih.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(nC),dD.subVectors(this.max,nC),Vb.subVectors(e.a,nC),jb.subVectors(e.b,nC),zb.subVectors(e.c,nC),ff.subVectors(jb,Vb),mf.subVectors(zb,jb),tg.subVectors(Vb,zb);let n=[0,-ff.z,ff.y,0,-mf.z,mf.y,0,-tg.z,tg.y,ff.z,0,-ff.x,mf.z,0,-mf.x,tg.z,0,-tg.x,-ff.y,ff.x,0,-mf.y,mf.x,0,-tg.y,tg.x,0];return!$6(n,Vb,jb,zb,dD)||(n=[1,0,0,0,1,0,0,0,1],!$6(n,Vb,jb,zb,dD))?!1:(hD.crossVectors(ff,mf),n=[hD.x,hD.y,hD.z],$6(n,Vb,jb,zb,dD))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ih).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ih).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(rh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),rh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),rh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),rh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),rh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),rh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),rh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),rh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(rh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const rh=[new dt,new dt,new dt,new dt,new dt,new dt,new dt,new dt],ih=new dt,Ub=new PP,Vb=new dt,jb=new dt,zb=new dt,ff=new dt,mf=new dt,tg=new dt,nC=new dt,dD=new dt,hD=new dt,ng=new dt;function $6(t,e,n,r,o){for(let u=0,h=t.length-3;u<=h;u+=3){ng.fromArray(t,u);const m=o.x*Math.abs(ng.x)+o.y*Math.abs(ng.y)+o.z*Math.abs(ng.z),_=e.dot(ng),x=n.dot(ng),M=r.dot(ng);if(Math.max(-Math.max(_,x,M),Math.min(_,x,M))>m)return!1}return!0}const oNe=new PP,rC=new dt,W6=new dt;class bG{constructor(e=new dt,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):oNe.setFromPoints(e).getCenter(r);let o=0;for(let u=0,h=e.length;u<h;u++)o=Math.max(o,r.distanceToSquared(e[u]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;rC.subVectors(e,this.center);const n=rC.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),o=(r-this.radius)*.5;this.center.addScaledVector(rC,o/r),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(W6.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(rC.copy(e.center).add(W6)),this.expandByPoint(rC.copy(e.center).sub(W6))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const oh=new dt,K6=new dt,pD=new dt,vf=new dt,q6=new dt,fD=new dt,X6=new dt;class sNe{constructor(e=new dt,n=new dt(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,oh)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=oh.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(oh.copy(this.origin).addScaledVector(this.direction,n),oh.distanceToSquared(e))}distanceSqToSegment(e,n,r,o){K6.copy(e).add(n).multiplyScalar(.5),pD.copy(n).sub(e).normalize(),vf.copy(this.origin).sub(K6);const u=e.distanceTo(n)*.5,h=-this.direction.dot(pD),m=vf.dot(this.direction),_=-vf.dot(pD),x=vf.lengthSq(),M=Math.abs(1-h*h);let R,N,H,Q;if(M>0)if(R=h*_-m,N=h*m-_,Q=u*M,R>=0)if(N>=-Q)if(N<=Q){const j=1/M;R*=j,N*=j,H=R*(R+h*N+2*m)+N*(h*R+N+2*_)+x}else N=u,R=Math.max(0,-(h*N+m)),H=-R*R+N*(N+2*_)+x;else N=-u,R=Math.max(0,-(h*N+m)),H=-R*R+N*(N+2*_)+x;else N<=-Q?(R=Math.max(0,-(-h*u+m)),N=R>0?-u:Math.min(Math.max(-u,-_),u),H=-R*R+N*(N+2*_)+x):N<=Q?(R=0,N=Math.min(Math.max(-u,-_),u),H=N*(N+2*_)+x):(R=Math.max(0,-(h*u+m)),N=R>0?u:Math.min(Math.max(-u,-_),u),H=-R*R+N*(N+2*_)+x);else N=h>0?-u:u,R=Math.max(0,-(h*N+m)),H=-R*R+N*(N+2*_)+x;return r&&r.copy(this.origin).addScaledVector(this.direction,R),o&&o.copy(K6).addScaledVector(pD,N),H}intersectSphere(e,n){oh.subVectors(e.center,this.origin);const r=oh.dot(this.direction),o=oh.dot(oh)-r*r,u=e.radius*e.radius;if(o>u)return null;const h=Math.sqrt(u-o),m=r-h,_=r+h;return _<0?null:m<0?this.at(_,n):this.at(m,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,o,u,h,m,_;const x=1/this.direction.x,M=1/this.direction.y,R=1/this.direction.z,N=this.origin;return x>=0?(r=(e.min.x-N.x)*x,o=(e.max.x-N.x)*x):(r=(e.max.x-N.x)*x,o=(e.min.x-N.x)*x),M>=0?(u=(e.min.y-N.y)*M,h=(e.max.y-N.y)*M):(u=(e.max.y-N.y)*M,h=(e.min.y-N.y)*M),r>h||u>o||((u>r||isNaN(r))&&(r=u),(h<o||isNaN(o))&&(o=h),R>=0?(m=(e.min.z-N.z)*R,_=(e.max.z-N.z)*R):(m=(e.max.z-N.z)*R,_=(e.min.z-N.z)*R),r>_||m>o)||((m>r||r!==r)&&(r=m),(_<o||o!==o)&&(o=_),o<0)?null:this.at(r>=0?r:o,n)}intersectsBox(e){return this.intersectBox(e,oh)!==null}intersectTriangle(e,n,r,o,u){q6.subVectors(n,e),fD.subVectors(r,e),X6.crossVectors(q6,fD);let h=this.direction.dot(X6),m;if(h>0){if(o)return null;m=1}else if(h<0)m=-1,h=-h;else return null;vf.subVectors(this.origin,e);const _=m*this.direction.dot(fD.crossVectors(vf,fD));if(_<0)return null;const x=m*this.direction.dot(q6.cross(vf));if(x<0||_+x>h)return null;const M=-m*vf.dot(X6);return M<0?null:this.at(M/h,u)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class uo{constructor(e,n,r,o,u,h,m,_,x,M,R,N,H,Q,j,z){uo.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,o,u,h,m,_,x,M,R,N,H,Q,j,z)}set(e,n,r,o,u,h,m,_,x,M,R,N,H,Q,j,z){const U=this.elements;return U[0]=e,U[4]=n,U[8]=r,U[12]=o,U[1]=u,U[5]=h,U[9]=m,U[13]=_,U[2]=x,U[6]=M,U[10]=R,U[14]=N,U[3]=H,U[7]=Q,U[11]=j,U[15]=z,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new uo().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,o=1/Hb.setFromMatrixColumn(e,0).length(),u=1/Hb.setFromMatrixColumn(e,1).length(),h=1/Hb.setFromMatrixColumn(e,2).length();return n[0]=r[0]*o,n[1]=r[1]*o,n[2]=r[2]*o,n[3]=0,n[4]=r[4]*u,n[5]=r[5]*u,n[6]=r[6]*u,n[7]=0,n[8]=r[8]*h,n[9]=r[9]*h,n[10]=r[10]*h,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,o=e.y,u=e.z,h=Math.cos(r),m=Math.sin(r),_=Math.cos(o),x=Math.sin(o),M=Math.cos(u),R=Math.sin(u);if(e.order==="XYZ"){const N=h*M,H=h*R,Q=m*M,j=m*R;n[0]=_*M,n[4]=-_*R,n[8]=x,n[1]=H+Q*x,n[5]=N-j*x,n[9]=-m*_,n[2]=j-N*x,n[6]=Q+H*x,n[10]=h*_}else if(e.order==="YXZ"){const N=_*M,H=_*R,Q=x*M,j=x*R;n[0]=N+j*m,n[4]=Q*m-H,n[8]=h*x,n[1]=h*R,n[5]=h*M,n[9]=-m,n[2]=H*m-Q,n[6]=j+N*m,n[10]=h*_}else if(e.order==="ZXY"){const N=_*M,H=_*R,Q=x*M,j=x*R;n[0]=N-j*m,n[4]=-h*R,n[8]=Q+H*m,n[1]=H+Q*m,n[5]=h*M,n[9]=j-N*m,n[2]=-h*x,n[6]=m,n[10]=h*_}else if(e.order==="ZYX"){const N=h*M,H=h*R,Q=m*M,j=m*R;n[0]=_*M,n[4]=Q*x-H,n[8]=N*x+j,n[1]=_*R,n[5]=j*x+N,n[9]=H*x-Q,n[2]=-x,n[6]=m*_,n[10]=h*_}else if(e.order==="YZX"){const N=h*_,H=h*x,Q=m*_,j=m*x;n[0]=_*M,n[4]=j-N*R,n[8]=Q*R+H,n[1]=R,n[5]=h*M,n[9]=-m*M,n[2]=-x*M,n[6]=H*R+Q,n[10]=N-j*R}else if(e.order==="XZY"){const N=h*_,H=h*x,Q=m*_,j=m*x;n[0]=_*M,n[4]=-R,n[8]=x*M,n[1]=N*R+j,n[5]=h*M,n[9]=H*R-Q,n[2]=Q*R-H,n[6]=m*M,n[10]=j*R+N}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(aNe,e,lNe)}lookAt(e,n,r){const o=this.elements;return Oa.subVectors(e,n),Oa.lengthSq()===0&&(Oa.z=1),Oa.normalize(),gf.crossVectors(r,Oa),gf.lengthSq()===0&&(Math.abs(r.z)===1?Oa.x+=1e-4:Oa.z+=1e-4,Oa.normalize(),gf.crossVectors(r,Oa)),gf.normalize(),mD.crossVectors(Oa,gf),o[0]=gf.x,o[4]=mD.x,o[8]=Oa.x,o[1]=gf.y,o[5]=mD.y,o[9]=Oa.y,o[2]=gf.z,o[6]=mD.z,o[10]=Oa.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,o=n.elements,u=this.elements,h=r[0],m=r[4],_=r[8],x=r[12],M=r[1],R=r[5],N=r[9],H=r[13],Q=r[2],j=r[6],z=r[10],U=r[14],C=r[3],K=r[7],te=r[11],pe=r[15],Z=o[0],be=o[4],Pe=o[8],G=o[12],ye=o[1],St=o[5],kt=o[9],it=o[13],me=o[2],lt=o[6],Fe=o[10],vt=o[14],Ge=o[3],mt=o[7],Je=o[11],Be=o[15];return u[0]=h*Z+m*ye+_*me+x*Ge,u[4]=h*be+m*St+_*lt+x*mt,u[8]=h*Pe+m*kt+_*Fe+x*Je,u[12]=h*G+m*it+_*vt+x*Be,u[1]=M*Z+R*ye+N*me+H*Ge,u[5]=M*be+R*St+N*lt+H*mt,u[9]=M*Pe+R*kt+N*Fe+H*Je,u[13]=M*G+R*it+N*vt+H*Be,u[2]=Q*Z+j*ye+z*me+U*Ge,u[6]=Q*be+j*St+z*lt+U*mt,u[10]=Q*Pe+j*kt+z*Fe+U*Je,u[14]=Q*G+j*it+z*vt+U*Be,u[3]=C*Z+K*ye+te*me+pe*Ge,u[7]=C*be+K*St+te*lt+pe*mt,u[11]=C*Pe+K*kt+te*Fe+pe*Je,u[15]=C*G+K*it+te*vt+pe*Be,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],o=e[8],u=e[12],h=e[1],m=e[5],_=e[9],x=e[13],M=e[2],R=e[6],N=e[10],H=e[14],Q=e[3],j=e[7],z=e[11],U=e[15];return Q*(+u*_*R-o*x*R-u*m*N+r*x*N+o*m*H-r*_*H)+j*(+n*_*H-n*x*N+u*h*N-o*h*H+o*x*M-u*_*M)+z*(+n*x*R-n*m*H-u*h*R+r*h*H+u*m*M-r*x*M)+U*(-o*m*M-n*_*R+n*m*N+o*h*R-r*h*N+r*_*M)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=n,o[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],o=e[2],u=e[3],h=e[4],m=e[5],_=e[6],x=e[7],M=e[8],R=e[9],N=e[10],H=e[11],Q=e[12],j=e[13],z=e[14],U=e[15],C=R*z*x-j*N*x+j*_*H-m*z*H-R*_*U+m*N*U,K=Q*N*x-M*z*x-Q*_*H+h*z*H+M*_*U-h*N*U,te=M*j*x-Q*R*x+Q*m*H-h*j*H-M*m*U+h*R*U,pe=Q*R*_-M*j*_-Q*m*N+h*j*N+M*m*z-h*R*z,Z=n*C+r*K+o*te+u*pe;if(Z===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const be=1/Z;return e[0]=C*be,e[1]=(j*N*u-R*z*u-j*o*H+r*z*H+R*o*U-r*N*U)*be,e[2]=(m*z*u-j*_*u+j*o*x-r*z*x-m*o*U+r*_*U)*be,e[3]=(R*_*u-m*N*u-R*o*x+r*N*x+m*o*H-r*_*H)*be,e[4]=K*be,e[5]=(M*z*u-Q*N*u+Q*o*H-n*z*H-M*o*U+n*N*U)*be,e[6]=(Q*_*u-h*z*u-Q*o*x+n*z*x+h*o*U-n*_*U)*be,e[7]=(h*N*u-M*_*u+M*o*x-n*N*x-h*o*H+n*_*H)*be,e[8]=te*be,e[9]=(Q*R*u-M*j*u-Q*r*H+n*j*H+M*r*U-n*R*U)*be,e[10]=(h*j*u-Q*m*u+Q*r*x-n*j*x-h*r*U+n*m*U)*be,e[11]=(M*m*u-h*R*u-M*r*x+n*R*x+h*r*H-n*m*H)*be,e[12]=pe*be,e[13]=(M*j*o-Q*R*o+Q*r*N-n*j*N-M*r*z+n*R*z)*be,e[14]=(Q*m*o-h*j*o-Q*r*_+n*j*_+h*r*z-n*m*z)*be,e[15]=(h*R*o-M*m*o+M*r*_-n*R*_-h*r*N+n*m*N)*be,this}scale(e){const n=this.elements,r=e.x,o=e.y,u=e.z;return n[0]*=r,n[4]*=o,n[8]*=u,n[1]*=r,n[5]*=o,n[9]*=u,n[2]*=r,n[6]*=o,n[10]*=u,n[3]*=r,n[7]*=o,n[11]*=u,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,o))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),o=Math.sin(n),u=1-r,h=e.x,m=e.y,_=e.z,x=u*h,M=u*m;return this.set(x*h+r,x*m-o*_,x*_+o*m,0,x*m+o*_,M*m+r,M*_-o*h,0,x*_-o*m,M*_+o*h,u*_*_+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,o,u,h){return this.set(1,r,u,0,e,1,h,0,n,o,1,0,0,0,0,1),this}compose(e,n,r){const o=this.elements,u=n._x,h=n._y,m=n._z,_=n._w,x=u+u,M=h+h,R=m+m,N=u*x,H=u*M,Q=u*R,j=h*M,z=h*R,U=m*R,C=_*x,K=_*M,te=_*R,pe=r.x,Z=r.y,be=r.z;return o[0]=(1-(j+U))*pe,o[1]=(H+te)*pe,o[2]=(Q-K)*pe,o[3]=0,o[4]=(H-te)*Z,o[5]=(1-(N+U))*Z,o[6]=(z+C)*Z,o[7]=0,o[8]=(Q+K)*be,o[9]=(z-C)*be,o[10]=(1-(N+j))*be,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,n,r){const o=this.elements;let u=Hb.set(o[0],o[1],o[2]).length();const h=Hb.set(o[4],o[5],o[6]).length(),m=Hb.set(o[8],o[9],o[10]).length();this.determinant()<0&&(u=-u),e.x=o[12],e.y=o[13],e.z=o[14],Mu.copy(this);const x=1/u,M=1/h,R=1/m;return Mu.elements[0]*=x,Mu.elements[1]*=x,Mu.elements[2]*=x,Mu.elements[4]*=M,Mu.elements[5]*=M,Mu.elements[6]*=M,Mu.elements[8]*=R,Mu.elements[9]*=R,Mu.elements[10]*=R,n.setFromRotationMatrix(Mu),r.x=u,r.y=h,r.z=m,this}makePerspective(e,n,r,o,u,h,m=gh){const _=this.elements,x=2*u/(n-e),M=2*u/(r-o),R=(n+e)/(n-e),N=(r+o)/(r-o);let H,Q;if(m===gh)H=-(h+u)/(h-u),Q=-2*h*u/(h-u);else if(m===I3)H=-h/(h-u),Q=-h*u/(h-u);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+m);return _[0]=x,_[4]=0,_[8]=R,_[12]=0,_[1]=0,_[5]=M,_[9]=N,_[13]=0,_[2]=0,_[6]=0,_[10]=H,_[14]=Q,_[3]=0,_[7]=0,_[11]=-1,_[15]=0,this}makeOrthographic(e,n,r,o,u,h,m=gh){const _=this.elements,x=1/(n-e),M=1/(r-o),R=1/(h-u),N=(n+e)*x,H=(r+o)*M;let Q,j;if(m===gh)Q=(h+u)*R,j=-2*R;else if(m===I3)Q=u*R,j=-1*R;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+m);return _[0]=2*x,_[4]=0,_[8]=0,_[12]=-N,_[1]=0,_[5]=2*M,_[9]=0,_[13]=-H,_[2]=0,_[6]=0,_[10]=j,_[14]=-Q,_[3]=0,_[7]=0,_[11]=0,_[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let o=0;o<16;o++)if(n[o]!==r[o])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Hb=new dt,Mu=new uo,aNe=new dt(0,0,0),lNe=new dt(1,1,1),gf=new dt,mD=new dt,Oa=new dt,uve=new uo,cve=new CP;class kP{constructor(e=0,n=0,r=0,o=kP.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,o=this._order){return this._x=e,this._y=n,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const o=e.elements,u=o[0],h=o[4],m=o[8],_=o[1],x=o[5],M=o[9],R=o[2],N=o[6],H=o[10];switch(n){case"XYZ":this._y=Math.asin(js(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-M,H),this._z=Math.atan2(-h,u)):(this._x=Math.atan2(N,x),this._z=0);break;case"YXZ":this._x=Math.asin(-js(M,-1,1)),Math.abs(M)<.9999999?(this._y=Math.atan2(m,H),this._z=Math.atan2(_,x)):(this._y=Math.atan2(-R,u),this._z=0);break;case"ZXY":this._x=Math.asin(js(N,-1,1)),Math.abs(N)<.9999999?(this._y=Math.atan2(-R,H),this._z=Math.atan2(-h,x)):(this._y=0,this._z=Math.atan2(_,u));break;case"ZYX":this._y=Math.asin(-js(R,-1,1)),Math.abs(R)<.9999999?(this._x=Math.atan2(N,H),this._z=Math.atan2(_,u)):(this._x=0,this._z=Math.atan2(-h,x));break;case"YZX":this._z=Math.asin(js(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-M,x),this._y=Math.atan2(-R,u)):(this._x=0,this._y=Math.atan2(m,H));break;case"XZY":this._z=Math.asin(-js(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(N,x),this._y=Math.atan2(m,u)):(this._x=Math.atan2(-M,H),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return uve.makeRotationFromQuaternion(e),this.setFromRotationMatrix(uve,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return cve.setFromEuler(this),this.setFromQuaternion(cve,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}kP.DEFAULT_ORDER="XYZ";class U_e{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let uNe=0;const dve=new dt,Gb=new CP,sh=new uo,vD=new dt,iC=new dt,cNe=new dt,dNe=new CP,hve=new dt(1,0,0),pve=new dt(0,1,0),fve=new dt(0,0,1),hNe={type:"added"},mve={type:"removed"};class Do extends Wg{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:uNe++}),this.uuid=EP(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Do.DEFAULT_UP.clone();const e=new dt,n=new kP,r=new CP,o=new dt(1,1,1);function u(){r.setFromEuler(n,!1)}function h(){n.setFromQuaternion(r,void 0,!1)}n._onChange(u),r._onChange(h),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new uo},normalMatrix:{value:new ir}}),this.matrix=new uo,this.matrixWorld=new uo,this.matrixAutoUpdate=Do.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Do.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new U_e,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Gb.setFromAxisAngle(e,n),this.quaternion.multiply(Gb),this}rotateOnWorldAxis(e,n){return Gb.setFromAxisAngle(e,n),this.quaternion.premultiply(Gb),this}rotateX(e){return this.rotateOnAxis(hve,e)}rotateY(e){return this.rotateOnAxis(pve,e)}rotateZ(e){return this.rotateOnAxis(fve,e)}translateOnAxis(e,n){return dve.copy(e).applyQuaternion(this.quaternion),this.position.add(dve.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(hve,e)}translateY(e){return this.translateOnAxis(pve,e)}translateZ(e){return this.translateOnAxis(fve,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(sh.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?vD.copy(e):vD.set(e,n,r);const o=this.parent;this.updateWorldMatrix(!0,!1),iC.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?sh.lookAt(iC,vD,this.up):sh.lookAt(vD,iC,this.up),this.quaternion.setFromRotationMatrix(sh),o&&(sh.extractRotation(o.matrixWorld),Gb.setFromRotationMatrix(sh),this.quaternion.premultiply(Gb.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(hNe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(mve)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(mve)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),sh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),sh.multiply(e.parent.matrixWorld)),e.applyMatrix4(sh),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,o=this.children.length;r<o;r++){const h=this.children[r].getObjectByProperty(e,n);if(h!==void 0)return h}}getObjectsByProperty(e,n){let r=[];this[e]===n&&r.push(this);for(let o=0,u=this.children.length;o<u;o++){const h=this.children[o].getObjectsByProperty(e,n);h.length>0&&(r=r.concat(h))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(iC,e,cNe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(iC,dNe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,o=n.length;r<o;r++){const u=n[r];(u.matrixWorldAutoUpdate===!0||e===!0)&&u.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const o=this.children;for(let u=0,h=o.length;u<h;u++){const m=o[u];m.matrixWorldAutoUpdate===!0&&m.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON()));function u(m,_){return m[_.uuid]===void 0&&(m[_.uuid]=_.toJSON(e)),_.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=u(e.geometries,this.geometry);const m=this.geometry.parameters;if(m!==void 0&&m.shapes!==void 0){const _=m.shapes;if(Array.isArray(_))for(let x=0,M=_.length;x<M;x++){const R=_[x];u(e.shapes,R)}else u(e.shapes,_)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(u(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const m=[];for(let _=0,x=this.material.length;_<x;_++)m.push(u(e.materials,this.material[_]));o.material=m}else o.material=u(e.materials,this.material);if(this.children.length>0){o.children=[];for(let m=0;m<this.children.length;m++)o.children.push(this.children[m].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let m=0;m<this.animations.length;m++){const _=this.animations[m];o.animations.push(u(e.animations,_))}}if(n){const m=h(e.geometries),_=h(e.materials),x=h(e.textures),M=h(e.images),R=h(e.shapes),N=h(e.skeletons),H=h(e.animations),Q=h(e.nodes);m.length>0&&(r.geometries=m),_.length>0&&(r.materials=_),x.length>0&&(r.textures=x),M.length>0&&(r.images=M),R.length>0&&(r.shapes=R),N.length>0&&(r.skeletons=N),H.length>0&&(r.animations=H),Q.length>0&&(r.nodes=Q)}return r.object=o,r;function h(m){const _=[];for(const x in m){const M=m[x];delete M.metadata,_.push(M)}return _}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const o=e.children[r];this.add(o.clone())}return this}}Do.DEFAULT_UP=new dt(0,1,0);Do.DEFAULT_MATRIX_AUTO_UPDATE=!0;Do.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Au=new dt,ah=new dt,Y6=new dt,lh=new dt,$b=new dt,Wb=new dt,vve=new dt,Z6=new dt,Q6=new dt,J6=new dt;let gD=!1;class Lu{constructor(e=new dt,n=new dt,r=new dt){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,o){o.subVectors(r,n),Au.subVectors(e,n),o.cross(Au);const u=o.lengthSq();return u>0?o.multiplyScalar(1/Math.sqrt(u)):o.set(0,0,0)}static getBarycoord(e,n,r,o,u){Au.subVectors(o,n),ah.subVectors(r,n),Y6.subVectors(e,n);const h=Au.dot(Au),m=Au.dot(ah),_=Au.dot(Y6),x=ah.dot(ah),M=ah.dot(Y6),R=h*x-m*m;if(R===0)return u.set(-2,-1,-1);const N=1/R,H=(x*_-m*M)*N,Q=(h*M-m*_)*N;return u.set(1-H-Q,Q,H)}static containsPoint(e,n,r,o){return this.getBarycoord(e,n,r,o,lh),lh.x>=0&&lh.y>=0&&lh.x+lh.y<=1}static getUV(e,n,r,o,u,h,m,_){return gD===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),gD=!0),this.getInterpolation(e,n,r,o,u,h,m,_)}static getInterpolation(e,n,r,o,u,h,m,_){return this.getBarycoord(e,n,r,o,lh),_.setScalar(0),_.addScaledVector(u,lh.x),_.addScaledVector(h,lh.y),_.addScaledVector(m,lh.z),_}static isFrontFacing(e,n,r,o){return Au.subVectors(r,n),ah.subVectors(e,n),Au.cross(ah).dot(o)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,o){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,n,r,o){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Au.subVectors(this.c,this.b),ah.subVectors(this.a,this.b),Au.cross(ah).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Lu.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Lu.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,o,u){return gD===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),gD=!0),Lu.getInterpolation(e,this.a,this.b,this.c,n,r,o,u)}getInterpolation(e,n,r,o,u){return Lu.getInterpolation(e,this.a,this.b,this.c,n,r,o,u)}containsPoint(e){return Lu.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Lu.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,o=this.b,u=this.c;let h,m;$b.subVectors(o,r),Wb.subVectors(u,r),Z6.subVectors(e,r);const _=$b.dot(Z6),x=Wb.dot(Z6);if(_<=0&&x<=0)return n.copy(r);Q6.subVectors(e,o);const M=$b.dot(Q6),R=Wb.dot(Q6);if(M>=0&&R<=M)return n.copy(o);const N=_*R-M*x;if(N<=0&&_>=0&&M<=0)return h=_/(_-M),n.copy(r).addScaledVector($b,h);J6.subVectors(e,u);const H=$b.dot(J6),Q=Wb.dot(J6);if(Q>=0&&H<=Q)return n.copy(u);const j=H*x-_*Q;if(j<=0&&x>=0&&Q<=0)return m=x/(x-Q),n.copy(r).addScaledVector(Wb,m);const z=M*Q-H*R;if(z<=0&&R-M>=0&&H-Q>=0)return vve.subVectors(u,o),m=(R-M)/(R-M+(H-Q)),n.copy(o).addScaledVector(vve,m);const U=1/(z+j+N);return h=j*U,m=N*U,n.copy(r).addScaledVector($b,h).addScaledVector(Wb,m)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let pNe=0;class ew extends Wg{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:pNe++}),this.uuid=EP(),this.name="",this.type="Material",this.blending=Eg,this.side=Mh,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=mG,this.blendDst=vG,this.blendEquation=vg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=A3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=D_e,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=A_,this.stencilZFail=A_,this.stencilZPass=A_,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const o=this[n];if(o===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(r):o&&o.isVector3&&r&&r.isVector3?o.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Eg&&(r.blending=this.blending),this.side!==Mh&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function o(u){const h=[];for(const m in u){const _=u[m];delete _.metadata,h.push(_)}return h}if(n){const u=o(e.textures),h=o(e.images);u.length>0&&(r.textures=u),h.length>0&&(r.images=h)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const o=n.length;r=new Array(o);for(let u=0;u!==o;++u)r[u]=n[u].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const V_e={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Iu={h:0,s:0,l:0},yD={h:0,s:0,l:0};function e8(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Pr{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=tr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Tu.toWorkingColorSpace(this,n),this}setRGB(e,n,r,o=Tu.workingColorSpace){return this.r=e,this.g=n,this.b=r,Tu.toWorkingColorSpace(this,o),this}setHSL(e,n,r,o=Tu.workingColorSpace){if(e=qLe(e,1),n=js(n,0,1),r=js(r,0,1),n===0)this.r=this.g=this.b=r;else{const u=r<=.5?r*(1+n):r+n-r*n,h=2*r-u;this.r=e8(h,u,e+1/3),this.g=e8(h,u,e),this.b=e8(h,u,e-1/3)}return Tu.toWorkingColorSpace(this,o),this}setStyle(e,n=tr){function r(u){u!==void 0&&parseFloat(u)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let u;const h=o[1],m=o[2];switch(h){case"rgb":case"rgba":if(u=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return r(u[4]),this.setRGB(Math.min(255,parseInt(u[1],10))/255,Math.min(255,parseInt(u[2],10))/255,Math.min(255,parseInt(u[3],10))/255,n);if(u=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return r(u[4]),this.setRGB(Math.min(100,parseInt(u[1],10))/100,Math.min(100,parseInt(u[2],10))/100,Math.min(100,parseInt(u[3],10))/100,n);break;case"hsl":case"hsla":if(u=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(m))return r(u[4]),this.setHSL(parseFloat(u[1])/360,parseFloat(u[2])/100,parseFloat(u[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const u=o[1],h=u.length;if(h===3)return this.setRGB(parseInt(u.charAt(0),16)/15,parseInt(u.charAt(1),16)/15,parseInt(u.charAt(2),16)/15,n);if(h===6)return this.setHex(parseInt(u,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=tr){const r=V_e[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=I_(e.r),this.g=I_(e.g),this.b=I_(e.b),this}copyLinearToSRGB(e){return this.r=z6(e.r),this.g=z6(e.g),this.b=z6(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=tr){return Tu.fromWorkingColorSpace(vs.copy(this),e),Math.round(js(vs.r*255,0,255))*65536+Math.round(js(vs.g*255,0,255))*256+Math.round(js(vs.b*255,0,255))}getHexString(e=tr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Tu.workingColorSpace){Tu.fromWorkingColorSpace(vs.copy(this),n);const r=vs.r,o=vs.g,u=vs.b,h=Math.max(r,o,u),m=Math.min(r,o,u);let _,x;const M=(m+h)/2;if(m===h)_=0,x=0;else{const R=h-m;switch(x=M<=.5?R/(h+m):R/(2-h-m),h){case r:_=(o-u)/R+(o<u?6:0);break;case o:_=(u-r)/R+2;break;case u:_=(r-o)/R+4;break}_/=6}return e.h=_,e.s=x,e.l=M,e}getRGB(e,n=Tu.workingColorSpace){return Tu.fromWorkingColorSpace(vs.copy(this),n),e.r=vs.r,e.g=vs.g,e.b=vs.b,e}getStyle(e=tr){Tu.fromWorkingColorSpace(vs.copy(this),e);const n=vs.r,r=vs.g,o=vs.b;return e!==tr?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(o*255)})`}offsetHSL(e,n,r){return this.getHSL(Iu),Iu.h+=e,Iu.s+=n,Iu.l+=r,this.setHSL(Iu.h,Iu.s,Iu.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Iu),e.getHSL(yD);const r=V6(Iu.h,yD.h,n),o=V6(Iu.s,yD.s,n),u=V6(Iu.l,yD.l,n);return this.setHSL(r,o,u),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,o=this.b,u=e.elements;return this.r=u[0]*n+u[3]*r+u[6]*o,this.g=u[1]*n+u[4]*r+u[7]*o,this.b=u[2]*n+u[5]*r+u[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const vs=new Pr;Pr.NAMES=V_e;class _G extends ew{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Pr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=E_e,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const so=new dt,bD=new kr;class zc{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=ive,this.updateRange={offset:0,count:-1},this.gpuType=Df,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let o=0,u=this.itemSize;o<u;o++)this.array[e+o]=n.array[r+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)bD.fromBufferAttribute(this,n),bD.applyMatrix3(e),this.setXY(n,bD.x,bD.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyMatrix3(e),this.setXYZ(n,so.x,so.y,so.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyMatrix4(e),this.setXYZ(n,so.x,so.y,so.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.applyNormalMatrix(e),this.setXYZ(n,so.x,so.y,so.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)so.fromBufferAttribute(this,n),so.transformDirection(e),this.setXYZ(n,so.x,so.y,so.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=tC(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=ca(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=tC(n,this.array)),n}setX(e,n){return this.normalized&&(n=ca(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=tC(n,this.array)),n}setY(e,n){return this.normalized&&(n=ca(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=tC(n,this.array)),n}setZ(e,n){return this.normalized&&(n=ca(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=tC(n,this.array)),n}setW(e,n){return this.normalized&&(n=ca(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=ca(n,this.array),r=ca(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,o){return e*=this.itemSize,this.normalized&&(n=ca(n,this.array),r=ca(r,this.array),o=ca(o,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=o,this}setXYZW(e,n,r,o,u){return e*=this.itemSize,this.normalized&&(n=ca(n,this.array),r=ca(r,this.array),o=ca(o,this.array),u=ca(u,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=o,this.array[e+3]=u,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ive&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class j_e extends zc{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class z_e extends zc{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class Hc extends zc{constructor(e,n,r){super(new Float32Array(e),n,r)}}let fNe=0;const El=new uo,t8=new Do,Kb=new dt,Da=new PP,oC=new PP,To=new dt;class am extends Wg{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fNe++}),this.uuid=EP(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(L_e(e)?z_e:j_e)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const u=new ir().getNormalMatrix(e);r.applyNormalMatrix(u),r.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return El.makeRotationFromQuaternion(e),this.applyMatrix4(El),this}rotateX(e){return El.makeRotationX(e),this.applyMatrix4(El),this}rotateY(e){return El.makeRotationY(e),this.applyMatrix4(El),this}rotateZ(e){return El.makeRotationZ(e),this.applyMatrix4(El),this}translate(e,n,r){return El.makeTranslation(e,n,r),this.applyMatrix4(El),this}scale(e,n,r){return El.makeScale(e,n,r),this.applyMatrix4(El),this}lookAt(e){return t8.lookAt(e),t8.updateMatrix(),this.applyMatrix4(t8.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Kb).negate(),this.translate(Kb.x,Kb.y,Kb.z),this}setFromPoints(e){const n=[];for(let r=0,o=e.length;r<o;r++){const u=e[r];n.push(u.x,u.y,u.z||0)}return this.setAttribute("position",new Hc(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new PP);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new dt(-1/0,-1/0,-1/0),new dt(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,o=n.length;r<o;r++){const u=n[r];Da.setFromBufferAttribute(u),this.morphTargetsRelative?(To.addVectors(this.boundingBox.min,Da.min),this.boundingBox.expandByPoint(To),To.addVectors(this.boundingBox.max,Da.max),this.boundingBox.expandByPoint(To)):(this.boundingBox.expandByPoint(Da.min),this.boundingBox.expandByPoint(Da.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new bG);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new dt,1/0);return}if(e){const r=this.boundingSphere.center;if(Da.setFromBufferAttribute(e),n)for(let u=0,h=n.length;u<h;u++){const m=n[u];oC.setFromBufferAttribute(m),this.morphTargetsRelative?(To.addVectors(Da.min,oC.min),Da.expandByPoint(To),To.addVectors(Da.max,oC.max),Da.expandByPoint(To)):(Da.expandByPoint(oC.min),Da.expandByPoint(oC.max))}Da.getCenter(r);let o=0;for(let u=0,h=e.count;u<h;u++)To.fromBufferAttribute(e,u),o=Math.max(o,r.distanceToSquared(To));if(n)for(let u=0,h=n.length;u<h;u++){const m=n[u],_=this.morphTargetsRelative;for(let x=0,M=m.count;x<M;x++)To.fromBufferAttribute(m,x),_&&(Kb.fromBufferAttribute(e,x),To.add(Kb)),o=Math.max(o,r.distanceToSquared(To))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,o=n.position.array,u=n.normal.array,h=n.uv.array,m=o.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zc(new Float32Array(4*m),4));const _=this.getAttribute("tangent").array,x=[],M=[];for(let ye=0;ye<m;ye++)x[ye]=new dt,M[ye]=new dt;const R=new dt,N=new dt,H=new dt,Q=new kr,j=new kr,z=new kr,U=new dt,C=new dt;function K(ye,St,kt){R.fromArray(o,ye*3),N.fromArray(o,St*3),H.fromArray(o,kt*3),Q.fromArray(h,ye*2),j.fromArray(h,St*2),z.fromArray(h,kt*2),N.sub(R),H.sub(R),j.sub(Q),z.sub(Q);const it=1/(j.x*z.y-z.x*j.y);isFinite(it)&&(U.copy(N).multiplyScalar(z.y).addScaledVector(H,-j.y).multiplyScalar(it),C.copy(H).multiplyScalar(j.x).addScaledVector(N,-z.x).multiplyScalar(it),x[ye].add(U),x[St].add(U),x[kt].add(U),M[ye].add(C),M[St].add(C),M[kt].add(C))}let te=this.groups;te.length===0&&(te=[{start:0,count:r.length}]);for(let ye=0,St=te.length;ye<St;++ye){const kt=te[ye],it=kt.start,me=kt.count;for(let lt=it,Fe=it+me;lt<Fe;lt+=3)K(r[lt+0],r[lt+1],r[lt+2])}const pe=new dt,Z=new dt,be=new dt,Pe=new dt;function G(ye){be.fromArray(u,ye*3),Pe.copy(be);const St=x[ye];pe.copy(St),pe.sub(be.multiplyScalar(be.dot(St))).normalize(),Z.crossVectors(Pe,St);const it=Z.dot(M[ye])<0?-1:1;_[ye*4]=pe.x,_[ye*4+1]=pe.y,_[ye*4+2]=pe.z,_[ye*4+3]=it}for(let ye=0,St=te.length;ye<St;++ye){const kt=te[ye],it=kt.start,me=kt.count;for(let lt=it,Fe=it+me;lt<Fe;lt+=3)G(r[lt+0]),G(r[lt+1]),G(r[lt+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new zc(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let N=0,H=r.count;N<H;N++)r.setXYZ(N,0,0,0);const o=new dt,u=new dt,h=new dt,m=new dt,_=new dt,x=new dt,M=new dt,R=new dt;if(e)for(let N=0,H=e.count;N<H;N+=3){const Q=e.getX(N+0),j=e.getX(N+1),z=e.getX(N+2);o.fromBufferAttribute(n,Q),u.fromBufferAttribute(n,j),h.fromBufferAttribute(n,z),M.subVectors(h,u),R.subVectors(o,u),M.cross(R),m.fromBufferAttribute(r,Q),_.fromBufferAttribute(r,j),x.fromBufferAttribute(r,z),m.add(M),_.add(M),x.add(M),r.setXYZ(Q,m.x,m.y,m.z),r.setXYZ(j,_.x,_.y,_.z),r.setXYZ(z,x.x,x.y,x.z)}else for(let N=0,H=n.count;N<H;N+=3)o.fromBufferAttribute(n,N+0),u.fromBufferAttribute(n,N+1),h.fromBufferAttribute(n,N+2),M.subVectors(h,u),R.subVectors(o,u),M.cross(R),r.setXYZ(N+0,M.x,M.y,M.z),r.setXYZ(N+1,M.x,M.y,M.z),r.setXYZ(N+2,M.x,M.y,M.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)To.fromBufferAttribute(e,n),To.normalize(),e.setXYZ(n,To.x,To.y,To.z)}toNonIndexed(){function e(m,_){const x=m.array,M=m.itemSize,R=m.normalized,N=new x.constructor(_.length*M);let H=0,Q=0;for(let j=0,z=_.length;j<z;j++){m.isInterleavedBufferAttribute?H=_[j]*m.data.stride+m.offset:H=_[j]*M;for(let U=0;U<M;U++)N[Q++]=x[H++]}return new zc(N,M,R)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new am,r=this.index.array,o=this.attributes;for(const m in o){const _=o[m],x=e(_,r);n.setAttribute(m,x)}const u=this.morphAttributes;for(const m in u){const _=[],x=u[m];for(let M=0,R=x.length;M<R;M++){const N=x[M],H=e(N,r);_.push(H)}n.morphAttributes[m]=_}n.morphTargetsRelative=this.morphTargetsRelative;const h=this.groups;for(let m=0,_=h.length;m<_;m++){const x=h[m];n.addGroup(x.start,x.count,x.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const _=this.parameters;for(const x in _)_[x]!==void 0&&(e[x]=_[x]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const _ in r){const x=r[_];e.data.attributes[_]=x.toJSON(e.data)}const o={};let u=!1;for(const _ in this.morphAttributes){const x=this.morphAttributes[_],M=[];for(let R=0,N=x.length;R<N;R++){const H=x[R];M.push(H.toJSON(e.data))}M.length>0&&(o[_]=M,u=!0)}u&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const h=this.groups;h.length>0&&(e.data.groups=JSON.parse(JSON.stringify(h)));const m=this.boundingSphere;return m!==null&&(e.data.boundingSphere={center:m.center.toArray(),radius:m.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const o=e.attributes;for(const x in o){const M=o[x];this.setAttribute(x,M.clone(n))}const u=e.morphAttributes;for(const x in u){const M=[],R=u[x];for(let N=0,H=R.length;N<H;N++)M.push(R[N].clone(n));this.morphAttributes[x]=M}this.morphTargetsRelative=e.morphTargetsRelative;const h=e.groups;for(let x=0,M=h.length;x<M;x++){const R=h[x];this.addGroup(R.start,R.count,R.materialIndex)}const m=e.boundingBox;m!==null&&(this.boundingBox=m.clone());const _=e.boundingSphere;return _!==null&&(this.boundingSphere=_.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const gve=new uo,rg=new sNe,_D=new bG,yve=new dt,qb=new dt,Xb=new dt,Yb=new dt,n8=new dt,wD=new dt,xD=new kr,SD=new kr,ED=new kr,bve=new dt,_ve=new dt,wve=new dt,CD=new dt,PD=new dt;class Dl extends Do{constructor(e=new am,n=new _G){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const o=n[r[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let u=0,h=o.length;u<h;u++){const m=o[u].name||String(u);this.morphTargetInfluences.push(0),this.morphTargetDictionary[m]=u}}}}getVertexPosition(e,n){const r=this.geometry,o=r.attributes.position,u=r.morphAttributes.position,h=r.morphTargetsRelative;n.fromBufferAttribute(o,e);const m=this.morphTargetInfluences;if(u&&m){wD.set(0,0,0);for(let _=0,x=u.length;_<x;_++){const M=m[_],R=u[_];M!==0&&(n8.fromBufferAttribute(R,e),h?wD.addScaledVector(n8,M):wD.addScaledVector(n8.sub(n),M))}n.add(wD)}return n}raycast(e,n){const r=this.geometry,o=this.material,u=this.matrixWorld;o!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),_D.copy(r.boundingSphere),_D.applyMatrix4(u),rg.copy(e.ray).recast(e.near),!(_D.containsPoint(rg.origin)===!1&&(rg.intersectSphere(_D,yve)===null||rg.origin.distanceToSquared(yve)>(e.far-e.near)**2))&&(gve.copy(u).invert(),rg.copy(e.ray).applyMatrix4(gve),!(r.boundingBox!==null&&rg.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,rg)))}_computeIntersections(e,n,r){let o;const u=this.geometry,h=this.material,m=u.index,_=u.attributes.position,x=u.attributes.uv,M=u.attributes.uv1,R=u.attributes.normal,N=u.groups,H=u.drawRange;if(m!==null)if(Array.isArray(h))for(let Q=0,j=N.length;Q<j;Q++){const z=N[Q],U=h[z.materialIndex],C=Math.max(z.start,H.start),K=Math.min(m.count,Math.min(z.start+z.count,H.start+H.count));for(let te=C,pe=K;te<pe;te+=3){const Z=m.getX(te),be=m.getX(te+1),Pe=m.getX(te+2);o=kD(this,U,e,r,x,M,R,Z,be,Pe),o&&(o.faceIndex=Math.floor(te/3),o.face.materialIndex=z.materialIndex,n.push(o))}}else{const Q=Math.max(0,H.start),j=Math.min(m.count,H.start+H.count);for(let z=Q,U=j;z<U;z+=3){const C=m.getX(z),K=m.getX(z+1),te=m.getX(z+2);o=kD(this,h,e,r,x,M,R,C,K,te),o&&(o.faceIndex=Math.floor(z/3),n.push(o))}}else if(_!==void 0)if(Array.isArray(h))for(let Q=0,j=N.length;Q<j;Q++){const z=N[Q],U=h[z.materialIndex],C=Math.max(z.start,H.start),K=Math.min(_.count,Math.min(z.start+z.count,H.start+H.count));for(let te=C,pe=K;te<pe;te+=3){const Z=te,be=te+1,Pe=te+2;o=kD(this,U,e,r,x,M,R,Z,be,Pe),o&&(o.faceIndex=Math.floor(te/3),o.face.materialIndex=z.materialIndex,n.push(o))}}else{const Q=Math.max(0,H.start),j=Math.min(_.count,H.start+H.count);for(let z=Q,U=j;z<U;z+=3){const C=z,K=z+1,te=z+2;o=kD(this,h,e,r,x,M,R,C,K,te),o&&(o.faceIndex=Math.floor(z/3),n.push(o))}}}}function mNe(t,e,n,r,o,u,h,m){let _;if(e.side===ga?_=r.intersectTriangle(h,u,o,!0,m):_=r.intersectTriangle(o,u,h,e.side===Mh,m),_===null)return null;PD.copy(m),PD.applyMatrix4(t.matrixWorld);const x=n.ray.origin.distanceTo(PD);return x<n.near||x>n.far?null:{distance:x,point:PD.clone(),object:t}}function kD(t,e,n,r,o,u,h,m,_,x){t.getVertexPosition(m,qb),t.getVertexPosition(_,Xb),t.getVertexPosition(x,Yb);const M=mNe(t,e,n,r,qb,Xb,Yb,CD);if(M){o&&(xD.fromBufferAttribute(o,m),SD.fromBufferAttribute(o,_),ED.fromBufferAttribute(o,x),M.uv=Lu.getInterpolation(CD,qb,Xb,Yb,xD,SD,ED,new kr)),u&&(xD.fromBufferAttribute(u,m),SD.fromBufferAttribute(u,_),ED.fromBufferAttribute(u,x),M.uv1=Lu.getInterpolation(CD,qb,Xb,Yb,xD,SD,ED,new kr),M.uv2=M.uv1),h&&(bve.fromBufferAttribute(h,m),_ve.fromBufferAttribute(h,_),wve.fromBufferAttribute(h,x),M.normal=Lu.getInterpolation(CD,qb,Xb,Yb,bve,_ve,wve,new dt),M.normal.dot(r.direction)>0&&M.normal.multiplyScalar(-1));const R={a:m,b:_,c:x,normal:new dt,materialIndex:0};Lu.getNormal(qb,Xb,Yb,R.normal),M.face=R}return M}class TP extends am{constructor(e=1,n=1,r=1,o=1,u=1,h=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:o,heightSegments:u,depthSegments:h};const m=this;o=Math.floor(o),u=Math.floor(u),h=Math.floor(h);const _=[],x=[],M=[],R=[];let N=0,H=0;Q("z","y","x",-1,-1,r,n,e,h,u,0),Q("z","y","x",1,-1,r,n,-e,h,u,1),Q("x","z","y",1,1,e,r,n,o,h,2),Q("x","z","y",1,-1,e,r,-n,o,h,3),Q("x","y","z",1,-1,e,n,r,o,u,4),Q("x","y","z",-1,-1,e,n,-r,o,u,5),this.setIndex(_),this.setAttribute("position",new Hc(x,3)),this.setAttribute("normal",new Hc(M,3)),this.setAttribute("uv",new Hc(R,2));function Q(j,z,U,C,K,te,pe,Z,be,Pe,G){const ye=te/be,St=pe/Pe,kt=te/2,it=pe/2,me=Z/2,lt=be+1,Fe=Pe+1;let vt=0,Ge=0;const mt=new dt;for(let Je=0;Je<Fe;Je++){const Be=Je*St-it;for(let nt=0;nt<lt;nt++){const $t=nt*ye-kt;mt[j]=$t*C,mt[z]=Be*K,mt[U]=me,x.push(mt.x,mt.y,mt.z),mt[j]=0,mt[z]=0,mt[U]=Z>0?1:-1,M.push(mt.x,mt.y,mt.z),R.push(nt/be),R.push(1-Je/Pe),vt+=1}}for(let Je=0;Je<Pe;Je++)for(let Be=0;Be<be;Be++){const nt=N+Be+lt*Je,$t=N+Be+lt*(Je+1),Ut=N+(Be+1)+lt*(Je+1),Dt=N+(Be+1)+lt*Je;_.push(nt,$t,Dt),_.push($t,Ut,Dt),Ge+=6}m.addGroup(H,Ge,G),H+=Ge,N+=vt}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TP(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function W_(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const o=t[n][r];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=o.clone():Array.isArray(o)?e[n][r]=o.slice():e[n][r]=o}}return e}function Fs(t){const e={};for(let n=0;n<t.length;n++){const r=W_(t[n]);for(const o in r)e[o]=r[o]}return e}function vNe(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function H_e(t){return t.getRenderTarget()===null?t.outputColorSpace:$c}const gNe={clone:W_,merge:Fs};var yNe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,bNe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ng extends ew{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=yNe,this.fragmentShader=bNe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=W_(e.uniforms),this.uniformsGroups=vNe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const o in this.uniforms){const h=this.uniforms[o].value;h&&h.isTexture?n.uniforms[o]={type:"t",value:h.toJSON(e).uuid}:h&&h.isColor?n.uniforms[o]={type:"c",value:h.getHex()}:h&&h.isVector2?n.uniforms[o]={type:"v2",value:h.toArray()}:h&&h.isVector3?n.uniforms[o]={type:"v3",value:h.toArray()}:h&&h.isVector4?n.uniforms[o]={type:"v4",value:h.toArray()}:h&&h.isMatrix3?n.uniforms[o]={type:"m3",value:h.toArray()}:h&&h.isMatrix4?n.uniforms[o]={type:"m4",value:h.toArray()}:n.uniforms[o]={value:h}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const o in this.extensions)this.extensions[o]===!0&&(r[o]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class G_e extends Do{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new uo,this.projectionMatrix=new uo,this.projectionMatrixInverse=new uo,this.coordinateSystem=gh}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Rl extends G_e{constructor(e=50,n=1,r=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=o,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=jH*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(U6*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return jH*2*Math.atan(Math.tan(U6*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,o,u,h){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=o,this.view.width=u,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(U6*.5*this.fov)/this.zoom,r=2*n,o=this.aspect*r,u=-.5*o;const h=this.view;if(this.view!==null&&this.view.enabled){const _=h.fullWidth,x=h.fullHeight;u+=h.offsetX*o/_,n-=h.offsetY*r/x,o*=h.width/_,r*=h.height/x}const m=this.filmOffset;m!==0&&(u+=e*m/this.getFilmWidth()),this.projectionMatrix.makePerspective(u,u+o,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Zb=-90,Qb=1;class _Ne extends Do{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null;const o=new Rl(Zb,Qb,e,n);o.layers=this.layers,this.add(o);const u=new Rl(Zb,Qb,e,n);u.layers=this.layers,this.add(u);const h=new Rl(Zb,Qb,e,n);h.layers=this.layers,this.add(h);const m=new Rl(Zb,Qb,e,n);m.layers=this.layers,this.add(m);const _=new Rl(Zb,Qb,e,n);_.layers=this.layers,this.add(_);const x=new Rl(Zb,Qb,e,n);x.layers=this.layers,this.add(x)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,o,u,h,m,_]=n;for(const x of n)this.remove(x);if(e===gh)r.up.set(0,1,0),r.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),u.up.set(0,0,-1),u.lookAt(0,1,0),h.up.set(0,0,1),h.lookAt(0,-1,0),m.up.set(0,1,0),m.lookAt(0,0,1),_.up.set(0,1,0),_.lookAt(0,0,-1);else if(e===I3)r.up.set(0,-1,0),r.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),u.up.set(0,0,1),u.lookAt(0,1,0),h.up.set(0,0,-1),h.lookAt(0,-1,0),m.up.set(0,-1,0),m.lookAt(0,0,1),_.up.set(0,-1,0),_.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const x of n)this.add(x),x.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,u,h,m,_,x]=this.children,M=e.getRenderTarget(),R=e.xr.enabled;e.xr.enabled=!1;const N=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,o),e.setRenderTarget(r,1),e.render(n,u),e.setRenderTarget(r,2),e.render(n,h),e.setRenderTarget(r,3),e.render(n,m),e.setRenderTarget(r,4),e.render(n,_),r.texture.generateMipmaps=N,e.setRenderTarget(r,5),e.render(n,x),e.setRenderTarget(M),e.xr.enabled=R,r.texture.needsPMREMUpdate=!0}}class $_e extends Ba{constructor(e,n,r,o,u,h,m,_,x,M){e=e!==void 0?e:[],n=n!==void 0?n:H_,super(e,n,r,o,u,h,m,_,x,M),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class wNe extends Lg{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},o=[r,r,r,r,r,r];n.encoding!==void 0&&(DC("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===kg?tr:Tg),this.texture=new $_e(o,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Il}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new TP(5,5,5),u=new Ng({name:"CubemapFromEquirect",uniforms:W_(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:ga,blending:$f});u.uniforms.tEquirect.value=n;const h=new Dl(o,u),m=n.minFilter;return n.minFilter===iP&&(n.minFilter=Il),new _Ne(1,10,this).update(e,h),n.minFilter=m,h.geometry.dispose(),h.material.dispose(),this}clear(e,n,r,o){const u=e.getRenderTarget();for(let h=0;h<6;h++)e.setRenderTarget(this,h),e.clear(n,r,o);e.setRenderTarget(u)}}const r8=new dt,xNe=new dt,SNe=new ir;class hg{constructor(e=new dt(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,o){return this.normal.set(e,n,r),this.constant=o,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const o=r8.subVectors(r,n).cross(xNe.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(r8),o=this.normal.dot(r);if(o===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const u=-(e.start.dot(this.normal)+this.constant)/o;return u<0||u>1?null:n.copy(e.start).addScaledVector(r,u)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||SNe.getNormalMatrix(e),o=this.coplanarPoint(r8).applyMatrix4(e),u=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(u),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ig=new bG,TD=new dt;class wG{constructor(e=new hg,n=new hg,r=new hg,o=new hg,u=new hg,h=new hg){this.planes=[e,n,r,o,u,h]}set(e,n,r,o,u,h){const m=this.planes;return m[0].copy(e),m[1].copy(n),m[2].copy(r),m[3].copy(o),m[4].copy(u),m[5].copy(h),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=gh){const r=this.planes,o=e.elements,u=o[0],h=o[1],m=o[2],_=o[3],x=o[4],M=o[5],R=o[6],N=o[7],H=o[8],Q=o[9],j=o[10],z=o[11],U=o[12],C=o[13],K=o[14],te=o[15];if(r[0].setComponents(_-u,N-x,z-H,te-U).normalize(),r[1].setComponents(_+u,N+x,z+H,te+U).normalize(),r[2].setComponents(_+h,N+M,z+Q,te+C).normalize(),r[3].setComponents(_-h,N-M,z-Q,te-C).normalize(),r[4].setComponents(_-m,N-R,z-j,te-K).normalize(),n===gh)r[5].setComponents(_+m,N+R,z+j,te+K).normalize();else if(n===I3)r[5].setComponents(m,R,j,K).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ig.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),ig.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ig)}intersectsSprite(e){return ig.center.set(0,0,0),ig.radius=.7071067811865476,ig.applyMatrix4(e.matrixWorld),this.intersectsSphere(ig)}intersectsSphere(e){const n=this.planes,r=e.center,o=-e.radius;for(let u=0;u<6;u++)if(n[u].distanceToPoint(r)<o)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const o=n[r];if(TD.x=o.normal.x>0?e.max.x:e.min.x,TD.y=o.normal.y>0?e.max.y:e.min.y,TD.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(TD)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function W_e(){let t=null,e=!1,n=null,r=null;function o(u,h){n(u,h),r=t.requestAnimationFrame(o)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(o),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(u){n=u},setContext:function(u){t=u}}}function ENe(t,e){const n=e.isWebGL2,r=new WeakMap;function o(x,M){const R=x.array,N=x.usage,H=t.createBuffer();t.bindBuffer(M,H),t.bufferData(M,R,N),x.onUploadCallback();let Q;if(R instanceof Float32Array)Q=t.FLOAT;else if(R instanceof Uint16Array)if(x.isFloat16BufferAttribute)if(n)Q=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else Q=t.UNSIGNED_SHORT;else if(R instanceof Int16Array)Q=t.SHORT;else if(R instanceof Uint32Array)Q=t.UNSIGNED_INT;else if(R instanceof Int32Array)Q=t.INT;else if(R instanceof Int8Array)Q=t.BYTE;else if(R instanceof Uint8Array)Q=t.UNSIGNED_BYTE;else if(R instanceof Uint8ClampedArray)Q=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+R);return{buffer:H,type:Q,bytesPerElement:R.BYTES_PER_ELEMENT,version:x.version}}function u(x,M,R){const N=M.array,H=M.updateRange;t.bindBuffer(R,x),H.count===-1?t.bufferSubData(R,0,N):(n?t.bufferSubData(R,H.offset*N.BYTES_PER_ELEMENT,N,H.offset,H.count):t.bufferSubData(R,H.offset*N.BYTES_PER_ELEMENT,N.subarray(H.offset,H.offset+H.count)),H.count=-1),M.onUploadCallback()}function h(x){return x.isInterleavedBufferAttribute&&(x=x.data),r.get(x)}function m(x){x.isInterleavedBufferAttribute&&(x=x.data);const M=r.get(x);M&&(t.deleteBuffer(M.buffer),r.delete(x))}function _(x,M){if(x.isGLBufferAttribute){const N=r.get(x);(!N||N.version<x.version)&&r.set(x,{buffer:x.buffer,type:x.type,bytesPerElement:x.elementSize,version:x.version});return}x.isInterleavedBufferAttribute&&(x=x.data);const R=r.get(x);R===void 0?r.set(x,o(x,M)):R.version<x.version&&(u(R.buffer,x,M),R.version=x.version)}return{get:h,remove:m,update:_}}class xG extends am{constructor(e=1,n=1,r=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:o};const u=e/2,h=n/2,m=Math.floor(r),_=Math.floor(o),x=m+1,M=_+1,R=e/m,N=n/_,H=[],Q=[],j=[],z=[];for(let U=0;U<M;U++){const C=U*N-h;for(let K=0;K<x;K++){const te=K*R-u;Q.push(te,-C,0),j.push(0,0,1),z.push(K/m),z.push(1-U/_)}}for(let U=0;U<_;U++)for(let C=0;C<m;C++){const K=C+x*U,te=C+x*(U+1),pe=C+1+x*(U+1),Z=C+1+x*U;H.push(K,te,Z),H.push(te,pe,Z)}this.setIndex(H),this.setAttribute("position",new Hc(Q,3)),this.setAttribute("normal",new Hc(j,3)),this.setAttribute("uv",new Hc(z,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xG(e.width,e.height,e.widthSegments,e.heightSegments)}}var CNe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,PNe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,kNe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,TNe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,MNe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,ANe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,INe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,RNe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ONe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,DNe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,LNe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,NNe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,FNe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,BNe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,UNe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,VNe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,jNe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,zNe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,HNe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,GNe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,$Ne=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,WNe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,KNe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,qNe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,XNe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,YNe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,ZNe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,QNe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,JNe="gl_FragColor = linearToOutputTexel( gl_FragColor );",e5e=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,t5e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,n5e=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,r5e=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,i5e=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,o5e=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,s5e=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,a5e=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,l5e=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,u5e=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,c5e=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,d5e=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,h5e=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,p5e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,f5e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,m5e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,v5e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,g5e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,y5e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,b5e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_5e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,w5e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,x5e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,S5e=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,E5e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,C5e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,P5e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,k5e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,T5e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,M5e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,A5e=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,I5e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,R5e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,O5e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,D5e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,L5e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,N5e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,F5e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,B5e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,U5e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,V5e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,j5e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,z5e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,H5e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,G5e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,$5e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,W5e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,K5e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,q5e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,X5e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Y5e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Z5e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Q5e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,J5e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,eFe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,tFe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,nFe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,rFe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,iFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,oFe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,sFe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,aFe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,lFe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,uFe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,cFe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,dFe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hFe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,pFe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,fFe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,mFe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,vFe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,gFe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,yFe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,bFe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_Fe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,wFe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const xFe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,SFe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EFe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,CFe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,PFe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kFe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,TFe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,MFe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,AFe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,IFe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,RFe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,OFe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,DFe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,LFe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,NFe=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,FFe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BFe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UFe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VFe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,jFe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zFe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,HFe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,GFe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,$Fe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WFe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,KFe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,qFe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XFe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YFe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ZFe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,QFe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JFe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,eBe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,tBe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,er={alphahash_fragment:CNe,alphahash_pars_fragment:PNe,alphamap_fragment:kNe,alphamap_pars_fragment:TNe,alphatest_fragment:MNe,alphatest_pars_fragment:ANe,aomap_fragment:INe,aomap_pars_fragment:RNe,begin_vertex:ONe,beginnormal_vertex:DNe,bsdfs:LNe,iridescence_fragment:NNe,bumpmap_pars_fragment:FNe,clipping_planes_fragment:BNe,clipping_planes_pars_fragment:UNe,clipping_planes_pars_vertex:VNe,clipping_planes_vertex:jNe,color_fragment:zNe,color_pars_fragment:HNe,color_pars_vertex:GNe,color_vertex:$Ne,common:WNe,cube_uv_reflection_fragment:KNe,defaultnormal_vertex:qNe,displacementmap_pars_vertex:XNe,displacementmap_vertex:YNe,emissivemap_fragment:ZNe,emissivemap_pars_fragment:QNe,colorspace_fragment:JNe,colorspace_pars_fragment:e5e,envmap_fragment:t5e,envmap_common_pars_fragment:n5e,envmap_pars_fragment:r5e,envmap_pars_vertex:i5e,envmap_physical_pars_fragment:v5e,envmap_vertex:o5e,fog_vertex:s5e,fog_pars_vertex:a5e,fog_fragment:l5e,fog_pars_fragment:u5e,gradientmap_pars_fragment:c5e,lightmap_fragment:d5e,lightmap_pars_fragment:h5e,lights_lambert_fragment:p5e,lights_lambert_pars_fragment:f5e,lights_pars_begin:m5e,lights_toon_fragment:g5e,lights_toon_pars_fragment:y5e,lights_phong_fragment:b5e,lights_phong_pars_fragment:_5e,lights_physical_fragment:w5e,lights_physical_pars_fragment:x5e,lights_fragment_begin:S5e,lights_fragment_maps:E5e,lights_fragment_end:C5e,logdepthbuf_fragment:P5e,logdepthbuf_pars_fragment:k5e,logdepthbuf_pars_vertex:T5e,logdepthbuf_vertex:M5e,map_fragment:A5e,map_pars_fragment:I5e,map_particle_fragment:R5e,map_particle_pars_fragment:O5e,metalnessmap_fragment:D5e,metalnessmap_pars_fragment:L5e,morphcolor_vertex:N5e,morphnormal_vertex:F5e,morphtarget_pars_vertex:B5e,morphtarget_vertex:U5e,normal_fragment_begin:V5e,normal_fragment_maps:j5e,normal_pars_fragment:z5e,normal_pars_vertex:H5e,normal_vertex:G5e,normalmap_pars_fragment:$5e,clearcoat_normal_fragment_begin:W5e,clearcoat_normal_fragment_maps:K5e,clearcoat_pars_fragment:q5e,iridescence_pars_fragment:X5e,opaque_fragment:Y5e,packing:Z5e,premultiplied_alpha_fragment:Q5e,project_vertex:J5e,dithering_fragment:eFe,dithering_pars_fragment:tFe,roughnessmap_fragment:nFe,roughnessmap_pars_fragment:rFe,shadowmap_pars_fragment:iFe,shadowmap_pars_vertex:oFe,shadowmap_vertex:sFe,shadowmask_pars_fragment:aFe,skinbase_vertex:lFe,skinning_pars_vertex:uFe,skinning_vertex:cFe,skinnormal_vertex:dFe,specularmap_fragment:hFe,specularmap_pars_fragment:pFe,tonemapping_fragment:fFe,tonemapping_pars_fragment:mFe,transmission_fragment:vFe,transmission_pars_fragment:gFe,uv_pars_fragment:yFe,uv_pars_vertex:bFe,uv_vertex:_Fe,worldpos_vertex:wFe,background_vert:xFe,background_frag:SFe,backgroundCube_vert:EFe,backgroundCube_frag:CFe,cube_vert:PFe,cube_frag:kFe,depth_vert:TFe,depth_frag:MFe,distanceRGBA_vert:AFe,distanceRGBA_frag:IFe,equirect_vert:RFe,equirect_frag:OFe,linedashed_vert:DFe,linedashed_frag:LFe,meshbasic_vert:NFe,meshbasic_frag:FFe,meshlambert_vert:BFe,meshlambert_frag:UFe,meshmatcap_vert:VFe,meshmatcap_frag:jFe,meshnormal_vert:zFe,meshnormal_frag:HFe,meshphong_vert:GFe,meshphong_frag:$Fe,meshphysical_vert:WFe,meshphysical_frag:KFe,meshtoon_vert:qFe,meshtoon_frag:XFe,points_vert:YFe,points_frag:ZFe,shadow_vert:QFe,shadow_frag:JFe,sprite_vert:eBe,sprite_frag:tBe},Yt={common:{diffuse:{value:new Pr(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ir},alphaMap:{value:null},alphaMapTransform:{value:new ir},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ir}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ir}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ir}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ir},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ir},normalScale:{value:new kr(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ir},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ir}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ir}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ir}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ir},alphaTest:{value:0},uvTransform:{value:new ir}},sprite:{diffuse:{value:new Pr(16777215)},opacity:{value:1},center:{value:new kr(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ir},alphaMap:{value:null},alphaMapTransform:{value:new ir},alphaTest:{value:0}}},Fc={basic:{uniforms:Fs([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.fog]),vertexShader:er.meshbasic_vert,fragmentShader:er.meshbasic_frag},lambert:{uniforms:Fs([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,Yt.lights,{emissive:{value:new Pr(0)}}]),vertexShader:er.meshlambert_vert,fragmentShader:er.meshlambert_frag},phong:{uniforms:Fs([Yt.common,Yt.specularmap,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,Yt.lights,{emissive:{value:new Pr(0)},specular:{value:new Pr(1118481)},shininess:{value:30}}]),vertexShader:er.meshphong_vert,fragmentShader:er.meshphong_frag},standard:{uniforms:Fs([Yt.common,Yt.envmap,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.roughnessmap,Yt.metalnessmap,Yt.fog,Yt.lights,{emissive:{value:new Pr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:er.meshphysical_vert,fragmentShader:er.meshphysical_frag},toon:{uniforms:Fs([Yt.common,Yt.aomap,Yt.lightmap,Yt.emissivemap,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.gradientmap,Yt.fog,Yt.lights,{emissive:{value:new Pr(0)}}]),vertexShader:er.meshtoon_vert,fragmentShader:er.meshtoon_frag},matcap:{uniforms:Fs([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,Yt.fog,{matcap:{value:null}}]),vertexShader:er.meshmatcap_vert,fragmentShader:er.meshmatcap_frag},points:{uniforms:Fs([Yt.points,Yt.fog]),vertexShader:er.points_vert,fragmentShader:er.points_frag},dashed:{uniforms:Fs([Yt.common,Yt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:er.linedashed_vert,fragmentShader:er.linedashed_frag},depth:{uniforms:Fs([Yt.common,Yt.displacementmap]),vertexShader:er.depth_vert,fragmentShader:er.depth_frag},normal:{uniforms:Fs([Yt.common,Yt.bumpmap,Yt.normalmap,Yt.displacementmap,{opacity:{value:1}}]),vertexShader:er.meshnormal_vert,fragmentShader:er.meshnormal_frag},sprite:{uniforms:Fs([Yt.sprite,Yt.fog]),vertexShader:er.sprite_vert,fragmentShader:er.sprite_frag},background:{uniforms:{uvTransform:{value:new ir},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:er.background_vert,fragmentShader:er.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:er.backgroundCube_vert,fragmentShader:er.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:er.cube_vert,fragmentShader:er.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:er.equirect_vert,fragmentShader:er.equirect_frag},distanceRGBA:{uniforms:Fs([Yt.common,Yt.displacementmap,{referencePosition:{value:new dt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:er.distanceRGBA_vert,fragmentShader:er.distanceRGBA_frag},shadow:{uniforms:Fs([Yt.lights,Yt.fog,{color:{value:new Pr(0)},opacity:{value:1}}]),vertexShader:er.shadow_vert,fragmentShader:er.shadow_frag}};Fc.physical={uniforms:Fs([Fc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ir},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ir},clearcoatNormalScale:{value:new kr(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ir},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ir},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ir},sheen:{value:0},sheenColor:{value:new Pr(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ir},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ir},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ir},transmissionSamplerSize:{value:new kr},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ir},attenuationDistance:{value:0},attenuationColor:{value:new Pr(0)},specularColor:{value:new Pr(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ir},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ir},anisotropyVector:{value:new kr},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ir}}]),vertexShader:er.meshphysical_vert,fragmentShader:er.meshphysical_frag};const MD={r:0,b:0,g:0};function nBe(t,e,n,r,o,u,h){const m=new Pr(0);let _=u===!0?0:1,x,M,R=null,N=0,H=null;function Q(z,U){let C=!1,K=U.isScene===!0?U.background:null;switch(K&&K.isTexture&&(K=(U.backgroundBlurriness>0?n:e).get(K)),K===null?j(m,_):K&&K.isColor&&(j(K,1),C=!0),t.xr.getEnvironmentBlendMode()){case"opaque":C=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,h),C=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,h),C=!0;break}(t.autoClear||C)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),K&&(K.isCubeTexture||K.mapping===fL)?(M===void 0&&(M=new Dl(new TP(1,1,1),new Ng({name:"BackgroundCubeMaterial",uniforms:W_(Fc.backgroundCube.uniforms),vertexShader:Fc.backgroundCube.vertexShader,fragmentShader:Fc.backgroundCube.fragmentShader,side:ga,depthTest:!1,depthWrite:!1,fog:!1})),M.geometry.deleteAttribute("normal"),M.geometry.deleteAttribute("uv"),M.onBeforeRender=function(Z,be,Pe){this.matrixWorld.copyPosition(Pe.matrixWorld)},Object.defineProperty(M.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(M)),M.material.uniforms.envMap.value=K,M.material.uniforms.flipEnvMap.value=K.isCubeTexture&&K.isRenderTargetTexture===!1?-1:1,M.material.uniforms.backgroundBlurriness.value=U.backgroundBlurriness,M.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,M.material.toneMapped=K.colorSpace!==tr,(R!==K||N!==K.version||H!==t.toneMapping)&&(M.material.needsUpdate=!0,R=K,N=K.version,H=t.toneMapping),M.layers.enableAll(),z.unshift(M,M.geometry,M.material,0,0,null)):K&&K.isTexture&&(x===void 0&&(x=new Dl(new xG(2,2),new Ng({name:"BackgroundMaterial",uniforms:W_(Fc.background.uniforms),vertexShader:Fc.background.vertexShader,fragmentShader:Fc.background.fragmentShader,side:Mh,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),Object.defineProperty(x.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(x)),x.material.uniforms.t2D.value=K,x.material.uniforms.backgroundIntensity.value=U.backgroundIntensity,x.material.toneMapped=K.colorSpace!==tr,K.matrixAutoUpdate===!0&&K.updateMatrix(),x.material.uniforms.uvTransform.value.copy(K.matrix),(R!==K||N!==K.version||H!==t.toneMapping)&&(x.material.needsUpdate=!0,R=K,N=K.version,H=t.toneMapping),x.layers.enableAll(),z.unshift(x,x.geometry,x.material,0,0,null))}function j(z,U){z.getRGB(MD,H_e(t)),r.buffers.color.setClear(MD.r,MD.g,MD.b,U,h)}return{getClearColor:function(){return m},setClearColor:function(z,U=1){m.set(z),_=U,j(m,_)},getClearAlpha:function(){return _},setClearAlpha:function(z){_=z,j(m,_)},render:Q}}function rBe(t,e,n,r){const o=t.getParameter(t.MAX_VERTEX_ATTRIBS),u=r.isWebGL2?null:e.get("OES_vertex_array_object"),h=r.isWebGL2||u!==null,m={},_=z(null);let x=_,M=!1;function R(me,lt,Fe,vt,Ge){let mt=!1;if(h){const Je=j(vt,Fe,lt);x!==Je&&(x=Je,H(x.object)),mt=U(me,vt,Fe,Ge),mt&&C(me,vt,Fe,Ge)}else{const Je=lt.wireframe===!0;(x.geometry!==vt.id||x.program!==Fe.id||x.wireframe!==Je)&&(x.geometry=vt.id,x.program=Fe.id,x.wireframe=Je,mt=!0)}Ge!==null&&n.update(Ge,t.ELEMENT_ARRAY_BUFFER),(mt||M)&&(M=!1,Pe(me,lt,Fe,vt),Ge!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(Ge).buffer))}function N(){return r.isWebGL2?t.createVertexArray():u.createVertexArrayOES()}function H(me){return r.isWebGL2?t.bindVertexArray(me):u.bindVertexArrayOES(me)}function Q(me){return r.isWebGL2?t.deleteVertexArray(me):u.deleteVertexArrayOES(me)}function j(me,lt,Fe){const vt=Fe.wireframe===!0;let Ge=m[me.id];Ge===void 0&&(Ge={},m[me.id]=Ge);let mt=Ge[lt.id];mt===void 0&&(mt={},Ge[lt.id]=mt);let Je=mt[vt];return Je===void 0&&(Je=z(N()),mt[vt]=Je),Je}function z(me){const lt=[],Fe=[],vt=[];for(let Ge=0;Ge<o;Ge++)lt[Ge]=0,Fe[Ge]=0,vt[Ge]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:lt,enabledAttributes:Fe,attributeDivisors:vt,object:me,attributes:{},index:null}}function U(me,lt,Fe,vt){const Ge=x.attributes,mt=lt.attributes;let Je=0;const Be=Fe.getAttributes();for(const nt in Be)if(Be[nt].location>=0){const Ut=Ge[nt];let Dt=mt[nt];if(Dt===void 0&&(nt==="instanceMatrix"&&me.instanceMatrix&&(Dt=me.instanceMatrix),nt==="instanceColor"&&me.instanceColor&&(Dt=me.instanceColor)),Ut===void 0||Ut.attribute!==Dt||Dt&&Ut.data!==Dt.data)return!0;Je++}return x.attributesNum!==Je||x.index!==vt}function C(me,lt,Fe,vt){const Ge={},mt=lt.attributes;let Je=0;const Be=Fe.getAttributes();for(const nt in Be)if(Be[nt].location>=0){let Ut=mt[nt];Ut===void 0&&(nt==="instanceMatrix"&&me.instanceMatrix&&(Ut=me.instanceMatrix),nt==="instanceColor"&&me.instanceColor&&(Ut=me.instanceColor));const Dt={};Dt.attribute=Ut,Ut&&Ut.data&&(Dt.data=Ut.data),Ge[nt]=Dt,Je++}x.attributes=Ge,x.attributesNum=Je,x.index=vt}function K(){const me=x.newAttributes;for(let lt=0,Fe=me.length;lt<Fe;lt++)me[lt]=0}function te(me){pe(me,0)}function pe(me,lt){const Fe=x.newAttributes,vt=x.enabledAttributes,Ge=x.attributeDivisors;Fe[me]=1,vt[me]===0&&(t.enableVertexAttribArray(me),vt[me]=1),Ge[me]!==lt&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](me,lt),Ge[me]=lt)}function Z(){const me=x.newAttributes,lt=x.enabledAttributes;for(let Fe=0,vt=lt.length;Fe<vt;Fe++)lt[Fe]!==me[Fe]&&(t.disableVertexAttribArray(Fe),lt[Fe]=0)}function be(me,lt,Fe,vt,Ge,mt,Je){Je===!0?t.vertexAttribIPointer(me,lt,Fe,Ge,mt):t.vertexAttribPointer(me,lt,Fe,vt,Ge,mt)}function Pe(me,lt,Fe,vt){if(r.isWebGL2===!1&&(me.isInstancedMesh||vt.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;K();const Ge=vt.attributes,mt=Fe.getAttributes(),Je=lt.defaultAttributeValues;for(const Be in mt){const nt=mt[Be];if(nt.location>=0){let $t=Ge[Be];if($t===void 0&&(Be==="instanceMatrix"&&me.instanceMatrix&&($t=me.instanceMatrix),Be==="instanceColor"&&me.instanceColor&&($t=me.instanceColor)),$t!==void 0){const Ut=$t.normalized,Dt=$t.itemSize,en=n.get($t);if(en===void 0)continue;const on=en.buffer,wn=en.type,Wn=en.bytesPerElement,qr=r.isWebGL2===!0&&(wn===t.INT||wn===t.UNSIGNED_INT||$t.gpuType===P_e);if($t.isInterleavedBufferAttribute){const xn=$t.data,et=xn.stride,Qr=$t.offset;if(xn.isInstancedInterleavedBuffer){for(let Pn=0;Pn<nt.locationSize;Pn++)pe(nt.location+Pn,xn.meshPerAttribute);me.isInstancedMesh!==!0&&vt._maxInstanceCount===void 0&&(vt._maxInstanceCount=xn.meshPerAttribute*xn.count)}else for(let Pn=0;Pn<nt.locationSize;Pn++)te(nt.location+Pn);t.bindBuffer(t.ARRAY_BUFFER,on);for(let Pn=0;Pn<nt.locationSize;Pn++)be(nt.location+Pn,Dt/nt.locationSize,wn,Ut,et*Wn,(Qr+Dt/nt.locationSize*Pn)*Wn,qr)}else{if($t.isInstancedBufferAttribute){for(let xn=0;xn<nt.locationSize;xn++)pe(nt.location+xn,$t.meshPerAttribute);me.isInstancedMesh!==!0&&vt._maxInstanceCount===void 0&&(vt._maxInstanceCount=$t.meshPerAttribute*$t.count)}else for(let xn=0;xn<nt.locationSize;xn++)te(nt.location+xn);t.bindBuffer(t.ARRAY_BUFFER,on);for(let xn=0;xn<nt.locationSize;xn++)be(nt.location+xn,Dt/nt.locationSize,wn,Ut,Dt*Wn,Dt/nt.locationSize*xn*Wn,qr)}}else if(Je!==void 0){const Ut=Je[Be];if(Ut!==void 0)switch(Ut.length){case 2:t.vertexAttrib2fv(nt.location,Ut);break;case 3:t.vertexAttrib3fv(nt.location,Ut);break;case 4:t.vertexAttrib4fv(nt.location,Ut);break;default:t.vertexAttrib1fv(nt.location,Ut)}}}}Z()}function G(){kt();for(const me in m){const lt=m[me];for(const Fe in lt){const vt=lt[Fe];for(const Ge in vt)Q(vt[Ge].object),delete vt[Ge];delete lt[Fe]}delete m[me]}}function ye(me){if(m[me.id]===void 0)return;const lt=m[me.id];for(const Fe in lt){const vt=lt[Fe];for(const Ge in vt)Q(vt[Ge].object),delete vt[Ge];delete lt[Fe]}delete m[me.id]}function St(me){for(const lt in m){const Fe=m[lt];if(Fe[me.id]===void 0)continue;const vt=Fe[me.id];for(const Ge in vt)Q(vt[Ge].object),delete vt[Ge];delete Fe[me.id]}}function kt(){it(),M=!0,x!==_&&(x=_,H(x.object))}function it(){_.geometry=null,_.program=null,_.wireframe=!1}return{setup:R,reset:kt,resetDefaultState:it,dispose:G,releaseStatesOfGeometry:ye,releaseStatesOfProgram:St,initAttributes:K,enableAttribute:te,disableUnusedAttributes:Z}}function iBe(t,e,n,r){const o=r.isWebGL2;let u;function h(x){u=x}function m(x,M){t.drawArrays(u,x,M),n.update(M,u,1)}function _(x,M,R){if(R===0)return;let N,H;if(o)N=t,H="drawArraysInstanced";else if(N=e.get("ANGLE_instanced_arrays"),H="drawArraysInstancedANGLE",N===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}N[H](u,x,M,R),n.update(M,u,R)}this.setMode=h,this.render=m,this.renderInstances=_}function oBe(t,e,n){let r;function o(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const be=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(be.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function u(be){if(be==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";be="mediump"}return be==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const h=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let m=n.precision!==void 0?n.precision:"highp";const _=u(m);_!==m&&(console.warn("THREE.WebGLRenderer:",m,"not supported, using",_,"instead."),m=_);const x=h||e.has("WEBGL_draw_buffers"),M=n.logarithmicDepthBuffer===!0,R=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),N=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),H=t.getParameter(t.MAX_TEXTURE_SIZE),Q=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),j=t.getParameter(t.MAX_VERTEX_ATTRIBS),z=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),U=t.getParameter(t.MAX_VARYING_VECTORS),C=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),K=N>0,te=h||e.has("OES_texture_float"),pe=K&&te,Z=h?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:h,drawBuffers:x,getMaxAnisotropy:o,getMaxPrecision:u,precision:m,logarithmicDepthBuffer:M,maxTextures:R,maxVertexTextures:N,maxTextureSize:H,maxCubemapSize:Q,maxAttributes:j,maxVertexUniforms:z,maxVaryings:U,maxFragmentUniforms:C,vertexTextures:K,floatFragmentTextures:te,floatVertexTextures:pe,maxSamples:Z}}function sBe(t){const e=this;let n=null,r=0,o=!1,u=!1;const h=new hg,m=new ir,_={value:null,needsUpdate:!1};this.uniform=_,this.numPlanes=0,this.numIntersection=0,this.init=function(R,N){const H=R.length!==0||N||r!==0||o;return o=N,r=R.length,H},this.beginShadows=function(){u=!0,M(null)},this.endShadows=function(){u=!1},this.setGlobalState=function(R,N){n=M(R,N,0)},this.setState=function(R,N,H){const Q=R.clippingPlanes,j=R.clipIntersection,z=R.clipShadows,U=t.get(R);if(!o||Q===null||Q.length===0||u&&!z)u?M(null):x();else{const C=u?0:r,K=C*4;let te=U.clippingState||null;_.value=te,te=M(Q,N,K,H);for(let pe=0;pe!==K;++pe)te[pe]=n[pe];U.clippingState=te,this.numIntersection=j?this.numPlanes:0,this.numPlanes+=C}};function x(){_.value!==n&&(_.value=n,_.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function M(R,N,H,Q){const j=R!==null?R.length:0;let z=null;if(j!==0){if(z=_.value,Q!==!0||z===null){const U=H+j*4,C=N.matrixWorldInverse;m.getNormalMatrix(C),(z===null||z.length<U)&&(z=new Float32Array(U));for(let K=0,te=H;K!==j;++K,te+=4)h.copy(R[K]).applyMatrix4(C,m),h.normal.toArray(z,te),z[te+3]=h.constant}_.value=z,_.needsUpdate=!0}return e.numPlanes=j,e.numIntersection=0,z}}function aBe(t){let e=new WeakMap;function n(h,m){return m===NH?h.mapping=H_:m===FH&&(h.mapping=G_),h}function r(h){if(h&&h.isTexture&&h.isRenderTargetTexture===!1){const m=h.mapping;if(m===NH||m===FH)if(e.has(h)){const _=e.get(h).texture;return n(_,h.mapping)}else{const _=h.image;if(_&&_.height>0){const x=new wNe(_.height/2);return x.fromEquirectangularTexture(t,h),e.set(h,x),h.addEventListener("dispose",o),n(x.texture,h.mapping)}else return null}}return h}function o(h){const m=h.target;m.removeEventListener("dispose",o);const _=e.get(m);_!==void 0&&(e.delete(m),_.dispose())}function u(){e=new WeakMap}return{get:r,dispose:u}}class K_e extends G_e{constructor(e=-1,n=1,r=1,o=-1,u=.1,h=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=o,this.near=u,this.far=h,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,o,u,h){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=o,this.view.width=u,this.view.height=h,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let u=r-e,h=r+e,m=o+n,_=o-n;if(this.view!==null&&this.view.enabled){const x=(this.right-this.left)/this.view.fullWidth/this.zoom,M=(this.top-this.bottom)/this.view.fullHeight/this.zoom;u+=x*this.view.offsetX,h=u+x*this.view.width,m-=M*this.view.offsetY,_=m-M*this.view.height}this.projectionMatrix.makeOrthographic(u,h,m,_,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const b_=4,xve=[.125,.215,.35,.446,.526,.582],gg=20,i8=new K_e,Sve=new Pr;let o8=null;const pg=(1+Math.sqrt(5))/2,Jb=1/pg,Eve=[new dt(1,1,1),new dt(-1,1,1),new dt(1,1,-1),new dt(-1,1,-1),new dt(0,pg,Jb),new dt(0,pg,-Jb),new dt(Jb,0,pg),new dt(-Jb,0,pg),new dt(pg,Jb,0),new dt(-pg,Jb,0)];class Cve{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,o=100){o8=this._renderer.getRenderTarget(),this._setSize(256);const u=this._allocateTargets();return u.depthBuffer=!0,this._sceneToCubeUV(e,r,o,u),n>0&&this._blur(u,0,0,n),this._applyPMREM(u),this._cleanup(u),u}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Tve(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=kve(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(o8),e.scissorTest=!1,AD(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===H_||e.mapping===G_?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),o8=this._renderer.getRenderTarget();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Il,minFilter:Il,generateMipmaps:!1,type:oP,format:Fu,colorSpace:$c,depthBuffer:!1},o=Pve(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Pve(e,n,r);const{_lodMax:u}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=lBe(u)),this._blurMaterial=uBe(u,e,n)}return o}_compileMaterial(e){const n=new Dl(this._lodPlanes[0],e);this._renderer.compile(n,i8)}_sceneToCubeUV(e,n,r,o){const m=new Rl(90,1,n,r),_=[1,-1,1,1,1,1],x=[1,1,1,-1,-1,-1],M=this._renderer,R=M.autoClear,N=M.toneMapping;M.getClearColor(Sve),M.toneMapping=Wf,M.autoClear=!1;const H=new _G({name:"PMREM.Background",side:ga,depthWrite:!1,depthTest:!1}),Q=new Dl(new TP,H);let j=!1;const z=e.background;z?z.isColor&&(H.color.copy(z),e.background=null,j=!0):(H.color.copy(Sve),j=!0);for(let U=0;U<6;U++){const C=U%3;C===0?(m.up.set(0,_[U],0),m.lookAt(x[U],0,0)):C===1?(m.up.set(0,0,_[U]),m.lookAt(0,x[U],0)):(m.up.set(0,_[U],0),m.lookAt(0,0,x[U]));const K=this._cubeSize;AD(o,C*K,U>2?K:0,K,K),M.setRenderTarget(o),j&&M.render(Q,m),M.render(e,m)}Q.geometry.dispose(),Q.material.dispose(),M.toneMapping=N,M.autoClear=R,e.background=z}_textureToCubeUV(e,n){const r=this._renderer,o=e.mapping===H_||e.mapping===G_;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=Tve()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=kve());const u=o?this._cubemapMaterial:this._equirectMaterial,h=new Dl(this._lodPlanes[0],u),m=u.uniforms;m.envMap.value=e;const _=this._cubeSize;AD(n,0,0,3*_,2*_),r.setRenderTarget(n),r.render(h,i8)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){const u=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),h=Eve[(o-1)%Eve.length];this._blur(e,o-1,o,u,h)}n.autoClear=r}_blur(e,n,r,o,u){const h=this._pingPongRenderTarget;this._halfBlur(e,h,n,r,o,"latitudinal",u),this._halfBlur(h,e,r,r,o,"longitudinal",u)}_halfBlur(e,n,r,o,u,h,m){const _=this._renderer,x=this._blurMaterial;h!=="latitudinal"&&h!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const M=3,R=new Dl(this._lodPlanes[o],x),N=x.uniforms,H=this._sizeLods[r]-1,Q=isFinite(u)?Math.PI/(2*H):2*Math.PI/(2*gg-1),j=u/Q,z=isFinite(u)?1+Math.floor(M*j):gg;z>gg&&console.warn(`sigmaRadians, ${u}, is too large and will clip, as it requested ${z} samples when the maximum is set to ${gg}`);const U=[];let C=0;for(let be=0;be<gg;++be){const Pe=be/j,G=Math.exp(-Pe*Pe/2);U.push(G),be===0?C+=G:be<z&&(C+=2*G)}for(let be=0;be<U.length;be++)U[be]=U[be]/C;N.envMap.value=e.texture,N.samples.value=z,N.weights.value=U,N.latitudinal.value=h==="latitudinal",m&&(N.poleAxis.value=m);const{_lodMax:K}=this;N.dTheta.value=Q,N.mipInt.value=K-r;const te=this._sizeLods[o],pe=3*te*(o>K-b_?o-K+b_:0),Z=4*(this._cubeSize-te);AD(n,pe,Z,3*te,2*te),_.setRenderTarget(n),_.render(R,i8)}}function lBe(t){const e=[],n=[],r=[];let o=t;const u=t-b_+1+xve.length;for(let h=0;h<u;h++){const m=Math.pow(2,o);n.push(m);let _=1/m;h>t-b_?_=xve[h-t+b_-1]:h===0&&(_=0),r.push(_);const x=1/(m-2),M=-x,R=1+x,N=[M,M,R,M,R,R,M,M,R,R,M,R],H=6,Q=6,j=3,z=2,U=1,C=new Float32Array(j*Q*H),K=new Float32Array(z*Q*H),te=new Float32Array(U*Q*H);for(let Z=0;Z<H;Z++){const be=Z%3*2/3-1,Pe=Z>2?0:-1,G=[be,Pe,0,be+2/3,Pe,0,be+2/3,Pe+1,0,be,Pe,0,be+2/3,Pe+1,0,be,Pe+1,0];C.set(G,j*Q*Z),K.set(N,z*Q*Z);const ye=[Z,Z,Z,Z,Z,Z];te.set(ye,U*Q*Z)}const pe=new am;pe.setAttribute("position",new zc(C,j)),pe.setAttribute("uv",new zc(K,z)),pe.setAttribute("faceIndex",new zc(te,U)),e.push(pe),o>b_&&o--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function Pve(t,e,n){const r=new Lg(t,e,n);return r.texture.mapping=fL,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function AD(t,e,n,r,o){t.viewport.set(e,n,r,o),t.scissor.set(e,n,r,o)}function uBe(t,e,n){const r=new Float32Array(gg),o=new dt(0,1,0);return new Ng({name:"SphericalGaussianBlur",defines:{n:gg,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:SG(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:$f,depthTest:!1,depthWrite:!1})}function kve(){return new Ng({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:SG(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:$f,depthTest:!1,depthWrite:!1})}function Tve(){return new Ng({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:SG(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:$f,depthTest:!1,depthWrite:!1})}function SG(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function cBe(t){let e=new WeakMap,n=null;function r(m){if(m&&m.isTexture){const _=m.mapping,x=_===NH||_===FH,M=_===H_||_===G_;if(x||M)if(m.isRenderTargetTexture&&m.needsPMREMUpdate===!0){m.needsPMREMUpdate=!1;let R=e.get(m);return n===null&&(n=new Cve(t)),R=x?n.fromEquirectangular(m,R):n.fromCubemap(m,R),e.set(m,R),R.texture}else{if(e.has(m))return e.get(m).texture;{const R=m.image;if(x&&R&&R.height>0||M&&R&&o(R)){n===null&&(n=new Cve(t));const N=x?n.fromEquirectangular(m):n.fromCubemap(m);return e.set(m,N),m.addEventListener("dispose",u),N.texture}else return null}}}return m}function o(m){let _=0;const x=6;for(let M=0;M<x;M++)m[M]!==void 0&&_++;return _===x}function u(m){const _=m.target;_.removeEventListener("dispose",u);const x=e.get(_);x!==void 0&&(e.delete(_),x.dispose())}function h(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:h}}function dBe(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let o;switch(r){case"WEBGL_depth_texture":o=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=t.getExtension(r)}return e[r]=o,o}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const o=n(r);return o===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),o}}}function hBe(t,e,n,r){const o={},u=new WeakMap;function h(R){const N=R.target;N.index!==null&&e.remove(N.index);for(const Q in N.attributes)e.remove(N.attributes[Q]);for(const Q in N.morphAttributes){const j=N.morphAttributes[Q];for(let z=0,U=j.length;z<U;z++)e.remove(j[z])}N.removeEventListener("dispose",h),delete o[N.id];const H=u.get(N);H&&(e.remove(H),u.delete(N)),r.releaseStatesOfGeometry(N),N.isInstancedBufferGeometry===!0&&delete N._maxInstanceCount,n.memory.geometries--}function m(R,N){return o[N.id]===!0||(N.addEventListener("dispose",h),o[N.id]=!0,n.memory.geometries++),N}function _(R){const N=R.attributes;for(const Q in N)e.update(N[Q],t.ARRAY_BUFFER);const H=R.morphAttributes;for(const Q in H){const j=H[Q];for(let z=0,U=j.length;z<U;z++)e.update(j[z],t.ARRAY_BUFFER)}}function x(R){const N=[],H=R.index,Q=R.attributes.position;let j=0;if(H!==null){const C=H.array;j=H.version;for(let K=0,te=C.length;K<te;K+=3){const pe=C[K+0],Z=C[K+1],be=C[K+2];N.push(pe,Z,Z,be,be,pe)}}else if(Q!==void 0){const C=Q.array;j=Q.version;for(let K=0,te=C.length/3-1;K<te;K+=3){const pe=K+0,Z=K+1,be=K+2;N.push(pe,Z,Z,be,be,pe)}}else return;const z=new(L_e(N)?z_e:j_e)(N,1);z.version=j;const U=u.get(R);U&&e.remove(U),u.set(R,z)}function M(R){const N=u.get(R);if(N){const H=R.index;H!==null&&N.version<H.version&&x(R)}else x(R);return u.get(R)}return{get:m,update:_,getWireframeAttribute:M}}function pBe(t,e,n,r){const o=r.isWebGL2;let u;function h(N){u=N}let m,_;function x(N){m=N.type,_=N.bytesPerElement}function M(N,H){t.drawElements(u,H,m,N*_),n.update(H,u,1)}function R(N,H,Q){if(Q===0)return;let j,z;if(o)j=t,z="drawElementsInstanced";else if(j=e.get("ANGLE_instanced_arrays"),z="drawElementsInstancedANGLE",j===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}j[z](u,H,m,N*_,Q),n.update(H,u,Q)}this.setMode=h,this.setIndex=x,this.render=M,this.renderInstances=R}function fBe(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(u,h,m){switch(n.calls++,h){case t.TRIANGLES:n.triangles+=m*(u/3);break;case t.LINES:n.lines+=m*(u/2);break;case t.LINE_STRIP:n.lines+=m*(u-1);break;case t.LINE_LOOP:n.lines+=m*u;break;case t.POINTS:n.points+=m*u;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",h);break}}function o(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:o,update:r}}function mBe(t,e){return t[0]-e[0]}function vBe(t,e){return Math.abs(e[1])-Math.abs(t[1])}function gBe(t,e,n){const r={},o=new Float32Array(8),u=new WeakMap,h=new Io,m=[];for(let x=0;x<8;x++)m[x]=[x,0];function _(x,M,R){const N=x.morphTargetInfluences;if(e.isWebGL2===!0){const Q=M.morphAttributes.position||M.morphAttributes.normal||M.morphAttributes.color,j=Q!==void 0?Q.length:0;let z=u.get(M);if(z===void 0||z.count!==j){let lt=function(){it.dispose(),u.delete(M),M.removeEventListener("dispose",lt)};var H=lt;z!==void 0&&z.texture.dispose();const K=M.morphAttributes.position!==void 0,te=M.morphAttributes.normal!==void 0,pe=M.morphAttributes.color!==void 0,Z=M.morphAttributes.position||[],be=M.morphAttributes.normal||[],Pe=M.morphAttributes.color||[];let G=0;K===!0&&(G=1),te===!0&&(G=2),pe===!0&&(G=3);let ye=M.attributes.position.count*G,St=1;ye>e.maxTextureSize&&(St=Math.ceil(ye/e.maxTextureSize),ye=e.maxTextureSize);const kt=new Float32Array(ye*St*4*j),it=new B_e(kt,ye,St,j);it.type=Df,it.needsUpdate=!0;const me=G*4;for(let Fe=0;Fe<j;Fe++){const vt=Z[Fe],Ge=be[Fe],mt=Pe[Fe],Je=ye*St*4*Fe;for(let Be=0;Be<vt.count;Be++){const nt=Be*me;K===!0&&(h.fromBufferAttribute(vt,Be),kt[Je+nt+0]=h.x,kt[Je+nt+1]=h.y,kt[Je+nt+2]=h.z,kt[Je+nt+3]=0),te===!0&&(h.fromBufferAttribute(Ge,Be),kt[Je+nt+4]=h.x,kt[Je+nt+5]=h.y,kt[Je+nt+6]=h.z,kt[Je+nt+7]=0),pe===!0&&(h.fromBufferAttribute(mt,Be),kt[Je+nt+8]=h.x,kt[Je+nt+9]=h.y,kt[Je+nt+10]=h.z,kt[Je+nt+11]=mt.itemSize===4?h.w:1)}}z={count:j,texture:it,size:new kr(ye,St)},u.set(M,z),M.addEventListener("dispose",lt)}let U=0;for(let K=0;K<N.length;K++)U+=N[K];const C=M.morphTargetsRelative?1:1-U;R.getUniforms().setValue(t,"morphTargetBaseInfluence",C),R.getUniforms().setValue(t,"morphTargetInfluences",N),R.getUniforms().setValue(t,"morphTargetsTexture",z.texture,n),R.getUniforms().setValue(t,"morphTargetsTextureSize",z.size)}else{const Q=N===void 0?0:N.length;let j=r[M.id];if(j===void 0||j.length!==Q){j=[];for(let te=0;te<Q;te++)j[te]=[te,0];r[M.id]=j}for(let te=0;te<Q;te++){const pe=j[te];pe[0]=te,pe[1]=N[te]}j.sort(vBe);for(let te=0;te<8;te++)te<Q&&j[te][1]?(m[te][0]=j[te][0],m[te][1]=j[te][1]):(m[te][0]=Number.MAX_SAFE_INTEGER,m[te][1]=0);m.sort(mBe);const z=M.morphAttributes.position,U=M.morphAttributes.normal;let C=0;for(let te=0;te<8;te++){const pe=m[te],Z=pe[0],be=pe[1];Z!==Number.MAX_SAFE_INTEGER&&be?(z&&M.getAttribute("morphTarget"+te)!==z[Z]&&M.setAttribute("morphTarget"+te,z[Z]),U&&M.getAttribute("morphNormal"+te)!==U[Z]&&M.setAttribute("morphNormal"+te,U[Z]),o[te]=be,C+=be):(z&&M.hasAttribute("morphTarget"+te)===!0&&M.deleteAttribute("morphTarget"+te),U&&M.hasAttribute("morphNormal"+te)===!0&&M.deleteAttribute("morphNormal"+te),o[te]=0)}const K=M.morphTargetsRelative?1:1-C;R.getUniforms().setValue(t,"morphTargetBaseInfluence",K),R.getUniforms().setValue(t,"morphTargetInfluences",o)}}return{update:_}}function yBe(t,e,n,r){let o=new WeakMap;function u(_){const x=r.render.frame,M=_.geometry,R=e.get(_,M);if(o.get(R)!==x&&(e.update(R),o.set(R,x)),_.isInstancedMesh&&(_.hasEventListener("dispose",m)===!1&&_.addEventListener("dispose",m),o.get(_)!==x&&(n.update(_.instanceMatrix,t.ARRAY_BUFFER),_.instanceColor!==null&&n.update(_.instanceColor,t.ARRAY_BUFFER),o.set(_,x))),_.isSkinnedMesh){const N=_.skeleton;o.get(N)!==x&&(N.update(),o.set(N,x))}return R}function h(){o=new WeakMap}function m(_){const x=_.target;x.removeEventListener("dispose",m),n.remove(x.instanceMatrix),x.instanceColor!==null&&n.remove(x.instanceColor)}return{update:u,dispose:h}}const q_e=new Ba,X_e=new B_e,Y_e=new iNe,Z_e=new $_e,Mve=[],Ave=[],Ive=new Float32Array(16),Rve=new Float32Array(9),Ove=new Float32Array(4);function tw(t,e,n){const r=t[0];if(r<=0||r>0)return t;const o=e*n;let u=Mve[o];if(u===void 0&&(u=new Float32Array(o),Mve[o]=u),e!==0){r.toArray(u,0);for(let h=1,m=0;h!==e;++h)m+=n,t[h].toArray(u,m)}return u}function yo(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function bo(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function mL(t,e){let n=Ave[e];n===void 0&&(n=new Int32Array(e),Ave[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function bBe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function _Be(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yo(n,e))return;t.uniform2fv(this.addr,e),bo(n,e)}}function wBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(yo(n,e))return;t.uniform3fv(this.addr,e),bo(n,e)}}function xBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yo(n,e))return;t.uniform4fv(this.addr,e),bo(n,e)}}function SBe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(yo(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),bo(n,e)}else{if(yo(n,r))return;Ove.set(r),t.uniformMatrix2fv(this.addr,!1,Ove),bo(n,r)}}function EBe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(yo(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),bo(n,e)}else{if(yo(n,r))return;Rve.set(r),t.uniformMatrix3fv(this.addr,!1,Rve),bo(n,r)}}function CBe(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(yo(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),bo(n,e)}else{if(yo(n,r))return;Ive.set(r),t.uniformMatrix4fv(this.addr,!1,Ive),bo(n,r)}}function PBe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function kBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yo(n,e))return;t.uniform2iv(this.addr,e),bo(n,e)}}function TBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(yo(n,e))return;t.uniform3iv(this.addr,e),bo(n,e)}}function MBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yo(n,e))return;t.uniform4iv(this.addr,e),bo(n,e)}}function ABe(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function IBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(yo(n,e))return;t.uniform2uiv(this.addr,e),bo(n,e)}}function RBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(yo(n,e))return;t.uniform3uiv(this.addr,e),bo(n,e)}}function OBe(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(yo(n,e))return;t.uniform4uiv(this.addr,e),bo(n,e)}}function DBe(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture2D(e||q_e,o)}function LBe(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture3D(e||Y_e,o)}function NBe(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTextureCube(e||Z_e,o)}function FBe(t,e,n){const r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture2DArray(e||X_e,o)}function BBe(t){switch(t){case 5126:return bBe;case 35664:return _Be;case 35665:return wBe;case 35666:return xBe;case 35674:return SBe;case 35675:return EBe;case 35676:return CBe;case 5124:case 35670:return PBe;case 35667:case 35671:return kBe;case 35668:case 35672:return TBe;case 35669:case 35673:return MBe;case 5125:return ABe;case 36294:return IBe;case 36295:return RBe;case 36296:return OBe;case 35678:case 36198:case 36298:case 36306:case 35682:return DBe;case 35679:case 36299:case 36307:return LBe;case 35680:case 36300:case 36308:case 36293:return NBe;case 36289:case 36303:case 36311:case 36292:return FBe}}function UBe(t,e){t.uniform1fv(this.addr,e)}function VBe(t,e){const n=tw(e,this.size,2);t.uniform2fv(this.addr,n)}function jBe(t,e){const n=tw(e,this.size,3);t.uniform3fv(this.addr,n)}function zBe(t,e){const n=tw(e,this.size,4);t.uniform4fv(this.addr,n)}function HBe(t,e){const n=tw(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function GBe(t,e){const n=tw(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function $Be(t,e){const n=tw(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function WBe(t,e){t.uniform1iv(this.addr,e)}function KBe(t,e){t.uniform2iv(this.addr,e)}function qBe(t,e){t.uniform3iv(this.addr,e)}function XBe(t,e){t.uniform4iv(this.addr,e)}function YBe(t,e){t.uniform1uiv(this.addr,e)}function ZBe(t,e){t.uniform2uiv(this.addr,e)}function QBe(t,e){t.uniform3uiv(this.addr,e)}function JBe(t,e){t.uniform4uiv(this.addr,e)}function eUe(t,e,n){const r=this.cache,o=e.length,u=mL(n,o);yo(r,u)||(t.uniform1iv(this.addr,u),bo(r,u));for(let h=0;h!==o;++h)n.setTexture2D(e[h]||q_e,u[h])}function tUe(t,e,n){const r=this.cache,o=e.length,u=mL(n,o);yo(r,u)||(t.uniform1iv(this.addr,u),bo(r,u));for(let h=0;h!==o;++h)n.setTexture3D(e[h]||Y_e,u[h])}function nUe(t,e,n){const r=this.cache,o=e.length,u=mL(n,o);yo(r,u)||(t.uniform1iv(this.addr,u),bo(r,u));for(let h=0;h!==o;++h)n.setTextureCube(e[h]||Z_e,u[h])}function rUe(t,e,n){const r=this.cache,o=e.length,u=mL(n,o);yo(r,u)||(t.uniform1iv(this.addr,u),bo(r,u));for(let h=0;h!==o;++h)n.setTexture2DArray(e[h]||X_e,u[h])}function iUe(t){switch(t){case 5126:return UBe;case 35664:return VBe;case 35665:return jBe;case 35666:return zBe;case 35674:return HBe;case 35675:return GBe;case 35676:return $Be;case 5124:case 35670:return WBe;case 35667:case 35671:return KBe;case 35668:case 35672:return qBe;case 35669:case 35673:return XBe;case 5125:return YBe;case 36294:return ZBe;case 36295:return QBe;case 36296:return JBe;case 35678:case 36198:case 36298:case 36306:case 35682:return eUe;case 35679:case 36299:case 36307:return tUe;case 35680:case 36300:case 36308:case 36293:return nUe;case 36289:case 36303:case 36311:case 36292:return rUe}}class oUe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=BBe(n.type)}}class sUe{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=iUe(n.type)}}class aUe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const o=this.seq;for(let u=0,h=o.length;u!==h;++u){const m=o[u];m.setValue(e,n[m.id],r)}}}const s8=/(\w+)(\])?(\[|\.)?/g;function Dve(t,e){t.seq.push(e),t.map[e.id]=e}function lUe(t,e,n){const r=t.name,o=r.length;for(s8.lastIndex=0;;){const u=s8.exec(r),h=s8.lastIndex;let m=u[1];const _=u[2]==="]",x=u[3];if(_&&(m=m|0),x===void 0||x==="["&&h+2===o){Dve(n,x===void 0?new oUe(m,t,e):new sUe(m,t,e));break}else{let R=n.map[m];R===void 0&&(R=new aUe(m),Dve(n,R)),n=R}}}class YD{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let o=0;o<r;++o){const u=e.getActiveUniform(n,o),h=e.getUniformLocation(n,u.name);lUe(u,h,this)}}setValue(e,n,r,o){const u=this.map[n];u!==void 0&&u.setValue(e,r,o)}setOptional(e,n,r){const o=n[r];o!==void 0&&this.setValue(e,r,o)}static upload(e,n,r,o){for(let u=0,h=n.length;u!==h;++u){const m=n[u],_=r[m.id];_.needsUpdate!==!1&&m.setValue(e,_.value,o)}}static seqWithValue(e,n){const r=[];for(let o=0,u=e.length;o!==u;++o){const h=e[o];h.id in n&&r.push(h)}return r}}function Lve(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let uUe=0;function cUe(t,e){const n=t.split(`
`),r=[],o=Math.max(e-6,0),u=Math.min(e+6,n.length);for(let h=o;h<u;h++){const m=h+1;r.push(`${m===e?">":" "} ${m}: ${n[h]}`)}return r.join(`
`)}function dUe(t){switch(t){case $c:return["Linear","( value )"];case tr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function Nve(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),o=t.getShaderInfoLog(e).trim();if(r&&o==="")return"";const u=/ERROR: 0:(\d+)/.exec(o);if(u){const h=parseInt(u[1]);return n.toUpperCase()+`

`+o+`

`+cUe(t.getShaderSource(e),h)}else return o}function hUe(t,e){const n=dUe(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function pUe(t,e){let n;switch(e){case xLe:n="Linear";break;case SLe:n="Reinhard";break;case ELe:n="OptimizedCineon";break;case CLe:n="ACESFilmic";break;case PLe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function fUe(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(xC).join(`
`)}function mUe(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function vUe(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let o=0;o<r;o++){const u=t.getActiveAttrib(e,o),h=u.name;let m=1;u.type===t.FLOAT_MAT2&&(m=2),u.type===t.FLOAT_MAT3&&(m=3),u.type===t.FLOAT_MAT4&&(m=4),n[h]={type:u.type,location:t.getAttribLocation(e,h),locationSize:m}}return n}function xC(t){return t!==""}function Fve(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Bve(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const gUe=/^[ \t]*#include +<([\w\d./]+)>/gm;function HH(t){return t.replace(gUe,bUe)}const yUe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function bUe(t,e){let n=er[e];if(n===void 0){const r=yUe.get(e);if(r!==void 0)n=er[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return HH(n)}const _Ue=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Uve(t){return t.replace(_Ue,wUe)}function wUe(t,e,n,r){let o="";for(let u=parseInt(e);u<parseInt(n);u++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+u+" ]").replace(/UNROLLED_LOOP_INDEX/g,u);return o}function Vve(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function xUe(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===S_e?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===eLe?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===dh&&(e="SHADOWMAP_TYPE_VSM"),e}function SUe(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case H_:case G_:e="ENVMAP_TYPE_CUBE";break;case fL:e="ENVMAP_TYPE_CUBE_UV";break}return e}function EUe(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case G_:e="ENVMAP_MODE_REFRACTION";break}return e}function CUe(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case E_e:e="ENVMAP_BLENDING_MULTIPLY";break;case _Le:e="ENVMAP_BLENDING_MIX";break;case wLe:e="ENVMAP_BLENDING_ADD";break}return e}function PUe(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function kUe(t,e,n,r){const o=t.getContext(),u=n.defines;let h=n.vertexShader,m=n.fragmentShader;const _=xUe(n),x=SUe(n),M=EUe(n),R=CUe(n),N=PUe(n),H=n.isWebGL2?"":fUe(n),Q=mUe(u),j=o.createProgram();let z,U,C=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(z=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Q].filter(xC).join(`
`),z.length>0&&(z+=`
`),U=[H,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Q].filter(xC).join(`
`),U.length>0&&(U+=`
`)):(z=[Vve(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Q,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+M:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+_:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(xC).join(`
`),U=[H,Vve(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,Q,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+x:"",n.envMap?"#define "+M:"",n.envMap?"#define "+R:"",N?"#define CUBEUV_TEXEL_WIDTH "+N.texelWidth:"",N?"#define CUBEUV_TEXEL_HEIGHT "+N.texelHeight:"",N?"#define CUBEUV_MAX_MIP "+N.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+_:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Wf?"#define TONE_MAPPING":"",n.toneMapping!==Wf?er.tonemapping_pars_fragment:"",n.toneMapping!==Wf?pUe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",er.colorspace_pars_fragment,hUe("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(xC).join(`
`)),h=HH(h),h=Fve(h,n),h=Bve(h,n),m=HH(m),m=Fve(m,n),m=Bve(m,n),h=Uve(h),m=Uve(m),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(C=`#version 300 es
`,z=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+z,U=["#define varying in",n.glslVersion===ove?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===ove?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+U);const K=C+z+h,te=C+U+m,pe=Lve(o,o.VERTEX_SHADER,K),Z=Lve(o,o.FRAGMENT_SHADER,te);if(o.attachShader(j,pe),o.attachShader(j,Z),n.index0AttributeName!==void 0?o.bindAttribLocation(j,0,n.index0AttributeName):n.morphTargets===!0&&o.bindAttribLocation(j,0,"position"),o.linkProgram(j),t.debug.checkShaderErrors){const G=o.getProgramInfoLog(j).trim(),ye=o.getShaderInfoLog(pe).trim(),St=o.getShaderInfoLog(Z).trim();let kt=!0,it=!0;if(o.getProgramParameter(j,o.LINK_STATUS)===!1)if(kt=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(o,j,pe,Z);else{const me=Nve(o,pe,"vertex"),lt=Nve(o,Z,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(j,o.VALIDATE_STATUS)+`

Program Info Log: `+G+`
`+me+`
`+lt)}else G!==""?console.warn("THREE.WebGLProgram: Program Info Log:",G):(ye===""||St==="")&&(it=!1);it&&(this.diagnostics={runnable:kt,programLog:G,vertexShader:{log:ye,prefix:z},fragmentShader:{log:St,prefix:U}})}o.deleteShader(pe),o.deleteShader(Z);let be;this.getUniforms=function(){return be===void 0&&(be=new YD(o,j)),be};let Pe;return this.getAttributes=function(){return Pe===void 0&&(Pe=vUe(o,j)),Pe},this.destroy=function(){r.releaseStatesOfProgram(this),o.deleteProgram(j),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=uUe++,this.cacheKey=e,this.usedTimes=1,this.program=j,this.vertexShader=pe,this.fragmentShader=Z,this}let TUe=0;class MUe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,o=this._getShaderStage(n),u=this._getShaderStage(r),h=this._getShaderCacheForMaterial(e);return h.has(o)===!1&&(h.add(o),o.usedTimes++),h.has(u)===!1&&(h.add(u),u.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new AUe(e),n.set(e,r)),r}}class AUe{constructor(e){this.id=TUe++,this.code=e,this.usedTimes=0}}function IUe(t,e,n,r,o,u,h){const m=new U_e,_=new MUe,x=[],M=o.isWebGL2,R=o.logarithmicDepthBuffer,N=o.vertexTextures;let H=o.precision;const Q={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function j(G){return G===0?"uv":`uv${G}`}function z(G,ye,St,kt,it){const me=kt.fog,lt=it.geometry,Fe=G.isMeshStandardMaterial?kt.environment:null,vt=(G.isMeshStandardMaterial?n:e).get(G.envMap||Fe),Ge=vt&&vt.mapping===fL?vt.image.height:null,mt=Q[G.type];G.precision!==null&&(H=o.getMaxPrecision(G.precision),H!==G.precision&&console.warn("THREE.WebGLProgram.getParameters:",G.precision,"not supported, using",H,"instead."));const Je=lt.morphAttributes.position||lt.morphAttributes.normal||lt.morphAttributes.color,Be=Je!==void 0?Je.length:0;let nt=0;lt.morphAttributes.position!==void 0&&(nt=1),lt.morphAttributes.normal!==void 0&&(nt=2),lt.morphAttributes.color!==void 0&&(nt=3);let $t,Ut,Dt,en;if(mt){const rr=Fc[mt];$t=rr.vertexShader,Ut=rr.fragmentShader}else $t=G.vertexShader,Ut=G.fragmentShader,_.update(G),Dt=_.getVertexShaderID(G),en=_.getFragmentShaderID(G);const on=t.getRenderTarget(),wn=it.isInstancedMesh===!0,Wn=!!G.map,qr=!!G.matcap,xn=!!vt,et=!!G.aoMap,Qr=!!G.lightMap,Pn=!!G.bumpMap,Sn=!!G.normalMap,gn=!!G.displacementMap,Ir=!!G.emissiveMap,kn=!!G.metalnessMap,Nn=!!G.roughnessMap,cr=G.anisotropy>0,si=G.clearcoat>0,Dr=G.iridescence>0,Ee=G.sheen>0,ce=G.transmission>0,ut=cr&&!!G.anisotropyMap,Vt=si&&!!G.clearcoatMap,Ot=si&&!!G.clearcoatNormalMap,Bt=si&&!!G.clearcoatRoughnessMap,mn=Dr&&!!G.iridescenceMap,Ht=Dr&&!!G.iridescenceThicknessMap,pt=Ee&&!!G.sheenColorMap,En=Ee&&!!G.sheenRoughnessMap,tn=!!G.specularMap,yn=!!G.specularColorMap,rn=!!G.specularIntensityMap,Jt=ce&&!!G.transmissionMap,Bn=ce&&!!G.thicknessMap,pr=!!G.gradientMap,Le=!!G.alphaMap,Gt=G.alphaTest>0,ht=!!G.alphaHash,jt=!!G.extensions,qt=!!lt.attributes.uv1,Qn=!!lt.attributes.uv2,Lr=!!lt.attributes.uv3;let Mr=Wf;return G.toneMapped&&(on===null||on.isXRRenderTarget===!0)&&(Mr=t.toneMapping),{isWebGL2:M,shaderID:mt,shaderType:G.type,shaderName:G.name,vertexShader:$t,fragmentShader:Ut,defines:G.defines,customVertexShaderID:Dt,customFragmentShaderID:en,isRawShaderMaterial:G.isRawShaderMaterial===!0,glslVersion:G.glslVersion,precision:H,instancing:wn,instancingColor:wn&&it.instanceColor!==null,supportsVertexTextures:N,outputColorSpace:on===null?t.outputColorSpace:on.isXRRenderTarget===!0?on.texture.colorSpace:$c,map:Wn,matcap:qr,envMap:xn,envMapMode:xn&&vt.mapping,envMapCubeUVHeight:Ge,aoMap:et,lightMap:Qr,bumpMap:Pn,normalMap:Sn,displacementMap:N&&gn,emissiveMap:Ir,normalMapObjectSpace:Sn&&G.normalMapType===ULe,normalMapTangentSpace:Sn&&G.normalMapType===yG,metalnessMap:kn,roughnessMap:Nn,anisotropy:cr,anisotropyMap:ut,clearcoat:si,clearcoatMap:Vt,clearcoatNormalMap:Ot,clearcoatRoughnessMap:Bt,iridescence:Dr,iridescenceMap:mn,iridescenceThicknessMap:Ht,sheen:Ee,sheenColorMap:pt,sheenRoughnessMap:En,specularMap:tn,specularColorMap:yn,specularIntensityMap:rn,transmission:ce,transmissionMap:Jt,thicknessMap:Bn,gradientMap:pr,opaque:G.transparent===!1&&G.blending===Eg,alphaMap:Le,alphaTest:Gt,alphaHash:ht,combine:G.combine,mapUv:Wn&&j(G.map.channel),aoMapUv:et&&j(G.aoMap.channel),lightMapUv:Qr&&j(G.lightMap.channel),bumpMapUv:Pn&&j(G.bumpMap.channel),normalMapUv:Sn&&j(G.normalMap.channel),displacementMapUv:gn&&j(G.displacementMap.channel),emissiveMapUv:Ir&&j(G.emissiveMap.channel),metalnessMapUv:kn&&j(G.metalnessMap.channel),roughnessMapUv:Nn&&j(G.roughnessMap.channel),anisotropyMapUv:ut&&j(G.anisotropyMap.channel),clearcoatMapUv:Vt&&j(G.clearcoatMap.channel),clearcoatNormalMapUv:Ot&&j(G.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Bt&&j(G.clearcoatRoughnessMap.channel),iridescenceMapUv:mn&&j(G.iridescenceMap.channel),iridescenceThicknessMapUv:Ht&&j(G.iridescenceThicknessMap.channel),sheenColorMapUv:pt&&j(G.sheenColorMap.channel),sheenRoughnessMapUv:En&&j(G.sheenRoughnessMap.channel),specularMapUv:tn&&j(G.specularMap.channel),specularColorMapUv:yn&&j(G.specularColorMap.channel),specularIntensityMapUv:rn&&j(G.specularIntensityMap.channel),transmissionMapUv:Jt&&j(G.transmissionMap.channel),thicknessMapUv:Bn&&j(G.thicknessMap.channel),alphaMapUv:Le&&j(G.alphaMap.channel),vertexTangents:!!lt.attributes.tangent&&(Sn||cr),vertexColors:G.vertexColors,vertexAlphas:G.vertexColors===!0&&!!lt.attributes.color&&lt.attributes.color.itemSize===4,vertexUv1s:qt,vertexUv2s:Qn,vertexUv3s:Lr,pointsUvs:it.isPoints===!0&&!!lt.attributes.uv&&(Wn||Le),fog:!!me,useFog:G.fog===!0,fogExp2:me&&me.isFogExp2,flatShading:G.flatShading===!0,sizeAttenuation:G.sizeAttenuation===!0,logarithmicDepthBuffer:R,skinning:it.isSkinnedMesh===!0,morphTargets:lt.morphAttributes.position!==void 0,morphNormals:lt.morphAttributes.normal!==void 0,morphColors:lt.morphAttributes.color!==void 0,morphTargetsCount:Be,morphTextureStride:nt,numDirLights:ye.directional.length,numPointLights:ye.point.length,numSpotLights:ye.spot.length,numSpotLightMaps:ye.spotLightMap.length,numRectAreaLights:ye.rectArea.length,numHemiLights:ye.hemi.length,numDirLightShadows:ye.directionalShadowMap.length,numPointLightShadows:ye.pointShadowMap.length,numSpotLightShadows:ye.spotShadowMap.length,numSpotLightShadowsWithMaps:ye.numSpotLightShadowsWithMaps,numClippingPlanes:h.numPlanes,numClipIntersection:h.numIntersection,dithering:G.dithering,shadowMapEnabled:t.shadowMap.enabled&&St.length>0,shadowMapType:t.shadowMap.type,toneMapping:Mr,useLegacyLights:t._useLegacyLights,premultipliedAlpha:G.premultipliedAlpha,doubleSided:G.side===fh,flipSided:G.side===ga,useDepthPacking:G.depthPacking>=0,depthPacking:G.depthPacking||0,index0AttributeName:G.index0AttributeName,extensionDerivatives:jt&&G.extensions.derivatives===!0,extensionFragDepth:jt&&G.extensions.fragDepth===!0,extensionDrawBuffers:jt&&G.extensions.drawBuffers===!0,extensionShaderTextureLOD:jt&&G.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:M||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:M||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:M||r.has("EXT_shader_texture_lod"),customProgramCacheKey:G.customProgramCacheKey()}}function U(G){const ye=[];if(G.shaderID?ye.push(G.shaderID):(ye.push(G.customVertexShaderID),ye.push(G.customFragmentShaderID)),G.defines!==void 0)for(const St in G.defines)ye.push(St),ye.push(G.defines[St]);return G.isRawShaderMaterial===!1&&(C(ye,G),K(ye,G),ye.push(t.outputColorSpace)),ye.push(G.customProgramCacheKey),ye.join()}function C(G,ye){G.push(ye.precision),G.push(ye.outputColorSpace),G.push(ye.envMapMode),G.push(ye.envMapCubeUVHeight),G.push(ye.mapUv),G.push(ye.alphaMapUv),G.push(ye.lightMapUv),G.push(ye.aoMapUv),G.push(ye.bumpMapUv),G.push(ye.normalMapUv),G.push(ye.displacementMapUv),G.push(ye.emissiveMapUv),G.push(ye.metalnessMapUv),G.push(ye.roughnessMapUv),G.push(ye.anisotropyMapUv),G.push(ye.clearcoatMapUv),G.push(ye.clearcoatNormalMapUv),G.push(ye.clearcoatRoughnessMapUv),G.push(ye.iridescenceMapUv),G.push(ye.iridescenceThicknessMapUv),G.push(ye.sheenColorMapUv),G.push(ye.sheenRoughnessMapUv),G.push(ye.specularMapUv),G.push(ye.specularColorMapUv),G.push(ye.specularIntensityMapUv),G.push(ye.transmissionMapUv),G.push(ye.thicknessMapUv),G.push(ye.combine),G.push(ye.fogExp2),G.push(ye.sizeAttenuation),G.push(ye.morphTargetsCount),G.push(ye.morphAttributeCount),G.push(ye.numDirLights),G.push(ye.numPointLights),G.push(ye.numSpotLights),G.push(ye.numSpotLightMaps),G.push(ye.numHemiLights),G.push(ye.numRectAreaLights),G.push(ye.numDirLightShadows),G.push(ye.numPointLightShadows),G.push(ye.numSpotLightShadows),G.push(ye.numSpotLightShadowsWithMaps),G.push(ye.shadowMapType),G.push(ye.toneMapping),G.push(ye.numClippingPlanes),G.push(ye.numClipIntersection),G.push(ye.depthPacking)}function K(G,ye){m.disableAll(),ye.isWebGL2&&m.enable(0),ye.supportsVertexTextures&&m.enable(1),ye.instancing&&m.enable(2),ye.instancingColor&&m.enable(3),ye.matcap&&m.enable(4),ye.envMap&&m.enable(5),ye.normalMapObjectSpace&&m.enable(6),ye.normalMapTangentSpace&&m.enable(7),ye.clearcoat&&m.enable(8),ye.iridescence&&m.enable(9),ye.alphaTest&&m.enable(10),ye.vertexColors&&m.enable(11),ye.vertexAlphas&&m.enable(12),ye.vertexUv1s&&m.enable(13),ye.vertexUv2s&&m.enable(14),ye.vertexUv3s&&m.enable(15),ye.vertexTangents&&m.enable(16),ye.anisotropy&&m.enable(17),G.push(m.mask),m.disableAll(),ye.fog&&m.enable(0),ye.useFog&&m.enable(1),ye.flatShading&&m.enable(2),ye.logarithmicDepthBuffer&&m.enable(3),ye.skinning&&m.enable(4),ye.morphTargets&&m.enable(5),ye.morphNormals&&m.enable(6),ye.morphColors&&m.enable(7),ye.premultipliedAlpha&&m.enable(8),ye.shadowMapEnabled&&m.enable(9),ye.useLegacyLights&&m.enable(10),ye.doubleSided&&m.enable(11),ye.flipSided&&m.enable(12),ye.useDepthPacking&&m.enable(13),ye.dithering&&m.enable(14),ye.transmission&&m.enable(15),ye.sheen&&m.enable(16),ye.opaque&&m.enable(17),ye.pointsUvs&&m.enable(18),G.push(m.mask)}function te(G){const ye=Q[G.type];let St;if(ye){const kt=Fc[ye];St=gNe.clone(kt.uniforms)}else St=G.uniforms;return St}function pe(G,ye){let St;for(let kt=0,it=x.length;kt<it;kt++){const me=x[kt];if(me.cacheKey===ye){St=me,++St.usedTimes;break}}return St===void 0&&(St=new kUe(t,ye,G,u),x.push(St)),St}function Z(G){if(--G.usedTimes===0){const ye=x.indexOf(G);x[ye]=x[x.length-1],x.pop(),G.destroy()}}function be(G){_.remove(G)}function Pe(){_.dispose()}return{getParameters:z,getProgramCacheKey:U,getUniforms:te,acquireProgram:pe,releaseProgram:Z,releaseShaderCache:be,programs:x,dispose:Pe}}function RUe(){let t=new WeakMap;function e(u){let h=t.get(u);return h===void 0&&(h={},t.set(u,h)),h}function n(u){t.delete(u)}function r(u,h,m){t.get(u)[h]=m}function o(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:o}}function OUe(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function jve(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function zve(){const t=[];let e=0;const n=[],r=[],o=[];function u(){e=0,n.length=0,r.length=0,o.length=0}function h(R,N,H,Q,j,z){let U=t[e];return U===void 0?(U={id:R.id,object:R,geometry:N,material:H,groupOrder:Q,renderOrder:R.renderOrder,z:j,group:z},t[e]=U):(U.id=R.id,U.object=R,U.geometry=N,U.material=H,U.groupOrder=Q,U.renderOrder=R.renderOrder,U.z=j,U.group=z),e++,U}function m(R,N,H,Q,j,z){const U=h(R,N,H,Q,j,z);H.transmission>0?r.push(U):H.transparent===!0?o.push(U):n.push(U)}function _(R,N,H,Q,j,z){const U=h(R,N,H,Q,j,z);H.transmission>0?r.unshift(U):H.transparent===!0?o.unshift(U):n.unshift(U)}function x(R,N){n.length>1&&n.sort(R||OUe),r.length>1&&r.sort(N||jve),o.length>1&&o.sort(N||jve)}function M(){for(let R=e,N=t.length;R<N;R++){const H=t[R];if(H.id===null)break;H.id=null,H.object=null,H.geometry=null,H.material=null,H.group=null}}return{opaque:n,transmissive:r,transparent:o,init:u,push:m,unshift:_,finish:M,sort:x}}function DUe(){let t=new WeakMap;function e(r,o){const u=t.get(r);let h;return u===void 0?(h=new zve,t.set(r,[h])):o>=u.length?(h=new zve,u.push(h)):h=u[o],h}function n(){t=new WeakMap}return{get:e,dispose:n}}function LUe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new dt,color:new Pr};break;case"SpotLight":n={position:new dt,direction:new dt,color:new Pr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new dt,color:new Pr,distance:0,decay:0};break;case"HemisphereLight":n={direction:new dt,skyColor:new Pr,groundColor:new Pr};break;case"RectAreaLight":n={color:new Pr,position:new dt,halfWidth:new dt,halfHeight:new dt};break}return t[e.id]=n,n}}}function NUe(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new kr};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new kr};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new kr,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let FUe=0;function BUe(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function UUe(t,e){const n=new LUe,r=NUe(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let M=0;M<9;M++)o.probe.push(new dt);const u=new dt,h=new uo,m=new uo;function _(M,R){let N=0,H=0,Q=0;for(let St=0;St<9;St++)o.probe[St].set(0,0,0);let j=0,z=0,U=0,C=0,K=0,te=0,pe=0,Z=0,be=0,Pe=0;M.sort(BUe);const G=R===!0?Math.PI:1;for(let St=0,kt=M.length;St<kt;St++){const it=M[St],me=it.color,lt=it.intensity,Fe=it.distance,vt=it.shadow&&it.shadow.map?it.shadow.map.texture:null;if(it.isAmbientLight)N+=me.r*lt*G,H+=me.g*lt*G,Q+=me.b*lt*G;else if(it.isLightProbe)for(let Ge=0;Ge<9;Ge++)o.probe[Ge].addScaledVector(it.sh.coefficients[Ge],lt);else if(it.isDirectionalLight){const Ge=n.get(it);if(Ge.color.copy(it.color).multiplyScalar(it.intensity*G),it.castShadow){const mt=it.shadow,Je=r.get(it);Je.shadowBias=mt.bias,Je.shadowNormalBias=mt.normalBias,Je.shadowRadius=mt.radius,Je.shadowMapSize=mt.mapSize,o.directionalShadow[j]=Je,o.directionalShadowMap[j]=vt,o.directionalShadowMatrix[j]=it.shadow.matrix,te++}o.directional[j]=Ge,j++}else if(it.isSpotLight){const Ge=n.get(it);Ge.position.setFromMatrixPosition(it.matrixWorld),Ge.color.copy(me).multiplyScalar(lt*G),Ge.distance=Fe,Ge.coneCos=Math.cos(it.angle),Ge.penumbraCos=Math.cos(it.angle*(1-it.penumbra)),Ge.decay=it.decay,o.spot[U]=Ge;const mt=it.shadow;if(it.map&&(o.spotLightMap[be]=it.map,be++,mt.updateMatrices(it),it.castShadow&&Pe++),o.spotLightMatrix[U]=mt.matrix,it.castShadow){const Je=r.get(it);Je.shadowBias=mt.bias,Je.shadowNormalBias=mt.normalBias,Je.shadowRadius=mt.radius,Je.shadowMapSize=mt.mapSize,o.spotShadow[U]=Je,o.spotShadowMap[U]=vt,Z++}U++}else if(it.isRectAreaLight){const Ge=n.get(it);Ge.color.copy(me).multiplyScalar(lt),Ge.halfWidth.set(it.width*.5,0,0),Ge.halfHeight.set(0,it.height*.5,0),o.rectArea[C]=Ge,C++}else if(it.isPointLight){const Ge=n.get(it);if(Ge.color.copy(it.color).multiplyScalar(it.intensity*G),Ge.distance=it.distance,Ge.decay=it.decay,it.castShadow){const mt=it.shadow,Je=r.get(it);Je.shadowBias=mt.bias,Je.shadowNormalBias=mt.normalBias,Je.shadowRadius=mt.radius,Je.shadowMapSize=mt.mapSize,Je.shadowCameraNear=mt.camera.near,Je.shadowCameraFar=mt.camera.far,o.pointShadow[z]=Je,o.pointShadowMap[z]=vt,o.pointShadowMatrix[z]=it.shadow.matrix,pe++}o.point[z]=Ge,z++}else if(it.isHemisphereLight){const Ge=n.get(it);Ge.skyColor.copy(it.color).multiplyScalar(lt*G),Ge.groundColor.copy(it.groundColor).multiplyScalar(lt*G),o.hemi[K]=Ge,K++}}C>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=Yt.LTC_FLOAT_1,o.rectAreaLTC2=Yt.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=Yt.LTC_HALF_1,o.rectAreaLTC2=Yt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=N,o.ambient[1]=H,o.ambient[2]=Q;const ye=o.hash;(ye.directionalLength!==j||ye.pointLength!==z||ye.spotLength!==U||ye.rectAreaLength!==C||ye.hemiLength!==K||ye.numDirectionalShadows!==te||ye.numPointShadows!==pe||ye.numSpotShadows!==Z||ye.numSpotMaps!==be)&&(o.directional.length=j,o.spot.length=U,o.rectArea.length=C,o.point.length=z,o.hemi.length=K,o.directionalShadow.length=te,o.directionalShadowMap.length=te,o.pointShadow.length=pe,o.pointShadowMap.length=pe,o.spotShadow.length=Z,o.spotShadowMap.length=Z,o.directionalShadowMatrix.length=te,o.pointShadowMatrix.length=pe,o.spotLightMatrix.length=Z+be-Pe,o.spotLightMap.length=be,o.numSpotLightShadowsWithMaps=Pe,ye.directionalLength=j,ye.pointLength=z,ye.spotLength=U,ye.rectAreaLength=C,ye.hemiLength=K,ye.numDirectionalShadows=te,ye.numPointShadows=pe,ye.numSpotShadows=Z,ye.numSpotMaps=be,o.version=FUe++)}function x(M,R){let N=0,H=0,Q=0,j=0,z=0;const U=R.matrixWorldInverse;for(let C=0,K=M.length;C<K;C++){const te=M[C];if(te.isDirectionalLight){const pe=o.directional[N];pe.direction.setFromMatrixPosition(te.matrixWorld),u.setFromMatrixPosition(te.target.matrixWorld),pe.direction.sub(u),pe.direction.transformDirection(U),N++}else if(te.isSpotLight){const pe=o.spot[Q];pe.position.setFromMatrixPosition(te.matrixWorld),pe.position.applyMatrix4(U),pe.direction.setFromMatrixPosition(te.matrixWorld),u.setFromMatrixPosition(te.target.matrixWorld),pe.direction.sub(u),pe.direction.transformDirection(U),Q++}else if(te.isRectAreaLight){const pe=o.rectArea[j];pe.position.setFromMatrixPosition(te.matrixWorld),pe.position.applyMatrix4(U),m.identity(),h.copy(te.matrixWorld),h.premultiply(U),m.extractRotation(h),pe.halfWidth.set(te.width*.5,0,0),pe.halfHeight.set(0,te.height*.5,0),pe.halfWidth.applyMatrix4(m),pe.halfHeight.applyMatrix4(m),j++}else if(te.isPointLight){const pe=o.point[H];pe.position.setFromMatrixPosition(te.matrixWorld),pe.position.applyMatrix4(U),H++}else if(te.isHemisphereLight){const pe=o.hemi[z];pe.direction.setFromMatrixPosition(te.matrixWorld),pe.direction.transformDirection(U),z++}}}return{setup:_,setupView:x,state:o}}function Hve(t,e){const n=new UUe(t,e),r=[],o=[];function u(){r.length=0,o.length=0}function h(R){r.push(R)}function m(R){o.push(R)}function _(R){n.setup(r,R)}function x(R){n.setupView(r,R)}return{init:u,state:{lightsArray:r,shadowsArray:o,lights:n},setupLights:_,setupLightsView:x,pushLight:h,pushShadow:m}}function VUe(t,e){let n=new WeakMap;function r(u,h=0){const m=n.get(u);let _;return m===void 0?(_=new Hve(t,e),n.set(u,[_])):h>=m.length?(_=new Hve(t,e),m.push(_)):_=m[h],_}function o(){n=new WeakMap}return{get:r,dispose:o}}class jUe extends ew{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=FLe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class zUe extends ew{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const HUe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,GUe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function $Ue(t,e,n){let r=new wG;const o=new kr,u=new kr,h=new Io,m=new jUe({depthPacking:BLe}),_=new zUe,x={},M=n.maxTextureSize,R={[Mh]:ga,[ga]:Mh,[fh]:fh},N=new Ng({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new kr},radius:{value:4}},vertexShader:HUe,fragmentShader:GUe}),H=N.clone();H.defines.HORIZONTAL_PASS=1;const Q=new am;Q.setAttribute("position",new zc(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const j=new Dl(Q,N),z=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=S_e;let U=this.type;this.render=function(pe,Z,be){if(z.enabled===!1||z.autoUpdate===!1&&z.needsUpdate===!1||pe.length===0)return;const Pe=t.getRenderTarget(),G=t.getActiveCubeFace(),ye=t.getActiveMipmapLevel(),St=t.state;St.setBlending($f),St.buffers.color.setClear(1,1,1,1),St.buffers.depth.setTest(!0),St.setScissorTest(!1);const kt=U!==dh&&this.type===dh,it=U===dh&&this.type!==dh;for(let me=0,lt=pe.length;me<lt;me++){const Fe=pe[me],vt=Fe.shadow;if(vt===void 0){console.warn("THREE.WebGLShadowMap:",Fe,"has no shadow.");continue}if(vt.autoUpdate===!1&&vt.needsUpdate===!1)continue;o.copy(vt.mapSize);const Ge=vt.getFrameExtents();if(o.multiply(Ge),u.copy(vt.mapSize),(o.x>M||o.y>M)&&(o.x>M&&(u.x=Math.floor(M/Ge.x),o.x=u.x*Ge.x,vt.mapSize.x=u.x),o.y>M&&(u.y=Math.floor(M/Ge.y),o.y=u.y*Ge.y,vt.mapSize.y=u.y)),vt.map===null||kt===!0||it===!0){const Je=this.type!==dh?{minFilter:Vs,magFilter:Vs}:{};vt.map!==null&&vt.map.dispose(),vt.map=new Lg(o.x,o.y,Je),vt.map.texture.name=Fe.name+".shadowMap",vt.camera.updateProjectionMatrix()}t.setRenderTarget(vt.map),t.clear();const mt=vt.getViewportCount();for(let Je=0;Je<mt;Je++){const Be=vt.getViewport(Je);h.set(u.x*Be.x,u.y*Be.y,u.x*Be.z,u.y*Be.w),St.viewport(h),vt.updateMatrices(Fe,Je),r=vt.getFrustum(),te(Z,be,vt.camera,Fe,this.type)}vt.isPointLightShadow!==!0&&this.type===dh&&C(vt,be),vt.needsUpdate=!1}U=this.type,z.needsUpdate=!1,t.setRenderTarget(Pe,G,ye)};function C(pe,Z){const be=e.update(j);N.defines.VSM_SAMPLES!==pe.blurSamples&&(N.defines.VSM_SAMPLES=pe.blurSamples,H.defines.VSM_SAMPLES=pe.blurSamples,N.needsUpdate=!0,H.needsUpdate=!0),pe.mapPass===null&&(pe.mapPass=new Lg(o.x,o.y)),N.uniforms.shadow_pass.value=pe.map.texture,N.uniforms.resolution.value=pe.mapSize,N.uniforms.radius.value=pe.radius,t.setRenderTarget(pe.mapPass),t.clear(),t.renderBufferDirect(Z,null,be,N,j,null),H.uniforms.shadow_pass.value=pe.mapPass.texture,H.uniforms.resolution.value=pe.mapSize,H.uniforms.radius.value=pe.radius,t.setRenderTarget(pe.map),t.clear(),t.renderBufferDirect(Z,null,be,H,j,null)}function K(pe,Z,be,Pe){let G=null;const ye=be.isPointLight===!0?pe.customDistanceMaterial:pe.customDepthMaterial;if(ye!==void 0)G=ye;else if(G=be.isPointLight===!0?_:m,t.localClippingEnabled&&Z.clipShadows===!0&&Array.isArray(Z.clippingPlanes)&&Z.clippingPlanes.length!==0||Z.displacementMap&&Z.displacementScale!==0||Z.alphaMap&&Z.alphaTest>0||Z.map&&Z.alphaTest>0){const St=G.uuid,kt=Z.uuid;let it=x[St];it===void 0&&(it={},x[St]=it);let me=it[kt];me===void 0&&(me=G.clone(),it[kt]=me),G=me}if(G.visible=Z.visible,G.wireframe=Z.wireframe,Pe===dh?G.side=Z.shadowSide!==null?Z.shadowSide:Z.side:G.side=Z.shadowSide!==null?Z.shadowSide:R[Z.side],G.alphaMap=Z.alphaMap,G.alphaTest=Z.alphaTest,G.map=Z.map,G.clipShadows=Z.clipShadows,G.clippingPlanes=Z.clippingPlanes,G.clipIntersection=Z.clipIntersection,G.displacementMap=Z.displacementMap,G.displacementScale=Z.displacementScale,G.displacementBias=Z.displacementBias,G.wireframeLinewidth=Z.wireframeLinewidth,G.linewidth=Z.linewidth,be.isPointLight===!0&&G.isMeshDistanceMaterial===!0){const St=t.properties.get(G);St.light=be}return G}function te(pe,Z,be,Pe,G){if(pe.visible===!1)return;if(pe.layers.test(Z.layers)&&(pe.isMesh||pe.isLine||pe.isPoints)&&(pe.castShadow||pe.receiveShadow&&G===dh)&&(!pe.frustumCulled||r.intersectsObject(pe))){pe.modelViewMatrix.multiplyMatrices(be.matrixWorldInverse,pe.matrixWorld);const kt=e.update(pe),it=pe.material;if(Array.isArray(it)){const me=kt.groups;for(let lt=0,Fe=me.length;lt<Fe;lt++){const vt=me[lt],Ge=it[vt.materialIndex];if(Ge&&Ge.visible){const mt=K(pe,Ge,Pe,G);t.renderBufferDirect(be,null,kt,mt,pe,vt)}}}else if(it.visible){const me=K(pe,it,Pe,G);t.renderBufferDirect(be,null,kt,me,pe,null)}}const St=pe.children;for(let kt=0,it=St.length;kt<it;kt++)te(St[kt],Z,be,Pe,G)}}function WUe(t,e,n){const r=n.isWebGL2;function o(){let Le=!1;const Gt=new Io;let ht=null;const jt=new Io(0,0,0,0);return{setMask:function(qt){ht!==qt&&!Le&&(t.colorMask(qt,qt,qt,qt),ht=qt)},setLocked:function(qt){Le=qt},setClear:function(qt,Qn,Lr,Mr,es){es===!0&&(qt*=Mr,Qn*=Mr,Lr*=Mr),Gt.set(qt,Qn,Lr,Mr),jt.equals(Gt)===!1&&(t.clearColor(qt,Qn,Lr,Mr),jt.copy(Gt))},reset:function(){Le=!1,ht=null,jt.set(-1,0,0,0)}}}function u(){let Le=!1,Gt=null,ht=null,jt=null;return{setTest:function(qt){qt?on(t.DEPTH_TEST):wn(t.DEPTH_TEST)},setMask:function(qt){Gt!==qt&&!Le&&(t.depthMask(qt),Gt=qt)},setFunc:function(qt){if(ht!==qt){switch(qt){case pLe:t.depthFunc(t.NEVER);break;case fLe:t.depthFunc(t.ALWAYS);break;case mLe:t.depthFunc(t.LESS);break;case A3:t.depthFunc(t.LEQUAL);break;case vLe:t.depthFunc(t.EQUAL);break;case gLe:t.depthFunc(t.GEQUAL);break;case yLe:t.depthFunc(t.GREATER);break;case bLe:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ht=qt}},setLocked:function(qt){Le=qt},setClear:function(qt){jt!==qt&&(t.clearDepth(qt),jt=qt)},reset:function(){Le=!1,Gt=null,ht=null,jt=null}}}function h(){let Le=!1,Gt=null,ht=null,jt=null,qt=null,Qn=null,Lr=null,Mr=null,es=null;return{setTest:function(rr){Le||(rr?on(t.STENCIL_TEST):wn(t.STENCIL_TEST))},setMask:function(rr){Gt!==rr&&!Le&&(t.stencilMask(rr),Gt=rr)},setFunc:function(rr,zr,Ar){(ht!==rr||jt!==zr||qt!==Ar)&&(t.stencilFunc(rr,zr,Ar),ht=rr,jt=zr,qt=Ar)},setOp:function(rr,zr,Ar){(Qn!==rr||Lr!==zr||Mr!==Ar)&&(t.stencilOp(rr,zr,Ar),Qn=rr,Lr=zr,Mr=Ar)},setLocked:function(rr){Le=rr},setClear:function(rr){es!==rr&&(t.clearStencil(rr),es=rr)},reset:function(){Le=!1,Gt=null,ht=null,jt=null,qt=null,Qn=null,Lr=null,Mr=null,es=null}}}const m=new o,_=new u,x=new h,M=new WeakMap,R=new WeakMap;let N={},H={},Q=new WeakMap,j=[],z=null,U=!1,C=null,K=null,te=null,pe=null,Z=null,be=null,Pe=null,G=!1,ye=null,St=null,kt=null,it=null,me=null;const lt=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Fe=!1,vt=0;const Ge=t.getParameter(t.VERSION);Ge.indexOf("WebGL")!==-1?(vt=parseFloat(/^WebGL (\d)/.exec(Ge)[1]),Fe=vt>=1):Ge.indexOf("OpenGL ES")!==-1&&(vt=parseFloat(/^OpenGL ES (\d)/.exec(Ge)[1]),Fe=vt>=2);let mt=null,Je={};const Be=t.getParameter(t.SCISSOR_BOX),nt=t.getParameter(t.VIEWPORT),$t=new Io().fromArray(Be),Ut=new Io().fromArray(nt);function Dt(Le,Gt,ht,jt){const qt=new Uint8Array(4),Qn=t.createTexture();t.bindTexture(Le,Qn),t.texParameteri(Le,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Le,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Lr=0;Lr<ht;Lr++)r&&(Le===t.TEXTURE_3D||Le===t.TEXTURE_2D_ARRAY)?t.texImage3D(Gt,0,t.RGBA,1,1,jt,0,t.RGBA,t.UNSIGNED_BYTE,qt):t.texImage2D(Gt+Lr,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,qt);return Qn}const en={};en[t.TEXTURE_2D]=Dt(t.TEXTURE_2D,t.TEXTURE_2D,1),en[t.TEXTURE_CUBE_MAP]=Dt(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(en[t.TEXTURE_2D_ARRAY]=Dt(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),en[t.TEXTURE_3D]=Dt(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),m.setClear(0,0,0,1),_.setClear(1),x.setClear(0),on(t.DEPTH_TEST),_.setFunc(A3),gn(!1),Ir(Tme),on(t.CULL_FACE),Pn($f);function on(Le){N[Le]!==!0&&(t.enable(Le),N[Le]=!0)}function wn(Le){N[Le]!==!1&&(t.disable(Le),N[Le]=!1)}function Wn(Le,Gt){return H[Le]!==Gt?(t.bindFramebuffer(Le,Gt),H[Le]=Gt,r&&(Le===t.DRAW_FRAMEBUFFER&&(H[t.FRAMEBUFFER]=Gt),Le===t.FRAMEBUFFER&&(H[t.DRAW_FRAMEBUFFER]=Gt)),!0):!1}function qr(Le,Gt){let ht=j,jt=!1;if(Le)if(ht=Q.get(Gt),ht===void 0&&(ht=[],Q.set(Gt,ht)),Le.isWebGLMultipleRenderTargets){const qt=Le.texture;if(ht.length!==qt.length||ht[0]!==t.COLOR_ATTACHMENT0){for(let Qn=0,Lr=qt.length;Qn<Lr;Qn++)ht[Qn]=t.COLOR_ATTACHMENT0+Qn;ht.length=qt.length,jt=!0}}else ht[0]!==t.COLOR_ATTACHMENT0&&(ht[0]=t.COLOR_ATTACHMENT0,jt=!0);else ht[0]!==t.BACK&&(ht[0]=t.BACK,jt=!0);jt&&(n.isWebGL2?t.drawBuffers(ht):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ht))}function xn(Le){return z!==Le?(t.useProgram(Le),z=Le,!0):!1}const et={[vg]:t.FUNC_ADD,[nLe]:t.FUNC_SUBTRACT,[rLe]:t.FUNC_REVERSE_SUBTRACT};if(r)et[Rme]=t.MIN,et[Ome]=t.MAX;else{const Le=e.get("EXT_blend_minmax");Le!==null&&(et[Rme]=Le.MIN_EXT,et[Ome]=Le.MAX_EXT)}const Qr={[iLe]:t.ZERO,[oLe]:t.ONE,[sLe]:t.SRC_COLOR,[mG]:t.SRC_ALPHA,[hLe]:t.SRC_ALPHA_SATURATE,[cLe]:t.DST_COLOR,[lLe]:t.DST_ALPHA,[aLe]:t.ONE_MINUS_SRC_COLOR,[vG]:t.ONE_MINUS_SRC_ALPHA,[dLe]:t.ONE_MINUS_DST_COLOR,[uLe]:t.ONE_MINUS_DST_ALPHA};function Pn(Le,Gt,ht,jt,qt,Qn,Lr,Mr){if(Le===$f){U===!0&&(wn(t.BLEND),U=!1);return}if(U===!1&&(on(t.BLEND),U=!0),Le!==tLe){if(Le!==C||Mr!==G){if((K!==vg||Z!==vg)&&(t.blendEquation(t.FUNC_ADD),K=vg,Z=vg),Mr)switch(Le){case Eg:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Mme:t.blendFunc(t.ONE,t.ONE);break;case Ame:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Ime:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Le);break}else switch(Le){case Eg:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case Mme:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case Ame:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case Ime:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Le);break}te=null,pe=null,be=null,Pe=null,C=Le,G=Mr}return}qt=qt||Gt,Qn=Qn||ht,Lr=Lr||jt,(Gt!==K||qt!==Z)&&(t.blendEquationSeparate(et[Gt],et[qt]),K=Gt,Z=qt),(ht!==te||jt!==pe||Qn!==be||Lr!==Pe)&&(t.blendFuncSeparate(Qr[ht],Qr[jt],Qr[Qn],Qr[Lr]),te=ht,pe=jt,be=Qn,Pe=Lr),C=Le,G=!1}function Sn(Le,Gt){Le.side===fh?wn(t.CULL_FACE):on(t.CULL_FACE);let ht=Le.side===ga;Gt&&(ht=!ht),gn(ht),Le.blending===Eg&&Le.transparent===!1?Pn($f):Pn(Le.blending,Le.blendEquation,Le.blendSrc,Le.blendDst,Le.blendEquationAlpha,Le.blendSrcAlpha,Le.blendDstAlpha,Le.premultipliedAlpha),_.setFunc(Le.depthFunc),_.setTest(Le.depthTest),_.setMask(Le.depthWrite),m.setMask(Le.colorWrite);const jt=Le.stencilWrite;x.setTest(jt),jt&&(x.setMask(Le.stencilWriteMask),x.setFunc(Le.stencilFunc,Le.stencilRef,Le.stencilFuncMask),x.setOp(Le.stencilFail,Le.stencilZFail,Le.stencilZPass)),Nn(Le.polygonOffset,Le.polygonOffsetFactor,Le.polygonOffsetUnits),Le.alphaToCoverage===!0?on(t.SAMPLE_ALPHA_TO_COVERAGE):wn(t.SAMPLE_ALPHA_TO_COVERAGE)}function gn(Le){ye!==Le&&(Le?t.frontFace(t.CW):t.frontFace(t.CCW),ye=Le)}function Ir(Le){Le!==Q3e?(on(t.CULL_FACE),Le!==St&&(Le===Tme?t.cullFace(t.BACK):Le===J3e?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):wn(t.CULL_FACE),St=Le}function kn(Le){Le!==kt&&(Fe&&t.lineWidth(Le),kt=Le)}function Nn(Le,Gt,ht){Le?(on(t.POLYGON_OFFSET_FILL),(it!==Gt||me!==ht)&&(t.polygonOffset(Gt,ht),it=Gt,me=ht)):wn(t.POLYGON_OFFSET_FILL)}function cr(Le){Le?on(t.SCISSOR_TEST):wn(t.SCISSOR_TEST)}function si(Le){Le===void 0&&(Le=t.TEXTURE0+lt-1),mt!==Le&&(t.activeTexture(Le),mt=Le)}function Dr(Le,Gt,ht){ht===void 0&&(mt===null?ht=t.TEXTURE0+lt-1:ht=mt);let jt=Je[ht];jt===void 0&&(jt={type:void 0,texture:void 0},Je[ht]=jt),(jt.type!==Le||jt.texture!==Gt)&&(mt!==ht&&(t.activeTexture(ht),mt=ht),t.bindTexture(Le,Gt||en[Le]),jt.type=Le,jt.texture=Gt)}function Ee(){const Le=Je[mt];Le!==void 0&&Le.type!==void 0&&(t.bindTexture(Le.type,null),Le.type=void 0,Le.texture=void 0)}function ce(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function ut(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Vt(){try{t.texSubImage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Ot(){try{t.texSubImage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Bt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function mn(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function Ht(){try{t.texStorage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function pt(){try{t.texStorage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function En(){try{t.texImage2D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function tn(){try{t.texImage3D.apply(t,arguments)}catch(Le){console.error("THREE.WebGLState:",Le)}}function yn(Le){$t.equals(Le)===!1&&(t.scissor(Le.x,Le.y,Le.z,Le.w),$t.copy(Le))}function rn(Le){Ut.equals(Le)===!1&&(t.viewport(Le.x,Le.y,Le.z,Le.w),Ut.copy(Le))}function Jt(Le,Gt){let ht=R.get(Gt);ht===void 0&&(ht=new WeakMap,R.set(Gt,ht));let jt=ht.get(Le);jt===void 0&&(jt=t.getUniformBlockIndex(Gt,Le.name),ht.set(Le,jt))}function Bn(Le,Gt){const jt=R.get(Gt).get(Le);M.get(Gt)!==jt&&(t.uniformBlockBinding(Gt,jt,Le.__bindingPointIndex),M.set(Gt,jt))}function pr(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),N={},mt=null,Je={},H={},Q=new WeakMap,j=[],z=null,U=!1,C=null,K=null,te=null,pe=null,Z=null,be=null,Pe=null,G=!1,ye=null,St=null,kt=null,it=null,me=null,$t.set(0,0,t.canvas.width,t.canvas.height),Ut.set(0,0,t.canvas.width,t.canvas.height),m.reset(),_.reset(),x.reset()}return{buffers:{color:m,depth:_,stencil:x},enable:on,disable:wn,bindFramebuffer:Wn,drawBuffers:qr,useProgram:xn,setBlending:Pn,setMaterial:Sn,setFlipSided:gn,setCullFace:Ir,setLineWidth:kn,setPolygonOffset:Nn,setScissorTest:cr,activeTexture:si,bindTexture:Dr,unbindTexture:Ee,compressedTexImage2D:ce,compressedTexImage3D:ut,texImage2D:En,texImage3D:tn,updateUBOMapping:Jt,uniformBlockBinding:Bn,texStorage2D:Ht,texStorage3D:pt,texSubImage2D:Vt,texSubImage3D:Ot,compressedTexSubImage2D:Bt,compressedTexSubImage3D:mn,scissor:yn,viewport:rn,reset:pr}}function KUe(t,e,n,r,o,u,h){const m=o.isWebGL2,_=o.maxTextures,x=o.maxCubemapSize,M=o.maxTextureSize,R=o.maxSamples,N=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,H=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),Q=new WeakMap;let j;const z=new WeakMap;let U=!1;try{U=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function C(Ee,ce){return U?new OffscreenCanvas(Ee,ce):R3("canvas")}function K(Ee,ce,ut,Vt){let Ot=1;if((Ee.width>Vt||Ee.height>Vt)&&(Ot=Vt/Math.max(Ee.width,Ee.height)),Ot<1||ce===!0)if(typeof HTMLImageElement<"u"&&Ee instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Ee instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Ee instanceof ImageBitmap){const Bt=ce?zH:Math.floor,mn=Bt(Ot*Ee.width),Ht=Bt(Ot*Ee.height);j===void 0&&(j=C(mn,Ht));const pt=ut?C(mn,Ht):j;return pt.width=mn,pt.height=Ht,pt.getContext("2d").drawImage(Ee,0,0,mn,Ht),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ee.width+"x"+Ee.height+") to ("+mn+"x"+Ht+")."),pt}else return"data"in Ee&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ee.width+"x"+Ee.height+")."),Ee;return Ee}function te(Ee){return sve(Ee.width)&&sve(Ee.height)}function pe(Ee){return m?!1:Ee.wrapS!==Nu||Ee.wrapT!==Nu||Ee.minFilter!==Vs&&Ee.minFilter!==Il}function Z(Ee,ce){return Ee.generateMipmaps&&ce&&Ee.minFilter!==Vs&&Ee.minFilter!==Il}function be(Ee){t.generateMipmap(Ee)}function Pe(Ee,ce,ut,Vt,Ot=!1){if(m===!1)return ce;if(Ee!==null){if(t[Ee]!==void 0)return t[Ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ee+"'")}let Bt=ce;return ce===t.RED&&(ut===t.FLOAT&&(Bt=t.R32F),ut===t.HALF_FLOAT&&(Bt=t.R16F),ut===t.UNSIGNED_BYTE&&(Bt=t.R8)),ce===t.RED_INTEGER&&(ut===t.UNSIGNED_BYTE&&(Bt=t.R8UI),ut===t.UNSIGNED_SHORT&&(Bt=t.R16UI),ut===t.UNSIGNED_INT&&(Bt=t.R32UI),ut===t.BYTE&&(Bt=t.R8I),ut===t.SHORT&&(Bt=t.R16I),ut===t.INT&&(Bt=t.R32I)),ce===t.RG&&(ut===t.FLOAT&&(Bt=t.RG32F),ut===t.HALF_FLOAT&&(Bt=t.RG16F),ut===t.UNSIGNED_BYTE&&(Bt=t.RG8)),ce===t.RGBA&&(ut===t.FLOAT&&(Bt=t.RGBA32F),ut===t.HALF_FLOAT&&(Bt=t.RGBA16F),ut===t.UNSIGNED_BYTE&&(Bt=Vt===tr&&Ot===!1?t.SRGB8_ALPHA8:t.RGBA8),ut===t.UNSIGNED_SHORT_4_4_4_4&&(Bt=t.RGBA4),ut===t.UNSIGNED_SHORT_5_5_5_1&&(Bt=t.RGB5_A1)),(Bt===t.R16F||Bt===t.R32F||Bt===t.RG16F||Bt===t.RG32F||Bt===t.RGBA16F||Bt===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Bt}function G(Ee,ce,ut){return Z(Ee,ut)===!0||Ee.isFramebufferTexture&&Ee.minFilter!==Vs&&Ee.minFilter!==Il?Math.log2(Math.max(ce.width,ce.height))+1:Ee.mipmaps!==void 0&&Ee.mipmaps.length>0?Ee.mipmaps.length:Ee.isCompressedTexture&&Array.isArray(Ee.image)?ce.mipmaps.length:1}function ye(Ee){return Ee===Vs||Ee===Dme||Ee===O6?t.NEAREST:t.LINEAR}function St(Ee){const ce=Ee.target;ce.removeEventListener("dispose",St),it(ce),ce.isVideoTexture&&Q.delete(ce)}function kt(Ee){const ce=Ee.target;ce.removeEventListener("dispose",kt),lt(ce)}function it(Ee){const ce=r.get(Ee);if(ce.__webglInit===void 0)return;const ut=Ee.source,Vt=z.get(ut);if(Vt){const Ot=Vt[ce.__cacheKey];Ot.usedTimes--,Ot.usedTimes===0&&me(Ee),Object.keys(Vt).length===0&&z.delete(ut)}r.remove(Ee)}function me(Ee){const ce=r.get(Ee);t.deleteTexture(ce.__webglTexture);const ut=Ee.source,Vt=z.get(ut);delete Vt[ce.__cacheKey],h.memory.textures--}function lt(Ee){const ce=Ee.texture,ut=r.get(Ee),Vt=r.get(ce);if(Vt.__webglTexture!==void 0&&(t.deleteTexture(Vt.__webglTexture),h.memory.textures--),Ee.depthTexture&&Ee.depthTexture.dispose(),Ee.isWebGLCubeRenderTarget)for(let Ot=0;Ot<6;Ot++){if(Array.isArray(ut.__webglFramebuffer[Ot]))for(let Bt=0;Bt<ut.__webglFramebuffer[Ot].length;Bt++)t.deleteFramebuffer(ut.__webglFramebuffer[Ot][Bt]);else t.deleteFramebuffer(ut.__webglFramebuffer[Ot]);ut.__webglDepthbuffer&&t.deleteRenderbuffer(ut.__webglDepthbuffer[Ot])}else{if(Array.isArray(ut.__webglFramebuffer))for(let Ot=0;Ot<ut.__webglFramebuffer.length;Ot++)t.deleteFramebuffer(ut.__webglFramebuffer[Ot]);else t.deleteFramebuffer(ut.__webglFramebuffer);if(ut.__webglDepthbuffer&&t.deleteRenderbuffer(ut.__webglDepthbuffer),ut.__webglMultisampledFramebuffer&&t.deleteFramebuffer(ut.__webglMultisampledFramebuffer),ut.__webglColorRenderbuffer)for(let Ot=0;Ot<ut.__webglColorRenderbuffer.length;Ot++)ut.__webglColorRenderbuffer[Ot]&&t.deleteRenderbuffer(ut.__webglColorRenderbuffer[Ot]);ut.__webglDepthRenderbuffer&&t.deleteRenderbuffer(ut.__webglDepthRenderbuffer)}if(Ee.isWebGLMultipleRenderTargets)for(let Ot=0,Bt=ce.length;Ot<Bt;Ot++){const mn=r.get(ce[Ot]);mn.__webglTexture&&(t.deleteTexture(mn.__webglTexture),h.memory.textures--),r.remove(ce[Ot])}r.remove(ce),r.remove(Ee)}let Fe=0;function vt(){Fe=0}function Ge(){const Ee=Fe;return Ee>=_&&console.warn("THREE.WebGLTextures: Trying to use "+Ee+" texture units while this GPU supports only "+_),Fe+=1,Ee}function mt(Ee){const ce=[];return ce.push(Ee.wrapS),ce.push(Ee.wrapT),ce.push(Ee.wrapR||0),ce.push(Ee.magFilter),ce.push(Ee.minFilter),ce.push(Ee.anisotropy),ce.push(Ee.internalFormat),ce.push(Ee.format),ce.push(Ee.type),ce.push(Ee.generateMipmaps),ce.push(Ee.premultiplyAlpha),ce.push(Ee.flipY),ce.push(Ee.unpackAlignment),ce.push(Ee.colorSpace),ce.join()}function Je(Ee,ce){const ut=r.get(Ee);if(Ee.isVideoTexture&&si(Ee),Ee.isRenderTargetTexture===!1&&Ee.version>0&&ut.__version!==Ee.version){const Vt=Ee.image;if(Vt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Vt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Wn(ut,Ee,ce);return}}n.bindTexture(t.TEXTURE_2D,ut.__webglTexture,t.TEXTURE0+ce)}function Be(Ee,ce){const ut=r.get(Ee);if(Ee.version>0&&ut.__version!==Ee.version){Wn(ut,Ee,ce);return}n.bindTexture(t.TEXTURE_2D_ARRAY,ut.__webglTexture,t.TEXTURE0+ce)}function nt(Ee,ce){const ut=r.get(Ee);if(Ee.version>0&&ut.__version!==Ee.version){Wn(ut,Ee,ce);return}n.bindTexture(t.TEXTURE_3D,ut.__webglTexture,t.TEXTURE0+ce)}function $t(Ee,ce){const ut=r.get(Ee);if(Ee.version>0&&ut.__version!==Ee.version){qr(ut,Ee,ce);return}n.bindTexture(t.TEXTURE_CUBE_MAP,ut.__webglTexture,t.TEXTURE0+ce)}const Ut={[BH]:t.REPEAT,[Nu]:t.CLAMP_TO_EDGE,[UH]:t.MIRRORED_REPEAT},Dt={[Vs]:t.NEAREST,[Dme]:t.NEAREST_MIPMAP_NEAREST,[O6]:t.NEAREST_MIPMAP_LINEAR,[Il]:t.LINEAR,[kLe]:t.LINEAR_MIPMAP_NEAREST,[iP]:t.LINEAR_MIPMAP_LINEAR},en={[VLe]:t.NEVER,[KLe]:t.ALWAYS,[jLe]:t.LESS,[HLe]:t.LEQUAL,[zLe]:t.EQUAL,[WLe]:t.GEQUAL,[GLe]:t.GREATER,[$Le]:t.NOTEQUAL};function on(Ee,ce,ut){if(ut?(t.texParameteri(Ee,t.TEXTURE_WRAP_S,Ut[ce.wrapS]),t.texParameteri(Ee,t.TEXTURE_WRAP_T,Ut[ce.wrapT]),(Ee===t.TEXTURE_3D||Ee===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Ee,t.TEXTURE_WRAP_R,Ut[ce.wrapR]),t.texParameteri(Ee,t.TEXTURE_MAG_FILTER,Dt[ce.magFilter]),t.texParameteri(Ee,t.TEXTURE_MIN_FILTER,Dt[ce.minFilter])):(t.texParameteri(Ee,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(Ee,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(Ee===t.TEXTURE_3D||Ee===t.TEXTURE_2D_ARRAY)&&t.texParameteri(Ee,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(ce.wrapS!==Nu||ce.wrapT!==Nu)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(Ee,t.TEXTURE_MAG_FILTER,ye(ce.magFilter)),t.texParameteri(Ee,t.TEXTURE_MIN_FILTER,ye(ce.minFilter)),ce.minFilter!==Vs&&ce.minFilter!==Il&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),ce.compareFunction&&(t.texParameteri(Ee,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(Ee,t.TEXTURE_COMPARE_FUNC,en[ce.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Vt=e.get("EXT_texture_filter_anisotropic");if(ce.magFilter===Vs||ce.minFilter!==O6&&ce.minFilter!==iP||ce.type===Df&&e.has("OES_texture_float_linear")===!1||m===!1&&ce.type===oP&&e.has("OES_texture_half_float_linear")===!1)return;(ce.anisotropy>1||r.get(ce).__currentAnisotropy)&&(t.texParameterf(Ee,Vt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ce.anisotropy,o.getMaxAnisotropy())),r.get(ce).__currentAnisotropy=ce.anisotropy)}}function wn(Ee,ce){let ut=!1;Ee.__webglInit===void 0&&(Ee.__webglInit=!0,ce.addEventListener("dispose",St));const Vt=ce.source;let Ot=z.get(Vt);Ot===void 0&&(Ot={},z.set(Vt,Ot));const Bt=mt(ce);if(Bt!==Ee.__cacheKey){Ot[Bt]===void 0&&(Ot[Bt]={texture:t.createTexture(),usedTimes:0},h.memory.textures++,ut=!0),Ot[Bt].usedTimes++;const mn=Ot[Ee.__cacheKey];mn!==void 0&&(Ot[Ee.__cacheKey].usedTimes--,mn.usedTimes===0&&me(ce)),Ee.__cacheKey=Bt,Ee.__webglTexture=Ot[Bt].texture}return ut}function Wn(Ee,ce,ut){let Vt=t.TEXTURE_2D;(ce.isDataArrayTexture||ce.isCompressedArrayTexture)&&(Vt=t.TEXTURE_2D_ARRAY),ce.isData3DTexture&&(Vt=t.TEXTURE_3D);const Ot=wn(Ee,ce),Bt=ce.source;n.bindTexture(Vt,Ee.__webglTexture,t.TEXTURE0+ut);const mn=r.get(Bt);if(Bt.version!==mn.__version||Ot===!0){n.activeTexture(t.TEXTURE0+ut),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,ce.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,ce.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Ht=pe(ce)&&te(ce.image)===!1;let pt=K(ce.image,Ht,!1,M);pt=Dr(ce,pt);const En=te(pt)||m,tn=u.convert(ce.format,ce.colorSpace);let yn=u.convert(ce.type),rn=Pe(ce.internalFormat,tn,yn,ce.colorSpace);on(Vt,ce,En);let Jt;const Bn=ce.mipmaps,pr=m&&ce.isVideoTexture!==!0,Le=mn.__version===void 0||Ot===!0,Gt=G(ce,pt,En);if(ce.isDepthTexture)rn=t.DEPTH_COMPONENT,m?ce.type===Df?rn=t.DEPTH_COMPONENT32F:ce.type===Of?rn=t.DEPTH_COMPONENT24:ce.type===Cg?rn=t.DEPTH24_STENCIL8:rn=t.DEPTH_COMPONENT16:ce.type===Df&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ce.format===Pg&&rn===t.DEPTH_COMPONENT&&ce.type!==gG&&ce.type!==Of&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ce.type=Of,yn=u.convert(ce.type)),ce.format===$_&&rn===t.DEPTH_COMPONENT&&(rn=t.DEPTH_STENCIL,ce.type!==Cg&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ce.type=Cg,yn=u.convert(ce.type))),Le&&(pr?n.texStorage2D(t.TEXTURE_2D,1,rn,pt.width,pt.height):n.texImage2D(t.TEXTURE_2D,0,rn,pt.width,pt.height,0,tn,yn,null));else if(ce.isDataTexture)if(Bn.length>0&&En){pr&&Le&&n.texStorage2D(t.TEXTURE_2D,Gt,rn,Bn[0].width,Bn[0].height);for(let ht=0,jt=Bn.length;ht<jt;ht++)Jt=Bn[ht],pr?n.texSubImage2D(t.TEXTURE_2D,ht,0,0,Jt.width,Jt.height,tn,yn,Jt.data):n.texImage2D(t.TEXTURE_2D,ht,rn,Jt.width,Jt.height,0,tn,yn,Jt.data);ce.generateMipmaps=!1}else pr?(Le&&n.texStorage2D(t.TEXTURE_2D,Gt,rn,pt.width,pt.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,pt.width,pt.height,tn,yn,pt.data)):n.texImage2D(t.TEXTURE_2D,0,rn,pt.width,pt.height,0,tn,yn,pt.data);else if(ce.isCompressedTexture)if(ce.isCompressedArrayTexture){pr&&Le&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Gt,rn,Bn[0].width,Bn[0].height,pt.depth);for(let ht=0,jt=Bn.length;ht<jt;ht++)Jt=Bn[ht],ce.format!==Fu?tn!==null?pr?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,ht,0,0,0,Jt.width,Jt.height,pt.depth,tn,Jt.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,ht,rn,Jt.width,Jt.height,pt.depth,0,Jt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pr?n.texSubImage3D(t.TEXTURE_2D_ARRAY,ht,0,0,0,Jt.width,Jt.height,pt.depth,tn,yn,Jt.data):n.texImage3D(t.TEXTURE_2D_ARRAY,ht,rn,Jt.width,Jt.height,pt.depth,0,tn,yn,Jt.data)}else{pr&&Le&&n.texStorage2D(t.TEXTURE_2D,Gt,rn,Bn[0].width,Bn[0].height);for(let ht=0,jt=Bn.length;ht<jt;ht++)Jt=Bn[ht],ce.format!==Fu?tn!==null?pr?n.compressedTexSubImage2D(t.TEXTURE_2D,ht,0,0,Jt.width,Jt.height,tn,Jt.data):n.compressedTexImage2D(t.TEXTURE_2D,ht,rn,Jt.width,Jt.height,0,Jt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pr?n.texSubImage2D(t.TEXTURE_2D,ht,0,0,Jt.width,Jt.height,tn,yn,Jt.data):n.texImage2D(t.TEXTURE_2D,ht,rn,Jt.width,Jt.height,0,tn,yn,Jt.data)}else if(ce.isDataArrayTexture)pr?(Le&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Gt,rn,pt.width,pt.height,pt.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,pt.width,pt.height,pt.depth,tn,yn,pt.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,rn,pt.width,pt.height,pt.depth,0,tn,yn,pt.data);else if(ce.isData3DTexture)pr?(Le&&n.texStorage3D(t.TEXTURE_3D,Gt,rn,pt.width,pt.height,pt.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,pt.width,pt.height,pt.depth,tn,yn,pt.data)):n.texImage3D(t.TEXTURE_3D,0,rn,pt.width,pt.height,pt.depth,0,tn,yn,pt.data);else if(ce.isFramebufferTexture){if(Le)if(pr)n.texStorage2D(t.TEXTURE_2D,Gt,rn,pt.width,pt.height);else{let ht=pt.width,jt=pt.height;for(let qt=0;qt<Gt;qt++)n.texImage2D(t.TEXTURE_2D,qt,rn,ht,jt,0,tn,yn,null),ht>>=1,jt>>=1}}else if(Bn.length>0&&En){pr&&Le&&n.texStorage2D(t.TEXTURE_2D,Gt,rn,Bn[0].width,Bn[0].height);for(let ht=0,jt=Bn.length;ht<jt;ht++)Jt=Bn[ht],pr?n.texSubImage2D(t.TEXTURE_2D,ht,0,0,tn,yn,Jt):n.texImage2D(t.TEXTURE_2D,ht,rn,tn,yn,Jt);ce.generateMipmaps=!1}else pr?(Le&&n.texStorage2D(t.TEXTURE_2D,Gt,rn,pt.width,pt.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,tn,yn,pt)):n.texImage2D(t.TEXTURE_2D,0,rn,tn,yn,pt);Z(ce,En)&&be(Vt),mn.__version=Bt.version,ce.onUpdate&&ce.onUpdate(ce)}Ee.__version=ce.version}function qr(Ee,ce,ut){if(ce.image.length!==6)return;const Vt=wn(Ee,ce),Ot=ce.source;n.bindTexture(t.TEXTURE_CUBE_MAP,Ee.__webglTexture,t.TEXTURE0+ut);const Bt=r.get(Ot);if(Ot.version!==Bt.__version||Vt===!0){n.activeTexture(t.TEXTURE0+ut),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,ce.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,ce.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const mn=ce.isCompressedTexture||ce.image[0].isCompressedTexture,Ht=ce.image[0]&&ce.image[0].isDataTexture,pt=[];for(let ht=0;ht<6;ht++)!mn&&!Ht?pt[ht]=K(ce.image[ht],!1,!0,x):pt[ht]=Ht?ce.image[ht].image:ce.image[ht],pt[ht]=Dr(ce,pt[ht]);const En=pt[0],tn=te(En)||m,yn=u.convert(ce.format,ce.colorSpace),rn=u.convert(ce.type),Jt=Pe(ce.internalFormat,yn,rn,ce.colorSpace),Bn=m&&ce.isVideoTexture!==!0,pr=Bt.__version===void 0||Vt===!0;let Le=G(ce,En,tn);on(t.TEXTURE_CUBE_MAP,ce,tn);let Gt;if(mn){Bn&&pr&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Le,Jt,En.width,En.height);for(let ht=0;ht<6;ht++){Gt=pt[ht].mipmaps;for(let jt=0;jt<Gt.length;jt++){const qt=Gt[jt];ce.format!==Fu?yn!==null?Bn?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt,0,0,qt.width,qt.height,yn,qt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt,Jt,qt.width,qt.height,0,qt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt,0,0,qt.width,qt.height,yn,rn,qt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt,Jt,qt.width,qt.height,0,yn,rn,qt.data)}}}else{Gt=ce.mipmaps,Bn&&pr&&(Gt.length>0&&Le++,n.texStorage2D(t.TEXTURE_CUBE_MAP,Le,Jt,pt[0].width,pt[0].height));for(let ht=0;ht<6;ht++)if(Ht){Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0,0,0,pt[ht].width,pt[ht].height,yn,rn,pt[ht].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0,Jt,pt[ht].width,pt[ht].height,0,yn,rn,pt[ht].data);for(let jt=0;jt<Gt.length;jt++){const Qn=Gt[jt].image[ht].image;Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt+1,0,0,Qn.width,Qn.height,yn,rn,Qn.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt+1,Jt,Qn.width,Qn.height,0,yn,rn,Qn.data)}}else{Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0,0,0,yn,rn,pt[ht]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0,Jt,yn,rn,pt[ht]);for(let jt=0;jt<Gt.length;jt++){const qt=Gt[jt];Bn?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt+1,0,0,yn,rn,qt.image[ht]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ht,jt+1,Jt,yn,rn,qt.image[ht])}}}Z(ce,tn)&&be(t.TEXTURE_CUBE_MAP),Bt.__version=Ot.version,ce.onUpdate&&ce.onUpdate(ce)}Ee.__version=ce.version}function xn(Ee,ce,ut,Vt,Ot,Bt){const mn=u.convert(ut.format,ut.colorSpace),Ht=u.convert(ut.type),pt=Pe(ut.internalFormat,mn,Ht,ut.colorSpace);if(!r.get(ce).__hasExternalTextures){const tn=Math.max(1,ce.width>>Bt),yn=Math.max(1,ce.height>>Bt);Ot===t.TEXTURE_3D||Ot===t.TEXTURE_2D_ARRAY?n.texImage3D(Ot,Bt,pt,tn,yn,ce.depth,0,mn,Ht,null):n.texImage2D(Ot,Bt,pt,tn,yn,0,mn,Ht,null)}n.bindFramebuffer(t.FRAMEBUFFER,Ee),cr(ce)?N.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Vt,Ot,r.get(ut).__webglTexture,0,Nn(ce)):(Ot===t.TEXTURE_2D||Ot>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Ot<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,Vt,Ot,r.get(ut).__webglTexture,Bt),n.bindFramebuffer(t.FRAMEBUFFER,null)}function et(Ee,ce,ut){if(t.bindRenderbuffer(t.RENDERBUFFER,Ee),ce.depthBuffer&&!ce.stencilBuffer){let Vt=t.DEPTH_COMPONENT16;if(ut||cr(ce)){const Ot=ce.depthTexture;Ot&&Ot.isDepthTexture&&(Ot.type===Df?Vt=t.DEPTH_COMPONENT32F:Ot.type===Of&&(Vt=t.DEPTH_COMPONENT24));const Bt=Nn(ce);cr(ce)?N.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Bt,Vt,ce.width,ce.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Bt,Vt,ce.width,ce.height)}else t.renderbufferStorage(t.RENDERBUFFER,Vt,ce.width,ce.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,Ee)}else if(ce.depthBuffer&&ce.stencilBuffer){const Vt=Nn(ce);ut&&cr(ce)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Vt,t.DEPTH24_STENCIL8,ce.width,ce.height):cr(ce)?N.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Vt,t.DEPTH24_STENCIL8,ce.width,ce.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,ce.width,ce.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,Ee)}else{const Vt=ce.isWebGLMultipleRenderTargets===!0?ce.texture:[ce.texture];for(let Ot=0;Ot<Vt.length;Ot++){const Bt=Vt[Ot],mn=u.convert(Bt.format,Bt.colorSpace),Ht=u.convert(Bt.type),pt=Pe(Bt.internalFormat,mn,Ht,Bt.colorSpace),En=Nn(ce);ut&&cr(ce)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,En,pt,ce.width,ce.height):cr(ce)?N.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,En,pt,ce.width,ce.height):t.renderbufferStorage(t.RENDERBUFFER,pt,ce.width,ce.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Qr(Ee,ce){if(ce&&ce.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,Ee),!(ce.depthTexture&&ce.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ce.depthTexture).__webglTexture||ce.depthTexture.image.width!==ce.width||ce.depthTexture.image.height!==ce.height)&&(ce.depthTexture.image.width=ce.width,ce.depthTexture.image.height=ce.height,ce.depthTexture.needsUpdate=!0),Je(ce.depthTexture,0);const Vt=r.get(ce.depthTexture).__webglTexture,Ot=Nn(ce);if(ce.depthTexture.format===Pg)cr(ce)?N.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Vt,0,Ot):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,Vt,0);else if(ce.depthTexture.format===$_)cr(ce)?N.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Vt,0,Ot):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,Vt,0);else throw new Error("Unknown depthTexture format")}function Pn(Ee){const ce=r.get(Ee),ut=Ee.isWebGLCubeRenderTarget===!0;if(Ee.depthTexture&&!ce.__autoAllocateDepthBuffer){if(ut)throw new Error("target.depthTexture not supported in Cube render targets");Qr(ce.__webglFramebuffer,Ee)}else if(ut){ce.__webglDepthbuffer=[];for(let Vt=0;Vt<6;Vt++)n.bindFramebuffer(t.FRAMEBUFFER,ce.__webglFramebuffer[Vt]),ce.__webglDepthbuffer[Vt]=t.createRenderbuffer(),et(ce.__webglDepthbuffer[Vt],Ee,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,ce.__webglFramebuffer),ce.__webglDepthbuffer=t.createRenderbuffer(),et(ce.__webglDepthbuffer,Ee,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Sn(Ee,ce,ut){const Vt=r.get(Ee);ce!==void 0&&xn(Vt.__webglFramebuffer,Ee,Ee.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),ut!==void 0&&Pn(Ee)}function gn(Ee){const ce=Ee.texture,ut=r.get(Ee),Vt=r.get(ce);Ee.addEventListener("dispose",kt),Ee.isWebGLMultipleRenderTargets!==!0&&(Vt.__webglTexture===void 0&&(Vt.__webglTexture=t.createTexture()),Vt.__version=ce.version,h.memory.textures++);const Ot=Ee.isWebGLCubeRenderTarget===!0,Bt=Ee.isWebGLMultipleRenderTargets===!0,mn=te(Ee)||m;if(Ot){ut.__webglFramebuffer=[];for(let Ht=0;Ht<6;Ht++)if(m&&ce.mipmaps&&ce.mipmaps.length>0){ut.__webglFramebuffer[Ht]=[];for(let pt=0;pt<ce.mipmaps.length;pt++)ut.__webglFramebuffer[Ht][pt]=t.createFramebuffer()}else ut.__webglFramebuffer[Ht]=t.createFramebuffer()}else{if(m&&ce.mipmaps&&ce.mipmaps.length>0){ut.__webglFramebuffer=[];for(let Ht=0;Ht<ce.mipmaps.length;Ht++)ut.__webglFramebuffer[Ht]=t.createFramebuffer()}else ut.__webglFramebuffer=t.createFramebuffer();if(Bt)if(o.drawBuffers){const Ht=Ee.texture;for(let pt=0,En=Ht.length;pt<En;pt++){const tn=r.get(Ht[pt]);tn.__webglTexture===void 0&&(tn.__webglTexture=t.createTexture(),h.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(m&&Ee.samples>0&&cr(Ee)===!1){const Ht=Bt?ce:[ce];ut.__webglMultisampledFramebuffer=t.createFramebuffer(),ut.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,ut.__webglMultisampledFramebuffer);for(let pt=0;pt<Ht.length;pt++){const En=Ht[pt];ut.__webglColorRenderbuffer[pt]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,ut.__webglColorRenderbuffer[pt]);const tn=u.convert(En.format,En.colorSpace),yn=u.convert(En.type),rn=Pe(En.internalFormat,tn,yn,En.colorSpace,Ee.isXRRenderTarget===!0),Jt=Nn(Ee);t.renderbufferStorageMultisample(t.RENDERBUFFER,Jt,rn,Ee.width,Ee.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+pt,t.RENDERBUFFER,ut.__webglColorRenderbuffer[pt])}t.bindRenderbuffer(t.RENDERBUFFER,null),Ee.depthBuffer&&(ut.__webglDepthRenderbuffer=t.createRenderbuffer(),et(ut.__webglDepthRenderbuffer,Ee,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ot){n.bindTexture(t.TEXTURE_CUBE_MAP,Vt.__webglTexture),on(t.TEXTURE_CUBE_MAP,ce,mn);for(let Ht=0;Ht<6;Ht++)if(m&&ce.mipmaps&&ce.mipmaps.length>0)for(let pt=0;pt<ce.mipmaps.length;pt++)xn(ut.__webglFramebuffer[Ht][pt],Ee,ce,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,pt);else xn(ut.__webglFramebuffer[Ht],Ee,ce,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Ht,0);Z(ce,mn)&&be(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Bt){const Ht=Ee.texture;for(let pt=0,En=Ht.length;pt<En;pt++){const tn=Ht[pt],yn=r.get(tn);n.bindTexture(t.TEXTURE_2D,yn.__webglTexture),on(t.TEXTURE_2D,tn,mn),xn(ut.__webglFramebuffer,Ee,tn,t.COLOR_ATTACHMENT0+pt,t.TEXTURE_2D,0),Z(tn,mn)&&be(t.TEXTURE_2D)}n.unbindTexture()}else{let Ht=t.TEXTURE_2D;if((Ee.isWebGL3DRenderTarget||Ee.isWebGLArrayRenderTarget)&&(m?Ht=Ee.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Ht,Vt.__webglTexture),on(Ht,ce,mn),m&&ce.mipmaps&&ce.mipmaps.length>0)for(let pt=0;pt<ce.mipmaps.length;pt++)xn(ut.__webglFramebuffer[pt],Ee,ce,t.COLOR_ATTACHMENT0,Ht,pt);else xn(ut.__webglFramebuffer,Ee,ce,t.COLOR_ATTACHMENT0,Ht,0);Z(ce,mn)&&be(Ht),n.unbindTexture()}Ee.depthBuffer&&Pn(Ee)}function Ir(Ee){const ce=te(Ee)||m,ut=Ee.isWebGLMultipleRenderTargets===!0?Ee.texture:[Ee.texture];for(let Vt=0,Ot=ut.length;Vt<Ot;Vt++){const Bt=ut[Vt];if(Z(Bt,ce)){const mn=Ee.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Ht=r.get(Bt).__webglTexture;n.bindTexture(mn,Ht),be(mn),n.unbindTexture()}}}function kn(Ee){if(m&&Ee.samples>0&&cr(Ee)===!1){const ce=Ee.isWebGLMultipleRenderTargets?Ee.texture:[Ee.texture],ut=Ee.width,Vt=Ee.height;let Ot=t.COLOR_BUFFER_BIT;const Bt=[],mn=Ee.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ht=r.get(Ee),pt=Ee.isWebGLMultipleRenderTargets===!0;if(pt)for(let En=0;En<ce.length;En++)n.bindFramebuffer(t.FRAMEBUFFER,Ht.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+En,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ht.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+En,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ht.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ht.__webglFramebuffer);for(let En=0;En<ce.length;En++){Bt.push(t.COLOR_ATTACHMENT0+En),Ee.depthBuffer&&Bt.push(mn);const tn=Ht.__ignoreDepthValues!==void 0?Ht.__ignoreDepthValues:!1;if(tn===!1&&(Ee.depthBuffer&&(Ot|=t.DEPTH_BUFFER_BIT),Ee.stencilBuffer&&(Ot|=t.STENCIL_BUFFER_BIT)),pt&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ht.__webglColorRenderbuffer[En]),tn===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[mn]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[mn])),pt){const yn=r.get(ce[En]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,yn,0)}t.blitFramebuffer(0,0,ut,Vt,0,0,ut,Vt,Ot,t.NEAREST),H&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Bt)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),pt)for(let En=0;En<ce.length;En++){n.bindFramebuffer(t.FRAMEBUFFER,Ht.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+En,t.RENDERBUFFER,Ht.__webglColorRenderbuffer[En]);const tn=r.get(ce[En]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ht.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+En,t.TEXTURE_2D,tn,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ht.__webglMultisampledFramebuffer)}}function Nn(Ee){return Math.min(R,Ee.samples)}function cr(Ee){const ce=r.get(Ee);return m&&Ee.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ce.__useRenderToTexture!==!1}function si(Ee){const ce=h.render.frame;Q.get(Ee)!==ce&&(Q.set(Ee,ce),Ee.update())}function Dr(Ee,ce){const ut=Ee.colorSpace,Vt=Ee.format,Ot=Ee.type;return Ee.isCompressedTexture===!0||Ee.format===VH||ut!==$c&&ut!==Tg&&(ut===tr?m===!1?e.has("EXT_sRGB")===!0&&Vt===Fu?(Ee.format=VH,Ee.minFilter=Il,Ee.generateMipmaps=!1):ce=N_e.sRGBToLinear(ce):(Vt!==Fu||Ot!==Kf)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ut)),ce}this.allocateTextureUnit=Ge,this.resetTextureUnits=vt,this.setTexture2D=Je,this.setTexture2DArray=Be,this.setTexture3D=nt,this.setTextureCube=$t,this.rebindTextures=Sn,this.setupRenderTarget=gn,this.updateRenderTargetMipmap=Ir,this.updateMultisampleRenderTarget=kn,this.setupDepthRenderbuffer=Pn,this.setupFrameBufferTexture=xn,this.useMultisampledRTT=cr}function qUe(t,e,n){const r=n.isWebGL2;function o(u,h=Tg){let m;if(u===Kf)return t.UNSIGNED_BYTE;if(u===k_e)return t.UNSIGNED_SHORT_4_4_4_4;if(u===T_e)return t.UNSIGNED_SHORT_5_5_5_1;if(u===TLe)return t.BYTE;if(u===MLe)return t.SHORT;if(u===gG)return t.UNSIGNED_SHORT;if(u===P_e)return t.INT;if(u===Of)return t.UNSIGNED_INT;if(u===Df)return t.FLOAT;if(u===oP)return r?t.HALF_FLOAT:(m=e.get("OES_texture_half_float"),m!==null?m.HALF_FLOAT_OES:null);if(u===ALe)return t.ALPHA;if(u===Fu)return t.RGBA;if(u===ILe)return t.LUMINANCE;if(u===RLe)return t.LUMINANCE_ALPHA;if(u===Pg)return t.DEPTH_COMPONENT;if(u===$_)return t.DEPTH_STENCIL;if(u===VH)return m=e.get("EXT_sRGB"),m!==null?m.SRGB_ALPHA_EXT:null;if(u===OLe)return t.RED;if(u===M_e)return t.RED_INTEGER;if(u===DLe)return t.RG;if(u===A_e)return t.RG_INTEGER;if(u===I_e)return t.RGBA_INTEGER;if(u===D6||u===L6||u===N6||u===F6)if(h===tr)if(m=e.get("WEBGL_compressed_texture_s3tc_srgb"),m!==null){if(u===D6)return m.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(u===L6)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(u===N6)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(u===F6)return m.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(m=e.get("WEBGL_compressed_texture_s3tc"),m!==null){if(u===D6)return m.COMPRESSED_RGB_S3TC_DXT1_EXT;if(u===L6)return m.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(u===N6)return m.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(u===F6)return m.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(u===Lme||u===Nme||u===Fme||u===Bme)if(m=e.get("WEBGL_compressed_texture_pvrtc"),m!==null){if(u===Lme)return m.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(u===Nme)return m.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(u===Fme)return m.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(u===Bme)return m.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(u===LLe)return m=e.get("WEBGL_compressed_texture_etc1"),m!==null?m.COMPRESSED_RGB_ETC1_WEBGL:null;if(u===Ume||u===Vme)if(m=e.get("WEBGL_compressed_texture_etc"),m!==null){if(u===Ume)return h===tr?m.COMPRESSED_SRGB8_ETC2:m.COMPRESSED_RGB8_ETC2;if(u===Vme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:m.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(u===jme||u===zme||u===Hme||u===Gme||u===$me||u===Wme||u===Kme||u===qme||u===Xme||u===Yme||u===Zme||u===Qme||u===Jme||u===eve)if(m=e.get("WEBGL_compressed_texture_astc"),m!==null){if(u===jme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:m.COMPRESSED_RGBA_ASTC_4x4_KHR;if(u===zme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:m.COMPRESSED_RGBA_ASTC_5x4_KHR;if(u===Hme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:m.COMPRESSED_RGBA_ASTC_5x5_KHR;if(u===Gme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:m.COMPRESSED_RGBA_ASTC_6x5_KHR;if(u===$me)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:m.COMPRESSED_RGBA_ASTC_6x6_KHR;if(u===Wme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:m.COMPRESSED_RGBA_ASTC_8x5_KHR;if(u===Kme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:m.COMPRESSED_RGBA_ASTC_8x6_KHR;if(u===qme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:m.COMPRESSED_RGBA_ASTC_8x8_KHR;if(u===Xme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:m.COMPRESSED_RGBA_ASTC_10x5_KHR;if(u===Yme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:m.COMPRESSED_RGBA_ASTC_10x6_KHR;if(u===Zme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:m.COMPRESSED_RGBA_ASTC_10x8_KHR;if(u===Qme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:m.COMPRESSED_RGBA_ASTC_10x10_KHR;if(u===Jme)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:m.COMPRESSED_RGBA_ASTC_12x10_KHR;if(u===eve)return h===tr?m.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:m.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(u===B6)if(m=e.get("EXT_texture_compression_bptc"),m!==null){if(u===B6)return h===tr?m.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:m.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(u===NLe||u===tve||u===nve||u===rve)if(m=e.get("EXT_texture_compression_rgtc"),m!==null){if(u===B6)return m.COMPRESSED_RED_RGTC1_EXT;if(u===tve)return m.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(u===nve)return m.COMPRESSED_RED_GREEN_RGTC2_EXT;if(u===rve)return m.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return u===Cg?r?t.UNSIGNED_INT_24_8:(m=e.get("WEBGL_depth_texture"),m!==null?m.UNSIGNED_INT_24_8_WEBGL:null):t[u]!==void 0?t[u]:null}return{convert:o}}class XUe extends Rl{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}let ID=class extends Do{constructor(){super(),this.isGroup=!0,this.type="Group"}};const YUe={type:"move"};class a8{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new ID,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new ID,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new dt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new dt),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new ID,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new dt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new dt),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let o=null,u=null,h=null;const m=this._targetRay,_=this._grip,x=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(x&&e.hand){h=!0;for(const j of e.hand.values()){const z=n.getJointPose(j,r),U=this._getHandJoint(x,j);z!==null&&(U.matrix.fromArray(z.transform.matrix),U.matrix.decompose(U.position,U.rotation,U.scale),U.matrixWorldNeedsUpdate=!0,U.jointRadius=z.radius),U.visible=z!==null}const M=x.joints["index-finger-tip"],R=x.joints["thumb-tip"],N=M.position.distanceTo(R.position),H=.02,Q=.005;x.inputState.pinching&&N>H+Q?(x.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!x.inputState.pinching&&N<=H-Q&&(x.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else _!==null&&e.gripSpace&&(u=n.getPose(e.gripSpace,r),u!==null&&(_.matrix.fromArray(u.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.matrixWorldNeedsUpdate=!0,u.linearVelocity?(_.hasLinearVelocity=!0,_.linearVelocity.copy(u.linearVelocity)):_.hasLinearVelocity=!1,u.angularVelocity?(_.hasAngularVelocity=!0,_.angularVelocity.copy(u.angularVelocity)):_.hasAngularVelocity=!1));m!==null&&(o=n.getPose(e.targetRaySpace,r),o===null&&u!==null&&(o=u),o!==null&&(m.matrix.fromArray(o.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,o.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(o.linearVelocity)):m.hasLinearVelocity=!1,o.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(o.angularVelocity)):m.hasAngularVelocity=!1,this.dispatchEvent(YUe)))}return m!==null&&(m.visible=o!==null),_!==null&&(_.visible=u!==null),x!==null&&(x.visible=h!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new ID;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class ZUe extends Ba{constructor(e,n,r,o,u,h,m,_,x,M){if(M=M!==void 0?M:Pg,M!==Pg&&M!==$_)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&M===Pg&&(r=Of),r===void 0&&M===$_&&(r=Cg),super(null,o,u,h,m,_,M,r,x),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=m!==void 0?m:Vs,this.minFilter=_!==void 0?_:Vs,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class QUe extends Wg{constructor(e,n){super();const r=this;let o=null,u=1,h=null,m="local-floor",_=1,x=null,M=null,R=null,N=null,H=null,Q=null;const j=n.getContextAttributes();let z=null,U=null;const C=[],K=[],te=new Rl;te.layers.enable(1),te.viewport=new Io;const pe=new Rl;pe.layers.enable(2),pe.viewport=new Io;const Z=[te,pe],be=new XUe;be.layers.enable(1),be.layers.enable(2);let Pe=null,G=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Be){let nt=C[Be];return nt===void 0&&(nt=new a8,C[Be]=nt),nt.getTargetRaySpace()},this.getControllerGrip=function(Be){let nt=C[Be];return nt===void 0&&(nt=new a8,C[Be]=nt),nt.getGripSpace()},this.getHand=function(Be){let nt=C[Be];return nt===void 0&&(nt=new a8,C[Be]=nt),nt.getHandSpace()};function ye(Be){const nt=K.indexOf(Be.inputSource);if(nt===-1)return;const $t=C[nt];$t!==void 0&&($t.update(Be.inputSource,Be.frame,x||h),$t.dispatchEvent({type:Be.type,data:Be.inputSource}))}function St(){o.removeEventListener("select",ye),o.removeEventListener("selectstart",ye),o.removeEventListener("selectend",ye),o.removeEventListener("squeeze",ye),o.removeEventListener("squeezestart",ye),o.removeEventListener("squeezeend",ye),o.removeEventListener("end",St),o.removeEventListener("inputsourceschange",kt);for(let Be=0;Be<C.length;Be++){const nt=K[Be];nt!==null&&(K[Be]=null,C[Be].disconnect(nt))}Pe=null,G=null,e.setRenderTarget(z),H=null,N=null,R=null,o=null,U=null,Je.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Be){u=Be,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Be){m=Be,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return x||h},this.setReferenceSpace=function(Be){x=Be},this.getBaseLayer=function(){return N!==null?N:H},this.getBinding=function(){return R},this.getFrame=function(){return Q},this.getSession=function(){return o},this.setSession=async function(Be){if(o=Be,o!==null){if(z=e.getRenderTarget(),o.addEventListener("select",ye),o.addEventListener("selectstart",ye),o.addEventListener("selectend",ye),o.addEventListener("squeeze",ye),o.addEventListener("squeezestart",ye),o.addEventListener("squeezeend",ye),o.addEventListener("end",St),o.addEventListener("inputsourceschange",kt),j.xrCompatible!==!0&&await n.makeXRCompatible(),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const nt={antialias:o.renderState.layers===void 0?j.antialias:!0,alpha:!0,depth:j.depth,stencil:j.stencil,framebufferScaleFactor:u};H=new XRWebGLLayer(o,n,nt),o.updateRenderState({baseLayer:H}),U=new Lg(H.framebufferWidth,H.framebufferHeight,{format:Fu,type:Kf,colorSpace:e.outputColorSpace,stencilBuffer:j.stencil})}else{let nt=null,$t=null,Ut=null;j.depth&&(Ut=j.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,nt=j.stencil?$_:Pg,$t=j.stencil?Cg:Of);const Dt={colorFormat:n.RGBA8,depthFormat:Ut,scaleFactor:u};R=new XRWebGLBinding(o,n),N=R.createProjectionLayer(Dt),o.updateRenderState({layers:[N]}),U=new Lg(N.textureWidth,N.textureHeight,{format:Fu,type:Kf,depthTexture:new ZUe(N.textureWidth,N.textureHeight,$t,void 0,void 0,void 0,void 0,void 0,void 0,nt),stencilBuffer:j.stencil,colorSpace:e.outputColorSpace,samples:j.antialias?4:0});const en=e.properties.get(U);en.__ignoreDepthValues=N.ignoreDepthValues}U.isXRRenderTarget=!0,this.setFoveation(_),x=null,h=await o.requestReferenceSpace(m),Je.setContext(o),Je.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode};function kt(Be){for(let nt=0;nt<Be.removed.length;nt++){const $t=Be.removed[nt],Ut=K.indexOf($t);Ut>=0&&(K[Ut]=null,C[Ut].disconnect($t))}for(let nt=0;nt<Be.added.length;nt++){const $t=Be.added[nt];let Ut=K.indexOf($t);if(Ut===-1){for(let en=0;en<C.length;en++)if(en>=K.length){K.push($t),Ut=en;break}else if(K[en]===null){K[en]=$t,Ut=en;break}if(Ut===-1)break}const Dt=C[Ut];Dt&&Dt.connect($t)}}const it=new dt,me=new dt;function lt(Be,nt,$t){it.setFromMatrixPosition(nt.matrixWorld),me.setFromMatrixPosition($t.matrixWorld);const Ut=it.distanceTo(me),Dt=nt.projectionMatrix.elements,en=$t.projectionMatrix.elements,on=Dt[14]/(Dt[10]-1),wn=Dt[14]/(Dt[10]+1),Wn=(Dt[9]+1)/Dt[5],qr=(Dt[9]-1)/Dt[5],xn=(Dt[8]-1)/Dt[0],et=(en[8]+1)/en[0],Qr=on*xn,Pn=on*et,Sn=Ut/(-xn+et),gn=Sn*-xn;nt.matrixWorld.decompose(Be.position,Be.quaternion,Be.scale),Be.translateX(gn),Be.translateZ(Sn),Be.matrixWorld.compose(Be.position,Be.quaternion,Be.scale),Be.matrixWorldInverse.copy(Be.matrixWorld).invert();const Ir=on+Sn,kn=wn+Sn,Nn=Qr-gn,cr=Pn+(Ut-gn),si=Wn*wn/kn*Ir,Dr=qr*wn/kn*Ir;Be.projectionMatrix.makePerspective(Nn,cr,si,Dr,Ir,kn),Be.projectionMatrixInverse.copy(Be.projectionMatrix).invert()}function Fe(Be,nt){nt===null?Be.matrixWorld.copy(Be.matrix):Be.matrixWorld.multiplyMatrices(nt.matrixWorld,Be.matrix),Be.matrixWorldInverse.copy(Be.matrixWorld).invert()}this.updateCamera=function(Be){if(o===null)return;be.near=pe.near=te.near=Be.near,be.far=pe.far=te.far=Be.far,(Pe!==be.near||G!==be.far)&&(o.updateRenderState({depthNear:be.near,depthFar:be.far}),Pe=be.near,G=be.far);const nt=Be.parent,$t=be.cameras;Fe(be,nt);for(let Ut=0;Ut<$t.length;Ut++)Fe($t[Ut],nt);$t.length===2?lt(be,te,pe):be.projectionMatrix.copy(te.projectionMatrix),vt(Be,be,nt)};function vt(Be,nt,$t){$t===null?Be.matrix.copy(nt.matrixWorld):(Be.matrix.copy($t.matrixWorld),Be.matrix.invert(),Be.matrix.multiply(nt.matrixWorld)),Be.matrix.decompose(Be.position,Be.quaternion,Be.scale),Be.updateMatrixWorld(!0);const Ut=Be.children;for(let Dt=0,en=Ut.length;Dt<en;Dt++)Ut[Dt].updateMatrixWorld(!0);Be.projectionMatrix.copy(nt.projectionMatrix),Be.projectionMatrixInverse.copy(nt.projectionMatrixInverse),Be.isPerspectiveCamera&&(Be.fov=jH*2*Math.atan(1/Be.projectionMatrix.elements[5]),Be.zoom=1)}this.getCamera=function(){return be},this.getFoveation=function(){if(!(N===null&&H===null))return _},this.setFoveation=function(Be){_=Be,N!==null&&(N.fixedFoveation=Be),H!==null&&H.fixedFoveation!==void 0&&(H.fixedFoveation=Be)};let Ge=null;function mt(Be,nt){if(M=nt.getViewerPose(x||h),Q=nt,M!==null){const $t=M.views;H!==null&&(e.setRenderTargetFramebuffer(U,H.framebuffer),e.setRenderTarget(U));let Ut=!1;$t.length!==be.cameras.length&&(be.cameras.length=0,Ut=!0);for(let Dt=0;Dt<$t.length;Dt++){const en=$t[Dt];let on=null;if(H!==null)on=H.getViewport(en);else{const Wn=R.getViewSubImage(N,en);on=Wn.viewport,Dt===0&&(e.setRenderTargetTextures(U,Wn.colorTexture,N.ignoreDepthValues?void 0:Wn.depthStencilTexture),e.setRenderTarget(U))}let wn=Z[Dt];wn===void 0&&(wn=new Rl,wn.layers.enable(Dt),wn.viewport=new Io,Z[Dt]=wn),wn.matrix.fromArray(en.transform.matrix),wn.matrix.decompose(wn.position,wn.quaternion,wn.scale),wn.projectionMatrix.fromArray(en.projectionMatrix),wn.projectionMatrixInverse.copy(wn.projectionMatrix).invert(),wn.viewport.set(on.x,on.y,on.width,on.height),Dt===0&&(be.matrix.copy(wn.matrix),be.matrix.decompose(be.position,be.quaternion,be.scale)),Ut===!0&&be.cameras.push(wn)}}for(let $t=0;$t<C.length;$t++){const Ut=K[$t],Dt=C[$t];Ut!==null&&Dt!==void 0&&Dt.update(Ut,nt,x||h)}Ge&&Ge(Be,nt),nt.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:nt}),Q=null}const Je=new W_e;Je.setAnimationLoop(mt),this.setAnimationLoop=function(Be){Ge=Be},this.dispose=function(){}}}function JUe(t,e){function n(z,U){z.matrixAutoUpdate===!0&&z.updateMatrix(),U.value.copy(z.matrix)}function r(z,U){U.color.getRGB(z.fogColor.value,H_e(t)),U.isFog?(z.fogNear.value=U.near,z.fogFar.value=U.far):U.isFogExp2&&(z.fogDensity.value=U.density)}function o(z,U,C,K,te){U.isMeshBasicMaterial||U.isMeshLambertMaterial?u(z,U):U.isMeshToonMaterial?(u(z,U),R(z,U)):U.isMeshPhongMaterial?(u(z,U),M(z,U)):U.isMeshStandardMaterial?(u(z,U),N(z,U),U.isMeshPhysicalMaterial&&H(z,U,te)):U.isMeshMatcapMaterial?(u(z,U),Q(z,U)):U.isMeshDepthMaterial?u(z,U):U.isMeshDistanceMaterial?(u(z,U),j(z,U)):U.isMeshNormalMaterial?u(z,U):U.isLineBasicMaterial?(h(z,U),U.isLineDashedMaterial&&m(z,U)):U.isPointsMaterial?_(z,U,C,K):U.isSpriteMaterial?x(z,U):U.isShadowMaterial?(z.color.value.copy(U.color),z.opacity.value=U.opacity):U.isShaderMaterial&&(U.uniformsNeedUpdate=!1)}function u(z,U){z.opacity.value=U.opacity,U.color&&z.diffuse.value.copy(U.color),U.emissive&&z.emissive.value.copy(U.emissive).multiplyScalar(U.emissiveIntensity),U.map&&(z.map.value=U.map,n(U.map,z.mapTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,n(U.alphaMap,z.alphaMapTransform)),U.bumpMap&&(z.bumpMap.value=U.bumpMap,n(U.bumpMap,z.bumpMapTransform),z.bumpScale.value=U.bumpScale,U.side===ga&&(z.bumpScale.value*=-1)),U.normalMap&&(z.normalMap.value=U.normalMap,n(U.normalMap,z.normalMapTransform),z.normalScale.value.copy(U.normalScale),U.side===ga&&z.normalScale.value.negate()),U.displacementMap&&(z.displacementMap.value=U.displacementMap,n(U.displacementMap,z.displacementMapTransform),z.displacementScale.value=U.displacementScale,z.displacementBias.value=U.displacementBias),U.emissiveMap&&(z.emissiveMap.value=U.emissiveMap,n(U.emissiveMap,z.emissiveMapTransform)),U.specularMap&&(z.specularMap.value=U.specularMap,n(U.specularMap,z.specularMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest);const C=e.get(U).envMap;if(C&&(z.envMap.value=C,z.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,z.reflectivity.value=U.reflectivity,z.ior.value=U.ior,z.refractionRatio.value=U.refractionRatio),U.lightMap){z.lightMap.value=U.lightMap;const K=t._useLegacyLights===!0?Math.PI:1;z.lightMapIntensity.value=U.lightMapIntensity*K,n(U.lightMap,z.lightMapTransform)}U.aoMap&&(z.aoMap.value=U.aoMap,z.aoMapIntensity.value=U.aoMapIntensity,n(U.aoMap,z.aoMapTransform))}function h(z,U){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,U.map&&(z.map.value=U.map,n(U.map,z.mapTransform))}function m(z,U){z.dashSize.value=U.dashSize,z.totalSize.value=U.dashSize+U.gapSize,z.scale.value=U.scale}function _(z,U,C,K){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,z.size.value=U.size*C,z.scale.value=K*.5,U.map&&(z.map.value=U.map,n(U.map,z.uvTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,n(U.alphaMap,z.alphaMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest)}function x(z,U){z.diffuse.value.copy(U.color),z.opacity.value=U.opacity,z.rotation.value=U.rotation,U.map&&(z.map.value=U.map,n(U.map,z.mapTransform)),U.alphaMap&&(z.alphaMap.value=U.alphaMap,n(U.alphaMap,z.alphaMapTransform)),U.alphaTest>0&&(z.alphaTest.value=U.alphaTest)}function M(z,U){z.specular.value.copy(U.specular),z.shininess.value=Math.max(U.shininess,1e-4)}function R(z,U){U.gradientMap&&(z.gradientMap.value=U.gradientMap)}function N(z,U){z.metalness.value=U.metalness,U.metalnessMap&&(z.metalnessMap.value=U.metalnessMap,n(U.metalnessMap,z.metalnessMapTransform)),z.roughness.value=U.roughness,U.roughnessMap&&(z.roughnessMap.value=U.roughnessMap,n(U.roughnessMap,z.roughnessMapTransform)),e.get(U).envMap&&(z.envMapIntensity.value=U.envMapIntensity)}function H(z,U,C){z.ior.value=U.ior,U.sheen>0&&(z.sheenColor.value.copy(U.sheenColor).multiplyScalar(U.sheen),z.sheenRoughness.value=U.sheenRoughness,U.sheenColorMap&&(z.sheenColorMap.value=U.sheenColorMap,n(U.sheenColorMap,z.sheenColorMapTransform)),U.sheenRoughnessMap&&(z.sheenRoughnessMap.value=U.sheenRoughnessMap,n(U.sheenRoughnessMap,z.sheenRoughnessMapTransform))),U.clearcoat>0&&(z.clearcoat.value=U.clearcoat,z.clearcoatRoughness.value=U.clearcoatRoughness,U.clearcoatMap&&(z.clearcoatMap.value=U.clearcoatMap,n(U.clearcoatMap,z.clearcoatMapTransform)),U.clearcoatRoughnessMap&&(z.clearcoatRoughnessMap.value=U.clearcoatRoughnessMap,n(U.clearcoatRoughnessMap,z.clearcoatRoughnessMapTransform)),U.clearcoatNormalMap&&(z.clearcoatNormalMap.value=U.clearcoatNormalMap,n(U.clearcoatNormalMap,z.clearcoatNormalMapTransform),z.clearcoatNormalScale.value.copy(U.clearcoatNormalScale),U.side===ga&&z.clearcoatNormalScale.value.negate())),U.iridescence>0&&(z.iridescence.value=U.iridescence,z.iridescenceIOR.value=U.iridescenceIOR,z.iridescenceThicknessMinimum.value=U.iridescenceThicknessRange[0],z.iridescenceThicknessMaximum.value=U.iridescenceThicknessRange[1],U.iridescenceMap&&(z.iridescenceMap.value=U.iridescenceMap,n(U.iridescenceMap,z.iridescenceMapTransform)),U.iridescenceThicknessMap&&(z.iridescenceThicknessMap.value=U.iridescenceThicknessMap,n(U.iridescenceThicknessMap,z.iridescenceThicknessMapTransform))),U.transmission>0&&(z.transmission.value=U.transmission,z.transmissionSamplerMap.value=C.texture,z.transmissionSamplerSize.value.set(C.width,C.height),U.transmissionMap&&(z.transmissionMap.value=U.transmissionMap,n(U.transmissionMap,z.transmissionMapTransform)),z.thickness.value=U.thickness,U.thicknessMap&&(z.thicknessMap.value=U.thicknessMap,n(U.thicknessMap,z.thicknessMapTransform)),z.attenuationDistance.value=U.attenuationDistance,z.attenuationColor.value.copy(U.attenuationColor)),U.anisotropy>0&&(z.anisotropyVector.value.set(U.anisotropy*Math.cos(U.anisotropyRotation),U.anisotropy*Math.sin(U.anisotropyRotation)),U.anisotropyMap&&(z.anisotropyMap.value=U.anisotropyMap,n(U.anisotropyMap,z.anisotropyMapTransform))),z.specularIntensity.value=U.specularIntensity,z.specularColor.value.copy(U.specularColor),U.specularColorMap&&(z.specularColorMap.value=U.specularColorMap,n(U.specularColorMap,z.specularColorMapTransform)),U.specularIntensityMap&&(z.specularIntensityMap.value=U.specularIntensityMap,n(U.specularIntensityMap,z.specularIntensityMapTransform))}function Q(z,U){U.matcap&&(z.matcap.value=U.matcap)}function j(z,U){const C=e.get(U).light;z.referencePosition.value.setFromMatrixPosition(C.matrixWorld),z.nearDistance.value=C.shadow.camera.near,z.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:o}}function eVe(t,e,n,r){let o={},u={},h=[];const m=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function _(C,K){const te=K.program;r.uniformBlockBinding(C,te)}function x(C,K){let te=o[C.id];te===void 0&&(Q(C),te=M(C),o[C.id]=te,C.addEventListener("dispose",z));const pe=K.program;r.updateUBOMapping(C,pe);const Z=e.render.frame;u[C.id]!==Z&&(N(C),u[C.id]=Z)}function M(C){const K=R();C.__bindingPointIndex=K;const te=t.createBuffer(),pe=C.__size,Z=C.usage;return t.bindBuffer(t.UNIFORM_BUFFER,te),t.bufferData(t.UNIFORM_BUFFER,pe,Z),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,K,te),te}function R(){for(let C=0;C<m;C++)if(h.indexOf(C)===-1)return h.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function N(C){const K=o[C.id],te=C.uniforms,pe=C.__cache;t.bindBuffer(t.UNIFORM_BUFFER,K);for(let Z=0,be=te.length;Z<be;Z++){const Pe=te[Z];if(H(Pe,Z,pe)===!0){const G=Pe.__offset,ye=Array.isArray(Pe.value)?Pe.value:[Pe.value];let St=0;for(let kt=0;kt<ye.length;kt++){const it=ye[kt],me=j(it);typeof it=="number"?(Pe.__data[0]=it,t.bufferSubData(t.UNIFORM_BUFFER,G+St,Pe.__data)):it.isMatrix3?(Pe.__data[0]=it.elements[0],Pe.__data[1]=it.elements[1],Pe.__data[2]=it.elements[2],Pe.__data[3]=it.elements[0],Pe.__data[4]=it.elements[3],Pe.__data[5]=it.elements[4],Pe.__data[6]=it.elements[5],Pe.__data[7]=it.elements[0],Pe.__data[8]=it.elements[6],Pe.__data[9]=it.elements[7],Pe.__data[10]=it.elements[8],Pe.__data[11]=it.elements[0]):(it.toArray(Pe.__data,St),St+=me.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,G,Pe.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function H(C,K,te){const pe=C.value;if(te[K]===void 0){if(typeof pe=="number")te[K]=pe;else{const Z=Array.isArray(pe)?pe:[pe],be=[];for(let Pe=0;Pe<Z.length;Pe++)be.push(Z[Pe].clone());te[K]=be}return!0}else if(typeof pe=="number"){if(te[K]!==pe)return te[K]=pe,!0}else{const Z=Array.isArray(te[K])?te[K]:[te[K]],be=Array.isArray(pe)?pe:[pe];for(let Pe=0;Pe<Z.length;Pe++){const G=Z[Pe];if(G.equals(be[Pe])===!1)return G.copy(be[Pe]),!0}}return!1}function Q(C){const K=C.uniforms;let te=0;const pe=16;let Z=0;for(let be=0,Pe=K.length;be<Pe;be++){const G=K[be],ye={boundary:0,storage:0},St=Array.isArray(G.value)?G.value:[G.value];for(let kt=0,it=St.length;kt<it;kt++){const me=St[kt],lt=j(me);ye.boundary+=lt.boundary,ye.storage+=lt.storage}if(G.__data=new Float32Array(ye.storage/Float32Array.BYTES_PER_ELEMENT),G.__offset=te,be>0){Z=te%pe;const kt=pe-Z;Z!==0&&kt-ye.boundary<0&&(te+=pe-Z,G.__offset=te)}te+=ye.storage}return Z=te%pe,Z>0&&(te+=pe-Z),C.__size=te,C.__cache={},this}function j(C){const K={boundary:0,storage:0};return typeof C=="number"?(K.boundary=4,K.storage=4):C.isVector2?(K.boundary=8,K.storage=8):C.isVector3||C.isColor?(K.boundary=16,K.storage=12):C.isVector4?(K.boundary=16,K.storage=16):C.isMatrix3?(K.boundary=48,K.storage=48):C.isMatrix4?(K.boundary=64,K.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),K}function z(C){const K=C.target;K.removeEventListener("dispose",z);const te=h.indexOf(K.__bindingPointIndex);h.splice(te,1),t.deleteBuffer(o[K.id]),delete o[K.id],delete u[K.id]}function U(){for(const C in o)t.deleteBuffer(o[C]);h=[],o={},u={}}return{bind:_,update:x,dispose:U}}function tVe(){const t=R3("canvas");return t.style.display="block",t}class Q_e{constructor(e={}){const{canvas:n=tVe(),context:r=null,depth:o=!0,stencil:u=!0,alpha:h=!1,antialias:m=!1,premultipliedAlpha:_=!0,preserveDrawingBuffer:x=!1,powerPreference:M="default",failIfMajorPerformanceCaveat:R=!1}=e;this.isWebGLRenderer=!0;let N;r!==null?N=r.getContextAttributes().alpha:N=h;const H=new Uint32Array(4),Q=new Int32Array(4);let j=null,z=null;const U=[],C=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=tr,this._useLegacyLights=!1,this.toneMapping=Wf,this.toneMappingExposure=1;const K=this;let te=!1,pe=0,Z=0,be=null,Pe=-1,G=null;const ye=new Io,St=new Io;let kt=null;const it=new Pr(0);let me=0,lt=n.width,Fe=n.height,vt=1,Ge=null,mt=null;const Je=new Io(0,0,lt,Fe),Be=new Io(0,0,lt,Fe);let nt=!1;const $t=new wG;let Ut=!1,Dt=!1,en=null;const on=new uo,wn=new kr,Wn=new dt,qr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function xn(){return be===null?vt:1}let et=r;function Qr(we,tt){for(let yt=0;yt<we.length;yt++){const We=we[yt],_t=n.getContext(We,tt);if(_t!==null)return _t}return null}try{const we={alpha:!0,depth:o,stencil:u,antialias:m,premultipliedAlpha:_,preserveDrawingBuffer:x,powerPreference:M,failIfMajorPerformanceCaveat:R};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${fG}`),n.addEventListener("webglcontextlost",Gt,!1),n.addEventListener("webglcontextrestored",ht,!1),n.addEventListener("webglcontextcreationerror",jt,!1),et===null){const tt=["webgl2","webgl","experimental-webgl"];if(K.isWebGL1Renderer===!0&&tt.shift(),et=Qr(tt,we),et===null)throw Qr(tt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&et instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),et.getShaderPrecisionFormat===void 0&&(et.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(we){throw console.error("THREE.WebGLRenderer: "+we.message),we}let Pn,Sn,gn,Ir,kn,Nn,cr,si,Dr,Ee,ce,ut,Vt,Ot,Bt,mn,Ht,pt,En,tn,yn,rn,Jt,Bn;function pr(){Pn=new dBe(et),Sn=new oBe(et,Pn,e),Pn.init(Sn),rn=new qUe(et,Pn,Sn),gn=new WUe(et,Pn,Sn),Ir=new fBe(et),kn=new RUe,Nn=new KUe(et,Pn,gn,kn,Sn,rn,Ir),cr=new aBe(K),si=new cBe(K),Dr=new ENe(et,Sn),Jt=new rBe(et,Pn,Dr,Sn),Ee=new hBe(et,Dr,Ir,Jt),ce=new yBe(et,Ee,Dr,Ir),En=new gBe(et,Sn,Nn),mn=new sBe(kn),ut=new IUe(K,cr,si,Pn,Sn,Jt,mn),Vt=new JUe(K,kn),Ot=new DUe,Bt=new VUe(Pn,Sn),pt=new nBe(K,cr,si,gn,ce,N,_),Ht=new $Ue(K,ce,Sn),Bn=new eVe(et,Ir,Sn,gn),tn=new iBe(et,Pn,Ir,Sn),yn=new pBe(et,Pn,Ir,Sn),Ir.programs=ut.programs,K.capabilities=Sn,K.extensions=Pn,K.properties=kn,K.renderLists=Ot,K.shadowMap=Ht,K.state=gn,K.info=Ir}pr();const Le=new QUe(K,et);this.xr=Le,this.getContext=function(){return et},this.getContextAttributes=function(){return et.getContextAttributes()},this.forceContextLoss=function(){const we=Pn.get("WEBGL_lose_context");we&&we.loseContext()},this.forceContextRestore=function(){const we=Pn.get("WEBGL_lose_context");we&&we.restoreContext()},this.getPixelRatio=function(){return vt},this.setPixelRatio=function(we){we!==void 0&&(vt=we,this.setSize(lt,Fe,!1))},this.getSize=function(we){return we.set(lt,Fe)},this.setSize=function(we,tt,yt=!0){if(Le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}lt=we,Fe=tt,n.width=Math.floor(we*vt),n.height=Math.floor(tt*vt),yt===!0&&(n.style.width=we+"px",n.style.height=tt+"px"),this.setViewport(0,0,we,tt)},this.getDrawingBufferSize=function(we){return we.set(lt*vt,Fe*vt).floor()},this.setDrawingBufferSize=function(we,tt,yt){lt=we,Fe=tt,vt=yt,n.width=Math.floor(we*yt),n.height=Math.floor(tt*yt),this.setViewport(0,0,we,tt)},this.getCurrentViewport=function(we){return we.copy(ye)},this.getViewport=function(we){return we.copy(Je)},this.setViewport=function(we,tt,yt,We){we.isVector4?Je.set(we.x,we.y,we.z,we.w):Je.set(we,tt,yt,We),gn.viewport(ye.copy(Je).multiplyScalar(vt).floor())},this.getScissor=function(we){return we.copy(Be)},this.setScissor=function(we,tt,yt,We){we.isVector4?Be.set(we.x,we.y,we.z,we.w):Be.set(we,tt,yt,We),gn.scissor(St.copy(Be).multiplyScalar(vt).floor())},this.getScissorTest=function(){return nt},this.setScissorTest=function(we){gn.setScissorTest(nt=we)},this.setOpaqueSort=function(we){Ge=we},this.setTransparentSort=function(we){mt=we},this.getClearColor=function(we){return we.copy(pt.getClearColor())},this.setClearColor=function(){pt.setClearColor.apply(pt,arguments)},this.getClearAlpha=function(){return pt.getClearAlpha()},this.setClearAlpha=function(){pt.setClearAlpha.apply(pt,arguments)},this.clear=function(we=!0,tt=!0,yt=!0){let We=0;if(we){let _t=!1;if(be!==null){const Xt=be.texture.format;_t=Xt===I_e||Xt===A_e||Xt===M_e}if(_t){const Xt=be.texture.type,pn=Xt===Kf||Xt===Of||Xt===gG||Xt===Cg||Xt===k_e||Xt===T_e,Ln=pt.getClearColor(),Tn=pt.getClearAlpha(),Kn=Ln.r,Mn=Ln.g,jn=Ln.b;pn?(H[0]=Kn,H[1]=Mn,H[2]=jn,H[3]=Tn,et.clearBufferuiv(et.COLOR,0,H)):(Q[0]=Kn,Q[1]=Mn,Q[2]=jn,Q[3]=Tn,et.clearBufferiv(et.COLOR,0,Q))}else We|=et.COLOR_BUFFER_BIT}tt&&(We|=et.DEPTH_BUFFER_BIT),yt&&(We|=et.STENCIL_BUFFER_BIT),et.clear(We)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Gt,!1),n.removeEventListener("webglcontextrestored",ht,!1),n.removeEventListener("webglcontextcreationerror",jt,!1),Ot.dispose(),Bt.dispose(),kn.dispose(),cr.dispose(),si.dispose(),ce.dispose(),Jt.dispose(),Bn.dispose(),ut.dispose(),Le.dispose(),Le.removeEventListener("sessionstart",rr),Le.removeEventListener("sessionend",zr),en&&(en.dispose(),en=null),Ar.stop()};function Gt(we){we.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),te=!0}function ht(){console.log("THREE.WebGLRenderer: Context Restored."),te=!1;const we=Ir.autoReset,tt=Ht.enabled,yt=Ht.autoUpdate,We=Ht.needsUpdate,_t=Ht.type;pr(),Ir.autoReset=we,Ht.enabled=tt,Ht.autoUpdate=yt,Ht.needsUpdate=We,Ht.type=_t}function jt(we){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",we.statusMessage)}function qt(we){const tt=we.target;tt.removeEventListener("dispose",qt),Qn(tt)}function Qn(we){Lr(we),kn.remove(we)}function Lr(we){const tt=kn.get(we).programs;tt!==void 0&&(tt.forEach(function(yt){ut.releaseProgram(yt)}),we.isShaderMaterial&&ut.releaseShaderCache(we))}this.renderBufferDirect=function(we,tt,yt,We,_t,Xt){tt===null&&(tt=qr);const pn=_t.isMesh&&_t.matrixWorld.determinant()<0,Ln=ed(we,tt,yt,We,_t);gn.setMaterial(We,pn);let Tn=yt.index,Kn=1;if(We.wireframe===!0){if(Tn=Ee.getWireframeAttribute(yt),Tn===void 0)return;Kn=2}const Mn=yt.drawRange,jn=yt.attributes.position;let Nr=Mn.start*Kn,lr=(Mn.start+Mn.count)*Kn;Xt!==null&&(Nr=Math.max(Nr,Xt.start*Kn),lr=Math.min(lr,(Xt.start+Xt.count)*Kn)),Tn!==null?(Nr=Math.max(Nr,0),lr=Math.min(lr,Tn.count)):jn!=null&&(Nr=Math.max(Nr,0),lr=Math.min(lr,jn.count));const Xr=lr-Nr;if(Xr<0||Xr===1/0)return;Jt.setup(_t,We,Ln,yt,Tn);let xs,Hr=tn;if(Tn!==null&&(xs=Dr.get(Tn),Hr=yn,Hr.setIndex(xs)),_t.isMesh)We.wireframe===!0?(gn.setLineWidth(We.wireframeLinewidth*xn()),Hr.setMode(et.LINES)):Hr.setMode(et.TRIANGLES);else if(_t.isLine){let Yn=We.linewidth;Yn===void 0&&(Yn=1),gn.setLineWidth(Yn*xn()),_t.isLineSegments?Hr.setMode(et.LINES):_t.isLineLoop?Hr.setMode(et.LINE_LOOP):Hr.setMode(et.LINE_STRIP)}else _t.isPoints?Hr.setMode(et.POINTS):_t.isSprite&&Hr.setMode(et.TRIANGLES);if(_t.isInstancedMesh)Hr.renderInstances(Nr,Xr,_t.count);else if(yt.isInstancedBufferGeometry){const Yn=yt._maxInstanceCount!==void 0?yt._maxInstanceCount:1/0,Ka=Math.min(yt.instanceCount,Yn);Hr.renderInstances(Nr,Xr,Ka)}else Hr.render(Nr,Xr)},this.compile=function(we,tt){function yt(We,_t,Xt){We.transparent===!0&&We.side===fh&&We.forceSinglePass===!1?(We.side=ga,We.needsUpdate=!0,$u(We,_t,Xt),We.side=Mh,We.needsUpdate=!0,$u(We,_t,Xt),We.side=fh):$u(We,_t,Xt)}z=Bt.get(we),z.init(),C.push(z),we.traverseVisible(function(We){We.isLight&&We.layers.test(tt.layers)&&(z.pushLight(We),We.castShadow&&z.pushShadow(We))}),z.setupLights(K._useLegacyLights),we.traverse(function(We){const _t=We.material;if(_t)if(Array.isArray(_t))for(let Xt=0;Xt<_t.length;Xt++){const pn=_t[Xt];yt(pn,we,We)}else yt(_t,we,We)}),C.pop(),z=null};let Mr=null;function es(we){Mr&&Mr(we)}function rr(){Ar.stop()}function zr(){Ar.start()}const Ar=new W_e;Ar.setAnimationLoop(es),typeof self<"u"&&Ar.setContext(self),this.setAnimationLoop=function(we){Mr=we,Le.setAnimationLoop(we),we===null?Ar.stop():Ar.start()},Le.addEventListener("sessionstart",rr),Le.addEventListener("sessionend",zr),this.render=function(we,tt){if(tt!==void 0&&tt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(te===!0)return;we.matrixWorldAutoUpdate===!0&&we.updateMatrixWorld(),tt.parent===null&&tt.matrixWorldAutoUpdate===!0&&tt.updateMatrixWorld(),Le.enabled===!0&&Le.isPresenting===!0&&(Le.cameraAutoUpdate===!0&&Le.updateCamera(tt),tt=Le.getCamera()),we.isScene===!0&&we.onBeforeRender(K,we,tt,be),z=Bt.get(we,C.length),z.init(),C.push(z),on.multiplyMatrices(tt.projectionMatrix,tt.matrixWorldInverse),$t.setFromProjectionMatrix(on),Dt=this.localClippingEnabled,Ut=mn.init(this.clippingPlanes,Dt),j=Ot.get(we,U.length),j.init(),U.push(j),Yc(we,tt,0,K.sortObjects),j.finish(),K.sortObjects===!0&&j.sort(Ge,mt),this.info.render.frame++,Ut===!0&&mn.beginShadows();const yt=z.state.shadowsArray;if(Ht.render(yt,we,tt),Ut===!0&&mn.endShadows(),this.info.autoReset===!0&&this.info.reset(),pt.render(j,we),z.setupLights(K._useLegacyLights),tt.isArrayCamera){const We=tt.cameras;for(let _t=0,Xt=We.length;_t<Xt;_t++){const pn=We[_t];Zc(j,we,pn,pn.viewport)}}else Zc(j,we,tt);be!==null&&(Nn.updateMultisampleRenderTarget(be),Nn.updateRenderTargetMipmap(be)),we.isScene===!0&&we.onAfterRender(K,we,tt),Jt.resetDefaultState(),Pe=-1,G=null,C.pop(),C.length>0?z=C[C.length-1]:z=null,U.pop(),U.length>0?j=U[U.length-1]:j=null};function Yc(we,tt,yt,We){if(we.visible===!1)return;if(we.layers.test(tt.layers)){if(we.isGroup)yt=we.renderOrder;else if(we.isLOD)we.autoUpdate===!0&&we.update(tt);else if(we.isLight)z.pushLight(we),we.castShadow&&z.pushShadow(we);else if(we.isSprite){if(!we.frustumCulled||$t.intersectsSprite(we)){We&&Wn.setFromMatrixPosition(we.matrixWorld).applyMatrix4(on);const pn=ce.update(we),Ln=we.material;Ln.visible&&j.push(we,pn,Ln,yt,Wn.z,null)}}else if((we.isMesh||we.isLine||we.isPoints)&&(!we.frustumCulled||$t.intersectsObject(we))){const pn=ce.update(we),Ln=we.material;if(We&&(we.boundingSphere!==void 0?(we.boundingSphere===null&&we.computeBoundingSphere(),Wn.copy(we.boundingSphere.center)):(pn.boundingSphere===null&&pn.computeBoundingSphere(),Wn.copy(pn.boundingSphere.center)),Wn.applyMatrix4(we.matrixWorld).applyMatrix4(on)),Array.isArray(Ln)){const Tn=pn.groups;for(let Kn=0,Mn=Tn.length;Kn<Mn;Kn++){const jn=Tn[Kn],Nr=Ln[jn.materialIndex];Nr&&Nr.visible&&j.push(we,pn,Nr,yt,Wn.z,jn)}}else Ln.visible&&j.push(we,pn,Ln,yt,Wn.z,null)}}const Xt=we.children;for(let pn=0,Ln=Xt.length;pn<Ln;pn++)Yc(Xt[pn],tt,yt,We)}function Zc(we,tt,yt,We){const _t=we.opaque,Xt=we.transmissive,pn=we.transparent;z.setupLightsView(yt),Ut===!0&&mn.setGlobalState(K.clippingPlanes,yt),Xt.length>0&&Qc(_t,Xt,tt,yt),We&&gn.viewport(ye.copy(We)),_t.length>0&&Wa(_t,tt,yt),Xt.length>0&&Wa(Xt,tt,yt),pn.length>0&&Wa(pn,tt,yt),gn.buffers.depth.setTest(!0),gn.buffers.depth.setMask(!0),gn.buffers.color.setMask(!0),gn.setPolygonOffset(!1)}function Qc(we,tt,yt,We){const _t=Sn.isWebGL2;en===null&&(en=new Lg(1,1,{generateMipmaps:!0,type:Pn.has("EXT_color_buffer_half_float")?oP:Kf,minFilter:iP,samples:_t?4:0})),K.getDrawingBufferSize(wn),_t?en.setSize(wn.x,wn.y):en.setSize(zH(wn.x),zH(wn.y));const Xt=K.getRenderTarget();K.setRenderTarget(en),K.getClearColor(it),me=K.getClearAlpha(),me<1&&K.setClearColor(16777215,.5),K.clear();const pn=K.toneMapping;K.toneMapping=Wf,Wa(we,yt,We),Nn.updateMultisampleRenderTarget(en),Nn.updateRenderTargetMipmap(en);let Ln=!1;for(let Tn=0,Kn=tt.length;Tn<Kn;Tn++){const Mn=tt[Tn],jn=Mn.object,Nr=Mn.geometry,lr=Mn.material,Xr=Mn.group;if(lr.side===fh&&jn.layers.test(We.layers)){const xs=lr.side;lr.side=ga,lr.needsUpdate=!0,Jc(jn,yt,We,Nr,lr,Xr),lr.side=xs,lr.needsUpdate=!0,Ln=!0}}Ln===!0&&(Nn.updateMultisampleRenderTarget(en),Nn.updateRenderTargetMipmap(en)),K.setRenderTarget(Xt),K.setClearColor(it,me),K.toneMapping=pn}function Wa(we,tt,yt){const We=tt.isScene===!0?tt.overrideMaterial:null;for(let _t=0,Xt=we.length;_t<Xt;_t++){const pn=we[_t],Ln=pn.object,Tn=pn.geometry,Kn=We===null?pn.material:We,Mn=pn.group;Ln.layers.test(yt.layers)&&Jc(Ln,tt,yt,Tn,Kn,Mn)}}function Jc(we,tt,yt,We,_t,Xt){we.onBeforeRender(K,tt,yt,We,_t,Xt),we.modelViewMatrix.multiplyMatrices(yt.matrixWorldInverse,we.matrixWorld),we.normalMatrix.getNormalMatrix(we.modelViewMatrix),_t.onBeforeRender(K,tt,yt,We,we,Xt),_t.transparent===!0&&_t.side===fh&&_t.forceSinglePass===!1?(_t.side=ga,_t.needsUpdate=!0,K.renderBufferDirect(yt,tt,We,_t,we,Xt),_t.side=Mh,_t.needsUpdate=!0,K.renderBufferDirect(yt,tt,We,_t,we,Xt),_t.side=fh):K.renderBufferDirect(yt,tt,We,_t,we,Xt),we.onAfterRender(K,tt,yt,We,_t,Xt)}function $u(we,tt,yt){tt.isScene!==!0&&(tt=qr);const We=kn.get(we),_t=z.state.lights,Xt=z.state.shadowsArray,pn=_t.state.version,Ln=ut.getParameters(we,_t.state,Xt,tt,yt),Tn=ut.getProgramCacheKey(Ln);let Kn=We.programs;We.environment=we.isMeshStandardMaterial?tt.environment:null,We.fog=tt.fog,We.envMap=(we.isMeshStandardMaterial?si:cr).get(we.envMap||We.environment),Kn===void 0&&(we.addEventListener("dispose",qt),Kn=new Map,We.programs=Kn);let Mn=Kn.get(Tn);if(Mn!==void 0){if(We.currentProgram===Mn&&We.lightsStateVersion===pn)return ba(we,Ln),Mn}else Ln.uniforms=ut.getUniforms(we),we.onBuild(yt,Ln,K),we.onBeforeCompile(Ln,K),Mn=ut.acquireProgram(Ln,Tn),Kn.set(Tn,Mn),We.uniforms=Ln.uniforms;const jn=We.uniforms;(!we.isShaderMaterial&&!we.isRawShaderMaterial||we.clipping===!0)&&(jn.clippingPlanes=mn.uniform),ba(we,Ln),We.needsLights=dm(we),We.lightsStateVersion=pn,We.needsLights&&(jn.ambientLightColor.value=_t.state.ambient,jn.lightProbe.value=_t.state.probe,jn.directionalLights.value=_t.state.directional,jn.directionalLightShadows.value=_t.state.directionalShadow,jn.spotLights.value=_t.state.spot,jn.spotLightShadows.value=_t.state.spotShadow,jn.rectAreaLights.value=_t.state.rectArea,jn.ltc_1.value=_t.state.rectAreaLTC1,jn.ltc_2.value=_t.state.rectAreaLTC2,jn.pointLights.value=_t.state.point,jn.pointLightShadows.value=_t.state.pointShadow,jn.hemisphereLights.value=_t.state.hemi,jn.directionalShadowMap.value=_t.state.directionalShadowMap,jn.directionalShadowMatrix.value=_t.state.directionalShadowMatrix,jn.spotShadowMap.value=_t.state.spotShadowMap,jn.spotLightMatrix.value=_t.state.spotLightMatrix,jn.spotLightMap.value=_t.state.spotLightMap,jn.pointShadowMap.value=_t.state.pointShadowMap,jn.pointShadowMatrix.value=_t.state.pointShadowMatrix);const Nr=Mn.getUniforms(),lr=YD.seqWithValue(Nr.seq,jn);return We.currentProgram=Mn,We.uniformsList=lr,Mn}function ba(we,tt){const yt=kn.get(we);yt.outputColorSpace=tt.outputColorSpace,yt.instancing=tt.instancing,yt.instancingColor=tt.instancingColor,yt.skinning=tt.skinning,yt.morphTargets=tt.morphTargets,yt.morphNormals=tt.morphNormals,yt.morphColors=tt.morphColors,yt.morphTargetsCount=tt.morphTargetsCount,yt.numClippingPlanes=tt.numClippingPlanes,yt.numIntersection=tt.numClipIntersection,yt.vertexAlphas=tt.vertexAlphas,yt.vertexTangents=tt.vertexTangents,yt.toneMapping=tt.toneMapping}function ed(we,tt,yt,We,_t){tt.isScene!==!0&&(tt=qr),Nn.resetTextureUnits();const Xt=tt.fog,pn=We.isMeshStandardMaterial?tt.environment:null,Ln=be===null?K.outputColorSpace:be.isXRRenderTarget===!0?be.texture.colorSpace:$c,Tn=(We.isMeshStandardMaterial?si:cr).get(We.envMap||pn),Kn=We.vertexColors===!0&&!!yt.attributes.color&&yt.attributes.color.itemSize===4,Mn=!!yt.attributes.tangent&&(!!We.normalMap||We.anisotropy>0),jn=!!yt.morphAttributes.position,Nr=!!yt.morphAttributes.normal,lr=!!yt.morphAttributes.color;let Xr=Wf;We.toneMapped&&(be===null||be.isXRRenderTarget===!0)&&(Xr=K.toneMapping);const xs=yt.morphAttributes.position||yt.morphAttributes.normal||yt.morphAttributes.color,Hr=xs!==void 0?xs.length:0,Yn=kn.get(We),Ka=z.state.lights;if(Ut===!0&&(Dt===!0||we!==G)){const eo=we===G&&We.id===Pe;mn.setState(We,we,eo)}let wr=!1;We.version===Yn.__version?(Yn.needsLights&&Yn.lightsStateVersion!==Ka.state.version||Yn.outputColorSpace!==Ln||_t.isInstancedMesh&&Yn.instancing===!1||!_t.isInstancedMesh&&Yn.instancing===!0||_t.isSkinnedMesh&&Yn.skinning===!1||!_t.isSkinnedMesh&&Yn.skinning===!0||_t.isInstancedMesh&&Yn.instancingColor===!0&&_t.instanceColor===null||_t.isInstancedMesh&&Yn.instancingColor===!1&&_t.instanceColor!==null||Yn.envMap!==Tn||We.fog===!0&&Yn.fog!==Xt||Yn.numClippingPlanes!==void 0&&(Yn.numClippingPlanes!==mn.numPlanes||Yn.numIntersection!==mn.numIntersection)||Yn.vertexAlphas!==Kn||Yn.vertexTangents!==Mn||Yn.morphTargets!==jn||Yn.morphNormals!==Nr||Yn.morphColors!==lr||Yn.toneMapping!==Xr||Sn.isWebGL2===!0&&Yn.morphTargetsCount!==Hr)&&(wr=!0):(wr=!0,Yn.__version=We.version);let Ys=Yn.currentProgram;wr===!0&&(Ys=$u(We,tt,_t));let qa=!1,Zs=!1,Xa=!1;const Yr=Ys.getUniforms(),ts=Yn.uniforms;if(gn.useProgram(Ys.program)&&(qa=!0,Zs=!0,Xa=!0),We.id!==Pe&&(Pe=We.id,Zs=!0),qa||G!==we){if(Yr.setValue(et,"projectionMatrix",we.projectionMatrix),Sn.logarithmicDepthBuffer&&Yr.setValue(et,"logDepthBufFC",2/(Math.log(we.far+1)/Math.LN2)),G!==we&&(G=we,Zs=!0,Xa=!0),We.isShaderMaterial||We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshStandardMaterial||We.envMap){const eo=Yr.map.cameraPosition;eo!==void 0&&eo.setValue(et,Wn.setFromMatrixPosition(we.matrixWorld))}(We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshLambertMaterial||We.isMeshBasicMaterial||We.isMeshStandardMaterial||We.isShaderMaterial)&&Yr.setValue(et,"isOrthographic",we.isOrthographicCamera===!0),(We.isMeshPhongMaterial||We.isMeshToonMaterial||We.isMeshLambertMaterial||We.isMeshBasicMaterial||We.isMeshStandardMaterial||We.isShaderMaterial||We.isShadowMaterial||_t.isSkinnedMesh)&&Yr.setValue(et,"viewMatrix",we.matrixWorldInverse)}if(_t.isSkinnedMesh){Yr.setOptional(et,_t,"bindMatrix"),Yr.setOptional(et,_t,"bindMatrixInverse");const eo=_t.skeleton;eo&&(Sn.floatVertexTextures?(eo.boneTexture===null&&eo.computeBoneTexture(),Yr.setValue(et,"boneTexture",eo.boneTexture,Nn),Yr.setValue(et,"boneTextureSize",eo.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Ya=yt.morphAttributes;if((Ya.position!==void 0||Ya.normal!==void 0||Ya.color!==void 0&&Sn.isWebGL2===!0)&&En.update(_t,yt,Ys),(Zs||Yn.receiveShadow!==_t.receiveShadow)&&(Yn.receiveShadow=_t.receiveShadow,Yr.setValue(et,"receiveShadow",_t.receiveShadow)),We.isMeshGouraudMaterial&&We.envMap!==null&&(ts.envMap.value=Tn,ts.flipEnvMap.value=Tn.isCubeTexture&&Tn.isRenderTargetTexture===!1?-1:1),Zs&&(Yr.setValue(et,"toneMappingExposure",K.toneMappingExposure),Yn.needsLights&&Lh(ts,Xa),Xt&&We.fog===!0&&Vt.refreshFogUniforms(ts,Xt),Vt.refreshMaterialUniforms(ts,We,vt,Fe,en),YD.upload(et,Yn.uniformsList,ts,Nn)),We.isShaderMaterial&&We.uniformsNeedUpdate===!0&&(YD.upload(et,Yn.uniformsList,ts,Nn),We.uniformsNeedUpdate=!1),We.isSpriteMaterial&&Yr.setValue(et,"center",_t.center),Yr.setValue(et,"modelViewMatrix",_t.modelViewMatrix),Yr.setValue(et,"normalMatrix",_t.normalMatrix),Yr.setValue(et,"modelMatrix",_t.matrixWorld),We.isShaderMaterial||We.isRawShaderMaterial){const eo=We.uniformsGroups;for(let Wu=0,Nh=eo.length;Wu<Nh;Wu++)if(Sn.isWebGL2){const td=eo[Wu];Bn.update(td,Ys),Bn.bind(td,Ys)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ys}function Lh(we,tt){we.ambientLightColor.needsUpdate=tt,we.lightProbe.needsUpdate=tt,we.directionalLights.needsUpdate=tt,we.directionalLightShadows.needsUpdate=tt,we.pointLights.needsUpdate=tt,we.pointLightShadows.needsUpdate=tt,we.spotLights.needsUpdate=tt,we.spotLightShadows.needsUpdate=tt,we.rectAreaLights.needsUpdate=tt,we.hemisphereLights.needsUpdate=tt}function dm(we){return we.isMeshLambertMaterial||we.isMeshToonMaterial||we.isMeshPhongMaterial||we.isMeshStandardMaterial||we.isShadowMaterial||we.isShaderMaterial&&we.lights===!0}this.getActiveCubeFace=function(){return pe},this.getActiveMipmapLevel=function(){return Z},this.getRenderTarget=function(){return be},this.setRenderTargetTextures=function(we,tt,yt){kn.get(we.texture).__webglTexture=tt,kn.get(we.depthTexture).__webglTexture=yt;const We=kn.get(we);We.__hasExternalTextures=!0,We.__hasExternalTextures&&(We.__autoAllocateDepthBuffer=yt===void 0,We.__autoAllocateDepthBuffer||Pn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),We.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(we,tt){const yt=kn.get(we);yt.__webglFramebuffer=tt,yt.__useDefaultFramebuffer=tt===void 0},this.setRenderTarget=function(we,tt=0,yt=0){be=we,pe=tt,Z=yt;let We=!0,_t=null,Xt=!1,pn=!1;if(we){const Tn=kn.get(we);Tn.__useDefaultFramebuffer!==void 0?(gn.bindFramebuffer(et.FRAMEBUFFER,null),We=!1):Tn.__webglFramebuffer===void 0?Nn.setupRenderTarget(we):Tn.__hasExternalTextures&&Nn.rebindTextures(we,kn.get(we.texture).__webglTexture,kn.get(we.depthTexture).__webglTexture);const Kn=we.texture;(Kn.isData3DTexture||Kn.isDataArrayTexture||Kn.isCompressedArrayTexture)&&(pn=!0);const Mn=kn.get(we).__webglFramebuffer;we.isWebGLCubeRenderTarget?(Array.isArray(Mn[tt])?_t=Mn[tt][yt]:_t=Mn[tt],Xt=!0):Sn.isWebGL2&&we.samples>0&&Nn.useMultisampledRTT(we)===!1?_t=kn.get(we).__webglMultisampledFramebuffer:Array.isArray(Mn)?_t=Mn[yt]:_t=Mn,ye.copy(we.viewport),St.copy(we.scissor),kt=we.scissorTest}else ye.copy(Je).multiplyScalar(vt).floor(),St.copy(Be).multiplyScalar(vt).floor(),kt=nt;if(gn.bindFramebuffer(et.FRAMEBUFFER,_t)&&Sn.drawBuffers&&We&&gn.drawBuffers(we,_t),gn.viewport(ye),gn.scissor(St),gn.setScissorTest(kt),Xt){const Tn=kn.get(we.texture);et.framebufferTexture2D(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,et.TEXTURE_CUBE_MAP_POSITIVE_X+tt,Tn.__webglTexture,yt)}else if(pn){const Tn=kn.get(we.texture),Kn=tt||0;et.framebufferTextureLayer(et.FRAMEBUFFER,et.COLOR_ATTACHMENT0,Tn.__webglTexture,yt||0,Kn)}Pe=-1},this.readRenderTargetPixels=function(we,tt,yt,We,_t,Xt,pn){if(!(we&&we.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ln=kn.get(we).__webglFramebuffer;if(we.isWebGLCubeRenderTarget&&pn!==void 0&&(Ln=Ln[pn]),Ln){gn.bindFramebuffer(et.FRAMEBUFFER,Ln);try{const Tn=we.texture,Kn=Tn.format,Mn=Tn.type;if(Kn!==Fu&&rn.convert(Kn)!==et.getParameter(et.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jn=Mn===oP&&(Pn.has("EXT_color_buffer_half_float")||Sn.isWebGL2&&Pn.has("EXT_color_buffer_float"));if(Mn!==Kf&&rn.convert(Mn)!==et.getParameter(et.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Mn===Df&&(Sn.isWebGL2||Pn.has("OES_texture_float")||Pn.has("WEBGL_color_buffer_float")))&&!jn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}tt>=0&&tt<=we.width-We&&yt>=0&&yt<=we.height-_t&&et.readPixels(tt,yt,We,_t,rn.convert(Kn),rn.convert(Mn),Xt)}finally{const Tn=be!==null?kn.get(be).__webglFramebuffer:null;gn.bindFramebuffer(et.FRAMEBUFFER,Tn)}}},this.copyFramebufferToTexture=function(we,tt,yt=0){const We=Math.pow(2,-yt),_t=Math.floor(tt.image.width*We),Xt=Math.floor(tt.image.height*We);Nn.setTexture2D(tt,0),et.copyTexSubImage2D(et.TEXTURE_2D,yt,0,0,we.x,we.y,_t,Xt),gn.unbindTexture()},this.copyTextureToTexture=function(we,tt,yt,We=0){const _t=tt.image.width,Xt=tt.image.height,pn=rn.convert(yt.format),Ln=rn.convert(yt.type);Nn.setTexture2D(yt,0),et.pixelStorei(et.UNPACK_FLIP_Y_WEBGL,yt.flipY),et.pixelStorei(et.UNPACK_PREMULTIPLY_ALPHA_WEBGL,yt.premultiplyAlpha),et.pixelStorei(et.UNPACK_ALIGNMENT,yt.unpackAlignment),tt.isDataTexture?et.texSubImage2D(et.TEXTURE_2D,We,we.x,we.y,_t,Xt,pn,Ln,tt.image.data):tt.isCompressedTexture?et.compressedTexSubImage2D(et.TEXTURE_2D,We,we.x,we.y,tt.mipmaps[0].width,tt.mipmaps[0].height,pn,tt.mipmaps[0].data):et.texSubImage2D(et.TEXTURE_2D,We,we.x,we.y,pn,Ln,tt.image),We===0&&yt.generateMipmaps&&et.generateMipmap(et.TEXTURE_2D),gn.unbindTexture()},this.copyTextureToTexture3D=function(we,tt,yt,We,_t=0){if(K.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Xt=we.max.x-we.min.x+1,pn=we.max.y-we.min.y+1,Ln=we.max.z-we.min.z+1,Tn=rn.convert(We.format),Kn=rn.convert(We.type);let Mn;if(We.isData3DTexture)Nn.setTexture3D(We,0),Mn=et.TEXTURE_3D;else if(We.isDataArrayTexture)Nn.setTexture2DArray(We,0),Mn=et.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}et.pixelStorei(et.UNPACK_FLIP_Y_WEBGL,We.flipY),et.pixelStorei(et.UNPACK_PREMULTIPLY_ALPHA_WEBGL,We.premultiplyAlpha),et.pixelStorei(et.UNPACK_ALIGNMENT,We.unpackAlignment);const jn=et.getParameter(et.UNPACK_ROW_LENGTH),Nr=et.getParameter(et.UNPACK_IMAGE_HEIGHT),lr=et.getParameter(et.UNPACK_SKIP_PIXELS),Xr=et.getParameter(et.UNPACK_SKIP_ROWS),xs=et.getParameter(et.UNPACK_SKIP_IMAGES),Hr=yt.isCompressedTexture?yt.mipmaps[0]:yt.image;et.pixelStorei(et.UNPACK_ROW_LENGTH,Hr.width),et.pixelStorei(et.UNPACK_IMAGE_HEIGHT,Hr.height),et.pixelStorei(et.UNPACK_SKIP_PIXELS,we.min.x),et.pixelStorei(et.UNPACK_SKIP_ROWS,we.min.y),et.pixelStorei(et.UNPACK_SKIP_IMAGES,we.min.z),yt.isDataTexture||yt.isData3DTexture?et.texSubImage3D(Mn,_t,tt.x,tt.y,tt.z,Xt,pn,Ln,Tn,Kn,Hr.data):yt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),et.compressedTexSubImage3D(Mn,_t,tt.x,tt.y,tt.z,Xt,pn,Ln,Tn,Hr.data)):et.texSubImage3D(Mn,_t,tt.x,tt.y,tt.z,Xt,pn,Ln,Tn,Kn,Hr),et.pixelStorei(et.UNPACK_ROW_LENGTH,jn),et.pixelStorei(et.UNPACK_IMAGE_HEIGHT,Nr),et.pixelStorei(et.UNPACK_SKIP_PIXELS,lr),et.pixelStorei(et.UNPACK_SKIP_ROWS,Xr),et.pixelStorei(et.UNPACK_SKIP_IMAGES,xs),_t===0&&We.generateMipmaps&&et.generateMipmap(Mn),gn.unbindTexture()},this.initTexture=function(we){we.isCubeTexture?Nn.setTextureCube(we,0):we.isData3DTexture?Nn.setTexture3D(we,0):we.isDataArrayTexture||we.isCompressedArrayTexture?Nn.setTexture2DArray(we,0):Nn.setTexture2D(we,0),gn.unbindTexture()},this.resetState=function(){pe=0,Z=0,be=null,gn.reset(),Jt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return gh}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===tr?kg:R_e}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===kg?tr:$c}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class nVe extends Q_e{}nVe.prototype.isWebGL1Renderer=!0;class rVe extends Do{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}}class LC extends am{constructor(e=1,n=32,r=16,o=0,u=Math.PI*2,h=0,m=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:o,phiLength:u,thetaStart:h,thetaLength:m},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const _=Math.min(h+m,Math.PI);let x=0;const M=[],R=new dt,N=new dt,H=[],Q=[],j=[],z=[];for(let U=0;U<=r;U++){const C=[],K=U/r;let te=0;U===0&&h===0?te=.5/n:U===r&&_===Math.PI&&(te=-.5/n);for(let pe=0;pe<=n;pe++){const Z=pe/n;R.x=-e*Math.cos(o+Z*u)*Math.sin(h+K*m),R.y=e*Math.cos(h+K*m),R.z=e*Math.sin(o+Z*u)*Math.sin(h+K*m),Q.push(R.x,R.y,R.z),N.copy(R).normalize(),j.push(N.x,N.y,N.z),z.push(Z+te,1-K),C.push(x++)}M.push(C)}for(let U=0;U<r;U++)for(let C=0;C<n;C++){const K=M[U][C+1],te=M[U][C],pe=M[U+1][C],Z=M[U+1][C+1];(U!==0||h>0)&&H.push(K,te,Z),(U!==r-1||_<Math.PI)&&H.push(te,pe,Z)}this.setIndex(H),this.setAttribute("position",new Hc(Q,3)),this.setAttribute("normal",new Hc(j,3)),this.setAttribute("uv",new Hc(z,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new LC(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class iVe extends ew{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Pr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yG,this.normalScale=new kr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class oVe extends iVe{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new kr(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return js(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Pr(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Pr(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Pr(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class sVe extends ew{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=yG,this.normalScale=new kr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class aVe extends Do{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Pr(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}const l8=new uo,Gve=new dt,$ve=new dt;class lVe{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new kr(512,512),this.map=null,this.mapPass=null,this.matrix=new uo,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wG,this._frameExtents=new kr(1,1),this._viewportCount=1,this._viewports=[new Io(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;Gve.setFromMatrixPosition(e.matrixWorld),n.position.copy(Gve),$ve.setFromMatrixPosition(e.target.matrixWorld),n.lookAt($ve),n.updateMatrixWorld(),l8.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(l8),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(l8)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class uVe extends lVe{constructor(){super(new K_e(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class cVe extends aVe{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Do.DEFAULT_UP),this.updateMatrix(),this.target=new Do,this.shadow=new uVe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:fG}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=fG);function dVe(t){if(t.name==="cameras")return"camera";if(t.name==="interactive")return"interactive";if(t.name==="lights")return"light";if(t.name==="ui")return"ui";if(t.name==="utils")return"utils";const e=t.type;return e.search("Helper")>-1?"icon_utils":e.search("Camera")>-1?"camera":e.search("Light")>-1?"light":"obj3D"}function J_e(t){const e={name:t.name,type:t.type,uuid:t.uuid,children:[]};return t.children.forEach(n=>{e.children.push(J_e(n))}),e}function Wve(t){const e=t.toJSON();return e.blending===void 0&&(e.blending=Eg),e.blendSrc===void 0&&(e.blendSrc=mG),e.blendDst===void 0&&(e.blendDst=vG),e.blendEquation===void 0&&(e.blendEquation=vg),e.blendColor===void 0&&(e.blendColor=new Pr(0,0,0)),e.blendAlpha===void 0&&(e.blendAlpha=0),e.clipIntersection===void 0&&(e.clipIntersection=!1),e.clipShadows===void 0&&(e.clipShadows=!1),e.depthFunc===void 0&&(e.depthFunc=A3),e.depthTest===void 0&&(e.depthTest=!0),e.depthWrite===void 0&&(e.depthWrite=!0),e.polygonOffset===void 0&&(e.polygonOffset=!1),e.polygonOffsetFactor===void 0&&(e.polygonOffsetFactor=0),e.polygonOffsetUnits===void 0&&(e.polygonOffsetUnits=0),e.stencilWriteMask===void 0&&(e.stencilWriteMask=255),e.stencilFunc===void 0&&(e.stencilFunc=D_e),e.stencilRef===void 0&&(e.stencilRef=0),e.stencilFuncMask===void 0&&(e.stencilFuncMask=255),e.stencilFail===void 0&&(e.stencilFail=A_),e.stencilZFail===void 0&&(e.stencilZFail=A_),e.stencilZPass===void 0&&(e.stencilZPass=A_),e.stencilWrite===void 0&&(e.stencilWrite=!1),e.alphaHash===void 0&&(e.alphaHash=!1),e.alphaToCoverage===void 0&&(e.alphaToCoverage=!1),e.colorWrite===void 0&&(e.colorWrite=!0),e.dithering===void 0&&(e.dithering=!1),e.forceSinglePass===void 0&&(e.forceSinglePass=!1),e.name===void 0&&(e.name=""),e.opacity===void 0&&(e.opacity=1),e.premultipliedAlpha===void 0&&(e.premultipliedAlpha=!1),e.side===void 0&&(e.side=Mh),e.toneMapped===void 0&&(e.toneMapped=!0),e.transparent===void 0&&(e.transparent=!1),e.vertexColors===void 0&&(e.vertexColors=!1),e}function hVe(t){t.updateMatrix();const e={name:t.name,type:t.type,uuid:t.uuid,visible:t.visible,matrix:t.matrix.elements};if(t instanceof Dl){const n=t;if(Array.isArray(n.material)){const r=[];n.material.forEach(o=>{r.push(Wve(o))}),e.material=r}else e.material=Wve(n.material)}return e}class pVe extends pL{constructor(n){super(n);Fi(this,"scene")}getObject(n){this.app.send({event:"getObject",target:"app",data:n})}setObject(n){const r=hVe(n);this.app.send({event:"setObject",target:"editor",data:r})}updateObject(n,r,o){this.app.send({event:"updateObject",target:"app",data:{uuid:n,key:r,value:o}})}getScene(){this.app.send({event:"getScene",target:"app"})}setScene(n){const r=J_e(n);this.app.send({event:"setScene",target:"editor",data:r})}}/*! Tweakpane 4.0.0 (c) 2016 cocopon, licensed under the MIT license. */function oi(t){return t==null}function EG(t){return t!==null&&typeof t=="object"}function GH(t){return t!==null&&typeof t=="object"}function fVe(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Fg(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,o)=>{const u=t[o],h=e[o];return GH(u)&&GH(h)?Object.assign(Object.assign({},r),{[o]:Fg(u,h)}):Object.assign(Object.assign({},r),{[o]:o in e?h:u})},{})}function CG(t){return EG(t)?"target"in t:!1}const mVe={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};let bs=class s_{static alreadyDisposed(){return new s_({type:"alreadydisposed"})}static notBindable(){return new s_({type:"notbindable"})}static notCompatible(e,n){return new s_({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new s_({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new s_({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=mVe[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}},Kve=class ewe{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!ewe.isBindable(r))throw bs.notBindable();if(!(e in r))throw bs.propertyNotFound(e);r[e]=n}},co=class{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(o=>o.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(o=>{o.handler(n)})}},vVe=class{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(o,u)=>o===u,this.emitter=new co,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},o=this.constraint_?this.constraint_.constrain(e):e,u=this.rawValue_;this.equals_(u,o)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=o,this.emitter.emit("change",{options:r,previousRawValue:u,rawValue:o,sender:this}))}},gVe=class{constructor(e){this.emitter=new co,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},o=this.value_;o===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:this.value_,sender:this}))}},yVe=class{constructor(e){this.emitter=new co,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}};function wi(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new gVe(t):new vVe(t,e)}function bVe(t){return[new yVe(t),(e,n)=>{t.setRawValue(e,n)}]}let or=class twe{constructor(e){this.emitter=new co,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,o)=>Object.assign(r,{[o]:wi(e[o])}),{})}static fromObject(e){const n=this.createCore(e);return new twe(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}},MP=class{constructor(e){this.values=or.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}},_Ve=class{constructor(e){this.values=or.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let o=e;return oi(r)||(o=Math.max(o,r)),oi(n)||(o=Math.min(o,n)),o}},wVe=class{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}},xVe=class{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}};const SVe={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};let EVe=class{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=SVe[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}};const CVe={"+":t=>t,"-":t=>-t,"~":t=>~t};let PVe=class{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=CVe[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}};function PG(t){return(e,n)=>{for(let r=0;r<t.length;r++){const o=t[r](e,n);if(o!=="")return o}return""}}function sP(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function kVe(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function aP(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function TVe(t,e){const n=aP(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const o=aP(t,e);return o===""?"":r+o}function kG(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=TVe(t,e);return r===""?"":n+r}function nwe(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=kVe(t,e);return e+=r.length,r===""?"":r+aP(t,e)}function MVe(t,e){const n=nwe(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const o=aP(t,e);return e+=o.length,n+r+o+kG(t,e)}function AVe(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=aP(t,e);return e+=r.length,r===""?"":n+r+kG(t,e)}function IVe(t,e){const n=nwe(t,e);return e+=n.length,n===""?"":n+kG(t,e)}const RVe=PG([MVe,AVe,IVe]);function OVe(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function DVe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=OVe(t,e);return r===""?"":n+r}function LVe(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function NVe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=LVe(t,e);return r===""?"":n+r}function FVe(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function BVe(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=FVe(t,e);return r===""?"":n+r}const UVe=PG([DVe,NVe,BVe]),VVe=PG([UVe,RVe]);function jVe(t,e){const n=VVe(t,e);return e+=n.length,n===""?null:{evaluable:new xVe(n),cursor:e}}function zVe(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=iwe(t,e);if(!r)return null;e=r.cursor,e+=sP(t,e).length;const o=t.substr(e,1);return e+=o.length,o!==")"?null:{evaluable:r.evaluable,cursor:e}}function HVe(t,e){var n;return(n=jVe(t,e))!==null&&n!==void 0?n:zVe(t,e)}function rwe(t,e){const n=HVe(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const o=rwe(t,e);return o?(e=o.cursor,{cursor:e,evaluable:new PVe(r,o.evaluable)}):null}function GVe(t,e,n){n+=sP(e,n).length;const r=t.filter(o=>e.startsWith(o,n))[0];return r?(n+=r.length,n+=sP(e,n).length,{cursor:n,operator:r}):null}function $Ve(t,e){return(n,r)=>{const o=t(n,r);if(!o)return null;r=o.cursor;let u=o.evaluable;for(;;){const h=GVe(e,n,r);if(!h)break;r=h.cursor;const m=t(n,r);if(!m)return null;r=m.cursor,u=new EVe(h.operator,u,m.evaluable)}return u?{cursor:r,evaluable:u}:null}}const WVe=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>$Ve(t,e),rwe);function iwe(t,e){return e+=sP(t,e).length,WVe(t,e)}function KVe(t){const e=iwe(t,0);return!e||e.cursor+sP(t,e.cursor).length!==t.length?null:e.evaluable}function Ah(t){var e;const n=KVe(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function owe(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=Ah(t);if(!oi(e))return e}return 0}function qVe(t){return String(t)}function ya(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function Rr(t,e,n,r,o){const u=(t-e)/(n-e);return r+u*(o-r)}function qve(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function go(t,e,n){return Math.min(Math.max(t,e),n)}function swe(t,e){return(t%e+e)%e}function XVe(t,e){return oi(t.step)?Math.max(qve(e),2):qve(t.step)}function awe(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function lwe(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function uwe(t,e){return oi(t.step)?null:new wVe(t.step,e)}function cwe(t){return!oi(t.max)&&!oi(t.min)?new MP({max:t.max,min:t.min}):!oi(t.max)||!oi(t.min)?new _Ve({max:t.max,min:t.min}):null}function dwe(t,e){var n,r,o;return{formatter:(n=t.format)!==null&&n!==void 0?n:ya(XVe(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:awe(t),pointerScale:(o=t.pointerScale)!==null&&o!==void 0?o:lwe(t,e)}}function hwe(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function TG(t){return{constraint:t.constraint,textProps:or.fromObject(dwe(t.params,t.initialValue))}}let Kg=class{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}},vL=class{constructor(e){this.target=e}},AP=class extends vL{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}},YVe=class extends vL{constructor(e,n){super(e),this.expanded=n}},ZVe=class extends vL{constructor(e,n){super(e),this.index=n}},lP=class extends Kg{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new co,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new AP(this,n.binding.target.read(),e.options.last))}};class QVe{constructor(e,n){this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=n,this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.emitter=new co}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=this.binding.read()}push(){this.binding.write(this.value_.rawValue)}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.push(),this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function JVe(t){if(!("binding"in t))return!1;const e=t.binding;return CG(e)&&"read"in e&&"write"in e}function e4e(t,e){const r=Object.keys(e).reduce((o,u)=>{if(o===void 0)return;const h=e[u],m=h(t[u]);return m.succeeded?Object.assign(Object.assign({},o),{[u]:m.value}):void 0},{});return r}function t4e(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const o=e(r);if(!(!o.succeeded||o.value===void 0))return[...n,o.value]},[])}function n4e(t){return t===null?!1:typeof t=="object"}function uh(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function Xve(t){return{custom:e=>uh(e)(t),boolean:uh(e=>typeof e=="boolean"?e:void 0)(t),number:uh(e=>typeof e=="number"?e:void 0)(t),string:uh(e=>typeof e=="string"?e:void 0)(t),function:uh(e=>typeof e=="function"?e:void 0)(t),constant:e=>uh(n=>n===e?e:void 0)(t),raw:uh(e=>e)(t),object:e=>uh(n=>{if(n4e(n))return e4e(n,e)})(t),array:e=>uh(n=>{if(Array.isArray(n))return t4e(n,e)})(t)}}const $H={optional:Xve(!0),required:Xve(!1)};function Di(t,e){const n=e($H),r=$H.required.object(n)(t);return r.succeeded?r.value:void 0}function Ga(t,e,n,r){if(e&&!e(t))return!1;const o=Di(t,n);return o?r(o):!1}function $a(t,e){var n;return Fg((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function Mg(t){return"value"in t}function pwe(t){if(!EG(t)||!("binding"in t))return!1;const e=t.binding;return CG(e)}const Uc="http://www.w3.org/2000/svg";function O3(t){t.offsetHeight}function r4e(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function MG(t){return t.ontouchstart!==void 0}function i4e(){return globalThis}function o4e(){return i4e().document}function s4e(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const a4e={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function gL(t,e){const n=t.createElementNS(Uc,"svg");return n.innerHTML=a4e[e],n}function fwe(t,e,n){t.insertBefore(e,t.children[n])}function AG(t){t.parentElement&&t.parentElement.removeChild(t)}function mwe(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function l4e(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function vwe(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function xh(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function Wc(t,e,n){xh(t.value(e),n)}const u4e="tp";function _r(t){return(n,r)=>[u4e,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const sC=_r("lbl");function c4e(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(o=>t.createTextNode(o)).forEach((o,u)=>{u>0&&n.appendChild(t.createElement("br")),n.appendChild(o)}),n}let gwe=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(sC()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(sC("l")),Wc(n.props,"label",u=>{oi(u)?this.element.classList.add(sC(void 0,"nol")):(this.element.classList.remove(sC(void 0,"nol")),l4e(r),r.appendChild(c4e(e,u)))}),this.element.appendChild(r),this.labelElement=r;const o=e.createElement("div");o.classList.add(sC("v")),this.element.appendChild(o),this.valueElement=o}},ywe=class{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new gwe(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Ga(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return $a(null,{label:this.props.get("label")})}};function d4e(){return["veryfirst","first","last","verylast"]}const Yve=_r(""),Zve={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};let yL=class{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{d4e().forEach(r=>{n.classList.remove(Yve(void 0,Zve[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(Yve(void 0,Zve[r]))})}),this.viewProps.handleDispose(()=>{AG(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Ga(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return $a(null,Object.assign({},this.viewProps.exportState()))}},Bg=class extends yL{constructor(e,n){if(n.value!==n.valueController.value)throw bs.shouldNeverHappen();const r=n.valueController.viewProps,o=new ywe(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new gwe(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=o,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return Ga(e,n=>{var r,o,u;return super.importState(n)&&this.labelController.importProps(n)&&((u=(o=(r=this.valueController).importProps)===null||o===void 0?void 0:o.call(r,e))!==null&&u!==void 0?u:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return $a(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}};function Qve(t){const e=Object.assign({},t);return delete e.value,e}class bwe extends Bg{constructor(e,n){super(e,n),this.tag=n.tag}importState(e){return Ga(e,n=>super.importState(Qve(e)),n=>({tag:n.optional.string}),n=>(this.tag=n.tag,!0))}exportState(){return $a(()=>Qve(super.exportState()),{binding:{key:this.value.binding.target.key,value:this.value.binding.target.read()},tag:this.tag})}}function h4e(t){return Mg(t)&&pwe(t.value)}class p4e extends bwe{importState(e){return Ga(e,n=>super.importState(n),n=>({binding:n.required.object({value:n.required.raw})}),n=>(this.value.binding.inject(n.binding.value),this.value.fetch(),!0))}}function f4e(t){return Mg(t)&&JVe(t.value)}function _we(t,e){for(;t.length<e;)t.push(void 0)}function m4e(t){const e=[];return _we(e,t),e}function v4e(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function g4e(t,e){const n=[...v4e(t),e];return n.length>t.length?n.splice(0,n.length-t.length):_we(n,t.length),n}class y4e{constructor(e){this.emitter=new co,this.onTick_=this.onTick_.bind(this),this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.binding=e.binding,this.value_=wi(m4e(e.bufferSize)),this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_),this.ticker=e.ticker,this.ticker.emitter.on("tick",this.onTick_),this.fetch()}get rawValue(){return this.value_.rawValue}set rawValue(e){this.value_.rawValue=e}setRawValue(e,n){this.value_.setRawValue(e,n)}fetch(){this.value_.rawValue=g4e(this.value_.rawValue,this.binding.read())}onTick_(){this.fetch()}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function b4e(t){if(!("binding"in t))return!1;const e=t.binding;return CG(e)&&"read"in e&&!("write"in e)}class _4e extends bwe{exportState(){return $a(()=>super.exportState(),{binding:{readonly:!0}})}}function w4e(t){return Mg(t)&&b4e(t.value)}let x4e=class extends Kg{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new vL(this))}),this}};function S4e(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function nw(t,e){return n=>{S4e(t,e,n)}}function IG(t,e){xh(t,n=>{e.textContent=n??""})}const u8=_r("btn");let E4e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(u8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(u8("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const o=e.createElement("div");o.classList.add(u8("t")),IG(n.props.value("title"),o),this.buttonElement.appendChild(o)}},C4e=class{constructor(e,n){this.emitter=new co,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new E4e(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Ga(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return $a(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}},Jve=class extends yL{constructor(e,n){const r=new C4e(e,{props:n.buttonProps,viewProps:n.viewProps}),o=new ywe(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:o.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=o}importState(e){return Ga(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return $a(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}},wwe=class{constructor(e){const[n,r]=e.split("-"),o=n.split(".");this.major=parseInt(o[0],10),this.minor=parseInt(o[1],10),this.patch=parseInt(o[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}};const rw=new wwe("2.0.0");function Xs(t){return Object.assign({core:rw},t)}const P4e=Xs({id:"button",type:"blade",accept(t){const e=Di(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new Jve(t.document,{blade:t.blade,buttonProps:or.fromObject({title:t.params.title}),labelProps:or.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof Jve?new x4e(t.controller):null}});function k4e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function T4e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function M4e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function A4e(t){return EG(t)?"refresh"in t&&typeof t.refresh=="function":!1}function I4e(t,e){if(!Kve.isBindable(t))throw bs.notBindable();return new Kve(t,e)}let R4e=class{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new co,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const o=r??{},u=this.controller_.element.ownerDocument,h=this.pool_.createBinding(u,I4e(e,n),o),m=this.pool_.createBindingApi(h);return this.add(m,o.index)}addFolder(e){return T4e(this,e)}addButton(e){return k4e(this,e)}addTab(e){return M4e(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),o=this.pool_.createApi(r);return this.add(o,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.children.forEach(e=>{A4e(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),o=pwe(n.value)?n.value.binding:null;this.emitter_.emit("change",new AP(r,o?o.target.read():n.value.rawValue,e.options.last))}},RG=class extends Kg{constructor(e,n){super(e),this.rackApi_=new R4e(e.rackController,n)}},OG=class extends yL{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Ga(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,o)=>r.importState(n.children[o])))}exportState(){return $a(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}};function WH(t){return"rackController"in t}let O4e=class{constructor(e){this.emitter=new co,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw bs.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const o=this.extract_(e);o&&(o.emitter.on("add",this.onSubListAdd_),o.emitter.on("remove",this.onSubListRemove_),o.allItems().forEach(u=>{this.cache_.add(u)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(o=>{this.cache_.delete(o)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}};function D4e(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(Mg(r)&&r.value===e)return r}return null}function L4e(t){return WH(t)?t.rackController.rack.bcSet_:null}let N4e=class{constructor(e){var n,r;this.emitter=new co,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new O4e(L4e),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),Mg(r))r.value.emitter.on("change",this.onChildValueChange_);else if(WH(r)){const o=r.rackController.rack;if(o){const u=o.emitter;u.on("layout",this.onRackLayout_),u.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(Mg(r))r.value.emitter.off("change",this.onChildValueChange_);else if(WH(r)){const o=r.rackController.rack;if(o){const u=o.emitter;u.off("layout",this.onRackLayout_),u.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(o=>!o.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(o=>{const u=[];o===n&&(u.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&u.push("veryfirst")),o===r&&(u.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&u.push("verylast")),o.blade.set("positions",u)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=D4e(this.find(Mg),e.sender);if(!n)throw bs.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}},DG=class{constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new N4e({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&fwe(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&AG(e.bladeController.view.element)}};function iw(){return new or({positions:wi([],{equals:fVe})})}let LG=class xwe extends or{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=or.createCore(n);return new xwe(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!oi(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};Wc(this,"expanded",r),Wc(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}};function F4e(t,e){let n=0;return r4e(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),O3(e),n=e.clientHeight,t.set("temporaryExpanded",null),O3(e)}),n}function ege(t,e){e.style.height=t.styleHeight}function NG(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),oi(t.get("expandedHeight"))){const n=F4e(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),O3(e)}),t.emitter.on("change",()=>{ege(t,e)}),ege(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}let Swe=class extends RG{constructor(e,n){super(e,n),this.emitter_=new co,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new YVe(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.rackApi_.refresh()}};const Ewe=_r("cnt");let B4e=class{constructor(e,n){var r;this.className_=_r((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),Ewe()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),Wc(this.foldable_,"completed",nw(this.element,this.className_(void 0,"cpl")));const o=e.createElement("button");o.classList.add(this.className_("b")),Wc(n.props,"title",x=>{oi(x)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o;const u=e.createElement("div");u.classList.add(this.className_("i")),this.element.appendChild(u);const h=e.createElement("div");h.classList.add(this.className_("t")),IG(n.props.value("title"),h),this.buttonElement.appendChild(h),this.titleElement=h;const m=e.createElement("div");m.classList.add(this.className_("m")),this.buttonElement.appendChild(m);const _=e.createElement("div");_.classList.add(this.className_("c")),this.element.appendChild(_),this.containerElement=_}},KH=class extends OG{constructor(e,n){var r;const o=LG.create((r=n.expanded)!==null&&r!==void 0?r:!0),u=new B4e(e,{foldable:o,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new DG({blade:n.blade,element:u.containerElement,root:n.root,viewProps:n.viewProps}),view:u})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=o,NG(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Ga(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return $a(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}};const U4e=Xs({id:"folder",type:"blade",accept(t){const e=Di(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new KH(t.document,{blade:t.blade,expanded:t.params.expanded,props:or.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof KH?new Swe(t.controller,t.pool):null}}),V4e=_r("");function tge(t,e){return nw(t,V4e(void 0,e))}let qg=class Cwe extends or{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=bVe(wi(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,o;const u=e??{};return new Cwe(or.createCore({disabled:(n=u.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=u.hidden)!==null&&r!==void 0?r:!1,parent:(o=u.parent)!==null&&o!==void 0?o:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){xh(this.globalDisabled_,tge(e,"disabled")),Wc(this,"hidden",tge(e,"hidden"))}bindDisabled(e){xh(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){xh(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}};const nge=_r("tbp");let j4e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(nge()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(nge("c")),this.element.appendChild(r),this.containerElement=r}};const aC=_r("tbi");let z4e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(aC()),n.viewProps.bindClassModifiers(this.element),Wc(n.props,"selected",u=>{u?this.element.classList.add(aC(void 0,"sel")):this.element.classList.remove(aC(void 0,"sel"))});const r=e.createElement("button");r.classList.add(aC("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const o=e.createElement("div");o.classList.add(aC("t")),IG(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o}},H4e=class{constructor(e,n){this.emitter=new co,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new z4e(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}},qH=class extends OG{constructor(e,n){const r=new j4e(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new DG({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new H4e(e,{props:n.itemProps,viewProps:qg.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,Wc(this.props,"selected",o=>{this.itemController.props.set("selected",o),this.viewProps.set("hidden",!o)})}get itemController(){return this.ic_}importState(e){return Ga(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return $a(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}},G4e=class extends RG{constructor(e,n){super(e,n),this.emitter_=new co,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new qH(n,{blade:iw(),itemProps:or.fromObject({selected:!1,title:e.title}),props:or.fromObject({selected:!1}),viewProps:qg.create()}),o=this.pool_.createApi(r);return this.rackApi_.add(o,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}onSelect_(e){this.emitter_.emit("select",new ZVe(this,e.rawValue))}},$4e=class extends RG{get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}};const rge=-1;let W4e=class{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=wi(!0),this.selectedIndex=wi(rge),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=rge,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,o)=>{r.rawValue=o===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}};const lC=_r("tab");let K4e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(lC(),Ewe()),n.viewProps.bindClassModifiers(this.element),xh(n.empty,nw(this.element,lC(void 0,"nop")));const r=e.createElement("div");r.classList.add(lC("t")),this.element.appendChild(r),this.itemsElement=r;const o=e.createElement("div");o.classList.add(lC("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(lC("c")),this.element.appendChild(u),this.contentsElement=u}},ige=class extends OG{constructor(e,n){const r=new W4e,o=new K4e(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new DG({blade:n.blade,element:o.contentsElement,viewProps:n.viewProps}),view:o}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const u=this.rackController.rack;u.emitter.on("add",this.onRackAdd_),u.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;fwe(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;AG(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}};const Pwe=Xs({id:"tab",type:"blade",accept(t){const e=Di(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new ige(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new qH(t.document,{blade:iw(),itemProps:or.fromObject({selected:!1,title:n.title}),props:or.fromObject({selected:!1}),viewProps:qg.create()});e.add(r)}),e},api(t){return t.controller instanceof ige?new G4e(t.controller,t.pool):t.controller instanceof qH?new $4e(t.controller,t.pool):null}});function q4e(t,e){const n=t.accept(e.params);if(!n)return null;const r=Di(e.params,o=>({disabled:o.optional.boolean,hidden:o.optional.boolean}));return t.controller({blade:iw(),document:e.document,params:Object.assign(Object.assign({},n.params),{disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden}),viewProps:qg.create({disabled:r==null?void 0:r.disabled,hidden:r==null?void 0:r.hidden})})}let FG=class extends lP{get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}},X4e=class{constructor(){this.disabled=!1,this.emitter=new co}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}},Y4e=class{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new co,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}},IP=class{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}};function D3(t,e){if(t instanceof e)return t;if(t instanceof IP){const n=t.constraints.reduce((r,o)=>r||(o instanceof e?o:null),null);if(n)return n}return null}let RP=class{constructor(e){this.values=or.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(o=>o.value===e).length>0?e:n[0].value}};function OP(t){var e;const n=$H;if(Array.isArray(t))return(e=Di({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function BG(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function UG(t){return oi(t)?null:new RP(BG(t))}const c8=_r("lst");let Z4e=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(c8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(c8("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const o=e.createElement("div");o.classList.add(c8("m")),o.appendChild(gL(e,"dropdown")),this.element.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,Wc(this.props_,"options",u=>{mwe(this.selectElement),u.forEach(h=>{const m=e.createElement("option");m.textContent=h.text,this.selectElement.appendChild(m)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}},em=class{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Z4e(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return Ga(e,null,n=>({options:n.required.custom(OP)}),n=>(this.props.set("options",BG(n.options)),!0))}exportProps(){return $a(null,{options:this.props.get("options")})}};const oge=_r("pop");let Q4e=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(oge()),n.viewProps.bindClassModifiers(this.element),xh(n.shows,nw(this.element,oge(void 0,"v")))}},kwe=class{constructor(e,n){this.shows=wi(!1),this.viewProps=n.viewProps,this.view=new Q4e(e,{shows:this.shows,viewProps:this.viewProps})}};const sge=_r("txt");let J4e=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(sge()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(sge("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}},uP=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new J4e(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,o=this.parser_(r);oi(o)||(this.value.rawValue=o),this.view.refresh()}};function eje(t){return String(t)}function Twe(t){return t==="false"?!1:!!t}function age(t){return eje(t)}function tje(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const nje=ya(0);function L3(t){return nje(t)+"%"}function Mwe(t){return String(t)}function XH(t){return t}function ow({primary:t,secondary:e,forward:n,backward:r}){let o=!1;function u(h){o||(o=!0,h(),o=!1)}t.emitter.on("change",h=>{u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),h.options)})}),e.emitter.on("change",h=>{u(()=>{t.setRawValue(r(t.rawValue,e.rawValue),h.options)}),u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),h.options)})}),u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function pa(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function cP(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function Ih(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function rje(t){return t==="ArrowUp"||t==="ArrowDown"}function Awe(t){return rje(t)||t==="ArrowLeft"||t==="ArrowRight"}function d8(t,e){var n,r;const o=e.ownerDocument.defaultView,u=e.getBoundingClientRect();return{x:t.pageX-(((n=o&&o.scrollX)!==null&&n!==void 0?n:0)+u.left),y:t.pageY-(((r=o&&o.scrollY)!==null&&r!==void 0?r:0)+u.top)}}let Xg=class{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new co,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(d8(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(d8(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(d8(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,o=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-o.left,y:r.clientY-o.top}:void 0),sender:this,shiftKey:e.shiftKey})}};const Cl=_r("txt");let ije=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Cl(),Cl(void 0,"num")),n.arrayPosition&&this.element.classList.add(Cl(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(Cl("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Cl()),this.inputElement.classList.add(Cl("i"));const o=e.createElement("div");o.classList.add(Cl("k")),this.element.appendChild(o),this.knobElement=o;const u=e.createElementNS(Uc,"svg");u.classList.add(Cl("g")),this.knobElement.appendChild(u);const h=e.createElementNS(Uc,"path");h.classList.add(Cl("gb")),u.appendChild(h),this.guideBodyElem_=h;const m=e.createElementNS(Uc,"path");m.classList.add(Cl("gh")),u.appendChild(m),this.guideHeadElem_=m;const _=e.createElement("div");_.classList.add(_r("tt")()),this.knobElement.appendChild(_),this.tooltipElem_=_,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Cl(void 0,"drg"));return}this.element.classList.add(Cl(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),o=go(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+o},0 L${r},4 L${r+o},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const u=this.props_.get("formatter");this.tooltipElem_.textContent=u(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}},DP=class{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=wi(null),this.view=new ije(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const o=new Xg(this.view.knobElement);o.emitter.on("down",this.onPointerDown_),o.emitter.on("move",this.onPointerMove_),o.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const o=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),u=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let h=e;return o!==void 0&&(h=Math.max(h,o)),u!==void 0&&(h=Math.min(h,u)),h}onInputChange_(e){const r=e.currentTarget.value,o=this.parser_(r);oi(o)||(this.value.rawValue=this.constrainValue_(o)),this.view.refresh()}onInputKeyDown_(e){const n=pa(this.props.get("keyScale"),cP(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){pa(this.props.get("keyScale"),cP(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}};const h8=_r("sld");let oje=class{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(h8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(h8("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const o=e.createElement("div");o.classList.add(h8("k")),this.trackElement.appendChild(o),this.knobElement=o,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=go(Rr(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}},sje=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new oje(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Xg(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(Rr(go(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=pa(this.props.get("keyScale"),Ih(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){pa(this.props.get("keyScale"),Ih(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const p8=_r("sldtxt");let aje=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(p8());const r=e.createElement("div");r.classList.add(p8("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(p8("t")),this.textView_=n.textView,o.appendChild(this.textView_.element),this.element.appendChild(o)}},N3=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new sje(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new DP(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new aje(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Ga(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return $a(null,{max:e.get("max"),min:e.get("min")})}};function Iwe(t){return{sliderProps:new or({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new or({formatter:wi(t.formatter),keyScale:t.keyScale,pointerScale:wi(t.pointerScale)})}}const lje={containerUnitSize:"cnt-usz"};function Rwe(t){return`--${lje[t]}`}function dP(t){return hwe(t)}function Lf(t){if(GH(t))return Di(t,dP)}function yh(t,e){if(!t)return;const n=[],r=uwe(t,e);r&&n.push(r);const o=cwe(t);return o&&n.push(o),new IP(n)}function uje(t){return t?t.major===rw.major:!1}function Owe(t){if(t==="inline"||t==="popup")return t}function LP(t,e){t.write(e)}const RD=_r("ckb");let cje=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(RD()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(RD("l")),this.element.appendChild(r);const o=e.createElement("input");o.classList.add(RD("i")),o.type="checkbox",r.appendChild(o),this.inputElement=o,n.viewProps.bindDisabled(this.inputElement);const u=e.createElement("div");u.classList.add(RD("w")),r.appendChild(u);const h=gL(e,"check");u.appendChild(h),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}},dje=class{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new cje(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}};function hje(t){const e=[],n=UG(t.options);return n&&e.push(n),new IP(e)}const pje=Xs({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Di(e,r=>({options:r.optional.custom(OP),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Twe,constraint:t=>hje(t.params),writer:t=>LP},controller:t=>{const e=t.document,n=t.value,r=t.constraint,o=r&&D3(r,RP);return o?new em(e,{props:new or({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new dje(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof em?new FG(t.controller):null}}),og=_r("col");let fje=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(og()),n.foldable.bindExpandedClass(this.element,og(void 0,"expanded")),Wc(n.foldable,"completed",nw(this.element,og(void 0,"cpl")));const r=e.createElement("div");r.classList.add(og("h")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(og("s")),r.appendChild(o),this.swatchElement=o;const u=e.createElement("div");if(u.classList.add(og("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const h=e.createElement("div");h.classList.add(og("p")),this.element.appendChild(h),this.pickerElement=h}else this.pickerElement=null}};function mje(t,e,n){const r=go(t/255,0,1),o=go(e/255,0,1),u=go(n/255,0,1),h=Math.max(r,o,u),m=Math.min(r,o,u),_=h-m;let x=0,M=0;const R=(m+h)/2;return _!==0&&(M=_/(1-Math.abs(h+m-1)),r===h?x=(o-u)/_:o===h?x=2+(u-r)/_:x=4+(r-o)/_,x=x/6+(x<0?1:0)),[x*360,M*100,R*100]}function vje(t,e,n){const r=(t%360+360)%360,o=go(e/100,0,1),u=go(n/100,0,1),h=(1-Math.abs(2*u-1))*o,m=h*(1-Math.abs(r/60%2-1)),_=u-h/2;let x,M,R;return r>=0&&r<60?[x,M,R]=[h,m,0]:r>=60&&r<120?[x,M,R]=[m,h,0]:r>=120&&r<180?[x,M,R]=[0,h,m]:r>=180&&r<240?[x,M,R]=[0,m,h]:r>=240&&r<300?[x,M,R]=[m,0,h]:[x,M,R]=[h,0,m],[(x+_)*255,(M+_)*255,(R+_)*255]}function gje(t,e,n){const r=go(t/255,0,1),o=go(e/255,0,1),u=go(n/255,0,1),h=Math.max(r,o,u),m=Math.min(r,o,u),_=h-m;let x;_===0?x=0:h===r?x=60*(((o-u)/_%6+6)%6):h===o?x=60*((u-r)/_+2):x=60*((r-o)/_+4);const M=h===0?0:_/h,R=h;return[x,M*100,R*100]}function Dwe(t,e,n){const r=swe(t,360),o=go(e/100,0,1),u=go(n/100,0,1),h=u*o,m=h*(1-Math.abs(r/60%2-1)),_=u-h;let x,M,R;return r>=0&&r<60?[x,M,R]=[h,m,0]:r>=60&&r<120?[x,M,R]=[m,h,0]:r>=120&&r<180?[x,M,R]=[0,h,m]:r>=180&&r<240?[x,M,R]=[0,m,h]:r>=240&&r<300?[x,M,R]=[m,0,h]:[x,M,R]=[h,0,m],[(x+_)*255,(M+_)*255,(R+_)*255]}function yje(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function bje(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function Kc(t){return[t[0],t[1],t[2]]}function bL(t,e){return[t[0],t[1],t[2],e]}const _je={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:yje,rgb:vje},hsv:{hsl:bje,hsv:(t,e,n)=>[t,e,n],rgb:Dwe},rgb:{hsl:mje,hsv:gje,rgb:(t,e,n)=>[t,e,n]}};function K_(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function wje(t,e){return t===e?e:swe(t,e)}function Lwe(t,e,n){var r;const o=K_(e,n);return[e==="rgb"?go(t[0],0,o[0]):wje(t[0],o[0]),go(t[1],0,o[1]),go(t[2],0,o[2]),go((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function lge(t,e,n,r){const o=K_(e,n),u=K_(e,r);return t.map((h,m)=>h/o[m]*u[m])}function Nwe(t,e,n){const r=lge(t,e.mode,e.type,"int"),o=_je[e.mode][n.mode](...r);return lge(o,n.mode,"int",n.type)}let Or=class Fwe{static black(){return new Fwe([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=Lwe(e,n,this.type)}getComponents(e){return bL(Nwe(Kc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const yf=_r("colp");let xje=class{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(yf()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(yf("hsv"));const o=e.createElement("div");o.classList.add(yf("sv")),this.svPaletteView_=n.svPaletteView,o.appendChild(this.svPaletteView_.element),r.appendChild(o);const u=e.createElement("div");u.classList.add(yf("h")),this.hPaletteView_=n.hPaletteView,u.appendChild(this.hPaletteView_.element),r.appendChild(u),this.element.appendChild(r);const h=e.createElement("div");if(h.classList.add(yf("rgb")),this.textsView_=n.textsView,h.appendChild(this.textsView_.element),this.element.appendChild(h),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const m=e.createElement("div");m.classList.add(yf("a"));const _=e.createElement("div");_.classList.add(yf("ap")),_.appendChild(this.alphaViews_.palette.element),m.appendChild(_);const x=e.createElement("div");x.classList.add(yf("at")),x.appendChild(this.alphaViews_.text.element),m.appendChild(x),this.element.appendChild(m)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}};function Sje(t){return t==="int"?"int":t==="float"?"float":void 0}function VG(t){return Di(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(Sje)}),expanded:e.optional.boolean,picker:e.optional.custom(Owe),readonly:e.optional.constant(!1)}))}function Ug(t){return t?.1:1}function Bwe(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}let jG=class{constructor(e,n){this.type="float",this.mode=n,this.comps_=Lwe(e,n,this.type)}getComponents(e){return bL(Nwe(Kc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}};const Eje={int:(t,e)=>new Or(t,e),float:(t,e)=>new jG(t,e)};function zG(t,e,n){return Eje[n](t,e)}function Cje(t){return t.type==="float"}function Pje(t){return t.type==="int"}function kje(t){const e=t.getComponents(),n=K_(t.mode,"int");return new Or([Math.round(Rr(e[0],0,1,0,n[0])),Math.round(Rr(e[1],0,1,0,n[1])),Math.round(Rr(e[2],0,1,0,n[2])),e[3]],t.mode)}function Tje(t){const e=t.getComponents(),n=K_(t.mode,"int");return new jG([Rr(e[0],0,n[0],0,1),Rr(e[1],0,n[1],0,1),Rr(e[2],0,n[2],0,1),e[3]],t.mode)}function Gs(t,e){if(t.type===e)return t;if(Pje(t)&&e==="float")return Tje(t);if(Cje(t)&&e==="int")return kje(t);throw bs.shouldNeverHappen()}function Mje(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function Ll(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const Aje={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function Uwe(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return Aje[r](n)}function Vwe(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ll(e[1],255),Ll(e[2],255),Ll(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Ije(t){const e=Vwe(t);return e?new Or(e,"rgb"):null}function jwe(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Ll(e[1],255),Ll(e[2],255),Ll(e[3],255),Ll(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Rje(t){const e=jwe(t);return e?new Or(e,"rgb"):null}function zwe(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Uwe(e[1]),Ll(e[2],100),Ll(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Oje(t){const e=zwe(t);return e?new Or(e,"hsl"):null}function Hwe(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Uwe(e[1]),Ll(e[2],100),Ll(e[3],100),Ll(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Dje(t){const e=Hwe(t);return e?new Or(e,"hsl"):null}function Gwe(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function Lje(t){const e=Gwe(t);return e?new Or(e,"rgb"):null}function $we(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Rr(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Rr(parseInt(n[4],16),0,255,0,1)]:null}function Nje(t){const e=$we(t);return e?new Or(e,"rgb"):null}function Wwe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function uge(t){return e=>{const n=Wwe(e);return n?zG(n,"rgb",t):null}}function Kwe(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function cge(t){return e=>{const n=Kwe(e);return n?zG(n,"rgb",t):null}}const Fje=[{parser:Gwe,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:$we,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:Vwe,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:jwe,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:zwe,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:Hwe,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:Wwe,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:Kwe,result:{alpha:!0,mode:"rgb",notation:"object"}}];function Bje(t){return Fje.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function Uje(t,e="int"){const n=Bje(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function NP(t){const e=[Lje,Nje,Ije,Rje,Oje,Dje];t==="int"&&e.push(uge("int"),cge("int")),t==="float"&&e.push(uge("float"),cge("float"));const n=tje(e);return r=>{const o=n(r);return o?Gs(o,t):null}}function Vje(t){const e=NP("int");if(typeof t!="string")return Or.black();const n=e(t);return n??Or.black()}function qwe(t){const e=go(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function HG(t,e="#"){const n=Kc(t.getComponents("rgb")).map(qwe).join("");return`${e}${n}`}function GG(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(qwe).join("");return`${e}${r}`}function Xwe(t){const e=ya(0),n=Gs(t,"int");return`rgb(${Kc(n.getComponents("rgb")).map(o=>e(o)).join(", ")})`}function ZD(t){const e=ya(2),n=ya(0);return`rgba(${Gs(t,"int").getComponents("rgb").map((u,h)=>(h===3?e:n)(u)).join(", ")})`}function jje(t){const e=[ya(0),L3,L3],n=Gs(t,"int");return`hsl(${Kc(n.getComponents("hsl")).map((o,u)=>e[u](o)).join(", ")})`}function zje(t){const e=[ya(0),L3,L3,ya(2)];return`hsla(${Gs(t,"int").getComponents("hsl").map((o,u)=>e[u](o)).join(", ")})`}function Ywe(t,e){const n=ya(e==="float"?2:0),r=["r","g","b"],o=Gs(t,e);return`{${Kc(o.getComponents("rgb")).map((h,m)=>`${r[m]}: ${n(h)}`).join(", ")}}`}function Hje(t){return e=>Ywe(e,t)}function Zwe(t,e){const n=ya(2),r=ya(e==="float"?2:0),o=["r","g","b","a"];return`{${Gs(t,e).getComponents("rgb").map((m,_)=>{const x=_===3?n:r;return`${o[_]}: ${x(m)}`}).join(", ")}}`}function Gje(t){return e=>Zwe(e,t)}const $je=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:HG},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:GG},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:Xwe},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:ZD},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:jje},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:zje},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:Hje(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:Gje(e)}],[])];function Qwe(t){return $je.reduce((e,n)=>e||(Mje(n.format,t)?n.stringifier:null),null)}const uC=_r("apl");let Wje=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(uC()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(uC("b")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(uC("c")),r.appendChild(o),this.colorElem_=o;const u=e.createElement("div");u.classList.add(uC("m")),this.element.appendChild(u),this.markerElem_=u;const h=e.createElement("div");h.classList.add(uC("p")),this.markerElem_.appendChild(h),this.previewElem_=h,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Or([n[0],n[1],n[2],0],"rgb"),o=new Or([n[0],n[1],n[2],255],"rgb"),u=["to right",ZD(r),ZD(o)];this.colorElem_.style.background=`linear-gradient(${u.join(",")})`,this.previewElem_.style.backgroundColor=ZD(e);const h=Rr(n[3],0,1,0,100);this.markerElem_.style.left=`${h}%`}onValueChange_(){this.update_()}},Kje=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new Wje(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Xg(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,o=this.value.rawValue,[u,h,m]=o.getComponents("hsv");this.value.setRawValue(new Or([u,h,m,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=pa(Ug(!0),Ih(e));if(n===0)return;const r=this.value.rawValue,[o,u,h,m]=r.getComponents("hsv");this.value.setRawValue(new Or([o,u,h,m+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){pa(Ug(!0),Ih(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const e_=_r("coltxt");function qje(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,o)=>{const u=t.createElement("option");return u.textContent=o.text,u.value=o.value,r.appendChild(u),r},t.createDocumentFragment())),e}let Xje=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(e_()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(e_("m")),this.modeElem_=qje(e),this.modeElem_.classList.add(e_("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const o=e.createElement("div");o.classList.add(e_("mm")),o.appendChild(gL(e,"dropdown")),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");u.classList.add(e_("w")),this.element.appendChild(u),this.inputsElem_=u,this.inputViews_=n.inputViews,this.applyInputViews_(),xh(n.mode,h=>{this.modeElem_.value=h})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){mwe(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(e_("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}};function Yje(t){return ya(t==="float"?2:0)}function Zje(t,e,n){const r=K_(t,e)[n];return new MP({min:0,max:r})}function Qje(t,e,n){return new DP(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:or.fromObject({formatter:Yje(e.colorType),keyScale:Ug(!1),pointerScale:e.colorType==="float"?.01:1}),value:wi(0,{constraint:Zje(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function Jje(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:Ah,viewProps:e.viewProps};return[0,1,2].map(r=>{const o=Qje(t,n,r);return ow({primary:e.value,secondary:o.value,forward(u){return Gs(u,e.colorType).getComponents(e.colorMode)[r]},backward(u,h){const m=e.colorMode,x=Gs(u,e.colorType).getComponents(m);x[r]=h;const M=zG(bL(Kc(x),x[3]),m,e.colorType);return Gs(M,"int")}}),o})}function eze(t,e){const n=new uP(t,{parser:NP("int"),props:or.fromObject({formatter:HG}),value:wi(Or.black()),viewProps:e.viewProps});return ow({primary:e.value,secondary:n.value,forward:r=>new Or(Kc(r.getComponents()),r.mode),backward:(r,o)=>new Or(bL(Kc(o.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function tze(t){return t!=="hex"}let nze=class{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=wi(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new Xje(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return tze(n)?Jje(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):eze(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}};const f8=_r("hpl");let rze=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(f8()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(f8("c")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(f8("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=Xwe(new Or([n,100,100],"hsv"));const r=Rr(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}},ize=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new rze(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Xg(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Rr(go(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),o=this.value.rawValue,[,u,h,m]=o.getComponents("hsv");this.value.setRawValue(new Or([r,u,h,m],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=pa(Ug(!1),Ih(e));if(n===0)return;const r=this.value.rawValue,[o,u,h,m]=r.getComponents("hsv");this.value.setRawValue(new Or([o+n,u,h,m],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){pa(Ug(!1),Ih(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}};const m8=_r("svp"),dge=64;let oze=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(m8()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=dge,r.width=dge,r.classList.add(m8("c")),this.element.appendChild(r),this.canvasElement=r;const o=e.createElement("div");o.classList.add(m8("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}update_(){const e=s4e(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),o=this.canvasElement.width,u=this.canvasElement.height,h=e.getImageData(0,0,o,u),m=h.data;for(let M=0;M<u;M++)for(let R=0;R<o;R++){const N=Rr(R,0,o,0,100),H=Rr(M,0,u,100,0),Q=Dwe(r[0],N,H),j=(M*o+R)*4;m[j]=Q[0],m[j+1]=Q[1],m[j+2]=Q[2],m[j+3]=255}e.putImageData(h,0,0);const _=Rr(r[1],0,100,0,100);this.markerElem_.style.left=`${_}%`;const x=Rr(r[2],0,100,100,0);this.markerElem_.style.top=`${x}%`}onValueChange_(){this.update_()}},sze=class{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new oze(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Xg(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Rr(e.point.x,0,e.bounds.width,0,100),o=Rr(e.point.y,0,e.bounds.height,100,0),[u,,,h]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Or([u,r,o,h],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){Awe(e.key)&&e.preventDefault();const[n,r,o,u]=this.value.rawValue.getComponents("hsv"),h=Ug(!1),m=pa(h,Ih(e)),_=pa(h,cP(e));m===0&&_===0||this.value.setRawValue(new Or([n,r+m,o+_,u],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=Ug(!1),r=pa(n,Ih(e)),o=pa(n,cP(e));r===0&&o===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},aze=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new ize(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new sze(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new Kje(e,{value:this.value,viewProps:this.viewProps}),text:new DP(e,{parser:Ah,props:or.fromObject({pointerScale:.01,keyScale:.1,formatter:ya(2)}),value:wi(0,{constraint:new MP({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&ow({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,o)=>{const u=r.getComponents();return u[3]=o,new Or(u,r.mode)}}),this.textsC_=new nze(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new xje(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}};const v8=_r("colsw");let lze=class{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(v8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(v8("sw")),this.element.appendChild(r),this.swatchElem_=r;const o=e.createElement("button");o.classList.add(v8("b")),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=GG(e)}onValueChange_(){this.update_()}},uze=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new lze(e,{value:this.value,viewProps:this.viewProps})}},$G=class{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=LG.create(n.expanded),this.swatchC_=new uze(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new uP(e,{parser:n.parser,props:or.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new fje(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new kwe(e,{viewProps:this.viewProps}):null;const o=new aze(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(o.view.element),ow({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,h)=>h})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),NG(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=vwe(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!MG(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}};function cze(t){return Kc(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function dze(t){return t.getComponents("rgb").reduce((e,n,r)=>{const o=Math.floor(r===3?n*255:n)&255;return e<<8|o},0)>>>0}function hze(t){return new Or([t>>16&255,t>>8&255,t&255],"rgb")}function pze(t){return new Or([t>>24&255,t>>16&255,t>>8&255,Rr(t&255,0,255,0,1)],"rgb")}function fze(t){return typeof t!="number"?Or.black():hze(t)}function mze(t){return typeof t!="number"?Or.black():pze(t)}function QD(t,e){return typeof t!="object"||oi(t)?!1:e in t&&typeof t[e]=="number"}function Jwe(t){return QD(t,"r")&&QD(t,"g")&&QD(t,"b")}function e1e(t){return Jwe(t)&&QD(t,"a")}function t1e(t){return Jwe(t)}function WG(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0}function hge(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function vze(t){const e=Qwe(t);return e?(n,r)=>{LP(n,e(r))}:null}function gze(t){const e=t?dze:cze;return(n,r)=>{LP(n,e(r))}}function yze(t,e,n){const o=Gs(e,n).toRgbaObject();t.writeProperty("r",o.r),t.writeProperty("g",o.g),t.writeProperty("b",o.b),t.writeProperty("a",o.a)}function bze(t,e,n){const o=Gs(e,n).toRgbaObject();t.writeProperty("r",o.r),t.writeProperty("g",o.g),t.writeProperty("b",o.b)}function _ze(t,e){return(n,r)=>{t?yze(n,r,e):bze(n,r,e)}}function wze(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function xze(t){return t?e=>GG(e,"0x"):e=>HG(e,"0x")}function Sze(t){return"color"in t||t.view==="color"}const Eze=Xs({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!Sze(e))return null;const n=VG(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:wze(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?mze:fze,equals:WG,writer:t=>gze(t.params.supportsAlpha)},controller:t=>{var e,n;return new $G(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:xze(t.params.supportsAlpha),parser:NP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function Cze(t,e){if(!t1e(t))return Gs(Or.black(),e);if(e==="int"){const n=hge(t);return new Or(n,"rgb")}if(e==="float"){const n=hge(t);return new jG(n,"rgb")}return Gs(Or.black(),"int")}function Pze(t){return e1e(t)}function kze(t){return e=>{const n=Cze(e,t);return Gs(n,"int")}}function Tze(t,e){return n=>t?Zwe(n,e):Ywe(n,e)}const Mze=Xs({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!t1e(t))return null;const r=VG(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=Bwe(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>kze(t.params.colorType),equals:WG,writer:t=>_ze(Pze(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=e1e(t.initialValue);return new $G(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:Tze(r,t.params.colorType),parser:NP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}}),Aze=Xs({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=Uje(t,Bwe(e));if(!n)return null;const r=Qwe(n);if(!r)return null;const o=VG(e);return o?{initialValue:t,params:Object.assign(Object.assign({},o),{format:n,stringifier:r})}:null},binding:{reader:()=>Vje,equals:WG,writer:t=>{const e=vze(t.params.format);if(!e)throw bs.notBindable();return e}},controller:t=>{var e,n;return new $G(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:NP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});let KG=class{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,o)=>{var u,h;return(h=(u=this.components[o])===null||u===void 0?void 0:u.constrain(r))!==null&&h!==void 0?h:r});return this.asm_.fromComponents(n)}};const pge=_r("pndtxt");let Ize=class{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(pge()),this.textViews.forEach(r=>{const o=e.createElement("div");o.classList.add(pge("a")),o.appendChild(r.element),this.element.appendChild(o)})}};function Rze(t,e,n){return new DP(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:wi(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}let qG=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,o)=>Rze(e,n,o)),this.acs_.forEach((r,o)=>{ow({primary:this.value,secondary:r.value,forward:u=>n.assembly.toComponents(u)[o],backward:(u,h)=>{const m=n.assembly.toComponents(u);return m[o]=h,n.assembly.fromComponents(m)}})}),this.view=new Ize(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}},Oze=class extends lP{get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}};function Dze(t,e){const n=[],r=uwe(t,e);r&&n.push(r);const o=cwe(t);o&&n.push(o);const u=UG(t.options);return u&&n.push(u),new IP(n)}const Lze=Xs({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=Di(e,r=>Object.assign(Object.assign({},hwe(r)),{options:r.optional.custom(OP),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>owe,constraint:t=>Dze(t.params,t.initialValue),writer:t=>LP},controller:t=>{const e=t.value,n=t.constraint,r=n&&D3(n,RP);if(r)return new em(t.document,{props:new or({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const o=dwe(t.params,e.rawValue),u=n&&D3(n,MP);return u?new N3(t.document,Object.assign(Object.assign({},Iwe(Object.assign(Object.assign({},o),{keyScale:wi(o.keyScale),max:u.values.value("max"),min:u.values.value("min")}))),{parser:Ah,value:e,viewProps:t.viewProps})):new DP(t.document,{parser:Ah,props:or.fromObject(o),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof N3?new Oze(t.controller):t.controller.valueController instanceof em?new FG(t.controller):null}});let qf=class{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(oi(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}};const n1e={toComponents:t=>t.getComponents(),fromComponents:t=>new qf(...t)},t_=_r("p2d");let Nze=class{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(t_()),n.viewProps.bindClassModifiers(this.element),xh(n.expanded,nw(this.element,t_(void 0,"expanded")));const r=e.createElement("div");r.classList.add(t_("h")),this.element.appendChild(r);const o=e.createElement("button");o.classList.add(t_("b")),o.appendChild(gL(e,"p2dpad")),n.viewProps.bindDisabled(o),r.appendChild(o),this.buttonElement=o;const u=e.createElement("div");if(u.classList.add(t_("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const h=e.createElement("div");h.classList.add(t_("p")),this.element.appendChild(h),this.pickerElement=h}else this.pickerElement=null}};const bf=_r("p2dp");let Fze=class{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(bf()),n.layout==="popup"&&this.element.classList.add(bf(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(bf("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const o=e.createElementNS(Uc,"svg");o.classList.add(bf("g")),this.padElement.appendChild(o),this.svgElem_=o;const u=e.createElementNS(Uc,"line");u.classList.add(bf("ax")),u.setAttributeNS(null,"x1","0"),u.setAttributeNS(null,"y1","50%"),u.setAttributeNS(null,"x2","100%"),u.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(u);const h=e.createElementNS(Uc,"line");h.classList.add(bf("ax")),h.setAttributeNS(null,"x1","50%"),h.setAttributeNS(null,"y1","0"),h.setAttributeNS(null,"x2","50%"),h.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(h);const m=e.createElementNS(Uc,"line");m.classList.add(bf("l")),m.setAttributeNS(null,"x1","50%"),m.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(m),this.lineElem_=m;const _=e.createElement("div");_.classList.add(bf("m")),this.padElement.appendChild(_),this.markerElem_=_,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),o=Rr(e,-r,+r,0,100),u=Rr(n,-r,+r,0,100),h=this.props_.get("invertsY")?100-u:u;this.lineElem_.setAttributeNS(null,"x2",`${o}%`),this.lineElem_.setAttributeNS(null,"y2",`${h}%`),this.markerElem_.style.left=`${o}%`,this.markerElem_.style.top=`${h}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}};function fge(t,e,n){return[pa(e[0],Ih(t)),pa(e[1],cP(t))*(n?1:-1)]}let Bze=class{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new Fze(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Xg(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),o=Rr(e.point.x,0,e.bounds.width,-r,+r),u=Rr(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new qf(o,u),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){Awe(e.key)&&e.preventDefault();const[n,r]=fge(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new qf(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=fge(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}},Uze=class{constructor(e,n){var r,o;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=LG.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new kwe(e,{viewProps:this.viewProps}):null;const u=new Bze(e,{layout:n.pickerLayout,props:new or({invertsY:wi(n.invertsY),max:wi(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});u.view.allFocusableElements.forEach(h=>{h.addEventListener("blur",this.onPopupChildBlur_),h.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=u,this.textC_=new qG(e,{assembly:n1e,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new Nze(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(o=this.view.buttonElement)===null||o===void 0||o.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),ow({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:h=>h,backward:(h,m)=>m})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),NG(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=vwe(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!MG(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}};function Vze(t){return qf.isObject(t)?new qf(t.x,t.y):new qf}function jze(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function zze(t,e){return new KG({assembly:n1e,components:[yh(Object.assign(Object.assign({},t),t.x),e.x),yh(Object.assign(Object.assign({},t),t.y),e.y)]})}function mge(t,e){var n,r;if(!oi(t.min)||!oi(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const o=awe(t);return Math.max(Math.abs(o)*10,Math.abs(e)*10)}function Hze(t,e){var n,r;const o=mge(Fg(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),u=mge(Fg(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(o,u)}function Gze(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}const $ze=Xs({id:"input-point2d",type:"input",accept:(t,e)=>{if(!qf.isObject(t))return null;const n=Di(e,r=>Object.assign(Object.assign({},dP(r)),{expanded:r.optional.boolean,picker:r.optional.custom(Owe),readonly:r.optional.constant(!1),x:r.optional.custom(Lf),y:r.optional.object(Object.assign(Object.assign({},dP(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>Vze,constraint:t=>zze(t.params,t.initialValue),equals:qf.equals,writer:()=>jze},controller:t=>{var e,n;const r=t.document,o=t.value,u=t.constraint,h=[t.params.x,t.params.y];return new Uze(r,{axes:o.rawValue.getComponents().map((m,_)=>{var x;return TG({constraint:u.components[_],initialValue:m,params:Fg(t.params,(x=h[_])!==null&&x!==void 0?x:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:Gze(t.params),max:Hze(t.params,o.rawValue),parser:Ah,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:o,viewProps:t.viewProps})}});let R_=class{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(oi(e))return!1;const n=e.x,r=e.y,o=e.z;return!(typeof n!="number"||typeof r!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}};const r1e={toComponents:t=>t.getComponents(),fromComponents:t=>new R_(...t)};function Wze(t){return R_.isObject(t)?new R_(t.x,t.y,t.z):new R_}function Kze(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function qze(t,e){return new KG({assembly:r1e,components:[yh(Object.assign(Object.assign({},t),t.x),e.x),yh(Object.assign(Object.assign({},t),t.y),e.y),yh(Object.assign(Object.assign({},t),t.z),e.z)]})}const Xze=Xs({id:"input-point3d",type:"input",accept:(t,e)=>{if(!R_.isObject(t))return null;const n=Di(e,r=>Object.assign(Object.assign({},dP(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Lf),y:r.optional.custom(Lf),z:r.optional.custom(Lf)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Wze,constraint:t=>qze(t.params,t.initialValue),equals:R_.equals,writer:t=>Kze},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new qG(t.document,{assembly:r1e,axes:e.rawValue.getComponents().map((o,u)=>{var h;return TG({constraint:n.components[u],initialValue:o,params:Fg(t.params,(h=r[u])!==null&&h!==void 0?h:{})})}),parser:Ah,value:e,viewProps:t.viewProps})}});let O_=class{constructor(e=0,n=0,r=0,o=0){this.x=e,this.y=n,this.z=r,this.w=o}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(oi(e))return!1;const n=e.x,r=e.y,o=e.z,u=e.w;return!(typeof n!="number"||typeof r!="number"||typeof o!="number"||typeof u!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}};const i1e={toComponents:t=>t.getComponents(),fromComponents:t=>new O_(...t)};function Yze(t){return O_.isObject(t)?new O_(t.x,t.y,t.z,t.w):new O_}function Zze(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function Qze(t,e){return new KG({assembly:i1e,components:[yh(Object.assign(Object.assign({},t),t.x),e.x),yh(Object.assign(Object.assign({},t),t.y),e.y),yh(Object.assign(Object.assign({},t),t.z),e.z),yh(Object.assign(Object.assign({},t),t.w),e.w)]})}const Jze=Xs({id:"input-point4d",type:"input",accept:(t,e)=>{if(!O_.isObject(t))return null;const n=Di(e,r=>Object.assign(Object.assign({},dP(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Lf),x:r.optional.custom(Lf),y:r.optional.custom(Lf),z:r.optional.custom(Lf)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Yze,constraint:t=>Qze(t.params,t.initialValue),equals:O_.equals,writer:t=>Zze},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new qG(t.document,{assembly:i1e,axes:e.rawValue.getComponents().map((o,u)=>{var h;return TG({constraint:n.components[u],initialValue:o,params:Fg(t.params,(h=r[u])!==null&&h!==void 0?h:{})})}),parser:Ah,value:e,viewProps:t.viewProps})}});function e6e(t){const e=[],n=UG(t.options);return n&&e.push(n),new IP(e)}const t6e=Xs({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=Di(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(OP)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Mwe,constraint:t=>e6e(t.params),writer:t=>LP},controller:t=>{const e=t.document,n=t.value,r=t.constraint,o=r&&D3(r,RP);return o?new em(e,{props:new or({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new uP(e,{parser:u=>u,props:or.fromObject({formatter:XH}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof em?new FG(t.controller):null}}),FP={monitor:{defaultInterval:200,defaultRows:3}},vge=_r("mll");let n6e=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(vge()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(vge("i")),r.style.height=`calc(var(${Rwe("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(o=>{o!==void 0&&r.push(this.formatter_(o))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}},XG=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new n6e(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}};const gge=_r("sgl");let r6e=class{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(gge()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(gge("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}},YG=class{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new r6e(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}};const i6e=Xs({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=Di(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Twe},controller:t=>{var e;return t.value.rawValue.length===1?new YG(t.document,{formatter:age,value:t.value,viewProps:t.viewProps}):new XG(t.document,{formatter:age,rows:(e=t.params.rows)!==null&&e!==void 0?e:FP.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});let o6e=class extends lP{get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}};const _f=_r("grl");let s6e=class{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(_f()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(Uc,"svg");r.classList.add(_f("g")),r.style.height=`calc(var(${Rwe("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const o=e.createElementNS(Uc,"polyline");this.svgElem_.appendChild(o),this.lineElem_=o;const u=e.createElement("div");u.classList.add(_f("t"),_r("tt")()),this.element.appendChild(u),this.tooltipElem_=u,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),o=this.props_.get("max"),u=[];this.value.rawValue.forEach((M,R)=>{if(M===void 0)return;const N=Rr(R,0,n,0,e.width),H=Rr(M,r,o,e.height,0);u.push([N,H].join(","))}),this.lineElem_.setAttributeNS(null,"points",u.join(" "));const h=this.tooltipElem_,m=this.value.rawValue[this.cursor_.rawValue];if(m===void 0){h.classList.remove(_f("t","a"));return}const _=Rr(this.cursor_.rawValue,0,n,0,e.width),x=Rr(m,r,o,e.height,0);h.style.left=`${_}px`,h.style.top=`${x}px`,h.textContent=`${this.formatter_(m)}`,h.classList.contains(_f("t","a"))||(h.classList.add(_f("t","a"),_f("t","in")),O3(h),h.classList.remove(_f("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}},o1e=class{constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=wi(-1),this.view=new s6e(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!MG(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Xg(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Ga(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return $a(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Rr(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Rr(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}};function YH(t){return oi(t.format)?ya(2):t.format}function a6e(t){var e;return t.value.rawValue.length===1?new YG(t.document,{formatter:YH(t.params),value:t.value,viewProps:t.viewProps}):new XG(t.document,{formatter:YH(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:FP.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function l6e(t){var e,n,r;return new o1e(t.document,{formatter:YH(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:FP.monitor.defaultRows,props:or.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function yge(t){return t.view==="graph"}const u6e=Xs({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=Di(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>yge(t)?64:1,reader:t=>owe},controller:t=>yge(t.params)?l6e(t):a6e(t),api:t=>t.controller.valueController instanceof o1e?new o6e(t.controller):null}),c6e=Xs({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=Di(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Mwe},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new XG(t.document,{formatter:XH,rows:(e=t.params.rows)!==null&&e!==void 0?e:FP.monitor.defaultRows,value:n,viewProps:t.viewProps}):new YG(t.document,{formatter:XH,value:n,viewProps:t.viewProps})}});class d6e{constructor(){this.map_=new Map}get(e){var n;return(n=this.map_.get(e))!==null&&n!==void 0?n:null}has(e){return this.map_.has(e)}add(e,n){return this.map_.set(e,n),e.viewProps.handleDispose(()=>{this.map_.delete(e)}),n}}class h6e{constructor(e){this.target=e.target,this.reader_=e.reader,this.writer_=e.writer}read(){return this.reader_(this.target.read())}write(e){this.writer_(this.target,e)}inject(e){this.write(this.reader_(e))}}function p6e(t,e){var n;const r=t.accept(e.target.read(),e.params);if(oi(r))return null;const o={target:e.target,initialValue:r.initialValue,params:r.params},u=Di(e.params,R=>({disabled:R.optional.boolean,hidden:R.optional.boolean,label:R.optional.string,tag:R.optional.string})),h=t.binding.reader(o),m=t.binding.constraint?t.binding.constraint(o):void 0,_=new h6e({reader:h,target:e.target,writer:t.binding.writer(o)}),x=new QVe(wi(h(r.initialValue),{constraint:m,equals:t.binding.equals}),_),M=t.controller({constraint:m,document:e.document,initialValue:r.initialValue,params:r.params,value:x,viewProps:qg.create({disabled:u==null?void 0:u.disabled,hidden:u==null?void 0:u.hidden})});return new p4e(e.document,{blade:iw(),props:or.fromObject({label:"label"in e.params?(n=u==null?void 0:u.label)!==null&&n!==void 0?n:null:e.target.key}),tag:u==null?void 0:u.tag,value:x,valueController:M})}class f6e{constructor(e){this.target=e.target,this.reader_=e.reader}read(){return this.reader_(this.target.read())}}function m6e(t,e){return e===0?new X4e:new Y4e(t,e??FP.monitor.defaultInterval)}function v6e(t,e){var n,r,o;const u=t.accept(e.target.read(),e.params);if(oi(u))return null;const h={target:e.target,initialValue:u.initialValue,params:u.params},m=Di(e.params,N=>({bufferSize:N.optional.number,disabled:N.optional.boolean,hidden:N.optional.boolean,interval:N.optional.number,label:N.optional.string})),_=t.binding.reader(h),x=(r=(n=m==null?void 0:m.bufferSize)!==null&&n!==void 0?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(u.params))!==null&&r!==void 0?r:1,M=new y4e({binding:new f6e({reader:_,target:e.target}),bufferSize:x,ticker:m6e(e.document,m==null?void 0:m.interval)}),R=t.controller({document:e.document,params:u.params,value:M,viewProps:qg.create({disabled:m==null?void 0:m.disabled,hidden:m==null?void 0:m.hidden})});return R.viewProps.bindDisabled(M.ticker),R.viewProps.handleDispose(()=>{M.ticker.dispose()}),new _4e(e.document,{blade:iw(),props:or.fromObject({label:"label"in e.params?(o=m==null?void 0:m.label)!==null&&o!==void 0?o:null:e.target.key}),value:M,valueController:R})}class g6e{constructor(e){this.pluginsMap_={blades:[],inputs:[],monitors:[]},this.apiCache_=e}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(e,n){if(!uje(n.core))throw bs.notCompatible(e,n.id);n.type==="blade"?this.pluginsMap_.blades.unshift(n):n.type==="input"?this.pluginsMap_.inputs.unshift(n):n.type==="monitor"&&this.pluginsMap_.monitors.unshift(n)}createInput_(e,n,r){return this.pluginsMap_.inputs.reduce((o,u)=>o??p6e(u,{document:e,target:n,params:r}),null)}createMonitor_(e,n,r){return this.pluginsMap_.monitors.reduce((o,u)=>o??v6e(u,{document:e,params:r,target:n}),null)}createBinding(e,n,r){const o=n.read();if(oi(o))throw new bs({context:{key:n.key},type:"nomatchingcontroller"});const u=this.createInput_(e,n,r);if(u)return u;const h=this.createMonitor_(e,n,r);if(h)return h;throw new bs({context:{key:n.key},type:"nomatchingcontroller"})}createBlade(e,n){const r=this.pluginsMap_.blades.reduce((o,u)=>o??q4e(u,{document:e,params:n}),null);if(!r)throw new bs({type:"nomatchingview",context:{params:n}});return r}createInputBindingApi_(e){const n=this.pluginsMap_.inputs.reduce((r,o)=>{var u,h;return r||((h=(u=o.api)===null||u===void 0?void 0:u.call(o,{controller:e}))!==null&&h!==void 0?h:null)},null);return this.apiCache_.add(e,n??new lP(e))}createMonitorBindingApi_(e){const n=this.pluginsMap_.monitors.reduce((r,o)=>{var u,h;return r||((h=(u=o.api)===null||u===void 0?void 0:u.call(o,{controller:e}))!==null&&h!==void 0?h:null)},null);return this.apiCache_.add(e,n??new lP(e))}createBindingApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(f4e(e))return this.createInputBindingApi_(e);if(w4e(e))return this.createMonitorBindingApi_(e);throw bs.shouldNeverHappen()}createApi(e){if(this.apiCache_.has(e))return this.apiCache_.get(e);if(h4e(e))return this.createBindingApi(e);const n=this.pluginsMap_.blades.reduce((r,o)=>r??o.api({controller:e,pool:this}),null);if(!n)throw bs.shouldNeverHappen();return this.apiCache_.add(e,n)}}const y6e=new d6e;function b6e(){const t=new g6e(y6e);return[$ze,Xze,Jze,t6e,Lze,Aze,Mze,Eze,pje,i6e,c6e,u6e,P4e,U4e,Pwe].forEach(e=>{t.register("core",e)}),t}class _6e extends Kg{constructor(e){super(e),this.emitter_=new co,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new AP(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}}class w6e extends Kg{}class x6e extends Kg{constructor(e){super(e),this.emitter_=new co,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new AP(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}}class S6e extends Kg{constructor(e){super(e),this.emitter_=new co,this.controller.value.emitter.on("change",n=>{this.emitter_.emit("change",new AP(this,n.rawValue))})}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get formatter(){return this.controller.valueController.props.get("formatter")}set formatter(e){this.controller.valueController.props.set("formatter",e)}get value(){return this.controller.value.rawValue}set value(e){this.controller.value.rawValue=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}}const E6e=function(){return{id:"list",type:"blade",core:rw,accept(t){const e=Di(t,n=>({options:n.required.custom(OP),value:n.required.raw,view:n.required.constant("list"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=new RP(BG(t.params.options)),n=wi(t.params.value,{constraint:e}),r=new em(t.document,{props:new or({options:e.values.value("options")}),value:n,viewProps:t.viewProps});return new Bg(t.document,{blade:t.blade,props:or.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof Bg)||!(t.controller.valueController instanceof em)?null:new _6e(t.controller)}}}();class C6e extends Swe{constructor(e,n){super(e,n)}get element(){return this.controller.view.element}}class P6e extends KH{constructor(e,n){super(e,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})}}const bge=_r("spr");class k6e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(bge()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("hr");r.classList.add(bge("r")),this.element.appendChild(r)}}class _ge extends yL{constructor(e,n){super(Object.assign(Object.assign({},n),{view:new k6e(e,{viewProps:n.viewProps})}))}}const T6e={id:"separator",type:"blade",core:rw,accept(t){const e=Di(t,n=>({view:n.required.constant("separator")}));return e?{params:e}:null},controller(t){return new _ge(t.document,{blade:t.blade,viewProps:t.viewProps})},api(t){return t.controller instanceof _ge?new w6e(t.controller):null}},M6e={id:"slider",type:"blade",core:rw,accept(t){const e=Di(t,n=>({max:n.required.number,min:n.required.number,view:n.required.constant("slider"),format:n.optional.function,label:n.optional.string,value:n.optional.number}));return e?{params:e}:null},controller(t){var e,n;const r=(e=t.params.value)!==null&&e!==void 0?e:0,o=new MP({max:t.params.max,min:t.params.min}),u=wi(r,{constraint:o}),h=new N3(t.document,Object.assign(Object.assign({},Iwe({formatter:(n=t.params.format)!==null&&n!==void 0?n:qVe,keyScale:wi(1),max:o.values.value("max"),min:o.values.value("min"),pointerScale:lwe(t.params,r)})),{parser:Ah,value:u,viewProps:t.viewProps}));return new Bg(t.document,{blade:t.blade,props:or.fromObject({label:t.params.label}),value:u,valueController:h})},api(t){return!(t.controller instanceof Bg)||!(t.controller.valueController instanceof N3)?null:new x6e(t.controller)}},A6e=function(){return{id:"text",type:"blade",core:rw,accept(t){const e=Di(t,n=>({parse:n.required.function,value:n.required.raw,view:n.required.constant("text"),format:n.optional.function,label:n.optional.string}));return e?{params:e}:null},controller(t){var e;const n=wi(t.params.value),r=new uP(t.document,{parser:t.params.parse,props:or.fromObject({formatter:(e=t.params.format)!==null&&e!==void 0?e:o=>String(o)}),value:n,viewProps:t.viewProps});return new Bg(t.document,{blade:t.blade,props:or.fromObject({label:t.params.label}),value:n,valueController:r})},api(t){return!(t.controller instanceof Bg)||!(t.controller.valueController instanceof uP)?null:new S6e(t.controller)}}}();function I6e(t){const e=t.createElement("div");return e.classList.add(_r("dfw")()),t.body&&t.body.appendChild(e),e}function R6e(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}class O6e extends C6e{constructor(e){var n,r;const o=e??{},u=(n=o.document)!==null&&n!==void 0?n:o4e(),h=b6e(),m=new P6e(u,{expanded:o.expanded,blade:iw(),props:or.fromObject({title:o.title}),viewProps:qg.create()});super(m,h),this.pool_=h,this.containerElem_=(r=o.container)!==null&&r!==void 0?r:I6e(u),this.containerElem_.appendChild(this.element),this.doc_=u,this.usesDefaultWrapper_=!o.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw bs.alreadyDisposed();return this.doc_}dispose(){const e=this.containerElem_;if(!e)throw bs.alreadyDisposed();if(this.usesDefaultWrapper_){const n=e.parentElement;n&&n.removeChild(e)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(e){e.css&&R6e(this.document,`plugin-${e.id}`,e.css),("plugin"in e?[e.plugin]:"plugins"in e?e.plugins:[]).forEach(r=>{this.pool_.register(e.id,r)})}setUpDefaultPlugins_(){this.registerPlugin({id:"default",css:'.tp-tbiv_b,.tp-coltxtv_ms,.tp-colswv_b,.tp-ckbv_i,.tp-sglv_i,.tp-mllv_i,.tp-grlv_g,.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw,.tp-rotv_b,.tp-fldv_b,.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-p2dv_b,.tp-btnv_b,.tp-lstv_s{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-p2dv_b:hover,.tp-btnv_b:hover,.tp-lstv_s:hover{background-color:var(--btn-bg-h)}.tp-p2dv_b:focus,.tp-btnv_b:focus,.tp-lstv_s:focus{background-color:var(--btn-bg-f)}.tp-p2dv_b:active,.tp-btnv_b:active,.tp-lstv_s:active{background-color:var(--btn-bg-a)}.tp-p2dv_b:disabled,.tp-btnv_b:disabled,.tp-lstv_s:disabled{opacity:.5}.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tbpv_c>.tp-cntv.tp-v-lst,.tp-fldv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-vp))}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tbpv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-rotv_c>*:not(.tp-v-fst),.tp-tbpv_c>*:not(.tp-v-fst),.tp-fldv_c>*:not(.tp-v-fst){margin-top:var(--cnt-usp)}.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tbpv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tbpv_c>.tp-cntv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tbpv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-vp)}.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tbpv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tbpv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-tbpv_c>.tp-cntv,.tp-fldv_c>.tp-cntv{margin-left:4px}.tp-tbpv_c>.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--bld-br);border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-tbpv_c .tp-fldv>.tp-fldv_c,.tp-fldv_c .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--bld-br)}.tp-tbpv_c>.tp-cntv+.tp-fldv>.tp-fldv_b,.tp-fldv_c>.tp-cntv+.tp-fldv>.tp-fldv_b{border-top-left-radius:0}.tp-tbpv_c>.tp-cntv+.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-cntv+.tp-tabv>.tp-tabv_t{border-top-left-radius:0}.tp-tbpv_c>.tp-tabv>.tp-tabv_t,.tp-fldv_c>.tp-tabv>.tp-tabv_t{border-top-left-radius:var(--bld-br)}.tp-tbpv_c .tp-tabv>.tp-tabv_c,.tp-fldv_c .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--bld-br)}.tp-rotv_b,.tp-fldv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);overflow:hidden;padding-left:var(--cnt-hp);padding-right:calc(		2px * 2 + var(--cnt-usz) + var(--cnt-hp)	);position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-rotv_b:hover,.tp-fldv_b:hover{background-color:var(--cnt-bg-h)}.tp-rotv_b:focus,.tp-fldv_b:focus{background-color:var(--cnt-bg-f)}.tp-rotv_b:active,.tp-fldv_b:active{background-color:var(--cnt-bg-a)}.tp-rotv_b:disabled,.tp-fldv_b:disabled{opacity:.5}.tp-rotv_m,.tp-fldv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:"";display:block;height:6px;right:calc(		var(--cnt-hp) + (				var(--cnt-usz) + 4px - 6px			) / 2 - 2px	);margin:auto;opacity:.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-rotv.tp-rotv-expanded .tp-rotv_m,.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m{transform:none}.tp-rotv_c,.tp-fldv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c,.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c{display:none}.tp-rotv.tp-rotv-expanded .tp-rotv_c,.tp-fldv.tp-fldv-expanded>.tp-fldv_c{opacity:1;padding-bottom:var(--cnt-vp);padding-top:var(--cnt-vp);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-txtv_i,.tp-p2dpv_p,.tp-colswv_sw{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-txtv_i:hover,.tp-p2dpv_p:hover,.tp-colswv_sw:hover{background-color:var(--in-bg-h)}.tp-txtv_i:focus,.tp-p2dpv_p:focus,.tp-colswv_sw:focus{background-color:var(--in-bg-f)}.tp-txtv_i:active,.tp-p2dpv_p:active,.tp-colswv_sw:active{background-color:var(--in-bg-a)}.tp-txtv_i:disabled,.tp-p2dpv_p:disabled,.tp-colswv_sw:disabled{opacity:.5}.tp-lstv,.tp-coltxtv_m{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m,.tp-coltxtv_mm{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-lstv_m svg,.tp-coltxtv_mm svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-lstv_m svg path,.tp-coltxtv_mm svg path{fill:currentColor}.tp-sglv_i,.tp-mllv_i,.tp-grlv_g{background-color:var(--mo-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--mo-fg);height:var(--cnt-usz);scrollbar-color:currentColor rgba(0,0,0,0);scrollbar-width:thin;width:100%}.tp-sglv_i::-webkit-scrollbar,.tp-mllv_i::-webkit-scrollbar,.tp-grlv_g::-webkit-scrollbar{height:8px;width:8px}.tp-sglv_i::-webkit-scrollbar-corner,.tp-mllv_i::-webkit-scrollbar-corner,.tp-grlv_g::-webkit-scrollbar-corner{background-color:rgba(0,0,0,0)}.tp-sglv_i::-webkit-scrollbar-thumb,.tp-mllv_i::-webkit-scrollbar-thumb,.tp-grlv_g::-webkit-scrollbar-thumb{background-clip:padding-box;background-color:currentColor;border:rgba(0,0,0,0) solid 2px;border-radius:4px}.tp-pndtxtv,.tp-coltxtv_w{display:flex}.tp-pndtxtv_a,.tp-coltxtv_c{width:100%}.tp-pndtxtv_a+.tp-pndtxtv_a,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-coltxtv_c{margin-left:2px}.tp-rotv{--bs-bg: var(--tp-base-background-color, hsl(230, 7%, 17%));--bs-br: var(--tp-base-border-radius, 6px);--bs-ff: var(--tp-base-font-family, Roboto Mono, Source Code Pro, Menlo, Courier, monospace);--bs-sh: var(--tp-base-shadow-color, rgba(0, 0, 0, 0.2));--bld-br: var(--tp-blade-border-radius, 2px);--bld-hp: var(--tp-blade-horizontal-padding, 4px);--bld-vw: var(--tp-blade-value-width, 160px);--btn-bg: var(--tp-button-background-color, hsl(230, 7%, 70%));--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, hsl(230, 7%, 17%));--cnt-bg: var(--tp-container-background-color, rgba(187, 188, 196, 0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187, 188, 196, 0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187, 188, 196, 0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187, 188, 196, 0.15));--cnt-fg: var(--tp-container-foreground-color, hsl(230, 7%, 75%));--cnt-hp: var(--tp-container-horizontal-padding, 4px);--cnt-vp: var(--tp-container-vertical-padding, 4px);--cnt-usp: var(--tp-container-unit-spacing, 4px);--cnt-usz: var(--tp-container-unit-size, 20px);--in-bg: var(--tp-input-background-color, rgba(187, 188, 196, 0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187, 188, 196, 0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187, 188, 196, 0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187, 188, 196, 0.15));--in-fg: var(--tp-input-foreground-color, hsl(230, 7%, 75%));--lbl-fg: var(--tp-label-foreground-color, rgba(187, 188, 196, 0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0, 0, 0, 0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187, 188, 196, 0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(187, 188, 196, 0.1))}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--bld-br);cursor:pointer;display:block;height:var(--cnt-usz);position:relative;width:var(--cnt-usz)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--cnt-usz)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-expanded.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--cnt-usp);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--cnt-usp)}.tp-colpv_rgb{display:flex;margin-top:var(--cnt-usp);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-vp);padding-top:calc(			var(--cnt-vp) + 2px		);position:relative}.tp-colpv_a::before{background-color:var(--grv-fg);content:"";height:2px;left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:0}.tp-colpv.tp-v-disabled .tp-colpv_a::before{opacity:.5}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--bld-br);outline:none;overflow:hidden;position:relative}.tp-svpv.tp-v-disabled{opacity:.5}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--cnt-usz)*4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0, 0, 0, 0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative}.tp-hplv.tp-v-disabled{opacity:.5}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--cnt-usz);outline:none;position:relative;width:100%}.tp-aplv.tp-v-disabled{opacity:.5}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--bld-br);box-shadow:0 0 2px rgba(0,0,0,.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--bld-br);border:rgba(255,255,255,.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--bld-br);overflow:hidden}.tp-colswv.tp-v-disabled{opacity:.5}.tp-colswv_sw{border-radius:0}.tp-colswv_b{cursor:pointer;display:block;height:var(--cnt-usz);left:0;position:absolute;top:0;width:var(--cnt-usz)}.tp-colswv_b:focus::after{border:rgba(255,255,255,.75) solid 2px;border-radius:var(--bld-br);bottom:0;content:"";display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--bld-br);color:var(--lbl-fg);cursor:pointer;height:var(--cnt-usz);line-height:var(--cnt-usz);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv.tp-v-disabled .tp-coltxtv_mm{opacity:.5}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv{position:relative}.tp-fldv_t{padding-left:4px}.tp-fldv_b:disabled .tp-fldv_m{display:none}.tp-fldv_c{padding-left:4px}.tp-fldv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-fldv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-fldv_b:hover+.tp-fldv_i{color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_i{color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_i{color:var(--cnt-bg-a)}.tp-fldv.tp-v-disabled>.tp-fldv_i{opacity:.5}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--cnt-usz) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left .05s,top .05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-hp);padding-right:var(--cnt-hp)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--bld-vw)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 var(--bld-hp);width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:.5}.tp-mllv_i{display:block;height:calc(var(--cnt-usz) * 3);line-height:var(--cnt-usz);padding-left:var(--bld-hp);padding-right:var(--bld-hp);resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--cnt-usz);margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--cnt-usp);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-hp));right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-p2dpv{padding-left:calc(var(--cnt-usz) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv.tp-v-disabled .tp-p2dpv_p{opacity:.5}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:var(--bld-vw);padding:var(--cnt-vp) var(--cnt-hp);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sldv.tp-v-disabled{opacity:.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--cnt-usz);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--bld-br);bottom:0;content:"";display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv{position:relative}.tp-tabv_t{align-items:flex-end;color:var(--cnt-bg);display:flex;overflow:hidden;position:relative}.tp-tabv_t:hover{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus){color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active){color:var(--cnt-bg-a)}.tp-tabv_t::before{background-color:currentColor;bottom:0;content:"";height:2px;left:0;pointer-events:none;position:absolute;right:0}.tp-tabv.tp-v-disabled .tp-tabv_t::before{opacity:.5}.tp-tabv.tp-tabv-nop .tp-tabv_t{height:calc(var(--cnt-usz) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_t::before{background-color:var(--cnt-bg);bottom:0;content:"";height:2px;left:0;position:absolute;right:0}.tp-tabv_i{bottom:0;color:var(--cnt-bg);left:0;overflow:hidden;position:absolute;top:calc(var(--cnt-usz) + 4px);width:max(var(--bs-br),4px)}.tp-tabv_i::before{background-color:currentColor;bottom:0;content:"";left:0;position:absolute;top:0;width:4px}.tp-tabv_t:hover+.tp-tabv_i{color:var(--cnt-bg-h)}.tp-tabv_t:has(*:focus)+.tp-tabv_i{color:var(--cnt-bg-f)}.tp-tabv_t:has(*:active)+.tp-tabv_i{color:var(--cnt-bg-a)}.tp-tabv.tp-v-disabled>.tp-tabv_i{opacity:.5}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv.tp-v-disabled::before{opacity:.5}.tp-tbiv_b{display:block;padding-left:calc(var(--cnt-hp) + 4px);padding-right:calc(var(--cnt-hp) + 4px);position:relative;width:100%}.tp-tbiv_b:disabled{opacity:.5}.tp-tbiv_b::before{background-color:var(--cnt-bg);bottom:2px;content:"";left:0;pointer-events:none;position:absolute;right:0;top:0}.tp-tbiv_b:hover::before{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus::before{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active::before{background-color:var(--cnt-bg-a)}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--cnt-usz) + 4px);line-height:calc(var(--cnt-usz) + 4px);opacity:.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-tbpv_c{padding-bottom:var(--cnt-vp);padding-left:4px;padding-top:var(--cnt-vp)}.tp-txtv{position:relative}.tp-txtv_i{padding-left:var(--bld-hp);padding-right:var(--bld-hp)}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:.3}.tp-txtv_k{cursor:pointer;height:100%;left:calc(			var(--bld-hp) - 5px		);position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:"";height:calc(var(--cnt-usz) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:.1;position:absolute;top:0;transition:border-radius .1s,height .1s,transform .1s,width .1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--bld-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0);border-style:solid;border-width:2px;box-sizing:border-box;content:"";font-size:.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--bs-ff);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(			2px * 2 + var(--cnt-usz) + var(--cnt-hp)		);text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0;transition-delay:0s;transition-duration:0s}.tp-rotv.tp-rotv-not>.tp-rotv_b{display:none}.tp-rotv_b:disabled .tp-rotv_m{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst.tp-fldv-expanded>.tp-fldv_b{transition-delay:0s;transition-duration:0s}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_i{border-bottom-left-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-vp))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_t{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sprv.tp-v-disabled .tp-sprv_r{opacity:.5}',plugins:[E6e,T6e,M6e,Pwe,A6e]})}}new wwe("4.0.0");function bi(t){return t==null}function ZG(t){return t!==null&&typeof t=="object"}function ZH(t){return t!==null&&typeof t=="object"}function D6e(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Vg(t,e){return Array.from(new Set([...Object.keys(t),...Object.keys(e)])).reduce((r,o)=>{const u=t[o],h=e[o];return ZH(u)&&ZH(h)?Object.assign(Object.assign({},r),{[o]:Vg(u,h)}):Object.assign(Object.assign({},r),{[o]:o in e?h:u})},{})}function L6e(t){return ZG(t)?"target"in t:!1}const N6e={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",notcompatible:t=>`Not compatible with  plugin '${t.id}'`,propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class zs{static alreadyDisposed(){return new zs({type:"alreadydisposed"})}static notBindable(){return new zs({type:"notbindable"})}static notCompatible(e,n){return new zs({type:"notcompatible",context:{id:`${e}.${n}`}})}static propertyNotFound(e){return new zs({type:"propertynotfound",context:{name:e}})}static shouldNeverHappen(){return new zs({type:"shouldneverhappen"})}constructor(e){var n;this.message=(n=N6e[e.type](e.context))!==null&&n!==void 0?n:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=e.type}toString(){return this.message}}class F3{constructor(e,n){this.obj_=e,this.key=n}static isBindable(e){return!(e===null||typeof e!="object"&&typeof e!="function")}read(){return this.obj_[this.key]}write(e){this.obj_[this.key]=e}writeProperty(e,n){const r=this.read();if(!F3.isBindable(r))throw zs.notBindable();if(!(e in r))throw zs.propertyNotFound(e);r[e]=n}}class ws{constructor(){this.observers_={}}on(e,n){let r=this.observers_[e];return r||(r=this.observers_[e]=[]),r.push({handler:n}),this}off(e,n){const r=this.observers_[e];return r&&(this.observers_[e]=r.filter(o=>o.handler!==n)),this}emit(e,n){const r=this.observers_[e];r&&r.forEach(o=>{o.handler(n)})}}class F6e{constructor(e,n){var r;this.constraint_=n==null?void 0:n.constraint,this.equals_=(r=n==null?void 0:n.equals)!==null&&r!==void 0?r:(o,u)=>o===u,this.emitter=new ws,this.rawValue_=e}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},o=this.constraint_?this.constraint_.constrain(e):e,u=this.rawValue_;this.equals_(u,o)&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=o,this.emitter.emit("change",{options:r,previousRawValue:u,rawValue:o,sender:this}))}}class B6e{constructor(e){this.emitter=new ws,this.value_=e}get rawValue(){return this.value_}set rawValue(e){this.setRawValue(e,{forceEmit:!1,last:!0})}setRawValue(e,n){const r=n??{forceEmit:!1,last:!0},o=this.value_;o===e&&!r.forceEmit||(this.emitter.emit("beforechange",{sender:this}),this.value_=e,this.emitter.emit("change",{options:r,previousRawValue:o,rawValue:this.value_,sender:this}))}}class U6e{constructor(e){this.emitter=new ws,this.onValueBeforeChange_=this.onValueBeforeChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.value_=e,this.value_.emitter.on("beforechange",this.onValueBeforeChange_),this.value_.emitter.on("change",this.onValueChange_)}get rawValue(){return this.value_.rawValue}onValueBeforeChange_(e){this.emitter.emit("beforechange",Object.assign(Object.assign({},e),{sender:this}))}onValueChange_(e){this.emitter.emit("change",Object.assign(Object.assign({},e),{sender:this}))}}function ji(t,e){const n=e==null?void 0:e.constraint,r=e==null?void 0:e.equals;return!n&&!r?new B6e(t):new F6e(t,e)}function V6e(t){return[new U6e(t),(e,n)=>{t.setRawValue(e,n)}]}class Jn{constructor(e){this.emitter=new ws,this.valMap_=e;for(const n in this.valMap_)this.valMap_[n].emitter.on("change",()=>{this.emitter.emit("change",{key:n,sender:this})})}static createCore(e){return Object.keys(e).reduce((r,o)=>Object.assign(r,{[o]:ji(e[o])}),{})}static fromObject(e){const n=this.createCore(e);return new Jn(n)}get(e){return this.valMap_[e].rawValue}set(e,n){this.valMap_[e].rawValue=n}value(e){return this.valMap_[e]}}class BP{constructor(e){this.values=Jn.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");return Math.min(Math.max(e,r),n)}}class QG{constructor(e){this.values=Jn.fromObject({max:e.max,min:e.min})}constrain(e){const n=this.values.get("max"),r=this.values.get("min");let o=e;return bi(r)||(o=Math.max(o,r)),bi(n)||(o=Math.min(o,n)),o}}class j6e{constructor(e,n=0){this.step=e,this.origin=n}constrain(e){const n=this.origin%this.step,r=Math.round((e-n)/this.step);return n+r*this.step}}class z6e{constructor(e){this.text=e}evaluate(){return Number(this.text)}toString(){return this.text}}const H6e={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class G6e{constructor(e,n,r){this.left=n,this.operator=e,this.right=r}evaluate(){const e=H6e[this.operator];if(!e)throw new Error(`unexpected binary operator: '${this.operator}`);return e(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const $6e={"+":t=>t,"-":t=>-t,"~":t=>~t};class W6e{constructor(e,n){this.operator=e,this.expression=n}evaluate(){const e=$6e[this.operator];if(!e)throw new Error(`unexpected unary operator: '${this.operator}`);return e(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function JG(t){return(e,n)=>{for(let r=0;r<t.length;r++){const o=t[r](e,n);if(o!=="")return o}return""}}function hP(t,e){var n;const r=t.substr(e).match(/^\s+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function K6e(t,e){const n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}function pP(t,e){var n;const r=t.substr(e).match(/^[0-9]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function q6e(t,e){const n=pP(t,e);if(n!=="")return n;const r=t.substr(e,1);if(e+=1,r!=="-"&&r!=="+")return"";const o=pP(t,e);return o===""?"":r+o}function e$(t,e){const n=t.substr(e,1);if(e+=1,n.toLowerCase()!=="e")return"";const r=q6e(t,e);return r===""?"":n+r}function s1e(t,e){const n=t.substr(e,1);if(n==="0")return n;const r=K6e(t,e);return e+=r.length,r===""?"":r+pP(t,e)}function X6e(t,e){const n=s1e(t,e);if(e+=n.length,n==="")return"";const r=t.substr(e,1);if(e+=r.length,r!==".")return"";const o=pP(t,e);return e+=o.length,n+r+o+e$(t,e)}function Y6e(t,e){const n=t.substr(e,1);if(e+=n.length,n!==".")return"";const r=pP(t,e);return e+=r.length,r===""?"":n+r+e$(t,e)}function Z6e(t,e){const n=s1e(t,e);return e+=n.length,n===""?"":n+e$(t,e)}const Q6e=JG([X6e,Y6e,Z6e]);function J6e(t,e){var n;const r=t.substr(e).match(/^[01]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function e8e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0b")return"";const r=J6e(t,e);return r===""?"":n+r}function t8e(t,e){var n;const r=t.substr(e).match(/^[0-7]+/);return(n=r&&r[0])!==null&&n!==void 0?n:""}function n8e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0o")return"";const r=t8e(t,e);return r===""?"":n+r}function r8e(t,e){var n;const r=t.substr(e).match(/^[0-9a-f]+/i);return(n=r&&r[0])!==null&&n!==void 0?n:""}function i8e(t,e){const n=t.substr(e,2);if(e+=n.length,n.toLowerCase()!=="0x")return"";const r=r8e(t,e);return r===""?"":n+r}const o8e=JG([e8e,n8e,i8e]),s8e=JG([o8e,Q6e]);function a8e(t,e){const n=s8e(t,e);return e+=n.length,n===""?null:{evaluable:new z6e(n),cursor:e}}function l8e(t,e){const n=t.substr(e,1);if(e+=n.length,n!=="(")return null;const r=l1e(t,e);if(!r)return null;e=r.cursor,e+=hP(t,e).length;const o=t.substr(e,1);return e+=o.length,o!==")"?null:{evaluable:r.evaluable,cursor:e}}function u8e(t,e){var n;return(n=a8e(t,e))!==null&&n!==void 0?n:l8e(t,e)}function a1e(t,e){const n=u8e(t,e);if(n)return n;const r=t.substr(e,1);if(e+=r.length,r!=="+"&&r!=="-"&&r!=="~")return null;const o=a1e(t,e);return o?(e=o.cursor,{cursor:e,evaluable:new W6e(r,o.evaluable)}):null}function c8e(t,e,n){n+=hP(e,n).length;const r=t.filter(o=>e.startsWith(o,n))[0];return r?(n+=r.length,n+=hP(e,n).length,{cursor:n,operator:r}):null}function d8e(t,e){return(n,r)=>{const o=t(n,r);if(!o)return null;r=o.cursor;let u=o.evaluable;for(;;){const h=c8e(e,n,r);if(!h)break;r=h.cursor;const m=t(n,r);if(!m)return null;r=m.cursor,u=new G6e(h.operator,u,m.evaluable)}return u?{cursor:r,evaluable:u}:null}}const h8e=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce((t,e)=>d8e(t,e),a1e);function l1e(t,e){return e+=hP(t,e).length,h8e(t,e)}function p8e(t){const e=l1e(t,0);return!e||e.cursor+hP(t,e.cursor).length!==t.length?null:e.evaluable}function ju(t){var e;const n=p8e(t);return(e=n==null?void 0:n.evaluate())!==null&&e!==void 0?e:null}function t$(t){if(typeof t=="number")return t;if(typeof t=="string"){const e=ju(t);if(!bi(e))return e}return 0}function Jo(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}function Zn(t,e,n,r,o){const u=(t-e)/(n-e);return r+u*(o-r)}function wge(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Ii(t,e,n){return Math.min(Math.max(t,e),n)}function u1e(t,e){return(t%e+e)%e}function f8e(t,e){return bi(t.step)?Math.max(wge(e),2):wge(t.step)}function c1e(t){var e;return(e=t.step)!==null&&e!==void 0?e:1}function m8e(t,e){var n;const r=Math.abs((n=t.step)!==null&&n!==void 0?n:e);return r===0?.1:Math.pow(10,Math.floor(Math.log10(r))-1)}function n$(t,e){return bi(t.step)?null:new j6e(t.step,e)}function r$(t){return!bi(t.max)&&!bi(t.min)?new BP({max:t.max,min:t.min}):!bi(t.max)||!bi(t.min)?new QG({max:t.max,min:t.min}):null}function i$(t,e){var n,r,o;return{formatter:(n=t.format)!==null&&n!==void 0?n:Jo(f8e(t,e)),keyScale:(r=t.keyScale)!==null&&r!==void 0?r:c1e(t),pointerScale:(o=t.pointerScale)!==null&&o!==void 0?o:m8e(t,e)}}function o$(t){return{format:t.optional.function,keyScale:t.optional.number,max:t.optional.number,min:t.optional.number,pointerScale:t.optional.number,step:t.optional.number}}function s$(t){return{constraint:t.constraint,textProps:Jn.fromObject(i$(t.params,t.initialValue))}}class Yg{constructor(e){this.controller=e}get element(){return this.controller.view.element}get disabled(){return this.controller.viewProps.get("disabled")}set disabled(e){this.controller.viewProps.set("disabled",e)}get hidden(){return this.controller.viewProps.get("hidden")}set hidden(e){this.controller.viewProps.set("hidden",e)}dispose(){this.controller.viewProps.set("disposed",!0)}importState(e){return this.controller.importState(e)}exportState(){return this.controller.exportState()}}class sw{constructor(e){this.target=e}}class _L extends sw{constructor(e,n,r){super(e),this.value=n,this.last=r??!0}}class v8e extends sw{constructor(e,n){super(e),this.expanded=n}}class g8e extends sw{constructor(e,n){super(e),this.index=n}}class a$ extends Yg{constructor(e){super(e),this.onValueChange_=this.onValueChange_.bind(this),this.emitter_=new ws,this.controller.value.emitter.on("change",this.onValueChange_)}get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get key(){return this.controller.value.binding.target.key}get tag(){return this.controller.tag}set tag(e){this.controller.tag=e}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.controller.value.fetch()}onValueChange_(e){const n=this.controller.value;this.emitter_.emit("change",new _L(this,n.binding.target.read(),e.options.last))}}function y8e(t,e){const r=Object.keys(e).reduce((o,u)=>{if(o===void 0)return;const h=e[u],m=h(t[u]);return m.succeeded?Object.assign(Object.assign({},o),{[u]:m.value}):void 0},{});return r}function b8e(t,e){return t.reduce((n,r)=>{if(n===void 0)return;const o=e(r);if(!(!o.succeeded||o.value===void 0))return[...n,o.value]},[])}function _8e(t){return t===null?!1:typeof t=="object"}function ch(t){return e=>n=>{if(!e&&n===void 0)return{succeeded:!1,value:void 0};if(e&&n===void 0)return{succeeded:!0,value:void 0};const r=t(n);return r!==void 0?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function xge(t){return{custom:e=>ch(e)(t),boolean:ch(e=>typeof e=="boolean"?e:void 0)(t),number:ch(e=>typeof e=="number"?e:void 0)(t),string:ch(e=>typeof e=="string"?e:void 0)(t),function:ch(e=>typeof e=="function"?e:void 0)(t),constant:e=>ch(n=>n===e?e:void 0)(t),raw:ch(e=>e)(t),object:e=>ch(n=>{if(_8e(n))return y8e(n,e)})(t),array:e=>ch(n=>{if(Array.isArray(n))return b8e(n,e)})(t)}}const QH={optional:xge(!0),required:xge(!1)};function zi(t,e){const n=e(QH),r=QH.required.object(n)(t);return r.succeeded?r.value:void 0}function Hu(t,e,n,r){if(e&&!e(t))return!1;const o=zi(t,n);return o?r(o):!1}function Gu(t,e){var n;return Vg((n=t==null?void 0:t())!==null&&n!==void 0?n:{},e)}function JD(t){return"value"in t}function w8e(t){if(!ZG(t)||!("binding"in t))return!1;const e=t.binding;return L6e(e)}const Ao="http://www.w3.org/2000/svg";function B3(t){t.offsetHeight}function x8e(t,e){const n=t.style.transition;t.style.transition="none",e(),t.style.transition=n}function wL(t){return t.ontouchstart!==void 0}function S8e(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d",{willReadFrequently:!0}):null}const E8e={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function xL(t,e){const n=t.createElementNS(Ao,"svg");return n.innerHTML=E8e[e],n}function d1e(t,e,n){t.insertBefore(e,t.children[n])}function l$(t){t.parentElement&&t.parentElement.removeChild(t)}function h1e(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function C8e(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}function u$(t){return t.relatedTarget?t.relatedTarget:"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}function Bl(t,e){t.emitter.on("change",n=>{e(n.rawValue)}),e(t.rawValue)}function jl(t,e,n){Bl(t.value(e),n)}const P8e="tp";function nr(t){return(n,r)=>[P8e,"-",t,"v",n?`_${n}`:"",r?`-${r}`:""].join("")}const cC=nr("lbl");function k8e(t,e){const n=t.createDocumentFragment();return e.split(`
`).map(o=>t.createTextNode(o)).forEach((o,u)=>{u>0&&n.appendChild(t.createElement("br")),n.appendChild(o)}),n}class p1e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(cC()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(cC("l")),jl(n.props,"label",u=>{bi(u)?this.element.classList.add(cC(void 0,"nol")):(this.element.classList.remove(cC(void 0,"nol")),C8e(r),r.appendChild(k8e(e,u)))}),this.element.appendChild(r),this.labelElement=r;const o=e.createElement("div");o.classList.add(cC("v")),this.element.appendChild(o),this.valueElement=o}}class SL{constructor(e,n){this.props=n.props,this.valueController=n.valueController,this.viewProps=n.valueController.viewProps,this.view=new p1e(e,{props:n.props,viewProps:this.viewProps}),this.view.valueElement.appendChild(this.valueController.view.element)}importProps(e){return Hu(e,null,n=>({label:n.optional.string}),n=>(this.props.set("label",n.label),!0))}exportProps(){return Gu(null,{label:this.props.get("label")})}}function T8e(){return["veryfirst","first","last","verylast"]}const Sge=nr(""),Ege={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class UP{constructor(e){this.parent_=null,this.blade=e.blade,this.view=e.view,this.viewProps=e.viewProps;const n=this.view.element;this.blade.value("positions").emitter.on("change",()=>{T8e().forEach(r=>{n.classList.remove(Sge(void 0,Ege[r]))}),this.blade.get("positions").forEach(r=>{n.classList.add(Sge(void 0,Ege[r]))})}),this.viewProps.handleDispose(()=>{l$(n)})}get parent(){return this.parent_}set parent(e){this.parent_=e,this.viewProps.set("parent",this.parent_?this.parent_.viewProps:null)}importState(e){return Hu(e,null,n=>({disabled:n.required.boolean,hidden:n.required.boolean}),n=>(this.viewProps.importState(n),!0))}exportState(){return Gu(null,Object.assign({},this.viewProps.exportState()))}}class U3 extends UP{constructor(e,n){if(n.value!==n.valueController.value)throw zs.shouldNeverHappen();const r=n.valueController.viewProps,o=new SL(e,{blade:n.blade,props:n.props,valueController:n.valueController});super(Object.assign(Object.assign({},n),{view:new p1e(e,{props:n.props,viewProps:r}),viewProps:r})),this.labelController=o,this.value=n.value,this.valueController=n.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}importState(e){return Hu(e,n=>{var r,o,u;return super.importState(n)&&this.labelController.importProps(n)&&((u=(o=(r=this.valueController).importProps)===null||o===void 0?void 0:o.call(r,e))!==null&&u!==void 0?u:!0)},n=>({value:n.optional.raw}),n=>(n.value&&(this.value.rawValue=n.value),!0))}exportState(){var e,n,r;return Gu(()=>super.exportState(),Object.assign(Object.assign({value:this.value.rawValue},this.labelController.exportProps()),(r=(n=(e=this.valueController).exportProps)===null||n===void 0?void 0:n.call(e))!==null&&r!==void 0?r:{}))}}function f1e(t,e){for(;t.length<e;)t.push(void 0)}function M8e(t){const e=[];return f1e(e,t),e}function A8e(t){const e=t.indexOf(void 0);return e<0?t:t.slice(0,e)}function I8e(t,e){const n=[...A8e(t),e];return n.length>t.length?n.splice(0,n.length-t.length):f1e(n,t.length),n}class R8e extends Yg{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get title(){var e;return(e=this.controller.buttonController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.buttonController.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller.buttonController.emitter.on(e,()=>{r(new sw(this))}),this}}function O8e(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function lm(t,e){return n=>{O8e(t,e,n)}}function c$(t,e){Bl(t,n=>{e.textContent=n??""})}const g8=nr("btn");class D8e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(g8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("button");r.classList.add(g8("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const o=e.createElement("div");o.classList.add(g8("t")),c$(n.props.value("title"),o),this.buttonElement.appendChild(o)}}class m1e{constructor(e,n){this.emitter=new ws,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new D8e(e,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}importProps(e){return Hu(e,null,n=>({title:n.optional.string}),n=>(this.props.set("title",n.title),!0))}exportProps(){return Gu(null,{title:this.props.get("title")})}onClick_(){this.emitter.emit("click",{sender:this})}}class Cge extends UP{constructor(e,n){const r=new m1e(e,{props:n.buttonProps,viewProps:n.viewProps}),o=new SL(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:o.view,viewProps:n.viewProps}),this.buttonController=r,this.labelController=o}importState(e){return Hu(e,n=>super.importState(n)&&this.buttonController.importProps(n)&&this.labelController.importProps(n),()=>({}),()=>!0)}exportState(){return Gu(()=>super.exportState(),Object.assign(Object.assign({},this.buttonController.exportProps()),this.labelController.exportProps()))}}class L8e{constructor(e){const[n,r]=e.split("-"),o=n.split(".");this.major=parseInt(o[0],10),this.minor=parseInt(o[1],10),this.patch=parseInt(o[2],10),this.prerelease=r??null}toString(){const e=[this.major,this.minor,this.patch].join(".");return this.prerelease!==null?[e,this.prerelease].join("-"):e}}const N8e=new L8e("2.0.0-beta.2");function Ji(t){return Object.assign({core:N8e},t)}Ji({id:"button",type:"blade",accept(t){const e=zi(t,n=>({title:n.required.string,view:n.required.constant("button"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new Cge(t.document,{blade:t.blade,buttonProps:Jn.fromObject({title:t.params.title}),labelProps:Jn.fromObject({label:t.params.label}),viewProps:t.viewProps})},api(t){return t.controller instanceof Cge?new R8e(t.controller):null}});function F8e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function B8e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function U8e(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}function V8e(t){return ZG(t)?"refresh"in t&&typeof t.refresh=="function":!1}function j8e(t,e){if(!F3.isBindable(t))throw zs.notBindable();return new F3(t,e)}class z8e{constructor(e,n){this.onRackValueChange_=this.onRackValueChange_.bind(this),this.controller_=e,this.emitter_=new ws,this.pool_=n,this.controller_.rack.emitter.on("valuechange",this.onRackValueChange_)}get children(){return this.controller_.rack.children.map(e=>this.pool_.createApi(e))}addBinding(e,n,r){const o=r??{},u=this.controller_.element.ownerDocument,h=this.pool_.createBinding(u,j8e(e,n),o),m=this.pool_.createBindingApi(h);return this.add(m,o.index)}addFolder(e){return B8e(this,e)}addButton(e){return F8e(this,e)}addTab(e){return U8e(this,e)}add(e,n){const r=e.controller;return this.controller_.rack.add(r,n),e}remove(e){this.controller_.rack.remove(e.controller)}addBlade(e){const n=this.controller_.element.ownerDocument,r=this.pool_.createBlade(n,e),o=this.pool_.createApi(r);return this.add(o,e.index)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.children.forEach(e=>{V8e(e)&&e.refresh()})}onRackValueChange_(e){const n=e.bladeController,r=this.pool_.createApi(n),o=w8e(n.value)?n.value.binding:null;this.emitter_.emit("change",new _L(r,o?o.target.read():n.value.rawValue,e.options.last))}}class d$ extends Yg{constructor(e,n){super(e),this.rackApi_=new z8e(e.rackController,n)}}class h$ extends UP{constructor(e){super({blade:e.blade,view:e.view,viewProps:e.rackController.viewProps}),this.rackController=e.rackController}importState(e){return Hu(e,n=>super.importState(n),n=>({children:n.required.array(n.required.raw)}),n=>this.rackController.rack.children.every((r,o)=>r.importState(n.children[o])))}exportState(){return Gu(()=>super.exportState(),{children:this.rackController.rack.children.map(e=>e.exportState())})}}function JH(t){return"rackController"in t}class H8e{constructor(e){this.emitter=new ws,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=e}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(e){for(const n of this.allItems())if(e(n))return n;return null}includes(e){return this.cache_.has(e)}add(e,n){if(this.includes(e))throw zs.shouldNeverHappen();const r=n!==void 0?n:this.items_.length;this.items_.splice(r,0,e),this.cache_.add(e);const o=this.extract_(e);o&&(o.emitter.on("add",this.onSubListAdd_),o.emitter.on("remove",this.onSubListRemove_),o.allItems().forEach(u=>{this.cache_.add(u)})),this.emitter.emit("add",{index:r,item:e,root:this,target:this})}remove(e){const n=this.items_.indexOf(e);if(n<0)return;this.items_.splice(n,1),this.cache_.delete(e);const r=this.extract_(e);r&&(r.allItems().forEach(o=>{this.cache_.delete(o)}),r.emitter.off("add",this.onSubListAdd_),r.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:n,item:e,root:this,target:this})}onSubListAdd_(e){this.cache_.add(e.item),this.emitter.emit("add",{index:e.index,item:e.item,root:this,target:e.target})}onSubListRemove_(e){this.cache_.delete(e.item),this.emitter.emit("remove",{index:e.index,item:e.item,root:this,target:e.target})}}function G8e(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(JD(r)&&r.value===e)return r}return null}function $8e(t){return JH(t)?t.rackController.rack.bcSet_:null}class W8e{constructor(e){var n,r;this.emitter=new ws,this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onRackLayout_=this.onRackLayout_.bind(this),this.onRackValueChange_=this.onRackValueChange_.bind(this),this.blade_=(n=e.blade)!==null&&n!==void 0?n:null,(r=this.blade_)===null||r===void 0||r.value("positions").emitter.on("change",this.onBladePositionsChange_),this.viewProps=e.viewProps,this.bcSet_=new H8e($8e),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(e,n){var r;(r=e.parent)===null||r===void 0||r.remove(e),e.parent=this,this.bcSet_.add(e,n)}remove(e){e.parent=null,this.bcSet_.remove(e)}find(e){return this.bcSet_.allItems().filter(e)}onSetAdd_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("add",{bladeController:e.item,index:e.index,root:n,sender:this}),!n)return;const r=e.item;if(r.viewProps.emitter.on("change",this.onChildViewPropsChange_),r.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),r.viewProps.handleDispose(this.onChildDispose_),JD(r))r.value.emitter.on("change",this.onChildValueChange_);else if(JH(r)){const o=r.rackController.rack;if(o){const u=o.emitter;u.on("layout",this.onRackLayout_),u.on("valuechange",this.onRackValueChange_)}}}onSetRemove_(e){this.updatePositions_();const n=e.target===e.root;if(this.emitter.emit("remove",{bladeController:e.item,root:n,sender:this}),!n)return;const r=e.item;if(JD(r))r.value.emitter.off("change",this.onChildValueChange_);else if(JH(r)){const o=r.rackController.rack;if(o){const u=o.emitter;u.off("layout",this.onRackLayout_),u.off("valuechange",this.onRackValueChange_)}}}updatePositions_(){const e=this.bcSet_.items.filter(o=>!o.viewProps.get("hidden")),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(o=>{const u=[];o===n&&(u.push("first"),(!this.blade_||this.blade_.get("positions").includes("veryfirst"))&&u.push("veryfirst")),o===r&&(u.push("last"),(!this.blade_||this.blade_.get("positions").includes("verylast"))&&u.push("verylast")),o.blade.set("positions",u)})}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter(n=>n.viewProps.get("disposed")).forEach(n=>{this.bcSet_.remove(n)})}onChildValueChange_(e){const n=G8e(this.find(JD),e.sender);if(!n)throw zs.alreadyDisposed();this.emitter.emit("valuechange",{bladeController:n,options:e.options,sender:this})}onRackLayout_(e){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onRackValueChange_(e){this.emitter.emit("valuechange",{bladeController:e.bladeController,options:e.options,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class p${constructor(e){this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.element=e.element,this.viewProps=e.viewProps;const n=new W8e({blade:e.root?void 0:e.blade,viewProps:e.viewProps});n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose(()=>{for(let r=this.rack.children.length-1;r>=0;r--)this.rack.children[r].viewProps.set("disposed",!0)})}onRackAdd_(e){e.root&&d1e(this.element,e.bladeController.view.element,e.index)}onRackRemove_(e){e.root&&l$(e.bladeController.view.element)}}function v1e(){return new Jn({positions:ji([],{equals:D6e})})}class aw extends Jn{constructor(e){super(e)}static create(e){const n={completed:!0,expanded:e,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},r=Jn.createCore(n);return new aw(r)}get styleExpanded(){var e;return(e=this.get("temporaryExpanded"))!==null&&e!==void 0?e:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const e=this.get("expandedHeight");return this.get("shouldFixHeight")&&!bi(e)?`${e}px`:"auto"}bindExpandedClass(e,n){const r=()=>{this.styleExpanded?e.classList.add(n):e.classList.remove(n)};jl(this,"expanded",r),jl(this,"temporaryExpanded",r)}cleanUpTransition(){this.set("shouldFixHeight",!1),this.set("expandedHeight",null),this.set("completed",!0)}}function K8e(t,e){let n=0;return x8e(e,()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),B3(e),n=e.clientHeight,t.set("temporaryExpanded",null),B3(e)}),n}function Pge(t,e){e.style.height=t.styleHeight}function EL(t,e){t.value("expanded").emitter.on("beforechange",()=>{if(t.set("completed",!1),bi(t.get("expandedHeight"))){const n=K8e(t,e);n>0&&t.set("expandedHeight",n)}t.set("shouldFixHeight",!0),B3(e)}),t.emitter.on("change",()=>{Pge(t,e)}),Pge(t,e),e.addEventListener("transitionend",n=>{n.propertyName==="height"&&t.cleanUpTransition()})}class q8e extends d${constructor(e,n){super(e,n),this.emitter_=new ws,this.controller.foldable.value("expanded").emitter.on("change",r=>{this.emitter_.emit("fold",new v8e(this,r.sender.rawValue))}),this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)})}get expanded(){return this.controller.foldable.get("expanded")}set expanded(e){this.controller.foldable.set("expanded",e)}get title(){return this.controller.props.get("title")}set title(e){this.controller.props.set("title",e)}get children(){return this.rackApi_.children}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addFolder(e){return this.rackApi_.addFolder(e)}addButton(e){return this.rackApi_.addButton(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){return this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBlade(e){return this.rackApi_.addBlade(e)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}refresh(){this.rackApi_.refresh()}}const g1e=nr("cnt");class X8e{constructor(e,n){var r;this.className_=nr((r=n.viewName)!==null&&r!==void 0?r:"fld"),this.element=e.createElement("div"),this.element.classList.add(this.className_(),g1e()),n.viewProps.bindClassModifiers(this.element),this.foldable_=n.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),jl(this.foldable_,"completed",lm(this.element,this.className_(void 0,"cpl")));const o=e.createElement("button");o.classList.add(this.className_("b")),jl(n.props,"title",x=>{bi(x)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))}),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o;const u=e.createElement("div");u.classList.add(this.className_("i")),this.element.appendChild(u);const h=e.createElement("div");h.classList.add(this.className_("t")),c$(n.props.value("title"),h),this.buttonElement.appendChild(h),this.titleElement=h;const m=e.createElement("div");m.classList.add(this.className_("m")),this.buttonElement.appendChild(m);const _=e.createElement("div");_.classList.add(this.className_("c")),this.element.appendChild(_),this.containerElement=_}}class kge extends h${constructor(e,n){var r;const o=aw.create((r=n.expanded)!==null&&r!==void 0?r:!0),u=new X8e(e,{foldable:o,props:n.props,viewName:n.root?"rot":void 0,viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new p$({blade:n.blade,element:u.containerElement,root:n.root,viewProps:n.viewProps}),view:u})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=n.props,this.foldable=o,EL(this.foldable,this.view.containerElement),this.rackController.rack.emitter.on("add",()=>{this.foldable.cleanUpTransition()}),this.rackController.rack.emitter.on("remove",()=>{this.foldable.cleanUpTransition()}),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}importState(e){return Hu(e,n=>super.importState(n),n=>({expanded:n.required.boolean,title:n.optional.string}),n=>(this.foldable.set("expanded",n.expanded),this.props.set("title",n.title),!0))}exportState(){return Gu(()=>super.exportState(),{expanded:this.foldable.get("expanded"),title:this.props.get("title")})}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}Ji({id:"folder",type:"blade",accept(t){const e=zi(t,n=>({title:n.required.string,view:n.required.constant("folder"),expanded:n.optional.boolean}));return e?{params:e}:null},controller(t){return new kge(t.document,{blade:t.blade,expanded:t.params.expanded,props:Jn.fromObject({title:t.params.title}),viewProps:t.viewProps})},api(t){return t.controller instanceof kge?new q8e(t.controller,t.pool):null}});const Y8e=nr("");function Tge(t,e){return lm(t,Y8e(void 0,e))}class Rh extends Jn{constructor(e){var n;super(e),this.onDisabledChange_=this.onDisabledChange_.bind(this),this.onParentChange_=this.onParentChange_.bind(this),this.onParentGlobalDisabledChange_=this.onParentGlobalDisabledChange_.bind(this),[this.globalDisabled_,this.setGlobalDisabled_]=V6e(ji(this.getGlobalDisabled_())),this.value("disabled").emitter.on("change",this.onDisabledChange_),this.value("parent").emitter.on("change",this.onParentChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_)}static create(e){var n,r,o;const u=e??{};return new Rh(Jn.createCore({disabled:(n=u.disabled)!==null&&n!==void 0?n:!1,disposed:!1,hidden:(r=u.hidden)!==null&&r!==void 0?r:!1,parent:(o=u.parent)!==null&&o!==void 0?o:null}))}get globalDisabled(){return this.globalDisabled_}bindClassModifiers(e){Bl(this.globalDisabled_,Tge(e,"disabled")),jl(this,"hidden",Tge(e,"hidden"))}bindDisabled(e){Bl(this.globalDisabled_,n=>{e.disabled=n})}bindTabIndex(e){Bl(this.globalDisabled_,n=>{e.tabIndex=n?-1:0})}handleDispose(e){this.value("disposed").emitter.on("change",n=>{n&&e()})}importState(e){this.set("disabled",e.disabled),this.set("hidden",e.hidden)}exportState(){return{disabled:this.get("disabled"),hidden:this.get("hidden")}}getGlobalDisabled_(){const e=this.get("parent");return(e?e.globalDisabled.rawValue:!1)||this.get("disabled")}updateGlobalDisabled_(){this.setGlobalDisabled_(this.getGlobalDisabled_())}onDisabledChange_(){this.updateGlobalDisabled_()}onParentGlobalDisabledChange_(){this.updateGlobalDisabled_()}onParentChange_(e){var n;const r=e.previousRawValue;r==null||r.globalDisabled.emitter.off("change",this.onParentGlobalDisabledChange_),(n=this.get("parent"))===null||n===void 0||n.globalDisabled.emitter.on("change",this.onParentGlobalDisabledChange_),this.updateGlobalDisabled_()}}const Mge=nr("tbp");class Z8e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Mge()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(Mge("c")),this.element.appendChild(r),this.containerElement=r}}const dC=nr("tbi");class Q8e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(dC()),n.viewProps.bindClassModifiers(this.element),jl(n.props,"selected",u=>{u?this.element.classList.add(dC(void 0,"sel")):this.element.classList.remove(dC(void 0,"sel"))});const r=e.createElement("button");r.classList.add(dC("b")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r;const o=e.createElement("div");o.classList.add(dC("t")),c$(n.props.value("title"),o),this.buttonElement.appendChild(o),this.titleElement=o}}class J8e{constructor(e,n){this.emitter=new ws,this.onClick_=this.onClick_.bind(this),this.props=n.props,this.viewProps=n.viewProps,this.view=new Q8e(e,{props:n.props,viewProps:n.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class e9 extends h${constructor(e,n){const r=new Z8e(e,{viewProps:n.viewProps});super(Object.assign(Object.assign({},n),{rackController:new p$({blade:n.blade,element:r.containerElement,viewProps:n.viewProps}),view:r})),this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new J8e(e,{props:n.itemProps,viewProps:Rh.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.props=n.props,jl(this.props,"selected",o=>{this.itemController.props.set("selected",o),this.viewProps.set("hidden",!o)})}get itemController(){return this.ic_}importState(e){return Hu(e,n=>super.importState(n),n=>({selected:n.required.boolean,title:n.required.string}),n=>(this.ic_.props.set("selected",n.selected),this.ic_.props.set("title",n.title),!0))}exportState(){return Gu(()=>super.exportState(),{selected:this.ic_.props.get("selected"),title:this.ic_.props.get("title")})}onItemClick_(){this.props.set("selected",!0)}}class eHe extends d${constructor(e,n){super(e,n),this.emitter_=new ws,this.onSelect_=this.onSelect_.bind(this),this.pool_=n,this.rackApi_.on("change",r=>{this.emitter_.emit("change",r)}),this.controller.tab.selectedIndex.emitter.on("change",this.onSelect_)}get pages(){return this.rackApi_.children}addPage(e){const n=this.controller.view.element.ownerDocument,r=new e9(n,{blade:v1e(),itemProps:Jn.fromObject({selected:!1,title:e.title}),props:Jn.fromObject({selected:!1}),viewProps:Rh.create()}),o=this.pool_.createApi(r);return this.rackApi_.add(o,e.index)}removePage(e){this.rackApi_.remove(this.rackApi_.children[e])}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o)}),this}onSelect_(e){this.emitter_.emit("select",new g8e(this,e.rawValue))}}class tHe extends d${get title(){var e;return(e=this.controller.itemController.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller.itemController.props.set("title",e)}get selected(){return this.controller.props.get("selected")}set selected(e){this.controller.props.set("selected",e)}get children(){return this.rackApi_.children}addButton(e){return this.rackApi_.addButton(e)}addFolder(e){return this.rackApi_.addFolder(e)}addTab(e){return this.rackApi_.addTab(e)}add(e,n){this.rackApi_.add(e,n)}remove(e){this.rackApi_.remove(e)}addBinding(e,n,r){return this.rackApi_.addBinding(e,n,r)}addBlade(e){return this.rackApi_.addBlade(e)}refresh(){this.rackApi_.refresh()}}const Age=-1;class nHe{constructor(){this.onItemSelectedChange_=this.onItemSelectedChange_.bind(this),this.empty=ji(!0),this.selectedIndex=ji(Age),this.items_=[]}add(e,n){const r=n??this.items_.length;this.items_.splice(r,0,e),e.emitter.on("change",this.onItemSelectedChange_),this.keepSelection_()}remove(e){const n=this.items_.indexOf(e);n<0||(this.items_.splice(n,1),e.emitter.off("change",this.onItemSelectedChange_),this.keepSelection_())}keepSelection_(){if(this.items_.length===0){this.selectedIndex.rawValue=Age,this.empty.rawValue=!0;return}const e=this.items_.findIndex(n=>n.rawValue);e<0?(this.items_.forEach((n,r)=>{n.rawValue=r===0}),this.selectedIndex.rawValue=0):(this.items_.forEach((n,r)=>{n.rawValue=r===e}),this.selectedIndex.rawValue=e),this.empty.rawValue=!1}onItemSelectedChange_(e){if(e.rawValue){const n=this.items_.findIndex(r=>r===e.sender);this.items_.forEach((r,o)=>{r.rawValue=o===n}),this.selectedIndex.rawValue=n}else this.keepSelection_()}}const hC=nr("tab");class rHe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(hC(),g1e()),n.viewProps.bindClassModifiers(this.element),Bl(n.empty,lm(this.element,hC(void 0,"nop")));const r=e.createElement("div");r.classList.add(hC("t")),this.element.appendChild(r),this.itemsElement=r;const o=e.createElement("div");o.classList.add(hC("i")),this.element.appendChild(o);const u=e.createElement("div");u.classList.add(hC("c")),this.element.appendChild(u),this.contentsElement=u}}class Ige extends h${constructor(e,n){const r=new nHe,o=new rHe(e,{empty:r.empty,viewProps:n.viewProps});super({blade:n.blade,rackController:new p$({blade:n.blade,element:o.contentsElement,viewProps:n.viewProps}),view:o}),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const u=this.rackController.rack;u.emitter.on("add",this.onRackAdd_),u.emitter.on("remove",this.onRackRemove_),this.tab=r}add(e,n){this.rackController.rack.add(e,n)}remove(e){this.rackController.rack.remove(this.rackController.rack.children[e])}onRackAdd_(e){if(!e.root)return;const n=e.bladeController;d1e(this.view.itemsElement,n.itemController.view.element,e.index),n.itemController.viewProps.set("parent",this.viewProps),this.tab.add(n.props.value("selected"))}onRackRemove_(e){if(!e.root)return;const n=e.bladeController;l$(n.itemController.view.element),n.itemController.viewProps.set("parent",null),this.tab.remove(n.props.value("selected"))}}Ji({id:"tab",type:"blade",accept(t){const e=zi(t,n=>({pages:n.required.array(n.required.object({title:n.required.string})),view:n.required.constant("tab")}));return!e||e.pages.length===0?null:{params:e}},controller(t){const e=new Ige(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(n=>{const r=new e9(t.document,{blade:v1e(),itemProps:Jn.fromObject({selected:!1,title:n.title}),props:Jn.fromObject({selected:!1}),viewProps:Rh.create()});e.add(r)}),e},api(t){return t.controller instanceof Ige?new eHe(t.controller,t.pool):t.controller instanceof e9?new tHe(t.controller,t.pool):null}});class f$ extends a${get options(){return this.controller.valueController.props.get("options")}set options(e){this.controller.valueController.props.set("options",e)}}class iHe{constructor(){this.disabled=!1,this.emitter=new ws}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class oHe{constructor(e,n){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=e,this.emitter=new ws,this.interval_=n,this.setTimer_()}get disabled(){return this.disabled_}set disabled(e){this.disabled_=e,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(this.timerId_===null)return;const e=this.doc_.defaultView;e&&e.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const e=this.doc_.defaultView;e&&(this.timerId_=e.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class lw{constructor(e){this.constraints=e}constrain(e){return this.constraints.reduce((n,r)=>r.constrain(n),e)}}function fP(t,e){if(t instanceof e)return t;if(t instanceof lw){const n=t.constraints.reduce((r,o)=>r||(o instanceof e?o:null),null);if(n)return n}return null}class CL{constructor(e){this.values=Jn.fromObject({options:e})}constrain(e){const n=this.values.get("options");return n.length===0||n.filter(o=>o.value===e).length>0?e:n[0].value}}function PL(t){var e;const n=QH;if(Array.isArray(t))return(e=zi({items:t},r=>({items:r.required.array(r.required.object({text:r.required.string,value:r.required.raw}))})))===null||e===void 0?void 0:e.items;if(typeof t=="object")return n.required.raw(t).value}function y1e(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach(n=>{e.push({text:n,value:t[n]})}),e}function m$(t){return bi(t)?null:new CL(y1e(t))}const y8=nr("lst");class sHe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.element=e.createElement("div"),this.element.classList.add(y8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("select");r.classList.add(y8("s")),n.viewProps.bindDisabled(r),this.element.appendChild(r),this.selectElement=r;const o=e.createElement("div");o.classList.add(y8("m")),o.appendChild(xL(e,"dropdown")),this.element.appendChild(o),n.value.emitter.on("change",this.onValueChange_),this.value_=n.value,jl(this.props_,"options",u=>{h1e(this.selectElement),u.forEach(h=>{const m=e.createElement("option");m.textContent=h.text,this.selectElement.appendChild(m)}),this.update_()})}update_(){const e=this.props_.get("options").map(n=>n.value);this.selectElement.selectedIndex=e.indexOf(this.value_.rawValue)}onValueChange_(){this.update_()}}class q_{constructor(e,n){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new sHe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(e){const n=e.currentTarget;this.value.rawValue=this.props.get("options")[n.selectedIndex].value}importProps(e){return Hu(e,null,n=>({options:n.required.custom(PL)}),n=>(this.props.set("options",y1e(n.options)),!0))}exportProps(){return Gu(null,{options:this.props.get("options")})}}const Rge=nr("pop");class aHe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Rge()),n.viewProps.bindClassModifiers(this.element),Bl(n.shows,lm(this.element,Rge(void 0,"v")))}}class v${constructor(e,n){this.shows=ji(!1),this.viewProps=n.viewProps,this.view=new aHe(e,{shows:this.shows,viewProps:this.viewProps})}}const Oge=nr("txt");class lHe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Oge()),n.viewProps.bindClassModifiers(this.element),this.props_=n.props,this.props_.emitter.on("change",this.onChange_);const r=e.createElement("input");r.classList.add(Oge("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onChange_),this.value_=n.value,this.refresh()}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value_.rawValue)}onChange_(){this.refresh()}}class kL{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=n.parser,this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new lHe(e,{props:n.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const r=e.currentTarget.value,o=this.parser_(r);bi(o)||(this.value.rawValue=o),this.view.refresh()}}function uHe(t){return String(t)}function g$(t){return t==="false"?!1:!!t}function Dge(t){return uHe(t)}function cHe(t){return e=>t.reduce((n,r)=>n!==null?n:r(e),null)}const dHe=Jo(0);function V3(t){return dHe(t)+"%"}function y$(t){return String(t)}function t9(t){return t}function Zg({primary:t,secondary:e,forward:n,backward:r}){let o=!1;function u(h){o||(o=!0,h(),o=!1)}t.emitter.on("change",h=>{u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),h.options)})}),e.emitter.on("change",h=>{u(()=>{t.setRawValue(r(t.rawValue,e.rawValue),h.options)}),u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),h.options)})}),u(()=>{e.setRawValue(n(t.rawValue,e.rawValue),{forceEmit:!1,last:!0})})}function Ro(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function jg(t){return{altKey:t.altKey,downKey:t.key==="ArrowDown",shiftKey:t.shiftKey,upKey:t.key==="ArrowUp"}}function zu(t){return{altKey:t.altKey,downKey:t.key==="ArrowLeft",shiftKey:t.shiftKey,upKey:t.key==="ArrowRight"}}function hHe(t){return t==="ArrowUp"||t==="ArrowDown"}function j3(t){return hHe(t)||t==="ArrowLeft"||t==="ArrowRight"}function b8(t,e){var n,r;const o=e.ownerDocument.defaultView,u=e.getBoundingClientRect();return{x:t.pageX-(((n=o&&o.scrollX)!==null&&n!==void 0?n:0)+u.left),y:t.pageY-(((r=o&&o.scrollY)!==null&&r!==void 0?r:0)+u.top)}}class Dh{constructor(e){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=e,this.emitter=new ws,e.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),e.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),e.addEventListener("touchend",this.onTouchEnd_),e.addEventListener("mousedown",this.onMouseDown_)}computePosition_(e){const n=this.elem_.getBoundingClientRect();return{bounds:{width:n.width,height:n.height},point:e?{x:e.x,y:e.y}:null}}onMouseDown_(e){var n;e.preventDefault(),(n=e.currentTarget)===null||n===void 0||n.focus();const r=this.elem_.ownerDocument;r.addEventListener("mousemove",this.onDocumentMouseMove_),r.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(b8(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseMove_(e){this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(b8(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onDocumentMouseUp_(e){const n=this.elem_.ownerDocument;n.removeEventListener("mousemove",this.onDocumentMouseMove_),n.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(b8(e,this.elem_)),sender:this,shiftKey:e.shiftKey})}onTouchStart_(e){e.preventDefault();const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchMove_(e){const n=e.targetTouches.item(0),r=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:e.altKey,data:this.computePosition_(n?{x:n.clientX-r.left,y:n.clientY-r.top}:void 0),sender:this,shiftKey:e.shiftKey}),this.lastTouch_=n}onTouchEnd_(e){var n;const r=(n=e.targetTouches.item(0))!==null&&n!==void 0?n:this.lastTouch_,o=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:e.altKey,data:this.computePosition_(r?{x:r.clientX-o.left,y:r.clientY-o.top}:void 0),sender:this,shiftKey:e.shiftKey})}}const Pl=nr("txt");class pHe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(Pl(),Pl(void 0,"num")),n.arrayPosition&&this.element.classList.add(Pl(void 0,n.arrayPosition)),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add(Pl("i")),r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=n.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Pl()),this.inputElement.classList.add(Pl("i"));const o=e.createElement("div");o.classList.add(Pl("k")),this.element.appendChild(o),this.knobElement=o;const u=e.createElementNS(Ao,"svg");u.classList.add(Pl("g")),this.knobElement.appendChild(u);const h=e.createElementNS(Ao,"path");h.classList.add(Pl("gb")),u.appendChild(h),this.guideBodyElem_=h;const m=e.createElementNS(Ao,"path");m.classList.add(Pl("gh")),u.appendChild(m),this.guideHeadElem_=m;const _=e.createElement("div");_.classList.add(nr("tt")()),this.knobElement.appendChild(_),this.tooltipElem_=_,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.refresh()}onDraggingChange_(e){if(e.rawValue===null){this.element.classList.remove(Pl(void 0,"drg"));return}this.element.classList.add(Pl(void 0,"drg"));const n=e.rawValue/this.props_.get("pointerScale"),r=n+(n>0?-1:n<0?1:0),o=Ii(-r,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${r+o},0 L${r},4 L${r+o},8`,`M ${n},-1 L${n},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${n},4`);const u=this.props_.get("formatter");this.tooltipElem_.textContent=u(this.value.rawValue),this.tooltipElem_.style.left=`${n}px`}refresh(){const e=this.props_.get("formatter");this.inputElement.value=e(this.value.rawValue)}onChange_(){this.refresh()}}class VP{constructor(e,n){var r;this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.parser_=n.parser,this.props=n.props,this.sliderProps_=(r=n.sliderProps)!==null&&r!==void 0?r:null,this.value=n.value,this.viewProps=n.viewProps,this.dragging_=ji(null),this.view=new pHe(e,{arrayPosition:n.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const o=new Dh(this.view.knobElement);o.emitter.on("down",this.onPointerDown_),o.emitter.on("move",this.onPointerMove_),o.emitter.on("up",this.onPointerUp_)}constrainValue_(e){var n,r;const o=(n=this.sliderProps_)===null||n===void 0?void 0:n.get("min"),u=(r=this.sliderProps_)===null||r===void 0?void 0:r.get("max");let h=e;return o!==void 0&&(h=Math.max(h,o)),u!==void 0&&(h=Math.min(h,u)),h}onInputChange_(e){const r=e.currentTarget.value,o=this.parser_(r);bi(o)||(this.value.rawValue=this.constrainValue_(o)),this.view.refresh()}onInputKeyDown_(e){const n=Ro(this.props.get("keyScale"),jg(e));n!==0&&this.value.setRawValue(this.constrainValue_(this.value.rawValue+n),{forceEmit:!1,last:!1})}onInputKeyUp_(e){Ro(this.props.get("keyScale"),jg(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(e){if(!e.point)return null;const n=e.point.x-e.bounds.width/2;return this.constrainValue_(this.originRawValue_+n*this.props.get("pointerScale"))}onPointerMove_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(e){const n=this.computeDraggingValue_(e.data);n!==null&&(this.value.setRawValue(n,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const _8=nr("sld");class fHe{constructor(e,n){this.onChange_=this.onChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onChange_),this.element=e.createElement("div"),this.element.classList.add(_8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(_8("t")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.trackElement=r;const o=e.createElement("div");o.classList.add(_8("k")),this.trackElement.appendChild(o),this.knobElement=o,n.value.emitter.on("change",this.onChange_),this.value=n.value,this.update_()}update_(){const e=Ii(Zn(this.value.rawValue,this.props_.get("min"),this.props_.get("max"),0,100),0,100);this.knobElement.style.width=`${e}%`}onChange_(){this.update_()}}class mHe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.props=n.props,this.view=new fHe(e,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Dh(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){e.point&&this.value.setRawValue(Zn(Ii(e.point.x,0,e.bounds.width),0,e.bounds.width,this.props.get("min"),this.props.get("max")),n)}onPointerDownOrMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ro(this.props.get("keyScale"),zu(e));n!==0&&this.value.setRawValue(this.value.rawValue+n,{forceEmit:!1,last:!1})}onKeyUp_(e){Ro(this.props.get("keyScale"),zu(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const w8=nr("sldtxt");class vHe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(w8());const r=e.createElement("div");r.classList.add(w8("s")),this.sliderView_=n.sliderView,r.appendChild(this.sliderView_.element),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(w8("t")),this.textView_=n.textView,o.appendChild(this.textView_.element),this.element.appendChild(o)}}class Lge{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sliderC_=new mHe(e,{props:n.sliderProps,value:n.value,viewProps:this.viewProps}),this.textC_=new VP(e,{parser:n.parser,props:n.textProps,sliderProps:n.sliderProps,value:n.value,viewProps:n.viewProps}),this.view=new vHe(e,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}importProps(e){return Hu(e,null,n=>({max:n.required.number,min:n.required.number}),n=>{const r=this.sliderC_.props;return r.set("max",n.max),r.set("min",n.min),!0})}exportProps(){const e=this.sliderC_.props;return Gu(null,{max:e.get("max"),min:e.get("min")})}}function gHe(t){return{sliderProps:new Jn({keyScale:t.keyScale,max:t.max,min:t.min}),textProps:new Jn({formatter:ji(t.formatter),keyScale:t.keyScale,pointerScale:ji(t.pointerScale)})}}const yHe={containerUnitSize:"cnt-usz"};function b1e(t){return`--${yHe[t]}`}class _1e{constructor(e,n){const r=nr(n.viewName);this.element=e.createElement("div"),this.element.classList.add(r()),n.viewProps.bindClassModifiers(this.element)}}function mP(t){return o$(t)}function Nf(t){if(ZH(t))return zi(t,mP)}function bh(t,e){if(!t)return;const n=[],r=n$(t,e);r&&n.push(r);const o=r$(t);return o&&n.push(o),new lw(n)}function w1e(t){if(t==="inline"||t==="popup")return t}function um(t,e){t.write(e)}const OD=nr("ckb");class bHe{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(OD()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(OD("l")),this.element.appendChild(r);const o=e.createElement("input");o.classList.add(OD("i")),o.type="checkbox",r.appendChild(o),this.inputElement=o,n.viewProps.bindDisabled(this.inputElement);const u=e.createElement("div");u.classList.add(OD("w")),r.appendChild(u);const h=xL(e,"check");u.appendChild(h),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class _He{constructor(e,n){this.onInputChange_=this.onInputChange_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new bHe(e,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(e){const n=e.currentTarget;this.value.rawValue=n.checked}}function wHe(t){const e=[],n=m$(t.options);return n&&e.push(n),new lw(e)}Ji({id:"input-bool",type:"input",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=zi(e,r=>({options:r.optional.custom(PL),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>g$,constraint:t=>wHe(t.params),writer:t=>um},controller:t=>{const e=t.document,n=t.value,r=t.constraint,o=r&&fP(r,CL);return o?new q_(e,{props:new Jn({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new _He(e,{value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="boolean"?null:t.controller.valueController instanceof q_?new f$(t.controller):null}});const sg=nr("col");class xHe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(sg()),n.foldable.bindExpandedClass(this.element,sg(void 0,"expanded")),jl(n.foldable,"completed",lm(this.element,sg(void 0,"cpl")));const r=e.createElement("div");r.classList.add(sg("h")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(sg("s")),r.appendChild(o),this.swatchElement=o;const u=e.createElement("div");if(u.classList.add(sg("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const h=e.createElement("div");h.classList.add(sg("p")),this.element.appendChild(h),this.pickerElement=h}else this.pickerElement=null}}function SHe(t,e,n){const r=Ii(t/255,0,1),o=Ii(e/255,0,1),u=Ii(n/255,0,1),h=Math.max(r,o,u),m=Math.min(r,o,u),_=h-m;let x=0,M=0;const R=(m+h)/2;return _!==0&&(M=_/(1-Math.abs(h+m-1)),r===h?x=(o-u)/_:o===h?x=2+(u-r)/_:x=4+(r-o)/_,x=x/6+(x<0?1:0)),[x*360,M*100,R*100]}function EHe(t,e,n){const r=(t%360+360)%360,o=Ii(e/100,0,1),u=Ii(n/100,0,1),h=(1-Math.abs(2*u-1))*o,m=h*(1-Math.abs(r/60%2-1)),_=u-h/2;let x,M,R;return r>=0&&r<60?[x,M,R]=[h,m,0]:r>=60&&r<120?[x,M,R]=[m,h,0]:r>=120&&r<180?[x,M,R]=[0,h,m]:r>=180&&r<240?[x,M,R]=[0,m,h]:r>=240&&r<300?[x,M,R]=[m,0,h]:[x,M,R]=[h,0,m],[(x+_)*255,(M+_)*255,(R+_)*255]}function CHe(t,e,n){const r=Ii(t/255,0,1),o=Ii(e/255,0,1),u=Ii(n/255,0,1),h=Math.max(r,o,u),m=Math.min(r,o,u),_=h-m;let x;_===0?x=0:h===r?x=60*(((o-u)/_%6+6)%6):h===o?x=60*((u-r)/_+2):x=60*((r-o)/_+4);const M=h===0?0:_/h,R=h;return[x,M*100,R*100]}function x1e(t,e,n){const r=u1e(t,360),o=Ii(e/100,0,1),u=Ii(n/100,0,1),h=u*o,m=h*(1-Math.abs(r/60%2-1)),_=u-h;let x,M,R;return r>=0&&r<60?[x,M,R]=[h,m,0]:r>=60&&r<120?[x,M,R]=[m,h,0]:r>=120&&r<180?[x,M,R]=[0,h,m]:r>=180&&r<240?[x,M,R]=[0,m,h]:r>=240&&r<300?[x,M,R]=[m,0,h]:[x,M,R]=[h,0,m],[(x+_)*255,(M+_)*255,(R+_)*255]}function PHe(t,e,n){const r=n+e*(100-Math.abs(2*n-100))/200;return[t,r!==0?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/(2*100)]}function kHe(t,e,n){const r=100-Math.abs(n*(200-e)/100-100);return[t,r!==0?e*n/r:0,n*(200-e)/(2*100)]}function qc(t){return[t[0],t[1],t[2]]}function TL(t,e){return[t[0],t[1],t[2],e]}const THe={hsl:{hsl:(t,e,n)=>[t,e,n],hsv:PHe,rgb:EHe},hsv:{hsl:kHe,hsv:(t,e,n)=>[t,e,n],rgb:x1e},rgb:{hsl:SHe,hsv:CHe,rgb:(t,e,n)=>[t,e,n]}};function X_(t,e){return[e==="float"?1:t==="rgb"?255:360,e==="float"?1:t==="rgb"?255:100,e==="float"?1:t==="rgb"?255:100]}function MHe(t,e){return t===e?e:u1e(t,e)}function S1e(t,e,n){var r;const o=X_(e,n);return[e==="rgb"?Ii(t[0],0,o[0]):MHe(t[0],o[0]),Ii(t[1],0,o[1]),Ii(t[2],0,o[2]),Ii((r=t[3])!==null&&r!==void 0?r:1,0,1)]}function Nge(t,e,n,r){const o=X_(e,n),u=X_(e,r);return t.map((h,m)=>h/o[m]*u[m])}function E1e(t,e,n){const r=Nge(t,e.mode,e.type,"int"),o=THe[e.mode][n.mode](...r);return Nge(o,n.mode,"int",n.type)}class Tr{static black(){return new Tr([0,0,0],"rgb")}constructor(e,n){this.type="int",this.mode=n,this.comps_=S1e(e,n,this.type)}getComponents(e){return TL(E1e(qc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const wf=nr("colp");class AHe{constructor(e,n){this.alphaViews_=null,this.element=e.createElement("div"),this.element.classList.add(wf()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(wf("hsv"));const o=e.createElement("div");o.classList.add(wf("sv")),this.svPaletteView_=n.svPaletteView,o.appendChild(this.svPaletteView_.element),r.appendChild(o);const u=e.createElement("div");u.classList.add(wf("h")),this.hPaletteView_=n.hPaletteView,u.appendChild(this.hPaletteView_.element),r.appendChild(u),this.element.appendChild(r);const h=e.createElement("div");if(h.classList.add(wf("rgb")),this.textsView_=n.textsView,h.appendChild(this.textsView_.element),this.element.appendChild(h),n.alphaViews){this.alphaViews_={palette:n.alphaViews.palette,text:n.alphaViews.text};const m=e.createElement("div");m.classList.add(wf("a"));const _=e.createElement("div");_.classList.add(wf("ap")),_.appendChild(this.alphaViews_.palette.element),m.appendChild(_);const x=e.createElement("div");x.classList.add(wf("at")),x.appendChild(this.alphaViews_.text.element),m.appendChild(x),this.element.appendChild(m)}}get allFocusableElements(){const e=[this.svPaletteView_.element,this.hPaletteView_.element,this.textsView_.modeSelectElement,...this.textsView_.inputViews.map(n=>n.inputElement)];return this.alphaViews_&&e.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),e}}function IHe(t){return t==="int"?"int":t==="float"?"float":void 0}function b$(t){return zi(t,e=>({color:e.optional.object({alpha:e.optional.boolean,type:e.optional.custom(IHe)}),expanded:e.optional.boolean,picker:e.optional.custom(w1e),readonly:e.optional.constant(!1)}))}function zg(t){return t?.1:1}function C1e(t){var e;return(e=t.color)===null||e===void 0?void 0:e.type}class _${constructor(e,n){this.type="float",this.mode=n,this.comps_=S1e(e,n,this.type)}getComponents(e){return TL(E1e(qc(this.comps_),{mode:this.mode,type:this.type},{mode:e??this.mode,type:this.type}),this.comps_[3])}toRgbaObject(){const e=this.getComponents("rgb");return{r:e[0],g:e[1],b:e[2],a:e[3]}}}const RHe={int:(t,e)=>new Tr(t,e),float:(t,e)=>new _$(t,e)};function w$(t,e,n){return RHe[n](t,e)}function OHe(t){return t.type==="float"}function DHe(t){return t.type==="int"}function LHe(t){const e=t.getComponents(),n=X_(t.mode,"int");return new Tr([Math.round(Zn(e[0],0,1,0,n[0])),Math.round(Zn(e[1],0,1,0,n[1])),Math.round(Zn(e[2],0,1,0,n[2])),e[3]],t.mode)}function NHe(t){const e=t.getComponents(),n=X_(t.mode,"int");return new _$([Zn(e[0],0,n[0],0,1),Zn(e[1],0,n[1],0,1),Zn(e[2],0,n[2],0,1),e[3]],t.mode)}function $s(t,e){if(t.type===e)return t;if(DHe(t)&&e==="float")return NHe(t);if(OHe(t)&&e==="int")return LHe(t);throw zs.shouldNeverHappen()}function FHe(t,e){return t.alpha===e.alpha&&t.mode===e.mode&&t.notation===e.notation&&t.type===e.type}function Nl(t,e){const n=t.match(/^(.+)%$/);return Math.min(n?parseFloat(n[1])*.01*e:parseFloat(t),e)}const BHe={deg:t=>t,grad:t=>t*360/400,rad:t=>t*360/(2*Math.PI),turn:t=>t*360};function P1e(t){const e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);const n=parseFloat(e[1]),r=e[2];return BHe[r](n)}function k1e(t){const e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Nl(e[1],255),Nl(e[2],255),Nl(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function UHe(t){const e=k1e(t);return e?new Tr(e,"rgb"):null}function T1e(t){const e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[Nl(e[1],255),Nl(e[2],255),Nl(e[3],255),Nl(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function VHe(t){const e=T1e(t);return e?new Tr(e,"rgb"):null}function M1e(t){const e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[P1e(e[1]),Nl(e[2],100),Nl(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function jHe(t){const e=M1e(t);return e?new Tr(e,"hsl"):null}function A1e(t){const e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;const n=[P1e(e[1]),Nl(e[2],100),Nl(e[3],100),Nl(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function zHe(t){const e=A1e(t);return e?new Tr(e,"hsl"):null}function I1e(t){const e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)];const n=t.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:null}function HHe(t){const e=I1e(t);return e?new Tr(e,"rgb"):null}function R1e(t){const e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Zn(parseInt(e[4]+e[4],16),0,255,0,1)];const n=t.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Zn(parseInt(n[4],16),0,255,0,1)]:null}function GHe(t){const e=R1e(t);return e?new Tr(e,"rgb"):null}function O1e(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function Fge(t){return e=>{const n=O1e(e);return n?w$(n,"rgb",t):null}}function D1e(t){const e=t.match(/^\{\s*r\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*g\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*b\s*:\s*([0-9A-Fa-f.]+%?)\s*,\s*a\s*:\s*([0-9A-Fa-f.]+%?)\s*\}$/);if(!e)return null;const n=[parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]),parseFloat(e[4])];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:n}function Bge(t){return e=>{const n=D1e(e);return n?w$(n,"rgb",t):null}}const $He=[{parser:I1e,result:{alpha:!1,mode:"rgb",notation:"hex"}},{parser:R1e,result:{alpha:!0,mode:"rgb",notation:"hex"}},{parser:k1e,result:{alpha:!1,mode:"rgb",notation:"func"}},{parser:T1e,result:{alpha:!0,mode:"rgb",notation:"func"}},{parser:M1e,result:{alpha:!1,mode:"hsl",notation:"func"}},{parser:A1e,result:{alpha:!0,mode:"hsl",notation:"func"}},{parser:O1e,result:{alpha:!1,mode:"rgb",notation:"object"}},{parser:D1e,result:{alpha:!0,mode:"rgb",notation:"object"}}];function WHe(t){return $He.reduce((e,{parser:n,result:r})=>e||(n(t)?r:null),null)}function KHe(t,e="int"){const n=WHe(t);return n?n.notation==="hex"&&e!=="float"?Object.assign(Object.assign({},n),{type:"int"}):n.notation==="func"?Object.assign(Object.assign({},n),{type:e}):null:null}function jP(t){const e=[HHe,GHe,UHe,VHe,jHe,zHe];t==="int"&&e.push(Fge("int"),Bge("int")),t==="float"&&e.push(Fge("float"),Bge("float"));const n=cHe(e);return r=>{const o=n(r);return o?$s(o,t):null}}function qHe(t){const e=jP("int");if(typeof t!="string")return Tr.black();const n=e(t);return n??Tr.black()}function L1e(t){const e=Ii(Math.floor(t),0,255).toString(16);return e.length===1?`0${e}`:e}function x$(t,e="#"){const n=qc(t.getComponents("rgb")).map(L1e).join("");return`${e}${n}`}function S$(t,e="#"){const n=t.getComponents("rgb"),r=[n[0],n[1],n[2],n[3]*255].map(L1e).join("");return`${e}${r}`}function N1e(t){const e=Jo(0),n=$s(t,"int");return`rgb(${qc(n.getComponents("rgb")).map(o=>e(o)).join(", ")})`}function e3(t){const e=Jo(2),n=Jo(0);return`rgba(${$s(t,"int").getComponents("rgb").map((u,h)=>(h===3?e:n)(u)).join(", ")})`}function XHe(t){const e=[Jo(0),V3,V3],n=$s(t,"int");return`hsl(${qc(n.getComponents("hsl")).map((o,u)=>e[u](o)).join(", ")})`}function YHe(t){const e=[Jo(0),V3,V3,Jo(2)];return`hsla(${$s(t,"int").getComponents("hsl").map((o,u)=>e[u](o)).join(", ")})`}function F1e(t,e){const n=Jo(e==="float"?2:0),r=["r","g","b"],o=$s(t,e);return`{${qc(o.getComponents("rgb")).map((h,m)=>`${r[m]}: ${n(h)}`).join(", ")}}`}function ZHe(t){return e=>F1e(e,t)}function B1e(t,e){const n=Jo(2),r=Jo(e==="float"?2:0),o=["r","g","b","a"];return`{${$s(t,e).getComponents("rgb").map((m,_)=>{const x=_===3?n:r;return`${o[_]}: ${x(m)}`}).join(", ")}}`}function QHe(t){return e=>B1e(e,t)}const JHe=[{format:{alpha:!1,mode:"rgb",notation:"hex",type:"int"},stringifier:x$},{format:{alpha:!0,mode:"rgb",notation:"hex",type:"int"},stringifier:S$},{format:{alpha:!1,mode:"rgb",notation:"func",type:"int"},stringifier:N1e},{format:{alpha:!0,mode:"rgb",notation:"func",type:"int"},stringifier:e3},{format:{alpha:!1,mode:"hsl",notation:"func",type:"int"},stringifier:XHe},{format:{alpha:!0,mode:"hsl",notation:"func",type:"int"},stringifier:YHe},...["int","float"].reduce((t,e)=>[...t,{format:{alpha:!1,mode:"rgb",notation:"object",type:e},stringifier:ZHe(e)},{format:{alpha:!0,mode:"rgb",notation:"object",type:e},stringifier:QHe(e)}],[])];function U1e(t){return JHe.reduce((e,n)=>e||(FHe(n.format,t)?n.stringifier:null),null)}const pC=nr("apl");class e9e{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(pC()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(pC("b")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(pC("c")),r.appendChild(o),this.colorElem_=o;const u=e.createElement("div");u.classList.add(pC("m")),this.element.appendChild(u),this.markerElem_=u;const h=e.createElement("div");h.classList.add(pC("p")),this.markerElem_.appendChild(h),this.previewElem_=h,this.update_()}update_(){const e=this.value.rawValue,n=e.getComponents("rgb"),r=new Tr([n[0],n[1],n[2],0],"rgb"),o=new Tr([n[0],n[1],n[2],255],"rgb"),u=["to right",e3(r),e3(o)];this.colorElem_.style.background=`linear-gradient(${u.join(",")})`,this.previewElem_.style.backgroundColor=e3(e);const h=Zn(n[3],0,1,0,100);this.markerElem_.style.left=`${h}%`}onValueChange_(){this.update_()}}class t9e{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new e9e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Dh(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=e.point.x/e.bounds.width,o=this.value.rawValue,[u,h,m]=o.getComponents("hsv");this.value.setRawValue(new Tr([u,h,m,r],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ro(zg(!0),zu(e));if(n===0)return;const r=this.value.rawValue,[o,u,h,m]=r.getComponents("hsv");this.value.setRawValue(new Tr([o,u,h,m+n],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ro(zg(!0),zu(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const n_=nr("coltxt");function n9e(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"},{text:"HEX",value:"hex"}];return e.appendChild(n.reduce((r,o)=>{const u=t.createElement("option");return u.textContent=o.text,u.value=o.value,r.appendChild(u),r},t.createDocumentFragment())),e}class r9e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(n_()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(n_("m")),this.modeElem_=n9e(e),this.modeElem_.classList.add(n_("ms")),r.appendChild(this.modeSelectElement),n.viewProps.bindDisabled(this.modeElem_);const o=e.createElement("div");o.classList.add(n_("mm")),o.appendChild(xL(e,"dropdown")),r.appendChild(o),this.element.appendChild(r);const u=e.createElement("div");u.classList.add(n_("w")),this.element.appendChild(u),this.inputsElem_=u,this.inputViews_=n.inputViews,this.applyInputViews_(),Bl(n.mode,h=>{this.modeElem_.value=h})}get modeSelectElement(){return this.modeElem_}get inputViews(){return this.inputViews_}set inputViews(e){this.inputViews_=e,this.applyInputViews_()}applyInputViews_(){h1e(this.inputsElem_);const e=this.element.ownerDocument;this.inputViews_.forEach(n=>{const r=e.createElement("div");r.classList.add(n_("c")),r.appendChild(n.element),this.inputsElem_.appendChild(r)})}}function i9e(t){return Jo(t==="float"?2:0)}function o9e(t,e,n){const r=X_(t,e)[n];return new BP({min:0,max:r})}function s9e(t,e,n){return new VP(t,{arrayPosition:n===0?"fst":n===3-1?"lst":"mid",parser:e.parser,props:Jn.fromObject({formatter:i9e(e.colorType),keyScale:zg(!1),pointerScale:e.colorType==="float"?.01:1}),value:ji(0,{constraint:o9e(e.colorMode,e.colorType,n)}),viewProps:e.viewProps})}function a9e(t,e){const n={colorMode:e.colorMode,colorType:e.colorType,parser:ju,viewProps:e.viewProps};return[0,1,2].map(r=>{const o=s9e(t,n,r);return Zg({primary:e.value,secondary:o.value,forward(u){return $s(u,e.colorType).getComponents(e.colorMode)[r]},backward(u,h){const m=e.colorMode,x=$s(u,e.colorType).getComponents(m);x[r]=h;const M=w$(TL(qc(x),x[3]),m,e.colorType);return $s(M,"int")}}),o})}function l9e(t,e){const n=new kL(t,{parser:jP("int"),props:Jn.fromObject({formatter:x$}),value:ji(Tr.black()),viewProps:e.viewProps});return Zg({primary:e.value,secondary:n.value,forward:r=>new Tr(qc(r.getComponents()),r.mode),backward:(r,o)=>new Tr(TL(qc(o.getComponents(r.mode)),r.getComponents()[3]),r.mode)}),[n]}function u9e(t){return t!=="hex"}class c9e{constructor(e,n){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.colorType_=n.colorType,this.value=n.value,this.viewProps=n.viewProps,this.colorMode=ji(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(e),this.view=new r9e(e,{mode:this.colorMode,inputViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view],viewProps:this.viewProps}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(e){const n=this.colorMode.rawValue;return u9e(n)?a9e(e,{colorMode:n,colorType:this.colorType_,value:this.value,viewProps:this.viewProps}):l9e(e,{value:this.value,viewProps:this.viewProps})}onModeSelectChange_(e){const n=e.currentTarget;this.colorMode.rawValue=n.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.inputViews=this.ccs_.map(r=>r.view)}}const x8=nr("hpl");class d9e{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(x8()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(x8("c")),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(x8("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}update_(){const e=this.value.rawValue,[n]=e.getComponents("hsv");this.markerElem_.style.backgroundColor=N1e(new Tr([n,100,100],"hsv"));const r=Zn(n,0,360,0,100);this.markerElem_.style.left=`${r}%`}onValueChange_(){this.update_()}}class h9e{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new d9e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Dh(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Zn(Ii(e.point.x,0,e.bounds.width),0,e.bounds.width,0,360),o=this.value.rawValue,[,u,h,m]=o.getComponents("hsv");this.value.setRawValue(new Tr([r,u,h,m],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){const n=Ro(zg(!1),zu(e));if(n===0)return;const r=this.value.rawValue,[o,u,h,m]=r.getComponents("hsv");this.value.setRawValue(new Tr([o+n,u,h,m],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){Ro(zg(!1),zu(e))!==0&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const S8=nr("svp"),Uge=64;class p9e{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),this.value=n.value,this.value.emitter.on("change",this.onValueChange_),this.element=e.createElement("div"),this.element.classList.add(S8()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("canvas");r.height=Uge,r.width=Uge,r.classList.add(S8("c")),this.element.appendChild(r),this.canvasElement=r;const o=e.createElement("div");o.classList.add(S8("m")),this.element.appendChild(o),this.markerElem_=o,this.update_()}update_(){const e=S8e(this.canvasElement);if(!e)return;const r=this.value.rawValue.getComponents("hsv"),o=this.canvasElement.width,u=this.canvasElement.height,h=e.getImageData(0,0,o,u),m=h.data;for(let M=0;M<u;M++)for(let R=0;R<o;R++){const N=Zn(R,0,o,0,100),H=Zn(M,0,u,100,0),Q=x1e(r[0],N,H),j=(M*o+R)*4;m[j]=Q[0],m[j+1]=Q[1],m[j+2]=Q[2],m[j+3]=255}e.putImageData(h,0,0);const _=Zn(r[1],0,100,0,100);this.markerElem_.style.left=`${_}%`;const x=Zn(r[2],0,100,100,0);this.markerElem_.style.top=`${x}%`}onValueChange_(){this.update_()}}class f9e{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.view=new p9e(e,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Dh(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=Zn(e.point.x,0,e.bounds.width,0,100),o=Zn(e.point.y,0,e.bounds.height,100,0),[u,,,h]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Tr([u,r,o,h],"hsv"),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onKeyDown_(e){j3(e.key)&&e.preventDefault();const[n,r,o,u]=this.value.rawValue.getComponents("hsv"),h=zg(!1),m=Ro(h,zu(e)),_=Ro(h,jg(e));m===0&&_===0||this.value.setRawValue(new Tr([n,r+m,o+_,u],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(e){const n=zg(!1),r=Ro(n,zu(e)),o=Ro(n,jg(e));r===0&&o===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class m9e{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.hPaletteC_=new h9e(e,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new f9e(e,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=n.supportsAlpha?{palette:new t9e(e,{value:this.value,viewProps:this.viewProps}),text:new VP(e,{parser:ju,props:Jn.fromObject({pointerScale:.01,keyScale:.1,formatter:Jo(2)}),value:ji(0,{constraint:new BP({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Zg({primary:this.value,secondary:this.alphaIcs_.text.value,forward:r=>r.getComponents()[3],backward:(r,o)=>{const u=r.getComponents();return u[3]=o,new Tr(u,r.mode)}}),this.textsC_=new c9e(e,{colorType:n.colorType,value:this.value,viewProps:this.viewProps}),this.view=new AHe(e,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:n.supportsAlpha,svPaletteView:this.svPaletteC_.view,textsView:this.textsC_.view,viewProps:this.viewProps})}get textsController(){return this.textsC_}}const E8=nr("colsw");class v9e{constructor(e,n){this.onValueChange_=this.onValueChange_.bind(this),n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.element=e.createElement("div"),this.element.classList.add(E8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(E8("sw")),this.element.appendChild(r),this.swatchElem_=r;const o=e.createElement("button");o.classList.add(E8("b")),n.viewProps.bindDisabled(o),this.element.appendChild(o),this.buttonElement=o,this.update_()}update_(){const e=this.value.rawValue;this.swatchElem_.style.backgroundColor=S$(e)}onValueChange_(){this.update_()}}class g9e{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new v9e(e,{value:this.value,viewProps:this.viewProps})}}class E${constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=aw.create(n.expanded),this.swatchC_=new g9e(e,{value:this.value,viewProps:this.viewProps});const r=this.swatchC_.view.buttonElement;r.addEventListener("blur",this.onButtonBlur_),r.addEventListener("click",this.onButtonClick_),this.textC_=new kL(e,{parser:n.parser,props:Jn.fromObject({formatter:n.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new xHe(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_=n.pickerLayout==="popup"?new v$(e,{viewProps:this.viewProps}):null;const o=new m9e(e,{colorType:n.colorType,supportsAlpha:n.supportsAlpha,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach(u=>{u.addEventListener("blur",this.onPopupChildBlur_),u.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=o,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(o.view.element),Zg({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:u=>u,backward:(u,h)=>h})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),EL(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=u$(e);r&&n.contains(r)||r&&r===this.swatchC_.view.buttonElement&&!wL(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.swatchC_.view.buttonElement.focus()}}function y9e(t){return qc(t.getComponents("rgb")).reduce((e,n)=>e<<8|Math.floor(n)&255,0)}function b9e(t){return t.getComponents("rgb").reduce((e,n,r)=>{const o=Math.floor(r===3?n*255:n)&255;return e<<8|o},0)>>>0}function _9e(t){return new Tr([t>>16&255,t>>8&255,t&255],"rgb")}function w9e(t){return new Tr([t>>24&255,t>>16&255,t>>8&255,Zn(t&255,0,255,0,1)],"rgb")}function x9e(t){return typeof t!="number"?Tr.black():_9e(t)}function S9e(t){return typeof t!="number"?Tr.black():w9e(t)}function t3(t,e){return typeof t!="object"||bi(t)?!1:e in t&&typeof t[e]=="number"}function V1e(t){return t3(t,"r")&&t3(t,"g")&&t3(t,"b")}function j1e(t){return V1e(t)&&t3(t,"a")}function z1e(t){return V1e(t)}function C$(t,e){if(t.mode!==e.mode||t.type!==e.type)return!1;const n=t.getComponents(),r=e.getComponents();for(let o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0}function Vge(t){return"a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b]}function E9e(t){const e=U1e(t);return e?(n,r)=>{um(n,e(r))}:null}function C9e(t){const e=t?b9e:y9e;return(n,r)=>{um(n,e(r))}}function P9e(t,e,n){const o=$s(e,n).toRgbaObject();t.writeProperty("r",o.r),t.writeProperty("g",o.g),t.writeProperty("b",o.b),t.writeProperty("a",o.a)}function k9e(t,e,n){const o=$s(e,n).toRgbaObject();t.writeProperty("r",o.r),t.writeProperty("g",o.g),t.writeProperty("b",o.b)}function T9e(t,e){return(n,r)=>{t?P9e(n,r,e):k9e(n,r,e)}}function M9e(t){var e;return!!(!((e=t==null?void 0:t.color)===null||e===void 0)&&e.alpha)}function A9e(t){return t?e=>S$(e,"0x"):e=>x$(e,"0x")}function I9e(t){return"color"in t||t.view==="color"}Ji({id:"input-color-number",type:"input",accept:(t,e)=>{if(typeof t!="number"||!I9e(e))return null;const n=b$(e);return n?{initialValue:t,params:Object.assign(Object.assign({},n),{supportsAlpha:M9e(e)})}:null},binding:{reader:t=>t.params.supportsAlpha?S9e:x9e,equals:C$,writer:t=>C9e(t.params.supportsAlpha)},controller:t=>{var e,n;return new E$(t.document,{colorType:"int",expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:A9e(t.params.supportsAlpha),parser:jP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.supportsAlpha,value:t.value,viewProps:t.viewProps})}});function R9e(t,e){if(!z1e(t))return $s(Tr.black(),e);if(e==="int"){const n=Vge(t);return new Tr(n,"rgb")}if(e==="float"){const n=Vge(t);return new _$(n,"rgb")}return $s(Tr.black(),"int")}function O9e(t){return j1e(t)}function D9e(t){return e=>{const n=R9e(e,t);return $s(n,"int")}}function L9e(t,e){return n=>t?B1e(n,e):F1e(n,e)}Ji({id:"input-color-object",type:"input",accept:(t,e)=>{var n;if(!z1e(t))return null;const r=b$(e);return r?{initialValue:t,params:Object.assign(Object.assign({},r),{colorType:(n=C1e(e))!==null&&n!==void 0?n:"int"})}:null},binding:{reader:t=>D9e(t.params.colorType),equals:C$,writer:t=>T9e(O9e(t.initialValue),t.params.colorType)},controller:t=>{var e,n;const r=j1e(t.initialValue);return new E$(t.document,{colorType:t.params.colorType,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:L9e(r,t.params.colorType),parser:jP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:r,value:t.value,viewProps:t.viewProps})}});Ji({id:"input-color-string",type:"input",accept:(t,e)=>{if(typeof t!="string"||e.view==="text")return null;const n=KHe(t,C1e(e));if(!n)return null;const r=U1e(n);if(!r)return null;const o=b$(e);return o?{initialValue:t,params:Object.assign(Object.assign({},o),{format:n,stringifier:r})}:null},binding:{reader:()=>qHe,equals:C$,writer:t=>{const e=E9e(t.params.format);if(!e)throw zs.notBindable();return e}},controller:t=>{var e,n;return new E$(t.document,{colorType:t.params.format.type,expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,formatter:t.params.stringifier,parser:jP("int"),pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",supportsAlpha:t.params.format.alpha,value:t.value,viewProps:t.viewProps})}});class ML{constructor(e){this.components=e.components,this.asm_=e.assembly}constrain(e){const n=this.asm_.toComponents(e).map((r,o)=>{var u,h;return(h=(u=this.components[o])===null||u===void 0?void 0:u.constrain(r))!==null&&h!==void 0?h:r});return this.asm_.fromComponents(n)}}const jge=nr("pndtxt");class N9e{constructor(e,n){this.textViews=n.textViews,this.element=e.createElement("div"),this.element.classList.add(jge()),this.textViews.forEach(r=>{const o=e.createElement("div");o.classList.add(jge("a")),o.appendChild(r.element),this.element.appendChild(o)})}}function F9e(t,e,n){return new VP(t,{arrayPosition:n===0?"fst":n===e.axes.length-1?"lst":"mid",parser:e.parser,props:e.axes[n].textProps,value:ji(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class uw{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.acs_=n.axes.map((r,o)=>F9e(e,n,o)),this.acs_.forEach((r,o)=>{Zg({primary:this.value,secondary:r.value,forward:u=>n.assembly.toComponents(u)[o],backward:(u,h)=>{const m=n.assembly.toComponents(u);return m[o]=h,n.assembly.fromComponents(m)}})}),this.view=new N9e(e,{textViews:this.acs_.map(r=>r.view)})}get textControllers(){return this.acs_}}class B9e extends a${get max(){return this.controller.valueController.sliderController.props.get("max")}set max(e){this.controller.valueController.sliderController.props.set("max",e)}get min(){return this.controller.valueController.sliderController.props.get("min")}set min(e){this.controller.valueController.sliderController.props.set("min",e)}}function U9e(t,e){const n=[],r=n$(t,e);r&&n.push(r);const o=r$(t);o&&n.push(o);const u=m$(t.options);return u&&n.push(u),new lw(n)}Ji({id:"input-number",type:"input",accept:(t,e)=>{if(typeof t!="number")return null;const n=zi(e,r=>Object.assign(Object.assign({},o$(r)),{options:r.optional.custom(PL),readonly:r.optional.constant(!1)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>t$,constraint:t=>U9e(t.params,t.initialValue),writer:t=>um},controller:t=>{const e=t.value,n=t.constraint,r=n&&fP(n,CL);if(r)return new q_(t.document,{props:new Jn({options:r.values.value("options")}),value:e,viewProps:t.viewProps});const o=i$(t.params,e.rawValue),u=n&&fP(n,BP);return u?new Lge(t.document,Object.assign(Object.assign({},gHe(Object.assign(Object.assign({},o),{keyScale:ji(o.keyScale),max:u.values.value("max"),min:u.values.value("min")}))),{parser:ju,value:e,viewProps:t.viewProps})):new VP(t.document,{parser:ju,props:Jn.fromObject(o),value:e,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="number"?null:t.controller.valueController instanceof Lge?new B9e(t.controller):t.controller.valueController instanceof q_?new f$(t.controller):null}});class Xf{constructor(e=0,n=0){this.x=e,this.y=n}getComponents(){return[this.x,this.y]}static isObject(e){if(bi(e))return!1;const n=e.x,r=e.y;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y}toObject(){return{x:this.x,y:this.y}}}const H1e={toComponents:t=>t.getComponents(),fromComponents:t=>new Xf(...t)},r_=nr("p2d");class V9e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(r_()),n.viewProps.bindClassModifiers(this.element),Bl(n.expanded,lm(this.element,r_(void 0,"expanded")));const r=e.createElement("div");r.classList.add(r_("h")),this.element.appendChild(r);const o=e.createElement("button");o.classList.add(r_("b")),o.appendChild(xL(e,"p2dpad")),n.viewProps.bindDisabled(o),r.appendChild(o),this.buttonElement=o;const u=e.createElement("div");if(u.classList.add(r_("t")),r.appendChild(u),this.textElement=u,n.pickerLayout==="inline"){const h=e.createElement("div");h.classList.add(r_("p")),this.element.appendChild(h),this.pickerElement=h}else this.pickerElement=null}}const xf=nr("p2dp");class j9e{constructor(e,n){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onPropsChange_=this.onPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.props_=n.props,this.props_.emitter.on("change",this.onPropsChange_),this.element=e.createElement("div"),this.element.classList.add(xf()),n.layout==="popup"&&this.element.classList.add(xf(void 0,"p")),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(xf("p")),n.viewProps.bindTabIndex(r),this.element.appendChild(r),this.padElement=r;const o=e.createElementNS(Ao,"svg");o.classList.add(xf("g")),this.padElement.appendChild(o),this.svgElem_=o;const u=e.createElementNS(Ao,"line");u.classList.add(xf("ax")),u.setAttributeNS(null,"x1","0"),u.setAttributeNS(null,"y1","50%"),u.setAttributeNS(null,"x2","100%"),u.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(u);const h=e.createElementNS(Ao,"line");h.classList.add(xf("ax")),h.setAttributeNS(null,"x1","50%"),h.setAttributeNS(null,"y1","0"),h.setAttributeNS(null,"x2","50%"),h.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(h);const m=e.createElementNS(Ao,"line");m.classList.add(xf("l")),m.setAttributeNS(null,"x1","50%"),m.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(m),this.lineElem_=m;const _=e.createElement("div");_.classList.add(xf("m")),this.padElement.appendChild(_),this.markerElem_=_,n.value.emitter.on("change",this.onValueChange_),this.value=n.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[e,n]=this.value.rawValue.getComponents(),r=this.props_.get("max"),o=Zn(e,-r,+r,0,100),u=Zn(n,-r,+r,0,100),h=this.props_.get("invertsY")?100-u:u;this.lineElem_.setAttributeNS(null,"x2",`${o}%`),this.lineElem_.setAttributeNS(null,"y2",`${h}%`),this.markerElem_.style.left=`${o}%`,this.markerElem_.style.top=`${h}%`}onValueChange_(){this.update_()}onPropsChange_(){this.update_()}onFoldableChange_(){this.update_()}}function zge(t,e,n){return[Ro(e[0],zu(t)),Ro(e[1],jg(t))*(n?1:-1)]}class z9e{constructor(e,n){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.view=new j9e(e,{layout:n.layout,props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new Dh(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(e,n){if(!e.point)return;const r=this.props.get("max"),o=Zn(e.point.x,0,e.bounds.width,-r,+r),u=Zn(this.props.get("invertsY")?e.bounds.height-e.point.y:e.point.y,0,e.bounds.height,-r,+r);this.value.setRawValue(new Xf(o,u),n)}onPointerDown_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerMove_(e){this.handlePointerEvent_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.handlePointerEvent_(e.data,{forceEmit:!0,last:!0})}onPadKeyDown_(e){j3(e.key)&&e.preventDefault();const[n,r]=zge(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(new Xf(this.value.rawValue.x+n,this.value.rawValue.y+r),{forceEmit:!1,last:!1})}onPadKeyUp_(e){const[n,r]=zge(e,[this.props.get("xKeyScale"),this.props.get("yKeyScale")],this.props.get("invertsY"));n===0&&r===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class H9e{constructor(e,n){var r,o;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=aw.create(n.expanded),this.popC_=n.pickerLayout==="popup"?new v$(e,{viewProps:this.viewProps}):null;const u=new z9e(e,{layout:n.pickerLayout,props:new Jn({invertsY:ji(n.invertsY),max:ji(n.max),xKeyScale:n.axes[0].textProps.value("keyScale"),yKeyScale:n.axes[1].textProps.value("keyScale")}),value:this.value,viewProps:this.viewProps});u.view.allFocusableElements.forEach(h=>{h.addEventListener("blur",this.onPopupChildBlur_),h.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=u,this.textC_=new uw(e,{assembly:H1e,axes:n.axes,parser:n.parser,value:this.value,viewProps:this.viewProps}),this.view=new V9e(e,{expanded:this.foldable_.value("expanded"),pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),(r=this.view.buttonElement)===null||r===void 0||r.addEventListener("blur",this.onPadButtonBlur_),(o=this.view.buttonElement)===null||o===void 0||o.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Zg({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:h=>h,backward:(h,m)=>m})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),EL(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onPadButtonBlur_(e){if(!this.popC_)return;const n=this.view.element,r=e.relatedTarget;(!r||!n.contains(r))&&(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=u$(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!wL(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_?e.key==="Escape"&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&e.key==="Escape"&&this.view.buttonElement.focus()}}function G9e(t){return Xf.isObject(t)?new Xf(t.x,t.y):new Xf}function $9e(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function W9e(t,e){return new ML({assembly:H1e,components:[bh(Object.assign(Object.assign({},t),t.x),e.x),bh(Object.assign(Object.assign({},t),t.y),e.y)]})}function Hge(t,e){var n,r;if(!bi(t.min)||!bi(t.max))return Math.max(Math.abs((n=t.min)!==null&&n!==void 0?n:0),Math.abs((r=t.max)!==null&&r!==void 0?r:0));const o=c1e(t);return Math.max(Math.abs(o)*10,Math.abs(e)*10)}function K9e(t,e){var n,r;const o=Hge(Vg(t,(n=t.x)!==null&&n!==void 0?n:{}),e.x),u=Hge(Vg(t,(r=t.y)!==null&&r!==void 0?r:{}),e.y);return Math.max(o,u)}function q9e(t){if(!("y"in t))return!1;const e=t.y;return e&&"inverted"in e?!!e.inverted:!1}Ji({id:"input-point2d",type:"input",accept:(t,e)=>{if(!Xf.isObject(t))return null;const n=zi(e,r=>Object.assign(Object.assign({},mP(r)),{expanded:r.optional.boolean,picker:r.optional.custom(w1e),readonly:r.optional.constant(!1),x:r.optional.custom(Nf),y:r.optional.object(Object.assign(Object.assign({},mP(r)),{inverted:r.optional.boolean}))}));return n?{initialValue:t,params:n}:null},binding:{reader:()=>G9e,constraint:t=>W9e(t.params,t.initialValue),equals:Xf.equals,writer:()=>$9e},controller:t=>{var e,n;const r=t.document,o=t.value,u=t.constraint,h=[t.params.x,t.params.y];return new H9e(r,{axes:o.rawValue.getComponents().map((m,_)=>{var x;return s$({constraint:u.components[_],initialValue:m,params:Vg(t.params,(x=h[_])!==null&&x!==void 0?x:{})})}),expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,invertsY:q9e(t.params),max:K9e(t.params,o.rawValue),parser:ju,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:o,viewProps:t.viewProps})}});class D_{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.z=r}getComponents(){return[this.x,this.y,this.z]}static isObject(e){if(bi(e))return!1;const n=e.x,r=e.y,o=e.z;return!(typeof n!="number"||typeof r!="number"||typeof o!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const G1e={toComponents:t=>t.getComponents(),fromComponents:t=>new D_(...t)};function X9e(t){return D_.isObject(t)?new D_(t.x,t.y,t.z):new D_}function Y9e(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function Z9e(t,e){return new ML({assembly:G1e,components:[bh(Object.assign(Object.assign({},t),t.x),e.x),bh(Object.assign(Object.assign({},t),t.y),e.y),bh(Object.assign(Object.assign({},t),t.z),e.z)]})}Ji({id:"input-point3d",type:"input",accept:(t,e)=>{if(!D_.isObject(t))return null;const n=zi(e,r=>Object.assign(Object.assign({},mP(r)),{readonly:r.optional.constant(!1),x:r.optional.custom(Nf),y:r.optional.custom(Nf),z:r.optional.custom(Nf)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>X9e,constraint:t=>Z9e(t.params,t.initialValue),equals:D_.equals,writer:t=>Y9e},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z];return new uw(t.document,{assembly:G1e,axes:e.rawValue.getComponents().map((o,u)=>{var h;return s$({constraint:n.components[u],initialValue:o,params:Vg(t.params,(h=r[u])!==null&&h!==void 0?h:{})})}),parser:ju,value:e,viewProps:t.viewProps})}});class L_{constructor(e=0,n=0,r=0,o=0){this.x=e,this.y=n,this.z=r,this.w=o}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(e){if(bi(e))return!1;const n=e.x,r=e.y,o=e.z,u=e.w;return!(typeof n!="number"||typeof r!="number"||typeof o!="number"||typeof u!="number")}static equals(e,n){return e.x===n.x&&e.y===n.y&&e.z===n.z&&e.w===n.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const $1e={toComponents:t=>t.getComponents(),fromComponents:t=>new L_(...t)};function Q9e(t){return L_.isObject(t)?new L_(t.x,t.y,t.z,t.w):new L_}function J9e(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function eGe(t,e){return new ML({assembly:$1e,components:[bh(Object.assign(Object.assign({},t),t.x),e.x),bh(Object.assign(Object.assign({},t),t.y),e.y),bh(Object.assign(Object.assign({},t),t.z),e.z),bh(Object.assign(Object.assign({},t),t.w),e.w)]})}Ji({id:"input-point4d",type:"input",accept:(t,e)=>{if(!L_.isObject(t))return null;const n=zi(e,r=>Object.assign(Object.assign({},mP(r)),{readonly:r.optional.constant(!1),w:r.optional.custom(Nf),x:r.optional.custom(Nf),y:r.optional.custom(Nf),z:r.optional.custom(Nf)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>Q9e,constraint:t=>eGe(t.params,t.initialValue),equals:L_.equals,writer:t=>J9e},controller:t=>{const e=t.value,n=t.constraint,r=[t.params.x,t.params.y,t.params.z,t.params.w];return new uw(t.document,{assembly:$1e,axes:e.rawValue.getComponents().map((o,u)=>{var h;return s$({constraint:n.components[u],initialValue:o,params:Vg(t.params,(h=r[u])!==null&&h!==void 0?h:{})})}),parser:ju,value:e,viewProps:t.viewProps})}});function tGe(t){const e=[],n=m$(t.options);return n&&e.push(n),new lw(e)}Ji({id:"input-string",type:"input",accept:(t,e)=>{if(typeof t!="string")return null;const n=zi(e,r=>({readonly:r.optional.constant(!1),options:r.optional.custom(PL)}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>y$,constraint:t=>tGe(t.params),writer:t=>um},controller:t=>{const e=t.document,n=t.value,r=t.constraint,o=r&&fP(r,CL);return o?new q_(e,{props:new Jn({options:o.values.value("options")}),value:n,viewProps:t.viewProps}):new kL(e,{parser:u=>u,props:Jn.fromObject({formatter:t9}),value:n,viewProps:t.viewProps})},api(t){return typeof t.controller.value.rawValue!="string"?null:t.controller.valueController instanceof q_?new f$(t.controller):null}});const zP={monitor:{defaultInterval:200,defaultRows:3}},Gge=nr("mll");class nGe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add(Gge()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("textarea");r.classList.add(Gge("i")),r.style.height=`calc(var(${b1e("containerUnitSize")}) * ${n.rows})`,r.readOnly=!0,n.viewProps.bindDisabled(r),this.element.appendChild(r),this.textareaElem_=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(o=>{o!==void 0&&r.push(this.formatter_(o))}),e.textContent=r.join(`
`),n&&(e.scrollTop=e.scrollHeight)}onValueUpdate_(){this.update_()}}class P${constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new nGe(e,{formatter:n.formatter,rows:n.rows,value:this.value,viewProps:this.viewProps})}}const $ge=nr("sgl");class rGe{constructor(e,n){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=n.formatter,this.element=e.createElement("div"),this.element.classList.add($ge()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("input");r.classList.add($ge("i")),r.readOnly=!0,r.type="text",n.viewProps.bindDisabled(r),this.element.appendChild(r),this.inputElement=r,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}update_(){const e=this.value.rawValue,n=e[e.length-1];this.inputElement.value=n!==void 0?this.formatter_(n):""}onValueUpdate_(){this.update_()}}class k${constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new rGe(e,{formatter:n.formatter,value:this.value,viewProps:this.viewProps})}}Ji({id:"monitor-bool",type:"monitor",accept:(t,e)=>{if(typeof t!="boolean")return null;const n=zi(e,r=>({readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>g$},controller:t=>{var e;return t.value.rawValue.length===1?new k$(t.document,{formatter:Dge,value:t.value,viewProps:t.viewProps}):new P$(t.document,{formatter:Dge,rows:(e=t.params.rows)!==null&&e!==void 0?e:zP.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}});class iGe extends a${get max(){return this.controller.valueController.props.get("max")}set max(e){this.controller.valueController.props.set("max",e)}get min(){return this.controller.valueController.props.get("min")}set min(e){this.controller.valueController.props.set("min",e)}}const Sf=nr("grl");class oGe{constructor(e,n){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=e.createElement("div"),this.element.classList.add(Sf()),n.viewProps.bindClassModifiers(this.element),this.formatter_=n.formatter,this.props_=n.props,this.cursor_=n.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const r=e.createElementNS(Ao,"svg");r.classList.add(Sf("g")),r.style.height=`calc(var(${b1e("containerUnitSize")}) * ${n.rows})`,this.element.appendChild(r),this.svgElem_=r;const o=e.createElementNS(Ao,"polyline");this.svgElem_.appendChild(o),this.lineElem_=o;const u=e.createElement("div");u.classList.add(Sf("t"),nr("tt")()),this.element.appendChild(u),this.tooltipElem_=u,n.value.emitter.on("change",this.onValueUpdate_),this.value=n.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const e=this.svgElem_.getBoundingClientRect(),n=this.value.rawValue.length-1,r=this.props_.get("min"),o=this.props_.get("max"),u=[];this.value.rawValue.forEach((M,R)=>{if(M===void 0)return;const N=Zn(R,0,n,0,e.width),H=Zn(M,r,o,e.height,0);u.push([N,H].join(","))}),this.lineElem_.setAttributeNS(null,"points",u.join(" "));const h=this.tooltipElem_,m=this.value.rawValue[this.cursor_.rawValue];if(m===void 0){h.classList.remove(Sf("t","a"));return}const _=Zn(this.cursor_.rawValue,0,n,0,e.width),x=Zn(m,r,o,e.height,0);h.style.left=`${_}px`,h.style.top=`${x}px`,h.textContent=`${this.formatter_(m)}`,h.classList.contains(Sf("t","a"))||(h.classList.add(Sf("t","a"),Sf("t","in")),B3(h),h.classList.remove(Sf("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class T${constructor(e,n){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.props=n.props,this.value=n.value,this.viewProps=n.viewProps,this.cursor_=ji(-1),this.view=new oGe(e,{cursor:this.cursor_,formatter:n.formatter,rows:n.rows,props:this.props,value:this.value,viewProps:this.viewProps}),!wL(e))this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_);else{const r=new Dh(this.view.element);r.emitter.on("down",this.onGraphPointerDown_),r.emitter.on("move",this.onGraphPointerMove_),r.emitter.on("up",this.onGraphPointerUp_)}}importProps(e){return Hu(e,null,n=>({max:n.required.number,min:n.required.number}),n=>(this.props.set("max",n.max),this.props.set("min",n.min),!0))}exportProps(){return Gu(null,{max:this.props.get("max"),min:this.props.get("min")})}onGraphMouseLeave_(){this.cursor_.rawValue=-1}onGraphMouseMove_(e){const n=this.view.element.getBoundingClientRect();this.cursor_.rawValue=Math.floor(Zn(e.offsetX,0,n.width,0,this.value.rawValue.length))}onGraphPointerDown_(e){this.onGraphPointerMove_(e)}onGraphPointerMove_(e){if(!e.data.point){this.cursor_.rawValue=-1;return}this.cursor_.rawValue=Math.floor(Zn(e.data.point.x,0,e.data.bounds.width,0,this.value.rawValue.length))}onGraphPointerUp_(){this.cursor_.rawValue=-1}}function n9(t){return bi(t.format)?Jo(2):t.format}function sGe(t){var e;return t.value.rawValue.length===1?new k$(t.document,{formatter:n9(t.params),value:t.value,viewProps:t.viewProps}):new P$(t.document,{formatter:n9(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:zP.monitor.defaultRows,value:t.value,viewProps:t.viewProps})}function aGe(t){var e,n,r;return new T$(t.document,{formatter:n9(t.params),rows:(e=t.params.rows)!==null&&e!==void 0?e:zP.monitor.defaultRows,props:Jn.fromObject({max:(n=t.params.max)!==null&&n!==void 0?n:100,min:(r=t.params.min)!==null&&r!==void 0?r:0}),value:t.value,viewProps:t.viewProps})}function Wge(t){return t.view==="graph"}Ji({id:"monitor-number",type:"monitor",accept:(t,e)=>{if(typeof t!="number")return null;const n=zi(e,r=>({format:r.optional.function,max:r.optional.number,min:r.optional.number,readonly:r.required.constant(!0),rows:r.optional.number,view:r.optional.string}));return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>Wge(t)?64:1,reader:t=>t$},controller:t=>Wge(t.params)?aGe(t):sGe(t),api:t=>t.controller.valueController instanceof T$?new iGe(t.controller):null});Ji({id:"monitor-string",type:"monitor",accept:(t,e)=>{if(typeof t!="string")return null;const n=zi(e,r=>({multiline:r.optional.boolean,readonly:r.required.constant(!0),rows:r.optional.number}));return n?{initialValue:t,params:n}:null},binding:{reader:t=>y$},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||t.params.multiline?new P$(t.document,{formatter:t9,rows:(e=t.params.rows)!==null&&e!==void 0?e:zP.monitor.defaultRows,value:n,viewProps:t.viewProps}):new k$(t.document,{formatter:t9,value:n,viewProps:t.viewProps})}});class W1e{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}on(e,n){const r=n.bind(this);return this.controller_.emitter.on(e,()=>{r(new sw(this))}),this}}class lGe extends sw{constructor(e,n,r){super(e),this.cell=n,this.index=r}}class K1e extends Yg{constructor(e){super(e),this.cellToApiMap_=new Map,this.emitter_=new ws;const n=this.controller.valueController;n.cellControllers.forEach((r,o)=>{const u=new W1e(r);this.cellToApiMap_.set(r,u),r.emitter.on("click",()=>{const h=o%n.size[0],m=Math.floor(o/n.size[0]);this.emitter_.emit("click",{event:new lGe(this,u,[h,m])})})})}cell(e,n){const r=this.controller.valueController,o=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(o)}on(e,n){const r=n.bind(this);return this.emitter_.on(e,o=>{r(o.event)}),this}}class q1e{constructor(e,n){this.size=n.size;const[r,o]=this.size,u=[];for(let h=0;h<o;h++)for(let m=0;m<r;m++){const _=new m1e(e,{props:Jn.fromObject(Object.assign({},n.cellConfig(m,h))),viewProps:Rh.create()});u.push(_)}this.cellCs_=u,this.viewProps=Rh.create(),this.viewProps.handleDispose(()=>{this.cellCs_.forEach(h=>{h.viewProps.set("disposed",!0)})}),this.view=new _1e(e,{viewProps:this.viewProps,viewName:"btngrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(h=>{this.view.element.appendChild(h.view.element)})}get cellControllers(){return this.cellCs_}}class Kge extends UP{constructor(e,n){const r=n.valueController,o=new SL(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:o.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=o}}const uGe=Ji({id:"buttongrid",type:"blade",accept(t){const e=zi(t,n=>({cells:n.required.function,size:n.required.array(n.required.number),view:n.required.constant("buttongrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){return new Kge(t.document,{blade:t.blade,labelProps:Jn.fromObject({label:t.params.label}),valueController:new q1e(t.document,{cellConfig:t.params.cells,size:t.params.size})})},api(t){return t.controller instanceof Kge?new K1e(t.controller):null}});class X1e extends Yg{get label(){return this.controller.labelController.props.get("label")}set label(e){this.controller.labelController.props.set("label",e)}get value(){return this.controller.valueController.value.rawValue}set value(e){this.controller.valueController.value.rawValue=e}on(e,n){const r=n.bind(this);return this.controller.valueController.value.emitter.on(e,o=>{r(new _L(this,o.rawValue,o.options.last))}),this}}function kl(t,e,n){return t*(1-n)+e*n}const cGe=20,dGe=.001,C8=100;function hGe(t,e){let n=.25,r=.5,o=-1;for(let u=0;u<cGe;u++){const[h,m]=t.curve(r);if(r+=n*(h<e?1:-1),o=m,n*=.5,Math.abs(e-h)<dGe)break}return o}class tm{constructor(e=0,n=0,r=1,o=1){this.cache_=[],this.comps_=[e,n,r,o]}get x1(){return this.comps_[0]}get y1(){return this.comps_[1]}get x2(){return this.comps_[2]}get y2(){return this.comps_[3]}static isObject(e){return bi(e)||!Array.isArray(e)?!1:typeof e[0]=="number"&&typeof e[1]=="number"&&typeof e[2]=="number"&&typeof e[3]=="number"}static equals(e,n){return e.x1===n.x1&&e.y1===n.y1&&e.x2===n.x2&&e.y2===n.y2}curve(e){const n=kl(0,this.x1,e),r=kl(0,this.y1,e),o=kl(this.x1,this.x2,e),u=kl(this.y1,this.y2,e),h=kl(this.x2,1,e),m=kl(this.y2,1,e),_=kl(n,o,e),x=kl(r,u,e),M=kl(o,h,e),R=kl(u,m,e);return[kl(_,M,e),kl(x,R,e)]}y(e){if(this.cache_.length===0){const n=[];for(let r=0;r<C8;r++)n.push(hGe(this,Zn(r,0,C8-1,0,1)));this.cache_=n}return this.cache_[Math.round(Zn(Ii(e,0,1),0,1,0,C8-1))]}toObject(){return[this.comps_[0],this.comps_[1],this.comps_[2],this.comps_[3]]}}const M$={toComponents:t=>t.toObject(),fromComponents:t=>new tm(...t)};function pGe(t){const e=Jo(2);return`cubic-bezier(${t.toObject().map(r=>e(r)).join(", ")})`}const qge=[0,.5,.5,1];function fGe(t){const e=t.match(/^cubic-bezier\s*\(\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*,\s*([0-9.]+)\s*\)$/);if(!e)return new tm(...qge);const n=[e[1],e[2],e[3],e[4]].reduce((r,o)=>{if(!r)return null;const u=Number(o);return isNaN(u)?null:[...r,u]},[]);return new tm(...n??qge)}const ag=nr("cbz");class Y1e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(ag()),n.viewProps.bindClassModifiers(this.element),n.foldable.bindExpandedClass(this.element,ag(void 0,"expanded")),jl(n.foldable,"completed",lm(this.element,ag(void 0,"cpl")));const r=e.createElement("div");r.classList.add(ag("h")),this.element.appendChild(r);const o=e.createElement("button");o.classList.add(ag("b")),n.viewProps.bindDisabled(o);const u=e.createElementNS(Ao,"svg");u.innerHTML='<path d="M2 13C8 13 8 3 14 3"/>',o.appendChild(u),r.appendChild(o),this.buttonElement=o;const h=e.createElement("div");if(h.classList.add(ag("t")),r.appendChild(h),this.textElement=h,n.pickerLayout==="inline"){const m=e.createElement("div");m.classList.add(ag("p")),this.element.appendChild(m),this.pickerElement=m}else this.pickerElement=null}}const P8=nr("cbzp");class Z1e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(P8()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("div");r.classList.add(P8("g")),this.element.appendChild(r),this.graphElement=r;const o=e.createElement("div");o.classList.add(P8("t")),this.element.appendChild(o),this.textElement=o}}function Q1e(t,e){const n=new MutationObserver(o=>{for(const u of o)u.type==="childList"&&u.addedNodes.forEach(h=>{h.contains(h)&&(e(),n.disconnect())})}),r=t.ownerDocument;n.observe(r.body,{attributes:!0,childList:!0,subtree:!0})}const Ef=nr("cbzg");function mGe(t,e){return n=>e(t(n))}class J1e{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(Ef()),n.viewProps.bindClassModifiers(this.element),n.viewProps.bindTabIndex(this.element);const r=e.createElement("div");r.classList.add(Ef("p")),this.element.appendChild(r),this.previewElement=r;const o=e.createElementNS(Ao,"svg");o.classList.add(Ef("g")),this.element.appendChild(o),this.svgElem_=o;const u=e.createElementNS(Ao,"path");u.classList.add(Ef("u")),this.svgElem_.appendChild(u),this.guideElem_=u;const h=e.createElementNS(Ao,"polyline");h.classList.add(Ef("l")),this.svgElem_.appendChild(h),this.lineElem_=h,this.handleElems_=[e.createElement("div"),e.createElement("div")],this.handleElems_.forEach(m=>{m.classList.add(Ef("h")),this.element.appendChild(m)}),this.vectorElems_=[e.createElementNS(Ao,"line"),e.createElementNS(Ao,"line")],this.vectorElems_.forEach(m=>{m.classList.add(Ef("v")),this.svgElem_.appendChild(m)}),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_.bind(this)),this.sel_=n.selection,this.handleElems_.forEach((m,_)=>{Bl(this.sel_,mGe(x=>x===_,lm(m,Ef("h","sel"))))}),Q1e(this.element,()=>{this.refresh()})}getVertMargin_(e){return e*.25}valueToPosition(e,n){const r=this.element.getBoundingClientRect(),o=r.width,u=r.height,h=this.getVertMargin_(u);return{x:Zn(e,0,1,0,o),y:Zn(n,0,1,u-h,h)}}positionToValue(e,n){const r=this.element.getBoundingClientRect(),o=r.width,u=r.height,h=this.getVertMargin_(u);return{x:Ii(Zn(e,0,o,0,1),0,1),y:Zn(n,u-h,h,0,1)}}refresh(){this.guideElem_.setAttributeNS(null,"d",[0,1].map(u=>{const h=this.valueToPosition(0,u),m=this.valueToPosition(1,u);return[`M ${h.x},${h.y}`,`L ${m.x},${m.y}`].join(" ")}).join(" "));const e=this.value_.rawValue,n=[];let r=0;for(;;){const u=this.valueToPosition(...e.curve(r));if(n.push([u.x,u.y].join(",")),r>=1)break;r=Math.min(r+.05,1)}this.lineElem_.setAttributeNS(null,"points",n.join(" "));const o=e.toObject();[0,1].forEach(u=>{const h=this.valueToPosition(u,u),m=this.valueToPosition(o[u*2],o[u*2+1]),_=this.vectorElems_[u];_.setAttributeNS(null,"x1",String(h.x)),_.setAttributeNS(null,"y1",String(h.y)),_.setAttributeNS(null,"x2",String(m.x)),_.setAttributeNS(null,"y2",String(m.y));const x=this.handleElems_[u];x.style.left=`${m.x}px`,x.style.top=`${m.y}px`})}onValueChange_(){this.refresh()}}const Xge=24,Yge=400,Zge=1e3,i_=nr("cbzprv");class exe{constructor(e,n){this.stopped_=!0,this.startTime_=-1,this.onDispose_=this.onDispose_.bind(this),this.onTimer_=this.onTimer_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.element=e.createElement("div"),this.element.classList.add(i_()),n.viewProps.bindClassModifiers(this.element);const r=e.createElementNS(Ao,"svg");r.classList.add(i_("g")),this.element.appendChild(r),this.svgElem_=r;const o=e.createElementNS(Ao,"path");o.classList.add(i_("t")),this.svgElem_.appendChild(o),this.ticksElem_=o;const u=e.createElement("div");u.classList.add(i_("m")),this.element.appendChild(u),this.markerElem_=u,this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_),n.viewProps.handleDispose(this.onDispose_),Q1e(this.element,()=>{this.refresh()})}play(){this.stop(),this.updateMarker_(0),this.markerElem_.classList.add(i_("m","a")),this.startTime_=new Date().getTime()+Yge,this.stopped_=!1,requestAnimationFrame(this.onTimer_)}stop(){this.stopped_=!0,this.markerElem_.classList.remove(i_("m","a"))}onDispose_(){this.stop()}updateMarker_(e){const n=this.value_.rawValue.y(Ii(e,0,1));this.markerElem_.style.left=`${n*100}%`}refresh(){const e=this.svgElem_.getBoundingClientRect(),n=e.width,r=e.height,o=[],u=this.value_.rawValue;for(let h=0;h<Xge;h++){const m=Zn(h,0,Xge-1,0,1),_=Zn(u.y(m),0,1,0,n);o.push(`M ${_},0 v${r}`)}this.ticksElem_.setAttributeNS(null,"d",o.join(" "))}onTimer_(){if(this.startTime_===null)return;const e=new Date().getTime()-this.startTime_,n=e/Zge;this.updateMarker_(n),e>Zge+Yge&&this.stop(),this.stopped_||requestAnimationFrame(this.onTimer_)}onValueChange_(){this.refresh(),this.play()}}function r9(t,e,n,r){const o=n-t,u=r-e;return Math.sqrt(o*o+u*u)}function vGe(t,e,n,r){const o=r9(t,e,n,r),u=Math.atan2(r-e,n-t),h=Math.round(u/(Math.PI/4))*Math.PI/4;return{x:t+Math.cos(h)*o,y:e+Math.sin(h)*o}}class txe{constructor(e,n){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.keyScale_=n.keyScale,this.value=n.value,this.sel_=ji(0),this.viewProps=n.viewProps,this.view=new J1e(e,{selection:this.sel_,value:this.value,viewProps:this.viewProps}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_),this.prevView_=new exe(e,{value:this.value,viewProps:this.viewProps}),this.prevView_.element.addEventListener("mousedown",o=>{o.stopImmediatePropagation(),o.preventDefault(),this.prevView_.play()}),this.view.previewElement.appendChild(this.prevView_.element);const r=new Dh(this.view.element);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}refresh(){this.view.refresh(),this.prevView_.refresh(),this.prevView_.play()}updateValue_(e,n,r){const o=this.sel_.rawValue,u=this.value.rawValue.toObject(),h=this.view.positionToValue(e.x,e.y),m=n?vGe(o,o,h.x,h.y):h;u[o*2]=m.x,u[o*2+1]=m.y,this.value.setRawValue(new tm(...u),r)}onPointerDown_(e){const n=e.data;if(!n.point)return;const r=this.value.rawValue,o=this.view.valueToPosition(r.x1,r.y1),u=r9(n.point.x,n.point.y,o.x,o.y),h=this.view.valueToPosition(r.x2,r.y2),m=r9(n.point.x,n.point.y,h.x,h.y);this.sel_.rawValue=u<=m?0:1,this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerMove_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!1,last:!1})}onPointerUp_(e){const n=e.data;n.point&&this.updateValue_(n.point,e.shiftKey,{forceEmit:!0,last:!0})}onKeyDown_(e){j3(e.key)&&e.preventDefault();const n=this.sel_.rawValue,r=this.value.rawValue.toObject(),o=this.keyScale_.rawValue;r[n*2]+=Ro(o,zu(e)),r[n*2+1]+=Ro(o,jg(e)),this.value.setRawValue(new tm(...r),{forceEmit:!1,last:!1})}onKeyUp_(e){j3(e.key)&&e.preventDefault();const n=this.keyScale_.rawValue,r=Ro(n,zu(e)),o=Ro(n,jg(e));r===0&&o===0||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class nxe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.view=new Z1e(e,{viewProps:this.viewProps}),this.gc_=new txe(e,{keyScale:n.axis.textProps.value("keyScale"),value:this.value,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.gc_.view.element);const r=Object.assign(Object.assign({},n.axis),{constraint:new QG({max:1,min:0})}),o=Object.assign(Object.assign({},n.axis),{constraint:void 0});this.tc_=new uw(e,{assembly:M$,axes:[r,o,r,o],parser:ju,value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element)}get allFocusableElements(){return[this.gc_.view.element,...this.tc_.view.textViews.map(e=>e.inputElement)]}refresh(){this.gc_.refresh()}}class i9{constructor(e,n){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=n.value,this.viewProps=n.viewProps,this.foldable_=aw.create(n.expanded),this.view=new Y1e(e,{foldable:this.foldable_,pickerLayout:n.pickerLayout,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.tc_=new kL(e,{parser:fGe,props:Jn.fromObject({formatter:pGe}),value:this.value,viewProps:this.viewProps}),this.view.textElement.appendChild(this.tc_.view.element),this.popC_=n.pickerLayout==="popup"?new v$(e,{viewProps:this.viewProps}):null;const r=new nxe(e,{axis:n.axis,value:this.value,viewProps:this.viewProps});r.allFocusableElements.forEach(o=>{o.addEventListener("blur",this.onPopupChildBlur_),o.addEventListener("keydown",this.onPopupChildKeydown_)}),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Bl(this.popC_.shows,o=>{o&&r.refresh()}),Zg({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:o=>o,backward:(o,u)=>u})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),EL(this.foldable_,this.view.pickerElement))}onButtonBlur_(e){if(!this.popC_)return;const n=e.relatedTarget;(!n||!this.popC_.view.element.contains(n))&&(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.allFocusableElements[0].focus()}onPopupChildBlur_(e){if(!this.popC_)return;const n=this.popC_.view.element,r=u$(e);r&&n.contains(r)||r&&r===this.view.buttonElement&&!wL(n.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(e){this.popC_&&e.key==="Escape"&&(this.popC_.shows.rawValue=!1)}}function gGe(){return new ML({assembly:M$,components:[0,1,2,3].map(t=>t%2===0?new QG({min:0,max:1}):void 0)})}const yGe=Ji({id:"cubicbezier",type:"blade",accept(t){const e=zi(t,n=>({value:n.required.array(n.required.number),view:n.required.constant("cubicbezier"),expanded:n.optional.boolean,label:n.optional.string,picker:n.optional.custom(r=>r==="inline"||r==="popup"?r:void 0)}));return e?{params:e}:null},controller(t){var e,n;const r=new tm(...t.params.value),o=ji(r,{constraint:gGe(),equals:tm.equals}),u=new i9(t.document,{axis:{textProps:Jn.fromObject({keyScale:.1,pointerScale:.01,formatter:Jo(2)})},expanded:(e=t.params.expanded)!==null&&e!==void 0?e:!1,pickerLayout:(n=t.params.picker)!==null&&n!==void 0?n:"popup",value:o,viewProps:t.viewProps});return new U3(t.document,{blade:t.blade,props:Jn.fromObject({label:t.params.label}),value:o,valueController:u})},api(t){return!(t.controller instanceof U3)||!(t.controller.valueController instanceof i9)?null:new X1e(t.controller)}});class rxe extends Yg{begin(){this.controller.valueController.begin()}end(){this.controller.valueController.end()}}const Qge=20;class ixe{constructor(){this.start_=null,this.duration_=0,this.fps_=null,this.frameCount_=0,this.timestamps_=[]}get duration(){return this.duration_}get fps(){return this.fps_}begin(e){this.start_=e.getTime()}calculateFps_(e){if(this.timestamps_.length===0)return null;const n=this.timestamps_[0];return 1e3*(this.frameCount_-n.frameCount)/(e-n.time)}compactTimestamps_(){if(this.timestamps_.length<=Qge)return;const e=this.timestamps_.length-Qge;this.timestamps_.splice(0,e);const n=this.timestamps_[0].frameCount;this.timestamps_.forEach(r=>{r.frameCount-=n}),this.frameCount_-=n}end(e){if(this.start_===null)return;const n=e.getTime();this.duration_=n-this.start_,this.start_=null,this.fps_=this.calculateFps_(n),this.timestamps_.push({frameCount:this.frameCount_,time:n}),++this.frameCount_,this.compactTimestamps_()}}const fC=nr("fps");class oxe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(fC()),n.viewProps.bindClassModifiers(this.element),this.graphElement=e.createElement("div"),this.graphElement.classList.add(fC("g")),this.element.appendChild(this.graphElement);const r=e.createElement("div");r.classList.add(fC("l")),this.element.appendChild(r);const o=e.createElement("span");o.classList.add(fC("v")),o.textContent="--",r.appendChild(o),this.valueElement=o;const u=e.createElement("span");u.classList.add(fC("u")),u.textContent="FPS",r.appendChild(u)}}class sxe{constructor(e,n){this.stopwatch_=new ixe,this.onTick_=this.onTick_.bind(this),this.ticker_=n.ticker,this.ticker_.emitter.on("tick",this.onTick_),this.value_=n.value,this.viewProps=n.viewProps,this.view=new oxe(e,{viewProps:this.viewProps}),this.graphC_=new T$(e,{formatter:Jo(0),props:Jn.fromObject({max:n.maxValue,min:n.minValue}),rows:n.rows,value:this.value_,viewProps:this.viewProps}),this.view.graphElement.appendChild(this.graphC_.view.element),this.viewProps.handleDispose(()=>{this.graphC_.viewProps.set("disposed",!0),this.ticker_.dispose()})}begin(){this.stopwatch_.begin(new Date)}end(){this.stopwatch_.end(new Date)}onTick_(){const e=this.stopwatch_.fps;if(e!==null){const n=this.value_.rawValue;this.value_.rawValue=I8e(n,e),this.view.valueElement.textContent=e.toFixed(0)}}}class Jge extends UP{constructor(e,n){const r=n.valueController,o=new SL(e,{blade:n.blade,props:n.labelProps,valueController:r});super({blade:n.blade,view:o.view,viewProps:r.viewProps}),this.valueController=r,this.labelController=o}}function bGe(t,e){return e===0?new iHe:new oHe(t,e??zP.monitor.defaultInterval)}const _Ge=Ji({id:"fpsgraph",type:"blade",accept(t){const e=zi(t,n=>({view:n.required.constant("fpsgraph"),interval:n.optional.number,label:n.optional.string,rows:n.optional.number,max:n.optional.number,min:n.optional.number}));return e?{params:e}:null},controller(t){var e,n,r,o;const u=(e=t.params.interval)!==null&&e!==void 0?e:500;return new Jge(t.document,{blade:t.blade,labelProps:Jn.fromObject({label:t.params.label}),valueController:new sxe(t.document,{rows:(n=t.params.rows)!==null&&n!==void 0?n:2,maxValue:(r=t.params.max)!==null&&r!==void 0?r:90,minValue:(o=t.params.min)!==null&&o!==void 0?o:0,ticker:bGe(t.document,u),value:ji(M8e(80)),viewProps:t.viewProps})})},api(t){return t.controller instanceof Jge?new rxe(t.controller):null}});class Ua{constructor(e,n){this.min=e,this.max=n}static isObject(e){if(typeof e!="object"||e===null)return!1;const n=e.min,r=e.max;return!(typeof n!="number"||typeof r!="number")}static equals(e,n){return e.min===n.min&&e.max===n.max}get length(){return this.max-this.min}toObject(){return{min:this.min,max:this.max}}}const A$={fromComponents:t=>new Ua(t[0],t[1]),toComponents:t=>[t.min,t.max]};class I${constructor(e){this.edge=e}constrain(e){var n,r,o,u,h,m,_,x;if(e.min<=e.max)return new Ua((r=(n=this.edge)===null||n===void 0?void 0:n.constrain(e.min))!==null&&r!==void 0?r:e.min,(u=(o=this.edge)===null||o===void 0?void 0:o.constrain(e.max))!==null&&u!==void 0?u:e.max);const M=(e.min+e.max)/2;return new Ua((m=(h=this.edge)===null||h===void 0?void 0:h.constrain(M))!==null&&m!==void 0?m:M,(x=(_=this.edge)===null||_===void 0?void 0:_.constrain(M))!==null&&x!==void 0?x:M)}}const k8=nr("rsltxt");class axe{constructor(e,n){this.sliderView_=n.sliderView,this.textView_=n.textView,this.element=e.createElement("div"),this.element.classList.add(k8());const r=e.createElement("div");r.classList.add(k8("s")),r.appendChild(this.sliderView_.element),this.element.appendChild(r);const o=e.createElement("div");o.classList.add(k8("t")),o.appendChild(this.textView_.element),this.element.appendChild(o)}}const lg=nr("rsl");class lxe{constructor(e,n){this.onSliderPropsChange_=this.onSliderPropsChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.sliderProps_=n.sliderProps,this.sliderProps_.emitter.on("change",this.onSliderPropsChange_),this.element=e.createElement("div"),this.element.classList.add(lg()),n.viewProps.bindClassModifiers(this.element),this.value_=n.value,this.value_.emitter.on("change",this.onValueChange_);const r=e.createElement("div");r.classList.add(lg("t")),this.element.appendChild(r),this.trackElement=r;const o=e.createElement("div");o.classList.add(lg("b")),r.appendChild(o),this.barElement=o;const u=["min","max"].map(h=>{const m=e.createElement("div");return m.classList.add(lg("k"),lg("k",h)),r.appendChild(m),m});this.knobElements=[u[0],u[1]],this.update_()}valueToX_(e){const n=this.sliderProps_.get("min"),r=this.sliderProps_.get("max");return Ii(Zn(e,n,r,0,1),0,1)*100}update_(){const e=this.value_.rawValue;e.length===0?this.element.classList.add(lg(void 0,"zero")):this.element.classList.remove(lg(void 0,"zero"));const n=[this.valueToX_(e.min),this.valueToX_(e.max)];this.barElement.style.left=`${n[0]}%`,this.barElement.style.right=`${100-n[1]}%`,this.knobElements.forEach((r,o)=>{r.style.left=`${n[o]}%`})}onSliderPropsChange_(){this.update_()}onValueChange_(){this.update_()}}class uxe{constructor(e,n){this.grabbing_=null,this.grabOffset_=0,this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.sliderProps=n.sliderProps,this.viewProps=n.viewProps,this.value=n.value,this.view=new lxe(e,{sliderProps:this.sliderProps,value:this.value,viewProps:n.viewProps});const r=new Dh(this.view.trackElement);r.emitter.on("down",this.onPointerDown_),r.emitter.on("move",this.onPointerMove_),r.emitter.on("up",this.onPointerUp_)}ofs_(){return this.grabbing_==="min"?this.view.knobElements[0].getBoundingClientRect().width/2:this.grabbing_==="max"?-this.view.knobElements[1].getBoundingClientRect().width/2:0}valueFromData_(e){if(!e.point)return null;const n=(e.point.x+this.ofs_())/e.bounds.width,r=this.sliderProps.get("min"),o=this.sliderProps.get("max");return Zn(n,0,1,r,o)}onPointerDown_(e){if(!e.data.point)return;const n=e.data.point.x/e.data.bounds.width,r=this.value.rawValue,o=this.sliderProps.get("min"),u=this.sliderProps.get("max"),h=Zn(r.min,o,u,0,1),m=Zn(r.max,o,u,0,1);Math.abs(m-n)<=.025?this.grabbing_="max":Math.abs(h-n)<=.025?this.grabbing_="min":n>=h&&n<=m?(this.grabbing_="length",this.grabOffset_=Zn(n-h,0,1,0,u-o)):n<h?(this.grabbing_="min",this.onPointerMove_(e)):n>m&&(this.grabbing_="max",this.onPointerMove_(e))}applyPointToValue_(e,n){const r=this.valueFromData_(e);if(r===null)return;const o=this.sliderProps.get("min"),u=this.sliderProps.get("max");if(this.grabbing_==="min")this.value.setRawValue(new Ua(r,this.value.rawValue.max),n);else if(this.grabbing_==="max")this.value.setRawValue(new Ua(this.value.rawValue.min,r),n);else if(this.grabbing_==="length"){const h=this.value.rawValue.length;let m=r-this.grabOffset_,_=m+h;m<o?(m=o,_=o+h):_>u&&(m=u-h,_=u),this.value.setRawValue(new Ua(m,_),n)}}onPointerMove_(e){this.applyPointToValue_(e.data,{forceEmit:!1,last:!1})}onPointerUp_(e){this.applyPointToValue_(e.data,{forceEmit:!0,last:!0}),this.grabbing_=null}}class cxe{constructor(e,n){this.value=n.value,this.viewProps=n.viewProps,this.sc_=new uxe(e,n);const r={constraint:n.constraint,textProps:n.textProps};this.tc_=new uw(e,{assembly:A$,axes:[r,r],parser:n.parser,value:this.value,viewProps:n.viewProps}),this.view=new axe(e,{sliderView:this.sc_.view,textView:this.tc_.view})}get textController(){return this.tc_}}function wGe(t){return Ua.isObject(t)?new Ua(t.min,t.max):new Ua(0,0)}function xGe(t,e){t.writeProperty("max",e.max),t.writeProperty("min",e.min)}function SGe(t){const e=[],n=r$(t);n&&e.push(n);const r=n$(t);return r&&e.push(r),new I$(new lw(e))}const EGe=Ji({id:"input-interval",type:"input",accept:(t,e)=>{if(!Ua.isObject(t))return null;const n=zi(e,r=>Object.assign(Object.assign({},o$(r)),{readonly:r.optional.constant(!1)}));return n?{initialValue:new Ua(t.min,t.max),params:n}:null},binding:{reader:t=>wGe,constraint:t=>SGe(t.params),equals:Ua.equals,writer:t=>xGe},controller(t){const e=t.value,n=t.constraint;if(!(n instanceof I$))throw zs.shouldNeverHappen();const r=(e.rawValue.min+e.rawValue.max)/2,o=Jn.fromObject(i$(t.params,r)),u=n.edge&&fP(n.edge,BP);if(u)return new cxe(t.document,{constraint:n.edge,parser:ju,sliderProps:new Jn({keyScale:o.value("keyScale"),max:u.values.value("max"),min:u.values.value("min")}),textProps:o,value:e,viewProps:t.viewProps});const h={constraint:n.edge,textProps:o};return new uw(t.document,{assembly:A$,axes:[h,h],parser:ju,value:e,viewProps:t.viewProps})}});class dxe{constructor(e){this.controller_=e}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(e){this.controller_.viewProps.set("disabled",e)}get title(){var e;return(e=this.controller_.props.get("title"))!==null&&e!==void 0?e:""}set title(e){this.controller_.props.set("title",e)}}class hxe extends _L{constructor(e,n,r,o,u){super(e,o,u),this.cell=n,this.index=r}}class pxe extends Yg{constructor(e){super(e),this.cellToApiMap_=new Map,this.controller.valueController.cellControllers.forEach(r=>{const o=new dxe(r);this.cellToApiMap_.set(r,o)})}get value(){return this.controller.value}cell(e,n){const r=this.controller.valueController,o=r.cellControllers[n*r.size[0]+e];return this.cellToApiMap_.get(o)}on(e,n){const r=n.bind(this);this.controller.value.emitter.on(e,o=>{const u=this.controller.valueController,h=u.findCellByValue(o.rawValue);if(!h)return;const m=this.cellToApiMap_.get(h);if(!m)return;const _=u.cellControllers.indexOf(h);r(new hxe(this,m,[_%u.size[0],Math.floor(_/u.size[0])],o.rawValue))})}}const mC=nr("rad");class fxe{constructor(e,n){this.element=e.createElement("div"),this.element.classList.add(mC()),n.viewProps.bindClassModifiers(this.element);const r=e.createElement("label");r.classList.add(mC("l")),this.element.appendChild(r);const o=e.createElement("input");o.classList.add(mC("i")),o.name=n.name,o.type="radio",n.viewProps.bindDisabled(o),r.appendChild(o),this.inputElement=o;const u=e.createElement("div");u.classList.add(mC("b")),r.appendChild(u);const h=e.createElement("div");h.classList.add(mC("t")),u.appendChild(h),jl(n.props,"title",m=>{h.textContent=m})}}class mxe{constructor(e,n){this.props=n.props,this.viewProps=n.viewProps,this.view=new fxe(e,{name:n.name,props:this.props,viewProps:this.viewProps})}}class z3{constructor(e,n){this.cellCs_=[],this.cellValues_=[],this.onCellInputChange_=this.onCellInputChange_.bind(this),this.size=n.size;const[r,o]=this.size;for(let u=0;u<o;u++)for(let h=0;h<r;h++){const m=new mxe(e,{name:n.groupName,props:Jn.fromObject(Object.assign({},n.cellConfig(h,u))),viewProps:Rh.create()});this.cellCs_.push(m),this.cellValues_.push(n.cellConfig(h,u).value)}this.value=n.value,Bl(this.value,u=>{const h=this.findCellByValue(u);h&&(h.view.inputElement.checked=!0)}),this.viewProps=Rh.create(),this.view=new _1e(e,{viewProps:this.viewProps,viewName:"radgrid"}),this.view.element.style.gridTemplateColumns=`repeat(${r}, 1fr)`,this.cellCs_.forEach(u=>{u.view.inputElement.addEventListener("change",this.onCellInputChange_),this.view.element.appendChild(u.view.element)})}get cellControllers(){return this.cellCs_}findCellByValue(e){const n=this.cellValues_.findIndex(r=>r===e);return n<0?null:this.cellCs_[n]}onCellInputChange_(e){const n=e.currentTarget,r=this.cellCs_.findIndex(o=>o.view.inputElement===n);r<0||(this.value.rawValue=this.cellValues_[r])}}const CGe=function(){return Ji({id:"radiogrid",type:"blade",accept(t){const e=zi(t,n=>({cells:n.required.function,groupName:n.required.string,size:n.required.array(n.required.number),value:n.required.raw,view:n.required.constant("radiogrid"),label:n.optional.string}));return e?{params:e}:null},controller(t){const e=ji(t.params.value);return new U3(t.document,{blade:t.blade,props:Jn.fromObject({label:t.params.label}),value:e,valueController:new z3(t.document,{groupName:t.params.groupName,cellConfig:t.params.cells,size:t.params.size,value:e})})},api(t){return!(t.controller instanceof U3)||!(t.controller.valueController instanceof z3)?null:new pxe(t.controller)}})}();function R$(t){return Ji({id:"input-radiogrid",type:"input",accept(e,n){if(!t.isType(e))return null;const r=zi(n,o=>({cells:o.required.function,groupName:o.required.string,size:o.required.array(o.required.number),view:o.required.constant("radiogrid")}));return r?{initialValue:e,params:r}:null},binding:t.binding,controller:e=>new z3(e.document,{cellConfig:e.params.cells,groupName:e.params.groupName,size:e.params.size,value:e.value})})}const PGe=R$({isType:t=>typeof t=="number",binding:{reader:t=>t$,writer:t=>um}}),kGe=R$({isType:t=>typeof t=="string",binding:{reader:t=>y$,writer:t=>um}}),TGe=R$({isType:t=>typeof t=="boolean",binding:{reader:t=>g$,writer:t=>um}}),MGe="essentials",AGe='.tp-cbzgv,.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:rgba(0,0,0,0);border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-radv_b,.tp-rslv_k,.tp-cbzv_b{background-color:var(--btn-bg);border-radius:var(--bld-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--cnt-usz);line-height:var(--cnt-usz);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-radv_b:hover,.tp-rslv_k:hover,.tp-cbzv_b:hover{background-color:var(--btn-bg-h)}.tp-radv_b:focus,.tp-rslv_k:focus,.tp-cbzv_b:focus{background-color:var(--btn-bg-f)}.tp-radv_b:active,.tp-rslv_k:active,.tp-cbzv_b:active{background-color:var(--btn-bg-a)}.tp-radv_b:disabled,.tp-rslv_k:disabled,.tp-cbzv_b:disabled{opacity:.5}.tp-cbzgv{background-color:var(--in-bg);border-radius:var(--bld-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--cnt-usz);line-height:var(--cnt-usz);min-width:0;width:100%}.tp-cbzgv:hover{background-color:var(--in-bg-h)}.tp-cbzgv:focus{background-color:var(--in-bg-f)}.tp-cbzgv:active{background-color:var(--in-bg-a)}.tp-cbzgv:disabled{opacity:.5}.tp-btngridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-btngridv.tp-v-disabled{opacity:.5}.tp-btngridv .tp-btnv_b:disabled{opacity:1}.tp-btngridv .tp-btnv_b:disabled .tp-btnv_t{opacity:.5}.tp-btngridv .tp-btnv_b{border-radius:0}.tp-cbzv{position:relative}.tp-cbzv_h{display:flex}.tp-cbzv_b{margin-right:4px;position:relative;width:var(--cnt-usz)}.tp-cbzv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-cbzv_b svg path{stroke:var(--bs-bg);stroke-width:2}.tp-cbzv_t{flex:1}.tp-cbzv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-cbzv.tp-cbzv-expanded .tp-cbzv_p{margin-top:var(--cnt-usp);opacity:1}.tp-cbzv.tp-cbzv-cpl .tp-cbzv_p{overflow:visible}.tp-cbzv .tp-popv{left:calc(-1 * var(--cnt-hp));position:absolute;right:calc(-1 * var(--cnt-hp));top:var(--cnt-usz)}.tp-cbzpv_t{margin-top:var(--cnt-usp)}.tp-cbzgv{height:auto;overflow:hidden;position:relative}.tp-cbzgv.tp-v-disabled{opacity:.5}.tp-cbzgv_p{left:16px;position:absolute;right:16px;top:0}.tp-cbzgv_g{cursor:pointer;display:block;height:calc(var(--cnt-usz) * 5);width:100%}.tp-cbzgv_u{opacity:.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_l{fill:rgba(0,0,0,0);stroke:var(--in-fg)}.tp-cbzgv_v{opacity:.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-cbzgv_h{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;pointer-events:none;position:absolute;width:4px}.tp-cbzgv:focus .tp-cbzgv_h-sel{background-color:var(--in-fg);border-width:0}.tp-cbzprvv{cursor:pointer;height:4px;padding:4px 0;position:relative}.tp-cbzprvv_g{display:block;height:100%;overflow:visible;width:100%}.tp-cbzprvv_t{opacity:.5;stroke:var(--mo-fg)}.tp-cbzprvv_m{background-color:var(--mo-fg);border-radius:50%;height:4px;margin-left:-2px;margin-top:-2px;opacity:0;position:absolute;top:50%;transition:opacity .2s ease-out;width:4px}.tp-cbzprvv_m.tp-cbzprvv_m-a{opacity:1}.tp-fpsv{position:relative}.tp-fpsv_l{bottom:4px;color:var(--mo-fg);line-height:1;right:4px;pointer-events:none;position:absolute}.tp-fpsv_u{margin-left:.2em;opacity:.7}.tp-rslv{cursor:pointer;padding-left:8px;padding-right:8px}.tp-rslv.tp-v-disabled{opacity:.5}.tp-rslv_t{height:calc(var(--cnt-usz));position:relative}.tp-rslv_t::before{background-color:var(--in-bg);border-radius:1px;content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:-4px;right:-4px}.tp-rslv_b{bottom:0;top:0;position:absolute}.tp-rslv_b::before{background-color:var(--in-fg);content:"";height:2px;margin-top:-1px;position:absolute;top:50%;left:0;right:0}.tp-rslv_k{height:calc(var(--cnt-usz) - 8px);margin-top:calc((var(--cnt-usz) - 8px)/-2);position:absolute;top:50%;width:8px}.tp-rslv_k.tp-rslv_k-min{margin-left:-8px}.tp-rslv_k.tp-rslv_k-max{margin-left:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-min{border-bottom-right-radius:0;border-top-right-radius:0}.tp-rslv.tp-rslv-zero .tp-rslv_k.tp-rslv_k-max{border-bottom-left-radius:0;border-top-left-radius:0}.tp-rsltxtv{display:flex}.tp-rsltxtv_s{flex:1}.tp-rsltxtv_t{flex:1;margin-left:4px}.tp-radv_l{display:block;position:relative}.tp-radv_i{left:0;opacity:0;position:absolute;top:0}.tp-radv_b{opacity:.5}.tp-radv_i:hover+.tp-radv_b{background-color:var(--btn-bg-h)}.tp-radv_i:focus+.tp-radv_b{background-color:var(--btn-bg-f)}.tp-radv_i:active+.tp-radv_b{background-color:var(--btn-bg-a)}.tp-radv_i:checked+.tp-radv_b{opacity:1}.tp-radv_t{bottom:0;color:inherit;left:0;overflow:hidden;position:absolute;right:0;text-align:center;text-overflow:ellipsis;top:0}.tp-radv_i:disabled+.tp-radv_b>.tp-radv_t{opacity:.5}.tp-radgridv{border-radius:var(--bld-br);display:grid;overflow:hidden;gap:2px}.tp-radgridv.tp-v-disabled{opacity:.5}.tp-radgridv .tp-radv_b{border-radius:0}',IGe=[uGe,yGe,_Ge,EGe,CGe,TGe,PGe,kGe],RGe=Object.freeze(Object.defineProperty({__proto__:null,ButtonCellApi:W1e,ButtonGridApi:K1e,ButtonGridController:q1e,CubicBezier:tm,CubicBezierApi:X1e,CubicBezierAssembly:M$,CubicBezierController:i9,CubicBezierGraphController:txe,CubicBezierGraphView:J1e,CubicBezierPickerController:nxe,CubicBezierPickerView:Z1e,CubicBezierPreviewView:exe,CubicBezierView:Y1e,FpsGraphBladeApi:rxe,FpsGraphController:sxe,FpsView:oxe,Fpswatch:ixe,Interval:Ua,IntervalAssembly:A$,IntervalConstraint:I$,RadioCellApi:dxe,RadioController:mxe,RadioGridApi:pxe,RadioGridController:z3,RadioView:fxe,RangeSliderController:uxe,RangeSliderTextController:cxe,RangeSliderTextView:axe,RangeSliderView:lxe,TpRadioGridChangeEvent:hxe,css:AGe,id:MGe,plugins:IGe},Symbol.toStringTag,{value:"Module"}));class OGe extends pL{constructor(n){super(n);Fi(this,"appTab");Fi(this,"systemTab");Fi(this,"utilsTab");Fi(this,"bindCBs");Fi(this,"buttonCBs");Fi(this,"pane");Fi(this,"appCallbacks",0);Fi(this,"editorCallbacks",0);Fi(this,"inspectorFolder");this.bindCBs=new Map,this.buttonCBs=new Map,n.editor&&this.createGUI()}createGUI(){this.pane=new O6e({title:"GUI"}),this.pane.registerPlugin(RGe);const n=this.pane.addTab({pages:[{title:"App"},{title:"System"},{title:"Tools"}]});this.appTab=n.pages[0],this.systemTab=n.pages[1],this.utilsTab=n.pages[2]}dispose(){var n,r,o,u;this.bindCBs.clear(),this.buttonCBs.clear(),this.appCallbacks=0,this.editorCallbacks=0,this.app.editor&&((n=this.appTab)==null||n.dispose(),(r=this.systemTab)==null||r.dispose(),(o=this.utilsTab)==null||o.dispose(),(u=this.pane)==null||u.dispose(),this.appTab=void 0,this.systemTab=void 0,this.utilsTab=void 0,this.pane=void 0)}addFolder(n,r=void 0,o=void 0){if(this.app.editor)return this.pane===void 0&&this.createGUI(),(o!==void 0?o:this.appTab).addFolder({title:n,...r});this.app.send({event:"addFolder",target:"app",data:{name:n,params:r,parent:o}})}get bindID(){return`debug_${Math.max(this.appCallbacks,this.editorCallbacks)}`}bind(n,r,o,u=void 0){const h=this.bindID,m=o.onChange!==void 0?o.onChange:x_e;this.bindCBs.set(h,m),this.app.editor?(this.pane===void 0&&this.createGUI(),(u!==void 0?u:this.appTab).addBinding(n,r,o).on("change",x=>{this.app.send({event:"updateBind",target:"app",data:{id:h,value:x.value}})}),this.editorCallbacks++):(this.app.send({event:"bindObject",target:"app",data:{id:h,name:r,params:o,parent:u}}),this.appCallbacks++)}triggerBind(n,r){const o=this.bindCBs.get(n);o!==void 0?o(r):console.warn(`No callback for: ${n}`,r)}button(n,r,o=void 0){const u=this.bindID;this.buttonCBs.set(u,r),this.app.editor?(this.pane===void 0&&this.createGUI(),(o!==void 0?o:this.appTab).addButton({title:n}).on("click",()=>{this.app.send({event:"clickButton",target:"app",data:{id:u}})}),this.editorCallbacks++):(this.app.send({event:"addButton",target:"app",data:{id:u,name:n,callback:r,parent:o}}),this.appCallbacks++)}triggerButton(n){const r=this.buttonCBs.get(n);r!==void 0&&r()}createInspector(){this.inspectorFolder=this.addFolder("Inspector",this.utilsTab)}clearInspector(){const n=this.inspectorFolder.children.length-1;for(let r=n;r>-1;--r)this.inspectorFolder.remove(this.inspectorFolder.children[r])}}const DGe=!0;class LGe extends W3e{constructor(e,n,r){super(e,n,r),this.addComponent("theatre",new Z3e(this,"RemoteApp",{})),this.addComponent("components",new K3e(this)),this.addComponent("debug",new OGe(this)),this.addComponent("three",new pVe(this))}get debug(){return this.components.get("debug")}get debugComponents(){return this.components.get("components")}get theatre(){return this.components.get("theatre")}get three(){return this.components.get("three")}}const Bi=new LGe("Hermes",DGe,"editor");const Ti=new Wg,Mi={CUSTOM:"ToolEvents::custom",SELECT_DROPDOWN:"ToolEvents::selectDropdown",DRAG_UPDATE:"ToolEvents::dragUpdate",GET_SCENE:"ToolEvents::getScene",SET_SCENE:"ToolEvents::setScene",GET_OBJECT:"ToolEvents::getObject",SET_OBJECT:"ToolEvents::setObject",UPDATE_OBJECT:"ToolEvents::updateObject"};function NGe(){var e;const t=Qt.useRef(null);return(e=Bi.theatre)==null||e.sheet("App"),Qt.useEffect(()=>{var o;const n=t.current;n.style.visibility=Bi.editor?"hidden":"inherit";const r=(o=Bi.theatre)==null?void 0:o.sheetObject("App","Box",{x:LH.types.number(100,{range:[0,window.innerWidth]}),y:LH.types.number(100,{range:[0,window.innerHeight]})},u=>{n.style.left=`${u.x}px`,n.style.top=`${u.y}px`});return()=>{var u;r!==void 0&&((u=Bi.theatre)==null||u.unsubscribe(r)),Bi.dispose()}},[]),Qt.useEffect(()=>{if(Bi.editor)return;const n=new Q_e({antialias:!0});n.setPixelRatio(devicePixelRatio),t.current.parentElement.appendChild(n.domElement);const r=new rVe;r.name="Example";const o=new Do;o.name="cameras",r.add(o);const u=new Rl(60,1,1,2e3);u.name="mainCamera",u.position.z=300,o.add(u);const h=new Do;h.name="world",r.add(h);const m=new cVe;m.name="sun",m.position.set(100,100,50),h.add(m);const _=new Dl(new LC(50),new sVe);_.name="sphere",h.add(_);const x=new Dl(new LC(50),new _G);x.name="sphere2",x.position.x=100,h.add(x);const M=new Dl(new LC(50),new oVe);M.name="sphere3",M.position.x=-100,h.add(M);let R=-1;const N=()=>{const U=window.innerWidth,C=window.innerHeight;u.aspect=U/C,u.updateProjectionMatrix(),n.setSize(U,C)},H=()=>{n.render(r,u),R=requestAnimationFrame(H)};N(),H(),window.addEventListener("resize",N);const Q=U=>{const C=r.getObjectByProperty("uuid",U.value);C!==void 0&&Bi.three.setObject(C)},j=U=>{const C=U.value,{key:K,value:te,uuid:pe}=C,Z=r.getObjectByProperty("uuid",pe);if(Z!==void 0){const be=K.split(".");switch(be.length){case 1:Z[K]=te;break;case 2:Z[be[0]][be[1]]=te;break;case 3:Z[be[0]][be[1]][be[2]]=te;break;case 4:Z[be[0]][be[1]][be[2]][be[3]]=te;break;case 5:Z[be[0]][be[1]][be[2]][be[3]][be[4]]=te;break}}},z=()=>{Bi.three.setScene(r)};return Ti.addEventListener(Mi.GET_OBJECT,Q),Ti.addEventListener(Mi.GET_SCENE,z),Ti.addEventListener(Mi.UPDATE_OBJECT,j),Bi.three.setScene(r),()=>{Ti.removeEventListener(Mi.GET_OBJECT,Q),Ti.removeEventListener(Mi.GET_SCENE,z),Ti.removeEventListener(Mi.UPDATE_OBJECT,j),window.removeEventListener("resize",N),n.dispose(),cancelAnimationFrame(R),R=-1}},[]),Qt.useEffect(()=>{const n=t.current;n.style.visibility=Bi.editor?"hidden":"inherit";const r=Bi.debug.addFolder("Test");Bi.debug.button("Test Button",()=>{console.log("Test button works!")},r);const o={opacity:1,rotation:0};Bi.debug.bind(o,"opacity",{min:0,max:1,onChange:m=>{n.style.opacity=m.toFixed(2)}},r),Bi.debug.bind(o,"rotation",{min:0,max:360,onChange:m=>{n.style.transform=`rotate(${m}deg)`}},r);const u=m=>{console.log("Custom:",m.value)},h=m=>{console.log(`Dropdown: ${m.value.dropdown}, value: ${m.value.value}`)};return Ti.addEventListener(Mi.CUSTOM,u),Ti.addEventListener(Mi.SELECT_DROPDOWN,h),()=>{Ti.removeEventListener(Mi.CUSTOM,u),Ti.removeEventListener(Mi.SELECT_DROPDOWN,h)}},[]),Nt.jsx("div",{id:"box",ref:t,children:Nt.jsx("button",{onClick:()=>{Bi.send({target:"editor",event:"custom",data:"hello editor!"})},children:"Click"})})}function FGe(t){return Nt.jsxs("div",{className:"editor",ref:t.ref,style:t.style,children:[Nt.jsx("header",{children:t.header}),t.children,Nt.jsx("footer",{children:t.footer})]})}function vxe(t){return t.title.search("<")>-1?Nt.jsx("button",{className:"svg",dangerouslySetInnerHTML:{__html:t.title}}):Nt.jsx("button",{children:t.title})}const O$=Qt.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),AL=Qt.createContext({}),D$=Qt.createContext(null),IL=typeof document<"u",o9=IL?Qt.useLayoutEffect:Qt.useEffect,gxe=Qt.createContext({strict:!1});function BGe(t,e,n,r){const{visualElement:o}=Qt.useContext(AL),u=Qt.useContext(gxe),h=Qt.useContext(D$),m=Qt.useContext(O$).reducedMotion,_=Qt.useRef();r=r||u.renderer,!_.current&&r&&(_.current=r(t,{visualState:e,parent:o,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const x=_.current;return Qt.useInsertionEffect(()=>{x&&x.update(n,h)}),o9(()=>{x&&x.render()}),Qt.useEffect(()=>{x&&x.updateFeatures()}),(window.HandoffAppearAnimations?o9:Qt.useEffect)(()=>{x&&x.animationState&&x.animationState.animateChanges()}),x}function __(t){return typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function UGe(t,e,n){return Qt.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):__(n)&&(n.current=r))},[e])}function vP(t){return typeof t=="string"||Array.isArray(t)}function RL(t){return typeof t=="object"&&typeof t.start=="function"}const L$=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],N$=["initial",...L$];function OL(t){return RL(t.animate)||N$.some(e=>vP(t[e]))}function yxe(t){return!!(OL(t)||t.variants)}function VGe(t,e){if(OL(t)){const{initial:n,animate:r}=t;return{initial:n===!1||vP(n)?n:void 0,animate:vP(r)?r:void 0}}return t.inherit!==!1?e:{}}function jGe(t){const{initial:e,animate:n}=VGe(t,Qt.useContext(AL));return Qt.useMemo(()=>({initial:e,animate:n}),[e0e(e),e0e(n)])}function e0e(t){return Array.isArray(t)?t.join(" "):t}const t0e={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},gP={};for(const t in t0e)gP[t]={isEnabled:e=>t0e[t].some(n=>!!e[n])};function zGe(t){for(const e in t)gP[e]={...gP[e],...t[e]}}const bxe=Qt.createContext({}),_xe=Qt.createContext({}),HGe=Symbol.for("motionComponentSymbol");function GGe({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:o}){t&&zGe(t);function u(m,_){let x;const M={...Qt.useContext(O$),...m,layoutId:$Ge(m)},{isStatic:R}=M,N=jGe(m),H=r(m,R);if(!R&&IL){N.visualElement=BGe(o,H,M,e);const Q=Qt.useContext(_xe),j=Qt.useContext(gxe).strict;N.visualElement&&(x=N.visualElement.loadFeatures(M,j,t,Q))}return Qt.createElement(AL.Provider,{value:N},x&&N.visualElement?Qt.createElement(x,{visualElement:N.visualElement,...M}):null,n(o,m,UGe(H,N.visualElement,_),H,R,N.visualElement))}const h=Qt.forwardRef(u);return h[HGe]=o,h}function $Ge({layoutId:t}){const e=Qt.useContext(bxe).id;return e&&t!==void 0?e+"-"+t:t}function WGe(t){function e(r,o={}){return GGe(t(r,o))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,o)=>(n.has(o)||n.set(o,e(o)),n.get(o))})}const KGe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function F$(t){return typeof t!="string"||t.includes("-")?!1:!!(KGe.indexOf(t)>-1||/[A-Z]/.test(t))}const H3={};function qGe(t){Object.assign(H3,t)}const HP=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qg=new Set(HP);function wxe(t,{layout:e,layoutId:n}){return Qg.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!H3[t]||t==="opacity")}const Ws=t=>!!(t&&t.getVelocity),XGe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},YGe=HP.length;function ZGe(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,o){let u="";for(let h=0;h<YGe;h++){const m=HP[h];if(t[m]!==void 0){const _=XGe[m]||m;u+=`${_}(${t[m]}) `}}return e&&!t.z&&(u+="translateZ(0)"),u=u.trim(),o?u=o(t,r?"":u):n&&r&&(u="none"),u}const xxe=t=>e=>typeof e=="string"&&e.startsWith(t),Sxe=xxe("--"),s9=xxe("var(--"),QGe=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,JGe=(t,e)=>e&&typeof t=="number"?e.transform(t):t,nm=(t,e,n)=>Math.min(Math.max(n,t),e),Jg={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},NC={...Jg,transform:t=>nm(0,1,t)},DD={...Jg,default:1},FC=t=>Math.round(t*1e5)/1e5,DL=/(-)?([\d]*\.?[\d])+/g,Exe=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,e$e=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function GP(t){return typeof t=="string"}const $P=t=>({test:e=>GP(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Cf=$P("deg"),Gc=$P("%"),Fn=$P("px"),t$e=$P("vh"),n$e=$P("vw"),n0e={...Gc,parse:t=>Gc.parse(t)/100,transform:t=>Gc.transform(t*100)},r0e={...Jg,transform:Math.round},Cxe={borderWidth:Fn,borderTopWidth:Fn,borderRightWidth:Fn,borderBottomWidth:Fn,borderLeftWidth:Fn,borderRadius:Fn,radius:Fn,borderTopLeftRadius:Fn,borderTopRightRadius:Fn,borderBottomRightRadius:Fn,borderBottomLeftRadius:Fn,width:Fn,maxWidth:Fn,height:Fn,maxHeight:Fn,size:Fn,top:Fn,right:Fn,bottom:Fn,left:Fn,padding:Fn,paddingTop:Fn,paddingRight:Fn,paddingBottom:Fn,paddingLeft:Fn,margin:Fn,marginTop:Fn,marginRight:Fn,marginBottom:Fn,marginLeft:Fn,rotate:Cf,rotateX:Cf,rotateY:Cf,rotateZ:Cf,scale:DD,scaleX:DD,scaleY:DD,scaleZ:DD,skew:Cf,skewX:Cf,skewY:Cf,distance:Fn,translateX:Fn,translateY:Fn,translateZ:Fn,x:Fn,y:Fn,z:Fn,perspective:Fn,transformPerspective:Fn,opacity:NC,originX:n0e,originY:n0e,originZ:Fn,zIndex:r0e,fillOpacity:NC,strokeOpacity:NC,numOctaves:r0e};function B$(t,e,n,r){const{style:o,vars:u,transform:h,transformOrigin:m}=t;let _=!1,x=!1,M=!0;for(const R in e){const N=e[R];if(Sxe(R)){u[R]=N;continue}const H=Cxe[R],Q=JGe(N,H);if(Qg.has(R)){if(_=!0,h[R]=Q,!M)continue;N!==(H.default||0)&&(M=!1)}else R.startsWith("origin")?(x=!0,m[R]=Q):o[R]=Q}if(e.transform||(_||r?o.transform=ZGe(t.transform,n,M,r):o.transform&&(o.transform="none")),x){const{originX:R="50%",originY:N="50%",originZ:H=0}=m;o.transformOrigin=`${R} ${N} ${H}`}}const U$=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Pxe(t,e,n){for(const r in e)!Ws(e[r])&&!wxe(r,n)&&(t[r]=e[r])}function r$e({transformTemplate:t},e,n){return Qt.useMemo(()=>{const r=U$();return B$(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function i$e(t,e,n){const r=t.style||{},o={};return Pxe(o,r,t),Object.assign(o,r$e(t,e,n)),t.transformValues?t.transformValues(o):o}function o$e(t,e,n){const r={},o=i$e(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=o,r}const s$e=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function G3(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||s$e.has(t)}let kxe=t=>!G3(t);function a$e(t){t&&(kxe=e=>e.startsWith("on")?!G3(e):t(e))}try{a$e(require("@emotion/is-prop-valid").default)}catch{}function l$e(t,e,n){const r={};for(const o in t)o==="values"&&typeof t.values=="object"||(kxe(o)||n===!0&&G3(o)||!e&&!G3(o)||t.draggable&&o.startsWith("onDrag"))&&(r[o]=t[o]);return r}function i0e(t,e,n){return typeof t=="string"?t:Fn.transform(e+n*t)}function u$e(t,e,n){const r=i0e(e,t.x,t.width),o=i0e(n,t.y,t.height);return`${r} ${o}`}const c$e={offset:"stroke-dashoffset",array:"stroke-dasharray"},d$e={offset:"strokeDashoffset",array:"strokeDasharray"};function h$e(t,e,n=1,r=0,o=!0){t.pathLength=1;const u=o?c$e:d$e;t[u.offset]=Fn.transform(-r);const h=Fn.transform(e),m=Fn.transform(n);t[u.array]=`${h} ${m}`}function V$(t,{attrX:e,attrY:n,attrScale:r,originX:o,originY:u,pathLength:h,pathSpacing:m=1,pathOffset:_=0,...x},M,R,N){if(B$(t,x,M,N),R){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:H,style:Q,dimensions:j}=t;H.transform&&(j&&(Q.transform=H.transform),delete H.transform),j&&(o!==void 0||u!==void 0||Q.transform)&&(Q.transformOrigin=u$e(j,o!==void 0?o:.5,u!==void 0?u:.5)),e!==void 0&&(H.x=e),n!==void 0&&(H.y=n),r!==void 0&&(H.scale=r),h!==void 0&&h$e(H,h,m,_,!1)}const Txe=()=>({...U$(),attrs:{}}),j$=t=>typeof t=="string"&&t.toLowerCase()==="svg";function p$e(t,e,n,r){const o=Qt.useMemo(()=>{const u=Txe();return V$(u,e,{enableHardwareAcceleration:!1},j$(r),t.transformTemplate),{...u.attrs,style:{...u.style}}},[e]);if(t.style){const u={};Pxe(u,t.style,t),o.style={...u,...o.style}}return o}function f$e(t=!1){return(n,r,o,{latestValues:u},h)=>{const _=(F$(n)?p$e:o$e)(r,u,h,n),M={...l$e(r,typeof n=="string",t),..._,ref:o},{children:R}=r,N=Qt.useMemo(()=>Ws(R)?R.get():R,[R]);return Qt.createElement(n,{...M,children:N})}}const z$=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function Mxe(t,{style:e,vars:n},r,o){Object.assign(t.style,e,o&&o.getProjectionStyles(r));for(const u in n)t.style.setProperty(u,n[u])}const Axe=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Ixe(t,e,n,r){Mxe(t,e,void 0,r);for(const o in e.attrs)t.setAttribute(Axe.has(o)?o:z$(o),e.attrs[o])}function H$(t,e){const{style:n}=t,r={};for(const o in n)(Ws(n[o])||e.style&&Ws(e.style[o])||wxe(o,t))&&(r[o]=n[o]);return r}function Rxe(t,e){const n=H$(t,e);for(const r in t)if(Ws(t[r])||Ws(e[r])){const o=HP.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[o]=t[r]}return n}function G$(t,e,n,r={},o={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,o)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,o)),e}function WP(t){const e=Qt.useRef(null);return e.current===null&&(e.current=t()),e.current}const $3=t=>Array.isArray(t),m$e=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),v$e=t=>$3(t)?t[t.length-1]||0:t;function n3(t){const e=Ws(t)?t.get():t;return m$e(e)?e.toValue():e}function g$e({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,o,u){const h={latestValues:y$e(r,o,u,t),renderState:e()};return n&&(h.mount=m=>n(r,m,h)),h}const Oxe=t=>(e,n)=>{const r=Qt.useContext(AL),o=Qt.useContext(D$),u=()=>g$e(t,e,r,o);return n?u():WP(u)};function y$e(t,e,n,r){const o={},u=r(t,{});for(const N in u)o[N]=n3(u[N]);let{initial:h,animate:m}=t;const _=OL(t),x=yxe(t);e&&x&&!_&&t.inherit!==!1&&(h===void 0&&(h=e.initial),m===void 0&&(m=e.animate));let M=n?n.initial===!1:!1;M=M||h===!1;const R=M?m:h;return R&&typeof R!="boolean"&&!RL(R)&&(Array.isArray(R)?R:[R]).forEach(H=>{const Q=G$(t,H);if(!Q)return;const{transitionEnd:j,transition:z,...U}=Q;for(const C in U){let K=U[C];if(Array.isArray(K)){const te=M?K.length-1:0;K=K[te]}K!==null&&(o[C]=K)}for(const C in j)o[C]=j[C]}),o}const b$e={useVisualState:Oxe({scrapeMotionValuesFromProps:Rxe,createRenderState:Txe,onMount:(t,e,{renderState:n,latestValues:r})=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}V$(n,r,{enableHardwareAcceleration:!1},j$(e.tagName),t.transformTemplate),Ixe(e,n)}})},_$e={useVisualState:Oxe({scrapeMotionValuesFromProps:H$,createRenderState:U$})};function w$e(t,{forwardMotionProps:e=!1},n,r){return{...F$(t)?b$e:_$e,preloadedFeatures:n,useRender:f$e(e),createVisualElement:r,Component:t}}function _h(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const Dxe=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function LL(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const x$e=t=>e=>Dxe(e)&&t(e,LL(e));function Sh(t,e,n,r){return _h(t,e,x$e(n),r)}const S$e=(t,e)=>n=>e(t(n)),Yf=(...t)=>t.reduce(S$e);function Lxe(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const o0e=Lxe("dragHorizontal"),s0e=Lxe("dragVertical");function Nxe(t){let e=!1;if(t==="y")e=s0e();else if(t==="x")e=o0e();else{const n=o0e(),r=s0e();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function Fxe(){const t=Nxe(!0);return t?(t(),!1):!0}class cm{constructor(e){this.isMounted=!1,this.node=e}update(){}}const Vi=t=>t;function E$e(t){let e=[],n=[],r=0,o=!1,u=!1;const h=new WeakSet,m={schedule:(_,x=!1,M=!1)=>{const R=M&&o,N=R?e:n;return x&&h.add(_),N.indexOf(_)===-1&&(N.push(_),R&&o&&(r=e.length)),_},cancel:_=>{const x=n.indexOf(_);x!==-1&&n.splice(x,1),h.delete(_)},process:_=>{if(o){u=!0;return}if(o=!0,[e,n]=[n,e],n.length=0,r=e.length,r)for(let x=0;x<r;x++){const M=e[x];M(_),h.has(M)&&(m.schedule(M),t())}o=!1,u&&(u=!1,m.process(_))}};return m}const LD=["prepare","read","update","preRender","render","postRender"],C$e=40;function P$e(t,e){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},u=LD.reduce((R,N)=>(R[N]=E$e(()=>n=!0),R),{}),h=R=>u[R].process(o),m=()=>{const R=performance.now();n=!1,o.delta=r?1e3/60:Math.max(Math.min(R-o.timestamp,C$e),1),o.timestamp=R,o.isProcessing=!0,LD.forEach(h),o.isProcessing=!1,n&&e&&(r=!1,t(m))},_=()=>{n=!0,r=!0,o.isProcessing||t(m)};return{schedule:LD.reduce((R,N)=>{const H=u[N];return R[N]=(Q,j=!1,z=!1)=>(n||_(),H.schedule(Q,j,z)),R},{}),cancel:R=>LD.forEach(N=>u[N].cancel(R)),state:o,steps:u}}const{schedule:_i,cancel:Xc,state:gs,steps:T8}=P$e(typeof requestAnimationFrame<"u"?requestAnimationFrame:Vi,!0);function a0e(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),o=(u,h)=>{if(u.type==="touch"||Fxe())return;const m=t.getProps();t.animationState&&m.whileHover&&t.animationState.setActive("whileHover",e),m[r]&&_i.update(()=>m[r](u,h))};return Sh(t.current,n,o,{passive:!t.getProps()[r]})}class k$e extends cm{mount(){this.unmount=Yf(a0e(this.node,!0),a0e(this.node,!1))}unmount(){}}class T$e extends cm{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Yf(_h(this.node.current,"focus",()=>this.onFocus()),_h(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Bxe=(t,e)=>e?t===e?!0:Bxe(t,e.parentElement):!1;function M8(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,LL(n))}class M$e extends cm{constructor(){super(...arguments),this.removeStartListeners=Vi,this.removeEndListeners=Vi,this.removeAccessibleListeners=Vi,this.startPointerPress=(e,n)=>{if(this.removeEndListeners(),this.isPressing)return;const r=this.node.getProps(),u=Sh(window,"pointerup",(m,_)=>{if(!this.checkPressEnd())return;const{onTap:x,onTapCancel:M}=this.node.getProps();_i.update(()=>{Bxe(this.node.current,m.target)?x&&x(m,_):M&&M(m,_)})},{passive:!(r.onTap||r.onPointerUp)}),h=Sh(window,"pointercancel",(m,_)=>this.cancelPress(m,_),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Yf(u,h),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=u=>{if(u.key!=="Enter"||this.isPressing)return;const h=m=>{m.key!=="Enter"||!this.checkPressEnd()||M8("up",(_,x)=>{const{onTap:M}=this.node.getProps();M&&_i.update(()=>M(_,x))})};this.removeEndListeners(),this.removeEndListeners=_h(this.node.current,"keyup",h),M8("down",(m,_)=>{this.startPress(m,_)})},n=_h(this.node.current,"keydown",e),r=()=>{this.isPressing&&M8("cancel",(u,h)=>this.cancelPress(u,h))},o=_h(this.node.current,"blur",r);this.removeAccessibleListeners=Yf(n,o)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:o}=this.node.getProps();o&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&_i.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Fxe()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&_i.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Sh(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=_h(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Yf(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const a9=new WeakMap,A8=new WeakMap,A$e=t=>{const e=a9.get(t.target);e&&e(t)},I$e=t=>{t.forEach(A$e)};function R$e({root:t,...e}){const n=t||document;A8.has(n)||A8.set(n,{});const r=A8.get(n),o=JSON.stringify(e);return r[o]||(r[o]=new IntersectionObserver(I$e,{root:t,...e})),r[o]}function O$e(t,e,n){const r=R$e(e);return a9.set(t,n),r.observe(t),()=>{a9.delete(t),r.unobserve(t)}}const D$e={some:0,all:1};class L$e extends cm{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:u}=e,h={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:D$e[o]},m=_=>{const{isIntersecting:x}=_;if(this.isInView===x||(this.isInView=x,u&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:M,onViewportLeave:R}=this.node.getProps(),N=x?M:R;N&&N(_)};return O$e(this.node.current,h,m)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(N$e(e,n))&&this.startObserver()}unmount(){}}function N$e({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const F$e={inView:{Feature:L$e},tap:{Feature:M$e},focus:{Feature:T$e},hover:{Feature:k$e}};function Uxe(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function B$e(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function U$e(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function NL(t,e,n){const r=t.getProps();return G$(r,e,n!==void 0?n:r.custom,B$e(t),U$e(t))}const V$e="framerAppearId",j$e="data-"+z$(V$e);let z$e=Vi,$$=Vi;const Zf=t=>t*1e3,Eh=t=>t/1e3,H$e={current:!1},Vxe=t=>Array.isArray(t)&&typeof t[0]=="number";function jxe(t){return!!(!t||typeof t=="string"&&zxe[t]||Vxe(t)||Array.isArray(t)&&t.every(jxe))}const SC=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,zxe={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:SC([0,.65,.55,1]),circOut:SC([.55,0,1,.45]),backIn:SC([.31,.01,.66,-.59]),backOut:SC([.33,1.53,.69,.99])};function Hxe(t){if(t)return Vxe(t)?SC(t):Array.isArray(t)?t.map(Hxe):zxe[t]}function G$e(t,e,n,{delay:r=0,duration:o,repeat:u=0,repeatType:h="loop",ease:m,times:_}={}){const x={[e]:n};_&&(x.offset=_);const M=Hxe(m);return Array.isArray(M)&&(x.easing=M),t.animate(x,{delay:r,duration:o,easing:Array.isArray(M)?"linear":M,fill:"both",iterations:u+1,direction:h==="reverse"?"alternate":"normal"})}function $$e(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const Gxe=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,W$e=1e-7,K$e=12;function q$e(t,e,n,r,o){let u,h,m=0;do h=e+(n-e)/2,u=Gxe(h,r,o)-t,u>0?n=h:e=h;while(Math.abs(u)>W$e&&++m<K$e);return h}function KP(t,e,n,r){if(t===e&&n===r)return Vi;const o=u=>q$e(u,0,1,t,n);return u=>u===0||u===1?u:Gxe(o(u),e,r)}const X$e=KP(.42,0,1,1),Y$e=KP(0,0,.58,1),$xe=KP(.42,0,.58,1),Z$e=t=>Array.isArray(t)&&typeof t[0]!="number",Wxe=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Kxe=t=>e=>1-t(1-e),qxe=t=>1-Math.sin(Math.acos(t)),W$=Kxe(qxe),Q$e=Wxe(W$),Xxe=KP(.33,1.53,.69,.99),K$=Kxe(Xxe),J$e=Wxe(K$),eWe=t=>(t*=2)<1?.5*K$(t):.5*(2-Math.pow(2,-10*(t-1))),tWe={linear:Vi,easeIn:X$e,easeInOut:$xe,easeOut:Y$e,circIn:qxe,circInOut:Q$e,circOut:W$,backIn:K$,backInOut:J$e,backOut:Xxe,anticipate:eWe},l0e=t=>{if(Array.isArray(t)){$$(t.length===4);const[e,n,r,o]=t;return KP(e,n,r,o)}else if(typeof t=="string")return tWe[t];return t},q$=(t,e)=>n=>!!(GP(n)&&e$e.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),Yxe=(t,e,n)=>r=>{if(!GP(r))return r;const[o,u,h,m]=r.match(DL);return{[t]:parseFloat(o),[e]:parseFloat(u),[n]:parseFloat(h),alpha:m!==void 0?parseFloat(m):1}},nWe=t=>nm(0,255,t),I8={...Jg,transform:t=>Math.round(nWe(t))},wg={test:q$("rgb","red"),parse:Yxe("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+I8.transform(t)+", "+I8.transform(e)+", "+I8.transform(n)+", "+FC(NC.transform(r))+")"};function rWe(t){let e="",n="",r="",o="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),o=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),o=t.substring(4,5),e+=e,n+=n,r+=r,o+=o),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const l9={test:q$("#"),parse:rWe,transform:wg.transform},w_={test:q$("hsl","hue"),parse:Yxe("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Gc.transform(FC(e))+", "+Gc.transform(FC(n))+", "+FC(NC.transform(r))+")"},Bs={test:t=>wg.test(t)||l9.test(t)||w_.test(t),parse:t=>wg.test(t)?wg.parse(t):w_.test(t)?w_.parse(t):l9.parse(t),transform:t=>GP(t)?t:t.hasOwnProperty("red")?wg.transform(t):w_.transform(t)},yi=(t,e,n)=>-n*t+n*e+t;function R8(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function iWe({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let o=0,u=0,h=0;if(!e)o=u=h=n;else{const m=n<.5?n*(1+e):n+e-n*e,_=2*n-m;o=R8(_,m,t+1/3),u=R8(_,m,t),h=R8(_,m,t-1/3)}return{red:Math.round(o*255),green:Math.round(u*255),blue:Math.round(h*255),alpha:r}}const O8=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},oWe=[l9,wg,w_],sWe=t=>oWe.find(e=>e.test(t));function u0e(t){const e=sWe(t);let n=e.parse(t);return e===w_&&(n=iWe(n)),n}const Zxe=(t,e)=>{const n=u0e(t),r=u0e(e),o={...n};return u=>(o.red=O8(n.red,r.red,u),o.green=O8(n.green,r.green,u),o.blue=O8(n.blue,r.blue,u),o.alpha=yi(n.alpha,r.alpha,u),wg.transform(o))};function aWe(t){var e,n;return isNaN(t)&&GP(t)&&(((e=t.match(DL))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Exe))===null||n===void 0?void 0:n.length)||0)>0}const Qxe={regex:QGe,countKey:"Vars",token:"${v}",parse:Vi},Jxe={regex:Exe,countKey:"Colors",token:"${c}",parse:Bs.parse},eSe={regex:DL,countKey:"Numbers",token:"${n}",parse:Jg.parse};function D8(t,{regex:e,countKey:n,token:r,parse:o}){const u=t.tokenised.match(e);u&&(t["num"+n]=u.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...u.map(o)))}function W3(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&D8(n,Qxe),D8(n,Jxe),D8(n,eSe),n}function tSe(t){return W3(t).values}function nSe(t){const{values:e,numColors:n,numVars:r,tokenised:o}=W3(t),u=e.length;return h=>{let m=o;for(let _=0;_<u;_++)_<r?m=m.replace(Qxe.token,h[_]):_<r+n?m=m.replace(Jxe.token,Bs.transform(h[_])):m=m.replace(eSe.token,FC(h[_]));return m}}const lWe=t=>typeof t=="number"?0:t;function uWe(t){const e=tSe(t);return nSe(t)(e.map(lWe))}const rm={test:aWe,parse:tSe,createTransformer:nSe,getAnimatableNone:uWe},rSe=(t,e)=>n=>`${n>0?e:t}`;function iSe(t,e){return typeof t=="number"?n=>yi(t,e,n):Bs.test(t)?Zxe(t,e):t.startsWith("var(")?rSe(t,e):sSe(t,e)}const oSe=(t,e)=>{const n=[...t],r=n.length,o=t.map((u,h)=>iSe(u,e[h]));return u=>{for(let h=0;h<r;h++)n[h]=o[h](u);return n}},cWe=(t,e)=>{const n={...t,...e},r={};for(const o in n)t[o]!==void 0&&e[o]!==void 0&&(r[o]=iSe(t[o],e[o]));return o=>{for(const u in r)n[u]=r[u](o);return n}},sSe=(t,e)=>{const n=rm.createTransformer(e),r=W3(t),o=W3(e);return r.numVars===o.numVars&&r.numColors===o.numColors&&r.numNumbers>=o.numNumbers?Yf(oSe(r.values,o.values),n):rSe(t,e)},yP=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},c0e=(t,e)=>n=>yi(t,e,n);function dWe(t){return typeof t=="number"?c0e:typeof t=="string"?Bs.test(t)?Zxe:sSe:Array.isArray(t)?oSe:typeof t=="object"?cWe:c0e}function hWe(t,e,n){const r=[],o=n||dWe(t[0]),u=t.length-1;for(let h=0;h<u;h++){let m=o(t[h],t[h+1]);if(e){const _=Array.isArray(e)?e[h]||Vi:e;m=Yf(_,m)}r.push(m)}return r}function X$(t,e,{clamp:n=!0,ease:r,mixer:o}={}){const u=t.length;if($$(u===e.length),u===1)return()=>e[0];t[0]>t[u-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=hWe(e,r,o),m=h.length,_=x=>{let M=0;if(m>1)for(;M<t.length-2&&!(x<t[M+1]);M++);const R=yP(t[M],t[M+1],x);return h[M](R)};return n?x=>_(nm(t[0],t[u-1],x)):_}function pWe(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const o=yP(0,e,r);t.push(yi(n,1,o))}}function fWe(t){const e=[0];return pWe(e,t.length-1),e}function mWe(t,e){return t.map(n=>n*e)}function vWe(t,e){return t.map(()=>e||$xe).splice(0,t.length-1)}function K3({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const o=Z$e(r)?r.map(l0e):l0e(r),u={done:!1,value:e[0]},h=mWe(n&&n.length===e.length?n:fWe(e),t),m=X$(h,e,{ease:Array.isArray(o)?o:vWe(e,o)});return{calculatedDuration:t,next:_=>(u.value=m(_),u.done=_>=t,u)}}function aSe(t,e){return e?t*(1e3/e):0}const gWe=5;function lSe(t,e,n){const r=Math.max(e-gWe,0);return aSe(n-t(r),e-r)}const L8=.001,yWe=.01,d0e=10,bWe=.05,_We=1;function wWe({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let o,u;z$e(t<=Zf(d0e));let h=1-e;h=nm(bWe,_We,h),t=nm(yWe,d0e,Eh(t)),h<1?(o=x=>{const M=x*h,R=M*t,N=M-n,H=u9(x,h),Q=Math.exp(-R);return L8-N/H*Q},u=x=>{const R=x*h*t,N=R*n+n,H=Math.pow(h,2)*Math.pow(x,2)*t,Q=Math.exp(-R),j=u9(Math.pow(x,2),h);return(-o(x)+L8>0?-1:1)*((N-H)*Q)/j}):(o=x=>{const M=Math.exp(-x*t),R=(x-n)*t+1;return-L8+M*R},u=x=>{const M=Math.exp(-x*t),R=(n-x)*(t*t);return M*R});const m=5/t,_=SWe(o,u,m);if(t=Zf(t),isNaN(_))return{stiffness:100,damping:10,duration:t};{const x=Math.pow(_,2)*r;return{stiffness:x,damping:h*2*Math.sqrt(r*x),duration:t}}}const xWe=12;function SWe(t,e,n){let r=n;for(let o=1;o<xWe;o++)r=r-t(r)/e(r);return r}function u9(t,e){return t*Math.sqrt(1-e*e)}const EWe=["duration","bounce"],CWe=["stiffness","damping","mass"];function h0e(t,e){return e.some(n=>t[n]!==void 0)}function PWe(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!h0e(t,CWe)&&h0e(t,EWe)){const n=wWe(t);e={...e,...n,velocity:0,mass:1},e.isResolvedFromDuration=!0}return e}function uSe({keyframes:t,restDelta:e,restSpeed:n,...r}){const o=t[0],u=t[t.length-1],h={done:!1,value:o},{stiffness:m,damping:_,mass:x,velocity:M,duration:R,isResolvedFromDuration:N}=PWe(r),H=M?-Eh(M):0,Q=_/(2*Math.sqrt(m*x)),j=u-o,z=Eh(Math.sqrt(m/x)),U=Math.abs(j)<5;n||(n=U?.01:2),e||(e=U?.005:.5);let C;if(Q<1){const K=u9(z,Q);C=te=>{const pe=Math.exp(-Q*z*te);return u-pe*((H+Q*z*j)/K*Math.sin(K*te)+j*Math.cos(K*te))}}else if(Q===1)C=K=>u-Math.exp(-z*K)*(j+(H+z*j)*K);else{const K=z*Math.sqrt(Q*Q-1);C=te=>{const pe=Math.exp(-Q*z*te),Z=Math.min(K*te,300);return u-pe*((H+Q*z*j)*Math.sinh(Z)+K*j*Math.cosh(Z))/K}}return{calculatedDuration:N&&R||null,next:K=>{const te=C(K);if(N)h.done=K>=R;else{let pe=H;K!==0&&(Q<1?pe=lSe(C,K,te):pe=0);const Z=Math.abs(pe)<=n,be=Math.abs(u-te)<=e;h.done=Z&&be}return h.value=h.done?u:te,h}}}function p0e({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:u=500,modifyTarget:h,min:m,max:_,restDelta:x=.5,restSpeed:M}){const R=t[0],N={done:!1,value:R},H=Pe=>m!==void 0&&Pe<m||_!==void 0&&Pe>_,Q=Pe=>m===void 0?_:_===void 0||Math.abs(m-Pe)<Math.abs(_-Pe)?m:_;let j=n*e;const z=R+j,U=h===void 0?z:h(z);U!==z&&(j=U-R);const C=Pe=>-j*Math.exp(-Pe/r),K=Pe=>U+C(Pe),te=Pe=>{const G=C(Pe),ye=K(Pe);N.done=Math.abs(G)<=x,N.value=N.done?U:ye};let pe,Z;const be=Pe=>{H(N.value)&&(pe=Pe,Z=uSe({keyframes:[N.value,Q(N.value)],velocity:lSe(K,Pe,N.value),damping:o,stiffness:u,restDelta:x,restSpeed:M}))};return be(0),{calculatedDuration:null,next:Pe=>{let G=!1;return!Z&&pe===void 0&&(G=!0,te(Pe),be(Pe)),pe!==void 0&&Pe>pe?Z.next(Pe-pe):(!G&&te(Pe),N)}}}const kWe=t=>{const e=({timestamp:n})=>t(n);return{start:()=>_i.update(e,!0),stop:()=>Xc(e),now:()=>gs.isProcessing?gs.timestamp:performance.now()}},f0e=2e4;function m0e(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<f0e;)e+=n,r=t.next(e);return e>=f0e?1/0:e}const TWe={decay:p0e,inertia:p0e,tween:K3,keyframes:K3,spring:uSe};function q3({autoplay:t=!0,delay:e=0,driver:n=kWe,keyframes:r,type:o="keyframes",repeat:u=0,repeatDelay:h=0,repeatType:m="loop",onPlay:_,onStop:x,onComplete:M,onUpdate:R,...N}){let H=1,Q=!1,j,z;const U=()=>{z=new Promise(Be=>{j=Be})};U();let C;const K=TWe[o]||K3;let te;K!==K3&&typeof r[0]!="number"&&(te=X$([0,100],r,{clamp:!1}),r=[0,100]);const pe=K({...N,keyframes:r});let Z;m==="mirror"&&(Z=K({...N,keyframes:[...r].reverse(),velocity:-(N.velocity||0)}));let be="idle",Pe=null,G=null,ye=null;pe.calculatedDuration===null&&u&&(pe.calculatedDuration=m0e(pe));const{calculatedDuration:St}=pe;let kt=1/0,it=1/0;St!==null&&(kt=St+h,it=kt*(u+1)-h);let me=0;const lt=Be=>{if(G===null)return;H>0&&(G=Math.min(G,Be)),H<0&&(G=Math.min(Be-it/H,G)),Pe!==null?me=Pe:me=Math.round(Be-G)*H;const nt=me-e*(H>=0?1:-1),$t=H>=0?nt<0:nt>it;me=Math.max(nt,0),be==="finished"&&Pe===null&&(me=it);let Ut=me,Dt=pe;if(u){const Wn=me/kt;let qr=Math.floor(Wn),xn=Wn%1;!xn&&Wn>=1&&(xn=1),xn===1&&qr--,qr=Math.min(qr,u+1);const et=!!(qr%2);et&&(m==="reverse"?(xn=1-xn,h&&(xn-=h/kt)):m==="mirror"&&(Dt=Z));let Qr=nm(0,1,xn);me>it&&(Qr=m==="reverse"&&et?1:0),Ut=Qr*kt}const en=$t?{done:!1,value:r[0]}:Dt.next(Ut);te&&(en.value=te(en.value));let{done:on}=en;!$t&&St!==null&&(on=H>=0?me>=it:me<=0);const wn=Pe===null&&(be==="finished"||be==="running"&&on);return R&&R(en.value),wn&&Ge(),en},Fe=()=>{C&&C.stop(),C=void 0},vt=()=>{be="idle",Fe(),j(),U(),G=ye=null},Ge=()=>{be="finished",M&&M(),Fe(),j()},mt=()=>{if(Q)return;C||(C=n(lt));const Be=C.now();_&&_(),Pe!==null?G=Be-Pe:(!G||be==="finished")&&(G=Be),be==="finished"&&U(),ye=G,Pe=null,be="running",C.start()};t&&mt();const Je={then(Be,nt){return z.then(Be,nt)},get time(){return Eh(me)},set time(Be){Be=Zf(Be),me=Be,Pe!==null||!C||H===0?Pe=Be:G=C.now()-Be/H},get duration(){const Be=pe.calculatedDuration===null?m0e(pe):pe.calculatedDuration;return Eh(Be)},get speed(){return H},set speed(Be){Be===H||!C||(H=Be,Je.time=Eh(me))},get state(){return be},play:mt,pause:()=>{be="paused",Pe=me},stop:()=>{Q=!0,be!=="idle"&&(be="idle",x&&x(),vt())},cancel:()=>{ye!==null&&lt(ye),vt()},complete:()=>{be="finished"},sample:Be=>(G=0,lt(Be))};return Je}function MWe(t){let e;return()=>(e===void 0&&(e=t()),e)}const AWe=MWe(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),IWe=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ND=10,RWe=2e4,OWe=(t,e)=>e.type==="spring"||t==="backgroundColor"||!jxe(e.ease);function DWe(t,e,{onUpdate:n,onComplete:r,...o}){if(!(AWe()&&IWe.has(e)&&!o.repeatDelay&&o.repeatType!=="mirror"&&o.damping!==0&&o.type!=="inertia"))return!1;let h=!1,m,_;const x=()=>{_=new Promise(C=>{m=C})};x();let{keyframes:M,duration:R=300,ease:N,times:H}=o;if(OWe(e,o)){const C=q3({...o,repeat:0,delay:0});let K={done:!1,value:M[0]};const te=[];let pe=0;for(;!K.done&&pe<RWe;)K=C.sample(pe),te.push(K.value),pe+=ND;H=void 0,M=te,R=pe-ND,N="linear"}const Q=G$e(t.owner.current,e,M,{...o,duration:R,ease:N,times:H}),j=()=>Q.cancel(),z=()=>{_i.update(j),m(),x()};return Q.onfinish=()=>{t.set($$e(M,o)),r&&r(),z()},{then(C,K){return _.then(C,K)},attachTimeline(C){return Q.timeline=C,Q.onfinish=null,Vi},get time(){return Eh(Q.currentTime||0)},set time(C){Q.currentTime=Zf(C)},get speed(){return Q.playbackRate},set speed(C){Q.playbackRate=C},get duration(){return Eh(R)},play:()=>{h||(Q.play(),Xc(j))},pause:()=>Q.pause(),stop:()=>{if(h=!0,Q.playState==="idle")return;const{currentTime:C}=Q;if(C){const K=q3({...o,autoplay:!1});t.setWithVelocity(K.sample(C-ND).value,K.sample(C).value,ND)}z()},complete:()=>Q.finish(),cancel:z}}function LWe({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const o=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Vi,pause:Vi,stop:Vi,then:u=>(u(),Promise.resolve()),cancel:Vi,complete:Vi});return e?q3({keyframes:[0,1],duration:0,delay:e,onComplete:o}):o()}const NWe={type:"spring",stiffness:500,damping:25,restSpeed:10},FWe=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),BWe={type:"keyframes",duration:.8},UWe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},VWe=(t,{keyframes:e})=>e.length>2?BWe:Qg.has(t)?t.startsWith("scale")?FWe(e[1]):NWe:UWe,c9=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(rm.test(e)||e==="0")&&!e.startsWith("url(")),jWe=new Set(["brightness","contrast","saturate","opacity"]);function zWe(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(DL)||[];if(!r)return t;const o=n.replace(r,"");let u=jWe.has(e)?1:0;return r!==n&&(u*=100),e+"("+u+o+")"}const HWe=/([a-z-]*)\(.*?\)/g,d9={...rm,getAnimatableNone:t=>{const e=t.match(HWe);return e?e.map(zWe).join(" "):t}},GWe={...Cxe,color:Bs,backgroundColor:Bs,outlineColor:Bs,fill:Bs,stroke:Bs,borderColor:Bs,borderTopColor:Bs,borderRightColor:Bs,borderBottomColor:Bs,borderLeftColor:Bs,filter:d9,WebkitFilter:d9},Y$=t=>GWe[t];function cSe(t,e){let n=Y$(t);return n!==d9&&(n=rm),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const dSe=t=>/^0[^.\s]+$/.test(t);function $We(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||dSe(t)}function WWe(t,e,n,r){const o=c9(e,n);let u;Array.isArray(n)?u=[...n]:u=[null,n];const h=r.from!==void 0?r.from:t.get();let m;const _=[];for(let x=0;x<u.length;x++)u[x]===null&&(u[x]=x===0?h:u[x-1]),$We(u[x])&&_.push(x),typeof u[x]=="string"&&u[x]!=="none"&&u[x]!=="0"&&(m=u[x]);if(o&&_.length&&m)for(let x=0;x<_.length;x++){const M=_[x];u[M]=cSe(e,m)}return u}function KWe({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:u,repeatType:h,repeatDelay:m,from:_,elapsed:x,...M}){return!!Object.keys(M).length}function hSe(t,e){return t[e]||t.default||t}const Z$=(t,e,n,r={})=>o=>{const u=hSe(r,t)||{},h=u.delay||r.delay||0;let{elapsed:m=0}=r;m=m-Zf(h);const _=WWe(e,t,n,u),x=_[0],M=_[_.length-1],R=c9(t,x),N=c9(t,M);let H={keyframes:_,velocity:e.getVelocity(),ease:"easeOut",...u,delay:-m,onUpdate:Q=>{e.set(Q),u.onUpdate&&u.onUpdate(Q)},onComplete:()=>{o(),u.onComplete&&u.onComplete()}};if(KWe(u)||(H={...H,...VWe(t,H)}),H.duration&&(H.duration=Zf(H.duration)),H.repeatDelay&&(H.repeatDelay=Zf(H.repeatDelay)),!R||!N||H$e.current||u.type===!1)return LWe(H);if(e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const Q=DWe(e,t,H);if(Q)return Q}return q3(H)};function X3(t){return!!(Ws(t)&&t.add)}const pSe=t=>/^\-?\d*\.?\d+$/.test(t);function Q$(t,e){t.indexOf(e)===-1&&t.push(e)}function J$(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function qWe([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const o=n<0?t.length+n:n,[u]=t.splice(e,1);t.splice(o,0,u)}return t}class eW{constructor(){this.subscriptions=[]}add(e){return Q$(this.subscriptions,e),()=>J$(this.subscriptions,e)}notify(e,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](e,n,r);else for(let u=0;u<o;u++){const h=this.subscriptions[u];h&&h(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const XWe=t=>!isNaN(parseFloat(t)),BC={current:void 0};class YWe{constructor(e,n={}){this.version="10.16.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,o=!0)=>{this.prev=this.current,this.current=r;const{delta:u,timestamp:h}=gs;this.lastUpdated!==h&&(this.timeDelta=u,this.lastUpdated=h,_i.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),o&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>_i.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=XWe(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new eW);const r=this.events[e].add(n);return e==="change"?()=>{r(),_i.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return BC.current&&BC.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?aSe(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Hg(t,e){return new YWe(t,e)}const fSe=t=>e=>e.test(t),ZWe={test:t=>t==="auto",parse:t=>t},mSe=[Jg,Fn,Gc,Cf,n$e,t$e,ZWe],vC=t=>mSe.find(fSe(t)),QWe=[...mSe,Bs,rm],JWe=t=>QWe.find(fSe(t));function e7e(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Hg(n))}function t7e(t,e){const n=NL(t,e);let{transitionEnd:r={},transition:o={},...u}=n?t.makeTargetAnimatable(n,!1):{};u={...u,...r};for(const h in u){const m=v$e(u[h]);e7e(t,h,m)}}function n7e(t,e,n){var r,o;const u=Object.keys(e).filter(m=>!t.hasValue(m)),h=u.length;if(h)for(let m=0;m<h;m++){const _=u[m],x=e[_];let M=null;Array.isArray(x)&&(M=x[0]),M===null&&(M=(o=(r=n[_])!==null&&r!==void 0?r:t.readValue(_))!==null&&o!==void 0?o:e[_]),M!=null&&(typeof M=="string"&&(pSe(M)||dSe(M))?M=parseFloat(M):!JWe(M)&&rm.test(x)&&(M=cSe(_,x)),t.addValue(_,Hg(M,{owner:t})),n[_]===void 0&&(n[_]=M),M!==null&&t.setBaseTarget(_,M))}}function r7e(t,e){return e?(e[t]||e.default||e).from:void 0}function i7e(t,e,n){const r={};for(const o in t){const u=r7e(o,e);if(u!==void 0)r[o]=u;else{const h=n.getValue(o);h&&(r[o]=h.get())}}return r}function o7e({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function vSe(t,e,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:u=t.getDefaultTransition(),transitionEnd:h,...m}=t.makeTargetAnimatable(e);const _=t.getValue("willChange");r&&(u=r);const x=[],M=o&&t.animationState&&t.animationState.getState()[o];for(const R in m){const N=t.getValue(R),H=m[R];if(!N||H===void 0||M&&o7e(M,R))continue;const Q={delay:n,elapsed:0,...u};if(window.HandoffAppearAnimations&&!N.hasAnimated){const z=t.getProps()[j$e];z&&(Q.elapsed=window.HandoffAppearAnimations(z,R,N,_i))}N.start(Z$(R,N,H,t.shouldReduceMotion&&Qg.has(R)?{type:!1}:Q));const j=N.animation;X3(_)&&(_.add(R),j.then(()=>_.remove(R))),x.push(j)}return h&&Promise.all(x).then(()=>{h&&t7e(t,h)}),x}function h9(t,e,n={}){const r=NL(t,e,n.custom);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const u=r?()=>Promise.all(vSe(t,r,n)):()=>Promise.resolve(),h=t.variantChildren&&t.variantChildren.size?(_=0)=>{const{delayChildren:x=0,staggerChildren:M,staggerDirection:R}=o;return s7e(t,e,x+_,M,R,n)}:()=>Promise.resolve(),{when:m}=o;if(m){const[_,x]=m==="beforeChildren"?[u,h]:[h,u];return _().then(()=>x())}else return Promise.all([u(),h(n.delay)])}function s7e(t,e,n=0,r=0,o=1,u){const h=[],m=(t.variantChildren.size-1)*r,_=o===1?(x=0)=>x*r:(x=0)=>m-x*r;return Array.from(t.variantChildren).sort(a7e).forEach((x,M)=>{x.notify("AnimationStart",e),h.push(h9(x,e,{...u,delay:n+_(M)}).then(()=>x.notify("AnimationComplete",e)))}),Promise.all(h)}function a7e(t,e){return t.sortNodePosition(e)}function l7e(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const o=e.map(u=>h9(t,u,n));r=Promise.all(o)}else if(typeof e=="string")r=h9(t,e,n);else{const o=typeof e=="function"?NL(t,e,n.custom):e;r=Promise.all(vSe(t,o,n))}return r.then(()=>t.notify("AnimationComplete",e))}const u7e=[...L$].reverse(),c7e=L$.length;function d7e(t){return e=>Promise.all(e.map(({animation:n,options:r})=>l7e(t,n,r)))}function h7e(t){let e=d7e(t);const n=f7e();let r=!0;const o=(_,x)=>{const M=NL(t,x);if(M){const{transition:R,transitionEnd:N,...H}=M;_={..._,...H,...N}}return _};function u(_){e=_(t)}function h(_,x){const M=t.getProps(),R=t.getVariantContext(!0)||{},N=[],H=new Set;let Q={},j=1/0;for(let U=0;U<c7e;U++){const C=u7e[U],K=n[C],te=M[C]!==void 0?M[C]:R[C],pe=vP(te),Z=C===x?K.isActive:null;Z===!1&&(j=U);let be=te===R[C]&&te!==M[C]&&pe;if(be&&r&&t.manuallyAnimateOnMount&&(be=!1),K.protectedKeys={...Q},!K.isActive&&Z===null||!te&&!K.prevProp||RL(te)||typeof te=="boolean")continue;const Pe=p7e(K.prevProp,te);let G=Pe||C===x&&K.isActive&&!be&&pe||U>j&&pe;const ye=Array.isArray(te)?te:[te];let St=ye.reduce(o,{});Z===!1&&(St={});const{prevResolvedValues:kt={}}=K,it={...kt,...St},me=lt=>{G=!0,H.delete(lt),K.needsAnimating[lt]=!0};for(const lt in it){const Fe=St[lt],vt=kt[lt];Q.hasOwnProperty(lt)||(Fe!==vt?$3(Fe)&&$3(vt)?!Uxe(Fe,vt)||Pe?me(lt):K.protectedKeys[lt]=!0:Fe!==void 0?me(lt):H.add(lt):Fe!==void 0&&H.has(lt)?me(lt):K.protectedKeys[lt]=!0)}K.prevProp=te,K.prevResolvedValues=St,K.isActive&&(Q={...Q,...St}),r&&t.blockInitialAnimation&&(G=!1),G&&!be&&N.push(...ye.map(lt=>({animation:lt,options:{type:C,..._}})))}if(H.size){const U={};H.forEach(C=>{const K=t.getBaseTarget(C);K!==void 0&&(U[C]=K)}),N.push({animation:U})}let z=!!N.length;return r&&M.initial===!1&&!t.manuallyAnimateOnMount&&(z=!1),r=!1,z?e(N):Promise.resolve()}function m(_,x,M){var R;if(n[_].isActive===x)return Promise.resolve();(R=t.variantChildren)===null||R===void 0||R.forEach(H=>{var Q;return(Q=H.animationState)===null||Q===void 0?void 0:Q.setActive(_,x)}),n[_].isActive=x;const N=h(M,_);for(const H in n)n[H].protectedKeys={};return N}return{animateChanges:h,setActive:m,setAnimateFunction:u,getState:()=>n}}function p7e(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Uxe(e,t):!1}function ug(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function f7e(){return{animate:ug(!0),whileInView:ug(),whileHover:ug(),whileTap:ug(),whileDrag:ug(),whileFocus:ug(),exit:ug()}}class m7e extends cm{constructor(e){super(e),e.animationState||(e.animationState=h7e(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),RL(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let v7e=0;class g7e extends cm{constructor(){super(...arguments),this.id=v7e++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const u=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&u.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const y7e={animation:{Feature:m7e},exit:{Feature:g7e}},v0e=(t,e)=>Math.abs(t-e);function b7e(t,e){const n=v0e(t.x,e.x),r=v0e(t.y,e.y);return Math.sqrt(n**2+r**2)}class gSe{constructor(e,n,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=F8(this.lastMoveEventInfo,this.history),M=this.startEvent!==null,R=b7e(x.offset,{x:0,y:0})>=3;if(!M&&!R)return;const{point:N}=x,{timestamp:H}=gs;this.history.push({...N,timestamp:H});const{onStart:Q,onMove:j}=this.handlers;M||(Q&&Q(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),j&&j(this.lastMoveEvent,x)},this.handlePointerMove=(x,M)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=N8(M,this.transformPagePoint),_i.update(this.updatePoint,!0)},this.handlePointerUp=(x,M)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:R,onSessionEnd:N}=this.handlers,H=F8(x.type==="pointercancel"?this.lastMoveEventInfo:N8(M,this.transformPagePoint),this.history);this.startEvent&&R&&R(x,H),N&&N(x,H)},!Dxe(e))return;this.handlers=n,this.transformPagePoint=r;const o=LL(e),u=N8(o,this.transformPagePoint),{point:h}=u,{timestamp:m}=gs;this.history=[{...h,timestamp:m}];const{onSessionStart:_}=n;_&&_(e,F8(u,this.history)),this.removeListeners=Yf(Sh(window,"pointermove",this.handlePointerMove),Sh(window,"pointerup",this.handlePointerUp),Sh(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Xc(this.updatePoint)}}function N8(t,e){return e?{point:e(t.point)}:t}function g0e(t,e){return{x:t.x-e.x,y:t.y-e.y}}function F8({point:t},e){return{point:t,delta:g0e(t,ySe(e)),offset:g0e(t,_7e(e)),velocity:w7e(e,.1)}}function _7e(t){return t[0]}function ySe(t){return t[t.length-1]}function w7e(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const o=ySe(t);for(;n>=0&&(r=t[n],!(o.timestamp-r.timestamp>Zf(e)));)n--;if(!r)return{x:0,y:0};const u=Eh(o.timestamp-r.timestamp);if(u===0)return{x:0,y:0};const h={x:(o.x-r.x)/u,y:(o.y-r.y)/u};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function ja(t){return t.max-t.min}function p9(t,e=0,n=.01){return Math.abs(t-e)<=n}function y0e(t,e,n,r=.5){t.origin=r,t.originPoint=yi(e.min,e.max,t.origin),t.scale=ja(n)/ja(e),(p9(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=yi(n.min,n.max,t.origin)-t.originPoint,(p9(t.translate)||isNaN(t.translate))&&(t.translate=0)}function UC(t,e,n,r){y0e(t.x,e.x,n.x,r?r.originX:void 0),y0e(t.y,e.y,n.y,r?r.originY:void 0)}function b0e(t,e,n){t.min=n.min+e.min,t.max=t.min+ja(e)}function x7e(t,e,n){b0e(t.x,e.x,n.x),b0e(t.y,e.y,n.y)}function _0e(t,e,n){t.min=e.min-n.min,t.max=t.min+ja(e)}function VC(t,e,n){_0e(t.x,e.x,n.x),_0e(t.y,e.y,n.y)}function S7e(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?yi(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?yi(n,t,r.max):Math.min(t,n)),t}function w0e(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function E7e(t,{top:e,left:n,bottom:r,right:o}){return{x:w0e(t.x,n,o),y:w0e(t.y,e,r)}}function x0e(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function C7e(t,e){return{x:x0e(t.x,e.x),y:x0e(t.y,e.y)}}function P7e(t,e){let n=.5;const r=ja(t),o=ja(e);return o>r?n=yP(e.min,e.max-r,t.min):r>o&&(n=yP(t.min,t.max-o,e.min)),nm(0,1,n)}function k7e(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const f9=.35;function T7e(t=f9){return t===!1?t=0:t===!0&&(t=f9),{x:S0e(t,"left","right"),y:S0e(t,"top","bottom")}}function S0e(t,e,n){return{min:E0e(t,e),max:E0e(t,n)}}function E0e(t,e){return typeof t=="number"?t:t[e]||0}const C0e=()=>({translate:0,scale:1,origin:0,originPoint:0}),x_=()=>({x:C0e(),y:C0e()}),P0e=()=>({min:0,max:0}),ao=()=>({x:P0e(),y:P0e()});function Nc(t){return[t("x"),t("y")]}function bSe({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function M7e({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function A7e(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function B8(t){return t===void 0||t===1}function m9({scale:t,scaleX:e,scaleY:n}){return!B8(t)||!B8(e)||!B8(n)}function fg(t){return m9(t)||_Se(t)||t.z||t.rotate||t.rotateX||t.rotateY}function _Se(t){return k0e(t.x)||k0e(t.y)}function k0e(t){return t&&t!=="0%"}function Y3(t,e,n){const r=t-n,o=e*r;return n+o}function T0e(t,e,n,r,o){return o!==void 0&&(t=Y3(t,o,r)),Y3(t,n,r)+e}function v9(t,e=0,n=1,r,o){t.min=T0e(t.min,e,n,r,o),t.max=T0e(t.max,e,n,r,o)}function wSe(t,{x:e,y:n}){v9(t.x,e.translate,e.scale,e.originPoint),v9(t.y,n.translate,n.scale,n.originPoint)}function I7e(t,e,n,r=!1){const o=n.length;if(!o)return;e.x=e.y=1;let u,h;for(let m=0;m<o;m++){u=n[m],h=u.projectionDelta;const _=u.instance;_&&_.style&&_.style.display==="contents"||(r&&u.options.layoutScroll&&u.scroll&&u!==u.root&&S_(t,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),h&&(e.x*=h.x.scale,e.y*=h.y.scale,wSe(t,h)),r&&fg(u.latestValues)&&S_(t,u.latestValues))}e.x=M0e(e.x),e.y=M0e(e.y)}function M0e(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Tf(t,e){t.min=t.min+e,t.max=t.max+e}function A0e(t,e,[n,r,o]){const u=e[o]!==void 0?e[o]:.5,h=yi(t.min,t.max,u);v9(t,e[n],e[r],h,e.scale)}const R7e=["x","scaleX","originX"],O7e=["y","scaleY","originY"];function S_(t,e){A0e(t.x,e,R7e),A0e(t.y,e,O7e)}function xSe(t,e){return bSe(A7e(t.getBoundingClientRect(),e))}function D7e(t,e,n){const r=xSe(t,n),{scroll:o}=e;return o&&(Tf(r.x,o.offset.x),Tf(r.y,o.offset.y)),r}const L7e=new WeakMap;class N7e{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ao(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=_=>{this.stopAnimation(),n&&this.snapToCursor(LL(_,"page").point)},u=(_,x)=>{const{drag:M,dragPropagation:R,onDragStart:N}=this.getProps();if(M&&!R&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Nxe(M),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Nc(Q=>{let j=this.getAxisMotionValue(Q).get()||0;if(Gc.test(j)){const{projection:z}=this.visualElement;if(z&&z.layout){const U=z.layout.layoutBox[Q];U&&(j=ja(U)*(parseFloat(j)/100))}}this.originPoint[Q]=j}),N&&_i.update(()=>N(_,x),!1,!0);const{animationState:H}=this.visualElement;H&&H.setActive("whileDrag",!0)},h=(_,x)=>{const{dragPropagation:M,dragDirectionLock:R,onDirectionLock:N,onDrag:H}=this.getProps();if(!M&&!this.openGlobalLock)return;const{offset:Q}=x;if(R&&this.currentDirection===null){this.currentDirection=F7e(Q),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",x.point,Q),this.updateAxis("y",x.point,Q),this.visualElement.render(),H&&H(_,x)},m=(_,x)=>this.stop(_,x);this.panSession=new gSe(e,{onSessionStart:o,onStart:u,onMove:h,onSessionEnd:m},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:o}=n;this.startAnimation(o);const{onDragEnd:u}=this.getProps();u&&_i.update(()=>u(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:o}=this.getProps();if(!r||!FD(e,o,this.currentDirection))return;const u=this.getAxisMotionValue(e);let h=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(h=S7e(h,this.constraints[e],this.elastic[e])),u.set(h)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),{layout:r}=this.visualElement.projection||{},o=this.constraints;e&&__(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=E7e(r.layoutBox,e):this.constraints=!1,this.elastic=T7e(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Nc(u=>{this.getAxisMotionValue(u)&&(this.constraints[u]=k7e(r.layoutBox[u],this.constraints[u]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!__(e))return!1;const r=e.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const u=D7e(r,o.root,this.visualElement.getTransformPagePoint());let h=C7e(o.layout.layoutBox,u);if(n){const m=n(M7e(h));this.hasMutatedConstraints=!!m,m&&(h=bSe(m))}return h}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:u,dragSnapToOrigin:h,onDragTransitionEnd:m}=this.getProps(),_=this.constraints||{},x=Nc(M=>{if(!FD(M,n,this.currentDirection))return;let R=_&&_[M]||{};h&&(R={min:0,max:0});const N=o?200:1e6,H=o?40:1e7,Q={type:"inertia",velocity:r?e[M]:0,bounceStiffness:N,bounceDamping:H,timeConstant:750,restDelta:1,restSpeed:10,...u,...R};return this.startAxisValueAnimation(M,Q)});return Promise.all(x).then(m)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Z$(e,r,0,n))}stopAnimation(){Nc(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Nc(n=>{const{drag:r}=this.getProps();if(!FD(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,u=this.getAxisMotionValue(n);if(o&&o.layout){const{min:h,max:m}=o.layout.layoutBox[n];u.set(e[n]-yi(h,m,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!__(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Nc(h=>{const m=this.getAxisMotionValue(h);if(m){const _=m.get();o[h]=P7e({min:_,max:_},this.constraints[h])}});const{transformTemplate:u}=this.visualElement.getProps();this.visualElement.current.style.transform=u?u({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Nc(h=>{if(!FD(h,e,null))return;const m=this.getAxisMotionValue(h),{min:_,max:x}=this.constraints[h];m.set(yi(_,x,o[h]))})}addListeners(){if(!this.visualElement.current)return;L7e.set(this.visualElement,this);const e=this.visualElement.current,n=Sh(e,"pointerdown",_=>{const{drag:x,dragListener:M=!0}=this.getProps();x&&M&&this.start(_)}),r=()=>{const{dragConstraints:_}=this.getProps();__(_)&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,u=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),r();const h=_h(window,"resize",()=>this.scalePositionWithinConstraints()),m=o.addEventListener("didUpdate",({delta:_,hasLayoutChanged:x})=>{this.isDragging&&x&&(Nc(M=>{const R=this.getAxisMotionValue(M);R&&(this.originPoint[M]+=_[M].translate,R.set(R.get()+_[M].translate))}),this.visualElement.render())});return()=>{h(),n(),u(),m&&m()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:u=!1,dragElastic:h=f9,dragMomentum:m=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:u,dragElastic:h,dragMomentum:m}}}function FD(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function F7e(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class B7e extends cm{constructor(e){super(e),this.removeGroupControls=Vi,this.removeListeners=Vi,this.controls=new N7e(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vi}unmount(){this.removeGroupControls(),this.removeListeners()}}const I0e=t=>(e,n)=>{t&&_i.update(()=>t(e,n))};class U7e extends cm{constructor(){super(...arguments),this.removePointerDownListener=Vi}onPointerDown(e){this.session=new gSe(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:I0e(e),onStart:I0e(n),onMove:r,onEnd:(u,h)=>{delete this.session,o&&_i.update(()=>o(u,h))}}}mount(){this.removePointerDownListener=Sh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function V7e(){const t=Qt.useContext(D$);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,o=Qt.useId();return Qt.useEffect(()=>r(o),[]),!e&&n?[!1,()=>n&&n(o)]:[!0]}const r3={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function R0e(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const gC={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Fn.test(t))t=parseFloat(t);else return t;const n=R0e(t,e.target.x),r=R0e(t,e.target.y);return`${n}% ${r}%`}},j7e={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,o=rm.parse(t);if(o.length>5)return r;const u=rm.createTransformer(t),h=typeof o[0]!="number"?1:0,m=n.x.scale*e.x,_=n.y.scale*e.y;o[0+h]/=m,o[1+h]/=_;const x=yi(m,_,.5);return typeof o[2+h]=="number"&&(o[2+h]/=x),typeof o[3+h]=="number"&&(o[3+h]/=x),u(o)}};class z7e extends gye.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:u}=e;qGe(H7e),u&&(n.group&&n.group.add(u),r&&r.register&&o&&r.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",()=>{this.safeToRemove()}),u.setOptions({...u.options,onExitComplete:()=>this.safeToRemove()})),r3.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:o,isPresent:u}=this.props,h=r.projection;return h&&(h.isPresent=u,o||e.layoutDependency!==n||n===void 0?h.willUpdate():this.safeToRemove(),e.isPresent!==u&&(u?h.promote():h.relegate()||_i.postRender(()=>{const m=h.getStack();(!m||!m.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=e;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function SSe(t){const[e,n]=V7e(),r=Qt.useContext(bxe);return gye.createElement(z7e,{...t,layoutGroup:r,switchLayoutGroup:Qt.useContext(_xe),isPresent:e,safeToRemove:n})}const H7e={borderRadius:{...gC,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:gC,borderTopRightRadius:gC,borderBottomLeftRadius:gC,borderBottomRightRadius:gC,boxShadow:j7e},ESe=["TopLeft","TopRight","BottomLeft","BottomRight"],G7e=ESe.length,O0e=t=>typeof t=="string"?parseFloat(t):t,D0e=t=>typeof t=="number"||Fn.test(t);function $7e(t,e,n,r,o,u){o?(t.opacity=yi(0,n.opacity!==void 0?n.opacity:1,W7e(r)),t.opacityExit=yi(e.opacity!==void 0?e.opacity:1,0,K7e(r))):u&&(t.opacity=yi(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let h=0;h<G7e;h++){const m=`border${ESe[h]}Radius`;let _=L0e(e,m),x=L0e(n,m);if(_===void 0&&x===void 0)continue;_||(_=0),x||(x=0),_===0||x===0||D0e(_)===D0e(x)?(t[m]=Math.max(yi(O0e(_),O0e(x),r),0),(Gc.test(x)||Gc.test(_))&&(t[m]+="%")):t[m]=x}(e.rotate||n.rotate)&&(t.rotate=yi(e.rotate||0,n.rotate||0,r))}function L0e(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const W7e=CSe(0,.5,W$),K7e=CSe(.5,.95,Vi);function CSe(t,e,n){return r=>r<t?0:r>e?1:n(yP(t,e,r))}function N0e(t,e){t.min=e.min,t.max=e.max}function Tl(t,e){N0e(t.x,e.x),N0e(t.y,e.y)}function F0e(t,e,n,r,o){return t-=e,t=Y3(t,1/n,r),o!==void 0&&(t=Y3(t,1/o,r)),t}function q7e(t,e=0,n=1,r=.5,o,u=t,h=t){if(Gc.test(e)&&(e=parseFloat(e),e=yi(h.min,h.max,e/100)-h.min),typeof e!="number")return;let m=yi(u.min,u.max,r);t===u&&(m-=e),t.min=F0e(t.min,e,n,m,o),t.max=F0e(t.max,e,n,m,o)}function B0e(t,e,[n,r,o],u,h){q7e(t,e[n],e[r],e[o],e.scale,u,h)}const X7e=["x","scaleX","originX"],Y7e=["y","scaleY","originY"];function U0e(t,e,n,r){B0e(t.x,e,X7e,n?n.x:void 0,r?r.x:void 0),B0e(t.y,e,Y7e,n?n.y:void 0,r?r.y:void 0)}function V0e(t){return t.translate===0&&t.scale===1}function PSe(t){return V0e(t.x)&&V0e(t.y)}function Z7e(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function kSe(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function j0e(t){return ja(t.x)/ja(t.y)}class Q7e{constructor(){this.members=[]}add(e){Q$(this.members,e),e.scheduleRender()}remove(e){if(J$(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(o=>e===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const u=this.members[o];if(u.isPresent!==!1){r=u;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:o}=e.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function z0e(t,e,n){let r="";const o=t.x.translate/e.x,u=t.y.translate/e.y;if((o||u)&&(r=`translate3d(${o}px, ${u}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:_,rotateX:x,rotateY:M}=n;_&&(r+=`rotate(${_}deg) `),x&&(r+=`rotateX(${x}deg) `),M&&(r+=`rotateY(${M}deg) `)}const h=t.x.scale*e.x,m=t.y.scale*e.y;return(h!==1||m!==1)&&(r+=`scale(${h}, ${m})`),r||"none"}const J7e=(t,e)=>t.depth-e.depth;class eKe{constructor(){this.children=[],this.isDirty=!1}add(e){Q$(this.children,e),this.isDirty=!0}remove(e){J$(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(J7e),this.isDirty=!1,this.children.forEach(e)}}function tKe(t,e){const n=performance.now(),r=({timestamp:o})=>{const u=o-n;u>=e&&(Xc(r),t(u-e))};return _i.read(r,!0),()=>Xc(r)}function nKe(t){window.MotionDebug&&window.MotionDebug.record(t)}function rKe(t){return t instanceof SVGElement&&t.tagName!=="svg"}function iKe(t,e,n){const r=Ws(t)?t:Hg(t);return r.start(Z$("",r,e,n)),r.animation}const H0e=["","X","Y","Z"],G0e=1e3;let oKe=0;const mg={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function TSe({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(h={},m=e==null?void 0:e()){this.id=oKe++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{mg.totalNodes=mg.resolvedTargetDeltas=mg.recalculatedProjection=0,this.nodes.forEach(lKe),this.nodes.forEach(pKe),this.nodes.forEach(fKe),this.nodes.forEach(uKe),nKe(mg)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=m?m.root||m:this,this.path=m?[...m.path,m]:[],this.parent=m,this.depth=m?m.depth+1:0;for(let _=0;_<this.path.length;_++)this.path[_].shouldResetTransform=!0;this.root===this&&(this.nodes=new eKe)}addEventListener(h,m){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new eW),this.eventHandlers.get(h).add(m)}notifyListeners(h,...m){const _=this.eventHandlers.get(h);_&&_.notify(...m)}hasListeners(h){return this.eventHandlers.has(h)}mount(h,m=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=rKe(h),this.instance=h;const{layoutId:_,layout:x,visualElement:M}=this.options;if(M&&!M.current&&M.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),m&&(x||_)&&(this.isLayoutDirty=!0),t){let R;const N=()=>this.root.updateBlockedByResize=!1;t(h,()=>{this.root.updateBlockedByResize=!0,R&&R(),R=tKe(N,250),r3.hasAnimatedSinceResize&&(r3.hasAnimatedSinceResize=!1,this.nodes.forEach(W0e))})}_&&this.root.registerSharedNode(_,this),this.options.animate!==!1&&M&&(_||x)&&this.addEventListener("didUpdate",({delta:R,hasLayoutChanged:N,hasRelativeTargetChanged:H,layout:Q})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||M.getDefaultTransition()||bKe,{onLayoutAnimationStart:z,onLayoutAnimationComplete:U}=M.getProps(),C=!this.targetLayout||!kSe(this.targetLayout,Q)||H,K=!N&&H;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||K||N&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(R,K);const te={...hSe(j,"layout"),onPlay:z,onComplete:U};(M.shouldReduceMotion||this.options.layoutRoot)&&(te.delay=0,te.type=!1),this.startAnimation(te)}else N||W0e(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=Q})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Xc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(mKe),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let M=0;M<this.path.length;M++){const R=this.path[M];R.shouldResetTransform=!0,R.updateScroll("snapshot"),R.options.layoutRoot&&R.willUpdate(!1)}const{layoutId:m,layout:_}=this.options;if(m===void 0&&!_)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($0e);return}this.isUpdating||this.nodes.forEach(dKe),this.isUpdating=!1,this.nodes.forEach(hKe),this.nodes.forEach(sKe),this.nodes.forEach(aKe),this.clearAllSnapshots();const m=performance.now();gs.delta=nm(0,1e3/60,m-gs.timestamp),gs.timestamp=m,gs.isProcessing=!0,T8.update.process(gs),T8.preRender.process(gs),T8.render.process(gs),gs.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(cKe),this.sharedNodes.forEach(vKe)}scheduleUpdateProjection(){_i.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){_i.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let _=0;_<this.path.length;_++)this.path[_].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ao(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:m}=this.options;m&&m.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let m=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(m=!1),m&&(this.scroll={animationId:this.root.animationId,phase:h,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!o)return;const h=this.isLayoutDirty||this.shouldResetTransform,m=this.projectionDelta&&!PSe(this.projectionDelta),_=this.getTransformTemplate(),x=_?_(this.latestValues,""):void 0,M=x!==this.prevTransformTemplateValue;h&&(m||fg(this.latestValues)||M)&&(o(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const m=this.measurePageBox();let _=this.removeElementScroll(m);return h&&(_=this.removeTransform(_)),_Ke(_),{animationId:this.root.animationId,measuredBox:m,layoutBox:_,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:h}=this.options;if(!h)return ao();const m=h.measureViewportBox(),{scroll:_}=this.root;return _&&(Tf(m.x,_.offset.x),Tf(m.y,_.offset.y)),m}removeElementScroll(h){const m=ao();Tl(m,h);for(let _=0;_<this.path.length;_++){const x=this.path[_],{scroll:M,options:R}=x;if(x!==this.root&&M&&R.layoutScroll){if(M.isRoot){Tl(m,h);const{scroll:N}=this.root;N&&(Tf(m.x,-N.offset.x),Tf(m.y,-N.offset.y))}Tf(m.x,M.offset.x),Tf(m.y,M.offset.y)}}return m}applyTransform(h,m=!1){const _=ao();Tl(_,h);for(let x=0;x<this.path.length;x++){const M=this.path[x];!m&&M.options.layoutScroll&&M.scroll&&M!==M.root&&S_(_,{x:-M.scroll.offset.x,y:-M.scroll.offset.y}),fg(M.latestValues)&&S_(_,M.latestValues)}return fg(this.latestValues)&&S_(_,this.latestValues),_}removeTransform(h){const m=ao();Tl(m,h);for(let _=0;_<this.path.length;_++){const x=this.path[_];if(!x.instance||!fg(x.latestValues))continue;m9(x.latestValues)&&x.updateSnapshot();const M=ao(),R=x.measurePageBox();Tl(M,R),U0e(m,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,M)}return fg(this.latestValues)&&U0e(m,this.latestValues),m}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gs.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var m;const _=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=_.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=_.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=_.isSharedProjectionDirty);const x=!!this.resumingFrom||this!==_;if(!(h||x&&this.isSharedProjectionDirty||this.isProjectionDirty||!((m=this.parent)===null||m===void 0)&&m.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:R,layoutId:N}=this.options;if(!(!this.layout||!(R||N))){if(this.resolvedRelativeTargetAt=gs.timestamp,!this.targetDelta&&!this.relativeTarget){const H=this.getClosestProjectingParent();H&&H.layout&&this.animationProgress!==1?(this.relativeParent=H,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ao(),this.relativeTargetOrigin=ao(),VC(this.relativeTargetOrigin,this.layout.layoutBox,H.layout.layoutBox),Tl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ao(),this.targetWithTransforms=ao()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),x7e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Tl(this.target,this.layout.layoutBox),wSe(this.target,this.targetDelta)):Tl(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const H=this.getClosestProjectingParent();H&&!!H.resumingFrom==!!this.resumingFrom&&!H.options.layoutScroll&&H.target&&this.animationProgress!==1?(this.relativeParent=H,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ao(),this.relativeTargetOrigin=ao(),VC(this.relativeTargetOrigin,this.target,H.target),Tl(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}mg.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||m9(this.parent.latestValues)||_Se(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var h;const m=this.getLead(),_=!!this.resumingFrom||this!==m;let x=!0;if((this.isProjectionDirty||!((h=this.parent)===null||h===void 0)&&h.isProjectionDirty)&&(x=!1),_&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(x=!1),this.resolvedRelativeTargetAt===gs.timestamp&&(x=!1),x)return;const{layout:M,layoutId:R}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(M||R))return;Tl(this.layoutCorrected,this.layout.layoutBox);const N=this.treeScale.x,H=this.treeScale.y;I7e(this.layoutCorrected,this.treeScale,this.path,_),m.layout&&!m.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(m.target=m.layout.layoutBox);const{target:Q}=m;if(!Q){this.projectionTransform&&(this.projectionDelta=x_(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=x_(),this.projectionDeltaWithTransform=x_());const j=this.projectionTransform;UC(this.projectionDelta,this.layoutCorrected,Q,this.latestValues),this.projectionTransform=z0e(this.projectionDelta,this.treeScale),(this.projectionTransform!==j||this.treeScale.x!==N||this.treeScale.y!==H)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",Q)),mg.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),h){const m=this.getStack();m&&m.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(h,m=!1){const _=this.snapshot,x=_?_.latestValues:{},M={...this.latestValues},R=x_();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!m;const N=ao(),H=_?_.source:void 0,Q=this.layout?this.layout.source:void 0,j=H!==Q,z=this.getStack(),U=!z||z.members.length<=1,C=!!(j&&!U&&this.options.crossfade===!0&&!this.path.some(yKe));this.animationProgress=0;let K;this.mixTargetDelta=te=>{const pe=te/1e3;K0e(R.x,h.x,pe),K0e(R.y,h.y,pe),this.setTargetDelta(R),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(VC(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),gKe(this.relativeTarget,this.relativeTargetOrigin,N,pe),K&&Z7e(this.relativeTarget,K)&&(this.isProjectionDirty=!1),K||(K=ao()),Tl(K,this.relativeTarget)),j&&(this.animationValues=M,$7e(M,x,this.latestValues,pe,C,U)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=pe},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Xc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_i.update(()=>{r3.hasAnimatedSinceResize=!0,this.currentAnimation=iKe(0,G0e,{...h,onUpdate:m=>{this.mixTargetDelta(m),h.onUpdate&&h.onUpdate(m)},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(G0e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:m,target:_,layout:x,latestValues:M}=h;if(!(!m||!_||!x)){if(this!==h&&this.layout&&x&&MSe(this.options.animationType,this.layout.layoutBox,x.layoutBox)){_=this.target||ao();const R=ja(this.layout.layoutBox.x);_.x.min=h.target.x.min,_.x.max=_.x.min+R;const N=ja(this.layout.layoutBox.y);_.y.min=h.target.y.min,_.y.max=_.y.min+N}Tl(m,_),S_(m,M),UC(this.projectionDeltaWithTransform,this.layoutCorrected,m,M)}}registerSharedNode(h,m){this.sharedNodes.has(h)||this.sharedNodes.set(h,new Q7e),this.sharedNodes.get(h).add(m);const x=m.options.initialPromotionConfig;m.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(m):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var h;const{layoutId:m}=this.options;return m?((h=this.getStack())===null||h===void 0?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:m}=this.options;return m?(h=this.getStack())===null||h===void 0?void 0:h.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:m,preserveFollowOpacity:_}={}){const x=this.getStack();x&&x.promote(this,_),h&&(this.projectionDelta=void 0,this.needsReset=!0),m&&this.setOptions({transition:m})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetRotation(){const{visualElement:h}=this.options;if(!h)return;let m=!1;const{latestValues:_}=h;if((_.rotate||_.rotateX||_.rotateY||_.rotateZ)&&(m=!0),!m)return;const x={};for(let M=0;M<H0e.length;M++){const R="rotate"+H0e[M];_[R]&&(x[R]=_[R],h.setStaticValue(R,0))}h.render();for(const M in x)h.setStaticValue(M,x[M]);h.scheduleRender()}getProjectionStyles(h={}){var m,_;const x={};if(!this.instance||this.isSVG)return x;if(this.isVisible)x.visibility="";else return{visibility:"hidden"};const M=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,x.opacity="",x.pointerEvents=n3(h.pointerEvents)||"",x.transform=M?M(this.latestValues,""):"none",x;const R=this.getLead();if(!this.projectionDelta||!this.layout||!R.target){const j={};return this.options.layoutId&&(j.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,j.pointerEvents=n3(h.pointerEvents)||""),this.hasProjected&&!fg(this.latestValues)&&(j.transform=M?M({},""):"none",this.hasProjected=!1),j}const N=R.animationValues||R.latestValues;this.applyTransformsToTarget(),x.transform=z0e(this.projectionDeltaWithTransform,this.treeScale,N),M&&(x.transform=M(N,x.transform));const{x:H,y:Q}=this.projectionDelta;x.transformOrigin=`${H.origin*100}% ${Q.origin*100}% 0`,R.animationValues?x.opacity=R===this?(_=(m=N.opacity)!==null&&m!==void 0?m:this.latestValues.opacity)!==null&&_!==void 0?_:1:this.preserveOpacity?this.latestValues.opacity:N.opacityExit:x.opacity=R===this?N.opacity!==void 0?N.opacity:"":N.opacityExit!==void 0?N.opacityExit:0;for(const j in H3){if(N[j]===void 0)continue;const{correct:z,applyTo:U}=H3[j],C=x.transform==="none"?N[j]:z(N[j],R);if(U){const K=U.length;for(let te=0;te<K;te++)x[U[te]]=C}else x[j]=C}return this.options.layoutId&&(x.pointerEvents=R===this?n3(h.pointerEvents)||"":"none"),x}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var m;return(m=h.currentAnimation)===null||m===void 0?void 0:m.stop()}),this.root.nodes.forEach($0e),this.root.sharedNodes.clear()}}}function sKe(t){t.updateLayout()}function aKe(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=t.layout,{animationType:u}=t.options,h=n.source!==t.layout.source;u==="size"?Nc(R=>{const N=h?n.measuredBox[R]:n.layoutBox[R],H=ja(N);N.min=r[R].min,N.max=N.min+H}):MSe(u,n.layoutBox,r)&&Nc(R=>{const N=h?n.measuredBox[R]:n.layoutBox[R],H=ja(r[R]);N.max=N.min+H,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[R].max=t.relativeTarget[R].min+H)});const m=x_();UC(m,r,n.layoutBox);const _=x_();h?UC(_,t.applyTransform(o,!0),n.measuredBox):UC(_,r,n.layoutBox);const x=!PSe(m);let M=!1;if(!t.resumeFrom){const R=t.getClosestProjectingParent();if(R&&!R.resumeFrom){const{snapshot:N,layout:H}=R;if(N&&H){const Q=ao();VC(Q,n.layoutBox,N.layoutBox);const j=ao();VC(j,r,H.layoutBox),kSe(Q,j)||(M=!0),R.options.layoutRoot&&(t.relativeTarget=j,t.relativeTargetOrigin=Q,t.relativeParent=R)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:_,layoutDelta:m,hasLayoutChanged:x,hasRelativeTargetChanged:M})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function lKe(t){mg.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function uKe(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function cKe(t){t.clearSnapshot()}function $0e(t){t.clearMeasurements()}function dKe(t){t.isLayoutDirty=!1}function hKe(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function W0e(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function pKe(t){t.resolveTargetDelta()}function fKe(t){t.calcProjection()}function mKe(t){t.resetRotation()}function vKe(t){t.removeLeadSnapshot()}function K0e(t,e,n){t.translate=yi(e.translate,0,n),t.scale=yi(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function q0e(t,e,n,r){t.min=yi(e.min,n.min,r),t.max=yi(e.max,n.max,r)}function gKe(t,e,n,r){q0e(t.x,e.x,n.x,r),q0e(t.y,e.y,n.y,r)}function yKe(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const bKe={duration:.45,ease:[.4,0,.1,1]},X0e=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),Y0e=X0e("applewebkit/")&&!X0e("chrome/")?Math.round:Vi;function Z0e(t){t.min=Y0e(t.min),t.max=Y0e(t.max)}function _Ke(t){Z0e(t.x),Z0e(t.y)}function MSe(t,e,n){return t==="position"||t==="preserve-aspect"&&!p9(j0e(e),j0e(n),.2)}const wKe=TSe({attachResizeListener:(t,e)=>_h(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),U8={current:void 0},ASe=TSe({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!U8.current){const t=new wKe({});t.mount(window),t.setOptions({layoutScroll:!0}),U8.current=t}return U8.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),xKe={pan:{Feature:U7e},drag:{Feature:B7e,ProjectionNode:ASe,MeasureLayout:SSe}},SKe=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function EKe(t){const e=SKe.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function g9(t,e,n=1){const[r,o]=EKe(t);if(!r)return;const u=window.getComputedStyle(e).getPropertyValue(r);if(u){const h=u.trim();return pSe(h)?parseFloat(h):h}else return s9(o)?g9(o,e,n+1):o}function CKe(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(o=>{const u=o.get();if(!s9(u))return;const h=g9(u,r);h&&o.set(h)});for(const o in e){const u=e[o];if(!s9(u))continue;const h=g9(u,r);h&&(e[o]=h,n||(n={}),n[o]===void 0&&(n[o]=u))}return{target:e,transitionEnd:n}}const PKe=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),ISe=t=>PKe.has(t),kKe=t=>Object.keys(t).some(ISe),Q0e=t=>t===Jg||t===Fn,J0e=(t,e)=>parseFloat(t.split(", ")[e]),eye=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/);if(o)return J0e(o[1],e);{const u=r.match(/^matrix\((.+)\)$/);return u?J0e(u[1],t):0}},TKe=new Set(["x","y","z"]),MKe=HP.filter(t=>!TKe.has(t));function AKe(t){const e=[];return MKe.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Y_={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:eye(4,13),y:eye(5,14)};Y_.translateX=Y_.x;Y_.translateY=Y_.y;const IKe=(t,e,n)=>{const r=e.measureViewportBox(),o=e.current,u=getComputedStyle(o),{display:h}=u,m={};h==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(x=>{m[x]=Y_[x](r,u)}),e.render();const _=e.measureViewportBox();return n.forEach(x=>{const M=e.getValue(x);M&&M.jump(m[x]),t[x]=Y_[x](_,u)}),t},RKe=(t,e,n={},r={})=>{e={...e},r={...r};const o=Object.keys(e).filter(ISe);let u=[],h=!1;const m=[];if(o.forEach(_=>{const x=t.getValue(_);if(!t.hasValue(_))return;let M=n[_],R=vC(M);const N=e[_];let H;if($3(N)){const Q=N.length,j=N[0]===null?1:0;M=N[j],R=vC(M);for(let z=j;z<Q&&N[z]!==null;z++)H?$$(vC(N[z])===H):H=vC(N[z])}else H=vC(N);if(R!==H)if(Q0e(R)&&Q0e(H)){const Q=x.get();typeof Q=="string"&&x.set(parseFloat(Q)),typeof N=="string"?e[_]=parseFloat(N):Array.isArray(N)&&H===Fn&&(e[_]=N.map(parseFloat))}else R!=null&&R.transform&&(H!=null&&H.transform)&&(M===0||N===0)?M===0?x.set(H.transform(M)):e[_]=R.transform(N):(h||(u=AKe(t),h=!0),m.push(_),r[_]=r[_]!==void 0?r[_]:e[_],x.jump(N))}),m.length){const _=m.indexOf("height")>=0?window.pageYOffset:null,x=IKe(e,t,m);return u.length&&u.forEach(([M,R])=>{t.getValue(M).set(R)}),t.render(),IL&&_!==null&&window.scrollTo({top:_}),{target:x,transitionEnd:r}}else return{target:e,transitionEnd:r}};function OKe(t,e,n,r){return kKe(e)?RKe(t,e,n,r):{target:e,transitionEnd:r}}const DKe=(t,e,n,r)=>{const o=CKe(t,e,r);return e=o.target,r=o.transitionEnd,OKe(t,e,n,r)},y9={current:null},RSe={current:!1};function LKe(){if(RSe.current=!0,!!IL)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>y9.current=t.matches;t.addListener(e),e()}else y9.current=!1}function NKe(t,e,n){const{willChange:r}=e;for(const o in e){const u=e[o],h=n[o];if(Ws(u))t.addValue(o,u),X3(r)&&r.add(o);else if(Ws(h))t.addValue(o,Hg(u,{owner:t})),X3(r)&&r.remove(o);else if(h!==u)if(t.hasValue(o)){const m=t.getValue(o);!m.hasAnimated&&m.set(u)}else{const m=t.getStaticValue(o);t.addValue(o,Hg(m!==void 0?m:u,{owner:t}))}}for(const o in n)e[o]===void 0&&t.removeValue(o);return e}const tye=new WeakMap,OSe=Object.keys(gP),FKe=OSe.length,nye=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],BKe=N$.length;class UKe{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:o,visualState:u},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>_i.render(this.render,!1,!0);const{latestValues:m,renderState:_}=u;this.latestValues=m,this.baseTarget={...m},this.initialValues=n.initial?{...m}:{},this.renderState=_,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=o,this.options=h,this.isControllingVariants=OL(n),this.isVariantNode=yxe(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:x,...M}=this.scrapeMotionValuesFromProps(n,{});for(const R in M){const N=M[R];m[R]!==void 0&&Ws(N)&&(N.set(m[R],!1),X3(x)&&x.add(R))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,tye.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),RSe.current||LKe(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:y9.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){tye.delete(this.current),this.projection&&this.projection.unmount(),Xc(this.notifyUpdate),Xc(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Qg.has(e),o=n.on("change",h=>{this.latestValues[e]=h,this.props.onUpdate&&_i.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),u=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{o(),u()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,o,u){let h,m;for(let _=0;_<FKe;_++){const x=OSe[_],{isEnabled:M,Feature:R,ProjectionNode:N,MeasureLayout:H}=gP[x];N&&(h=N),M(n)&&(!this.features[x]&&R&&(this.features[x]=new R(this)),H&&(m=H))}if(!this.projection&&h){this.projection=new h(this.latestValues,this.parent&&this.parent.projection);const{layoutId:_,layout:x,drag:M,dragConstraints:R,layoutScroll:N,layoutRoot:H}=n;this.projection.setOptions({layoutId:_,layout:x,alwaysMeasureLayout:!!M||R&&__(R),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof x=="string"?x:"both",initialPromotionConfig:u,layoutScroll:N,layoutRoot:H})}return m}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ao()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<nye.length;r++){const o=nye[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const u=e["on"+o];u&&(this.propEventSubscriptions[o]=this.on(o,u))}this.prevMotionValues=NKe(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<BKe;r++){const o=N$[r],u=this.props[o];(vP(u)||u===!1)&&(n[o]=u)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Hg(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,o=typeof r=="string"||typeof r=="object"?(n=G$(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&o!==void 0)return o;const u=this.getBaseTargetFromProps(this.props,e);return u!==void 0&&!Ws(u)?u:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new eW),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class DSe extends UKe{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:o},u){let h=i7e(r,e||{},this);if(o&&(n&&(n=o(n)),r&&(r=o(r)),h&&(h=o(h))),u){n7e(this,r,h);const m=DKe(this,r,h,n);n=m.transitionEnd,r=m.target}return{transition:e,transitionEnd:n,...r}}}function VKe(t){return window.getComputedStyle(t)}class jKe extends DSe{readValueFromInstance(e,n){if(Qg.has(n)){const r=Y$(n);return r&&r.default||0}else{const r=VKe(e),o=(Sxe(n)?r.getPropertyValue(n):r[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return xSe(e,n)}build(e,n,r,o){B$(e,n,r,o.transformTemplate)}scrapeMotionValuesFromProps(e,n){return H$(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ws(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,o){Mxe(e,n,r,o)}}class zKe extends DSe{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Qg.has(n)){const r=Y$(n);return r&&r.default||0}return n=Axe.has(n)?n:z$(n),e.getAttribute(n)}measureInstanceViewportBox(){return ao()}scrapeMotionValuesFromProps(e,n){return Rxe(e,n)}build(e,n,r,o){V$(e,n,r,this.isSVGTag,o.transformTemplate)}renderInstance(e,n,r,o){Ixe(e,n,r,o)}mount(e){this.isSVGTag=j$(e.tagName),super.mount(e)}}const HKe=(t,e)=>F$(t)?new zKe(e,{enableHardwareAcceleration:!1}):new jKe(e,{enableHardwareAcceleration:!0}),GKe={layout:{ProjectionNode:ASe,MeasureLayout:SSe}},$Ke={...y7e,...F$e,...xKe,...GKe},LSe=WGe((t,e)=>w$e(t,e,$Ke,HKe)),NSe=Qt.createContext(null);function WKe(t,e,n,r){if(!r)return t;const o=t.findIndex(M=>M.value===e);if(o===-1)return t;const u=r>0?1:-1,h=t[o+u];if(!h)return t;const m=t[o],_=h.layout,x=yi(_.min,_.max,.5);return u===1&&m.layout.max+n>x||u===-1&&m.layout.min+n<x?qWe(t,o,o+u):t}function KKe({children:t,as:e="ul",axis:n="y",onReorder:r,values:o,...u},h){const m=WP(()=>LSe(e)),_=[],x=Qt.useRef(!1),M={axis:n,registerItem:(R,N)=>{N&&_.findIndex(H=>R===H.value)===-1&&(_.push({value:R,layout:N[n]}),_.sort(YKe))},updateOrder:(R,N,H)=>{if(x.current)return;const Q=WKe(_,R,N,H);_!==Q&&(x.current=!0,r(Q.map(XKe).filter(j=>o.indexOf(j)!==-1)))}};return Qt.useEffect(()=>{x.current=!1}),Qt.createElement(m,{...u,ref:h,ignoreStrict:!0},Qt.createElement(NSe.Provider,{value:M},t))}const qKe=Qt.forwardRef(KKe);function XKe(t){return t.value}function YKe(t,e){return t.layout.min-e.layout.min}function FSe(t){const e=WP(()=>Hg(t)),{isStatic:n}=Qt.useContext(O$);if(n){const[,r]=Qt.useState(t);Qt.useEffect(()=>e.on("change",r),[])}return e}const ZKe=t=>typeof t=="object"&&t.mix,QKe=t=>ZKe(t)?t.mix:void 0;function JKe(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],o=t[1+n],u=t[2+n],h=t[3+n],m=X$(o,u,{mixer:QKe(u[0]),...h});return e?m(r):m}function BSe(t,e){const n=FSe(e()),r=()=>n.set(e());return r(),o9(()=>{const o=()=>_i.update(r,!1,!0),u=t.map(h=>h.on("change",o));return()=>{u.forEach(h=>h()),Xc(r)}}),n}function eqe(t){BC.current=[],t();const e=BSe(BC.current,t);return BC.current=void 0,e}function tqe(t,e,n,r){if(typeof t=="function")return eqe(t);const o=typeof e=="function"?e:JKe(e,n,r);return Array.isArray(t)?rye(t,o):rye([t],([u])=>o(u))}function rye(t,e){const n=WP(()=>[]);return BSe(t,()=>{n.length=0;const r=t.length;for(let o=0;o<r;o++)n[o]=t[o].get();return e(n)})}function iye(t,e=0){return Ws(t)?t:FSe(e)}function nqe({children:t,style:e={},value:n,as:r="li",onDrag:o,layout:u=!0,...h},m){const _=WP(()=>LSe(r)),x=Qt.useContext(NSe),M={x:iye(e.x),y:iye(e.y)},R=tqe([M.x,M.y],([z,U])=>z||U?1:"unset"),N=Qt.useRef(null),{axis:H,registerItem:Q,updateOrder:j}=x;return Qt.useEffect(()=>{Q(n,N.current)},[x]),Qt.createElement(_,{drag:H,...h,dragSnapToOrigin:!0,style:{...e,x:M.x,y:M.y,zIndex:R},layout:u,onDrag:(z,U)=>{const{velocity:C}=U;C[H]&&j(n,M[H].get(),C[H]),o&&o(z,U)},onLayoutMeasure:z=>{N.current=z},ref:m,ignoreStrict:!0},t)}const rqe=Qt.forwardRef(nqe),USe={Group:qKe,Item:rqe},iqe=Nt.jsxs("svg",{className:"closeIcon",width:"14",height:"14",fill:"none",stroke:"#666666",strokeMiterlimit:"10",children:[Nt.jsx("circle",{cx:"7",cy:"7",r:"6"}),Nt.jsx("line",{x1:"4",y1:"4",x2:"10",y2:"10"}),Nt.jsx("line",{x1:"4",y1:"10",x2:"10",y2:"4"})]}),oqe=Nt.jsx("svg",{className:"dragIcon",width:"14",height:"14",fill:"#666666",stroke:"none",children:Nt.jsx("path",{d:`M10.43,4H3.57C3.26,4,3,4.22,3,4.5v1C3,5.78,3.26,6,3.57,6h6.86C10.74,6,11,5.78,11,5.5v-1
C11,4.22,10.74,4,10.43,4z M10.43,8H3.57C3.26,8,3,8.22,3,8.5v1C3,9.78,3.26,10,3.57,10h6.86C10.74,10,11,9.78,11,9.5v-1
C11,8.22,10.74,8,10.43,8z`})});function sqe(t){return Nt.jsx(USe.Item,{value:t.title,children:Nt.jsxs("div",{children:[oqe,Nt.jsx("span",{children:t.title}),Nt.jsx("button",{className:"closeIcon",onClick:()=>{t.onDelete(t.index)},children:iqe})]})},t.title)}function aqe(t){const[e,n]=Qt.useState(!1),[r,o]=Qt.useState(t.options),u=x=>{t.onDragComplete(x),o(x)},h=x=>{const M=[...r];M.splice(x,1),u(M)},m=[];r.forEach((x,M)=>{m.push(Nt.jsx(sqe,{index:M,title:x,onDelete:h},x))});let _="dropdown draggable";return t.subdropdown&&(_+=" subdropdown"),Nt.jsxs("div",{className:_,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[Nt.jsx(vxe,{title:t.title}),Nt.jsx(USe.Group,{axis:"y",values:r,onReorder:u,style:{visibility:e?"visible":"hidden"},children:m})]})}function lqe(t){const{option:e}=t,[n,r]=Qt.useState("");let o=null;switch(e.type){case"draggable":o=Nt.jsx(aqe,{title:e.title,options:e.value,onDragComplete:u=>{e.onDragComplete!==void 0&&e.onDragComplete(u)},subdropdown:!0});break;case"dropdown":o=Nt.jsx(VSe,{title:e.title,options:e.value,onSelect:e.onSelect,subdropdown:!0});break;case"option":o=Nt.jsx("button",{onClick:()=>{e.onSelect!==void 0&&e.onSelect(e.value),e.selectable&&(n!==e.title?r(e.title):r(""))},children:e.title});break}return Nt.jsx("li",{className:n===e.title?"selected":"",children:o},q3e())}function VSe(t){const[e,n]=Qt.useState(!1),r=[];t.options.map((u,h)=>{t.onSelect!==void 0&&(u.onSelect=t.onSelect),r.push(Nt.jsx(lqe,{option:u},h))});let o="dropdown";return t.subdropdown&&(o+=" subdropdown"),Nt.jsxs("div",{className:o,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[Nt.jsx(vxe,{title:t.title}),Nt.jsx("ul",{style:{visibility:e?"visible":"hidden"},children:r})]})}function oye(t){const[e,n]=Qt.useState(t.open!==void 0?t.open:!0);return Nt.jsxs("div",{className:"accordion",children:[Nt.jsxs("button",{className:"toggle",onClick:()=>{const r=!e;t.onToggle!==void 0&&t.onToggle(r),n(r)},children:[Nt.jsx("p",{className:`status ${e?"open":""}`,children:"Toggle"}),Nt.jsx("p",{className:"label",children:t.label})]}),t.button,Nt.jsx("div",{className:e?"open":"",children:t.children})]})}function jSe(t){const[e,n]=Qt.useState(!0),r=t.child.children.length>0,o=[];return t.child.children.length>0&&t.child.children.map(u=>{o.push(Nt.jsx(jSe,{child:u},Math.random()))}),Nt.jsxs("div",{className:"childObject",children:[Nt.jsxs("div",{className:"child",children:[r?Nt.jsx("button",{className:"status",style:{backgroundPositionX:e?"-14px":"2px"},onClick:()=>{n(!e)}}):null,Nt.jsx("button",{className:"name",style:{left:r?"20px":"5px"},onClick:()=>{Bi.three.getObject(t.child.uuid)},children:t.child.name.length>0?`${t.child.name} (${t.child.type})`:`${t.child.type}::${t.child.uuid}`}),Nt.jsx("div",{className:`icon ${dVe(t.child)}`})]}),Nt.jsx("div",{className:e?"open":"",children:Nt.jsx("div",{className:"container",children:o})})]},Math.random())}function uqe(t){const e=[];return t.child.children.map(n=>{e.push(Nt.jsx(jSe,{child:n},Math.random()))}),Nt.jsx("div",{className:`scene ${t.class!==void 0?t.class:""}`,children:e})}function EC(t){let e=t.value;t.value.isColor!==void 0&&(e=Y3e(t.value));const[n,r]=Qt.useState(e),o=Qt.useRef(null),u=Qt.useRef(null),h=m=>{let _=m.target.value;t.type==="boolean"&&(_=m.target.checked),r(_),t.onChange!==void 0&&t.onChange(t.prop,_)};return Qt.useEffect(()=>{var Q;let m=!1,_=-1,x=0;const M=j=>{m=!0,x=Number(n),_=j.clientX},R=j=>{if(!m)return;const z=t.step!==void 0?t.step:1,U=(j.clientX-_)*z,C=x+U;u.current!==null&&(u.current.value=C.toString()),t.onChange!==void 0&&t.onChange(t.prop,C)},N=()=>{m=!1},H=t.type==="number";return H&&((Q=o.current)==null||Q.addEventListener("mousedown",M,!1),document.addEventListener("mouseup",N,!1),document.addEventListener("mousemove",R,!1)),()=>{var j;H&&((j=o.current)==null||j.removeEventListener("mousedown",M),document.removeEventListener("mouseup",N),document.removeEventListener("mousemove",R))}},[n]),Nt.jsxs("div",{className:"field",children:[Nt.jsx("label",{ref:o,children:t.label},"fieldLabel"),t.type==="string"&&Nt.jsx("input",{type:"text",disabled:t.disabled,onChange:h,value:n}),t.type==="boolean"&&Nt.jsx("input",{type:"checkbox",disabled:t.disabled,onChange:h,checked:n}),t.type==="number"&&Nt.jsx("input",{ref:u,type:"number",value:n,min:t.min,max:t.max,step:t.step,onChange:h}),t.type==="range"&&Nt.jsxs(Nt.Fragment,{children:[Nt.jsx("input",{type:"text",value:n.toString(),onChange:h,className:"min"}),Nt.jsx("input",{disabled:t.disabled,type:"range",value:n,min:t.min,max:t.max,step:t.step,onChange:h})]}),t.type==="color"&&Nt.jsxs(Nt.Fragment,{children:[Nt.jsx("input",{type:"text",value:n.toString(),onChange:h,className:"color"}),Nt.jsx("input",{type:"color",value:n,onChange:h})]})]})}function b9(t){const[e,n]=Qt.useState(t.expanded!==void 0?t.expanded:!1);function r(u,h){console.log("onChange:",u,h)}const o=[];return t.items.forEach(u=>{o.push(Nt.jsx(EC,{label:u.label,prop:u.prop,value:u.value,type:u.type,min:u.min,max:u.max,step:u.step,disabled:u.disabled,onChange:(h,m)=>{u.onChange!==void 0?u.onChange(h,m):r(h,m)}},Math.random()))}),Nt.jsxs("div",{className:"group",children:[Nt.jsx("button",{className:"toggleBtn",onClick:()=>{n(!e)},style:{backgroundPositionY:`${e?0:-30}px`},children:Nt.jsx("h4",{children:t.title})}),Nt.jsx("div",{className:`fieldItems ${e?"":"hidden"}`,children:o})]},Math.random())}function sye(t){const e=[];for(const n in t){const r=typeof t[n],o=t[n];r==="boolean"||r==="number"||r==="string"?e.push({label:n,type:r,value:o}):r==="object"?o.isColor&&e.push({label:n,type:"color",value:o}):o!==void 0&&console.log("other:",n,r,o)}return e}function cqe(t){if(Array.isArray(t)){const e=[],n=t.length;for(let r=0;r<n;r++)e.push(Nt.jsx(b9,{title:`Material ${r}`,items:sye(t[r])}));return Nt.jsx(Nt.Fragment,{children:e})}else return Nt.jsx(b9,{title:"Material",items:sye(t)})}function dqe(t,e){const n=new uo;n.elements=t.matrix;const r=new dt,o=new kP,u=new dt;t.uuid.length>0&&(r.setFromMatrixPosition(n),o.setFromRotationMatrix(n),u.setFromMatrixScale(n));const h=(m,_)=>{e.updateObject(t.uuid,m,_)};return Nt.jsx(b9,{title:"Transform",items:[{label:"Position X",prop:"position.x",type:"number",value:r.x,onChange:h},{label:"Position Y",prop:"position.y",type:"number",value:r.y,onChange:h},{label:"Position Z",prop:"position.z",type:"number",value:r.z,onChange:h},{label:"Rotation X",prop:"rotation.x",type:"number",value:o.x,min:-Math.PI,max:Math.PI,step:.01,onChange:h},{label:"Rotation Y",prop:"rotation.y",type:"number",value:o.y,min:-Math.PI,max:Math.PI,step:.01,onChange:h},{label:"Rotation Z",prop:"rotation.z",type:"number",value:o.z,min:-Math.PI,max:Math.PI,step:.01,onChange:h},{label:"Scale X",prop:"scale.x",type:"number",value:u.x,step:.01,onChange:h},{label:"Scale Y",prop:"scale.y",type:"number",value:u.y,step:.01,onChange:h},{label:"Scale Z",prop:"scale.z",type:"number",value:u.z,step:.01,onChange:h}]})}function hqe(t){const[e,n]=Qt.useState(-1),[r,o]=Qt.useState({name:"",uuid:"",type:"",visible:!1,matrix:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]});Qt.useEffect(()=>{function h(m){const _=m.value;console.log(_),o(_),n(Date.now())}return Ti.addEventListener(Mi.SET_OBJECT,h),()=>{Ti.removeEventListener(Mi.SET_OBJECT,h)}},[]);const u=r.type==="OrthographicCamera"||r.type==="PerspectiveCamera";return Nt.jsx("div",{id:"Inspector",className:t.class,children:r.uuid.length>0&&Nt.jsxs(Nt.Fragment,{children:[Nt.jsx(EC,{type:"string",label:"Name",prop:"name",value:r.name,disabled:!0}),Nt.jsx(EC,{type:"string",label:"Type",prop:"type",value:r.type,disabled:!0}),Nt.jsx(EC,{type:"string",label:"UUID",prop:"uuid",value:r.uuid,disabled:!0}),Nt.jsx(EC,{type:"boolean",label:"Visible",prop:"visible",value:r.visible,onChange:(h,m)=>{Bi.three.updateObject(r.uuid,h,m)}}),dqe(r,Bi.three),r.material!==void 0?cqe(r.material):null,null]})},e)}class pqe extends Qt.Component{constructor(n){super(n);Fi(this,"onRefresh",()=>{Bi.three.getScene()});Fi(this,"setScene",n=>{this.setState(()=>({scene:n.value}))});this.state={scene:null},Ti.addEventListener(Mi.SET_SCENE,this.setScene)}componentDidMount(){this.onRefresh()}componentWillUnmount(){Ti.removeEventListener(Mi.SET_SCENE,this.setScene)}render(){var o;const n=this.componentState.scene!==null,r="Hierarchy"+(n?`: ${(o=this.componentState.scene)==null?void 0:o.name}`:"");return Nt.jsx("div",{id:"SceneHierarchy",children:Nt.jsxs(Nt.Fragment,{children:[Nt.jsx(oye,{label:r,button:Nt.jsx("button",{className:"icon refresh hideText",onClick:this.onRefresh,children:"Refresh"}),open:!0,children:Nt.jsx(Nt.Fragment,{children:n&&Nt.jsx(uqe,{child:this.componentState.scene})})}),Nt.jsx(oye,{label:"Inspector",children:Nt.jsx(hqe,{},"Inspector")})]})},"SceneHierarchy")}get componentState(){return this.state}}function fqe(){return Nt.jsx(FGe,{header:[Nt.jsx(VSe,{title:"Scenes",options:[{type:"option",title:"Scene 1",value:"scene1"},{type:"option",title:"Scene 2",value:"scene2"}],onSelect:t=>{Bi.send({target:"app",event:"selectComponent",data:{dropdown:"Scenes",value:t}})}},"Scenes")],children:Nt.jsx(pqe,{},"SceneHierarchy")})}function mqe(t){let e;const n=t.editor?"editor":"app";function r(m){var x,M,R,N,H,Q,j,z,U;let _;switch(m.event){case"custom":Ti.dispatchEvent({type:Mi.CUSTOM,value:m.data});break;case"selectComponent":Ti.dispatchEvent({type:Mi.SELECT_DROPDOWN,value:m.data});break;case"draggableListUpdate":Ti.dispatchEvent({type:Mi.DRAG_UPDATE,value:m.data});break;case"addFolder":(x=t.components.get("debug"))==null||x.addFolder(m.data.name,m.data.params,m.data.parent);break;case"bindObject":(M=t.components.get("debug"))==null||M.bind(m.data.name,m.data.params,m.data.parent);break;case"updateBind":(R=t.components.get("debug"))==null||R.triggerBind(m.data.id,m.data.value);break;case"addButton":(N=t.components.get("debug"))==null||N.button(m.data.name,m.data.callback,m.data.parent);break;case"clickButton":(H=t.components.get("debug"))==null||H.triggerButton(m.data.id);break;case"setSheet":_=(Q=t.components.get("theatre"))==null?void 0:Q.sheets.get(m.data.sheet),_!==void 0&&(e=_,o_.setSelection([_]));break;case"setSheetObject":_=(j=t.components.get("theatre"))==null?void 0:j.sheetObjects.get(`${m.data.sheet}_${m.data.key}`),_!==void 0&&o_.setSelection([_]);break;case"updateSheetObject":_=(z=t.components.get("theatre"))==null?void 0:z.sheetObjectCBs.get(m.data.sheetObject),_!==void 0&&_(m.data.values);break;case"updateTimeline":e=(U=t.components.get("theatre"))==null?void 0:U.sheets.get(m.data.sheet),e!==void 0&&(e.sequence.position=m.data.position);break;case"getScene":Ti.dispatchEvent({type:Mi.GET_SCENE});break;case"getObject":Ti.dispatchEvent({type:Mi.GET_OBJECT,value:m.data});break;case"updateObject":Ti.dispatchEvent({type:Mi.UPDATE_OBJECT,value:m.data});break}}function o(m){switch(m.event){case"custom":Ti.dispatchEvent({type:Mi.CUSTOM,value:m.data});break;case"setObject":Ti.dispatchEvent({type:Mi.SET_OBJECT,value:m.data});break;case"setScene":Ti.dispatchEvent({type:Mi.SET_SCENE,value:m.data});break}}function u(){o_.ui.hide()}function h(){o_.ui.restore(),o_.onSelectionChange(M=>{M.length<1||M.forEach(R=>{var j;let N=R.address.sheetId,H="setSheet",Q={};switch(R.type){case"Theatre_Sheet_PublicAPI":H="setSheet",Q={sheet:R.address.sheetId},e=(j=t.components.get("theatre"))==null?void 0:j.sheets.get(R.address.sheetId);break;case"Theatre_SheetObject_PublicAPI":H="setSheetObject",N+=`_${R.address.objectKey}`,Q={id:N,sheet:R.address.sheetId,key:R.address.objectKey};break}t.send({event:H,target:"app",data:Q})})});let m=0;const _=()=>{if(e!==void 0&&m!==e.sequence.position){m=e.sequence.position;const M=e;t.send({event:"updateTimeline",target:"app",data:{position:m,sheet:M.address.sheetId}})}},x=()=>{_(),requestAnimationFrame(x)};_(),x()}t.listen(m=>{n==="app"?r(m):o(m)}),t.editor?h():u()}o_.initialize(),mqe(Bi);V8.createRoot(document.getElementById("root")).render(Nt.jsx(Nt.Fragment,{children:Nt.jsxs(Nt.Fragment,{children:[Nt.jsx(NGe,{}),Bi.editor?Nt.jsx(fqe,{}):null]})}));
